se asigna a la consigna la
√∫ltima consigna v√°lida. Es decir, se mantiene la √∫ltima consigna v√°lida.
‚Äì Consigna = consigna de seguridad: al producirse el evento se asigna a la consigna la
consigna de seguridad. De esta forma se puede realizar un funcionamiento de
emergencia seguro.
6. Especifique en el √°rea "Rampa de consigna" el tiempo de rampa que se debe mantener al
modificarse la consigna, para evitar una sobreoscilaci√≥n.
7. Especifique en el √°rea "L√≠mite de consigna" un l√≠mite superior e inferior para la consigna.
8. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

Seleccionar el origen de la se√±al para los valores reales A, B y C
Para especificar los or√≠genes de la se√±al para los valores reales A, B y C proceda del siguiente
modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Regulador > Canal [n¬∞] > Error de regulaci√≥n".
3. Seleccione en el √°rea "Variable manipulada" el origen de la se√±al correspondiente para
cada valor real. Puede seleccionar si no utiliza ninguna se√±al ("cero") como origen o si
utiliza una de las entradas anal√≥gicas acondicionadas.
4. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

Registrar factores para los valores reales B y C, as√≠ como para el Offset
Para especificar los or√≠genes de la se√±al para los valores reales A, B y C proceda del siguiente
modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Regulador > Canal [n¬∞] > Error de regulaci√≥n".
3. Especifique en el √°rea "Sumar" el factor de ponderaci√≥n requerido para los valores actuales
B y C.
4. Especifique el "Offset" necesario que se debe adicionar a los valores reales.
5. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

1120

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Realizar un regulador de relaci√≥n o mezcla
Seleccionar el tipo de regulador
Para materializar un regulador de relaci√≥n o de mezcla, proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Regulador > Canal [n¬∞]".
3. En el √°rea "Tipo de regulador" seleccione la opci√≥n "Regulador de relaci√≥n o mezcla".
4. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

Acondicionamiento de la consigna
Para ajustar c√≥mo debe acondicionarse la consigna, proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Regulador > Canal [n¬∞] > Error de regulaci√≥n".
3. Seleccione en el √°rea "Origen de la consigna" el origen de referencia de la consigna.
4. Especifique un valor en el √°rea "Consigna de seguridad", el cual ser√° tomado como
consigna de seguridad en caso de fallo de la CPU y durante el arranque.
5. Especifique el comportamiento del m√≥dulo de regulaci√≥n v√°lido como "Reacci√≥n a fallo de
la CPU" y para el "Comportamiento en arranque". Las posibilidades de selecci√≥n son:
‚Äì Consigna = √∫ltima consigna v√°lida: al producirse el evento se asigna a la consigna la
√∫ltima consigna v√°lida. Es decir, se mantiene la √∫ltima consigna v√°lida.
‚Äì Consigna = consigna de seguridad: al producirse el evento se asigna a la consigna la
consigna de seguridad. De esta forma se puede realizar un funcionamiento de
emergencia seguro.
6. Especifique en el √°rea "Rampa de consigna" el tiempo de rampa que se debe mantener al
modificarse la consigna, para evitar una sobreoscilaci√≥n.
7. Especifique en el √°rea "L√≠mite de consigna" un l√≠mite superior e inferior para la consigna.
8. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

Seleccionar origen de la se√±al para los valores reales A y D
Para especificar los or√≠genes de la se√±al para los valores reales A y D proceda del siguiente
modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Regulador > Canal [n¬∞] > Error de regulaci√≥n".
3. Seleccione en el √°rea "Variable manipulada" el origen de la se√±al correspondiente para
cada valor real. Puede especificar no utilizar ninguna se√±al ("cero") como origen o utilizar
una de las entradas anal√≥gicas acondicionadas, para el valor real D puede seleccionar
tambi√©n el valor manipulado de uno de los reguladores.
4. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1121

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Registrar multiplicador
Para especificar los or√≠genes de la se√±al para los valores reales A y D proceda del siguiente
modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Regulador > Canal [n¬∞] > Error de regulaci√≥n".
3. Seleccione en el √°rea "Multiplicar" el Offset deseado.
4. Guarde los par√°metros configurados mediante "Proyecto > Guardar".
En el regulador de relaci√≥n, el valor real A se utiliza como magnitud de regulaci√≥n y el valor real
D como magnitud de relaci√≥n. La entrada de consigna sirve de factor de relaci√≥n. √âsta se
acondiciona para obtener una consigna efectiva mediante multiplicaci√≥n por el valor real D y
adici√≥n de un offset ajustable. Si se desactiva el valor real D, solamente se suma el Offset a la
consigna.

Ajustar la generaci√≥n de alarmas
Procedimiento
Para ajustar la generaci√≥n de alarma, proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Regulador > Canal [n¬∞] > Error de regulaci√≥n".
3. En el √°rea "Generar alarma" seleccione las opciones necesarias:
‚Äì En el √°rea "Avisador de valor l√≠mite de" seleccione la se√±al a la que se debe aplicar la
alarma.
‚Äì En "Alarma l√≠mite superior" especifique el valor a partir del cual se disparar√° la alarma
al alcanzarse el l√≠mite superior.
‚Äì En "Advertencia l√≠mite superior" especifique el valor a partir del cual se disparar√° una
advertencia cuando se produzca una aproximaci√≥n al l√≠mite superior.
‚Äì En "Advertencia l√≠mite inferior" especifique el valor a partir del cual se disparar√° una
advertencia cuando se produzca una aproximaci√≥n al l√≠mite inferior.
‚Äì En "Alarma l√≠mite inferior" especifique el valor a partir del cual se disparar√° la alarma al
alcanzarse el l√≠mite inferior.
‚Äì Para evitar que centelleen los indicadores de vigilancia se puede configurar una
hist√©resis en "Hist√©resis".
4. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

1122

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Algoritmo de regulaci√≥n
Realizar una regulaci√≥n P
Procedimiento
Para realizar una regulaci√≥n P proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Regulador > Canal [n¬∞] > Algoritmo de regulaci√≥n".
3. En el √°rea "Tipo" seleccione la opci√≥n "Regulador PID".
4. En el √°rea "General" seleccione la opci√≥n "P", en "Modo de operaci√≥n".
Todas las opciones parametrizables para una regulaci√≥n P se activan, el resto de opciones
se desactivan.
5. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

Realizar una regulaci√≥n PI
Procedimiento
Para realizar una regulaci√≥n PI proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Regulador > Canal [n¬∞] > Algoritmo de regulaci√≥n".
3. En el √°rea "Tipo" seleccione la opci√≥n "Regulador PID".
4. En el √°rea "General" seleccione la opci√≥n "PI", en "Modo de operaci√≥n".
Todas las opciones parametrizables para una regulaci√≥n PI se activan, el resto de opciones
se desactivan.
5. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

Realizar una regulaci√≥n I
Procedimiento
Para realizar una regulaci√≥n I proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Regulador > Canal [n¬∞] > Algoritmo de regulaci√≥n".
3. En el √°rea "Tipo" seleccione la opci√≥n "Regulador PID".
4. En el √°rea "General" seleccione la opci√≥n "I", en "Modo de operaci√≥n".
Todas las opciones parametrizables para una regulaci√≥n I se activan, el resto de opciones
se desactivan.
5. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1123

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Realizar una regulaci√≥n PID
Procedimiento
Para realizar una regulaci√≥n PID proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Regulador > Canal [n¬∞] > Algoritmo de regulaci√≥n".
3. En el √°rea "Tipo" seleccione la opci√≥n "Regulador PID".
4. En el √°rea "General" seleccione la opci√≥n "PID", en "Modo de operaci√≥n".
Todas las opciones parametrizables para una regulaci√≥n PID se activan, el resto de
opciones se desactivan.
5. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

Realizar una regulaci√≥n PD
Procedimiento
Para realizar una regulaci√≥n PD proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Regulador > Canal [n¬∞] > Algoritmo de regulaci√≥n".
3. En el √°rea "Tipo" seleccione la opci√≥n "Regulador PID".
4. En el √°rea "General" seleccione la opci√≥n "PD", en "Modo de operaci√≥n".
Todas las opciones parametrizables para una regulaci√≥n PD se activan, el resto de
opciones se desactivan.
5. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

Realizar un regulador de temperatura con l√≥gica difusa
Procedimiento
Para llevar a cabo una regulaci√≥n de temperatura por l√≥gica difusa, proceda del modo
siguiente:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Regulador > Canal [n¬∞] > Algoritmo de regulaci√≥n".
3. En el √°rea "Tipo" seleccione la opci√≥n "M√≥dulo de regulaci√≥n de temperatura por l√≥gica
difusa".
Todas las opciones parametrizables para m√≥dulo de regulaci√≥n de temperatura por l√≥gica
difusa se activan, el resto de opciones se desactivan.
4. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

1124

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Suprimir el nivel de ruido del error de regulaci√≥n
Procedimiento
Para suprimir el nivel de ruido del error de regulaci√≥n proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Regulador > Canal [n¬∞] > Algoritmo de regulaci√≥n".
3. Especifique en el √°rea "General" el ajuste "Ancho de zona muerta".
4. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

Control anticipativo
Procedimiento
Para conectar una variable perturbadora para control anticipativo proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Regulador > Canal [n¬∞] > Algoritmo de regulaci√≥n".
3. En el √°rea "General" seleccione de la lista "Origen de la perturbaci√≥n" el origen de la
variable perturbadora.
Seleccione la entrada "Cero" para no conectar ninguna variable perturbadora para control
anticipativo.
4. En "Factor de perturbaci√≥n" especifique un valor de ponderaci√≥n para la variable
perturbadora.
Un valor < 0 debilita la perturbaci√≥n, un valor > 0 amplifica la perturbaci√≥n. La perturbaci√≥n
permanece invariable si se especifica el valor 1.
5. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

Configurar la acci√≥n P por rama de realimentaci√≥n
Procedimiento
Para realizar un regulador de valor fijo o en cascada proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Regulador > Canal [n¬∞] > Algoritmo de regulaci√≥n".
3. En el √°rea "Acci√≥n P" seleccione la opci√≥n "Por rama de realimentaci√≥n".
Si la opci√≥n est√° activada, la acci√≥n P queda configurada por rama de realimentaci√≥n.
4. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1125

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Debilitar la acci√≥n D cuando se producen modificaciones en la consigna
Seleccionar el tipo de regulador
Para realizar un regulador de valor fijo o en cascada proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Regulador > Canal [n¬∞] > Algoritmo de regulaci√≥n".
3. En el √°rea "Acci√≥n D" seleccione con opci√≥n "Acci√≥n D" el origen de la acci√≥n D.
4. En el √°rea "Factor derivativo" especifique el factor para la acci√≥n D.
5. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

Invertir el efecto del regulador
Principio
La inversi√≥n del regulador, cambiando la asignaci√≥n de "error de regulaci√≥n ascendente =
magnitud manipulada ascendente" a "error de regulaci√≥n ascendente = magnitud manipulada
descendente", se realiza ajustando una ganancia proporcional (GAIN).

Procedimiento
Para invertir el efecto del regulador proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Regulador > Canal [n¬∞] > Algoritmo de regulaci√≥n".
3. Especifique en el √°rea "General" una ganancia proporcional con signo inverso.
Si se encuentra especificada una ganancia proporcional positiva y se desea invertir el
efecto del regulador, especifique una ganancia proporcional negativa.
4. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

Salida del regulador
Realizar un regulador continuo
Para realizar un regulador continuo se requiere un m√≥dulo anal√≥gico.

Procedimiento
1. Aplicar la variable manipulada externa (P√°gina 1128)
2. Ajustar la variable manipulada de seguridad (P√°gina 1129)
3. Activar el modo de seguimiento (P√°gina 1128)
4. Limitar la variable manipulada (P√°gina 1130)

1126

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
5. Controlar dos actuadores - rango partido (P√°gina 1130)
6. Seleccionar la se√±al de salida y el tipo de se√±al (P√°gina 1131)

Regulador paso a paso sin realimentaci√≥n de posici√≥n
Para realizar un regulador paso a paso sin realimentaci√≥n de posici√≥n se requiere un m√≥dulo
digital.

Procedimiento
1. Seleccionar la salida del regulador Regulador paso a paso sin realimentaci√≥n de posici√≥n
2. Aplicar la variable manipulada externa (P√°gina 1128)
3. Ajustar la variable manipulada de seguridad (P√°gina 1129)
4. Formador de impulsos de la regulaci√≥n paso a paso (P√°gina 1130)

Realizar un regulador paso a paso con realimentaci√≥n de posici√≥n
Para realizar un regulador paso a paso con realimentaci√≥n de posici√≥n se requiere un m√≥dulo
digital.

Procedimiento
1. Seleccionar la salida del regulador Regulador paso a paso con realimentaci√≥n de posici√≥n
2. Aplicar la variable manipulada externa (P√°gina 1128)
3. Activar el modo de seguimiento (P√°gina 1128)
4. Ajustar la variable manipulada de seguridad (P√°gina 1129)
5. Limitar la variable manipulada (P√°gina 1130)
6. Ajustar la realimentaci√≥n de posici√≥n (P√°gina 1129)
7. Formador de impulsos de la regulaci√≥n paso a paso (P√°gina 1130)

Realizar un regulador de impulsos
Para realizar un regulador de impulsos se requiere un m√≥dulo digital.

Procedimiento
1. Seleccionar la salida del regulador Regulador de impulsos
2. Aplicar la variable manipulada externa (P√°gina 1128)
3. Activar el modo de seguimiento (P√°gina 1128)
4. Ajustar la variable manipulada de seguridad (P√°gina 1129)
5. Limitar la variable manipulada (P√°gina 1130)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1127

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
6. Acondicionar la se√±al anal√≥gica para la conversi√≥n en se√±al digital
7. Convertir una se√±al anal√≥gica en una se√±al digital (P√°gina 1131)

Parametrizar las funciones de la salida del regulador
Aplicar la variable manipulada externa
Procedimiento
Para aplicar la variable manipulada externa proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Regulador > Canal [n¬∞] > Salida del regulador".
3. Seleccione en el √°rea "Magnitud manipulada externa" la opci√≥n con la debe se debe activar
la magnitud manipulada externa. Para ello puede seleccionar las siguientes opciones:
‚Äì Activaci√≥n del bloque de funci√≥n.
‚Äì Activaci√≥n por el bloque de funci√≥n o por una de las entradas digitales.
4. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

Activar el modo de seguimiento
Procedimiento
Para activar el modo de seguimiento proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Regulador > Canal [n¬∞] > Salida del regulador".
3. Seleccione en el √°rea "Modo de seguimiento" la opci√≥n que debe activar la magnitud
manipulada externa. Para ello puede seleccionar las siguientes opciones:
‚Äì Activaci√≥n por el bloque de funci√≥n.
‚Äì Activaci√≥n por el bloque de funci√≥n o una de las entradas digitales.
4. Seleccione en el √°rea "Modo de seguimiento" el origen de la se√±al a aplicar para el
seguimiento. Para ello puede seleccionar las siguientes opciones:
‚Äì Cero, con lo cual no se emplea ning√∫n origen.
‚Äì Una de las entradas anal√≥gicas.
5. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

1128

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Ajustar la realimentaci√≥n de posici√≥n
Procedimiento
Para ajustar la realimentaci√≥n de posici√≥n proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Salida digital > Salida [n¬∞]".
3. Seleccione en el √°rea "Entrada de realimentaci√≥n de posici√≥n" la opci√≥n "Origen" para
especificar la se√±al de realimentaci√≥n de posici√≥n.
‚Äì Cero: no se produce ninguna realimentaci√≥n de posici√≥n.
‚Äì Una de las entradas anal√≥gicas acondicionadas.
4. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

Ajustar la variable manipulada de seguridad
Procedimiento
Para ajustar la variable manipulada de seguridad proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Regulador > Canal [n¬∞] > Salida del regulador".
3. Especifique en el √°rea "Variable manipulada de seguridad" el valor a utilizar como variable
manipulada de seguridad.
4. Seleccione en el √°rea "Activaci√≥n" la opci√≥n que debe activar la magnitud manipulada
externa. Para ello puede seleccionar las siguientes opciones:
‚Äì Activaci√≥n del bloque de funci√≥n.
‚Äì Activaci√≥n del bloque de funci√≥n o de una de las entradas digitales.
5. Seleccione en "Reacci√≥n al arrancar el m√≥dulo" la opci√≥n a ejecutar al arrancar el m√≥dulo.
Para ello puede seleccionar las siguientes opciones:
‚Äì Lazo cerrado: el m√≥dulo entra inmediatamente en este modo al arrancar.
‚Äì Variable manipulada de seguridad: primero se regula a la variable manipulada de
seguridad.
6. Seleccione en el √°rea "Reacci√≥n si falla el transductor de medida del valor real A" la opci√≥n
a ejecutar si falla el transductor de medida del valor real A.
7. Seleccione en el √°rea "Reacci√≥n si falla el transductor de medida de una entrada" la opci√≥n
a ejecutar si falla el transductor de medida de una entrada.
8. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1129

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Limitar la variable manipulada
Procedimiento
Para limitar la variable manipulada proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Regulador > Canal [n¬∞] > Salida del regulador".
3. Especifique en el √°rea "L√≠mite de se√±al de salida" los siguientes valores:
‚Äì Valor superior: representa el l√≠mite superior para la se√±al de salida.
‚Äì Valor inferior: representa el l√≠mite interior para la se√±al de salida.
4. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

Controlar dos actuadores - rango partido
Procedimiento
Para controlar dos actuadores proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Regulador > Canal [n¬∞] > Salida del regulador".
3. Seleccione en el √°rea "Rango partido" la opci√≥n "Activar" para controlar dos actuadores.
4. Especifique los siguientes valores, para las se√±ales de entrada y salida A y tambi√©n para
las entradas de entrada y salida B.
‚Äì Se√±al de entrada inferior.
‚Äì Se√±al de entrada superior.
‚Äì Se√±al de salida inferior.
‚Äì Se√±al de salida superior.
5. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

Formador de impulsos de la regulaci√≥n paso a paso
Procedimiento
Para parametrizar el formador de impulsos proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Salida digital > Salida [n¬∞]".

1130

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
3. Especifique en el √°rea "Formador de impulsos" los siguientes par√°metros:
‚Äì Tiempo de posicionamiento del motor.
‚Äì Duraci√≥n m√≠nima de impulso.
‚Äì Duraci√≥n m√≠nima de pausa.
4. Seleccione la opci√≥n adecuada para los valores superior e inferior, a partir de la cual se
aplicar√° el valor:
‚Äì del bloque de funci√≥n.
‚Äì Del bloque de funci√≥n o de una de las entradas digitales.
5. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

Convertir una se√±al anal√≥gica en una se√±al digital
Procedimiento
Para convertir una se√±al anal√≥gica en una se√±al digital proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Salida digital > Canal [n¬∞]".
3. Especifique en el √°rea "Formador de impulsos" los siguientes par√°metros:
‚Äì Duraci√≥n m√≠nima de impulso.
‚Äì Duraci√≥n m√≠nima de pausa.
4. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

Seleccionar la se√±al de salida y el tipo de se√±al
Procedimiento
Para seleccionar la se√±al de salida y el tipo de se√±al proceda del siguiente modo:
1. En la vista de dispositivos, haga doble clic en la "Configuraci√≥n de par√°metros" del m√≥dulo.
2. En la vista de configuraci√≥n seleccione "Salida anal√≥gica > Salida [n¬∞]".
3. Seleccione en la opci√≥n "Origen" la se√±al a utilizar como se√±al de salida. Se proporcionan
las siguientes opciones:
‚Äì Cero: ning√∫n origen para la se√±al de salida.
‚Äì Una de las entradas anal√≥gicas.
‚Äì Una de las variables manipuladas para el regulador A o B.
4. Seleccione en la opci√≥n "Tipo de se√±al" el tipo de se√±al en que se emitir√° la se√±al de salida.
5. Guarde los par√°metros configurados mediante "Proyecto > Guardar".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1131

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

3.5.7.3

Programaci√≥n del FM 455

3.5.7.4

Puesta en servicio del FM 455

Crear y configurar DBs de instancia
Procedimiento
Para satisfacer los requisitos para la puesta en marcha, proceda de la manera siguiente:
1. Cree un programa de usuario que efect√∫e c√≠clicamente una llamada a la instrucci√≥n
PID_FM_455 en un OB de alarma c√≠clica.
2. En el programa del usuario, ponga READ_VAR c√≠clicamente a TRUE.
3. Genere para cada canal del regulador un DB de instancia individual de la
instrucci√≥nPID_FM_455.
4. Para cada DB de instancia, introduzca la direcci√≥n de m√≥dulo en el par√°metro
PID_FM_455.MOD_ADDR.
Utilice como direcci√≥n de m√≥dulo del FM 455 la direcci√≥n inicial especificada al configurar
el hardware.
5. Introduzca en el par√°metro PID_FM_455.CHANNEL el n√∫mero del canal de regulaci√≥n (1 ...
16).
6. Si utiliza la instrucci√≥n PID_PAR_455, introduzca en el par√°metro
PID_PAR_455.CHANNEL el n√∫mero del canal del regulador.
7. Compruebe que est√© activado el "Tipo de sensor Entrada anal√≥gica" del canal en cuesti√≥n.
Si no se procesa la entrada anal√≥gica, todos los par√°metros PID se ajustan a cero, y no se
calcula ninguna variable manipulada.
Nota
DBs multiinstancia
Si utiliza DBs multiinstancia en su proyecto, los FM se deben poner en servicio a trav√©s de
una tabla de observaci√≥n.

Puesta en servicio del regulador
Introducci√≥n
Los par√°metros PID se pueden optimizar del modo siguiente:
‚óè Regulador PID/PI (regulador paso a paso, regulador continuo, regulador de impulsos):
Manual
‚óè Regulador de temperatura por l√≥gica difusa: Ciclo continuo
‚óè Regulador paso a paso: Autom√°ticamente con la instrucci√≥n TUN_ES

1132

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
‚óè Regulador continuo: Autom√°ticamente con la instrucci√≥n TUN_EC
‚óè Regulador de impulsos: Autom√°ticamente con la instrucci√≥n TUN_EC

Procedimiento
Para optimizar un regulador, proceda del siguiente modo:
1. Coloque la CPU en el estado RUN.
2. Si utiliza un regulador paso a paso, mida el tiempo de posicionamiento del motor.
3. Optimice los par√°metros PID con alguna de las posibilidades citadas anteriormente.
4. Observe el lazo de regulaci√≥n con el registrador de curvas.

Consulte tambi√©n
Medir el tiempo de posicionamiento del motor (P√°gina 1140)

Optimizar los par√°metros PID manualmente
Requisitos
En la parametrizaci√≥n del algoritmo de regulaci√≥n ha elegido el "Regulador PID".

Procedimiento
Para ajustar manualmente un regulador PI/PID, proceda del modo siguiente:
1. Seleccione el DB de instancia del canal que desee optimizar.
2. Haga clic en el s√≠mbolo "Start".
Si a√∫n no existe ninguna conexi√≥n online, esta se crea. Se graban los valores actuales de
consigna, valor real y variable manipulada.
3. Introduzca los valores correspondientes para la acci√≥n P, la acci√≥n I, la acci√≥n D y el retardo.
4. En el grupo "Optimizaci√≥n", haga clic en el s√≠mbolo

"Enviar par√°metros PID al FM".

5. En el grupo "Valores actuales", active la casilla de verificaci√≥n "Especificar consigna".
6. Introduzca una nueva consigna.
7. Desactive en caso necesario la casilla de verificaci√≥n "Modo manual" y, en el grupo
"Valores actuales", haga clic en el s√≠mbolo .
El regulador trabaja con los nuevos par√°metros y regula seg√∫n la nueva consigna.
8. Compruebe la calidad de los par√°metros PID mediante los recorridos de la curva.
9. Repita los pasos del 3 hasta el 8, hasta que est√© satisfecho/a con el resultado de la
regulaci√≥n.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1133

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Identificaci√≥n de recorridos por l√≥gica difusa
Requisitos del proceso para un regulador de temperatura por l√≥gica difusa
Requisitos
Para conseguir una regulaci√≥n √≥ptima con la ayuda del regulador de temperatura por l√≥gica
difusa, el proceso debe satisfacer los requisitos siguientes:
‚óè En caso de calefacciones de ba√±os, el l√≠quido calefactor debe estar bien mezclado.
‚óè En caso de regulaciones tipo ba√±o en ba√±o, ambos l√≠quidos deben estar bien agitados.
Simult√°neamente, se debe proporcionar una buena transferencia de calor entre todos los
medios caloportadores. Si se emplean materiales que son malos caloportadores, para
conseguir un buen transporte del calor se deben utilizar superficies de transferencia de gran
tama√±o.
‚óè En caso de regulaci√≥n de la temperatura del aire ambiental, se debe proporcionar una
buena mezcla (p. ej., mediante ventiladores).
‚óè La ganancia del sistema regulado no debe superar un factor 3.
‚óè El tiempo de retardo debe equivaler como m√°ximo al 3% del tiempo de compensaci√≥n.
‚óè Durante el periodo de muestreo del regulador, y con la salida de la variable manipulada en
el valor m√°ximo, la temperatura que se desea regular debe variar como m√°ximo un 1‚Ä∞ de
la temperatura m√°xima preajustada.

Clasificaci√≥n de los sistemas regulados
Un sistema regulado, o bien un proceso que se desea regular, se caracteriza por par√°metros
como, p. ej., la potencia de calefacci√≥n, la masa que se debe calentar o la capacidad t√©rmica
del medio que se desea calentar. En lo que se refiere al regulador por l√≥gica difusa, se efect√∫a
una distinci√≥n entre sistemas de temperatura regulada "cr√≠ticos" y "no cr√≠ticos" del modo
siguiente: La regulaci√≥n es tanto m√°s cr√≠tica
‚óè cuanto mayor es la potencia de calefacci√≥n,
‚óè cuanto mayor es la capacidad t√©rmica de la calefacci√≥n,
‚óè cuanto menor es la capacidad t√©rmica del medio que se desea calentar,
‚óè cuanto mayor es la resistencia a la transmisi√≥n de calor,
‚óè cuanto menor es la superficie de transferencia de calor.
Tras el seguimiento autom√°tico de un salto en la variable manipulada por parte del sistema
regulado, √©ste reacciona con una respuesta a un escal√≥n. La clasificaci√≥n de los sistemas
regulados tambi√©n se puede llevar a cabo en funci√≥n de esta respuesta a un escal√≥n: La
regulaci√≥n es tanto m√°s cr√≠tica cuanto mayor es el cociente tu / tg y cuanto mayor es la ganancia
del sistema regulado. Si tu / tg < 1/10, el sistema regulado no es cr√≠tico.

Consulte tambi√©n
Valores caracter√≠sticos del sistema regulado (P√°gina 645)

1134

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Desarrollo de la identificaci√≥n del sistema por l√≥gica difusa
Desarrollo de la optimizaci√≥n de par√°metros con un regulador de temperatura por l√≥gica difusa
La optimizaci√≥n de par√°metros se basa en un regulador por l√≥gica difusa autooptimizante.
La identificaci√≥n del sistema regulado comienza con una fase de observaci√≥n, durante la cual
la potencia de calefacci√≥n emitida es nula. Esta fase de observaci√≥n dura lo siguiente:
‚óè Fase de observaci√≥n de un regulador continuo: aprox. 1 minuto
‚óè Fase de observaci√≥n de un regulador paso a paso: aprox. 1 minuto + 1/2 x tiempo de
desplazamiento del actuador
Este tiempo se emplea para poder detectar tendencias de temperatura en el medio calefactor.
A continuaci√≥n se emite el 100% de la potencia m√°xima de calefacci√≥n; esto se aprecia en el
par√°metro de salida LMN del DB de instancia de la instrucci√≥n PID_FM.
El √°rea del primer 4% de incremento de la temperatura del rango de consigna se utiliza para
la identificaci√≥n, ya que tanto en el 1% como en el 4% del incremento de temperatura se
obtiene informaci√≥n sobre el comportamiento del proceso a partir del tiempo transcurrido.
La identificaci√≥n concluye cuando la potencia de calefacci√≥n pasa a ser inferior al 100%. Este
comportamiento se puede utilizar, p. ej., para desconectar la identificaci√≥n a trav√©s del
programa de usuario. Tras la fase de identificaci√≥n, el regulador sigue funcionando con los
par√°metros obtenidos.
Si la divergencia provocada por el salto de consigna no se compensa y la potencia de
calefacci√≥n permanece a cero de manera continua, significa que la identificaci√≥n ha resultado
fallida, es decir, el regulador no puede regular el sistema regulado al que est√° conectado.

Comportamiento del regulador para distintos sistemas regulados
Si el sistema regulado es "no cr√≠tico", no hay problemas en la identificaci√≥n ni en la regulaci√≥n.
La identificaci√≥n de un sistema regulado "demasiado cr√≠tico" queda cancelada. Si un sistema
regulado se identifica como "cr√≠tico", su regulaci√≥n se efect√∫a con mucha "precauci√≥n", es
decir, despacio.

Efectuar la identificaci√≥n de sistema por l√≥gica difusa.
Requisitos
En la parametrizaci√≥n del algoritmo de regulaci√≥n ha elegido el "Regulador por l√≥gica difusa".
Si es posible, aseg√∫rese de que antes de la identificaci√≥n el sistema regulado se haya
estabilizado (ning√∫n proceso activo de calefacci√≥n o refrigeraci√≥n) o var√≠e con lentitud y de
forma mon√≥tona. Se puede utilizar como criterio al respecto que el comportamiento de la
variaci√≥n de temperatura durante un minuto se pueda aproximar por una recta. En procesos
r√°pidos, este requisito resulta especialmente actual.
Dado que el valor emitido para la variable manipulada es nulo durante aprox. un minuto al
principio de la identificaci√≥n del regulador, la temperatura que se desea regular debe ser
cercana a la temperatura ambiente.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1135

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Iniciar la identificaci√≥n del sistema por l√≥gica difusa
Para optimizar un regulador por l√≥gica difusa, proceda del modo siguiente:
1. Seleccione el DB de instancia del canal que desee optimizar.
2. Haga clic en el s√≠mbolo "Start".
Si a√∫n no existe ninguna conexi√≥n online, esta se crea. Se graban los valores actuales de
consigna, valor real y variable manipulada.
3. En el grupo "Optimizaci√≥n" introduzca una nueva consigna (SP_OP).
La nueva consigna debe cumplir las condiciones siguientes:
‚Äì Salto de consigna > 5%
‚Äì Nueva consigna > valor real + l√≠mite superior de la consigna x 0,12
4. En el grupo "Optimizaci√≥n", haga clic en el s√≠mbolo
difusa".

"Identificaci√≥n del sistema por l√≥gica

Resultado
La nueva consigna (SP_OP), SP_OP_ON = TRUE y FUZID_ON = TRUE se env√≠an al FM. La
identificaci√≥n del sistema por l√≥gica difusa comienza. El par√°metro IDSTATUS de la
instrucci√≥n CH_DIAG proporciona informaci√≥n sobre el estado de la identificaci√≥n. En el
cuadro de visualizaci√≥n de estado puede ver si hay una identificaci√≥n del sistema por l√≥gica
difusa en estado activo o en ejecuci√≥n.

Desactivar la identificaci√≥n del sistema por l√≥gica difusa
Mientras el bit FUZID_ON = TRUE, cada vez que se produzca un salto de consigna
suficientemente grande se iniciar√° la identificaci√≥n siguiente.
Para desconectar el modo de optimizaci√≥n, proceda del modo siguiente:
1. Inserte FUZID_ON en una tabla de observaci√≥n.
2. Defina FUZID_ON = FALSE.
Nota
La desconexi√≥n del modo de optimizaci√≥n FUZID_ON = FALSE antes de terminar la
identificaci√≥n no provoca que esta se detenga. Una vez iniciada la identificaci√≥n, esta sigue
adelante pase lo que pase, excepto si se produce un salto de consigna negativo.

Repetir la identificaci√≥n del sistema por l√≥gica difusa
Cada vez que se produce un salto de consigna ‚â•12% se efect√∫a una nueva identificaci√≥n, a no
ser que esta se desconecte de nuevo con FUZID_ON = FALSE.
Tambi√©n existe la posibilidad de iniciar de nuevo la identificaci√≥n disminuyendo y, a
continuaci√≥n, aumentando de nuevo la consigna en un valor >12%.

1136

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Cancelar la identificaci√≥n del sistema por l√≥gica difusa
La identificaci√≥n se puede cancelar en los casos siguientes:
‚óè Por parte del regulador, si se identifica un sistema regulado "cr√≠tico". Tras la cancelaci√≥n,
el regulador se encuentra en estado de error. Este estado se manifiesta en que el regulador
desactiva la variable manipulada de forma permanente. Este estado no var√≠a aunque se
desconecte la optimizaci√≥n. El inicio de una nueva identificaci√≥n anula el estado de error.
Se puede obtener informaci√≥n sobre el estado de la identificaci√≥n a trav√©s del par√°metro
IDSTATUS del FB CH_DIAG. M√°s detalles al respecto al final de este cap√≠tulo, en la
secci√≥n "Informaci√≥n sobre el estado del regulador".
‚óè Por parte del operador, generando un salto de consigna negativo, siempre y cuando la
consigna rebase por defecto la condici√≥n 2 (v√©ase m√°s arriba, "¬øC√≥mo iniciar la
identificaci√≥n?").
Para cancelar la optimizaci√≥n, proceda del modo siguiente:
1. Introduzca una nueva consigna que sea inferior al valor real actual y que cumpla las mismas
condiciones que al principio de la identificaci√≥n del sistema por l√≥gica difusa.
2. En el grupo "Optimizaci√≥n", haga clic en el s√≠mbolo
difusa".

"Identificaci√≥n del sistema por l√≥gica

Cargar los par√°metros optimizados en el dispositivo
Introducci√≥n
Para impedir que los par√°metros del FM se sobrescriban con los datos del sistema en el
siguiente arranque de la CPU, se puede proceder del modo siguiente:
‚óè Tras cada arranque del FM , cargue en este con LOAD_PAR=TRUE los par√°metros PID
optimizados del DB de instancia del PID_FM.
‚óè Cargue los par√°metros PID optimizados en el SDB.
Nota
Los juegos de par√°metros PI, PID y SAVE no se pueden guardar en el SDB.

Procedimiento
Para cargar los par√°metros en el SDB, proceda del siguiente modo:
1. Haga clic en el s√≠mbolo
"Transfiera datos online al proyecto offline".
Los par√°metros PID se guardan en el ajuste de par√°metros del FM.
2. Pare la CPU.
3. Haga clic en el s√≠mbolo

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

"Cargar en dispositivo".

1137

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Trabajar con el registrador de curvas
Observar
1. En la vista de dispositivos, bajo el m√≥dulo, haga doble clic en "Puesta en servicio".
2. Navegue en la vista de configuraci√≥n hasta "Registrador de curvas".
3. Seleccione el DB de instancia que desee observar. Tras la selecci√≥n se muestra el canal al
que est√° asignado el DB de instancia.
4. Defina el tiempo de actualizaci√≥n con el que debe registrarse el registrador de curvas.
5. Haga clic en "Medici√≥n activada" para iniciar la medici√≥n.
6. Haga clic en "Medici√≥n desactivada" para finalizar la medici√≥n.

Procedimiento
Para adaptar la escala, proceda del siguiente modo:
1. En la vista de dispositivos, bajo el m√≥dulo, haga doble clic en "Puesta en servicio".
2. Navegue en la vista de configuraci√≥n hasta "Registrador de curvas".
3. Para modificar el eje de tiempo:
‚Äì Haga clic en el bot√≥n de flecha junto a la fecha, para abrir un calendario. Seleccione una
fecha en el calendario. Para bloquear la selecci√≥n, haga clic en el candado azul. Esta
posibilidad existe tanto para la fecha inicial como para la fecha final.
‚Äì Haga clic con el puntero del rat√≥n en la escala de tiempo. El puntero del rat√≥n se
representa como flecha a la izquierda/derecha. Mantenga el puntero del rat√≥n
presionado y arr√°strelo hacia la izquierda o derecha.
Si el tiempo inicial o final est√° bloqueado, se modifica la escala del tiempo.
Si no est√° bloqueado el tiempo inicial ni el final, se modifica el per√≠odo indicado; la escala
se mantiene igual.
4. Para modificar el eje de tiempo:
‚Äì Haga clic en el campo de entrada para el valor superior o el valor inferior mostrado.
Introduzca ah√≠ el valor deseado. Para bloquear la selecci√≥n, haga clic en el candado
azul. Esta posibilidad existe tanto para el valor superior como tambi√©n para el inferior.
‚Äì Haga clic con el puntero del rat√≥n en la escala de valores. El puntero del rat√≥n se
representa como flecha arriba/abajo. Mantenga el puntero del rat√≥n presionado y
arr√°strelo hacia arriba o abajo.
Si el valor superior o inferior est√° bloqueado, se modifica la escala del eje de valores.
Si no est√° bloqueado el valor superior ni el valor inferior, se modifica el rango indicado;
la escala se mantiene igual.

1138

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Modificar los par√°metros a trav√©s de la HMI
Procedimiento
Si desea modificar los par√°metros del regulador de la instrucci√≥n PID_FM mediante el manejo
a trav√©s de la HMI, proceda del modo siguiente:
1. Desde la HMI, escriba en la CPU (v√©ase ‚ë†) en un DB auxiliar los par√°metros que se deben
modificar.
2. Ponga PID_FM.COM_RST a TRUE.
La instrucci√≥n ejecuta una inicializaci√≥n. Los par√°metros se sincronizan entre el FM y la
CPU (v√©ase ‚ë°).
3. Transfiera los par√°metros que se deben modificar desde el DB auxiliar hasta el DB de
instancia de la instrucci√≥n PID_FM (v√©ase ‚ë¢).
4. Ponga PID_FM.LOAD_PAR a TRUE.
Los par√°metros modificados se transfieren al FM (v√©ase ‚ë£).
Resulta necesario depositar los par√°metros en un DB auxiliar porque, tras el arranque de la
CPU, PID_FM lee con COM_RST = TRUE aquellos par√°metros del m√≥dulo que la CPU ha
transferido previamente desde los datos del sistema al FM.
&38

23



'%GHD\XGD


WUDVODLQLFLDOL]DFL¬µQFRQ
&20B567 758(
'%GH
LQVWDQFLDGHO
)%
3,'B)0

)%
3,'B)0

)0


/2$'B3$5 758(
&20B567 758(


'DWRVGHO
VLVWHPD

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

&DUJDGHORVGDWRVGHO
VLVWHPDDUUDQTXH
6723 ‡µ∫ 581 OD&38

1139

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Medir el tiempo de posicionamiento del motor
Introducci√≥n
Para conseguir un buen resultado de la regulaci√≥n, el tiempo de posicionamiento del motor
debe ser lo m√°s preciso posible. Los datos de la documentaci√≥n del elemento final de control
son valores medios para este tipo de elemento final de control. El valor puede variar para el
elemento final de control que se use en cada momento.
Si utiliza actuadores con realimentaci√≥n de posici√≥n o con se√±ales de tope, es posible medir
el tiempo de posicionamiento del motor durante la puesta en servicio. Si no se dispone de una
realimentaci√≥n de posici√≥n ni de se√±ales de tope, no es posible medir el tiempo de
posicionamiento del motor.

Requisitos
‚óè El valor parametrizado del tiempo de posicionamiento del motor debe equivaler como
m√≠nimo a la mitad del tiempo de posicionamiento real. El actuador se desplaza en un
sentido durante el doble del tiempo de posicionamiento como m√°ximo.
‚óè En los actuadores con realimentaci√≥n de posici√≥n anal√≥gica, la realimentaci√≥n de posici√≥n
debe estar interconectada.
‚óè En los actuadores con se√±ales de tope, las se√±ales de tope deben estar interconectadas.

Actuadores con realimentaci√≥n de posici√≥n anal√≥gica
Para medir el tiempo de posicionamiento del motor con realimentaci√≥n de posici√≥n, proceda
del siguiente modo:
1. Elija el DB instancia para el que se debe medir el tiempo de posicionamiento del motor.
2. Active la casilla de verificaci√≥n "Utilizar realimentaci√≥n de posici√≥n".
3. En el campo de entrada "Posici√≥n de destino" indique hacia d√≥nde desea mover el
elemento final de control.
La realimentaci√≥n de posici√≥n actual (posici√≥n de inicio) se muestra. Haga clic en el
bot√≥n
"Iniciar medici√≥n tiempo de posicionamiento".

Resultado
El elemento final de control se desplaza hasta la posici√≥n de destino desde la posici√≥n de
inicio. La medici√≥n del tiempo se inicia de inmediato y finaliza en cuanto el elemento final de
control ha alcanzado la posici√≥n de destino. El tiempo de posicionamiento del motor se calcula
seg√∫n la f√≥rmula:
Tiempo de posicionamiento del motor = (L√≠mite superior del valor de salida - L√≠mite inferior del
valor de salida) x Tiempo de medici√≥n /VALOR ABSOLUTO(Posici√≥n de destino - Posici√≥n de
inicio).
Se muestran el progreso y el estado de la medici√≥n del tiempo de posicionamiento. El tiempo
de posicionamiento medido se muestra en el campo "Tiempo de actuaci√≥n medido". Una vez
finalizada la medici√≥n del tiempo de posicionamiento se conecta el modo manual de las

1140

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
se√±ales de posicionamiento (LMNSOPON = TRUE). El elemento final de control deja de
moverse.

Actuadores con se√±ales de tope
Para medir el tiempo de posicionamiento del motor con se√±ales de tope, proceda del siguiente
modo:
1. Elija el DB instancia para el que se debe medir el tiempo de posicionamiento del motor.
2. Active la casilla de verificaci√≥n "Utilizar se√±ales de tope del actuador".
3. Haga clic en el bot√≥n

"Iniciar medici√≥n tiempo de posicionamiento".

Resultado
El elemento final de control se mueve primero hasta el tope inferior, despu√©s, hasta el tope
superior y, de nuevo, hasta el tope inferior. La medici√≥n del tiempo se inicia cuando el actuador
ha alcanzado el tope inferior y finaliza cuando el actuador alcanza por segunda vez el tope
inferior. El tiempo medido dividido entre dos da lugar al tiempo de posicionamiento del motor.
Se muestran el progreso y el estado de la medici√≥n del tiempo de posicionamiento. El tiempo
de posicionamiento medido se muestra en el campo "Tiempo de actuaci√≥n medido". Una vez
finalizada la medici√≥n del tiempo de posicionamiento se conecta el modo manual de las
se√±ales de posicionamiento (LMNSOPON = TRUE). El elemento final de control deja de
moverse.

Cargar el tiempo de ajuste medido
1. Para guardar en el proyecto el tiempo de posicionamiento del motor medido, haga clic en
el s√≠mbolo
"Transfiere datos online al proyecto offline".
El tiempo de ajuste medido se guarda en el ajuste de par√°metros del FM.
2. Para que los cambios surtan efecto en el arranque siguiente de la CPU, haga clic en el
icono
"Cargar en dispositivo".

Cancelar medici√≥n del tiempo de posicionamiento
Si cancela la medici√≥n del tiempo de posicionamiento, el modo manual de las se√±ales de
posicionamiento se conecta (LMNSOPON = TRUE) y el modo manual con especificaci√≥n de
la variable manipulada se desconecta (LMNOP_ON = FALSE). El elemento final de control
deja de moverse.

3.5.7.5

FM 455: Diagn√≥stico a trav√©s de indicadores LED

Indicaci√≥n de errores mediante el LED de error
¬øD√≥nde se indican los errores?
El LED rojo INTF indica que hay un error interno en el m√≥dulo.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1141

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
El LED EXTF indica que hay un error externo, por ejemplo, un error en las conexiones.
Si el LED amarillo parpadea, el firmware se borra. Este estado s√≥lo puede aparecer si existe
un defecto en el hardware o si el proceso de carga del firmware se cancela.

¬øQu√© errores se indican?
Los siguientes errores se indican con la iluminaci√≥n de los LEDs de error:
Tipo de
error
Errores in‚Äê
ternos

Aviso de diagn√≥stico

Causa posible

Soluci√≥n

M√≥dulo defectuoso

Error de hardware

Cambie el m√≥dulo

Vigilancia de tiempo (watch dog)
activado

Error de hardware

Cambie el m√≥dulo

Contenido EEPROM no v√°lido

Fallo de la tensi√≥n de alimentaci√≥n
al parametrizar

Vuelva a parametrizar el m√≥dulo

Se han transferido par√°metros in‚Äê
correctos al m√≥dulo

Vuelva a parametrizar el m√≥dulo

Error de hardware en la entrada
anal√≥gica

Cambie el m√≥dulo

Errores ex‚Äê Par√°metro err√≥neo en el m√≥dulo
ternos
Error en las entradas o las sali‚Äê
das anal√≥gicas

Rotura de hilo en la entrada anal√≥‚Äê Solucione la rotura de hilo
gica
Rebase por defecto del rango de
medici√≥n en la entrada anal√≥gica

Revise la se√±al de medici√≥n

Rebase del rango de medici√≥n en
la entrada anal√≥gica

Revise la se√±al de medici√≥n

Rotura de hilo en la salida anal√≥gi‚Äê Solucione la rotura de hilo
ca
Cortocircuito en la salida anal√≥gica Solucione el cortocircuito
Falta tensi√≥n auxiliar externa

El conector frontal izquierdo no es‚Äê Inserte el conector frontal izquierdo
t√° insertado
Restablezca la alimentaci√≥n de 24 V
Fallo en la alimentaci√≥n 24 V

Alarma de diagn√≥stico en caso de error
Todos los errores pueden disparar una alarma de diagn√≥stico si √©sta se ha habilitado en la
pantalla correspondiente de parametrizaci√≥n. En los registros de diagn√≥stico DS0 y DS1
puede ver qu√© error ha provocado que se encienda el LED. La asignaci√≥n de los registros de
diagn√≥stico DS0 y DS1 est√° descrita en el cap√≠tulo "Disparo de alarmas de diagn√≥stico
(P√°gina 1142)".

Disparo de alarmas de diagn√≥stico
¬øQu√© es una alarma de diagn√≥stico?
Si se quiere que un programa de usuario responda a un error interno o externo, se puede
parametrizar una alarma de diagn√≥stico que interrumpa el programa c√≠clico de la CPU y llame
al OB de alarma de diagn√≥stico (OB 82).

1142

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

¬øQu√© eventos pueden disparar una alarma de diagn√≥stico?
La siguiente lista muestra qu√© eventos pueden disparar una alarma de diagn√≥stico:
‚óè M√≥dulo no parametrizado o errores en la parametrizaci√≥n
‚óè M√≥dulo defectuoso
‚óè Rotura de hilo en entradas anal√≥gicas (4 a 20 mA)
‚óè Rebase por exceso y por defectos en entradas anal√≥gicas
‚óè Rotura de carga y cortocircuito en salidas anal√≥gicas
‚óè Rotura de hilo en termoelementos y Pt 100

Ajuste por defecto
La alarma de diagn√≥stico est√° bloqueada de forma predeterminada.

Habilitaci√≥n de la alarma de diagn√≥stico
La pantalla Par√°metros b√°sicos permite bloquear o habilitar la alarma de diagn√≥stico para el
m√≥dulo.

Respuestas a un evento que dispara una alarma
Cuando se produce un evento que puede disparar una alarma de diagn√≥stico ocurre lo
siguiente:
‚óè La informaci√≥n de diagn√≥stico se registra en los registros de diagn√≥stico DS0 y DS1 del
m√≥dulo.
‚óè Uno o los LEDs de error se encienden.
‚óè Se llama al OB de alarma de diagn√≥stico (OB 82).
‚óè El registro de diagn√≥stico DS0 se graba en la informaci√≥n de arranque del OB de alarma de
diagn√≥stico.
‚óè Si no hay ning√∫n defecto de hardware, el m√≥dulo sigue regulando.
La CPU pasa a modo STOP si no se ha programado el OB 82.

Registro de diagn√≥stico DS0 y DS1
Introducci√≥n
La informaci√≥n que indica qu√© evento ha provocado una alarma de diagn√≥stico se guarda en
los registros de diagn√≥stico DS0 y DS1. El registro de diagn√≥stico DS0 consta de cuatro bytes;
DS1 consta de 27 bytes, siendo los cuatro primeros id√©nticos a DS0.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1143

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Leer el registro desde el m√≥dulo
El registro de diagn√≥stico DS0 se transfiere autom√°ticamente a la informaci√≥n de arranque en
la llamada del OB de diagn√≥stico. All√≠, estos cuatro bytes se guardan en los datos locales
(bytes 8-11) del OB 82.
El registro de diagn√≥stico DS1 se puede leer (y en consecuencia tambi√©n el contenido de DS0)
desde el m√≥dulo con la instrucci√≥n "CH_DIAG_455". Esta lectura s√≥lo tiene sentido si en el
DS0 se notifica un error en un canal.

¬øC√≥mo aparecen los textos de diagn√≥stico en el b√∫fer de diagn√≥stico?
Si se desea registrar el aviso de diagn√≥stico en el b√∫fer de diagn√≥stico, se debe llamar la
instrucci√≥n "WR_REC" "Introducir avisos espec√≠ficos de usuario en el b√∫fer de diagn√≥stico"
dentro del programa de usuario. En cada caso, el n√∫mero de evento del aviso de diagn√≥stico
se especifica en el par√°metro de entrada EVENTN. La alarma se introduce en el b√∫fer de
diagn√≥stico con x=1 como entrante y con x=0 como saliente. El b√∫fer de diagn√≥stico contiene
los textos de diagn√≥stico correspondientes en la columna de "Significado", as√≠ como el
momento en que se produjo la entrada.

1144

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Asignaci√≥n del registro de diagn√≥stico DS0 en la informaci√≥n de arranque
La tabla siguiente muestra la asignaci√≥n del registro de diagn√≥stico DS0 en la informaci√≥n de
arranque. Todos los bits que no se incluyen en la tabla son irrelevantes y tienen el valor cero.
Tabla 3-7
Byte
0

Asignaci√≥n del registro de diagn√≥stico DS0
Bit

Significado

Nota

N¬∫ de evento

0

Aver√≠a en m√≥dulo

Se activa en todos los eventos de diagn√≥stico

8:x:00

1

Error interno

Se activa en todos los errores internos:

8:x:01

‚óè Vigilancia de tiempo activada
‚óè Contenido de la EEPROM no v√°lido; el
m√≥dulo arranca sin regular y espera a que
la CPU realice una nueva parametrizaci√≥n
‚óè Error EPROM
‚óè Error ADC/DAC
‚óè Error de hardware en la entrada anal√≥gica
2

Error externo

Se activa en todos los errores externos:

8:x:02

‚óè Falta tensi√≥n auxiliar externa
‚óè Error de parametrizaci√≥n
‚óè Rotura de hilo en la entrada anal√≥gica (s√≥lo
en el margen 4 a 20 mA)
‚óè Rebase por defecto del rango de medici√≥n
en la entrada anal√≥gica
‚óè Rebase del rango de medici√≥n en la
entrada anal√≥gica
‚óè Rotura de hilo en la salida anal√≥gica
‚óè Cortocircuito en la salida anal√≥gica
3

Fallo en un canal

Consultar el DS1, a partir del byte 7, para m√°s
detalles

8:x:03

4

Falta tensi√≥n auxiliar
externa

Fallo en la alimentaci√≥n 24 V del FM 455

8:x:04

6

Contenido EEPROM
no v√°lido

Fallo de la tensi√≥n de alimentaci√≥n durante un
proceso de escritura en la EEPROM. El m√≥dulo
arranca con los par√°metros predeterminados.

8:x:03

7

Error de parametriza‚Äê El m√≥dulo no puede utilizar un par√°metro. Mo‚Äê
ci√≥n
tivo: Par√°metro desconocido o combinaci√≥n de
par√°metros no permitida.

8:x:07

Consulte el men√∫ Sistema de destino > Mostrar
errores de parametrizaci√≥n
1

0 ... 3

Clase de m√≥dulo

4

Diagn√≥stico espec√≠fi‚Äê Se activa cuando el m√≥dulo puede proporcio‚Äê
co de canal
nar informaci√≥n del canal adicional y hay un
error de canal (consulte DS1 bytes 7 a 12)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Siempre tiene asignado un 8

‚Äì
‚Äì

1145

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
Byte
2

3

Bit

Significado

Nota

N¬∫ de evento

0

La posici√≥n (A, B, C, D) del m√≥dulo del rango de
Falta m√≥dulo de
usuario o es incorrec‚Äê medici√≥n no concuerda con la parametrizaci√≥n
to
del FM 455.

8:x:30

3

Vigilancia de tiempo Error de hardware
(watch dog) activado

8:x:33

2

Error EPROM

M√≥dulo defectuoso

8:x:42

4

Error ADC/DAC

M√≥dulo defectuoso

8:x:44

Asignaci√≥n del registro de diagn√≥stico DS1 del FM 455
El registro de diagn√≥stico DS1 se compone de 27 bytes. Los 4 primeros bytes son id√©nticos a
los del registro de diagn√≥stico DS0. La siguiente tabla muestra la asignaci√≥n de los bytes
restantes. Todos los bits que no se incluyen en la tabla son irrelevantes y tienen el valor cero.
Tabla 3-8
Byte

1146

Asignaci√≥n de los bytes del 4 a 12 del registro de diagn√≥stico DS1 del FM 455
Bit

Significado

Nota

N¬∫ de
evento

4

0 ... 7

Tipo de canal

Siempre tiene asignado 75H

‚Äì

5

0 ... 7

Longitud de la informaci√≥n de
diagn√≥stico

Siempre tiene asignado un 8

‚Äì

6

0 ... 7

Cantidad de canales

Siempre tiene asignado un 17 (16 regu‚Äê
ladores + 1 canal de referencia)

‚Äì

7

0‚Ä¶7

Vector de error de canal

A los canales 1 a 8 se les asignan sen‚Äê
dos bits

-

8

0‚Ä¶7

Vector de error de canal

A los canales 9 a 16 se les asignan sen‚Äê
dos bits

-

9

0

Error en el canal de referencia

-

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
Byte
10

Bit

Significado

Nota

N¬∫ de
evento

0

Error de hardware en la entra‚Äê
da anal√≥gica

‚Äì

8:x:B0

1

Error de parametrizaci√≥n

La posici√≥n
(A, B, C, D)
del m√≥dulo
del rango de
medici√≥n no
concuerda
con la para‚Äê
metrizaci√≥n
del FM 455.

8:x:B1

Diagn√≥stico espec√≠fico
del canal 1

2

Rotura de hilo en la entrada
anal√≥gica (s√≥lo en el margen
4 a 20 mA)

3

sin usar

8:x:B3

4

Rebase por defecto del rango
de medici√≥n en la entrada ana‚Äê
l√≥gica1

8:x:B4

5

Rebase por defecto del rango
de medici√≥n en la entrada ana‚Äê
l√≥gica1

8:x:B5

6

Rotura de hilo en la salida ana‚Äê
l√≥gica

S√≥lo en la sa‚Äê
lida de intensi‚Äê
dad del regu‚Äê
lador K

8:x:B6

7

Cortocircuito en la salida ana‚Äê
l√≥gica

S√≥lo en la sa‚Äê
lida de ten‚Äê
si√≥n del regu‚Äê
lador K

8:x:B7

11

0 ... 7

v√©ase byte 10

Diagn√≥stico espec√≠fico del canal 2

v√©ase arri‚Äê
ba

12

0 ... 7

v√©ase byte 10

Diagn√≥stico espec√≠fico del canal 3

v√©ase arri‚Äê
ba

13

0 ... 7

v√©ase byte 10

Diagn√≥stico espec√≠fico del canal 4

v√©ase arri‚Äê
ba

14

0 ... 7

v√©ase byte 10

Diagn√≥stico espec√≠fico del canal 5

v√©ase arri‚Äê
ba

15

0 ... 7

v√©ase byte 10

Diagn√≥stico espec√≠fico del canal 6

v√©ase arri‚Äê
ba

16

0 ... 7

v√©ase byte 10

Diagn√≥stico espec√≠fico del canal 7

v√©ase arri‚Äê
ba

17

0 ... 7

v√©ase byte 10

Diagn√≥stico espec√≠fico del canal 8

v√©ase arri‚Äê
ba

18

0 ... 7

v√©ase byte 10

Diagn√≥stico espec√≠fico del canal 9

v√©ase arri‚Äê
ba

19

0 ... 7

v√©ase byte 10

Diagn√≥stico espec√≠fico del canal 10

v√©ase arri‚Äê
ba

20

0 ... 7

v√©ase byte 10

Diagn√≥stico espec√≠fico del canal 11

v√©ase arri‚Äê
ba

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

8:x:B2

1147

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
Byte

Bit

Significado

Nota

N¬∫ de
evento

21

0 ... 7

v√©ase byte 10

Diagn√≥stico espec√≠fico del canal 12

v√©ase arri‚Äê
ba

22

0 ... 7

v√©ase byte 10

Diagn√≥stico espec√≠fico del canal 13

v√©ase arri‚Äê
ba

23

0 ... 7

v√©ase byte 10

Diagn√≥stico espec√≠fico del canal 14

v√©ase arri‚Äê
ba

24

0 ... 7

v√©ase byte 10

Diagn√≥stico espec√≠fico del canal 15

v√©ase arri‚Äê
ba

25

0 ... 7

v√©ase byte 10

Diagn√≥stico espec√≠fico del canal 16

v√©ase arri‚Äê
ba

26

0 ... 7

v√©ase byte 10

Diagn√≥stico para el canal de referencia

v√©ase arri‚Äê
ba

1

consulte cap√≠tulo "Fallo del transductor de medida (P√°gina 1148)"

Factores importantes que deben tenerse en cuenta
El FM 455 recibe alimentaci√≥n de tensi√≥n exclusivamente a trav√©s del conector frontal
izquierdo.
As√≠ pues, la CPU detecta "M√≥dulo desenchufado/no responde" cuando se da uno de los
siguientes casos:
‚óè cuando el conector frontal izquierdo del FM 455 no se ha insertado
‚óè cuando falta la alimentaci√≥n de tensi√≥n de 24 V del conector frontal izquierdo
Nota
En el caso de que haya registrado la entrada "Modulo desenchufado/no responde" en el
b√∫fer de diagn√≥stico de la CPU, compruebe si se ha insertado el conector frontal izquierdo
y si el FM 455 dispone de una alimentaci√≥n de tensi√≥n de 24 V.

Informaci√≥n adicional
Para obtener m√°s informaci√≥n sobre el par√°metro "RET_REALU", consulte Lista de los avisos
RET_REALU (P√°gina 1150) y el √°rea de instrucciones avanzadas del sistema de ayuda.

Fallo del transductor de medida
Fallo del transductor de medida
El FM 455 puede detectar los siguientes fallos en el transductor de medida:
‚óè Rebase por defecto del rango de medici√≥n
‚óè Rebase del margen de medici√≥n
‚óè Rotura de hilo (no se muestra en todos los m√°rgenes de medici√≥n)

1148

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
Si se produce una de estas aver√≠as en el registro de diagn√≥stico DS0 se define el bit de error
de grupo "Error externo" y, en el registro de diagn√≥stico DS1, bits de error espec√≠ficos del canal
(consulte las tablas en la secci√≥n anterior). Cuando desaparecen estas aver√≠as los bits
correspondientes se desactivan.
La siguiente tabla muestra los l√≠mites de los diferentes m√°rgenes de medici√≥n en los que los
bits de error se activan o desactivan:
Rango de medida

Bit de error

Bit de error

Bit de error

Rebase por defecto del ran‚Äê Rebase del rango de medici√≥n
go de medici√≥n en ...
en ...
DS1: Byte 10 a 26, Bit 4

Mostrar rotura de hilo

DS1: Byte 10 a 26, Bit 5

DS1: Byte 10 a 26, Bit 2

0 a 20 mA

< - 3,5 mA

> 23,5 mA

‚Äì

4 a 20 mA

Bit de error = 1
a < 3,6 mA

> 22,8 mA

Bit de error = 1
a < 3,6 mA

Bit de error = 0
a > 3,8 mA

Bit de error = 0
a > 3,8 mA

0 a 10 V

< - 1,175 V

> 11,75 V

‚Äì

Pt 100

< 30,82 mV

> 650,46 mV

s√≠, parametrizable,

(-200 a 850 ¬∞C)

Visualizaci√≥n: 650,46 mV

(-328 a 1562 ¬∞F)
Pt 100

< 30,82 mV

> 499,06 mV

(-200 a 556 ¬∞C)

s√≠, parametrizable,
Visualizaci√≥n: 499,06 mV

(-328 a 1032 ¬∞F)
Pt 100

< 30,82 mV

> 254,12 mV

(-200 a 130 ¬∞C)

s√≠, parametrizable,
Visualizaci√≥n: 254,12 mV

(-328 a 264 ¬∞F)
Termoelemento tipo B

< 0 mV

> 13,81 mV

s√≠, parametrizable, se mantiene
el √∫ltimo valor

Termoelemento tipo J

< - 8,1 mV

> 69,54 mV

s√≠, parametrizable, se mantiene
el √∫ltimo valor

Termoelemento tipo K

< - 6,45 mV

> 54,88 mV

s√≠, parametrizable, se mantiene
el √∫ltimo valor

Termoelemento tipo R

< - 0,23 mV

> 21,11 mV

s√≠, parametrizable, se mantiene
el √∫ltimo valor

Termoelemento tipo S

< - 0,24 mV

> 18,7 mV

s√≠, parametrizable, se mantiene
el √∫ltimo valor

Termopar libre

< Valor de entrada inferior
de la l√≠nea poligonal

> Valor de entrada superior de
la l√≠nea poligonal

s√≠, parametrizable, se mantiene
el √∫ltimo valor

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1149

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Lista de los avisos RET_REALU
Avisos RET_REALU

1150

JOB_ERR
(Hex)

JOB_ERR
(Dec)

JOB_ERR
(Int)

Significado

7000

28672

-32624

Primera llamada con REQ=0: No hay ninguna transferencia de
datos activa; BUSY tiene el valor 0.

7001

28673

-32624

Primera llamada con REQ=1: Transferencia de datos lanzada;
BUSY tiene el valor 1.

7002

28674

-32624

Llamada intermedia (REQ irrelevante). Transferencia de datos
ya activa; BUSY tiene el valor 1.

8090

32912

-32624

La direcci√≥n base l√≥gica indicada no es v√°lida: No existe nin‚Äê
guna asignaci√≥n en el SDB1/SDB2x, o no se trata de una di‚Äê
recci√≥n base.

80A0

32928

-32608

Acuse negativo al leer el m√≥dulo. M√≥dulo extra√≠do durante la
lectura o m√≥dulo defectuoso.

80A1

32929

-32607

Acuse negativo al escribir en el m√≥dulo. M√≥dulo extra√≠do du‚Äê
rante la escritura o m√≥dulo defectuoso.

80A2

32930

-32606

Error de protocolo para capa 2

80A3

32931

-32605

Error de protocolo en User-Interface / User

80A4

32932

-32604

Fallo de comunicaci√≥n en el bus K

80B1

32945

-32591

Indicaci√≥n de longitud err√≥nea. Par√°metro FM_TYPE del DB de
canal para el m√≥dulo utilizado no activado correctamente.

80B2

32946

-32590

El slot configurado no est√° ocupado.

80B3

32947

-32589

El tipo de m√≥dulo real no es igual al tipo de m√≥dulo te√≥rico.

80C0

32960

-32576

El m√≥dulo a√∫n no tiene preparados los datos que hay que leer.

80C1

32961

-32575

Los datos de una petici√≥n de escritura semejante todav√≠a no se
han procesado en el m√≥dulo.

80C2

32962

-32574

El m√≥dulo procesa de instante el n√∫mero m√°ximo posible de
peticiones.

80C3

32963

-32573

Los recursos necesarios (memoria, etc.) est√°n ocupados en
estos momentos.

80C4

32964

-32572

Error de comunicaci√≥n

80C5

32965

-32571

La periferia descentralizada no est√° disponible.

80C6

32966

-32570

Cancelaci√≥n de las clases de prioridad (rearranque normal o en
segundo plano)

8522

34082

-31454

DB del canal o DB de par√°metros demasiado corto. No se pue‚Äê
den leer los datos del DB. (petici√≥n de escritura).

8532

34098

-31438

El n√∫mero de DB del DB de par√°metros es demasiado grande.
(petici√≥n de escritura).

853A

34106

-31430

DB de par√°metros no presente. (petici√≥n de escritura).

8544

34116

-31420

Error en el en√©simo (n > 1) acceso de lectura a un DB tras
aparecer un error. (petici√≥n de escritura).

8723

34595

-30941

DB del canal o DB de par√°metros demasiado corto. No se pue‚Äê
den escribir los datos en el DB. (petici√≥n de lectura).

8730

34608

-30928

DB de par√°metros protegido contra escritura en la CPU. No se
pueden escribir los datos en el DB (petici√≥n de lectura)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
JOB_ERR
(Hex)

JOB_ERR
(Dec)

JOB_ERR
(Int)

Significado

8732

34610

-30926

El n√∫mero de DB del DB de par√°metros es demasiado grande.
(petici√≥n de lectura).

873A

34618

-30918

DB de par√°metros no presente. (petici√≥n de lectura).

8745

34629

-30907

Error en el en√©simo (n > 1) acceso de escritura a un DB tras
aparecer un error. (petici√≥n de lectura).

80ff

33023

-32513

Indicaci√≥n de √≠ndice incorrecta en el bloque FMT_PAR

Los errores 80A2..80A4 as√≠ como 80Cx son temporales, es decir, se pueden eliminar tras un tiempo de
espera sin la intervenci√≥n del usuario. Los avisos con la estructura 7xxx indican situaciones temporales
de la comunicaci√≥n.

3.5.7.6

Proyectos de ejemplo para el FM 455

3.5.8

Utilizar ET 200S 2PULSE

3.5.8.1

Asignaci√≥n de conectores del 2PULSE

Reglas de cableado
Los cables (terminales 1 y 2 y terminales 5 y 6) deben estar apantallados. La pantalla tiene que
hacer contacto por ambos extremos. Para ello se debe usar el elemento de contacto (ver el
anexo de las instrucciones de servicio Sistema de periferia descentralizada ET 200S (http://
support.automation.siemens.com/WW/view/es/1144348)).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1151

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Asignaci√≥n de conexiones del 2PULSE
La tabla siguiente muestra la asignaci√≥n de conexiones del 2PULSE.
Vista

Asignaci√≥n de conexiones

Significado
Canal 0: Borne 1...4
Canal 1: Borne 5...8

38/6(

24VDC: Alimentaci√≥n del enc√≥‚Äê
der

6)

70(6\
38/6(

&DQDO









M Masa
DI: Se√±al de entrada
DO: Se√±al de salida
(m√°x. 2 A por canal)

&DQDO

(6
''$%

',
9'&
0
'2

3.5.8.2

















',
9'&
0
'2

Modos de operaci√≥n y funciones

Sinopsis
Principio
El 2PULSE dispone de dos canales. Se puede seleccionar un modo de operaci√≥n diferente
para cada canal. El modo de operaci√≥n se define al parametrizar. No es posible cambiar el
modo de operaci√≥n parametrizado con el programa de control.
Para cada canal se puede optar entre distintos modos:
‚óè Salida de impulsos (P√°gina 1154)
‚óè Modulaci√≥n de ancho de impulsos (P√°gina 1159)
‚óè Tren de impulsos (P√°gina 1169)
‚óè Retardo a la conexi√≥n/desconexi√≥n (P√°gina 1175)
‚óè Salida de frecuencia (P√°gina 1184) (a partir de 6ES7138‚Äë4DD01‚Äë0AB0)
Aparte del modo de operaci√≥n ajustado, el 2PULSE puede ejecutar las siguientes funciones:
‚óè Medici√≥n de intensidad (P√°gina 1190) en los modos de operaci√≥n "Modulaci√≥n de ancho de
impulsos" y "Tren de impulsos" (a partir de 6ES7138‚Äë4DD01‚Äë0AB0).
‚óè Control directo de la salida digital DO (P√°gina 1191) por medio del programa de control;
controlable de forma independiente para cada canal.

1152

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
‚óè Detecci√≥n de errores/diagn√≥stico (P√°gina 1192); el 2PULSE detecta los errores de cada
canal de forma independiente.
‚óè Conexi√≥n en paralelo de ambos canales (P√°gina 1194) para alcanzar una intensidad de
salida m√°s alta (a partir de 6ES7138‚Äë4DD01‚Äë0AB0).
‚óè Reacci√≥n a STOP de la CPU/del maestro (P√°gina 1196); el 2PULSE detecta el paso a
STOP de la CPU/del maestro para ambos canales y reacciona de acuerdo con la
parametrizaci√≥n efectuada.
La figura siguiente muestra el funcionamiento del 2PULSE.
&DQDO
3DU¬£PHWUR

'2

6H¬≥DOHVGHUHDOLPHQWDFL¬µQ

0RGRV\
IXQFLRQHV

',
3URFHVR

3URJUDPDGHFRQWURO

6H¬≥DOHVGHFRQWURO

&DQDO
3DU¬£PHWUR

'2

6H¬≥DOHVGHFRQWURO
6H¬≥DOHVGHUHDOLPHQWDFL¬µQ

0RGRV\
IXQFLRQHV

',

Interfaces con el programa de control y el proceso
Para ejecutar los modos de operaci√≥n y las funciones, el 2PULSE dispone como interfaz con
el proceso de una entrada digital y una salida digital para cada canal (DI 0, DO 0 para el canal
0 y DI 1, DO1 para el canal 1).
Los modos de operaci√≥n y las funciones se pueden modificar y observar con el programa de
control mediante se√±ales de control (P√°gina 1201) y se√±ales de realimentaci√≥n (P√°gina 1204).
Los distintos modos de operaci√≥n tienen asignados par√°metros.
En las descripciones correspondientes a los modos de operaci√≥n y las funciones encontrar√°:
‚óè los par√°metros relevantes y
‚óè las se√±ales de control y realimentaci√≥n.
La descripci√≥n de los modos de operaci√≥n y las funciones se aplica a ambos canales, por lo
que en esta descripci√≥n los canales ya no se marcan de forma independiente.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1153

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Modo "Salida de impulsos"
Modo "Salida de impulsos"
Salida de impulsos
Para la duraci√≥n del impulso que se haya fijado, el 2PULSE emite un impulso en la salida
digital DO (secuencia de salida) una vez transcurrido el retardo a la conexi√≥n (P√°gina 1199)
parametrizado.
La figura siguiente muestra el esquema de principio del modo de operaci√≥n "Salida de
impulsos".
+DELOLWDFL¬µQ+:
RSFLRQDO 
+DELOLWDFL¬µQ6:
6:B(1$%/( 



‡∏∏
6

4

5
5HWDUGRD
ODFRQH[L¬µQ

6

676B(1$%/(

4

5

'2

'XUDFL¬µQ
GHSXOVR

Iniciar la secuencia de salida
La habilitaci√≥n de la secuencia de salida debe realizarse siempre en el programa de control
por habilitaci√≥n software (P√°gina 1201) (SW_ENABLE 0 ‚Üí 1; MANUAL_DO = 0).
El bit de realimentaci√≥n (P√°gina 1204)ACK_SW_ENABLE indica la habilitaci√≥n software
pendiente en el 2PULSE.
Adem√°s es posible ajustar con el par√°metro "Funci√≥n DI (P√°gina 1199)" la entrada digital DI
del 2PULSE como habilitaci√≥n hardware (habilitaci√≥n HW).
Para trabajar simult√°neamente con la habilitaci√≥n software y la habilitaci√≥n hardware, la
secuencia de salida comienza con el primer flanco ascendente de la habilitaci√≥n hardware una
vez obtenida la habilitaci√≥n software. El 2PULSE ignora los posteriores flancos ascendentes
de la habilitaci√≥n hardware durante la secuencia de salida actual. Una vez obtenida la
habilitaci√≥n software, un flanco ascendente de la habilitaci√≥n hardware es suficiente para
iniciar la siguiente secuencia de salida.
Cuando se produce la habilitaci√≥n (flanco ascendente) comienza a contar el retardo a la
conexi√≥n y se activa el bit STS_ENABLE. Una vez transcurrido el retardo a la conexi√≥n, el
impulso se emite con la duraci√≥n del impulso fijada. La secuencia de salida termina
(P√°gina 1189) con el fin del impulso; STS_ENABLE se borra.
En caso de modificar la duraci√≥n del impulso durante el funcionamiento de forma no admisible,
la se√±al (P√°gina 1204)ERR_PULS indica un error en la salida de impulsos. Entonces deber√°
reiniciar la secuencia de salida.
La pr√≥xima vez que inicie la secuencia de salida, el 2PULSE borrar√° el bit de realimentaci√≥n
ERR_PULS.

1154

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Diagrama de impulsos
La figura siguiente muestra una secuencia de salida en el modo de operaci√≥n "Salida de
impulsos".
+DELOLWDFL¬µQVRIWZDUH
6:B(1$%/( 
$&.B6:B(1$%/(
+DELOLWDFL¬µQ+:
HQWUDGDGLJLWDO', 
6DOLGDGLJLWDO'2
676B(1$%/(
(55B38/6

5HWDUGRD
ODFRQH[L¬µQ
&RPLHQ]RGHOD
VHFXHQFLDGHVDOLGD

'XUDFL¬µQGHO
LPSXOVR
)LQGHOD
VHFXHQFLDGHVDOLGD

Cancelar la secuencia de salida
Borrando la habilitaci√≥n software (SW_ENABLE = 0) durante el retardo a la conexi√≥n o durante
la duraci√≥n del impulso se cancela la secuencia de salida y el bit STS_ENABLE y la salida
digital DO se borran.
Entonces deber√° reiniciar la secuencia de salida.

Tabla de verdad
La tabla siguiente muestra ante qu√© se√±ales y de qu√© forma reacciona el 2PULSE.
Habilitaci√≥n soft‚Äê
ware SW_ENA‚Äê
BLE

Habilitaci√≥n hardware
(entrada digital DI)

Salida digital DO

STS_ENABLE

Secuencia de
salida

1

0‚Üí1

0, si el retardo a la conexi√≥n >0
1, si el retardo a la conexi√≥n =0

0‚Üí1

iniciar

0‚Üí1

no utilizado

0 si el retardo a la conexi√≥n > 0
1 si el retardo a la conexi√≥n = 0

0‚Üí1

iniciar

0

cualquier estado

0

0

cancelar

1

cualquier estado

el estado previo se mantiene

0‚Üí1

0

0

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

0

-

1155

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Ajustar tiempos mediante la base de tiempo
Mediante la base de tiempo (P√°gina 1199) parametrizable se seleccionan la resoluci√≥n y el
rango de la duraci√≥n del impulso y del retardo a la conexi√≥n.
Base de tiempo = 0,1 ms:

Se pueden fijar tiempos desde 0,2 ms hasta 6,5535 s con una resoluci√≥n
de 0,1 ms.

Base de tiempo = 1 ms:

Se pueden fijar tiempos desde 1 ms hasta 65,535 s con una resoluci√≥n
de 1 ms.

Ajustar y modificar la duraci√≥n del impulso
La duraci√≥n del impulso (P√°gina 1200) se ajusta directamente en el programa de control como
valor num√©rico comprendido entre 0 y 65535.
Duraci√≥n del impulso = base de tiempo x valor num√©rico fijado
En caso de modificar la duraci√≥n del impulso mientras se ejecuta una secuencia de salida, el
tiempo ya transcurrido en la salida se restar√° de la nueva duraci√≥n del impulso y el impulso se
continuar√° emitiendo.

Reducir la duraci√≥n del impulso
En caso de reducir la duraci√≥n del impulso a un tiempo m√°s corto que el tiempo ya transcurrido,
la secuencia de salida se cancelar√°, STS_ENABLE y la salida digital DO se borran y el bit de
estado ERR_PULS se activa. En la siguiente secuencia de salida se borra el bit de estado
ERR_PULS.

Ajustar y modificar el retardo a la conexi√≥n en caso de utilizar la interfaz de control corta
El retardo a la conexi√≥n (P√°gina 1199) se define en los par√°metros como valor num√©rico entre
0 y 65535.
Retardo a la conexi√≥n parametrizado = base de tiempo x valor num√©rico ajustado
Con el factor para el retardo a la conexi√≥n se puede adaptar el tiempo parametrizado en el
programa de control. El factor se ajusta entre 0 y 255 con una ponderaci√≥n de 0,1.
Retardo a la conexi√≥n = factor x 0,1 x retardo a la conexi√≥n parametrizado
En caso de modificar el factor de retardo a la conexi√≥n durante la secuencia de salida, el nuevo
retardo a la conexi√≥n tendr√° efecto en la siguiente secuencia de salida.

Modo is√≥crono (a partir de 6ES7138‚Äë4DD01‚Äë0AB0)
En el modo de operaci√≥n "Salida de impulsos" el modo is√≥crono no tiene ning√∫n efecto sobre
la funcionalidad.

1156

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Par√°metros del modo de operaci√≥n "Salida de impulsos"
Par√°metros del modo de operaci√≥n "Salida de impulsos"
La tabla siguiente muestra los par√°metros del modo de operaci√≥n "Salida de impulsos".
Par√°metro

Significado

Rango de valores

Modo de operaci√≥n (P√°gi‚Äê
na 1198)

Ajuste el modo de operaci√≥n "Sa‚Äê ‚óè Salida de impulsos
lida de impulsos".
‚óè Modulaci√≥n de ancho de
impulsos

Ajuste predetermi‚Äê
nado
Modulaci√≥n de an‚Äê
cho de impulsos

‚óè Tren de impulsos
‚óè Retardo a la conexi√≥n/
desconexi√≥n
‚óè Salida de frecuencia
Base de tiempo (P√°gi‚Äê
na 1199)

Con la base de tiempo se selec‚Äê
cionan la resoluci√≥n y el rango de
la duraci√≥n del impulso y del re‚Äê
tardo a la conexi√≥n.

Funci√≥n DI (P√°gina 1199)

La entrada digital DI se puede uti‚Äê ‚óè Entrada
lizar como entrada o como habili‚Äê ‚óè Habilitaci√≥n HW
taci√≥n hardware.

‚óè 0,1 ms

0,1 ms

‚óè 1 ms

Retardo a la conexi√≥n (P√°gi‚Äê Tiempo que transcurre desde el de 0 a 65535
na 1199) 1)
inicio de la secuencia de salida
hasta la salida del impulso. El re‚Äê
tardo a la conexi√≥n se puede mo‚Äê
dificar en el programa de control
con el "Factor de retardo a la co‚Äê
nexi√≥n".

Entrada

0

S√≥lo si se utiliza la interfaz de control (P√°gina 1201) corta.
Si se utiliza la interfaz de control larga, ajuste este valor directamente en la interfaz de control.

1)

Se√±ales de control y realimentaci√≥n del modo de operaci√≥n "Salida de impulsos"
Se√±ales de control y realimentaci√≥n del modo de operaci√≥n "Salida de impulsos"
La tabla siguiente muestra las se√±ales de control y realimentaci√≥n del modo de operaci√≥n
"Salida de impulsos".
Se√±ales de control y
realimentaci√≥n

Significado

Rango

Direc‚Äê
ci√≥n del
canal 0

Direc‚Äê
ci√≥n del
canal 1

Se√±ales de control en caso de utilizar la interfaz de control corta (8 bytes)
Habilitaci√≥n software
(SW_ENABLE)

Iniciar y cancelar la secuencia de
salida.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Byte 2:
0 = SW_ENABLE borrado
1 = SW_ENABLE activado 0 ‚Üí 1 = ini‚Äê Bit 0
cio de la secuencia de salida; dado el
caso, depende de la habilitaci√≥n hard‚Äê
ware

Byte 6:
Bit 0

1157

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
Se√±ales de control y
realimentaci√≥n

Significado

Rango

Direc‚Äê
ci√≥n del
canal 0

Direc‚Äê
ci√≥n del
canal 1

Duraci√≥n del impulso

Tiempo en que la salida digital DO
est√° activada una vez transcurrido
el retardo a la conexi√≥n.

con base de tiempo 0,1 ms:
de 2 a 65535

Palabra 0 Palabra 4

con base de tiempo 1 ms:
de 1 a 65535
Si se excede el l√≠mite inferior del ran‚Äê
go, el 2PULSE no emitir√° ning√∫n im‚Äê
pulso.

Factor de retardo a la
conexi√≥n

El retardo a la conexi√≥n parametri‚Äê
zado se puede modificar antes de
que comience la secuencia de sa‚Äê
lida:

de 0 a 255

Byte 3

Byte 7

Si resulta un retardo a la conexi√≥n <
0,2 ms o con un factor = 0, el retardo a
la conexi√≥n efectivo = 0.
Retardo a la conexi√≥n = factor x 0,1 Si resulta un retardo a la conexi√≥n >
x retardo a la conexi√≥n parametri‚Äê 65,535 s, el retardo a la conexi√≥n se
zado
limita a 65,535 s.

Se√±ales de control cuando se usa la interfaz de control larga (12 bytes) (a partir de 6ES7138‚Äë4DD01‚Äë0AB0)
Habilitaci√≥n software
(SW_ENABLE)

Iniciar y cancelar la secuencia de
salida.

Byte 4:
0 = SW_ENABLE borrado
1 = SW_ENABLE activado 0 ‚Üí 1 = ini‚Äê Bit 0
cio de la secuencia de salida; dado el
caso, depende de la habilitaci√≥n hard‚Äê
ware

Duraci√≥n del impulso

Tiempo en que la salida digital DO
est√° activada una vez transcurrido
el retardo a la conexi√≥n.

con base de tiempo 0,1 ms:
de 2 a 65535

Byte 10:
Bit 0

Palabra 0 Palabra 6

con base de tiempo 1 ms:
de 1 a 65535
Si se excede el l√≠mite inferior del ran‚Äê
go, el 2PULSE no emitir√° ning√∫n im‚Äê
pulso.

Retardo a la conexi√≥n

El retardo a la conexi√≥n se puede
modificar antes de que comience
la secuencia de salida.

Palabra 2 Palabra 8

de 0 a 65535
Retardo a la conexi√≥n = base de tiem‚Äê
po x valor num√©rico fijado

Se√±ales de realimentaci√≥n
STS_ENABLE
STS_DO

STS_DI
ACK_SW_ENABLE
ERR_PULS

Indica una secuencia de salida en
curso.

0 = salida de impulsos bloqueada

Byte 0:

Byte 4:

1 = salida de impulsos en curso

Bit 0

Bit 0

Indica el nivel de se√±al en la salida 0 = se√±al 0 en la salida digital DO
digital DO. Observe la velocidad de 1 = se√±al 1 en la salida digital DO
actualizaci√≥n.

Byte 0:

Byte 4:

Bit 1

Bit 1

Indica el nivel de se√±al en la entra‚Äê 0 = se√±al 0 en la entrada digital DI
da digital DI.
1 = se√±al 1 en la entrada digital DI

Byte 0:

Byte 4:

Bit 2

Bit 2

Indica el estado de SW_ENABLE.

0 = SW_ENABLE borrado

Byte 0:

Byte 4:

1 = SW_ENABLE activado

Bit 3

Bit 3

Indica un error de salida de impul‚Äê
sos.

0 = no hay error de salida de impulsos Byte 0:

Byte 4:

1 = error de salida de impulsos

Bit 4

Bit 4

SEQ_CNT (a partir de
6ES7138‚Äë4DD01‚Äë0AB
0)

Se incrementa una vez finalizada
una secuencia de salida.

Sin habilitaci√≥n HW: 0 ‚Ä¶ 1

Byte 1:

Byte 5:

Con habilitaci√≥n HW: 0 ‚Ä¶ 15

Bit 0 ‚Ä¶ 3 Bit 0 ‚Ä¶ 3

Reservado

‚Äì

0

Palabra 2 Palabra 6

1158

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Se√±ales de entrada y de salida del modo de operaci√≥n "Salida de impulsos"
Se√±ales de entrada y de salida del modo de operaci√≥n "Salida de impulsos"
La tabla siguiente muestra las se√±ales de entrada y de salida del modo de operaci√≥n "Salida
de impulsos".
Se√±al de entrada y salida

Significado

Rango

Terminal
del canal
0

Terminal
del canal 1

La habilitaci√≥n HW se puede se‚Äê
leccionar con el par√°metro "Fun‚Äê
ci√≥n DI".
La se√±al de la entrada digital DI
ser√° evaluada por el 2PULSE al
iniciar la secuencia de salida.

0 = habilitaci√≥n HW borrada
1 = habilitaci√≥n HW obtenida
0‚Üí1 = inicio de la secuencia de
salida; depende de la habilita‚Äê
ci√≥n SW (SW_ENABLE)

1

5

0 = no hay impulso

4

8

Se√±al de entrada
Habilitaci√≥n HW

Se√±al de salida
Impulso en la salida digital DO Se emite un impulso en la salida
digital DO por la duraci√≥n de im‚Äê
pulso fijada.

1 = impulso

Modo de operaci√≥n "Modulaci√≥n de ancho de impulsos" (PWM)
Modo de operaci√≥n "Modulaci√≥n de ancho de impulsos" (PWM)
Modulaci√≥n de ancho de impulsos
Para el 2PULSE se especifica un valor de salida. El 2PULSE genera impulsos continuos sobre
esta base. El valor de salida determina la relaci√≥n impulso/pausa dentro de un per√≠odo
(modulaci√≥n de ancho de impulsos). La duraci√≥n del per√≠odo es ajustable.
La secuencia de impulsos se emite una vez transcurrido el retardo a la conexi√≥n (P√°gina 1199)
parametrizado en la salida digital DO del 2PULSE (secuencia de salida).
La figura siguiente muestra el esquema de principio del modo de operaci√≥n "Modulaci√≥n de
ancho de impulsos".
+DELOLWDFL¬µQ+:
RSFLRQDO 
+DELOLWDFL¬µQVRIWZDUH
6:B(1$%/( 



‡∏∏
6

4

6

4

'2

0$,
5
5HWDUGRD
ODFRQH[L¬µQ

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

5
9DORUGH
VDOLGD

676B(1$%/(

0$,HQ
IXQFLRQD
PLHQWR

1159

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Inicio de la secuencia de salida
La habilitaci√≥n de la secuencia de salida debe realizarse siempre en el programa de control
por habilitaci√≥n software (P√°gina 1201) (SW_ENABLE 0 ‚Üí 1; MANUAL_DO = 0).
El bit de realimentaci√≥n (P√°gina 1204)ACK_SW_ENABLE indica la habilitaci√≥n software
pendiente en el 2PULSE.
Adem√°s, es posible ajustar con el par√°metro "Funci√≥n DI (P√°gina 1199)" la entrada digital DI
del 2PULSE como habilitaci√≥n hardware. En el modo is√≥crono (a partir de
6ES7138‚Äë4DD01‚Äë0AB0) la configuraci√≥n de una habilitaci√≥n de HW no tiene efecto.
Para trabajar simult√°neamente con la habilitaci√≥n software y la habilitaci√≥n hardware, la
secuencia de salida comienza con el primer flanco ascendente de la habilitaci√≥n hardware una
vez obtenida la habilitaci√≥n software. El 2PULSE ignora los posteriores flancos ascendentes
de la habilitaci√≥n hardware durante la secuencia de salida actual.
Cuando se produce la habilitaci√≥n (flanco ascendente) comienza a contar el retardo a la
conexi√≥n y se activa el bit STS_ENABLE. La secuencia de impulsos se emite una vez
transcurrido el retardo a la conexi√≥n. Mientras el bit SW_ENABLE est√° activado, la secuencia
de salida se ejecuta de modo continuo.

Diagrama de impulsos
La figura siguiente muestra una secuencia de salida en el modo de operaci√≥n "Modulaci√≥n de
ancho de impulsos".
+DELOLWDFL¬µQ
VRIWZDUH
6:B(1$%/(
$&.B6:B(1$%/(
+DELOLWDFL¬µQ+:
HQWUDGDGLJLWDO',

3HU¬ØRGR

3HU¬ØRGR

'XUD 3DXVD
FL¬µQGHO HQWUH
LPSXOVR LPSXOVRV
9DORUGHVDOLGD‡≤Ω

9DORUGHVDOLGD‡≤Ω

6DOLGDGLJLWDO'2
5HWDUGR
DOD
FRQH[L¬µQ

676B(1$%/(

,QLFLDUVHFXHQFLDGHVDOLGD

Cancelar la secuencia de salida
Borrando la habilitaci√≥n software (SW_ENABLE = 0) durante el retardo a la conexi√≥n o durante
la salida de impulsos se cancela la secuencia de salida y el bit STS_ENABLE y la salida digital
DO se borran.

1160

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
A continuaci√≥n es necesario reiniciar la secuencia de salida.

Tabla de verdad
La tabla siguiente muestra ante qu√© se√±ales y de qu√© forma reacciona el 2PULSE.
Habilitaci√≥n soft‚Äê
ware SW_ENA‚Äê
BLE

Habilitaci√≥n hardware
(entrada digital DI)

Salida digital DO

STS_ENABLE

Secuencia de
salida

1

0‚Üí1

0, si el retardo a la conexi√≥n >0
1, si el retardo a la conexi√≥n =0

0‚Üí1

iniciar

0‚Üí1

no utilizado

0, si el retardo a la conexi√≥n >0
1, si el retardo a la conexi√≥n =0

0‚Üí1

iniciar

0

cualquier estado

0

0

cancelar

1

cualquier estado

el estado previo se mantiene

0‚Üí1

0

0

0

-

Duraci√≥n m√≠nima del impulso y pausa m√≠nima entre impulsos
La duraci√≥n m√≠nima de impulso y la pausa m√≠nima entre impulsos se superponen a la
caracter√≠stica de salida proporcional.
La duraci√≥n m√≠nima de impulso y la pausa m√≠nima entre impulsos se parametrizan con el
par√°metro "Duraci√≥n m√≠nima de impulso (P√°gina 1200)"; ambos tienen siempre el mismo valor.
Una duraci√≥n de impulso calculada por el 2PULSE que sea m√°s corta que la duraci√≥n m√≠nima
de impulso se inhibe.
Una duraci√≥n de impulso calculada por el 2PULSE que sea m√°s larga que el per√≠odo menos
la pausa m√≠nima entre impulsos se ajusta al 1000 ‚Ä∞.
La figura siguiente muestra la modulaci√≥n de ancho de impulsos.
'XUDFL¬µQGHOLPSXOVR

'XUDFL¬µQGHOSHULRGR
'XUDFL¬µQGHOSHULRGR
SHULRGRP¬ØQLPRHQWUH
LPSXOVRV

0¬ØQLPDGXUDFL¬µQ
GHOLPSXOVR




Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019



9DORUGHVDOLGDHQ‡≤Ω

1161

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Ajustar tiempos mediante la base de tiempo
Mediante la base de tiempo (P√°gina 1199) parametrizable se seleccionan la resoluci√≥n y el
rango de la duraci√≥n del per√≠odo, la duraci√≥n m√≠nima del impulso y del retardo a la conexi√≥n.
Base de tiempo = 0,1 ms:

Se pueden fijar tiempos desde 0,2 ms a 6,5535 s con una resoluci√≥n de
0,1 ms.

Base de tiempo = 1 ms:

Se pueden fijar tiempos desde 1 ms a 65,535 s con una resoluci√≥n de 1
ms.

Ajustar y modificar el valor de salida
Con el par√°metro "Formato de salida (P√°gina 1199)" se selecciona el rango del valor de salida.
‚óè Formato de salida "Por mil": rango de valores entre 0 y 1000
El 2PULSE calcula la duraci√≥n de impulso con el valor de salida ajustado:
Duraci√≥n de impulso = (valor de salida / 1000) x per√≠odo
‚óè Formato de salida "Salida anal√≥gica S7": rango de valores entre 0 y 27648
El 2PULSE calcula la duraci√≥n de impulso con el valor de salida ajustado:
Duraci√≥n de impulso = (valor de salida / 27648) x per√≠odo
El valor de salida se especifica directamente con el programa de control. El nuevo valor de
salida se adopta con el siguiente flanco ascendente de la salida.

Ajuste del per√≠odo
Dependiendo de la configuraci√≥n, el per√≠odo se define como valor de par√°metro o a trav√©s de
la interfaz de control. La tabla siguiente muestra cu√°ndo se utiliza qu√© valor.
Para el modo is√≥crono (a partir de 6ES7138‚Äë4DD01‚Äë0AB0) es necesario definir el per√≠odo en
el mismo momento de efectuar la parametrizaci√≥n. A diferencia del modo no is√≥crono, aqu√≠ no
es posible modificar posteriormente el per√≠odo durante el funcionamiento.
Configuraci√≥n con ‚Ä¶
Interfaz de control corta
Modo is√≥crono

Interfaz de control larga

Per√≠odo = valor del par√°metro "Per√≠odo"
El valor de la interfaz de control se ignora.

Modo no is√≥crono

Per√≠odo = valor del par√°metro "Pe‚Äê Per√≠odo = consigna "Per√≠odo" de la
r√≠odo" √ó "Factor de per√≠odo" de la in‚Äê interfaz de control
terfaz de control
El valor del par√°metro "Per√≠odo" se
ignora.

Per√≠odo al parametrizar con una interfaz de control corta
La duraci√≥n del per√≠odo (P√°gina 1200) se define en los par√°metros como valor num√©rico en
funci√≥n de la base de tiempo:
‚óè con base de tiempo 1 ms: de 1 a 65535
‚óè con base de tiempo 0,1 ms: de 2 a 65535
Per√≠odo parametrizado = base de tiempo x valor num√©rico ajustado

1162

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
Con el factor para el per√≠odo, es posible adaptar el tiempo parametrizado en el programa de
control. El factor se ajusta entre 0 y 255 con una ponderaci√≥n de 0,1.
Per√≠odo = factor x 0,1 x per√≠odo parametrizado
Las nuevas consignas para el per√≠odo se toman con el siguiente flanco ascendente de la
salida.

Nota
Si se modifica el per√≠odo durante el funcionamiento, √©ste pueda experimentar una
prolongaci√≥n moment√°nea leve (aprox. 10 ¬µs).
Nota
Una modificaci√≥n del per√≠odo a trav√©s de la interfaz de control no tiene efecto en el modo
is√≥crono (a partir de 6ES7138‚Äë4DD01‚Äë0AB0).

Ajustar la duraci√≥n m√≠nima del impulso y la pausa m√≠nima entre impulsos
La duraci√≥n m√≠nima de impulso y la pausa m√≠nima entre impulsos se definen como un valor
num√©rico entre 0 y 65535 con el par√°metro "Duraci√≥n m√≠nima de impulso (P√°gina 1200)".
Duraci√≥n m√≠nima de impulso / pausa m√≠nima entre impulsos parametrizada = base de tiempo
x valor num√©rico ajustado

Ajustar el retardo a la conexi√≥n
El retardo a la conexi√≥n (P√°gina 1199) se define en los par√°metros como valor num√©rico entre
0 y 65535.
Retardo a la conexi√≥n parametrizado = base de tiempo x valor num√©rico ajustado
Si utiliza la interfaz de control larga, con el factor para el retardo a la conexi√≥n se puede adaptar
el tiempo parametrizado en el programa de control. El factor se ajusta entre 0 y 255 con una
ponderaci√≥n de 0,1.
Retardo a la conexi√≥n = factor x 0,1 x retardo a la conexi√≥n parametrizado

Medici√≥n de intensidad (a partir de 6ES7138‚Äë4DD01‚Äë0AB0)
Un campo de aplicaci√≥n importante de la medici√≥n de intensidad en el modo de operaci√≥n
"Modulaci√≥n de ancho de impulsos" es la regulaci√≥n de intensidad de una v√°lvula proporcional.
Esto permite, por ejemplo, compensar los efectos t√©rmicos que act√∫an sobre la v√°lvula.
Encontrar√° m√°s informaci√≥n en "Funci√≥n: Medici√≥n de intensidad (a partir de
6ES7138-4DD01-0AB0) (P√°gina 1190)".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1163

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Modo is√≥crono en el modo de operaci√≥n "Modulaci√≥n de ancho de impulsos"
Modo is√≥crono
Nota
Con el 2PULSE, el modo is√≥crono es posible a partir de la referencia 6ES7138‚Äë4DD01‚Äë0AB0.
En el modo de operaci√≥n "Modulaci√≥n de ancho de impulsos" el modo is√≥crono tiene las
siguientes particularidades:
‚óè La salida comienza siempre sin retardo a la conexi√≥n, un retardo a la conexi√≥n
parametrizado se ignora.
‚óè La salida comienza siempre tras la obtenci√≥n de la habilitaci√≥n software, una habilitaci√≥n
hardware parametrizada se ignora.
‚óè No es posible cambiar el per√≠odo durante el funcionamiento, un ajuste a trav√©s de la interfaz
de control se ignora.
En el modo is√≥crono la secuencia de salida est√° sincronizada con el instante To. El per√≠odo se
adapta al ciclo DP. En este caso es posible que el per√≠odo ajustado por el usuario no se pueda
ejecutar con exactitud.
El 2PULSE adapta el valor parametrizado del per√≠odo al ciclo DP con base en un algoritmo de
c√°lculo. El c√°lculo se ejecuta de tal manera que se minimiza la diferencia entre el per√≠odo
ajustado y el calculado. En el caso menos favorable la desviaci√≥n equivale a la mitad del ciclo
DP. La tabla siguiente muestra ejemplos de ello.
Tiempo de ciclo DP
TDP1)

Per√≠odo ajustado Tnom

Per√≠odo calculado Treal1)

10 ms

5 ms

5 ms

10 ms

2 ms

2 ms

10 ms

6 ms

5 ms

10 ms

16 ms

20 ms

1)

La relaci√≥n existente entre el per√≠odo calculado y el tiempo de ciclo DP corresponde siempre a un
n√∫mero entero.

A continuaci√≥n se representa gr√°ficamente la relaci√≥n entre el per√≠odo y el ciclo DP. En los
ejemplos, la relaci√≥n impulso/pausa aparece representada con un 50 % respectivamente.

1164

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
Encontrar√° m√°s informaci√≥n en el manual de funciones Isochrone Mode (http://
support.automation.siemens.com/WW/view/en/15218045).
‚óè El per√≠odo es igual al ciclo DP
3HU¬ØRGR
6DOLGDGLJLWDO
'2
&LFOR'3
72

72

72

72

,QLFLDUVHFXHQFLDGHVDOLGD

‚óè El per√≠odo es m√°s corto que el ciclo DP
3HU¬ØRGR
6DOLGDGLJLWDO
'2
&LFOR'3
72

72

72

72

,QLFLDUVHFXHQFLDGHVDOLGD

‚óè El per√≠odo es m√°s largo que el ciclo DP
3HU¬ØRGR
6DOLGDGLJLWDO
'2
&LFOR'3
72

72

72

72

,QLFLDUVHFXHQFLDGHVDOLGD

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1165

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Par√°metros del modo de operaci√≥n "Modulaci√≥n de ancho de impulsos"
Par√°metros del modo de operaci√≥n "Modulaci√≥n de ancho de impulsos"
La tabla siguiente muestra los par√°metros del modo de operaci√≥n "Modulaci√≥n de ancho de
impulsos".
Par√°metro

Significado

Modo de operaci√≥n (P√°gi‚Äê Ajuste el modo de operaci√≥n "Modulaci√≥n
de ancho de impulsos".
na 1198)

Rango

Ajuste predetermi‚Äê
nado

‚óè Salida de impulsos

Modulaci√≥n de an‚Äê
cho de impulsos

‚óè Modulaci√≥n de ancho de
impulsos
‚óè Tren de impulsos
‚óè Retardo a la conexi√≥n/
desconexi√≥n
‚óè Salida de frecuencia

Base de tiempo (P√°gi‚Äê
na 1199)

Con la base de tiempo se elige la resolu‚Äê ‚óè 0,1 ms
ci√≥n y el rango de valores del per√≠odo, la ‚óè 1 ms
duraci√≥n m√≠nima de impulso y del retardo
a la conexi√≥n.

0,1 ms

Formato de salida (P√°gi‚Äê
na 1199)

Dependiendo de la resoluci√≥n requerida ‚óè Por mil
para el valor de salida, elija entre los for‚Äê ‚óè Salida anal√≥gica S7
matos de salida Por mil o Salida anal√≥gi‚Äê
ca S7.

Por mil

Funci√≥n DI (P√°gina 1199) La entrada digital DI se puede utilizar co‚Äê ‚óè Entrada
mo entrada o como habilitaci√≥n HW.
‚óè Habilitaci√≥n HW

Entrada

Retardo a la conexi√≥n (P√°‚Äê Tiempo que transcurre desde el comien‚Äê
gina 1199)
zo de la secuencia de salida hasta la sa‚Äê
lida de la secuencia de impulsos.

de 0 a 65535

0

Duraci√≥n m√≠nima del impulso y pausa m√≠‚Äê de 0 a 65535
nima entre impulsos:

0

Duraci√≥n m√≠nima de im‚Äê
pulso (P√°gina 1200)

Introduzca aqu√≠ el tiempo de respuesta
del elemento final de control conectado a
la salida digital DO.
Duraci√≥n del per√≠odo (P√°‚Äê Consigna del per√≠odo
gina 1200) 1)
Al especificar el per√≠odo, tenga en cuenta
la duraci√≥n m√≠nima de impulso ajustada y
el tiempo de respuesta del elemento final
de control conectado a la salida digital
DO.

con base de tiempo 0,1 ms:
de 2 a 65535

20000 ‚Üí 2 s

con base de tiempo 1 ms:
de 1 a 65535

Si utiliza la interfaz de control corta, en el
modo no is√≥crono se puede modificar el
per√≠odo en el programa de control con el
"Factor de per√≠odo".
1)

Observe la informaci√≥n referente al "Ajuste del per√≠odo (P√°gina 1159)" y al "Modo is√≥crono (P√°gina 1164)".

1166

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Se√±ales de control y realimentaci√≥n del modo de operaci√≥n "Modulaci√≥n de ancho de impulsos"
Se√±ales de control y realimentaci√≥n del modo de operaci√≥n "Modulaci√≥n de ancho de impulsos"
La tabla siguiente muestra las se√±ales de control y realimentaci√≥n del modo de operaci√≥n
"Modulaci√≥n de ancho de impulsos".
Se√±ales de control y
realimentaci√≥n

Significado

Rango

Direcci√≥n
del canal 0

Direcci√≥n
del canal 1

Se√±ales de control en caso de utilizar la interfaz de control corta (8 bytes)
Habilitaci√≥n software
(SW_ENABLE)

Iniciar y cancelar la secuencia de
salida.

0 = SW_ENABLE borrado
1 = SW_ENABLE activado
0 ‚Üí 1 = inicio de la secuencia de
salida; dado el caso, depende de la
habilitaci√≥n hardware

Byte 2:

Byte 6:

Bit 0

Bit 0

Valor de salida

El valor que se aplica a la salida
digital DO con modulaci√≥n de an‚Äê
cho de impulsos.

Dependiendo del formato de sali‚Äê
da:

Palabra 0

Palabra 4

Byte 3

Byte 7

‚óè Por mil: 0 ... 1000
‚óè Salida anal√≥gica S7:
0 ... 27648
Si se introduce un valor de salida >
1000 √≥ 27648, el 2PULSE lo limita‚Äê
r√° a 1000 √≥ 27648, respectivamen‚Äê
te.

Factor de per√≠odo

La duraci√≥n parametrizada del pe‚Äê Factor: 0 a 255
r√≠odo se puede modificar:
Per√≠odo:
Per√≠odo = factor x 0,1 x per√≠odo pa‚Äê 2 √ó duraci√≥n m√≠nima de impulso a
rametrizado
65,635 s.
Si resulta un per√≠odo < 2 √ó dura‚Äê
ci√≥n m√≠nima de impulso o < 200 ¬µs
o si el factor = 0, el per√≠odo se limita
a 2 √ó duraci√≥n m√≠nima de impulso
(m√≠nimo 200 ¬µs).
Si resulta una duraci√≥n del per√≠odo
> 65.535 s, se limitar√° a 65.535 s.

Se√±ales de control cuando se usa la interfaz de control larga (12 bytes) (a partir de 6ES7138‚Äë4DD01‚Äë0AB0)
Habilitaci√≥n software
(SW_ENABLE)

Iniciar y cancelar la secuencia de
salida.

0 = SW_ENABLE borrado
1 = SW_ENABLE activado
0 ‚Üí 1 = inicio de la secuencia de
salida; dado el caso, depende de la
habilitaci√≥n hardware

Byte 4:

Byte 10:

Bit 0

Bit 0

Valor de salida

Valor que se emite en la salida di‚Äê
gital DO con modulaci√≥n de ancho
de impulsos.

Dependiendo del formato de sali‚Äê
da:

Palabra 0

Palabra 6

‚óè Por mil: 0 ... 1000
‚óè Salida anal√≥gica S7:
0 ... 27648
Si se introduce un valor de salida
> 1000 √≥ 27648, el 2PULSE lo limi‚Äê
tar√° a 1000 √≥ 27648 respectiva‚Äê
mente.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1167

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
Se√±ales de control y
realimentaci√≥n

Significado

Rango

Direcci√≥n
del canal 0

Direcci√≥n
del canal 1

Per√≠odo 1)

Consigna del per√≠odo en modo no
is√≥crono

con base de tiempo 0,1 ms:
de 2 a 65535

Palabra 2

Palabra 8

Byte 5

Byte 11

Byte 0:

Byte 4:

con base de tiempo 1 ms:
de 1 a 65535
Factor de retardo a la
conexi√≥n

El retardo a la conexi√≥n parametri‚Äê
zado se puede modificar antes de
que comience la secuencia de sa‚Äê
lida:

de 0 a 255

Si resulta un retardo a la conexi√≥n
< 0,2 ms o con un factor = 0, el re‚Äê
tardo a la conexi√≥n efectivo = 0.
Retardo a la conexi√≥n = factor x 0,1 Si resulta un retardo a la conexi√≥n
x retardo a la conexi√≥n parametri‚Äê > 65,535 s, el retardo a la conexi√≥n
zado
se limita a 65,535 s.

Se√±ales de realimentaci√≥n
STS_ENABLE

Indica una secuencia de salida en
curso.

0 = salida de impulsos bloqueada
1 = salida de impulsos en curso

Bit 0

Bit 0

STS_DO

Indica el nivel de se√±al en la salida
digital DO.

0 = se√±al 0 en la salida digital DO

Byte 0:

Byte 4:

1 = se√±al 1 en la salida digital DO

Bit 1

Bit 1

Observe la velocidad de actualiza‚Äê
ci√≥n.
STS_DI
ACK_SW_ENABLE

Indica el nivel de se√±al en la entra‚Äê 0 = se√±al 0 en la entrada digital DI Byte 0:
da digital DI.
1 = se√±al 1 en la entrada digital DI Bit 2

Byte 4:

Indica el estado de SW_ENABLE.

Bit 2

0 = SW_ENABLE borrado

Byte 0:

Byte 4:

1 = SW_ENABLE activado

Bit 3

Bit 3

SEQ_CNT (a partir de
6ES7138‚Äë4DD01‚Äë0AB
0)

Funci√≥n no disponible en este mo‚Äê ‚Äì
do de operaci√≥n.

Byte 1:

Byte 5:

Bit 0 ‚Ä¶ 3

Bit 0 ‚Ä¶ 3

Valor de medici√≥n de
intensidad (a partir de
6ES7138‚Äë4DD01‚Äë0AB
0)

Intensidad en la DO como valor
anal√≥gico SIMATIC S7.

Palabra 2

Palabra 6

1)

0 ‚Ä¶ 27648 (margen de saturaci√≥n
hasta 32767)

Observe la informaci√≥n referente al "Ajuste del per√≠odo (P√°gina 1159)".

Se√±ales de entrada y de salida del modo de operaci√≥n "Modulaci√≥n de ancho de impulsos"
Se√±ales de entrada y de salida del modo de operaci√≥n "Modulaci√≥n de ancho de impulsos"
La tabla siguiente muestra las se√±ales de entrada y de salida del modo de operaci√≥n
"Modulaci√≥n de ancho de impulsos".
Se√±al de entrada y salida

Significado

Rango

Terminal
del canal 0

Terminal
del canal 1

La habilitaci√≥n HW se puede
seleccionar con el par√°metro
"Funci√≥n DI".
La se√±al de la entrada digital DI
ser√° evaluada por el 2PULSE
al iniciar la secuencia de salida.

0 = habilitaci√≥n HW borrada
1 = habilitaci√≥n HW obtenida
0 ‚Üí 1 = inicio de la secuencia
de salida; depende de la habi‚Äê
litaci√≥n SW

1

5

Se√±al de entrada
Habilitaci√≥n HW

1168

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
Se√±al de entrada y salida

Significado

Rango

Terminal
del canal 0

Terminal
del canal 1

La secuencia de impulsos se
emite en la salida digital DO.

0 = no hay impulso

4

8

Se√±al de salida
Secuencia de impulsos en la
salida digital DO

1 = impulso

Modo "Tren de impulsos"
Modo "Tren de impulsos"
Definici√≥n
El 2PULSE emite el n√∫mero de impulsos predeterminado por el usuario como tren de impulsos
en la salida digital DO (secuencia salida) una vez transcurrido el retardo a la conexi√≥n
(P√°gina 1199) ajustado. El per√≠odo y la duraci√≥n del impulso se pueden ajustar.
La figura siguiente muestra el esquema de principio del modo de operaci√≥n "Tren de impulsos".
+DELOLWDFL¬µQ+:
RSFLRQDO 
+DELOLWDFL¬µQVRIWZDUH
6:B(1$%/( 



‡∏∏
6

4

5
5HWDUGRDOD
FRQH[L¬µQ

6

4

5
1¬ºPHURGH
LPSXOVRV

676B(1$%/(
'2

/DFDGHQDGHLPSXOVRV
HVW¬£HQIXQFLRQDPLHQWR

Iniciar la secuencia de salida
La habilitaci√≥n de la secuencia de salida debe realizarse siempre en el programa de control
por habilitaci√≥n software (P√°gina 1201) (SW_ENABLE 0 ‚Üí 1; MANUAL_DO = 0). El bit de
realimentaci√≥n (P√°gina 1204)ACK_SW_ENABLE indica la habilitaci√≥n software pendiente en
el 2PULSE.
Adem√°s, es posible ajustar con el par√°metro "Funci√≥n DI (P√°gina 1199)" la entrada digital DI
del 2PULSE como habilitaci√≥n hardware.
Para trabajar simult√°neamente con la habilitaci√≥n software y la habilitaci√≥n hardware, la
secuencia de salida comienza con el primer flanco ascendente de la habilitaci√≥n hardware una
vez obtenida la habilitaci√≥n software. El 2PULSE ignora los posteriores flancos ascendentes
de la habilitaci√≥n hardware durante la secuencia de salida actual. Una vez obtenida la
habilitaci√≥n software, un flanco ascendente de la habilitaci√≥n hardware es suficiente para
iniciar la siguiente secuencia de salida.
Cuando se produce la habilitaci√≥n (flanco ascendente) comienza a contar el retardo a la
conexi√≥n y se activa el bit STS_ENABLE. Una vez transcurrido el retardo a la conexi√≥n, el tren
de impulsos se emite con el n√∫mero de impulsos fijado. La secuencia de salida termina
(P√°gina 1189) tan pronto como se emite el √∫ltimo impulso; STS_ENABLE se borra.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1169

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
En caso de modificar el n√∫mero de impulsos durante el funcionamiento de forma no admisible,
la se√±al (P√°gina 1204)ERR_PULS indica un error en la salida de impulsos.
En la siguiente secuencia de salida, el 2PULSE borrar√° el bit de realimentaci√≥n ERR_PULS.

Diagrama de impulsos
La figura siguiente muestra una secuencia de salida en el modo de operaci√≥n "Tren de
impulsos".
+DELOLWDFL¬µQ6:
$&.B6:B(1$%/(
+DELOLWDFL¬µQ+:
HQWUDGDGLJLWDO',
6DOLGDGLJLWDO'2
5HWDUGRD
ODFRQH[L¬µQ
&RPLHQ]RGHODVHFXHQFLD
GHVDOLGD
Q¬ºPHURGHLPSXOVRV 

'XUD
FL¬µQ
GHO
LP
SXOVR

3H
ULRGR
HQWUH
LPSXO
VRV

'XUDFL¬µQ
GHO
SHULRGR
)LQGHOD
VHFXHQFLD
GHVDOLGD

676B(1$%/(
(55B38/6

Cancelar la secuencia de salida
Borrando la habilitaci√≥n software durante el retardo a la conexi√≥n o durante el tren de impulsos,
se cancela la secuencia de salida y el bit STS_ENABLE y la salida digital DO se borran.
Entonces deber√° reiniciar la secuencia de salida.

Tabla de verdad
La tabla siguiente muestra ante qu√© se√±ales y de qu√© forma reacciona el 2PULSE.
Habilitaci√≥n soft‚Äê
ware SW_ENA‚Äê
BLE

Habilitaci√≥n hardware
(entrada digital DI)

Salida digital DO

STS_ENABLE

Secuencia de
salida

1

0‚Üí1

0, si el retardo a la conexi√≥n >0
1, si el retardo a la conexi√≥n =0

0‚Üí1

iniciar

0‚Üí1

no utilizado

0 si el retardo a la conexi√≥n > 0
1 si el retardo a la conexi√≥n = 0

0‚Üí1

iniciar

0

cualquier estado

0

0

cancelar

1

cualquier estado

el estado previo se mantiene

0‚Üí1

0

0

1170

0

-

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Ajustar tiempos mediante la base de tiempo
Mediante la base de tiempo (P√°gina 1199) parametrizable se seleccionan la resoluci√≥n y el
rango de valores de la duraci√≥n del per√≠odo, de la duraci√≥n del impulso y del retardo a la
conexi√≥n.
Base de tiempo = 0,1 ms:

Se pueden fijar tiempos desde 0,2 ms a 6,5535 s con una resoluci√≥n de
0,1 ms.

Base de tiempo = 1 ms:

Se pueden fijar tiempos desde 1 ms a 65,535 s con una resoluci√≥n de 1
ms.

Ajustar y modificar el n√∫mero de impulsos
El n√∫mero de impulsos (P√°gina 1201) se ajusta directamente con el programa de control como
valor num√©rico entre 0 y 65535.
Si se modifica el n√∫mero de impulsos una vez transcurrido el retardo a la conexi√≥n, el nuevo
valor ser√° efectivo de inmediato:
‚óè Si se aumenta el n√∫mero de impulsos, se emitir√° el nuevo n√∫mero de impulsos m√°s grande
‚óè Si se reduce el n√∫mero de impulsos y ya ha sido emitido este n√∫mero menor de impulsos,
se interrumpe la secuencia de salida, se borran el bit STS_ENABLE y la salida digital DO
y se activa ERR_PULS. En la siguiente secuencia de salida se borra ERR_PULS .

Ajustar y modificar el per√≠odo en caso de utilizar la interfaz de control corta
La duraci√≥n del per√≠odo (P√°gina 1200) se define en los par√°metros como un valor num√©rico
entre 2 y 65535:
Per√≠odo parametrizado = base de tiempo x valor num√©rico ajustado
Con el factor para el per√≠odo, es posible adaptar el tiempo parametrizado en el programa de
control. El factor se ajusta entre 0 y 255 con un peso de 0,1.
Per√≠odo = factor x 0,1 x per√≠odo parametrizado
En caso de modificar el factor durante la secuencia de salida, el nuevo per√≠odo tendr√° efecto
al comenzar la siguiente secuencia de salida.

Ajustar la duraci√≥n de impulso
La duraci√≥n del impulso (P√°gina 1200) se define en el par√°metro "Duraci√≥n del impulso" como
un valor num√©rico entre 1 y 65535:
Duraci√≥n de impulso parametrizada = base de tiempo x valor num√©rico fijado
Si utiliza la interfaz de control larga es posible ajustar la relaci√≥n entre la duraci√≥n de impulso
y la pausa entre impulsos:
Relaci√≥n impulso/pausa = (consigna / 255) √ó per√≠odo

Ajustar el retardo a la conexi√≥n
El retardo a la conexi√≥n (P√°gina 1199) se define en los par√°metros como valor num√©rico entre
0 y 65535.
Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1171

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
Retardo a la conexi√≥n parametrizado = base de tiempo x valor num√©rico ajustado

Modo is√≥crono (a partir de 6ES7138‚Äë4DD01‚Äë0AB0)
En el modo de operaci√≥n "Tren de impulsos" el modo is√≥crono no tiene ning√∫n efecto en la
funcionalidad.

Medici√≥n de intensidad (a partir de 6ES7138‚Äë4DD01‚Äë0AB0)
Para m√°s informaci√≥n, ver "Funci√≥n: Medici√≥n de intensidad (a partir de
6ES7138-4DD01-0AB0) (P√°gina 1190)".

Par√°metros del modo de operaci√≥n "Tren de impulsos"
Par√°metros del modo de operaci√≥n "Tren de impulsos"
La tabla siguiente muestra los par√°metros del modo de operaci√≥n "Tren de impulsos".
Par√°metro

Significado

Rango

Ajuste predetermi‚Äê
nado

Modo de operaci√≥n (P√°gi‚Äê
na 1198)

Ajuste el modo de operaci√≥n
"Tren de impulsos".

‚óè Salida de impulsos

Modulaci√≥n de an‚Äê
cho de impulsos

‚óè Modulaci√≥n de ancho de
impulsos
‚óè Tren de impulsos
‚óè Retardo a la conexi√≥n/
desconexi√≥n
‚óè Salida de frecuencia

Base de tiempo (P√°gina 1199)

Con la base de tiempo se selec‚Äê ‚óè 0,1 ms
cionan la resoluci√≥n y el rango
‚óè 1 ms
de valores del per√≠odo, de la du‚Äê
raci√≥n de impulso y del retardo a
la conexi√≥n.

0,1 ms

Funci√≥n DI (P√°gina 1199)

La entrada digital DI se puede
‚óè Entrada
utilizar como entrada o como ha‚Äê ‚óè Habilitaci√≥n HW
bilitaci√≥n HW.

Entrada

Retardo a la conexi√≥n (P√°gi‚Äê
na 1199)

Tiempo que transcurre desde el de 0 a 65535
comienzo de la secuencia de sa‚Äê
lida hasta la salida del tren de
impulsos.

0

Duraci√≥n del impulso (P√°gi‚Äê
na 1200) 1)

Duraci√≥n de impulso:

1172

Introduzca aqu√≠ el tiempo de rea‚Äê
limentaci√≥n del elemento final
de control conectado a la salida
digital DO.

con base de tiempo 0,1 ms:
de 2 a 65535

10000 ‚Üí 1 s

con base de tiempo 1 ms:
de 1 a 65535
Si se sobrepasa el l√≠mite inferior
del rango, el 2PULSE fija la du‚Äê
raci√≥n de impulso a 0,2 ms o 1
ms.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
Par√°metro

Significado

Rango

Ajuste predetermi‚Äê
nado

Duraci√≥n del per√≠odo (P√°gi‚Äê
na 1200) 1)

La duraci√≥n del per√≠odo deber√≠a
ser siempre un m√∫ltiplo del tiem‚Äê
po de respuesta del elemento fi‚Äê
nal de control conectado a la sa‚Äê
lida digital DO.

con base de tiempo 0,1 ms:
de 2 a 65535

20000 ‚Üí 2 s

con base de tiempo 1 ms:
de 1 a 65535

Defina el per√≠odo de acuerdo
con la tasa de repetici√≥n nece‚Äê
saria de los impulsos.
El per√≠odo se puede modificar
en el programa de control con el
"Factor de per√≠odo".
S√≥lo si se utiliza la interfaz de control (P√°gina 1201) corta.
Si se utiliza la interfaz de control larga, ajuste este valor directamente en la interfaz de control.

1)

Se√±ales de control y realimentaci√≥n del modo de operaci√≥n "Tren de impulsos"
Se√±ales de control y realimentaci√≥n del modo de operaci√≥n "Tren de impulsos"
La tabla siguiente muestra las se√±ales de control y realimentaci√≥n del modo de operaci√≥n
"Tren de impulsos".
Se√±ales de control y
realimentaci√≥n

Significado

Rango

Direcci√≥n
del canal 0

Direcci√≥n
del canal 1

0 = SW_ENABLE borrado

Byte 2:

Byte 6:

1 = SW_ENABLE activado

Bit 0

Bit 0

Palabra 0

Palabra 4

Se√±ales de control en caso de utilizar la interfaz de control corta (8 bytes)
Habilitaci√≥n software
(SW_ENABLE)

Iniciar y cancelar la secuencia de
salida.

0 ‚Üí 1 = inicio de la secuencia de
salida; dado el caso, depende de la
habilitaci√≥n HW
N√∫mero de impulsos

Factor de per√≠odo

N√∫mero de impulsos que se emi‚Äê
ten en la salida digital DO una vez
transcurrido el retardo a la cone‚Äê
xi√≥n.

de 0 a 65535
Si el n√∫mero de impulsos es 0, el
2PULSE no emitir√° ning√∫n impul‚Äê
so. La secuencia de salida termina
con ERR_PULS = 1.

Byte 3
El per√≠odo parametrizado se pue‚Äê Factor: de 0 a 255
de modificar antes de que comien‚Äê Duraci√≥n del per√≠odo:
ce la secuencia de salida:
> duraci√≥n del impulso hasta
Per√≠odo = factor x 0,1 x per√≠odo pa‚Äê 65,535 s
rametrizado
Si resulta un per√≠odo > 65,535 s,
√©ste se ajusta a 65,535 s.
Si resulta un per√≠odo ‚â§ duraci√≥n
del impulso, √©sta se ajusta a la du‚Äê
raci√≥n del impulso + 0,2 ms (o bien
duraci√≥n del impulso + 1 ms).

Byte 7

Se√±ales de control cuando se usa la interfaz de control larga (12 bytes) (a partir de 6ES7138‚Äë4DD01‚Äë0AB0)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1173

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
Se√±ales de control y
realimentaci√≥n

Significado

Rango

Direcci√≥n
del canal 0

Direcci√≥n
del canal 1

Habilitaci√≥n software
(SW_ENABLE)

Iniciar y cancelar la secuencia de
salida.

0 = SW_ENABLE borrado

Byte 4:

Byte 10:

1 = SW_ENABLE activado

Bit 0

Bit 0

Palabra 0

Palabra 6

Palabra 2

Palabra 8

Byte 5

Byte 11

0 ‚Üí 1 = inicio de la secuencia de
salida; dado el caso, depende de la
habilitaci√≥n HW
N√∫mero de impulsos

Duraci√≥n del per√≠odo

N√∫mero de impulsos que se emi‚Äê
ten en la salida digital DO una vez
transcurrido el retardo a la cone‚Äê
xi√≥n.

de 0 a 65535

Consigna del per√≠odo

con base de tiempo 0,1 ms:
de 2 a 65535

Si el n√∫mero de impulsos es 0, el
2PULSE no emitir√° ning√∫n impul‚Äê
so. La secuencia de salida termina
con ERR_PULS = 1.

con base de tiempo 1 ms:
de 1 a 65535
Relaci√≥n impulso-pau‚Äê
sa

Es posible ajustar la relaci√≥n entre
la duraci√≥n del impulso y la pausa
entre impulsos.

de 0 a 255

Indica una secuencia de salida en
curso.

0 = salida de impulsos bloqueada

Byte 0:

Byte 4:

1 = salida de impulsos en curso

Bit 0

Bit 0

Indica el nivel de se√±al en la salida
digital DO.

0 = se√±al 0 en salida digital DO

Byte 0:

Byte 4:

1 = se√±al 1 en salida digital DO

Bit 1

Bit 1

P. ej. el valor 128 corresponde a
una relaci√≥n de 50 : 50.

Se√±ales de respuesta
STS_ENABLE
STS_DO

Observe la velocidad de actualiza‚Äê
ci√≥n.
STS_DI

Indica el nivel de se√±al en la entra‚Äê 0 = se√±al 0 en la entrada digital DI Byte 0:
da digital DI.
1 = se√±al 1 en la entrada digital DI Bit 2

Byte 4:

ACK_SW_ENABLE

Indica el estado de SW_ENABLE.

0 = SW_ENABLE borrado

Byte 0:

Byte 4:

1 = SW_ENABLE activado

Bit 3

Bit 3

ERR_PULS

Indica un error de salida de impul‚Äê
sos.

0 = no hay error de salida de im‚Äê
pulsos

Byte 0:

Byte 4:

Bit 4

Bit 4

1 = error de salida de impulsos

Bit 2

SEQ_CNT (a partir de
6ES7138‚Äë4DD01‚Äë0AB
0)

Se incrementa una vez finalizada
una secuencia de salida.

Sin habilitaci√≥n HW: 0 ‚Ä¶ 1

Byte 1:

Byte 5:

Con habilitaci√≥n HW: 0 ‚Ä¶ 15

Bit 0 ‚Ä¶ 3

Bit 0 ‚Ä¶ 3

Valor de medici√≥n de
intensidad (a partir de
6ES7138‚Äë4DD01‚Äë0AB
0)

Intensidad en la DO como valor
anal√≥gico SIMATIC S7.

0 ‚Ä¶ 27648 (margen de saturaci√≥n
hasta 32767)

Palabra 2

Palabra 6

1174

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Se√±ales de entrada y de salida del modo de operaci√≥n "Tren de impulsos"
Se√±ales de entrada y de salida del modo de operaci√≥n "Tren de impulsos"
La tabla siguiente muestra las se√±ales de entrada y de salida del modo de operaci√≥n "Tren de
impulsos".
Se√±al de entrada y salida

Significado

Rango

Terminal
del canal 0

Terminal
del canal 1

La habilitaci√≥n HW se puede
seleccionar con el par√°metro
"Funci√≥n DI".
La se√±al de la entrada digital DI
ser√° evaluada por el 2PULSE
al inicio.

0 = habilitaci√≥n HW borrada

1

5

El n√∫mero de impulsos defini‚Äê
do se emite en la salida digital
DO.

0 = no hay impulso

4

8

Se√±al de entrada
Habilitaci√≥n HW

1 = habilitaci√≥n HW obtenida
0 ‚Üí 1 = inicio de la secuencia
de salida; depende de la habi‚Äê
litaci√≥n SW (SW_ENABLE).

Se√±al de salida
Tren de impulsos en la salida
digital DO

1 = impulso

Modo "Retardo a la conexi√≥n/desconexi√≥n"
Modo "Retardo a la conexi√≥n/desconexi√≥n"
Definici√≥n
La se√±al pendiente en la entrada digital DI es aplicada por el 2PULSE a la salida digital DO con
un retardo a la conexi√≥n y desconexi√≥n.
La figura siguiente muestra el esquema de principio del modo de operaci√≥n "Retardo a la
conexi√≥n/desconexi√≥n".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1175

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
676B(1$%/(
+DELOLWDFL¬µQVRIWZDUH
6:B(1$%/(
',

6

4

'2

5
5HWDUGRDOD
FRQH[L¬µQ

6

4

5
5HWDUGRDOD
GHVFRQH[L¬µQ

Habilitaci√≥n de la secuencia de salida
La habilitaci√≥n para la secuencia de salida debe realizarse siempre en el programa de control
por habilitaci√≥n software (P√°gina 1201) (SW_ENABLE 0 ‚Üí 1; MANUAL_DO = 0), con lo que
STS_ENABLE se activa. El bit de realimentaci√≥n (P√°gina 1204)ACK_SW_ENABLE indica la
habilitaci√≥n software pendiente en el 2PULSE.
El flanco ascendente en la entrada digital DI (0 ‚Üí 1) inicia el retardo a la conexi√≥n y, una vez
transcurrido el retardo a la conexi√≥n, se activa la salida digital DO (P√°gina 1189).
El flanco ascendente en la entrada digital DI (1 ‚Üí 0) inicia el retardo a la desconexi√≥n y, una vez
transcurrido el retardo a la desconexi√≥n, se borra la salida digital DO (P√°gina 1189).
Si el 2PULSE detecta una duraci√≥n del impulso o una pausa entre impulsos demasiado corta,
indica el error de salida de impulsos (P√°gina 1204)ERR_PULS.
Con el siguiente flanco en la entrada digital DI, el 2PULSE borra el bit de realimentaci√≥n
ERR_PULS.

Diagrama de impulsos
SW_ENABLE se activa mientras DI = 0:
La figura siguiente muestra una secuencia de salida en el modo de operaci√≥n "Retardo a la
conexi√≥n/desconexi√≥n" cuando se inicia con DI = 0.

1176

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
+DELOLWDFL¬µQVRIWZDUH
6:B(1$%/( 

$&.B6:B(1$%/(
+DELOLWDFL¬µQ+:
HQWUDGDGLJLWDO', 
6DOLGDGLJLWDO'2

676B(1$%/(
(55B38/6
5HWDUGRDOD
FRQH[L¬µQ

5HWDUGRDOD
GHVFRQH[L¬µQ

SW_ENABLE se activa mientras DI = 1:
Si se activa SW_ENABLE mientras DI = 1, el primer flanco en DI (flanco descendente) se
ignora. La figura siguiente muestra la secuencia de salida correspondiente.
+DELOLWDFL¬µQVRIWZDUH
6:B(1$%/( 

$&.B6:B(1$%/(
+DELOLWDFL¬µQ+:
HQWUDGDGLJLWDO', 
6DOLGDGLJLWDO'2

676B(1$%/(
(55B38/6
5HWDUGRDOD
FRQH[L¬µQ

5HWDUGRDOD
GHVFRQH[L¬µQ

Cancelaci√≥n de la secuencia de salida
Borrando la habilitaci√≥n software (SW_ENABLE = 0) durante la secuencia de salida, √©sta se
cancela y se borran el bit STS_ENABLE y la salida digital.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1177

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Tabla de verdad
La tabla siguiente muestra ante qu√© se√±ales y de qu√© forma reacciona el 2PULSE.
Habilitaci√≥n soft‚Äê
ware SW_ENA‚Äê
BLE

Entrada digital DI

Salida digital DO

STS_ENABLE

Secuencia de
salida

1

0‚Üí1

0 si el retardo a la conexi√≥n > 0
1 si el retardo a la conexi√≥n = 0

1

iniciar

1

1‚Üí0

1, si el retardo a la desconexi√≥n > 0
0, si el retardo a la desconexi√≥n = 0

1

iniciar

0

cualquier estado

0

0

cancelar

1

cualquier estado

el estado previo se mantiene

1

-

0‚Üí1

0

0

1

-

Duraci√≥n/pausa m√≠nima del impulso de la salida digital DO
La duraci√≥n/pausa m√≠nima de impulso de la salida digital DO es de 100 ¬µs.
Esto deber√° tenerse en cuenta al ajustar el retardo a la conexi√≥n/desconexi√≥n y la duraci√≥n/
pausa del impulso de la entrada digital DI;de lo contrario, la reacci√≥n en la salida digital DO no
est√° definida.

La duraci√≥n de impulso de la entrada digital DI es demasiado corta
El 2PULSE detecta un impulso demasiado corto en el flanco descendente de la entrada digital
DI cuando:
Duraci√≥n del impulso + retardo a la desconexi√≥n ‚â§ retardo a la conexi√≥n.
Reacci√≥n del 2PULSE a una duraci√≥n de impulso demasiado corta:
‚óè ERR_PULS se activa
‚óè el actual retardo a la conexi√≥n se borra.
‚óè el retardo a la desconexi√≥n no se inicia.
‚óè el nivel de se√±al en la salida digital DO permanece a 0.
ERR_PULS se borra con el siguiente flanco ascendente en la entrada digital DI.
La figura siguiente muestra el comportamiento cuando la duraci√≥n del impulso es demasiado
breve.
'XUDFL¬µQGHOLPSXOVR
(QWUDGDGLJLWDO',
5HWDUGRDODGHVFRQH[L¬µQ
5HWDUGRDODFRQH[L¬µQ

6DOLGDGLJLWDO'2

1178




Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Pausa entre impulsos de la entrada digital DI demasiado corta
El 2PULSE detecta en el flanco ascendente de la entrada digital DI una pausa demasiado corta
entre impulsos, cuando:
Pausa entre impulsos + retardo a la conexi√≥n ‚â§ retardo a la desconexi√≥n.
Reacci√≥n del 2PULSE a una pausa demasiado corta entre impulsos:
‚óè ERR_PULS se activa
‚óè el actual retardo a la desconexi√≥n se borra.
‚óè el retardo a la conexi√≥n no se inicia.
‚óè el nivel de se√±al en la salida digital DO permanece a 1.
ERR_PULS se borra con el siguiente flanco descendente en la entrada digital DI.
La figura siguiente muestra el comportamiento cuando la pausa entre impulsos es demasiado
breve.
(QWUDGDGLJLWDO',

3HULRGRHQWUHLPSXOVRV

5HWDUGRDODFRQH[L¬µQ
5HWDUGRDODGHVFRQH[L¬µQ
6DOLGDGLJLWDO'2



Redisparo del actual retardo a la conexi√≥n
El 2PULSE reinicia el retardo a la conexi√≥n con el flanco ascendente en la entrada digital DI
cuando:
Retardo a la conexi√≥n > duraci√≥n del impulso + pausa entre impulsos.
Esto desactiva el actual retardo a la desconexi√≥n.
La salida digital DO s√≥lo se activa si hay un nivel de se√±al 1 en la entrada digital DI durante un
tiempo superior al del retardo a la conexi√≥n. Esto permite filtrar secuencias de impulsos
r√°pidas.
La figura siguiente muestra el redisparo del actual retardo a la conexi√≥n.
'XUDFL¬µQGHO 3HULGRHQWUH
LPSXOVR
LPSXOVRV
(QWUDGDGLJLWDO',

5HWDUGRDOD
GHVFRQH[L¬µQ
5HWDUGRDODFRQH[L¬µQ
5HGLVSDUR

6DOLGDGLJLWDO'2

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1179

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Redisparo del actual retardo a la desconexi√≥n
El 2PULSE reinicia el retardo a la desconexi√≥n con el flanco descendente de la entrada digital
DI si:
Retardo a la desconexi√≥n > duraci√≥n del impulso + pausa entre impulsos.
Esto desactiva el actual retardo a la conexi√≥n.
La salida digital DO se borra s√≥lo si hay un nivel de se√±al 0 en la entrada digital DI durante un
tiempo superior al del retardo a la desconexi√≥n.
La figura siguiente muestra el redisparo del actual retardo a la desconexi√≥n.
'XUDFL¬µQGHO 3HULGRHQWUH
LPSXOVRV
LPSXOVR
(QWUDGDGLJLWDO',
5HWDUGRDOD
GHVFRQH[L¬µQ

5HWDUGRDODFRQH[L¬µQ

5HGLVSDUR
5HWDUGRDOD
FRQH[L¬µQ

6DOLGDGLJLWDO'2

Ajustar tiempos mediante la base de tiempo
Mediante la base de tiempo (P√°gina 1199) parametrizable se seleccionan la resoluci√≥n y el
rango del retardo a la conexi√≥n y del retardo a la desconexi√≥n.
Base de tiempo = 0,1 ms:

Se pueden fijar tiempos desde 0,2 ms a 6,5535 s con una resoluci√≥n de
0,1 ms.

Base de tiempo = 1 ms:

Se pueden fijar tiempos desde 1 ms a 65,535 s con una resoluci√≥n de
1 ms.

Ajustar y modificar el retardo a la conexi√≥n en caso de utilizar la interfaz de control corta
El retardo a la conexi√≥n (P√°gina 1199) se define en los par√°metros como valor num√©rico entre
0 y 65535.
Retardo a la conexi√≥n parametrizado = base de tiempo √ó valor num√©rico ajustado
Con el factor para el retardo a la conexi√≥n se puede adaptar el tiempo parametrizado en el
programa de control. El factor se ajusta entre 0 y 255 con una ponderaci√≥n de 0,1:
Retardo a la conexi√≥n = factor x 0,1 x retardo a la conexi√≥n parametrizado
Si se cambia el factor de retardo a la conexi√≥n, el nuevo retardo a la conexi√≥n se activa con el
siguiente flanco ascendente en la entrada digital DI.

1180

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Ajustar y modificar el retardo a la desconexi√≥n
El retardo a la desconexi√≥n se ajusta directamente como valor num√©rico entre 0 y 65535 en
el programa de control (P√°gina 1201):
Retardo a la desconexi√≥n = base de tiempo x valor num√©rico fijado
Si se cambia el factor de retardo a la desconexi√≥n, el nuevo retardo a la desconexi√≥n se activa
con el siguiente flanco descendente en la entrada digital DI.

Modo is√≥crono (a partir de 6ES7138‚Äë4DD01‚Äë0AB0)
En el modo de operaci√≥n "Retardo a la conexi√≥n/desconexi√≥n" el modo is√≥crono no tiene
ning√∫n efecto en la funcionalidad.

Par√°metros del modo de operaci√≥n "Retardo a la conexi√≥n/desconexi√≥n"
Par√°metros del modo de operaci√≥n "Retardo a la conexi√≥n/desconexi√≥n"
La tabla siguiente muestra los par√°metros del modo de operaci√≥n "Retardo a la conexi√≥n/
desconexi√≥n".
Par√°metro

Significado

Rango

Modo de operaci√≥n (P√°gi‚Äê
na 1198)

Ajuste el modo de operaci√≥n
‚óè Salida de impulsos
"Retardo a la conexi√≥n/descone‚Äê
‚óè Modulaci√≥n de ancho de
xi√≥n".
impulsos

Ajuste predetermi‚Äê
nado
Modulaci√≥n de an‚Äê
cho de impulsos

‚óè Tren de impulsos
‚óè Retardo a la conexi√≥n/
desconexi√≥n
‚óè Salida de frecuencia
Base de tiempo (P√°gina 1199)

Con la base de tiempo se selec‚Äê ‚óè 0,1 ms
cionan la resoluci√≥n y el rango
‚óè 1 ms
del retardo a la conexi√≥n y del
retardo a la desconexi√≥n.

Retardo a la conexi√≥n (P√°gi‚Äê
na 1199) 1)

Tiempo que transcurre entre el
flanco ascendente de la entrada
digital DI y su salida a trav√©s de
la salida digital DO. El retardo a
la conexi√≥n se puede modificar
en el programa de control con el
"Factor de retardo a la cone‚Äê
xi√≥n".

de 0 a 65535

0,1 ms

0

S√≥lo si se utiliza la interfaz de control (P√°gina 1201) corta.
Si se utiliza la interfaz de control larga, ajuste este valor directamente en la interfaz de control.
1)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1181

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Se√±ales de control y realimentaci√≥n del modo de operaci√≥n "Retardo a la conexi√≥n/desconexi√≥n"
Se√±ales de control y realimentaci√≥n del modo de operaci√≥n "Retardo a la conexi√≥n/desconexi√≥n"
La tabla siguiente muestra las se√±ales de control y realimentaci√≥n del modo de operaci√≥n
"Retardo a la conexi√≥n/desconexi√≥n".
Se√±ales de control y
realimentaci√≥n

Significado

Rango

Direcci√≥n
del canal 0

Direcci√≥n
del canal 1

Se√±ales de control en caso de utilizar la interfaz de control corta (8 bytes)
Habilitaci√≥n software
(SW_ENABLE)

La habilitaci√≥n software debe acti‚Äê
varse siempre en el programa de
control. Si se desactiva la habilita‚Äê
ci√≥n software, la actual secuencia
de salida se cancela.

0 = SW_ENABLE borrado

Byte 2:

Byte 6:

1 = SW_ENABLE activado

Bit 0

Bit 0

Retardo a la descone‚Äê
xi√≥n

Tiempo que transcurre entre el
flanco descendente de la entrada
digital DI y su salida a trav√©s de la
salida digital DO.

con base de tiempo 0,1 ms:
de 2 a 65535

Palabra 0

Palabra 4

con base de tiempo 1 ms: de 1 a
65535
Si se excede el l√≠mite inferior del
rango, el retardo a la desconexi√≥n
no tiene efecto.

Factor de retardo a la
conexi√≥n

Byte 3
El retardo a la conexi√≥n parametri‚Äê Factor: de 0 a 255
zado se puede modificar:
Retardo a la conexi√≥n:
Retardo a la conexi√≥n = factor x 0,1 0,2 ms a 65,535 s
x retardo a la conexi√≥n parametri‚Äê
Si resulta un retardo a la conexi√≥n
zado
< 0,2 ms o con un factor = 0, el re‚Äê
tardo a la conexi√≥n efectivo = 0.
Si resulta un retardo a la conexi√≥n
> 65,535 s, el retardo a la conexi√≥n
se limita a 65,535 s.

Byte 7

Se√±ales de control cuando se usa la interfaz de control larga (12 bytes) (a partir de 6ES7138‚Äë4DD01‚Äë0AB0)
Habilitaci√≥n software
(SW_ENABLE)

La habilitaci√≥n software debe acti‚Äê
varse siempre en el programa de
control. Si se desactiva la habilita‚Äê
ci√≥n software, la actual secuencia
de salida se cancela.

0 = SW_ENABLE borrado

Byte 4:

Byte 10:

1 = SW_ENABLE activado

Bit 0

Bit 0

Retardo a la descone‚Äê
xi√≥n

Tiempo que transcurre entre el
flanco descendente de la entrada
digital DI y su salida a trav√©s de la
salida digital DO.

con base de tiempo 0,1 ms:
de 2 a 65535

Palabra 0

Palabra 6

Palabra 2

Palabra 8

con base de tiempo 1 ms: de
1 a 65535
Si se excede el l√≠mite inferior del
rango, el retardo a la desconexi√≥n
no tiene efecto.

Retardo a la conexi√≥n

Tiempo que transcurre entre el
flanco ascendente de la entrada di‚Äê
gital DI y su salida a trav√©s de la
salida digital DO.

con base de tiempo 0,1 ms:
de 2 a 65535
con base de tiempo 1 ms: de
1 a 65535
Si se excede el l√≠mite inferior del
rango, el retardo a la conexi√≥n no
tiene efecto.

1182

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
Se√±ales de control y
realimentaci√≥n

Significado

Rango

Direcci√≥n
del canal 0

Direcci√≥n
del canal 1

Indica el estado de la habilitaci√≥n
software (SW_ENABLE).

0 = habilitaci√≥n software bloqueada Byte 0:

Byte 4:

1 = habilitaci√≥n SW obtenida

Bit 0

Bit 0

0 = se√±al 0 en salida digital DO

Byte 0:

Byte 4:

1 = se√±al 1 en salida digital DO

Bit 1

Bit 1

Se√±ales de respuesta
STS_ENABLE
STS_DO

Indica el nivel de se√±al en la salida
digital DO.
Observe la velocidad de actualiza‚Äê
ci√≥n.

STS_DI
ACK_SW_ENABLE

Indica el nivel de se√±al en la entra‚Äê 0 = se√±al 0 en la entrada digital DI Byte 0:
da digital DI.
1 = se√±al 1 en la entrada digital DI Bit 2

Byte 4:

Indica el estado de SW_ENABLE.

Bit 2

0 = SW_ENABLE borrado

Byte 0:

Byte 4:

1 = SW_ENABLE activado

Bit 3

Bit 3

Indica un error en la salida de im‚Äê
pulsos si la duraci√≥n del impulso o
la pausa entre impulsos es dema‚Äê
siado corta.

0 = no hay error de salida de im‚Äê
pulsos

Byte 0:

Byte 4:

Bit 4

Bit 4

SEQ_CNT (a partir de
6ES7138‚Äë4DD01‚Äë0AB
0)

Se incrementa en la DO con cada
flanco (ascendente y descenden‚Äê
te).

0 ‚Ä¶ 15

Byte 1:

Byte 5:

Bit 0 ‚Ä¶ 3

Bit 0 ‚Ä¶ 3

Reservado

‚Äì

0

Palabra 2

Palabra 6

ERR_PULS

1 = error de salida de impulsos

Se√±ales de entrada y de salida del modo de operaci√≥n "Retardo a la conexi√≥n/desconexi√≥n"
Se√±ales de entrada y de salida del modo de operaci√≥n "Retardo a la conexi√≥n/desconexi√≥n"
La tabla siguiente muestra las se√±ales de entrada y de salida del modo de operaci√≥n "Retardo
a la conexi√≥n/desconexi√≥n".
Se√±al de entrada y salida

Significado

Rango

Terminal
del canal 0

Terminal
del canal 1

1

5

4

8

Se√±al de entrada
Entrada digital DI

La se√±al de la entrada digital DI 0 = no hay impulso
es emitida por el 2PULSE con 1 = impulso
un retardo a la conexi√≥n/desco‚Äê
nexi√≥n en la salida digital DO.

Se√±al de salida
Impulso en la salida digital DO La se√±al de la entrada digital DI 0 = no hay se√±al
es emitida por el 2PULSE con 1 = se√±al
un retardo a la conexi√≥n/desco‚Äê
nexi√≥n en la salida digital DO.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1183

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Modo de operaci√≥n "Salida de frecuencia" (a partir de 6ES7138-4DD01-0AB0)
Modo "Salida de frecuencia"
Definici√≥n
Salida de una se√±al de onda cuadrada en la salida digital del 2PULSE con una frecuencia
definida.
La secuencia de salida se inicia una vez transcurrido el retardo a la conexi√≥n (P√°gina 1199)
parametrizado en la salida digital DO del 2PULSE.
La figura siguiente muestra el esquema de principio para el modo de operaci√≥n "Salida de
frecuencia".
+DELOLWDFL¬µQ+:
RSFLRQDO
+DELOLWDFL¬µQVRIWZDUH
6:B(1$%/(



‡∏∏
6

4

6

4

Frecuencia

5
5HWDUGRDOD
FRQH[L¬µQ

5
9DORUGHVDOLGD

676B(1$%/(
'2

6DOLGDGHIUHFXHQFLDHQ
FXUVR

Inicio de la secuencia de salida
La habilitaci√≥n para la secuencia de salida debe realizarse siempre en el programa de control
por habilitaci√≥n software (P√°gina 1201) (SW_ENABLE 0 ‚Üí 1; MANUAL_DO = 0).
El bit de respuesta (P√°gina 1204)ACK_SW_ENABLE indica la habilitaci√≥n software pendiente
en el 2PULSE.
Adem√°s, es posible ajustar con el par√°metro "Funci√≥n DI (P√°gina 1199)" la entrada digital DI
del 2PULSE como habilitaci√≥n hardware.
Para trabajar simult√°neamente con la habilitaci√≥n software y la habilitaci√≥n hardware, la
secuencia de salida se comienza con el primer flanco ascendente de la habilitaci√≥n hardware
una vez obtenida la habilitaci√≥n software. El 2PULSE ignora los posteriores flancos
ascendentes de la habilitaci√≥n hardware durante la secuencia de salida actual.
Cuando se produce la habilitaci√≥n (flanco ascendente) comienza a contar el retardo a la
conexi√≥n y se activa el bit STS_ENABLE. La salida de frecuencia se inicia una vez transcurrido
el retardo a la conexi√≥n. Mientras el bit SW_ENABLE est√° activado, la secuencia de salida se
ejecuta de modo continuo.

1184

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Diagrama de impulsos
La figura siguiente muestra una secuencia de salida en el modo de operaci√≥n "Salida de
frecuencia".
+DELOLWDFL¬µQ
VRIWZDUH
6:B(1$%/(
$&.B6:B(1$%/(
+DELOLWDFL¬µQ+:
HQWUDGDGLJLWDO',

3HU¬ØRGR

3HU¬ØRGR

6DOLGDGLJLWDO'2
5HWDUGRD 'XUD 3DXVD
FL¬µQGHO HQWUH
ODFRQH
LPSXOVR LPSXOVRV
[L¬µQ
9DORUGHVDOLGDN+]

9DORUGHVDOLGD+]

676B(1$%/(

,QLFLDUVHFXHQFLDGHVDOLGD

Cancelaci√≥n de la secuencia de salida
Borrando la habilitaci√≥n software (SW_ENABLE = 0) durante el retardo a la conexi√≥n o durante
la salida de frecuencia se cancela la secuencia de salida y el bit STS_ENABLE y la salida digital
DO se borran.
A continuaci√≥n es necesario reiniciar la secuencia de salida.

Tabla de verdad
La tabla siguiente muestra ante qu√© se√±ales y de qu√© forma reacciona el 2PULSE.
Habilitaci√≥n soft‚Äê
ware SW_ENA‚Äê
BLE

Habilitaci√≥n hardware
(entrada digital DI)

Salida digital DO

STS_ENABLE

Secuencia de
salida

1

0‚Üí1

0 si el retardo a la conexi√≥n > 0
1 si el retardo a la conexi√≥n = 0

0‚Üí1

iniciar

0‚Üí1

no utilizado

0 si el retardo a la conexi√≥n > 0
1 si el retardo a la conexi√≥n = 0

0‚Üí1

iniciar

0

cualquier estado

0

0

cancelar

1

cualquier estado

el estado previo se mantiene

0‚Üí1

0

0

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

0

-

1185

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Ajustar tiempos mediante la base de tiempo
Mediante la base de tiempo (P√°gina 1199) parametrizable se seleccionan la resoluci√≥n y el
rango del retardo a la conexi√≥n.
Base de tiempo = 0,1 ms:

Se pueden fijar tiempos desde 0,2 ms a 6,5535 s con una resoluci√≥n de
0,1 ms.

Base de tiempo = 1 ms:

Se pueden fijar tiempos desde 1 ms a 65,535 s con una resoluci√≥n de
1 ms.

Ajustar y modificar el valor de salida
Con el par√°metro "Formato de salida (P√°gina 1199)" se selecciona el rango del valor de salida.
‚óè Si el valor de salida est√° comprendido entre 1 Hz y 5000 Hz, seleccione el formato de salida
"1 Hz".
‚óè Si el valor de salida es un valor anal√≥gico SIMATIC S7 (entre 0 y 27648), seleccione el
formato de salida "Salida anal√≥gica S7". Con "Salida anal√≥gica S7" se puede alcanzar una
mayor precisi√≥n en la especificaci√≥n de consigna.
El 2PULSE calcula la frecuencia conforme a la f√≥rmula siguiente:
Frecuencia = (consigna / 27648) √ó 5 kHz
El valor de salida se especifica directamente con el programa de control. El nuevo valor de
frecuencia se emite con el siguiente flanco ascendente de la salida.

Precisi√≥n de la frecuencia de salida
La frecuencia de salida parametrizada se emite en la salida digital DO con la siguiente
precisi√≥n:
‚óè 0,01 Hz con frecuencia de salida de 0,1 Hz a 800 Hz
‚óè 0,1 Hz con frecuencia de salida de > 800 Hz a 2000 Hz
‚óè 0,5 Hz con frecuencia de salida de > 2000 Hz a 5000 Hz

Ajustar el retardo a la conexi√≥n en caso de utilizar la interfaz de control corta
El retardo a la conexi√≥n (P√°gina 1199) se define en los par√°metros como valor num√©rico entre
0 y 65535.
Retardo a la conexi√≥n parametrizado = base de tiempo √ó valor num√©rico ajustado
Si utiliza la interfaz de control corta, con el factor para el retardo a la conexi√≥n se puede adaptar
el tiempo parametrizado en el programa de control. El factor se ajusta entre 0 y 255 con una
ponderaci√≥n de 0,1:
Retardo a la conexi√≥n = factor √ó 0,1 √ó retardo a la conexi√≥n parametrizado

Modo is√≥crono
En el modo de operaci√≥n "Salida de frecuencia" el modo is√≥crono no tiene ning√∫n efecto en la
funcionalidad.

1186

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Par√°metros del modo de operaci√≥n "Salida de frecuencia"
Par√°metros del modo de operaci√≥n "Salida de frecuencia"
La tabla siguiente muestra los par√°metros del modo de operaci√≥n "Salida de frecuencia".
Par√°metro

Significado

Rango

Ajuste predetermi‚Äê
nado

Modo de operaci√≥n (P√°gi‚Äê
na 1198)

Ajuste el modo de operaci√≥n
"Salida de frecuencia".

‚óè Salida de impulsos

Modulaci√≥n de an‚Äê
cho de impulsos

‚óè Modulaci√≥n de ancho de
impulsos
‚óè Tren de impulsos
‚óè Retardo a la conexi√≥n/
desconexi√≥n
‚óè Salida de frecuencia

Base de tiempo (P√°gina 1199)

Mediante la base de tiempo se ‚óè 0,1 ms
seleccionan la resoluci√≥n y el
‚óè 1 ms
rango del retardo a la conexi√≥n.

Formato de salida (P√°gina 1199) Dependiendo de la resoluci√≥n
requerida para la salida de fre‚Äê
cuencia, elija entre 1 Hz o Salida
anal√≥gica S7.

‚óè 1 Hz

0,1 ms

1 Hz

‚óè Salida anal√≥gica S7

Funci√≥n DI (P√°gina 1199)

La entrada digital DI se puede
‚óè Entrada
utilizar como entrada o como ha‚Äê ‚óè Habilitar HW
bilitaci√≥n HW.

Entrada

Retardo a la conexi√≥n (P√°gi‚Äê
na 1199) 1)

Tiempo que transcurre desde el de 0 a 65535
comienzo de la secuencia de sa‚Äê
lida hasta la salida de la secuen‚Äê
cia de impulsos. El retardo a la
conexi√≥n se puede modificar en
el programa de control con el
"Factor de retardo a la cone‚Äê
xi√≥n".

0

S√≥lo si se utiliza la interfaz de control (P√°gina 1201) corta.
Si se utiliza la interfaz de control larga, ajuste este valor directamente en la interfaz de control.
1)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1187

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Se√±ales de control y realimentaci√≥n del modo de operaci√≥n "Salida de frecuencia"
Se√±ales de control y realimentaci√≥n del modo de operaci√≥n "Salida de frecuencia"
La tabla siguiente muestra las se√±ales de control y realimentaci√≥n del modo de operaci√≥n
"Salida de frecuencia".
Se√±ales de control y
realimentaci√≥n

Significado

Rango

Direcci√≥n
del canal 0

Direcci√≥n
del canal 1

Se√±ales de control en caso de utilizar la interfaz de control corta (8 bytes)
Habilitaci√≥n software
(SW_ENABLE)

Iniciar y cancelar la secuencia de
salida.

0 = SW_ENABLE borrado
1 = SW_ENABLE activado
0 ‚Üí 1 = inicio de la secuencia de
salida; dado el caso, depende de la
habilitaci√≥n hardware

Byte 2:

Byte 6:

Bit 0

Bit 0

Valor de salida

El valor que se aplica a la salida
digital DO como frecuencia.

Dependiendo del formato de sali‚Äê
da:

Palabra 0

Palabra 4

Byte 3

Byte 7

‚óè 1 Hz: 0 ... 5000
‚óè Salida anal√≥gica S7:
0 ... 27648
Si se introduce un valor de salida >
5000 √≥ 27648, el 2PULSE lo limita‚Äê
r√° a 5000 √≥ 27648, respectivamen‚Äê
te.
Factor de retardo a la
conexi√≥n

El retardo a la conexi√≥n parametri‚Äê
zado se puede modificar antes de
que comience la secuencia de sa‚Äê
lida:
Retardo a la conexi√≥n = fac‚Äê
tor √ó 0,1 √ó retardo a la conexi√≥n
parametrizado

de 0 a 255
Si resulta un retardo a la conexi√≥n
< 0,2 ms o con un factor = 0, el re‚Äê
tardo a la conexi√≥n efectivo = 0.
Si resulta un retardo a la conexi√≥n
> 65,535 s, el retardo a la conexi√≥n
se limita a 65,535 s.

Se√±ales de control en caso de utilizar la interfaz de control larga (12 bytes)
Habilitaci√≥n software
(SW_ENABLE)

Iniciar y cancelar la secuencia de
salida.

0 = SW_ENABLE borrado
1 = SW_ENABLE activado
0 ‚Üí 1 = inicio de la secuencia de
salida; dado el caso, depende de la
habilitaci√≥n hardware

Byte 4:

Byte 10:

Bit 0

Bit 0

Valor de salida

Valor que se emite en la salida di‚Äê
gital DO como frecuencia.

Dependiendo del formato de sali‚Äê
da:

Palabra 0

Palabra 6

Palabra 2

Palabra 8

‚óè 1 Hz: 0 ... 5000
‚óè Salida anal√≥gica S7:
0 ... 27648
Si se introduce un valor de salida
> 5000 √≥ 27648, el 2PULSE lo limi‚Äê
tar√° a 5000 √≥ 27648 respectiva‚Äê
mente.
Retardo a la conexi√≥n

El retardo a la conexi√≥n se puede
modificar antes de que comience
la secuencia de salida.

de 0 a 65535
Retardo a la conexi√≥n = base de
tiempo x valor num√©rico fijado

Se√±ales de respuesta

1188

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
Se√±ales de control y
realimentaci√≥n

Significado

Rango

Direcci√≥n
del canal 0

Direcci√≥n
del canal 1

STS_ENABLE

Indica una secuencia de salida en
curso.

0 = salida de impulsos bloqueada

Byte 0:

Byte 4:

1 = salida de impulsos en curso

Bit 0

Bit 0

STS_DO

Indica el nivel de se√±al en la salida
digital DO.

0 = se√±al 0 en salida digital DO

Byte 0:

Byte 4:

1 = se√±al 1 en salida digital DO

Bit 1

Bit 1

Observe la velocidad de actualiza‚Äê
ci√≥n.
STS_DI
ACK_SW_ENABLE

Indica el nivel de se√±al en la entra‚Äê 0 = se√±al 0 en la entrada digital DI Byte 0:
da digital DI.
1 = se√±al 1 en la entrada digital DI Bit 2

Byte 4:

Indica el estado de SW_ENABLE.

Bit 2

0 = SW_ENABLE borrado

Byte 0:

Byte 4:

1 = SW_ENABLE activado

Bit 3

Bit 3

Byte 1:

Byte 5:

SEQ_CNT

no tiene funci√≥n en este modo de
operaci√≥n.

‚Äì

Reservado

‚Äì

0

Bit 0 ‚Ä¶ 3

Bit 0 ‚Ä¶ 3

Palabra 2

Palabra 6

Se√±ales de entrada y de salida del modo de operaci√≥n "Salida de frecuencia"
Se√±ales de entrada y de salida del modo de operaci√≥n "Salida de frecuencia"
La tabla siguiente muestra las se√±ales de entrada y de salida del modo de operaci√≥n "Salida
de frecuencia".
Se√±al de entrada y salida

Significado

Rango

Terminal
del canal 0

Terminal
del canal 1

La habilitaci√≥n HW se puede
seleccionar con el par√°metro
"Funci√≥n DI".
La se√±al de la entrada digital DI
se evaluar√° con el 2PULSE al
inicio de la secuencia de salida.

0 = habilitaci√≥n HW borrada
1 = habilitaci√≥n HW obtenida
0 ‚Üí 1 = inicio de la secuencia
de salida; depende de la habi‚Äê
litaci√≥n SW

1

5

La frecuencia se emite en la
salida digital DO.

0 = no hay impulso

4

8

Se√±al de entrada
Habilitaci√≥n HW

Se√±al de salida
Frecuencia en la salida digital
DO

1 = impulso

Contador de secuencias (a partir de 6ES7138-4DD01-0AB0)
El 2PULSE dispone de un contador de secuencias para cada canal que permite contar las
secuencias de salida finalizadas.
Es posible vigilar el fin de una secuencia de salida en la interfaz de respuesta utilizando el
contador de secuencias SEC_CNT.
El contador tiene una anchura de 4 bits. Tras un desbordamiento, el contador salta a 0
nuevamente.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1189

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Funcionamiento del contador de secuencias
Dependiendo del modo de operaci√≥n, el contador de secuencias tiene las siguientes funciones:
‚óè Salida de impulsos (P√°gina 1154) y tren de impulsos (P√°gina 1169)
‚Äì Sin habilitaci√≥n hardware, el contador se pone a 1 una vez finalizada la secuencia de
salida.
‚Äì Con habilitaci√≥n hardware, el contador se incrementa cada vez que finaliza una
secuencia de salida.
‚óè Retardo a la conexi√≥n/desconexi√≥n (P√°gina 1175)
El contador se incrementa en la DO con cada flanco (ascendente y descendente).
‚óè Modulaci√≥n de ancho de impulsos y salida de frecuencia
El contador no tiene ninguna funci√≥n.
Borrando la habilitaci√≥n software (SW_ENABLE = 0) el contador se pone a 0 nuevamente.

Posibilidades de uso
El contador de secuencias se puede utilizar especialmente para:
‚óè Medir (contar) impulsos demasiado cortos.
‚óè Contar las secuencias de salida en combinaci√≥n con la habilitaci√≥n hardware.

Funci√≥n: Medici√≥n de intensidad (a partir de 6ES7138-4DD01-0AB0)
La medici√≥n de intensidad se puede utilizar en toda una serie de aplicaciones para llevar a
cabo funciones de regulaci√≥n y diagn√≥stico. En la interfaz de respuesta puede leerse el valor
medido de intensidad.

Funcionamiento
La medici√≥n de intensidad s√≥lo tiene lugar durante la emisi√≥n de impulsos en los modos de
operaci√≥n "Modulaci√≥n de ancho de impulsos (P√°gina 1159)" y "Tren de impulsos
(P√°gina 1169)". Si no hay salida de impulsos (con STS_ENABLE = 0) se reporta 0 como valor
medido. Con STS_ENABLE = 1 el valor medido es v√°lido.
En los modos de operaci√≥n "Salida de impulsos", "Retardo a la conexi√≥n/desconexi√≥n" y
"Salida de frecuencia" siempre se reporta 0 como valor medido de intensidad.
El valor medido de intensidad que se devuelve es un valor medio formado por valores medidos
que se registran dentro de la duraci√≥n de un per√≠odo. En per√≠odos < 5 ms, entre dos puntos de
medici√≥n individuales existe una separaci√≥n temporal de 40 ¬µs como m√°ximo. En per√≠odos a√∫n
m√°s largos se registran siempre 128 puntos de medici√≥n por per√≠odo. De esta manera se crea
una separaci√≥n temporal m√°s larga entre los puntos de medici√≥n.

1190

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
En el modo is√≥crono, en cada instante Ti se suministra un nuevo valor medido de intensidad a
trav√©s de la interfaz de respuesta. En el modo no is√≥crono se suministra un nuevo valor medido
de intensidad aprox. cada 500 ¬µs.
Nota
Para que la medici√≥n de intensidad funcione correctamente no se debe integrar ning√∫n diodo
de libre circulaci√≥n en la carga.

Rango de medida y valor medido
El rango de medida est√° fijado en una corriente nominal de 2 A.
El valor medido de intensidad se suministra en la interfaz de respuesta (P√°gina 1204) como
valor anal√≥gico SIMATIC S7.
‚óè Una intensidad de 2 A corresponde al valor anal√≥gico SIMATIC S7 27648.
‚óè En caso de una conexi√≥n en paralelo, una intensidad de 4 A corresponde al valor anal√≥gico
SIMATIC S7 27648.
Las mediciones de intensidad se pueden realizar hasta el valor anal√≥gico SIMATIC S7 32767.
Esto corresponde a una intensidad de 2,4 A. Intensidades por encima de 2 A s√≥lo pueden
presentarse moment√°neamente.

Precisi√≥n
La precisi√≥n de la medici√≥n de intensidad asciende al 3 % del rango de medida.
Nota
Esta precisi√≥n en la medici√≥n de intensidad s√≥lo se puede alcanzar si durante la medici√≥n no
se cambia el per√≠odo.

Funci√≥n: Control directo de la salida digital DO
Definici√≥n
Para probar el actuador conectado, es posible controlar directamente la salida digital DO del
2PULSE. Para ello hay que seleccionar la funci√≥n por medio del programa de control
(P√°gina 1201) con el bit de control MANUAL_DO activado y el bit de control SW_ENABLE
borrado. La funci√≥n
‚óè sirve de apoyo para poner en marcha una instalaci√≥n
‚óè permite aprovechar un canal no utilizado del 2PULSE como DO
Una vez seleccionada la funci√≥n, el 2PULSE borra los bits de respuesta
(P√°gina 1204)STS_ENABLE y ERR_PULS y se cancela la secuencia de salida en curso. La
funci√≥n es prioritaria frente al modo de operaci√≥n seleccionado actualmente.
El estado de la salida digital DO se especifica con el bit de control (P√°gina 1201)SET_DO.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1191

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
Borrando el bit de control MANUAL_DO, se deselecciona la funci√≥n "Control directo de la
salida digital DO". Con ello se borra la salida digital DO. A continuaci√≥n se puede reiniciar una
secuencia de salida con el flanco ascendente de SW_ENABLE.

Se√±ales de control y realimentaci√≥n/se√±al de salida
Se√±ales

Significado

Rango de valores

En caso de utilizar
la interfaz de con‚Äê
trol corta (8 bytes)

En caso de utilizar
la interfaz de con‚Äê
trol larga (12 bytes)

Direc‚Äê
ci√≥n del
canal 0

Direc‚Äê
ci√≥n del
canal 1

Direc‚Äê
ci√≥n del
canal 0

Direc‚Äê
ci√≥n del
canal 1

0 = SW_ENABLE borrado

Byte 2:

Byte 6:

Byte 4:

Byte 10:

1 = SW_ENABLE activado

Bit 0

Bit 0

Bit 0

Bit 0

Con el bit de control se se‚Äê 0 = control directo de la salida DO
lecciona y deselecciona la no seleccionado.
funci√≥n.
1 = control directo de la salida DO
seleccionado.

Byte 2:

Byte 6:

Byte 4:

Byte 10:

Bit 1

Bit 1

Bit 1

Bit 1

Con el bit de control se es‚Äê 0 = se√±al 0 en la salida digital DO
pecifica el estado de la sa‚Äê 1 = se√±al 1 en la salida digital DO
lida digital DO.

Byte 2:

Byte 6:

Byte 4:

Byte 10:

Bit 2

Bit 2

Bit 2

Bit 2

Se√±ales de control
SW_ENABLE

MANUAL_DO

SET_DO

Para poder seleccionar la
funci√≥n tiene que haberse
borrado el bit de control.

Se√±ales de respuesta
STS_ENABLE
STS_DO

Se borra tras seleccionar‚Äê
se la funci√≥n.

0 = salida de impulsos bloqueada

Byte 0:

Byte 4:

Byte 0:

Byte 4:

1 = salida de impulsos en curso

Bit 0

Bit 0

Bit 0

Bit 0

Indica el nivel de se√±al en
la salida digital DO.

0 = se√±al 0 en la salida digital DO

Byte 0:

Byte 4:

Byte 0:

Byte 4:

1 = se√±al 1 en la salida digital DO

Bit 1

Bit 1

Bit 1

Bit 1

0 = se√±al 0 en la entrada digital DI

Byte 0:

Byte 4:

Byte 0:

Byte 4:

1 = se√±al 1 en la entrada digital DI

Bit 2

Bit 2

Bit 2

Bit 2

4

8

4

8

Observe la velocidad de
actualizaci√≥n.
STS_ DI

Indica el nivel de se√±al en
la entrada digital DI.

Se√±al de salida
Salida digital
DO

El estado preajustado con 0 = no hay se√±al
el bit de control SET_DO
1 = se√±al
se emite por la salida digi‚Äê
tal DO.

Funci√≥n: Detecci√≥n de fallos/Diagn√≥stico
Error de parametrizaci√≥n ERR_PARA
Si el 2PULSE no puede identificar los par√°metros como propios, genera un error de
parametrizaci√≥n (P√°gina 1204). Entonces los dos canales no est√°n parametrizados.
El slot configurado del 2PULSE debe coincidir con la configuraci√≥n real.

1192

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Error de salida de impulsos ERR_PULS
El 2PULSE detecta un error de salida de impulsos espec√≠fico de un canal en los modos de
operaci√≥n "Salida de impulsos (P√°gina 1154)", "Retardo a la conexi√≥n/desconexi√≥n
(P√°gina 1175)" y "Tren de impulsos (P√°gina 1169)".
Las causas y reacciones se encuentran en la descripci√≥n del modo de operaci√≥n
correspondiente y en "Interfaz de respuesta del 2PULSE (P√°gina 1204)".
El error de salida de impulsos detectado se muestra para el canal afectado con el bit de
respuesta (P√°gina 1204)ERR_PULS.

Cortocircuito en la alimentaci√≥n del sensor ERR_24V
El 2PULSE detecta un cortocircuito de la alimentaci√≥n del sensor que pone a disposici√≥n en los
terminales 2 y 6.
El cortocircuito detectado se indica para ambos canales con el bit de respuesta
(P√°gina 1204)ERR_24V.
Una ca√≠da de la tensi√≥n de alimentaci√≥n de 24 V tambi√©n puede ocasionar una se√±alizaci√≥n de
cortocircuito.

Cortocircuito en la salida digital ERR_DO
El 2PULSE detecta un cortocircuito en la salida digital del canal.
El cortocircuito detectado se muestra para el canal afectado con el bit de respuesta
(P√°gina 1204)ERR_DO.
Nota
En caso de cortocircuito, la salida digital est√° en capacidad de suministrar moment√°neamente
una intensidad mucho m√°s alta que el valor asignado.

Aviso de diagn√≥stico
En caso de "cortocircuito en la alimentaci√≥n del enc√≥der" o "cortocircuito de la salida digital",
el 2PULSE genera un aviso de diagn√≥stico para la CPU/el maestro conectado. Para ello se
debe habilitar el par√°metro "Diagn√≥stico de grupo (P√°gina 1197)".
Nota
Mediante avisos de diagn√≥stico se notifica que en un canal o en ambos canales del 2PULSE
ha ocurrido un error. El diagn√≥stico se puede evaluar con STEP 7.
El registro de diagn√≥stico DS1 s√≥lo contiene la informaci√≥n correspondiente al canal 0. No
obstante, tambi√©n se genera una alarma de diagn√≥stico si ocurren errores en el canal 1. Las
se√±ales de respuesta proporcionan informaci√≥n detallada sobre los errores ocurridos en
ambos canales. Eval√∫e la interfaz de respuesta (P√°gina 1204) en programas de usuario
nuevos (ver abajo).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1193

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Par√°metros
Par√°metros

Significado

Rango

Por defecto

Diagn√≥stico colectivo (P√°gi‚Äê
na 1197)

Estando habilitado el diag‚Äê
n√≥stico colectivo, el 2PULSE
genera un aviso de diagn√≥s‚Äê
tico para la CPU/el maestro.

inhibir/habilitar

inhibir

Diagn√≥stico DO (P√°gi‚Äê
na 1198)

El 2PULSE detecta un corto‚Äê Off/On
circuito en las salidas digita‚Äê
les si el "Diagn√≥stico DO" =
ON.

ON

Se√±ales de respuesta
Se√±ales de respuesta

Significado

Rango

Direcci√≥n
del canal 0

Direcci√≥n
del canal 1

ERR_PARA

Indica un error de parametriza‚Äê
ci√≥n.

0 = no hay error de parametriza‚Äê
ci√≥n

Byte 0:

Byte 4:

Bit 5

Bit 5

Byte 0:

Byte 4:

Bit 4

Bit 4

Byte 0:

Byte 4:

Bit 7

Bit 7

1 = error de parametrizaci√≥n
ERR_PULS

Indica un error de salida de impul‚Äê 0 = no hay error de salida de im‚Äê
sos.
pulsos
1 = error de salida de impulsos

ERR_24V

Indica un cortocircuito de la ali‚Äê
mentaci√≥n del sensor.

0 = no hay cortocircuito de la ali‚Äê
mentaci√≥n del sensor
1 = cortocircuito de la alimenta‚Äê
ci√≥n del sensor

ERR_DO

Indica un cortocircuito de la salida
digital DO.

0 = no hay cortocircuito de la sali‚Äê Byte 0:
da digital
Bit 6
1 = cortocircuito de la salida digital

Byte 4:
Bit 6

Conmutaci√≥n paralela de ambos canales (a partir de 6ES7138-4DD01-0AB0)
Definici√≥n
Para alcanzar una intensidad de salida m√°s alta, se pueden conectar en paralelo ambos
canales del 2PULSE. En ese caso se obtiene una intensidad asignada de 4 A. Esto permite
operar directamente en el 2PULSE actuadores con un consumo de corriente m√°s elevado.

Parametrizaci√≥n y manejo
La conexi√≥n en paralelo de los dos canales se activa al realizar la parametrizaci√≥n con las
casillas de verificaci√≥n "Conexi√≥n en paralelo canal 0 y 1 (P√°gina 1198)".
Tras efectuar esta activaci√≥n, el 2PULSE funciona como un m√≥dulo monocanal. Cualquier
parametrizaci√≥n o manejo que se lleve a cabo mediante la interfaz de control (P√°gina 1201)
debe efectuarse a trav√©s del canal 0. El canal 1 no se puede parametrizar ni manejar.
Asimismo, las se√±ales de respuesta (P√°gina 1204) s√≥lo se suministran para el canal 0.

1194

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Medici√≥n de intensidad
En la medici√≥n de intensidad se vuelve a calcular un valor medio con base en los valores
medidos en ambos canales. De esta manera resulta un rango de medida de hasta 4 A.
El valor medido de intensidad se suministra en la interfaz de respuesta como valor anal√≥gico
SIMATIC S7. En este caso, una intensidad de 4 A corresponde al valor anal√≥gico SIMATIC S7
27648.
En la conexi√≥n en paralelo, la precisi√≥n de la medici√≥n de intensidad asciende tambi√©n al 3 %
del rango de medida.

Asignaci√≥n de terminales para la conexi√≥n en paralelo
Para conectar en paralelo ambos canales del 2PULSE deben interconectarse los siguientes
terminales en el m√≥dulo de pines:
‚óè Terminal 3 y terminal 7
‚óè Terminal 4 y terminal 8
La carga (p. ej. un actuador) se conecta luego directamente a los terminales 3 y 4 o bien a los
terminales 7 y 8. La figura siguiente muestra un esquema de conexiones.
38/6(

6)

70(6\
38/6(









(6
''$%

',
9'&
0
'2

















',
9'&
0
'2

&RQH[L¬µQHQWUHORVWHUPLQDOHV

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1195

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Reacci√≥n a STOP de la CPU/del maestro
Definici√≥n
Puede parametrizar la reacci√≥n (P√°gina 1197) del 2PULSE en caso de fallo del controlador
principal conjuntamente para ambos canales.
Reacci√≥n a STOP de la CPU/del
maestro

Reacci√≥n espec√≠fica del canal y estado del 2PULSE

Desconectar DO

borrar la salida digital DO,
borrar STS_ENABLE y
cancelar la actual secuencia de salida.

Continuar el modo de operaci√≥n

la salida digital DO permanece inalterada,
STS_ENABLE permanece inalterado y
la actual secuencia de salida sigue funcionando.

Aplicar valor sustitutivo DO

emitir el valor sustitutivo parametrizado de la salida digital DO espec√≠fico del canal,
borrar STS_ENABLE y
cancelar la actual secuencia de salida.

Mantener el √∫ltimo valor DO

la salida digital DO permanece inalterada,
borrar STS_ENABLE y
cancelar la actual secuencia de salida.

Arranque
Para iniciar una nueva secuencia de salida despu√©s de un STOP de la CPU/del maestro y con
el bit ACK_SW_ENABLE activado, hay que borrar primero el bit SW_ENABLE. Repita este
borrado hasta que el bit ACK_SW_ENABLE tambi√©n se borre.
Si el modo de operaci√≥n seleccionado debe continuar al cambiar de STOP de la CPU/del
maestro a RUN (arranque), la CPU/el maestro no debe borrar las salidas. Soluci√≥n posible:
active el bit de control "Habilitaci√≥n software" (SW_ENABLE = 1) en aquella parte del programa
de usuario que se procesa durante el arranque.

Parametrizaci√≥n modificada
El estado adoptado por el 2PULSE en STOP de la CPU/del maestro se mantiene incluso en
caso de parametrizaci√≥n o configuraci√≥n de la estaci√≥n ET 200S. Esto ocurre, por ejemplo, al
conectarse la alimentaci√≥n de la CPU/del maestro o del IM 151 o al retornar la transmisi√≥n DP.
Pero en el estado "Continuar el modo de operaci√≥n" y tras cargar una parametrizaci√≥n o
configuraci√≥n modificada de la estaci√≥n ET 200S en la CPU/el maestro, el 2PULSE cancela el
proceso. Como resultado, el 2PULSE hace lo siguiente:
‚óè borra la salida digital DO
‚óè borra STS_ENABLE y
‚óè cancela la actual secuencia de salida.

1196

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

3.5.8.3

Configuraci√≥n y parametrizaci√≥n del 2PULSE

Par√°metros
Seleccionar modo de operaci√≥n
Modo de operaci√≥n
Seleccione el modo de operaci√≥n del 2PULSE en funci√≥n de sus necesidades:
‚óè 2 Pulse: 8 bytes de datos de salida: compatible con el m√≥dulo de versi√≥n anterior
La interfaz de control ocupa menos direcciones en la memoria imagen de proceso.
‚óè 2 Pulse interfaz de control ampl.: 12 bytes de datos de salida ‚Äì posibilidades de control
mejoradas
Las consignas se pueden introducir m√°s f√°cilmente.

Activar diagn√≥stico de grupo
Diagn√≥stico de grupo
El diagn√≥stico de grupo se activa en la casilla de verificaci√≥n correspondiente.
Si est√° habilitado el diagn√≥stico de grupo, el 2PULSE genera un aviso de diagn√≥stico para la
CPU o el maestro.

Seleccionar la reacci√≥n a STOP de la CPU/del maestro
Reacci√≥n a STOP de la CPU/del maestro
En la lista desplegable, seleccione el comportamiento deseado en caso de STOP de la CPU
o del maestro.
‚óè Desconectar DO
‚óè Modo de operaci√≥n Continuar
‚óè Aplicar valor sustitutivo DO
‚óè Mantener el √∫ltimo valor DO
Encontrar√° m√°s informaci√≥n sobre las reacciones y el estado del 2PULSE en ""Reacci√≥n a
STOP de la CPU o del maestro (P√°gina 1196)".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1197

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Activar conexi√≥n en paralelo del canal 0 y 1
Conexi√≥n en paralelo canal 0 y 1 (a partir de 6ES7138‚Äë4DD01‚Äë0AB0)
Si necesita una intensidad nominal mayor de 2 A en las salidas digitales, puede conmutar en
paralelo los dos canales del 2PULSE. Para ello active la casilla de verificaci√≥n "Conexi√≥n en
paralelo del canal 0 y 1".
Encontrar√° m√°s informaci√≥n en "Conexi√≥n en paralelo de los dos canales (a partir de
6ES7138-4DD01-0AB0) (P√°gina 1194)".

Canal n
Activar diagn√≥stico DO
Diagn√≥stico DO
Si activa la casilla de verificaci√≥n Diagn√≥stico DO, el 2PULSE detecta un cortocircuito en las
salidas digitales.

Seleccionar valor sustitutivo de DO
Valor sustitutivo DO
En la lista desplegable seleccione el valor sustitutivo deseado para la salida digital:
‚óè 0
‚óè 1
El par√°metro "Valor sustitutivo DO" s√≥lo puede tener un valor distinto de cero si el par√°metro
"Reacci√≥n a STOP de la CPU/maestro (P√°gina 1197)" est√° ajustado a "Aplicar valor sustitutivo
DO".

Seleccionar el modo de operaci√≥n
Modo de operaci√≥n
En la lista desplegable seleccione el modo de operaci√≥n deseado:
‚óè Salida de impulsos (P√°gina 1154)
‚óè Modulaci√≥n de ancho de impulsos (PWM) (P√°gina 1159)
‚óè Tren de impulsos (P√°gina 1169)
‚óè Retardo a la conexi√≥n/desconexi√≥n (P√°gina 1175)
‚óè Salida de frecuencia (P√°gina 1184) (a partir de 6ES7138‚Äë4DD01‚Äë0AB0)

1198

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Seleccionar formato de salida
Formato de salida
El formato de salida es relevante para los modos de operaci√≥n "Modulaci√≥n de ancho de
impulsos (PWM)" y "Salida de frecuencia" (a partir de 6ES7138‚Äë4DD01‚Äë0AB0).
‚óè En el modo de operaci√≥n "Modulaci√≥n de ancho de impulsos (PWM) (P√°gina 1159)" es
posible seleccionar el formato de salida en la lista desplegable:
‚Äì Por mil
‚Äì Salida anal√≥gica S7
‚óè En el modo de operaci√≥n "Salida de frecuencia (P√°gina 1184)" es posible seleccionar en la
lista desplegable el formato de salida:
‚Äì 1 Hz
‚Äì Salida anal√≥gica S7

Seleccionar base de tiempo
Base de tiempo
Seleccione a trav√©s de la base de tiempo la resoluci√≥n y el margen de valores de todos los
tiempos predefinidos:
‚óè 0,1 ms
Se pueden fijar tiempos desde 0,2 ms a 6,5535 s con una resoluci√≥n de 0,1 ms.
‚óè 1 ms
Se pueden fijar tiempos desde 1 ms a 65,535 s con una resoluci√≥n de 1 ms.

Seleccionar funci√≥n DI
Funci√≥n DI
La entrada digital DI se puede utilizar como entrada o como habilitaci√≥n hardware.
En la lista desplegable seleccione la funci√≥n deseada para la entrada digital:
‚óè Entrada
‚óè Habilitaci√≥n HW

Definir el retardo a la conexi√≥n
Retardo a la conexi√≥n
El retardo a la conexi√≥n es el tiempo que transcurre desde el inicio de la secuencia de salida
hasta la salida del impulso.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1199

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
Registre el retardo a la conexi√≥n deseado en el campo de entrada.
Rango de valores admisible: 0 ‚Ä¶ 65535

Definir duraci√≥n m√≠nima del impulso
Duraci√≥n m√≠nima del impulso
La duraci√≥n m√≠nima del impulso es relevante para los modos de operaci√≥n "Modulaci√≥n de
ancho de impulsos" (PWM)" (P√°gina 1159) y "Salida de frecuencia (P√°gina 1184)" (a partir de
6ES7138‚Äë4DD01‚Äë0AB0).
La duraci√≥n m√≠nima de impulso y la pausa m√≠nima entre impulsos se parametrizan con el
par√°metro "Duraci√≥n m√≠nima de impulso"; ambos tienen siempre el mismo valor.
Por ejemplo, introduzca aqu√≠ el tiempo de respuesta del elemento final de control conectado a
la salida digital DO.
Rango de valores admisible: 0 ‚Ä¶ 65535

Definir duraci√≥n del impulso
Duraci√≥n de impulso
La duraci√≥n de impulso es relevante para el modo de operaci√≥n "Tren de impulsos
(P√°gina 1169)".
Por ejemplo, introduzca aqu√≠ el tiempo de respuesta del actuador conectado a la salida digital
DO.
Rango de valores admisible:
‚óè con base de tiempo 1 ms: de 1 a 65535
‚óè con base de tiempo 0,1 ms: de 2 a 65535

Definir duraci√≥n del per√≠odo
Per√≠odo
La duraci√≥n del per√≠odo es relevante para los modos de operaci√≥n "Modulaci√≥n de ancho de
impulsos (PWM) (P√°gina 1159)" y "Tren de impulsos (P√°gina 1169)".
Al ajustar la duraci√≥n del per√≠odo, observe la duraci√≥n m√≠nima del impulso ajustada / la
duraci√≥n del impulso y el tiempo de respuesta del elemento final de control conectado a la
salida digital DO. La duraci√≥n del per√≠odo deber√≠a ser siempre un m√∫ltiplo del tiempo de
respuesta del elemento final de control conectado a la salida digital DO.
La duraci√≥n del per√≠odo se define como valor num√©rico en funci√≥n de la base de tiempo:
‚óè con base de tiempo 1 ms: de 1 a 65535
‚óè con base de tiempo 0,1 ms: de 2 a 65535

1200

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
Duraci√≥n de per√≠odo parametrizada = Base de tiempo x valor num√©rico predefinido

Interfaz de control y realimentaci√≥n del 2PULSE
Interfaz de control del 2PULSE
Nota
Para el 2PULSE, los datos siguientes de la interfaz de control son datos relacionados o, lo que
es lo mismo, coherentes:
‚óè Bytes 0 a 3
‚óè Bytes 4 a 7

Asignaci√≥n de la interfaz de control corta (8 bytes)
La siguiente tabla muestra la asignaci√≥n de la interfaz de control corta (salidas) del 2PULSE.
Direcci√≥n

Asignaci√≥n

Canal 0

Canal 1

Palabra 0

Palabra 4

seg√∫n el modo de operaci√≥n
‚óè Salida de impulsos: duraci√≥n del impulso
‚óè Modulaci√≥n de ancho de impulsos: valor de salida
‚óè Tren de impulsos: n√∫mero de impulsos
‚óè Retardo a la conexi√≥n/desconexi√≥n: retardo a la desconexi√≥n
‚óè Salida de frecuencia: Frecuencia de salida (a partir de 6ES7138‚Äë4DD01‚Äë0AB0)

Byte 2

Byte 6

Bit 7: reserva = 0
Bit 6: reserva = 0
Bit 5: reserva = 0
Bit 4: reserva = 0
Bit 3: reserva = 0
Bit 2: SET_DO
Bit 1: MANUAL_DO
Bit 0: SW_ENABLE

Byte 3

Byte 7

seg√∫n el modo de operaci√≥n
‚óè Salida de impulsos: factor de retardo a la conexi√≥n
‚óè Modulaci√≥n de ancho de impulsos: factor de per√≠odo
‚óè Tren de impulsos: factor de per√≠odo
‚óè Retardo a la conexi√≥n/desconexi√≥n: factor de retardo a la conexi√≥n
‚óè Salida de frecuencia: Factor de retardo a la conexi√≥n (a partir de
6ES7138‚Äë4DD01‚Äë0AB0)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1201

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

Asignaci√≥n de la interfaz de control larga (12 bytes) (a partir de 6ES7138‚Äë4DD01‚Äë0AB0)
La siguiente tabla muestra la asignaci√≥n de la interfaz de control larga (salidas) del 2PULSE.
Direcci√≥n

Asignaci√≥n

Canal 0

Canal 1

Palabra 0

Palabra 6

seg√∫n el modo de operaci√≥n
‚óè Salida de impulsos: duraci√≥n del impulso
‚óè Modulaci√≥n de ancho de impulsos: valor de salida
‚óè Tren de impulsos: n√∫mero de impulsos
‚óè Retardo a la conexi√≥n/desconexi√≥n: retardo a la desconexi√≥n
‚óè Salida de frecuencia: frecuencia de salida

Palabra 2

Palabra 8

seg√∫n el modo de operaci√≥n
‚óè Salida de impulsos: Retardo a la conexi√≥n
‚óè Modulaci√≥n de ancho de impulsos: Per√≠odo
‚óè Tren de impulsos: Per√≠odo
‚óè Retardo a la conexi√≥n/desconexi√≥n: Retardo a la conexi√≥n
‚óè Salida de frecuencia: Retardo a la conexi√≥n

Byte 4

Byte 10

Bit 7: reserva = 0
Bit 6: reserva = 0
Bit 5: reserva = 0
Bit 4: reserva = 0
Bit 3: reserva = 0
Bit 2: SET_DO
Bit 1: MANUAL_DO
Bit 0: SW_ENABLE

Byte 5

Byte 11

seg√∫n el modo de operaci√≥n
‚óè Salida de impulsos: no utilizado
‚óè Modulaci√≥n de ancho de impulsos: factor de retardo a la conexi√≥n
‚óè Tren de impulsos: relaci√≥n impulso-pausa
‚óè Retardo a la conexi√≥n/desconexi√≥n: no utilizado
‚óè Salida de frecuencia: no utilizado

Significado de las se√±ales de control
Se√±al de control

Significado

Modo de operaci√≥n "Salida de impulsos":
‚óè Duraci√≥n del impulso 1) 2)

Tiempo en que la salida digital DO est√° activada una vez transcurrido el
retardo a la conexi√≥n.

‚óè Factor de retardo a la conexi√≥n 1)

El retardo a la conexi√≥n parametrizado se puede modificar antes de que
comience la secuencia de salida:
Retardo a la conexi√≥n = factor √ó 0,1 √ó retardo a la conexi√≥n parametrizado

‚óè Retardo a la conexi√≥n 2)

Tiempo que transcurre desde el comienzo de la secuencia de salida hasta
la salida de la secuencia de impulsos.

Modo de operaci√≥n "Modulaci√≥n de ancho de impulsos":

1202

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
Se√±al de control
‚óè Valor de salida

Significado
Valor emitido con modulaci√≥n de ancho de impulsos en la salida digital DO
una vez transcurrido el retardo a la conexi√≥n.

1) 2)

‚óè Factor de per√≠odo 1)

El per√≠odo parametrizado se puede modificar:
Per√≠odo = factor √ó 0,1 √ó per√≠odo parametrizado

‚óè Per√≠odo 2)

Al ajustar el per√≠odo observe la duraci√≥n m√≠nima del impulso ajustada y el
tiempo de respuesta del elemento final de control conectado a la salida
digital DO.

‚óè Factor de retardo a la conexi√≥n 2)

El retardo a la conexi√≥n parametrizado se puede modificar antes de que
comience la secuencia de salida:
Retardo a la conexi√≥n = factor √ó 0,1 √ó retardo a la conexi√≥n parametrizado

Modo de operaci√≥n "Tren de impulsos":
‚óè N√∫mero de impulsos 1)

N√∫mero de impulsos que se emiten en la salida digital DO una vez trans‚Äê
currido el retardo a la conexi√≥n.

2)

‚óè Factor de per√≠odo 1)

El per√≠odo parametrizado se puede modificar antes de que comience la
secuencia de salida:
Per√≠odo = factor √ó 0,1 √ó per√≠odo parametrizado

‚óè Per√≠odo 2)

Al ajustar el per√≠odo observe la duraci√≥n m√≠nima del impulso ajustada y el
tiempo de respuesta del elemento final de control conectado a la salida
digital DO.

‚óè Relaci√≥n impulso-pausa

Es posible ajustar la relaci√≥n entre la duraci√≥n del impulso y la pausa entre
impulsos:
Relaci√≥n impulso-pausa = (consigna / 255) √ó per√≠odo

2)

Modo de operaci√≥n "Retardo a la conexi√≥n/desconexi√≥n":
‚óè Retardo a la desconexi√≥n 1)

2)

Tiempo que transcurre entre el flanco descendente de la entrada digital DI
y su salida a trav√©s de la salida digital DO.

‚óè Factor de retardo a la conexi√≥n 1)

El retardo a la conexi√≥n parametrizado se puede modificar antes de que
comience la secuencia de salida:
Retardo a la conexi√≥n = factor √ó 0,1 √ó retardo a la conexi√≥n parametrizado

‚óè Retardo a la conexi√≥n 2)

Tiempo que transcurre entre el flanco ascendente de la entrada digital DI
y su salida a trav√©s de la salida digital DO.

Modo de operaci√≥n "Salida de frecuencia" (a partir de 6ES7138‚Äë4DD01‚Äë0AB0):
‚óè Frecuencia de salida 1)

2)

Frecuencia que se emite en la salida digital DO una vez transcurrido el
retardo a la conexi√≥n.

‚óè Factor de retardo a la conexi√≥n 1)

El retardo a la conexi√≥n parametrizado se puede modificar antes de que
comience la secuencia de salida:
Retardo a la conexi√≥n = factor √ó 0,1 √ó retardo a la conexi√≥n parametrizado

‚óè Retardo a la conexi√≥n 2)

Tiempo que transcurre desde el comienzo de la secuencia de salida hasta
la salida de la frecuencia.

Control directo de la salida digital:
‚óè MANUAL_DO

El bit de control permite seleccionar y deseleccionar la funci√≥n "Control
directo de la salida digital DO".

‚óè SET_DO

El bit de control permite ajustar el estado de la salida digital DO.

Habilitaci√≥n de software
‚óè SW_ENABLE

1)

La habilitaci√≥n software debe activarse siempre en el programa de control.
Si no se utiliza una habilitaci√≥n HW, la secuencia de salida ser√° iniciada
por el flanco ascendente de la habilitaci√≥n de software. Si se desactiva la
habilitaci√≥n de software, la secuencia de salida actual se cancela.

en caso de utilizar la interfaz de control corta

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1203

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
2)

en caso de utilizar la interfaz de control larga

Interfaz de realimentaci√≥n del 2PULSE
Nota
Para el 2PULSE, los datos siguientes de la interfaz de realimentaci√≥n son datos relacionados,
es decir, coherentes:
‚óè Bytes 0 a 3
‚óè Bytes 4 a 7

Asignaci√≥n de la Interfaz de realimentaci√≥n
La siguiente tabla muestra la asignaci√≥n de la interfaz de realimentaci√≥n (entradas) del
2PULSE.
Direcci√≥n

Asignaci√≥n

Canal 0

Canal 1

Byte 0

Byte 4

Bit 7: ERR_24V
Bit 6: ERR_DO
Bit 5: ERR_PARA
Bit 4: ERR_PULS
Bit 3: ACK_SW_ENABLE
Bit 2: STS_DI
Bit 1: STS_DO
Bit 0: STS_ENABLE

Byte 1

Byte 5

Bit 0 ‚Ä¶ Bit 3: Contador de secuencias SEQ_CNT (a partir de 6ES7138‚Äë4DD01‚Äë0AB0)
Bit 4 ‚Ä¶ Bit 7: reserva = 0

Palabra 2

Palabra 6

Valor de medici√≥n de intensidad (a partir de 6ES7138‚Äë4DD01‚Äë0AB0)

Nota
Dependiendo del m√≥dulo de interfaz utilizado IM 151 y de la configuraci√≥n, en el caso de que
se produzca un fallo en el m√≥dulo, se devuelve 16#7FFF7FFF o 16#00000000 como valor de
realimentaci√≥n (valor sustitutivo).

Significado de las se√±ales de realimentaci√≥n
Se√±al de realimentaci√≥n

Significado

ACK_SW_ENABLE

Indica el estado pendiente de la habilitaci√≥n software en el m√≥dulo 2PULSE.

ERR_24V

Indica un cortocircuito o bien una ca√≠da de la alimentaci√≥n del sensor.

ERR_DO

Indica un cortocircuito en la salida digital.

ERR_PARA

Indica un error de parametrizaci√≥n.

1204

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)
Se√±al de realimentaci√≥n

Significado

ERR_PULS

Modo de operaci√≥n "Salida de impulsos":
Indica un error de salida de impulsos. Si una vez transcurrido el retardo a la conexi√≥n se acorta
la duraci√≥n de impulso de manera que el tiempo sea m√°s corto que el tiempo ya transcurrido,
el 2PULSE lo detectar√°.
Cuando comience la siguiente secuencia de salida el 2PULSE borrar√° el bit de realimentaci√≥n
ERR_PULS.
Modo de operaci√≥n "Tren de impulsos":
Indica un error de salida de impulsos. Si una vez transcurrido el retardo a la conexi√≥n se reduce
el n√∫mero de impulsos y si el n√∫mero de impulsos reducido ya se ha emitido, el 2PULSE lo
detectar√°.
Cuando comience la siguiente secuencia de salida, el 2PULSE borrar√° el bit de realimentaci√≥n
ERR_PULS.
Modo de operaci√≥n "Retardo a la conexi√≥n/desconexi√≥n":
Indica un error en la salida de impulsos cuando la duraci√≥n del impulso o la pausa entre
impulsos es demasiado corta.
El 2PULSE borra el bit de realimentaci√≥n ERR_PULS con el siguiente flanco ascendente de la
habilitaci√≥n software o con el siguiente flanco en la entrada digital DI.

STS_ DI

Indica el nivel de se√±al en la entrada digital DI.

STS_DO

Indica el nivel de se√±al en la salida digital DO.

STS_ENABLE

Modo de operaci√≥n "Salida de impulsos":
Se activa al comenzar la secuencia de salida hasta que termine la duraci√≥n de impulsos. Si se
desactiva la habilitaci√≥n software (SW_ENABLE) o si el 2PULSE detecta un error de salida de
impulsos ERR_PULS, entonces se borra STS_ENABLE.
Modo de operaci√≥n "Modulaci√≥n de ancho de impulsos" (PWM):
Se activa al comenzar la secuencia de salida. Si se borra la habilitaci√≥n software (SW_ENA‚Äê
BLE), STS_ENABLE tambi√©n se borra.
Modo de operaci√≥n "Tren de impulsos":
Se activa al comenzar la secuencia de salida hasta la salida del √∫ltimo impulso. Si se desactiva
la habilitaci√≥n software (SW_ENABLE) o si el 2PULSE detecta un error de salida de impulsos
ERR_PULS, entonces se borra STS_ENABLE.
Modo de operaci√≥n "Retardo a la conexi√≥n/desconexi√≥n":
Se√±aliza que el 2PULSE ha detectado la habilitaci√≥n software (SW_ENABLE) e indica el
estado de la misma.
Modo de operaci√≥n "Salida de frecuencia" (a partir de 6ES7138‚Äë4DD01‚Äë0AB0):
se activa al comenzar la secuencia de salida. Si se borra la habilitaci√≥n software (SW_ENA‚Äê
BLE), STS_ENABLE tambi√©n se borra.

SEQ_CNT (a partir de
6ES7138‚Äë4DD01‚Äë0AB0)

Cuenta las secuencias de salida finalizadas en los modos de operaci√≥n "Salida de impulsos",
"Tren de impulsos" y "Retardo a la conexi√≥n/desconexi√≥n".
Sin funci√≥n en los modos "Modulaci√≥n de ancho de impulsos" y "Salida de frecuencia".

Valor de medici√≥n de inten‚Äê
sidad (a partir de
6ES7138‚Äë4DD01‚Äë0AB0)

Intensidad en la DO como valor anal√≥gico SIMATIC S7

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1205

Regulaci√≥n PID
3.5 Regulaci√≥n PID (S7-300, S7-400)

3.5.8.4

Diagn√≥stico del 2PULSE

Diagn√≥stico con indicadores LED
Indicador LED del 2PULSE

6)

‚ë†
‚ë°
‚ë¢

1





2





3

Error de grupo (rojo)
Indicador de estado de la entrada digital (verde)
Indicador de estado de la salida digital (verde)

Indicadores de estado y error mediante los LEDs del 2PULSE
La siguiente tabla muestra los indicadores de estado y error del 2PULSE.
Evento (LED)
SF

1

5

4

Causa

Soluci√≥n

No hay parametrizaci√≥n. Hay un aviso
de diagn√≥stico.

Compruebe los bits de error en la in‚Äê
terfaz de realimentaci√≥n. Eval√∫e el
aviso de diagn√≥stico.

8

O
N
O
N

Entrada DI0 activada en el canal 0.
O
N

Entrada DI1 activada en el canal 1.
O
N

Salida DO0 activada en el canal 0.
O
N

Salida DO1 activada en el canal 1.

Tipos de error
En el manual de producto del m√≥dulo de interfaz utilizado en la estaci√≥n ET 200S encontrar√°
informaci√≥n sobre la estructura del diagn√≥stico de canal.

1206

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.6 Funciones auxiliares

Tipos de error del 2PULSE
La tabla siguiente muestra los tipos de error del 2PULSE.

1D

Tipo de error

Significado

00001:
cortocircuito

Cortocircuito de la alimentaci√≥n del en‚Äê
c√≥der o actuador.
Una ca√≠da de la tensi√≥n de alimentaci√≥n
de 24 V tambi√©n puede ocasionar este
aviso de error.

9D

01001:
Error

16D

M√≥dulo no parametrizado.
10000:
Error de parametri‚Äê
zaci√≥n

Soluci√≥n
Compruebe el cableado de los
interruptores y actuadores. Co‚Äê
rregir el cableado del proceso.

Ha aparecido un error interno en el m√≥‚Äê Sustituir el m√≥dulo.
dulo.
Corregir la parametrizaci√≥n.

Tambi√©n es posible obtener una evaluaci√≥n de errores simplificada en la interfaz de
realimentaci√≥n (P√°gina 1204) a trav√©s de los bits correspondientes.

3.6

Funciones auxiliares

3.6.1

Polyline

Polyline
La instrucci√≥n Polyline ofrece una funci√≥n con la caracter√≠stica de la l√≠nea poligonal con cuyos
nodos puede linealizarse, p. ej., el comportamiento de sensores no lineales.
La instrucci√≥n Polyline puede utilizarse con la CPU S7-1500 a partir de la versi√≥n de firmware
2.0 y con la CPU S7-1200 a partir de la versi√≥n de firmware 4.2.

M√°s informaci√≥n
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1207

Regulaci√≥n PID
3.6 Funciones auxiliares

3.6.2

SplitRange

SplitRange
La instrucci√≥n SplitRange divide el rango de valores de salida del regulador PID en varios
subrangos. Dichos subrangos permiten regular un proceso influido por varios actuadores.
La instrucci√≥n SplitRange puede utilizarse con la CPU S7-1500 a partir de la versi√≥n de
firmware 2.0 y con la CPU S7-1200 a partir de la versi√≥n de firmware 4.2.

M√°s informaci√≥n
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT

3.6.3

RampFunction

RampFunction
La instrucci√≥n RampFunction limita la velocidad de cambio de una se√±al. Un salto de se√±al en
la entrada se emite como funci√≥n de rampa del valor de salida, con el fin de conseguir una
respuesta de regulaci√≥n m√°s suave sin influir en la respuesta a perturbaciones, por ejemplo.
La instrucci√≥n RampFunction puede utilizarse con la CPU S7-1500 a partir de la versi√≥n de
firmware 2.0 y con la CPU S7-1200 a partir de la versi√≥n de firmware 4.2.

M√°s informaci√≥n
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT

1208

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Regulaci√≥n PID
3.6 Funciones auxiliares

3.6.4

Filter_PT1

Filter_PT1
La instrucci√≥n Filter_PT1 es un elemento de transferencia proporcional con un retardo de
primer orden. Filter_PT1 se puede utilizar como filtro paso bajo, elemento de retardo o bloque
de simulaci√≥n de proceso.
La instrucci√≥n Filter_PT1 puede utilizarse con la CPU S7-1500 a partir de la versi√≥n de
firmware 2.0 y con la CPU S7-1200 a partir de la versi√≥n de firmware 4.2.

M√°s informaci√≥n
Descripci√≥n Filter_PT1
Modo de operaci√≥n Filter_PT1
Par√°metros de entrada Filter_PT1
Par√°metros de salida Filter_PT1
Variables est√°ticas Filter_PT1
Par√°metro ErrorBits

3.6.5

Filter_PT2

Filter_PT1
La instrucci√≥n Filter_PT2 es un elemento de transferencia proporcional con un retardo de
segundo orden. Filter_PT2 se puede utilizar como filtro paso bajo, elemento de retardo o
bloque de simulaci√≥n de proceso.
La instrucci√≥n Filter_PT2 puede utilizarse con la CPU S7-1500 a partir de la versi√≥n de
firmware 2.0 y con la CPU S7-1200 a partir de la versi√≥n de firmware 4.2.

M√°s informaci√≥n
Descripci√≥n Filter_PT2
Modo de operaci√≥n Filter_PT2
Par√°metros de entrada Filter_PT2
Par√°metros de salida Filter_PT2
Variables est√°ticas Filter_PT2
Par√°metro ErrorBits

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1209

Regulaci√≥n PID
3.6 Funciones auxiliares

3.6.6

Filter_DT1

Filter_PT1
La instrucci√≥n Filter_DT1 es un elemento diferenciador con un retardo de primer orden.
Filter_DT1 se puede utilizar como filtro paso alto, elemento diferenciador o control anticipativo.
La instrucci√≥n Filter_DT1 puede utilizarse con la CPU S7-1500 a partir de la versi√≥n de
firmware 2.0 y con la CPU S7-1200 a partir de la versi√≥n de firmware 4.2.

M√°s informaci√≥n
Descripci√≥n Filter_DT1
Modo de operaci√≥n Filter_DT1
Par√°metros de entrada Filter_DT1
Par√°metros de salida Filter_DT1
Variables est√°ticas Filter_DT2
Par√°metro ErrorBits

1210

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Time-based IO
4.1

High precision input/output with Time-based IO

4.1.1

Principios b√°sicos de Time-based IO

4.1.1.1

Uso de Time-based IO

4

Muchos procesos de una instalaci√≥n requieren una reproducibilidad lo m√°s precisa posible en
t√©rminos de tiempo. La reproducibilidad se puede optimizar hasta cierto punto con tiempos de
ciclo m√°s cortos de la CPU. La utilizaci√≥n de In-/Output de alta precisi√≥n con Time-based IO
permite una reproducibilidad m√°s precisa que la que se alcanza con la optimizaci√≥n del tiempo
de ciclo de la CPU. Otra ventaja de Time-based IO es que el ciclo de aplicaci√≥n no depende de
la base de tiempo.
A continuaci√≥n encontrar√° una selecci√≥n de √°mbitos de aplicaci√≥n t√≠picos que pueden
beneficiarse de esta tecnolog√≠a.

Tiempos de reacci√≥n definidos
A√±adiendo un tiempo predefinido a la etiqueta de fecha/hora de un flanco en la entrada digital
se puede emitir una se√±al de salida que reacciona con un tiempo de retardo preciso
independientemente del ciclo de aplicaci√≥n.

Medici√≥n de longitud
Mediante la diferencia de dos etiquetas de fecha/hora de entrada y una velocidad de transporte
asociada se puede determinar la longitud de un producto.

Leva electr√≥nica
A partir de una informaci√≥n de posici√≥n capturada de forma is√≥crona (p. ej., de un m√≥dulo de
contador o un eje) se puede extrapolar la posterior evoluci√≥n del movimiento. Bas√°ndose en
esto se calcula la fecha y hora de una posici√≥n de conmutaci√≥n (posici√≥n de levas) y se
transfiere al m√≥dulo TIO (datos). De este modo se produce el evento de conmutaci√≥n
exactamente en la posici√≥n deseada.

Dosificaci√≥n
Si se especifica un flanco de conexi√≥n y un flanco de desconexi√≥n en una salida digital
controlada por tiempo se puede abrir una v√°lvula durante un tiempo determinado y dosificarse
la cantidad de l√≠quido correspondiente.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1211

Time-based IO
4.1 High precision input/output with Time-based IO

4.1.1.2

Comportamiento en el tiempo de Time-based IO

Comportamiento en el tiempo de la tecnolog√≠a est√°ndar
El comportamiento en el tiempo de las entradas/salidas en la tecnolog√≠a est√°ndar depende de
los siguientes factores:
‚óè Programa de CPU (estructura del programa)
‚óè Tiempos de ciclo de bus (bus de campo, bus de fondo)
‚óè Tiempo de ciclo de los m√≥dulos E/S
‚óè Tiempo de ciclo interno de los sensores/actuadores
Una informaci√≥n determinista sobre
‚óè cu√°ndo se ha producido un evento de entrada (p. ej., se√±al de sensor);
‚óè cu√°ndo un evento de entrada resulta efectivo el evento de salida (p. ej. la salida conmuta);
es inexacta por los factores de tiempo antes mencionados.

3URJUDPDGHXVXDULR
&386
'HWHFFL¬µQGHVH¬≥DOHV
3URFHVDPLHQWRGHVH¬≥DOHV
6DOLGDGHVH¬≥DOHV
3URJUDPDGH&38 HVWUXFWXUDGHOSURJUDPD
7LHPSRVGHFLFORGHEXV EXVGHFDPSREXVGHIRQGR
7LHPSRGHFLFORGHORVP¬µGXORV(6
7LHPSRGHFLFORLQWHUQRGHORVVHQVRUHVDFWXDGRUHV

7LHPSR
WaPV

WaPV
7LHPSRGHUHDFFL¬µQGHVHDGRPV
6DOLGDDFWLYD

(QWUDGDGHWHFWDGD

Caracter√≠sticas de Time-based IO
Funcionalidad E/S controlada por tiempo
Time-based IO est√° disponible para un procesamiento de se√±ales E/S basado en el tiempo.
As√≠ pues, todas las se√±ales de entrada se refieren a una hora (TIO_Time). Las se√±ales de
entrada reciben la etiqueta de fecha/hora t1. Tras el procesamiento de se√±ales el evento de
salida tambi√©n se puede enlazar con el TIO_Time y devolverse a la hora deseada. La salida se
realiza a la hora t2.
A continuaci√≥n se muestra un ejemplo para Time-based IO:

1212

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO
3URJUDPDGHXVXDULR
&386
'HWHFFL¬µQGHVH¬≥DOHV HWLTXHWDGHIHFKDKRUDW
3URFHVDPLHQWRGHVH¬≥DOHV
6DOLGDGHVH¬≥DOHV HWLTXHWDGHIHFKDKRUDW

7,2B7LPH
WwV

WwV
7LHPSRGHUHDFFL¬µQGHVHDGRwV

(QWUDGDGHWHFWDGD

6DOLGDDFWLYD

Independencia y enfoque del Time-based IO
La base de Time-based IO es la base de tiempo com√∫n (TIO_Time) de todos los componentes
que intervienen. Utilizando TIO_Time en Time-based IO la precisi√≥n de la salida es
independiente de los siguientes elementos:
‚óè Programa de CPU (estructura del programa)
‚óè Tiempos de ciclo de bus (bus de campo, bus de fondo)
‚óè Tiempo de ciclo de los m√≥dulos E/S
El enfoque de Time-based IO no reside en el tiempo de reacci√≥n de E/S sino en la previsibilidad
(determinismo) de las se√±ales E/S. Con Time-based IO es posible reaccionar a una se√±al de
entrada en un tiempo definido con una se√±al de salida. Utilizando Time-based IO se debe tener
en cuenta el tiempo de reacci√≥n m√≠nimo que depende del sistema.
Time-based IO significa:
‚óè Funcionalidades E/S de alta precisi√≥n ejecutadas
‚óè Procesos E/S controlados por tiempo

Precisiones
Para la capacidad funcional de Time-based IO la precisi√≥n es crucial.
La precisi√≥n es una caracter√≠stica de los m√≥dulos TIO e indica con qu√© nivel de desviaci√≥n se
logra la reacci√≥n que se debe alcanzar. Con Time-based IO la precisi√≥n y la reproducibilidad
de la reacci√≥n son del orden de microsegundos.

Tiempo de reacci√≥n
Dependiendo de la configuraci√≥n, adem√°s de una alta precisi√≥n se obtiene un tiempo de
reacci√≥n m√≠nimo a un evento de entrada.
El tiempo de reacci√≥n es el intervalo desde el evento de entrada hasta el evento de salida
deseado.
Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1213

Time-based IO
4.1 High precision input/output with Time-based IO
Para el tiempo de reacci√≥n m√≠nimo rige lo siguiente:
3 √ó ciclo de aplicaci√≥n TAPP

4.1.1.3

Entorno del sistema

Introducci√≥n
A continuaci√≥n se muestran las posibles configuraciones del sistema con PROFINET para el
uso de Time-based IO.

Aplicaci√≥n con STEP 7 (TIA Portal)
STEP 7 (TIA Portal)
SIMATIC S7-PCT

Industrial Ethernet

Sistema de automatizaci√≥n:
S7-1500

PROFINET IO IRT
ET 200SP con
IM 155-6 PN HF y
TM Timer DIDQ 10x24V

Sensores/actuadores de 24 V, p. ej.,
enc√≥ders increm. o gen. impulsos

4.1.1.4

ET 200MP con
IM 155-5 PN HF y
TM Timer DIDQ 16x24V

Sensores/actuadores de 24 V, p. ej.,
enc√≥ders increm. o gen. impulsos

Requisitos de hardware

Introducci√≥n
A continuaci√≥n se determinan las caracter√≠sticas de componentes de hardware necesarias
para Time-based IO. Adem√°s, se dan ejemplos con m√≥dulos concretos.

1214

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO

Requisitos
Componente

Caracter√≠sticas

Ejemplos

CPU

Modo is√≥crono/PROFINET IO IRT: ‚óè CPU 1511-1 PN
permite tiempos de reacci√≥n defini‚Äê
dos y mucha precisi√≥n en el com‚Äê
portamiento de la instalaci√≥n.

M√≥dulo de interfaz
ET 200

Soporta modo is√≥crono

‚óè ET 200SP con
IM 155-6 PN HF (a partir del firmware
V2.1)
‚óè ET 200MP con
IM 155-5 PN HF

M√≥dulo E/S

M√≥dulo TIO

‚óè ET 200SP:
TM Timer DIDQ 10x24V
‚óè ET 200MP:
TM Timer DIDQ 16x24V (versi√≥n
m√≠nima de firmware V1.0.1)

4.1.1.5

Requisitos de software de configuraci√≥n

Introducci√≥n
A continuaci√≥n se muestra un listado de las versiones de software que soportan la funci√≥n
"Time-based IO".

Requisitos
Software de configura‚Äê Requisitos
ci√≥n

Componentes de hardware sopor‚Äê M√°s informaci√≥n
tados

STEP 7 (TIA Portal) a
partir de V16

‚óè Sistema de automatizaci√≥n
S7‚Äë1500

PROFINET IO IRT
o modo is√≥crono
en el bus de fondo

‚óè Sistemas de periferia
descentralizada ET 200SP y
ET 200MP

Ayuda en pantalla
de STEP 7 (TIA
Portal)

‚óè TM Timer DIDQ 16x24V
‚óè TM Timer DIDQ 10x24V

Para m√°s informaci√≥n sobre el modo is√≥crono, consulte los manuales Modo is√≥crono (https://
support.industry.siemens.com/cs/ww/es/view/109755401) y PROFINET con STEP 7 (http://
support.automation.siemens.com/WW/view/es/49948856).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1215

Time-based IO
4.1 High precision input/output with Time-based IO

Instrucciones de TIO
Las instrucciones de TIO son bloques de funci√≥n espec√≠ficos para el uso de Time-based IO.
Para ello se dispone de las siguientes instrucciones de TIO:
‚óè TIO_SYNC
‚óè TIO_DI
‚óè TIO_DI_ONCE
‚óè TIO_DQ

4.1.1.6

Implantaci√≥n t√©cnica

Introducci√≥n
A continuaci√≥n, podr√° familiarizarse con los aspectos esenciales de Time-based IO y ver con
qu√© funciones de SIMATIC se realizan los aspectos descritos.

Sincronizaci√≥n de los m√≥dulos que intervienen (base de tiempo com√∫n)
La tecnolog√≠a Time-based IO utiliza el modo is√≥crono para todos los dispositivos que
intervienen.
El modo is√≥crono permite sincronizar varios m√≥dulos TIO con una base de tiempo com√∫n. El
principio b√°sico de la base de tiempo com√∫n para los m√≥dulos TIO es el tiempo relativo
TIO_Time.
Para m√°s informaci√≥n sobre el modo is√≥crono, consulte los manuales Modo is√≥crono (https://
support.industry.siemens.com/cs/ww/es/view/109755401) y PROFINET con STEP 7 (http://
support.automation.siemens.com/WW/view/es/49948856).

TIO_Time
El TIO_Time es la base de tiempo central de la que se obtienen todas las etiquetas de fecha/
hora.
El TIO_Time tiene las siguientes caracter√≠sticas:
‚óè Base de tiempo com√∫n para todos los m√≥dulos TIO que se sincronizan a trav√©s de las
instrucciones de TIO TIO_SYNC.
‚óè Cada vez que arranca la CPU se empieza a contar el tiempo de nuevo.
‚óè El TIO_Time es del tipo de datos LTime (p. ej., LT#14s830ms652us315ns).

1216

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO
‚óè Todas las etiquetas de fecha/hora v√°lidas se refieren al TIO_Time:
‚Äì La etiqueta de fecha/hora de entrada de los m√≥dulos TIO se convierte a TIO_Time en las
instrucciones de TIO TIO_DI y TIO_DI_ONCE.
‚Äì Las etiquetas de fecha/hora de salida se convierten a etiquetas de fecha/hora de salida
de los m√≥dulos TIO en la instrucci√≥n de TIO TIO_DQ.
‚óè El valor de TIO_TIME se corresponde con la fecha y hora actuales respecto a las
instrucciones de TIO y se actualiza al llamar TIO_SYNC. Si se desea que una salida no
haga referencia a una etiqueta de fecha/hora de entrada anterior, sino a la fecha y hora
actuales, se puede utilizar el valor de TIO_TIME como base para la etiqueta de fecha/hora
de salida. Ejemplo: salida de un flanco en 20 ms:
TIO_DQ.TimeStampRE=TIO_SYNC_DATA.TIO_TIME+LT#20ms)

Instrucciones de TIO en el OB is√≥crono
Las instrucciones de TIO deben llamarse en un OB del tipo "Synchronous Cycle" o "MCPostServo".
Para m√°s informaci√≥n al respecto, consulte el cap√≠tulo Programaci√≥n.
Nota
Las instrucciones de TIO tambi√©n soportan el modo is√≥crono reducido. En una reducci√≥n de
ciclo, el ciclo de aplicaci√≥n es mayor que el ciclo de emisi√≥n.
Nota
Las instrucciones de TIO no deben llamarse en un OB de tipo "MC-PreServo".
Si utiliza un OB de tipo "MC-PostServo", podr√° decidir por separado para cada m√≥dulo TIO si
se utiliza o bien con objetos tecnol√≥gicos de Motion Control o bien con instrucciones de TIO.
Si llama las instrucciones de TIO en un OB de tipo "MC-PostServo", deber√° utilizar el modelo
EVA y, adem√°s, no podr√° utilizar reducciones de ciclo.
Llamar las instrucciones de TIO en un OB de tipo "MC-PostServo" con "MC-Servo" con
reducci√≥n de ciclo puede provocar un c√°lculo incorrecto de la etiqueta de fecha/hora.

Modos para la actualizaci√≥n de la memoria imagen de proceso
En modo is√≥crono, se puede influir en el orden de actualizaci√≥n de la memoria imagen parcial
de proceso de los datos de entrada y de salida. Para ello, se pueden seleccionar los siguientes
modelos de ejecuci√≥n del programa:
‚óè Modelo EVA (factor de ciclo de aplicaci√≥n = 1)
‚óè Modelo AEV (factor de ciclo de aplicaci√≥n >= 1)
Las abreviaturas E, V, A corresponden a los siguientes procesos: E = Eingabe (entrada), V=
Verarbeitung (procesamiento), A = Ausgabe (salida).
Para m√°s informaci√≥n sobre el factor de ciclo de aplicaci√≥n, consulte el manual PROFINET con
STEP 7 (http://support.automation.siemens.com/WW/view/es/49948856).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1217

Time-based IO
4.1 High precision input/output with Time-based IO

Modelo EVA (factor de ciclo de aplicaci√≥n = 1)
El programa de usuario se inicia tras el tiempo de retardo. Actualice primero en el programa de
usuario, llamando la instrucci√≥n del sistema SYNC_PI, la correspondiente memoria imagen
parcial del proceso de las entradas. A continuaci√≥n empieza el procesamiento (p. ej. el c√°lculo
de la etiqueta de fecha/hora). Al final del programa de usuario se actualiza la correspondiente
memoria imagen parcial del proceso de las salidas en la CPU mediante SYNC_PO.
6HQG&ORFN

6HQG&ORFN

6HQG&ORFN

6HQG&ORFN

2% 6\QF

2% 6\QF

7$33
&38 2%6\QF

2% 6\QF

(

9

$

352),1(7
,2'HYLFH

7,

72

7,

7UDQVPLVL¬µQGHODVHQWUDGDVVDOLGDV
7LHPSRGHUHWDUGR
6HQG&ORFN

72

7$33 &LFORGHDSOLFDFL¬µQ
6<1&B3,

6<1&B32

7LHPSRGHFLFORGHHPLVL¬µQ

7,

7LHPSRSDUDOHHUORVGDWRVGHHQWUDGD

72

7LHPSRKDVWDODHPLVL¬µQGHORVGDWRVGHVDOLGD
0RPHQWRGHODOHFWXUDGHORVGDWRVGHHQWUDGD
0RPHQWRGHODHPLVL¬µQGHORVGDWRVGHVDOLGD

2% 6\QF 2%GHWLSR6\QFKURQRXV&\FOH0&3UH6HUYRR0&3RVW6HUYR

Caracter√≠sticas del modelo EVA:
‚óè Permite tiempos de reacci√≥n cortos
‚óè El ciclo de aplicaci√≥n no puede ser mayor que el tiempo de ciclo de emisi√≥n.
De este modo hay menos tiempo disponible para la aplicaci√≥n que con el modelo AEV.

1218

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO

Modelo AEV (factor de ciclo de aplicaci√≥n >= 1)
El programa de usuario se inicia tras el tiempo de retardo. En el modo PIP_Mode 0, la
instrucci√≥n TIO_SYNC se encarga de la actualizaci√≥n la memoria imagen de proceso. En los
otros modos, actualice primero la correspondiente memoria imagen parcial del proceso de las
salidas en el programa de usuario, llamando la instrucci√≥n del sistema SYNC_PO. As√≠, los
datos de salida que se han calculado en el anterior ciclo de red se activan durante el siguiente
ciclo de red (TO). A continuaci√≥n se actualiza la correspondiente memoria imagen parcial del
proceso de las entradas en la CPU mediante SYNC_PI. Una vez transferidos los datos
empieza el procesamiento (p. ej. el c√°lculo de las etiquetas de fecha/hora).
6HQG&ORFN

6HQG&ORFN

6HQG&ORFN

6HQG&ORFN

7$33
$(

&38 2% 6\QF

9

$(

9

352),1(7
,2'HYLFH

7,

72

7,

72

7,

7UDQVPLVL¬µQGHODVHQWUDGDVVDOLGDV
7LHPSRGHUHWDUGR
6HQG&ORFN

72

7,

72

7$33 &LFORGHDSOLFDFL¬µQ
6<1&B3,

6<1&B32

7LHPSRGHFLFORGHHPLVL¬µQ

7,

7LHPSRSDUDOHHUORVGDWRVGHHQWUDGD

72

7LHPSRKDVWDODHPLVL¬µQGHORVGDWRVGHVDOLGD
0RPHQWRGHODOHFWXUDGHORVGDWRVGHHQWUDGD
0RPHQWRGHODHPLVL¬µQGHORVGDWRVGHVDOLGD

2% 6\QF 2%GHWLSR6\QFKURQRXV&\FOH0&3UH6HUYRR0&3RVW6HUYR

Caracter√≠sticas del modelo AEV:
‚óè El tiempo de reacci√≥n es mayor que con el modelo EVA.
‚óè Se permite un ciclo de aplicaci√≥n mayor que el tiempo de ciclo de emisi√≥n.
De este modo hay m√°s tiempo disponible para la aplicaci√≥n que con el modelo EVA.

Influencia de la precisi√≥n
Para evaluar la precisi√≥n se necesitan las precisiones de
‚óè M√≥dulo TIO
‚óè Sensor/actuador
En las hojas de datos del m√≥dulo correspondiente puede consultar el valor de la precisi√≥n.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1219

Time-based IO
4.1 High precision input/output with Time-based IO
Se deben sumar los distintos Jitter de los m√≥dulos TIO y los sensores/actores. El resto de
factores de influencia pueden despreciarse.

4.1.2

Configurar y parametrizar

4.1.2.1

Requisitos

Introducci√≥n
Para utilizar Time-based IO se necesitan componentes de software adicionales. Adem√°s, tiene
que haber creado la configuraci√≥n est√°ndar para su proyecto.
A continuaci√≥n conocer√° la configuraci√≥n est√°ndar para Time-based IO.

Requisitos
En STEP 7 (TIA Portal):
‚óè Se ha creado el proyecto.
‚óè Se ha creado y parametrizado la CPU.
‚óè Se han creado y parametrizado el sistema de automatizaci√≥n y los m√≥dulos.
‚óè Si se utiliza una estaci√≥n ET 200: Se ha creado y parametrizado la conexi√≥n a trav√©s de
PROFINET.
‚óè Se ha creado un OB del tipo "Synchronous Cycle" o "MC-PostServo".

Consulte tambi√©n
Entorno del sistema (P√°gina 1214)
Requisitos de software de configuraci√≥n (P√°gina 1215)

1220

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO

4.1.2.2

Ajustes de Time-based IO
A continuaci√≥n se describe brevemente qu√© ajustes deben realizarse y para qu√© componentes
para Time-based IO.

Tabla 4-1

Resumen de los ajustes de Time-based IO

Componente

D√≥nde se configura1

Propiedades que deben configu‚Äê M√°s informaci√≥n
rarse

Si se utiliza una es‚Äê Propiedades de subred PROFI‚Äê Crear el dominio Sync o editar
taci√≥n ET 200:
NET > dominio Sync
las propiedades del dominio
subred PROFINET
Sync
Definir el dispositivo del dominio
Sync:
‚óè Definir la CPU como maestro
Sync.

‚óè Manual de funciones
PROFINET (http://
support.automation.siemens.
com/WW/view/es/49948856)
‚óè Ayuda en pantalla en el
sistema de informaci√≥n de
STEP 7 (TIA Portal)

‚óè ET 200 Definir el m√≥dulo de
interfaz como esclavo Sync
con clase RT "IRT"
Estaci√≥n S7-1500
Estaci√≥n ET 200
M√≥dulo TIO

Propiedades de la interfaz
PROFINET > modo is√≥crono

Activaci√≥n del modo is√≥crono

Propiedades del m√≥dulo TIO >
Direcciones E/S

Activaci√≥n del modo is√≥crono

Propiedades del m√≥dulo TIO >
Direcciones E/S
Propiedades del m√≥dulo TIO >
Direcciones E/S
Propiedades del m√≥dulo TIO >
Par√°metros b√°sicos
Propiedades del m√≥dulo TIO >
Par√°metros b√°sicos/Par√°me‚Äê
tros de canal

‚óè Manual de funciones
PROFINET (http://
support.automation.siemens.
com/WW/view/es/49948856)
Asignaci√≥n de las direcciones E/
S a la memoria imagen parcial
‚óè Manual de producto M√≥dulo
del proceso (p. ej., IPP1)
tecnol√≥gico
TM Timer DIDQ 16x24V
Parametrizar "Utilizaci√≥n de m√≥‚Äê
dulos del programa de usuario"
(http://
support.automation.siemens.
Para TM Timer DIDQ 10x24V:
com/WW/view/es/95153313)
Si es necesario, parametrizar la
configuraci√≥n "Utilizar entrada/
‚óè Manual de producto M√≥dulo
salida individualmente"
tecnol√≥gico
Asignar o crear un OB del tipo
"Synchronous Cycle" o "MCPostServo"

Parametrizar el uso de Timer-DI
y Timer-DQ
OB is√≥crono
(Synchronous
Cycle o MC-Post‚Äê
Servo)

Propiedades del OB is√≥crono >
Modo is√≥crono

‚óè Manual de funciones Modo
is√≥crono (https://
support.industry.siemens.com
/cs/ww/es/view/109755401)

En caso necesario, adaptar el ci‚Äê
clo de aplicaci√≥n

TM Timer DIDQ 10x24V
(http://
support.automation.siemens.
com/WW/view/es/95153951)

‚óè Ayuda en pantalla en el
sistema de informaci√≥n de
STEP 7 (TIA Portal)
1

Describe el tema del software de configuraci√≥n.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1221

Time-based IO
4.1 High precision input/output with Time-based IO

Ajuste de Time-based IO
Siempre que no tenga requisitos especiales en cuanto al tiempo de reacci√≥n, el siguiente
ajuste resulta id√≥neo para empezar:
‚óè Tiempo de ciclo de emisi√≥n: 2 ms
‚óè Ciclo de aplicaci√≥n: 4 ms
‚óè Asignaci√≥n a la memoria imagen parcial del proceso: IPP1
‚óè PIP_Mode: 0 (modelo AEV)

Preguntas frecuentes (FAQ)
Para m√°s informaci√≥n al respecto, consulte las siguientes preguntas frecuentes (FAQ) en el
Siemens Industry Online Support:
‚óè ID de art√≠culo 109738186 (https://support.industry.siemens.com/cs/ww/es/view/
109738186)
‚óè ID de art√≠culo 109736374 (https://support.industry.siemens.com/cs/ww/es/view/
109736374)

4.1.3

Programaci√≥n

4.1.3.1

Resumen de las instrucciones

Introducci√≥n
Time-based IO se utiliza con instrucciones especiales (instrucciones de TIO). La instrucci√≥n de
TIO TIO_SYNC se encarga de la sincronizaci√≥n de todos los m√≥dulos TIO que intervienen y
genera una base de tiempo un√≠voca (TIO_Time) a la que se referencian todas las acciones.
Otras instrucciones adoptan la lectura de se√±ales de entrada de procesos con la
correspondiente etiqueta de fecha/hora o la emisi√≥n de se√±ales de salida de procesos
controlada por tiempo.
Nota
Las instrucciones de TIO son √∫tiles para aplicaciones Time-based IO generales. Para
aplicaciones especiales, como, p. ej., una leva electr√≥nica, existen adem√°s objetos
tecnol√≥gicos independientes, p. ej., TO_CamOutput.
Nota
Las instrucciones de TIO utilizan las funciones de etiqueta de fecha/hora de los m√≥dulos TIO.
Las dem√°s funciones de los m√≥dulos TIO pueden utilizarse en cualquier aplicaci√≥n,
independientemente de las instrucciones de TIO.

1222

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO

Instrucciones de TIO
Instrucci√≥n

Descripci√≥n abreviada

TIO_SYNC

Sincroniza los m√≥dulos TIO y determina la base de tiempo para Timebased IO.

TIO_DI

Captura los flancos en la entrada digital (Timer-DI) y suministra la co‚Äê
rrespondiente etiqueta de fecha/hora.

TIO_DI_ONCE

‚óè Captura una vez los flancos en la entrada digital (Timer-DI) y
suministra la correspondiente etiqueta de fecha/hora.
‚óè Controla un canal Timer-DI configurado como habilitaci√≥n controlada
por flancos para otro canal.

TIO_DQ

4.1.3.2

Emite flancos de forma controlada por tiempo en la salida digital (TimerDQ).

Programaci√≥n de Time-based IO

Introducci√≥n
Para utilizar Time-based IO, las instrucciones de TIO deben llamarse en un OB is√≥crono. La
aplicaci√≥n tambi√©n se puede ejecutar en otro OB. De este modo se puede acortar el tiempo de
ejecuci√≥n del OB is√≥crono.
En funci√≥n de la tarea deseada se necesitan las siguientes instrucciones de TIO:
M√≥dulo TIO

Instrucciones de TIO

‚óè TM Timer DIDQ 16x24V

‚óè Un TIO_DI o TIO_DI_ONCE por entrada digital para la lectura

‚óè TM Timer DIDQ 10x24V

‚óè Un TIO_DQ por salida digital para la salida
‚óè Un TIO_SYNC (para hasta ocho m√≥dulos TIO)

A continuaci√≥n se describe la programaci√≥n de la CPU para Time-based IO.

Requisitos
Configuraci√≥n hardware en STEP 7 (TIA Portal):
‚óè Los m√≥dulos TIO est√°n asignados a una red is√≥crona.
‚óè Los m√≥dulos TIO est√°n asignados a una memoria imagen parcial de proceso com√∫n.
‚óè La memoria imagen parcial de proceso est√° asignada a un OB is√≥crono.
‚óè Los m√≥dulos TIO est√°n parametrizados para utilizarlos con instrucciones de la librer√≠a
"Time-based IO".
Encontrar√° m√°s informaci√≥n para la configuraci√≥n de Time-based IO en el cap√≠tulo Ajustes de
Time-based IO (P√°gina 1221).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1223

Time-based IO
4.1 High precision input/output with Time-based IO

Procedimiento
1. Cree una instrucci√≥n de TIO TIO_SYNC en el OB is√≥crono.
2. Interconecte en la instrucci√≥n de TIO TIO_SYNC mediante los par√°metros HWID_1 a
HWID_8 todos los m√≥dulos TIO que se deban sincronizar.
El HWID figura en la configuraci√≥n hardware, en "Propiedades > Constantes de sistema".
Nota
Al realizar la interconexi√≥n, como norma general, utilice preferentemente constantes
simb√≥licas en lugar de valores num√©ricos absolutos.
3. Defina en TIO_SYNC, en el par√°metro de entrada PIP_Mode, el modo de actualizaci√≥n de
datos.
Encontrar√° la descripci√≥n de los modos en el cap√≠tulo Implantaci√≥n t√©cnica (P√°gina 1216).
La instrucci√≥n de TIO TIO_SYNC est√° completamente parametrizada.

1224

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO

0RGR

4. En las siguientes instrucciones tenga en cuenta el orden de llamada en funci√≥n del valor
seleccionado para PIP_Mode:
3,30RGH
SRUGHIHFWR 
0RGR$(9

3,30RGH
0RGR$(9

3,30RGH
0RGR(9$







7,2B6<1&
/ODPDGD 
6<1&B32
6<1&B3,





2UGHQGHOODPDGD

7,2B
2WUDV
LQVWUXFFLRQHV
GH7,2
HQFXDOTXLHU
VHFXHQFLD\
RWUDVSDUWHV
GHOSURJUDPD

6)&
6<1&B3,

6)&
6<1&B32



6)&
6<1&B3,



7,2B6<1&

7,2B6<1&
DSOLFDODDFWXDOL]DFL¬µQ
GHODPHPRULD
LPDJHQGHSURFHVR

1RWD(Q3,30RGH
ODVLQGLFDFLRQHV
6<1&B32\6<1&B3,
GHOSURJUDPDGH
XVXDULR\DQRVH
OODPDQ


7,2B

7,2B6<1&

2WUDV
LQVWUXFFLRQHV
GH7,2
HQFXDOTXLHU
VHFXHQFLD\
RWUDVSDUWHV
GHOSURJUDPD



1RWD(QHO
3,30RGHQRVH
SXHGHUHDOL]DUQLQJ¬ºQ
IDFWRUGHFLFORGHOFLFOR
GHDSOLFDFL¬µQ

7,2B
2WUDV
LQVWUXFFLRQHV
GH7,2
HQFXDOTXLHU
VHFXHQFLD\
RWUDVSDUWHV
GHOSURJUDPD


6)&
6<1&B32

5. Inserte las instrucciones de TIO necesarias para la lectura/salida en el OB is√≥crono para su
aplicaci√≥n.
6. Interconecte cada entrada/salida TIO_SYNC_Data con la salida de TIO_SYNC del mismo
nombre en las instrucciones de TIO para lectura/salida.
7. Parametrice los par√°metros de entrada HWID (ver "Propiedades > Constantes de sistema"
en la configuraci√≥n hardware) y Channel en las instrucciones de TIO para lectura/salida.
La funcionalidad Time-based IO est√° completamente programada.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1225

Time-based IO
4.1 High precision input/output with Time-based IO
8. Interconecte la funcionalidad Time-based IO con su aplicaci√≥n, p. ej., evaluaci√≥n de las
etiquetas de fecha/hora le√≠das en una cadena secuencial en otro OB.
9. Si TIO_SYNC no lee autom√°ticamente el tiempo de ciclo de emisi√≥n: defina el tiempo de
ciclo de emisi√≥n manualmente, p. ej., en el OB100.
10.Compile y cargue todo el proyecto en la CPU.

Resultado
Ha terminado la programaci√≥n para utilizar Time-based IO.

Preguntas frecuentes (FAQ)
Para m√°s informaci√≥n al respecto, consulte las siguientes preguntas frecuentes (FAQ) en el
Siemens Industry Online Support:
‚óè ID de art√≠culo 109738186 (https://support.industry.siemens.com/cs/ww/es/view/
109738186)
‚óè ID de art√≠culo 109736374 (https://support.industry.siemens.com/cs/ww/es/view/
109736374)

4.1.4

Utilizaci√≥n del m√≥dulo tecnol√≥gico

4.1.4.1

Configuraci√≥n y parametrizaci√≥n del TIO-Modul

Agregar un m√≥dulo tecnol√≥gico a la configuraci√≥n de hardware
Requisitos
‚óè Se ha creado el proyecto.
‚óè Se ha creado la CPU.
‚óè Se ha creado la periferia descentralizada ET 200.

Procedimiento
1. Abra la configuraci√≥n de equipo de la CPU o el IM.
2. Seleccione un rack.
3. Seleccione el m√≥dulo tecnol√≥gico en el cat√°logo de m√≥dulos:
"M√≥dulos tecnol√≥gicos > Time‚Äëbased IO > M√≥dulo tecnol√≥gico > Referencia"
4. Coloque el m√≥dulo tecnol√≥gico arrastr√°ndolo al slot deseado del rack y solt√°ndolo.

1226

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO

Resultado
En el √°rbol del proyecto, el nuevo m√≥dulo tecnol√≥gico se muestra en "M√≥dulos locales" o
"Periferia descentralizada".

Apertura de la Configuraci√≥n hardware (HWCN)
Apertura mediante el √°rbol del proyecto
Proceda de la siguiente manera:
1. Abra la carpeta "M√≥dulos locales" o "Periferia descentralizada" en el √°rbol del proyecto.
2. Haga doble clic en el m√≥dulo tecnol√≥gico del √°rbol del proyecto.

Apertura mediante la vista de dispositivos
Proceda de la siguiente manera:
1. Abra la configuraci√≥n del equipo de la CPU o el IM.
2. Seleccione la vista de dispositivos.
3. Haga clic en el m√≥dulo tecnol√≥gico.

Par√°metros b√°sicos
Configuraci√≥n de canal (TM Timer DIDQ 16x24V)
Con la Configuraci√≥n de canal se determina la combinaci√≥n de entradas y salidas digitales que
se quieren utilizar para TM Timer DIDQ 16x24V.
Puede escoger entre las siguientes configuraciones:
‚óè 0 entradas, 16 salidas (predeterminado)
‚óè 3 entradas, 13 salidas
‚óè 4 entradas, 12 salidas
‚óè 8 entradas, 8 salidas
Nota
Las salidas no utilizadas est√°n disponibles como alimentaci√≥n de sensores.
Las entradas no utilizas est√°n disponibles como entradas digitales sin funci√≥n tecnol√≥gica. El
retardo a la entrada de una entrada se define junto con los par√°metros del canal de salida
correspondiente.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1227

Time-based IO
4.1 High precision input/output with Time-based IO

Periodo PWM
Con este par√°metro se determina la duraci√≥n del periodo de las se√±ales en las salidas digitales
con el Modo de operaci√≥n "PWM".
Puede escoger entre las siguientes duraciones de periodo:
‚óè 10 ms (predeterminado)
‚óè 5 ms
‚óè 2 ms
‚óè 1 ms
‚óè 0,5 ms
‚óè 0,2 ms
Nota
La relaci√≥n entre impulso y periodo se especifica en la interfaz de control. La relaci√≥n entre
impulso y periodo es un valor porcentual y se eval√∫a con una precisi√≥n del 3 % aprox.

Reacci√≥n a STOP de la CPU
Con este par√°metro se define la reacci√≥n del m√≥dulo tecnol√≥gico en caso de STOP de la CPU.
Puede escoger entre las siguientes opciones:
Reacci√≥n a STOP de la CPU

Significado

Aplicar valor sustitutivo
(predeterminado)

Hasta la siguiente transici√≥n de STOP a RUN de la CPU, el m√≥dulo
tecnol√≥gico emite en las salidas digitales los valores de sustituci√≥n
parametrizados.
Despu√©s de una transici√≥n de STOP a RUN, el m√≥dulo tecnol√≥gico
pasa a su estado de arranque: Si utiliza contador, los valores de
contaje se ponen a 0 y las salidas digitales conmutan seg√∫n la pa‚Äê
rametrizaci√≥n y las consignas.

Mantener √∫ltimo valor

Hasta la siguiente transici√≥n de STOP a RUN de la CPU, el m√≥dulo
tecnol√≥gico emite en las salidas digitales los valores que eran v√°li‚Äê
dos en el momento de la transici√≥n a STOP. Si la modulaci√≥n del
ancho de impulsos est√° parametrizada, se emitir√° la √∫ltima duraci√≥n
de periodo v√°lida con la √∫ltima relaci√≥n impulso/pausa v√°lida hasta
la siguiente transici√≥n de STOP a RUN.
Despu√©s de una transici√≥n de STOP a RUN, el m√≥dulo tecnol√≥gico
pasa a su estado de arranque: Si utiliza contador, los valores de
contaje se ponen a 0 y las salidas digitales conmutan seg√∫n la pa‚Äê
rametrizaci√≥n y las consignas.

Habilitar alarmas de diagn√≥stico
El m√≥dulo tecnol√≥gico dispara alarmas de diagn√≥stico si se producen determinados errores.
Puede disparar alarmas de diagn√≥stico adicionales si se activa la habilitaci√≥n de las alarmas
de diagn√≥stico. Las alarmas de diagn√≥stico se procesan en un OB de alarma.

1228

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO
Con este par√°metro se determina si el m√≥dulo tecnol√≥gico dispara las alarmas de diagn√≥stico
adicionales al aparecer el correspondiente error.
Inf√≥rmese con el manual de producto del m√≥dulo tecnol√≥gico sobre los errores que pueden
disparar una alarma de diagn√≥stico durante el funcionamiento. Las alarmas de diagn√≥stico no
est√°n habilitadas de forma predeterminada.

Utilizaci√≥n de m√≥dulos del programa de usuario
Con este par√°metro se determina si el m√≥dulo se utiliza con objetos tecnol√≥gicos de
Motion Control o con instrucciones de la librer√≠a "Time-based IO‚Äú (Instrucciones > Tecnolog√≠a).

Par√°metros de canal
Sinopsis
En los Par√°metros de canal las entradas y salidas digitales se dividen en grupos con
par√°metros espec√≠ficos de grupo.
Cada grupo es de uno de los siguientes tipos:
‚óè Grupo DQ (P√°gina 1229)
‚óè Grupo DQ/DI (P√°gina 1231)
‚óè Grupo DI (P√°gina 1236)
Los tipos de grupo disponibles para un TM Timer DIDQ 16x24V dependen de la Configuraci√≥n
de canal de los Par√°metros de grupo.

Grupo DQ
Puede ajustar los par√°metros siguientes para las respectivas salidas digitales de un grupo DQ:

Modo de operaci√≥n
Con este par√°metro se define la funci√≥n tecnol√≥gica de la correspondiente salida digital.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1229

Time-based IO
4.1 High precision input/output with Time-based IO
Puede escoger entre las siguientes opciones:
Modo de operaci√≥n

Significado

Timer-DQ
(predeterminado)

El m√≥dulo tecnol√≥gico emite flancos en la correspondiente salida digital
en momentos definidos.
Este ajuste utiliza Time‚Äëbased IO y requiere un modo is√≥crono.
Si se usa el sistema de control SIMOTION, utilice este ajuste para una
aplicaci√≥n de levas.

Oversampling

La correspondiente salida digital emite consecutivamente 32 estados
equidistantes en el tiempo por ciclo de aplicaci√≥n (p. ej., OB61). Los 32
estados se indican a trav√©s de la interfaz de control.
Este ajuste requiere un modo is√≥crono.

PWM

El m√≥dulo tecnol√≥gico conmuta la salida digital correspondiente con la
duraci√≥n de periodo especificada en Par√°metros b√°sicos y la relaci√≥n
entre impulso y periodo de la interfaz de control.
La relaci√≥n entre impulso y periodo es un valor porcentual y se eval√∫a
con una precisi√≥n del 3 % aprox.

Valor sustitutivo
Con este par√°metro se define el valor que debe emitir el m√≥dulo tecnol√≥gico en caso de STOP
de la CPU en la salida digital correspondiente para la reacci√≥n "Aplicar valor sustitutivo".
El ajuste predeterminado es "0".

Salida High Speed (0,1 A)
Con este par√°metro se determina si la correspondiente salida digital es de tipo push-pull r√°pido
o de tipo PNP (en fuente).
Puede escoger entre las siguientes opciones:
Opci√≥n

Significado

Activado
(predeterminado)

La salida digital es de tipo push-pull r√°pido y soporta una intensidad
nominal de carga de 0,1 A. Una salida de tipo push-pull conmuta alter‚Äê
nativamente a DC 24 V y masa. Esto permite flancos muy r√°pidos.

Desactivado

La salida digital es de tipo PNP (en fuente), con una tensi√≥n de 24 V
relativa a M, y soporta una intensidad nominal de carga de 0,5 A.

Invertir DI/DQ (TM Timer DIDQ 16x24V)
Las se√±ales de 24 V de la salida digital y de la entrada digital correspondiente se pueden
invertir conjuntamente para adaptarlas al proceso.
En el ajuste predeterminado, estas dos se√±ales no se invierten.

Invertir DQ
La se√±al de 24 V de la salida digital se puede invertir para adaptarla al proceso.
En el ajuste predeterminado, la se√±al no se invierte.

1230

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO

Retardo a la entrada
Con la parametrizaci√≥n del retardo a la entrada se suprimen perturbaciones acopladas en la
entrada digital disponible como entrada sin funci√≥n tecnol√≥gica. Las se√±ales con una duraci√≥n
de impulso inferior al retardo a la entrada parametrizado se suprimen.
Se puede escoger entre los siguientes retardos a la entrada:
‚óè Ninguno
(retardo a la entrada de 4 Œºs, ancho m√≠nimo de impulso de 3 Œºs)
‚óè 0,05 ms
‚óè 0,1 ms (predeterminado)
‚óè 0,4 ms
‚óè 0,8 ms
Nota
Si selecciona la opci√≥n "Ninguno" o "0,05 ms", debe utilizar cables apantallados para la
conexi√≥n de las entradas digitales. Para aumentar la precisi√≥n de la funci√≥n de sello de tiempo
se recomienda utilizar cables apantallados tambi√©n para retardos a la entrada superiores.
Nota
El retardo a la entrada est√° sujeto a una tolerancia indicada en los datos t√©cnicos del manual
de producto del m√≥dulo tecnol√≥gico en cuesti√≥n.

Grupo DQ/DI
Un grupo DQ/DI consta de una salida digital y de una o dos entradas digitales. Puede ajustar
los siguientes par√°metros para el grupo:

Configuraci√≥n grupo DQ/DI
Con este par√°metro se determina si DI se utiliza como Entrada de habilitaci√≥n para la DQ.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1231

Time-based IO
4.1 High precision input/output with Time-based IO
Puede escoger entre las siguientes opciones:
Opci√≥n

Significado

Timer-DQ con entrada de ha‚Äê El m√≥dulo tecnol√≥gico emite flancos controlados
bilitaci√≥n
por tiempo en la DQ. La DQ se habilita mediante la
DI. El Modo de operaci√≥n de DQ es "Timer-DQ" y
(predeterminado)
no se puede modificar.

Otros par√°metros espec√≠ficos de la op‚Äê
ci√≥n
Valor sustitutivo
Salida High Speed (0,1 A)
Invertir DI/DQ (TM Ti‚Äê
mer DIDQ 16x24V)

Este ajuste utiliza Time‚Äëbased IO y requiere un mo‚Äê
Invertir DQ (TM Timer DIDQ 10x24V)
do is√≥crono.
Retardo a la entrada
Si se usa el sistema de control SIMOTION, utilice
Habilitaci√≥n HW
este ajuste para una aplicaci√≥n de levas.
Utilizar entrada/salida indivi‚Äê
dualmente

La DQ y la DI se parametrizan y se utilizan con in‚Äê
dependencia entre s√≠.

Modo de operaci√≥n (DQ):
Valor sustitutivo
Salida High Speed (0,1 A)
Invertir DI/DQ (TM Ti‚Äê
mer DIDQ 16x24V)
Invertir DQ (TM Timer DIDQ 10x24V)
Modo de operaci√≥n (DI):
Retardo a la entrada
Invertir DI

Configuraci√≥n grupo DQ/DI (DQ2/DI2/DI3 de TM Timer DIDQ 10x24V)
Con este par√°metro se define c√≥mo se utilizan DQ2, DI2 y DI3 de TM Timer DIDQ 10x24V.
Puede escoger entre las siguientes opciones:
Opci√≥n

Significado

Otros par√°metros espec√≠ficos de la op‚Äê
ci√≥n

Enc√≥der incremental (A, B
desfasado)
(predeterminado)

DQ2 se utiliza individualmente.

Modo de operaci√≥n (DQ):

En DI2 y DI3 hay conectado un enc√≥der incremen‚Äê Valor sustitutivo
tal con las se√±ales desfasadas de 24 V A y B. El
Salida High Speed (0,1 A)
contador (DI2) eval√∫a siempre cuatro veces las dos
Invertir DQ
se√±ales.
Invertir sentido de contaje

Timer-DI2 con entrada de ha‚Äê Se registran etiquetas de fecha/hora para determi‚Äê Modo de operaci√≥n (DQ):
bilitaci√≥n DI3
nados flancos de DI2. DI2 se habilita mediante DI3. Valor sustitutivo
El modo de operaci√≥n de DI2 es "Timer-DI" y no
Salida High Speed (0,1 A)
puede modificarse.
Invertir DQ
Este ajuste utiliza Time‚Äëbased IO y requiere un mo‚Äê
Retardo a la entrada
do is√≥crono.
Si se usa el sistema de control SIMOTION, utilice Invertir DI
este ajuste para una aplicaci√≥n de palpador.
Habilitaci√≥n HW

1232

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO
Opci√≥n

Significado

Otros par√°metros espec√≠ficos de la op‚Äê
ci√≥n

Timer-DQ2 con entrada de
habilitaci√≥n DI2

El m√≥dulo tecnol√≥gico emite flancos controlados
por tiempo en DQ2. DQ2 es habilitada por DI2. El
Modo de operaci√≥n de DQ2 es "Timer-DQ" y no se
puede modificar.

Valor sustitutivo

La DQ y la DI se parametrizan y se utilizan con in‚Äê
dependencia entre s√≠.

Modo de operaci√≥n (DQ):

Salida High Speed (0,1 A)
Invertir DQ

Retardo a la entrada
Este ajuste utiliza Time‚Äëbased IO y requiere un mo‚Äê
Habilitaci√≥n HW
do is√≥crono.
Si se usa el sistema de control SIMOTION, utilice Modo de operaci√≥n (DI):
este ajuste para una aplicaci√≥n de levas.
Invertir DI
Utilizar entrada/salida indivi‚Äê
dualmente

Valor sustitutivo
Salida High Speed (0,1 A)
Invertir DQ
Modo de operaci√≥n (DI):
Retardo a la entrada
Invertir DI

Modo de operaci√≥n (DQ):
Con este par√°metro se define la funci√≥n tecnol√≥gica de la salida digital.
Puede escoger entre las siguientes opciones:
Modo de operaci√≥n

Significado

Timer-DQ
(predeterminado)

Este ajuste utiliza Time‚Äëbased IO y requiere un modo is√≥crono.

El m√≥dulo tecnol√≥gico emite flancos en la DQ en momentos definidos.
Si se usa el sistema de control SIMOTION, utilice este ajuste para una
aplicaci√≥n de levas.

Oversampling

El m√≥dulo tecnol√≥gico devuelve en DQ por cada ciclo de aplicaci√≥n (p.
ej. OB61) 32 estados consecutivos con una distancia temporal homo‚Äê
g√©nea. Los 32 estados se indican a trav√©s de la interfaz de control.
Este ajuste requiere un modo is√≥crono.

PWM

El m√≥dulo tecnol√≥gico conmuta la DQ con la duraci√≥n de periodo es‚Äê
pecificada en Par√°metros b√°sicos y la relaci√≥n entre impulso y periodo
de la interfaz de control.
La relaci√≥n entre impulso y periodo es un valor porcentual y se eval√∫a
con una precisi√≥n del 3 % aprox.

Valor sustitutivo
Con este par√°metro se define el valor que debe emitir el m√≥dulo tecnol√≥gico en caso de STOP
de la CPU en la DQ para la reacci√≥n "Aplicar valor sustitutivo".
El ajuste predeterminado es "0".

Salida High Speed (0,1 A)
Con este par√°metro se determina si la DQ es de tipo push-pull r√°pido o de tipo PNP (en fuente).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1233

Time-based IO
4.1 High precision input/output with Time-based IO
Puede escoger entre las siguientes opciones:
Opci√≥n

Significado

Activado
(predeterminado)

La DQ es de tipo push-pull r√°pido y soporta una intensidad nominal de
carga de 0,1 A. Una salida de tipo push-pull conmuta alternativamente a
DC 24 V y masa. Esto permite flancos muy r√°pidos.

Desactivado

La DQ es de tipo PNP (en fuente) con una tensi√≥n de 24 V relativa a M
y puede funcionar con una intensidad nominal de carga de 0,5 A.

Invertir DI/DQ (TM Timer DIDQ 16x24V)
Las se√±ales de 24 V de la DQ y de la DI correspondiente se pueden invertir conjuntamente para
adaptarlas al proceso.
En el ajuste predeterminado, estas se√±ales no se invierten.

Invertir DQ (TM Timer DIDQ 10x24V)
La se√±al de 24 V de la DQ se puede invertir para adaptarla al proceso.
En el ajuste predeterminado, la se√±al no se invierte.

Retardo a la entrada
Con este par√°metro se suprimen las interferencias de se√±al en las entradas digitales. Los
cambios de se√±al solo se capturan si permanecen estables durante m√°s tiempo que el retardo
a la entrada parametrizado.
Puede escoger entre los siguientes Retardos a la entrada:
‚óè Ninguno
(Retardo a la entrada de 4 Œºs, ancho de impulso m√≠nimo de 3 Œºs)
‚óè 0,05 ms
‚óè 0,1 ms (predeterminado)
‚óè 0,4 ms
‚óè 0,8 ms
El Retardo a la entrada tiene el efecto siguiente sobre la funci√≥n ajustada en la entrada digital
para la evaluaci√≥n de se√±ales:
Funci√≥n

Influencia del Retardo a la entrada

Timer-DI

La etiqueta de fecha/hora registrada se ha desplazado en el valor del Retardo a la
entrada.

Enc√≥der incremental (A, B desfasa‚Äê Se devuelve el valor de contaje que era v√°lido en el momento Ti menos el Retardo a la
entrada.
do)
Contador
Oversampling

1234

Los estados registrados se han desplazado conjuntamente en el valor del Retardo a la
entrada.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO

Nota
Si selecciona la opci√≥n "Ninguno" o "0,05 ms", debe utilizar cables apantallados para la
conexi√≥n de las entradas digitales. Para aumentar la precisi√≥n de la funci√≥n de etiqueta de
fecha/hora, se recomienda el uso de cables apantallados tambi√©n para Retardos a la entrada
mayores.
Nota
El Retardo a la entrada est√° sujeto a una tolerancia que se encuentra en los datos t√©cnicos del
manual de producto del m√≥dulo tecnol√≥gico.

Habilitaci√≥n HW
Con este par√°metro se determina si Timer-DQ se habilitar√° en la DI a trav√©s del nivel o de los
flancos.
Puede escoger entre las siguientes opciones:
Habilitaci√≥n

Significado

Otros par√°metros espec√≠fi‚Äê
cos de la opci√≥n

Controlado por nivel
(predeterminado)

La DQ se habilita mediante el nivel de la DI.

Selecci√≥n de nivel para ha‚Äê
bilitaci√≥n HW

Controlado por flanco

Este ajuste se puede utilizar si se emplea el
sistema de control SIMOTION .

‚Äî

La figura siguiente muestra un ejemplo de emisi√≥n de flancos ascendentes y descendentes en
la DQ0 al habilitarse la DI0 por el nivel alto de la DI1:
',

'4

5

)

5

)

R

Momento predefinido de un flanco DQ0- ascendente

F

Momento predefinido de un flanco DQ0- descendente

5

)

Selecci√≥n de nivel para habilitaci√≥n HW
Con este par√°metro se define el nivel para una Habilitaci√≥n HW controlada por nivel, para el
cual la DQ est√° habilitada.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1235

Time-based IO
4.1 High precision input/output with Time-based IO
Puede escoger entre las siguientes opciones:
Nivel

Significado

Activo con nivel alto
(predeterminado)

La DQ est√° habilitada si la DI est√° activada.

Activo con nivel bajo

La DQ est√° habilitada si la DI no est√° activada.

Modo de operaci√≥n (DI):
Con este par√°metro se define la funci√≥n tecnol√≥gica de DIm+1.
Puede escoger entre las siguientes opciones:
Modo de operaci√≥n

Significado

Contador

En la DI hay conectado un enc√≥der de impulsos o un sensor. El contador
cuenta los flancos ascendentes o descendentes de la DI.
En el manual de producto del m√≥dulo tecnol√≥gico puede consultar qu√©
entradas digitales se pueden utilizar como contadores.

Timer-DI
(predeterminado)

Para flancos definidos en la DI se leen las correspondientes etiquetas de
fecha/hora.
Este ajuste utiliza Time‚Äëbased IO y requiere un modo is√≥crono.
Si se usa el sistema de control SIMOTION, utilice este ajuste para una
aplicaci√≥n de palpador.

Oversampling

El m√≥dulo tecnol√≥gico lee el estado de la DI por ciclo de aplicaci√≥n (p. ej.,
OB61) en 32 instantes equidistantes. Los 32 estados se devuelven con‚Äê
juntamente.
Este ajuste requiere un modo is√≥crono.

Invertir DI
La se√±al de 24 V de la DI se puede invertir para adaptarla al proceso.
En el ajuste predeterminado, la se√±al no se invierte.

Grupo DI
Un grupo DI consta de dos entradas digitales contiguas DIm y DIm+1. Puede ajustar los
siguientes par√°metros para el grupo:

Configuraci√≥n de grupo DI
Con este par√°metro se define c√≥mo se utiliza el grupo.

1236

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO
Puede escoger entre las siguientes opciones:
Opci√≥n

Significado

Otros par√°metros espec√≠fi‚Äê
cos de la opci√≥n

Enc√≥der incremental (A, B
desfasado)
(predeterminado)

En las dos entradas digitales hay conectado un enc√≥der in‚Äê Invertir sentido de contaje
cremental con las se√±ales desfasadas de 24 V A y B. El
contador del grupo DI eval√∫a siempre cuatro veces las dos
se√±ales.

Retardo a la entrada
Timer-DI con entrada de habi‚Äê Se registran etiquetas de fecha/hora para determinados
litaci√≥n
flancos de DIm. DIm se habilita mediante DIm+1. El modo Inversi√≥n
de operaci√≥n de DIm es "Timer-DI" y no puede modificarse.
Habilitaci√≥n HW
Este ajuste utiliza Time‚Äëbased IO y requiere un modo is√≥‚Äê
crono.
Si se usa el sistema de control SIMOTION, utilice este ajuste
para una aplicaci√≥n de palpador.
Utilizar entradas individual‚Äê
mente

Las dos entradas digitales se parametrizan y se utilizan con
independencia entre s√≠.

Modo de operaci√≥n
Retardo a la entrada

Invertir sentido de contaje
Es posible invertir el sentido de contaje para adaptarlo al proceso. El m√≥dulo tecnol√≥gico
invierte la se√±al B del enc√≥der incremental en DIm+1. El correspondiente Contador interpreta
entonces los flancos de las dos se√±ales como impulsos hacia atr√°s.
La siguiente figura muestra un ejemplo de impulsos de contaje en sentido ascendente y
descendente:
6H¬≥DO$
6H¬≥DO%
,PSXOVRVGH
FRQWDMH
DGHODQWH
,PSXOVRVGH
FRQWDMH
DWU¬£V

DGHODQWH

DWU¬£V

En el ajuste predeterminado, el sentido de contaje no se invierte.

Retardo a la entrada
Con este par√°metro se suprimen las interferencias de se√±al en las entradas digitales. Los
cambios de se√±al solo se capturan si permanecen estables durante m√°s tiempo que el retardo
a la entrada parametrizado.
Puede escoger entre los siguientes Retardos a la entrada:
‚óè Ninguno
(Retardo a la entrada de 4 Œºs, ancho de impulso m√≠nimo de 3 Œºs)
‚óè 0,05 ms
‚óè 0,1 ms (predeterminado)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1237

Time-based IO
4.1 High precision input/output with Time-based IO
‚óè 0,4 ms
‚óè 0,8 ms
El Retardo a la entrada tiene el efecto siguiente sobre la funci√≥n ajustada en la entrada digital
para la evaluaci√≥n de se√±ales:
Funci√≥n

Influencia del Retardo a la entrada

Timer-DI

La etiqueta de fecha/hora registrada se ha desplazado en el valor del Retardo a la
entrada.

Enc√≥der incremental (A, B desfasa‚Äê Se devuelve el valor de contaje que era v√°lido en el momento Ti menos el Retardo a la
entrada.
do)
Contador
Oversampling

Los estados registrados se han desplazado conjuntamente en el valor del Retardo a la
entrada.

Nota
Si selecciona la opci√≥n "Ninguno" o "0,05 ms", debe utilizar cables apantallados para la
conexi√≥n de las entradas digitales. Para aumentar la precisi√≥n de la funci√≥n de etiqueta de
fecha/hora, se recomienda el uso de cables apantallados tambi√©n para Retardos a la entrada
mayores.
Nota
El Retardo a la entrada est√° sujeto a una tolerancia que se encuentra en los datos t√©cnicos del
manual de producto del m√≥dulo tecnol√≥gico.

Inversi√≥n
La se√±al de 24 V de la DIm se puede invertir para adaptarla al proceso.
En el ajuste predeterminado, la se√±al no se invierte.

Habilitaci√≥n HW
Con este par√°metro se determina si Timer-DI se habilitar√° en la
DIm+1 a trav√©s del nivel o los flancos.
Puede escoger entre las siguientes opciones:
Habilitaci√≥n

Significado

Otros par√°metros espe‚Äê
c√≠ficos de la opci√≥n

Controlado por nivel
(predeterminado)

La DIm se habillita mediante el nivel de DIm+1.

Selecci√≥n de nivel para
habilitaci√≥n HW

Controlado por flanco

Este ajuste se puede utilizar si se emplea el siste‚Äê ‚Äî
ma de control SIMOTION .

La figura siguiente muestra un ejemplo del registro de etiquetas de fecha/hora para flancos
ascendentes y descendentes al habilitarse la DI0 debido al nivel alto de la DI1:

1238

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Time-based IO
4.1 High precision input/output with Time-based IO
',

',

5

)

)

5

)

5

R

Registro de la correspondiente etiqueta de fecha/hora para flanco DI0- ascendente

F

Detecci√≥n de la etiqueta de fecha/hora correspondiente para flanco DI0 descendente

Selecci√≥n de nivel para habilitaci√≥n HW
Con este par√°metro se define el nivel para una Habilitaci√≥n HW controlada por nivel, para el
cual la DIm est√° habilitada.
Puede escoger entre las siguientes opciones:
Nivel

Significado

Activo con nivel alto
(predeterminado)

La DIm est√° habilitada si la DIm+1 est√° activada.

Activo con nivel bajo

DIm est√° habilitada si la DIm+1 no est√° activada.

Modo de operaci√≥n
Con este par√°metro se define la funci√≥n tecnol√≥gica de la correspondiente entrada digital.
Puede escoger entre las siguientes opciones:
Modo de operaci√≥n

Significado

Otros par√°metros espec√≠fi‚Äê
cos de la opci√≥n

Contador

En la DIm hay conectado un enc√≥der de impulsos o un sen‚Äê Evaluaci√≥n de se√±al del Con‚Äê
sor. El contador cuenta los flancos ascendentes o descen‚Äê tador
dentes de la DIm.
En el manual de producto del m√≥dulo tecnol√≥gico puede
consultar qu√© entradas digitales se pueden utilizar como
contadores.

Timer-DI
(predeterminado)

Para flancos definidos en la correspondiente entrada digital
se leen las correspondientes etiquetas de fecha/hora.

Inversi√≥n

Este ajuste utiliza Time‚Äëbased IO y requiere un modo is√≥cro‚Äê
no.
Si se usa el sistema de control SIMOTION, utilice este ajuste
para una aplicaci√≥n de palpador.
Oversampling

El m√≥dulo tecnol√≥gico detecta el estado de la correspon‚Äê
diente entrada digital por ciclo de aplicaci√≥n (p. ej., OB61) en
32 instantes equidistantes. Los 32 estados se devuelven
conjuntamente.

Inversi√≥n

Este ajuste requiere un modo is√≥crono.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1239

Time-based IO
4.1 High precision input/output with Time-based IO

Evaluaci√≥n de se√±al del Contador
Con este par√°metro se determina si el contador cuenta los flancos ascendentes o
descendentes en la DIm.
En el ajuste predeterminado se cuentan los flancos ascendentes.

4.1.4.2

TIO-Modul Online y diagn√≥stico

Indicaci√≥n y evaluaci√≥n del diagn√≥stico
Por medio de la vista online y de diagn√≥stico puede realizar un diagn√≥stico del hardware.
Adem√°s, puede:
‚óè Recibir informaci√≥n a trav√©s del m√≥dulo tecnol√≥gico (p. ej. la versi√≥n de Firmware y el
n√∫mero de serie).
‚óè Si es necesario, realice una actualizaci√≥n del firmware.

Procedimiento
Para abrir el editor de visualizaci√≥n para las funciones de diagn√≥stico, haga lo siguiente:
1. Abra la configuraci√≥n del equipo de la CPU o el IM.
2. Seleccione la vista de dispositivos.
3. Haga clic con el bot√≥n derecho del rat√≥n en el m√≥dulo tecnol√≥gico y seleccione "Online y
diagn√≥stico".
4. Haga clic en la visualizaci√≥n deseada en el √°rbol de diagn√≥stico.

M√°s informaci√≥n
Para m√°s informaci√≥n sobre los avisos de diagn√≥stico y sobre posibles remedios, consulte el
manual de producto del m√≥dulo tecnol√≥gico.

1240

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

5

Salida de impulsos
5.1

Principios b√°sicos de la salida de impulsos

5.1.1

Sinopsis de los m√≥dulos y sus caracter√≠sticas

M√≥dulos
La siguiente tabla resume, para el sistema S7‚Äë1500, las caracter√≠sticas de los m√≥dulos de
salida de impulsos.
Caracter√≠stica

S7-1500
M√≥dulo tecnol√≥gico

CPU compactas

M√≥dulo tecnol√≥gico

TM Ti‚Äê
mer DIDQ 16x24V

CPU 1511C-1 PN,

TM PTO 4

N√∫mero de generadores de impul‚Äê
sos

16

4

4

Modo de operaci√≥n Sobremuestreo

X

‚Äî

‚Äî

Modo de operaci√≥n Modulaci√≥n por
ancho de impulso PWM

X

X (P√°gina 1338)

‚Äî

Modo de operaci√≥n Salida de impul‚Äê
sos

‚Äî1

‚Äî

‚Äî

Modo de operaci√≥n Tren de impul‚Äê
sos

‚Äî1

‚Äî

‚Äî

Modo de operaci√≥n Retardo a la co‚Äê
nexi√≥n/desconexi√≥n

‚Äî

‚Äî

‚Äî

Modo de operaci√≥n Salida de fre‚Äê
cuencia

‚Äî

X (P√°gina 1338)

‚Äî

Modo de operaci√≥n PWM con motor
DC

‚Äî

‚Äî

‚Äî

Modo de operaci√≥n Pulse Train Out‚Äê
put (PTO)

‚Äî

X (P√°gina 1338)

X

Contador de secuencias

‚Äî

‚Äî

‚Äî

CPU 1512C-1 PN

Salida High Speed posible

X

X (P√°gina 1348)

‚Äî

Dithering posible

‚Äî

‚Äî

‚Äî

Medici√≥n/regulaci√≥n de corriente
posible

‚Äî

‚Äî

‚Äî

Soporte Motion Control

‚Äî

X

X

Habilitaci√≥n HW

‚Äî

‚Äî

X

Operaci√≥n en paralelo de 2 canales

‚Äî

‚Äî

‚Äî

Control salidas digitales a trav√©s de
programa de usuario

X

X (P√°gina 1349)

‚Äî

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1241

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Caracter√≠stica

1

S7-1500
M√≥dulo tecnol√≥gico

CPU compactas

M√≥dulo tecnol√≥gico

TM Ti‚Äê
mer DIDQ 16x24V

CPU 1511C-1 PN,

TM PTO 4

Soporte de modo is√≥crono en PRO‚Äê
FINET

X

‚Äî

X

Soporte de alarmas de diagn√≥stico

X

X

X

CPU 1512C-1 PN

Se puede implementar una funci√≥n similar con la funci√≥n de temporizaci√≥n.

La siguiente tabla resume, para el sistema ET 200SP, las caracter√≠sticas de los m√≥dulos de
salida de impulsos.
Caracter√≠stica

ET 200SP
M√≥dulo tecnol√≥gico

1242

M√≥dulo de salidas
digitales

TM Ti‚Äê
mer DIDQ 10x24V

TM Pulse 2x24V

DQ 4x24VDC/ 2A
HS

N√∫mero de generadores de impul‚Äê
sos

6

2

4

Modo de operaci√≥n Sobremuestreo

X

‚Äî

X

Modo de operaci√≥n Modulaci√≥n por
ancho de impulso PWM

X

X

X

Modo de operaci√≥n Salida de impul‚Äê
sos

‚Äî1

X

‚Äî

Modo de operaci√≥n Tren de impul‚Äê
sos

‚Äî1

X

‚Äî

Modo de operaci√≥n Retardo a la co‚Äê
nexi√≥n/desconexi√≥n

‚Äî

X

‚Äî

Modo de operaci√≥n Salida de fre‚Äê
cuencia

‚Äî

X

‚Äî

Modo de operaci√≥n PWM con motor
DC

‚Äî

X

‚Äî

Modo de operaci√≥n Pulse Train Out‚Äê
put (PTO)

‚Äî

‚Äî

‚Äî

Contador de secuencias

‚Äî

X

‚Äî

Salida High Speed posible

X

X

‚Äî

Dithering posible

‚Äî

X

‚Äî

Medici√≥n/regulaci√≥n de corriente
posible

‚Äî

X

‚Äî

Soporte Motion Control

‚Äî

‚Äî

‚Äî

Habilitaci√≥n HW

‚Äî

X

‚Äî

Operaci√≥n en paralelo de 2 canales

‚Äî

X

‚Äî

Control salidas digitales a trav√©s de
programa de usuario

X

X

X

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Caracter√≠stica

ET 200SP
M√≥dulo tecnol√≥gico

M√≥dulo de salidas
digitales

TM Ti‚Äê
mer DIDQ 10x24V

TM Pulse 2x24V

DQ 4x24VDC/ 2A
HS

Soporte de modo is√≥crono en PRO‚Äê
FINET

X

X

X

Soporte de alarmas de diagn√≥stico

X

X

X

1

Se puede implementar una funci√≥n similar con la funci√≥n de temporizaci√≥n.

5.1.2

Principios b√°sicos de la salida de impulsos (TM Pulse 2x24V)

5.1.2.1

Modo de operaci√≥n Salida de impulso (impulso √∫nico)

Funci√≥n
Introducci√≥n
En este modo de operaci√≥n, el canal correspondiente del m√≥dulo tecnol√≥gico emite un impulso
√∫nico con el retardo a la conexi√≥n parametrizado y la duraci√≥n especificada con la interfaz de
control.

Secuencia de salida
Inicio de la secuencia de salida
Para poder emitir la secuencia de salida por la salida digital DQn.A, debe estar activado el bit
de control TM_CTRL_DQ. Para iniciar la secuencia de salida a trav√©s de la habilitaci√≥n
software, active el bit de control (P√°gina 1251) SW_ENABLE. El bit de respuesta
(P√°gina 1253) STS_SW_ENABLE indica que la habilitaci√≥n software est√° activa en el m√≥dulo
tecnol√≥gico.
Adicionalmente, puede utilizarse la habilitaci√≥n hardware a trav√©s de la correspondiente
entrada digital DIn.0. Para DIn.0 se puede parametrizar un retardo a la entrada.
Diagrama de impulsos
La imagen siguiente muestra un ejemplo de una secuencia de salida en el supuesto de que se
utilice DIn.0 como habilitaci√≥n hardware.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1243

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos


70B&75/B'4



6:B(1$%/(

676B6:B(1$%/(
',Q
+DELOLWDFL¬µQ+:

676B',

'4Q$

676B(1$%/(

(55B38/6(

5HWDUGRDOD
FRQH[L¬µQ

Figura 5-1

5HWDUGRDOD
FRQH[L¬µQ

'XUDFL¬µQGHOLPSXOVR

Ejemplo de una secuencia de salida

Si se utiliza la habilitaci√≥n hardware, se combina con la habilitaci√≥n software. Si est√° activa la
habilitaci√≥n software, la secuencia de salida se inicia con el primer flanco ascendente de la
habilitaci√≥n hardware. Los dem√°s flancos ascendentes de la habilitaci√≥n hardware durante la
secuencia de salida se ignoran. Si la habilitaci√≥n hardware est√° activada y permanece activada
durante el retardo a la entrada, se inicia el retardo a la conexi√≥n y se activa el bit de respuesta
STS_ENABLE. Una vez finalizado el retardo a la conexi√≥n, se emite el impulso a trav√©s de la
correspondiente salida digital DQn.A con la duraci√≥n asignada. La secuencia de salida finaliza
una vez transcurrida la duraci√≥n del impulso y se desactiva STS_ENABLE.
Si no se usa habilitaci√≥n hardware, el retardo a la conexi√≥n se inicia con el flanco ascendente
de SW_ENABLE.

Interrupci√≥n de la secuencia de salida
Si se desactiva el bit de control SW_ENABLE, se desactiva la habilitaci√≥n software y la
secuencia de salida actual se cancela sin finalizar. Se desactivan el bit de respuesta
STS_ENABLE y la salida digital DQn.A.
Una nueva salida de impulso solo es posible tras reiniciar la secuencia de salida.

1244

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Duraci√≥n del impulso
La duraci√≥n de impulso es el tiempo durante el cual la salida digital DQn.A permanece activada
una vez transcurrido el retardo a la conexi√≥n.
La duraci√≥n de impulso se ajusta en ¬µs en la interfaz de control por medio de OUTPUT_VALUE
como n√∫mero entero (UDINT). El rango de valores depende del uso de la funci√≥n de salida
High Speed:
Salida High Speed

Rango de valores de
OUTPUT_VALUE

Rango de valores de la duraci√≥n de
impulso

Activada

2 ... 85000000

2 ... 85000000 Œºs
= 2 Œºs ... 85 s

Desactivada

10 ... 85000000

10 ... 85000000 Œºs
= 10 Œºs ... 85 s

Modificaci√≥n de la duraci√≥n de impulso durante la secuencia de salida
Si se cambia la duraci√≥n de impulso a un valor mayor que la duraci√≥n de impulso ya
transcurrida, la modificaci√≥n se hace efectiva inmediatamente. De este modo se puede
modificar la duraci√≥n de impulso incluso durante la secuencia de salida.
Si se cambia la duraci√≥n de impulso a un valor menor que la duraci√≥n de impulso ya
transcurrida, se cancela la secuencia de salida. En tal caso se desactivan el bit de respuesta
STS_ENABLE y la salida digital DQn.A, y se activa el bit de respuesta ERR_PULSE. Para
continuar con la salida de impulsos debe reiniciarse la secuencia de salida. La pr√≥xima vez que
se inicie la secuencia de salida, el m√≥dulo tecnol√≥gico desactivar√° el bit de respuesta
ERR_PULSE.

Retardo a la conexi√≥n
El retardo a la conexi√≥n se ajusta en la configuraci√≥n hardware entre 0 y 85 s con una precisi√≥n
de 1 ¬µs.
El retardo a la conexi√≥n tambi√©n puede modificarse a trav√©s de la interfaz de control
introduciendo un nuevo valor en SLOT como n√∫mero entero (UDINT). En este caso,
seleccione, por medio del bit de control MODE_SLOT, si la modificaci√≥n debe aplicarse una
sola vez o de modo c√≠clico:
MODE_SLOT = 0

Modificaci√≥n √∫nica:
En cuanto se escribe el valor 2D en el correspondiente byte de salida, el valor
de SLOT se aplica una sola vez como retardo a la conexi√≥n y se conserva
hasta la pr√≥xima modificaci√≥n.
Las modificaciones por medio de SLOT se hacen efectivas en la pr√≥xima
secuencia de salida. La modificaci√≥n no afecta a la secuencia de salida en
curso.

MODE_SLOT = 1

Modificaci√≥n c√≠clica:
Si se escribe el valor 18D en el correspondiente byte de salida, el valor actual
de SLOT se aplica c√≠clicamente como retardo a la conexi√≥n.
Las modificaciones por medio de SLOT se hacen efectivas en la pr√≥xima
secuencia de salida. La modificaci√≥n no afecta a la secuencia de salida en
curso.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1245

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Encontrar√° m√°s informaci√≥n en AUTOHOTSPOT.

Contador de secuencias
El m√≥dulo tecnol√≥gico posee para cada canal un contador de secuencias que cuenta las
secuencias de salida finalizadas. Se cuentan tanto las secuencias finalizadas correctamente
como las no finalizadas correctamente. Si se usa la habilitaci√≥n hardware, pueden producirse
secuencias de salida muy breves que la CPU no es capaz de detectar con certeza. El contador
de secuencias permite comprobar en el programa de usuario cu√°ntas secuencias de salida se
han iniciado.
El n√∫mero de secuencias se indica en la interfaz de respuesta (P√°gina 1253) por medio del
valor SEQ_CNT. Este valor permite vigilar la finalizaci√≥n de una secuencia de salida.
Si se usa la habilitaci√≥n hardware, el contador de secuencias cuenta de 0 a 15. Si no se usa
la habilitaci√≥n hardware, la secuencia de salida se inicia siempre por medio del bit de control
SW_ENABLE, por lo que el contador de secuencias cuenta solo hasta 1.
Cuando se desactiva SW_ENABLE o se produce un desbordamiento, el contador vuelve a 0.

Salida High Speed
La funci√≥n Salida High Speed permite una frecuencia de salida m√°xima de 100 kHz con una
intensidad de salida m√°xima de 100 mA. Las salidas High Speed generan flancos muy
verticales. La salida High Speed genera se√±ales con una frecuencia m√°s elevada, pero ofrece
una menor corriente de carga m√°xima. La salida High Speed solo est√° disponible en el modo
bicanal.
La tabla siguiente muestra el rango de valores de la duraci√≥n del impulso y la frecuencia en
funci√≥n de la salida High Speed:
Valor m√≠nimo

Duraci√≥n del im‚Äê
pulso
Frecuencia

Valor m√°ximo

Salida High Speed
desactivada

Salida High Speed
activada

10 Œºs

1,5 Œºs
0,02 Hz

Salida High
Speed desactiva‚Äê
da

Salida High
Speed activada

85000000 Œºs (= 85 s)
10 kHz

100 kHz

Configuraci√≥n
Introducci√≥n
El m√≥dulo tecnol√≥gico se configura y parametriza con el software de configuraci√≥n.
Las funciones del m√≥dulo tecnol√≥gico se controlan con el programa de usuario a trav√©s de la
interfaz de control y respuesta.

1246

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Entorno del sistema
El m√≥dulo tecnol√≥gico puede utilizarse en los siguientes entornos de sistema:
Aplicaciones posibles

Componentes necesarios

Software de configuraci√≥n

En el programa de usuario

Operaci√≥n centralizada
con una CPU 151xSP

‚óè Sistema de automatizaci√≥n
ET 200SP

STEP 7 (TIA Portal):

Acceso directo a la inter‚Äê
faz de control y respuesta
en los datos IO

‚óè TM Pulse 2x24V
Operaci√≥n descentraliza‚Äê ‚óè Sistema de automatizaci√≥n
da con una CPU S7-1500
S7-1500
‚óè Sistema de periferia
descentralizada ET 200SP

Configuraci√≥n del dispositivo y
ajuste de par√°metros en la confi‚Äê
guraci√≥n hardware
STEP 7 (TIA Portal):
Configuraci√≥n del dispositivo y
ajuste de par√°metros en la confi‚Äê
guraci√≥n hardware

‚óè TM Pulse 2x24V
Operaci√≥n descentraliza‚Äê ‚óè Sistema de automatizaci√≥n
da con una CPU
S7-300/400
S7-300/400
‚óè Sistema de periferia
descentralizada ET 200SP
‚óè TM Pulse 2x24V
Operaci√≥n descentraliza‚Äê ‚óè Sistema de automatizaci√≥n
da con PROFINET IO en
de otro fabricante
un sistema de otro fabri‚Äê
‚óè Sistema de periferia
cante
descentralizada ET 200SP
‚óè TM Pulse 2x24V
Operaci√≥n descentraliza‚Äê ‚óè Sistema de automatizaci√≥n
da con PROFIBUS DP
de otro fabricante
en un sistema de otro fa‚Äê
‚óè Sistema de periferia
bricante
descentralizada ET 200SP
‚óè TM Pulse 2x24V

STEP 7 (TIA Portal):
Configuraci√≥n del dispositivo y
ajuste de par√°metros en la confi‚Äê
guraci√≥n hardware
STEP 7:
Configuraci√≥n del dispositivo y
ajuste de par√°metros con HSP
Software de configuraci√≥n de otro
fabricante:
Configuraci√≥n del dispositivo y
ajuste de par√°metros con archivo
GSD
Software de configuraci√≥n de otro
fabricante:
Archivo GSD, configuraci√≥n del
dispositivo y ajuste de par√°metros
a trav√©s del juego de datos 128

Hardware Support Packages (HSP)
STEP 7
Los Hardware Support Packages (HSP) pueden descargarse de Internet (https://
support.industry.siemens.com/cs/ww/es/view/23183356).

Archivo GSD
El archivo GSD correspondiente al sistema de periferia descentralizada ET 200SP est√°
disponible para su descarga en Internet:
‚óè Archivo GSD PROFINET IO (http://support.automation.siemens.com/WW/view/es/
57138621)
‚óè Archivo GSD PROFIBUS DP (http://support.automation.siemens.com/WW/view/es/
73016883)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1247

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Reacci√≥n a STOP de la CPU
La respuesta del canal en caso de STOP de la CPU se ajusta en los par√°metros de la
configuraci√≥n del dispositivo.
Tabla 5-1
Opci√≥n

Respuesta del canal en caso de STOP de la CPU
Significado

Aplicar valor susti‚Äê Hasta la siguiente transici√≥n de STOP a RUN de la CPU, el canal emite por las
tutivo
salidas digitales los valores sustitutivos parametrizados. El valor sustitutivo 1 solo
puede parametrizarse para una de las dos salidas digitales.
La secuencia de salida en curso finaliza y se desactiva el bit de respuesta
STS_ENABLE.
Despu√©s de una transici√≥n de STOP a RUN, el m√≥dulo tecnol√≥gico pasa a su
estado de arranque. Antes de poder iniciar una nueva salida de impulsos, debe
desactivarse el bit de control SW_ENABLE.
Continuar

El canal contin√∫a trabajando.
Las salidas digitales contin√∫an conmut√°ndose con arreglo a la parametrizaci√≥n.
As√≠, la secuencia de salida en curso contin√∫a. Si se ha parametrizado la habilita‚Äê
ci√≥n hardware, tambi√©n se pueden iniciar nuevas secuencias de salida a trav√©s de
DIn.0.
Tras una transici√≥n de STOP a RUN, la configuraci√≥n del m√≥dulo tecnol√≥gico no se
desactiva.

Ajuste de par√°metros
Las propiedades del m√≥dulo tecnol√≥gico se establecen mediante diferentes par√°metros. En
funci√≥n de los ajustes, no todos los par√°metros est√°n disponibles. Si la parametrizaci√≥n se
efect√∫a en el programa de usuario, los par√°metros se transfieren al m√≥dulo con la instrucci√≥n
"WRREC" por medio del juego de datos 128.
En este modo de operaci√≥n, los par√°metros del m√≥dulo se ajustan de la siguiente manera:
Ajuste de par√°metros me‚Äê
diante...

Procedimiento b√°sico

Configuraci√≥n hardware en
STEP 7 (TIA Portal)

1. Inserte el m√≥dulo desde la carpeta "M√≥dulos tecnol√≥gicos" del
cat√°logo de hardware.
2. Ajuste el modo de operaci√≥n "Salida de impulso" y los restantes
par√°metros del m√≥dulo en la configuraci√≥n hardware.
3. Cargue el proyecto en la CPU.

Configuraci√≥n hardware en
STEP 7 con HSP

1. Instale el archivo HSP correspondiente.
A continuaci√≥n encontrar√° el m√≥dulo en el cat√°logo de hardware,
bajo "ET 200SP".
2. Ajuste el modo de operaci√≥n "Salida de impulso" y los restantes
par√°metros del m√≥dulo en la configuraci√≥n hardware.
3. Cargue el proyecto en la CPU.

1248

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Ajuste de par√°metros me‚Äê
diante...

Procedimiento b√°sico

Configuraci√≥n hardware con
archivo GSD para la opera‚Äê
ci√≥n descentralizada en
PROFINET IO

1. Instale el archivo GSD PROFINET actual.
A continuaci√≥n encontrar√° el m√≥dulo en el cat√°logo de hardware en
"Otros dispositivos de campo > PROFINET IO > I/O".
2. Ajuste el modo de operaci√≥n "Salida de impulso" y los restantes
par√°metros del m√≥dulo en la configuraci√≥n hardware.
3. Cargue el proyecto en la CPU.

Configuraci√≥n hardware con
archivo GSD para la opera‚Äê
ci√≥n descentralizada en
PROFIBUS DP

1. Instale el archivo GSD PROFIBUS actual.
A continuaci√≥n encontrar√° el m√≥dulo en el cat√°logo de hardware en
"Otros dispositivos de campo > PROFIBUS DP > I/O".
2. Cargue el proyecto en la CPU.
Los par√°metros del m√≥dulo se cargar√°n con los ajustes
predeterminados (ver la tabla siguiente).
3. Ajuste el modo de operaci√≥n "Salida de impulso" y los restantes
par√°metros en el programa del usuario a trav√©s del juego de datos
128.

Par√°metros del TM Pulse 2x24V en el modo de operaci√≥n "Salida de impulso"
En la columna "Rango", los ajustes predeterminados de los par√°metros aparecen marcados
en negrita.
Tabla 5-2

Par√°metros ajustables
Par√°metro

Configuraci√≥n de canal

Rango de valores
1

‚óè 2 canales (2 A):

Rango efectivo
M√≥dulo

‚óè 1 canal (4 A)
Reacci√≥n a STOP de la CPU

‚óè Aplicar valor sustitutivo

Canal

‚óè Continuar
Valor sustitutivo de DQA

‚óè 0

Canal

‚óè 1
Valor sustitutivo de DQB

‚óè 0

Canal

‚óè 1
Diagn√≥stico agrupado

‚óè Desactivado

Canal

‚óè Activado
Diagn√≥stico DQA

‚óè Desactivado

Canal

‚óè Activado
Diagn√≥stico DQB

‚óè Desactivado

Canal

‚óè Activado
Salida High Speed (0,1 A)

‚óè Desactivada

Canal

‚óè Activada
Funci√≥n DI

‚óè Entrada

Canal

‚óè Habilitaci√≥n HW

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1249

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Par√°metro
Retardo a la entrada para entra‚Äê
das digitales

Rango de valores

Rango efectivo
Canal

‚óè Ninguno
‚óè 0,05 ms
‚óè 0,1 ms
‚óè 0,4 ms
‚óè 0,8 ms
‚óè 1,6 ms
‚óè 3,2 ms
‚óè 12,8 ms
‚óè 20 ms

Formato de salida

Canal

‚óè Salida anal√≥gica S7
‚óè 1/100
‚óè 1/1000
‚óè 1/10000

Retardo a la conexi√≥n para salida
de impulso

0...85000000 Œºs

Canal

En la configuraci√≥n con HSP para STEP 7 o con archivo GSD, se establece la configuraci√≥n de
canales seleccionando el nombre del m√≥dulo.

1

Nota
Configuraci√≥n con GSD para PROFIBUS
En la configuraci√≥n con GSD para PROFIBUS, las posibilidades de parametrizaci√≥n no est√°n
disponibles. A los par√°metros del m√≥dulo se asignan los valores predeterminados. Ajuste el
modo de operaci√≥n "Salida de impulso" y los restantes par√°metros en el programa del usuario
a trav√©s del juego de datos 128.

√Årea de direcciones
Espacio de direcciones del m√≥dulo tecnol√≥gico
Tabla 5-3

1250

Alcance de las direcciones de entrada y salida
Entradas

Salidas

Alcance por canal tecnol√≥gico

8 bytes

12 bytes

Alcance en modo monocanal

8 bytes

12 bytes

Alcance en modo bicanal

16 bytes

24 bytes

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Interfaz de control y realimentaci√≥n
Nota
En Internet (https://support.industry.siemens.com/cs/ww/es/view/109482396) puede
descargarse una librer√≠a con los tipos de datos PLC (LPD) para STEP 7 (TIA Portal) y SIMATIC
S7-1200/S7-1500.

Asignaci√≥n de la interfaz de control
El programa de usuario controla el comportamiento del m√≥dulo tecnol√≥gico a trav√©s de la
interfaz de control.

Interfaz de control por canal
La siguiente tabla muestra la asignaci√≥n de la interfaz de control:
Offset de
byte res‚Äê
pecto de
la direc‚Äê
ci√≥n ini‚Äê
cial
Canal
0/1
‚Üì ‚Üì

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

0
‚Ä¶
3

12
‚Ä¶
15

UDINT: Duraci√≥n del impulso

4
‚Ä¶
7

16
‚Ä¶
19

UDINT: Valor de carga

8

20

Reservado

MODE_
SLOT

9

21

Reservado

SET_DQB

10

22

11

23

Bit 2

Bit 1

Bit 0

OUTPUT_VALUE

SLOT

LD_SLOT
SET_DQA

Reservado

Reservado

TM_
CTRL_DQ

SW_
ENABLE
RES_
ERROR

Reservado

Nota
El canal 1 solo est√° disponible en el modo bicanal del m√≥dulo.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1251

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Bit de control/valor

Explicaciones

OUTPUT_VALUE

Con este valor se define la duraci√≥n de impulso.
Rango de valores:
‚óè Duraci√≥n de impulso en Œºs con la salida High Speed desactivada: de 10 a 85000000D
‚óè Duraci√≥n de impulso en Œºs con la salida High Speed activada: de 2 a 85000000D
En caso de rebase por exceso o por defecto del rango de valores, se activa el bit de respuesta
ERR_OUT_VAL y se utiliza la √∫ltima duraci√≥n de impulso v√°lida.

SLOT

Con este valor se define el valor de carga.
Rango de valores:
‚óè Retardo a la conexi√≥n en Œºs: de 0 a 85000000D
Con el bit de control MODE_SLOT se define si una modificaci√≥n debe aplicarse una sola vez o
de modo c√≠clico.
Los valores no v√°lidos dan lugar a la activaci√≥n del bit de respuesta ERR_LD (con MODE_SLOT
= 0) o ERR_SLOT_VAL (con MODE_SLOT = 1).

MODE_SLOT

Con este bit se define si una modificaci√≥n en SLOT debe aplicarse una sola vez o de modo c√≠clico.
0 significa: En cuanto se escribe el valor 2D en el correspondiente byte de salida, el valor de SLOT
se aplica una sola vez como retardo a la conexi√≥n y se conserva hasta la pr√≥xima modificaci√≥n.
Las modificaciones por medio de SLOT se hacen efectivas en la pr√≥xima secuencia de salida.
Tras un nuevo arranque del m√≥dulo, el valor se sobrescribe con el valor ajustado en la configu‚Äê
raci√≥n hardware.
1 significa: Si se escribe el valor 18D en el correspondiente byte de salida, se aplica el valor actual
de SLOT c√≠clicamente. Las modificaciones por medio de SLOT se hacen efectivas en la pr√≥xima
secuencia de salida.

LD_SLOT

Con esta solicitud de carga se especifica el significado del valor en SLOT:
‚óè 0000B significa: Ninguna acci√≥n, estado de reposo
‚óè 0010B significa: Retardo a la conexi√≥n en Œºs
Todos los valores no indicados son no v√°lidos y dan lugar a la activaci√≥n del bit de respuesta
ERR_LD (si MODE_SLOT = 0) o ERR_SLOT_VAL (si MODE_SLOT = 1).

SET_DQA

Con este bit se activa la salida digital DQn.A cuando TM_CTRL_DQ y SET_DQB est√°n ajustados
a 0.

SET_DQB

Con este bit se activa la salida digital DQn.B cuando TM_CTRL_DQ y SET_DQA est√°n ajustados
a 0.

TM_CTRL_DQ

Con este bit se habilita la funci√≥n tecnol√≥gica de la salida digital.
‚óè 0 significa: SET_DQA y SET_DQB determinan estados de DQn.A y DQn.B
‚óè 1 significa: La secuencia de salida determina el estado de DQn.A; DQn.B siempre es 0.

SW_ENABLE

Con este bit se activa la habilitaci√≥n software. Si se utiliza la habilitaci√≥n hardware, se combina
con la habilitaci√≥n software.
‚óè 0 significa: Finalizar salida
‚óè 1 significa: Iniciar salida
El uso de la habilitaci√≥n hardware se activa mediante parametrizaci√≥n. El control de la habilita‚Äê
ci√≥n hardware se realiza externamente a trav√©s de la entrada digital DIn.0.

1252

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Bit de control/valor

Explicaciones

RES_ERROR

Con este bit se desactivan los siguientes bits de respuesta cuando hay errores presentes:
‚óè ERR_24V
‚óè ERR_DQA
‚óè ERR_DQB
‚óè ERR_LD

Reservado

Los bits de reserva deben estar ajustados a 0.

Asignaci√≥n de la interfaz de respuesta
El programa de usuario recibe valores actuales e informaci√≥n de estado del m√≥dulo
tecnol√≥gico a trav√©s de la interfaz de respuesta.

Interfaz de respuesta por canal
La siguiente tabla muestra la asignaci√≥n de la interfaz de respuesta:
Offset de
byte res‚Äê
pecto de
la direc‚Äê
ci√≥n ini‚Äê
cial
Canal
0/1
‚Üì ‚Üì

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0

ERR_
SLOT_VAL

ERR_
OUT_VAL

ERR_DQB

ERR_DQA

ERR_
PULSE

ERR_LD

ERR_24V

ERR_PWR

STS_SW_
ENABLE

STS_
READY

Reservado

STS_LD_
SLOT

STS_DI

STS_DQB

0

8

1

9

2

10

Reservado

3

11

Reservado

4
...
7

12
...
15

Reservado

Reservado
STS_DQA

STS_
ENABLE

SEQ_CNT
Reservado

Nota
El canal 1 solo est√° disponible en el modo bicanal del m√≥dulo.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1253

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Bit de respuesta/
Valor

Explicaciones

ERR_SLOT_VAL

Este bit indica que el valor de SLOT o LD_SLOT no es v√°lido (si MODE_SLOT = 1) y no se ha
aceptado.
Cuando el m√≥dulo recibe un valor v√°lido de la interfaz de control, se desactiva ERR_SLOT_VAL
autom√°ticamente.

ERR_OUT_VAL

Este bit indica que el valor de OUTPUT_VALUE no es v√°lido.
Cuando el m√≥dulo recibe un valor v√°lido de la interfaz de control, se desactiva ERR_OUT_VAL
autom√°ticamente.

ERR_DQA

Este bit indica un cortocircuito o una sobrecarga en la salida DQn.A. Si se ha habilitado la alarma de
diagn√≥stico "Diagn√≥stico DQA", este error dispara la alarma de diagn√≥stico "Error en salidas digita‚Äê
les".
El bit se desactiva despu√©s de acusar el error con RES_ERROR.

ERR_DQB

Este bit indica un cortocircuito o una sobrecarga en la salida DQn.B o el intento de activar simult√°‚Äê
neamente los bits de control SET_DQA y SET_DQB. Si se ha habilitado la alarma de diagn√≥stico
"Diagn√≥stico DQB", este error dispara la alarma de diagn√≥stico "Error en salidas digitales".
El bit se desactiva despu√©s de acusar el error con RES_ERROR.

ERR_PULSE

Este bit indica un error en la salida de impulso, p. ej., el nuevo valor de la duraci√≥n de impulso es
demasiado bajo.

ERR_LD

Este bit indica que el valor de SLOT o LD_SLOT (si MODE_SLOT = 0) no es v√°lido y no se ha
aceptado.
El bit se desactiva despu√©s de acusar el error con RES_ERROR.

ERR_24V

Este bit indica un cortocircuito o una sobrecarga en la salida 24VDC. Si se han habilitado las alarmas
de diagn√≥stico, este error dispara la alarma de diagn√≥stico "Cortocircuito/sobrecarga en la alimen‚Äê
taci√≥n de sensores externa".
El bit se desactiva despu√©s de acusar el error con RES_ERROR.

ERR_PWR

Este bit indica que la tensi√≥n de alimentaci√≥n L+ es insuficiente. Si se han habilitado las alarmas de
diagn√≥stico, en caso de error en la tensi√≥n de alimentaci√≥n se dispara la alarma de diagn√≥stico "Error
de tensi√≥n de alimentaci√≥n".
Cuando la tensi√≥n de alimentaci√≥n L+ vuelve a ser suficiente, se desactiva ERR_PWR autom√°tica‚Äê
mente.
El bit no se activa si no hay tensi√≥n de alimentaci√≥n aplicada.

STS_SW_ENABLE

Este bit indica el estado de la habilitaci√≥n software.
‚óè 0 significa: Habilitaci√≥n software no activa
‚óè 1 significa: Habilitaci√≥n software activa

STS_READY

Este bit indica que el m√≥dulo devuelve datos de usuario v√°lidos. El m√≥dulo ha arrancado y est√°
parametrizado.

STS_LD_SLOT

Este bit indica, por medio de un cambio de estado (conmutaci√≥n), que la solicitud de carga LD_SLOT
ha sido detectada y ejecutada (si MODE_SLOT = 0).

STS_DI

Este bit indica el estado de la entrada digital DIn.0.

STS_DQA

Este bit indica el estado de la salida digital DQn.A.

STS_DQB

Este bit indica el estado de la salida digital DQn.B.

STS_ENABLE

Este bit indica que hay una secuencia de salida en curso.

SEQ_CNT

Este valor de contador indica el n√∫mero de secuencias de salida finalizadas.

Reservado

Los bits de reserva est√°n ajustados a 0.

1254

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Modo is√≥crono
El m√≥dulo tecnol√≥gico soporta la funci√≥n de sistema "Modo is√≥crono". Si no se usa habilitaci√≥n
hardware, en el modo is√≥crono se inicia la secuencia de salida en el instante To, una vez
activado el bit de control SW_ENABLE.

M√°s informaci√≥n
Encontrar√° una descripci√≥n detallada del modo is√≥crono:
‚óè En el manual de funciones Modo is√≥crono, disponible para descarga en Internet (https://
support.industry.siemens.com/cs/ww/es/view/109755401).
‚óè En el manual de funciones PROFINET con STEP 7, disponible para su descarga en Internet
(https://support.industry.siemens.com/cs/ww/es/view/49948856).

5.1.2.2

Modo de operaci√≥n Modulaci√≥n por ancho de impulso PWM

Funci√≥n
Introducci√≥n
En este modo de operaci√≥n, el correspondiente canal del m√≥dulo tecnol√≥gico emite una se√±al
modulada por ancho de impulso con la duraci√≥n m√≠nima de impulso y la duraci√≥n de periodo
parametrizadas. Se puede superponer una se√±al de dither a la se√±al PWM. Adem√°s, el m√≥dulo
dispone de un regulador PID integrado que permite regular la intensidad de salida.
El ciclo de trabajo y la consigna de intensidad se especifican con la interfaz de control.

Secuencia de salida
Inicio de la secuencia de salida
Para poder emitir la secuencia de salida por la salida digital DQn.A, debe estar activado el bit
de control TM_CTRL_DQ. Para iniciar la secuencia de salida a trav√©s de la habilitaci√≥n
software, active el bit de control (P√°gina 1272) SW_ENABLE. El bit de respuesta
(P√°gina 1275) STS_SW_ENABLE indica que la habilitaci√≥n software est√° activa en el m√≥dulo
tecnol√≥gico.
Adicionalmente, puede utilizarse la habilitaci√≥n hardware a trav√©s de la correspondiente
entrada digital DIn.0. Para DIn.0 se puede parametrizar un retardo a la entrada.
Diagrama de impulsos
La figura siguiente muestra un ejemplo de una secuencia de salida en el supuesto de que se
utilice DIn.0 como habilitaci√≥n hardware.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1255

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
1
70B&75/B'4
0
6:B(1$%/(

676B6:B(1$%/(
',Q
+DELOLWDFL¬µQ+:
676B',
'XUDFL¬µQGHOSHULRGR

'XUDFL¬µQGHOSHULRGR

'4Q$
5HWDUGRD 5HWDUGRDOD
FRQH[L¬µQ
OD
FRQH[L¬µQ

'XUDFL¬µQ
GHOLPSXOVR

'XUDFL¬µQ
GHSDXVD
HQWUH
LPSXOVRV

676B(1$%/(
&LFORGHWUDEDMR

Figura 5-2

50 %

20 %

Ejemplo de una secuencia de salida

Si se utiliza la habilitaci√≥n hardware, se combina con la habilitaci√≥n software. Si est√° activa la
habilitaci√≥n software, la secuencia de salida se inicia con el primer flanco ascendente de la
habilitaci√≥n hardware. Los dem√°s flancos ascendentes de la habilitaci√≥n hardware durante la
secuencia de salida se ignoran. Si la habilitaci√≥n hardware se activa y permanece activada
durante el retardo a la entrada, se inicia el retardo a la conexi√≥n y se activa el bit de respuesta
STS_ENABLE. Una vez finalizado el retardo a la conexi√≥n, se emite la se√±al modulada por
ancho de impulso a trav√©s de la correspondiente salida digital DQn.A con el ciclo de trabajo
asignado. El ciclo de trabajo es la relaci√≥n entre la duraci√≥n del impulso y la duraci√≥n del
periodo. La secuencia de salida sigue ejecut√°ndose continuamente mientras est√© activado
SW_ENABLE.
Si no se usa habilitaci√≥n hardware, el retardo a la conexi√≥n se inicia con el flanco ascendente
de SW_ENABLE. La habilitaci√≥n hardware no est√° disponible en modo is√≥crono.

Interrupci√≥n de la secuencia de salida
Si se desactiva el bit de control SW_ENABLE, se desactiva la habilitaci√≥n software y se
cancela la secuencia de salida actual. El √∫ltimo periodo no finaliza. Se desactivan el bit de
respuesta STS_ENABLE y la salida digital DQn.A.
Una nueva salida de impulso solo es posible tras reiniciar la secuencia de salida.

1256

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Ciclo de trabajo
El ciclo de trabajo equivale a la relaci√≥n entre la duraci√≥n del impulso y la duraci√≥n del periodo
(tambi√©n denominado relaci√≥n impulso-pausa o tiempo de conexi√≥n).
El ciclo de trabajo se ajusta en la interfaz de control (P√°gina 1272) por medio de
OUTPUT_VALUE como n√∫mero entero (UDINT). El rango de valores depende del formato de
salida parametrizado. Si se ajusta 0, DQn.A no se activar√° durante toda la duraci√≥n del
periodo. Si se ajusta el valor m√°ximo, DQn.A se activar√° durante toda la duraci√≥n del periodo.
Si se rebasa el rango de valores, se utiliza el valor m√°ximo.
Formato de salida

Rango de valores
de
OUTPUT_VALUE

Duraci√≥n del impulso

1/100 (%)

0 ... 100

(OUTPUT_VALUE/100) √ó duraci√≥n del periodo

1/1000 (‚Ä∞)

0 ... 1000

(OUTPUT_VALUE/1000) √ó duraci√≥n del periodo

1/10000

0 ... 10000

(OUTPUT_VALUE/10000) √ó duraci√≥n del periodo

Salida anal√≥gica S7

0 ... 27648

(OUTPUT_VALUE/27648) √ó duraci√≥n del periodo

Las modificaciones del ciclo de trabajo se hacen efectivas con el pr√≥ximo flanco ascendente
en DQn.A.
Nota
Regulaci√≥n de intensidad
Si se utiliza la regulaci√≥n de intensidad (P√°gina 1263), el m√≥dulo controlar√° el ciclo de trabajo
y la consigna de intensidad se asignar√° con OUTPUT_VALUE.

Duraci√≥n del periodo
La duraci√≥n del periodo se ajusta en ¬µs en la configuraci√≥n hardware. El rango de valores
depende del uso de la funci√≥n de salida High Speed:
Salida High Speed

Rango de valores de la duraci√≥n del periodo

Activada

10 ... 85000000 Œºs
= 10 Œºs ... 85 s

Desactivada

100 ... 85000000 Œºs
= 100 Œºs ... 85 s

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1257

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
La duraci√≥n del periodo tambi√©n puede modificarse con la interfaz de control introduciendo un
nuevo valor en SLOT como n√∫mero entero (UDINT). En este caso, seleccione, por medio del
bit de control MODE_SLOT, si la modificaci√≥n debe aplicarse una sola vez o de modo c√≠clico:
MODE_SLOT = 0

Modificaci√≥n √∫nica:
En cuanto se escribe el valor 1D en el correspondiente byte de salida, el valor
de SLOT se aplica una sola vez como duraci√≥n del periodo y se conserva
hasta la pr√≥xima modificaci√≥n.
Las modificaciones de la duraci√≥n del periodo realizadas a trav√©s de SLOT se
hacen efectivas con el pr√≥ximo flanco ascendente en DQn.A.

MODE_SLOT = 1

Modificaci√≥n c√≠clica:
Si se escribe el valor 17D en el correspondiente byte de salida, el valor actual
de SLOT se aplica c√≠clicamente como duraci√≥n del periodo.
Las modificaciones de la duraci√≥n del periodo realizadas a trav√©s de SLOT se
hacen efectivas con el pr√≥ximo flanco ascendente en DQn.A.

Encontrar√° m√°s informaci√≥n en AUTOHOTSPOT.

Retardo a la conexi√≥n
El retardo a la conexi√≥n se ajusta en la configuraci√≥n hardware entre 0 y 85 s con una precisi√≥n
de 1 ¬µs.
El retardo a la conexi√≥n tambi√©n puede modificarse a trav√©s de la interfaz de control
introduciendo un nuevo valor en SLOT como n√∫mero entero (UDINT). En este caso,
seleccione, por medio del bit de control MODE_SLOT, si la modificaci√≥n debe aplicarse una
sola vez o de modo c√≠clico:
MODE_SLOT = 0

Modificaci√≥n √∫nica:
En cuanto se escribe el valor 2D en el correspondiente byte de salida, el valor
de SLOT se aplica una sola vez como retardo a la conexi√≥n y se conserva
hasta la pr√≥xima modificaci√≥n.
Las modificaciones por medio de SLOT se hacen efectivas en la pr√≥xima
secuencia de salida. La modificaci√≥n no afecta a la secuencia de salida en
curso.

MODE_SLOT = 1

Modificaci√≥n c√≠clica:
Si se escribe el valor 18D en el correspondiente byte de salida, el valor actual
de SLOT se aplica c√≠clicamente como retardo a la conexi√≥n.
Las modificaciones por medio de SLOT se hacen efectivas en la pr√≥xima
secuencia de salida. La modificaci√≥n no afecta a la secuencia de salida en
curso.

Encontrar√° m√°s informaci√≥n en AUTOHOTSPOT.
Nota
En el modo is√≥crono, los retardos a la conexi√≥n parametrizados no tienen efecto.

1258

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Dithering
La funci√≥n de dither est√° concebida especialmente para el mando de v√°lvulas proporcionales.
La funci√≥n de dither superpone una fluctuaci√≥n sim√©trica ajustable a la consigna para el mando
de la bobina de la v√°lvula. Esto da lugar a un movimiento muy leve en torno a la consigna de
posici√≥n que impide que la v√°lvula se atasque a causa del rozamiento o de un efecto de
hist√©resis. De este modo se mejora la respuesta a las modificaciones de la consigna.
Los par√°metros de dithering se ajustan en la configuraci√≥n hardware. El dithering se activa con
el bit DITHER en la interfaz de control (P√°gina 1272).

Amplitud de dither
La amplitud de dither es la amplitud de la se√±al de dither referida a la duraci√≥n del periodo de
la secuencia de salida. El rango de valores es de 0 a 50% Si se rebasa el rango de valores, se
utiliza una amplitud de dither del 50%.
El m√≥dulo adapta din√°micamente la amplitud de dither cuando el ciclo de trabajo efectivo
determinado es superior al 100% o inferior al 0%, a fin de mantener la simetr√≠a de la se√±al de
dither.
Ejemplos:
Con una amplitud de dither del 10% y un ciclo de trabajo del 50%, el tiempo de conexi√≥n
efectivo de la secuencia de salida fluct√∫a peri√≥dicamente entre el 40% y el 60%.
Con una amplitud de dither del 10% y un ciclo de trabajo del 95%, el tiempo de conexi√≥n
efectivo de la secuencia de salida fluct√∫a peri√≥dicamente entre el 90% y el 100%.
La amplitud de dither tambi√©n puede modificarse con la interfaz de control introduciendo un
nuevo valor en SLOT como n√∫mero entero (UDINT). En este caso puede seleccionar, por
medio del bit de control MODE_SLOT, si la modificaci√≥n debe aplicarse una sola vez o de
modo c√≠clico:
MODE_SLOT = 0

Modificaci√≥n √∫nica:
En cuanto se escribe el valor 6D en el correspondiente byte de salida, el
valor de SLOT se aplica una sola vez como amplitud de dither.
Las modificaciones a trav√©s de SLOT se hacen efectivas tras una parada
y reinicio del dithering.

MODE_SLOT = 1

Modificaci√≥n c√≠clica:
Si se escribe el valor 22D en el correspondiente byte de salida, el valor
actual de SLOT se aplica c√≠clicamente como amplitud de dither.
Las modificaciones a trav√©s de SLOT se hacen efectivas tras una parada
y reinicio del dithering.

Duraci√≥n del periodo de dither
La duraci√≥n del periodo de dither es la duraci√≥n del periodo de la se√±al de dither. El valor debe
ser al menos cuatro veces mayor que la duraci√≥n del periodo de la se√±al PWM y superior a
2 ms. El valor m√°ximo es 100 ms. Si se rebasa el rango de valores, se utiliza una duraci√≥n del
periodo de dither de 100 ms.
La duraci√≥n del periodo de dither utilizada por el m√≥dulo es siempre un m√∫ltiplo par de la
duraci√≥n del periodo de la se√±al PWM. El m√≥dulo adapta el valor asignado de duraci√≥n del
periodo de modo que se obtenga el m√∫ltiplo par m√°s cercano.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1259

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
La duraci√≥n del periodo de dither tambi√©n puede modificarse con la interfaz de control
introduciendo un nuevo valor en SLOT como n√∫mero entero (UDINT). En este caso puede
seleccionar, por medio del bit de control MODE_SLOT, si la modificaci√≥n debe aplicarse una
sola vez o de modo c√≠clico:
MODE_SLOT = 0

Modificaci√≥n √∫nica:
En cuanto se escribe el valor 7D en el correspondiente byte de salida, el
valor de SLOT se aplica una sola vez como duraci√≥n del periodo del dither.
Las modificaciones a trav√©s de SLOT se hacen efectivas tras una parada
y reinicio del dithering.

MODE_SLOT = 1

Modificaci√≥n c√≠clica:
Si se escribe el valor 23D en el correspondiente byte de salida, el valor
actual de SLOT se aplica c√≠clicamente como duraci√≥n del periodo de dither.
Las modificaciones a trav√©s de SLOT se hacen efectivas tras una parada
y reinicio del dithering.

Nota
Si, durante una secuencia de salida, se incrementa la duraci√≥n del periodo de la se√±al PWM
de modo que la duraci√≥n del periodo del dither sea menos de cuatro veces mayor, se desactiva
la se√±al de dither.
Nota
Modo is√≥crono
En modo is√≥crono, obtendr√° el mejor resultado posible si ajusta como duraci√≥n del periodo del
dither un m√∫ltiplo par entero del ciclo de aplicaci√≥n.

Pendiente rampa de conexi√≥n y rampa de desconexi√≥n dither
Pendiente rampa de conexi√≥n dither: Este par√°metro es la pendiente de la rampa de conexi√≥n
de la amplitud Dither para un incremento te√≥rico de la amplitud de 0% a 100%.
Pendiente rampa de desconexi√≥n dither: Con este par√°metro se define la pendiente de la
rampa de desconexi√≥n de la amplitud Dither para un descenso te√≥rico de la amplitud de 100%
a 0%.
El rango de valores abarca en cada caso de 0 a 30000 ms. Si se rebasa el rango de valores,
se utiliza una pendiente de 30000 ms.
La pendiente influye en cada caso en el tiempo de rampa efectivo. Ejemplo: con una amplitud
Dither del 10% y una pendiente de 2500 ms/100% se obtiene el siguiente tiempo de rampa
efectivo:
10 % √ó 2500 ms/100 % = 250 ms
La pendiente de la rampa de conexi√≥n y de la rampa de desconexi√≥n tambi√©n pueden
modificarse conjuntamente con la interfaz de control introduciendo un nuevo valor en SLOT

1260

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
como n√∫mero entero (dos INT). En este caso puede seleccionar, por medio del bit de control
MODE_SLOT, si la modificaci√≥n debe aplicarse una sola vez o de modo c√≠clico:
MODE_SLOT = 0

Modificaci√≥n √∫nica:
En cuanto se escribe el valor 5D en el correspondiente byte de salida, el
valor de SLOT (LOWWORD) se aplica una sola vez como pendiente de la
rampa de conexi√≥n y el valor de SLOT (HIGHWORD) se aplica una sola
vez como pendiente de la rampa de desconexi√≥n.
Las modificaciones a trav√©s de SLOT se hacen efectivas tras una parada
y reinicio del dithering.

MODE_SLOT = 1

Modificaci√≥n c√≠clica:
Si se escribe el valor 21D en el correspondiente byte de salida, el valor
actual de SLOT (LOWWORD) se aplica c√≠clicamente como pendiente de
la rampa de conexi√≥n y el valor de SLOT (HIGHWORD) como pendiente
de la rampa de desconexi√≥n.
Las modificaciones a trav√©s de SLOT se hacen efectivas tras una parada
y reinicio del dithering.

Iniciar y parar dithering
El dithering se inicia con la rampa de conexi√≥n parametrizada en cuanto, durante la secuencia
de salida, se activa el bit DITHER en la interfaz de control (P√°gina 1272) y se inicia una nueva
duraci√≥n del periodo de dither. Tras el inicio del dithering se activa el bit STS_DITHER en
la interfaz de respuesta (P√°gina 1275).
En cuanto se desactiva el bit DITHER, se inicia inmediatamente la rampa de desconexi√≥n
parametrizada con la duraci√≥n del periodo de dither. Una vez finalizada la rampa de
desconexi√≥n, se desactiva el bit STS_DITHER.
En caso de interrumpirse la secuencia de salida, se cancela el dithering y se desactiva el bit
STS_DITHER.
La figura siguiente muestra un ejemplo de secuencia de salida con un ciclo de trabajo del 50%
sin dithering.

Se√±al PWM
Dithering
Se√±al en la salida
digital
DITHER



STS_DITHER



La figura siguiente muestra un ejemplo de secuencia de salida con las siguientes propiedades:
‚óè Ciclo de trabajo = 50%
‚óè Duraci√≥n del periodo de dither = 6 √ó duraci√≥n del periodo de la se√±al PWM
‚óè Sin rampa de conexi√≥n/desconexi√≥n

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1261

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Se√±al PWM

Dithering
Se√±al en la salida digital

DITHER
STS_DITHER

La figura siguiente muestra un ejemplo de secuencia de salida con las siguientes propiedades:
‚óè Ciclo de trabajo = 50%
‚óè Duraci√≥n del periodo de dither = 6 √ó duraci√≥n del periodo de la se√±al PWM
‚óè Con rampa de conexi√≥n
Se√±al PWM

Rampa de conexi√≥n

Dithering

Se√±al en la salida digital

DITHER
STS_DITHER

La figura siguiente muestra un ejemplo de secuencia de salida con las siguientes propiedades:
‚óè Ciclo de trabajo = 50%
‚óè Duraci√≥n del periodo de dither = 6 √ó duraci√≥n del periodo de la se√±al PWM
‚óè Con rampa de desconexi√≥n
Se√±al PWM

Dithering

Rampa de desconexi√≥n

Fin de la
rampa

Se√±al en la salida digital

1

DITHER

1

STS_DITHER

1262

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Medici√≥n/regulaci√≥n de intensidad
Medici√≥n de intensidad
El m√≥dulo tecnol√≥gico mide la intensidad de carga en la salida digital. El valor medido de
intensidad se devuelve en la interfaz de respuesta (P√°gina 1275) en el valor
MEASURED_CURRENT en formato de valor anal√≥gico S7.
Con el bit de respuesta STS_ENABLE activado, los valores medidos v√°lidos est√°n disponibles
tras el primer periodo de la secuencia de salida. El valor medido que se devuelve es un
promedio de los valores medidos registrados durante al menos un periodo. Si no hay ning√∫n
valor medido v√°lido disponible, se devuelve el valor 32767D.
Con el dithering activo, el valor medio hace referencia a un periodo de dither completo.
Nota
Para poder utilizar la medici√≥n de intensidad, la funci√≥n salida High Speed debe estar
desactivada.

Rango de medici√≥n y precisi√≥n
El rango de medici√≥n y la precisi√≥n dependen de la configuraci√≥n de canales:
Valor medido
27648D

Valor medido m√°ximo
Precisi√≥n3
32511D
Duraci√≥n del pe‚Äê Duraci√≥n del pe‚Äê
riodo >333 Œºs
riodo <333 Œºs

Modo bicanal

2 A1

2,37 A2

¬±40 mA

-40 mA ...
+100 mA

Modo monocanal
(circuito paralelo)

4 A1

4,74 A2

¬±80 mA

-80 mA ...
+200 mA

1

Solo puede excederse durante un tiempo breve.

2

En caso de excederse este valor de intensidad, se activa el bit de respuesta ERR_DQA.

3

Con duraci√≥n del periodo constante en el correspondiente periodo de medici√≥n

Regulaci√≥n de intensidad
La funci√≥n de regulaci√≥n de intensidad permite controlar de forma proporcional la energ√≠a
transferida a una carga inductiva o resistiva. La regulaci√≥n de intensidad excluye
autom√°ticamente los efectos t√©rmicos.
La consigna de intensidad viene dada por el programa de usuario. El m√≥dulo controla el ciclo
de trabajo de la se√±al PWM con arreglo a la consigna, mientras que la respuesta depende de
los par√°metros de PID.
El regulador PID compara entre s√≠ la consigna y el valor medido de la intensidad de carga. Si
la diferencia resultante se encuentra fuera de una banda muerta sim√©trica, se calcula una
respuesta del regulador teniendo en cuenta las acciones activadas del regulador PID
(proporcional, integral y/o diferencial).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1263

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
La variable manipulada calculada se limita hacia abajo y hacia arriba con valores definidos.
Cuando la variable manipulada alcanza un l√≠mite, el programa de usuario lo lee a trav√©s de los
bits QLMN_HLM y QLMN_LLM en la interfaz de respuesta (P√°gina 1275).
Los par√°metros de regulaci√≥n de intensidad se ajustan en la configuraci√≥n hardware. El valor
OUTPUT_VALUE de la interfaz de control (P√°gina 1272) se interpreta como consigna de
intensidad relativa al valor de referencia de intensidad.
La figura siguiente muestra el funcionamiento de la regulaci√≥n de intensidad PID.
Valor de referencia
de corriente

/

OUTPUT_VALUE

x

Consigna: SP_INT

Formato de salida
DEADBAND
+
Valor de proceso: PV_IN

Valor medido intensidad

Diferencia

X

Ganancia

Ancho zona
muerta

1
0.0

P_SEL

0
1

0.0

Duraci√≥n del periodo

Anti-Windup

INT
I_SEL

0

LMNLIMIT

Valor adaptado:
LMN

+

/

x

Variable manipulada:
Duraci√≥n del impulso

TI
Variables manipuladas
l√≠mite superior/inferior
DIF
1
0.0

Valor de referencia
de corriente

D_SEL

0

Fuente: Juego de par√°metros

TD
TM_LAG

Fuente: Interfaz de control
Fuente: Interna del m√≥dulo

P_Sel

Activaci√≥n de la acci√≥n proporcional del algoritmo PID

I_Sel

Activaci√≥n de la acci√≥n integral del algoritmo PID

D_Sel

Activaci√≥n de la acci√≥n diferencial del algoritmo PID

Valor de referencia de corrien‚Äê Valor m√°ximo como valor de referencia para la consigna de intensidad. Se recomienda usar
te (mA)
como ajuste el valor de la intensidad de carga medido con la regulaci√≥n de intensidad
desactivada y un ciclo de trabajo del 100%.
Ancho zona muerta (ŒºA)

Diferencia entre la intensidad de salida y la consigna de intensidad, dentro de la cual no se
corrige. La diferencia se considera tanto por encima como por debajo de la consigna de
intensidad.

Variable manipulada l√≠mite su‚Äê L√≠mite superior de regulaci√≥n
perior (valor anal√≥gico S7)
Variable manipulada l√≠mite in‚Äê
ferior (valor anal√≥gico S7)

1264

L√≠mite inferior de regulaci√≥n

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Ganancia

Factor de ganancia para la acci√≥n P del algoritmo PID

TI (s)

Tiempo de integraci√≥n; periodo utilizado por la acci√≥n integral del algoritmo PID.
Si TI es menor que el tiempo de ciclo del regulador, TI se ajusta internamente al valor del
tiempo de ciclo.

TD (s)

Tiempo derivativo; periodo utilizado por la acci√≥n diferencial del algoritmo PID.
Si TD es menor que el tiempo de ciclo del regulador, TI se ajusta internamente al valor del
tiempo de ciclo.

TM_LAG (s)

Tiempo de retardo de la acci√≥n diferencial del algoritmo PID.
Si TI es menor que la mitad del tiempo de ciclo del regulador, TI se ajusta internamente a la
mitad del valor del tiempo de ciclo.

El ajuste predeterminado de los par√°metros del regulador se elige con criterio conservador
para conseguir una operaci√≥n estable. Para una regulaci√≥n din√°mica de v√°lvulas, optimice los
distintos par√°metros de acuerdo con las condiciones de su instalaci√≥n. Hay que tener en
cuenta especialmente que un factor de ganancia mayor y un tiempo integral m√°s bajo dan lugar
a respuestas m√°s r√°pidas a los cambios de la consigna.
Tiempo de ciclo del regulador
Con el dithering desactivado, el tiempo de ciclo interno del regulador equivale a la duraci√≥n del
periodo de PWM. Con el dithering activado, el tiempo de ciclo interno del regulador equivale a
la duraci√≥n del periodo de dither.
Restablecimiento del regulador PID
Los datos internos del regulador se restablecen en los siguientes casos:
‚óè Desactivaci√≥n del bit de control SW_ENABLE
‚óè Transmisi√≥n de un nuevo juego de par√°metros al m√≥dulo
M√°s informaci√≥n
Encontrar√° m√°s informaci√≥n sobre el regulador PID en el manual de funciones Regulaci√≥n PID
(https://support.industry.siemens.com/cs/ww/es/view/108210036), p. ej., en el cap√≠tulo
CONT_C.

Duraci√≥n m√≠nima de impulso y pausa m√≠nima entre impulsos
La duraci√≥n m√≠nima de impulso y la pausa m√≠nima entre impulsos son los valores m√≠nimos de
duraci√≥n de impulso y de pausa entre impulsos que deben emitirse.
El m√≥dulo suprime los impulsos y pausas cuya duraci√≥n no alcanza la duraci√≥n m√≠nima de
impulso. El m√≥dulo ajusta al valor de duraci√≥n del periodo todas las duraciones de impulso
cuya distancia respecto a la duraci√≥n del periodo sea menor que la pausa m√≠nima entre
impulsos. Esto permite evitar efectos no deseados cuando el actuador conectado no es capaz
de responder adecuadamente a cambios de se√±al tan breves.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1265

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
'XUDFL¬µQGHOLPSXOVR

'XUDFL¬µQGHOSHULRGR
'XUDFL¬µQGHOSHULRGR
‡≤•3DXVDP¬ØQLPDHQWUH
LPSXOVRV

'XUDFL¬µQP¬ØQLPDGH
LPSXOVR



&LFORGHWUDEDMR
‡≤Ω

Figura 5-3

‡≤Ω

Modulaci√≥n de la duraci√≥n de impulso

La duraci√≥n m√≠nima de impulso se ajusta en la configuraci√≥n hardware entre 0 y 85 s con una
precisi√≥n de 1 ¬µs. El valor ajustado vale tambi√©n para la pausa m√≠nima entre impulsos.
Nota
Regulaci√≥n de intensidad
Si se utiliza la regulaci√≥n de intensidad, la duraci√≥n m√≠nima de impulso parametrizada no tiene
validez.
Nota
Dithering
Si se utiliza dithering sin regulaci√≥n de intensidad, la duraci√≥n m√≠nima de impulso
parametrizada se hace efectiva. En este caso se reduce el solapamiento de la se√±al PWM para
que la duraci√≥n de impulso efectiva se mantenga dentro del rango v√°lido.

Salida High Speed
La funci√≥n Salida High Speed permite una frecuencia de salida m√°xima de 100 kHz con una
intensidad de salida m√°xima de 100 mA. Las salidas High Speed generan flancos muy
verticales. La salida High Speed genera se√±ales con una frecuencia m√°s elevada, pero ofrece
una menor corriente de carga m√°xima.
La salida High Speed solo est√° disponible en el modo bicanal y sin regulador de intensidad.

1266

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
La tabla siguiente muestra el rango de valores de la duraci√≥n de impulso, la duraci√≥n del
periodo y la frecuencia en funci√≥n de la salida High Speed:
Valor m√≠nimo

Duraci√≥n del im‚Äê
pulso
Duraci√≥n del
periodo
Frecuencia

Valor m√°ximo

Salida High Speed
desactivada

Salida High Speed
activada

10 Œºs

1,5 Œºs

100 Œºs

10 Œºs
0,02 Hz

Salida High
Speed desactiva‚Äê
da

Salida High
Speed activada

85000000 Œºs (= 85 s)

10 kHz

100 kHz

Configuraci√≥n
Introducci√≥n
El m√≥dulo tecnol√≥gico se configura y parametriza con el software de configuraci√≥n.
Las funciones del m√≥dulo tecnol√≥gico se controlan con el programa de usuario a trav√©s de la
interfaz de control y respuesta.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1267

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Entorno del sistema
El m√≥dulo tecnol√≥gico puede utilizarse en los siguientes entornos de sistema:
Aplicaciones posibles

Componentes necesarios

Software de configuraci√≥n

En el programa de usuario

Operaci√≥n centralizada
con una CPU 151xSP

‚óè Sistema de automatizaci√≥n
ET 200SP

STEP 7 (TIA Portal):

Acceso directo a la inter‚Äê
faz de control y respuesta
en los datos IO

‚óè TM Pulse 2x24V
Operaci√≥n descentraliza‚Äê ‚óè Sistema de automatizaci√≥n
da con una CPU S7-1500
S7-1500
‚óè Sistema de periferia
descentralizada ET 200SP

Configuraci√≥n del dispositivo y
ajuste de par√°metros en la confi‚Äê
guraci√≥n hardware
STEP 7 (TIA Portal):
Configuraci√≥n del dispositivo y
ajuste de par√°metros en la confi‚Äê
guraci√≥n hardware

‚óè TM Pulse 2x24V
Operaci√≥n descentraliza‚Äê ‚óè Sistema de automatizaci√≥n
da con una CPU
S7-300/400
S7-300/400
‚óè Sistema de periferia
descentralizada ET 200SP
‚óè TM Pulse 2x24V
Operaci√≥n descentraliza‚Äê ‚óè Sistema de automatizaci√≥n
da con PROFINET IO en
de otro fabricante
un sistema de otro fabri‚Äê
‚óè Sistema de periferia
cante
descentralizada ET 200SP
‚óè TM Pulse 2x24V
Operaci√≥n descentraliza‚Äê ‚óè Sistema de automatizaci√≥n
da con PROFIBUS DP
de otro fabricante
en un sistema de otro fa‚Äê
‚óè Sistema de periferia
bricante
descentralizada ET 200SP
‚óè TM Pulse 2x24V

STEP 7 (TIA Portal):
Configuraci√≥n del dispositivo y
ajuste de par√°metros en la confi‚Äê
guraci√≥n hardware
STEP 7:
Configuraci√≥n del dispositivo y
ajuste de par√°metros con HSP
Software de configuraci√≥n de otro
fabricante:
Configuraci√≥n del dispositivo y
ajuste de par√°metros con archivo
GSD
Software de configuraci√≥n de otro
fabricante:
Archivo GSD, configuraci√≥n del
dispositivo y ajuste de par√°metros
a trav√©s del juego de datos 128

Hardware Support Packages (HSP)
STEP 7
Los Hardware Support Packages (HSP) pueden descargarse de Internet (https://
support.industry.siemens.com/cs/ww/es/view/23183356).

Archivo GSD
El archivo GSD correspondiente al sistema de periferia descentralizada ET 200SP est√°
disponible para su descarga en Internet:
‚óè Archivo GSD PROFINET IO (http://support.automation.siemens.com/WW/view/es/
57138621)
‚óè Archivo GSD PROFIBUS DP (http://support.automation.siemens.com/WW/view/es/
73016883)

1268

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Reacci√≥n a STOP de la CPU
La respuesta del canal en caso de STOP de la CPU se ajusta en los par√°metros de la
configuraci√≥n del dispositivo.
Tabla 5-4

Respuesta del canal en caso de STOP de la CPU

Opci√≥n

Significado

Aplicar valor susti‚Äê Hasta la siguiente transici√≥n de STOP a RUN de la CPU, el canal emite por las
tutivo
salidas digitales los valores sustitutivos parametrizados. El valor sustitutivo 1 solo
puede parametrizarse para una de las dos salidas digitales.
La secuencia de salida en curso finaliza y se desactiva el bit de respuesta
STS_ENABLE.
Despu√©s de una transici√≥n de STOP a RUN, el m√≥dulo tecnol√≥gico pasa a su
estado de arranque. Antes de poder iniciar una nueva salida de impulsos, debe
desactivarse el bit de control SW_ENABLE.
Continuar

El canal contin√∫a trabajando.
Las salidas digitales contin√∫an conmut√°ndose con arreglo a la parametrizaci√≥n.
As√≠, la secuencia de salida en curso contin√∫a. Si se ha parametrizado la habilita‚Äê
ci√≥n hardware, tambi√©n se pueden iniciar nuevas secuencias de salida a trav√©s de
DIn.0.
Tras una transici√≥n de STOP a RUN, la configuraci√≥n del m√≥dulo tecnol√≥gico no se
desactiva.

Ajuste de par√°metros
Las propiedades del m√≥dulo tecnol√≥gico se establecen mediante diferentes par√°metros. En
funci√≥n de los ajustes, no todos los par√°metros est√°n disponibles. Si la parametrizaci√≥n se
efect√∫a en el programa de usuario, los par√°metros se transfieren al m√≥dulo con la instrucci√≥n
"WRREC" por medio del juego de datos 128.
En este modo de operaci√≥n, los par√°metros del m√≥dulo se ajustan de la siguiente manera:
Ajuste de par√°metros me‚Äê
diante...

Procedimiento b√°sico

Configuraci√≥n hardware en
STEP 7 (TIA Portal)

1. Inserte el m√≥dulo desde la carpeta "M√≥dulos tecnol√≥gicos" del
cat√°logo de hardware.
2. Ajuste el modo de operaci√≥n "Modulaci√≥n por ancho de impulso
PWM" y los restantes par√°metros del m√≥dulo en la configuraci√≥n
hardware.
3. Cargue el proyecto en la CPU.

Configuraci√≥n hardware en
STEP 7 con HSP

1. Instale el archivo HSP correspondiente.
A continuaci√≥n encontrar√° el m√≥dulo en el cat√°logo de hardware,
bajo "ET 200SP".
2. Ajuste el modo de operaci√≥n "Modulaci√≥n por ancho de impulso
PWM" y los restantes par√°metros del m√≥dulo en la configuraci√≥n
hardware.
3. Cargue el proyecto en la CPU.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1269

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Ajuste de par√°metros me‚Äê
diante...

Procedimiento b√°sico

Configuraci√≥n hardware con
archivo GSD para la opera‚Äê
ci√≥n descentralizada en
PROFINET IO

1. Instale el archivo GSD PROFINET actual.
A continuaci√≥n encontrar√° el m√≥dulo en el cat√°logo de hardware en
"Otros dispositivos de campo > PROFINET IO > I/O".
2. Ajuste el modo de operaci√≥n "Modulaci√≥n por ancho de impulso
PWM" y los restantes par√°metros del m√≥dulo en la configuraci√≥n
hardware.
3. Cargue el proyecto en la CPU.

Configuraci√≥n hardware con
archivo GSD para la opera‚Äê
ci√≥n descentralizada en
PROFIBUS DP

1. Instale el archivo GSD PROFIBUS actual.
A continuaci√≥n encontrar√° el m√≥dulo en el cat√°logo de hardware en
"Otros dispositivos de campo > PROFIBUS DP > I/O".
2. Cargue el proyecto en la CPU.
Los par√°metros del m√≥dulo se cargar√°n con los ajustes
predeterminados (ver la tabla siguiente).
3. Ajuste los par√°metros en el programa de usuario a trav√©s del juego
de datos 128.

Par√°metros del TM Pulse 2x24V en el modo de operaci√≥n "Modulaci√≥n por ancho de impulso PWM"
La tabla siguiente muestra los par√°metros del m√≥dulo.
En la columna "Rango", los ajustes predeterminados de los par√°metros aparecen marcados
en negrita.
Tabla 5-5

Par√°metros ajustables
Par√°metro

Configuraci√≥n de canal1

Rango de valores
‚óè 2 canales (2 A):

Rango efectivo
M√≥dulo

‚óè 1 canal (4 A)
Reacci√≥n a STOP de la CPU

‚óè Aplicar valor sustitutivo

Canal

‚óè Continuar
Valor sustitutivo de DQA

‚óè 0

Canal

‚óè 1
Valor sustitutivo de DQB

‚óè 0

Canal

‚óè 1
Diagn√≥stico agrupado

‚óè Desactivado

Canal

‚óè Activado
Diagn√≥stico DQA

‚óè Desactivado

Canal

‚óè Activado
Diagn√≥stico DQB

‚óè Desactivado

Canal

‚óè Activado
Salida High Speed (0,1 A)

‚óè Desactivado

Canal

‚óè Activado
Funci√≥n DI

‚óè Entrada

Canal

‚óè Habilitaci√≥n HW

1270

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Par√°metro
Retardo a la entrada para entra‚Äê
das digitales

Rango de valores
‚óè Ninguno

Rango efectivo
Canal

‚óè 0,05 ms
‚óè 0,1 ms
‚óè 0,4 ms
‚óè 0,8 ms
‚óè 1,6 ms
‚óè 3,2 ms
‚óè 12,8 ms
‚óè 20 ms

Formato de salida

‚óè Salida anal√≥gica S7

Canal

‚óè 1/100
‚óè 1/1000
‚óè 1/10000
Duraci√≥n m√≠nima de impulso

0...85000000 Œºs

Canal

Duraci√≥n del periodo

10...2000000...85000000 Œºs

Canal

Duraci√≥n del periodo real

se calcula autom√°ticamente (solo lectura)

Canal

Retardo a la conexi√≥n para salida
de impulso

0...85000000 Œºs

Canal

Dithering

‚óè Desactivado

Canal

‚óè Activado
Pendiente rampa de conexi√≥n dit‚Äê
her

0...30000 ms

Canal

Pendiente rampa de desconexi√≥n
dither

0...30000 ms

Canal

Amplitud de dither

0,0...5,0...50%

Canal

Duraci√≥n del periodo de dither

2000...50000...100000 Œºs

Canal

Frecuencia de dither

se calcula autom√°ticamente (solo lectura)

Canal

Regulaci√≥n de intensidad

‚óè Desactivado

Canal

‚óè Activado
Activar acci√≥n P

‚óè Desactivado

Canal

‚óè Activado
Activar acci√≥n I

‚óè Desactivado

Canal

‚óè Activado
Activar acci√≥n D

‚óè Desactivado

Canal

‚óè Activado
Valor de referencia de corriente

0...2000 mA (modo bicanal)

Canal

0...4000 mA (modo monocanal)
Ancho zona muerta

0...65535 ŒºA

Canal

Variable manipulada l√≠mite supe‚Äê
rior

1...27648

Canal

Variable manipulada l√≠mite inferior 0...27647

Canal

Ganancia proporcional

Canal

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

0,0000...2,0000...7,9228 √ó 1028

1271

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Par√°metro

Rango de valores

Rango efectivo

Tiempo integrativo

0,0000...20,0000...7,9228 √ó 1028 s

Canal

Tiempo derivativo

0,0000...10,0000...7,9228 √ó 1028 s

Canal

Tiempo de retardo de la acci√≥n D

0,0000...2,0000...7,9228 √ó 10 s

Canal

28

En la configuraci√≥n con HSP para STEP 7 o con archivo GSD, se establece la configuraci√≥n de
canales seleccionando el nombre del m√≥dulo.

1

Nota
Configuraci√≥n con GSD para PROFIBUS
En la configuraci√≥n con GSD para PROFIBUS, las posibilidades de parametrizaci√≥n no est√°n
disponibles. A los par√°metros del m√≥dulo se asignan los valores predeterminados. Ajuste los
par√°metros en el programa de usuario a trav√©s del juego de datos 128.

√Årea de direcciones
Espacio de direcciones del m√≥dulo tecnol√≥gico
Tabla 5-6

Alcance de las direcciones de entrada y salida
Entradas

Salidas

Alcance por canal tecnol√≥gico

8 bytes

12 bytes

Alcance en modo monocanal

8 bytes

12 bytes

Alcance en modo bicanal

16 bytes

24 bytes

Interfaz de control y respuesta
Nota
En Internet (https://support.industry.siemens.com/cs/ww/es/view/109482396) puede
descargarse una librer√≠a con los tipos de datos PLC (LPD) para STEP 7 (TIA Portal) y SIMATIC
S7-1200/S7-1500.

Asignaci√≥n de la interfaz de control
El programa de usuario controla el comportamiento del m√≥dulo tecnol√≥gico a trav√©s de la
interfaz de control.

1272

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Interfaz de control por canal
La siguiente tabla muestra la asignaci√≥n de la interfaz de control:
Offset de
byte res‚Äê
pecto de
la direc‚Äê
ci√≥n ini‚Äê
cial
Canal
0/1
‚Üì ‚Üì

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

0
‚Ä¶
3

12
‚Ä¶
15

UDINT: Ciclo de trabajo o consigna de intensidad

4
‚Ä¶
7

16
‚Ä¶
19

UDINT: Valor de carga

8

20

9

21

10

22

11

23

Bit 1

Bit 0

OUTPUT_VALUE

SLOT

Reservado
Reservado

MODE_
SLOT
DITHER

SET_DQB

LD_SLOT
SET_DQA

Reservado

Reservado

TM_
CTRL_DQ

SW_
ENABLE
RES_
ERROR

Reservado

Nota
El canal 1 solo est√° disponible en el modo bicanal del m√≥dulo.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1273

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Bit de control/valor

Explicaciones

OUTPUT_VALUE

Si no se utiliza la regulaci√≥n de intensidad, este valor define el ciclo de trabajo (relaci√≥n impulsopausa, tiempo de conexi√≥n). Las modificaciones del ciclo de trabajo se hacen efectivas con el
pr√≥ximo flanco ascendente en DQn.A.
Si se utiliza la regulaci√≥n de intensidad, el m√≥dulo controla el ciclo de trabajo y OUTPUT_VALUE
permite definir la consigna de intensidad relativa al valor de referencia de corriente.
Rango de valores del ciclo de trabajo o de la consigna de intensidad:
‚óè con formato de salida "1/100": de 0 a 100D
‚óè con formato de salida "1/1000": de 0 a 1000D
‚óè con formato de salida "1/10000": de 0 a 10000D
‚óè con formato de salida "Salida anal√≥gica de S7": de 0 a 27648D
En caso de rebase por exceso del rango de valores, se activa el bit de respuesta ERR_OUT_VAL
y se utiliza el valor m√°ximo admisible del formato de salida.

SLOT

Con este valor se define el valor de carga.
Rango de valores:
‚óè Duraci√≥n del periodo en Œºs: de 10 a 85000000D
‚óè Retardo a la conexi√≥n en Œºs: de 0 a 85000000D
‚óè Rampa de conexi√≥n y de desconexi√≥n dither en ms: de 0 a 30000D
‚óè Amplitud de dither en ‚Ä∞: de 0 a 500D
‚óè Duraci√≥n del periodo de dither en Œºs: de 2000 a 100000D
Con el bit de control MODE_SLOT se define si una modificaci√≥n debe aplicarse una sola vez o
de modo c√≠clico.
Los valores no v√°lidos dan lugar a la activaci√≥n del bit de respuesta ERR_LD (con MODE_SLOT
= 0) o ERR_SLOT_VAL (con MODE_SLOT = 1).

MODE_SLOT

Con este bit se define si una modificaci√≥n en SLOT debe aplicarse una sola vez o de modo c√≠clico.
0 significa: Si se escribe el valor en cuesti√≥n en el correspondiente byte de salida, el valor de
SLOT se aplica una sola vez y se mantiene hasta la pr√≥xima modificaci√≥n. Las modificaciones por
medio de SLOT se hacen efectivas en la pr√≥xima secuencia de salida. Tras un nuevo arranque
del m√≥dulo, el valor se sobrescribe con el valor ajustado en la configuraci√≥n hardware.
1 significa: Si se escribe el valor en cuesti√≥n en el correspondiente byte de salida, el valor actual
de SLOT se aplica c√≠clicamente. Las modificaciones por medio de SLOT se hacen efectivas en
la pr√≥xima secuencia de salida.

LD_SLOT

Con esta solicitud de carga se especifica el significado del valor en SLOT:
‚óè 0000B significa: Ninguna acci√≥n, estado de reposo
‚óè 0001B significa: Duraci√≥n del periodo en Œºs
‚óè 0010B significa: Retardo a la conexi√≥n en Œºs
‚óè 0101B significa: Rampa de conexi√≥n de dither (LOWWORD), y rampa de desconexi√≥n de
dither (HIGHWORD) en ms
‚óè 0110B significa: Amplitud de dither en ‚Ä∞
‚óè 0111B significa: Duraci√≥n del periodo de dither en Œºs
Todos los valores no indicados son no v√°lidos y dan lugar a la activaci√≥n del bit de respuesta
ERR_LD (si MODE_SLOT = 0) o ERR_SLOT_VAL (si MODE_SLOT = 1).

1274

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Bit de control/valor

Explicaciones

DITHER

Con este bit se activa la superposici√≥n de la se√±al de dither sobre la se√±al PWM.
‚óè 0 ‚Üí 1 significa: El dithering se inicia con la rampa de conexi√≥n parametrizada
‚óè 1 ‚Üí 0 significa: El dithering finaliza con la rampa de desconexi√≥n parametrizada

SET_DQA

Con este bit se activa la salida digital DQn.A cuando TM_CTRL_DQ y SET_DQB est√°n ajustados
a 0.

SET_DQB

Con este bit se activa la salida digital DQn.B cuando TM_CTRL_DQ y SET_DQA est√°n ajustados
a 0.

TM_CTRL_DQ

Con este bit se habilita la funci√≥n tecnol√≥gica de la salida digital.
‚óè 0 significa: SET_DQA y SET_DQB determinan estados de DQn.A y DQn.B
‚óè 1 significa: La secuencia de salida determina el estado de DQn.A; DQn.B siempre es 0.
Con este bit se activa la habilitaci√≥n software. Si se utiliza la habilitaci√≥n hardware, se combina
con la habilitaci√≥n software.

SW_ENABLE

‚óè 0 significa: Finalizar salida
‚óè 1 significa: Iniciar salida
El uso de la habilitaci√≥n hardware se activa mediante parametrizaci√≥n. El control de la habilita‚Äê
ci√≥n hardware se realiza externamente a trav√©s de la entrada digital DIn.0.
RES_ERROR

Con este bit se desactivan los siguientes bits de respuesta cuando hay errores presentes:
‚óè ERR_24V
‚óè ERR_DQA
‚óè ERR_DQB
‚óè ERR_LD

Reservado

Los bits de reserva deben estar ajustados a 0.

Asignaci√≥n de la interfaz de respuesta
El programa de usuario recibe valores actuales e informaci√≥n de estado del m√≥dulo
tecnol√≥gico a trav√©s de la interfaz de respuesta.

Interfaz de respuesta por canal
La siguiente tabla muestra la asignaci√≥n de la interfaz de respuesta:
Offset de
byte res‚Äê
pecto de
la direc‚Äê
ci√≥n ini‚Äê
cial
Canal
0/1
‚Üì ‚Üì
0

8

1

9

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0

ERR_
SLOT_VAL

ERR_
OUT_VAL

ERR_DQB

ERR_DQA

Reservado

ERR_LD

ERR_24V

ERR_PWR

STS_SW_
ENABLE

STS_
READY

Reservado

STS_LD_
SLOT

Reservado

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Reservado

1275

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Offset de
byte res‚Äê
pecto de
la direc‚Äê
ci√≥n ini‚Äê
cial
Canal
0/1
‚Üì ‚Üì
2

Bit 7

Bit 6

10

Reservado

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0

STS_
DITHER

STS_DI

STS_DQB

STS_DQA

STS_
ENABLE

QLMN_HL
M

QLMN_LLM

3

11

Reservado

4
...
5

12
...
13

MEASURED_CURRENT

6

14

7

15

Reservado
Reservado

Nota
El canal 1 solo est√° disponible en el modo bicanal del m√≥dulo.

Bit de respuesta/
Valor

Explicaciones

ERR_SLOT_VAL

Este bit indica que el valor de SLOT o LD_SLOT no es v√°lido (si MODE_SLOT = 1) y no se ha
aceptado.
Cuando el m√≥dulo recibe un valor v√°lido de la interfaz de control, se desactiva ERR_SLOT_VAL
autom√°ticamente.

ERR_OUT_VAL

Este bit indica que el valor de OUTPUT_VALUE no es v√°lido.
Cuando el m√≥dulo recibe un valor v√°lido de la interfaz de control, se desactiva ERR_OUT_VAL
autom√°ticamente.

ERR_DQA

Este bit indica un cortocircuito o una sobrecarga en la salida DQn.A. Si se ha habilitado la alarma de
diagn√≥stico "Diagn√≥stico DQA", este error dispara la alarma de diagn√≥stico "Error en salidas digita‚Äê
les".
El bit se desactiva despu√©s de acusar el error con RES_ERROR.

ERR_DQB

Este bit indica un cortocircuito o una sobrecarga en la salida DQn.B o el intento de activar simult√°‚Äê
neamente los bits de control SET_DQA y SET_DQB. Si se ha habilitado la alarma de diagn√≥stico
"Diagn√≥stico DQB", este error dispara la alarma de diagn√≥stico "Error en salidas digitales".
El bit se desactiva despu√©s de acusar el error con RES_ERROR.

ERR_LD

Este bit indica que el valor de SLOT o LD_SLOT (si MODE_SLOT = 0) no es v√°lido y no se ha
aceptado.
El bit se desactiva despu√©s de acusar el error con RES_ERROR.

ERR_24V

Este bit indica un cortocircuito o una sobrecarga en la salida 24VDC. Si se han habilitado las alarmas
de diagn√≥stico, este error dispara la alarma de diagn√≥stico "Cortocircuito/sobrecarga en la alimen‚Äê
taci√≥n de sensores externa".
El bit se desactiva despu√©s de acusar el error con RES_ERROR.

1276

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Bit de respuesta/
Valor

Explicaciones

ERR_PWR

Este bit indica que la tensi√≥n de alimentaci√≥n L+ es insuficiente. Si se han habilitado las alarmas de
diagn√≥stico, en caso de error en la tensi√≥n de alimentaci√≥n se dispara la alarma de diagn√≥stico "Error
de tensi√≥n de alimentaci√≥n".
Cuando la tensi√≥n de alimentaci√≥n L+ vuelve a ser suficiente, se desactiva ERR_PWR autom√°tica‚Äê
mente.
El bit no se activa si no hay tensi√≥n de alimentaci√≥n aplicada.

STS_SW_ENABLE

Este bit indica el estado de la habilitaci√≥n software.
‚óè 0 significa: Habilitaci√≥n software no activa
‚óè 1 significa: Habilitaci√≥n software activa

STS_READY

Este bit indica que el m√≥dulo devuelve datos de usuario v√°lidos. El m√≥dulo ha arrancado y est√°
parametrizado.

STS_LD_SLOT

Este bit indica, por medio de un cambio de estado (conmutaci√≥n), que la solicitud de carga LD_SLOT
ha sido detectada y ejecutada (si MODE_SLOT = 0).

STS_DITHER

Este bit indica que la se√±al de dither est√° activa con la rampa de conexi√≥n iniciada y la rampa de
desconexi√≥n no finalizada.

STS_DI

Este bit indica el estado de la entrada digital DIn.0.

STS_DQA

Este bit indica el estado de la salida digital DQn.A.

STS_DQB

Este bit indica el estado de la salida digital DQn.B.

STS_ENABLE

Este bit indica que hay una secuencia de salida en curso.

MEASURED_
CURRENT

Este valor indica el valor medido de intensidad en formato anal√≥gico S7:
‚óè Modo bicanal: 27648D ‚âô 2 A
‚óè Modo monocanal: 27648D ‚âô 4 A
‚óè 32767D significa: No hay ning√∫n valor medido de intensidad v√°lido, p. ej., durante el primer periodo
de PWM

QLMN_HLM

Este bit indica que se ha alcanzado la variable manipulada del l√≠mite superior de la regulaci√≥n de
intensidad.

QLMN_LLM

Este bit indica que se ha alcanzado la variable manipulada del l√≠mite inferior de la regulaci√≥n de
intensidad.

Reservado

Los bits de reserva est√°n ajustados a 0.

Modo is√≥crono
El m√≥dulo tecnol√≥gico soporta la funci√≥n de sistema "Modo is√≥crono". En el modo is√≥crono, la
secuencia de salida se inicia en el instante To, una vez activado el bit de control SW_ENABLE.
En modo is√≥crono, la duraci√≥n del periodo se adapta al ciclo de aplicaci√≥n (TAPP) y se sincroniza
con este. La sincronizaci√≥n es especialmente √∫til para crear lazos de regulaci√≥n.
El m√≥dulo adapta el valor asignado de duraci√≥n del periodo de modo que se obtenga una
relaci√≥n entera. En el caso menos favorable, la diferencia equivale a medio ciclo de aplicaci√≥n.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1277

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Ejemplos:
Ciclo de aplicaci√≥n
TAPP

Duraci√≥n del periodo asigna‚Äê
da TSetpoint

Duraci√≥n del periodo real
TActual

TAPP:TActual

10 ms
(10000 Œºs)

1800 Œºs

1666 Œºs

6:1

2000 Œºs

2000 Œºs

5:1

3000 Œºs

3333 Œºs

3:1

5000 Œºs

5000 Œºs

2:1

6000 Œºs

5000 Œºs

2:1

12000 Œºs

10000 Œºs

1:1

16000 Œºs

20000 Œºs

1:2

La figura siguiente muestra un ejemplo de relaci√≥n 1:1 entre el ciclo de aplicaci√≥n y la duraci√≥n
del periodo con un ciclo de trabajo del 50%.
'XUDFL¬µQGHOSHULRGR

'4Q$
&LFORGHDSOLFDFL¬µQ
72

72

72

72

La figura siguiente muestra un ejemplo de relaci√≥n 3:1 entre el ciclo de aplicaci√≥n y la duraci√≥n
del periodo con un ciclo de trabajo del 50%.
'XUDFL¬µQGHOSHULRGR

'4Q$
&LFORGHDSOLFDFL¬µQ
72

72

72

72

La figura siguiente muestra un ejemplo de relaci√≥n 1:3 entre el ciclo de aplicaci√≥n y la duraci√≥n
del periodo con un ciclo de trabajo del 50%.

1278

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
'XUDFL¬µQGHOSHULRGR

'4Q$
&LFORGHDSOLFDFL¬µQ
72

72

72

72

Nota
Sin habilitaci√≥n hardware ni retardo a la conexi√≥n
En modo is√≥crono no se puede utilizar habilitaci√≥n hardware ni retardo a la conexi√≥n.

M√°s informaci√≥n
Encontrar√° una descripci√≥n detallada del modo is√≥crono:
‚óè En el manual de funciones Modo is√≥crono, disponible para descarga en Internet (https://
support.industry.siemens.com/cs/ww/es/view/109755401).
‚óè En el manual de funciones PROFINET con STEP 7, disponible para su descarga en Internet
(https://support.industry.siemens.com/cs/ww/es/view/49948856).

5.1.2.3

Modo de operaci√≥n Tren de impulsos

Funci√≥n
Introducci√≥n
En este modo de operaci√≥n, el correspondiente canal del m√≥dulo tecnol√≥gico emite un
determinado n√∫mero de impulsos con la duraci√≥n de periodo, ciclo de trabajo y retardo a la
conexi√≥n parametrizados. El n√∫mero de impulsos se especifica con la interfaz de control.

Inicio de la secuencia de salida
Para poder emitir la secuencia de salida por la salida digital DQn.A, debe estar activado el bit
de control TM_CTRL_DQ. Para iniciar la secuencia de salida mediante la habilitaci√≥n software,
active el bit de control (P√°gina 1289) SW_ENABLE. El bit de respuesta STS_SW_ENABLE
indica que la habilitaci√≥n software est√° activa en el m√≥dulo tecnol√≥gico.
Adicionalmente, puede utilizarse la habilitaci√≥n hardware a trav√©s de la correspondiente
entrada digital DIn.0. Para DIn.0 se puede parametrizar un retardo a la entrada.
Diagrama de impulsos
La imagen siguiente muestra un ejemplo de una secuencia de salida en el supuesto de que se
utilice DIn.0 como habilitaci√≥n hardware.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1279

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos


70B&75/B'4



6:B(1$%/(

676B6:B(1$%/(
',Q
+DELOLWDFL¬µQ+:
676B',

'4Q$
5HWDUGRD
OD
FRQH[L¬µQ

5HWDUGRDOD
FRQH[L¬µQ

'XUDFL¬µQ
GH
LPSXOVR

'XUDFL¬µQ
GHSDXVD
HQWUH
LPSXOVRV

'XUDFL¬µQGHOSHULRGR

676B(1$%/(

(55B38/6(

Figura 5-4

Ejemplo de una secuencia de salida

Si se utiliza la habilitaci√≥n hardware, se combina con la habilitaci√≥n software. Si est√° activa la
habilitaci√≥n software, la secuencia de salida se inicia con el primer flanco ascendente de la
habilitaci√≥n hardware. Los dem√°s flancos ascendentes de la habilitaci√≥n hardware durante la
secuencia de salida se ignoran. Si la habilitaci√≥n hardware est√° activada y permanece activada
durante el retardo a la entrada, se inicia el retardo a la conexi√≥n y se activa el bit de respuesta
STS_ENABLE. Una vez finalizado el retardo a la conexi√≥n, se emite el tren de impulsos a
trav√©s de la correspondiente salida digital DQn.A con el n√∫mero de impulsos asignado. La
secuencia de salida finaliza con el √∫ltimo impulso y STS_ENABLE se desactiva.
Si no se usa habilitaci√≥n hardware, el retardo a la conexi√≥n se inicia con el flanco ascendente
de SW_ENABLE.

Interrupci√≥n de la secuencia de salida
Si se desactiva el bit de control SW_ENABLE, se desactiva la habilitaci√≥n software y se
cancela la secuencia de salida actual. El √∫ltimo periodo no finaliza. Se desactivan el bit de
respuesta STS_ENABLE y la salida digital DQn.A.
Una nueva salida de impulso solo es posible tras reiniciar la secuencia de salida.

N√∫mero de impulsos
El n√∫mero de impulsos se ajusta en la interfaz de control (P√°gina 1289) por medio de
OUTPUT_VALUE como n√∫mero entero (UDINT). El rango de valores abarca de 1 a
4294967295 (232-1). Los cambios son efectivos de inmediato.

1280

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Si se reduce el n√∫mero de impulsos a 0 o a un n√∫mero ya emitido, se cancela la secuencia de
salida. En tal caso se desactivan el bit de respuesta STS_ENABLE y la salida digital DQn.A, y
se activa el bit de respuesta ERR_PULSE. Para continuar con la salida de impulsos debe
reiniciarse la secuencia de salida. La pr√≥xima vez que se inicie la secuencia de salida, el
m√≥dulo tecnol√≥gico desactivar√° el bit de respuesta ERR_PULSE.

Ciclo de trabajo
El ciclo de trabajo equivale a la relaci√≥n entre la duraci√≥n del impulso y la duraci√≥n del periodo
(tambi√©n denominado tiempo de conexi√≥n).
La duraci√≥n del periodo se ajusta en la configuraci√≥n hardware. El rango de valores depende
del formato de salida parametrizado. Si se ajusta 0, DQn.A no se activar√° durante toda la
duraci√≥n del periodo. Si se ajusta el valor m√°ximo, DQn.A se activar√° durante toda la duraci√≥n
del periodo. Si se rebasa el rango de valores, se utiliza el valor m√°ximo.
Formato de salida

Rango de valores
de OUTPUT_VA‚Äê
LUE

Duraci√≥n del impulso

1/100 (%)

0 ... 100

(OUTPUT_VALUE/100) √ó duraci√≥n del periodo

1/1000 (‚Ä∞)

0 ... 1000

(OUTPUT_VALUE/1000) √ó duraci√≥n del periodo

1/10000

0 ... 10000

(OUTPUT_VALUE/10000) √ó duraci√≥n del periodo

Salida anal√≥gica S7

0 ... 27648

(OUTPUT_VALUE/27648) √ó duraci√≥n del periodo

El ciclo de trabajo tambi√©n puede modificarse con la interfaz de control (P√°gina 1289)
introduciendo un nuevo valor en SLOT como n√∫mero entero (UDINT). En este caso,
seleccione, por medio del bit de control MODE_SLOT, si la modificaci√≥n debe aplicarse una
sola vez o de modo c√≠clico:
MODE_SLOT = 0

Modificaci√≥n √∫nica:
En cuanto se escribe el valor 4D en el correspondiente byte de salida, el valor
de SLOT se aplica una sola vez como ciclo de trabajo y se conserva hasta la
pr√≥xima modificaci√≥n.
Las modificaciones por medio de SLOT se hacen efectivas en la pr√≥xima
secuencia de salida. La modificaci√≥n no afecta a la secuencia de salida en
curso.

MODE_SLOT = 1

Modificaci√≥n c√≠clica:
Si se escribe el valor 20D en el correspondiente byte de salida, el valor actual
de SLOT se aplica c√≠clicamente como ciclo de trabajo.
Las modificaciones por medio de SLOT se hacen efectivas en la pr√≥xima
secuencia de salida. La modificaci√≥n no afecta a la secuencia de salida en
curso.

Encontrar√° m√°s informaci√≥n en AUTOHOTSPOT.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1281

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Duraci√≥n del periodo
La duraci√≥n del periodo se ajusta en ¬µs en la configuraci√≥n hardware. El rango de valores
depende del uso de la funci√≥n de salida High Speed (P√°gina 1283):
Salida High Speed

Rango de valores de la duraci√≥n del periodo

Activada

10 ... 85000000 Œºs
= 10 Œºs ... 85 s

Desactivada

100 ... 85000000 Œºs
= 100 Œºs ... 85 s

La duraci√≥n del periodo tambi√©n puede modificarse con la interfaz de control introduciendo un
nuevo valor en SLOT como n√∫mero entero (UDINT). En este caso, seleccione, por medio del
bit de control MODE_SLOT, si la modificaci√≥n debe aplicarse una sola vez o de modo c√≠clico:
MODE_SLOT = 0

Modificaci√≥n √∫nica:
En cuanto se escribe el valor 1D en el correspondiente byte de salida, el valor
de SLOT se aplica una sola vez como duraci√≥n del periodo y se conserva
hasta la pr√≥xima modificaci√≥n.
Las modificaciones por medio de SLOT se hacen efectivas en la pr√≥xima
secuencia de salida. La modificaci√≥n no afecta a la secuencia de salida en
curso.

MODE_SLOT = 1

Modificaci√≥n c√≠clica:
Si se escribe el valor 17D en el correspondiente byte de salida, el valor actual
de SLOT se aplica c√≠clicamente como duraci√≥n del periodo.
Las modificaciones por medio de SLOT se hacen efectivas en la pr√≥xima
secuencia de salida. La modificaci√≥n no afecta a la secuencia de salida en
curso.

Encontrar√° m√°s informaci√≥n en AUTOHOTSPOT.

Retardo a la conexi√≥n
El retardo a la conexi√≥n se ajusta en la configuraci√≥n hardware entre 0 y 85 s con una precisi√≥n
de 1 ¬µs.
El retardo a la conexi√≥n tambi√©n puede modificarse a trav√©s de la interfaz de control
introduciendo un nuevo valor en SLOT como n√∫mero entero (UDINT). En este caso,
seleccione, por medio del bit de control MODE_SLOT, si la modificaci√≥n debe aplicarse una
sola vez o de modo c√≠clico:
MODE_SLOT = 0

Modificaci√≥n √∫nica:
En cuanto se escribe el valor 2D en el correspondiente byte de salida, el valor
de SLOT se aplica una sola vez como retardo a la conexi√≥n y se conserva
hasta la pr√≥xima modificaci√≥n.
Las modificaciones por medio de SLOT se hacen efectivas en la pr√≥xima
secuencia de salida. La modificaci√≥n no afecta a la secuencia de salida en
curso.

MODE_SLOT = 1

Modificaci√≥n c√≠clica:
Si se escribe el valor 18D en el correspondiente byte de salida, el valor actual
de SLOT se aplica c√≠clicamente como retardo a la conexi√≥n.
Las modificaciones por medio de SLOT se hacen efectivas en la pr√≥xima
secuencia de salida. La modificaci√≥n no afecta a la secuencia de salida en
curso.

1282

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Encontrar√° m√°s informaci√≥n en AUTOHOTSPOT.

Medici√≥n de intensidad
El m√≥dulo tecnol√≥gico mide la intensidad de carga en la salida digital. El valor medido de
intensidad se devuelve en la interfaz de respuesta (P√°gina 1291) en el valor
MEASURED_CURRENT en formato de valor anal√≥gico S7.
Con el bit de respuesta STS_ENABLE activado, los valores medidos v√°lidos est√°n disponibles
tras el primer periodo de la secuencia de salida. El valor medido que se devuelve es un
promedio de los valores medidos registrados durante al menos un periodo. Si no hay ning√∫n
valor medido v√°lido disponible, se devuelve el valor 32767D.
Nota
Para poder utilizar la medici√≥n de intensidad, la funci√≥n salida High Speed debe estar
desactivada.

Rango de medici√≥n y precisi√≥n
El rango de medici√≥n y la precisi√≥n dependen de la configuraci√≥n de canales:
Valor medido
27648D

Valor medido m√°ximo
32511D ‚âô ...

Modo bicanal

2 A1

Modo monocanal
(circuito paralelo)

4 A1

Precisi√≥n3
Duraci√≥n del pe‚Äê
riodo >333 Œºs

Duraci√≥n del pe‚Äê
riodo <333 Œºs

2,37 A2

¬±40 mA

-40 mA ...
+100 mA

4,74 A2

¬±80 mA

-80 mA ...
+200 mA

1

Solo puede excederse durante un tiempo breve.

2

En caso de excederse este valor de intensidad, se activa el bit de respuesta ERR_DQA.

3

Con duraci√≥n del periodo constante en el correspondiente periodo de medici√≥n

Salida High Speed
La funci√≥n Salida High Speed permite una frecuencia de salida m√°xima de 100 kHz con una
intensidad de salida m√°xima de 100 mA. Las salidas High Speed generan flancos muy
verticales. La salida High Speed genera se√±ales con una frecuencia m√°s elevada, pero ofrece
una menor corriente de carga m√°xima. La salida High Speed solo est√° disponible en el modo
bicanal.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1283

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
La tabla siguiente muestra el rango de valores de la duraci√≥n del impulso, duraci√≥n del periodo
y frecuencia en funci√≥n de la salida High Speed:
Valor m√≠nimo

Duraci√≥n del im‚Äê
pulso
Duraci√≥n del
periodo
Frecuencia

Valor m√°ximo

Salida High Speed
desactivada

Salida High Speed
activada

10 Œºs

1,5 Œºs

100 Œºs

10 Œºs
0,02 Hz

Salida High
Speed desactiva‚Äê
da

Salida High
Speed activada

85000000 Œºs (= 85 s)

10 kHz

100 kHz

Configuraci√≥n
Introducci√≥n
El m√≥dulo tecnol√≥gico se configura y parametriza con el software de configuraci√≥n.
Las funciones del m√≥dulo tecnol√≥gico se controlan con el programa de usuario a trav√©s de la
interfaz de control y respuesta.

1284

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Entorno del sistema
El m√≥dulo tecnol√≥gico puede utilizarse en los siguientes entornos de sistema:
Aplicaciones posibles

Componentes necesarios

Software de configuraci√≥n

En el programa de usuario

Operaci√≥n centralizada
con una CPU 151xSP

‚óè Sistema de automatizaci√≥n
ET 200SP

STEP 7 (TIA Portal):

Acceso directo a la inter‚Äê
faz de control y respuesta
en los datos IO

‚óè TM Pulse 2x24V
Operaci√≥n descentraliza‚Äê ‚óè Sistema de automatizaci√≥n
da con una CPU S7-1500
S7-1500
‚óè Sistema de periferia
descentralizada ET 200SP

Configuraci√≥n del dispositivo y
ajuste de par√°metros en la confi‚Äê
guraci√≥n hardware
STEP 7 (TIA Portal):
Configuraci√≥n del dispositivo y
ajuste de par√°metros en la confi‚Äê
guraci√≥n hardware

‚óè TM Pulse 2x24V
Operaci√≥n descentraliza‚Äê ‚óè Sistema de automatizaci√≥n
da con una CPU
S7-300/400
S7-300/400
‚óè Sistema de periferia
descentralizada ET 200SP
‚óè TM Pulse 2x24V
Operaci√≥n descentraliza‚Äê ‚óè Sistema de automatizaci√≥n
da con PROFINET IO en
de otro fabricante
un sistema de otro fabri‚Äê
‚óè Sistema de periferia
cante
descentralizada ET 200SP
‚óè TM Pulse 2x24V
Operaci√≥n descentraliza‚Äê ‚óè Sistema de automatizaci√≥n
da con PROFIBUS DP
de otro fabricante
en un sistema de otro fa‚Äê
‚óè Sistema de periferia
bricante
descentralizada ET 200SP
‚óè TM Pulse 2x24V

STEP 7 (TIA Portal):
Configuraci√≥n del dispositivo y
ajuste de par√°metros en la confi‚Äê
guraci√≥n hardware
STEP 7:
Configuraci√≥n del dispositivo y
ajuste de par√°metros con HSP
Software de configuraci√≥n de otro
fabricante:
Configuraci√≥n del dispositivo y
ajuste de par√°metros con archivo
GSD
Software de configuraci√≥n de otro
fabricante:
Archivo GSD, configuraci√≥n del
dispositivo y ajuste de par√°metros
a trav√©s del juego de datos 128

Hardware Support Packages (HSP)
STEP 7
Los Hardware Support Packages (HSP) pueden descargarse de Internet (https://
support.industry.siemens.com/cs/ww/es/view/23183356).

Archivo GSD
El archivo GSD correspondiente al sistema de periferia descentralizada ET 200SP est√°
disponible para su descarga en Internet:
‚óè Archivo GSD PROFINET IO (http://support.automation.siemens.com/WW/view/es/
57138621)
‚óè Archivo GSD PROFIBUS DP (http://support.automation.siemens.com/WW/view/es/
73016883)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1285

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Reacci√≥n a STOP de la CPU
La respuesta del canal en caso de STOP de la CPU se ajusta en los par√°metros de la
configuraci√≥n del dispositivo.
Tabla 5-7
Opci√≥n

Respuesta del canal en caso de STOP de la CPU
Significado

Aplicar valor susti‚Äê Hasta la siguiente transici√≥n de STOP a RUN de la CPU, el canal emite por las
tutivo
salidas digitales los valores sustitutivos parametrizados. El valor sustitutivo 1 solo
puede parametrizarse para una de las dos salidas digitales.
La secuencia de salida en curso finaliza y se desactiva el bit de respuesta
STS_ENABLE.
Despu√©s de una transici√≥n de STOP a RUN, el m√≥dulo tecnol√≥gico pasa a su
estado de arranque. Antes de poder iniciar una nueva salida de impulsos, debe
desactivarse el bit de control SW_ENABLE.
Continuar

El canal contin√∫a trabajando.
Las salidas digitales contin√∫an conmut√°ndose con arreglo a la parametrizaci√≥n.
As√≠, la secuencia de salida en curso contin√∫a. Si se ha parametrizado la habilita‚Äê
ci√≥n hardware, tambi√©n se pueden iniciar nuevas secuencias de salida a trav√©s de
DIn.0.
Tras una transici√≥n de STOP a RUN, la configuraci√≥n del m√≥dulo tecnol√≥gico no se
desactiva.

Ajuste de par√°metros
Las propiedades del m√≥dulo tecnol√≥gico se establecen mediante diferentes par√°metros. En
funci√≥n de los ajustes, no todos los par√°metros est√°n disponibles. Si la parametrizaci√≥n se
efect√∫a en el programa de usuario, los par√°metros se transfieren al m√≥dulo con la instrucci√≥n
"WRREC" por medio del juego de datos 128.
En este modo de operaci√≥n, los par√°metros del m√≥dulo se ajustan de la siguiente manera:
Ajuste de par√°metros me‚Äê
diante...

Procedimiento b√°sico

Configuraci√≥n hardware en
STEP 7 (TIA Portal)

1. Inserte el m√≥dulo desde la carpeta "M√≥dulos tecnol√≥gicos" del
cat√°logo de hardware.
2. Ajuste el modo de operaci√≥n "Tren de impulsos" y los restantes
par√°metros del m√≥dulo en la configuraci√≥n hardware.
3. Cargue el proyecto en la CPU.

Configuraci√≥n hardware en
STEP 7 con HSP

1. Instale el archivo HSP correspondiente.
A continuaci√≥n encontrar√° el m√≥dulo en el cat√°logo de hardware,
bajo "ET 200SP".
2. Ajuste el modo de operaci√≥n "Tren de impulsos" y los restantes
par√°metros del m√≥dulo en la configuraci√≥n hardware.
3. Cargue el proyecto en la CPU.

1286

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Ajuste de par√°metros me‚Äê
diante...

Procedimiento b√°sico

Configuraci√≥n hardware con
archivo GSD para la opera‚Äê
ci√≥n descentralizada en
PROFINET IO

1. Instale el archivo GSD PROFINET actual.
A continuaci√≥n encontrar√° el m√≥dulo en el cat√°logo de hardware en
"Otros dispositivos de campo > PROFINET IO > I/O".
2. Ajuste el modo de operaci√≥n "Tren de impulsos" y los restantes
par√°metros del m√≥dulo en la configuraci√≥n hardware.
3. Cargue el proyecto en la CPU.

Configuraci√≥n hardware con
archivo GSD para la opera‚Äê
ci√≥n descentralizada en
PROFIBUS DP

1. Instale el archivo GSD PROFIBUS actual.
A continuaci√≥n encontrar√° el m√≥dulo en el cat√°logo de hardware en
"Otros dispositivos de campo > PROFIBUS DP > I/O".
2. Cargue el proyecto en la CPU.
Los par√°metros del m√≥dulo se cargar√°n con los ajustes
predeterminados (ver la tabla siguiente).
3. Ajuste el modo de operaci√≥n "Tren de impulsos" y los restantes
par√°metros en el programa del usuario con el juego de datos 128.

Par√°metros del TM Pulse 2x24V en el modo de operaci√≥n "Tren de impulsos"
En la columna "Rango", los ajustes predeterminados de los par√°metros aparecen marcados
en negrita.
Tabla 5-8

Par√°metros ajustables
Par√°metro

Configuraci√≥n de canal

Rango de valores
1

‚óè 2 canales (2 A):

Rango efectivo
M√≥dulo

‚óè 1 canal (4 A)
Reacci√≥n a STOP de la CPU

‚óè Aplicar valor sustitutivo

Canal

‚óè Continuar
Valor sustitutivo de DQA

‚óè 0

Canal

‚óè 1
Valor sustitutivo de DQB

‚óè 0

Canal

‚óè 1
Diagn√≥stico agrupado

‚óè Desactivado

Canal

‚óè Activado
Diagn√≥stico DQA

‚óè Desactivado

Canal

‚óè Activado
Diagn√≥stico DQB

‚óè Desactivado

Canal

‚óè Activado
Salida High Speed (0,1 A)

‚óè Desactivado

Canal

‚óè Activado
Funci√≥n DI

‚óè Entrada

Canal

‚óè Habilitaci√≥n HW

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1287

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Par√°metro
Retardo a la entrada para entra‚Äê
das digitales

Rango de valores

Rango efectivo
Canal

‚óè Ninguno
‚óè 0,05 ms
‚óè 0,1 ms
‚óè 0,4 ms
‚óè 0,8 ms
‚óè 1,6 ms
‚óè 3,2 ms
‚óè 12,8 ms
‚óè 20 ms

Formato de salida

Canal

‚óè Salida anal√≥gica S7
‚óè 1/100
‚óè 1/1000
‚óè 1/10000

Duraci√≥n del periodo

10...2000000...85000000 Œºs

Canal

Duraci√≥n del periodo real

se calcula autom√°ticamente (solo lectura) Canal

Retardo a la conexi√≥n para salida
de impulso

0...85000000 Œºs

Canal

Ciclo de trabajo

depende del formato de salida

Canal

En la configuraci√≥n con HSP para STEP 7 o con archivo GSD, se establece la configuraci√≥n de
canales seleccionando el nombre del m√≥dulo.

1

Nota
Configuraci√≥n con GSD para PROFIBUS
En la configuraci√≥n con GSD para PROFIBUS, las posibilidades de parametrizaci√≥n no est√°n
disponibles. A los par√°metros del m√≥dulo se asignan los valores predeterminados. Ajuste el
modo de operaci√≥n "Tren de impulsos" y los restantes par√°metros en el programa del usuario
con el juego de datos 128.

√Årea de direcciones
Espacio de direcciones del m√≥dulo tecnol√≥gico
Tabla 5-9

1288

Alcance de las direcciones de entrada y salida
Entradas

Salidas

Alcance por canal tecnol√≥gico

8 bytes

12 bytes

Alcance en modo monocanal

8 bytes

12 bytes

Alcance en modo bicanal

16 bytes

24 bytes

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Interfaz de control y respuesta
Nota
En Internet (https://support.industry.siemens.com/cs/ww/es/view/109482396) puede
descargarse una librer√≠a con los tipos de datos PLC (LPD) para STEP 7 (TIA Portal) y SIMATIC
S7-1200/S7-1500.

Asignaci√≥n de la interfaz de control
El programa de usuario controla el comportamiento del m√≥dulo tecnol√≥gico a trav√©s de la
interfaz de control.

Interfaz de control por canal
La siguiente tabla muestra la asignaci√≥n de la interfaz de control:
Offset de
byte res‚Äê
pecto de
la direc‚Äê
ci√≥n ini‚Äê
cial
Canal
0/1
‚Üì ‚Üì

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

0
‚Ä¶
3

12
‚Ä¶
15

UDINT: N√∫mero de impulsos

4
‚Ä¶
7

16
‚Ä¶
19

UDINT: Valor de carga

8

20

Reservado

MODE_
SLOT

9

21

Reservado

SET_DQB

10

22

11

23

Bit 2

Bit 1

Bit 0

OUTPUT_VALUE

SLOT

LD_SLOT
SET_DQA

Reservado

Reservado

TM_
CTRL_DQ

SW_
ENABLE
RES_
ERROR

Reservado

Nota
El canal 1 solo est√° disponible en el modo bicanal del m√≥dulo.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1289

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Bit de control/valor

Explicaciones

OUTPUT_VALUE

Con este valor se define el n√∫mero de impulsos.
Rango de valores: de 1 a 4294967295D (232-1)
En caso de rebase por exceso del rango de valores, se activa el bit de respuesta ERR_OUT_VAL
y se utiliza el √∫ltimo n√∫mero de impulsos v√°lido.

SLOT

Con este valor se define el valor de carga.
Rango de valores:
‚óè Duraci√≥n del periodo en Œºs: de 10 a 85000000D
‚óè Retardo a la conexi√≥n en Œºs: de 0 a 85000000D
‚óè Ciclo de trabajo:
‚Äì

con formato de salida "1/100": de 0 a 100D

‚Äì

con formato de salida "1/1000": de 0 a 1000D

‚Äì

con formato de salida "1/10000": de 0 a 10000D

‚Äì

con formato de salida "Salida anal√≥gica de S7": de 0 a 27648D

Con el bit de control MODE_SLOT se define si una modificaci√≥n debe aplicarse una sola vez o
de modo c√≠clico.
Los valores no v√°lidos dan lugar a la activaci√≥n del bit de respuesta ERR_LD (con MODE_SLOT
= 0) o ERR_SLOT_VAL (con MODE_SLOT = 1).
MODE_SLOT

Con este bit se define si una modificaci√≥n en SLOT debe aplicarse una sola vez o de modo c√≠clico.
0 significa: Si se escribe el valor en cuesti√≥n en el correspondiente byte de salida, el valor de
SLOT se aplica una sola vez y se mantiene hasta la pr√≥xima modificaci√≥n. Las modificaciones por
medio de SLOT se hacen efectivas en la pr√≥xima secuencia de salida. Tras un nuevo arranque
del m√≥dulo, el valor se sobrescribe con el valor ajustado en la configuraci√≥n hardware.
1 significa: Si se escribe el valor en cuesti√≥n en el correspondiente byte de salida, el valor actual
de SLOT se aplica c√≠clicamente. Las modificaciones por medio de SLOT se hacen efectivas en
la pr√≥xima secuencia de salida.

LD_SLOT

Con esta solicitud de carga se especifica el significado del valor en SLOT:
‚óè 0000B significa: Ninguna acci√≥n, estado de reposo
‚óè 0001B significa: Duraci√≥n del periodo en Œºs
‚óè 0010B significa: Retardo a la conexi√≥n en Œºs
‚óè 0100B significa: Ciclo de trabajo
Todos los valores no indicados son no v√°lidos y dan lugar a la activaci√≥n del bit de respuesta
ERR_LD (si MODE_SLOT = 0) o ERR_SLOT_VAL (si MODE_SLOT = 1).

SET_DQA

Con este bit se activa la salida digital DQn.A cuando TM_CTRL_DQ y SET_DQB est√°n ajustados
a 0.

SET_DQB

Con este bit se activa la salida digital DQn.B cuando TM_CTRL_DQ y SET_DQA est√°n ajustados
a 0.

TM_CTRL_DQ

Con este bit se habilita la funci√≥n tecnol√≥gica de la salida digital.
‚óè 0 significa: SET_DQA y SET_DQB determinan estados de DQn.A y DQn.B
‚óè 1 significa: La secuencia de salida determina el estado de DQn.A; DQn.B siempre es 0.

1290

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Bit de control/valor

Explicaciones

SW_ENABLE

Con este bit se activa la habilitaci√≥n software. Si se utiliza la habilitaci√≥n hardware, se combina
con la habilitaci√≥n software.
‚óè 0 significa: Finalizar salida
‚óè 1 significa: Iniciar salida
El uso de la habilitaci√≥n hardware se activa mediante parametrizaci√≥n. El control de la habilita‚Äê
ci√≥n hardware se realiza externamente a trav√©s de la entrada digital DIn.0.

RES_ERROR

Con este bit se desactivan los siguientes bits de respuesta cuando hay errores presentes:
‚óè ERR_24V
‚óè ERR_DQA
‚óè ERR_DQB
‚óè ERR_LD

Reservado

Los bits de reserva deben estar ajustados a 0.

Asignaci√≥n de la interfaz de respuesta
El programa de usuario recibe valores actuales e informaci√≥n de estado del m√≥dulo
tecnol√≥gico a trav√©s de la interfaz de respuesta.

Interfaz de respuesta por canal
La siguiente tabla muestra la asignaci√≥n de la interfaz de respuesta:
Offset de
byte res‚Äê
pecto de
la direc‚Äê
ci√≥n ini‚Äê
cial
Canal
0/1
‚Üì ‚Üì

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0

ERR_
SLOT_VAL

ERR_
OUT_VAL

ERR_DQB

ERR_DQA

ERR_
PULSE

ERR_LD

ERR_24V

ERR_PWR

STS_SW_
ENABLE

STS_
READY

Reservado

STS_LD_
SLOT

STS_DI

STS_DQB

0

8

1

9

2

10

Reservado

3

11

Reservado

4
...
5

12
...
13

6
...
7

14
...
15

Reservado

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Reservado
STS_DQA

STS_
ENABLE

SEQ_CNT
MEASURED_CURRENT
Reservado

1291

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Nota
El canal 1 solo est√° disponible en el modo bicanal del m√≥dulo.

Bit de respuesta/
Valor

Explicaciones

ERR_SLOT_VAL

Este bit indica que el valor de SLOT o LD_SLOT no es v√°lido (si MODE_SLOT = 1) y no se ha
aceptado.
Cuando el m√≥dulo recibe un valor v√°lido de la interfaz de control, se desactiva ERR_SLOT_VAL
autom√°ticamente.

ERR_OUT_VAL

Este bit indica que el valor de OUTPUT_VALUE no es v√°lido.
Cuando el m√≥dulo recibe un valor v√°lido de la interfaz de control, se desactiva ERR_OUT_VAL
autom√°ticamente.

ERR_DQA

Este bit indica un cortocircuito o una sobrecarga en la salida DQn.A. Si se ha habilitado la alarma de
diagn√≥stico "Diagn√≥stico DQA", este error dispara la alarma de diagn√≥stico "Error en salidas digita‚Äê
les".
El bit se desactiva despu√©s de acusar el error con RES_ERROR.

ERR_DQB

Este bit indica un cortocircuito o una sobrecarga en la salida DQn.B o el intento de activar simult√°‚Äê
neamente los bits de control SET_DQA y SET_DQB. Si se ha habilitado la alarma de diagn√≥stico
"Diagn√≥stico DQB", este error dispara la alarma de diagn√≥stico "Error en salidas digitales".

ERR_PULSE

Este bit indica un error en la salida de impulso.

ERR_LD

Este bit indica que el valor de SLOT o LD_SLOT (si MODE_SLOT = 0) no es v√°lido y no se ha
aceptado.

El bit se desactiva despu√©s de acusar el error con RES_ERROR.

El bit se desactiva despu√©s de acusar el error con RES_ERROR.
ERR_24V

Este bit indica un cortocircuito o una sobrecarga en la salida 24VDC. Si se han habilitado las alarmas
de diagn√≥stico, este error dispara la alarma de diagn√≥stico "Cortocircuito/sobrecarga en la alimen‚Äê
taci√≥n de sensores externa".
El bit se desactiva despu√©s de acusar el error con RES_ERROR.

ERR_PWR

Este bit indica que la tensi√≥n de alimentaci√≥n L+ es insuficiente. Si se han habilitado las alarmas de
diagn√≥stico, en caso de error en la tensi√≥n de alimentaci√≥n se dispara la alarma de diagn√≥stico "Error
de tensi√≥n de alimentaci√≥n".
Cuando la tensi√≥n de alimentaci√≥n L+ vuelve a ser suficiente, se desactiva ERR_PWR autom√°tica‚Äê
mente.
El bit no se activa si no hay tensi√≥n de alimentaci√≥n aplicada.

STS_SW_ENABLE

Este bit indica el estado de la habilitaci√≥n software.
‚óè 0 significa: Habilitaci√≥n software no activa
‚óè 1 significa: Habilitaci√≥n software activa

STS_READY

Este bit indica que el m√≥dulo devuelve datos de usuario v√°lidos. El m√≥dulo ha arrancado y est√°
parametrizado.

STS_LD_SLOT

Este bit indica, por medio de un cambio de estado (conmutaci√≥n), que la solicitud de carga LD_SLOT
ha sido detectada y ejecutada (si MODE_SLOT = 0).

STS_DI

Este bit indica el estado de la entrada digital DIn.0.

STS_DQA

Este bit indica el estado de la salida digital DQn.A.

STS_DQB

Este bit indica el estado de la salida digital DQn.B.

1292

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Bit de respuesta/
Valor

Explicaciones

STS_ENABLE

Este bit indica que hay una secuencia de salida en curso.

SEQ_CNT

Este valor de contador indica el n√∫mero de secuencias de salida finalizadas.

MEASURED_
CURRENT

Este valor indica el valor medido de intensidad en formato anal√≥gico S7:
‚óè Modo bicanal: 27648D ‚âô 2 A
‚óè Modo monocanal: 27648D ‚âô 4 A
‚óè 32767D significa: no hay ning√∫n valor medido de intensidad v√°lido disponible, p. ej., durante el
primer periodo

Reservado

Los bits de reserva est√°n ajustados a 0.

Modo is√≥crono
El m√≥dulo tecnol√≥gico soporta la funci√≥n de sistema "Modo is√≥crono". Si no se usa habilitaci√≥n
hardware, en el modo is√≥crono se inicia la secuencia de salida en el instante To, una vez
activado el bit de control SW_ENABLE.

M√°s informaci√≥n
Encontrar√° una descripci√≥n detallada del modo is√≥crono:
‚óè En el manual de funciones Modo is√≥crono, disponible para descarga en Internet (https://
support.industry.siemens.com/cs/ww/es/view/109755401).
‚óè En el manual de funciones PROFINET con STEP 7, disponible para su descarga en Internet
(https://support.industry.siemens.com/cs/ww/es/view/49948856).

5.1.2.4

Modo de operaci√≥n Retardo a la conexi√≥n/desconexi√≥n

Funci√≥n
Introducci√≥n
En este modo de operaci√≥n, el correspondiente canal del m√≥dulo tecnol√≥gico emite impulsos
con el retardo a la conexi√≥n especificado referido a la entrada digital DIn.0. El retardo a la
conexi√≥n se especifica con la interfaz de control.

Secuencia de salida
Inicio de la secuencia de salida
Para poder emitir la secuencia de salida por la salida digital DQn.A, debe estar activado el bit
de control TM_CTRL_DQ. Para iniciar la secuencia de salida mediante la habilitaci√≥n software,
active el bit de control (P√°gina 1302) SW_ENABLE. El bit de respuesta STS_SW_ENABLE
indica que la habilitaci√≥n software est√° activa en el m√≥dulo tecnol√≥gico.
Diagrama de impulsos

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1293

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
La figura siguiente muestra un ejemplo de secuencia de salida en el supuesto de que se utilice
SW_ENABLE con la entrada digital DIn.0 no activada.
70B&75/B'4




6:B(1$%/(

676B6:B(1$%/(
',Q

676B',

'4Q$

676B(1$%/(

(55B38/6(
5HWDUGRDOD 5HWDUGRDOD
FRQH[L¬µQ
FRQH[L¬µQ

Figura 5-5

5HWDUGRDOD 5HWDUGRDOD
FRQH[L¬µQ
FRQH[L¬µQ

Ejemplo 1 de una secuencia de salida

Con un flanco ascendente de SW_ENABLE se inicia la secuencia de salida y se activan los bits
de respuesta STS_SW_ENABLE y STS_ENABLE. Si la entrada digital DIn.0 se activa y
permanece activada durante el retardo a la entrada, se inicia el retardo a la conexi√≥n. Una vez
finalizado el retardo a la conexi√≥n, se activa la correspondiente salida digital DQn.A. Si la
entrada digital DIn.0 se desactiva y permanece activada durante el retardo a la entrada, se
inicia el retardo a la desconexi√≥n. Una vez finalizado el retardo a la desconexi√≥n, se desactiva
la correspondiente salida digital DQn.A.
La figura siguiente muestra un ejemplo de una secuencia de salida en el supuesto de que se
utilice SW_ENABLE con la entrada digital DIn.0 activada.

1294

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
70B&75/B'4




6:B(1$%/(
676B6:B(1$%/(
',Q

676B',

'4Q$

676B(1$%/(

(55B38/6(
5HWDUGRDODFRQH[L¬µQ
5HWDUGRDODHQWUDGD

Figura 5-6

5HWDUGRDODGHVFRQH[L¬µQ
5HWDUGRDODHQWUDGD

Ejemplo 2 de una secuencia de salida

Si se activa SW_ENABLE con la entrada digital DIn.0 activada, se ignora el primer flanco
(descendente) de DIn.0.

Interrupci√≥n de la secuencia de salida
Si se desactiva el bit de control SW_ENABLE, se desactiva la habilitaci√≥n software y se
cancela la secuencia de salida actual. Se desactivan el bit de respuesta STS_ENABLE y la
salida digital DQn.A.
Una nueva salida de impulso solo es posible tras reiniciar la secuencia de salida.

Duraci√≥n m√≠nima de impulso y pausa m√≠nima entre impulsos
La duraci√≥n m√≠nima de impulso y la pausa m√≠nima entre impulsos son los valores m√≠nimos de
duraci√≥n de impulso y pausa entre impulsos que deben emitirse. Tienen un valor de 1,5 ¬µs con
la salida High Speed (P√°gina 1297) activada y de 10 ¬µs con la salida High Speed desactivada.
Los impulsos y pausas de la entrada digital DIn.0 cuya duraci√≥n no alcance la duraci√≥n m√≠nima
de impulso son ignorados por el m√≥dulo y no se emiten por la salida digital DQn.A.
Los impulsos y pausas de la DIn.0 se ignoran tambi√©n en los siguientes casos:
‚óè Duraci√≥n de impulso < retardo a la entrada
‚óè Duraci√≥n de impulso + retardo a la desconexi√≥n ‚â§ retardo a la conexi√≥n (se activa
ERR_PULSE)
‚óè Duraci√≥n de impulso + retardo a la desconexi√≥n + duraci√≥n m√≠nima de impulso < retardo a
la conexi√≥n (se activa ERR_PULSE)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1295

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
‚óè Pausa entre impulsos < retardo a la entrada
‚óè Pausa entre impulsos + retardo a la conexi√≥n ‚â§ retardo a la desconexi√≥n (se activa
ERR_PULSE)
‚óè Pausa entre impulsos + retardo a la conexi√≥n < retardo a la desconexi√≥n + pausa m√≠nima
entre impulsos (se activa ERR_PULSE)
El bit de respuesta ERR_PULSE activado se borra con el siguiente flanco ascendente en DIn.0.

Redisparo del retardo a la conexi√≥n
En el siguiente caso, el m√≥dulo cancela el retardo a la conexi√≥n actual y lo reinicia con el
siguiente flanco ascendente en la entrada digital DIn.0:
Retardo a la conexi√≥n > duraci√≥n de impulso + pausa entre impulsos
La siguiente figura muestra como ejemplo el redisparo del retardo a la conexi√≥n:
',Q
5HWDUGRDODHQWUDGDFDGDYH]
5HWDUGRDODGHVFRQH[L¬µQ
5HWDUGRDODFRQH[L¬µQ
5HWDUGRDODFRQH[L¬µQUHGLVSDUDGR
'4Q$

Figura 5-7

Redisparo del retardo a la conexi√≥n

Redisparo del retardo a la desconexi√≥n
En el siguiente caso, el m√≥dulo cancela el retardo a la desconexi√≥n actual y lo reinicia con el
siguiente flanco ascendente en la entrada digital DIn.0:
Retardo a la desconexi√≥n > duraci√≥n de impulso + pausa entre impulsos
La siguiente figura muestra como ejemplo el redisparo del retardo a la desconexi√≥n:
',Q
5HWDUGRDODHQWUDGDFDGDYH]
5HWDUGRDODGHVFRQH[L¬µQ
5HWDUGRDODGHVFRQH[L¬µQUHGLVSDUDGR
5HWDUGRDODFRQH[L¬µQ

5HWDUGRDODFRQH[L¬µQ

'4Q$

Figura 5-8

1296

Redisparo del retardo a la desconexi√≥n

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Retardo a la conexi√≥n
El ciclo de trabajo se ajusta en la interfaz de control (P√°gina 1302) por medio de
OUTPUT_VALUE como n√∫mero entero (UDINT). El rango de valores abarca entre 0 y 85 s con
una precisi√≥n de 1 ¬µs.
Las modificaciones se hacen efectivas con el siguiente flanco ascendente en la entrada digital
DIn.0.

Retardo a la desconexi√≥n
El retardo a la desconexi√≥n se ajusta en la configuraci√≥n hardware entre 0 y 85 s con una
precisi√≥n de 1 ¬µs.
El retardo a la desconexi√≥n tambi√©n puede modificarse con la interfaz de control introduciendo
un nuevo valor en SLOT como n√∫mero entero (UDINT). En este caso, seleccione, por medio
del bit de control MODE_SLOT, si la modificaci√≥n debe aplicarse una sola vez o de modo
c√≠clico:
MODE_SLOT = 0

Modificaci√≥n √∫nica:
En cuanto se escribe el valor 3D en el correspondiente byte de salida, el valor
de SLOT se aplica una sola vez como retardo a la desconexi√≥n y se conserva
hasta la pr√≥xima modificaci√≥n.
Las modificaciones a trav√©s de SLOT se hacen efectivas con el siguiente
flanco descendente en la entrada digital DIn.0.

MODE_SLOT = 1

Modificaci√≥n c√≠clica:
Si se escribe el valor 19D en el correspondiente byte de salida, el valor actual
de SLOT se aplica c√≠clicamente como retardo a la desconexi√≥n.
Las modificaciones a trav√©s de SLOT se hacen efectivas con el siguiente
flanco descendente en la entrada digital DIn.0.

Encontrar√° m√°s informaci√≥n en AUTOHOTSPOT.

Salida High Speed
La funci√≥n Salida High Speed permite una frecuencia de salida m√°xima de 100 kHz con una
intensidad de salida m√°xima de 100 mA. Las salidas High Speed generan flancos muy
verticales. La salida High Speed genera se√±ales con una frecuencia m√°s elevada, pero ofrece
una menor corriente de carga m√°xima. La salida High Speed solo est√° disponible en el modo
bicanal.
La tabla siguiente muestra el rango de valores de la duraci√≥n del impulso, duraci√≥n del periodo
y frecuencia en funci√≥n de la salida High Speed:
Valor m√≠nimo

Duraci√≥n del im‚Äê
pulso
Duraci√≥n del
periodo
Frecuencia

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Valor m√°ximo

Salida High Speed
desactivada

Salida High Speed
activada

10 Œºs

1,5 Œºs

100 Œºs

10 Œºs
0,02 Hz

Salida High
Speed desactiva‚Äê
da

Salida High
Speed activada

85000000 Œºs (= 85 s)

10 kHz

100 kHz

1297

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Configuraci√≥n
Introducci√≥n
El m√≥dulo tecnol√≥gico se configura y parametriza con el software de configuraci√≥n.
Las funciones del m√≥dulo tecnol√≥gico se controlan con el programa de usuario a trav√©s de la
interfaz de control y respuesta.

Entorno del sistema
El m√≥dulo tecnol√≥gico puede utilizarse en los siguientes entornos de sistema:
Aplicaciones posibles

Componentes necesarios

Software de configuraci√≥n

En el programa de usuario

Operaci√≥n centralizada
con una CPU 151xSP

‚óè Sistema de automatizaci√≥n
ET 200SP

STEP 7 (TIA Portal):

Acceso directo a la inter‚Äê
faz de control y respuesta
en los datos IO

‚óè TM Pulse 2x24V
Operaci√≥n descentraliza‚Äê ‚óè Sistema de automatizaci√≥n
da con una CPU S7-1500
S7-1500
‚óè Sistema de periferia
descentralizada ET 200SP

Configuraci√≥n del dispositivo y
ajuste de par√°metros en la confi‚Äê
guraci√≥n hardware
STEP 7 (TIA Portal):
Configuraci√≥n del dispositivo y
ajuste de par√°metros en la confi‚Äê
guraci√≥n hardware

‚óè TM Pulse 2x24V
Operaci√≥n descentraliza‚Äê ‚óè Sistema de automatizaci√≥n
da con una CPU
S7-300/400
S7-300/400
‚óè Sistema de periferia
descentralizada ET 200SP
‚óè TM Pulse 2x24V
Operaci√≥n descentraliza‚Äê ‚óè Sistema de automatizaci√≥n
da con PROFINET IO en
de otro fabricante
un sistema de otro fabri‚Äê
‚óè Sistema de periferia
cante
descentralizada ET 200SP
‚óè TM Pulse 2x24V
Operaci√≥n descentraliza‚Äê ‚óè Sistema de automatizaci√≥n
da con PROFIBUS DP
de otro fabricante
en un sistema de otro fa‚Äê
‚óè Sistema de periferia
bricante
descentralizada ET 200SP
‚óè TM Pulse 2x24V

STEP 7 (TIA Portal):
Configuraci√≥n del dispositivo y
ajuste de par√°metros en la confi‚Äê
guraci√≥n hardware
STEP 7:
Configuraci√≥n del dispositivo y
ajuste de par√°metros con HSP
Software de configuraci√≥n de otro
fabricante:
Configuraci√≥n del dispositivo y
ajuste de par√°metros con archivo
GSD
Software de configuraci√≥n de otro
fabricante:
Archivo GSD, configuraci√≥n del
dispositivo y ajuste de par√°metros
a trav√©s del juego de datos 128

Hardware Support Packages (HSP)
STEP 7
Los Hardware Support Packages (HSP) pueden descargarse de Internet (https://
support.industry.siemens.com/cs/ww/es/view/23183356).

1298

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Archivo GSD
El archivo GSD correspondiente al sistema de periferia descentralizada ET 200SP est√°
disponible para su descarga en Internet:
‚óè Archivo GSD PROFINET IO (http://support.automation.siemens.com/WW/view/es/
57138621)
‚óè Archivo GSD PROFIBUS DP (http://support.automation.siemens.com/WW/view/es/
73016883)

Reacci√≥n a STOP de la CPU
La respuesta del canal en caso de STOP de la CPU se ajusta en los par√°metros de la
configuraci√≥n del dispositivo.
Tabla 5-10

Respuesta del canal en caso de STOP de la CPU

Opci√≥n

Significado

Aplicar valor susti‚Äê Hasta la siguiente transici√≥n de STOP a RUN de la CPU, el canal emite por las
tutivo
salidas digitales los valores sustitutivos parametrizados. El valor sustitutivo 1 solo
puede parametrizarse para una de las dos salidas digitales.
La secuencia de salida en curso finaliza y se desactiva el bit de respuesta
STS_ENABLE.
Despu√©s de una transici√≥n de STOP a RUN, el m√≥dulo tecnol√≥gico pasa a su
estado de arranque. Antes de poder iniciar una nueva salida de impulsos, debe
desactivarse el bit de control SW_ENABLE.
Continuar

El canal contin√∫a trabajando.
Las salidas digitales contin√∫an conmut√°ndose con arreglo a la parametrizaci√≥n.
As√≠, la secuencia de salida en curso contin√∫a.
Tras una transici√≥n de STOP a RUN, la configuraci√≥n del m√≥dulo tecnol√≥gico no se
desactiva.

Ajuste de par√°metros
Las propiedades del m√≥dulo tecnol√≥gico se establecen mediante diferentes par√°metros. En
funci√≥n de los ajustes, no todos los par√°metros est√°n disponibles. Si la parametrizaci√≥n se
efect√∫a en el programa de usuario, los par√°metros se transfieren al m√≥dulo con la instrucci√≥n
"WRREC" por medio del juego de datos 128.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1299

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
En este modo de operaci√≥n, los par√°metros del m√≥dulo se ajustan de la siguiente manera:
Ajuste de par√°metros me‚Äê
diante...

Procedimiento b√°sico

Configuraci√≥n hardware en
STEP 7 (TIA Portal)

1. Inserte el m√≥dulo desde la carpeta "M√≥dulos tecnol√≥gicos" del
cat√°logo de hardware.
2. Ajuste el modo de operaci√≥n "Retardo a la conexi√≥n/desconexi√≥n" y
los restantes par√°metros del m√≥dulo en la configuraci√≥n hardware.
3. Cargue el proyecto en la CPU.

Configuraci√≥n hardware en
STEP 7 con HSP

1. Instale el archivo HSP correspondiente.
A continuaci√≥n encontrar√° el m√≥dulo en el cat√°logo de hardware,
bajo "ET 200SP".
2. Ajuste el modo de operaci√≥n "Retardo a la conexi√≥n/desconexi√≥n" y
los restantes par√°metros del m√≥dulo en la configuraci√≥n hardware.
3. Cargue el proyecto en la CPU.

Configuraci√≥n hardware con
archivo GSD para la opera‚Äê
ci√≥n descentralizada en
PROFINET IO

1. Instale el archivo GSD PROFINET actual.
A continuaci√≥n encontrar√° el m√≥dulo en el cat√°logo de hardware en
"Otros dispositivos de campo > PROFINET IO > I/O".
2. Ajuste el modo de operaci√≥n "Retardo a la conexi√≥n/desconexi√≥n" y
los restantes par√°metros del m√≥dulo en la configuraci√≥n hardware.
3. Cargue el proyecto en la CPU.

Configuraci√≥n hardware con
archivo GSD para la opera‚Äê
ci√≥n descentralizada en
PROFIBUS DP

1. Instale el archivo GSD PROFIBUS actual.
A continuaci√≥n encontrar√° el m√≥dulo en el cat√°logo de hardware en
"Otros dispositivos de campo > PROFIBUS DP > I/O".
2. Cargue el proyecto en la CPU.
Los par√°metros del m√≥dulo se cargar√°n con los ajustes
predeterminados (ver la tabla siguiente).
3. Ajuste el modo de operaci√≥n "Retardo a la conexi√≥n/desconexi√≥n" y
los restantes par√°metros en el programa del usuario con el juego de
datos 128.

Par√°metros del TM Pulse 2x24V en el modo de operaci√≥n "Retardo a la conexi√≥n/desconexi√≥n"
En la columna "Rango", los ajustes predeterminados de los par√°metros aparecen marcados
en negrita.
Tabla 5-11

Par√°metros ajustables
Par√°metro

Configuraci√≥n de canal1

Rango de valores
‚óè 2 canales (2 A):

Rango efectivo
M√≥dulo

‚óè 1 canal (4 A)
Reacci√≥n a STOP de la CPU

‚óè Aplicar valor sustitutivo

Canal

‚óè Continuar
Valor sustitutivo de DQA

‚óè 0

Canal

‚óè 1

1300

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Par√°metro
Valor sustitutivo de DQB

Rango de valores
‚óè 0

Rango efectivo
Canal

‚óè 1
Diagn√≥stico agrupado

‚óè Desactivado

Canal

‚óè Activado
Diagn√≥stico DQA

‚óè Desactivado

Canal

‚óè Activado
Diagn√≥stico DQB

‚óè Desactivado

Canal

‚óè Activado
Salida High Speed (0,1 A)

‚óè Desactivada

Canal

‚óè Activada
Retardo a la entrada para entra‚Äê
das digitales

‚óè Ninguno

Canal

‚óè 0,05 ms
‚óè 0,1 ms
‚óè 0,4 ms
‚óè 0,8 ms
‚óè 1,6 ms
‚óè 3,2 ms
‚óè 12,8 ms
‚óè 20 ms

Retardo a la desconexi√≥n para sa‚Äê 0...85000000 Œºs
lida de impulso
1

Canal

En la configuraci√≥n con HSP para STEP 7 o con archivo GSD, se establece la configuraci√≥n de
canales seleccionando el nombre del m√≥dulo.

Nota
Configuraci√≥n con GSD para PROFIBUS
En la configuraci√≥n con GSD para PROFIBUS, las posibilidades de parametrizaci√≥n no est√°n
disponibles. A los par√°metros del m√≥dulo se asignan los valores predeterminados. Ajuste el
modo de operaci√≥n "Retardo a la conexi√≥n/desconexi√≥n" y los restantes par√°metros en el
programa del usuario con el juego de datos 128.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1301

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

√Årea de direcciones
Espacio de direcciones del m√≥dulo tecnol√≥gico
Tabla 5-12

Alcance de las direcciones de entrada y salida
Entradas

Salidas

Alcance por canal tecnol√≥gico

8 bytes

12 bytes

Alcance en modo monocanal

8 bytes

12 bytes

Alcance en modo bicanal

16 bytes

24 bytes

Interfaz de control y respuesta
Nota
En Internet (https://support.industry.siemens.com/cs/ww/es/view/109482396) puede
descargarse una librer√≠a con los tipos de datos PLC (LPD) para STEP 7 (TIA Portal) y SIMATIC
S7-1200/S7-1500.

Asignaci√≥n de la interfaz de control
El programa de usuario controla el comportamiento del m√≥dulo tecnol√≥gico a trav√©s de la
interfaz de control.

Interfaz de control por canal
La siguiente tabla muestra la asignaci√≥n de la interfaz de control:
Offset de
byte res‚Äê
pecto de
la direc‚Äê
ci√≥n ini‚Äê
cial
Canal
0/1
‚Üì ‚Üì

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

0
‚Ä¶
3

12
‚Ä¶
15

4
‚Ä¶
7

16
‚Ä¶
19

8

20

Reservado

MODE_
SLOT

9

21

Reservado

SET_DQB

1302

Bit 2

Bit 1

Bit 0

OUTPUT_VALUE
UDINT: Retardo a la conexi√≥n
SLOT
UDINT: Valor de carga
LD_SLOT
SET_DQA

Reservado

TM_
CTRL_DQ

SW_
ENABLE

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Offset de
byte res‚Äê
pecto de
la direc‚Äê
ci√≥n ini‚Äê
cial
Canal
0/1
‚Üì ‚Üì
10

22

11

23

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Reservado

Bit 0

RES_
ERROR

Reservado

Nota
El canal 1 solo est√° disponible en el modo bicanal del m√≥dulo.

Bit de control/valor

Explicaciones

OUTPUT_VALUE

Con este valor se define el retardo a la conexi√≥n.
Rango de valores:
‚óè Retardo a la conexi√≥n en Œºs: de 0 a 85000000D
En caso de rebase por exceso del rango de valores, se activa el bit de respuesta ERR_OUT_VAL
y se utiliza el √∫ltimo retardo a la conexi√≥n v√°lido.

SLOT

Con este valor se define el valor de carga.
Rango de valores:
‚óè Retardo a la desconexi√≥n en Œºs: de 0 a 85000000D
Con el bit de control MODE_SLOT se define si una modificaci√≥n debe aplicarse una sola vez o
de modo c√≠clico.
Los valores no v√°lidos dan lugar a la activaci√≥n del bit de respuesta ERR_LD (con MODE_SLOT
= 0) o ERR_SLOT_VAL (con MODE_SLOT = 1).

MODE_SLOT

Con este bit se define si una modificaci√≥n en SLOT debe aplicarse una sola vez o de modo c√≠clico.
0 significa: En cuanto se escribe el valor 3D en el correspondiente byte de salida, el valor de SLOT
se aplica una sola vez y se conserva hasta la pr√≥xima modificaci√≥n. Las modificaciones a trav√©s
de SLOT se hacen efectivas con el siguiente flanco descendente en la DIn.0. Tras un nuevo
arranque del m√≥dulo, el valor se sobrescribe con el valor ajustado en la configuraci√≥n hardware.
1 significa: Si se escribe el valor 19D en el correspondiente byte de salida, se aplica el valor actual
de SLOT c√≠clicamente. Las modificaciones a trav√©s de SLOT se hacen efectivas con el siguiente
flanco descendente en la DIn.0.

LD_SLOT

Con esta solicitud de carga se especifica el significado del valor en SLOT:
‚óè 0000B significa: Ninguna acci√≥n, estado de reposo
‚óè 0011B significa: Retardo a la desconexi√≥n en Œºs
Todos los valores no indicados son no v√°lidos y dan lugar a la activaci√≥n del bit de respuesta
ERR_LD (si MODE_SLOT = 0) o ERR_SLOT_VAL (si MODE_SLOT = 1).

SET_DQA

Con este bit se activa la salida digital DQn.A cuando TM_CTRL_DQ y SET_DQB est√°n ajustados
a 0.

SET_DQB

Con este bit se activa la salida digital DQn.B cuando TM_CTRL_DQ y SET_DQA est√°n ajustados
a 0.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1303

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Bit de control/valor

Explicaciones

TM_CTRL_DQ

Con este bit se habilita la funci√≥n tecnol√≥gica de la salida digital.
‚óè 0 significa: SET_DQA y SET_DQB determinan estados de DQn.A y DQn.B
‚óè 1 significa: La secuencia de salida determina el estado de DQn.A; DQn.B siempre es 0.
Con este bit se activa la habilitaci√≥n software. Si se utiliza la habilitaci√≥n hardware, se combina
con la habilitaci√≥n software.

SW_ENABLE

‚óè 0 significa: Finalizar salida
‚óè 1 significa: Iniciar salida
El uso de la habilitaci√≥n hardware se activa mediante parametrizaci√≥n. El control de la habilita‚Äê
ci√≥n hardware se realiza externamente a trav√©s de la entrada digital DIn.0.
RES_ERROR

Con este bit se desactivan los siguientes bits de respuesta cuando hay errores presentes:
‚óè ERR_24V
‚óè ERR_DQA
‚óè ERR_DQB
‚óè ERR_LD

Reservado

Los bits de reserva deben estar ajustados a 0.

Asignaci√≥n de la interfaz de respuesta
El programa de usuario recibe valores actuales e informaci√≥n de estado del m√≥dulo
tecnol√≥gico a trav√©s de la interfaz de respuesta.

Interfaz de respuesta por canal
La siguiente tabla muestra la asignaci√≥n de la interfaz de respuesta:
Offset de
byte res‚Äê
pecto de
la direc‚Äê
ci√≥n ini‚Äê
cial
Canal
0/1
‚Üì ‚Üì

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0

ERR_
SLOT_VAL

ERR_
OUT_VAL

ERR_DQB

ERR_DQA

ERR_
PULSE

ERR_LD

ERR_24V

ERR_PWR

STS_SW_
ENABLE

STS_
READY

Reservado

STS_LD_
SLOT

STS_DI

STS_DQB

0

8

1

9

2

10

Reservado

3

11

Reservado

4
...
7

12
...
15

1304

Reservado

Reservado
STS_DQA

STS_
ENABLE

SEQ_CNT
Reservado

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Nota
El canal 1 solo est√° disponible en el modo bicanal del m√≥dulo.

Bit de respuesta/
Valor

Explicaciones

ERR_SLOT_VAL

Este bit indica que el valor de SLOT o LD_SLOT no es v√°lido (si MODE_SLOT = 1) y no se ha
aceptado.
Cuando el m√≥dulo recibe un valor v√°lido de la interfaz de control, se desactiva ERR_SLOT_VAL
autom√°ticamente.

ERR_OUT_VAL

Este bit indica que el valor de OUTPUT_VALUE no es v√°lido.
Cuando el m√≥dulo recibe un valor v√°lido de la interfaz de control, se desactiva ERR_OUT_VAL
autom√°ticamente.

ERR_DQA

Este bit indica un cortocircuito o una sobrecarga en la salida DQn.A. Si se ha habilitado la alarma de
diagn√≥stico "Diagn√≥stico DQA", este error dispara la alarma de diagn√≥stico "Error en salidas digita‚Äê
les".
El bit se desactiva despu√©s de acusar el error con RES_ERROR.

ERR_DQB

Este bit indica un cortocircuito o una sobrecarga en la salida DQn.B o el intento de activar simult√°‚Äê
neamente los bits de control SET_DQA y SET_DQB. Si se ha habilitado la alarma de diagn√≥stico
"Diagn√≥stico DQB", este error dispara la alarma de diagn√≥stico "Error en salidas digitales".

ERR_PULSE

Este bit indica un error en la salida de impulso.

ERR_LD

Este bit indica que el valor de SLOT o LD_SLOT (si MODE_SLOT = 0) no es v√°lido y no se ha
aceptado.

El bit se desactiva despu√©s de acusar el error con RES_ERROR.

El bit se desactiva despu√©s de acusar el error con RES_ERROR.
ERR_24V

Este bit indica un cortocircuito o una sobrecarga en la salida 24VDC. Si se han habilitado las alarmas
de diagn√≥stico, este error dispara la alarma de diagn√≥stico "Cortocircuito/sobrecarga en la alimen‚Äê
taci√≥n de sensores externa".
El bit se desactiva despu√©s de acusar el error con RES_ERROR.

ERR_PWR

Este bit indica que la tensi√≥n de alimentaci√≥n L+ es insuficiente. Si se han habilitado las alarmas de
diagn√≥stico, en caso de error en la tensi√≥n de alimentaci√≥n se dispara la alarma de diagn√≥stico "Error
de tensi√≥n de alimentaci√≥n".
Cuando la tensi√≥n de alimentaci√≥n L+ vuelve a ser suficiente, se desactiva ERR_PWR autom√°tica‚Äê
mente.
El bit no se activa si no hay tensi√≥n de alimentaci√≥n aplicada.

STS_SW_ENABLE

Este bit indica el estado de la habilitaci√≥n software.
‚óè 0 significa: Habilitaci√≥n software no activa
‚óè 1 significa: Habilitaci√≥n software activa

STS_READY

Este bit indica que el m√≥dulo devuelve datos de usuario v√°lidos. El m√≥dulo ha arrancado y est√°
parametrizado.

STS_LD_SLOT

Este bit indica, por medio de un cambio de estado (conmutaci√≥n), que la solicitud de carga LD_SLOT
ha sido detectada y ejecutada (si MODE_SLOT = 0).

STS_DI

Este bit indica el estado de la entrada digital DIn.0.

STS_DQA

Este bit indica el estado de la salida digital DQn.A.

STS_DQB

Este bit indica el estado de la salida digital DQn.B.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1305

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Bit de respuesta/
Valor

Explicaciones

STS_ENABLE

Este bit indica que hay una secuencia de salida en curso.

SEQ_CNT

Este valor de contador indica el n√∫mero de secuencias de salida finalizadas.

Reservado

Los bits de reserva est√°n ajustados a 0.

Modo is√≥crono
El m√≥dulo tecnol√≥gico soporta la funci√≥n de sistema "Modo is√≥crono". El modo is√≥crono no
tiene efecto en el modo de operaci√≥n "Retardo a la conexi√≥n/desconexi√≥n".

M√°s informaci√≥n
Encontrar√° una descripci√≥n detallada del modo is√≥crono:
‚óè En el manual de funciones Modo is√≥crono, disponible para descarga en Internet (https://
support.industry.siemens.com/cs/ww/es/view/109755401).
‚óè En el manual de funciones PROFINET con STEP 7, disponible para su descarga en Internet
(https://support.industry.siemens.com/cs/ww/es/view/49948856).

5.1.2.5

Modo de operaci√≥n Salida de frecuencia

Funci√≥n
Introducci√≥n
En este modo de operaci√≥n, el canal en cuesti√≥n del m√≥dulo tecnol√≥gico emite una se√±al con
un ciclo de trabajo fijo del 50 % y el retardo a la conexi√≥n parametrizado. La frecuencia se
especifica con la interfaz de control.

Inicio de la secuencia de salida
Para poder emitir la secuencia de salida por la salida digital DQn.A, debe estar activado el bit
de control TM_CTRL_DQ. Para iniciar la secuencia de salida mediante la habilitaci√≥n software,
active el bit de control (P√°gina 1314) SW_ENABLE. El bit de respuesta STS_SW_ENABLE
indica que la habilitaci√≥n software est√° activa en el m√≥dulo tecnol√≥gico.
Adicionalmente, puede utilizarse la habilitaci√≥n hardware a trav√©s de la correspondiente
entrada digital DIn.0. Para DIn.0 se puede parametrizar un retardo a la entrada.
Diagrama de impulsos
La figura siguiente muestra un ejemplo de una secuencia de salida en el supuesto de que se
utilice DIn.0 como habilitaci√≥n hardware.

1306

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
70B&75/B'4




6:B(1$%/(
676B6:B(1$%/(
',Q
+DELO+:

676B',
'XUDFL¬µQGHOSHULRGR

'XUDFL¬µQGHOSHULRGR

'4Q$
5HWDUGRD 5HWDUGRD 'XUDFL¬µQ 'XUDFL¬µQ
ODHQWUDGD ODFRQH[L¬µQ
GHSDXVD
GHO
HQWUH
LPSXOVR
LPSXOVRV

)UHFXHQFLD+]





)UHFXHQFLD+]

676B(1$%/(

Figura 5-9

Ejemplo de una secuencia de salida

Si se utiliza la habilitaci√≥n hardware, se combina con la habilitaci√≥n software. Si est√° activa la
habilitaci√≥n software, la secuencia de salida se inicia con el primer flanco ascendente de la
habilitaci√≥n hardware. Los dem√°s flancos ascendentes de la habilitaci√≥n hardware durante la
secuencia de salida se ignoran. Si la habilitaci√≥n hardware se activa y permanece activada
durante el retardo a la entrada, se inicia el retardo a la conexi√≥n y se activa el bit de respuesta
STS_ENABLE. Una vez finalizado el retardo a la conexi√≥n, se emiten los impulsos a trav√©s de
la correspondiente salida digital DQn.A con la frecuencia asignada. La secuencia de salida
sigue ejecut√°ndose continuamente mientras est√© activado SW_ENABLE.
Si no se usa habilitaci√≥n hardware, el retardo a la conexi√≥n se inicia con el flanco ascendente
de SW_ENABLE.

Interrupci√≥n de la secuencia de salida
Si se desactiva el bit de control SW_ENABLE, se desactiva la habilitaci√≥n software y se
cancela la secuencia de salida actual. El √∫ltimo periodo no finaliza. Se desactivan el bit de
respuesta STS_ENABLE y la salida digital DQn.A.
Una nueva salida de impulso solo es posible tras reiniciar la secuencia de salida.

Frecuencia
La frecuencia de salida se ajusta en la interfaz de control por medio de OUTPUT_VALUE como
n√∫mero en coma flotante (REAL). El rango de valores depende del uso de la funci√≥n de salida
High Speed (P√°gina 1308):

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1307

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Salida High Speed

Rango de valores de
OUTPUT_VALUE

Rango de valores de la frecuencia

Activada

0,02...100000

0,02...100000 Hz
= 0,02 Hz...100 kHz

Desactivada

0,02...10000

0,02...10000 Hz
= 0,02 Hz...10 kHz

Las modificaciones de la frecuencia se hacen efectivas con el pr√≥ximo flanco ascendente en
DQn.A.

Precisi√≥n
La frecuencia de salida se emite con una precisi√≥n de ¬±100 ppm en la salida digital DQn.A.

Retardo a la conexi√≥n
El retardo a la conexi√≥n se ajusta en la configuraci√≥n hardware entre 0 y 85 s con una precisi√≥n
de 1 ¬µs.
El retardo a la conexi√≥n tambi√©n puede modificarse a trav√©s de la interfaz de control
introduciendo un nuevo valor en SLOT como n√∫mero entero (UDINT). En este caso,
seleccione, por medio del bit de control MODE_SLOT, si la modificaci√≥n debe aplicarse una
sola vez o de modo c√≠clico:
MODE_SLOT = 0

Modificaci√≥n √∫nica:
En cuanto se escribe el valor 2D en el correspondiente byte de salida, el valor
de SLOT se aplica una sola vez como retardo a la conexi√≥n y se conserva
hasta la pr√≥xima modificaci√≥n.
Las modificaciones por medio de SLOT se hacen efectivas en la pr√≥xima
secuencia de salida. La modificaci√≥n no afecta a la secuencia de salida en
curso.

MODE_SLOT = 1

Modificaci√≥n c√≠clica:
Si se escribe el valor 18D en el correspondiente byte de salida, el valor actual
de SLOT se aplica c√≠clicamente como retardo a la conexi√≥n.
Las modificaciones por medio de SLOT se hacen efectivas en la pr√≥xima
secuencia de salida. La modificaci√≥n no afecta a la secuencia de salida en
curso.

Encontrar√° m√°s informaci√≥n en AUTOHOTSPOT.

Salida High Speed
La funci√≥n Salida High Speed permite una frecuencia de salida m√°xima de 100 kHz con una
intensidad de salida m√°xima de 100 mA. Las salidas High Speed generan flancos muy
verticales. La salida High Speed genera se√±ales con una frecuencia m√°s elevada, pero ofrece
una menor corriente de carga m√°xima. La salida High Speed solo est√° disponible en el modo
bicanal.

1308

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
La tabla siguiente muestra el rango de valores de la duraci√≥n del impulso y la frecuencia en
funci√≥n de la salida High Speed:
Valor m√≠nimo

Duraci√≥n del im‚Äê
pulso
Frecuencia

Valor m√°ximo

Salida High Speed
desactivada

Salida High Speed
activada

10 Œºs

1,5 Œºs
0,02 Hz

Salida High
Speed desactiva‚Äê
da

Salida High
Speed activada

85000000 Œºs (= 85 s)
10 kHz

100 kHz

Configuraci√≥n
Introducci√≥n
El m√≥dulo tecnol√≥gico se configura y parametriza con el software de configuraci√≥n.
Las funciones del m√≥dulo tecnol√≥gico se controlan con el programa de usuario a trav√©s de la
interfaz de control y respuesta.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1309

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Entorno del sistema
El m√≥dulo tecnol√≥gico puede utilizarse en los siguientes entornos de sistema:
Aplicaciones posibles

Componentes necesarios

Software de configuraci√≥n

En el programa de usuario

Operaci√≥n centralizada
con una CPU 151xSP

‚óè Sistema de automatizaci√≥n
ET 200SP

STEP 7 (TIA Portal):

Acceso directo a la inter‚Äê
faz de control y respuesta
en los datos IO

‚óè TM Pulse 2x24V
Operaci√≥n descentraliza‚Äê ‚óè Sistema de automatizaci√≥n
da con una CPU S7-1500
S7-1500
‚óè Sistema de periferia
descentralizada ET 200SP

Configuraci√≥n del dispositivo y
ajuste de par√°metros en la confi‚Äê
guraci√≥n hardware
STEP 7 (TIA Portal):
Configuraci√≥n del dispositivo y
ajuste de par√°metros en la confi‚Äê
guraci√≥n hardware

‚óè TM Pulse 2x24V
Operaci√≥n descentraliza‚Äê ‚óè Sistema de automatizaci√≥n
da con una CPU
S7-300/400
S7-300/400
‚óè Sistema de periferia
descentralizada ET 200SP
‚óè TM Pulse 2x24V
Operaci√≥n descentraliza‚Äê ‚óè Sistema de automatizaci√≥n
da con PROFINET IO en
de otro fabricante
un sistema de otro fabri‚Äê
‚óè Sistema de periferia
cante
descentralizada ET 200SP
‚óè TM Pulse 2x24V
Operaci√≥n descentraliza‚Äê ‚óè Sistema de automatizaci√≥n
da con PROFIBUS DP
de otro fabricante
en un sistema de otro fa‚Äê
‚óè Sistema de periferia
bricante
descentralizada ET 200SP
‚óè TM Pulse 2x24V

STEP 7 (TIA Portal):
Configuraci√≥n del dispositivo y
ajuste de par√°metros en la confi‚Äê
guraci√≥n hardware
STEP 7:
Configuraci√≥n del dispositivo y
ajuste de par√°metros con HSP
Software de configuraci√≥n de otro
fabricante:
Configuraci√≥n del dispositivo y
ajuste de par√°metros con archivo
GSD
Software de configuraci√≥n de otro
fabricante:
Archivo GSD, configuraci√≥n del
dispositivo y ajuste de par√°metros
a trav√©s del juego de datos 128

Hardware Support Packages (HSP)
STEP 7
Los Hardware Support Packages (HSP) pueden descargarse de Internet (https://
support.industry.siemens.com/cs/ww/es/view/23183356).

Archivo GSD
El archivo GSD correspondiente al sistema de periferia descentralizada ET 200SP est√°
disponible para su descarga en Internet:
‚óè Archivo GSD PROFINET IO (http://support.automation.siemens.com/WW/view/es/
57138621)
‚óè Archivo GSD PROFIBUS DP (http://support.automation.siemens.com/WW/view/es/
73016883)

1310

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Reacci√≥n a STOP de la CPU
La respuesta del canal en caso de STOP de la CPU se ajusta en los par√°metros de la
configuraci√≥n del dispositivo.
Tabla 5-13

Respuesta del canal en caso de STOP de la CPU

Opci√≥n

Significado

Aplicar valor susti‚Äê Hasta la siguiente transici√≥n de STOP a RUN de la CPU, el canal emite por las
tutivo
salidas digitales los valores sustitutivos parametrizados. El valor sustitutivo 1 solo
puede parametrizarse para una de las dos salidas digitales.
La secuencia de salida en curso finaliza y se desactiva el bit de respuesta
STS_ENABLE.
Despu√©s de una transici√≥n de STOP a RUN, el m√≥dulo tecnol√≥gico pasa a su
estado de arranque. Antes de poder iniciar una nueva salida de impulsos, debe
desactivarse el bit de control SW_ENABLE.
Continuar

El canal contin√∫a trabajando.
Las salidas digitales contin√∫an conmut√°ndose con arreglo a la parametrizaci√≥n.
As√≠, la secuencia de salida en curso contin√∫a. Si se ha parametrizado la habilita‚Äê
ci√≥n hardware, tambi√©n se pueden iniciar nuevas secuencias de salida a trav√©s de
DIn.0.
Tras una transici√≥n de STOP a RUN, la configuraci√≥n del m√≥dulo tecnol√≥gico no se
desactiva.

Ajuste de par√°metros
Las propiedades del m√≥dulo tecnol√≥gico se establecen mediante diferentes par√°metros. En
funci√≥n de los ajustes, no todos los par√°metros est√°n disponibles. Si la parametrizaci√≥n se
efect√∫a en el programa de usuario, los par√°metros se transfieren al m√≥dulo con la instrucci√≥n
"WRREC" por medio del juego de datos 128.
En este modo de operaci√≥n, los par√°metros del m√≥dulo se ajustan de la siguiente manera:
Ajuste de par√°metros me‚Äê
diante...

Procedimiento b√°sico

Configuraci√≥n hardware en
STEP 7 (TIA Portal)

1. Inserte el m√≥dulo desde la carpeta "M√≥dulos tecnol√≥gicos" del
cat√°logo de hardware.
2. Ajuste el modo de operaci√≥n "Salida de frecuencia" y los restantes
par√°metros del m√≥dulo en la configuraci√≥n hardware.
3. Cargue el proyecto en la CPU.

Configuraci√≥n hardware en
STEP 7 con HSP

1. Instale el archivo HSP correspondiente.
A continuaci√≥n encontrar√° el m√≥dulo en el cat√°logo de hardware,
bajo "ET 200SP".
2. Ajuste el modo de operaci√≥n "Salida de frecuencia" y los restantes
par√°metros del m√≥dulo en la configuraci√≥n hardware.
3. Cargue el proyecto en la CPU.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1311

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Ajuste de par√°metros me‚Äê
diante...

Procedimiento b√°sico

Configuraci√≥n hardware con
archivo GSD para la opera‚Äê
ci√≥n descentralizada en
PROFINET IO

1. Instale el archivo GSD PROFINET actual.
A continuaci√≥n encontrar√° el m√≥dulo en el cat√°logo de hardware en
"Otros dispositivos de campo > PROFINET IO > I/O".
2. Ajuste el modo de operaci√≥n "Salida de frecuencia" y los restantes
par√°metros del m√≥dulo en la configuraci√≥n hardware.
3. Cargue el proyecto en la CPU.

Configuraci√≥n hardware con
archivo GSD para la opera‚Äê
ci√≥n descentralizada en
PROFIBUS DP

1. Instale el archivo GSD PROFIBUS actual.
A continuaci√≥n encontrar√° el m√≥dulo en el cat√°logo de hardware en
"Otros dispositivos de campo > PROFIBUS DP > I/O".
2. Cargue el proyecto en la CPU.
Los par√°metros del m√≥dulo se cargar√°n con los ajustes
predeterminados (ver la tabla siguiente).
3. Ajuste el modo de operaci√≥n "Salida de frecuencia" y los restantes
par√°metros en el programa del usuario con el juego de datos 128.

Par√°metros del TM Pulse 2x24V en el modo de operaci√≥n "Salida de frecuencia"
En la columna "Rango", los ajustes predeterminados de los par√°metros aparecen marcados
en negrita.
Tabla 5-14

Par√°metros ajustables
Par√°metro

Configuraci√≥n de canal

Rango de valores
1

‚óè 2 canales (2 A):

Rango efectivo
M√≥dulo

‚óè 1 canal (4 A)
Reacci√≥n a STOP de la CPU

‚óè Aplicar valor sustitutivo

Canal

‚óè Continuar
Valor sustitutivo de DQA

‚óè 0

Canal

‚óè 1
Valor sustitutivo de DQB

‚óè 0

Canal

‚óè 1
Diagn√≥stico agrupado

‚óè Desactivado

Canal

‚óè Activado
Diagn√≥stico DQA

‚óè Desactivado

Canal

‚óè Activado
Diagn√≥stico DQB

‚óè Desactivado

Canal

‚óè Activado
Salida High Speed (0,1 A)

‚óè Desactivada

Canal

‚óè Activada
Funci√≥n DI

‚óè Entrada

Canal

‚óè Habilitaci√≥n HW

1312

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Par√°metro
Retardo a la entrada para entra‚Äê
das digitales

Rango de valores

Rango efectivo
Canal

‚óè Ninguno
‚óè 0,05 ms
‚óè 0,1 ms
‚óè 0,4 ms
‚óè 0,8 ms
‚óè 1,6 ms
‚óè 3,2 ms
‚óè 12,8 ms
‚óè 20 ms

Retardo a la conexi√≥n para salida
de impulso

0...85000000 Œºs

Canal

En la configuraci√≥n con HSP para STEP 7 o con archivo GSD, se establece la configuraci√≥n de
canales seleccionando el nombre del m√≥dulo.

1

Nota
Configuraci√≥n con GSD para PROFIBUS
En la configuraci√≥n con GSD para PROFIBUS, las posibilidades de parametrizaci√≥n no est√°n
disponibles. A los par√°metros del m√≥dulo se asignan los valores predeterminados. Ajuste el
modo de operaci√≥n "Salida de frecuencia" y los restantes par√°metros en el programa del
usuario con el juego de datos 128.

√Årea de direcciones
Espacio de direcciones del m√≥dulo tecnol√≥gico
Tabla 5-15

Alcance de las direcciones de entrada y salida
Entradas

Salidas

Alcance por canal tecnol√≥gico

8 bytes

12 bytes

Alcance en modo monocanal

8 bytes

12 bytes

Alcance en modo bicanal

16 bytes

24 bytes

Interfaz de control y respuesta
Nota
En Internet (https://support.industry.siemens.com/cs/ww/es/view/109482396) puede
descargarse una librer√≠a con los tipos de datos PLC (LPD) para STEP 7 (TIA Portal) y SIMATIC
S7-1200/S7-1500.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1313

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Asignaci√≥n de la interfaz de control
El programa de usuario controla el comportamiento del m√≥dulo tecnol√≥gico a trav√©s de la
interfaz de control.

Interfaz de control por canal
La siguiente tabla muestra la asignaci√≥n de la interfaz de control:
Offset de
byte res‚Äê
pecto de
la direc‚Äê
ci√≥n ini‚Äê
cial
Canal
0/1
‚Üì ‚Üì

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

0
‚Ä¶
3

12
‚Ä¶
15

4
‚Ä¶
7

16
‚Ä¶
19

8

20

Reservado

MODE_
SLOT

9

21

Reservado

SET_DQB

10

22

11

23

Bit 2

Bit 1

Bit 0

OUTPUT_VALUE
REAL: Frecuencia
SLOT
UDINT: Valor de carga
LD_SLOT
SET_DQA

Reservado

Reservado

TM_
CTRL_DQ

SW_
ENABLE
RES_
ERROR

Reservado

Nota
El canal 1 solo est√° disponible en el modo bicanal del m√≥dulo.

1314

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Bit de control/valor

Explicaciones

OUTPUT_VALUE

Con este valor se define la frecuencia.
Rango de valores:
‚óè Frecuencia en Hz si la salida High Speed est√° desactivada: de 0,02 a 10000D
‚óè Frecuencia en Hz si la salida High Speed est√° activada: de 0,02 a 100000D
En caso de rebase por exceso o por defecto del rango de valores, se activa el bit de respuesta
ERR_OUT_VAL y se utiliza la √∫ltima frecuencia v√°lida.

SLOT

Con este valor se define el valor de carga.
Rango de valores:
‚óè Retardo a la conexi√≥n en Œºs: de 0 a 85000000D
Con el bit de control MODE_SLOT se define si una modificaci√≥n debe aplicarse una sola vez o
de modo c√≠clico.
Los valores no v√°lidos dan lugar a la activaci√≥n del bit de respuesta ERR_LD (con MODE_SLOT
= 0) o ERR_SLOT_VAL (con MODE_SLOT = 1).

MODE_SLOT

Con este bit se define si una modificaci√≥n en SLOT debe aplicarse una sola vez o de modo c√≠clico.
0 significa: En cuanto se escribe el valor 2D en el correspondiente byte de salida, el valor de SLOT
se aplica una sola vez y se conserva hasta la pr√≥xima modificaci√≥n. Las modificaciones por
medio de SLOT se hacen efectivas en la pr√≥xima secuencia de salida. Tras un nuevo arranque
del m√≥dulo, el valor se sobrescribe con el valor ajustado en la configuraci√≥n hardware.
1 significa: Si se escribe el valor 18D en el correspondiente byte de salida, se aplica el valor actual
de SLOT c√≠clicamente. Las modificaciones por medio de SLOT se hacen efectivas en la pr√≥xima
secuencia de salida.

LD_SLOT

Con esta solicitud de carga se especifica el significado del valor en SLOT:
‚óè 0000B significa: Ninguna acci√≥n, estado de reposo
‚óè 0010B significa: Retardo a la conexi√≥n en Œºs
Todos los valores no indicados son no v√°lidos y dan lugar a la activaci√≥n del bit de respuesta
ERR_LD (si MODE_SLOT = 0) o ERR_SLOT_VAL (si MODE_SLOT = 1).

SET_DQA

Con este bit se activa la salida digital DQn.A cuando TM_CTRL_DQ y SET_DQB est√°n ajustados
a 0.

SET_DQB

Con este bit se activa la salida digital DQn.B cuando TM_CTRL_DQ y SET_DQA est√°n ajustados
a 0.

TM_CTRL_DQ

Con este bit se habilita la funci√≥n tecnol√≥gica de la salida digital.
‚óè 0 significa: SET_DQA y SET_DQB determinan estados de DQn.A y DQn.B
‚óè 1 significa: La secuencia de salida determina el estado de DQn.A; DQn.B siempre es 0.

SW_ENABLE

Con este bit se activa la habilitaci√≥n software. Si se utiliza la habilitaci√≥n hardware, se combina
con la habilitaci√≥n software.
‚óè 0 significa: Finalizar salida
‚óè 1 significa: Iniciar salida
El uso de la habilitaci√≥n hardware se activa mediante parametrizaci√≥n. El control de la habilita‚Äê
ci√≥n hardware se realiza externamente a trav√©s de la entrada digital DIn.0.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1315

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Bit de control/valor

Explicaciones

RES_ERROR

Con este bit se desactivan los siguientes bits de respuesta cuando hay errores presentes:
‚óè ERR_24V
‚óè ERR_DQA
‚óè ERR_DQB
‚óè ERR_LD

Reservado

Los bits de reserva deben estar ajustados a 0.

Asignaci√≥n de la interfaz de respuesta
El programa de usuario recibe valores actuales e informaci√≥n de estado del m√≥dulo
tecnol√≥gico a trav√©s de la interfaz de respuesta.

Interfaz de respuesta por canal
La siguiente tabla muestra la asignaci√≥n de la interfaz de respuesta:
Offset de
byte res‚Äê
pecto de
la direc‚Äê
ci√≥n ini‚Äê
cial
Canal
0/1
‚Üì ‚Üì
0

8

1

9

2

10

3
...
7

11
...
15

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0

ERR_
SLOT_VAL

ERR_
OUT_VAL

ERR_DQB

ERR_DQA

Reservado

ERR_LD

ERR_24V

ERR_PWR

STS_SW_
ENABLE

STS_
READY

Reservado

STS_LD_
SLOT

STS_DI

STS_DQB

Reservado

Reservado

Reservado
STS_DQA

STS_
ENABLE

Reservado

Nota
El canal 1 solo est√° disponible en el modo bicanal del m√≥dulo.

1316

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Bit de respuesta/
Valor

Explicaciones

ERR_SLOT_VAL

Este bit indica que el valor de SLOT o LD_SLOT no es v√°lido (si MODE_SLOT = 1) y no se ha
aceptado.
Cuando el m√≥dulo recibe un valor v√°lido de la interfaz de control, se desactiva ERR_SLOT_VAL
autom√°ticamente.

ERR_OUT_VAL

Este bit indica que el valor de OUTPUT_VALUE no es v√°lido.
Cuando el m√≥dulo recibe un valor v√°lido de la interfaz de control, se desactiva ERR_OUT_VAL
autom√°ticamente.

ERR_DQA

Este bit indica un cortocircuito o una sobrecarga en la salida DQn.A. Si se ha habilitado la alarma de
diagn√≥stico "Diagn√≥stico DQA", este error dispara la alarma de diagn√≥stico "Error en salidas digita‚Äê
les".
El bit se desactiva despu√©s de acusar el error con RES_ERROR.

ERR_DQB

Este bit indica un cortocircuito o una sobrecarga en la salida DQn.B o el intento de activar simult√°‚Äê
neamente los bits de control SET_DQA y SET_DQB. Si se ha habilitado la alarma de diagn√≥stico
"Diagn√≥stico DQB", este error dispara la alarma de diagn√≥stico "Error en salidas digitales".
El bit se desactiva despu√©s de acusar el error con RES_ERROR.

ERR_LD

Este bit indica que el valor de SLOT o LD_SLOT (si MODE_SLOT = 0) no es v√°lido y no se ha
aceptado.
El bit se desactiva despu√©s de acusar el error con RES_ERROR.

ERR_24V

Este bit indica un cortocircuito o una sobrecarga en la salida 24VDC. Si se han habilitado las alarmas
de diagn√≥stico, este error dispara la alarma de diagn√≥stico "Cortocircuito/sobrecarga en la alimen‚Äê
taci√≥n de sensores externa".
El bit se desactiva despu√©s de acusar el error con RES_ERROR.

ERR_PWR

Este bit indica que la tensi√≥n de alimentaci√≥n L+ es insuficiente. Si se han habilitado las alarmas de
diagn√≥stico, en caso de error en la tensi√≥n de alimentaci√≥n se dispara la alarma de diagn√≥stico "Error
de tensi√≥n de alimentaci√≥n".
Cuando la tensi√≥n de alimentaci√≥n L+ vuelve a ser suficiente, se desactiva ERR_PWR autom√°tica‚Äê
mente.
El bit no se activa si no hay tensi√≥n de alimentaci√≥n aplicada.

STS_SW_ENABLE

Este bit indica el estado de la habilitaci√≥n software.
‚óè 0 significa: Habilitaci√≥n software no activa
‚óè 1 significa: Habilitaci√≥n software activa

STS_READY

Este bit indica que el m√≥dulo devuelve datos de usuario v√°lidos. El m√≥dulo ha arrancado y est√°
parametrizado.

STS_LD_SLOT

Este bit indica, por medio de un cambio de estado (conmutaci√≥n), que la solicitud de carga LD_SLOT
ha sido detectada y ejecutada (si MODE_SLOT = 0).

STS_DI

Este bit indica el estado de la entrada digital DIn.0.

STS_DQA

Este bit indica el estado de la salida digital DQn.A.

STS_DQB

Este bit indica el estado de la salida digital DQn.B.

STS_ENABLE

Este bit indica que hay una secuencia de salida en curso.

Reservado

Los bits de reserva est√°n ajustados a 0.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1317

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Modo is√≥crono
El m√≥dulo tecnol√≥gico soporta la funci√≥n de sistema "Modo is√≥crono". Si no se usa habilitaci√≥n
hardware, en el modo is√≥crono se inicia la secuencia de salida en el instante To, una vez
activado el bit de control SW_ENABLE.

M√°s informaci√≥n
Encontrar√° una descripci√≥n detallada del modo is√≥crono:
‚óè En el manual de funciones Modo is√≥crono, disponible para descarga en Internet (https://
support.industry.siemens.com/cs/ww/es/view/109755401).
‚óè En el manual de funciones PROFINET con STEP 7, disponible para su descarga en Internet
(https://support.industry.siemens.com/cs/ww/es/view/49948856).

5.1.2.6

Modo de operaci√≥n PWM con motor DC

Funci√≥n
Introducci√≥n
En este modo de operaci√≥n, el correspondiente canal del m√≥dulo tecnol√≥gico emite una se√±al
modulada por ancho de impulso por la salida digital bipolar para controlar un motor de corriente
continua con escobillas en ambos sentidos de giro. El ciclo de trabajo se especifica con la
interfaz de control.
Cada canal posee una salida digital bipolar DQn.A/DQn.B para la conexi√≥n de un motor DC.
El m√≥dulo funciona como regulador de cuatro cuadrantes. DQn.A y DQn.B est√°n conectadas
como un puente H en el interior del m√≥dulo. Encontrar√° informaci√≥n sobre la conexi√≥n del
motor en el cap√≠tulo AUTOHOTSPOT.
El ciclo de trabajo act√∫a como una tensi√≥n y determina as√≠ la velocidad de giro del motor. Con
el signo del ciclo de trabajo se especifica el sentido de giro. Si se controla el motor en sentido
hacia delante, DQn.A est√° activada y DQn.B, desactivada. Si se controla el motor en sentido
hacia atr√°s, DQn.A est√° desactivada y DQn.B, activada.
Se puede detener el motor a trav√©s de una de las siguientes se√±ales:
‚óè Desactivaci√≥n del bit de control SW_ENABLE en la interfaz de control
‚óè Flanco descendente de la habilitaci√≥n hardware (DIn.0)
‚óè Flanco ascendente del final de carrera (DIn.0)

Inicio de la secuencia de salida
Para iniciar la secuencia de salida mediante la habilitaci√≥n software, active el bit de control
(P√°gina 1326) SW_ENABLE. El bit de respuesta STS_SW_ENABLE indica que la habilitaci√≥n
software est√° activa en el m√≥dulo tecnol√≥gico.
Adicionalmente, puede utilizarse la habilitaci√≥n hardware a trav√©s de la correspondiente
entrada digital DIn.0. Para DIn.0 se puede parametrizar un retardo a la entrada.

1318

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Diagrama de impulsos
La figura siguiente muestra un ejemplo de una secuencia de salida para el sentido hacia
delante utilizando DIn.0 como habilitaci√≥n hardware.
6:B(1$%/(

676B6:B(1$%/(
',Q
+DELO+:
676B',
'XUDFL¬µQGHOSHULRGR

'XUDFL¬µQGHOSHULRGR

'4Q$
'4Q%
5HWDUGRD
ODHQWUDGD

5HWDUGRD
ODFRQH[L¬µQ

'XUDFL¬µQ
GHOLPSXOVR

'XUDFL¬µQ
GHSDXVD
HQWUH
LPSXOVRV

676B(1$%/(
&LFORGHWUDEDMR

Figura 5-10

50 %

20 %

Ejemplo de una secuencia de salida (habilitaci√≥n hardware)

Si se utiliza la habilitaci√≥n hardware, se combina con la habilitaci√≥n software. Si est√° activa la
habilitaci√≥n software, la secuencia de salida se inicia con el primer flanco ascendente de la
habilitaci√≥n hardware. Si la habilitaci√≥n hardware se activa y permanece activada durante el
retardo a la entrada, se inicia el retardo a la conexi√≥n y se activa el bit de respuesta
STS_ENABLE. Una vez finalizado el retardo a la conexi√≥n, se emite la se√±al modulada por
ancho de impulso a trav√©s de la salida digital DQn.A/DQn.B con el ciclo de trabajo asignado.
El ciclo de trabajo es la relaci√≥n entre la duraci√≥n del impulso y la duraci√≥n del periodo.
Si no se usa habilitaci√≥n hardware, el retardo a la conexi√≥n se inicia con el flanco ascendente
de SW_ENABLE. La habilitaci√≥n hardware no est√° disponible en modo is√≥crono. Si la
habilitaci√≥n hardware se parametriza en modo is√≥crono, el m√≥dulo lo interpreta como un final
de carrera.
La figura siguiente muestra un ejemplo de una secuencia de salida para el sentido hacia
delante utilizando DIn.0 como final de carrera.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1319

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
6:B(1$%/(

676B6:B(1$%/(
',Q
)LQDOFDUUHUD
676B',
'XUDFL¬µQGHOSHULRGR

'XUDFL¬µQGHOSHULRGR

'4Q$
'4Q%
5HWDUGRD
ODFRQH[L¬µQ

'XUDFL¬µQ
GHOLPSXOVR

'XUDFL¬µQ
GHSDXVD
HQWUH
LPSXOVRV

5HWDUGRD
ODHQWUDGD

676B(1$%/(
&LFORGHWUDEDMR

Figura 5-11

50 %

20 %

Ejemplo de una secuencia de salida (final de carrera)

Interrupci√≥n de la secuencia de salida
Si se desactiva el bit de control SW_ENABLE, se desactiva la habilitaci√≥n software y se
cancela la secuencia de salida actual. En caso de cancelaci√≥n, el √∫ltimo periodo no finaliza. El
bit de respuesta STS_ENABLE, as√≠ como DQn.A y DQn.B se desactivan (parada del motor).
Si se utiliza la habilitaci√≥n hardware, la secuencia de salida tambi√©n se puede cancelar con un
flanco descendente en DIn.0. Si, en lugar de la habilitaci√≥n hardware, se utiliza el final de
carrera, la secuencia de salida se puede cancelar de manera alternativa con un flanco
ascendente en DIn.0.
Una nueva salida de impulso solo es posible tras reiniciar la secuencia de salida.

Ciclo de trabajo
El ciclo de trabajo equivale a la relaci√≥n entre la duraci√≥n del impulso y la duraci√≥n del periodo
(tambi√©n denominado relaci√≥n impulso-pausa o tiempo de conexi√≥n).
El ciclo de trabajo se ajusta en la interfaz de control (P√°gina 1326) por medio de
OUTPUT_VALUE en el formato anal√≥gico de S7 (DINT). El signo especifica el sentido de giro
del motor. Un valor positivo equivale al sentido hacia delante. Si se ajusta 0, el motor se
detiene. Si se ajusta el valor m√≠nimo, DQn.B se activar√° durante toda la duraci√≥n del periodo.
Si se ajusta el valor m√°ximo, DQn.A se activar√° durante toda la duraci√≥n del periodo. Si se
rebasa por exceso o por defecto el rango de valores, se utiliza el valor m√≠nimo o m√°ximo.

1320

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Las modificaciones del ciclo de trabajo se hacen efectivas con el pr√≥ximo flanco ascendente
en DQn.A o DQn.B.
Formato de salida

Rango de valores de
OUTPUT_VALUE

Duraci√≥n del impulso

Salida anal√≥gica S7

‚Äí27648 ... 27648

(OUTPUT_VALUE/27648) √ó duraci√≥n del periodo

Antes de cambiar el sentido de giro, se recomienda ajustar el valor 0 para OUTPUT_VALUE
el tiempo suficiente para que el motor se detenga primero. Si el motor requiere una rampa de
conexi√≥n o de desconexi√≥n, esta rampa deber√° realizarse controlando el ciclo de trabajo de la
forma correspondiente.

Duraci√≥n del periodo
La duraci√≥n del periodo se ajusta en la configuraci√≥n hardware entre 100 Œºs y 85 s con una
precisi√≥n de 1 ¬µs.
La duraci√≥n del periodo tambi√©n puede modificarse con la interfaz de control introduciendo un
nuevo valor en SLOT como n√∫mero entero (UDINT). En este caso, seleccione, por medio del
bit de control MODE_SLOT, si la modificaci√≥n debe aplicarse una sola vez o de modo c√≠clico:
MODE_SLOT = 0

Modificaci√≥n √∫nica:
En cuanto se escribe el valor 1D en el correspondiente byte de salida, el valor
de SLOT se aplica una sola vez como duraci√≥n del periodo y se conserva
hasta la pr√≥xima modificaci√≥n.
Las modificaciones por medio de SLOT se hacen efectivas con el pr√≥ximo
flanco ascendente en DQn.A/DQn.B.

MODE_SLOT = 1

Modificaci√≥n c√≠clica:
Si se escribe el valor 17D en el correspondiente byte de salida, el valor actual
de SLOT se aplica c√≠clicamente como duraci√≥n del periodo.
Las modificaciones por medio de SLOT se hacen efectivas con el pr√≥ximo
flanco ascendente en DQn.A/DQn.B.

Encontrar√° m√°s informaci√≥n en AUTOHOTSPOT.

Retardo a la conexi√≥n
El retardo a la conexi√≥n se ajusta en la configuraci√≥n hardware entre 0 y 85 s con una precisi√≥n
de 1 ¬µs.
El retardo a la conexi√≥n tambi√©n puede modificarse a trav√©s de la interfaz de control
introduciendo un nuevo valor en SLOT como n√∫mero entero (UDINT). En este caso,

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1321

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
seleccione, por medio del bit de control MODE_SLOT, si la modificaci√≥n debe aplicarse una
sola vez o de modo c√≠clico:
MODE_SLOT = 0

Modificaci√≥n √∫nica:
En cuanto se escribe el valor 2D en el correspondiente byte de salida, el valor
de SLOT se aplica una sola vez como retardo a la conexi√≥n y se conserva
hasta la pr√≥xima modificaci√≥n.
Las modificaciones por medio de SLOT se hacen efectivas en la pr√≥xima
secuencia de salida. La modificaci√≥n no afecta a la secuencia de salida en
curso.

MODE_SLOT = 1

Modificaci√≥n c√≠clica:
Si se escribe el valor 18D en el correspondiente byte de salida, el valor actual
de SLOT se aplica c√≠clicamente como retardo a la conexi√≥n.
Las modificaciones por medio de SLOT se hacen efectivas en la pr√≥xima
secuencia de salida. La modificaci√≥n no afecta a la secuencia de salida en
curso.

Nota
En el modo is√≥crono, los retardos a la conexi√≥n parametrizados no tienen efecto.
Encontrar√° m√°s informaci√≥n en AUTOHOTSPOT.

Configuraci√≥n
Introducci√≥n
El m√≥dulo tecnol√≥gico se configura y parametriza con el software de configuraci√≥n.
Las funciones del m√≥dulo tecnol√≥gico se controlan con el programa de usuario a trav√©s de la
interfaz de control y respuesta.

1322

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Entorno del sistema
El m√≥dulo tecnol√≥gico puede utilizarse en los siguientes entornos de sistema:
Aplicaciones posibles

Componentes necesarios

Software de configuraci√≥n

En el programa de usuario

Operaci√≥n centralizada
con una CPU 151xSP

‚óè Sistema de automatizaci√≥n
ET 200SP

STEP 7 (TIA Portal):

Acceso directo a la inter‚Äê
faz de control y respuesta
en los datos IO

‚óè TM Pulse 2x24V
Operaci√≥n descentraliza‚Äê ‚óè Sistema de automatizaci√≥n
da con una CPU S7-1500
S7-1500
‚óè Sistema de periferia
descentralizada ET 200SP

Configuraci√≥n del dispositivo y
ajuste de par√°metros en la confi‚Äê
guraci√≥n hardware
STEP 7 (TIA Portal):
Configuraci√≥n del dispositivo y
ajuste de par√°metros en la confi‚Äê
guraci√≥n hardware

‚óè TM Pulse 2x24V
Operaci√≥n descentraliza‚Äê ‚óè Sistema de automatizaci√≥n
da con una CPU
S7-300/400
S7-300/400
‚óè Sistema de periferia
descentralizada ET 200SP
‚óè TM Pulse 2x24V
Operaci√≥n descentraliza‚Äê ‚óè Sistema de automatizaci√≥n
da con PROFINET IO en
de otro fabricante
un sistema de otro fabri‚Äê
‚óè Sistema de periferia
cante
descentralizada ET 200SP
‚óè TM Pulse 2x24V
Operaci√≥n descentraliza‚Äê ‚óè Sistema de automatizaci√≥n
da con PROFIBUS DP
de otro fabricante
en un sistema de otro fa‚Äê
‚óè Sistema de periferia
bricante
descentralizada ET 200SP
‚óè TM Pulse 2x24V

STEP 7 (TIA Portal):
Configuraci√≥n del dispositivo y
ajuste de par√°metros en la confi‚Äê
guraci√≥n hardware
STEP 7:
Configuraci√≥n del dispositivo y
ajuste de par√°metros con HSP
Software de configuraci√≥n de otro
fabricante:
Configuraci√≥n del dispositivo y
ajuste de par√°metros con archivo
GSD
Software de configuraci√≥n de otro
fabricante:
Archivo GSD, configuraci√≥n del
dispositivo y ajuste de par√°metros
a trav√©s del juego de datos 128

Hardware Support Packages (HSP)
STEP 7
Los Hardware Support Packages (HSP) pueden descargarse de Internet (https://
support.industry.siemens.com/cs/ww/es/view/23183356).

Archivo GSD
El archivo GSD correspondiente al sistema de periferia descentralizada ET 200SP est√°
disponible para su descarga en Internet:
‚óè Archivo GSD PROFINET IO (http://support.automation.siemens.com/WW/view/es/
57138621)
‚óè Archivo GSD PROFIBUS DP (http://support.automation.siemens.com/WW/view/es/
73016883)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1323

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Ajuste de par√°metros
Las propiedades del m√≥dulo tecnol√≥gico se establecen mediante diferentes par√°metros. En
funci√≥n de los ajustes, no todos los par√°metros est√°n disponibles. Si la parametrizaci√≥n se
efect√∫a en el programa de usuario, los par√°metros se transfieren al m√≥dulo con la instrucci√≥n
"WRREC" por medio del juego de datos 128.
En este modo de operaci√≥n, los par√°metros del m√≥dulo se ajustan de la siguiente manera:
Ajuste de par√°metros me‚Äê
diante...

Procedimiento b√°sico

Configuraci√≥n hardware en
STEP 7 (TIA Portal)

1. Inserte el m√≥dulo desde la carpeta "M√≥dulos tecnol√≥gicos" del
cat√°logo de hardware.
2. Ajuste el modo de operaci√≥n "PWM con motor DC" y los restantes
par√°metros del m√≥dulo en la configuraci√≥n hardware.
3. Cargue el proyecto en la CPU.

Configuraci√≥n hardware en
STEP 7 con HSP

1. Instale el archivo HSP correspondiente.
A continuaci√≥n encontrar√° el m√≥dulo en el cat√°logo de hardware,
bajo "ET 200SP".
2. Ajuste el modo de operaci√≥n "PWM con motor DC" y los restantes
par√°metros del m√≥dulo en la configuraci√≥n hardware.
3. Cargue el proyecto en la CPU.

Configuraci√≥n hardware con
archivo GSD para la opera‚Äê
ci√≥n descentralizada en
PROFINET IO

1. Instale el archivo GSD PROFINET actual.
A continuaci√≥n encontrar√° el m√≥dulo en el cat√°logo de hardware en
"Otros dispositivos de campo > PROFINET IO > I/O".
2. Ajuste el modo de operaci√≥n "PWM con motor DC" y los restantes
par√°metros del m√≥dulo en la configuraci√≥n hardware.
3. Cargue el proyecto en la CPU.

Configuraci√≥n hardware con
archivo GSD para la opera‚Äê
ci√≥n descentralizada en
PROFIBUS DP

1. Instale el archivo GSD PROFIBUS actual.
A continuaci√≥n encontrar√° el m√≥dulo en el cat√°logo de hardware en
"Otros dispositivos de campo > PROFIBUS DP > I/O".
2. Cargue el proyecto en la CPU.
Los par√°metros del m√≥dulo se cargar√°n con los ajustes
predeterminados (ver la tabla siguiente).
3. Ajuste el modo de operaci√≥n "PWM con motor DC" y los restantes
par√°metros en el programa del usuario con el juego de datos 128.

1324

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Par√°metros del TM Pulse 2x24V en el modo de operaci√≥n "PWM con motor DC"
En la columna "Rango", los ajustes predeterminados de los par√°metros aparecen marcados
en negrita.
Tabla 5-16

Par√°metros ajustables
Par√°metro

Configuraci√≥n de canal

Rango de valores
1

‚óè 2 canales (2 A):

Rango efectivo
M√≥dulo

‚óè 1 canal (4 A)
Diagn√≥stico agrupado

‚óè Desactivado

Canal

‚óè Activado
Diagn√≥stico DQA

‚óè Desactivado

Canal

‚óè Activado
Diagn√≥stico DQB

‚óè Desactivado

Canal

‚óè Activado
Funci√≥n DI

‚óè Entrada

Canal

‚óè Habilitaci√≥n HW
‚óè Final de carrera
Retardo a la entrada para entra‚Äê
das digitales

‚óè Ninguno

Canal

‚óè 0,05 ms
‚óè 0,1 ms
‚óè 0,4 ms
‚óè 0,8 ms
‚óè 1,6 ms
‚óè 3,2 ms
‚óè 12,8 ms
‚óè 20 ms

1

Duraci√≥n del periodo

100...1000...85000000 Œºs

Canal

Duraci√≥n del periodo real

se calcula autom√°ticamente (solo lectura) Canal

Retardo a la conexi√≥n para salida
de impulso

0...85000000 Œºs

Canal

En la configuraci√≥n con HSP para STEP 7 o con archivo GSD, se establece la configuraci√≥n de
canales seleccionando el nombre del m√≥dulo.

Nota
Configuraci√≥n con GSD para PROFIBUS
En la configuraci√≥n con GSD para PROFIBUS, las posibilidades de parametrizaci√≥n no est√°n
disponibles. A los par√°metros del m√≥dulo se asignan los valores predeterminados. Ajuste el
modo de operaci√≥n "PWM con motor DC" y los restantes par√°metros en el programa del
usuario con el juego de datos 128.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1325

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

√Årea de direcciones
Espacio de direcciones del m√≥dulo tecnol√≥gico
Tabla 5-17

Alcance de las direcciones de entrada y salida
Entradas

Salidas

Alcance por canal tecnol√≥gico

8 bytes

12 bytes

Alcance en modo monocanal

8 bytes

12 bytes

Alcance en modo bicanal

16 bytes

24 bytes

Interfaz de control y respuesta
Nota
En Internet (https://support.industry.siemens.com/cs/ww/es/view/109482396) puede
descargarse una librer√≠a con los tipos de datos PLC (LPD) para STEP 7 (TIA Portal) y SIMATIC
S7-1200/S7-1500.

Asignaci√≥n de la interfaz de control
El programa de usuario controla el comportamiento del m√≥dulo tecnol√≥gico a trav√©s de la
interfaz de control.

Interfaz de control por canal
La siguiente tabla muestra la asignaci√≥n de la interfaz de control:
Offset de
byte res‚Äê
pecto de
la direc‚Äê
ci√≥n ini‚Äê
cial
Canal
0/1
‚Üì ‚Üì

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

0
‚Ä¶
3

12
‚Ä¶
15

DINT: Ciclo de trabajo en el formato anal√≥gico de S7

4
‚Ä¶
7

16
‚Ä¶
19

UDINT: Valor de carga

8

20

9

21

1326

Bit 1

Bit 0

OUTPUT_VALUE

SLOT

Reservado

MODE_
SLOT
Reservado

LD_SLOT
SW_
ENABLE

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Offset de
byte res‚Äê
pecto de
la direc‚Äê
ci√≥n ini‚Äê
cial
Canal
0/1
‚Üì ‚Üì
10

22

11

23

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Reservado

Bit 1

Bit 0

RES_
ERROR

Reservado

Nota
El canal 1 solo est√° disponible en el modo bicanal del m√≥dulo.

Bit de control/valor

Explicaciones

OUTPUT_VALUE

Con este valor se define el ciclo de trabajo.
Rango de valores:
‚óè Ciclo de trabajo: de ‚Äí27648 a 27648D
En caso de rebase por exceso o por defecto del rango de valores, se activa el bit de respuesta
ERR_OUT_VAL y se utiliza el valor m√≠nimo o m√°ximo.

SLOT

Con este valor se define el valor de carga.
Rango de valores:
‚óè Duraci√≥n del periodo en Œºs: de 100 a 85000000D
‚óè Retardo a la conexi√≥n en Œºs: de 0 a 85000000D
Con el bit de control MODE_SLOT se define si una modificaci√≥n debe aplicarse una sola vez o
de modo c√≠clico.
Los valores no v√°lidos dan lugar a la activaci√≥n del bit de respuesta ERR_LD (con MODE_SLOT
= 0) o ERR_SLOT_VAL (con MODE_SLOT = 1).

MODE_SLOT

Con este bit se define si una modificaci√≥n en SLOT debe aplicarse una sola vez o de modo c√≠clico.
0 significa: Si se escribe el valor en cuesti√≥n en el correspondiente byte de salida, el valor de
SLOT se aplica una sola vez y se mantiene hasta la pr√≥xima modificaci√≥n. Las modificaciones del
retardo a la conexi√≥n por medio de SLOT se hacen efectivas en la pr√≥xima secuencia de salida.
Las modificaciones de la duraci√≥n del periodo por medio de SLOT se hacen efectivas con el
pr√≥ximo flanco ascendente en DQn.A/DQn.B. Tras un nuevo arranque del m√≥dulo, el valor se
sobrescribe con el valor ajustado en la configuraci√≥n hardware.
1 significa: Si se escribe el valor en cuesti√≥n en el correspondiente byte de salida, el valor actual
de SLOT se aplica c√≠clicamente. Las modificaciones del retardo a la conexi√≥n por medio de SLOT
se hacen efectivas en la pr√≥xima secuencia de salida. Las modificaciones de la duraci√≥n del
periodo por medio de SLOT se hacen efectivas con el pr√≥ximo flanco ascendente en DQn.A/
DQn.B.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1327

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Bit de control/valor

Explicaciones

LD_SLOT

Con esta solicitud de carga se especifica el significado del valor en SLOT:
‚óè 0000B significa: Ninguna acci√≥n, estado de reposo
‚óè 0001B significa: Duraci√≥n del periodo en Œºs
‚óè 0010B significa: Retardo a la conexi√≥n en Œºs
Todos los valores no indicados son no v√°lidos y dan lugar a la activaci√≥n del bit de respuesta
ERR_LD (si MODE_SLOT = 0) o ERR_SLOT_VAL (si MODE_SLOT = 1).

SW_ENABLE

Con este bit se activa la habilitaci√≥n software. Si se utiliza la habilitaci√≥n hardware, se combina
con la habilitaci√≥n software.
‚óè 0 significa: Finalizar salida
‚óè 1 significa: Iniciar salida
El uso de la habilitaci√≥n hardware se activa mediante parametrizaci√≥n. El control de la habilita‚Äê
ci√≥n hardware se realiza externamente a trav√©s de la entrada digital DIn.0.

RES_ERROR

Con este bit se desactivan los siguientes bits de respuesta cuando hay errores presentes:
‚óè ERR_24V
‚óè ERR_DQA
‚óè ERR_DQB
‚óè ERR_LD

Reservado

Los bits de reserva deben estar ajustados a 0.

Asignaci√≥n de la interfaz de respuesta
El programa de usuario recibe valores actuales e informaci√≥n de estado del m√≥dulo
tecnol√≥gico a trav√©s de la interfaz de respuesta.

Interfaz de respuesta por canal
La siguiente tabla muestra la asignaci√≥n de la interfaz de respuesta:
Offset de
byte res‚Äê
pecto de
la direc‚Äê
ci√≥n ini‚Äê
cial
Canal
0/1
‚Üì ‚Üì
0

8

1

9

2

10

3
...
7

11
...
15

1328

Bit 7

Bit 6

Bit 5

Bit 4

Bit 3

Bit 2

Bit 1

Bit 0

ERR_
SLOT_VAL

ERR_
OUT_VAL

ERR_DQB

ERR_DQA

Reservado

ERR_LD

ERR_24V

ERR_PWR

STS_SW_
ENABLE

STS_
READY

Reservado

STS_LD_
SLOT

STS_DI

STS_DQB

Reservado

Reservado

Reservado
STS_DQA

STS_
ENABLE

Reservado

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Nota
El canal 1 solo est√° disponible en el modo bicanal del m√≥dulo.

Bit de respuesta/
Valor

Explicaciones

ERR_SLOT_VAL

Este bit indica que el valor de SLOT o LD_SLOT no es v√°lido (si MODE_SLOT = 1) y no se ha
aceptado.
Cuando el m√≥dulo recibe un valor v√°lido de la interfaz de control, se desactiva ERR_SLOT_VAL
autom√°ticamente.

ERR_OUT_VAL

Este bit indica que el valor de OUTPUT_VALUE no es v√°lido.
Cuando el m√≥dulo recibe un valor v√°lido de la interfaz de control, se desactiva ERR_OUT_VAL
autom√°ticamente.

ERR_DQA

Este bit indica un cortocircuito o una sobrecarga en la salida DQn.A. Si se ha habilitado la alarma de
diagn√≥stico "Diagn√≥stico DQA", este error dispara la alarma de diagn√≥stico "Error en salidas digita‚Äê
les".
El bit se desactiva despu√©s de acusar el error con RES_ERROR.

ERR_DQB

Este bit indica un cortocircuito o una sobrecarga en la salida DQn.B o el intento de activar simult√°‚Äê
neamente los bits de control SET_DQA y SET_DQB. Si se ha habilitado la alarma de diagn√≥stico
"Diagn√≥stico DQB", este error dispara la alarma de diagn√≥stico "Error en salidas digitales".
El bit se desactiva despu√©s de acusar el error con RES_ERROR.

ERR_LD

Este bit indica que el valor de SLOT o LD_SLOT (si MODE_SLOT = 0) no es v√°lido y no se ha
aceptado.
El bit se desactiva despu√©s de acusar el error con RES_ERROR.

ERR_24V

Este bit indica un cortocircuito o una sobrecarga en la salida 24VDC. Si se han habilitado las alarmas
de diagn√≥stico, este error dispara la alarma de diagn√≥stico "Cortocircuito/sobrecarga en la alimen‚Äê
taci√≥n de sensores externa".
El bit se desactiva despu√©s de acusar el error con RES_ERROR.

ERR_PWR

Este bit indica que la tensi√≥n de alimentaci√≥n L+ es insuficiente. Si se han habilitado las alarmas de
diagn√≥stico, en caso de error en la tensi√≥n de alimentaci√≥n se dispara la alarma de diagn√≥stico "Error
de tensi√≥n de alimentaci√≥n".
Cuando la tensi√≥n de alimentaci√≥n L+ vuelve a ser suficiente, se desactiva ERR_PWR autom√°tica‚Äê
mente.
El bit no se activa si no hay tensi√≥n de alimentaci√≥n aplicada.

STS_SW_ENABLE

Este bit indica el estado de la habilitaci√≥n software.
‚óè 0 significa: Habilitaci√≥n software no activa
‚óè 1 significa: Habilitaci√≥n software activa

STS_READY

Este bit indica que el m√≥dulo devuelve datos de usuario v√°lidos. El m√≥dulo ha arrancado y est√°
parametrizado.

STS_LD_SLOT

Este bit indica, por medio de un cambio de estado (conmutaci√≥n), que la solicitud de carga LD_SLOT
ha sido detectada y ejecutada (si MODE_SLOT = 0).

STS_DI

Este bit indica el estado de la entrada digital DIn.0.

STS_DQA

Este bit indica el estado de la salida digital DQn.A.

STS_DQB

Este bit indica el estado de la salida digital DQn.B.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1329

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Bit de respuesta/
Valor

Explicaciones

STS_ENABLE

Este bit indica que hay una secuencia de salida en curso.

Reservado

Los bits de reserva est√°n ajustados a 0.

Modo is√≥crono
El m√≥dulo tecnol√≥gico soporta la funci√≥n de sistema "Modo is√≥crono". En el modo is√≥crono, la
secuencia de salida se inicia en el instante To, una vez activado el bit de control SW_ENABLE.
En modo is√≥crono, la duraci√≥n del periodo se adapta al ciclo de aplicaci√≥n (TAPP) y se sincroniza
con este. La sincronizaci√≥n es especialmente √∫til para crear lazos de regulaci√≥n.
El m√≥dulo adapta el valor asignado de duraci√≥n del periodo de modo que se obtenga una
relaci√≥n entera. En el caso menos favorable, la diferencia equivale a medio ciclo de aplicaci√≥n.
Ejemplos:
Ciclo de aplicaci√≥n
TAPP

Duraci√≥n del periodo asigna‚Äê
da TSetpoint

Duraci√≥n del periodo real
TActual

TAPP:TActual

10 ms
(10000 Œºs)

1800 Œºs

1666 Œºs

6:1

2000 Œºs

2000 Œºs

5:1

3000 Œºs

3333 Œºs

3:1

5000 Œºs

5000 Œºs

2:1

6000 Œºs

5000 Œºs

2:1

12000 Œºs

10000 Œºs

1:1

16000 Œºs

20000 Œºs

1:2

La figura siguiente muestra un ejemplo de relaci√≥n 1:1 entre el ciclo de aplicaci√≥n y la duraci√≥n
del periodo con un ciclo de trabajo del 50%.
'XUDFL¬µQGHOSHULRGR

'4Q$
&LFORGHDSOLFDFL¬µQ
72

72

72

72

La figura siguiente muestra un ejemplo de relaci√≥n 3:1 entre el ciclo de aplicaci√≥n y la duraci√≥n
del periodo con un ciclo de trabajo del 50%.

1330

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
'XUDFL¬µQGHOSHULRGR

'4Q$
&LFORGHDSOLFDFL¬µQ
72

72

72

72

La figura siguiente muestra un ejemplo de relaci√≥n 1:3 entre el ciclo de aplicaci√≥n y la duraci√≥n
del periodo con un ciclo de trabajo del 50%.
'XUDFL¬µQGHOSHULRGR

'4Q$
&LFORGHDSOLFDFL¬µQ
72

72

72

72

Nota
Sin habilitaci√≥n hardware ni retardo a la conexi√≥n
En modo is√≥crono no se puede utilizar habilitaci√≥n hardware ni retardo a la conexi√≥n.
Si la habilitaci√≥n hardware se parametriza en modo is√≥crono, el m√≥dulo lo interpreta como un
final de carrera.

M√°s informaci√≥n
Encontrar√° una descripci√≥n detallada del modo is√≥crono:
‚óè En el manual de funciones Modo is√≥crono, disponible para descarga en Internet (https://
support.industry.siemens.com/cs/ww/es/view/109755401).
‚óè En el manual de funciones PROFINET con STEP 7, disponible para su descarga en Internet
(https://support.industry.siemens.com/cs/ww/es/view/49948856).

5.1.2.7

Conexi√≥n en paralelo de los canales
Al conectar los dos canales en paralelo se obtiene un canal l√≥gico con una intensidad de salida
de hasta 4 A.
La figura siguiente muestra el modo bicanal, en el que los canales funcionan
independientemente el uno del otro y se parametrizan por separado.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1331

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
&DQDO
3DU¬£PHWUR

0RGRVGH
RSHUDFL¬µQ\
IXQFLRQHV

3URJUDPDGHXVXDULR

,QWHUID]GHUHVSXHVWD

$P¬£[

',

&DQDOb
3DU¬£PHWUR

,QWHUID]GHFRQWURO
0RGRVGH
RSHUDFL¬µQ\
IXQFLRQHV

,QWHUID]GHUHVSXHVWD

Figura 5-12

'4$'4%

3URFHVR

,QWHUID]GHFRQWURO

'4$'4%

$P¬£[

',

Modo de dos canales

La figura siguiente muestra el modo monocanal, en el que solo se parametriza el canal 0.
FDQDOb
3DU¬£PHWUR

'4$'4%

(OFDQDObVLJXH
DO
FDQDOb

Figura 5-13

1332

$P¬£[

',

3URJUDPDGHXVXDULR

,QWHUID]GHUHVSXHVWD

0RGRVGH
RSHUDFL¬µQ\
IXQFLRQHV

'4$'4%

&LUFXLWR
SDUDOHOR
H[WHUQR
SDUDPRGR
PRQRFDQDO

3URFHVR

,QWHUID]GHFRQWURO

Modo monocanal (circuito paralelo)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
La tabla siguiente muestra la intensidad de carga posible en funci√≥n de la salida High Speed:
Corriente m√°xima de salida
Salida High Speed desactivada

Salida High Speed activada

Modo bicanal

2A

100 mA

Modo monocanal

4A

No permitido

Esta funci√≥n se ajusta en la configuraci√≥n hardware por medio del par√°metro "Configuraci√≥n
de canales".

5.1.2.8

Control directo de salidas digitales

Mando de la secuencia de salida a trav√©s del programa de usuario o el m√≥dulo
Con el bit de control TM_CTRL_DQ se establece el modo en que se controlar√°n DQn.A y
DQn.B:
TM_CTRL_DQ = 0

TM_CTRL_DQ = 1

El programa de usuario define los estados de las La secuencia de salida del modo de operaci√≥n pa‚Äê
salidas DQn.A y DQn.B mediante los bits de con‚Äê rametrizado determina el estado de las salidas
trol SET_DQA y SET_DQB.
DQn.A y DQn.B.

Nota
Control directo no disponible con PWM con motor DC
En el modo de operaci√≥n "PWM con motor DC", los bits de control TM_CTRL_DQ, SET_DQA
y SET_DQB no son efectivos.

Diagrama de impulsos
El ajuste de TM_CTRL_DQ no cancela la secuencia de salida en curso. El m√≥dulo ejecuta las
secuencias de salida internamente sea cual sea el estado de TM_CTRL_DQ.
La figura siguiente muestra un ejemplo de secuencia de salida para el control directo de DQn.A:

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1333

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
6:B(1$%/(

676B6:B(1$%/(
',Q
+DELOLWDFL¬µQ+:
7LHPSRGHFRPXQLFDFL¬µQ\GHUHDFFL¬µQ
UHVSHFWLYDPHQWH

'4Q$

70B&75/B'4
6(7B'4$
676B(1$%/(

(55B38/6(

5HWDUGRDOD
FRQH[L¬µQ

Figura 5-14

5HWDUGRDOD
FRQH[L¬µQ

'XUDFL¬µQGHOLPSXOVR

Ejemplo de secuencia de salida con control directo de DQn.A (modo de operaci√≥n Salida de impulsos)

Nota
Si se activan los bits de control SET_DQA y SET_DQB al mismo tiempo, se activa el bit
ERR_DQB en la interfaz de respuesta y solo se activa la salida digital DQn.A.
El bit ERR_DQB se desactiva despu√©s de que se haya acusado el error activando
RES_ERROR.
Adem√°s de la consigna principal OUTPUT_VALUE, puede modificarse una consigna para otro
par√°metro.

1334

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Con el valor SLOT de la interfaz de control se define el valor de carga. Con la solicitud de carga
LD_SLOT se especifica el significado del valor de SLOT en funci√≥n del modo de operaci√≥n:
LD_SLOT

Significado del valor de
SLOT

Modos de operaci√≥n para el uso del
valor

0D

Ninguna acci√≥n, estado de
reposo

Todos los modos de operaci√≥n

1D

Duraci√≥n del periodo

‚óè Modulaci√≥n por ancho de impulso
PWM

Tipo de datos
de SLOT
‚Äî
UDINT

‚óè Tren de impulsos
‚óè PWM con motor DC:
2D

Retardo a la conexi√≥n

‚óè Salida de impulso
‚óè Modulaci√≥n por ancho de impulso
PWM
‚óè Tren de impulsos
‚óè Salida de frecuencia
‚óè PWM con motor DC:

3D

Retardo a la desconexi√≥n

‚óè Retardo a la conexi√≥n/desconexi√≥n

4D

Ciclo de trabajo

‚óè Tren de impulsos

5D

Rampa de conexi√≥n de dit‚Äê ‚óè Modulaci√≥n por ancho de impulso
her
PWM
y rampa de desconexi√≥n
de dither

2 √ó INT

6D

Amplitud de dither

UDINT

7D

Duraci√≥n del periodo de dit‚Äê ‚óè Modulaci√≥n por ancho de impulso
her
PWM

‚óè Modulaci√≥n por ancho de impulso
PWM

Seleccione, por medio del bit de control MODE_SLOT, si la modificaci√≥n del valor en cuesti√≥n
debe aplicarse una sola vez o de modo c√≠clico.

MODE_SLOT
Modificaci√≥n √∫nica (MODE_SLOT = 0)
Se recomienda la modificaci√≥n √∫nica cuando, adem√°s de OUTPUT_VALUE, deba modificarse
de vez en cuando otro par√°metro. En este caso no se inicializa el m√≥dulo. En cambio, si se
realiza la modificaci√≥n transfiriendo un nuevo juego de par√°metros, s√≠ se inicializa el m√≥dulo.
En el caso de la modificaci√≥n √∫nica, se utilizan los siguientes par√°metros:
Par√°metros de control

‚óè SLOT
‚óè LD_SLOT
‚óè MODE_SLOT
‚óè RES_ERROR

Par√°metros de respuesta

‚óè STS_LD_SLOT
‚óè ERR_LD

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1335

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Para efectuar una modificaci√≥n √∫nica, siga este procedimiento b√°sico:
1. Compruebe si la orden precedente se ha ejecutado correctamente, es decir, si se ha
modificado STS_LD_SLOT y no se ha activado ERR_LD.
2. Si ERR_LD se ha activado:
‚Äì Escriba LD_SLOT = 0 y confirme el error activando RES_ERROR. Contin√∫e con el
paso 1.
O bien:
‚Äì Escriba un valor v√°lido tanto en SLOT como en LD_SLOT y confirme el error activando
RES_ERROR. Contin√∫e con el paso 1.
3. Introduzca un valor nuevo en SLOT.
4. Introduzca un valor modificado en LD_SLOT.
Nota
En el caso de la modificaci√≥n √∫nica, se presupone que, al contrario que la modificaci√≥n
c√≠clica, el mismo par√°metro no se modifica dos veces consecutivas. Si se desea modificar
el mismo par√°metro dos veces consecutivas, deber√° insertarse una "orden de marcha en
vac√≠o" (LD_SLOT = 0) entre las dos √≥rdenes.
5. Contin√∫e con el paso 1.
Nota
La secuencia tambi√©n se representa detalladamente en un diagrama en el anexo.

Nota
Tras un nuevo arranque del m√≥dulo, el valor del par√°metro afectado se sobrescribe en el juego
de datos interno del m√≥dulo con el valor ajustado en la configuraci√≥n hardware.

Modificaci√≥n c√≠clica (MODE_SLOT = 1)
Se recomienda la modificaci√≥n c√≠clica cuando, adem√°s de OUTPUT_VALUE, deba
modificarse c√≠clicamente otro par√°metro.
Nota
Para finalizar la modificaci√≥n c√≠clica durante la secuencia de salida, ajuste LD_SLOT y
MODE_SLOT a 0. Los valores modificados hasta entonces se mantienen.

Esquema del proceso
La figura siguiente muestra un ejemplo del procedimiento b√°sico:

1336

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
02'(B6/27
5DQJRGHYDORUHV
QRY¬£OLGR
6/27

/'B6/27
676B/'B6/27
(55B6/27B9$/
(55B/'
5(6B(5525
D E

D E

F G H D E

D

E F

G H

1a Se escribe un valor v√°lido en SLOT y LD_SLOT.
1b Se conmuta el bit de respuesta STS_LD_SLOT, ya que la solicitud de carga LD_SLOT ha sido detectada y ejecutada por
el m√≥dulo. El valor de SLOT se aplica una sola vez y se mantiene hasta la pr√≥xima modificaci√≥n de LD_SLOT. El
par√°metro afectado se actualiza en el juego de datos interno del m√≥dulo y se hace efectivo con la pr√≥xima secuencia de
salida.
2a Se escribe un valor modificado y v√°lido en LD_SLOT y un valor no v√°lido en SLOT.
2b Se activa el bit de respuesta ERR_LD, ya que el valor de SLOT no es v√°lido. El valor no se aplica.
2c Active el bit de control RES_ERROR para acusar el error.
2d El bit de respuesta ERR_LD se desactiva.
2e Se desactiva el bit de control RES_ERROR.
3a Se escribe un valor modificado y v√°lido en SLOT y LD_SLOT.
3b Se conmuta el bit de respuesta STS_LD_SLOT, ya que la solicitud de carga LD_SLOT ha sido detectada y ejecutada por
el m√≥dulo. El valor de SLOT se aplica una sola vez y se mantiene hasta la pr√≥xima modificaci√≥n de LD_SLOT. El
par√°metro afectado se actualiza en el juego de datos interno del m√≥dulo y se hace efectivo con la pr√≥xima secuencia de
salida.
4a Se activa MODE_SLOT y se escriben c√≠clicamente valores v√°lidos en SLOT y LD_SLOT. El valor de SLOT se aplica
c√≠clicamente y se hace efectivo en la pr√≥xima secuencia de salida. Sin embargo, no se guarda el cambio en cuesti√≥n.
4b Se escriben c√≠clicamente valores no v√°lidos en SLOT.
4c Se activa el bit de respuesta ERR_SLOT_VAL, ya que el valor de SLOT no es v√°lido. No se aplica el valor en cuesti√≥n
de SLOT.
4d Se escriben c√≠clicamente valores v√°lidos en SLOT.
4e El bit de respuesta ERR_SLOT_VAL se desactiva autom√°ticamente porque el m√≥dulo ha vuelto a recibir valores v√°lidos.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1337

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

5.1.3

Principios b√°sicos de la salida de impulsos (CPU compacta)

5.1.3.1

Modos de operaci√≥n

Descripci√≥n general
En este cap√≠tulo se describen las nuevas funciones de la CPU con versi√≥n de firmware V2.0.
Modo de operaci√≥n

Aplicaciones

Ventajas para el cliente

Modulaci√≥n por ancho
de impulso (PWM)
(P√°gina 1339)

El modo de operaci√≥n PWM se utiliza cuando
se desea que un m√≥dulo de salida (calenta‚Äê
miento, forma constructiva) controle potencias
lo m√°s elevadas posible con m√≠nimas p√©rdidas.

En caso de modulaci√≥n por ancho de impulso, a
trav√©s de la salida digital se emite una se√±al con
una duraci√≥n de periodo definida y un ciclo de tra‚Äê
bajo variable. El ciclo de trabajo es la relaci√≥n en‚Äê
tre la duraci√≥n del impulso y la duraci√≥n del perio‚Äê
do. Adem√°s del ciclo de trabajo, en el modo de
operaci√≥n PWM tambi√©n se puede controlar la du‚Äê
raci√≥n del periodo.

La modulaci√≥n por ancho de impulso se utiliza,
por ejemplo, para controlar:
‚óè la temperatura de una resistencia
calefactora
‚óè la fuerza de una bobina de una v√°lvula
proporcional y, con ello, la posici√≥n de una
v√°lvula desde cerrada hasta
completamente abierta

Con la modulaci√≥n por ancho de impulso se var√≠a
el valor medio de la tensi√≥n de salida. Dependien‚Äê
do de la carga conectada, es posible controlar as√≠
la corriente de carga o la potencia.

‚óè la velocidad de giro de un motor desde
velocidad cero hasta plena velocidad
Salida de frecuencia
(P√°gina 1343)

Puede implementar aplicaciones con frecuen‚Äê
cias de hasta 100 kHz y as√≠ trabajar en rangos
que no se pueden alcanzar con una CPU que
tenga una salida digital sencilla.

Es posible generar frecuencias con gran preci‚Äê
si√≥n.
En el caso de que las condiciones de transmisi√≥n
no sean √≥ptimas, el receptor puede reconstruir la
informaci√≥n con toda precisi√≥n.
En el modo de operaci√≥n Salida de frecuencia es
posible asignar un valor de frecuencia con fre‚Äê
cuencias elevadas con m√°s precisi√≥n que median‚Äê
te la duraci√≥n del periodo (PWM).

Pulse Train Output
(PTO) (P√°gina 1346)

PTO tambi√©n se denomina interfaz de impulsos/
sentido. La interfaz de impulsos/sentido consta de
Se utiliza en muchas aplicaciones de posicio‚Äê 2 se√±ales. La frecuencia de la salida de impulso
namiento como, por ejemplo, para ejes de des‚Äê representa la velocidad, y el n√∫mero de impulsos
que se emiten representa el trayecto que se va a
plazamiento o de avance.
recorrer. La salida de sentido determina el sentido
del desplazamiento. La posici√≥n se define de este
modo con una precisi√≥n de incrementos.
Pulse Train Output es una interfaz muy exten‚Äê
dida para el control de accionamientos.

El control de las salidas se efect√∫a con S7‚Äë1500
Motion Control mediante objetos tecnol√≥gicos.
PTO es una interfaz sencilla y de uso universal
entre el controlador y el accionamiento. Por tanto,
es soportada por accionamientos paso a paso y
servoaccionamientos en todo el mundo.

1338

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Modo de operaci√≥n: Modulaci√≥n por ancho de impulso (PWM)
Caracter√≠sticas
El modo de operaci√≥n Modulaci√≥n por ancho de impulso (PWM) de la CPU compacta tiene las
siguientes caracter√≠sticas t√©cnicas:
M√≠nimo
Salida est√°ndar

Duraci√≥n
100 ¬µs con carga >
de impulso
0,1A 1)

Duraci√≥n
del perio‚Äê
do

M√°ximo

Salida High-Speed
desactivada

Salida High-Speed
activada

20 ¬µs con carga
> 0,1 A 1)

2 ¬µs 1)

200 ¬µs con carga ‚â•
2mA 1)

40 ¬µs con carga ‚â•
2mA 1)

10 ms 2)

100 Œºs 2)

Salida es‚Äê
t√°ndar

Salida HighSpeed desacti‚Äê
vada

Salida HighSpeed activa‚Äê
da

10 000 000 ¬µs (10 s)

10 Œºs

1)

Te√≥ricamente, es posible un valor m√°s bajo, pero la tensi√≥n de salida ya no podr√° tener la forma de impulso rectangular
completo, dependiendo de la carga conectada.

2)

En funci√≥n de la carga

Funcionamiento
En caso de modulaci√≥n por ancho de impulso, a trav√©s de la salida digital se emite una se√±al
con una duraci√≥n de periodo definida y un ciclo de trabajo variable. El ciclo de trabajo es la
relaci√≥n entre la duraci√≥n del impulso y la duraci√≥n del periodo. Adem√°s del ciclo de trabajo,
en el modo de operaci√≥n PWM tambi√©n se puede controlar la duraci√≥n del periodo.
Con la modulaci√≥n por ancho de impulso se var√≠a el valor medio de la tensi√≥n de salida.
Dependiendo de la carga conectada, es posible controlar as√≠ la corriente de carga o la potencia.
La duraci√≥n de impulso se puede expresar como cent√©sima de la duraci√≥n del periodo (de 0 a
100), como mil√©sima (de 0 a 1 000), como diezmil√©sima (de 0 a 10 000) o en el formato
anal√≥gico de S7.

‡Ω∞
‡Ω±

‚ë†
‚ë°

‡Ω±

Duraci√≥n del periodo
Duraci√≥n de impulso

La duraci√≥n de impulso puede estar entre 0 (no hay impulso, siempre desactivado) y el m√°ximo
de la escala (no hay impulso, duraci√≥n del periodo siempre activada).
La salida de PWM se puede utilizar, por ejemplo, para controlar la velocidad de un motor desde
velocidad cero hasta plena velocidad, o tambi√©n se puede utilizar para controlar la posici√≥n de
una v√°lvula desde cerrada hasta completamente abierta.
Para el control de salidas de impulso r√°pidas (salida High-Speed), se dispone de cuatro
generadores de impulsos respectivamente para PWM y para tren de impulsos (PTO). PTO es

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1339

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
utilizado por los objetos tecnol√≥gicos eje de posicionado, eje de velocidad y eje sincronizado.
Puede asignar cada generador de impulsos a PWM o PTO, pero no a ambos a la vez.
El modo de operaci√≥n Modulaci√≥n por ancho de impulso (PWM) se configura en STEP 7
(TIA Portal).
El modo de operaci√≥n Modulaci√≥n por ancho de impulso (PWM) posee las siguientes
funciones:
‚óè Si la opci√≥n "Salida High-Speed (0,1 A)" est√° activada, se puede generar una duraci√≥n
m√≠nima de impulso de 2 Œºs con una intensidad de 100 mA. Si la opci√≥n "Salida High-Speed
(0,1 A)" no est√° activada, se puede generar una duraci√≥n m√≠nima de impulso de 20 ¬µs con
una carga > 0,1 A y una duraci√≥n m√≠nima de impulso 40 ¬µs con una carga ‚â• 2mA y una
intensidad m√°xima de 0,5 A. Si se utiliza una salida est√°ndar, se puede generar una
duraci√≥n m√≠nima de impulso de 100 ¬µs con una carga > 0,1 A y una duraci√≥n m√≠nima de
impulso 200 ¬µs con una carga ‚â• 2mA.
‚óè Puede controlar la salida de impulso (DQA) del canal de forma manual a trav√©s de la
interfaz de control y respuesta.
‚óè Puede configurar la reacci√≥n a STOP de la CPU. En una transici√≥n a STOP de la CPU, la
salida de impulso (DQA) pasa al estado configurado.

Controlador
Para el modo de operaci√≥n Modulaci√≥n por ancho de impulso (PWM), el programa de usuario
accede directamente a la interfaz de control y respuesta del canal.
Se soporta la reparametrizaci√≥n mediante las instrucciones WRREC/RDREC y el juego de
datos de par√°metros 128. Para m√°s informaci√≥n al respecto, consulte el cap√≠tulo Juegos de
datos de par√°metros (PWM) del manual de producto correspondiente.
El ciclo de trabajo de la amplitud de impulso se controla con el campo OUTPUT_VALUE de la
interfaz de control. La modulaci√≥n por ancho de impulso genera impulsos continuos a partir de
este valor. La duraci√≥n del periodo se puede adaptar.
1
TM_CTRL_DQ
0
SW_ENABLE
(habilitaci√≥n soware)

STS_SW_ENABLE
Duraci√≥n del periodo

Duraci√≥n del periodo

Salida digital
Durac.
impulso

Durac.
pausa
impulso

STS_ENABLE

Ciclo de trabajo

1340

50%

20%

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Inicio de la secuencia de salida
El programa de control debe emitir la habilitaci√≥n para la secuencia de salida con ayuda de la
habilitaci√≥n de software (SW_ENABLE 0 ‚Üí 1). El bit de notificaci√≥n STS_SW_ENABLE indica
que la habilitaci√≥n de software est√° pendiente en PWM.
Si la habilitaci√≥n de software est√° activada (flanco ascendente), se activa STS_ENABLE. La
secuencia de salida se ejecuta continuamente mientras SW_ENABLE est√© activado.
Nota
Se√±al de mando de salida TM_CTRL_DQ
‚óè Si TM_CTRL_DQ = 1, la funci√≥n tecnol√≥gica toma el control y genera secuencias de
impulso en la salida PWM DQA.
‚óè Si TM_CTRL_DQ = 0, el programa de usuario toma el control y el usuario puede ajustar la
salida PWM DQA directamente a trav√©s del bit de control SET_DQA.

Interrupci√≥n de la secuencia de salida
Una desactivaci√≥n de la habilitaci√≥n de software (SW_ENABLE = 1 ‚Üí 0) interrumpe la
secuencia de salida actual. La √∫ltima duraci√≥n de periodo no concluye. STS_ENABLE y la
salida digital PWM DQA se ponen inmediatamente a 0.
Una nueva salida de impulso solo es posible tras reiniciar la secuencia de salida.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1341

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Duraci√≥n m√≠nima de impulso y pausa m√≠nima entre impulsos
La duraci√≥n m√≠nima de impulso y la pausa m√≠nima entre impulsos se asignan con ayuda del
par√°metro "Duraci√≥n m√≠nima de impulso".
‚óè Las duraciones de impulso determinadas por la funci√≥n tecnol√≥gica o el canal PWM que
tengan una duraci√≥n inferior a la m√≠nima se suprimen.
‚óè Las duraciones de impulso determinadas por la funci√≥n tecnol√≥gica o el canal PWM que
tengan una duraci√≥n superior a la duraci√≥n del periodo menos la pausa m√≠nima de impulso
se ponen al valor de la duraci√≥n del periodo (salida activada de forma permanente).
5

1
2

3



4



‚ë†
‚ë°
‚ë¢
‚ë£
‚ë§



Duraci√≥n del periodo
Duraci√≥n del periodo menos pausa m√≠nima de impulso
Duraci√≥n m√≠nima de impulso
OUTPUT_VALUE (tanto por mil ciclo de trabajo)
Duraci√≥n del impulso

Ajuste y modificaci√≥n del ciclo de trabajo del impulso
OUTPUT_VALUE asigna el ciclo de trabajo a la duraci√≥n actual del periodo. Con el par√°metro
"Formato de salida" se selecciona el √°rea del campo OUTPUT_VALUE de la interfaz de control.
‚óè Formato de salida 1/100: rango de valores entre 0 y 100
Duraci√≥n de impulso = (OUTPUT_VALUE/100) x duraci√≥n del periodo.
‚óè Formato de salida 1/1000: Rango de valores entre 0 y 1 000
Duraci√≥n de impulso = (OUTPUT_VALUE/1 000) x duraci√≥n de periodo.
‚óè Formato de salida 1/10000: Rango de valores entre 0 y 10 000
Duraci√≥n de impulso = (OUTPUT_VALUE/10 000) x duraci√≥n de periodo.
‚óè Formato de salida "Salida anal√≥gica de S7": rango de valores entre 0 y 27 648
Duraci√≥n de impulso = (OUTPUT_VALUE/27 648) x duraci√≥n del periodo.

1342

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Se asigna OUTPUT_VALUE directamente a trav√©s del programa de control. Con el pr√≥ximo
flanco ascendente en la salida se aplica un nuevo OUTPUT_VALUE.

Ajuste y modificaci√≥n de la duraci√≥n del periodo
‚óè Actualizaci√≥n permanente
La duraci√≥n de periodo se controla permanentemente a trav√©s de la interfaz de control. El
bit MODE_SLOT debe activarse ("1" significa actualizaci√≥n permanente); LD_SLOT debe
tener el valor 1 ("1" significa duraci√≥n de periodo). Ajuste el valor del periodo en el campo
SLOT. La unidad es siempre microsegundos.
‚Äì Salida High-Speed activada: entre 10 Œºs y 10 000 000 Œºs (10 s) en el campo SLOT
‚Äì Salida High-Speed desactivada: entre 100 Œºs y 10 000 000 Œºs (10 s) en el campo SLOT
‚Äì Salida est√°ndar (salida de 100 Hz): entre 10 000 ¬µs (10 ms) y 10 000 000 ¬µs (10 s) en
el campo SLOT
‚óè Actualizaci√≥n individual
Ajuste la duraci√≥n del periodo en los par√°metros de configuraci√≥n. Como alternativa,
efect√∫e una actualizaci√≥n individual a trav√©s de la interfaz de control. MODE_SLOT debe
borrarse ("0" significa actualizaci√≥n individual); LD_SLOT debe tener el valor 1 ("1" significa
duraci√≥n del periodo). Ajuste el valor de la duraci√≥n del periodo en el campo SLOT. La
unidad es siempre microsegundos.
‚Äì Salida High-Speed activada: entre 10 Œºs y 10 000 000 Œºs (10 s) en los par√°metros
‚Äì Salida High-Speed desactivada: entre 100 Œºs y 10 000 000 Œºs (10 s) en los par√°metros
‚Äì Salida est√°ndar (salida de 100 Hz): entre 10 000 ¬µs (10 ms) y 10 000 000 ¬µs (10 s) en
los par√°metros
Con el pr√≥ximo flanco ascendente de la salida se aplicar√° la nueva duraci√≥n del periodo.

Ajuste de la duraci√≥n m√≠nima de impulso y de la pausa m√≠nima entre impulsos
La duraci√≥n y la pausa de impulso m√≠nimas se asignan en forma de valor num√©rico DWord
entre 0 y 10 000 000 Œºs (10 s) con ayuda de la configuraci√≥n de par√°metros de canal "Duraci√≥n
m√≠nima de impulso".

Se√±ales de salida para el modo de operaci√≥n Modulaci√≥n por ancho de impulso (PWM)
Se√±al de salida

Significado

Corriente de impulso continua en la sa‚Äê Se emite un impulso en la salida digital
lida digital PWM DQA
PWM DQA durante el ciclo de trabajo ajustado
y la duraci√≥n de periodo ajustada.

Rango de valores
Corriente de impulsos continua

Modo de operaci√≥n: Salida de frecuencia
En este modo de operaci√≥n se puede asignar un valor de frecuencia para frecuencias elevadas
con m√°s precisi√≥n que con la duraci√≥n de periodo en modo PWM.
En la salida digital se genera una se√±al rectangular con una frecuencia asignada y un ciclo de
trabajo constante del 50%.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1343

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
El modo de operaci√≥n Salida de frecuencia posee las siguientes funciones:
‚óè Si la opci√≥n "Salida High-Speed (0,1 A)" est√° activada, se puede generar una duraci√≥n
m√≠nima de impulso de 2 Œºs con una intensidad de 100 mA. Si la opci√≥n "Salida High-Speed
(0,1 A)" no est√° activada, se puede generar una duraci√≥n m√≠nima de impulso de 20 ¬µs con
una carga > 0,1 A y una duraci√≥n m√≠nima de impulso 40 ¬µs con una carga ‚â• 2mA y una
intensidad m√°xima de 0,5 A.
Si utiliza una salida est√°ndar, se puede generar una duraci√≥n m√≠nima de impulso de 100 ¬µs
con una carga > 0,1 A y una duraci√≥n m√≠nima de impulso de 200 ¬µs con una carga ‚â• 2mA
y una intensidad m√°xima de 0,5 A.
M√≠nimo
Salida est√°ndar

Salida HighSpeed desacti‚Äê
vada

Frecuencia
1)

M√°ximo
Salida HighSalida est√°ndar
Speed activada

0,1 Hz

100 Hz 1)

Salida HighSpeed desacti‚Äê
vada

Salida HighSpeed activada

10 kHz 1)

100 kHz

En funci√≥n de la carga

‚óè Puede controlar la salida de impulso (DQA) del canal de forma manual a trav√©s de la
interfaz de control y respuesta.
‚óè Puede configurar la reacci√≥n a STOP de la CPU. Al cambiar a STOP de la CPU, la salida
de impulso (DQA) pasa al estado configurado.

Controlador
Para el modo de operaci√≥n Salida de frecuencia, el programa de usuario accede directamente
a la interfaz de control y respuesta del canal.
Se soporta la reparametrizaci√≥n mediante las instrucciones WRREC/RDREC y el juego de
datos de par√°metros 128. Para m√°s informaci√≥n al respecto, consulte el cap√≠tulo "Juegos de
datos de par√°metros (PWM)" en el manual de producto de la CPU compacta correspondiente.
70B&75/B'4




6:B(1$%/(
+DELOLWDFL¬µQ6:
676B6:B(1$%/(

'XUSHULRGR

'XUSHULRGR
6DOLGDGLJLWDO
'XUDFL¬µQ 'XUDFL¬µQ
LPSXOVR SDXVD
LPS

)UHFXHQFLDN+]





)UHFXHQFLD+]

676B (1$%/(

1344

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Inicio de la secuencia de salida
El programa de control debe proporcionar la habilitaci√≥n para la secuencia de salida mediante
la habilitaci√≥n de software (SW_ENABLE 0 ‚Üí 1). El bit de notificaci√≥n STS_SW_ENABLE
indica que la habilitaci√≥n de software est√° presente en el generador de impulsos.
Si la habilitaci√≥n de software est√° activada (flanco ascendente), se activa STS_ENABLE. La
secuencia de salida se ejecuta continuamente mientras SW_ENABLE est√© activado.
Nota
Se√±al de mando de salida TM_CTRL_DQ
‚óè Si TM_CTRL_DQ = 1, la funci√≥n tecnol√≥gica toma el control y genera secuencias de
impulso en la salida PWM DQA.
‚óè Si TM_CTRL_DQ = 0, el programa de usuario toma el control y el usuario puede ajustar la
salida PWM DQA directamente a trav√©s del bit de control SET_DQA.
Interrupci√≥n de la secuencia de salida
Una desactivaci√≥n de la habilitaci√≥n de software (SW_ENABLE = 1 ‚Üí 0) durante la salida de
frecuencia interrumpe la secuencia de salida actual. La √∫ltima duraci√≥n de periodo no
concluye. STS_ENABLE y la salida digital PWM DQA se ponen inmediatamente a 0.
Una nueva salida de impulso solo es posible tras reiniciar la secuencia de salida.

Ajuste y modificaci√≥n del valor de salida (frecuencia)
La frecuencia se ajusta con OUTPUT_VALUE directamente en la interfaz de control del
programa de control. El valor se indica en formato Real y la unidad es siempre "Hz". El rango
posible depende del par√°metro "Salida High-Speed (0,1 A)" como sigue:
‚óè Salida r√°pida de impulsos desactivada
‚Äì Frecuencia (OUTPUT_VALUE): de 0,1 Hz a 10 000 Hz
‚óè Salida r√°pida de impulsos activada
‚Äì Frecuencia (OUTPUT_VALUE): de 0,1 Hz a 100 000 Hz
‚óè Salida est√°ndar (salida de 100 Hz)
‚Äì Frecuencia (OUTPUT_VALUE): 0,1 Hz a 100 Hz
La nueva secuencia se aplica al comienzo del siguiente periodo. La nueva frecuencia no afecta
al flanco descendente o a la relaci√≥n entre impulso y periodo (ciclo de trabajo). Sin embargo,
puede tardar hasta 10 s en aplicarse, seg√∫n sea la frecuencia ajustada previamente.

Precisi√≥n de la frecuencia de salida
La frecuencia de salida configurada se devuelve con una precisi√≥n dependiente de la
frecuencia en la salida digital PWM DQA. Encontrar√° una sinopsis sobre la precisi√≥n en funci√≥n
de la frecuencia utilizada en el manual de producto de la CPU compacta correspondiente, en
el cap√≠tulo "Vista general de interconexiones de las salidas".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1345

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Se√±ales de salida para el modo de operaci√≥n Salida de frecuencia
Se√±al de salida

Significado

Rango de valores

Corriente de impulso continua en la sa‚Äê Se emite un impulso en la salida digital
lida digital PWM DQA
PWM DQA para la frecuencia asignada.

Corriente de impulsos continua

Modo de operaci√≥n: PTO
Control
Para los cuatro modos de operaci√≥n de los generadores de impulsos (PTO), el control de los
canales de salida de impulsos se realiza con Motion Control por medio de los objetos
tecnol√≥gicos TO_SpeedAxis, TO_PositioningAxis y TO_SynchronousAxis. La interfaz de
control y respuesta de los canales en estos modos de operaci√≥n es una implementaci√≥n parcial
de la interfaz PROFIdrive con el telegrama est√°ndar 3.
Encontrar√° una descripci√≥n detallada de la utilizaci√≥n de Motion Control y su configuraci√≥n en
la Ayuda en pantalla de Motion Control y en el Manual de funciones S7-1500 Motion Control
(http://support.automation.siemens.com/WW/view/es/59381279).

Tipos de se√±ales
El modo de operaci√≥n PTO incluye los cuatro tipos de se√±al siguientes:
‚óè PTO (impulso (A) y sentido (B)):
Una salida (A) controla los impulsos y otra salida (B) controla el sentido. B es 'High' (activo)
si se generan impulsos en sentido negativo. B es 'Low' (inactivo) si se generan impulsos en
sentido positivo.
1

2

3

'

‚ë†
‚ë°

Sentido de giro positivo
Sentido de giro negativo

‚óè PTO (incrementar contador (A) y decrementar contador (B)):
Una salida (A) emite impulsos para sentidos positivos y otra (B) emite impulsos para
sentidos negativos.
1

2

$

%

‚ë†
‚ë°

1346

Sentido de giro positivo
Sentido de giro negativo

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
‚óè PTO (A, B desfasado):
Ambas salidas emiten impulsos a la velocidad indicada, pero con un desfase de 90 grados.
Se trata de una salida de impulso simple, en la que un impulso tiene la duraci√≥n
comprendida entre dos transiciones de la se√±al A durante un nivel bajo de la se√±al B.
El sentido de giro positivo se genera con un flanco ascendente en la se√±al A durante un
nivel bajo en la se√±al B. El sentido de giro negativo se genera con un flanco descendente
en la se√±al A durante un nivel bajo en la se√±al B.
A precede a B (sentido de giro positivo)

A sigue a B (sentido de giro negativo)

$

$

%

%











N√∫mero de impulsos







N√∫mero de impulsos

‚óè PTO (A, B desfasado, cu√°druple):
Ambas salidas emiten impulsos a la velocidad indicada, pero con un desfase de 90 grados.
Este tipo de se√±al es una salida de impulso cu√°druple, en la que cada transici√≥n de flanco
corresponde a un incremento. Por tanto, un periodo completo de la se√±al A contiene cuatro
incrementos. De este modo, p. ej., con dos salidas a una frecuencia de se√±al de 100 kHz
cada una es posible emitir una se√±al de control que proporcione 400 000 incrementos por
segundo.
Los impulsos de contaje se crean en sentido positivo o negativo en funci√≥n del sentido de
los flancos de una se√±al y del nivel de la otra se√±al mientras tanto.
A precede a B (sentido de giro positivo)

A sigue a B (sentido de giro negativo)

$

$

%

%



















   

N√∫mero de impulsos

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

   



















N√∫mero de impulsos

1347

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Comportamiento del canal PTO en caso de STOP de la CPU
En caso de cambio a STOP de la CPU, el canal PTO reacciona retirando la habilitaci√≥n del
accionamiento (si se ha configurado una salida de habilitaci√≥n del accionamiento) y emitiendo
la consigna de velocidad 0 en las salidas de hardware configuradas para las pistas de se√±al A
y B. El comportamiento de los canales PTO en caso de STOP de la CPU no se puede
configurar.
Nota
Reacci√≥n a STOP de la CPU
En caso de STOP de la CPU, las salidas de hardware asignadas para las salidas PTO A y B
pueden conmutar al estado de se√±al 'High' (1) o permanecer en √©l. No se garantiza la
conmutaci√≥n/permanencia de ambas salidas de hardware al/en el nivel de se√±al 'Low' (0).

5.1.3.2

Funciones

Funci√≥n: Salida High-Speed
La funci√≥n "Salida High-Speed (0,1 A)" mejora el ciclo de se√±al de las salidas digitales (DQ0
a DQ7). En los flancos de conmutaci√≥n se producen menos retardos, oscilaciones,
inestabilidades y tiempos de subida/bajada inferiores.
La funci√≥n "Salida High-Speed (0,1 A)" es adecuada para generar se√±ales de impulsos en un
ciclo m√°s preciso, pero ofrece una menor corriente de carga m√°xima.
Para los modos de operaci√≥n PWM y Salida de frecuencia seleccione en STEP 7 (TIA Portal)
la salida High-Speed del canal. Adem√°s, la parametrizaci√≥n se puede modificar durante el
tiempo de ejecuci√≥n mediante el programa y el juego de datos.
La salida de impulso r√°pida (salida High-Speed) est√° disponible para los siguientes modos de
operaci√≥n:
‚óè PWM
‚óè Salida de frecuencia
‚óè PTO (las salidas de impulso para el modo de operaci√≥n PTO siempre son "Salida HighSpeed (0,1 A)")

Salida High-Speed
M√≠nimo

M√°ximo

Salida High-Speed de‚Äê Salida High-Speed ac‚Äê Salida High-Speed de‚Äê Salida High-Speed ac‚Äê
sactivada
tivada
sactivada
tivada

1348

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
Duraci√≥n de impulso

20 ¬µs con carga > 0,1
A 1)

2 ¬µs

1)

10 000 000 ¬µs (10 s)

40 ¬µs con carga
‚â• 2 mA 1)
Duraci√≥n del periodo

100 Œºs 2)

Frecuencia

10 Œºs
0,1 Hz

10 kHz 2)

100 kHz

1)

Un valor inferior es te√≥ricamente posible, pero dependiendo de la carga conectada la tensi√≥n de salida ya no se puede
devolver como impulso rectangular completo

2)

En funci√≥n de la carga

Funci√≥n: Mando directo de la salida de impulso (DQA)
Mando directo de la salida de impulso (DQA)
En los modos de operaci√≥n "Modulaci√≥n por ancho de impulso PWM" y "Salida de frecuencia"
se puede ajustar la salida de impulso (DQA) de un generador de impulsos directamente a
trav√©s del programa de control. Seleccione la funci√≥n para la activaci√≥n directa de DQ
desactivando el bit de control de salida del canal PWM en la interfaz de control (TM_CTRL_DQ
= 0).
El control directo de la salida de impulso (DQA) puede ser √∫til en la puesta en marcha de un
sistema de control para la automatizaci√≥n.
Si elige el control directo de la salida de impulso (DQA) durante una secuencia de salida de
impulsos, la secuencia se seguir√° ejecutando en segundo plano, de forma que la secuencia
contin√∫e en cuanto el canal vuelva a asumir el control (ajustando TM_CTRL_DQ = 1).
El estado de la salida de impulso (DQA) se asigna con el bit de control SET_DQA.
Si se ajusta TM_CTRL_DQ = 1, se deselecciona el control directo de la salida de impulso
(DQA) y el canal asume el procesamiento. Si la secuencia de salida se est√° ejecutando todav√≠a
(STS_ENABLE a√∫n activo), el canal PWM asume de nuevo el control de la salida. Si
TM_CTRL_DQ = 1 y STS_ENABLE no est√° activo, el canal del m√≥dulo tambi√©n se encarga de
la ejecuci√≥n, pero entonces devuelve "0" en la salida.
Nota
Se√±al de control de salida TM_CTRL_DQ del canal PWM
‚óè Si TM_CTRL_DQ = 1, la funci√≥n tecnol√≥gica toma el control y genera secuencias de
impulso en la salida PWM DQA.
‚óè Si TM_CTRL_DQ = 0, el programa de usuario toma el control y el usuario puede ajustar
PWM DQA directamente con el bit de control SET_DQA.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1349

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

5.1.4

Principios b√°sicos de la salida de impulsos (TM PTO 4)

5.1.4.1

Descripci√≥n general
El m√≥dulo tecnol√≥gico ofrece las siguientes funciones:

Modo de operaci√≥n

Aplicaciones

Ventajas para el cliente

Pulse Train Output
(PTO) (P√°gina 1350)

PTO tambi√©n se denomina interfaz de impulsos/
sentido. La interfaz de impulsos/sentido consta de
Se utiliza en muchas aplicaciones de posicio‚Äê 2 se√±ales. La frecuencia de la salida de impulso
namiento como, por ejemplo, para ejes de des‚Äê representa la velocidad, y el n√∫mero de impulsos
que se emiten representa el trayecto que se va a
plazamiento o de avance.
recorrer. La salida de sentido determina el sentido
del desplazamiento. La posici√≥n se define de este
modo con una precisi√≥n de incrementos.
Pulse Train Output es una interfaz muy exten‚Äê
dida para el control de accionamientos.

El control de las salidas se efect√∫a con S7‚Äë1500
Motion Control mediante objetos tecnol√≥gicos.
PTO es una interfaz sencilla y de uso universal
entre el controlador y el accionamiento. Por tanto,
es soportada por accionamientos paso a paso y
servoaccionamientos en todo el mundo.

5.1.4.2

Pulse Train Output (PTO)

Control
El control de los canales de salida de impulsos se realiza sobre todo con S7‚Äë1500
Motion Control a trav√©s de los objetos tecnol√≥gicos TO_SpeedAxis, TO_PositioningAxis y
TO_SynchronousAxis . La interfaz de control y realimentaci√≥n de los canales es una
implementaci√≥n de la interfaz PROFIdrive con el telegrama est√°ndar 3.
Encontrar√° una descripci√≥n detallada de la configuraci√≥n del m√≥dulo tecnol√≥gico con los
objetos tecnol√≥gicos de eje en el manual de funciones S7‚Äë1500T Motion Control, cap√≠tulo
Configuraci√≥n, disponible para su descarga en Internet (https://support.industry.siemens.com/
cs/ww/es/view/109481326).

1350

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos

Tipos de se√±ales
El m√≥dulo tecnol√≥gico soporta los cuatro tipos de se√±ales siguientes:
‚óè Impulso (P) y sentido (D):
Una salida (P) controla los impulsos y otra (D) controla el sentido. D es 'High' (activa) si se
generan impulsos en sentido negativo. D es 'Low' (inactiva) cuando se generan impulsos en
sentido positivo.
1

2

3

'

‚ë†
‚ë°

Sentido de giro positivo
Sentido de giro negativo

‚óè Contaje ascendente (A), contaje descendente (B):
Una salida (A) emite impulsos para sentidos positivos y otra (B) emite impulsos para
sentidos negativos.
1

2

$

%

‚ë†
‚ë°

Sentido de giro positivo
Sentido de giro negativo

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1351

Salida de impulsos
5.1 Principios b√°sicos de la salida de impulsos
‚óè Enc√≥der incremental (A, B desfasadas):
Ambas salidas emiten impulsos a la velocidad indicada, pero con un desfase de 90 grados.
Se trata de una salida de impulso simple, en la que un impulso tiene la duraci√≥n
comprendida entre dos transiciones de la se√±al A durante un nivel bajo de la se√±al B.
El sentido de giro positivo se genera con un flanco ascendente en la se√±al A durante un
nivel bajo en la se√±al B. El sentido de giro negativo se genera con un flanco descendente
en la se√±al A durante un nivel bajo en la se√±al B.
A precede a B (sentido de giro positivo)

A sigue a B (sentido de giro negativo)

$

$

%

%











N√∫mero de impulsos







N√∫mero de impulsos

‚óè Enc√≥der incremental (A, B desfasadas, cu√°druple)
Ambas salidas emiten impulsos a la velocidad indicada, pero con un desfase de 90 grados.
Este tipo de se√±al es una salida de impulso cu√°druple, en la que cada transici√≥n de flanco
corresponde a un incremento. Por tanto, un periodo completo de la se√±al A contiene cuatro
incrementos. De este modo, p. ej., con dos salidas a una frecuencia de se√±al de 100 kHz
cada una es posible emitir una se√±al de control que proporcione 400 000 incrementos por
segundo.
Los impulsos de contaje se crean en sentido positivo o negativo en funci√≥n del sentido de
los flancos de una se√±al y del nivel de la otra se√±al mientras tanto.
A precede a B (sentido de giro positivo)
$

$

%

%



















   

N√∫mero de impulsos

1352

A sigue a B (sentido de giro negativo)

   



















N√∫mero de impulsos

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el m√≥dulo

5.2

Utilizar el m√≥dulo

5.2.1

Utilizar TM Pulse 2x24V

5.2.1.1

Configurar y parametrizar m√≥dulo tecnol√≥gico

Agregar un m√≥dulo tecnol√≥gico a la configuraci√≥n de hardware
Requisitos
‚óè Se ha creado el proyecto.
‚óè Se ha creado la CPU.
‚óè Se ha creado la periferia descentralizada ET 200.

Procedimiento
Para agregar el m√≥dulo tecnol√≥gico a la configuraci√≥n hardware, haga lo siguiente:
1. Abra la configuraci√≥n de dispositivos de la CPU o el IM.
2. Seleccione un rack.
3. Seleccione el m√≥dulo tecnol√≥gico en el cat√°logo de m√≥dulos:
"M√≥dulos tecnol√≥gicos > Salida de impulsos > TM Pulse 2x24V > Referencia"
4. Coloque el m√≥dulo tecnol√≥gico arrastr√°ndolo al slot deseado del rack y solt√°ndolo.

Acceso al ajuste de par√°metros (configuraci√≥n hardware)
Apertura mediante la vista de dispositivos
Proceda de la siguiente manera:
1. Abra la configuraci√≥n del equipo de la CPU o el IM.
2. Seleccione la vista de dispositivos.
3. Haga clic en el m√≥dulo.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1353

Salida de impulsos
5.2 Utilizar el m√≥dulo

Configuraci√≥n de canal
Configuraci√≥n de canal
Con este par√°metro se define si se deben conectar los dos canales en paralelo.
Configuraci√≥n de canal

Significado

2 canales (2 A)
(predeterminado)

Los dos canales funcionan por separado y tienen cada uno una inten‚Äê
sidad de salida m√°xima de 2 A.

1 canal (4 A)

Los dos canales est√°n conectados en paralelo y funcionan como canal
l√≥gico con una corriente de salida m√°xima de 4 A.
Todas las parametrizaciones y procesos que utilizan la interfaz de con‚Äê
trol deben utilizar direcciones con el canal 0. Las se√±ales de respuesta
est√°n disponibles √∫nicamente para el canal 0.
La interfaz de control y respuesta se limita a un solo canal. El canal 1 no
puede configurarse ni operarse.
La medici√≥n de corriente es la suma de los valores medidos de ambos
canales.

Nota
Salida High Speed
El par√°metro "Salida High Speed (0,1 A)" solo puede seleccionarse con la configuraci√≥n de
canal "2 canales (2 A)".

1354

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el m√≥dulo

Modo de operaci√≥n
Modo de operaci√≥n
Con este par√°metro se define para qu√© funci√≥n se utiliza el canal del m√≥dulo tecnol√≥gico. Las
posibilidades de ajuste en "Par√°metros" se adaptan en funci√≥n de esa asignaci√≥n.
Modo de operaci√≥n

Significado

Par√°metros dependientes del modo de
operaci√≥n

Salida de impulso

El canal emite un impulso √∫nico. La duraci√≥n del impulso
se especifica en la interfaz de control.

‚óè Salida High Speed (0,1 A)
‚óè Funci√≥n DI
‚óè Retardo a la entrada
‚óè Retardo a la conexi√≥n

Modulaci√≥n por ancho
de impulso (PWM)
(predeterminado)

El canal emite una se√±al modulada por ancho de impul‚Äê ‚óè Salida High Speed (0,1 A)
so. La duraci√≥n del impulso o la consigna de corriente se ‚óè Funci√≥n DI1
especifican en la interfaz de control.
‚óè Retardo a la entrada
‚óè Formato de salida
‚óè Duraci√≥n m√≠nima de impulso
‚óè Duraci√≥n del periodo
‚óè Duraci√≥n del periodo real
‚óè Retardo a la conexi√≥n1
‚óè Dithering
‚óè Pendiente rampa de conexi√≥n
dither
‚óè Pendiente rampa de desconexi√≥n
dither
‚óè Amplitud de dither
‚óè Duraci√≥n del periodo de dither
‚óè Regulaci√≥n de intensidad
‚óè Activar acci√≥n P
‚óè Activar acci√≥n I
‚óè Activar acci√≥n D
‚óè Valor de referencia de corriente
‚óè Ancho de zona muerta
‚óè Variable manipulada l√≠mite superior
‚óè Variable manipulada l√≠mite inferior
‚óè Ganancia proporcional
‚óè Tiempo de integraci√≥n
‚óè Tiempo derivativo
‚óè Tiempo de retardo de la acci√≥n D

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1355

Salida de impulsos
5.2 Utilizar el m√≥dulo
Modo de operaci√≥n

Significado

Par√°metros dependientes del modo de
operaci√≥n

Tren de impulsos

El canal emite un determinado n√∫mero de impulsos. El ‚óè Salida High Speed (0,1 A)
n√∫mero de impulsos se especifica en la interfaz de con‚Äê ‚óè Funci√≥n DI
trol.
‚óè Retardo a la entrada
‚óè Formato de salida
‚óè Duraci√≥n del periodo
‚óè Duraci√≥n del periodo real
‚óè Retardo a la conexi√≥n
‚óè Ciclo de trabajo

Retardo a la conexi√≥n/
desconexi√≥n
Salida de frecuencia

El canal emite impulsos con un retardo a la conmutaci√≥n
respecto de DI0 predeterminado. El retardo a la cone‚Äê
xi√≥n se especifica en la interfaz de control.

‚óè Salida High Speed (0,1 A)

El canal emite una se√±al con un ciclo de trabajo fijo del
50 %. La frecuencia se especifica en la interfaz de con‚Äê
trol.

‚óè Salida High Speed (0,1 A)

‚óè Retardo a la entrada
‚óè Retardo a la desconexi√≥n
‚óè Funci√≥n DI
‚óè Retardo a la entrada
‚óè Formato de salida
‚óè Retardo a la conexi√≥n

PWM con motor DC:

El canal emite una se√±al con modulaci√≥n por ancho de
impulso para controlar un motor DC en ambos sentidos
de giro. El ciclo de trabajo se especifica en la interfaz de
control.

‚óè Funci√≥n DI1
‚óè Retardo a la entrada
‚óè Formato de salida
‚óè Duraci√≥n del periodo
‚óè Duraci√≥n del periodo real
‚óè Retardo a la conexi√≥n1

1

No parametrizable en modo is√≥crono

1356

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el m√≥dulo

Reacci√≥n a STOP de la CPU
Reacci√≥n a STOP de la CPU
Con este par√°metro se define la reacci√≥n del canal ante el fallo de un controlador superior.
Reacci√≥n a STOP de la CPU

Significado

Aplicar valor sustitutivo
(predeterminado)

Hasta la siguiente transici√≥n de STOP a RUN de la CPU, el canal
emite en las salidas digitales los valores sustitutivos parametriza‚Äê
dos. El valor sustitutivo 1 solo puede parametrizarse para una de las
dos salidas digitales.
La secuencia de salida en curso finaliza y se desactiva el bit de
respuesta STS_ENABLE.
Despu√©s de un cambio de STOP a RUN, el m√≥dulo pasa a su estado
de arranque. Antes de poder iniciar una nueva salida de impulsos,
debe desactivarse el bit de control SW_ENABLE.

Continuar

El canal contin√∫a trabajando.
Las salidas digitales contin√∫an conmut√°ndose en funci√≥n de la pa‚Äê
rametrizaci√≥n. As√≠, la secuencia de salida en curso contin√∫a. Si se
ha parametrizado la habilitaci√≥n hardware, tambi√©n se pueden ini‚Äê
ciar nuevas secuencias de salida a trav√©s de DIn.0.
Tras una transici√≥n de STOP a RUN, la configuraci√≥n del m√≥dulo
tecnol√≥gico no se desactiva.

Valor sustitutivo de DQA
Con este par√°metro se define el valor que debe emitir el m√≥dulo tecnol√≥gico en caso de STOP
de la CPU en la salida digital DQA para el comportamiento "Aplicar valor sustitutivo".
El ajuste predeterminado es "0".
Valor sustitutivo de DQB
Con este par√°metro se define el valor que debe emitir el m√≥dulo tecnol√≥gico en caso de STOP
de la CPU en la salida digital DQB para el comportamiento "Aplicar valor sustitutivo".
El ajuste predeterminado es "0".
Nota
El valor sustitutivo 1 solo puede seleccionarse para una de las dos salidas digitales.

Diagn√≥stico
El m√≥dulo tecnol√≥gico puede disparar alarmas de diagn√≥stico adicionales si se activa la
habilitaci√≥n de las alarmas de diagn√≥stico en los par√°metros b√°sicos. Las alarmas de
diagn√≥stico se procesan en un OB de alarma.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1357

Salida de impulsos
5.2 Utilizar el m√≥dulo

Diagn√≥stico de grupo
Este par√°metro define si se disparan alarmas de diagn√≥stico con los siguientes errores:
‚óè Error de tensi√≥n de alimentaci√≥n (bit de respuesta ERR_PWR)
‚óè Cortocircuito o sobrecarga de la alimentaci√≥n de enc√≥der (bit de respuesta ERR_24V)
‚óè Falta tensi√≥n de carga
‚óè Sobretemperatura
Este par√°metro est√° desactivado por defecto.

Diagn√≥stico DQA
Este par√°metro define si, en caso de error en la salida digital DQA, se dispara la alarma de
diagn√≥stico "Error en salidas digitales". Independientemente de ello, en caso de error se activa
el bit de respuesta ERR_DQA.
Este par√°metro est√° desactivado por defecto.

Diagn√≥stico DQB
Este par√°metro define si, en caso de error en la salida digital DQB, se dispara la alarma de
diagn√≥stico "Error en salidas digitales". Independientemente de ello, en caso de error se activa
el bit de respuesta ERR_DQB.
Este par√°metro est√° desactivado por defecto.

Par√°metro
Salida High Speed (0,1 A)
Con este par√°metro se define si la salida digital correspondiente funciona como conmutador
r√°pido en contrafase:
Opci√≥n

Significado

Activado

Las salidas digitales funcionan como conmutador r√°pido en contrafase y pue‚Äê
den cargarse con una corriente de carga nominal de 0,1 A en cada caso. Un
conmutador en contrafase se conmuta alternativamente a DC 24 V y a masa.
Eso posibilita flancos muy r√°pidos.

Desactivado
(predeterminado)

Las salidas digitales funcionan como conmutador en contrafase y pueden car‚Äê
garse con una corriente de carga nominal de 2 A en cada caso.

Nota
Configuraci√≥n de canal
Este par√°metro solo se puede seleccionar en la configuraci√≥n "2 canales (2 A)".

1358

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el m√≥dulo
Nota
Este par√°metro no se puede activar en los modos de operaci√≥n "PWM con motor DC" ni
"Modulaci√≥n por ancho de impulso PWM" con regulaci√≥n de corriente.

Funci√≥n DI
Al parametrizar una entrada digital se define la funci√≥n que dicha entrada digital disparar√° al
conmutar.
Puede escoger entre las siguientes opciones:
Funci√≥n

Significado

Entrada
(predeterminado)

La respectiva entrada digital no tiene asignada funci√≥n alguna. La CPU
puede leer el estado de se√±al de la entrada digital a trav√©s de la interfaz de
respuesta.

Habilitaci√≥n HW

La respectiva entrada digital se utiliza como entrada de habilitaci√≥n para la
secuencia de salida.

Final de carrera

La respectiva entrada digital se utiliza como final de carrera externo para un
motor DC en el modo de operaci√≥n "PWM con motor DC".

Retardo a la entrada
Este par√°metro permite suprimir las perturbaciones en las entradas digitales de un canal. Los
cambios de se√±al solo se detectan si permanecen estables durante un tiempo superior al
retardo a la entrada parametrizado.
Puede escoger entre los siguientes retardos a la entrada:
‚óè Ninguno
(Retardo a la entrada de 4 Œºs, ancho de impulso m√≠nimo de 3 Œºs)
‚óè 0,05 ms
‚óè 0,1 ms (predeterminado)
‚óè 0,4 ms
‚óè 0,8 ms
‚óè 1,6 ms
‚óè 3,2 ms
‚óè 12,8 ms
‚óè 20 ms
Nota
Si selecciona la opci√≥n "Ninguno" o "0,05 ms", deber√° utilizar cables apantallados para la
conexi√≥n de las entradas digitales.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1359

Salida de impulsos
5.2 Utilizar el m√≥dulo

Formato de salida
Con este par√°metro se define el formato o el rango de valores con el que se eval√∫a el ciclo de
trabajo o la consigna de corriente:
Formato de salida
Salida anal√≥gica S7

Rango de valores
Modo de operaci√≥n "PWM con motor DC":
‚Äí27648 ... 27648
Otro modo de operaci√≥n:
0 ... 27648
("27648" equivale al 100% del valor de referencia de corriente)

1/100
(predeterminado)

0 ... 100

1/1000

0 ... 1000

1/10000

0 ... 10000

Nota
En el modo de operaci√≥n "Salida de frecuencia", est√° seleccionado "1 Hz" como formato de
salida y no se puede cambiar.
En el modo de operaci√≥n "PWM con motor DC", est√° seleccionado el formato de salida "Salida
anal√≥gica S7" y no se puede cambiar.

Duraci√≥n m√≠nima de impulso
Este par√°metro define la duraci√≥n m√≠nima de impulso permitida para la se√±al PWM.
Los impulsos y las pausas inferiores a este valor se suprimen.
El ajuste predeterminado es "0 Œºs".
Nota
La duraci√≥n m√≠nima de impulso no es efectiva si se ha activado "Regulaci√≥n de intensidad".

Duraci√≥n del periodo
Con este par√°metro se define la duraci√≥n de periodo de la se√±al de salida:
En el modo de operaci√≥n "PWM con motor DC", el ajuste predeterminado es "1000 Œºs" (=
1 ms). En otros modos de operaci√≥n, el ajuste predeterminado es "2000000 Œºs" (= 2 s).

Duraci√≥n del periodo real
La duraci√≥n de periodo real se muestra solo en modo is√≥crono.
El valor mostrado es la duraci√≥n de periodo utilizada, que se calcula a partir de la duraci√≥n de
periodo especificada y el ciclo de aplicaci√≥n ajustado.

1360

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el m√≥dulo

Retardo a la conexi√≥n
Con este par√°metro se define el retardo con el que el inicio de la secuencia de salida da lugar
a la salida del impulso.
El ajuste predeterminado es "0 Œºs".
Nota
Modo is√≥crono
En modo is√≥crono no es posible ajustar el retardo a la conexi√≥n en los modos de operaci√≥n
"Modulaci√≥n por ancho de impulso PWM" y "PWM con motor DC".

Retardo a la desconexi√≥n
Con este par√°metro se define el retardo con el que un flanco descendente de la entrada digital
DI0 es efectivo en la salida digital DQA.
El ajuste predeterminado es "0 Œºs".

Ciclo de trabajo
Con este par√°metro se define la relaci√≥n entre impulso y periodo (tambi√©n llamada relaci√≥n
impulso-pausa) de la se√±al de salida en el formato de salida seleccionado.
El ajuste predeterminado es "50 %".

Dithering
Con este par√°metro se determina si a la se√±al PWM se superpondr√° una se√±al dither.
En el ajuste predeterminado, el dithering no est√° activado.

Pendiente rampa de conexi√≥n dither
Con este par√°metro se define la pendiente de la rampa de conexi√≥n de la amplitud del dither
para una subida te√≥rica de 0 % a 100 %.
La pendiente influye en el tiempo de rampa efectivo.
Ejemplo de c√°lculo del tiempo de rampa efectivo con una amplitud Dither del 10% y una
pendiente de 2500 ms/100%:
10 % x 2500 ms/100 % = 250 ms
El ajuste predeterminado es "0".

Pendiente rampa de desconexi√≥n dither
Con este par√°metro se define la pendiente de la rampa de desconexi√≥n de la amplitud del
dither para un descenso te√≥rico de 100 % a 0 %.
La pendiente afecta al tiempo de rampa efectivo:

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1361

Salida de impulsos
5.2 Utilizar el m√≥dulo
Ejemplo de c√°lculo del tiempo de rampa efectivo con una amplitud Dither del 10% y una
pendiente de 2500 ms/100%:
10 % x 2500 ms/100 % = 250 ms
El ajuste predeterminado es "0".

Amplitud de dither
Con este par√°metro se define la amplitud de la se√±al dither referida a la duraci√≥n del periodo
de la se√±al de salida.
El ajuste predeterminado es "5,0 %".

Duraci√≥n del periodo de dither
Con este par√°metro se define la duraci√≥n de periodo de la se√±al dither. El par√°metro se puede
ajustar con una base fija en funci√≥n de la duraci√≥n de periodo de la se√±al PWM.
El ajuste predeterminado es "50000 Œºs" (= 50 ms).

Frecuencia de dither
Este valor se calcula a partir del periodo parametrizado de la se√±al dither.
El valor no se puede modificar (solo lectura).

Regulaci√≥n de intensidad
Con este par√°metro se activa el algoritmo PID para la regulaci√≥n de la corriente de salida.
Este par√°metro est√° desactivado por defecto.
Nota
Salida High Speed
La regulaci√≥n de corriente con los par√°metros correspondientes solo puede activarse en el
modo "Modulaci√≥n por ancho de impulso PWM" con "Salida High Speed (0.1 A)" desactivada.

Activar acci√≥n P
Con este par√°metro se activa la acci√≥n proporcional del algoritmo PID.
Este par√°metro est√° activado por defecto.

Activar acci√≥n I
Con este par√°metro se activa la acci√≥n integral del algoritmo PID.
Este par√°metro est√° activado por defecto.

1362

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el m√≥dulo

Activar acci√≥n D
Con este par√°metro se activa la acci√≥n diferencial del algoritmo PID.
Este par√°metro est√° desactivado por defecto.

Valor de referencia de corriente
Con este par√°metro se define la intensidad m√°xima como valor de referencia para la consigna
de intensidad. Un valor del 100% para OUTPUT_VALUE en la interfaz de control equivale a
una consigna de intensidad equivalente al valor de referencia de corriente.
Se recomienda usar como ajuste el valor de la intensidad de carga medido con la regulaci√≥n
de intensidad desactivada y un ciclo de trabajo del 100%.
El ajuste predeterminado es "0 mA".

Ancho de zona muerta
Con este par√°metro se define la diferencia entre la corriente de salida y la consigna de
corriente dentro la cual no se corrige. La diferencia se considera tanto por encima como por
debajo de la consigna de corriente.
El ajuste predeterminado es "0 ŒºA".

Variable manipulada l√≠mite superior
Con este par√°metro se define el l√≠mite superior de regulaci√≥n. "27648" equivale al 100% del
ciclo de trabajo. El valor debe ser superior a la "Variable manipulada l√≠mite inferior".
El ajuste predeterminado es "27648".

Variable manipulada l√≠mite inferior
Con este par√°metro se define el l√≠mite inferior de regulaci√≥n. "0" equivale al 0% del ciclo de
trabajo. El valor debe ser inferior a la "Variable manipulada l√≠mite superior".
El ajuste predeterminado es "0".

Ganancia proporcional
Con este par√°metro se define el factor de ganancia para la acci√≥n P del algoritmo PID.
El ajuste predeterminado es "2,0000".

Tiempo de integraci√≥n
Con este par√°metro se define el tiempo de acci√≥n integral del algoritmo PID.
El ajuste predeterminado es "20,0000 s".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1363

Salida de impulsos
5.2 Utilizar el m√≥dulo

Tiempo de acci√≥n derivada
Con este par√°metro se define la duraci√≥n utilizada por la acci√≥n D del algoritmo PID.
El ajuste predeterminado es "10,0000 s".

Tiempo de retardo de la acci√≥n D
Con este par√°metro se define el retardo de la acci√≥n D del algoritmo PID.
El ajuste predeterminado es "2,0000 s".

5.2.1.2

M√≥dulo Online y diagn√≥stico

Indicaci√≥n y evaluaci√≥n del diagn√≥stico
Por medio de la vista online y de diagn√≥stico puede realizar un diagn√≥stico del hardware.
Adem√°s, puede:
‚óè Recibir informaci√≥n a trav√©s del m√≥dulo (p. ej. la versi√≥n de Firmware y el n√∫mero de serie).
‚óè Si es necesario, realice una actualizaci√≥n del firmware.

Procedimiento
Para abrir el editor de visualizaci√≥n para las funciones de diagn√≥stico, haga lo siguiente:
1. Abra la configuraci√≥n del equipo de la CPU o el IM.
2. Seleccione la vista de dispositivos.
3. Haga clic con el bot√≥n derecho del rat√≥n en el m√≥dulo y seleccione "Online y diagn√≥stico".
4. Haga clic en la visualizaci√≥n deseada en el √°rbol de diagn√≥stico.

M√°s informaci√≥n
Para m√°s informaci√≥n sobre los avisos de diagn√≥stico y sobre posibles remedios, consulte el
manual de producto del m√≥dulo.

1364

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el m√≥dulo

5.2.2

Uso de TM PTO 4

5.2.2.1

Configurar y parametrizar el m√≥dulo tecnol√≥gico

Agregar un m√≥dulo tecnol√≥gico a la configuraci√≥n de hardware
Requisitos
‚óè Se ha creado el proyecto.
‚óè Se ha creado la CPU S7‚Äë1500.

Procedimiento
Para agregar el m√≥dulo tecnol√≥gico a la configuraci√≥n hardware, haga lo siguiente:
1. Abra la configuraci√≥n de dispositivos de la CPU o el IM.
2. Seleccione un rack.
3. Seleccione el m√≥dulo tecnol√≥gico en el cat√°logo de m√≥dulos:
"M√≥dulos tecnol√≥gicos > Salida de impulsos > TM PTO 4 > Referencia"
4. Coloque el m√≥dulo tecnol√≥gico arrastr√°ndolo al slot deseado del rack y solt√°ndolo.

Acceso al ajuste de par√°metros (configuraci√≥n hardware)
Apertura mediante la vista de dispositivos
Proceda de la siguiente manera:
1. Abra la configuraci√≥n del equipo de la CPU o el IM.
2. Seleccione la vista de dispositivos.
3. Haga clic en el m√≥dulo.

Configuraci√≥n de canales
Configuraci√≥n de canales
Con este par√°metro se define el n√∫mero de canales utilizados. Los canales se ocupan en
orden ascendente.
Puede escoger entre las siguientes opciones:
‚óè 4 canales (predeterminado)
‚óè 3 canales

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1365

Salida de impulsos
5.2 Utilizar el m√≥dulo
‚óè 2 canales
‚óè 1 canal

Modo de operaci√≥n
Tipo de se√±al
Con este par√°metro se define el tipo de salida de impulsos PTO (P√°gina 1350).
Opci√≥n

Significado

Impulso (P) y sentido (D)
(predeterminado)

El canal emite una se√±al de impulso y una se√±al de sentido.

Contaje ascendente (A), contaje
descendente (B)

El canal emite una se√±al de avance y una se√±al de retroceso.

Enc√≥der incremental (A, B desfa‚Äê
sadas)

El canal emite dos se√±ales desfasadas con evaluaci√≥n simple.

Enc√≥der incremental (A, B desfa‚Äê
sadas, cu√°druple)

El canal emite dos se√±ales desfasadas con evaluaci√≥n tetra-flan‚Äê
co.

Interfaz de se√±al
Con este par√°metro se determina qu√© interfaz se utilizar√° para la salida de impulsos.
Opci√≥n

Significado

24 V, asim√©trica

El canal emite se√±ales de 24 V en los bornes DQm.0 y DQm.1.

RS422, sim√©trica/TTL (5 V), asi‚Äê
m√©trica
(predeterminado)

El canal emite se√±ales RS422 en los bornes P/A y D/B y los res‚Äê
pectivos bornes invertidos o bien se√±ales TTL de 5 V en los bornes
P/A y D/B.

Pausa entre impulsos al invertir el sentido
Con este par√°metro se determina el tiempo m√≠nimo que transcurre entre un cambio de sentido
y el primer impulso emitido en el nuevo sentido.
Puede escoger entre las siguientes opciones:
‚óè 0 ms (predeterminado)
‚óè 1 ms
‚óè 4 ms
‚óè 10 ms

1366

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el m√≥dulo

Alarmas de diagn√≥stico
Habilitar alarmas de diagn√≥stico
Con este par√°metro se determina si se dispara una alarma de diagn√≥stico en caso de falta de
tensi√≥n de alimentaci√≥n o fallo en las salidas digitales. El fallo detectado se indica para el canal
afectado con los bits de realimentaci√≥n Fault_Present y Sensor_Error.
Nota
Las salidas de hardware de los canales 0 y 1 as√≠ como de los canales 2 y 3 tienen un
diagn√≥stico com√∫n, respectivamente. De este modo, en caso de error en una salida se detiene
la salida de impulso de los dos canales respectivos. Un cortocircuito en una salida puede
disparar tambi√©n la alarma de diagn√≥stico "Falta tensi√≥n de alimentaci√≥n".
Las alarmas de diagn√≥stico se procesan en un OB de alarma.
Este par√°metro est√° desactivado por defecto.

Par√°metros del eje
Nota
Objeto tecnol√≥gico para Motion Control
Aseg√∫rese de que el correspondiente valor del par√°metro coincida con el valor indicado en la
configuraci√≥n del objeto tecnol√≥gico utilizado.

Incrementos por vuelta
Con este par√°metro se define el n√∫mero de incrementos (incluidos microincrementos) que
equivale a un giro del accionamiento.
El rango de valores abarca de 1 a 1000000. El valor afecta el rango de velocidad de giro
m√°xima y de velocidad de referencia. El ajuste predeterminado es "200".

Velocidad de referencia
Con este par√°metro se define la velocidad a la que gira el accionamiento con una consigna de
velocidad del 100%. El rango de valores abarca de 1,0 a 20000,0 r/min. El rango de valores
permitido para la consigna de velocidad est√° comprendido entre el ‚Äí200 % y el 200 % de la
velocidad de referencia.
La velocidad de referencia afecta el rango de velocidad de giro m√°xima y de incrementos por
vuelta. El ajuste predeterminado es "3000.0".

Velocidad m√°xima de giro
Con este par√°metro se define la velocidad m√°xima permitida para la aplicaci√≥n.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1367

Salida de impulsos
5.2 Utilizar el m√≥dulo
La tabla siguiente muestra el c√°lculo del rango de la velocidad m√°xima:
Interfaz
de se√±ales

Rango de la velocidad m√°xima
L√≠mite inferior
Evaluaci√≥n de se√±al
"Simple"

24 V,
asim√©trica

0,1 Hz * 60 / (incremen‚Äê
tos por vuelta)

L√≠mite superior
(se utiliza el menor de los dos valores)

Evaluaci√≥n de se√±al
"Cu√°druple"
0,1 Hz * 60 * 4 / (incre‚Äê
mentos por vuelta)

Evaluaci√≥n de se√±al
"Simple"

Evaluaci√≥n de se√±al
"Cu√°druple"

‚óè 2 * velocidad de
referencia

‚óè 2 * velocidad de
referencia

TTL (5 V),
asim√©trica

‚óè 200000 Hz * 60 /
(incrementos por
vuelta)

‚óè 200000 Hz * 60 * 4 /
(incrementos por
vuelta)

RS422,
sim√©trica

‚óè 2 * velocidad de
referencia

‚óè 2 * velocidad de
referencia

‚óè 1000000 Hz * 60 /
(incrementos por
vuelta)

‚óè 1000000 Hz * 60 * 4 /
(incrementos por
vuelta)

El ajuste predeterminado es "3000.0".

Bits para valor real incr. (G1_XIST1)
Este par√°metro indica el n√∫mero de bits para la codificaci√≥n de la resoluci√≥n fina en el valor real
incremental de posici√≥n de G1_XIST1.
El valor es siempre "0" para este m√≥dulo.

Tiempo de parada r√°pida (OFF3)
Con este par√°metro se define el intervalo para la ejecuci√≥n de una parada r√°pida desde
velocidad m√°xima a parada completa.
El rango de valores abarca de 1 a 65535 ms. El ajuste predeterminado es "1000 ms".

Tiempo de parada en rampa (OFF1)
Con este par√°metro se define el intervalo para la ejecuci√≥n de una parada desde velocidad
m√°xima a parada completa.
El rango de valores abarca de 1 a 65535 ms. El ajuste predeterminado es "5000 ms".

Entradas y salidas de hardware
Utilizar habilitaci√≥n de accionamiento
Con este par√°metro se define si se utiliza una salida de hardware para la se√±al de habilitaci√≥n
para el accionamiento.
Este par√°metro est√° desactivado por defecto.

1368

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el m√≥dulo

Salida de habilitaci√≥n del accionamiento
Con este par√°metro se define qu√© salida de hardware se utiliza para habilitar el accionamiento.
Puede escoger entre las siguientes opciones:
‚óè DQ0 (predeterminado)
‚óè DIQ2

Utilizar DI0 como sensor del punto de referencia
Con este par√°metro se define si se utiliza la salida de hardware DI0 para la se√±al del sensor
de referencia para el accionamiento. A trav√©s de la se√±al del sensor de referencia puede
sincronizarse la marca de referencia con la posici√≥n actual del eje del accionamiento.
Este par√°metro est√° desactivado por defecto.

Selecci√≥n de flanco del sensor de referencia
Con este par√°metro se define el flanco de DI0 con el que se captura la marca de referencia.
Puede escoger entre las siguientes opciones:
‚óè Con flanco ascendente (predeterminado)
‚óè Con flanco descendente
Nota
El par√°metro solo es efectivo si se utiliza una entrada de sensor de referencia.
Este par√°metro solo puede seleccionarse y es efectivo si est√° activada la opci√≥n "Utilizar
habilitaci√≥n del motor". El ajuste predeterminado es "Ninguna".

Utilizar DI1 como detector
Con este par√°metro se define si se utiliza la salida de hardware DI1 para la se√±al del detector
para el accionamiento. A trav√©s de la se√±al del detector puede guardarse la posici√≥n actual del
eje de accionamiento.
Este par√°metro est√° desactivado por defecto.

Utilizar "Motor disponible"
Con este par√°metro se define si en una entrada digital de hardware se utiliza la se√±al de
disponibilidad del accionamiento.
Este par√°metro est√° desactivado por defecto.

Entrada "Accionamiento listo"
Con este par√°metro se define en qu√© entrada digital de hardware se conecta y se lee la se√±al
de disponibilidad del accionamiento.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1369

Salida de impulsos
5.2 Utilizar el m√≥dulo
Puede escoger entre las siguientes opciones:
‚óè DI0 (predeterminado)
‚óè DI1
‚óè DIQ2
Nota
Este par√°metro solo puede seleccionarse y es efectivo si est√° activada la opci√≥n "Motor
disponible".

Retardo a la entrada
Con este par√°metro se suprimen las interferencias de se√±al en las entradas digitales. Los
cambios de se√±al solo se capturan si permanecen estables durante m√°s tiempo que el retardo
a la entrada parametrizado.
Puede escoger entre las siguientes opciones:
‚óè Ninguno
(Retardo a la entrada de 4 Œºs, ancho de impulso m√≠nimo de 3 Œºs)
‚óè 0,05 ms
‚óè 0,1 ms (predeterminado)
‚óè 0,4 ms
‚óè 0,8 ms
‚óè 1,6 ms
‚óè 3,2 ms
‚óè 12,8 ms
‚óè 20 ms
Nota
Si selecciona la opci√≥n "Ninguno" o "0,05 ms", deber√° utilizar cables apantallados para la
conexi√≥n de las entradas digitales.

Error de se√±al de vida
N√∫mero tolerado de errores de se√±al de vida
Con este par√°metro se define el n√∫mero de errores del Master Sign-Of-Life que tolera el
m√≥dulo. Si se excede el n√∫mero, se dispara un mensaje de error a trav√©s del bit de
realimentaci√≥n Sensor_Error.
El rango de valores abarca de 1 a 65535. El valor 65535 significa que no se vigilan los errores
de se√±al de vida. El ajuste predeterminado es "1".

1370

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el m√≥dulo

5.2.2.2

M√≥dulo Online y diagn√≥stico

Indicaci√≥n y evaluaci√≥n del diagn√≥stico
Por medio de la vista online y de diagn√≥stico puede realizar un diagn√≥stico del hardware.
Adem√°s, puede:
‚óè Recibir informaci√≥n a trav√©s del m√≥dulo (p. ej. la versi√≥n de Firmware y el n√∫mero de serie).
‚óè Si es necesario, realice una actualizaci√≥n del firmware.

Procedimiento
Para abrir el editor de visualizaci√≥n para las funciones de diagn√≥stico, haga lo siguiente:
1. Abra la configuraci√≥n del equipo de la CPU o el IM.
2. Seleccione la vista de dispositivos.
3. Haga clic con el bot√≥n derecho del rat√≥n en el m√≥dulo y seleccione "Online y diagn√≥stico".
4. Haga clic en la visualizaci√≥n deseada en el √°rbol de diagn√≥stico.

M√°s informaci√≥n
Para m√°s informaci√≥n sobre los avisos de diagn√≥stico y sobre posibles remedios, consulte el
manual de producto del m√≥dulo.

5.2.3

Utilizar CPU compacta

5.2.3.1

Configurar y parametrizar CPU compacta

Agregar una CPU compacta a la configuraci√≥n hardware
Requisitos
Se ha creado el proyecto.

Procedimiento
Para agregar una CPU compacta a la configuraci√≥n hardware, proceda del siguiente modo:
1. Haga doble clic en "Agregar dispositivo".
Se abre el cuadro de di√°logo "Agregar dispositivo".
2. Elija "Controladores".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1371

Salida de impulsos
5.2 Utilizar el m√≥dulo
3. Seleccione la CPU compacta:
"SIMATIC S7‚Äë1500 > CPU > Nombre de la CPU compacta > Referencia"
4. Confirme con "Aceptar".

Resultado
La nueva CPU compacta aparece en el √°rbol del proyecto con los siguientes objetos: Haga
doble clic para pasar al editor deseado.

‚ë†

Objeto

Descripci√≥n

Configuraci√≥n del
equipo

En la ventana de inspecci√≥n (por canal PTO/PWM):
‚óè Ajuste del modo de operaci√≥n (P√°gina 1373)
‚óè Ajuste de la reacci√≥n a STOP de la CPU (P√°gina 1374)
‚óè Habilitaci√≥n de alarmas de diagn√≥stico (P√°gina 1375)
‚óè Ajuste de par√°metros para la modulaci√≥n por ancho de impulsos o
la salida de frecuencia (P√°gina 1377)
‚óè Ajuste de par√°metros de eje para modos de operaci√≥n PTO
(P√°gina 1377)
‚óè Asignaci√≥n de se√±ales a entradas y salidas (P√°gina 1375)

‚ë°

‚óè Ajuste de las direcciones del m√≥dulo
Online y diagn√≥stico
(P√°gina 1379)

‚óè Diagn√≥stico de hardware
‚óè Obtener informaci√≥n sobre la CPU compacta
‚óè Actualizaci√≥n del firmware

Compatibilidad 1511C (generadores de impulsos de la CPU compacta 1512C-1 PN)
Asignaci√≥n de conectores frontales como en la CPU 1511C
Con este par√°metro se determina si para los generadores de impulsos de la CPU 1512C-1 PN
se utiliza la asignaci√≥n de los conectores frontales de la CPU 1511C‚Äë1 PN:

1372

Opci√≥n

Significado

Desactivada (predeter‚Äê
minado)

La CPU 1512C‚Äë1 PN utiliza la asignaci√≥n de conexiones de los conectores
frontales integrados. 1512C‚Äë1 PN soporta el uso de las conexiones de ambos
conectores frontales de la periferia digital integrada para los generadores de
impulsos. La asignaci√≥n de las entradas y salidas de hardware para los ca‚Äê
nales PTO/PWM se describe en el manual de producto de la CPU
1512C-1 PN.

Activada

La CPU 1512C‚Äë1 PN utiliza la asignaci√≥n de conexiones de los conectores
frontales de la CPU 1511C-1 PN. 1511C‚Äë1 PN soporta el uso de conexiones
del primer conector frontal de la periferia digital integrada para los genera‚Äê
dores de impulsos. La asignaci√≥n de las entradas y salidas de hardware para
los canales PTO/PWM se describe en el manual de producto de la CPU
1511C-1 PN.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el m√≥dulo

Modo de operaci√≥n
Modo de operaci√≥n
Con este par√°metro se define para qu√© funci√≥n se utiliza el generador de impulsos de la CPU
compacta. Las posibilidades de ajuste en funci√≥n del modo de operaci√≥n se encuentran en:
Reacci√≥n a STOP de la CPU (P√°gina 1374)
Alarmas de diagn√≥stico (P√°gina 1375)
Entradas y salidas de hardware (PWM, salida de frecuencia) (P√°gina 1375) o bien Entradas y
salidas de hardware (PTO) (P√°gina 1375)
Par√°metros (PWM, salida de frecuencia) (P√°gina 1377) o bien Par√°metros del eje (PTO)
(P√°gina 1377)

Modo de operaci√≥n

Significado

Par√°metros dependientes del modo de ope‚Äê
raci√≥n

Desactivado
(predeterminado)

El generador de impulsos no est√° activado. El ca‚Äê ‚Äî
nal no emite impulsos.

Modulaci√≥n por ancho de
impulso PWM

El canal emite una se√±al con modulaci√≥n por an‚Äê ‚óè Reacci√≥n a STOP de la CPU
cho de impulso (P√°gina 1339) con la duraci√≥n m√≠‚Äê ‚óè Valor sustitutivo para salida de impulso
nima de impulso y la duraci√≥n de periodo parame‚Äê
(DQA)
trizadas. El ciclo de trabajo y la duraci√≥n de per√≠o‚Äê
‚óè Falta tensi√≥n de alimentaci√≥n L+
do se especifican en la interfaz de control.
‚óè Salida de impulso (DQA)
‚óè Salida High Speed (0,1 A)
‚óè Formato de salida
‚óè Duraci√≥n m√≠nima de impulso
‚óè Duraci√≥n de per√≠odo

Salida de frecuencia

El canal emite una se√±al con un ciclo de trabajo fijo ‚óè Reacci√≥n a STOP de la CPU
(P√°gina 1343) del 50 %. La frecuencia se especi‚Äê ‚óè Valor sustitutivo para salida de impulso
fica en la interfaz de control.
(DQA)
‚óè Falta tensi√≥n de alimentaci√≥n L+
‚óè Salida de impulso (DQA)
‚óè Salida High Speed (0,1 A)
‚óè Formato de salida

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1373

Salida de impulsos
5.2 Utilizar el m√≥dulo
Modo de operaci√≥n

Significado

Par√°metros dependientes del modo de ope‚Äê
raci√≥n

PTO (Impulso (A) y senti‚Äê El canal emite una se√±al de impulso y una se√±al
do (B))
de sentido (P√°gina 1346) para una aplicaci√≥n de
Motion Control.
PTO (contador ascenden‚Äê El canal emite una se√±al de avance y una se√±al de
te (A), contador descen‚Äê retroceso (P√°gina 1346) para una aplicaci√≥n de
dente (B))
Motion Control.
PTO (A, B desfasado)

PTO (A, B desfasado,
cu√°druple)

El canal emite dos se√±ales desfasadas con eva‚Äê
luaci√≥n simple (P√°gina 1346) para una aplicaci√≥n
de Motion Control.

‚óè Falta tensi√≥n de alimentaci√≥n L+
‚óè Incrementos por vuelta
‚óè Velocidad de referencia
‚óè Velocidad m√°xima de giro
‚óè Bits para valor real incr. (G1_XIST1)
‚óè Tiempo de parada r√°pida
‚óè Entrada del sensor de referencia

El canal emite dos se√±ales desfasadas con eva‚Äê ‚óè Selecci√≥n de flanco del sensor de
referencia
luaci√≥n cu√°druple (P√°gina 1346) para una aplica‚Äê
ci√≥n de Motion Control.
‚óè Entrada de medici√≥n
‚óè Entrada "Accionamiento listo"
‚óè Salida de impulso (A) / Generador reloj
ascendente (A) / Salida generador de
reloj (A)
‚óè Salida de sentido (B) / Generador reloj
descendente (B) / Salida generador de
reloj (B)
‚óè Salida de habilitaci√≥n del accionamiento

Reacci√≥n a STOP de la CPU
Reacci√≥n a STOP de la CPU
Con este par√°metro se define la reacci√≥n del canal ante el fallo del controlador.
Reacci√≥n a STOP de la CPU

Significado

Aplicar valor sustitutivo
(predeterminado)

Hasta la siguiente transici√≥n de STOP a RUN de la CPU, el canal
emite en su salida de impulso (DQA) el valor sustitutivo parametri‚Äê
zado.
El bit de respuesta STS_ENABLE se ajusta a 0.
Despu√©s de una transici√≥n de STOP a RUN, el canal pasa a su
estado de arranque. Antes de poder iniciar una nueva salida de im‚Äê
pulsos, debe ajustarse el bit de control SW_ENABLE a 0.

Continuar

El canal contin√∫a trabajando.
La salida de impulso (DQA) contin√∫a conmut√°ndose en funci√≥n de la
parametrizaci√≥n y de la √∫ltima consigna.

Valor sustitutivo para salida de impulso (DQA)
Con este par√°metro se define el valor que el canal debe emitir en caso de STOP de la CPU en
la salida digital DQA para el comportamiento "Aplicar valor sustitutivo".
El ajuste predeterminado es "0".

1374

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el m√≥dulo

Alarmas de diagn√≥stico
Falta tensi√≥n de alimentaci√≥n L+
Con este par√°metro se define si se dispara una alarma de diagn√≥stico si falta tensi√≥n de
alimentaci√≥n. Las alarmas de diagn√≥stico se procesan en un OB de alarma.
Este par√°metro est√° desactivado por defecto.

Entradas y salidas de hardware (PWM, salida de frecuencia)
Salida de impulso (DQA)
Con este par√°metro se determina qu√© salida digital de hardware se utiliza para la salida de
impulsos.

Salida High Speed (0,1 A)
Con este par√°metro se define si la correspondiente salida digital de hardware funciona como
conmutador r√°pido en contrafase o como sensor tipo PNP:
Opci√≥n

Significado

Activado

La salida digital trabaja como conmutador r√°pido en contrafase con hasta
100 kHz y resiste una corriente de carga nominal de 0,1 A. Un conmutador en
contrafase se conmuta alternativamente a DC 24 V y a masa. Eso posibilita
flancos muy r√°pidos.

Desactivado
(predeterminado)

La salida digital es de tipo PNP de 24 V con referencia a M (hasta 10 kHz) y
resiste una corriente de carga nominal de 0,5 A.

Nota
El par√°metro solo es efectivo si la salida de hardware seleccionada como salida de impulso
soporta el funcionamiento a 100 kHz. El par√°metro no est√° disponible para las salidas de
hardware que solo soportan frecuencias de hasta 100 Hz.

Entradas y salidas de hardware (PTO)
Entrada del sensor de referencia
Con este par√°metro se define qu√© entrada digital de hardware se utiliza como entrada de
sensor de referencia.
El ajuste predeterminado es "Ninguna".

Selecci√≥n de flanco del sensor de referencia
Con este par√°metro se define el flanco de la entrada del sensor de referencia con el que se
captura la marca de referencia.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1375

Salida de impulsos
5.2 Utilizar el m√≥dulo
El ajuste predeterminado es "Flanco ascendente".
Nota
El par√°metro solo es efectivo si se utiliza una entrada de sensor de referencia.

Entrada de medici√≥n
Con este par√°metro se define qu√© entrada digital de hardware se utiliza como entrada de
medici√≥n.
El ajuste predeterminado es "Ninguna".

Entrada "Accionamiento listo"
Con este par√°metro se define en qu√© entrada digital de hardware se conecta y se lee la se√±al
de disponibilidad del accionamiento.
El ajuste predeterminado es "Ninguna".

Salida de impulso (A) / Generador reloj ascendente (A) / Salida generador de reloj (A)
Este par√°metro indica qu√© salida de hardware se utiliza para la se√±al PTO A. El valor no se
puede modificar.

Salida de sentido (B) / Generador reloj descendente (B) / Salida generador de reloj (B)
Este par√°metro indica qu√© salida de hardware se utiliza para la se√±al PTO B. El valor tan solo
se puede modificar en el modo de operaci√≥n "PTO (impulso (A) y sentido (B))".

Salida de habilitaci√≥n del accionamiento
Con este par√°metro se define qu√© salida de hardware se utiliza para habilitar el accionamiento.
El ajuste predeterminado es "Ninguna".

1376

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el m√≥dulo

Par√°metros (PWM, salida de frecuencia)
Formato de salida
Modo de operaci√≥n "Modulaci√≥n por ancho de impulso PWM":
Con este par√°metro se define el formato o el rango de valores con el que se eval√∫a el ciclo de
trabajo:
Formato de salida

Rango de valores

Salida anal√≥gica S7

0 ... 27648
("27648" equivale al 100 % del valor de referencia)

1/100
(predeterminado)

0 ... 100

1/1000

0 ... 1000

1/10000

0 ... 10000

Modo de operaci√≥n "Salida de frecuencia":
Como formato de salida est√° seleccionado "1 Hz" y no puede modificarse.

Duraci√≥n m√≠nima de impulso
Este par√°metro define la duraci√≥n m√≠nima de impulso permitida para la se√±al PWM.
Los impulsos y las pausas inferiores a este valor se suprimen.
El ajuste predeterminado es "0 Œºs".

Duraci√≥n de per√≠odo
Con este par√°metro se define la duraci√≥n de periodo de la se√±al de salida:
El ajuste predeterminado es "2000000 Œºs". Esto equivale a 2 s.

Par√°metros del eje (PTO)
Incrementos por vuelta
Con este par√°metro se define el n√∫mero de incrementos (incluidos microincrementos) que
equivale a un giro del accionamiento.
El ajuste predeterminado es "200".
Nota
Objeto tecnol√≥gico para Motion Control
Aseg√∫rese de que el valor del par√°metro coincide con el valor indicado en la configuraci√≥n del
objeto tecnol√≥gico utilizado.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1377

Salida de impulsos
5.2 Utilizar el m√≥dulo

Velocidad de referencia
Con este par√°metro se define la velocidad a la que se refiere la consigna de velocidad.
El rango de valores permitido para la consigna de velocidad est√° comprendido entre el ‚Äí200 %
y el 200 % de la velocidad de referencia.
El ajuste predeterminado es "3000.0".
Nota
Objeto tecnol√≥gico para Motion Control
Aseg√∫rese de que el valor del par√°metro coincide con el valor indicado en la configuraci√≥n del
objeto tecnol√≥gico utilizado.

Velocidad m√°xima de giro
Con este par√°metro se define la velocidad m√°xima permitida para la aplicaci√≥n.
El ajuste predeterminado es "3000.0".
Nota
Objeto tecnol√≥gico para Motion Control
Aseg√∫rese de que el valor del par√°metro coincide con el valor indicado en la configuraci√≥n del
objeto tecnol√≥gico utilizado.

Bits para valor real incr. (G1_XIST1)
Este par√°metro indica el n√∫mero de bits para la codificaci√≥n de la resoluci√≥n fina en el valor real
incremental de G1_XIST1.
Nota
Objeto tecnol√≥gico para Motion Control
Aseg√∫rese de que el valor del par√°metro coincide con el valor indicado en la configuraci√≥n del
objeto tecnol√≥gico utilizado.

Tiempo de parada r√°pida
Con este par√°metro se define el intervalo para la ejecuci√≥n de una parada r√°pida desde
velocidad m√°xima a parada completa.
El ajuste predeterminado es "1000 ms".

1378

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Salida de impulsos
5.2 Utilizar el m√≥dulo

5.2.3.2

M√≥dulo Online y diagn√≥stico

Indicaci√≥n y evaluaci√≥n del diagn√≥stico
Por medio de la vista online y de diagn√≥stico puede realizar un diagn√≥stico del hardware.
Adem√°s, puede:
‚óè Recibir informaci√≥n a trav√©s de la CPU compacta (p. ej., la versi√≥n de Firmware y el n√∫mero
de serie).
‚óè Si es necesario, realice una actualizaci√≥n del firmware.

Procedimiento
Para abrir el editor de visualizaci√≥n de las funciones de diagn√≥stico, proceda del siguiente
modo:
1. Abra la carpeta de la CPU compacta en el √°rbol del proyecto.
2. Haga doble clic en el objeto "Online y diagn√≥stico".
3. Haga clic en la visualizaci√≥n deseada en el √°rbol de diagn√≥stico.

M√°s informaci√≥n
Encontrar√° m√°s informaci√≥n sobre los avisos de diagn√≥stico y sobre posibles soluciones en el
manual de producto de la CPU compacta.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1379

Salida de impulsos
5.2 Utilizar el m√≥dulo

1380

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

6

Control de movimiento
6.1

Using S7-1500 Motion Control

6.1.1

S7-1500/S7-1500T Motion Control Overview

6.1.1.1

Introduction

Interplay of the various documents
For a better overview, the documentation of the Motion Control functions is divided into the
following documents:
Documentation

Description

S7-1500/S7-1500T Motion Con‚Äê
trol overview

This documentation describes the Motion Control functions inde‚Äê
pendent of and across technology objects.

Function manual "S7-1500/
S7-1500T Motion Control over‚Äê
view" (https://
support.industry.siemens.com/cs/
ww/en/view/109766459)
Using S7-1500/S7-1500T axis
functions

This documentation describes the Motion Control functions for the
following technology objects:

Function manual "S7-1500/
S7-1500T Axis functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766462)

‚óè Speed axis
‚óè Positioning axis
‚óè External encoder

Using S7-1500/S7-1500T measu‚Äê This documentation describes the Motion Control functions for the
ring input and output cam functions following technology objects:
Function manual "S7-1500/
S7-1500T Measuring input and
output cam functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766466)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

‚óè Measuring input
‚óè Output cam
‚óè Cam track

1381

Control de movimiento
6.1 Using S7-1500 Motion Control
Documentation

Description

Using S7-1500/S7-1500T
synchronous operation functions

This documentation describes the Motion Control functions for the
following technology objects:

Function manual "S7-1500/
S7-1500T Synchronous operation
functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766464)

‚óè Synchronous axis

Using S7-1500T kinematics func‚Äê
tions

This documentation describes the Motion Control functions for the
following technology objects:

‚óè Cam (S7-1500T)
‚óè Leading axis proxy (S7-1500T)

Function manual "S7-1500T Kine‚Äê ‚óè Kinematics (S7-1500T)
matics functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766463)

Additional information
You can find an overview and important links to the topic "SIMATIC Motion Control" in the
Siemens Industry Online Support under the entry ID 109751049 (https://
support.industry.siemens.com/cs/ww/en/view/109751049).

Integrated Motion Control functionality
S7-1500 Motion Control supports closed-loop positioning and moving of axes and is an
integrated part of the CPUs:
‚óè Advanced Controller S7‚Äë1500(F)/S7-1500T(F)
‚óè Distributed Controller S7-1500SP (F)/S7-1500SP T(F)
‚óè Software Controller S7-1507S (F)
‚óè Drive Controller S7-150xD TF
The S7-1500T Technology CPUs provide enhanced functions.
The Motion Control functionality supports the following technology objects:
‚óè Speed axis
‚óè Positioning axis
‚óè Synchronous axis
‚óè External encoder
‚óè Measuring input
‚óè Output cam
‚óè Cam track
‚óè Cam (S7-1500T)
‚óè Kinematics (S7-1500T)
‚óè Leading axis proxy (S7-1500T)

1382

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Drives with PROFIdrive capability and drives with analog setpoint interface and stepper motors
are controlled by means of standardized Motion Control instructions according to PLCopen.
The axis control panel and comprehensive online and diagnostic functions support easy
commissioning and optimization of drives.
S7-1500 Motion Control is fully integrated into the system diagnostics of the S7-1500 CPU.

Principle of operation of S7-1500 Motion Control
You create a project, configure technology objects, and download the configuration to the CPU
with the TIA Portal. The Motion Control functionality is processed in the CPU. You control the
technology objects by using the Motion Control instructions in your user program. The TIA
Portal provides additional functions for commissioning (P√°gina 1478), optimization
and diagnostics (P√°gina 1480).
The following figure provides a schematic representation of the user interfaces and the
integration of Motion Control into the S7-1500 CPU. The concepts are then briefly explained:

7,$3RUWDO

&386
60RWLRQ&RQWURO
8VHUSURJUDP
0RWLRQ&RQWURO
LQVWUXFWLRQV

3/&SURJUDPPLQJ
7HFKQRORJ\REMHFWV
7HFKQRORJ\
GDWDEORFNV
&RQILJXUDWLRQ
&RPPLVVLRQLQJ
'LDJQRVWLFV

7HFKQRORJ\REMHFWV
'RZQORDGLQJWR&38
2QOLQHDQGGLDJQRVWLFIXQFWLRQV

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1383

Control de movimiento
6.1 Using S7-1500 Motion Control

TIA Portal
The TIA Portal supports you in the planning and commissioning of Motion Control functionality:
‚óè Integrating and configuring hardware
‚óè Creating and configuring technology objects
‚óè Creating the user program
‚óè Downloading to CPU
‚óè Commissioning of axes
‚óè Optimization of drives
‚óè Diagnostics
You use the TIA Portal to configure the hardware, the technology objects as well as your user
program. You download the program you created to the CPU. You test your user program and
diagnose the hardware with the online and diagnostic functions of the TIA Portal.

Technology objects

0RWLRQ&RQWURO

Technology objects represent real objects (e.g. an axis) in the controller. You call the functions
of the technology objects by means of Motion Control instructions in your user program. These
functions are executed in the Motion Control organization blocks (P√°gina 1390) independently
of the user program. The technology objects provide open- and closed-loop control of the
movement of the real objects, and report status information (e.g. the current position).
The configuration of the technology objects represents the properties of the real object. The
configuration data is stored in a technology data block.
The following technology objects are available for Motion Control:
Symbol

Technology object

Description

Speed axis

The speed axis technology object ("TO_SpeedAxis") is used to specify
the speed for a drive. You program the motion of the axis with mo‚Äê
tion control instructions.

Positioning axis

The positioning axis technology object ("TO_PositioningAxis") is used
to position a drive with closed-loop position control. You issue positio‚Äê
ning jobs to the axis with Motion Control instructions in your user pro‚Äê
gram.

Synchronous axis

The synchronous axis technology object ("TO_SynchronousAxis") in‚Äê
cludes all functions of the positioning axis technology object. The axis
can also be interconnected with a leading value so that the axis follows
the position change of a leading axis in synchronous operation.

Leading axis proxy With cross-PLC synchronous operation, the leading axis proxy techno‚Äê
(S7-1500T)
logy object ("TO_LeadingAxisProxy") represents the leading axis for
local synchronous operation within a CPU. The leading axis proxy eva‚Äê
luates the leading value telegram and provides the external leading
value for the local synchronous axes.

1384

External encoder

The external encoder technology object ("TO_ExternalEncoder") de‚Äê
tects a position and makes it available to the controller. The detected
position can be evaluated in the user program.

Measuring input

The measuring input technology object ("TO_MeasuringInput") detects
actual positions quickly, accurately and event triggered.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Symbol

Technology object

Description

Output cam

The output cam technology object ("TO_OutputCam") generates swit‚Äê
ching signals depending on the position of an axis or external encoder.
You can evaluate the switching signals in the user program or feed them
to digital outputs.

Cam track

The cam track technology object ("TO_CamTrack") generates a swit‚Äê
ching signal sequence depending on the position of an axis or external
encoder. In this process, up to 32 individual cams are superimposed
and the switching signals are output as a track. You can evaluate the
switching signals in the user program or feed them to digital outputs.

Cam (S7-1500T)

The cam technology object ("TO_Cam") specifies a synchronization
function F(x) for camming, over which the leading and following axes are
coupled. The f(x) function is defined by interpolation points and/or seg‚Äê
ments. Missing function ranges are interpolated.

Kinematics
(S7-1500T)

The Kinematic technology object ("TO_Kinematics") is used to intercon‚Äê
nect positioning axes to a kinematic. When you configure the kinematics
technology object, you interconnect the axes in accordance with the
configured kinematics type.

Technology data block
The properties of real objects are configured by means of the technology objects and saved in a
technology data block (P√°gina 1453). The technology data block contains all configuration
data, setpoint and actual values, and status information of the technology object. The TIA Portal
automatically creates the technology data block when the technology object is created. You
access the data of the technology data block (read/write access) with your user program.

Motion Control instructions
With the Motion Control instructions you perform the desired functionality in the technology
objects. The Motion Control instructions are available in the TIA Portal under "Instructions >
Technology > Motion Control". The instructions can be called at all execution levels.

The Motion Control instructions conform to PLCopen (version 2.0).

User program
The Motion Control instructions and the technology data block represent the programming
interfaces for the technology objects. You use Motion Control instructions to transfer Motion
Control jobs for the technology objects in your user program. The technology objects process
the jobs in the Motion Control organization blocks, which are called independently of the user
program, and flag the current status to the Motion Control instruction. Each time the Motion
Control instruction is called, the current status of the current job is displayed at the output
parameters of the Motion Control instruction. You access status information of the technology
object and change specific configuration parameters during runtime using the technology data
block.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1385

Control de movimiento
6.1 Using S7-1500 Motion Control

Drives and encoders
Drives ensure the motion of the axis. They are integrated in the hardware configuration.
When you execute a Motion Control job in your user program, the technology object takes over
the control of the drive and the reading in of values of encoders.
Drives and encoders with PROFIdrive capability are connected by means of PROFIdrive
telegrams. The following connections are possible:
‚óè PROFINET IO
‚óè PROFIBUS DP
‚óè Technology module (TM)
‚óè SINAMICS Integrated (SIMATIC Drive Controller)
Drives with analog setpoint interfaces are connected using an analog output (AQ) and an
optional enable signal. Analog inputs and outputs are made available by means of
corresponding I/O modules.
A drive is also called an actuator, and an encoder is also called a sensor.
The following figure shows an example configuration in which all components are connected to
the CPU by means of PROFINET IO:
(QJLQHHULQJ

+0,

6,0$7,&6

352),1(7
6,1$0,&6

6,1$0,&6

6LJQDORXWSXW
707LPHU','4

(QFRGHU

9DOYH

(QFRGHU

(QFRGHU

6HQVRU

Guidelines on use of motion control
The guidelines described here present the basic procedure for using Motion Control with the
CPU S7-1500. These guidelines serve as recommendations.

1386

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Requirements
‚óè A project with a CPU S7-1500 has been created.

Procedure
Proceed as follows to use Motion Control with the CPU S7-1500:
1. Add technology object (P√°gina 1420)
2. Working with the configuration editor (P√°gina 1422)
3. Programming (P√°gina 1452)
4. Downloading to CPU (P√°gina 1477)
5. Functional test in the Commissioning window (P√°gina 1478)
6. Diagnostics (P√°gina 1480)

6.1.1.2

Basics

Technology objects
The S7-1500 and S7-1500T CPUs support the following technology objects:
Technology object
Speed axis

Brief description
The speed axis technology object calculates speed setpoints, taking
into account the dynamic settings, and outputs them to the drive. All
motions of the speed axis take place as speed-controlled motions.

S7-1500

S7-1500T

x

x

x

x

x

x

x

x

The speed axis technology object is described in the documentation
"S7-1500/S7-1500T Axis functions" (https://
support.industry.siemens.com/cs/ww/en/view/109766462).
Positioning axis

The positioning axis technology object calculates position setpoints,
taking into account the dynamic specification position setpoints ,
and outputs corresponding speed setpoints to the drive.
The positioning axis technology object is described in the documen‚Äê
tation "S7-1500/S7-1500T Axis functions" (https://
support.industry.siemens.com/cs/ww/en/view/109766462).

Synchronous axis

The synchronous axis technology object includes all functions of the
positioning axis technology object. A synchronous axis can also
follow the motions of a leading axis.
The synchronous axis technology object is described in the docu‚Äê
mentation "S7-1500/S7-1500T Synchronous operation functions"
(https://support.industry.siemens.com/cs/ww/en/view/109766464).

External encoder

The external encoder technology object detects a position and ma‚Äê
kes this available to the controller.
The external encoder technology object is described in the docu‚Äê
mentation "S7-1500/S7-1500T Axis functions" (https://
support.industry.siemens.com/cs/ww/en/view/109766462).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1387

Control de movimiento
6.1 Using S7-1500 Motion Control
Technology object

Brief description

Measuring input

The measuring input technology object acquires the actual position
of an axis or external encoder at a signal change at the measuring
input.

S7-1500

S7-1500T

x

x

x

x

x

x

-

x

-

x

-

x

The measuring input technology object is described in the docu‚Äê
mentation "S7-1500/S7-1500T Measuring input and output cam
functions" (https://support.industry.siemens.com/cs/ww/en/view/
109766466).
Output cam

The output cam technology object generates switching signals de‚Äê
pending on the position of an axis or external encoder.
The output cam technology object is described in the documentation
"S7-1500/S7-1500T Measuring input and output cam functions"
(https://support.industry.siemens.com/cs/ww/en/view/109766466).

Cam track

The cam track technology object generates a switching signal se‚Äê
quence depending on the position of an axis or external encoder. A
cam track can consist of up to 32 individual output cams and be
output to one output.
The cam track technology object is described in the documentation
"S7-1500/S7-1500T Measuring input and output cam functions"
(https://support.industry.siemens.com/cs/ww/en/view/109766466).

Cam

The cam technology object defines a transfer function y = f(x). The
dependency of an output variable on an input variable is described
in this transfer function in a unit-neutral manner.
The cam technology object is described in the documentation
"S7-1500/S7-1500T Synchronous operation functions" (https://
support.industry.siemens.com/cs/ww/en/view/109766464).

Leading axis proxy

With cross-PLC synchronous operation, the leading axis proxy tech‚Äê
nology object represents the leading axis for local synchronous
operation within a CPU.
The synchronous axis technology object is described in the docu‚Äê
mentation "S7-1500/S7-1500T Synchronous operation functions"
(https://support.industry.siemens.com/cs/ww/en/view/109766464).

Kinematics

The kinematics technology object calculates motion setpoints for
the tool center point (TCP) of the kinematics taking into account the
dynamic settings.
The Kinematics technology object is described in the documenta‚Äê
tion "S7-1500T Kinematics functions" (https://
support.industry.siemens.com/cs/ww/en/view/109766463).

Configuration limits
Motion Control resources
Each CPU offers a defined set of Motion Control resources. For information on the available
Motion Control resources, refer to the technical specifications of the utilized CPU.

1388

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Each technology object uses Motion Control resources:
Technology object

Motion Control resources used

Speed axis

40

Positioning axis

80

Synchronous axis

160

External encoder

80

Measuring input

40

Output cam

20

Cam track

160

You can find an overview of the Motion Control resources of a CPU in the TIA Portal under
"Tools > Resources".

Extended Motion Control resources (S7-1500T)
The leading axis proxy, cam and kinematics technology objects use "Extended Motion Control
resources". For information on the maximum number of leading axis proxies, cams and
kinematics that can be used in addition to the Motion Control resources, refer to the technical
specifications of the relevant CPU.
Technology object

Extended Motion Control resources used

Leading axis proxy

3

Cam

2

Kinematics

30

Application cycle
As the number of technology objects used increases, the computing time needed by CPU to
process the technology objects increases. The Motion Control application cycle (P√°gina 1390)
can be adapted according to the number of technology objects used.

Units of measure
The supported units of measure for speed (revolutions per time unit) are 1/s, 1/min and 1/h.
The table below shows the supported units of measure for position and velocity:
Position

Velocity

nm, Œºm, mm , m, km

mm/s1), mm/min, mm/h, m/s, m/min, m/h, km/min,
km/h

in, ft, mi

in/s, in/min, ft/s, ft/min, mi/h

¬∞ , rad

¬∞/s1), ¬∞/min, rad/s, rad/min

1)

1)

1)

Position values with higher resolution or six decimal places

The acceleration is set accordingly as the position/s¬≤ unit of measure.
The jerk is set accordingly as the position/s¬≤ unit of measure.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1389

Control de movimiento
6.1 Using S7-1500 Motion Control
The table below shows the supported units of measure for force and torque:
Force

Torque

N, kN

Nm, kNm

lbf, ozf, pdl

lbf in, lbf ft, ozf in, ozf ft, pdl in, pdl ft

The unit of measure for time is permanently specified for the following technology objects:
Technology object

Time

Speed axis, positioning/synchronous axis, external encoder

s

Output cam, cam track, measuring input

ms

Nota
When setting or changing the units of measure, take into consideration the effect on the display
of parameter values and the user program:
‚óè Display of parameter values in the technology data block
‚óè Assignment of parameters in the user program
‚óè Input and display of the position and velocity in the TIA Portal
‚óè Setpoint settings by leading axes in synchronous operation
All information and displays correspond to the selected unit of measure.
The set units are displayed in the tag structure of the <TO>.Units technology object. The tag
structure is described in the Appendix (P√°gina 1510) under the tags of the respective
technology object.

Position values with higher resolution
If you select the check box "Use position values with higher resolution" in the configuration of
the technology objects "TO_PositioningAxis", "TO_SynchronousAxis", "TO_ExternalEncoder"
and "TO_Kinematics", six decimal places are available in the selected unit. The displayable
position and angle range in [mm] and [¬∞] is limited in LREAL format to +9.0E09 digits. This
reduces the position and angle range that can be displayed as well as the mechanical gear ratio
by the factor 1000. With regard to long-term stability, the numerical travel range limit is reduced
accordingly by the factor 1000.

Process response
Organization blocks for Motion Control
When you create a technology object, organization blocks MC-Servo [OB91] and MCInterpolator [OB92] are automatically created for processing the technology objects. The
organization block MC-LookAhead [OB97] is also created for the kinematics technology object
as of technology version 5.0. The technology objects are processed in the Motion Control
application cycle. The application cycle consists of required and optional organization blocks
(OBs).

1390

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
In the user program, call the appropriate Motion Control instruction and start a Motion Control
job for a technology object. In the organization block Main [OB1], call the user program
cyclically.
Optionally, programmable Motion Control OBs are available, which you must insert manually.
These organization blocks take into account special requirements with regard to time-critical
events or the time sequence of function calls. This makes it possible, for example, to start
motions immediately in the event of time-critical events.
The following table shows the organization blocks for Motion Control:
Organization block

Description

Priority1)

MC-PreServo
[OB67] (optional)

For For example: Preparation of the telegram contents from
the drive system.

Corresponds to
MC-Servo

Is called immediately before the MC-Servo [OB91].
MC-Servo [OB91]
(know-how-protec‚Äê
ted)

Calculation of the position controller

17 to 26

System performance, no user program possible.

Default 26

MC-PostServo
[OB95] (optional)

For For example: Preparation of the setpoints for the drive
system.

Corresponds to
MC-Servo

Is called immediately after the MC-Servo [OB91].
MC-Transformation
[OB98] (optional)

Programming of the transformation of Cartesian coordinates
and axis-specific setpoints for user-defined kinematics

17 to 25

MC-PreInterpolator
[OB68] (optional)

For For example: MotionIn instructions for measuring inputs,
output cams and cam tracks

Corresponds to
MC-Interpolator

Default 25

The MC-PreInterpolator [OB68] is required for iposynchro‚Äê
nous processing of Motion Control instructions.
Is called immediately before the MC-Interpolator [OB92].
MC-Interpolator
[OB92] (know-howprotected)

Evaluation of the Motion Control instructions, generation of
setpoints and monitoring functionality

MC-LookAhead
[OB97] (know-howprotected)

Calculation of the motion processing of the kinematics tech‚Äê
nology object

System performance, no user program possible.

Applies only to a technology object kinematics V5.0 or higher.

16 to 25
Default 24
15 to 16
Default 15

System performance, no user program possible.
1)

26 corresponds to highest priority.

The clock ratio of the two organization blocks MC-Servo [OB91] and MC-Interpolator [OB92] to
each other is always 1:1. You can scale the ratio of the bus clock to the application cycle.
You can set the application cycle and the priority of the organization blocks according to your
requirements for control quality and system load.
You can check the runtime of the respective organization block (except MC-LookAhead
[OB97]) with the instruction "RT_INFO". The current application cycle (in ¬µs) of the organization
blocks MC-PreServo [OB67] and MC-PostServo [OB95] and MC-PreInterpolator [OB68] can
be read using the start information.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1391

Control de movimiento
6.1 Using S7-1500 Motion Control

Application cycle
In the properties of the organization block MC-Servo [OB91], you can set the application cycle
in which the organization blocks for MC-Servo [OB91], MC-Interpolator [OB92] and their
optional OBs are called:
‚óè Synchronous to the bus (recommended setting for optimum control quality)
The application cycle is synchronous to the selected source of the send clock and the
corresponding reduction ratio. The following clock sources are available for selection:
‚Äì PROFINET IO
‚Äì PROFIBUS DP
‚Äì Local bus system (as of firmware version ‚â• 2.6)
‚Äì PROFIdrive system for SINAMICS Integrated of SIMATIC Drive Controller
A bus system that is connected to the CPU via a communication processor/communication
module (CP/CM) cannot be used synchronously.
‚óè Cyclic
The application cycle is called at the specified time interval. Processing is asynchronous to
the bus clock/send clock.

Possibilities of influencing the process behavior
The system load is primarily determined by the quantity structure (number of technology
objects), the communication load and the user program. The processing time in the application
cycle increases with the number of technology objects (MC-Servo [OB91]). Simultaneous
starting of Motion Control instructions results in additional processing times in the application
cycle (MC-Interpolator [OB92] and MC-LookAhead [OB97]) at short notice. Optional Motion
Control OBs additionally affect the processing time of the application cycle.
You define the available processing time using the set application cycle. The time available at
the end of the application cycle is used for processing the low-priority OBs with the other user
program.
The cycle time of the Main [OB1] can increase significantly due to longer processing times in
the application cycle.
System overloads are indicated by timeouts or overflows (P√°gina 1393) of Main [OB1], MCServo [OB91] and MC-Interpolator [OB92].
You have the following options for influencing the system load and the processing times of the
user program:
‚óè Reduce the bus clock
‚óè Reduce clock
‚óè Reduce the percentage cycle load of the MC-LookAhead [OB97] (adjustment range 1% to
40%, default setting 20%)
‚óè Reduce percentage communication load of the CPU
‚óè To relieve the load on MC-Interpolator [OB92] and MC-LookAhead [OB97], avoid
simultaneous starting of Motion Control instructions
If necessary, use one or more options to optimize the system and the flow behavior.

1392

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Clock reduction ratio (as of firmware version 1.5)
You can reduce the application cycle of the MC-Servo [OB91] to the send clock of the selected
isochronous bus system. You can set an integer multiple of the send clock as the factor. A
maximum cycle time of 32 ms is possible for the application cycle.
If you call an isochronous mode interrupt OB and the MC-Servo [OB91] with the same bus
system, you must set the same factor for both organization blocks.

Priority
You can configure the priority of the organization blocks as needed in their properties under
"General > Properties > Priority".
When setting the priorities, make sure that the MC-Servo [OB91] is always set before the MCPreInterpolator [OB68] and the MC-Interpolator [OB92]. The priority of MC-Servo [OB91] must
be at least one higher than the priority of MC-Interpolator [OB92]. The priority of the MCLookAhead [OB97] must be at least one level higher than the priority of cyclic interrupts.

Consulte tambi√©n
Data connection drive/encoder via data block (P√°gina 1570)

Process image partition "OB Servo PIP"
The process image partition "OB Servo PIP" is made available in isochronous mode for Motion
Control when MC-Servo [OB91] is called. All drives and encoders used by Motion Control are
assigned to this process image partition.
Because the organization blocks MC-PreServo [OB67] and MC-PostServo [OB95] are called
automatically by the MC-Servo [OB91], the process image partition is also available
automatically. If you use a MC-PreServo [OB67], the data are read in when the MC-PreServo
[OB67] starts. If you use a MC-PostServo [OB95], the data are output after the MC-PostServo
[OB95].
Additionally, you should assign all I/O modules used by Motion Control to this process image
partition (e.g. hardware limit switches). The assignment results in chronologically synchronous
processing with the technology object.
The input process image partition is also updated in STOP mode.

Process image partition in the user program
As of firmware version V1.5, you can access the process image partition "OB Servo PIP" in your
user program. This makes it possible to evaluate the process image partition using the trace
function.

Operational Sequence and Timeouts
When processing the Motion Control functionality, the Motion Control organization blocks MCServo [OB91] and MC-Interpolator [OB92] including the optional organization blocks are called
and processed in each application cycle. Your user program is processed during the remaining
time until the next application cycle.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1393

Control de movimiento
6.1 Using S7-1500 Motion Control
For error-free program execution, keep to the following rules:
‚óè In each application cycle, MC-Servo [OB91] must be started and executed completely.
‚óè In each application cycle, the relevant MC-Interpolator [OB92] must at least be started.
The following figure illustrates the time sequence of the cyclic user program and application
cycle:
‚óè The upper section shows the processing of the Main [OB1] without interruption of the
application cycle by Motion Control OBs with higher priority.
‚óè The central section shows the processing of Main [OB1] with interruption. Motion Control
OBs with higher priority are executed in the application cycle.
The Main [OB1] is interrupted in the cycle of the application cycle; the cycle time of the user
program becomes accordingly longer.
‚óè The lower section shows a detailed view of the error-free run behavior of the individual
organization blocks.

1394

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

0DLQ>2%@

Q



0DLQ
&\FOHQ

0DLQ
&\FOHQ

0&/RRN
$KHDG

&ORFN

$SS
&\FOH


0DLQ
&\FOHQ

0&/RRN
$KHDG

&ORFN

$SS
&\FOH


0DLQ
&\FOHQ

0&/RRN
$KHDG

$SS
&\FOH


&ORFN

$SS
&\FOH

Q



$SSOLFDWLRQ&\FOH
W
0&3UH6HUYR>2%@
W
0&6HUYR>2%@

6

6
W

0&3RVW6HUYR>2%@
W
0&3UH,QWHUSRODWRU>2%@
W
0&,QWHUSRODWRU>2%@

,

,
W

0&/RRN$KHDG>2%@




W

0DLQ>2%@






W



‚ë†
‚ë°
‚ë¢
‚ë£
‚ë§
‚ë•



"TPA OB Servo" input process image partition
"TPA OB Servo" output process image partition
First MC-LookAhead cycle
Second MC-LookAhead cycle
Main [OB1] cycle n
Main [OB1] cycle n+1

The Motion Control OBs and the Main [OB1] are processed one after the other in application
cycle 1. The process image partition "TPA OB SERVO" ‚ë† is read before processing the MCPreServo [OB67]. The MC-Servo [OB91] is displayed as S1 in the first application cycle. After
processing the MC-PostServo [OB95], the process image partition "TPA OB SERVO" ‚ë° is
updated.
The MC-PreInterpolator [OB68] and the MC-Interpolator [OB92] are then processed. The MCInterpolator [OB92] is displayed as I1 in the first application cycle. Its processing time varies
according to the evaluation of the Motion Control instructions as well as the monitoring and
setpoint generation for all technology objects configured on the CPU for motion contol.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1395

Control de movimiento
6.1 Using S7-1500 Motion Control
Number ‚ë¢ represents the processing of the MC-LookAhead [OB97] The Main [OB1] (‚ë§) is
further processed only after all Motion Control OBs have been processed.
In the second application cycle, the processing time for the MC-Interpolator [OB92] I2 and the
second MC-LookAhead cycle ‚ë£ is shorter than in the first application cycle. The Main [OB1]
cycle n ‚ë§ is finished before the third application cycle. The Main [OB1] cycle n+1 ‚ë• is already
being processed in the remaining time until the third application cycle. This means that parts of
two Main [OB1] cycles can be processed between two application cycles.

Overflows
Overflows can occur if the configured application cycle is not adhered to, for example because
additional technology objects or programs are added in the MC-PreServo [OB67] or MCPostServo [OB95]. The application cycle must be adapted in this case. The MC-Servo [OB91]
must be completed before the next send clock, irrespective of the permissible duration of the
application cycle.
If the processing time of MC-Servo [OB91] exceeds the duration of a send clock, the message
"overflow" is displayed in the diagnostics buffer of the CPU. The controller no longer runs
isochronously.
If the processing time exceeds the duration of an application cycle, the CPU switches to STOP
operating state.
The following figure shows the behavior in the case of overflow of MC-Servo [OB91] in the
application cycle and in the send clock with a reduction ratio of 2:








$SSOLFDWLRQF\FOH
W


6HQGFORFNF\FOH














W

0&6HUYR>2%@

6

6

6
W

0HVVDJH


&386723



‚ë†
‚ë°

Overflow (message)

*

Including MC-PreServo [OB67] and/or MC-PostServo [OB95], when in use

Start of the processing of MC-Servo [OB91]

The execution of an MC-Interpolator [OB92] may only be interrupted by an MC-Servo [OB91]
call. If more interruptions occur, the CPU switches to STOP mode.
The following figure shows the operational sequence when an MC-Interpolator [OB92] is
interrupted over two time slices:

1396

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control









$SSOLFDWLRQF\FOH
W
0&6HUYR>2%@

6

6

6
W

0&,QWHUSRODWRU>2%@

,

,

,
W

0DLQ>2%@

&386723

W

1)

Including MC-PreServo [OB67] and/or MC-PostServo [OB95], when in use

2)

Including MC-PreInterpolator [OB68], if available

The CPU tolerates a maximum of three consecutive overflows of MC-Interpolator [OB92]. If
more overflows occur, the CPU switches to STOP mode.
The following figure shows the operational sequence if there are four consecutive individual
overflows of MC-Interpolator [OB92]:










$SSOLFDWLRQF\FOH
W
0&6HUYR>2%@

6

6

6

6

6
W

0&,QWHUSRODWRU>2%@



,

,

,

,

,

,

,

,
W

0DLQ>2%@

&386723

1)

Including MC-PreServo [OB67] and/or MC-PostServo [OB95], when in use

2)

Including MC-PreInterpolator [OB68], if available

W

Operating modes
This section examines the behavior of the Motion Control in the respective operating modes
and in the transitions between operating modes. A general description of the operating modes
can be found in the S7-1500 System Manual

Operating modes and transitions
The CPU has the following operating modes:
‚óè STOP
‚óè STARTUP
‚óè RUN
‚óè HOLD

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1397

Control de movimiento
6.1 Using S7-1500 Motion Control
The following figure shows the operating modes and the operating mode transitions:

+$/7






6723





67$5783






581



Operating mode transitions
The following table shows the behavior of the Motion Control in the transitions between the
operating modes:
No.

‚ë†
‚ë°
‚ë¢
‚ë£

‚ë§
‚ë•
‚ë¶
‚ëß
‚ë®

Operating mode
transition

Behavior

POWER ON ‚Üí
STOP

The CPU performs a restart of the technology objects. The technology objects are reinitialized
with the values from the load memory.

STOP ‚Üí STARTUP

Not relevant for Motion Control.

STARTUP ‚Üí RUN

The process outputs are enabled.

RUN ‚Üí STOP

When the CPU changes from RUN mode to STOP mode, all technology objects are disabled
in accordance with the alarm response "remove enable". Active Motion Control jobs are abor‚Äê
ted.
If restart-relevant data has been changed for technology objects in RUN, the CPU performs a
restart of the corresponding technology objects.

STARTUP ‚Üí HOLD

Breakpoint in the start-up routine reached.

HOLD ‚Üí STARTUP

Not possible when using technology objects

RUN ‚Üí HOLD

Breakpoint reached

HOLD ‚Üí RUN

Not possible when using technology objects

HOLD ‚Üí STOP

By operation of switch/display or by setting to STOP from programming device.

STOP mode
In STOP mode the user program is not processed and all process outputs are disabled. Thus
no Motion Control jobs are executed.
The technology data blocks are updated.

STARTUP mode
Before the CPU starts processing of the cyclical user program, the startup OBs are processed
one time.
In STARTUP mode, the process outputs are disabled. Motion Control jobs are rejected.

1398

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The technology data blocks are updated.

RUN mode
The user program is processed in RUN mode.
In RUN mode, the programmed Motion Control jobs are cyclically called and processed.
The technology data blocks are updated.

HOLD operating state
Working with breakpoints is not supported when technology objects are used. An overflow of
the MC-Servo hereby occurs. This leads to an immediate switch to STOP mode.
In HOLD operating state, events are not initiated and the user program is not executed.
All outputs are disabled or react according to the parameter settings. Outputs supply a
configured substitute value or keep the last value output and bring the controlled process to a
safe operating state.
When you reach a breakpoint, the CPU executes an implicit restart of the technology object.
Homing the technology once again.

6.1.1.3

Using versions

Overview of versions
For S7-1500 Motion Control, a distinction is made between the version of the technology, the
technology objects and the Motion Control instructions. The overview shown below includes
S7-1500 and S7-1500T. Only one technology version can be operated on a CPU.
When changing to a CPU ‚â• V1.6, you must change the technology version accordingly. Card
replacement from a CPU < V1.6 to a ‚â• CPU V1.6 is supported. In the TIA Portal, you can use
a CPU ‚â• V1.6 only to work on projects with a correspondingly higher technology version.
There are two ways of changing the technology version:
‚óè Changing the version of the Motion Control instructions
You change the version of the Motion Control instructions in the "Instructions" task card in
the folder "Technology > Motion Control > S7-1500 Motion Control".
If the Motion Control instruction version used does not correspond to the compatibility list,
the relevant Motion Control instructions are highlighted in red in the program editor.
‚óè Adding a technology object with an alternative version
If a technology object with an alternative version is added in the "Add new object" dialog, the
technology version is changed to the alternative version.
The technology objects and Motion Control instructions are only converted to the selected
version of the technology during compilation.
The version of a technology object or a Motion Control instruction is indicated in the properties
of the technology object, "General > Information" tab, "Version" field.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1399

Control de movimiento
6.1 Using S7-1500 Motion Control

Compatibility list
The table below shows the compatibility of the technology version with the CPU version:
CPU

Technology

Technology object

V2.8

V5.0

Speed axis V5.0
Positioning axis V5.0
External encoder V5.0
Synchronous axis V5.0
Measuring input V5.0
Output cam V5.0
Cam track V5.0
Cam V5.0 (S7-1500T)
Kinematics V5.0 (S7-1500T)
Leading axis proxy V5.0 (S7-1500T)

V2.5

V4.0

Speed Axis V4.0
Positioning Axis V4.0
External Encoder V4.0
Synchronous Axis V4.0
Measuring input V4.0
Cam V4.0
Cam track V4.0
Cam V4.0 (S7-1500T)
Kinematics V4.0 (S7-1500T)

V2.0, V2.1

V3.0

Speed Axis V3.0
Positioning axis V3.0
External encoder V3.0
Synchronous axis V3.0
Measuring input V3.0
Output cam V3.0
Cam track V3.0
Cam V3.0 (S7-1500T)

V1.6, V1.7, V1.8

V2.0

Speed Axis V2.0
Positioning axis V2.0
External encoder V2.0
Synchronous axis V2.0

V1.0, V1.1, V1.5

1

V1.0

Speed Axis V1.0
Positioning axis V1.0
External encoder V1.0

1) Card replacement from a CPU < V1.6 to a CPU ‚â• V1.6 is supported.

Parameter "Mode" of the Motion Control instruction "MC_Home"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control has
been standardized within the framework of technology version V2.0. This results in a new
assignment of the parameter values for the "MC_Home.Mode" parameter.

1400

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The table below shows a comparison of the "MC_Home.Mode" parameter for technology V1.0
and ‚â• V2.0:
MC_Home.HomingMode V1.0

Parameter
value

MC_Home.Mode ‚â• V2.0

Direct homing (absolute)

0

Direct homing (absolute)

Direct homing (relative)

1

Direct homing (relative)

Passive homing

2

Passive homing (without reset)

Passive homing (with configured home po‚Äê 3
sition)

Active homing

Active homing

4

Reserved

Active homing (with configured home po‚Äê
sition)

5

Active homing (with configured home po‚Äê
sition)

Absolute encoder adjustment (relative)

6

Absolute encoder adjustment (relative)

Absolute encoder adjustment (absolute)

7

Absolute encoder adjustment (absolute)

Passive homing (without reset)

8

Passive homing

Abort passive homing

9

Abort passive homing

-

10

Passive homing (with configured home po‚Äê
sition)

You can find additional information about the "MC_Home.Mode" parameter in the description
of the Motion Control instruction "MC_Home".

Tags of the technology object
Starting from technology version V3.0, all input and output addresses are specified using data
type "VREF". This results in the following changes to the tags of the technical object:
Tag of technology object

Changes starting from
V3.0

<TO>.Actor.Interface.AddressIn

Data type: VREF

<TO>.Actor.Interface.AddressOut

Data type: VREF

<TO>.Sensor[1..4].Interface.AddressIn

Data type: VREF

<TO>.Sensor[1..4].Interface.AddressOut

Data type: VREF

<TO>.Actor.Interface.EnableDriveOutputAddress

Data type: VREF

<TO>.Actor.Interface.EnableDriveOutputBitNumber

Tag eliminated

<TO>.Actor.Interface.DriveReadyInputAddress

Data type: VREF

<TO>.Actor.Interface.DriveReadyInputBitNumber

Tag eliminated

<TO>.Sensor[1..4].ActiveHoming.DigitalInputAddress

Data type: VREF

<TO>.Sensor[1..4].ActiveHoming.DigitalInputBitNumber

Tag eliminated

<TO>.Sensor[1..4].PassiveHoming.DigitalInputAddress

Data type: VREF

<TO>.Sensor[1..4].PassiveHoming.DigitalInputBitNumber

Tag eliminated

<TO>.PositionLimits_HW.MinInputAddress

Data type: VREF

<TO>.PositionLimits_HW.MinInputBitNumber

Tag eliminated

<TO>.PositionLimits_HW.MaxInputAddress

Data type: VREF

<TO>.PositionLimits_HW.MaxInputBitNumber

Tag eliminated

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1401

Control de movimiento
6.1 Using S7-1500 Motion Control

Version V5.0
Innovations
Technology version V5.0 contains the following new features:
‚óè The values for position, velocity and angle can be configured with higher resolution.
‚óè In the axis control panel, the dynamic values are retained until the axis control panel is
closed.
‚óè In the central operation of the technological modules, the clock synchronization is supported
via the active backplane bus.
‚óè The organization block MC-PreInterpolator [OB68] enables isosynchronous processing of
Motion Control instructions.
‚óè With a "MC_Stop" job, you can stop an axis and prevent new jobs.
‚óè With a "MC_Home" job, target positions can be set absolutely or relatively.
‚óè With a "MC_Reset" job, alarms in the drive can be acknowledged without a pending error at
the technology object.
‚óè Selected bits in control word 1 and control word 2 can be controlled with a
"MC_SetAxisSTW" job.
‚óè With a "MC_WriteParameter" job, hardware limit switches can be activated and deactivated.
‚óè The tag "<TO>.VelocitySetpoint" indicates the effective setpoint velocity.
‚óè The tag "<TO>.ModuloCycle" indicates the number of modulo cycles of the setpoint.
‚óè The tag "<TO>.ActualModuloCycle" indicates the number of modulo cycles of the actual
value.

Additional innovations for S7-1500T
Technology Version V5.0 contains the following additional improvements:
‚óè The default value of the CPU communication load for the following CPUs was reduced from
50% to 20%:
‚Äì S7-1505SP T/TF
‚Äì S7-1511T/TF
‚Äì S7-1515T/TF
‚Äì S7-1516T/TF
‚óè The default values of the bus clocks are:
‚Äì 4 ms for CPUs 1511T/TF and 1515T/TF
‚Äì 2 ms for CPU 1516T/TF
‚Äì 1 ms for CPU 1517T/TF

1402

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
‚óè Synchronous operation:
‚Äì With a cross-PLC synchronous operation, a synchronous operation is possible between
axes which are located on different CPUs within a project.
‚Äì A cross-PLC synchronous operation can be configured using the leading axis proxy
technology object.
‚Äì The actual value extrapolation has been extended.
‚Äì With a "MC_LeadingValueAdditive" job, an additive leading value can be specified for
the following axis cyclically to a leading value.
‚Äì With a "MC_GearInPos" job, a subsequent synchronization via leading value distance is
possible for gearing.
‚Äì With a "MC_CamIn" job, a subsequent synchronization via leading value distance is
possible for camming.
‚Äì The tag "<TO>.StatusSynchronizedMotion.StatusWord" indicates the exceeding of the
dynamics limits during synchronization.
‚Äì The tag "<TO>.StatusSynchronizedMotion.WaitingFunctionState" indicates a pending
synchronous operation.
‚óè Kinematics:
‚Äì You can configure the predefined kinematics type "SCARA 2D with orientation".
‚Äì A model of the kinematics with the configured zones is displayed in the "Diagnostics"
window.
‚Äì It is possible to measure object coordinate systems offline and online using the
"Calibration" window.
‚Äì The movement preparation of the kinematics technology object is calculated in the MCLookAhead [OB97] organization block.
‚Äì A kinematics with a synchronous "point-to-point" motion can be traversed absolutely with
a "MC_MoveDirectAbsolute" job.
‚Äì A kinematics with a synchronous "point-to-point" motion can be traversed relatively with
a "MC_MoveDirectRelative" job.
‚Äì With a "MC_KinematicsTransformation" job, a forward transformation can be calculated.
‚Äì With a "MC_InverseKinematicsTransformation" job, an inverse transformation can be
calculated.
‚Äì With a "MC_TrackConveyorBelt" job, conveyor tracking is possible.

Motion Control instructions
The technology version V5.0 contains the following new Motion Control instructions:
‚óè MC_Stop V5.0
‚óè MC_SetAxisSTW V5.0
‚óè MC_WriteParameter V5.0
‚óè MC_LeadingValueAdditive V5.0

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1403

Control de movimiento
6.1 Using S7-1500 Motion Control
‚óè MC_MoveDirectAbsolute V5.0 (S7-1500T)
‚óè MC_MoveDirectRelative V5.0 (S7-1500T)
‚óè MC_TrackConveyorBelt V5.0 (S7-1500T)
‚óè MC_KinematicsTransformation V5.0 (S7-1500T)
‚óè MC_InverseKinematicsTransformation V5.0 (S7-1500T)
The technology version V5.0 contains the following revised Motion Control instructions:
‚óè MC_Reset V5.0
‚óè MC_Home V5.0
‚óè MC_GearInPos V5.0 (S7-1500T)
‚óè MC_CamIn V5.0 (S7-1500T)
In addition, the technology version V5.0 contains unchanged Motion Control instructions from
V4.0:
‚óè MC_Power V5.0
‚óè MC_Halt V5.0
‚óè MC_MoveAbsolute V5.0
‚óè MC_MoveRelative V5.0
‚óè MC_MoveVelocity V5.0
‚óè MC_MoveJog V5.0
‚óè MC_MoveSuperimposed V5.0
‚óè MC_SetSensor V5.0 (S7-1500T)
‚óè MC_MeasuringInput V5.0
‚óè MC_MeasuringInputCyclic V5.0
‚óè MC_AbortMeasuringInput V5.0
‚óè MC_OutputCam V5.0
‚óè MC_CamTrack V5.0
‚óè MC_GearIn V5.0
‚óè MC_PhasingRelative V5.0 (S7-1500T)
‚óè MC_PhasingAbsolute V5.0 (S7-1500T)
‚óè MC_SynchronizedMotionSimulation V5.0 (S7-1500T)
‚óè MC_InterpolateCam V5.0 (S7-1500T)
‚óè MC_GetCamLeadingValue V5.0 (S7-1500T)
‚óè MC_GetCamFollowingValue V5.0 (S7-1500T)
‚óè MC_MotionInVelocity V5.0 (S7-1500T)
‚óè MC_MotionInPosition V5.0 (S7-1500T)
‚óè MC_TorqueAdditive V5.0

1404

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
‚óè MC_TorqueRange V5.0
‚óè MC_TorqueLimiting V5.0
‚óè MC_GroupInterrupt V5.0 (S7-1500T)
‚óè MC_GroupContinue V5.0 (S7-1500T)
‚óè MC_GroupStop V5.0 (S7-1500T)
‚óè MC_MoveLinearAbsolute V5.0 (S7-1500T)
‚óè MC_MoveLinearRelative V5.0 (S7-1500T)
‚óè MC_MoveCircularAbsolute V5.0 (S7-1500T)
‚óè MC_MoveCircularRelative V5.0 (S7-1500T)
‚óè MC_DefineWorkspaceZone V5.0 (S7-1500T)
‚óè MC_DefineKinematicsZone V5.0 (S7-1500T)
‚óè MC_SetWorkspaceZoneActive V5.0 (S7-1500T)
‚óè MC_SetWorkspaceZoneInactive V5.0 (S7-1500T)
‚óè MC_SetKinematicsZoneActive V5.0 (S7-1500T)
‚óè MC_SetKinematicsZoneInactive V5.0 (S7-1500T)
‚óè MC_DefineTool V5.0 (S7-1500T)
‚óè MC_SetTool V5.0 (S7-1500T)
‚óè MC_SetOcsFrame V5.0 (S7-1500T)

Version-based UDT names
The following table shows the version-based UDT names for the control words and status
words of the SIEMENS telegrams 10x:
UDT name < V4.0

UDT name ‚â• V4.0

WORD data type

PD_STW1

PD_STW1_611Umode

Control word 1 (STW1)

PD_STW2

PD_STW2_611Umode

Control word 2 (STW2)

PD_ZSW1

PD_ZSW1_611Umode

Status word 1 (ZSW1)

PD_ZSW2

PD_ZSW2_611Umode

Status word 2 (ZSW2)

If you switch from a technology version < V4.0 to ‚â• V4.0 or vice versa, an error occurs during
the compilation. You have to adapt the UDT names manually.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1405

Control de movimiento
6.1 Using S7-1500 Motion Control

Version V4.0
Innovations
Technology Version V4.0 contains the following new features:
‚óè Exchange of torque data with the drive in the technological units of the technology object.
‚Äì Additive setpoint torque
‚Äì Current actual torque
‚Äì Permissible torque range
‚óè Extension of the data structure of the positioning axis and synchronous axis for using
technology object kinematics
‚óè Use of optimized data blocks (drive/encoder connection)

Additional innovations for S7-1500T
Technology Version V4.0 contains the following additional features:
‚óè Kinematic technology object (S7-1500T)
‚óè Motion specification via "MotionIn" instructions (S7-1500T)
‚óè Direct synchronous setting with "MC_CamIn" V4.0 (S7-1500T)

Motion Control instructions
Technology Version V4.0 contains the following Motion Control instructions:
‚óè MC_Power V4.0
‚óè MC_Reset V4.0
‚óè MC_Home V4.0
‚óè MC_Halt V4.0
‚óè MC_MoveAbsolute V4.0
‚óè MC_MoveRelative V4.0
‚óè MC_MoveVelocity V4.0
‚óè MC_MoveJog V4.0
‚óè MC_MoveSuperimposed V4.0
‚óè MC_SetSensor V4.0 (S7-1500T)
‚óè MC_MeasuringInput V4.0
‚óè MC_MeasuringInputCyclic V4.0
‚óè MC_AbortMeasuringInput V4.0
‚óè MC_OutputCam V4.0
‚óè MC_CamTrack V4.0

1406

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
‚óè MC_GearIn V4.0
‚óè MC_GearInPos V4.0 (S7-1500T)
‚óè MC_PhasingAbsolute V4.0 (S7-1500T)
‚óè MC_PhasingRelative V4.0 (S7-1500T)
‚óè MC_CamIn V4.0 (S7-1500T)
‚óè MC_SynchronizedMotionSimulation V4.0 (S7-1500T)
‚óè MC_InterpolateCam V4.0 (S7-1500T)
‚óè MC_GetCamFollowingValue V4.0 (S7-1500T)
‚óè MC_GetCamLeadingValue V4.0 (S7-1500T)
‚óè MC_MotionInVelocity V4.0 (S7-1500T)
‚óè MC_MotionInPosition V4.0 (S7-1500T)
‚óè MC_TorqueAdditive V4.0
‚óè MC_TorqueRange V4.0
‚óè MC_TorqueLimiting V4.0
‚óè MC_GroupInterrupt V4.0 (S7-1500T)
‚óè MC_GroupContinue V4.0 (S7-1500T)
‚óè MC_GroupStop V4.0 (S7-1500T)
‚óè MC_MoveLinearAbsolute V4.0 (S7-1500T)
‚óè MC_MoveLinearRelative V4.0 (S7-1500T)
‚óè MC_MoveCircularAbsolute V4.0 (S7-1500T)
‚óè MC_MoveCircularRelative V4.0 (S7-1500T)
‚óè MC_DefineWorkspaceZone V4.0 (S7-1500T)
‚óè MC_DefineKinematicsZone V4.0 (S7-1500T)
‚óè MC_SetWorkspaceZoneActive V4.0 (S7-1500T)
‚óè MC_SetWorkspaceZoneInactive V4.0 (S7-1500T)
‚óè MC_SetKinematicsZoneActive V4.0 (S7-1500T)
‚óè MC_SetKinematicsZoneInactive V4.0 (S7-1500T)
‚óè MC_DefineTool V4.0 (S7-1500T)
‚óè MC_SetTool V4.0 (S7-1500T)
‚óè MC_SetOcsFrame V4.0 (S7-1500T)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1407

Control de movimiento
6.1 Using S7-1500 Motion Control

Version-based UDT names
The following table shows the version-based UDT names for the control words and status
words of the SIEMENS telegrams 10x:
UDT name <V4.0

UDT name ‚â•V4.0

WORD data type

PD_STW1

PD_STW1_611Umode

Control word 1 (STW1)

PD_STW2

PD_STW2_611Umode

Control word 2 (STW2)

PD_ZSW1

PD_ZSW1_611Umode

Status word 1 (ZSW1)

PD_ZSW2

PD_ZSW2_611Umode

Status word 2 (ZSW2)

If you switch from a technology version <V4.0 to ‚â•V4.0 or vice versa, an error occurs during the
compilation. You have to adapt the UDT names manually.

Version V3.0
Innovations
Technology Version V3.0 contains the following new features:
‚óè Measuring input technology object
‚óè Output cam technology object
‚óè Cam track technology object
‚óè Force/torque limiting
‚óè Fixed stop detection
‚óè Axis type virtual axis
‚óè MC-PreServo [OB67] and MC-PostServo [OB95]
‚óè Technology CPU S7-1500T

Additional innovations for S7-1500T
Technology Version V3.0 contains the following additional improvements:
‚óè Cam technology object (S7-1500T)
‚óè Gearing with "MC_GearInPos" (S7-1500T)
‚óè Camming with "MC_CamIn" (S7-1500T)
‚óè Using multiple encoders (S7-1500T)

Motion Control instructions
Technology Version V3.0 contains the following Motion Control instructions:
‚óè MC_Power V3.0
‚óè MC_Reset V3.0
‚óè MC_Home V3.0

1408

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
‚óè MC_Stop V3.0
‚óè MC_MoveAbsolute V3.0
‚óè MC_MoveRelative V3.0
‚óè MC_MoveVelocity V3.0
‚óè MC_MoveJog V3.0
‚óè MC_MoveSuperimposed V3.0
‚óè MC_SetSensor V3.0 (S7-1500T)
‚óè MC_MeasuringInput V3.0
‚óè MC_MeasuringInputCyclic V3.0
‚óè MC_AbortMeasuringInput V3.0
‚óè MC_OutputCam V3.0
‚óè MC_CamTrack V3.0
‚óè MC_GearIn V3.0
‚óè MC_GearInPos V3.0 (S7-1500T)
‚óè MC_PhasingAbsolute V3.0 (S7-1500T)
‚óè MC_PhasingRelative V3.0 (S7-1500T)
‚óè MC_CamIn V3.0 (S7-1500T)
‚óè MC_SynchronizedMotionSimulation V3.0 (S7-1500T)
‚óè MC_InterpolateCam V3.0 (S7-1500T)
‚óè MC_GetCamFollowingValue V3.0 (S7-1500T)
‚óè MC_GetCamLeadingValue V3.0 (S7-1500T)
‚óè MC_TorqueLimiting V3.0

Version V2.0
Innovations
Technology Version V2.0 contains the following new features:
‚óè Synchronous axis technology object
‚óè Gearing with "MC_GearIn"
‚óè Superimposed positioning with "MC_MoveSuperimposed"
‚óè Standardization of the "MC_Home.Mode" parameter for S7‚Äë1200 Motion Control and
S7‚Äë1500 Motion Control
‚óè Simulation mode
‚óè Support of safety functions of the drive

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1409

Control de movimiento
6.1 Using S7-1500 Motion Control

Motion Control instructions
Technology Version V2.0 contains the following Motion Control instructions:
‚óè MC_Power V2.0
‚óè MC_Reset V2.0
‚óè MC_Home V2.0
‚óè MC_Halt V2.0
‚óè MC_MoveAbsolute V2.0
‚óè MC_MoveRelative V2.0
‚óè MC_MoveVelocity V2.0
‚óè MC_MoveJog V2.0
‚óè MC_MoveSuperimposed V2.0
‚óè MC_GearIn V2.0

Version V1.0
Motion Control instructions
Technology Version V1.0 contains the following Motion Control instructions:
‚óè MC_Power V1.0
‚óè MC_Reset V1.0
‚óè MC_Home V1.0
‚óè MC_Halt V1.0
‚óè MC_MoveAbsolute V1.0
‚óè MC_MoveRelative V1.0
‚óè MC_MoveVelocity V1.0
‚óè MC_MoveJog V1.0

Changing a technology version
Before you can access all the benefits of a new technology version, you need to change the
technology version for existing projects.

Changing a technology version
To change the technology version, follow these steps:
1. Replace the CPU in the project with a CPU with an appropriate higher version.
2. Open the program editor (e.g. by opening the OB1).
The technology objects and Motion Control instructions are highlighted in red after the CPU
is replaced.

1410

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
3. In the "Instructions" task card, select the appropriate higher technology version in the
"Technology > Motion Control" folder.
4. Save and compile the project.
The version of the technology objects and Motion Control instructions is changed to the
appropriate higher technology version during compilation of the project.
Pay attention to any error information that is displayed during compilation. Deal with the
causes of the errors indicated.
5. Check the configuration of the technology objects.

Resetting the "Mode" parameter of the Motion Control instruction "MC_Home"
When the technology version is changed from V1.0 to ‚â• V2.0, the "MC_Home.HomingMode"
parameter (V1.0) is renamed to "MC_Home.Mode" (‚â• V2.0). The assignment of the parameter
values is changed as well.
To reset the "MC_Home.Mode" parameter (V2.0), follow these steps:
1. To change the technology version, follow the instructions given above.
When compiling the project, the "MC_Home.HomingMode"parameter (V1.0) is renamed to
"MC_Home.Mode" (‚â• V2.0):
‚Äì The assignment of the parameter values is changed. A comparison of the
"MC_Home.Mode" parameter for technology versions V1.0 and ‚â• V2.0 is available in
section Version overview (P√°gina 1399).
You can find additional information about the "MC_Home.Mode" parameter in the
description of the Motion Control instruction "MC_Home".
‚Äì The value configured at the "MC_Home.HomingMode" parameter (V1.0) is lost. As a
note on renaming, the following text is entered as the parameter value in the
"MC_Home.Mode" parameter (‚â• V2.0).
"The interface has changed. You can find additional information in the description of the
Motion Control instruction "MC_Home".
‚Äì There is a message in the "Info > Compile" tab in the Inspector window stating that the
operand has the wrong data type.
2. Change the value of the "MC_Home.Mode" parameter (‚â• V2.0) in your user program
according to the new assignment.
3. Save and compile the project.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1411

Control de movimiento
6.1 Using S7-1500 Motion Control

Replacing devices
You can replace an S7-1500 for an S7-1500T of the same design and vice versa. The behavior
with respect to functions and the existing configuration is different depending on what is being
replaced.
‚óè S7-1500 ‚áí S7-1500T
The functions of the S7-1500 are expanded to include additional parameters for the
extended functions of the S7-1500T. The additional parameters are preassigned with
default values and must be configured appropriately.
‚óè S7-1500T ‚áí S7-1500
‚Äì Extended functions are only supported by an S7-1500T and are no longer available after
a replacement with S7-1500.
‚Äì Unsupported function blocks are marked.
‚Äì Unsupported technology objects are displayed in an error message after compilation
and must be deleted.

6.1.1.4

Configuring

Adding and configuring drives in the device configuration
Adding and configuring a drive is described in the following section with the example of a
SINAMICS S120 drive. If you use a SINAMICS V90 PN or a SINAMICS drive with Startdrive,
you can find additional information in the following documentation.

Using SINAMICS V90 PN
To add and configure a SINAMICS V90 PN drive in the TIA Portal, you need the Hardware
Support Package HSP 0185 (SINAMICS V90 PN). Information on configuring a SINAMICS
V90 PN drive with SIMATIC S7-1500 in the TIA Portal is available in the Getting Started
"SIMATIC/SINAMICS First Steps SINAMICS V90 PN on S7-1500 Motion Control":
https://support.industry.siemens.com/cs/document/109739497 (https://
support.industry.siemens.com/cs/ww/en/view/109739497)

Using Startdrive
If you use a SINAMICS drive with Startdrive, you can find additional information in the hardware
catalog in the "Drives & Starter" folder. For additional information on connecting via Startdrive,
refer to:
‚óè "Getting Started SINAMICS S120 in the Startdrive":
https://support.industry.siemens.com/cs/document/109747452 (https://
support.industry.siemens.com/cs/ww/en/view/109747452)
‚óè Application example "Configuring an S120 with Startdrive":
https://support.industry.siemens.com/cs/ww/en/view/109743270 (https://
support.industry.siemens.com/cs/ww/en/view/109743270)

1412

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Drives compatibility list
In the appendix (P√°gina 1543) you can find an overview of drives that can be interconnected
with an S7-1500 CPU.

Adding and configuring PROFINET IO drives
Adding and configuring a PROFINET IO drive is described below with the example of a
SINAMICS S120 drive. Adding and configuring other PROFINET IO drives may differ from the
description in certain respects.
When you use a S7-1500C CPU you can use the inputs/outputs of the CPU as interface to the
drive.

Requirements
‚óè The SIMATIC S7-1500 device is created in the project.
‚óè The desired drive can be selected in the hardware catalog.
If the drive is not available in the hardware catalog, you must install the drive in the "Options"
menu as a device description file (GSD).

Adding a drive and telegram in the device configuration
1. Open the device configuration and change to the network view.
2. In the hardware catalog, open the folder "Additional field devices > PROFINET IO > Drives
> Siemens AG > SINAMICS".
3. Select the desired drive with the desired version, then drag it to the network view.
4. Assign the drive to the PROFINET interface of the CPU.
5. Open the drive in the device view.
6. Drag a Drive Object (DO) and a telegram from the hardware catalog and drop it onto a slot
of the device overview of the drive.
7. Make sure that the order of the telegrams in the device configuration and in the drive
parameter assignment are identical.
Depending on the version of the SINAMICS S120 drive, select "DO with telegram X", or "DO
Servo" and a "Telegram X" for the telegram.
Information on suitable telegrams can be found in the chapter "PROFIdrive telegrams" of the
documentation "S7-1500/S7-1500T Axis functions (https://
support.industry.siemens.com/cs/ww/en/view/109766462)".
Repeat step 6, if you want to add another drive and another standard telegram.

Activating isochronous mode of the drive in the device configuration
PROFINET drives can always be operated in isochronous mode or clock synchronized mode.
Isochronous mode, however, increases the quality of the closed loop position control of the
drive and is therefore recommended for drives such as SINAMICS S120.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1413

Control de movimiento
6.1 Using S7-1500 Motion Control
To control the drive in isochronous mode, follow these steps:
1. Open the device view of the drive.
2. In the properties window, select the tab "PROFINET interface [X1] > Advanced options >
Isochronous mode".
3. Select the "Isochronous mode" check box in this tab.
The entry for the telegram also has to be selected for isochronous mode in the detailed view.

Interconnect the port of the CPU with the port of the drive
1. Open the topology view in the device configuration.
2. Interconnect the port of the drive as in the real configuration with the port of the CPU. At the
same time, note the rules for topology configuration.

Configure the CPU as the sync master and set isochronous mode
1. Select the device view of the CPU.
2. In the Properties window, select the tab "PROFINET interface [X1] > Advanced options >
Real-time settings > Synchronization".
3. Select "Sync master" from the "Synchronization role" drop-down list.
4. Click the "Domain settings" button.
5. Open the "Domain Management > Sync Domains" tab and set the desired "Send clock"
(isochronous clock).

Select drive in the configuration of the technology object
1. Add a new technology object axis, or open the configuration of an existing axis.
2. Open the configuration "Hardware interface > Drive".
3. Select from the "PROFIdrive" entry in the "Drive type" drop-down list.
4. Select the Drive Object of the PROFINET drive from the "Drive" list.
For information on how to add a technology object, refer to the section "Add technology object
(P√°gina 1420)".

Result
The technology object is connected to the drive and the "MC-Servo" organization block can be
checked / configured.
The telegram of the configured drive is assigned to the "PIP OB Servo" process image.

Checking/configuring the properties of the "MC-Servo"
1. Open the "Program blocks" folder in the project navigator.
2. Select the "MC-Servo" organization block.

1414

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
3. Select the "Properties" command in the shortcut menu.
4. Select the "Cycle time" entry in the area navigation.
5. The option "Synchronous to the bus" must be selected in the dialog box.
6. A "PROFINET IO system" must be selected in the "Source of the send clock" drop-down list.
7. The application cycle of "MC-Servo" must correspond to the send clock of the bus or be
reduced by an integral factor relative to the send clock of the bus.

Result
The PROFINET IO drive is configured in such a way that it can be controlled in isochronous
mode in the PROFINET IO network.
The properties of the SINAMICS drive must be configured according to the configuration of the
axis with the STARTER software or SINAMICS Startdrive.

Checking isochronous mode on the drive
If the configuration sequence described above is not adhered to during configuration of the
axis, and drive-specific errors occur when the project is compiled, the setting for isochronous
mode on the drive must be checked.
1. Open the device view of the drive.
2. Select standard telegram in the device overview.
3. Select the properties dialog "General > I/O Addresses".
4. The following settings apply for the input and output addresses:
‚Äì "Isochronous mode" is enabled.
‚Äì "MC-Servo" must be selected for the "Organization block".
‚Äì "PIP OB Servo" must be selected for the "Process image".

Consulte tambi√©n
Add technology object (P√°gina 1420)

Adding and configuring PROFIBUS DP drives
Adding and configuring a PROFIBUS drive is described below with the example of a SINAMICS
S120 drive. Adding and configuring other PROFIBUS drives may differ from the description in
certain respects.
When you use a S7-1500C CPU you can use the inputs/outputs of the CPU as interface to the
drive.

Requirements
‚óè The SIMATIC S7-1500 device is created in the project.
‚óè The desired drive can be selected in the hardware catalog.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1415

Control de movimiento
6.1 Using S7-1500 Motion Control
If the drive is not available in the hardware catalog, you must install the drive in the "Options"
menu as a device description file (GSD).

Adding a drive and telegram in the device configuration
1. Open the device configuration and change to the network view.
2. In the hardware catalog, open the folder "Additional Field Devices > PROFIBUS DP > Drives
> Siemens AG > SINAMICS".
3. Select the folder of the desired drive with the desired version, then drag the drive object to
the network view.
4. Assign the drive to the PROFIBUS interface of the CPU.
5. Open the drive in the device view.
6. Drag-and-drop a telegram from the hardware catalog onto a slot in the device overview of
the drive.
Information on suitable telegrams can be found in the chapter "PROFIdrive telegrams" of the
documentation "S7-1500/S7-1500T Axis functions (https://
support.industry.siemens.com/cs/ww/en/view/109766462)".
If you want to add another drive and another telegram to the device overview, use the "Axis
disconnector" in the hardware catalog.

Activating isochronous mode of the drive in the device configuration
PROFIBUS drives can be operated in cyclic mode or isochronous mode. Isochronous mode,
however, increases the quality of the position control of the drive.
If you want to control the drive in isochronous mode, follow these steps:
1. Open the device view of the drive.
2. In the properties dialog, select the tab "General > Isochronous Mode".
3. Select the "Synchronize DP slave to constant DP bus cycle time" check box .

Setting isochronous mode
1. Select the network view.
2. Select the DP master system.
3. In the properties dialog, select the tab "General > Constant bus cycle time".
4. Select the desired "Constant DP bus cycle times".

Select drive in the configuration of the technology object
1. Add a new technology object axis, or open the configuration of an existing axis.
2. Open the configuration "Hardware interface > Drive".
3. Select from the "PROFIdrive" entry in the "Drive type" drop-down list.
4. Select the telegram of the PROFIBUS drive from the "Drive" list.

1416

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
For information on how to add a technology object, refer to the section "Add technology object
(P√°gina 1420)".

Result
The technology object is connected to the drive and the "MC-Servo" organization block can be
checked/configured.
The telegram of the configured drive is assigned to the "PIP OB Servo" process image.

Checking/configuring the properties of the "MC-Servo"
1. Open the "Program blocks" folder in the project navigator.
2. Select the "MC-Servo" organization block.
3. Select the "Properties" command in the shortcut menu.
The "MC-Servo" dialog opens.
4. Select the "Synchronous to the bus" option under "General > Cycle time".
5. In the "Distributed I/O" drop-down list, select a "PROFIBUS DP-System".
The application cycle of "MC-Servo" must correspond to the send clock of the bus or be
reduced by an integral factor relative to the send clock of the bus.
You can select a drive connected to the CPU via a communications processor/communications
module (CP/CM) in the configuration of the technology object. You cannot select the DP master
system of the CP/CM as the source clock for MC-Servo [OB91].

Result
The PROFIBUS DP drive is configured in such a way that it can be controlled in isochronous
mode in the PROFIBUS network.
The properties of the SINAMICS drive must be configured according to the configuration of the
axis with the STARTER software or SINAMICS Startdrive.

Checking isochronous mode on the drive
If the configuration sequence described above is not adhered to during configuration of the
axis, and drive-specific error occurs when the project is compiled, isochronous mode can be
checked on the drive.
1. Open the device view of the drive.
2. Select the entry of the telegram in the device overview.
3. Select the properties dialog "General > I/O Addresses".
4. The following settings apply for the input and output addresses:
‚Äì "MC-Servo" must be selected for the "Organization block".
‚Äì "PIP OB Servo" must be select the "Process image".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1417

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte tambi√©n
Add technology object (P√°gina 1420)

Adding and configuring drives with analog connections
A description is provided below of how to add and configure a drive with an analog drive
connection and an encoder. The connection is made, for example, as a positioning axis with an
incremental encoder and using a technology module in the rack of the CPU.
When you use a S7-1500C CPU you can use the inputs/outputs of the CPU as interface to the
drive.

Requirements
The SIMATIC S7-1500 device is created in the project.

Adding and configuring an analog output module in the device configuration
1. Open the device configuration of the CPU.
2. Select an analog output module from the hardware catalog and drag the module to the rack
of the CPU.
3. Select the analog output module in the device view.
4. Open the "General" tab in the properties dialog and select there "Name of the Analog Output
Module > I/O Addresses".
5. Enter the desired start address.
6. In the properties dialog, select the tab "General > IO Tags".
7. Enter the tag name for the desired analog output.

Adding and configuring a technology module
1. Switch to the device view of the CPU.
2. In the hardware catalog, open the folder "Technology module > Count > TM Count 2X24V".
3. Drag the counter module to a free slot in the rack.
‚Äì Technology version ‚â§ V4.0: When in use in the rack of the CPU, the technology module
cannot be operated in isochronous mode.
‚Äì Technology version ‚â• V5.0: The clock synchronization is supported by the central
operation of the technological modules via the active backplane bus.
4. Select the technology module in the device view.
5. In the properties dialog, open the "General" tab and select "TM Count 2x24V > Channel x
> Operating mode" of the channel to be used.

1418

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
6. Select "Position input for Motion Control" option for "Selection of the operating mode for the
channel".
7. Under "Module parameters", adapt the parameters of the incremental encoder (steps per
revolution = increments per revolution).

Selecting the drive and encoder in the configuration of the technology object
1. Add a new positioning axis/synchronous axis technology object, or open the configuration
of an existing positioning axis/synchronous axis.
2. Open the configuration "Hardware interface > Drive".
3. Select "Analog drive connection" from the "Drive type" drop-down list.
4. Select the previously defined tag name of the analog output from the "Analog output" list.
5. Open the configuration "Hardware interface > Encoder".
6. Select the "Encoder" entry from the "Data connection" drop-down list.
7. Select the channel of the incremental encoder from the "encoder" list under "Local modules".
8. Open the configuration "Hardware interface > Data exchange with encoder > Fine
resolution" and enter the value "0" for "Bits in Gx_XIST1".
For information on how to add a technology object, refer to the section "Add technology object
(P√°gina 1420)".

Result
The analog drive connection and the encoder connection are configured.
The analog addresses and the addresses of the TM module are assigned to the process image
"PIP OB Servo".

Checking the encoder connection/drive connection
The encoder data are applied to the position control cycle clock. If in doubt, check the following
settings:
1. Switch to the device view of the CPU.
2. Select the module technology.
3. Open the properties dialog "Basic Parameters > I/O Addresses".
4. The following settings apply for the input and output addresses:
‚Äì "MC-Servo" must be selected for the "Organization block".
‚Äì "PIP OB Servo" must be select the "Process image".
5. Select the analog module.
6. Open the properties dialog "Name of the Analog Module > I/O Addresses".
7. The settings from Step 4 apply for the input and output addresses

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1419

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte tambi√©n
Add technology object (P√°gina 1420)

Configuration basics
Add technology object
The following describes how to add a technology object in the project tree.

Requirement
‚óè A project with a CPU S7-1500 has been created.
‚óè For the output cam, cam track, measuring input technology objects:
A speed axis, positioning axis, synchronous axis or external encoder technology object is
created in the project.

Procedure
To add a technology object, follow these steps:
1. Open the CPU's folder in the project navigator.
2. Open the "Technology Objects" folder.
3. Double-click "Add new object".
The "Add new object" dialog opens.
4. Select the required technology object. You can infer the function of the technology object
from the displayed description.
5. If you add output cams, cam tracks, measuring inputs to a technology object, select the
higher-level technology object in the "Axis or external encoder that is to be assigned".
6. In the "Name" input field, adapt the name to your requirements.
7. To change the suggested data block number, select the "Manual" option.
8. To add your own information about the technology object, click "Additional information".
9. To open the configuration after adding the technology object, select the "Add new and open"
check box.
10.To add the technology object, click "OK".

Result
The new technology object was created and created in the "Technology objects" folder in the
project tree.
If the "MC-Servo" and "MC-Interpolator" organizational units were not yet available, they were
added.

1420

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Copy technology object
You can copy a technology object in the following ways:
‚óè Copying a technology object within a CPU
‚óè Copying a technology object from a CPU S7‚Äë1500 to a CPU S7-1500T
Additional parameters for the extended functions are preset with default values. You must
configure them appropriately.
‚óè Copying a technology object from a CPU S7-1500T to a CPU S7‚Äë1500
Additional parameters, which are not supported by the CPU S7‚Äë1500, are reset to the
default values.
When you copy a technology object that has lower-level technology objects such as output
cams, cam tracks or measuring inputs, the lower-level technology object are also copied.
The following describes how to copy a technology object within a CPU. The procedure also
applies accordingly to the other copying methods mentioned.

Requirement
‚óè A project with a CPU S7‚Äë1500 has been created.
‚óè You have created an technology object in the project.

Procedure
To copy a technology object, follow these steps:
1. Open the CPU's folder in the project navigator.
2. Open the "Technology Objects" folder.
3. If necessary, open the higher-level technology object.
4. Select the technology object to be copied.
5. Select "Copy" in the shortcut menu.
6. Select the "Technology objects" folder or the higher-level technology object.
7. Select "Paste" in the shortcut menu.

Result
The selected technology object, including lower-level technology objects, has been copied and
created in the "Technology objects" folder of the project tree.

Delete technology object
You can delete technology objects in the project tree.
When you delete a technology object that has lower-level technology objects such as output
cams, cam tracks or measuring inputs, the lower-level technology object are also deleted.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1421

Control de movimiento
6.1 Using S7-1500 Motion Control

Requirement
‚óè A project with a CPU S7-1500 has been created.
‚óè You have created an technology object in the project.

Procedure
To delete a technology object, follow these steps:
1. Open the CPU's folder in the project navigator.
2. Open the "Technology objects" folder.
3. If necessary, open the higher-level technology object.
4. Select the technology object to be deleted.
5. Select the "Delete" command in the shortcut menu.
The "Confirm delete" dialog is opened.
6. To delete the technology object, click "Yes".

Result
The selected technology object has been deleted.

Consulte tambi√©n
Compare values (P√°gina 1423)

Working with the configuration editor
You configure the properties of a technology object in the configuration window. To open the
configuration window of the technology object in the project view, follow these steps:
1. Open the device "Technology objects" group in the project navigator.
2. Select the technology object and double-click on "Configuration".
The configuration is divided into categories which depend on the object type, for example, basic
parameters, hardware interface, extended parameters.

1422

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Configuration editor icons
Icons in the area navigation of the configuration show additional details about the status of the
configuration:
Symbol

Description
The configuration contains default values and is complete.
The configuration contains only default values. With these default values you can use the
technology object without additional changes.
The configuration contains user-defined or automatically adapted values and is complete.
All input fields of the configuration contain valid values and at least one preset value has been
changed.
The configuration is incomplete or incorrect.
At least one input field or drop-down list contains an invalid value. The corresponding field or
the drop-down list is displayed on a red background. Click the field shows you the roll-out
error message that indicates the cause of error.

Compare values
If an online connection to the CPU is available, the "Monitor all" function
configuration of the technology object.

appears in the

The "Monitor all" function provides the following options:
‚óè Comparison of configured start values of the project with the start values in the CPU and the
actual values
‚óè Direct editing of actual values and the start values of the project
‚óè Immediate detection and display of input errors with suggested corrections
‚óè Backup of actual values in the project
‚óè Transfer of start values of the project to the CPU as actual values
Nota
Differences between online and offline values
By adding or deleting technology objects that have a connection to other technology objects,
such as cams, cam tracks, measuring inputs or synchronized axes, differences can occur when
online and offline values are compared. These differences can be eliminated by re-compiling
the project and then uploading it to the CPU.

Icons and operator controls
If there is an online connection to the CPU, the actual values are displayed at the parameters.
In addition to the actual values of the parameters, the following symbols appear:
Symbol

Description
Start value in CPU matches the configured start value in project
Start value in CPU does not match the configured start value in project

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1423

Control de movimiento
6.1 Using S7-1500 Motion Control
Symbol

Description
Software error in lower-level component: The online and offline versions differ in at least
one lower-level software component.
The comparison of the Start value in CPU with the configured start value in project cannot
be performed.
Comparison of the online and offline values is not advisable.
Use this button to show the start value of the CPU and the start value of the project for the
respective parameter.

You can change the start value of the CPU directly and then download it to the CPU. For directly
editable parameters, the actual value can also be changed and the change will be transferred
directly to the CPU.

Configuring technological modules and onboard I/O for Motion Control
Use with Motion Control
You can use technology functions of technology modules and the onboard I/Os of the CPUs
listed below with Motion Control technology objects. To use the technology functions for Motion
Control, specific parameters of the I/O configuration and parameters of the configuration of the
technology object must be configured accordingly. Which parameters are relevant for the
function is described below. You can set additional parameters that are not listed here. The
description of the parameters is found in the documentation of the respective technology
module or the respective CPU.
The following technology modules support Motion Control functionalities:
S7-1500/ET 200MP
TM Count 2x24V (P√°gina 1425)

ET 200 SP
1)

TM Count 1x24V (P√°gina 1425)

Possible applications
1)

‚óè Position detection for homing with zero mark
via PROFIdrive telegram

TM PosInput 2 (P√°gina 1427) 1)

TM PosInput 1 (P√°gina 1427) 1)

‚óè Position detection for homing with zero mark
via PROFIdrive telegram

TM Timer DIDQ 16x24V (P√°gi‚Äê
na 1429) 2)

TM Timer DIDQ 10x24V (P√°gi‚Äê
na 1429) 2)

‚óè Output of output cam and cam track for timecontrolled switching 2)
‚óè Time-based position detection via measuring
input (time stamp recording) 2)

‚Äì

TM Pulse 2x24V (P√°gina 1430) 1)

‚óè Drive connection using PWM (pulse width
modulation)

TM PTO 4 (P√°gina 1432) 3)

‚Äì

‚óè Drive connection via PTO (Pulse Train
Output)
‚óè Position detection with measuring input via
PROFIdrive telegram 2)

1)

Automatic data exchange for encoder values is supported

2)

Isochronous mode required

3)

Automatic data exchange for drive and encoder values is supported

1424

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The following CPUs support Motion Control functionalities through their onboard I/O:
CPU

Possible applications

CPU 1511C-1 PN/CPU 1512C-1
PN (P√°gina 1434) 1)

‚óè Drive connection via PTO (Pulse Train Output)
‚óè Drive connection using PWM (pulse width modulation)
‚óè Encoder connection via HSC (High-speed counter)
‚óè Position detection with measuring input via PROFIdrive telegram 2)

SIMATIC Drive Controller (P√°gi‚Äê
na 1439)

‚óè Output of output cam and cam track for time-controlled switching 2)
‚óè Time-based position detection via measuring input (time stamp recording) 2)

1)

Automatic data exchange for drive and encoder values is supported

2)

Isochronous mode required

Isochronous mode
Isochronous mode is required for use with a measuring input, output cam or cam track.
Technology modules can be used centrally or distributed in the system. Clock synchronization
is supported in distributed operation with suitable PROFINET interface modules and in the
centralized operation with the active backplane bus.
The onboard technology I/Os (X142) of the SIMATIC Drive Controller support clock
synchronization.
Automatic data exchange for drive and/or encoder values
By selecting the check box for automatic data exchange, the drive and encoder parameters are
automatically applied in the CPU.
Alternatively, you can manually match, by drive and encoder type, the parameters described
and identified in the following table.
The following types are available for automatic data exchange:
‚óè Offline
Select the check box if you want to transfer the offline values of the drive or encoder to the
configuration of the technology object in the project.
‚óè Online
Select the check box if you want to transfer the effective values online in the drive or encoder
to the CPU during runtime. The drive and encoder parameters are transferred from the bus
after the (re)initialization of the technology object and (re)start of the drive, encoder or the
CPU.

TM Count 1x24V/TM Count 2x24V
For use with Motion Control, the following parameters must be configured:
Configuration
Technology module

Technology object

TM Count 1x24V/TM Count 2x24V
TM Count 1x24V/TM Count 2x24V > Channel 0/1 > Operating
mode

Axis and

external encoder

‚Äì

Select "Position detection for Motion Control technology ob‚Äê
ject" mode

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1425

Control de movimiento
6.1 Using S7-1500 Motion Control
Configuration
Technology module

Technology object
Axis and

TM Count 1x24V/TM Count 2x24V

external encoder

TM Count 1x24V/TM Count 2x24V > Channel 0/1 > Module
parameters

Hardware interface > Encoder

‚Äì

Select "Encoder" data connection and the channel configured
for Motion Control on the technology module as encoder

Signal type

Select encoder type corresponding to configuration for tech‚Äê
nology module

‚óè Incremental encoder
‚Äì

‚óè Incremental 1)
encoder

Axis: Hardware interface > Data exchange with

External encoder: Hardware interface > Data exchange
Telegram "DP_TEL83_STANDARD" is automatically selec‚Äê
ted after the selection of the encoder.
Clear the check box "Automatic data exchange for encoder
values (online)"
Select the check box "Automatic data exchange for encoder
values (offline)"
If the check box is cleared, you can manually match the pa‚Äê
rameters described and identified in this table.
Select rotary or linear measuring system type 1)
Signal evaluation
‚óè Single
‚óè Double

Select fine resolution corresponding to configuration on the
technology module 1)
‚óè 0 = Single

‚óè Quadruple

‚óè 1 = Double

‚óè Rotary type:
Enter increments per revolution

‚óè Rotary type:
Enter increments per revolution corresponding to
configuration at technology module (1:1) 1)

‚óè Linear type:
Configuration not relevant
‚Äì
‚óè Rotary type:
Enter reference speed corresponding to configuration for
technology object (1:1)

‚óè 2 = Quadruple

‚óè Linear type:
Enter distance between increments 1)
drive

Axis: Hardware interface > Data exchange with the

Enter reference speed

‚óè Linear type:
Configuration not relevant
‚Äì

1426

Homing

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Configuration
Technology module

Technology object
Axis and

TM Count 1x24V/TM Count 2x24V

external encoder

Use the homing mode "Use zero mark via PROFIdrive tele‚Äê
gram".

Select the homing signal for homing mark 0:
‚óè Signal N of the incremental encoder

TM Count 1x24V as of V2.0

‚óè DI0

The states of the digital inputs are displayed in the operating
mode "Position detection for Motion Control technology ob‚Äê
ject" in the process image. The following bits are used for this
purpose:
‚óè STS_DI0 (Status of DI0): ZSW2_ENC.Reserved_Bit11
‚óè STS_DI1 (Status of DI1): ZSW2_ENC.Reserved_Bit10
‚óè STS_DI2 (Status of DI2): ZSW2_ENC.Reserved_Bit8
To select one of the digital inputs use, for example, a PLC tag
of the data type "PD_TEL83_IN" with the input start address
of the desired channel of the module. The status word
"ZSW2_ENC" and the named bits can be found within the
created tag structure.

TM Count 2x24V > I/O addresses

‚Äì

The organization block ("MC-Servo") and the process image
("TPA OB Servo") are selected automatically for the input and
output addresses by selecting the channel in the encoder
configuration at the technology object.
Process image: PIP OB servo
1)

Parameters are automatically applied when "Automatic data exchange for encoder values (offline)" is selected

"‚Äì" No configuration for technology module/technology object is required for these parameters

TM PosInput 1/TM PosInput 2
For use with Motion Control, the following parameters must be configured:
Configuration
Technology module

Technology object

TM PosInput 1 / TM PosInput 2
TM PosInput 1/2 > Channel 0/1 > Operating mode

Axis and

external encoder

‚Äì

Select "Position detection for Motion Control technology ob‚Äê
ject" mode
TM PosInput 1/2 > Channel 0/1 > Module parameters

Hardware interface > Encoder

You set the parameters for the encoder signals of the channel
under "Module parameters" in the "Position input for Motion
Control" mode. The parameters must be set depending on the
encoder used.
The configuration of the encoder is required for use with an
SSI absolute encoder. Information on the configuration is
available in the documentation for the respective technology
module.
‚Äì

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Select "Encoder" data connection and the channel activated
and configured as encoder on the technology module

1427

Control de movimiento
6.1 Using S7-1500 Motion Control
Configuration
Technology module

Technology object
Axis and

TM PosInput 1 / TM PosInput 2
Signal type
‚óè Incremental encoder
‚óè Absolute encoder
‚Äì

external encoder

Select encoder type corresponding to configuration for tech‚Äê
nology module:
‚óè Incremental 1)
‚óè Absolute/Cyclic absolute
encoder

Axis: Hardware interface > Data exchange with

External encoder: Hardware interface > Data exchange
Telegram "DP_TEL83_STANDARD" is automatically selec‚Äê
ted after the selection of the encoder.
Clear the check box "Automatic data exchange for encoder
values (online)"
Select the check box "Automatic data exchange for encoder
values (offline)"
If the check box is cleared, you can manually match the pa‚Äê
rameters described and identified in this table.
Select rotary or linear measuring system type 1)
Signal evaluation
‚óè Single
‚óè Double
‚óè Quadruple

Select fine resolution corresponding to configuration on the
technology module 1)
‚óè Incremental encoder:
‚Äì

0 = Single

‚Äì

1 = Double

‚Äì

2 = Quadruple

‚óè Absolute encoder:
‚Äì
‚óè Rotary type:
Enter increments per revolution
‚óè Linear type:
Configuration not relevant
‚Äì
‚óè Rotary type:
Enter reference speed corresponding to configuration for
technology object (1:1)

0 = Single

‚óè Rotary type:
Enter increments per revolution corresponding to
configuration at technology module (1:1) 1)
‚óè Linear type:
Enter distance between increments 1)
drive

Axis: Hardware interface > Data exchange with the

Enter reference speed

‚óè Linear type:
Configuration not relevant
‚Äì

Homing

Select the homing signal for homing mark 0:

Use the homing mode "Use zero mark via PROFIdrive tele‚Äê
gram".

‚óè Signal N of the incremental encoder
‚óè DI0

1428

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Configuration
Technology module

Technology object
Axis and

TM PosInput 1 / TM PosInput 2
TM PosInput 1/2 > I/O addresses

external encoder

‚Äì

The organization block ("MC-Servo") and the process image
("TPA OB Servo") are selected automatically for the input and
output addresses by selecting the channel in the encoder
configuration at the technology object.
1)

Parameters are automatically applied when "Automatic data exchange for encoder values (offline)" is selected

"‚Äì" No configuration for technology module/technology object is required for these parameters

Additional configuration for use with the technology object measuring input
Configuration
Technology module
TM PosInput 1 / TM PosInput 2

Technology object
Measuring input

TM PosInput 1/2 > Channel 0/1 > Operating mode

Hardware interface > Measuring input

Select operating mode "Position detection for Motion Control
technology object"

Measuring using PROFIdrive telegram (drive or external en‚Äê
coder)

In the "Number of the measuring input" selection box, select
You set the parameters for the encoder signals of the channel "1" (measuring input 1).
under "Module parameters" in the operating mode "Position
input for Motion Control". The parameters must be set depen‚Äê
ding on the encoder used.
TM PosInput 1/2 > Channel 0/1 > Module parameters

The configuration of the encoder is required for use with an
SSI absolute encoder. Please note the following information
in this regard. Information on the configuration is available in
the documentation for the respective technology module.

Nota
When a single-turn absolute encoder is used and two edges are to be measured
("MC_MeasuringInput.Mode" = 2, 3 or 4), the distance between the measured edges of the
Measurement input must be < 1 encoder revolution. Otherwise, use a multi-turn absolute
encoder.

TM Timer DIDQ 10x24V/TM Timer DIDQ 16x24V
You can operate the TM Timer DIDQ technology module centrally on an S7-1500 CPU or
decentrally on a distributed I/O. For use with a measuring input, output cam or cam track, the
technology module must be used decentrally and with isochronous mode.
For use with Motion Control, the following parameters must be configured:

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1429

Control de movimiento
6.1 Using S7-1500 Motion Control
Use with output cam/cam track technology object
Configuration
Technology module

Technology object

TM Timer DIDQ 10x24V/TM Timer DIDQ 16x24V
Basic parameters

Output cam /

Cam track

‚Äì

Select desired number of outputs under channel configura‚Äê
tion (ET 200MP TM Timer DIDQ 16x24V only)
Channel parameters

Hardware interface > Output cam output/output cam track

‚Äì

Activate output
Output via Timer DQ

Select "Timer DQ" mode for the respective output

Select output cam output

I/O addresses

‚Äì

Select "Isochronous mode"
The organization block ("MC-Servo") and the process image
("TPA OB Servo") are updated automatically for the input and
output addresses by selecting the channel in the encoder
configuration at the technology object.
"‚Äì" No configuration for technology module/technology object is required for these parameters

Use with technology object measuring input
Configuration
Technology module

Technology object

TM Timer DIDQ 10x24V/TM Timer DIDQ 16x24V
Basic parameters

Measuring input
‚Äì

Select desired number of inputs under channel configuration
Channel parameters

Hardware interface > Measuring input

Configuration of DI group: Use inputs individually

‚Äì

Select "Timer DI" mode for the respective input

Select measuring via timer DI

‚Äì

Select measuring input

Select application-dependent input delay

‚Äì

I/O addresses
Select "Isochronous mode"
The organization block ("MC-Servo") and the process image
("TPA OB Servo") are updated automatically for the input and
output addresses by selecting the channel in the input confi‚Äê
guration at the technology object.
"‚Äì" No configuration for technology module/technology object is required for these parameters

TM Pulse 2x24V
For use with Motion Control, the parameters described below must each be configured:

1430

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Drive connection using PWM (pulse width modulation)
Configuration
TM Pulse 2x24V

Technology object
Axis

TM Pulse 2x24V > Channel configuration

‚Äì

Select if you want to use 1 or 2 channels.
TM Pulse 2x24V > Channel > Operating mode
Select "Pulse width modulation PWM" or "PWM with DC mo‚Äê
tor" operating mode
TM Pulse 2x24V > Channel > Parameters

Hardware interface > Drive

Select "S7 analog output" output format

Select analog drive connection
For the selection of the analog output, create a PLC tag of the
"Int" type with corresponding address. The offset for the PLC
tag to the start address is 2.
To activate the output of the PWM signal, set the following two
bits of the control interface of the PWM channel in the user
program:
‚óè SW_ENABLE (= Bit 0 in Byte 9)
‚óè TM_CTRL_DQ (= Bit 1 in Byte 9)
The offset for byte 9 to the start address of the PWM channel
is 9.

TM Pulse 2x24V > Channel > I/O addresses

‚Äì

Select the organization block "MC-Servo" for the input and
output addresses. The "TPA OB Servo" process image is se‚Äê
lected automatically for the input and output addresses by
selecting the organization block.
"‚Äì" No configuration for technology object is required for these parameters

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1431

Control de movimiento
6.1 Using S7-1500 Motion Control

TM PTO 4
For use with Motion Control, the following parameters must be configured.
Configuration
Technology module

Technology object

TM PTO 4
TM PTO 4 > Channel configuration

Axis
‚Äì

Configure the number of channels (1 to 4) you want to use.
TM PTO 4 > Channel 0‚Ä¶3 > Operating mode
Select signal type:
‚óè PTO (pulse (P) and direction (D))
‚óè PTO (count up (A) and count down (B))
‚óè PTO (A, B phase-shifted)
‚óè PTO (A, B phase-shifted - quadruple)
Select signal interface:
‚óè RS422, symmetrical/TTL (5V), asymmetrical
‚óè 24V asymmetric
Configure the interpulse pause for direction reversal.
‚Äì

Hardware interface > Drive
Select drive type "PROFIdrive" and "Drive" data connection.
Select the pulse output configured at the technology module
as drive.
Hardware interface > Encoder
The encoder of the actuator telegram (simulated encoder) is
automatically selected. Alternatively, an existing encoder in‚Äê
terface can be selected.

TM PTO 4 > Channel 0...3 > Diagnostic interrupts

-

When the "Enable diagnostic interrupts" check box is selec‚Äê
ted, diagnostic interrupts are activated if:
‚óè No supply voltage
‚óè Errors occur at digital outputs
The detected error is displayed for the respective channel
with feedback bit "Fault_Present" and "Sensor_Error".
TM PTO 4 > Channel 0‚Ä¶3 > Axis parameters

Data exchange with the drive

‚Äì

Telegram "DP_TEL3_STANDARD" is automatically selected
after the selection of the drive.
Clear check box "Automatic data exchange for drive values
(online)"
Select check box "Automatic data exchange for drive values
(offline)"
If the check box is cleared, you can manually match the pa‚Äê
rameters described and identified in this table.

Enter reference speed corresponding to configuration for
technology object (1:1)

1432

Enter reference speed of the drive 1)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Configuration
Technology module

Technology object

TM PTO 4

Axis

Enter maximum speed corresponding to configuration for
technology object (1:1)

Enter maximum speed of the drive 1)

‚Äì

Data exchange with encoder

If the maximum speed is exceeded, technology alarm 102 is
triggered and displayed.
Telegram "DP_TEL3_STANDARD" is automatically selected
after the selection of the encoder.
Clear the check box "Automatic data exchange for encoder
values (online)"
Select the check box "Automatic data exchange for encoder
values (offline)"
If the check box is cleared, you can manually match the pa‚Äê
rameters described and identified in this table.
Select rotary measuring system type 2)

Enter increments per revolution

Enter increments per revolution corresponding to configura‚Äê
tion at technology module (1:1) 2)

Configure fine resolution

Select fine resolution corresponding to configuration on the
technology module 2)

‚óè 0 = Single
‚óè 2 = Quadruple
Configure stop behavior

‚óè 0 = Single
‚óè 2 = Quadruple
‚Äì

‚óè Quick stop time
‚óè Ramp stop time
TM PTO 4 > Channel 0‚Ä¶3 > Hardware inputs/outputs

‚Äì

If you want to use a hardware output to enable the drive, se‚Äê No setting required at the technology object. The output is
lect the "Use drive enable" check box. Next select one of the automatically controlled by the "MC_Power".
two hardware outputs DQ0 or DIQ2.
Homing
Activate the hardware input (DI0) for the reference cam.
Select the edge of the hardware input for triggering the refe‚Äê
rence cam function.
When using a measuring input, select the "Use DI1 check box
as measuring input".

Use the homing mode "Use zero mark via PROFIdrive tele‚Äê
gram".
"Measuring input > Configuration > Hardware interface" tech‚Äê
nology object
Select the measuring input type "Measuring via PROFIdrive
telegram (drive or external encoder)".
Select the measuring input "1" under hardware connection.

Select the "Use "drive ready"" check box. In the ""Drive ready" No setting required at the technology object. When the input
input", select the hardware input that is to be used to display is used, "MC_Power" waits until the input signal is present
whether the drive is ready.
before it sets the drive enable.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1433

Control de movimiento
6.1 Using S7-1500 Motion Control
Configuration
Technology module

Technology object

TM PTO 4

Axis

Configuring input delay

‚Äì

TM PTO 4 > Channel 0‚Ä¶3 > Sign-of-life error
Configure tolerated number of sign-of-life errors
TM PTO 4 > I/O addresses
The organization block ("MC-Servo") and the process image
("TPA OB Servo") are selected automatically for the input and
output addresses by selecting the PTO channel for the tech‚Äê
nology object.
1)

Parameters are automatically applied when "Automatic data exchange for drive values (offline)" is selected

2)

Parameters are automatically applied when "Automatic data exchange for encoder values (offline)" is selected

"‚Äì" No configuration required for these parameters at the technology module/technology object

CPU 1511C-1 PN/CPU 1512C-1 PN (onboard I/O devices)
For use with Motion Control, the parameters described below must be configured.

Drive connection via PTO (Pulse Train Output)
Configuration
CPU 1511C-1 PN/CPU 1512C-1 PN

Technology object
Axis

Pulse generators (PTO/PWM) > PTO1‚Ä¶4/PWM1‚Ä¶4 > Ge‚Äê
neral

‚Äì

To activate a channel for PTO mode, select one of the follo‚Äê
wing operating modes:
‚óè PTO (pulse (A) and direction (B))
‚óè PTO (count up (A), count down (B))
‚óè PTO (A,B phase shifted)
‚óè PTO (A,B phase shifted, quadruple)
‚Äì

Hardware interface > Drive
Select drive type "PROFIdrive" and "Drive" data connection.
Select the pulse generator of the CPU configured for PTO
mode as drive.
Hardware interface > Encoder
The encoder of the actuator telegram (simulated encoder) is
automatically selected. Alternatively, an existing encoder in‚Äê
terface can be selected.

Pulse generators (PTO/PWM) > PTO1‚Ä¶4/PWM1‚Ä¶4 > Axis
parameters

Hardware interface > Data exchange with the drive

‚Äì

Telegram "DP_TEL3_STANDARD" is automatically selected
after the selection of the drive.
Clear check box "Automatic data exchange for drive values
(online)"

1434

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Configuration
CPU 1511C-1 PN/CPU 1512C-1 PN

Technology object
Axis
Select check box "Automatic data exchange for drive values
(offline)"
If the check box is cleared, you can manually match the pa‚Äê
rameters described and identified in this table.

Enter reference speed corresponding to configuration for
technology object (1:1)

Enter reference speed of the drive 1)

Enter reference speed corresponding to configuration for
technology object (1:1)

Enter maximum speed of the drive 1)

‚Äì

If the maximum speed is exceeded, technology alarm 102 is
triggered and displayed.
Hardware interface > Data exchange with encoder
Telegram "DP_TEL3_STANDARD" is automatically selected
after the selection of the encoder.
Clear the check box "Automatic data exchange for encoder
values (online)"
Select the check box "Automatic data exchange for encoder
values (offline)"
If the check box is cleared, you can manually match the pa‚Äê
rameters described and identified in this table.
Select rotary measuring system type 2)

Enter increments per revolution

Enter increments per revolution corresponding to configura‚Äê
tion for CPU (1:1) 2)

The fine resolution has the fixed value "0 bit" (= single) and
cannot be changed.

Enter the fine resolution corresponding to the configuration on
the CPU 2)
Bits in incr. actual value (G1_XIST1): 0 (= single)

Pulse generators (PTO/PWM) > PTO1‚Ä¶4/PWM1‚Ä¶4 > Hard‚Äê Homing
ware inputs/outputs
Use the homing mode "Use zero mark via PROFIdrive tele‚Äê
In addition, configure the input delay for the selected hardwa‚Äê gram" for drive connection via PTO.
re input. You configure the input delay in the device configu‚Äê
ration at the corresponding DI channel (DI 16/DQ 16 > In‚Äê
puts > Channel > Input parameters > Input delay).
Select the hardware input for the reference switch

Select the edge of the hardware input for triggering the refe‚Äê
rence output cam function.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1435

Control de movimiento
6.1 Using S7-1500 Motion Control
Configuration
CPU 1511C-1 PN/CPU 1512C-1 PN

Technology object
Axis

When using a measuring input, select the hardware input of
the measuring input. The following table includes the confi‚Äê
guration description.

‚Äì

Select the hardware input that is used to display whether the
drive is ready.
In addition, configure the input delay for the selected hardwa‚Äê
re input. You configure the input delay in the device configu‚Äê
ration at the corresponding DI channel (DI 16/DQ 16 > In‚Äê
puts > Channel > Input parameters > Input delay).
With selected "PTO (pulse (A) and direction (B))" mode, the
hardware output for the PTO signal A ("Pulse output (A)") is
automatically selected through the device configuration and
cannot be changed. For PTO signal B ("Direction output (B)")
select one of the hardware outputs offered in the selection
box.
The hardware outputs for the PTO signals are selected
through the device configuration for the following operating
modes and cannot be changed:
‚óè PTO (count up (A), count down (B))
‚óè PTO (A,B phase shifted)
‚óè PTO (A,B phase shifted, quadruple)
Pulse generators (PTO/PWM) > PTO1‚Ä¶4/PWM1‚Ä¶4 > I/O
addresses
The organization block ("MC-Servo") and the process image
("TPA OB Servo") are selected automatically for the input and
output addresses by selecting the PTO channel for the tech‚Äê
nology object.
1)

Parameters are automatically applied when "Automatic data exchange for drive values (offline)" is selected

2)

Parameters are automatically applied when "Automatic data exchange for encoder values (offline)" is selected

"‚Äì" No configuration for CPU/technology object is required for these parameters

Additional configuration for use with the technology object measuring input
Configuration
Technology module
CPU 1511C-1 PN/CPU 1512C-1 PN

Technology object
Measuring input

Pulse generators (PTO/PWM) > PTO1‚Ä¶4/PWM1‚Ä¶4 > Hard‚Äê Hardware interface > Measuring input
ware inputs/outputs
Measuring using PROFIdrive telegram (drive or external en‚Äê
In addition, configure the input delay for the selected hardwa‚Äê coder)
re input. You configure the input delay in the device configu‚Äê In the "Number of the measuring input" selection box, select
ration at the corresponding DI channel (DI 16/DQ 16 > In‚Äê
"1" (measuring input 1).
puts > Channel > Input parameters > Input delay).
Select the hardware input of the measuring input.

1436

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Drive connection using PWM (pulse width modulation)
Note that only travel in the positive direction is possible with a drive connection using the
integrated PWM function of the compact CPU.
Configuration
CPU 1511C-1 PN/CPU 1512C-1 PN

Technology object
Speed axis

Pulse generators (PTO/PWM) > PTO1‚Ä¶4/PWM1‚Ä¶4 > Ge‚Äê
neral

‚Äì

Select "Pulse width modulation PWM" mode
Pulse generators (PTO/PWM) > PTO1‚Ä¶4/PWM1‚Ä¶4 > Hard‚Äê
ware inputs/outputs
Select the hardware output to be used for pulse output.
Select whether the set hardware output is to work as a fast
push-pull switch or as P switch.
Pulse generators (PTO/PWM) > PTO1‚Ä¶4/PWM1‚Ä¶4 > Pa‚Äê
rameters

Hardware interface > Drive

Select "S7 analog output" output format

Select analog drive connection
For the selection of the analog output, create a PLC tag of the
"Int" type with corresponding address. The offset for the PLC
tag of the control interface of the PWM channel is 2.
To activate the output of the PWM signal, set the following two
bits of the control interface of the PWM channel in the user
program:
‚óè SW_ENABLE (= Bit 0 in Byte 9)
‚óè TM_CTRL_DQ (= Bit 1 in Byte 9)
The offset for byte 9 to the start address of the PWM channel
is 9.

Select minimum pulse width of 0 Œºs

‚Äì

Select required period duration (e.g. 100 Œºs)
Pulse generators (PTO/PWM) > PTO1‚Ä¶4/PWM1‚Ä¶4 > I/O
addresses
Select the organization block "MC-Servo" for the input and
output addresses. The "TPA OB Servo" process image is se‚Äê
lected automatically for the input and output addresses by
selecting the organization block.
"‚Äì" No configuration for technology object is required for these parameters

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1437

Control de movimiento
6.1 Using S7-1500 Motion Control

Encoder connection via HSC (High-speed counter)
Configuration
CPU 1511C-1 PN/CPU 1512C-1 PN

Technology object
Axis

High-speed counter (HSC) > HSC 1‚Ä¶6
> General > Enable

External encoder

‚Äì

‚Äì

High-speed counter (HSC) > HSC 1‚Ä¶6
> Basic parameters > Module parame‚Äê
ters

Hardware interface > Encoder

Hardware interface > Encoder

‚Äì

Select "Encoder" data connection and
the high-speed counter activated and
configured as encoder on the CPU

Select "Encoder" data connection and
the high-speed counter activated and
configured as encoder on the CPU

Signal type

Select encoder type according to the de‚Äê Select encoder type according to the de‚Äê
vice configuration of the CPU 1)
vice configuration of the CPU 1)

Enable high-speed counter
High-speed counter (HSC) > HSC 1‚Ä¶6
> Basic parameters > Operating mode
Select "Position input for Motion Con‚Äê
trol" mode

‚óè Incremental encoder
‚Äì

‚óè Incremental

‚óè Incremental

Hardware interface > Data exchange
with encoder

Hardware interface > Data exchange

Telegram "DP_TEL83_STANDARD" is
automatically selected after the selec‚Äê
tion of the encoder.

Telegram "DP_TEL83_STANDARD" is
automatically selected after the selec‚Äê
tion of the encoder.

Clear the check box "Automatic data ex‚Äê Clear the check box "Automatic data ex‚Äê
change for encoder values (online)"
change for encoder values (online)"
Select the check box "Automatic data
exchange for encoder values (offline)"

Select the check box "Automatic data
exchange for encoder values (offline)"

If the check box is cleared, you can ma‚Äê If the check box is cleared, you can ma‚Äê
nually match the parameters described nually match the parameters described
and identified in this table.
and identified in this table.
Select rotary measuring system type 1)

Select rotary measuring system type 1)

Enter fine resolution according to the
configured signal evaluation set for the
high-speed counter (HSC) 1)

Enter fine resolution according to the
configured signal evaluation set for the
high-speed counter (HSC) 1)

‚óè 0 = Single

‚óè 0 = Single

‚óè 1 = Double

‚óè 1 = Double

‚óè 2 = Quadruple

‚óè 2 = Quadruple

Enter increments per revolution

Enter increments per revolution corres‚Äê
ponding to device configuration for CPU
(1:1) 1)

Enter increments per revolution corres‚Äê
ponding to device configuration for CPU
(1:1) 1)

‚Äì

Hardware interface > Data exchange
with the drive

‚Äì

Signal evaluation
‚óè Single
‚óè Double
‚óè Quadruple

Enter reference speed corresponding to Enter reference speed
configuration for technology object (1:1)
‚Äì

1438

Homing

Homing

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Configuration
CPU 1511C-1 PN/CPU 1512C-1 PN

Technology object
Axis

Select the homing signal for homing
mark 0:

External encoder

Use the homing mode "Use zero mark
via PROFIdrive telegram".

Use the homing mode "Use zero mark
via PROFIdrive telegram".

‚Äì

‚Äì

‚óè Signal N of the incremental encoder
‚óè DI0 (can be set with the hardware
inputs/outputs)
In addition, configure the input delay
for the selected hardware input. You
configure the input delay in the
device configuration at the
corresponding DI channel (DI 16/
DQ 16 > Inputs > Channel > Input
parameters > Input delay).
High-speed counter (HSC) > HSC 1‚Ä¶6
> I/O addresses
The organization block ("MC-Servo")
and the process image ("TPA OB Ser‚Äê
vo") are selected automatically for the
input and output addresses by selecting
the HSC channel for the technology ob‚Äê
ject.
1)

Parameters are automatically applied when "Automatic data exchange for encoder values (offline)" is selected

"‚Äì" No configuration for CPU/technology object is required for these parameters

Additional configuration for use with the technology object measuring input
Configuration
Technology module
CPU 1511C-1 PN/CPU 1512C-1 PN
High-speed counter (HSC) > HSC 1‚Ä¶6 > Hardware inputs/
outputs

Technology object
Measuring input
Hardware interface > Measuring input

Measuring using PROFIdrive telegram (drive or external en‚Äê
In addition, configure the input delay for the selected hardwa‚Äê coder)
re input. You configure the input delay in the device configu‚Äê In the "Number of the measuring input" selection box, select
ration at the corresponding DI channel (DI 16/DQ 16 > In‚Äê
"1" (measuring input 1).
puts > Channel > Input parameters > Input delay).
Select the hardware input of the measuring input.

SIMATIC Drive Controller (onboard I/O)
You can use the inputs and outputs of interface X142 of a SIMATIC Drive Controller as
measuring input for the measuring input technology object, as well as for the output cam/cam
track technology object.
Isochronous mode is required for use with a measuring input, output cam or cam track.
For use with Motion Control, the following parameters must be configured:

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1439

Control de movimiento
6.1 Using S7-1500 Motion Control
Use with output cam/cam track technology object
Configuration
SIMATIC Drive Controller

Technology object
Output cam /

Cam track

Channel parameters > Channel 0 to 7

Hardware interface > Output cam output/output cam track

‚Äì

Activate output
Output via Timer DQ

Select desired channel and select operating mode "Timer
DQ".

Select output cam output

I/O addresses

‚Äì

Select "Isochronous mode"
The organization block ("MC-Servo") and the process image
("TPA OB Servo") are updated automatically for the input and
output addresses by selecting the channel in the encoder
configuration at the technology object.
"‚Äì" No configuration at the SIMATIC Drive Controller/technology object is required for these parameters

Use with measuring input technology object
Configuration
SIMATIC Drive Controller

Technology object
Measuring input

Channel parameters > Channel 0 to 7

Hardware interface > Measuring input

‚Äì

Select measuring via timer DI

Select desired channel and select operating mode "Timer DI" Select measuring input
I/O addresses

‚Äì

Select "Isochronous mode"
The organization block ("MC-Servo") and the process image
("TPA OB Servo") are updated automatically for the input and
output addresses by selecting the channel in the input confi‚Äê
guration at the technology object.
"‚Äì" No configuration at the SIMATIC Drive Controller/technology object is required for these parameters

Connect drive/encoder via data block
Creating the data block for data connection
1. Create a new data block of type "Global DB".
2. Select the data block in the project tree and select "Properties" from the shortcut menu.
3. Disable the following attributes under Attributes and accept the change with "OK":
‚Äì "Only store in load memory"
‚Äì "Data block write-protected in the device"
‚Äì "Optimized block access" for technology version < V4.0

1440

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
4. Open the data block in the block editor.
5. Insert a tag structure of type "PD_TELx" textually in the block editor.
This tag structure contains the "Input" tag structure for the input area of the telegram and the
"Output" tag structure for the output area of the telegram.
Nota
"Input" and "Output" relate to the view of the closed loop position control. For example, the input
area contains the actual values of the drive and the output area contains the setpoints for the
drive.
The data block may contain the data structures of multiple axes and encoders and other
contents.

Configuring data connection via a data block
1. Open the configuration window "Hardware interface > Drive" or "Hardware interface >
Encoder".
2. Select the entry "Data block" from the "Data block" drop-down list.
3. In the "Data block" field, select the previously created data block.
Open this data block and select the tag name defined for the drive and encoder.

Programming MC-PreServo and MC-PostServo
1. Assign the previously defined PLC tag of the input range of the data block to MC-PreServo .
2. Assign the previously defined PLC tag of the output range of the data block to MCPostServo.
ATENCI√ìN
Machine damage
Improper manipulation of drive and encoder telegrams may result in unwanted drive motions.
Check your user
program for consistency in the drive and encoder connection.
An application example for the use of MC-PreServo and MC-PostServo is available at:
https://support.industry.siemens.com/cs/document/109741575 (https://
support.industry.siemens.com/cs/ww/en/view/109741575)

Consulte tambi√©n
PROFIdrive telegrams (P√°gina 1555)
Data connection drive/encoder via data block (P√°gina 1570)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1441

Control de movimiento
6.1 Using S7-1500 Motion Control

Parameter view
The Parameter view provides you with a general overview of all relevant parameters of a
technology object. You obtain an overview of the parameter settings and can easily change
them in offline and online mode.



‚ë†
‚ë°
‚ë¢
‚ë£







Navigation (P√°gina 1444)
Toolbar (P√°gina 1443)
Parameter table (P√°gina 1444)
"Parameter view" tab

Function scope
The following functions are available for analyzing the parameters of the technology objects
and for enabling targeted monitoring and modification.
Display functions:
‚óè Display of parameter values in offline and online mode
‚óè Display of status information of the parameters
‚óè Display of value deviations and option for direct correction
‚óè Display of configuration errors
‚óè Display of value changes as a result of parameter dependencies
‚óè Display of all memory values of a parameter: Start value PLC, Start value in project, Monitor
value
‚óè Display of the parameter comparison of the memory values of a parameter
Operator control functions:
‚óè Navigation for quickly changing between the parameters and parameter structures.
‚óè Text filter for faster searches for particular parameters.
‚óè Sorting function for customizing the order of parameters and parameter groups to
requirements.

1442

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
‚óè Memory function for backing up structural settings of the Parameter view.
‚óè Monitoring and modifying of parameter values online.
‚óè Function for saving a snapshot of parameter values of the CPU in order to capture
momentary situations and to respond to them.
‚óè Function for applying a snapshot of parameter values as start values.
‚óè Download of modified start values to the CPU.
‚óè Comparison functions for comparing parameter values with one another.

Structure of the parameter view
Toolbar
The following functions can be selected in the toolbar of the parameter view.
Symbol

Function

Explanation

Monitor all

Starts monitoring of the visible tags in the active
table.

Select navigation structure

Toggle between function-based navigation and the
view of the data structure of the technology data
block.

Couples the function view and
parameter view for the objects
selected in the navigation

Enables the targeted toggling between the para‚Äê
meter view and function-based view.

Collapse/expand all nodes and
objects

Collapses or expands all nodes and objects of the
navigation or the data structure in the currently ac‚Äê
tive view.

Collapse/expand the nodes be‚Äê
low the marked nodes

Collapses or expands the marked nodes and ob‚Äê
jects of the navigation or the data structure in the
currently active view.

Text filter...

After entry of a character string: Display of all para‚Äê
meters containing the entered string in one of the
currently visible columns.

Selection of compare values

Selection of parameter values that are to be com‚Äê
pared with one another in online mode (Start value
in project, Start value PLC)
Only in online mode.

Save window settings

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Saves your display settings for the Parameter view
(e.g. selected navigation structure, activated table
columns, etc.)

1443

Control de movimiento
6.1 Using S7-1500 Motion Control

Navigation
Within the "Parameter view" tab, the following alternative navigation structures can be selected.
Navigation

Explanation

Functional naviga‚Äê
tion

In the functional navigation, the structure of the parameters is based
on the structure in the configuration window ("Function view" tab),
commissioning window and diagnostics window.

Data structure

In the "Data structure" navigation, the structure of the parameters is
based on the structure of the technology data block.

You can use the "Select navigation structure" drop-down list to toggle the navigation structure.

Parameter table
The table below shows the meaning of the individual columns of the parameter table. You can
show or hide the columns as required.
Column

Explanation

Name in function
view

Name of the parameter in the function view.

Name in DB

Name of the parameter in the technology data block.

Offline

Online

X

X

X

X

X

X

The display field is empty for parameters that are not confi‚Äê
gured via the technology object.
If the parameter is part of a structure or UDT, the prefix "../" is
added.
The display field is empty for parameters that are not contai‚Äê
ned in the technology data block.

Full name in DB

Complete path of the parameter in the instance data block.
The display field is empty for parameters that are not contai‚Äê
ned in the technology data block.

Status of configu‚Äê
ration

Display of the completeness of the configuration using status
symbols.

X

-

Compare result

Result of the "Compare values" function.

-

X

X

X

X

X

This column is displayed when there is an online connection.
Start value in pro‚Äê
ject

Configured start value in project.

Default value

Value that is pre-assigned to the parameter.

Error indication if entered values have a syntax or processrelated error.
The display field is empty for parameters that are not contai‚Äê
ned in the technology data block.

1444

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Column

Explanation

Start value PLC

Start value in the CPU.

Offline

Online

-

X

-

X

-

X

X

X

X

X

Designates the parameter as a setpoint. These parameters
can be initialized online.

X

X

Data type of the parameter.

X

X

X

X

This column is displayed when there is an online connection.
Monitor value

Current value in the CPU.
This column is displayed when there is an online connection.

Modify value

Value that is to be used to change the monitor value.
This column is displayed when there is an online connection.

Minimum value

Minimum process-related value of the parameter.
If the minimum value is dependent on other parameters, it is
defined:
‚óè Offline: by the start value in the project.
‚óè Online: by the monitor values.

Maximum value

Maximum process-related value of the parameter.
If the maximum value is dependent on other parameters, it is
defined:
‚óè Offline: by the start value in the project.
‚óè Online: by the monitor values.

Setpoint
Data type

The display field is empty for parameters that are not contai‚Äê
ned in the technology data block.
Retain

Designates the value as a retentive value.
The values of retentive parameters are retained even after
the voltage supply is switched off.

Accessible from
HMI

Indicates whether the HMI can access this parameter during
runtime.

X

X

Visible in HMI

Indicates whether the parameter is visible in the selection list
of the HMI by default.

X

X

Comment

Brief description of the parameter.

X

X

X This function is visible in offline/online mode.
- This function is not visible in offline/online mode.

Opening the parameter view
Requirement
The technology object was added in the project navigator.

Procedure
1. Open the "Technology objects" folder in the project tree.
2. Open the technology object in the project tree.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1445

Control de movimiento
6.1 Using S7-1500 Motion Control
3. Double-click the "Configuration" object.
4. Select the "Parameter view" tab in the top right corner.

Result
The Parameter view opens. Each displayed parameter is represented by one row in the
parameter table.
The displayable parameter properties (table columns) vary depending on whether you are
working with the Parameter view in offline or online mode.
In addition, you can selectively display and hide individual table columns.

Working with the parameter view
The following table provides an overview of the functions of the Parameter view in online and
offline mode described below:
Function/action

Offline

Online

Filtering the parameter table (P√°gina 1446)

X

X

Sorting the parameter table (P√°gina 1447)

X

X

Transferring parameter data to other editors (P√°gina 1448)

X

X

Indicating errors (P√°gina 1448)

X

X

Editing start values in the project (P√°gina 1448)

X

X

Monitoring values online in the parameter view (P√°gina 1449)

-

X

Modifying values (P√°gina 1450)

-

X

Comparing values (P√°gina 1451)

-

X

X This function is possible in offline/online mode.
- This function is not possible in offline/online mode.

Filtering the parameter table
You can filter the parameters in the parameter table in the following ways:
‚óè With the text filter
‚óè With the subgroups of the navigation
Both filter methods can be used simultaneously.

With the text filter
The text filter can only be use on texts in displayed parameter lines and displayed columns.
To work with the text filter, follow these steps:
1. To filter a desired character string, enter it in the "Text filter..." input box.
The parameter table displays only the parameters containing the character string.

1446

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
To reset text filtering, the following options are available:
‚óè Select another parameter group in the navigation.
‚óè Switch between data navigation and functional navigation, or vice versa.

With the subgroups of the navigation
To filter the navigation with the subgroups, follow these steps:
1. Click the desired parameter group in the navigation, e.g., "Static".
The parameter table now only shows the "static" parameters. You can select further
subgroups for some groups of the navigation.
2. If all parameters are to be shown again, click "All parameters" in the navigation.

Sorting the parameter table
The values of the parameters are arranged in rows. The parameter table can be sorted by any
displayed column.
‚óè In columns containing numerical values, sorting is based on the magnitude of the numerical
value.
‚óè In text columns, sorting is alphabetical.

Sort column-by-column
1. Position the cursor in the header cell of the desired column.
The background of this cell turns blue.
2. Click the column header.

Result
The entire parameter table is sorted by the selected column. A triangle with tip facing up
appears in the column header.
Clicking the column header again changes the sorting as follows:
Symbol

Description

‚ñ≤

Parameter table is sorted in ascending order.

‚ñº

Parameter table is sorted in descending order.

No symbol

The sorting is removed again. The parameter table shows the default display.

The "../" prefix in the "Name in DB" column is ignored when sorting.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1447

Control de movimiento
6.1 Using S7-1500 Motion Control

Transferring parameter data to other editors
You can paste parameters of the parameter view in the following editors:
‚óè Program editor
‚óè Watch table
‚óè Signal table for Trace
The following options are available for pasting:
‚óè Drag-and-drop
‚óè <Ctrl+C>/<Ctrl+V>
‚óè Copy/Paste via shortcut menu

Indicating errors
Error display
Parameter assignment errors that result in compilation errors (e.g. limit violation) are indicated
in the Parameter view.
Every time a value is entered in the Parameter view, a check is made for process-related and
syntax errors and displayed with the following indicators:
‚óè Red error symbol in the "Status of configuration" (offline mode) or "Compare result" (online
mode, depending on the selected comparison type) columns
‚óè Table field with red background
If you click the bad field, a roll-out error message appears with information of the permissible
value range or the required syntax (format)

Compilation error
From the error message of the compiler, you can directly open the Parameter view (functional
navigation) containing the parameter causing the error in situations where the parameter is not
displayed in the configuration window.

Editing start values in the project
With the Parameter view, you can edit the start values in the project in offline mode and online
mode.
‚óè You make value changes in the "Start value in project" column of the parameter table.
‚óè In the "Status of configuration" column of the parameter table, the progress of the
configuration is indicated by the familiar status symbols from the configuration window of the
technology object.

1448

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Boundary conditions
‚óè If other parameters depend on the parameter whose start value was changed, the start
value of the dependent parameters are also adapted.
‚óè If a parameter of a technology object is not editable, it is also not editable in the parameter
view. The ability to edit a parameter can also depend on the values of other parameters.

Defining new start values
To define start values for parameters in the Parameter view, follow these steps:
1. Open the Parameter view of the technology object.
2. Enter the desired start values in the "Start value in project" column. The value must match
the data type of the parameter and must not exceed the value range of the parameter.
The limits of the value range can be seen in the "Maximum value" and "Minimum value"
columns.
The "Status of configuration" column indicates the progress of the configuration with colored
symbols.
Following adaptation of the start values and downloading of the technology object to the CPU,
the parameters take the defined value at startup if they are not declared as retentive ("Retain"
column).

Error display
When a start value is input, a check is made for process-related and syntax errors and the result
is indicated.
Bad start values are indicated by:
‚óè Red error symbol in the "Status of configuration" (offline mode) or "Compare result" (online
mode, depending on the selected comparison type) columns
and/or
‚óè Red background in the "Start value in project" field
If you click on the bad field, a roll-out error message appears with information of the
permissible value range or the necessary syntax (format)

Correcting bad start values
1. Correct bad start values using information from the roll-out error message.
Red error symbol, red field background, and roll-out error message are no longer displayed.
The project cannot be successfully compiled unless the start values are error-free.

Monitoring values online in the parameter view
You can monitor the values currently taken by the parameters of the technology object in the
CPU (monitor values) directly in the Parameter view.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1449

Control de movimiento
6.1 Using S7-1500 Motion Control

Requirements
‚óè There is an online connection.
‚óè The technology object is downloaded to the CPU.
‚óè The Parameter view of the technology object is open.

Procedure
As soon as the Parameter view is online, the following columns are additionally displayed:
‚óè Compare result
‚óè Start value PLC
‚óè Monitor value
‚óè Modify value
‚óè Selection for transmission
The "Monitor value" column shows the current parameter values on the CPU.

Display
All columns that are only available online are displayed in color as follows:
Color

Description
The values are modifiable.
These values cannot be changed.

Consulte tambi√©n
Parameter table (P√°gina 1444)

Modifying values
With the Parameter view, you can modify values of the technology object in the CPU. You can
assign values to a parameter once (Modify value) and modify them immediately. The modify
request is executed as quickly as possible without reference to any particular point in the user
program.
PELIGRO
Danger when modifying
Changing the parameter values while the plant is operating may result in severe damage to
property and personal injury in the event of malfunctions or program errors.
Make sure that dangerous states cannot occur before you use the "Modify" function.

1450

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Requirements
‚óè There is an online connection.
‚óè The technology object is downloaded to the CPU.
‚óè The Parameter view of the technology object is open.
‚óè The parameter is modifiable. (Associated field in the "Modify value" column has a
corresponding background).

Procedure
To modify values immediately, follow these steps:
1. Enter the desired modify value in the "Modify values" column of the parameter table.
The parameter is modified once and immediately with the specified value. You can monitor
the value in the "Monitor values" column. The check box for modifying in the "Selection for
transmission" column is automatically cleared after the modify request is complete.

Error display
When a modify value is input, a check is made immediately for process-related and syntax
errors and the result is indicated.
You can recognize incorrect modify values as follows:
‚óè The field "Modify value" is displayed with red background color.
‚óè If you click in the incorrect field, a roll-out error message appears with information on the
permissible value range or the necessary syntax.

Bad modify values
‚óè Modify values with process-related errors can be transmitted.
‚óè Modify values with syntax errors cannot be transmitted.

Comparing values
You can use comparison functions to compare the following memory values of a parameter:
‚óè Start value in project
‚óè Start value PLC

Requirements
‚óè There is an online connection.
‚óè The technology object is downloaded to the CPU.
‚óè The Parameter view of the technology object is open.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1451

Control de movimiento
6.1 Using S7-1500 Motion Control

Procedure
To compare the start values on the various target systems, follow these steps:
1. Click the "Selection of compare values" icon
.
A selection list containing the comparison options opens:
‚Äì Start value in project - Start value in CPU (default setting)
2. Select the desired comparison option.
The selected comparison option is executed as follows:
‚Äì A scales symbol appears in the header cells of the two columns selected for comparison.
‚Äì Symbols are used in the "Compare result" column to indicate the result of the
comparison of the selected columns.

Symbol in "Compare result" column
Symbol

Meaning
The compare values are equal and error-free.
The compare values are not equal and error-free.
At least one of the two compare values has a process-related or syntax error.
The comparison cannot be performed. At least one of the two comparison values is not
available (e.g. snapshot).

Symbol in the navigation
The symbols are shown in the same way in the navigation if the compare result applies to at
least one of the parameters below the displayed navigation structure.

6.1.1.5

Programming
The "Programming" section contains general information on supplying and evaluating the
Motion Control instructions and on the technology data block.
You can use Motion Control instructions in the user program to assign jobs to the technology
object. You define the job using the input parameters of the Motion Control instructions. You
can track the current job status using the job parameters if you use a separate instance for each
Motion Control instruction per technology object.
In a typical programming, you can use one or more instances for each Motion Control
instruction for each technology object.
The use of a separate instance per technology object is always necessary for Motion Control
instructions without parameter "DONE" and for the Motion Control instruction "MC_MoveJog".
Only one instance per technology object may be active in the program flow for the Motion
Control instruction "MC_Power". Disable the technology object with the same instance you
used to enable the technology object, otherwise an error with error ID 16#800C will occur.
The technology data block is available to you as an additional interface to the technology object.

1452

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Technology data block
The properties of real objects (e.g. axes) are configured by means of the technology objects
and saved in a technology data block. The technology data block contains all configuration
data, setpoint and actual values, and status information of the technology object. The TIA Portal
automatically creates the technology data block when the technology object is created. You
access the data of the technology data block (read/write access) with your user program.
A listing and description of the tags can be found in the Appendix (P√°gina 1510).

Evaluating the technology data block
Access to data in the technology data block occurs in accordance with the access to standard
data blocks. Only tags with elementary data types can be accessed in the technology data
block. Access to a complete data structure (e.g. STRUCT, ARRAY) is not possible.

Reading values from the technology data block
In your user program you can read actual values (e.g. current position) and status information,
or detect error messages in the technology object. When you program a query in your user
program (e.g. current velocity), the value is directly read from the technology object.
Reading values from the technology data block takes longer than for other data blocks. If you
use these tags several times in a single cycle of your user program, it is recommended to copy
the tag values to local tags, and use the local tags in your program.

Writing values to the technology data block
The configuration of the technology object in the TIA Portal is used to write the corresponding
data to the technology data block. After they have been loaded into the CPU, these data are
stored in the CPU on the SIMATIC Memory Card (load memory).
In the following cases, it may be necessary for the user program to write values to the
technology data block:
‚óè Adaptation of the configuration of the technology object (e.g. dynamic limits, software limit
switches)
‚óè Use of overrides
‚óè Adaptation of position control (e.g. "Kv" parameter)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1453

Control de movimiento
6.1 Using S7-1500 Motion Control
Changes to values in the technology data block by the user program can take effect at various
points in time. The relevant property of the individual tags can be found in their descriptions in
the Appendix (P√°gina 1510):
Effectiveness of changes

Description

Direct (DIR)

You write changes using direct assignments. The changes are applied only at the start
of the next MC‚ÄëServo [OB91].
The changes are retained until the next POWER OFF of the CPU or restart of the
technology object.
LREAL

The technology object performs a range check on the written
(e.g. <TO>.Override.Ve‚Äê value, and immediately starts using the new value.
locity)
If range limits are violated when writing, the technology ob‚Äê
ject automatically corrects the values. If the value is below
the range, then the value is set to the low limit of the range;
if the range is exceeded, then the value is set to the high limit
of the range.
DINT/BOOL
(e.g. <TO>.PositionLi‚Äê
mits_SW.Active)
When Motion Control instruction is
called (CAL)
(e.g. <TO>.Sensor[1..4].ActiveHo‚Äê
ming.HomePositionOffset)
Restart (RES)
(e.g. <TO>.Homing.AutoReversal)

Changes are only permitted in the defined value range. Va‚Äê
lue changes outside the value range are not applied.
If you enter invalid values, the programming error OB (OB
121) is started.

You write changes using direct assignments. The changes are applied at the start of the
next MC‚ÄëServo [OB91] after the call of the corresponding Motion Control instruction in
the user program.
The changes are retained until the next POWER OFF of the CPU or restart of the
technology object.
Since restart-relevant tags have dependencies on other tags, value changes cannot be
applied at any arbitrary time. The changes are only used after reinitialization (restart) of
the technology object.
During a restart the technology object is reinitialized with the data in load memory. You
therefore write changes to the start value in the load memory with the extended ins‚Äê
truction "WRIT_DBL" (write to data block in load memory).
You trigger the restart in your user program using the Motion Control instruction
"MC_Reset" with parameter "Restart" = TRUE. Additional information regarding the
restart can be found in the section Restarting technology objects (P√°gina 1476).

Read only (RON)

The tag cannot and must not be changed during runtime of the user program.

(e.g. <TO>.Position)

Nota
Save changes with "WRIT_DBL"
Changes to tags immediately in effect are lost on POWER OFF of the CPU, or restart of the
technology object.
If changes in the technology data block should also be retained after POWER OFF of the CPU,
or restart of the technology object, you must write the changes to the start value in the load
memory with the extended instruction "WRIT_DBL".

1454

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Nota
Using the "READ_DBL" and "WRIT_DBL" data block functions
The "READ_DBL" and "WRIT_DBL" data block functions may only be used on individual tags
in conjunction with the tags of the technology object. The "READ_DBL" and "WRIT_DBL" data
block functions must not be applied to data structures of the technology object.

Isochronous evaluation of data
If you want to process data of the technology data block in isochronous mode from a Motion
Control application cycle, there is the option of evaluating this data in the MC-PreServo [OB67]/
MC-PostServo [OB95] as of technology version V3.0. As of technology version V5.0, you also
have the option of evaluating these in MC-PreInterpolator [OB68].

Consulte tambi√©n
Organization blocks for Motion Control (P√°gina 1390)

Evaluate StatusWord, ErrorWord and WarningWord
To be able to symbolically use individual status and error information from the "StatusWord",
"ErrorWord" and "WarningWord" data double words, you can evaluate them as described
below. For consistent evaluation, you should avoid using bit addressing to access these data
double words in the technology data block. Access to an individual bit in the technology data
block only lasts as long as the access to the entire data word.
When required, copy the required data double word to a tag of a data structure and query the
individual bits of the tag.
The allocation of the individual bits in the data double words can be found in the Appendix
(P√°gina 1510) in the description of the tags of the corresponding technology object.

Requirements
The technology object has been created.

Procedure
To evaluate the individual bits in the data word "StatusWord", follow these steps:
1. Crate a global data structure. Name the data structure, e.g. as "Status".
2. Create a double word (DWORD) in the data structure "Status". Name the double word, e.g.
as "Temp".
3. Create 32 Boolean tags in the "Status" data structure. You can obtain a clearer overview by
giving the individual Boolean tags identical names as the bits in the technology DB (e.g.
name the fifth Boolean tag "HomingDone").
4. If needed, copy the tag "<TO>.StatusWord" from the technology data block to the double
word "Temp" in your data structure.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1455

Control de movimiento
6.1 Using S7-1500 Motion Control
5. Copy the individual bits of double word "Temp" to the corresponding Boolean tags with bit
accesses.
6. Use the Boolean tags to query the status bits.
Evaluate the data words "ErrorWord" and "WarningWord" as specified in steps 1 to 6.

Example
The following example shows how you can read out and save the fifth bit "HomingDone" of the
data word "StatusWord":
SCL

Explanation

#Status.Temp

:= "TO".StatusWord;

//Copy status word

#Status.HomingDone := #Status.Temp.%X5;

//Copy individual bits per bit access

STL

Explanation

L "TO".StatusWord

//Copy status word

T #Status.Temp
U #Status.Temp.%X5

//Copy individual bits per bit access

= #Status.HomingDone

Change restart-relevant data
In order to change restart-relevant data in the technology data block, write to the starting values
of the tags in load memory using the extended instruction "WRIT_DBL". In order for the
changes to be applied, a restart of the technology object must be performed.
You can see from the description of the tag of the corresponding technology object whether
value changes of a tag are restart-relevant.

Requirement
The technology object has been created.

Procedure
To change restart-relevant data, proceed as follows:
1. Create a data block and fill it with the restart-relevant values, that you want to change in the
technology data block. In doing so, the data types must match the tags to be changed.
2. Write the values from your data block to the starting values of the tags of the technology data
block in load memory, using the extended instruction "WRIT_DBL".
If restart-relevant data were changed, this will be indicated in the "<TO>.StatusWord.X3
(OnlineStartValuesChanged)" tag of the technology object.
3. Perform a restart of the technology object using the Motion Control instruction "MC_Reset"
with parameter "Restart" = TRUE.
After the restart of the technology object, the new value is transferred into the technology data
block in work memory, and is effective.

1456

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Motion Control instructions
Motion Control instruction parameters
The individual Motion Control instructions are described in detail in the section "S7-1500 Motion
Control V5".
When creating your user program, take the following explanations of the Motion Control
instruction parameters into account.

Reference to the technology object
The technology object is specified for the Motion Control instruction as follows:
‚óè Parameter "Axis"
The "Axis" input parameter of a Motion Control instruction contains a reference to the
technology object that is to execute the corresponding job.
The corresponding technology object is also referenced in the following parameters:
‚Äì Parameter "Master"
‚Äì Parameter "Slave"
‚Äì Parameter "Cam"
‚Äì Parameter "MeasuringInput"
‚Äì Parameter "OutputCam"
‚Äì Parameter "CamTrack"
As of technology version V3.0, the reference to the technology object can be specified, also
in limited manner, via the data type "DB_ANY". For more information, refer to the section
"Parameter transfer for function blocks (P√°gina 1462)".

Job start and transfer of input parameters of a Motion Control instruction
For the start of jobs and the transfer of modified parameter values, a distinction is made
between the following Motion Control instructions:
‚óè Motion Control instructions with "Execute" parameter
With a positive edge at the "Execute" parameter, the job is started and the existing values
for the input parameters are transferred.
Subsequently changed parameter values are not transferred until the next job start.
Resetting the "Execute" parameter does not end the job, but it does affect the display
duration of the job status. As long as "Execute" is set to "TRUE", the output parameters will
be updated. If "Execute" is reset before the completion of a job, the parameters "Done",
"Error" and "CommandAborted" are correspondingly set for only one call cycle.
‚óè Motion Control instructions with "Enable" parameter
The job is started by setting the "Enable" parameter.
As long as "Enable" = TRUE, the job remains active and changed parameter values will be
transferred each time the instruction is called in the user program.
The job is ended by resetting the "Enable" parameter.
The input parameters "JogForward" and "JogBackward" of the Motion Control instruction
"MC_MoveJog" correspond in their behavior to the "Enable" parameter.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1457

Control de movimiento
6.1 Using S7-1500 Motion Control

Job status
The following output parameters indicate the status of the job execution:
‚óè Motion Control instructions with "Done" parameter
The normal completion of a job is indicated with parameter "Done" = TRUE.
‚óè Motion Control instructions without "Done" parameter
The achievement of the job objective is indicated by other parameters (e.g. "Status",
"InVelocity"). For more information, refer to the "Tracking running jobs (P√°gina 1465)"
section.
‚óè Parameter "Busy"
As long as a job is in progress, the "Busy" parameter shows the value "TRUE". If a job was
ended or canceled, "Busy" shows the value "FALSE".
‚óè Parameter "Active"
If a job is active in Motion Control, the parameter "Active" shows the value "TRUE". As long
as a job is in the job sequence, "Active" shows the value "FALSE".
‚óè Parameter "CommandAborted"
If a job was canceled by another job, the "CommandAborted" parameter shows the value
"TRUE".
‚óè Parameter "Error"
If a Motion Control instruction error occurs, the "Error" parameter shows the value "TRUE".
The "ErrorID" parameter indicates the cause of the error.
As long as the "Execute" or "Enable" parameter is set to "TRUE", the output parameters will be
updated. Otherwise, the parameters "Done", "Error" and "CommandAborted" are
correspondingly set for only one cycle.

Abort of running jobs
An active Motion Control job is aborted by the start of a new Motion Control job. In the process,
the current dynamic setpoints (acceleration, deceleration, jerk, velocity) are set to the values of
the overriding job.

1458

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Example of parameter behavior
The behavior of the parameters of Motion Control instructions is shown in the following chart
using the example of two "MC_MoveAbsolute" jobs.
$

$

0&B0RYH$EVROXWH

0&B0RYH$EVROXWH

$[LV

'RQH

'RQHB

72B

$[LV

'RQH

'RQHB

([HB

([HFXWH

%XV\

%XV\B

([HB

([HFXWH

%XV\

%XV\B



3RVLWLRQ

&RPPDQG$ERUWHG

$ERUWB



3RVLWLRQ

&RPPDQG$ERUWHG



9HORFLW\

(UURU



9HORFLW\

(UURU,'



$FFHOHUDWLRQ
'HFHOHUDWLRQ

72B



$FFHOHUDWLRQ



'HFHOHUDWLRQ



-HUN

‡≤¶

‡≤¶


'LUHFWLRQ



(UURU
(UURU,'

-HUN
'LUHFWLRQ



$


([HB




'RQHB




%XV\B




$ERUWB



$

W
W
W
W



([HB




'RQHB




%XV\B



W
W
W



72B9HORFLW\


W



72B3RVLWLRQ



Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

W

1459

Control de movimiento
6.1 Using S7-1500 Motion Control
Using "Exe_1", an "MC_MoveAbsolute" job (A1) with target position 1000.0 is initiated.
"Busy_1" is set to "TRUE". The axis is accelerated to the specified velocity and moved to the
target position (see TO_1.Velocity and TO_1.Position). Before the target position is reached,
the job is overridden at time ‚ë† by another "MC_MoveAbsolute" job (A2). The termination is
signaled via "Abort_1", and "Busy_1" is set to "FALSE". The axis is braked to the velocity
specified in A2 and moved to the new target position 1500.0. When the axis reaches the target
position, this is signaled via "Done_2".

Non position-controlled operation
The position control of the axis can be deactivated with the following parameters:
‚óè MC_Power.StartMode = 0
‚óè MC_MoveVelocity.PositionControlled = FALSE
‚óè MC_MoveJog.PositionControlled = FALSE
For more information, refer to the section "Non position-controlled operation (P√°gina 1615)" of
the "S7-1500/S7-1500T Axis functions" (https://support.industry.siemens.com/cs/ww/en/view/
109766462) documentation.

Add Motion Control instructions
You add Motion Control instructions to a program block in the same way as other instructions.
You control all available functions of the technology object using the Motion Control
instructions. The instructions can be called at all execution levels.

Requirements
The technology object was created.

Procedure
To add Motion Control instructions in your user program, proceed as follows:
1. Double click your program block in the project tree (the program block must be called in the
cyclical program).
The program block is opened in the programming editor, and the available instructions are
displayed.
2. In the "Instructions" task card, open the "Technology > Motion Control" folder.
3. Using drag-and-drop, move the Motion Control instruction, e.g. "MC_Power", to the desired
segment of the program block.
The "Call options" dialog opens.
4. In the dialog, specify a name and a number for the instance data block of the Motion Control
instruction.

1460

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
5. Click "OK".
The Motion Control instruction "MC_Power" is inserted into the network.

The instance data block is automatically created under "Program Blocks > System Blocks
> Program Resources".
6. Input parameters without a default value (e.g. "Axis"), must be assigned. Select the
technology object in the project tree and move the technology object onto <...> at the "Axis"
parameter using drag-and-drop.

Once the technology object is specified in the "Axis" parameter, the following buttons are
available to you:
To open the configuration of the technology object, click on the toolbox icon.
To open the diagnostics of the technology object, click on the stethoscope icon.

7. Add additional Motion Control instructions in accordance with steps 3 through 6.

Consulte tambi√©n
Tracking active jobs (P√°gina 1465)
Tags of the positioning axis technology object (P√°gina 1718)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1461

Control de movimiento
6.1 Using S7-1500 Motion Control

Parameter transfer for function blocks
If you want to reuse a function block with Motion Control instructions for different technology
objects, create an input parameter of the data type of the respective technology object in the
block interface of the calling function block. You assign the data type in the block interface with
a direct input. The parameter is then transferred as reference to the technology object to the
"Axis" parameter of the Motion Control instructions. The data types of technology objects
correspond to the structure of the associated technology data block.
In contrast to standard data types, the data types for technology objects are always passed on
as pointers to the function block (Call by reference). This remains true if you declare the data
types of the technology objects in "Input" area of the block interface. Write access to function
blocks always leads directly to modification of the referenced technology object.

Example 1: Tag transfer with specific data type
By specifying the data type, you can address the tags of the technology object in the function
block (<parameters of the block interface>.<tag of the technology object>). The data types for
the reference to the technology objects are available in the section "appendix (P√°gina 1543)".
The following table shows the declaration of the tags used:
Tag

Declaration

Data type

Description

axis

Input

TO_PositioningAxis

Reference to the technology object

on

Input

BOOL

Signal to enable the axis

actPosition

Output

LReal

Query of the actual position from the technology data
block

MC_POWER

Multinstance of the Motion Control instruction "MC_Po‚Äê
wer"

instMC_POWER Static

The following SCL program shows the tag transfer with a specific data type:
SCL

Explanation

#instMC_POWER(Axis := #axis, Enable := #on);

//Call of the Motion Control instruction "MC_Power" with enable of the axis

#actPosition := #axis.ActualPosition;

//Query of the actual position from the technology
data block

Example 2: Tag transfer with "DB_Any"
The data type "DB_Any" provides a further option for the transfer of specific data types of the
technology object. Unlike the data types of the technology object in the program, "DB_Any" can
be assigned during runtime.
This example shows how you can program variable switching of up to four cams at
"MC_CamIn".
To do this, tags of the data type "DB_Any" are first created as input parameter of the block. The
cam to be used is assigned by an additional input parameter.

1462

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The following table shows the declaration of the tags used:
Tag

Declaration

Data type

Description

cam1

Input

DB_ANY

Cam 1

cam2

Input

DB_ANY

Cam 2

cam3

Input

DB_ANY

Cam 3

cam4

Input

DB_ANY

Cam 4

camToUse

Input

Int

Selection of cam 1 to 4

instMC_CAMIN

Static

MC_CAMIN

Multinstance of the Motion Control instruction "MC_Ca‚Äê
mIn"

tempCamSel

Temp

DB_ANY

Current cam

The following SCL program shows the tag transfer with "DB_Any":
SCL

Explanation
//Selection of the desired cam 1..4
//Using an input tag of data type Int

CASE #camToUse OF
1:

#tempCamSel := #cam1;

//Instruction for scenario 1

2:

#tempCamSel := #cam2;

//Instruction for scenario 2

3:

#tempCamSel := #cam3;

//Instruction for scenario 3

4:

#tempCamSel := #cam4;

//Instruction for scenario 4

ELSE

//Instruction for Int ‚â§ 0 or Int > 4

#tempCamSel := #cam1;

//Corresponds to default cam 1

END_CASE;
//Call of the Motion Control instruction "MC_CamIn" with variable transfer of the cam technology
object using the temporary tag "tempCamSel"
#instMC_CAMIN(Master := "PositioningAxis_1",

//Direct assignment of the technology object of
the leading axis

Slave := "SynchronousAxis_1",

//Direct assignment of the technology object of
the following axis

Cam := #tempCamSel);

//Indirect assignment of the cam technology object

Additional information
You can find more program examples for the use of the data type "DB_Any" in the following
FAQ entry:
https://support.industry.siemens.com/cs/ww/en/view/109750880 (https://
support.industry.siemens.com/cs/ww/en/view/109750880)

Starting Motion Control jobs
Motion Control jobs are started by setting the "Execute" or "Enable" parameter of the Motion
Control instruction. The call of the Motion Control instructions for a technology object should
occur in an execution level.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1463

Control de movimiento
6.1 Using S7-1500 Motion Control
When executing Motion Control jobs, you should also take note of the status of the technology
object.
Starting Motion Control jobs should be performed in the following steps:
1. Query the status of the technology object.
2. Initiate new job for the technology object.
3. Check job status.
These steps are explained using the example of a job for absolute positioning.

1. Query the status of the technology object
Make sure that the technology object is in the appropriate status to perform the desired job:
‚óè Has the technology object been released?
To execute motion jobs, the technology object must be enabled.
Enabling is performed using the Motion Control instruction "MC_Power".
The "MC_Power.Status" parameter (<TO>.StatusWord.X0 (Enable)) must show the value
"TRUE".
‚óè Is a technology alarm pending?
To perform motion commands, no technology alarms or alarm responses may be pending.
The "<TO>.ErrorDetail.Number" and "<TO>.ErrorDetail.Reaction" tags of the technology
object must show the value zero. After resolving the error, acknowledge any pending alarms
using the Motion Control instruction "MC_Reset".
You can find a list of the technology alarms and alarm reactions in the "Technology alarms
(P√°gina 1510)" appendix.
‚óè Has the technology object been homed?
In order to perform a job for absolute positioning, the positioning axis/synchronous axis
technology object must be homed. The referencing occurs via the Motion Control instruction
"MC_Home". The "<TO>.StatusWord.X5 (HomingDone)" tag of the technology object must
show the value "TRUE".

2. Initiate new command for the technology object
In the "Position" parameter of the "MC_MoveAbsolute" instruction, specify the position to which
the axis should be moved. Start the job with a positive edge at the "Execute" parameter.

3. Check command status
Parameter "Done" of the Motion Control instruction indicates successful completion of a job
(target reached, in this case).
If an error is detected, the "Error" parameter of the Motion Control instruction is set to "TRUE",
and the job is rejected.
You can program an error handling routine for the Motion Control job. For this purpose,
evaluate the error indicated in the "Error" parameter. The cause of the error is indicated in the
ErrorID parameter. After resolving the cause of the error, restart the job.
If "Error" = TRUE and "ErrorID" = 16#8001 is indicated during job execution, a technology alarm
has occurred.

1464

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
You can find a list of the ErrorIDs in the "Error detection (P√°gina 1537)" appendix.

Additional information
An option for evaluating the individual status bits, error bits, and warning bits can be found in
the Evaluating StatusWord, ErrorWord and WarningWord (P√°gina 1455) section.

Tracking active jobs
The current status of the job processing is made available via the output parameters of the
Motion Control instruction. These parameters are updated with each call of the Motion Control
instruction.
When tracking jobs, a distinction is made between three groups:
‚óè Motion Control instructions with "Done" parameter (P√°gina 1465)
‚óè Motion Control instructions without "Done" parameter (P√°gina 1469)
‚óè Motion Control instruction "MC_MoveJog" (P√°gina 1473)

Motion Control instructions with "Done" parameter
Jobs of Motion Control instructions with the "Done" parameter are started with a positive edge
at the "Execute" parameter. If the job was completed without errors or interruption by another
job (e.g. "MC_MoveAbsolute": Target position reached), the "Done" parameter shows the value
"TRUE".
In positioning instructions, the parameter "Done" is delayed by the set minimum dwell time
(<TO>.PositioningMonitoring.MinDwellTime).
The following Motion Control instructions have a "Done" parameter for the S7-1500 CPU:
‚óè MC_Reset
‚óè MC_Home
‚óè MC_Halt
‚óè MC_MoveAbsolute
‚óè MC_MoveRelative
‚óè MC_MoveSuperimposed
‚óè MC_SetSensor (S7-1500T)
‚óè MC_Stop
‚óè MC_SetAxisSTW
‚óè MC_WriteParameter
‚óè MC_MeasuringInput
‚óè MC_AbortMeasuringInput
‚óè MC_PhasingRelative (S7-1500T)
‚óè MC_PhasingAbsolute (S7-1500T)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1465

Control de movimiento
6.1 Using S7-1500 Motion Control
‚óè MC_InterpolateCam (S7-1500T)
‚óè MC_GetCamLeadingValue (S7-1500T)
‚óè MC_GetCamFollowingValue (S7-1500T)
‚óè MC_GroupInterrupt (S7-1500T)
‚óè MC_GroupContinue (S7-1500T)
‚óè MC_GroupStop (S7-1500T)
‚óè MC_MoveLinearAbsolute (S7-1500T)
‚óè MC_MoveLinearRelative (S7-1500T)
‚óè MC_MoveCircularAbsolute (S7-1500T)
‚óè MC_MoveCircularRelative (S7-1500T)
‚óè MC_MoveDirectAbsolute (S7-1500T)
‚óè MC_MoveDirectRelative (S7-1500T)
‚óè MC_TrackConveyorBelt (S7-1500T)
‚óè MC_DefineWorkspaceZone (S7-1500T)
‚óè MC_DefineKinematicsZone (S7-1500T)
‚óè MC_SetWorkspaceZoneActive (S7-1500T)
‚óè MC_SetWorkspaceZoneInactive (S7-1500T)
‚óè MC_SetKinematicsZoneActive (S7-1500T)
‚óè MC_SetKinematicsZoneInactive (S7-1500T)
‚óè MC_DefineTool (S7-1500T)
‚óè MC_SetTool (S7-1500T)
‚óè MC_SetOcsFrame (S7-1500T)
The behavior of the parameters is shown below by way of example for various situations.

1466

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Complete execution of the job
If the Motion Control job has been completely executed all the way to the end, this is indicated
with parameter "Done" = "TRUE". The signal state of the "Execute" parameter influences the
display duration for the "Done" parameter:
You set "Execute" after completion of the job to "FALSE".




You set "Execute" during processing of the job to "FALSE".




%XV\
'RQH
&RPPDQG
$ERUWHG
(UURU

‚ë†



([HFXWH




%XV\




'RQH




&RPPDQG
$ERUWHG










([HFXWH



(UURU
W












W

The job is started with a positive edge at the "Execute" parameter. Depending on the programming, "Execute" can be
reset to the value "FALSE" during the job or the value "TRUE" can be retained until after completion of the job.

‚ë°
‚ë¢

While the job is being executed, the "Busy" parameter shows the value "TRUE".

‚ë£

As long as the "Execute" parameter retains the value "TRUE" after completion of the job, the "Done" parameter also
retains the value "TRUE".

‚ë§

At the completion of the job (for example, with Motion Control instruction "MC_MoveAbsolute": Target position reached),
the "Busy" parameter changes to "FALSE" and the "Done" parameter to "TRUE".

If the "Execute" parameter was already set to "FALSE" before completion of the job, the "Done" parameter shows the
value "TRUE" for only one execution cycle.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1467

Control de movimiento
6.1 Using S7-1500 Motion Control

Job abort
If the Motion Control job is canceled during processing by another job, this is indicated in the
"CommandAborted" parameter with the value "TRUE". The signal state of the "Execute"
parameter influences the display duration for the "CommandAborted" parameter:
You set "Execute" after the job is canceled to "FALSE".




You set "Execute" before the job is aborted to "FALSE".





([HFXWH
%XV\
'RQH
&RPPDQG
$ERUWHG
(UURU

‚ë†







([HFXWH

$ERUW



%XV\




'RQH




&RPPDQG
$ERUWHG







(UURU
W




$ERUW










W

The job is started with a positive edge at the "Execute" parameter. Depending on the programming, "Execute" can be
reset to the value "FALSE" during the job or the value "TRUE" can be retained until after completion of the job.

‚ë°
‚ë¢

While the job is being executed, the parameter "Busy" shows the value "TRUE".

‚ë£

As long as the "Execute" parameter retains the value "TRUE" after completion of the job, the "CommandAborted"
parameter also retains the value "TRUE".

‚ë§

During job execution, the job is aborted by another Motion Control job. When the job is aborted, the "Busy" parameter
changes to "FALSE" and "CommandAborted" changes to "TRUE".

If the "Execute" parameter was already set to "FALSE" before the job is aborted, the "CommandAborted" parameter
shows the value "TRUE" for only one execution cycle.

1468

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Error during job execution
If an error occurs during execution of the Motion Control job, this is indicated with parameter
"Error" = "TRUE". The signal state of the "Execute" parameter influences the display duration
for the "Error" parameter:
You set "Execute" after the occurrence of the error to "FAL‚Äê
SE".




You set "Execute" before the occurrence of the error to "FAL‚Äê
SE".





([HFXWH
%XV\
'RQH
&RPPDQG
$ERUWHG
(UURU

‚ë†






([HFXWH

(UURU







%XV\




'RQH




&RPPDQG
$ERUWHG




(UURU



W




(UURU










W

The job is started with a positive edge at the "Execute" parameter. Depending on the programming, "Execute" can be
reset to the value "FALSE" during the job or the value "TRUE" can be retained until after completion of the job

‚ë°
‚ë¢

While the job is being executed, the "Busy" parameter shows the value "TRUE".

‚ë£

As long as the "Execute" parameter retains the value "TRUE" after the occurrence of the error, the "Error" parameter also
retains the value "TRUE".

‚ë§

An error occurs during the execution of the job. When the error occurs, the "Busy" parameter changes to "FALSE" and
the "Error" parameter to "TRUE".

If the "Execute" parameter was already set to "FALSE" before the occurrence of the error, the "Error" parameter shows
the value "TRUE" for only one execution cycle.

Motion Control instructions
You can find additional information on the Motion Control instructions of the Kinematics
technology object in the "S7-1500T Kinematics functions" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766463).

Consulte tambi√©n
Position monitoring functions (P√°gina 1610)

Motion Control instructions without "Done" parameter
Motion Control instructions without the "Done" parameter use a special parameter to indicate
that the job objective (e.g. "InVelocity", "InGear") has been achieved. The target state or motion
is stopped until the job is aborted or an error occurs.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1469

Control de movimiento
6.1 Using S7-1500 Motion Control
The following Motion Control instructions have a special parameter for indicating the job status:
Motion Control instruction

Parameter

Validity
S7-1500

S7-1500T

MC_Power

Status

X

X

MC_MoveVelocity

InVelocity

X

X

MC_MoveJog

InVelocity

X

X

MC_GearIn

InGear

X

X

MC_GearInPos

InSync

-

X

MC_CamIn

InSync

-

X

MC_SynchronizedMotionSimula‚Äê
tion

InSimulation

-

X

MC_LeadingValueAdditive

Busy

-

X

MC_MotionInVelocity

Busy

-

X

MC_MotionInPosition

Busy

-

X

MC_TorqueLimiting

InClamping and InLimitation

-

X

MC_KinematicsTransformation

Busy and Valid

-

X

MC_InverseKinematicsTransfor‚Äê
mation

Busy and Valid

-

X

The following Motion Control instructions have no special parameter for indicating the job
status: Feedback is provided via the following tags:
Motion Control instruction

Parameter

Description

MC_MeasuringInputCyclic

Busy

The execution of a measuring job is indicated with
parameter "Busy" = "TRUE". Completed measu‚Äê
ring events are indicated in the corresponding
event counters "<TO>.MeasuredValues.Measu‚Äê
redValue1Counter" and "<TO>.MeasuredVa‚Äê
lues.MeasuredValue2Counter" of the technology
data block.

MC_OutputCam

Busy

The execution of a job is indicated with parameter
"Busy" = "TRUE". The CamOutput tag in the asso‚Äê
ciated technology data block indicates the swit‚Äê
ching state of the output cam.

MC_CamTrack

Busy

The execution of a job is indicated with parameter
"Busy" = "TRUE". The TrackOutput tag in the as‚Äê
sociated technology data block indicates the swit‚Äê
ching state of the output cam.

The behavior of the parameter is shown for various situations using the Motion Control
instruction "MC_MoveVelocity" as an example:

Example "MC_MoveVelocity"
An "MC_MoveVelocity" job is started with a positive edge at the "Execute" parameter. The job
objective is fulfilled when the assigned velocity is reached and the axis travels at constant
velocity. When the assigned velocity is reached and maintained, this is indicated in the
"InVelocity" parameter with the value "TRUE".
The motion of the axis can, for example, be stopped with an "MC_Halt" job.

1470

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

The assigned velocity is reached and maintained
Reaching of the assigned velocity is indicated with parameter "InVelocity" = "TRUE". The
"Execute" parameter has no effect on the display duration for the "InVelocity" parameter.




([HFXWH




%XV\




,Q9HORFLW\



&RPPDQG
$ERUWHG

‚ë°





(UURU

‚ë†





W

The job is started with a positive edge at the "Execute" parameter. Depending on the programming, "Execute" can be
reset to the "FALSE" value before or after the parameterized velocity has been reached. While the job is being executed,
the parameter "Busy" shows the value "TRUE".
When the assigned velocity is reached, the "InVelocity" parameter changes to "TRUE". The "Busy" and "InVelocity"
parameters retain the value "TRUE" until another Motion Control job overrides the "MC_MoveVelocity" job.

The job is aborted before the assigned velocity is reached
If the Motion Control job is canceled by another job before the assigned velocity is reached, this
is indicated with parameter "CommandAborted" = "TRUE". The signal state of the "Execute"
parameter influences the display duration for the "CommandAborted" parameter.
You set "Execute" after the job is canceled to "FALSE".




You set "Execute" before the job is aborted to "FALSE".





([HFXWH
%XV\
,Q9HORFLW\
&RPPDQG
$ERUWHG
(UURU









([HFXWH

$ERUW



%XV\




,Q9HORFLW\




&RPPDQG
$ERUWHG





Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

(UURU
W




$ERUW










W

1471

Control de movimiento
6.1 Using S7-1500 Motion Control

‚ë†

The job is started with a positive edge at the "Execute" parameter. Depending on the programming, "Execute" can be
reset to the value "FALSE" during the job or the value "TRUE" can be retained until after the job is aborted.

‚ë°
‚ë¢

While the job is being executed, the "Busy" parameter shows the value "TRUE".

‚ë£

As long as the "Execute" parameter retains the value "TRUE" after completion of the job, the "CommandAborted"
parameter also retains the value "TRUE".

‚ë§

During job execution, the job is aborted by another Motion Control job. When the job is aborted, the "Busy" parameter
changes to "FALSE" and "CommandAborted" changes to "TRUE".

If the "Execute" parameter was already set to "FALSE" before the job is aborted, the "CommandAborted" parameter
shows the value "TRUE" for only one execution cycle.

An error has occurred prior to reaching the assigned velocity
If an error occurs during execution of the Motion Control job before the assigned velocity has
been reached, this is indicated with parameter "Error" = "TRUE". The signal state of the
"Execute" parameter influences the display duration for the "Error" parameter.
You set "Execute" after the occurrence of the error to "FAL‚Äê
SE".




You set "Execute" before the occurrence of the error to "FAL‚Äê
SE".





([HFXWH
%XV\
,Q9HORFLW\
&RPPDQG
$ERUWHG
(UURU

‚ë†







([HFXWH

(UURU



%XV\




,Q9HORFLW\




&RPPDQG
$ERUWHG







(UURU
W




(UURU










W

The job is started with a positive edge at the "Execute" parameter. Depending on the programming, "Execute" can be
reset to the value "FALSE" during the job or the value "TRUE" can be retained until after the error has occurred.

‚ë°
‚ë¢

While the job is being executed, the "Busy" parameter shows the value "TRUE".

‚ë£

As long as the "Execute" parameter retains the value "TRUE" after completion of the job, the "Error" parameter also
retains the value "TRUE".

‚ë§

An error occurs during the execution of the job. When the error occurs, the "Busy" parameter changes to "FALSE", and
the "Error" parameter to "TRUE".

If the "Execute" parameter was already set to "FALSE" before the job is aborted, the "Error" parameter shows the value
"TRUE" for only one execution cycle.

1472

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Motion Control instructions
You can find additional information on the Motion Control instructions of the Kinematics
technology object in the "S7-1500T Kinematics functions" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766463).

Motion Control instruction "MC_MoveJog"
An "MC_MoveJog" job is started by setting the "JogForward" or "JogBackward" parameter. The
job objective is fulfilled when the assigned velocity is reached and the axis travels at constant
velocity. When the assigned velocity is reached and maintained, this is indicated in the
"InVelocity" parameter with the value "TRUE".
The job is complete when the "JogForward" or "JogBackward" parameter has been set to the
value "FALSE" and the axis has come to a standstill.
The behavior of the parameters in various situations is shown below by way of example.

The assigned velocity is reached and maintained
If the Motion Control job has been performed up to the point of reaching the assigned velocity,
then this is indicated in the "InVelocity" parameter with the value "TRUE".
Jog mode is controlled by the "JogForward" parameter.






Jog mode is controlled by the "JogBackward" parameter.




-RJ%DFNZDUG
%XV\
,Q9HORFLW\
&RPPDQG
$ERUWHG
(UURU

‚ë†
‚ë°
‚ë¢
‚ë£
‚ë§



-RJ)RUZDUG




-RJ%DFNZDUG




%XV\




,Q9HORFLW\




&RPPDQG
$ERUWHG












-RJ)RUZDUG



(UURU
W














W

The job is started by setting the "JogForward" or "JogBackward" parameter.
While the job is being executed, the "Busy" parameter shows the value "TRUE".
When the assigned velocity is reached, the "InVelocity" parameter changes to "TRUE".
When the "JogForward" or "JogBackward" parameter is reset, the motion of the axis ends. The axis decelerates. The
"InVelocity" parameter changes to "FALSE".
If the axis has come to a standstill, then the Motion Control job is complete and the "Busy" parameter changes to "FALSE".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1473

Control de movimiento
6.1 Using S7-1500 Motion Control

The job is aborted during execution
If the Motion Control job is canceled during processing by another job, this is indicated in the
"CommandAborted" parameter with the value "TRUE". The behavior of the
"CommandAborted" parameter is independent of reaching the assigned velocity.
Jog mode is controlled by the "JogForward" parameter.




Jog mode is controlled by the "JogBackward" parameter.





-RJ)RUZDUG
-RJ%DFNZDUG
%XV\
,Q9HORFLW\
&RPPDQG
$ERUWHG
(UURU






$ERUW

-RJ)RUZDUG




-RJ%DFNZDUG




%XV\




,Q9HORFLW\




&RPPDQG
$ERUWHG







(UURU
W



$ERUW













W

‚ë†
‚ë°
‚ë¢

The job is started by setting the "JogForward" or "JogBackward" parameter.

‚ë£

When the "JogForward" or "JogBackward" parameter is reset, the "CommandAborted" parameter likewise changes to
"FALSE".

While the job is processing, the "Busy" parameter shows the value "TRUE".
During job execution, the job is aborted by another Motion Control job. When the job is aborted, the "Busy" parameter
changes to "FALSE" and "CommandAborted" changes to "TRUE".

1474

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

An error occurs during the execution of the job
If an error occurs during execution of the Motion Control job, this is indicated in the "Error"
parameter with the value "TRUE". The behavior of the "Error" parameter is independent of
reaching the assigned velocity.
Jog mode is controlled by the "JogForward" parameter.




Jog mode is controlled by the "JogBackward" parameter.





-RJ)RUZDUG
-RJ%DFNZDUG
%XV\
,Q9HORFLW\
&RPPDQG
$ERUWHG
(UURU

‚ë†
‚ë°
‚ë¢
‚ë£




(UURU





-RJ)RUZDUG




-RJ%DFNZDUG




%XV\




,Q9HORFLW\




&RPPDQG
$ERUWHG




(UURU



W



(UURU













W

The job is started by setting the "JogForward" or "JogBackward" parameter.
While the job is being executed, the "Busy" parameter shows the value "TRUE".
An error occurs during the execution of the job. When the error occurs, the "Busy" parameter changes to "FALSE", and
"Error" changes to "TRUE".
When the "JogForward" or "JogBackward" is reset to the value "FALSE", the "Error" parameter likewise changes to
"FALSE".

Ending Motion Control jobs
When a job is ended, a distinction is made between error-free completion of the job and a
motion abort.

Completion of job
The completion of a Motion Control job is indicated as described in the "Tracking running jobs
(P√°gina 1465)" section.

Job termination
The termination and the substitution behavior are described in the section "Substitution
behavior of Motion Control jobs". Special pending jobs can be cancelled with "MC_Power".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1475

Control de movimiento
6.1 Using S7-1500 Motion Control

Motion abort
If a motion must be aborted, you can perform the following measures:
‚óè Execute "MC_Halt" or "MC_Stop"
To abort a motion and stop the axis, you can use the "MC_Halt" instruction or "MC_Stop"
instruction.
‚óè Disable "MC_Power"
In an emergency, you can stop the axis via an emergency stop ramp. To do so, set the
"Enable" parameter of the "MC_Power" instruction to "FALSE". The axis is decelerated
according to the selected "StopMode" and all jobs for the technology object are aborted.

Measuring job abort
With the Motion Control instruction "MC_AbortMeasuringInput", an active one-time or cyclic
measuring job is aborted.

Cancellation of an active output cam/cam track
‚óè "MC_OutputCam"
An active output cam is disabled when the "Enable" parameter of Motion Control instruction
"MC_OutputCam" is set to "FALSE".
‚óè "MC_CamTrack"
An active cam track is disabled when the "Enable" parameter of Motion Control instruction
"MC_CamTrack" is set to "FALSE".

Restart of technology objects
After the CPU is switched on, or after technology objects are downloaded into the CPU, the
system automatically initializes the technology objects with the start values from the technology
data block. If restart-relevant changes are detected during a reload into the CPU, a restart of
the technology object is automatically performed.
If restart-relevant data have been changed in RUN mode by the user program, then the
technology object must be reinitialized by the user in order for the changes to be used. At a RUN
‚Üí STOP transition, the CPU automatically performs a restart of technology objects with restartrelevant changes.
If changes in the technology data block should also be retained after the restart of the
technology object, then you must write the changes to the start value in load memory using the
extended instruction "WRIT_DBL".

Restart required
If a restart of the technology object is required, this is indicated at "Technology object >
Diagnostics > Status and error bits > Axis status or Encoder status > Online start value
changed", as well as in the tag "<TO>.StatusWord.X3 (OnlineStartValuesChanged)" of the
technology object.

1476

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Restarting a technology object
A restart of the technology object is triggered by the user by means of the "MC_Reset" Motion
Control instruction, with parameter "Restart" = TRUE.
During a restart, all configuration data of the technology object are loaded from load memory
into work memory. In the process, the actual values in the technology data block are
overwritten.
Note the following during a restart of the technology object:
‚óè A restart resets the "Homed" status of a technology object with incremental actual values
("<TO>.StatusWord.X5 (HomingDone)").
‚óè While a restart is being performed, the technology object cannot perform any jobs. An active
restart will be indicated under "Technology object > Diagnostics > Status and error bits >
Axis status or Encoder status > Restart active", and in the "<TO>.StatusWord.X2
(RestartActive)" tag of the technology object.
‚óè Motion Control jobs are rejected during a restart with the "Error" = TRUE and "ErrorID" =
16#800D parameters (job not executable, because a restart is active).
‚óè While a restart is being executed, you cannot access the technology data block.

Consulte tambi√©n
Change restart-relevant data (P√°gina 1456)

6.1.1.6

Downloading to CPU
When downloading to the CPU S7-1500, it is always verified that the project files are consistent
online and offline after the download.
The data of the technology objects are saved in technology data blocks. The conditions for
downloading blocks thus apply when loading new or modified technology objects.

Load in RUN mode
When loading in the CPU's RUN mode, it is checked whether a load without restart of the
technology objects is possible.
If restart-relevant configuration values were changed, then a restart of the technology object is
automatically performed after the load into the CPU.
Loading a technology object is only possible if the technology object is disabled.
You cannot download the following changes to the CPU in RUN mode:
‚óè Changes to the MC-Servo clock speeds
‚óè Changes to the hardware interface of the technology object in "Technology object >
Configuration > Hardware interface"

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1477

Control de movimiento
6.1 Using S7-1500 Motion Control

6.1.1.7

Commissioning
The following guidelines describe the steps that you should note when commissioning the
Motion Control-specific components of your equipment.
The commissioning of other components of your automation system depends on the particular
equipment configuration. Commissioning (not Motion Control) is described in the "Automation
System S7-1500" (https://support.automation.siemens.com/WW/view/en/59191792) system
manual.

Commissioning guidelines
These guidelines serve as recommendations for commissioning equipment with Motion
Control. The procedure is described using the example of a positioning axis technology object.

Requirement
‚óè The configuration of the following components is complete:
‚Äì CPU
‚Äì BUS communication
‚Äì Drives
‚Äì Technology objects
‚óè The user program has been created.
‚óè The wiring of the CPU and of the associated I/O is complete.
‚óè The commissioning and optimization of the drive is complete.

Procedure
Proceed as follows to commission the Motion Control-specific components of your equipment:
Step

Action to be performed

Supported by TIA Portal

Turn on CPU

Turn on the power supply and the CPU.

-

"Disable" position con‚Äê
troller

Set the gain (Kv factor) of the position control loop to zero.

"Technology object > Configura‚Äê
tion > Extended parameters >
Control loop"

Activate precontrol

Set the precontrol to 100 %.

"Technology object > Configura‚Äê
tion > Extended parameters >
Control loop"

Load project into the
CPU

Bring the CPU to the STOP mode.

‚óè "Toolbar > Stop CPU"

Create online connec‚Äê
tion to the CPU

Select the "Receive messages" check box under "Online & Diag‚Äê ‚óè Device configuration
nostics > Online Access".
‚óè "Online & Diagnostics >
Configure the interface of the TIA Portal and create an online
Online Access"
connection with the CPU.

1478

(This setting avoids unwanted drive movements that may be
caused by incorrect parameterization of the position control
loop.)

Download your project to the CPU (load hardware and software). ‚óè "Toolbar > Download to
device"

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Step

Action to be performed

Supported by TIA Portal

Disable Motion Control
specific user program

In order to avoid conflicts with the axis control panel, lock the
enabling of technology objects in your user program (MC_Po‚Äê
wer.Enable = FALSE).

‚óè PLC programming

Evaluating pending
messages

Evaluate the message display in the inspector window. Resolve
the causes of pending technology alarms. Acknowledge
the technology alarms (P√°gina 1481).

"Inspector window > Diagnos‚Äê
tics > Message display"

Check hardware limit
switches

Click the hardware limit switches. Check for correct message
display (technology alarm 531). Acknowledge the technology
alarm.

"Inspector window > Diagnos‚Äê
tics > Message display"

Check the connection
and configuration of the
drive (setpoint)

Bring the CPU into the RUN mode. Open the Axis control panel
and take over control.

"Technology object > Commis‚Äê
sioning > Axis control panel"

‚óè Motion Control instructions

Perform the following steps:
‚óè Enable the technology object.
‚áí The drive must turn itself on, and where applicable release
the brake. The position is held.
‚óè Move the axis in jog mode at low velocity in the positive
direction.
‚áí The drive must move. The actual position value must
increase (positive direction).
‚óè Disable the technology object.
‚áí The drive must turn itself off, and where applicable apply
the brake.

Check the connection
and configuration of the
encoder (actual value)

‚óè Check the scaling of the actual values (rotation direction,
distance evaluation, and resolution of the encoder)
‚áí The change in the actual mechanical position must match
the change in the actual values. In case of deviations, correct
the parameters assigned for mechanics under "Technology
object > Extended parameters > Mechanics".
‚óè For absolute encoders, check the absolute encoder
adjustment. To do this, move the axis to the start of the
traversing range and switch the system off. After the restart,
check the actual encoder values for correctness. Repeat this
step likewise at the traversing range end. If there are
deviations, correct the following:
‚Äì

Settings for fine resolution under "Technology object >
Data exchange with encoder"

‚Äì

Zero-crossing position of the encoder (only for "Absolute"
encoder type)
The position of the zero crossing can be changed by
rotating the encoder in the dismantled state. With
programmable encoders, the zero crossing can be
adjusted by parameter assignment. The zero crossing
must be outside the traversing range.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

‚óè "Technology object >
Diagnostics > PROFIdrive
telegram"
‚óè "Technology object >
Commissioning > Axis
control panel"

1479

Control de movimiento
6.1 Using S7-1500 Motion Control
Step

Action to be performed

Supported by TIA Portal

Checking the reference
speed

Traverse the axis in jog mode at low velocity in the positive di‚Äê
rection.

‚óè "Technology object >
Hardware interface > Data
exchange"

‚áí The displayed current velocity must match the velocity set‚Äê
point.

Optimize position con‚Äê
troller

If the displayed current velocity deviates significantly from the
velocity setpoint, adjust the reference speed.

‚óè "Technology object >
Commissioning > Axis
control panel"

Use the Optimization commissioning function to optimize the
gain (Kv) of the position control loop.

"Technology object > Commis‚Äê
sioning > Optimization"

For this purpose, adapt following error limits as needed.
Transfer the gain Kv to
the project.

Enter the gain Kv that you determined by means of the optimi‚Äê
zation function in your configuration data. Load your project into
the CPU.

"Technology object > Configura‚Äê
tion > Extended parameters >
Control loop"

Enable Motion Control
specific user program

Unlock the enabling technology objects lock in your user pro‚Äê
gram (MC_Power.Enable = TRUE).

‚óè PLC programming

Check the functioning
of the user program

Check the programmed functions of your user program.

‚óè Watch and force tables

End of commissioning
for a positioning axis
technology object

To commission additional technology objects, perform the co‚Äê
rresponding steps again.

‚óè Motion Control instructions
‚óè Online and diagnostic
functions
See above.

Consulte tambi√©n
S7-1500/S7-1500T Axis functions (https://support.industry.siemens.com/cs/ww/en/view/
109766462)

6.1.1.8

Diagnostics
The "Diagnostics" section is limited to the description of the diagnostic concept for Motion
Control.
A comprehensive description of the system diagnostics of the S7‚Äë1500 CPU can be found in the
"Diagnostics" function manual (https://support.industry.siemens.com/cs/ww/en/view/
59192926).

Diagnostic concept
The diagnostic concept encompasses alarms and associated messages, as well as error
messages in the Motion Control instructions. The TIA Portal also supports you with consistency
checks during configuration of the technology objects, and during the creation of your user
program.
All alarms in runtime (from the CPU, technology, hardware etc.) are displayed in the Inspector
window of the TIA Portal. Diagnostic information that relates to technology objects (technology
alarms, status information) are additionally displayed in the Diagnostics window of the
respective technology object.

1480

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
During motion control, if an error occurs at a technology object (e.g. approaching a hardware
limit switch), then a technology alarm (P√°gina 1481) is triggered, and a corresponding message
is displayed in the TIA Portal as well as on HMI devices.
In your user program, technology alarms are generally signaled via error bits in the technology
data block. The number of the technology alarm with the highest priority is also displayed. In
order to simplify error evaluation, the "Error" and "ErrorID" parameters of the Motion Control
instructions also indicate that a technology alarm is pending.
Program errors (P√°gina 1484) can occur during parameter assignment or during the
processing sequence of the Motion Control instructions (e.g. invalid parameter specification
when calling the instruction, initiation of a job without enable via "MC_Power"). Motion Control
instruction errors are indicated at the call of instructions using the "Error" and "ErrorID"
parameters.

Technology alarms
If an error occurs at a technology object (e.g. approaching a hardware limit switch), a
technology alarm is triggered and indicated. The impact of a technology alarm on the
technology object is specified by the alarm reaction.

Alarm classes
Technology alarms are divided into three classes:
‚óè Acknowledgeable warning
The processing of Motion Control job is continued. The current motion of the axis can be
influenced, e.g. by limiting the current dynamic values to the configured limit values.
‚óè Alarm requiring acknowledgment
Motion jobs are aborted in accordance with the alarm reaction. You must acknowledge the
alarms in order to continue execution of new jobs after eliminating the cause of the error.
‚óè Fatal error
Motion jobs are aborted in accordance with the alarm reaction.
To be able to use the technology object again after eliminating the cause of the error, you
must restart the technology object (P√°gina 1476).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1481

Control de movimiento
6.1 Using S7-1500 Motion Control

Display of technology alarms
A technology alarm is displayed in the following locations:
‚óè TIA Portal
‚Äì "Technology object > Diagnostics > Status and error bits"
Display of pending technology alarms for each technology object.
‚Äì "Technology object > Commissioning > Axis control panel"
Display of the last pending technology alarm for each technology object.
‚Äì "Inspector window > Diagnostics > Message display"
Select the "Receive messages" check box under "Online & Diagnostics > Online
Access" in order to display technology alarms via the message display.
With an online connection to the CPU, the pending technology alarms for all technology
objects are displayed. Additionally, the archive view is available to you.
The message display can also be activated and displayed on a connected HMI.
‚Äì "CPU > Online & diagnostics"
Display of the technology alarms that have been entered in the diagnostic buffer.
‚óè User program
‚Äì Tags "<TO>.ErrorDetail.Number" and "<TO>.ErrorDetail.Reaction"
Indication of the number and the reaction of the technology alarm with the highest priority.
‚Äì Tag "<TO>.StatusWord"
A pending technology alarm is indicated with bit 1 ("Error").
‚Äì Tag "<TO>.ErrorWord"
Indication of alarms and fatal errors.
‚Äì Tag "<TO>.WarningWord"
Indication of warnings.
‚Äì Parameter "Error" and "ErrorID"
In a Motion Control instruction, the parameters "Error" = TRUE and "ErrorID" = 16#8001
indicate that a technology alarm is pending.
‚óè Display of the CPU
In order to show technology alarms on the CPU display, make the following setting when
loading to the CPU:
In the "Load preview" dialog, select the action "Consistent download" for the "Text libraries"
entry.

Alarm reaction
A technology alarm always contains an alarm reaction, which describes the impact on the
technology object. The alarm reaction is specified by the system.
The following table shows possible alarm reactions:
Alarm reaction

Description

Axes (speed axis, positioning axis, synchronous axis)
No reaction (warnings only)
<TO>.ErrorDetail.Reaction = 0

1482

The processing of Motion Control job is continued. The current motion of the axis
can be influenced, e.g. by limiting the current dynamic values to the configured limit
values.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Alarm reaction

Description

Stop with current dynamic values

Active motion commands are aborted. The axis is braked with the dynamic values
that present in the Motion Control instruction and brought to a standstill.

<TO>.ErrorDetail.Reaction = 1
Stop with maximum dynamic values
<TO>.ErrorDetail.Reaction = 2
Stop with emergency stop ramp
<TO>.ErrorDetail.Reaction = 3
Remove enable
<TO>.ErrorDetail.Reaction = 4
Track setpoints
<TO>.ErrorDetail.Reaction = 5

Active motion commands are aborted. The axis is braked with the dynamic values
configured under "Technology object > Extended parameters > Dynamic limits",
and brought to a standstill. The configured maximum jerk is hereby taken into
account.
Active motion commands are aborted. The axis is braked with the emergency stop
deceleration configured under "Technology object > Extended parameters > Emer‚Äê
gency stop ramp", without any jerk limit, and brought to a standstill.
Active motion commands are aborted. The setpoint zero is output and the enable
is removed. The axis is braked to a standstill according to the configuration in the
drive.
Active motion commands are aborted. The setpoint zero is output. The actual va‚Äê
lues supplied by the drive are automatically tracked as setpoints.

Other technology objects (output cam, cam track, measuring input, cam, external encoder)
No reaction (warnings only)
<TO>.ErrorDetail.Reaction = 0

The processing of Motion Control job is continued. The current motion of the axis
can be influenced, e.g. by limiting the current dynamic values to the configured limit
values.

Terminate processing of the technology
object:

Processing of the technology object is terminated. All running Motion Control jobs
are aborted.

‚óè Output cam
<TO>.ErrorDetail.Reaction = 6
‚óè Cam track
<TO>.ErrorDetail.Reaction = 7
‚óè Measuring input
<TO>.ErrorDetail.Reaction = 8
‚óè Cam
<TO>.ErrorDetail.Reaction = 9
‚óè External encoder
<TO>.ErrorDetail.Reaction = 10

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1483

Control de movimiento
6.1 Using S7-1500 Motion Control

Acknowledging technology alarms
You can acknowledge technology alarms as follows:
‚óè TIA Portal
‚Äì "Technology object > Commissioning > Axis control panel"
Click "Confirm" to acknowledge all alarms and warnings pending for the selected
technology object.
‚Äì "Inspector window > Diagnostics > Message display"
You can acknowledge the alarms and warnings for all technology objects either
individually, or all at once.
‚óè HMI
At an HMI with enabled message display, you can acknowledge the alarms and warnings
for all technology objects either individually, or all at once.
‚óè User program
Acknowledge pending technology alarms for a technology object with the Motion Control
instruction "MC_Reset".

Additional information
You can find a list of the technology alarms and alarm reactions in the "Technology alarms
(P√°gina 1510)" appendix.

Errors in Motion Control instructions
Errors in Motion Control instructions (e.g. invalid parameter value setting) are indicated by the
"Error" and "ErrorID" output parameters.
Under the following conditions, "Error" = TRUE and "ErrorID" = 16#8xxx are indicated for the
Motion Control instruction:
‚óè Illegal status of the technology object, which prevents the execution of the job.
‚óè Invalid parameter assignment of the Motion Control instruction, which prevents the
execution of the job.
‚óè As a result of the alarm reaction for a technology object error.

Error display
If there is a Motion Control instruction error, the "Error" parameter shows the value "TRUE". The
cause of the error is given in the "ErrorID" parameter.
Jobs to the technology object are rejected when "Error" = TRUE. Running jobs are not
influenced by rejected jobs.
If "Error" = TRUE and "ErrorID" = 16#8001 is indicated during job execution, a technology alarm
has occurred. In this case, evaluate the indication of the technology alarm.
If "Error" = "TRUE " is displayed during execution of a "MC_MoveJog" job, the axis is braked
and brought to a standstill. In this case, the deceleration configured for the "MC_MoveJog"
instruction takes effect.

1484

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Acknowledge error
Acknowledging errors in Motion Control instructions is not required.
Restart a job after resolving the error.

Additional information
You can find a list of the ErrorIDs in the "Error detection (P√°gina 1537)" appendix.

6.1.1.9

Technology Version V3.0

Configuring
Configuring the cam technology object
Graphical editor
Structure of Graphical Editor V3.0
The graphical editor is divided into the following areas:
‚óè Toolbar
‚óè Curve diagram

Toolbar
The toolbar at the top of the graphical editor provides you with buttons for the following
functions:
Button

Function

Description

Importing cam from file

See section Importing/exporting cam.

Exporting cam to file

See section Importing/exporting cam.

Edit elements/Move view

‚óè Selecting and moving of individual elements and element
‚óè Moving the view using drag-and-drop
To switch from any tool to the "Edit elements/Move view" tool, press the <Esc>
key.

Activate zoom selection
Activate vertical zoom

Zoom into selected area
Vertical zoom into selected area without horizontal scaling
Alternative: <Ctrl> +drag to ordinate keeping mouse button pressed

Activate horizontal zoom

Horizontal zoom into selected area without vertical scaling
Alternative: <Ctrl> +drag to abscissa keeping mouse button pressed

Zoom in

Enlargement of the display
Alternative: <Ctrl> + mouse wheel up in curve diagram

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1485

Control de movimiento
6.1 Using S7-1500 Motion Control
Button

Function

Description

Zoom out

Reduction of the display
Alternative: <Ctrl> + mouse wheel down in curve diagram

Show all

Display of entire definition and value range

Activate snap grid

Inputs and element end points are aligned to the configurable snap grid and to
other element end points.

Inserting a point

Adding a point to the chart

Inserting a line

Adding a line to the chart

Inserting a sine

Adding a sine element to the chart

Inserting a polynomial

Adding a polynomial to the chart

Inserting an inverse sine

Adding an inverse sine to the chart

View: One chart

Display of one chart with the following curves of the cam opened in the editor:
‚óè Preset curve
‚óè Effective position
‚óè Effective velocity
‚óè Effective acceleration
‚óè Effective jerk

View: Four charts

Display of four charts with the following curves of the cam opened in the editor:
‚óè Chart with setpoint curve and effective position
‚óè Chart with effective velocity
‚óè Chart with effective acceleration
‚óè Chart with effective jerk

Vertical measuring lines

Displaying and moving of vertical measuring lines
Hold down the left mouse button and drag to draw a measuring range. The
vertical position of the measuring lines can be moved.
The function values for the measuring line positions are displayed in the chart.
The difference of the measuring lines is displayed between the measuring lines.
If you position the mouse pointer on a measuring line, the function value is dis‚Äê
played.

Horizontal measuring lines

Displaying and moving of horizontal measuring lines
Hold down the left mouse button and drag to draw a measuring range. The
horizontal position of the measuring lines can be moved.
The function values for the measuring line positions are displayed in the chart.
The difference of the measuring lines is displayed between the measuring lines.
If you position the mouse pointer on a measuring line, the function value is dis‚Äê
played.

Show legend

Showing or hiding of the legend in the curve diagram.
To display values for a specific curve on the ordinate, click on the name of the
corresponding curve in the legend.

1486

Show legend left

Display of the legend on the left side of the curve diagram.

Show legend right

Display of the legend on the right side of the curve diagram.

Show online curve

Display of the cam read back from the CPU (orange)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Curve diagram
In the curve diagram, you enter the elements of the curve and adjust the curve by selecting and
moving elements.
Chart areas outside of the leading value/following value range configured in "Profile > General"
are grayed out. Elements that fall outside are displayed with a warning ("Element is outside the
definition range").
Different curves (position, velocity, acceleration and jerk) can be displayed one above the other
in up to four charts by configuring the graphical view accordingly. If multiple charts are to be
displayed, the height of the charts can be adjusted using the separating lines.
The view can be zoomed in manual mode with <Ctrl> +mouse wheel and <Ctrl> +drag to
abscissa/ordinate with mouse button pressed.
Any calculation problems that may occur are signaled by warning triangles
is displayed in the tooltip of the warning triangle.

. The alarm text

Shortcut menu in the Graphical Editor V3.0
The following table shows the functions in the shortcut menu of the graphical editor:
Function

Description

Show all

Display of entire definition and value range

Zoom in

Enlargement of the display

Zoom out

Reduction of the display

Cut

Removing the selected elements and copying them to the clipboard

Copy

Copying of the selected elements to the clipboard

Paste

Pasting of the elements from the clipboard to the last element

Delete

Deletion of the selected elements
Transitions to existing elements are also deleted.

Paste special

Call of the "Paste elements" dialog

Move

Call of the "Move elements" dialog

Scale

Call of the "Scale elements" dialog

Tabular editor
Shortcut menu in the Tabular Editor V3.0
The following table shows the functions in the shortcut menu of the tabular editor:
Function

Description

Insert row

Insertion of an element (point) in front of the selected element

Add row

Insertion of an element (point) after the selected element

Cut

Removing the selected elements and copying them to the clipboard

Copy

Copying of the selected elements to the clipboard

Paste

Pasting of the elements from the clipboard to the last element

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1487

Control de movimiento
6.1 Using S7-1500 Motion Control
Function

Description

Delete

Deletion of the selected elements
Transitions to existing elements are also deleted.

Paste special

Call of the "Paste elements" dialog

Move

Call of the "Move elements" dialog

Scale

Call of the "Scale elements" dialog

Properties (Inspector window)
Profile Statistics V3.0
The "Statistics" properties window shows an overview of the number of elements of the cam.
A cam can consist of up to 1000 points and up to 50 segments.

Used elements
This area shows the number of used elements of the curve:
Parameters

Description

Points

This field shows the number of used points of the cam.
A cam can consist of up to 1000 points.

Segments

This field shows the number of used segments of the cam.
A cam can consist of up to 50 segments.

The use of points and segments depends on the compilation and configuration of the elements.
The following table shows the use of points and segments per element:
Element

Number of used points

Number of used segments

Point

1

0

Point at a transition with VDI-based optimization 0

0

Line

0

1

Sine

0

1

Polynomial

0

1

Inverse sine

Number of interpolation points con‚Äê 0
figured.
(Properties (Inspector window) >
Element > Parameter > Approxima‚Äê
tion > Number of interpolation
points)
Default: 32

Inverse sine to the right of a transition with VDIbased optimization

Number of interpolation points con‚Äê 0
figured - 1

Transition with system interpolation

0

1488

0

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Element

Number of used points

Number of used segments

Transition with VDI-based optimization
Motion rule
Sine

0

1

Inclined sine

0

1

Polynomial

0

1

Modified acceleration trapezoid
Motion task
Dwell-in-reverse

0

5

Reverse-in-dwell

0

5

Dwell-in-dwell

0

6

Dwell-in-dwell

0

3

Constant velocity-in-constant velo‚Äê
city

0

4

Constant-velocity-in-dwell

0

4

Dwell-in-constant velocity

0

4

Sine line combination

0

3

Harmonic combination

0

3

Modified sine
Motion task

Boundary conditions
The following boundary conditions apply to the input and use of points and segments:
‚óè Points
For points with the same leading values, the point that was entered last or is in a lower part
of the tabular editor becomes effective.
‚óè Segments
‚Äì Gaps between segments are filled with a transition segment.
‚Äì For gaps in the leading value range of less than 1.0E-4, segment end points and
segment start points are pulled together.
‚Äì For gaps in the leading value range greater than 1.0E-4, a new transition segment is
inserted.
‚Äì For overlaps, the new segment is inserted from the start point and used completely.
When the previous segment is defined in excess of the new segment, the previous
segment continues to be used after the end point of the new segment.
‚óè Interpolation points and segments (mixed cams)
When segments and points are defined in the same range, the segment is used.

Configuration Elements - Parameters (polynomial) V3.0
Configure the parameters of the selected element in the "Parameters" configuration window.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1489

Control de movimiento
6.1 Using S7-1500 Motion Control

Parameters
Configure the parameters of the selected polynomial in this area:
Parameters

Description

Leading values of the
polynomial
Start

Configure the start point of the polynomial in the leading value range (definition range) in this field.

End

Configure the end point of the polynomial in the leading value range (definition range) in this field.

Polynomial parameters
Definition by

In the drop-down list, select how the polynomial is defined:
‚óè Coefficients
‚óè Boundary values and point of inflection
‚óè Boundary values and left-side jerk
‚óè Boundary values and right-side jerk
The corresponding parameters are displayed based on the selection.

Coefficients

In these fields, configure the coefficients of the polynomial of degree 6:
P(x) = a6x6 + a5x5 + a4x4 + a3x3 + a2x2 + a1x + a0
The coefficients are shown in scientific notation, e.g. "9.6450617283e-11".

Following value Start

Configure the following value at the start of the polynomial in this field.

Following value End

Configure the following value at the end of the polynomial in this field.

First derivative Start

Configure the first derivative (velocity) for the following value at the start of the polynomial in this field.

First derivative End

Configure the first derivative (velocity) for the following value at the end of the polynomial in this field.

Second derivative - Configure the second derivative (acceleration) for the following value at the start of the polynomial
Start
in this field.
Second derivative - Configure the second derivative (acceleration) for the following value at the end of the polynomial in
End
this field.
Third derivative Start

Configure the third derivative (jerk) for the following value at the start of the polynomial in this field.

Third derivative End

Configure the third derivative (jerk) for the following value at the end of the polynomial in this field.

Leading value of
the point of inflec‚Äê
tion

Configure the leading value of the point of inflection of the polynomial in this field.

Extended parameters

1490

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Parameters
Segment type

Description
In the drop-down list, select whether or not the polynomial is to have a trigonometric component.
When "Polynomial with trigonometric portion" is selected, the corresponding trigonometric parame‚Äê
ters are displayed, as they are with sine. When a sine element is converted to a polynomial, the sine
element is configured as a polynomial with trigonometric portion. The shape of the element is re‚Äê
tained.

Amplitude

Configure the amplitude of the trigonometric component in this field.

Definition by

In the drop-down list, select how the trigonometric component is defined:
‚óè Phase at start and at end
‚óè Phase at start and period length
‚óè Phase at start and frequency
‚óè Period length and phase at end
‚óè Frequency and phase at end
The corresponding parameters are displayed based on the selection.

Phase at start

Configure the phase angle at the start of the trigonometric component in this field.

Phase at end

Configure the phase angle at the end of the trigonometric component in this field.

Period length

Configure the period length of the trigonometric component in this field.

Frequency

Configure the frequency of the trigonometric component in this field.

Configuration elements - Characteristics (transition) V3.0
Configure the parameters of the selected transition in the "Characteristics" configuration
window.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1491

Control de movimiento
6.1 Using S7-1500 Motion Control

Parameters
Configure the settings for optimization of the transition in this area:
Parameters

Description

Interpolation settings of the tran‚Äê
sition
Optimization method

Select the optimization method in the drop-down list.
‚óè System interpolation
The CPU defines the optimization parameters automatically according to the settings
of the system interpolation.
‚óè VDI-based optimization
You adjust the optimization manually. The inputs are applied automatically according
to the VDI Guideline 2143.

Motion task

The transition type is determined from the properties of the adjacent elements of the
transition and displayed in this field.

Continuity at start/end

In the drop-down lists, select which parameter is continuous in the boundary points and is
to be included for optimization.
‚óè Default optimization setting (setting under "Profile > Default optimization settings")
‚óè Position
‚óè Velocity (bumpless)
‚óè Acceleration (jerkless)
‚óè Jerk (jerk continuity permitted on one side only)

Optimization target

In the drop-down list, select the optimization target:
‚óè Default optimization setting (setting under "Profile > Default optimization settings")
‚óè Not specified
‚óè Velocity (Cv)
‚óè Acceleration (Ca)
‚óè Jerk (Cj)
‚óè Minimum dynamic torque (Cmdyn)

Selection of motion rule

1492

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Parameters

Description

Motion rule

In the drop-down list, select the motion rule according to which optimization is to occur.
‚óè Line
‚óè Quadratic parabola
‚óè Sine
‚óè Polynomial
‚óè Inclined sine
‚óè Modified acceleration trapezoid
‚óè Modified sine
‚óè Harmonic combination
‚óè Sine line combination
The selection is automatically limited to the motion rules that can be applied according to
the motion task and the selected boundary conditions. Additional parameters are displa‚Äê
yed depending on the selected motion rule.

Parameter used

In the drop-down list, select the parameters to be included in the optimization:
‚óè Lambda
‚óè Maximum acceleration (Ca)
‚óè Maximum deceleration (Ca*)
The selection is automatically limited to the parameters that can be applied according to
the motion rule.

Lambda

Configure the position of the point of inflection (lambda) for the transition in this field.

Maximum acceleration (Ca)

Configure the maximum acceleration (Ca) for the transition in this field.

Maximum deceleration (Ca*)

Configure the maximum deceleration (Ca*) for the transition in this field.

Characteristic values of the tran‚Äê
sition

The characteristic values of the transition that are relevant according to VDI 2143 are
displayed in this area. The maximum value and the standardized value are displayed for
the following characteristic values:
‚óè Velocity (Cv)
‚óè Acceleration (Ca)
‚óè Deceleration (Ca*)
‚óè Jerk (Cj)
‚óè Dynamic torque (Cmdyn)

Motion jobs according to VDI Guideline 2143
The VDI Guideline 2143 distinguishes between areas of usage and motion transitions:
‚óè Areas of usage correspond to the sequences in a process, which means the inserted
elements of the cam.
‚óè Motion transitions are transitions between areas of usage that are not directly relevant to the
process but must meet specific boundary conditions (e.g. velocity consistency).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1493

Control de movimiento
6.1 Using S7-1500 Motion Control
The VDI Guideline 2143 defines the following areas of usage:
Area of usage

Designation

Properties

Dwell

R

Velocity = 0

Constant velocity

G

Reverse

U

Velocity = 0

Motion

B

Velocity ‚â† 0

Acceleration = 0
Velocity ‚â† 0
Acceleration = 0
Acceleration ‚â† 0
Acceleration ‚â† 0

The following figure shows an example of the areas of usage:

8

*

5

The figure below shows the possible transitions between the areas of usage:

1494

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
5

5

*

8

%

Y 
D 

Y 
D 

Y 
D 

Y 
D 

*
Y 
D 

Y 
D 

Y 
D 

Y 
D 

8
Y 
D 

Y 
D 

Y 
D 
Y 
D 

Y 
D 

Y 
D 
Y 
D 

Y 
D 

Y 
D 
Y 
D 

Y 
D 

Y 
D 

%
Y 
D 

Y 
D 

Y 
D 

Y 
D 

Y 
D 
Y 
D 
Y 
D 
Y 
D 
Y 
D 
Y 
D 
Y 
D 
Y 
D 

Commissioning
Axis control panel
Function and Structure of the Axis Control Panel V3.0
Description
You traverse individual axes with the axis control panel.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1495

Control de movimiento
6.1 Using S7-1500 Motion Control
A user program is not necessary for the operation of the axis control panel. With the axis control
panel, you take over master control for a technology object and control the movements of the
axis.
ADVERTENCIA
Uncontrolled axis motions
During operation with the axis control panel, the axis can execute uncontrolled motions (e.g.
due to erroneous configuration of the drive, or of the technology object). Furthermore, any
synchronized following axis is moved as well when moving a leading axis with the axis control
panel.
Therefore, perform the following protective measures before operation with the axis control
panel:
‚óè Ensure that the EMERGENCY OFF switch is within the reach of the operator.
‚óè Enable the hardware limit switches.
‚óè Enable the software limit switches.
‚óè Ensure that following error monitoring is enabled.
‚óè Make sure that no following axis is coupled to the axis to be moved.
The axis control panel of the speed axis, positioning axis and synchronous axis can be found
in the project tree under "Technology object > Commissioning".
The axis control panel is divided into the following areas:
‚óè Master control
‚óè Axis
‚óè Operating mode
‚óè Modify
‚óè Axis status
‚óè Current values

1496

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The following table lists the elements of the axis control panel:
Area

Element

Master control

Description
In the "Master control" area, you take over master control of the technology object, or
return it to your user program.

"Activate" button With the "Activate" button, you set up an online connection to the CPU and take over
master control for the selected technology object.
‚óè To take over master control, the technology object must be disabled in the user
program.
‚óè Any synchronized following axis is moved as well when moving a leading axis with
the axis control panel.
‚óè If the online connection to the CPU is lost during operation with the axis control
panel, then after the sign of life monitoring has elapsed, the axis will be stopped with
maximum deceleration. In this case, an error message is displayed ("ErrorID" =
16#8013) and the master control is passed back to the user program.
‚óè When you click the "Activate" button, a warning message is displayed. In the
warning, you can adapt the sign-of-life monitoring (100 to 60000 ms).
If the master control of the axis control panel is lost repeatedly without a direct error
message, the online connection to the CPU may be impaired because the
communication load is too high. In this case, the message "Error during
commissioning" is entered in the message display log. Sign-of-life failure between
controller and TIA Portal" is displayed.
To eliminate this error, adapt the sign-of-life monitoring in the warning.
‚óè Until master control is returned, the user program has no influence on the functions
of the technology object. Motion Control jobs from the user program to the
technology object are rejected with error ("ErrorID" = 16#8012: axis control panel
active).
‚óè When master control is taken over, the configuration of the technology object is
adopted. Changes to the configuration of the technology object do not take effect
until master control has been returned. For this reason, make any necessary
changes before master control is taken over.
‚óè If master control has been taken over for the technology object, the axis control
panel is blocked for access by another installation of the TIA Portal (Team
Engineering as of CPU V1.5).
"Deactivate" but‚Äê With the "Deactivate" button, you return master control to your user program.
ton
Axis

In the "Axis" area, enable or disable the technology object.
"Enable" button
"Disable" button

With the "Enable" button, you enable the selected technology object
With the "Disable" button, you disable the selected technology object

Operating mode

Select the required mode in the "Operating mode" drop-down list.

Modify

The "Control" area displays the parameters for traversing with the axis control panel
according to the selected operating mode.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1497

Control de movimiento
6.1 Using S7-1500 Motion Control
Area

Element

Description

Position

Position to which the axis is homed.
(Homing and set home position modes only)

Distance

Distance the axis is traversed.
(Relative positioning mode only)

Target position

Position to which the axis is traversed.
(Absolute positioning mode only)

Velocity/
Velocity or speed at which the axis is traversed.
Velocity setpoint Default: 10% of the default value
(Velocity/speed setpoint, Jog and Positioning modes only)
Acceleration

Acceleration with which the axis is traversed.
Default: 10% of the default value

Deceleration

Deceleration with which the axis is traversed.
Default: 10% of the default value

Jerk

Jerk with which the axis is traversed.
Default: 100% of default value

"Start" button

With the "Start" button, you start a job according to the selected operating mode.

"Forward" button With the "Forward" button, you start a motion in the positive direction according to the
selected operating mode.
"Backward" but‚Äê
ton
"Stop" button
Axis status

With the "Backward" button, you start a motion in the negative direction according to the
selected operating mode.
With the "Stop" button, you cancel a job or stop the axis.
The "Axis status" area displays the status of the axis and the status of the drive.

Drive ready

Drive is ready to execute setpoints.

Error

An error occurred at the technology object.

Enabled

The technology object has been enabled. The axis can be moved with motion jobs.

Homed

The technology object is homed.

More

The "More" link takes you to the window "Technology object > Diagnostics > Status and
error bits".

Active errors

The error that occurred most recently is displayed in the "Active errors" text field.

"Confirm" button

With the "Confirm" button, you acknowledge pending errors.

Current values

The "Current values" area shows the actual values of the axis.
Position

Actual position of the axis

Velocity

Actual velocity of the axis

Nota
No transfer of the parameters
The configured parameter values are discarded when master control is returned. Transfer the
values as needed into your configuration.
If you have changed configuration values with the axis control panel during operation, they
have no effect on the operation of the axis control panel.

1498

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Operating mode
The following table shows the operating modes of the axis control panel:
Operating mode

Description

Homing

This function corresponds to active homing. The parameters for homing must be configured.
Homing is not possible with an absolute encoder. The technology object is not referenced when this
mode is used with an absolute encoder.

Set home position

This function corresponds to direct homing (absolute).
With the "Start" button, you set the actual position to the value specified in "Position" and the "Ho‚Äê
med" status is set.

Jog

Motion commands occur by means of jogging.
With the "Forward" or "Backward" button you start motion in the positive or negative direction. The
motion runs for as long as you hold down the left mouse button.

Velocity specification/
speed setpoint

The axis is moved at the specified velocity or speed until you stop the movement.

Positioning relative

The positioning is executed as a controlled, relative traversing motion according to the defaults
assigned under "Controller".

Positioning absolute

The positioning is executed as a controlled, absolute traversing motion according to the defaults
assigned under "Controller".

The motion commands are performed according to the setpoints assigned under "Controller".

If you have enabled the "Modulo" setting of the technology object, the buttons "Forward" and
"Backward" are shown in the "Controller" area. The axis is positioned within the modulo range.
Position settings outside the modular range are recalculated to the modulo range.
If you have not enabled the "Modulo" setting of the technology object, only the "Start" button is shown
in the "Controller" area. You can directly approach the entered position.

Optimization
Function and Structure of Optimization V3.0
Description
The "Optimization" function supports you in determining the optimal precontrol and gain (Kv
factor) for the closed loop position control of the axis. The axis velocity profile is recorded by
means of the Trace function for this purpose for the duration of a configurable positioning
movement. You can then evaluate the recording, and adjust the precontrol and gain
accordingly.
The "Optimization" function for the positioning axis and synchronous axis technology objects
can be found in the project tree under "Technology object > Commissioning".
The "Tuning" dialog is divided into the following areas:
‚óè Master control
‚óè Axis
‚óè Measurement configuration
‚óè Optimize position controller

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1499

Control de movimiento
6.1 Using S7-1500 Motion Control
‚óè Run measurement
‚óè Trace
The following table lists the elements of optimization:
Area

Element

Description
In the "Master control" area, you take over master control of the technology object, or
return it to your user program.

Master control

"Activate" button With the "Activate" button, you set up an online connection to the CPU and take over
master control for the selected technology object.
‚óè To take over master control, the technology object must be disabled in the user
program.
‚óè Any synchronized following axis is moved as well when moving a leading axis with
the axis control panel.
‚óè If the online connection to the CPU is lost during operation with the axis control
panel, then after the sign of life monitoring has elapsed, the axis will be stopped with
maximum deceleration. In this case, an error message is displayed ("ErrorID" =
16#8013) and the master control is passed back to the user program.
‚óè When you click the "Activate" button, a warning message is displayed. You can
adapt the sign-of-life monitoring here (100 to 60000 ms).
If the master control of the axis control panel is lost repeatedly without a direct error
message, the online connection to the CPU may be impaired because the
communication load is too high. In this case, the message "Error during
commissioning" is entered in the message display log. Sign-of-life failure between
controller and TIA Portal" is displayed.
To eliminate this error, adapt the sign-of-life monitoring in the warning.
‚óè Until master control is returned, the user program has no influence on the functions
of the technology object. Motion Control jobs from the user program to the
technology object are rejected with error ("ErrorID" = 16#8012: axis control panel
active).
‚óè When master control is taken over, the configuration of the technology object is
adopted. Changes to the configuration of the technology object do not take effect
until master control has been returned. For this reason, make any necessary
changes before master control is taken over.
‚óè If master control has been taken over for the technology object, the axis control
panel is blocked for access by another installation of the TIA Portal (Team
Engineering as of CPU V1.5).
"Deactivate" but‚Äê With the "Deactivate" button, you return master control to your user program.
ton
Axis

1500

In the "Axis" area, enable or disable the technology object.
"Enable" button

With the "Enable" button, you enable the selected technology object

"Disable" button

With the "Disable" button, you disable the selected technology object

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Area
Measurement
configuration

Element

Description
In the "Measurement configuration" area, you configure the settings for a test step.

Distance

Travel distance for a test step

Measurement
duration

Time for a test step

"Adapt dynamic
values" check
box

With the "Adapt dynamic values" check box, you enable adaptation of the acceleration
and the maximum velocity.

Acceleration

Presetting of the acceleration for a test step

Maximum velo‚Äê
city

Presetting of the maximum velocity for a test step

Optimize posi‚Äê
tion controller

In the "Optimize position controller" area, you make the settings for optimization of the
controller characteristics.
symbol next to the field. The list of values
You open a list of values using the
contains the following values of the respective parameter:
‚óè Online actual value
‚óè Online start value
‚óè Project start value
Enter the new value in the text field for the actual value. The new value is applied by
clicking the "Forward" or "Backward" button in the "Run measurement" area.
Precontrol

Current percentage velocity precontrol of the position controller

Current speed control loop substitute time
Speed control
loop substitute ti‚Äê With velocity precontrol, a simplified speed control loop model can be generated using
me
the speed control loop substitute time. This prevents overmodulation by the position
controller of the manipulated variable for velocity during the acceleration and decele‚Äê
ration phases. To accomplish this, the position setpoint of the position controller is
delayed by the amount of the speed control loop substitute time in relation to the velocity
precontrol.
Gain
Run measure‚Äê
ment

Trace

Current gain of the position controller (Kv)
In the "Run measurement" area, you perform the test steps.

"Forward" button With the "Forward" button, you start a test step for optimization in the positive direction.
"Backward" but‚Äê
ton

With the "Backward" button, you start a test step for optimization in the negative direc‚Äê
tion.

"Stop" button

You stop a test step with the "Stop" button.
The Trace function is displayed in the lower area of the "Tuning" dialog.
With each test step, a Trace recording of the required parameters is automatically
started and displayed after completion of the test step.
After master control has been returned, the Trace recording is deleted.
You can find a full description of the trace function in the section on using the trace and
logic analyzer function.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1501

Control de movimiento
6.1 Using S7-1500 Motion Control

Nota
No transfer of the parameters
The configured parameter values are discarded after master control is returned.
Transfer the values as needed into your configuration. You can apply the values for the gain,
precontrol and speed control loop substitute time in your configuration using the "Project start
value" value.

Diagnostics
Speed-controlled axis technology object
Status and Error Bits V3.0
Description
You use the "Technology object > Diagnostics > Status and error bits" diagnostic function in the
TIA Portal to monitor the status and error messages for the technology object. The Diagnostics
function is available in online operation.
The meaning of the status and error messages is described in the following tables. The
associated technology object tag is given in parentheses.

Axis status
The following table shows the possible axis status values:
Status

Description

Simulation active

The axis is simulated in the CPU. Setpoints are not output to the drive.

Enabled

The technology object has been enabled. The axis can be moved with motion jobs.
(<TO>.StatusWord.X0 (Enable))

Error

An error occurred at the technology object. Detailed information about the error is available in
the "Error" area, and in the <TO>.ErrorDetail.Number and <TO>.ErrorDetail.Reaction tags of
the technology object.
(<TO>.StatusWord.X1 (Error))

Restart active

The technology object is being reinitialized.
(<TO>.StatusWord.X2 (RestartActive))

Axis control panel active

The axis control panel is active. The axis control panel has master control over the technology
object. The axis cannot be controlled from the user program.
(<TO>.StatusWord.X4 (ControlPanelActive))

Drive ready

Drive is ready to execute setpoints.
(<TO>.StatusDrive.InOperation)

Restart required

1502

Data relevant for the restart has been changed. The changes will not be applied until the
technology object is restarted. (<TO>.StatusWord.X3 (OnlineStartValuesChanged))

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Motion status
The following table shows the possible axis motion status values:
Status

Description

Done (no job running)

No motion job is running for the technology object.
(<TO>.StatusWord.X6 (Done))

Jog

The axis is being moved with a job for jog mode of Motion Control instruction "MC_MoveJog"
or from the axis control panel.
(<TO>.StatusWord.X9 (JogCommand))

Speed setpoint

The axis is traversed with a job with speed setpoint of the Motion Control instruction "MC_Mo‚Äê
veVelocity" or using the axis control panel.
(<TO>.StatusWord.X10 (VelocityCommand))

Constant speed

The axis is moved with constant speed or is stationary.
(<TO>.StatusWord.X12 (ConstantVelocity))

Accelerating

Axis is being accelerated.
(<TO>.StatusWord.X13 (Accelerating))

Decelerating

The axis is being decelerated.
(<TO>.StatusWord.X14 (Decelerating))

Torque limit active

The configured threshold for the force/torque affects the axis.
(<TO>.StatusWord.X27 (InLimitation))

Warnings
The following table shows the possible warnings:
Warning

Description

Configuration

One or several configuration parameters are adjusted internally at a certain time.
(<TO>.WarningWord.X1 (ConfigWarning))

Job rejected

Command cannot be executed.
A Motion Control instruction cannot be executed because necessary requirements have not
been met.
(<TO>.WarningWord.X3 (CommandNotAccepted))

Dynamic limitation

Dynamic values are restricted to the dynamic limits.
(<TO>.WarningWord.X6 (DynamicError))

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1503

Control de movimiento
6.1 Using S7-1500 Motion Control

Error
The following table shows the possible errors:
Error

Description

System

A system-internal error has occurred.
(<TO>.ErrorWord.X0 (SystemFault))

Configuration

Configuration error
One or more configuration parameters are inconsistent or invalid.
The technology object was incorrectly configured, or editable configuration data were inco‚Äê
rrectly modified during runtime of the user program.
(<TO>.ErrorWord.X1 (ConfigFault))

User program

Error in user program at a Motion Control instruction or its use.
(<TO>.ErrorWord.X2 (UserFault))

Drive

Error in the drive.
(<TO>.ErrorWord.X4 (DriveFault))

Data exchange

Communication with a connected device is faulty.
(<TO>.ErrorWord.X7 (CommunicationFault))

I/O

Error accessing a logical address.
(<TO>.ErrorWord.X13 (PeripheralError))

Job rejected

Command cannot be executed.
A Motion Control instruction cannot be executed because necessary requirements have not
been met (e.g. technology object not homed).
(<TO>.ErrorWord.X3 (CommandNotAccepted))

Dynamic limitation

Dynamic values are restricted to the dynamic limits.
(<TO>.ErrorWord.X6 (DynamicError))

Additional information
An option for the evaluation of the individual status bits can be found in the Evaluating
StatusWord, ErrorWord and WarningWord (P√°gina 1455) section.

Motion Status V3.0
Description
You use the "Technology object > Diagnostics > Motion status" diagnostic function in the TIA
Portal to monitor the motion status of the axis. The Diagnostics function is available in online
operation.

1504

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

"Current values" area
The following table shows the meaning of the status data:
Status

Description

Speed setpoint

Speed setpoint of the axis
(<TO>.Velocity)

Speed override

Speed setpoint correction as percentage
The speed setpoint specified in motion control instructions or set by the axis control panel are
superimposed with an override signal and corrected as a percentage. Valid speed correction values
range from 0.0 % to 200.0 %.
(<TO>.Override.Velocity)

"Dynamic limits" area
This area displays the limit values for the dynamic parameters.
The following table shows the meaning of the status data:
Status

Description

Speed

Configured maximum speed
(<TO>.DynamicLimits.MaxVelocity)

Acceleration

Configured maximum acceleration
(<TO>.DynamicLimits.MaxAcceleration)

Deceleration

Configured maximum deceleration
(<TO>.DynamicLimits.MaxDeceleration)

Positioning axis/synchronous axis technology object
Status and Error Bits V3.0
Description
You use the "Technology object > Diagnostics > Status and error bits" diagnostic function in the
TIA Portal to monitor the status and error messages for the technology object. The Diagnostics
function is available in online operation.
The meaning of the status and error messages is described in the following tables. The
associated technology object tag is given in parentheses.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1505

Control de movimiento
6.1 Using S7-1500 Motion Control

Axis status
The following table shows the possible axis status values:
Status

Description

Simulation active

The axis is simulated in the CPU. Setpoints are not output to the drive.
(<TO>.StatusWord.X25 (AxisSimulation))

Enabled

The technology object has been enabled. The axis can be moved with motion jobs.
(<TO>.StatusWord.X0 (Enable))

Position-controlled mode

The axis is in position-controlled mode.
(Inversion of <TO>.StatusWord.X28 (NonPositionControlled))

Homed

The technology object is homed. The relationship between the position in the technology object
and the mechanical position was successfully created.
(<TO>.StatusWord.X5 (HomingDone))

Error

An error occurred at the technology object. Detailed information about the error is available in
the "Error" area, and in the <TO>.ErrorDetail.Number and <TO>.ErrorDetail.Reaction tags of
the technology object.

Restart active

The technology object is being reinitialized.

(<TO>.StatusWord.X1 (Error))
(<TO>.StatusWord.X2 (RestartActive))
Axis control panel active

The axis control panel is active. The axis control panel has master control over the technology
object. The axis cannot be controlled from the user program.
(<TO>.StatusWord.X4 (ControlPanelActive))

Drive ready

Drive is ready to execute setpoints.
(<TO>.StatusDrive.InOperation)

Encoder values valid

The actual encoder values are valid.
(<TO>.StatusSensor[n].State)

Restart required

Data relevant for the restart has been changed. The changes are applied only after a restart of
the technology object.
(<TO>.StatusWord.X3 (OnlineStartValuesChanged))

Status limit switch
The following table shows the possibilities for enabling the software and hardware limit
switches:
Status

Description

Negative SW limit switch ap‚Äê The negative software limit switch was reached.
proached.
(<TO>.StatusWord.X15 (SWLimitMinActive))
Positive SW limit switch ap‚Äê
proached.

The positive software limit switch was reached.
(<TO>.StatusWord.X16 (SWLimitMaxActive))

Negative HW limit switch ap‚Äê The negative hardware limit switch has been approached or overtraveled.
proached.
(<TO>.StatusWord.X17 (HWLimitMinActive))
Positive HW limit switch ap‚Äê
proached.

1506

The positive hardware limit switch has been approached or overtraveled.
(<TO>.StatusWord.X18 (HWLimitMaxActive))

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Motion status
The following table shows the possible axis motion status values:
Status

Description

Done (no job running)

No job active at technology object.
(<TO>.StatusWord.X6 (Done))

Homing job

The technology object executes a homing job of the Motion Control instruction "MC_Home" or
from the axis control panel.
(<TO>.StatusWord.X11 (HomingCommand))

Jog

The axis is being moved with a command for jog mode of Motion Control instruction "MC_Mo‚Äê
veJog".
(<TO>.StatusWord.X9 (JogCommand))

Velocity specification

The axis is traversed with a job with velocity specification of the Motion Control instruction
"MC_MoveVelocity" or from the axis control panel.
(<TO>.StatusWord.X10 (VelocityCommand))

Positioning job

The axis is traversed with a positioning job of Motion Control instruction "MC_MoveAbsolute"
or "MC_MoveRelative" or from the axis control panel.
(<TO>.StatusWord.X8 (PositioningCommand))

Constant velocity

The axis is moved with constant velocity or is stationary.
(<TO>.StatusWord.X12 (ConstantVelocity))

Standstill

The axis is in standstill.
(<TO>.StatusWord.X7 (StandStill))

Accelerating

Axis is being accelerated.
(<TO>.StatusWord.X13 (Accelerating))

Decelerating

The axis is being decelerated.
(<TO>.StatusWord.X14 (Decelerating))

Torque limit active

The configured threshold for the force/torque affects the axis.
(<TO>.StatusWord.X27 (InLimitation))

Synchronization

Synchronous axis only
The axis is synchronized to the leading value of a leading axis.
(<TO>.StatusWord.X21 (Synchronizing))

Synchronous operation

Synchronous axis only
The axis is synchronized and moves synchronously to the leading axis.
(<TO>.StatusWord.X22 (Synchronous))

Warnings
The following table shows the possible warnings:
Warning

Description

Configuration

One or several configuration parameters are adjusted internally at a certain time.
(<TO>.WarningWord.X1 (ConfigWarning))

Job rejected

Command cannot be executed.
A Motion Control instruction cannot be executed because necessary requirements have not
been met.
(<TO>.WarningWord.X3 (CommandNotAccepted))

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1507

Control de movimiento
6.1 Using S7-1500 Motion Control
Warning

Description

Dynamic limitation

Dynamic values are restricted to the dynamic limits.
(<TO>.WarningWord.X6 (DynamicError))

Synchronization

Synchronous axis only
Error during synchronous operation. The leading axis specified for the corresponding Mo‚Äê
tion Control instruction was not configured as a possible leading axis.
(<TO>.WarningWord.X14 (SynchronousError))

Error
The following table shows the possible errors:
Error

Description

System

A system-internal error has occurred.
(<TO>.ErrorWord.X0 (SystemFault))

Configuration

Configuration error
One or more configuration parameters are inconsistent or invalid.
The technology object was incorrectly configured, or editable configuration data were inco‚Äê
rrectly modified during runtime of the user program.
(<TO>.ErrorWord.X1 (ConfigFault))

User program

Error in user program at a Motion Control instruction or its use.
(<TO>.ErrorWord.X2 (UserFault))

Drive

Error in the drive.
(<TO>.ErrorWord.X4 (DriveFault))

Encoder

Error in encoder system.
(<TO>.ErrorWord.X5 (SensorFault))

Data exchange

Communication with a connected device is faulty.
(<TO>.ErrorWord.X7 (CommunicationFault))

I/O

Error accessing a logical address.
(<TO>.ErrorWord.X13 (PeripheralError))

Job rejected

Command cannot be executed.
A Motion Control instruction cannot be executed because necessary requirements have not
been met (e.g. technology object not homed).
(<TO>.ErrorWord.X3 (CommandNotAccepted))

Homing

Error during homing process.
(<TO>.ErrorWord.X10 HomingFault))

Positioning

The positioning axis was not positioned correctly at the end of a positioning motion.
(<TO>.ErrorWord.X12 (PositioningFault))

Dynamic limitation

Dynamic values are restricted to the dynamic limits.
(<TO>.ErrorWord.X6 (DynamicError))

Following error

The maximum permitted following error has been exceeded.
(<TO>.ErrorWord.X11 (FollowingErrorFault))

SW limit switch

A software limit switch has been reached.
(<TO>.ErrorWord.X8 (SwLimit))

1508

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Error

Description

HW limit switch

A hardware limit switch has been reached or overtraveled.
(<TO>.ErrorWord.X9 (HWLimit))

Synchronization

Synchronous axis only
Error during synchronous operation. The leading axis specified for the corresponding Motion
Control instruction was not configured as a possible leading axis.
(<TO>.ErrorWord.X14 (SynchronousError))

Additional information
An option for the evaluation of the individual status bits can be found in the Evaluating
StatusWord, ErrorWord and WarningWord (P√°gina 1455) section.

Motion Status V3.0
Description
You use the "Technology object > Diagnostics > Motion status" diagnostic function in the TIA
Portal to monitor the motion status of the axis. The Diagnostics function is available in online
operation.

"Current values" area
The following table shows the meaning of the status data:
Status

Description

Operative encoder

Operative encoder of the axis

Target position

Current target position of an active positioning job
The target position value is only valid during execution of a positioning job.
(<TO>.StatusPositioning.TargetPosition)

Actual position

Actual position of the axis
If the technology object is not homed, then the value is displayed relative to the position that
existed when the technology object was enabled.
(<TO>.ActualPosition)

Actual velocity

Actual velocity of the axis
(<TO>.ActualVelocity)

Velocity override

Percentage correction of the velocity specification
The velocity setpoint specified in Motion Control instructions or set by the axis control panel is
superimposed with an override signal and corrected as a percentage. Valid velocity correction
values range from 0.0 % to 200.0 %.
(<TO>.Override.Velocity)

"Dynamic limits" area
This area displays the limit values for the dynamic parameters.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1509

Control de movimiento
6.1 Using S7-1500 Motion Control
The following table shows the meaning of the status data:
Status

Description

Velocity

Configured maximum velocity
(<TO>.DynamicLimits.MaxVelocity)

Acceleration

Configured maximum acceleration
(<TO>.DynamicLimits.MaxAcceleration)

Deceleration

Configured maximum deceleration
(<TO>.DynamicLimits.MaxDeceleration)

6.1.1.10

Appendix

Technology alarms
Overview of the technology alarms
The following table shows an overview of the technology alarms and the corresponding alarm
reactions. When a technology alarm occurs, evaluate the entire indicated alarm text, in order
to find the precise cause.

Legend
No.

Number of the technology alarm
(corresponds to <TO>.ErrorDetail.Number)

Reaction

Effective alarm reaction
(corresponds to <TO>.ErrorDetail.Reaction)

Error bit

Bit that is set in "<TO>.ErrorWord" when the technology alarm occurs
A description of the bits can be found in the appendix of the documentation "S7-1500/
S7-1500T Axis functions" (https://support.industry.siemens.com/cs/ww/en/view/
109766462).

Warning bit

Bit that is set in "<TO>.WarningWord" when the technology alarm occurs
A description of the bits can be found in the appendix of the documentation "S7-1500/
S7-1500T Axis functions" (https://support.industry.siemens.com/cs/ww/en/view/
109766462).

Restart

To acknowledge the technology alarm, the technology object must be reinitialized (Res‚Äê
tart).

Diagnostic buffer

The alarm is entered in the diagnostics buffer.

Alarm text

Displayed alarm test (limited)

1510

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

List of the technology alarms
No.

Reaction

Error bit Warning bit

Restart

Diagnos‚Äê
tic buffer

Alarm text

101 Remove enable

X1

-

X

X

Configuration error.

102 Remove enable

X15

-

X

X

Drive configuration adaptation error.

103 Remove enable

X15

-

X

X

Encoder configuration adaptation error.

104 Stop with maximum
dynamic values

X1

-

-

-

SW limit switch specification error.

105 Remove enable

X1

-

X

X

Drive configuration error.

106 Remove enable

X1

-

-

X

Drive connection configuration error.

107 Remove enable

X1

-

X

X

Encoder configuration error.

108 Remove enable

X1

-

-

X

Encoder connection configuration error.

109 Remove enable

X1

-

X

-

Configuration error.

110 No reaction

-

X1

-

-

Configuration is adjusted internally.

111 No reaction

-

X15

-

X

TO and drive configuration inconsistent.

112 No reaction

-

X15

-

X

TO and encoder configuration inconsistent.

113 Remove enable

X2

-

X

-

Isochronous mode not possible.

114 Remove enable

X1

-

X

-

Cross-PLC synchronous operation configura‚Äê
tion error.

201 Remove enable

X0

-

X

X

Internal error.

202 No reaction

X0

-

X

-

Internal configuration error.

203 Remove enable

X0

-

X

-

Internal error.

204 Remove enable

X0

-

-

-

Commissioning error.

304 Stop with emergency
stop ramp

X2

-

-

-

Velocity limit is zero.

305 Stop with emergency
stop ramp

X2

-

-

-

‚óè Limit value of the acceleration is zero.

306 Stop with emergency
stop ramp

X2

-

-

-

Jerk limit is zero.

307 Stop with maximum
dynamic values

X2

-

-

X

‚óè Negative numerical value range of the
position reached.

‚óè Limit value of the deceleration is zero.

‚óè Positive numerical value range of the
position reached.
308 Remove enable

X2

-

-

X

‚óè Negative numerical value range of the
position exceeded.
‚óè Positive numerical value range of the
position exceeded.

321 Stop with emergency
stop ramp
322 No reaction

X3

-

-

-

Axis not homed.

-

X3

-

-

Restart not executed.

323 Remove enable

X3

-

-

-

MC_Home could not be performed.

341 Stop with maximum
dynamic values

X10

-

-

-

Error in homing data.

342 Stop with emergency
stop ramp

X10

-

-

-

Reference output cam/encoder zero mark not
found.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1511

Control de movimiento
6.1 Using S7-1500 Motion Control
No.

Reaction

Error bit Warning bit
-

Restart

Diagnos‚Äê
tic buffer

-

-

Alarm text

343 Remove enable

X1

Homing function not supported by device.

401 Remove enable

X13

-

-

X

Error accessing logical address.

411 Remove enable

X5

-

-

X

Faulty encoder at the logical address.

412 Remove enable

X5

-

-

-

Permitted actual value range exceeded.

421 Remove enable

X4

-

-

X

Faulty drive at the logical address.

431 Remove enable

X7

-

-

X

Faulty communication with device at logical
address.

501 No reaction

-

X6

-

-

Programmed velocity is limited.

502 No reaction

-

X6

-

-

‚óè Programmed acceleration is being limited.
‚óè Programmed deceleration is being limited.

503 No reaction

-

X6

-

-

Programmed jerk is limited.

504 No reaction

-

X6

-

-

Speed setpoint monitoring active.

511 No reaction

-

X6

-

-

Dynamic limits are violated by the kinematics
motion.

X11

-

-

-

Following error.

-

X11

-

-

Warning following error tolerance.

X9

-

-

-

‚óè Positive HW limit switch approached.

521 Remove enable
522 No reaction
531 Remove enable

‚óè Negative HW limit switch approached.
‚óè Illegal free travel direction of active
hardware limit switch.
‚óè HW limit switch polarity reversed, free
travel not possible.
‚óè Both hardware limit switches active,
retraction not possible.
533 Stop with maximum
dynamic values

X8

-

-

-

534 Remove enable

X8

-

-

-

‚óè Negative SW limit switch is crossed.

541 Remove enable

X12

-

-

-

Position monitoring error.

542 Remove enable

X2

-

-

-

Clamping monitoring error: Axis leaving clam‚Äê
ping tolerance window.

550 Track setpoints

X4

-

-

-

Drive-autonomous motion is being executed.

551 No reaction

X2

X6

-

-

Maximum velocity cannot be reached with dri‚Äê
ve/axis parameters.

552 Remove enable

X15

-

-

-

Encoder adaptation error during ramp-up.

601 Stop with maximum
dynamic values

X14

-

-

-

Leading axis is not assigned or defective.

603 Remove enable

X14

-

-

-

Leading axis is not in position-controlled mo‚Äê
de.

608 Stop with maximum
dynamic values

X14

-

-

-

Error during synchronization.

611 Remove enable

X2

-

-

-

The cam specified in the MC_CamIn.Cam pa‚Äê
rameter has not been configured or is not avai‚Äê
lable or is not interpolated.

‚óè Negative SW limit switch approached.
‚óè Positive SW limit switch approached.
‚óè Positive SW limit switch is crossed.

1512

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
No.

Reaction

Error bit Warning bit

Restart

Diagnos‚Äê
tic buffer

Alarm text

612 Remove enable

X2

-

-

-

Specified cam has not been interpolated.

613 Remove enable

X1

-

-

-

Accuracy of leading value is limited.

700 Remove enable

X2

-

-

-

Output cam limiting error.

701 Remove enable

X13

-

-

-

I/O output error.

702 Remove enable

X2

-

-

-

Position value valid.

703 Remove enable

X2

-

-

-

Cam track data faulty.

704 Remove enable

X2

-

-

-

Output cam data faulty.

750 Remove enable

X2

-

-

-

Measuring job not possible during homing of
assigned axis.

752 Remove enable

X2

-

-

-

Validity range of measuring job not recogni‚Äê
zed.

753 Remove enable

X2

-

-

-

Only one measuring input can access an en‚Äê
coder at a time.

754 Remove enable

X2

-

-

-

Measuring input configuration in external de‚Äê
vice is not correct.

755 Remove enable

X13

-

-

-

Measuring job not possible.

758 No reaction

X2

-

-

-

A measuring edge was not evaluated.

900 Remove enable

X2

-

X

-

Invalid leading values.

901 Remove enable

X7

-

-

-

Data transmission error

902 Remove enable

X1

-

-

-

Accuracy of leading value is limited.

Consulte tambi√©n
Technology alarms (P√°gina 1481)

Technology alarms 101-114
Technology alarm 101
Alarm reaction: Remove enable

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1513

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Required
Alarm text

Remedy

Configuration error.
Value in <tag> not allowed.

Adjust the specified value.

Faulty load gear factors.

Adjust the load gear factors in the "<TO>.LoadGear.Nu‚Äê
merator" and/or "<TO>.LoadGear.Denominator" parame‚Äê
ters.

At least one encoder required. Sensor[].existent

Configure at least one encoder.

Sensor[1] must be configured for DSC.

Configure Sensor[1].

Values in Sensor[1..4].Parameter.FineResolutionXist1 and
P979 are not identical.

Set the identical fine resolution on the technology as on
the drive.

Controller parameter incorrect.

Adjust the value of the "<TO>.PositionController.Kv" pa‚Äê
rameter.

PROFIBUS parameter assignment is inconsistent; sum Ti and
To greater than send clock.

Adjust the send clock in the hardware configuration.

Drive or drive telegram type or encoder not suitable for DSC.

Check whether the drive can be operated with DSC and
adjust the drive telegram if required.

TimeOut parameter outside of limits.

Set the monitoring time of the axis control panel to a valid
value.

Simulation.Mode parameter outside of limits.

Set the parameter to a valid value.

Telegram in Actor.Interface.AddressIn and AddressOut are not
identical.

Set the identical drive telegram type for sending and re‚Äê
ceiving direction.

Illegal combination for referencing data incremental. encoder.

Check the active and passive homing settings.

Telegram in Sensor[1..4].Interface.AddressIn and AddressOut
are not identical.

Set the identical encoder telegram type for sending and
receiving direction.

The VREF of the analog output or the bit driver are assigned
several times.

Make sure that different addresses are assigned for all
technology objects in the project.

Technology alarm 102
Alarm reaction: Remove enable

1514

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Required
Alarm text

Remedy

Drive configuration adaptation error.
Drive is not assigned to a SINAMICS device.

The drive adaptation is only available for SINAMICS dri‚Äê
ves.

Drive is not interconnected directly to I/O area.

During configuration of the axis, the logical addresses
were set to a data block or bit memory, for example. The
adaptation is only possible when the encoder has been
directly interconnected to an I/O area.

Adaptation canceled due to insufficient resources.

Check whether your device supports acyclic data com‚Äê
munication according to PROFIdrive.

Parameter does not exist, value unreadable or invalid.
Maximum speed
Maximum torque/force (P1520)
Maximum torque/force (P1521)
Torque resolution
Rated speed
Rated torque
Motor type

Technology alarm 103
Alarm reaction: Remove enable
Restart: Required
Alarm text

Remedy

Encoder configuration adaptation error.
Encoder is not assigned to a SINAMICS device.

The encoder adaptation is only available for SINAMICS
devices and external Siemens encoders.

Encoder is not interconnected directly to I/O area.

During configuration of the axis, the logical addresses
were set to a data block or bit memory address area, for
example. The adaptation is only possible when the enco‚Äê
der has been directly interconnected to an I/O area.

Adaptation canceled due to insufficient resources.

Check whether your device supports acyclic data com‚Äê
munication according to PROFIdrive.

Parameter does not exist, value unreadable or invalid.
Encoder system
Encoder resolution
Encoder fine resolution Gx_XIST1
Encoder fine resolution Gx_XIST2
Encoder revolutions

Technology alarm 104
Alarm reaction: Stop with maximum dynamic values

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1515

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Remedy

SW limit switch specification error.
Neg. SW limit switch greater than pos. SW limit switch.

Change the position of the software limit switches.

Technology alarm 105
Alarm reaction: Remove enable
Restart: Required
Alarm text

Remedy

Drive configuration error.
HW Configuration.

‚óè Connect a suitable device.

The TO needs a smaller servo cycle clock.

‚óè Check the device (I/Os).
‚óè Check the topology of the project.
‚óè Compare the device configuration and the
configuration of the technology object.
‚óè Contact customer service.

Error in internal communication.

‚óè Check the project for consistency and reload the
project into the controller.
‚óè Contact customer service.

Address for drive data does not exist in project.

Check the project for consistency and reload the project
into the controller.

Error during the parameter assignment of the frame for the tor‚Äê Check the interconnection of the SIEMENS additional te‚Äê
que data.
legram 750 (torque data).
Address overlay during sensor interconnection.

Make sure that different addresses are assigned for all
technology objects in the project.

Technology alarm 106
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Drive connection configuration error.
System has no communication with drive.

Internal system error.
‚óè Check the project for consistency and reload the
project into the controller.
‚óè Contact customer service.

Drive not initialized during ramp-up.

‚óè Ensure that the communication between the controller
and drive is established. To do this, evaluate the
"<TO>.StatusDrive.CommunicationOK" parameter
before enabling the axis.
‚óè To enable a technology object, the drive initialization
must be complete. Trigger the job again later.

1516

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Technology alarm 107
Alarm reaction: Remove enable
Restart: Required
Alarm text

Remedy

Encoder configuration error.
HW Configuration

‚óè Connect a suitable device.

The TO needs a smaller servo cycle clock.

‚óè Check the device (I/Os).
‚óè Check the topology of the project.
‚óè Compare the device configuration and the
configuration of the technology object.
‚óè Contact customer service.

Error internal communication.

‚óè Check the project for consistency and reload the
project into the controller.
‚óè Contact customer service.

Address overlay during sensor interconnection.

Make sure that different addresses are assigned for all
technology objects in the project.

Technology alarm 108
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Encoder connection configuration error.
System without communication to encoder.

Internal system error.
‚óè Check the project for consistency and reload the
project into the controller.
‚óè Contact customer service.

Encoder not initialized during ramp-up.

‚óè Ensure that the communication between the controller
and encoder is established. To do this, evaluate the
"<TO>.StatusSensor[1..4].CommunicationOK"
parameter before enabling the axis and also check if
the status of the encoder actual value is
"<TO>.StatusSensor[1..4].State" = VALID (2).
‚óè To enable a technology object, the encoder
initialization must be complete. Trigger the job again
later.

Encoder data address missing in project.

Check the project for consistency and reload the project
into the controller.

Technology alarm 109
Alarm reaction: Remove enable

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1517

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Required
Alarm text

Remedy

Configuration error.
Neg. HW limit switch.

‚óè Connect a suitable device.

Pos. HW limit switch

‚óè Check the device (I/Os).

Reference output cam "Active homing".

‚óè Check the topology of the project.

Reference output cam "Passive homing".
Enable bit for the analog drive interface.

‚óè Compare the device configuration and the
configuration of the technology object.

DriveReady bit of the analog drive interface.

‚óè Contact customer service.

Measurement sensing input is faulty.
Output cam output faulty.

Technology alarm 110
Alarm reaction: No reaction
Restart: Not required
Alarm text

Remedy

Configuration is adjusted internally.
Actor.DriveParameter.MaxSpeed is limited.

‚óè Correct the reference value in the drive and in the
configuration of the technology object to
"<TO>.Actor.MaxSpeed" / 2.
‚óè With analog drive connection, correct the reference
value in the drive and in the configuration of the
technology object to "<TO>.Actor.MaxSpeed" / 1.17.
‚óè The value can be set in the drive, for example, in
p2000 = p1082.

PositioningMonitoring.ToleranceTime is limited.

Change the configuration data.

DynamicDefaults.EmergencyDeceleration is limited.
DriveParameter.ReferenceTorque too small.

Technology alarm 111
Alarm reaction: No reaction

1518

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Remedy

TO and drive configuration inconsistent.
Different telegram.

Match the telegram configuration for the technology ob‚Äê
ject with the telegram configuration in the drive. (P922 in
drive)

Incompatible torque resolution.

Adjust the high torque resolution for the drive.

Application cycle of the drive and servo cycle clock are not the
same.

Adjust the application cycle of the drive in the device con‚Äê
figuration for the PROFIBUS drive.

Application cycle of the drive and processing cycle of the TO
are not the same.
Linear motor configured.

Set round-frame motor (P300) in the drive.

Technology alarm 112
Alarm reaction: No reaction
Restart: Not required
Alarm text

Remedy

TO and encoder configuration inconsistent.
Different telegram type.

Match the telegram configuration for the technology ob‚Äê
ject with the telegram configuration in the encoder.

Encoder is not an absolute encoder.

Configure the encoder for the technology object as an
incremental encoder.

Application cycle of the encoder and servo cycle clock are not
the same.

Adjust the application cycle of the encoder in the device
configuration for the PROFIBUS encoder.

Application cycle of the encoder and processing cycle of the TO
are not the same.

Technology alarm 113
Alarm reaction: Remove enable

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1519

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Required
Alarm text

Remedy

Isochronous mode not possible.

‚óè The configured output for the cam or cam track
technology object or the input for the technology
object measuring input cannot be used in isochronous
mode.
Configure the I/O in the device configuration as
isochronous I/O.
‚óè The maximum permissible bus clock TSend has been
exceeded.
The maximum bus clock for the use of SINAMICS
measuring inputs is up to 8 ms.
‚óè Make sure that the organization block MC-Servo
[OB91] is called synchronously with the bus system.

Technology alarm 114
Alarm reaction: Remove enable
Restart: Required
Alarm text

Remedy

Cross-PLC synchronous operation configuration error.

Check the configuration of the interconnected leading and
following axes. Make sure that all relevant tags are co‚Äê
rrectly configured for cross-PLC synchronous operation.

Technology alarms 201-204
Technology alarm 201
Alarm reaction: Remove enable
Restart: Required
Alarm text

Solution

Internal error.

Contact customer service.

Technology alarm 202
Alarm reaction: No reaction
Restart: Required
Alarm text

Solution

Internal configuration error.

Contact customer service.

1520

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Technology alarm 203
Alarm reaction: Remove enable
Restart: Required
Alarm text

Solution

Internal error.

Contact customer service.

Technology alarm 204
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Solution

Commissioning error.
Connection to the TIA Portal interrupted.

Check the connection properties.

Technology alarms 304-343
Technology alarm 304
Alarm reaction: Stop with emergency stop ramp
Restart: Not required
Alarm text

Remedy

Velocity limit is zero.

Enter a non-zero value for the maximum velocity (Dyna‚Äê
micLimits.MaxVelocity) in the dynamic limits.

Technology alarm 305
Alarm reaction: Stop with emergency stop ramp
Restart: Not required
Alarm text

Remedy

Acceleration/deceleration limit is zero.
Acceleration

Enter a non-zero value for the maximum acceleration
(DynamicLimits.MaxAcceleration) in the dynamic limits.

Deceleration

Enter a non-zero value for the maximum deceleration
(DynamicLimits.MaxDeceleration) in the dynamic limits.

Technology alarm 306
Alarm reaction: Stop with emergency stop ramp

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1521

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Remedy

Jerk limit is zero.

Enter a non-zero value for the maximum jerk (DynamicLi‚Äê
mits.MaxJerk) in the dynamic limits.

Technology alarm 307
Alarm reaction: Stop with maximum dynamic values
Restart: Not required
Alarm text

Remedy

Negative/positive numerical value range of the position reached.
Negative

Enable the "Modulo" setting for the technology object.

Positive

Technology alarm 308
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Negative/positive numerical value range of the position excee‚Äê
ded.
Negative

Enable the "Modulo" setting for the technology object.

Positive

Technology alarm 321
Alarm reaction: Stop with emergency stop ramp
Restart: Not required
Alarm text

Remedy

Axis not homed.

To perform an absolute positioning motion, you must ho‚Äê
me the technology object.

Technology alarm 322
Alarm reaction: No reaction
Restart: Not required
Alarm text

Remedy

Restart not executed.
The technology object is not ready for restart.

Download the project again.

The condition for restart of the technology object is not satisfied. Disable the technology object.

1522

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Technology alarm 323
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

MC_Home could not be performed.

‚óè Enable the "Modulo" setting for the technology object.
‚óè Adjust the position value for use of the Motion Control
instruction "MC_Home".

Technology alarm 341
Alarm reaction: Stop with maximum dynamic values
Restart: Not required
Alarm text

Remedy

Error in homing data.
Approach velocity is zero.

Check the configuration for homing (Homing.Approach‚Äê
Velocity).

Homing velocity is zero.

Check the configuration for homing (Homing.Referencing‚Äê
Velocity).

Technology alarm 342
Alarm reaction: Stop with emergency stop ramp
Restart: Not required
Alarm text

Remedy

Reference cam/encoder zero mark not found.

The reference cam configured for homing was not found
in the traversing range of the axis.

Technology alarm 343
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Homing function not supported by device.

Configure a reference switch input for the pulse generator
output used in the properties of the C-CPU.
("Pulse generators (PTO/PWM) > PTO[n]/PWN[n] > Hard‚Äê
ware inputs/outputs")
When homing across a zero mark, the CPU transfers the
reference switch input as zero mark.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1523

Control de movimiento
6.1 Using S7-1500 Motion Control

Technology alarms 401-431
Technology alarm 401
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Solution

Error accessing logical address.
Invalid address.

‚óè Connect a suitable device.

Input address is invalid.

‚óè Check the device (I/Os).

Output address is invalid.

‚óè Check the topology of the project.
‚óè Compare the device configuration and the
configuration of the technology object.
‚óè Configure the valid hardware limit switch.
‚óè Contact customer service.

Error during parameter assignment of the technology block dri‚Äê Make sure that different addresses are assigned for all
ver.
technology objects in the project.
Address overlay during sensor interconnection.
Address overlay during sensor interconnection.

Technology alarm 411
Alarm reaction: Remove enable

1524

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Solution

Faulty encoder at the logical address.
Alarm message from encoder.

Check the function, connections and I/Os of the encoder.

HW error encoder.
Encoder dirty.
Read error encoder absolute value.

Compare the encoder type in the drive or encoder para‚Äê
meter P979 with the configuration data of the technology
object.

Zero mark monitoring encoder.

Encoder signals error in zero mark monitoring (fault code
0x0002 in Gx_XIST2, see PROFIdrive profile).

Encoder in Parking state.

‚óè Search for the cause of the error in the connected
drive or encoder.
‚óè Check whether the alarm was possibly triggered by a
commissioning action involving the drive or encoder.

Encoder not ready after "MC_Reset".

Before sending the Motion Control instruction "MC_Po‚Äê
wer", check whether the encoder is ready during switch
on.
Check the following tags of the corresponding technology
object:
‚óè <TO>.StatusDrive.CommunicationOK
‚óè <TO>.StatusSensor[1..4].CommunicationOK
‚óè <TO>.StatusSensor[1..4].State

Technology alarm 412
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Permitted actual value range exceeded.
Positive.

Home the axis/encoder in a valid actual value range.

Negative.
Modulo length.

Adjust the modulo length to the utilized encoder.

Technology alarm 421
Alarm reaction: Remove enable

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1525

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Solution

Faulty encoder at the logical address.
Alarm message from drive.

‚óè Check the functions and connections of the drive.

No drive control required.

‚óè Enable and acknowledge safety function in the drive.
You can find more information in the section "Safety
functions in the drive" of the documentation "S7-1500/
S7-1500T Axis functions (https://
support.industry.siemens.com/cs/ww/en/view/
109766462)".

Drive has shut down.
Drive enable not possible.

‚óè In the case of analog connected axes, check if the
"<TO>.StatusDrive.InOperation" tag = TRUE.

Technology alarm 431
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Solution

Faulty communication with device at logical address.
Drive failed.

Check the function, connections and I/Os of the drive.

Signs of life of drive faulty.

‚óè Check the function, connections and I/Os of the drive.
‚óè Compare the clock parameters in the device
configuration (PROFIBUS line, slave OM for drive or
encoder) and the execution system. Tmapc and servo
must be set to the same cycle time.
(Incorrect parameter assignment is indicated by
reason 0x0080.)
‚óè If you call the application cycle of the
MC‚ÄëServo [OB91] reduced to the send clock of a
PROFINET IO system and the technology alarm 431
(Signs of life of drive faulty) is repeatedly shown,
increase the update time of the send clock.

Encoder failed.

Check the function, connections and I/Os of the encoder.

Signs of life of encoder faulty.

‚óè Check the function, connections and I/Os of the
encoder.
‚óè Compare the clock parameters in the device
configuration (PROFIBUS line, slave OM for drive or
encoder) and the execution system. Tmapc and servo
must be set to the same cycle time.

1526

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Technology alarms 501-552
Technology alarm 501
Alarm reaction: No reaction
Restart: Not required
Alarm text

Remedy

Programmed velocity is limited.

‚óè Check the value for the velocity of the Motion Control
instruction.
‚óè Check the configuration of the dynamic limits.

Technology alarm 502
Alarm reaction: No reaction
Restart: Not required
Alarm text

Remedy

Programmed acceleration/deceleration is being limited.
Acceleration

‚óè Check the value for the acceleration of the Motion
Control instruction.
‚óè Check the configuration of the dynamic limits.

Deceleration

‚óè Check the value for the deceleration of the Motion
Control instruction.
‚óè Check the configuration of the dynamic limits.

Technology alarm 503
Alarm reaction: No reaction
Restart: Not required
Alarm text

Remedy

Programmed jerk is limited.

‚óè Check the value for the jerk of the Motion Control
instruction.
‚óè Check the configuration of the dynamic limits.

Technology alarm 504
Alarm reaction: No reaction

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1527

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Remedy

Speed setpoint monitoring active.

‚óè Check the mechanical configuration.
‚óè Check the encoder connection.
‚óè Check the configuration of the speed setpoint
interface.
‚óè Check the configuration of the control loop.
‚óè Check the value for the maximum velocity
(<TO>.DynamicLimits.MaxVelocity).

Technology alarm 511
Alarm reaction: No reaction
Restart: Not required
Alarm text

Remedy

Dynamic limits are violated by the kinematics motion.
Velocity

Reduce the velocity of the kinematics motion.

Acceleration

Reduce the acceleration of the kinematics motion.

Deceleration

Reduce the deceleration of the kinematics motion.

Technology alarm 521
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Following error.

‚óè Check the configuration of the control loop.
‚óè Check the direction signal of the encoder.
‚óè Check the configuration of the following error
monitoring.

Technology alarm 522
Alarm reaction: No reaction
Restart: Not required
Alarm text

Remedy

Warning following error tolerance.

‚óè Check the configuration of the control loop.
‚óè Check the direction signal of the encoder.
‚óè Check the configuration of the following error
monitoring.

1528

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Technology alarm 531
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Pos. HW limit switch reached.

Acknowledge the alarm.
After the acknowledgment, motions in the negative direc‚Äê
tion are allowed.

Neg. HW limit switch reached.

Acknowledge the alarm.
After the acknowledgment, motions in the positive direc‚Äê
tion are allowed.

Illegal free travel direction of active hardware limit switch.

The programmed direction of movement is disabled due
to the active hardware limit switch.
Retract the axis in the opposite direction.

Alarm reaction: Remove enable
Restart: Required
Alarm text

Remedy

HW limit switch polarity reversed, free travel not possible.
Both hardware limit switches active, retraction not possible.

‚óè Check the mechanical configuration of the hardware
limit switch.
‚óè Check the limit switches.
‚óè The error can be acknowledged by switching the
controller off and on or using "MC_Reset" with
"Restart" = TRUE.

Technology alarm 533
Alarm reaction: Stop with maximum dynamic values
Restart: Not required
Alarm text

Remedy

Software limit switch is approached.
Negative

With the current dynamic values, the axis will approach
the negative software limit switch.
For positioning axes, check the position setpoint.
For following axes, check whether the current dynamics
violates the configured dynamic limits.
Move the axis in positive direction away from the negative
software limit switch.

Positive

With the current dynamic values, the axis will approach
the positive software limit switch.
For positioning axes, check the position setpoint.
For following axes, check whether the current dynamics
violates the configured dynamic limits.
Move the axis in negative direction away from the positive
software limit switch

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1529

Control de movimiento
6.1 Using S7-1500 Motion Control

Technology alarm 534
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Software limit switch was overshot.
Negative

The software limit switch was overtraveled.
Acknowledge the alarm.
After the acknowledgment, motions in the positive direc‚Äê
tion are allowed.

Positive

The software limit switch was overtraveled.
Acknowledge the alarm.
After the acknowledgment, motions in the negative direc‚Äê
tion are allowed.

Technology alarm 541
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Position monitoring error.
Target range not reached.

The target range was not reached within the tolerance
time.
‚óè Check the configuration of the position monitoring.
‚óè Check the configuration of the control loop.

Exit target range again.

The target range was exited within the minimum dwell
time.
‚óè Check the configuration of the position monitoring.
‚óè Check the configuration of the control loop.

Technology alarm 542
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Clamping monitoring error: Axis leaving clamping tolerance win‚Äê The axis has executed a motion greater than the permis‚Äê
dow.
sible tolerance at the fixed stop.
Check whether the fixed stop has broken away.

Technology alarm 550
Alarm reaction: Track setpoints

1530

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Remedy

Drive-autonomous motion is being executed.

The drive is performing a motion that was not specified by
the technology object.
Check if a safety function is active in the drive. You can
find more information in the section "Safety functions in
the drive" of the documentation "S7-1500/S7-1500T Axis
functions (https://
support.industry.siemens.com/cs/ww/en/view/
109766459)".

Technology alarm 551
Alarm reaction: No reaction
Restart: Not required
Alarm text

Remedy

Maximum velocity cannot be reached with drive/axis parameters. The configured maximum velocity cannot be reached with
the configured mechanics of the axis.
Check the configuration of the mechanics and the set re‚Äê
ference speed.

Technology alarm 552
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Encoder adaptation error during ramp-up.
Encoder is not assigned to a SINAMICS device.

‚óè The operationally active encoder could not be
adapted. Other encoders that can be used are
configured. Use the encoder switch (MC_SetSensor).
‚óè The encoder set as the operationally active encoder
could not be adapted.
‚óè Specify a different sensor for the initialization of the
technology object.

Encoder is not interconnected directly to I/O area.

During configuration of the axis, the logical addresses
were set to a data block or bit memory address area, for
example. The adaptation is only possible when the enco‚Äê
der has been directly interconnected to an I/O area.

Adaptation canceled due to insufficient resources.

Check whether your device supports acyclic data com‚Äê
munication according to PROFIdrive.

Parameter does not exist, value unreadable or invalid.
Encoder system
Encoder resolution
Encoder fine resolution
Encoder revolutions

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1531

Control de movimiento
6.1 Using S7-1500 Motion Control

Technology alarms 601-613
Technology alarm 601
Alarm reaction: Stop with maximum dynamic values
Restart: Not required
Alarm text

Solution

Leading axis is not assigned or defective.

Configure the possible leading value axes for the follo‚Äê
wing axis under "Configuration > Leading value intercon‚Äê
nections".
For a cross-PLC synchronous operation make sure that
the option "Synchronous to the bus" is selected for the
MC-SERVO OBs of all connected CPUs under "Proper‚Äê
ties > General > Cycle time".

Technology alarm 603
Alarm reaction: No reaction
Restart: Not required
Alarm text

Solution

Leading axis is not in position-controlled mode.

The following axis must be operated in position-controlled
mode for synchronous operation functionality.

Technology alarm 608
Alarm reaction: Stop with maximum dynamic values
Restart: Not required
Alarm text

Solution

Error during synchronization.

Prevent a reversing leading value motion during the
synchronization operation.

Technology alarm 611
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Solution

The cam specified in the MC_CamIn.Cam parameter has not
been configured or is not available.

Configure and interpolate the cam. Restart the job.

Technology alarm 612
Alarm reaction: Remove enable

1532

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Solution

Specified cam has not been interpolated.

Interpolate the cam used for camming with the Motion
Control instruction "MC_InterpolateCam".

Technology alarm 613
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Accuracy of leading value is limited.

Decrease the configured delay time.

Technology alarms 700-758
Technology alarm 700
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Output cam limiting error.
Cam position: OnPosition

The position for the "OnPosition" parameter could not be
calculated.
Invalid positions (e.g. "OnPosition" > "OffPosition") were
calculated due to lead times.
The output cam cannot be switched due to the axis dyna‚Äê
mics and compensation times.

Cam position: OffPosition

The position for the "OffPosition" parameter could not be
calculated.
Invalid positions (e.g. "OffPosition" > "OnPosition") were
calculated due to lead times.
The output cam cannot be switched due to the axis dyna‚Äê
mics and compensation times.

Technology alarm 701
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

I/O output error.

The digital output for the output cam or cam track techno‚Äê
logy object cannot be addressed.
Download the device configuration again.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1533

Control de movimiento
6.1 Using S7-1500 Motion Control

Technology alarm 702
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Position value invalid.

‚óè A Motion Control job "MC_Reset" is being executed
on the axis. Wait until the technology object restart is
complete.
‚óè The encoder values are invalid due to an encoder
error. Check the encoder and adjust the configuration
if necessary.

Technology alarm 703
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Output cam data faulty.
Output cam: Output cam number

Check the configuration of the relevant output cam in the
cam track and adjust the values if necessary.
Examples of a correct configuration:
‚óè "<TO>.Parameter.Cam[1..32].OnPosition" <
"<TO>.Parameter.Cam[1..32].OffPosition"
‚óè "<TO>.Parameter.Cam[1..32].Duration" >
"<TO>.Parameter.OffCompensation" "<TO>.Parameter.OnCompensation"

Technology alarm 704
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Output cam data faulty.

Check the configuration of the output cam and adjust the
values if necessary.
Examples of a correct configuration:
‚óè "MC_OutputCam.OnPosition" <
"MC_OutputCam.OffPosition"
‚óè "MC_OutputCam.Duration" >
"<TO>.Parameter.OffCompensation" "<TO>.Parameter.OnCompensation"

Technology alarm 750
Alarm reaction: Remove enable

1534

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Remedy

Measuring job not possible during homing of assigned axis.

Do not use the motion instructions "MC_Home" and
"MC_MeasuringInput" simultaneously.

Technology alarm 752
Alarm reaction: No reaction
Restart: Not required
Alarm text

Remedy

Validity range of measuring job not recognized.

The measuring range specified in Motion Control instruc‚Äê
tion "MC_MeasuringInput" was not recognized.
Adjust the measuring range.

Technology alarm 753
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Only one measuring input can access an encoder at a time.

Use only one Motion Control instruction "MC_MeasurinIn‚Äê
put" for an encoder.

Technology alarm 754
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Measuring input configuration in external device is not correct.

Check the configuration of the measuring inputs on the
external device.

Technology alarm 755
Alarm reaction: Remove enable

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1535

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Remedy

Measuring job not possible.
Device has reported an error.

The measurement was aborted with error.
Check the measuring input functionality in the utilized de‚Äê
vice

Cyclic measuring is not possible with telegram 39x.

‚óè Use the Motion Control instruction
"MC_MeasuringInput" for starting a one-time
measurement.
‚óè Cyclic measuring is only possible when measuring
using TM Timer DIDQ. Change the configuration of
the measuring input type to "TM Timer DIDQ".

Technology alarm 758
Alarm reaction: None
Restart: Not required
Alarm text

Remedy

A measuring edge was not evaluated.

An edge was already detected at the input of the measu‚Äê
ring input even though the module was not yet ready.
The measured value is provided at the next edge.

Technology alarms 900-902
Technology alarm 900
Alarm reaction: Remove enable
Restart: Required
Alarm text

Solution

Invalid leading values

Check whether the set tolerance time at the parameter
"<TO>.Parameter.ToleranceTimeExternalLeadingVa‚Äê
lueInvalid" was exceeded.
Check the connection of the interconnected components.
Make sure that there is no communication interference.

Technology alarm 901
Alarm reaction: Remove enable

1536

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Solution

Data transmission error
Invalid version

Use a leading value telegram with a valid version.

Invalid modulo start value

Scale the modulo start value of the external leading value
at the parameter "<TO>.StatusExternalLeadingVa‚Äê
lue.ModuloStartValue".

Invalid modulo length

Scale the modulo length of the external leading value at
the parameter "<TO>.StatusExternalLeadingValue.Mo‚Äê
duloLength".

Sign-of-life error

Check the communication.

Invalid position

Check the leading value of the leading axis on the other
CPU.

Invalid velocity
Invalid acceleration

Technology alarm 902
Alarm reaction: Remove enable
Restart: Not required
Alarm text

Remedy

Accuracy of leading value is limited.

Decrease the configured delay time.

Error ID for Motion Control instructions
Errors in Motion Control instructions are signaled using the parameters "Error" and "ErrorID".
Under the following conditions, "Error" = TRUE and "ErrorID" = 16#8xxx are indicated for the
Motion Control instruction:
‚óè Illegal status of the technology object, which prevents the execution of the job.
‚óè Illegal parameter assignment of the Motion Control instruction, which prevents the
execution of the job.
‚óè As a result of the alarm reaction for a technology object error.
The following tables list all "ErrorIDs" that can be indicated for Motion Control instructions. In
addition to the cause of the error, solutions for eliminating the error are also listed:

16#0000 - 16#800F
ErrorID

Description

Remedy

16#0000

No error

-

16#8001

A technology alarm (technology object error)
occurred while processing the Motion Control
instruction.

In the technology data block, an error message is output at the
"ErrorDetail.Number" tag.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

You can find a list of the technology alarms and alarm reactions
in the "Technology alarms (P√°gina 1510)" appendix.

1537

Control de movimiento
6.1 Using S7-1500 Motion Control
ErrorID

Description

Remedy

16#8002

Illegal specification of the technology object

‚óè Check the specification of the technology object for the
"Axis", "Master",
"SlaveOutputCamCamTrackMeasuringInput" or "Cam"
parameter.
‚óè You can use a kinematics technology object only for the
"AxesGroup" parameter.
‚óè With "MC_MeasuringInputCyclic": Specify a valid
measuring input type for parameter "MeasuringInputType".

16#8003

Illegal velocity specification

Specify a permissible value for the velocity for parameter "Ve‚Äê
locity".

16#8004

Illegal acceleration specification

Specify a permissible value for the acceleration for parameter
"Acceleration".

16#8005

Illegal deceleration specification

Specify a permissible value for the deceleration for parameter
"Deceleration".

16#8006

Illegal jerk specification

Specify a permissible value for the jerk for parameter "Jerk".

16#8007

Illegal direction specification

Specify a permissible value for the rotation direction for para‚Äê
meter "Direction" or "SyncDirection".

Invalid entry

Reset both the "JogForward" parameter and the "JogBack‚Äê
ward" parameter.

Both the "JogForward" and "JogBackward"
parameters are set to TRUE at the same ti‚Äê
me. The axis is braked at the last valid dece‚Äê
leration.
16#8008

Invalid distance specification

Set a valid distance value at parameter "Distance".

16#8009

Invalid position specification

Set a valid position value at parameter "Position".

16#800A

Illegal operating mode

Specify a permissible operating mode for parameter "Mode".

16#800B

Illegal stop mode specifications

Specify a permissible value for the stop mode at the "StopMo‚Äê
de" parameter.

16#800C

Only one instance of the instruction per tech‚Äê ‚óè The instruction is called at multiple points in the user
nology object is allowed.
program with identical value for parameter "Axis", "Master",
"Slave" or "Cam".
Ensure that only one instruction with the value for parameter
"Axis", "Master", "Slave" or "Cam" is called.
‚óè The error message can occur through the DB editor
functions "Load snapshot as actual values" or "Load start
values as actual values".
Correct the error of the affected technology data block by
switching the CPU to STOP, re-compiling the affected DB,
and loading it into the device.
You can find additional information in the section
"Diagnostics (P√°gina 1480)".

16#800D

The job is not permitted in the current state.
"Restart" is executed.

While a "Restart" is being performed, the technology object
cannot perform any jobs.
Wait until the "Restart" of the technology object is complete.

1538

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
ErrorID

Description

Remedy

16#800E

If the technology object is enabled, a "Res‚Äê
tart" is not possible.

Before a "Restart", deactivate the technology object with
"MC_Power.Enable"FALSE.

16#800F

The job cannot be executed because the
technology object is locked.

‚óè Enable the technology object with "MC_Power.Enable" =
TRUE. Restart the job.
‚óè A "MC_Stop" job is active with "Execute" = TRUE. Reset the
job with the parameter "Execute" = FALSE.

16#8010 - 16#802F
ErrorID

Description

Remedy

16#8010

Invalid homing mode for incremental encoder Absolute value adjustment is not possible with an incremental
encoder ("Mode" = 6, 7).
Start a homing process for an incremental encoder using para‚Äê
meter "Mode" = 0, 1, 2, 3, 5, 8, 10, 11, 12.

16#8011

Invalid homing mode for absolute encoder

Passive and active homing ("Mode" = 2, 3, 5, 8, 10) are not
possible for an absolute value encoder.
Start a homing process for an absolute encoder using parame‚Äê
ter "Mode" = 0, 1, 6, 7, 11, 12.

16#8012

The job cannot be executed because the axis
control panel is active.

Return master control to your user program. Restart the job.

16#8013

The online connection between the CPU and
the TIA Portal is down.

Check the online connection to the CPU.

16#8014

No internal job memory available.

The maximum possible number of Motion Control job has been
reached.
Reduce the number of jobs to be executed (parameter "Execu‚Äê
te" = FALSE).

16#8015

Error acknowledgment with "MC_Reset" is
not possible. Error in the configuration of the
technology object.

Check the configuration of the technology object.

16#8016

The actual values are not valid.

To execute a "MC_Home" or positioning job, the actual values
must be valid.
Check the status of the actual values. The "<TO>.StatusSen‚Äê
sor[1..4].State" tag of the technology object must show the va‚Äê
lue 2 (valid).

16#8017

Illegal value for gear ratio numerator

Specify a permissible value for the gear ratio numerator for pa‚Äê
rameter "RatioNumerator".
Permitted integer values:
-2147483648 to 2147483647
(value 0 not permitted)

16#8018

Illegal value for gear ratio denominator

Specify a permissible value for the gear ratio denominator for
parameter "RatioDenominator".
Permitted integer values:
1 to 2147483647

16#8019

Job cannot be executed. The specified follo‚Äê Recursive interconnections are not possible. A leading axis
wing axis is the original leading value for the cannot be interconnected as a following axis to its own leading
synchronous operation chain.
value. Specify a permissible following axis for parameter "Sla‚Äê
ve".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1539

Control de movimiento
6.1 Using S7-1500 Motion Control
ErrorID

Description

16#8021

Illegal value for shift of the leading value ran‚Äê Specify a permissible value for the shift of the leading value
ge
range for parameter "MasterOffset".

Remedy

16#8022

Illegal value for shift of the following value
range

Specify a permissible value for the shift of the leading value
range for parameter "SlaveOffset".

16#8023

Illegal value for scaling of the leading value
range

Specify a permissible value for the scaling of the leading value
range for parameter "MasterScaling".

16#8024

Illegal value for scaling of the following value
range

Specify a permissible value for the scaling of the following value
range for parameter "SlaveScaling".

16#8026

Illegal value for leading value distance

Specify a permissible value for the leading value distance for
parameter "MasterStartDistance".

16#8027

Illegal value for use of cam

Specify a permissible value for cyclic/acyclic use of the cam for
parameter "ApplicationMode".

16#8030 - 16#807F
ErrorID

Description

Remedy

16#8034

Illegal value for synchronous position of the
leading axis

Specify a permissible value for the synchronous position of the
leading axis for parameter "MasterSyncPosition".

16#8035

Illegal value for synchronous position of the
following axis

Specify a permissible value for the synchronous position of the
following axis for parameter "SlaveSyncPosition".

16#8036

Illegal value for type of synchronization

Specify a permissible value for the type of synchronization for
parameter "SyncProfileReference".

16#8040

Illegal value for start position of output cam

Specify a permissible value for the start position of the output
cam for parameter "OnPosition".

16#8041

Illegal value for end position of distance out‚Äê
put cam

Specify a permissible value for the end position of the distance
output cam for parameter "OffPosition".

16#8042

Illegal value for switch-on duration of timebased output cam

Specify a permissible value for the switch-on duration of the
time-based output cam for parameter "Duration".

16#8043

Illegal value for force/torque limiting

Specify a value within the permissible range at the "Limit" pa‚Äê
rameter.
Permitted integer values:
-2147483648 to 2147483648

16#8044

The axis is not configured for torque reduc‚Äê
tion.

16#8045

The job cannot be executed because a job for Switchover to non-position-controlled mode is not possible du‚Äê
traveling to fixed stop is active.
ring active travel to fixed stop.

16#8046

The "MC_TorqueLimiting" job cannot be
deactivated in the "InClamping" state.

Retract the axis and deactivate "MC_TorqueLimiting".

16#8047

The motion results in a fixed stop.

Only motions away from the fixed stop are permitted.

16#804A

Illegal value for additive torque setpoint

Specify a permissible value for the additive torque setpoint at
the "Value" parameter.

16#804B

Illegal value for torque high limit

Specify a permissible value for the high limit of the torque at the
"UpperLimit" parameter.

16#804C

Illegal value for torque low limit

Specify a permissible value for the low limit of the torque at the
"LowerLimit" parameter.

1540

Select drive telegram 102, 103, 105 or 106

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
ErrorID

Description

Remedy

16#804D

The value of the high limit of the torque is less
than or equal to the value of the low limit of
the torque.

Adapt the values of the "UpperLimit" and "LowerLimit" parame‚Äê
ters so that the high limit of the torque is greater than the value
of the low limit of the torque.

16#804E

The job cannot be executed because a
"MC_TorqueLimiting" job is active.

Stop the force/torque limit or fixed stop detection. Restart the
"MC_TorqueRange" job.

The job cannot be executed because a
"MC_TorqueRange" job is active.

Exit the setting of the high and low torque limits. Restart the
"MC_TorqueLimiting" job.

16#804F

The axis is not configured for additional tor‚Äê
que values.

Use supplemental telegram 750.

16#8050

Illegal encoder number

Specify a permissible number of the new encoder (1 to 4) for
parameter "MC_SetSensor.Sensor".

16#8051

Illegal number of the reference encoder

Specify a permissible number of the reference encoder for pa‚Äê
rameter "MC_SetSensor.ReferenceSensor".

16#8055

Bit masking not permitted at "MC_SetA‚Äê
xisSTW"

Non-controllable bits are selected in the "STW1 BitMask" and
"STW2 BitMask" bit masks.
Only control permissible bits.

16#805A

Illegal value of the parameter to be changed

At parameter "ParameterNumber", enter a permissible value
for the index of the parameter to be changed.

16#805B

Error in the configuration of the hardware limit Specify a valid tag at the input of the positive/negative hardware
switch.
limit switch.

16#805C

Illegal data type of the value to be written.

Specify a valid data type at the parameter "Value".

16#8062

Illegal approach value

Specify a permissible approach value for the searched for lea‚Äê
ding value for parameter "ApproachLeadingValue".

16#8063

A valid mapping to the definition range (lea‚Äê
ding values) does not exist for the specified
following value.

Specify a permissible following value for parameter "Following‚Äê
Value".

16#8064

A valid mapping to the range of the function
(following values) does not exist for the spe‚Äê
cified leading value.

Specify a permissible leading value for parameter "LeadingVa‚Äê
lue".

16#8070

Illegal value for leading value shift

Specify a permissible value for the leading value shift for para‚Äê
meter "PhaseShift".

16#8071

The job cannot be executed because the axis
is not in position-controlled mode.

Activate position-controlled mode.

16#8074

The job cannot be executed because a
"MC_Home" job is active.

During active or passive homing, an encoder switchover is re‚Äê
jected.

16#8075

The job cannot be executed because no
synchronization operation is active on the
axis.

16#8076

End the simulation of the synchronous operation. Restart the
The job cannot be executed because
synchronization is being simulated at the spe‚Äê job.
cified axis.

Wait until the "MC_Home" job is complete. Restart the job.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Switch on the synchronous operation function. Restart the job.

1541

Control de movimiento
6.1 Using S7-1500 Motion Control

16#80A0 - 16#8FFF
ErrorID

Description

Remedy

16#80A1

The order cannot be executed because a
synchronous operation job is active.

A "MC_Home" job on a following axis is not executed when a
"MC_CamIn" or "MC_GearInPos" job is active.
Exit the synchronous operation job. Restart the job.

16#80A2

‚óè For one-time measuring with measuring Check and adjust the measuring input and adjust the measuring
range positions, if necessary.
range, the measuring range was run
without a measuring edge being detected.
‚óè The measuring range is invalid with the
configured modulo axis settings.

16#80A3

The measuring input job via PROFIdrive te‚Äê
legram could not be started because a ho‚Äê
ming job is active.

Simultaneous execution of a homing job and a measuring input
job via PROFIdrive telegram is not possible.

16#80A5

Illegal value for start position of measuring
range

Specify a permissible value for the start position of the measu‚Äê
ring range for parameter "MC_MeasuringInput.StartPosition" or
MC_MeasuringInputCyclic.StartPosition.

16#80A6

Illegal value for end position of measuring
range

Specify a permissible value for the end position of the measu‚Äê
ring range for parameter "MC_MeasuringInput.EndPosition" or
MC_MeasuringInputCyclic.EndPosition.

16#80A7

A measurement is performed when measu‚Äê Check and adjust the measuring input and adjust the measuring
ring with the measuring range, but the calcu‚Äê range positions, if necessary.
lated position is outside the specified measu‚Äê
ring range. The measured value is discarded.

16#80A8

The job cannot be executed because cam‚Äê
ming is active on the axis.

The Motion Control instructions "MC_PhasingRelative" and
"MC_PhasingAbsolute" can only be applied to active gearing
with "MC_GearIn" or "MC_GearInPos" ("MC_GearIn.InGear" =
TRUE or "MC_GearInPos.InSync" = TRUE).

16#80A9

The job cannot be executed because the fo‚Äê
llowing axis is synchronized ("MC_GearIn‚Äê
Pos.StartSync" = TRUE) or a kinematics mo‚Äê
tion is active.

The Motion Control instructions "MC_PhasingRelative" and
"MC_PhasingAbsolute" can only be applied to active gearing
with "MC_GearIn" or "MC_GearInPos" ("MC_GearIn.InGear" =
TRUE or "MC_GearInPos.InSync" = TRUE).

16#80AA

The cam contains no points or segments and
cannot be interpolated.

Fill the cam with points/segments. Restart the job.

16#80AB

The cam is currently being used and cannot
be interpolated.

End the current use of the cam. Restart the job.

16#80AC

The cam contains incorrect points or seg‚Äê
ments and cannot be interpolated.

Fill the cam with permissible points/segments. Restart the job.

Wait until the homing job has ended. Restart the measuring job
via PROFIdrive telegram.

(for example, the cam contains only one
point.)
16#80AD

The specified synchronous position is outsi‚Äê
de the definition range of the cam.

Specify a permissible synchronous position for parameter "Mas‚Äê
terSyncPosition". Restart the job.

16#80AE

The job cannot be executed because a kine‚Äê End the current kinematic motion. Restart the job.
matic motion is active.

16#8FFF

Unspecified error

Contact your local Siemens representative or support center.
You will find your contact information for digital industries at:
https://www.siemens.com/automation/partner (https://
www.siemens.com/automation/partner)

1542

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte tambi√©n
Errors in Motion Control instructions (P√°gina 1484)

SINAMICS drives
Compatibility list
An overview of drives that can be interconnected with an S7-1500 CPU is available at:
https://support.industry.siemens.com/cs/document/109750431 (https://
support.industry.siemens.com/cs/ww/en/view/109750431)

Homing SINAMICS drives with external zero marks
For SINAMICS drives with external zero mark, synchronization during homing must always
occur on the left side of the external zero mark's signal. That is to say, with a positive direction
of travel synchronization is done on a positive edge, and with a negative direction of travel
synchronization is done on a negative edge.
By inverting the signal, synchronization can also be done on the right sight of the signal of the
external zero mark. The inversion can be configured in the drive using SINAMICS parameter
P490.
Homing to an encoder zero mark or an external zero mark is configured in SINAMICS
parameter P495.

Data types
Data types for the use of technology
The table below contains the data types for reference to the respective technology object:
Data type

Description

TO_Object

Base

TO_SpeedAxis1)

Speed axis

TO_PositioningAxis1)

Positioning axis

TO_SynchronousAxis1)

Synchronous axis

TO_Encoder

External encoder

TO_OutputCam

Output cam

TO_CamTrack

Cam track

TO_MeasuringInput

Measuring input

TO_Cam

Cam (S7-1500T)

1)

1)

TO_Kinematics
TO_LeadingAxisProxy

Kinematics (S7-1500T)
1)

Leading axis proxy (S7-1500T)

PD_TELx

Telegram no. "x"

DX_TEL_SyncOp

Leading value telegram (S7-1500T)

PD_STW1_611Umode

Control word 1 (STW1)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1543

Control de movimiento
6.1 Using S7-1500 Motion Control
Data type

Description

PD_STW2_611Umode

Control word 2 (STW2)

PD_ZSW1_611Umode

Status word 1 (ZSW1)

PD_ZSW2_611Umode

Status word 2 (ZSW2)

1)

Cascading technology objects

Cascading technology objects
The structure of the technology objects is structured as follows:
‚óè "TO_Object" is the basis of all technology objects and a component of the "TO_Axis".
‚óè "TO_Axis" is part of "TO_SpeedAxis", "TO_Encoder" and "TO_LeadingAxisProxy".
‚óè "TO_SpeedAxis" is part of "TO_PositioningAxis".
‚óè "TO_PositioningAxis" is part of "TO_SynchronousAxis".

Consulte tambi√©n
PROFIdrive telegrams (P√°gina 1555)

6.1.2

Using S7-1500/S7-1500T axis functions

6.1.2.1

Introduction

Interplay of the various documents
For a better overview, the documentation of the Motion Control functions is divided into the
following documents:
Documentation

Description

S7-1500/S7-1500T Motion Con‚Äê
trol overview

This documentation describes the general Motion Control func‚Äê
tions independent of technology objects.

Function manual "S7-1500/
S7-1500T Motion Control over‚Äê
view" (https://
support.industry.siemens.com/cs/
ww/en/view/109766459)

1544

Using S7-1500/S7-1500T axis
functions

This documentation describes the Motion Control functions for the
following technology objects:

Function manual "S7-1500/
S7-1500T Axis functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766462)

‚óè Speed axis
‚óè Positioning axis
‚óè External encoder

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Documentation

Description

Using S7-1500/S7-1500T measu‚Äê This documentation describes the Motion Control functions for the
ring input and output cam functions following technology objects:
Function manual "S7-1500/
S7-1500T Measuring input and
output cam functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766466)

‚óè Measuring input

Using S7-1500/S7-1500T
synchronous operation functions

This documentation describes the Motion Control functions for the
following technology objects:

Function manual "S7-1500/
S7-1500T Synchronous operation
functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766464)

‚óè Synchronous axis

Using S7-1500T kinematics func‚Äê
tions

This documentation describes the Motion Control functions for the
following technology objects:

‚óè Output cam
‚óè Cam track

‚óè Cam (S7-1500T)
‚óè Leading axis proxy (S7-1500T)

Function manual "S7-1500T Kine‚Äê ‚óè Kinematics (S7-1500T)
matics functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766463)

Additional information
You can find an overview and important links to the topic "SIMATIC Motion Control" in the
Siemens Industry Online Support under the entry ID 109751049 (https://
support.industry.siemens.com/cs/ww/en/view/109751049).

Functions
You execute the functions of the speed axis, positioning axis and external encoder technology
objects using Motion Control instructions in your user program or using the TIA Portal (under
"Technology object > Commissioning").
The following table shows the Motion Control instructions that are supported by the technology
objects:
Motion Control instruction

"MC_Power"

Validity

Technology object

S7-1500

S7-1500T

Speed axis (P√°gi‚Äê
na 1548)

Positioning axis
(P√°gina 1548)

External encoder
(P√°gina 1550)

X

X

X

X

X

X

X

X

X

X

X

X

-

X

X

X

X

X

X

-

Enable, disable technology object
"MC_Reset"
Acknowledge alarms, restart techno‚Äê
logy object
"MC_Home"
Home technology object, set home po‚Äê
sition
"MC_Halt"
Pause axis

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1545

Control de movimiento
6.1 Using S7-1500 Motion Control
Motion Control instruction

"MC_MoveAbsolute"

Validity

Technology object

S7-1500

S7-1500T

Speed axis (P√°gi‚Äê
na 1548)

Positioning axis
(P√°gina 1548)

External encoder
(P√°gina 1550)

X

X

-

X

-

X

X

-

X

-

X

X

X

X

-

X

X

X

X

-

X

X

-

X

-

-

X

-

X

-

X

X

X

X

-

X

X

X

X

-

X

X

-

X

-

-

X

X

X

-

-

X

-

X

-

X

X

X

X

-

X

X

X

X

-

X

X

X

X

-

Position axis absolutely
"MC_MoveRelative"
Position axis relatively
"MC_MoveVelocity"
Move axes with velocity/speed set‚Äê
point
"MC_MoveJog"
Move axis in jog mode
"MC_MoveSuperimposed"
Positioning axes overlapping
"MC_SetSensor"
Switch alternative encoder to operati‚Äê
ve encoder
"MC_Stop"
Pause axis and prevent new motion
jobs
"MC_SetAxisSTW"
Control bits of control word 1 and con‚Äê
trol word 2
"MC_WriteParameter"
Write parameter
"MC_MotionInVeloctiy"
Specify motion setpoints
"MC_MotionInPosition"
Specify motion setpoints
"MC_TorqueAdditive"
Specify additive torque
"MC_TorqueRange"
Specify high and low torque limits
"MC_TorqueLimiting"
Activate/deactivate force/torque limit /
fixed stop detection

1546

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The following table shows the functions supported by technology objects in the TIA Portal:
Functions in the TIA Portal

Technology object
Speed axis (P√°gina 1548)

Positioning axis (P√°gi‚Äê
na 1548)

External encoder (P√°gi‚Äê
na 1550)

X

X

-

-

X

-

"Axis control panel (P√°gina 1677)"
Move and home axes using the TIA
Portal
"Optimization (P√°gina 1683)"
Optimization of closed loop position
control

In addition to the functionality of the S7-1500 CPU, the S7-1500T CPU provides additional
functions and technology objects:
Additional functions

Description

Multiple encoders for positioning axis/ Up to four encoders can be connected to a positioning axis/synchronous axis. The
synchronous axis (P√°gina 1562)
encoders can be switched over during operation. Only one encoder at a time is active
for closed loop position control.
"MotionIn" function (P√°gina 1582)

With the "MC_MotionInVelocity" and "MC_MotionInPosition" Motion Control instruc‚Äê
tions, you specify cyclically applicable calculated motion setpoints as a basic motion
for the axis. No velocity profile is calculated for this, the values are directly active at
the technology object.

Kinematics technology object

The Kinematic technology object ("TO_Kinematics") is used to interconnect positio‚Äê
ning axes to a kinematic. When you configure the kinematics technology object, you
interconnect the axes in accordance with the configured kinematics type.
The kinematics technology object is described in the "S7-1500T Kinematics func‚Äê
tions (https://support.industry.siemens.com/cs/ww/en/view/109766463)" documen‚Äê
tation.

Gearing with "MC_GearInPos"

During gearing, the leading axis and following axis are coupled, similar to a mecha‚Äê
nical gear unit, by a linear synchronous operation function. You use the gear ratio to
specify the synchronous operation function. The synchronous positions of the lea‚Äê
ding and following axes starting at which the axes move synchronously can be spe‚Äê
cified in the Motion Control instruction "MC_GearInPos".
The gearing with "MC_GearInPos" is described in the documentation "S7-1500/
S7-1500T Synchronous operation functions (https://
support.industry.siemens.com/cs/ww/en/view/109766464)".

Camming

During camming, the leading axis and following axis are coupled by a synchronism
function, which you specify using a cam.
The camming is described in the documentation "S7-1500/S7-1500T Synchronous
operation functions (https://support.industry.siemens.com/cs/ww/en/view/
109766464)".

Cross-PLC synchronous operation

Cross-PLC synchronous operation enables synchronous operation over multiple
controllers. Leading and following axes can be configured on different controllers.
The PLC-wide synchronous operation is described in the documentation "S7-1500/
S7-1500T Synchronous operation functions (https://
support.industry.siemens.com/cs/ww/en/view/109766464)".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1547

Control de movimiento
6.1 Using S7-1500 Motion Control

6.1.2.2

Basics

Speed-controlled axis technology object
The speed axis technology object calculates speed setpoints, taking into account the dynamic
settings, and outputs them to the drive. All motions of the speed axis take place as speedcontrolled motions. An existing load gear is taken into account on the system side.
You can find an overview of the functions of the speed axis technology object in the "Functions
(P√°gina 1545)" section.
A drive is assigned to each speed axis by means of a PROFIdrive telegram or an analog
setpoint interface.
The speed is specified in revolutions per unit of time.
The following figure shows the basic principle of operation of the speed axis technology object:
&RQILJXUDWLRQRIWHFKQRORJ\REMHFW

7HFKQRORJ\REMHFW
6SHHGD[LV

$FWXDOVSHHG

9HORFLW\
VHWSRLQW

8VHUSURJUDP
0RWLRQ&RQWURO
LQVWUXFWLRQV

6SHHG
VHWSRLQW

6WDWXVHYDOXDWLRQ

&RPPXQLFDWLRQ

352),1(7
6,1$0,&6

Positioning axis technology object
The positioning axis technology object calculates position setpoints, taking into account the
encoderc settings, and outputs corresponding speed setpoints to the drive. In position-

1548

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
controlled mode, all movements of the positioning axis take place as position-controlled
movements. For absolute positioning, the physical position must be known to the positioning
axis technology object.
You can find an overview of the functions of the positioning axis technology object in the
"Functions (P√°gina 1545)" section.
Each positioning axis is assigned a drive by means of a PROFIdrive telegram or an analog
setpoint interface as well as an encoder by means of a PROFIdrive telegram.
The relationship between the encoder values and a defined position is established by the
parameter assignment of the mechanical properties and encoder settings and by a homing
operation. The technology object can also perform movements without a position relationship,
and relative position movements, even without being in a homed status.
A positioning axis can be configured as a linear axis or rotary axis (P√°gina 1551), depending on
the design of the mechanics.
The following figure shows the basic principle of operation of the positioning axis technology
object:
&RQILJXUDWLRQRIWHFKQRORJ\REMHFW

7HFKQRORJ\REMHFW
3RVLWLRQLQJD[LV
6HWSRVLWLRQ


‡≤¶

3RVLWLRQ
FRQWUROOHU

8VHUSURJUDP
0RWLRQ&RQWURO
LQVWUXFWLRQV
6WDWXVHYDOXDWLRQ

$FWXDO
SRVLWLRQ

6SHHG
VHWSRLQW

&RPPXQLFDWLRQ

352),1(7
6,1$0,&6

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1549

Control de movimiento
6.1 Using S7-1500 Motion Control

External encoder technology object
The external encoder technology object detects a position and makes this available to the
controller.
The actual position detected by the external encoder can be used for the following functions, for
example:
‚óè Measured value acquisition by a measuring input
‚óè Position-dependent generation of switching signals and switching signal sequences by
output cam and cam track with actual value reference.
‚óè As a leading value of a synchronous axis (S7-1500T)
You can find an overview of the functions of the external encoder technology object in the
"Functions (P√°gina 1545)" section.
The relationship between the encoder values and a defined position is established by the
parameter assignment of the mechanical properties and encoder settings and by a homing
operation.
The following figure shows the basic principle of operation of the external encoder technology
object:
&RQILJXUDWLRQRIWHFKQRORJ\REMHFW

7HFKQRORJ\REMHFW
([WHUQDOHQFRGHU

8VHUSURJUDP
0RWLRQ&RQWURO
LQVWUXFWLRQV
$FWXDOYDOXHHYDOXDWLRQ
6WDWXVHYDOXDWLRQ
$FWXDO
SRVLWLRQ
&RPPXQLFDWLRQ

352),1(7

6LJQDODFTXLVLWLRQ
703RV,QSXW
70&RXQW

6,1$0,&6

$OWHUQDWLYHFRQQHFWLRQ
(QFRGHU

1550

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Specification of the position occurs according to the selected system of units:
‚óè Linear system of units
The position is specified as a linear measure, e.g. millimeters.
‚óè Rotary system of units
The position is specified as an angular measure, e.g. degrees.

Axis types
Axes can be configured with different axis types:
‚óè Positioning and synchronous axes can be configured as rotary or linear axis.
‚óè Speed axes are always rotary axes.
Depending on the execution of the mechanics, an axis is implemented as a linear axis or rotary
axis:
‚óè Linear axis
3RVLWLRQ

For linear axes, the position of the axis is specified as a linear measure, e.g. millimeters
(mm).
‚óè Rotary axis

3RVLWLRQ

For rotary axes, the position of the axis is specified as an angular measure, e.g. degrees (¬∞).

Modulo setting
For the positioning axis, synchronous axis and external encoder technology objects, the
"Modulo" setting can be activated.
When an axis moves in only one direction, the position value continually increases. To limit the
position value to a recurring reference system, you can activate the "Modulo" setting. The longterm accuracy (P√°gina 1553) can also be adhered to with modular axes up to the maximum
travel time.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1551

Control de movimiento
6.1 Using S7-1500 Motion Control
When the "Modulo" setting is activated, the position value of the technology object is mapped
onto a recurring modulo range. The modulo range is defined by the start value and the length.
For example, to limit the position value of a rotary axis to a full rotation, the modulo range can
be defined with start value = 0¬∞ and length = 360¬∞. As a result, the position value is mapped onto
the modulo range 0¬∞ to 359.999¬∞.
The modulo cycle counters for the position setpoint and the actual position on the positioning
axis, synchronous axis and external encoder technology objects indicate the number of modulo
revolutions.

Modulo cycle counter
If the "Modulo" setting is activated, the modulo cycle counter is activated for the Positioning
axis, Synchronous axis, and External encoder technology objects. The modulo cycle counter
is displayed at the technology object for the position setpoint and the actual position. The
modulo cycle counter counts the modulo revolutions and thus the number of modulo runs at the
technology object.
The counter values of the modulo cycles change during switch on, restart and homing.
The following applies to an incremental encoder:
Action

Description

Switching on the CPU

The modulo cycle counter is set to 0.

Reset with "Restart" = TRUE The modulo cycle counter is set to 0.
Active and passive homing
with "Mode" = 2, 3, 5, 8, 10

‚óè If the home position is in the range "Modulo start value ‚â§ Home
position ‚â§ (Modulo Start value + Modulo length / 2)", the modulo
cycle counter is set to 0.
‚óè If the home position is in the range "(Modulo start value + Modulo
length / 2) < Home position < (Modulo start value + Modulo length)"
the modulo cycle is set to -1.

Direct homing absolute with
"Mode"= 0, 11

The modulo value is the shortest distance between the current and new
position. Depending of the distance, the modulo cycle counter can re‚Äê
main the same, increase by 1 or decrease by 1.

Direct homing absolute with
"Mode"= 1, 12

The modulo cycle counter changes according to the specified position
difference, even if no homing has taken place before.

The following applies to an absolute encoder:
Action

Description

Switching on the CPU

The modulo cycle counter changes according to the determined modulo
length from the absolute value of the encoder and the absolute value
offset of an absolute value encoder adjustment, if an absolute value
encoder adjustment has taken place.

Reset with "Restart" = TRUE The modulo cycle counter remains unchanged.
Absolute encoder adjust‚Äê
ment with "Mode" = 6, 7

1552

The modulo cycle counter is set to 0.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Action

Description

Direct homing absolute with
"Mode"= 0, 11

The modulo value is the shortest distance between the current and new
position. Depending of the distance, the modulo cycle counter can re‚Äê
main the same, increase by 1 or decrease by 1.

Direct homing absolute with
"Mode"= 1, 12

The modulo cycle counter changes according to the specified position
difference, even if no homing has taken place before.

Long-term accuracy
Long-term accuracy means that the technological set and actual position can always be
determined uniquely.
The maximum technological position depends on the selected dimension and the maximum
display of 9.0E12 mm. At higher resolution the maximum display is reduced to 9.0E9 mm.
The maximum travel time in which the technological position is accurate without rounding error
depends on the maximum position and the velocity. The maximum travel time applies likewise
to axes with and without modulo setting.
You can use the following equation to estimate when the limit of long-term accuracy is reached:

7UDYHOWLPH 

0D[LPXPSRVLWLRQ
9HORFLW\

Example of the maximum traversing time
Maximum position = 9.0E12 mm
Velocity = 20.0 m/min = 2.0E4 mm/min
7UDYHOWLPH 

(PP
(PPPLQ

(PLQ‡∏¨\HDUV

Dimension

Maximum travel time

nm, ¬µm, mm, m, km, in, ft, mi, rad, ¬∞

4.5E8 min ‚âô 856 years

mm1), ¬∞1)

4.5E5 min ‚âô 0.856 years

1)

Position values with higher resolution or six decimal places. The maximum position is reduced to
9.0E9 mm and thus also the travel time.

The traversing time restarts when one of the following conditions is fulfilled:
‚óè You have homed the axis with "MC_Home".
‚óè After POWER OFF ‚Üí POWER ON of the CPU
A change in the velocity has the consequence that the traversing time changes accordingly.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1553

Control de movimiento
6.1 Using S7-1500 Motion Control

Measures to maintain long-term accuracy
Carry out the following measures before the maximum travel time has elapsed:
‚óè Incremental encoder: Home the incremental encoder again.
‚óè Absolute encoder: Perform an absolute encoder calibration with the default of the currently
known position.

Consulte tambi√©n
Units of measure (P√°gina 1389)

Drive and encoder connection
A drive is assigned to the "Speed axis" technology object. A drive and one to four encoders
(only with S7-1500T) are assigned to the "Positioning axis" and "Synchronous axis" technology
objects. An encoder is assigned to the "External encoder" technology object.
The setpoint for the drive is specified either with PROFIdrive telegrams or using an analog
output.
The following connection options are available for an encoder:
‚óè Encoder connected to drive
‚óè Encoder to technology module
‚óè PROFIdrive encoder connected directly to PROFIBUS DP/PROFINET IO
The actual encoder value is transmitted exclusively via PROFIdrive telegrams.

PROFIdrive
PROFIdrive is the standardized drive technology profile for connecting drives and encoders via
PROFIBUS DP and PROFINET IO. Drives that support the PROFIdrive profile are connected
according to the PROFIdrive standard.
The current PROFIdrive specification is available at:
https://www.profibus.com (https://www.profibus.com)
Communication between the controller and drive/encoder is performed using various
PROFIdrive telegrams. Each of the telegrams has a standardized structure. You can select the
appropriate telegram according to the application. Control words and status words as well as
setpoints and actual values are transmitted in the PROFIdrive telegrams.
The PROFIdrive profile likewise supports the "Dynamic Servo Control" (DSC) control concept.
DSC uses rapid closed loop position control in the drive. This can be used to solve highly
dynamic Motion Control tasks.

Analog drive connection
Drives with analog setpoint interfaces are connected using an analog output and an optional
enable signal. The speed setpoint is specified via an analog output signal (e.g. from -10 V to
+10 V) from the CPU.

1554

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Stepper motors
Drives with a stepper motor interface are connected using telegram 3 and with the help of PTO
(Pulse Train Output) pulse generators.
For functional support of stepper motor operation, quantization of the control deviation can be
set.
Through the specification of a quantization, a range around the target position is defined in
which no correction of the actual position is to be made. This prevents a possible oscillation of
the stepper motor around the target position. Two types of quantization can be set:
‚óè Quantization of the control deviation corresponding to the encoder resolution
("<TO>.PositionControl.ControlDifferenceQuantization.Mode" = 1)
This prevents oscillation of the stopped motor between two increment values, for example.
This mode is especially helpful when using multiple encoders. With this setting, the
quantization is adapted appropriately at an encoder switchover. This mode is helpful for
stepper motors with encoders in which the resolution of the encoder is lower than the step
size of the stepper motor.
‚óè Direct specification of a value for quantization of the control deviation.
("<TO>.PositionControl.ControlDifferenceQuantization.Mode" = 2, value setting in
"<TO>.PositionControl.ControlDifferenceQuantization.Value")
This mode is helpful for stepper motors with encoders in which the resolution of the encoder
is greater than the step size of the stepper motor.

PROFIdrive telegrams
PROFIdrive telegrams are used to transfer setpoints and actual values, control and status
words and other parameters between the controller and drive/encoder.
When a PROFIdrive telegram is used for connection, the drives and encoders are handled and
switched on in accordance with the PROFIdrive profile.
The following table shows the possible PROFIdrive telegrams for various technology objects.
Technology object

Possible PROFIdrive telegrams

Speed axis

‚óè 1, 2
‚óè 3, 4, 5, 6, 102, 103, 105, 106 (actual
encoder value is not evaluated)

Positioning axis/synchronous axis
Setpoint and actual encoder value in one drive telegram

3, 4, 5, 6, 102, 103, 105, 106

Setpoint and actual encoder value separately
Setpoint in drive telegram

1, 2, 3, 4, 5, 6, 102, 103, 105, 106

Actual value from telegram

81, 83

External encoder

81, 83

Measuring input (Measuring via SINAMICS (central probe))

391, 392, 393

Measuring input at axis module

Corresponds to measuring via PROFI‚Äê
drive

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1555

Control de movimiento
6.1 Using S7-1500 Motion Control

Telegram types
The following table shows the supported PROFIdrive telegram types for the assignment of
drives and encoders:
Telegram

Brief description

Standard telegrams
11)

‚óè Control word STW15), status word ZSW1
‚óè Speed setpoint 16 bit (NSET), actual speed value 16 bit (NACT)

2

‚óè Controls word STW15) and STW25), status words ZSW1 and ZSW2
‚óè Speed setpoint 32 bit (NSET), actual speed value 32 bit (NACT)

3

‚óè Controls word STW15) and STW25), status words ZSW1 and ZSW2
‚óè Speed setpoint 32 bit (NSET), actual speed value 32 bit (NACT)
‚óè Actual encoder value 1 (G1_XIST1, G1_XIST2)

4

‚óè Controls word STW15) and STW25), status words ZSW1 and ZSW2
‚óè Speed setpoint 32 bit (NSET), actual speed value 32 bit (NACT)
‚óè Actual encoder value 1 (G1_XIST1, G1_XIST2)
‚óè Actual encoder value 2 (G2_XIST1, G2_XIST2)

5

‚óè Controls word STW15) and STW25), status words ZSW1 and ZSW2
‚óè Speed setpoint 32 bit (NSET), actual speed value 32 bit (NACT)
‚óè Actual encoder value 1 (G1_XIST1, G1_XIST2) (motor encoder)
‚óè Dynamic Servo Control (DSC)2)

6

‚Äì

Speed precontrol value

‚Äì

Position difference (XERR)

‚Äì

Kpc - Velocity precontrol of the closed loop position control

‚óè Controls word STW15) and STW25), status words ZSW1 and ZSW2
‚óè Speed setpoint 32 bit (NSET), actual speed value 32 bit (NACT)
‚óè Actual encoder value 1 (G1_XIST1, G1_XIST2) (motor encoder)
‚óè Actual encoder value 2 (G2_XIST1, G2_XIST2)
‚óè Dynamic Servo Control (DSC)2)
‚Äì

Speed precontrol value

‚Äì

Position difference (XERR)

‚Äì

Kpc - Velocity precontrol of the closed loop position control

Siemens telegrams (with torque limiting)
102

‚óè Controls word STW15) and STW25), status words ZSW1 and ZSW2
‚óè Speed setpoint 32 bit (NSET), actual speed value 32 bit (NACT)
‚óè Actual encoder value 1 (G1_XIST1, G1_XIST2)
‚óè Torque limiting

103

‚óè Controls word STW15) and STW25), status words ZSW1 and ZSW2
‚óè Speed setpoint 32 bit (NSET), actual speed value 32 bit (NACT)
‚óè Actual encoder value 1 (G1_XIST1, G1_XIST2)
‚óè Actual encoder value 2 (G2_XIST1, G2_XIST2)
‚óè Torque limiting

1556

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Telegram

Brief description

105

‚óè Controls word STW15) and STW25), status words ZSW1 and ZSW2
‚óè Speed setpoint 32 bit (NSET), actual speed value 32 bit (NACT)
‚óè Actual encoder value 1 (G1_XIST1, G1_XIST2) (motor encoder)
‚óè Dynamic Servo Control (DSC)2)
‚Äì

Speed precontrol value

‚Äì

Position difference (XERR)

‚Äì

Kpc - Velocity precontrol of the closed loop position control

‚óè Torque limiting
106

‚óè Controls word STW15) and STW25), status words ZSW1 and ZSW2
‚óè Speed setpoint 32 bit (NSET), actual speed value 32 bit (NACT)
‚óè Actual encoder value 1 (G1_XIST1, G1_XIST2) (motor encoder)
‚óè Actual encoder value 2 (G2_XIST1, G2_XIST2)
‚óè Dynamic Servo Control (DSC)2)
‚Äì

Speed precontrol value

‚Äì

Position difference (XERR)

‚Äì

Kpc - Velocity precontrol of the closed loop position control

‚óè Torque limiting
SIEMENS additional telegrams (torque data)
7503)

‚óè Additive setpoint torque
‚óè High and low torque limits
‚óè Torque actual values

SIEMENS telegrams (measuring input) 4)
391

‚óè Control word CU_STW1, status word CU_ZSW1
‚óè Measuring input control word (MT_STW), measuring input status word
(MT_ZSW)
‚óè Measuring input time stamp of negative (MT1‚Ä¶2_ZS_F) or positive edges
(MT1‚Ä¶2_ZS_S)
‚óè Digital output 16 bit, digital input 16 bit

392

‚óè Control word CU_STW1, status word CU_ZSW1
‚óè Measuring input control word (MT_STW), measuring input status word
(MT_ZSW)
‚óè Measuring input time stamp of negative (MT1‚Ä¶6_ZS_F) or positive edges
(MT1‚Ä¶6_ZS_S)
‚óè Digital output 16 bit, digital input 16 bit

393

‚óè Control word CU_STW1, status word CU_ZSW1
‚óè Measuring input control word (MT_STW), measuring input status word
(MT_ZSW)
‚óè Measuring input time stamp of negative (MT1‚Ä¶8_ZS_F) or positive edges
(MT1‚Ä¶8_ZS_S)
‚óè Digital output 16 bit, digital input 16 bit
‚óè Analog input 16 bit

Standard telegrams - encoder

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1557

Control de movimiento
6.1 Using S7-1500 Motion Control
Telegram

Brief description

81

‚óè Control word STW2_ENC, status word ZSW2_ENC
‚óè Actual encoder value 1 (G1_XIST1, G1_XIST2)

83

‚óè Control word STW2_ENC, status word ZSW2_ENC
‚óè Actual speed value 32 bit (NACT)
‚óè Actual encoder value 1 (G1_XIST1, G1_XIST2)

1) Isochronous mode is not possible.
2) For use of Dynamic Servo Control (DSC), the motor encoder (first encoder in the telegram) of the drive
must be used as the first encoder for the technology object.
3) Can also be used for the telegrams 1, 2, 3, 4, 5, 6, 102, 103, 105, 106
4) When using SINAMICS drives (measuring using SINAMICS measuring input)
5) STW1 and STW2: Bits not used by the technology object can be controlled via the user program with
the Motion Control instruction "MC_SetAxisSTW".

Consulte tambi√©n
Data connection drive/encoder via data block (P√°gina 1570)

Actual values
For position-controlled motion and positioning, the controller must know the actual position
value.
The actual position value is provided by a PROFIdrive telegram.
The actual values are represented as incremental or absolute values in the PROFIdrive
telegram. The actual values are normalized in the controller to the technological unit taking into
account the configuration of the mechanics. The reference to a physical position of the axis or
external encoder is established by homing.
The controller supports the following types of actual values (encoder types):
‚óè Incremental actual value
‚óè Absolute actual value with the setting absolute (measuring range > traversing range of the
axis)
‚óè Absolute actual value with the setting absolute (measuring range < traversing range of the
axis)

Actual value calculation for virtual axis or axis in simulation
The actual value of a virtual axis or an axis in simulation is formed from the setpoint taking time
delays into account.

1558

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
You calculate the time delay from actual value to the setpoint (Tt) as follows:
Calculation
With precontrol

Tt = Tipo + Tservo + Tvtc + TaddPtc

Without precontrol, without DSC

Tt = Tipo + 1/Kv + TaddPtc

Without precontrol, with DSC for one axis in simu‚Äê Tt = Tipo + Tservo + 1/Kv + TaddPtc
lation

Tt
Tipo
Tservo
Tvtc
TaddPtc
kV

Time delay from the actual value to the setpoint
Cycle time of the MC-Interpolator [OB92]
Cycle time of the MC-Servo [OB91]
Speed control loop substitute time (Tvtc off "<TO>.DynamicAxisModel.VelocityTime‚Äê
Constant")
Additive position control loop equivalent time (TaddPtc from "<TO>.DynamicAxisMo‚Äê
del.AdditionalPositionTimeConstant")
Gain factor (Kv from "<TO>.PositionControl.Kv")

Consulte tambi√©n
Virtual axis (P√°gina 1569)
Axis in simulation (P√°gina 1569)

Incremental actual value
The actual value in the PROFIdrive telegram is based on an incremental value.
After POWER ON, position zero is displayed. A transition of the CPU to RUN mode starts the
actual value update. The actual value is then also updated in CPU STOP mode. The
relationship between the technology object and the mechanical position must be re-established
by means of homing.

Absolute actual value
The actual value in the PROFIdrive telegram is based on an absolute value.
After POWER ON, position zero is displayed. The first transition of the CPU to RUN mode starts
the actual value update. The actual value is then also updated in CPU STOP mode. The
supplied absolute value is assigned to the associated mechanical axis position by means of the
absolute encoder adjustment. The absolute encoder adjustment must be performed once. The
absolute value offset is retentively saved beyond the switching on/off of the controller.
Differentiation of absolute values:
‚óè The measuring range of the encoder is larger than the traversing range of the axis:
Absolute value with setting absolute
‚óè The measuring range of the encoder is smaller than the traversing range of the axis:
Absolute value with setting cyclic absolute

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1559

Control de movimiento
6.1 Using S7-1500 Motion Control

Absolute actual value with setting absolute (measuring range > traversing range)
The axis position results directly from the current actual encoder value. The traversing range
must be within an encoder measuring range. This means that the zero passage of the encoder
must not be located in the traversing range.
When the controller is switched on, the axis position is determined from the absolute actual
encoder value.

Absolute actual value with setting cyclic absolute (measuring range < traversing range)
The encoder supplies an absolute value within its measuring range. The controller includes the
traversed measuring ranges and thus determines the correct axis position beyond the
measuring range.
When the controller is switched off, the traversed measuring ranges are saved in the retentive
memory area of the controller.
At the next power-on, the saved traversed measuring ranges are taken into account in the
calculation of the actual position value.
ATENCI√ìN
Movements of the axis while the controller is switched off can skew the actual value
If the axis or the encoder is moved by more than half of the encoder measuring range while the
controller is switched off, the actual value in the controller is no longer in accord with the
mechanical axis position.

Consulte tambi√©n
Absolute value adjustment (P√°gina 1607)

Tags: Actual values
The tags named in the "Homing (P√°gina 1608)" section are relevant for adapting actual values.

Automatic transfer of drive and encoder parameters in the device
Identical reference values for the drive and encoder connections must be set in the controller
and in the drive and encoder for the operation.
The speed setpoint NSET and the actual speed value NACT are transferred in the PROFIdrive
telegram as a percentage of the reference speed. The reference value for the speed must be
set identically in the controller and in the drive.
The resolution of the actual value in the PROFIdrive telegram must likewise be set identically
in the controller and in the drive and encoder modules

1560

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Automatic transfer of parameters
The drive and encoder parameters can be automatically applied in the CPU for the following
drives and encoders.
‚óè SINAMICS drives (see "compatibility list")
‚óè PROFIdrive encoder as of product version A16
The corresponding parameters are transferred after the (re-)initialization of the technology
object or (re)start of the drive and the CPU. Changes in the drive configuration are transferred
after restart of the drive or technology object.
Successful transfer of the parameters can be checked in the controller with the value of the tags
"<TO>.StatusDrive.AdaptionState" = 2 and "<TO>.StatusSensor[1..4].AdaptionState" = 2 of
the technology object.

Parameters
The controller settings are made in the TIA Portal under "Technology object > Configuration >
Hardware interface > Data exchange with the drive/encoder".
The drive and encoder settings are made in the configuration or the respective hardware.
The following table compares the settings in the TIA Portal, in the controller and the
corresponding drive/encoder parameters:
Setting in the TIA Portal

Controller
tag in the technology data block

Drive parameter

Automatic
transfer

Drive
Telegram number

Telegram input address
<TO>.Actor.Interface.AddressIn

Telegram number
P922

-

Telegram output address
<TO>.Actor.Interface.AddressOut
Reference speed in [1/min]

<TO>.Actor.DriveParameter.ReferenceS‚Äê
peed

(SINAMICS drives:
P2000)

X

Maximum speed of motor in [1/min]

<TO>.Actor.DriveParameter.MaxSpeed

(SINAMICS drives:
P1082)

X

Reference torque in [NM]

<TO>.Actor.DriveParameter.Reference‚Äê
Torque

(SINAMICS drives:
P2003)

X

<TO>.Sensor[1..4].Interface.AddressIn

P922

-

<TO>.Sensor[1..4].Type

P979[5] Encoder 1

-

0

Incremental

P979[15] Encoder 2

1

Absolute

2

Cyclic absolute

Encoder
Telegram

<TO>.Sensor[1..4].Interface.Addressout
Encoder type

Measuring system

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

<TO>.Sensor[1..4].System

P979[1] Bit0 Encoder 1

0

Linear

1

Rotary

P979[11] Bit0 Encoder
2

X

1561

Control de movimiento
6.1 Using S7-1500 Motion Control
Setting in the TIA Portal
Resolution (linear encoder)

Controller
tag in the technology data block

Drive parameter

<TO>.Sensor[1..4].Parameter.Resolution

The grid spacing is specified on the name‚Äê
plate of the encoder as a separation dis‚Äê
tance of the marks on the linear measuring
system.

Automatic
transfer

P979[2] Encoder 1

X

P979[12] Encoder 2

Increments per revolution
(rotary encoder)

<TO>.Sensor[1..4].Parameter.StepsPe‚Äê
rRevolution

P979[2] Encoder 1

Number of bits for fine resolution XIST1
(cyclic actual encoder value, linear or ro‚Äê
tary encoder)

<TO>.Sensor[1..4].Parameter.FineReso‚Äê
lutionXist1

P979[3] Encoder 1

Number of bits for fine resolution XIST2
(absolute encoder value, linear or rotary
encoder)

<TO>.Sensor[1..4].Parameter.FineReso‚Äê
lutionXist2

P979[4] Encoder 1

Differentiable encoder revolutions
(rotary absolute encoder)

<TO>.Sensor[1..4].Parameter.Determina‚Äê P979[5] Encoder 1
bleRevolutions
P979[15] Encoder 2

X

P979[12] Encoder 2
X

P979[13] Encoder 2
X

P979[14] Encoder 2
X

Using multiple encoders
The S7-1500T technology CPU offers the option of using up to 4 encoder or measuring systems
per positioning axis and synchronous axis as the actual position for the closed loop position
control
Only one encoder at a time is active for closed loop position control. You can switch between
the 4 encoder or measuring systems.
However, the actual values of all configured encoders can be evaluated in the user program.
This opens up the following possible application areas, for example:
‚óè Use of additional machine encoders (besides the motor encoder), e.g. as direct measuring
systems for more accurate detection of actual positions of machining processes.
‚óè Use of alternative encoder systems following a tool change in a flexible manufacturing
process.
You configure the encoders in the axis configuration. You control the switchover of the
encoders in the user program with the Motion Control instruction "MC_SetSensor".

Configuring an axis with multiple encoders
Note the following configuration windows when using multiple encoders:
‚óè In the configuration window "Hardware interface > Encoder", configure which alternative
encoders are to be used and their corresponding encoder type (incremental, absolute or
cyclic absolute).
All encoders marked as used supply continually updated actual values to the closed loop
position control regardless of their use.
‚óè In the configuration window "Hardware interface > Encoder", configure an encoder as
"Encoder at power-up". This is necessary because an encoder must always be assigned to
the positioning axis and synchronous axis.

1562

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
‚óè In the configuration window "Hardware interface > Data exchange with encoder", configure
additional encoder details and the telegram that is to be used to connect the encoders. The
configuration must be performed for each encoder used.
Each encoder to be used or each measuring system may differ with regard to its encoder
mounting type.
‚óè In the configuration window "Extended parameters > Mechanics", configure the encoder
mounting type and any gear parameters. The configuration must be performed for each
encoder used.
‚óè The axis can be homed with any configured encoder. In the configuration window "Extended
parameters > Homing", configure the parameters for active and passive homing. The
configuration can be performed for each encoder used.
When the axis is homed with an encoder, the axis is homed and retains the "homed" status
following encoder switchover.

Encoder switchover in the user program
For closed loop position control of the positioning and synchronous axes, an encoder must
always be active. Individual encoders may fail as long as they are not involved in closed loop
position control.
With the Motion Control instruction "MC_SetSensor", you switch over the encoder for closed
loop position control of the axis.
The switchover can occur during an active motion job or at a standstill. The axis does not have
to be enabled.
A switchover during an active homing or restart job is not possible.
Nota
Homing
Homing with the Motion Control instruction "MC_Home" or the axis control panel is always
performed with the encoder involved in closed loop position control.
The homing status of the axis is not changed following an encoder switchover.
Simulation
When the axis is simulated, all encoders configured as "used" are simulated.
Following the switchover to an alternative encoder or encoder system, you can select what
happens if the actual positions of the encoders are different.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1563

Control de movimiento
6.1 Using S7-1500 Motion Control
You define how to deal with the difference in the actual positions of the encoders using input
parameter "Mode" of the Motion Control instruction "MC_SetSensor".
‚óè Switch over encoder and transfer actual position to the encoder to be switched ("Mode" = 0)
With this encoder switchover, step changes in the actual position are prevented. Bumpless
switchover of the encoders is possible.
‚óè Switch over sensor without transferring the actual position ("Mode" = 1)
Following a switchover to an encoder without adjustment, a step change of the actual
position may occur. This can be desirable if the new encoder is intended to compensate for
possible mechanical influences (such as slip) in the positioning.
The position difference is not implemented immediately but rather after a delay using time
constant "<TO>.PositionControl.SmoothingTimeByChangeDifference" in order to prevent
step changes in the actual position with active closed loop position control.
‚óè Transfer actual position ("Mode" = 2)
The actual position of the axis is transferred to the encoder specified in the "Sensor"
parameter.
‚óè Transfer actual position of the reference encoder ("Mode" = 3)
The actual position of the "Reference encoder" ("ReferenceSensor" parameter) is
transferred to the encoder specified in the "Sensor" parameter.
"Mode" = 2 and 3 can be used to prepare a switchover.

Safety functions in the drive
Safety functions ("Safety Integrated Basic Functions") in the SINAMICS drive are safetyoriented, internal drive functions with the goal of shutting down the respective drive safely. In
addition, additional safety functions ("Safety Integrated Extended Functions") are available to
monitor definable limits. The goal of these safety functions is to monitor that the respective limit
is maintained, to signal the violation or to subsequently shut down the drive safely. To prevent
the monitoring function from being triggered, the axis must be switched to the monitored
operating mode with the user program or maintained in this mode.
The interaction of the safety functions in the drive, the SIMATIC S7-1500 and S7-1500T are
necessary to ensure fault-free plant operation.
The technology objects speed axis, positioning axis and synchronous axis support the "Safety
Integrated Basic Functions" of the drive. The technology object detects that the Basic Safety
function is triggered and displays a corresponding warning (technology alarm 550 - alarm
response: Track setpoints) or alarm (technology alarm 421 - alarm response: Remove enable).
With alarm 421, it is not necessary to disable the technology object with "MC_Power". When
alarm 550 occurs, you must not disable the technology object with the "MC_Power" as long as
the security function is triggered.
When the alarms 421 and 550 occur, you may only acknowledge the alarm with "MC-Reset" if
the safety function on the drive has been acknowledged and the drive is enabled.
The technology object is automatically released after acknowledgment with "MC-Reset".
The "Safety Integrated Extended Functions" are not supported by the technology object
independently.
To prevent the extended safety functions from being triggered and thus prevent a disruption in
plant operation, evaluate the status of the safety functions. This evaluation can take place in the
user program by using or evaluating the status information of the "Safety Info Channels" (SIC).

1564

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
With the help of the corresponding Motion Control instruction, the axis can now stay within the
monitored limit or reach it before a deviation is detected.
If a safety function is applied to a following axis in active synchronous operation, one of the
following two responses is required:
‚óè End synchronous operation
‚óè Adjust velocity of the leading axis accordingly
Four status words are available in the SIC:
‚óè S_ZSW1B
‚óè S_ZSW2B
‚óè S_ZSW3B
‚óè S_V_LIMIT_B
Two predefined PROFIdrive telegrams are available for transmission:
‚óè Tel. 700 (contains the status words S_ZSW1B & S_V_LIMIT_B)
‚óè Tel. 701 (contains all four status words and two additional control words)
Additional information
Additional information on the safety functions in SINAMICS drives and on the SIC is available
in the SINAMICS S120 Safety Integrated function manual.
https://support.industry.siemens.com/cs/ww/en/view/109754301 (https://
support.industry.siemens.com/cs/ww/en/view/109754301)
The tables below provide an overview of the four SIC status words and the required response
for each to prevent faults in plant operation.

S_ZSW1B
S_ZSW1B
Bit

Assignment

0

STO (active)

1

SS1 (active)

Meaning

Recommended response of the respective axis in the user pro‚Äê
gram

1

Safe Torque Off active

"MC_Power" can remain enabled (waiting).

0

Not active

None

1

Safe Stop 1 active

Drive brakes autonomously and goes into STO.
"MC_Power" remains enabled until STO.

2

SS2 (active)

0

Not active

None

1

Safe Stop 2 active

Drive brakes autonomously and goes into SOS.

0

Not active

1

Safe Operating Stop active

"MC_Power" remains enabled.
3

SOS (active)

None
"MC_Power" remains enabled.
The drive must not move (monitoring takes place in the drive)

0

Not active

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

None

1565

Control de movimiento
6.1 Using S7-1500 Motion Control
S_ZSW1B
Bit

Assignment

4

SLS (active)

Meaning

Recommended response of the respective axis in the user pro‚Äê
gram

1

"MC_Power" remains enabled.

Safety-Limited Speed active

Velocity must be less than active velocity limit (see "Active SLS
stage" or S_V_LIMIT_B).
0
5

SOS (selected) 1

Not active

None

Safe Operating Stop selected "MC_Power" remains enabled.
Braking with "MC_Halt" and "MC_Stop" within the time permitted
by SOS.

6

7

SLS (selected)

Internal event

0

Deselected

None

1

Safety-Limited Speed selec‚Äê
ted

Drop below velocity limit within the time specified by SLS.

0

Deselected

None

1

Group alarm that a safety
function was selected or be‚Äê
came active

Additional evaluation of the status words required to determine
the triggering safety function.

For example, by specifying an override or a new dynamic limit
(restriction with synchronous motion).

The bit indicates that a safety function is active.
(See also "Safety alarm")

0

No event

None

8

Reserved

-

-

9

Active SLS le‚Äê
vel

SLS velocity limit

Additional information on SLS (bit 6) ‚Äì shows active velocity limit
for SLS in levels (1‚Ä¶ 4). This limit can be evaluated in the pro‚Äê
gram to limit the current velocity of the axis as needed.

10

Display bit 0
SLS velocity limit
Display bit 1

11

Reserved

-

12

SDI positive

1

Safe Direction positive selec‚Äê Reaching standstill or the positive velocity of the actual value of
ted
the axis (when SDI negative = 0) within the time specified by SDI.

0

Deselected

None monitoring for positive direction.

13

SDI negative

1

Safe Direction negative se‚Äê
lected

Reaching standstill or the negative velocity of the actual value of
the axis (when SDI positive = 0) within the time specified by SDI.

0

Deselected

None monitoring for negative direction.

14

ESR retraction

1

Extended stop and retraction
required (not a Safety func‚Äê
tion)

To be considered individually.

15

1566

Safety alarm

-

You can find additional information in the "SINAMICS S120 Sa‚Äê
fety Integrated" (https://
support.industry.siemens.com/cs/ww/en/view/109754301)
function manual.

0

Not requested

None

1

Effective

If necessary, evaluate bit as group alarm to see whether a Sa‚Äê
fety alarm is pending in the alarm buffer.

0

Not effective

None

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

S_V_LIMIT_B
S_V_LIMIT_B

Meaning

Explanation

SLS Speed limit

Additional information on SLS (S_ZSW1B bit 6)

(32-bit resolution with sign)

Shows the selected/active velocity limit for SLS. If necessary,
the velocity limit can be evaluated in the program to limit the
current velocity of the axis as needed.

Meaning

Recommended response of the respective axis

0 ‚Ä¶ Reserved
3

-

-

4

1

SLP area 2 selected

Safe position in the area 2. Do not change the position using the
user program any longer.

0

SLP area 1 selected

Safe position in the area 1. Do not change the position using the
user program any longer.

Bit

Assignment

0 ‚Ä¶ Velocity set‚Äê
31 point limit

S_ZSW2B
S_ZSW2B
Bit

Assignment

SLP selected
position area

5, 6

Reserved

7

1
SLP selected
and user appro‚Äê
val set

8

SDI positive

-

Safety-Limited Position se‚Äê
lected and user approval is
set

Status message (if required in the user program)

0

SLP not selected or user ap‚Äê
proval missing

Application-dependent evaluation

1

Safe Direction positive selec‚Äê Reaching standstill or the positive velocity of the actual value of
ted
the axis within the time specified by SDI.

Application-dependent evaluation
(means that the SLP is selected and the safe position was con‚Äê
firmed by the user ‚Äì see "Safe homing")

(when SDI negative = 0)
9

SDI negative

0

Deselected

None monitoring for positive direction

1

Safe Direction negative se‚Äê
lected

Reaching standstill or the negative velocity of the actual value of
the axis within the time specified by SDI.
(when SDI positive = 0)

0
10,
11

Reserved

12

Test stop active 1

Deselected

-

None monitoring for negative direction
-

Test stop active

Status message (if required in the user program)
Application-dependent evaluation

0
13
14,
15

Test stop requi‚Äê 1
red
0
Reserved

Not active

None

Test stop required

Perform test stop

Not required

None

-

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

-

1567

Control de movimiento
6.1 Using S7-1500 Motion Control

S_ZSW3B
S_ZSW3B
Bit

Assignment

0

Brake test

1

2

Setpoint speci‚Äê
fication drive/
external

Active brake

Meaning

Recommended response of the respective axis

1

Brake test selected

"MC_Power" remains enabled. Do not start travel motion with
user program.

0

Deselected

None ‚Äì brake test is inactive (normal plant operation)

1

Specification for drive

The speed setpoint is specified by the SBT function.
Application-dependent evaluation

0

1

External specification (con‚Äê
trol)

The "normal" speed setpoint is in effect.

Test brake 2 active

Status message (if required in the user program)

Application-dependent evaluation, setpoint value specification
through user program required
Application-dependent evaluation

0

Test brake 1 active

Status message (if required in the user program)
Application-dependent evaluation

3

4

Brake test acti‚Äê
ve
Brake test re‚Äê
sult

1

Test active

Status message (if required in the user program)
Application-dependent evaluation

0

Inactive

None

1

Test required

Status message (if required in the user program)
Application-dependent evaluation

0

With error(s)

Status message (if required in the user program)
Application-dependent evaluation, test must usually be success‚Äê
ful to guarantee safety of the brake.

5

Brake test com‚Äê 1
plete
0

Run test

Status message (if required in the user program)
Application-dependent evaluation

Incomplete

Status message (if required in the user program)
Application-dependent evaluation, usually test is repeated

6

External brake
request

1

Closing the brake

Closing external brake (when controlled by user program)
Application-dependent evaluation

0

Opening the brake

Opening external brake (when controlled by user program)
Application-dependent evaluation

7

Current load
sign

1

Negative sign

Status of the load sign if required in the user program

0

Positive sign

Application-dependent evaluation

8 ‚Ä¶ Reserved
13

-

14

Acceptance
test SLP(SE)
selected

1

Acceptance test SLP(SE) se‚Äê Status message (if required in the user program)
lected
Application-dependent evaluation

0

Deselected

Acceptance
test

1

mode selected

Acceptance test mode selec‚Äê Status message (if required in the user program)
ted
Application-dependent evaluation

0

Deselected

15

1568

-

None

None

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Axis in simulation
S7‚Äë1500 Motion Control offers the option to move real axes in simulation mode. Speed,
positioning and synchronous axes can thus be simulated without a connected drive and
encoder in the CPU.
When the simulation mode is activated, the drive and encoder connection does not need to be
configured in the axis configuration, for example, if the drive configuration is not yet available
at this time. The "Simulation" configuration can be changed during runtime of the user program
(<TO>.Simulation.Mode). A valid drive and encoder connection is required when exiting the
simulation.
To use a technology object in simulation mode or with SIMATIC S7 PLCSIM, you need to use
encoder 1 for closed loop position control of the axis.
Applications
‚óè For example, an axis is simulated for programming the machine application and assigned
to the configured hardware later for commissioning.
‚óè During commissioning, for example, not all hardware components are available.
‚óè No axis motions should take place during commissioning.

Characteristics in simulation mode
An axis in simulation does not output setpoints to the drive and does not read any actual values
of the encoder. The actual values (P√°gina 1558) are formed with a time delay from the setpoints.
Hardware limit switches and home position switches have no effect.
The technology objects measuring input (with signal detection via TM Timer DIDQ or
SINAMICS measuring input), output cam and cam track can also be used for axes in simulation.
The following table shows the Motion Control instructions with adapted behavior in simulation
mode:
Motion Control instruction

Characteristics in simulation mode

MC_Power

The axis is enabled immediately without waiting for feedback from
the drive.

MC_Home

Homing jobs are executed immediately without simulated axis mo‚Äê
tion.

MC_TorqueLimiting

The specified torque is not output to the drive.

Virtual axis
S7‚Äë1500 Motion Control offers the possibility to configure an axis as a virtual axis. A virtual axis
behaves like a real axis, but has no drive or encoder connection. The setpoints are only
processed within the controller and no real drive is controlled.
Application:
A virtual axis, for example, is often used as a virtual leading axis in order to generate the
setpoints for several real following axes in synchronous operation.
The "Virtual axis" configuration can only be changed by a new download to the CPU (in STOP
mode) (<TO>.VirtualAxis.Mode).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1569

Control de movimiento
6.1 Using S7-1500 Motion Control
The behavior of a virtual axis is identical to the behavior of an axis in simulation (P√°gina 1569).

Data connection drive/encoder via data block
The data connection of PROFIdrive drives and encoders occurs either directly via the
PROFIdrive telegram or via a data block.
Use the system-generated tags of the PROFIdrive telegrams if you want to evaluate the
telegram contents.
Use the connection via data block if you want to influence or evaluate telegram contents in the
user program for process-specific reasons.
,2
GHYLFHV

3URFHVVLPDJH
,QSXWV

0&
3UH6HUYR

'DWDEORFN

$[LV‡≤¶GHYLFH
&RPPXQLFDWLRQ
YLD
7HOHJUDP

'DWDEORFN

0&
3RVW6HUYR

3URFHVVLPDJH
2XWSXWV

,2
GHYLFHV

'DWDFRQQHFWLRQGLUHFWO\WRWKHGULYHHQFRGHU
352),
GULYH
'ULYH
2XWSXWGDWD

7(/B,1

7(/B287

=6:
1,67B%
=6:
*B=6:
*B;,67
*B;,67

67:
162//B%
67:
*B67:

$[LV

352),
GULYH
'ULYH
,QSXW
GDWD

'DWDFRQQHFWLRQYLDDGDWDEORFN
$Q\GULYH
RU
PXOWLSOH
GHYLFHV

,QSXWV

8VHU
SURJUDP

7(/B,1

7(/B287

=6:
1,67B%
=6:
*B=6:
*B;,67
*B;,67

67:
162//B%
67:
*B67:

$[LV

8VHU
SURJUDP

2XWSXWV

$Q\GULYH
RU
PXOWLSOH
GHYLFHV

Principle of data connection via data block
Generally, at the start of closed loop position control of the axis (by MC-Servo [OB91]), the
input area of the drive or encoder telegram is read.
At the end of closed loop position control, the output area of the drive or encoder telegram is
written.

1570

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
To influence or evaluate telegram contents for process-specific reasons, a data interface via a
data block must be connected in between before and after the closed loop position control.
‚óè The input area of the telegram can be edited using the MC-PreServo [OB67] organization
block. The MC-PreServo is called before the MC-Servo.
‚óè The input area of the telegram can be edited using the MC-PostServo [OB95] organization
block. The MC-PostServo is called after the MC-Servo.
The data block must be created by the user and contain a data structure of data type "PD_TELx"
for the data connection. Here, "x" stands for the telegram number of the drive or encoder
configured in the device configuration.
The organization blocks MC-PreServo and MC-PostServo can be programmed by the user
and must be added with the command "Add new block". The connection to the I/O via telegram
must be programmed in this organization block. When you use DSC you have to edit the signs
of life in the telegrams in MC-PreServo and MC-PostServo yourself according to the
PROFIdrive standard.

Consulte tambi√©n
PROFIdrive telegrams (P√°gina 1555)
Organization blocks for Motion Control (P√°gina 1390)
Connect drive/encoder via data block (P√°gina 1440)

Tags: Drive and encoder connection
The following technology object tags are relevant for the drives and encoder connections:
Drive telegram
Tag

Description

<TO>.Actor.Interface.AddressIn

Input address for the PROFIdrive telegram

<TO>.Actor.Interface.AddressOut

Output address for the PROFIdrive telegram or the analog
setpoint

<TO>.Actor.DriveParameter.Referen‚Äê
ceSpeed

Reference value (100%) for the speed setpoint (NSET) of the
drive

<TO>.Actor.DriveParameter.MaxS‚Äê
peed

Maximum value for the speed setpoint of the drive (NSET)

<TO>.Actor.DriveParameter.Referen‚Äê
ceTorque

Reference torque for the torque transferred as a percentage

Encoder telegram
Tag

Description

<TO>.Sensor[1..4].Interface.AddressIn

Input address for the PROFIdrive telegram

<TO>.Sensor[1..4].Interface.Addres‚Äê
sOut

Output address for the PROFIdrive telegram

<TO>.Sensor[1..4].System

Encoder system linear or rotary

<TO>.Sensor[1..4].Type

Encoder type, incremental, absolute or cyclic absolute

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1571

Control de movimiento
6.1 Using S7-1500 Motion Control
Encoder telegram
Tag

Description

<TO>.Sensor[1..4].Parameter.Resolu‚Äê
tion

Resolution for linear encoder

<TO>.Sensor[1..4].Parameter.Steps‚Äê
PerRevolution

Steps per revolution for rotary encoder

The grid spacing corresponds to the distance between two
marks.

<TO>.Sensor[1..4].Parameter.Determi‚Äê Number of differentiable encoder revolutions for a multi-turn
nableRevolutions
absolute encoder

Fine resolution
Tag

Description

<TO>.Sensor[1..4].Parameter.FineRe‚Äê
solutionXist1

Number of bits for fine resolution XIST1 (cyclic actual enco‚Äê
der value)

<TO>.Sensor[1..4].Parameter.FineRe‚Äê
solutionXist2

Number of bits for fine resolution XIST2 (absolute value of
encoder)

Simulation mode
Tag

Description

<TO>.Simulation.Mode

Simulation mode
0

No simulation, normal operation

1

Simulation mode

Mechanics
For the display and processing of the technology object's position, the decisive factor is
whether the position is represented as a unit of length (linear axis) or a unit of angle (rotary axis).
Examples of units of length: mm, m, km
Examples of units of angle: ¬∞, rad
For the determination of the physical position from an actual encoder value, the system must
know the various properties and configurations of the mechanics.

Positioning axis/synchronous axis
The following configuration options for mechanics are supported:
‚óè Load gear
‚óè Leadscrew pitch (linear axes only)
‚óè Encoder mounting type:
‚Äì Motor side (before the load gear)
‚Äì Load side (after the load gear and as applicable the leadscrew)
‚Äì External (e.g. odometer)

1572

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
‚óè Inversion of drive direction
‚óè Inversion of encoder direction

External encoder
The following configuration options for mechanics are supported:
‚óè Measuring gear (for rotary encoders)
‚óè Leadscrew pitch (only with linear system of units and rotary encoders)
‚óè Inversion of encoder direction

Speed axis
The following configuration options for mechanics are supported:
‚óè Load gear
‚óè Inversion of drive direction

Tags: Mechanics
The following technology object tags are relevant for the setting of the mechanics:
Type of motion
Tag

Description

<TO>.Properties.MotionType

Indication of linear or rotary motion
0

Linear motion

1

Rotary motion

Load gear
Tag

Description

<TO>.LoadGear.Numerator

Load gear numerator

<TO>.LoadGear.Denominator

Load gear denominator

Leadscrew pitch
Tag

Description

<TO>.Mechanics.LeadScrew

Leadscrew pitch

Encoder mounting type
Tag

Description

<TO>.Sensor[1..4].MountingMode

Encoder mounting type

<TO>.Sensor[1..4].Parameter.Distan‚Äê
cePerRevolution

Load distance per encoder revolution with an externally
mounted encoder

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1573

Control de movimiento
6.1 Using S7-1500 Motion Control

Inversion
Tag

Description

<TO>.Actor.InverseDirection

Setpoint inversion

<TO>.Actor.Efficiency

Efficiency of leadscrew pitch

<TO>.Sensor[1..4].InverseDirection

Actual value inversion

Modulo
Tag

Description

<TO>.Modulo.Enable

Enable modulo

<TO>.Modulo.Length

Modulo length

<TO>.Modulo.StartValue

Modulo start value

Traversing range limitation
Hardware and software limit switches limit the permissible traversing range and operating
range of the positioning axis/synchronous axis. Before use, they must be enabled in the
configuration or in the user program.
The following figure shows the relationship between the operating range, maximum traversing
range and limit switches:







‚ë†
‚ë°
‚ë¢
‚ë£
‚ë§









Mechanical endstop
Hardware limit switches
Software limit switches
Maximum traversing range
Operating range

Hardware limit switches
Hardware limit switches are limit position switches that limit the maximum permissible
traversing range of the axis.
Select the positions of the hardware limit switches so that there is adequate braking distance
for the axis when needed. The axis should come to a standstill before a mechanical endstop.

Approaching the hardware limit switches
In the monitoring of range limitation, no distinction is made as to whether the switches are
reached or crossed.

1574

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
If a hardware limit switch is reached, technology alarm 531 is output, and the technology object
is disabled (alarm response: remove enable).

Exception
If the hardware limit switches are used as reversing output cams during homing, then the
monitoring of the hardware limit switches has no effect.
When hardware limit switches are used as reversing output cams, the axis is braked with the
deceleration configured in the dynamic defaults.
This must be taken into account when planning the distance of the hardware limit switch to the
mechanical endstop.

Retracting
The position of the axis when the hardware limit switch is detected is stored internally on the
CPU. The status of the reached hardware limit switch is reset only after the hardware limit
switch is left and the axis is once again in the maximum traversing range.
To retract the axis after it reaches the hardware limit switch and to reset the status of the
hardware limit switch, follow the steps below:
1. To enable motion in the retraction direction, acknowledge the technology alarm.
2. Traverse the axis in the retraction direction until the hardware limit switch is left.
The axis must then be within the maximum traversing range.
If you move the axis opposite the retraction direction before the hardware limit switch is left,
the monitoring will be triggered again.
The following chart shows the behavior of the status word when the hardware limit switch is
reached and when the axis is retracted:

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1575

Control de movimiento
6.1 Using S7-1500 Motion Control
3RVLWLYH
KDUGZDUHOLPLWVZLWFK
72!3RVLWLRQ

W

1HJDWLYH
KDUGZDUHOLPLWVZLWFK

,QSXWSRVLWLYH
KDUGZDUHOLPLWVZLWFK



,QSXWQHJDWLYH
KDUGZDUHOLPLWVZLWFK



72!6WDWXV:RUG;
72!6WDWXV:RUG;


‚ë†
‚ë°
‚ë¢
‚ë£



W



W




W




W






<TO>.StatusWord.X17 (HWLimitMinActive)
0

Negative hardware limit switch not reached

1

Negative hardware limit switch reached or overtraveled

<TO>.StatusWord.X18 (HWLimitMaxActive)
0

Positive hardware limit switch not reached

1

Positive hardware limit switch reached or overtraveled

The position of the axis when the positive hardware limit switch is detected is saved internally in
the CPU. To reset the status of the hardware limit switch, the axis position must fall short of this
position.
The position of the axis when the negative hardware limit switch is detected is saved internally
in the CPU. To reset the status of the hardware limit switch, the axis position must go past this
position.

Deactivating the hardware limit switch
For example, to enable homing at the fixed stop, you can temporarily disable the hardware limit
switch using the Motion Control instruction "MC_WriteParameter" via the parameter
"PositionLimits_HW.Active" = FALSE.

Consulte tambi√©n
Direct homing (P√°gina 1605)

1576

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Software limit switch
The operating range of the axis is limited with software limit switches. Relative to the traversing
range, always position the software limit switches within the hardware limit switches. Since the
positions of the software limit switches can be flexibly configured, the operating range of the
axis can be individually adapted in accordance with the current velocity profile.
Software limit switches are only in effect when there is a valid actual value after homing the
technology object. The monitoring of the software limit switches is relative to the setpoint.

Modulo function is enabled
When the modulo function is enabled, the modulo position is monitored.
The software limit switches are configured and activated in the axis configuration. The software
limit switches can be activated or deactivated in the user program using the
"<TO>.PositionLimits_SW.Active" tag. If the positions of both software limit switches are
outside the modulo range, the monitoring has no effect. No check is made to determine whether
the positions of the software limit switches are within the modulo range.

Approaching the software limit switches
The axis continually checks the position of the software limit switch during motion and brakes
to exactly this position, if necessary.
If the software limit switches are reached, then technology alarm 533 is output, and the axis is
stopped with the maximum dynamic values (alarm response: Stop with maximum dynamic
values). The technology object remains enabled.

Overrun of the software limit switches
If a software limit switch is crossed, technology alarm 534 is output, and the technology object
is disabled (alarm response: remove enable).

Retracting
To retract the axis after violation of the software limit switch, follow the steps below:
1. Acknowledge the technology alarm.
2. Move the axis in the retraction direction until the software limit switch is left.
If you move the axis opposite the retraction direction before the software limit switch is left,
the monitoring with be triggered again.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1577

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags: Traversing range limitation
Software limit switch
The following technology object tags are relevant for software limit switches:
Status indicators
Tag

Description

<TO>.StatusWord.X15 (SWLimitMi‚Äê
nActive)

Negative software limit switch is active.

<TO>.StatusWord.X16 (SWLimitMa‚Äê
xActive)

Positive software limit switch is active.

<TO>.ErrorWord.X8 (SWLimit)

An alarm is pending, indicating that a software limit switch
has been violated.

Control bits
Tag

Description

<TO>.PositionLimits_SW.Active

Enables/disables the monitoring of the software limit swit‚Äê
ches.

Position values
Tag

Description

<TO>.PositionLimits_SW.MinPosition

Position of the negative software limit switch

<TO>.PositionLimits_SW.MaxPosition

Position of the positive software limit switch

Hardware limit switches
The following technology object tags are relevant for hardware limit switches:
Status indicators
Tag

Description

<TO>.StatusWord.X17 (HWLimitMi‚Äê
nActive)

Negative hardware limit switch is active.

<TO>.StatusWord.X18 (HWLimitMa‚Äê
xActive)

Positive hardware limit switch is active.

<TO>.ErrorWord.X9 (HWLimit)

An alarm is pending. A hardware limit switch was reached.

Control bits

1578

Tag

Description

<TO>.PositionLimits_HW.Active

Enables/disables the monitoring of the hardware limit swit‚Äê
ches.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Parameters
Tag

Description

<TO>.PositionLimits_HW.MinSwitchLe‚Äê Level selection for activation of the low hardware limit switch
vel
FALSE At low level, the signal is active.
TRUE

At high level, the signal is active.

<TO>.PositionLimits_HW.MinSwit‚Äê
chAddress

Byte number of the I/O address of the hardware limit switch
for the low or minimum position

<TO>.PositionLimits_HW.MaxSwitch‚Äê
Level

FALSE

At low level, the signal is active.

TRUE

At high level, the signal is active.

<TO>.PositionLimits_HW.MaxSwit‚Äê
chAddress

Level selection for activation of the high hardware limit switch

Byte number of the I/O address of the hardware limit switch
for the high or maximum position

Motion control and limits for dynamics
Motion control of the axis occurs by means of velocity profiles (P√°gina 1579). The velocity
profiles are calculated in accordance with the specifications for dynamics. A velocity profile
defines the behavior of the axis during approach, braking and changes in velocity. During
positioning a velocity profile is calculated, that moves the axis to the target point.
Maximum values for velocity, acceleration and jerk result from the properties of the drive and
the mechanics. These maximum values can be configured in the limits for dynamics. The limits
for dynamics are in effect as limits for every motion generated by means of the technology
object. The dynamic limits have no effect on a following axis in synchronous operation.
The configurable emergency stop deceleration (P√°gina 1581) is triggered by the Motion
Control instruction MC_Power or by a technology alarm.
The jerk limit reduces the mechanical load during an acceleration ramp or deceleration ramp.
A "smoothed" velocity profile results.

Consulte tambi√©n
Dynamic limits in gearing (P√°gina 1886)

Velocity profile
Velocity profiles with or without jerk limitation are supported for motion control of the axis.
The dynamic values for the motion are specified in the Motion Control job. Alternatively, the
values of the dynamic defaults (P√°gina 1641) can be used. The defaults and the limits for
velocity, acceleration, deceleration and jerk are set in the configuration.
To influence velocity, a velocity override can override the current traversing velocity.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1579

Control de movimiento
6.1 Using S7-1500 Motion Control

Velocity profile without jerk limitation
The following figure shows velocity, acceleration and jerk:
Y

W

D

W

M

W

Acceleration
Deceleration

1580

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Velocity profile with jerk limitation
The following figure shows velocity, acceleration and jerk:
Y

W

D

W

M

W

Acceleration
Deceleration

A velocity profile with jerk limitation is employed for a continuous acceleration and deceleration
sequence. The jerk can be specified.

Emergency stop deceleration
When stopping with the emergency stop ramp, the axis is braked from the current actual
position and actual velocity to a standstill without a jerk limitation, using the configured
emergency deceleration.
In the following cases the configured emergency stop deceleration is in effect:
‚óè In case of an emergency stop ramp that has been enabled via the Motion Control instruction
"MC_Power" or "MC_Stop".
‚óè For a technology alarm with the local alarm response "Stop with emergency stop ramp".
This emergency stop deceleration can be set greater than the maximum deceleration. If the
emergency stop deceleration is set lower than this, it may occur that the axis does not stop until
after the limit switch in the case of "Stop at software limit switch" and the occurrence of a
technology alarm with the local alarm response "Stop with emergency stop ramp".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1581

Control de movimiento
6.1 Using S7-1500 Motion Control

Motion specification via "MotionIn"
In contrast to the Motion Control instructions such as "MC_MoveAbsolute" and
"MC_MoveRelative", no motion profile is calculated by the system when
"MC_MotionInVelocity" and "MC_MotionInPosition" are used. Each individual setpoint of the
motion profile (motion vector) must be specified with the "MotionIn" instruction in the application
cycle. This allows you to calculate your own motion profile.
The setpoints are typically adapted in the processing cycle of the technology object. For this
purpose, the "MotionIn" instruction is called in the organization block MC-PreServo [OB67].
The setpoints are then effective directly at the axis in MC-Servo [OB91].
ADVERTENCIA
Uncontrolled axis motions
When using the motion specification via the Motion Control instructions
"MC_MotionInVelocity" and "MC_MotionInPosition", the axis can perform uncontrolled
motions.
Consider the current dynamics of the axis when specifying the new motion vectors. The
motion vectors must be consistent with each other.
Set up the following protective measures before operating with the Motion Control instructions
"MC_MotionInVelocity" and "MC_MotionInPosition":
‚óè Ensure that the EMERGENCY OFF switch is within the reach of the operator.
‚óè Enable the hardware limit switches.
‚óè Enable the software limit switches.
‚óè Ensure that following error monitoring is enabled.
Note that a following axis that is coupled to the axis is also moved.

Overriding with "MotionIn" instructions
If a Motion Control instruction is overridden by a "MotionIn" instruction, the specified setpoints
take immediate effect with the current application cycle. The dynamic results exclusively
through the setpoint specifications of the user program. It is not limited and no smooth transition
takes place from the current motion state. Consider the current dynamics of the axis when
specifying the new motion vectors. Note that dynamic limits set on the technology object have
no effect. Only limits set on the drive side are in effect.

1582

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Stopping the "MotionIn" instructions
The "MotionIn" instructions can be canceled by the following means:
‚óè Overriding them with another Motion Control instruction
The "MotionIn" instructions are triggered according to the behavior described in the section
"Tripping characteristics V5: Homing and motion jobs". As a rule, the current dynamics are
overridden by the new motion.
Nota
Dynamic deviation possible
Pay attention to consistent specifications relating to velocity and acceleration when the
"MotionIn" instruction is overridden by another Motion Control instruction.
When the "MotionIn" instruction is overridden, make sure that the new acceleration
specifications are coordinated with the currently effective acceleration because the last
effective acceleration value will be applied.
‚óè Setting the parameter "Enable" to "FALSE"
If you set "Enable" parameter to "FALSE", the setpoint is immediately set to zero. Note that
the dynamic limits set on the technology object have no effect. Only limits set on the drive
side are in effect.

"MC_MotionInVelocity"
Use the "MC_MotionInVelocity" instruction to specify the velocity and acceleration of the
motion. The instruction is applicable for speed, positioning and constant axes.
To execute the instruction, you must at least specify the velocity. Acceleration is usually only
required for the substituting running motions. By default, the value of the acceleration is zero.

"MC_MotionInPosition"
Use the "MC_MotionInPosition" instruction to specify the position, velocity and acceleration of
the motion. The instruction is used for velocity, positioning and synchronous axes.
To execute the instruction, you must at least specify the position and velocity. Acceleration is
usually only required for the substituting running motions. By default, the value of the
acceleration is zero. The specified setpoints must be consistent with each other.
The position specification is position-controlled. If you use a velocity precontrol, the velocity
specification is processed via the velocity precontrol.

Torque limits
Force/torque limiting
Adjustable force/torque limiting is available for the speed axis, positioning axis and
synchronous axis technology objects. The force/torque limiting can be activated and
deactivated before and during a motion job. To use force/torque limiting, the drive and the
PROFIdrive telegram must support torque reduction. You can use, for example, a telegram 10x.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1583

Control de movimiento
6.1 Using S7-1500 Motion Control
The limit value can be configured as a default value during configuration of the axis or it can be
defined in the user program using Motion Control instruction "MC_TorqueLimiting".
You specify the limiting values in the configured unit of measure for force or torque. The units
of measure are defined in the "Basic parameters" configuration window.
The following configuration options are available for force/torque limiting.
‚óè "Linear" axis type
‚Äì Torque limiting is active on motor side
‚Äì Force limiting is active on the load side
‚óè "Rotary" axis type
‚Äì Torque limiting is active on load side or motor side
The force/torque limit defined by the user in accordance with the specification in the
PROFIdrive telegrams 10x are transferred internally to the drive as a percentage torque
reduction. The reference torque set in the "Data exchange with the drive" configuration dialog
must match the reference torque set for the drive.
Linear axis type
Load-side force limitation you have defined is converted by the technology into torque
reduction. If the limiting relates to the load side, the gear and leadscrew parameters defined in
the "Mechanics" configuration dialog are taken into consideration. If the efficiency of the gear
and leadscrew is crucial, you can set them in the "<TO>.Actor.Efficiency" tag.
Rotary axis type
The torque is reduced on the load side with the rotary axis type. The gear parameters defined
in the "Mechanics" configuration window are taken into consideration. If the efficiency of the
gear is crucial, you can set it in the "<TO>.Actor.Efficiency" tag.
The defined limiting values act as an absolute value and thus in the same way for positive and
negative forces/torques.

Positioning and following error monitoring with active force/torque limiting
As a result of force/torque limiting, a larger setpoint-actual value difference can build up for
position-controlled axes, which may cause unwanted activation of the positioning and following
error monitoring.
Therefore, in the "Torque limiting" configuration window, the positioning and following error
monitoring of the axis can be set as deactivated by default when force/torque limiting is active.
If necessary, the positioning and following error monitoring can also be kept active even when
force/torque limiting is active.

Typical behavior of a positioning or synchronous axis with active force/torque limiting
With active force/torque limiting, a larger setpoint-actual value difference can build up than
during motion without force/torque limiting.
Given a constant setpoint, the axis makes repeated attempts to reduce the following error.

1584

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
When the limiting values are increased or limiting is deactivated during active closed loop
position control, the axis can accelerate briefly to reduce the following error. If the axis is
switched to non-position-controlled operation, e.g. using "MC_MoveVelocity" with
"PositionControlled" = FALSE, the following error is no longer in effect.

Stopping an axis with active force/torque limiting
When stopping an axis in position-controlled mode with "MC_Halt" or "MC_Stop", the position
setpoint and the velocity setpoint are used as basis. Torque limiting still remains active and any
accumulated following error is reduced. The axis is in standstill when the actual velocity "0.0"
is reached and the minimum dwell time in the standstill window has expired. The axis remains
enabled.
When stopping an axis with "MC_Power" and an emergency stop ramp, the actual position
value and the actual velocity are used as a basis. The axis is braked with the configured
emergency stop deceleration without any jerk limit and brought to a standstill. The axis is then
disabled when at a standstill.

Consulte tambi√©n
Fixed stop detection (P√°gina 1585)
Configuration - Torque limits (P√°gina 1626)
Configuration - Torque limits (P√°gina 1647)

Fixed stop detection
With the Motion Control instruction "MC_TorqueLimiting", you activate and monitor a fixed stop
detection. Together with a position-controlled motion job, a "Travel to fixed stop" can be
realized. The operation is also referred to as clamping. "Travel to fixed stop" can be used, for
example, to move quills against the workpiece with a specified torque.
The fixed stop detection is configured in the configuration window "Extended parameters >
Limits > Fixed stop detection".
The fixed stop detection is only possible in position-controlled operation of the axis. If the drive
and telegram support force/torque limiting, this is active during travel to fixed stop and for
clamping.

Detection of the fixed stop using following error
If the drive is stopped by a mechanical fixed stop during a motion job, the following error is
increased. When the following error configured in the configuration window "Extended
parameters > Limits > Fixed stop detection" is exceeded, this is regarded as the fixed stop
having been reached.
When following error monitoring is activated, the configured following error must be greater
than the following error for fixed stop detection.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1585

Control de movimiento
6.1 Using S7-1500 Motion Control

Clamping at the mechanical endstop
When the fixed stop is reached, the active position-controlled motion job is canceled with
"CommandAborted". The setpoint is no longer changed and the following error remains
constant. The closed loop position control remains active and the monitoring of the configured
"Positioning tolerance" is activated The drive is in "Clamping" state.
If the drive and telegram support force/torque limiting, this continues to be active with active
fixed stop detection. During clamping, the clamping force or clamping torque can be changed.
The value in input parameter "Limit" of the Motion Control instruction "MC_TorqueLimiting" can
be changed for this.

Monitoring of the clamping
If the actual position changes by a value greater than the configured "Positioning tolerance"
during active clamping, this is regarded as the break or push-back of the fixed stop. An alarm
is triggered. The axis is disabled and the drive is stopped according to its configuration.
If the position setpoint is within the configured "Positioning tolerance", the breaking away or
turning back of the fixed stop cannot be detected.
The configured position tolerance must be less than the configured following error for detection
of clamping.

Retracting
Retracting from the fixed stop is only possible with a position-controlled motion job in the
opposite direction to the fixed stop.
The "Travel to fixed stop" or "Clamping" function is ended when the "Positioning tolerance" is
left in the retraction direction.

Consulte tambi√©n
Force/torque limiting (P√°gina 1583)
Configuration - Fixed stop detection (P√°gina 1648)

Additive setpoint torque
The Motion Control instruction "MC_TorqueAdditive" allows you to apply additional torque in
the drive.
The additive setpoint torque is used for example in torque feedforward control or the
specification of the tensile torque for winding applications.
The following requirements must be fulfilled to set the additive torque setpoint:
‚óè SINAMICS drive (see "compatibility list")
‚óè SIEMENS supplementary telegram 750 for transmitting the torque data to the drive
The additional torque can be either positive or negative. The value specified in the instruction
is a technological value, not a percentage. Set the unit of measurement for the torque at the axis
(default value: Nm).

1586

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Permissible torque range
The Motion Control instruction "MC_TorqueRange" allows you to set torque limits for the drive.
The motion control instruction is used, for example, for winding applications in order to prevent
the tearing of the material.
The following requirements must be fulfilled to set the torque data:
‚óè SINAMICS drive (see "compatibility list")
‚óè SIEMENS supplementary telegram 750 for transmitting the torque data to the drive
The value specified in the instruction is a technological value, not a percentage. Set the unit of
measurement for the torque at the axis (default value: Nm). If you invert the setpoints at the
technology object of the axis, the values for the high and low torque limit are output inverted and
reversed.
If the torque limitation is activated by specifying the high and low torque limit, the following
monitorings and limits are deactivated:
‚óè Following error monitoring
‚óè Time limits for positioning monitoring
‚óè Time limits for standstill monitoring
Monitoring remains in effect if you have selected the option "Leave position-related monitoring
enabled" under "Technology object > Configuration > Extended parameters > Limits > Torque
limiting".

Tags: Motion control and limits for dynamics
The following technology object tags are relevant for motion control:
Status
Tag

Description

<TO>.StatusWord

Status indicator for an active motion

<TO>.Position

Position setpoint

<TO>.Velocity

Velocity setpoint/speed setpoint

<TO>.VelocitySetpoint

Output velocity setpoint/speed setpoint

<TO>.ActualPosition

Actual position

<TO>.ActualVelocity

Actual velocity

<TO>.ActualSpeed

Actual speed of the motor (only with PROFIdrive drive type)

<TO>.Acceleration

Setpoint acceleration

<TO>.ActualAcceleration

Actual acceleration

<TO>.StatusSynchronizedMotion.Sta‚Äê
tusWord.X0 (MaxVelocityExceeded)

The tag is set to the value "TRUE" when the maximum velo‚Äê
city configured for the following axis is exceeded during
synchronous operation.

<TO>.StatusSynchronizedMotion.Sta‚Äê
tusWord.X1 (MaxAccelerationExcee‚Äê
ded)

The tag is set to the value "TRUE" when the maximum acce‚Äê
leration configured for the following axis is exceeded during
synchronous operation.

<TO>.StatusSynchronizedMotion.Sta‚Äê
tusWord.X2 (MaxDecelerationExcee‚Äê
ded)

The tag is set to the value "TRUE" when the maximum dece‚Äê
leration configured for the following axis is exceeded during
synchronous operation.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1587

Control de movimiento
6.1 Using S7-1500 Motion Control
Status
Tag

Description

<TO>.StatusMotionIn.FunctionState

Status of the "MotionIn" function
0

No "MotionIn" function active

1

"MC_MotionInVelocity" active

2

"MC_MotionInPosition" active

Override
Tag

Description

<TO>.Override.Velocity

Velocity or speed override

Dynamic limit values
Tag

Description

<TO>.DynamicLimits.MaxVelocity

Dynamic limitation for maximum speed (mechanical)

<TO>.DynamicLimits.Velocity

Dynamic limitation for maximum speed (programmable)

<TO>.DynamicLimits.MaxAcceleration

Dynamic limitation for maximum acceleration

<TO>.DynamicLimits.MaxDeceleration

Dynamic limitation for maximum deceleration

<TO>.DynamicLimits.MaxJerk

Dynamic limitation for maximum jerk

Defaults for the dynamics
Tag

Description

<TO>.DynamicDefaults.Velocity

Default velocity

<TO>.DynamicDefaults.Acceleration

Default acceleration

<TO>.DynamicDefaults.Deceleration

Default deceleration

<TO>.DynamicDefaults.Jerk

Default jerk

<TO>.DynamicDefaults.EmergencyDe‚Äê Emergency stop deceleration
celeration

Torque limiting
Tag

Description

<TO>.TorqueLimiting.LimitDe‚Äê
faults.Torque

Limiting torque

<TO>.TorqueLimiting.LimitDe‚Äê
faults.Force

Limiting force

<TO>.TorqueLimiting.LimitBase

<TO>.TorqueLimiting.PositionBased‚Äê
Monitorings

1588

Torque limiting motor or drive side
0

Motor side

1

Load side

Positioning and following error monitoring
0

Disabled

1

Enabled

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Torque limiting
Tag

Description

<TO>.StatusTorqueData.CommandAd‚Äê Additive torque setpoint function
ditiveTorqueActive
0
Disabled
1
<TO>.StatusTorqueData.Command‚Äê
TorqueRangeActive
<TO>.StatusTorqueData.ActualTorque

Enabled

Torque limits function
0

Disabled

1

Enabled

Actual torque of the axis

Fixed stop detection
Tag

Description

<TO>.Clamping.FollowingErrorDevia‚Äê
tion

Value of the following error starting from which the fixed stop
is detected

<TO>.Clamping.PositionTolerance

Position tolerance for the clamping monitoring

Homing
With homing, you create the relationship between the position in the technology object and the
mechanical position. The actual position value in the technology object is assigned to a homing
mark at the same time. This homing mark represents a known mechanical position.
With incremental actual values this process is called homing; with absolute actual values it is
called absolute encoder adjustment.
Homing is a requirement for display of the correct position for the technology object and for
absolute positioning.
Homing is activated with the Motion Control instruction "MC_Home".

Homing status
The "<TO>.StatusWord.X5 (HomingDone)" tag of the technology object indicates whether the
axis or external encoder technology object is homed.

Type of homing
Homing can occur by means of an independent homing motion (active homing), the detection
of a homing mark during a motion initiated on the user side (passive homing) or a direct position
assignment.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1589

Control de movimiento
6.1 Using S7-1500 Motion Control
A distinction is made between the following types of homing:
‚óè Active homing
Active homing initiates a homing movement and performs the necessary homing mark
approach. When the homing mark is detected, the actual position is set to the value
specified in MC_Home. It is possible to specify a home position offset. Retraction to the
home position offset occurs automatically during the home position approach.
When active homing starts, current traversing movements are aborted.
‚óè Passive homing
The homing job does not perform its own homing motion. When the homing mark is detected
during a motion initiated on the user side, the actual position is set to the value specified in
"MC_Home".
Passive homing is also called homing on the fly.
‚óè Direct homing
With the homing job, the actual position is set directly to the value specified in "MC_Home"
or is offset by this value.
‚óè Absolute encoder adjustment
In absolute encoder adjustment, the actual position of the axis or encoder is set with the
absolute or relative value specified at "MC_Home". The absolute value offset is stored
retentively in the CPU.

Homing mode
Depending on the type of homing mark and homing mark search, a distinction is made among
the following homing modes (P√°gina 1591):
‚óè Homing with homing output cam and zero mark via PROFIdrive telegram
‚óè Homing with zero mark via PROFIdrive telegram
‚óè Homing with digital input

Terms
Homing mark
A homing mark is an input signal, on whose occurrence a known mechanical position can be
assigned to the actual values.
A homing mark can be:
‚óè A zero mark
The zero mark of an incremental encoder or an external zero mark is used as a homing
mark.
The zero mark is detected at the drive module or encoder module and transmitted in the
PROFIdrive telegram. Perform the setting and evaluation as an encoder zero mark or
external zero mark at the drive module and encoder module.
‚óè An edge at the digital input
The negative or positive edge at a digital input is used as a homing mark.

1590

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Reference cam
If there are several zero marks in the traversing range, the reference cam is used to select a
specific zero mark before or after the reference cam.

Homing mark position
This is the position assigned to the homing mark.
The homing mark position corresponds to the home position minus the home position offset.

Home position
At the end of the active homing motion, the axis arrives at the home position.

Home position offset
The difference between the home position and the homing mark position is the home position
offset.
A home position offset only has an effect with active homing. The offset is traversed after the
synchronization of the axis using the Motion Control instruction "MC_Home". For axes with
modulo setting, the home position offset is always traversed with the direction setting for the
shortest path.

Direction reversal at the hardware limit switch (reversing cam)
Hardware limit switches can be used as reversing cams in active homing. If the homing mark
was not detected or was approached from the wrong side, the motion continues in the opposite
direction after the reversing cam.

Homing mode
Various homing modes are available for the positioning axis/synchronous axis and external
encoder technology objects with incremental encoders. The homing mode is set in the
configuration.

Homing with homing cam and zero mark via PROFIdrive telegram
The system checks for when the reference cam is reached. After the reference cam has been
reached and left again in the assigned homing direction, zero mark detection is enabled via the
PROFIdrive telegram.
When the zero mark is reached in the pre-selected direction, then the actual position of the
technology object is set to the homing mark position.

Homing with zero mark via PROFIdrive telegram
The system enables zero mark detection, as soon as the actual value of the technology object
moves in the assigned homing direction.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1591

Control de movimiento
6.1 Using S7-1500 Motion Control
When the zero mark is reached in the specified homing direction, the actual position of the
technology object is set to the homing mark position.

Homing with digital input
The system checks the state of the digital input, as soon as the actual value of the axis or
encoder moves in the assigned homing direction.
When the homing mark is reached (setting of the digital input) in the specified homing direction,
the actual position of the technology object is set to the homing mark position.
Nota
The digital inputs must be placed into the process image partition "PIP OB Servo".
The filter time of the digital inputs must be set smaller than the duration of the input signal at the
reference point switch.

Consulte tambi√©n
Homing SINAMICS drives with external zero marks (P√°gina 1543)

Active homing with homing output cam and zero mark
The following examples show homing motions in the positive and negative directions.

Example of homing in the positive direction
The approach to the homing mark and the home position occurs in the positive direction.
The following figure shows the homing motion with the following settings:
‚óè Active homing with homing output cam and zero mark
‚óè Approach in the positive direction
‚óè Homing in the positive direction
‚óè Positive home position offset

1592

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
9HORFLW\

5HIHUHQFHPDUNSRVLWLRQ
+RPHSRVLWLRQ

$SSURDFKYHORFLW\

+RPLQJYHORFLW\

‡≤¶

+RPHSRVLWLRQ
DSSURDFK

+RPLQJPDUN
DSSURDFK

3RVLWLRQ

+RPLQJPDUN
DSSURDFK
+RPHSRVLWLRQRIIVHW

5HIHUHQFHFDP
=HURPDUN
KRPLQJPDUN

Example of homing in the negative direction
The approach to the homing mark occurs in the negative direction by means of a direction
reversal during the homing process. The approach to home position causes another direction
reversal and occurs in the positive direction.
The following figure shows the homing motion with the following settings:
‚óè Active homing with homing output cam and zero mark
‚óè Approach in the positive direction
‚óè Homing in the negative direction
‚óè Positive home position offset

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1593

Control de movimiento
6.1 Using S7-1500 Motion Control
9HORFLW\
$SSURDFKYHORFLW\

+RPLQJYHORFLW\

‡≤¶

+RPH
SRVLWLRQ

+RPLQJPDUN
5HIHUHQFHFDP

3RVLWLRQ

+RPLQJPDUN
DSSURDFK

+RPHSRVLWLRQ
DSSURDFK
5HIHUHQFH
PDUNSRVLWLRQ

5HIHUHQFH
FDP

+RPHSRVLWLRQRIIVHW
=HURPDUN
KRPLQJPDUN

Motion sequence
The motion occurs in the following sequence:
1. Start of active homing via the "MC_Home" Motion Control instruction
2. Approach to reference output cam
3. Detection of the homing output cam in the homing direction and travel with homing velocity
4. Departure from the reference output cam and travel to the homing mark
With the departure from the homing output cam, the detection of the homing mark is
enabled.

1594

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
5. Detection of the homing mark
When the homing mark is detected, the position of the technology object is set depending
on the configured mode:
‚Äì "Mode" parameter at "MC_Home" = 3
Position = value in parameter "Position" minus
"<TO>.Sensor[1..4].ActiveHoming.HomePositionOffset"
‚Äì "Mode" parameter at "MC_Home" = 5
Position = value in tag "<TO>.Homing.HomePosition" minus
"<TO>.Sensor[1..4].ActiveHoming.HomePositionOffset"
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control
has been standardized within the framework of technology version V2.0. This results in a
new assignment of the parameter values for the "MC_Home.Mode" parameter. A
comparison of the "MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is
available in the section "Version overview" of the "S7-1500/S7-1500T Motion Control
overview" documentation (https://support.industry.siemens.com/cs/ww/en/view/
109766459).
6. Approach to the home position
‚Äì "Mode" parameter at "MC_Home" = 3
The axis moves to the position that is specified in the "Position" parameter.
‚Äì "Mode" parameter at "MC_Home" = 5
The axis moves to the position that is specified in the "<TO>.Homing.HomePosition" tag.
Nota
If the velocity cannot be reduced to the reference velocity between detection of the
reference output cam and the zero mark, homing is performed at the velocity present when
the zero mark is crossed.

Consulte tambi√©n
Homing SINAMICS drives with external zero marks (P√°gina 1543)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1595

Control de movimiento
6.1 Using S7-1500 Motion Control

Active homing with zero mark
The following figure shows an example of the homing motion with the following settings:
‚óè Active homing with zero mark
‚óè Homing in the positive direction
‚óè Positive home position offset
Velocity
Reference mark position
Approach velocity
Home position
Homing velocity




Approach to reference mark

Position

Approach to home position

Home position offset
Zero mark
(Reference mark)

Motion sequence
The motion occurs in the following sequence:
1. Start of active homing via the Motion Control instruction "MC_Home"
2. Move to the homing mark in the homing direction with the homing velocity

1596

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
3. Detection of the homing mark
When the homing mark is detected, the position of the axis or encoder is set depending on
the configured mode:
‚Äì "Mode" parameter at "MC_Home" = 3
Position = value in parameter "Position" minus
"<TO>.Sensor[1..4].ActiveHoming.HomePositionOffset"
‚Äì "Mode" parameter at "MC_Home" = 5
Position = value in tag "<TO>.Homing.HomePosition" minus
"<TO>.Sensor[1..4].ActiveHoming.HomePositionOffset"
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control
has been standardized within the framework of technology version V2.0. This results in a
new assignment of the parameter values for the "MC_Home.Mode" parameter. A
comparison of the "MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is
available in the section "Version overview" of the "S7-1500/S7-1500T Motion Control
overview" documentation (https://support.industry.siemens.com/cs/ww/en/view/
109766459).
4. Approach to the home position
‚Äì "Mode" parameter at "MC_Home" = 3
The axis moves to the position that is specified in the "Position" parameter.
‚Äì "Mode" parameter at "MC_Home" = 5
The axis moves to the position that is specified in the "<TO>.Homing.HomePosition" tag.

Consulte tambi√©n
Homing SINAMICS drives with external zero marks (P√°gina 1543)

Active homing with digital input
The following figure shows an example of the homing motion with the following settings:
‚óè Active homing with digital input
‚óè Approach in the positive direction

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1597

Control de movimiento
6.1 Using S7-1500 Motion Control
‚óè Homing mark on the positive side of the digital input
‚óè Positive home position offset
Velocity
Reference mark position
Approach velocity
Home position

Homing velocity



Approach to Approach to home position
reference mark



Position

Approach to switch at
digital input

Digital input

Home position offset

Falling edge at the digital input
(Reference mark)

Motion sequence
The motion occurs in the following sequence:
1. Start of active homing via the "MC_Home" Motion Control instruction
2. Detection of the positive edge at the digital input, while moving with homing velocity
3. Approach to the homing mark

1598

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
4. Detection of the homing mark
In the example, the negative edge of the switch at the digital input represents the homing
mark.
When the homing mark is detected, the position of the axis or encoder is set depending on
the configured mode:
‚Äì "Mode" parameter at "MC_Home" = 3
Position = value in parameter "Position" minus
"<TO>.Sensor[1..4].ActiveHoming.HomePositionOffset"
‚Äì "Mode" parameter at "MC_Home" = 5
Position = value in tag "<TO>.Homing.HomePosition" minus
"<TO>.Sensor[1..4].ActiveHoming.HomePositionOffset"
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control
has been standardized within the framework of technology version V2.0. This results in a
new assignment of the parameter values for the "MC_Home.Mode" parameter. A
comparison of the "MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is
available in the section "Version overview" of the "S7-1500/S7-1500T Motion Control
overview" documentation (https://support.industry.siemens.com/cs/ww/en/view/
109766459).
5. Approach to the home position
‚Äì "Mode" parameter at "MC_Home" = 3
The axis moves to the position that is specified in the "Position" parameter.
‚Äì "Mode" parameter at "MC_Home" = 5
The axis moves to the position that is specified in the "<TO>.Homing.HomePosition" tag.
Nota
If the velocity on the span from the detection of the positive edge to the negative edge cannot
be reduced to the homing velocity, then homing occurs at the velocity that exists when the
homing mark is traversed.

Direction reversal at the hardware limit switch (reversing cam)
During active homing, the hardware limit switch can optionally be used as a reversing cam. If
the homing mark is not detected or the motion was not in the homing direction, the motion
continues in the opposite direction with the approach velocity after the reversing cam.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1599

Control de movimiento
6.1 Using S7-1500 Motion Control
When the hardware limit switch is reached, the default settings for dynamics take effect.
Deceleration with the emergency deceleration does not hereby occur.
ATENCI√ìN
Avoid moving to a mechanical endstop
Ensure by one of the following measures, that in a direction reversal the machine does not
move to a mechanical endstop.
‚óè Keep the approach velocity low.
‚óè Increase the configured acceleration/deceleration.
‚óè Increase the distance between the hardware limit switch and the mechanical endstop.

Passive homing with homing output cam and zero mark
The following figure shows an example of the homing motion with the following settings:
‚óè Passive homing with homing output cam and zero mark
‚óè Homing in the positive direction
9HORFLW\
+RPHSRVLWLRQ

+RPHSRVLWLRQDSSURDFK

‡≤¶

3RVLWLRQ

5HIHUHQFHFDP
=HURPDUN
KRPLQJPDUN

Motion sequence
The motion occurs in the following sequence:
1. Activation of passive homing using the Motion Control instruction "MC_Home"
2. Motion due to a Motion Control job from the user
The detection of the reference output cam and homing mark is enabled when the actual
position value of the axis or encoder moves in the assigned homing direction.
3. Detection of the reference output cam

1600

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
4. Departure from the reference output cam
The departure from the reference output cam enables the detection of the homing mark.
5. Detection of the homing mark
When the homing mark is detected, the position of the axis or encoder is set depending on
the configured mode:
‚Äì "Mode" parameter at "MC_Home" = 2, 8
Position = value in parameter "Position"
‚Äì "Mode" parameter at "MC_Home" = 10
Position = value in tag "<TO>.Homing.HomePosition"
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control
has been standardized within the framework of technology version V2.0. This results in a
new assignment of the parameter values for the "MC_Home.Mode" parameter. A
comparison of the "MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is
available in the section "Version overview" of the "S7-1500/S7-1500T Motion Control
overview" documentation (https://support.industry.siemens.com/cs/ww/en/view/
109766459).
Nota
If the motion direction changes after departure from the reference output cam and before
detection of the homing mark, the reference output cam must be detected again. The Motion
Control instruction "MC_Home" remains enabled.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1601

Control de movimiento
6.1 Using S7-1500 Motion Control

Passive homing with zero mark
The following figure shows an example of the homing motion with the following settings:
‚óè Passive homing with zero mark
‚óè Homing in the positive direction
Velocity
Home position

Approach to home position
Position





Zero mark
(Reference mark)

1602

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Motion sequence
The motion occurs in the following sequence:
1. Activation of passive homing using the Motion Control instruction "MC_Home"
2. Motion due to a Motion Control job from the user
The detection of the homing mark is enabled when the actual position value of the axis or
encoder moves in the assigned homing direction.
3. Detection of the homing mark
During the detection of the homing mark, the position of the axis or encoder is set depending
on the set mode:
‚Äì "Mode" parameter at "MC_Home" = 2, 8
Position = value in parameter "Position"
‚Äì "Mode" parameter at "MC_Home" = 10
Position = value in tag "<TO>.Homing.HomePosition"
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control
has been standardized within the framework of technology version V2.0. This results in a
new assignment of the parameter values for the "MC_Home.Mode" parameter. A
comparison of the "MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is
available in the section "Version overview" of the "S7-1500/S7-1500T Motion Control
overview" documentation (https://support.industry.siemens.com/cs/ww/en/view/
109766459).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1603

Control de movimiento
6.1 Using S7-1500 Motion Control

Passive homing with digital input
The following figure shows an example of the homing motion with the following settings:
‚óè Passive homing with digital input
‚óè Homing in the positive direction
‚óè Homing mark on the positive side of the digital input
Velocity
Home position

Approach to home position





Position

Digital input
Falling edge at the digital input
(Reference mark)

1604

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Motion sequence
The motion occurs in the following sequence:
1. Activation of passive homing using the Motion Control instruction "MC_Home"
2. Motion due to a Motion Control job from the user
The detection of the homing mark at the digital input is enabled when the actual position
value of the axis or encoder moves in the assigned homing direction.
3. Detection of the homing mark
In the example, the falling edge of the switch at the digital input represents the homing mark.
When the homing mark is detected, the position of the axis or encoder is set depending on
the configured mode:
‚Äì "Mode" parameter at "MC_Home" = 2, 8
Position = value in parameter "Position"
‚Äì "Mode" parameter at "MC_Home" = 10
Position = value in tag "<TO>.Homing.HomePosition"
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control
has been standardized within the framework of technology version V2.0. This results in a
new assignment of the parameter values for the "MC_Home.Mode" parameter. A
comparison of the "MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is
available in the section "Version overview" of the "S7-1500/S7-1500T Motion Control
overview" documentation (https://support.industry.siemens.com/cs/ww/en/view/
109766459).

Direct homing
Depending on the configured mode, the position of the positioning axis/synchronous axis or
external encoder technology objects can be absolutely or relatively set with "MC_Home".

Set actual position absolutely
To set the actual position absolutely, proceed as follows:
1. In the "MC_Home" Motion Control instruction, enter the absolute actual position in the
"Position" parameter.
2. Call the "MC_Home" Motion Control instruction with parameter "Mode" = 0.
The position is set to the value specified in the "Position" parameter.

Set actual position relatively
To set the actual position relatively, proceed as follows:
1. In the "MC_Home" Motion Control instruction, enter the relative actual position in the
"Position" parameter.
2. Call the "MC_Home" Motion Control instruction with parameter "Mode" = 1.
Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1605

Control de movimiento
6.1 Using S7-1500 Motion Control
The position is set to the current position plus the value specified in the "Position" parameter.

Set position setpoint absolutely
To set the position setpoint absolutely, proceed as follows:
1. In the "MC_Home" Motion Control instruction, enter the absolute position setpoint in the
"Position" parameter.
2. Call the "MC_Home" Motion Control instruction with parameter "Mode" = 11.
The position is set to the current position plus the value specified in the "Position" parameter.

Set position setpoint relatively
To set the position setpoint relatively, proceed as follows:
1. In the "MC_Home" Motion Control instruction, enter the relative position setpoint in the
"Position" parameter.
2. Call the "MC_Home" Motion Control instruction with parameter "Mode" = 12.
The position is set to the current position plus the value specified in the "Position" parameter.

Direct homing at fixed stop
For direct homing at fixed stop, all motions must be programmed in the user program. Change
the configuration data directly in the user program. The fixed stop is used as homing mark.
ATENCI√ìN
Too fast manual traversing to the fixed stop
Too fast a manual traversing of the axis can lead to machine damage.
Move the axis manually with low speed/velocity. Configure a suitable torque limit.
To set the position at the fixed stop absolutely or relatively, proceed as follows:
1. Activate a suitable fixed stop detection with the Motion Control instruction
"MC_TorqueLimiting".
2. Deactivate the existing hardware limit switch with the Motion Control instruction
"MC_WriteParameter".
3. Move the axis to the fixed stop using a suitable motion job. For example, use the Motion
Control instructions "MC_MoveRelative" or "MC_MoveJog".
4. After the axis has reached the fixed stop, execute a direct homing using the Motion Control
instruction "MC_Home".
5. Move the axis back to the working area between the hardware limit switches.
6. Activate the hardware limit switch with the Motion Control instruction "MC_WriteParameter".
7. Deactivate the fixed stop detection using the Motion Control instruction
"MC_TorqueLimiting".

1606

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Absolute value adjustment
In absolute value adjustment, Motion Control determines an absolute value offset, that is
retentively stored on the CPU.
Depending on the configured mode, the position of the axis or the encoder is absolutely or
relatively set in the "MC_Home" Motion Control instruction.
‚óè Parameter "Mode" = 7 (absolute specification of position)
Position = value in parameter "Position"
‚óè Parameter "Mode" = 6 (relative specification of position)
Position = current position + value in parameter "Position"

Resetting the "Homed" status
Incremental encoder
In the following cases, the "Homed" status is reset, and the technology object must be rehomed.
‚óè Error in sensor system/encoder failure
‚óè Triggering of the active homing with the Motion Control instruction "MC_Home" with
"Mode" = 3, 5
(After successful completion of the homing operation, the "Homed" status is reset.)
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control
has been standardized within the framework of technology version V2.0. This results in a
new assignment of the parameter values for the "MC_Home.Mode" parameter. A
comparison of the "MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is
available in the section "Version overview" of the "S7-1500/S7-1500T Motion Control
overview" documentation (https://support.industry.siemens.com/cs/ww/en/view/
109766459).
‚óè Triggering of passive homing using the Motion Control instruction "MC_Home" with "Mode"
= 2, 8, 10
(After successful completion of the homing operation, the "Homed" status is reset.)
‚óè Replacement of the CPU
‚óè Replacement of the SIMATIC Memory Card
‚óè POWER OFF
‚óè Memory reset
‚óè Modification of the encoder configuration
‚óè Restart of the technology object
‚óè Restoration of the CPU factory settings
‚óè Transfer of a different project into the controller

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1607

Control de movimiento
6.1 Using S7-1500 Motion Control

Absolute encoder
In the following cases, the "Homed" status is reset, and the technology object must be rehomed.
‚óè Replacement of the CPU
‚óè Modification of the encoder configuration
‚óè Restoration of the CPU factory settings
‚óè Transfer of a different project into the controller
When you use a new absolute value encoder you need to home the absolute encoder once
again.
Resetting the memory of the CPU or upgrading a project does not require another absolute
value adjustment.

Tags: Homing
The following technology object tags are relevant for homing:
Status indicators
Tag

Description

<TO>.StatusWord.X11 (HomingCom‚Äê
mand)

Homing job running

<TO>.StatusWord.X5 (HomingDone)

Technology object homed

<TO>.ErrorWord.X10 (HomingFault)

Error occurred during homing

Nota
Evaluation of the bits in StatusWord, ErrorWord and WarningWord
Note the information in section "Evaluating StatusWord, ErrorWord und WarningWord" of the
documentation "S7-1500/S7-1500T Motion Control overview" (https://
support.industry.siemens.com/cs/ww/en/view/109766459).

Approach to reference output cam
Tag

Description

<TO>.Homing.ApproachDirection

Start direction or approach direction for the approach to the
reference output cam

<TO>.Homing.ApproachVelocity

Velocity for the approach to the reference output cam

Approach to the homing mark

1608

Tag

Description

<TO>.Sensor[1..4].ActiveHoming.Di‚Äê
rection

Homing direction

<TO>.Homing.ReferencingVelocity

Velocity for the approach to the homing mark

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Approach to home position
Tag

Description

<TO>.Homing.ApproachVelocity

Velocity for the move to homing point

Positions
Tag

Description

<TO>.Homing.AutoReversal

Reversal at the hardware limit switches

<TO>.Homing.HomePosition

Home position

<TO>.StatusSensor[1..4].AbsEncode‚Äê
rOffset

Calculated offset after the absolute encoder adjustment

Parameters for active homing
Tag

Description

<TO>.Sensor[1..4].ActiveHoming.Mode Homing mode
<TO>.Sensor[1..4].ActiveHoming.Si‚Äê
deInput

Side of the digital input

<TO>.Sensor[1..4].ActiveHoming.Di‚Äê
rection

Homing direction or approach direction

<TO>.Sensor[1..4].ActiveHoming.Digi‚Äê
talInputAddress

Address of digital input

<TO>.Sensor[1..4].ActiveHoming.Ho‚Äê
mePositionOffset

Offset of the homing mark from the home position

Parameters for passive homing
Tag

Description

<TO>.Sensor[1..4].PassiveHoming.Mo‚Äê Homing mode
de
<TO>.Sensor[1..4].PassiveHoming.Si‚Äê
deInput

Side of the digital input

<TO>.Sensor[1..4].PassiveHoming.Di‚Äê
rection

Homing direction or approach direction

<TO>.Sensor[1..4].PassiveHoming.Di‚Äê
gitalInputAddress

Address of digital input

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1609

Control de movimiento
6.1 Using S7-1500 Motion Control

Position monitoring functions
The following functions are available in the positioning axis/synchronous axis technology
object for monitoring positioning and motion:
‚óè Positioning monitoring (P√°gina 1610)
The actual position value must reach a positioning window within a specified time, and
remain in this positioning window for a minimum dwell time.
‚óè Following error monitoring (P√°gina 1611)
The following error is monitored based on a velocity-dependent following error limit. The
permissible maximum following error depends on the velocity setpoint.
If monitored conditions are violated, then technology alarms are output. The technology object
responds in accordance with the alarm response.

Positioning monitoring
Positioning monitoring monitors the behavior of the actual position at the end of the setpoint
calculation.
As soon as the velocity setpoint reaches the value zero, the actual position value must be
located in the positioning window within a tolerance time. The actual value must not exit the
positioning window during the minimum dwell time.
If the actual position is reached at the end of a positioning motion within the tolerance time and
remains in the positioning window for the minimum dwell time, then "<TO>.StatusWord.X6
(Done)" is set in the technology data block. After expiration of the minimum dwell time, the
"Done" parameter of the corresponding Motion Control instruction is also set. This completes
a motion job.
The following figure shows the chronological sequence and the positioning window:
Minimum dwell time
Position

Positioning window
Time

Setpoint
Actual value

Tolerance time

Positioning monitoring does not make any distinction between how the setpoint interpolation
was completed. The end of setpoint interpolation can for example be reached as follows:
‚óè By the setpoint reaching the target position
‚óè By position-controlled stopping during motion by the Motion Control instruction "MC_Halt"
or "MC_Stop"

1610

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Violation of positioning monitoring
In the following cases, technology alarm 541 is output by the positioning monitoring, and the
technology object is disabled (alarm reaction: remove enable).
‚óè The actual value does not reach the positioning window during the tolerance time.
‚óè The actual value exits the positioning window during the minimum dwell time.

Following error monitoring
The following error in the positioning axis/synchronous axis technology object is monitored
based on a velocity-dependent following error limit. The permissible following error depends on
the velocity setpoint.
A constant permissible following error can be specified for velocities lower than an adjustable
velocity low limit.
Above this low velocity limit, the permissible following error increases in proportion to the
velocity setpoint. The configurable maximum permissible following error is the maximum
velocity limit.

Calculation of the following error
The real following error is the difference between the set and actual position in relation to the
values of the drive. The real following error is therefore greater than the following error
calculated in the CPU and greater than the following error calculated in the trace. When
calculating the following error, the transmission times of the setpoint to the drive and of the
actual position value to the controller are deducted. The following error is calculated from the
delayed position setpoint minus the actual position in the controller.
The calculation of the following error is valid for the following conditions:
‚óè Position control with and without DSC
‚óè Configuration with and without precontrol of the position control loop
‚óè Configuration of the drive coupling via a PROFIdrive telegram or via an analog output

Warning limit
A warning limit can be specified for the following error. The warning limit is input as a
percentage value and operates relative to the current permissible following error. If the warning
limit of the following error is reached, then technology alarm 522 is output. This is a warning and
contains no alarm response.

Violation of the permissible following error
If the permissible following error is exceeded, then technology alarm 521 is output, and the
technology object is disabled (alarm response: remove enable).
When force/torque limiting is activated, the monitoring of the permissible following error can be
deactivated.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1611

Control de movimiento
6.1 Using S7-1500 Motion Control

Standstill signal
When the actual velocity reaches the standstill window and remains there for the minimum
dwell time, the standstill of the axis is indicated.

Tags: Position monitoring functions
Standstill signal
The following technology object tags are relevant for position monitoring and for the standstill
signal:
Status indicators
Tag

Description

<TO>.StatusWord.X7 (Standstill)

Set to the value "TRUE" when the actual velocity reaches the
standstill window and does not exit it within the minimum
dwell time.
The standstill signal is only present for the positioning axis/
synchronous axis.

<TO>.StatusWord.X6 (Done)

Positioning axis/synchronous axis
Set to the value "TRUE" when the actual velocity value rea‚Äê
ches the positioning window within the tolerance time and
remains in the window for the minimum dwell time.
Speed axis
Set to "TRUE" when the motion is complete and the speed
setpoint is therefore equal to zero.

<TO>.ErrorWord.X12 (Positioning‚Äê
Fault)

A positioning error has occurred.

Positions and times
Tag

Description

<TO>.PositioningMonitoring.Tolerance‚Äê Maximum permissible time until positioning window is rea‚Äê
Time
ched
The time is started with the end of the setpoint interpolation.
<TO>.PositioningMonitoring.MinDwell‚Äê
Time

Minimum dwell time in position window

<TO>.PositioningMonitoring.Window

Positioning window

Standstill signal

1612

Tag

Description

<TO>.StandstillSignal.VelocityThres‚Äê
hold

Velocity threshold for the standstill signal

<TO>.StandstillSignal.MinDwellTime

Minimum dwell time below the velocity threshold

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Following error monitoring
The following technology object tags are relevant for following error monitoring:
Status indicators
Tag

Description

<TO>.StatusPositioning.FollowingError Current following error
<TO>.ErrorWord.X11 (FollowingError‚Äê
Fault)

Status indication, that the following error is too large

<TO>.WarningWord.X11 (FollowingE‚Äê
rrorWarning)

Status indication, that the following error warning limit has
been reached

Control bits
Tag

Description

<TO>.FollowingError.EnableMonitoring Enable/disable following error monitoring

Limits
Tag

Description

<TO>.FollowingError.MinVelocity

Lower velocity setpoint for the characteristic curve of the ma‚Äê
ximum following error

<TO>.FollowingError.MinValue

Permissible following error below the "<TO>.FollowingE‚Äê
rror.MinVelocity"

<TO>.FollowingError.MaxValue

Maximum permissible following error at maximum axis velo‚Äê
city

<TO>.FollowingError.WarningLevel

Warning limit as a percentage value relative to the maximum
permissible following error (velocity-dependent in accordan‚Äê
ce with the characteristic curve)

Closed-loop control
The position controller of the positioning axis/synchronous axis is a closed-loop P controller
with or without velocity precontrol. Use the servo gain factor to set the gain of the proportionalaction controller. The achievable servo gain factor depends on the structural requirements of
the axis.
Closed-loop controllers and monitoring are active when closed loop position control is active.
If closed loop position control is inactive, encoder systems, actual value calculation and
monitoring are active on the actual value side.

Velocity precontrol
The velocity precontrol can be used to minimize the velocity-based following error during
position control. As a result, faster positioning is achieved, if needed, because the position
controller only has to compensate disturbances.
When using the velocity precontrol, the velocity setpoint is additionally added to the output of
the position controller. You can weight this additional setpoint by a factor.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1613

Control de movimiento
6.1 Using S7-1500 Motion Control
The symmetry filter is a simplified model of the speed control loop. The symmetry filter is used
to prevent the position controller from overriding the speed manipulated variable during the
acceleration and deceleration phases. To accomplish this, the position setpoint of the position
controller is delayed by the speed control loop substitute time in relation to the speed precontrol.

Dynamic Servo Control (DSC)
In drives that support Dynamic Servo Control (DSC), you can optionally use the closed-loop
position controller in the drive. If you use telegrams that support DSC, DSC is automatically
activated. The position controller in the drive is usually implemented with a rapid speed-control
cycle. This improves the control performance for digitally coupled drives.
The following requirements must be met to use DSC:
‚óè The motor encoder (first encoder in the telegram) of the drive is used as the first encoder for
the technology object.
‚óè One of the following PROFIdrive telegrams is used for the drive:
‚Äì Standard telegram 5 or 6
‚Äì SIEMENS telegram 105 or 106

Consulte tambi√©n
PROFIdrive telegrams (P√°gina 1555)

Control structure
The following figure shows the effective closed loop control structure without DSC:
&RQWUROOHU

%XV

'ULYH


3UHFRQWUROYDOXH

YVHWSRLQW
3UHFRQWURO

,32


[VHWSRLQW

QVHWSRLQW

‡≤¶
%DODQFLQJILOWHU





&ORVHGORRS
SRVLWLRQFRQWURO
[DFWXDOYDOXH

‚ë†
‚ë°
‚ë¢

Interpolator with motion control
Internal consideration of the signal propagation times and the speed-control loop substitute time
Communication between controller and drive

The following figure shows the effective closed loop control structure with DSC:

1614

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
&RQWUROOHU

%XV



'ULYH


YVHWSRLQW
3UHFRQWURO


,32
[VHWSRLQW

%DODQFLQJILOWHU

3UHFRQWURO
YDOXH

‡≤¶

&ORVHGORRS
SRVLWLRQFRQWURO

[DFWXDOYDOXH

‚ë†
‚ë°
‚ë¢

Interpolator with motion control
Internal consideration of speed control loop substitute time
Communication between controller and drive

Additional information
For more information about the control structure, refer to Siemens Industry Online Support in
the FAQ entry 109770664 (https://support.industry.siemens.com/cs/ww/en/view/109770664).

Consulte tambi√©n
Configuration - Control loop (P√°gina 1659)

Non position-controlled operation
The closed loop position control of an axis can be switched off/switched with the following
Motion Control instructions:
‚óè MC_Power
‚óè MC_MoveVelocity
‚óè MC_MoveJog
‚óè MC_MotionInVelocity
The non-position-controlled operation is displayed with "<TO>.StatusWord.X28
(NonPositionControlled)" = TRUE.

MC_Power
The axis is enabled without closed loop position control with "MC_Power" and the parameter
"StartMode" = 0. The closed loop position control remain switched off until a different Motion
Control instruction changes the status of the closed loop position control.

MC_MoveVelocity and MC_MoveJog
A "MC_MoveVelocity" or "MC_MoveJog" job with "PositionControlled" = FALSE forces nonposition-controlled operation.
Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1615

Control de movimiento
6.1 Using S7-1500 Motion Control
A "MC_MoveVelocity" or "MC_MoveJog" job with "PositionControlled" = TRUE forces positioncontrolled operation.
The selected mode remains in effect after the job is completed.

MC_MotionInVelocity and MC_MotionInPosition
A "MC_MotionInVelocity" job with "PositionControlled" = FALSE forces non-position-controlled
operation.
A "MC_MotionInVelocity" job with "PositionControlled" = TRUE forces position-controlled
operation.
The selected mode remains in effect after the job is completed.
A "MC_MotionInPosition" job forces position-controlled operation.

Influence of additional Motion Control instructions
Starting the following Motion Control instructions forces position-controlled operation of the
axis:
‚óè MC_Home with "Mode" = 3, 5
‚óè MC_MoveAbsolute
‚óè MC_MoveRelative
‚óè MC_MoveSuperimposed
‚óè MC_MotionInPosition
‚óè MC_GearIn
‚óè MC_GearInPos (S7-1500T)
‚óè MC_CamIn (S7-1500T)
The closed loop position control remains active after completing the corresponding jobs.
The Motion Control instructions "MC_Halt" and "MC_Stop" are executed in position-controlled
and also in non-position-controlled operation. The status of the closed loop position control is
not changed by "MC_Halt"/"MC_Stop".
A torque limiting activated with "MC_TorqueLimiting" is in effect even with non-positioncontrolled operation.

Tags: Closed-loop control
The following technology object tags are relevant for the closed-loop control:
Parameters

1616

Tag

Description

<TO>.PositionControl.Kv

Proportional gain of the closed loop position control

<TO>.PositionControl.Kpc

Velocity precontrol of the positioning system (in %)

<TO>.PositionControl.EnableDSC

Enable DSC

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Parameters
Tag

Description

<TO>.DynamicAxisModel.VelocityTi‚Äê
meConstant

Speed control loop substitute time [s]

<TO>.PositionControl.ControlDifferen‚Äê
ceQuantization.Mode

Type of quantification
Configuration of a quantization when a drive with stepper
motor interface is connected
0

No quantification

1

Quantization corresponding to encoder resolution

2

Quantization to a direct value (value input in
"<TO>.PositionControl.ControlDifferenceQuanti‚Äê
zation.Value")

Configuration is performed using the parameter view (data
structure).
<TO>.PositionControl.ControlDifferen‚Äê
ceQuantization.Value

Value of quantification
Configuration of a value for quantization to a direct value
("<TO>.PositionControl.ControlDifferenceQuantization.Mo‚Äê
de" = 2)
The quantization value is specified in the position unit of the
axis.
Configuration is performed using the parameter view (data
structure).

6.1.2.3

Configuring

Configuring the Speed-Control Axis technology object
Configuration - Basic Parameters
Configure the basic properties of the technology object in the "Basic Parameters" configuration
window.

Name
Define the name of the speed axis in this field. The technology object is listed under this name
in the project tree. You can use the variables of the speed axis in the user program under this
name.

Axis type
If you want to use the axis in the CPU exclusively as a virtual leading axis for synchronization,
for example, select the "Virtual axis" check box. The configuration of a drive and encoder
connection is not relevant.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1617

Control de movimiento
6.1 Using S7-1500 Motion Control

Units of measure
In the drop-down lists, select the desired units of measurement for the speed and the torque.

Simulation
If you want to move a real axis in the simulation mode, select the "Activate simulation" check
box.
In simulation mode, speed, positioning and synchronous axes can be simulated in the CPU
without connected drives and encoders. Simulation mode is possible as of Technology Version
V3.0 even without a configured drive and encoder connection.
For simulation mode without hardware connected to the CPU, you can influence the startup
time of the CPU via the "Configuration time for central and distributed I/Os" parameter. You can
find the parameter in the CPU properties in the "Startup" area navigation.

Consulte tambi√©n
Units of measure (P√°gina 1389)
Axis in simulation (P√°gina 1569)

Hardware interface
Configuration - Drive
In the "Drive" configuration window, configure which drive type and which drive you want to use.

Drive type
In the drop-down list, select whether you want to deploy a PROFIdrive drive or a drive with an
analog drive connection.
PROFIdrive drives are connected to the controller by means of a digital communication system
(PROFINET or PROFIBUS). The communication is performed via PROFIdrive telegrams.
Drives with an analog drive connection receive the speed setpoint via an analog output signal
(e.g. from -10 V to +10 V) from the CPU.

Drive type: PROFIdrive
Data connection
In the drop-down list, select whether the data connection is to be made directly with the drive
device or via an editable data block in the user program.
Drive/data block
In the "Drive" field, select an already configured PROFIdrive drive/slot. If you have selected a
PROFIdrive drive, you can configure the PROFIdrive drive using the "Device configuration"
button.

1618

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
If no PROFIdrive drive is available for selection, switch to the device configuration, and add a
PROFIdrive drive in the network view.
Nota
Option "Show all modules"
If a PROFIdrive that has already been configured is not available for selection, use the option
"Show all modules" to display all reachable modules.
When you select the option "Show all modules", only the address range for each of the
displayed modules is checked. If the address range of the module is large enough for the
selected PROFIdrive frame, you can select the module. For this reason, make sure that you
select a PROFIdrive drive.
If you have selected "Data block" under the data connection, select a previously created data
block which contains a tag structure of the data type "PD_TELx" ("x" stands for the telegram
number to be used).

Drive type: Analog drive connection
Analog output
In the "Analog output" field, select the PLC tag of the analog output via which the drive is to be
controlled.
In order to be able to select an output, you first need to add an analog output module in the
device configuration and define the PLC tag name for the analog output.
Activating enable output
Select the "Activate enable output" check box if the drive supports an enable.
Select the PLC tag of the digital output for the drive enable in the corresponding field. With the
enable output, the speed controller in the drive is enabled, or disabled.
In order to be able to select an enable output, a digital output module must be added in the
device configuration and the PLC tag name must be defined for the digital output.
Nota
If you do not use an enable output, the drive cannot be immediately disabled on the part of the
system due to error reactions or monitoring functions. A controlled stop of the drive is not
guaranteed.
Enable ready input
Select the "Enable ready input" check box if the drive can signal its readiness.
Select the PLC tag of the digital input via which the drive is to signal its operational readiness
to the technology object in the corresponding field. The power module is switched on and the
analog speed setpoint input is enabled.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1619

Control de movimiento
6.1 Using S7-1500 Motion Control
In order to be able to select a ready input, you first need to add a digital input module in the
device configuration and define the PLC tag name for the digital input.
Nota
The enable output and the ready input can be separately enabled.
The following boundary conditions apply to the activated ready input:
‚óè The axis is only enabled ("MC_Power Status" = TRUE) when a signal is present at the ready
input.
‚óè If a signal is not present at the ready input on an enabled axis, the axis of the alarm response
"Remove enable" is disabled.
‚óè If the axis is disabled with the instruction "MC_Power" ("Enable" = FALSE), the axis is
disabled even when a signal is present at the ready input.

Consulte tambi√©n
Configuration - Data exchange with the drive (P√°gina 1620)
Connect drive/encoder via data block (P√°gina 1440)
Drive and encoder connection (P√°gina 1554)

Configuration - Data exchange with the drive
Configure the data exchange with the drive in the "Data exchange with the drive" configuration
window.
The configuration differs according to the selected drive type:

Drive type: PROFIdrive
Drive telegram
The telegram to the drive that is set in the device configuration is preselected in the drop-down
list.
Automatically apply drive values during configuration (offline)
Select the check box if you want to transfer the offline values of the drive "Reference speed",
"Maximum speed" and "Reference torque" to the configuration of the technology object in the
project.
Automatically apply drive values at runtime (online)
Select the check box if you want to transfer the effective values "Reference speed", "Maximum
speed" and "Reference torque" online in the drive to the CPU during runtime. The drive
parameters are transferred from the bus after the (re-)initialization of the technology object or
the (re)start of the drive or the CPU.

1620

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Alternatively, you must synchronize the following parameters manually:
‚óè Reference speed
Configure the reference speed of the drive in accordance with the manufacturer's
specifications in this field. The specification of the drive speed is a percentage of the
reference speed in the range -200% to 200%.
‚óè Maximum speed
Configure the maximum speed of the drive in this field.
‚óè Reference torque
Configure the reference torque of the drive corresponding to its configuration in this field.
The reference torque is needed for force/torque reduction, which is supported with telegram
10x.
Supplementary data
Select the "Torque data" check box if you want to configure the data connection of the torque
data. If you have selected a drive with which the additional telegram 750 has been configured,
the "Torque data" check box is preselected.
Data connection
In the drop-down list, define whether the data connection should be made via additional
telegrams or data blocks:
‚óè If you select the entry "Additional telegram" in the "Data connection" drop-down list, you can
edit the "Additional telegram" drop-down list.
‚óè If you select the "Data block" entry in the "Data connection" drop-down list, you can select
the previously created data block which contains a tag structure of the "PD_TELx" data type
("x" stands for the additional telegram number that is used).
Data block / additional telegram
Select an additional telegram configured in the "Additional telegram" field.
Select the "Show all modules" check box if you want to display all submodules of the connected
drive. You can also find self-defined additional telegrams with this function.
In the "Data block" field, select the data block which you want to use to integrate the torque data.
Nota
Automatic transfer of drive parameters is only possible with SINAMICS drives as of V4.x. For
this, "Drive" must be selected for the data connection in configuration window "Hardware
interface > Drive".

Drive type: Analog drive connection
Reference speed
The reference speed of the drive is the speed with which the drive spins when there is an output
of 100% at the analog output. The reference speed must be configured for the drive and
transferred in the configuration of the technology object.
The analog value that is output at 100% depends on the type of the analog output. For example,
for an analog output with +/- 10 V, the value 10 V is output at 100%.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1621

Control de movimiento
6.1 Using S7-1500 Motion Control
Analog outputs can be overridden by approximately 17%. This means that an analog output
can be operated in the range from -117% to 117%, insofar as the drive permits this.

Consulte tambi√©n
Automatic transfer of drive and encoder parameters in the device (P√°gina 1560)
Connect drive/encoder via data block (P√°gina 1440)
Drive and encoder connection (P√°gina 1554)

Extended Parameters
Configuration - Mechanics
Configure the connection of the load to the drive in the "Mechanics" configuration window.

Drive mechanism
Select the "Invert drive direction" check box if the direction of rotation of the drive is to be
inverted.

Load gear
The gear ratio of the load gear is specified as the ratio between motor revolutions and load
revolutions.
In this "Number of motor revolutions" configuration field, configure the integer number of motor
revolutions.
In this "Number of load revolutions" configuration field, configure the integer number of load
revolutions.

Consulte tambi√©n
Mechanics (P√°gina 1572)

Configuration - Dynamic Defaults
In the "Dynamic default values" configuration window, configure the default values for speed,
acceleration, deceleration jerk of the axis.
The default values take effect when values < 0 are specified in Motion Control instructions for
the "Velocity", "Acceleration", "Deceleration" or "Jerk" parameters. The default values can be
applied separately for each of the parameters just listed.

Speed
In this field, define the default value for the speed of the axis.

1622

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Acceleration/deceleration - Ramp-up time/ramp-down time
Set the desired default value for acceleration in the "Ramp-up time" or "Acceleration" fields.
The desired deceleration can be set in the "Ramp-down time" or "Deceleration" fields.
The following equations show the relationship between the ramp-up time and acceleration and
the ramp-down time and deceleration:

Ramp-up time =

Ramp-down time =

Speed
Acceleration

Speed
Deceleration

Nota
A change in the speed influences the acceleration and deceleration values of the axis. The
ramp-up and ramp-down times are retained.

Smoothing time/jerk
You can enter the jerk limit parameters in the "Smoothing time" box, or alternatively in the "Jerk"
box:
‚óè Set the desired jerk for the acceleration and deceleration ramp in the "Jerk" field. The value
0 means that jerk limiting is deactivated.
‚óè Set the desired smoothing time for the acceleration ramp in the "Smoothing time" field.
Nota
The jerk value is identical for the acceleration and deceleration ramp. The smoothing time
in effect for the deceleration ramp results from the following relationships:
‚óè Acceleration > Deceleration
A shorter smoothing time is used for the deceleration ramp compared with the
acceleration ramp.
‚óè Acceleration < Deceleration
A longer smoothing time is used for the deceleration ramp compared with the
acceleration ramp.
‚óè Acceleration = Deceleration
The smoothing times of the acceleration and deceleration ramp are equal.
If an error occurs, the axis decelerates with the configured emergency stop deceleration. A
configured jerk limit is not taken into account for this.
The following equations show the relationship between the smoothing times and the jerk:

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1623

Control de movimiento
6.1 Using S7-1500 Motion Control

6PRRWKLQJWLPH DFFHOHUDWLRQUDPS  

6PRRWKLQJWLPH GHFHOHUDWLRQUDPS  

$FFHOHUDWLRQ
-HUN
'HFHOHUDWLRQ
-HUN

Motion jobs started in the user program are performed with the selected jerk.

Consulte tambi√©n
Velocity profile (P√°gina 1579)

Configuration - Emergency stop
In the "Emergency stop" configuration window, you can configure the emergency stop
deceleration of the axis. In the event of an error, and when disabling the axis, the axis is brought
to a standstill with this deceleration using the Motion Control instruction "MC_Power" (input
parameter "StopMode" = 0).

Emergency deceleration/emergency stop ramp-down time
Configure the deceleration value for emergency stop in the "Emergency stop deceleration" field
or the "Emergency stop ramp-down time" field.
The relationship between emergency stop ramp-down time and emergency stop deceleration
can be seen in the following equation:

Emergency stop ramp-down time =

Maximum speed
Emergency stop deceleration

The configuration of the emergency stop deceleration is related to the configured maximum
speed of the axis. If the maximum speed of the axis is changed, then the value of the
emergency deceleration also changes (the emergency stop ramp-down time remains
unchanged).

Consulte tambi√©n
Emergency stop deceleration (P√°gina 1581)

Limits
Configuration - Dynamic limits
In the "Dynamic limits" configuration window, configure the maximum values for speed,
acceleration, deceleration and jerk of the axis.

1624

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Maximum speed
In this field, define the maximum permitted speed of the axis.

Maximum acceleration/maximum deceleration - ramp-up time/ramp-down time
Set the desired acceleration in the "Ramp-up time" or "Acceleration" fields. The desired
deceleration can be set in the "Ramp-down time" or "Deceleration" fields.
The following equations show the relationship between the ramp-up time and acceleration and
the ramp-down time and deceleration:

Ramp-up time =

Ramp-down time =

Maximum velocity
Acceleration

Maximum speed
Deceleration

Nota
Change of maximum speed
A change in the maximum speed influences the acceleration and deceleration values of the
axis. The ramp-up and ramp-down times are retained.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1625

Control de movimiento
6.1 Using S7-1500 Motion Control

Smoothing time/jerk
You can enter the jerk limit parameters in the "Smoothing time" box, or alternatively in the "Jerk"
box:
‚óè Set the desired jerk for the acceleration ramp and the deceleration ramp in the "Maximum
jerk" box. The value 0 means that the jerk is not limited.
‚óè Set the desired smoothing time for the acceleration ramp in the "Smoothing time" field.
Nota
Various acceleration and deceleration values
The configured smoothing time displayed in the configuration, applies only to the
acceleration ramp.
If the values of the acceleration and deceleration differ, the smoothing time of the
deceleration ramp is calculated and used according to the jerk of the acceleration ramp.
The smoothing time of the deceleration is adapted as follows:
‚óè Acceleration > Deceleration
A shorter smoothing time is used for the deceleration ramp compared with the
acceleration ramp.
‚óè Acceleration < Deceleration
A longer smoothing time is used for the deceleration ramp compared with the
acceleration ramp.
‚óè Acceleration = Deceleration
The smoothing times of the acceleration and deceleration ramp are equal.
If an error occurs, the axis decelerates with the configured emergency stop deceleration
(P√°gina 1581) (alarm reaction "Stop with maximum dynamic values"). A configured jerk limit
is not taken into account for this.
The following equations show the relationship between the smoothing times and the jerk:

6PRRWKLQJWLPH DFFHOHUDWLRQUDPS  

6PRRWKLQJWLPH GHFHOHUDWLRQUDPS  

$FFHOHUDWLRQ
-HUN
'HFHOHUDWLRQ
-HUN

Motion jobs started in the user program are performed with the selected jerk.

Consulte tambi√©n
Dynamic limits in gearing (P√°gina 1886)

Configuration - Torque limits
Configure the torque limiting of the drive in the "Torque limits" configuration window.
The configuration is only available if a drive that supports force/torque limiting is selected and
a telegram 10x is used.

1626

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Effective
In the drop-down list, select whether the limit value is to be in effect "on load side" or "on motor
side".

Torque limiting
Enter a default value for the torque limit in the specified unit of measure in this field.
The default value is in effect when the torque limiting is specified using Motion Control
instruction "MC_TorqueLimiting", input parameter "Limit" < 0.
If the efficiency of the gear is crucial, you can set it in the "<TO>.Actor.Efficiency" tag.

Consulte tambi√©n
Force/torque limiting (P√°gina 1583)

Configuring the Positioning Axis technology object
Configuration - Basic Parameters
Configure the basic properties of the technology object in the "Basic Parameters" configuration
window.

Name
Define the name of the positioning axis in this field. The technology object is listed under this
name in the project tree. The variables of the technology object can be used in the user program
under this name.

Axis type
If you want to use the axis in the CPU exclusively as a virtual leading axis for synchronization,
for example, select the "Virtual axis" check box. The configuration of a drive and encoder
connection is not relevant.
In this selection, configure whether the axis should perform linear or rotary motions.

Units of measure
In the drop-down list, select the desired units of measure for the position, velocity, torque and
force of the axis.
If you wish to use six decimal places in the selected unit, select the check box "Use position
values with higher resolution".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1627

Control de movimiento
6.1 Using S7-1500 Motion Control

Modulo
Select the "Enable modulo" check box if you want to use a recurring system of units for the axis
(e.g. 0¬∞ to 360¬∞ for an axis of the "rotary" axis type).
‚óè Modulo start value
In this field, define the position at which the modulo range should begin (e.g. 0¬∞ for an axis
of the "rotary" axis type).
‚óè Modulo length
In this field, define the length of the modulo range (e.g. 360¬∞ for an axis of the "rotary" axis
type).

Simulation
If you want to move a real axis in the simulation mode, select the "Activate simulation" check
box.
In simulation mode, speed, positioning and synchronous axes can be simulated in the CPU
without connected drives and encoders. Simulation mode is possible as of Technology Version
V3.0 even without a configured drive and encoder connection.
For simulation mode without hardware connected to the CPU, you can influence the startup
time of the CPU via the "Configuration time for central and distributed I/Os" parameter. You can
find the parameter in the CPU properties in the "Startup" area navigation.

Consulte tambi√©n
Axis in simulation (P√°gina 1569)
Units of measure (P√°gina 1389)
Modulo setting (P√°gina 1551)
Mechanics (P√°gina 1572)

Hardware interface
Configuration - Drive
In the "Drive" configuration window, configure which drive type and which drive you want to use.

Drive type
In the drop-down list, select whether you want to deploy a PROFIdrive drive or a drive with an
analog drive connection.
PROFIdrive drives are connected to the controller by means of a digital communication system
(PROFINET or PROFIBUS). The communication is performed via PROFIdrive telegrams.
Drives with an analog drive connection receive the speed setpoint via an analog output signal
(e.g. from -10 V to +10 V) from the CPU.

1628

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Drive type: PROFIdrive
Data connection
In the drop-down list, select whether the data connection is to be made directly with the drive
device or via an editable data block in the user program.
Drive/data block
In the "Drive" field, select an already configured PROFIdrive drive/slot. When you have
selected a PROFIdrive drive, you can configure the PROFIdrive drive using the "Device
configuration" and "Drive configuration" buttons.
If no PROFIdrive drive is available for selection, switch to the device configuration, and add a
PROFIdrive drive in the network view. Switch to drive configuration to configure the drive.
Nota
Option "Show all modules"
If a PROFIdrive that has already been configured is not available for selection, use the option
"Show all modules" to display all reachable modules.
When you select the option "Show all modules", only the address range for each of the
displayed modules is checked. If the address range of the module is large enough for the
selected PROFIdrive frame, you can select the module. For this reason, make sure that you
select a PROFIdrive drive.
If you have selected "Data block" under the data connection, select a previously created data
block which contains a tag structure of the data type "PD_TELx" ("x" stands for the telegram
number to be used).

Drive type: Analog drive connection
Analog output
In the "Analog output" field, select the PLC tag of the analog output via which the drive is to be
controlled.
In order to be able to select an output, you first need to add an analog output module in the
device configuration and define the PLC tag name for the analog output.
Activating enable output
Select the "Activate enable output" check box if the drive supports an enable.
Select the PLC tag of the digital output for the drive enable in the corresponding field. With the
enable output, the speed controller in the drive is enabled, or disabled.
In order to be able to select an enable output, a digital output module must be added in the
device configuration and the PLC tag name must be defined for the digital output.
Nota
If you do not use an enable output, the drive cannot be immediately disabled on the part of the
system due to error reactions or monitoring functions. A controlled stop of the drive is not
guaranteed.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1629

Control de movimiento
6.1 Using S7-1500 Motion Control
Enable ready input
Select the "Enable ready input" check box if the drive can signal its readiness.
Select the PLC tag of the digital input via which the drive is to signal its operational readiness
to the technology object in the corresponding field. The power module is switched on and the
analog speed setpoint input is enabled.
In order to be able to select a ready input, you first need to add a digital input module in the
device configuration and define the PLC tag name for the digital input.
Nota
The enable output and the ready input can be separately enabled.
The following boundary conditions apply to the activated ready input:
‚óè The axis is only enabled ("MC_Power Status" = TRUE) when a signal is present at the ready
input.
‚óè If a signal is not present at the ready input on an enabled axis, the axis is disabled with an
error.
‚óè If the axis is disabled with the instruction "MC_Power" ("Enable" = FALSE), the axis is
disabled even when a signal is present at the ready input.

Consulte tambi√©n
Connect drive/encoder via data block (P√°gina 1440)
Data connection drive/encoder via data block (P√°gina 1570)

Configuration - Encoder
For closed loop position control, positioning axes require an actual position value in the form of
an encoder position. The encoder position is transmitted to the controller by means of a
PROFIdrive telegram.
As well as the S7-1500, the S7-1500T also offers the possibility to configure up to four encoders
and switch between the encoders. You control the switch in the user program with the Motion
Control instruction "MC_SetSensor".

Encoder on startup (S7-1500T)
In the drop-down list, select the encoder that is to be active after startup of the CPU
(STARTUP). The encoder must be configured and marked as "used".
This encoder is used after startup of the CPU and after a restart of the technology object. At an
operating mode transition from STOP ‚Üí RUN of the CPU (without restart of the technology
object), the encoder that was also active before the STOP is still being used.

Use encoder (S7-1500T)
Select the "Use encoder" check box if you want to use this encoder alternatively for closed loop
position control.

1630

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Data connection
In the drop-down list, select whether the data connection should be established directly with the
encoder or via a data block that can be edited in the user program.
The selection is only possible for encoders that are connected via PROFIdrive and support
parameter P979.

Encoder/data block
Select a previously configured encoder in this configuration field.
The following encoders can be selected:
‚óè Connection to the drive (not with analog drive connection)
The encoder is configured via the configuration of the PROFIdrive drive. The drive evaluates
the encoder signals and sends them to the controller in the PROFIdrive telegram.
‚óè Encoder on technology module (TM)
Select a previously configured technology module and the channel to be used. Only
technology modules set to the "Position input for Motion Control" mode are displayed for
selection.
If no technology module is available for selection, change to the device configuration and
add a technology module. If you have selected a technology module, you can access the
configuration of the technology module using the "Device configuration" button.
You can operate the technology module centrally on an S7-1500 CPU or decentrally on a
distributed I/O. Isochronous mode is not possible with central operation in the CPU.
You can identify the technology modules suitable for position detection for Motion Control
in the documentation for the technology module and the catalog data.
‚óè PROFIdrive encoder on PROFINET/PROFIBUS (PROFIdrive)
In the "PROFIdrive encoder" field, select a configured encoder on PROFINET/PROFIBUS.
When you have selected an encoder, you can configure the encoder using the "Device
configuration" button.
Switch to the device configuration in the network view, and add an encoder, in the event that
no encoder can be selected.
Nota
Option "Show all modules"
If a PROFIdrive that has already been configured is not available for selection, use the
option "Show all modules" to display all reachable modules.
When you select the option "Show all modules", only the address range for each of the
displayed modules is checked. If the address range of the module is large enough for the
selected PROFIdrive frame, you can select the module. For this reason, make sure that you
select a PROFIdrive encoder.
If you have selected "Data block" under the data connection, select in the "Data block" field a
previously created data block which contains a tag structure of the data type "PD_TELx" ("x"
stands for the telegram number to be used).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1631

Control de movimiento
6.1 Using S7-1500 Motion Control

Encoder type
Select the encoder type of the encoder in the drop-down list. The following encoder types are
available:
‚óè Incremental (P√°gina 1559)
‚óè Absolute (P√°gina 1559) (measuring range > traversing range)
‚óè Cyclic absolute (P√°gina 1559) (measuring range < traversing range)
Recommended settings for absolute actual values: The "Cyclic absolute" encoder type is
recommended. With this setting, the position of the zero crossing of the encoder is
automatically taken into consideration by the technology object.
Nota
Measuring range of the absolute encoder
Observe the boundary conditions with absolute values.
You can find more information in the section "Absolute actual value (P√°gina 1559)" of the
"S7-1500/S7-1500T Axis functions" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766462).

Consulte tambi√©n
Data connection drive/encoder via data block (P√°gina 1570)
Connect drive/encoder via data block (P√°gina 1440)
Using multiple encoders (P√°gina 1562)
"Drive and encoder connection" section in the "S7-1500/S7-1500T Axis functions" function
manual (https://support.industry.siemens.com/cs/ww/en/view/109766462)

Configuration - Data exchange with the drive
Configure the data exchange with the drive in the "Data exchange with the drive" configuration
window.
The configuration differs according to the selected drive type:

Drive type: PROFIdrive
Drive telegram
The telegram to the drive that is set in the device configuration is preselected in the drop-down
list.
Automatically apply drive values during configuration (offline)
Select the check box if you want to transfer the offline values of the drive "Reference speed",
"Maximum speed" and "Reference torque" to the configuration of the technology object in the
project.
Automatically apply drive values at runtime (online)

1632

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Select the check box if you want to transfer the effective values "Reference speed", "Maximum
speed" and "Reference torque" online in the drive to the CPU during runtime. The drive
parameters are transferred from the bus after the (re-)initialization of the technology object or
the (re)start of the drive or the CPU.
Alternatively, you must synchronize the following parameters manually:
‚óè Reference speed
Configure the reference speed of the drive in accordance with the manufacturer's
specifications in this field. The specification of the drive speed is a percentage of the
reference speed in the range -200% to 200%.
‚óè Maximum speed
Configure the maximum speed of the drive in this field.
‚óè Reference torque
Configure the reference torque of the drive corresponding to its configuration in this field.
The reference torque is needed for force/torque reduction, which is supported with telegram
10x.
Supplementary data
Select the "Torque data" check box if you want to configure the data connection of the torque
data. If you have selected a drive with which the supplemental telegram 750 has been
configured, the "Torque data" check box is preselected.
Data connection
In the drop-down list, define whether the data connection should be made via supplemental
telegrams or data blocks:
‚óè If you select the entry "Supplemental telegram" in the "Data connection" drop-down list, you
can edit the "Supplemental telegram" drop-down list.
‚óè If you select the "Data block" entry in the "Data connection" drop-down list, you can select
the previously created data block which contains a tag structure of the "PD_TELx" data type
("x" stands for the additional telegram number that is used).
Data block / supplemental telegram
Select an supplemental telegram configured in the "Supplemental telegram" field.
Select the "Show all modules" check box if you want to display all submodules of the connected
drive. You can also find self-defined supplemental telegrams with this function.
In the "Data block" field, select the data block which you want to use to integrate the torque data.
Nota
Automatic transfer of drive parameters is only possible with SINAMICS drives as of V4.x. To do
this, set the "Drive" data connection in the configuration window "Hardware interface > Drive".

Drive type: Analog drive connection
Reference speed

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1633

Control de movimiento
6.1 Using S7-1500 Motion Control
The reference speed of the drive is the speed with which the drive spins when there is an output
of 100% at the analog output. The reference speed must be configured for the drive and
transferred in the configuration of the technology object.
The analog value that is output at 100% depends on the type of the analog output. For example,
for an analog output with +/- 10 V, the value 10 V is output at 100%.
Analog outputs can be overridden by approximately 17%. This means that an analog output
can be operated in the range from -117% to 117%, insofar as the drive permits this.
Maximum speed
Specify the maximum speed of the drive in this field.

Consulte tambi√©n
Automatic transfer of drive and encoder parameters in the device (P√°gina 1560)
Connect drive/encoder via data block (P√°gina 1440)

Configuration - Data exchange with encoder
Configure detailed encoder parameters and the data exchange of the encoder in the "Data
exchange with encoder" configuration window.
If you are using an S7-1500T CPU, you need to define the settings for each of the maximum
four configured encoders.
The display and selection of the configuration parameters described here is dependent on the
following parameters:
‚óè Configuration window "Basic parameters": Drive type (linear/rotary)
‚óè Configuration window "Hardware interface > Encoder": Encoder type (incremental/absolute/
cyclic absolute)
‚óè Configuration window - "Extended parameters > Mechanics": Encoder mounting type

Settings for (S7-1500T)
In the drop-down list, select the encoder for which you wish to edit the following configurations.

Encoder telegram
The telegram to the encoder that is set in the device configuration is preselected in the dropdown list.

Automatically apply encoder values during configuration (offline)
Select the check box if you want to transfer the offline values of the encoder to the configuration
of the technology object in the project.

1634

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Automatically apply encoder values during runtime (online)
Select the check box if you want to transfer the effective values online in the encoder to the CPU
during runtime. The encoder parameters are transferred from the bus after the (re-)initialization
of the technology object and (re)start of the encoder or the CPU.
Nota
Automatic transfer of encoder parameters is only possible with PROFIdrive encoders as of
product version A16. For this, "Hardware interface > Encoder" must be selected as the
"Encoder" data connection in the configuration window.
Alternatively, you must manually calibrate the following parameters, depending on encoder
type.

Measuring system
In the drop-down list, select the measuring procedure. The options are "Linear" and "Rotary".

Additional parameters
Depending on the selected measuring system and the encoder type selected under
"Technology object > Configurations > Hardware interface > Encoders", configure the
parameters described below:
‚óè Measuring system: Rotary; encoder type: Incremental
Parameter

Description

Increments per revolution

Configure the number of increments that the encoder re‚Äê
solves per revolution in this field.

Bits for fine resolution in the incremen‚Äê Configure the number of bits for fine resolution within the
tal actual value (Gx_XIST1)
incremental actual value (Gx_XIST1) in this field.

‚óè Measuring system: Rotary; encoder type: Absolute
Parameter

Description

Increments per revolution

Configure the number of increments that the encoder re‚Äê
solves per revolution in this field.

Number of revolutions

Configure the number of revolutions that the absolute en‚Äê
coder can detect in this field.

Bits for fine resolution in the incremen‚Äê Configure the number of bits for fine resolution within the
tal actual value (Gx_XIST1)
incremental actual value (Gx_XIST1) in this field.
Bits for fine resolution in the absolute
actual value (Gx_XIST2)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Configure the number of bits for fine resolution within the
absolute actual value (Gx_XIST2) in this field.

1635

Control de movimiento
6.1 Using S7-1500 Motion Control
‚óè Measuring system: Rotary; encoder type: Cyclic absolute
Parameter

Description

Increments per revolution

Configure the number of increments that the encoder re‚Äê
solves per revolution in this field.

Number of revolutions

Configure the number of revolutions that the absolute en‚Äê
coder can detect in this field.

Bits for fine resolution in the incremen‚Äê Configure the number of bits for fine resolution within the
tal actual value (Gx_XIST1)
incremental actual value (Gx_XIST1) in this field.
Bits for fine resolution in the absolute
actual value (Gx_XIST2)

Configure the number of bits for fine resolution within the
absolute actual value (Gx_XIST2) in this field.

‚óè Measuring system: Linear; encoder type: Incremental
Parameter

Description

Distance between two increments

Configure the distance between two increments of the en‚Äê
coder in this field.

Bits for fine resolution in the incremen‚Äê Configure the number of bits for fine resolution within the
tal actual value (Gx_XIST1)
incremental actual value (Gx_XIST1) in this field.

‚óè Measuring system: Linear; encoder type: Absolute
Parameter

Description

Distance between two increments

Configure the distance between two increments of the en‚Äê
coder in this field.

Bits for fine resolution in the incremen‚Äê Configure the number of bits for fine resolution within the
tal actual value (Gx_XIST1)
incremental actual value (Gx_XIST1) in this field.
Bits for fine resolution in the absolute
actual value (Gx_XIST2)

Configure the number of bits for fine resolution within the
absolute actual value (Gx_XIST2) in this field.

‚óè Measuring system: Linear; encoder type: Cyclic absolute
Parameter

Description

Distance between two increments

Configure the distance between two increments of the en‚Äê
coder in this field.

Bits for fine resolution in the incremen‚Äê Configure the number of bits for fine resolution within the
tal actual value (Gx_XIST1)
incremental actual value (Gx_XIST1) in this field.
Bits for fine resolution in the absolute
actual value (Gx_XIST2)

Configure the number of bits for fine resolution within the
absolute actual value (Gx_XIST2) in this field.

Consulte tambi√©n
Automatic transfer of drive and encoder parameters in the device (P√°gina 1560)
Connect drive/encoder via data block (P√°gina 1440)
Configuration - Mechanics (P√°gina 1637)
Configuration - Encoder (P√°gina 1630)
Configuration - Data exchange (P√°gina 1665)

1636

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Configuration - Leading value settings
In the "Leading value settings" configuration window, select the parameters of the leading value
for cross-PLC synchronous operation.

Provision of leading value
In this area, define the settings for transferring the leading value to other CPUs:
Field

Description

Provide cross-PLC lea‚Äê
ding value

Select this check box to make the setpoint or actual value available as leading
value for a cross-PLC synchronous operation.

Transfer area

In this drop-down list, select the output tag of the transfer area set up between
the CPU of the leading axis and the CPUs of the following axes.
You can find more information about the transfer range in the section "Setting
up communication via Controller-Controller direct data exchange" of the do‚Äê
cumentation "S7-1500/S7-1500T Synchronous operation functions" (https://
support.industry.siemens.com/cs/ww/en/view/109766464).

Delay time of the local leading value
In this area, configure the settings for local synchronous operation:
Field

Description

Allow system calcula‚Äê
tion

Select this check box to adapt the delay time of the local leading value in the
system. System calculation is started when you trigger the calculation in the
interconnection overview.

Delay time

If the "Allow system calculation" check box is cleared, this field can be edited.
Enter the delay time in this field.
The entered delay time determines the output delay of the leading value for
the local following axes.
(<TO>.CrossPlcSynchronousOperation.LocalLeadingValueDelayTime)

Interconnection over‚Äê
view

You open the interconnection overview via this link. With a cross-PLC
synchronous operation, the interconnection overview contains an overview
of the interconnected leading and following axes and their CPU assignment.

Extended Parameters
Configuration - Mechanics
In the "Mechanics" configuration window, configure the mounting type of the encoder, and the
adaptation of the actual encoder value to the mechanical conditions.

Settings for (S7-1500T)
In the drop-down list, select the encoder for which the following configurations are to apply.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1637

Control de movimiento
6.1 Using S7-1500 Motion Control

Encoder mounting type
In the drop-down list, select how the encoder is mounted to the mechanics.
The configuration differs depending on the axis type and the encoder mounting type selected
in the "Basic parameters" configuration window.
Axis type: Linear
‚óè Linear - On motor shaft (P√°gina 1638)
‚óè Linear - On load side (P√°gina 1639)
‚óè Linear - External Measuring System (P√°gina 1639)
Axis type: Rotary
‚óè Rotary - On motor shaft (P√°gina 1640)
‚óè Rotary - On load side (P√°gina 1640)
‚óè Rotary - External Measuring System (P√°gina 1641)

Invert encoder direction
Select this check box if you must invert the direction of rotation of the encoder.

Consulte tambi√©n
Using multiple encoders (P√°gina 1562)

Axis type: Linear
Linear - On motor shaft
The encoder is connected to the motor shaft in a mechanically fixed manner. Motor and
encoder form a unit.

Drive mechanism
Select the "Invert drive direction" check box if the direction of rotation of the drive is to be
inverted.

Load gear
The gear ratio of the load gear is specified as the ratio between motor revolutions and load
revolutions.
In this "Number of motor revolutions" configuration field, configure the integer number of motor
revolutions.
In this "Number of load revolutions" configuration field, configure the integer number of load
revolutions.

1638

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Position parameters
In the "Leadscrew pitch" configuration field, configure the distance by which the load is moved
when the leadscrew makes one revolution.

Linear - On load side
The encoder is mechanically connected to the load side of the gear.

Drive mechanism
Select the "Invert drive direction" check box if the direction of rotation of the drive is to be
inverted.

Load gear
The gear ratio of the load gear is specified as the ratio between motor revolutions and load
revolutions.
In this "Number of motor revolutions" configuration field, configure the integer number of motor
revolutions.
In this "Number of load revolutions" configuration field, configure the integer number of load
revolutions.

Position parameters
In the "Leadscrew pitch" configuration field, configure the distance by which the load is moved
when the leadscrew makes one revolution.

Linear - External Measuring System
An external measuring system provides the position values of the linear load motion.

Distance per encoder revolution
In this configuration field, configure the linear load travel per encoder revolution.

Drive mechanism
Select the "Invert drive direction" check box if the direction of rotation of the drive is to be
inverted.

Load gear
The gear ratio of the load gear is specified as the ratio between motor revolutions and load
revolutions.
In this "Number of motor revolutions" configuration field, configure the integer number of motor
revolutions.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1639

Control de movimiento
6.1 Using S7-1500 Motion Control
In this "Number of load revolutions" configuration field, configure the integer number of load
revolutions.

Position parameters
In the "Leadscrew pitch" configuration field, configure the distance by which the load is moved
when the leadscrew makes one revolution.

Axis type: Rotary
Rotary - On motor shaft
The encoder is connected to the motor shaft in a mechanically fixed manner. Motor and
encoder form a unit.

Drive mechanism
Select the "Invert drive direction" check box if the direction of rotation of the drive is to be
inverted.

Load gear
The gear ratio of the load gear is specified as the ratio between motor revolutions and load
revolutions.
In this "Number of motor revolutions" configuration field, configure the integer number of motor
revolutions.
In this "Number of load revolutions" configuration field, configure the integer number of load
revolutions.

Rotary - On load side
The encoder is mechanically connected to the load side of the gear.

Drive mechanism
Select the "Invert drive direction" check box if the direction of rotation of the drive is to be
inverted.

Load gear
The gear ratio of the load gear is specified as the ratio between motor revolutions and load
revolutions.
In this "Number of motor revolutions" configuration field, configure the integer number of motor
revolutions.
In this "Number of load revolutions" configuration field, configure the integer number of load
revolutions.

1640

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Rotary - External Measuring System
An external measuring system provides the position values of the rotary load motion.

Distance per encoder revolution
In this configuration field, configure the linear load travel per encoder revolution.

Drive mechanism
Select the "Invert drive direction" check box if the direction of rotation of the drive is to be
inverted.

Load gear
The gear ratio of the load gear is specified as the ratio between motor revolutions and load
revolutions.
In this "Number of motor revolutions" configuration field, configure the integer number of motor
revolutions.
In this "Number of load revolutions" configuration field, configure the integer number of load
revolutions.

Configuration - Dynamic Defaults
In the "Dynamic default values" configuration window, configure the default values for velocity,
acceleration, deceleration and jerk of the axis.
The default values take effect when values < 0 are specified in Motion Control instructions for
the "Velocity", "Acceleration", "Deceleration" or "Jerk" parameters. The default values can be
applied separately for each of the parameters just listed.
The default values for acceleration and deceleration also act on the traversing motions of active
homing.

Velocity
In this field, define the default value for the velocity of the axis.

Acceleration/deceleration - Ramp-up time/ramp-down time
Configure the desired default value for acceleration in the "Ramp-up time" or "Acceleration"
fields. The desired deceleration can be set in the "Ramp-down time" or "Deceleration" fields.
The following equations show the relationship between the ramp-up time and acceleration and
the ramp-down time and deceleration:

Ramp-up time =

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Velocity
Acceleration

1641

Control de movimiento
6.1 Using S7-1500 Motion Control

Ramp-down time =

Velocity
Deceleration

Nota
A change in the velocity influences the acceleration and deceleration values of the axis. The
ramp-up and ramp-down times are retained.

Smoothing time/jerk
You can enter the jerk limit parameters in the "Smoothing time" box, or alternatively in the "Jerk"
box:
‚óè Set the desired jerk for the acceleration and deceleration ramp in the "Jerk" field. The value
0 means that jerk limiting is deactivated.
‚óè Set the desired smoothing time for the acceleration ramp in the "Smoothing time" field.
Nota
The jerk value is identical for the acceleration and deceleration ramp. The smoothing time
in effect for the deceleration ramp results from the following relationships:
‚óè Acceleration > Deceleration
A shorter smoothing time is used for the deceleration ramp compared with the
acceleration ramp.
‚óè Acceleration < Deceleration
A longer smoothing time is used for the deceleration ramp compared with the
acceleration ramp.
‚óè Acceleration = Deceleration
The smoothing times of the acceleration and deceleration ramp are equal.
If an error occurs, the axis decelerates with the configured emergency stop deceleration. A
configured jerk limit is not taken into account for this.
The following equations show the relationship between the smoothing times and the jerk:

6PRRWKLQJWLPH DFFHOHUDWLRQUDPS  

6PRRWKLQJWLPH GHFHOHUDWLRQUDPS  

$FFHOHUDWLRQ
-HUN
'HFHOHUDWLRQ
-HUN

Motion jobs started in the user program are performed with the selected jerk.

Consulte tambi√©n
Velocity profile (P√°gina 1579)

1642

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Configuration - Emergency stop
In the "Emergency stop" configuration window, you can configure the emergency stop
deceleration of the axis. In the event of an error, and when disabling the axis, the axis is brought
to a standstill with this deceleration using the Motion Control instruction "MC_Power" (input
parameter "StopMode" = 0).

Emergency deceleration/emergency stop ramp-down time
Configure the deceleration value for emergency stop in the "Emergency stop deceleration" field
or the "Emergency stop ramp-down time" field.
The relationship between emergency stop ramp-down time and emergency stop deceleration
can be seen in the following equation:

Emergency stop ramp-down time =

Maximum velocity
Emergency stop deceleration

The configuration of the emergency stop deceleration is related to the configured maximum
velocity of the axis. If the maximum velocity of the axis changes, then the value of the
emergency deceleration also changes (the emergency stop ramp-down time remains
unchanged).

Consulte tambi√©n
Emergency stop deceleration (P√°gina 1581)

Limits
Configuration - Position limits
Configure the hardware and software limit switches of the axis in the "Position limits"
configuration window.

Enable HW limit switches
The check box activates the function of the negative and positive hardware limit switches. The
negative hardware limit switch is located on the side in the negative direction of travel, and the
positive hardware limit switch on the side in the positive direction of travel.
If a hardware limit switch is reached, technology alarm 531 is output, and the technology object
is disabled (alarm response: remove enable).
Exception:
1. If a hardware limit switch is overtraveled during an active home position approach with
activated direction reversal at the hardware limit switch, the axis stops with the configured
maximum deceleration and continues the home position approach in the opposite direction.
2. If the hardware limit switches were deactivated using the Motion Control instruction
"MC_WriteParameter".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1643

Control de movimiento
6.1 Using S7-1500 Motion Control

Nota
Only use hardware limit switches that remain permanently switched after the approach. This
switching state may only be canceled after the return to the permitted traversing range.
The digital inputs of the hardware limit switches are evaluated by default in cyclic data
exchange. If the hardware limit switch is to be evaluated in the position control cycle of the drive,
select the entry "MC-Servo" for "Organization block" and the entry "PIP OB Servo" for "Process
image" in the input module settings under "I/O addresses".

Input of negative/positive HW limit switch
In these fields, select the PLC tag of the digital input for the negative and positive hardware limit
switch.
In order to be able to select an input, a digital input module must have been added in the device
configuration, and the PLC tag name for the digital input must be defined.
PRECAUCI√ìN
During installation of hardware limit switches, attention must be paid to the filter times of the
digital inputs.
Based on the time for one position control cycle clock and the filter time of the digital inputs,
the resulting delay times must be taken into account.
The filter time is configurable in individual digital input modules in the device configuration.
The digital inputs are set to a filter time of 6.4 ms by default. If these are used as hardware limit
switches, undesired decelerations may occur. If this occurs, reduce the filter time for the
relevant digital inputs.
The filter time can be set under "Input filter" in the device configuration of the digital inputs.

Level selection of negative/positive HW limit switch
Select the triggering signal level ("low level"/"high level") of the hardware limit switch in the dropdown list. With "Low level", the input signal is "FALSE" after the axis has reached or passed the
hardware limit switch. With "High level", the input signal is "TRUE" after the axis has reached
or passed the hardware limit switch.

1644

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Enable SW limit switches
This check box activates the high and low software limit switches. When software switches are
activated, an active motion comes to a stop at the position of the software limit switch. The
technological object signals an error. After acknowledgment of the error, the axis can again be
moved in the direction of its operating range.
Nota
Activated software limit switches act only on a homed axis.

Position of negative/positive SW limit switch
Configure the operating range of the axis with the positions of the negative and positive
software limit switches.

Consulte tambi√©n
Traversing range limitation (P√°gina 1574)

Configuration - Dynamic limits
In the "Dynamic limits" configuration window, configure the maximum values for velocity,
acceleration, deceleration and jerk of the axis.

Maximum velocity
In this field, define the maximum permitted velocity of the axis.

Maximum acceleration/maximum deceleration - ramp-up time/ramp-down time
Set the desired acceleration in the "Ramp-up time" or "Acceleration" fields. The desired
deceleration can be set in the "Ramp-down time" or "Deceleration" fields.
The following equations show the relationship between the ramp-up time and acceleration and
the ramp-down time and deceleration:

Ramp-up time =

Ramp-down time =

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Maximum velocity
Acceleration

Maximum velocity
Deceleration

1645

Control de movimiento
6.1 Using S7-1500 Motion Control

Nota
A change in the maximum velocity influences the acceleration and deceleration values of the
axis. The ramp-up and ramp-down times are retained.
The "maximum deceleration" for active homing with change of direction at the hardware limit
switch must be set sufficiently large, to brake the axis before reaching the mechanical endstop.

Smoothing time/jerk
You can enter the jerk limit parameters in the "Smoothing time" box, or alternatively in the "Jerk"
box:
‚óè Set the desired jerk for the acceleration and deceleration ramp in the "Jerk" field. The value
0 means that the jerk is not limited.
‚óè Set the desired smoothing time for the acceleration ramp in the "Smoothing time" field.
Nota
The configured smoothing time displayed in the configuration, applies only to the
acceleration ramp.
If the values of the acceleration and deceleration differ, the smoothing time of the
deceleration ramp is calculated and used according to the jerk of the acceleration ramp.
The smoothing time of the deceleration is adapted as follows:
‚óè Acceleration > Deceleration
A shorter smoothing time is used for the deceleration ramp compared with the
acceleration ramp.
‚óè Acceleration < Deceleration
A longer smoothing time is used for the deceleration ramp compared with the
acceleration ramp.
‚óè Acceleration = Deceleration
The smoothing times of the acceleration and deceleration ramp are equal.
If an error occurs, the axis decelerates with the configured emergency stop deceleration. A
configured jerk limit is not taken into account for this.
The following equations show the relationship between the smoothing times and the jerk:

6PRRWKLQJWLPH DFFHOHUDWLRQUDPS  

6PRRWKLQJWLPH GHFHOHUDWLRQUDPS  

$FFHOHUDWLRQ
-HUN
'HFHOHUDWLRQ
-HUN

Motion jobs started in the user program are performed with the selected jerk.

1646

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte tambi√©n
Velocity profile (P√°gina 1579)
Dynamic limits in gearing (P√°gina 1886)

Configuration - Torque limits
Configure the force/torque limiting of the drive in the "Torque limiting" configuration window.
The configuration is only available if a drive that supports force/torque limiting is selected and
a telegram 10x is used. Telegram 101 cannot be used.

Effective
In the drop-down list, select whether the limit value is to be in effect "on load side" or "on motor
side".

Torque limits
Enter a default value for the torque limiting in the specified unit of measurement in this field.
The default value is in effect when the torque limiting is specified using Motion Control
instruction "MC_TorqueLimiting", input parameter "Limit" < 0.
Torque limiting applies to the following axis configurations:
‚óè Axis type is "Rotary" and limit value is in effect "On load side" or "On motor side"
‚óè Axis type is "Linear" and limit value is in effect "On motor side"

Force limit
Enter a default value for the force limit in the specified unit of measure in this field.
The default value is in effect when the force limit is specified using Motion Control instruction
"MC_TorqueLimiting", input parameter "Limit" < 0.
The force limit applies to the following axis configuration: Axis type is "Linear" and limit value is
in effect "On load side"
If the efficiency of the gear and leadscrew is crucial, you can set them in the
"<TO>.Actor.Efficiency" tag.

Position-related monitoring
As a result of the force/torque limiting on the drive, a larger following error may occur or the axis
standstill may not be detected reliably in positioning monitoring.
To deactivate the monitoring of the following error and the positioning monitoring during force/
torque limiting, select the "Deactivate position-related monitoring" option. If you want to activate
the position-related monitoring, select the option "Leave position-related monitoring enabled".

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1647

Control de movimiento
6.1 Using S7-1500 Motion Control

Interconnection in the SINAMICS drive
The following interconnection is required in the SINAMICS drive:
‚óè P1522 to a fixed value of +100%
‚óè P1523 to a fixed value of -100% (e.g. through interconnection to fixed value parameter
P2902[i]).

Consulte tambi√©n
Force/torque limiting (P√°gina 1583)

Configuration - Fixed stop detection
Configure the fixed stop detection in the configuration window.
A "Travel to fixed stop" can be realized by activating fixed stop detection using the Motion
Control instruction "MC_TorqueLimiting" and a position-controlled motion job. The operation is
also referred to as clamping.

Positioning tolerance
In this configuration field, configure the positioning tolerance that is regarded as a breaking
away or turning back of the fixed stop when exceeded. To detect the breaking away or turning
back of the fixed stop, the position setpoint must be located outside the positioning tolerance.
The configured position tolerance must be less than the configured following error.

Following error
If the drive is stopped by a mechanical fixed stop during a motion job, the following error is
increased. The accumulating following error serves as a criterion for fixed stop detection. In the
"Following error" configuration field, configure the value of the following error starting from
which the fixed stop detection is to take effect. The configured following error must be greater
than the configured position tolerance.
Nota
If the following error monitoring was activated in the position monitoring configuration, the
"Maximum following error" configured there must be greater than the "Following error" of the
fixed stop detection.

Consulte tambi√©n
Fixed stop detection (P√°gina 1585)

Homing
Homing means matching the position value of a technology object to the real, physical location
of the drive. Absolute target positions of the axis can only be approached with a homed axis.

1648

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Operating modes of the Motion Control instruction "MC_Home"
In S7-1500 Motion Control, the axis is homed with the Motion Control instruction "MC_Home".
The following operating modes are used in the process:
‚óè Active homing (incremental encoder)
With active homing, the Motion Control instruction "MC_Home" performs the configured
home position approach. Active traversing motions are aborted. When the homing mark is
detected, the position of the axis is set according to the configuration.
‚óè Passive homing (incremental encoder)
With passive homing, the Motion Control instruction "MC_Home" instruction does not carry
out any homing motion. The traversing motion required for this must be implemented by the
user with other Motion Control instructions. Active traversing motions are not aborted upon
start of passive homing. When the homing mark is detected, the axis is set according to the
configuration.
‚óè Direct homing absolute (incremental encoder or absolute encoder)
The axis position is set without taking into consideration the home position switch. Active
traversing motions are not aborted. The value of input parameter "Position" of Motion
Control instruction "MC_Home" is set immediately as the actual position of the axis.
‚óè Direct homing relative (incremental encoder or absolute encoder)
The axis position is set without taking into consideration the home position switch. Active
traversing motions are not aborted. The following statement applies to the axis position after
homing:
New axis position = Current axis position + Value of parameter "Position" of instruction
"MC_Home".

Consulte tambi√©n
Homing (P√°gina 1589)

Active homing
Configuration - Active homing
In the "Active Homing" configuration window, configure the parameters for active homing.
"Active homing" is executed using the Motion Control instruction "MC_Home" with "Mode" = 3
and 5.
Nota
Parameter "MC_Home.Mode" (S7-1500 CPU)
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control has
been standardized within the framework of technology version V2.0. This results in a new
assignment of the parameter values for the "MC_Home.Mode" parameter. A comparison of the
"MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is available in the section
"Version overview" of the "S7‚Äë1500/S7‚Äë1500T Motion Control overview" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766459).

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1649

Control de movimiento
6.1 Using S7-1500 Motion Control

Settings for (S7-1500T)
In the drop-down list, select the encoder to which the homing settings are to apply.

Select the homing mode
Select from among the following homing modes:
‚óè Use zero mark via PROFIdrive telegram (P√°gina 1650)
‚óè Use reference output cam and zero mark via PROFIdrive telegram (P√°gina 1651)
‚óè Use homing mark via digital input (P√°gina 1652)

Consulte tambi√©n
Homing (P√°gina 1589)
Using multiple encoders (P√°gina 1562)

Homing mode "Use zero mark via PROFIdrive telegram"
Enable direction reversal at the hardware limit switch
Select this check box to use the hardware limit switch as a reversing output cam for the home
position approach. After the axis has reached the hardware limit switch during active homing,
it is ramped down at the configured maximum deceleration rate and the direction is then
reversed. The zero mark is then sought in the reverse direction. If this function is not enabled
and the axis reaches the hardware limit switch during active homing, then the drive is disabled
and braked with the ramp configured in the drive.

Homing direction
Select the direction in which the next zero mark should be approached for homing.
"Positive" is the homing direction in the direction of positive position values; "negative" in the
direction of negative position values.

Approach velocity
In this field, specify the velocity which is used to traverse to the home position offset.

Homing velocity
In this field, specify the velocity at which the axis approaches the zero mark for homing.

Home position offset
In the case of a differing zero mark position and home position, enter the corresponding home
position offset in this field. The axis approaches the home position at approach velocity.

1650

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Home position
In this field, configure the absolute coordinate of the home position. The home position
configured here is in effect when the Motion Control instruction "MC_Home" is executed with
"Mode" = 5.

Consulte tambi√©n
Homing (P√°gina 1589)

Homing mode "Use reference output cam and zero mark via PROFIdrive telegram"
Enable direction reversal at the hardware limit switch
Select this check box to use the hardware limit switch as a reversing output cam for the home
position approach. After the axis has reached the hardware limit switch during active homing,
it is ramped down at the configured maximum deceleration rate and the direction is then
reversed. The reference output cam is then searched for in the reverse direction. If this function
is not enabled and the axis reaches the hardware limit switch during active homing, then the
drive is disabled and braked with the ramp configured in the drive.

Approach direction
Select the approach direction for the reference output cam search.
"Positive" is the approach direction in the direction of positive position values; "negative" in the
direction of negative position values.

Homing direction
Select the direction in which the zero mark should be approached for homing.

Approach velocity
In this field, specify the velocity at which the reference output cam is searched for during the
homing procedure. Any configured home position offset is traversed at the same velocity.

Homing velocity
In this field, specify the velocity at which the axis approaches the zero mark for homing. For zero
mark detection, the reference output cam must be exited.

Home position offset
In the case of a differing zero mark position and home position, enter the corresponding home
position offset in this field. The axis approaches the home position at approach velocity.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1651

Control de movimiento
6.1 Using S7-1500 Motion Control

Home position
In this field, configure the absolute coordinate of the home position. The home position
configured here is in effect when the Motion Control instruction "MC_Home" is executed with
"Mode" = 5.

Consulte tambi√©n
Homing (P√°gina 1589)

Homing mode "Use homing mark via digital input"
When a digital input is used as a homing mark, the accuracy of the homing process is not as
high as for hardware-supported homing using zero marks. You can improve the accuracy by
using a low homing velocity.
Pay attention to the setting of short filter times for the digital input as well.

Digital input homing mark/output cam
In this configuration field, select the PLC tag of the digital input that is to act as a homing mark
(reference output cam). Also select the level at which the homing mark is to be detected.
In order to be able to select an input, a digital input module must have been added in the device
configuration, and the PLC tag name for the digital input must be defined.

Enable direction reversal at the hardware limit switch
Select this check box to use the hardware limit switch as a reversing output cam for the home
position approach. After the axis has reached the hardware limit switch during active homing,
it is ramped down at the configured maximum deceleration rate and the direction is then
reversed. The homing mark is then sensed in reverse direction. If this function is not enabled
and the axis reaches the hardware limit switch during active homing, then the drive is disabled
and braked with the ramp configured in the drive.

Approach direction
Select the approach direction for the homing mark search.
"Positive" is the approach direction in the direction of positive position values; "negative" in the
direction of negative position values.

Homing direction
Select the direction in which the homing mark for homing is to be approached.

Homing mark
Select the switch position of the "digital input" that is to be used as the homing mark.

1652

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
When a "digital input" is crossed, two switching edges that are spatially separated from one
another are generated. The selection of the positive or negative side ensures that the homing
mark is always evaluated at the same mechanical position.
The positive side is the switch position with a greater position value; the negative side is the
switch position with the lesser position value.
The selection of the side is independent of the approach direction, and independent of whether
it causes a rising or falling edge.

Approach velocity
In this field, specify the velocity at which the axis searches for the "digital input" during the home
position approach. Any configured home position offset is traversed at the same velocity.

Homing velocity
In this field, specify the velocity at which the axis approaches the home position for homing.

Home position offset
If the homing mark position is different from the home position, enter the corresponding home
position offset in this field. The axis approaches the home position at approach velocity.

Home position
In this field, configure the absolute coordinate of the home position. The home position
configured here is in effect when the Motion Control instruction "MC_Home" is executed with
"Mode" = 5.

Consulte tambi√©n
Homing (P√°gina 1589)

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1653

Control de movimiento
6.1 Using S7-1500 Motion Control

Passive homing
Configuration - Passive homing
Configure the parameters for passive homing in the "Passive Homing" (homing on the fly)
configuration window. The "Passive homing" homing function is executed using the Motion
Control instruction "MC_Home" with "Mode" = 2, 8 and 10.
Nota
Parameter "MC_Home.Mode" (S7-1500 CPU)
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control has
been standardized within the framework of technology version V2.0. This results in a new
assignment of the parameter values for the "MC_Home.Mode" parameter. A comparison of the
"MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is available in the section
"Version overview" of the "S7‚Äë1500/S7‚Äë1500T Motion Control overview" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766459).

Settings for
In the drop-down list, select the encoder for which the homing settings are to apply (only for
S7-1500T).

Select the homing mode
Select from among the following homing modes:
‚óè Use zero mark via PROFIdrive telegram (P√°gina 1655)
‚óè Use reference output cam and zero mark via PROFIdrive telegram (P√°gina 1655)
‚óè Use homing mark via digital input (P√°gina 1656)

Consulte tambi√©n
Using multiple encoders (P√°gina 1562)

1654

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Homing mode "Use zero mark via PROFIdrive telegram"
Homing direction
Select the direction in which the next zero mark should be approached for homing. The
following options are available:
‚óè Positive
The axis moves in the direction of higher position values.
‚óè Negative
The axis moves in the direction of lower position values.
‚óè Current
The currently effective approach direction is used for homing.

Home position
In this field, configure the absolute coordinate of the home position. The home position
configured here is in effect when the Motion Control instruction "MC_Home" is executed with
"Mode" = 10.
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control has
been standardized within the framework of technology version V2.0. This results in a new
assignment of the parameter values for the "MC_Home.Mode" parameter. A comparison of the
"MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is available in the section
"Version overview" of the "S7‚Äë1500/S7‚Äë1500T Motion Control overview" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766459).

Consulte tambi√©n
Homing (P√°gina 1589)

Homing mode "Use reference output cam and zero mark via PROFIdrive telegram"
Homing direction
Select the direction in which the zero mark should be approached for homing. The next zero
mark after leaving the reference output cam is used.

Utilizar funciones tecnol√≥gicas
Manual de programaci√≥n y manejo, 11/2019

1655

Control de movimiento
6.1 Using S7-1500 Motion Control
The following options are available:
‚óè Positive
The axis moves in the direction of higher position values.
‚óè Negative
The axis moves in the direction of lower position values.
‚óè Current
The currently effective approach direction is used for homing.

Home position
In this field, configure the absolute coordinate of the home position. The home position
configured here is in effect when the Motion Control instruction "MC_Home" is executed with
"Mode" = 10.
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control has
been standardized within the framework of technology version V2.0. This results in a new
assignment of the parameter values for the "MC_Home.Mode" parameter. A comparison of the
"MC_Home.Mode" parameter for tech