Borrar p√°gina de detalles".
La p√°gina de detalles se borrar√°.

Ordenar p√°ginas de detalles
1. Abra el men√∫ contextual de la p√°gina de detalles que quiere desplazar.
2. Seleccione el comando "P√°ginas > Avanzar p√°gina una posici√≥n" o "P√°ginas > Retroceder
p√°gina una posici√≥n".
Dependiendo del comando elegido, la p√°gina de detalles se desplaza hacia arriba o hacia
abajo.

Mostrar y ocultar secciones
1. Si desea mostrar u ocultar una secci√≥n determinada, haga clic en el signo m√°s o menos del
√°rea de trabajo en el encabezado de la secci√≥n.
2. Si desea mostrar u ocultar todas las secciones de un informe, elija el comando "Mostrar
todas las p√°ginas" u "Ocultar todas las p√°ginas" en el men√∫ contextual de una secci√≥n
cualquiera.

Consulte tambi√©n
Estructura de los informes (P√°gina 1271)
Estructura de los informes (P√°gina 1274)
Principios b√°sicos de la elaboraci√≥n de informes (P√°gina 1280)
Principios b√°sicos sobre la elaboraci√≥n de informes (P√°gina 1277)

7.2.2

Imprimir informes

7.2.2.1

Impresi√≥n de informes en Runtime Advanced

Impresi√≥n de informes en Runtime Advanced
Introducci√≥n
En Runtime Advanced y Panels, los informes se imprimen controlados por tiempo o por evento.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1297

Trabajar con informes
7.2 Trabajar con informes

Pasos de configuraci√≥n
Configurar la impresi√≥n controlada por evento:
‚óè Se configura la funci√≥n de sistema "ImprimirInforme" en un bot√≥n o una variable asociada
a un evento.
Configurar la impresi√≥n controlada por evento:
‚óè Se crea una tarea del tipo "Trabajo de impresi√≥n" en el planificador de tareas y se asigna
el informe deseado al trabajo.
En las propiedades de la tarea se define cu√°ndo y con qu√© frecuencia se imprimir√° el
informe.

Impresi√≥n en runtime
El informe se imprime en la impresora que est√° configurada como impresora est√°ndar en el
Control Panel del panel de operador.
En "Lista de impresoras" podr√° comprobar cu√°ntas impresoras est√°ndar est√°n habilitadas
para un panel de operador. Para m√°s informaci√≥n sobre la "Lista de impresoras", consulte la
p√°gina de Internet de Siemens Customer Support y la ID de art√≠culo "11376409".

Consulte tambi√©n
Configurar el registro de avisos (P√°gina 908)
Sinopsis de la impresi√≥n de informes (P√°gina 1298)

7.2.2.2

Impresi√≥n de informes en Runtime Professional

Sinopsis de la impresi√≥n de informes
Introducci√≥n
En runtime, los informes se imprimen controlados por tiempo o por evento.
Adem√°s es posible visualizar en forma de lista los trabajos de impresi√≥n pendientes en
runtime. Con esta lista de trabajos de impresi√≥n el usuario puede decidir por s√≠ mismo qu√©
informes deben imprimirse.

Impresi√≥n controlada por eventos
El informe se imprime al producirse un evento.
Ejemplos:
‚óè El valor de una variable cambia o rebasa un valor l√≠mite.
‚óè Un aviso aparece, desaparece o se acusa
‚óè Una acci√≥n de operador, p. ej. hacer clic en un bot√≥n

1298

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes

Impresi√≥n controlada por tiempo
El informe se imprime autom√°ticamente.
Ejemplos:
‚óè Una sola vez en una fecha definida, p .ej. el 31 de diciembre de 2010 a las 6:30 a.m.
‚óè En intervalos, p. ej. diariamente a las 8 de la ma√±ana o los lunes a las 6 de la tarde

Pasos de configuraci√≥n
Dependiendo de para qu√© runtime se configure la impresi√≥n de un informe controlada por
tiempo o por eventos, el procedimiento es distinto.
Para visualizar la lista de trabajos de impresi√≥n en runtime, configure el control "Ventana de
aplicaci√≥n" en las im√°genes. Dependiendo de la configuraci√≥n, la ventana de aplicaci√≥n
muestra, p. ej., s√≥lo los trabajos de impresi√≥n seleccionados.

Consulte tambi√©n
Crear trabajo de impresi√≥n (P√°gina 1301)
Configurar el inicio autom√°tico de un trabajo de impresi√≥n en el planificador de tareas
(P√°gina 1305)
Impresi√≥n de informes en Runtime Advanced (P√°gina 1297)
Planificar tareas (P√°gina 1842)
Informes de sistema y trabajos de impresi√≥n del sistema (P√°gina 1306)
Impresi√≥n de informes en Runtime Professional (P√°gina 1298)

Principios b√°sicos de la impresi√≥n de informes
Introducci√≥n
En Runtime Professional, los informes se imprimen controlados por tiempo o por evento.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1299

Trabajar con informes
7.2 Trabajar con informes

Pasos de configuraci√≥n
‚óè Se crea un trabajo de impresi√≥n en Informes y se le asigna el informe deseado.
En las propiedades del trabajo de impresi√≥n, se definen el n√∫mero de p√°ginas, el rango de
tiempo y el formato de impresi√≥n (impresora o archivo) del informe.
‚óè Para configurar una impresi√≥n controlada por tiempo, se crea una tarea del tipo "Trabajo de
impresi√≥n" en el planificador de tareas y se le asigna el trabajo de impresi√≥n deseado.
En las propiedades de la tarea se define cu√°ndo o con qu√© frecuencia se imprimir√° el
informe.
‚óè Para configurar una impresi√≥n controlada por evento, se configura un C Script que llama p.
ej. la funci√≥n "ReportJob" en el objeto deseado asociado a un evento.
‚Äì ReportJob("<Nombre del trabajo de impresi√≥n>","PRINTJOB"); para
ejecutar el trabajo de impresi√≥n
‚Äì ReportJob("<Nombre del trabajo de impresi√≥n>","PREVIEW"); para
obtener una vista preliminar
Nota
Objetos de imagen con impresi√≥n de informes preconfigurada
En algunos objetos de imagen se incluye de forma est√°ndar la impresi√≥n de informes a trav√©s
de un bot√≥n (s√≠mbolo de impresora), p. ej. en el visor de avisos. Si es necesario, se pueden
modificar los informes de sistema predefinidos o utilizar un informe personalizado.

Impresi√≥n en runtime
En funci√≥n de la configuraci√≥n, el informe se imprime de la manera siguiente:
‚óè En la impresora que est√° configurada como impresora est√°ndar en el Control Panel del
panel de operador.
En "Lista de impresoras" podr√° comprobar cu√°ntas impresoras est√°ndar est√°n habilitadas
para un panel de operador. Para m√°s informaci√≥n sobre la "Lista de impresoras", consulte
la p√°gina de Internet de Siemens Service & Support y la ID de art√≠culo "11376409".
‚óè En una impresora de red que est√© disponible para el panel de operador.
‚óè En un archivo de formato EMF.

Imprimir informes
La impresi√≥n de informes se realiza en el modo gr√°fico. Dadas las cantidades de datos a
procesar no se recomienda el uso de una impresora serie.

1300

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes
Para que el informe se imprima correctamente, la impresora conectada debe soportar el
formato de papel y el formato del informe.
Nota
El valor de una variable en el informe se lee y se emite justo antes del momento de la impresi√≥n.
Si el informe comprende varias p√°ginas, puede transcurrir bastante tiempo entre la impresi√≥n
de la primera y la √∫ltima p√°gina. Por ello, es posible que la misma variable tenga un valor
distinto en la √∫ltima p√°gina que en la primera.

Consulte tambi√©n
Informes (P√°gina 1269)
Crear trabajo de impresi√≥n (P√°gina 1301)
Configurar el inicio autom√°tico de un trabajo de impresi√≥n en el planificador de tareas
(P√°gina 1305)
Informes de sistema y trabajos de impresi√≥n del sistema (P√°gina 1306)

Crear trabajo de impresi√≥n
Introducci√≥n
En el trabajo de impresi√≥n se define lo siguiente:
‚óè Alcance del trabajo de impresi√≥n: todas las p√°ginas o s√≥lo p√°ginas determinadas
‚óè Per√≠odo de tiempo cuyas entradas de informe se imprimen
‚óè impresora en la que se imprime el informe
‚óè archivo en el que se guarda el informe

Requisitos
El editor "Trabajos de impresi√≥n" est√° abierto.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1301

Trabajar con informes
7.2 Trabajar con informes

Procedimiento
Para crear un trabajo de impresi√≥n nuevo, proceda del siguiente modo:
1. Haga doble clic en la celda "<Agregar>" de la columna "Nombre".
Se inserta un trabajo de impresi√≥n nuevo.

2. Introduzca un "Nombre" para el trabajo de impresi√≥n en la ventana de inspecci√≥n en
"Propiedades > Propiedades > General" y seleccione el "Informe" deseado.
3. Seleccione en "Tipo de cuadro de di√°logo", si el operador puede modificar la configuraci√≥n
antes de imprimir el informe.

4. Defina en "Propiedades > Propiedades > Rango de p√°ginas", si el trabajo de impresi√≥n
imprimir√° todas las p√°ginas o s√≥lo p√°ginas determinadas.

1302

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes
5. Defina en "Propiedades > Propiedades > Rango de tiempo" el per√≠odo para el que se
imprimen las entradas de informe.

6. Si se debe imprimir el informe, active la opci√≥n "Impresora" en "Propiedades > Propiedades
> Salida > Impresi√≥n".
El informe se imprime en la impresora est√°ndar del panel de operador.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1303

Trabajar con informes
7.2 Trabajar con informes
7. Seleccione un m√°ximo de tres impresoras si el informe debe imprimirse en otra impresora.

8. Si el informe debe imprimirse en un archivo, active "Propiedades > Propiedades > Archivo
de destino > Impresi√≥n en archivo > Imprimir en archivo (*.emf)".
A partir de la entrada de "Prefijo de directorio de destino" y del sello de tiempo de la
impresi√≥n se crea un nombre de carpeta. Los informes se guardan en el directorio del
proyecto de runtime en "PRT_OUT" en una carpeta con ese nombre.

Resultado
Se ha creado el trabajo de impresi√≥n del informe.
‚óè Para una impresi√≥n en runtime controlada por tiempo, cree una tarea del tipo "Trabajo de
impresi√≥n" en el planificador de tareas. Asigne a esta tarea el trabajo de impresi√≥n deseado.
‚óè Para una impresi√≥n controlada por evento, se configura un C Script que llama la funci√≥n
"PrintJob" en el objeto (p. ej. un bot√≥n o una variable) asociado a un evento deseado.

1304

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes

Consulte tambi√©n
Principios b√°sicos de la impresi√≥n de informes (P√°gina 1299)
Configurar el inicio autom√°tico de un trabajo de impresi√≥n en el planificador de tareas
(P√°gina 1305)

Configurar el inicio autom√°tico de un trabajo de impresi√≥n en el planificador de tareas
Introducci√≥n
Una tarea del tipo "Trabajo de impresi√≥n" define cu√°ndo o con qu√© frecuencia se imprime un
informe autom√°ticamente (impresi√≥n controlada por tiempo).

Requisitos
‚óè Se ha creado un trabajo de impresi√≥n.

Procedimiento
Para crear una tarea para el inicio autom√°tico de un trabajo de impresi√≥n, proceda del siguiente
modo:
1. Active en la "Configuraci√≥n de runtime" del panel de operador "Servicios > Secuencia de
inicio de WinCC Runtime > Trabajos de impresi√≥n previstos en runtime".
2. Cree una tarea nueva en el planificador de tareas.
3. Introduzca un "Nombre" para la tarea en "Propiedades > Propiedades > General".
4. En el campo "Tipo", elija la configuraci√≥n "Trabajo de impresi√≥n".
5. Seleccione el "Trabajo de impresi√≥n" deseado.
6. Defina en "Punto de inicio", cu√°ndo o con qu√© frecuencia se imprimir√° el informe, p. ej.
diariamente a las 5 de la tarde:

Resultado
Se ha creado la tarea para la impresi√≥n del informe controlada por tiempo.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1305

Trabajar con informes
7.2 Trabajar con informes

Consulte tambi√©n
Principios b√°sicos de la impresi√≥n de informes (P√°gina 1299)
Crear trabajo de impresi√≥n (P√°gina 1301)
Imprimir un informe (P√°gina 1325)

7.2.2.3

Informes de sistema y trabajos de impresi√≥n del sistema

Principios b√°sicos de los informes de sistema y trabajos de impresi√≥n del sistema
Informes de sistema y trabajos de impresi√≥n del sistema para la funci√≥n de impresi√≥n de objetos de
imagen
En algunos objetos de imagen se incluye de forma est√°ndar la impresi√≥n de informes a trav√©s
de un bot√≥n (s√≠mbolo de impresora), p. ej. en el visor de avisos.
El bot√≥n "Imprimir" del objeto de imagen est√° conectado con un trabajo de impresi√≥n del
sistema preconfigurado. A su vez, el trabajo de impresi√≥n del sistema imprime un informe de
sistema preconfigurado.
Los informes de sistema muestran una "Instant√°nea" o "Todos los datos" del objeto de imagen.
‚óè Instant√°nea: el informe presenta los datos que se muestran actualmente en el objeto de
imagen.
‚óè Todos los datos: el informe presenta todos los datos que se encuentran actualmente en el
objeto de imagen.
La siguiente tabla muestra qu√© informes de sistema y qu√© trabajos de impresi√≥n del sistema
est√°n preconfigurados para los objetos de imagen.
Objeto de imagen

Est√°ndar Alcance de la im‚Äê
presi√≥n

Trabajo de impresi√≥n del
sistema

Informes de sistema

Visor de curvas f(t)

X

Instant√°nea

Function Trend Control Picture

@Function Trend Control - Picture

Visor de curvas f(x)

X

Instant√°nea

Online Trend Control - Pic‚Äê
ture

@Online Trend Control - Picture

Instant√°nea

Online Table Control ‚Äì Pic‚Äê
ture

@Online Table Control ‚Äì Picture

Todos los datos

Online Table Control - Table @Online Table Control - Table

Instant√°nea

Alarm Control ‚Äì Picture

@Alarm Control ‚Äì Picture

Todos los datos

Alarm Control - Table

@Alarm Control - Table

Instant√°nea

Recipe Control - Picture

@Recipe Control - Picture

Todos los datos

Recipe Control - Table

@Recipe Control - Table

Instant√°nea

Ruler Control - Picture

@Ruler Control - Picture

Todos los datos

Ruler Control - Table

@Ruler Control - Table

Visor de tablas
X
Visor de avisos
X
Visor de recetas
X
Tabla de valores
X

Por lo general, la impresi√≥n del informe no tiene que configurarse. Si es necesario adapte el
trabajo de impresi√≥n del sistema o el informe de sistema a sus necesidades. Como alternativa,

1306

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes
asigne a un objeto de imagen otro trabajo de impresi√≥n del sistema preconfigurado o un trabajo
de impresi√≥n que haya creado p ara la impresi√≥n de un informe personalizado.

Informes de sistema y trabajo de impresi√≥n del sistema para el informe secuencial de avisos
La impresi√≥n del informe secuencial de avisos est√° configurada en un trabajo de impresi√≥n del
sistema. Si se ha activado "Propiedades > Propiedades > General > Utilizar informe de l√≠neas",
WinCC utiliza el informe secuencial de avisos con el dise√±o de fila. Si no se ha activado esta
opci√≥n, WinCC utiliza el informe secuencial de avisos con el dise√±o de p√°gina.
Dise√±o

Trabajo de impresi√≥n del sistema

Informe de sistema

Dise√±o de p√°gina

Alarm sequence report

@AlarmSequenceReportForPagePrin‚Äê
ter

Dise√±o de fila

Alarm sequence report

@AlarmSequenceReportForLinePrinter

Consulte tambi√©n
Registro continuo de avisos (P√°gina 1290)
Principios b√°sicos de la impresi√≥n de informes (P√°gina 1299)

Modificar informes de sistema y trabajos de impresi√≥n del sistema
Mostrar informes de sistema y trabajos de impresi√≥n del sistema en el √°rbol del proyecto
Los informes de sistema y los trabajos de impresi√≥n del sistema se guardan en la plantilla del
proyecto y no se muestran autom√°ticamente en el √°rbol del proyecto. Si quiere modificar un
informe de sistema o un trabajo de impresi√≥n del sistema, mu√©strelos en el √°rbol del proyecto.
Proceda del siguiente modo:
‚óè En el √°rbol del proyecto, elija el comando "Agregar informes de sistema" del men√∫
contextual de la carpeta "Informes".
El √°rbol del proyecto muestra los informes de sistema en "Informes".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1307

Trabajar con informes
7.2 Trabajar con informes
La lista de los "Trabajos de impresi√≥n" se han ampliado con los trabajos de impresi√≥n del
sistema.

Modificar trabajos de impresi√≥n del sistema e informes de sistema
Los trabajos de impresi√≥n del sistema y los informes de sistema se modifican como trabajos de
impresi√≥n e informes "normales" - con las siguientes limitaciones:
‚óè En los trabajos de impresi√≥n del sistema no pueden modificarse ni el nombre ni la
asignaci√≥n est√°ndar del informe.
‚óè No es posible agregar p√°ginas detalladas a los informes de sistema.

Vigencia de las modificaciones
Las modificaciones de los informes y trabajos de impresi√≥n del sistema repercuten dentro del
proyecto en todos los objetos a los que est√°n asignados el informe de sistema o el trabajo de
impresi√≥n del sistema.
Nota
Rechazar modificaciones
Para restablecer el estado preconfigurado de WinCC, p. ej. en caso de haber borrado por error
el control para la impresi√≥n de los datos en el informe, borre primero el informe de sistema o
el trabajo de impresi√≥n del sistema y elija en el √°rbol del proyecto el comando "Agregar
informes de sistema" del men√∫ contextual de la carpeta "Informes".

Borrar informes de sistema y trabajos de impresi√≥n del sistema que ya no se necesiten
Para visualizar √∫nicamente los informes y trabajos de impresi√≥n utilizados en el proyecto (p. ej.
tras la migraci√≥n), es posible borrar los informes de sistema y los trabajos de impresi√≥n del
sistema a trav√©s del men√∫ contextual.
Si el informe borrado o bien el trabajo de impresi√≥n borrado se utiliza en el proyecto, se
utilizar√°n en su lugar el informe de sistema y el trabajo de impresi√≥n del sistema
preconfigurados por WinCC.

1308

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes
Para volver a visualizar todos los informes de sistema y trabajos de impresi√≥n del sistema, elija
en el √°rbol del proyecto el comando "Agregar informes de sistema" del men√∫ contextual de la
carpeta "Informes":
‚óè Vuelven a aparecer los informes de sistema y trabajos de impresi√≥n del sistema que fueron
borrados. Se restablece el estado preconfigurado por WinCC. No se reconstruye el estado
que hab√≠a en el momento de borrar.
‚óè No se modifican los dem√°s informes de sistema y trabajos de impresi√≥n del sistema.

Consulte tambi√©n
Principios b√°sicos de los informes de sistema y trabajos de impresi√≥n del sistema
(P√°gina 1306)

Dise√±ar individualmente la impresi√≥n de informes de un objeto de imagen
Introducci√≥n
Si no quiere utilizar el trabajo de impresi√≥n del sistema enlazado de forma est√°ndar (incl.
informe de sistema) para la impresi√≥n de informes de un objeto de imagen, asigne al objeto de
imagen otro trabajo de impresi√≥n del sistema o un informe dise√±ado individualmente.

Utilizar otro trabajo de impresi√≥n del sistema
Para asignar al objeto de imagen otro trabajo de impresi√≥n del sistema, proceda del siguiente
modo:
1. Seleccione el objeto de imagen.
2. Seleccione el trabajo de impresi√≥n del sistema deseado en "Propiedades > Propiedades >
General > Imprimir".

Utilizar un informe personalizado
Para utilizar un informe personalizado, proceda del siguiente modo:
1. Cree el informe.
2. Defina el contenido de la p√°gina de detalles.
‚Äì Para imprimir una instant√°nea de los datos mostrados actualmente en el objeto de
imagen, inserte el objeto de informe "Control Copia impresa".
‚Äì Para imprimir en forma de tabla todos los datos del informe que se muestran
actualmente en el objeto de imagen, inserte el objeto de informe "Control Datos".
‚Äì Para imprimir tambi√©n el origen de los datos en el informe, p. ej. t√≠tulo de la ventana,
nombre del objeto o nombre de la imagen, inserte el objeto de informe "Control Screen".
3. Cree un trabajo de impresi√≥n y as√≠gnele el informe.
4. Seleccione el objeto de imagen y elija el trabajo de impresi√≥n en "Propiedades >
Propiedades > General > Imprimir".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1309

Trabajar con informes
7.2 Trabajar con informes

7.2.3

Trabajar con objetos

7.2.3.1

Insertar un objeto

Introducci√≥n
En el editor "Im√°genes" o "Informes" puede agregar los objetos de la de la Task Card
"Herramientas". Utilizando el rat√≥n, arrastre los objetos hasta el √°rea de trabajo. Los objetos se
pueden insertar en su tama√±o est√°ndar, o bien determinar su tama√±o al insertarlos.
Adem√°s, puede copiar o mover objetos de un editor a otro mediante el portapapeles, p. ej. para
incluir un objeto de imagen en un informe. Para copiar y desplazar tambi√©n puede utilizar el
rat√≥n en lugar del portapapeles:
‚óè Copiar: <Ctrl+ arrastrar&soltar>
‚óè Desplazar: Drag&Drop
Nota
Basic Panels
El editor "Informes" no est√° disponible para Basic Panels.

Requisitos
La Task Card "Herramientas" est√° abierta.

Insertar un objeto de tama√±o est√°ndar
1. En la Task Card "Herramientas", seleccione el objeto en cuesti√≥n, o bien el gr√°fico deseado
en la carpeta de gr√°ficos de WinCC.
Al desplazar el puntero del rat√≥n por el √°rea de trabajo adopta la forma de una cruz y se
visualiza junto con el icono del objeto.
2. Haga clic en la posici√≥n del √°rea de trabajo en la que desea insertar el objeto o el gr√°fico.
El objeto se inserta en su tama√±o est√°ndar en la posici√≥n deseada del √°rea de trabajo.
Tambi√©n puede hacer doble clic sobre un objeto en la Task Card "Herramientas".

Copiar un objeto
1. Seleccione el objeto deseado.
2. En el men√∫ contextual, elija "Copiar".
3. Haga clic en el lugar deseado y seleccione en el men√∫ contextual "Pegar".
WinCC pega una copia del objeto en el lugar deseado. S√≥lo pueden modificarse las
propiedades adecuadas en el contexto correspondiente.
Ejemplo: En el editor "Im√°genes" se define el modo de entrada y salida para los campos E/S.
En el editor "Informes" se define el modo como "Salida".

1310

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes
El original y la copia no est√°n vinculados entre s√≠, y se configuran independientemente uno del
otro.

Insertar l√≠neas
1. Seleccione el objeto deseado en la Task Card "Herramientas".
2. Haga clic en un lugar del √°rea de trabajo. Se inserta una l√≠nea en tama√±o est√°ndar.

Insertar un pol√≠gono o una polil√≠nea
1. Seleccione el objeto deseado "Polil√≠nea" o "Pol√≠gono" en la Task Card "Herramientas".
2. Haga clic en un lugar del √°rea de trabajo. El punto inicial del objeto queda definido.
3. Haga clic en otro lugar del √°rea de trabajo. Queda definido un v√©rtice.
4. Para cada uno de los dem√°s v√©rtices haga clic en el lugar correspondiente del √°rea de
trabajo.
5. Haga doble clic en un lugar del √°rea de trabajo. Queda definido el √∫ltimo v√©rtice.
Ahora todos los puntos del pol√≠gono o de la polil√≠nea quedan definidos.
Nota
Basic Panels
Los objetos "Polil√≠nea" y "Pol√≠gono" no est√°n disponibles para Basic Panels.

Nota
Si desea insertar uno tras otro varios objetos de un mismo tipo, utilice la funci√≥n "Sello". As√≠
evitar√° tener que seleccionar el objeto en la Task Card "Herramientas" cada vez que desee
insertarlo. Para ello, seleccione el bot√≥n
de la barra de herramientas de la Task Card
"Herramientas".

7.2.3.2

Borrar un objeto

Introducci√≥n
Los objetos se borran individualmente o bien mediante selecci√≥n m√∫ltiple.

Requisitos
El √°rea de trabajo est√° abierta con un objeto como m√≠nimo.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1311

Trabajar con informes
7.2 Trabajar con informes

Procedimiento
1. Seleccione el objeto que desea borrar.
Para borrar varios objetos, mantenga pulsada la tecla <May√∫s> y seleccione
sucesivamente los objetos que desea borrar. Tambi√©n puede crear con el rat√≥n un √°rea en
torno a los objetos deseados.
2. En el men√∫ contextual, elija el comando "Borrar".

Resultado
Los objetos seleccionados se borran.

7.2.3.3

Insertar varios objetos del mismo tipo

Introducci√≥n
WinCC ofrece la posibilidad de "insertar consecutivamente" varios objetos del mismo tipo
directamente uno tras otro, es decir, insertar sin seleccionar de nuevo cada vez el objeto.
Adem√°s, existe la posibilidad de reproducir las veces que se quiera un objeto ya insertado.

Requisitos
La Task Card "Herramientas" est√° abierta.

Insertar varios objetos del mismo tipo
1. Seleccione el objeto que desea insertar en la Task Card "Herramientas".
2. Haga clic en el bot√≥n
de la barra de herramientas de la Task Card "Herramientas".
Se activar√° la funci√≥n "Sello".
3. Si desea insertar un objeto en su tama√±o est√°ndar, haga clic en la posici√≥n deseada en el
√°rea de trabajo.
Si desea insertar un objeto en otro tama√±o, sit√∫e el puntero del rat√≥n en la posici√≥n deseada
en el √°rea de trabajo. Manteniendo pulsado el bot√≥n izquierdo del rat√≥n, arrastre el objeto
hasta que alcance el tama√±o deseado.
En cuanto suelte el bot√≥n del rat√≥n, el objeto quedar√° insertado en el √°rea de trabajo.
4. Repita el paso 3 para insertar m√°s objetos del mismo tipo.
5. Vuelva a hacer clic en el bot√≥n
.
Se desactivar√° la funci√≥n "Sello".
Nota
Los objetos existentes se copian utilizando el m√©todo de arrastrar y soltar, manteniendo
pulsada la tecla <Ctrl>. El objeto existente no se desplazar√°. En cambio, se insertar√° una
copia del mismo en la nueva posici√≥n.

1312

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes

Insertar y reproducir un objeto
1. Inserte el objeto deseado de la Task Card "Herramientas".
2. Pulse la tecla <Ctrl> y sit√∫e el puntero del rat√≥n en uno de los controladores de tama√±o que
muestra la figura siguiente.

0XOWLSOLFDFL¬µQ
HQVHQWLGR
KRUL]RQWDO

0XOWLSOLFDFL¬µQ
HQVHQWLGR
YHUWLFDO

0XOWLSOLFDFL¬µQ
HQVHQWLGR
YHUWLFDO\KRUL
]RQWDO

3. Arrastre el rect√°ngulo con los controladores de tama√±o hacia la derecha y/o hacia abajo
manteniendo pulsado el bot√≥n izquierdo del rat√≥n.
4. Cuanto m√°s desplace el puntero del rat√≥n, m√°s aumentar√° el objeto hasta rellenar el
espacio disponible.

Resultado
Ha insertado un objeto en una imagen y lo ha multiplicado.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1313

Trabajar con informes
7.2 Trabajar con informes

7.2.3.4

Posicionar un objeto

Introducci√≥n
Cuando se selecciona un objeto, √©ste queda rodeado por un rect√°ngulo con controladores de
tama√±o. Este rect√°ngulo es el rect√°ngulo que rodea al objeto. La posici√≥n de un objeto se
define mediante las coordenadas de la esquina superior izquierda del rect√°ngulo que rodea al
objeto.

Nota
Si la posici√≥n est√° fuera del √°rea de trabajo, el objeto no se representar√° en runtime.

Posicionar y alinear
Puede mostrar una cuadr√≠cula en el √°rea de trabajo. Para posicionar objetos m√°s f√°cilmente,
tiene a su disposici√≥n tres opciones:
‚óè "Alinear a la cuadr√≠cula": Cuando mueva objetos, √©stos se alinear√°n a la cuadr√≠cula e
insertar√°n autom√°ticamente. Si, al mismo tiempo, mantiene pulsada la tecla <Alt>, el objeto
no se alinear√° a la cuadr√≠cula.
‚óè "Alinear a otros objetos": Cuando mueva objetos, se mostrar√°n l√≠neas de ayuda. Al
posicionar, puede orientarse con otros objetos.
‚óè "Ninguno": se puede posicionar los objetos en cualquier posici√≥n.
La cuadr√≠cula y las opciones se activan y desactivan tal y como sigue:
‚óè En el men√∫ "Herramientas > Configuraci√≥n > Visualizaci√≥n > Im√°genes"
‚óè En la Task Card "Dise√±o > Cuadr√≠cula"

Requisitos
El √°rea de trabajo est√° abierta con un objeto como m√≠nimo.

Procedimiento
1. Seleccione el objeto que desea desplazar.
El objeto seleccionado quedar√° rodeado por un rect√°ngulo con controladores de tama√±o.

2. Haga clic en el objeto y mantenga presionado el bot√≥n izquierdo del rat√≥n.

1314

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes
3. Desplace el puntero del rat√≥n hasta la nueva posici√≥n.
El contorno del objeto se desplazar√° con el rat√≥n y mostrar√° la nueva posici√≥n del objeto.

Inicialmente, el objeto permanecer√° en su posici√≥n original.
4. Suelte el bot√≥n del rat√≥n.
El objeto se desplazar√° hasta la posici√≥n donde se hab√≠a visualizado el contorno del objeto.

Procedimiento alternativo
1. Seleccione en la ventana de inspecci√≥n "Propiedades > Propiedades > Representaci√≥n".
2. En "Posici√≥n y tama√±o" indique los valores X e Y de la posici√≥n.

Resultado
El objeto aparecer√° en la nueva posici√≥n.

7.2.3.5

Desplazar un objeto hacia adelante o hacia atr√°s (Basic, Advanced, Professional)

Introducci√≥n
Con la funci√≥n "Orden" del men√∫ contextual de un objeto seleccionado o de la barra de
herramientas se desplaza el objeto delante o detr√°s de otros objetos dentro de un nivel.
Nota
Los controles ActiveX se encuentran siempre delante de los dem√°s objetos de un nivel
(propiedad .NET).

Requisitos
Est√° abierta una imagen con varios objetos en un mismo nivel.

Procedimiento
1. Seleccione el objeto que desea desplazar hacia delante o hacia atr√°s.
2. Elija el comando "Orden" en el men√∫ contextual y uno de los comandos siguientes:
S√≠mbolo

Descripci√≥n
Desplaza el objeto seleccionado delante de todos los dem√°s objetos de ese mismo nivel
Desplaza el objeto seleccionado detr√°s de todos los dem√°s objetos de ese mismo nivel

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1315

Trabajar con informes
7.2 Trabajar con informes
S√≠mbolo

Descripci√≥n
Desplaza el objeto seleccionado una posici√≥n hacia delante
Desplaza el objeto seleccionado una posici√≥n hacia atr√°s

Procedimiento alternativo
1. Abra la paleta "Niveles" de la Task Card "Dise√±o".
2. Navegue hasta el objeto deseado.
3. Arrastre el objeto por el √°rbol hasta la posici√≥n deseada dentro del nivel manteniendo
pulsado el bot√≥n del rat√≥n.
4. Suelte el bot√≥n del rat√≥n.

Resultado
El objeto se desplazar√° hacia adelante o hacia atr√°s.

7.2.3.6

Modificar el tama√±o de un objeto

Introducci√≥n
Cuando se selecciona un objeto, √©ste queda rodeado por un rect√°ngulo con controladores de
tama√±o. Existen las siguientes posibilidades para modificar el tama√±o de un objeto:
‚óè Arrastrar los controladores de tama√±o utilizando el rat√≥n
‚óè Modificar la propiedad "Tama√±o" en la ventana de inspecci√≥n

Requisitos
El √°rea de trabajo est√° abierta con un objeto como m√≠nimo.

1316

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes

Procedimiento
1. Seleccione el objeto cuyo tama√±o desea modificar.
Aparecer√° el rect√°ngulo que rodea al objeto. La figura siguiente muestra un objeto
seleccionado.

2. Arrastre el controlador de tama√±o del rect√°ngulo hasta una nueva posici√≥n.
Se modificar√° el tama√±o del objeto.
‚Äì Si se ha activado la funci√≥n "Alinear a la cuadr√≠cula", el tama√±o del objeto se modificar√°
seg√∫n los puntos de la cuadr√≠cula.
‚Äì Si mantiene pulsada la tecla <Alt> mientras arrastra el controlador, esta funci√≥n no se
aplicar√°.
Para escalar el objeto de forma proporcional, mantenga pulsada la tecla <May√∫s>
mientras modifica el tama√±o con el rat√≥n.

Procedimiento alternativo
1. Seleccione en la ventana de inspecci√≥n "Propiedades > Propiedades > Representaci√≥n".
2. Indique el tama√±o del objeto en "Posici√≥n y tama√±o".

Unificar el tama√±o de objetos
1. Seleccione los objetos.
2. Haga clic en uno de los botones siguientes:
o
o
El tama√±o de los objetos seleccionados se adaptar√° mutuamente.
La figura siguiente muestra c√≥mo adaptar los objetos seleccionados a la altura del objeto de
referencia:

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1317

Trabajar con informes
7.2 Trabajar con informes

S√≠mbolo

Descripci√≥n
Adapta los objetos seleccionados al ancho del objeto de referencia.

Adapta los objetos seleccionados a la altura del objeto de referencia.

Adapta los objetos seleccionados a la anchura y altura del objeto de referencia.

Resultado
El objeto se representar√° en su nuevo tama√±o.

7.2.3.7

Seleccionar varios objetos

Introducci√≥n
Para modificar las propiedades de varios objetos simult√°neamente, o bien para alinear los
objetos entre s√≠, deber√° seleccionar todos los objetos en cuesti√≥n. Esta operaci√≥n se
denomina "selecci√≥n m√∫ltiple".
En la ventana de inspecci√≥n aparecen todas las propiedades de los objetos seleccionados.
Existen las siguientes posibilidades para seleccionar varios objetos:
‚óè Trace un marco de selecci√≥n alrededor de los objetos deseados.
‚óè Haga clic en los objetos deseados manteniendo pulsada la tecla <May√∫s>.

Marco para una selecci√≥n m√∫ltiple
El marco de selecci√≥n abarca todos los objetos de una selecci√≥n m√∫ltiple. Este marco de
selecci√≥n es comparable al rect√°ngulo que rodea a un objeto individual.
El marco de selecci√≥n no se visualiza. Una vez concluida la selecci√≥n m√∫ltiple se mostrar√°n los
marcos siguientes:
‚óè El objeto de referencia aparecer√° con el rect√°ngulo circundante.
‚óè Los dem√°s objetos seleccionados aparecer√°n con un marco discontinuo.

1318

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes

Definir un objeto de referencia
El objeto de referencia es el objeto utilizado para alinear los dem√°s objetos. El objeto de
referencia est√° rodeado por un rect√°ngulo con controladores de tama√±o. La figura siguiente
muestra un objeto de referencia con dos objetos m√°s seleccionados:

Para definir el objeto de referencia existen las posibilidades siguientes:
‚óè Seleccione los objetos mediante una selecci√≥n m√∫ltiple. El objeto seleccionado en primer
lugar es el objeto de referencia.
‚óè Trace un marco de selecci√≥n alrededor de los objetos deseados. El objeto de referencia se
determinar√° autom√°ticamente. Si desea determinar como objeto de referencia otro objeto
de la selecci√≥n, haga clic en el objeto deseado. Esta acci√≥n no cancela la selecci√≥n m√∫ltiple.

Requisitos
El √°rea de trabajo est√° abierta con dos objetos como m√≠nimo.

Seleccionar varios objetos con un marco de selecci√≥n
1. Sit√∫e el puntero del rat√≥n en el √°rea de trabajo cerca de uno de los objetos que desea
seleccionar.
2. Manteniendo pulsado el bot√≥n del rat√≥n, trace un marco de selecci√≥n alrededor de los
objetos que desea seleccionar.
O:
1. Mantenga pulsada la tecla <May√∫s>.
2. Haga clic con el rat√≥n consecutivamente en los objetos deseados.
Todos los objetos seleccionados se enmarcar√°n.
El objeto de referencia ser√° el primer objeto seleccionado.
Nota
Para eliminar un objeto de la selecci√≥n m√∫ltiple, vuelva a hacer clic en el objeto
manteniendo pulsada la tecla <May√∫s>.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1319

Trabajar con informes
7.2 Trabajar con informes

Resultado
Quedar√°n seleccionados varios objetos. Uno de ellos se identificar√° como objeto de
referencia. A continuaci√≥n, podr√° realizar los pasos siguientes:
‚óè Modificar las propiedades de todos los objetos
‚óè El tama√±o de todos los objetos con un mismo factor se modifica arrastrando el cuadro de
selecci√≥n con el rat√≥n haci√©ndolo m√°s grande o m√°s peque√±o.
‚óè Desplazar todos los objetos simult√°neamente.
‚óè Alinear los objetos al objeto de referencia.

7.2.3.8

Modificar la posici√≥n y el tama√±o de varios objetos

Cambios posibles
Despu√©s de seleccionar varios objetos, ed√≠telos del siguiente modo:
‚óè Desplazar con el rat√≥n
‚Äì Para modificar la posici√≥n absoluta de los objetos seleccionados, sit√∫e el puntero del
rat√≥n sobre un objeto y arrastre la selecci√≥n m√∫ltiple manteniendo pulsado el bot√≥n del
rat√≥n.
‚Äì Para modificar el tama√±o de todos los objetos con el mismo factor, arrastre con el rat√≥n
el rect√°ngulo con controladores del objeto de referencia.
‚óè Desplazar por el √°rea de trabajo con los botones de la barra de herramientas
‚Äì Modificar la posici√≥n de los objetos seleccionados entre s√≠
‚Äì Igualar la altura y el ancho de los objetos seleccionados
‚óè Desplazar con los comandos del men√∫ contextual del √°rea de trabajo
‚Äì Modificar la posici√≥n de los objetos seleccionados entre s√≠
‚Äì Igualar la altura y el ancho de los objetos seleccionados

7.2.3.9

Alinear objetos

Procedimiento
1. Seleccione los objetos deseados mediante una selecci√≥n m√∫ltiple.
2. Defina un objeto como objeto de referencia.
3. Seleccione el comando deseado en la barra de herramientas o en el men√∫ contextual;
v√©ase tabla m√°s abajo.
Los objetos seleccionados se alinear√°n.

1320

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes

Justificar objetos
Los objetos seleccionados se alinean justificados al objeto de referencia.
S√≠mbolo

Descripci√≥n
Justifica los objetos seleccionados al borde izquierdo del objeto de referencia.
Justifica los objetos seleccionados al eje central vertical del objeto de referencia.
Justifica los objetos seleccionados al borde derecho del objeto de referencia.
Justifica los objetos seleccionados al borde superior del objeto de referencia.
Justifica los objetos seleccionados al eje central horizontal del objeto de referencia.
Justifica los objetos seleccionados al borde inferior del objeto de referencia.
Centra los objetos seleccionados alrededor del punto central del objeto de referencia.
Centra verticalmente los objetos seleccionados en la imagen.

Alinear a un objeto
Cuando mueva objetos, aparecer√°n l√≠neas auxiliares. Al posicionar, puede orientarse con
otros objetos.

Si trabaja con el teclado, pulse la tecla Alt. Si mueve el objeto seleccionado con las teclas de
flecha, se le mostrar√° el siguiente punto de anclaje.

Distribuir los objetos uniformemente
Es preciso haber seleccionado tres objetos como m√≠nimo. No se necesita un objeto de
referencia.
1. Seleccione los objetos.
2. Haga clic en uno de los botones "Espaciar horizontalmente por igual" o "Espaciar
verticalmente por igual".
Los objetos seleccionados se distribuyen de forma equidistante.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1321

Trabajar con informes
7.2 Trabajar con informes
La figura siguiente muestra c√≥mo ordenar los objetos de forma equidistante en sentido vertical:

S√≠mbolo

Descripci√≥n
Ordena los objetos de forma equidistante en sentido horizontal.
La posici√≥n de los objetos extremos (derecho e izquierdo) permanece invariable. Los
dem√°s objetos se distribuyen entre ellos de forma equidistante.
Ordena los objetos de forma equidistante en sentido vertical.
La posici√≥n del objeto superior y del objeto inferior (derecho e izquierdo) no se modifica.
Los dem√°s objetos se distribuyen entre ellos de forma equidistante.

7.2.3.10

Girar un objeto

Introducci√≥n
Un objeto adecuado se puede girar alrededor de s√≠ mismo en pasos de 90¬∞ hacia la derecha
o hacia la izquierda.
Nota
No todos los objetos pueden girarse. Algunos objetos que pueden girarse en las im√°genes no
pueden girarse en los informes.
Utilizando la selecci√≥n m√∫ltiple tambi√©n se pueden girar varios objetos simult√°neamente.
Algunos objetos de WinCC (p. ej. los botones) no se pueden girar.
Al girar un objeto se modifica la orientaci√≥n de los elementos que contiene. La figura siguiente
muestra c√≥mo se comportan un rect√°ngulo y una elipse con los diferentes comandos para girar
un objeto:

1322

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes

rKDFLDODGHUHFKD

rKDFLDODL]TXLHUGD

rKDFLDODGHUHFKD

[rKDFLDODGHUHFKD

Requisitos
El √°rea de trabajo est√° abierta con un objeto como m√≠nimo.

Procedimiento
1. Seleccione el objeto que desea girar.
2. Haga clic en uno de los siguientes botones de la barra de herramientas:
para girar el objeto hacia la derecha alrededor de su punto central. El √°ngulo de giro
es de 90¬∞.
para girar el objeto hacia la izquierda alrededor de su punto central. El √°ngulo de giro
es de 90¬∞.
para girar el objeto hacia la derecha en 180¬∞.

Resultado
El objeto aparecer√° girado.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1323

Trabajar con informes
7.2 Trabajar con informes

7.2.3.11

Voltear un objeto

Introducci√≥n
Los objetos se pueden voltear tomando como referencia su eje horizontal o vertical. Al voltear
un objeto se modifica la orientaci√≥n de los elementos que contiene. La figura siguiente muestra
c√≥mo se comportan un rect√°ngulo y una elipse con los diferentes comandos para voltear un
objeto.
KRUL]RQWDO

YHUWLFDO

KRUL]RQWDOYHUWLFDO

Requisitos
Hay como m√≠nimo una imagen abierta con un objeto.

Procedimiento
1. Seleccione el objeto que desea voltear.
2. En el men√∫ contextual, haga clic en el comando "Voltear" y elija una de las posibilidades
que se ofrecen:
‚Äì

para voltear el objeto seleccionado tomando como referencia su eje vertical.

‚Äì

para voltear el objeto seleccionado tomando como referencia su eje horizontal.

Resultado
El objeto aparecer√° volteado.

1324

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes

7.2.4

Operaci√≥n en runtime

7.2.4.1

Imprimir un informe

Imprimir un informe en runtime
Si se ha configurado un objeto con la funci√≥n de sistema "ImprimirInforme", el operador puede
imprimir un informe en runtime. Para ello, debe pulsar un bot√≥n en una imagen, p. ej. "Imprimir
informe". El operador no puede definir ni modificar otros ajustes del informe. El informe se
imprime en la impresora est√°ndar.

7.2.4.2

Imprimir un informe

Inicio de la impresi√≥n de informe por el operador
El operador inicia en runtime la impresi√≥n de un informe por medio del bot√≥n "Imprimir" en los
siguientes objetos de imagen:
‚óè Visor de curvas f(x)
‚óè Visor de curvas f(t)
‚óè Visor de tablas
‚óè Visor de avisos
‚óè Visor de recetas
Si en el trabajo de impresi√≥n se ha especificado que se mostrar√° un cuadro de di√°logo para
seleccionar una impresora o para definir las propiedades, el operador modifica esta
configuraci√≥n en runtime.
Si se ha configurado un bot√≥n y √©ste se ha enlazado con un script local correspondiente, el
operador podr√° iniciar la impresi√≥n de informes a trav√©s de este bot√≥n.

Inicio autom√°tico de la impresi√≥n de informes
En los siguientes casos, la impresi√≥n de informes se inicia autom√°ticamente en runtime:
‚óè Se ha enlazado un trabajo de impresi√≥n con una tarea del tipo "Trabajo de impresi√≥n".
‚óè Se ha enlazado un script global para imprimir informes con una tarea.
‚óè En la configuraci√≥n de runtime del panel de operador ha activado la entrada "Trabajos de
impresi√≥n previstos en runtime" en el apartado "Servicios".

Trabajo de impresi√≥n/diagn√≥stico de script
Dependiendo de la configuraci√≥n se muestran en runtime todos los trabajos de impresi√≥n o los
trabajos seleccionados en el objeto "Trabajo de impresi√≥n/diagn√≥stico de script" cuando est√°n
pendientes. Dependiendo de la configuraci√≥n, el operador puede iniciar la impresi√≥n de
informes en el objeto "Trabajo de impresi√≥n/diagn√≥stico de script", definir las opciones de
impresi√≥n y mostrar la vista preliminar.
Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1325

Trabajar con informes
7.3 Objetos en los informes

Consulte tambi√©n
Principios b√°sicos de la impresi√≥n de informes (P√°gina 1299)
Principios b√°sicos de los informes de sistema y trabajos de impresi√≥n del sistema
(P√°gina 1306)

7.3

Objetos en los informes

7.3.1

Resumen

Objetos del editor "Informes"
En el editor "Informes" se dispone de diferentes objetos:
‚óè Objetos para el dise√±o formal de un informe
p. ej. "N√∫mero de p√°gina", "L√≠nea" o "C√≠rculo"
‚óè Objetos para la visualizaci√≥n de contenido
p. ej. objetos para generar informes de avisos o visualizar recetas
En el siguiente apartado se describen objetos espec√≠ficos de informes con propiedades
especiales. Los objetos de dise√±o sencillos no se describen con detalle.

7.3.2

Informe de auditor√≠a

Utilizaci√≥n
Con el informe de auditor√≠a se visualiza en forma de informe el contenido del Audit Trail de un
panel de operador.

1326

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

Requisitos
El objeto "Informe de Audit" s√≥lo se encuentra disponible si se cumplen los requisitos
siguientes:
‚óè El panel de operador soporta una configuraci√≥n conforme a GMP.
‚óè En la configuraci√≥n de runtime del panel de operador est√° activada la configuraci√≥n
conforme a GMP.
Tenga en cuenta tambi√©n que las acciones de operador y los procesos de sistema s√≥lo se
registran si est√° configurado un fichero correspondiente.

Representaci√≥n
En la ventana de inspecci√≥n se modifican los ajustes correspondientes a la posici√≥n,
geometr√≠a, estilo, colores y fuentes del objeto. En particular, se adaptan los siguientes ajustes:
‚óè Visibilidad del comentario

7.3.3

Control Datos

Utilizaci√≥n
Si se quiere configurar un informe personalizado para la impresi√≥n de informes, se necesitan
objetos de informe.
El objeto de informe "Control Datos" imprime en forma de tabla todos los datos que contiene
el objeto de imagen, incluso los datos que no son visibles actualmente en runtime en el objeto
de imagen.

Representaci√≥n
En la ventana de inspecci√≥n se modifica la configuraci√≥n de bordes y colores. En particular, se
adaptan las propiedades siguientes:
‚óè Tipo de control cuyo contenido se imprime
‚óè Objetos de control del objeto de imagen que tambi√©n se representan
‚óè Posici√≥n y tama√±o

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1327

Trabajar con informes
7.3 Objetos en los informes

Tipo de control
Defina en "Propiedades > Propiedades > General > Tipo de control" de la ventana de
inspecci√≥n si debe imprimirse el objeto, el contenido del objeto o bien el valor en la posici√≥n de
la regla.
‚óè Elija para el "visor de curvas f(x)" y el "visor de curvas f(t)" entre las opciones "Regla" y "Otro
control".
‚óè Para todos los dem√°s objetos de imagen elija "Otro control".

Objetos de control del objeto de imagen
En "Propiedades > Propiedades > General > Contenido" de la ventana de inspecci√≥n se define
si tambi√©n deben imprimirse la barra de herramientas, la barra de estado y la barra de
desplazamiento.

Tama√±o y posici√≥n
En la ventana de inspecci√≥n se define el tama√±o y la posici√≥n del objeto de informe en
"Propiedades > Propiedades > Dise√±o".
En el informe se imprime la tabla con el ancho del objeto de informe. Configure el objeto de
informe con el ancho adecuado.

Consulte tambi√©n
Herramientas para dise√±ar informes (P√°gina 1286)
Crear un informe (P√°gina 1284)

7.3.4

Control Copia impresa

Utilizaci√≥n
Si se quiere configurar un informe personalizado para la impresi√≥n de informes, se necesitan
objetos de informe.
El objeto de informe "Control Copia impresa" imprime una instant√°nea del objeto de imagen.
En este caso s√≥lo se imprimen los datos visibles en el objeto de imagen en runtime.

Representaci√≥n
En la ventana de inspecci√≥n se modifica la configuraci√≥n de bordes y colores.

1328

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes
En particular, se adaptan las propiedades siguientes:
‚óè Tipo de control cuyo contenido se imprime
‚óè Qu√© objetos de control del objeto de imagen se representar√°n tambi√©n.
‚óè Tama√±o y posici√≥n

Tipo de control
Defina en "Propiedades > Propiedades > General > Tipo de control" de la ventana de
inspecci√≥n si debe imprimirse el objeto, el contenido del objeto o bien el valor en la posici√≥n de
la regla.
‚óè Elija para el "visor de curvas f(x)" y el "visor de curvas f(t)" entre las opciones "Regla" y "Otro
control".
‚óè Para todos los dem√°s objetos de imagen elija "Otro control".

Objetos de control del objeto de imagen
En "Propiedades > Propiedades > Contenido" de la ventana de inspecci√≥n se define si en el
informe tambi√©n deben imprimirse la barra de herramientas, la barra de estado y la barra de
desplazamiento.

Tama√±o y posici√≥n
En la ventana de inspecci√≥n se define el tama√±o y la posici√≥n del objeto de informe en
"Propiedades > Propiedades > Dise√±o".
En el informe se adapta el objeto de imagen al borde del objeto de informe. Configure el objeto
de informe con el tama√±o adecuado.

Consulte tambi√©n
Herramientas para dise√±ar informes (P√°gina 1286)
Crear un informe (P√°gina 1284)

7.3.5

Control Informaci√≥n

Utilizaci√≥n
Si se quiere configurar un informe personalizado para la impresi√≥n de informes, se necesitan
objetos de informe.
El objeto de informe "Control Informaci√≥n" imprime el t√≠tulo de la ventana, el nombre del objeto
de imagen o el nombre de la imagen. De este modo tambi√©n se puede imprimir, p. ej., el origen
de los datos en el informe.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1329

Trabajar con informes
7.3 Objetos en los informes

Representaci√≥n
En la ventana de inspecci√≥n se modifica la configuraci√≥n de bordes, colores, fuente y tama√±o
de fuente. En particular, se adaptan las propiedades siguientes:
‚óè Tipo de control cuyo contenido se imprime
‚óè Contenido

Tipo de control
Defina en "Propiedades > Propiedades > General > Tipo de control" de la ventana de
inspecci√≥n si debe imprimirse el objeto, el contenido del objeto o bien el valor en la posici√≥n de
la regla.
‚óè Elija para el "visor de curvas f(x)" y el "visor de curvas f(t)" entre las opciones "Regla" y "Otro
control".
‚óè Para todos los dem√°s objetos de imagen elija "Otro control".

Contenido
En "Propiedades > Propiedades > General > Contenido" de la ventana de inspecci√≥n se define
qu√© informaci√≥n imprimir√° el objeto de informe:
‚óè T√≠tulo de la ventana
‚óè Nombre del objeto
‚óè Nombre de la imagen

Consulte tambi√©n
Herramientas para dise√±ar informes (P√°gina 1286)
Crear un informe (P√°gina 1284)

7.3.6

Curvas del proveedor CSV

Utilizaci√≥n
Con el objeto "Curvas del CSV Provider" se visualizan en el informe datos de un archivo en
formato "*.csv" como curvas.
Dependiendo del volumen de datos imprimidos se insertar√°n autom√°ticamente saltos de
p√°gina en el informe. El ancho configurado no se modifica en el informe. Los siguientes objetos
se desplazan autom√°ticamente.

1330

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

Representaci√≥n
En la ventana de inspecci√≥n se modifican los ajustes correspondientes a la posici√≥n,
geometr√≠a, estilo, colores y fuentes del objeto. En particular, se adaptan las propiedades
siguientes:
‚óè Origen de los datos

Origen de los datos
Defina el origen de los datos en "Propiedades > Propiedades > General > Proveedor". Es
posible seleccionar un archivo CSV o dinamizar la selecci√≥n del archivo CSV con una variable
interna. De esta manera se modifica la impresi√≥n de datos directamente en el panel de
operador. La variable debe ser del tipo de datos "String" o "WString".
Nota
Para representar curvas, los datos del archivo CSV tienen que hallarse en una estructura
definida.

Consulte tambi√©n
Herramientas para dise√±ar informes (P√°gina 1286)
Crear un informe (P√°gina 1284)

7.3.7

Tablas del proveedor CSV

Utilizaci√≥n
Con el objeto "Tablas del CSV Provider" se visualizan en el informe datos de un archivo en
formato "*.csv" como tabla.
Dependiendo del volumen de datos imprimidos se insertar√°n autom√°ticamente saltos de
p√°gina en el informe. El ancho configurado no se modifica en el informe. Los siguientes objetos
se desplazan autom√°ticamente.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1331

Trabajar con informes
7.3 Objetos en los informes

Representaci√≥n
En la ventana de inspecci√≥n se modifican los ajustes correspondientes a la posici√≥n,
geometr√≠a, estilo, colores y fuentes del objeto. En particular, se adaptan las propiedades
siguientes:
‚óè Origen de los datos
‚óè Aplicar fuente del origen de los datos

Origen de los datos
Defina el origen de los datos en "Propiedades > Propiedades > General > Proveedor". Es
posible seleccionar un archivo CSV o dinamizar la selecci√≥n del archivo CSV con una variable
interna. De esta manera se modifica la impresi√≥n de datos directamente en el panel de
operador. La variable debe ser del tipo de datos "String" o "WString".
Nota
Para imprimir una tabla, los datos del archivo CSV tienen que hallarse en una estructura
definida.

Aplicar fuente del origen de los datos
Defina si se aplicar√°n la fuente y el tama√±o de fuente del archivo CSV en la impresi√≥n del
informe en "Propiedades > Propiedades > General > Fuente".
Si se desactivan las opciones "Fuente del origen de los datos" y "Tama√±o de fuente del origen
de los datos", se utilizar√° la configuraci√≥n de "Formato del texto > Estilo".

Consulte tambi√©n
Archivo CSV para la impresi√≥n de una tabla (P√°gina 1293)
Herramientas para dise√±ar informes (P√°gina 1286)
Crear un informe (P√°gina 1284)

7.3.8

Campo de fecha y hora

Utilizaci√≥n
El objeto "Campo de fecha y hora" muestra la hora del sistema del panel de operador o la fecha
y/o la hora de una variable conectada. La representaci√≥n depende del idioma configurado en
el panel de operador.

1332

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

Representaci√≥n
En la ventana de inspecci√≥n se modifican los ajustes correspondientes a la posici√≥n,
geometr√≠a, estilo, colores y fuentes del objeto. En particular, se adaptan las siguientes
propiedades en "Propiedades > Propiedades > General":
‚óè Formato de fecha y hora largo: define el formato en el que se mostrar√°n la fecha y/o la hora.
‚óè Hora del sistema: determina si se muestra la hora del sistema del panel de operador o la
fecha y/o la hora de una variable conectada.

Formato de fecha y hora largo
Opci√≥n

Descripci√≥n

"Activado"

La fecha y/o la hora se representan en formato largo, p. ej. "Sunday, December
31, 2000 10:59:59 AM"

"Desactivado"

La fecha y/o la hora se representan en formato abreviado, p. ej. "12/31/2000
10:59:59 AM"

Opci√≥n

Descripci√≥n

"Activado"

Se muestra la hora del sistema del panel de operador

"Desactivado"

Se muestra la fecha y hora de la variable conectada

Hora del sistema

Elija una variable del tipo de datos "DateTime", p. ej. una variable interna. En
la documentaci√≥n de los drivers de comunicaci√≥n correspondientes encontra‚Äê
r√° informaci√≥n sobre los tipos de datos disponibles para la conexi√≥n a otros
controles.

Consulte tambi√©n
Herramientas para dise√±ar informes (P√°gina 1286)
Crear un informe (P√°gina 1284)

7.3.9

Campo de fecha y hora

Utilizaci√≥n
El objeto "Campo de fecha y hora" imprime la fecha y/o la hora en el informe con un formato
que se puede configurar individualmente.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1333

Trabajar con informes
7.3 Objetos en los informes

Representaci√≥n
En la ventana de inspecci√≥n se modifican los ajustes correspondientes a la posici√≥n,
geometr√≠a, estilo, colores y fuentes del objeto. En particular, se adaptan las propiedades
siguientes:
‚óè Formato de visualizaci√≥n de la fecha y/o de la hora

Formato de visualizaci√≥n de fecha y hora
En "Propiedades > Propiedades > General > Formato" se define en qu√© forma se mostrar√°n la
fecha y/o la hora. Es posible combinar entre s√≠ comodines y un texto cualquiera.
La siguiente tabla muestra qu√© comodines pueden utilizarse:
Comodines

Conversi√≥n

Ejemplo

%a

D√≠a de la semana abreviado

Sun

%A

D√≠a de la semana completo

Sunday

%b

Mes abreviado

Dec

%B

Mes completo

December

%c

Fecha y hora en formato est√°ndar

12/31/2000 10:59:59 AM

%d

D√≠a como n√∫mero decimal (de 01 a 31)

31

%H

Horas en formato de 24 horas (de 00 a 23)

22

%I

Horas en formato de 12 horas (de 01 a 12)

10

%j

D√≠a del a√±o como n√∫mero decimal (000 de
366)

366

%m

Mes como n√∫mero decimal (de 01 a 12)

12

%M

Minuto como n√∫mero decimal (de 00 a 59)

59

%p

Suplemento PM/AM en el formato de 12 ho‚Äê AM
ras

%S

Segundo como n√∫mero decimal (de 00 a 59) 59

%U

Semana del a√±o como n√∫mero decimal (de
01 a 51)

50

%x

Fecha en formato est√°ndar

12/31/2000

%X

Hora en formato est√°ndar

10:59 AM

%y

A√±o sin siglo como n√∫mero decimal (de 00 a
99)

00

%Y

A√±o con siglo como n√∫mero decimal

2000

%z

Huso horario como nombre

W. Europe Standard Time

%%

Signo de porcentaje

%

Ejemplos
La siguiente tabla muestra c√≥mo se pueden combinar comodines y textos entre s√≠:

1334

Formato

Ejemplo de impresi√≥n

Fecha: %x Hora: %H:%M

Fecha: 12/31/2000 Hora: 22:59

Impresi√≥n del %a %c

Impresi√≥n de Sun 12/06/2010 10:59:59 AM

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

Consulte tambi√©n
Herramientas para dise√±ar informes (P√°gina 1286)
Crear un informe (P√°gina 1284)

7.3.10

Campo E/S

Utilizaci√≥n
El objeto "Campo E/S" permite la salida de valores de proceso.

Representaci√≥n
En la ventana de inspecci√≥n se modifican los ajustes correspondientes a la posici√≥n,
geometr√≠a, estilo, colores y fuentes del objeto. En particular, se adaptan las propiedades
siguientes:
‚óè Formato de visualizaci√≥n: Determina el formato en el que se visualizar√°n los valores en el
campo E/S.
Nota
El objeto "Campo E/S" tambi√©n se encuentra disponible en el editor "Im√°genes". En los
informes, el objeto muestra datos exclusivamente. En consecuencia, cuando se utiliza en
informes se configura s√≥lo la salida de datos.

Formato de visualizaci√≥n
El "formato de visualizaci√≥n" para la salida de valores se especifica en "Propiedades >
Propiedades > General > Formato" de la ventana de inspecci√≥n.
Representaci√≥n
"Binario"

Salida de valores en formato binario.

"Fecha" *

Salida de fechas. El formato depende del idioma configurado en el panel de ope‚Äê
rador.

"Fecha/hora" *

Salida de fechas y horas. El formato depende del idioma configurado en el panel
de operador.

"Decimal" *

Salida de valores en formato decimal.

"Hexadecimal"

Salida de valores en formato hexadecimal.

"Hora" *

Salida de horas. El formato depende del idioma configurado en el panel de ope‚Äê
rador.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1335

Trabajar con informes
7.3 Objetos en los informes
Representaci√≥n
"Cadena de carac‚Äê Salida de cadenas de caracteres.
teres"
*: no en Runtime Professional

Evitar solapamientos en los campos de salida
Si en un informe se han configurado varios campos E/S como campos de salida con fondo
transparente, es posible que dichos campos E/S se solapen. La parte transparente de un
campo cubre las cifras del otro campo. Ello puede ocasionar problemas de visualizaci√≥n en el
informe. Para evitar estos solapamientos, ponga a cero los bordes de los campos E/S en
"Propiedades > Propiedades > Apariencia" en las propiedades del objeto. Active "Propiedades
> Propiedades > Representaci√≥n > Adaptar objeto al contenido".

Consulte tambi√©n
Herramientas para dise√±ar informes (P√°gina 1286)
Crear un informe (P√°gina 1284)

7.3.11

Visor de curvas f(t) en los informes

Utilizaci√≥n
Con el objeto "Visor de curvas f(t)" se representan valores de variables del fichero en forma de
curvas como funciones de tiempo. En el informe se representa el estado de la evoluci√≥n de la
curva en el momento en que se inicia el trabajo de impresi√≥n.

Nota
Funcionalidad reducida al imprimir informes
La configuraci√≥n del objeto en el editor "Informes" se diferencia muy poco de la configuraci√≥n
en el editor "Im√°genes".
La funcionalidad del objeto se adapta a la utilizaci√≥n de la impresi√≥n de informes: Por ejemplo,
los elementos de control en runtime no pueden configurarse en el editor "Informes".

1336

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

Particularidades de la impresi√≥n de informes
A diferencia de la configuraci√≥n en la imagen, las propiedades de cada curva pueden
dinamizarse mediante variables, p. ej. la representaci√≥n y el suministro de datos. De este modo
es posible utilizar varias veces un informe, p. ej.

Consulte tambi√©n
Herramientas para dise√±ar informes (P√°gina 1286)
Crear un informe (P√°gina 1284)

7.3.12

Visor de curvas f(x) en los informes

Utilizaci√≥n
Con el objeto "Visor de curvas f(x)" se representan los valores de una variable como funci√≥n
de otra variable. De esta forma se representan, por ejemplo, las curvas de temperatura como
funci√≥n de la presi√≥n. En el informe se representa el estado de la evoluci√≥n de la curva en el
momento en que se inicia el trabajo de impresi√≥n.
Adem√°s se puede comparar la curva con una curva de consigna.

Nota
Funcionalidad reducida al imprimir informes
La configuraci√≥n del objeto en el editor "Informes" se diferencia muy poco de la configuraci√≥n
en el editor "Im√°genes".
La funcionalidad del objeto se adapta a la utilizaci√≥n de la impresi√≥n de informes: Por ejemplo,
los elementos de control en runtime no pueden configurarse en el editor "Informes".

Particularidades de la impresi√≥n de informes
A diferencia de la configuraci√≥n en la imagen, las propiedades de cada curva pueden
dinamizarse mediante variables, p. ej. la representaci√≥n y el suministro de datos. De este modo
es posible utilizar varias veces un informe, p. ej.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1337

Trabajar con informes
7.3 Objetos en los informes

Consulte tambi√©n
Herramientas para dise√±ar informes (P√°gina 1286)
Crear un informe (P√°gina 1284)

7.3.13

Vista de grafico

Utilizaci√≥n
El objeto "Visor de gr√°ficos" permite visualizar gr√°ficos.

Representaci√≥n
En la ventana de inspecci√≥n se modifican los ajustes correspondientes a la posici√≥n,
geometr√≠a, estilo, color y fuentes del objeto. En particular, se adaptan las propiedades
siguientes:
‚óè Gr√°fico: determina el archivo gr√°fico que se visualiza en el objeto.
‚óè Ajustar autom√°ticamente: determina que se adapte autom√°ticamente el tama√±o de los
objetos que contengan gr√°ficos.

Insertar un gr√°fico
En el objeto "Visor de gr√°ficos" se utilizan los formatos siguientes: *.bmp, *.tif, *.png, *.ico,
*.emf, *.wmf, *.gif, *.svg, *.jpg o *.jpeg. Los gr√°ficos tambi√©n pueden utilizarse como objetos
OLE en el visor de gr√°ficos.
1. Haga clic en la ventana de inspecci√≥n "Propiedades > Propiedades > General".
2. Seleccione el gr√°fico que desea insertar.
El gr√°fico se visualizar√° a la derecha en la vista preliminar.
3. Para insertar el gr√°fico en el visor de gr√°ficos haga clic en "Aplicar".

1338

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

Adaptar un gr√°fico
En la ventana de inspecci√≥n se determina si el gr√°fico representado en un visor de gr√°ficos
debe adaptarse en runtime al tama√±o del visor de gr√°ficos.
1. Haga clic en la ventana de inspecci√≥n "Propiedades > Propiedades > Representaci√≥n".
2. Elija una de las posibilidades siguientes en el √°rea "Adaptaci√≥n del tama√±o":
‚Äì No adaptar autom√°ticamente
‚Äì Adaptar gr√°fico al tama√±o del objeto
‚Äì Adaptar tama√±o del objeto al gr√°fico mayor
‚Äì Adaptar objeto, gr√°fico en tama√±o original

7.3.14

Campo E/S gr√°fico

Utilizaci√≥n
Con el objeto "Campo E/S gr√°fico" se visualizan los gr√°ficos de una lista de gr√°ficos
dependiendo del valor de una variable. La variable y la lista de gr√°ficos se configuran en
"Propiedades > Propiedades > General" de la ventana de inspecci√≥n.

Nota
El objeto "Campo E/S gr√°fico" tambi√©n se encuentra disponible en el editor "Im√°genes". En los
informes, el objeto muestra datos exclusivamente. En consecuencia, cuando se utiliza en
informes se configura s√≥lo la salida de datos.

Representaci√≥n
En la ventana de inspecci√≥n se modifican los ajustes correspondientes al color, los bordes, la
posici√≥n y el tama√±o del objeto. En especial se determina la "adaptaci√≥n de tama√±o", es decir,
si en la visualizaci√≥n del informe el objeto se adapta al gr√°fico o viceversa.

Consulte tambi√©n
Crear un informe (P√°gina 1284)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1339

Trabajar con informes
7.3 Objetos en los informes

7.3.15

Copia impresa

Utilizaci√≥n
Con el objeto "Copia impresa" se visualiza una instant√°nea del contenido de la pantalla en el
informe.

Representaci√≥n
En la ventana de inspecci√≥n se modifican los ajustes correspondientes a la posici√≥n,
geometr√≠a, estilo, colores y fuentes del objeto. En particular, se adaptan los siguientes ajustes:
‚óè Definir √°rea

Definir √°rea
Defina qu√© contenido de la pantalla se imprimir√° en el informe en "Propiedades > Propiedades
> √Årea":
‚óè "Ventana actual (1)": Ventana activa
‚óè "Secci√≥n seleccionada (2)": √Årea seleccionada
‚óè "Pantalla completa (0)": Contenido completo
La selecci√≥n del √°rea puede dinamizarse con una variable del tipo "N√∫mero". La configuraci√≥n
est√° asignada del siguiente modo:
‚óè 0 = "Pantalla completa"
‚óè 1 = "Ventana actual"
‚óè 2 = "Secci√≥n seleccionada"
Para una "Secci√≥n seleccionada(0)" se definen las siguientes propiedades:
‚óè Posici√≥n X del punto superior izquierdo del √°rea
‚óè Posici√≥n Y del punto superior izquierdo del √°rea
‚óè Ancho en p√≠xeles
‚óè Altura en p√≠xeles
Todas las propiedades pueden dinamizarse con una variable.

Consulte tambi√©n
Herramientas para dise√±ar informes (P√°gina 1286)
Crear un informe (P√°gina 1284)

1340

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

7.3.16

Visor de avisos en los informes

Utilizaci√≥n
El objeto "Visor de avisos" muestra avisos que surgen durante el proceso en una instalaci√≥n.
El visor de avisos se utiliza tambi√©n para representar avisos en listas. WinCC ofrece varios
visores como, por ejemplo, el visor "Avisos actuales" o "Fichero de corto plazo".
En el informe se representa el estado del visor de avisos en el momento en que se inicia el
trabajo de impresi√≥n.

Nota
Funcionalidad reducida al imprimir informes
La configuraci√≥n del objeto en el editor "Informes" se diferencia muy poco de la configuraci√≥n
en el editor "Im√°genes".
La funcionalidad del objeto se adapta a la utilizaci√≥n de la impresi√≥n de informes: Por ejemplo,
los elementos de control en runtime no pueden configurarse en el editor "Informes".

Consulte tambi√©n
Herramientas para dise√±ar informes (P√°gina 1286)
Registro continuo de avisos (P√°gina 1290)
Crear un informe (P√°gina 1284)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1341

Trabajar con informes
7.3 Objetos en los informes

7.3.17

Informe secuencial de avisos

Utilizaci√≥n
El objeto "Informe secuencial de avisos" imprime continuamente todos los avisos del panel de
operador en secuencia cronol√≥gica tras iniciar runtime. Este objeto s√≥lo se utiliza en el informe
de sistema "@AlarmSequenceReportForPage" que define la impresi√≥n del informe secuencial
de avisos de WinCC en el dise√±o de p√°gina.
En las propiedades del objeto se determina qu√© avisos deben imprimirse.
Dependiendo del volumen de datos imprimidos se insertar√°n autom√°ticamente saltos de
p√°gina en el informe. El ancho configurado no se modifica en el informe. Los siguientes objetos
se desplazan autom√°ticamente.

Consulte tambi√©n
Herramientas para dise√±ar informes (P√°gina 1286)
Registro continuo de avisos (P√°gina 1290)
Crear un informe (P√°gina 1284)
Modificar informes de sistema y trabajos de impresi√≥n del sistema (P√°gina 1307)

7.3.18

Informe de avisos

Utilizaci√≥n
Con el objeto "Informe de avisos" se visualizan avisos del b√∫fer o fichero en el informe.

1342

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

Representaci√≥n
En la ventana de inspecci√≥n se modifican los ajustes correspondientes a la posici√≥n,
geometr√≠a, estilo, colores y fuentes del objeto. En particular, se adaptan los siguientes ajustes:
‚óè Origen
‚óè Categor√≠as
‚óè Rango de tiempo
‚óè Ajustes adicionales de la visualizaci√≥n
‚óè Columnas visibles

Definir origen
En "Propiedades > Propiedades > General > Configuraci√≥n > Origen" se especifica si se
muestran los avisos del b√∫fer o del fichero de avisos. El fichero de avisos se selecciona en
"Fichero de avisos".
Nota
El origen "Fichero de avisos" solo est√° disponible si el panel de operador soporta ficheros.

Definir categor√≠as
En "Propiedades > Propiedades > General > Categor√≠as" se activan las categor√≠as cuyos
avisos se visualizar√°n en el informe.

Definir rango de tiempo
Si quiere visualizar √∫nicamente avisos de un rango de tiempo determinado, seleccione en
"Propiedades > Propiedades > General > Rango de tiempo" una variable de inicio y una de final
del rango de tiempo. La variable debe ser del tipo "DateTime".

Ajustes adicionales de la visualizaci√≥n
Defina en "Propiedades > Propiedades > General > Configuraci√≥n" los siguientes ajustes de la
visualizaci√≥n en el informe de avisos:
‚óè En "Ordenar" se determina si se muestra primero el aviso m√°s antiguo o el m√°s reciente.
‚óè En "L√≠neas por entrada" se define cu√°ntas l√≠neas est√°n disponibles por aviso. El n√∫mero de
l√≠neas requeridas depende de los siguientes factores:
‚Äì N√∫mero y ancho de las columnas seleccionadas para la impresi√≥n
‚Äì Tama√±o de fuente utilizado
‚Äì Formato de papel de la impresora
‚óè La visualizaci√≥n de los t√≠tulos de columna se activa con "T√≠tulo visible".
‚óè La visualizaci√≥n de los milisegundos en la hora se activa con "Mostrar miliseg.".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1343

Trabajar con informes
7.3 Objetos en los informes

Columnas visibles
En "Propiedades > Propiedades > Representaci√≥n > Columnas visibles" se activan las
columnas que se muestran en el informe de avisos.

Consulte tambi√©n
Configurar el registro de avisos (P√°gina 908)
Crear un informe (P√°gina 1284)

7.3.19

Campo de base de datos ODBC

Utilizaci√≥n
Con el objeto "Campo de la base de datos ODBC" se visualizan datos de una sola celda de la
tabla en el informe a trav√©s de la interfaz ODBC. La interfaz ODBC permite representar de
forma homog√©nea en un informe los datos que no provienen de WinCC.
Dependiendo del volumen de datos imprimidos se insertar√°n autom√°ticamente saltos de
p√°gina en el informe. El ancho configurado no se modifica en el informe. Los siguientes objetos
se desplazan autom√°ticamente.

Nota
Driver ODBC
Para los sistemas Windows 10 se soportan exclusivamente drivers ODBC de 64 bits.

Representaci√≥n
En la ventana de inspecci√≥n se modifican los ajustes correspondientes a la posici√≥n,
geometr√≠a, estilo, colores y fuentes del objeto. En particular, se adaptan los siguientes ajustes:
‚óè Configuraci√≥n de la conexi√≥n SQL
‚óè Selecci√≥n de datos para el Statement SQL

Formato de texto
Defina la alineaci√≥n del texto mostrado en "Propiedades > Propiedades > Formato de texto >
Alineaci√≥n". Puede alinear el texto en horizontal a la izquierda, a la derecha o centrado.
Nota
El ajuste "Alineaci√≥n > Vertical" no tiene efecto en runtime.

1344

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

Configuraci√≥n de la conexi√≥n
En "Propiedades > Propiedades > Conexi√≥n SQL" se definen el origen de los datos, los
nombres de usuario y la contrase√±a para la conexi√≥n SQL. Todas las configuraciones pueden
dinamizarse con variables. De esta manera se modifica la impresi√≥n de datos directamente en
el panel de operador.

Selecci√≥n de datos
En "Propiedades > Propiedades > SQL Statement" se define el rango de datos que se quiere
representar en el informe. Introduzca un "Select-Statement".
Introduzca el "Select-Statement" deseado en el campo de texto hom√≥nimo o seleccione la
"variable" que suministra el Select-Statement. La variable debe ser del tipo "String" o "WString".
El Select-Statement se puede dinamizar en el campo de entrada hom√≥nimo utilizando
variables. Para ello elija en el men√∫ contextual "Insert reportfield" en la posici√≥n deseada del
texto y elija a continuaci√≥n la variable deseada.
Nota
Finalmente introduzca "Select-Statements".

Consulte tambi√©n
Herramientas para dise√±ar informes (P√°gina 1286)
Crear un informe (P√°gina 1284)

7.3.20

Tabla de base de datos ODBC

Utilizaci√≥n
Con el objeto "Tabla de la base de datos ODBC" se visualizan datos de una tabla en el informe
a trav√©s de la interfaz ODBC. La interfaz ODBC permite representar de forma homog√©nea en
un informe los datos que no provienen de WinCC.
Dependiendo del volumen de datos imprimidos se insertar√°n autom√°ticamente saltos de
p√°gina en el informe. El ancho configurado no se modifica en el informe. Los siguientes objetos
se desplazan autom√°ticamente.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1345

Trabajar con informes
7.3 Objetos en los informes

Nota
Driver ODBC
Para los sistemas Windows 10 se soportan exclusivamente drivers ODBC de 64 bits.

Representaci√≥n
En la ventana de inspecci√≥n se modifican los ajustes correspondientes a la posici√≥n,
geometr√≠a, estilo, colores y fuentes del objeto. En particular, se adaptan las propiedades
siguientes:
‚óè Configuraci√≥n de la conexi√≥n SQL
‚óè Selecci√≥n de datos para el Statement SQL
‚óè Representaci√≥n de la tabla, p. ej. n√∫mero de columnas y lista circular

Configuraci√≥n de la conexi√≥n
En "Propiedades > Propiedades > Conexi√≥n SQL" se definen el origen de los datos, los
nombres de usuario y la contrase√±a para la conexi√≥n SQL. Todas las configuraciones pueden
dinamizarse con variables. De esta manera se modifica la impresi√≥n de datos directamente en
el panel de operador.

Selecci√≥n de datos
En "Propiedades > Propiedades > SQL Statement" se define el rango de datos que se quiere
representar en el informe.
Introduzca el "Select-Statement" deseado en el campo de texto hom√≥nimo o seleccione la
"variable" que suministra el Select-Statement. La variable debe ser del tipo "String" o "WString".
El Select-Statement se puede dinamizar en el campo de entrada hom√≥nimo utilizando
variables. Para ello elija en el men√∫ contextual "Insert reportfield" en la posici√≥n deseada del
texto y elija a continuaci√≥n la variable deseada.
Nota
Finalmente introduzca "Select-Statements".

1346

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

Lista circular
En la ventana de inspecci√≥n se define c√≥mo se repartir√°n los datos en las columnas de la tabla
con la opci√≥n "Lista circular" en "Propiedades > Propiedades > Tabla".
‚óè "Lista circular" desactivada
La tabla se llena por filas de arriba a abajo.
Dentro de una fila se imprime un valor en la primera columna. Las otras columnas
permanecen vac√≠as.
‚óè "Lista circular" activada
La tabla se llena por filas de arriba a abajo.
Dentro de una fila se llenan todas las columnas de izquierda a derecha.
Nota
La opci√≥n s√≥lo tiene efecto si los datos se suministran en una sola columna y si la tabla
configurada tiene varias columnas.

Ejemplo:
Se configura una tabla con 3 columnas. En el objeto de imagen est√°n incluidos los siguientes
datos en el momento de la impresi√≥n del informe: A1, A2, A3, B1, B2, B3, C1, C3, D4
La tabla siguiente muestra el resultado con la opci√≥n "Lista circular" desactivada:
Columna 1

Columna 2

Columna 3

A1
A2
A3
B1
B2
...

La tabla siguiente muestra el resultado con la opci√≥n "Lista circular" activada:
Columna 1

Columna 2

Columna 3

A1

A2

A3

B1

B2

B3

C1

C3

D4

Consulte tambi√©n
Herramientas para dise√±ar informes (P√°gina 1286)
Crear un informe (P√°gina 1284)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1347

Trabajar con informes
7.3 Objetos en los informes

7.3.21

Nombre del proyecto

Utilizaci√≥n
Con el objeto "Nombre del proyecto" se visualiza el nombre del proyecto actual en el informe.

Representaci√≥n
En la ventana de inspecci√≥n se modifican los ajustes correspondientes a la posici√≥n,
geometr√≠a, estilo, colores y fuentes del objeto. En particular, se adaptan los siguientes ajustes:
‚óè Formato del nombre del proyecto

Formato del nombre del proyecto
En el campo "Formato" de "Propiedades > Propiedades > Formato del texto > Estilo" se define
la forma en la que se imprimir√° el nombre del proyecto. Utilice comodines para el nombre del
proyecto e introduzca un texto cualquiera si es necesario.
La siguiente tabla muestra qu√© comodines pueden utilizarse:
Comodines

Valor

"%R"

Ruta y nombre del proyecto

"%r"

Nombre del proyecto (sin indicar la ruta)

Ejemplos
La siguiente tabla muestra mediante algunos ejemplos c√≥mo se pueden combinar comodines
y textos entre s√≠:
Formato

Ejemplo de impresi√≥n

Proyecto: %R

Proyecto: D:\WinCC\Proyectos\MP277_Mixing

Creado para el proyecto
"%r"

Creado para el proyecto "MP277_Mixing"

Consulte tambi√©n
Herramientas para dise√±ar informes (P√°gina 1286)
Crear un informe (P√°gina 1284)

1348

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

7.3.22

Nombre de informe

Utilizaci√≥n
Con el objeto "Nombre del informe" se imprime el nombre del informe en el mismo.

Representaci√≥n
En la ventana de inspecci√≥n se modifican los ajustes correspondientes a la posici√≥n,
geometr√≠a, estilo, colores y fuentes del objeto. En particular, se adaptan los siguientes ajustes:
‚óè Formato del nombre del informe

Formato del nombre del informe
En el campo "Formato" de "Propiedades > Propiedades > Formato del texto > Estilo" se define
la forma en la que se imprimir√° el nombre del informe. Utilice comodines para el nombre del
informe e introduzca un texto cualquiera si es necesario.
La siguiente tabla muestra qu√© comodines pueden utilizarse:
Comodines

Valor

"%L" o "%l"

Nombre de informe

Ejemplo
La siguiente tabla muestra c√≥mo se pueden combinar comodines y textos entre s√≠:
Formato

Ejemplo de impresi√≥n

Informe: %L

Informe: Avisos

Consulte tambi√©n
Herramientas para dise√±ar informes (P√°gina 1286)
Crear un informe (P√°gina 1284)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1349

Trabajar con informes
7.3 Objetos en los informes

7.3.23

Visor de recetas en los informes

Utilizaci√≥n
Con el objeto "Visor de recetas" se muestran los elementos de receta en forma de tabla. En el
informe se representa el estado del visor de recetas en el momento en que se inicia el trabajo
de impresi√≥n.

Nota
Funcionalidad reducida al imprimir informes
La configuraci√≥n del objeto en el editor "Informes" se diferencia muy poco de la configuraci√≥n
en el editor "Im√°genes".
La funcionalidad del objeto se adapta a la utilizaci√≥n de la impresi√≥n de informes: Por ejemplo,
los elementos de control en runtime no pueden configurarse en el editor "Informes".

Consulte tambi√©n
Herramientas para dise√±ar informes (P√°gina 1286)
Definici√≥n y campos de aplicaci√≥n (P√°gina 1200)
Crear un informe (P√°gina 1284)

1350

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

7.3.24

Informe de receta

Utilizaci√≥n
Con el objeto "Informe de receta" se visualizan los elementos de los registros de receta en el
informe.

Representaci√≥n
En la ventana de inspecci√≥n se modifican los ajustes correspondientes a la posici√≥n,
geometr√≠a, estilo, colores y fuentes del objeto. En particular, se adaptan los siguientes ajustes:
‚óè Receta
‚óè Registro
‚óè Formato
‚óè Entradas visibles

Seleccionar receta
En "Propiedades > Propiedades > General > Receta" se especifica qu√© recetas se visualizar√°n
en el informe de receta. Las recetas se pueden definir a trav√©s del nombre de receta o un rango
de n√∫meros de receta. En "Primera receta" y "√öltima receta" se introduce un valor o se
selecciona una variable.
Otra posibilidad es visualizar todas las recetas.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1351

Trabajar con informes
7.3 Objetos en los informes

Seleccionar registro
En "Propiedades > Propiedades > General > Registro" se define qu√© registros de las recetas
seleccionadas se visualizar√°n en el informe de receta. Los registros se pueden definir a trav√©s
del nombre de registro o un rango de n√∫meros de registro. En "Primer registro" y "√öltimo
registro" se introduce un valor o se selecciona una variable.
Otra posibilidad es visualizar todos los registros de las recetas seleccionadas.

Formato
En "Propiedades > Propiedades > Representaci√≥n > Configuraci√≥n" se define en el campo
"Formato" si los registros se visualizar√°n en forma de tabla con columnas o de informe de
l√≠neas.
WinCC actualiza la vista preliminar en la p√°gina de detalles en correspondencia.

Entradas visibles
En "Propiedades > Propiedades > Representaci√≥n > Entradas visibles" se activan las
columnas que se muestran en el informe de receta. La visualizaci√≥n de los t√≠tulos de columna
se activa con "Mostrar t√≠tulos".

Consulte tambi√©n
Definici√≥n y campos de aplicaci√≥n (P√°gina 1200)
Crear un informe (P√°gina 1284)

7.3.25

N√∫mero de p√°gina

Utilizaci√≥n
Con el objeto "N√∫mero de p√°gina" se visualiza el n√∫mero de p√°gina actual en el informe.

Representaci√≥n
En la ventana de inspecci√≥n se modifican los ajustes correspondientes al color, la fuente, la
posici√≥n y el tama√±o del objeto. En especial se determina la "adaptaci√≥n de tama√±o".

1352

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

Adaptaci√≥n de tama√±o
En "Propiedades > Propiedades > Representaci√≥n > Adaptaci√≥n de tama√±o" se define
mediante la opci√≥n "Adaptar objeto al contenido" si WinCC adapta el tama√±o del objeto al
contenido del campo:
‚óè Opci√≥n "Adaptar objeto al contenido" activada:
WinCC adapta autom√°ticamente el tama√±o del objeto al formato configurado. El tama√±o de
fuente y la longitud del campo se determinan en "Propiedades > Propiedades > General >
Text".
El objeto se puede desplazar en el √°rea de trabajo pero su tama√±o no puede modificarse.
En la impresi√≥n del informe se muestra el contenido total del campo en el momento de la
impresi√≥n.
‚óè Opci√≥n "Adaptar objeto al contenido" no activada:
Defina el tama√±o del campo. WinCC no cambia el tama√±o del campo al imprimir el informe.
Seg√∫n las circunstancias no se imprimir√°n todos los contenidos del campo en el informe.
Por esto, configure el campo lo suficientemente grande.

Consulte tambi√©n
Crear un informe (P√°gina 1284)

7.3.26

N√∫mero de p√°gina

Utilizaci√≥n
Con el objeto "N√∫mero de p√°gina" se imprime en el informe el n√∫mero de p√°gina actual o el
n√∫mero total de p√°ginas en el encabezado o en el pie de p√°gina del informe.

Representaci√≥n
En la ventana de inspecci√≥n se modifican los ajustes correspondientes al color, la fuente, los
bordes, la alineaci√≥n, as√≠ como la posici√≥n y el tama√±o del objeto. Defina en particular el
formato del n√∫mero de p√°gina.

Formato
En "Propiedades > General > Texto > Formato" se define en qu√© formato se imprimir√° el
n√∫mero de p√°gina. Utilice comodines para los n√∫meros de p√°gina e introduzca un texto
cualquiera si es necesario.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1353

Trabajar con informes
7.3 Objetos en los informes
La siguiente tabla muestra qu√© comodines pueden utilizarse:
Comodines

Valor

"%N" o "%n"

N√∫mero de p√°gina actual

"%T" o "%t"

N√∫mero total de las p√°ginas del informe

Ejemplos
La siguiente tabla muestra mediante algunos ejemplos c√≥mo se pueden combinar comodines
y textos entre s√≠:
Formato

Ejemplo de impresi√≥n

P√°gina %n de %t

P√°gina 2 de 10

%n/%t

2/10

Consulte tambi√©n
Herramientas para dise√±ar informes (P√°gina 1286)
Crear un informe (P√°gina 1284)

7.3.27

Campo E/S simb√≥lico

Utilizaci√≥n
Con el objeto "Campo E/S simb√≥lico" se visualizan en los informes los contenidos de una lista
de textos dependiendo del valor de una variable. La variable y la lista de textos se configuran
en "Propiedades > Propiedades > General" de la ventana de inspecci√≥n.

Representaci√≥n
En la ventana de inspecci√≥n se modifican los ajustes correspondientes al color, los bordes, la
fuente, la posici√≥n y el tama√±o del objeto. En especial se determina en la "adaptaci√≥n de
tama√±o" si el tama√±o del objeto se adapta o no al texto en la visualizaci√≥n del informe.
Nota
El objeto "Campo E/S simb√≥lico" tambi√©n se encuentra disponible en el editor "Im√°genes". En
los informes, el objeto muestra datos exclusivamente. En consecuencia, cuando se utiliza en
informes se configura s√≥lo la salida de datos.

1354

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

Consulte tambi√©n
Crear un informe (P√°gina 1284)

7.3.28

Visor de tablas en los informes

Utilizaci√≥n
Con el objeto "Visor de tablas" se representan los datos de proceso en una tabla. Cada fila de
la tabla representa el estado de las variables de proceso seleccionadas en un momento
determinado.
En el informe se representa el estado de la tabla en el momento en que se inicia el trabajo de
impresi√≥n.

Nota
Funcionalidad reducida al imprimir informes
La configuraci√≥n del objeto en el editor "Informes" se diferencia muy poco de la configuraci√≥n
en el editor "Im√°genes".
La funcionalidad del objeto se adapta a la utilizaci√≥n de la impresi√≥n de informes: Por ejemplo,
los elementos de control en runtime no pueden configurarse en el editor "Informes".

Particularidades de la impresi√≥n de informes
A diferencia de la configuraci√≥n en la imagen, las propiedades de las columnas de tiempo y
valores pueden dinamizarse mediante variables. De este modo es posible utilizar varias veces
un informe, p. ej.

Consulte tambi√©n
Herramientas para dise√±ar informes (P√°gina 1286)
Crear un informe (P√°gina 1284)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1355

Trabajar con informes
7.3 Objetos en los informes

7.3.29

Campo de texto

Utilizaci√≥n
El objeto "Campo de texto" es un objeto cerrado que puede rellenarse con un color.

Representaci√≥n
En la ventana de inspecci√≥n se modifican los ajustes correspondientes a la posici√≥n,
geometr√≠a, estilo, color y fuentes del objeto. En particular, se adaptan las propiedades
siguientes:
‚óè Texto: determina el texto para el campo de texto.
‚óè Tama√±o del campo de texto: determina si el tama√±o del objeto debe adaptarse al espacio
necesario para el registro m√°s largo de la lista.

Texto
El texto para el campo de texto se determina en la ventana de inspecci√≥n.
1. Haga clic en la ventana de inspecci√≥n "Propiedades > Propiedades > General".
2. Introduzca un texto.
Si el texto tiene varias l√≠neas, el salto de l√≠nea se activa pulsando la combinaci√≥n de teclas
<May√∫s + Intro>.

Tama√±o del campo de texto
En la ventana de inspecci√≥n se determina si el tama√±o del objeto debe adaptarse al espacio
necesario para el registro m√°s largo de la lista.
1. Haga clic en la ventana de inspecci√≥n "Propiedades > Propiedades > Representaci√≥n".
2. Active "Adaptaci√≥n de tama√±o > Adaptar tama√±o al contenido".

1356

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.1

Principios b√°sicos

8.1.1

Campo de aplicaci√≥n de la administraci√≥n de usuarios

8

Principio
La protecci√≥n de acceso regula el acceso a los datos y las funciones en runtime. De este modo
se protegen las aplicaciones de operaciones no autorizadas. Al crear el proyecto, algunas
operaciones relevantes para la seguridad ya se restringen a determinados grupos de usuarios.
Para ello, se crean usuarios y grupos de usuarios a los que se adjudican derechos de acceso
caracter√≠sticos, los permisos. Seguidamente, en los objetos relevantes para la seguridad se
configuran los permisos necesarios para el manejo. As√≠, p. ej., los operadores s√≥lo tienen
acceso a determinados objetos de manejo. Los operadores de puesta en marcha disponen de
acceso ilimitado en runtime, p. ej.

Definici√≥n
Los usuarios, grupos de usuarios y permisos se gestionan de forma centralizada en la
administraci√≥n de usuarios de WinCC. Los usuarios y grupos de usuarios se transfieren al
panel de operador junto con el proyecto. En el panel de operador, los usuarios y las
contrase√±as se gestionan en el visor de usuarios.

Ejemplo de aplicaci√≥n
El permiso "Servicio" se configura para que solo los t√©cnicos de mantenimiento y reparaci√≥n
puedan acceder a los par√°metros de ajuste. El permiso se asigna al grupo de usuarios
"T√©cnico de servicio". Todos los miembros de este grupo utilizan as√≠ los par√°metros de ajuste
protegidos.

ATENCI√ìN
Protecci√≥n contra manejo incorrecto
La protecci√≥n de acceso no protege de manipulaciones err√≥neas. Es su obligaci√≥n
asegurarse de que s√≥lo el personal autorizado y con la formaci√≥n adecuada se encarga de
construir m√°quinas e instalaciones, ponerlas en marcha, manejarlas y mantenerlas.
La protecci√≥n de acceso no sirve para definir procesos de trabajo y supervisar su
cumplimiento.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1357

Configurar una administraci√≥n de usuarios
8.1 Principios b√°sicos

8.1.2

Estructura de la administraci√≥n de usuarios

Introducci√≥n
En un proyecto de producci√≥n, el entorno del fabricante de m√°quinas debe ser diferente del
entorno del cliente final en su funci√≥n de operador de la planta.
El fabricante de m√°quinas autoriza al usuario, p. ej. Sr. Maestro, a acceder a la aplicaci√≥n o al
panel de operador de un modo determinado. Sin embargo, en el cliente final no hay ning√∫n
usuario Maestro. Los usuarios del cliente final y sus tareas todav√≠a se desconocen durante la
configuraci√≥n por parte del fabricante de m√°quinas. Por norma general, los usuarios finales no
se determinan hasta despu√©s de la puesta en marcha en las instalaciones del cliente final.

:LQ&&:RUNEHQFK
$GPLQLVWUDGRU

&RQILJXUDFL¬µQ

*UXSRGHXVXDULRV
7¬´FQLFRGHVHUYLFLR

$XWRUL]DFLRQHV

0¬æOOHU

0RGLILFDUUHJLVWURVGHUHFHWDV

*UXSR0HLHU

0RGLILFDUSDU¬£PHWURVGHVLVWHPD

0DHVWUR

$UFKLYDUYDORUHVGHSURFHVR

6H¬≥RU0DHVWUR

3URJUDPD

(OHPHQWRVGH
FRQWURO

%ORTXH

3DU¬£PHWURV
9DORUHVGH
SURFHVR 5HFHWD GHVLVWHPD $UFKLYDFL¬µQ

Principio
Para mantener el trabajo de administraci√≥n en niveles reducidos, las autorizaciones no se
asignan directamente a un solo usuario, sino que est√°n desacopladas en grupos de usuarios.
Un grupo de usuarios agrupa autorizaciones configuradas en funci√≥n de las tareas. As√≠, p. ej.,
todas las autorizaciones necesarias para una actuaci√≥n del servicio t√©cnico se agrupan en un
grupo "T√©cnico de servicio". Si crea un usuario responsable del servicio t√©cnico, as√≠gnelo
√∫nicamente al grupo "T√©cnico de servicio".
El visor de usuarios puede utilizarse para administrar usuarios en runtime, as√≠ como para
crearlos, borrarlos y asignarles una autorizaci√≥n.
La administraci√≥n de usuarios separa la administraci√≥n de los usuarios de la configuraci√≥n de
autorizaciones. De este modo, ofrece mayor flexibilidad en la protecci√≥n de acceso.

1358

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.1 Principios b√°sicos
Durante la configuraci√≥n ya se puede realizar una asignaci√≥n previa de la administraci√≥n de
usuarios en el sistema de ingenier√≠a.

8.1.3

Usuarios

Introducci√≥n
Los usuarios se crean en la ficha "Usuarios" del editor "Administraci√≥n de usuarios" y se
asignan a los grupos de usuarios. La ficha "Usuarios" forma parte de la administraci√≥n de
usuarios de WinCC.

Abrir
La ficha "Usuarios" se abre haciendo doble clic en "Administraci√≥n de usuarios" de la ventana
del proyecto.

√Årea de trabajo
En el √°rea de trabajo se administran los usuarios:
‚óè Se crean o borran usuarios.
‚óè Se asignan usuarios a grupos.
Nota
Un usuario solo puede asignarse a un grupo de usuarios.
Nota
Un panel de operador puede ser utilizado por 100 usuarios y un "PLC-User" como m√°ximo.
Este l√≠mite no es aplicable a PC. El n√∫mero m√°ximo de usuarios de un PC est√° limitado por
la memoria f√≠sica del mismo.

Ventana de inspecci√≥n
Si se selecciona un usuario, se puede modificar la contrase√±a en el grupo "General". En "Cierre
de sesi√≥n autom√°tico" se determina si el usuario debe desconectarse autom√°ticamente del
panel de operador en caso de que transcurra el tiempo establecido sin que se realice una
entrada.

Crear una copia de seguridad y restablecer datos
Los datos de los usuarios se codifican y se guardan en el panel de operador asegurados contra
fallos de red.
Es posible crear una copia de seguridad de los datos de los usuarios, las contrase√±as, las
asignaciones a grupos y los tiempos de cierre de sesi√≥n configurados en el panel de operador

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1359

Configurar una administraci√≥n de usuarios
8.1 Principios b√°sicos
y restaurar dichos datos. De este modo evita tener que volver a introducir los datos en otro
panel de operador.
Nota
Los datos actuales de los usuarios se sobrescriben en los casos siguientes:
‚óè Cuando el proyecto se cargue de nuevo (dependiendo de la configuraci√≥n)
‚óè Cuando se restablezca un proyecto del que se haya creado un backup
‚óè Cuando se importe la gesti√≥n de usuarios mediante un objeto de manejo. Los datos de
usuarios y contrase√±as que se carguen de nuevo o se restauren tendr√°n validez inmediata.
Nota
Los datos de usuario de versiones anteriores de Runtime se pueden guardar y restaurar en la
V14.
Los datos de usuario de la V14 no se pueden restaurar en versiones anteriores.

Consulte tambi√©n
Configuraci√≥n de la administraci√≥n de usuarios (P√°gina 1366)

8.1.4

√Årea de trabajo de usuarios

Introducci√≥n
El √°rea de trabajo "Usuarios" muestra los usuarios y grupos de usuarios en forma de tablas. En
esta √°rea es posible administrar los usuarios y asignarlos a un grupo de usuarios determinado.

Principio
El √°rea de trabajo se compone de las tablas "Usuarios" y "Grupos de usuarios".

1360

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.1 Principios b√°sicos
La tabla "Usuarios" muestra los usuarios creados. Si selecciona un usuario en esta tabla, en
la tabla "Grupos" aparecer√° el grupo de usuarios al que pertenece.
Nota
Para el usuario "Administrador" est√° preajustada la contrase√±a "administrator". Por motivos de
seguridad es conveniente cambiar la contrase√±a de este usuario.

Consulte tambi√©n
Configuraci√≥n de la administraci√≥n de usuarios (P√°gina 1366)
Grupos de usuarios (P√°gina 1361)
√Årea de trabajo de grupos de usuarios (P√°gina 1362)
Configuraci√≥n de la administraci√≥n de usuarios (P√°gina 1363)
Configuraci√≥n de la administraci√≥n de usuarios (P√°gina 1370)

8.1.5

Grupos de usuarios

Introducci√≥n
Los grupos de usuarios y las autorizaciones se crean en la ficha "Grupos de usuarios" del editor
"Administraci√≥n de usuarios". La ficha "Grupos de usuarios" forma parte de la administraci√≥n
de usuarios de WinCC.

Abrir
Haga doble clic en "Administraci√≥n de usuarios" de la ventana del proyecto. Seleccione la ficha
"Grupos de usuarios".

√Årea de trabajo
En el √°rea de trabajo se administran los grupos de usuarios y las autorizaciones:
‚óè Se crean nuevos grupos de usuarios y autorizaciones o se borran.
‚óè Se asignan autorizaciones a los grupos de usuarios.

Ventana de inspecci√≥n
Si se selecciona un grupo de usuarios o una autorizaci√≥n, se puede editar el nombre en el
grupo "General". Introduzca adem√°s una descripci√≥n breve en el grupo "Comentario".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1361

Configurar una administraci√≥n de usuarios
8.1 Principios b√°sicos

Consulte tambi√©n
Configuraci√≥n de la administraci√≥n de usuarios (P√°gina 1366)
√Årea de trabajo de usuarios (P√°gina 1360)
√Årea de trabajo de grupos de usuarios (P√°gina 1362)
Configuraci√≥n de la administraci√≥n de usuarios (P√°gina 1363)
Configuraci√≥n de la administraci√≥n de usuarios (P√°gina 1370)

8.1.6

√Årea de trabajo de grupos de usuarios

Introducci√≥n
El √°rea de trabajo "Grupos de usuarios" muestra los grupos y sus autorizaciones en forma de
tabla. En esta tabla es posible administrar los grupos de usuarios y asignarles autorizaciones.

Principio
El √°rea de trabajo se compone de las tablas "Grupos" y "Autorizaciones".

La tabla "Grupos" muestra los grupos de usuarios creados. Si selecciona un grupo de usuarios
en esta tabla, en la columna "Activo" de la tabla "Autorizaciones" aparecer√°n las
autorizaciones que se le hayan asignado.
La administraci√≥n de usuarios asigna el n√∫mero de grupo de usuarios y de autorizaci√≥n. El
usuario asigna las denominaciones y descripciones.

1362

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.1 Principios b√°sicos
Los n√∫meros de las autorizaciones predefinidas est√°n asignados de antemano. Las
autorizaciones que cree el usuario pueden editarse libremente. No obstante, al asignarlas
debe observarse la univocidad de los n√∫meros.

Consulte tambi√©n
Configuraci√≥n de la administraci√≥n de usuarios (P√°gina 1366)
√Årea de trabajo de usuarios (P√°gina 1360)
Grupos de usuarios (P√°gina 1361)
Configuraci√≥n de la administraci√≥n de usuarios (P√°gina 1363)
Configuraci√≥n de la administraci√≥n de usuarios (P√°gina 1370)

8.1.7

Configuraci√≥n de la administraci√≥n de usuarios

Introducci√≥n
En el editor "Configuraci√≥n de Runtime > Administraci√≥n de usuarios" se configuran los ajustes
de seguridad para los usuarios y sus contrase√±as en runtime.

Abrir
Haga doble clic en el editor "Configuraci√≥n de runtime" en la ventana del proyecto. Haga clic
en "Administraci√≥n de usuarios".

√Årea de trabajo
En el √°rea de trabajo se realizan ajustes para la validez de las contrase√±as en runtime. As√≠ se
determina, p. ej., la complejidad de la contrase√±a.
Nota
Si la contrase√±a de un proyecto anterior ya no cumple la norma, se solicitar√° al usuario que
guarde una nueva contrase√±a.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1363

Configurar una administraci√≥n de usuarios
8.1 Principios b√°sicos

Efectos en runtime
Dependiendo de la configuraci√≥n, los ajustes de seguridad tienen los efectos siguientes en
runtime.
‚óè Grupo "General"
‚Äì Casilla de verificaci√≥n "Activar l√≠mite de intentos de inicio de sesi√≥n" activada
El n√∫mero introducido en el campo "Intentos no v√°lidos de inicio de sesi√≥n" determina
cu√°ntos intentos de inicio de sesi√≥n puede realizar un usuario antes de ser asignado al
grupo "No autorizado".
Casilla de verificaci√≥n "Activar l√≠mite de intentos de inicio de sesi√≥n" no activada
El usuario tiene en runtime un n√∫mero ilimitado de intentos de inicio de sesi√≥n.
‚Äì Campo "Intentos no v√°lidos de inicio de sesi√≥n"
Si se ha introducido un "4" en el campo, p. ej., y el cuarto intento de inicio de sesi√≥n del
usuario no da resultado, se asigna autom√°ticamente al grupo "No autorizado".
Puede introducir entre 1 y 9 intentos.
‚Äì Casilla de verificaci√≥n "S√≥lo es posible iniciar sesi√≥n con contrase√±a"
Si la casilla de verificaci√≥n est√° activada, se realiza una autenticaci√≥n de los usuarios
mediante la contrase√±a. El nombre de usuario no es necesario.
Por consiguiente, para que sea posible la asignaci√≥n, no se debe asignar dos veces la
misma contrase√±a.
Nota
Si se activa la opci√≥n "S√≥lo es posible iniciar sesi√≥n con contrase√±a", el sistema
restablece las contrase√±as de los usuarios ya creados. Por ello es aconsejable activar
la opci√≥n "S√≥lo es posible iniciar sesi√≥n con contrase√±a" siempre antes de crear
usuarios.
Si transfiere datos de usuario desde versiones anteriores del dispositivo en las que la
opci√≥n "S√≥lo es posible iniciar sesi√≥n con contrase√±a" estuviera desactivada, es posible
que se hayan guardado varios usuarios con contrase√±as id√©nticas. Estos usuarios se
mostrar√°n en el visor de usuarios. Sin embargo, solo podr√° iniciar sesi√≥n en Runtime el
usuario cuyo nombre aparezca en primer lugar en orden alfab√©tico.
‚óè Grupo "Nivel de jerarqu√≠a"
‚Äì Casilla de verificaci√≥n "Activar derechos espec√≠ficos de grupo para la administraci√≥n de
usuarios"
Si esta casilla de verificaci√≥n est√° activada, los administradores s√≥lo gestionan a los
usuarios cuyo n√∫mero de grupo es inferior o igual al suyo propio.
Un administrador cuyo n√∫mero de grupo sea 5, p. ej., solo podr√° administrar usuarios
cuyo n√∫mero de grupo sea menor o igual a 5. Es decir, el administrador solo podr√°
asignar a grupos los usuarios que tengan un n√∫mero de grupo menor o igual a 5.

1364

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.1 Principios b√°sicos
‚óè Grupo "Contrase√±a"
‚Äì Casilla de verificaci√≥n "Activar caducidad de la contrase√±a" activada
La contrase√±a caduca al cabo del n√∫mero de d√≠as indicado en el campo "Vigencia de la
contrase√±a (d√≠as)".
En el editor "Grupos de usuarios" se activar√° tambi√©n la columna "Caducidad de la
contrase√±a". Con ello se determina para cada grupo en particular si caducan las
contrase√±as y si deben guardarse generaciones de contrase√±as. Si la caducidad de la
contrase√±a no se ha activado para un grupo, sus contrase√±as no caducar√°n nunca.
‚Äì Campo "Tiempo de advertencia (d√≠as)"
Se informa al usuario de que su contrase√±a caducar√° al cabo del n√∫mero de d√≠as
indicado en este campo.
‚Äì Campo "Generaciones de contrase√±a"
Cuando el usuario modifique su contrase√±a, esta deber√° diferenciarse del n√∫mero de
contrase√±as anteriores indicado en este campo. El n√∫mero posible de generaciones de
contrase√±as est√° comprendido entre 1 y 5.
‚óè Grupo "Complejidad de la contrase√±a"
‚Äì Casilla de verificaci√≥n "Debe contener caracteres especiales" activada
El usuario debe introducir una contrase√±a que contenga al menos un car√°cter especial,
sin importar en qu√© posici√≥n.
‚Äì Casilla de verificaci√≥n "Debe contener cifra" activada
El usuario debe introducir una contrase√±a que contenga al menos una cifra, sin importar
en qu√© posici√≥n.
‚Äì Campo "Longitud m√≠nima de la contrase√±a"
El usuario debe introducir una contrase√±a que tenga una longitud m√≠nima conforme al
n√∫mero introducido en el campo "Longitud m√≠nima de la contrase√±a".
La longitud m√≠nima de la contrase√±a es de 3 caracteres.
Nota
Si se activa la opci√≥n "Debe contener caracteres especiales", el sistema restablece las
contrase√±as de los usuarios ya creados. Por tanto, se recomienda activar siempre la opci√≥n
"Debe contener caracteres especiales" antes de crear usuarios.
Caracteres especiales permitidos en la contrase√±a:
-+.,/*:\"?_()=^!‚Ç¨%‚àº`¬ß'{}[]<>#$;&|@

Consulte tambi√©n
Configuraci√≥n de la administraci√≥n de usuarios (P√°gina 1366)
√Årea de trabajo de usuarios (P√°gina 1360)
Grupos de usuarios (P√°gina 1361)
√Årea de trabajo de grupos de usuarios (P√°gina 1362)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1365

Configurar una administraci√≥n de usuarios
8.1 Principios b√°sicos

8.1.8

Configuraci√≥n de la administraci√≥n de usuarios

Introducci√≥n
En el editor "Configuraci√≥n de Runtime > Administraci√≥n de usuarios" se configuran los ajustes
de seguridad para los usuarios y sus contrase√±as en runtime.

Abrir
Haga doble clic en el editor "Configuraci√≥n de runtime" en la ventana del proyecto. Haga clic
en "Administraci√≥n de usuarios".

√Årea de trabajo
En el √°rea de trabajo se realizan ajustes para la validez de las contrase√±as en runtime. As√≠ se
determina, p. ej., la complejidad de la contrase√±a.
Nota
Si la contrase√±a de un proyecto anterior ya no cumple la norma, se solicitar√° al usuario que
guarde una nueva contrase√±a.

1366

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.1 Principios b√°sicos

Efectos en runtime
Dependiendo de la configuraci√≥n, los ajustes de seguridad tienen los efectos siguientes en
runtime.
‚óè Grupo "General"
‚Äì Casilla de verificaci√≥n "Modificaci√≥n contrase√±a inicial" activada
Al iniciar la sesi√≥n por primera vez, el usuario debe modificar la contrase√±a que le ha
asignado el administrador.
‚Äì Casilla de verificaci√≥n "Cambiar tiempo de desconexi√≥n" activada
Para modificar el tiempo de cierre de sesi√≥n basta con tener derechos de usuario
simples.
El tiempo de cierre de sesi√≥n es el tiempo tras el cual la administraci√≥n de usuarios
desconecta autom√°ticamente a un usuario si no se ha realizado ninguna entrada en el
sistema.
El tiempo de cierre de sesi√≥n para un usuario de SIMATIC Logon equivale al del usuario
est√°ndar "Administrador".
Si el usuario modifica el tiempo de cierre de sesi√≥n, ello se registrar√° en el Audit Trail.
‚Äì Casilla de verificaci√≥n "Activar l√≠mite de intentos de inicio de sesi√≥n" activada
El n√∫mero introducido en el campo "Intentos no v√°lidos de inicio de sesi√≥n" determina
cu√°ntos intentos de inicio de sesi√≥n puede realizar un usuario antes de ser asignado al
grupo "No autorizado".
Casilla de verificaci√≥n "Activar l√≠mite de intentos de inicio de sesi√≥n" no activada
El usuario tiene en runtime un n√∫mero ilimitado de intentos de inicio de sesi√≥n.
‚Äì Campo "Intentos no v√°lidos de inicio de sesi√≥n"
Si se ha introducido un "4" en el campo, p. ej., y el cuarto intento de inicio de sesi√≥n del
usuario no da resultado, se asigna autom√°ticamente al grupo "No autorizado".
Puede introducir entre 1 y 9 intentos.
‚Äì Casilla de verificaci√≥n "S√≥lo es posible iniciar sesi√≥n con contrase√±a"
Si la casilla de verificaci√≥n est√° activada, se realiza una autenticaci√≥n de los usuarios
mediante la contrase√±a. El nombre de usuario no es necesario.
Por consiguiente, para que sea posible la asignaci√≥n, no se debe asignar dos veces la
misma contrase√±a.
Nota
Si se activa la opci√≥n "S√≥lo es posible iniciar sesi√≥n con contrase√±a", el sistema
restablece las contrase√±as de los usuarios ya creados. Por ello es aconsejable activar
la opci√≥n "S√≥lo es posible iniciar sesi√≥n con contrase√±a" siempre antes de crear
usuarios.
Si transfiere datos de usuario desde versiones anteriores del dispositivo en las que la
opci√≥n "S√≥lo es posible iniciar sesi√≥n con contrase√±a" estuviera desactivada, es posible
que se hayan guardado varios usuarios con contrase√±as id√©nticas. Estos usuarios se
mostrar√°n en el visor de usuarios. Sin embargo, solo podr√° iniciar sesi√≥n en Runtime el
usuario cuyo nombre aparezca en primer lugar en orden alfab√©tico.
‚óè Grupo "Nivel de jerarqu√≠a"

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1367

Configurar una administraci√≥n de usuarios
8.1 Principios b√°sicos
‚Äì Casilla de verificaci√≥n "Activar derechos espec√≠ficos de grupo para la administraci√≥n de
usuarios"
Si esta casilla de verificaci√≥n est√° activada, los administradores s√≥lo gestionan a los
usuarios cuyo n√∫mero de grupo es inferior o igual al suyo propio.
Un administrador cuyo n√∫mero de grupo sea 5, p. ej., solo podr√° administrar usuarios
cuyo n√∫mero de grupo sea menor o igual a 5. Es decir, el administrador solo podr√°
asignar a grupos los usuarios que tengan un n√∫mero de grupo menor o igual a 5.
‚óè Grupo "Contrase√±a"
‚Äì Casilla de verificaci√≥n "Activar caducidad de la contrase√±a" activada
La contrase√±a caduca al cabo del n√∫mero de d√≠as indicado en el campo "Vigencia de la
contrase√±a (d√≠as)".
En el editor "Grupos de usuarios" se activar√° tambi√©n la columna "Caducidad de la
contrase√±a". Con ello se determina para cada grupo en particular si caducan las
contrase√±as y si deben guardarse generaciones de contrase√±as. Si la caducidad de la
contrase√±a no se ha activado para un grupo, sus contrase√±as no caducar√°n nunca.
‚Äì Campo "Tiempo de advertencia (d√≠as)"
Se informa al usuario de que su contrase√±a caducar√° al cabo del n√∫mero de d√≠as
indicado en este campo.
‚Äì Campo "Generaciones de contrase√±a"
Cuando el usuario modifique su contrase√±a, esta deber√° diferenciarse del n√∫mero de
contrase√±as anteriores indicado en este campo. El n√∫mero posible de generaciones de
contrase√±as est√° comprendido entre 1 y 5.

1368

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.1 Principios b√°sicos
‚óè Grupo "Complejidad de la contrase√±a"
‚Äì Casilla de verificaci√≥n "Debe contener caracteres especiales" activada
El usuario debe introducir una contrase√±a que contenga al menos un car√°cter especial,
sin importar en qu√© posici√≥n.
‚Äì Casilla de verificaci√≥n "Debe contener cifra" activada
El usuario debe introducir una contrase√±a que contenga al menos una cifra, sin importar
en qu√© posici√≥n.
‚Äì Campo "Longitud m√≠nima de la contrase√±a"
El usuario debe introducir una contrase√±a que tenga una longitud m√≠nima conforme al
n√∫mero introducido en el campo "Longitud m√≠nima de la contrase√±a".
La longitud m√≠nima de la contrase√±a es de 3 caracteres.
Nota
Si se activa la opci√≥n "Debe contener caracteres especiales", el sistema restablece las
contrase√±as de los usuarios ya creados. Por tanto, se recomienda activar siempre la
opci√≥n "Debe contener caracteres especiales" antes de crear usuarios.
Caracteres especiales permitidos en la contrase√±a:
-+.,/*:\"?_()=^!‚Ç¨%‚àº`¬ß'{}[]<>#$;&|@
‚óè Grupo "SIMATIC Logon"
‚Äì Casilla de verificaci√≥n "Activar SIMATIC Logon" activada
Se establece una conexi√≥n con el servidor. La autorizaci√≥n se lleva a cabo v√≠a SIMATIC
Logon.
‚Äì Casilla de verificaci√≥n "Transferencia encriptada" activada
Los datos se transfieren de forma encriptada al servidor.

Consulte tambi√©n
Administraci√≥n de usuarios central con SIMATIC Logon (P√°gina 1381)
Usuarios (P√°gina 1359)
√Årea de trabajo de usuarios (P√°gina 1360)
Grupos de usuarios (P√°gina 1361)
√Årea de trabajo de grupos de usuarios (P√°gina 1362)
Configuraci√≥n de la administraci√≥n de usuarios (P√°gina 1363)
Configuraci√≥n de la administraci√≥n de usuarios (P√°gina 1370)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1369

Configurar una administraci√≥n de usuarios
8.1 Principios b√°sicos

8.1.9

Configuraci√≥n de la administraci√≥n de usuarios

Introducci√≥n
En el editor "Configuraci√≥n de runtime > Administraci√≥n de usuarios" se determina si los
usuarios inician sesi√≥n din√°micamente en runtime en un panel de operador. Tambi√©n se puede
activar una administraci√≥n de usuarios central v√≠a SIMATIC Logon.

Abrir
Haga doble clic en el editor "Configuraci√≥n de runtime" en la ventana del proyecto. Haga clic
en "Administraci√≥n de usuarios".
Nota
La vista del √°rea de trabajo depende del tipo de panel de operador.

√Årea de trabajo
En el √°rea de trabajo se determina c√≥mo ha de iniciar sesi√≥n un operador en el panel de
operador:
‚óè Inicio de sesi√≥n din√°mico
En el inicio de sesi√≥n din√°mico se le asigna una variable a cada panel de operador. Un valor
de variable es asignado a un usuario. El usuario inicia sesi√≥n en runtime activando el valor
de variable en un panel de operador, p. ej. a trav√©s de un interruptor de llave.
‚óè SIMATIC Logon
En caso de utilizar SIMATIC Logon, defina el nombre de visualizaci√≥n que debe mostrarse
en el panel de operador. SIMATIC Logon soporta una administraci√≥n de usuarios central.
Tan pronto como active la opci√≥n "SIMATIC Logon", ser√°n ignorados los usuarios creados
en el editor "Administraci√≥n de usuarios". El √°rea de trabajo "Usuarios" se suprime.
√önicamente aquellos grupos, cuyos ajustes concuerden en el nombre con los grupos de
Windows, son de relevancia.
Nota
En caso de utilizar SIMATIC Logon , no se puede utilizar la opci√≥n "Inicio de sesi√≥n
autom√°tico".

Efectos en runtime
En el inicio de sesi√≥n din√°mico el usuario se conecta en el panel de operador tan pronto como
la variable obtenga el valor correcto.
El tiempo de cierre de sesi√≥n autom√°tico ajustado no afecta a los usuarios que inicien sesi√≥n
con una variable de inicio de sesi√≥n.
En SIMATIC Logon el operador inicia sesi√≥n en el sistema operativo. Los ajustes de usuario,
p. ej., la validez de la contrase√±a, son le√≠dos por SIMATIC Logon en la administraci√≥n de
usuarios del sistema operativo.

1370

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.1 Principios b√°sicos

Consulte tambi√©n
Configuraci√≥n de la administraci√≥n de usuarios (P√°gina 1366)
√Årea de trabajo de usuarios (P√°gina 1360)
Grupos de usuarios (P√°gina 1361)
√Årea de trabajo de grupos de usuarios (P√°gina 1362)
Iniciar una sesi√≥n de usuario din√°mica (P√°gina 1380)
Administraci√≥n de usuarios central con SIMATIC Logon (P√°gina 1381)

8.1.10

Grupos objetivo en la administraci√≥n de usuarios

Principio
Los grupos objetivo son ejemplos de diferentes grupos de personas que trabajan con la
administraci√≥n de usuarios. En la administraci√≥n de usuarios se distinguen cuatro grupos
objetivo:
1. Administrador OEM
2. Administrador RT
3. Ingeniero
4. Operador
El administrador OEM crea, p. ej., los grupos de usuarios, los usuarios y los permisos para
runtime en el sistema de ingenier√≠a del fabricante de m√°quinas.
El administrador RT administra usuarios en el "Visor de usuarios" de runtime.
El ingeniero asigna los permisos a los grupos de usuarios en el sistema de ingenier√≠a.
Asimismo, configura permisos en los objetos.
El operador inicia la sesi√≥n en runtime. Solo puede acceder a un objeto protegido si dispone
del permiso necesario.
Nota
El grupo destinatario Administrador RT ya existe en la administraci√≥n de usuarios de runtime
con el nombre "Grupo de administradores". De ahora en adelante y para una mejor
comprensi√≥n no se utilizar√°n los permisos y grupos de usuarios predefinidos.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1371

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios

8.2

Estructurar la administraci√≥n de usuarios

8.2.1

Administrar usuarios para runtime

8.2.1.1

Crear una autorizaci√≥n

Introducci√≥n
Una autorizaci√≥n se crea y se asigna a uno o varios grupos de usuarios.

Requisitos
El √°rea de trabajo "Grupos de usuarios" est√° abierta.

Procedimiento
1. Haga doble clic en "Agregar" en la tabla "Autorizaciones".
2. Introduzca "Salir de runtime" como nombre de la autorizaci√≥n.
3. Introduzca una descripci√≥n breve en "Comentario".

Consulte tambi√©n
Crear un grupo de usuarios (P√°gina 1372)
Administrar grupos de usuarios (P√°gina 1378)
Cambiar el n√∫mero del grupo de usuarios (P√°gina 1379)

8.2.1.2

Crear un grupo de usuarios

Introducci√≥n
Para no tener que asignar una autorizaci√≥n a cada usuario, cree grupos de usuarios. Cree un
grupo de usuarios y as√≠gnele autorizaciones y usuarios.
Nota
El nombre del grupo de usuarios debe ser un√≠voco dentro del proyecto. En caso contrario, la
entrada no se aceptar√°.

1372

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios

Nota
Utilizaci√≥n del SIMATIC Logon
Aseg√∫rese de que los nombres de los grupos de usuarios concuerden exactamente en
Windows y WinCC.

Requisitos
El √°rea de trabajo "Grupos de usuarios" est√° abierta.

Procedimiento
1. Haga doble clic en "Agregar" en la tabla "Grupos".
2. Introduzca "Operadores" como "Nombre" del grupo de usuarios.
3. En caso necesario, modifique el "N√∫mero" del grupo de usuarios.
4. Introduzca "Operadores" como "Nombre de visualizaci√≥n" del grupo de usuarios.
5. Introduzca una descripci√≥n breve en "Comentario".
El visor de usuarios muestra en runtime el nombre de visualizaci√≥n del grupo de usuarios. El
nombre de visualizaci√≥n del grupo de usuarios depende del idioma. Configure el nombre en
varios idiomas y cambie de idioma en runtime.

Consulte tambi√©n
Crear una autorizaci√≥n (P√°gina 1372)

8.2.1.3

Crear un grupo de usuarios

Introducci√≥n
Para no tener que asignar una autorizaci√≥n a cada usuario, cree grupos de usuarios. Cree un
grupo de usuarios y as√≠gnele autorizaciones y usuarios.
Nota
Utilizaci√≥n del SIMATIC Logon
Aseg√∫rese de que los nombres de los grupos de usuarios concuerden exactamente en
Windows y WinCC.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1373

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios

Nota
El nombre del grupo de usuarios debe ser un√≠voco dentro del proyecto. En caso contrario, la
entrada no se aceptar√°.

Requisitos
El √°rea de trabajo "Grupos de usuarios" est√° abierta.

Procedimiento
1. Haga doble clic en "Agregar" en la tabla "Grupos".
2. Introduzca "Operadores" en el nombre del grupo de usuarios.
3. En caso necesario, modifique el "N√∫mero" del grupo de usuarios.
4. Introduzca una descripci√≥n breve en "Comentario".

8.2.1.4

Asignar una autorizaci√≥n

Introducci√≥n
Cuando se asigna una autorizaci√≥n a un grupo de usuarios, todos los usuarios del grupo
tendr√°n est√° autorizaci√≥n.

Requisitos
‚óè Se ha creado la autorizaci√≥n "Salir de runtime".
‚óè Un grupo de usuarios "Operadores" est√° creado.
‚óè El √°rea de trabajo "Grupos de usuarios" est√° abierta.

Procedimiento
1. En la tabla "Grupos", haga clic en el grupo de usuarios "Operadores". La tabla
"Autorizaciones" muestra todas las autorizaciones.
2. En la tabla "Autorizaciones", active la autorizaci√≥n "Salir de runtime".
Nota
La autorizaci√≥n "Salir de runtime" es solo una denominaci√≥n y no hace referencia a la
funci√≥n "PararRuntime". Esta relaci√≥n debe crearse a parte. Para ello, configure en un
bot√≥n la funci√≥n de sistema "PararRuntime" y seleccione como autorizaci√≥n "Salir de
runtime".

1374

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios

8.2.1.5

Crear un usuario

Introducci√≥n
Un usuario se crea para que las personas puedan iniciar una sesi√≥n en runtime con su nombre
de usuario tras la carga en el panel de operador.
Alternativamente, pueden crearse y modificarse usuarios en runtime mediante el "Visor de
usuarios".
Nota
V√°lido solo para Runtime Professional:
Los usuarios nuevos que deban acceder al sistema mediante un cliente web o un cliente
WebUX solo pueden crearse en el sistema de ingenier√≠a.
Si se crea un usuario en runtime con el visor de usuarios, no se podro√° asignar una imagen
inicial de la web a este usuario. Por lo tanto, este usuario no estar√° habilitado para accesos a
la web.
En runtime tampoco se conceden derechos de acceso a la web a usuarios existentes.
Para que un usuario tenga autorizaciones debe asignarse a un grupo de usuarios que, a su
vez, debe tener autorizaciones asignadas.
La sesi√≥n se inicia correctamente si el nombre de usuario entrado coincide con un usuario de
runtime. Asimismo, la contrase√±a introducida debe coincidir con la contrase√±a guardada del
usuario.
Nota
Observe el uso de may√∫sculas y min√∫sculas.

Requisitos
El √°rea de trabajo "Usuarios" est√° abierta.

Procedimiento
1. Haga doble clic en "Agregar" en la tabla "Usuarios".
2. Introduzca el nombre de usuario "Maestro".
Nota
El nombre de usuario debe ser un√≠voco dentro del proyecto. En caso contrario, la entrada
no se aceptar√°.
Nota
Cuando introduzca un nombre de usuario y una contrase√±a, no utilice caracteres
especiales como / " ¬ß $ % ? ' &.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1375

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios
3. En la columna "Contrase√±a", haga clic en el bot√≥n
introducir la contrase√±a.

. Se abre un cuadro de di√°logo para

4. Introduzca la contrase√±a del usuario.
5. Vuelva a introducir la contrase√±a en el campo de confirmaci√≥n situado debajo.
6. Cierre el cuadro de di√°logo con el s√≠mbolo

.

7. Si la sesi√≥n del usuario debe cerrarse pasado un tiempo determinado, active "Cierre de
sesi√≥n autom√°tico".
8. Haga clic en la columna "Tiempo de cierre de sesi√≥n". El "Tiempo de cierre de sesi√≥n"
predeterminado es de 5 minutos.
9. Introduzca una descripci√≥n breve en "Comentario".

8.2.1.6

Asignar un usuario a un grupo de usuarios

Introducci√≥n
Cuando se asigna un usuario a un grupo de usuarios, tendr√° las autorizaciones del grupo de
usuarios.
Nota
Un usuario s√≥lo puede asignarse a un grupo de usuarios. Al verificar la consistencia y compilar
el proyecto se comprueba la asignaci√≥n.

Requisitos
‚óè El usuario "Maestro" est√° creado.
‚óè Un grupo de usuarios "Operadores" est√° creado.
‚óè El √°rea de trabajo "Usuarios" est√° abierta.

Procedimiento
1. En la tabla "Usuarios", haga clic en el usuario "Maestro". La tabla "Grupos" muestra todos
los grupos de usuarios.
2. En la tabla "Grupos", active el grupo de usuarios "Operadores".

8.2.1.7

Administrar usuarios

Introducci√≥n
En la vista se administran los usuarios y se asignan los grupos.

1376

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios

Requisitos
El √°rea de trabajo "Usuarios" est√° abierta.

Cambiar nombre de usuario
1. En la columna "Nombre" de la tabla "Usuarios" haga doble clic en el campo del nombre a
cambiar.
2. Cambie el nombre de usuario.
3. Confirme con la tecla <Intro>.
Opcionalmente, seleccione el usuario en el √°rea de trabajo. Modifique el nombre de usuario en
la ventana de inspecci√≥n "Propiedades > Propiedades > General".

Modificar la contrase√±a de usuario
1. En la columna "Contrase√±a" de la tabla "Usuarios", haga clic en el bot√≥n
cuadro de di√°logo para introducir la contrase√±a.

. Se abrir√° un

2. Introduzca la nueva contrase√±a en el campo "Introducir contrase√±a".
3. Vuelva a introducir la nueva contrase√±a en el campo "Confirmar contrase√±a".
4. Confirme con la tecla <Intro>.
Opcionalmente, seleccione el usuario en el √°rea de trabajo. Modifique la contrase√±a en la
ventana de inspecci√≥n "Propiedades > Propiedades > General".

Visualizar columnas no visibles
1. Mueva el puntero del rat√≥n hacia el encabezado de la tabla "Usuarios".
2. Abra el men√∫ contextual con el bot√≥n derecho del rat√≥n y active la vista de la columna
"Tiempo de cierre de sesi√≥n", p. ej.

Modificar el tiempo de cierre de sesi√≥n del usuario
1. Hacer doble clic en la columna "Tiempo de cierre de sesi√≥n" del √°rea "Usuario" que se
encuentra en el campo del nombre a cambiar.
2. Modifique el tiempo de cierre de sesi√≥n.
3. Confirme con la tecla <Intro>.
Opcionalmente, seleccione el usuario en el √°rea de trabajo. Modifique el tiempo de cierre de
sesi√≥n en la ventana de inspecci√≥n "Propiedades > Propiedades > Cierre de sesi√≥n
autom√°tico".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1377

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios

Borrar un usuario
1. Seleccione la fila del usuario que debe borrarse.
2. Abra el men√∫ contextual con el bot√≥n derecho del rat√≥n y seleccione el comando "Borrar".
Nota
Los usuarios predefinidos no pueden borrarse.

8.2.1.8

Administrar grupos de usuarios

Introducci√≥n
En el √°rea de trabajo se administran grupos de usuarios y se asignan autorizaciones para la
utilizaci√≥n en runtime.

Requisitos
El √°rea de trabajo "Grupos de usuarios" est√° abierta.

Cambiar el nombre del grupo de usuarios
1. En la columna "Nombre" de la tabla "Grupos" haga doble clic en el campo del nombre de
grupo a cambiar.
2. Cambie el nombre del grupo de usuarios.
3. Confirme con la tecla <Return>.
Opcionalmente, seleccione el grupo de usuarios en el √°rea de trabajo. Modifique el nombre en
la ventana de inspecci√≥n "Propiedades > Propiedades > General".
Nota
Los grupos de usuarios predefinidos no pueden borrarse.

Visualizar columnas no visibles
1. Mueva el puntero del rat√≥n hacia el encabezado de la tabla "Grupos".
2. Abra el men√∫ contextual con el bot√≥n derecho del rat√≥n y active la vista de la columna
"Nombre de visualizaci√≥n", p. ej.

Modificar el nombre de visualizaci√≥n del grupo de usuarios
1. En la columna "Nombre de visualizaci√≥n" de la tabla "Grupos" haga doble clic en el campo
del nombre de visualizaci√≥n a cambiar.
2. Cambie el nombre de visualizaci√≥n del grupo de usuarios.
3. Confirme con la tecla <Return>.

1378

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios
Opcionalmente, seleccione el grupo de usuarios en el √°rea de trabajo. Modifique el nombre de
visualizaci√≥n en la ventana de inspecci√≥n "Propiedades > Propiedades > General".

Borrar un grupo de usuarios
1. Seleccione la fila del grupo de usuarios que debe borrarse.
2. Abra el men√∫ contextual con el bot√≥n derecho del rat√≥n y seleccione el comando "Borrar".
Nota
Los grupos de usuarios predefinidos no pueden borrarse.

Cambiar el nombre de la autorizaci√≥n
1. En la columna "Nombre" de la tabla "Autorizaciones" haga doble clic en el campo del
nombre a cambiar.
2. Cambie el nombre de la autorizaci√≥n.
3. Confirme con la tecla <Return>.
Opcionalmente, seleccione la autorizaci√≥n en el √°rea de trabajo. Modifique el nombre en la
ventana de inspecci√≥n "Propiedades > Propiedades > General".

Borrar una autorizaci√≥n
1. Seleccione la fila de la autorizaci√≥n que debe borrarse.
2. Abra el men√∫ contextual con el bot√≥n derecho del rat√≥n y seleccione el comando "Borrar".
Nota
Las autorizaciones predefinidas no pueden borrarse.

Consulte tambi√©n
Crear una autorizaci√≥n (P√°gina 1372)

8.2.1.9

Cambiar el n√∫mero del grupo de usuarios

Introducci√≥n
Para asignar derechos espec√≠ficos de grupo, edite el n√∫mero de un grupo de usuarios.

Requisitos
‚óè En el editor "Configuraci√≥n de runtime > Administraci√≥n de usuarios" est√° activado
"Derechos espec√≠ficos de grupo para la administraci√≥n de usuarios".
‚óè El grupo de usuarios "Operadores" est√° creado.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1379

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios
‚óè Se ha creado una autorizaci√≥n "Administraci√≥n de usuarios".
‚óè El √°rea de trabajo "Grupos de usuarios" est√° abierta.

Procedimiento
1. En la tabla "Grupos", haga clic en el grupo de usuarios "Operadores".
2. En la columna "N√∫mero" del grupo de usuarios, introduzca "6".
3. En la tabla "Autorizaciones" active la autorizaci√≥n "Administraci√≥n de usuarios".

Resultado
Los miembros del grupo de usuarios "Operadores" s√≥lo pueden gestionar los usuarios cuyo
n√∫mero de grupo sea inferior o igual a 6.

Consulte tambi√©n
Crear una autorizaci√≥n (P√°gina 1372)

8.2.1.10

Iniciar una sesi√≥n de usuario din√°mica

Introducci√≥n
Para hacer posible un "Inicio de sesi√≥n din√°mico", se requieren dos pasos de configuraci√≥n:
1. As√≠gnele a una variable configurada un panel de operador.
2. As√≠gnele a un usuario un valor de variable determinado.
Nota
Si SIMATIC Logon est√° activado, no es posible un inicio de sesi√≥n din√°mico.

Requisitos
‚óè Tiene que existir una administraci√≥n de usuarios.
‚óè Se deber√° haber creado una variable "Login" del tipo "Byte".

Procedimiento
Asignaci√≥n panel de operador - variable
1. Haga doble clic en "Configuraci√≥n de runtime > Administraci√≥n de usuarios" de la ventana
del proyecto.
2. En el √°rea "Inicio de sesi√≥n din√°mico", haga doble clic en la tabla en "Agregar".
3. En la columna "Panel de operador", haga clic en el bot√≥n
para seleccionar el panel de operador.

1380

. Se abre un cuadro de di√°logo

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios
4. Seleccione un panel de operador.
5. En la columna "Variable", haga clic en el bot√≥n
seleccionar la variable.

. Se abre un cuadro de di√°logo para

6. Seleccione la variable "Login".
Asignaci√≥n usuario - valor de variable
1. Abra el √°rea de trabajo "Usuarios".
2. Mueva el puntero del rat√≥n hacia el encabezado de la tabla "Usuarios".
3. Abra el men√∫ contextual con el bot√≥n derecho del rat√≥n y active la vista de las columnas
"Inicio de sesi√≥n din√°mico" e "Identificaci√≥n de usuario".
4. Haga doble clic en "Agregar" en la tabla "Usuarios".
5. Introduzca el nombre de usuario "Meier".
6. En la columna "Contrase√±a", haga clic en el bot√≥n
introducir la contrase√±a.

. Se abre un cuadro de di√°logo para

7. Introduzca la contrase√±a del usuario.
8. Vuelva a introducir la contrase√±a en el campo de confirmaci√≥n situado debajo.
9. Cierre el cuadro de di√°logo con el s√≠mbolo

.

10.Active la columna "Inicio de sesi√≥n din√°mico".

Resultado
Si la variable acepta el valor 1, el usuario "Meier" podr√° iniciar sesi√≥n.
Nota
La variable utilizada debe ser del tipo "binario" o tener un valor de 8, 16 √≥ 32 bits.

8.2.2

Administrar usuarios en el servidor

8.2.2.1

Administraci√≥n de usuarios central con SIMATIC Logon

Introducci√≥n
Para administrar de manera centralizada los usuarios y los grupos de usuarios para diferentes
aplicaciones o paneles de operador, active SIMATIC Logon.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1381

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios

Principio
SIMATIC Logon es una herramienta para administrar los usuarios en toda la instalaci√≥n. En
caso de utilizar SIMATIC Logon los usuarios se administran de manera centralizada fuera de
la aplicaci√≥n o del panel de operador.
Los grupos de usuarios y sus respectivas autorizaciones se configuran como de costumbre
desde la administraci√≥n de usuarios local en WinCC. A los grupos de usuarios se les debe
asignar un nombre que sea id√©ntico en el servidor y en WinCC. Dado que los nombres son
id√©nticos, en runtime se le asigna una autorizaci√≥n al grupo de usuarios.
Por el contrario, no es necesario crear los usuarios en WinCC, puesto que el servidor los
adopta din√°micamente durante el inicio de sesi√≥n. La aplicaci√≥n o el panel de operador
transfiere todo inicio de sesi√≥n o cambio de contrase√±a a SIMATIC Logon, donde se procesan.
Nota
Para SIMATIC Logon se requiere una licencia. Para m√°s informaci√≥n acerca de SIMATIC
Logon, visite el sitio web <http://support.automation.siemens.com>.
En el campo de b√∫squeda, introduzca el ID "34519648" e inicie la b√∫squeda. El manual
"SIMATIC Logon - Electronic Signature" se puede descargar de Internet.

1382

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios

Inicio de sesi√≥n v√≠a SIMATIC Logon Service
La figura siguiente muestra el proceso que se ejecuta autom√°ticamente cuando un usuario
inicia la sesi√≥n en runtime.
La aplicaci√≥n abre el cuadro de di√°logo de inicio de sesi√≥n.
1.¬∫ Consulta: Login y contrase√±a
Cuadro de
di√°logo
de inicio de
sesi√≥n

El usuario introduce los datos de inicio de sesi√≥n en el cuadro de di√°logo.

<Login>
<Contrase√±a>
2.¬∫ Transferencia: Datos de inicio de sesi√≥n
Comprobar los datos de inicio de sesi√≥n
3.¬∫ Consulta: ¬øEl usuario es conocido en Windows?

Aplicaciones
que utilizan
funciones de
SIMATIC Logon

Comprobaci√≥n de los datos de inicio de sesi√≥n
en el equipo local o en el dominio
4.¬∫ Autenticaci√≥n del usuario
SIMATIC
Logon
Service

Determinar los datos del usuario:
5.¬∫ Consulta: ¬øQu√© datos del usuario
se conocen?

Sistema
operativo
Administraci√≥n
de usuarios y
grupos

Transferencia de los datos de usuario:
6.¬∫ Transferencia:

Nombre de usuario completo,
pertenencias a grupos,
antig√ºedad de la contrase√±a

Comprobar y transferir los datos del usuario:
7.¬∫ Transferencia:

nombre de usuario completo
Pertenencias a grupos

8. Determinar los roles
9. Ajustar los derechos conforme al rol
Resultado: El usuario puede ejecutar las funciones del rol.

Consulte tambi√©n
Configuraci√≥n de la administraci√≥n de usuarios (P√°gina 1366)
Autenticaci√≥n y tratamiento de certificados en SIMATIC Logon (P√°gina 1384)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1383

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios

8.2.2.2

Autenticaci√≥n y tratamiento de certificados en SIMATIC Logon

Introducci√≥n
SIMATIC Logon (a partir de V1.5 SP3) soporta conexiones de comunicaci√≥n encriptadas
seguras con las siguientes familias de equipos a partir de la versi√≥n V13 SP1:
‚óè Comfort Panels
‚óè KTP Mobile Panels
‚óè Runtime Advanced
Nota
Los paneles de operador con versi√≥n V13 o anterior solo pueden establecer una conexi√≥n no
encriptada no segura con un servidor de SIMATIC Logon.

Principios b√°sicos
Al establecerse la conexi√≥n por primera vez, el certificado de SIMATIC Logon se sincroniza
con el certificado local del panel de operador. El certificado sincronizado se guarda en
"SimaticLogon\rejected". Si el certificado del servidor de SIMATIC Logon es de confianza,
c√≥pielo en la memoria local de certificados.
La memoria de certificados se encuentra en la siguiente ruta:
‚óè En el PC, normalmente se trata de "C:\Archivos de programa\Siemens\CoRtHmiRtm
\SimaticLogon\certs"
‚óè En paneles HMI, en "\flash\simatic\SimaticLogon\certs"
Si la sincronizaci√≥n concluye con √©xito, ya se puede establecer una conexi√≥n encriptada
segura.
Encontrar√° informaci√≥n adicional sobre navegadores probados en las p√°ginas web de
Customer Support con la ID de art√≠culo = 109480490:
‚óè https://support.industry.siemens.com/cs/document/109480490/ (https://
support.industry.siemens.com/cs/ww/es/view/109480490)

Consulte tambi√©n
Administraci√≥n de usuarios central con SIMATIC Logon (P√°gina 1381)

8.2.2.3

Realizar ajustes en el servidor

Introducci√≥n
Para garantizar la operaci√≥n id√≥nea de SIMATIC Logon es necesario realizar los pasos
siguientes en el servidor.

1384

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios

Procedimiento
1. Instale SIMATIC Logon Services.
2. Cree los grupos de usuarios en la administraci√≥n de usuarios del sistema operativo.
3. Cree los usuarios en la administraci√≥n de usuarios del sistema operativo.
Nota
Los usuarios de SIMATIC Logon deben ser miembros directos de un grupo de usuarios del
sistema operativo. Los miembros de un subgrupo no pueden darse de alta.
4. Asigne el nuevo usuario a un grupo.
5. Transfiera las licencias de cada panel de operador al servidor.
Nota
El procedimiento detallado se describe en la documentaci√≥n de SIMATIC Logon adjunta.
Nota
Si se realiza una autorizaci√≥n con SIMATIC Logon, se aplican las reglas para contrase√±as
registradas en el servidor.
Nota
El tiempo de cierre de sesi√≥n del usuario SIMATIC Logon puede configurarse en "Configurar
SIMATIC Logon" en el servidor.
El tiempo autom√°tico de cierre de sesi√≥n se configura para todos los usuarios
independientemente de los Panels.

8.2.2.4

Inicio de sesi√≥n v√≠a SIMATIC Logon

Requisitos
‚óè Tiene que existir una administraci√≥n de usuarios.
‚óè Los grupos creados en WinCC concuerdan con los grupos de Windows del servidor.
‚óè Debe existir un servidor en el que est√© instalado SIMATIC Logon Service.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1385

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios

Nota
Un usuario s√≥lo puede pertenecer a un grupo de usuarios en WinCC. Si un usuario pertenece
a varios grupos en el servidor, s√≥lo uno de √©stos puede ser conocido en WinCC.
Los "Administradores" y "Usuarios" son grupos de usuarios predefinidos tanto en Windows
como en WinCC. Cuando se crea un nuevo usuario en Windows, √©ste pertenece
autom√°ticamente al grupo "Usuarios". Si agrega el usuario a un nuevo grupo (p. ej. "Usuarios
SL"), el usuario pertenecer√° a dos grupos.
Para que el usuario pueda iniciar la sesi√≥n v√≠a SIMATIC Logon, qu√≠telo del grupo "Usuarios"
del sistema operativo.
Un inicio de sesi√≥n correcto en el servidor se confirma siempre en runtime con un aviso de
sistema.

Nota
Si se utiliza SIMATIC Logon para administrar los accesos a un panel o un equipo con WinCC
Runtime Advanced, hay que tener en cuenta que no pueden emplearse los caracteres '/' y '\'
en los nombres de usuarios y grupos de usuarios de Windows.

Procedimiento
1. Abra el editor "Configuraci√≥n de runtime > Administraci√≥n de usuarios" en la ventana del
proyecto.
2. Active "Activar SIMATIC Logon".
3. Dependiendo de d√≥nde administre sus usuarios, seleccione "Dominio de Windows" o
"Equipo Windows".
4. En el campo de texto "Nombre de servidor", introduzca el nombre o la direcci√≥n IP del
servidor de SIMATIC Logon.
Nota
Al utilizar direcciones IP, vigile que el servidor de SIMATIC Logon tenga siempre la misma
direcci√≥n IP.
5. En el campo "N√∫mero de puerto", introduzca el n√∫mero de puerto de la comunicaci√≥n TCP/
IP. El rango de valores admisible est√° comprendido entre 1024 y 49151. El n√∫mero de
puerto predeterminado es "16389", siendo utilizado de forma est√°ndar por el servidor de
SIMATIC Logon.

1386

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios
6. En el campo de texto "Dominio de Windows", introduzca el dominio de Windows o el
servidor de inicio de sesi√≥n con los datos de usuario.
Al acceder a usuarios del servidor de inicio de sesi√≥n, introduzca el nombre del servidor.
Si el servidor de inicio de sesi√≥n est√° en un dominio y Ud. desea acceder a los usuarios del
dominio, introduzca el nombre de √©ste √∫ltimo.
Nota
Si el servidor de inicio de sesi√≥n est√° en un dominio, no se aceptar√°n los usuarios de
Windows locales.
7. Active la casilla de verificaci√≥n "Transferencia encriptada" si desea que los datos se
transfieran de forma encriptada al servidor.

Usuarios de emergencia
Si no se puede acceder al servidor, todos los usuarios locales que hayan sido creados en la
administraci√≥n de usuarios de WinCC tambi√©n se pueden utilizar como usuarios de
emergencia.
Los usuarios de emergencia tienen los derechos del grupo de usuarios al que est√°n asignados.
Nota
Encontrar√° m√°s informaci√≥n al respecto en la documentaci√≥n de SIMATIC Logon adjunta.
Se encuentra en: [directorio de instalaci√≥n de SIMATIC Logon] \manuals

8.2.2.5

Inicio de sesi√≥n v√≠a SIMATIC Logon

Requisitos
‚óè Tiene que existir una administraci√≥n de usuarios.
‚óè Los grupos creados en WinCC concuerdan con los grupos de Windows del servidor.
‚óè Debe existir un servidor en el que est√© instalado SIMATIC Logon Service.
Nota
Si un usuario pertenece a varios grupos, al usuario se le asigna la suma de las autorizaciones
del grupo. La sesi√≥n se puede iniciar.

Procedimiento
1. Haga doble clic en "Configuraci√≥n de runtime" de la ventana del proyecto.
2. Haga doble clic en "Administraci√≥n de usuarios" en el √°rea de trabajo.
3. Active "SIMATIC Logon".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1387

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios

8.2.3

Administrar usuarios para cliente web

8.2.3.1

Administrar grupo de usuarios para cliente web

Introducci√≥n
Para cada grupo de usuarios que debe administrarse para los clientes web hay que configurar
lo siguiente:
‚óè Una imagen inicial cualquiera activada para el acceso web
‚óè Un idioma cualquiera
‚óè N√∫mero de licencias reservadas (para WebUX)
De esta manera se le otorga a los usuarios acceso inmediato a las diferentes √°reas de un
proyecto o bien no se les otorga acceso alguno.
Nota
El nombre del grupo de usuarios debe ser un√≠voco dentro del proyecto. En caso contrario, la
entrada no se aceptar√°.

Requisitos
‚óè La imagen "Inicio" est√° creada y el acceso web est√° activado.
‚óè El idioma de proyecto deseado est√° activado.
‚óè Se ha creado el grupo de usuarios "Operadores web".

Procedimiento
1. En la ventana del proyecto, haga doble clic en el editor "Configuraci√≥n de Runtime".
2. Haga clic en "Administraci√≥n de usuarios".
3. En la ficha "Grupos de usuarios", seleccione el grupo de usuarios "Operadores web".
4. Haga clic en "Propiedades > Propiedades > Opciones web" en la ventana de inspecci√≥n.
5. En "Ajustes WebNavigator", dentro de la lista de selecci√≥n "Imagen inicial", haga clic en el
bot√≥n .
Se abre un cuadro de di√°logo para seleccionar la imagen inicial.
6. Seleccione la imagen "Inicio" para Runtime.
7. Cierre el cuadro de di√°logo con el icono

.

8. Para ajustar la imagen inicial para WebUX, repita los pasos 5 a 7.
9. Para configurar un idioma para el grupo de usuarios, haga clic en "Opciones", en la lista de
selecci√≥n "Idioma de la web", en el bot√≥n
Se abre un cuadro de di√°logo para seleccionar el idioma.
10.Seleccione el idioma deseado como idioma runtime del grupos de usuarios.

1388

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios
Tambi√©n puede realizar este ajuste mediante el men√∫ contextual, activando las columnas
"Imagen inicial de WebNavigator", "Imagen inicial de WebUX" e "Idioma de la web" y aplicando
la configuraci√≥n correspondiente.
Nota
El nombre del grupo de usuarios depende del idioma. Configure el nombre en varios idiomas
y cambie de idioma en runtime.

8.2.3.2

Administrar usuarios para cliente web

Introducci√≥n
Para cada usuario que deba iniciar sesi√≥n en el cliente web (WebNavigator o WebUX) hay que
configurar lo siguiente:
‚óè Una imagen inicial cualquiera activada para el acceso web
‚óè Un idioma cualquiera
‚óè N√∫mero de licencias reservadas (para WebUX)
De esta manera se le otorga a los usuarios acceso inmediato a las diferentes √°reas de un
proyecto o bien no se les otorga acceso alguno.
Nota
Los usuarios nuevos que deban acceder al sistema mediante un cliente web o un cliente
WebUX solo pueden crearse en el sistema de ingenier√≠a.
Si se crea un usuario en runtime con el visor de usuarios, no se podr√° asignar una imagen
inicial de la web a este usuario. Por lo tanto, este usuario no estar√° habilitado para accesos a
la web.
En runtime tampoco se conceden derechos de acceso a la web a usuarios existentes.

Requisitos
‚óè La imagen "Inicio" est√° creada y el acceso web est√° activado.
‚óè El idioma de proyecto deseado est√° activado.

Procedimiento
1. En la ventana del proyecto, haga doble clic en el editor "Configuraci√≥n de Runtime".
2. Haga clic en "Administraci√≥n de usuarios".
3. En la ficha "Usuarios", seleccione un usuario para el que desea establecer una
configuraci√≥n.
4. Haga clic en "Propiedades > Propiedades > Opciones web" en la ventana de inspecci√≥n.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1389

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios
5. En "Ajustes WebNavigator", dentro de la lista de selecci√≥n "Imagen inicial", haga clic en el
bot√≥n .
Se abre un cuadro de di√°logo para seleccionar la imagen inicial.
6. Seleccione la imagen "Inicio".
7. Cierre el cuadro de di√°logo con el icono

.

8. Para ajustar la imagen inicial para WebUX, repita los pasos 5 a 7.
9. En "N√∫mero de licencias reservado" puede ajustar el n√∫mero de licencias de WebUX
reservado para el usuario seleccionado con ayuda de los botones
Nota
Si se configuran m√°s licencias reservadas de las que est√°n disponibles en el servidor de
WebUX, solo se tendr√°n en cuenta los primeros usuarios que aparezcan en la
administraci√≥n de usuarios.
Nota
Si est√° activada la opci√≥n "Utilizar licencias de WebNavigator para WebUX", no podr√°n
garantizarse licencias WebUX reservadas.
10.Para configurar un idioma para el usuario, haga clic en "Opciones", en la lista de selecci√≥n
"Idioma de la web", en el bot√≥n
Se abre un cuadro de di√°logo para seleccionar el idioma.
11.Seleccione el idioma deseado como idioma runtime del usuario web.
Tambi√©n puede realizar este ajuste mediante el men√∫ contextual, activando las columnas
"Imagen inicial de WebNavigator", "Imagen inicial de WebUX", "Idioma de la web" y "Licencias
reservadas para WebUX" y aplicando la configuraci√≥n correspondiente.
Nota
Aunque el usuario cambie de grupo, la configuraci√≥n de idioma se mantendr√°. La imagen
inicial, por el contrario, se sobrescribe.
Nota
De forma predeterminada se utilizan las licencias de WebNavigator para WebUX. Si desea
utilizar por separado estas licencias, desactive en "Configuraci√≥n de runtime > Acceso web" la
casilla de verificaci√≥n "Utilizar licencias de WebNavigator para WebUX".
Nota
Los usuarios tambi√©n pueden cerrar la sesi√≥n del cliente WebNavigator manualmente con la
funci√≥n ODK "PWRTLogout()". Encontrar√° una descripci√≥n de la funci√≥n en la documentaci√≥n
API de runtime en "Funciones de la administraci√≥n de usuarios > Funciones para iniciar/cerrar
sesi√≥n".

1390

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios

8.2.4

Administrar usuarios en runtime

8.2.4.1

Usuarios en runtime

Principio
Se crean usuarios y grupos de usuarios y se les asignan autorizaciones. Los objetos se
configuran con autorizaciones. Despu√©s de la cargar en el panel de operador, todos los objetos
de runtime que han sido configurados con una autorizaci√≥n est√°n protegidos contra accesos
no autorizados.

Visor de usuarios
Cuando se configura un visor de usuarios en el sistema de ingenier√≠a, es posible administrar
usuarios en el visor de usuarios tras la carga en el panel de operador.
ATENCI√ìN
Las modificaciones en el visor de usuarios de runtime son efectivas inmediatamente. Las
modificaciones en runtime no se actualizan en el sistema de ingenier√≠a. Al cargar la
administraci√≥n de usuarios en el panel de operador, se sobrescriben todas las modificaciones
del visor de usuarios previa consulta y en funci√≥n de las opciones de carga seleccionadas.
Los usuarios que tienen la autorizaci√≥n "Administraci√≥n de usuarios" pueden acceder sin
limitaciones al visor de usuarios. Desde all√≠ se administran todos los usuarios. Los dem√°s
usuarios s√≥lo tienen un acceso restringido al visor de usuarios, donde pueden administrarse a
s√≠ mismos.

Consulte tambi√©n
Visor de usuarios (P√°gina 1391)
Administrar usuarios con el visor de usuarios complejo (P√°gina 1395)
Iniciar una sesi√≥n de usuario (P√°gina 1399)

8.2.4.2

Visor de usuarios

Finalidad
Un visor de usuarios se configura en el sistema de ingenier√≠a para administrar los usuarios
tambi√©n en runtime.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1391

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios

Estructura
El visor de usuarios muestra lo siguiente en cada fila:
‚óè El usuario
‚óè Su contrase√±a codificada
‚óè El grupo de usuarios correspondiente
‚óè El tiempo de cierre de sesi√≥n
Si no hay ning√∫n usuario conectado, el visor de usuarios est√° vac√≠o. Tras iniciar la sesi√≥n se
visualizar√°n los contenidos de sendos campos.

Visor de usuarios de un administrador

Cuando un administrador est√° conectado, el visor de usuarios muestra todos los usuarios. El
administrador modifica el nombre del usuario y la contrase√±a. El administrador crea usuarios
nuevos y los asigna a un grupo de usuarios existentes.

Visor de usuarios de un usuario

Si no hay ning√∫n administrador conectado, el visor de usuarios s√≥lo muestra el usuario
conectado. El usuario puede modificar su contrase√±a y su tiempo de cierre de sesi√≥n.

Consulte tambi√©n
Usuarios en runtime (P√°gina 1391)
Iniciar una sesi√≥n de usuario (P√°gina 1399)

1392

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios

8.2.4.3

Configurar el visor de usuarios

Introducci√≥n
Un visor de usuarios se configura en el sistema de ingenier√≠a para administrar los usuarios
tambi√©n en runtime.

Requisitos
Se ha creado una imagen.

Procedimiento
1. En la ventana de herramientas, seleccione el objeto "Visor de usuarios" de la categor√≠a
"Controles".
2. Arrastre el objeto "Visor de usuarios" hasta la imagen con la funci√≥n Drag&Drop.
3. En la ventana de inspecci√≥n haga clic en "Propiedades > Propiedades".
4. Defina el aspecto del "Visor de usuarios".
5. Seleccione, por ejemplo, "Representaci√≥n > Adaptaci√≥n del tama√±o > Adaptar objeto al
contenido".

Resultado
Se ha creado un visor de usuarios en la imagen.

Consulte tambi√©n
Iniciar una sesi√≥n de usuario (P√°gina 1399)

8.2.4.4

Crear un usuario

Introducci√≥n
Un usuario se crea para que las personas puedan iniciar una sesi√≥n en runtime con su nombre
de usuario.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1393

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios
Alternativamente pueden crearse usuarios en el sistema de ingenier√≠a y cargarlos en el panel
de operador.
Nota
V√°lido solo para Runtime Professional:
Los usuarios nuevos que deban acceder al sistema mediante un cliente web o un cliente
WebUX solo pueden crearse en el sistema de ingenier√≠a.
Si se crea un usuario en runtime con el visor de usuarios, no se podro√° asignar una imagen
inicial de la web a este usuario. Por lo tanto, este usuario no estar√° habilitado para accesos a
la web.
En runtime tampoco se conceden derechos de acceso a la web a usuarios existentes.
La sesi√≥n s√≥lo se inicia correctamente si el nombre de usuario entrado coincide con un usuario
de runtime. Asimismo, la contrase√±a introducida al iniciar sesi√≥n debe coincidir con la del
usuario.
Nota
Observe el uso de may√∫sculas y min√∫sculas.

Nota
Cuando introduzca un nombre de usuario y una contrase√±a, no utilice caracteres especiales
como / " ¬ß $ % ? ' &.
El usuario se asigna a un grupo de usuarios. A continuaci√≥n, el usuario tendr√° las
autorizaciones del grupo de usuarios.
Nota
En runtime debe asignarse un usuario a un grupo de usuarios. El grupo de usuarios se crea en
el sistema de ingenier√≠a. La denominaci√≥n del grupo de usuarios depende del idioma.

Requisitos
‚óè El visor de usuarios est√° abierto.
‚óè Un grupo de usuarios "Group 2" est√° creado.

Procedimiento
1. En el visor de usuarios, haga clic en <Nuevo usuario>. Se abre un cuadro de di√°logo.
2. Introduzca el nombre de usuario "Maestro".
3. Pulse la tecla <Intro>.

1394

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios
4. Haga clic en "Contrase√±a".
5. Introduzca la contrase√±a del usuario.
6. Pulse la tecla <Intro>. La contrase√±a no es visible.
7. Haga clic en la columna "Grupo".
8. Seleccione el grupo "Group 2".

9. Pulse la tecla <Intro>.
10.Haga clic en la columna "Tiempo de cierre de sesi√≥n".
11.Introduzca el tiempo tras el cual se cerrar√° autom√°ticamente la sesi√≥n del usuario.

Consulte tambi√©n
Iniciar una sesi√≥n de usuario (P√°gina 1399)

8.2.4.5

Administrar usuarios con el visor de usuarios complejo

Introducci√≥n
En caso de haber configurado un visor de usuarios en el sistema de ingenier√≠a, es posible
administrar los usuarios y los grupos de usuarios en runtime.
Nota
Las modificaciones en el visor de usuarios de runtime son efectivas inmediatamente. Las
modificaciones en runtime no se actualizan en el sistema de ingenier√≠a. Al cargar la
administraci√≥n de usuarios en el panel de operador, se sobrescriben todas las modificaciones
del visor de usuarios previa consulta y en funci√≥n de las opciones seleccionadas.

Requisitos
‚óè Runtime activado.
‚óè Se ha creado un visor de usuarios complejo.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1395

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios
‚óè Est√° abierta la imagen con el visor de usuarios.
‚óè Tiene el permiso predeterminado "Administraci√≥n de usuarios".
Nota
Si no tiene el permiso "Administraci√≥n de usuarios", s√≥lo podr√° modificar su propia
contrase√±a y su tiempo de cierre de sesi√≥n.

Cambiar nombre de usuario
1. Introduzca un nuevo nombre de usuario en la columna "Usuarios" del visor de usuarios.
2. Confirme con la tecla <Intro>.
Nota
El usuario no podr√° volver a iniciar sesi√≥n en runtime con su antiguo nombre. Si borra el
nombre y pulsa la tecla <Intro> se borrar√° el usuario.

Modificar la contrase√±a del usuario
La disponibilidad del visor de usuarios complejo depende del dispositivo.
1. Introduzca una nueva contrase√±a en la columna "Contrase√±a" del visor de usuarios.
2. Confirme con la tecla <Intro>.
Nota
El usuario ya no podr√° iniciar sesi√≥n en runtime con su antigua contrase√±a.
Si borra la contrase√±a con <Intro> en el visor de usuarios complejo, se borrar√° el usuario.

Modificar el tiempo de cierre de sesi√≥n del usuario
1. Introduzca un nuevo tiempo de cierre de sesi√≥n en la columna "Tiempo de cierre de sesi√≥n"
del visor de usuarios.
2. Confirme con la tecla <Intro>.

Borrar un usuario
1. Haga clic en el nombre del usuario que debe borrarse.
2. Borre el nombre.
3. Pulse la tecla <Intro>.
Nota
El usuario no podr√° volver a iniciar una sesi√≥n en runtime.

1396

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios

Asignar un usuario a otro grupo de usuarios
1. Activar el campo Grupo de usuarios para el usuario correspondiente.
2. Seleccione un grupo de usuarios.
3. Confirme la selecci√≥n con la tecla <Intro>.

Consulte tambi√©n
Usuarios en runtime (P√°gina 1391)
Iniciar una sesi√≥n de usuario (P√°gina 1399)

8.2.4.6

Desbloquear usuarios bloqueados

Desbloquear usuarios bloqueados
En los "Ajustes de runtime > Administraci√≥n de usuarios" est√° activada la casilla de verificaci√≥n
"Activar l√≠mite de intentos de inicio de sesi√≥n"
En el campo "Intentos de inicio de sesi√≥n no v√°lidos" aparece el n√∫mero 3.
Si un usuario hace tres intentos fallidos de iniciar una sesi√≥n (p. ej., al introducir una contrase√±a
err√≥nea), ser√° asignado al grupo "No autorizado". En este caso, el usuario perder√° todas las
autorizaciones. Aunque todav√≠a puede iniciar la sesi√≥n, ya no tendr√° ninguna autorizaci√≥n.
S√≥lo un usuario con derechos de administrador puede vuelve a asignar el usuario no
autorizado a un grupo.

Consulte tambi√©n
Iniciar una sesi√≥n de usuario (P√°gina 1399)

8.2.4.7

Iniciar una sesi√≥n de usuario

Introducci√≥n
Normalmente, una sesi√≥n de usuario se inicia con un bot√≥n especial. Entonces aparece el
cuadro de di√°logo de inicio de sesi√≥n.
El cuadro de di√°logo de inicio de sesi√≥n aparece por defecto al acceder a un objeto protegido
si:
‚óè No se ha iniciado ninguna sesi√≥n de usuario en runtime
‚óè El usuario que ha iniciado la sesi√≥n no posee la autorizaci√≥n necesaria.
Nota
En los Basic Panels aparece siempre el cuadro de di√°logo de inicio de sesi√≥n cuando se
maneja una tecla con protecci√≥n de acceso.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1397

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios

Requisitos
‚óè En "Ajustes de runtime > Administraci√≥n de usuario"
‚Äì est√° activada la casilla de verificaci√≥n "Activar l√≠mite de intentos de inicio de sesi√≥n".
‚Äì aparece el n√∫mero 3 en el campo "Intentos de inicio de sesi√≥n no v√°lidos".
‚óè La funci√≥n de sistema "MostrarDi√°logoIniciarSesion" est√° configurada en un bot√≥n con el
t√≠tulo "Inicio de sesi√≥n".

Procedimiento
1. Haga clic en el bot√≥n "Logon". Aparecer√° el cuadro de di√°logo de inicio de sesi√≥n.

2. Introduzca su nombre de usuario, que debe ser id√©ntico al asignado en la administraci√≥n de
usuarios, p. ej. "Maestro".
Si antes de usted se ha conectado otro usuario, se visualizar√° su nombre.
3. Introduzca la contrase√±a correspondiente. La entrada se mantiene oculta.
Nota
Al introducir la contrase√±a, tenga en cuenta las may√∫sculas y min√∫sculas.
4. Cierre el cuadro de di√°logo con el bot√≥n "Aceptar".
Nota
Cuando se cambia de panel de operador, no es necesario volver a introducir la contrase√±a si
esta contiene los caracteres especiales permitidos en todos los paneles de operador.
Caracteres especiales permitidos en la contrase√±a:
()‚Ç¨&@$%+#^[]|*-"<>!,.;:/_=\'? `~{}$
Si se cambia a la versi√≥n V14 desde una versi√≥n de panel anterior y se han utilizado caracteres
especiales no permitidos para la contrase√±a, esta se borrar√°. Se le informar√° de ello con un
mensaje de error y deber√° guardar una nueva contrase√±a.

1398

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios

Inicio de sesi√≥n correcto
Si ha introducido el nombre de usuario "Maestro" y la contrase√±a introducida coincide con la
guardada, se iniciar√° una sesi√≥n del usuario "Maestro" en runtime. Tiene la autorizaci√≥n del
usuario "Maestro".
El acceso a un objeto protegido, p. ej. el bot√≥n "Archivar", s√≥lo se permitir√° si el usuario
"Maestro" dispone de la autorizaci√≥n necesaria. La acci√≥n configurada se ejecutar√°
inmediatamente.
Si la pr√≥xima conexi√≥n es correcta pero no dispone de la autorizaci√≥n necesaria, aparecer√° un
aviso de error al respecto. De todas formas, seguir√° conectado en runtime.

Inicio de sesi√≥n incorrecto
Aparecer√° un aviso de error.
Por motivos de seguridad, usted o el usuario conectado previamente ya no tendr√° ninguna
autorizaci√≥n. De todas formas, podr√° acceder a objetos no protegidos, aunque el visor de
usuarios no mostrar√° ninguna entrada. El visor de usuarios y las autorizaciones cambian en el
pr√≥ximo inicio de sesi√≥n correcto.
Si el tercer intento de inicio de sesi√≥n no ha dado resultado, el usuario se asigna al grupo
predefinido "No autorizado". Por tanto, no configure ning√∫n grupo de usuarios con ese
nombre.
El usuario ser√° desconectado cuando se llame la funci√≥n "Cerrar sesi√≥n" o cuando haya
transcurrido el tiempo de cierre de sesi√≥n del usuario.

Consulte tambi√©n
Iniciar una sesi√≥n de usuario (P√°gina 1399)

8.2.4.8

Iniciar una sesi√≥n de usuario

Introducci√≥n
Normalmente, una sesi√≥n de usuario se inicia con un bot√≥n especial. Entonces aparece el
cuadro de di√°logo de inicio de sesi√≥n.
El cuadro de di√°logo de inicio de sesi√≥n aparece por defecto al acceder a un objeto protegido
si:
‚óè No se ha iniciado ninguna sesi√≥n de usuario en runtime
‚óè El usuario que ha iniciado la sesi√≥n no posee la autorizaci√≥n necesaria.

Requisitos
‚óè La funci√≥n de sistema "MostrarDialogoIniciarSesion" est√° configurada en un bot√≥n con el
t√≠tulo "Inicio de sesi√≥n".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1399

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios

Procedimiento
1. Haga clic en el bot√≥n "Logon". Aparecer√° el cuadro de di√°logo de inicio de sesi√≥n.

2. Introduzca su nombre de usuario, que debe ser id√©ntico al asignado en la administraci√≥n de
usuarios, p. ej. "Maestro".
Si antes de usted se ha conectado otro usuario, se visualizar√° su nombre.
3. Introduzca la contrase√±a correspondiente. La entrada se mantiene oculta.
4. Cierre el cuadro de di√°logo con el bot√≥n "Aceptar".

Inicio de sesi√≥n correcto
Si ha introducido el nombre de usuario "Maestro" y la contrase√±a introducida coincide con la
guardada, se iniciar√° una sesi√≥n del usuario "Maestro" en runtime. Tiene la autorizaci√≥n del
usuario "Maestro".
El acceso a un objeto protegido, p. ej. el bot√≥n "Archivar", s√≥lo se permitir√° si el usuario
"Maestro" dispone de la autorizaci√≥n necesaria. La acci√≥n configurada se ejecutar√°
inmediatamente.
Si la pr√≥xima conexi√≥n es correcta pero no dispone de la autorizaci√≥n necesaria, aparecer√° un
aviso de error al respecto. De todas formas, seguir√° conectado en runtime.

Inicio de sesi√≥n incorrecto
Aparecer√° un aviso de error.
Por motivos de seguridad, usted o el usuario conectado previamente ya no tendr√° ninguna
autorizaci√≥n. De todas formas, podr√° acceder a objetos no protegidos, aunque el visor de
usuarios no mostrar√° ninguna entrada. El visor de usuarios y las autorizaciones cambian en el
pr√≥ximo inicio de sesi√≥n correcto.
El usuario ser√° desconectado cuando se llame la funci√≥n "Cerrar sesi√≥n" o cuando haya
transcurrido el tiempo de cierre de sesi√≥n del usuario.

Consulte tambi√©n
Usuarios en runtime (P√°gina 1391)
Visor de usuarios (P√°gina 1391)

1400

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios
Configurar el visor de usuarios (P√°gina 1393)
Crear un usuario (P√°gina 1393)
Administrar usuarios con el visor de usuarios complejo (P√°gina 1395)
Desbloquear usuarios bloqueados (P√°gina 1397)
Iniciar una sesi√≥n de usuario (P√°gina 1397)
Exportar la administraci√≥n de usuarios (P√°gina 1401)
Importar administraci√≥n de usuarios (P√°gina 1402)

8.2.4.9

Exportar la administraci√≥n de usuarios

Introducci√≥n
Los usuarios y grupos de usuarios se transfieren del sistema de ingenier√≠a al panel de
operador. Si ha configurado un visor de usuarios, este permite administrar los usuarios en el
panel de operador.
Si un usuario accede a varios paneles de operador, este usuario debe existir en todos los
paneles de operador con el mismo nombre y la misma contrase√±a. Actualice la administraci√≥n
de usuarios de los diferentes paneles de operador. Exporte los usuarios y contrase√±as de un
panel de operador a un medio de almacenamiento, p. ej., un disquete, una tarjeta de memoria
o una unidad de red. Importe los usuarios y contrase√±as de este medio de almacenamiento en
todos los dem√°s paneles de operador.
Configure en un bot√≥n una funci√≥n que exporte los datos de los usuarios.
La funci√≥n del sistema "ExportarImportarAdministraci√≥nDeUsuarios" no est√° disponible en
todos los paneles de operador.
ATENCI√ìN
Al exportar, los datos de los usuarios del panel de operador se codificar√°n y se grabar√°n en
el archivo de destino. El archivo de destino se sobrescribir√°.

Requisitos
‚óè Se ha creado un panel de operador.
‚óè Se ha creado una imagen.
‚óè Se ha creado un bot√≥n en la imagen.
‚óè La ventana de inspecci√≥n est√° abierta.

Procedimiento
1. Haga clic en el bot√≥n de la imagen.
2. En la ventana de inspecci√≥n haga clic en "Propiedades > Eventos > Hacer clic".
3. En la lista de funciones, haga clic en la entrada "Agregar funci√≥n".
Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1401

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios
4. Seleccione la funci√≥n de sistema "ExportarImportarAdministraci√≥nDeUsuarios".
5. Seleccione la direcci√≥n "Exportaci√≥n". Al exportar, el archivo de destino se sobrescribir√°
con los datos de los usuarios.
6. En "Nombre de archivo" introduzca la ruta completa del archivo de destino, p. ej. "a:\test
\usersview.txt".
Nota
Aseg√∫rese de escribir correctamente el nombre del archivo. Si la carpeta "\test\" no existe,
se crear√° sin consulta previa.

Consulte tambi√©n
Iniciar una sesi√≥n de usuario (P√°gina 1399)

8.2.4.10

Importar administraci√≥n de usuarios

Introducci√≥n
Si un usuario accede a varios paneles de operador, este usuario debe existir en todos los
paneles de operador con el mismo nombre y la misma contrase√±a. Actualice la administraci√≥n
de usuarios de los diferentes paneles de operador. Exporte los usuarios y contrase√±as de un
panel de operador a un medio de almacenamiento, p. ej., un disquete, una tarjeta de memoria
o una unidad de red. Importe los usuarios y contrase√±as de este medio de almacenamiento en
todos los dem√°s paneles de operador.
Configure en un bot√≥n una funci√≥n que importe los datos de los usuarios.
La funci√≥n del sistema "ExportarImportarAdministraci√≥nDeUsuarios" no est√° disponible en
todos los paneles de operador.
ATENCI√ìN
Al importar, los datos de los usuarios se leer√°n del archivo de origen y se grabar√°n en el panel
de operador. Los usuarios y contrase√±as vigentes en el panel de operador se sobrescribir√°n.
Los usuarios y contrase√±as importados son v√°lidos inmediatamente.

Requisitos
‚óè Se ha creado una imagen.
‚óè Se ha creado un bot√≥n en la imagen.
‚óè La ventana de inspecci√≥n est√° abierta.

Procedimiento
1. Haga clic en el bot√≥n de la imagen.
2. En la ventana de inspecci√≥n haga clic en "Propiedades > Eventos > Hacer clic".

1402

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.2 Estructurar la administraci√≥n de usuarios
3. En la lista de funciones, haga clic en la entrada "Agregar funci√≥n".
4. Seleccione la funci√≥n de sistema "ExportarImportarAdministraci√≥nDeUsuarios".
5. Seleccione la direcci√≥n "Importaci√≥n". Al importar se sobrescribir√°n los datos de los
usuarios en el panel de operador.
6. En "Nombre de archivo" introduzca la ruta completa del archivo de origen, p. ej. "a:\test
\usersview.txt".
Nota
Aseg√∫rese de escribir correctamente el nombre del archivo. Si la carpeta "\test\" o el archivo
no existe, aparecer√° un aviso de error.

Consulte tambi√©n
Iniciar una sesi√≥n de usuario (P√°gina 1399)

8.2.5

Configurar una protecci√≥n de acceso

8.2.5.1

Protecci√≥n de acceso

Introducci√≥n
Para proteger el acceso a un objeto, configure una autorizaci√≥n para ese objeto. Todos los
usuarios conectados que posean esta autorizaci√≥n, podr√°n acceder al objeto. Cuando un
usuario no tiene permiso de manejo de un objeto, autom√°ticamente aparece el cuadro de
di√°logo de inicio de sesi√≥n.
Nota
Para procesar usuarios, contrase√±as y grupos de usuarios, p. ej., en el controlador, existen
varias funciones de sistema en la "Administraci√≥n de usuarios".

8.2.5.2

Configurar una autorizaci√≥n de uso

Introducci√≥n
La autorizaci√≥n "Salir de runtime" se configura en un bot√≥n. De esta manera s√≥lo podr√°n tener
acceso los usuarios que tengan esa autorizaci√≥n, p. ej. todos los usuarios del grupo
"Operadores".
De este modo, el acceso al bot√≥n queda protegido. Si un usuario conectado, perteneciente al
grupo "Operadores" y con la autorizaci√≥n necesaria, hace clic en el bot√≥n, se saldr√° del
runtime.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1403

Configurar una administraci√≥n de usuarios
8.3 Referencia
En un ejemplo se describe detalladamente c√≥mo configurar un bot√≥n con protecci√≥n de
acceso.

Requisitos
‚óè El grupo de usuarios "Operadores" est√° creado.
‚óè Se ha creado la autorizaci√≥n "Salir de runtime".
‚óè Se ha creado y abierto una imagen.
‚óè La imagen contiene un bot√≥n.

Procedimiento
1. Haga clic en el bot√≥n de la imagen.
2. En la ventana de inspecci√≥n, haga clic en "Propiedades > Propiedades >Seguridad".
3. Seleccione como autorizaci√≥n "Salir de runtime".
4. En la ventana de inspecci√≥n seleccione "Propiedades > Eventos > Hacer clic".
5. Seleccione una funci√≥n de sistema de la lista de funciones, p. ej., "PararRuntime".
Nota
Los eventos "Activar" y "Desactivar" sirven exclusivamente para reconocer si un objeto est√°
seleccionado o deseleccionado. No obstante, los eventos no disparan ninguna petici√≥n de
contrase√±a.
Por lo tanto, no utilice los eventos "Activar" o "Desactivar" si quiere configurar una
protecci√≥n de acceso en la llamada de la funci√≥n del objeto.

8.3

Referencia

8.3.1

Objetos con protecci√≥n de acceso

Introducci√≥n
Los objetos siguientes pueden configurarse con una autorizaci√≥n:
‚óè Campo E/S
‚óè Bot√≥n
‚óè Campo E/S simb√≥lico
‚óè Campo E/S gr√°fico
‚óè Campo de fecha y hora

1404

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.3 Referencia
‚óè Interruptor
‚óè Visor de avisos
‚óè Visor de usuarios
‚óè Visor de recetas
‚óè Visor de diagn√≥stico del sistema

8.3.2

Objetos con protecci√≥n de acceso

Introducci√≥n
Los objetos siguientes pueden configurarse con una autorizaci√≥n:
‚óè Campo E/S
‚óè Bot√≥n
‚óè Campo E/S simb√≥lico
‚óè Campo E/S gr√°fico
‚óè Campo de fecha y hora
‚óè Interruptor
‚óè Librer√≠a de s√≠mbolos
‚óè Deslizador
‚óè Rango efectivo Nombre
‚óè Rango efectivo Nombre (RFID)
‚óè Visor de avisos
‚óè Ventana de avisos
‚óè Visor de usuarios
‚óè Navegador HTML
‚óè Tabla de observaci√≥n
‚óè Visor Sm@rtClient
‚óè Visor de recetas
‚óè Visor de curvas f(x)
‚óè Visor de diagn√≥stico del sistema
‚óè Ventana de diagn√≥stico del sistema
‚óè Visor de c√≥digo PLC
‚óè Vista general de GRAPH
‚óè Vista general de ProDiag

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1405

Configurar una administraci√≥n de usuarios
8.3 Referencia

8.3.3

Objetos con protecci√≥n de acceso

Introducci√≥n
Los objetos siguientes pueden configurarse con una autorizaci√≥n:
‚óè Conector
‚óè Tubo
‚óè Pieza en T doble
‚óè Pieza en T
‚óè Arco tubular
‚óè Campo E/S
‚óè Campo de texto editable
‚óè Cuadro de lista
‚óè Cuadro combinado
‚óè Bot√≥n
‚óè Bot√≥n redondo
‚óè Campo E/S simb√≥lico
‚óè Campo E/S gr√°fico
‚óè Barra
‚óè Deslizador
‚óè Barra de desplazamiento
‚óè Casilla de verificaci√≥n
‚óè Bot√≥n de opci√≥n
‚óè Indicador gauge
‚óè Reloj
‚óè Visor de usuarios
‚óè Navegador HTML
‚óè Visor de recetas
‚óè Visor de avisos
‚óè Visor de curvas f(x)
‚óè Visor de curvas f(t)
‚óè Visor de tablas
‚óè Tabla de valores
‚óè Visor de diagn√≥stico del sistema
‚óè Media Player
‚óè Visor de diagn√≥stico de canal

1406

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.3 Referencia
‚óè Visor de c√≥digo PLC
‚óè Vista general de GRAPH
‚óè Vista general de ProDiag
Para configurar los siguientes objetos con una protecci√≥n de acceso, asocie adicionalmente la
funci√≥n de sistema "MostrarDialogoIniciarSesi√≥n" a un evento, p. ej. Hacer clic.
‚óè L√≠nea
‚óè Polil√≠nea
‚óè Pol√≠gono
‚óè Elipse
‚óè Segmento el√≠ptico
‚óè Segmento circular
‚óè Arco el√≠ptico
‚óè Arco circular
‚óè C√≠rculo
‚óè Rect√°ngulo
‚óè Campo de texto
‚óè Visor de gr√°ficos
‚óè Ventana de imagen
‚óè Trabajo de impresi√≥n/diagn√≥stico de script

8.3.4

Autorizaciones y grupos de usuarios predefinidos

Principio
Las autorizaciones y los grupos de usuarios predefinidos tienen los n√∫meros siguientes:
Grupo de usuarios

N√∫mero

"Grupo de administradores"

1

"Usuarios"

2

Autorizaci√≥n

N√∫mero

"Administraci√≥n de usuarios"

1

"Supervisar"

2

"Manejar"

3

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1407

Configurar una administraci√≥n de usuarios
8.4 Ejemplos

8.3.5

Autorizaciones y grupos de usuarios predefinidos

Principio
Las autorizaciones y los grupos de usuarios predefinidos tienen los n√∫meros siguientes:
Grupo de usuarios:
‚óè "Grupo de administradores"
‚óè "Usuarios"
Autorizaci√≥n

N√∫mero

"Administraci√≥n de usuarios"

1

"Supervisar"

2

"Manejar"

3

"Activar control remoto"

1000

"Acceso web - Solo observar"

1002

La autorizaci√≥n 1000 "Activar control remoto " resulta √∫til para proyectos cliente-servidor.
La autorizaci√≥n 1002 "Acceso web - Solo observar" tiene relevancia en combinaci√≥n con el
Web Navigator.

8.4

Ejemplos

8.4.1

Ejemplo: Configurar un bot√≥n con el cuadro de di√°logo de inicio de sesi√≥n

Tarea
En el siguiente ejemplo se configura la funci√≥n "MostrarDi√°logoInicioSesi√≥n" en un bot√≥n.
Durante el cambio de turno, p. ej., inicia sesi√≥n en runtime otro usuario. Adem√°s, en ese
momento se cerrar√° la sesi√≥n del usuario anterior.
Nota
De forma predeterminada, el cuadro de di√°logo de inicio de sesi√≥n aparece en runtime cuando
se accede a un objeto protegido. Existen dos posibilidades: O no ha iniciado la sesi√≥n ning√∫n
usuario, o el usuario no tiene la autorizaci√≥n necesaria.

Requisitos
‚óè Se ha creado una imagen.
‚óè Se ha creado un bot√≥n nuevo en la imagen.

1408

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.4 Ejemplos

Procedimiento
1. Haga clic en el bot√≥n de la imagen.
2. En la ventana de inspecci√≥n haga clic en "Propiedades > Eventos > Soltar".
3. En la tabla "Lista de funciones", haga clic en la entrada "Agregar funci√≥n".
4. Seleccione la funci√≥n del sistema "MostrarDialogoIniciarSesion" en el grupo
"Administraci√≥n de usuarios".

Resultado
Cuando el usuario haga clic en este bot√≥n en runtime, se ejecutar√° la funci√≥n
"MostrarDialogoIniciarSesion". Al ejecutarse la funci√≥n "MostrarDialogoIniciarSesion"
aparecer√° el cuadro de di√°logo de inicio de sesi√≥n. El usuario inicia la sesi√≥n con su nombre
de usuario y su contrase√±a.

8.4.2

Ejemplo: Registrar el inicio y cierre de sesi√≥n

Tarea
En el siguiente ejemplo, configure la funci√≥n "IdentificarCambioDeUsuario" para que se
ejecute con el evento "Cambio de usuario".

Principio
Cuando un usuario inicia o cierra su sesi√≥n, se ejecuta la funci√≥n
"IdentificarCambioDeUsuario". Cuando se llama una funci√≥n, se emite un aviso del sistema
indicando el usuario correspondiente.
Este aviso del sistema se puede archivar. Al archivar, el aviso del sistema se marcar√° con la
fecha y hora. De este modo es posible saber qu√© usuario ha estado conectado al panel de
operador, cu√°ndo y por cu√°nto tiempo.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1409

Configurar una administraci√≥n de usuarios
8.4 Ejemplos

Requisitos
‚óè Se ha creado un panel de operador con Runtime Advanced.
‚óè La ventana de inspecci√≥n est√° abierta.

Procedimiento
1. Haga doble clic en "Planificador de tareas" de la ventana del proyecto.
2. Haga doble clic en "Agregar" en la tabla del √°rea de tareas.
3. En "Nombre", introduzca "Logon-Protocol".
4. Seleccione el disparador "Cambio de usuario".
5. En la ventana de inspecci√≥n abra "Propiedades > Eventos".
6. En la tabla "Lista de funciones", haga clic en la entrada "Agregar funci√≥n".
7. Seleccione la funci√≥n de sistema "IdentificarCambioDeUsuario".

Resultado
Cuando un usuario inicie o cierre la sesi√≥n, se emitir√° un aviso del sistema.

8.4.3

Ejemplo: Estructura de una administraci√≥n de usuarios

Tarea
En el ejemplo siguiente se crea una administraci√≥n de usuarios para diferentes usuarios y
grupos de usuarios. El ejemplo se basa en un perfil de necesidades t√≠pico de la t√©cnica de
fabricaci√≥n.

Principio
En una instalaci√≥n y en un proyecto participan grupos de personas muy diversos. Cada grupo
de personas protege sus datos y funciones de los dem√°s. Con este fin se crean usuarios y se
asignan a un grupo de usuarios.
Es posible reproducir diferentes vistas mediante grupos de usuarios.
Ejemplo:
‚óè Vista organizativa: operadores de puesta en marcha, operadores, turno I, turno II
‚óè Vista tecnol√≥gica: control de ejes, cambiadores de herramientas, instalaci√≥n norte,
instalaci√≥n sur
El ejemplo siguiente se basa en la vista organizativa.
Cada grupo de usuarios requiere una protecci√≥n de acceso caracter√≠stica: un grupo de
usuarios posee autorizaciones para determinados casos de aplicaci√≥n. As√≠, p. ej., un
programador modifica registros de recetas.

1410

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.4 Ejemplos
En el ejemplo se crean los usuarios M√ºller, Grupo Meier y Maestro y se asignan a diferentes
grupos de usuarios.
La Sra. M√ºller trabaja de programadora con el sistema de ingenier√≠a. El Grupo Meier son los
operadores de puesta en marcha. El Sr. Maestro es un operador.

Requisitos
‚óè Debe haberse creado un proyecto nuevo.
‚óè El editor "Administraci√≥n de usuarios" est√° abierto.

Resumen de los pasos a seguir
El manejo de la administraci√≥n de usuarios en el ejemplo funciona de la siguiente manera:
1. Crear autorizaciones: el ingeniero determina qu√© autorizaciones se requieren para la
protecci√≥n de acceso.
2. Configurar autorizaciones: el ingeniero determina qu√© objetos pueden manejarse y qu√©
funciones pueden ejecutarse.
3. Crear grupos de usuarios y asignar autorizaciones: el administrador crea los grupos de
usuarios junto con el ingeniero. Mediante las autorizaciones, el ingeniero determina qui√©n
puede manejar objetos y qui√©n puede modificar par√°metros.
4. Crear usuarios y asignarlos a un grupo de usuarios: el administrador administra los
usuarios.

Resultado
El objetivo es obtener la estructura siguiente de la administraci√≥n de usuarios, compuesta por
usuarios, grupos de usuarios y autorizaciones:
Usuarios
M√ºller

Meier

Maestro

Grupos de usuarios

Autorizaciones

Funciones

Modificar re‚Äê Modificar pa‚Äê
gistros de
r√°metros del
receta
sistema

Modificar pa‚Äê
r√°metros del
proceso

Grupo de administrado‚Äê
res
X
X
X

Administrar

x

Programadores

X

T√©cnicos de puesta en
marcha

X

Operadores

x

X

X

El usuario "Maestro", que pertenece al grupo "Operadores", tiene acceso al bot√≥n configurado
"Hacia el visor de recetas".
Nota
Alternativamente, puede crear como operadores varios grupos de usuarios con diferentes
autorizaciones de uso, p. ej. Operadores de nivel 1, Operadores de nivel 2.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1411

Configurar una administraci√≥n de usuarios
8.4 Ejemplos

8.4.4

Ejemplo: Crear y configurar una autorizaci√≥n

Tarea
En el ejemplo siguiente se crean las autorizaciones.

Procedimiento
1. Abra el √°rea de trabajo "Grupos de usuarios".
2. Haga doble clic en "Agregar" en la tabla "Autorizaciones".
3. Introduzca "Modificar registros de receta" en el nombre de la autorizaci√≥n.
4. Repita los pasos 2 y 3 para crear m√°s autorizaciones: "Modificar par√°metros de sistema",
"Modificar par√°metros de proceso".

Resultado

8.4.5

Ejemplo: Configurar un bot√≥n con protecci√≥n de acceso

Tarea
En el ejemplo siguiente se crea un bot√≥n para cambiar de imagen con la ayuda de una funci√≥n
de sistema. Proteja el bot√≥n "Hacia el visor de recetas" de manejos no autorizados. Para ello,
configure la autorizaci√≥n "Modificar registros de receta" en el bot√≥n "Hacia el visor de
recetas".

1412

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.4 Ejemplos

Requisitos
‚óè Se ha creado una autorizaci√≥n "Modificar registros de receta".
‚óè Se ha creado una imagen "Recetas".
‚óè Se ha creado y abierto una imagen "Inicio".
‚óè Se ha creado y seleccionado un bot√≥n en la imagen "Inicio".

Procedimiento
1. En la ventana de inspecci√≥n haga clic en "Propiedades > Propiedades > General".
2. Introduzca el texto "Hacia el visor de recetas".
3. En la ventana de inspecci√≥n haga clic en "Propiedades > Eventos > Hacer clic".
4. En la primera fila de la tabla "Lista de funciones", haga clic en la entrada "Agregar funci√≥n".
5. Seleccione la funci√≥n del sistema "ActivarImagen" en el grupo "Im√°genes".
6. Haga clic en el bot√≥n
del campo "Nombre de imagen". Se abre un cuadro de di√°logo para
seleccionar la imagen.
7. Seleccione la imagen "Recetas" y cierre el cuadro de di√°logo con el bot√≥n

.

8. En la ventana de inspecci√≥n, haga clic en "Propiedades > Propiedades > Seguridad".
9. Seleccione la autorizaci√≥n "Modificar registros de receta".

Resultado

El acceso al bot√≥n "Hacia el visor de recetas" queda protegido. Cuando el usuario "Meier" haga
clic en este bot√≥n en runtime, p. ej., se abrir√° la imagen "Visor de recetas". Siempre y cuando

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1413

Configurar una administraci√≥n de usuarios
8.4 Ejemplos
el usuario "Meier" haya iniciado una sesi√≥n correctamente y tenga la autorizaci√≥n necesaria.
La imagen "Recetas" contiene un visor de recetas y otros objetos de imagen.
Nota
Si el usuario conectado no tiene la autorizaci√≥n necesaria o no ha iniciado la sesi√≥n ning√∫n
usuario, aparecer√° el cuadro de di√°logo de inicio de sesi√≥n. En este caso, en Runtime
Professional aparece el aviso de que el usuario no dispone de permiso de manejo.

8.4.6

Ejemplo: Crear grupos de usuarios y asignar autorizaciones

Tarea
En el ejemplo siguiente se crean los grupos de usuarios y se les asignan autorizaciones.

Procedimiento
1. Abra el √°rea de trabajo "Grupos de usuarios".
2. Haga doble clic en "Agregar" en la tabla "Grupos".
3. En "Nombre", escriba "Programadores".
4. Para crear los grupos de usuarios "Operadores de puesta en marcha" y "Operadores" se
deber√°n repetir los pasos 2 y 3.
5. Haga clic en "Grupo de administradores" de la tabla "Grupos".
6. En la tabla "Autorizaciones" active la autorizaci√≥n "Modificar par√°metros de sistema".

1414

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.4 Ejemplos

Resultado intermedio

Procedimiento
1. Haga clic en "Operadores" de la tabla "Grupos".
2. En la tabla "Autorizaciones" active la autorizaci√≥n "Modificar registros de receta".
3. Haga clic en "Operadores de puesta en marcha" de la tabla "Grupos".
4. En la tabla "Autorizaciones" active la autorizaci√≥n "Modificar registros de receta", "Modificar
par√°metros de sistema" y "Modificar par√°metros de proceso".
5. Haga clic en "Programadores" de la tabla "Grupos".
6. En la tabla "Autorizaciones" active la autorizaci√≥n "Modificar registros de receta".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1415

Configurar una administraci√≥n de usuarios
8.4 Ejemplos

Resultado

8.4.7

Ejemplo: Crear usuarios y asignarlos a un grupo de usuarios

Tarea
En el ejemplo siguiente se crean los usuarios y se asignan a los grupos de usuarios. El usuario
se ordenar√° alfab√©ticamente justo despu√©s de entrar el nombre.

Procedimiento
1. Abra el √°rea de trabajo "Usuarios".
2. Haga doble clic en "Agregar" en la tabla "Usuarios".
3. Introduzca el nombre de usuario "Mueller".
4. En la columna "Contrase√±a", haga clic en el bot√≥n
introducir la contrase√±a.

. Se abre un cuadro de di√°logo para

5. Introduzca la contrase√±a "mueller".
6. Vuelva a introducir la contrase√±a en el campo de confirmaci√≥n situado debajo.
7. Cierre el cuadro de di√°logo con el s√≠mbolo

.

8. En la tabla "Grupos", active el grupo de usuarios "Programadores".

1416

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Configurar una administraci√≥n de usuarios
8.4 Ejemplos

Resultado intermedio

Procedimiento
1. Haga doble clic en "Agregar" en la tabla "Usuarios".
2. Introduzca el nombre de usuario "Meier".
3. En la columna "Contrase√±a", haga clic en el bot√≥n
introducir la contrase√±a.

. Se abre un cuadro de di√°logo para

4. Introduzca la contrase√±a "meier".
5. Vuelva a introducir la contrase√±a en el campo de confirmaci√≥n situado debajo.
6. Cierre el cuadro de di√°logo con el s√≠mbolo

.

7. En la tabla "Grupos", active el grupo de usuarios "Operadores de puesta en marcha".
8. Repita los pasos 2 a 6 para el usuario "Maestro".
9. En la tabla "Grupos", active el grupo de usuarios "Operadores".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1417

Configurar una administraci√≥n de usuarios
8.4 Ejemplos

Resultado

1418

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

9

Trabajar con funciones de sistema y Runtime Scripting
9.1

Principios b√°sicos

9.1.1

Runtime Scripting

Definici√≥n de conceptos
En la documentaci√≥n se utilizan los t√©rminos siguientes:
T√©rmino
Runtime Scripting

T√©rmino general para todas las actividades de los scripts de usuario y los
scripts locales.

Funci√≥n

T√©rmino general para las funciones de sistema y los scripts de usuario.

Funciones de sistema

Las funciones de sistema son todas las funciones suministradas con WinCC.
Las funciones de sistema se utilizan en listas de funciones, en scripts de
usuario o en scripts locales.

Scripts de usuario

Los scripts de usuario son funciones escritas en el editor "Scripts". Para ma‚Äê
yor especificaci√≥n, en la documentaci√≥n se utilizan los t√©rminos "VB Script de
usuario" y "C Script de usuario".

Script local

Un script local se crea directamente en la ubicaci√≥n, p. ej. de una propiedad
de objeto, y posee un disparador c√≠clico o ac√≠clico. Para mayor especificaci√≥n,
en la documentaci√≥n se utilizan los t√©rminos "VB Script local" y "C Script local".

VBS / VBScript

Abreviatura de Visual Basic Script

Disponibilidad
WinCC RT Advanced y Panels

WinCC RT Professional

Funciones VB definidas por el usuario

X

X

Funciones C definidas por el usuario

--

X

Scripts VB locales

--

X

C scripts locales

--

X

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1419

Trabajar con funciones de sistema y Runtime Scripting
9.1 Principios b√°sicos

Aplicar Runtime Scripting
La siguiente figura muestra la ayuda para decisi√≥n antes de iniciar una tarea de programaci√≥n:

¬Å5HDOL]DEOHHQ
HO3/&"

6¬Ø

$GDSWDU
SURJUDPDGH
FRQWURO

6¬Ø

8WLOL]DUIXQFL¬µQGH
VLVWHPD

6¬Ø

,QWURGXFLUXQD
IXQFL¬µQ

1R

¬Å)XQFL¬µQGH
VLVWHPD
GLVSRQLEOH"
1R

¬Å)XQFLRQDOLGDG
QHFHVDULD
UHSHWLGDPHQWH"

1R
6FULSWORFDO

),1

*

En WinCC RT Advanced y Panels no se soportan los scripts locales.

¬øFunci√≥n definida por el usuario o script local?
La realizaci√≥n de una tarea de programaci√≥n con un script de usuario o con un script local
depende de la finalidad y, en √∫ltima instancia, del n√∫mero de scripts de usuario o scripts
locales.
Utilice scripts locales para actividades de segundo plano, p. ej. para imprimir diariamente un
informe, para la vigilancia de variables o para la ejecuci√≥n de c√°lculos.
Utilice las funciones definidas por el usuario para poder utilizar un mismo c√≥digo en varios
puntos del proyecto sin tener que crearlo m√°s que una vez. En lugar de introducir el c√≥digo
varias veces, basta con llamar la correspondiente funci√≥n definida por el usuario. As√≠, su
c√≥digo ser√° m√°s claro y m√°s f√°cil de mantener.

1420

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.1 Principios b√°sicos

6FULSWORFDO

6FULSWORFDO
Instrucci√≥n 1
,QVWUXFFL¬µQ
Instrucci√≥n 3
Instrucci√≥n 4

Instrucci√≥n 1
Instrucci√≥n 2
Instrucci√≥n 3
Instrucci√≥n 4

6FULSWORFDO
Instrucci√≥n 1
Instrucci√≥n 2
Instrucci√≥n 3
Instrucci√≥n 4

)XQFL¬µQSHUVRQDOL]DGD
0\)XQFWLRQ
Instrucci√≥n 1
Instrucci√≥n 2
Instrucci√≥n 3
Instrucci√≥n 4

6FULSWORFDO
0\)XQFWLRQ

6FULSWORFDO
0\)XQFWLRQ

6FULSWORFDO
0\)XQFWLRQ

Consulte tambi√©n
Funciones definidas por el usuario (P√°gina 1423)
Scripts locales (P√°gina 1425)

9.1.2

Funciones del sistema

Posibilidades de aplicaci√≥n
‚óè Listas de funciones
Una lista de funciones permite ejecutar las funciones de sistema configuradas cuando
aparece el evento.
‚óè Funciones definidas por el usuario
Si el panel de operador soporta funciones definidas por el usuario, utilice funciones de
sistema en combinaci√≥n con instrucciones y condiciones en el c√≥digo de la funci√≥n definida
por el usuario. Gracias a ello, una funci√≥n definida por el usuario se ejecuta en funci√≥n de
un determinado estado del sistema. Adem√°s, es posible evaluar p. ej. valores de retorno de
las funciones de sistema. Dependiendo del valor de retorno, podr√° ejecutar entonces p. ej.
funciones de comprobaci√≥n que, a su vez, influyen en el procesamiento de la funci√≥n.

Ejemplos de aplicaci√≥n de funciones de sistema
‚óè C√°lculos como, p. ej., valor de variable para aumentar un importe determinado o variable.
‚óè Funciones de archivaci√≥n (p. ej. para iniciar un fichero de valores de proceso).

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1421

Trabajar con funciones de sistema y Runtime Scripting
9.1 Principios b√°sicos
‚óè Configuraci√≥n (p. ej. para cambiar de controlador o activar un bit en el controlador).
‚óè Avisos (p. ej. tras modificar el usuario)

Uso
Las funciones de sistema se utilizan en listas de funciones o en scripts de usuario.
‚óè Lista de funciones
Cuando configure una lista de funciones, seleccione las funciones de sistema en una lista
de selecci√≥n ordenada por categor√≠as:

‚óè Funciones definidas por el usuario
Si se utiliza una funci√≥n de sistema en una funci√≥n definida por el usuario, selecci√≥nela de
la lista de selecci√≥n. Para abrir la lista de selecci√≥n, utilice la combinaci√≥n de teclas <Ctrl
+barra espaciadora> o haga clic en
.

Dependencia del idioma
En la lista de funciones los nombres de las funciones de sistema dependen del idioma de
configuraci√≥n ajustado. Gracias a ello, el ingeniero programador podr√° reconocer las
funciones de inmediato.

1422

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.1 Principios b√°sicos
En los scripts de usuario utilice el nombre en ingl√©s de la funci√≥n de sistema. Los nombres
ingleses de las funciones de sistema se indican en la referencia.

Disponibilidad en WinCC Runtime Advanced y Panels
Las funciones de sistema disponibles dependen del panel de operador utilizado.

Cambio de paneles de operador
Si en una lista de funciones se utilizan funciones de sistema no disponibles en el panel de
operador seleccionado, las funciones de sistema en cuesti√≥n aparecen marcadas en color.
Si en un script de usuario se utiliza una funci√≥n de sistema no disponible en el panel de
operador seleccionado, aparece una advertencia. Adem√°s, la funci√≥n de sistema en cuesti√≥n
se subrayar√° con una l√≠nea ondulada en color azul.

Consulte tambi√©n
Funciones de sistema para ficheros (P√°gina 646)

9.1.3

Funciones definidas por el usuario

Posibilidades de aplicaci√≥n
Las funciones definidas por el usuario se utilizan p. ej. para lo siguiente:
‚óè Configurar la lista de funciones
En una funci√≥n definida por el usuario es posible ejecutar o repetir funciones definidas por
el usuario y funciones de sistema en funci√≥n de determinadas condiciones. A continuaci√≥n,
la funci√≥n definida por el usuario se agrega, por ejemplo, a una lista de funciones.
‚óè Programar nuevas funcionalidades
Las funciones definidas por el usuario son v√°lidas solamente en el proyecto en el que
fueron definidas. Para las funciones definidas por el usuario se definen par√°metros de
transferencia y valores de retorno. ej., para convertir valores.
Nota
En una lista de funciones s√≥lo pueden utilizarse funciones definidas por el usuario de un solo
lenguaje de programaci√≥n. Mediante la selecci√≥n de la primera funci√≥n definida por el usuario
se determina si en la lista de funciones estar√°n disponibles las funciones VB o las funciones C.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1423

Trabajar con funciones de sistema y Runtime Scripting
9.1 Principios b√°sicos

Ejemplos de aplicaci√≥n de funciones definidas por el usuario
‚óè Convertir valores
Utilizando funciones es posible convertir valores entre diferentes unidades de medida (p. ej.
temperaturas).
‚óè Evaluar estad√≠sticamente valores de variables
‚óè Trazar una curva en un visor de curvas f(t)

Propiedades de funciones definidas por el usuario
Las funciones definidas por el usuario tienen las propiedades siguientes:
‚óè Nombre
‚óè Par√°metro (opcional)
‚óè Valor de retorno y tipo (opcional)
‚óè Posibilidad de modificaci√≥n centralizada
‚óè No posee disparador. Debe llamarse expl√≠citamente, p. ej. en una lista de funciones.

Organizaci√≥n de funciones definidas por el usuario
Las funciones definidas por el usuario se crean con el editor "Scripts". Encontrar√° m√°s
informaci√≥n al respecto en "Editor "Scripts" (P√°gina 1432)".
Las funciones definidas por el usuario se guardan en el proyecto. Para proteger funciones
definidas por el usuario, configure una protecci√≥n de know-how. Encontrar√° m√°s informaci√≥n
al respecto en Establecer la protecci√≥n de know-how (P√°gina 1462).
‚óè √Årbol del proyecto
En el √°rbol del proyecto, las funciones definidas por el usuario se listan en los apartados "VB
Scripts" o "C Scripts".

‚óè Lista de funciones
En una lista de funciones, las funciones definidas por el usuario se listan en los apartados
"VB Scripts" o "C Scripts".
‚óè Funci√≥n definida por el usuario
Si se utiliza una funci√≥n de sistema en una funci√≥n definida por el usuario, selecci√≥nela de
la lista de selecci√≥n. Para abrir la lista de selecci√≥n, utilice la combinaci√≥n de teclas <Ctrl
+barra espaciadora> o haga clic en .

1424

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.1 Principios b√°sicos

Consulte tambi√©n
Runtime Scripting (P√°gina 1419)
Establecer la protecci√≥n de know-how (P√°gina 1462)
Editor "Scripts" (P√°gina 1432)

9.1.4

Scripts locales

Posibilidades de aplicaci√≥n
Los scripts locales se utilizan p. ej. para lo siguiente:
‚óè Dinamizar objetos
Para determinar el valor de una propiedad de objeto en runtime se utiliza un script local. De
este modo se modifica, p. ej., el color en funci√≥n de un valor de variable.
‚óè Ejecutar tareas en cualquier momento
Utiliza un script local para planificar tareas, p. ej. imprimir diariamente un informe al terminar
el turno.

Ejemplos de aplicaci√≥n de scripts locales
‚óè Configurar especificaciones de consigna para variables de manejo de un objeto gr√°fico,
p. ej. para especificar con un clic de rat√≥n un valor para el controlador
‚óè Configurar el cambio del idioma de runtime en el manejo de un objeto gr√°fico.
‚óè Vigilancia de estado de variables, p. ej. para asegurarse de que un valor es v√°lido.

Propiedades de los scripts locales
Un script local se crea directamente en la ubicaci√≥n. Un script local tiene las siguientes
propiedades:
‚óè Nombre predefinido
‚óè Par√°metros predefinidos
‚óè Valor de retorno predefinido (opcional)
‚óè Posibilidad de modificaci√≥n solo en la ubicaci√≥n
‚óè Posee un disparador
‚óè Llamada de funciones definidas por el usuario y funciones de sistema

Disparador
Para ejecutar scripts locales en runtime se necesitan disparadores. El disparador se determina
autom√°ticamente al crear un script local o bien lo define el ingeniero programador.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1425

Trabajar con funciones de sistema y Runtime Scripting
9.1 Principios b√°sicos
WinCC soporta los siguientes disparadores:
‚óè Disparadores ac√≠clicos, p. ej. ha previsto la finalizaci√≥n de runtime una sola vez, para tareas
de mantenimiento.
‚óè Disparadores c√≠clicos, p. ej. para planificar una tarea que inicie la impresi√≥n diaria de un
informe.
‚óè Eventos, p. ej. al hacer clic en el bot√≥n.
La siguiente figura muestra distintos tipos de disparadores:

7LSRVGHGLVSDUDGRU

7LPHU

9DULDEOH

&¬ØFOLFR
HMHFXFL¬µQUHSHWLGDHQ
LQWHUYDORVXQLIRUPHV

$F¬ØFOLFR
HMHFXFL¬µQ¬ºQLFDLQVWDQWH
GHLQLFLRGHWHUPLQDGRSRU
IHFKDKRUD

,QVWDQWHGHLQLFLR
GHWHUPLQDGRSRU
G¬ØDPHVKRUD

,QVWDQWHGHLQLFLR
GHWHUPLQDGRSRU
LQLFLRGHUXQWLPH

9LJLODQFLDF¬ØFOLFD
GHOYDORUGH
YDULDEOH

$OFDPELDU

Los disparadores se utilizan en los siguientes editores:
‚óè Planificador de tareas
En primer lugar se configura el disparador en el Planificador de tareas. Luego se enlaza el
disparador con el script local o una lista de funciones.
‚óè Im√°genes
En las im√°genes debe configurarse en primer lugar un script local en la lista de
propiedades, a fin de dinamizar una propiedad de objeto.
El disparador se determina autom√°ticamente al crear el script local. El disparador puede
modificarse, p. ej., convirti√©ndolo en disparador de variable.

Consulte tambi√©n
Runtime Scripting (P√°gina 1419)

1426

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.2 Trabajar con listas de funciones

9.2

Trabajar con listas de funciones

9.2.1

Conceptos b√°sicos de las listas de funciones

Introducci√≥n
Una lista de funciones permite ejecutar una o varias funciones de sistema y scripts de usuario
cuando aparece el evento configurado.

Principio
La lista de funciones se asocia al evento de un objeto (p. ej. un objeto de imagen o una tarea).
En cada evento se puede configurar exactamente una lista de funciones. Los eventos
disponibles dependen del objeto y del panel de operador seleccionados.

Los eventos s√≥lo ocurren cuando el proyecto est√° en runtime. Los eventos son, por ejemplo:
‚óè Ejecuci√≥n de una tarea
‚óè Pulsar un bot√≥n
‚óè Acusar un aviso
Nota
Las funciones de sistema configurables que se pueden seleccionar en una lista de
funciones dependen del panel de operador elegido. Encontrar√° m√°s informaci√≥n al
respecto en "Funciones de sistema dependientes del panel".

Consulte tambi√©n
Lista de funciones (P√°gina 1838)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1427

Trabajar con funciones de sistema y Runtime Scripting
9.2 Trabajar con listas de funciones

9.2.2

Propiedades de la lista de funciones

Informaci√≥n de estado
Durante la configuraci√≥n, los datos del proyecto se comprueban en segundo plano.
Las siguientes causas provocan que la lista de funciones no se ejecute en runtime y se
marquen en rojo las entradas err√≥neas:
‚óè Por lo menos una funci√≥n de sistema o un script de usuario no se ha parametrizado por
completo.
‚óè Hay por lo menos una funci√≥n de sistema o una funci√≥n definida por el usuario no soportada
por el panel de operador seleccionado (p. ej. por un cambio del tipo de dispositivo).

Proceso de funciones de sistema y scripts de usuario (WinCC Runtime Advanced y Panels)
Una lista de funciones se procesa en runtime de arriba a abajo. Si la lista de funciones contiene
funciones de sistema de ejecuci√≥n prolongada, se procesan de forma as√≠ncrona. Encontrar√°
m√°s informaci√≥n al respecto en "Llamada de funciones de sistema (P√°gina 1435)" y "Llamada
de funciones definidas por el usuario (P√°gina 1436)".

Consulte tambi√©n
Llamada de funciones de sistema (P√°gina 1435)
Llamada de funciones definidas por el usuario (P√°gina 1436)

9.2.3

Configurar la lista de funciones

Introducci√≥n
Una lista de funciones se configura seleccionando las funciones de sistema y las funciones
definidas por el usuario en una lista de selecci√≥n. Las funciones de sistema est√°n ordenadas
por categor√≠as en la lista de selecci√≥n.
En una lista de funciones s√≥lo se utilizan funciones definidas por el usuario de un lenguaje de
programaci√≥n. Mediante la selecci√≥n del primer script de usuario se determina si los VB Scripts
de usuario o los C Scripts de usuario estar√°n disponibles en la lista de funciones. Los lenguajes
de programaci√≥n disponibles dependen del panel de operador utilizado.
Si p. ej. se ha creado un VB Script de usuario, encontrar√° el script de usuario en la entrada "VB
Scripts".

Requisitos
El objeto deber√° tener por lo menos un evento configurable.

1428

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.2 Trabajar con listas de funciones

Procedimiento
Para configurar una lista de funciones, proceda del siguiente modo:
1. Abra el editor que contiene el objeto.
2. Seleccione el objeto.
3. Haga clic en la ventana de inspecci√≥n "Propiedades > Eventos". Seleccione el evento en el
que debe configurarse la lista de funciones.
4. En la lista de selecci√≥n de la ventana de inspecci√≥n, seleccione la entrada "<Agregar
funci√≥n>".
5. En la lista de selecci√≥n, escoja la funci√≥n de sistema o el script de usuario deseado.
Tambi√©n puede introducir el nombre de la funci√≥n de sistema o del script de usuario.

La funci√≥n de sistema o la funci√≥n definida por el usuario se registrar√° en la lista de
funciones.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1429

Trabajar con funciones de sistema y Runtime Scripting
9.2 Trabajar con listas de funciones
6. Si la funci√≥n de sistema o la funci√≥n definida por el usuario contiene par√°metros, seleccione
los valores correspondientes para los par√°metros.

7. Si desea agregar m√°s funciones de sistema o scripts de usuario a la lista de funciones,
repita los pasos 4.) a 6.).

Resultado
La lista de funciones deber√° estar configurada. El estado de la lista de funciones se visualizar√°
en la ventana de inspecci√≥n, junto al evento configurado. Cuando el evento configurado ocurra
en runtime, la lista de funciones se procesar√° de arriba a abajo.

Consulte tambi√©n
Ejemplo: cambiar el modo de operaci√≥n del panel de operador y visualizar el estado actual
(P√°gina 1494)

9.2.4

Editar la lista de funciones

Introducci√≥n
La lista de funciones se puede editar como se indica a continuaci√≥n:
‚óè Modificar el orden de las funciones de sistema y de los scripts de usuario.
‚óè Eliminar una funci√≥n de sistema o un script de usuario.

Requisitos
La lista de funciones deber√° estar configurada y abierta.

1430

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.2 Trabajar con listas de funciones

Cambiar el orden de una funci√≥n de sistema o una funci√≥n definida por el usuario
1. Seleccione la funci√≥n de sistema o la funci√≥n definida por el usuario en la lista de funciones.
2. A continuaci√≥n, haga clic en la correspondiente flecha de sentido de la ventana de
inspecci√≥n hasta que la funci√≥n de sistema o la funci√≥n definida por el usuario aparezca en
la posici√≥n deseada.

Cambiar el orden de varias funciones de sistema o varias funciones definidas por el usuario
1. Mantenga pulsada la tecla <May√∫s>.
2. Haga clic con el rat√≥n consecutivamente en las funciones de sistema o las funciones
definidas por el usuario elegidas.
3. Desplace la selecci√≥n con Arrastrar y soltar a la posici√≥n deseada.

Eliminar una funci√≥n de sistema o una funci√≥n definida por el usuario
1. Seleccione la funci√≥n de sistema o la funci√≥n definida por el usuario en la lista de funciones.
2. En el men√∫ contextual, elija el comando "Borrar".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1431

Trabajar con funciones de sistema y Runtime Scripting
9.3 Trabajar con funciones definidas por el usuario

9.3

Trabajar con funciones definidas por el usuario

9.3.1

Editor "Scripts"

Introducci√≥n
El editor "Scripts" ayuda a crear funciones definidas por el usuario mediante funcionalidades
como Autocompletar o Resaltar la sintaxis. La Task Card "Instrucciones" sirve para insertar,
por ej., plantillas de c√≥digo para instrucciones requeridas frecuentemente.

Completar autom√°ticamente e introducir par√°metros
El editor "Scripts" le ayuda durante la programaci√≥n con la funci√≥n de completar
autom√°ticamente y al introducir par√°metros.
Si se utilizan funciones de sistema, los par√°metros de la funci√≥n se mostrar√°n en forma de
tooltip.

1432

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.3 Trabajar con funciones definidas por el usuario

<Ctrl+J>
La combinaci√≥n de teclas <Ctrl+J> abre la lista contextual de objetos. Utilice la lista de objetos
para suministrar valores a las funciones de sistema, los m√©todos y las propiedades: elija
im√°genes, objetos de imagen, variables o colores, por ejemplo. A√±adir√° un objeto
seleccionado en la lista de objetos haciendo doble clic en el c√≥digo.
Nota
Tambi√©n puede insertar las variables y las im√°genes con la funci√≥n de arrastrar y soltar. Utilice
la funci√≥n de arrastrar y soltar para asignar par√°metros, por ejemplo.

<Ctrl+barra espaciadora>
Mediante la combinaci√≥n de teclas <Ctrl+barra espaciadora> se llama una lista con el siguiente
contenido:
‚óè Constantes y funciones del lenguaje de programaci√≥n utilizado en el editor "Scripts".
‚óè Funciones definidas por el usuario
‚óè Funciones de sistema

Integraci√≥n de caracteres de control en cadenas de caracteres
Si desea emplear caracteres de control como tabuladores o saltos de l√≠nea en cadenas de
caracteres, emplee la funci√≥n "Chr()". Como par√°metro, proporcione el c√≥digo ASCII decimal
del car√°cter de control deseado:
Ejemplo:
‚óè Chr(9) devuelve "Tabulador".
‚óè Chr(15) devuelve "SI" (Shift in).
‚óè Chr(20) devuelve "DC4" (Device Control 4).
Encontrar√° m√°s informaci√≥n sobre esta funci√≥n VBS en Internet (https://msdn.microsoft.com/
en-us/library/ws6aa3sf(v=vs.84).aspx).

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1433

Trabajar con funciones de sistema y Runtime Scripting
9.3 Trabajar con funciones definidas por el usuario

Task Card "Instrucciones"
La Task Card "Instrucciones" contiene las paletas "Plantillas de c√≥digo" y "Lista de funciones".
‚óè Plantillas de c√≥digo
Para insertar instrucciones empleadas frecuentemente, haga doble clic en la instrucci√≥n
deseada en la paleta "Plantillas de c√≥digo". Reemplace el nombre de las variables por las
expresiones empleadas.
‚óè Lista de funciones
En la lista de funciones se seleccionan las funciones de sistema y las funciones definidas
por el usuario de una lista de selecci√≥n. Proceda como en la configuraci√≥n de una lista de
funciones. Para a√±adir la lista de funciones al c√≥digo, haga clic en el bot√≥n "A√±adir". La lista
de funciones se convierte autom√°ticamente a la sintaxis adecuada.
Nota
No todas las funciones de sistema est√°n disponibles en el editor "Scripts". Encontrar√° m√°s
informaci√≥n al respecto en la referencia.

Funciones de edici√≥n
Para mostrar m√°s claramente el c√≥digo con sangr√≠as y comentarios, utilice los botones de la
barra de herramientas "Edici√≥n avanzada".
Los marcadores facilitan la orientaci√≥n, incluso si el script contiene muchas l√≠neas de c√≥digo.
Para m√°s informaci√≥n sobre cada uno de los botones, consulte la ayuda directa
correspondiente.

Sincronizaci√≥n de variables y objetos
Si se modifican en el proyecto nombres de variables o nombres de objetos que se utilizan en
una funci√≥n definida por el usuario, los nombres se adaptar√°n autom√°ticamente en la funci√≥n
definida por el usuario.
Si modifica en la funci√≥n los nombres de las variables o los nombres de los objetos, √©stos no
se adaptar√°n en el proyecto. Al ejecutar la funci√≥n definida por el usuario aparecer√° un
mensaje de error.

Resaltar la sintaxis
En el editor "Scripts", las palabras clave se resaltan con distintos colores. Las palabras
desconocidas se subrayan con una l√≠nea ondulada roja.
La tabla muestra los colores predeterminados para las principales palabras clave:
Color

1434

Significado

Ejemplo

Azul

Palabra clave

If, Then

Violeta oscuro

Funci√≥n

FahrenheitToCelsius

Chocolate

Funci√≥n de sistema

SetTag

Naranja

Variable HMI

Tag_1

Verde

Comentario

'Esto es un comentario'

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.3 Trabajar con funciones definidas por el usuario

Personalizar propiedades de visualizaci√≥n
Al abrir una funci√≥n definida por el usuario, es posible personalizar individualmente las
propiedades de visualizaci√≥n en el editor. Elija para ello el comando de men√∫ "Herramientas
> Configuraci√≥n". En el editor "Configuraci√≥n", haga clic en "General > Editores de textos". En
el √°rea de trabajo, modifique los colores para resaltar la sintaxis o el sangrado del c√≥digo, por
ejemplo.

Consulte tambi√©n
Crear una funci√≥n VB definida por el usuario (P√°gina 1445)
Crear una funci√≥n C definida por el usuario (P√°gina 1456)
Scripts locales (P√°gina 1465)
Editor para scripts locales (P√°gina 1466)

9.3.2

Llamada de funciones de sistema

Introducci√≥n
Las funciones definidas por el usuario permiten llamar funciones de sistema. La sintaxis
depende del lenguaje de programaci√≥n empleado. El lenguaje de programaci√≥n disponible
depende del panel de operador utilizado.
Para llamar una funci√≥n de sistema en una funci√≥n definida por el usuario, est√°n las siguientes
posibilidades:
‚óè Con <Ctrl+barra espaciadora> o con
‚óè Entrada directa
‚óè Mediante la paleta "Lista de funciones"

Con <Ctrl+barra espaciadora> o con
Abra con <Ctrl+barra espaciadora> la lista de selecci√≥n y elija la funci√≥n de sistema deseada.

Entrada directa
Las funciones de sistema se introducen directamente en el c√≥digo. Utilice el nombre en ingl√©s
de la funci√≥n de sistema. Los nombres ingleses de las funciones de sistema se indican en la
referencia de estas bajo "Sintaxis". El idioma configurado para la edici√≥n no se tiene en cuenta.
Las referencias a objetos (p. ej. im√°genes, conexiones y ficheros) se transfieren entre comillas:
‚óè Llamada de funciones del sistema sin valor de retorno en VBS

SetTag "Tag1",64

‚óè Llamada de funciones del sistema con valor de retorno en VBS

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1435

Trabajar con funciones de sistema y Runtime Scripting
9.3 Trabajar con funciones definidas por el usuario

InverseLinearScaling "Xvalue","Tag1", 0, 1

‚óè Llamar funciones del sistema sin valor de retorno en C

SetTag ("Tag1",64);

‚óè Llamar funciones del sistema con valor de retorno en C

InverseLinearScaling ("Xvalue","Tag1", 0, 1);

Mediante la paleta "Lista de funciones"
Seleccione en la paleta "Lista de funciones" la funci√≥n de sistema deseada de la lista de
selecci√≥n. Proceda como en la configuraci√≥n de una lista de funciones. Encontrar√° m√°s
informaci√≥n en "Configurar la lista de funciones".
Para incorporar la lista en el c√≥digo, haga clic en el bot√≥n "A√±adir". La lista se convierte
autom√°ticamente a la sintaxis correcta.

Cambio de panel de operador (Runtime Panels y Advanced)
El c√≥digo de una funci√≥n definida por el usuario depende del panel de operador seleccionado.
Si en la funci√≥n definida por el usuario se utilizan funciones de sistema que no soporte el panel
de operador, aparecer√° un aviso de error en la ventana de resultados.

Consulte tambi√©n
Configurar la lista de funciones (P√°gina 1428)
Crear una funci√≥n VB definida por el usuario (P√°gina 1445)
Ejecutar una funci√≥n VB definida por el usuario (P√°gina 1448)
Ejecutar una funci√≥n C definida por el usuario (P√°gina 1460)

9.3.3

Llamada de funciones definidas por el usuario

Introducci√≥n
En una funci√≥n definida por el usuario pueden insertarse funciones definidas por el usuario del
mismo lenguaje de programaci√≥n, p. ej. s√≥lo funci√≥n C definidas por el usuario en una funci√≥n
C definida por el usuario.

1436

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.3 Trabajar con funciones definidas por el usuario
La sintaxis depende del lenguaje de programaci√≥n empleado. El lenguaje de programaci√≥n
disponible depende del panel de operador utilizado.
Para llamar una funci√≥n definida por el usuario en una funci√≥n definida por el usuario, hay
varias posibilidades:
‚óè Con <Ctrl+barra espaciadora> o con
‚óè Entrada directa
‚óè Mediante la paleta "Lista de funciones"

Con <Ctrl+barra espaciadora> o con
Abra con <Ctrl+barra espaciadora> o con
el usuario deseado.

la lista de selecci√≥n y elija la funci√≥n definida por

Entrada directa
La funci√≥n definida por el usuario se introduce directamente en el c√≥digo. Las referencias a
objetos (p. ej. im√°genes, conexiones y ficheros) se transfieren entre comillas.

Llamada de funciones definidas por el usuario sin valor de retorno en VBS
Average 4,10

Llamada de funciones definidas por el usuario con valor de retorno en VBS
Dim ValueA
ValueA = Average (4,10)

Si no se desea evaluar el valor de retorno, la llamada se utiliza como si se tratara de una
funci√≥n definida por el usuario sin valor de retorno.

Llamar funciones definidas por el usuario sin valor de retorno en C
Average(4,10);

Llamar funciones definidas por el usuario con valor de retorno en C
SetTagDouble("AverageValue",Average (4, 10));

Si no se desea evaluar el valor de retorno, la llamada se utiliza como si se tratara de una
funci√≥n definida por el usuario sin valor de retorno.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1437

Trabajar con funciones de sistema y Runtime Scripting
9.3 Trabajar con funciones definidas por el usuario

Mediante la paleta "Lista de funciones"
Seleccione en la paleta "Lista de funciones" la funci√≥n definida por el usuario deseada de la
lista de selecci√≥n.
Proceda como en la configuraci√≥n de una lista de funciones. Encontrar√° m√°s informaci√≥n al
respecto en "Configurar la lista de funciones (P√°gina 1428)".
Para incorporar la lista en el c√≥digo, haga clic en el bot√≥n "A√±adir". La lista se convierte
autom√°ticamente a la sintaxis correcta.

Consulte tambi√©n
Crear una funci√≥n VB definida por el usuario (P√°gina 1445)
Ejecutar una funci√≥n VB definida por el usuario (P√°gina 1448)
Ejecutar una funci√≥n C definida por el usuario (P√°gina 1460)
Configurar la lista de funciones (P√°gina 1428)

9.3.4

Acceso a variables HMI

Introducci√≥n
Con VBS o C se puede acceder a las variables HMI que se hayan creado en el proyecto. En
runtime se modifica o lee el valor de una variable HMI con un script de usuario.
Adem√°s, puede crear variables locales en calidad de contadores o de memoria intermedia.
Para evitar errores causados por una notaci√≥n err√≥nea de las variables locales, es necesario
inicializar cada una de las variables locales.

1438

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.3 Trabajar con funciones definidas por el usuario

Variables HMI
‚óè WinCC Runtime Advanced y Panels
En el script de usuario se accede al valor de variable que est√° guardado en la imagen de
variable. A continuaci√≥n, el valor de la variable se actualiza conforme al tiempo de ciclo
configurado. El script de usuario accede primero a los valores de la variable le√≠dos en el
instante anterior del ciclo.
Si el nombre de la variable en el proyecto cumple con las convenciones para nombres VBS,
podr√° utilizar la variable en el script de usuario de la siguiente manera.
'VBS_Example_03
If BeltDriveOilTemperature > 100 Then [instrucci√≥n]
Si el nombre de la variable en el proyecto no cumple con las convenciones para nombres
VBS, deber√° referenciar la variable a trav√©s de la "Lista de SmartTags". En el ejemplo
siguiente, el nombre de la variable contiene el car√°cter "&". √âste no est√° permitido en las
convenciones para nombres VBS.
'VBS_Example_04
SmartTags("Test&Trial")= 2005
‚óè WinCC Runtime Professional
Existen las mismas posibilidades de acceso que con los paneles de operador con WinCC
Runtime Advanced y Panels. Adem√°s es posible acceder en modo as√≠ncrono a los valores
de variable. En el acceso as√≠ncrono, se accede directamente al valor de la variable en el
controlador. En un script local o un C Script de usuario se accede al valor de variable de la
siguiente manera:
‚Äì Listado de SmartTags (VBS)
‚Äì Listado de Tags con m√©todo Read/Write (VBS)
‚Äì Funci√≥n GetTag (C)
‚Äì Funci√≥n SetTag (C)
El valor de la variable se lee una sola vez desde el controlador al llamar el m√©todo o el script
de usuario. A diferencia de la lectura desde la imagen de variable, el valor de variable no se
actualiza regularmente.

6¬ØQFURQR
*HW7DJ:DLW;;;

3URFHVR

:LQ&&
6FULSW
,QVWUXFFL¬µQ
/HHUYDULDEOH

,PDJHQ
'LVSDUDGRU

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

3/&
'LVSDUDGRU
9DORU

1439

Trabajar con funciones de sistema y Runtime Scripting
9.3 Trabajar con funciones definidas por el usuario
Figura 9-1

En modo s√≠ncrono: Valor de variable directamente desde el controlador

$V¬ØQFURQR
*HW7DJ;;;

3URFHVR

:LQ&&
,PDJHQ

6FULSW
,QVWUXFFL¬µQ
/HHUYDULDEOH

Figura 9-2

'LVSDUDGRU

3/&
GLVSDUDGRU

9DU

9DORU

En modo as√≠ncrono: Valor de variable desde la imagen de variable

Nota
Runtime Scripting
El √≠ndice de los elementos de matrices PLC puede empezar con cualquier n√∫mero. En WinCC,
la indexaci√≥n siempre empieza con 0.
Una variable PLC "Array[1..3] of Int" se representa en WinCC, p. ej., con "Array[0..2] of Int".
Si accede a una matriz en un script, aseg√∫rese de que la indexaci√≥n sea correcta.

Variables locales
Las variables locales s√≥lo se pueden utilizar dentro de los scripts de usuario o los scripts
locales.
Las variables locales se utilizan para lo siguiente:
‚óè Memoria intermedia
‚óè Contadores, p. ej. instrucci√≥n For
Cada variable debe inicializarse de acuerdo con la sintaxis del lenguaje de programaci√≥n.
Ejemplo: Dim objTagFillLevel
Inicialice cada variable con un valor, a fin de evitar errores debidos a variables HMI vac√≠as.
Para poder utilizar externamente el valor de la variable local, enl√°cela con una variable HMI
interna o externa.

1440

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.3 Trabajar con funciones definidas por el usuario

Acceso a variables HMI con nombres din√°micos (WinCC Runtime Advanced y Panels)
La funci√≥n VB definida por el usuario accede al valor de una variable a trav√©s de su nombre.
Es posible indicar el nombre de la variable de modo que se componga en el tiempo de
ejecuci√≥n de la funci√≥n de usuario.
Si la funci√≥n VB de usuario se llama s√≥lo en una imagen en la que la variable HMI se utiliza
tambi√©n en otra parte (p. ej. en un campo E/S), conviene configurar la variable HMI con el modo
de adquisici√≥n "C√≠clico durante el funcionamiento" por cuestiones de rendimiento.
Si se llama la funci√≥n VB definida por el usuario y la variable HMI no se utiliza en la imagen
visualizada actualmente, la variable HMI ha de configurarse con el modo de adquisici√≥n
"C√≠clico continuo". De este modo queda garantizado que el valor actual de la variable est√©
disponible en todo momento.

9.3.5

Comprobar sintaxis de funciones definidas por el usuario

Introducci√≥n
El c√≥digo se comprueba en segundo plano durante la programaci√≥n. Los errores de sintaxis se
marcan con una l√≠nea ondulada roja. En este proceso se comprueba si es correcta la sintaxis
y la validez de las referencias a objetos de la funci√≥n definida por el usuario.
Compruebe la sintaxis en el editor "Scripts" para detectar todos los errores en el c√≥digo, as√≠
como para mostrar los correspondientes mensajes de error. Durante el test se visualizan los
mensajes de error que genera el analizador sint√°ctico de scripts.
Para comprobar si las funciones VB definidas por el usuario contienen errores de
programaci√≥n l√≥gicos, utilice un depurador por separado.

Tipos de errores
Los tipos de errores indicados a continuaci√≥n se detectan al comprobar la sintaxis y se emiten
en la "Ventana de resultados":
‚óè Cadena de caracteres desconocida (p. ej. no es una palabra clave)
‚óè Asignaci√≥n de un valor a una constante
‚óè Ya existe el nombre de una variable local creada con la instrucci√≥n Dim, p. ej.: como
par√°metro, objeto o elemento del modelo de objeto
‚óè Error de sintaxis

Requisitos
‚óè La funci√≥n definida por el usuario est√° abierta.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1441

Trabajar con funciones de sistema y Runtime Scripting
9.4 Crear funciones VB definidas por el usuario

Procedimiento
Para comprobar la sintaxis, proceda del siguiente modo:
1. Haga clic en
para iniciar la comprobaci√≥n de la sintaxis.
Se comprueba la sintaxis. Los resultados de la comprobaci√≥n de sintaxis se muestran en
la ventana de inspecci√≥n, en "Informaci√≥n > Compilar". Los errores de sintaxis se visualizan
con el n√∫mero de l√≠nea.
2. En caso necesario, corrija los errores en la funci√≥n definida por el usuario.

Particularidad en la comprobaci√≥n de la sintaxis de funciones definidas por el usuario
Las funciones definidas por el usuario no se interpretan hasta el runtime. Cuando se compila
un panel de operador, el sistema comprueba que la sintaxis de sus scripts de usuario sea
correcta. Sin embargo, en determinadas circunstancias es posible que se produzcan errores
en tiempo de ejecuci√≥n.

9.4

Crear funciones VB definidas por el usuario

9.4.1

Acceso a objetos con VBS

Introducci√≥n
En los VB Scripts de usuario, los objetos del modelo VBS est√°n disponibles junto con las
propiedades y los m√©todos correspondientes.
En runtime es posible leer y modificar las propiedades de los objetos.

Crear referencias a objetos
Para crear referencias a objetos en funciones VB definidas por el usuario, utilice la lista
correspondiente. Para identificar un objeto, utilice su nombre o su n√∫mero de posici√≥n en la
lista.
Si se accede con frecuencia a las propiedades de un objeto, generar√° una referencia de objeto.
A las propiedades de objeto se accede con y sin referencia de objeto.
Mediante la siguiente instrucci√≥n se hace referencia al primer objeto de la imagen
"MainScreen":

'VBS_Example_01
Dim objObject
'Change to Screen "MainScreen"
HMIRuntime.BaseScreenName = "MainScreen"
Set objObject = HMIRuntime.Screens(1).ScreenItems(1)

1442

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.4 Crear funciones VB definidas por el usuario
Mediante la siguiente instrucci√≥n se hace referencia a un objeto a trav√©s de su nombre y se
modifica una propiedad del objeto. El objeto ha de haberse creado con este nombre en la
imagen.

'VBS_Example_02
Dim objCircle
HMIRuntime.BaseScreenName = "MainScreen"
Set objCircle = HMIRuntime.Screens(1).ScreenItems("Circle_01")
objCircle.BackColor = vbGreen

9.4.2

Utilizaci√≥n de variables VB

Definici√≥n de variables VB
Las variables VB se declaran insertando la l√≠nea de definici√≥n antes del nombre de un VB
Script de usuario.
Dim objScreen
Dim objScrItem
El √°mbito de validez de una variable VB depende de d√≥nde se ha declarado.

VB Scripts de usuario
En el editor "Scripts" el √°rea de declaraci√≥n son por defecto las filas 1 y 2. Es posible agregar
las filas que se quieran.

Cada variable VB definida de este modo se puede utilizar en VB scripts de usuario. Al
comprobar la sintaxis en el editor "Scripts", aparece un mensaje indicando que la variable VB
es desconocida.
La variable VB no se conoce hasta el runtime. Dicha variable se crea al iniciar el runtime, aun
cuando no se ha llamado el propio VB Script de usuario.
Para evitar incoherencias, las variables VB deben ser un√≠vocas en los VB scripts de usuario.

VB Scripts locales
El √°rea de declaraci√≥n de un script local pertenece a la imagen. A las variables declaradas all√≠
se puede acceder desde cualquier script dentro de la imagen. Si se copia un objeto de imagen
con un script local en otra imagen o en la librer√≠a, se copia tambi√©n el script, pero no la secci√≥n
de declaraci√≥n.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1443

Trabajar con funciones de sistema y Runtime Scripting
9.4 Crear funciones VB definidas por el usuario
En el editor para VB Scripts locales se puede mostrar y ocultar el √°rea de declaraci√≥n.
Encontrar√° m√°s informaci√≥n al respecto en "Editor para scripts locales (P√°gina 1466)".
‚óè VB Scripts locales con disparador ac√≠clico
Cada variable VB definida de este modo se aplica autom√°ticamente al √°rea de declaraci√≥n
de cada script local con disparador ac√≠clico. En los scripts locales con disparador c√≠clico el
√°rea de declaraci√≥n permanece vac√≠a.
‚óè VB Scripts locales con disparador c√≠clico
Cada variable VB definida de este modo se aplica autom√°ticamente al √°rea de declaraci√≥n
de cada VB Script local con disparador c√≠clico. En los scripts locales con disparador ac√≠clico
el √°rea de declaraci√≥n permanece vac√≠a.

Ejemplo
En la propiedad "Color de fondo" se configura un VB Script local. El VB Script local posee un
disparador c√≠clico.
En el √°rea de declaraci√≥n se declaran las variables VB a y b.

Si se asocia un VB Script local al evento "Modificado", el VB Script local posee un disparador
ac√≠clico. El √°rea de declaraci√≥n est√° vac√≠a.

Al asociar un VB Script local con disparador c√≠clico a otra propiedad, las variables VB a y b ya
est√°n declaradas en el √°rea de declaraci√≥n.

1444

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.4 Crear funciones VB definidas por el usuario

Consulte tambi√©n
Editor para scripts locales (P√°gina 1466)

9.4.3

Crear una funci√≥n VB definida por el usuario

Introducci√≥n
Cuando se crea una funci√≥n VB definida por el usuario, se definen los ajustes indicados a
continuaci√≥n:
‚óè El nombre con el que se debe llamar la funci√≥n VB definida por el usuario.
‚óè El tipo de funci√≥n VB definida por el usuario.
‚óè Los par√°metros que se transfieren a la funci√≥n VB definida por el usuario en runtime.
Utilice √∫nicamente los caracteres siguientes para el nombre:
‚óè de "A" a "Z"
‚óè de "a" a "z"
‚óè de "0" a "9"
‚óè "_" como separador
Nota
Cuando se modifican los par√°metros o el tipo de funci√≥n, el cambio se marca en color en
el lugar en que se realiza como, p. ej., en la lista de funciones.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1445

Trabajar con funciones de sistema y Runtime Scripting
9.4 Crear funciones VB definidas por el usuario

Procedimiento
Para crear una funci√≥n VB definida por el usuario, haga lo siguiente:
1. Abra "Scripts" en el √°rbol del proyecto.
2. En la navegaci√≥n del proyecto, haga doble clic en "Agregar funci√≥n VB nueva" bajo
"Funciones VB".

La funci√≥n VB definida por el usuario se crea en una nueva ficha en el √°rea de trabajo. En
la ventana de inspecci√≥n se abre la m√°scara para introducir los ajustes de configuraci√≥n de
la funci√≥n VB definida por el usuario.
3. En la ventana de inspecci√≥n configure la funci√≥n VB definida por el usuario en "Propiedades
> General > General".
4. Introduzca un "Nombre" explicativo para la funcion VB definida por el usuario.
5. Seleccione el "Tipo" de funci√≥n VB definida por el usuario.
‚Äì "Function" tienen valor de retorno.
‚Äì "Sub" no tienen valor de retorno.
6. Para a√±adir par√°metros, haga doble clic en la lista "Par√°metros" en "<Agregar>".
Introduzca el nombre del par√°metro y especifique el tipo de par√°metro.
Encontrar√° m√°s informaci√≥n al respecto en "Transferir y devolver valores en VBS
(P√°gina 1449)".
‚Äì "ByVal" transfiere el valor del par√°metro.
‚Äì "ByRef" transfiere la direcci√≥n del par√°metro.
7. Introduzca su c√≥digo en el √°rea de trabajo.
Encontrar√° m√°s informaci√≥n al respecto en "Editor "Scripts" (P√°gina 1432)".

Resultado
La funci√≥n VB definida por el usuario est√° creada. En la barra de t√≠tulo se visualizan el tipo, el
nombre y los par√°metros de funci√≥n.
El principio y el final se insertan autom√°ticamente al crear la funci√≥n definida por el usuario.

1446

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.4 Crear funciones VB definidas por el usuario
Cuando se protegen funciones VB definida por el usuario con una contrase√±a, estos se
guardan en el proyecto de forma cifrada. Encontrar√° m√°s informaci√≥n al respecto en
"Protecci√≥n de funciones definidas por el usuario (P√°gina 1462)".
La figura siguiente muestra una funci√≥n VB definida por el usuario que convierte la temperatura
de "Fahrenheit" a "grados cent√≠grados":

Consulte tambi√©n
Transferir y devolver valores en VBS (P√°gina 1449)
Editor "Scripts" (P√°gina 1432)
Protecci√≥n de funciones definidas por el usuario (P√°gina 1462)
Llamada de funciones de sistema (P√°gina 1435)
Llamada de funciones definidas por el usuario (P√°gina 1436)

9.4.4

Cambiar el nombre de una funci√≥n VB definida por el usuario

Cambiar el nombre de un VB Script de usuario en el √°rbol del proyecto
Para cambiar el nombre de un VB Script de usuario en el √°rbol del proyecto, proceda del
siguiente modo:
1. Seleccione el VB Script de usuario deseado en el √°rbol del proyecto.
2. En el men√∫ contextual del VB Script de usuario, seleccione el comando "Cambiar nombre
(F2)".
3. Introduzca un nombre nuevo para el VB Script de usuario.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1447

Trabajar con funciones de sistema y Runtime Scripting
9.4 Crear funciones VB definidas por el usuario

Cambiar el nombre del VB Script de usuario en la ventana de inspecci√≥n
Para cambiar el nombre de un VB Script de usuario en la ventana de inspecci√≥n, proceda del
siguiente modo:
1. Abra el VB Script de usuario en el editor "Scripts".
2. En la ventana de inspecci√≥n haga clic en "Propiedades > Propiedades > General".
3. Introduzca el nuevo nombre de funci√≥n.

Resultado
Se ha cambiado el nombre del VB Script de usuario. Los lugares se adaptan autom√°ticamente.

9.4.5

Ejecutar una funci√≥n VB definida por el usuario

Introducci√≥n
En WinCC existen las siguientes posibilidades para ejecutar una funci√≥n VB definida por el
usuario:
‚óè Lista de funciones
‚óè Funci√≥n VB definida por el usuario
‚óè VB Script local (s√≥lo en WinCC Runtime Professional)

Llamar una funci√≥n VB definida por el usuario en una lista de funciones
1. El VB Script de usuario se agrega a una lista de funciones igual que una funci√≥n de sistema.
Encontrar√° las funciones VB definidas por el usuario en la lista de selecci√≥n, apartado
"Funciones VB".
Encontrar√° m√°s informaci√≥n en "Configurar la lista de funciones".
2. Si el VB Script de usuario tiene par√°metros, suministre valores est√°ticos o variables HMI a
los par√°metros.
3. Si el VB Script de usuario posee un valor de retorno, seleccione una variable HMI. El valor
para procesar se transfiere a la variable HMI.
Nota
En una lista de funciones solo pueden utilizarse funciones definidas por el usuario de un
mismo lenguaje de programaci√≥n. Al seleccionar la primera funci√≥n definida por el usuario
se define el lenguaje de programaci√≥n.

1448

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.4 Crear funciones VB definidas por el usuario

Llamar una funci√≥n VB definida por el usuario en una funci√≥n VB definida por el usuario
1. Abra el VB Script de usuario en el que quiera llamar el VB Script de usuario.
2. Llame la funci√≥n VB definida por el usuario en la sintaxis del lenguaje de programaci√≥n.
Encontrar√° m√°s informaci√≥n al respecto en "Llamada de scripts de usuario".
3. Si el VB Script de usuario tiene un valor de retorno, asigne una expresi√≥n al VB Script, p. ej.
una variable local.
Nota
En un VB Script de usuario s√≥lo se pueden llamar scripts de usuario de un mismo lenguaje
de programaci√≥n.

Llamar una funci√≥n VB definida por el usuario en un VB script local
1. La lista de funciones se ha convertido en un VB script local.
2. Llame la funci√≥n VB definida por el usuario en la sintaxis del lenguaje de programaci√≥n.
Encontrar√° m√°s informaci√≥n al respecto en "Llamada de scripts de usuario".
3. Si el VB Script de usuario tiene un valor de retorno, asigne una expresi√≥n al VB Script, p. ej.
una variable local.
Nota
En un VB Script local s√≥lo se pueden llamar scripts de usuario del mismo lenguaje de
programaci√≥n.

Consulte tambi√©n
Llamada de funciones de sistema (P√°gina 1435)
Llamada de funciones definidas por el usuario (P√°gina 1436)
Configurar la lista de funciones (P√°gina 1428)

9.4.6

Transferir y devolver valores en VBS

Transferir un valor
Existen las posibilidades siguientes para transferir par√°metros.
‚óè "Call by Value" - ByVal
ByVal transfiere el valor del par√°metro. Si se transfiere como par√°metro una variable, al
ejecutar el script de usuario se transferir√° a √©ste el valor de la variable.
‚óè "Call by Reference" - ByRef
ByRef transfiere la direcci√≥n del par√°metro. Si se transfiere como par√°metro una variable,
al ejecutar el script de usuario se transferir√° a √©ste la direcci√≥n de la variable.
Al llamar scripts de usuario y funciones de sistema en scripts de usuario, el par√°metro se
transfiere como ByRef.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1449

Trabajar con funciones de sistema y Runtime Scripting
9.4 Crear funciones VB definidas por el usuario

Retornar un valor
Los valores de retorno sirven para devolver el resultado de un c√°lculo (p. ej. el valor medio de
dos n√∫meros). Asimismo permiten indicar si una instrucci√≥n se ha ejecutado correctamente.
Por este motivo, las funciones de sistema que ejecutan operaciones con archivos (p.ej. borrar)
tienen tambi√©n un valor de retorno.
Para que un scripts de usuario pueda devolver un valor, se debe ajustar el tipo "Function". En
el script de usuario asigne al valor de retorno el nombre de la funci√≥n:

Para obtener la media de dos n√∫meros, llame el script de usuario Average y transfiera el
resultado p. ej. a la variable HMI AverageValue.
‚óè En una funci√≥n VB definida por el usuario

SmartTags("AverageValue") = Average ("4", "10")

‚óè En la lista de funciones

El valor de la variable HMI AverageValue puede mostrarse en un campo E/S.

Consulte tambi√©n
Crear una funci√≥n VB definida por el usuario (P√°gina 1445)
Ejemplo: convertir Fahrenheit a Celsius (P√°gina 1490)
Ejemplo: convertir pulgadas a metros (P√°gina 1492)

1450

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.5 Crear C Scripts de usuario

9.5

Crear C Scripts de usuario

9.5.1

Acceso a objetos con C

Introducci√≥n
Para acceder a las propiedades de objetos existen las funciones de sistema siguientes:
‚óè "GetProp": Las funciones de sistema que empiezan con "GetProp", leen un valor.
‚óè "SetProp": Las funciones de sistema que empiezan con "SetProp", escriben un valor.
Para cada tipo de datos existe una funci√≥n de sistema independiente con GetProp y SetProp.

Direccionar una propiedad de objeto
Durante la asignaci√≥n de par√°metros, se puede abrir con <Ctrl+J> la lista de objetos, en la que
se pueden seleccionar los objetos y propiedades disponibles. La comprobaci√≥n de sintaxis
verifica la plausibilidad de los tipos de datos de los par√°metros transferidos.

Escribir propiedades del objeto
El siguiente ejemplo muestra c√≥mo se desplaza un c√≠rculo al nivel "4":
SetPropLong("Screen_1", "Circle_1", "Layer", 4);

Consulte tambi√©n
Ejemplo para acceder a objetos en el editor Im√°genes (P√°gina 1516)

9.5.2

Crear C Header

Introducci√≥n
Utilice el archivo Header "GlobalDefinitions.h" para definir funciones, variables y constantes
que podr√° utilizar en todos los C scripts locales y funciones C definidas por el usuario. De este
modo se reduce el volumen de los scripts C locales y las funciones C definidas por el usuario
y se evitan redundancias. Las modificaciones se efect√∫an de modo centralizado en el archivo
Header.
Una vez definidas en el proyecto, las funciones C definidas por el usuario est√°n
autom√°ticamente disponibles. No es necesario definir estas funciones C en el archivo
"GlobalDefinitions.h".
Las librer√≠as C "Math" se referencian por defecto.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1451

Trabajar con funciones de sistema y Runtime Scripting
9.5 Crear C Scripts de usuario
Adem√°s es posible:
‚óè Crear archivos C Header adicionales.
‚óè Integrar archivos C Header externos.

Crear un archivo C Header adicional
1. En la navegaci√≥n del proyecto, haga doble clic en "Agregar C Header nuevo" en "Scripts > C
Header".
2. Introduzca un "Nombre" para el C Header en "Propiedades > General > General" de la
ventana de inspecci√≥n.
3. Inserte en el √°rea de trabajo las declaraciones de variables y constantes necesarias.

Utilizar un archivo C Header en una funci√≥n C
1. Para usar las declaraciones del archivo C Header en una funci√≥n C, inserte el C Header en
el √°rea global de la funci√≥n C. El C Header se integra con una instrucci√≥n #include. Para
evitar errores al acceder a variables, los archivos C Header no deben leerse varias veces.
La siguiente construcci√≥n, p. ej., ayuda a evitar la lectura m√∫ltiple de archivos Header.
#ifndef _myHeader_h
#define _myHeader_h
#include "myheader.h"
#endif

Definir la ruta Include para archivos C Header externos
Para utilizar archivos C Header externos, debe definirse la ruta Include. Proceda del siguiente
modo:
1. Seleccione el panel de operador deseado.
2. Elija el comando de men√∫ "Opciones > Configuraci√≥n".
3. En la navegaci√≥n del √°rea, seleccione la ruta para el C Header adicional en "Visualizaci√≥n >
Runtime Scripting".
4. Cierre WinCC y vuelva a abrirlo.
5. En el men√∫ contextual del panel de operador, elija el comando "Compilar > Software
(compilar todo)".
Nota
Copiar un proyecto en el que se utiliza un archivo C Header externo
La ruta del archivo Header externo no se guarda en el proyecto y solo es v√°lida en el equipo
en el que se ha definido. Si copia este proyecto en otro equipo, debe redefinir la ruta Include
para archivos C Header externos en el proyecto copiado.

1452

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.5 Crear C Scripts de usuario

9.5.3

Usar variables globales C

Definici√≥n de variables globales C
Las variables globales C se definen insertando la l√≠nea de definici√≥n antes del nombre de una
funci√≥n:

int global_a; //The tag global_a is defined as integer
void myfunction()
{
//insert the code starting here
}

Usar variables globales C
Las variables globales C se utilizan en funciones C definidas por el usuario o en scripts en C
locales declarando como externas las variables C del archivo Header "GlobalDefinitions.h":
GlobalDefinitions.h
extern int global_a;
Funci√≥n C definida por el usuario
// Insert the header starting here
#include "GlobalDefinitions.h"
void myFunction()
{
//insert the code starting here
printf ("C2: %i\r\n", ++ global_a);
}

De este modo se le comunica al compilador que no ha de crear la variable global_a por s√≠
mismo, sino que se crear√° en runtime en otro lugar.
Si se modifica entonces el valor de la variable global_a, el valor modificado estar√° disponible
en todas las funciones C definidas por el usuario y en los scripts en C locales.
Tambi√©n puede declarar variables C globales directamente dentro de una funci√≥n. Para mayor
claridad y para evitar definiciones dobles se recomienda, no obstante, declarar las variables
globales C s√≥lo en un lugar.
Nota
Cada funci√≥n definida por el usuario y las variables C globales definidas con ella dispone de un
espacio m√°ximo de memoria de 64 Kbytes.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1453

Trabajar con funciones de sistema y Runtime Scripting
9.5 Crear C Scripts de usuario

√Åmbito de validez
Cada variable declarada en GlobalDefinitions.h como variable externa se conoce en todas las
funciones C definidas por el usuario y en los scripts en C locales en runtime. Dicha variable se
crea al iniciar el runtime, aun cuando no se haya llamado la propia funci√≥n definida por
elusuario.
Nota
En WinCC ServiceMode no se pueden intercambiar las variables C globales entre las
funciones C definidas por el usuario en el planificador de tareas y las funciones definidas por
el usuario en el editor de im√°genes.
Si desea direccionar la variable por medio del WebNavigator, debe llamar a la funci√≥n C con
las variables C declaradas globalmente.

9.5.4

Llamar funciones de DLLs en C Scripts de usuario

Introducci√≥n
En los C Scripts de usuario pueden usarse funciones procedentes de DLLs. Con esto se
aprovecha la funcionalidad de las DLL existentes y se evitan redundancias.
Nota
DLL de Release y Debug
WinCC se suministra como versi√≥n Release y, por lo tanto, utiliza las versiones Release de las
DLL del sistema. Si se utilizan DLL propias en la versi√≥n Debug, puede cargarse
adicionalmente la DLL Release. Para evitar sobrecargar el sistema, cuando utilice DLL propias
emplee siempre la versi√≥n Release de la DLL.

Requisitos
La DLL se encuentra en la carpeta "..\Common Files\Siemens\bin" de WinCC o en una carpeta
definida a tal efecto en la variable de sistema PATH. Esta variable se define mediante las
propiedades de sistema del sistema operativo.

Procedimiento
Para llamar funciones desde DLL, haga lo siguiente:
1. Abra el C Script de usuario en el que desea llamar funciones desde una DLL.
2. Agregue al inicio del C Script de usuario el siguiente c√≥digo:

1454

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.5 Crear C Scripts de usuario

#pragma code("<Name>.dll")
//Declare functions stored in
<Return value> <Function name
<Return value> <Function name
...
<Return value> <Function name
#pragma code

DLL:
1>(...);
2>(...);
n>(...);

Resultado
Las funciones <Nombre de funci√≥n 1> ... <Nombre de funci√≥n n> de <Name.dll> est√°n
declaradas. Pueden llamarse las funciones en el C Script de usuario.

Ejemplo
El siguiente ejemplo muestra c√≥mo integrar el archivo "kernel32.dll" y llamar la funci√≥n
"GetLocalTime":

#pragma code("kernel32.dll")
VOID GetLocalTime(LPSYSTEMTIME lpSystemTime);
#pragma code()
SYSTEMTIME st;
GetLocalTime(&st);

9.5.5

Establecer p√°gina de c√≥digos para funci√≥n C

Introducci√≥n
Puede utilizar el proyecto WinCC en varios idiomas. Defina para cada script en C la p√°gina de
c√≥digos del idioma que se utilizar√° para la traducci√≥n. La p√°gina de c√≥digos afecta a la
visualizaci√≥n de todos los textos que se mostrar√°n en runtime en el script en C.
Al crear una funci√≥n C puede optar por la configuraci√≥n del panel de operador o por uno de los
idiomas de runtime configurados.
La configuraci√≥n de runtime del panel de operador ofrece las siguientes opciones:
‚óè Idioma de sistema operativo para programas no Unicode
La funci√≥n C se traduce al ingl√©s en el ES (sistema de ingenier√≠a).
Los textos en runtime se visualizan en la p√°gina de c√≥digos de este idioma.
‚óè Idioma de WinCC Runtime configurado actualmente
La funci√≥n C se traduce al ingl√©s en el ES.
Los textos en runtime se visualizan en la p√°gina de c√≥digos de este idioma.
‚óè Idioma de runtime configurado
La funci√≥n C se traduce a este idioma en el ES.
Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1455

Trabajar con funciones de sistema y Runtime Scripting
9.5 Crear C Scripts de usuario

Requisitos
‚óè En el editor "Idiomas del proyecto" est√°n activados los idiomas deseados.
‚óè En el editor "Idioma y fuente" est√°n activados los idiomas de runtime deseados.

Selecci√≥n de la p√°gina de c√≥digos para el panel de operador
1. Haga doble clic en "Configuraci√≥n de runtime" en el √°rbol del proyecto.
2. Haga clic en "Idioma y fuente".
3. En "Configuraci√≥n de idioma para script > Idioma de scripts C con "Utilizar la configuraci√≥n
del dispositivo'" ajuste la ventana de selecci√≥n mediante
:
‚Äì Selecci√≥n de todos los idiomas de runtime
‚Äì Selecci√≥n de las dem√°s opciones
4. Seleccione la p√°gina de c√≥digos deseada

Resultado
Si en runtime se muestran textos mediante una funci√≥n en C, se utiliza la p√°gina de c√≥digos
configurada para el script.

9.5.6

Crear una funci√≥n C definida por el usuario

Introducci√≥n
Al crear una funci√≥n C definida por el usuario, debe definir los ajustes indicados a
continuaci√≥n:
‚óè El nombre con el que se debe llamar la funci√≥n en C definida por el usuario.
‚óè El tipo de funci√≥n en C definida por el usuario.
‚óè Los par√°metros que se transfieren a la funci√≥n en C definida por el usuario en Runtime.
Nota
Cuando se modifican los par√°metros o el tipo de funci√≥n, el cambio se marca en color en
el lugar en que se realiza como, p. ej., en la lista de funciones.
‚óè La p√°gina de c√≥digos para la funci√≥n C.
Utilice √∫nicamente los caracteres siguientes para el nombre:
‚óè de "A" a "Z"
‚óè de "a" a "z"

1456

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.5 Crear C Scripts de usuario
‚óè de "0" a "9"
‚óè "_" como separador
Nota
En los nombres no se diferencia entre may√∫sculas y min√∫sculas. No se pueden crear dos
funciones en C definidas por el usuario con el mismo nombre pero diferente escritura.
Nota
Nombres de variable no permitidos
Los siguientes nombres ya est√°n asignados en runtime al tipo de datos "char*", por lo que
no pueden utilizarse como variables internas en C-Scripting:
‚óè "Object"
‚óè "Property"
‚óè "Tag"
‚óè "Picture"

Procedimiento
Para crear una funci√≥n en C definida por el usuario nueva, proceda del siguiente modo:
1. Abra "Scripts" en el √°rbol del proyecto.
2. En la navegaci√≥n del proyecto, haga doble clic en "Agregar funci√≥n C nueva" bajo "C
Scripts".

La funci√≥n en C definida por el usuario se crear√° como nueva ficha en el √°rea de trabajo.
En la ventana de inspecci√≥n se abre la m√°scara para introducir los ajustes de configuraci√≥n
de la funci√≥n.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1457

Trabajar con funciones de sistema y Runtime Scripting
9.5 Crear C Scripts de usuario
3. Elija la configuraci√≥n de idioma deseada en "P√°gina de c√≥digos".

4. En la ventana de inspecci√≥n configure la funci√≥n en "Propiedades > General > General".
5. Introduzca un "Nombre" explicativo para la funci√≥n en C definida por el usuario.
Seleccione el "Tipo" de la funci√≥n en C definida por el usuario. Encontrar√° m√°s informaci√≥n
al respecto en "Transferir y devolver valores en C".
‚Äì Void: la funci√≥n no posee valor de retorno.
‚Äì Variable: el valor de retorno se devuelve como valor de variable.
‚Äì Puntero: el valor de retorno apunta a la direcci√≥n de la variable.
6. Para a√±adir par√°metros, haga doble clic en la lista "Par√°metros" "<Agregar>". Introduzca el
nombre del par√°metro. Encontrar√° m√°s informaci√≥n al respecto en "Transferir y devolver
valores en C".
‚Äì La variable transfiere el valor del par√°metro.
‚Äì El puntero transfiere la direcci√≥n del par√°metro.
7. Escriba el c√≥digo en el √°rea de trabajo.

Resultado
La funci√≥n en C definida por el usuario est√° creada. En la barra de t√≠tulo se visualizan el tipo,
el nombre y los par√°metros de funci√≥n.
El principio y el final se insertan autom√°ticamente al crear la funci√≥n definida por el usuario.
Al proteger funciones en C definidas por el usuario con una contrase√±a, se guardan en el
proyecto de forma cifrada. Encontrar√° m√°s informaci√≥n al respecto en "Protecci√≥n de
funciones definidas por el usuario (P√°gina 1462)".
La figura siguiente muestra una funci√≥n en C definida por el usuario que convierte la
temperatura de "Fahrenheit" a "grados cent√≠grados":

1458

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.5 Crear C Scripts de usuario

Consulte tambi√©n
Editor "Scripts" (P√°gina 1432)
Protecci√≥n de funciones definidas por el usuario (P√°gina 1462)

9.5.7

Cambiar el nombre de una funci√≥n C definida por el usuario

Cambiar el nombre de un C Script de usuario en el √°rbol del proyecto
Para cambiar el nombre de un C Script de usuario en el √°rbol del proyecto, proceda del
siguiente modo:
1. Seleccione el C Script de usuario en el √°rbol del proyecto.
2. En el men√∫ contextual del C Script de usuario, seleccione el comando "Cambiar nombre
(F2)".
3. Introduzca un nombre nuevo para el C Script de usuario.

Cambiar el nombre del C Script de usuario en la ventana de inspecci√≥n
Para cambiar el nombre de un C Script de usuario en la ventana de inspecci√≥n, proceda del
siguiente modo:
1. Abra el C Script de usuario en el editor "Scripts".
2. En la ventana de inspecci√≥n haga clic en "Propiedades > General > General".
3. Introduzca el nuevo nombre de funci√≥n.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1459

Trabajar con funciones de sistema y Runtime Scripting
9.5 Crear C Scripts de usuario

Resultado
Se ha cambiado el nombre del C Script de usuario. Los lugares se adaptan autom√°ticamente.

9.5.8

Ejecutar una funci√≥n C definida por el usuario

Introducci√≥n
En WinCC existen las siguientes posibilidades para ejecutar una funci√≥n C definida por el
usuario:
‚óè Lista de funciones
‚óè Funci√≥n C definida por el usuario
‚óè C script local

Llamar una funci√≥n C definida por el usuario en una lista de funciones
1. El C Script de usuario se agrega a la lista de funciones igual que una funci√≥n de sistema.
Encontrar√° las funciones C definidas por el usuario en la lista de selecci√≥n, apartado
"Funciones C".
Encontrar√° m√°s informaci√≥n en "Configurar la lista de funciones".
2. Transfiera a los par√°metros valores est√°ticos o variables HMI.
3. Si el C Script de usuario posee un valor de retorno, seleccione una variable HMI. El valor
para procesar se transfiere a la variable HMI.
Nota
En una lista de funciones solo pueden utilizarse funciones definidas por el usuario de un
mismo lenguaje de programaci√≥n. Al seleccionar la primera funci√≥n definida por el usuario
se define el lenguaje de programaci√≥n.

Llamar un C Script de usuario en un C Script de usuario
1. Abra el C Script de usuario en el que quiera llamar el C Script de usuario.
2. Llame la funci√≥n C definida por el usuario en la sintaxis del lenguaje de programaci√≥n.
Encontrar√° m√°s informaci√≥n al respecto en "Llamada de scripts de usuario".
3. Si el C Script de usuario tiene un valor de retorno, asigne la funci√≥n a una expresi√≥n, p. ej.
una variable local.
Nota
En un C Script de usuario s√≥lo se pueden llamar scripts de usuario de un mismo lenguaje
de programaci√≥n.

1460

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.5 Crear C Scripts de usuario

Llamar una funci√≥n C definida por el usuario en un C script local
1. La lista de funciones se ha convertido en un C script local.
2. Llame la funci√≥n C definida por el usuario en la sintaxis del lenguaje de programaci√≥n.
Encontrar√° m√°s informaci√≥n al respecto en "Llamada de scripts de usuario".
3. Si el C Script de usuario tiene un valor de retorno, asigne una expresi√≥n al C Script, p. ej.
una variable local.
Nota
En un C Script local s√≥lo se pueden utilizar scripts de usuario del mismo lenguaje de
programaci√≥n.

Consulte tambi√©n
Llamada de funciones de sistema (P√°gina 1435)
Llamada de funciones definidas por el usuario (P√°gina 1436)
Configurar la lista de funciones (P√°gina 1428)

9.5.9

Transferir y devolver valores en C

Transferir un valor
Existen las posibilidades siguientes para transferir par√°metros:
‚óè Variable (Call by value)
Para guardar valores en la variable, se define el nombre de la variable y el tipo de datos. Sin
embargo, esta variable no se transfiere directamente, sino que se crea una copia. Al
ejecutar el C Script de usuario, se transfiere el valor de variable de la copia al C Script de
usuario. Si se modifica el valor de la variable, la modificaci√≥n solo es v√°lida dentro del C
Script de usuario.
‚óè Puntero (Call by reference)
Un puntero es una variable que apunta a la direcci√≥n de una variable. Los punteros se
definen igual que las variables. Adem√°s se a√±ade el car√°cter * en el tipo de datos, p. ej.
Double*. El C Script de usuario accede a la variable a la que apunta el puntero. Si se
modifica el valor de la variable, se escribe en la variable el valor modificado.

Retornar un valor
Un C Script de usuario puede ejecutar instrucciones sencillas y no devolver ning√∫n valor. En
tal caso, el valor de retorno es del tipo de datos "void".
Si se requiere un valor de retorno, el valor puede devolverse como variable o como puntero.
Asimismo permiten indicar si una instrucci√≥n se ha ejecutado correctamente. Por este motivo,
las funciones de sistema que ejecutan operaciones con archivos (p.ej. escribir en un archivo)
tienen tambi√©n un valor de retorno.
Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1461

Trabajar con funciones de sistema y Runtime Scripting
9.6 Protecci√≥n de funciones definidas por el usuario
Para que una funci√≥n C definido por el usuario pueda devolver un valor, es preciso ajustar p. ej.
el tipo "Double". Con la instrucci√≥n return se transfiere el resultado al C Script de usuario.

Para obtener la media de dos n√∫meros, llame el C Script de usuario Average y transfiera el
resultado p. ej. a la variable HMI AverageValue.
‚óè En una funci√≥n C definida por el usuario

SetTagDouble("AverageValue",Average (4, 5));

‚óè En la lista de funciones

El valor de la variable HMI AverageValue puede mostrarse en un campo E/S.

9.6

Protecci√≥n de funciones definidas por el usuario

9.6.1

Establecer la protecci√≥n de know-how

Procedimiento
Para configurar una protecci√≥n de know-how para scripts de usuario, proceda del siguiente
modo:
1. Seleccione el script de usuario sin protecci√≥n de know-how que desea proteger.
2. En el men√∫ "Edici√≥n", elija el comando "Protecci√≥n de know-how".
Se abre el cuadro de di√°logo "Protecci√≥n de know-how".
3. Haga clic en "Definir".
Se abre el cuadro de di√°logo "Definir contrase√±a".
4. Introduzca una contrase√±a en el campo "Nueva".
5. Repita la contrase√±a en el campo "Confirmar".
6. Confirme la entrada con "Aceptar".
7. Cierre el cuadro de di√°logo "Protecci√≥n de know-how" haciendo clic en "Aceptar".

1462

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.6 Protecci√≥n de funciones definidas por el usuario

Resultado
El script de usuario se dota con una protecci√≥n de know-how. Los scripts de usuario con
protecci√≥n de know-how se marcan con un candado en el √°rbol del proyecto. La contrase√±a es
v√°lida para todos los scripts de usuario seleccionados.

9.6.2

Abrir scripts de usuario con protecci√≥n de know-how
Solo es posible abrir varios scripts de usuario con protecci√≥n de know-how en conjunto si se
protegen con la misma contrase√±a.

Procedimiento
Para abrir una funci√≥n de usuario definida por el usuario y con protecci√≥n de know-how,
proceda del siguiente modo:
1. Haga doble clic en el script de usuario que desea abrir.
Se abre el cuadro de di√°logo "Protecci√≥n de acceso".
2. Introduzca la contrase√±a para el script de usuario con protecci√≥n de know-how.
3. Confirme las entradas con "Aceptar".

Resultado
Si se introduce la contrase√±a correcta, se abre el script de usuario con protecci√≥n de knowhow. Sin embargo, la protecci√≥n de know-how no se anula.
Despu√©s de abrir el script de usuario, este se puede editar hasta que se cierre el script de
usuario o el TIA Portal. Cuando se vuelva a abrir el script de usuario, ser√° necesario volver a
introducir la contrase√±a. Si se cierra el cuadro de di√°logo "Protecci√≥n de acceso" con
"Cancelar" o "Cerrar", el script de usuario se abre, pero el c√≥digo no se visualiza. El script de
usuario no se puede editar.

9.6.3

Eliminar protecci√≥n de know-how

Procedimiento
Para eliminar la protecci√≥n de know-how de un script de usuario, proceda del siguiente modo:
1. Seleccione el script de usuario cuya protecci√≥n de know-how desea eliminar.
Nota
Para eliminar simult√°neamente la protecci√≥n de know-how de varios scripts de usuario, los
scripts seleccionados deben tener la misma contrase√±a.
2. En el men√∫ "Edici√≥n", elija el comando "Protecci√≥n de know-how".
Se abre el cuadro de di√°logo "Protecci√≥n de know-how".
3. Desactive la casilla de verificaci√≥n "Ocultar c√≥digo (protecci√≥n de know how)".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1463

Trabajar con funciones de sistema y Runtime Scripting
9.6 Protecci√≥n de funciones definidas por el usuario
4. Introduzca la contrase√±a.
5. Confirme la entrada con "Aceptar".

Resultado
La protecci√≥n de know-how del script de usuario seleccionado se elimina.

9.6.4

Cambiar la contrase√±a

Procedimiento
Para cambiar la contrase√±a, proceda del siguiente modo:
1. Seleccione el script de usuario con protecci√≥n de know-how cuya contrase√±a desea
cambiar.
Nota
Para cambiar simult√°neamente la contrase√±a de varios scripts de usuario, los scripts
seleccionados deben tener la misma contrase√±a.
2. En el men√∫ "Edici√≥n", elija el comando "Protecci√≥n de know-how".
Se abre el cuadro de di√°logo "Protecci√≥n de know-how".
3. Haga clic en el bot√≥n "Cambiar".
4. Introduzca la contrase√±a antigua en el campo "Antigua".
5. Introduzca la contrase√±a nueva en el campo "Nueva".
6. Repita la contrase√±a nueva en el campo "Confirmar".
7. Confirme la entrada con "Aceptar".
8. Cierre el cuadro de di√°logo "Protecci√≥n de know-how" haciendo clic en "Aceptar".

1464

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.7 Creaci√≥n de scripts locales

9.7

Creaci√≥n de scripts locales

9.7.1

Scripts locales

Definici√≥n
Los scripts locales est√°n asociados a un objeto individual, como p. ej. una propiedad de objeto,
y poseen un disparador c√≠clico o ac√≠clico. Un script local se crea directamente en la ubicaci√≥n:
‚óè Planificador de tareas
‚óè Im√°genes
‚Äì Evento (lista de funciones convertida)
‚Äì Propiedad de objeto (lista de propiedades)
‚Äì Modificaci√≥n de propiedad (lista de propiedades)
‚óè Men√∫s y barras de herramientas
‚óè S√≥lo C Script: informes
‚Äì Campo E/S en la propiedad Valor de proceso
Los scripts locales no se muestran en la navegaci√≥n de proyecto y solo est√°n disponibles en
la ubicaci√≥n.

Utilizaci√≥n
Los scripts locales se utilizan para lo siguiente:
‚óè Lista de propiedades (objeto de imagen): Dinamizar una propiedad de objeto
Utilice un script local para dinamizar una propiedad de objeto en runtime mediante su valor
de retorno. Ejemplo: modificar la posici√≥n de un objeto en funci√≥n de varios par√°metros.
‚óè Lista de funciones (objeto de imagen): convertir una lista de funciones en un script local
Convierta una lista de funciones en un script local para configurar instrucciones
condicionales o bucles en un evento.
‚óè Planificador de tareas (tarea): ejecutar un script local de modo c√≠clico o ac√≠clico
Utilice el planificador de tareas para ejecutar un script en momentos determinados.
Los scripts locales no se cargan en la memoria del panel de operador hasta que se utilizan,
p. ej. al cargar una imagen. De este modo, los scripts locales ahorran espacio de memoria en
el panel de operador.

Programaci√≥n
Al crear un script local para una propiedad de objeto, se crea un script local con valor de
retorno. El valor de retorno devuelve el valor correspondiente a la propiedad del objeto.
Al crear un script local para un evento, se crea un script local sin valor de retorno.
Los par√°metros que se transfieren al script local dependen del lenguaje de programaci√≥n
utilizado y de la ubicaci√≥n.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1465

Trabajar con funciones de sistema y Runtime Scripting
9.7 Creaci√≥n de scripts locales
Par√°metros t√≠picos de un VB script local
Item: contiene la referencia de objeto:
‚óè Planificador de tareas (tarea): no se transfiere ning√∫n objeto.
‚óè Men√∫s y barras de herramientas: se transfiere el objeto que dispara el evento.
‚óè Im√°genes (objeto de imagen)
‚Äì Lista de propiedades (objeto de imagen): En las dinamizaciones se transfiere el objeto
de imagen cuya propiedad se dinamiza.
‚Äì Lista de funciones convertida (objeto de imagen): se transfiere el objeto de imagen cuyo
evento se configura.
Para acceder a las propiedades del objeto de imagen transferido, introduzca "item.". Se
listan las propiedades disponibles. Para acceder a otro objeto del modelo de objeto, utilice
ScreenItems.
Encontrar√° informaci√≥n detallada sobre par√°metros de eventos en la referencia.
Par√°metros t√≠picos de un C script local
Char* screenName: contiene el nombre de la imagen que contiene el objeto cuya propiedad se
dinamiza.
Char* objectName: contiene el nombre de objeto cuya propiedad se dinamiza.
Char* propertyName: contiene la propiedad que se dinamiza.
Encontrar√° informaci√≥n detallada sobre par√°metros de eventos en la referencia.

Ejecutar scripts locales
Los scripts locales requieren un disparador. El disparador establece cu√°ndo se ejecuta el
script. El disparador que se utilice depende de la ubicaci√≥n del script local:
‚óè Los scripts locales procedentes de una lista de funciones convertida se ejecutan al
producirse el evento, p. ej. al pulsar.
‚óè A los scripts locales de la lista de propiedades se les asigna autom√°ticamente el disparador.
El disparador puede modificarse, p. ej., convirti√©ndolo en disparador de variable.
‚óè A los scripts locales de una tarea se les asigna el disparador configurado por el ingeniero
programador.

Consulte tambi√©n
Editor "Scripts" (P√°gina 1432)

9.7.2

Editor para scripts locales

Propiedades del editor para scripts locales
El editor para scripts locales no posee una configuraci√≥n propia, sino que "hereda" los ajustes
de "Runtime Scripting".

1466

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.7 Creaci√≥n de scripts locales
Este editor ofrece una funcionalidad similar a la del editor "Scripts". Encontrar√° m√°s
informaci√≥n al respecto en "Editor "Scripts" (P√°gina 1432)".
Las siguientes funcionalidades no est√°n disponibles a trav√©s de la barra de herramientas:
‚óè Listas de selecci√≥n para propiedades y funciones
En el editor para VB Scripts locales existen los s√≠mbolos adicionales siguientes:
‚óè

Muestra la secci√≥n de declaraci√≥n.

‚óè

Oculta la secci√≥n de declaraci√≥n.

En el √°rea de declaraci√≥n se definen las variables VB locales. Encontrar√° m√°s informaci√≥n al
respecto en "Utilizaci√≥n de variables VB (P√°gina 1443)".

Disponibilidad
El editor para scripts locales puede ejecutarse desde los siguientes lugares:
‚óè Planificador de tareas
‚Äì Evento: Ejecutar
‚óè Im√°genes
‚Äì Evento
‚Äì Propiedad de objeto (lista de propiedades)
‚Äì Modificaci√≥n de propiedad (lista de propiedades)
‚óè Men√∫s y barras de herramientas
‚Äì Evento: Hacer clic
‚óè S√≥lo C Script: informes
‚Äì Campo E/S en la propiedad Valor de proceso

Consulte tambi√©n
Editor "Scripts" (P√°gina 1432)
Utilizaci√≥n de variables VB (P√°gina 1443)

9.7.3

Convertir la lista de funciones en un script local

Introducci√≥n
Si convierte una lista de funciones en un script local, puede configurar instrucciones
condicionales o bucles en un evento. Una lista de funciones puede convertirse en un VB Script
local o un C Script local.
Si la lista de funciones contiene una funci√≥n definida por el usuario, la funci√≥n determina el
lenguaje de programaci√≥n.
Si p. ej. contiene una funci√≥n C, la lista de funciones se convierte en un C script local.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1467

Trabajar con funciones de sistema y Runtime Scripting
9.7 Creaci√≥n de scripts locales

Nota
Mensaje de error en la ventana de diagn√≥stico Global Script
Si en una funci√≥n de sistema SetTag que ha sido convertida a un script en C se utiliza una
variable del tipo WString, al ejecutar la funci√≥n se emitir√° un mensaje de error en la ventana de
diagn√≥stico del Global Script . El mensaje no repercute en la ejecuci√≥n de la funci√≥n.
Las siguientes funciones SetTag se ven afectadas:
‚óè SetTagWithOperatorEvent
‚óè SetTagIndirect
‚óè SetTagByTagIndirect
‚óè SetTagIndirectByTagIndirect
‚óè SetTagByProperty
‚óè SetTagIndirectByProperty

Requisitos
La lista de funciones est√° abierta.

Procedimiento
Para convertir una lista de funciones en un script local, proceda del siguiente modo:
1. Seleccione el evento cuya lista de funciones desee convertir en un script.
2. Si es necesario, configure funciones del sistema en el evento.
3. Para convertir una lista de funciones en un script local, haga clic en

o

.

4. Introduzca el c√≥digo del programa.
Tambi√©n puede usar las opciones de men√∫ contextual "Convertir a VB Script" o "Convertir a C
Script".

Resultado
Cuando se produzca el evento, el script local se procesar√° autom√°ticamente.

Borrar script local
Para borrar un script local, proceda del siguiente modo:
1. Seleccione el evento con el script local.
2. Elija el comando "Lista de funciones" del men√∫ contextual del evento.
El script local se borrar√°.

1468

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar

9.7.4

Dinamizar propiedad de objeto con script local

Introducci√≥n
Con un script local se dinamiza una propiedad de objeto en runtime por medio del valor de
retorno del script.

Requisitos
‚óè El objeto con la propiedad que debe dinamizarse est√° seleccionado.
‚óè La ventana de inspecci√≥n est√° abierta.

Procedimiento
1. Haga clic en

en la ventana de inspecci√≥n.

2. Seleccione la propiedad de objeto que debe dinamizarse.
3. Seleccione la entrada "VB Script" o "C Script" en la columna "Dinamizaci√≥n".
Se abre un cuadro de di√°logo.
4. Introduzca el c√≥digo del programa.
5. Para cambiar el disparador, haga clic en la barra de herramientas en "

".

Resultado
En runtime, la propiedad de objeto cambia de acuerdo con la configuraci√≥n de la lista de
propiedades.

Borrar una dinamizaci√≥n
1. Seleccione la propiedad de objeto dinamizada en la lista de propiedades.
2. Seleccione la entrada "Ninguna" en la columna "Dinamizaci√≥n".

9.8

Depurar

9.8.1

Depurar funciones de VB definidas por el usuario

Descripci√≥n general
Para probar en runtime una funci√≥n de VB definida por el usuario puede utilizar p. ej. el
depurador de "Microsoft Visual Studio 2008".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1469

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar
El depurador se suministra con el programa de instalaci√≥n de WinCC. Si ya hay instalada una
versi√≥n diferente de Visual Studio, p. ej. Microsoft Visual Studio 2010, utilice el depurador de
esa versi√≥n.

Depurador para WinCC Runtime Professional
El depurador Microsoft Visual Studio 2008 Shell (Integrated Mode) se encuentra en el DVD de
WinCC Runtime Professional, en el directorio Support.

Depurador para WinCC Runtime Advanced
El depurador Microsoft Visual Studio 2008 Shell (Integrated Mode) puede descargarse
gratuitamente de la p√°gina de inicio de Microsoft. Utilice √∫nicamente la variante en ingl√©s.
Para depurar se recomienda en principio el uso de las versiones actuales de Microsoft.

Instalar un depurador para WinCC
Procedimiento
1. Inicie el programa de instalaci√≥n de Microsoft Visual Studio 2008 Shell (Integrated Mode)
2. Siga las indicaciones y acepte los ajustes est√°ndar.
Se instala el siguiente programa: Microsoft Visual Studio 2008 Shell (Integrated Mode) ENU
3. Al iniciar el depurador por primera vez, se abre el cuadro de di√°logo "Visual Studio Just-InTime Debugger".
Seleccione la entrada "New instance of Visual Studio 2008".
Para definir "Visual Studio 2008" como depurador est√°ndar, active el ajuste "Set the
currently selected debugger as the default."

1470

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar
Microsoft Visual Studio 2008 Debugger

9.8.2

Conceptos b√°sicos de la limpieza con debugger

Introducci√≥n
Con un depurador o debugger puede comprobar p. ej., si se han transferido los valores
correctos a las variables y si se aplican correctamente las condiciones de interrupci√≥n. En el
depurador dispone de las siguientes posibilidades:
‚óè examinar el c√≥digo fuente de la funci√≥n
‚óè controlar el procesamiento de las funciones paso a paso
‚óè ver y modificar variables y valores de propiedades
‚óè ver y controlar c√≥mo se desarrolla la funci√≥n

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1471

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar
El depurador sirve √∫nicamente para encontrar errores en la funci√≥n VB definida por el usuario.
Para ello se utilizan, por ejemplo, puntos de parada o se ejecuta paso a paso la funci√≥n VB
definida por el usuario. Encontrar√° m√°s informaci√≥n al respecto en la documentaci√≥n del
depurador utilizado. Para corregir errores, hay que ir al editor "Scripts" de WinCC. Tras
compilar y cargar nuevamente se analiza nuevamente la funci√≥n VB definida por el usuario con
el depurador.
Nota
Debe observarse que en la visualizaci√≥n del depurador su c√≥digo est√° protegido contra
escritura. No es posible modificar el c√≥digo directamente con el depurador, solamente se
puede verificar las modificaciones necesarias.

Diferencia en VBScript para Windows y Windows CE
El depurador comprueba la sintaxis de VBScript para Windows. Si la funci√≥n contiene una
funci√≥n VBScript para Windows CE, aparecer√° un mensaje de error al respecto. Algunas de las
funciones VBScript son diferentes, como por ejemplo CreateObject.

Depuraci√≥n de VB Script
Con el objeto "Debug" se emiten textos definidos por el usuario en un depurador. El objeto
posee los m√©todos "Write" y "WriteLine". Encontrar√° m√°s informaci√≥n sobre el objeto "Debug"
en Internet (https://msdn.microsoft.com/en-us/library/wk3y866c(v=vs.84).aspx).
Con el objeto "Err" se reacciona a mensajes de error generados por otro objeto. El objeto posee
los m√©todos "Raise" y "Clear". Encontrar√° m√°s informaci√≥n sobre el objeto "Err" en Internet
(https://msdn.microsoft.com/en-us/library/sbf5ze0e(v=vs.84).aspx).

1472

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar

Tipos de errores
Durante la limpieza con el depurador se distinguen los siguientes tipos de errores:
‚óè Error de sintaxis
Los errores de sintaxis se producen p. ej. cuando se escribe una palabra clave
incorrectamente o se deja abierto un par√©ntesis. Si utiliza la comprobaci√≥n de sintaxis de
WinCC, podr√° excluir errores de sintaxis antes de probar las funciones en runtime.
Con la comprobaci√≥n de sintaxis en WinCC se aplica un analizador sint√°ctico sin ejecutar
la funci√≥n. La funci√≥n se analiza imediatamente antes de si ejecuci√≥n en runtime. Se
analizan todas sus partes, incluso aquellas que se ejecuten p. ej. despu√©s de producirse
una acci√≥n determinada en otro momento.
Si una funci√≥n contiene errores de sintaxis no es posible iniciar el runtime.
Nota
En Runtime Professional se puede establecer en "Configuraci√≥n de runtime > General >
Opciones para scripts" que se inicie el runtime aunque la funci√≥n contenga errores de
sintaxis.
‚óè Error de ejecuci√≥n
Un error en tiempo de ejecuci√≥n se produce cuando debe ejecutarse un comando no v√°lido
o incorrecto, p. ej. porque no se ha definido una variable. Para detectar estos errores en
tiempo de ejecuci√≥n, puede utilizarse la instrucci√≥n "On Error Resume Next" en VBScript.
Esta instrucci√≥n activa la instrucci√≥n siguiente a la que provoc√≥ el error de ejecuci√≥n. En la
l√≠nea siguiente puede comprobarse el c√≥digo de error con el objeto Err. Para desactivar el
tratamiento de errores en tiempo de ejecuci√≥n en el script, utilice la instrucci√≥n "On Error
Goto 0".
‚óè Errores l√≥gicos
El depurador es muy √∫til para limpiar errores l√≥gicos. Se produce un error l√≥gico si no se
produce el evento esperado, p.ej. porque se verific√≥ mal una condici√≥n. Para corregir
errores l√≥gicos, ejecute la funci√≥n paso a paso para as√≠ poder identificar la parte del script
que no funciona.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1473

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar

Ejemplo del tratamiento de errores
Sub OnClick(ByVal Item)
'VBS27
Dim objScreenItem
'
'Activation of errorhandling:
On Error Resume Next
For Each objScreenItem In ScreenItems
If "HMIRectangle" = objScreenItem.Type Then
'
'=== Property "RoundCornerHeight" only available for RoundRectangle
objScreenItem.RoundCornerHeight = objScreenItem.RoundCornerHeight * 2
If 0 <> Err.Number Then
HMIRuntime.Trace objScreenItem.Name & ": no RoundedRectangle" & vbCrLf
'
'Delete error message
Err.Clear
End If
End If
Next
On Error Goto 0 'Deactivation of errorhandling
End Sub

Procedimiento b√°sico
Si se produce un error y el depurador ya est√° abierto, se muestra el script en una ventana y
protegida contra escritura. Puede desplazarse por el documento script, colocar puntos de
parada, ejecutar nuevamente el script con Runtime y repasar paso a paso los scripts.
No es posible editar el c√≥digo fuente directamente en el depurador. Si ha encontrado un error,
puede corregirlo en la funci√≥n en WinCC, cargar la imagen nuevamente y actualizarla en el
depurador.

Cambio de imagen durante la limpieza
Si se cambia la imagen durante la limpieza con el depurador se mantendr√° abierto el
documento script de la imagen "antigua"; sin embargo, no ser√° ya v√°lido. Es posible que se
muestran errores no v√°lidos ya que los objetos iniciados no estar√°n disponibles despu√©s de un
cambio de imagen.

1474

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar

9.8.3

Activar el depurador

Principio
Existen varias posibilidades de activar el depurador:
‚óè Inicio autom√°tico del depurador al producirse un error en runtime.
‚óè Visualizar un cuadro de error en runtime que permite iniciar el depurador.
‚óè Iniciar el depurador desde el men√∫ Inicio y abrir un script de runtime que se est√° ejecutando.

Conectar Visual Studio al runtime
1. Inicie el runtime.
2. Abra "Microsoft Visual Studio 2008".
3. En el men√∫ "File > New" haga clic en "File".
4. Seleccione "Windows Script Host" y haga clic en "Open".
5. En el men√∫ "Debug" haga clic en "Attach to Process".
6. Seleccione "
HmiRTm.exe". para un Panel o WinCC Runtime Advanced
PdlRt.exe: para WinCC Runtime Professional
7. Haga doble clic en un de los archivos de script en "Solution Explorer".

Visual Studio como depurador Just-In-Time
1. Abra "Microsoft Visual Studio 2008".
2. En el men√∫ "Tools" haga clic en "Options".
3. Haga clic en el √°rbol sobre "Debugging" y "Just-In-Time".
4. En "Just-In-Time Debugging" active la opci√≥n "Script".
5. Cierre Visual Studio.
6. Inicie la simulaci√≥n con el comando de men√∫ "Online" > "Simulaci√≥n" > "Con depurador de
scripts".

Finalizar el depurador
Puede finalizar el depurador sin tener que cerrar WinCC Runtime.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1475

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar

9.8.4

Dise√±o de los archivos de VBScript

Estructura de los archivos VBScript
Todas las funciones definidas por el usuario que se configuren en un dispositivo figurar√°n en
un archivo de script.

9.8.5

Dise√±o de los archivos de VBScript

Principio
Para posibilitar la ejecuci√≥n simult√°nea de archivos VBScript c√≠clicos y activados por eventos
en Runtime Professional, durante la ejecuci√≥n se separan estrictamente los archivos VBScript
activados por eventos de los archivos VBScript c√≠clicos/activados por variables. As√≠, un script
local c√≠clico no puede impedir la ejecuci√≥n de un script de usuario que se activa al pulsar un
bot√≥n.
Para garantizar esto, los scripts locales activados por eventos y los scripts locales c√≠clicos y
activados por variables se guardan en archvios VBScript separados. Si se ha definido una
parte global de im√°genes en archivos VBScript en el editor "Im√°genes", esta parte se copiar√°
a ambos archivos VBScript.
Nota
Los dos archivos VBScript se tratan por separado, por lo que no tienen ning√∫n rango de datos
com√∫n. Por lo tanto, no se sincronizan las variables globales de los dos archivos VBScript. Si
se debe hacer una sincronizaci√≥n, real√≠cela por medio del objeto DataSet o por medio de
variables HMI internas.

Estructura de los archivos VBScript
Al limpiar archivos VBScript con el depurador se abren siempre los archivos VBScript de los
diferentes sistemas runtime.
Esto significa para el sistema runtime gr√°fico que obtendr√° dos archivos por cada imagen:
‚óè <Nombre de imagen>.pdl_events: Contiene los archivos VBScript controlados por eventos
‚óè <Nombre de imagen>.pdl_triggers: Contiene los archivos VBScript c√≠clicos y controlados
por variables.

1476

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar
A continuaci√≥n se explica la estructura de los archivos VBScript en el sistema runtime gr√°fico:
‚óè Contenidos del archivo VBScript <nombre de imagen>.pdl_events
C√≥digo general
Scripts controlados por eventos
‚óè Contenidos del archivo VBScript <nombre de imagen>.pdl_triggers
C√≥digo general
Scripts c√≠clicos o disparados por variables
Nota
Tenga en cuenta que los scripts locales y los scripts de usuario del sistema runtime gr√°fico
no se muestran con los nombres en el archivo VBScript en el que se guardaron en WinCC.

9.8.6

Nombres en el depurador

Nombres en el depurador
Los nombres de scripts de usuario en los archivos VBScript se diferencian en el depurador de
los nombres con los que se guardaron en WinCC.
Los nombres de funciones y scripts en los archivos de scripts se componen de acuerdo con las
reglas siguientes:
Tipo de acci√≥n

Nombre en el archivo script

Scripts c√≠clicos o disparados por variables en una
propiedad

Nombre del objeto_Nombre de propiedad_Dispa‚Äê
rador

Eventos de rat√≥n

ObjektName_OnClick
ObjektName_OnLButtonDown
ObjektName_OnLButtonUp
ObjektName_OnRButtonDown
ObjektName_OnRButtonUp

Eventos del teclado

ObjektName_OnKeyDown
ObjektName_OnKeyUp

Eventos de objetos

ObjektName_OnObjectChanged
ObjektName_OnSetFocus

Eventos en propiedades

ObjektName_PropertyName_OnPropertyChanged
ObjektName_PropertyName_OnPropertyState‚Äê
Changed

Eventos de im√°genes

Document_OnOpen
Document_OnClosed

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1477

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar

Longitud permitida para nombres de scripts
Los nombres de scripts en los archivos de scripts pueden tener un m√°xima de 255 caracteres.
Cada car√°cter especial utilizado en el nombre de un objeto es sustituido por cinco caracteres.
Detr√°s de una X que est√° en primer lugar se visualiza el car√°cter especial en un c√≥digo
hexadecimal de cuatro d√≠gitos. Si en un clic de rat√≥n se configura, p.ej., una acci√≥n asociada
a un bot√≥n con el nombre "P√∫lsame", en el archivo de scripts aparece el script como
"PXFFFClsame_OnClick".
Si este nombre compuesto del objeto es demasiado largo, se muestra un mensaje de error
durante la verificaci√≥n de sintaxis en WinCC. Debido a esta limitaci√≥n no es posible elegir un
nombre sin l√≠mite de caracteres durante la configuraci√≥n de los objetos gr√°ficos.
Nota
Para determinar el nombre de un objeto en runtime, pulse <Ctrl+Alt+May√∫s> y desplace el
rat√≥n sobre el objeto correspondiente. El nombre de la imagen y del objeto se muestran en un
tooltip.

9.8.7

Puntos de parada

Introducci√≥n
Para parar el procesamiento del archivo VBScript en determinadas posiciones e ir delimitando
los errores l√≥gicos paso a paso, inserte puntos de parada.
Cuando se actualiza un archivo VBScript en el depurador, se pierden todos los puntos de
parada.
Nota
Si en Runtime Professional posiciona un punto de parada en el archivo de script"
<NombreDeImagen>.pdl_trigger", se detendr√°n todos los procedimientos activados por
disparador.
Si en Runtime Professional posiciona un punto de parada en el archivo de script"
<NombreDeImagen>.pdl_event", se detendr√°n todos los procedimientos activados por evento.

Requisitos
‚óè Runtime est√° activado.
‚óè La imagen que se quiere depurar est√° activa.

1478

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar

Posicionar un punto de parada
1. Inicie el depurador y seleccione el archivo VBScript.
Si se ha seleccionado la activaci√≥n autom√°tica del depurador en WinCC, se iniciar√° el
depurador en cuanto se ejecute un script con errores.
2. Coloque el cursor en la l√≠nea en la que quiere posicionar un punto de parada.
3. En el men√∫ "Debug" elija el comando "Toggle Breakpoint".
La siguiente l√≠nea se marca con un punto rojo.
4. Cambie a WinCC Runtime y ejecute el archivo VBScript que quiere depurar.
El depurador se detiene en el primer punto de parada. La l√≠nea actual se marca con un
fondo amarillo.
Ahora se repasa el c√≥digo del programa paso a paso.

Borrar un punto de parada
1. Sit√∫e el cursor en una l√≠nea con un punto de parada.
2. En el men√∫ "Debug" elija el comando "Toggle Breakpoint".
Para borrar todos los puntos de parada de un archivo, vaya al men√∫ "Debug" y elija el comando
"Delete All Breakpoints".

9.8.8

Trabajar paso a paso

Introducci√≥n
Utilice el depurador para ejecutar paso a paso los archivos VBScript (funci√≥n definida por el
usuario o script local) y as√≠ delimitar sistem√°ticamente los errores l√≥gicos. Compruebe los
efectos de cada l√≠nea de c√≥digo en runtime.

Requisitos
‚óè Runtime est√° activado.
‚óè La imagen que se quiere depurar est√° activa.

Modo principal de proceder
1. Inicie el depurador y seleccione el archivo VBScript.
Si se ha seleccionado la activaci√≥n autom√°tica del depurador en WinCC, se iniciar√° el
depurador en cuanto se ejecute un script con errores.
2. Coloque un punto de parada en el archivo VBScript. Normalmente se colocan puntos de
parada antes de aquellas l√≠neas de c√≥digo donde supuestamente se encuentran errores.
3. Cambie a WinCC Runtime y dispare un evento que inicie los archivos VBScript.
El depurador se detiene en el primer punto de parada y marca la l√≠nea actual.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1479

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar
4. Para seguir trabajando paso a paso, elija uno de los siguientes comandos de men√∫:
‚Äì "Debug > Step Over": Salta a la pr√≥xima l√≠nea del c√≥digo. Si se llama una funci√≥n
definida por el usuario en esta l√≠nea, se omite la funci√≥n llamada. La funci√≥n definida por
el usuario se ejecuta pero el depurador no le conduce por cada una de las l√≠neas de la
funci√≥n. En su lugar, pasa a la primera l√≠nea despu√©s de ejecutarse la funci√≥n.
‚Äì "Debug > Step Into": Salta a la pr√≥xima l√≠nea del c√≥digo. Si se llama una funci√≥n definida
por el usuario en esta l√≠nea, se pasa a esta funci√≥n. A continuaci√≥n, la funci√≥n iniciada
se ejecuta gradualmente.
‚Äì Para interrumpir la ejecuci√≥n por pasos de una funci√≥n llamada, elija el comando de
men√∫ "Debug > Step Out". Se ejecuta la funci√≥n hasta el final. El depurador salta a la
primera l√≠nea despu√©s de ejecutarse la funci√≥n.
5. Vaya paso a paso hasta el final del documento o elija el comando de men√∫ "Debug > Run"
para procesar todo el archivo VBScript hasta el final.

9.8.9

Ejecutar comandos

Introducci√≥n
En la ventana "Command Window" se introducen comandos que se ejecutan directamente.
Aqu√≠ puede:
‚óè Iniciar m√©todos
‚óè Iniciar procedimientos
‚óè Modificar propiedades de objetos
Generalmente, en la ventana "Command Window" se ejecutan todos los comandos que
pueden ejecutarse tambi√©n en un VB Script.
Nota
Para determinar el nombre de un objeto WinCC en WinCC Runtime Professional, pulse <Ctrl
+Alt+May√∫s> y mueva el rat√≥n sobre el objeto correspondiente. El nombre de la imagen y del
objeto se muestran en la informaci√≥n sobre herramientas (tooltip).

Requisitos
‚óè El archivo VBScript se ejecuta en runtime.
‚óè El depurador est√° abierto.

Procedimiento
1. Posicione como m√≠nimo un punto de parada en el archivo VBScript.
2. Cambie a WinCC Runtime y realice una acci√≥n que ejecute el archivo VBScript.
El depurador se detiene en el primer punto de parada.

1480

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar
3. Seleccione "View > Other Windows > Command Window". Se abre la "Command Window".
4. Introduzca el comando deseado y confirme con <Return>.
Nota
Si se introduce un comando err√≥neo en "Command Window" no se generar√° ning√∫n
mensaje de este error en runtime. En su lugar, en la Command Window se muestra el
mensaje "<Script Error>".

Ejemplo
Dim i
For i = 1 to 10
HMIRuntime.Trace i & vbnewline
Next

Cuando se est√° ejecutando este VB script y el depurador se encuentra en el punto de parada
del bucle, son posibles las siguientes acciones
‚óè ?i
permite leer el valor de la variable i
‚óè i=5
permite poner a 5 el valor de la variable i.

9.8.10

Determinar valores de variables o propiedades

Introducci√≥n
En la "Command Window" se determinan y modifican valores de variables o propiedades. De
este modo, por ejemplo, se vuelve a poner a cero un valor de proceso para el script de usuario
sin tener que detener este proceso.
Nota
Para determinar el nombre de un objeto WinCC en WinCC Runtime Professional, pulse <Ctrl
+Alt+May√∫s> y mueva el rat√≥n sobre el objeto correspondiente. El nombre de la imagen y del
objeto se muestran en la informaci√≥n sobre herramientas (tooltip).

Requisitos
‚óè El archivo VBScript se ejecuta en runtime.
‚óè El depurador est√° abierto.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1481

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar

Procedimiento
1. Posicione como m√≠nimo un punto de parada en el archivo VBScript.
2. Cambie a WinCC Runtime y realice una acci√≥n que ejecute el archivo VBScript.
El depurador se detiene en el primer punto de parada.
3. Seleccione "View > Other Window > Command Window". Se abre la "Command Window".
4. Para determinar el valor de una variable o propiedad, introduzca la siguiente cadena de
caracteres:
‚Äì ? myTag
‚Äì ? myObject
No olvide el espacio que precede al nombre del objeto.
5. Pulse <Return>

9.8.11

Diagn√≥stico

9.8.11.1

Diagn√≥stico

Introducci√≥n
Cuando se ejecutan y comprueban los VB scripts y C scripts locales en runtime, se realiza
r√°pidamente un an√°lisis con ayuda del objeto "Trabajo de impresi√≥n/diagn√≥stico de script".

Herramientas de diagn√≥stico
WinCC le facilita las herramientas necesarias para analizar el comportamiento durante la
ejecuci√≥n en C scripts y VB scripts locales:
‚óè El objeto Trabajo de impresi√≥n/diagn√≥stico de script "Diagn√≥stico de GSC"
‚óè Emplear un debugger

Utilizaci√≥n
Para utilizar el diagn√≥stico de GSC, inserte el objeto "Trabajo de impresi√≥n/diagn√≥stico de
script" en una imagen. Utilice la plantilla "Diagn√≥stico de GSC".
Puede ser una imagen espec√≠ficamente dise√±ada para los diagn√≥sticos que se ejecuta en
runtime.

1482

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar

Diagn√≥stico GSC de VBS
El diagn√≥stico GSC muestra los m√©todos Trace contenidos en los scripts locales en la
secuencia temporal en que sean llamados. Tambi√©n se muestran instrucciones Trace en
funciones VB definidas por el usuario que se llaman en scripts locales. Con la aplicaci√≥n
espec√≠fica de instrucciones Trace, por ejemplo, para emitir valores de variables, es posible
seguir el desarrollo de scripts y de las funciones llamadas en ellos. Ud. indica la instrucci√≥n
Trace en la forma "HMIRuntime.Trace(<Salida>)". En la ventana de diagn√≥stico tambi√©n se
muestran las situaciones de error que provocan la llamada de la funci√≥n OnErrorExecute.

Diagn√≥stico GSC de C
El diagn√≥stico GSC muestra los m√©todos printf contenidos en los scripts locales en la
secuencia temporal en que sean llamados. Tambi√©n se muestran instrucciones printf en
funciones C que se llaman en scripts locales. De este modo, aplicando instrucciones printf para
fines concretos, p. ej. para devolver valores de variables, se puede seguir la secuencia de los
scripts y de las funciones llamadas en ellos.

Consulte tambi√©n
Ejemplo para configurar una salida de diagn√≥stico a trav√©s de Trace (P√°gina 1500)

9.8.11.2

Diagn√≥stico de GSC

Introducci√≥n
El diagn√≥stico de GSC muestra las instrucciones Trace contenidas en los scripts en la
secuencia temporal de su llamada en la ventana de diagn√≥stico. Tambi√©n se emiten
instrucciones Trace en funciones que se llaman en scripts. Con la aplicaci√≥n espec√≠fica de
instrucciones Trace, por ejemplo, para emitir valores de variables, es posible seguir el
desarrollo de scripts y de las funciones llamadas en ellos.

aplicaci√≥n
Para poder utilizar el diagn√≥stico de GSC, inserte el objeto "Trabajo de impresi√≥n/diagn√≥stico
de script" del tipo Diagn√≥stico de GSC en una imagen. Con las propiedades del diagn√≥stico de
GSC se controla la apariencia de la ventana Diagn√≥stico de GSC.
Al cambiar la imagen se borra el contenido de la ventana de GSC Diagn√≥stico.
Nota
Los avisos de la ventana "GSC Diagn√≥stico" se muestran tambi√©n cuando el debugger est√°
activado.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1483

Trabajar con funciones de sistema y Runtime Scripting
9.9 Comportamiento en tiempo de ejecuci√≥n en runtime

9.8.11.3

Insertar ventana de diagn√≥stico de GSC en una imagen

Introducci√≥n
Para utilizar el diagn√≥stico de GSC, inserte el objeto "Trabajo de impresi√≥n/diagn√≥stico de
script" en una imagen. Puede usarse cualquier imagen ya existente o crear una imagen
exclusivamente para fines de diagn√≥stico. En la ventana de inspecci√≥n del objeto "Trabajo de
impresi√≥n/diagn√≥stico de script" se define que el objeto se usar√° para el diagn√≥stico GSC.

Requisitos
‚óè La imagen deseada est√° abierta.
‚óè La Task Card "Herramientas" est√° abierta.

Procedimiento
Para insertar la ventana de diagn√≥stico GSC, proceda del siguiente modo:
1. Inserte en la imagen el objeto "Trabajo de impresi√≥n/diagn√≥stico de script" desde la paleta
"Controles" de la Task Card "Herramientas".
2. En "Miscel√°neo > Nombre", asigne un nombre a la ventana de diagn√≥stico GSC.
3. En la ventana de inspecci√≥n, apartado "Propiedades > Propiedades > General > Contenido
> Contenido de la ventana", seleccione la opci√≥n "Funciones".
4. En "Plantilla", seleccione la opci√≥n "Diagn√≥stico de GSC".
5. En "General", "Representaci√≥n" y "Miscel√°neo", defina las restantes opciones de la
ventana de diagn√≥stico GSC.

9.9

Comportamiento en tiempo de ejecuci√≥n en runtime

9.9.1

Procesamiento de scripts de usuario en runtime

Principio
En runtime siempre se procesa s√≥lo un script de usuario. Si hay varios scripts de usuario
pendientes de procesamiento, √©stos se ponen en una cola de espera y se procesan una tras
otra.
Nota
Un bucle en un script de usuario bloquea la ejecuci√≥n de los restantes scripts en cola de
espera, aunque √©stos se hayan iniciado de forma as√≠ncrona.

1484

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.9 Comportamiento en tiempo de ejecuci√≥n en runtime
WinCC soporta una profundidad de anidamiento de 8 scripts de usuario como m√°ximo. Tenga
en cuenta que la profundidad de anidamiento no se comprueba.
Nota
Si se configura un script de usuario asociado al evento "Parada de runtime", en dicho script
s√≥lo se pueden utilizar las funciones de sistema disponibles en el evento "Parada de runtime".
Aseg√∫rese de que la finalizaci√≥n del runtime no se vea perturbada por la ejecuci√≥n del script
de usuario.
Nota
Configuraci√≥n de scripts de usuario
En un mismo momento no es posible iniciar simult√°neamente un n√∫mero excesivo de scripts
de usuario. Evite una sobrecarga permanente del sistema del 100 %.
Los scripts de usuario se procesan con prioridad baja para no obstaculizar la visualizaci√≥n de
valores y el manejo. Si el sistema est√° sobrecargado, los scripts de usuario que est√°n
pendientes de ejecutarse se marcan inicialmente para su posterior ejecuci√≥n. El tama√±o
m√°ximo de la lista de preselecci√≥n depende del panel de operador y est√° limitado por el
n√∫mero m√°ximo permitido de scripts de usuario. Encontrar√° m√°s informaci√≥n al respecto en
las caracter√≠sticas de rendimiento. Si en un momento se lanzan m√°s scripts de usuario de los
que pueden marcarse, se rechazan las llamadas sobrantes y se emite un aviso de sistema.

Cambio de paneles de operador
Si en una funci√≥n definida por el usuario se utilizan funciones de sistema no disponibles en el
panel de operador seleccionado, aparecer√° una advertencia. A su vez, la correspondiente
funci√≥n de sistema en el script de usuario se subraya con una l√≠nea ondulada azul.

Consulte tambi√©n
Funciones definidas por el usuario (P√°gina 1423)

9.9.2

Procesar la lista de funciones en runtime

Principio
Una lista de funciones se procesa en runtime de arriba a abajo. Para evitar tiempos de espera
durante el procesamiento, se distingue entre los tipos de procesamiento s√≠ncrono y as√≠ncrono.
El sistema efect√∫a esta distinci√≥n, evaluando para ello los diversos tiempos de ejecuci√≥n de las
funciones de sistema. Independientemente del tiempo de ejecuci√≥n, los scripts de usuario se
procesan siempre de forma s√≠ncrona. El procesamiento de la lista de funciones se interrumpir√°
si una funci√≥n de sistema retorna un estado de error.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1485

Trabajar con funciones de sistema y Runtime Scripting
9.9 Comportamiento en tiempo de ejecuci√≥n en runtime

Procesamiento s√≠ncrono
En el procesamiento s√≠ncrono, las funciones de sistema contenidas en una lista de funciones
se procesan de forma sucesiva. Para que una funci√≥n de sistema se ejecute, la funci√≥n anterior
debe haber finalizado.

Procesamiento as√≠ncrono
El tiempo de ejecuci√≥n de las funciones de sistema que efect√∫an operaciones con archivos
(tales como guardar o leer) es m√°s largo que el de las funciones de sistema que p. ej. activan
un valor de variable.
Por tanto, las funciones de sistema de ejecuci√≥n prolongada se procesan de forma as√≠ncrona.
Por ejemplo, mientras una funci√≥n de sistema escribe un registro de receta en un soporte de
datos, se ejecuta ya la siguiente funci√≥n. Gracias al procesamiento paralelo de las funciones
de sistema se evitan tiempos de espera en el panel de operador.

9.9.3

Procesamiento de funciones y scripts locales en runtime

Ejecuci√≥n de scripts locales en runtime
No se pueden ejecutar en runtime al mismo tiempo dos scripts locales del mismo tipo. Para
evitar que p. ej. los scripts c√≠clicos se vean afectados negativamente por scripts que se
ejecutan mediante clic de rat√≥n, los scripts disparados por evento y los scripts c√≠clicos/
disparados por variables se ejecutan en las im√°genes de modo independiente entre s√≠.
Nota
La sincronizaci√≥n entre tipos de scripts en WinCC se realiza exclusivamente mediante el
objeto DataSet o variables HMI internas. Gracias a la ejecuci√≥n por separado, no existe ning√∫n
√°rea de datos compartida por los scripts locales disparados por evento y los scripts locales
c√≠clicos/disparados por variables.
Si la ejecuci√≥n de scripts locales c√≠clicos es afectada negativamente, p. ej., por una alta carga
de trabajo o por otros scripts, el script local se volver√° a ejecutar en la pr√≥xima ocasi√≥n. Los
ciclos no ejecutados no entrar√°n una cola de espera sino que se rechazar√°n.
Despu√©s de cambiar la imagen se terminar√°n autom√°ticamente al cabo de 1 minuto todos los
scripts locales que a√∫n est√©n ejecut√°ndose.
Los scripts locales que est√©n todav√≠a ejecut√°ndose al terminar runtime finalizar√°n al cabo de
5 segundos.

1486

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.9 Comportamiento en tiempo de ejecuci√≥n en runtime

Procesamiento de funciones en runtime
Al dispararse, las funciones se ejecutan en runtime de manera consecutiva. Si se inicia una
funci√≥n mientras otra funci√≥n est√° ejecut√°ndose, la segunda funci√≥n entrar√° en una cola de
espera hasta que sea posible iniciarla.
Nota
La sincronizaci√≥n entre scripts locales y funciones se realiza exclusivamente mediante el
objeto DataSet o variables HMI internas. No existe ning√∫n √°rea de datos compartida por scripts
locales y funciones.

Consulte tambi√©n
Funciones definidas por el usuario (P√°gina 1423)
Scripts locales (P√°gina 1425)

9.9.4

Secuencia en el procesamiento de scripts de usuario y funciones de sistema
ADVERTENCIA
La secuencia esperada de procesamiento de funciones definidas por el usuario y funciones
de sistema en runtime no siempre se puede cumplir. Esto puede causar estados operativos
imprevistos.
Tenga en cuenta las siguientes aclaraciones- Bajo "Soluci√≥n" puede ver c√≥mo solucionar el
problema.

Utilizaci√≥n de funciones definidas por el usuario en eventos
En algunos casos no es posible respetar la secuencia esperada de procesamiento de scripts
de usuario y funciones de sistema, p. ej., cuando el procesamiento de un script de usuario
contin√∫a mas all√° del momento de lanzamiento de un evento posterior. En este caso, puede
ocurrir que las funciones de sistema que est√°n asociadas al evento posterior se ejecuten antes
que las funciones de sistema que se asociaron al mismo evento con el script de usuario.

Segundo plano
Los scripts de usuario se colocan en una cola de espera de baja prioridad. La cola de espera
se procesa secuencialmente. Si se asocian a un evento funciones de sistema y scripts de
usuario, todos los scripts de usuario y funciones de sistema asociados a este evento se
ejecutan en esta cola de espera.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1487

Trabajar con funciones de sistema y Runtime Scripting
9.9 Comportamiento en tiempo de ejecuci√≥n en runtime

Ejemplo
En la tecla se ha configurado lo siguiente:
Evento

Funciones

Pulsar

Script de usuario (1)
ActivarBit(variable) (2)

Soltar

DesactivarBit(variable) (3)

Pulsar

A

Soltar


Pulsar

B





Soltar


Interrumpe
ejecuci√≥n de
menor proridad







(1)

Tiempo de ejecuci√≥n del script de usuario

(2)

Tiempo de ejecuci√≥n de la funci√≥n de sistema ActivarBit(variable)

(3)

Tiempo de ejecuci√≥n de la funci√≥n de sistema DesactivarBit(variable)

A: Ejecuci√≥n esperada del script de usuario y de las funciones de sistema en la configuraci√≥n.
Al pulsar la tecla, se ejecuta el script de usuario (1) y, posteriormente, la funci√≥n de sistema
ActivarBit(variable) (2). Al soltar la tecla, se ejecuta la funci√≥n de sistema
DesactivarBit(variable) (3).
B: El procesamiento del script de usuario no ha terminado todav√≠a al soltar la tecla.
Al pulsar la tecla, se ejecuta el script de usuario (1). La ejecuci√≥n del script de usuario (1) no
ha terminado todav√≠a y ya ha soltado la tecla. La funci√≥n de sistema DesactivarBit(variable) (3)
interrumpe la ejecuci√≥n de la funci√≥n. De este modo, se ejecuta la funci√≥n de sistema
DesactivarBit(variable) (3) antes que la funci√≥n de sistema ActivarBit(variable) (2). Con ello el
bit permanece activado.
La funci√≥n de sistema "ActivarBitMientrasTeclaPulsada" muestra el mismo comportamiento
cuando la funci√≥n de sistema se configura junto con scripts de usuario.

1488

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.9 Comportamiento en tiempo de ejecuci√≥n en runtime

Soluci√≥n
La secuencia de ejecuci√≥n del anterior ejemplo A se respeta cuando se asocia adicionalmente
un script de usuario al evento "Soltar". El script de usuario no tiene que contener
necesariamente una funcionalidad.
Evento

Funciones

Pulsar

Script de usuario (1)
ActivarBit(variable) (2)

Soltar

Script de usuario_2 (3)
DesactivarBit(variable) (4)

Nota
Hay que asegurarse de que la cola de espera del script de usuario no se desborde, pues de lo
contrario puede ocurrir que las funciones de sistema ya no se puedan ejecutar en el siguiente
evento.
Se detecta un desbordamiento por "Sobrecarga: Se rechaza el script <nombre>" o "La
secuencia de ejecuci√≥n esperada de scripts de usuario y funciones de sistema en runtime no
siempre se puede cumplir".

9.9.5

Dinamizaci√≥n de propiedades de objetos en runtime

Introducci√≥n
Con scripts de usuario se puede acceder en runtime a propiedades de objetos de imagen y a
variables. Si se modifican valores de propiedades de objetos con un script de usuario, ello no
tendr√° efecto en los datos del proyecto.

Modificar las propiedades de objetos
Si se modifica en runtime una propiedad de un elemento de imagen con un script de usuario,
este cambio s√≥lo tiene efecto mientras la imagen est√© activa. Si se cambia la imagen o se carga
la imagen de nuevo, se mostrar√°n de nuevo las propiedades de objetos configuradas.

Cambio de idioma
Si se cambia el idioma en runtime, las rotulaciones de los datos del proyecto se cargar√°n en
el nuevo idioma. Si se modifican textos con un script de usuario, se sobrescribir√°n nuevamente
los textos modificados por el script.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1489

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

9.10

Ejemplos

9.10.1

Ejemplos de VBS

9.10.1.1

Ejemplo: convertir Fahrenheit a Celsius

Tarea
En el presente ejemplo se crea un VB Script de usuario que convierte el valor de una sonda de
temperatura de Fahrenheit a Celsius (grados cent√≠grados). La temperatura se indica en el
panel de operador en un campo de salida.

Configuraci√≥n
Para este ejemplo se necesitan dos variables HMI y un VB Script de usuario configurados
como se indica a continuaci√≥n:
Variables HMI:
Nombre

Conexi√≥n al controlador

Tipo

Fahrenheit

s√≠

Real

Celsius

no

Real

Nombre

Tipo

Par√°metro

FahrenheitToCelsius

Function

Fahrenheit

VB Script de usuario:

1490

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Procedimiento
1. Cree las dos variables HMI "Fahrenheit" y "Celsius" con la configuraci√≥n indicada.

2. Cree el VB Script de usuario "FahrenheitToCelsius" con la configuraci√≥n indicada.

3. Introduzca el c√≥digo VBS siguiente:
FahrenheitToCelsius = (Fahrenheit-32) * (5/9)

Resultado intermedio
Las variables HMI y el VB Script de usuario est√°n creados.

Procedimiento
1. Abra el editor "Variables HMI" y haga clic en la variable "Fahrenheit".
2. En la ventana de inspecci√≥n haga clic en la ficha "Propiedades > Eventos". Seleccione el
evento "Cambio de valor".
3. Asocie el VB Script de usuario "FahrenheitToCelsius" al evento "Cambio de valor".
4. Seleccione la variable "Fahrenheit" para el par√°metro "Fahrenheit".
5. Seleccione la variable HMI "Celsius" para el valor de retorno "FahrenheitToCelsius".
6. Configure un campo de salida en una imagen y as√≥cielo a la variable "Celsius".

Procedimiento alternativo
En lugar de utilizar un VB Script de usuario del tipo "Function", se puede utilizar el tipo "Sub".
En este caso, asigne directamente el valor convertido a la variable HMI "Celsius":
SmartTags("Celsius") = (Fahrenheit-32) * (5/9)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1491

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos
Con este procedimiento, se suprime el valor de retorno del VB Script de usuario.

Resultado
Si el valor de la variable "Fahrenheit" cambia en runtime, se procesa el VB Script de usuario
"FahrenheitToCelsius". El valor de temperatura convertido se devolver√° a la variable HMI
"Celsius" y se visualizar√° en el campo de salida.

9.10.1.2

Ejemplo: convertir pulgadas a metros

Tarea
En el presente ejemplo se crea un VB Script de usuario que convierte de pulgadas a metros el
valor de un medidor de longitud. La longitud en metros se indica en el panel de operador en un
campo de salida.

Configuraci√≥n
Para este ejemplo se necesitan dos variables HMI y un VB Script de usuario configurados
como se indica a continuaci√≥n:
Variables HMI:
Nombre

Conexi√≥n al controlador

Tipo

VarInch

s√≠

Real

VarMeter

no

Real

Nombre

Tipo

Par√°metro

InchToMeter

Sub

Inch

VB Script de usuario

1492

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Procedimiento
1. Cree las dos variables HMI "VarInch" y "VarMeter" con la configuraci√≥n indicada.

2. Cree el VB Script de usuario "InchToMeter" con la configuraci√≥n indicada.

3. Introduzca el c√≥digo VBS siguiente:
VarMeter = Inch*0.0254

Resultado intermedio
Las variables y el VB Script de usuario est√°n creados.

Procedimiento
1. Abra el editor "Variables HMI" y haga clic en la variable "VarInch".
2. Haga clic en la ventana de inspecci√≥n "Propiedades > Eventos". Seleccione el evento
"Cambio de valor".
3. Asocie el VB Script de usuario "InchToMeter" al evento "Cambio de valor".
4. Seleccione la variable HMI "VarInch" para el par√°metro "Inch".
5. Configure un campo de salida en una imagen y as√≥cielo a la variable HMI "VarMeter".

Resultado
Si el valor de la variable "VarInch" cambia en runtime, se procesa el VB Script de usuario
"InchToMeter". El valor convertido se escribir√° en la variable HMI "VarMeter" y se visualizar√°
en el campo de salida.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1493

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

9.10.1.3

Ejemplo: cambiar el modo de operaci√≥n del panel de operador y visualizar el estado
actual

Tarea
En el presente ejemplo se utiliza la funci√≥n de sistema "EstablecerModoDeOperaci√≥nPanel"
para cambiar entre los modos de operaci√≥n "Online" y "Offline" en el panel de operador. El
modo de operaci√≥n ajustado actualmente se debe visualizar adicionalmente en el panel de
operador.

Requisitos
Se ha creado una imagen de proceso.

Configuraci√≥n
Para este ejemplo se necesitan una variable HMI y una lista de texto configuradas como se
indica a continuaci√≥n:
Variable HMI:
Nombre

Conexi√≥n al controlador

Tipo

OperatingMode

no

Bool

Nombre

Contiene

Valores

ShowOperatingMode

Bit (0/1)

1: Modo de operaci√≥n: "Online":

Lista de texto:

0: Modo de operaci√≥n: "Offline"

1494

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Procedimiento
1. Cree la variable HMI "OperatingMode" indicada arriba.

2. Cree la lista de textos "ShowOperatingMode" indicada arriba.

3. Abra la imagen e inserte un bot√≥n en el que se configurar√° el cambio de modo de operaci√≥n
a "Online".
4. Haga clic en la ventana de inspecci√≥n "Propiedades > Eventos". Seleccione el evento
"Pulsar".
5. Configure la funci√≥n de sistema "EstablecerModoDeOperaci√≥nPanel" asociada al evento
"Pulsar". Esta funci√≥n de sistema se encuentra en la lista de selecci√≥n bajo "Configuraci√≥n".
6. Seleccione la entrada "Online" para el par√°metro "Modo de operaci√≥n".
7. Configure la funci√≥n de sistema "ActivarBit" asociada al evento "Pulsar". Esta funci√≥n de
sistema se encuentra en la lista de selecci√≥n bajo "Procesamiento de bits".
8. En la lista, seleccione la variable HMI "OperatingMode" para el par√°metro "Variable".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1495

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos
9. En el sin√≥ptico del proceso, inserte un bot√≥n en el que se configurar√° el cambio de modo
de operaci√≥n a "Offline".
10.Repita los pasos 4 a 7. Seleccione la entrada "Offline" para el par√°metro "Modo de
operaci√≥n". Configure la funci√≥n de sistema "DesactivarBit" en vez de la funci√≥n "ActivarBit".

Resultado intermedio
El modo de operaci√≥n del panel de operador se podr√° cambiar en runtime mediante ambos
botones.
El modo de operaci√≥n ajustado actualmente se debe visualizar en un campo de salida en el
panel de operador.

1496

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Procedimiento
1. Cree un "Campo E/S simb√≥lico" en el sin√≥ptico del proceso. En la ventana de inspecci√≥n
haga clic en "Propiedades > Propiedades".
2. Realice los ajustes siguientes en el grupo "General":
‚Äì Bajo "Modo", seleccione "Salida".
‚Äì Seleccione la lista de texto "ShowOperatingMode".
‚Äì Seleccione la variable "OperatingMode".

Resultado
Si cambia el modo de operaci√≥n utilizando los botones, el modo ajustado actualmente se
visualizar√° en el panel de operador.

Consulte tambi√©n
Configurar la lista de funciones (P√°gina 1428)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1497

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

9.10.2

Ejemplos de VBS

9.10.2.1

Resumen

Introducci√≥n
Encontrar√° los siguientes ejemplos de VBS:
‚óè Acceso a objetos en el editor "Im√°genes" (p. ej., modificaci√≥n de color o texto)
‚óè Determinar color de objetos
‚óè Configurar cambio de idioma
‚óè Desactivar Runtime
‚óè Configurar cambio de imagen por medio de Property
‚óè configurar la salida de diagn√≥stico mediante Trace
‚óè escribir valores de variables
‚óè Leer valores de variable
‚óè escribir propiedades del objeto
‚óè Configurar visor de recetas
‚óè Configurar visor de avisos
‚óè Dibujar curva
‚óè Evaluar estad√≠sticamente valores de variables

Consulte tambi√©n
Ejemplo para configurar el visor de recetas (P√°gina 1509)
Ejemplo para configurar el visor de avisos (P√°gina 1510)
Ejemplo de evaluaci√≥n estad√≠stica de valores de variables (P√°gina 1512)

9.10.2.2

Ejemplo para acceder a objetos en el editor Im√°genes

Introducci√≥n
Para dinamizar el entorno gr√°fico de runtime, existe la posibilidad de acceder en WinCC con
VB-Scripting a todos los objetos del editor "Im√°genes". A su vez, pueden dinamizarse objetos
gr√°ficos de modo que reaccionen a una operaci√≥n, p. ej., un clic del rat√≥n o en funci√≥n de
valores de variables.

1498

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Procedimiento
En el siguiente ejemplo, por medio de un clic con el rat√≥n Ud. define en 20 el radio de un c√≠rculo
en Runtime:

'VBS121
Dim objCircle
Set objCircle = ScreenItems("Circle1")
objCircle.Radius = 20

9.10.2.3

Ejemplo para determinar colores de objetos

Introducci√≥n
Los colores de objetos est√°n definidos por medio de valores RGB (rojo/verde/azul). Es posible
establecer o leer valores de color para objetos.

Procedimiento
El siguiente ejemplo define de color azul para el relleno de la imagen "ScreenWindow1":

'VBS122
Dim objScreen
Set objScreen = HMIRuntime.Screens("ScreenWindow1")
objScreen.FillColor = RGB(0, 0, 255)

9.10.2.4

Ejemplo para configurar un cambio de idioma

Introducci√≥n
VBS permite cambiar el idioma de runtime. Utilice los botones con las correspondientes
caracter√≠sticas de pa√≠s que se colocan en la p√°gina de inicio del proyecto.
El idioma de runtime se indica en VBS con un identificador de pa√≠s, p. ej. 1031 para alem√°n
- est√°ndar, 1033 para ingl√©s EE. UU., etc. Encontrar√° una lista de todos los identificadores de
pa√≠ses en los principios b√°sicos de VBScript, en el tema "Diagrama (LCID) de la ID de
configuraci√≥n regional".

Procedimiento
En el evento "Clic del rat√≥n", cree un VB Script local en un bot√≥n e introduzca el siguiente
c√≥digo para cambiar a alem√°n el idioma de runtime:

'VBS123
HMIRuntime.Language = 1031

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1499

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

9.10.2.5

Ejemplo para desactivar runtime

Introducci√≥n
Con VBS es posible finalizar runtime, p. ej., con un clic de rat√≥n o en funci√≥n de valores de
variables u otros eventos.

Procedimiento
El siguiente ejemplo finaliza WinCC Runtime:

'VBS124
HMIRuntime.Stop

9.10.2.6

Ejemplo para configurar un cambio de imagen a trav√©s de Property

Introducci√≥n
Si en la configuraci√≥n se utilizan im√°genes divididas (p. ej., en una imagen ra√≠z, el t√≠tulo y la
barra de manejo de la interfaz de usuario) y adem√°s una ventana de imagen incrustada para
la visualizaci√≥n propia de la imagen, configure el cambio de imagen mediante las propiedades
de la ventana de imagen.
La propiedad de la ventana de imagen "ScreenName" debe ser modificada para que aparezca
la otra imagen. El script local y la ventana de imagen deben estar configurados en la misma
imagen.

Procedimiento
En el siguiente ejemplo se muestra la imagen "test" en una ventana de imagen
"ScreenWindow" cuando se ejecuta el VB Script local:

'VBS126
Dim objScrWindow
Set objScrWindow = ScreenItems("ScreenWindow")
objScrWindow.ScreenName = "test"

9.10.2.7

Ejemplo para configurar una salida de diagn√≥stico a trav√©s de Trace

Introducci√≥n
Si ha insertado el objeto "Trabajo de impresi√≥n/diagn√≥stico de script" en la imagen, en la
ventana de diagn√≥stico se pueden editar diagn√≥sticos con el comando "Trace" en runtime.
El trabajo de impresi√≥n/diagn√≥stico de script muestra los m√©todos Trace contenidos en los
scripts de usuario en la secuencia temporal en que se llaman. Esto tambi√©n vale para

1500

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos
instrucciones Trace en funciones que se llaman en funciones definidas por el usuario.
Aplicando instrucciones Trace para fines concretos, se puede seguir la secuencia de las
funciones definidas por el usuario y las funciones llamadas dentro de ellas. Indique la
instrucci√≥n Trace en la forma "HMIRuntime.Trace <Salida>".
En el objeto "Trabajo de impresi√≥n/diagn√≥stico de script" se muestran las salidas Trace de C
y VBS.

Mostrar texto
El siguiente ejemplo escribe un texto en la ventana de diagn√≥stico:

'VBS127
HMIRuntime.Trace "Customized error message"

Mostrar avisos
En el siguiente ejemplo, se escriben en la ventana de diagn√≥stico los avisos de un visor de
avisos "Control2":

Sub TraceMsg
Dim objAlarmControl
Dim lIndex
Dim lCellIndex
'create reference to the alarm control
Set objAlarmControl = ScreenItems("Control2")
'enumerate and trace out row numbers
For lIndex = 1 To objAlarmControl.GetRowCollection.Count
HMIRuntime.Trace "Row: " & (objAlarmControl.GetRow(lIndex).RowNumber) & "

"

'enumerate and trace out column titles and cell texts
For lCellIndex = 1 To objAlarmControl.GetRow(lIndex).CellCount
HMIRuntime.Trace objAlarmControl.GetMessageColumn(lCellIndex -1).Name & " "
HMIRuntime.Trace objAlarmControl.GetRow(lIndex).CellText(lCellIndex) & " "
Next
HMIRuntime.Trace vbNewLine
Next
End Sub

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1501

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Mostrar informaci√≥n sobre variables HMI
En el siguiente ejemplo, se escribe en la ventana de diagn√≥stico informaci√≥n sobre la variable
de archivo "VarArch100":

Sub ReadTagInfo
Dim Tag
Set Tag = HMIRuntime.Tags("TagLoggingfast\VarArch100")
HMIRuntime.Trace "LastError = " + CStr(Tag.LastError) + vbNewLine
HMIRuntime.Trace "Name = " + Tag.Name + vbNewLine
HMIRuntime.Trace "QualityCode = " + CStr(Tag.QualityCode) + vbNewLine
End Sub

Consulte tambi√©n
Diagn√≥stico (P√°gina 1482)

9.10.2.8

Ejemplo para escribir valores de variables

Introducci√≥n
Con VBScript es posible escribir el valor de una variable en el controlador, por ejemplo, con un
clic del rat√≥n en un bot√≥n para la especificaci√≥n de consigna; adem√°s, tambi√©n es posible
definir valores de variables internas para activar otros scripts de usuario.
A continuaci√≥n se indican y explican diversas variantes de escritura.

Escritura sencilla
En el siguiente ejemplo se escribe un valor en la variable "Tag1":

'VBS128
HMIRuntime.Tags("Tag1").Write 6

Esta es la forma m√°s sencilla de escribir, ya que no se crea ninguna referencia de un objeto.

Escribir con referencia de objeto
En el siguiente ejemplo se crea una copia local del objeto Tag y se escribe un valor en la
variable "Tag1":

'VBS129
Dim objTag
Set objTag = HMIRuntime.Tags("Tag1")
objTag.Write 7

1502

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos
El hacer una referencia ofrece la ventaja de que Ud. puede trabajar con el objeto Tag antes de
escribir. Ud. puede leer el valor de la variable, ejecutar c√°lculos y escribir otra vez:

'VBS130
Dim objTag
Set objTag = HMIRuntime.Tags("Tag1")
objTag.Read
objTag.Value = objTag.Value + 1
objTag.Write

Escritura sincr√≥nica
De manera est√°ndar, el valor que se va a escribir se entrega a la administraci√≥n de variables
y se reanuda el procesamiento del script. Sin embargo, en algunos casos debe asegurarse que
el valor haya sido escrito realmente antes de que se contin√∫e el procesamiento del script.
Ud. realiza este modo de escribir indicando el valor 1 en el par√°metro adicional opcional:

'VBS131
Dim objTag
Set objTag = HMIRuntime.Tags("Tag1")
objTag.Write 8,1

o

'VBS132
Dim objTag
Set objTag = HMIRuntime.Tags("Tag1")
objTag.Value = 8
objTag.Write ,1

Nota
Considere que su llamada dura m√°s tiempo en comparaci√≥n a la llamada est√°ndar. El tiempo
de duraci√≥n depende, entre otras cosas, del canal y del PLC.
Este tipo de escritura corresponde a la llamada SetTagXXXWait() del C-Scripting.

Escribir con tratamiento de estado
Para asegurarse de que un valor se ha escrito correctamente, despu√©s de escribir lleve a cabo
una comprobaci√≥n de errores o determine el estado de las variables.
Esto se puede hacer verificando la propiedad LastError despu√©s de escribir el valor. Si la
comprobaci√≥n da resultado positivo, es decir, si la petici√≥n se ha podido entregar
correctamente, se comprueba el estado de las variables.
En una orden actual de escribir no se averigua el estado actual del proceso. Para averiguarlo
es necesario leer la variable. El valor contenido en la propiedad QualityCode despu√©s del

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1503

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos
proceso de lectura indica el estado de las variables y muestra, dado el caso, una conexi√≥n PLC
que ha fallado.
En el siguiente ejemplo se escribe la variable "Tag1": Si durante la escritura se presenta un
error se editar√° el valor del error y la descripci√≥n del error en la ventana de diagn√≥stico de
Global Script. A continuaci√≥n se verificar√° el QualityCode. Si el QualityCode no est√° OK (0x80),
√©l ser√° editado en la ventana de diagn√≥stico.

'VBS133
Dim objTag
Set objTag = HMIRuntime.Tags("Tag1")
objTag.Write 9
If 0 <> objTag.LastError Then
HMIRuntime.Trace "Error: " & objTag.LastError & vbCrLf & "ErrorDescription: " &
objTag.ErrorDescription & vbCrLf
Else
objTag.Read
If &H80 <> objTag.QualityCode Then
HMIRuntime.Trace "QualityCode: 0x" & Hex(objTag.QualityCode) & vbCrLf
End If
End If

Nota
Despu√©s de escribir una variable, se fijar√° la propiedad QualityCode del objeto Tag local de
"BAD Out of Service", ya que no se sabe cu√°l es el QualityCode que lleva la variable en el
proceso. Con una nueva lectura puede determinarse el nuevo QualityCode.
El QualityCode no puede ser escrito desde VBS.

9.10.2.9

Ejemplo para leer valores de variables

Introducci√≥n
Con VBS Ud. puede leer el valor de una variable y seguir trat√°ndolo. De este modo, p. ej. con
un clic de rat√≥n en un bot√≥n, se puede obtener informaci√≥n acerca del estado del sistema o
ejecutar c√°lculos.
A continuaci√≥n se indican y explican diversas variantes de lectura.

Lectura sencilla
En el siguiente ejemplo se lee el valor de las variables "Tag1" y se edita en la ventana de
diagn√≥stico Global Script:

'VBS134
HMIRuntime.Trace "Value: " & HMIRuntime.Tags("Tag1").Read & vbCrLf

1504

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos
Esta es la forma m√°s sencilla de leer, ya que no se crea ninguna referencia de un objeto.

Leer con referencia de objeto
En el siguiente ejemplo se crea una copia local del objeto Tag, se lee el valor de la variable y
se muestra el objeto "Trabajo de impresi√≥n/diagn√≥stico de script":

'VBS135
Dim objTag
Set objTag = HMIRuntime.Tags("Tag1")
HMIRuntime.Trace "Value: " & objTag.Read & vbCrLf

El hacer una referencia ofrece la ventaja de que Ud. puede trabajar con el objeto Tag. Ud.
puede leer el valor de la variable, ejecutar c√°lculos y escribir otra vez:

'VBS136
Dim objTag
Set objTag = HMIRuntime.Tags("Tag1")
objTag.Read
objTag.Value = objTag.Value + 1
objTag.Write

Con el m√©todo Read se a√±aden a la imagen variables del proceso que han sido le√≠das; ellas
ser√°n solicitadas c√≠clicamente a partir de ese momento desde el sistema de automatizaci√≥n
(PLC). Si la variable ya est√° en la imagen, se env√≠a el valor contenido en ella.
Cuando se deselecciona la imagen, las variables ser√°n dadas de baja.
Nota
Si se solicita una variable en una funci√≥n, permanecer√° identificada todo el tiempo de
ejecuci√≥n runtime de WinCC.

Leer directamente
De manera est√°ndar, los valores de variables se leen de la imagen de variable. Sin embargo,
en algunas situaciones puede ser necesario leer el valor directamente desde el PLC, p. ej. para
sincronizar procesos r√°pidos.
Si para la lectura se ajusta el par√°metro opcional a 1, entonces la variable no ser√° identificada
c√≠clicamente, sino que el valor ser√° solicitado una vez desde el PLC.

'VBS137
Dim objTag
Set objTag = HMIRuntime.Tags("Tag1")
HMIRuntime.Trace "Value: " & objTag.Read(1) & vbCrLf

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1505

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Nota
Considere que su llamada dura m√°s tiempo en comparaci√≥n con la llamada est√°ndar. El
tiempo de duraci√≥n depende, entre otras cosas, del canal y del PLC.
Evite este tipo de llamada en los C scripts c√≠clicos, ya que esta es la causa principal del bajo
rendimiento.
Este tipo de lectura corresponde a la llamada GetTagXXXWait() del C-Scripting.

Leer con tratamiento de estado
Para estar seguro de que un valor es v√°lido, efect√∫e una comprobaci√≥n despu√©s de la lectura.
Esto se realiza controlando el QualityCode.
En el siguiente ejemplo se lee la variable "Tag1" y, a continuaci√≥n, se verifica el QualityCode.
Si el QualityCode no corresponde a OK (0x80) se mostrar√°n las propiedades LastError,
ErrorDescription y QualityCode en la ventana de diagn√≥stico Global Script.

'VBS138
Dim objTag
Set objTag = HMIRuntime.Tags("Tag1")
objTag.Read
If &H80 <> objTag.QualityCode
Then
HMIRuntime.Trace "Error: " & objTag.LastError & vbCrLf & "ErrorDescription: " &
objTag.ErrorDescription & vbCrLf & "QualityCode: 0x" & Hex(objTag.QualityCode) & vbCrLf
Else
HMIRuntime.Trace "Value: " & objTag.Value & vbCrLf
End If

Nota
Si se presenta un error durante la lectura, el QualityCode ser√° activado en "BAD Out of
Service". Por eso, durante la lectura se debe controlar el QualityCode constantemente.

9.10.2.10

Ejemplo para escribir propiedades de objetos

Introducci√≥n
VBS permite acceder a las propiedades de todos los objetos de control y visualizaci√≥n en el
editor "Im√°genes". Ud. puede leer las propiedades o modificarlas para runtime.
Los siguientes ejemplos le muestran diferentes formas de acceso.

1506

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Establecer sencillamente una propiedad
En el siguiente ejemplo se cambia a rojo el color de fondo del objeto "Rectangle1" contenido
en la imagen:

'VBS139
ScreenItems("Rectangle1").BackColor = RGB(255,0,0)

√âsta es la forma m√°s sencilla de escribir, ya que no se crea ninguna referencia de un objeto.
Nota
Si se trabaja sin referencia de objeto, IntelliSense muestra √∫nicamente las propiedades
est√°ndar.
El modo de expresi√≥n utilizado en este ejemplo solo es ejecutable en el editor "Im√°genes". De
forma similar, direccione en el planificador de tareas los objetos por medio del objeto
HMIRuntime.

Establecer una propiedad con referencia de objeto
En el siguiente ejemplo se crea una referencia para el objeto "Rectangle1" contenido en la
imagen, y con ayuda de la funci√≥n est√°ndar VBS RGB() el color de fondo se colocar√° de color
rojo:

'VBS140
Dim objRectangle
Set objRectangle = ScreenItems("Rectangle1")
objRectangle.BackColor = RGB(255,0,0)

Encontrar√° m√°s informaci√≥n sobre RGB en "VBScript para Windows".
Crear referencias es √∫til si se desea modificar varias propiedades de un objeto. De esta
manera, en Autocompletar se muestra un listado de todas las propiedades del objeto.
Nota
El modo de expresi√≥n utilizado en este ejemplo s√≥lo es ejecutable en el editor "Im√°genes". De
forma similar, direccione en el planificador de tareas los objetos por medio del objeto
HMIRuntime.

Establecer propiedades m√°s all√° de la ventana de imagen
VBS en el editor "Im√°genes" ofrece dos posibilidades para el direccionamiento de varias
im√°genes:
‚óè mediante el objeto Screen de una ventana de imagen con "ScreenItems"
‚óè desde la imagen ra√≠z con "HMIRuntime.Screens"

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1507

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Referenciaci√≥n mediante la ventana de imagen
En el siguiente ejemplo se modifica el color de un rect√°ngulo en una ventana de imagen
subyacente. El VB Script de usuario se ejecuta en la imagen "BaseScreen", en la que se
encuentra la ventana de imagen "ScreenWindow1". En la ventana de imagen se muestra una
imagen que contiene un objeto del tipo "Rect√°ngulo" con el nombre "Rectangle1".

'VBS199
Sub OnLButtonUp(ByVal Item, ByVal Flags, ByVal x, ByVal y)
Dim objRectangle
Set objRectangle = ScreenItems("ScreenWindow1").Screen.ScreenItems("Rectangle1")
objRectangle.BackColor = RGB(255,0,0)
End Sub

Referenciaci√≥n a partir de imagen ra√≠z
Puede referenciar la imagen con el objeto que se va a modificar mediante
HMIRuntime.Screens. La indicaci√≥n de la imagen se realiza, de forma relativa a la imagen ra√≠z,
a trav√©s de la siguiente palabra clave de acceso:
[<Nombre de imagen ra√≠z>.]<Nombre de ventana de imagen>[:<Nombre de
imagen>]... .<Nombre de ventana de imagen>[:<Nombre de imagen>]
En el siguiente ejemplo se crea una referencia para el objeto "Rectangle1" contenido en la
imagen "Screen2" y el color de fondo se colocar√° de color rojo.
Para ello, la imagen "Screen2" est√° colocada en "Screen1". "Screen1" ser√° visualizada en la
imagen ra√≠z "BaseScreen".

'VBS141
Dim objRectangle
Set objRectangle =
HMIRuntime.Screens("BaseScreen.ScreenWindow1:Screen1.ScreenWindow1:Screen2").ScreenItems("
Rectangle1")
objRectangle.BackColor = RGB(255,0,0)

No es necesario indicar tambi√©n los nombres de im√°genes. A trav√©s del nombre de la ventana
de imagen es posible direccionar inequ√≠vocamente una imagen. Por tal raz√≥n basta con indicar
los nombres de las ventanas de imagen tal como se muestra en el siguiente ejemplo:

'VBS142
Dim objRectangle
Set objRectangle =
HMIRuntime.Screens("ScreenWindow1.ScreenWindow2").ScreenItems("Rectangle1")
objRectangle.BackColor = RGB(255,0,0)

Con este tipo de direccionamiento es posible acceder a objetos en ventanas de im√°genes con
im√°genes que se cambian. Esto es interesante especialmente para la t√©cnica de componentes
de im√°genes.

1508

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Dinamizar propiedades por medio del valor de retorno
No s√≥lo es posible disparar scripts locales en propiedades mediante disparadores por evento
o disparadores c√≠clicos, sino tambi√©n dinamizar propiedades directamente mediante un script
local.
En el siguiente ejemplo se dinamiza el color de fondo de un objeto por medio de un valor de
retorno. El valor transferido puede p. ej. proceder de una evaluaci√≥n de eventos en el
controlador, y se puede aplicar para la representaci√≥n gr√°fica de un estado de operativo:

'VBS146
Function BackColor_Trigger(ByVal Item)
BackColor_Trigger = RGB(125,0,0)
End Function

Nota
Si con un script de usuario se dinamiza una propiedad del objeto a trav√©s de un valor de retorno
de un script de usuario, el valor de la propiedad del objeto se escribir√° √∫nicamente si ha sido
modificado en comparaci√≥n con la √∫ltima ejecuci√≥n de la funci√≥n. Aqu√≠ no se tendr√° en
consideraci√≥n si el valor ha sido modificado por otra posici√≥n.
Por eso las propiedades que se han dinamizado a trav√©s del valor de retorno con scripts de
usuario no pueden ser modificadas por otra posici√≥n, como son otros scripts de usuario. Si no
se tiene en cuenta esto, es posible que aparezcan valores err√≥neos.

9.10.2.11

Ejemplo para configurar el visor de recetas

Introducci√≥n
En el visor de recetas se muestran registros de receta.
Pueden a√±adirse, copiarse, editarse o borrarse registros.

Cargar y mostrar receta
En el ejemplo siguiente se carga la receta "Juice" en el visor de recetas "Control1". La receta
se muestra en el visor de recetas:

Sub loadUserArchive()
Dim objUAC
Set objUAC = ScreenItems("Control1")
objUAC.BorderColor = RGB(255,0,0)
objUAC.BorderWidth = 3
objUAC.Closeable = False
objUAC.Datasource = "Juice"
End Sub

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1509

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Copiar un registro de receta
En el ejemplo siguiente se copia el registro de receta de la l√≠nea 3. La copia se inserta al final
de la tabla.

Sub CopyRow
Dim objUAC
Set objUAC = ScreenItems("Control1")
Dim iRowCount
objUAC.AutoCompleteRows = True
objUAC.SelectRow(3)
objUAC.CopyRows
iRowCount = objUAC.GetRowCollection.Count
objUAC.SelectRow(iRowCount + 1)
objUAC.PasteRows
objUAC.SelectRow(1)
objUAC.UnselectAll
End Sub

Consulte tambi√©n
Resumen (P√°gina 1498)

9.10.2.12

Ejemplo para configurar el visor de avisos

Introducci√≥n
Los avisos se muestran en el visor de avisos. Los avisos se pueden mostrar u ocultar, ordenar
y filtrar.

1510

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Filtrar avisos
En este ejemplo se muestran en el visor de avisos "Control2" solo los avisos del n√∫mero de
aviso 2.

Sub Filter
Dim objAlarmControl
'create reference to AlarmControl
Set objAlarmControl = ScreenItems("Control2")
'set / reset the filter and create a trace
If (objAlarmControl.MsgFilterSQL = "") Then
objAlarmControl.MsgFilterSQL = "MSGNR = 2"
Else
objAlarmControl.MsgFilterSQL = ""
End If
End Sub

Eliminar avisos
En este ejemplo se eliminan del visor de avisos los avisos 1-3.

Sub ResetAlarm
Dim objAlarm
'reset alarm 1 - 3
Set objAlarm = HMIRuntime.Alarms(1)
objAlarm.State = 2 'hmiAlarmStateGone
objAlarm.Create
Set objAlarm = HMIRuntime.Alarms(2)
objAlarm.State = 2 'hmiAlarmStateGone
objAlarm.Create
Set objAlarm = HMIRuntime.Alarms(3)
objAlarm.State = 2 'hmiAlarmStateGone
objAlarm.Create
End Sub

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1511

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Agregar avisos
En este ejemplo se agregan en el visor de avisos los avisos 1-3. Los avisos 1-3 deben estar
creados.

Sub SetAlarm
Dim objAlarm
'create Alarm 1 - 3
Set objAlarm = HMIRuntime.Alarms(1)
objAlarm.State = 1 'hmiAlarmStateCome
objAlarm.Create
Set objAlarm = HMIRuntime.Alarms(2)
objAlarm.State = 1 'hmiAlarmStateCome
objAlarm.Create
Set objAlarm = HMIRuntime.Alarms(3)
objAlarm.State = 1 'hmiAlarmStateCome
objAlarm.Create
End Sub

Consulte tambi√©n
Resumen (P√°gina 1498)

9.10.2.13

Ejemplo de evaluaci√≥n estad√≠stica de valores de variables

Introducci√≥n
Con la tabla de valores pueden mostrarse en formato tabular las coordenadas de curvas y la
evaluaci√≥n estad√≠stica de valores de variable. Para ello debe enlazarse la tabla de valores con
el objeto correspondiente. Los datos evaluados pueden imprimirse y exportarse.

Procedimiento
En el ejemplo siguiente se eval√∫an estad√≠sticamente los valores de variable del visor de curvas
f(t) "Control2". Para representar el resultado en la ventana del √°rea estad√≠stica de la tabla de
valores, realice los siguientes ajustes en las propiedades de la tabla de valores:
‚óè Origen de los datos: "Control2"
‚óè Modo: "Statistic area" window"
Inserte un nuevo bot√≥n en el visor de curvas f(t) y as√≥ciele el VB Script de usuario.

Sub OnToolbarButtonClicked(ByVal Item, ByVal lId)
Dim objTrend
Set objTrend = ScreenItems("Control2")
objTrend.CalculateStatistic()
End Sub

1512

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Consulte tambi√©n
Resumen (P√°gina 1498)

9.10.2.14

Ejemplo de ejecuci√≥n de un script en el servidor (objeto logging)

Introducci√≥n
Actualmente, en los proyectos multipuesto, el objeto logging solo funciona en el servidor. El
siguiente ejemplo muestra c√≥mo ejecutar un script en el servidor desde el cliente y por lo tanto
tambi√©n almacenar y borrar segmentos de fichero en el cliente.
El siguiente ejemplo muestra un script global que se ejecuta con una variable de control. El
contenido de la variable de control determina si se llamar√° el m√©todo "Restore" o el m√©todo
"Remove". Al final del script, la variable de control se ajusta a "0". Mediante una consulta se
impide la ejecuci√≥n del script en equipos cliente. La ruta y el per√≠odo se transfieren mediante
variables internas.

'VBS180
'StartLoggingOnServer
Dim StartLogging
Dim SourcePath
Dim TimeFrom
Dim TimeTo
Dim RetVal
'Exit when running on client
If (Left(HMIRuntime.ActiveProject.Path, 1) = "\") Then
Exit Function
End If
'read parameters
StartLogging = HMIRuntime.Tags("StartLogging").Read
SourcePath = HMIRuntime.Tags("SourcePath").Read(1)
TimeFrom = HMIRuntime.Tags("TimeFrom").Read(1)
TimeTo = HMIRuntime.Tags("TimeTo").Read(1)
'restore or remove depends on the parameter
If (StartLogging = 1) Then
RetVal = HMIRuntime.Logging.Restore(SourcePath, TimeFrom, TimeTo, -1)
HMIRuntime.Tags("RetVal").Write RetVal, 1
HMIRuntime.Tags("StartLogging").Write 0,1
Elseif (StartLogging = 2) Then
RetVal = HMIRuntime.Logging.Remove(TimeFrom, TimeTo, -1)
HMIRuntime.Tags("RetVal").Write RetVal, 1
HMIRuntime.Tags("StartLogging").Write 0,1
End If

Tambi√©n puede usarse como ruta un recurso compartido de red. Por lo tanto, los segmentos
de ficheros que se desea almacenar no tienen por qu√© encontrarse localmente en el servidor.
Sin embargo, es necesario que el servidor pueda acceder correctamente a la ruta.
Nota
El ejemplo muestra una propuesta de soluci√≥n y puede modificarse a conveniencia.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1513

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Procedimiento
1. Cree en WinCC Explorer las siguientes variables internas con actualizaci√≥n en todo el
proyecto:
‚Äì StartLogging (valor de 8 bits sin signo)
‚Äì SourcePath (variable de texto de juego de caracteres de 8 bits)
‚Äì TimeFrom (variable de texto de juego de caracteres de 8 bits)
‚Äì TimeTo (variable de texto de juego de caracteres de 8 bits)
‚Äì RetVal (valor de 32 bits con signo)
2. Cree el script "StartLoggingOnServer".
3. Asocie al evento "Cambio de valor" de la variable "StartLogging" el script
"StartLoggingOnServer".
El script puede ejecutarse en un cliente, p. ej,. con el siguiente script:

'VBS181
'Prerequisite: set parameters
HMIRuntime.Tags("SourcePath").Write "\\client_pc\temp",1
HMIRuntime.Tags("TimeFrom").Write "2004",1
HMIRuntime.Tags("TimeTo").Write "2004",1
'start action
HMIRuntime.Tags("StartLogging").Write 1,1

Nota
Las variables se escriben y leen mayoritariamente en el modo "directo". De este modo se
sincronizan las secuencias. Al tratarse de variables internas, este modo puede usarse sin
riesgos.

9.10.2.15

Ejemplo de apertura del visor de c√≥digo desde la vista general de GRAPH

Introducci√≥n
VBS ofrece la posibilidad de conmutar, tambi√©n si se usan ventanas de imagen, de la vista
general de GRAPH al visor de c√≥digo PLC.
Para ello debe crearse un script VB en una vista general de GRAPH, una imagen en una
ventana de imagen as√≠ como otra imagen con un visor de c√≥digo PLC que muestre el
correspondiente c√≥digo de programa.

1514

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Apertura del visor de c√≥digo PLC desde una ventana de imagen
En el siguiente ejemplo se abre, con ayuda de un evento, desde la vista general de GRAPH,
en la ventana de imagen "Screen window_1", el visor de c√≥digo PLC "PLC code view_1" en la
imagen "CodeViewScreen".

Sub OnPlcCodeViewButtonClick(ByVal item, ByVal codeViewerDiagnosticsContext)
Dim objScreenWindow
Set objScreenWindow = ScreenItems("Screen window_1")
objScreenWindow.ScreenName = "CodeViewScreen"
objScreenWindow.Screen.ScreenItems("PLC code view_1").NavigateTo =
codeViewerDiagnosticsContext
End Sub

9.10.3

Ejemplos de C

9.10.3.1

Resumen

Introducci√≥n
Encontrar√° ejemplos de C Scripts:
‚óè Acceso a objetos en el editor "Im√°genes" (p. ej. modificaci√≥n de color o texto)
‚óè Determinar color de objetos
‚óè Configurar cambio de idioma
‚óè Desactivar runtime
‚óè Configurar cambio de imagen por medio de Property
‚óè Configurar la salida de diagn√≥stico mediante Trace
‚óè Escribir valores de variables
‚óè Leer valores de variables
‚óè Escribir propiedades del objeto

Consulte tambi√©n
Ejemplo para acceder a objetos en el editor Im√°genes (P√°gina 1516)
Ejemplo para determinar colores de objetos (P√°gina 1516)
Ejemplo para configurar un cambio de idioma (P√°gina 1517)
Ejemplo para desactivar runtime (P√°gina 1517)
Ejemplo para configurar un cambio de imagen a trav√©s de Property (P√°gina 1518)
Ejemplo para configurar una salida de diagn√≥stico a trav√©s de Trace (P√°gina 1518)
Ejemplo para escribir valores de variables (P√°gina 1519)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1515

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos
Ejemplo para leer valores de variables (P√°gina 1519)
Ejemplo para escribir propiedades de objetos (P√°gina 1520)

9.10.3.2

Ejemplo para acceder a objetos en el editor Im√°genes

Introducci√≥n
Para dinamizar el entorno gr√°fico de runtime, existe la posibilidad de acceder en WinCC con
C-Scripting a todos los objetos del editor "Im√°genes". A su vez, pueden dinamizarse objetos
gr√°ficos de modo que reaccionen a una operaci√≥n, p. ej. un clic del rat√≥n o en funci√≥n de
valores de variables.

Procedimiento
En el siguiente ejemplo se define en 10 el radio de un c√≠rculo en runtime por medio de un clic
con el rat√≥n:

'C121
SetPropDouble(screenName,"C√≠rculo_1","Radio",10);

Consulte tambi√©n
Resumen (P√°gina 1515)

9.10.3.3

Ejemplo para determinar colores de objetos

Introducci√≥n
Los colores de objetos est√°n definidos por medio de valores RGB (rojo/verde/azul). Es posible
establecer o leer valores de color para objetos.

Procedimiento
El siguiente ejemplo define el color azul para el relleno del objeto "Roundbutton1":

'C122
SetPropertyByConstant (screenName, " Roundbutton1", "FillPatternColor", "65035");

Consulte tambi√©n
Resumen (P√°gina 1515)

1516

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

9.10.3.4

Ejemplo para configurar un cambio de idioma

Introducci√≥n
C-Scripting permite cambiar el idioma de runtime. Utilice los botones con los correspondientes
c√≥digos de pa√≠s que se colocan en la p√°gina de inicio del proyecto.
El idioma de runtime se indica con un identificador de pa√≠s, p. ej. 1031 para alem√°n - est√°ndar,
1033 para ingl√©s EE UU, etc. Encontrar√° una lista de todos los identificadores de pa√≠ses en los
principios b√°sicos de VBScript, en el tema "Diagrama (LCID) de la ID de configuraci√≥n
regional".

Procedimiento
En el evento "Clic del rat√≥n", cree un C Script de usuario en un bot√≥n e introduzca el siguiente
c√≥digo para cambiar a alem√°n el idioma de runtime:

'C123
SetLanguageByLocaleID(1033);

Consulte tambi√©n
Resumen (P√°gina 1515)

9.10.3.5

Ejemplo para desactivar runtime

Introducci√≥n
Con los C Scripts es posible finalizar runtime, por ejemplo, con un clic del rat√≥n o en funci√≥n de
valores de variables u otros eventos.

Procedimiento
El siguiente ejemplo finaliza WinCC Runtime:

'C124
StopRuntime(hmiStopRuntime);

Consulte tambi√©n
Resumen (P√°gina 1515)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1517

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

9.10.3.6

Ejemplo para configurar un cambio de imagen a trav√©s de Property

Introducci√≥n
Si en la configuraci√≥n se utilizan im√°genes divididas (p. ej., en una imagen b√°sica, el t√≠tulo y la
barra de manejo de la interfaz de usuario) y adem√°s una ventana de imagen incrustada para
la visualizaci√≥n propia de la imagen, configure el cambio de imagen mediante las propiedades
de la ventana de imagen.
La propiedad de la ventana de imagen "ScreenName" debe ser modificada para que aparezca
la otra imagen. El C Script y la ventana de imagen deben estar configurados en la misma
imagen.

Procedimiento
En el siguiente ejemplo se muestra la imagen "test" en una ventana de imagen
"ScreenWindow" cuando se ejecuta el C Script:

'C126
ActivateScreenInScreenWindow (screenName, "ScreenWindow", "test");

Consulte tambi√©n
Resumen (P√°gina 1515)

9.10.3.7

Ejemplo para configurar una salida de diagn√≥stico a trav√©s de Trace

Introducci√≥n
Si Ud. ha insertado una ventana de diagn√≥stico GSC en su imagen, en la ventana de
diagn√≥stico Ud. podr√° editar diagn√≥sticos con la orden Trace en runtime.
El diagn√≥stico GSC muestra los m√©todos Trace contenidos en las funciones en la secuencia
temporal en que sean llamados. Esto tambi√©n vale para instrucciones Trace en funciones que
se llaman en funci√≥n definidas por el usuario. Aplicando adecuadamente las instrucciones
Trace, se puede seguir la secuencia de las funciones definidas por el usuario y las funciones
llamadas a su vez en ellas. Indique la instrucci√≥n Trace en la forma "printf(<Salida>)".
En la ventana de diagn√≥stico GSC se muestran salidas Trace de funciones C.

Mostrar texto
El siguiente ejemplo escribe un texto en la ventana de diagn√≥stico:

'C127
printf("Customized C script error message\r\n");

1518

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Consulte tambi√©n
Resumen (P√°gina 1515)

9.10.3.8

Ejemplo para escribir valores de variables

Introducci√≥n
Con los C Scripts se puede escribir el valor de una variable en el controlador, p. ej. con un clic
del rat√≥n en un bot√≥n para la especificaci√≥n de consigna, o definir valores de variables internas
para activar otras funciones.

Escritura sencilla
En el siguiente ejemplo se escribe un valor en la variable "Tag1":

'C128
int value;
value = 7;
SetTagSDWord("Tag1", value);

Consulte tambi√©n
Resumen (P√°gina 1515)

9.10.3.9

Ejemplo para leer valores de variables

Introducci√≥n
Con los C Scripts se puede leer el valor de una variable y seguir trat√°ndolo. De este modo, p. ej.
con un clic de rat√≥n en un bot√≥n, se puede obtener informaci√≥n acerca del estado del sistema
o ejecutar c√°lculos.

Lectura sencilla
En el siguiente ejemplo se lee el valor de la variable "Tag1" y se edita en la ventana de
diagn√≥stico Global Script:

'C134
int value;
value = GetTagGetTagSDWord("Tag1");

Consulte tambi√©n
Resumen (P√°gina 1515)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1519

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

9.10.3.10

Ejemplo para escribir propiedades de objetos

Introducci√≥n
Los C Scripts permiten acceder a las propiedades de todos los objetos de indicaci√≥n y control
en el editor "Im√°genes". Existe la posibilidad de leer las propiedades o modificarlas para
runtime.
El siguiente ejemplo muestra el acceso a una propiedad.

Activaci√≥n sencilla de una propiedad
En el siguiente ejemplo se cambia a rojo el color de fondo del objeto "Button1" contenido en la
imagen:

'C139
SetPropLong("Screen_1","Button1","ForeColor",65333);

Consulte tambi√©n
Resumen (P√°gina 1515)

9.11

Referencia

9.11.1

Lista de funciones

9.11.1.1

Dependencia del panel de operador

Funciones de sistema para Basic Panels
Disponibilidad de las funciones de sistema
La tabla siguiente muestra las funciones de sistema disponibles en los Basic Panels.
Sujeto a cambios t√©cnicos.

1520

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Sinopsis
KP300 Basic
PN

KP400 Basic
PN

KTP600 Basic
PN / DP

KTP1000
Basic PN /
DP

TP1500
Basic PN

Funciones definidas por el usuario

No

No

No

No

No

CerrarSesi√≥n (P√°gina 1597)

S√≠

S√≠

S√≠

S√≠

S√≠

ActivarImagen (P√°gina 1555)

S√≠

S√≠

S√≠

S√≠

S√≠

ActivarImagenConN√∫mero (P√°gina 1556)

S√≠

S√≠

S√≠

S√≠

S√≠

ActivarPantallaDeLimpieza (P√°gina 1703)

No

No

S√≠

S√≠

S√≠

ActivarImagenAnterior (P√°gina 1557)

S√≠

S√≠

S√≠

S√≠

S√≠

ActualizarVariable (P√°gina 1558)

S√≠

S√≠

S√≠

S√≠

S√≠

ModificarContraste (P√°gina 1635)

S√≠

No

S√≠

S√≠

S√≠

IniciarSesi√≥n (P√°gina 1598)

S√≠

S√≠

S√≠

S√≠

S√≠

ArchivarArchivoDeInforme (P√°gina 1589)

No

No

No

No

No

ArchivarVariable (P√°gina 1590)

No

No

No

No

No

1)

EditarAviso (P√°gina 1672)

S√≠

S√≠

S√≠

S√≠

No

ObjetoDeImagenCursorAbajo (P√°gi‚Äê
na 1706)

S√≠

S√≠

S√≠

S√≠

S√≠

ObjetoDeImagenCursorArriba (P√°gi‚Äê
na 1707)

S√≠

S√≠

S√≠

S√≠

S√≠

ObjetoImagenCursorIzquierda (P√°gi‚Äê
na 1709)

No

No

No

No

No

ObjetoDeImagenCursorDerecha (P√°gi‚Äê
na 1708)

No

No

No

No

No

ObjetoDeImagenAvanzarP√°gina (P√°gi‚Äê
na 1708)

S√≠

S√≠

S√≠

S√≠

S√≠

ObjetoDeImagenRetrocederP√°gina (P√°gi‚Äê
na 1709)

S√≠

S√≠

S√≠

S√≠

S√≠

Codificar (P√°gina 1558)

No

No

No

No

No

CodificarEx (P√°gina 1559)

No

No

No

No

No

Tecla directa (P√°gina 1560)

No

No

No

No

No

TeclaDirectaN√∫meroDeImagen (P√°gi‚Äê
na 1563)

No

No

No

No

No

ImprimirImagen (P√°gina 1622)

No

No

No

No

No

ImprimirInforme (P√°gina 1623)

No

No

No

No

No

RegistrarAcci√≥nDeUsuario (P√°gina 1563)

No

No

No

No

No

IncrementarValorEnfocado (P√°gina 1565)

S√≠

S√≠

S√≠

S√≠

No

IncrementarVariable (P√°gina 1602)

S√≠

S√≠

S√≠

S√≠

S√≠

ExportarRegistros (P√°gina 1678)

S√≠

S√≠

S√≠

S√≠

S√≠

ExportarRegistrosConSumaDeVerificaci√≥n
(P√°gina 1680)

No

No

No

No

No

ExportarImportarAdministraci√≥nDeUsuarios
(P√°gina 1598)

No

No

No

No

No

IrAInicio (P√°gina 1711)

S√≠

S√≠

S√≠

S√≠

No

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1521

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KP300 Basic
PN

KP400 Basic
PN

KTP600 Basic
PN / DP

KTP1000
Basic PN /
DP

TP1500
Basic PN

IrAFin (P√°gina 1711)

S√≠

S√≠

S√≠

S√≠

No

RetirarHardwareConSeguridad (P√°gi‚Äê
na 1565)

No

No

No

No

No

NavegadorHTMLCancelar (P√°gina 1640)

No

No

No

No

No

NavegadorHTMLDesplazarseAbajo (P√°gi‚Äê
na 1640)

No

No

No

No

No

NavegadorHTMLActualizar (P√°gina 1641)

No

No

No

No

No

NavegadorHTMLDesplazarseArriba (P√°gi‚Äê
na 1641)

No

No

No

No

No

NavegadorHTMLAdelante (P√°gina 1645)

No

No

No

No

No

NavegadorHTMLAtr√°s (P√°gina 1645)

No

No

No

No

No

NavegadorHTMLAcercar (P√°gina 1642)

No

No

No

No

No

NavegadorHTMLAlejar (P√°gina 1642)

No

No

No

No

No

HTMLNavegadorALaIzquierda (P√°gi‚Äê
na 1642)

No

No

No

No

No

NavegadorHTMLALaDerecha (P√°gina 1643) No

No

No

No

No

NavegadorHTMLAvanzarP√°gina (P√°gi‚Äê
na 1643)

No

No

No

No

No

NavegadorHTMLRetrocederP√°gina (P√°gi‚Äê
na 1644)

No

No

No

No

No

NavegadorHTMLP√°ginaInicio (P√°gina 1644) No

No

No

No

No

ImportarRegistros (P√°gina 1683)

S√≠

S√≠

S√≠

S√≠

S√≠

ImportarRegistrosConSumaDeVerificaci√≥n
(P√°gina 1684)

No

No

No

No

No

InvertirBit (P√°gina 1608)

S√≠

S√≠

S√≠

S√≠

S√≠

InvertirBitEnVariable (P√°gina 1610)

S√≠

S√≠

S√≠

S√≠

S√≠

InvertirEscalaLineal (P√°gina 1603)

S√≠

S√≠

S√≠

S√≠

S√≠

CalibrarPantallaT√°ctil (P√°gina 1636)

No

S√≠

S√≠

S√≠

S√≠

CopiarFichero (P√°gina 1591)

No

No

No

No

No

VisorDeCurvasAvanzarP√°gina (P√°gi‚Äê
na 1646)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeCurvasRetrocederP√°gina (P√°gi‚Äê
na 1646)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeCurvasAmpliar (P√°gina 1647)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeCurvasComprimir (P√°gina 1647)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeCurvasReglaIzquierda (P√°gi‚Äê
na 1648)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeCurvasReglaDerecha (P√°gi‚Äê
na 1648)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeCurvasActivarModoRegla (P√°gi‚Äê
na 1649)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeCurvasIniciarParar (P√°gina 1650)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeCurvasIrAlPrincipio (P√°gina 1650)

S√≠

S√≠

S√≠

S√≠

S√≠

1522

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

CargarRegistro (P√°gina 1686)

KP300 Basic
PN

KP400 Basic
PN

KTP600 Basic
PN / DP

KTP1000
Basic PN /
DP

TP1500
Basic PN

S√≠

S√≠

S√≠

S√≠

S√≠

LeerNombreDeUsuario (P√°gina 1599)

S√≠

S√≠

S√≠

S√≠

S√≠

LeerRegistroDelControlador (P√°gina 1687)

S√≠

S√≠

S√≠

S√≠

S√≠

LeerNombreDelRegistro (P√°gina 1688)

No

No

No

No

No

LeerVariablesDeRegistroDelControlador
(P√°gina 1690)

S√≠

S√≠

S√≠

S√≠

S√≠

LeerN√∫meroDeGrupo (P√°gina 1600)

S√≠

S√≠

S√≠

S√≠

S√≠

LeerBrillo (P√°gina 1639)

No

No

No

No

No

LeerContrase√±a (P√°gina 1600)

S√≠

S√≠

S√≠

S√≠

S√≠

LeerModoPLC (P√°gina 1624)

S√≠

S√≠

S√≠

S√≠

S√≠

EscalaLineal (P√°gina 1604)

S√≠

S√≠

S√≠

S√≠

S√≠

BorrarFichero (P√°gina 1592)

No

No

No

No

No

BorrarRegistro (P√°gina 1691)

S√≠

S√≠

S√≠

S√≠

S√≠

BorrarRegistroMemoria (P√°gina 1692)

No

No

No

No

No

BorrarB√∫ferDeAvisos (P√°gina 1672)

S√≠

S√≠

S√≠

S√≠

S√≠

BorrarB√∫ferDeAvisosProtool (P√°gina 1673)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeAvisosActualizar (P√°gina 1674)

No

No

No

No

No

VisorDeAvisosLoopInAlarm (P√°gina 1674)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeAvisosAcusarAviso (P√°gina 1675)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeAvisosMostrarTextoAyuda (P√°gi‚Äê
na 1676)

S√≠

S√≠

S√≠

S√≠

S√≠

AbrirTodosLosFicheros (P√°gina 1593)

No

No

No

No

No

AbrirTecladoDePantalla (P√°gina 1706)

No

No

No

No

No

AbrirDi√°logoControlPanel (P√°gina 1566)

S√≠ 2)

S√≠ 2)

S√≠ 2)

S√≠ 2)

S√≠ 2)

AbrirVentanaDeS√≠mboloDelSistema (P√°gi‚Äê
na 1567)

No

No

No

No

No

AbrirInternetExplorer (P√°gina 1567)

No

No

No

No

No

AbrirPanelDeControl (P√°gina 1568)

No

No

No

No

No

AbrirAdministradorDeTareas (P√°gina 1705)

No

No

No

No

No

AcusarAviso (P√°gina 1676)

S√≠

S√≠

S√≠

S√≠

No

PDFDesplazarseAbajo (P√°gina 1651)

No

No

No

No

No

PDFDesplazarseArriba (P√°gina 1651)

No

No

No

No

No

PDFAdaptarAncho (P√°gina 1652)

No

No

No

No

No

PDFAdaptarAltura (P√°gina 1652)

No

No

No

No

No

PDFPrimeraP√°gina (P√°gina 1652)

No

No

No

No

No

PDF√öltimaP√°gina (P√°gina 1653)

No

No

No

No

No

PDFAvanzarP√°gina (P√°gina 1653)

No

No

No

No

No

PDFIrAP√°gina (P√°gina 1654)

No

No

No

No

No

PDFRetrocederP√°gina (P√°gina 1654)

No

No

No

No

No

PDFAcercar (P√°gina 1655)

No

No

No

No

No

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1523

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

PDFAlejar (P√°gina 1655)

KP300 Basic
PN

KP400 Basic
PN

KTP600 Basic
PN / DP

KTP1000
Basic PN /
DP

TP1500
Basic PN

No

No

No

No

No

PDFDesplazarseIzquierda (P√°gina 1656)

No

No

No

No

No

PDFDesplazarseDerecha (P√°gina 1656)

No

No

No

No

No

PDFZoomOriginal (P√°gina 1656)

No

No

No

No

No

VisorDeRecetasRegistroNuevo (P√°gi‚Äê
na 1693)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasLeerRegistroDelControla‚Äê
dor (P√°gina 1693)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasBorrarRegistro (P√°gi‚Äê
na 1694)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasMen√∫ (P√°gina 1694)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasAbrir (P√°gina 1695)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasEscribirRegistroEnContro‚Äê
lador (P√°gina 1696)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasGuardarRegistro (P√°gi‚Äê
na 1696)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasGuardarRegistroComo (P√°‚Äê S√≠
gina 1696)

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasSincronizarRegistroConVa‚Äê
riables (P√°gina 1697)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasCambiarNombreDeRegis‚Äê
tro (P√°gina 1697)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasMostrarTextoDeAyuda (P√°‚Äê S√≠
gina 1698)

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasAtr√°s (P√°gina 1698)

S√≠

S√≠

S√≠

S√≠

S√≠

DesactivarBit (P√°gina 1611)

S√≠

S√≠

S√≠

S√≠

S√≠

DesactivarBitEnVariable (P√°gina 1613)

S√≠

S√≠

S√≠

S√≠

S√≠

Bot√≥nPulsar (P√°gina 1571)

S√≠

S√≠

S√≠

S√≠

No

Bot√≥nSoltar (P√°gina 1572)

S√≠

S√≠

S√≠

S√≠

No

DesplazarYEnmascarar (P√°gina 1615)

S√≠

S√≠

S√≠

S√≠

S√≠

CerrarTodosLosFicheros (P√°gina 1594)

No

No

No

No

No

EscribirRegistroEnControlador (P√°gi‚Äê
na 1699)

S√≠

S√≠

S√≠

S√≠

S√≠

EscribirVariableDeRegistroEnControlador
(P√°gina 1700)

S√≠

S√≠

S√≠

S√≠

S√≠

AvanzarP√°gina (P√°gina 1710)

S√≠

S√≠

S√≠

S√≠

No

RetrocederP√°gina (P√°gina 1710)

S√≠

S√≠

S√≠

S√≠

No

EnviarCorreoElectr√≥nico (P√°gina 1569)

No

No

No

No

No

ConfigurarSe√±alAc√∫stica (P√°gina 1637)

No

No

No

No

No

ConfigurarModoDeVisualizaci√≥n (P√°gi‚Äê
na 1625)

No

No

No

No

No

EstablecerModoDeOperaci√≥nPanel (P√°gi‚Äê
na 1626)

S√≠

S√≠

S√≠

S√≠

S√≠

1524

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KP300 Basic
PN

KP400 Basic
PN

KTP600 Basic
PN / DP

KTP1000
Basic PN /
DP

TP1500
Basic PN

ActivarBit (P√°gina 1617)

S√≠

S√≠

S√≠

S√≠

S√≠

ActivarBitDeVariable (P√°gina 1619)

S√≠

S√≠

S√≠

S√≠

S√≠

ActivarBitMientrasTeclaPulsada (P√°gi‚Äê
na 1621)

S√≠

S√≠

S√≠

S√≠

S√≠

EstablecerColorRetroiluminaci√≥n (P√°gi‚Äê
na 1639)

S√≠

S√≠

No

No

No

EstablecerBrillo (P√°gina 1638)

No

S√≠

S√≠

No

No

EstablecerModoTecladoDePantalla (P√°gi‚Äê
na 1627)

No

No

No

No

No

ActivarModoDeInformeAviso (P√°gina 1623)

No

No

No

No

No

DefinirEstadoVariableDeReceta (P√°gi‚Äê
na 1701)

S√≠

S√≠

S√≠

S√≠

S√≠

AjustarHorarioVerano (P√°gina 1570)

No

No

No

No

No

EstablecerIdioma (P√°gina 1629)

S√≠

S√≠

S√≠

S√≠

S√≠

DefinirVariable (P√°gina 1606)

S√≠

S√≠

S√≠

S√≠

S√≠

EstablecerModoDeConexi√≥n (P√°gina 1630)

S√≠

S√≠

S√≠

S√≠

S√≠

AccesoWebActivar (P√°gina 1631)

No

No

No

No

No

CopiaSeguridadSistemaDeArchivosRAM
(P√°gina 1572)

No

No

No

No

No

SimularTeclaSistema (P√°gina 1573)

S√≠

S√≠

S√≠

S√≠

No

SimularVariable (P√°gina 1574)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorSmartClientActualizar (P√°gina 1665)

No

No

No

No

No

VisorSmartClientProtecci√≥nContraEscritu‚Äê
raOff (P√°gina 1665)

No

No

No

No

No

VisorSmartClientProtecci√≥nContraEscritu‚Äê
raOn (P√°gina 1666)

No

No

No

No

No

VisorSmartClientDesconectar (P√°gi‚Äê
na 1666)

No

No

No

No

No

VisorSmartClientConectar (P√°gina 1667)

No

No

No

No

No

VisorSmartClientSalir (P√°gina 1667)

No

No

No

No

No

GuardarRegistro (P√°gina 1702)

S√≠

S√≠

S√≠

S√≠

S√≠

IniciarArchivaci√≥n (P√°gina 1595)

No

No

No

No

No

IniciarFicheroSiguiente (P√°gina 1595)

No

No

No

No

No

IniciarPrograma (P√°gina 1575)

No

No

No

No

No

EstadoForzarLeerValores (P√°gina 1577)

No

No

No

No

No

EstadoForzarEscribirValores (P√°gina 1577)

No

No

No

No

No

ControlarSmartServer (P√°gina 1578)

No

No

No

No

No

ControlarServidorWeb (P√°gina 1578)

No

No

No

No

No

PararArchivaci√≥n (P√°gina 1596)

No

No

No

No

No

PararRuntime (P√°gina 1579)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDiagn√≥sticoSistemaActualizarB√∫‚Äê
ferPLC (P√°gina 1669)

S√≠

S√≠

S√≠

S√≠

S√≠

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1525

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KP300 Basic
PN

KP400 Basic
PN

KTP600 Basic
PN / DP

KTP1000
Basic PN /
DP

TP1500
Basic PN

VisorDiagn√≥sticoSistemaActivar (P√°gi‚Äê
na 1668)

No

No

No

No

No

VisorDiagn√≥sticoSistemaVistaDetallada
(P√°gina 1669)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDiagn√≥sticoSistemaB√∫ferDiagn√≥stico
(P√°gina 1670)

No

No

No

No

No

VisorDiagn√≥sticoSistemaVistaDispositivos
(P√°gina 1670)

No

No

No

No

No

VisorDiagn√≥sticoSistemaAtr√°s (P√°gi‚Äê
na 1671)

S√≠

S√≠

S√≠

S√≠

S√≠

ConsultarTexto (P√°gina 1580)

No

No

No

No

No

DesconectarVariableDelVolante (P√°gi‚Äê
na 1581)

No

No

No

No

No

ConectarVariableAlVolante (P√°gina 1581)

No

No

No

No

No

IdentificarCambioDeUsuario (P√°gina 1601)

S√≠

S√≠

S√≠

S√≠

S√≠

ReducirValorEnfocado (P√°gina 1582)

S√≠

S√≠

S√≠

S√≠

No

DecrementarVariable (P√°gina 1607)

S√≠

S√≠

S√≠

S√≠

S√≠

CambiarConexi√≥n (P√°gina 1632)

S√≠

S√≠

S√≠

S√≠

S√≠

CambiarConexi√≥nEIP (P√°gina 1634)

No

No

No

No

No

MostrarDi√°logoInicioSesi√≥n (P√°gina 1602)

S√≠

S√≠

S√≠

S√≠

S√≠

MostrarTextoDeAyuda (P√°gina 1582)

S√≠

S√≠

S√≠

S√≠

S√≠

MostrarVentanaDeAvisos (P√°gina 1677)

S√≠

S√≠

S√≠

S√≠

S√≠

MostrarImagenEmergente (P√°gina 1584)

No

No

No

No

No

MostrarImagenEmergenteTama√±oModifica‚Äê
ble (P√°gina 1585)

No

No

No

No

No

MostrarImagenDeslizable (P√°gina 1588)

No

No

No

No

No

MostrarVersi√≥nDeSoftware (P√°gina 1583)

No

No

No

No

No

MostrarVentanaDeDiagn√≥sticoDelSistema
(P√°gina 1671)

No

No

No

No

No

MostrarAvisoDeSistema (P√°gina 1677)

No

No

No

No

No

1)
2)

Solo para KTP600 Basic mono PN
Solo para modificar la configuraci√≥n IP

Funciones de sistema para Basic Panels de 2.¬™ generaci√≥n
Disponibilidad de las funciones de sistema
La tabla siguiente muestra las funciones de sistema disponibles en los Basic Panels.
Sujeto a cambios t√©cnicos.

1526

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Sinopsis
KTP400 Basic
PN

KTP700 Basic
PN / DP

KTP900 Ba‚Äê
sic PN

KTP1200 Basic
PN / DP

Funciones definidas por el usuario

No

No

No

No

CerrarSesi√≥n (P√°gina 1597)

S√≠

S√≠

S√≠

S√≠

ActivarImagen (P√°gina 1555)

S√≠

S√≠

S√≠

S√≠

ActivarImagenConN√∫mero (P√°gina 1556)

S√≠

S√≠

S√≠

S√≠

ActivarPantallaDeLimpieza (P√°gina 1703)

S√≠

S√≠

S√≠

S√≠

ActivarImagenAnterior (P√°gina 1557)

S√≠

S√≠

S√≠

S√≠

ActualizarVariable (P√°gina 1558)

S√≠

S√≠

S√≠

S√≠

ModificarContraste (P√°gina 1635)

No

No

No

No

IniciarSesi√≥n (P√°gina 1598)

S√≠

S√≠

S√≠

S√≠

ArchivarArchivoDeInforme (P√°gina 1589)

No

No

No

No

ArchivarVariable (P√°gina 1590)

S√≠

S√≠

S√≠

S√≠

EditarAviso (P√°gina 1672)

S√≠

S√≠

S√≠

S√≠

ObjetoDeImagenCursorAbajo (P√°gina 1706)

S√≠

S√≠

S√≠

S√≠

ObjetoDeImagenCursorArriba (P√°gina 1707)

S√≠

S√≠

S√≠

S√≠

ObjetoImagenCursorIzquierda (P√°gina 1709)

S√≠

S√≠

S√≠

S√≠

ObjetoDeImagenCursorDerecha (P√°gina 1708)

S√≠

S√≠

S√≠

S√≠

ObjetoDeImagenAvanzarP√°gina (P√°gina 1708)

S√≠

S√≠

S√≠

S√≠

ObjetoDeImagenRetrocederP√°gina (P√°gi‚Äê
na 1709)

S√≠

S√≠

S√≠

S√≠

Codificar (P√°gina 1558)

No

No

No

No

CodificarEx (P√°gina 1559)

No

No

No

No

Tecla directa (P√°gina 1560)

No

No

No

No

TeclaDirectaN√∫meroDeImagen (P√°gina 1563)

No

No

No

No

ImprimirImagen (P√°gina 1622)

No

No

No

No

ImprimirInforme (P√°gina 1623)

No

No

No

No

RegistrarAcci√≥nDeUsuario (P√°gina 1563)

No

No

No

No

IncrementarValorEnfocado (P√°gina 1565)

S√≠

S√≠

S√≠

S√≠

IncrementarVariable (P√°gina 1602)

S√≠

S√≠

S√≠

S√≠

ExportarRegistros (P√°gina 1678)

S√≠

S√≠

S√≠

S√≠

ExportarRegistrosConSumaDeVerificaci√≥n (P√°‚Äê
gina 1680)

No

No

No

No

ExportarImportarAdministraci√≥nDeUsuarios (P√°‚Äê No
gina 1598)

No

No

No

IrAInicio (P√°gina 1711)

S√≠

S√≠

S√≠

S√≠

IrAFin (P√°gina 1711)

S√≠

S√≠

S√≠

S√≠

RetirarHardwareConSeguridad (P√°gina 1565)

S√≠

S√≠

S√≠

S√≠

NavegadorHTMLCancelar (P√°gina 1640)

S√≠

S√≠

S√≠

S√≠

NavegadorHTMLDesplazarseAbajo (P√°gi‚Äê
na 1640)

S√≠

S√≠

S√≠

S√≠

NavegadorHTMLActualizar (P√°gina 1641)

S√≠

S√≠

S√≠

S√≠

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1527

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KTP400 Basic
PN

KTP700 Basic
PN / DP

KTP900 Ba‚Äê
sic PN

KTP1200 Basic
PN / DP

NavegadorHTMLDesplazarseArriba (P√°gi‚Äê
na 1641)

S√≠

S√≠

S√≠

S√≠

NavegadorHTMLAcercar (P√°gina 1642)

S√≠

S√≠

S√≠

S√≠

NavegadorHTMLAlejar (P√°gina 1642)

S√≠

S√≠

S√≠

S√≠

HTMLNavegadorALaIzquierda (P√°gina 1642)

S√≠

S√≠

S√≠

S√≠

NavegadorHTMLALaDerecha (P√°gina 1643)

S√≠

S√≠

S√≠

S√≠

NavegadorHTMLRetrocederP√°gina (P√°gi‚Äê
na 1644)

S√≠

S√≠

S√≠

S√≠

NavegadorHTMLAvanzarP√°gina (P√°gina 1643)

S√≠

S√≠

S√≠

S√≠

NavegadorHTMLP√°ginaInicio (P√°gina 1644)

S√≠

S√≠

S√≠

S√≠

NavegadorHTMLAdelante (P√°gina 1645)

S√≠

S√≠

S√≠

S√≠

NavegadorHTMLAtr√°s (P√°gina 1645)

S√≠

S√≠

S√≠

S√≠

ImportarRegistros (P√°gina 1683)

S√≠

S√≠

S√≠

S√≠

ImportarRegistrosConSumaDeVerificaci√≥n (P√°‚Äê
gina 1684)

No

No

No

No

InvertirBit (P√°gina 1608)

S√≠

S√≠

S√≠

S√≠

InvertirBitEnVariable (P√°gina 1610)

S√≠

S√≠

S√≠

S√≠

InvertirEscalaLineal (P√°gina 1603)

S√≠

S√≠

S√≠

S√≠

CalibrarPantallaT√°ctil (P√°gina 1636)

S√≠

S√≠

S√≠

S√≠

CopiarFichero (P√°gina 1591)

No

No

No

No

VisorDeCurvasAvanzarP√°gina (P√°gina 1646)

S√≠

S√≠

S√≠

S√≠

VisorDeCurvasRetrocederP√°gina (P√°gina 1646)

S√≠

S√≠

S√≠

S√≠

VisorDeCurvasAmpliar (P√°gina 1647)

S√≠

S√≠

S√≠

S√≠

VisorDeCurvasComprimir (P√°gina 1647)

S√≠

S√≠

S√≠

S√≠

VisorDeCurvasReglaIzquierda (P√°gina 1648)

S√≠

S√≠

S√≠

S√≠

VisorDeCurvasReglaDerecha (P√°gina 1648)

S√≠

S√≠

S√≠

S√≠

VisorDeCurvasActivarModoRegla (P√°gina 1649) S√≠

S√≠

S√≠

S√≠

VisorDeCurvasIniciarParar (P√°gina 1650)

S√≠

S√≠

S√≠

S√≠

VisorDeCurvasIrAlPrincipio (P√°gina 1650)

S√≠

S√≠

S√≠

S√≠

CargarRegistro (P√°gina 1686)

S√≠

S√≠

S√≠

S√≠

LeerNombreDeUsuario (P√°gina 1599)

S√≠

S√≠

S√≠

S√≠

LeerRegistroDelControlador (P√°gina 1687)

S√≠

S√≠

S√≠

S√≠

LeerNombreDelRegistro (P√°gina 1688)

No

No

No

No

LeerVariablesDeRegistroDelControlador (P√°gi‚Äê
na 1690)

S√≠

S√≠

S√≠

S√≠

LeerN√∫meroDeGrupo (P√°gina 1600)

S√≠

S√≠

S√≠

S√≠

LeerBrillo (P√°gina 1639)

No

LeerContrase√±a (P√°gina 1600)

No

LeerModoPLC (P√°gina 1624)

S√≠

S√≠

S√≠

S√≠

EscalaLineal (P√°gina 1604)

S√≠

S√≠

S√≠

S√≠

BorrarFichero (P√°gina 1592)

S√≠

S√≠

S√≠

S√≠

1528

No
1)

No

No
1)

No

No
1)

No 1)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KTP400 Basic
PN

KTP700 Basic
PN / DP

KTP900 Ba‚Äê
sic PN

KTP1200 Basic
PN / DP

BorrarRegistro (P√°gina 1691)

S√≠

S√≠

S√≠

S√≠

BorrarRegistroMemoria (P√°gina 1692)

No

No

No

No

BorrarB√∫ferDeAvisos (P√°gina 1672)

S√≠

S√≠

S√≠

S√≠

BorrarB√∫ferDeAvisosProtool (P√°gina 1673)

S√≠

S√≠

S√≠

S√≠

VisorDeAvisosActualizar (P√°gina 1674)

No

No

No

No

VisorDeAvisosLoopInAlarm (P√°gina 1674)

S√≠

S√≠

S√≠

S√≠

VisorDeAvisosAcusarAviso (P√°gina 1675)

S√≠

S√≠

S√≠

S√≠

VisorDeAvisosMostrarTextoAyuda (P√°gi‚Äê
na 1676)

S√≠

S√≠

S√≠

S√≠

AbrirTodosLosFicheros (P√°gina 1593)

S√≠

S√≠

S√≠

S√≠

AbrirTecladoDePantalla (P√°gina 1706)

No

No

No

No

AbrirDi√°logoControlPanel (P√°gina 1566)

S√≠ 2)

S√≠ 2)

S√≠ 2)

S√≠ 2)

AbrirVentanaDeS√≠mboloDelSistema (P√°gi‚Äê
na 1567)

No

No

No

No

AbrirInternetExplorer (P√°gina 1567)

No

No

No

No

AbrirPanelDeControl (P√°gina 1568)

No

No

No

No

AbrirAdministradorDeTareas (P√°gina 1705)

No

No

No

No

PDFDesplazarseAbajo (P√°gina 1651)

No

No

No

No

PDFAdaptarAncho (P√°gina 1652)

No

No

No

No

PDFAdaptarAltura (P√°gina 1652)

No

No

No

No

PDFDesplazarseArriba (P√°gina 1651)

No

No

No

No

PDFPrimeraP√°gina (P√°gina 1652)

No

No

No

No

PDF√öltimaP√°gina (P√°gina 1653)

No

No

No

No

PDFAvanzarP√°gina (P√°gina 1653)

No

No

No

No

PDFRetrocederP√°gina (P√°gina 1654)

No

No

No

No

PDFIrAP√°gina (P√°gina 1654)

No

No

No

No

PDFAcercar (P√°gina 1655)

No

No

No

No

PDFAlejar (P√°gina 1655)

No

No

No

No

PDFDesplazarseIzquierda (P√°gina 1656)

No

No

No

No

PDFDesplazarseDerecha (P√°gina 1656)

No

No

No

No

PDFZoomOriginal (P√°gina 1656)

No

No

No

No

AcusarAviso (P√°gina 1676)

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasRegistroNuevo (P√°gina 1693)

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasLeerRegistroDelControlador
(P√°gina 1693)

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasBorrarRegistro (P√°gina 1694)

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasMen√∫ (P√°gina 1694)

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasAbrir (P√°gina 1695)

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasEscribirRegistroEnControlador
(P√°gina 1696)

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasGuardarRegistro (P√°gina 1696)

S√≠

S√≠

S√≠

S√≠

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1529

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KTP400 Basic
PN

KTP700 Basic
PN / DP

KTP900 Ba‚Äê
sic PN

KTP1200 Basic
PN / DP

VisorDeRecetasGuardarRegistroComo (P√°gi‚Äê
na 1696)

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasSincronizarRegistroConVaria‚Äê
bles (P√°gina 1697)

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasCambiarNombreDeRegistro
(P√°gina 1697)

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasMostrarTextoDeAyuda (P√°gi‚Äê
na 1698)

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasAtr√°s (P√°gina 1698)

S√≠

S√≠

S√≠

S√≠

DesactivarBit (P√°gina 1611)

S√≠

S√≠

S√≠

S√≠

DesactivarBitEnVariable (P√°gina 1613)

S√≠

S√≠

S√≠

S√≠

Bot√≥nPulsar (P√°gina 1571)

S√≠

S√≠

S√≠

S√≠

Bot√≥nSoltar (P√°gina 1572)

S√≠

S√≠

S√≠

S√≠

DesplazarYEnmascarar (P√°gina 1615)

S√≠

S√≠

S√≠

S√≠

CerrarTodosLosFicheros (P√°gina 1594)

S√≠

S√≠

S√≠

S√≠

EscribirRegistroEnControlador (P√°gina 1699)

S√≠

S√≠

S√≠

S√≠

EscribirVariableDeRegistroEnControlador (P√°gi‚Äê S√≠
na 1700)

S√≠

S√≠

S√≠

AvanzarP√°gina (P√°gina 1710)

S√≠

S√≠

S√≠

S√≠

RetrocederP√°gina (P√°gina 1710)

S√≠

S√≠

S√≠

S√≠

EnviarCorreoElectr√≥nico (P√°gina 1569)

No

No

No

No

ConfigurarSe√±alAc√∫stica (P√°gina 1637)

No

No

No

No

ConfigurarModoDeVisualizaci√≥n (P√°gina 1625)

No

No

No

No

EstablecerModoDeOperaci√≥nPanel (P√°gi‚Äê
na 1626)

S√≠

S√≠

S√≠

S√≠

ActivarBit (P√°gina 1617)

S√≠

S√≠

S√≠

S√≠

ActivarBitDeVariable (P√°gina 1619)

S√≠

S√≠

S√≠

S√≠

ActivarBitMientrasTeclaPulsada (P√°gina 1621)

S√≠

S√≠

S√≠

S√≠

EstablecerColorRetroiluminaci√≥n (P√°gina 1639)

No

No

No

No

EstablecerBrillo (P√°gina 1638)

S√≠

S√≠

S√≠

S√≠

EstablecerModoTecladoDePantalla (P√°gi‚Äê
na 1627)

No

No

No

No

ActivarModoDeInformeAviso (P√°gina 1623)

No

No

No

No

DefinirEstadoVariableDeReceta (P√°gina 1701)

S√≠

S√≠

S√≠

S√≠

AjustarHorarioVerano (P√°gina 1570)

No

No

No

No

EstablecerIdioma (P√°gina 1629)

S√≠

S√≠

S√≠

S√≠

DefinirVariable (P√°gina 1606)

S√≠

S√≠

S√≠

S√≠

EstablecerModoDeConexi√≥n (P√°gina 1630)

S√≠

S√≠

S√≠

S√≠

AccesoWebActivar (P√°gina 1631)

No

No

No

No

CopiaSeguridadSistemaDeArchivosRAM (P√°gi‚Äê
na 1572)

No

No

No

No

SimularTeclaSistema (P√°gina 1573)

S√≠

S√≠

S√≠

S√≠

1530

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KTP400 Basic
PN

KTP700 Basic
PN / DP

KTP900 Ba‚Äê
sic PN

KTP1200 Basic
PN / DP

SimularVariable (P√°gina 1574)

S√≠

S√≠

S√≠

S√≠

VisorSmartClientActualizar (P√°gina 1665)

No

No

No

No

VisorSmartClientProtecci√≥nContraEscrituraOff
(P√°gina 1665)

No

No

No

No

VisorSmartClientProtecci√≥nContraEscrituraOn
(P√°gina 1666)

No

No

No

No

VisorSmartClientDesconectar (P√°gina 1666)

No

No

No

No

VisorSmartClientConectar (P√°gina 1667)

No

No

No

No

VisorSmartClientSalir (P√°gina 1667)

No

No

No

No

GuardarRegistro (P√°gina 1702)

S√≠

S√≠

S√≠

S√≠

IniciarArchivaci√≥n (P√°gina 1595)

S√≠

S√≠

S√≠

S√≠

IniciarFicheroSiguiente (P√°gina 1595)

No

No

No

No

IniciarPrograma (P√°gina 1575)

No

No

No

No

EstadoForzarLeerValores (P√°gina 1577)

No

No

No

No

EstadoForzarEscribirValores (P√°gina 1577)

No

No

No

No

ControlarSmartServer (P√°gina 1578)

No

No

No

No

ControlarServidorWeb (P√°gina 1578)

No

No

No

No

PararArchivaci√≥n (P√°gina 1596)

S√≠

S√≠

S√≠

S√≠

PararRuntime (P√°gina 1579)

S√≠

S√≠

S√≠

S√≠

VisorDiagn√≥sticoSistemaActivar (P√°gina 1668)

No

No

No

No

VisorDiagn√≥sticoSistemaActualizarB√∫ferPLC
(P√°gina 1669)

S√≠

S√≠

S√≠

S√≠

VisorDiagn√≥sticoSistemaVistaDetallada (P√°gi‚Äê
na 1669)

S√≠

S√≠

S√≠

S√≠

VisorDiagn√≥sticoSistemaB√∫ferDiagn√≥stico (P√°‚Äê
gina 1670)

No

No

No

No

VisorDiagn√≥sticoSistemaVistaDispositivos (P√°gi‚Äê No
na 1670)

No

No

No

VisorDiagn√≥sticoSistemaAtr√°s (P√°gina 1671)

S√≠

S√≠

S√≠

S√≠

ConsultarTexto (P√°gina 1580)

No

No

No

No

DesconectarVariableDelVolante (P√°gina 1581)

No

No

No

No

ConectarVariableAlVolante (P√°gina 1581)

No

No

No

No

IdentificarCambioDeUsuario (P√°gina 1601)

S√≠

S√≠

S√≠

S√≠

ReducirValorEnfocado (P√°gina 1582)

S√≠

S√≠

S√≠

S√≠

DecrementarVariable (P√°gina 1607)

S√≠

S√≠

S√≠

S√≠

CambiarConexi√≥n (P√°gina 1632)

S√≠

S√≠

S√≠

S√≠

CambiarConexi√≥nEIP (P√°gina 1634)

No

No

No

No

MostrarDi√°logoInicioSesi√≥n (P√°gina 1602)

S√≠

S√≠

S√≠

S√≠

MostrarTextoDeAyuda (P√°gina 1582)

S√≠

S√≠

S√≠

S√≠

MostrarVentanaDeAvisos (P√°gina 1677)

S√≠

S√≠

S√≠

S√≠

MostrarImagenEmergente (P√°gina 1584)

No

No

No

No

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1531

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

MostrarImagenEmergenteTama√±oModificable
(P√°gina 1585)

KTP400 Basic
PN

KTP700 Basic
PN / DP

KTP900 Ba‚Äê
sic PN

KTP1200 Basic
PN / DP

No

No

No

No

MostrarImagenDeslizable (P√°gina 1588)

No

No

No

No

MostrarVersi√≥nDeSoftware (P√°gina 1583)

No

No

No

No

MostrarVentanaDeDiagn√≥sticoDelSistema (P√°‚Äê
gina 1671)

No

No

No

No

MostrarAvisoDeSistema (P√°gina 1677)

No

No

No

No

1)
2)

No disponible para paneles a partir de la versi√≥n V14.0
Solo para modificar la configuraci√≥n IP

Funciones de sistema para Comfort Panels
Disponibilidad de las funciones de sistema
La tabla siguiente muestra la disponibilidad de las funciones de sistema en los Comfort Panels.
Sujeto a cambios t√©cnicos.

Sinopsis
KTP400
KP400

TP700
TP900
TP1200
TP1500
TP1900
TP2200

KP700
KP900
KP1200
KP1500

Funciones definidas por el usuario

S√≠

S√≠

S√≠

CerrarSesi√≥n (P√°gina 1597)

S√≠

S√≠

S√≠

ActivarImagen (P√°gina 1555)

S√≠

S√≠

S√≠

ActivarImagenConN√∫mero (P√°gi‚Äê
na 1556)

S√≠

S√≠

S√≠

ActivarVisorC√≥digoPLC (P√°gi‚Äê
na 1657)

No

S√≠

S√≠

ActivarPantallaDeLimpieza (P√°gi‚Äê
na 1703)

S√≠ 1)

S√≠

No

ActivarImagenAnterior (P√°gina 1557)

S√≠

S√≠

S√≠

ActualizarVariable (P√°gina 1558)

S√≠

S√≠

S√≠

ModificarContraste (P√°gina 1635)

No

No

No

IniciarSesi√≥n (P√°gina 1598)

S√≠

S√≠

S√≠

ArchivarArchivoDeInforme (P√°gi‚Äê
na 1589)

S√≠

S√≠

S√≠

ArchivarVariable (P√°gina 1590)

S√≠

S√≠

S√≠

1532

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KTP400
KP400

TP700
TP900
TP1200
TP1500
TP1900
TP2200

KP700
KP900
KP1200
KP1500

EditarAviso (P√°gina 1672)

S√≠

No

S√≠

ObjetoDeImagenCursorAbajo (P√°gi‚Äê
na 1706)

S√≠

S√≠

S√≠

ObjetoDeImagenCursorArriba (P√°gi‚Äê
na 1707)

S√≠

S√≠

S√≠

ObjetoImagenCursorIzquierda (P√°gi‚Äê
na 1709)

No

S√≠

S√≠

ObjetoDeImagenCursorDerecha (P√°‚Äê
gina 1708)

No

S√≠

S√≠

ObjetoDeImagenAvanzarP√°gina (P√°‚Äê S√≠
gina 1708)

S√≠

S√≠

ObjetoDeImagenRetrocederP√°gina
(P√°gina 1709)

S√≠

S√≠

S√≠

Codificar (P√°gina 1558)

S√≠

S√≠

S√≠

CodificarEx (P√°gina 1559)

S√≠

S√≠

S√≠

TeclaDirecta (P√°gina 1560)

S√≠

1)

S√≠

No

TeclaDirectaNumeroDeImagen (P√°gi‚Äê S√≠
na 1563)

1)

S√≠

No

ImprimirImagen (P√°gina 1622)

S√≠

S√≠

S√≠

ImprimirInforme (P√°gina 1623)

S√≠

S√≠

S√≠

RegistrarAcci√≥nDeUsuario (P√°gi‚Äê
na 1563)

S√≠

S√≠

S√≠

IncrementarValorEnfocado (P√°gi‚Äê
na 1565)

S√≠

No

S√≠

IncrementarVariable (P√°gina 1602)

S√≠

S√≠

S√≠

ExportarRegistros (P√°gina 1678)

S√≠

S√≠

S√≠

ExportarRegistrosConSumaDeVerifi‚Äê
caci√≥n (P√°gina 1680)

S√≠

S√≠

S√≠

ExportarImportarAdministraci√≥nDeU‚Äê
suarios (P√°gina 1598)

S√≠

S√≠

S√≠

IrAInicio (P√°gina 1711)

S√≠

No

S√≠

IrAFin (P√°gina 1711)

S√≠

No

S√≠

RetirarHardwareConSeguridad (P√°gi‚Äê S√≠
na 1565)

S√≠

S√≠

NavegadorHTMLCancelar (P√°gi‚Äê
na 1640)

No

S√≠

S√≠

NavegadorHTMLDesplazarseAbajo
(P√°gina 1640)

No

S√≠

S√≠

NavegadorHTMLActualizar (P√°gi‚Äê
na 1641)

No

S√≠

S√≠

NavegadorHTMLDesplazarseArriba
(P√°gina 1641)

No

S√≠

S√≠

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1533

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KTP400

TP700
TP900
TP1200
TP1500
TP1900
TP2200

KP700
KP900
KP1200
KP1500

No

S√≠

S√≠

NavegadorHTMLAtr√°s (P√°gina 1645)

No

S√≠

S√≠

NavegadorHTMLAcercar (P√°gi‚Äê
na 1642)

No

S√≠

S√≠

NavegadorHTMLAlejar (P√°gina 1642) No

S√≠

S√≠

HTMLNavegadorALaIzquierda (P√°gi‚Äê
na 1642)

No

S√≠

S√≠

NavegadorHTMLALaDerecha (P√°gi‚Äê
na 1643)

No

S√≠

S√≠

NavegadorHTMLRetrocederP√°gina
(P√°gina 1644)

No

S√≠

S√≠

NavegadorHTMLAvanzarP√°gina (P√°‚Äê No
gina 1643)

S√≠

S√≠

NavegadorHTMLP√°ginaInicio (P√°gi‚Äê
na 1644)

No

S√≠

S√≠

NavegadorHTMLP√°ginaInicio (P√°gi‚Äê
na 1644)

No

S√≠

S√≠

ImportarRegistros (P√°gina 1683)

S√≠

S√≠

S√≠

ImportarRegistrosConSumaDeVerifi‚Äê
caci√≥n (P√°gina 1684)

S√≠

S√≠

S√≠

InvertirBit (P√°gina 1608)

S√≠

S√≠

S√≠

InvertirBitEnVariable (P√°gina 1610)

S√≠

S√≠

S√≠

InvertirEscalaLineal (P√°gina 1603)

S√≠

S√≠

S√≠

KP400

NavegadorHTMLAdelante (P√°gi‚Äê
na 1645)

CalibrarPantallaT√°ctil (P√°gina 1636)

S√≠

S√≠

No

CopiarFichero (P√°gina 1591)

S√≠

S√≠

S√≠

VisorDeCurvasAvanzarP√°gina (P√°gi‚Äê
na 1646)

S√≠

S√≠

S√≠

VisorDeCurvasRetrocederP√°gina
(P√°gina 1646)

S√≠

S√≠

S√≠

VisorDeCurvasAmpliar (P√°gina 1647) S√≠

S√≠

S√≠

VisorDeCurvasComprimir (P√°gi‚Äê
na 1647)

S√≠

S√≠

S√≠

VisorDeCurvasReglaIzquierda (P√°gi‚Äê
na 1648)

S√≠

S√≠

S√≠

VisorDeCurvasReglaDerecha (P√°gi‚Äê
na 1648)

S√≠

S√≠

S√≠

VisorDeCurvasActivarModoRegla
(P√°gina 1649)

S√≠

S√≠

S√≠

VisorDeCurvasIniciarParar (P√°gi‚Äê
na 1650)

S√≠

S√≠

S√≠

1534

1)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KTP400

TP700
TP900
TP1200
TP1500
TP1900
TP2200

KP700
KP900
KP1200
KP1500

S√≠

S√≠

S√≠

KP400

VisorDeCurvasIrAlPrincipio (P√°gi‚Äê
na 1650)
CargarRegistro (P√°gina 1686)

S√≠

S√≠

S√≠

LeerNombreDeUsuario (P√°gi‚Äê
na 1599)

S√≠

S√≠

S√≠

LeerRegistroDelControlador (P√°gi‚Äê
na 1687)

S√≠

S√≠

S√≠

LeerNombreDelRegistro (P√°gi‚Äê
na 1688)

S√≠

S√≠

S√≠

LeerVariablesDeRegistroDelContro‚Äê
lador (P√°gina 1690)

S√≠

S√≠

S√≠

LeerN√∫meroDeGrupo (P√°gina 1600)

S√≠

S√≠

S√≠

LeerBrillo (P√°gina 1639)

S√≠

LeerContrase√±a (P√°gina 1600)

No

LeerModoPLC (P√°gina 1624)

S√≠

S√≠

S√≠

EscalaLineal (P√°gina 1604)

S√≠

S√≠

S√≠

BorrarFichero (P√°gina 1592)

S√≠

S√≠

S√≠

BorrarRegistro (P√°gina 1691)

S√≠

S√≠

S√≠

BorrarRegistroMemoria (P√°gi‚Äê
na 1692)

S√≠

S√≠

S√≠

S√≠
2)

No

S√≠
2)

No 2)

BorrarB√∫ferDeAvisos (P√°gina 1672)

S√≠

S√≠

S√≠

BorrarB√∫ferDeAvisosProtool (P√°gi‚Äê
na 1673)

S√≠

S√≠

S√≠

VisorDeAvisosActualizar (P√°gi‚Äê
na 1674)

S√≠

S√≠

S√≠

VisorDeAvisosLoopInAlarm (P√°gi‚Äê
na 1674)

S√≠

S√≠

S√≠

VisorDeAvisosAcusarAviso (P√°gi‚Äê
na 1675)

S√≠

S√≠

S√≠

VisorDeAvisosMostrarTextoAyuda
(P√°gina 1676)

S√≠

S√≠

S√≠

AbrirTodosLosFicheros (P√°gi‚Äê
na 1593)

S√≠

S√≠

S√≠

AbrirTecladoDePantalla (P√°gi‚Äê
na 1706)

S√≠

S√≠

S√≠

AbrirExploradorDeArchivos (P√°gi‚Äê
na 1704)

S√≠

S√≠

S√≠

AbrirDi√°logoControlPanel (P√°gi‚Äê
na 1566)

S√≠

S√≠

S√≠

AbrirVentanaDeS√≠mboloDelSistema
(P√°gina 1567)

S√≠

S√≠

S√≠

AbrirInternetExplorer (P√°gina 1567)

S√≠

S√≠

S√≠

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1535

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KTP400
KP400

TP700
TP900
TP1200
TP1500
TP1900
TP2200

KP700
KP900
KP1200
KP1500

AbrirPanelDeControl (P√°gina 1568)

S√≠

S√≠

S√≠

AbrirAdministradorDeTareas (P√°gi‚Äê
na 1705)

S√≠

S√≠

S√≠

AcusarAviso (P√°gina 1676)

S√≠

No

S√≠

PDFDesplazarseAbajo (P√°gina 1651) S√≠

S√≠

S√≠

PDFDesplazarseArriba (P√°gina 1651) S√≠

S√≠

S√≠

PDFAdaptarAncho (P√°gina 1652)

S√≠

S√≠

S√≠

PDFAdaptarAAltura (P√°gina 1652)

S√≠

S√≠

S√≠

PDFPrimeraP√°gina (P√°gina 1652)

S√≠

S√≠

S√≠

PDF√öltimaP√°gina (P√°gina 1653)

S√≠

S√≠

S√≠

PDFAvanzarP√°gina (P√°gina 1653)

S√≠

S√≠

S√≠

PDFIrAP√°gina (P√°gina 1654)

S√≠

S√≠

S√≠

PDFRetrocederP√°gina (P√°gina 1654) S√≠

S√≠

S√≠

PDFAcercar (P√°gina 1655)

S√≠

S√≠

S√≠

PDFAlejar (P√°gina 1655)

S√≠

S√≠

S√≠

PDFDesplazarseIzquierda (P√°gi‚Äê
na 1656)

S√≠

S√≠

S√≠

PDFDesplazarseDerecha (P√°gi‚Äê
na 1656)

S√≠

S√≠

S√≠

PDFZoomOriginal (P√°gina 1656)

S√≠

S√≠

S√≠

VisorC√≥digoPLCDetalles (P√°gi‚Äê
na 1660)

No

S√≠

S√≠

VisorC√≥digoPLCSiguienteSegmento
(P√°gina 1660)

No

S√≠

S√≠

VisorC√≥digoPLCMostrarModoEtapa
(P√°gina 1661)

No

S√≠

S√≠

VisorC√≥digoPLCS√≠mbolos (P√°gi‚Äê
na 1661)

No

S√≠

S√≠

VisorC√≥digoPLCTransici√≥nInterlock
(P√°gina 1662)

No

S√≠

S√≠

VisorC√≥digoPLCAcercar (P√°gi‚Äê
na 1663)

No

S√≠

S√≠

VisorC√≥digoPLCAlejar (P√°gina 1663)

No

S√≠

S√≠

VisorC√≥digoPLCAnteriorSegmento
(P√°gina 1664)

No

S√≠

S√≠

VisorC√≥digoPLCSupervisi√≥nOLlama‚Äê
daFB (P√°gina 1664)

No

S√≠

S√≠

VisorDeRecetasRegistroNuevo (P√°gi‚Äê S√≠
na 1693)

S√≠

S√≠

VisorDeRecetasLeerRegistroDelCon‚Äê S√≠
trolador (P√°gina 1693)

S√≠

S√≠

1536

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KTP400

TP700
TP900
TP1200
TP1500
TP1900
TP2200

KP700
KP900
KP1200
KP1500

VisorDeRecetasBorrarRegistro (P√°gi‚Äê S√≠
na 1694)

S√≠

S√≠

KP400

VisorDeRecetasMen√∫ (P√°gina 1694)

S√≠

S√≠

S√≠

VisorDeRecetasAbrir (P√°gina 1695)

S√≠

S√≠

S√≠

VisorDeRecetasEscribirRegistroEn‚Äê
Controlador (P√°gina 1696)

S√≠

S√≠

S√≠

VisorDeRecetasGuardarRegistro (P√°‚Äê S√≠
gina 1696)

S√≠

S√≠

VisorDeRecetasGuardarRegistroCo‚Äê
mo (P√°gina 1696)

S√≠

S√≠

S√≠

VisorDeRecetasSincronizarRegistro‚Äê
ConVariables (P√°gina 1697)

S√≠

S√≠

S√≠

VisorDeRecetasCambiarNombreDe‚Äê
Registro (P√°gina 1697)

S√≠

S√≠

S√≠

VisorDeRecetasMostrarTextoDeAyu‚Äê
da (P√°gina 1698)

S√≠

S√≠

S√≠

VisorDeRecetasAtr√°s (P√°gina 1698)

S√≠

S√≠

S√≠

DesactivarBit (P√°gina 1611)

S√≠

S√≠

S√≠

DesactivarBitEnVariable (P√°gi‚Äê
na 1613)

S√≠

S√≠

S√≠

Bot√≥nPulsar (P√°gina 1571)

S√≠

S√≠

S√≠

Bot√≥nSoltar (P√°gina 1572)

S√≠

S√≠

S√≠

DesplazarYEnmascarar (P√°gi‚Äê
na 1615)

S√≠

S√≠

S√≠

CerrarTodosLosFicheros (P√°gi‚Äê
na 1594)

S√≠

S√≠

S√≠

EscribirRegistroEnControlador (P√°gi‚Äê
na 1699)

S√≠

S√≠

S√≠

EscribirVariableDeRegistroEnContro‚Äê S√≠
lador (P√°gina 1700)

S√≠

S√≠

AvanzarP√°gina (P√°gina 1710)

S√≠

No

S√≠

RetrocederP√°gina (P√°gina 1710)

S√≠

No

S√≠

EnviarCorreoElectronico (P√°gi‚Äê
na 1569)

S√≠

S√≠

S√≠

ConfigurarSe√±alAc√∫stica (P√°gi‚Äê
na 1637)

S√≠ 1)

S√≠

No

ConfigurarModoDeVisualizaci√≥n (P√°‚Äê
gina 1625)

No

No

No

EstablecerModoDeOperaci√≥nPanel
(P√°gina 1626)

S√≠

S√≠

S√≠

ActivarBit (P√°gina 1617)

S√≠

S√≠

S√≠

ActivarBitDeVariable (P√°gina 1619)

S√≠

S√≠

S√≠

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1537

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KTP400

TP700
TP900
TP1200
TP1500
TP1900
TP2200

KP700
KP900
KP1200
KP1500

S√≠

S√≠

EstablecerColorRetroiluminaci√≥n (P√°‚Äê No
gina 1639)

No

No

EstablecerBrillo (P√°gina 1638)

S√≠

S√≠

S√≠

EstablecerModoTecladoDePantalla
(P√°gina 1627)

S√≠

S√≠

S√≠

DefinirModoPLC (P√°gina 1628)

S√≠

S√≠

S√≠

ActivarModoDeInformeAviso (P√°gi‚Äê
na 1623)

S√≠

S√≠

S√≠

DefinirEstadoVariableDeReceta (P√°‚Äê
gina 1701)

S√≠

S√≠

S√≠

AjustarHorarioVerano (P√°gina 1570)

S√≠

S√≠

S√≠

EstablecerIdioma (P√°gina 1629)

S√≠

S√≠

S√≠

DefinirVariable (P√°gina 1606)

S√≠

S√≠

S√≠

EstablecerModoDeConexi√≥n (P√°gi‚Äê
na 1630)

S√≠

S√≠

S√≠

AccesoWebActivar (P√°gina 1631)

S√≠

S√≠

S√≠

CopiaSeguridadSistemaDeArchivos‚Äê
RAM (P√°gina 1572)

S√≠

S√≠

S√≠

SimularTeclaSistema (P√°gina 1573)

S√≠

No

S√≠

SimularVariable (P√°gina 1574)

S√≠

S√≠

S√≠

VisorSmartClientActualizar (P√°gi‚Äê
na 1665)

S√≠

S√≠

S√≠

VisorSmartClientProtecci√≥nContraEs‚Äê S√≠
crituraOff (P√°gina 1665)

S√≠

S√≠

VisorSmartClientProtecci√≥nContraEs‚Äê S√≠
crituraOn (P√°gina 1666)

S√≠

S√≠

VisorSmartClientDesconectar (P√°gi‚Äê
na 1666)

S√≠

S√≠

S√≠

VisorSmartClientConectar (P√°gi‚Äê
na 1667)

S√≠

S√≠

S√≠

VisorSmartClientSalir (P√°gina 1667)

S√≠

S√≠

S√≠

GuardarRegistro (P√°gina 1702)

S√≠

S√≠

S√≠

IniciarArchivaci√≥n (P√°gina 1595)

S√≠

S√≠

S√≠

IniciarFicheroSiguiente (P√°gina 1595) S√≠

S√≠

S√≠

IniciarPrograma (P√°gina 1575)

S√≠

S√≠

S√≠

EstadoForzarLeerValores (P√°gi‚Äê
na 1577)

S√≠

S√≠

S√≠

EstadoForzarEscribirValores (P√°gi‚Äê
na 1577)

S√≠

S√≠

S√≠

KP400

ActivarBitMientrasTeclaPulsada (P√°‚Äê
gina 1621)

1538

S√≠

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KTP400
KP400

TP700
TP900
TP1200
TP1500
TP1900
TP2200

KP700
KP900
KP1200
KP1500

ControlarSmartServer (P√°gina 1578)

S√≠

S√≠

S√≠

ControlarServidorWeb (P√°gina 1578)

S√≠

S√≠

S√≠

PararArchivaci√≥n (P√°gina 1596)

S√≠

S√≠

S√≠

PararRuntime (P√°gina 1579)

S√≠

S√≠

S√≠

VisorDiagn√≥sticoSistemaActivar (P√°‚Äê
gina 1668)

S√≠

S√≠

S√≠

VisorDiagn√≥sticoSistemaActualizar‚Äê
B√∫ferPLC (P√°gina 1669)

S√≠

S√≠

S√≠

VisorDiagn√≥sticoSistemaVistaDeta‚Äê
llada (P√°gina 1669)

S√≠

S√≠

S√≠

VisorDiagn√≥sticoSistemaB√∫ferDiag‚Äê
n√≥stico (P√°gina 1670)

S√≠

S√≠

S√≠

VisorDiagn√≥sticoSistemaVistaDispo‚Äê
sitivos (P√°gina 1670)

S√≠

S√≠

S√≠

VisorDiagn√≥sticoSistemaAtr√°s (P√°gi‚Äê
na 1671)

S√≠

S√≠

S√≠

ConsultarTexto (P√°gina 1580)

S√≠

S√≠

S√≠

DesconectarVariableDelVolante (P√°‚Äê
gina 1581)

No

No

No

ConectarVariableAlVolante (P√°gi‚Äê
na 1581)

No

No

No

IdentificarCambioDeUsuario (P√°gi‚Äê
na 1601)

S√≠

S√≠

S√≠

ReducirValorEnfocado (P√°gina 1582)

S√≠

No

S√≠

DecrementarVariable (P√°gina 1607)

S√≠

S√≠

S√≠

CambiarConexi√≥n (P√°gina 1632)

S√≠

S√≠

S√≠

CambiarConexi√≥nEIP (P√°gina 1634)

S√≠

S√≠

S√≠

MostrarDi√°logoInicioSesi√≥n (P√°gi‚Äê
na 1602)

S√≠

S√≠

S√≠

MostrarTextoDeAyuda (P√°gina 1582)

S√≠

S√≠

S√≠

MostrarVentanaDeAvisos (P√°gi‚Äê
na 1677)

S√≠

S√≠

S√≠

MostrarImagenEmergente (P√°gi‚Äê
na 1584)

S√≠

S√≠

S√≠

MostrarImagenEmergenteTama√±o‚Äê
Modificable (P√°gina 1585)

S√≠

S√≠

S√≠

MostrarImagenDeslizable (P√°gi‚Äê
na 1588)

S√≠

S√≠

S√≠

MostrarVersi√≥nDeSoftware (P√°gi‚Äê
na 1583)

S√≠

S√≠

S√≠

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1539

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KTP400
KP400

TP700
TP900
TP1200
TP1500
TP1900
TP2200

KP700
KP900
KP1200
KP1500

MostrarVentanaDeDiagn√≥sticoDel‚Äê
Sistema (P√°gina 1671)

S√≠

S√≠

S√≠

MostrarAvisoDeSistema (P√°gi‚Äê
na 1677)

S√≠

S√≠

S√≠

1)
2)

Solo con el KTP 400 Comfort
No disponible para paneles a partir de la versi√≥n V14.0

Funciones de sistema para Mobile Panels
Disponibilidad de las funciones de sistema
La tabla siguiente muestra disponibilidad de las funciones de sistema en los Mobile Panels.
Sujeto a cambios t√©cnicos.

Sinopsis
Mobile
Panel
177 DP

Mobile
Panel
177 PN

Mobile Panel
277
Mobile Panel
277 IWLAN
Mobile Panel
277 F IWLAN

KTP400F KTP700 Mobile /
Mobile
KTP700F Mobile

KTP900 Mo‚Äê
bile /
KTP900F Mo‚Äê
bile

Funciones definidas por el usua‚Äê No
rio

No

S√≠

S√≠

S√≠

S√≠

CerrarSesi√≥n (P√°gina 1597)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

ActivarImagen (P√°gina 1555)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

ActivarImagenConN√∫mero (P√°‚Äê
gina 1556)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

ActivarVisorC√≥digoPLC (P√°gi‚Äê
na 1657)

No

No

No

No

S√≠

S√≠

ActivarPantallaDeLimpieza (P√°‚Äê
gina 1703)

No

No

No

No

No

No

ActivarImagenAnterior (P√°gi‚Äê
na 1557)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

ActualizarVariable (P√°gi‚Äê
na 1558)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

ModificarContraste (P√°gi‚Äê
na 1635)

S√≠

S√≠

No

No

No

No

IniciarSesi√≥n (P√°gina 1598)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

1540

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Mobile
Panel
177 DP

Mobile
Panel
177 PN

Mobile Panel
277
Mobile Panel
277 IWLAN
Mobile Panel
277 F IWLAN

KTP400F KTP700 Mobile /
Mobile
KTP700F Mobile

KTP900 Mo‚Äê
bile /
KTP900F Mo‚Äê
bile

No

No

S√≠

S√≠

S√≠

S√≠

ArchivarVariable (P√°gina 1590)

No

No

S√≠

S√≠

S√≠

S√≠

EditarAviso (P√°gina 1672)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

ObjetoDeImagenCursorAbajo
(P√°gina 1706)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

ObjetoDeImagenCursorArriba
(P√°gina 1707)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

ObjetoDeImagenAvanzarP√°gi‚Äê
na (P√°gina 1708)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

ObjetoDeImagenRetrocederP√°‚Äê
gina (P√°gina 1709)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

ObjetoImagenCursorIzquierda
(P√°gina 1709)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

ObjetoDeImagenCursorDere‚Äê
cha (P√°gina 1708)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

Codificar (P√°gina 1558)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

ArchivarArchivoDeInforme (P√°‚Äê
gina 1589)

CodificarEx (P√°gina 1559)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

TeclaDirecta (P√°gina 1560)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

TeclaDirectaNumeroDeImagen
(P√°gina 1563)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

ImprimirImagen (P√°gina 1622)

No

S√≠

S√≠

S√≠

S√≠

S√≠

ImprimirInforme (P√°gina 1623)

No

S√≠

S√≠

S√≠

S√≠

S√≠

RegistrarAcci√≥nDeUsuario (P√°‚Äê
gina 1563)

No

No

S√≠

S√≠

S√≠

S√≠

IncrementarValorEnfocado (P√°‚Äê
gina 1565)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

IncrementarVariable (P√°gi‚Äê
na 1602)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

ExportarRegistros (P√°gi‚Äê
na 1678)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

ExportarRegistrosConSumaDe‚Äê
Verificaci√≥n (P√°gina 1680)

No

No

S√≠

S√≠

S√≠

S√≠

ExportarImportarAdministraci√≥n‚Äê S√≠
DeUsuarios (P√°gina 1598)

S√≠

S√≠

S√≠

S√≠

S√≠

IrAInicio (P√°gina 1711)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

IrAFin (P√°gina 1711)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

RetirarHardwareConSeguridad
(P√°gina 1565)

No

No

S√≠

S√≠

S√≠

S√≠

NavegadorHTMLCancelar (P√°gi‚Äê No
na 1640)

No

No

S√≠

S√≠

S√≠

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1541

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Mobile
Panel
177 DP

Mobile
Panel
177 PN

Mobile Panel
277
Mobile Panel
277 IWLAN
Mobile Panel
277 F IWLAN

KTP400F KTP700 Mobile /
Mobile
KTP700F Mobile

KTP900 Mo‚Äê
bile /
KTP900F Mo‚Äê
bile

NavegadorHTMLDesplazarseA‚Äê
bajo (P√°gina 1640)

No

No

No

S√≠

S√≠

S√≠

NavegadorHTMLActualizar (P√°‚Äê
gina 1641)

No

No

No

S√≠

S√≠

S√≠

NavegadorHTMLDesplazarseA‚Äê
rriba (P√°gina 1641)

No

No

No

S√≠

S√≠

S√≠

NavegadorHTMLAcercar (P√°gi‚Äê
na 1642)

No

No

No

S√≠

S√≠

S√≠

NavegadorHTMLAlejar (P√°gi‚Äê
na 1642)

No

No

No

S√≠

S√≠

S√≠

HTMLNavegadorALaIzquierda
(P√°gina 1642)

No

No

No

S√≠

S√≠

S√≠

NavegadorHTMLALaDerecha
(P√°gina 1643)

No

No

No

S√≠

S√≠

S√≠

NavegadorHTMLRetrocederP√°‚Äê
gina (P√°gina 1644)

No

No

No

S√≠

S√≠

S√≠

NavegadorHTMLAvanzarP√°gi‚Äê
na (P√°gina 1643)

No

No

No

S√≠

S√≠

S√≠

NavegadorHTMLP√°ginaInicio
(P√°gina 1644)

No

No

No

S√≠

S√≠

S√≠

NavegadorHTMLAdelante (P√°gi‚Äê No
na 1645)

No

No

S√≠

S√≠

S√≠

NavegadorHTMLAtr√°s (P√°gi‚Äê
na 1645)

No

No

No

S√≠

S√≠

S√≠

ImportarRegistros (P√°gi‚Äê
na 1683)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

ImportarRegistrosConSumaDe‚Äê
Verificaci√≥n (P√°gina 1684)

No

No

S√≠

S√≠

S√≠

S√≠

InvertirBit (P√°gina 1608)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

InvertirBitEnVariable (P√°gi‚Äê
na 1610)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

InvertirEscalaLineal (P√°gi‚Äê
na 1603)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

CalibrarPantallaT√°ctil (P√°gi‚Äê
na 1636)

S√≠

S√≠

S√≠ 1)

S√≠

S√≠

S√≠

CopiarFichero (P√°gina 1591)

No

No

S√≠

S√≠

S√≠

S√≠

VisorDeCurvasAvanzarP√°gina
(P√°gina 1646)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeCurvasRetrocederP√°gi‚Äê
na (P√°gina 1646)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeCurvasAmpliar (P√°gi‚Äê
na 1647)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

1542

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Mobile
Panel
177 DP

Mobile
Panel
177 PN

Mobile Panel
277
Mobile Panel
277 IWLAN
Mobile Panel
277 F IWLAN

KTP400F KTP700 Mobile /
Mobile
KTP700F Mobile

KTP900 Mo‚Äê
bile /
KTP900F Mo‚Äê
bile

VisorDeCurvasComprimir (P√°gi‚Äê S√≠
na 1647)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeCurvasReglaIzquierda
(P√°gina 1648)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeCurvasReglaDerecha
(P√°gina 1648)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeCurvasActivarModoReg‚Äê S√≠
la (P√°gina 1649)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeCurvasIniciarParar (P√°‚Äê
gina 1650)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeCurvasIrAlPrincipio (P√°‚Äê
gina 1650)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

CargarRegistro (P√°gina 1686)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

LeerNombreDeUsuario (P√°gi‚Äê
na 1599)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

LeerRegistroDelControlador
(P√°gina 1687)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

LeerNombreDelRegistro (P√°gi‚Äê
na 1688)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

LeerVariablesDeRegistroDel‚Äê
Controlador (P√°gina 1690)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

LeerN√∫meroDeGrupo (P√°gi‚Äê
na 1600)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

LeerBrillo (P√°gina 1639)

No

No

No

S√≠

LeerContrase√±a (P√°gina 1600)

S√≠

S√≠

S√≠

No

BorrarFichero (P√°gina 1592)

No

No

S√≠

S√≠

S√≠

S√≠

BorrarRegistro (P√°gina 1691)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

BorrarRegistroMemoria (P√°gi‚Äê
na 1692)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

BorrarB√∫ferDeAvisos (P√°gi‚Äê
na 1672)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

BorrarB√∫ferDeAvisosProtool
(P√°gina 1673)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeAvisosActualizar (P√°gi‚Äê
na 1674)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeAvisosLoopInAlarm (P√°‚Äê S√≠
gina 1674)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeAvisosAcusarAviso (P√°‚Äê
gina 1675)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeAvisosMostrarTextoAyu‚Äê S√≠
da (P√°gina 1676)

S√≠

S√≠

S√≠

S√≠

S√≠

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

S√≠
2)

No

S√≠
2)

No 2)

1543

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Mobile
Panel
177 DP

Mobile
Panel
177 PN

Mobile Panel
277
Mobile Panel
277 IWLAN
Mobile Panel
277 F IWLAN

KTP400F KTP700 Mobile /
Mobile
KTP700F Mobile

KTP900 Mo‚Äê
bile /
KTP900F Mo‚Äê
bile

AbrirTodosLosFicheros (P√°gi‚Äê
na 1593)

No

No

S√≠

S√≠

S√≠

S√≠

AbrirExploradorDeArchivos (P√°‚Äê
gina 1704)

No

No

No

S√≠

S√≠

S√≠

AbrirTecladoDePantalla (P√°gi‚Äê
na 1706)

No

No

S√≠

S√≠

S√≠

S√≠

AbrirVentanaDeS√≠mboloDelSis‚Äê
tema (P√°gina 1567)

No

No

S√≠

S√≠

S√≠

S√≠

AbrirDi√°logoControlPanel (P√°gi‚Äê No
na 1566)

No

No

S√≠

S√≠

S√≠

AbrirInternetExplorer (P√°gi‚Äê
na 1567)

No

S√≠

S√≠

S√≠

S√≠

S√≠

AbrirAdministradorDeTareas
(P√°gina 1705)

No

No

S√≠

S√≠

S√≠

S√≠

AbrirPanelDeControl (P√°gi‚Äê
na 1568)

No

No

S√≠ 1)

No

S√≠/no 3)

S√≠/no 3)

AcusarAviso (P√°gina 1676)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

PDFDesplazarseAbajo (P√°gi‚Äê
na 1651)

No

No

No

S√≠

S√≠

S√≠

PDFDesplazarseArriba (P√°gi‚Äê
na 1651)

No

No

No

S√≠

S√≠

S√≠

PDFAdaptarAncho (P√°gi‚Äê
na 1652)

No

No

No

S√≠

S√≠

S√≠

PDFAdaptarAAltura (P√°gi‚Äê
na 1652)

No

No

No

S√≠

S√≠

S√≠

PDFPrimeraP√°gina (P√°gi‚Äê
na 1652)

No

No

No

S√≠

S√≠

S√≠

PDF√öltimaP√°gina (P√°gina 1653) No

No

No

S√≠

S√≠

S√≠

PDFAvanzarP√°gina (P√°gi‚Äê
na 1653)

No

No

No

S√≠

S√≠

S√≠

PDFIrAP√°gina (P√°gina 1654)

No

No

No

S√≠

S√≠

S√≠

PDFRetrocederP√°gina (P√°gi‚Äê
na 1654)

No

No

No

S√≠

S√≠

S√≠

PDFAcercar (P√°gina 1655)

No

No

No

S√≠

S√≠

S√≠

PDFAlejar (P√°gina 1655)

No

No

No

S√≠

S√≠

S√≠

PDFDesplazarseIzquierda (P√°‚Äê
gina 1656)

No

No

No

S√≠

S√≠

S√≠

PDFDesplazarseDerecha (P√°gi‚Äê No
na 1656)

No

No

S√≠

S√≠

S√≠

PDFZoomOriginal (P√°gina 1656) No

No

No

S√≠

S√≠

S√≠

VisorC√≥digoPLCDetalles (P√°gi‚Äê
na 1660)

S√≠

S√≠

No

S√≠

S√≠

1544

S√≠

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Mobile
Panel
177 DP

Mobile
Panel
177 PN

Mobile Panel
277
Mobile Panel
277 IWLAN
Mobile Panel
277 F IWLAN

KTP400F KTP700 Mobile /
Mobile
KTP700F Mobile

KTP900 Mo‚Äê
bile /
KTP900F Mo‚Äê
bile

S√≠

S√≠

S√≠

No

S√≠

S√≠

VisorC√≥digoPLCMostrarModoE‚Äê S√≠
tapa (P√°gina 1661)

S√≠

S√≠

No

S√≠

S√≠

VisorC√≥digoPLCS√≠mbolos (P√°gi‚Äê S√≠
na 1661)

S√≠

S√≠

No

S√≠

S√≠

VisorC√≥digoPLCTransici√≥nInter‚Äê S√≠
lock (P√°gina 1662)

S√≠

S√≠

No

S√≠

S√≠

VisorC√≥digoPLCAcercar (P√°gi‚Äê
na 1663)

S√≠

S√≠

S√≠

No

S√≠

S√≠

VisorC√≥digoPLCAlejar (P√°gi‚Äê
na 1663)

S√≠

S√≠

S√≠

No

S√≠

S√≠

VisorC√≥digoPLCAnteriorSeg‚Äê
mento (P√°gina 1664)

S√≠

S√≠

S√≠

No

S√≠

S√≠

VisorDeRecetasRegistroNuevo
(P√°gina 1693)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasLeerRegistro‚Äê
DelControlador (P√°gina 1693)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasBorrarRegistro
(P√°gina 1694)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasMen√∫ (P√°gi‚Äê
na 1694)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasAbrir (P√°gi‚Äê
na 1695)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasEscribirRegis‚Äê
troEnControlador (P√°gina 1696)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasGuardarRegis‚Äê
tro (P√°gina 1696)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasGuardarRegis‚Äê
troComo (P√°gina 1696)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasSincronizarRe‚Äê
gistroConVariables (P√°gi‚Äê
na 1697)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasCambiarNom‚Äê
breDeRegistro (P√°gina 1697)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasMostrarTexto‚Äê
DeAyuda (P√°gina 1698)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDeRecetasAtr√°s (P√°gi‚Äê
na 1698)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

DesactivarBit (P√°gina 1611)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

DesactivarBitEnVariable (P√°gi‚Äê
na 1613)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

Bot√≥nPulsar (P√°gina 1571)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

VisorC√≥digoPLCSiguienteSeg‚Äê
mento (P√°gina 1660)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1545

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Mobile
Panel
177 DP

Mobile
Panel
177 PN

Mobile Panel
277
Mobile Panel
277 IWLAN
Mobile Panel
277 F IWLAN

KTP400F KTP700 Mobile /
Mobile
KTP700F Mobile

KTP900 Mo‚Äê
bile /
KTP900F Mo‚Äê
bile

Bot√≥nSoltar (P√°gina 1572)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

DesplazarYEnmascarar (P√°gi‚Äê
na 1615)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

CerrarTodosLosFicheros (P√°gi‚Äê
na 1594)

No

No

S√≠

S√≠

S√≠

S√≠

EscribirRegistroEnControlador
(P√°gina 1699)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

EscribirVariableDeRegistroEn‚Äê
Controlador (P√°gina 1700)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

AvanzarP√°gina (P√°gina 1710)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

RetrocederP√°gina (P√°gi‚Äê
na 1710)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

EnviarCorreoElectronico (P√°gi‚Äê
na 1569)

No

S√≠

S√≠

S√≠

S√≠

S√≠

ConfigurarSe√±alAc√∫stica (P√°gi‚Äê
na 1637)

No

No

No

S√≠

S√≠

S√≠

ConfigurarModoDeVisualizaci√≥n No
(P√°gina 1625)

No

No

No

No

No

EstablecerModoDeOperaci√≥n‚Äê
Panel (P√°gina 1626)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

ActivarBit (P√°gina 1617)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

ActivarBitDeVariable (P√°gi‚Äê
na 1619)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

ActivarBitMientrasTeclaPulsada
(P√°gina 1621)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

EstablecerColorRetroilumina‚Äê
ci√≥n (P√°gina 1639)

No

No

No

No

No

No

EstablecerBrillo (P√°gina 1638)

No

No

No

S√≠

S√≠

S√≠

EstablecerModoTecladoDePan‚Äê
talla (P√°gina 1627)

No

No

No

S√≠

S√≠

S√≠

ActivarModoDeInformeAviso
(P√°gina 1623)

No

No

S√≠

S√≠

S√≠

S√≠

DefinirEstadoVariableDeReceta
(P√°gina 1701)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

AjustarHorarioVerano (P√°gi‚Äê
na 1570)

No

No

S√≠

S√≠

S√≠

S√≠

EstablecerIdioma (P√°gina 1629)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

DefinirVariable (P√°gina 1606)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

EstablecerModoDeConexi√≥n
(P√°gina 1630)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

AccesoWebActivar (P√°gi‚Äê
na 1631)

No

S√≠

S√≠

S√≠

S√≠

S√≠

1546

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Mobile
Panel
177 DP

Mobile
Panel
177 PN

Mobile Panel
277
Mobile Panel
277 IWLAN
Mobile Panel
277 F IWLAN

KTP400F KTP700 Mobile /
Mobile
KTP700F Mobile

KTP900 Mo‚Äê
bile /
KTP900F Mo‚Äê
bile

CopiaSeguridadSistemaDeAr‚Äê
chivosRAM (P√°gina 1572)

No

No

S√≠

S√≠

S√≠

S√≠

SimularTeclaSistema (P√°gi‚Äê
na 1573)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

SimularVariable (P√°gina 1574)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

VisorSmartClientActualizar (P√°‚Äê
gina 1665)

No

S√≠

S√≠

S√≠

S√≠

S√≠

VisorSmartClientProtecci√≥nCon‚Äê No
traEscrituraOff (P√°gina 1665)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorSmartClientProtecci√≥nCon‚Äê No
traEscrituraOn (P√°gina 1666)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorSmartClientDesconectar
(P√°gina 1666)

No

S√≠

S√≠

S√≠

S√≠

S√≠

VisorSmartClientConectar (P√°gi‚Äê No
na 1667)

S√≠

S√≠

S√≠

S√≠

S√≠

VisorSmartClientSalir (P√°gi‚Äê
na 1667)

No

S√≠

S√≠

S√≠

S√≠

S√≠

GuardarRegistro (P√°gina 1702)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

IniciarArchivaci√≥n (P√°gina 1595) No

No

S√≠

S√≠

S√≠

S√≠

IniciarFicheroSiguiente (P√°gi‚Äê
na 1595)

No

No

S√≠

S√≠

S√≠

S√≠

IniciarPrograma (P√°gina 1575)

No

No

S√≠

S√≠

S√≠

S√≠

EstadoForzarLeerValores (P√°gi‚Äê S√≠
na 1577)

S√≠

S√≠

S√≠

S√≠

S√≠

EstadoForzarEscribirValores
(P√°gina 1577)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

ControlarSmartServer (P√°gi‚Äê
na 1578)

No

S√≠

S√≠

S√≠

S√≠

S√≠

ControlarServidorWeb (P√°gi‚Äê
na 1578)

No

S√≠

S√≠

S√≠

S√≠

S√≠

PararArchivaci√≥n (P√°gina 1596)

No

No

S√≠

S√≠

S√≠

S√≠

PararRuntime (P√°gina 1579)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

ConsultarTexto (P√°gina 1580)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

VisorDiagn√≥sticoSistemaActivar
(P√°gina 1668)

No

No

No

S√≠

S√≠

S√≠

DesconectarVariableDelVolante
(P√°gina 1581)

S√≠

S√≠

S√≠

No

No

No

ConectarVariableAlVolante (P√°‚Äê
gina 1581)

S√≠

S√≠

S√≠

No

No

No

IdentificarCambioDeUsuario
(P√°gina 1601)

S√≠

S√≠

S√≠

No

No

No

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1547

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Mobile
Panel
177 DP

Mobile
Panel
177 PN

Mobile Panel
277
Mobile Panel
277 IWLAN
Mobile Panel
277 F IWLAN

KTP400F KTP700 Mobile /
Mobile
KTP700F Mobile

KTP900 Mo‚Äê
bile /
KTP900F Mo‚Äê
bile

ReducirValorEnfocado (P√°gi‚Äê
na 1582)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

DecrementarVariable (P√°gi‚Äê
na 1607)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

CambiarConexi√≥n (P√°gi‚Äê
na 1632)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

CambiarConexi√≥nEIP (P√°gi‚Äê
na 1634)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

MostrarDi√°logoInicioSesi√≥n (P√°‚Äê S√≠
gina 1602)

S√≠

S√≠

S√≠

S√≠

S√≠

MostrarTextoDeAyuda (P√°gi‚Äê
na 1582)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

MostrarVentanaDeAvisos (P√°gi‚Äê S√≠
na 1677)

S√≠

S√≠

S√≠

S√≠

S√≠

MostrarImagenEmergente (P√°gi‚Äê No
na 1584)

No

No

S√≠

S√≠

S√≠

MostrarImagenEmergenteTa‚Äê
ma√±oModificable

No

No

No

S√≠

S√≠

S√≠

MostrarImagenDeslizable (P√°gi‚Äê No
na 1588)

No

No

S√≠

S√≠

S√≠

MostrarVersi√≥nDeSoftware (P√°‚Äê
gina 1583)

No

No

S√≠

S√≠

S√≠

S√≠

MostrarVentanaDeDiagn√≥stico‚Äê
DelSistema (P√°gina 1671)

No

No

No

S√≠

S√≠

S√≠

MostrarAvisoDeSistema (P√°gi‚Äê
na 1677)

S√≠

S√≠

S√≠

S√≠

S√≠

S√≠

1)
2)
3)

Solo para Mobile Panel 277, Mobile Panel 277 IWLAN
No disponible para paneles a partir de la versi√≥n V14.0
No para paneles de seguridad (F-Panels)

Consulte tambi√©n
EscalaLineal (P√°gina 1604)
DesconectarPROFIsafe (P√°gina 1569)

1548

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Funciones de sistema para Runtime Advanced
Disponibilidad de las funciones de sistema
La tabla siguiente muestra las funciones de sistema disponibles en WinCC RT Advanced.
Sujeto a cambios t√©cnicos.

Sinopsis
WinCC RT Advanced
Funciones definidas por el usuario

S√≠

CerrarSesi√≥n (P√°gina 1597)

S√≠

ActivarImagen (P√°gina 1555)

S√≠

ActivarImagenConN√∫mero (P√°gina 1556)

S√≠

ActivarVisorC√≥digoPLC (P√°gina 1657)

S√≠

ActivarPantallaDeLimpieza (P√°gina 1703)

S√≠

ActivarImagenAnterior (P√°gina 1557)

S√≠

ActualizarVariable (P√°gina 1558)

S√≠

ModificarContraste (P√°gina 1635)

No

IniciarSesi√≥n (P√°gina 1598)

S√≠

ArchivarArchivoDeInforme (P√°gina 1589)

S√≠

ArchivarVariable (P√°gina 1590)

S√≠

EditarAviso (P√°gina 1672)

S√≠

ObjetoDeImagenCursorAbajo (P√°gina 1706)

S√≠

ObjetoDeImagenCursorArriba (P√°gina 1707)

S√≠

ObjetoImagenCursorIzquierda (P√°gina 1709)

S√≠

ObjetoDeImagenCursorDerecha (P√°gina 1708)

S√≠

ObjetoDeImagenAvanzarP√°gina (P√°gina 1708)

S√≠

ObjetoDeImagenRetrocederP√°gina (P√°gina 1709)

S√≠

Codificar (P√°gina 1558)

S√≠

CodificarEx (P√°gina 1559)

S√≠

TeclaDirecta (P√°gina 1560)

No

TeclaDirectaNumeroDeImagen (P√°gina 1563)

No

ImprimirImagen (P√°gina 1622)

S√≠

ImprimirInforme (P√°gina 1623)

S√≠

RegistrarAcci√≥nDeUsuario (P√°gina 1563)

S√≠

IncrementarValorEnfocado (P√°gina 1565)

S√≠

IncrementarVariable (P√°gina 1602)

S√≠

ExportarRegistros (P√°gina 1678)

S√≠

ExportarRegistrosConSumaDeVerificaci√≥n (P√°gina 1680)

No

ExportarImportarAdministraci√≥nDeUsuarios (P√°gina 1598)

S√≠

IrAInicio (P√°gina 1711)

S√≠

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1549

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
WinCC RT Advanced
IrAFin (P√°gina 1711)

S√≠

RetirarHardwareConSeguridad (P√°gina 1565)

No

NavegadorHTMLCancelar (P√°gina 1640)

S√≠

NavegadorHTMLDesplazarseAbajo (P√°gina 1640)

S√≠

NavegadorHTMLActualizar (P√°gina 1641)

S√≠

NavegadorHTMLDesplazarseArriba (P√°gina 1641)

S√≠

NavegadorHTMLAcercar (P√°gina 1642)

S√≠

NavegadorHTMLAlejar (P√°gina 1642)

S√≠

HTMLNavegadorALaIzquierda (P√°gina 1642)

S√≠

NavegadorHTMLALaDerecha (P√°gina 1643)

S√≠

NavegadorHTMLRetrocederP√°gina (P√°gina 1644)

S√≠

NavegadorHTMLAvanzarP√°gina (P√°gina 1643)

S√≠

NavegadorHTMLP√°ginaInicio (P√°gina 1644)

S√≠

NavegadorHTMLAdelante (P√°gina 1645)

S√≠

NavegadorHTMLAtr√°s (P√°gina 1645)

S√≠

ImportarRegistros (P√°gina 1683)

S√≠

ImportarRegistrosConSumaDeVerificaci√≥n (P√°gina 1684)

S√≠

InvertirBit (P√°gina 1608)

S√≠

InvertirBitEnVariable (P√°gina 1610)

S√≠

InvertirEscalaLineal (P√°gina 1603)

S√≠

CalibrarPantallaT√°ctil (P√°gina 1636)

No

CopiarFichero (P√°gina 1591)

S√≠

VisorDeCurvasAvanzarP√°gina (P√°gina 1646)

S√≠

VisorDeCurvasRetrocederP√°gina (P√°gina 1646)

S√≠

VisorDeCurvasAmpliar (P√°gina 1647)

S√≠

VisorDeCurvasComprimir (P√°gina 1647)

S√≠

VisorDeCurvasReglaIzquierda (P√°gina 1648)

S√≠

VisorDeCurvasReglaDerecha (P√°gina 1648)

S√≠

VisorDeCurvasActivarModoRegla (P√°gina 1649)

S√≠

VisorDeCurvasIniciarParar (P√°gina 1650)

S√≠

VisorDeCurvasIrAlPrincipio (P√°gina 1650)

S√≠

CargarRegistro (P√°gina 1686)

S√≠

LeerNombreDeUsuario (P√°gina 1599)

S√≠

LeerRegistroDelControlador (P√°gina 1687)

S√≠

LeerNombreDelRegistro (P√°gina 1688)

S√≠

LeerVariablesDeRegistroDelControlador (P√°gina 1690)

S√≠

LeerN√∫meroDeGrupo (P√°gina 1600)

S√≠

LeerBrillo (P√°gina 1639)
LeerContrase√±a (P√°gina 1600)

No
No 1)

EscalaLineal (P√°gina 1604)

S√≠

BorrarFichero (P√°gina 1592)

S√≠

1550

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
WinCC RT Advanced
BorrarRegistro (P√°gina 1691)

S√≠

BorrarRegistroMemoria (P√°gina 1692)

No

BorrarB√∫ferDeAvisos (P√°gina 1672)

S√≠

BorrarB√∫ferDeAvisosProtool (P√°gina 1673)

S√≠

VisorDeAvisosActualizar (P√°gina 1674)

S√≠

VisorDeAvisosLoopInAlarm (P√°gina 1674)

S√≠

VisorDeAvisosAcusarAviso (P√°gina 1675)

S√≠

VisorDeAvisosMostrarTextoAyuda (P√°gina 1676)

S√≠

AbrirTodosLosFicheros (P√°gina 1593)

S√≠

AbrirTecladoDePantalla (P√°gina 1706)

S√≠

AbrirDi√°logoControlPanel (P√°gina 1566)

No

AbrirVentanaDeS√≠mboloDelSistema (P√°gina 1567)

No

AbrirInternetExplorer (P√°gina 1567)

No

AbrirPanelDeControl (P√°gina 1568)

No

AbrirAdministradorDeTareas (P√°gina 1705)

S√≠

AcusarAviso (P√°gina 1676)

S√≠

PDFDesplazarseAbajo (P√°gina 1651)

S√≠

PDFDesplazarseArriba (P√°gina 1651)

S√≠

PDFAdaptarAncho (P√°gina 1652)

S√≠

PDFAdaptarAAltura (P√°gina 1652)

S√≠

PDFPrimeraP√°gina (P√°gina 1652)

S√≠

PDF√öltimaP√°gina (P√°gina 1653)

S√≠

PDFAvanzarP√°gina (P√°gina 1653)

S√≠

PDFIrAP√°gina (P√°gina 1654)

S√≠

PDFRetrocederP√°gina (P√°gina 1654)

S√≠

PDFAcercar (P√°gina 1655)

S√≠

PDFAlejar (P√°gina 1655)

S√≠

PDFDesplazarseIzquierda (P√°gina 1656)

S√≠

PDFDesplazarseDerecha (P√°gina 1656)

S√≠

PDFZoomOriginal (P√°gina 1656)

S√≠

VisorC√≥digoPLCDetalles (P√°gina 1660)

S√≠

VisorC√≥digoPLCSiguienteSegmento (P√°gina 1660)

S√≠

VisorC√≥digoPLCMostrarModoEtapa (P√°gina 1661)

S√≠

VisorC√≥digoPLCS√≠mbolos (P√°gina 1661)

S√≠

VisorC√≥digoPLCTransici√≥nInterlock (P√°gina 1662)

S√≠

VisorC√≥digoPLCAcercar (P√°gina 1663)

S√≠

VisorC√≥digoPLCAlejar (P√°gina 1663)

S√≠

VisorC√≥digoPLCAnteriorSegmento (P√°gina 1664)

S√≠

VisorDeRecetasRegistroNuevo (P√°gina 1693)

S√≠

VisorDeRecetasLeerRegistroDelControlador (P√°gina 1693)

S√≠

VisorDeRecetasBorrarRegistro (P√°gina 1694)

S√≠

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1551

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
WinCC RT Advanced
VisorC√≥digoPLCSupervisi√≥nOLlamadaFB (P√°gina 1664)

S√≠

VisorDeRecetasMen√∫ (P√°gina 1694)

S√≠

VisorDeRecetasAbrir (P√°gina 1695)

S√≠

VisorDeRecetasEscribirRegistroEnControlador (P√°gina 1696)

S√≠

VisorDeRecetasGuardarRegistro (P√°gina 1696)

S√≠

VisorDeRecetasGuardarRegistroComo (P√°gina 1696)

S√≠

VisorDeRecetasSincronizarRegistroConVariables (P√°gina 1697)

S√≠

VisorDeRecetasCambiarNombreDeRegistro (P√°gina 1697)

S√≠

VisorDeRecetasMostrarTextoDeAyuda (P√°gina 1698)

S√≠

VisorDeRecetasAtr√°s (P√°gina 1698)

S√≠

DesactivarBit (P√°gina 1611)

S√≠

DesactivarBitEnVariable (P√°gina 1613)

S√≠

Bot√≥nPulsar (P√°gina 1571)

S√≠

Bot√≥nSoltar (P√°gina 1572)

S√≠

DesplazarYEnmascarar (P√°gina 1615)

S√≠

CerrarTodosLosFicheros (P√°gina 1594)

S√≠

EscribirRegistroEnControlador (P√°gina 1699)

S√≠

EscribirVariableDeRegistroEnControlador (P√°gina 1700)

S√≠

AvanzarP√°gina (P√°gina 1710)

S√≠

RetrocederP√°gina (P√°gina 1710)

S√≠

EnviarCorreoElectronico (P√°gina 1569)

S√≠

ConfigurarSe√±alAc√∫stica (P√°gina 1637)

No

ConfigurarModoDeVisualizaci√≥n (P√°gina 1625)

S√≠

EstablecerModoDeOperaci√≥nPanel (P√°gina 1626)

S√≠

ActivarBit (P√°gina 1617)

S√≠

ActivarBitDeVariable (P√°gina 1619)

S√≠

ActivarBitMientrasTeclaPulsada (P√°gina 1621)

S√≠

EstablecerColorRetroiluminaci√≥n (P√°gina 1639)

No

EstablecerBrillo (P√°gina 1638)

No

EstablecerModoTecladoDePantalla (P√°gina 1627)

S√≠

ActivarModoDeInformeAviso (P√°gina 1623)

S√≠

DefinirEstadoVariableDeReceta (P√°gina 1701)

S√≠

AjustarHorarioVerano (P√°gina 1570)

S√≠

EstablecerIdioma (P√°gina 1629)

S√≠

DefinirVariable (P√°gina 1606)

S√≠

EstablecerModoDeConexi√≥n (P√°gina 1630)

S√≠

AccesoWebActivar (P√°gina 1631)

S√≠

CopiaSeguridadSistemaDeArchivosRAM (P√°gina 1572)

No

SimularTeclaSistema (P√°gina 1573)

S√≠

SimularVariable (P√°gina 1574)

S√≠

VisorSmartClientActualizar (P√°gina 1665)

S√≠

1552

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
WinCC RT Advanced
VisorSmartClientProtecci√≥nContraEscrituraOff (P√°gina 1665)

S√≠

VisorSmartClientProtecci√≥nContraEscrituraOn (P√°gina 1666)

S√≠

VisorSmartClientDesconectar (P√°gina 1666)

S√≠

VisorSmartClientConectar (P√°gina 1667)

S√≠

VisorSmartClientSalir (P√°gina 1667)

S√≠

GuardarRegistro (P√°gina 1702)

S√≠

IniciarArchivaci√≥n (P√°gina 1595)

S√≠

IniciarFicheroSiguiente (P√°gina 1595)

S√≠

IniciarPrograma (P√°gina 1575)

S√≠

EstadoForzarLeerValores (P√°gina 1577)

S√≠

EstadoForzarEscribirValores (P√°gina 1577)

S√≠

ControlarSmartServer (P√°gina 1578)

S√≠

ControlarServidorWeb (P√°gina 1578)

S√≠

PararArchivaci√≥n (P√°gina 1596)

S√≠

PararRuntime (P√°gina 1579)

S√≠

VisorDiagn√≥sticoSistemaActivar (P√°gina 1668)

S√≠

ConsultarTexto (P√°gina 1580)

S√≠

DesconectarVariableDelVolante (P√°gina 1581)

No

ConectarVariableAlVolante (P√°gina 1581)

No

IdentificarCambioDeUsuario (P√°gina 1601)

S√≠

ReducirValorEnfocado (P√°gina 1582)

S√≠

DecrementarVariable (P√°gina 1607)

S√≠

CambiarConexi√≥n (P√°gina 1632)

S√≠

CambiarConexi√≥nEIP (P√°gina 1634)

S√≠

MostrarBloqueEnTIAPortal (P√°gina 1712)

S√≠

MostrarDi√°logoInicioSesi√≥n (P√°gina 1602)

S√≠

MostrarTextoDeAyuda (P√°gina 1582)

S√≠

MostrarVentanaDeAvisos (P√°gina 1677)

S√≠

MostrarImagenEmergente (P√°gina 1584)

S√≠

MostrarImagenEmergenteTama√±oModificable (P√°gina 1585)

S√≠

MostrarImagenDeslizable (P√°gina 1588)

S√≠

MostrarVersi√≥nDeSoftware (P√°gina 1583)

S√≠

MostrarVentanaDeDiagn√≥sticoDelSistema (P√°gina 1671)

S√≠

MostrarAvisoDeSistema (P√°gina 1677)

S√≠

1 No disponible para paneles a partir de la versi√≥n V14.0
)

Consulte tambi√©n
DesconectarPROFIsafe (P√°gina 1569)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1553

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Funciones de sistema para Runtime Professional
Disponibilidad de las funciones de sistema
La tabla siguiente muestra las funciones de sistema disponibles en WinCC Runtime
Professional.
Sujeto a cambios t√©cnicos.

Vista general
WinCC RT Professional
Funciones definidas por el usuario

S√≠

ActivarImagen (P√°gina 1732)

S√≠

ActivarImagenEnVentanaActual (P√°gina 1733)

S√≠

ActivarImagenEnVentana (P√°gina 1734)

S√≠

IncrementarVariable (P√°gina 1718)

S√≠

ExportarImportarAdministraci√≥nDeUsuarios (P√°gina 1716)

S√≠

InvertirBit (P√°gina 1747)

S√≠

InvertirBitEnVariable (P√°gina 1749)

S√≠

InvertirEscalaLineal (P√°gina 1719)

S√≠

EscalaLineal (P√°gina 1721)

S√≠

DesactivarBit (P√°gina 1750)

S√≠

DesactivarBitEnVariable (P√°gina 1752)

S√≠

ActivarBit (P√°gina 1754)

S√≠

ActivarBitDeVariable (P√°gina 1755)

S√≠

DefinirPropiedadVentanaActual (P√°gina 1746)

S√≠

DefinirPropiedadVentanaActualV√≠aPropiedad (P√°gina 1745)

S√≠

DefinirPropiedadVentanaActualIndirectamenteV√≠aVariable (P√°gi‚Äê
na 1746)

S√≠

DefinirPropiedadV√≠aPropiedad (P√°gina 1737)

S√≠

DefinirPropiedadV√≠aConstante (P√°gina 1739)

S√≠

DefinirPropiedadV√≠aVariable (P√°gina 1741)

S√≠

DefinirPropiedadIndirectamenteV√≠aVariable (P√°gina 1743)

S√≠

DefinirVariable (P√°gina 1722)

S√≠

DefinirVariableV√≠aPropiedad (P√°gina 1724)

S√≠

DefinirVariableV√≠aVariableIndirecta (P√°gina 1729)

S√≠

DefinirVariableConAvisoDeOperador (P√°gina 1730)

S√≠

DefinirVariableIndirectamente (P√°gina 1725)

S√≠

DefinirVariableIndirectamenteV√≠aPropiedad (P√°gina 1726)

S√≠

DefinirVariableIndirectaV√≠aVariableIndirecta (P√°gina 1727)

S√≠

PararRuntime (P√°gina 1714)

S√≠

ReducirVariable (P√°gina 1731)

S√≠

MostrarDi√°logoInicioSesi√≥n (P√°gina 1717)

S√≠

1554

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
WinCC RT Professional
MostrarVisorAvisosC√≥digoPLC (P√°gina 1762)

S√≠

MostrarBloqueEnTIAPortalDelAviso (P√°gina 1760)

S√≠

9.11.1.2

Funciones de sistema

Otras funciones
ActivarImagen
Descripci√≥n
Efect√∫a un cambio de imagen para visualizar la imagen indicada.
Para pasar de la imagen ra√≠z al √°rea permanente o viceversa, utilice la funci√≥n del sistema
"ActivarImagenConN√∫mero".

Utilizaci√≥n en la lista de funciones
ActivarImagen (Nombre de imagen, N√∫mero del objeto)

Utilizaci√≥n en funciones definidas por el usuario
ActivateScreen Screen_name, Object_number
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del dispositivo".

Par√°metros
Nombre de imagen
Nombre de la imagen a la que se cambia.
N√∫mero del objeto
Elemento de manejo que se resalta en la imagen indicada despu√©s del cambio de imagen. El
n√∫mero del elemento de manejo se define mediante el orden de tabulaci√≥n durante la
configuraci√≥n.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1555

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Si indica "0":
‚óè Si al ejecutarse la funci√≥n de sistema est√° enfocada el √°rea permanente, esta permanecer√°
enfocada.
‚óè En cambio, si est√° resaltada la imagen ra√≠z, se destacar√° el primer elemento de manejo de
la imagen indicada.
Nota
Si la funci√≥n de sistema "ActivarImagen" se asocia al evento "Margen alcanzado", s√≥lo se
admite el valor 0 para el par√°metro "N√∫mero del objeto". El objeto activo no se establece
conforme al n√∫mero de objeto, sino seg√∫n la coordenada X del objeto activo antes del
cambio de imagen.

Ejemplo
El siguiente c√≥digo de programa activa la imagen "Screen_2" con la funci√≥n ActivateScreen,
p. ej., al pulsar un bot√≥n.

Sub ActivateScreen_2()
'Userdefined code
'' i. e. when pressing a button
ActivateScreen "Screen_2",0

Consulte tambi√©n
ActivarImagenConN√∫mero (P√°gina 1556)

ActivarImagenConN√∫mero
Descripci√≥n
Dependiendo del valor de una variable, cambia a una imagen determinada.
La imagen se identifica por su n√∫mero de imagen.

Utilizaci√≥n en la lista de funciones
ActivarImagenConN√∫mero (N√∫mero de imagen, N√∫mero del objeto)

Utilizaci√≥n en funciones definidas por el usuario
ActivateScreenByNumber Screen_number, Object_number
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

1556

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
N√∫mero de imagen
Variable que contiene el n√∫mero de imagen a la que se cambia.
Si desea conmutar entre la imagen ra√≠z y el √°rea permanente, y viceversa, introduzca "0" o "-1",
respectivamente.
0 = Cambia de la imagen ra√≠z al √°rea permanente.
-1 = Cambia del √°rea permanente a la imagen ra√≠z.
N√∫mero del objeto
N√∫mero del objeto de imagen que se resalta en la imagen indicada despu√©s del cambio de
imagen. El n√∫mero del elemento de manejo se define mediante el orden de tabulaci√≥n durante
la configuraci√≥n.
Si indica "0":
‚óè Si al ejecutarse la funci√≥n de sistema est√° enfocada el √°rea permanente, esta permanecer√°
enfocada.
‚óè En cambio, si est√° resaltada la imagen ra√≠z, se destacar√° el primer elemento de manejo de
la imagen indicada.

Consulte tambi√©n
ActivarImagen (P√°gina 1555)

ActivarImagenAnterior
Descripci√≥n
Cambia a la imagen que estaba activada antes de cambiar a la imagen actual. El cambio de
imagen no se ejecuta si antes no hab√≠a ninguna imagen activa.
Se guardan las √∫ltimas 10 im√°genes activadas. Si cambia a una imagen que ya no est√°
guardada, aparecer√° un aviso del sistema.
Nota
Si desea utilizar la funci√≥n de sistema, la imagen a la que desea cambiar deber√° estar
contenida en la estructura de navegaci√≥n.

Utilizaci√≥n en la lista de funciones
ActivarImagenAnterior

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1557

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en funciones definidas por el usuario
ActivatePreviousScreen
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del dispositivo".

Par√°metros
--

ActualizarVariable
Descripci√≥n
Lee del controlador el valor actual de la variable con la ID de actualizaci√≥n indicada.

Utilizaci√≥n en la lista de funciones
ActualizarVariable (ID de actualizaci√≥n)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
ID de actualizaci√≥n
ID de actualizaci√≥n asignada a la variable que se desea actualizar.

Consulte tambi√©n
CerrarSesi√≥n (P√°gina 1597)

Codificar
Descripci√≥n
Adapta el tipo de datos "String" de una variable para la transferencia al sistema de
automatizaci√≥n (AS). La variable del tipo de datos "String" de WinCC se convierte al tipo de
datos del AS "Array of Byte". El resultado se escribe en una variable.

Utilizaci√≥n en la lista de funciones
Codificar (Matriz de bytes, Cadena de caracteres, Codificar)

1558

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en funciones definidas por el usuario
Encode Byte_array, String, Encoding
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Matriz de bytes
Variable que contiene el valor convertido.
Nota
El tama√±o de la matriz de bytes debe doblar la longitud de la cadena +2. Si la cadena tiene una
longitud de 120 caracteres, la matriz de bytes debe comprender 242 elementos.
Si el tama√±o no es suficiente, se truncan algunos caracteres o no se convierten.
Cadena de caracteres
Variable del tipo de datos "String" que se debe convertir.
Codificar
0 (hmiEncodeUTF16LE) - String se codifica a UTF16LE (Unicode 16 Little Endian).

CodificarEx
Descripci√≥n
Adapta el tipo de datos "String" de una variable para la transferencia al sistema de
automatizaci√≥n (AS). La variable del tipo de datos "String" de WinCC se convierte al tipo de
datos del AS "Array of Byte". El resultado se escribe en una variable.
A diferencia de la funci√≥n de sistema Codificar, es posible definir el par√°metro Salto de l√≠nea.
El par√°metro Salto de l√≠nea sirve para borrar los saltos de l√≠nea o reemplazarlos por caracteres
predefinidos.

Utilizaci√≥n en la lista de funciones
CodificarEx (Matriz de bytes, Cadena de caracteres, Codificaci√≥n, Salto de l√≠nea)

Utilizaci√≥n en funciones definidas por el usuario
EncodeEx Byte_array, String, Encoding, Line_break
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1559

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Matriz de bytes
Variable que contiene el valor convertido.
Nota
El tama√±o de la matriz de bytes debe doblar la longitud de la cadena +2. Si la cadena tiene una
longitud de 120 caracteres, la matriz de bytes debe comprender 242 elementos.
Si el tama√±o no es suficiente, se truncan algunos caracteres o no se convierten.
Cadena de caracteres
Variable del tipo de datos "String" que se debe convertir.
Codificaci√≥n
0 (hmiEncodeUTF16LE) - String se codifica a UTF16LE (Unicode 16 Little Endian).
Salto de l√≠nea
Todos los saltos de l√≠nea se borran o se reemplazan por caracteres predefinidos. El ajuste
est√°ndar es que no se reemplacen los saltos de l√≠nea.
0 (reemplazar por "\r\n' (0x000D, 0x000A)) - los saltos de l√≠nea se reemplazan por "\r\n".
1 (reemplazar por "\n' (0x000A)) - los saltos de l√≠nea se reemplazan por "\n".
2 (no reemplazar) - los saltos de l√≠nea no se reemplazan.
3 (eliminar los saltos de l√≠nea) - los saltos de l√≠nea se borran.

TeclaDirecta
Descripci√≥n
Permite un manejo r√°pido de las teclas en la pantalla t√°ctil de un panel de operador sin que se
produzcan retardos debidos a la comunicaci√≥n.
Utilice esta funci√≥n de sistema, p. ej., para activar bits del √°rea de E/S de un sistema SIMATIC
S7 directamente desde el panel de operador.
Nota
Si utiliza WinCC integrado en SIMATIC STEP 7 y ha configurado un √°rea DP en SIMATIC
STEP 7: Al accionar el bot√≥n en el que ha configurado la funci√≥n de sistema, en el √°rea ES de
la CPU se activa un bit. Al soltar el bot√≥n el bit se desactiva.

Indicaciones relativas a la configuraci√≥n de la funci√≥n de sistema
Si configura un bot√≥n con la funci√≥n de sistema "TeclaDirecta", se reservar√° un √°rea fija de la
pantalla t√°ctil para el manejo de teclas directas.

1560

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Si bien los objetos de imagen que se encuentran en runtime sobre el bot√≥n al que se ha
asignado la funci√≥n de sistema "TeclaDirecta" ocultan la visualizaci√≥n de dicho bot√≥n, no
impiden que se ejecute la funci√≥n "TeclaDirecta".
Nota
Si se inicia una aplicaci√≥n externa como, por ejemplo, Pocket Internet Explorer o bien Control
Panel, √©sta aparece en primer plano y el runtime en segundo plano. El bit de la funci√≥n
"TeclaDirectaNumeroDeImagen" ya no est√° activado y las teclas o botones con la funci√≥n
configurada "TeclaDirecta" ya no activan el bit correspondiente en el controlador.
ADVERTENCIA
Si la funci√≥n de sistema "TeclaDirecta" es activada accidentalmente, ello puede poner en
peligro a las personas o causar da√±os materiales en la m√°quina.
Tenga en cuenta lo siguiente para evitar estos peligros:
‚óè Al configurar el sin√≥ptico del proceso, ning√∫n objeto de imagen deber√° ocultar el bot√≥n al
que se ha asignado la funci√≥n de sistema "TeclaDirecta".
‚óè La dinamizaci√≥n de la posici√≥n o de la visualizaci√≥n (habilitaci√≥n) de un objeto de imagen
en funci√≥n de valores de proceso no deber√≠a ocultar en runtime el bot√≥n al que se ha
asignado la funci√≥n de sistema "TeclaDirecta".
Nota
Tenga en cuenta esta indicaci√≥n importante durante la configuraci√≥n. Compruebe tambi√©n
las configuraciones existentes y, en caso necesario, modif√≠quelas de inmediato conforme
a dicha indicaci√≥n.
En los casos siguientes el que un bot√≥n est√© oculto por la funci√≥n de sistema "TeclaDirecta" no
causa el problema descrito arriba:
‚óè Al manejar la ventana de avisos
‚óè Al manejar el visor de recetas
‚óè Al desactivar el protector de pantalla
‚óè Al utilizar el teclado de la pantalla
‚óè Al ejecutar la funci√≥n de sistema "ActivarPantallaDeLimpieza"

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1561

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Comportamiento de las teclas directas DP en modo offline
Al ejecutar en el panel de operador la funci√≥n de sistema "CambiarConexi√≥n" con el par√°metro
"Offline", se desconecta la conexi√≥n con el controlador indicado.
Nota
Tenga en cuenta lo siguiente, tanto en SIMATIC STEP 7 como en WinCC:
En este caso, las teclas directas DP siguen activas. Si, estando en modo "Offline", pulsa un
bot√≥n al que se ha asignado la funci√≥n de sistema "TeclaDirecta", o bien si pulsa la tecla directa
en el panel con teclado, el bit correspondiente se activa en el controlador.

Utilizaci√≥n en la lista de funciones
TeclaDirecta (Bit)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Bit
Determina el bit que se debe activar. Dependiendo del panel de operador, el n√∫mero de bit
puede estar comprendido entre 0 y 31, o bien entre 0 y 39.

Ejemplo de aplicaci√≥n
Objetivo
Utilizando un bot√≥n, desea activar bits del √°rea de E/S de un SIMATIC S7 directamente desde
el panel de operador.
Requisitos
WinCC est√° instalado e integrado en SIMATIC STEP 7.
Durante el funcionamiento, el panel de operador tiene que estar conectado a una SIMATIC S7
v√≠a PROFIBUS DP.
Al generar el proyecto, WinCC flexible est√° instalado e integrado.
El √°rea de bits para teclas directas deber√° estar configurada en SIMATIC STEP 7. Para m√°s
informaci√≥n acerca de la configuraci√≥n, consulte el manual del usuario "Comunicaci√≥n".
Indicaciones relativas a la configuraci√≥n
Configure el bot√≥n que desea utilizar en calidad de tecla directa. As√≠gnele al bot√≥n la funci√≥n
de sistema "TeclaDirecta". Introduzca como par√°metro el n√∫mero de bit que se activar√° al
pulsar la tecla.

1562

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Proceso en el panel de operador
El bit se activar√° cuando se pulse la tecla directa y se desactivar√° al soltarla, o bien al salir de
la imagen.

TeclaDirectaNumeroDeImagen
Descripci√≥n
Activa el bit dentro del √°rea de bits indicada de una tecla directa y lo transfiere al controlador
S7 conectado con el panel de operador. As√≠ se garantiza en todo momento una asignaci√≥n
un√≠voca entre el bit de control y el n√∫mero de imagen.
Si no se utiliza esta funci√≥n de sistema, el controlador S7 deber√° distinguir la funci√≥n
correspondiente a trav√©s del n√∫mero de imagen. Ello retarda la actualizaci√≥n del n√∫mero de
imagen tras un cambio de imagen.
Nota
Si se inicia una aplicaci√≥n externa como, por ejemplo, Pocket Internet Explorer o bien Control
Panel, √©sta aparece en primer plano y el runtime en segundo plano. Aun as√≠, el bit de la funci√≥n
"TeclaDirectaNumeroDeImagen" queda activado y las teclas o botones con la funci√≥n
configurada "TeclaDirecta" siguen activando el bit correspondiente en el controlador.

Utilizaci√≥n en la lista de funciones
TeclaDirectaNumeroDeImagen (Bit)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Bit
Determina el bit que se debe activar. Dependiendo del panel de operador, el n√∫mero de bit
puede estar comprendido entre 0 y 31, o bien entre 0 y 39.

RegistrarAcci√≥nDeUsuario
Descripci√≥n
Esta funci√≥n de sistema registra en el Audit Trail las acciones del usuario que no se registran
autom√°ticamente en el Audit Trail. Adem√°s, con esta funci√≥n se puede exigir que el usuario
acuse una acci√≥n, o bien que la confirme con su firma electr√≥nica y que introduzca un

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1563

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
comentario al respecto. Para poder utilizar la funci√≥n de sistema es imprescindible que se
active la configuraci√≥n conforme a las GMP en "Configuraci√≥n de runtime > GMP".
Si en una funci√≥n utiliza la funci√≥n de sistema "NotificarAcci√≥nDeUsuario" y termina la entrada
con el bot√≥n "Cancelar" se puede llamar el depurador. Para controlar este comportamiento, se
puede utilizar en una funci√≥n la instrucci√≥n "On Error Resume Next". Esta instrucci√≥n hace que
se ejecute la instrucci√≥n siguiente tras un error de runtime. Si utiliza la instrucci√≥n "On Error
Resume Next" se suprime tambi√©n la salida de avisos de sistema.

Utilizaci√≥n en la lista de funciones
RegistrarAcci√≥nDeUsuario (Tipo de confirmaci√≥n, Comentario obligatorio, Categor√≠a, Nombre
del objeto, Descripci√≥n)

Utilizaci√≥n en funciones definidas por el usuario
NotifyUserAction Confirmation_type, Mandatory_commenting, Category, Object_name,
Description
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Tipo de confirmaci√≥n
Determina c√≥mo debe confirmarse la acci√≥n
0 = (None): no se requiere confirmaci√≥n; se crea una entrada en el Audit Trail
1 = (Acknowledgement): acuse, el usuario tiene que reconocer la acci√≥n; se crea una entrada
en el Audit Trail
2 = (Digital Signature): firma electr√≥nica, aparece un cuadro de di√°logo en el que el usuario
debe introducir su firma electr√≥nica; se crea una entrada en el Audit Trail
Comentario obligatorio
Determina si el usuario debe introducir un comentario. El comentario se archiva en el Audit
Trail.
0 = (True): verdadero, aparece un cuadro de di√°logo en el que el usuario debe introducir un
comentario
1 = (False): falso; no se requiere ning√∫n comentario
Categor√≠a
Categor√≠a o nombre de clase del objeto modificado
Nombre del objeto
Nombre del objeto modificado
Descripci√≥n
Texto que describe la acci√≥n de usuario que se debe archivar.

1564

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

IncrementarValorEnfocado
Descripci√≥n
Suma el valor indicado al valor de la variable asignada al campo de entrada (campo de
selecci√≥n simb√≥lico, campo de selecci√≥n gr√°fico, deslizador) resaltado actualmente.
Esta funci√≥n de sistema s√≥lo se puede utilizar en teclas de funci√≥n.

Utilizaci√≥n en la lista de funciones
IncrementarValorEnfocado (Valor)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Valor
Valor a sumar al valor de la variable.

RetirarHardwareConSeguridad
Descripci√≥n
Comprueba si se llevan a cabo accesos de escritura o lectura al medio de almacenamiento
externo. Si no se realizan accesos, el medio de almacenamiento externo puede retirarse sin
perder datos.

Utilizaci√≥n en la lista de funciones
RetirarHardwareConSeguridad(Ruta, Resultado)

Utilizaci√≥n en funciones definidas por el usuario
SafelyRemoveHardware Path, Result
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Resultado
Variable en la que se registra el resultado.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1565

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
TRUE: El medio de almacenamiento puede retirarse con seguridad. Se visualiza un aviso de
sistema al efecto.
FALSE: El medio de almacenamiento no puede retirarse. Se visualiza un aviso de sistema al
efecto.
Ruta
Ruta del medio de almacenamiento, p. ej., \Storage Card USB\

AbrirDi√°logoControlPanel
Descripci√≥n
Abre un cuadro de di√°logo en el que se pueden modificar ajustes seleccionados del Panel de
control.
Con esta funci√≥n de sistema se ajusta en el panel de operador, entre otras cosas, lo siguiente:
‚óè Propiedades y valor de la direcci√≥n IP
‚óè Identificaci√≥n del usuario en la red
‚óè WinCC Internet Settings
Nota
Seguridad en el proyecto
Con la funci√≥n de sistema "AbrirDi√°logoControlPanel" se omite el SecureMode en el panel de
operador. Tome las medidas preventivas necesarias para garantizar la seguridad de su
proyecto.

Utilizaci√≥n en la lista de funciones
AbrirDi√°logoControlPanel (cuadro de di√°logo)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Cuadro de di√°logo
Define el di√°logo que se abre en el Panel de control.
‚óè PROFINET_X1: ajuste de la direcci√≥n IP y de los par√°metros de Ethernet.
‚óè PROFINET_X3: ajuste de la direcci√≥n IP y de los par√°metros de Ethernet, solo con Comfort
Panel KP 1500, TP 1500, TP1900, TP2200.

1566

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
‚óè WinCC Internet Settings: ajuste de servidor web, notificaci√≥n por correo electr√≥nico, si el
panel de operador soporta esta funci√≥n.
‚óè ID de red: ajuste para la identificaci√≥n en la red, si el panel de operador soporta estas
funciones.

AbrirVentanaDeS√≠mboloDelSistema
Descripci√≥n
Abre una ventana de comando de Windows.
Utilice esta funci√≥n de sistema si, p. ej., desea copiar archivos o llamar otra aplicaci√≥n.

Utilizaci√≥n en la lista de funciones
AbrirVentanaDeS√≠mboloDelSistema

Utilizaci√≥n en scripts de usuario
OpenCommandPrompt
Utilizable, siempre que el dispositivo configurado soporte scripts de usuario. Encontrar√° m√°s
informaci√≥n al respecto en "Dependencia del dispositivo".

Par√°metros
--

AbrirInternetExplorer
Descripci√≥n
Abre Internet Explorer en el panel de operador.
Si Internet Explorer ya est√° abierto, al llamar esta funci√≥n de sistema se cerrar√° y volver√° a
abrirse.
Nota
Internet Explorer guarda datos temporalmente en el sistema de archivos DRAM del panel de
operador (p.ej. las √∫ltimas p√°ginas web llamadas).
Es posible guardar dichos datos con la funci√≥n de sistema
"CopiaSeguridadSistemaDeArchivosRAM" para que sigan estando disponibles tras un reinicio
del panel de operador.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1567

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en la lista de funciones
AbrirInternetExplorer (P√°gina de inicio)

Utilizaci√≥n en funciones definidas por el usuario
OpenInternetExplorer Start_page
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
P√°gina inicial
P√°gina que se abre cuando se llama Internet Explorer, p. ej. "www.siemens.com".

AbrirPanelDeControl
Descripci√≥n
Abre una ventana que muestra el panel de control de Windows CE. No es posible utilizar esta
funci√≥n de sistema en un PC.
Con esta funci√≥n de sistema se ajusta lo siguiente en un panel de operador basado en
Windows CE, entre otros:
‚óè Seleccionar impresora
‚óè Seleccionar propiedades de transferencia
‚óè Configurar el protector de pantalla
‚óè Configurar la memoria flash
Nota
Ninguna copia de seguridad o restauraci√≥n durante el runtime en curso
S√≥lo se deben ejecutar funciones de copia de seguridad y restauraci√≥n una vez finalizado
el runtime. De lo contrario se pueden producir efectos no deseados como, por ejemplo,
errores en la visualizaci√≥n.

Utilizaci√≥n en la lista de funciones
AbrirPanelDeControl

Utilizaci√≥n en scripts de usuario
OpenControlPanel
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del dispositivo".

1568

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
--

DesconectarPROFIsafe
Descripci√≥n
Deshace la conexi√≥n PROFIsafe para el modo de seguridad positiva entre un KTP Mobile
Panel y el controlador.
Tras ejecutar la funci√≥n de sistema "DesconectarPROFIsafe", el conector del KTP Mobile
Panel puede desenchufarse del controlador sin que la instalaci√≥n notifique un error.

Utilizaci√≥n en la lista de funciones
DesconectarPROFIsafe

Utilizaci√≥n en funciones definidas por el usuario
TerminatePROFIsafe
Puede utilizarse siempre que el dispositivo configurado soporte funciones definidas por el
usuario. Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
--

Consulte tambi√©n
Funciones de sistema para Mobile Panels (P√°gina 1540)
Dependencia del panel de operador (P√°gina 1520)

EnviarCorreoElectronico
Descripci√≥n
Env√≠a un correo electr√≥nico desde el panel de operador al destinatario indicado.
Utilice esta funci√≥n de sistema si p.ej. en caso de mantenimiento o reparaci√≥n desea transferir
el aviso directamente a los t√©cnicos responsables.
Nota
Para enviar los avisos adicionalmente en forma de correo electr√≥nico, el sistema HMI debe
disponer de un cliente de correo electr√≥nico.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1569

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en la lista de funciones
EnviarCorreoElectronico (Direcci√≥n, Asunto, Texto, Direcci√≥n de respuesta)

Utilizaci√≥n en funciones definidas por el usuario
SendEMail Address, Subject, Text, Return_address
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Direcci√≥n
Direcci√≥n de correo electr√≥nico del destinatario.
Asunto
L√≠nea de asunto del mensaje de correo electr√≥nico.
Texto
Texto que se env√≠a en el mensaje de correo electr√≥nico.
Direcci√≥n de respuesta
Direcci√≥n de correo electr√≥nico a la que el destinatario debe enviar la respuesta.

AjustarHorarioVerano
Descripci√≥n
La funci√≥n de sistema "AjustarHorarioVerano" cambia la hora del panel de operador a horario
de verano o invierno.
El cambio de horario se efect√∫a inmediatamente despu√©s de ejecutar la funci√≥n de sistema.
Nota
La funci√≥n "AjustarHorarioVerano" no soporta zonas horarias sin horario de verano.
Nota
Windows 7
La funci√≥n de sistema "AjustarHorarioVerano" no se soporta en paneles de operador basados
en PC con Windows 7.

Utilizaci√≥n en la lista de funciones
AjustarHorarioVerano(Horario de verano)

1570

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en funciones definidas por el usuario
SetDaylightSavingTime Daylight_saving_time
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Horario de verano
Determina si se activa el horario de verano en el panel de operador:
0 = Horario de verano no activado
1 = Horario de verano activado

Bot√≥nPulsar
Descripci√≥n
La funci√≥n de sistema se configura con las teclas de funci√≥n de un panel de operador. La
funci√≥n de sistema "Bot√≥nPulsar" dispara la funci√≥n asignada al evento "Pulsar Tecla" en el
objeto de imagen indicado.
Utilice esta funci√≥n de sistema por ejemplo si desea activar un bot√≥n de la imagen desde una
tecla de funci√≥n del panel de operador.
Nota
Configure las funciones de sistema "Bot√≥nPulsar" y "Bot√≥nSoltar" siempre conjuntamente. Por
tanto, si se asocia la funci√≥n de sistema "Bot√≥nPulsar" al evento "Pulsar tecla" de una tecla de
funci√≥n, debe asociarse la funci√≥n de sistema "Bot√≥nSoltar" al evento "Soltar" de la misma
tecla de funci√≥n.

Utilizaci√≥n en la lista de funciones
Bot√≥nPulsar (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del objeto de imagen en el que se lanza el evento.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1571

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Bot√≥nSoltar
Descripci√≥n
La funci√≥n de sistema s√≥lo se puede asociar a las teclas de funci√≥n de un panel de operador
y lanza el evento "Soltar tecla" en el objeto de imagen indicado.
Utilice esta funci√≥n de sistema por ejemplo si desea activar un bot√≥n de la imagen desde una
tecla de funci√≥n del panel de operador.
Nota
Configure las funciones de sistema "Bot√≥nPulsar" y "Bot√≥nSoltar" siempre conjuntamente. Por
tanto, si se asocia la funci√≥n de sistema "Bot√≥nPulsar" al evento "Pulsar tecla" de una tecla de
funci√≥n, debe asociarse la funci√≥n de sistema "Bot√≥nSoltar" al evento "Soltar tecla" de la
misma tecla de funci√≥n.

Utilizaci√≥n en la lista de funciones
Bot√≥nSoltar (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del objeto de imagen en el que se lanza el evento.

CopiaSeguridadSistemaDeArchivosRAM
Descripci√≥n
Guarda el sistema de archivos RAM en el soporte de memoria del panel de operador.
Tras reiniciar el panel de operador volver√°n a cargarse autom√°ticamente los datos en el
sistema de archivos RAM.
Las aplicaciones como el Internet Explorer guardan datos temporalmente en el sistema de
archivos DRAM del panel de operador (p.ej. las √∫ltimas p√°ginas web llamadas).

Utilizaci√≥n en la lista de funciones
CopiaSeguridadSistemaDeArchivosRAM

1572

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en funciones definidas por el usuario
BackupRAMFileSystem
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del dispositivo".

Par√°metros
--

SimularTeclaSistema
Descripci√≥n
Simula el comportamiento de una tecla del sistema. Utilice esta funci√≥n de sistema si el panel
de operador no dispone de una tecla de sistema, p. ej. la tecla "ACK", la tecla ENTER o el
bloque num√©rico.

Utilizaci√≥n en la lista de funciones
SimularTeclaSistema(Tecla del sistema)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Tecla del sistema
Tecla del sistema cuyo comportamiento debe ser simulado.

Tecla del sistema "+/-"
En la funci√≥n de sistema SimularTeclaSistema, la tecla de sistema "+/-" solo es soportada por
los paneles de operador siguientes:
‚óè KP300 Basic
‚óè KP400 Basic
‚óè KTP400 Basic mono PN
‚óè KTP400 Basic color PN
‚óè KTP400 Basic color PN Portrait
‚óè KTP600 Basic mono PN
‚óè KTP600 Basic color PN
‚óè KTP600 Basic color DP

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1573

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
‚óè KTP700 Basic PN/DP
‚óè KTP900 Basic PN
‚óè KTP1000 Basic PN
‚óè KTP1000 Basic DP
‚óè KTP1200 Basic PN/DP
‚óè Comfort Panels
En el resto de paneles de operador, utilice las teclas de sistema "+" y "-" por separado.

SimularVariable
Descripci√≥n
Simula el comportamiento de variables y objetos din√°micos (p.ej. listas de texto), sin que el
panel de operador est√© conectado al controlador. Por ejemplo, puede configurar la funci√≥n de
sistema y el evento "Creada" de una imagen.
Utilice esta funci√≥n de sistema p. ej. para presentar la funcionalidad de un proyecto.
Para la simulaci√≥n s√≥lo se pueden utilizar variables del tipo de datos Integer.
Nota
Si se utiliza la funci√≥n de sistema "SimularVariable" en combinaci√≥n con un tiempo de ciclo
corto en un Basic Panel, el panel de operador se puede sobrecargar.

Utilizaci√≥n en la lista de funciones
SimularVariable (Variable, Ciclo, Valor m√°ximo, Valor m√≠nimo, Valor)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Variable
Variable cuyo valor se debe modificar.
Ciclo
Factor con el que se multiplica el ciclo b√°sico de 200 milisegundos. El ciclo determina cu√°ndo
debe cambiar el valor de la variable por el valor indicado. El ciclo puede estar comprendido
entre 1 y 32767.

1574

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Valor m√°ximo
Valor m√°ximo que puede adoptar el valor de la variable durante la simulaci√≥n. El valor m√°ximo
debe ser mayor que el valor m√≠nimo, pero menor o igual a 32767.
Valor m√≠nimo
Valor m√≠nimo que puede adoptar el valor de la variable durante la simulaci√≥n. El valor m√≠nimo
debe ser menor que el valor m√°ximo, pero mayor o igual a -32768.
Valor
Valor por el que se cambia el valor de la variable en cada ciclo. El valor puede estar
comprendido entre -32768 y 32767.
‚óè Un valor positivo incrementa el valor de la variable. Al alcanzarse el valor m√°ximo, el valor
de la variable se ajusta al valor m√≠nimo tras concluir el siguiente ciclo de actualizaci√≥n.
‚óè Un valor negativo reduce el valor de la variable. Al alcanzarse el valor m√≠nimo, el valor de
la variable se ajusta al valor m√°ximo tras concluir el siguiente ciclo de actualizaci√≥n.

IniciarPrograma
Descripci√≥n
Inicia el programa indicado en el panel de operador.
El software runtime se sigue ejecutando en segundo plano. Los avisos se siguen visualizando
y los valores de proceso se siguen actualizando.
Si finaliza la aplicaci√≥n indicada, en el panel de operador se visualizar√° la imagen que estaba
activada al ejecutar la funci√≥n de sistema.
Utilice esta funci√≥n de sistema por ejemplo para editar registros de receta en el panel de
operador en MS Excel.
Nota
Si Windows CE est√° instalado en el panel de operador, compruebe durante la configuraci√≥n si
la aplicaci√≥n deseada se puede iniciar con esta funci√≥n de sistema.
Utilizando esta funci√≥n de sistema podr√° iniciar todas las aplicaciones que se pueden iniciar en
el cuadro de di√°logo "Ejecutar" de Windows CE.
La aplicaci√≥n que desea abrir debe estar instalada en el panel de operador.
Nota
Si una aplicaci√≥n no se puede ejecutar en un Mobile Panel o Comfort Panel con la funci√≥n de
sistema "IniciarPrograma", compruebe la ruta indicada en la funci√≥n de sistema. Los Mobile
Panels y los Comfort Panels incluyen algunas aplicaciones en la carpeta "\flash\addons".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1575

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en la lista de funciones
IniciarPrograma (Nombre del programa, Par√°metros del programa, Representaci√≥n, Esperar
fin de programa)

Utilizaci√≥n en funciones definidas por el usuario
StartProgram Program_name, Program_parameters, Display_mode,
Wait_for_program_to_end
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Nombre del programa
Nombre y ruta del programa a iniciar. En este par√°metro se distingue entre may√∫sculas y
min√∫sculas.
Nota
Si la ruta contiene un espacio en blanco, el programa s√≥lo se iniciar√° correctamente si la ruta
se indica entre comillas, p. ej. "C:\Program Files\START\start.exe".
Par√°metros del programa
Par√°metros a transferir al iniciar el programa, p.ej. un archivo que se deba abrir tras el inicio del
programa.
Los par√°metros necesarios se describen en la documentaci√≥n del programa a iniciar.
Representaci√≥n
Determina c√≥mo se debe visualizar la ventana del programa en el panel de operador:
0 (hmiShowNormal) = Normal
1 (hmiShowMinimized) = Minimizada
2 (hmiShowMaximized) = Maximizada
3 (hmiShowMinimizedAndInactive) = Minimizada e inactiva
Esperar fin de programa
Determina si se debe regresar al proyecto al finalizar el programa:
0 (hmiNo) = No: No regresar al proyecto.
1 (hmiYes) = S√≠: Regresar al proyecto.
Nota
El par√°metro "Esperar fin de programa" s√≥lo est√° disponible en Runtime Advanced y Panels.

1576

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

EstadoForzarLeerValores
Descripci√≥n
Inicia o detiene la actualizaci√≥n de los valores en la tabla de observaci√≥n. Los valores se leen
del aut√≥mata conectado con el panel de operador hasta que se detiene la actualizaci√≥n.
Nota
Durante la actualizaci√≥n de los valores no es posible efectuar entradas en los campos de
entrada de la tabla de observaci√≥n.

Utilizaci√≥n en la lista de funciones
EstadoForzarLeerValores (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre de la tabla de observaci√≥n en la que se escriben los datos del controlador.

Consulte tambi√©n
Tabla de observaci√≥n (P√°gina 352)

EstadoForzarEscribirValores
Descripci√≥n
Escribe los valores de la tabla de observaci√≥n en el controlador conectado con el panel de
operador.

Utilizaci√≥n en la lista de funciones
EstadoForzarEscribirValores (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1577

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Objeto de imagen
Nombre de la tabla de observaci√≥n desde la que se escriben los datos en el controlador.

Consulte tambi√©n
Tabla de observaci√≥n (P√°gina 352)

ControlarSmartServer
Descripci√≥n
Inicia o detiene el Sm@rtServer.

Utilizaci√≥n en la lista de funciones
ControlarSmartServer (Modo)

Utilizaci√≥n en funciones definidas por el usuario
ControlSmartServer Mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Modo
Determina si el Sm@rtServer se debe iniciar o detener.
-1 (hmiToggle) = Conmutar: Conmuta entre ambos estados.
0 (hmiStop) = Detener: Detener el Sm@rtServer
1 (hmiStart) = Iniciar: Iniciar el Sm@rtServer

ControlarServidorWeb
Descripci√≥n
Inicia o detiene el servidor web.

Utilizaci√≥n en la lista de funciones
ControlarServidorWeb (Modo)

1578

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en funciones definidas por el usuario
ControlWebServer Mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Modo
Determina si el servidor web se debe iniciar o detener.
-1 (hmiToggle) = Conmutar: Conmuta entre ambos estados.
0 (hmiStop) = Detener: El servidor web se detiene
1 (hmiStart) = Iniciar: El servidor web se inicia

PararRuntime
Descripci√≥n
Sale del software runtime y, con ello, del proyecto que se est√° ejecutando en el panel de
operador.

Utilizaci√≥n en la lista de funciones
PararRuntime (Modo)

Utilizaci√≥n en funciones definidas por el usuario
StopRuntime Mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Modo
Determina si al finalizar el software runtime tambi√©n se debe cerrar el sistema operativo.
0 (hmiStopRuntime) = Runtime: No cerrar el sistema operativo
1 (hmiStopRuntimeAndOperatingSystem) = Runtime y sistema operativo: Cerrar el sistema
operativo (no en Windows CE)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1579

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente c√≥digo de programa cierra Runtime y el sistema operativo.

{
//Stop runtime and shutdown
StopRuntime (hmiStopRuntimeAndOperationSystem);
}

El valor de retorno guardado puede procesarse en el c√≥digo subsiguiente.

ConsultarTexto
Descripci√≥n
Lee el registro de una lista de textos. El resultado depende del valor y del idioma de runtime
seleccionado. El resultado se guarda en una variable del tipo "String".

Utilizaci√≥n en la lista de funciones
Consultar texto (Texto de salida, √çndice, Idioma, Lista de textos)

Utilizaci√≥n en funciones definidas por el usuario
LookupText Output_text, Index, Language, Text_list
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Texto de salida
Variable en la que se escribe el resultado.
√çndice
Variable que determina el valor del registro de la lista.

1580

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Idioma
Determina en qu√© idioma de runtime se debe leer el registro de la lista.
‚óè Idioma de runtime
Abreviatura de idioma conforme a la referencia VBScript, p. ej. "de-DE" para alem√°n
(Alemania) o "en-ES" para ingl√©s (EE UU). La selecci√≥n depende de los idiomas runtime
activados.
‚óè Variable
Variable que contiene el idioma. El idioma de runtime se introduce en forma de valor
decimal del indicador de pa√≠s, p. ej. 1031 para alem√°n est√°ndar, 1033 para ingl√©s de
EE UU. Encontrar√° m√°s informaci√≥n al respecto en los conceptos b√°sicos de VBScript bajo
el tema "Cuadro de ID de configuraci√≥n regional (LCID)".
‚óè N√∫mero entero
El n√∫mero que corresponde al orden de los idiomas de runtime en el cambio de idioma.
La selecci√≥n depende de los idiomas de runtime activados, p. ej., "0" para el idioma que
aparece al iniciar runtime por primera vez. Encontrar√° m√°s informaci√≥n al respecto en el
apartado "Idiomas en runtime".
Lista de textos
Establece la lista de textos. El registro se lee de la lista de textos.

DesconectarVariableDelVolante
Descripci√≥n
Desconecta la variable conectada al elemento de mando "Volante" y vuelve a conectar el
volante con la variable global.

Utilizaci√≥n en la lista de funciones
DesconectarVariableDelVolante

Utilizaci√≥n en scripts de usuario
-

Par√°metros
--

ConectarVariableAlVolante
Descripci√≥n
Asigna la variable al elemento de manejo "Volante". Al accionarse el volante cambia el valor de
dicha variable. La conexi√≥n se puede deshacer de nuevo utilizando la funci√≥n de sistema
"DesconectarVariableAlVolante".
Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1581

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en la lista de funciones
ConectarVariableAlVolante (Valor)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Valor
Nombre de la variable conectada al elemento de manejo "Volante".

ReducirValorEnfocado
Descripci√≥n
Resta el valor indicado del valor de la variable vinculada al objeto de imagen enfocado
actualmente.
Esta funci√≥n de sistema s√≥lo se puede utilizar en teclas de funci√≥n.

Utilizaci√≥n en la lista de funciones
ReducirValorEnfocado (Valor)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Valor
Valor que se va a restar del valor de la variable.

MostrarTextoDeAyuda
Utilizaci√≥n
Muestra el tooltip configurado para el objeto seleccionado.
Si la funci√≥n de sistema se ha asociado a una tecla de funci√≥n, se mostrar√° el tooltip
correspondiente al objeto de imagen resaltado en ese momento. Si al mismo tiempo se ha
configurado un tooltip para la imagen, ser√° posible conmutar a √©sta bien sea pulsando la tecla
<Intro> o bien haciendo doble clic en la ventana de ayuda.

1582

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Si la funci√≥n de sistema se ha asociado a un bot√≥n, se mostrar√° s√≥lo el tooltip de la imagen
actual. Si se ha configurado tambi√©n un tooltip asociado al bot√≥n, se mostrar√° primero dicho
texto. Pulsando la tecla <Intro> o haciendo doble clic en la ventana de ayuda se conmuta al
tooltip de la imagen actual.
Nota
Mientras est√© abierta la ventana de ayuda, no se podr√° operar ning√∫n otro objeto de imagen.
Para operar los objetos de imagen, cierre la ventana de ayuda.

Cerrar la ventana de ayuda
La ventana de ayuda se puede cerrar de las maneras siguientes:
En paneles de operador con teclado:
‚óè Pulsando de nuevo la tecla <HELP>
‚óè Pulsando la tecla <HELP>
En paneles de operador con pantalla t√°ctil:
‚óè Tocando el bot√≥n

Utilizaci√≥n en la lista de funciones
MostrarTextoDeAyuda (Representaci√≥n)

Utilizaci√≥n en funciones definidas por el usuario
ShowOperatorNotes Display_mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Representaci√≥n
Determina si el tooltip configurado se debe mostrar u ocultar:
0 (hmiOff) = Off: ocultar el tooltip configurado
1 (hmiOn) = On: mostrar el tooltip configurado
-1 (hmiToggle) = Conmutar: Conmuta entre ambos estados.

MostrarVersi√≥nDeSoftware
Descripci√≥n
Muestra u oculta el n√∫mero de versi√≥n del software runtime.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1583

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Utilice esta funci√≥n de sistema por ejemplo si en caso de reparaci√≥n o mantenimiento necesita
saber la versi√≥n del software runtime utilizado.

Utilizaci√≥n en la lista de funciones
MostrarVersi√≥nDeSoftware (Representaci√≥n)

Utilizaci√≥n en funciones definidas por el usuario
ShowSoftwareVersion Display_mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Representaci√≥n
Determina si el n√∫mero de versi√≥n se debe mostrar u ocultar:
0 (hmiOff) = Off: Ocultar el n√∫mero de versi√≥n
1 (hmiOn) = On: Mostrar el n√∫mero de versi√≥n
-1 (hmiToggle) = Conmutar: Conmuta entre ambos estados.

MostrarImagenEmergente
Descripci√≥n
Llama la imagen emergente, p. ej. al pulsar un bot√≥n.
Como coordenadas puede indicar un valor constante o asignar una variable.
Si la imagen emergente configurada no es visible o solo lo es parcialmente, las coordenadas
se ajustan a 0.0.
Sea cual sea el tama√±o del √°rea permanente, la posici√≥n inicial de las coordenadas es siempre
0.0.

Utilizaci√≥n en la lista de funciones
MostrarImagenEmergente (nombre de la imagen, coordenada X, coordenada Y, modo de
visualizaci√≥n, animaci√≥n, velocidad de la animaci√≥n)

Utilizaci√≥n en funciones definidas por el usuario
ShowPopupScreen Screen_name, X_coordinate, Y_coordinate, Display_mode, Animation,
Animation_speed

1584

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Nombre de la imagen
Define el nombre de la imagen emergente que aparece en runtime al pulsar el bot√≥n.
Coordenada X
Posici√≥n de la imagen emergente en el eje X de la imagen actual
Coordenada Y
Posici√≥n de la imagen emergente en el eje Y de la imagen actual
Modo de visualizaci√≥n
Define el modo de la imagen emergente:
Conmutar
Off
On
Animaci√≥n
Determina la direcci√≥n en la que aparece la imagen emergente:
Off
Izquierda
Arriba
Derecha
Abajo
Velocidad de la animaci√≥n
Determina la velocidad con que aparece la imagen emergente:
Lenta
Media
R√°pida

MostrarImagenEmergenteTama√±oModificable
Descripci√≥n
Llama la imagen emergente con un tama√±o definido. Con esta funci√≥n de sistema se puede
abrir una imagen emergente en otro tama√±o, y para navegar por el contenido de la imagen
emergente se muestran las barras de desplazamiento.
Como coordenadas puede indicar un valor constante o asignar una variable. Si la imagen
emergente configurada no es visible o solo lo es parcialmente, las coordenadas se ajustan a
0.0. Sea cual sea el tama√±o del √°rea permanente, la posici√≥n inicial de las coordenadas es
siempre 0.0.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1585

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Adem√°s, se definen la anchura y la altura visualizadas de la imagen emergente, que pueden
no coincidir con los tama√±os de la imagen emergente configurada. En tal caso se visualizan las
barras de desplazamiento en la imagen emergente.
Nota
Manejo en paneles de operador con teclas
Para desplazarse por las im√°genes emergentes, utilice la combinaci√≥n de teclas <ALT>
+<tecla de flecha>.

Mostrar solo una barra de desplazamiento
Si en los par√°metros de la funci√≥n del sistema se indica √∫nicamente un tama√±o menor que el
tama√±o de la imagen emergente configurada, se visualizan las dos barras de desplazamiento
en la imagen emergente. Existen dos posibilidades para configurar solo una barra de
desplazamiento en la imagen emergente:
‚óè Reduzca la anchura/altura de la imagen emergente configurada en el equivalente al
tama√±o de la barra de desplazamiento espec√≠fica del dispositivo.
‚óè Defina, para un par√°metro de tama√±o, el valor que coincida con el tama√±o real de la imagen
emergente, y a√±√°dale el tama√±o de la barra de desplazamiento espec√≠fica del panel. Defina
el valor del otro tama√±o seg√∫n sus necesidades.
Ejemplo:
Desea llamar una imagen emergente con un tama√±o configurado de 500 x 420 en el tama√±o
500 x 300 con una barra de desplazamiento vertical. Asigne al par√°metro Anchura el valor
534, que equivale a la anchura real de la imagen emergente configurada m√°s el tama√±o de
la barra de desplazamiento (34). Introduzca el valor 300 para la Altura. En runtime, la
imagen emergente se llamar√° en el tama√±o 500 x 300 y solo se visualizar√° la barra de
desplazamiento vertical.
Tipo de panel (versi√≥n V14)

Anchura

Altura

Paneles de operador con un tama√±o de pantalla de 4"
Comfort Panels con un tama√±o de pantalla de 19''

25

25

27

27

34

34

Runtime Advanced
Paneles de operador con un tama√±o de pantalla de 9"
Comfort Panels con un tama√±o de pantalla de 15"
Comfort Panels con un tama√±o de pantalla de 22"
Paneles de operador con un tama√±o de pantalla de 7"
Paneles de operador con un tama√±o de pantalla de 12"

Utilizaci√≥n en la lista de funciones
MostrarImagenEmergenteTama√±oModificable (nombre de la imagen, coordenada X,
coordenada Y, ancho, altura, modo de visualizaci√≥n, animaci√≥n, velocidad de la animaci√≥n)

1586

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en funciones definidas por el usuario
ShowPopupScreenSizable Screen_name, X_coordinate, Y_coordinate, Width, Height,
Display_mode, Animation, Animation_speed

Par√°metros
Nombre de la imagen
Define el nombre de la imagen emergente que aparece en runtime al pulsar el bot√≥n.
Coordenada X
Posici√≥n de la imagen emergente en el eje X de la imagen actual
Coordenada Y
Posici√≥n de la imagen emergente en el eje Y de la imagen actual
Anchura
Determina la anchura de la imagen emergente. La anchura m√°xima no debe exceder la
anchura de la pantalla del panel de operador configurado.
Altura
Determina la altura de la imagen emergente. La altura m√°xima no debe rebasar la altura de
imagen del panel de operador configurado.
Modo de visualizaci√≥n
Define el modo de la imagen emergente:
Conmutar
Off
On
Animaci√≥n
Determina la direcci√≥n en la que aparece la imagen emergente:
Off
Izquierda
Arriba
Derecha
Abajo
Velocidad de la animaci√≥n
Determina la velocidad con que aparece la imagen emergente:
Lenta
Media
R√°pida

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1587

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Consulte tambi√©n
Funciones de sistema para Runtime Advanced (P√°gina 1549)

MostrarImagenDeslizable
Descripci√≥n
Llama la imagen deslizable, p. ej., al pulsar un bot√≥n.

Utilizaci√≥n en la lista de funciones
MostrarImagenDeslizable (nombre de imagen, modo)

Utilizaci√≥n en funciones definidas por el usuario
ShowSlideInScreen SlideInScreen_name, Mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Nombre de imagen
Define la imagen deslizable que aparece en runtime al pulsar el bot√≥n:
Imagen deslizable arriba
Imagen deslizable abajo
Imagen deslizable a la izquierda
Imagen deslizable a la derecha
Modo
Define el modo para la imagen deslizable:
Conmutar
Off
On

1588

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ficheros
ArchivarArchivoDeInforme
Descripci√≥n
Esta funci√≥n de sistema desplaza o copia un fichero para archivarlo a largo plazo en una
ubicaci√≥n diferente.
Antes de"ArchivarArchivoDeInforme" ejecute siempre la funci√≥n de sistema
"CerrarTodosLosFicheros".
Tras concluir esta funci√≥n de sistema, ejecute la funci√≥n de sistema "AbrirTodosLosFicheros".
En el modo "Copiar fichero", los ficheros se vuelven a abrir s√≥lo tras haberse copiado
correctamente el fichero, o bien si se excede el tiempo previsto para la operaci√≥n de copia.
En el modo "Desplazar fichero" se cambia el nombre de los ficheros a desplazar y se abren de
inmediato los nuevos ficheros. Para desplazar los ficheros cuyo nombre ha cambiado, se lanza
una petici√≥n que intenta desplazarlos cada 300 segundos en caso de que el directorio de
destino no est√© disponible. Dicha petici√≥n permanece activa hasta ser ejecutada, incluso
despu√©s de un rearranque completo del runtime. Por tanto, antes de desplazar un fichero,
deber√° comprobar si el directorio de destino est√° disponible.
Utilice en el caso de los Audit Trails siempre el modo "Desplazar (hmiMove)", puesto que de
lo contrario se infringir√° la directiva FDA debido a la doble gesti√≥n de datos.

Utilizaci√≥n en la lista de funciones
ArchivarArchivoDeInforme (Tipo de fichero, Fichero, Nombre del directorio, Modo)

Utilizaci√≥n en funciones definidas por el usuario
ArchiveLogFile Log_type, Log, Directory_name, Mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Tipo de fichero
Determina el tipo de fichero:
0 (hmiTagArchive) = Fichero de variables
1 (hmiAlarmArchive) = Fichero de avisos
2 (hmiAudittrailArchive)= Fichero Audit Trail disponible en proyectos conformes a GMP.
Encontrar√° m√°s informaci√≥n en "Activar configuraci√≥n conforme a GMP".
Fichero
Nombre del fichero a archivar.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1589

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Nombre del directorio
Ruta en la que se guarda el fichero.
Modo
0 (hmiCopy) = Copiar fichero
1 (hmiMove) = Desplazar fichero

Ejemplo de aplicaci√≥n
Hay que desplazar un fichero del medio de almacenamiento local al servidor con el fin de crear
una copia de seguridad en intervalos regulares.
Indicaciones relativas a la configuraci√≥n
En el planificador de tareas, cree una tarea que se ejecute cada d√≠a a una hora determinada.
Asocie la lista de funciones siguiente a la tarea:

Proceso en el panel de operador
‚óè Todos los ficheros abiertos se cierran.
‚óè El fichero indicado se desplaza al servidor.
‚óè Todos los ficheros cerrados se abren de nuevo.

ArchivarVariable
Descripci√≥n
Guarda el valor de la variable indicada en el fichero de variables deseado.
Utilice esta funci√≥n de sistema si desea archivar un valor de proceso en un momento
determinado.

1590

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en la lista de funciones
ArchivarVariable (Variable)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Variable
Variable cuyo valor se desea archivar. La variable se deposita en el fichero configurado para
la variable indicada.

CopiarFichero
Descripci√≥n
Copia el contenido de un fichero en un fichero diferente. Los valores de variables s√≥lo se
pueden copiar en otros ficheros de variables, en tanto que los avisos s√≥lo se pueden copiar en
otros ficheros de avisos.
Nota
Al copiar un fichero con la funci√≥n de sistema "CopiarFichero" puede suceder que las
aplicaciones de terceros no puedan leer los caracteres especiales contenidos en los textos de
los avisos archivados en la copia del fichero. WinCC Runtime no se ve afectado. WinCC
Runtime puede leer los ficheros copiados sin problema alguno.
Nota
Al copiar los ficheros circulares, se copia un 80% de las entradas del fichero. El 20% de las
entradas no se copia porque el espacio de memoria est√° reservado de forma est√°ndar para el
desbordamiento del b√∫fer.

Utilizaci√≥n en la lista de funciones
CopiarFichero (Tipo de fichero, Fichero de destino, Fichero de origen, Modo, Borrar fichero de
origen)

Utilizaci√≥n en funciones definidas por el usuario
CopyLog Log_type, Destination log, Source_log, Mode, Delete_source_log
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1591

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Tipo de fichero
Determina el tipo de fichero:
0 (hmiTagArchive) = Fichero de variables
1 (hmiAlarmArchive) = Fichero de avisos
Fichero de destino
Nombre del fichero al que se copian las entradas (fichero de destino).
Fichero de origen
Nombre del fichero desde el que se copian las entradas (fichero de origen).
Modo
Determina c√≥mo se debe proceder con las entradas en el fichero de destino:
0 (hmiOverwrite) = Sobrescribir: Las entradas existentes se sobrescriben.
2 (hmiAppend) = Agregar: Las entradas se insertan al final del fichero de destino. Una vez
alcanzado el tama√±o configurado del fichero de destino, √©ste se tratar√° como un fichero
circular.
Borrar fichero de origen
Determina si el fichero de origen se debe borrar tras finalizar la copia.
0 (hmiNo) = No: No borrar.
1 (hmiYes) = S√≠: Borrar.

BorrarFichero
Descripci√≥n
Borra todos los registros del fichero indicado.

Utilizaci√≥n en la lista de funciones
BorrarFichero (Tipo de fichero, Fichero)

Utilizaci√≥n en funciones definidas por el usuario
ClearLog Log_type, Log
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

1592

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Tipo de fichero
Determina el tipo de fichero.
0 (hmiTagArchive) = Fichero de variables
1 (hmiAlarmArchive) = Fichero de avisos
2 (hmiAudittrailArchive) = Fichero Audit Trail. Disponible en proyectos conformes a GMP.
Encontrar√° m√°s informaci√≥n en "Activar configuraci√≥n conforme a GMP".
Fichero
Nombre del fichero del que se borrar√°n todas las entradas.

AbrirTodosLosFicheros
Descripci√≥n
Restablece la conexi√≥n entre WinCC y los ficheros. La archivaci√≥n puede continuar.
Nota
Para reiniciar el proceso de archivar, ejecute la funci√≥n de sistema "IniciarArchivaci√≥n".

Utilizaci√≥n en la lista de funciones
AbrirTodosLosFicheros

Utilizaci√≥n en funciones definidas por el usuario
OpenAllLogs
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del dispositivo".

Par√°metros
--

Ejemplo de aplicaci√≥n
Desea cambiar en runtime el soporte de datos en el que se archivan los valores de proceso.
Indicaciones relativas a la configuraci√≥n
Configure las funciones de sistema "PararArchivaci√≥n" y "CerrarTodosLosFicheros" y
as√≥cielas al bot√≥n "Close Archive".
Configure las funciones de sistema "AbrirTodosLosFicheros" e "IniciarArchivaci√≥n" y as√≥cielas
al bot√≥n "Open Archive".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1593

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Transfiera como par√°metro el nombre del fichero que se debe parar o iniciar, respectivamente.
Proceso en el panel de operador
Cuando pulse el bot√≥n "Close Archive" se parar√° el fichero indicado y se cerrar√°n todos los
ficheros abiertos. A continuaci√≥n podr√° cambiar el soporte de datos. Con el bot√≥n "Open
Archive" se abren todos los ficheros. Se sigue archivando en el fichero indicado.

CerrarTodosLosFicheros
Descripci√≥n
Deshace la conexi√≥n entre WinCC y todos los ficheros.

Utilizaci√≥n en la lista de funciones
CerrarTodosLosFicheros

Utilizaci√≥n en funciones definidas por el usuario
CloseAllLogs
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del dispositivo".

Par√°metros
--

Ejemplo de aplicaci√≥n
Desea cambiar en runtime el soporte de datos en el que se archivan los valores de proceso.
Indicaciones relativas a la configuraci√≥n
Asigne la funci√≥n de sistema "CerrarTodosLosFicheros" al bot√≥n "Close Archive".
Configure las funciones de sistema "AbrirTodosLosFicheros" e "IniciarArchivaci√≥n" y as√≥cielas
al bot√≥n "Open Archive".
Transfiera como par√°metro el nombre del fichero que se debe parar o iniciar, respectivamente.
Proceso en el panel de operador
Al pulsar el bot√≥n "Close Archive" se cerrar√°n los ficheros abiertos. A continuaci√≥n podr√°
cambiar el soporte de datos. Durante el cambio del soporte de datos se reanuda el archivado.
Se almacenan los valores de proceso que se archivar√°n. Con el bot√≥n "Open Archive" se abren
todos los ficheros. La archivaci√≥n contin√∫a en el fichero indicado. Los valores de proceso
almacenados se a√±aden al fichero.

1594

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

IniciarArchivaci√≥n
Descripci√≥n
Inicia la archivaci√≥n de valores de proceso o avisos en el fichero indicado. La funci√≥n tambi√©n
puede aplicarse a los Audit Trails.
La archivaci√≥n se puede cancelar en runtime utilizando la funci√≥n de sistema
"PararArchivaci√≥n".

Utilizaci√≥n en la lista de funciones
IniciarArchivaci√≥n (Tipo de fichero, Fichero)

Utilizaci√≥n en funciones definidas por el usuario
StartLogging Log_type, Log
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Tipo de fichero
Determina el tipo de fichero:
0 (hmiTagArchive) = Fichero de variables
1 (hmiAlarmArchive) = Fichero de avisos
2 (hmiAudittrailArchive) = Audit Trail
Fichero
Nombre del fichero a iniciar.

Consulte tambi√©n
Determinar el comportamiento del fichero al iniciar runtime (P√°gina 640)

IniciarFicheroSiguiente
Descripci√≥n
Detiene la archivaci√≥n de valores de proceso o avisos en el fichero indicado.
La archivaci√≥n contin√∫a en el siguiente fichero del fichero circular segmentado para el que
haya configurado el fichero indicado.
Si no ha configurado ning√∫n fichero circular segmentado para el fichero indicado, esta funci√≥n
de sistema no tendr√° ning√∫n efecto.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1595

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en la lista de funciones
IniciarFicheroSiguiente (Tipo de fichero, Fichero)

Utilizaci√≥n en funciones definidas por el usuario
StartNextLog Log_type, Log
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Tipo de fichero
Determina el tipo de fichero:
0 (hmiTagArchive) = Fichero de variables
1 (hmiAlarmArchive) = Fichero de avisos
Fichero
Nombre del fichero para el que se ha detenido la archivaci√≥n y que continuar√° en el fichero
siguiente.

PararArchivaci√≥n
Descripci√≥n
Detiene la archivaci√≥n de valores de proceso o avisos en el fichero indicado. La funci√≥n
tambi√©n puede aplicarse a los Audit Trails.
La archivaci√≥n se puede reiniciar en runtime utilizando la funci√≥n de sistema
"IniciarArchivaci√≥n".
Nota
Cuando se detiene la archivaci√≥n permanece establecida la conexi√≥n entre WinCC y los
archivos comprimidos o la base de datos de ficheros. Para deshacer esta conexi√≥n, utilice la
funci√≥n de sistema "CerrarTodosLosFicheros".

Utilizaci√≥n en la lista de funciones
PararArchivar (Tipo de fichero, Fichero)

Utilizaci√≥n en funciones definidas por el usuario
StopLogging Log_type, Log
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

1596

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Tipo de fichero
Determina el tipo de fichero:
0 (hmiTagArchive) = Fichero de variables
1 (hmiAlarmArchive) = Fichero de avisos
2 (hmiAudittrailArchive) = Audit Trail
Fichero
Nombre del fichero a detener.

Ejemplo de aplicaci√≥n
Desea cambiar en runtime el soporte de datos en el que se archivan los valores de proceso.
Indicaciones relativas a la configuraci√≥n
Configure las funciones de sistema "PararArchivaci√≥n" y "CerrarTodosLosFicheros" y
as√≥cielas al bot√≥n "Close Archive".
Configure las funciones de sistema "AbrirTodosLosFicheros" e "IniciarArchivaci√≥n" y as√≥cielas
al bot√≥n "Open Archive".
Transfiera como par√°metro el nombre del fichero que se debe parar o iniciar, respectivamente.
Proceso en el panel de operador
Cuando pulse el bot√≥n "Close Archive" se parar√° el fichero indicado y se cerrar√°n todos los
ficheros abiertos. A continuaci√≥n podr√° cambiar el soporte de datos. Si pulsa el bot√≥n "Open
Archive" se abrir√°n de nuevo todos los ficheros, pudiendo continuar con la archivaci√≥n en el
fichero indicado.

Administraci√≥n de usuarios
CerrarSesi√≥n
Descripci√≥n
Cierra la sesi√≥n del usuario actual en el panel de operador.

Utilizaci√≥n en la lista de funciones
CerrarSesi√≥n

Utilizaci√≥n en funciones definidas por el usuario
Logoff
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del dispositivo".
Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1597

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
--

IniciarSesi√≥n
Descripci√≥n
Inicia la sesi√≥n del usuario actual en el panel de operador.

Utilizaci√≥n en la lista de funciones
IniciarSesi√≥n (contrase√±a, nombre de usuario)

Utilizaci√≥n en funciones definidas por el usuario
Logon Password, User_name
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Contrase√±a
La variable de la cual se lee la contrase√±a del usuario que va a iniciar la sesi√≥n. Si el usuario
ha iniciado la sesi√≥n, se borra la contrase√±a de la variable.
Nombre de usuario
La variable de la cual se lee el Nombre de usuario que va a iniciar la sesi√≥n.

ExportarImportarAdministraci√≥nDeUsuarios
Descripci√≥n
Exporta todos los usuarios de la administraci√≥n de usuarios del proyecto activo en este
momento al archivo indicado, o bien importa los usuarios del archivo indicado al proyecto
activo en este momento.
En la administraci√≥n de usuarios se guardan usuarios, sus contrase√±as y permisos.
Durante la importaci√≥n se sobrescriben todos los usuarios. Los usuarios importados son
v√°lidos desde el primer momento.
Nota
En los paneles de operador con una versi√≥n de runtime anterior a V14 no se soporta la
exportaci√≥n e importaci√≥n de la administraci√≥n de usuarios de V14.

1598

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en la lista de funciones
ExportarImportarAdministraci√≥nDeUsuarios (Nombre de archivo, Direcci√≥n)

Utilizaci√≥n en funciones definidas por el usuario
ExportImportUserAdministration File_name, Direction
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Nombre de archivo
Nombre del archivo que contiene las contrase√±as o en el que se guardar√°n las contrase√±as.
Introduzca tambi√©n la ruta y la extensi√≥n del archivo (*.txt), p. ej. "C:\TEMP\Passwords.txt".
Nota
Si utiliza una tarjeta de memoria como ubicaci√≥n, introduzca la ubicaci√≥n del siguiente modo:
"\StorageCard\<Nombre de archivo>".
Direcci√≥n
Determina si las contrase√±as se exportar√°n o importar√°n:
0 (hmiExport) = Exportaci√≥n: Las contrase√±as se exportan.
1 (hmiImport) = Importaci√≥n: Las contrase√±as se importan.

Consulte tambi√©n
Exportar la administraci√≥n de usuarios (P√°gina 1401)
Importar administraci√≥n de usuarios (P√°gina 1402)

LeerNombreDeUsuario
Descripci√≥n
Escribe el nombre del usuario conectado actualmente al panel de operador en la variable
indicada.
Si la variable indicada contiene una conexi√≥n con el controlador, el nombre del usuario tambi√©n
estar√° disponible en el controlador. Con esta funci√≥n de sistema se pueden p. ej. liberar
determinadas funciones para usuarios espec√≠ficos.

Utilizaci√≥n en la lista de funciones
LeerNombreDeUsuario (Variable)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1599

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en funciones definidas por el usuario
GetUserName Tag
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Variable
Variable en la que se escribe el nombre del usuario.

LeerN√∫meroDeGrupo
Descripci√≥n
Lee el n√∫mero del grupo al que pertenece el usuario registrado en el panel de operador y lo
escribe en la variable indicada.

Utilizaci√≥n en la lista de funciones
LeerN√∫meroDeGrupo (Variable)

Utilizaci√≥n en funciones definidas por el usuario
GetGroupNumber Tag
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Variable
Variable en la que se escribe el n√∫mero del grupo.

LeerContrase√±a
Descripci√≥n
Lee la contrase√±a del usuario conectado al panel de operador y la escribe en la variable
indicada.
Nota
Aseg√∫rese de que el valor de la variable indicada no aparece en ning√∫n otro lugar del proyecto.

1600

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Nota
Las contrase√±as de usuarios de SIMATIC Logon no se pueden leer.
Nota
La funci√≥n de sistema "LeerContrase√±a" no est√° disponible para dispositivos con versi√≥n
14.0.0.0 o superior.
Si esta funci√≥n de sistema se hab√≠a utilizado en un proyecto con una versi√≥n anterior a V14, se
eliminar√° tras la migraci√≥n a V14. Esto invalidar√° el evento asociado a la funci√≥n de sistema.
En la configuraci√≥n, la funci√≥n de sistema "LeerContrase√±a" se muestra como err√≥nea. Al
compilar se emitir√° una advertencia. En el proyecto runtime compilado ya no est√° incluida la
funci√≥n de sistema "LeerContrase√±a".

Utilizaci√≥n en la lista de funciones
LeerContrase√±a (variable)

Utilizaci√≥n en funciones definidas por el usuario
GetPassword Tag
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Variable
Variable en la que se escribe la contrase√±a.

IdentificarCambioDeUsuario
Descripci√≥n
Visualiza un aviso de sistema que indica qu√© usuarios est√°n conectados al panel de operador.
Esta funci√≥n de sistema s√≥lo se puede utilizar en el planificador de tareas.

Utilizaci√≥n en la lista de funciones
IdentificarCambioDeUsuario

Utilizaci√≥n en scripts de usuario
-

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1601

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
--

MostrarDi√°logoInicioSesi√≥n
Descripci√≥n
Abre un cuadro de di√°logo en el panel de operador con el que el usuario puede iniciar una
sesi√≥n en el panel de operador.

Utilizaci√≥n en la lista de funciones
MostrarDi√°logoInicioSesi√≥n

Utilizaci√≥n en scripts de usuario
-

Par√°metros
--

C√°lculo
IncrementarVariable
Descripci√≥n
Suma el valor indicado al valor de la variable.
X=X+a
Nota
La funci√≥n de sistema utiliza la misma variable como valor de entrada y como valor de salida.
Si utiliza esta funci√≥n de sistema para convertir un valor, deber√° utilizar una variable auxiliar.
A la variable auxiliar se le puede asignar un valor con la funci√≥n de sistema "DefinirVariable".
Si asocia la funci√≥n de sistema a eventos de un aviso y la variable no se utiliza en la imagen
actual, no se garantiza que el valor real de la variable se utilice en el controlador. Ello se puede
mejorar activando el modo de adquisici√≥n "C√≠clico continuo".

Utilizaci√≥n en la lista de funciones
IncrementarVariable (Variable, Valor)

1602

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en funciones definidas por el usuario
IncreaseTag Tag, Value
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Variable
Variable a la que se debe agregar el valor indicado.
Valor
Valor que se suma.

Consulte tambi√©n
DefinirVariable (P√°gina 1606)

InvertirEscalaLineal
Descripci√≥n
Asigna a la variable X un valor que se calcula a partir del valor de la variable Y indicada
mediante la funci√≥n lineal X = (Y - b) / a.
Las variables X e Y no pueden ser id√©nticas. Esta funci√≥n de sistema es la funci√≥n inversa de
"EscalaLineal".
Nota
Las variables X e Y no pueden ser id√©nticas. Si desea convertir una variable en S√≠ misma, debe
utilizar una variable auxiliar
Con la funci√≥n de sistema "DefinirVariable" se puede asignar a la variable auxiliar el valor de
la variable que se va convertir.

Utilizaci√≥n en la lista de funciones
InvertirEscalaLineal (X, Y, b, a)

Utilizaci√≥n en funciones definidas por el usuario
InverseLinearScaling X, Y, b, a
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1603

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
X
Variable a la que se asigna el valor calculado en la ecuaci√≥n lineal.
Y
Variable cuyo valor se utiliza para el c√°lculo.
b
Valor que se va a restar.
a
Valor por el que se divide.

Ejemplo
El siguiente c√≥digo de programa asigna un valor a la variable varX con la funci√≥n
InverseLinearScaling.

{
BYTE
BYTE
BYTE
BYTE

varX;
Yvalue = 10;
bvalue = 3;
avalue = 4;

//Inverse linear scaling
InverseLinearScaling (varX, Yvalue, bvalue, avalue);
printf ("varX = %d\r\n, varX);
...
}

El valor de retorno guardado puede procesarse en el c√≥digo subsiguiente.

EscalaLineal
Descripci√≥n
Asigna a la variable Y un valor que se calcula a partir del valor de las variables X indicadas
mediante la funci√≥n lineal Y = (a * X) + b.

1604

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
La funci√≥n inversa es la funci√≥n de sistema "InvertirEscalaLineal".
Nota
Las variables X e Y no pueden ser id√©nticas. Si desea convertir una variable en S√≠ misma, debe
utilizar una variable auxiliar
Con la funci√≥n de sistema "DefinirVariable" se puede asignar a la variable auxiliar el valor de
la variable que se va convertir.

Utilizaci√≥n en la lista de funciones
EscalaLineal (Y, a, X, b)

Utilizaci√≥n en funciones definidas por el usuario
LinearScaling Y, a, X, b
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Y
Variable a la que se asigna el valor calculado en la ecuaci√≥n lineal.
a
Valor con el que se multiplica.
X
Variable cuyo valor se utiliza para el c√°lculo.
b
Valor que se suma.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1605

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente c√≥digo de programa asigna con la funci√≥n LinearScaling un valor a la variable Yvar.

{
BYTE
BYTE
BYTE
BYTE

Yvar;
Xvalue = 10;
bvalue = 3;
avalue = 4;

// linear scaling
LinearScaling ( Yvar, avalue, Xvalue, bvalue);
printf ("Yvar = %d\r\n, Yvar);
...
}

El valor de retorno guardado puede procesarse en el c√≥digo subsiguiente.

DefinirVariable
Descripci√≥n
Asigna un valor nuevo a la variable indicada.
Nota
Dependiendo del tipo de variable, con esta funci√≥n de sistema puede asignar cadenas de
caracteres y n√∫meros.

Utilizaci√≥n en la lista de funciones
DefinirVariable (Variable, Valor)

Utilizaci√≥n en funciones definidas por el usuario
SetTag Tag, Value
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Variable
Variable a la que se debe asignar el valor indicado.

1606

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Valor
Valor que se asigna a la variable indicada.
Nota
La funci√≥n de sistema "DefinirVariable" se ejecuta √∫nicamente tras establecer una conexi√≥n.

Ejemplo
El siguiente c√≥digo de programa ajusta con la funci√≥n SetTag el valor de las variables
gs_tag_bit a TRUE y guarda el valor de retorno en la variable ok.

{
BOOL ok;
BOOL bvalue;
//Set the tag to true
ok = SetTag("gs_tag_bit", TRUE);
//error handling
if(ok)
{
// succeeded
printf ( "Function has run through.\r\n" );
bvalue = GetTagBit("gs_tag_bit");
printf ("Value of gs_tag_bit: %d\r\n", bvalue);
}
else
{
// failed
printf ( "Error - function failed." );
}
...
}

El valor de retorno guardado puede procesarse en el c√≥digo subsiguiente.

DecrementarVariable
Descripci√≥n
Resta el valor indicado del valor de la variable.
X=X-a
Nota
La funci√≥n de sistema utiliza la misma variable como valor de entrada y como valor de salida.
Si utiliza esta funci√≥n de sistema para convertir un valor, deber√° utilizar una variable auxiliar.
A la variable auxiliar se le asigna un valor con la funci√≥n de sistema "DefinirVariable".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1607

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Si asocia la funci√≥n de sistema a eventos de un aviso y la variable no se utiliza en la imagen
actual, no se garantiza que el valor real de la variable se utilice en el controlador. Ello se puede
mejorar activando el modo de adquisici√≥n "C√≠clico continuo".

Utilizaci√≥n en la lista de funciones
DecrementarVariable (Variable, Valor)

Utilizaci√≥n en funciones definidas por el usuario
DecreaseTag Tag, Value
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Variable
Variable de la que se debe restar el valor indicado.
Valor
Valor que se va a restar.

Procesamiento por bits
InvertirBit
Descripci√≥n
Invierte el valor de la variable indicada del tipo "Bool".
‚óè Si la variable tiene el valor 1 (TRUE), se ajusta a 0 (FALSE).
‚óè Si la variable tiene el valor 0 (FALSE), se ajusta a 1 (TRUE).

Utilizaci√≥n en la lista de funciones
InvertirBit (Variable)

Utilizaci√≥n en funciones definidas por el usuario
InvertBit Tag
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

1608

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Variable
Variable cuyo bit se debe ajustar.

Ejemplo
El siguiente c√≥digo de programa invierte el valor de la variable booleana bStatus y muestra el
resultado junto con el valor original bSaved.

'Programming language: VB
Dim myTag
Dim myOutputField
Dim bValue, bSaved, strResult
Set myTag = SmartTags("bStatus")
Set myOutputField=HMIRuntime.Screens("MyScreen").ScreenItems("objTextField")
'Get current value
bValue=myTag.Value
'Save current value
bSaved=bValue
'Invert Bit
InvertBit myTag
bValue=myTag.Value
'Output result old and new value:
strResult="Old Value: "&bSaved &Chr(13)&"New Value: "&bValue
myOutputField.Text=strResult

//Programming language: C
{
BOOL bStatus = 0;
BOOL bSaved = bStatus;
//Invert variable
invertBit(bStatus);
//print current and saved value
printf ("Current value: %d\r\n, Saved value: %d\r\n",bStatus, bSaved);
...
}

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1609

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

InvertirBitEnVariable
Descripci√≥n
Invierte un bit en la variable indicada:
‚óè Si el bit de la variable tiene el valor 1 (TRUE), se ajusta a 0 (FALSE).
‚óè Si el bit de la variable tiene el valor 0 (FALSE), se ajusta a 1 (TRUE).
Tras modificar el bit indicado, la funci√≥n de sistema vuelve a transferir toda la variable al
controlador. No se comprueba si entretanto se han modificado otros bits en la variable. El
operador y el controlador s√≥lo podr√°n acceder a la variable indicada en modo de lectura hasta
que la variable vuelva a transferirse al controlador.
Nota
No utilice esta funci√≥n de sistema si el controlador admite variables BOOL. En su lugar utilice
la funci√≥n de sistema "InvertirBit".

Utilizaci√≥n en la lista de funciones
InvertirBitEnVariable (Variable, Bit)

Utilizaci√≥n en funciones definidas por el usuario
InvertBitInTag Tag, Bit
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Variable
Variable en la que se debe ajustar el bit indicado.
Bit
N√∫mero del bit a ajustar.
Si utiliza esta funci√≥n de sistema en un script de usuario, los bits de una variable se cuentan
de derecha a izquierda. El contaje comienza a partir de "0".

1610

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente c√≥digo de programa invierte un bit en la posici√≥n indicada bitposition de la variable
bStatusWord y muestra el resultado junto con el valor original bSaved.

'Programming language: VB
Dim myTag
Dim myOutputField
Dim bValue, bSaved, bitposition, strResult
Set myTag = SmartTags("bStatusWord")
Set myOutputField=HMIRuntime.Screens("MyScreen").ScreenItems("objTextField")
'Get current value
bValue=myTag.Value
'Save current value
bSaved=bValue
'Invert Bit in position
bitposition=2
InvertBit myTag, bitposition
bValue=myTag.Value
'Output result old and new value:
strResult="Old Value: "&bSaved &Chr(13)&"New Value: "&bValue
myOutputField.Text=strResult

//Programming language: C
{
BYTE bStatusWord;
BYTE bsaved = bStatusWord;
BYTE bitposition = 2;
//Invert bit in bitposition
InvertBitInTag (bStatusWord, bitposition);
//print current and saved value
printf ("Current value: %d\r\n, Saved value: %d\r\n",bStatusWord, bsaved);
...
}

DesactivarBit
Descripci√≥n
Pone a 0 (FALSE) el valor de una variable del tipo "Bool".

Utilizaci√≥n en la lista de funciones
DesactivarBit (Variable)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1611

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en funciones definidas por el usuario
ResetBit Tag
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Variable
Variable del tipo BOOL que se ajusta a "0" (FALSE).

Ejemplo
El siguiente c√≥digo de programa pone a 0 el valor de la variable booleana bStatus con la
funci√≥n ResetBit y muestra el resultado junto con el valor original bSaved.

'Programming language: VB
Dim myTag
Dim myOutputField
Dim bValue, bSaved, strResult
Set myTag = SmartTags("bStatus")
Set myOutputField=HMIRuntime.Screens("MyScreen").ScreenItems("objTextField")
'Set value
bValue=1
myTag.Value=bValue
'Save current value
bSaved=bValue
'Reset Bit
ResetBit myTag
bValue=myTag.Value
'Output result old and new value:
strResult="Old Value: "&bSaved &Chr(13)&"New Value: "&bValue
myOutputField.Text=strResult

1612

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

//Programming language: C
{
BOOL bStatus = 1;
BOOL bSaved = bStatus;
//Reset bit
ResetBit (bStatus);
//print current and saved value
printf ("Current value: %d\r\n, Saved value: %d\r\n",bStatus, bSaved);
...
}

Consulte tambi√©n
DesactivarBitEnVariable (P√°gina 1613)

DesactivarBitEnVariable
Descripci√≥n
Pone un bit a 0 (FALSE) en las variables indicadas.
Tras modificar el bit indicado, la funci√≥n de sistema vuelve a transferir toda la variable al
controlador. No se comprueba si entretanto se han modificado otros bits en la variable. El
operador y el controlador s√≥lo podr√°n acceder a la variable indicada en modo de lectura hasta
que la variable vuelva a transferirse al controlador.
Nota
No utilice esta funci√≥n de sistema si el controlador admite variables BOOL. En su lugar utilice
la funci√≥n de sistema "DesactivarBit".

Utilizaci√≥n en la lista de funciones
DesactivarBitEnVariable (Variable, Bit)

Utilizaci√≥n en funciones definidas por el usuario
ResetBitInTag Tag, Bit
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1613

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Variable
Variable en la que un bit se ajusta a "0" (FALSE).
Bit
N√∫mero del bit que se ajusta a "0" (FALSE).
Si utiliza esta funci√≥n de sistema en un script de usuario, los bits de la variable indicada se
contar√°n de derecha a izquierda, independientemente del controlador utilizado. El contaje
comienza a partir de "0".

Ejemplo
El siguiente c√≥digo de programa pone a 0 un bit en la posici√≥n indicada bitposition de la
variable bStatusWord y muestra el resultado junto con el valor original bSaved.

'Programming language: VB
Dim myTag
Dim myOutputField
Dim bValue, bSaved, bitposition, strResult
Set myTag = SmartTags("bStatusWord")
Set myOutputField=HMIRuntime.Screens("MyScreen").ScreenItems("objTextField")
'Save current value
bValue=myTag.Value
bSaved=bValue
'Reset Bit
bitposition=2
ResetBitInTag myTag, bitposition
bValue=myTag.Value
'Output result old and new value:
strResult="Old Value: "&bSaved &Chr(13)&"New Value: "&bValue
myOutputField.Text=strResult

1614

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

//Programming language: C
{
BYTE bSaved;
BYTE bitposition = 2;
bSaved = GetTagByte("bStatusWord");
//Reset bit in bitposition
ResetBitInTag ("bStatusWord", bitposition);
//print current and saved value
printf ("Current value: %d\r\n, Saved value: %d\r\n",GetTagByte("bStatusWord"), bSaved);
...
}

Consulte tambi√©n
DesactivarBit (P√°gina 1611)

DesplazarYEnmascarar
Descripci√≥n
La funci√≥n de sistema convierte la configuraci√≥n binaria de entrada de la variable de origen en
una configuraci√≥n binaria de salida de la variable de destino. Durante este proceso se
desplazan y se enmascaran bits.
Nota
Si las variables de origen y destino tienen un n√∫mero de bits diferente, la aplicaci√≥n de la
funci√≥n de sistema en la variable de destino no puede causar un rebase del rango de valores.

Utilizaci√≥n en la lista de funciones
DesplazarYEnmascarar (Variable de origen, Variable de destino, Bits a desplazar, Bits a
enmascarar)

Utilizaci√≥n en funciones definidas por el usuario
ShiftAndMask Source_tag, Target_tag, Bits_to_shift, Bits_to_mask
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1615

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Variable de origen
La variable contiene la configuraci√≥n binaria de entrada. Se admiten variables de n√∫meros
enteros, p. ej. "Byte", "Char", "Int", "UInt", "Long" y "ULong".
Ejemplo: La variable de origen del tipo "16 Bit Integer" tiene el valor 72: 0000000001001000.
Variable de destino
En la variable se guarda la configuraci√≥n binaria de salida. Se admiten variables de tipo entero,
p. ej. "Byte", "Char", "Int", "UInt", "Long" y "ULong".
Ejemplo: La configuraci√≥n binaria de entrada desplazada se multiplica con la m√°scara de bits,
bit por bit con la operaci√≥n l√≥gica Y: 0000000000001001. El resultado tiene el valor decimal "8"
y se guarda en la variable de destino.
Tenga en cuenta lo siguiente:
‚óè Las variables de origen y destino tienen el mismo n√∫mero de bits.
‚óè La cantidad de bits a desplazar es menor que la cantidad de bits de las variables de origen
y de destino.
‚óè "Bits a enmascarar" no contiene m√°s bits que las variables de origen y destino.
Bits a desplazar
Cantidad de bits seg√∫n la que se debe desplazar hacia la derecha la configuraci√≥n binaria de
entrada. Un valor negativo desplaza la configuraci√≥n binaria de entrada hacia la izquierda.
Ejemplo: "Bits a desplazar" tiene el valor "+3". Al llamar la funci√≥n de sistema, la configuraci√≥n
binaria de entrada se desplaza 3 bits hacia la derecha: 0000000000001001.
El lado izquierdo se rellena con "0". En el lado derecho se truncan 3 bits. El nuevo valor decimal
es "9".
Nota
Si la variable de origen tiene un tipo de datos Integer con el signo "-", el bit izquierdo ser√° "1".
Al desplazar hacia la derecha, este bit de signo se rellena con "0". El signo se conmuta a "+".
Bits a enmascarar
Un n√∫mero del tipo Integer sirve de m√°scara de bits Con su configuraci√≥n binaria se multiplica
la configuraci√≥n binaria de entrada desplazada. Ejemplo: n√∫mero "2478" con la configuraci√≥n
binaria "0000100110101110".

1616

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
La m√°scara de bits se puede indicar de 3 maneras distintas:
‚óè Hexadecimal: Introduzca primero "0h" o "0H" como prefijo, seguido de un espacio en blanco
opcional para una mejor legibilidad. Seguidamente agrupe la configuraci√≥n binaria en
bloques de cuatro bits (0000)(1001)(1010)(1110) y represente cada bloque en el sistema
hexadecimal. (0)(9)(A)(E). S√≥lo se admite la entrada de los caracteres 0-9, A-F, a-f: "0h
09AE".
‚óè Binario: Introduzca primero "0b" o "0B" como prefijo, seguido de un espacio en blanco
opcional para una mejor legibilidad. Para comprobarlo, agrupe despu√©s la configuraci√≥n
binaria en bloques 0000 1001 1010 1110 separados por espacios en blanco. S√≥lo se admite
la entrada de los caracteres "0" √≥ "1": "0b 0000 1001 1010 1110".
‚óè Decimal: Introduzca directamente el valor "2478" sin prefijo.
Nota
Si cambia la versi√≥n del panel de operador de destino despu√©s de la configuraci√≥n (p. ej., de
"13.1.0" a "13.0.0" o a la inversa), deber√° comprobar los par√°metros de esta funci√≥n de
sistema.
Los tipos de datos "Char" y "Word" pueden utilizarse para los par√°metros "Variable de origen"
y "Variable de destino" a partir de la versi√≥n de panel 13.1.0. En las versiones de panel
anteriores a la 13.1.0, estos par√°metros deben asignarse a otros tipos de datos:
‚óè En lugar de "Char", debe utilizarse "SInt"
‚óè En lugar de "Word", debe utilizarse "Int"
De lo contrario pueden producirse efectos indeseados, p. ej., comportamiento err√≥neo o
inesperado de las funciones de sistema configuradas.

ActivarBit
Descripci√≥n
Ajusta a "1" (TRUE) el valor de una variable del tipo "Bool".

Utilizaci√≥n en la lista de funciones
ActivarBit (Variable)

Utilizaci√≥n en funciones definidas por el usuario
SetBit Tag
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1617

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Variable
Variable del tipo BOOL que se ajusta a "1" (TRUE).

Ejemplo
El siguiente c√≥digo de programa pone a 1 el valor de la variable booleana bStatus con la
funci√≥n SetBit y muestra el resultado junto con el valor original bSaved.

'Programming language: VB
Dim myTag
Dim myOutputField
Dim bValue, bSaved, strResult
Set myTag = SmartTags("bStatus")
Set myOutputField=HMIRuntime.Screens("MyScreen").ScreenItems("objTextField")
'Set value
bValue=0
myTag.Value=bValue
'Save current value
bSaved=bValue
'Set Bit
SetBit myTag
bValue=myTag.Value
'Output result old and new value:
strResult="Old Value: "&bSaved &Chr(13)&"New Value: "&bValue
myOutputField.Text=strResult

//Programming language: C
{
BOOL bStatus = 0;
BOOL bSaved = bStatus;
//Set bit
SetBit (bStatus);
//print current and saved value
printf ("Current value: %d\r\n, Saved value: %d\r\n",bStatus, bSaved);
...
}

1618

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

ActivarBitDeVariable
Descripci√≥n
Ajusta un bit a "1" (TRUE) en la variable indicada.
Tras modificar el bit indicado, la funci√≥n de sistema vuelve a transferir toda la variable al
controlador. No se comprueba si entretanto se han modificado otros bits en la variable. El
operador y el controlador s√≥lo podr√°n acceder a la variable indicada en modo de lectura hasta
que la variable vuelva a transferirse al controlador.
Nota
No utilice esta funci√≥n de sistema si el controlador admite variables BOOL. En su lugar utilice
la funci√≥n de sistema "ActivarBit".

Utilizaci√≥n en la lista de funciones
ActivarBitDeVariable (Variable, Bit)

Utilizaci√≥n en funciones definidas por el usuario
SetBitInTag Tag, Bit
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Variable
Variable en la que un bit se ajusta a "1" (TRUE).
Bit
N√∫mero del bit que se ajusta a "1" (TRUE).
Si utiliza esta funci√≥n de sistema en un script de usuario, los bits de la variable indicada se
contar√°n de derecha a izquierda, independientemente del controlador utilizado. El contaje
comienza a partir de "0".
Nota
Para garantizar una funcionalidad fiable es imprescindible una actualizaci√≥n garantizada de
las variables utilizadas con los valores de proceso actuales. Por tanto, configure la variable en
un campo E/S, o bien asocie la funci√≥n de sistema a un objeto de imagen (p. ej. un bot√≥n).
Si asocia la funci√≥n de sistema a un evento breve (p. ej. aparici√≥n de un mensaje), los valores
de proceso actuales s√≥lo se alcanzar√°n si la variable puede leerse de forma permanente.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1619

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente c√≥digo de programa pone a 1 un bit en la posici√≥n indicada bitposition de la
variable bStatusWord y muestra el resultado junto con el valor original bSaved.

'Programming language: VB
Dim myTag
Dim myOutputField
Dim bValue, bSaved, bitposition, strResult
Set myTag = SmartTags("bStatusWord")
Set myOutputField=HMIRuntime.Screens("MyScreen").ScreenItems("objTextField")
'Save current value
bValue=myTag.Value
bSaved=bValue
'Set Bit in tag
bitposition=1
SetBitInTag "bStatusWord", bitposition
bValue=myTag.Value
'Output result old and new value:
strResult="Old Value: "& bSaved & "New Value: " & bValue
myOutputField.Text=strResult

//Programming language: C
{
BYTE bSaved;
BYTE bitposition = 1;
bSaved = GetTagByte("bStatusWord");
//Reset bit in bitposition
SetBitInTag ("bStatusWord", bitposition);
//print current and saved value
printf ("Current value: %d\r\n, Saved value: %d\r\n",GetTagByte("bStatusWord"), bSaved);
}

Consulte tambi√©n
ActivarBit (P√°gina 1617)

1620

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

ActivarBitMientrasTeclaPulsada
Descripci√≥n
Ajusta un bit a "1" (TRUE) en la variable indicada mientras el usuario mantiene pulsada la tecla
configurada.
Tras modificar el bit indicado, la funci√≥n de sistema vuelve a transferir toda la variable al
controlador. No se comprueba si entretanto se han modificado otros bits en la variable. El
operador y el controlador s√≥lo podr√°n acceder a la variable indicada en modo de lectura hasta
que la variable vuelva a transferirse al controlador. Para evitar problemas debidos a accesos
simult√°neos a una misma variable, es recomendable que utilice esta funci√≥n de sistema s√≥lo
para acceder a variables del tipo BOOL.
Nota
Con el cambio de imagen configurado para una tecla se ejecutan inmediatamente todas las
funciones configuradas para el evento "Soltar", aunque la tecla todav√≠a est√© pulsada.
Si para una tecla de funci√≥n est√° configurada la funci√≥n de sistema
"ActivarBitMientrasTeclaPulsada", el bit se desactivar√° inmediatamente tras ejecutar el
cambio de imagen. Este comportamiento es necesario, puesto que la asignaci√≥n de las teclas
ser√° diferente tras el cambio de imagen.
No utilice esta funci√≥n de sistema si el controlador admite variables BOOL. En su lugar utilice
la funci√≥n de sistema "ActivarBit".

Utilizaci√≥n en la lista de funciones
ActivarBitMientrasTeclaPulsada (Variable, Bit)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Variable
Variable en la que un bit se ajusta temporalmente a "1" (TRUE). Si el controlador lo permite,
utilice s√≥lo variables del tipo BOOL.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1621

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Bit
N√∫mero del bit que se ajusta temporalmente a "1" (TRUE).
Nota
Para garantizar una funcionalidad fiable es imprescindible una actualizaci√≥n garantizada de
las variables utilizadas con los valores de proceso actuales. Por tanto, configure la variable en
un campo ES, o bien asocie la funci√≥n a un elemento de imagen (p. ej. un bot√≥n).
Si asocia la funci√≥n a un evento breve (p. ej. aparici√≥n de un mensaje), los valores de proceso
actuales s√≥lo se alcanzar√°n si la variable puede leerse de forma permanente.

Consulte tambi√©n
ActivarBit (P√°gina 1617)

Imprimir
ImprimirImagen
Descripci√≥n
Imprime la imagen visualizada actualmente en el panel de operador en la impresora conectada
a √©ste √∫ltimo.
Las ventanas abiertas tambi√©n se imprimen.
Nota
Los ajustes de la impresora se adoptan de los ajustes actuales del sistema operativo Windows.

Utilizaci√≥n en la lista de funciones
ImprimirImagen

Utilizaci√≥n en funciones definidas por el usuario
PrintScreen
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del dispositivo".

Par√°metros
--

1622

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

ImprimirInforme
Descripci√≥n
Imprime el informe indicado en la impresora conectada al panel de operador. El informe se
imprime en el idioma ajustado en el panel de operador.
Nota
Si runtime se cierra mientras se est√°n imprimiendo datos de fichero con la ayuda de la funci√≥n
del sistema, entonces el protocolo no recibe m√°s datos a partir del momento en que se finaliza
runtime.

Utilizaci√≥n en la lista de funciones
ImprimirInforme (Informe)

Utilizaci√≥n en funciones definidas por el usuario
PrintReport Report
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Informe
Nombre del informe a imprimir.
Nota
Si crea un nuevo informe para la funci√≥n "ImprimirInforme" en el cuadro de di√°logo "Lista de
funciones", aparecer√° la siguiente advertencia durante la compilaci√≥n: "El informe "Informe_1"
no contiene p√°ginas de impresi√≥n."
Para eliminar la advertencia, abra el "Informe_1" en la ventana del proyecto y vuelva a compilar
el proyecto.

ActivarModoDeInformeAviso
Descripci√≥n
Activa o desactiva la generaci√≥n autom√°tica de informes para avisos en la impresora.

Utilizaci√≥n en la lista de funciones
ActivarModoDeInformeAviso (Modo)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1623

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en funciones definidas por el usuario
SetAlarmReportMode Mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Modo
Determina si los avisos se deben imprimir autom√°ticamente en la impresora:
0 (hmiDisablePrinting) = Inhibir impresi√≥n: Los informes no se imprimen autom√°ticamente.
1 (hmiEnablePrinting) = Habilitar impresi√≥n: Los informes se imprimen autom√°ticamente.
-1 (hmiToggle) = Conmutar: Conmuta entre ambos estados.

Configuraci√≥n
LeerModoPLC
Descripci√≥n
Eval√∫a el estado actual del controlador conectado.
La funci√≥n de sistema "LeerModoPLC" solo se puede configurar para los siguientes
controladores:
‚óè SIMATIC S7-1200
‚óè SIMATIC S7-1500

Utilizaci√≥n en la lista de funciones
LeerModoPLC (conexi√≥n, modo)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Conexi√≥n
Conexi√≥n entre controlador y panel de operador.

1624

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Modo
Eval√∫a el estado del controlador conectado. Seleccione una variable de usuario adecuada
para la evaluaci√≥n.
4

STOP

En estado operativo "STOP" no se procesa el programa de usuario.

6

ARRANQUE

La CPU est√° en el estado operativo "Arranque", p. ej., tras un rearranque.

8

RUN

En estado operativo "RUN" se procesa el programa c√≠clico, controlado por
tiempo y por alarmas.

9

RUN-Redun‚Äê
dant

En el estado operativo "RUN-Redundant", ambas CPU procesan s√≠ncro‚Äê
namente el programa de usuario.

10

PARADA

El estado operativo "PARADA" se alcanza con un punto de parada (break
point) en un bloque que se prueba paso a paso en modo de etapa indivi‚Äê
dual.

13

DEFECTUOSO Se ha producido un error interno. Si el estado "DEFECTUOSO" es provo‚Äê
cado por un error de firmware, se se√±alizar√° con los LED de estado de la
CPU.

15

Sin tensi√≥n

La tensi√≥n de red est√° desconectada.

ConfigurarModoDeVisualizaci√≥n
Descripci√≥n
Cambia la configuraci√≥n de la ventana en la que se ejecuta el software runtime.
Por defecto, el software runtime se ejecuta en modo de pantalla completa. La posibilidad de
conmutar entre las aplicaciones de Windows est√° desactivada.

Utilizaci√≥n en la lista de funciones
ConfigurarModoDeVisualizaci√≥n (Modo de visualizaci√≥n)

Utilizaci√≥n en funciones definidas por el usuario
SetDisplayMode Display_mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Representaci√≥n
Determina la configuraci√≥n de la ventana en la que se ejecuta el software runtime.
1 (hmiScreenFull): Pantalla completa: La barra de t√≠tulo de la ventana no se visualiza.
2 (hmiScreenMaximized): Maximizado
3 (hmiScreenRestore): Restaurar: Se utiliza la configuraci√≥n de ventana que se ha utilizado de
√∫ltimo. Este modo de visualizaci√≥n s√≥lo se puede utilizar si la ventana aparece minimizada o
maximizada.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1625

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
4 (hmiScreenMinimized): Minimizado
5 (hmiScreenAutoAdjust): Autom√°tico: El tama√±o de la ventana se ajusta de manera que se
visualicen todos los objetos de imagen que contiene.
6 (hmiScreenOnTop): Primer plano; en funci√≥n de la configuraci√≥n de Windows aparecer√° la
ventana en primer plano o bien el s√≠mbolo del programa en cuesti√≥n parpadear√° en la barra de
tareas. La configuraci√≥n puede modificarse en Windows y es v√°lida para todas las aplicaciones
de Windows.

EstablecerModoDeOperaci√≥nPanel
Descripci√≥n
Cambia el modo de operaci√≥n en el panel de operador. Se dispone de los modos de operaci√≥n
siguientes: "Online", "Offline" y "Cargar".

Utilizaci√≥n en la lista de funciones
EstablecerModoDeOperaci√≥nPanel (Modo de operaci√≥n)

Utilizaci√≥n en funciones definidas por el usuario
SetDeviceMode Operating_mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Modo de operaci√≥n
Determina el modo de operaci√≥n del panel de operador. En equipos con Windows CE no se
puede asignar un valor a este par√°metro por medio de una variable del tipo de datos BOOL.
0 (hmiOnline) = Online: Se establece la conexi√≥n con el controlador. Al hacerlo, siempre se
ajusta el estado de conexi√≥n configurado. No se tienen en cuenta los estados que se utilizaron
por √∫ltima vez en runtime.
1 (hmiOffline) = Offline: Se deshace la conexi√≥n con el controlador.
2 (hmiTransfer) = cargar: Permite transferir proyectos desde el equipo de configuraci√≥n al
panel de operador.
Nota
Si utiliza un PC como panel de operador, al conmutar al modo de operaci√≥n "Cargar" se cierra
el software runtime.

1626

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Consulte tambi√©n
EstablecerModoDeConexi√≥n (P√°gina 1630)

EstablecerModoTecladoDePantalla
Descripci√≥n
Activa o desactiva la visualizaci√≥n autom√°tica del teclado de la pantalla en el panel de
operador.
Utilice esta funci√≥n de sistema si desea impedir que aparezca el teclado de pantalla por
ejemplo porque dispone de un teclado externo conectado al panel de operador.
Nota
Si utiliza la funci√≥n de sistema "EstablecerModoTecladoDePantalla"
("SetScreenKeyboardMode") en un panel de operador que carezca de pantalla t√°ctil, en la
configuraci√≥n del panel deber√° activar la opci√≥n "Utilizar teclado pantalla" en el √°rea
"Configuraci√≥n de runtime".

Utilizaci√≥n en la lista de funciones
EstablecerModoTecladoDePantalla (Modo)

Utilizaci√≥n en funciones definidas por el usuario
SetScreenKeyboardMode Mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Modo
Determina si el teclado de la pantalla se debe mostrar u ocultar.
0 (hmiOff) = Off: Ocultar el teclado de la pantalla
1 (hmiOn) = On: Mostrar el teclado de la pantalla
-1 (hmiToggle) = Conmutar: Conmuta entre ambos estados.

AjustarFechaHoraPLC
Descripci√≥n
Modifica la fecha y la hora del controlador conectado.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1627

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
La funci√≥n de sistema "AjustarFechaHoraPLC" solo se puede configurar para los siguientes
controladores:
‚óè SIMATIC S7-1200
‚óè SIMATIC S7-1500

Utilizaci√≥n en la lista de funciones
AjustarFechaHoraPLC (conexi√≥n, tiempo)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Conexi√≥n
Conexi√≥n de controlador y panel de operador.
Tiempo
Transfiere la fecha y la hora del panel de operador al controlador. El controlador aplica la fecha
y la hora del panel de operador.

DefinirModoPLC
Descripci√≥n
La funci√≥n de sistema "DefinirModoPLC" solo se puede configurar para los siguientes
controladores:
‚óè SIMATIC S7-1200
‚óè SIMATIC S7-1500

Utilizaci√≥n en la lista de funciones
DefinirModoPLC (conexi√≥n, modo)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Conexi√≥n
Conexi√≥n entre controlador y panel de operador.

1628

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Modo
Determina el modo de operaci√≥n del panel de operador:
4

STOP

En estado operativo "STOP" no se procesa el programa de usuario.

6

ARRANQUE

La CPU est√° en el estado operativo "Arranque", p. ej., tras un rearranque.

8

RUN

En estado operativo "RUN" se procesa el programa c√≠clico, controlado por
tiempo y por alarmas.

9

RUN-Redun‚Äê
dant

En el estado operativo "RUN-Redundant", ambas CPU procesan s√≠ncro‚Äê
namente el programa de usuario.

10

PARADA

El estado operativo "PARADA" se alcanza con un punto de parada (break
point) en un bloque que se prueba paso a paso en modo de etapa indivi‚Äê
dual.

13

DEFECTUOSO Se ha producido un error interno. Si el estado "DEFECTUOSO" es provo‚Äê
cado por un error de firmware, se se√±alizar√° con los LED de estado de la
CPU.

15

Sin tensi√≥n

La tensi√≥n de red est√° desconectada.

Consulte tambi√©n
VisorDiagn√≥sticoSistemaActualizarB√∫ferPLC (P√°gina 1669)

EstablecerIdioma
Descripci√≥n
Cambia el idioma del panel de operador. Todos los textos y avisos del sistema configurados
aparecer√°n en el panel de operador en el idioma reci√©n ajustado.

Utilizaci√≥n en la lista de funciones
EstablecerIdioma (Idioma)

Utilizaci√≥n en funciones definidas por el usuario
SetLanguage Language
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1629

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Idioma
Determina qu√© idioma se debe ajustar en el panel de operador. Se pueden realizar los
siguientes ajustes:
‚óè -1 (hmiToggle) = Conmutar: Cambia al siguiente idioma. El orden se establece en el editor
"Idiomas del proyecto" durante el proceso de configuraci√≥n.
‚óè N√∫mero que se ha especificado en "Idioma y fuente" en el editor "Configuraci√≥n de
runtime". Cambia al idioma con el n√∫mero indicado.
‚óè Idioma que se ha especificado en "Idioma y fuente" en el editor "Configuraci√≥n de runtime".
‚óè Abreviatura del idioma conforme a la referencia VBScript5: Cambia al idioma
correspondiente a la abreviatura indicada, p. ej. "de-DE" para alem√°n (Alemania) o "en-US"
para ingl√©s (EE.UU.).
En el tema "Cuadro de Id. de configuraci√≥n regional (LCID)" que forma parte de los
principios b√°sicos de VBScript encontrar√° una lista de todas las abreviaturas de idioma.

EstablecerModoDeConexi√≥n
Descripci√≥n
Establece o desconecta la conexi√≥n indicada.
Nota
Solo puede establecerse una conexi√≥n con el controlador si el panel de operador funciona en
modo "online". Utilice para ello la funci√≥n de sistema "EstablecerModoDeOperaci√≥nPanel".
Si la conexi√≥n se ha cargado en el modo "offline", cada vez que se cambie el modo de
operaci√≥n "offline" se deshar√° la conexi√≥n. Para restablecer la conexi√≥n despu√©s de volver a
cambiar el modo de operaci√≥n "online", pase de nuevo la conexi√≥n al modo "online".

Utilizaci√≥n en la lista de funciones
EstablecerModoDeConexi√≥n (Modo, Conexi√≥n)

Utilizaci√≥n en funciones definidas por el usuario
SetConnectionMode Mode, Connection
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

1630

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Modo
Determina si la conexi√≥n con el controlador se debe establecer o desconectar. En equipos con
Windows CE y en Runtime Advanced no es posible asignar un valor a este par√°metro con una
variable del tipo de datos BOOL.
0 (hmiOnline) = Online: Se establece la conexi√≥n.
1 (hmiOffline) = Offline: Se deshace la conexi√≥n.
Conexi√≥n
Controlador que se debe conectar con el panel de operador. El nombre del controlador se
establece en el editor de conexiones.

Utilizaci√≥n m√∫ltiple de la funci√≥n de sistema en un script de usuario
Si utiliza la funci√≥n de sistema "EstablecerModoDeConexi√≥n" para diferentes conexiones,
puede suceder que no todas las funciones de sistema se ejecuten correctamente. Para evitar
este problema, proceda del siguiente modo:
1. Cree una variable con el valor inicial "0".
2. Asocie la funci√≥n de sistema "EstablecerModoDeConexi√≥n" al evento "Modificaci√≥n de
valor" de la variable HMI. Si desea deshacer p. ej. 3 conexiones, deber√° configurar la
funci√≥n de sistema tres veces.
3. En el script de usuario, aplique a la variable HMI la funci√≥n de sistema "InvertirBit".

Ejemplo de aplicaci√≥n
A continuaci√≥n se indican dos ejemplos de aplicaci√≥n t√≠picos de esta funci√≥n de sistema:
‚óè Test
Mientras que no haya ning√∫n controlador conectado al panel de operador, durante el test
no se indicar√°n mensajes de error en el panel de operador. Si el panel de operador est√°
conectado a un controlador, podr√° establecer la conexi√≥n con √©ste √∫ltimo pulsando una
tecla.
‚óè Puesta en servicio
Se deben configurar varios controladores para una instalaci√≥n. Configure primero todos los
controladores "offline", exceptuando uno de ellos. Tras poner en marcha el primer
controlador, establezca la conexi√≥n con todos los dem√°s, pulsando para ello la tecla
correspondiente. As√≠ podr√° poner en marcha los dem√°s controladores uno tras otro.

AccesoWebActivar
Descripci√≥n
Define el tipo de acceso a una aplicaci√≥n runtime v√≠a Internet.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1631

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en la lista de funciones
AccesoWebActivar (Modo de acceso)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Modo de acceso
Determina el tipo de acceso a la aplicaci√≥n runtime:
-1 (hmiToggle) = Conmutar: Conmuta entre ambos estados.
0 (hmiReadOnly) = Solo lectura.
1 (hmiReadWrite) = Lectura y escritura.

CambiarConexi√≥n
Descripci√≥n
Deshace la conexi√≥n con el controlador que se est√° utilizando y establece una conexi√≥n con
un controlador con una direcci√≥n distinta. El controlador reci√©n conectado debe pertenecer a
la misma clase de dispositivo (S7-300, S7-400, etc.).
Nota
Al cambiar a una direcci√≥n diferente, vigile que esta direcci√≥n no est√© siendo utilizada por otro
panel de operador.
Se admiten los siguientes tipos de direcci√≥n:
‚óè Direcci√≥n IP
‚óè Direcci√≥n MPI
Se admiten los siguientes tipos de controlador:
‚óè SIMATIC S7 300/400
‚óè SIMATIC S7 200
‚óè SIMATIC S7 1200 (versi√≥n de panel hasta V11)
‚óè SIMATIC S7 LOGO!
‚óè SIMATIC S7 NC
‚óè SIMOTION

Utilizaci√≥n en la lista de funciones
CambiarConexi√≥n (Conectar, Direcci√≥n, Slot, Rack)

1632

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en funciones definidas por el usuario
ChangeConnection Connection, Address, Slot, Rack
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Conexi√≥n
Nombre de la conexi√≥n que se desconecta. El nombre se establece en el editor "Conexiones"
durante el proceso de configuraci√≥n.
Direcci√≥n
Direcci√≥n MPI/PROFIBUS o IP del controlador con el que se establece la conexi√≥n.
Nota
La direcci√≥n se establece mediante una variable. La lista de objetos muestra variables de todo
los tipos. Seleccione exclusivamente variables de los siguientes tipos:
‚óè Conexi√≥n Ethernet: Tipo de datos "String"
‚óè Conexi√≥n MPI: Tipos de datos "Int"
Slot
Slot del controlador con el que se establece la conexi√≥n.
Rack
Rack del controlador con el que se establece la conexi√≥n.

Ejemplo de aplicaci√≥n
Desea utilizar un panel de operador junto con varias m√°quinas. Para ello debe configurar un
controlador en el proyecto. Al cambiar de controlador se deshace la conexi√≥n con el
controlador utilizado actualmente. A continuaci√≥n, la conexi√≥n se establece con el nuevo
controlador, utilizando par√°metros de direccionamiento diferentes. A partir de ahora, todas las
variables de esta conexi√≥n se actualizar√°n desde el nuevo controlador.
Se utiliza por defecto el controlador especificado al crear el proyecto.
1. En el editor "Conexiones", indique el nombre y la direcci√≥n del controlador.
2. Configure un bot√≥n en la imagen del proceso.
3. Asocie el evento "Pulsar" a la funci√≥n de sistema "CambiarConexi√≥n".
4. Introduzca como par√°metros el nombre de la conexi√≥n y la direcci√≥n del controlador.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1633

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

CambiarConexi√≥nEIP
Descripci√≥n
Deshace la conexi√≥n con el controlador Allen Bradley que se est√° utilizando y establece una
conexi√≥n con otro controlador Allen Bradley en runtime. "EIP" son las siglas de "Ethernet/IP".
El controlador reci√©n conectado debe pertenecer a la misma clase de dispositivo (Allen
Bradley).
Para que se establezca la conexi√≥n, el tipo de CPU del controlador que se va a conectar debe
coincidir con el tipo de CPU del controlador ya conectado, p. ej., ambos controladores con el
tipo de CPU "SLC/Micrologix PLC".
Nota
Al cambiar a una direcci√≥n diferente, vigile que esta direcci√≥n no est√© siendo utilizada por otro
panel de operador.
Se admiten los siguientes tipos de direcci√≥n:
‚óè Direcci√≥n IP

Utilizaci√≥n en la lista de funciones
CambiarConexi√≥nEIP (Conectar, Direcci√≥n, Ruta de comunicaci√≥n)

Utilizaci√≥n en funciones definidas por el usuario
ChangeConnectionEIP Connection, Address, Communication_path
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Conexi√≥n
Nombre de la conexi√≥n que se desconecta. El nombre se establece durante la configuraci√≥n,
p. ej., en el editor "Conexiones".
Direcci√≥n
Direcci√≥n IP del controlador con el que se establece la conexi√≥n.
Nota
La direcci√≥n se establece mediante una variable. La lista de objetos muestra variables de todo
los tipos. Seleccione exclusivamente variables del tipo de datos "String".

1634

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Nota
La direcci√≥n IP guardada consiste en 4 n√∫meros decimales comprendidos en un rango entre
0 y 255.
Ruta de comunicaci√≥n
Ruta CIP desde el m√≥dulo Ethernet al controlador con el que se establece la conexi√≥n.
La ruta de comunicaci√≥n se puede definir mediante una variable String o una variable HMI del
tipo de datos "String".

Ejemplo de aplicaci√≥n
Desea utilizar un panel de operador junto con varias m√°quinas. Para ello debe configurar un
controlador en el proyecto. Al cambiar de controlador se deshace la conexi√≥n con el
controlador utilizado actualmente. A continuaci√≥n, la conexi√≥n se establece con el nuevo
controlador, utilizando par√°metros de direccionamiento diferentes. A partir de ahora, todas las
variables de esta conexi√≥n se actualizar√°n desde el nuevo controlador.
1. En el editor "Conexiones", indique el nombre y la direcci√≥n del controlador.
2. Configure un bot√≥n en la imagen del proceso.
3. Asocie el evento "Pulsar" a la funci√≥n de sistema "CambiarConexi√≥nEIP".
4. Introduzca como par√°metros el nombre de la conexi√≥n y la direcci√≥n del controlador.

Funciones de la pantalla
ModificarContraste
Descripci√≥n
Cambia el contraste de la pantalla del panel de operador al siguiente nivel de contraste.

Utilizaci√≥n en la lista de funciones
ModificarContraste (Cambio)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Cambio
Determina c√≥mo se debe modificar el contraste:
0 (hmiDecrease) = Reducir: Reduce el contraste un nivel.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1635

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
1 (hmiIncrease) = Aumentar: Aumenta el contraste un nivel.

Ejemplo de aplicaci√≥n
Objetivo
Desea aumentar y reducir el contraste de la pantalla utilizando para un bot√≥n de comando,
respectivamente.
Indicaciones relativas a la configuraci√≥n
Configure dos botones y asigne en cada uno de ellos el evento "Pulsar" a la funci√≥n de sistema
"ModificarContraste". Asigne a dichos botones los par√°metros "Aumentar" y "Reducir",
respectivamente.
Proceso en el panel de operador
Si pulsa uno de estos botones en runtime, el contraste se aumentar√° o reducir√° un nivel.

Consulte tambi√©n
CerrarSesi√≥n (P√°gina 1597)

CalibrarPantallaT√°ctil
Descripci√≥n
Ejecuta un programa para calibrar la pantalla t√°ctil.
Durante la calibraci√≥n se pedir√° al operador que toque cinco posiciones en la pantalla t√°ctil.
Para confirmar el proceso de calibraci√≥n, toque la pantalla t√°ctil en un intervalo de 30
segundos. Si no toca la pantalla t√°ctil dentro de ese intervalo, los ajustes de calibrado se
rechazan. La gu√≠a del usuario est√° en ingl√©s.
Utilice esta funci√≥n de sistema al poner en marcha el panel de operador por primera vez.

Nota
Con la funci√≥n de sistema se restablecen las teclas directas utilizadas.

Utilizaci√≥n en la lista de funciones
CalibrarPantallaT√°ctil

Utilizaci√≥n en funciones definidas por el usuario
CalibrateTouchScreen

1636

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
-Nota
La funci√≥n de sistema CalibrarPantallaT√°ctil no puede ser simulada.

ConfigurarSe√±alAc√∫stica
Descripci√≥n
Configura la notificaci√≥n ac√∫stica del panel de operador al manejar la pantalla t√°ctil.
Nota
Cuando rearranque el panel de operador se restablecer√° la configuraci√≥n que estaba ajustada
al apagarlo.

Utilizaci√≥n en la lista de funciones
ConfigurarSe√±alAc√∫stica (Volumen)

Utilizaci√≥n en funciones definidas por el usuario
SetAcousticSignal Volume
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Volumen
Determina si se debe emitir una se√±al ac√∫stica, as√≠ como su volumen.
-1 (hmiToggle) = Conmutar: Conmuta el volumen de salida de la se√±al ac√∫stica como se indica
a continuaci√≥n: Silenciada > Baja > Alta.
0 (hmiMuted) = Silenciada: Sin se√±al ac√∫stica
1 (hmiQuiet) = Baja: Se√±al ac√∫stica a bajo volumen
2 (hmiLoud) = Alta: Se√±al ac√∫stica a alto volumen

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1637

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

EstablecerBrillo
Descripci√≥n
Define el brillo de la pantalla.
Nota
Al reiniciar el panel de operador se restablece la configuraci√≥n que estaba ajustada en el
Control Panel/Start Center.
Es aplicable a Basic Panels 2nd Generation, Mobile Panels y Comfort Panels:
El valor de la funci√≥n de sistema "EstablecerBrillo" puede ajustarse entre 0 % y 100 %. El valor
ajustado se transfiere al panel de operador. Los ajustes de brillo en el panel de operador
pueden verse y editarse en "Start Center > Settings > Display". Los paneles de operador
soportan un ajuste de brillo entre 10 % y 100 %.
Si se asigna un valor de 0 % a la funci√≥n de sistema "EstablecerBrillo", la pantalla del panel de
operador estar√° desconectada por defecto en runtime. Cuando el operador toca la pantalla,
esta cambia al ajuste de brillo anterior.
Si se asigna un valor entre 1 % y 10 % a la funci√≥n de sistema "EstablecerBrillo" y el operador
abre el ajuste de la pantalla en el Start Center, el brillo cambiar√° al 10 %.

Utilizaci√≥n en la lista de funciones
EstablecerBrillo (Valor)

Utilizaci√≥n en funciones definidas por el usuario
SetBrightness Value
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Valor
Valor nuevo del brillo.

1638

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

EstablecerColorRetroiluminaci√≥n
Descripci√≥n
Define el color de la retroiluminaci√≥n.
Nota
Cuando rearranque el panel de operador se restablecer√° la configuraci√≥n que estaba ajustada
al apagarlo.

Utilizaci√≥n en la lista de funciones
EstablecerColorRetroiluminaci√≥n (Valor)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Valor
Establece el color de la retroiluminaci√≥n:
0 (hmiWhite) = blanco: Sin color
1 (hmiGreen) = verde: Color verde
2 (hmiYellow) = amarillo: Color amarillo
3 (hmiRed) = rojo: Color rojo

LeerBrillo
Descripci√≥n
Lee el valor del brillo.

Utilizaci√≥n en la lista de funciones
LeerBrillo (Brillo)

Utilizaci√≥n en funciones definidas por el usuario
GetBrightness Brightness

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1639

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Brillo
Variable en la que se escribe el valor.

Funciones del navegador HTML
NavegadorHTMLCancelar
Descripci√≥n
Ejecuta la funci√≥n "Cancelar" del navegador HTML.

Utilizaci√≥n en la lista de funciones
NavegadorHTMLCancelar (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

NavegadorHTMLDesplazarseAbajo
Descripci√≥n
Retrocede p√°gina en el navegador HTML.

Utilizaci√≥n en la lista de funciones
NavegadorHTMLDesplazarseAbajo (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

1640

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

NavegadorHTMLActualizar
Descripci√≥n
Ejecuta la funci√≥n "Actualizar" del navegador HTML.

Utilizaci√≥n en la lista de funciones
NavegadorHTMLActualizar (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

NavegadorHTMLDesplazarseArriba
Descripci√≥n
Avanza p√°gina en el navegador HTML.

Utilizaci√≥n en la lista de funciones
NavegadorHTMLDesplazarseArriba (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1641

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

NavegadorHTMLAcercar
Descripci√≥n
Aumenta la representaci√≥n del navegador HTML en un grado de zoom.

Utilizaci√≥n en la lista de funciones
NavegadorHTMLAcercar (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

NavegadorHTMLAlejar
Descripci√≥n
Reduce la representaci√≥n del navegador HTML en un grado de zoom.

Utilizaci√≥n en la lista de funciones
NavegadorHTMLAlejar (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

HTMLNavegadorALaIzquierda
Descripci√≥n
Pasa p√°gina a la izquierda en el navegador HTML.

1642

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en la lista de funciones
HTMLNavegadorALaIzquierda (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

NavegadorHTMLALaDerecha
Descripci√≥n
Pasa p√°gina a la derecha en el navegador HTML.

Utilizaci√≥n en la lista de funciones
NavegadorHTMLALaDerecha (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

NavegadorHTMLAvanzarP√°gina
Descripci√≥n
Hace que el cursor se desplace por p√°ginas hacia arriba en el navegador HTML.

Utilizaci√≥n en la lista de funciones
NavegadorHTMLDesplazarseArribaP√°gina (objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1643

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

NavegadorHTMLRetrocederP√°gina
Descripci√≥n
Hace que el cursor se desplace por p√°ginas hacia abajo en el navegador HTML.

Utilizaci√≥n en la lista de funciones
NavegadorHTMLRetrocederP√°gina (objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

NavegadorHTMLP√°ginaInicio
Descripci√≥n
Pasa a la p√°gina de inicio almacenada para el navegador HTML.

Utilizaci√≥n en la lista de funciones
NavegadorHTMLP√°ginaInicio (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

1644

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

NavegadorHTMLAdelante
Descripci√≥n
Ejecuta la funci√≥n "Adelante" del navegador HTML.

Utilizaci√≥n en la lista de funciones
NavegadorHTMLAdelante (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

NavegadorHTMLAtr√°s
Descripci√≥n
Ejecuta la funci√≥n "Atr√°s" del navegador HTML.

Utilizaci√≥n en la lista de funciones
NavegadorHTMLAtr√°s (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1645

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Funciones del visor de curvas
VisorDeCurvasAvanzarP√°gina
Descripci√≥n
Avanza un ancho de visualizaci√≥n en el visor de curvas indicado.

Utilizaci√≥n en la lista de funciones
VisorDeCurvasAvanzarP√°gina (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de curvas en el que se debe avanzar un ancho de visualizaci√≥n.

VisorDeCurvasRetrocederP√°gina
Descripci√≥n
Retrocede un ancho de visualizaci√≥n en el visor de curvas indicado.

Utilizaci√≥n en la lista de funciones
VisorDeCurvasRetrocederP√°gina (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de curvas en el que se debe retroceso un ancho de visualizaci√≥n.

1646

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

VisorDeCurvasAmpliar
Descripci√≥n
Reduce el intervalo de tiempo que se visualiza en el visor de curvas indicado.

Utilizaci√≥n en la lista de funciones
VisorDeCurvasAmpliar (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de curvas en el que se debe reducir el intervalo de tiempo visualizado.

VisorDeCurvasComprimir
Descripci√≥n
Aumenta el intervalo de tiempo que se visualiza en el visor de curvas indicado.

Utilizaci√≥n en la lista de funciones
VisorDeCurvasComprimir (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de curvas en el que se debe aumentar el intervalo de tiempo visualizado.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1647

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

VisorDeCurvasReglaIzquierda
Descripci√≥n
Desplaza la regla hacia atr√°s (a la izquierda) en el visor de curvas indicado.
Nota
Para poder desplazar la regla, √©sta debe estar activada. Para activar la regla utilice la funci√≥n
de sistema "VisorDeCurvasActivarModoRegla".

Utilizaci√≥n en la lista de funciones
VisorDeCurvasReglaIzquierda (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de curvas en el que la regla se debe desplazar hacia atr√°s.

Consulte tambi√©n
VisorDeCurvasActivarModoRegla (P√°gina 1649)

VisorDeCurvasReglaDerecha
Descripci√≥n
Desplaza la regla hacia adelante (a la derecha) en el visor de curvas indicado.
Nota
Para poder desplazar la regla, √©sta debe estar activada. Para activar la regla utilice la funci√≥n
de sistema "VisorDeCurvasActivarModoRegla".

Utilizaci√≥n en la lista de funciones
VisorDeCurvasReglaDerecha (Objeto de imagen)

1648

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de curvas en el que la regla se debe desplazar hacia adelante.

Consulte tambi√©n
VisorDeCurvasActivarModoRegla (P√°gina 1649)

VisorDeCurvasActivarModoRegla
Descripci√≥n
Muestra u oculta la regla en el visor de curvas indicado. La regla muestra el valor Y
correspondiente a un valor X.
Nota
Para visualizar la regla es necesario activar el ajuste "Mostrar regla" en las propiedades del
visor de curvas.

Utilizaci√≥n en la lista de funciones
VisorDeCurvasActivarModoRegla (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de curvas en el que la regla se debe mostrar u ocultar.

Consulte tambi√©n
VisorDeCurvasReglaDerecha (P√°gina 1648)
VisorDeCurvasReglaIzquierda (P√°gina 1648)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1649

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

VisorDeCurvasIniciarParar
Descripci√≥n
Detiene o prosigue el registro de curvas en el visor de curvas indicado.

Utilizaci√≥n en la lista de funciones
VisorDeCurvasIniciarParar (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de curvas en el que se debe iniciar o parar el registro de curvas.

VisorDeCurvasIrAlPrincipio
Descripci√≥n
Retrocede al principio del √°rea de representaci√≥n en el visor de curvas.

Utilizaci√≥n en la lista de funciones
VisorDeCurvasIrAlPrincipio (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de curvas en el que se retrocede al principio del √°rea de representaci√≥n.

Consulte tambi√©n
Funciones de sistema para Runtime Advanced (P√°gina 1549)

1650

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Funciones del visor de PDF
PDFDesplazarseAbajo
Descripci√≥n
Pasa p√°gina hacia abajo en la visualizaci√≥n del archivo PDF.

Utilizaci√≥n en la lista de funciones
PDFDesplazarseAbajo (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

PDFDesplazarseArriba
Descripci√≥n
Pasa p√°gina hacia arriba en la visualizaci√≥n del archivo PDF.

Utilizaci√≥n en la lista de funciones
PDFDesplazarseArriba (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1651

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

PDFAdaptarAncho
Descripci√≥n
Adapta la representaci√≥n del archivo PDF a la altura de la ventana del visor de PDF.

Utilizaci√≥n en la lista de funciones
PDFAdaptarAncho (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

PDFAdaptarAAltura
Descripci√≥n
Adapta la representaci√≥n del archivo PDF al ancho de la ventana del visor de PDF.

Utilizaci√≥n en la lista de funciones
PDFAdaptarAAltura (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

PDFPrimeraP√°gina
Descripci√≥n
Pasa a la primera p√°gina del archivo PDF en el visor de PDF.

1652

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en la lista de funciones
PDFPrimeraP√°gina (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

PDF√öltimaP√°gina
Descripci√≥n
Pasa a la √∫ltima p√°gina del archivo PDF en el visor de PDF.

Utilizaci√≥n en la lista de funciones
PDF√öltimaP√°gina (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

PDFAvanzarP√°gina
Descripci√≥n
Pasa a la siguiente p√°gina del archivo PDF en el visor de PDF.

Utilizaci√≥n en la lista de funciones
PDFAvanzarP√°gina (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1653

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

PDFIrAP√°gina
Descripci√≥n
Pasa a la p√°gina introducida del archivo PDF en el visor de PDF.

Utilizaci√≥n en la lista de funciones
PDFIrAP√°gina (objeto de imagen, p√°gina)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.
P√°gina
P√°gina del documento PDF que se representa.

PDFRetrocederP√°gina
Descripci√≥n
Pasa a la p√°gina anterior del archivo PDF en el visor de PDF.

Utilizaci√≥n en la lista de funciones
PDFRetrocederP√°gina (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

1654

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

PDFAcercar
Descripci√≥n
Aumenta la representaci√≥n del archivo PDF en un grado de zoom en el visor de PDF.

Utilizaci√≥n en la lista de funciones
PDFAcercar (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

PDFAlejar
Descripci√≥n
Reduce la representaci√≥n del archivo PDF en un grado de zoom en el visor de PDF.

Utilizaci√≥n en la lista de funciones
PDFAlejar (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1655

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

PDFDesplazarseIzquierda
Descripci√≥n
Pasa p√°gina a la izquierda en la visualizaci√≥n del archivo PDF.

Utilizaci√≥n en la lista de funciones
PDFDesplazarseIzquierda (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

PDFDesplazarseDerecha
Descripci√≥n
Pasa p√°gina a la derecha en la visualizaci√≥n del archivo PDF.

Utilizaci√≥n en la lista de funciones
PDFDesplazarseDerecha (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

PDFZoomOriginal
Descripci√≥n
Cambia la representaci√≥n del archivo PDF al tama√±o original en el visor de PDF.

1656

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en la lista de funciones
PDFZoomOriginal (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

Funciones del visor de c√≥digo PLC
ActivarVisorC√≥digoPLC
Descripci√≥n
Efect√∫a un cambio de imagen para visualizar la imagen indicada con el visor de c√≥digo PLC.
El visor de c√≥digo PLC muestra el c√≥digo de programa de la red en cuesti√≥n.
La funci√≥n de sistema ActivarVisorC√≥digoPLC se configura para el evento "Hacer clic en el
bot√≥n Visor de c√≥digo PLC" de una vista general de GRAPH, o para un evento de un bot√≥n.
Cambio de imagen desde la vista general de GRAPH
La funci√≥n de sistema se configura para el evento "Hacer clic en el bot√≥n Visor de c√≥digo PLC"
en una vista general de GRAPH para representar la cadena secuencial GRAPH en el visor de
c√≥digo PLC. Si no hay fallos presentes, en el visor de c√≥digo PLC se mostrar√° la secuencia de
la cadena GRAPH.
Si se produce un error, en el visor de c√≥digo PLC se mostrar√° la etapa err√≥nea tras el salto. Si
se han producido varios errores, tras el salto se mostrar√° la primera etapa err√≥nea de la cadena
secuencial. Si ha solucionado el error, en el visor se mostrar√° autom√°ticamente la siguiente
etapa err√≥nea. En la vista detallada, se mostrar√° seg√∫n el tipo de error, la transici√≥n o el
enclavamiento (Interlock).
Cambio de imagen de un aviso
La funci√≥n de sistema se puede configurar en un evento de un bot√≥n. Al pulsar el bot√≥n en
runtime, la funci√≥n de sistema comprueba si el √∫ltimo aviso seleccionado en el visor de avisos
configurado es un aviso de supervisi√≥n o un aviso GRAPH. Si es posible el salto para este
aviso, se abre el visor de c√≥digo PLC configurado con el c√≥digo de programa correspondiente.
Es posible saltar desde un aviso del visor de avisos al visor de c√≥digo PLC con los siguientes
avisos de supervisi√≥n:
‚óè

En supervisiones globales, solo con supervisiones de enclavamiento (Interlock)

‚óè

En supervisiones locales, con todas las supervisiones b√°sicas de par√°metros de entrada

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1657

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Para m√°s informaci√≥n sobre supervisiones, consulte el cap√≠tulo "Programaci√≥n del PLC >
Supervisi√≥n de m√°quinas e instalaciones con ProDiag".
El salto al visor de c√≥digo PLC es posible para todos los avisos GRAPH. Tras el salto, en el
visor de c√≥digo PLC se muestran la cadena secuencial GRAPH y la etapa err√≥nea.
Si hay presentes simult√°neamente un aviso de supervisi√≥n y un aviso de enclavamiento para
la misma etapa, tras el disparo de la funci√≥n de sistema, en el visor de c√≥digo PLC se mostrar√°
siempre primero el segmento de enclavamiento, independientemente de si estaba
seleccionado el aviso de supervisi√≥n o el de enclavamiento.
Para saltar de un aviso de supervisi√≥n al visor de c√≥digo PLC cuando se usan operandos
locales soportados en un bloque de funci√≥n, el nombre de la instancia debe cumplir la siguiente
convenci√≥n: <FB-Name>_DB.
Solo es posible saltar a una funci√≥n o a un bloque de organizaci√≥n si se usan exclusivamente
operandos globales.
Nota
No se soporta el salto en combinaci√≥n con el b√∫fer de avisos o el fichero de avisos.

Utilizaci√≥n en la lista de funciones
ActivarVisorC√≥digoPLC(Nombre de imagen, Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
ActivatePLCCodeView Screen_name, Object_name
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".
Nota
Para entrar en la cadena secuencial GRAPH mediante la funci√≥n de sistema
"ActivarVisorC√≥digoPLC", la versi√≥n del bloque GRAPH debe ser por lo menos V3.0.

Nota
El uso de la funci√≥n de sistema "ActivarVisorC√≥digoPLC" en un script de VB no tiene ning√∫n
efecto en la vista general de GRAPH.

1658

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Nombre de imagen
Nombre de la imagen que contiene el visor de c√≥digo PLC.
Nota
No se soporta el cambio a una imagen emergente o a una imagen deslizable.
Objeto de imagen
Nombre de objeto del visor de c√≥digo PLC.

VisorC√≥digoPLCMoverBarraDesplazamiento
Descripci√≥n
Mueve la barra de desplazamiento del visor de c√≥digo PLC. Esta funci√≥n de sistema le permite
acceder a un m√°ximo de seis barras de desplazamiento de determinadas √°reas de dibujo.

Utilizaci√≥n en la lista de funciones
VisorC√≥digoPLCMoverBarraDesplazamiento (objeto de imagen, √°rea, direcci√≥n)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de c√≥digo PLC.
√Årea
√Årea en la cual se mueve la barra de desplazamiento:
√Årea de dibujo
Tabla de s√≠mbolos
Vista detallada
Direcci√≥n
Direcci√≥n hacia la cual se mueve la barra de desplazamiento
Izquierda
Derecha
Arriba

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1659

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Abajo

VisorC√≥digoPLCDetalles
Descripci√≥n
Muestra la vista detallada en el visor de c√≥digo PLC seleccionado.

Utilizaci√≥n en la lista de funciones
VisorC√≥digoPLCDetalles (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de c√≥digo PLC.

VisorC√≥digoPLCSiguienteSegmento
Descripci√≥n
Se desplaza al segmento siguiente en el visor de c√≥digo PLC.

Utilizaci√≥n en la lista de funciones
VisorC√≥digoPLCSiguienteSegmento (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de c√≥digo PLC.

1660

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

VisorC√≥digoPLCMostrarModoEtapa
Descripci√≥n
Alterna la selecci√≥n de etapas manual y la selecci√≥n autom√°tica de la etapa activa en el visor
de c√≥digo PLC.

Utilizaci√≥n en la lista de funciones
VisorC√≥digoPLCMostrarModoEtapa (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de c√≥digo PLC.

VisorC√≥digoPLCS√≠mbolos
Descripci√≥n
Muestra el √°rea del s√≠mbolo del segmento en el visor de c√≥digo PLC.

Utilizaci√≥n en la lista de funciones
VisorC√≥digoPLCS√≠mbolos (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de c√≥digo PLC.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1661

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

VisorC√≥digoPLCTransici√≥nInterlock
Descripci√≥n
Conmuta entre la visualizaci√≥n de segmentos de transici√≥n y de Interlock en el visor de c√≥digo
PLC.

Utilizaci√≥n en la lista de funciones
VisorC√≥digoPLCTransici√≥nInterlock (objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de c√≥digo PLC.

VisorC√≥digoPLCActualOPrimerosValores
Descripci√≥n
Conmuta entre la visualizaci√≥n de valores actuales y primeros valores en el visor de c√≥digo
PLC.
Nota
Requisitos para la adquisici√≥n de primeros valores
La adquisici√≥n de primeros valores es posible tan solo con bloques de funci√≥n GRAPH de la
versi√≥n V4.0 y superiores.
Para la adquisici√≥n de primeros valores se debe marcar la casilla "Adquisici√≥n de primeros
valores" en las propiedades del bloque GRAPH.

Utilizaci√≥n en la lista de funciones
VisorC√≥digoPLCActualOPrimerosValores (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

1662

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Objeto de imagen
Nombre del visor de c√≥digo PLC.

VisorC√≥digoPLCAcercar
Descripci√≥n
Ampl√≠a la visualizaci√≥n del segmento en el √°rea del segmento de la visualizaci√≥n del c√≥digo
PLC.

Utilizaci√≥n en la lista de funciones
VisorC√≥digoPLCAcercar (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de c√≥digo PLC.

VisorC√≥digoPLCAlejar
Descripci√≥n
Reduce la visualizaci√≥n del segmento en el √°rea del segmento de la visualizaci√≥n del c√≥digo
PLC.

Utilizaci√≥n en la lista de funciones
VisorC√≥digoPLCAlejar (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1663

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Objeto de imagen
Nombre del visor de c√≥digo PLC

VisorC√≥digoPLCAnteriorSegmento
Descripci√≥n
Se desplaza al segmento anterior en el visor de c√≥digo PLC.

Utilizaci√≥n en la lista de funciones
VisorC√≥digoPLCAnteriorSegmento (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de c√≥digo PLC.

VisorC√≥digoPLCSupervisi√≥nOLlamadaFB
Descripci√≥n
Cambia entre la visualizaci√≥n del segmento individual con la supervisi√≥n configurada y la
visualizaci√≥n de todo el bloque de funci√≥n en el visor de c√≥digo PLC.

Utilizaci√≥n en la lista de funciones
VisorC√≥digoPLCSupervisi√≥nOLlamadaFB (objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de c√≥digo PLC.

1664

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Consulte tambi√©n
Funciones de sistema para Runtime Advanced (P√°gina 1549)
Funciones de sistema para Comfort Panels (P√°gina 1532)

Funciones del visor Sm@rtClient
VisorSmartClientActualizar
Descripci√≥n
Actualiza el contenido visualizado en el visor Sm@rtClient.

Utilizaci√≥n en la lista de funciones
VisorSmartClientActualizar (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor Sm@rtClient en el que se ejecuta el comando.

VisorSmartClientProtecci√≥nContraEscrituraOff
Descripci√≥n
Ajusta el acceso de solo lectura a "Inactivo" en el visor Sm@rtClient.
Con esta configuraci√≥n puede utilizarse un panel de operador eliminado. Utilice la funci√≥n de
sistema "VisorSmartClientProtecci√≥nContraEscrituraOn" para reactivar el acceso de solo
lectura.

Utilizaci√≥n en la lista de funciones
VisorSmartClientProtecci√≥nContraEscrituraOff (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1665

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Objeto de imagen
Nombre del visor Sm@rtClient en el que se ejecuta el comando.

VisorSmartClientProtecci√≥nContraEscrituraOn
Descripci√≥n
Ajusta el acceso de solo lectura a "Activo" en el visor Sm@rtClient.
Con esta configuraci√≥n, un panel de operador eliminado solo puede observarse. Utilice la
funci√≥n de sistema "VisorSmartClientProtecci√≥nContraEscrituraOff" para volver a desactivar
el acceso de solo lectura.

Utilizaci√≥n en la lista de funciones
VisorSmartClientProtecci√≥nContraEscrituraOn (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor Sm@rtClient en el que se ejecuta el comando.

VisorSmartClientDesconectar
Descripci√≥n
Ejecuta el comando "Desconectar" en el visor Sm@rtClient.
Utilice esta funci√≥n de sistema si no se debe utilizar el bot√≥n integrado en el objeto de imagen.

Utilizaci√≥n en la lista de funciones
VisorSmartClientDesconectar (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

1666

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Objeto de imagen
Nombre del visor Sm@rtClient en el que se ejecuta el comando.

VisorSmartClientConectar
Descripci√≥n
Ejecuta el comando "Conectar" en el visor Sm@rtClient.
Utilice esta funci√≥n de sistema si no se debe utilizar el bot√≥n integrado en el objeto de imagen.
El visor Sm@rtClient se conecta con el panel de operador configurado.
Nota
No es posible establecer una conexi√≥n cifrada entre el Sm@rtClient y el Sm@rtServer
mediante la funci√≥n de sistema "VisorSmartClientConectar" si el Sm@rtClient no ha aceptado
previamente el certificado del servidor. Para establecer una conexi√≥n cifrada entre el
Sm@rtClient y el Sm@rtServer, utilice el bot√≥n configurado "Conectar" del visor Sm@rtClient
en runtime.

Utilizaci√≥n en la lista de funciones
VisorSmartClientConectar (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor Sm@rtClient en el que se ejecuta el comando.

VisorSmartClientSalir
Descripci√≥n
Sale del visor Sm@rtClient y vuelve a la operaci√≥n del panel de operador.
Se mantiene la conexi√≥n con el panel de operador que est√° configurado en el visor
Sm@rtClient.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1667

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en la lista de funciones
VisorSmartClientSalir (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor Sm@rtClient en el que se ejecuta el comando.

Funciones del visor de diagn√≥stico del sistema
VisorDiagn√≥sticoSistemaActivar
Descripci√≥n
Activa el visor de diagn√≥stico del sistema. El visor de diagn√≥stico del sistema muestra la vista
detallada del dispositivo afectado.

Utilizaci√≥n en la lista de funciones
VisorDiagn√≥sticoSistemaActivar(Nombre de imagen, Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
ActivateSystemDiagnosticsView Screen_name, Object_name
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Nombre de imagen
Nombre de la imagen que contiene el visor de diagn√≥stico del sistema.
Objeto de imagen
Nombre de objeto del visor de diagn√≥stico del sistema.

1668

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

VisorDiagn√≥sticoSistemaActualizarB√∫ferPLC
Descripci√≥n
Actualiza los datos del b√∫fer de diagn√≥stico del controlador en el visor de diagn√≥stico del
sistema.

Utilizaci√≥n en la lista de funciones
VisorDiagn√≥sticoSistemaActualizarB√∫ferPLC (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de diagn√≥stico del sistema.

VisorDiagn√≥sticoSistemaVistaDetallada
Descripci√≥n
Abre la vista detallada en un diagn√≥stico de sistema para mostrar informaci√≥n detallada sobre
la conexi√≥n seleccionada y los errores existentes.

Utilizaci√≥n en la lista de funciones
VisorDiagn√≥sticoSistemaVistaDetallada (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de diagn√≥stico del sistema que se activa en la vista detallada.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1669

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

VisorDiagn√≥sticoSistemaB√∫ferDiagn√≥stico
Descripci√≥n
Abre la vista que muestra los datos actuales del b√∫fer de diagn√≥stico en un diagn√≥stico de
sistema.

Utilizaci√≥n en la lista de funciones
VisorDiagn√≥sticoSistemaB√∫ferDiagn√≥stico (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de diagn√≥stico del sistema que se activa en la vista detallada.

VisorDiagn√≥sticoSistemaVistaDispositivos
Descripci√≥n
Abre la vista de dispositivos en un diagn√≥stico del sistema para mostrar todas las conexiones
disponibles.

Utilizaci√≥n en la lista de funciones
VisorDiagn√≥sticoSistemaVistaDispositivos (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de diagn√≥stico del sistema.

1670

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

VisorDiagn√≥sticoSistemaAtr√°s
Descripci√≥n
Pasa a la vista de orden superior en un diagn√≥stico de sistema.
‚óè Si en el visor de diagn√≥stico del sistema se representa la vista del b√∫fer de diagn√≥stico, la
funci√≥n abre la vista de dispositivos.
‚óè Si en el visor de diagn√≥stico del sistema se representa la vista detallada, la funci√≥n abre la
vista del b√∫fer de diagn√≥stico.

Utilizaci√≥n en la lista de funciones
VisorDiagn√≥sticoSistemaAtr√°s (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de diagn√≥stico del sistema.

MostrarVentanaDeDiagn√≥sticoDelSistema
Descripci√≥n
Muestra u oculta la ventana de diagn√≥stico del sistema en el panel de operador. La ventana de
diagn√≥stico del sistema s√≥lo est√° disponible en la imagen general para Comfort Panels y
WinCC Runtime Advanced.

Utilizaci√≥n en la lista de funciones
MostrarVentanaDeDiagn√≥sticoDelSistema (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
ShowSystemDiagnosticsWindow Object_name
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1671

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Objeto de imagen
Nombre de la ventana de diagn√≥stico del sistema que se debe mostrar u ocultar.

Avisos
EditarAviso
Descripci√≥n
Dispara el evento "Editar" para el aviso seleccionado o, en caso de selecci√≥n m√∫ltiple, para el
aviso seleccionado en √∫ltimo lugar. Si no ha acusado todav√≠a los avisos que editar, el acuse se
efectuar√° autom√°ticamente al ejecutarse esta funci√≥n de sistema.
Esta funci√≥n de sistema solo se puede utilizar para teclas de funci√≥n.

Utilizaci√≥n en la lista de funciones
EditarAviso

Utilizaci√≥n en funciones definidas por el usuario
EditAlarm
Utilizable, siempre que el panel configurado permita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del dispositivo".

Par√°metros
--

BorrarB√∫ferDeAvisos
Descripci√≥n
Borra avisos del b√∫fer de avisos en el panel de operador.
Nota
Los avisos no acusados tambi√©n se borran.

Utilizaci√≥n en la lista de funciones
BorrarB√∫ferDeAvisos (N√∫mero de categor√≠a)

1672

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en funciones definidas por el usuario
ClearAlarmBuffer Alarm_class_number
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
N√∫mero de categor√≠a
Determina qu√© avisos se deben borrar del b√∫fer de avisos:
0 (hmiAll) = todos los avisos
1 (hmiAlarms) = avisos de la categor√≠a "Errores"
2 (hmiEvents) = avisos de la categor√≠a "Advertencias"
3 (hmiSystem) = avisos de la categor√≠a "Avisos de sistema"
4 (hmiS7Diagnosis) = avisos de la categor√≠a "Aviso de diagn√≥stico S7"
Nota
Dependencia del panel de operador
Los avisos de la categor√≠a "Diagnosis Events" no est√°n disponibles en Basic Panels.

BorrarB√∫ferDeAvisosProtool
Descripci√≥n
Esta funci√≥n de sistema existe por motivos de compatibilidad.
Tiene la misma funcionalidad que la funci√≥n de sistema "BorrarB√∫ferDeAvisos" pero utiliza la
antigua numeraci√≥n de ProTool.

Utilizaci√≥n en la lista de funciones
BorrarB√∫ferDeAvisosProtool (N√∫mero de categor√≠a)

Utilizaci√≥n en funciones definidas por el usuario
ClearAlarmBufferProtoolLegacy Alarm_class_number
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
N√∫mero de categor√≠a
N√∫mero de la categor√≠a cuyos avisos se borrar√°n:
Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1673

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
-1 (hmiAllProtoolLegacy) = Todos los avisos
0 (hmiAlarmsProtoolLegacy) = Avisos de la categor√≠a "Errors"
1 (hmiEventsProtoolLegacy) = Avisos de la categor√≠a "Warnings"
2 (hmiSystemProtoolLegacy) = Avisos de la categor√≠a "System"
3 (hmiS7DiagnosisProtoolLegacy) = Avisos de la categor√≠a "Diagnosis Events"
Nota
Dependencia del panel de operador
Los avisos de la categor√≠a "Diagnosis Events" no est√°n disponibles en Basic Panels.

VisorDeAvisosActualizar
Descripci√≥n
Actualiza el visor de avisos avanzado.

Utilizaci√≥n en la lista de funciones
VisorDeAvisosActualizar (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de avisos que se actualizar√°.

VisorDeAvisosLoopInAlarm
Descripci√≥n
Dispara el evento "Loop-In-Alarm" para el aviso seleccionado o, en caso de selecci√≥n m√∫ltiple,
para el aviso seleccionado en √∫ltimo lugar.
Utilice esta funci√≥n de sistema si no se debe utilizar el bot√≥n integrado en el control ActiveX.

1674

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Puede configurar a su vez una funci√≥n de sistema para el evento "Loop-In-Alarm". Por ejemplo,
puede conmutar a la imagen del proceso en la que se ha presentado el aviso.
Nota
Si no ha acusado todav√≠a los avisos a editar, el acuse se efectuar√° autom√°ticamente al
ejecutarse esta funci√≥n de sistema.

Utilizaci√≥n en la lista de funciones
VisorDeAvisosLoopInAlarm (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de avisos en el que se debe lanzar el evento.

VisorDeAvisosAcusarAviso
Descripci√≥n
Acusa los avisos seleccionados en el visor de avisos indicado.
Utilice esta funci√≥n de sistema si no se debe utilizar el bot√≥n integrado en el control ActiveX.

Utilizaci√≥n en la lista de funciones
VisorDeAvisosAcusarAviso (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de avisos en el que se debe lanzar el evento.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1675

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

VisorDeAvisosMostrarTextoAyuda
Descripci√≥n
Muestra el tooltip configurado para el aviso seleccionado en el visor de avisos indicado.

Utilizaci√≥n en la lista de funciones
VisorDeAvisosMostrarTextoAyuda (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de avisos en el que se debe lanzar el evento.

Consulte tambi√©n
Funciones de sistema para Runtime Advanced (P√°gina 1549)

AcusarAviso
Descripci√≥n
Acusa todos los avisos seleccionados.
Utilice esta funci√≥n de sistema si el panel de operador no tiene ninguna tecla de acuse o si no
debe emplearse la tecla integrada del visor de avisos.
Esta funci√≥n de sistema s√≥lo se puede utilizar para teclas de funci√≥n.

Utilizaci√≥n en la lista de funciones
AcusarAviso

Utilizaci√≥n en funciones definidas por el usuario
AcknowledgeAlarm
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del dispositivo".

1676

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
--

MostrarVentanaDeAvisos
Descripci√≥n
Muestra u oculta la ventana de avisos en el panel de operador.

Utilizaci√≥n en la lista de funciones
MostrarVentanaDeAvisos (Nombre del objeto, Representaci√≥n)

Utilizaci√≥n en funciones definidas por el usuario
ShowAlarmWindow Object_name, Display_mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Nombre del objeto
Nombre del visor de avisos que se debe mostrar u ocultar.
Representaci√≥n
Determina si la ventana de avisos se debe mostrar u ocultar.
0 (hmiOff) = Off: Ocultar el visor de avisos
1 (hmiOn) = On: Mostrar el visor de avisos
-1 (hmiToggle) = Conmutar: Conmuta entre ambos estados.

MostrarAvisoDeSistema
Descripci√≥n
Muestra el valor del par√°metro transferido como aviso del sistema en el panel de operador.

Utilizaci√≥n en la lista de funciones
MostrarAvisoDeSistema (Texto/valor)

Utilizaci√≥n en funciones definidas por el usuario
ShowSystemAlarm Text_or_value

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1677

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Texto/valor
Texto o valor a emitir como aviso del sistema.

Recetas
ExportarRegistros
Descripci√≥n
Exporta uno o todos los registros de una receta a un archivo CSV o TXT.
Se crea un archivo para cada receta.

Utilizaci√≥n en la lista de funciones
ExportarRegistros (N√∫mero/nombre de receta, N√∫mero/nombre de registro, Nombre de
archivo, Sobrescribir, Emitir aviso de estado, Estado de procesamiento)

Utilizaci√≥n en funciones definidas por el usuario
ExportDataRecords Recipe_number/name, Data_record number/name, File_name,
Overwrite, Output_status_message, Processing_status
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
N√∫mero/nombre de receta
N√∫mero/nombre de la receta de la que se deben exportar los registros. Introduzca "0" si desea
exportar registros de todas las recetas disponibles.
N√∫mero/nombre de registro
N√∫mero o nombre del registro de receta que se exportar√°. Introduzca "0" si desea exportar
todos los registros de receta.
Nombre de archivo
Nombre del archivo al que se exportan los registros de receta. Introduzca el nombre incluyendo
la ubicaci√≥n y la extensi√≥n del archivo (*.csv o *.txt), p. ej., "C:\TEMP\Orange.csv". Si una
carpeta no existe, se crear√° al exportar.

1678

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Si no se introduce el nombre de archivo completo, el comportamiento depender√° del n√∫mero
de recetas configuradas:
‚óè Si hay varias recetas configuradas:
Si introduce solo un nombre de archivo sin ruta, el archivo se guardar√° en un directorio del
sistema, p. ej., "C:\Documents and Settings\[User]".
Si indica solo la ruta sin nombre de archivo, el nombre del archivo se genera
autom√°ticamente a partir del nombre de la receta. Para ello, es imprescindible que est√©
creada la carpeta indicada en la ruta, p. ej., "D:\Data\". Si la carpeta "D:\Data" no est√°
creada, se utilizar√° su nombre como prefijo para el nombre del archivo, p. ej.,
"Data_nombre_de_la_receta.csv".
‚óè Si hay una sola receta configurada y se indica solo la ruta sin nombre de archivo:
Si la carpeta no existe, se crea un archivo con el nombre de la carpeta. Este archivo no
tendr√° ninguna extensi√≥n.
Si la carpeta existe, la exportaci√≥n se cancela con un mensaje de error.
Si utiliza una tarjeta de memoria como ubicaci√≥n, defina la ruta del siguiente modo:
"\StorageCard\<Nombre>".
Para los Basic Panels, introduzca el nombre del archivo como sigue: "\USB_X60.1\<Nombre>"
Sobrescribir
Determina si se debe sobrescribir un archivo de exportaci√≥n existente de igual nombre:
0 (hmiOverwriteForbidden) = No: El archivo de exportaci√≥n no se sobrescribe. El proceso de
exportaci√≥n no se ejecutar√°.
1 (hmiOverwriteAlways) = S√≠: El archivo de exportaci√≥n se sobrescribir√° sin consulta previa.
2 (hmiOverwriteWithPrompting) = Previa confirmaci√≥n: El archivo de exportaci√≥n se
sobrescribir√° tras haberse confirmado la consulta de seguridad.
Emitir aviso de estado
Determina si se debe emitir un aviso de estado una vez concluida la exportaci√≥n:
0 (hmiOff) = Off: No emitir ning√∫n aviso de estado.
1 (hmiOn) = On: Emitir un aviso de estado.
Estado de procesamiento
Indica el estado de procesamiento de la funci√≥n de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta funci√≥n:
2 = La funci√≥n de sistema se est√° ejecutando actualmente.
4 = La funci√≥n de sistema se ha ejecutado correctamente.
12 = La funci√≥n de sistema no se ha ejecutado porque se ha producido un error.
Para el par√°metro puede utilizarse una sola variable HMI.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1679

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Formato de exportaci√≥n de los registros de receta
Si se selecciona la extensi√≥n ".csv" para el archivo de exportaci√≥n, s√≥lo se soportar√°n los
caracteres v√°lidos del juego de caracteres ANSI. Esto tambi√©n es aplicable a los separadores
de n√∫meros decimales y de elementos de listas. Los separadores utilizados se establecen en
la configuraci√≥n regional del sistema operativo del PC en el que se realiza la exportaci√≥n.
Para la exportaci√≥n tambi√©n se pueden utilizar archivos de texto en formato de "Texto Unicode"
(".txt"). Este formato de archivo admite todos los caracteres que se pueden utilizar en WinCC
y WinCC Runtime. Los separadores utilizados se establecen asimismo en la configuraci√≥n
regional del sistema operativo del PC en el que se realiza la exportaci√≥n. En este formato de
archivo, el separador de elementos de lista es siempre un tabulador.
La funci√≥n correspondiente para importar los datos soporta tambi√©n los formatos de archivo
".csv" y ".txt" (Unicode).

Ejemplo de aplicaci√≥n
Desea exportar todos los objetos pulsando una tecla.
Indicaciones relativas a la configuraci√≥n
Configure la funci√≥n de sistema "ExportarRegistros" asociada al evento "Pulsar" de la tecla
deseada. Transfiera los par√°metros siguientes:
‚óè N√∫mero/nombre de receta = 1
‚óè N√∫mero/nombre de registro = 0
‚óè Nombre de archivo = c:\temp\orange.csv (para Basic Panels "\USB_X60.1\orange.csv")
‚óè Sobrescribir = 1
‚óè Emitir aviso de estado = 1
Si lo desea, puede indicar variables en lugar de constantes. Dependiendo de la configuraci√≥n,
el operador puede introducir los valores deseados en los campos E/S, o bien leerlos del
controlador. De este modo, el operador puede determinar qu√© registros de receta se
exportar√°n.
Proceso en el panel de operador
La funci√≥n de sistema se ejecuta tras pulsar la tecla. Las constantes o las variables se eval√∫an.
Todos los registros de la receta 1 se exportan al archivo orange.csv. Si el archivo ya existe,
√©ste se sobrescribe.
Tras exportar los registros se visualiza un aviso del sistema.

ExportarRegistrosConSumaDeVerificaci√≥n
Descripci√≥n
Exporta uno o todos los registros de una receta a un archivo CSV y genera una suma de
verificaci√≥n para cada fila del archivo.
Se crea un archivo para cada receta.

1680

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en la lista de funciones
ExportarRegistrosConSumaDeVerificaci√≥n (N√∫mero/nombre de receta, N√∫mero/nombre de
registro, Nombre de archivo, Sobrescribir, Emitir aviso de estado, Estado de procesamiento)

Utilizaci√≥n en funciones definidas por el usuario
ExportDataRecordsWithChecksum Recipe_number_or_name, Data_record
number_or_name, File_name, Overwrite, Output_status_message, Processing_status
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
N√∫mero/nombre de receta
N√∫mero/nombre de la receta de la que se deben exportar los registros. Introduzca "0" si desea
exportar registros de todas las recetas disponibles.
N√∫mero/nombre de registro
N√∫mero o nombre del registro de receta que se exportar√°. Introduzca "0" si desea exportar
todos los registros de receta.
Nombre de archivo
Nombre del archivo CSV al que se deben exportar los registros de receta. Introduzca tambi√©n
la ruta y la extensi√≥n del archivo, p. ej., "C:\TEMP\Orange.CSV".
Si utiliza una tarjeta de memoria como ubicaci√≥n, introduzca la ubicaci√≥n del siguiente modo:
"\StorageCard\<Nombre de archivo>".
Si define s√≥lo un nombre de archivo y no una ruta, el archivo se guardar√° en el directorio desde
el que se inici√≥ el runtime. Si en el sistema operativo Windows 7 no se dispone de derechos de
escritura para este directorio, el archivo se guardar√° en el directorio de usuario, en la carpeta
"VirtualStore".
Si solo indica la ruta para la exportaci√≥n, el nombre del archivo se genera autom√°ticamente a
partir del nombre de la receta. Para ello se tiene que haber creado el directorio, p. ej. "D:\Temp
\". Si no se ha creado el directorio "D:\Temp", se utiliza el nombre del directorio como prefijo del
nombre del archivo,Temp_Nombre de receta.csv.
Sobrescribir
Determina si se debe sobrescribir un archivo CSV existente de igual nombre:
0 (hmiOverwriteForbidden) = No: El archivo CSV no se sobrescribir√°. El proceso de
exportaci√≥n no se ejecutar√°.
1 (hmiOverwriteAlways) = S√≠: El archivo CSV se sobrescribir√° sin consulta previa.
2 (hmiOverwriteWithConfirmation) = Previa confirmaci√≥n: El archivo CSV se sobrescribir√° tras
haberse confirmado la consulta de seguridad.
Emitir aviso de estado
Determina si se debe emitir un aviso de estado una vez concluida la exportaci√≥n:

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1681

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
0 (hmiOff) = Off: No emitir ning√∫n aviso de estado.
1 (hmiOn) = On: Emitir un aviso de estado.
Estado de procesamiento
Indica el estado de procesamiento de la funci√≥n de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta funci√≥n:
2 = La funci√≥n de sistema se est√° ejecutando actualmente.
4 = La funci√≥n de sistema se ha ejecutado correctamente.
12 = La funci√≥n de sistema no se ha ejecutado porque se ha producido un error.
Para el par√°metro puede utilizarse una sola variable HMI.

Formato de exportaci√≥n de los registros de receta
Si se selecciona la extensi√≥n ".csv" para el archivo de exportaci√≥n, s√≥lo se soportar√°n los
caracteres v√°lidos del juego de caracteres ANSI. Esto tambi√©n es aplicable a los separadores
de n√∫meros decimales y de elementos de listas. Los separadores utilizados se establecen en
la configuraci√≥n regional del sistema operativo del PC en el que se realiza la exportaci√≥n.
Para la exportaci√≥n tambi√©n se pueden utilizar archivos de texto en formato de "Texto Unicode"
(".txt"). Este formato de archivo admite todos los caracteres que se pueden utilizar en WinCC
y WinCC Runtime. Los separadores utilizados se establecen asimismo en la configuraci√≥n
regional del sistema operativo del PC en el que se realiza la exportaci√≥n. En este formato de
archivo, el separador de elementos de lista es siempre un tabulador.
La funci√≥n correspondiente para importar los datos soporta tambi√©n los formatos de archivo
".csv" y ".txt" (Unicode).

Ejemplo de aplicaci√≥n
Pulsando una tecla desea exportar todos los registros y asignarles una suma de verificaci√≥n.
Indicaciones relativas a la configuraci√≥n
Configure la funci√≥n de sistema "ExportarRegistrosConSumaDeVerificaci√≥n" asociada al
evento "Pulsar" de la tecla deseada. Transfiera los par√°metros siguientes:
‚óè N√∫mero/nombre de receta = 1
‚óè N√∫mero/nombre de registro = 0
‚óè Nombre de archivo = c:\temp\orange.csv
‚óè Sobrescribir = 1
‚óè Emitir aviso de estado = 1
Si lo desea, puede indicar variables en lugar de constantes. Dependiendo de la configuraci√≥n,
el operador puede introducir los valores deseados en los campos E/S, o bien leerlos del
controlador. De este modo, el operador puede determinar qu√© registros de receta se
exportar√°n.
Proceso en el panel de operador

1682

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
La funci√≥n de sistema se ejecuta tras pulsar la tecla. Las constantes o las variables se eval√∫an.
Todos los registros de la receta 1 se exportan al archivo orange.csv y se les asignan sumas de
verificaci√≥n. Si el archivo ya existe, √©ste se sobrescribe.
Tras exportar los registros se visualiza un aviso del sistema.

ImportarRegistros
Descripci√≥n
Importa uno o todos los registros de una receta de un archivo CSV o TXT.
Cuando se indica una ruta, se importan todos los archivos del directorio indicado.

Utilizaci√≥n en la lista de funciones
ImportarRegistros (Nombre de archivo, N√∫mero/nombre de registroNombre de registro,
Sobrescribir, Emitir aviso de estado, Estado de procesamiento)

Utilizaci√≥n en funciones definidas por el usuario
ImportDataRecords File_name, Data_record_number_or_name, Overwrite,
Output_status_message, Processing_status
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Nombre de archivo
Nombre del archivo del que se deben importar los registros de receta. Introduzca tambi√©n la
ubicaci√≥n y la extensi√≥n del archivo (*.csv o *.txt), p. ej., "C:\TEMP\Orange.csv".
Para los Basic Panels, introduzca el nombre del archivo como sigue: "\USB_X60.1\<Nombre>"
Para otros paneles se aplica lo siguiente: Si utiliza una tarjeta de memoria como ubicaci√≥n,
introduzca esta √∫ltima del siguiente modo: "\StorageCard\<Nombre>"
N√∫mero/nombre de registro
N√∫mero o nombre del registro de receta que se importar√°. Introduzca "0" si desea importar
todos los registros de receta.
Sobrescribir
Determina si se deben sobrescribir los registros de receta existentes:
0 (hmiOverwriteForbidden) = No: Los registros de receta no se sobrescriben. El proceso de
importaci√≥n no se ejecuta.
1 (hmiOverwriteAlways) = S√≠: Los registros de receta se sobrescribir√°n sin consulta previa.
2 (hmiOverwriteWithPrompting) = Previa confirmaci√≥n: Los registros de receta se
sobrescribir√°n tras haberse confirmado la consulta de seguridad.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1683

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Emitir aviso de estado
Determina si se debe emitir un aviso de estado una vez concluida la importaci√≥n:
0 (hmiOff) = Off: No emitir ning√∫n aviso de estado.
1 (hmiOn) = On: Emitir un aviso de estado.
Estado de procesamiento
Indica el estado de procesamiento de la funci√≥n de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta funci√≥n:
2 = La funci√≥n de sistema se est√° ejecutando actualmente.
4 = La funci√≥n de sistema se ha ejecutado correctamente.
12 = La funci√≥n de sistema no se ha ejecutado porque se ha producido un error.
Para el par√°metro puede utilizarse una sola variable HMI.

Objetos configurables
Objeto

Evento

Variable

Modificaci√≥n de valor
L√≠mite superior excedido
L√≠mite inferior excedido

Tecla de funci√≥n (global)

Soltar
Pulsar

Tecla de funci√≥n (local)

Soltar
Pulsar

Imagen

Creada
Borrada

Objeto de imagen

Pulsar
Soltar
Hacer clic
Modificar (o conmutar con el interruptor)
Conectar
Desconectar
Activar
Desactivar

Planificador de tareas

Tiempo agotado

ImportarRegistrosConSumaDeVerificaci√≥n
Descripci√≥n
Importa uno o todos los registros de una receta de un archivo CSV con suma de verificaci√≥n
y verifica √©sta √∫ltima.

1684

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en la lista de funciones
ImportarRegistrosConSumaDeVerificaci√≥n (Nombre de archivo, N√∫mero/nombre de registro,
Sobrescribir, Emitir aviso de estado, Estado de procesamiento, verificar suma de verificaci√≥n)

Utilizaci√≥n en funciones definidas por el usuario
ImportDataRecordsWithChecksum File_name, Data_record_number_or_name, Overwrite,
Output_status_message, Processing_status, Verify_checksum
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Nombre de archivo
Nombre del archivo CSV del que se deben importar los registros de receta. Introduzca tambi√©n
la ruta y la extensi√≥n del archivo, p. ej., "C:\TEMP\Orange.CSV".
Si utiliza una tarjeta de memoria como medio de almacenamiento, introduzca la ruta del
siguiente modo: "\StorageCard\<Nombre de archivo>".
Si se indica un directorio en lugar de un solo archivo CSV, se importar√°n todos los archivos del
directorio en cuesti√≥n.
N√∫mero/nombre de registro
N√∫mero o nombre del registro de receta que se importar√°. Introduzca "0" si desea importar
todos los registros de receta.
Sobrescribir
Determina si se deben sobrescribir los registros de receta existentes:
0 (hmiOverwriteForbidden) = No: Los registros de receta no se sobrescriben. El proceso de
importaci√≥n no se ejecuta.
1 (hmiOverwriteAlways) = S√≠: Los registros de receta se sobrescribir√°n sin consulta previa.
2 (hmiOverwriteWithConfirmation) = Previa confirmaci√≥n: Los registros de receta se
sobrescribir√°n tras haberse confirmado la consulta de seguridad.
Emitir aviso de estado
Determina si se debe emitir un aviso de estado una vez concluida la importaci√≥n:
0 (hmiOff) = Off: No emitir ning√∫n aviso de estado.
1 (hmiOn) = On: Emitir un aviso de estado.
Estado de procesamiento
Indica el estado de procesamiento de la funci√≥n de sistema. Utilice el valor de retorno p. ej.
para ejecutar otras funciones de sistema s√≥lo tras haber ejecutado correctamente esta funci√≥n:
2 = La funci√≥n de sistema se est√° ejecutando actualmente.
4 = La funci√≥n de sistema se ha ejecutado correctamente.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1685

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
12 = La funci√≥n de sistema no se ha ejecutado porque se ha producido un error.
Para el par√°metro puede utilizarse una sola variable HMI.
Verificar suma de verificaci√≥n
Determina si la suma de verificaci√≥n debe verificarse al realizar la importaci√≥n:
0 (hmiFalse) = No: La suma de verificaci√≥n no se verifica.
1 (hmiTrue) = S√≠: La suma de verificaci√≥n se verifica.

CargarRegistro
Descripci√≥n
Carga el registro de receta indicado del medio de almacenamiento del panel de operador a la
variable de receta. Utilice esta funci√≥n de sistema por ejemplo para visualizar un registro de
receta en la imagen de receta.
Active en la configuraci√≥n para sincronizar la receta la opci√≥n "Sincronizar visor de recetas y
variables de recetas". Si la opci√≥n est√° desactivada, la funci√≥n de sistema no tiene ning√∫n
efecto.

Utilizaci√≥n en la lista de funciones
CargarRegistro (N√∫mero/Nombre de receta, N√∫mero/Nombre de registro, Estado de
procesamiento)

Utilizaci√≥n en funciones definidas por el usuario
LoadDataRecord Recipe_number_or_name, Data_record_number_or_name, Confirmation,
Output_status_message, Processing_status
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
N√∫mero/nombre de receta
N√∫mero o nombre de la receta desde la que se cargar√° un registro.
N√∫mero/nombre de registro
N√∫mero o nombre del registro de receta que se cargar√°.
Estado de procesamiento
Indica el estado de procesamiento de la funci√≥n de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta funci√≥n:
2 = La funci√≥n de sistema se est√° ejecutando actualmente.
4 = La funci√≥n de sistema se ha ejecutado correctamente.

1686

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
12 = La funci√≥n de sistema no se ha ejecutado porque se ha producido un error.
Para el par√°metro puede utilizarse una sola variable HMI.

LeerRegistroDelControlador
Descripci√≥n
Transfiere el registro de receta indicado del controlador al medio de almacenamiento del panel
de operador.

Utilizaci√≥n en la lista de funciones
LeerRegistroDelControlador (N√∫mero/nombre de receta, N√∫mero/nombre de registro,
Sobrescribir, Emitir aviso de estado, Estado de procesamiento)

Utilizaci√≥n en funciones definidas por el usuario
GetDataRecordFromPLC Recipe_number_or_name, Data_record_number_or_name,
Overwrite, Output_status_message, Processing_status
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
N√∫mero/nombre de receta
N√∫mero o nombre de la receta de la que se deben transferir los registros.
N√∫mero/nombre de registro
N√∫mero o nombre del registro de receta que se debe transferir del controlador al medio de
almacenamiento del panel de operador.
Sobrescribir
Determina si se debe sobrescribir un registro de receta existente de igual nombre:
0 (hmiOverwriteForbidden) = No: El registro de receta no se sobrescribe. El proceso de
transferencia no se ejecuta.
1 (hmiOverwriteAlways) = S√≠: El registro de receta se sobrescribe sin consulta previa.
2 (hmiOverwriteWithPrompting) = Previa confirmaci√≥n: El registro de receta se sobrescribe
tras haberse confirmado la consulta de seguridad.
Emitir aviso de estado
Establece si se debe visualizar un aviso de estado una vez concluida la transferencia.
0 (hmiOff) = Off: No emitir ning√∫n aviso de estado.
1 (hmiOn) = On: Emitir un aviso de estado.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1687

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Estado de procesamiento
Indica el estado de procesamiento de la funci√≥n de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta funci√≥n:
2 = La funci√≥n de sistema se est√° ejecutando actualmente.
4 = La funci√≥n de sistema se ha ejecutado correctamente.
12 = La funci√≥n de sistema no se ha ejecutado porque se ha producido un error.
Para el par√°metro puede utilizarse una sola variable HMI.

Ejemplo de aplicaci√≥n
Debe transferirse un registro del controlador al medio de almacenamiento del panel de
operador por medio de una tecla.
Indicaciones relativas a la configuraci√≥n
Configure la funci√≥n de sistema "LeerRegistroDelControlador" asociada al evento "Pulsar" de
la tecla deseada. Transfiera los par√°metros siguientes:
N√∫mero/nombre de receta = 1
N√∫mero/nombre de registro = 1
Sobrescribir = 1
Emitir aviso de estado = 1
Si lo desea, puede indicar variables en lugar de constantes. Dependiendo de la configuraci√≥n,
el operador puede introducir los valores deseados en los campos E/S, o bien leerlos del
controlador. De este modo, el operador puede determinar qu√© registro de receta se transferir√°
del controlador.
Proceso en el panel de operador
La funci√≥n de sistema se ejecuta tras pulsar la tecla. Las constantes o variables se eval√∫an y
el primer registro de la receta 1 se transfiere del controlador al medio de almacenamiento del
panel de operador. Si dicho registro ya existe, se sobrescribe.
Despu√©s de la transferencia se visualiza un aviso de sistema.

LeerNombreDelRegistro
Descripci√≥n
Escribe los nombres de la receta indicada y del registro de receta indicado en las variables
especificadas.
Nota
Si la receta o el registro de receta no existe, se escriben comodines ("###") en las variables.

1688

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Nota
Como variables, solo se soportan variables internas o externas.

Utilizaci√≥n en la lista de funciones
LeerNombreDelRegistro (N√∫mero de receta, N√∫mero de registro, Nombre de receta, Nombre
de registro, Estado de procesamiento)

Utilizaci√≥n en funciones definidas por el usuario
GetDataRecordName Recipe_number, Data_record_number, Recipe_name,
Data_record_name, Processing_status
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
N√∫mero de receta
N√∫mero de la receta cuyo nombre se escribe en la variable indicada.
N√∫mero de registro
N√∫mero del registro de receta cuyo nombre se escribe en la variable indicada.
Nombre de receta
Variable en la que se escribe el nombre de la receta. La variable debe ser del tipo STRING.
Nombre de registro
Variable en la que se escribe el nombre del registro de receta. La variable debe ser del tipo
STRING.
Estado de procesamiento
Indica el estado de procesamiento de la funci√≥n de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta funci√≥n:
2 = La funci√≥n de sistema se est√° ejecutando actualmente.
4 = La funci√≥n de sistema se ha ejecutado correctamente.
12 = La funci√≥n de sistema no se ha ejecutado porque se ha producido un error.
Para el par√°metro puede utilizarse una sola variable HMI.

Ejemplo de aplicaci√≥n
Los nombres de la receta indicada y del registro de receta indicado se visualizan en el panel
de operador.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1689

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Configure las variables siguientes:
‚óè "RecNumber" del tipo INTEGER
‚óè "RecDataNumber" del tipo INTEGER
‚óè "RecName" del tipo STRING
‚óè "RecDataName" del tipo STRING
Configure un visor de recetas con las variables "RecNumber" para el n√∫mero de receta y
"RecDataNumber" para el n√∫mero de registro.
Asocie la funci√≥n de sistema "LeerNombreDelRegistro" al evento "Pulsar" de un bot√≥n y
transfiera los par√°metros siguientes:
‚óè N√∫mero de receta: RecNumber
‚óè N√∫mero de registro: RecDataNumber
‚óè Nombre de receta: RecName
‚óè Nombre de registro: RecDataName
Configure dos campos de salida y as√≥cielos a las variables "RecName" y "RecDataName".
Seleccione un n√∫mero de receta y un n√∫mero de registro en el visor de recetas. La funci√≥n de
sistema se ejecutar√° en cuanto se pulse el bot√≥n y los nombres de la receta y del registro de
receta se visualizar√°n en los dos campos de salida.

LeerVariablesDeRegistroDelControlador
Descripci√≥n
Transfiere a las variables de receta los valores del registro de receta cargado en el
controlador.
Utilice esta funci√≥n de sistema p. ej. en el modo de aprendizaje (Teach-In) en una m√°quina.

Utilizaci√≥n en la lista de funciones
LeerVariablesDeRegistroDelControlador (N√∫mero/Nombre de receta, Estado de
procesamiento)

Utilizaci√≥n en funciones definidas por el usuario
GetDataRecordTagsFromPLC Recipe_number_or_name, Processing_status
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
N√∫mero/nombre de receta
N√∫mero o nombre del registro de receta cuyos valores se escriben del controlador a la variable.

1690

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Estado de procesamiento
Indica el estado de procesamiento de la funci√≥n de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta funci√≥n:
2 = La funci√≥n de sistema se est√° ejecutando actualmente.
4 = La funci√≥n de sistema se ha ejecutado correctamente.
12 = La funci√≥n de sistema no se ha ejecutado porque se ha producido un error.
Para el par√°metro puede utilizarse una sola variable HMI.

BorrarRegistro
Descripci√≥n
Borra un registro de receta.
Es posible borrar varios registros en una o varias recetas.

Utilizaci√≥n en la lista de funciones
BorrarRegistro (N√∫mero/nombre de receta, N√∫mero/nombre de registro, Confirmaci√≥n, Emitir
aviso de estado, Estado de procesamiento)

Utilizaci√≥n en funciones definidas por el usuario
ClearDataRecord
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
N√∫mero/nombre de receta
N√∫mero o nombre de la receta de la que se deben borrar los registros. Indique "0" si desea
borrar registros de todas las recetas disponibles.
N√∫mero/nombre de registro
N√∫mero o nombre del registro de receta que se borrar√°. Indique "0" si desea borrar todos los
registros de receta.
Confirmaci√≥n
Determina si el operador debe confirmar el borrado:
0 (hmiOff) = Off: El proceso de borrado se inicia sin confirmaci√≥n.
1 (hmiOn) = On: El inicio del proceso de borrado debe confirmarse.
Emitir aviso de estado
Determina si se debe emitir un aviso de estado una vez concluido el borrado:

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1691

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
0 (hmiOff) = Off: No emitir ning√∫n aviso de estado.
1 (hmiOn) = On: Emitir un aviso de estado.
Estado de procesamiento
Indica el estado de procesamiento de la funci√≥n de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta funci√≥n:
2 = La funci√≥n de sistema se est√° ejecutando actualmente.
4 = La funci√≥n de sistema se ha ejecutado correctamente.
12 = La funci√≥n de sistema no se ha ejecutado porque se ha producido un error.
Para el par√°metro puede utilizarse una sola variable HMI.

BorrarRegistroMemoria
Descripci√≥n
Borra todos los registros de receta del medio de almacenamiento indicado.

Utilizaci√≥n en la lista de funciones
BorrarRegistroMemoria (Ubicaci√≥n, Tras confirmar, Emitir aviso de estado, Estado de
procesamiento)

Utilizaci√≥n en funciones definidas por el usuario
ClearDataRecordMemory Storage_location, Confirmation, Output_status_message,
Processing_status
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Ubicaci√≥n
Determina la ubicaci√≥n:
0 (hmiFlashMemory) = Memoria flash: Memoria flash interna del panel de operador
1 (hmiStorageCard) = Storage Card
2 (hmiStorageCard2) = Storage Card 2
3 (hmiStorageCard3) = Storage Card MultiMediaCard
4 (hmiStorageCard4) = Storage Card USB
Tras confirmar
Determina si el operador debe confirmar el borrado:
0 (hmiOff) = Off: El proceso de borrado se inicia sin confirmaci√≥n.

1692

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
1 (hmiOn) = On: El inicio del proceso de borrado debe confirmarse.
Emitir aviso de estado
Determina si se debe emitir un aviso de estado una vez concluido el borrado:
0 (hmiOff) = Off: No emitir ning√∫n aviso de estado.
1 (hmiOn) = On: Emitir un aviso de estado.
Estado de procesamiento
Indica el estado de procesamiento de la funci√≥n de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta funci√≥n:
2 = La funci√≥n de sistema se est√° ejecutando actualmente.
4 = La funci√≥n de sistema se ha ejecutado correctamente.
12 = La funci√≥n de sistema no se ha ejecutado porque se ha producido un error.
Para el par√°metro puede utilizarse una sola variable HMI.

VisorDeRecetasRegistroNuevo
Descripci√≥n
Crea un registro nuevo en el visor de recetas visualizado.

Utilizaci√≥n en la lista de funciones
VisorDeRecetasRegistroNuevo (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de recetas en el que se debe crear el nuevo registro.

VisorDeRecetasLeerRegistroDelControlador
Descripci√≥n
Transfiere el registro cargado en el controlador al panel de operador y lo muestra en el visor de
recetas.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1693

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en la lista de funciones
VisorDeRecetasLeerRegistroDelControlador (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de recetas en el que se visualiza el registro transferido desde el controlador.

VisorDeRecetasBorrarRegistro
Descripci√≥n
Borra el registro que se visualiza en el visor de recetas.

Utilizaci√≥n en la lista de funciones
VisorDeRecetasBorrarRegistro (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de recetas en el que se debe borrar el registro visualizado.

VisorDeRecetasMen√∫
Descripci√≥n
Abre el men√∫ del visor de recetas simple indicado.
Utilice esta funci√≥n de sistema s√≥lo en un visor de recetas simple.

Utilizaci√≥n en la lista de funciones
VisorDeRecetasMen√∫ (Objeto de imagen)

1694

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de recetas en el que se debe abrir el men√∫.

VisorDeRecetasAbrir
Descripci√≥n
Muestra los valores de registro en el visor de recetas indicado o cambia al siguiente campo de
selecci√≥n. Esta funci√≥n de sistema no tiene ning√∫n efecto si el campo de selecci√≥n de los
valores del registro de receta se muestra en el panel de operador.
Orden de manejo de los campos de selecci√≥n en runtime:
‚óè Nombre de receta
‚óè Nombre de registro
‚óè Valores de registros de recetas
Utilice esta funci√≥n de sistema si ha configurado el visor de recetas simple. En el visor de
recetas simple se muestra en cada caso un solo campo de selecci√≥n en el panel de operador.
Utilice la funci√≥n de sistema "VisorDeRecetasAtr√°s" para ver el campo de selecci√≥n anterior.

Utilizaci√≥n en la lista de funciones
VisorDeRecetasAbrir (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de recetas en el que se debe ejecutar el comando.

Consulte tambi√©n
VisorDeRecetasAtr√°s (P√°gina 1698)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1695

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

VisorDeRecetasEscribirRegistroEnControlador
Descripci√≥n
Transfiere al controlador el registro de receta visualizado actualmente en el visor de recetas.

Utilizaci√≥n en la lista de funciones
VisorDeRecetasEscribirRegistroEnControlador (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de recetas desde el que se debe transferir el registro al controlador
conectado.

VisorDeRecetasGuardarRegistro
Descripci√≥n
Guarda el registro de receta visualizado actualmente en el visor de recetas.

Utilizaci√≥n en la lista de funciones
VisorDeRecetasGuardarRegistro (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de recetas en el que se debe guardar el registro.

VisorDeRecetasGuardarRegistroComo
Descripci√≥n
Guarda con otro nombre el registro que se visualiza en el visor de recetas.

1696

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en la lista de funciones
VisorDeRecetasGuardarRegistroComo (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Guarda con otro nombre o n√∫mero el registro que se visualiza en el visor de recetas.

VisorDeRecetasSincronizarRegistroConVariables
Descripci√≥n
Sincroniza los valores del registro que se visualiza en el visor de recetas con las variables de
receta correspondientes. Utilice esta funci√≥n de sistema s√≥lo en el visor de recetas avanzado.
Durante la sincronizaci√≥n, todos los valores del registro se escriben en las variables de receta
correspondientes.

Utilizaci√≥n en la lista de funciones
VisorDeRecetasSincronizarRegistroConVariables (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de recetas en el que se deben sincronizar los valores con las variables
correspondientes.

VisorDeRecetasCambiarNombreDeRegistro
Descripci√≥n
Cambia el nombre del registro seleccionado en el visor de recetas indicado.

Utilizaci√≥n en la lista de funciones
VisorDeRecetasCambiarNombreDeRegistro (Objeto de imagen)
Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1697

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de recetas en el que se debe cambiar el nombre del registro.

VisorDeRecetasMostrarTextoDeAyuda
Descripci√≥n
Muestra el tooltip configurado para el visor de recetas indicado.

Utilizaci√≥n en la lista de funciones
VisorDeRecetasMostrarTextoDeAyuda (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de recetas cuyo tooltip configurado se visualiza.

VisorDeRecetasAtr√°s
Descripci√≥n
Vuelve al campo de selecci√≥n anterior en el visor de recetas indicado.
Esta funci√≥n de sistema no tiene ning√∫n efecto si el campo de selecci√≥n de la receta se
muestra en el panel de operador. Orden de manejo de los campos de selecci√≥n en runtime:
‚óè Nombre de receta
‚óè Nombre de registro
‚óè Valores de registros de recetas
Utilice esta funci√≥n de sistema si ha configurado el visor de recetas simple. En el visor de
recetas simple se muestra en cada caso un solo campo de selecci√≥n en el panel de operador.
Utilice la funci√≥n de sistema "VisorDeRecetasAbrir" para ver los valores del registro de receta
o el siguiente campo de selecci√≥n.

1698

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en la lista de funciones
VisorDeRecetasAtr√°s (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del visor de recetas en el que se debe ejecutar el comando.

EscribirRegistroEnControlador
Descripci√≥n
Transfiere el registro de receta indicado directamente desde el soporte de datos del panel de
operador al controlador conectado con el panel de operador.
Nota
A este efecto no es necesario que los valores del registro de receta se visualicen en el panel
de operador.

Utilizaci√≥n en la lista de funciones
EscribirRegistroEnControlador (N√∫mero/nombre de receta, N√∫mero/nombre de registro,
Emitir aviso de estado, Estado de procesamiento)

Utilizaci√≥n en funciones definidas por el usuario
SetDataRecordToPLC Recipe_number_or_name, Data_record_number_or_name,
Output_status_message, Processing_status
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
N√∫mero/nombre de receta
N√∫mero o nombre de la receta desde la que se debe transferir un registro al controlador.
N√∫mero/nombre de registro
N√∫mero o nombre del registro de receta que se debe transferir al controlador.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1699

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Emitir aviso de estado
Establece si se debe visualizar un aviso de estado una vez concluida la transferencia.
0 (hmiOff) = Off: No emitir ning√∫n aviso de estado.
1 (hmiOn) = On: Emitir un aviso de estado.
Estado de procesamiento
Indica el estado de procesamiento de la funci√≥n de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta funci√≥n:
2 = La funci√≥n de sistema se est√° ejecutando actualmente.
4 = La funci√≥n de sistema se ha ejecutado correctamente.
12 = La funci√≥n de sistema no se ha ejecutado porque se ha producido un error.
Para el par√°metro puede utilizarse una sola variable HMI.

EscribirVariableDeRegistroEnControlador
Descripci√≥n
Transfiere los valores de las variables de receta al controlador. Las variables de receta
contienen los valores del registro que se visualiza en el panel de operador.

Utilizaci√≥n en la lista de funciones
EscribirVariableDeRegistroEnControlador (N√∫mero/nombre de receta, Estado de
procesamiento)

Utilizaci√≥n en funciones definidas por el usuario
SetDataRecordTagsToPLC Recipe_ number_or_name, Processing_status
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
N√∫mero/nombre de receta
N√∫mero o nombre de la receta desde la que se debe transferir un registro al controlador.
Estado de procesamiento
Indica el estado de procesamiento de la funci√≥n de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta funci√≥n:
2 = La funci√≥n de sistema se est√° ejecutando actualmente.
4 = La funci√≥n de sistema se ha ejecutado correctamente.
12 = La funci√≥n de sistema no se ha ejecutado porque se ha producido un error.

1700

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Para el par√°metro puede utilizarse una sola variable HMI.

DefinirEstadoVariableDeReceta
Descripci√≥n
Modifica el estado de las variables de receta de "online" a "offline" y viceversa.
Utilice esta funci√≥n de sistema si p.ej. desea realizar un ajuste fino de los valores de los
registros de receta al poner en marcha una m√°quina.

Utilizaci√≥n en la lista de funciones
DefinirEstadoVariableDeReceta (N√∫mero/nombre de receta, Estado, Emitir aviso de estado,
Estado de procesamiento)

Utilizaci√≥n en funciones definidas por el usuario
SetRecipeTags Recipe_number_or_name, Status, Output_status_message,
Processing_status
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
N√∫mero/nombre de receta
N√∫mero o nombre de la receta en la que est√° almacenado el registro.
Estado
Determina el estado de las variables de la receta:
0 (hmiOnline) = Online: Los cambios de valores en las variables de receta se transfieren de
inmediato al controlador conectado con el panel de operador.
1 (hmiOffline) = Offline: Los cambios de valores en las variables de la receta se transfieren al
controlador conectado con el panel de operador inmediatamente despu√©s de ejecutar p.ej. la
funci√≥n de sistema "EscribirVariablesDeRegistroEnControlador".
Emitir aviso de estado
Determina si se debe visualizar un aviso de estado despu√©s de guardar.
0 (hmiOff) = Off: No emitir ning√∫n aviso de estado.
1 (hmiOn) = On: Emitir un aviso de estado.
Estado de procesamiento
Indica el estado de procesamiento de la funci√≥n de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta funci√≥n:
2 = La funci√≥n de sistema se est√° ejecutando actualmente.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1701

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
4 = La funci√≥n de sistema se ha ejecutado correctamente.
12 = La funci√≥n de sistema no se ha ejecutado porque se ha producido un error.
Para el par√°metro puede utilizarse una sola variable HMI.

GuardarRegistro
Descripci√≥n
Guarda los valores actuales de las variables de receta como registro en el soporte de memoria
del panel de operador.
Utilice esta funci√≥n de sistema por ejemplo para guardar un registro de receta en la imagen de
recetas.

Utilizaci√≥n en la lista de funciones
GuardarRegistro (N√∫mero/nombre de receta, N√∫mero/nombre de registro, Sobrescribir, Emitir
aviso de estado, Estado de procesamiento)

Utilizaci√≥n en funciones definidas por el usuario
SaveDataRecord Recipe_number_or_name, Data_record_number_or_name, Overwrite,
Output_status_message, Processing_status
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
N√∫mero/nombre de receta
N√∫mero o nombre de la receta en la que se deben almacenar los registros.
N√∫mero/nombre de registro
N√∫mero o nombre del registro de la receta que se almacena. Si en la receta no existe ning√∫n
registro con este n√∫mero o nombre, se crear√° un nuevo registro independientemente del valor
del par√°metro "Sobrescribir".
Sobrescribir
Determina si se debe sobrescribir un registro de receta existente.
0 (hmiOverwriteForbidden) = No: El registro de receta no se sobrescribir√° ni tampoco se
guardar√°.
1 (hmiOverwriteAlways) = S√≠: El registro de receta se sobrescribir√° sin consulta previa.
2 (hmiOverwriteWithConfirmation) = Previa confirmaci√≥n: El registro de receta se sobrescribir√°
tras haberse confirmado la consulta de seguridad.

1702

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Emitir aviso de estado
Determina si se debe visualizar un aviso de estado despu√©s de guardar.
0 (hmiOff) = Off: No emitir ning√∫n aviso de estado.
1 (hmiOn) = On: Emitir un aviso de estado.
Estado de procesamiento
Indica el estado de procesamiento de la funci√≥n de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta funci√≥n:
2 = La funci√≥n de sistema se est√° ejecutando actualmente.
4 = La funci√≥n de sistema se ha ejecutado correctamente.
12 = La funci√≥n de sistema no se ha ejecutado porque se ha producido un error.
Para el par√°metro puede utilizarse una sola variable HMI.

Sistema
ActivarPantallaDeLimpieza
Descripci√≥n
Activa la pantalla de limpieza en el panel de operador. La pantalla del panel de operador se
desactiva por el periodo indicado.
Mientras est√° desactivada la pantalla del panel de operador, podr√° limpiarla sin activar
accidentalmente funciones de la pantalla t√°ctil.

Utilizaci√≥n en la lista de funciones
ActivarPantallaDeLimpieza (Per√≠odo)

Utilizaci√≥n en scripts de usuario
--

Par√°metros
Per√≠odo
Per√≠odo durante el que est√° desactivada la pantalla. El tiempo restante se indica mediante una
barra de progreso.
Rango de valores en segundos (de 10 a 300).
Nota
La funci√≥n de sistema ActivarPantallaDeLimpieza no puede ser simulada.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1703

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Consulte tambi√©n
CerrarSesi√≥n (P√°gina 1597)

AbrirExploradorDeArchivos
Descripci√≥n
Abre el cuadro de di√°logo de un explorador de archivos.
Dependiendo del modo, el usuario puede seleccionar un archivo o una carpeta.

Utilizaci√≥n en la lista de funciones
AbrirExploradorDeArchivos (M√°scara, Carpeta de inicio, Archivo, Navegaci√≥n atr√°s,
Navegaci√≥n adelante, Nueva carpeta, Ruta, Estado)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
M√°scara
Define la m√°scara para filtrar los archivos mostrados. Este par√°metro solamente se eval√∫a en
el modo "Archivo". Los distintos criterios de filtro se deben separar con ;. Ejemplo: *.htm;*.html
Carpeta de inicio
Define la carpeta con la que se inicia el di√°logo de selecci√≥n de archivos.
Archivo
Define el modo en el que se abre el di√°logo:
0 = modo para buscar una carpeta
1 = modo para buscar un archivo
Navegaci√≥n atr√°s
Define si el bot√≥n "Atr√°s" se puede manejar. Este bot√≥n permite una navegaci√≥n sencilla a la
√∫ltima carpeta visitada.
Navegaci√≥n adelante
Define si el bot√≥n "Adelante" se puede manejar. Este bot√≥n permite una navegaci√≥n sencilla
a la carpeta de orden superior.

1704

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Nueva carpeta
Define si el bot√≥n para crear una nueva carpeta se puede manejar.
Ruta
Contiene, tras cerrar el di√°logo, la ruta de la √∫ltima carpeta visitada.
Estado
Proporciona informaci√≥n sobre c√≥mo se cerr√≥ el di√°logo.
-1 = el di√°logo se ha cancelado.
0 = el di√°logo se ha cerrado con "Aceptar".

AbrirAdministradorDeTareas
Descripci√≥n
Muestra el administrador de tareas.
El administrador de tareas permite cambiar a otras aplicaciones abiertas en el panel de
operador.
Nota
El aspecto del administrador de tareas depende del sistema operativo instalado.

Utilizaci√≥n en la lista de funciones
AbrirAdministradorDeTareas

Utilizaci√≥n en funciones definidas por el usuario
OpenTaskManager
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del dispositivo".

Par√°metros
--

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1705

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Teclado
AbrirTecladoDePantalla
Descripci√≥n
Muestra u oculta el teclado de pantalla.
El teclado de pantalla se mantiene abierto hasta que se cierra expresamente. De este modo
tambi√©n es posible utilizarlo en otras aplicaciones.

Utilizaci√≥n en la lista de funciones
AbrirTecladoDePantalla (Representaci√≥n)

Utilizaci√≥n en funciones definidas por el usuario
OpenScreenKeyboard Display_mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Representaci√≥n
Determina si la ventana con el teclado de pantalla se abre minimizada o maximizada:
0 (hmiScreenKeyboardMinimized) = Minimizada
1 (hmiScreenKeyboardMaximized) = Maximizada

Manejo del teclado para objetos de imagen
ObjetoDeImagenCursorAbajo
Descripci√≥n
Hace que el cursor se desplace por l√≠neas hacia abajo en la tabla del objeto de imagen
indicado.
Esta funci√≥n de sistema se puede utilizar con los objetos de imagen indicados a continuaci√≥n:
‚óè Visor de usuarios
‚óè Visor de avisos
‚óè Visor de recetas
‚óè Visor de parte de programa NC
‚óè Visor de c√≥digo PLC

1706

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en la lista de funciones
ObjetoDeImagenCursorAbajo (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del objeto de imagen en el que se ejecuta la funci√≥n de la tecla.

ObjetoDeImagenCursorArriba
Descripci√≥n
Hace que el cursor se desplace por l√≠neas hacia arriba en la tabla del objeto de imagen
indicado.
Esta funci√≥n de sistema se puede utilizar con los objetos de imagen indicados a continuaci√≥n:
‚óè Visor de usuarios
‚óè Visor de avisos
‚óè Visor de recetas
‚óè Visor de parte de programa NC
‚óè Visor de c√≥digo PLC

Utilizaci√≥n en la lista de funciones
ObjetoDeImagenCursorArriba (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del objeto de imagen en el que se ejecuta la funci√≥n de la tecla.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1707

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

ObjetoDeImagenCursorDerecha
Descripci√≥n
Hace que el cursor se desplace por l√≠neas hacia la derecha en el objeto de imagen indicado.

Utilizaci√≥n en la lista de funciones
ObjetoDeImagenCursorIzquierda (Objeto de imagen)

Utilizaci√≥n en scripts de usuario
-

Par√°metros
Objeto de imagen
Nombre del objeto de imagen en el que se ejecuta el comando.

ObjetoDeImagenAvanzarP√°gina
Descripci√≥n
Hace que el cursor se desplace por p√°ginas hacia abajo en la tabla del objeto de imagen
indicado.
Esta funci√≥n de sistema se puede utilizar con los objetos de imagen indicados a continuaci√≥n:
‚óè Visor de usuarios
‚óè Visor de avisos
‚óè Visor de recetas
‚óè Visor de parte de programa NC

Utilizaci√≥n en la lista de funciones
ObjetoDeImagenAvanzarP√°gina (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del objeto de imagen en el que se ejecuta la funci√≥n de la tecla.

1708

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

ObjetoDeImagenRetrocederP√°gina
Descripci√≥n
Hace que el cursor se desplace por p√°ginas hacia arriba en la tabla del objeto de imagen
indicado.
Esta funci√≥n de sistema se puede utilizar con los objetos de imagen indicados a continuaci√≥n:
‚óè Visor de usuarios
‚óè Visor de avisos
‚óè Visor de recetas
‚óè Visor de parte de programa NC

Utilizaci√≥n en la lista de funciones
ObjetoDeImagenRetrocederP√°gina (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del objeto de imagen en el que se ejecuta la funci√≥n de la tecla.

ObjetoImagenCursorIzquierda
Descripci√≥n
Hace que el cursor se desplace por l√≠neas hacia la izquierda en el objeto de imagen indicado.

Utilizaci√≥n en la lista de funciones
ObjetoImagenCursorIzquierda (Objeto de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Objeto de imagen
Nombre del objeto de imagen en el que se ejecuta el comando.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1709

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

AvanzarP√°gina
Descripci√≥n
Ejecuta la funci√≥n de tecla <Av P√°g> en el panel de operador.
Esta funci√≥n de sistema s√≥lo se puede utilizar para teclas de funci√≥n.

Utilizaci√≥n en la lista de funciones
AvanzarP√°gina

Utilizaci√≥n en funciones definidas por el usuario
PageDown
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del dispositivo".

Par√°metros
-

RetrocederP√°gina
Descripci√≥n
Ejecuta la funci√≥n de tecla <ReP√°g> en el panel de operador.
Esta funci√≥n de sistema s√≥lo se puede utilizar para teclas de funci√≥n y para tareas con
disparador temporal.

Utilizaci√≥n en la lista de funciones
RetrocederP√°gina

Utilizaci√≥n en funciones definidas por el usuario
PageUp
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del dispositivo".

Par√°metros
-

1710

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

IrAInicio
Descripci√≥n
Ejecuta la funci√≥n de tecla <Inicio> en el panel de operador.
Utilice esta funci√≥n de sistema si la versi√≥n est√°ndar del panel de operador no dispone de esta
funcionalidad.
Esta funci√≥n de sistema s√≥lo se puede utilizar para teclas de funci√≥n.

Utilizaci√≥n en la lista de funciones
IrAInicio

Utilizaci√≥n en funciones definidas por el usuario
GoToHome
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del dispositivo".

Par√°metros
--

IrAFin
Descripci√≥n
Ejecuta la funci√≥n de tecla <Fin> en el panel de operador.
Utilice esta funci√≥n de sistema si la versi√≥n est√°ndar del panel de operador no dispone de esta
funcionalidad.
Esta funci√≥n de sistema s√≥lo se puede utilizar para teclas de funci√≥n.

Utilizaci√≥n en la lista de funciones
IrAFin

Utilizaci√≥n en funciones definidas por el usuario
GoToEnd
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del dispositivo".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1711

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
--

MostrarBloqueEnTIAPortal
Descripci√≥n
Cambia del visor de avisos o de la vista general de GRAPH al c√≥digo afectado del proyecto
seleccionado en el sistema de ingenier√≠a. El cambio del visor de avisos al proyecto en el TIA
Portal permite seguir analizando el c√≥digo del programa, p. ej., para buscar un contacto que
falta en el enclavamiento.
Si desea utilizar la funci√≥n de sistema para pasar al TIA Portal dispone de las siguientes
opciones:
‚óè Desde el visor de avisos
Seleccione un aviso y salte al lugar correspondiente en el TIA Portal.
La funci√≥n de sistema se puede configurar en un objeto de imagen, p. ej. en un bot√≥n. Al
hacer clic en el bot√≥n, el sistema tendr√° en cuenta el contexto necesario y, tras saltar al
Engineering System, se mostrar√° autom√°ticamente el punto en cuesti√≥n del c√≥digo.
‚óè Desde la vista general de GRAPH
Seleccione el visor de etapas de la vista de GRAPH y salte al bloque de funci√≥n
correspondiente en el ingenier√≠a.
Para poder saltar al TIA Portal, la funci√≥n de sistema debe estar configurada en la
correspondiente vista general de GRAPH. La funci√≥n de sistema se configura en el evento
"Hacer clic" de la vista general de GRAPH. Al hacer clic en el visor de etapas de la vista
general de GRAPH se muestra autom√°ticamente el lugar correspondiente en el c√≥digo del
programa.
Con el par√°metro Protecci√≥n contra escritura se establece el nivel de permiso con el que se
podr√° activar el cambio al Engineering System.

Nota
Restricciones para saltar al TIA Portal
El sistema de ingenier√≠a no se abre en los casos siguientes:
‚óè El proyecto que debe abrirse contiene modificaciones que no se han guardado todav√≠a.
‚óè WinCC Runtime Advanced se ejecuta en modo de simulaci√≥n y se modifica el modo (p. ej.
del modo de escritura al de lectura)

1712

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Nota
Salto al mismo proyecto desde la simulaci√≥n
Se ha abierto un proyecto en el TIA Portal y se he iniciado una simulaci√≥n. Si desde este
proyecto se desea abrir ahora, usando la funci√≥n de sistema MostrarBloqueEnTIAPortal,el
mismo proyecto en modo de lectura, entonces es necesario cerrar previamente la simulaci√≥n.
No se soporta la posibilidad de saltar, desde la simulaci√≥n, al mismo proyecto en modo de
lectura.
Soluci√≥n: Inicie runtime y abra de nuevo el proyecto en modo de lectura.

Nota
Utilizaci√≥n con SINUMERIK y aparatos FANUC
No se recomienda el uso de la funci√≥n de sistema "MostrarBloqueEnTIAPortal" junto con el
paquete opcional "SINUMERIK", ya que en interacci√≥n con los controles SINUMERIK pueden
presentarse problemas de representaci√≥n.

Utilizaci√≥n en la lista de funciones
MostrarBloqueEnTIAPortal (protecci√≥n contra escritura, ruta del proyecto TIA Portal)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Protecci√≥n contra escritura
Determina si el proyecto se abrir√° en modo de solo lectura.
TRUE (est√°ndar): TIA Portal se abre en modo de lectura, y el usuario no puede realizar
cambios.
FALSE: TIA Portal se abre con permiso de lectura y escritura.
Como alternativa, utilice una variable HMI booleana para controlar este par√°metro.
Ruta del proyecto en TIA Portal
Ruta y nombre del archivo de proyecto en TIA Portal al que se cambiar√° desde el visor de
avisos.

Consulte tambi√©n
Funciones de sistema para Runtime Advanced (P√°gina 1549)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1713

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

9.11.1.3

Funciones de sistema

Otras funciones
PararRuntime
Descripci√≥n
Sale del software runtime y, con ello, del proyecto que se est√° ejecutando en el panel de
operador.

Utilizaci√≥n en la lista de funciones
PararRuntime (Modo)

Utilizaci√≥n en funciones definidas por el usuario
StopRuntime Mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Modo
Determina si al finalizar el software runtime tambi√©n se debe cerrar el sistema operativo.
0 (hmiStopRuntime) = Runtime: No cerrar el sistema operativo
1 (hmiStopRuntimeAndOperatingSystem) = Runtime y sistema operativo: Cerrar el sistema
operativo (no en Windows CE)

Ejemplo
El siguiente c√≥digo de programa cierra Runtime y el sistema operativo.

{
//Stop runtime and shutdown
StopRuntime (hmiStopRuntimeAndOperationSystem);
}

El valor de retorno guardado puede procesarse en el c√≥digo subsiguiente.

1714

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

ConsultarTexto
Descripci√≥n
Lee el registro de una lista de textos. El resultado depende del valor y del idioma de runtime
seleccionado. El resultado se guarda en una variable del tipo "String".

Utilizaci√≥n en la lista de funciones
Consultar texto (Texto de salida, √çndice, Idioma, Lista de textos)

Utilizaci√≥n en funciones definidas por el usuario
LookupText Output_text, Index, Language, Text_list
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Texto de salida
Variable en la que se escribe el resultado.
√çndice
Variable que determina el valor del registro de la lista.
Idioma
Determina en qu√© idioma de runtime se debe leer el registro de la lista.
‚óè Idioma de runtime
Abreviatura de idioma conforme a la referencia VBScript, p. ej. "de-DE" para alem√°n
(Alemania) o "en-ES" para ingl√©s (EE UU). La selecci√≥n depende de los idiomas runtime
activados.
‚óè Variable
Variable que contiene el idioma. El idioma de runtime se introduce en forma de valor
decimal del indicador de pa√≠s, p. ej. 1031 para alem√°n est√°ndar, 1033 para ingl√©s de
EE UU. Encontrar√° m√°s informaci√≥n al respecto en los conceptos b√°sicos de VBScript bajo
el tema "Cuadro de ID de configuraci√≥n regional (LCID)".
‚óè N√∫mero entero
El n√∫mero que corresponde al orden de los idiomas de runtime en el cambio de idioma.
La selecci√≥n depende de los idiomas de runtime activados, p. ej., "0" para el idioma que
aparece al iniciar runtime por primera vez. Encontrar√° m√°s informaci√≥n al respecto en el
apartado "Idiomas en runtime".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1715

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Lista de textos
Establece la lista de textos. El registro se lee de la lista de textos.

Consulte tambi√©n
Dependencia del panel de operador (P√°gina 1520)

Administraci√≥n de usuarios
ExportarImportarAdministraci√≥nDeUsuarios
Descripci√≥n
Exporta todos los usuarios de la administraci√≥n de usuarios del proyecto activo en este
momento al archivo indicado, o bien importa los usuarios del archivo indicado al proyecto
activo en este momento.
En la administraci√≥n de usuarios se guardan usuarios, sus contrase√±as y permisos.
Durante la importaci√≥n se sobrescriben todos los usuarios. Los usuarios importados son
v√°lidos desde el primer momento.
Nota
En los paneles de operador con una versi√≥n de runtime anterior a V14 no se soporta la
exportaci√≥n e importaci√≥n de la administraci√≥n de usuarios de V14.

Utilizaci√≥n en la lista de funciones
ExportarImportarAdministraci√≥nDeUsuarios (Nombre de archivo, Direcci√≥n)

Utilizaci√≥n en funciones definidas por el usuario
ExportImportUserAdministration File_name, Direction
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

1716

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Nombre de archivo
Nombre del archivo que contiene las contrase√±as o en el que se guardar√°n las contrase√±as.
Introduzca tambi√©n la ruta y la extensi√≥n del archivo (*.txt), p. ej. "C:\TEMP\Passwords.txt".
Nota
Si utiliza una tarjeta de memoria como ubicaci√≥n, introduzca la ubicaci√≥n del siguiente modo:
"\StorageCard\<Nombre de archivo>".
Direcci√≥n
Determina si las contrase√±as se exportar√°n o importar√°n:
0 (hmiExport) = Exportaci√≥n: Las contrase√±as se exportan.
1 (hmiImport) = Importaci√≥n: Las contrase√±as se importan.

MostrarDi√°logoInicioSesi√≥n
Descripci√≥n
Abre un cuadro de di√°logo en el panel de operador con el que el usuario puede iniciar una
sesi√≥n en el panel de operador.

Utilizaci√≥n en la lista de funciones
MostrarDi√°logoInicioSesi√≥n

Utilizaci√≥n en scripts de usuario
ShowLogonDialog
Utilizable, siempre que el dispositivo configurado soporte scripts de usuario. Encontrar√° m√°s
informaci√≥n en "Funciones de sistema para Runtime Professional (P√°gina 1554)".

Par√°metros
--

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1717

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

C√°lculo
IncrementarVariable
Descripci√≥n
Suma el valor indicado al valor de la variable.
X=X+a
Nota
La funci√≥n de sistema utiliza la misma variable como valor de entrada y como valor de salida.
Si utiliza esta funci√≥n de sistema para convertir un valor, deber√° utilizar una variable auxiliar.
A la variable auxiliar se le puede asignar un valor con la funci√≥n de sistema "DefinirVariable".
Si se asocia la funci√≥n de sistema a eventos de un aviso y la variable no se utiliza en la imagen
actual, no se garantiza que el valor real de la variable se utilice en el controlador. Ello se puede
mejorar activando el modo de adquisici√≥n "C√≠clico continuo".

Utilizaci√≥n en la lista de funciones
IncrementarVariable (Variable, Valor)

Utilizaci√≥n en funciones definidas por el usuario
IncreaseTag Tag, Value
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n en "Funciones de sistema para Runtime Professional
(P√°gina 1554)".

Par√°metros
Variable
Variable a la que se debe agregar el valor indicado.
Valor
Valor que se suma.

1718

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente c√≥digo de programa aumenta el valor de la variable varX la cantidad que indica la
variable value. El valor introducido se guarda en la variable old_value y se muestra junto con
el nuevo valor varX.

{
BYTE varX;
BYTE value;
//user input
...
BYTE old_value = varX;
//Increase tag
IncreaseTag(varX, value);
//print original value and function result
printf ("User input: %i\r\n, Result of function IncreaseTag: %i\r\n", old_value, varX);
...
}

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

InvertirEscalaLineal
Descripci√≥n
Asigna a la variable X un valor que se calcula a partir del valor de la variable Y indicada
mediante la funci√≥n lineal X = (Y - b) / a.
Las variables X e Y no pueden ser id√©nticas. Esta funci√≥n de sistema es la funci√≥n inversa de
"EscalaLineal".
Nota
Las variables X e Y no pueden ser id√©nticas. Si desea convertir una variable en S√≠ misma, debe
utilizar una variable auxiliar
Con la funci√≥n de sistema "DefinirVariable" se puede asignar a la variable auxiliar el valor de
la variable que se va convertir.

Utilizaci√≥n en la lista de funciones
InvertirEscalaLineal (X, Y, b, a)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1719

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en funciones definidas por el usuario
InverseLinearScaling X, Y, b, a
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
X
Variable a la que se asigna el valor calculado en la ecuaci√≥n lineal.
Y
Variable cuyo valor se utiliza para el c√°lculo.
b
Valor que se va a restar.
a
Valor por el que se divide.

Ejemplo
El siguiente c√≥digo de programa asigna un valor a la variable varX con la funci√≥n
InverseLinearScaling.

{
BYTE
BYTE
BYTE
BYTE

varX;
Yvalue = 10;
bvalue = 3;
avalue = 4;

//Inverse linear scaling
InverseLinearScaling (varX, Yvalue, bvalue, avalue);
printf ("varX = %d\r\n, varX);
...
}

El valor de retorno guardado puede procesarse en el c√≥digo subsiguiente.

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

1720

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

EscalaLineal
Descripci√≥n
Asigna a la variable Y un valor que se calcula a partir del valor de las variables X indicadas
mediante la funci√≥n lineal Y = (a * X) + b.
La funci√≥n inversa es la funci√≥n de sistema "InvertirEscalaLineal".
Nota
Las variables X e Y no pueden ser id√©nticas. Si desea convertir una variable en S√≠ misma, debe
utilizar una variable auxiliar
Con la funci√≥n de sistema "DefinirVariable" se puede asignar a la variable auxiliar el valor de
la variable que se va convertir.

Utilizaci√≥n en la lista de funciones
EscalaLineal (Y, a, X, b)

Utilizaci√≥n en funciones definidas por el usuario
LinearScaling Y, a, X, b
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Y
Variable a la que se asigna el valor calculado en la ecuaci√≥n lineal.
a
Valor con el que se multiplica.
X
Variable cuyo valor se utiliza para el c√°lculo.
b
Valor que se suma.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1721

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente c√≥digo de programa asigna con la funci√≥n LinearScaling un valor a la variable Yvar.

{
BYTE
BYTE
BYTE
BYTE

Yvar;
Xvalue = 10;
bvalue = 3;
avalue = 4;

// linear scaling
LinearScaling ( Yvar, avalue, Xvalue, bvalue);
printf ("Yvar = %d\r\n, Yvar);
...
}

El valor de retorno guardado puede procesarse en el c√≥digo subsiguiente.

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

DefinirVariable
Descripci√≥n
Asigna un valor nuevo a la variable indicada.
Nota
Dependiendo del tipo de variable, con esta funci√≥n de sistema puede asignar cadenas de
caracteres y n√∫meros.

Utilizaci√≥n en la lista de funciones
DefinirVariable (Variable, Valor)

Utilizaci√≥n en funciones definidas por el usuario
SetTag Tag, Value
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

1722

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Variable
Variable a la que se debe asignar el valor indicado.
Valor
Valor que se asigna a la variable indicada.
Nota
La funci√≥n de sistema "DefinirVariable" se ejecuta √∫nicamente tras establecer una conexi√≥n.

Ejemplo
El siguiente c√≥digo de programa ajusta con la funci√≥n SetTag el valor de las variables
gs_tag_bit a TRUE y guarda el valor de retorno en la variable ok.

{
BOOL ok;
BOOL bvalue;
//Set the tag to true
ok = SetTag("gs_tag_bit", TRUE);
//error handling
if(ok)
{
// succeeded
printf ( "Function has run through.\r\n" );
bvalue = GetTagBit("gs_tag_bit");
printf ("Value of gs_tag_bit: %d\r\n", bvalue);
}
else
{
// failed
printf ( "Error - function failed." );
}
...
}

El valor de retorno guardado puede procesarse en el c√≥digo subsiguiente.

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1723

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

DefinirVariableV√≠aPropiedad
Descripci√≥n
Define un valor de variable por medio del valor de una propiedad de objeto. La modificaci√≥n se
registra adicionalmente en el sistema de avisos.

Utilizaci√≥n en la lista de funciones
DefinirVariableV√≠aPropiedad (nombre de variable, nombre de imagen, objeto de imagen,
nombre de la propiedad, con o sin aviso de operador)

Utilizaci√≥n en funciones definidas por el usuario
SetTagByProperty Tag_name, Screen_name, Screen_object, Property_name,
With_or_without_operator_event
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n en "Funciones de sistema para Runtime Professional
(P√°gina 1554)".

Par√°metros
Nombre de variable
Nombre de la variable cuyo valor se define por medio de la propiedad de objeto.
Nombre de imagen
Nombre de la imagen en la que est√° contenido el objeto.
Objeto de imagen
Nombre del objeto cuya propiedad proporciona el valor de variable.
Nombre de la propiedad
Nombre de la propiedad que proporciona el valor de variable.
Con o sin aviso de operador
0 (hmiWithoutOperatorEvent) = Sin aviso de operador
1 (hmiWithOperatorEvent) = Con aviso de operador

1724

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente c√≥digo de programa devuelve el valor del texto seleccionado al hacer clic en un
cuadro combinado.

{
char* rt_value;
SetTagByProperty (rt_value, screenName, objectName, "SelectedText",
hmiWithoutOperatorEvent);
...
}

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

DefinirVariableIndirectamente
Descripci√≥n
Escribe un valor en una variable direccionada indirectamente. La variable transferida como
par√°metro de salida contiene el nombre de una segunda variable, cuyo valor es modificado por
la funci√≥n. Mediante un aviso de operador se puede documentar la modificaci√≥n en el sistema
de avisos.

Utilizaci√≥n en la lista de funciones
DefinirVariableIndirectamente (variable, valor, con o sin aviso de operador)

Utilizaci√≥n en funciones definidas por el usuario
SetTagIndirect Tag_name, Value, With_or_without_operator_event
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n en "Funciones de sistema para Runtime Professional
(P√°gina 1554)".

Par√°metros
Nombre de variable
Nombre de una variable de string que contiene el nombre de una variable cuyo valor debe
modificarse.
Valor
Valor que se debe escribir.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1725

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Con o sin aviso de operador
0 (hmiWithoutOperatorEvent) = Sin aviso de operador
1 (hmiWithOperatorEvent) = Con aviso de operador

Ejemplo
El siguiente c√≥digo de programa escribe el valor "value" en la variable Tag3.

{
int value;
SetTag ("IndirectWrite", "Tag3");
SetTagIndirect ("IndirectWrite", "value", hmiWithoutOperatorEvent);
...
}

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

DefinirVariableIndirectamenteV√≠aPropiedad
Descripci√≥n
Escribe el valor de una propiedad de objeto en una variable direccionada indirectamente. La
variable transferida como par√°metro de salida contiene el nombre de una segunda variable,
cuyo valor es modificado por la funci√≥n. Mediante un aviso de operador se puede documentar
la modificaci√≥n en el sistema de avisos.

Utilizaci√≥n en la lista de funciones
DefinirVariableIndirectamenteV√≠aPropiedad (Nombre de variable, Nombre de imagen, Objeto
de imagen, Nombre de la propiedad, Con o sin aviso de operador)

Utilizaci√≥n en funciones definidas por el usuario
SetTagIndirectByProperty Tag_name, Screen_name, Screen_object, Property_name,
With_or_without_operator_event
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n en "Funciones de sistema para Runtime Professional
(P√°gina 1554)".

1726

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Nombre de variable
Nombre de una variable de string que contiene el nombre de una variable cuyo valor debe
modificarse.
Nombre de imagen
Nombre de la imagen en la que est√° contenido el objeto.
Objeto de imagen
Nombre del objeto cuya propiedad devuelve el valor.
Nombre de la propiedad
Nombre de la propiedad que devuelve el valor.
Con o sin aviso de operador
0 (hmiWithoutOperatorEvent) = Sin aviso de operador
1 (hmiWithOperatorEvent) = Con aviso de operador

Ejemplo
El siguiente c√≥digo de programa escribe el valor de la propiedad de objeto "Color de fondo" en
la variable Tag2.

{
SetTag ("IndirectWrite", "Tag2");
SetTagIndirectByProperty ("IndirectWrite", screenName, objectName, "BackColor",
hmiWithoutOperatorEvent);
...
}

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

DefinirVariableIndirectaV√≠aVariableIndirecta
Descripci√≥n
Escribe el valor de una variable direccionada indirectamente en una variable direccionada
indirectamente. La variable transferida como par√°metro de salida contiene el nombre de una
segunda variable, cuyo valor es modificado por la funci√≥n. La variable transferida como
par√°metro contiene el nombre de una segunda variable, cuyo valor se lee. Mediante un aviso
de operador se puede documentar la modificaci√≥n en el sistema de avisos.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1727

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en la lista de funciones
DefinirVariableIndirectaV√≠aVariableIndirecta (Nombre de variable, Nombre de variable, Con o
sin aviso de operador)

Utilizaci√≥n en funciones definidas por el usuario
SetTagIndirectByTagIndirect Tag_name, Source_tag_name, With_or_without_operator_event
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n en "Funciones de sistema para Runtime Professional
(P√°gina 1554)".

Par√°metros
Nombre de variable
Nombre de una variable de string que contiene el nombre de una variable cuyo valor debe
modificarse.
Nombre de variable
Nombre de la variable indirecta que proporciona el valor de variable.
Con o sin aviso de operador
0 (hmiWithoutOperatorEvent) = Sin aviso de operador
1 (hmiWithOperatorEvent) = Con aviso de operador

Ejemplo
El siguiente c√≥digo de programa escribe el valor de la variable "Tag4" en la variable "Tag2".

{
SetTag ("IndirectWrite", "Tag2");
SetTag ("IndirectRead", "Tag4");
SetTagIndirectByTagIndirect ("IndirectWrite", "IndirectRead");
...
}

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

1728

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

DefinirVariableV√≠aVariableIndirecta
Descripci√≥n
Escribe el valor de una variable direccionada indirectamente en una variable. La variable
transferida como par√°metro contiene el nombre de una segunda variable, cuyo valor se lee.
Mediante un aviso de operador se puede documentar la modificaci√≥n en el sistema de avisos.

Utilizaci√≥n en la lista de funciones
DefinirVariableV√≠aVariableIndirecta (nombre de variable, nombre de variable, con o sin aviso
de operador)

Utilizaci√≥n en funciones definidas por el usuario
SetTagByTagIndirect Tag_name, Source_tag_name, With_or_without_operator_event
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n en "Funciones de sistema para Runtime Professional
(P√°gina 1554)".

Par√°metros
Nombre de la variable
Nombre de la variable cuyo valor debe modificarse.
Nombre de variable
Nombre de una variable de string que contiene el nombre de una variable que devuelve el valor
de la variable.
Con o sin aviso de operador
0 (hmiWithoutOperatorEvent) = Sin aviso de operador
1 (hmiWithOperatorEvent) = Con aviso de operador

Ejemplo
El siguiente c√≥digo de programa escribe el valor de la variable Tag4 en la variable Tag1.

{
SetTag ("IndirectRead", "Tag4");
SetTagByTagIndirect ("Tag1", "IndirectRead", hmiWithoutOperatorEvent);
...
}

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1729

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

DefinirVariableConAvisoDeOperador
Descripci√≥n
Define el valor de una variable. La modificaci√≥n se registra adicionalmente en el sistema de
avisos.

Utilizaci√≥n en la lista de funciones
DefinirVariableConAvisoDeOperador (nombre de la variable, valor)

Utilizaci√≥n en funciones definidas por el usuario
SetTagWithOperatorEvent Tag_name, Value
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n en "Funciones de sistema para Runtime Professional
(P√°gina 1554)".

Par√°metros
Nombre de la variable
Nombre de la variable cuyo valor se define.
Valor
El valor que se escribe la variable.

Ejemplo
El siguiente c√≥digo de programa transfiere el valor de la variable "value" a la variable "result"
al hacer clic en cualquier tecla.

'Programming language: VBS
SetTagWithOperatorEvent result, value
...

//Programming language: C
{
SetTagWithOperatorEvent ("result", "value");
...
}

1730

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

ReducirVariable
Descripci√≥n
Resta el valor indicado del valor de la variable.
X=X-a
Nota
La funci√≥n de sistema utiliza la misma variable como valor de entrada y como valor de salida.
Si utiliza esta funci√≥n de sistema para convertir un valor, deber√° utilizar una variable auxiliar.
A la variable auxiliar se le puede asignar un valor con la funci√≥n de sistema "DefinirVariable".
Si se asocia la funci√≥n de sistema a eventos de un aviso y la variable no se utiliza en la imagen
actual, no se garantiza que el valor real de la variable se utilice en el controlador. Ello se puede
mejorar activando el modo de adquisici√≥n "C√≠clico continuo".

Utilizaci√≥n en la lista de funciones
DecrementarVariable (Variable, Valor)

Utilizaci√≥n en funciones definidas por el usuario
DecreaseTag Tag, Value
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n en "Funciones de sistema para Runtime Professional
(P√°gina 1554)".

Par√°metros
Variable
Variable de la que se debe restar el valor indicado.
Valor
Valor que se va a restar.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1731

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente c√≥digo de programa reduce el valor de la variable varX la cantidad que indica la
variable value. El valor introducido se guarda en la variable old_value y se muestra junto con
el nuevo valor varX.

{
BYTE varX;
BYTE value;
//user input
...
BYTE old_value = varX;
//Decrease tag
DecreaseTag(varX, value);
//print original value and function result
printf ("User input: %i\r\n, Result of function DecreaseTag: %i\r\n", old_value, varX);
...
}

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

Im√°genes
ActivarImagen
Descripci√≥n
Efect√∫a un cambio de imagen para visualizar la imagen indicada.
Para pasar de la imagen ra√≠z al √°rea permanente o viceversa, utilice la funci√≥n del sistema
"ActivarImagenConN√∫mero".

Utilizaci√≥n en la lista de funciones
ActivarImagen (Nombre de imagen, N√∫mero del objeto)

Utilizaci√≥n en funciones definidas por el usuario
ActivateScreen Screen_name, Object_number
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del dispositivo".

1732

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Nombre de imagen
Nombre de la imagen a la que se cambia.
N√∫mero del objeto
Elemento de manejo que se resalta en la imagen indicada despu√©s del cambio de imagen. El
n√∫mero del elemento de manejo se define mediante el orden de tabulaci√≥n durante la
configuraci√≥n.
Si indica "0":
‚óè Si al ejecutarse la funci√≥n de sistema est√° enfocada el √°rea permanente, esta permanecer√°
enfocada.
‚óè En cambio, si est√° resaltada la imagen ra√≠z, se destacar√° el primer elemento de manejo de
la imagen indicada.
Nota
Si la funci√≥n de sistema "ActivarImagen" se asocia al evento "Margen alcanzado", s√≥lo se
admite el valor 0 para el par√°metro "N√∫mero del objeto". El objeto activo no se establece
conforme al n√∫mero de objeto, sino seg√∫n la coordenada X del objeto activo antes del
cambio de imagen.

Ejemplo
El siguiente c√≥digo de programa activa la imagen "Screen_2" con la funci√≥n ActivateScreen,
p. ej., al pulsar un bot√≥n.

Sub ActivateScreen_2()
'Userdefined code
'' i. e. when pressing a button
ActivateScreen "Screen_2",0

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

ActivarImagenEnVentanaActual
Descripci√≥n
Efect√∫a un cambio de imagen en la ventana actual para visualizar la imagen indicada.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1733

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en la lista de funciones
ActivarImagenEnVentanaDeImagenActual (nuevo nombre de imagen)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Nuevo nombre de imagen
Nombre de la imagen que se muestra en la ventana de imagen.

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

ActivarImagenEnVentana
Descripci√≥n
Efect√∫a un cambio de imagen en la ventana indicada para visualizar la imagen indicada.

Utilizaci√≥n en la lista de funciones
ActivarImagenEnVentana (Nombre de imagen, Ventana de imagen, Nuevo nombre de imagen)

Utilizaci√≥n en funciones definidas por el usuario
ActivateScreenInScreenWindow Screen_name, Screen_window, New_screen_name
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n en "Funciones de sistema para Runtime Professional
(P√°gina 1554)".

Par√°metros
Nombre de imagen
Nombre de la imagen que se muestra en la ventana de imagen.
Ventana de imagen
Nombre de la ventana de imagen en la que se muestra la nueva imagen.
Nuevo nombre de imagen
Nombre de la nueva imagen que se muestra en la ventana de imagen.

1734

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente c√≥digo del programa activa la imagen "Screen_2" con la funci√≥n
ActivateScreenInScreenWindow al pulsar cualquier tecla.

{
// User defined code
// i.e. when pressing a button
ActivateScreenInScreenWindow (GetParentScreen(screenName),
GetParentScreenWindow(screenName), "Screen_2");
...
}

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

LeerImagenSuperior
Descripci√≥n
La funci√≥n determina el nombre de la imagen superior a partir de una ruta dada.

Utilizaci√≥n en la lista de funciones
LeerImagenSuperior (imagen)

Utilizaci√≥n en funciones definidas por el usuario
GetParentScreen Screen
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del dispositivo".

Par√°metros
Imagen
El par√°metro transferido Imagen debe tener la misma estructura que las rutas de imagen en el
sistema gr√°fico:
<nombre de imagen>.<nombre de ventana de imagen>:<nombre de imagen>.<nombre de
ventana de imagen>:<nombre de imagen>...

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1735

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Si en la lista de funciones utiliza la lista de objetos para definir el par√°metro, no se introducir√°
la ruta, sino solo el nombre de la imagen.
Nota
El signo "." se utiliza para diferenciar el nombre de la imagen del objeto de imagen. El signo ":"
se utiliza para la estructura jer√°rquica. Por tanto, para los nombres se deben utilizar
exclusivamente los separadores "-" y "_".

Valor de retorno
Nombre de la imagen superior

Principio
En una imagen "Screen_1" hay una ventana de imagen "Screenwindow_1". En la ventana de
imagen est√° la imagen "Screen_2" con la ventana de imagen "Screenwindow_2" etc.
Ruta de la imagen: Screen_1.Screenwindow_1:Screen_2.Screenwindow_2:Screen_3
GetParentScreen devuelve:
‚óè "Screen_2", cuando la funci√≥n de sistema se llama en la imagen "Screen_3"
‚óè "Screen_1", cuando la funci√≥n de sistema se llama en la imagen "Screen_2"
GetParentScreenwindow devuelve:
‚óè "Screenwindow_2", cuando la funci√≥n de sistema se llama en la imagen "Screen_3"
‚óè "Screenwindow_1", cuando la funci√≥n de sistema se llama en la imagen "Screen_2"

LeerVentanaDeImagenSuperior
Descripci√≥n
La funci√≥n determina el nombre de la ventana de imagen superior a partir de una ruta dada.

Utilizaci√≥n en la lista de funciones
LeerVentanaDeImagenSuperior (imagen)

Utilizaci√≥n en funciones definidas por el usuario
GetParentScreenWindow Screen
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del dispositivo".

1736

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Imagen
El par√°metro transferido Imagen debe tener la misma estructura que las rutas de imagen en el
sistema gr√°fico:
<nombre de imagen>.<nombre de ventana de imagen>:<nombre de imagen>.<nombre de
ventana de imagen>:<nombre de imagen>...
Si en la lista de funciones utiliza la lista de objetos para definir el par√°metro, no se introducir√°
la ruta, sino solo el nombre de la imagen.
Nota
El signo "." se utiliza para diferenciar el nombre de la imagen del objeto de imagen. El signo ":"
se utiliza para la estructura jer√°rquica. Por tanto, para los nombres se deben utilizar
exclusivamente los separadores "-" y "_".

Valor de retorno
Nombre de la ventana de imagen superior

Principio
En una imagen "Screen_1" hay una ventana de imagen "Screenwindow_1". En la ventana de
imagen est√° la imagen "Screen_2" con la ventana de imagen "Screenwindow_2" etc.
Ruta de la imagen: Screen_1.Screenwindow_1:Screen_2.Screenwindow_2:Screen_3
GetParentScreen devuelve:
‚óè "Screen_2", cuando la funci√≥n de sistema se llama en la imagen "Screen_3"
‚óè "Screen_1", cuando la funci√≥n de sistema se llama en la imagen "Screen_2"
GetParentScreenwindow devuelve:
‚óè "Screenwindow_2", cuando la funci√≥n de sistema se llama en la imagen "Screen_3"
‚óè "Screenwindow_1", cuando la funci√≥n de sistema se llama en la imagen "Screen_2"

DefinirPropiedadV√≠aPropiedad
Descripci√≥n
Define el valor de una propiedad de objeto por medio de otra propiedad de objeto.

Utilizaci√≥n en la lista de funciones
DefinirPropiedadV√≠aPropiedad (Nombre de imagen, Objeto, Nombre de la propiedad, DestinoNombre de imagen, Destino-Objeto de imagen, Destino Nombre de propiedad)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1737

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en funciones definidas por el usuario
SetPropertyByProperty Screen_name, Screen_object, Property_name,
Source_screen_name, Source_screen_object, Source_property_name
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n en "Funciones de sistema para Runtime Professional
(P√°gina 1554)".
Si desea definir una propiedad de una imagen mediante otra propiedad de imagen, los
par√°metros "Objeto" y "Objeto de destino" deben estar vac√≠os. Utilice para ello, p. ej., la sintaxis
siguiente:
SetPropertyByProperty Screen_name, Property_name, Source_screen_name,
Source_property_name

Par√°metros
Nombre de imagen
Nombre de la imagen en la que est√° contenido el objeto.
Objeto
Nombre del objeto del que se transfiere una propiedad al objeto de destino.
Nombre de la propiedad
Nombre de la propiedad cuyo valor se transfiere al objeto de destino.
Nombre de imagen de destino
Nombre de la imagen en el que est√° contenido el objeto de destino.
Destino-Objeto de imagen
Nombre del objeto de destino del que se modifica una propiedad.
Nombre de la propiedad de destino
Nombre de la propiedad que se modifica.

1738

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente c√≥digo de programa transfiere con la funci√≥n SetPropertyByProperty la propiedad
"ToolbarButtonClick" del objeto "Control_1" en la imagen de salida "Trend_1" a la propiedad
correspondiente de la imagen de destino"Trend_2".

'Programming language: VBS
'Name of source picture: Trend_1
'Name of target picture: Trend_2
'Name of the f(t) trend view control: Control_1
SetPropertyByProperty "Trend_1", "Control_1", "ToolbarButtonClick", "Trend_2",
"Control_2", "ToolbarButtonClick"
'User defined code
...

{
//Programming language: C
//Name of source picture: Trend_1
//Name of target picture: Trend_2
//Name of the f(t) trend view control: Control_1
SetPropertyByProperty ("Trend_1", "Control_1", "ToolbarButtonClick", "Trend_2",
"Control_2", "ToolbarButtonClick");
// User defined code
...
}

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

DefinirPropiedadV√≠aConstante
Descripci√≥n
Define el valor de una propiedad de objeto como cadena de caracteres.

Utilizaci√≥n en la lista de funciones
DefinirPropiedadV√≠aConstante (nombre de imagen, objeto de imagen, nombre de la
propiedad, valor)

Utilizaci√≥n en funciones definidas por el usuario
SetPropertyByConstant Screen_name, Screen_object, Property_name, Value

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1739

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n en "Funciones de sistema para Runtime Professional
(P√°gina 1554)".
Si desea modificar la propiedad de una imagen, el par√°metro "Objeto" debe estar vac√≠o. Utilice
para ello, p. ej., la sintaxis siguiente:
SetPropertyByConstant Screen_name, Property_name, Value

Par√°metros
Nombre de imagen
Nombre de la imagen en la que est√° contenido el objeto.
Objeto de imagen
Nombre del objeto cuya propiedad se modifica.
Nombre de la propiedad
Nombre de la propiedad que se modifica.
Valor
Valor que se asigna a la propiedad.

Ejemplo
El siguiente c√≥digo de programa modifica la propiedad de un objeto con la funci√≥n
SetPropertyByConstant: en la imagen "Trends" se ajusta la propiedad "ToolbarButtonClick"
del objeto incluido "Control_1" al valor 26.

'Programming language: VBS
'Name of the picture: Trends
'Name of the f(t) trend view control: Control_1
SetPropertyByConstant "Trends", "Control_1", "ToolbarButtonClick", "26"
'User defined code
...

1740

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

{
//Programming language: C
//Name of the picture: Trends
//Name of the f(t) trend view control: Control_1
SetPropertyByConstant ("Trends", "Control_1", "ToolbarButtonClick", "26");
// User defined code
...
}

Ejemplo: modificar una propiedad de imagen
El siguiente c√≥digo de programa modifica una propiedad de una imagen con la funci√≥n
SetPropertyByConstant: en la imagen "Trends" se ajusta la propiedad "Backcolor" al valor 255.

'Programming language: VBS
'Name of the picture: Trends
SetPropertyByConstant "Trends", "Trends", "Backcolor", "255"
'User defined code
...

{
//Programming language: C
//Name of the picture: Trends
SetPropertyByConstant ("Trends", "Trends", "Backcolor", "255");
// User defined code
...
}

Como alternativa, puede utilizar en lugar del segundo par√°metro (Objeto) la contrase√±a NULL
o bien un string de espacios en blanco.

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

DefinirPropiedadV√≠aVariable
Descripci√≥n
Define el valor de una propiedad de objeto por medio de un valor de variable.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1741

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en la lista de funciones
DefinirPropiedadV√≠aVariable (nombre de imagen, objeto de imagen, nombre de la propiedad,
nombre de la variable)

Utilizaci√≥n en funciones definidas por el usuario
SetPropertyByTag Screen_name, Screen_object, Property_name, Tag_name
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n en "Funciones de sistema para Runtime Professional
(P√°gina 1554)".
Si desea definir la propiedad de una imagen mediante un valor de variable, el par√°metro
"Objeto" debe estar vac√≠o. Utilice para ello, p. ej., la sintaxis siguiente:
SetPropertyByTag Screen_name, Property_name, Tag_name

Par√°metros
Nombre de imagen
Nombre de la imagen en la que est√° contenido el objeto.
Objeto de imagen
Nombre del objeto cuya propiedad se activa por medio del valor de variable.
Nombre de la propiedad
Nombre de la propiedad que se activa por medio del valor de variable.
Nombre de variable
Nombre de la variable que contiene el valor de la propiedad.

Ejemplo
El siguiente c√≥digo de programa modifica la propiedad de un objeto con la funci√≥n
SetPropertyByTag: Al hacer clic sobre el objeto se transfieren el nombre del objeto y la imagen
en la que se encuentra el objeto. El t√≠tulo CaptionText de la ventana de imagen contiene el valor
de la variable HMI_value_1.

'Programming language: VBS
SetPropertyByTag screenName, objectName, "CaptionText", "HMI_value_1"
'User defined code
...

1742

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

{
//Programming language: C
SetPropertyByTag (screenName, objectName, "CaptionText", "HMI_value_1");
// User defined code
...
}

Ejemplo
El siguiente c√≥digo de programa modifica la propiedad de un objeto con la funci√≥n
SetPropertyByTag: en la imagen "Trends" se ajusta la propiedad "ToolbarButtonClick" del
objeto incluido "Control_1" al valor 26.

'Programming language: VBS
'Name of the picture: Trends
'Name of the f(t) trend view control: Control_1
SetPropertyByConstant "Trends", "Control_1", "ToolbarButtonClick", "26"
'User defined code
...

{
//Programming language: C
//Name of the picture: Trends
//Name of the f(t) trend view control: Control_1
SetPropertyByConstant ("Trends", "Control_1", "ToolbarButtonClick", "26");
// User defined code
...
}

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

DefinirPropiedadIndirectamenteV√≠aVariable
Descripci√≥n
Escribe el nombre de una variable direccionada indirectamente en una propiedad de objeto. La
variable transferida como par√°metro contiene el nombre de una segunda variable, cuyo valor
se lee.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1743

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en la lista de funciones
DefinirPropiedadV√≠aVariableIndirectamente (nombre de imagen, objeto de imagen, nombre
de la propiedad, nombre de la variable)

Utilizaci√≥n en funciones definidas por el usuario
SetPropertyByTagIndirect Screen_name, Screen_object, Property_name, Tag_name
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n en "Funciones de sistema para Runtime Professional
(P√°gina 1554)".
Si desea definir la propiedad de una imagen indirectamente mediante una variable, el
par√°metro "Objeto" debe estar vac√≠o. Utilice para ello, p. ej., la sintaxis siguiente:
SetPropertyByTagIndirect Screen_name, Property_name, Tag_name

Par√°metros
Nombre de imagen
Nombre de la imagen en la que est√° contenido el objeto.
Objeto de imagen
Nombre del objeto cuya propiedad se debe modificar.
Nombre de la propiedad
Nombre de la propiedad que se debe modificar.
Nombre de variable
Nombre de la variable que, a su vez, contiene el nombre de la variable cuyo valor se lee.

Ejemplo
El siguiente c√≥digo de programa modifica la propiedad de un objeto con la funci√≥n
SetPropertyByTagIndirect:

'Programming language: VBS
SetPropertyByTagIndirect GetParentScreen(screenName), GetParentScreenWindow(screenName),
"ScreenName", "HMI_value_1"
'User defined code
...

1744

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

{
//Programming language: C
SetPropertyByTagIndirect (GetParentScreen(screenName), GetParentScreenWindow(screenName),
"ScreenName", "HMI_value_1");
// User defined code
...
}

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

DefinirPropiedadVentanaActualV√≠aPropiedad
Descripci√≥n
Define en la ventana actual el valor de una propiedad de objeto por medio de otra propiedad
de objeto.

Utilizaci√≥n en la lista de funciones
DefinirPropiedadVentanaActualV√≠aPropiedad (Nombre de la propiedad, Nombre de imagen,
Objeto de imagen, Nombre de la propiedad)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Nombre de la propiedad
Nombre de la propiedad cuya propiedad debe transferirse al objeto de destino.
Nombre de imagen
Nombre de la imagen en la que est√° contenido el objeto de imagen.
Objeto de imagen
Nombre del objeto de imagen al que se transfiere la propiedad.
Nombre de la propiedad
Nombre de la propiedad que se modifica.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1745

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

DefinirPropiedadVentanaActual
Descripci√≥n
Define en la ventana actual el valor de una propiedad de objeto por medio de un valor de
variable.

Utilizaci√≥n en la lista de funciones
DefinirPropiedadVentanaActual (Nombre de la propiedad, valor)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Nombre de la propiedad
Nombre de la propiedad que se activa por medio del valor de variable.
Valor
Nombre de la variable que contiene el valor de la propiedad.

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

DefinirPropiedadVentanaActualIndirectamenteV√≠aVariable
Descripci√≥n
Define en la ventana actual el valor de una propiedad de objeto por medio de una variable. La
variable contiene el nombre de variable que determina la propiedad del objeto.

Utilizaci√≥n en la lista de funciones
DefinirPropiedadVentanaActualV√≠aVariableIndirectamente(nombre de la propiedad de
destino, nombre de la variable)

Utilizaci√≥n en funciones definidas por el usuario
-

1746

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Nombre de la propiedad de destino
Nombre de la propiedad que se activa por medio del valor de variable.
Nombre de variable
Nombre de la variable que, a su vez, contiene el nombre de la variable que determina la
propiedad del objeto.

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

Procesamiento por bits
InvertirBit
Descripci√≥n
Invierte el valor de la variable indicada del tipo "Bool".
‚óè Si la variable tiene el valor 1 (TRUE), se ajusta a 0 (FALSE).
‚óè Si la variable tiene el valor 0 (FALSE), se ajusta a 1 (TRUE).

Utilizaci√≥n en la lista de funciones
InvertirBit (Variable)

Utilizaci√≥n en funciones definidas por el usuario
InvertBit Tag
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Variable
Variable cuyo bit se debe ajustar.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1747

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente c√≥digo de programa invierte el valor de la variable booleana bStatus y muestra el
resultado junto con el valor original bSaved.

'Programming language: VB
Dim myTag
Dim myOutputField
Dim bValue, bSaved, strResult
Set myTag = SmartTags("bStatus")
Set myOutputField=HMIRuntime.Screens("MyScreen").ScreenItems("objTextField")
'Get current value
bValue=myTag.Value
'Save current value
bSaved=bValue
'Invert Bit
InvertBit myTag
bValue=myTag.Value
'Output result old and new value:
strResult="Old Value: "&bSaved &Chr(13)&"New Value: "&bValue
myOutputField.Text=strResult

//Programming language: C
{
BOOL bStatus = 0;
BOOL bSaved = bStatus;
//Invert variable
invertBit(bStatus);
//print current and saved value
printf ("Current value: %d\r\n, Saved value: %d\r\n",bStatus, bSaved);
...
}

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

1748

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

InvertirBitEnVariable
Descripci√≥n
Invierte un bit en la variable indicada:
‚óè Si el bit de la variable tiene el valor 1 (TRUE), se ajusta a 0 (FALSE).
‚óè Si el bit de la variable tiene el valor 0 (FALSE), se ajusta a 1 (TRUE).
Tras modificar el bit indicado, la funci√≥n de sistema vuelve a transferir toda la variable al
controlador. No se comprueba si entretanto se han modificado otros bits en la variable. El
operador y el controlador s√≥lo podr√°n acceder a la variable indicada en modo de lectura hasta
que la variable vuelva a transferirse al controlador.
Nota
No utilice esta funci√≥n de sistema si el controlador admite variables BOOL. En su lugar utilice
la funci√≥n de sistema "InvertirBit".

Utilizaci√≥n en la lista de funciones
InvertirBitEnVariable (Variable, Bit)

Utilizaci√≥n en funciones definidas por el usuario
InvertBitInTag Tag, Bit
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Variable
Variable en la que se debe ajustar el bit indicado.
Bit
N√∫mero del bit a ajustar.
Si utiliza esta funci√≥n de sistema en un script de usuario, los bits de una variable se cuentan
de derecha a izquierda. El contaje comienza a partir de "0".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1749

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente c√≥digo de programa invierte un bit en la posici√≥n indicada bitposition de la variable
bStatusWord y muestra el resultado junto con el valor original bSaved.

'Programming language: VB
Dim myTag
Dim myOutputField
Dim bValue, bSaved, bitposition, strResult
Set myTag = SmartTags("bStatusWord")
Set myOutputField=HMIRuntime.Screens("MyScreen").ScreenItems("objTextField")
'Get current value
bValue=myTag.Value
'Save current value
bSaved=bValue
'Invert Bit in position
bitposition=2
InvertBit myTag, bitposition
bValue=myTag.Value
'Output result old and new value:
strResult="Old Value: "&bSaved &Chr(13)&"New Value: "&bValue
myOutputField.Text=strResult

//Programming language: C
{
BYTE bStatusWord;
BYTE bsaved = bStatusWord;
BYTE bitposition = 2;
//Invert bit in bitposition
InvertBitInTag (bStatusWord, bitposition);
//print current and saved value
printf ("Current value: %d\r\n, Saved value: %d\r\n",bStatusWord, bsaved);
...
}

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

DesactivarBit
Descripci√≥n
Pone a 0 (FALSE) el valor de una variable del tipo "Bool".

1750

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilizaci√≥n en la lista de funciones
DesactivarBit (Variable)

Utilizaci√≥n en funciones definidas por el usuario
ResetBit Tag
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Variable
Variable del tipo BOOL que se ajusta a "0" (FALSE).

Ejemplo
El siguiente c√≥digo de programa pone a 0 el valor de la variable booleana bStatus con la
funci√≥n ResetBit y muestra el resultado junto con el valor original bSaved.

'Programming language: VB
Dim myTag
Dim myOutputField
Dim bValue, bSaved, strResult
Set myTag = SmartTags("bStatus")
Set myOutputField=HMIRuntime.Screens("MyScreen").ScreenItems("objTextField")
'Set value
bValue=1
myTag.Value=bValue
'Save current value
bSaved=bValue
'Reset Bit
ResetBit myTag
bValue=myTag.Value
'Output result old and new value:
strResult="Old Value: "&bSaved &Chr(13)&"New Value: "&bValue
myOutputField.Text=strResult

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1751

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

//Programming language: C
{
BOOL bStatus = 1;
BOOL bSaved = bStatus;
//Reset bit
ResetBit (bStatus);
//print current and saved value
printf ("Current value: %d\r\n, Saved value: %d\r\n",bStatus, bSaved);
...
}

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

DesactivarBitEnVariable
Descripci√≥n
Pone un bit a 0 (FALSE) en las variables indicadas.
Tras modificar el bit indicado, la funci√≥n de sistema vuelve a transferir toda la variable al
controlador. No se comprueba si entretanto se han modificado otros bits en la variable. El
operador y el controlador s√≥lo podr√°n acceder a la variable indicada en modo de lectura hasta
que la variable vuelva a transferirse al controlador.
Nota
No utilice esta funci√≥n de sistema si el controlador admite variables BOOL. En su lugar utilice
la funci√≥n de sistema "DesactivarBit".

Utilizaci√≥n en la lista de funciones
DesactivarBitEnVariable (Variable, Bit)

Utilizaci√≥n en funciones definidas por el usuario
ResetBitInTag Tag, Bit
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

1752

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Par√°metros
Variable
Variable en la que un bit se ajusta a "0" (FALSE).
Bit
N√∫mero del bit que se ajusta a "0" (FALSE).
Si utiliza esta funci√≥n de sistema en un script de usuario, los bits de la variable indicada se
contar√°n de derecha a izquierda, independientemente del controlador utilizado. El contaje
comienza a partir de "0".

Ejemplo
El siguiente c√≥digo de programa pone a 0 un bit en la posici√≥n indicada bitposition de la
variable bStatusWord y muestra el resultado junto con el valor original bSaved.

'Programming language: VB
Dim myTag
Dim myOutputField
Dim bValue, bSaved, bitposition, strResult
Set myTag = SmartTags("bStatusWord")
Set myOutputField=HMIRuntime.Screens("MyScreen").ScreenItems("objTextField")
'Save current value
bValue=myTag.Value
bSaved=bValue
'Reset Bit
bitposition=2
ResetBitInTag myTag, bitposition
bValue=myTag.Value
'Output result old and new value:
strResult="Old Value: "&bSaved &Chr(13)&"New Value: "&bValue
myOutputField.Text=strResult

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1753

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

//Programming language: C
{
BYTE bSaved;
BYTE bitposition = 2;
bSaved = GetTagByte("bStatusWord");
//Reset bit in bitposition
ResetBitInTag ("bStatusWord", bitposition);
//print current and saved value
printf ("Current value: %d\r\n, Saved value: %d\r\n",GetTagByte("bStatusWord"), bSaved);
...
}

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

ActivarBit
Descripci√≥n
Ajusta a "1" (TRUE) el valor de una variable del tipo "Bool".

Utilizaci√≥n en la lista de funciones
ActivarBit (Variable)

Utilizaci√≥n en funciones definidas por el usuario
SetBit Tag
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Variable
Variable del tipo BOOL que se ajusta a "1" (TRUE).

1754

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente c√≥digo de programa pone a 1 el valor de la variable booleana bStatus con la
funci√≥n SetBit y muestra el resultado junto con el valor original bSaved.

'Programming language: VB
Dim myTag
Dim myOutputField
Dim bValue, bSaved, strResult
Set myTag = SmartTags("bStatus")
Set myOutputField=HMIRuntime.Screens("MyScreen").ScreenItems("objTextField")
'Set value
bValue=0
myTag.Value=bValue
'Save current value
bSaved=bValue
'Set Bit
SetBit myTag
bValue=myTag.Value
'Output result old and new value:
strResult="Old Value: "&bSaved &Chr(13)&"New Value: "&bValue
myOutputField.Text=strResult

//Programming language: C
{
BOOL bStatus = 0;
BOOL bSaved = bStatus;
//Set bit
SetBit (bStatus);
//print current and saved value
printf ("Current value: %d\r\n, Saved value: %d\r\n",bStatus, bSaved);
...
}

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

ActivarBitDeVariable
Descripci√≥n
Ajusta un bit a "1" (TRUE) en la variable indicada.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1755

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Tras modificar el bit indicado, la funci√≥n de sistema vuelve a transferir toda la variable al
controlador. No se comprueba si entretanto se han modificado otros bits en la variable. El
operador y el controlador s√≥lo podr√°n acceder a la variable indicada en modo de lectura hasta
que la variable vuelva a transferirse al controlador.
Nota
No utilice esta funci√≥n de sistema si el controlador admite variables BOOL. En su lugar utilice
la funci√≥n de sistema "ActivarBit".

Utilizaci√≥n en la lista de funciones
ActivarBitDeVariable (Variable, Bit)

Utilizaci√≥n en funciones definidas por el usuario
SetBitInTag Tag, Bit
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Variable
Variable en la que un bit se ajusta a "1" (TRUE).
Bit
N√∫mero del bit que se ajusta a "1" (TRUE).
Si utiliza esta funci√≥n de sistema en un script de usuario, los bits de la variable indicada se
contar√°n de derecha a izquierda, independientemente del controlador utilizado. El contaje
comienza a partir de "0".
Nota
Para garantizar una funcionalidad fiable es imprescindible una actualizaci√≥n garantizada de
las variables utilizadas con los valores de proceso actuales. Por tanto, configure la variable en
un campo E/S, o bien asocie la funci√≥n de sistema a un objeto de imagen (p. ej. un bot√≥n).
Si asocia la funci√≥n de sistema a un evento breve (p. ej. aparici√≥n de un mensaje), los valores
de proceso actuales s√≥lo se alcanzar√°n si la variable puede leerse de forma permanente.

1756

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente c√≥digo de programa pone a 1 un bit en la posici√≥n indicada bitposition de la
variable bStatusWord y muestra el resultado junto con el valor original bSaved.

'Programming language: VB
Dim myTag
Dim myOutputField
Dim bValue, bSaved, bitposition, strResult
Set myTag = SmartTags("bStatusWord")
Set myOutputField=HMIRuntime.Screens("MyScreen").ScreenItems("objTextField")
'Save current value
bValue=myTag.Value
bSaved=bValue
'Set Bit in tag
bitposition=1
SetBitInTag "bStatusWord", bitposition
bValue=myTag.Value
'Output result old and new value:
strResult="Old Value: "& bSaved & "New Value: " & bValue
myOutputField.Text=strResult

//Programming language: C
{
BYTE bSaved;
BYTE bitposition = 1;
bSaved = GetTagByte("bStatusWord");
//Reset bit in bitposition
SetBitInTag ("bStatusWord", bitposition);
//print current and saved value
printf ("Current value: %d\r\n, Saved value: %d\r\n",GetTagByte("bStatusWord"), bSaved);
}

Consulte tambi√©n
Funciones de sistema para Runtime Professional (P√°gina 1554)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1757

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ajustes
LeerModoPLC
Descripci√≥n
Eval√∫a el estado actual del controlador conectado.
La funci√≥n de sistema "LeerModoPLC" solo se puede configurar para los siguientes
controladores:
‚óè SIMATIC S7-1200
‚óè SIMATIC S7-1500

Utilizaci√≥n en la lista de funciones
LeerModoPLC (conexi√≥n, modo)

Utilizaci√≥n en funciones definidas por el usuario
-

Par√°metros
Conexi√≥n
Conexi√≥n entre controlador y panel de operador.
Modo
Eval√∫a el estado del controlador conectado. Seleccione una variable de usuario adecuada
para la evaluaci√≥n.

1758

4

STOP

En estado operativo "STOP" no se procesa el programa de usuario.

6

ARRANQUE

La CPU est√° en el estado operativo "Arranque", p. ej., tras un rearranque.

8

RUN

En estado operativo "RUN" se procesa el programa c√≠clico, controlado por
tiempo y por alarmas.

9

RUN-Redun‚Äê
dant

En el estado operativo "RUN-Redundant", ambas CPU procesan s√≠ncro‚Äê
namente el programa de usuario.

10

PARADA

El estado operativo "PARADA" se alcanza con un punto de parada (break
point) en un bloque que se prueba paso a paso en modo de etapa indivi‚Äê
dual.

13

DEFECTUOSO Se ha producido un error interno. Si el estado "DEFECTUOSO" es provo‚Äê
cado por un error de firmware, se se√±alizar√° con los LED de estado de la
CPU.

15

Sin tensi√≥n

La tensi√≥n de red est√° desconectada.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

EstablecerIdioma
Descripci√≥n
Cambia el idioma del panel de operador. Todos los textos y avisos del sistema configurados
aparecer√°n en el panel de operador en el idioma reci√©n ajustado.

Utilizaci√≥n en la lista de funciones
EstablecerIdioma (Idioma)

Utilizaci√≥n en funciones definidas por el usuario
SetLanguage Language
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Idioma
Determina qu√© idioma se debe ajustar en el panel de operador. Se pueden realizar los
siguientes ajustes:
‚óè -1 (hmiToggle) = Conmutar: Cambia al siguiente idioma. El orden se establece en el editor
"Idiomas del proyecto" durante el proceso de configuraci√≥n.
‚óè N√∫mero que se ha especificado en "Idioma y fuente" en el editor "Configuraci√≥n de
runtime". Cambia al idioma con el n√∫mero indicado.
‚óè Idioma que se ha especificado en "Idioma y fuente" en el editor "Configuraci√≥n de runtime".
‚óè Abreviatura del idioma conforme a la referencia VBScript5: Cambia al idioma
correspondiente a la abreviatura indicada, p. ej. "de-DE" para alem√°n (Alemania) o "en-US"
para ingl√©s (EE.UU.).
En el tema "Cuadro de Id. de configuraci√≥n regional (LCID)" que forma parte de los
principios b√°sicos de VBScript encontrar√° una lista de todas las abreviaturas de idioma.

Teclado
EstablecerModoTecladoDePantalla
Descripci√≥n
Activa o desactiva la visualizaci√≥n autom√°tica del teclado de la pantalla en el panel de
operador.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1759

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Utilice esta funci√≥n de sistema si desea impedir que aparezca el teclado de pantalla por
ejemplo porque dispone de un teclado externo conectado al panel de operador.
Nota
Si utiliza la funci√≥n de sistema "EstablecerModoTecladoDePantalla"
("SetScreenKeyboardMode") en un panel de operador que carezca de pantalla t√°ctil, en la
configuraci√≥n del panel deber√° activar la opci√≥n "Utilizar teclado pantalla" en el √°rea
"Configuraci√≥n de runtime".

Utilizaci√≥n en la lista de funciones
EstablecerModoTecladoDePantalla (Modo)

Utilizaci√≥n en funciones definidas por el usuario
SetScreenKeyboardMode Mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n al respecto en "Dependencia del panel de operador".

Par√°metros
Modo
Determina si el teclado de la pantalla se debe mostrar u ocultar.
0 (hmiOff) = Off: Ocultar el teclado de la pantalla
1 (hmiOn) = On: Mostrar el teclado de la pantalla
-1 (hmiToggle) = Conmutar: Conmuta entre ambos estados.

Manejo del teclado para objetos de imagen
MostrarBloqueEnTIAPortalDelAviso
Descripci√≥n
Realiza un cambio del visor de avisos al c√≥digo de programa relevante del proyecto
seleccionado en el Engineering System. El cambio del visor de avisos al proyecto en el TIA
Portal permite seguir analizando el c√≥digo de programa, p. ej., para buscar un contacto que
falta en el interlock.
Esta funci√≥n del sistema se configura en un objeto de imagen, p. ej., un bot√≥n, o en un bot√≥n
de la barra de herramientas de un visor de avisos. Al hacer clic en el bot√≥n, el sistema tendr√°
en cuenta el contexto necesario y, tras saltar al Engineering System, se mostrar√°
autom√°ticamente el punto en cuesti√≥n del c√≥digo de programa. Con el par√°metro Protecci√≥n
contra escritura se establece el nivel de permiso con el que se podr√° activar el cambio al
Engineering System.

1760

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Si se ha configurado la funci√≥n del sistema en un bot√≥n, el TIA Portal se iniciar√° en el modo
establecido mediante el par√°metro Protecci√≥n contra escritura. Para poder usar distintos
niveles de seguridad para el acceso, configure los botones con dos permisos distintos:
‚óè Para el primer bot√≥n, configure el permiso de acceso sin restricciones ajustando el
par√°metro Protecci√≥n contra escritura a FALSE.
‚óè para el segundo bot√≥n, configure el permiso de acceso sin derecho a modificar datos
ajustando el par√°metro Protecci√≥n contra escritura a TRUE.

Utilizaci√≥n en la lista de funciones
MostrarBloqueEnTIAPortalDelAviso (protecci√≥n contra escritura, modo offline, ruta del
proyecto en TIA Portal, nombre de imagen del visor de avisos, nombre del visor de avisos)

Utilizaci√≥n en funciones definidas por el usuario
ShowBlockInTIAPortalFromAlarm ReadOnly, Offline_mode, TiaPortalProject_path,
AlarmScreen_name, AlarmView_name, Error_tag
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n en "Funciones del sistema para Runtime Professional"
(P√°gina 1554).

Par√°metros
Protecci√≥n contra escritura
Determina si el proyecto se abrir√° en modo de solo lectura.
TRUE (est√°ndar): TIA Portal se abre en modo de lectura, y el usuario no puede realizar
cambios.
FALSE: TIA Portal se abre con permiso de lectura y escritura.
Modo offline
Determina si el proyecto se abrir√° en modo offline.
TRUE: despu√©s de abrirse el bloque, el TIA Portal no pasa al modo online.
FALSE (est√°ndar): despu√©s de abrirse el bloque se inicia el modo online.
Ruta de proyecto en TIA Portal
Ruta y nombre de archivo del proyecto en TIA Portal al que se cambiar√° desde el visor de
avisos.
Nombre de imagen del visor de avisos
Nombre de la imagen que contiene el visor de avisos.
Nombre del visor de avisos
Nombre de objeto del visor de avisos desde el que se cambiar√° a TIA Portal.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1761

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Variable de error
En caso de fallo se muestra informaci√≥n sobre el error que se ha producido mediante la
variable de error.

Consulte tambi√©n
Configuraci√≥n de salto desde el aviso (P√°gina 1940)

MostrarVisorAvisosC√≥digoPLC
Descripci√≥n
Cambia del visor de avisos con el aviso ProDiag o GRAPH seleccionado al visor de c√≥digo PLC
con el segmento en cuesti√≥n. La imagen que contiene visor de c√≥digo PLC se abre en una
imagen ra√≠z o en una ventana de imagen. El nombre del PLC del que procede la alarma no
puede contener comas.

Utilizaci√≥n en la lista de funciones
MostrarVisorAvisosC√≥digoPLC (nombre de imagen del aviso, nombre del visor de avisos,
nombre de la imagen ra√≠z, nombre de la ventana de imagen, nombre de imagen del visor de
c√≥digo PLC, nombre del visor de c√≥digo PLC, variable de error)

Utilizaci√≥n en funciones definidas por el usuario
ShowPLCCodeViewFromAlarm Screen_name, Alarmview_name, Screen_name,
Screen_window_name, Screen_name, PLCCodeView_name, Error_tag
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrar√° m√°s informaci√≥n en "Funciones del sistema para Runtime Professional"
(P√°gina 1554).

Par√°metros
Nombre de imagen del aviso
Nombre de la imagen que contiene el visor de avisos.
Nombre del visor de avisos
Nombre de objeto del visor de avisos desde el que se transmitir√° el aviso seleccionado.
Nombre de la imagen ra√≠z
Nombre de la imagen que contiene una ventana de imagen en la que puede representarse la
imagen.
Nombre de la ventana de imagen
Nombre de la ventana en la que puede representarse la imagen con el visor de c√≥digo PLC.

1762

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Nombre de imagen del visor de c√≥digo PLC
Nombre de la imagen que contiene el visor de c√≥digo PLC.
Nombre del visor de c√≥digo PLC
Nombre de objeto del visor de c√≥digo PLC.
Variable de error
En caso de fallo se muestra informaci√≥n sobre el error que se ha producido mediante la
variable de error.

Mensajes de error
La variable de error devuelve los siguientes errores:
KOPAPI_E_TPSF_ALGCTRL_NOTSELECTED

Debe estar seleccionado un solo aviso

KOPAPI_E_TPSF_ONLYONLINELISTALLOWED

Seleccionar solo avisos de la lista de avisos
del visor de avisos

KOPAPI_E_TPSF_ONALARMWRONGPRODUCERID

No se ha seleccionado ning√∫n aviso de
GRAPH/ProDiag.

KOPAPI_E_TPSF_ONALARMNOSD0JUMPFLAG

No es posible saltar desde este aviso de
GRAPH/ProDiag.
Es posible saltar desde un aviso del visor de
avisos al visor de c√≥digo PLC con los si‚Äê
guientes avisos de supervisi√≥n:
‚óè

En supervisiones globales, solo con
supervisiones de enclavamiento
(Interlock)

‚óè

En supervisiones locales, con todas las
supervisiones b√°sicas de par√°metros
de entrada

Consulte tambi√©n
Configuraci√≥n de salto desde el aviso (P√°gina 1940)

9.11.2

Eventos

9.11.2.1

Resumen

Editores
Introducci√≥n
La siguiente tabla muestra los eventos que se producen en los distintos editores.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1763

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Sujeto a cambios t√©cnicos.
S√≠mbolo

Editor
Im√°genes
Avisos HMI
Variables HMI
Planificador de tareas

Borrada (P√°gina 1789)

X

--

--

--

Activar (P√°gina 1790)

--

--

--

--

Cambio (P√°gina 1790)

--

--

--

--

Creada (P√°gina 1790)

X

--

--

--

Ejecutar (P√°gina 1791)

--

--

--

X

Selecci√≥n modificada (P√°gina 1791)

--

--

--

--

Al rebasar por exceso (P√°gina 1791)

--

--

X

--

Al rebasar por defecto (P√°gina 1791)

--

--

X

--

Cuando el cuadro de di√°logo est√° abierto (P√°gina 1792)

--

--

--

X

Cuando el cuadro de di√°logo est√° cerrado (P√°gina 1792)

--

--

--

X

Cambio de usuario (P√°gina 1793)

--

--

--

X

Cambio de imagen (P√°gina 1793)

--

--

--

X

Desactivar (P√°gina 1794)

--

--

--

X

Hacer doble clic (P√°gina 1794)

--

--

--

--

Pulsar (P√°gina 1795)

--

--

--

--

Entrada finalizada (P√°gina 1800)

--

--

--

--

Pulsar ESC dos veces (P√°gina 1801)

--

--

--

--

Desaparecido (P√°gina 1802)

--

X

--

--

Aparecido (P√°gina 1802)

--

X

--

--

Hacer clic (P√°gina 1803)

--

--

--

--

Hacer clic al parpadear (P√°gina 1804)

--

--

--

--

Loop-In-Alarm (P√°gina 1806)

--

X

--

--

Soltar (P√°gina 1807)

--

--

--

--

Desbordamiento del b√∫fer de avisos (P√°gina 1807)

--

--

--

X

Acusar (P√°gina 1809)

--

X

--

--

Margen alcanzado (P√°gina 1810)

--

--

--

--

Parada de runtime (P√°gina 1811)

--

--

--

X

Pulsar tecla (P√°gina 1815)

--

--

--

--

Soltar tecla (P√°gina 1815)

--

--

--

--

Desbordamiento (P√°gina 1816)

--

--

--

--

Conmutar OFF (P√°gina 1817)

--

--

--

--

Conmutar ON (P√°gina 1818)

--

--

--

--

Poca memoria disponible (P√°gina 1819)

--

--

--

--

Poca memoria disponible, cr√≠tico (P√°gina 1820)

--

--

--

--

1764

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Cambio de valor (P√°gina 1820)

--

--

X

--

Tiempo agotado (P√°gina 1821)

--

--

--

--

Objetos b√°sicos
Introducci√≥n
La siguiente tabla muestra los eventos que se producen en los distintos objetos.
Sujeto a cambios t√©cnicos.
S√≠mbolo

Objeto
L√≠nea
Elipse
C√≠rculo
Rect√°ngulo
Campo de texto
Visor de gr√°ficos

Borrada (P√°gina 1789)

--

--

--

--

--

--

Activar (P√°gina 1790)

--

--

--

--

--

--

Cambio (P√°gina 1790)

--

--

--

--

--

--

Creada (P√°gina 1790)

--

--

--

--

--

--

Ejecutar (P√°gina 1791)

--

--

--

--

--

--

Selecci√≥n modificada (P√°gina 1791)

--

--

--

--

--

--

Al rebasar por exceso (P√°gina 1791)

--

--

--

--

--

--

Al rebasar por defecto (P√°gina 1791)

--

--

--

--

--

--

Cuando el cuadro de di√°logo est√° abierto (P√°gina 1792)

--

--

--

--

--

--

Cuando el cuadro de di√°logo est√° cerrado (P√°gina 1792)

--

--

--

--

--

--

Cambio de usuario (P√°gina 1793)

--

--

--

--

--

--

Cambio de imagen (P√°gina 1793)

--

--

--

--

--

--

Desactivar (P√°gina 1794)

--

--

--

--

--

--

Hacer doble clic (P√°gina 1794)

--

--

--

--

--

--

Pulsar (P√°gina 1795)

--

--

--

--

--

--

Entrada finalizada (P√°gina 1800)

--

--

--

--

--

--

Pulsar ESC dos veces (P√°gina 1801)

--

--

--

--

--

--

Desaparecido (P√°gina 1802)

--

--

--

--

--

--

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1765

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Aparecido (P√°gina 1802)

--

--

--

--

--

--

Hacer clic (P√°gina 1803)

--

--

--

--

--

--

Hacer clic al parpadear (P√°gina 1804)

--

--

--

--

--

--

Loop-In-Alarm (P√°gina 1806)

--

--

--

--

--

--

Soltar (P√°gina 1807)

--

--

--

--

--

--

Desbordamiento del b√∫fer de avisos (P√°gina 1807)

--

--

--

--

--

--

Acusar (P√°gina 1809)

--

--

--

--

--

--

Margen alcanzado (P√°gina 1810)

--

--

--

--

--

--

Parada de runtime (P√°gina 1811)

--

--

--

--

--

--

Pulsar tecla (P√°gina 1815)

--

--

--

--

--

--

Soltar tecla (P√°gina 1815)

--

--

--

--

--

--

Desbordamiento (P√°gina 1816)

--

--

--

--

--

--

Conmutar OFF (P√°gina 1817)

--

--

--

--

--

--

Conmutar ON (P√°gina 1818)

--

--

--

--

--

--

Poca memoria disponible (P√°gina 1819)

--

--

--

--

--

--

Poca memoria disponible, cr√≠tico (P√°gina 1820)

--

--

--

--

--

--

Cambio de valor (P√°gina 1820)

--

--

--

--

--

--

Tiempo agotado (P√°gina 1821)

--

--

--

--

--

--

Elementos
Introducci√≥n
La siguiente tabla muestra los eventos que se producen en los distintos objetos.
Sujeto a cambios t√©cnicos.
S√≠mbolo

Objeto
Campo E/S
Bot√≥n
Campo E/S simb√≥lico
Campo E/S gr√°fico
Campo de fecha y hora
Barra
Interruptor

1766

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Borrada (P√°gina 1789)

--

--

--

--

--

--

--

Activar (P√°gina 1790)

X

X

X

X

--

--

X

Cambio (P√°gina 1790)

--

X

X

--

--

--

X

Creada (P√°gina 1790)

--

--

--

--

--

--

--

Ejecutar (P√°gina 1791)

--

--

--

--

--

--

--

Selecci√≥n modificada (P√°gina 1791)

--

--

--

--

--

--

--

Al rebasar por exceso (P√°gina 1791)

--

--

--

--

--

--

--

Al rebasar por defecto (P√°gina 1791)

--

--

--

--

--

--

--

Cuando el cuadro de di√°logo est√° abierto (P√°gi‚Äê
na 1792)

--

--

--

--

--

--

--

Cuando el cuadro de di√°logo est√° cerrado (P√°gi‚Äê
na 1792)

--

--

--

--

--

--

--

Cambio de usuario (P√°gina 1793)

--

--

--

--

--

--

--

Cambio de imagen (P√°gina 1793)

--

--

--

--

--

--

--

Desactivar (P√°gina 1794)

X

X

X

X

--

--

X

Hacer doble clic (P√°gina 1794)

--

--

--

--

--

--

--

Pulsar (P√°gina 1795)

--

X

--

--

--

--

--

Entrada finalizada (P√°gina 1800)

--

--

--

--

--

--

--

Pulsar ESC dos veces (P√°gina 1801)

--

--

--

--

--

--

--

Desaparecido (P√°gina 1802)

--

--

--

--

--

--

--

Aparecido (P√°gina 1802)

--

--

--

--

--

--

--

Hacer clic (P√°gina 1803)

--

X

--

--

--

--

--

Hacer clic al parpadear (P√°gina 1804)

--

--

--

--

--

--

--

Loop-In-Alarm (P√°gina 1806)

--

--

--

--

--

--

--

Soltar (P√°gina 1807)

--

X

--

--

--

--

--

Desbordamiento del b√∫fer de avisos (P√°gina 1807)

--

--

--

--

--

--

--

Acusar (P√°gina 1809)

--

--

--

--

--

--

--

Margen alcanzado (P√°gina 1810)

--

--

--

--

--

--

--

Parada de runtime (P√°gina 1811)

--

--

--

--

--

--

--

Pulsar tecla (P√°gina 1815)

--

--

--

--

--

--

--

Soltar tecla (P√°gina 1815)

--

--

--

--

--

--

--

Desbordamiento (P√°gina 1816)

--

--

--

--

--

--

--

Conmutar OFF (P√°gina 1817)

--

--

--

--

--

--

X

Conmutar ON (P√°gina 1818)

--

--

--

--

--

--

X

Poca memoria disponible (P√°gina 1819)

--

--

--

--

--

--

--

Poca memoria disponible, cr√≠tico (P√°gina 1820)

--

--

--

--

--

--

--

Cambio de valor (P√°gina 1820)

--

--

--

--

--

--

--

Tiempo agotado (P√°gina 1821)

--

--

--

--

--

--

--

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1767

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Controles
Introducci√≥n
La siguiente tabla muestra los eventos que se producen en los distintos objetos.
Sujeto a cambios t√©cnicos.
S√≠mbolo

Objeto
Visor de avisos/ventana de avisos
Indicador de avisos
Visor de curvas
Visor de usuarios
Navegador HTML (solo Basic Panel de 2.¬™ generaci√≥n)
Visor de recetas
Visor de diagn√≥stico del sistema
Indicador de ayuda

Borrada (P√°gina 1789)

--

--

--

--

--

--

--

--

Activar (P√°gina 1790)

X

--

X

X

X

--

--

X

Cambio (P√°gina 1790)

--

--

--

--

--

--

--

--

Creada (P√°gina 1790)

--

--

--

--

--

--

--

--

Ejecutar (P√°gina 1791)

--

--

--

--

--

--

--

--

Selecci√≥n modificada (P√°gina 1791)

--

--

--

--

--

--

--

--

Al rebasar por exceso (P√°gina 1791)

--

--

--

--

--

--

--

--

Al rebasar por defecto (P√°gina 1791)

--

--

--

--

--

--

--

--

Cuando el cuadro de di√°logo est√° abierto (P√°gi‚Äê
na 1792)

--

--

--

--

--

--

--

--

Cuando el cuadro de di√°logo est√° cerrado (P√°gi‚Äê
na 1792)

--

--

--

--

--

--

--

--

Cambio de usuario (P√°gina 1793)

--

--

--

--

--

--

--

--

Cambio de imagen (P√°gina 1793)

--

--

--

--

--

--

--

--

Desactivar (P√°gina 1794)

X

--

X

X

X

--

--

X

Hacer doble clic (P√°gina 1794)

--

--

--

--

--

--

--

--

Pulsar (P√°gina 1795)

--

--

--

--

--

--

--

--

Entrada finalizada (P√°gina 1800)

--

--

--

--

--

--

--

--

Pulsar ESC dos veces (P√°gina 1801)

--

--

--

--

--

--

--

--

Desaparecido (P√°gina 1802)

--

--

--

--

--

--

--

--

Hacer clic (P√°gina 1803)

--

X

--

--

--

--

--

--

Hacer clic al parpadear (P√°gina 1804)

--

X

--

--

--

--

--

--

Loop-In-Alarm (P√°gina 1806)

--

--

--

--

--

--

--

--

Soltar (P√°gina 1807)

--

--

--

--

--

--

--

--

Aparecido (P√°gina 1802)

1768

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Desbordamiento del b√∫fer de avisos (P√°gina 1807)

--

--

--

--

--

--

--

--

Acusar (P√°gina 1809)

--

--

--

--

--

--

--

--

Margen alcanzado (P√°gina 1810)

--

--

--

--

--

--

--

--

Parada de runtime (P√°gina 1811)

--

--

--

--

--

--

--

--

Pulsar tecla (P√°gina 1815)

--

--

--

--

--

--

--

--

Soltar tecla (P√°gina 1815)

--

--

--

--

--

--

--

--

Desbordamiento (P√°gina 1816)

--

--

--

--

--

--

--

--

Conmutar OFF (P√°gina 1817)

--

--

--

--

--

--

--

--

Conmutar ON (P√°gina 1818)

--

--

--

--

--

--

--

--

Poca memoria disponible (P√°gina 1819)

--

--

--

--

--

--

--

--

Poca memoria disponible, cr√≠tico (P√°gina 1820)

--

--

--

--

--

--

--

--

Cambio de valor (P√°gina 1820)

--

--

--

--

--

--

--

--

Tiempo agotado (P√°gina 1821)

--

--

--

--

--

--

--

--

9.11.2.2

Resumen

Editores
Introducci√≥n
La siguiente tabla muestra los eventos que se producen en los distintos editores.
Sujeto a cambios t√©cnicos.
S√≠mbolo

Editor
Im√°genes
Avisos HMI
Variables HMI
Ficheros
Planificador de tareas
Audit Trail

Borrada (P√°gina 1789)

X

--

--

--

--

--

Activar (P√°gina 1790)

--

--

--

--

--

--

Cambio (P√°gina 1790)

--

--

--

--

--

--

Creada (P√°gina 1790)

X

--

--

--

--

--

Ejecutar (P√°gina 1791)

--

--

--

--

X

--

Selecci√≥n modificada (P√°gina 1791)

--

--

--

--

--

--

Al rebasar por exceso (P√°gina 1791)

--

--

X

--

--

--

Al rebasar por defecto (P√°gina 1791)

--

--

X

--

--

--

Cuando el cuadro de di√°logo est√° abierto (P√°gina 1792)

--

--

--

--

X

--

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1769

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Cuando el cuadro de di√°logo est√° cerrado (P√°gina 1792)

--

--

--

--

X

--

Cambio de usuario (P√°gina 1793)

--

--

--

--

X

--

Cambio de imagen (P√°gina 1793)

--

--

--

--

X

--

Desactivar (P√°gina 1794)

--

--

--

--

--

--

Hacer doble clic (P√°gina 1794)

--

--

--

--

--

--

Pulsar (P√°gina 1795)

--

--

--

--

--

--

Entrada finalizada (P√°gina 1800)

--

--

--

--

--

--

Pulsar ESC dos veces (P√°gina 1801)

--

--

--

--

--

--

Desaparecido (P√°gina 1802)

--

X

--

--

--

--

Aparecido (P√°gina 1802)

--

X

--

--

--

--

Hacer clic (P√°gina 1803)

--

--

--

--

--

--

Hacer clic al parpadear (P√°gina 1804)

--

--

--

--

--

--

Loop-In-Alarm (P√°gina 1806)

--

X

--

--

--

--

Soltar (P√°gina 1807)

--

--

--

--

--

--

Desbordamiento del b√∫fer de avisos (P√°gina 1807)

--

--

--

--

X

--

Acusar (P√°gina 1809)

--

X

--

--

--

--

Margen alcanzado (P√°gina 1810)

--

--

--

--

--

--

Parada de runtime (P√°gina 1811)

--

--

--

--

X

--

Pulsar tecla (P√°gina 1815)

--

--

--

--

--

--

Soltar tecla (P√°gina 1815)

--

--

--

--

--

--

Desbordamiento (P√°gina 1816)

--

--

--

X

--

--

Conmutar (P√°gina 1817)

--

--

--

--

--

--

Conmutar OFF (P√°gina 1817)

--

--

--

--

--

--

Conmutar ON (P√°gina 1818)

--

--

--

--

--

--

Poca memoria disponible (P√°gina 1819)

--

--

--

X

--

X

Poca memoria disponible, cr√≠tico (P√°gina 1820)

--

--

--

X

--

X

Cambio de valor (P√°gina 1820)

--

--

X

--

--

--

Tiempo agotado (P√°gina 1821)

--

--

--

--

--

--

Objetos b√°sicos
Introducci√≥n
La siguiente tabla muestra los eventos que se producen en los distintos objetos.
Sujeto a cambios t√©cnicos.
S√≠mbolo

Objeto
L√≠nea
Polil√≠nea
Pol√≠gono
Elipse
C√≠rculo

1770

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
S√≠mbolo

Objeto
Rect√°ngulo
Campo de texto
Visor de gr√°ficos

Borrada (P√°gina 1789)

--

--

--

--

--

--

--

--

Activar (P√°gina 1790)

--

--

--

--

--

--

--

--

Cambio (P√°gina 1790)

--

--

--

--

--

--

--

--

Creada (P√°gina 1790)

--

--

--

--

--

--

--

--

Ejecutar (P√°gina 1791)

--

--

--

--

--

--

--

--

Selecci√≥n modificada (P√°gina 1791)

--

--

--

--

--

--

--

--

Al rebasar por exceso (P√°gina 1791)

--

--

--

--

--

--

--

--

Al rebasar por defecto (P√°gina 1791)

--

--

--

--

--

--

--

--

Cuando el cuadro de di√°logo est√° abierto (P√°gi‚Äê
na 1792)

--

--

--

--

--

--

--

--

Cuando el cuadro de di√°logo est√° cerrado (P√°gi‚Äê
na 1792)

--

--

--

--

--

--

--

--

Cambio de usuario (P√°gina 1793)

--

--

--

--

--

--

--

--

Cambio de imagen (P√°gina 1793)

--

--

--

--

--

--

--

--

Desactivar (P√°gina 1794)

--

--

--

--

--

--

--

--

Hacer doble clic (P√°gina 1794)

--

--

--

--

--

--

--

--

Pulsar (P√°gina 1795)

--

--

--

--

--

--

--

--

Entrada finalizada (P√°gina 1800)

--

--

--

--

--

--

--

--

Pulsar ESC dos veces (P√°gina 1801)

--

--

--

--

--

--

--

--

Desaparecido (P√°gina 1802)

--

--

--

--

--

--

--

--

Aparecido (P√°gina 1802)

--

--

--

--

--

--

--

--

Hacer clic (P√°gina 1803)

--

--

--

--

--

--

--

--

Hacer clic al parpadear (P√°gina 1804)

--

--

--

--

--

--

--

--

Loop-In-Alarm (P√°gina 1806)

--

--

--

--

--

--

--

--

Soltar (P√°gina 1807)

--

--

--

--

--

--

--

--

Desbordamiento del b√∫fer de avisos (P√°gi‚Äê
na 1807)

--

--

--

--

--

--

--

--

Acusar (P√°gina 1809)

--

--

--

--

--

--

--

--

Margen alcanzado (P√°gina 1810)

--

--

--

--

--

--

--

--

Parada de runtime (P√°gina 1811)

--

--

--

--

--

--

--

--

Pulsar tecla (P√°gina 1815)

--

--

--

--

--

--

--

--

Soltar tecla (P√°gina 1815)

--

--

--

--

--

--

--

--

Desbordamiento (P√°gina 1816)

--

--

--

--

--

--

--

--

Conmutar (P√°gina 1817)

--

--

--

--

--

--

--

--

Conmutar OFF (P√°gina 1817)

--

--

--

--

--

--

--

--

Conmutar ON (P√°gina 1818)

--

--

--

--

--

--

--

--

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1771

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Poca memoria disponible (P√°gina 1819)

--

--

--

--

--

--

--

--

Poca memoria disponible, cr√≠tico (P√°gina 1820)

--

--

--

--

--

--

--

--

Cambio de valor (P√°gina 1820)

--

--

--

--

--

--

--

--

Tiempo agotado (P√°gina 1821)

--

--

--

--

--

--

--

--

Elementos
Introducci√≥n
La siguiente tabla muestra los eventos que se producen en los distintos objetos.
Sujeto a cambios t√©cnicos.
S√≠mbolo

Objeto
Campo E/S
Bot√≥n
Campo E/S simb√≥lico
Campo E/S gr√°fico
Campo de fecha y hora
Barra
Interruptor
Librer√≠a de s√≠mbolos
Deslizador
Indicador gauge
Reloj

Borrada (P√°gina 1789)

--

--

--

--

--

--

--

--

--

--

--

Activar (P√°gina 1790)

X

X

X

X

--

--

X

X

X

--

--

Cambio (P√°gina 1790)

--

X

X

--

--

--

X

--

X

X

--

Creada (P√°gina 1790)

--

--

--

--

--

--

--

--

--

--

--

Ejecutar (P√°gina 1791)

--

--

--

--

--

--

--

--

--

--

--

Selecci√≥n modificada (P√°gina 1791)

--

--

--

--

--

--

--

--

--

--

--

Al rebasar por exceso (P√°gina 1791)

--

--

--

--

--

--

--

--

--

--

--

Al rebasar por defecto (P√°gina 1791)

--

--

--

--

--

--

--

--

--

--

--

Cuando el cuadro de di√°logo est√° abierto
(P√°gina 1792)

--

--

--

--

--

--

--

--

--

--

--

Cuando el cuadro de di√°logo est√° cerra‚Äê
do (P√°gina 1792)

--

--

--

--

--

--

--

--

--

--

--

Cambio de usuario (P√°gina 1793)

--

--

--

--

--

--

--

--

--

--

--

Cambio de imagen (P√°gina 1793)

--

--

--

--

--

--

--

--

--

--

--

Desactivar (P√°gina 1794)

X

X

X

X

--

--

X

X

X

--

--

Hacer doble clic (P√°gina 1794)

--

--

--

--

--

--

--

X

--

--

--

1772

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Pulsar (P√°gina 1795)

--

X

--

--

--

--

--

X

--

--

--

Entrada finalizada (P√°gina 1800)

X

X

X

--

--

--

--

--

--

--

Pulsar ESC dos veces (P√°gina 1801)

--

Desaparecido (P√°gina 1802)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Aparecido (P√°gina 1802)

--

--

--

--

--

--

--

--

--

--

--

Hacer clic (P√°gina 1803)

--

X

--

--

--

--

--

X

--

--

--

Hacer clic al parpadear (P√°gina 1804)

--

--

--

--

--

--

--

--

--

--

--

Loop-In-Alarm (P√°gina 1806)

--

--

--

--

--

--

--

--

--

--

--

Soltar (P√°gina 1807)

--

X

--

--

--

--

--

X

--

--

--

Desbordamiento del b√∫fer de avisos (P√°‚Äê
gina 1807)

--

--

--

--

--

--

--

--

--

--

--

Acusar (P√°gina 1809)

--

--

--

--

--

--

--

--

--

--

--

Margen alcanzado (P√°gina 1810)

--

--

--

--

--

--

--

--

--

--

--

Parada de runtime (P√°gina 1811)

--

--

--

--

--

--

--

--

--

--

--

Pulsar tecla (P√°gina 1815)

--

--

--

--

--

--

--

--

--

--

--

Soltar tecla (P√°gina 1815)

--

--

--

--

--

--

--

--

--

--

--

Desbordamiento (P√°gina 1816)

--

--

--

--

--

--

--

--

--

--

--

Conmutar (P√°gina 1817)

--

--

--

--

--

--

--

--

--

--

--

Conmutar OFF (P√°gina 1817)

--

--

--

--

--

--

X

--

--

--

--

Conmutar ON (P√°gina 1818)

--

--

--

--

--

--

X

--

--

--

--

Poca memoria disponible (P√°gina 1819)

--

--

--

--

--

--

--

--

--

--

--

Poca memoria disponible, cr√≠tico (P√°gi‚Äê
na 1820)

--

--

--

--

--

--

--

--

--

--

--

Cambio de valor (P√°gina 1820)

--

--

--

--

--

--

--

--

--

--

--

Tiempo agotado (P√°gina 1821)

--

--

--

--

--

--

--

--

--

--

--

Controles
Introducci√≥n
La siguiente tabla muestra los eventos que se producen en los distintos objetos.
Sujeto a cambios t√©cnicos.
S√≠mbolo

Objeto
Visor de avisos/ventana de avisos
Indicador de avisos
Visor de curvas
Visor de usuarios
Navegador HTML
Tabla de observaci√≥n
Visor Sm@rtClient
Visor de recetas
Visor de curvas f(x)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1773

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
S√≠mbolo

Objeto
Visor de diagn√≥stico del sistema/Ventana de diagn√≥stico del sis‚Äê
tema
Media Player1
Visor de c√≥digo PLC
Vista general de GRAPH
Vista general de ProDiag
Visor de an√°lisis de criterios
Visor de c√°mara1
Visor de PDF1
Tecla de funci√≥n

1

Solo con paneles de operador Comfort

Borrada (P√°gina 1789)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Activar (P√°gina 1790)

X

--

X

X

X

X

X

X

--

X

--

X

X

X

X

X

X

--

Cambio (P√°gina 1790)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Creada (P√°gina 1790)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Ejecutar (P√°gina 1791)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Selecci√≥n modificada
(P√°gina 1791)

X

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Al rebasar por exceso
(P√°gina 1791)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Al rebasar por defecto
(P√°gina 1791)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Cuando el cuadro de di√°‚Äê
logo est√° abierto (P√°gi‚Äê
na 1792)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Cuando el cuadro de di√°‚Äê
logo est√° cerrado (P√°gi‚Äê
na 1792)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Cambio de usuario (P√°gi‚Äê
na 1793)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Cambio de imagen (P√°gi‚Äê
na 1793)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Desactivar (P√°gi‚Äê
na 1794)

X

--

X

X

X

X

X

X

--

--

--

X

X

X

X

X

X

--

Hacer doble clic (P√°gi‚Äê
na 1794)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar (P√°gina 1795)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Entrada finalizada (P√°gi‚Äê
na 1800)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar ESC dos veces
(P√°gina 1801)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Desaparecido (P√°gi‚Äê
na 1802)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

1774

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Aparecido (P√°gina 1802)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Hacer clic (P√°gina 1803)

--

X

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Hacer clic al parpadear
(P√°gina 1804)

--

X

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Loop-In-Alarm (P√°gi‚Äê
na 1806)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Soltar (P√°gina 1807)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Desbordamiento del b√∫‚Äê
fer de avisos (P√°gi‚Äê
na 1807)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Acusar (P√°gina 1809)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Margen alcanzado (P√°gi‚Äê
na 1810)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Parada de runtime (P√°gi‚Äê
na 1811)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar el bot√≥n "Visor de
avisos" (P√°gina 1811)

--

--

--

--

--

--

--

--

--

--

--

--

X

X

--

--

--

--

Pulsar el bot√≥n "Visor de
c√≥digo PLC" (P√°gi‚Äê
na 1812)

--

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

Pulsar tecla (P√°gi‚Äê
na 1815)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

X

Soltar tecla (P√°gi‚Äê
na 1815)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

X

Desbordamiento (P√°gi‚Äê
na 1816)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Conmutar (P√°gina 1817)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Conmutar OFF (P√°gi‚Äê
na 1817)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Conmutar ON (P√°gi‚Äê
na 1818)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Poca memoria disponi‚Äê
ble (P√°gina 1819)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Poca memoria disponi‚Äê
ble, cr√≠tico (P√°gina 1820)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Cambio de valor (P√°gi‚Äê
na 1820)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Tiempo agotado (P√°gi‚Äê
na 1821)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1775

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

9.11.2.3

Sinopsis

Editores
Introducci√≥n
La siguiente tabla muestra los eventos que se producen en los distintos editores.
Sujeto a cambios t√©cnicos.
S√≠mbolo

Editor
Im√°genes
Avisos HMI
Ficheros
Planificador de tareas

Reproducci√≥n finalizada (P√°gina 1789)

--

--

--

--

Activar (P√°gina 1790)

X

--

--

--

Cambio (P√°gina 1790)

--

--

--

--

Creada (P√°gina 1790)

X

--

--

--

Ejecutar (P√°gina 1791)

--

--

--

X

Selecci√≥n modificada (P√°gina 1791)

--

--

--

--

Hacer doble clic (P√°gina 1794)

--

--

--

--

Pulsar (P√°gina 1795)

--

--

--

--

Propiedad de aviso de operador modificada (P√°gina 1795)

--

--

--

--

Propiedad de bloque modificada (P√°gina 1795)

--

--

--

--

Propiedad diagrama modificada (P√°gina 1796)

--

--

--

--

Propiedad modificada (P√°gina 1796)

--

--

--

--

Propiedad de curva modificada (P√°gina 1796)

--

--

--

--

Propiedad de columna modificada (P√°gina 1797)

--

--

--

--

Propiedad de columna de estad√≠stica de avisos modificada (P√°gi‚Äê
na 1797)

--

--

--

--

Propiedad Nombre de columna del √°rea de estad√≠sticas modificada
(P√°gina 1797)

--

--

--

--

Propiedad Cambiar elemento de la barra de estado (P√°gina 1798)

--

--

--

--

Propiedad Barra de herramientas Cambiar Bot√≥n (P√°gina 1798)

--

--

--

--

Modificar propiedad eje de valores (P√°gina 1798)

--

--

--

--

Modificar propiedad Columna de valores (P√°gina 1799)

--

--

--

--

Propiedad de eje X modificada (P√°gina 1799)

--

--

--

--

Propiedad de eje Y modificada (P√°gina 1799)

--

--

--

--

Modificar propiedad eje de tiempo (P√°gina 1800)

--

--

--

--

modificar propiedad columna de tiempo (P√°gina 1800)

--

--

--

--

Error (P√°gina 1801)

--

--

--

--

1776

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Desaparecido (P√°gina 1802)

--

X

--

--

Aparecido (P√°gina 1802)

--

X

--

--

En el √°rea de avisos (P√°gina 1802)

--

--

--

--

En el rango de tolerancia (P√°gina 1803)

--

--

--

--

En el rango de advertencia (P√°gina 1803)

--

--

--

--

Hacer clic (P√°gina 1803)

X

--

--

--

Men√∫ contextual (P√°gina 1804)

--

--

--

--

Volumen (P√°gina 1805)

--

--

--

--

Modificar dise√±o (P√°gina 1805)

--

--

--

--

Modificar regla (P√°gina 1805)

--

--

--

--

Pulsar bot√≥n izquierdo del rat√≥n (P√°gina 1806)

X

--

--

--

Soltar bot√≥n izquierdo del rat√≥n (P√°gina 1806)

X

--

--

--

Loop-In-Alarm (P√°gina 1806)

--

X

--

--

Soltar (P√°gina 1807)

--

--

--

--

Desplazar rat√≥n (P√°gina 1808)

--

--

--

--

Medio abierto (P√°gina 1808)

--

--

--

--

Medio cerrado (P√°gina 1808)

--

--

--

--

Objeto modificado (P√°gina 1809)

X

--

--

--

Pausa (P√°gina 1809)

--

--

--

--

Acusar (P√°gina 1809)

X

X

--

--

Pulsar bot√≥n derecho del rat√≥n (P√°gina 1810)

X

--

--

--

Soltar bot√≥n derecho del rat√≥n (P√°gina 1811)

X

--

--

--

Parada de runtime (P√°gina 1811)

--

--

--

--

Pulsar el bot√≥n "Visor de avisos" (P√°gina 1811)

--

--

--

--

Pulsar el bot√≥n "Visor de c√≥digo PLC" (P√°gina 1812)

--

--

--

--

Hacer clic en bot√≥n de la barra de herramientas (P√°gina 1812)

--

--

--

--

Modificar deslizador (P√°gina 1812)

--

--

--

--

PasoAdelante (P√°gina 1813)

--

--

--

--

PasoAtr√°s (P√°gina 1813)

--

--

--

--

Bloqueo modificado (P√°gina 1813)

--

--

X

--

Estado modificado (P√°gina 1814)

--

X

--

--

Parada (P√°gina 1814)

--

--

--

--

Conmutar barra de herramientas (P√°gina 1814)

--

--

--

--

Pulsar tecla en teclado (P√°gina 1816)

X

--

--

--

Soltar tecla en teclado (P√°gina 1816)

X

--

--

--

Cambiar formato de v√≠deo (P√°gina 1818)

--

--

--

--

Pantalla completa (P√°gina 1819)

--

--

--

--

Salir de la pantalla completa (P√°gina 1819)

--

--

--

--

Reproducci√≥n (P√°gina 1821)

--

--

--

--

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1777

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Objetos b√°sicos
Introducci√≥n
La siguiente tabla muestra los eventos que se producen en los distintos objetos.
Sujeto a cambios t√©cnicos.
S√≠mbolo

Objeto
L√≠nea
Polil√≠nea
Pol√≠gono
Elipse
Segmento el√≠ptico
Segmento circular
Arco el√≠ptico
Arco circular
C√≠rculo
Rect√°ngulo
Conector
Campo de texto
Visor de gr√°ficos
Tubo
Pieza en T doble
Pieza en T
Arco tubular

Reproducci√≥n finaliza‚Äê
da (P√°gina 1789)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Activar (P√°gina 1790)

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

Cambio (P√°gina 1790)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Creada (P√°gina 1790)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Ejecutar (P√°gina 1791)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Selecci√≥n modificada
(P√°gina 1791)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Hacer doble clic (P√°gi‚Äê
na 1794)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar (P√°gina 1795)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de aviso de
operador modificada
(P√°gina 1795)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de bloque
modificada (P√°gi‚Äê
na 1795)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

1778

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Propiedad diagrama
modificada (P√°gi‚Äê
na 1796)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad modificada
(P√°gina 1796)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de curva mo‚Äê
dificada (P√°gina 1796)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de columna
modificada (P√°gi‚Äê
na 1797)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de columna
de estad√≠stica de avisos
modificada (P√°gi‚Äê
na 1797)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad Nombre de
columna del √°rea de es‚Äê
tad√≠sticas modificada
(P√°gina 1797)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad Cambiar ele‚Äê
mento de la barra de es‚Äê
tado (P√°gina 1798)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad Barra de he‚Äê
rramientas Cambiar Bo‚Äê
t√≥n (P√°gina 1798)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Modificar propiedad eje
de valores (P√°gi‚Äê
na 1798)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Modificar propiedad Co‚Äê
lumna de valores (P√°gi‚Äê
na 1799)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de eje X mo‚Äê
dificada (P√°gina 1799)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de eje Y mo‚Äê
dificada (P√°gina 1799)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Modificar propiedad eje
de tiempo (P√°gi‚Äê
na 1800)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

modificar propiedad co‚Äê
lumna de tiempo (P√°gi‚Äê
na 1800)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Error (P√°gina 1801)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Desaparecido (P√°gi‚Äê
na 1802)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Aparecido (P√°gi‚Äê
na 1802)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

En el √°rea de avisos
(P√°gina 1802)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

En el rango de toleran‚Äê
cia (P√°gina 1803)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1779

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

En el rango de adverten‚Äê
cia (P√°gina 1803)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Hacer clic (P√°gi‚Äê
na 1803)

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

Men√∫ contextual (P√°gi‚Äê
na 1804)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Volumen (P√°gina 1805)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Modificar dise√±o (P√°gi‚Äê
na 1805)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Modificar regla (P√°gi‚Äê
na 1805)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar bot√≥n izquierdo
del rat√≥n (P√°gina 1806)

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

Soltar bot√≥n izquierdo
del rat√≥n (P√°gina 1806)

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

Loop-In-Alarm (P√°gi‚Äê
na 1806)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Soltar (P√°gina 1807)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Desplazar rat√≥n (P√°gi‚Äê
na 1808)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Medio abierto (P√°gi‚Äê
na 1808)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Medio cerrado (P√°gi‚Äê
na 1808)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Objeto modificado (P√°‚Äê
gina 1809)

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

Pausa (P√°gina 1809)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Acusar (P√°gina 1809)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar bot√≥n derecho
del rat√≥n (P√°gina 1810)

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

Soltar bot√≥n derecho
del rat√≥n (P√°gina 1811)

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

Parada de runtime (P√°‚Äê
gina 1811)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar el bot√≥n "Visor
de avisos" (P√°gi‚Äê
na 1811)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar el bot√≥n "Visor
de c√≥digo PLC" (P√°gi‚Äê
na 1812)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Hacer clic en bot√≥n de
la barra de herramien‚Äê
tas (P√°gina 1812)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Modificar deslizador
(P√°gina 1812)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

PasoAdelante (P√°gi‚Äê
na 1813)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

1780

--

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

PasoAtr√°s (P√°gi‚Äê
na 1813)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Bloqueo modificado
(P√°gina 1813)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Estado modificado (P√°‚Äê
gina 1814)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Parada (P√°gina 1814)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Conmutar barra de he‚Äê
rramientas (P√°gi‚Äê
na 1814)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar tecla en teclado
(P√°gina 1816)

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

Soltar tecla en teclado
(P√°gina 1816)

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

Pantalla completa (P√°‚Äê
gina 1819)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Salir de la pantalla com‚Äê
pleta (P√°gina 1819)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Cambiar formato de v√≠‚Äê
deo (P√°gina 1818)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Reproducci√≥n (P√°gi‚Äê
na 1821)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Elementos
Introducci√≥n
La siguiente tabla muestra los eventos que se producen en los distintos elementos.
Sujeto a cambios t√©cnicos.
S√≠mbolo

Objeto
Campo E/S
Campo de texto editable
Cuadro de lista
Cuadro combinado

Bot√≥n
Bot√≥n redondo
Campo E/S simb√≥lico
Campo E/S gr√°fico

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1781

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
S√≠mbolo

Objeto
Barra
Librer√≠a de s√≠mbolos
Deslizador
Barra de desplazamiento
Casilla de verificaci√≥n
Bot√≥n de opci√≥n
Indicador gauge
Reloj
Visor de memoria

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Activar (P√°gina 1790)

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

Cambio (P√°gina 1790)

--

--

--

--

--

--

--

--

--

--

X

--

--

--

X

--

--

Creada (P√°gina 1790)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Ejecutar (P√°gina 1791)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Selecci√≥n modificada
(P√°gina 1791)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Hacer doble clic (P√°gi‚Äê
na 1794)

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

--

--

Pulsar (P√°gina 1795)

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

--

--

Propiedad de aviso de
operador modificada
(P√°gina 1795)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de bloque
modificada (P√°gi‚Äê
na 1795)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad diagrama
modificada (P√°gi‚Äê
na 1796)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad modificada
(P√°gina 1796)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de curva mo‚Äê
dificada (P√°gina 1796)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de columna
modificada (P√°gi‚Äê
na 1797)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Reproducci√≥n finaliza‚Äê
da (P√°gina 1789)

1782

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Propiedad de columna
de estad√≠stica de avi‚Äê
sos modificada (P√°gi‚Äê
na 1797)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad Nombre de
columna del √°rea de es‚Äê
tad√≠sticas modificada
(P√°gina 1797)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad Cambiar ele‚Äê
mento de la barra de
estado (P√°gina 1798)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad Barra de he‚Äê
rramientas Cambiar
Bot√≥n (P√°gina 1798)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Modificar propiedad eje
de valores (P√°gi‚Äê
na 1798)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Modificar propiedad
Columna de valores
(P√°gina 1799)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de eje X mo‚Äê
dificada (P√°gina 1799)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de eje Y mo‚Äê
dificada (P√°gina 1799)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Modificar propiedad eje
de tiempo (P√°gi‚Äê
na 1800)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

modificar propiedad co‚Äê
lumna de tiempo (P√°gi‚Äê
na 1800)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Error (P√°gina 1801)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Desaparecido (P√°gi‚Äê
na 1802)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Aparecido (P√°gi‚Äê
na 1802)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

En el √°rea de avisos
(P√°gina 1802)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

X

En el rango de toleran‚Äê
cia (P√°gina 1803)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

X

En el rango de adver‚Äê
tencia (P√°gina 1803)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

X

Hacer clic (P√°gi‚Äê
na 1803)

X

X

X

X

X

X

X

X

X

X

--

X

X

X

--

--

--

Men√∫ contextual (P√°gi‚Äê
na 1804)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Volumen (P√°gi‚Äê
na 1805)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Modificar dise√±o (P√°gi‚Äê
na 1805)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1783

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Modificar regla (P√°gi‚Äê
na 1805)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar bot√≥n izquierdo
del rat√≥n (P√°gina 1806)

X

X

X

X

X

X

X

X

X

--

--

X

X

X

--

--

--

Soltar bot√≥n izquierdo
del rat√≥n (P√°gina 1806)

X

X

X

X

X

X

X

X

X

--

--

X

X

X

--

--

--

Loop-In-Alarm (P√°gi‚Äê
na 1806)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Soltar (P√°gina 1807)

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

--

--

Desplazar rat√≥n (P√°gi‚Äê
na 1808)

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

--

--

Medio abierto (P√°gi‚Äê
na 1808)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Medio cerrado (P√°gi‚Äê
na 1808)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Objeto modificado (P√°‚Äê
gina 1809)

X

X

X

X

X

X

X

X

X

--

--

X

X

X

--

--

--

Pausa (P√°gina 1809)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Acusar (P√°gina 1809)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar bot√≥n derecho
del rat√≥n (P√°gina 1810)

X

X

X

X

X

X

X

X

X

--

--

X

X

X

--

--

--

Soltar bot√≥n derecho
del rat√≥n (P√°gina 1811)

X

X

X

X

X

X

X

X

X

--

--

X

X

X

--

--

--

Parada de runtime (P√°‚Äê
gina 1811)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar el bot√≥n "Visor
de avisos" (P√°gi‚Äê
na 1811)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar el bot√≥n "Visor
de c√≥digo PLC" (P√°gi‚Äê
na 1812)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Hacer clic en bot√≥n de
la barra de herramien‚Äê
tas (P√°gina 1812)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Modificar deslizador
(P√°gina 1812)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

PasoAdelante (P√°gi‚Äê
na 1813)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

PasoAtr√°s (P√°gi‚Äê
na 1813)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Bloqueo modificado
(P√°gina 1813)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Estado modificado (P√°‚Äê
gina 1814)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Parada (P√°gina 1814)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

1784

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Conmutar barra de he‚Äê
rramientas (P√°gi‚Äê
na 1814)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar tecla en teclado
(P√°gina 1816)

X

X

X

X

X

X

X

X

X

--

--

X

X

X

--

--

--

Soltar tecla en teclado
(P√°gina 1816)

X

X

X

X

X

X

X

X

X

--

--

X

X

X

--

--

--

Cambiar formato de v√≠‚Äê
deo (P√°gina 1818)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pantalla completa (P√°‚Äê
gina 1819)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Salir de la pantalla com‚Äê
pleta (P√°gina 1819)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Reproducci√≥n (P√°gi‚Äê
na 1821)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Controles
Introducci√≥n
La siguiente tabla muestra los eventos que se producen en los distintos controles.
Sujeto a cambios t√©cnicos.
S√≠mbolo

Objeto
Ventana de imagen
Visor de usuarios
Navegador HTML
Trabajo de impresi√≥n/diagn√≥stico de script
Visor de recetas
Visor de avisos
Visor de curvas f(x)
Visor de curvas f(t)
Visor de tablas
Tabla de valores
Visor de diagn√≥stico del sistema
Media Player
Visor de diagn√≥stico de canal
Visor de c√≥digo PLC
Vista general de GRAPH
Vista general de ProDiag
Visor de an√°lisis de criterios

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1785

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Reproducci√≥n finaliza‚Äê
da (P√°gina 1789)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

Activar (P√°gina 1790)

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

Cambio (P√°gina 1790)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Creada (P√°gina 1790)

--

--

--

--

X

X

X

X

X

X

--

--

--

--

--

--

--

Ejecutar (P√°gi‚Äê
na 1791)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Selecci√≥n modificada
(P√°gina 1791)

--

--

--

--

X

X

--

--

--

--

--

--

--

--

--

--

--

Hacer doble clic (P√°gi‚Äê
na 1794)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar (P√°gina 1795)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de aviso de
operador modificada
(P√°gina 1795)

--

--

--

--

--

X

--

--

--

--

--

--

--

--

--

--

--

Propiedad de bloque
modificada (P√°gi‚Äê
na 1795)

--

--

--

--

--

X

--

--

--

X

--

--

--

--

--

--

--

Propiedad diagrama
modificada (P√°gi‚Äê
na 1796)

--

--

--

--

--

--

X

X

--

--

--

--

--

--

--

--

--

Propiedad modificada
(P√°gina 1796)

--

--

--

--

X

X

X

X

X

X

--

--

--

--

--

--

--

Propiedad de curva
modificada (P√°gi‚Äê
na 1796)

--

--

--

--

--

--

X

X

--

--

--

--

--

--

--

--

--

Propiedad de columna
modificada (P√°gi‚Äê
na 1797)

--

--

--

--

X

X

--

--

--

X

--

--

--

--

--

--

--

Propiedad de columna
de estad√≠stica de avi‚Äê
sos modificada (P√°gi‚Äê
na 1797)

--

--

--

--

--

X

--

--

--

--

--

--

--

--

--

--

--

Propiedad Nombre de
columna del √°rea de
estad√≠sticas modifica‚Äê
da (P√°gina 1797)

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

--

--

Propiedad Cambiar
elemento de la barra
de estado (P√°gi‚Äê
na 1798)

--

--

--

--

X

X

X

X

X

X

--

--

--

--

--

--

--

Propiedad Barra de
herramientas Cambiar
Bot√≥n (P√°gina 1798)

--

--

--

--

X

X

X

X

X

X

--

--

--

--

--

--

--

Modificar propiedad
eje de valores (P√°gi‚Äê
na 1798)

--

--

--

--

--

--

--

X

--

--

--

--

--

--

--

--

--

1786

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Modificar propiedad
Columna de valores
(P√°gina 1799)

--

--

--

--

--

--

--

--

X

--

--

--

--

--

--

--

--

Propiedad de eje X
modificada (P√°gi‚Äê
na 1799)

--

--

--

--

--

--

X

--

--

--

--

--

--

--

--

--

--

Propiedad de eje Y
modificada (P√°gi‚Äê
na 1799)

--

--

--

--

--

--

X

--

--

--

--

--

--

--

--

--

--

Modificar propiedad
eje de tiempo (P√°gi‚Äê
na 1800)

--

--

--

--

--

--

--

X

--

--

--

--

--

--

--

--

--

modificar propiedad
columna de tiempo
(P√°gina 1800)

--

--

--

--

--

--

--

--

X

--

--

--

--

--

--

--

--

Error (P√°gina 1801)

--

--

--

--

--

--

--

--

--

--

--

--

--

X

--

X

X

Desaparecido (P√°gi‚Äê
na 1802)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Aparecido (P√°gi‚Äê
na 1802)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

En el √°rea de avisos
(P√°gina 1802)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

En el rango de toleran‚Äê
cia (P√°gina 1803)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

En el rango de adver‚Äê
tencia (P√°gina 1803)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Hacer clic (P√°gi‚Äê
na 1803)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

X

--

--

Men√∫ contextual (P√°‚Äê
gina 1804)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

Volumen (P√°gi‚Äê
na 1805)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

Modificar dise√±o (P√°gi‚Äê
na 1805)

--

--

--

--

--

--

--

X

--

--

--

--

--

--

--

--

--

Modificar regla (P√°gi‚Äê
na 1805)

--

--

--

--

--

--

--

X

--

--

--

--

--

--

--

--

--

Pulsar bot√≥n izquierdo
del rat√≥n (P√°gi‚Äê
na 1806)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Soltar bot√≥n izquierdo
del rat√≥n (P√°gi‚Äê
na 1806)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Loop-In-Alarm (P√°gi‚Äê
na 1806)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Soltar (P√°gina 1807)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Desplazar rat√≥n (P√°gi‚Äê
na 1808)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Medio abierto (P√°gi‚Äê
na 1808)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1787

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Medio cerrado (P√°gi‚Äê
na 1808)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

Objeto modificado (P√°‚Äê
gina 1809)

X

--

--

X

--

--

--

--

--

--

--

--

--

--

--

--

--

Pausa (P√°gina 1809)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

Acusar (P√°gina 1809)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar bot√≥n derecho
del rat√≥n (P√°gi‚Äê
na 1810)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Soltar bot√≥n derecho
del rat√≥n (P√°gi‚Äê
na 1811)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Parada de runtime
(P√°gina 1811)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar el bot√≥n "Visor
de avisos" (P√°gi‚Äê
na 1811)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

X

X

--

Pulsar el bot√≥n "Visor
de c√≥digo PLC" (P√°gi‚Äê
na 1812)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

X

--

--

Hacer clic en bot√≥n de
la barra de herramien‚Äê
tas (P√°gina 1812)

--

--

--

--

X

X

X

X

X

X

--

--

--

--

--

--

--

Modificar deslizador
(P√°gina 1812)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

PasoAdelante (P√°gi‚Äê
na 1813)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

PasoAtr√°s (P√°gi‚Äê
na 1813)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

Bloqueo modificado
(P√°gina 1813)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Estado modificado
(P√°gina 1814)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Parada (P√°gina 1814)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

Conmutar barra de he‚Äê
rramientas (P√°gi‚Äê
na 1814)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

Pulsar tecla en teclado
(P√°gina 1816)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Soltar tecla en teclado
(P√°gina 1816)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Cambiar formato de v√≠‚Äê
deo (P√°gina 1818)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

Pantalla completa (P√°‚Äê
gina 1819)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

1788

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Salir de la pantalla
completa (P√°gi‚Äê
na 1819)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

Reproducci√≥n (P√°gi‚Äê
na 1821)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

9.11.2.4

Eventos

Borrada
Descripci√≥n
Aparece cuando la imagen activa desaparece del panel de operador.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Editores (P√°gina 1769)
Objetos b√°sicos (P√°gina 1770)
Elementos (P√°gina 1772)
Controles (P√°gina 1773)

Reproducci√≥n finalizada
Descripci√≥n
Se produce cuando se ha reproducido el archivo de v√≠deo o audio.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Elementos (P√°gina 1781)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1789

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Activar
Descripci√≥n
Aparece cuando el usuario selecciona un objeto de manejo y visualizaci√≥n mediante el orden
de tabulaci√≥n configurado.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.
Nota
El evento "Hacer clic" se activa cuando el usuario hace clic con el rat√≥n en un bot√≥n, p.ej. Para
disparar el evento "Activar", el usuario deber√° seleccionar el bot√≥n mediante el orden de
tabulaci√≥n.
El evento "Activar" sirve exclusivamente para reconocer si un objeto est√° seleccionado. Sin
embargo, el evento no lanza una petici√≥n de contrase√±a.
Por tanto, no utilice el evento "Activar" si quiere asociar una protecci√≥n de acceso a la llamada
de funci√≥n del objeto.

Cambio
Descripci√≥n
Aparece cuando cambia el estado de un objeto de manejo y visualizaci√≥n.
Cuando el usuario acciona un interruptor, p. ej., cambie el estado de un objeto.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Creada
Descripci√≥n
Aparece cuando un objeto de indicaci√≥n y control est√° completamente cargado en runtime.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

1790

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejecutar
Descripci√≥n
Aparece cuando se ejecuta la tarea planificada.

Selecci√≥n modificada
Descripci√≥n
Aparece cuando se modifica la selecci√≥n.

Al rebasar por exceso
Descripci√≥n
Aparece cuando se rebasa por exceso el valor l√≠mite superior de una variable.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Editores (P√°gina 1769)
Objetos b√°sicos (P√°gina 1770)
Elementos (P√°gina 1772)
Controles (P√°gina 1773)

Al rebasar por defecto
Descripci√≥n
Aparece cuando se rebasa por defecto el valor l√≠mite inferior de una variable.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1791

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Consulte tambi√©n
Editores (P√°gina 1769)
Objetos b√°sicos (P√°gina 1770)
Elementos (P√°gina 1772)
Controles (P√°gina 1773)

Cuando el cuadro de di√°logo est√° abierto
Descripci√≥n
Ocurre cuando se abre un cuadro de di√°logo modal.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Editores (P√°gina 1769)
Objetos b√°sicos (P√°gina 1770)
Elementos (P√°gina 1772)
Controles (P√°gina 1773)

Cuando el cuadro de di√°logo est√° cerrado
Descripci√≥n
Ocurre cuando se cierra un cuadro de di√°logo modal.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Editores (P√°gina 1769)
Objetos b√°sicos (P√°gina 1770)

1792

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Elementos (P√°gina 1772)
Controles (P√°gina 1773)

Cambio de usuario
Descripci√≥n
Aparece cuando un usuario finaliza la sesi√≥n en el panel de operador, o bien cuando otro
usuario inicia una sesi√≥n.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Editores (P√°gina 1769)
Objetos b√°sicos (P√°gina 1770)
Elementos (P√°gina 1772)
Controles (P√°gina 1773)

Cambio de imagen
Descripci√≥n
Aparece cuando, tras producirse un cambio de imagen, todos los objetos de manejo y
visualizaci√≥n configurados se cargan en la imagen.
Utilice el evento "Creada" para ejecutar una funci√≥n de sistema diferente al cambiar a una
imagen determinada.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Editores (P√°gina 1769)
Objetos b√°sicos (P√°gina 1770)
Elementos (P√°gina 1772)
Controles (P√°gina 1773)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1793

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Desactivar
Descripci√≥n
Aparece cuando el usuario quita el foco de un objeto de manejo y visualizaci√≥n.
Un objeto de imagen se puede desactivar mediante el orden de tabulaci√≥n configurado, o bien
utilizando el rat√≥n para realizar una acci√≥n diferente.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.
Nota
Las funciones de sistema o los scripts de usuario asociados al evento "Desactivar" de una
imagen no se ejecutan al desmarcar la imagen.
El evento "Desactivar" sirve exclusivamente para reconocer si un objeto se ha desmarcado.
Sin embargo, el evento no lanza una petici√≥n de contrase√±a.
Por tanto, no utilice el evento "Desactivar" si quiere asociar una protecci√≥n de acceso a la
llamada de funci√≥n del objeto.

Consulte tambi√©n
Editores (P√°gina 1769)
Objetos b√°sicos (P√°gina 1770)
Elementos (P√°gina 1772)
Controles (P√°gina 1773)

Hacer doble clic
Descripci√≥n
Aparece cuando el usuario hace doble clic en un objeto de la librer√≠a de s√≠mbolos.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

1794

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Pulsar
Descripci√≥n
Aparece cuando el usuario hace clic en un bot√≥n con el bot√≥n izquierdo del rat√≥n, pulsa la tecla
<INTRO> o <ESPACIO>.
Tambi√©n aparece si el usuario hace clic con el bot√≥n derecho del rat√≥n en un objeto de la
librer√≠a de s√≠mbolos.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Propiedad de aviso de operador modificada
Descripci√≥n
Aparece cuando se modifica la propiedad de un aviso de operador.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Propiedad de bloque modificada
Descripci√≥n
Aparece cuando se modifica la propiedad de un bloque, p. ej., bloque de aviso
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1795

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Propiedad diagrama modificada
Descripci√≥n
Aparece cuando se modifica la propiedad del diagrama de curvas.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Propiedad modificada
Descripci√≥n
Aparece cuando se modifica una propiedad.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Propiedad de curva modificada
Descripci√≥n
Aparece cuando se modifica la propiedad de la curva.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

1796

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Propiedad de columna modificada
Descripci√≥n
Aparece cuando se modifica la propiedad de una columna.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Propiedad de columna de estad√≠stica de avisos modificada
Descripci√≥n
Aparece cuando se modifica la propiedad de la columna de estad√≠stica de avisos.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Propiedad Nombre de columna del √°rea de estad√≠sticas modificada
Descripci√≥n
Se produce cuando se modifica el nombre de columna del √°rea de estad√≠sticas.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1797

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Propiedad Cambiar elemento de la barra de estado
Descripci√≥n
Aparece cuando se modifica la propiedad de un elemento en la barra de estado.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Propiedad Barra de herramientas Cambiar Bot√≥n
Descripci√≥n
Aparece cuando se modifica la propiedad de un bot√≥n en la barra de herramientas.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Modificar propiedad eje de valores
Descripci√≥n
Se produce cuando cambia la propiedad del eje de tiempo.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

1798

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Modificar propiedad Columna de valores
Descripci√≥n
Aparece cuando se modifica la propiedad de la columna de valores.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Propiedad de eje X modificada
Descripci√≥n
Aparece cuando se modifica la propiedad del eje X.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Propiedad de eje Y modificada
Descripci√≥n
Aparece cuando se modifica la propiedad del eje Y.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1799

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Modificar propiedad eje de tiempo
Descripci√≥n
Se produce cuando se modifica la propiedad del eje de tiempo.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

modificar propiedad columna de tiempo
Descripci√≥n
Aparece cuando se modifica la propiedad de la columna de tiempo.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Entrada finalizada
Descripci√≥n
Aparece cuando la entrada en un campo ES se confirma con la tecla Intro, con el rat√≥n o con
la pantalla t√°ctil.
El evento "Entrada finalizada" tambi√©n se inicia cuando el valor de una variable no cambia, p.
ej. al rebasar un valor, o cuando un usuario cancela el cuadro de di√°logo para acusar una
variable de acuse obligatorio, p. ej. en el paquete opcional Audit.
Por el contrario, el evento no se dispara al iniciar la sesi√≥n como usuario y en los campos de
entrada configurados con un permiso.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

1800

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Consulte tambi√©n
Editores (P√°gina 1769)
Objetos b√°sicos (P√°gina 1770)
Elementos (P√°gina 1772)
Controles (P√°gina 1773)

Pulsar ESC dos veces
Descripci√≥n
Aparece cuando el operador pulsa dos veces la tecla <ESC> en el panel de operador.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Editores (P√°gina 1769)
Objetos b√°sicos (P√°gina 1770)
Elementos (P√°gina 1772)
Controles (P√°gina 1773)

Error
Descripci√≥n
Se produce cuando tiene lugar un error cuando se crea la imagen de un segmento de
programa en el visor de c√≥digo PLC.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1801

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Desaparecido
Descripci√≥n
Aparece cuando desaparece un aviso.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Aparecido
Descripci√≥n
Aparece cuando se ha activado un aviso y √©ste se visualiza en el visor de avisos.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

En el √°rea de avisos
Descripci√≥n
Se produce cuando la memoria disponible alcanza el l√≠mite de vigilancia "Alarma" configurado.
Este evento se configura en el objeto de indicaci√≥n y control "Visor de memoria".
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

1802

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

En el rango de tolerancia
Descripci√≥n
Se produce cuando la memoria disponible alcanza el l√≠mite de vigilancia "Tolerancia"
configurado. Este evento se configura en el objeto de indicaci√≥n y control "Visor de memoria".
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

En el rango de advertencia
Descripci√≥n
Se produce cuando la memoria disponible alcanza el l√≠mite de vigilancia "Advertencia"
configurado. Este evento se configura en el objeto de indicaci√≥n y control "Visor de memoria".
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Hacer clic
Descripci√≥n
Aparece cuando el usuario hace clic con el rat√≥n en un objeto de manejo y visualizaci√≥n, o bien
cuando lo toca con el dedo en una pantalla t√°ctil.
Si ha hecho clic en un objeto err√≥neo, puede evitar que se procese la lista de funciones
configurada del modo siguiente:
‚óè Manteniendo pulsado el bot√≥n del rat√≥n, aleje el puntero del rat√≥n del objeto. Una vez que
el puntero del rat√≥n haya salido del objeto, suelte el bot√≥n del rat√≥n. En este caso, la lista
de funciones no se procesar√°.
‚óè Si utiliza una pantalla t√°ctil, toque la pantalla con el dedo hasta que se produzca una acci√≥n
(p. ej. un cambio de imagen).
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo
de objeto.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1803

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Hacer clic al parpadear
Descripci√≥n
Se activa cuando un usuario hace clic sobre un indicador de avisos intermitente con el rat√≥n o
lo toca con el dedo.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Editores (P√°gina 1769)
Objetos b√°sicos (P√°gina 1770)
Elementos (P√°gina 1772)
Controles (P√°gina 1773)

Men√∫ contextual
Descripci√≥n
Se produce cuando se abre el men√∫ contextual.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Elementos (P√°gina 1781)

1804

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Volumen
Descripci√≥n
Se produce cuando se modifica el volumen.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Elementos (P√°gina 1781)

Modificar dise√±o
Descripci√≥n
Se produce cuando se modifica una propiedad.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Modificar regla
Descripci√≥n
Se produce cuando se modifica una propiedad.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1805

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Pulsar bot√≥n izquierdo del rat√≥n
Descripci√≥n
Aparece cuando el operador hace clic en un objeto de indicaci√≥n y control con el bot√≥n
izquierdo del rat√≥n.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Soltar bot√≥n izquierdo del rat√≥n
Descripci√≥n
Aparece cuando el usuario suelta el bot√≥n izquierdo del rat√≥n tras hacer clic.
Mientras el usuario mantiene pulsado el bot√≥n izquierdo del rat√≥n no aparece este evento.
Cuando el operador suelta el bot√≥n del rat√≥n despu√©s de hacer clic en un bot√≥n aparece este
evento, tambi√©n cuando el puntero del rat√≥n ya no se encuentre sobre el bot√≥n.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Loop-In-Alarm
Descripci√≥n
El evento "Loop-In-Alarm" se produce cuando el usuario selecciona un aviso en el visor de
avisos y pulsa el bot√≥n "Loop-In-Alarm" o hace doble clic en el aviso.
El evento "Loop-In-Alarm" puede configurarse para avisos de bit y para avisos anal√≥gicos.
Para el evento "Loop-In-Alarm" se puede configurar una funci√≥n de sistema como, p. ej., pasar
a una imagen en la que se muestre m√°s informaci√≥n acerca del aviso. Si se ha configurado una
funci√≥n para el evento Loop-In-Alarm y el aviso seleccionado es de acuse obligatorio, este
aviso tambi√©n se acusa la primera vez que se dispara el evento.
Si no hay ninguna Loop-In-Alarm configurada para el aviso seleccionado, la pulsaci√≥n del
bot√≥n "Loop-In-Alarm" carece de efecto.

1806

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
En Runtime Professional no se puede asociar ning√∫n script local al evento "Loop-In-Alarm".
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Soltar
Descripci√≥n
Aparece cuando el usuario suelta un bot√≥n de comando.
Este evento no aparecer√° mientras mantenga pulsado el bot√≥n de comando.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Desbordamiento del b√∫fer de avisos
Descripci√≥n
Aparece cuando se ha alcanzado el tama√±o configurado del b√∫fer de avisos.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Editores (P√°gina 1769)
Objetos b√°sicos (P√°gina 1770)
Elementos (P√°gina 1772)
Controles (P√°gina 1773)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1807

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Desplazar rat√≥n
Descripci√≥n
Aparece cuando el operador mueve el rat√≥n.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Medio abierto
Descripci√≥n
Se produce cuando el medio est√° abierto.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Elementos (P√°gina 1781)

Medio cerrado
Descripci√≥n
Se produce cuando el medio est√° cerrado.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Elementos (P√°gina 1781)

1808

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Objeto modificado
Descripci√≥n
Aparece cuando el operador modifica en runtime una propiedad de un objeto de indicaci√≥n y
control.
Nota
Cada una de las acciones desencadenadas por este evento se inician individualmente y
finalizan con el cambio de pantalla. Este comportamiento carga la memoria de trabajo. Utilice
este evento √∫nicamente para cambios importantes de propiedades, p. ej., para un campo E/S.
Nota
La disponibilidad del evento depende del panel de operador y del tipo de objeto.

Pausa
Descripci√≥n
Se produce cuando se detiene la reproducci√≥n del archivo de v√≠deo o audio.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Elementos (P√°gina 1781)

Acusar
Descripci√≥n
Aparece cuando el usuario acusa un aviso.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1809

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Margen alcanzado
Descripci√≥n
Aparece cuando el usuario alcanza el comienzo o el final de un √°rea de desplazamiento.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.
Nota
Al evento "Margen alcanzado" no se le puede asociar ninguna funci√≥n definida por el usuario.

Objetos configurables
Este evento s√≥lo se pueden configurar en las teclas <Arriba> y <Abajo>, o bien en las teclas
en las que haya configurado las funciones de sistema "ObjetoDeImagenCursorArriba" u
"ObjetoDeImagenCursorAbajo".

Consulte tambi√©n
Editores (P√°gina 1769)
Objetos b√°sicos (P√°gina 1770)
Elementos (P√°gina 1772)
Controles (P√°gina 1773)

Pulsar bot√≥n derecho del rat√≥n
Descripci√≥n
Aparece cuando el usuario hace clic en un objeto de indicaci√≥n y control con el bot√≥n derecho
del rat√≥n.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

1810

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Soltar bot√≥n derecho del rat√≥n
Descripci√≥n
Aparece cuando el usuario suelta el bot√≥n derecho del rat√≥n tras hacer clic.
Mientras el usuario mantiene pulsado el bot√≥n derecho del rat√≥n no aparece este evento.
Cuando el operador suelta el bot√≥n del rat√≥n despu√©s de hacer clic en un bot√≥n aparece este
evento, tambi√©n cuando el puntero del rat√≥n ya no se encuentre sobre el bot√≥n.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Parada de runtime
Descripci√≥n
Aparece cuando el usuario finaliza el software runtime en el panel de operador.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.
Nota
Al evento "Parada de runtime" no se le puede asociar ninguna funci√≥n definida por el usuario.

Pulsar el bot√≥n "Visor de avisos"
Descripci√≥n
Aparece cuando el usuario pulsa el bot√≥n "Visor de avisos".
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1811

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Pulsar el bot√≥n "Visor de c√≥digo PLC"
Descripci√≥n
Aparece cuando el usuario pulsa el bot√≥n "Visor de c√≥digo PLC".
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Hacer clic en bot√≥n de la barra de herramientas
Descripci√≥n
Aparece cuando el usuario hace clic en un bot√≥n en la barra de herramientas.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Modificar deslizador
Descripci√≥n
Se produce cuando se modifica el deslizador del volumen.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Elementos (P√°gina 1781)

1812

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

PasoAdelante
Descripci√≥n
Se produce cuando el archivo de v√≠deo o audio pasa a la siguiente secuencia.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Elementos (P√°gina 1781)

PasoAtr√°s
Descripci√≥n
Se produce cuando el archivo de v√≠deo o audio pasa a la secuencia anterior.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Elementos (P√°gina 1781)

Bloqueo modificado
Descripci√≥n
Se produce cuando en el fichero cambia el acceso de escritura, p. ej., de bloqueado a
habilitado.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1813

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Estado modificado
Descripci√≥n
Aparece cuando se modifica el estado de un aviso, p. ej., de Aparecido a Desaparecido.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Parada
Descripci√≥n
Se produce cuando se para la reproducci√≥n del archivo de v√≠deo o audio.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Elementos (P√°gina 1781)

Conmutar barra de herramientas
Descripci√≥n
Se produce cuando se modifica la propiedad del eje de tiempo.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Elementos (P√°gina 1781)

1814

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Pulsar tecla
Descripci√≥n
Aparece cuando el usuario pulsa una tecla de funci√≥n.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Editores (P√°gina 1769)
Objetos b√°sicos (P√°gina 1770)
Elementos (P√°gina 1772)
Controles (P√°gina 1773)

Soltar tecla
Descripci√≥n
Aparece cuando el usuario suelta una tecla de funci√≥n.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Editores (P√°gina 1769)
Objetos b√°sicos (P√°gina 1770)
Elementos (P√°gina 1772)
Controles (P√°gina 1773)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1815

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Pulsar tecla en teclado
Descripci√≥n
Aparece cuando el usuario pulsa una tecla del teclado.
El operador no utiliza las teclas <F10> y <ALT+IMPR.> para manejar el proceso.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Soltar tecla en teclado
Descripci√≥n
Aparece cuando el usuario suelta una tecla del teclado.
El operador no utiliza las teclas <F10> y <ALT+IMPR.> para manejar el proceso.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Desbordamiento
Descripci√≥n
Aparece cuando se ha alcanzado el tama√±o configurado de un fichero. Se utilizar el tipo de
fichero "Disparar evento".
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Editores (P√°gina 1769)
Objetos b√°sicos (P√°gina 1770)

1816

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Elementos (P√°gina 1772)
Controles (P√°gina 1773)

Conmutar
Descripci√≥n
Aparece cuando el usuario conmuta un objeto de manejo y visualizaci√≥n, p. ej. un interruptor
de "ON" a "OFF".
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Editores (P√°gina 1769)
Objetos b√°sicos (P√°gina 1770)
Elementos (P√°gina 1772)
Controles (P√°gina 1773)

Conmutar OFF
Descripci√≥n
Aparece cuando el usuario mueve el objeto de manejo e indicaci√≥n "Interruptor" a la posici√≥n
OFF.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Editores (P√°gina 1769)
Objetos b√°sicos (P√°gina 1770)
Elementos (P√°gina 1772)
Controles (P√°gina 1773)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1817

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Conmutar ON
Descripci√≥n
Aparece cuando el usuario mueve el objeto de manejo e indicaci√≥n "Interruptor" a la posici√≥n
ON.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Editores (P√°gina 1769)
Objetos b√°sicos (P√°gina 1770)
Elementos (P√°gina 1772)
Controles (P√°gina 1773)

Conectado
Descripci√≥n
Aparece cuando el usuario conecta un Mobile Panel a una caja de conexi√≥n.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador.

Cambiar formato de v√≠deo
Descripci√≥n
Se produce cuando se modifica el formato de v√≠deo.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

1818

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Consulte tambi√©n
Elementos (P√°gina 1781)

Pantalla completa
Descripci√≥n
Se produce cuando se activa el modo de pantalla completa.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Elementos (P√°gina 1781)

Salir de la pantalla completa
Descripci√≥n
Se produce cuando se sale del modo de pantalla completa.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Elementos (P√°gina 1781)

Poca memoria disponible
Descripci√≥n
Aparece cuando en el medio de almacenamiento en el que se guarda un Audit Trail hay menos
espacio de memoria disponible que la cantidad m√≠nima configurada.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1819

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Consulte tambi√©n
Editores (P√°gina 1769)
Objetos b√°sicos (P√°gina 1770)
Elementos (P√°gina 1772)
Controles (P√°gina 1773)

Poca memoria disponible, cr√≠tico
Descripci√≥n
Aparece cuando en el medio de almacenamiento en el que se guarda un Audit Trail no hay
suficiente espacio de memoria disponible (debido al hardware).

Consulte tambi√©n
Editores (P√°gina 1769)
Objetos b√°sicos (P√°gina 1770)
Elementos (P√°gina 1772)
Controles (P√°gina 1773)

Cambio de valor
Descripci√≥n
Aparece cuando cambia el valor de una variable o el valor de un elemento de matriz.
El valor de una variable es modificado por el controlador o bien por el usuario (p. ej. si introduce
un nuevo valor). Si una funci√≥n del sistema cambia el valor, no se notificar√° ning√∫n evento.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Editores (P√°gina 1769)
Objetos b√°sicos (P√°gina 1770)
Elementos (P√°gina 1772)
Controles (P√°gina 1773)

1820

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Reproducci√≥n
Descripci√≥n
Se produce cuando se reproduce el archivo de v√≠deo o audio.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Elementos (P√°gina 1781)

Tiempo agotado
Descripci√≥n
Aparece una vez transcurrido el tiempo configurado en el planificador de tareas.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte tambi√©n
Editores (P√°gina 1769)
Objetos b√°sicos (P√°gina 1770)
Elementos (P√°gina 1772)
Controles (P√°gina 1773)

9.11.3

WinCC Engineering V16: Referencia para la programaci√≥n

Referencia para la programaci√≥n WinCC
Encontrar√° una descripci√≥n detallada de VB-Scripting, C-Scripting y Runtime API en el manual
"WinCC Professional V16 - Referencia para la programaci√≥n".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1821

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

1822

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Mobile Panels
10.1

Principios b√°sicos

10.1.1

Zonas

10

Introducci√≥n
El apartado siguiente es aplicable a los siguientes Mobile Panels:
‚óè KTP Mobile Panels, con cable, p. ej. Mobile Panel KTP700
El √°rea de trabajo "Zonas" es visible √∫nicamente en estos paneles de operador.

Abrir
En funci√≥n del panel de operador seleccionado, el √°rea de trabajo se abre en la ventana de
proyecto haciendo doble clic en "Zonas" o "Zonas y rangos efectivos".

√Årea de trabajo
Para Mobile Panels con cable, el √°rea de trabajo "Zonas" muestra las zonas configuradas y la
ID correspondiente a la caja de conexi√≥n.

Ventana de inspecci√≥n
Cuando una zona est√° seleccionada, el nombre y el nombre de visualizaci√≥n se editan en
"General".
En los Mobile Panels con cable se introduce la ID de la caja de conexi√≥n. La zona de una caja
de conexi√≥n tiene el evento "Conectado".
A estos eventos se debe asociar la funci√≥n de sistema "ActivarImagen".

Consulte tambi√©n
Documentaci√≥n completa de los Mobile Wireless (http://
support.automation.siemens.com/WW/view/es/26268960)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1823

Mobile Panels
10.1 Principios b√°sicos

10.1.2

√Årea de trabajo Zonas en cajas de conexi√≥n

Introducci√≥n
En el √°rea de trabajo "Zonas", las IDs de las cajas de conexi√≥n y sus zonas se visualizan en
forma de tabla.
Debe crearse una lista de IDs de cajas de conexi√≥n y asignar determinadas cajas de conexi√≥n
a una zona. El l√≠mite de la zona se define por la longitud del cable de conexi√≥n del Mobile Panel.

Principio
El √°rea de trabajo est√° formada por la tabla "Zonas".

La ID de caja se ajusta en la caja de conexi√≥n y puede leerse desde el panel de operador.

1824

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Mobile Panels
10.2 Configuraci√≥n de los KTP Mobile Panels para el modo de seguridad positiva

10.2

Configuraci√≥n de los KTP Mobile Panels para el modo de seguridad
positiva

10.2.1

Crear un KTP Mobile Panel para el modo de seguridad

Introducci√≥n
Para los siguientes KTP Mobile Panels, el modo de seguridad se configura en el editor
"Dispositivos y redes":
‚óè KTP400F Mobile Panel
‚óè KTP700F Mobile Panel
‚óè KTP900F Mobile Panel

Requisitos
‚óè La ventana de inspecci√≥n est√° abierta.
‚óè Hay un PLC creado en el proyecto para el modo de seguridad, p. ej., CPU-1517F-2PN/DP.

Insertar un Mobile Panel en el proyecto
1. Haga clic en "Agregar dispositivo" en el √°rbol del proyecto.
2. Haga clic en "HMI" en el cuadro de di√°logo "Agregar dispositivo".
3. Elija un KTP Mobile Panel para el modo de seguridad, p. ej., Mobile Panel KTP700F. El
panel se inserta en el proyecto.

Configurar el modo de seguridad para el Mobile Panel
1. Abra la vista de redes en el editor "Dispositivos y redes".
2. Seleccione el Mobile Panel en el √°rea de trabajo.
3. En la ventana de inspecci√≥n, active "Propiedades > General > Modo de operaci√≥n >
Dispositivo IO".
4. Asigne el PLC de seguridad mediante "Controlador IO asignado".
PROFINET est√° activado y se muestran las √°reas de transferencia de la comunicaci√≥n IDevice.
5. En la ventana de inspecci√≥n, en "Propiedades > General > PROFIsafe", haga clic en
"Activar PROFIsafe".
PROFIsafe est√° activado, y en "Propiedades > General > Par√°metros PROFIsafe >
Par√°metros F" se muestran los par√°metros F.
6. Para introducir un nuevo tiempo de vigilancia F, active "Asignaci√≥n manual de tiempo de
vigilancia F".
7. Introduzca un tiempo de vigilancia F adecuado para su panel de operador y su instalaci√≥n.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1825

Mobile Panels
10.2 Configuraci√≥n de los KTP Mobile Panels para el modo de seguridad positiva

Resultado
El modo de seguridad para el KTP Mobile Panel est√° configurado en WinCC. A continuaci√≥n,
cree en STEP 7 los bloques F correspondientes e intercon√©ctelos en el controlador. En el
Mobile Panel debe ajustarse la direcci√≥n PROFIsafe.
Para m√°s informaci√≥n sobre parametrizaci√≥n y programaci√≥n de bloques F, ver el manual
"SIMATIC Safety - Configuring and Programming" de la documentaci√≥n STEP 7 y el manual de
producto de su Mobile Panel.

10.2.2

Configurar la desconexi√≥n PROFIsafe

Procedimiento
Antes de desenchufar el Mobile Panel de una caja de conexi√≥n, hay que desconectar
PROFIsafe.
Para desconectar PROFIsafe, utilice la funci√≥n de sistema "DesconectarPROFIsafe". La
funci√≥n de sistema reenv√≠a la llamada al m√≥dulo PROFINET I/O de seguridad.

Requisitos
‚óè Se ha creado un Mobile Panel para el modo de seguridad, p. ej., KTP700F Mobile Panel.
‚óè Se ha creado y abierto una imagen.

Procedimiento
Para configurar el establecimiento de conexi√≥n PROFIsafe y la desconexi√≥n, proceda del
siguiente modo:
‚óè Asocie la funci√≥n de sistema "DesconectarPROFIsafe", p. ej., a un bot√≥n o util√≠cela en un
script.

Resultado
Cuando en runtime se inicia el disparador configurado para desconectar PROFIsafe, se abre
un cuadro de di√°logo para finalizar la conexi√≥n PROFIsafe. El usuario puede seleccionar "S√≠"
o "No".

1826

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Mobile Panels
10.3 Trabajar con zonas de cajas de conexi√≥n

10.3

Trabajar con zonas de cajas de conexi√≥n

10.3.1

Configurar una zona de una caja de conexi√≥n

Validez
El p√°rrafo siguiente es aplicable a todos los KTP Mobile Panels p. ej. el Mobile Panel KTP700.

Introducci√≥n
Las zonas se configuran para realizar tareas de manejo y visualizaci√≥n espec√≠ficas de la
instalaci√≥n.

Requisitos
‚óè En el editor "Idiomas del proyecto" est√° ajustado el idioma de edici√≥n correcto, p. ej.
"Espa√±ol".
‚óè El √°rea de trabajo "Zonas" est√° abierta.

Procedimiento
1. Haga doble clic en "Agregar..." en la tabla "Zonas".
2. Como "ID" introduzca la ID de su caja de conexi√≥n.
3. Como "Nombre" de la zona, introduzca "MixingPlant".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1827

Mobile Panels
10.3 Trabajar con zonas de cajas de conexi√≥n
4. Introduzca como "Nombre de visualizaci√≥n" de la zona en runtime "Planta mezcladora".

5. Repita estos pasos para todas las cajas de conexi√≥n necesarias en el proyecto.

Resultado
La zona "MixingPlant" est√° configurada. El alcance de la zona viene definido por la longitud del
cable de conexi√≥n del Mobile Panel.
El nombre de visualizaci√≥n designa la zona en el idioma de edici√≥n ajustado. Encontrar√° una
relaci√≥n de los nombres de visualizaci√≥n en el editor "Textos del proyecto".

10.3.2

Llamada de funciones de sistema al conectar a la caja de conexi√≥n

Introducci√≥n
Existe la posibilidad de lanzar distintas funciones de sistema al entrar en una zona, p. ej., llamar
una imagen emergente configurada o iniciar o cerrar la sesi√≥n del usuario actual. Adem√°s,
puede utilizar funciones VB definidas por el usuario que tambi√©n podr√° seleccionar en la lista
de funciones.
En el siguiente ejemplo, se configura la imagen que se mostrar√° al conectar un Mobile Panel
a una caja de conexi√≥n.

1828

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Mobile Panels
10.4 Referencia

Requisitos
‚óè Se ha creado un Mobile Panel que soporta zonas, p. ej. Mobile Panel KTP700.
‚óè La zona "MixingPlant" est√° configurada.
‚óè La imagen "Plant_1" est√° creada y abierta.
‚óè La imagen "MixingPlant_1" est√° creada y abierta.
‚óè El √°rea de trabajo "Zonas" est√° abierta.

Procedimiento
1. Seleccione la zona "MixingPlant" en la tabla "Zonas".
2. En la ventana de inspecci√≥n haga clic en "Propiedades > Eventos".
3. Haga clic en el evento "Conectado".
4. Seleccione la funci√≥n de sistema "ActivarImagen" en la "Lista de funciones".
5. Seleccione "MixingPlant_1" como "Nombre de imagen".

Resultado
Cuando el Mobile Panel se conecta a la caja de conexi√≥n de la zona "MixingPlant", en la
pantalla del panel de operador se muestra la imagen "MixingPlant_1".

10.4

Referencia

10.4.1

Direcci√≥n PROFIsafe

Validez
La direcci√≥n PROFIsafe est√° disponible para Mobile Panels Wireless y dispositivos KTP F.
Nota
Para m√°s informaci√≥n sobre el funcionamiento de seguridad, consulte las instrucciones de
servicio del panel de operador:
Documentaci√≥n completa de los Mobile Wireless (http://
support.automation.siemens.com/WW/view/es/26268960)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1829

Mobile Panels
10.4 Referencia

Direcci√≥n PROFIsafe
La direcci√≥n PROFIsafe es la direcci√≥n un√≠voca en la red y en el equipo de la periferia F en la
comunicaci√≥n PROFIsafe. En el caso de los Mobile Panels Wireless se almacena un valor
est√°ndar en el proyecto que se carga luego en el panel de operador. En el panel de operador
tambi√©n se puede almacenar una direcci√≥n PROFIsafe.
La direcci√≥n PROFIsafe debe estar comprendida entre 1 y 65534. Tanto en el Engineering
System como en el panel de operador se comprueba la validez de las direcciones PROFIsafe.
Al inicio de runtime, la direcci√≥n PROFIsafe se carga como se indica a continuaci√≥n:
‚óè En el Control Panel se ha parametrizado una direcci√≥n PROFIsafe v√°lida:
El panel de operador carga la direcci√≥n PROFIsafe configurada en el Control Panel.

10.4.2

Administraci√≥n de energ√≠a

Validez
En el editor "Configuraci√≥n de runtime > Administraci√≥n de energ√≠a" se configura el modo de
ahorro de energ√≠a de un Mobile Panel.

Administraci√≥n de energ√≠a
El Mobile Panel Wireless puede ahorrar energ√≠a de las maneras siguientes:
‚óè Reducir el brillo (ahorro leve)
‚óè Apagar monitor, ahorro considerable
Indique al cabo de cu√°nto tiempo sin intervenci√≥n del operador se debe activar la
administraci√≥n de energ√≠a. El enlace de comunicaci√≥n se conserva. El tiempo para "Apagar
monitor" es mayor que el tiempo para "Reducir brillo".

1830

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Planificar tareas
11.1

Principios b√°sicos

11.1.1

Campo de aplicaci√≥n del planificador de tareas

11

Definici√≥n
En el planificador de tareas se configuran las tareas que se ejecutar√°n en segundo plano,
independientemente de la imagen. Las tareas se crean vinculando las funciones de sistema o
scripts a un disparador. Cuando se produce el evento activador, se llaman las funciones
vinculadas.

Ejemplo de aplicaci√≥n
El planificador de tareas sirve para ejecutar tareas controladas por eventos de forma
automatizada. Con una tarea es posible automatizar p. ej. que
‚óè los datos de fichero se trasvasen en intervalos regulares
‚óè se imprima un informe al desbordarse el b√∫fer de avisos
‚óè se imprima un informe al finalizar el turno
‚óè se vigile una variable
‚óè se vigile un cambio de usuario
Nota
La disponibilidad de los ejemplos mencionados depende del panel de operador.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1831

Planificar tareas
11.1 Principios b√°sicos

11.1.2

Trabajar con tareas y disparadores

Introducci√≥n
Una tarea comprende un disparador y un tipo de tarea.

Inicio de una tarea
Controlada por un disparador, el planificador de tareas inicia la tarea vinculada al disparador.

11.1.3

√Årea de trabajo del editor Planificador de tareas

Introducci√≥n
El planificador de tareas se abre en la ventana del proyecto haciendo doble clic en "Planificador
de tareas". El √°rea de trabajo muestra las tareas planificadas, que se componen del disparador
que las desencadena y el tipo de tarea, p. ej. la lista de funciones.

1832

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Planificar tareas
11.1 Principios b√°sicos

Estructura
El √°rea de trabajo est√° formada por la tabla de tareas.

La tabla de las tareas muestra las tareas definidas con sus propiedades, p. ej. el disparador
que las desencadena. Hay que seleccionar un tipo de tarea y un disparador y asignar un
nombre y un comentario a la tarea. La descripci√≥n resume en forma de texto la tarea con la
hora planificada.

Ventana de inspecci√≥n
La ficha "Propiedades" de la ventana de inspecci√≥n se divide en dos √°reas.
El √°rea "Tarea" muestra tambi√©n el nombre y el tipo de tarea. El √°rea "Instante de inicio"
muestra el disparador desencadenante. El √°rea var√≠a seg√∫n sea la selecci√≥n del disparador.
En la ficha "Eventos" se configura la lista con las funciones de sistema que se ejecutar√°n en
la tarea.
Nota
Encontrar√° m√°s informaci√≥n sobre los objetos de la interfaz en los tooltips. Desplace para ello
el puntero del rat√≥n hasta el objeto deseado, o bien pulse <F1> si el objeto est√° seleccionado.

11.1.4

Disparador

Introducci√≥n
Un disparador se vincula a una tarea y, de este modo, forma el evento que desencadena la
llamada de esta tarea. Cuando aparece el disparador, se ejecuta la tarea.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1833

Planificar tareas
11.1 Principios b√°sicos

Disparo por eventos
Cuando una tarea est√° vinculada a un evento de sistema, se lanza controlada por el evento.
Son eventos del sistema, por ejemplo, la parada de runtime, el cambio de imagen, el cambio
de usuario, etc.
Cada evento de sistema puede configurarse una sola vez por panel de operador.

Desactivar una tarea
Si una tarea no se necesita temporalmente, es posible desactivarla en el sistema de ingenier√≠a.
El disparador "Desactivado" vuelve a poner a disposici√≥n un evento de sistema ya configurado.
Ejemplo: Ha planificado una tarea "A" con el evento de sistema "Parada de runtime". Por tanto,
este evento de sistema ya no estar√° disponible para la tarea "B". Para volver a poner a
disposici√≥n el evento de sistema "Parada de runtime", seleccione en la tarea "A" el disparador
"Desactivado".
Nota
Los disparadores disponibles dependen del panel de operador.

11.1.5

Disparador

Introducci√≥n
Un disparador se vincula a una tarea y, de este modo, forma el evento que desencadena la
llamada de esta tarea. Cuando aparece el disparador, se ejecuta la tarea.
Nota
Los disparadores disponibles dependen del panel de operador.

Tipos de disparador
El planificador de tareas distingue entre diferentes tipos de disparador:

Disparadores ac√≠clicos
Consisten en la indicaci√≥n de la fecha y hora. El planificador de tareas ejecuta las tareas con
disparador ac√≠clico una vez en la fecha y la hora indicadas.

1834

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Planificar tareas
11.1 Principios b√°sicos

Disparadores c√≠clicos
Las tareas que est√°n vinculadas a un disparador c√≠clico se producen peri√≥dicamente en un
momento determinado.
‚óè Ciclo est√°ndar: en el ciclo est√°ndar, el principio del primer intervalo de tiempo coincide con
el inicio de runtime. La longitud del intervalo viene determinada por el ciclo.
‚óè Disparador con un instante de inicio definido: se definen un instante de inicio y un intervalo
de tiempo. Con disparadores c√≠clicos, las tareas se ejecutan diaria o semanalmente, por
ejemplo. Si se elige "Semanal" como disparador, por ejemplo, la longitud del intervalo ser√°
una semana. El principio del intervalo de tiempo se define con el d√≠a de la semana y la hora.
‚óè El disparo m√°s r√°pido disponible para Runtime Professional es de 250 ms.
Nota
Ciclos definidos por el usuario
Se han definido ciclos propios. En el planificador de tareas solo pueden utilizarse ciclos cuyos
valores no excedan de una hora.

Disparo por eventos
Cuando una tarea est√° vinculada a un evento de sistema, se lanza controlada por el evento.
Al contrario que los disparadores c√≠clicos, los eventos de sistema suelen aparecer
ac√≠clicamente. Un evento de sistema es p. ej. una parada de runtime.
Cada evento de sistema puede configurarse una sola vez por panel de operador.

Desactivar una tarea
Si una tarea no se necesita temporalmente, es posible desactivarla en el sistema de ingenier√≠a.
El disparador "Desactivado" vuelve a poner a disposici√≥n un evento de sistema ya configurado.
Ejemplo: Ha planificado una tarea "A" con el evento de sistema "Cambio de usuario". Por tanto,
este evento de sistema ya no estar√° disponible para la tarea "B". Para volver a poner a
disposici√≥n el evento de sistema "Cambio de sistema", seleccione en la tarea "A" el disparador
"Desactivado".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1835

Planificar tareas
11.1 Principios b√°sicos

11.1.6

Temporizador en disparadores c√≠clicos

Temporizador en disparadores c√≠clicos y ac√≠clicos
Existe la posibilidad de modificar din√°micamente el instante de inicio de una tarea en runtime.
Como temporizador se selecciona una variable HMI. El valor de la variable determinar√° en
runtime el momento en que se iniciar√° la tarea.
Nota
Una variable HMI debe ser del tipo "DateTime". Una variable PLC debe ser del tipo "Date and
Time" o "DTL".
Si el operador no modifica la variable tras el inicio de runtime, el instante de inicio ser√° el
momento configurado en la tarea. Cuando el operador modifique la variable por primera vez,
el valor actual de la misma ser√° siempre el instante de inicio. Para poder reajustar el momento
configurado como instante de inicio, el operador deber√° introducir el momento configurado.

11.1.7

Disparador de variable

Disparador de variable
Adem√°s de los disparadores ac√≠clicos y c√≠clicos y de los disparos por eventos, WinCC tambi√©n
dispone del disparador de variable.
Los disparadores de variable consisten en la indicaci√≥n de una o varias variables. La tarea que
est√° vinculada a un disparador de este tipo s√≥lo se ejecuta cuando cambia un valor de variable.
De este modo se consigue reducir la carga del sistema. Es posible ajustar individualmente para
cada variable el ciclo en el que se consultar√°n los valores de variable. Para los ciclos de
consulta se elige entre "250 ms" y una vez por hora. Adicionalmente, existen ciclos de usuario
definidos por el propio usuario.

1836

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Planificar tareas
11.1 Principios b√°sicos

Reglas para seleccionar el disparador
Al procesar variables, utilice el disparador de variable en lugar del disparador c√≠clico. Con ello
se reduce la carga del sistema.
‚óè Disparador de variable
La tarea s√≥lo se ejecuta cuando cambia el valor de la variable.
= la tarea se ejecuta.

‚óè Disparador c√≠clico
Se han seleccionado, por ejemplo, "10 segundos" como disparador c√≠clico. Cuando
aparece el disparador, se ejecuta una tarea.
= la tarea se ejecuta.

11.1.8

Lista de funciones

Lista de funciones
Un disparador inicia la lista de funciones. La lista de funciones se procesa fila por fila. Cada fila
contiene una funci√≥n de sistema. En cada tarea se configura exactamente una lista de
funciones.
Nota
Las funciones de sistema configurables que se pueden seleccionar en una lista de funciones
dependen del disparador seleccionado y del panel de operador utilizado.

Consulte tambi√©n
Conexi√≥n de VB Scripts locales (P√°gina 1840)
Conexi√≥n de C Scripts locales (P√°gina 1841)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1837

Planificar tareas
11.1 Principios b√°sicos

11.1.9

Lista de funciones

Lista de funciones
Un disparador inicia la lista de funciones. La lista de funciones se procesa fila por fila. Cada fila
contiene una funci√≥n de sistema o un script local. En cada tarea se configura exactamente una
lista de funciones.
Nota
Las funciones de sistema configurables que se pueden seleccionar en una lista de funciones
dependen del disparador seleccionado y del panel de operador utilizado.

Procesamiento de funciones de sistema y scripts
Por norma general, las funciones de sistema y los scripts contenidos en una lista de funciones
se procesan en runtime de forma secuencial, es decir, de arriba a abajo.
Para programar procesos no secuenciales y condicionados, utilice un script con bucles,
instrucciones condicionadas y condiciones de interrupci√≥n.

11.1.10

Trabajo de impresi√≥n

Introducci√≥n
Adem√°s de la "Lista de funciones", WinCC Runtime Professional tambi√©n dispone del tipo de
tarea "Trabajo de impresi√≥n".

1838

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Planificar tareas
11.1 Principios b√°sicos

Trabajo de impresi√≥n
Para imprimir el informe se crea un trabajo de impresi√≥n. Si aparece un disparador c√≠clico o
ac√≠clico, el planificador de tareas inicia la impresi√≥n de un informe. En el editor "Trabajos de
impresi√≥n" se definen previamente el volumen de p√°ginas y el rango de tiempo del informe.
Asimismo, se especifica si el informe debe imprimirse en la impresora o en un archivo.

Si se ha seleccionado "Trabajo de impresi√≥n" como tipo de tarea, en el √°rea "Tarea" aparece
un campo adicional. En el campo "Trabajo de impresi√≥n" se selecciona el trabajo de impresi√≥n
previamente definido para la tarea.
Nota
Para utilizar el tipo de tarea "Trabajo de impresi√≥n", active "Trabajos de impresi√≥n previstos en
runtime" en la secuencia de inicio de WinCC Runtime.
Haga clic en el editor "Configuraci√≥n de runtime > Servicios > Trabajos de impresi√≥n previstos
en runtime".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1839

Planificar tareas
11.1 Principios b√°sicos

11.1.11

Conexi√≥n de VB Scripts locales

Introducci√≥n
Adem√°s de los tipos de tarea "Lista de funciones" y "Trabajo de impresi√≥n", Runtime
Professional tambi√©n dispone de una conexi√≥n de VB scripts locales.

Conexi√≥n de VB Scripts locales
Los scripts locales son creados y modificados por el usuario. Tambi√©n es posible convertir en
un script local las funciones de sistema ofrecidas en la lista de funciones y editar
posteriormente el c√≥digo. El VB Script local se guarda junto con la tarea.
Un disparador inicia el script en runtime. Si se convierte una lista de funciones en un VB Script,
ya no ser√° posible acceder a la lista de funciones para la tarea en cuesti√≥n. Para acceder de
nuevo a la lista de funciones hay que borrar el VB Script.
El planificador de tareas ofrece la posibilidad de iniciar VB Scripts independientemente de
im√°genes. En los VB Scripts se accede a las variables e im√°genes en runtime.
No existe ning√∫n √°rea de datos com√∫n entre los scripts del planificador de tareas y los de las
im√°genes. Los scripts del planificador de tareas y de las im√°genes s√≥lo se sincronizan por
medio del objeto DataSet o de variables. El tipo de datos de las variables VBS es siempre
VARIANT.
El VB Script local no se procesa en paralelo. El √∫ltimo script lanzado se pone en un bucle de
espera hasta que pueda procesarse.
Nota
Al crear un script, la instrucci√≥n "Option explicit" se registra autom√°ticamente en el √°rea de
declaraci√≥n, y no puede borrarse. Dicha instrucci√≥n es necesaria para impedir errores
causados por una notaci√≥n err√≥nea de las variables sin declaraci√≥n.
La instrucci√≥n requiere que las variables siempre se definan con la instrucci√≥n "Dim" en el
c√≥digo. No utilice la instrucci√≥n "Option explicit" en el c√≥digo, pues podr√≠an producirse errores
en el tiempo de ejecuci√≥n.

Requisitos
Para utilizar la lista de funciones y los scripts locales, active "Tareas en runtime" en la
secuencia de inicio de WinCC.
Haga clic en el editor "Configuraci√≥n de runtime > Servicios > Tareas en runtime".
Nota
No es posible llamar C Scripts en VB Scripts ni viceversa.

1840

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Planificar tareas
11.1 Principios b√°sicos

Ciclos de usuario como disparador
Si se utilizan ciclos de usuario como disparadores para VB scripts, los scripts se ejecutar√°n en
runtime siempre con una granularidad de 250 ms.

Consulte tambi√©n
Lista de funciones (P√°gina 1837)

11.1.12

Conexi√≥n de C Scripts locales

Introducci√≥n
Adem√°s de los tipos de tarea "Lista de funciones" y "Trabajo de impresi√≥n", Runtime
Professional tambi√©n dispone de una conexi√≥n de C scripts locales.

Conexi√≥n de C Scripts locales
Los scripts locales son creados y modificados por el usuario. Tambi√©n es posible convertir en
un C Script local las funciones de sistema ofrecidas en la lista de funciones y editar
posteriormente el c√≥digo. El C Script local se guarda junto con la tarea.
Un disparador inicia el script en runtime. Si se convierte una lista de funciones en un C Script,
ya no ser√° posible acceder a la lista de funciones para la tarea en cuesti√≥n. Para acceder de
nuevo a la lista de funciones hay que borrar el C Script.
Un disparador inicia el C Script local en runtime.
El C Script local no se procesa en paralelo. El √∫ltimo script lanzado se pone en un bucle de
espera hasta que pueda procesarse.

Requisitos
Para utilizar la lista de funciones y los scripts locales, active "Tareas en runtime" en la
secuencia de inicio de WinCC.
Haga clic en el editor "Configuraci√≥n de runtime > Servicios > Tareas en runtime".
Nota
No es posible llamar C Scripts en VB Scripts ni viceversa.

Ciclos de usuario como disparador
Si se utilizan ciclos de usuario como disparadores para C scripts, los scripts se ejecutar√°n en
runtime siempre con una granularidad de 250 ms.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1841

Planificar tareas
11.2 Planificar tareas

Consulte tambi√©n
Lista de funciones (P√°gina 1837)

11.2

Planificar tareas

11.2.1

Planificar una tarea con el disparador ac√≠clico

Introducci√≥n
Se prev√© finalizar una √∫nica vez el runtime para trabajos de mantenimiento. La tarea inicia una
funci√≥n que finaliza el runtime.

Requisitos
‚óè El editor "Planificador de tareas" est√° abierto.
‚óè La ventana de inspecci√≥n est√° abierta.

Procedimiento
1. Haga clic en "Agregar..." en la tabla del √°rea de tareas.
2. Introduzca el nombre "Mantenimiento al finalizar el a√±o".
3. Seleccione el disparador "Una vez".
4. En la ventana de inspecci√≥n seleccione "31.12.2008" en "Propiedades > Propiedades >
General > el".
5. En el campo "a las", indique las "18:00" horas.
6. Haga clic en la ventana de inspecci√≥n "Propiedades > Eventos".

1842

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Planificar tareas
11.2 Planificar tareas
7. Seleccione la funci√≥n de sistema "PararRuntime" en la lista de funciones.
8. Bajo "Modo", seleccione "Runtime".

Resultado
La tarea se ejecuta una sola vez. El 31 de diciembre de 2008 a las 18:00 horas se parar√° el
runtime.
Nota
Evento "PararRuntime" en RT Professional
Tenga en cuenta que en el evento "PararRuntime", el runtime ya est√° finalizando y, por lo tanto,
no todas las funciones est√°n disponibles.

11.2.2

Planificar una tarea con el disparador c√≠clico

Introducci√≥n
Se planifica una tarea que inicie la impresi√≥n diaria de un informe.

Requisitos
‚óè Se ha creado un panel de operador con Runtime Professional.
‚óè El trabajo de impresi√≥n "Informe diario de avisos" est√° creado.
‚óè El √°rea de trabajo "Planificador de tareas" est√° abierta.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1843

Planificar tareas
11.2 Planificar tareas

Procedimiento
1. Haga clic en "Agregar..." en la tabla del √°rea de tareas.
2. Seleccione el tipo "Trabajo de impresi√≥n".
3. En "Nombre", introduzca "Impresi√≥n diaria del informe de avisos".
4. Seleccione el disparador "Diario".
5. Indique las "18:00" horas en la ventana de inspecci√≥n "Propiedades > Propiedades >
General > a las".
6. Seleccione el trabajo de impresi√≥n "Informe diario de avisos" en el √°rea "Tarea".

7. Abra el editor "Configuraci√≥n de runtime > Servicios".
8. Active "Secuencia de inicio de WinCC Runtime > Trabajos de impresi√≥n previstos en
runtime".

1844

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Planificar tareas
11.2 Planificar tareas

Resultado
El "Informe diario de avisos" se imprime cada d√≠a a las 18 horas.

11.2.3

Planificar una tarea con el disparo por eventos

Introducci√≥n
Se planifica una tarea que lance un cambio de imagen al cambiar de usuario.

Requisitos
‚óè El √°rea de trabajo "Planificador de tareas" est√° abierta.
‚óè La imagen "Inicio" se deber√° haber creado.

Procedimiento
1. Haga clic en "Agregar..." en la tabla del √°rea de tareas.
2. En "Nombre", introduzca "Cambio de imagen al cambiar de usuario".
3. Seleccione el disparador "Cambio de usuario".
4. En la ventana de inspecci√≥n haga clic en "Propiedades > Eventos".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1845

Planificar tareas
11.2 Planificar tareas
5. Seleccione la funci√≥n de sistema "Im√°genes/ActivarImagen" en la lista de funciones.
6. Seleccione la imagen "Inicio" en el campo "Nombre de imagen".

Resultado
La tarea se ejecutar√° con el evento "Cambio de usuario". Si un usuario nuevo inicia una sesi√≥n,
aparecer√° la imagen "Inicio".

11.2.4

Administrar una tarea

Cambiar denominaci√≥n
1. Haga doble clic en el campo situado en la columna "Nombre" de la vista.
2. Cambie el nombre de la tarea.
3. Confirme con la tecla <Return>.

1846

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Planificar tareas
11.3 Ejemplos de Runtime Professional
Otra posibilidad es cambiar el nombre en la ventana de inspecci√≥n "Tarea > Nombre".

Modificar un disparador
1. Seleccione el campo de la columna "Disparador" en el √°rea de trabajo.
2. Abra la lista de selecci√≥n pulsando el bot√≥n

y seleccione el disparador que desee.

Otra posibilidad es cambiar el disparador en el √°rea "Instante de inicio" de la ventana de
inspecci√≥n.

Borrar una tarea
1. Seleccione una o varias l√≠neas de la tarea que desea borrar.
2. Abra con el bot√≥n derecho del rat√≥n el men√∫ contextual y seleccione el comando "Borrar".
Otra posibilidad es borrar una o varias tareas con ayuda del bot√≥n <SUPR>.

11.3

Ejemplos de Runtime Professional

11.3.1

Ejemplo: activar la imagen inicial cada d√≠a

Introducci√≥n
Se planifica una tarea que active cada d√≠a, antes de que empiece el turno, la imagen inicial con
el cuadro de di√°logo de inicio de sesi√≥n.

Requisitos
‚óè Se ha creado una "Imagen inicial".
‚óè El √°rea de trabajo "Planificador de tareas" est√° abierta.

Procedimiento
1. Haga clic en "Agregar..." en la tabla "Tareas".
2. En "Nombre", escriba "Activar imagen inicial".
3. Seleccione el tipo "Lista de funciones".
4. Seleccione el disparador "Diario".
5. Indique las "05:30" horas en la ventana de inspecci√≥n "Propiedades > Propiedades >
General > a las".
6. En la ventana de inspecci√≥n abra "Propiedades > Eventos".
7. Seleccione la funci√≥n de sistema "ActivarImagen" en el grupo "Im√°genes" de la lista de
funciones.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1847

Planificar tareas
11.3 Ejemplos de Runtime Professional
8. En "Nombre de imagen", seleccione "Imagen inicial".

9. Abra el editor "Configuraci√≥n de runtime > Servicios".
10.Active "Tareas en runtime".

Resultado
La "Imagen inicial" se activa cada d√≠a a las 5:30 horas.

11.3.2

Ejemplo: impresi√≥n √∫nica de un informe

Tarea
Se planifica una tarea que emita un informe una sola vez al finalizar el a√±o.

Requisitos
‚óè La tarea de impresi√≥n "Resumen anual" est√° creada.

1848

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Planificar tareas
11.3 Ejemplos de Runtime Professional

Procedimiento
1. Haga clic en "Agregar..." en la tabla del √°rea de tareas.
2. En "Nombre", escriba "Cierre anual".
3. Seleccione el tipo "Trabajo de impresi√≥n".
4. Seleccione el disparador "Una vez".
5. En la ventana de inspecci√≥n seleccione la fecha "31.12.2010" en "Propiedades >
Propiedades > General > el".
6. En el campo "a las", indique las "22:00" horas.
7. Seleccione el trabajo de impresi√≥n "Resumen anual" en el √°rea "Tarea".

8. Abra el editor "Configuraci√≥n de runtime > Servicios".
9. Active "Secuencia de inicio de WinCC Runtime > Trabajos de impresi√≥n previstos en
runtime".

Resultado
El 31.12.2008 a las 22:00 horas se iniciar√° el trabajo de impresi√≥n "Resumen anual".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1849

Planificar tareas
11.3 Ejemplos de Runtime Professional

11.3.3

Ejemplo: leer el nombre del usuario actual

Introducci√≥n
Se planifica una tarea que escriba el usuario actual en un campo de texto.

Requisitos
‚óè Se ha creado una "Screen_1".
‚óè Se ha creado un campo de texto "Textfield_1" en la imagen "Screen_1".
‚óè El √°rea de trabajo "Planificador de tareas" est√° abierta.

Procedimiento
1. Haga clic en "Agregar..." en la tabla del √°rea de tareas.
2. En "Nombre", introduzca "Leer el nombre de usuario".
3. Seleccione el disparador "Disparador de variable".
4. En la ventana de inspecci√≥n haga clic en "Propiedades > Propiedades > General > A√±adir
disparador".
5. Seleccione la variable de sistema "@CurrentUser".
6. Seleccione el ciclo "1 min".
7. En la ventana de inspecci√≥n abra "Propiedades > Eventos".
8. Haga clic en

en el √°rea "Lista de funciones".

9. Introduzca el VB Script siguiente:

Sub Action ()
Dim user
user = HMIRuntime.Tags("@CurrentUser").Read
HMIRuntime.Screens("Screen_1").ScreenItems("Textfield_1").Text = user
End Sub

1. Abra el editor "Configuraci√≥n de runtime > Servicios".
2. Active "Tareas en runtime".

Resultado
Cuando cambie el valor de la variable, el usuario actual se escribir√° en el campo de texto
"Textfield_1".

1850

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Planificar tareas
11.3 Ejemplos de Runtime Professional

11.3.4

Ejemplo: incrementar una variable

Introducci√≥n
Se planifica una tarea que cada hora incremente en uno el valor de una variable.

Requisitos
‚óè Se ha creado un panel de operador con Runtime Professional.
‚óè El √°rea de trabajo "Planificador de tareas" est√° abierta.
‚óè La variable "Tag1" est√° creada.

Procedimiento
1. Haga clic en "Agregar..." en la tabla del √°rea de tareas.
2. Seleccione el tipo "Lista de funciones".
3. En "Nombre", escriba "Incrementar variable".
4. Seleccione como "disparador" "1 hora".
5. En la ventana de inspecci√≥n "Propiedades > Propiedades > General > Instante de inicio >
al minuto" especifique el valor "35:00".
6. En la ventana de inspecci√≥n abra "Propiedades > Eventos".
7. Haga clic en

en el √°rea "Lista de funciones".

8. Introduzca el siguiente c√≥digo de programa en el campo de entrada:

Sub Action ()
Dim objTag1
Dim lngValue
Set objTag1 = HMIRuntime.Tags("Tag1")
lngValue = objTag1.Read
objTag1.Write lngValue + 1
End Sub

1. Abra el editor "Configuraci√≥n de runtime > Servicios".
2. Active "Tareas en runtime".

Resultado
La variable se incrementa c√≠clicamente.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1851

Planificar tareas
11.4 Ejemplos de Runtime Advanced y Panels

11.4

Ejemplos de Runtime Advanced y Panels

11.4.1

Ejemplo: actualizar los usuarios al cambiar de usuario

Tarea
Desea configurar un campo E/S en el que se visualice el usuario que ha iniciado la sesi√≥n.
Desea planificar una tarea que actualice el campo E/S al cambiar de usuario.

Requisitos
‚óè Se deber√° haber creado una variable "CurrentUser" del tipo "String".
‚óè Se ha creado y abierto una imagen.
‚óè Se ha creado un campo E/S en la imagen.

Procedimiento
1. Haga clic en el objeto "Campo E/S".
2. En la ventana de inspecci√≥n haga clic en "Propiedades > Propiedades > General":
‚Äì Seleccione el formato de visualizaci√≥n "Cadena de caracteres".
‚Äì Seleccione la variable "CurrentUser".
‚Äì Seleccione el modo "Salida".
3. Conmute al √°rea de trabajo del planificador de tareas.
4. Haga clic en "Agregar..." en la tabla del √°rea de tareas.
5. En "Nombre", introduzca "CurrentUser".
6. Seleccione el disparador "Cambio de usuario".
7. En la ventana de inspecci√≥n haga clic en "Propiedades > Eventos".

1852

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Planificar tareas
11.4 Ejemplos de Runtime Advanced y Panels
8. Seleccione la funci√≥n de sistema "LeerNombreDeUsuario" en el grupo "Administraci√≥n de
usuarios" de la lista de funciones.
9. Seleccione la variable "CurrentUser".

Resultado
Cuando un nuevo usuario inicie la sesi√≥n correctamente, se ejecutar√° la funci√≥n de sistema
"LeerNombreDeUsuario". La variable "CurrentUser" se actualizar√° y en el campo E/S
aparecer√° el nuevo usuario que ha iniciado la sesi√≥n.
Si un usuario no inicia la sesi√≥n correctamente, se cerrar√° la sesi√≥n del usuario que la ha
iniciado. En el campo E/S se seguir√° visualizando el usuario antiguo, hasta que un nuevo
usuario inicie una sesi√≥n correctamente.

11.4.2

Ejemplo: impresi√≥n semanal de un informe

Introducci√≥n
Se planifica una tarea que inicie la impresi√≥n semanal de un informe.

Requisitos
‚óè Se ha creado un "Informe semanal".
‚óè El √°rea de trabajo "Planificador de tareas" est√° abierta.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1853

Planificar tareas
11.4 Ejemplos de Runtime Advanced y Panels

Procedimiento
1. Haga clic en "Agregar..." en la tabla del √°rea de tareas.
2. En "Nombre", introduzca "Impresi√≥n semanal del informe al finalizar el turno".
3. Seleccione el disparador "Semanal".
4. Seleccione "Viernes" en la ventana de inspecci√≥n "Propiedades > Propiedades > General
> el".
5. En el campo "a las", indique las "18:00" horas.

6. En la ventana de inspecci√≥n haga clic en "Propiedades > Eventos".
7. Seleccione la funci√≥n de sistema "Imprimir/ImprimirInforme" en la lista de funciones.
8. Seleccione el "Informe semanal".

Resultado
El trabajo de impresi√≥n semanal se inicia el viernes a las 18:00 horas.

11.4.3

Ejemplo: modificar el instante de inicio de una tarea en runtime

Introducci√≥n
Se configura un disparador c√≠clico "Inicio diario a las 18:00 horas" en el sistema de ingenier√≠a.
La hora "18:00" es una constante. Sin embargo, para cambiar el instante de inicio en runtime,
seleccione una variable como "Temporizador". El valor de la variable determinar√° en runtime
el momento en que se iniciar√° la tarea.

Tarea
Planifique una tarea que trasvase diariamente los datos de fichero y que tenga como
temporizador la variable "LogTime". Configure una variable "LogTime" en un campo de
entrada.

1854

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Planificar tareas
11.4 Ejemplos de Runtime Advanced y Panels

Requisitos
‚óè El fichero de origen "DataLogSource" est√° creado como fichero de variables.
‚óè El fichero de destino "DataLogDestination" est√° creado como fichero de variables.
‚óè Se ha creado una imagen "ChangeLogTime".

Resumen de los pasos a seguir
1. Crear una variable de temporizador: cree una variable que permita modificar el instante de
inicio del trasvase de ficheros en runtime.
2. Configurar un campo de fecha y hora: por medio del campo de fecha y hora, el operador
cambia el instante de inicio de la tarea en runtime.
3. Configurar una tarea con una variable de temporizador: cree una tarea cuyo instante de
inicio pueda modificarse din√°micamente en runtime.

Resultado
Si no se introduce ning√∫n dato en el campo de entrada "LogDataTimeField", la tarea se iniciar√°
por defecto todos los d√≠as a las 18:00 horas. Los datos de fichero se trasvasar√°n. Si un
operador introduce 19:00 horas en el campo de entrada "LogDataTimeField", los datos de
fichero se trasvasar√°n a las 19:00 horas. Para ello, el valor de la variable no debe cambiar
antes de que se inicie la tarea.

11.4.4

Ejemplo: 1. Configurar una variable para runtime

Tarea
En el ejemplo siguiente se configura la variable "LogTime".

Procedimiento
1. Abra el editor "Variables HMI".
2. Haga clic en "Agregar..." en la tabla del √°rea de tareas.
3. Como "Nombre" de la variable indique "LogTime".
4. En la columna "Conexi√≥n", seleccione "Variable interna".
5. En la columna "Tipo de datos", seleccione "DateTime".

Resultado
Se ha creado una variable del tipo "DateTime".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1855

Planificar tareas
11.4 Ejemplos de Runtime Advanced y Panels

11.4.5

Ejemplo: 2. Configurar un campo de fecha y hora

Tarea
En el ejemplo siguiente se configura un campo de fecha y hora. Para cambiar el instante de
inicio de la tarea en runtime, la variable "LogTime" se vincula al campo de fecha y hora.

Requisitos
‚óè La variable "LogTime" del tipo "DateTime" est√° creada.
‚óè La imagen "ChangeLogTime" est√° abierta.

Procedimiento
1. En la ventana de herramientas, arrastre un "Campo de fecha y hora" desde la categor√≠a
"Objetos simples" hasta la imagen utilizando la funci√≥n Drag&Drop.
2. En la ventana de inspecci√≥n haga clic en "Propiedades > Propiedades > General".
3. Desactive la "Hora del sistema".
4. Haga clic en "Variable" y elija "LogTime".
5. Desactive la opci√≥n "Mostrar fecha" y active la opci√≥n "Mostrar hora".
6. Bajo "Modo", seleccione "Entrada/salida".
7. Haga clic en "Propiedades > Miscel√°neo".
8. En "Nombre", escriba "LogDataTimeField".

Resultado
El operador indica una hora con el campo de fecha y hora creado.

11.4.6

Ejemplo: 3. Configurar una archivaci√≥n con una variable de temporizador

Tarea
En el ejemplo siguiente se configurar√° una tarea con una variable de temporizador que permita
modificar el instante de inicio de la tarea en runtime.

Requisitos
‚óè La variable "LogTime" est√° creada.
‚óè El fichero de origen "DataLogSource" est√° creado como fichero de variables.
‚óè El fichero de destino "DataLogDestination" est√° creado como fichero de variables.
‚óè El √°rea de trabajo del planificador de tareas est√° abierta.

1856

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Planificar tareas
11.4 Ejemplos de Runtime Advanced y Panels

Procedimiento
1. Haga clic en "Agregar..." en la tabla del √°rea de tareas.
2. En "Nombre", introduzca "Transferencia diaria de un fichero a una hora variable".
3. Seleccione el disparador "Diario".
4. Indique las "18:00" horas en la ventana de inspecci√≥n "Propiedades > Propiedades >
General > a las".
5. Seleccione la variable "LogTime" como "temporizador est√°ndar".
6. En la ventana de inspecci√≥n abra "Propiedades > Eventos".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1857

Planificar tareas
11.4 Ejemplos de Runtime Advanced y Panels
7. Seleccione la funci√≥n de sistema "Funciones de sistema/Ficheros/CopiarFichero" en la lista
de funciones.
8. Seleccione los ajustes siguientes:
‚Äì Seleccione "Fichero de variables" como tipo de fichero.
‚Äì Seleccione "DataLogDestination" como fichero de destino.
‚Äì Seleccione "DataLogSource" como fichero de origen.
‚Äì Bajo "Modo", seleccione "Sobrescribir".
‚Äì Bajo "Borrar fichero de origen", seleccione la opci√≥n "S√≠".

Resultado
Si no se introduce ning√∫n dato en el campo de entrada "LogDataTimeField", la tarea se iniciar√°
por defecto todos los d√≠as a las 18:00 horas. Los datos de fichero se trasvasar√°n. Si un
operador introduce 19:00 horas en el campo de entrada "LogDataTimeField", los datos de
fichero se trasvasar√°n a las 19:00 horas. Para ello, el valor de la variable no debe cambiar
antes de que se inicie la tarea.

1858

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.1

Configuraci√≥n del diagn√≥stico de sistema

12.1.1

Diagn√≥stico del sistema

12.1.1.1

Principios b√°sicos para Basic Panels

12

Principios b√°sicos del diagn√≥stico de sistema
Introducci√≥n
Con el diagn√≥stico de sistema se pueden mostrar avisos del b√∫fer de diagn√≥stico de todas las
conexiones integradas.

Visor de diagn√≥stico del sistema
El visor de diagn√≥stico del sistema es un objeto de control y visualizaci√≥n que se utiliza en una
imagen.
Permite navegar directamente hasta la causa de un error y la conexi√≥n correspondiente.
Permite acceder a todas las conexiones integradas que ha configurado en el editor
"Dispositivos y redes".

Vistas en el diagn√≥stico de sistema
Introducci√≥n
En el visor de diagn√≥stico del sistema simple se dispone de tres vistas diferentes:
‚óè Vista de dispositivos
‚óè Vista del b√∫fer de diagn√≥stico
‚óè Vista detallada

Vista de dispositivos
La vista de dispositivos s√≥lo se muestra, si se ha configurado m√°s de una conexi√≥n integrada.
La vista de dispositivos muestra una tabla con todas las conexiones disponibles. Haciendo
doble clic sobre una conexi√≥n se abre la vista del b√∫fer de diagn√≥stico.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1859

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema

Vista del b√∫fer de diagn√≥stico
La vista del b√∫fer de diagn√≥stico muestra los datos actuales del b√∫fer de diagn√≥stico.
Para actualizar la vista del b√∫fer de diagn√≥stico, seleccione el bot√≥n

1860

.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema

Vista detallada
La vista detallada muestra informaci√≥n concreta acerca de la conexi√≥n seleccionada y de los
errores existentes. En la vista detallada se comprueba si los datos son correctos.

Nota
Contenidos de la vista detallada
Los contenidos de la vista detallada solo est√°n disponibles para conexiones integradas en los
controladores S7-1200 y S7-1500.

Botones de navegaci√≥n
Bot√≥n

Tecla

Funci√≥n

Tecla Intro

En la vista de dispositivos:
Abre la vista del b√∫fer de diagn√≥stico del dispositivo
seleccionado.
En la vista del b√∫fer de diagn√≥stico:
Abre la vista detallada.

Tecla ESC

En la vista del b√∫fer de diagn√≥stico:
Abre la vista de dispositivos.
En la vista detallada:
Abre la vista del b√∫fer de diagn√≥stico.

Tecla de funci√≥n configurada,
p. ej., F1.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Actualiza la vista del b√∫fer de diagn√≥stico.

1861

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema

12.1.1.2

Principios b√°sicos para Panels y Runtime Advanced

Principios b√°sicos del diagn√≥stico de sistema
Introducci√≥n
El diagn√≥stico de sistema permite detectar aver√≠as y errores en todo el sistema. WinCC ofrece
dos objetos de manejo y visualizaci√≥n para localizar los posibles errores de forma r√°pida.
Para que el controlador pueda transferir mensajes de error al visor de diagn√≥stico del sistema
o a la ventana de diagn√≥stico del sistema, debe existir una conexi√≥n HMI entre el controlador
y el panel de operador. Asimismo, el diagn√≥stico del sistema debe estar activado tanto en el
controlador como en el panel de operador.
En un controlador SIMATIC S7-300/400, el diagn√≥stico del sistema est√° desactivado de forma
predeterminada, pero puede activarse en las propiedades del controlador. En un controlador
SIMATIC S7-1200/1500, el diagn√≥stico del sistema est√° activado de forma predeterminada y
no puede desactivarse.
En caso de conexi√≥n HMI con un controlador SIMATIC S7-300/400, en el panel de operador,
en "Configuraci√≥n de runtime > Avisos > Avisos del controlador", est√° activada de forma
predeterminada la opci√≥n "Diagn√≥stico del sistema" y no puede desactivarse. En caso de
conexi√≥n HMI con un controlador SIMATIC S7-1200/1500, en el panel de operador, en
"Configuraci√≥n de runtime > Avisos > Avisos del controlador", est√° activada de forma
predeterminada la opci√≥n "Diagn√≥stico del sistema" y puede desactivarse.

Visor de diagn√≥stico del sistema
Mientras que el visor de avisos permite observar el estado de un controlador, el visor de
diagn√≥stico del sistema ofrece un resumen de todos los dispositivos disponibles en la
instalaci√≥n: Permite navegar directamente hasta la causa de un error y hasta el dispositivo
correspondiente. Permite acceder a todos los dispositivos aptos para diagn√≥stico que ha
configurado en el editor "Dispositivos y redes".

Ventana de diagn√≥stico del sistema
La ventana de diagn√≥stico del sistema es un objeto de control y visualizaci√≥n que puede
utilizarse s√≥lo en la "imagen general".
Las funciones de la ventana de diagn√≥stico del sistema no se diferencian de las del visor de
diagn√≥stico del sistema. Como la ventana de diagn√≥stico del sistema se configura en la imagen
general, tambi√©n es posible definir, por ejemplo, si el objeto puede cerrarse en runtime.
Nota
Diagn√≥stico de sistema en Basic Panels
El objeto "Ventana de diagn√≥stico del sistema" no est√° disponible en Basic Panels.

1862

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema

Vistas en el diagn√≥stico de sistema
Introducci√≥n
El visor de diagn√≥stico del sistema y la ventana de diagn√≥stico del sistema incorporan cuatro
vistas diferentes:
‚óè Vista de dispositivos
‚óè Vista del b√∫fer de diagn√≥stico
‚óè Vista detallada
‚óè Vista de matriz (s√≥lo para sistemas maestros, PROFIBUS, PROFINET)

Vista de dispositivos
La vista de dispositivos muestra una tabla con todos los dispositivos disponibles en un nivel.
Haciendo doble clic en un dispositivo se abren los dispositivos subordinados o la vista
detallada. Los s√≠mbolos de la primera columna dan informaci√≥n sobre el estado actual del
dispositivo.

Vista del b√∫fer de diagn√≥stico
En la vista del b√∫fer de diagn√≥stico se muestran los datos actuales del b√∫fer de diagn√≥stico del
dispositivo. La vista del b√∫fer de diagn√≥stico s√≥lo puede abrirse en la vista de dispositivos.
Para actualizar la vista del b√∫fer de diagn√≥stico, seleccione el bot√≥n

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

.

1863

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema

Vista detallada
La vista detallada muestra informaci√≥n concreta acerca del dispositivo seleccionado y de los
errores existentes. En la vista detallada se comprueba si los datos son correctos. No es posible
clasificar los textos de error en la vista detallada.

1864

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema

Nota
Contenidos de la vista detallada
Los contenidos de la vista detallada solo est√°n disponibles para conexiones integradas en los
controladores S7-1200 y S7-1500.

Vista de E/S descentralizadas
La vista de E/S descentralizadas est√° disponible en sistemas maestros y sistemas de E/S. En
esta vista se muestra el estado de los dispositivos subordinados al sistema. Cada elemento de
la vista muestra el nombre y el tipo de dispositivo, as√≠ como la direcci√≥n IP o PROFIBUS.

En caso de fallo, se resalta visualmente el elemento afectado:
‚óè Un marco rojo indica un error en un elemento subordinado.
‚óè Un fondo rojo indica un error en un elemento en s√≠, p. ej., el dispositivo no est√° accesible.

Botones de navegaci√≥n
Bot√≥n

Tecla

Funci√≥n

Tecla Intro

Abre los dispositivos subordinados o la
vista detallada cuando no hay dispositi‚Äê
vos subordinados.

Tecla ESC

Abre el dispositivo de orden superior o la
vista de dispositivos si no hay ning√∫n dis‚Äê
positivo de orden superior.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1865

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema
Bot√≥n

Tecla

Funci√≥n

Tecla HOME

Abre la vista de dispositivos.

Tecla de funci√≥n configurada, p. ej., F1.

Abre la vista del b√∫fer de diagn√≥stico.
Solamente visible en la vista de dispositi‚Äê
vos.

Tecla de funci√≥n configurada, p. ej., F2.

Actualiza la vista del b√∫fer de diagn√≥stico.

Nota
Navegaci√≥n en la vista de matriz con Comfort Panels con teclas de funci√≥n
Para seleccionar esclavos PNIO o PROFIBUS en la vista de matriz, utilice adicionalmente la
tecla May√∫s.

Cambio de idioma en runtime
Cambie el idioma en runtime antes de abrir la vista detallada.
Si se cambia el idioma del runtime con la vista detallada abierta, se vuelve a la vista del b√∫fer
de diagn√≥stico.
Abra de nuevo la vista detallada. Ahora aparecer√° correctamente el idioma de runtime elegido.

12.1.1.3

Configurar objetos del diagn√≥stico de sistema

Activar diagn√≥stico de sistema
Introducci√≥n
Para que el controlador pueda transferir mensajes de error al visor de diagn√≥stico del sistema,
debe existir una conexi√≥n HMI entre el controlador y el panel de operador. Asimismo, el
diagn√≥stico del sistema debe estar activado tanto en el controlador como en el panel de
operador.
En un controlador SIMATIC S7-300/400, el diagn√≥stico del sistema est√° desactivado de forma
predeterminada, pero puede activarse. En un controlador SIMATIC S7-1200/1500, el
diagn√≥stico del sistema est√° activado de forma predeterminada y no puede desactivarse.
En caso de conexi√≥n HMI con un controlador SIMATIC S7-300/400, en el panel de operador
est√° activado de forma predeterminada el diagn√≥stico del sistema y no puede desactivarse. En
caso de conexi√≥n HMI con un controlador SIMATIC S7-1200/1500, en el panel de operador
est√° activado de forma predeterminada el diagn√≥stico del sistema y puede desactivarse.
A continuaci√≥n se describe c√≥mo activar el diagn√≥stico del sistema en un controlador y en un
panel de operador, si es necesario.

1866

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema

Requisitos
‚óè Existe una conexi√≥n HMI entre el controlador y el panel de operador.

Activaci√≥n del diagn√≥stico del sistema en el controlador
Para activar el diagn√≥stico del sistema en un controlador, proceda del siguiente modo:
1. En el √°rbol del proyecto, abra la "Configuraci√≥n de dispositivos" del controlador.
2. Seleccione la CPU del rack en la ficha "Vista de dispositivos".
3. En la ventana de inspecci√≥n seleccione "Propiedades > General > Diagn√≥stico del sistema
> General".
4. Active la opci√≥n "Activar el diagn√≥stico de sistema para este PLC".
5. En el √°rbol del proyecto, haga clic con el bot√≥n derecho del rat√≥n en el controlador y
seleccione "Compilar > Hardware (compilar todo)" en el men√∫ contextual.

Activaci√≥n del diagn√≥stico del sistema en el panel de operador
Para activar el diagn√≥stico del sistema en un panel de operador, proceda del siguiente modo:
1. En el √°rbol de proyecto, abra la "Configuraci√≥n de runtime" del panel de operador.
2. Active la opci√≥n "Diagn√≥stico del sistema" en "Avisos > Avisos del controlador".
Se activa la visualizaci√≥n de avisos de diagn√≥stico del sistema en runtime.
Nota
Particularidad de los avisos de diagn√≥stico del sistema SIMATIC S7-300/400
Si se desactiva el discriminador 0 para la conexi√≥n HMI correspondiente en "Configuraci√≥n de
runtime > Avisos > Avisos del controlador > Discriminadores", los avisos de diagn√≥stico del
sistema no se transfieren del controlador al panel de operador aunque est√© activado el
diagn√≥stico del sistema en el controlador y el panel de operador.

Insertar indicador del diagn√≥stico de sistema
Introducci√≥n
El indicador del diagn√≥stico de sistema es un s√≠mbolo gr√°fico predefinido de la librer√≠a que
se√±ala errores en la instalaci√≥n.
Cuando se produce un error se modifica el aspecto del objeto. El objeto de librer√≠a puede tener
dos indicaciones de estado:
- Sin error
- Error

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1867

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema

Requisitos
‚óè La Task Card "Librer√≠as" est√° abierta.
‚óè La librer√≠a global "Buttons and Switches > Plantillas maestras > DiagnosticsButtons" est√°
abierta.
‚óè Hay una imagen abierta.
‚óè Se ha creado una ventana de diagn√≥stico del sistema en la imagen general.

Procedimiento
1. Seleccione el objeto "DiagnosticsIndicator" de la librer√≠a.
Nota
Indicador del diagn√≥stico de sistema para diversos tipos de dispositivos
Al seleccionar un objeto, aseg√∫rese de utilizar el objeto adecuado para el tipo de panel
utilizado en el dispositivo.
2. Utilizando la funci√≥n Drag&Drop, desplace el objeto de librer√≠a hasta la posici√≥n del √°rea de
trabajo en la que desea insertarlo.
Se inserta el objeto de librer√≠a.

1868

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema
3. Seleccione el objeto de librer√≠a.
4. Haga clic en la ventana de inspecci√≥n "Propiedades > Eventos".
Para el evento "Hacer clic" est√° predeterminada la funci√≥n de sistema
"MostrarVisorDeDiagn√≥sticoDeSistema".

Resultado
El indicador del diagn√≥stico de estado est√° insertado en el proyecto y conectado a una ventana
de diagn√≥stico del sistema.
Cuando se produce un aviso de error en runtime, el indicador del diagn√≥stico de sistema
cambia de aspecto. Si se hace clic en el indicador del diagn√≥stico de sistema, se abre la
ventana de diagn√≥stico del sistema. La ventana de diagn√≥stico del sistema muestra la vista
detallada del dispositivo afectado.

Configurar la protecci√≥n de acceso para la ventana de diagn√≥stico del sistema
Para proteger la ventana de diagn√≥stico del sistema frente a un acceso No autorizado,
configure una protecci√≥n de acceso en el indicador del diagn√≥stico de sistema.
1. Seleccione el objeto "DiagnosticsIndicator" en la imagen.
2. Seleccione un permiso en la ventana de inspecci√≥n "Propiedades > Propiedades >
Seguridad en runtime".
Si se hace clic en el indicador del diagn√≥stico de sistema en runtime, se abre un cuadro de
di√°logo de inicio de sesi√≥n. La ventana de diagn√≥stico del sistema s√≥lo se abre si se tiene el
permiso necesario.

Configurar una ventana de diagn√≥stico del sistema en la imagen general
Introducci√≥n
La ventana de diagn√≥stico del sistema ofrece una vista general de todos los dispositivos
disponibles en la instalaci√≥n. La ventana de diagn√≥stico del sistema se comporta como el visor
de diagn√≥stico del sistema, pero s√≥lo est√° disponible en la imagen general.

Requisitos
‚óè Se ha creado un controlador como m√≠nimo.
‚óè Se ha creado un Comfort Panel o WinCC RT Advanced.
‚óè El diagn√≥stico del sistema est√° activado en todos los controladores y en el panel de
operador.
‚óè La imagen general est√° abierta.
‚óè La ventana de inspecci√≥n est√° abierta.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1869

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema

Procedimiento
1. En la Task Card "Herramientas" haga doble clic en el objeto "Ventana de diagn√≥stico del
sistema". El objeto se inserta en la imagen general.
2. Haga clic en la ventana de inspecci√≥n "Propiedades > Propiedades > Columnas >
Dispositivos/Vista detallada".
3. Active las columnas que necesite para la vista de dispositivos en runtime, p. ej., estado,
nombre y direcci√≥n.
4. Active las propiedades que necesite en la vista detallada para runtime, p. ej., estado,
nombre e ID de la instalaci√≥n.
5. Active las columnas que necesite para la vista del b√∫fer de diagn√≥stico, p. ej., estado y
nombre.
6. En caso necesario, adapte los t√≠tulos de las columnas.
7. Para desplazar las columnas en runtime, active la opci√≥n "Propiedades >Propiedades >
Dise√±o > Configuraci√≥n de columnas > Columnas desplazables".
8. Para que la ventana de diagn√≥stico del sistema pueda cerrarse en runtime, active la opci√≥n
"Propiedades > Propiedades > Ventana > Cerrable".

Resultado
Se ha insertado una ventana de diagn√≥stico del sistema en la imagen general. Si aparece un
aviso de error en la instalaci√≥n, la ventana de diagn√≥stico del sistema reacciona y muestra el
dispositivo en cuesti√≥n.
Configure un indicador del diagn√≥stico de sistema en una imagen para abrir la ventana de
diagn√≥stico del sistema.

Configurar bot√≥n como indicador del diagn√≥stico de sistema
Introducci√≥n
Adem√°s del objeto "DiagnosticsIndicator" de la librer√≠a, es posible configurar, p. ej., un bot√≥n
que indique la existencia de errores en la instalaci√≥n.

Requisitos
‚óè Se ha creado un controlador como m√≠nimo.
‚óè El diagn√≥stico del sistema est√° activado en todos los controladores y en el panel de
operador.
‚óè La Task Card "Herramientas" est√° abierta.
‚óè Se ha creado una lista de gr√°ficos de bits con dos gr√°ficos distintos para los estados.
‚óè Hay una imagen abierta.
‚óè Se ha creado un visor del diagn√≥stico de sistema.

1870

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema

Procedimiento
1. En la Task Card "Herramientas", haga doble clic en el objeto "Bot√≥n". Se inserta un bot√≥n
en la imagen.
2. En la ventana de inspecci√≥n, active "Propiedades > Propiedades > General > Modo >
Gr√°ficos".
3. Seleccione la lista de gr√°ficos de bits en "Gr√°ficos > Lista de gr√°ficos".
4. Seleccione la variable "@DiagnosticsIndicatorTag" en la ventana de inspecci√≥n
"Propiedades > Propiedades > General > Variable".

Configuraci√≥n de la funci√≥n de sistema en el bot√≥n
1. Haga clic en la ventana de inspecci√≥n "Propiedades > Eventos".
2. Seleccione el evento "Hacer clic".
3. En la tabla haga clic en "Agregar funci√≥n".
4. Seleccione la funci√≥n de sistema "VisorDiagn√≥sticoSistemaActivar".
5. Seleccione el visor de diagn√≥stico del sistema.

Resultado
Se ha configurado un bot√≥n que reacciona a mensajes de error del controlador. Si aparece un
mensaje de error en runtime, el bot√≥n cambia.
El bot√≥n tiene dos estados.
‚óè Error
Haciendo clic en el bot√≥n se abre el visor de diagn√≥stico del sistema. El visor de diagn√≥stico
del sistema muestra la vista detallada del dispositivo afectado.
‚óè Ning√∫n error
Haciendo clic en el bot√≥n se abre el visor de diagn√≥stico del sistema. El visor de diagn√≥stico
del sistema muestra la vista de dispositivos.

Configurar el visor de diagn√≥stico del sistema
Introducci√≥n
Se inserta un visor de diagn√≥stico del sistema en un proyecto para obtener una vista general
de todos los dispositivos disponibles de la instalaci√≥n.

Requisitos
‚óè Se ha creado un controlador como m√≠nimo.
‚óè Se ha creado un Comfort Panel o WinCC RT Advanced.
‚óè El diagn√≥stico del sistema est√° activado en todos los controladores y en el panel de
operador.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1871

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema
‚óè Se ha creado una imagen.
‚óè La ventana de inspecci√≥n est√° abierta.

Procedimiento
1. En la Task Card "Herramientas" haga doble clic en el objeto "Visor de diagn√≥stico del
sistema". El objeto se inserta en la imagen.
2. Haga clic en la ventana de inspecci√≥n "Propiedades > Propiedades > Columnas >
Dispositivos/Vista detallada".
3. Active las columnas que requiera para la vista de dispositivos en runtime, p. ej. estado,
nombre, slot.
4. Active las columnas que requiera para la vista detallada en runtime, p. ej. estado, nombre,
ID de la instalaci√≥n.
5. Active las columnas que necesite para la vista del b√∫fer de diagn√≥stico, p. ej., estado y
nombre.
6. Para desplazar las columnas en runtime, active la opci√≥n "Propiedades >Propiedades >
Dise√±o > Configuraci√≥n de columnas > Columnas desplazables".
7. El √°rea "Propiedades > Propiedades > T√≠tulo de tabla" permite cambiar en caso necesario
los t√≠tulos de las columnas.

Resultado
El visor de diagn√≥stico del sistema est√° insertado en la imagen. En runtime, los fallos de toda
la instalaci√≥n se muestran en el visor de diagn√≥stico del sistema.

Configurar el visor de diagn√≥stico del sistema
Introducci√≥n
Para tener un resumen de todas las conexiones integradas, inserte un visor de diagn√≥stico del
sistema en el proyecto.

Requisitos
‚óè Se ha creado un controlador.
‚óè Se ha creado un Basic Panel.
‚óè Se ha creado una conexi√≥n integrada en el editor "Dispositivos y redes".
‚óè Se ha creado una imagen.
‚óè La ventana de inspecci√≥n est√° abierta.

1872

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema

Procedimiento
1. En la Task Card "Herramientas" haga doble clic en el objeto "Visor de diagn√≥stico del
sistema". El objeto se inserta en la imagen.
2. En la ventana de inspecci√≥n, haga clic en "Propiedades > Representaci√≥n".
3. Seleccione para "Filas por entrada", p. ej. 5.

Resultado
El visor de diagn√≥stico del sistema est√° insertado en la imagen.
Para ver los avisos actuales, actualice el b√∫fer de diagn√≥stico.

Dividir vista en el visor de diagn√≥stico del sistema
Introducci√≥n
El visor de diagn√≥stico del sistema ofrece tambi√©n una vista dividida del visor. De esta manera
tiene la posibilidad de ver los dispositivos y sus detalles a simple vista.

Requisitos
‚óè Se ha creado un controlador como m√≠nimo.
‚óè Se ha creado un panel de operador, p. ej., un Comfort Panel.
‚óè El diagn√≥stico del sistema est√° activado en todos los controladores y en el panel de
operador.
‚óè Se ha creado una imagen.
‚óè La ventana de inspecci√≥n est√° abierta.

Procedimiento
1. En la Task Card "Herramientas" haga doble clic en el objeto "Visor de diagn√≥stico del
sistema". El objeto se inserta en la imagen.
2. Haga clic en la ventana de inspecci√≥n "Propiedades > Propiedades > Dise√±o".
3. Active "Dividir visor".
4. Active "Adaptaci√≥n del tama√±o > Adaptar autom√°ticamente".
5. Si es necesario, modifique tambi√©n la cantidad de filas para la "Vista de dispositivos" y la
"Vista detallada".

Resultado
El visor de diagn√≥stico del sistema est√° insertado en la imagen. El visor de diagn√≥stico del
sistema est√° dividido en dos √°reas.
El √°rea superior muestra la vista de dispositivos. El √°rea inferior muestra la vista detallada.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1873

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema

Si abre la vista del b√∫fer de diagn√≥stico, el √°rea superior muestra el resumen del b√∫fer de
diagn√≥stico y el √°rea inferior los detalles.

1874

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema

Nota
Contenidos de la vista detallada
Los contenidos de la vista detallada solo est√°n disponibles para conexiones integradas en los
controladores S7-1200 y S7-1500.

12.1.2

Diagn√≥stico del sistema

12.1.2.1

Principios b√°sicos para Runtime Professional

Principios b√°sicos del diagn√≥stico de sistema
Introducci√≥n
El diagn√≥stico de sistema permite detectar aver√≠as y errores en todo el sistema. WinCC le
ofrece objetos de manejo para una r√°pida localizaci√≥n de errores.
Para que el controlador pueda transferir mensajes de error al visor de diagn√≥stico del sistema
o a la ventana de diagn√≥stico del sistema, debe existir una conexi√≥n HMI entre el controlador
y el panel de operador. Asimismo, el diagn√≥stico del sistema debe estar activado tanto en el
controlador como en el panel de operador.
En un controlador SIMATIC S7-300/400, el diagn√≥stico del sistema est√° desactivado de forma
predeterminada, pero puede activarse en las propiedades del controlador. En un controlador
SIMATIC S7-1200/1500, el diagn√≥stico del sistema est√° activado de forma predeterminada y
no puede desactivarse.
En caso de conexi√≥n HMI con un controlador SIMATIC S7-300/400, en el panel de operador,
en "Configuraci√≥n de runtime > Avisos > Avisos del controlador", est√° activada de forma
predeterminada la opci√≥n "Diagn√≥stico del sistema" y no puede desactivarse. En caso de
conexi√≥n HMI con un controlador SIMATIC S7-1200/1500, en el panel de operador, en
"Configuraci√≥n de runtime > Avisos > Avisos del controlador", est√° activada de forma
predeterminada la opci√≥n "Diagn√≥stico del sistema" y puede desactivarse.

Visor de diagn√≥stico del sistema
Mientras que el visor de avisos permite observar el estado de un controlador, el visor de
diagn√≥stico del sistema ofrece un resumen de todos los dispositivos disponibles en la
instalaci√≥n: Permite navegar directamente hasta la causa de un error y hasta el dispositivo
correspondiente. Permite acceder a todos los dispositivos aptos para diagn√≥stico que ha
configurado en el editor "Dispositivos y redes".

indicador del diagn√≥stico de sistema
El indicador del diagn√≥stico de sistema es un s√≠mbolo gr√°fico predefinido de la librer√≠a que
se√±ala errores en la instalaci√≥n.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1875

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema
Al producirse un error, el indicador de diagn√≥stico del sistema cambia de aspecto.

Bot√≥n GoTo
El bot√≥n GoTo es un s√≠mbolo gr√°fico predefinido de la librer√≠a. Cuando aparecen avisos de
diagn√≥stico en el visor de avisos, la funci√≥n GoTo permite pasar directamente al lugar del error
en el visor de diagn√≥stico del sistema.

Consulte tambi√©n
Activar diagn√≥stico de sistema (P√°gina 1879)

Vistas en el diagn√≥stico de sistema
Introducci√≥n
El visor de diagn√≥stico del sistema y la ventana de diagn√≥stico del sistema incorporan cuatro
vistas diferentes:
‚óè Vista de dispositivos
‚óè Vista del b√∫fer de diagn√≥stico
‚óè Vista detallada
‚óè Vista de matriz (s√≥lo para sistemas maestros, PROFIBUS, PROFINET)

Vista de dispositivos
La vista de dispositivos muestra una tabla con todos los dispositivos disponibles en un nivel.
Haciendo doble clic en un dispositivo se abren los dispositivos subordinados o la vista
detallada. Los s√≠mbolos de la primera columna dan informaci√≥n sobre el estado actual del
dispositivo.

1876

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema

Vista del b√∫fer de diagn√≥stico
En la vista del b√∫fer de diagn√≥stico se muestran los datos actuales del b√∫fer de diagn√≥stico del
dispositivo. La vista del b√∫fer de diagn√≥stico s√≥lo puede abrirse en la vista de dispositivos.
Para actualizar la vista del b√∫fer de diagn√≥stico, seleccione el bot√≥n "Actualizar".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1877

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema

Vista detallada
La vista detallada muestra informaci√≥n concreta acerca del dispositivo seleccionado y de los
errores existentes. En la vista detallada se comprueba si los datos son correctos. No es posible
clasificar los textos de error en la vista detallada.

Nota
Contenidos de la vista detallada
Los contenidos de la vista detallada solo est√°n disponibles para conexiones integradas en los
controladores S7-1200 y S7-1500.

Botones de navegaci√≥n
Bot√≥n

1878

Tecla

Funci√≥n

Tecla Intro

Abre los dispositivos subordinados o la
vista detallada cuando no hay dispositi‚Äê
vos subordinados.

Tecla ESC

Abre el dispositivo de orden superior o la
vista de dispositivos si no hay ning√∫n dis‚Äê
positivo de orden superior.

Tecla HOME

Abre la vista de dispositivos.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema
Bot√≥n

Tecla

Funci√≥n

Tecla de funci√≥n F4

Abre la vista del b√∫fer de diagn√≥stico.
Solamente visible en la vista de dispositi‚Äê
vos.

Tecla de funci√≥n F5

12.1.2.2

Actualiza la vista del b√∫fer de diagn√≥stico.

Configurar objetos del diagn√≥stico de sistema

Activar diagn√≥stico de sistema
Introducci√≥n
Para que el controlador pueda transferir mensajes de error al visor de diagn√≥stico del sistema,
debe existir una conexi√≥n HMI entre el controlador y el panel de operador. Asimismo, el
diagn√≥stico del sistema debe estar activado tanto en el controlador como en el panel de
operador.
En un controlador SIMATIC S7-300/400, el diagn√≥stico del sistema est√° desactivado de forma
predeterminada, pero puede activarse. En un controlador SIMATIC S7-1200/1500, el
diagn√≥stico del sistema est√° activado de forma predeterminada y no puede desactivarse.
En caso de conexi√≥n HMI con un controlador SIMATIC S7-300/400, en el panel de operador
est√° activado de forma predeterminada el diagn√≥stico del sistema y no puede desactivarse. En
caso de conexi√≥n HMI con un controlador SIMATIC S7-1200/1500, en el panel de operador
est√° activado de forma predeterminada el diagn√≥stico del sistema y puede desactivarse.
A continuaci√≥n se describe c√≥mo activar el diagn√≥stico del sistema en un controlador y en un
panel de operador, si es necesario.

Requisitos
‚óè Existe una conexi√≥n HMI entre el controlador y el panel de operador.

Activaci√≥n del diagn√≥stico del sistema en el controlador
Para activar el diagn√≥stico del sistema en un controlador, proceda del siguiente modo:
1. En el √°rbol del proyecto, abra la "Configuraci√≥n de dispositivos" del controlador.
2. Seleccione la CPU del rack en la ficha "Vista de dispositivos".
3. En la ventana de inspecci√≥n seleccione "Propiedades > General > Diagn√≥stico del sistema
> General".
4. Active la opci√≥n "Activar el diagn√≥stico de sistema para este PLC".
5. En el √°rbol del proyecto, haga clic con el bot√≥n derecho del rat√≥n en el controlador y
seleccione "Compilar > Hardware (compilar todo)" en el men√∫ contextual.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1879

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema

Activaci√≥n del diagn√≥stico del sistema en el panel de operador
Para activar el diagn√≥stico del sistema en un panel de operador, proceda del siguiente modo:
1. En el √°rbol de proyecto, abra la "Configuraci√≥n de runtime" del panel de operador.
2. Active la opci√≥n "Diagn√≥stico del sistema" en "Avisos > Avisos del controlador".
Se activa la visualizaci√≥n de avisos de diagn√≥stico del sistema en runtime.
Nota
Particularidad de los avisos de diagn√≥stico del sistema SIMATIC S7-300/400
Si se desactiva el discriminador 0 para la conexi√≥n HMI correspondiente en "Configuraci√≥n de
runtime > Avisos > Avisos del controlador > Discriminadores", los avisos de diagn√≥stico del
sistema no se transfieren del controlador al panel de operador aunque est√© activado el
diagn√≥stico del sistema en el controlador y el panel de operador.

Consulte tambi√©n
Principios b√°sicos del diagn√≥stico de sistema (P√°gina 1875)

Configurar el visor de diagn√≥stico del sistema
Introducci√≥n
Se inserta un visor de diagn√≥stico del sistema en un proyecto para obtener una vista general
de todos los dispositivos disponibles de la instalaci√≥n.

Requisitos
‚óè Se ha creado un controlador como m√≠nimo.
‚óè Se ha creado un panel de operador.
‚óè Se ha creado una conexi√≥n HMI entre el controlador y el panel de operador.
‚óè El diagn√≥stico del sistema est√° activado en todos los controladores y en el panel de
operador.
‚óè Se ha creado una imagen.
‚óè La ventana de inspecci√≥n est√° abierta.

Procedimiento
1. En la Task Card "Herramientas" haga doble clic en el objeto "Visor de diagn√≥stico del
sistema". El objeto se inserta en la imagen.
2. Haga clic en la ventana de inspecci√≥n "Propiedades > Propiedades > Columnas >
Dispositivos/Vista detallada".
3. Active las columnas que requiera para la vista de dispositivos en runtime, p. ej. estado,
nombre, slot.

1880

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema
4. Active las columnas que requiera para la vista detallada en runtime, p. ej. estado, nombre,
ID de la instalaci√≥n.
5. Active las columnas que necesite para la vista del b√∫fer de diagn√≥stico, p. ej., estado y
nombre.
6. Para desplazar las columnas en runtime, active la opci√≥n "Propiedades >Propiedades >
Dise√±o > Configuraci√≥n de columnas > Columnas desplazables".
7. El √°rea "Propiedades > Propiedades > T√≠tulo de tabla" permite cambiar en caso necesario
los t√≠tulos de las columnas.

Resultado
El visor de diagn√≥stico del sistema est√° insertado en la imagen. En runtime, los fallos de toda
la instalaci√≥n se muestran en el visor de diagn√≥stico del sistema.

Dividir vista en el visor de diagn√≥stico del sistema
Introducci√≥n
El visor de diagn√≥stico del sistema ofrece tambi√©n una vista dividida del visor. De esta manera
tiene la posibilidad de ver los dispositivos y sus detalles a simple vista.

Requisitos
‚óè Se ha creado un controlador como m√≠nimo.
‚óè Se ha creado un panel de operador.
‚óè El diagn√≥stico del sistema est√° activado en todos los controladores y en el panel de
operador.
‚óè Se ha creado una imagen.
‚óè La ventana de inspecci√≥n est√° abierta.

Procedimiento
1. En la Task Card "Herramientas" haga doble clic en el objeto "Visor de diagn√≥stico del
sistema". El objeto se inserta en la imagen.
2. Haga clic en la ventana de inspecci√≥n "Propiedades > Propiedades > Dise√±o".
3. Active "Dividir visor".
4. Si es necesario, modifique tambi√©n la cantidad de filas para la "Vista de dispositivos" y la
"Vista detallada".

Resultado
El visor de diagn√≥stico del sistema est√° insertado en la imagen. El visor de diagn√≥stico del
sistema est√° dividido en dos √°reas.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1881

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema
El √°rea superior muestra la vista de dispositivos. El √°rea inferior muestra la vista detallada.

Si abre la vista del b√∫fer de diagn√≥stico, el √°rea superior muestra el resumen del b√∫fer de
diagn√≥stico y el √°rea inferior los detalles.
Nota
Contenidos de la vista detallada
Los contenidos de la vista detallada solo est√°n disponibles para conexiones integradas en los
controladores S7-1200 y S7-1500.

1882

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema

12.1.2.3

Ejemplo: diagn√≥stico de sistema con todos los objetos

Ejemplo: Resumen de los pasos a seguir
Introducci√≥n
‚óè Se han creado un controlador y un panel de operador.
‚óè Se ha creado una conexi√≥n HMI entre el controlador y el panel de operador.
‚óè El diagn√≥stico del sistema est√° activado en el controlador y en el panel de operador.

Pasos de configuraci√≥n
Para conseguir una vista r√°pida de errores, cree una vista general con distintos objetos para
visualizar avisos de diagn√≥stico.
El ejemplo siguiente muestra c√≥mo utilizar de manera eficiente en su proyecto los objetos de
la Task Card "Herramientas" o "Librer√≠as".
El ejemplo se divide en varias fases:
‚óè Crear im√°genes
El proyectista crea varias im√°genes para el diagn√≥stico del sistema:
‚Äì Vista general con todos los objetos para el diagn√≥stico del sistema
‚Äì Imagen para el visor de avisos
‚Äì Imagen para el visor de diagn√≥stico del sistema
‚óè Insertar objetos en im√°genes
El proyectista inserta diversos objetos en las im√°genes:
‚Äì Visor de avisos en la imagen "Alarm"
‚Äì Ventana de imagen para la visualizaci√≥n del visor de avisos y el visor de diagn√≥stico del
sistema
‚óè Configurar objetos
El proyectista interconecta los objetos para permitir una navegaci√≥n directa hasta la causa
del error en runtime.
‚Äì Indicador de diagn√≥stico del sistema con ventana de imagen del visor de diagn√≥stico del
sistema
‚Äì Bot√≥n Goto con la ventana de imagen del visor de avisos y el visor de diagn√≥stico del
sistema.

Consulte tambi√©n
Ejemplo: Crear im√°genes (P√°gina 1884)
Ejemplo: Insertar objetos en im√°genes (P√°gina 1884)
Ejemplo: Insertar indicador del diagn√≥stico de sistema (P√°gina 1885)
Ejemplo: insertar bot√≥n Goto (P√°gina 1887)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1883

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema

Ejemplo: Crear im√°genes
Introducci√≥n
A continuaci√≥n crearemos tres im√°genes para la visualizaci√≥n de distintos objetos.

Requisitos
‚óè Hay un proyecto abierto.
‚óè Se ha creado un panel de operador.

Procedimiento
1. Abra el √°rbol del proyecto.
2. En la carpeta Im√°genes, haga clic en "Agregar imagen".
3. Abra el men√∫ contextual de la imagen y as√≠gnele el nombre "Overview SysDiag".
4. Cree otra imagen con el nombre "Alarm".
5. Abra la Task Card "Librer√≠as".
6. Abra la librer√≠a global "Buttons and Switches > Kopiervorlagen > DiagnosticsButtons >
RTProfessional".
7. En la librer√≠a global, haga clic en el objeto "DiagnosticScreen".
8. Mediante arrastrar y soltar, desplace el objeto a la carpeta "Im√°genes" del √°rbol del
proyecto.

Resultado
Ha creado tres im√°genes en el √°rbol del proyecto:
‚óè Overview SysDiag
‚óè Alarm
‚óè SystemDiagnostics
En la imagen "SystemDiagnostics" se ha creado un visor de diagn√≥stico del sistema.

Consulte tambi√©n
Ejemplo: Resumen de los pasos a seguir (P√°gina 1883)

Ejemplo: Insertar objetos en im√°genes
Introducci√≥n
En el siguiente ejemplo insertaremos en las im√°genes distintos objetos de la Task Card
"Herramientas".

1884

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema

Requisitos
Est√°n creadas las siguientes tres im√°genes:
‚óè Overview SysDiag
‚óè Alarm
‚óè SystemDiagnostics
La Task Card "Herramientas" est√° abierta.

Procedimiento
1. Abra la imagen "Alarm".
2. Mediante arrastrar y soltar, desplace un "Visor de avisos" de la Task Card "Herramientas"
a la imagen.
3. Abra la imagen "Overview SysDiag".
4. Mediante arrastrar y soltar, desplace una "Ventana de imagen" de la Task Card
"Herramientas" a la imagen.
5. En la ventana de inspecci√≥n, abra el men√∫ "Propiedades > Propiedades > Miscel√°neo >
Nombre" y asigne a la imagen el nombre "Alarm".
6. En "Propiedades > Propiedades > General > Contenido > Imagen visualizada", seleccione
la imagen "Alarm".
7. Inserte una segunda ventana de imagen con el nombre "SysDiag".
8. En "Propiedades > Propiedades > General > Contenido > Imagen visualizada", seleccione
la imagen "SystemDiagnostics".

Resultado
Ha insertado un visor de avisos en la imagen "Alarm". El visor de avisos tiene el nombre no
modificado "Visor_avisos_1".
Se han creado en la imagen "Overview SysDiag" dos ventanas de imagen. La primera ventana
de imagen tiene el nombre "Alarm" y muestra el visor de avisos. La segunda ventana de
imagen tiene el nombre "SysDiag" y muestra el visor de diagn√≥stico del sistema.

Consulte tambi√©n
Ejemplo: Resumen de los pasos a seguir (P√°gina 1883)

Ejemplo: Insertar indicador del diagn√≥stico de sistema
Introducci√≥n
El indicador del diagn√≥stico de sistema es un s√≠mbolo gr√°fico predefinido de la librer√≠a que
se√±ala errores en la instalaci√≥n.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1885

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema
Cuando se produce un error, se modifica el aspecto del objeto. El objeto de librer√≠a puede
mostrar dos estados:
- Sin error
- Error

Requisitos
‚óè La Task Card "Librer√≠as" est√° abierta.
‚óè La librer√≠a global "Buttons and Switches > Plantillas maestras > DiagnosticsButtons > RT
Professional" est√° abierta.
‚óè Est√°n creadas las siguientes tres im√°genes:
‚Äì Overview SysDiag
‚Äì Alarm
‚Äì SystemDiagnostics
‚óè Se ha creado la ventana de imagen "SysDiag" y se ha vinculado con la imagen
"DiagnosticScreen".

Procedimiento
1. Seleccione el objeto "DiagnosticsIndicator" de la librer√≠a.
2. Utilizando la funci√≥n Drag&Drop, desplace el objeto de librer√≠a a la imagen "Overview
SysDiag".
Se inserta el objeto de librer√≠a.
3. Seleccione el objeto de librer√≠a.

1886

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema
4. Haga clic en la ventana de inspecci√≥n "Propiedades > Eventos".
Para el evento "Hacer clic" est√°n predeterminadas tres funciones del sistema.

5. En la funci√≥n del sistema "ActivarImagenEnVentana", seleccione para el par√°metro
"Nombre de imagen" "SysDiag".
6. En la funci√≥n del sistema "DefinirPropiedadV√≠aConstante", seleccione para el par√°metro
"Objeto de imagen" "SysDiag".

Resultado
El indicador del diagn√≥stico de sistema est√° insertado en el proyecto y vinculado a la ventana
de imagen SysDiag.
Cuando se produce un aviso de error en runtime, el indicador del diagn√≥stico de sistema
cambia de aspecto. Al hacer clic en el indicador de diagn√≥stico del sistema, se abre la ventana
de imagen SysDiag, en la que est√° configurado un visor de diagn√≥stico del sistema. El visor de
diagn√≥stico del sistema muestra la vista detallada del dispositivo afectado.

Consulte tambi√©n
Ejemplo: Resumen de los pasos a seguir (P√°gina 1883)

Ejemplo: insertar bot√≥n Goto
Requisitos
‚óè La Task Card "Librer√≠as" est√° abierta.
‚óè La librer√≠a global "Buttons and Switches > Plantillas maestras > DiagnosticsButtons > RT
Professional" est√° abierta.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1887

Uso de funciones de diagn√≥stico
12.1 Configuraci√≥n del diagn√≥stico de sistema
‚óè Est√°n creadas las siguientes tres im√°genes:
‚Äì Overview SysDiag
‚Äì Alarm
‚Äì SystemDiagnostics
‚óè Se ha creado la ventana de imagen "Alarm" y se ha vinculado con la imagen "Alarm".
‚óè Se ha creado la ventana de imagen "SysDiag" y se ha vinculado con la imagen
"DiagnosticScreen".

Configurar bot√≥n Goto en la imagen
1. Abra la imagen "SystemDiagnostic".
2. Abra la librer√≠a global "Buttons and Switches > Plantillas maestras > DiagnosticsButtons".
3. Seleccione el objeto "DiagnosticsGoto" de la librer√≠a.
4. Utilizando la funci√≥n Drag&Drop, desplace el objeto de librer√≠a a la imagen "Overview
SysDiag". Se inserta el objeto de librer√≠a.
5. Seleccione el objeto de librer√≠a.
6. Haga clic en la ventana de inspecci√≥n "Propiedades > Eventos".
Para el evento est√°n predeterminadas tres funciones del sistema.

7. En la funci√≥n del sistema "ActivarImagenEnVentana", seleccione para el par√°metro
"Nombre de imagen" "SysDiag".

1888

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.2 Funciones de supervisi√≥n para SIMATIC IPC
8. En la funci√≥n del sistema "DefinirPropiedadV√≠aConstante", seleccione para el par√°metro
"Objeto de imagen" "SysDiag".
9. En la funci√≥n del sistema "DefinirPropiedadV√≠aPropiedad", seleccione los siguientes
ajustes:
‚Äì Nombre de imagen: Alarm
‚Äì Objeto: Visor_avisos_1

Resultado
Ha configurado el bot√≥n Goto y lo ha vinculado con el visor de avisos y el visor de diagn√≥stico
del sistema.
Cuando el visor de avisos emita un aviso de error en runtime en la ventana de imagen "Alarms",
haga clic en el bot√≥n Goto.
En la ventana de imagen "SysDiag" aparecer√° el visor de diagn√≥stico del sistema. En la vista
de detalle se abrir√° el dispositivo con el error correspondiente.

Consulte tambi√©n
Ejemplo: Resumen de los pasos a seguir (P√°gina 1883)

12.2

Funciones de supervisi√≥n para SIMATIC IPC

Supervisi√≥n de hardware para SIMATIC IPC
Todos los SIMATIC IPC soportan funciones de supervisi√≥n. Una parte de las funciones de
supervisi√≥n se puede mostrar en el TIA Portal si establece una conexi√≥n online con el IPC. En
el editor de diagn√≥stico obtendr√° informaci√≥n sobre los estados operativos de los siguientes
grupos:
‚óè Ventiladores
‚óè Temperaturas
‚óè Tensiones
‚óè Unidades de disco/medios de almacenamiento
La figura siguiente muestra una vista general de todos los grupos del editor de diagn√≥stico.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1889

Uso de funciones de diagn√≥stico
12.2 Funciones de supervisi√≥n para SIMATIC IPC

En el editor de diagn√≥stico, puede elegir entre la vista individual y la vista de conjunto.

Grupo "Temperaturas"
El grupo "Temperaturas" muestra las temperaturas de diferentes componentes.

Grupo "Ventiladores"
El grupo "Ventiladores" muestra los estados de los ventiladores existentes (en funci√≥n del
dispositivo). Las velocidades de giro se indican en revoluciones por minuto (r/min).

Grupo "Tensiones"
El grupo "Tensiones" muestra los estados de los sensores de tensi√≥n existentes (en funci√≥n
del dispositivo). Se supervisa la tensi√≥n de la bater√≠a CMOS. Este sensor informa acerca de si
la tensi√≥n es correcta (=OK), cr√≠tica o defectuosa.

Grupo "Unidades de disco"
El grupo "Unidades de disco" muestra los estados de las unidades de disco/los medios de
almacenamiento existentes (en funci√≥n del dispositivo). Se soportan los siguientes medios de
almacenamiento:
‚óè Discos duros ATA
‚óè Tarjetas CompactFlash

1890

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
‚óè Discos duros SCSI
‚óè Discos duros USB o l√°pices de memoria USB
‚óè Discos duros en un adaptador INTEL RAID
En las propiedades de cada unidad de disco se indica si se trata de una unidad apta para
S.M.A.R.T. o RAID. En este caso se muestra una informaci√≥n de estado.

Valores l√≠mite
Para cada uno de los dos grupos, Ventiladores y Temperaturas, se definen respectivamente
un l√≠mite inferior y uno superior. Los l√≠mites dependen del IPC y no se pueden modificar.

C√≥digo de colores
Los iconos junto a cada objeto de visualizaci√≥n cambian de color dependiendo del estado del
objeto. Para todos los grupos se aplica:
‚óè Verde = OK
‚óè Rojo = l√≠mite superado o no alcanzado, o estado cr√≠tico del objeto.

Comportamiento en caso de diferencias
Si el l√≠mite se supera o no se alcanza, o si uno de los grupos llega a un estado cr√≠tico, se dispara
una entrada en el b√∫fer de diagn√≥stico. Al mismo tiempo, el icono cambia a color rojo.
Encontrar√° m√°s informaci√≥n sobre las funciones de diagn√≥stico de los IPC en Portal SIOS
(https://support.industry.siemens.com/cs/ww/es/view/39129913/en).

12.3

Supervisi√≥n de m√°quinas e instalaciones con ProDiag

12.3.1

Principios b√°sicos de la supervisi√≥n con ProDiag

Introducci√≥n
La funcionalidad ProDiag de TIA Portal sirve para supervisar y determinar los errores o fallos
que se producen en la instalaci√≥n o la m√°quina. Con ProDiag se muestra el tipo de error o fallo,
su causa y su localizaci√≥n en el panel de operador.

Utilizaci√≥n
Las funciones de ProDiag se utilizan para supervisar la instalaci√≥n y visualizarla en un panel
de operador. El objetivo principal de ProDiag es reducir los tiempos de parada e interrupciones
de la producci√≥n tras un fallo y prevenir as√≠ fallos mediante advertencias oportunas. Los
objetos de diagn√≥stico y de visualizaci√≥n proporcionan indicaciones claras al usuario para la
eliminaci√≥n de fallos y muestran los procesos en un panel de operador del sitio.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1891

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Principio
En STEP 7 se crean las supervisiones de los operandos y se configuran los ajustes conforme
a las necesidades. Cuando se produce un error, se emite un aviso de supervisi√≥n seg√∫n los
criterios configurados. Las supervisiones configuradas se guardan en el bloque de funci√≥n
ProDiag predeterminado. Puede usar los FB ProDiag creados autom√°ticamente o crear y
configurar FB ProDiag propios.
Con WinCC se configuran las funciones ProDiag que se visualizar√°n en un panel de operador
HMI. Se configuran objetos de imagen que permiten obtener una visi√≥n general del estado
actual de la instalaci√≥n y que, en caso de error, muestran el c√≥digo de programa afectado o el
desarrollo de la etapa.

12.3.2

Principios b√°sicos de la supervisi√≥n de operandos

Supervisi√≥n de operandos
Con una supervisi√≥n se controla el estado de una variable booleana. Cuando se produce un
evento en la instalaci√≥n o m√°quina, se dispara la supervisi√≥n configurada, y el estado del
operando se escribe en un bit de error de un bloque ProDiag. Est√°n disponibles los siete tipos
de supervisi√≥n siguientes:
‚óè Supervisi√≥n de operandos
‚óè Supervisi√≥n de enclavamientos
‚óè Supervisi√≥n de acciones
‚óè Supervisi√≥n de reacciones
‚óè Supervisi√≥n de posiciones
‚óè Aviso de texto
‚óè Mensaje de error

Categor√≠as y subcategor√≠as
Es posible definir categor√≠as y subcategor√≠as para cada supervisi√≥n. Existen ocho categor√≠as
que permiten clasificar los eventos seg√∫n su urgencia. Las subcategor√≠as clasifican la
informaci√≥n con m√°s detalle. Las categor√≠as y subcategor√≠as se pueden combinar entre s√≠ en
una supervisi√≥n.
Las categor√≠as, subcategor√≠as y los textos de aviso de las supervisiones se configuran en el
√°rbol del proyecto, en "Datos comunes > Configuraci√≥n de supervisiones". Para m√°s
informaci√≥n sobre supervisiones y categor√≠as, consulte el cap√≠tulo "Programaci√≥n del PLC >
Supervisi√≥n de m√°quinas e instalaciones con ProDiag".

Seguimiento de la supervisi√≥n en HMI
Con WinCC puede realizarse un seguimiento del estado de las supervisiones configuradas
con el objeto "Vista general de ProDiag".

1892

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
Cuando se produce un evento en la instalaci√≥n, en la vista general de ProDiag se iluminan los
s√≠mbolos correspondientes de la categor√≠a y el tipo de supervisi√≥n. Con los botones
configurados se salta directamente al mensaje de error o a la visualizaci√≥n del segmento
afectado en el visor de c√≥digo PLC.
El estado de la cadena secuencial GRAPH de un bloque de datos GRAPH se muestra en el
objeto "Vista general de GRAPH". Si en una de las etapas se produce un error de supervisi√≥n
de GRAPH, se ilumina el s√≠mbolo de error de la vista general de GRAPH y se resalta
visualmente la etapa que presenta anomal√≠a.
Con el objeto "Visor de c√≥digo PLC" se muestra el programa de usuario en los lenguajes de
programaci√≥n KOP, FUP y GRAPH en el panel de operador.
Las funciones de adquisici√≥n de primeros valores y an√°lisis de criterios le permiten registrar los
valores en el momento del fallo y detectar r√°pidamente los operandos err√≥neos con el objeto
"Visor de an√°lisis de criterios".

Ventajas
ProDiag permite configurar supervisiones y supervisar instalaciones sin modificar el c√≥digo del
programa de usuario.
El diagn√≥stico de la instalaci√≥n se realiza en el panel de operador. Los datos se sincronizan
autom√°ticamente para que la visualizaci√≥n del panel de operador est√© siempre actualizada.
Encontrar√° m√°s informaci√≥n sobre el diagn√≥stico integrado de m√°quinas e instalaciones con
SIMATIC ProDiag en el canal de YouTube de Siemens:
Mayor disponibilidad de las m√°quinas e instalaciones con SIMATIC ProDiag (https://youtu.be/
pri8m08g4Ak)
Encontrar√° un ejemplo de aplicaci√≥n del diagn√≥stico de m√°quinas e instalaciones con ProDiag
en el art√≠culo con la ID 109740151 del Siemens Industry Online Support:
Diagn√≥stico de m√°quinas e instalaciones con ProDiag (https://
support.industry.siemens.com/cs/ww/es/view/109740151/en)

Consulte tambi√©n
Diagn√≥stico de m√°quinas e instalaciones con ProDiag (https://
support.industry.siemens.com/cs/ww/es/view/109740151/en)

12.3.3

Requisitos y concesi√≥n de licencias

Introducci√≥n
Se configuran las supervisiones ProDiag en el TIA Portal con STEP 7 Professional, y se crean
los objetos de imagen para la supervisi√≥n y el diagn√≥stico con WinCC. Para poder utilizar la
funcionalidad ProDiag y los correspondientes objetos de imagen se requiere una licencia.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1893

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Requisitos de software
Para configurar las supervisiones ProDiag se requieren los siguientes productos:
‚óè TIA Portal STEP 7 Professional
‚óè TIA Portal WinCC
‚Äì Comfort/Advanced a partir de V14 o bien
‚Äì Professional a partir de V14

Requisitos de hardware
La funcionalidad ProDiag est√° disponible para las CPU de la serie S7-1500 con versi√≥n de
firmware a partir de 2.0.
Los objetos para la supervisi√≥n y el diagn√≥stico de instalaciones est√°n disponibles para los
siguientes dispositivos HMI:
‚óè Comfort Panels y KTP Mobile Panels*
‚óè RT Advanced
‚óè RT Professional
* El objeto "Visor de c√≥digo PLC" est√° disponible en Comfort Panels y KTP Mobile Panels a
partir de 7"
Nota
Los objetos para la supervisi√≥n y el diagn√≥stico de instalaciones se pueden utilizar con los
niveles de protecci√≥n "Acceso total" y "Lectura" configurados en la CPU.
Los objetos ProDiag no se pueden utilizar con los niveles de protecci√≥n "Acceso HMI" y
"Ning√∫n acceso".

Concesi√≥n de licencia para supervisiones ProDiag
Se requieren licencias para el n√∫mero de supervisiones ProDiag que se configuran con STEP
7 Professional. Para las primeras 25 supervisiones no se necesita licencia, y para las dem√°s,
deben utilizarse licencias.

N√∫mero de super‚Äê
visiones

<= 25

<= 250

<= 500

<= 750

<= 1000

> 1000

N√∫mero de licen‚Äê
cias

Ninguna

1

2

3

4

5

Concesi√≥n de licencias a objetos ProDiag
Para utilizar en su programa los objetos para el diagn√≥stico y la supervisi√≥n en combinaci√≥n
con la supervisi√≥n ProDiag, necesita una licencia ProDiag.

1894

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

12.3.4

Visualizaci√≥n de supervisiones

12.3.4.1

Objetos para la supervisi√≥n y el diagn√≥stico de instalaciones

Introducci√≥n
WinCC le ofrece los siguientes objetos para visualizar el estado actual de las supervisiones y
el diagn√≥stico de errores en el c√≥digo de programa:
‚óè Vista general de ProDiag
‚óè Vista general de GRAPH
‚óè Visor de c√≥digo PLC
‚óè Visor de an√°lisis de criterios

Vista general de ProDiag
El objeto "Vista general de ProDiag" proporciona un resumen del estado actual de las
supervisiones configuradas.
La vista general de ProDiag est√° disponible en Comfort Panels, KTP Mobile Panels, RT
Advanced y RT Professional.

Vista general de GRAPH
El objeto "Vista general de GRAPH" muestra el estado actual de las etapas ejecutadas de la
cadena secuencial GRAPH.
La vista general de GRAPH est√° disponible en Comfort Panels, KTP Mobile Panels, RT
Advanced y RT Professional.

Visor de c√≥digo PLC
El objeto "Visor de c√≥digo PLC" muestra el estado actual de los programas de usuario
programados en los lenguajes de programaci√≥n KOP, FUP o GRAPH.
El visor de c√≥digo PLC est√° disponible en Comfort Panels, RT Advanced, RT Professional y
KTP Mobile Panels a partir del tama√±o de pantalla de 7".

Visor de an√°lisis de criterios
El objeto "Visor de an√°lisis de criterios" sirve para mostrar los operandos err√≥neos en el
programa de usuario que se determinaron mediante an√°lisis de criterios para un aviso
seleccionado.
El visor de an√°lisis de criterios est√° disponible en Comfort Panels, KTP Mobile Panels, RT
Advanced y RT Professional.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1895

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

12.3.4.2

Interacci√≥n de los objetos para la supervisi√≥n y el diagn√≥stico

Introducci√≥n
Los objetos para la supervisi√≥n y el diagn√≥stico de instalaciones ofrecen las siguientes
posibilidades:
‚óè Representar en un dispositivo HMI el estado de las supervisiones configuradas en el
programa de usuario.
‚óè Evaluar los avisos actuales y mostrar el segmento causante de los avisos.
‚óè Mostrar el c√≥digo de programa en el dispositivo HMI.
Dependiendo de la aplicaci√≥n, en el panel de operador se muestra la siguiente informaci√≥n:
‚óè Con el objeto "Vista general de ProDiag" podr√° ver el estado actual de las supervisiones
ProDiag.
‚óè Con el objeto "Vista general de GRAPH" podr√° ver el estado actual de la cadena secuencial
GRAPH.
‚óè Con el objeto "Visor de an√°lisis de criterios" podr√° ver los operandos err√≥neos de un aviso
GRAPH o ProDiag seleccionado.

Interacci√≥n de los objetos ProDiag
La siguiente figura ilustra la interacci√≥n de objetos para visualizar las supervisiones de
ProDiag:

1896

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

,167$/$&,¬ï1

+0,

9LVRUGHF¬µGLJR3/&

9LVWDJHQHUDOGH*5$3+

9LVRUGHDYLVRV
9HQWDQDGHDYLVRV

9LVWDJHQHUDOGH3UR'LDJ

9LVRUGHDQ¬£OLVLV
GHFULWHULRV

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1897

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
La visualizaci√≥n de la funcionalidad ProDiag en el panel de operador se compone de las
siguientes acciones:
1. Mostrar el estado del programa
‚Äì Mostrar el estado de las supervisiones con la vista general de ProDiag
En el panel de operador se establece la conexi√≥n con el controlador y el FB ProDiag
conectado, y se muestra el estado actual de las supervisiones. En cuanto se produce un
evento, se enciende el correspondiente s√≠mbolo en la vista general de ProDiag.
El bot√≥n "Visor de avisos" permite saltar al visor o a la ventana de avisos que contiene
los detalles del evento que se ha producido. Para encontrar m√°s f√°cilmente los avisos
relevantes para la supervisi√≥n en el visor/la ventana de avisos, se recomienda limitar los
avisos mostrados utilizando un filtro.
‚Äì Visualizaci√≥n de la secuencia de la cadena GRAPH con la vista general de GRAPH
En cuanto se establece la conexi√≥n con el controlador, se representa en runtime la etapa
que se est√° ejecutando actualmente en la cadena secuencial GRAPH. Los botones de
mando le permiten desplazarse a otras etapas o a la etapa inicial de la cadena
secuencial.
El bot√≥n "Visor de avisos" permite saltar al visor o a la ventana de avisos que contiene
los detalles del evento que se ha producido.
El bot√≥n "Visor de c√≥digo PLC" permite saltar a dicho visor, p. ej., para mostrar un error
en la secuencia de la cadena GRAPH.
2. Mostrar avisos actuales en el visor de avisos o en la ventana de avisos
En el visor de avisos o en la ventana de avisos se muestran en runtime los avisos que se
producen.
Nota
Visualizaci√≥n de avisos de las categor√≠as "Acknowledgement" y "No Acknowledgement"
Para mostrar los avisos de supervisi√≥n de las categor√≠as propias del sistema o definidas por
el usuario en el visor de avisos o la ventana de avisos, active la visualizaci√≥n de dichas
categor√≠as en la ventana de inspecci√≥n en "Propiedades > Propiedades > General".
En el visor/la ventana de avisos se pueden activar las categor√≠as de los avisos de
supervisi√≥n solo tras haber configurado las supervisiones y compilado el controlador.
La funci√≥n de sistema "ActivarVisorC√≥digoPLC" permite saltar desde el √∫ltimo aviso activo
o desde un aviso seleccionado al visor de c√≥digo PLC con el c√≥digo de programa en
cuesti√≥n.
Adem√°s, con las funciones de adquisici√≥n de primeros valores y an√°lisis de criterios tiene
la posibilidad de registrar los valores en el momento del fallo y de visualizar los operandos
err√≥neos del programa en el objeto "Visor de an√°lisis de criterios".
3. Mostrar c√≥digo de programa en el visor de c√≥digo PLC
En cuanto se ha establecido una conexi√≥n con el controlador, el visor de c√≥digo PLC
muestra el estado actual del segmento, en funci√≥n de la configuraci√≥n:
‚Äì En runtime se muestran el segmento KOP/FUP y el c√≥digo de programa. En la tabla de
s√≠mbolos se representan los nombres de los s√≠mbolos, las direcciones absolutas y los
correspondientes comentarios.
‚Äì En runtime se representa la cadena secuencial GRAPH. En la vista de detalles se
muestran las transiciones de las etapas.
Si lo desea, puede configurar un bot√≥n que en caso de fallo cambie de aspecto y le permita
saltar al visor de c√≥digo PLC configurado. Para ello, defina un bot√≥n y as√≠gnele la funci√≥n

1898

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
del sistema "ActivarVisorC√≥digoPLC". Dinamice la apariencia (p. ej., el color de fondo) del
bot√≥n mediante la variable de control para el visor de c√≥digo PLC que haya interconectado
anteriormente con el visor de avisos, para que, p. ej., el bot√≥n cambie de color al recibirse
un aviso de ProDiag.

Transferencia de idiomas de la CPU al panel de operador HMI
En el TIA Portal se cargan autom√°ticamente desde el programa de usuario del controlador al
panel de operador los textos para la funcionalidad ProDiag, p. ej., los nombres de s√≠mbolos y
los comentarios en un visor de c√≥digo PLC, as√≠ como los textos de los avisos de supervisi√≥n.
En los proyectos multiling√ºes, procure que coincidan los idiomas que est√©n disponibles en el
controlador y los idiomas de runtime del panel de operador. Solo si los idiomas coinciden se
podr√°n mostrar los textos de aviso en el panel de operador en el idioma deseado.
Encontrar√° m√°s informaci√≥n sobre los proyectos multiling√ºes en "Configurar dispositivos y
redes > Informaci√≥n adicional sobre configuraciones > Funcionamiento de las CPUs S7-1500
> Configuraci√≥n del comportamiento operativo > Propiedades de la CPU > Multiling√ºismo".

12.3.4.3

Interacci√≥n de los objetos para la supervisi√≥n y el diagn√≥stico

Introducci√≥n
Los objetos para la supervisi√≥n y el diagn√≥stico de instalaciones ofrecen las siguientes
posibilidades:
‚óè Representar en un dispositivo HMI el estado de las supervisiones configuradas en el
programa de usuario.
‚óè Evaluar los avisos actuales y mostrar el segmento causante de los avisos.
‚óè Mostrar el c√≥digo de programa en el dispositivo HMI.
Dependiendo de la aplicaci√≥n, en el panel de operador se muestra la siguiente informaci√≥n:
‚óè Con el objeto "Vista general de ProDiag" podr√° ver el estado actual de las supervisiones
ProDiag.
‚óè Con el objeto "Vista general de GRAPH" podr√° ver el estado actual de la cadena secuencial
GRAPH.
‚óè Con el objeto "Visor de an√°lisis de criterios" podr√° ver los operandos err√≥neos de un aviso
GRAPH o ProDiag seleccionado.

Interacci√≥n de los objetos ProDiag
La siguiente figura ilustra la interacci√≥n de objetos para visualizar las supervisiones de
ProDiag:

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1899

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

,167$/$&,¬ï1

+0,

9LVRUGHF¬µGLJR3/&

1900

9LVWDJHQHUDOGH*5$3+

9LVRUGHDYLVRV
9HQWDQDGHDYLVRV

9LVWDJHQHUDOGH3UR'LDJ

9LVRUGHDQ¬£OLVLV
GHFULWHULRV

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
La visualizaci√≥n de la funcionalidad ProDiag en el panel de operador se compone de las
siguientes acciones:
1. Mostrar el estado del programa
‚Äì Mostrar el estado de las supervisiones con la vista general de ProDiag
En el panel de operador se establece la conexi√≥n con el controlador y el FB ProDiag
conectado, y se muestra el estado actual de las supervisiones. En cuanto se produce un
evento, se enciende el correspondiente s√≠mbolo en la vista general de ProDiag.
El bot√≥n "Visor de avisos" permite saltar al visor o a la ventana de avisos que contiene
los detalles del evento que se ha producido. Para encontrar m√°s f√°cilmente los avisos
relevantes para la supervisi√≥n en el visor/la ventana de avisos, se recomienda limitar los
avisos mostrados utilizando un filtro.
‚Äì Visualizaci√≥n de la secuencia de la cadena GRAPH con la vista general de GRAPH
En cuanto se establece la conexi√≥n con el controlador, se representa en runtime la etapa
que se est√° ejecutando actualmente en la cadena secuencial GRAPH. Los botones de
mando le permiten desplazarse a otras etapas o a la etapa inicial de la cadena
secuencial.
El bot√≥n "Visor de avisos" permite saltar al visor o a la ventana de avisos que contiene
los detalles del evento que se ha producido.
El bot√≥n "Visor de c√≥digo PLC" permite saltar a dicho visor, p. ej., para mostrar un error
en la secuencia de la cadena GRAPH.
2. Mostrar avisos actuales en el visor de avisos o en la ventana de avisos
En el visor de avisos o en la ventana de avisos se muestran en runtime los avisos que se
producen.
Nota
Visualizaci√≥n de avisos de las categor√≠as "Acknowledgement" y "No Acknowledgement"
Para mostrar los avisos de supervisi√≥n de las categor√≠as propias del sistema o definidas por
el usuario en el visor de avisos o la ventana de avisos, active la visualizaci√≥n de dichas
categor√≠as en la ventana de inspecci√≥n en "Propiedades > Propiedades > General".
En el visor/la ventana de avisos se pueden activar las categor√≠as de los avisos de
supervisi√≥n solo tras haber configurado las supervisiones y compilado el controlador.
La funci√≥n de sistema "MostrarVisorAvisosC√≥digoPLC" permite saltar desde el √∫ltimo aviso
activo o desde un aviso seleccionado al visor de c√≥digo PLC con el c√≥digo de programa en
cuesti√≥n.
Adem√°s, con las funciones de adquisici√≥n de primeros valores y an√°lisis de criterios tiene
la posibilidad de registrar los valores en el momento del fallo y de visualizar los operandos
err√≥neos del programa en el objeto "Visor de an√°lisis de criterios".
3. Mostrar c√≥digo de programa en el visor de c√≥digo PLC
En cuanto se ha establecido una conexi√≥n con el controlador, el visor de c√≥digo PLC
muestra el estado actual del segmento, en funci√≥n de la configuraci√≥n:
‚Äì En runtime se muestran el segmento KOP/FUP y el c√≥digo de programa. En la tabla de
s√≠mbolos se representan los nombres de los s√≠mbolos, las direcciones absolutas y los
correspondientes comentarios.
‚Äì En runtime se representa la cadena secuencial GRAPH. En la vista de detalles se
muestran las transiciones de las etapas.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1901

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
Si lo desea, puede configurar un bot√≥n que en caso de fallo le permita saltar al visor de
c√≥digo PLC configurado. Para ello, defina un bot√≥n y config√∫relo con la funci√≥n del sistema
"MostrarVisorAvisosC√≥digoPLC".

Transferencia de idiomas de la CPU al panel de operador HMI
En el TIA Portal V14 se cargan autom√°ticamente desde el programa de usuario del controlador
al panel de operador los textos para la funcionalidad ProDiag, p. ej., los nombres de s√≠mbolos
y los comentarios en un visor de c√≥digo PLC, as√≠ como los textos de los avisos de supervisi√≥n.
En los proyectos multiling√ºes, procure que coincidan los idiomas que est√©n disponibles en el
controlador y los idiomas de runtime del panel de operador. Solo si los idiomas coinciden se
podr√°n mostrar los textos de aviso en el panel de operador en el idioma deseado.
Encontrar√° m√°s informaci√≥n sobre los proyectos multiling√ºes en "Configurar dispositivos y
redes > Informaci√≥n adicional sobre configuraciones > Funcionamiento de las CPUs S7-1500
> Configuraci√≥n del comportamiento operativo > Propiedades de la CPU > Multiling√ºismo".

12.3.4.4

Configuraci√≥n de la vista general de ProDiag

Resumen de la configuraci√≥n de supervisiones
Introducci√≥n
En el TIA Portal, las supervisiones de ProDiag se configuran en el programa de usuario en
STEP 7 y la visualizaci√≥n para los paneles de mando HMI se configura en WinCC.

Requisitos
‚óè Se ha creado un controlador S7-1500.
‚óè Existe por lo menos una variable booleana en un bloque de datos, en una tabla de variables
o en una interfaz de bloque.
‚óè Se ha creado un panel de operador HMI.
‚óè Se ha creado una imagen.

Pasos necesarios para configurar supervisiones con ProDiag
La funcionalidad ProDiag se configura en el TIA Portal siguiendo los pasos siguientes:
En STEP 7
1. Crear el bloque de funci√≥n ProDiag para las supervisiones.
2. Definir la configuraci√≥n en el bloque de funci√≥n ProDiag.

1902

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
3. Definir la configuraci√≥n de supervisiones de ProDiag
‚Äì Definir el tipo de supervisi√≥n.
‚Äì Ajustar el retardo.
‚Äì Seleccionar las condiciones en las que se disparar√° un aviso de supervisi√≥n.
‚Äì Definir las categor√≠as y subcategor√≠as.
4. Agregar la supervisi√≥n de una variable booleana.
Crear una supervisi√≥n global o local para una variable booleana.
5. Llamar el bloque de funci√≥n ProDiag
6. Compilar y cargar el proyecto
En WinCC
1. Insertar el objeto "Vista general de ProDiag" en la imagen HMI.
2. Seleccionar la variable de estado.
3. Configurar la visualizaci√≥n y la representaci√≥n del objeto en la configuraci√≥n.
4. Configurar el salto al visor de avisos.
Asimismo es posible mostrar la ejecuci√≥n del programa en el objeto "Vista general de GRAPH"
y el estado actual del programa en el objeto "Visor de c√≥digo PLC".

Asignaci√≥n de s√≠mbolos en la vista general de ProDiag

La variable de estado "State" del tipo de datos de PLC "SV_FB_State" del bloque de funci√≥n
ProDiag contiene los bits de error agrupado para los tipos de supervisi√≥n y las categor√≠as que
se muestran con ayuda de la vista general de ProDiag.
Puede visualizar dos tipos de bits de error agrupado en el objeto "Vista general de ProDiag":
‚óè Bit de error agrupado para las supervisiones (All, O, I, R, A, P, Merr y Mtxt)
‚óè Bit de error agrupado para las categor√≠as (C1 ... C6)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1903

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
La siguiente tabla muestra la asignaci√≥n de los bits de error agrupado de la variable de estado
"State" a los s√≠mbolos de la vista general de ProDiag.
Vista general de ProDiag

Elementos del FB ProDiag

Descripci√≥n

All

Bit de error agrupado para todos los
tipos de supervisiones, excepto de
avisos de texto

S√≠mbolos

Si el valor All = TRUE, se ha dispara‚Äê
do al menos una supervisi√≥n y el s√≠m‚Äê
bolo se resalta visualmente en la vis‚Äê
ta general de ProDiag.
SV_Types

Byte para todos los bits de error agru‚Äê
pado de los tipos de supervisi√≥n

Mtxt (Message text)

Bit de error agrupado para todos los
avisos

-

Tooltip con informaci√≥n sobre esta
vista general de ProDiag

E (Error)

C1 (Category)

Error

W (Warning)

C2 (Category)

Advertencia

Categories

Byte de error agrupado para todas
las categor√≠as.

I (Info)

C3 (Category)

Informaci√≥n

C4 ... C6

C4 ... C6 (Category)

Categor√≠as adicionales

O

O (Operand)

Bit de error agrupado para supervi‚Äê
siones de operandos

I

I (Interlock)

Bit de error agrupado para supervi‚Äê
siones de enclavamientos

A

A (Action)

Bit de error agrupado para supervi‚Äê
siones de acciones

R

R (Reaction)

Bit de error agrupado para supervi‚Äê
siones de reacciones

P

P (Position)

Bit de error agrupado para supervi‚Äê
siones de posiciones

M

Merr (Message error)

Bit de error agrupado para avisos de
error

Categor√≠as

Tipos de supervisiones

Configuraci√≥n de la vista general de ProDiag
Introducci√≥n
La vista general de ProDiag permite supervisar la m√°quina o la instalaci√≥n en runtime y
determinar la informaci√≥n de diagn√≥stico en caso de producirse un error.

1904

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
Tras definir la variable de estado en el objeto y establecer la conexi√≥n con un FB ProDiag, se
consulta el estado de la variable de estado "State" del tipo de datos PLC correspondiente. En
runtime, los estados de los operandos supervisados se muestran en la vista general de
ProDiag a modo de s√≠mbolos, de forma similar a los colores de un sem√°foro.
En WinCC se configuran la visualizaci√≥n y la representaci√≥n de las categor√≠as y los tipos de
supervisi√≥n que se muestran en el objeto "Vista general de ProDiag" independientemente de
la configuraci√≥n de supervisiones en STEP 7.

Requisitos
‚óè Se ha creado un controlador S7-1500 como m√≠nimo.
‚óè Se ha configurado una supervisi√≥n como m√≠nimo.
‚óè Existen un FB ProDiag y una DB ProDiag.
‚óè Se ha creado una estaci√≥n PC o un panel de operador que soporta la funcionalidad ProDiag.
‚óè Se ha creado una conexi√≥n HMI entre el controlador y el panel de operador.
‚óè Se ha creado una imagen y la ventana de inspecci√≥n est√° abierta.

Procedimiento
1. Haga clic en la ventana de inspecci√≥n "Propiedades > Propiedades > General".
2. Pulse el bot√≥n de selecci√≥n bajo la propiedad "Variable".
3. Seleccione la variable de estado del FB ProDiag.
Tambi√©n es posible agregar la variable de estado correspondiente desde la vista detallada
con la funci√≥n de arrastrar y soltar.

4. Defina los nombres y colores de las categor√≠as de supervisi√≥n en "Salida > Categor√≠as".
5. Defina los nombres y colores de los tipos de supervisi√≥n en "Salida > Tipos de
supervisiones".
6. En "Representaci√≥n" defina los s√≠mbolos y botones que se mostrar√°n en el objeto.
7. Seleccione un permiso de operaci√≥n en "Propiedades > Propiedades > Seguridad".
8. Puede configurar una funci√≥n de sistema para el evento "Hacer clic en el bot√≥n Visor de
avisos" en "Propiedades > Eventos" para saltar de la vista general de ProDiag al visor de
avisos en runtime.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1905

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Resultado
La vista general de ProDiag se ha insertado en la imagen. En runtime se visualizan los estados
actuales relativos a los eventos supervisados.

Configuraci√≥n del salto al visor de avisos
Introducci√≥n
Cuando se produce un error puede saltarse de la vista general de ProDiag directamente a una
ventana de avisos o a una imagen con un visor de avisos.

Requisitos
‚óè Se ha creado una imagen.
‚óè Se ha creado un visor de avisos o una ventana de avisos.
‚óè Se ha creado el objeto "Vista general de ProDiag".
‚óè La ventana de inspecci√≥n est√° abierta.

Configuraci√≥n del salto al visor de avisos
1. Haga clic en la ventana de inspecci√≥n "Propiedades > Eventos".
2. Haga clic en el evento "Visor de avisos Bot√≥n Hacer clic".
3. Seleccione la funci√≥n de sistema "MostrarVentanaDeAvisos" en "<Agregar funci√≥n>".
4. Introduzca el nombre del objeto de la ventana de avisos.
5. Tambi√©n puede abrir la imagen con el visor de avisos configurado con la funci√≥n
"ActivarImagen".
Introduzca el nombre de la imagen que contiene el visor de avisos configurado.

Resultado
Si en runtime pulsa el bot√≥n "Visor de avisos" en la vista general de ProDiag configurada,
autom√°ticamente se abrir√° la imagen con el correspondiente visor de avisos o bien una
ventana de avisos.

12.3.4.5

Configuraci√≥n de la vista general de GRAPH

Mostrar el estado de la cadena secuencial de GRAPH
Introducci√≥n
Con ayuda del objeto "Vista general de GRAPH" se visualiza el estado de la cadena secuencial
de GRAPH.

1906

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

















 

‚ë† S√≠mbolo de error
‚ë° Nombre del bloque de datos de GRAPH
‚ë¢ Nombre de la etapa que se ejecuta actualmente
‚ë£ Etapa activa de la cadena secuencial
‚óè Si se produce una anomal√≠a en una etapa, su n√∫mero se marca en rojo.

‚ë§ Modo de operaci√≥n
‚ë• Bot√≥n "Etapa"
‚óè Cuando la cadena se encuentre en la √∫ltima etapa, se mostrar√° el bot√≥n "Etapa inicial".

‚ë¶ Bot√≥n "Visor de avisos"
‚ëß S√≠mbolo de la etapa inicial
‚ë® Bot√≥n "Visor de c√≥digo PLC"
‚ë© S√≠mbolo de etapas simult√°neas
Mostrar el estado de la cadena secuencial de GRAPH
A trav√©s de la variable del bloque de datos GRAPH se conecta la vista general de GRAPH con
el controlador. Tras haber establecido la conexi√≥n con el controlador, el objeto muestra el
n√∫mero de etapa de las etapas de la cadena secuencial GRAPH. El nombre de la etapa que
se est√° ejecutando actualmente se indica debajo de la cadena secuencial. Si adem√°s de la
etapa que se est√° ejecutando hay otras etapas simult√°neas, se iluminar√° el s√≠mbolo de etapas
simult√°neas en la vista general de GRAPH.
Dependiendo de la aplicaci√≥n, puede alternar entre los cuatro modos de operaci√≥n para la
secuencia de la cadena GRAPH. El modo seleccionado actualmente se muestra en la vista
general de GRAPH.
Si se produce un error durante la ejecuci√≥n de una etapa, la etapa err√≥nea y el s√≠mbolo de error
se resaltan visualmente.
En caso de error, es posible saltar al aviso en el visor de avisos configurado o ver el programa
en cuesti√≥n en el visor de c√≥digo PLC.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1907

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Modo de una l√≠nea
Es posible representar la vista general de GRAPH en la vista est√°ndar o en el modo de una
l√≠nea. Por ejemplo, puede configurar en una imagen varias vistas generales de GRAPH en el
modo de una l√≠nea. De este modo obtiene una visi√≥n de conjunto del estado actual de varias
√°reas de producci√≥n cuyas supervisiones se agrupan en los correspondientes FB GRAPH.

Visualizaci√≥n de etapas y an√°lisis de criterios
En el modo avanzado, active las l√≠neas adicionales para mostrar la etapa anterior y siguiente,
as√≠ como el primer operando err√≥neo del an√°lisis de criterios.

200 25
S 001
S 002
S 021

Etapa anterior
Etapa actual
Siguiente etapa
Nombre; %direcci√≥n; comentario

Consulte tambi√©n
Vista general de GRAPH (P√°gina 392)
Configuraci√≥n de la vista general de GRAPH (P√°gina 1910)
Configurar el modo de operaci√≥n (P√°gina 1912)
Interacci√≥n de los objetos para la supervisi√≥n y el diagn√≥stico (P√°gina 1896)
Adquisici√≥n de primeros valores y an√°lisis de criterios (P√°gina 1955)

Visualizaci√≥n del desarrollo de las etapas
Introducci√≥n
En la vista general de GRAPH tiene la posibilidad de mostrar, adem√°s de la etapa actual, la
etapa anterior y siguiente de la cadena GRAPH. Para ello, despu√©s de abrir una imagen con
una vista general de GRAPH, se registran internamente las etapas activas. Si aparece un fallo
en una etapa, en la vista general de GRAPH ver√° qu√© acci√≥n se ejecut√≥ antes de la etapa
err√≥nea y qu√© acci√≥n le sigue.
Los nombres de las etapas multiling√ºes que se mostrar√°n en la vista general de GRAPH se
definen previamente en una lista de textos multiling√ºe, en el programa de usuario.

1908

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

200 25
S 001
S 002
S 021

Etapa anterior
Etapa actual
Siguiente etapa
Nombre; %direcci√≥n; comentario

Identificaci√≥n de las etapas
La cadena secuencial de GRAPH se eval√∫a de izquierda a derecha. Los n√∫meros de etapa
visualizados en la vista general de GRAPH se marcan adicionalmente seg√∫n si existe una
rama simult√°nea o alternativa inmediatamente despu√©s o antes de la etapa en cuesti√≥n. Con
ello, podr√° ver r√°pidamente las siguientes informaciones relativas a la ejecuci√≥n del programa:
‚óè Signo m√°s
‚Äì En la etapa anterior: antes de la etapa activa existe una rama simult√°nea. Hab√≠a varias
etapas activas simult√°neamente.
‚Äì En la etapa siguiente: despu√©s de la etapa activa existe una rama simult√°nea. Con ello
se activar√° m√°s de una etapa.
‚óè Signo de interrogaci√≥n
‚Äì En la etapa anterior: antes de la etapa activa, otra etapa diferente de la primera
(izquierda) de la cadena pudo estar activa.
‚Äì En la etapa siguiente: despu√©s de la etapa activa existe una rama alternativa. Con ello,
otra etapa diferente de la primera (izquierda) de la cadena tambi√©n se puede activar.
‚óè Ning√∫n signo: la etapa anterior o la siguiente est√° determinada de forma un√≠voca.
Nota
Restricciones de la determinaci√≥n de etapas
Al llamar la vista general de GRAPH por primera vez se determinan las etapas anteriores y
siguientes desde el bloque GRAPH en el orden de la cadena programada.
Despu√©s de la primera llamada de la vista general de GRAPH y tras un cambio de imagen, no
existe ning√∫n registro de las etapas activas, por lo que no es posible determinar de forma
un√≠voca la etapa anterior.
La vista general de GRAPH actualiza la visualizaci√≥n en intervalos de tiempo regulares. Si la
cadena se ejecuta r√°pido o se cambia manualmente a menudo entre las etapas, puede que se
determine otra etapa diferente de la que estaba activa.

Visualizaci√≥n de la etapa anterior y siguiente
Para ver las etapas anterior y siguiente en la vista general de GRAPH, active la opci√≥n "Etapa
anterior y siguiente" en "Propiedades > Apariencia > Opciones".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1909

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Visualizaci√≥n del resultado del an√°lisis de criterios
En caso de que haya un error presente, en la vista general de GRAPH se puede ver el
resultado del an√°lisis de criterios. Se mostrar√° el nombre del s√≠mbolo, la direcci√≥n absoluta, el
valor del primer operando err√≥neo y el comentario en la √∫ltima l√≠nea de la vista general de
GRAPH.
Para ver el primer operando err√≥neo del an√°lisis de criterios, active la opci√≥n "An√°lisis de
criterios" en "Propiedades > Apariencia > Opciones".
Nota
En los casos siguientes, para el an√°lisis de criterios no se mostrar√° informaci√≥n en la vista
general de GRAPH:
‚óè La versi√≥n del bloque GRAPH es anterior a la 4.0.
‚óè No se activ√≥ la adquisici√≥n de primeros valores en las propiedades del bloque o no se
registraron los primeros valores.
‚óè No hay ning√∫n error en la etapa actual.

Configuraci√≥n de la vista general de GRAPH
Introducci√≥n
La vista general de GRAPH muestra el estado actual de las etapas ejecutadas de una cadena
secuencial GRAPH.

Requisitos
‚óè Se ha creado un PLC con un bloque de datos de instancia GRAPH.
‚óè El bloque de datos de instancia GRAPH contiene como m√≠nimo una variable visible en HMI
y accesible desde HMI.
Nota
La variable de proceso que se utiliza para la vista general de GRAPH debe ser visible y
accesible desde el panel HMI.
Para hacer que las variables del bloque de datos GRAPH sean visibles y accesibles para
HMI, abra el bloque de funci√≥n GRAPH, seleccione el bloque en el √°rea de trabajo y elija
"Editar > Par√°metros internos visibles/accesibles desde HMI" en la barra de men√∫s. A
continuaci√≥n, compile los bloques de programa.
‚óè Se ha creado un panel de operador.
‚óè Se ha creado una imagen.
‚óè La ventana de inspecci√≥n est√° abierta.

1910

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Procedimiento
1. Arrastre la vista general de GRAPH desde la ventana de herramientas a la imagen
configurada con la funci√≥n de arrastrar y colocar.
2. Haga clic en la ventana de inspecci√≥n "Propiedades > Propiedades > General".
3. Abra el bot√≥n de selecci√≥n en "Proceso > Variable".
Se abre el cuadro de di√°logo "Agregar objeto".
4. Seleccione el PLC correspondiente en la carpeta "Bloques de programa".
5. Seleccione la variable PLC correspondiente del bloque de datos de instancia GRAPH.
Nota
Si no se han configurado conexiones entre el dispositivo HMI y el PLC seleccionado, se
crear√° una autom√°ticamente.
Adem√°s, se crea una variable HMI enlazada con la variable PLC.
6. En "Propiedades > Propiedades > Representaci√≥n > Opciones", defina los s√≠mbolos que se
mostrar√°n en la vista general de GRAPH.
Para mostrar la vista general de GRAPH en modo de compatibilidad sin los botones de la
barra de herramientas ni el indicador del modo de operaci√≥n, active la propiedad "Modo de
una l√≠nea".

7. En "Propiedades > Propiedades > Barra de herramientas > General", defina los botones
que se mostrar√°n en el objeto.
8. Las propiedades del objeto "Vista general de GRAPH" se pueden dinamizar con variables
y los estados se pueden marcar con colores.
En el cap√≠tulo Dinamizaci√≥n de im√°genes (P√°gina 209) se ofrece una descripci√≥n completa
de c√≥mo dinamizar una propiedad.
9. En "Propiedades > Eventos" puede asignar funciones de sistema a los botones de la vista
general de GRAPH para saltar al visor de avisos o al visor de c√≥digo PLC en runtime.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1911

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Resultado
La vista general de GRAPH se ha insertado en la imagen. En runtime se visualiza el estado
actual de la cadena secuencial GRAPH.

Consulte tambi√©n
Mostrar el estado de la cadena secuencial de GRAPH (P√°gina 1906)
Dinamizaci√≥n de im√°genes (P√°gina 209)
Principios b√°sicos de la dinamizaci√≥n de im√°genes (P√°gina 209)

Configurar el modo de operaci√≥n
Introducci√≥n
Para la ejecuci√≥n del bloque GRAPH se dispone de cuatro modos de operaci√≥n distintos:
‚óè Auto (predeterminado)
Cambia autom√°ticamente a la siguiente etapa cuando se cumple la transici√≥n.
‚óè TAP
Cambia autom√°ticamente a la siguiente etapa cuando se cumple la transici√≥n y existe
cambio de flanco de "0" a "1" en el par√°metro T_PUSH.
‚óè TOP
Cambia autom√°ticamente a la siguiente etapa cuando se cumple la transici√≥n o existe
cambio de flanco de "0" a "1" en el par√°metro T_PUSH.
‚óè Manual
Al cumplirse la transici√≥n, la siguiente etapa no se activa autom√°ticamente. Las etapas
pueden seleccionarse y deseleccionarse manualmente.
Nota
El modo de operaci√≥n se establece modificando los par√°metros de la interfaz del bloque
GRAPH en el programa de control.

Nota
El nombre del modo de operaci√≥n depende del idioma y puede traducirse a los idiomas de
runtime deseados.
En WinCC Runtime Professional existe la posibilidad de cambiar el nombre del modo de
operaci√≥n que se muestra en la vista general de GRAPH.

1912

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Configurar los t√≠tulos para los modos de operaci√≥n
Hay una imagen abierta con la vista general de GRAPH configurada.
1. Haga clic en "Propiedades > Propiedades > Salida" en la ventana de inspecci√≥n.
2. Configure los t√≠tulos para los cuatro modos de operaci√≥n en "Salida > T√≠tulos".

12.3.4.6

Configurar el visor de c√≥digo PLC

Configurar el visor de c√≥digo PLC
Introducci√≥n
En el proyecto se inserta un visor de c√≥digo PLC para mostrar en runtime los segmentos del
programa PLC en los lenguajes de programaci√≥n KOP, FUP y GRAPH.

Requisitos
‚óè Se ha creado un controlador como m√≠nimo.
‚óè Se ha creado un panel de operador.
‚óè Se ha creado una conexi√≥n HMI entre el controlador y el panel de operador.
‚óè Se ha creado una imagen.
‚óè La ventana de inspecci√≥n est√° abierta.

Procedimiento
1. Arrastre el visor de c√≥digo PLC de la ventana de herramientas utilizando la funci√≥n de
arrastrar y soltar.
2. En la ventana de inspecci√≥n, haga clic en "Propiedades > Propiedades > Barra de
herramientas".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1913

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
3. Active los botones que requiera en runtime, p. ej.: segmento siguiente, segmento anterior,
modo paso a paso.

4. En caso necesario, configure la representaci√≥n de los botones, p. ej., el color de fondo o el
patr√≥n de relleno.
5. En la ventana de inspecci√≥n, haga clic en "Propiedades > Propiedades > Columnas".
6. En caso necesario, adapte los t√≠tulos o el orden de las columnas.
7. Seleccione un permiso de operaci√≥n en "Propiedades > Propiedades > Seguridad".

Resultado
El visor de c√≥digo PLC se ha insertado en la imagen. En runtime se pueden mostrar programas
de usuario del PLC programados en los lenguajes de programaci√≥n KOP, FUP o GRAPH.

Vistas en el visor de c√≥digo PLC
Introducci√≥n
En el visor de c√≥digo PLC se muestra diferente informaci√≥n sobre el programa de usuario:
‚óè √Årea de informaci√≥n
‚óè Tabla de s√≠mbolos
‚óè Vista detallada
‚óè Vista Transition/Interlock
‚óè Vista de primeros valores/valores actuales

1914

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

√Årea de informaci√≥n
El √°rea de informaci√≥n muestra el c√≥digo KOP/FUP del programa de usuario o la cadena
secuencial GRAPH de un bloque de funci√≥n GRAPH. Una vez que se ha establecido la
conexi√≥n con el controlador, en el √°rea de informaci√≥n aparece resaltado el estado del
segmento encima del c√≥digo del programa.

Tabla de s√≠mbolos
La tabla de s√≠mbolos muestra s√≠mbolos que se utilizan en el segmento mostrado. Las tres
columnas de la tabla de s√≠mbolos muestran el nombre de s√≠mbolo de las variables, la direcci√≥n
absoluta y los comentarios. Dado que los comentarios se cargan desde el programa de usuario
del controlador, aparecer√°n en el idioma que est√© cargado en el controlador.
La altura y anchura de la tabla de s√≠mbolos se pueden modificar din√°micamente en runtime.

Vista detallada
Para representar su cadena secuencial GRAPH dispone adem√°s de una vista detallada.
La vista detallada muestra informaci√≥n exhaustiva acerca del segmento seleccionado y de los
errores existentes. En la vista detallada puede verse, p. ej., la transici√≥n de la primera etapa

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1915

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
activa de la cadena secuencial GRAPH. La vista detallada se abre en runtime con el bot√≥n
"Vista detallada".

Vista Transition/Interlock
Existe la posibilidad de cambiar entre las vistas de transici√≥n e Interlock al visualizar el
programa de usuario. La vista Transition/Interlock est√° disponible cuando se muestra la vista
detallada.
Puede cambiar entre las vistas Transition/Interlock en runtime con ayuda del bot√≥n "Transition/
Interlock". Al activar el bot√≥n se muestra el segmento Interlock, y al desactivarlo, el segmento
Transition.

1916

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Vista de primeros valores/valores actuales
Si ha activado la adquisici√≥n de primeros valores en el programa de usuario para el
correspondiente bloque de funci√≥n, en el visor de c√≥digo PLC podr√° alternar la vista de
primeros valores y la de valores actuales. La vista de valores actuales utiliza los valores
actuales del controlador y muestra el estado actual del programa. La vista de primeros valores
utiliza los valores registrados en el momento del error y muestra los criterios y los operandos
err√≥neos. En la vista de primeros valores se resaltan visualmente los operandos err√≥neos.
Se cambia entre los valores actuales y los primeros valores con el bot√≥n "Valores actuales o
primeros valores". Si la adquisici√≥n de primeros valores est√° activada, en el visor de c√≥digo
PLC se muestra por defecto la vista de primeros valores tras el salto.
En caso de fallo, en la vista de primeros valores se resaltan los operandos err√≥neos en runtime.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1917

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Botones de la barra de herramientas
La tabla siguiente muestra los botones de la barra de herramientas y su significado.
Elemento de ma‚Äê
nejo

1918

Nombre

Funci√≥n

"√Årea del s√≠mbolo"

Muestra el √°rea del s√≠mbolo.

"Segmento anterior"

Se desplaza al segmento anterior.

"Segmento siguiente"

Se desplaza al segmento siguiente.

"Ampliar"

Ampl√≠a el √°rea de informaci√≥n.

"Reducir"

Reduce el √°rea de informaci√≥n.

"Detalle"

Muestra la vista detallada.

"Modo paso a paso"

Alterna la selecci√≥n de etapas manual y la selec‚Äê
ci√≥n autom√°tica de la etapa activa.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
Elemento de ma‚Äê
nejo

Nombre

Funci√≥n

"Transici√≥n o Interlock"

Alterna entre las representaciones de segmentos
de transici√≥n y de Interlock.

"Valores actuales o primeros
valores"

Alterna entre la vista de valores actuales y la de
primeros valores.

Configurar la visualizaci√≥n en el visor de c√≥digo PLC
Introducci√≥n
El visor de c√≥digo PLC permite tambi√©n dividir la vista para representar la cadena secuencial
GRAPH. De esta manera tiene la posibilidad de ver el programa y sus detalles de un vistazo.
A la vista detallada se accede en runtime mediante el bot√≥n "Vista detallada".
En WinCC puede definir el tama√±o relativo del √°rea de informaci√≥n respecto a la vista detallada.

Requisitos
‚óè Se ha creado una imagen.
‚óè Se ha creado un visor de c√≥digo PLC en la imagen.
‚óè La ventana de inspecci√≥n est√° abierta.

Definir la anchura de la vista detallada
1. Haga clic en la ventana de inspecci√≥n "Propiedades > Propiedades > Representaci√≥n".
2. Defina la anchura de la vista detallada en relaci√≥n al √°rea de informaci√≥n con ayuda de la
opci√≥n "Anchura vista detallada GRAPH (%)".

Resultado
El visor de c√≥digo PLC se divide en dos √°reas para la representaci√≥n de la cadena secuencial
GRAPH en runtime. El √°rea de la izquierda muestra la cadena secuencial GRAPH y el √°rea de
la derecha muestra la vista detallada con la transici√≥n de la etapa activa.

Instrucciones soportadas
Introducci√≥n
El objeto "Visor de c√≥digo PLC" soporta instrucciones en los lenguajes de programaci√≥n FUP
y KOP.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1919

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Instrucciones
El visor de c√≥digo PLC soporta las siguientes instrucciones:
‚óè Operaciones l√≥gicas con bits
‚óè Comparadores
‚óè Temporizadores
‚óè Contadores

Operaciones l√≥gicas con bits

Instrucci√≥n

KOP

FUP

Contacto normalmente cerrado

‡≤Ø7DJB‡≤Ø

Contacto normalmente abierto

‡≤Ø7DJB‡≤Ø

Activar salida

‡≤Ø7DJB‡≤Ø
6

Desactivar salida

 6

‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø
5

Asignaci√≥n

‡≤Ø7DJB‡≤Ø
‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø
‡≤Ø7DJB‡≤Ø

 5

‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø
‡≤Ø7DJB‡≤Ø



‡≤Ø7DJB‡≤Ø

NOT: Invertir RLO

‡≤Ø7DJB‡≤Ø
127

Contacto invertido

‡≤Ø7DJB‡≤Ø

 

‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø
‡≤Ø7DJB‡≤Ø



‡≤Ø7DJB‡≤Ø

1920

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
Instrucci√≥n

KOP

FUP

SR: Flipflop de activaci√≥n/desactivaci√≥n

‡≤Ø7DJB‡≤Ø
‡≤Ø7DJB‡≤Ø
‡≤Ø7DJB‡≤Ø

6

‡≤Ø7DJB‡≤Ø
‡≤Ø7DJB‡≤Ø

4

‡≤Ø7DJB‡≤Ø

5

RS: Flipflop de desactivaci√≥n/activaci√≥n
‡≤Ø7DJB‡≤Ø

5

56


4

‡≤Ø7DJB‡≤Ø

6

4

5

56


6

4
‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø
‡≤Ø7DJB‡≤Ø

Se implementa interconectando los co‚Äê
rrespondientes contactos NC o NA.

5



6

4
‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø
‡≤Ø7DJB‡≤Ø

O-EXCLUSIVA

5
‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø

Se implementa interconectando los co‚Äê
rrespondientes contactos NC o NA.

O

65


6

‡≤Ø7DJB‡≤Ø
‡≤Ø7DJB‡≤Ø

Y

65


Se implementa interconectando los co‚Äê
rrespondientes contactos NC o NA.

5

! 


6

4
‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø

5

‡≤Ø7DJB‡≤Ø

6

[
4

Encontrar√° m√°s informaci√≥n sobre instrucciones en el cap√≠tulo "Programaci√≥n del PLC >
Instrucciones".

Comparadores

Instrucci√≥n

KOP

CMP ==: Igual

FUP
‡≤Ø7DJB9DOXH‡≤Ø
,17
‡≤Ø7DJB9DOXH‡≤Ø

CMP <>: Diferente

‡≤Ø7DJB9DOXH‡≤Ø
!
,17
‡≤Ø7DJB9DOXH‡≤Ø

CMP >=: Mayor o igual

‡≤Ø7DJB9DOXH‡≤Ø
!
,17
‡≤Ø7DJB9DOXH‡≤Ø

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

,17
‡≤Ø7DJB9DOXH‡≤Ø
‡≤Ø7DJB9DOXH‡≤Ø

,1
,1
!
,17

‡≤Ø7DJB9DOXH‡≤Ø
‡≤Ø7DJB9DOXH‡≤Ø

,1
,1
!
,17

‡≤Ø7DJB9DOXH‡≤Ø
‡≤Ø7DJB9DOXH‡≤Ø

,1
,1

1921

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
Instrucci√≥n

KOP

FUP

CMP <=: Menor o igual

‡≤Ø7DJB9DOXH‡≤Ø

,17


,17
‡≤Ø7DJB9DOXH‡≤Ø
‡≤Ø7DJB9DOXH‡≤Ø

‡≤Ø7DJB9DOXH‡≤Ø

CMP >: Mayor

‡≤Ø7DJB9DOXH‡≤Ø
!
,17

!
,17
‡≤Ø7DJB9DOXH‡≤Ø
‡≤Ø7DJB9DOXH‡≤Ø

‡≤Ø7DJB9DOXH‡≤Ø

CMP <: Menor

,1
,1

‡≤Ø7DJB9DOXH‡≤Ø

,17

,1
,1

,17

‡≤Ø7DJB9DOXH‡≤Ø
‡≤Ø7DJB9DOXH‡≤Ø

‡≤Ø7DJB9DOXH‡≤Ø

,1
,1

Nota
El visor de c√≥digo PLC soporta los siguientes tipos de datos en la visualizaci√≥n del
comparador: N√∫meros binarios, n√∫meros enteros, n√∫meros en coma flotante y tiempos a
excepci√≥n de S5TIME.
Encontrar√° m√°s informaci√≥n sobre instrucciones en el cap√≠tulo "Programaci√≥n del PLC >
Instrucciones".

Temporizadores

Instrucci√≥n

KOP

FUP

TP: Generar impulso
‡≤Ø7DJB6WDUW‡≤Ø

‡≤Ø7DJB3UHVHW7LPH‡≤Ø

TON: Generar retardo al conectar
‡≤Ø7DJB6WDUW‡≤Ø

‡≤Ø7DJB3UHVHW7LPH‡≤Ø

1922

‡≤Ø73B'%‡≤Ø

‡≤Ø73B'%‡≤Ø

73
7,0(

73
7,0(

,1

4

‡≤Ø7DJB6WDWXV‡≤Ø
‡≤Ø7DJB6WDUW‡≤Ø

,1

4

37

(7

‡≤Ø7DJB(ODSVHG7LPH‡≤Ø
‡≤Ø7DJB3UHVHW7LPH‡≤Ø

37

(7

‡≤Ø721B'%‡≤Ø

‡≤Ø721B'%‡≤Ø

721
7,0(

721
7,0(

,1

4

‡≤Ø7DJB6WDWXV‡≤Ø
‡≤Ø7DJB6WDUW‡≤Ø

,1

4

37

(7

‡≤Ø7DJB(ODSVHG7LPH‡≤Ø
‡≤Ø7DJB3UHVHW7LPH‡≤Ø

37

(7

‡≤Ø7DJB6WDWXV‡≤Ø
‡≤Ø7DJB(ODSVHG7LPH‡≤Ø

‡≤Ø7DJB6WDWXV‡≤Ø
‡≤Ø7DJB(ODSVHG7LPH‡≤Ø

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
Instrucci√≥n

KOP

FUP

TOF: Generar retardo al desconectar
‡≤Ø7DJB6WDUW‡≤Ø

‡≤Ø7DJB3UHVHW7LPH‡≤Ø

TONR: Acumular tiempo
‡≤Ø7DJB6WDUW‡≤Ø
‡≤Ø7DJB5HVHW‡≤Ø
‡≤Ø7DJB3UHVHW7LPH‡≤Ø

‡≤Ø72)B'%‡≤Ø

‡≤Ø72)B'%‡≤Ø
72)
7,0(
,1

4

‡≤Ø7DJB6WDWXV‡≤Ø
‡≤Ø7DJB6WDUW‡≤Ø

37

(7

‡≤Ø7DJB(ODSVHG7LPH‡≤Ø
‡≤Ø7DJB3UHVHW7LPH‡≤Ø

72)
7,0(
,1

4

37

(7

‡≤Ø7215B'%‡≤Ø

‡≤Ø7215B'%‡≤Ø

7215
7,0(

7215
7,0(

,1

4

‡≤Ø7DJB6WDWXV‡≤Ø
‡≤Ø7DJB6WDUW‡≤Ø

,1

4

5

(7

‡≤Ø7DJB(ODSVHG7LPH‡≤Ø
‡≤Ø7DJB5HVHW‡≤Ø

5

(7

37

‡≤Ø7DJB3UHVHW7LPH‡≤Ø

‡≤Ø7DJB6WDWXV‡≤Ø
‡≤Ø7DJB(ODSVHG7LPH‡≤Ø

‡≤Ø7DJB6WDWXV‡≤Ø
‡≤Ø7DJB(ODSVHG7LPH‡≤Ø

37

Encontrar√° m√°s informaci√≥n sobre instrucciones en el cap√≠tulo "Programaci√≥n del PLC >
Instrucciones".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1923

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Contadores*
* Los contadores soportan los tipos de datos enteros
Instrucci√≥n

KOP

FUP

CTU: Contador ascendente
‡≤Ø7DJ,QB‡≤Ø
‡≤Ø7DJ,QB‡≤Ø
‡≤Ø7DJB39‡≤Ø

‡≤Ø7DJ,QB‡≤Ø
‡≤Ø7DJB39‡≤Ø

CTUD: Contador ascendente - des‚Äê
cendente

‡≤Ø&78B'%‡≤Ø

&78

&78
,17

,17
&8

4

5

&9

‡≤Ø7DJ2XW‡≤Ø
‡≤Ø7DJ,QB‡≤Ø

‡≤Ø7DJ,QB‡≤Ø
‡≤Ø7DJB&9‡≤Ø
‡≤Ø7DJB39‡≤Ø

39

CTD: Contador descendente
‡≤Ø7DJ,QB‡≤Ø

‡≤Ø&78B'%‡≤Ø

5

&9

‡≤Ø7DJB&9‡≤Ø

4

‡≤Ø7DJ2XW‡≤Ø

39

‡≤Ø&7'B'%‡≤Ø

‡≤Ø&7'B'%‡≤Ø

&7'

&7'

,17

,17

&'

4

‡≤Ø7DJ2XW‡≤Ø
‡≤Ø7DJ,QB‡≤Ø

/'

&9

‡≤Ø7DJ,QB‡≤Ø
‡≤Ø7DJB&9‡≤Ø

/'

&9

‡≤Ø7DJB&9‡≤Ø

‡≤Ø7DJB39‡≤Ø

39

4

‡≤Ø7DJ2XW‡≤Ø

39

&'

‡≤Ø&78'B'%‡≤Ø

‡≤Ø&78'B'%‡≤Ø

&78'

&78'

,17

‡≤Ø7DJ,QB‡≤Ø
&8

48

&'
5

‡≤Ø7DJ,QB&8‡≤Ø

&8

4'

‡≤Ø7DJ2XWB4'‡≤Ø
‡≤Ø7DJ,QB&'‡≤Ø

&'

&9

‡≤Ø7DJB&9‡≤Ø

‡≤Ø7DJ,QB‡≤Ø
‡≤Ø7DJ,QB‡≤Ø
/'
39

,17

‡≤Ø7DJ2XW‡≤Ø

‡≤Ø7DJ,QB‡≤Ø

‡≤Ø7DJB39‡≤Ø

&8

‡≤Ø7DJ,QB5‡≤Ø

5

4'

‡≤Ø7DJ2XWB4'‡≤Ø

‡≤Ø7DJ,QB/'‡≤Ø

/'

&9

‡≤Ø7DJB&9‡≤Ø

‡≤Ø7DJB39‡≤Ø

39

48

‡≤Ø7DJ2XWB48‡≤Ø

Encontrar√° m√°s informaci√≥n sobre instrucciones en el cap√≠tulo "Programaci√≥n del PLC >
Instrucciones".

Tipos de datos soportados
Tipos de datos soportados
La siguiente tabla muestra los tipos de datos soportados en el objeto "Visor de c√≥digo PLC" y
sus formatos de representaci√≥n:
Tipo de datos

Longitud

Formato

1 bit

Bool

N√∫meros binarios
BOOL

1924

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
Tipo de datos

Longitud

Formato

BYTE

8 bits

Hex

WORD

16 bits

Hex

DWORD

32 bits

Hex

LWORD

64 bits

Hex

SINT

8 bits

Dec

USINT

8 bits

Dec

Enteros

INT

16 bits

Dec

UINT

16 bits

Dec

DINT

32 bits

Dec

UDINT

32 bits

Dec

LINT

64 bits

Dec

ULINT

64 bits

Dec

N√∫meros en coma flotante
REAL

32 bits

Floating point number

LREAL

64 bits

Floating point number

TIME

32 bits

Time

LTIME

64 bits

LTime

12 bytes

Date and Time

Tiempos

Fecha y hora
DTL**

* Solo con operandos booleanos
** No se soportan estructuras DTL completas. Solo se soportan elementos individuales de estructuras
DTL.

Nota
Encontrar√° m√°s informaci√≥n sobre los tipos de datos en "Programaci√≥n del PLC > Tipos de
datos".

Nota
Los tipos de datos de PLC de 64 bits LINT, ULINT y LWORD en el canal HMI se corresponden
con el tipo de datos de HMI LREAL. Esto implica una p√©rdida de exactitud si el valor supera el
tama√±o de 2^50.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1925

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Limitaciones del visor de c√≥digo PLC
Operandos y UDT
Los operandos declarados en la secci√≥n "#Temp" o "#InOut" no son soportados por el visor de
c√≥digo PLC. Esto vale tanto para los tipos de datos simples como para los tipos de datos
contenidos en UDT. Los tipos de datos de un UDT se pueden declarar en las secciones "#In"
y "#Out" y representar en el visor de c√≥digo PLC. Para los tipos de datos del UDT valen las
mismas limitaciones que para los tipos de datos simples.

Limitaci√≥n de los tipos de datos
El uso de los tipos de datos STRING, WSTRING, CHAR, WCHAR, S5TIME provoca que el
segmento no se pueda mostrar en el visor de c√≥digo PLC.

Uso de tipos de datos de 64 bits
Si se usan tipos de datos de 64 bits, puede producirse una peque√±a p√©rdida de exactitud, ya
que estos tipos de datos se mapean como tipo de datos Double en el canal HMI. Esto puede
ocasionar que tipos de datos enteros se muestren con decimales.

Direccionamiento de variables
Tenga en cuenta las siguientes limitaciones para el direccionamiento de variables:
‚óè El objeto "Visor de c√≥digo PLC" solo soporta el direccionamiento simb√≥lico de variables. Si
el operando no se direcciona de forma simb√≥lica, no puede mostrarse el segmento con el
operando y se emite un mensaje de error.
‚óè No se admite el uso de elementos de matriz con una variable como √≠ndice, p. ej.,
#myArray[MyTag]. Utilice valores num√©ricos para direccionar los elementos de matriz,
p. ej., #myArray[6].
‚óè Los accesos Slice permiten direccionar de forma selectiva secciones de variables
declaradas. En los accesos Slice, el visor de c√≥digo PLC solo soporta el ancho de acceso
"Bit" en las variables booleanas.

Salto al visor de c√≥digo PLC
Para saltar de un aviso de supervisi√≥n al visor de c√≥digo PLC cuando se usan operandos
locales soportados en un bloque de funci√≥n, el nombre de la instancia debe cumplir la siguiente
convenci√≥n: <FB-Name>_DB.
Solo es posible saltar a una funci√≥n o a un bloque de organizaci√≥n si se usan exclusivamente
operandos globales.

1926

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

12.3.4.7

Configurar el visor de c√≥digo PLC

Configurar el visor de c√≥digo PLC
Introducci√≥n
En el proyecto se inserta un visor de c√≥digo PLC para mostrar en runtime los segmentos del
programa PLC en los lenguajes de programaci√≥n KOP, FUP y GRAPH.

Requisitos
‚óè Se ha creado un controlador como m√≠nimo.
‚óè Se ha creado una estaci√≥n PC.
‚óè Se ha creado una conexi√≥n HMI entre el controlador y el panel de operador.
‚óè Se ha creado una imagen.
‚óè La ventana de inspecci√≥n est√° abierta.

Procedimiento
1. Arrastre el visor de c√≥digo PLC de la ventana de herramientas utilizando la funci√≥n de
arrastrar y soltar.
2. Haga clic en la ventana de inspecci√≥n "Propiedades > Propiedades > Representaci√≥n".
3. En "Representaci√≥n > Tabla de s√≠mbolos L√≠neas", indique el n√∫mero de l√≠neas que
aparecer√°n en la tabla de s√≠mbolos.
4. En la ventana de inspecci√≥n, haga clic en "Propiedades > Propiedades > Barra de
herramientas".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1927

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
5. Asigne una tecla de acceso directo a los botones que requiera en runtime, p. ej., Modo paso
a paso.

6. Para poder ver o solucionar los errores producidos al crear la visualizaci√≥n de un segmento
en runtime, configure un script adecuado en "Propiedades > Eventos > Error".

Resultado
El visor de c√≥digo PLC se ha insertado en la imagen. En runtime pueden verse programas de
usuario de PLC escritos en los lenguajes de programaci√≥n KOP, FUP o GRAPH.

Vistas en el visor de c√≥digo PLC
Introducci√≥n
En el visor de c√≥digo PLC puede mostrarse informaci√≥n diversa acerca del programa del
usuario:
‚óè √Årea de informaci√≥n
‚óè Tabla de s√≠mbolos
‚óè Vista detallada
‚óè Vista Transition/Interlock
‚óè Vista de primeros valores/valores actuales

1928

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

√Årea de informaci√≥n
El √°rea de informaci√≥n muestra el c√≥digo de programa KOP/FUP del programa de usuario o la
secuencia de ejecuci√≥n GRAPH de un bloque de datos GRAPH. Una vez que se ha
establecido la conexi√≥n con el controlador, en el √°rea de informaci√≥n aparece resaltado el
estado del segmento encima del c√≥digo del programa.

Tabla de s√≠mbolos
La tabla de s√≠mbolos muestra los s√≠mbolos que se utilizan en el segmento indicado. Las tres
columnas de la tabla de s√≠mbolos muestran el nombre de s√≠mbolo de las variables, la direcci√≥n
absoluta y los comentarios. Dado que los comentarios se cargan desde el programa de usuario
del controlador, aparecer√°n en el idioma que est√© cargado en el controlador.
La altura y anchura de la tabla de s√≠mbolos se pueden modificar din√°micamente en runtime.

Vista detallada
La vista detallada muestra informaci√≥n concreta acerca del segmento seleccionado y de los
errores existentes. En la vista detallada puede verse, p. ej., la transici√≥n de la primera etapa
activa de la cadena secuencial GRAPH. La vista detallada se abre en runtime con el bot√≥n
"Vista detallada".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1929

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Vista Transition/Interlock
Existe la posibilidad de cambiar entre las vistas Transici√≥n e Interlock al visualizar el programa
de usuario en KOP/FUP. La vista Transition/Interlock est√° disponible cuando se muestra la
vista detallada.
Puede cambiar entre las vistas Transition/Interlock en runtime con ayuda del bot√≥n "Transition/
Interlock". Al activar el bot√≥n se muestra el segmento Interlock, y al desactivarlo, el segmento
Transition.

1930

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Vista de primeros valores/valores actuales
Si ha activado la adquisici√≥n de primeros valores en el programa de usuario para el
correspondiente bloque de funci√≥n, en el visor de c√≥digo PLC podr√° alternar la vista de
primeros valores y la de valores actuales. La vista de valores actuales utiliza los valores
actuales del controlador y muestra el estado actual del programa. La vista de primeros valores
utiliza los valores registrados en el momento del error y muestra los criterios y los operandos
err√≥neos. En la vista de primeros valores se resaltan visualmente los operandos err√≥neos.
Se cambia entre los valores actuales y los primeros valores con el bot√≥n "Valores actuales o
primeros valores". Si la adquisici√≥n de primeros valores est√° activada, en el visor de c√≥digo
PLC se muestra por defecto la vista de primeros valores tras el salto.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1931

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Botones de la barra de herramientas
La tabla siguiente muestra los botones de la barra de herramientas y su significado.
Elemento de ma‚Äê
nejo

1932

Nombre

Funci√≥n

"√Årea del s√≠mbolo"

Muestra el √°rea del s√≠mbolo.

"Segmento anterior"

Se desplaza al segmento anterior.

"Segmento siguiente"

Se desplaza al segmento siguiente.

"Ampliar"

Ampl√≠a el √°rea de informaci√≥n.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
Elemento de ma‚Äê
nejo

Nombre

Funci√≥n

"Reducir"

Reduce el √°rea de informaci√≥n.

"Detalle"

Muestra la vista detallada.

"Modo paso a paso"

Alterna la selecci√≥n de etapas manual y la selec‚Äê
ci√≥n autom√°tica de la etapa activa.

"Transition o Interlock"

Alterna la vista Transici√≥n y la vista Interlock.

"Valores actuales o primeros
valores"

Alterna entre la vista de valores actuales y la de
primeros valores.

Instrucciones soportadas
Introducci√≥n
El objeto "Visor de c√≥digo PLC" soporta instrucciones en los lenguajes de programaci√≥n FUP
y KOP.

Instrucciones
El visor de c√≥digo PLC soporta las siguientes instrucciones:
‚óè Operaciones l√≥gicas con bits
‚óè Comparadores
‚óè Temporizadores
‚óè Contadores

Operaciones l√≥gicas con bits

Instrucci√≥n

KOP

FUP

Contacto normalmente cerrado

‡≤Ø7DJB‡≤Ø

Contacto normalmente abierto

‡≤Ø7DJB‡≤Ø

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1933

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
Instrucci√≥n

KOP

FUP

Activar salida

‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø

6

Desactivar salida

 6

‡≤Ø7DJB‡≤Ø
‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø

5

Asignaci√≥n

 5

‡≤Ø7DJB‡≤Ø
‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø
‡≤Ø7DJB‡≤Ø



‡≤Ø7DJB‡≤Ø

NOT: Invertir RLO

‡≤Ø7DJB‡≤Ø

Contacto invertido

 

‡≤Ø7DJB‡≤Ø

127

‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø


‡≤Ø7DJB‡≤Ø
‡≤Ø7DJB‡≤Ø

SR: Flipflop de activaci√≥n/desactivaci√≥n

‡≤Ø7DJB‡≤Ø
‡≤Ø7DJB‡≤Ø
‡≤Ø7DJB‡≤Ø

6

‡≤Ø7DJB‡≤Ø
4

‡≤Ø7DJB‡≤Ø
‡≤Ø7DJB‡≤Ø

5

RS: Flipflop de desactivaci√≥n/activaci√≥n
‡≤Ø7DJB‡≤Ø

5

56


4

‡≤Ø7DJB‡≤Ø

6

Se implementa interconectando los co‚Äê
rrespondientes contactos NC o NA.

4

Se implementa interconectando los co‚Äê
rrespondientes contactos NC o NA.

Se implementa interconectando los co‚Äê
rrespondientes contactos NC o NA.

5

56


6

4
‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø

5



6

4
‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø
‡≤Ø7DJB‡≤Ø

O-EXCLUSIVA

5
‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø

O

65


6

‡≤Ø7DJB‡≤Ø
‡≤Ø7DJB‡≤Ø

Y

65


5

! 


6

4
‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø

5

‡≤Ø7DJB‡≤Ø

6

[
4

Encontrar√° m√°s informaci√≥n sobre instrucciones en el cap√≠tulo "Programaci√≥n del PLC >
Instrucciones".

1934

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Comparadores

Instrucci√≥n

KOP

CMP ==: Igual

FUP
‡≤Ø7DJB9DOXH‡≤Ø
,17
‡≤Ø7DJB9DOXH‡≤Ø

CMP <>: Diferente

‡≤Ø7DJB9DOXH‡≤Ø
!
,17
‡≤Ø7DJB9DOXH‡≤Ø

CMP >=: Mayor o igual

‡≤Ø7DJB9DOXH‡≤Ø
!
,17
‡≤Ø7DJB9DOXH‡≤Ø

CMP <=: Menor o igual

‡≤Ø7DJB9DOXH‡≤Ø

,17
‡≤Ø7DJB9DOXH‡≤Ø

CMP >: Mayor

‡≤Ø7DJB9DOXH‡≤Ø
!
,17
‡≤Ø7DJB9DOXH‡≤Ø

CMP <: Menor

‡≤Ø7DJB9DOXH‡≤Ø

,17
‡≤Ø7DJB9DOXH‡≤Ø

,17
‡≤Ø7DJB9DOXH‡≤Ø
‡≤Ø7DJB9DOXH‡≤Ø

,1
,1
!
,17

‡≤Ø7DJB9DOXH‡≤Ø
‡≤Ø7DJB9DOXH‡≤Ø

,1
,1
!
,17

‡≤Ø7DJB9DOXH‡≤Ø
‡≤Ø7DJB9DOXH‡≤Ø

,1
,1

,17

‡≤Ø7DJB9DOXH‡≤Ø
‡≤Ø7DJB9DOXH‡≤Ø

,1
,1
!
,17

‡≤Ø7DJB9DOXH‡≤Ø
‡≤Ø7DJB9DOXH‡≤Ø

,1
,1

,17

‡≤Ø7DJB9DOXH‡≤Ø
‡≤Ø7DJB9DOXH‡≤Ø

,1
,1

Nota
El visor de c√≥digo PLC soporta los siguientes tipos de datos en la visualizaci√≥n del
comparador: N√∫meros binarios, n√∫meros enteros, n√∫meros en coma flotante y tiempos a
excepci√≥n de S5TIME.
Encontrar√° m√°s informaci√≥n sobre instrucciones en el cap√≠tulo "Programaci√≥n del PLC >
Instrucciones".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1935

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Temporizadores

Instrucci√≥n

KOP

FUP

TP: Generar impulso
‡≤Ø7DJB6WDUW‡≤Ø

‡≤Ø7DJB3UHVHW7LPH‡≤Ø

TON: Generar retardo al conectar
‡≤Ø7DJB6WDUW‡≤Ø

‡≤Ø7DJB3UHVHW7LPH‡≤Ø

‡≤Ø7DJB3UHVHW7LPH‡≤Ø

TONR: Acumular tiempo
‡≤Ø7DJB6WDUW‡≤Ø
‡≤Ø7DJB5HVHW‡≤Ø
‡≤Ø7DJB3UHVHW7LPH‡≤Ø

‡≤Ø73B'%‡≤Ø

73
7,0(

73
7,0(

,1

4

‡≤Ø7DJB6WDWXV‡≤Ø
‡≤Ø7DJB6WDUW‡≤Ø

,1

4

37

(7

‡≤Ø7DJB(ODSVHG7LPH‡≤Ø
‡≤Ø7DJB3UHVHW7LPH‡≤Ø

37

(7

‡≤Ø721B'%‡≤Ø

‡≤Ø721B'%‡≤Ø

721
7,0(

721
7,0(

,1

4

‡≤Ø7DJB6WDWXV‡≤Ø
‡≤Ø7DJB6WDUW‡≤Ø

,1

4

37

(7

‡≤Ø7DJB(ODSVHG7LPH‡≤Ø
‡≤Ø7DJB3UHVHW7LPH‡≤Ø

37

(7

TOF: Generar retardo al desconectar
‡≤Ø7DJB6WDUW‡≤Ø

‡≤Ø73B'%‡≤Ø

‡≤Ø72)B'%‡≤Ø

‡≤Ø72)B'%‡≤Ø

72)
7,0(

72)
7,0(

,1

4

‡≤Ø7DJB6WDWXV‡≤Ø
‡≤Ø7DJB6WDUW‡≤Ø

,1

4

37

(7

‡≤Ø7DJB(ODSVHG7LPH‡≤Ø
‡≤Ø7DJB3UHVHW7LPH‡≤Ø

37

(7

‡≤Ø7215B'%‡≤Ø

‡≤Ø7215B'%‡≤Ø

7215
7,0(

7215
7,0(

,1

4

‡≤Ø7DJB6WDWXV‡≤Ø
‡≤Ø7DJB6WDUW‡≤Ø

,1

4

5

(7

‡≤Ø7DJB(ODSVHG7LPH‡≤Ø
‡≤Ø7DJB5HVHW‡≤Ø

5

(7

37

‡≤Ø7DJB3UHVHW7LPH‡≤Ø

‡≤Ø7DJB6WDWXV‡≤Ø
‡≤Ø7DJB(ODSVHG7LPH‡≤Ø

‡≤Ø7DJB6WDWXV‡≤Ø
‡≤Ø7DJB(ODSVHG7LPH‡≤Ø

‡≤Ø7DJB6WDWXV‡≤Ø
‡≤Ø7DJB(ODSVHG7LPH‡≤Ø

‡≤Ø7DJB6WDWXV‡≤Ø
‡≤Ø7DJB(ODSVHG7LPH‡≤Ø

37

Encontrar√° m√°s informaci√≥n sobre instrucciones en el cap√≠tulo "Programaci√≥n del PLC >
Instrucciones".

1936

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Contadores*
* Los contadores soportan los tipos de datos enteros
Instrucci√≥n

KOP

FUP

CTU: Contador ascendente
‡≤Ø7DJ,QB‡≤Ø
‡≤Ø7DJ,QB‡≤Ø
‡≤Ø7DJB39‡≤Ø

‡≤Ø7DJ,QB‡≤Ø
‡≤Ø7DJB39‡≤Ø

CTUD: Contador ascendente - des‚Äê
cendente

‡≤Ø&78B'%‡≤Ø

&78

&78
,17

,17
&8

4

5

&9

‡≤Ø7DJ2XW‡≤Ø
‡≤Ø7DJ,QB‡≤Ø

‡≤Ø7DJ,QB‡≤Ø
‡≤Ø7DJB&9‡≤Ø
‡≤Ø7DJB39‡≤Ø

39

CTD: Contador descendente
‡≤Ø7DJ,QB‡≤Ø

‡≤Ø&78B'%‡≤Ø

5

&9

‡≤Ø7DJB&9‡≤Ø

4

‡≤Ø7DJ2XW‡≤Ø

39

‡≤Ø&7'B'%‡≤Ø

‡≤Ø&7'B'%‡≤Ø

&7'

&7'

,17

,17

&'

4

‡≤Ø7DJ2XW‡≤Ø
‡≤Ø7DJ,QB‡≤Ø

/'

&9

‡≤Ø7DJ,QB‡≤Ø
‡≤Ø7DJB&9‡≤Ø

/'

&9

‡≤Ø7DJB&9‡≤Ø

‡≤Ø7DJB39‡≤Ø

39

4

‡≤Ø7DJ2XW‡≤Ø

39

&'

‡≤Ø&78'B'%‡≤Ø

‡≤Ø&78'B'%‡≤Ø

&78'

&78'

,17

‡≤Ø7DJ,QB‡≤Ø
&8

48

&'
5

‡≤Ø7DJ,QB&8‡≤Ø

&8

4'

‡≤Ø7DJ2XWB4'‡≤Ø
‡≤Ø7DJ,QB&'‡≤Ø

&'

&9

‡≤Ø7DJB&9‡≤Ø

‡≤Ø7DJ,QB‡≤Ø
‡≤Ø7DJ,QB‡≤Ø
/'
39

,17

‡≤Ø7DJ2XW‡≤Ø

‡≤Ø7DJ,QB‡≤Ø

‡≤Ø7DJB39‡≤Ø

&8

‡≤Ø7DJ,QB5‡≤Ø

5

4'

‡≤Ø7DJ2XWB4'‡≤Ø

‡≤Ø7DJ,QB/'‡≤Ø

/'

&9

‡≤Ø7DJB&9‡≤Ø

‡≤Ø7DJB39‡≤Ø

39

48

‡≤Ø7DJ2XWB48‡≤Ø

Encontrar√° m√°s informaci√≥n sobre instrucciones en el cap√≠tulo "Programaci√≥n del PLC >
Instrucciones".

Tipos de datos soportados
Tipos de datos soportados
La siguiente tabla muestra los tipos de datos soportados en el objeto "Visor de c√≥digo PLC" y
sus formatos de representaci√≥n:
Tipo de datos

Longitud

Formato

1 bit

Bool

N√∫meros binarios
BOOL*

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1937

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
Tipo de datos

Longitud

Formato

BYTE

8 bits

Hex

WORD

16 bits

Hex

DWORD

32 bits

Hex

LWORD

64 bits

Hex

SINT

8 bits

Dec

USINT

8 bits

Dec

Enteros

INT

16 bits

Dec

UINT

16 bits

Dec

DINT

32 bits

Dec

UDINT

32 bits

Dec

LINT

64 bits

Dec

ULINT

64 bits

Dec

N√∫meros en coma flotante
REAL

32 bits

Floating point number

LREAL

64 bits

Floating point number

S5TIME

16 bits

SIMATIC_Timer

TIME

32 bits

Time

LTIME

64 bits

LTime

12 bytes

Date and Time

Temporizadores

Fecha y hora
DTL**

* Solo con operandos booleanos.
** No se soportan estructuras DTL completas. Solo se soportan elementos individuales de estructuras
DTL.

Nota
Encontrar√° m√°s informaci√≥n sobre los tipos de datos en "Programaci√≥n del PLC > Tipos de
datos".

Nota
Operandos y UDT
Los operandos declarados en la secci√≥n "#Temp" o "#InOut" no son soportados por el visor de
c√≥digo PLC. Esto vale tanto para los tipos de datos simples como para los tipos de datos
contenidos en UDT. Los tipos de datos de un UDT se pueden declarar en las secciones "#In"
y "#Out" y representar en el visor de c√≥digo PLC. Para los tipos de datos del UDT valen las
mismas limitaciones que para los tipos de datos simples.

1938

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Nota
El segmento l√≥gico previo no debe incluir ninguna variable de la secci√≥n Temp o InOut de un
FB.
Los siguientes tipos de datos no se deben utilizar para las variables: STRING, WSTRING,
CHAR, WCHAR, S5TIME

Nota
Los tipos de datos de PLC de 64 bits LINT, ULINT y LWORD se representan como tipo de datos
de HMI LREAL en el canal HMI. Esto implica una p√©rdida de exactitud si el valor supera el
tama√±o de 2^50.

Consulte tambi√©n
Tipos de datos para SIMATIC S7-1500 (P√°gina 628)

Limitaciones del visor de c√≥digo PLC
Operandos y UDT
Los operandos declarados en la secci√≥n "#Temp" o "#InOut" no son soportados por el visor de
c√≥digo PLC. Esto vale tanto para los tipos de datos simples como para los tipos de datos
contenidos en UDT. Los tipos de datos de un UDT se pueden declarar en las secciones "#In"
y "#Out" y representar en el visor de c√≥digo PLC. Para los tipos de datos del UDT valen las
mismas limitaciones que para los tipos de datos simples.

Limitaci√≥n de los tipos de datos
El uso de los tipos de datos STRING, WSTRING, CHAR, WCHAR, S5TIME provoca que el
segmento no se pueda mostrar en el visor de c√≥digo PLC.

Uso de tipos de datos de 64 bits
Si se usan tipos de datos de 64 bits, puede producirse una peque√±a p√©rdida de exactitud, ya
que estos tipos de datos se mapean como tipo de datos Double en el canal HMI. Esto puede
ocasionar que tipos de datos enteros se muestren con decimales.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1939

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Direccionamiento de variables
Tenga en cuenta las siguientes limitaciones para el direccionamiento de variables:
‚óè El objeto "Visor de c√≥digo PLC" solo soporta el direccionamiento simb√≥lico de variables. Si
el operando no se direcciona de forma simb√≥lica, no puede mostrarse el segmento con el
operando y se emite un mensaje de error.
‚óè No se admite el uso de elementos de matriz con una variable como √≠ndice, p. ej.,
#myArray[MyTag]. Utilice valores num√©ricos para direccionar los elementos de matriz,
p. ej., #myArray[6].
‚óè Los accesos Slice permiten direccionar de forma selectiva secciones de variables
declaradas. En los accesos Slice, el visor de c√≥digo PLC solo soporta el ancho de acceso
"Bit" en las variables booleanas.

Salto al visor de c√≥digo PLC
Para saltar de un aviso de supervisi√≥n al visor de c√≥digo PLC cuando se usan operandos
locales soportados en un bloque de funci√≥n, el nombre de la instancia debe cumplir la siguiente
convenci√≥n: <FB-Name>_DB.
Solo es posible saltar a una funci√≥n o a un bloque de organizaci√≥n si se usan exclusivamente
operandos globales.

Configuraci√≥n de salto desde el aviso
Introducci√≥n
Existe la posibilidad de configurar un salto desde el visor de avisos al visor de c√≥digo PLC o
desde runtime al proyecto en el TIA Portal. Para ello se dispone de dos funciones:
‚óè La funci√≥n de sistema "MostrarVisorAvisosC√≥digoPLC (P√°gina 1762)" permite saltar al
visor de c√≥digo PLC.
‚óè La funci√≥n de sistema "MostrarBloqueEnTiaPortalDelAviso (P√°gina 1760)" permite saltar
de runtime a la configuraci√≥n en el TIA Portal.
En este ejemplo se configura el salto al visor de c√≥digo PLC desde el aviso correspondiente en
el visor de avisos.

Requisitos
‚óè La imagen "Alarm" est√° abierta.
‚óè Se ha creado el visor de avisos "ProDiag_Alarm".
‚óè Se ha creado el visor de c√≥digo PLC "PLC code view" en la imagen "Program code".

Configuraci√≥n del bot√≥n de salto
1. Arrastre un bot√≥n desde la Task Card "Herramientas" hasta la imagen abierta "Alarm".
2. En "Miscel√°neo > Objeto > Nombre", asigne un nombre (p. ej., "Jump to PLC Code").

1940

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
3. Cambie a "Eventos > Hacer clic".
4. Haga clic en "Agregar funci√≥n".
5. Seleccione la funci√≥n "MostrarVisorAvisosC√≥digoPLC" en la lista de selecci√≥n.
6. En "Nombre de la imagen de aviso", introduzca el nombre de la imagen en la que se ha
configurado el visor de avisos: "Alarm".
7. En "Nombre del visor de avisos", introduzca el nombre del visor de avisos: "ProDiag_Alarm".
8. En "Nombre imagen del visor de c√≥digo PLC", introduzca "Program code".
9. En "Nombre del visor de c√≥digo PLC", introduzca "PLC code view".

Comprobaci√≥n de la posibilidad de salto
1. Seleccione el visor de avisos "ProDiag-Alarm".
2. Vaya a la ficha "Eventos".
3. Haga clic en el evento "Selecci√≥n modificada".
4. Cree un script C personalizado en este evento:
#include "GlobalDefinitions.h"
void OnSelectedIdChanged(char* screenName, char* objectName, long
id) {
#pragma code("KOPAPI.dll")
#include "kopapi.h"
#pragma code()
CMN_ERROR errorStruct;
BOOL bResult;
bResult = IsJumpableProDiagAlarm (screenName, objectName, id, &err
orStruct);
SetPropBOOL (screenName, "Jump to PLC Code", "Enabled", bResult);

Resultado
Se ha configurado un bot√≥n para saltar al visor de c√≥digo PLC. El bot√≥n para efectuar dicho
salto solo se mostrar√° si aparece un aviso relevante para ProDiag en el visor de avisos.

Consulte tambi√©n
Pasar a la configuraci√≥n (P√°gina 2388)

12.3.4.8

Soluci√≥n de problemas de visualizaci√≥n en el visor de c√≥digo PLC

Introducci√≥n
Si durante la visualizaci√≥n del c√≥digo del programa surge un fallo, en el visor de c√≥digo PLC se
emitir√° un mensaje de error con el n√∫mero de error correspondiente. Para solucionar el error
de visualizaci√≥n, empiece por aplicar las primeras medidas propuestas.
Si el error persiste, p√≥ngase en contacto con el Customer Support.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1941

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Primeras medidas para la soluci√≥n de fallos
Tenga en cuenta las indicaciones generales siguientes para la soluci√≥n de fallos:
1. Aseg√∫rese de que se ha cargado la configuraci√≥n actual en el panel de operador.
2. Si visualiza el c√≥digo de programa en el visor de c√≥digo PLC con ayuda de una funci√≥n API
runtime, compruebe la notaci√≥n y la secuencia de los par√°metros de la llamada.
3. Reinicie runtime en su panel de operador.

Indicaciones para los mensajes de error
La siguiente tabla contiene los mensajes de error e indicaciones para la soluci√≥n de varios
errores espec√≠ficos en la visualizaci√≥n del c√≥digo de programa (si los hay):
N√∫mero de error

Mensaje de error

3101, 3107, 3109,
3113, 3402, 3501,
3502, 3601, 3602,

Al determinar los datos a visualizar se ha
producido un error general.

Indicaciones

4000 - 4107,
4110 - 4113, 4115 4121
4200 - 4203, 4300 4604
3102
4114, 4122, 4123

Los par√°metros de la llamada no son correc‚Äê Compruebe si todos los par√°metros de la llamada
tos.
se han indicado en la secuencia especificada. Ase‚Äê
g√∫rese de que las indicaciones est√©n completas y
sean correctas.

3103

No se ha encontrado el PLC o el nombre del
PLC no es correcto.

3104

No se ha podido determinar la direcci√≥n del
bloque l√≥gico.

3105

No se ha podido determinar la direcci√≥n del
bloque de datos de instancia.

3106

El bloque tiene protecci√≥n de know-how.

3108

No es compatible la versi√≥n del sistema de
ingenier√≠a.

3112

El segmento contiene un operando no so‚Äê
portado.

3117

No se soporta el lenguaje del segmento.

3201

No se ha encontrado el operando.

3301

No se ha encontrado el bloque llamado.

3302

No se ha encontrado ning√∫n bloque en el
que se emplee este UDT.

3303

No se han encontrado entradas adecuadas
o las entradas no contienen tipos de datos
soportados.

1942

Compruebe el nombre de PLC indicado.

Aseg√∫rese de que en el par√°metro se haya indicado
el nombre del bloque de datos de instancia y no el
nombre del bloque de funci√≥n.
Aseg√∫rese de que el programa de usuario y la vi‚Äê
sualizaci√≥n se hayan configurado con la versi√≥n co‚Äê
rrespondiente del TIA Portal. El visor de c√≥digo PLC
con WinCC V14 soporta solo la configuraci√≥n con el
sistema de ingenier√≠a del TIA Portal V14.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
N√∫mero de error

Mensaje de error

Indicaciones

3401

Al determinar los datos de un bloque
GRAPH se ha producido un error.

Aseg√∫rese de que el bloque indicado sea un bloque
GRAPH.

3114, 3110, 3111

El segmento contiene un elemento no sopor‚Äê
tado.

4103
4106

Al calcular el estado online se ha producido
un error.

4108

No se ha definido el nombre de PLC.

4109

No se ha definido el nombre de DB.

4202

No se ha definido el UDT de ProDiag.

Desconecte el panel de operador de la red desen‚Äê
chufando el cable de red. Espere un momento y
enchufe de nuevo el cable de red.

12.3.5

Ejemplo: Visualizaci√≥n de la funcionalidad ProDiag

12.3.5.1

Resumen de operaciones

Introducci√≥n
ProDiag permite supervisar fallos de la instalaci√≥n y mostrar informaci√≥n sobre las
supervisiones en su panel de operador.
El siguiente ejemplo muestra c√≥mo utilizar con WinCC objetos para la supervisi√≥n y el
diagn√≥stico de instalaciones.

Ejemplo
En este ejemplo se configura la visualizaci√≥n para la supervisi√≥n del funcionamiento de una
cinta transportadora.
Con una supervisi√≥n ProDiag previamente creada, se sigue el desplazamiento de las piezas
de producci√≥n en la cinta transportadora.
En STEP 7 se crean el programa de usuario y supervisiones ProDiag para operandos. En
WinCC se configuran a continuaci√≥n las im√°genes y los objetos para la visualizaci√≥n del
programa y del estado actual del programa, as√≠ como la salida de avisos de error.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1943

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Pasos de configuraci√≥n
El ejemplo se divide en varios pasos:
‚óè Crear im√°genes
‚Äì Imagen general con los objetos de imagen ProDiag
‚Äì Imagen para el visor de avisos
‚Äì Imagen para el visor de c√≥digo PLC
‚óè Insertar objetos en im√°genes
‚Äì Vista general de ProDiag para la visualizaci√≥n de las supervisiones ProDiag
‚Äì Vista general de GRAPH para la visualizaci√≥n de la cadena secuencial GRAPH
‚Äì Visor de avisos para la visualizaci√≥n de los avisos ProDiag
‚Äì Visor de c√≥digo PLC para la visualizaci√≥n del c√≥digo de programa en los lenguajes KOP,
FUP y GRAPH
‚óè Configurar objetos
Interconectar los objetos para permitir una navegaci√≥n directa hasta la causa del error en
runtime.

1944

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

12.3.5.2

Requisitos

Requisitos
‚óè Se ha creado un controlador S7-1500 con firmware a partir de la versi√≥n 2.0.
‚óè Se ha creado un programa de usuario para controlar la cinta transportadora.
‚óè El programa de usuario contiene un bloque de funci√≥n GRAPH con la secuencia de
movimiento de la cinta transportadora.
‚óè El programa de usuario contiene un bloque de funci√≥n ProDiag con las supervisiones de
operandos configuradas.
Para m√°s informaci√≥n sobre la creaci√≥n de supervisiones ProDiag, consulte el cap√≠tulo
"Programaci√≥n del PLC > Supervisi√≥n de m√°quinas e instalaciones con ProDiag".
‚óè Se ha creado el panel de operador TP1200 Comfort.
‚óè Se ha creado una conexi√≥n entre el controlador y el panel de operador.

Programa de control
En STEP 7 se ha creado anteriormente un programa para la secuencia de la cinta
transportadora y un bloque de funci√≥n ProDiag con supervisiones de operandos. La siguiente
tabla muestra los bloques y las variables que se utilizan en este ejemplo de visualizaci√≥n con
WinCC:
Nombre

Designaci√≥n/tipo

Explicaci√≥n

Conv_Seq [FB]

Bloque de funci√≥n GRAPH

Contiene la secuencia de programa de movimiento de la
cinta transportadora.

Conv_Seq_DB

Bloque de datos GRAPH

Bloque de datos de instancia GRAPH correspondiente

OFF_SQ

Variable de tipo Bool del bloque de
datos GRAPH

Variable PLC utilizada como variable de proceso para la
visualizaci√≥n de estado de la cadena secuencial GRAPH.

Conveyor [FB]

Bloque de funci√≥n ProDiag

El bloque de funci√≥n ProDiag contiene las supervisiones
ProDiag configuradas para los operandos que controlan
el funcionamiento de la cinta transportadora.

Conveyor_DB

Bloque de datos ProDiag

Bloque de datos de instancia GRAPH correspondiente.

State

Variable de tipo SV_FB_State del
bloque de datos ProDiag

La variable de estado del tipo de datos PLC "SV_FB_Sta‚Äê
te" contiene los bits de error agrupado de todas las su‚Äê
pervisiones asignadas al bloque de funci√≥n ProDiag.

12.3.5.3

Crear im√°genes

Introducci√≥n
Se crean tres im√°genes para mostrar distintos objetos para la visualizaci√≥n de las
supervisiones ProDiag en la instalaci√≥n.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1945

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Procedimiento
1. Abra el √°rbol del proyecto.
2. En la carpeta Im√°genes, haga clic en "Agregar imagen".
3. Abra el men√∫ contextual de la imagen y as√≠gnele el nombre "Overview".
4. Cree dos im√°genes m√°s con los nombres "Alarm" y "Program code".

Resultado
Ha creado una imagen general y dos im√°genes m√°s para visualizar las supervisiones en
runtime.

12.3.5.4

Inserci√≥n de objetos de diagn√≥stico

Introducci√≥n
Para visualizar el c√≥digo de programa y el estado actual del programa en runtime en el panel
de operador, inserte los objetos para el diagn√≥stico en las im√°genes creadas.
La vista general de GRAPH muestra en runtime las etapas ejecutadas actualmente de la
cadena secuencial GRAPH que se ha configurado.
La vista general de ProDiag muestra si se ha producido un fallo y se ha disparado una
supervisi√≥n ProDiag.

Requisitos
‚óè Se han creado las im√°genes "Program code", "Overview" y "Alarm".
‚óè La Task Card "Herramientas" est√° abierta.

Procedimiento
1. Abra la imagen "Program code".
2. Mediante la funci√≥n de arrastrar y soltar, mueva un "Visor de c√≥digo PLC" de la Task Card
"Herramientas" a la imagen.
3. En la ventana de inspecci√≥n, vaya a "Propiedades > Propiedades > Miscel√°neo > Nombre"
y asigne el nombre de objeto "PLC code view".
4. Abra la imagen "Overview".
5. Mediante la funci√≥n de arrastrar y soltar, mueva el objeto "Vista general de ProDiag" de la
Task Card "Herramientas" a la imagen.
Si desea supervisar varios bloques ProDiag del programa, cree una vista general de
ProDiag para cada bloque.
6. En la ventana de inspecci√≥n, vaya a "Propiedades > Propiedades > Miscel√°neo > Nombre"
y asigne un nombre de objeto apropiado, p. ej., "Overview_Conveyor".
7. Mediante la funci√≥n de arrastrar y soltar, mueva una "Vista general de GRAPH" de la Task
Card "Herramientas" a la imagen.

1946

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
8. En la ventana de inspecci√≥n, vaya a "Propiedades > Propiedades > Miscel√°neo > Nombre"
y asigne el nombre "GRAPH_Sequence".
9. Abra la imagen "Alarm".
10.Mediante la funci√≥n de arrastrar y soltar, mueva un visor de avisos de la Task Card
"Herramientas" a la imagen.
11.En la ventana de inspecci√≥n, vaya a "Propiedades > Propiedades > Miscel√°neo > Nombre"
y asigne el nombre "ProDiag_Alarm".

Resultado
Ha mostrado los objetos para la supervisi√≥n y el diagn√≥stico en las correspondientes
im√°genes.
‚óè Objetos para la visualizaci√≥n del estado actual del programa en la imagen "Overview".
‚óè Visor de c√≥digo PLC para la visualizaci√≥n del c√≥digo de programa en los lenguajes KOP,
FUP y GRAPH en la imagen "Program code".
‚óè Visor de avisos para la visualizaci√≥n de los avisos ProDiag en la imagen "Alarm".

12.3.5.5

Configuraci√≥n de objetos de diagn√≥stico

Introducci√≥n
En este ejemplo se vinculan los objetos para la visualizaci√≥n del c√≥digo de programa y las
supervisiones con el programa de control. Previamente se ha creado en STEP 7 un programa
para el proceso de transporte de las piezas de producci√≥n en la cinta transportadora. Adem√°s,
se ha generado un bloque de funci√≥n ProDiag en el que se han creado las supervisiones de los
operandos.

Requisitos
‚óè Se ha creado la imagen "Overview".
‚óè En la imagen se ha creado una vista general de GRAPH y una vista general de ProDiag.
‚óè Se ha creado un bloque de funci√≥n ProDiag en el programa de control.
‚óè Se ha creado un bloque de datos de instancia GRAPH "Conv_Seq_DB" en el programa de
control.
‚óè El bloque de datos de instancia GRAPH "Conv_Seq_DB" contiene la variable "OFF_SQ",
que es visible y accesible desde HMI.

Procedimiento
1. Seleccione la vista general de GRAPH.
2. En la ventana de inspecci√≥n, haga clic en el bot√≥n de selecci√≥n en "Propiedades > General
> Proceso > Variable".
Se abre un cuadro de di√°logo.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1947

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
3. Haga clic en el bloque de datos de instancia GRAPH "Conv_Seq_DB" de la carpeta
"Bloques de programa".
4. Seleccione la variable PLC "OFF_SQ" del bloque de datos de instancia GRAPH y confirme
la selecci√≥n.
Nota
La variable de proceso que se utiliza para la vista general de GRAPH debe ser visible y
accesible desde el panel HMI.
Para hacer que las variables del bloque de datos GRAPH sean visibles y accesibles para
HMI, abra el bloque de funci√≥n GRAPH, seleccione el bloque en el √°rea de trabajo y elija
"Editar > Par√°metros internos visibles/accesibles desde HMI" en la barra de men√∫s. A
continuaci√≥n, compile los bloques de programa.

El bloque de datos de instancia GRAPH y el objeto "Vista general de GRAPH" est√°n
vinculados.
5. Seleccione la vista general de ProDiag "Overview_Conveyor"
6. En la ventana de inspecci√≥n, haga clic en el bot√≥n de selecci√≥n en "Propiedades > General
> Proceso > Variable".
Se abre un cuadro de di√°logo.

1948

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
7. Haga clic en el bloque de datos "Coveyor_DB" de la carpeta "Bloques de programa".
8. Seleccione la variable de estado "State" del bloque de datos "Conveyor_DB".

El bloque de datos ProDiag y el objeto "Vista general de ProDiag" est√°n vinculados.

Resultado
La vista general de GRAPH y la vista general de ProDiag est√°n vinculadas con los bloques de
datos del programa de control. Los objetos indican en runtime los errores de supervisi√≥n que
se produzcan y el estado actual de la cadena secuencial GRAPH.

12.3.5.6

Configuraci√≥n del visor de avisos para ProDiag

Introducci√≥n
En este ejemplo se configura el visor de avisos para la representaci√≥n de los avisos de
supervisi√≥n y el salto al visor de c√≥digo PLC con el c√≥digo de programa.

Requisitos
‚óè Se ha creado la imagen "Alarm".
‚óè Se ha creado el visor de avisos "ProDiag_Alarm".
‚óè Se ha creado el visor de c√≥digo PLC "PLC code view" en la imagen "Program code".

Procedimiento
1. Abra la imagen "Alarm" y seleccione el visor de avisos.
2. En la ventana de inspecci√≥n, haga clic en "Propiedades > General".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1949

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
3. Active las categor√≠as de avisos que se visualizar√°n en el visor de avisos, p. ej., las
categor√≠as propias del sistema "Acknowledgement"" y "No Acknowledgement".
Tambi√©n tiene la posibilidad de mostrar avisos de las categor√≠as que ha definido
previamente en STEP 7.

4. En "Propiedades > Visualizaci√≥n > Variable de control para visor de c√≥digo PLC", defina
una variable booleana que controle el salto del √∫ltimo aviso ProDiag activo al visor de
c√≥digo PLC.
Esta variable sirve para evaluar si es posible el salto del aviso seleccionado al visor de
c√≥digo PLC.

5. Mediante la funci√≥n de arrastrar y soltar, mueva un bot√≥n de la Task Card "Herramientas"
a la imagen "Alarm".
En la ventana de inspecci√≥n, vaya a "Propiedades > Propiedades > Miscel√°neo > Nombre"
y asigne el nombre "Program code".
6. En la ventana de inspecci√≥n, haga clic en "Eventos > Hacer clic".
7. Seleccione la funci√≥n de sistema "ActivarVisorC√≥digoPLC" en "Agregar funci√≥n".

1950

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
8. Indique como par√°metros el nombre de la imagen "Program code" y el nombre del objeto
"PLC code view".
9. Seleccione la variable de control booleana para visor de c√≥digo PLC definida previamente
en "Propiedades > Animaciones > Visibilidad > Variable".

Si es posible el salto del aviso ProDiag emitido al visor de c√≥digo PLC, se muestra el bot√≥n
"Program code".

Resultado
Ha activado la visualizaci√≥n de avisos de las categor√≠as definidas en el visor de avisos. Los
avisos de las categor√≠as correspondientes se muestran en runtime en el visor de avisos.
El bot√≥n configurado permite saltar en runtime al visor de c√≥digo PLC con el punto del
programa que ha disparado el aviso ProDiag.

12.3.5.7

Configuraci√≥n de salto desde la vista general de GRAPH

Introducci√≥n
En este paso se configura la navegaci√≥n sencilla entre la vista general de GRAPH, el visor de
avisos y el visor de c√≥digo PLC.

Configuraci√≥n de salto desde la vista general de GRAPH
1. Seleccione la vista general de GRAPH "GRAPH_Sequence".
2. En la ventana de inspecci√≥n, haga clic en "Eventos > Hacer clic en el bot√≥n Visor de avisos".
3. Seleccione la funci√≥n de sistema "ActivarImagen" en "Agregar funci√≥n".
4. Introduzca el nombre de la imagen "Alarm" que contiene el visor de avisos.
5. En la ventana de inspecci√≥n, haga clic en "Eventos > Hacer clic en el bot√≥n Visor de c√≥digo
PLC".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1951

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
6. Seleccione la funci√≥n de sistema "ActivarVisorC√≥digoPLC" en "Agregar funci√≥n".
7. Introduzca el nombre de la imagen "Program code" y del visor de c√≥digo PLC "PLC code
view".

Ha vinculado la vista general de GRAPH con el visor de c√≥digo PLC. Haciendo clic en el bot√≥n
"Visor de c√≥digo PLC", se muestra en runtime la imagen con la visualizaci√≥n de la cadena
secuencial GRAPH.

1952

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Resultado
En runtime se vigila el estado actual de la cadena secuencial con ayuda de la vista general de
GRAPH. Tiene la posibilidad de visualizar en todo momento la cadena secuencial GRAPH en
el visor de c√≥digo PLC.

En caso de fallo, los botones configurados permiten saltar al aviso correspondiente del visor de
avisos o directamente al visor de c√≥digo PLC con la representaci√≥n de la cadena secuencial.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1953

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

12.3.5.8

Configuraci√≥n de salto desde la vista general de ProDiag

Introducci√≥n
En este paso se configura la navegaci√≥n sencilla entre la vista general de ProDiag, el visor de
avisos y el visor de c√≥digo PLC.

Configuraci√≥n de salto desde la vista general de ProDiag
1. Seleccione la vista general de ProDiag "Overview_Conveyor"
2. En la ventana de inspecci√≥n, haga clic en "Eventos > Hacer clic en el bot√≥n Visor de avisos".
3. Seleccione la funci√≥n de sistema "ActivarImagen" en "Agregar funci√≥n".
4. Introduzca el nombre de la imagen "Alarm" que contiene el visor de avisos.

Resultado
Ha vinculado los objetos de diagn√≥stico entre s√≠.
En runtime se vigila el estado de las supervisiones ProDiag con ayuda de la vista general de
ProDiag. En caso de fallo, se resalta visualmente el s√≠mbolo de la supervisi√≥n correspondiente.

1954

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
Haciendo clic en el bot√≥n "Visor de avisos", se muestra la imagen con el visor de avisos y los
avisos presentes actualmente. El bot√≥n configurado permite saltar, p. ej., de un aviso ProDiag
a la visualizaci√≥n del segmento en el visor de c√≥digo PLC.

12.3.6

Adquisici√≥n de primeros valores y an√°lisis de criterios

12.3.6.1

Sinopsis de la adquisici√≥n de primeros valores y del an√°lisis de criterios

Introducci√≥n
El TIA Portal ofrece la posibilidad de seguir la ejecuci√≥n del programa de usuario desde un
dispositivo HMI. Al hacerlo, los datos y valores del panel de operador se comparan y
sincronizan continuamente con el PLC. Esto le permite ver el estado actual del programa con
los valores actuales de los estados l√≥gicos en el panel de operador.
Si se produce un fallo en la instalaci√≥n, puede saltar del correspondiente aviso de error al
c√≥digo de programa y ver el lugar del error en el segmento en el objeto "Visor de c√≥digo PLC".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1955

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
En el objeto "Visor de an√°lisis de criterios" ver√° los operandos err√≥neos de un aviso GRAPH
o ProDiag seleccionado de un vistazo.
Las funciones de adquisici√≥n de primeros valores y an√°lisis de criterios le permiten registrar los
valores en el momento del fallo y detectar r√°pidamente los operandos err√≥neos en el programa.
Las funciones de adquisici√≥n de primeros valores y an√°lisis de criterios est√°n disponibles para
bloques de funci√≥n GRAPH, bloques de funci√≥n ProDiag y programas de seguridad (bloques
F).

Requisitos
‚óè La adquisici√≥n de primeros valores se puede activar en el TIA Portal para los bloques
siguientes:
‚Äì A partir de la versi√≥n V14 SP1 para los bloques de funci√≥n GRAPH de la versi√≥n 4.0 o
superior.
‚Äì A partir de la versi√≥n V15 para los bloques de funci√≥n ProDiag de la versi√≥n 2.0 o
superior.
‚óè Se pueden registrar 32 estados como m√°ximo. Los primeros valores de un segmento que
contenga m√°s de 32 elementos no se registrar√°n.

Adquisici√≥n de primeros valores
La adquisici√≥n de primeros valores permite adquirir los valores en el controlador en el
momento del error, verlos en el visor de c√≥digo PLC en el panel de operador y compararlos con
los valores actuales. En la adquisici√≥n de primeros valores se registran de forma continua los
estados l√≥gicos de operandos booleanos y los resultados de comparadores en transiciones e
Interlocks.
Los estados l√≥gicos se registran siguiendo un orden definido de arriba a la izquierda abajo a
la derecha:
1

7DJB

9DOXHB

3

7DJB

7DJB

7DJB
127

,QW

7DJB

9DOXHB
,QW

,QWHUORFN
127

F

7DJB
127

2

La adquisici√≥n de primeros valores se activa individualmente para cada bloque GRAPH en el
programa de usuario. Se pueden registrar como m√°ximo 32 estados l√≥gicos de operandos
booleanos por Interlock o transici√≥n de una etapa GRAPH. Cada uno de los estados l√≥gicos
ocupa un bit. Los valores se guardan en un DWORD.

1956

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
En el siguiente ejemplo puede ver el principio y el orden en el que se registran los primeros
valores en un Interlock:
7DJB

9DOXHB

%LW

,QW


%LW

7DJB

7DJB

7DJB
127

%LW

%LW

,QWHUORFN
127

F

%LW

7DJB

7DJB

%LW

9DOXHB
,QW


%LW

%LW

7DJB

7DJB

%LW

%LW

7DJB
127

%LW

7DJB

%LW

An√°lisis de criterios
La adquisici√≥n de primeros valores en el PLC permite analizar criterios y operandos err√≥neos
en el programa. Puede ver la evaluaci√≥n del an√°lisis de criterios en el visor de c√≥digo PLC del
panel de operador. Adicionalmente, en el objeto "Visor de an√°lisis de criterios" puede mostrar
los operandos err√≥neos de un aviso GRAPH o ProDiag seleccionado con an√°lisis de criterios.
Para los bloques para los que se ha activado la adquisici√≥n de primeros valores, en el visor de
c√≥digo PLC se muestra de forma predeterminada la vista de primeros valores tras el salto.
Asimismo, en la vista de primeros valores se resaltan visualmente los operandos err√≥neos y
los criterios.
Los nombres, las direcciones absolutas y los comentarios de los operandos err√≥neos se
muestran en la tabla de s√≠mbolos. Puede alternar la vista de los valores actuales y la de los
primeros valores.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1957

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
En caso de fallo en un comparador, los dos operandos se marcan como err√≥neos. En la vista
de primeros valores se representan solo los valores registrados. Para ver los valores actuales
de las variables, cambie a la vista de valores actuales.
Nota
Importancia del orden de evaluaci√≥n en la programaci√≥n
Puesto que los operandos aparecen en la tabla de s√≠mbolos siguiendo la regla de la
adquisici√≥n de primeros valores, en el an√°lisis de criterios en caso de error se emite primero
el operando situado en la parte superior izquierda de la tabla de s√≠mbolos. Tenga en cuenta
este orden de evaluaci√≥n al programar el segmento para que los operandos m√°s importantes
se muestren en primer lugar en el visor de c√≥digo PLC.
Encontrar√° m√°s informaci√≥n sobre el orden de la lista en Ejemplo de orden del an√°lisis de
criterios (P√°gina 1960)

Consulte tambi√©n
Ejemplo de orden del an√°lisis de criterios (P√°gina 1960)

12.3.6.2

Instrucciones permitidas

Introducci√≥n
Los primeros valores y los resultados del an√°lisis de criterios se pueden ver en el objeto "Visor
de c√≥digo PLC".
En las supervisiones globales se registran los primeros valores de todos los operandos
booleanos del segmento. Si en el segmento existen varias barras colectoras que no est√°n
conectadas entre s√≠, se registran solo los primeros valores de la barra colectora
correspondiente.
En las supervisiones locales se registran solo los primeros valores especificados en la llamada
de bloque como condiciones para el par√°metro supervisado.

Instrucciones permitidas
Para la adquisici√≥n de primeros valores pueden utilizarse las instrucciones siguientes en KOP
y FUP:
Instrucciones

Visualizaci√≥n en el panel de operador (HMI)

Operaciones l√≥gicas con bits
Contacto normalmente abierto

Primeros valores y an√°lisis de criterios

Contacto normalmente cerrado
Invertir RLO
Asignaci√≥n

La instrucci√≥n est√° permitida, pero no es relevante para los pri‚Äê
meros valores o el an√°lisis de criterios.

Negar asignaci√≥n

1958

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag
Instrucciones

Visualizaci√≥n en el panel de operador (HMI)

Desactivar salida

Primeros valores

Activar salida
Flipflop de activaci√≥n/desactiva‚Äê
ci√≥n

Primeros valores y an√°lisis de criterios hasta el cuadro de la ins‚Äê
trucci√≥n inclusive

Flipflop de desactivaci√≥n/activa‚Äê
ci√≥n
Comparadores
Igual

Primeros valores y an√°lisis de criterios

Diferente
Mayor o igual
Menor o igual
Mayor
Menor
Temporizadores
TP

Primeros valores y an√°lisis de criterios hasta el cuadro de la ins‚Äê
trucci√≥n inclusive

TON

Primeros valores y an√°lisis de criterios

TOF

Primeros valores y an√°lisis de criterios hasta el cuadro de la ins‚Äê
trucci√≥n inclusive

TONR
Contadores
CTU
CTD

Primeros valores y an√°lisis de criterios hasta el cuadro de la ins‚Äê
trucci√≥n inclusive

CTUD

En las operaciones l√≥gicas con bits se registra el estado del operando y en los comparadores,
el resultado de la comparaci√≥n.
En los flipflops se registran ambas entradas (R y S) si estas est√°n interconectadas.
En los temporizadores y contadores se registra el estado del operando en la salida y,
adicionalmente, las entradas, si estas est√°n interconectadas (por ejemplo, en CTUD: CU, CD,
R, LD)
Para la adquisici√≥n de primeros valores y an√°lisis de criterios tambi√©n se pueden utilizar las
instrucciones FUP Y y O . La adquisici√≥n de primeros valores y el an√°lisis de criterios no
admiten la instrucci√≥n FUP O EXCLUSIVA.

Consulte tambi√©n
Tipos de datos soportados (P√°gina 1937)
Tipos de datos soportados (P√°gina 1924)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1959

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

12.3.6.3

Ejemplo de orden del an√°lisis de criterios

Introducci√≥n
La evaluaci√≥n del an√°lisis de criterios en el visor de c√≥digo PLC se ejecuta siguiendo un orden
fijo. En este ejemplo se muestra c√≥mo funcionan la adquisici√≥n de primeros valores y el an√°lisis
de criterios en un panel de operador.

Adquisici√≥n de primeros valores
Se desea registrar el estado l√≥gico de un enclavamiento en modo manual y autom√°tico en el
programa de usuario y se han configurado los siguientes operandos:
Nombre del
s√≠mbolo

Comentario

Significado

Tag_1

Auto mode

Modo autom√°tico

Tag_2

Interlock_1

Primer enclavamiento

Tag_3

Motor On

Conectar motor

Tag_4

Interlock_2

Segundo enclavamiento

Tag_5

Hand mode

Modo manual

Tag_6

Hand switch

Pulsador

Los estados l√≥gicos de los operandos se registran y se escriben en el DWORD en el siguiente
orden:





‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø

‡≤Ø7DJB‡≤Ø

,QWHUORFN
F



':25'

%LW %LW




%LW

%LW

%LW

%LW

%LW

%LW

%LW

%LW

%LW

%LW









7DJB

7DJB

7DJB

7DJB

7DJB

7DJB

An√°lisis de criterios en caso de error
Si se produce un error en el Interlock, use el bot√≥n configurado para saltar del aviso de error
al visor de c√≥digo PLC y ver el lugar del error en el programa. Al haber activado ya la
adquisici√≥n de primeros valores, en el visor de c√≥digo PLC se muestra autom√°ticamente la
vista de primeros valores con el an√°lisis de criterios.
Los operandos causantes del error se marcan en color. En la tabla de s√≠mbolos del visor de
c√≥digo PLC solo se muestran los nombres, las direcciones absolutas y los comentarios de los
operandos err√≥neos seg√∫n el orden de adquisici√≥n de primeros valores.

1960

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Es posible conmutar al modo manual y activar el an√°lisis de criterios. De este modo, puede
verse el segmento que dispara el error en la vista detallada, incluso si la situaci√≥n de error se
ha subsanado mientras tanto.

Programaci√≥n optimizada del Interlock
Para detectar de un primer vistazo que la barrera fotoel√©ctrica es el causante del error, en este
ejemplo conviene programar el operando Tag_4 en primer lugar. De esta forma, la informaci√≥n
sobre la barrera fotoel√©ctrica abierta se representa en la primera fila de la tabla de s√≠mbolos.
El siguiente ejemplo muestra la programaci√≥n para la vista √≥ptima en el objeto "Visor de c√≥digo
PLC":

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1961

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

12.3.6.4

Configuraci√≥n del visor de an√°lisis de criterios

Utilizaci√≥n
El objeto "Visor de an√°lisis de criterios" muestra los operandos err√≥neos del programa de
usuario que han lanzado un aviso ProDiag o un aviso GRAPH seleccionado. Para establecer
la conexi√≥n con los avisos correspondientes, configure variables de control en ambos objetos.
Si selecciona en runtime el aviso ProDiag o GRAPH aparecido en el visor de avisos, en el visor
de an√°lisis de criterios ver√° los operandos que se determinaron en el an√°lisis de criterios.
Puede ver los avisos y los operandos en runtime a simple vista configurando el visor de an√°lisis
de criterios y el visor de avisos conectado a √©l en la misma imagen.
Tiene la posibilidad de conectar varios visores de avisos con un visor de an√°lisis de criterios y
viceversa. En KTP Mobile Panels, Comfort Panels y RT Advanced puede configurar el visor de
an√°lisis de criterios en una imagen emergente o en una imagen deslizable. De este modo
podr√°, p. ej., conectar varios visores de avisos configurados en diferentes im√°genes con un
visor de an√°lisis de criterios y visualizar este en una imagen deslizable cuando lo necesite.

Nota
El objeto "Visor de an√°lisis de criterios" no est√° disponible en la imagen general.

1962

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Requisitos
‚óè El panel de operador est√° conectado con el controlador
‚óè El controlador contiene un programa ProDiag de la versi√≥n 2.0 o superior, o bien un
programa GRAPH de la versi√≥n 4.0 o superior
‚óè La adquisici√≥n de primeros valores est√° activada en los bloques de funci√≥n
‚óè Se ha configurado un visor de avisos

Procedimiento
1. Arrastre el visor de an√°lisis de criterios de la ventana de herramientas utilizando la funci√≥n
de arrastrar y soltar.
2. Haga clic en la ventana de inspecci√≥n "Propiedades > Propiedades > General".
3. Pulse el bot√≥n de selecci√≥n bajo la propiedad "Variable".
4. Seleccione la variable de estado del visor de avisos correspondiente en "Proceso >
Variable".
5. Haga clic en el visor de avisos.
6. Haga clic en la ventana de inspecci√≥n "Propiedades > Propiedades > Visualizaci√≥n".
7. Seleccione la variable de estado del visor de an√°lisis de criterios en "Variable de control
para an√°lisis de criterios".
Nota
Tipo de datos y longitud de la variable de estado
La variable de estado debe ser del tipo de datos WString y tener una longitud de 50.

Resultado
El visor de an√°lisis de criterios se ha configurado en la imagen y se ha conectado con el visor
de avisos. En runtime se puede ver, para un aviso seleccionado, informaci√≥n detallada sobre
los operandos que han causado este aviso.

12.3.6.5

Configuraci√≥n del visor de an√°lisis de criterios

Utilizaci√≥n
El objeto "Visor de an√°lisis de criterios" muestra los operandos err√≥neos del programa de
usuario que han lanzado un aviso ProDiag o un aviso GRAPH seleccionado. Para establecer
la conexi√≥n con los avisos correspondientes, configure variables de control en ambos objetos.
Si selecciona en runtime el aviso ProDiag o GRAPH aparecido en el visor de avisos, en el visor
de an√°lisis de criterios ver√° los operandos que se determinaron mediante el an√°lisis de
criterios.
El visor de an√°lisis de criterios y el visor de avisos conectado a √©l se configuran en la misma
imagen.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1963

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

Requisitos
‚óè El panel de operador est√° conectado con el controlador
‚óè El controlador contiene un programa ProDiag de la versi√≥n 2.0 o superior, o bien un
programa GRAPH de la versi√≥n 4.0 o superior
‚óè La adquisici√≥n de primeros valores est√° activada en los bloques de funci√≥n
‚óè Se ha configurado un visor de avisos

Procedimiento
1. Arrastre el visor de an√°lisis de criterios de la ventana de herramientas utilizando la funci√≥n
de arrastrar y soltar.
2. Haga clic en la ventana de inspecci√≥n "Propiedades > Propiedades > General".
3. Pulse el bot√≥n de selecci√≥n en la propiedad "Origen de datos".
4. Seleccione el visor de avisos configurado.

Resultado
El visor de an√°lisis de criterios se ha configurado en la imagen y se ha conectado con el visor
de avisos. En runtime se puede ver, para un aviso seleccionado, informaci√≥n detallada sobre
los operandos que han causado este aviso.

12.3.6.6

Salida de avisos con criterios

Introducci√≥n
Con la adquisici√≥n de primeros valores activada se registran los valores del operando err√≥neo
en el momento del fallo y se analizan y determinan los criterios que faltan.
Tiene la posibilidad de ampliar los avisos GRAPH y ProDiag con informaci√≥n adicional sobre
los operandos err√≥neos y visualizarlos en el panel de operador. Si aparece un fallo en runtime
durante la ejecuci√≥n del programa, el aviso de error mostrar√° tambi√©n el primer operando
err√≥neo en el segmento que falla. Encontrar√° informaci√≥n detallada sobre todos los operandos
err√≥neos del aviso de error en el objeto "Visor de an√°lisis de criterios".

1964

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

3/&

:LQ&&+0,

9LVRUGHDYLVRV
9HQWDQDGHDYLVRV
9LVRUGHDQ¬£OLVLVGHFULWHULRV

La informaci√≥n siguiente se puede agregar a un aviso:
‚óè Nombre del s√≠mbolo: el nombre simb√≥lico del primer operando que ha causado el aviso de
error seleccionado
‚óè Direcci√≥n absoluta: la direcci√≥n del primer operando err√≥neo
‚óè Valor del operando: el valor del primer operando err√≥neo en el momento del fallo
‚óè Comentario: comentario multiling√ºe configurado en el programa de usuario
La informaci√≥n adicional se muestra en el aviso despu√©s del texto de aviso, con cada elemento
separado mediante puntos y comas y espacios.
Como alternativa, puede definir que la informaci√≥n adicional se muestre en el texto informativo.
En WinCC Runtime Professional existe la posibilidad de ampliar tambi√©n los textos de aviso
adicionales de los avisos de supervisi√≥n. Para ello, seleccione el texto de aviso adicional
correspondiente en "Configuraci√≥n de runtime > Avisos > An√°lisis de criterios > Completar
texto".
Nota
El orden de los elementos de informaci√≥n adicional que se agregan al aviso est√°
predeterminado y no se puede cambiar.
Nota
Para mostrar los avisos del controlador √≠ntegramente en el dispositivo HMI, la opci√≥n
"Actualizaci√≥n autom√°tica" debe estar activada en "Configuraci√≥n de runtime > Avisos >
Avisos del controlador" para la conexi√≥n correspondiente. Encontrar√° m√°s informaci√≥n sobre
los avisos completos en "Env√≠o de aviso completo del controlador al panel de operador
(P√°gina 983)".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1965

Uso de funciones de diagn√≥stico
12.3 Supervisi√≥n de m√°quinas e instalaciones con ProDiag

An√°lisis de criterios en el sistema de avisos
Los avisos del an√°lisis de criterios se visualizan siguiendo los pasos siguientes:
‚óè Active la adquisici√≥n de primeros valores en las propiedades del bloque de funci√≥n ProDiag
o GRAPH del programa de usuario.
‚óè Active las opciones para ampliar los textos de aviso en la configuraci√≥n de runtime del
dispositivo HMI.
‚óè Configure un visor de avisos y un visor de an√°lisis de criterios y conecte ambos objetos
entre s√≠.

Ampliaci√≥n de avisos
1. Abra el editor "Configuraci√≥n de runtime" del dispositivo HMI.
2. Haga clic en "Configuraci√≥n de runtime > Avisos > An√°lisis de criterios".
3. Elija los avisos que quiera ampliar en "An√°lisis de criterios > Completar texto".
4. Active la informaci√≥n adicional que se agregar√° al texto del aviso, como p. ej., el nombre del
s√≠mbolo y la direcci√≥n del primer operando err√≥neo.

Resultado
En caso de error, en el visor de avisos no solo ver√° el texto del aviso, sino tambi√©n los
operandos que hayan causado el aviso de error. Seleccionando el aviso correspondiente, en
el visor de an√°lisis de criterios ver√° los operandos err√≥neos que se determinaron mediante el
an√°lisis de criterios.

1966

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Comunicaci√≥n con controladores
13.1

13

WinCC Engineering V16: Comunicaci√≥n

Comunicaci√≥n con controladores
Encontrar√° una descripci√≥n detallada de la comunicaci√≥n con controladores en el manual
"WinCC Advanced V16: Comunicaci√≥n".

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1967

Comunicaci√≥n con controladores
13.1 WinCC Engineering V16: Comunicaci√≥n

1968

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Utilizar funciones generales
14.1

Trabajar con el asistente de paneles de operador

14.1.1

Conceptos b√°sicos del asistente de paneles de operador

14

Introducci√≥n
Cuando se crea un nuevo panel de operador en el proyecto, se inicia autom√°ticamente el
asistente de paneles de operador.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1969

Utilizar funciones generales
14.1 Trabajar con el asistente de paneles de operador

Asistente de paneles de operador
El asistente de paneles de operador gu√≠a al usuario paso a paso por los diversos cuadros de
di√°logo y le ayuda a crear un dispositivo. Adem√°s, permite definir opciones de configuraci√≥n
b√°sicas para el panel de operador, como puede ser la representaci√≥n de la imagen o la
conexi√≥n con el PLC.

Nota
Si crea un panel con pantalla a color mediante el asistente de paneles de operador, es posible
que los gr√°ficos de los botones de navegaci√≥n se muestren en blanco y negro. Sin embargo,
este error solo se da si el nuevo panel se ha creado con el mismo nombre que el de un panel
de pantalla monocrom√°tica que entretanto se ha borrado.
Este error puede evitarse borrando tambi√©n los gr√°ficos correspondientes de la colecci√≥n de
gr√°ficos cada vez que se borre un panel del proyecto.

1970

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Utilizar funciones generales
14.1 Trabajar con el asistente de paneles de operador
Nota
Textos en varios idiomas en el asistente del panel de operador
Si crea la navegaci√≥n por im√°genes en varios idiomas con el asistente del panel de operador,
WinCC utilizar√° el idioma de la interfaz para los nombres definidos por el usuario en todos los
idiomas del proyecto.
Si uno de los idiomas del proyecto no soporta el juego de caracteres del idioma de la interfaz,
los nombres no se mostrar√°n en este idioma del proyecto, p. ej., si el idioma de interfaz es el
chino y el idioma del proyecto es el ingl√©s.
Nota
Tipo de interfaz de la conexi√≥n
Si es posible, el asistente del panel de operador establece la conexi√≥n entre el panel de
operador y el controlador mediante el tipo de interfaz est√°ndar del panel.
Tras la configuraci√≥n con el asistente del panel de operador, compruebe la conexi√≥n en el
editor "Dispositivos y redes".

Consulte tambi√©n
Conceptos b√°sicos del asistente de paneles de operador (P√°gina 1972)
Informaci√≥n general sobre referencias cruzadas (P√°gina 2042)
Conceptos ling√º√≠sticos en WinCC (P√°gina 2052)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1971

Utilizar funciones generales
14.1 Trabajar con el asistente de paneles de operador

14.1.2

Conceptos b√°sicos del asistente de paneles de operador

Introducci√≥n
El asistente de paneles de operador gu√≠a al usuario paso a paso por los diversos cuadros de
di√°logo y le ayuda a crear un dispositivo. Adem√°s, permite definir opciones de configuraci√≥n
b√°sicas para el panel de operador, como puede ser la representaci√≥n de la imagen o la
conexi√≥n con el PLC.

1972

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Utilizar funciones generales
14.1 Trabajar con el asistente de paneles de operador

Abrir asistente de paneles de operador
1. Introduzca un nuevo panel en el proyecto, p. ej., RT Advanced.
2. Haga clic en el panel de operador dentro del √°rbol del proyecto.
3. En el men√∫ contextual, elija el comando "Iniciar asistente de paneles de operador". Se abre
dicho asistente.
Nota
Si se efect√∫a alg√∫n cambio despu√©s de introducir el dispositivo, p. ej. a√±adir una imagen,
el asistente de paneles de operador ya No puede abrirse.
Nota
Si se crea un panel con una pantalla a color con el asistente de paneles de operador, es
posible que los gr√°ficos de los botones de navegaci√≥n se muestren en blanco y negro. Sin
embargo, este error solo ocurre si el nuevo panel se ha creado con el nombre que ten√≠a un
panel de pantalla monocrom√°tica que se ha borrado entre tanto.
Este error puede evitarse si, cada vez que se borre un panel del proyecto, se borran
tambi√©n los correspondientes gr√°ficos de la colecci√≥n de gr√°ficos.
Nota
Dependencia con el panel - Uso de comillas en los nombres del proyecto
Los proyectos de WinCC Professional cuyos nombres contienen comillas no se compilan.
Cuando cree un panel de operador para WinCC RT Professional, no utilice comillas en el
nombre del proyecto.
Nota
Textos en varios idiomas en el asistente del panel de operador
Si crea la navegaci√≥n por im√°genes en varios idiomas con el asistente del panel de
operador, WinCC utilizar√° el idioma de la interfaz para los nombres definidos por el usuario
en todos los idiomas del proyecto.
Si uno de los idiomas del proyecto no soporta el juego de caracteres del idioma de la
interfaz, los nombres no se mostrar√°n en este idioma del proyecto, p. ej., si el idioma de
interfaz es el chino y el idioma del proyecto es el ingl√©s.

Consulte tambi√©n
Conceptos b√°sicos del asistente de paneles de operador (P√°gina 1969)
Cargar archivos mediante el editor "Archivos HMI" (P√°gina 2150)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1973

Utilizar funciones generales
14.2 Trabajar con librer√≠as

14.2

Trabajar con librer√≠as

14.2.1

Principios b√°sicos de las librer√≠as

Introducci√≥n
En las librer√≠as se depositan de forma centralizada los objetos que se necesitan con
frecuencia. Un objeto depositado en la librer√≠a s√≥lo tiene que configurarse una vez.
Posteriormente puede utilizarse las veces que se quiera. Los objetos de la librer√≠a ampl√≠an el
n√∫mero de objetos de imagen disponibles y aumentan la efectividad de la configuraci√≥n
gracias a la utilizaci√≥n m√∫ltiple de objetos acabados.
Junto con WinCC se suministran librer√≠as completas, p. ej., de "Motores" o "V√°lvulas". No
obstante, tambi√©n es posible definir objetos de librer√≠as propios.
Las librer√≠as se administran en la Task Card "Librer√≠as" o en la vista de librer√≠a. Tiene a su
disposici√≥n las siguientes librer√≠as:
‚óè Librer√≠a del proyecto
‚óè Librer√≠as globales

Nota
En la Task Card "Herramientas" de la paleta "Gr√°ficos" hay una librer√≠a de s√≠mbolos.

1974

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Utilizar funciones generales
14.2 Trabajar con librer√≠as

Librer√≠a del proyecto
Cada proyecto contiene exactamente una librer√≠a. Los objetos de la librer√≠a del proyecto se
guardan junto con los datos del mismo, estando s√≥lo disponibles en el proyecto en el que se
ha creado la librer√≠a. Si el proyecto se transfiere a otro PC, tambi√©n se transfiere la librer√≠a
correspondiente.
Para poder aprovechar un objeto de la librer√≠a del proyecto en otros proyectos, desplace o
copie el objeto a una librer√≠a global.

Librer√≠as globales
Las librer√≠as globales se guardan de forma independiente de los datos del proyecto en un
archivo propio con la extensi√≥n ".alxx"; "xx" corresponde al n√∫mero de la versi√≥n actual de
WinCC.
Un proyecto puede acceder a varias librer√≠as globales. Varios proyectos pueden utilizar
simult√°neamente una misma librer√≠a global.
Si un objeto de la librer√≠a se modifica en un proyecto, la librer√≠a se modificar√° tambi√©n en los
dem√°s proyectos que hayan abierto esta librer√≠a.

Objetos de librer√≠as
Una librer√≠a puede contener todos los objetos de WinCC. Ejemplos:
‚óè Panel de operador completo
‚óè Im√°genes
‚óè Objetos de manejo y visualizaci√≥n, incluidas las variables y funciones
‚óè Gr√°ficos
‚óè Variables
‚óè Avisos
‚óè Listas de textos y gr√°ficos
‚óè Faceplates
‚óè Tipos de datos de usuario
‚óè Estilo y hojas de estilo

Consulte tambi√©n
Principios b√°sicos de las im√°genes (P√°gina 35)
Mostrar objetos de librer√≠a (P√°gina 1993)
Depositar un objeto en una librer√≠a (P√°gina 1996)
Insertar un objeto de librer√≠a (P√°gina 1997)
Crear librer√≠a global (P√°gina 1984)
Guardar librer√≠a global (P√°gina 1985)

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1975

Utilizar funciones generales
14.2 Trabajar con librer√≠as
Abrir librer√≠a global (P√°gina 1986)
Plantillas maestras y tipos (P√°gina 1978)

14.2.2

Sinopsis de la vista de librer√≠as

Funci√≥n de la vista de librer√≠a
La vista de librer√≠a unifica las funciones de la Task Card "Librer√≠as" y las de la ventana general.
En la vista de librer√≠a se visualizan los elementos de una librer√≠a en diferentes vistas y, adem√°s,
propiedades adicionales de los distintos elementos en la vista detallada. Aparte de esto, en la
vista de librer√≠a se editan y versionan los tipos.

1976

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Utilizar funciones generales
14.2 Trabajar con librer√≠as

Estructura de la vista de librer√≠a
La figura siguiente muestra los componentes de la vista de librer√≠a:








1

√Årbol de librer√≠as

2

Vista general de librer√≠as

3

Bot√≥n "Vista de librer√≠a"

4

Bot√≥n "Abrir o cerrar vista general de librer√≠as"

√Årbol de librer√≠as
Salvo peque√±as diferencias, el √°rbol de librer√≠as es igual que la Task Card "Librer√≠as". Al
contrario que en la Task Card, no hay una paleta "Elementos", ya que los elementos se
muestran en la vista general de librer√≠as. Adem√°s, en el √°rbol de librer√≠as se puede cerrar la
vista de librer√≠a o abrir y cerrar la vista general de librer√≠as.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1977

Utilizar funciones generales
14.2 Trabajar con librer√≠as

Vista general de librer√≠as
La vista general de librer√≠as se corresponde con la ventana general y muestra los elementos
del objeto seleccionado en el √°rbol de librer√≠as. Los elementos pueden visualizarse en tres
vistas diferentes. Adem√°s, en la vista general de librer√≠as pueden realizarse, p. ej., las
siguientes acciones:
‚óè Copiar elementos
‚óè Desplazar elementos
‚óè Versionar tipos
‚óè Editar faceplates y tipos de datos de usuario HMI
‚óè Editar instancias de tipos

14.2.3

Plantillas maestras y tipos

Introducci√≥n
Tanto la "Librer√≠a de proyecto" como la "Librer√≠a global" tienen las carpetas "Plantillas
maestras" y "Tipos". Los objetos de librer√≠a se pueden crear o utilizar como plantilla maestra
o como tipo.

Plantillas maestras
Para crear copias de los objetos de librer√≠a independientes las unas de las otras, utilice las
plantillas maestras.

Tipos
Desde los objetos de la carpeta "Tipos" se crean instancias y se utilizan en su proyecto. Las
instancias est√°n unidas a su tipo respectivo.

Administrar los objetos de librer√≠a
Los objetos de librer√≠a se copian y desplazan a otra librer√≠a. Las plantillas maestras s√≥lo se
copian a la carpeta "Plantillas maestras" o a cualquier otra subcarpeta de "Plantillas maestras".
Los tipos s√≥lo se pueden insertar igualmente en la carpeta "Tipos" o en cualquier otra
subcarpeta de "Tipos".

Consulte tambi√©n
Principios b√°sicos de las librer√≠as (P√°gina 1974)
Estado de las versiones de tipo (P√°gina 1998)

1978

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Utilizar funciones generales
14.2 Trabajar con librer√≠as

14.2.4

Librer√≠as en WinCC

Introducci√≥n
WinCC se suministra con un gran n√∫mero de librer√≠as. Clasificados por temas en carpetas, se
pueden encontrar objetos gr√°ficos predise√±ados, que pueden utilizarse en las im√°genes para
el manejo y la observaci√≥n de la instalaci√≥n.

Librer√≠a global "Buttons and Switches"
Las librer√≠as "Buttons and Switches" ofrecen una amplia selecci√≥n de interruptores y
botones.

Las carpetas clasifican los interruptores o botones en categor√≠as. La carpeta
"DiagnosticsButtons" contiene, por ejemplo, el objeto "Indicador del diagn√≥stico de sistema".
El objeto "Indicador del diagn√≥stico de sistema" se utiliza para realizar diagn√≥sticos de sistema
en la instalaci√≥n.
Nota
Los objetos de la carpeta "DiagnosticsButtons" s√≥lo pueden utilizarse en Comfort Panels.
Los objetos con la denominaci√≥n "Switch" en el nombre del objeto o en el nombre de carpeta
correspondiente no pueden utilizarse en runtime Professional.

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

1979

Utilizar funciones generales
14.2 Trabajar con librer√≠as

Librer√≠a global "Monitoring and Control objects"
La librer√≠a "Monitoring and Control objects" ofrece objetos de control y visualizaci√≥n m√°s o
menos complejos en diversos dise√±os, as√≠ como l√°mparas de control, botones e interruptores
correspondientes.

Adem√°s, en la carpeta "Design_Backgrounds" hay visores de gr√°ficos adecuados a los
dise√±os, que pueden utilizarse como fondos de objeto para la ampliaci√≥n espec√≠fica de cliente
del volumen de la librer√≠a.
Nota
Los objetos con la denominaci√≥n "Switch" en el nombre del objeto no pueden utilizarse en
Runtime Professional. Lo mismo rige para el objeto "D5_Display_3" con el campo de fecha y
hora contenido en el mismo.

1980

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantalla

Utilizar funciones generales
14.2 Trabajar con librer√≠as

14.2.5

Administrar librer√≠as

14.2.5.1

Sinopsis de la administraci√≥n de librer√≠as

Funci√≥n de la administraci√≥n de librer√≠as
Las plantillas maestras y los tipos con dependencias de otros elementos de librer√≠as est√°n
sujetos a algunas restricciones de funciones. Por ejemplo, no es posible borrarlos mientras
existan dependencias. De este modo se impide que se inutilicen otros elementos de la librer√≠a.
La administraci√≥n de librer√≠as permite identificar dependencias y proporciona una visi√≥n global
del progreso del trabajo.
La administraci√≥n de librer√≠as ofrece las siguientes funciones:
‚óè Visualizaci√≥n de las relaciones de los tipos y las plantillas maestras
Si un tipo se referencia a otros tipos o a plantillas maestras, las relaciones se muestran en
la administraci√≥n de librer√≠as. Asimismo se muestran los elementos de librer√≠as a los que
hace referencia un tipo o una plantilla maestra.
‚óè Indicaci√≥n de las ubicaciones de tipos en el proyecto
‚óè Filtrado de todos los tipos que se encuentran en el estado "en test" o "en proceso"

Estructura de la administraci√≥n de librer√≠as
La imagen muestra una administraci√≥n de librer√≠as que consta de los siguientes componentes:
‚óè Barra de herramientas de la administraci√≥n de librer√≠as
‚óè √Årea "Tipos"
‚óè √Årea "Utilizaci√≥n"

Visualizaci√≥n de procesos
Manual de sistema, 11/2019, Impresi√≥n de la Ayuda en pantall