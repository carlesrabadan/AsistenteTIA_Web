 área de destino es mayor que el área de origen.
El área de origen se escribe completamente en el área de destino, el resto de bytes del área de destino no
se modifica.

7000

Primera llamada con REQ = 0: Ninguna transmisión de datos activa; BUSY tiene el valor "0".

7001

Primera llamada con REQ = 1: Transmisión de datos iniciada; BUSY tiene el valor "1".

7002

Llamada intermedia (REQ irrelevante): transferencia de datos ya activa; BUSY tiene el valor "1"

8081

El área de origen es mayor que el área de destino.

8092

La función "Generar bloque de datos" no puede ejecutarse en este momento, porque

El área de destino se escribe por completo, el resto de bytes del área de origen se ignoran.
● se ha alcanzado ya el número máximo de bloques admisible en la CPU
8093

En el parámetro SRCBLK no se ha indicado ningún bloque de datos o se ha indicado uno que no se encuentra
en la memoria de trabajo.

8094

En el parámetro ATTRIB se ha indicado un valor no válido.

80A1

Error en el número del DB:
● Los números del área especificada (LOW_LIMIT hasta UP_LIMIT) están ocupados o no se encuentran en
el área permitida de la CPU
● límite inferior > límite superior

80A2

Error en la longitud del DB:
● la longitud es "0"
● la longitud es un número impar
● la longitud es mayor que la admisible en la CPU

80A3

El bloque de datos del parámetro SRCBLK no se ha creado con acceso estándar.

80B1

No hay ningún número de DB libre.

80B2

Memoria libre disponible insuficiente.

80B4

La Memory Card tiene activada la protección contra escritura.

80BB

Memoria de carga libre insuficiente.

2918

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Código de
error*
(W#16#...)

Descripción

80C3

El número máximo de instrucciones "CREATE_DB" activas simultáneamente ya se ha alcanzado en este
momento.

* Los códigos de error en el editor de programas se representan como valores enteros o hexadecimales. Encontrará más
información sobre el cambio de los formatos de visualización en "Consulte también".

Ejemplo
Encontrará el ejemplo aquí: Ejemplo de programa para funciones CREATE (Página 2935).
Encontrará información adicional y el código del programa del ejemplo aquí: Sample Library for
Instructions (Página 615).

Consulte también
Cambiar formatos de visualización en el estado del programa (Página 8529)

READ_DBL: Leer de un bloque de datos de la memoria de carga
Descripción
La instrucción copia un DB o una parte de un DB que se encuentra en la memoria de carga
(Micro Memory Card) en el área de datos de un DB de destino. El DB de destino tiene que ser
relevante para la ejecución. No puede haberse creado con el atributo "Depositar solo en la
memoria de carga". El contenido de la memoria de carga no se modifica en la operación de
copia.
Para garantizar la coherencia de los datos no debe modificarse el área de destino durante el
procesamiento de "READ_DBL" (es decir, mientras el parámetro BUSY tenga el valor TRUE).
Los dos parámetros SRCBLK y DSTBLK (bloque de origen y bloque de destino) deben ser del
tipo de datos VARIANT. Se aplican las limitaciones siguientes:
● Válido para áreas de memoria estándar: Si se desea interconectar un parámetro del tipo de
datos VARIANT (área de origen o destino) con una variable del tipo de datos BOOL o un
ARRAY of BOOL, existen las opciones siguientes:
– Direccionarlo simbólicamente
Ejemplo: Parámetro SRCBLK: "Data_block".myArray
– Direccionarlo absolutamente utilizando el puntero ANY. En este caso debe tenerse en
cuenta que la longitud indicada del área debe ser un múltiplo de 8, pues de lo contrario
no se ejecutará la instrucción.
Ejemplo: Parámetro SRCBLK: P#DB123.DBX456.0 BOOL 1000
● En el caso de un puntero VARIANT del tipo STRING la longitud debe ser 1.
● Los bloques de origen y de destino se deben haber creado con el mismo acceso al bloque.
Ambos deben utilizar el tipo de acceso "Optimizado" o "Estándar".
● Si los bloques DB de origen y destino tienen acceso optimizado, no se permite usar el tipo
de datos STRUCT.

Programación del PLC
Manual de programación y manejo, 11/2019

2919

Instrucciones
4.1 Instrucciones

Nota
"READ_DBL" se procesa de forma asíncrona, por lo que no es adecuada para leer variables
frecuentemente (o cíclicamente) en la memoria de carga.
Una petición iniciada siempre se finaliza. Si se alcanza el número máximo de instrucciones
"READ_DBL" activas simultáneamente y en ese momento se vuelve a llamar "READ_DBL" en
una clase de mayor prioridad, se devuelve el código de error W#16#80C3. Por este motivo no
es útil volver a arrancar inmediatamente la petición de mayor prioridad.

Funcionamiento
La instrucción "READ_DBL" es una instrucción que funciona de forma asíncrona. Su ejecución
se prolonga a lo largo de varias llamadas. Para iniciar la petición, debe llamarse "READ_DBL"
con REQ = 1.
El estado de la petición se indica a través de los parámetros de salida RET_VAL y BUSY.
Consulte también: Diferencia entre las instrucciones que funcionan síncronamente y las que
funcionan asíncronamente (Página 618)

Parámetros
La tabla siguiente muestra los parámetros de la instrucción "READ_DBL":
Parámetro

Declaración

Tipo de datos

Área de memoria

Descripción

REQ

Input

BOOL

I, Q, M, D, L o cons‐
tante

REQ = 1: solicitud de lectura

SRCBLK

Input

VARIANT

D

Puntero al bloque de datos de la memoria de
carga de la que se lee

RET_VAL

Return

INT

I, Q, M, D, L

Información de error

BUSY

Output

BOOL

I, Q, M, D, L

BUSY = 1: La lectura todavía no ha finalizado.

DSTBLK

Output

VARIANT

D

Puntero al bloque de datos de la memoria de
trabajo en la que se tiene que escribir

Encontrará más información sobre los tipos de datos válidos en "Vista general de los tipos de
datos válidos (Página 241)".

Parámetro RET_VAL
Código de error* Descripción
(W#16#...)
0000

Ningún error

0081

El área de destino es mayor que el área de origen. El área de origen se escribe completamente en el área
de destino, el resto de bytes del área de destino no se modifica.

7000

Primera llamada con REQ = 0: Ninguna transmisión de datos activa; BUSY tiene el valor "0".

7001

Primera llamada con REQ=1: transmisión de datos iniciada; BUSY tiene el valor "1".

7002

Llamada intermedia (REQ irrelevante): Transmisión de datos activa; BUSY tiene el valor "1".

2920

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Código de error* Descripción
(W#16#...)
8x51

Nota: Este código de error solo existe en las CPU S7-1200.
Error de tipo de datos en el bloque de datos.

8081

El área de origen es mayor que el área de destino.
El área de destino se escribe por completo, el resto de bytes del área de origen se ignoran.

8082

● El DB de destino y el DB de origen son de tipos diferentes (acceso optimizado/acceso estándar).
● Tanto el DB de destino como el de origen se han creado con acceso optimizado. Sin embargo, en el
DB de destino y de origen se utilizan estructuras que modifican la disposición de los datos cuando se
compilan. (Nota: En su lugar, utilice UDT).

8093

Nota: Este código de error solo existe en las CPU S7-1500.
En el parámetro DSTBLK no se ha indicado ningún bloque de datos o se ha indicado uno que no se
encuentra en la memoria de trabajo.

80B1

Nota: Este código de error solo existe en las CPU S7-1500.
En el parámetro SRCBLK solo se admiten bloques de datos que se encuentren en la memoria de carga.

8xB1

Nota: Este código de error solo existe en las CPU S7-1200.
En el parámetro SRCBLK no se ha indicado ningún bloque de datos o el bloque de datos indicado no es
ningún objeto de memoria de carga.

80B4

DSTBLK señala a un DB con atributo F (en el que no es posible escribir)

8xC0

Nota: Este código de error solo existe en las CPU S7-1200.
El DB de destino está siendo procesado por otra instrucción o función de comunicación.

80C3

El número máximo de instrucciones "READ_DBL" activas simultáneamente ya se ha alcanzado en este
momento.

* Los códigos de error en el editor de programas se representan como valores enteros o hexadecimales. Encontrará más
información sobre el cambio de los formatos de visualización en "Consulte también".

Ejemplo
En el siguiente ejemplo se leerá el contenido de un DB de la memoria de carga en un DB de
la memoria de trabajo.
Para almacenar los datos de la interconexión es preciso crear tres variables en un bloque de
datos global.

Programación del PLC
Manual de programación y manejo, 11/2019

2921

Instrucciones
4.1 Instrucciones
Para almacenar los datos de transmisión se crean dos bloques de datos globales con tres
variables cada uno del tipo de datos INT.
● Para datos de recepción en la memoria de carga:

● Para datos de recepción en la memoria de trabajo:

Las interconexiones siguientes se crean en un FB ("SLI_FB_READ_DBL").
Segmento 1: Los parámetros de la instrucción "READ_DBL" se interconectan del siguiente
modo.

Segmento 2: El procesamiento de READ_DBL se detiene del siguiente modo.

Si el contacto NA ("execute") devuelve el estado lógico "TRUE", se ejecuta la instrucción
"READ_DBL". Mediante el parámetro de entrada SRCBLK ("SourceDB_LoadMemory"), el DB
se almacena en la memoria de carga.
Mediante el parámetro de salida DSTBLK ("TargetDB"), el DB se almacena en la memoria de

2922

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
trabajo. La instrucción "READ_DBL" llama los datos de la memoria de carga que deben
transferirse (SRCBLK) y lee los datos de la memoria de trabajo (DSTBLK).
En el parámetro de salida RET_VAL ("returnValue") se indica que la ejecución se ha realizado
sin errores.
Código del programa
Encontrará información adicional y el código del programa del ejemplo anterior aquí: Sample
Library for Instructions (Página 615).

Consulte también
Cambiar formatos de visualización en el estado del programa (Página 8529)
GET_ERR_ID: Consultar ID de error localmente (Página 1982)

WRIT_DBL: Escribir en un bloque de datos de la memoria de carga
Descripción
La instrucción "WRIT_DBL" permite transferir el contenido de un DB o un área de DB desde la
memoria de trabajo a un DB o un área de DB de la memoria de carga (Micro Memory Card).
El DB de origen tiene que ser relevante para la ejecución. No puede haberse creado con el
atributo "Depositar solo en la memoria de carga".
Nota
Comportamiento de los valores de arranque al "Cargar de dispositivo"
Los valores de arranque que se han modificado mediante la instrucción "WRIT_DBL" se
vuelven a perder al ejecutar la acción "Cargar de dispositivo".
Nota
Diferencias online/offline en el árbol del proyecto (S7-1200 FW V2.0 y V2.1)
Si se modifica un bloque de datos mediante la instrucción "WRIT_DBL", la diferencia resultante
entre el bloque online y offline no se mostrará inicialmente con los símbolos correctos en el
árbol del proyecto. La diferencia no se visualizará hasta que se deshaga la conexión online y
se vuelva a establecer la conexión online a continuación.
Para garantizar la coherencia de los datos no debe modificarse el área de origen durante el
procesamiento de "WRIT_DBL" (es decir, mientras el parámetro BUSY tenga el valor TRUE).
Los dos parámetros SRCBLK y DSTBLK (bloque de origen y bloque de destino) deben ser del
tipo de datos VARIANT. Se aplican las limitaciones siguientes:
● En el caso de un puntero VARIANT del tipo BOOL la longitud debe ser divisible entre 8.
● En el caso de un puntero VARIANT del tipo STRING la longitud debe ser 1.

Programación del PLC
Manual de programación y manejo, 11/2019

2923

Instrucciones
4.1 Instrucciones
● Los bloques de origen y de destino se deben haber creado con el mismo acceso al bloque.
Ambos deben utilizar el tipo de acceso "Acceso optimizado al bloque" o el acceso
optimizado debe estar desactivado en ambos.
● Si los bloques DB de origen y destino tienen acceso optimizado, no se permite usar el tipo
de datos STRUCT.
La instrucción "WRIT_DBL" no modifica la suma de verificación del programa de usuario al
describir un DB creado con una instrucción. Por el contrario, al describir un DB cargado, la
primera escritura en este DB sí modifica la suma de verificación del programa de usuario.
Nota
"WRIT_DBL" no es adecuado para escribir variables frecuentemente (o cíclicamente) en la
memoria de carga, ya que por limitaciones tecnológicas la Memory Card solo admite un
determinado número de accesos de escritura.

Funcionamiento
La instrucción "WRIT_DBL" es una instrucción que funciona de forma asíncrona. Su ejecución
se prolonga a lo largo de varias llamadas. Para iniciar la orden, debe llamarse "WRIT_DBL" con
REQ = 1.
El estado de la orden se indica por medio de los parámetros de salida RET_VAL y BUSY.
Consulte también: Diferencia entre las instrucciones que funcionan síncronamente y las que
funcionan asíncronamente (Página 618).

Parámetros
La tabla siguiente muestra los parámetros de la instrucción "WRIT_DBL":
Parámetro

Declaración

Tipo de datos

Área de memoria

Descripción

REQ

Input

BOOL

I, Q, M, D, L o cons‐
tante

REQ = 1: solicitud para escribir

SRCBLK

Input

VARIANT

D

Puntero en el bloque de datos de la memoria
de trabajo de la que se lee

RET_VAL

Return

INT

I, Q, M, D, L

Información de error

BUSY

Output

BOOL

I, Q, M, D, L

BUSY = 1: La escritura todavía no ha finaliza‐
do.

DSTBLK

Output

VARIANT

D

Puntero al bloque de datos de la memoria de
carga en la que se tiene que escribir

Encontrará más información sobre los tipos de datos válidos en "Vista general de los tipos de
datos válidos (Página 241)".

2924

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Parámetro RET_VAL
Código de error* Descripción
(W#16#...)
0000

Ningún error

0081

El área de destino es mayor que el área de origen.
El área de origen se escribe completamente en el área de destino, el resto de bytes del área de destino
no se modifica.

7000

Primera llamada con REQ = 0: Ninguna transmisión de datos activa; BUSY tiene el valor "0".

7001

Primera llamada con REQ = 1: Transmisión de datos iniciada; BUSY tiene el valor "1".

7002

Llamada intermedia (REQ irrelevante): Transmisión de datos activa; BUSY tiene el valor "1".

8051

Nota: Este código de error solo existe en las CPU S7-1200.
Error de tipo bloque de datos.

8251

Nota: Este código de error solo existe en las CPU S7-1200.
Error de tipo de datos en el DB de origen

8551

Nota: Este código de error solo existe en las CPU S7-1200.
Error de tipo de datos en el DB de destino

8081

El área de origen es mayor que el área de destino.
El área de destino se escribe por completo, el resto de bytes del área de origen se ignoran.

8082

Nota: Este código de error solo existe en las CPU S7-1500.
● El DB de destino y el DB de origen son de dos tipos diferentes (acceso optimizado/no optimizado).
● Tanto el DB de destino como el de origen se han creado con acceso optimizado. Sin embargo, en el
DB de destino y de origen se utilizan estructuras que modifican la disposición de los datos cuando se
compilan. (Nota: En su lugar, utilice UDT).

8093

Nota: Este código de error solo existe en las CPU S7-1500.
En el parámetro SRCBLK no se ha indicado ningún bloque de datos o se ha indicado uno que no se
encuentra en la memoria de trabajo.

80B1

Nota: Este código de error solo existe en las CPU S7-1500.
En el parámetro DSTBLK solo se admiten bloques de datos que se encuentren en la memoria de carga.

82B1

Nota: Este código de error solo existe en las CPU S7-1200.
En el parámetro SRCBLK no se ha indicado ningún bloque de datos.

85B1

Nota: Este código de error solo existe en las CPU S7-1200.
En el parámetro DSTBLK no se ha indicado ningún bloque de datos o el bloque de datos indicado no se
encuentra en la memoria de carga.

80B4

● La Memory Card tiene activada la protección contra escritura.
● El DB con atributo F no debe leerse.

80BB

No hay suficiente memoria de carga disponible.

82C0

Nota: Este código de error solo existe en las CPU S7-1200.
El DB de origen está siendo procesado por otra instrucción o por una instrucción de comunicación.

85C0

Nota: Este código de error solo existe en las CPU S7-1200.
El DB de destino está siendo procesado por otra instrucción o por una instrucción de comunicación.

80C3

El número máximo de instrucciones "WRIT_DBL" activas simultáneamente ya se ha alcanzado en este
momento.

Programación del PLC
Manual de programación y manejo, 11/2019

2925

Instrucciones
4.1 Instrucciones
Código de error* Descripción
(W#16#...)
Códigos de
error generales

Consulte también: GET_ERR_ID: Consultar ID de error localmente (Página 933)

* Los códigos de error en el editor de programas se representan como valores enteros o hexadecimales. Encontrará más
información sobre el cambio de los formatos de visualización en "Consulte también".

Ejemplo
En el siguiente ejemplo se transferirá el contenido de un DB de la memoria de trabajo a un DB
de la memoria de carga. Para comprobar que la transferencia al DB se haya realizado
correctamente, lea el contenido en otro DB de la memoria de trabajo.
Para almacenar los datos de la interconexión es preciso crear cinco variables en un bloque de
datos global.

Para almacenar los datos que deben transferirse es preciso crear tres bloques de datos
globales con una variable "myData" cada uno (tipo de datos Array of INT):
● Un DB para datos de transmisión en la memoria de trabajo (SLI_srcDB_WRIT_DBL).

● Un DB para datos de recepción en la memoria de carga (SLI_dstDB_WRIT_DBL).
● Un DB para datos de recepción en la memoria de trabajo (SLI_finDB_WRIT_DBL).
Segmento 1:
Los parámetros de la instrucción "WRIT_DBL" se interconectan del siguiente modo.

2926

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Segmento 2:
Los parámetros de la instrucción "READ_DBL" se interconectan del siguiente modo.

Segmento 3:
La variable "execute" se desactiva del siguiente modo.

Instrucción "WRIT_DBL":
Si el contacto NA ("execute") devuelve el estado lógico "TRUE", se ejecuta la instrucción
"WRIT_DBL". Mediante el parámetro de entrada SRCBLK ("SLI_srcDB_WRIT_DBL.myData"),
el DB está almacenado en la memoria de trabajo. Mediante el parámetro de salida DSTBLK
("SLI_dstDB_WRIT_DBL.myData"), el DB está almacenado en la memoria de carga.
La instrucción "WRIT_DBL" llama los datos de la memoria de trabajo que deben transferirse
(SRCBLK) y escribe los datos en el lugar deseado de la memoria de carga (DSTBLK). En el

Programación del PLC
Manual de programación y manejo, 11/2019

2927

Instrucciones
4.1 Instrucciones
parámetro de salida RET_VAL ("returnValue") se indica que la ejecución se ha realizado sin
errores.

Instrucción "READ_DBL":
Si el procesamiento de WRIT_DBL se ha realizado sin errores y el contacto NA ("execute")
devuelve el estado lógico "TRUE", se ejecuta la instrucción "READ_DBL". Mediante el
parámetro de entrada SRCBLK ("SLI_dstDB_WRIT_DBL.myData"), el DB se almacena en la
memoria de carga. Mediante el parámetro de salida DSTBLK
("SLI_finDB_WRIT_DBL.myData"), el DB está almacenado para los datos de recepción.
La instrucción "READ_DBL" llama los datos de la memoria de carga que deben transferirse
(SRCBLK) y lee los datos en el lugar deseado de la memoria de trabajo (DSTBLK). En el
parámetro de salida RET_VAL ("readRetVal") se indica que la ejecución se ha realizado sin
errores.

El DB para los datos de recepción en la memoria de trabajo (SLI_finDB_WRIT_DBL) muestra
los datos transferidos.

2928

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Una vez ejecutada correctamente READ_DBL se desactiva la variable "execute" (ver
segmento 3). Se detiene la ejecución de READ_DBL y WRIT_DBL.
Código del programa
Encontrará información adicional y el código del programa del ejemplo anterior aquí: Sample
Library for Instructions (Página 615).

Consulte también
Cambiar formatos de visualización en el estado del programa (Página 8529)

ATTR_DB: Leer atributos de un bloque de datos
Descripción
La instrucción "ATTR_DB" permite obtener información sobre un bloque de datos (DB)
residente en la memoria de trabajo de la CPU. La instrucción determina para el DB
seleccionado los atributos especificados en el parámetro ATTRIB.
No se puede leer la longitud de bloques de datos con acceso optimizado ni de bloques de datos
que solo existen en la memoria de carga. En esos casos, el parámetro DB_LENGTH contiene
el valor "0".
No aplique ATTR_DB a bloques de datos con acceso optimizado y reserva de memoria
activada.
No lea los bloques de datos para Motion Control con la instrucción "ATTR_DB". Para esos
bloques de datos se devuelve el código de error 80B2.

Parámetros
La tabla siguiente muestra los parámetros de la instrucción "ATTR_DB":
Parámetro

Declaración Tipo de da‐ Área de memoria
tos

Descripción

REQ

Input

BOOL

I, Q, M, D, L o constante REQ = 1: orden de lectura de los atributos del bloque

DB_NUM‐
BER

Input

DB_ANY

I, Q, M, D, L o constante Número del DB que se va a probar

RET_VAL

Output

INT

I, Q, M, D, L

Programación del PLC
Manual de programación y manejo, 11/2019

Información de error

2929

Instrucciones
4.1 Instrucciones
Parámetro

Declaración Tipo de da‐ Área de memoria
tos

DB_LENGTH Output

UDINT

I, Q, M, D, L

Descripción
● Número de bytes de datos que contiene el DB
seleccionado.
● "0" para bloques de datos con acceso optimizado
y bloques de datos que solo existen en la memoria
de carga.

ATTRIB

Output

BYTE

I, Q, M, D, L

Propiedades del DB:
● Bit 0* = 0: Atributo "Depositar solo en la memoria
de carga" no activado.
● Bit 0* = 1: Atributo "Depositar solo en la memoria
de carga" activado.
● Bit 1 = 0: Atributo "Bloque de datos protegido
contra escritura en el dispositivo" no activado.
● Bit 1 = 1: Atributo "Bloque de datos protegido
contra escritura en el dispositivo" activado.
Si el bit 0 = 1, el bit 2 es irrelevante y obtiene el valor 1.
● Bit 2 = 0: Remanente: el DB se considera
remanente si se ha ajustado como remanente al
menos un valor.
● Bit 2 = 1: No remanente: El DB completo no es
remanente.
● Bit 3* = 0: el DB se encuentra en la memoria de
carga (bit 0 = 1) o en la memoria de trabajo (bit 0 =
0).
● Bit 3* = 1: el DB se encuentra en la memoria de
carga y en la memoria de trabajo.

* La relación entre el bit 0 y el bit 3 se explica en los parámetros de la instrucción "CREATE_DB: Generar bloque de datos
(Página 2915)".

Encontrará más información sobre los tipos de datos válidos en "Vista general de los tipos de
datos válidos (Página 241)".

Parámetro RET_VAL
Código de
error*
(W#16#...)

Explicación

0000

No se ha producido ningún error.

80A1

Error en el parámetro de entrada DB_NUMBER: el parámetro actual seleccionado
● tiene el valor "0"
● es mayor que el número de DB máximo posible en la CPU utilizada.

80B1

El DB con el número indicado no está cargado en la CPU.

80B2

No se puede acceder a los DB de los objetos tecnológicos Motion Control con la instrucción "ATTR_DB".

* Los códigos de error se representan como valores enteros o hexadecimales en el editor de programas. Encontrará más
información sobre el cambio de los formatos de visualización en "Consulte también".

2930

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Ejemplo
En el ejemplo siguiente se leerá el estado de un bloque de datos.
Cree un DB con una variable "myData" (tipo de datos Array[0..3] of INT).

Para un acceso estándar desactive el acceso optimizado a datos en las propiedades del DB.

Para almacenar los datos de la interconexión es preciso crear cuatro variables en un bloque de
datos global.

Interconectar parámetro: FC "SLI_itemiseByte_ATTR_DB"
Para poder evaluar mejor el valor del parámetro de salida ATTRIB, cree la FC
"SLI_itemiseByte_ATTR_DB".
En ella se crean las siguientes variables locales.

Segmento 1: Siguiendo el ejemplo del segmento 1 se crean interconexiones para todos los bits
(0..7) de la variable local.

Programación del PLC
Manual de programación y manejo, 11/2019

2931

Instrucciones
4.1 Instrucciones

Interconectar parámetro: FB "SLI_FB_ATTR_DB"
Se crea un FB "SLI_FB_ATTR_DB" para la llamada de ATTR_DB. En él se crean las siguientes
variables locales.

Segmento 1: Los parámetros de la instrucción "ATTR_DB" se interconectan del siguiente
modo.

Segmento 2: La FC "SLI_itemiseByte_ATTR_DB" se interconecta del siguiente modo.

Resultado del FB "SLI_FB_ATTR_DB"
Si el contacto NA ("startAttr") devuelve el estado lógico "TRUE", se ejecuta la instrucción
"ATTR_DB". En el parámetro de entrada DB_NUMBER ("SLI_srcDB_ATTR_DB") está
almacenado el número del DB que debe evaluarse. La instrucción "ATTR_DB" llama el DB por
su número y emite su estado en el parámetro de salida ATTRIB ("#statAttrByte"). En el
parámetro de salida DB_LENGTH ("readLenByte") se emite la longitud de los datos leídos (4
INT) del bloque de datos en BYTE (valor "8").

2932

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
El valor hexadecimal del parámetro de salida ATTRIB se convierte en una secuencia de bits
mediante la FC "SLI_itemiseByte_ATTR_DB". La secuencia de bits "00110000" (bit 0..7)
significa:
● El DB no se encuentra únicamente en la memoria de carga.
● El DB no está protegido contra escritura.
● El DB no es remanente.
● El DB está generado tanto en la memoria de carga como en la de trabajo.
En el parámetro de salida RET_VAL ("attrRetVal") se indica que la ejecución se ha realizado
sin errores.

Código del programa
Encontrará información adicional y el código del programa para el ejemplo anterior aquí:
Sample Library for Instructions (Página 615).

Consulte también
Cambiar formatos de visualización en el estado del programa (Página 8529)

DELETE_DB: Borrar bloque de datos
Descripción
Con la instrucción "DELETE_DB" se borra un bloque de datos (DB) que no haya sido creado
llamando la instrucción "CREATE_DB (Página 2915)" desde el programa de usuario.
Si el bloque de datos no se ha creado con "CREATE_DB", el parámetro RET_VAL devuelve el
código de error W#16#80B5.
El bloque de datos seleccionado no se borra de inmediato sino en el punto de control de ciclo
tras ejecutar el OB de ciclo.

Programación del PLC
Manual de programación y manejo, 11/2019

2933

Instrucciones
4.1 Instrucciones

Funcionamiento
La instrucción "DELETE_DB" es una instrucción que funciona de forma asíncrona. Su
ejecución se prolonga a lo largo de varias llamadas. Para iniciar la transferencia de alarma,
debe llamarse la instrucción con REQ = 1.
Mediante el parámetro de salida BUSY y los bytes 2 y 3 del parámetro de salida RET_VAL se
muestra el estado de la petición.
Cuando el parámetro de salida BUSY ha adoptado el valor FALSE, el borrado del bloque de
datos se puede dar por finalizado.

Parámetros
La tabla siguiente muestra los parámetros de la instrucción "DELETE_DB":
Parámetro

Declaración

Tipo de
datos

Área de memoria

Descripción

REQ

Input

BOOL

I, Q, M, D, L o constante

REQ =1: Solicitud de borrado del DB con número
en el parámetro DB_NUMBER

DB_NUMBER

Input

UINT

I, Q, M, D, L o constante

Número del DB que se va a borrar

RET_VAL

Output

INT

I, Q, M, D, L

Información de error (véase "Parámetro
RET_VAL")

BUSY

Output

BOOL

I, Q, M, D, L

BUSY =1: la operación todavía no ha finalizado.

Encontrará más información sobre los tipos de datos válidos en "Vista general de los tipos de
datos válidos (Página 241)".

Parámetro RET_VAL
Código de
error*
(W#16#...)

Explicación

0000

No se ha producido ningún error.

7000

Primera llamada con REQ = 0: Ninguna transmisión de datos activa; BUSY tiene el valor "0".

7001

Primera llamada con REQ = 1: transmisión de datos iniciada; BUSY tiene el valor "1".

7002

Llamada intermedia (REQ irrelevante): Transmisión de datos activa; BUSY tiene el valor "1".

80A1

Error en el parámetro de entrada DB_NUMBER:
● El valor del parámetro es "0".
● El valor del parámetro es mayor que el número de DB máximo posible en la CPU utilizada.

80B1

El DB con el número indicado no está cargado en la CPU.

80B4

El DB no se puede borrar porque la Memory Card de la CPU tiene activada la protección contra escritura.

80B5

El DB no se creó con "CREATE_DB" .

80BB

Memoria de carga libre insuficiente.

80C3

La función "Borrar un DB" no puede ejecutarse en este momento debido a escasez temporal de recursos.

Información de
error general

Consulte también: GET_ERR_ID: Consultar ID de error localmente (Página 933)

* Los códigos de error en el editor de programas se representan como valores enteros o hexadecimales. Encontrará más
información sobre el cambio de los formatos de visualización en "Consulte también".

2934

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Ejemplo
Encontrará el ejemplo aquí: Ejemplo de programa para funciones CREATE (Página 2935).
Encontrará información adicional y el código del programa para el ejemplo aquí: Sample
Library for Instructions (Página 615).

Consulte también
Cambiar formatos de visualización en el estado del programa (Página 8529)
Diferencia entre las instrucciones que funcionan síncronamente y las que funcionan
asíncronamente (Página 618)

Ejemplo de programa para funciones CREATE
Introducción
En el ejemplo siguiente se creará un DB en la memoria de carga, se leerá su contenido y se
borrará el DB a continuación.

Requisitos
Como plantilla del nuevo DB cree un DB global ("SLI_srcDB_CREATE_DB").

Las propiedades del DB son las siguientes.

Para almacenar los datos de la interconexión es preciso crear 14 variables en un bloque de
datos global ("SLI_gDB_CREATE_DB").

Programación del PLC
Manual de programación y manejo, 11/2019

2935

Instrucciones
4.1 Instrucciones

Para almacenar los datos deben crearse además las siguientes variables locales en el FB
"SLI_FB_CREATE_DB".

Interconectar parámetro: FC "SLI_itemiseByte_CRDfunctions"
Para convertir los valores de la variable "setAttrBool" a la variable "#statAttByte", debe crearse
la FC "SLI_itemiseByte_CRDfunctions".
En ella se crean las siguientes variables locales.

Segmento 1: Siguiendo el ejemplo del segmento 1 se crean interconexiones para todos los bits
(0..7) de la variable local.

2936

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Interconectar parámetro: FB "SLI_FB_CREATE_DB"
Segmento 1: Los parámetros de la FC "SLI_itemiseByte_CRDfunctions" se interconectan del
siguiente modo.

Segmento 2: Los parámetros de la instrucción "CREATE_DB" se interconectan del siguiente
modo.

Segmento 3: Para guardar el número del DB recién creado, cree las interconexiones
siguientes.

Programación del PLC
Manual de programación y manejo, 11/2019

2937

Instrucciones
4.1 Instrucciones

Segmento 4: Para finalizar la ejecución de CREATE_DB, cree las interconexiones siguientes.

Segmento 5: Los parámetros de la instrucción "READ_DBL" se interconectan del siguiente
modo.

Segmento 6: Para finalizar la ejecución de READ_DBL, cree las interconexiones siguientes.

Segmento 7: Los parámetros de la instrucción "DELETE_DB" se interconectan del siguiente
modo.

2938

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Segmento 8: Para finalizar la ejecución de DELETE_DB, cree las interconexiones siguientes.

Resultado del segmento 1
Con la FC "SLI_itemiseByte_CRDfunctions" se convierten las propiedades de DB
("setAttrBool") del tipo de datos Array of BOOL a BYTE ("#statAttByte").

Resultado del segmento 2 - instrucción "CREATE_DB"
Si el contacto NA ("startCreate") devuelve el estado lógico "TRUE", se ejecuta la instrucción
"CREATE_DB". En función del parámetro de entrada COUNT ("setLenByte") se crea un DB
nuevo con una longitud de 8 bytes. En el parámetro de entrada LOW_LIMIT ("lowLim") o
UP_LIMIT ("hiLim") está especificado el número del DB que debe crearse. En el parámetro de
entrada ATTR ("#statAttByte") están almacenadas las propiedades (en BYTE) con las que
debe crearse el DB. Así, por ejemplo, el DB solo debe crearse en la memoria de carga y
rellenarse con un contenido definido. Como plantilla para el contenido del nuevo DB hay un DB
almacenado en el parámetro de entrada SRCBLK ("SLI_srcDB_CREATE_DB.myData").
En el parámetro de salida RET_VAL ("CreateRetVal") se indica que la ejecución se ha
realizado sin errores. La instrucción "CREATE_DB" permanece inactiva tras su ejecución
("createRetVal" tiene el valor 16#7000"). En el parámetro de salida DB_NUM ("#nbrNewDB")
se emite brevemente el número del DB nuevo al finalizar la ejecución.

Programación del PLC
Manual de programación y manejo, 11/2019

2939

Instrucciones
4.1 Instrucciones

Resultado del segmento 3
Si el procesamiento de CREATE_DB se ha realizado sin errores, "createRetVal" tiene el valor
"16#0000". Como consecuencia se guarda el número ("#nbrNewDB") del DB en la variable
"memNbrNewDB".

2940

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Resultado del segmento 4
Si CREATE_DB en el parámetro ENO ("#tempCreate") devuelve el estado lógico "TRUE", la
interconexión del segmento 4 está activa. Si, además, el procesamiento de CREATE_DB se
ha realizado sin errores, el reseteador ("startCreate") se pone a "TRUE" y finaliza la ejecución
de CREATE_DB.

Resultado del segmento 5 - instrucción "READ_DBL"
Para ejecutar READ_DBL existen las condiciones siguientes:
● CREATE_DB está inactivo ("createRetVal" tiene el valor "16#7000").
● CREATE_DB ha generado un DB nuevo cuyo número se ha guardado ("memNbrNewDB"
tiene un valor > 0).

Si el contacto NA ("startRead") devuelve el estado lógico "TRUE", se ejecuta la instrucción
"READ_DBL". Mediante el parámetro de entrada SCRBLK, el DB recién creado está
referenciado en la memoria de carga. Mediante el parámetro de salida DSTBLK, el DB está
referenciado en la memoria de trabajo ("SLI_srcDB_CREATE_DB.readData"). La instrucción

Programación del PLC
Manual de programación y manejo, 11/2019

2941

Instrucciones
4.1 Instrucciones
"READ_DBL" llama los datos de la memoria de carga que deben transferirse (SCRBLK) y lee
los datos en el lugar deseado de la memoria de trabajo (DSTBLK).
En el parámetro de salida RET_VAL ("rdblRetVal") se indica que la ejecución se ha realizado
sin errores. En el DB de la memoria de trabajo ("SLI_srcDB_CREATE_DB.readData") se
muestran los datos transferidos.

Resultado del segmento 6
Si READ_DBL en el parámetro ENO ("#tempRead") devuelve el estado lógico "TRUE", la
interconexión del segmento 6 está activa. Si, además, el procesamiento de READ_DBL ha
finalizado, el reseteador ("startRead") se pone a "TRUE" y finaliza la ejecución de READ_DBL.

Resultado del segmento 7 - instrucción "DELETE_DB"
Para ejecutar DELETE_DB existen las condiciones siguientes:
● CREATE_DB está inactivo ("createRetVal" tiene el valor "16#7000").
● CREATE_DB ha generado un DB nuevo cuyo número se ha guardado ("memNbrNewDB"
tiene un valor > 0).

Si el contacto NA ("startDelete") devuelve el estado lógico "TRUE", se ejecuta la instrucción
"DELETE_DB". Mediante el parámetro de entrada DB_NUMBER ("memNbrNewDB"), el DB

2942

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
recién creado está referenciado por su número. La instrucción "DELETE_DB" borra el DB
recién creado.
En el parámetro de salida RET_VAL ("deleteRetVal") se indica que la ejecución se ha realizado
sin errores.

Resultado del segmento 8
Si DELETE_DB en el parámetro ENO ("#tempRead") devuelve el estado lógico "TRUE", la
interconexión del segmento 8 está activa. Si, además, el procesamiento de DELETE_DB ha
finalizado, el reseteador ("startDelete") se pone a "TRUE" y finaliza la ejecución de
DELETE_DB.
Una vez ejecutada DELETE_DB se borra el primer bloque creado. Para impedir que se pueda
ordenar el borrado de un bloque ya borrado, adicionalmente se pone a "0" la variable
"memNbrNewDB".

Código del programa
Encontrará información adicional y el código del programa del ejemplo anterior aquí: Sample
Library for Instructions (Página 615).

4.1.4.14

Direccionamiento

Instrucciones para convertir direcciones
Descripción
Existen distintas posibilidades de direccionar un módulo (dirección ES, ID de hardware, slot).
Los datos de la dirección se pueden convertir con las siguientes instrucciones:
● GEO2LOG: Determinar la ID de hardware a partir del slot (Página 2944)
● LOG2GEO: Determinar el slot a partir de la ID de hardware (Página 2947)
● LOG2MOD: Determinar la ID de hardware a partir del direccionamiento de STEP 7 V5.5
SPx (Página 2949)
● IO2MOD: Determinar la ID de hardware a partir de una dirección ES (Página 2950)
● RD_ADDR: Determinar las direcciones ES a partir de la ID de hardware (Página 2953)
En los proyectos migrados se permiten también las siguientes instrucciones:
● GEO_LOG: Determinar la ID de hardware a partir del slot (Página 2957)
● LOG_GEO: Determinar el slot a partir de la ID de hardware (Página 2958)
● RD_LGADR: Determinar las direcciones ES a partir de la ID de hardware (Página 2960)
● GADR_LGC: Determinar la ID de hardware a partir del slot y del offset del área de
direcciones de datos de usuario. (Página 2961)
● LGC_GADR: Determinar el slot a partir de la ID de hardware (Página 2963)

Programación del PLC
Manual de programación y manejo, 11/2019

2943

Instrucciones
4.1 Instrucciones

Tipo de conversión de dirección
La figura siguiente muestra qué instrucción ejecuta qué conversión.

1RPEUH

7LSR

*(2/2*

6)&

/2**(2

6)&

/2*02'

6)&

,202'

6)&

5'B$''5

6)&

*(2B/2*

)&

/2*B*(2

)&

5'B/*$'5

)&

*$'5B/*&

)&

/*&B*$'5

)&

'LUHFFLµQ HV (6

,GHQWLILFDGRUGH
KDUGZDUH

6ORW

GEO2LOG: Determinar la ID de hardware a partir del slot
Descripción
Con la instrucción "GEO2LOG" se determina la ID de hardware a partir de los datos de slot que
se definen mediante el tipo de datos de sistema GEOADDR.
En función del tipo de hardware que se defina en el parámetro HWTYPE se evaluará la
siguiente información del resto de los parámetros de GEOADDR:
● Si HWTYPE = 1 (sistema IO):
– Solo se evaluará IOSYSTEM. El resto de los parámetros de GEOADDR no se tienen en
cuenta.
– Se muestra el identificador HW del sistema IO.
● Si HWTYPE = 2 (dispositivo IO):
– Se evaluarán IOSYSTEM y STATION. El resto de los parámetros de GEOADDR no se
tienen en cuenta.
– Se muestra el identificador HW del dispositivo IO.

2944

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
● Con HWTYPE = 4 (módulo):
– Se evaluarán IOSYSTEM, STATION y SLOT. El parámetro SUBSLOT de GEOADDR
no se tiene en cuenta.
– Se muestra la ID de hardware del módulo.
● Con HWTYPE = 5 (submódulo):
– Todos los parámetros son evaluados por GEOADDR.
– Se muestra la ID de hardware del submódulo.
El parámetro AREA del tipo de datos de sistema GEOADDR no se evaluará.

Parámetros
La tabla siguiente muestra los parámetros de la instrucción "GEO2LOG":
Parámetro

Declaración

Tipo de datos

Área de memoria

Descripción

GEOADDR

Input

VARIANT

D, L

Puntero hacia la estructura del tipo de datos de
sistema GEOADDR.
El tipo de datos de sistema contiene los datos
de slot a partir de los cuales se determina la ID
de hardware.
Consulte también: Tipo de datos de sistema
GEOADDR (Página 2956)

RET_VAL

Return

INT

I, Q, M, D, L

Salida de la información de error.

LADDR

Output

HW_ANY

I, Q, M, D, L

Identificador de hardware del módulo o sub‐
módulo.
Este número se asigna automáticamente.

Encontrará más información sobre los tipos de datos válidos en "Vista general de los tipos de
datos válidos (Página 241)".

Parámetro RET_VAL
Código de
error*
(W#16#...)

Explicación

0

No se ha producido ningún error.

8091

Valor no válido en GEOADDR para HWTYPE.

8094

Valor no válido en GEOADDR para IOSYSTEM.

8095

Valor no válido en GEOADDR para STATION.

8096

Valor no válido en GEOADDR para SLOT.

8097

Valor no válido en GEOADDR para SUBSLOT.

* Los códigos de error en el editor de programas se representan como valores enteros o hexadecimales. Encontrará más
información sobre el cambio de los formatos de visualización en "Consulte también".

Programación del PLC
Manual de programación y manejo, 11/2019

2945

Instrucciones
4.1 Instrucciones

Ejemplo
En el siguiente ejemplo se determinará el identificador de hardware de la CPU en base a la
información de slot.
Para almacenar los datos es preciso crear cuatro variables en un bloque de datos global.

Los parámetros de la instrucción se interconectan del siguiente modo.

Si el contacto NA ("execute") devuelve el estado lógico "TRUE", se ejecuta la instrucción
"GEO2LOG". En el parámetro de entrada GEOADDR ("geoAddr") está almacenada la
información del slot. La instrucción "GEO2LOG" llama el identificador de hardware para un
módulo (HWTYPE con el valor "4") del aparato central (IOSYSTEM con el valor "0") en el rack
"0" (valor con STATION), en el slot "1" (valor con SLOT).
El identificador de hardware determinado para el componente local de la CPU se muestra en
el parámetro de salida LADDR ("laddr"). En el parámetro de salida RET_VAL ("returnValue")
se indica que la ejecución se ha realizado sin errores.

2946

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Encontrará información adicional y el código del programa del ejemplo anterior aquí: Sample
Library for Instructions (Página 615).

Consulte también
Cambiar formatos de visualización en el estado del programa (Página 8529)
Instrucciones para convertir direcciones (Página 2943)

LOG2GEO: Determinar el slot a partir de la ID de hardware
Descripción
La instrucción "LOG2GEO" determina el slot de módulo correspondiente a una ID de hardware.

Parámetros
La tabla siguiente muestra los parámetros de la instrucción "LOG2GEO":
Parámetro

Declaración

Tipo de datos

Área de memoria

Descripción

LADDR

Input

HW_ANY

I, Q, M, D, L o cons‐
tante

Identificador de hardware del módulo cuyo slot
se desea determinar.
El identificador de hardware se asigna auto‐
máticamente y se guarda en las constantes de
sistema.

RET_VAL

Output

INT

I, Q, M, D, L

Salida de la información de error.

GEOADDR

InOut

VARIANT

D, L

Puntero hacia el tipo de datos de sistema
GEOADDR.
En el tipo de datos de sistema GEOADDR se
escriben los datos de slot.
Consulte también: Tipo de datos de sistema
GEOADDR (Página 2956)

Encontrará más información sobre los tipos de datos válidos en "Vista general de los tipos de
datos válidos (Página 241)".

Programación del PLC
Manual de programación y manejo, 11/2019

2947

Instrucciones
4.1 Instrucciones

Parámetro RET_VAL
Código de
error*
(W#16#...)

Explicación

0

No se ha producido ningún error.

8090

La dirección indicada en el parámetro LADDR no es válida.

* Los códigos de error en el editor de programas se representan como valores enteros o hexadecimales. Encontrará más
información sobre el cambio de los formatos de visualización en "Consulte también".

Ejemplo
En el siguiente ejemplo se determinará la información de slot de un módulo de entradas en
base al identificador de hardware.
Para almacenar los datos es preciso crear cuatro variables en un bloque de datos global.

Los parámetros de la instrucción se interconectan del siguiente modo.

Si el contacto NA ("execute") devuelve el estado lógico "TRUE", se ejecuta la instrucción
"LOG2GEO". En el parámetro de entrada LADDR ("laddr") está almacenado el identificador de
hardware del módulo de entrada. La instrucción "LOG2GEO" llama la información de slot del
módulo de entradaa por medio del identificador de hardware.
La información de slot determinada para el módulo de entradas se muestra en el parámetro de
salida GEOADDR ("geoAddr"). Se determina un módulo (HWTYPE con el valor "4") del

2948

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
aparato central (IOSYSTEM con el valor "0") en el rack "0" (valor con STATION), en el slot "2"
(valor con SLOT).
En el parámetro de salida RET_VAL ("returnValue") se indica que la ejecución se ha realizado
sin errores.

Encontrará información adicional y el código del programa del ejemplo anterior aquí: Sample
Library for Instructions (Página 615).

Consulte también
Cambiar formatos de visualización en el estado del programa (Página 8529)

LOG2MOD: Determinar la ID de hardware a partir del direccionamiento de STEP 7 V5.5 SPx
Descripción
La instrucción "LOG2MOD" determina la ID de hardware para un (sub)módulo E/S a partir del
direccionamiento de STEP 7 5.5 SPx (dirección de datos E/S o dirección de diagnóstico).
Distintas instrucciones utilizan la ID de hardware en el parámetro de entrada LADDR para el
direccionamiento. Mediante la llamada anterior de "LOG2MOD" se convierten los parámetros
de direccionamiento de STEP 7 5.5 SPx.

Programación del PLC
Manual de programación y manejo, 11/2019

2949

Instrucciones
4.1 Instrucciones

Parámetros
La tabla siguiente muestra los parámetros de la instrucción "LOG2MOD":
Parámetro

Declaración

Tipo de datos

Área de memoria

Descripción

IOID

Input

BYTE

I, Q, M, D, L o cons‐
tante

Identificación del área de direcciones como en
STEP 7 5.5 SPx:
● B#16#00: El bit 15 de ADDR indica si se
trata de una dirección de entrada (bit 15 =
0) o de salida (bit15 = 1).
● B#16#54 = entrada de periferia (PI)
● B#16#55 = salida de periferia (PQ)

ADDR

Input

WORD

I, Q, M, D, L o cons‐
tante

Dirección lógica de los datos E/S del módulo
como offset (conforme al direccionamiento en
STEP 7 5.5 SPx) o dirección de diagnóstico.

RET_VAL

Return

INT

I, Q, M, D, L

Código de error de la instrucción.

HWID

Output

HW_IO

I, Q, M, D, L

Identificador de hardware determinado del
(sub)módulo E/S.

Encontrará más información sobre los tipos de datos válidos en "Vista general de los tipos de
datos válidos (Página 241)".

Parámetro RET_VAL
Código de
error*
(W#16#...)

Explicación

0

No se ha producido ningún error.

8093

● Ningún componente de hardware utiliza la dirección indicada.
● El valor indicado en el parámetro IOID no es válido.

* Los códigos de error en el editor de programas se representan como valores enteros o hexadecimales. Encontrará más
información sobre el cambio de los formatos de visualización en "Consulte también".

Consulte también
Cambiar formatos de visualización en el estado del programa (Página 8529)

IO2MOD: Determinar la ID de hardware a partir de una dirección ES
Descripción
La instrucción "IO2MOD" determina el identificador HW a partir de una dirección E/S (I, Q, PI,
PQ) de un módulo.
En el parámetro ADDR se introduce la dirección E/S.
- Si se utilizan varias direcciones E/S en este parámetro, para determinar el ID de hardware
solo se evaluará la primera dirección.

2950

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
- Si se indica la primera dirección correctamente, la longitud carece de importancia a la hora de
introducir la dirección en el parámetro ADDR.
- Si se utiliza un área de direcciones que contenga varios módulos o direcciones sin utilizar, se
puede determinar el ID de hardware del primer módulo.
- Si en el parámetro ADDR no se indica ninguna dirección E/S de un módulo, el parámetro
RET_VAL devuelve el código de error 8090.
Nota
Entrada de la dirección E/S en SCL
En SCL no se puede programar con el identificador de acceso a la periferia "%QWx:P". Utilice
en este caso el nombre simbólico de la variable o bien la dirección absoluta en la memoria
imagen de proceso.

Parámetros
La tabla siguiente muestra los parámetros de la instrucción "IO2MOD":
Parámetro

Declaración

Tipo de datos

Área de memoria

Descripción

ADDR

Input

VARIANT

I, Q

Dirección E/S (I, Q, PI, PQ) dentro de un mó‐
dulo.
Preste atención a que no se utilicen accesos
segmentados (slice) para el parámetro ADDR.
De lo contrario, el parámetro LADDR devuelve
valores incorrectos.

RET_VAL

Return

INT

I, Q, M, D, L

Código de error de la instrucción.

LADDR

Output

HW_IO

I, Q, M, D, L

Identificador HW obtenida (dirección lógica)
del módulo E/S.

Encontrará más información sobre los tipos de datos válidos en "Vista general de los tipos de
datos válidos (Página 241)".

Parámetro RET_VAL
Código de
error*
(W#16#...)

Explicación

0

No se ha producido ningún error.

8090

Ningún componente de hardware utiliza la dirección E/S indicada en el parámetro ADDR.

8092

Se ha utilizado un tipo de datos no válido en el parámetro ADDR (por ejemplo WCHAR o WSTRING).

* Los códigos de error se representan como valores enteros o hexadecimales en el editor de programas. Encontrará más
información sobre el cambio de los formatos de visualización en "Consulte también".

Ejemplo
En el siguiente ejemplo se determinará el identificador de hardware de un módulo de entradas
en base a una dirección E/S.

Programación del PLC
Manual de programación y manejo, 11/2019

2951

Instrucciones
4.1 Instrucciones
Para la lectura se crea una variable PLC en una tabla de variables.

Para almacenar los datos es preciso crear tres variables en un bloque de datos global.

Los parámetros de la instrucción se interconectan del siguiente modo.

Si el contacto NA ("execute") devuelve el estado lógico "TRUE", se ejecuta la instrucción
"IO2MOD". Mediante el parámetro de entrada ADDR ("SLI_IOtest") se transfiere la dirección
E/S que debe localizarse. La instrucción "IO2MOD" llama la dirección IO y lee el módulo de
entradas.
El identificador de hardware determinado para el módulo de entradas se muestra en el
parámetro de salida LADDR ("ioLaddr"). En el parámetro de salida RET_VAL ("returnValue")
se indica que la ejecución se ha realizado sin errores.

2952

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Encontrará información adicional y el código del programa del ejemplo anterior aquí: Sample
Library for Instructions (Página 615).

Consulte también
Cambiar formatos de visualización en el estado del programa (Página 8529)

RD_ADDR: Determinar las direcciones ES a partir de la ID de hardware
Descripción
La instrucción "RD_ADDR" determina la longitud y la dirección inicial de las entradas o salidas
a partir del ID de hardware de un (sub)módulo.
● Mediante el parámetro LADDR se selecciona el módulo de entrada o de salida a partir del
ID de hardware.
● Dependiendo de si se trata de un módulo de entrada o de salida, se utilizan los siguientes
parámetros de salida:
– En el caso de un módulo de entrada, se devuelven los valores determinados en los
parámetros PIADDR y PICOUNT.
– En el caso de un módulo de salida, se devuelven los valores determinados en los
parámetros PQADDR y PQCOUNT.
● Los parámetros PIADDR y PQADDR contienen respectivamente las direcciones iniciales
de las entradas y de las salidas del módulo.
● Los parámetros PICOUNT y PQCOUNT contienen respectivamente el número de bytes de
las entradas y salidas (1 byte con 8 entradas/salidas, 2 bytes con 16 entradas/salidas).
Nota
Determinación de las direcciones E/S en caso de direcciones comprimidas de un ET200
En caso de direcciones comprimidas de un ET200, el primer módulo del grupo comprimido
devuelve todas las direcciones.
Para el resto de los módulos, en los parámetros PIADDR y PQADDR se devuelve lo siguiente:
● en PROFINET como dirección "0"
● en PROFIBUS como dirección "0". Además, se devuelve el código de error W#16#8090.
Para el número de bytes de las entradas y salidas (parámetros PICOUNT y PQCOUNT) se
devuelve "0".

Programación del PLC
Manual de programación y manejo, 11/2019

2953

Instrucciones
4.1 Instrucciones

Parámetros
La tabla siguiente muestra los parámetros de la instrucción "RD_ADDR":
Parámetro

Declaración

Tipo de datos

Área de memoria

Descripción

LADDR

Input

HW_IO

I, Q, M, D, L o cons‐
tante

ID de hardware del (sub)módulo.

RET_VAL

Return

INT

I, Q, M, D, L

Código de error de la instrucción.

PIADDR

Output

UDINT

I, Q, M, D, L

Dirección inicial del módulo de entrada.

PICOUNT

Output

UINT

I, Q, M, D, L

Número de bytes de las entradas.

PQADDR

Output

UDINT

I, Q, M, D, L

Dirección inicial del módulo de salida.

PQCOUNT

Output

UINT

I, Q, M, D, L

Número de bytes de las salidas.

Encontrará más información sobre los tipos de datos válidos en "Vista general de los tipos de
datos válidos (Página 241)".

Parámetro RET_VAL
Código de
error*
(W#16#...)

Explicación

0

No se ha producido ningún error.

8090

El ID de hardware del módulo en el parámetro LADDR no es válida.

* Los códigos de error se representan como valores enteros o hexadecimales en el editor de programas. Encontrará más
información sobre el cambio de los formatos de visualización en "Consulte también".

Ejemplo
En el siguiente ejemplo se determinarán la longitud y dirección inicial de las entradas de un
módulo de entradas en base al identificador de hardware.
Para almacenar los datos es preciso crear siete variables en un bloque de datos global.

Los parámetros de la instrucción se interconectan del siguiente modo.

2954

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Si el contacto NA ("executeRead") devuelve el estado lógico "TRUE", se ejecuta la instrucción
"RD_ADDR". En el parámetro de entrada LADDR ("readLaddr") está almacenado el
identificador de hardware del módulo de entrada. La instrucción "RD_ADDR" utiliza el
identificador de hardware para determinar el módulo de entradas y lee la longitud de las
entradas y la dirección inicial.
La dirección inicial determinada se muestra en el parámetro de salida PIADDR ("piAddr"). El
número de bytes de las entradas se muestra en el parámetro de salida PICOUNT ("piCount").
En el parámetro de salida RET_VAL ("readRetVal") se indica que la ejecución se ha realizado
sin errores.

Encontrará información adicional y el código del programa del ejemplo anterior aquí: Sample
Library for Instructions (Página 615).

Consulte también
Cambiar formatos de visualización en el estado del programa (Página 8529)

Programación del PLC
Manual de programación y manejo, 11/2019

2955

Instrucciones
4.1 Instrucciones

Tipo de datos de sistema GEOADDR
Dirección geográfica
El tipo de datos de sistema GEOADDR contiene la dirección geográfica de un módulo, es decir,
los datos de slot.
● Dirección geográfica con PROFINET IO
En PROFINET IO, la dirección geográfica estaba compuesta por la ID del sistema
PROFINET IO, el número de dispositivo, el número de slot y el número de submódulo (en
caso de que se usara un submódulo).
● Dirección geográfica con PROFIBUS DP
En PROFIBUS DP, la dirección geográfica está compuesta por la ID del sistema maestro
DP, el número de estación y el número de slot.
Los datos de slot de los módulos figuran en la configuración hardware del módulo
correspondiente.

Tipo de datos de sistema GEOADDR
Si se introduce "GEOADDR" como tipo de datos en un bloque de datos, la estructura
GEOADDR se crea automáticamente.
El tipo de datos de sistema GEOADDR tiene la siguiente estructura:
Nombre de parámetro Tipo de datos
GEOADDR
HWTYPE

Descripción

STRUCT
UINT

Tipo de hardware:
● 1: Sistema IO (PROFINET/PROFIBUS)
● 2: Dispositivo IO/esclavo DP
● 3: Rack
● 4: Módulo
● 5: Submódulo
Si el tipo de hardware no es compatible con la instrucción, HWTYPE devuelve "0".

AREA

UINT

Identificación de área:
● 0 = módulo central
● 1 = PROFINET IO
● 2 = PROFIBUS DP
● 3 = AS-i

IOSYSTEM

UINT

Sistema PROFINET IO (0 = aparato central en el rack)

STATION

UINT

● AREA = 0 (módulo central):
–

CPU estándar: número de rack

–

Sistema R/H: ID de redundancia (1 o 2)

● AREA > 0: número de estación
SLOT

UINT

Número de slot

SUBSLOT

UINT

Número del submódulo. Si no está disponible o no se puede insertar ningún sub‐
módulo, este parámetro tiene el valor "0".

2956

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Legacy
GEO_LOG: Determinar la ID de hardware a partir del slot
Descripción
Supongamos que se conoce el slot de módulo correspondiente de un módulo de señales. La
instrucción "GEO_LOG" permite determinar a partir de ello la correspondiente ID de hardware
del módulo.

Parámetros
La tabla siguiente muestra los parámetros de la instrucción "GEO_LOG":
Parámetro

Declaración

Tipo de datos

Área de memoria

Descripción

MASTER

Input

INT

I, Q, M, D, L o cons‐
tante

Identificación de área:
● 0 si el slot se encuentra en una estructura
centralizada.
● de 1 a 32: ID de sistema maestro DP del
aparato de campo correspondiente, si el
slot se encuentra en un aparato de campo
conectado a PROFIBUS
● de 100 a 115: ID de sistema PROFINET IO
del aparato de campo correspondiente, si
el slot se encuentra en un aparato de
campo conectado a PROFINET

STATION

Input

INT

I, Q, M, D, L o cons‐
tante

● Si MASTER = 0: Número de rack
● Si MASTER > 0: Número de estación del
aparato de campo

SLOT

Input

INT

I, Q, M, D, L o cons‐
tante

Número de slot

SUBSLOT

Input

INT

I, Q, M, D, L o cons‐
tante

Número del submódulo. Si no está disponible
o no se puede enchufar ningún submódulo,
SUBSLOT debe tener el valor "0".

RET_VAL

Return

INT

I, Q, M, D, L

Información de error

LADDR

Output

HW_IO

I, Q, M, D, L

ID de hardware del módulo

Encontrará más información sobre los tipos de datos válidos en "Vista general de los tipos de
datos válidos (Página 241)".

Parámetro RET_VAL
Código de error* Explicación
(W#16#...)
0000

No se ha producido ningún error.

8094

No está configurada ninguna subred con la SUBNETID indicada.

8095

Valor no válido en el parámetro STATION

Programación del PLC
Manual de programación y manejo, 11/2019

2957

Instrucciones
4.1 Instrucciones
Código de error* Explicación
(W#16#...)
8096

Valor no válido en el parámetro SLOT

8097

Valor no válido en el parámetro SUBSLOT

Información de
error general

Consulte también: GET_ERR_ID: Consultar ID de error localmente (Página 933)

* Los códigos de error en el editor de programas se representan como valores enteros o hexadecimales. Encontrará más
información sobre el cambio de los formatos de visualización en "Consulte también".

Consulte también
Cambiar formatos de visualización en el estado del programa (Página 8529)
Instrucciones para convertir direcciones (Página 2943)

LOG_GEO: Determinar el slot a partir de la ID de hardware
Descripción
La instrucción "LOG_GEO" determina el slot de módulo correspondiente a una ID de hardware.

Parámetros
La tabla siguiente muestra los parámetros de la instrucción "LOG_GEO":
Parámetro

Declaración

Tipo de datos

Área de memoria

LADDR

Input

HW_IO

I, Q, M, D, L o constante ID de hardware del módulo cuyo slot se
debe determinar.

Descripción

RET_VAL

Return

INT

I, Q, M, D, L

Información de error

AREA

Output

INT

I, Q, M, D, L

La identificación de área indica cómo de‐
ben interpretarse los parámetros de sali‐
da restantes:
● 0: Aparato central
● 2: PROFIBUS DP/PROFINET IO

2958

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parámetro

Declaración

Tipo de datos

Área de memoria

Descripción

MASTER

Output

INT

I, Q, M, D, L

Con AREA = 0:
● 0: Si el slot se encuentra en uno de los
racks (aparato central).
Con AREA = 2:
● de 1 a 32: ID de sistema maestro DP
del aparato de campo
correspondiente, si el slot se
encuentra en un aparato de campo
conectado a PROFIBUS
● de 100 a 115: ID de sistema
PROFINET IO del aparato de campo
correspondiente, si el slot se
encuentra en un aparato de campo
conectado a PROFINET

STATION

Output

INT

I, Q, M, D, L

● Con MASTER = 0: Número de rack
● Con MASTER > 0: Número de
estación del aparato de campo

SLOT

Output

INT

I, Q, M, D, L

Número de slot

SUBSLOT

Output

INT

I, Q, M, D, L

Número del submódulo

OFFSET

Output

INT

I, Q, M, D, L

La instrucción no devuelve el parámetro
OFFSET (siempre "0").

Encontrará más información sobre los tipos de datos válidos en "Vista general de los tipos de
datos válidos (Página 241)".

Parámetro RET_VAL
Código de error* Explicación
(W#16#...)
0000

No se ha producido ningún error.

8090

La dirección lógica indicada no es válida

Información de
error general

Consulte también: GET_ERR_ID: Consultar ID de error localmente (Página 933)

* Los códigos de error en el editor de programas se representan como valores enteros o hexadecimales. Encontrará más
información sobre el cambio de los formatos de visualización en "Consulte también".

Consulte también
Cambiar formatos de visualización en el estado del programa (Página 8529)
Instrucciones para convertir direcciones (Página 2943)

Programación del PLC
Manual de programación y manejo, 11/2019

2959

Instrucciones
4.1 Instrucciones

RD_LGADR: Determinar las direcciones ES a partir de la ID de hardware
Descripción
La instrucción "RD_LGADR" permite determinar a partir de la ID de hardware las direcciones
E/S de un módulo, de un submódulo central o de un submódulo en PNIO y esclavos DP.
● La ID de hardware del submódulo se indica en el parámetro LADDR.
● Las direcciones se escriben en los parámetros PEADDR y PAADDR en orden ascendente.
– En un módulo de entradas solo se escribe el parámetro PEADDR. En un módulo de
salidas el parámetro PAADDR.
– Para guardar las direcciones se debe utilizar un Array of WORD, respectivamente.
● El número de direcciones se emite a través de los parámetros PECOUNT (en un módulo de
entradas) y PACOUNT (en un módulo de salidas).
Nota
Descripción de los campos PEADDR y PAADDR
En PEADDR o PAADDR se introduce únicamente el número de direcciones que se devuelve
(este número figura en PECOUNT y PACOUNT, respectivamente). Así pues, se conservan las
direcciones de anteriores llamadas de RD_LGADR que están después de las direcciones
suministradas actualmente; no está permitido evaluarlas en la llamada actual.
Nota
Determinación de las direcciones E/S en caso de direcciones comprimidas de un ET200
En caso de direcciones comprimidas de un ET200, el primer módulo del grupo comprimido
devuelve todas las direcciones.
Para el resto de los módulos, en los parámetros PEADDR y PAADDR se emite lo siguiente:
● en PROFINET como dirección "0"
● en PROFIBUS como dirección "0". Además, se devuelve el código de error W#16#8090.
Para el número de bytes de las entradas y salidas (parámetros PECOUNT y PACOUNT) se
devuelve "0".

Parámetros
La tabla siguiente muestra los parámetros de la instrucción "RD_LGADR":
Parámetro

Declaración

Tipo de datos

Área de memoria

Descripción

IOID

Input

BYTE

I, Q, M, D, L o constante No se evalúa

LADDR

Input

HW_ANY

I, Q, M, D, L o constante ID de hardware del módulo o del submódulo.

RET_VAL

Return

INT

I, Q, M, D, L

Información de error

PEADDR

Output

ANY

I, Q, M, D, L

Campo para las direcciones de entradas de
la periferia del tipo Array of WORD
Nota: El campo debe estar en el área de
memoria no optimizada.

2960

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parámetro

Declaración

Tipo de datos

Área de memoria

Descripción

PECOUNT

Output

INT

I, Q, M, D, L

Número de direcciones PI devueltas

PAADDR

Output

ANY

I, Q, M, D, L

Campo para las direcciones de salidas de la
periferia del tipo Array of WORD
Nota: El campo debe estar en el área de
memoria no optimizada.

PACOUNT

Output

INT

I, Q, M, D, L

Número de direcciones PQ devueltas

Encontrará más información sobre los tipos de datos válidos en "Vista general de los tipos de
datos válidos (Página 241)".

Parámetro RET_VAL
Código de error

Explicación

(W#16#...)
0000

No se ha producido ningún error.

8090

Identificación de hardware indicada no válida

80A0

Error en el parámetro de salida PEADDR: El tipo de datos de los elementos del campo no es WORD.

80A1

Error en el parámetro de salida PAADDR: El tipo de datos de los elementos del campo no es WORD.

80A2

Error en el parámetro de salida PEADDR: El campo indicado no puede alojar todas las direcciones lógicas.

80A3

Error en el parámetro de salida PAADDR: El campo indicado no puede alojar todas las direcciones lógicas.

Información de
error general

Consulte también: GET_ERR_ID: Consultar ID de error localmente (Página 933)

Consulte también
Cambiar formatos de visualización en el estado del programa (Página 8529)
Instrucciones para convertir direcciones (Página 2943)

GADR_LGC: Determinar la ID de hardware a partir del slot y del offset del área de direcciones de datos
de usuario.
Descripción
La instrucción "GADR_LGC" permite determinar la ID de hardware de un módulo de señales.
La ID de hardware se determina a partir del slot del módulo y del offset del área de direcciones
de datos de usuario del módulo.
Nota
Limitación de uso
No es posible utilizar la instrucción "GADR_LGC" para módulos situados detrás de pasarelas
(p. ej. IE/PB Link). En su lugar, utilice la instrucción "GEO2LOG".

Programación del PLC
Manual de programación y manejo, 11/2019

2961

Instrucciones
4.1 Instrucciones

Parámetros
La tabla siguiente muestra los parámetros de la instrucción "GADR_LGC":
Parámetro

Declaración

Tipo de datos

Área de memoria

Descripción

SUBNETID

Input

BYTE

I, Q, M, D, L o constante Identificación de área:
● 0: Si el slot se encuentra en el módulo
central
● de 1 a 32: ID de sistema maestro DP del
sistema de periferia descentralizada
correspondiente, si el slot se encuentra
en un sistema de periferia
descentralizada
● de 100 a 115: ID de sistema PROFINET
IO del aparato de campo
correspondiente, si el slot se encuentra
en un aparato de campo conectado a
PROFINET

RACK

Input

WORD

I, Q, M, D, L o constante ● Número del rack, si la identificación de
área es 0
● Número de estación del sistema de
periferia descentralizada, si la
identificación de área > 0

SLOT

Input

WORD

I, Q, M, D, L o constante Número de slot

SUBSLOT

Input

BYTE

I, Q, M, D, L o constante Irrelevante

SUBADDR

Input

WORD

I, Q, M, D, L o constante Offset en el área de direcciones de datos
útiles del módulo

RET_VAL

Return

INT

I, Q, M, D, L

Información de error

IOID

Output

BYTE

I, Q, M, D, L

El parámetro de salida IOID no se describe
(siempre "0").

LADDR

Output

HW_MODU‐
LE

I, Q, M, D, L

ID de hardware del módulo

Encontrará más información sobre los tipos de datos válidos en "Vista general de los tipos de
datos válidos (Página 241)".

Parámetro RET_VAL
Código de error* Explicación
(W#16#...)
0000

No se ha producido ningún error.

8094

No está configurada ninguna subred con la SUBNETID indicada.

8095

Valor no válido en el parámetro RACK.

8096

Valor no válido en el parámetro SLOT.

8098

Valor no válido en el parámetro SUBADDR.

2962

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Código de error* Explicación
(W#16#...)
Información de
error general

Consulte también: GET_ERR_ID: Consultar ID de error localmente (Página 933)

* Los códigos de error en el editor de programas se representan como valores enteros o hexadecimales. Encontrará más
información sobre el cambio de los formatos de visualización en "Consulte también".

Consulte también
Cambiar formatos de visualización en el estado del programa (Página 8529)
Instrucciones para convertir direcciones (Página 2943)

LGC_GADR: Determinar el slot a partir de la ID de hardware
Descripción
La instrucción "LGC_GADR" determina el slot de módulo correspondiente a una ID de
hardware.
Nota
Limitación de uso
No es posible utilizar la instrucción "LGC_GADR" para módulos situados detrás de pasarelas
(p. ej. IE/PB Link). En su lugar, utilice la instrucción "LOG2GEO".

Parámetros
La tabla siguiente muestra los parámetros de la instrucción "LGC_GADR":
Parámetro

Declaración

Tipo de datos

Área de memoria

IOID

Input

BYTE

I, Q, M, D, L o constante No se evalúa.

Descripción

LADDR

Input

HW_MODU‐
LE

I, Q, M, D, L o constante ID de hardware del módulo

RET_VAL

Return

INT

I, Q, M, D, L

Información de error

AREA

Output

BYTE

I, Q, M, D, L

La identificación de área indica cómo deben
interpretarse los parámetros de salida res‐
tantes:
● 0: Módulo central
● 2: PROFIBUS DP

RACK

Output

WORD

I, Q, M, D, L

Número de rack:
● En módulo central (AREA = 0):
–

Número de rack

● En PROFIBUS DP (AREA = 2):

Programación del PLC
Manual de programación y manejo, 11/2019

–

Low Byte: Número de estación

–

High Byte: ID del sistema maestro DP

2963

Instrucciones
4.1 Instrucciones
Parámetro

Declaración

Tipo de datos

Área de memoria

Descripción

SLOT

Output

WORD

I, Q, M, D, L

Número de slot:
● En módulo central (AREA = 0):
–

Número de slot

● En PROFIBUS DP (AREA = 2):
–
SUBADDR

Output

WORD

I, Q, M, D, L

Número de slot en la estación

No se devuelve (siempre "0").

Encontrará más información sobre los tipos de datos válidos en "Vista general de los tipos de
datos válidos (Página 241)".

Parámetro RET_VAL
Código de error*

Explicación

(W#16#...)
0000

No se ha producido ningún error.

8090

La dirección lógica indicada no es válida

8093

Esta instrucción no es válida para el módulo seleccionado mediante los parámetros IOID y LADDR .

Información de
error general

Consulte también: GET_ERR_ID: Consultar ID de error localmente (Página 933)

* Los códigos de error en el editor de programas se representan como valores enteros o hexadecimales. Encontrará más
información sobre el cambio de los formatos de visualización en "Consulte también".

Consulte también
Cambiar formatos de visualización en el estado del programa (Página 8529)
Instrucciones para convertir direcciones (Página 2943)

4.1.4.15

File Handling

FileReadC: Leer archivo de la Memory Card
Descripción
La instrucción "FileReadC" permite leer datos de un archivo que se encuentra en la Memory
Card y escribirlos en el área de destino de la CPU. El archivo se identifica por su nombre y su
ruta completa.
Mediante el parámetro de control REQ se activa la lectura del archivo. El estado de ejecución
de la petición se indica mediante los parámetros de salida Done, Busy, Error y Status.
Al nombre de archivo y a la ruta se aplican las reglas siguientes:
● El nombre del archivo no debe tener más de 55 caracteres.
● Para las carpetas y el nombre de archivo se admiten los caracteres siguientes: "0" … "9",
"a" … "z", "A" … "Z", "-", "_"

2964

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
● El nombre del archivo puede contener como máximo un punto ("."); el punto separa el
nombre de su extensión. El nombre de archivo debe contener al menos un carácter. No es
necesaria una extensión.
● La ruta no debe empezar por "/", por "\" ni por ".".
● En la ruta no está permitido el carácter "..".
Ejemplos de nombres de ruta o de archivo válidos: "UserFiles/Lift16_DataBase.txt", "UserFiles/
2017-04-13_ErrorLog.bin"
Ejecutando una vez "FileReadC" es posible leer como máximo 16 MB (16.777.216 bytes), por
lo que los datos se leerán por segmentos. El tamaño de los segmentos es específico de cada
dispositivo; p. ej. una CPU S7-1500 utiliza bloques de 32 kB (32.768 bytes). Si el número de
datos que van a leerse es mayor que el tamaño del segmento, habrá que llamar la instrucción
varias veces. Esto implica que, por razones de coherencia, no podrá accederse a los datos
leídos hasta la última llamada.
Los parámetros "Offset" y "Length" definen los datos que se leerán. Una vez terminado el
proceso de lectura se libera de nuevo el recurso ocupado.

Funcionamiento
La instrucción "FileReadC" es una instrucción que funciona de forma asíncrona. Su ejecución
se prolonga a lo largo de varias llamadas. La ejecución se inicia con flanco ascendente en el
parámetro "REQ".
El estado de la petición se indica con los parámetros "Busy" y "Done".
Si se produce algún error durante la ejecución, se indicará mediante los parámetros "Error" y
"Status".
Consulte también: Diferencia entre las instrucciones que funcionan síncronamente y las que
funcionan asíncronamente (Página 618)

Parámetros
La tabla siguiente muestra los parámetros de la instrucción "FileReadC":
Parámetro

Declaración

Tipo de datos

Descripción

REQ

Input

BOOL

Parámetro de control Request
Activa la lectura de un archivo de la Memory Card con flanco as‐
cendente.

Name

Input

STRING

Nombre del archivo que va a leerse, incl. la ruta completa

Offset

Input

UDINT

Offset de bytes a partir del cual debe leerse en el archivo

Length

Input

UDINT

Longitud en bytes del área que se debe leer
Length = 0 significa el número máximo de datos que es posible leer
en cada llamada (en una CPU S7-1500, 32 kB o el tamaño del pa‐
rámetro "Data")

Done

Output

BOOL

1: La instrucción se ha ejecutado correctamente.
La información leída se ha transferido al parámetro "Data".

Programación del PLC
Manual de programación y manejo, 11/2019

2965

Instrucciones
4.1 Instrucciones
Parámetro

Declaración

Tipo de datos

Descripción

Busy

Output

BOOL

Parámetro de estado
● 0: Ejecución de la instrucción finalizada o no iniciada.
● 1: Ejecución de la instrucción no finalizada.

Error

Output

BOOL

Parámetro de estado
● 0: Ningún error.
● 1: Se ha producido un error al ejecutar la instrucción. El
parámetro "Status" contiene información más detallada.

Status

Output

WORD

Código de error

ResultLength

Output

UDINT

Longitud en bytes de los datos leídos

Data

InOut

VARIANT

Área de destino de los datos leídos
Tipos de datos permitidos: BYTE y Array of BYTE

Encontrará más información sobre los tipos de datos válidos en Vista general de los tipos de
datos válidos (Página 241).

Parámetro Status
Código de
error*
(W#16#...)

Explicación

0

Ningún error

7000

No se está procesando ninguna petición

7001

Inicio de la ejecución de la petición. Parámetros Busy = 1, Done = 0.

7002

Llamada intermedia (REQ irrelevante): la instrucción ya está activa; Busy tiene el valor "1".

0081

Advertencia: Offset + Length es mayor que la longitud del archivo. Se leen datos desde "Offset" hasta el final
del archivo. "Data" contiene menos datos de los solicitados; "ResultLength" es menor que "Length"; los datos
que se encuentran después de "ResultLength" en "Data" no se modifican.

8091

La ruta no existe o no es válida.

8092

El parámetro "Name" no es del tipo de datos "STRING", es demasiado largo o contiene caracteres no
permitidos.

8093

El parámetro "Offset" apunta más adelante del archivo que va a leerse.

8094

El parámetro "Length" rebasa el valor máximo admisible. En una CPU S7-1500, p. ej. el valor máximo
admisible es 16 MB, es decir 16.777.216 bytes.

80A1

Error de lectura; es posible que se haya sobrescrito parcialmente el área de destino especificada por el
parámetro "Data".

80B1

El área de destino especificada por el parámetro "Data" es menor que la longitud requerida en el parámetro
"Length".

80C0

No es posible acceder al archivo (protegido contra escritura o bien bloqueado por otro proceso).

80C3

Ya se ha alcanzado el número máximo de instrucciones "FileReadC" activas simultáneamente.

8A24

El parámetro "Data" apunta a un área no admisible, p. ej., a la memoria de carga o a datos locales.

8A30

El área de destino está protegida contra escritura, p. ej. un DB protegido contra escritura.

8A51

Tipo de datos no válido del parámetro "Data"

2966

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Código de
error*
(W#16#...)

Explicación

8A52

La variable del parámetro Data es insuficiente. Posiblemente se haya escrito una parte de los datos del área
fuente.

* Los códigos de error en el editor de programas se representan como valores enteros o hexadecimales. Encontrará más
información sobre el cambio de los formatos de visualización en "Consulte también".

Ejemplo
Encontrará el ejemplo aquí: Ejemplo de programa de FileReadC y FileWriteC (Página 2970).
Encontrará información adicional y el código del programa del ejemplo aquí: Sample Library for
Instructions (Página 615).

Consulte también
Cambiar formatos de visualización en el estado del programa (Página 8529)

FileWriteC: Escribir archivo en la Memory Card
Descripción
La instrucción "FileWriteC" permite escribir datos que se encuentran en un área fuente de la
CPU en un archivo que se encuentra en la carpeta "UserFiles" de la Memory Card. Dicho
archivo se identifica por su nombre y su ruta completa. Si el archivo no existe, la CPU lo crea
en la carpeta "UserFiles". En este caso, el parámetro "Offset" debe ser cero, de lo contrario se
devuelve W#16#8093 en el parámetro "Status". Si la carpeta "UserFiles" tampoco existe, la
CPU la crea igualmente; no se crean subdirectorios; en ese caso se devuelve W#16#8091 en
el parámetro "Status".
Con el parámetro de control "REQ" se activa la escritura en el archivo. El estado de ejecución
de la petición se indica mediante los parámetros de salida "Done", "Busy", "Error" y "Status".
Al nombre de archivo y a la ruta se aplican las reglas siguientes:
● El nombre del archivo no debe tener más de 55 caracteres.
● Para las carpetas y el nombre de archivo se admiten los caracteres siguientes: "0" … "9",
"a" … "z", "A" … "Z", "-", "_"
● El nombre del archivo puede contener como máximo un punto ("."); el punto separa el
nombre de su extensión. El nombre de archivo debe contener al menos un carácter. No es
necesaria una extensión.
● La ruta no debe empezar por "/", por "\" ni por ".".
● En la ruta no está permitido el carácter "..".
Ejemplos de nombres de ruta o de archivo válidos: "UserFiles/Lift16_DataBase.txt", "UserFiles/
2017-04-13_ErrorLog.bin"
Ejecutando una vez "FileWriteC" es posible escribir como máximo 16 MB (16.777.216 bytes);
los datos se escribirán por segmentos. El tamaño de los segmentos es específico de cada

Programación del PLC
Manual de programación y manejo, 11/2019

2967

Instrucciones
4.1 Instrucciones
dispositivo; p. ej. una CPU S7-1500 utiliza bloques de 32 kB (32.768 bytes). Si el número de
datos que van a escribirse es mayor que el tamaño del segmento, habrá que llamar la
instrucción varias veces en el programa. Esto implica que, por razones de coherencia, no
podrá accederse a los datos escritos hasta la última llamada. Si el archivo existente es
demasiado corto, se prolonga hasta el tamaño necesario.
Los parámetros "Offset" y "Length" especifican dónde se escribirán los datos dentro del
archivo. Una vez terminado el proceso de escritura se libera de nuevo el recurso ocupado.
La instrucción "FileWriteC" inicia el proceso de escritura solo cuando se cumple la siguiente
condición: "Offset" + "Length" <= 16 MB

Funcionamiento
La instrucción "FileWriteC" es una instrucción que funciona de forma asíncrona. Su ejecución
se prolonga a lo largo de varias llamadas. La ejecución se inicia con flanco ascendente en el
parámetro "REQ".
El estado de la petición se indica con los parámetros "Busy" y "Done".
Si se produce algún error durante la ejecución, se indicará mediante los parámetros "Error" y
"Status".
Consulte también: Diferencia entre las instrucciones que funcionan síncronamente y las que
funcionan asíncronamente (Página 618)

Parámetros
La tabla siguiente muestra los parámetros de la instrucción "FileWriteC":
Parámetro

Declaración

Tipo de datos

Descripción

REQ

Input

BOOL

Parámetro de control Request
Activa la escritura de un archivo de la Memory Card con flanco as‐
cendente.

Name

Input

STRING

Nombre del archivo que va a escribirse, incl. la ruta completa

Offset

Input

UDINT

Offset de bytes a partir del cual debe escribirse en el archivo

Length

Input

UDINT

Longitud en bytes del área en la que se va a escribir
"Length" = 0 significa que se escribirá en toda el área fuente espe‐
cificada por el parámetro "Data".

Done

Output

BOOL

1: La instrucción se ha ejecutado correctamente.

Busy

Output

BOOL

Parámetro de estado
● 0: Ejecución de la instrucción finalizada o no iniciada.
● 1: Ejecución de la instrucción no finalizada.

Error

Output

BOOL

Parámetro de estado
● 0: Ningún error.
● 1: Se ha producido un error al ejecutar la instrucción. El
parámetro "Status" contiene información más detallada.

Status

2968

Output

WORD

Código de error

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parámetro

Declaración

Tipo de datos

Descripción

ResultLength

Output

UDINT

Longitud en bytes de los datos escritos

Data

InOut

VARIANT

Área fuente
Tipos de datos permitidos: BYTE y Array of BYTE

Encontrará más información sobre los tipos de datos válidos en Vista general de los tipos de
datos válidos (Página 241).

Parámetro Status
Código de
error*
(W#16#...)

Explicación

0

Ningún error

7000

No se está procesando ninguna petición

7001

Inicio de la ejecución de la petición. Parámetros Busy = 1, Done = 0.

7002

Llamada intermedia (REQ irrelevante): la instrucción ya está activa; Busy tiene el valor "1".

8091

La ruta no existe o no es válida.

8092

El parámetro "Name" no es del tipo de datos "STRING", es demasiado largo o contiene caracteres no
permitidos.

8093

● El parámetro "Offset" apunta más adelante del archivo en que va a escribirse.
● Se rechaza la creación del archivo porque "Offset" es mayor que cero.

8094

● "Length" rebasa el valor máximo admisible. En una CPU S7-1500, p. ej. el valor máximo admisible es 16
MB, es decir 16.777.216 bytes.
● "Length" + "Offset" rebasan el valor máximo admisible.

80A1

Error de escritura; es posible que se hayan sobrescrito parcialmente los datos del archivo de la Memory Card.

80B1

El área fuente especificada por el parámetro "Data" es menor que la longitud requerida en el parámetro
"Length".

80B3

No hay espacio suficiente en la Memory Card o en la memoria de carga interna.

80B4

La Memory Card o el archivo está protegido contra escritura.

80C0

No es posible acceder al archivo.

80C3

Ya se ha alcanzado el número máximo de instrucciones "FileWriteC" activas simultáneamente.

8A24

El parámetro "Data" apunta a un área no admisible, p. ej., a la memoria de carga o a datos locales.

8A51

Tipo de datos no válido del parámetro "Data"

8A52

La variable del parámetro Data es insuficiente. Posiblemente se haya escrito una parte de los datos del área
fuente.

* Los códigos de error en el editor de programas se representan como valores enteros o hexadecimales. Encontrará más
información sobre el cambio de los formatos de visualización en "Consulte también".

Ejemplo
Encontrará el ejemplo aquí: Ejemplo de programa de FileReadC y FileWriteC (Página 2970).
Encontrará información adicional y el código del programa del ejemplo aquí: Sample Library for
Instructions (Página 615).

Programación del PLC
Manual de programación y manejo, 11/2019

2969

Instrucciones
4.1 Instrucciones

Consulte también
Cambiar formatos de visualización en el estado del programa (Página 8529)

Ejemplo de programa de FileReadC y FileWriteC
En el ejemplo siguiente se crea un archivo en la Memory Card de una CPU S7-1500 y se
escriben datos en dicho archivo. Seguidamente, se leen los datos de este archivo.

Almacenamiento de datos
Para almacenar los datos se crean una variable y dos estructuras para las instrucciones
"FileWriteC" y "FileReadC" en un bloque de datos global.

Los datos que se escribirán en el archivo son los siguientes.

2970

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Interconectar parámetros
Las instrucciones "FileWriteC" y "FileReadC" se llaman en un FB. En el FB se crean las
siguientes variables locales:

Segmento 1: Los parámetros de la instrucción "FileWriteC" se interconectan del siguiente
modo.

Segmento 2: Los parámetros de la instrucción "FileReadC" se interconectan del siguiente
modo.

Programación del PLC
Manual de programación y manejo, 11/2019

2971

Instrucciones
4.1 Instrucciones

Resultado del segmento 1
Si el contacto NA ("fileWrite.start") devuelve el estado lógico "TRUE" y el contacto NC
("fileRead.busy") devuelve el estado lógico "FALSE", se ejecuta la instrucción "FileWriteC".
En el parámetro de entrada NAME ("name") se indica el archivo en el que debe escribirse junto
con la ruta completa. Puesto que en la Memory Card todavía no existe ningún archivo con este
nombre y esta ruta, la CPU lo crea. De acuerdo con el valor "0" del parámetro de entrada
OFFSET ("fileWrite.offset"), a continuación se escribe en el archivo a partir del primer byte.
Debido al valor "0" del parámetro de entrada LENGTH ("fileWrite.length"), todos los datos del
área fuente - almacenados con el parámetro DATA ("fileWrite.length") - se escriben en el
archivo de la Memory Card.
El estado correcto del procesamiento de la instrucción "FileWriteC" se emite en el parámetro
de salida DONE ("#writeDone"). En el parámetro de salida RESULTLENGTH
("#writeResultLength") se emite la longitud de los datos escritos (16 bytes). Si el
procesamiento de FileWriteC es correcto, también se guardan el valor de la variable
"#writeDone" (en la variable "fileWrite.done") y el valor de la variable "#writeResultLength" (en
la variable "fileWrite.resultLength"). Asimismo, la variable "fileWrite.start" se pone al valor
"FALSE".
En caso de error de la instrucción "FileWriteC" ("#writeError" es TRUE), su estado
("fileWrite.status") se guarda en la variable "fileWrite.memErrStatus".
En el parámetro de salida STATUS ("fileWrite.status") se indica que la ejecución del ejemplo
se ha realizado sin errores.

2972

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Resultado del segmento 2
Si el contacto NA ("fileRead.start") devuelve el estado lógico "TRUE" y el contacto NC
("fileWrite.busy") devuelve el estado lógico "FALSE", se ejecuta la instrucción "FileReadC".
En el parámetro de entrada NAME ("name") se indica el archivo que debe leerse junto con la
ruta completa. De acuerdo con el valor "0" del parámetro de entrada OFFSET
("fileRead.offset"), se lee el archivo de la Memory Card a partir del primer byte. Debido al valor
"0" del parámetro de entrada LENGTH ("fileRead.length"), se lee el número máximo posible de
datos por llamada.
Seguidamente, los datos leídos se almacenan mediante el parámetro DATA
("fileWrite.length").

El estado correcto del procesamiento de la instrucción "FileReadC" se emite en el parámetro
de salida DONE ("#readDone"). En el parámetro de salida RESULTLENGTH
("#readResultLength") se emite la longitud de los datos leídos (16 bytes). Si el procesamiento
de FileReadC es correcto, también se guardan el valor de la variable "#readDone" (en la
variable "fileRead.done") y el valor de la variable "#readResultLength" (en la variable
"fileRead.resultLength"). Asimismo, la variable "fileRead.start" se pone al valor "FALSE".
En caso de error de la instrucción "FileReadC" ("#readError" es TRUE), el estado
("fileRead.status") se guarda en la variable "fileRead.memErrStatus".
En el parámetro de salida STATUS ("fileRead.status") se indica que la ejecución del ejemplo
se ha realizado sin errores.

Programación del PLC
Manual de programación y manejo, 11/2019

2973

Instrucciones
4.1 Instrucciones

Código del programa
Encontrará información adicional y el código del programa del ejemplo aquí: Sample Library for
Instructions (Página 615).

Consulte también
FileReadC: Leer archivo de la Memory Card (Página 2964)
FileWriteC: Escribir archivo en la Memory Card (Página 2967)

FileDelete: Borrar archivo en la Memory Card
Validez
La instrucción "FileDelete" está incluida en las CPU S7-1500 a partir de la versión de firmware
V2.8.

Descripción
La instrucción "FileDelete" borra un archivo existente en la Memory Card.
El archivo no debe estar abierto. No se soportan caracteres comodín en el parámetro "Name";
tampoco están permitidos, por ejemplo, "UserFiles/*.txt" ni "UserFiles/?.txt".
La instrucción "FileDelete" solo está permitida en las carpetas "Recipes" y "UserFiles". Es
posible crear carpetas debajo de estas carpetas, por ejemplo "UserFiles/Test/archivo1.txt".
Nota
Borrar Data Logs
No está permitido borrar un archivo de la carpeta "DataLog" con la instrucción "FileDelete".
Para borrar Data Logs debe utilizarse la instrucción "DataLogDelete".

2974

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Funcionamiento
"FileDelete" es una instrucción que funciona de forma asíncrona. El procesamiento se puede
prolongar a lo largo de varias llamadas. La ejecución se inicia con flanco ascendente en el
parámetro "REQ".
El estado de la petición se indica con los parámetros "Busy" y "Done".
Si se produce algún error durante la ejecución, se indicará mediante los parámetros "Error" y
"Status".
Consulte también: Diferencia entre las instrucciones que funcionan síncronamente y las que
funcionan asíncronamente (Página 618)

Parámetro
La tabla siguiente muestra los parámetros de la instrucción "FileDelete":
Parámetros

Declaración

Tipo de datos

Descripción

REQ

Input

BOOL

Parámetro de control Request
El procesamiento se inicia en REQ con flanco ascendente.

Name

Input

STRING

Ruta y nombre del archivo que debe borrarse

Done

Output

BOOL

Parámetro de estado
● 1: la instrucción se ha ejecutado correctamente.

Busy

Output

BOOL

Parámetro de estado
● 0: la instrucción no se está ejecutando.
● 1: la instrucción se está ejecutando.

Error

Output

BOOL

Parámetro de estado
● 0: ningún error
● 1: se ha producido un error al ejecutar la instrucción. Consulte
información detallada en el parámetro "Status".

Status

Output

WORD

Código de error

Encontrará más información sobre los tipos de datos válidos en Vista general de los tipos de
datos válidos (Página 241).

Parámetro Status
Código de
error*
(W#16#...)

Explicación

0000

Instrucción finalizada correctamente.

7000

No se está procesando ninguna petición.

7001

Inicio de la ejecución de la petición: Busy = 1, Done = 0.

7002

Llamada intermedia (REQ irrelevante): la instrucción ya está activa; Busy tiene el valor "1".

8091

La ruta no existe.

8092

El archivo no existe en la ruta.

8093

El archivo está abierto.

8094

"FileDelete" no soporta la carpeta inicial de la ruta.

Programación del PLC
Manual de programación y manejo, 11/2019

2975

Instrucciones
4.1 Instrucciones
Código de
error*
(W#16#...)

Explicación

80A2

Error de escritura.

80B4

La Memory Card tiene activada la protección contra escritura.

80C3

Ya se ha alcanzado el número máximo de instrucciones FileDelete activas simultáneamente.

* Los códigos de error se representan como valores enteros o hexadecimales en el editor de programas. Encontrará más
información sobre el cambio de los formatos de visualización en "Consulte también".

Consulte también
Cambiar formatos de visualización en el estado del programa (Página 8529)

4.1.4.16

Sistema R/H

RH_CTRL: Influir sobre los procesos en los sistemas R/H
Descripción
La instrucción "RH_CTRL" permite influir del siguiente modo sobre los sistemas R/H:
● El estado del sistema "SYNCUP" se puede bloquear. El bloqueo se aplica hasta que se
desbloquee con la instrucción "RH_CTRL" o hasta que el sistema R/H pase al estado del
sistema "STOP".
● El estado del sistema "SYNCUP" se puede habilitar nuevamente.

Funcionamiento
La instrucción "RH_CTRL" es una instrucción que funciona de forma asíncrona. Su ejecución
se prolonga a lo largo de varias llamadas. Para iniciar la orden, debe llamarse "RH_CTRL" con
REQ = 1.
El estado de la orden se indica por medio de los parámetros de salida RET_VAL y BUSY.
Consulte también: Diferencia entre las instrucciones que funcionan síncronamente y las que
funcionan asíncronamente (Página 618)

2976

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Parámetros
La tabla siguiente muestra los parámetros de la instrucción "RH_CTRL":
Parámetro

Declaración

Tipo de datos

Descripción

REQ

Input

BOOL

Parámetro de control Request
Activa la ejecución de la instrucción cuando REQ = "1".

Modo

Input

BYTE

Con el parámetro "Mode" se selecciona cómo se desea influir sobre el
sistema R/H:
● 3: bloquear la ejecución de SYNCUP
● 4: habilitar de nuevo la ejecución de SYNCUP

Submode

Input

WORD

Parámetro oculto. Debe tener el valor 0.

Ret_Val

Output

INT

Código de error

Busy

Output

BOOL

Parámetro de estado
● 0: Ejecución de la instrucción finalizada.
● 1: Ejecución de la instrucción no finalizada.

Encontrará más información sobre los tipos de datos válidos en "Vista general de los tipos de
datos válidos (Página 241)".

Parámetro Ret_Val
Código de error*
(W#16#...)

Explicación

0

Ningún error.

1

● Si Mode = 3: El estado del sistema SYNCUP ya está bloqueado.
● Si Mode = 4: El estado del sistema SYNCUP ya está habilitado.

7000

Ninguna orden en proceso (REQ = 0).

7001

Primera llamada con REQ = 1: Transferencia de datos iniciada; BUSY tiene el valor "1".

7002

Llamada intermedia (REQ irrelevante): La transferencia de datos ya está activa; BUSY tiene el valor
"1".

8082

Ya no es posible bloquear el estado del sistema "SYNCUP" porque el sistema R/H ya se encuentra
en este estado.

8090

Valor no válido del parámetro "Mode".

8091

Valor no válido del parámetro "Submode". Debe tener el valor 0.

* Los códigos de error en el editor de programas se representan como valores enteros o hexadecimales. Encontrará más
información sobre el cambio de los formatos de visualización en "Consulte también".

Consulte también
Cambiar formatos de visualización en el estado del programa (Página 8529)

Programación del PLC
Manual de programación y manejo, 11/2019

2977

Instrucciones
4.1 Instrucciones

RH_GetPrimaryID: Determinar la ID de redundancia de la Primary-CPU
Descripción
La instrucción "RH_GetPrimaryID" permite determinar la ID de redundancia de la CPU
primaria.
Esta instrucción puede utilizarse en todos los estados del sistema, es decir, incluso si todavía
no se han asociado las dos CPU R o H.

Parámetros
La tabla siguiente muestra los parámetros de la instrucción "RH_GetPrimaryID":
Parámetros

Declaración

Tipo de datos

Descripción

Ret_Val

Output

INT

Valor de retorno

Encontrará más información sobre los tipos de datos válidos en Vista general de los tipos de
datos válidos (Página 241)

Parámetro Ret_Val
Código de error*
(W#16#...)

Explicación

1

La CPU con ID de redundancia 1 es la CPU primaria.

2

La CPU con ID de redundancia 2 es la CPU primaria.

8091

No hay datos disponibles, p. ej. porque la CPU no soporta "RH_GetPrimaryID".

* Los códigos de error se representan como valores enteros o hexadecimales en el editor de programas. Encontrará más
información sobre el cambio de los formatos de visualización en "Consulte también".

Consulte también
Cambiar formatos de visualización en el estado del programa (Página 8529)

2978

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

4.1.5

Tecnología

4.1.5.1

Motion Control

S7-1200 Motion Control
S7-1200 Motion Control a partir de V6
MC_Power
MC_Power: Habilitar, bloquear eje a partir de V6
Descripción
La instrucción de Motion Control "MC_Power" habilita o bloquea un eje.

Requisitos
● El objeto tecnológico se ha configurado correctamente.
● No hay ningún error que impida la habilitación.
Con accionamiento PROFIdrive o conexión analógica del accionamiento:
● Se ha establecido la comunicación BUS cíclica entre el controlador y el encóder ("<Nombre
del eje>.StatusSensor[1].CommunicationOK" = TRUE).
● Se ha establecido la comunicación BUS cíclica entre el controlador y el accionamiento
("<Nombre del eje>.StatusDrive.CommunicationOK" = TRUE).

Comportamiento de relevo
El procesamiento del "MC_Power" no puede ser cancelado por ninguna orden de Motion
Control.
Al bloquear el eje (parámetro de entrada "Enable" = FALSE ) se cancelan todas las órdenes de
Motion Control conforme al "StopMode" seleccionado en el respectivo objeto tecnológico.

Programación del PLC
Manual de programación y manejo, 11/2019

2979

Instrucciones
4.1 Instrucciones

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_Axis

-

Objeto tecnológico del eje

Enable

INPUT

BOOL

FALSE

TRUE

El eje es habilitado.

FALSE Todas las órdenes en curso se cancelan conforme
al "StopMode" parametrizado. El eje se detiene y se
bloquea.
StartMode

INPUT

INT

1

0

Habilitar eje de posicionamiento sin regulación de
posición *)

1

Habilitar eje de posicionamiento con regulación de
posición *)

*) Si se utiliza un eje de posicionamiento con accionamiento
PTO (Pulse Train Output), el parámetro se ignora.
El parámetro actúa inicialmente al habilitar el eje de posicio‐
namiento (Enable cambia de FALSE a TRUE) y al habilitar un
eje después de acusar correctamente una alarma que ha
provocado que este se bloqueara.
StopMode

INPUT

INT

0

0

Parada de emergencia
Si existe una demanda de bloqueo del eje, éste fre‐
na con la deceleración de parada de emergencia
configurada. Cuando el eje se para, se bloquea.

1

Desconexión inmediata
Si existe una demanda de bloqueo del eje, se emite
la consigna cero y se bloquea el eje. En función de
la configuración, el eje se frena en el accionamiento
y se para.
Si el accionamiento se conecta mediante PTO (Pul‐
se Train Output):
al bloquear el eje, dadas las características técni‐
cas la salida de impulsos se detiene con una dece‐
leración que depende de la frecuencia:
● Frecuencia de salida ≥ 100 Hz
Deceleración: máx. 30 ms
● Frecuencia de salida < 100 Hz
Deceleración: 30 ms hasta máx. 1,5 s a 2 Hz

2

Parada de emergencia con limitación de tirones
Si existe una demanda de bloqueo del eje, éste fre‐
na con la deceleración de parada de emergencia
configurada. Si la limitación de tirones está activa‐
da, se tiene en cuenta el tirón configurado. Cuando
el eje se para, se bloquea.

2980

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Status

OUTPUT

FALSE

Estado de la habilitación del eje

BOOL

FALSE El eje está bloqueado
El eje no ejecuta ninguna orden de Motion Control y
no acepta nuevas órdenes (excepción: orden
MC_Reset).
Si el accionamiento se conecta mediante PTO (Pul‐
se Train Output):
El eje no está referenciado.
Al bloquear el eje, el estado cambia a FALSE solo
cuando el eje alcanza la velocidad cero.
TRUE

El eje está habilitado
El eje está listo para ejecutar órdenes de Motion
Control.
Al habilitar el eje, el estado cambia a TRUE en
cuanto se produce la señal "Accionamiento listo". Si
no se ha configurado la señal del accionamiento
"Accionamiento listo" en la configuración del eje, el
estado cambia inmediatamente a TRUE.

Busy

OUTPUT

BOOL

FALSE

TRUE

"MC_Power" está activo.

Error

OUTPUT

BOOL

FALSE

TRUE

En la instrucción de Motion Control "MC_Power" o
el objeto tecnológico correspondiente se ha produ‐
cido un error. La causa del error se puede consultar
en los parámetros "ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro "ErrorID"

Nota
Si el eje se desconecta a causa de un error, se vuelve a habilitar automáticamente tras eliminar
y acusar el error. Requisito para ello es que el parámetro de entrada "Enable" mantenga el
valor TRUE durante esta operación.

Habilitación de un eje con señales del accionamiento configuradas
Para habilitar un eje, proceda del siguiente modo:
1. Compruebe los requisitos antes mencionados.
2. Configure el parámetro de entrada "StartMode" y "StopMode" con el valor deseado. Ponga
el parámetro de entrada "Enable" en TRUE.
La salida de habilitación para "Habilitar accionamiento" cambia a TRUE para habilitar la
potencia del accionamiento. La CPU aguarda la señal "Accionamiento listo" del
accionamiento.
El eje queda habilitado en cuanto se emite la señal "Accionamiento listo" en la entrada de
disponibilidad configurada de la CPU. El parámetro de salida "Status", así como la variable
del objeto tecnológico <Nombre del eje>.StatusBits.Enable muestran el valor TRUE.

Programación del PLC
Manual de programación y manejo, 11/2019

2981

Instrucciones
4.1 Instrucciones

Habilitación de un eje sin señales del accionamiento configuradas
Para habilitar un eje, proceda del siguiente modo:
1. Compruebe los requisitos antes mencionados.
2. Configure el parámetro de entrada "StartMode" y "StopMode" con el valor deseado. Ponga
el parámetro de entrada "Enable" en TRUE. El eje es habilitado. El parámetro de salida
"Status", así como la variable del objeto tecnológico <Nombre del eje>.StatusBits.Enable
muestran el valor TRUE.

Bloqueo de un eje
Para bloquear un eje puede proceder de la siguiente manera:
1. Detenga el eje.
La variable del objeto tecnológico <Nombre del eje:>.StatusBits.StandStill permite
reconocer el momento de parada del eje.
2. Cambie el parámetro de entrada "Enable" a FALSE en cuanto se produzca la parada.
3. Si los parámetros de salida "Busy" y "Status", así como la variable del objeto tecnológico
<Nombre del eje>.StatusBits.Enable muestran el valor FALSE, el bloqueo del eje de habrá
finalizado.

Consulte también
MC_Reset: Acusar errores, reiniciar un objeto tecnológico a partir de V6 (Página 2984)
MC_Home: Referenciar eje, ajustar punto de referencia a partir de V6 (Página 2986)
MC_MoveAbsolute: Posicionar eje de forma absoluta a partir de V6 (Página 2993)
MC_MoveRelative: Posicionar eje de forma relativa a partir de V6 (Página 2997)
MC_MoveVelocity: Mover eje con especificación de velocidad a partir de V6 (Página 3001)
MC_MoveJog: Mover eje en modo Jog a partir de V6 (Página 3005)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos a partir de
V6 (Página 3009)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje a partir de V6 (Página 3011)
MC_ReadParam: Leer de forma continuada datos de movimiento de un eje de
posicionamiento a partir de V6 (Página 3013)
MC_WriteParam: Escribir variable del eje de posicionamiento a partir de V6 (Página 3016)
MC_Halt: Parar eje a partir de V6 (Página 2990)

2982

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_Power: Diagrama de funciones a partir de V6
Diagrama de funcionamiento
$

$
0&B3RZHU
$[LVB
(QDEOHB



$[LV
(QDEOH
6WDUW0RGH
6WRS0RGH

0&B+DOW
6WDWXV
%XV\
(UURU
(UURU,'
(UURU,QIR

6WDWXVB
%XV\B
(UURUB

$[LVB
([HB

$[LV
([HFXWH

'RQH
%XV\
(UURU
(UURU,'
(UURU,QIR



$
(QDEOHB
6WDWXVB




W




W



%XV\B



W



(UURUB



W

$


([HB



W



'RQHB



W



%XV\B



'ULYH(QDEOHG
'ULYH5HDG\

W




W




W
$

Sección
$

Sección
%

①

'RQHB
%XV\B

%

Se habilita un eje y a continuación se vuelve a bloquear. En cuanto el accionamiento devuelve la señal "Accio‐
namiento listo" a la CPU se puede verificar el éxito de la habilitación a través de "Status_1".
Una vez habilitado un eje se produce un error, provocando el bloqueo del eje. El error se soluciona y se acusa
con "MC_Reset". A continuación se vuelve a habilitar el eje.
El final exacto de las señales depende del accionamiento seleccionado y del StopMode.

Programación del PLC
Manual de programación y manejo, 11/2019

2983

Instrucciones
4.1 Instrucciones

MC_Reset
MC_Reset: Acusar errores, reiniciar un objeto tecnológico a partir de V6
Descripción
La instrucción de Motion Control "MC_Reset" permite acusar "Errores de funcionamiento con
parada del eje" y "Errores de configuración". En la "Lista de ErrorIDs y ErrorInfos", en el
apartado "Ayuda", puede consultar los errores que deben ser acusados.
Es posible cargar la configuración del eje en la memoria de trabajo después de una carga en
el estado operativo RUN.

Requisitos
● El objeto tecnológico Eje de posicionamiento se ha configurado correctamente.
● En caso de un error de configuración acusable debe haberse eliminado la causa (p. ej. la
aceleración en el objeto tecnológico Eje de posicionamiento ha sido cambiada a un valor
válido).

Comportamiento de relevo
La orden MC_Reset no puede ser cancelada por ninguna otra orden de Motion Control.
La nueva orden MC_Reset no cancela ninguna otra orden de Motion Control en curso.

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_Axis

-

Objeto tecnológico del eje

Execute

INPUT

BOOL

FALSE

Inicio de la orden con flanco ascendente

Restart

INPUT

BOOL

FALSE

TRUE

Carga la configuración del eje en la memoria de
trabajo desde la memoria de carga. La orden solo
puede ejecutarse con el eje bloqueado.
Para ello, tenga en cuenta las indicaciones referen‐
tes a la Carga en la CPU.

FALSE Acusa errores pendientes
Done

OUTPUT

BOOL

FALSE

TRUE

El error se ha acusado.

Busy

OUTPUT

BOOL

FALSE

TRUE

Orden en proceso

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar la orden. La causa
del error se puede consultar en los parámetros
"ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro "ErrorID"

2984

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Acusar un error con MC_Reset
Para acusar un error proceda del siguiente modo:
1. Compruebe los requisitos antes mencionados.
2. Inicie el acuse del error mediante un flanco ascendente en el parámetro de entrada
"Execute". Con MC_Reset a partir de la V7.0 puede acusar errores de bloqueo de conexión
en el encóder o el accionamiento configurado antes de habilitar el eje.
3. El error ha sido acusado si el parámetro de entrada "Done" muestra el valor TRUE y la
variable del objeto tecnológico <Nombre del eje:>.StatusBits.Error el valor FALSE.
Nota
Acusar con "Restart" = FALSE
Si se trata solo de acusar errores, ajuste "Restart" = FALSE. Durante el reinicio no es posible
utilizar el objeto tecnológico. Se acusan todos los errores en ejes y encóders, incluso si no
están habilitados o no son efectivos.

Consulte también
MC_Power: Habilitar, bloquear eje a partir de V6 (Página 2979)
MC_Home: Referenciar eje, ajustar punto de referencia a partir de V6 (Página 2986)
MC_Halt: Parar eje a partir de V6 (Página 2990)
MC_MoveAbsolute: Posicionar eje de forma absoluta a partir de V6 (Página 2993)
MC_MoveRelative: Posicionar eje de forma relativa a partir de V6 (Página 2997)
MC_MoveVelocity: Mover eje con especificación de velocidad a partir de V6 (Página 3001)
MC_MoveJog: Mover eje en modo Jog a partir de V6 (Página 3005)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos a partir de
V6 (Página 3009)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje a partir de V6 (Página 3011)
MC_ReadParam: Leer de forma continuada datos de movimiento de un eje de
posicionamiento a partir de V6 (Página 3013)
MC_WriteParam: Escribir variable del eje de posicionamiento a partir de V6 (Página 3016)

Programación del PLC
Manual de programación y manejo, 11/2019

2985

Instrucciones
4.1 Instrucciones

MC_Home
MC_Home: Referenciar eje, ajustar punto de referencia a partir de V6
Descripción
La instrucción de Motion Control "MC_Home" permite contrastar la coordenada axial con la
posición física real del accionamiento. Si el eje debe posicionarse de forma absoluta, es
necesaria el referenciado. Pueden ejecutarse los siguientes tipos de referenciado:
● Referenciado activo (Mode = 3)
La aproximación al punto de referencia se ejecuta automáticamente.
● Referenciado pasivo (Mode = 2)
En el referenciado pasivo, la instrucción de Motion Control "MC_Home" no realiza ningún
movimiento de referencia. El desplazamiento necesario para ello debe ser realizado por el
usuario con otras instrucciones de Motion Control. El eje se referencia al detectarse el
sensor del punto de referencia.
● Referenciado directo absoluto (Mode = 0)
La posición actual del eje se fija con el valor del parámetro "Position".
● Referenciado directo relativo (Mode = 1)
La posición actual del eje se desplaza en la cuantía del valor del parámetro "Position".
● Ajuste relativo del encóder absoluto (Mode = 6)
La posición actual del eje se desplaza en la cuantía del valor del parámetro "Position".
● Ajuste absoluto del encóder absoluto (Mode = 7)
La posición actual del eje se fija con el valor del parámetro "Position".
Mode 6 y 7 solo son aplicables en accionamientos con interfaz de accionamiento analógica y
accionamiento PROFIdrive.

Requisitos
● El objeto tecnológico Eje de posicionamiento se ha configurado correctamente.
● El eje está habilitado. (No es válido para accionamiento PROFIdrive/conexión analógica del
accionamiento Mode = 0 o 1)
● Al iniciar con Mode = 0, 1 y 2 no puede haber ninguna orden MC_CommandTable activa.

Comportamiento de relevo
El comportamiento de relevo depende del modo seleccionado:
Mode = 0, 1, 6, 7
La orden MC_Home no puede ser interrumpida por ninguna otra orden de Motion Control.
La orden MC_Home no interrumpe ninguna orden en curso de Motion Control. Las órdenes de
desplazamiento con referencia de posición continúan, después del referenciado, conforme a
la nueva posición de referenciado (valor en el parámetro de entrada: "Position").
Mode = 2

2986

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
La orden MC_Home puede ser interrumpida por las siguientes órdenes de Motion Control:
● Orden MC_Home Mode = 2, 3
La nueva orden MC_Home interrumpe la siguiente orden en curso de Motion Control:
● Orden MC_Home Mode = 2
Las órdenes de desplazamiento con referencia de posición continúan, después del
referenciado, conforme a la nueva posición de referenciado (valor en el parámetro de entrada:
"Position").
Mode = 3
La orden MC_Home puede ser interrumpida por las siguientes órdenes de Motion Control:
● Orden MC_Home Mode = 3
● Orden MC_Halt
● Orden MC_MoveAbsolute
● Orden MC_MoveRelative
● Orden MC_MoveVelocity
● Orden MC_MoveJog
● Orden MC_CommandTable
La nueva orden MC_Home interrumpe las siguientes órdenes en curso de Motion Control:
● Orden MC_Home Mode = 2, 3
● Orden MC_Halt
● Orden MC_MoveAbsolute
● Orden MC_MoveRelative
● Orden MC_MoveVelocity
● Orden MC_MoveJog
● Orden MC_CommandTable

Parámetro
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_Axis

-

Objeto tecnológico del eje

Execute

INPUT

BOOL

FALSE

Inicio de la orden con flanco ascendente

Position

INPUT

REAL

0.0

● Mode = 0, 2 y 3
Posición absoluta del eje una vez finalizado el
proceso de referenciado
● Mode = 1
Valor de corrección para la posición actual del eje
Límites:
-1.0E12 ≤ Position ≤ 1.0E12

Programación del PLC
Manual de programación y manejo, 11/2019

2987

Instrucciones
4.1 Instrucciones
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Mode

INPUT

0

Modo de toma de referencia

INT

0

Referenciado directo (absoluto)
La nueva posición del eje es el valor de
posición del parámetro "Position".

1

Referenciado directo (relativo)
La nueva posición del eje es la posición
actual del eje + el valor de posición del
parámetro "Position".

2

Referenciado pasivo
Referenciado conforme a la configuración
del eje. Tras el referenciado se aplica el
valor del parámetro "Position" como nue‐
va posición del eje.
En un eje ya referenciado <Nombre del
eje>.StatusBits.HomingDone = TRUE, es‐
te bit de estado permanece activado todo
el tiempo en el que se realiza otro refe‐
renciado pasivo.

3

Referenciado activo
Aproximación al punto de referencia con‐
forme a la configuración del eje. Tras el
referenciado se aplica el valor del pará‐
metro "Position" como nueva posición del
eje.

6

Ajuste del encóder absoluto (relativo)
La posición actual del eje se desplaza en
la cuantía del valor del parámetro "Posi‐
tion". El offset calculado del valor absoluto
se guarda de forma remanente en la CPU.
(<Nombre de eje>.StatusSensor.AbsEn‐
coderOffset)

7

Ajuste del encóder absoluto (absoluto)
La posición actual del eje se fija con el
valor del parámetro "Position". El offset
calculado del valor absoluto se guarda de
forma remanente en la CPU. (<Nombre
de eje>.StatusSensor.AbsEncoderOffset)

Done

OUTPUT

BOOL

FALSE

TRUE

La orden ha finalizado

Busy

OUTPUT

BOOL

FALSE

TRUE

Orden en proceso

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

La orden ha sido interrumpida por otra du‐
rante su procesamiento.

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar la orden.
La causa del error se puede consultar en
los parámetros "ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro
"ErrorID"

REAL

0.0

Indicación de la posición en la que se ha referenciado
el objeto tecnológico (válido con "Done" = TRUE)

ReferenceMarkPo‐ OUTPUT
sition

2988

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Desactivación del estado "referenciado"
El estado "referenciado" de un objeto tecnológico (<Nombre de eje>.StatusBits.HomingDone)
se desactiva cuando se dan las siguientes condiciones:
● Conexión del accionamiento a través de PTO (Pulse Train Output):
– Inicio de una orden "MC_Home" de referenciado activo
(El estado "referenciado" se activa de nuevo una vez concluido correctamente el
proceso de referenciado).
– Bloqueo del eje por la instrucción de Motion Control "MC_Power"
– Cambio entre modo automático y control manual
– Tras POWER OFF → POWER ON de la CPU
– Tras un rearranque completo de la CPU (RUN-STOP → STOP-RUN)
● Objetos tecnológicos con valores reales incrementales:
– Inicio de una orden "MC_Home" de referenciado activo
(El estado "referenciado" se activa de nuevo una vez concluido correctamente el
proceso de referenciado).
– Error en el sistema del encóder o fallo del encóder
– Reinicio del objeto tecnológico
– Tras POWER OFF → POWER ON de la CPU
– Borrado total
– Cambio de la configuración del encóder
● Objetos tecnológicos con valores reales absolutos:
– Error en el sistema del sensor/fallo del encóder
– Sustitución de la CPU
– Cambio de la configuración del encóder
– Restablecimiento de la configuración de fábrica de la CPU
– Transferencia de otro proyecto al controlador

Referenciado de un eje
Para referenciar el eje, proceda del siguiente modo:
1. Compruebe los requisitos antes mencionados.
2. Configure los valores con los parámetros de entrada necesarios e inicie el referenciado
mediante un flanco ascendente en el parámetro de entrada "Execute".
3. El referenciado concluye cuando el parámetro de salida muestra "Done" y la variable del
objeto tecnológico <Nombre del eje:>.StatusBits.HomingDone el valor TRUE. La posición
de referencia se puede consultar en la variable <Nombre de eje>.ReferenceMarkPosition .

Programación del PLC
Manual de programación y manejo, 11/2019

2989

Instrucciones
4.1 Instrucciones

Consulte también
MC_Power: Habilitar, bloquear eje a partir de V6 (Página 2979)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico a partir de V6 (Página 2984)
MC_Halt: Parar eje a partir de V6 (Página 2990)
MC_MoveAbsolute: Posicionar eje de forma absoluta a partir de V6 (Página 2993)
MC_MoveRelative: Posicionar eje de forma relativa a partir de V6 (Página 2997)
MC_MoveVelocity: Mover eje con especificación de velocidad a partir de V6 (Página 3001)
MC_MoveJog: Mover eje en modo Jog a partir de V6 (Página 3005)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos a partir de
V6 (Página 3009)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje a partir de V6 (Página 3011)
MC_ReadParam: Leer de forma continuada datos de movimiento de un eje de
posicionamiento a partir de V6 (Página 3013)
MC_WriteParam: Escribir variable del eje de posicionamiento a partir de V6 (Página 3016)

MC_Halt
MC_Halt: Parar eje a partir de V6
Descripción
La instrucción de Motion Control "MC_Halt" cancela todas las operaciones de movimiento y
frena el eje con la deceleración configurada hasta pararlo por completo. La posición de parada
no está definida.

Requisitos
● El objeto tecnológico Eje de posicionamiento se ha configurado correctamente.
● El eje está habilitado.

Comportamiento de relevo
La orden MC_Halt puede ser cancelada por las siguientes órdenes de Motion Control:
● Orden MC_Home Mode = 3
● Orden MC_Halt
● Orden MC_MoveAbsolute
● Orden MC_MoveRelative
● Orden MC_MoveVelocity

2990

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
● Orden MC_MoveJog
● Orden MC_CommandTable
La nueva orden MC_Halt cancela las siguientes órdenes de Motion Control en curso:
● Orden MC_Home Mode = 3
● Orden MC_Halt
● Orden MC_MoveAbsolute
● Orden MC_MoveRelative
● Orden MC_MoveVelocity
● Orden MC_MoveJog
● Orden MC_CommandTable

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_SpeedAxis

-

Objeto tecnológico del eje

Execute

INPUT

BOOL

FALSE

Inicio de la orden con flanco ascendente

Done

OUTPUT

BOOL

FALSE

TRUE

Se ha alcanzado la velocidad cero

Busy

OUTPUT

BOOL

FALSE

TRUE

Orden en proceso

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

La orden ha sido cancelada por otra durante
su procesamiento.

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar la orden. La
causa del error se puede consultar en los
parámetros "ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro
"ErrorID"

Consulte también
MC_Power: Habilitar, bloquear eje a partir de V6 (Página 2979)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico a partir de V6 (Página 2984)
MC_Home: Referenciar eje, ajustar punto de referencia a partir de V6 (Página 2986)
MC_MoveAbsolute: Posicionar eje de forma absoluta a partir de V6 (Página 2993)
MC_MoveRelative: Posicionar eje de forma relativa a partir de V6 (Página 2997)
MC_MoveVelocity: Mover eje con especificación de velocidad a partir de V6 (Página 3001)
MC_MoveJog: Mover eje en modo Jog a partir de V6 (Página 3005)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos a partir de
V6 (Página 3009)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje a partir de V6 (Página 3011)

Programación del PLC
Manual de programación y manejo, 11/2019

2991

Instrucciones
4.1 Instrucciones
MC_ReadParam: Leer de forma continuada datos de movimiento de un eje de
posicionamiento a partir de V6 (Página 3013)
MC_WriteParam: Escribir variable del eje de posicionamiento a partir de V6 (Página 3016)

MC_Halt: Diagrama de funciones a partir de V6
Diagrama de funcionamiento
$

$

0&B+DOW

0&B0RYH9HORFLW\
$[LVB
([HB


IDOVH
WUXH

$[LV
,Q9HORFLW\
([HFXWH
%XV\
&RPPDQG$ERUWHG
9HORFLW\
'LUHFWLRQ
(UURU
(UURU,'
&XUUHQW
3RVLWLRQ&RQWUROOHG (UURU,QIR

,Q9HOB
%XV\B
$ERUWB

$[LVB
([HB

$[LV
([HFXWH

'RQH
%XV\
&RPPDQG$ERUWHG
(UURU
(UURU,'
(UURU,QIR

'RQHB
%XV\B
$ERUWB

$
([HB
,Q9HOB
%XV\B
$ERUWB




W




W




W




W

$
([HB
'RQHB
%XV\B
$ERUWB

9HORFLW\
$[LVB




W




W




W




W




W
$

2992

%

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Los siguientes valores han sido configurados en la ventana de configuración
Dinámica > General:
● Aceleración: 10.0
● Deceleración: 5.0
Sección
$

Sección
%

El eje se frena con una orden MC_Halt hasta pararse completamente. La parada completa se notifica mediante
"Done_2".
Mientras una orden MC_Halt frena el eje, esta es interrumpida por otra orden de desplazamiento. La interrupción
se notifica mediante "Abort_2".

MC_MoveAbsolute
MC_MoveAbsolute: Posicionar eje de forma absoluta a partir de V6
Descripción
La instrucción de Motion Control "MC_MoveAbsolute" inicia un movimiento de
posicionamiento del eje respecto a una posición absoluta.

Requisitos
● El objeto tecnológico Eje de posicionamiento se ha configurado correctamente.
● El eje está habilitado.
● El eje está referenciado.

Comportamiento de relevo
La orden MC_MoveAbsolute puede ser interrumpida por las siguientes órdenes de Motion
Control:
● Orden MC_Home Mode = 3
● Orden MC_Halt
● Orden MC_MoveAbsolute
● Orden MC_MoveRelative
● Orden MC_MoveVelocity
● Orden MC_MoveJog
● Orden MC_CommandTable

Programación del PLC
Manual de programación y manejo, 11/2019

2993

Instrucciones
4.1 Instrucciones
La nueva orden MC_MoveAbsolute interrumpe las siguientes órdenes de Motion Control en
curso:
● Orden MC_Home Mode = 3
● Orden MC_Halt
● Orden MC_MoveAbsolute
● Orden MC_MoveRelative
● Orden MC_MoveVelocity
● Orden MC_MoveJog
● Orden MC_CommandTable

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_Positionin‐
gAxis

-

Objeto tecnológico del eje

Execute

INPUT

BOOL

FALSE

Inicio de la orden con flanco ascendente

Position

INPUT

REAL

0.0

Posición absoluta de destino
Límites:
-1.0E12 ≤ Position ≤ 1.0E12

Velocity

INPUT

REAL

10.0

Velocidad del eje
No siempre se alcanza esta velocidad, dependiendo
de la aceleración y deceleración configuradas y de la
posición de destino fijada.
Límites:
Velocidad de arranque/parada ≤ Velocity ≤ velocidad
máxima

Direction

INPUT

INT

1

Sentido de movimiento del eje
Solo se evalúa si "Módulo" está activado. "Objeto tec‐
nológico > Configuración > Parámetros avanzados >
Módulo > Activar módulo"
Los ejes PTO ignoran el parámetro.
0
1

El signo de la velocidad (parámetro "Velo‐
city") determina el sentido de movimiento.
Sentido positivo
(La posición de destino se alcanza en senti‐
do positivo)

2

Sentido negativo
(La posición de destino se alcanza en senti‐
do negativo)

Done

2994

OUTPUT

BOOL

FALSE

3

Recorrido más corto
(Partiendo de la posición actual, la tecnolo‐
gía selecciona el recorrido más corto a la
posición de destino)

TRUE

Posición absoluta de destino alcanzada

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Busy

OUTPUT

BOOL

FALSE

TRUE

Orden en proceso

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

La orden ha sido interrumpida por otra du‐
rante su procesamiento.

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar la orden. La
causa del error se puede consultar en los
parámetros "ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro
"ErrorID"

Consulte también
MC_Power: Habilitar, bloquear eje a partir de V6 (Página 2979)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico a partir de V6 (Página 2984)
MC_Home: Referenciar eje, ajustar punto de referencia a partir de V6 (Página 2986)
MC_Halt: Parar eje a partir de V6 (Página 2990)
MC_MoveRelative: Posicionar eje de forma relativa a partir de V6 (Página 2997)
MC_MoveVelocity: Mover eje con especificación de velocidad a partir de V6 (Página 3001)
MC_MoveJog: Mover eje en modo Jog a partir de V6 (Página 3005)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos a partir de
V6 (Página 3009)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje a partir de V6 (Página 3011)
MC_ReadParam: Leer de forma continuada datos de movimiento de un eje de
posicionamiento a partir de V6 (Página 3013)
MC_WriteParam: Escribir variable del eje de posicionamiento a partir de V6 (Página 3016)

Programación del PLC
Manual de programación y manejo, 11/2019

2995

Instrucciones
4.1 Instrucciones

MC_MoveAbsolute: Diagrama de funciones a partir de V6
Diagrama de funcionamiento
$

$
0&B0RYH$EVROXWH

0&B0RYH$EVROXWH
$[LVB
([HB




$[LV
([HFXWH
3RVLWLRQ
9HORFLW\
'LUHFWLRQ

'RQH
'RQHB
&RPPDQG$ERUWHG
(UURU
(UURU,'
(UURU,QIR

'RQHB
%XV\B
$ERUWB

$[LVB
([HB



$[LV
([HFXWH
3RVLWLRQ
9HORFLW\

'RQH
%XV\
&RPPDQG$ERUWHG
(UURU
(UURU,'
(UURU,QIR

'RQHB
%XV\B

$
([HB
'RQHB
%XV\B
$ERUWB




W




W




W




W

$
([HB
'RQHB
%XV\B

9HORFLW\
$[LVB




W




W




W





W


3RVLWLRQ
$[LVB




W
$

2996

%

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Los siguientes valores han sido configurados en la ventana de configuración
Dinámica > General:
● Aceleración: 10.0
● Deceleración: 10.0
Sección
$

Sección
%

Un eje es desplazado por una orden MC_MoveAbsolute a la posición absoluta 1000.0. En cuanto se alcanza la
posición de destino el sistema lo notifica mediante "Done_1". Con "Done_1" = TRUE se lanza otra orden
MC_MoveAbsolute, con posición de destino 1500.0. Debido a los tiempos de reacción (p.ej. tiempo de ciclo del
programa de usuario, ...) se produce una breve parada del eje (ver representación ampliada). En cuanto se
alcanza con éxito la nueva posición de destino el sistema lo notifica mediante "Done_2".
Una orden MC_MoveAbsolute activa es interrumpida por otra orden MC_MoveAbsolute. La interrupción se
notifica mediante "Abort_1". A continuación, el eje se mueve con la nueva velocidad hasta la nueva posición de
destino 1500.0. En cuanto se alcanza la nueva posición de destino el sistema lo notifica mediante "Done_2".

MC_MoveRelative
MC_MoveRelative: Posicionar eje de forma relativa a partir de V6
Descripción
La instrucción de Motion Control "MC_MoveRelative" inicia un movimiento de posicionamiento
relativo respecto a la posición inicial.

Requisitos
● El objeto tecnológico Eje de posicionamiento se ha configurado correctamente.
● El eje está habilitado.

Comportamiento de relevo
La orden MC_MoveRelative puede ser interrumpida por las siguientes órdenes de Motion
Control:
● Orden MC_Home Mode = 3
● Orden MC_Halt
● Orden MC_MoveAbsolute
● Orden MC_MoveRelative
● Orden MC_MoveVelocity
● Orden MC_MoveJog
● Orden MC_CommandTable

Programación del PLC
Manual de programación y manejo, 11/2019

2997

Instrucciones
4.1 Instrucciones
La nueva orden MC_MoveRelative interrumpe las siguientes órdenes en curso de Motion
Control:
● Orden MC_Home Mode = 3
● Orden MC_Halt
● Orden MC_MoveAbsolute
● Orden MC_MoveRelative
● Orden MC_MoveVelocity
● Orden MC_MoveJog
● Orden MC_CommandTable

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_Positionin‐
gAxis

-

Objeto tecnológico del eje

Execute

INPUT

BOOL

FALSE

Inicio de la orden con flanco ascendente

Distance

INPUT

REAL

0.0

Trayecto de posicionamiento
Límites:
-1.0E12 ≤ Distance ≤ 1.0E12

Velocity

INPUT

REAL

10.0

Velocidad del eje
No siempre se alcanza esta velocidad, dependiendo
de la aceleración y deceleración configuradas y del
trayecto fijado.
Límites:
Velocidad de arranque/parada ≤ Velocity ≤ velocidad
máxima

Done

OUTPUT

BOOL

FALSE

TRUE

Posición de destino alcanzada

Busy

OUTPUT

BOOL

FALSE

TRUE

Orden en proceso

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

La orden ha sido interrumpida por otra du‐
rante su procesamiento.

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar la orden. La
causa del error se puede consultar en los
parámetros "ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro
"ErrorID"

Consulte también
MC_Power: Habilitar, bloquear eje a partir de V6 (Página 2979)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico a partir de V6 (Página 2984)
MC_Home: Referenciar eje, ajustar punto de referencia a partir de V6 (Página 2986)
MC_Halt: Parar eje a partir de V6 (Página 2990)

2998

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
MC_MoveAbsolute: Posicionar eje de forma absoluta a partir de V6 (Página 2993)
MC_MoveVelocity: Mover eje con especificación de velocidad a partir de V6 (Página 3001)
MC_MoveJog: Mover eje en modo Jog a partir de V6 (Página 3005)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos a partir de
V6 (Página 3009)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje a partir de V6 (Página 3011)
MC_ReadParam: Leer de forma continuada datos de movimiento de un eje de
posicionamiento a partir de V6 (Página 3013)
MC_WriteParam: Escribir variable del eje de posicionamiento a partir de V6 (Página 3016)

Programación del PLC
Manual de programación y manejo, 11/2019

2999

Instrucciones
4.1 Instrucciones

MC_MoveRelative: Diagrama de funciones a partir de V6
Diagrama de funcionamiento
$

$
0&B0RYH5HODWLYH

0&B0RYH5HODWLYH
$[LVB
([HB



$[LV
([HFXWH
'LVWDQFH
9HORFLW\

'RQH
%XV\
&RPPDQG$ERUWHG
(UURU
(UURU,'
(UURU,QIR

'RQHB
%XV\B
$ERUWB

$[LVB
([HB



$[LV
([HFXWH
'LVWDQFH
9HORFLW\

'RQH
%XV\
&RPPDQG$ERUWHG
(UURU
(UURU,'
(UURU,QIR

'RQHB
%XV\B

$
([HB
%XV\B
'RQHB
$ERUWB




W




W




W




W

$
([HB
%XV\B
'RQHB

9HORFLW\
$[LVB




W




W




W






3RVLWLRQ
$[LVB



W





W
$

%

Los siguientes valores han sido configurados en la ventana de configuración
Dinámica > General:
● Aceleración: 10.0
● Deceleración: 10.0

3000

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Sección
$

Sección
%

Un eje es desplazado por una orden MC_MoveRelative en la distancia ("Distance") 1000.0. En cuanto se alcanza
la posición de destino el sistema lo notifica mediante "Done_1". Con "Done_1" = TRUE se lanza otra orden
MC_MoveRelative con la distancia 500.0. Debido a los tiempos de reacción (p.ej. tiempo de ciclo del programa
de usuario, ...) se produce una breve parada del eje (ver representación ampliada). En cuanto se alcanza con
éxito la nueva posición de destino el sistema lo notifica mediante "Done_2".
Una orden MC_MoveRelative activa es interrumpida por otra orden MC_MoveRelative. La interrupción se noti‐
fica mediante "Abort_1". A continuación, el eje se mueve con la nueva velocidad hasta recorrer el nuevo trayecto
("Distance") 500.0. En cuanto se alcanza la nueva posición de destino el sistema lo notifica mediante "Done_2".

MC_MoveVelocity
MC_MoveVelocity: Mover eje con especificación de velocidad a partir de V6
Descripción
La instrucción de Motion Control "MC_MoveVelocity" mueve el eje de forma constante a la
velocidad predeterminada.

Requisitos
● El objeto tecnológico Eje de posicionamiento se ha configurado correctamente.
● El eje está habilitado.

Comportamiento de relevo
La orden MC_MoveVelocity puede ser interrumpida por las siguientes órdenes de Motion
Control:
● Orden MC_Home Mode = 3
● Orden MC_Halt
● Orden MC_MoveAbsolute
● Orden MC_MoveRelative
● Orden MC_MoveVelocity
● Orden MC_MoveJog
● Orden MC_CommandTable
La nueva orden MC_MoveVelocity interrumpe las siguientes órdenes en curso de Motion
Control:
● Orden MC_Home Mode = 3
● Orden MC_Halt
● Orden MC_MoveAbsolute
● Orden MC_MoveRelative
● Orden MC_MoveVelocity

Programación del PLC
Manual de programación y manejo, 11/2019

3001

Instrucciones
4.1 Instrucciones
● Orden MC_MoveJog
● Orden MC_CommandTable

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_SpeedAxis

-

Objeto tecnológico del eje

Execute

INPUT

BOOL

FALSE

Inicio de la orden con flanco ascendente

Velocity

INPUT

REAL

10.0

Velocidad predeterminada para mover el eje
Límites:
Velocidad de inicio/parada ≤ |Velocity| ≤ velocidad
máxima
(Velocity = 0.0 está permitido)

Direction

INPUT

INT

0

Preajuste de sentido
0

Sentido de giro según el signo del valor del
parámetro "Velocity"

1

Sentido de giro positivo
(El signo del valor del parámetro "Velocity"
se ignora)

2

Sentido de giro negativo
(El signo del valor del parámetro "Velocity"
se ignora)

Current

INPUT

BOOL

FALSE

Mantener velocidad actual
FALSE "Mantener velocidad actual" desactivado.
Se utilizan los valores de los parámetros
"Velocity" y "Direction".
TRUE

"Mantener velocidad actual" activado. Los
valores de los parámetros "Velocity" y "Di‐
rection" no se tienen en cuenta.
En cuanto el eje vuelve a desplazarse a la
velocidad actual, el parámetro "InVelocity"
devuelve el valor TRUE.

PositionControlled

INPUT

BOOL

TRUE

FALSE Modo sin regulación de posición
TRUE

Modo con regulación de posición

El parámetro es válido mientras se ejecuta la orden
MC_MoveVelocity. Después volverá a tener validez el
ajuste de MC_Power.
Si se utiliza un eje PTO, el parámetro se ignora.
InVelocity

OUTPUT

BOOL

FALSE

TRUE

● "Current" = FALSE:
La velocidad indicada en el parámetro
"Velocity" ha sido alcanzada.
● "Current" = TRUE:
El eje se mueve a la velocidad actual en
el momento de arranque.

Busy

3002

OUTPUT

BOOL

FALSE

TRUE

Orden en proceso

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

La orden ha sido interrumpida por otra du‐
rante su procesamiento.

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar la orden. La
causa del error se puede consultar en los
parámetros "ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro
"ErrorID"

Nota
PLCopen versión 2.0
La instrucción de Motion Control "MC_MoveVelocity" a partir de V4 es conforme con la versión
2.0 de PLCopen.
Los parámetros "InVelocity" y "Busy" muestran su estado con independencia del parámetro
"Execute" hasta que la orden es relevada por otra o cancelada con un error. Tenga en cuenta
también al respecto el capítulo Seguimiento de órdenes en curso.

Comportamiento con velocidad de consigna cero (Velocity = 0.0)
Una orden MC_MoveVelocity con "Velocity" = 0.0 interrumpe (al igual que una orden MC_Halt)
las órdenes de movimiento activas y detiene el eje con la deceleración configurada.
Una vez alcanzada la parada se muestra en el parámetro de salida "InVelocity" el valor TRUE
durante al menos un ciclo de programa.
"Busy" muestra el valor TRUE durante un proceso de deceleración, cambiando a FALSE junto
con "InVelocity". Si el parámetro "Execute" = TRUE, "InVelocity" y "Busy" se indican
memorizados.
Cuando inicia la orden MC_MoveVelocity se activa el bit de estado "SpeedCommand" en el
objeto tecnológico. El bit de estado "ConstantVelocity" con la parada del eje. Ambos bits se
ajustan a la nueva situación al iniciarse una nueva orden de movimiento.

Consulte también
MC_Power: Habilitar, bloquear eje a partir de V6 (Página 2979)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico a partir de V6 (Página 2984)
MC_Home: Referenciar eje, ajustar punto de referencia a partir de V6 (Página 2986)
MC_Halt: Parar eje a partir de V6 (Página 2990)
MC_MoveAbsolute: Posicionar eje de forma absoluta a partir de V6 (Página 2993)
MC_MoveRelative: Posicionar eje de forma relativa a partir de V6 (Página 2997)
MC_MoveJog: Mover eje en modo Jog a partir de V6 (Página 3005)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos a partir de
V6 (Página 3009)

Programación del PLC
Manual de programación y manejo, 11/2019

3003

Instrucciones
4.1 Instrucciones
MC_ChangeDynamic: Modificar ajustes dinámicos del eje a partir de V6 (Página 3011)
MC_ReadParam: Leer de forma continuada datos de movimiento de un eje de
posicionamiento a partir de V6 (Página 3013)
MC_WriteParam: Escribir variable del eje de posicionamiento a partir de V6 (Página 3016)

MC_MoveVelocity: Diagrama de funciones a partir de V6
Diagrama de funcionamiento
$

$

0&B0RYH9HORFLW\

0&B0RYH9HORFLW\
$[LVB
([HB


IDOVH
WUXH

$[LV
,Q9HORFLW\
([HFXWH
%XV\
&RPPDQG$ERUWHG
9HORFLW\
'LUHFWLRQ
(UURU
&XUUHQW
(UURU,'
3RVLWLRQ&RQWUROOHG (UURU,QIR

,Q9HOB
%XV\B
$ERUWB

$[LVB
([HB




$[LV
([HFXWH
9HORFLW\
'LUHFWLRQ
&XUUHQW

,Q9HORFLW\
%XV\
&RPPDQG$ERUWHG
(UURU
(UURU,'
(UURU,QIR

,Q9HOB
%XV\B

$
([HB
%XV\B
,Q9HOB
$ERUWB




W




W




W




W

$
([HB
%XV\B
,Q9HOB




W




W




W


9HORFLW\
$[LVB




W
$

3004

%

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Los siguientes valores han sido configurados en la ventana de configuración
Dinámica > General:
● Aceleración: 10.0
● Deceleración: 10.0
Sección
$

Sección
%

Una orden MC_MoveVelocity activa notifica el alcance de la velocidad consignada a través de "InVel_1". Se‐
guidamente es interrumpida por otra orden MC_MoveVelocity. La interrupción se notifica mediante "Abort_1". En
cuanto se alcanza la nueva velocidad de destino 15.0 el sistema lo notifica mediante "InVel_2". A continuación
el eje continúa moviéndose de forma constante a la nueva velocidad.
Una orden MC_MoveVelocity activa es interrumpida por otra orden MC_MoveVelocity antes de alcanzar la
velocidad consignada. La interrupción se notifica mediante "Abort_1". En cuanto se alcanza la nueva velocidad
de destino 15.0 el sistema lo notifica mediante "InVel_2". A continuación el eje continúa moviéndose de forma
constante a la nueva velocidad.

MC_MoveJog
MC_MoveJog: Mover eje en modo Jog a partir de V6
Descripción
La instrucción de Motion Control "MC_MoveJog" mueve el eje de forma constante a la
velocidad predeterminada en modo Jog. Utilice esta instrucción de Motion Control para, p.ej.,
fines de test y puesta en servicio.

Requisitos
● El objeto tecnológico Eje de posicionamiento se ha configurado correctamente.
● El eje está habilitado.

Comportamiento de relevo
La orden MC_MoveJog puede ser interrumpida por las siguientes órdenes de Motion Control:
● Orden MC_Home Mode = 3
● Orden MC_Halt
● Orden MC_MoveAbsolute
● Orden MC_MoveRelative
● Orden MC_MoveVelocity
● Orden MC_MoveJog
● Orden MC_CommandTable
La nueva orden MC_MoveJog interrumpe las siguientes órdenes en curso de Motion Control:
● Orden MC_Home Mode = 3
● Orden MC_Halt

Programación del PLC
Manual de programación y manejo, 11/2019

3005

Instrucciones
4.1 Instrucciones
● Orden MC_MoveAbsolute
● Orden MC_MoveRelative
● Orden MC_MoveVelocity
● Orden MC_MoveJog
● Orden MC_CommandTable

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_SpeedAxis

-

Objeto tecnológico del eje

JogForward

INPUT

BOOL

FALSE

Mientras el parámetro sea TRUE, el eje se moverá a
la velocidad predeterminada en el parámetro "Velo‐
city" en sentido positivo.

JogBackward

INPUT

BOOL

FALSE

Mientras el parámetro sea TRUE, el eje se moverá a
la velocidad predeterminada en el parámetro "Velo‐
city" en sentido negativo.

Si ambos parámetros son al mismo tiempo TRUE, el eje se detiene con la deceleración configurada. En los parámetros
"Error", "ErrorID" y "ErrorInfo" se muestra un error.
Velocity

INPUT

REAL

10.0

Preajuste de velocidad para el modo Jog.
Límites:
Velocidad de arranque/parada ≤ Velocity ≤ velocidad
máxima

PositionControlled

INPUT

BOOL

TRUE

FALSE Modo sin regulación de posición
TRUE

Modo con regulación de posición

El parámetro es válido mientras se ejecuta la orden
MC_MoveJog. Después volverá a tener validez el
ajuste de MC_Power.
Si se utiliza un eje PTO, el parámetro se ignora.
InVelocity

OUTPUT

BOOL

FALSE

TRUE

La velocidad indicada en el parámetro "Ve‐
locity" ha sido alcanzada.

Busy

OUTPUT

BOOL

FALSE

TRUE

Orden en proceso

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

La orden ha sido interrumpida por otra du‐
rante su procesamiento.

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar la orden. La
causa del error se puede consultar en los
parámetros "ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro
"ErrorID"

Consulte también
MC_Power: Habilitar, bloquear eje a partir de V6 (Página 2979)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico a partir de V6 (Página 2984)

3006

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
MC_Home: Referenciar eje, ajustar punto de referencia a partir de V6 (Página 2986)
MC_Halt: Parar eje a partir de V6 (Página 2990)
MC_MoveAbsolute: Posicionar eje de forma absoluta a partir de V6 (Página 2993)
MC_MoveRelative: Posicionar eje de forma relativa a partir de V6 (Página 2997)
MC_MoveVelocity: Mover eje con especificación de velocidad a partir de V6 (Página 3001)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos a partir de
V6 (Página 3009)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje a partir de V6 (Página 3011)
MC_ReadParam: Leer de forma continuada datos de movimiento de un eje de
posicionamiento a partir de V6 (Página 3013)
MC_WriteParam: Escribir variable del eje de posicionamiento a partir de V6 (Página 3016)

Programación del PLC
Manual de programación y manejo, 11/2019

3007

Instrucciones
4.1 Instrucciones

MC_MoveJog: Diagrama de funciones a partir de V6
Diagrama de funcionamiento
$
0&B0RYH-RJ
$[LVB
-RJB)
-RJB%

WUXH

$[LV
,Q9HORFLW\
-RJ)RUZDUG
%XV\
-RJ%DFNZDUG &RPPDQG$ERUWHG
(UURU
9HORFLW\
(UURU,'
3RVLWLRQ&RQWUROOHG
(UURU,QIR

,Q9HOB
%XV\B

$
-RJB)
-RJB%
,Q9HOB
%XV\B




W




W




W




W


9HORFLW\
$[LVB




W



$

%

Los siguientes valores han sido configurados en la ventana de configuración
Dinámica > General:
● Aceleración: 10.0
● Deceleración: 5.0
Sección
$

Sección
%

3008

"Jog_F" permite mover el eje en sentido positivo en modo Jog. En cuanto se alcanza la velocidad de destino 50.0
el sistema lo notifica a través de "InVel_1". Tras desactivar "Jog_F" el eje frena hasta pararse del todo.
"Jog_B" permite mover el eje en sentido negativo en modo Jog. En cuanto se alcanza la velocidad de destino
-50.0 el sistema lo notifica a través de "InVel_1".
Si está activado "Jog_B", el valor del parámetro "Velocity" se modifica a 25.0. "InVel_1" se desactiva y el eje
frena. En cuanto se alcanza la nueva velocidad de destino -25.0 el sistema lo notifica mediante "InVel_1". Tras
desactivar "Jog_B" el eje frena hasta pararse del todo.

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_CommandTable
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos a partir de V6
Descripción
La instrucción de Motion Control "MC_CommandTable" reúne varias órdenes individuales de
control de un eje en una secuencia de movimientos. La "MC_CommandTable" está disponible
para ejes con conexión de accionamiento mediante PTO (Pulse Train Output).

Requisitos
● El objeto tecnológico Eje de posicionamiento se ha insertado y configurado correctamente.
● El accionamiento está conectado mediante PTO (Pulse Train Output).
● El objeto tecnológico Tabla de órdenes se ha insertado y configurado correctamente.
● El eje está habilitado.

Comportamiento de relevo
La orden MC_CommandTable puede ser cancelada por las siguientes órdenes de Motion
Control:
● Orden MC_Home Mode = 3
● Orden MC_Halt
● Orden MC_MoveAbsolute
● Orden MC_MoveRelative
● Orden MC_MoveVelocity
● Orden MC_MoveJog
● Orden MC_CommandTable
La nueva orden MC_CommandTable cancela las siguientes órdenes de Motion Control en
curso:
● Orden MC_Home Mode = 3
● Orden MC_Halt
● Orden MC_MoveAbsolute
● Orden MC_MoveRelative
● Orden MC_MoveVelocity
● Orden MC_MoveJog
● Orden MC_CommandTable
La orden Motion Control en curso se cancela cuando se inicia la primera orden
"Positioning Relative", "Positioning Absolute", "Velocity set point" o "Halt".

Programación del PLC
Manual de programación y manejo, 11/2019

3009

Instrucciones
4.1 Instrucciones

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_SpeedAxis

-

Objeto tecnológico del eje

CommandTa‐
ble

INPUT

TO_Command‐
Table

-

Objeto tecnológico de la tabla de órdenes

Execute

INPUT

BOOL

FALSE

Inicio de la tabla de órdenes con flanco ascendente

StartStep

INPUT

INT

1

Indicación que señala a partir de qué paso debe procesar‐
se la tabla de órdenes.
Límites:
1 ≤ StartStep ≤ EndStep

EndStep

INPUT

INT

32

Indicación que señala hasta qué paso debe procesarse la
tabla de órdenes.
Límites:
StartStep ≤ EndStep ≤ 32

Done

OUTPUT

BOOL

FALSE

TRUE

La tabla de órdenes se ha procesado correcta‐
mente

Busy

OUTPUT

BOOL

FALSE

TRUE

La tabla de órdenes se encuentra en proceso

CommandA‐
borted

OUTPUT

BOOL

FALSE

TRUE

La tabla de órdenes ha sido cancelada por otra
orden durante el procesamiento.

Error

OUTPUT

BOOL

FALSE

TRUE

Durante el procesamiento de la tabla de órdenes
se ha producido un error. La causa del error se
puede consultar en los parámetros "ErrorID" y
"ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro "Erro‐
rID"

CurrentStep

OUTPUT

INT

0

Paso de la tabla de órdenes que se encuentra actualmente
en preparación

StepCode

OUTPUT

WORD

16#0000

Valor numérico/patrón de bits definido por el usuario que
corresponde a la etapa actualmente en procesamiento

Consulte también
MC_Power: Habilitar, bloquear eje a partir de V6 (Página 2979)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico a partir de V6 (Página 2984)
MC_Home: Referenciar eje, ajustar punto de referencia a partir de V6 (Página 2986)
MC_Halt: Parar eje a partir de V6 (Página 2990)
MC_MoveAbsolute: Posicionar eje de forma absoluta a partir de V6 (Página 2993)
MC_MoveRelative: Posicionar eje de forma relativa a partir de V6 (Página 2997)
MC_MoveVelocity: Mover eje con especificación de velocidad a partir de V6 (Página 3001)
MC_MoveJog: Mover eje en modo Jog a partir de V6 (Página 3005)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje a partir de V6 (Página 3011)

3010

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
MC_ReadParam: Leer de forma continuada datos de movimiento de un eje de
posicionamiento a partir de V6 (Página 3013)
MC_WriteParam: Escribir variable del eje de posicionamiento a partir de V6 (Página 3016)

MC_ChangeDynamic
MC_ChangeDynamic: Modificar ajustes dinámicos del eje a partir de V6
Descripción
La instrucción de Motion Control "MC_ChangeDynamic" permite modificar los ajustes
siguientes del eje:
● Modificar valor del tiempo de aceleración (aceleración)
● Modificar valor del tiempo de deceleración (deceleración)
● Modificar valor del tiempo de deceleración de parada de emergencia (deceleración de
parada de emergencia)
● Modificar valor del tiempo de redondeo (tirón)
El efecto del cambio se puede consultar en la descripción de las variables.

Requisitos
El objeto tecnológico Eje de posicionamiento se ha configurado correctamente.

Comportamiento de relevo
Una orden MC_ChangeDynamic no puede ser cancelada por ninguna otra orden de Motion
Control.
Una nueva orden MC_ChangeDynamic no cancela ninguna orden de Motion Control en curso.

Parámetro
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

-

Objeto tecnológico del eje

TO_SpeedAxis

Execute

INPUT

BOOL

FALSE

Inicio de la orden con flanco ascendente

Change‐
RampUp

INPUT

BOOL

FALSE

TRUE

RampUpTi‐
me

INPUT

REAL

5.00

Tiempo (en segundos) que debe pasar para acelerar el eje
sin limitación de tirones desde la parada a la velocidad má‐
xima configurada.

Modificar tiempo de posicionamiento según el pa‐
rámetro de entrada "RampUpTime":

El cambio afecta al valor de la variable <Nombre del
eje>.Config.DynamicDefaults.Acceleration. El efecto de los
cambios puede consultarse en la descripción de esta varia‐
ble.

Programación del PLC
Manual de programación y manejo, 11/2019

3011

Instrucciones
4.1 Instrucciones
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Change‐
INPUT
RampDown

BOOL

FALSE

TRUE

Ramp‐
DownTime

REAL

5.00

Tiempo (en segundos) que debe pasar para decelerar el eje
sin limitación de tirones desde la velocidad máxima configu‐
rada hasta su detención

INPUT

Tiempo de deceleración según el parámetro de en‐
trada "RampDownTime" modificado

El cambio afecta al valor de la variable <Nombre del
eje>.Config.DynamicDefaults.Deceleration . El efecto de los
cambios puede consultarse en la descripción de esta varia‐
ble.
ChangeE‐
mergency

INPUT

BOOL

FALSE

TRUE

Modificar tiempo de deceleración de parada de
emergencia según el parámetro de entrada "Emer‐
gencyRampTime"

Emer‐
gency‐
RampTime

INPUT

REAL

2.00

Tiempo (en segundos) que debe transcurrir para decelerar el
eje sin limitación de tirones en el modo de parada de emer‐
gencia desde la velocidad máxima configurada hasta la ve‐
locidad cero
El cambio afecta al valor de la variable <Nombre del
eje>.Config.DynamicDefaults.EmergencyDeceleration . El
efecto de los cambios puede consultarse en la descripción de
esta variable.

Change‐
JerkTime

INPUT

BOOL

FALSE

TRUE

Modificar tiempo de redondeo según el parámetro
de entrada "JerkTime"

JerkTime

INPUT

REAL

0.25

Tiempo de redondeo (en segundos) que se aplica a la rampa
de aceleración y deceleración del eje
El cambio afecta al valor de la variable <Nombre del
eje>.Config.DynamicDefaults.Jerk . El efecto de los cambios
puede consultarse en la descripción de esta variable.

Done

OUTPUT

BOOL

FALSE

TRUE

Los valores modificados se han escrito en el DB
tecnológico. En la descripción de las variables se
indica cuándo surte efecto la modificación.

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar la orden. La causa
del error se puede consultar en los parámetros
"ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro "ErrorID"

Nota
En los parámetros de entrada "RampUpTime", "RampDownTime", "EmergencyRampTime" y
"JerkTime" se pueden indicar valores que excedan los valores límite admisibles de los
parámetros resultantes: "aceleración", "deceleración", "deceleración de parada de
emergencia" y "tirón".
Teniendo en cuenta las ecuaciones y límites del capítulo "Dinámica", recuerde que las
entradas que efectúe deben encontrarse dentro del rango permitido.

3012

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Consulte también
MC_Power: Habilitar, bloquear eje a partir de V6 (Página 2979)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico a partir de V6 (Página 2984)
MC_Home: Referenciar eje, ajustar punto de referencia a partir de V6 (Página 2986)
MC_Halt: Parar eje a partir de V6 (Página 2990)
MC_MoveAbsolute: Posicionar eje de forma absoluta a partir de V6 (Página 2993)
MC_MoveRelative: Posicionar eje de forma relativa a partir de V6 (Página 2997)
MC_MoveVelocity: Mover eje con especificación de velocidad a partir de V6 (Página 3001)
MC_MoveJog: Mover eje en modo Jog a partir de V6 (Página 3005)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos a partir de
V6 (Página 3009)
MC_ReadParam: Leer de forma continuada datos de movimiento de un eje de
posicionamiento a partir de V6 (Página 3013)
MC_WriteParam: Escribir variable del eje de posicionamiento a partir de V6 (Página 3016)

MC_ReadParam
MC_ReadParam: Leer de forma continuada datos de movimiento de un eje de posicionamiento a partir
de V6
Descripción
La instrucción de Motion Control "MC_ReadParam" permite la lectura continua de los datos de
movimiento y avisos de estado de un eje. El valor actual de las correspondientes variables se
determina al iniciarse la orden.

Programación del PLC
Manual de programación y manejo, 11/2019

3013

Instrucciones
4.1 Instrucciones
Pueden leerse los siguientes datos de movimiento y avisos de estado:
● A partir de la versión tecnológica V4:
– Posición de consigna del eje
– Velocidad de consigna y real del eje
– Distancia actual del eje hasta la posición de destino
– Posición de destino del eje
● A partir de la versión tecnológica V5, además:
– Posición real del eje
– Velocidad real del eje
– Error de seguimiento actual
– Estado del accionamiento
– Estado del encóder
– Bits de estado
– Bits de error

Requisitos
El objeto tecnológico Eje de posicionamiento se ha configurado correctamente.

Comportamiento de relevo
Una orden MC_ReadParam no puede ser cancelada por ninguna otra orden de Motion Control.
Una nueva orden MC_ReadParam no cancela ninguna orden de Motion Control en curso.

Parámetro
Parámetro

Declaración

Tipo de datos

Valor por de‐ Descripción
fecto

Enable

INPUT

BOOL

FALSE

TRUE

Leer la variable determinada a través de "Parame‐
ter" y almacenar el valor en la dirección de destino
determinada a través de "Value".

FALSE No actualizar datos de movimiento parametrizados

3014

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parámetro

Declaración

Tipo de datos

Valor por de‐ Descripción
fecto

Parameter

INPUT

VARIANT
(REAL)

-

Puntero VARIANT en el valor que se debe leer. Las siguien‐
tes variables son admisibles:
● <Nombre de eje>.Position
● <Nombre de eje>.Velocity
● <Nombre de eje>.ActualPosition
● <Nombre de eje>.ActualVelocity
● <Nombre de eje>.StatusPositioning.<Nombre de
variable>
● <Nombre de eje>.StatusDrive.<Nombre de variable>
● <Nombre de eje>.StatusSensor.<Nombre de variable>
● <Nombre de eje>.StatusBits.<Nombre de variable>
● <Nombre de eje>.ErrorBits.<Nombre de variable>
La descripción de las variables y estructuras de variables
mencionadas se encuentra en el anexo AUTOHOTSPOT.

Value

INOUT

VARIANT
(REAL)

-

Valid

OUTPUT

BOOL

FALSE

Puntero VARIANT en la variable de destino o en la dirección
de destino en la que se debe escribir el valor leído.
TRUE

El valor leído es válido.

FALSE El valor leído no es válido.
Busy

OUTPUT

BOOL

FALSE

TRUE

Orden en proceso

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar la orden. La causa
del error se puede consultar en los parámetros
"ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro "ErrorID"

Consulte también
MC_Power: Habilitar, bloquear eje a partir de V6 (Página 2979)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico a partir de V6 (Página 2984)
MC_Home: Referenciar eje, ajustar punto de referencia a partir de V6 (Página 2986)
MC_Halt: Parar eje a partir de V6 (Página 2990)
MC_MoveAbsolute: Posicionar eje de forma absoluta a partir de V6 (Página 2993)
MC_MoveRelative: Posicionar eje de forma relativa a partir de V6 (Página 2997)
MC_MoveVelocity: Mover eje con especificación de velocidad a partir de V6 (Página 3001)
MC_MoveJog: Mover eje en modo Jog a partir de V6 (Página 3005)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos a partir de
V6 (Página 3009)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje a partir de V6 (Página 3011)
MC_WriteParam: Escribir variable del eje de posicionamiento a partir de V6 (Página 3016)

Programación del PLC
Manual de programación y manejo, 11/2019

3015

Instrucciones
4.1 Instrucciones

MC_WriteParam
MC_WriteParam: Escribir variable del eje de posicionamiento a partir de V6
Descripción
La instrucción de Motion Control "MC_WriteParam" permite escribir variables del objeto
tecnológico Eje de posicionamiento en el programa de usuario. A diferencia de la asignación
de valores de las variables en el programa de usuario, "MC_WriteParam" también puede
modificar valores de variables de solo lectura.
Las variables que se pueden escribir en las distintas condiciones, así como el momento en el
que se hacen efectivos los cambios, se pueden consultar en la descripción de las variables del
objeto tecnológico.

Requisitos
● El objeto tecnológico Eje de posicionamiento se ha configurado correctamente.
● Para escribir variables que solo son legibles en el programa de usuario, el eje debe estar
bloqueado.
● Las variables cuya modificación requiere un reinicio no se pueden escribir con
"MC_WriteParam".

Comportamiento de relevo
Una orden MC_WriteParam no puede ser cancelada por ninguna otra orden de Motion Control.
Una nueva orden MC_WriteParam no cancela ninguna orden de Motion Control en curso.

Parámetro
Parámetro

Declaración

Tipo de datos

Valor por defecto Descripción

Parameter

INPUT

VARIANT (BOOL, INT,
DINT, UDINT, REAL)

-

Puntero VARIANT en la variable del objeto
tecnológico Eje de posicionamiento (direc‐
ción de destino)

Value

INPUT

VARIANT (BOOL, INT,
DINT, UDINT, REAL)

-

Puntero VARIANT en el valor (dirección
de origen) que se desea escribir.

Execute

INPUT

BOOL

FALSE

Inicio de la orden con flanco ascendente

Done

OUTPUT

BOOL

FALSE

TRUE

Se ha escrito el valor

Busy

OUTPUT

BOOL

FALSE

TRUE

Orden en proceso

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar
la orden. La causa del error se
puede consultar en los paráme‐
tros "ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del
parámetro "ErrorID"

3016

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Consulte también
MC_Power: Habilitar, bloquear eje a partir de V6 (Página 2979)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico a partir de V6 (Página 2984)
MC_Home: Referenciar eje, ajustar punto de referencia a partir de V6 (Página 2986)
MC_Halt: Parar eje a partir de V6 (Página 2990)
MC_MoveAbsolute: Posicionar eje de forma absoluta a partir de V6 (Página 2993)
MC_MoveRelative: Posicionar eje de forma relativa a partir de V6 (Página 2997)
MC_MoveVelocity: Mover eje con especificación de velocidad a partir de V6 (Página 3001)
MC_MoveJog: Mover eje en modo Jog a partir de V6 (Página 3005)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos a partir de
V6 (Página 3009)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje a partir de V6 (Página 3011)
MC_ReadParam: Leer de forma continuada datos de movimiento de un eje de
posicionamiento a partir de V6 (Página 3013)

S7-1200 Motion Control V4...5
MC_Power
MC_Power: Habilitar/bloquear eje V4...5
Descripción
La instrucción de Motion Control "MC_Power" habilita o bloquea un eje.

Requisitos
● El objeto tecnológico Eje de posicionamiento se ha configurado correctamente.
● No hay ningún error que impida la habilitación.

Comportamiento de relevo
El procesamiento del "MC_Power" no puede ser cancelado por ninguna petición de Motion
Control.
Al bloquear el eje (parámetro de entrada "Enable" = FALSE ) se cancelan todas las peticiones
de Motion Control conforme al "StopMode" seleccionado en el respectivo objeto tecnológico.

Programación del PLC
Manual de programación y manejo, 11/2019

3017

Instrucciones
4.1 Instrucciones

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_Axis

-

Objeto tecnológico del eje

Enable

INPUT

BOOL

FALSE

TRUE

El eje es habilitado.

FALSE Todas las peticiones en curso se cancelan confor‐
me al "StopMode" parametrizado. El eje se detiene
y se bloquea.
StopMode

INPUT

INT

0

0

Parada de emergencia
Si existe una demanda de bloqueo del eje, éste fre‐
na con la deceleración de parada de emergencia
configurada. Cuando el eje se para, se bloquea.

1

Desconexión inmediata
Si existe una demanda de bloqueo del eje, se emite
la consigna cero y se bloquea el eje. En función de
la configuración, el eje se frena en el accionamiento
y se para.
Si el accionamiento se conecta mediante PTO (Pul‐
se Train Output):
al bloquear el eje, dadas las características técni‐
cas la salida de impulsos se detiene con una dece‐
leración que depende de la frecuencia:
● Frecuencia de salida ≥ 100 Hz
Deceleración: máx. 30 ms
● Frecuencia de salida < 100 Hz
Deceleración: 30 ms hasta máx. 1,5 s a 2 Hz

2

Parada de emergencia con limitación de tirones
Si existe una demanda de bloqueo del eje, éste fre‐
na con la deceleración de parada de emergencia
configurada. Si la limitación de tirones está activa‐
da, se tiene en cuenta el tirón configurado. Cuando
el eje se para, se bloquea.

3018

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Status

OUTPUT

FALSE

Estado de la habilitación del eje

BOOL

FALSE El eje está bloqueado
El eje no ejecuta ninguna petición de Motion Con‐
trol y no acepta nuevas peticiones (excepción: Pe‐
tición MC_Reset).
Si el accionamiento se conecta mediante PTO (Pul‐
se Train Output):
El eje no está referenciado.
Al bloquear el eje, el estado cambia a FALSE solo
cuando el eje alcanza la velocidad cero.
TRUE

El eje está habilitado
El eje está listo para ejecutar peticiones de Motion
Control.
Al habilitar el eje, el estado cambia a TRUE en
cuanto se produce la señal "Accionamiento listo". Si
no se ha configurado la señal del accionamiento
"Accionamiento listo" en la configuración del eje, el
estado cambia inmediatamente a TRUE.

Busy

OUTPUT

BOOL

FALSE

TRUE

"MC_Power" está activo.

Error

OUTPUT

BOOL

FALSE

TRUE

En la instrucción de Motion Control "MC_Power" o
el objeto tecnológico correspondiente se ha produ‐
cido un error. La causa del error se puede consultar
en los parámetros "ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro "ErrorID"

Nota
Si el eje se desconecta a causa de un error, se vuelve a habilitar automáticamente tras eliminar
y acusar el error. Requisito para ello es que el parámetro de entrada "Enable" mantenga el
valor TRUE durante esta operación.

Habilitación de un eje con señales del accionamiento configuradas
Para habilitar un eje, proceda del siguiente modo:
1. Compruebe los requisitos antes mencionados.
2. Configure el parámetro de entrada "StopMode" con el valor deseado. Ponga el parámetro
de entrada "Enable" en TRUE.
La salida de habilitación para "Habilitar accionamiento" cambia a TRUE para habilitar la
potencia del accionamiento. La CPU aguarda la señal "Accionamiento listo" del
accionamiento.
El eje queda habilitado en cuanto se emite la señal "Accionamiento listo" en la entrada de
disponibilidad configurada de la CPU. El parámetro de salida "Status", así como la variable
del objeto tecnológico <Nombre del eje>.StatusBits.Enable muestran el valor TRUE.

Programación del PLC
Manual de programación y manejo, 11/2019

3019

Instrucciones
4.1 Instrucciones

Habilitación de un eje sin señales del accionamiento configuradas
Para habilitar un eje, proceda del siguiente modo:
1. Compruebe los requisitos antes mencionados.
2. Configure el parámetro de entrada "StopMode" con el valor deseado. Ponga el parámetro
de entrada "Enable" en TRUE. El eje es habilitado. El parámetro de salida "Status", así
como la variable del objeto tecnológico <Nombre del eje>.StatusBits.Enable muestran el
valor TRUE.

Bloqueo de un eje
Para bloquear un eje puede proceder de la siguiente manera:
1. Detenga el eje.
La variable del objeto tecnológico <Nombre del eje:>.StatusBits.StandStill permite
reconocer el momento de parada del eje.
2. Cambie el parámetro de entrada "Enable" a FALSE en cuanto se produzca la parada.
3. Si los parámetros de salida "Busy" y "Status", así como la variable del objeto tecnológico
<Nombre del eje>.StatusBits.Enable muestran el valor FALSE, el bloqueo del eje de habrá
finalizado.

Consulte también
MC_Power: Diagrama de función V4...5 (Página 3021)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico V4...5 (Página 3022)
MC_Home: Referenciar eje; fijar punto de referencia V4...5 (Página 3023)
MC_Halt: Parar eje V4...5 (Página 3028)
MC_MoveAbsolute: Posicionar eje de forma absoluta V4...5 (Página 3031)
MC_MoveRelative: Posicionar eje de forma relativa V4...5 (Página 3035)
MC_MoveVelocity: Mover eje con especificación de velocidad de giro V4...5 (Página 3039)
MC_MoveJog: Mover eje en modo Jog V4...5 (Página 3043)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje V4...5 (Página 3048)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos V4...5
(Página 3046)
MC_ReadParam: Leer de forma continuada datos de movimiento de un eje de
posicionamiento V4...5 (Página 3051)
MC_WriteParam: Escribir variable del eje de posicionamiento V4...5 (Página 3053)
S7-1200 Motion Control V1...3 (Página 3054)

3020

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_Power: Diagrama de función V4...5
Diagrama de funcionamiento

$[LVB
(QDB


)%

)%

0&B3RZHU

0&B5HVHW

$[LV
(QDEOH
6WRS0RGH

6WDWXV
%XV\
(UURU
(UURU,'
(UURU,QIR


)%

6WDWXVB
%XV\B
(UURUB

$[LVB
([HB

$[LV
([HFXWH

'RQH
%XV\
(UURU
(UURU,'
(UURU,QIR

'RQHB
%XV\B



(QDB




W

6WDWXVB




W






W

([HB




W

'RQHB




W

%XV\B




W

'ULYH(QDEOHG




W

'ULYH5HDG\




W

%XV\B
(UURUB

)%

'ULYH,QWHUIDFH

①
②

W

Se habilita un eje y a continuación se vuelve a bloquear. En cuanto el accionamiento devuelve la señal "Accionamiento
listo" a la CPU se puede verificar el éxito de la habilitación a través de "Status_1".
Una vez habilitado un eje se produce un error, provocando el bloqueo del eje. El error se soluciona y se acusa con
"MC_Reset". A continuación se vuelve a habilitar el eje.

Consulte también
MC_Power: Habilitar/bloquear eje V4...5 (Página 3017)

Programación del PLC
Manual de programación y manejo, 11/2019

3021

Instrucciones
4.1 Instrucciones

MC_Reset
MC_Reset: Acusar errores, reiniciar un objeto tecnológico V4...5
Descripción
La instrucción de Motion Control "MC_Reset" permite acusar "Errores de funcionamiento con
parada del eje" y "Errores de configuración". En la "Lista de ErrorIDs y ErrorInfos", en el
apartado "Ayuda", puede consultar los errores que deben ser acusados.
Es posible cargar la configuración del eje en la memoria de trabajo después de una carga en
el estado operativo RUN.

Requisitos
● El objeto tecnológico Eje de posicionamiento se ha configurado correctamente.
● En caso de un error de configuración acusable debe haberse eliminado la causa (p. ej. la
aceleración en el objeto tecnológico Eje de posicionamiento ha sido cambiada a un valor
válido).

Comportamiento de relevo
La petición MC_Reset no puede ser cancelada por ninguna otra petición de Motion Control.
La nueva petición MC_Reset no cancela ninguna otra petición de Motion Control en curso.

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_Axis

-

Objeto tecnológico del eje

Execute

INPUT

BOOL

FALSE

Inicio de la petición con flanco ascendente

Restart

INPUT

BOOL

FALSE

TRUE

Carga la configuración del eje en la memoria de
trabajo desde la memoria de carga. La petición solo
puede ejecutarse con el eje bloqueado.
Para ello, tenga en cuenta las indicaciones referen‐
tes a la Carga en la CPU.

FALSE Acusa errores pendientes
Done

OUTPUT

BOOL

FALSE

TRUE

El error se ha acusado.

Busy

OUTPUT

BOOL

FALSE

TRUE

Petición en proceso

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar la petición. La cau‐
sa del error se puede consultar en los parámetros
"ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro "ErrorID"

3022

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Acusar un error con MC_Reset
Para acusar un error proceda del siguiente modo:
1. Compruebe los requisitos antes mencionados.
2. Inicie el acuse del error mediante un flanco ascendente en el parámetro de entrada
"Execute".
3. El error ha sido acusado si el parámetro de entrada "Done" muestra el valor TRUE y la
variable del objeto tecnológico <Nombre del eje:>.StatusBits.Error el valor FALSE.

Consulte también
MC_Power: Habilitar/bloquear eje V4...5 (Página 3017)
MC_Home: Referenciar eje; fijar punto de referencia V4...5 (Página 3023)
MC_Halt: Parar eje V4...5 (Página 3028)
MC_MoveAbsolute: Posicionar eje de forma absoluta V4...5 (Página 3031)
MC_MoveRelative: Posicionar eje de forma relativa V4...5 (Página 3035)
MC_MoveVelocity: Mover eje con especificación de velocidad de giro V4...5 (Página 3039)
MC_MoveJog: Mover eje en modo Jog V4...5 (Página 3043)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos V4...5
(Página 3046)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje V4...5 (Página 3048)
MC_ReadParam: Leer de forma continuada datos de movimiento de un eje de
posicionamiento V4...5 (Página 3051)
MC_WriteParam: Escribir variable del eje de posicionamiento V4...5 (Página 3053)
S7-1200 Motion Control V1...3 (Página 3054)

MC_Home
MC_Home: Referenciar eje; fijar punto de referencia V4...5
Descripción
La instrucción de Motion Control "MC_Home" permite contrastar la coordenada axial con la
posición física real del accionamiento. Si el eje debe posicionarse de forma absoluta, es
necesaria el referenciado. Pueden ejecutarse los siguientes tipos de referenciado:
● Referenciado activo (Mode = 3)
La aproximación al punto de referencia se ejecuta automáticamente.
● Referenciado pasivo (Mode = 2)
En el referenciado pasivo, la instrucción de Motion Control "MC_Home" no realiza ningún
movimiento de referencia. El desplazamiento necesario para ello debe ser realizado por el
usuario con otras instrucciones de Motion Control. El eje se referencia al detectarse el
sensor del punto de referencia.

Programación del PLC
Manual de programación y manejo, 11/2019

3023

Instrucciones
4.1 Instrucciones
● Referenciado directo absoluto (Mode = 0)
La posición actual del eje se fija con el valor del parámetro "Position".
● Referenciado directo relativo (Mode = 1)
La posición actual del eje se desplaza en la cuantía del valor del parámetro "Position".
● Ajuste relativo del encóder absoluto (Mode = 6)
La posición actual del eje se desplaza en la cuantía del valor del parámetro "Position".
● Ajuste absoluto del encóder absoluto (Mode = 7)
La posición actual del eje se fija con el valor del parámetro "Position".

Requisitos
● El objeto tecnológico Eje de posicionamiento se ha configurado correctamente.
● El eje está habilitado.
● Al iniciar con Mode = 0, 1 y 2 no puede haber ninguna petición MC_CommandTable activa.

Comportamiento de relevo
El comportamiento de relevo depende del modo seleccionado:
Mode = 0, 1, 6, 7
La petición MC_Home no puede ser cancelada por ninguna otra petición de Motion Control.
La petición MC_Home no cancela ninguna petición de Motion Control en curso. Las peticiones
de desplazamiento con referencia de posición continúan, después del referenciado, de
acuerdo con la nueva posición de referenciado (valor en el parámetro de entrada: "Position").
Mode = 2
La petición MC_Home puede ser cancelada por las siguientes peticiones de Motion Control:
● Petición MC_Home Mode = 2, 3
La nueva petición MC_Home cancela la siguiente petición de Motion Control en curso:
● Petición MC_Home Mode = 2
Las peticiones de desplazamiento con referencia de posición continúan, después del
referenciado, de acuerdo con la nueva posición de referenciado (valor en el parámetro de
entrada: "Position").
Mode = 3
La petición MC_Home puede ser cancelada por las siguientes peticiones de Motion Control:
● Petición MC_Home Mode = 3
● Petición MC_Halt
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable

3024

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
La nueva petición MC_Home cancela las siguientes peticiones de Motion Control en curso:
● Petición MC_Home Mode = 2, 3
● Petición MC_Halt
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable

Parámetro
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_Axis

-

Objeto tecnológico del eje

Execute

INPUT

BOOL

FALSE

Inicio de la petición con flanco ascendente

Position

INPUT

REAL

0.0

● Mode = 0, 2 y 3
Posición absoluta del eje una vez finalizado el
proceso de referenciado
● Mode = 1
Valor de corrección para la posición actual del eje
Límites:
-1.0e12 ≤ Position ≤ 1.0e12

Programación del PLC
Manual de programación y manejo, 11/2019

3025

Instrucciones
4.1 Instrucciones
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Mode

INPUT

0

Modo de toma de referencia

INT

0

Referenciado directo (absoluto)
La nueva posición del eje es el valor de
posición del parámetro "Position".

1

Referenciado directo (relativo)
La nueva posición del eje es la posición
actual del eje + el valor de posición del
parámetro "Position".

2

Referenciado pasivo
Referenciado conforme a la configuración
del eje. Tras el referenciado se aplica el
valor del parámetro "Position" como nue‐
va posición del eje.

3

Referenciado activo
Aproximación al punto de referencia con‐
forme a la configuración del eje. Tras el
referenciado se aplica el valor del pará‐
metro "Position" como nueva posición del
eje.

6

Ajuste del encóder absoluto (relativo)
La posición actual del eje se desplaza en
la cuantía del valor del parámetro "Posi‐
tion". El offset calculado del valor absoluto
se guarda de forma remanente en la CPU.
(<Nombre de eje>.StatusSensor.AbsEn‐
coderOffset)

7

Ajuste del encóder absoluto (absoluto)
La posición actual del eje se fija con el
valor del parámetro "Position". El offset
calculado del valor absoluto se guarda de
forma remanente en la CPU. (<Nombre
de eje>.StatusSensor.AbsEncoderOffset)

Done

OUTPUT

BOOL

FALSE

TRUE

La petición ha finalizado

Busy

OUTPUT

BOOL

FALSE

TRUE

Petición en proceso

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

La petición ha sido cancelada por otra du‐
rante su procesamiento.

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar la peti‐
ción. La causa del error se puede consul‐
tar en los parámetros "ErrorID" y "ErrorIn‐
fo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro
"ErrorID"

3026

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Desactivación del estado "referenciado"
El estado "referenciado" de un objeto tecnológico (<Nombre de eje>.StatusBits.HomingDone)
se desactiva cuando se dan las siguientes condiciones:
● Conexión del accionamiento mediante PTO (Pulse Train Output):
– Inicio de una petición "MC_Home" de referenciado activo
(el estado "referenciado" se activa de nuevo una vez concluido correctamente el
proceso de referenciado).
– Bloqueo del eje por la instrucción de Motion Control "MC_Power"
– Cambio entre modo automático y control manual
– Tras POWER OFF -> POWER ON de la CPU
– Tras un rearranque completo de la CPU (RUN-STOP -> STOP-RUN)
● Objetos tecnológicos con valores reales incrementales:
– Inicio de una petición "MC_Home" de referenciado activo
(el estado "referenciado" se activa de nuevo una vez concluido correctamente el
proceso de referenciado).
– Error en el sistema del encóder o fallo del encóder
– Reinicio del objeto tecnológico
– Tras POWER OFF → POWER ON de la CPU
– Borrado total
– Cambio de la configuración del encóder
● Objetos tecnológicos con valores reales absolutos:
– Error en el sistema del sensor/fallo del encóder
– Sustitución de la CPU
– Cambio de la configuración del encóder
– Restablecimiento de la configuración de fábrica de la CPU
– Transferencia de otro proyecto al controlador

Referenciado de un eje
Para referenciar el eje, proceda del siguiente modo:
1. Compruebe los requisitos antes mencionados.
2. Configure los valores con los parámetros de entrada necesarios e inicie el referenciado
mediante un flanco ascendente en el parámetro de entrada "Execute".
3. El referenciado concluye cuando el parámetro de salida muestra "Done" y la variable del
objeto tecnológico <Nombre del eje:>.StatusBits.HomingDone el valor TRUE.

Programación del PLC
Manual de programación y manejo, 11/2019

3027

Instrucciones
4.1 Instrucciones

Consulte también
MC_Power: Habilitar/bloquear eje V4...5 (Página 3017)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico V4...5 (Página 3022)
MC_Halt: Parar eje V4...5 (Página 3028)
MC_MoveAbsolute: Posicionar eje de forma absoluta V4...5 (Página 3031)
MC_MoveRelative: Posicionar eje de forma relativa V4...5 (Página 3035)
MC_MoveVelocity: Mover eje con especificación de velocidad de giro V4...5 (Página 3039)
MC_MoveJog: Mover eje en modo Jog V4...5 (Página 3043)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos V4...5
(Página 3046)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje V4...5 (Página 3048)
MC_ReadParam: Leer de forma continuada datos de movimiento de un eje de
posicionamiento V4...5 (Página 3051)
MC_WriteParam: Escribir variable del eje de posicionamiento V4...5 (Página 3053)
S7-1200 Motion Control V1...3 (Página 3054)

MC_Halt
MC_Halt: Parar eje V4...5
Descripción
La instrucción de Motion Control "MC_Halt" cancela todas las operaciones de movimiento y
frena el eje con la deceleración configurada hasta pararlo por completo. La posición de parada
no está definida.

Requisitos
● El objeto tecnológico Eje de posicionamiento se ha configurado correctamente.
● El eje está habilitado.

Comportamiento de relevo
La petición MC_Halt puede ser cancelada por las siguientes peticiones de Motion Control:
● Petición MC_Home Mode = 3
● Petición MC_Halt
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity

3028

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
● Petición MC_MoveJog
● Petición MC_CommandTable
La nueva petición MC_Halt cancela las siguientes peticiones de Motion Control en curso:
● Petición MC_Home Mode = 3
● Petición MC_Halt
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_SpeedAxis

-

Objeto tecnológico del eje

Execute

INPUT

BOOL

FALSE

Inicio de la petición con flanco ascendente

Done

OUTPUT

BOOL

FALSE

TRUE

Se ha alcanzado la velocidad cero

Busy

OUTPUT

BOOL

FALSE

TRUE

Petición en proceso

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

La petición ha sido cancelada por otra du‐
rante su procesamiento.

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar la petición.
La causa del error se puede consultar en los
parámetros "ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro
"ErrorID"

Consulte también
MC_Halt: Diagrama de función V4...5 (Página 3030)
MC_Power: Habilitar/bloquear eje V4...5 (Página 3017)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico V4...5 (Página 3022)
MC_Home: Referenciar eje; fijar punto de referencia V4...5 (Página 3023)
MC_MoveAbsolute: Posicionar eje de forma absoluta V4...5 (Página 3031)
MC_MoveRelative: Posicionar eje de forma relativa V4...5 (Página 3035)
MC_MoveVelocity: Mover eje con especificación de velocidad de giro V4...5 (Página 3039)
MC_MoveJog: Mover eje en modo Jog V4...5 (Página 3043)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos V4...5
(Página 3046)

Programación del PLC
Manual de programación y manejo, 11/2019

3029

Instrucciones
4.1 Instrucciones
MC_ChangeDynamic: Modificar ajustes dinámicos del eje V4...5 (Página 3048)
MC_ReadParam: Leer de forma continuada datos de movimiento de un eje de
posicionamiento V4...5 (Página 3051)
MC_WriteParam: Escribir variable del eje de posicionamiento V4...5 (Página 3053)
S7-1200 Motion Control V1...3 (Página 3054)

MC_Halt: Diagrama de función V4...5
Diagrama de funcionamiento

$[LVB
([HB




)%

)%

0&B0RYH9HORFLW\

0&B+DOW

$[LV
,Q9HORFLW\
([HFXWH
%XV\
9HORFLW\ &RPPDQG$ERUWHG
(UURU
'LUHFWLRQ
(UURU,'
&XUUHQW
(UURU,QIR



,Q9HOB
%XV\B
$ERUWB

$[LVB
([HB

$[LV
([HFXWH

'RQH
%XV\
&RPPDQG$ERUWHG
(UURU
(UURU,'
(UURU,QIR

'RQHB
%XV\B
$ERUWB



)%


([HB 

,Q9HOB 

W


%XV\B 

W


$ERUWB 

W

W

)%


([HB 

'RQHB 

W


%XV\B 

W


$ERUWB 

W

W


9HORFLW\
$[LVB 

3030

W

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Los siguientes valores han sido configurados en la ventana de configuración
Dinámica > General:
● Aceleración: 10.0
● Deceleración: 5.0

①
②

El eje se frena con una petición MC_Halt hasta pararse completamente. La parada completa se notifica mediante
"Done_2".
Mientras una petición MC_Halt frena el eje, dicha petición es cancelada por otra petición de desplazamiento. La can‐
celación se notifica mediante "Abort_2".

Consulte también
MC_Halt: Parar eje V4...5 (Página 3028)

MC_MoveAbsolute
MC_MoveAbsolute: Posicionar eje de forma absoluta V4...5
Descripción
La instrucción de Motion Control "MC_MoveAbsolute" inicia un movimiento de
posicionamiento del eje respecto a una posición absoluta.

Requisitos
● El objeto tecnológico Eje de posicionamiento se ha configurado correctamente.
● El eje está habilitado.
● El eje está referenciado.

Comportamiento de relevo
La petición MC_MoveAbsolute puede ser cancelada por las siguientes peticiones de Motion
Control:
● Petición MC_Home Mode = 3
● Petición MC_Halt
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable

Programación del PLC
Manual de programación y manejo, 11/2019

3031

Instrucciones
4.1 Instrucciones
La nueva petición MC_MoveAbsolute cancela las siguientes peticiones de Motion Control en
curso:
● Petición MC_Home Mode = 3
● Petición MC_Halt
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_Positionin‐
gAxis

-

Objeto tecnológico del eje

Execute

INPUT

BOOL

FALSE

Inicio de la petición con flanco ascendente

Position

INPUT

REAL

0.0

Posición absoluta de destino
Límites:
-1.0e12 ≤ Position ≤ 1.0e12

Velocity

INPUT

REAL

10.0

Velocidad del eje
No siempre se alcanza esta velocidad, dependiendo
de la aceleración y deceleración configuradas y de la
posición de destino fijada.
Límites:
Velocidad de arranque/parada ≤ Velocity ≤ velocidad
máxima

Done

OUTPUT

BOOL

FALSE

TRUE

Posición absoluta de destino alcanzada

Busy

OUTPUT

BOOL

FALSE

TRUE

Petición en proceso

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

La petición ha sido cancelada por otra du‐
rante su procesamiento.

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar la petición.
La causa del error se puede consultar en los
parámetros "ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro
"ErrorID"

Consulte también
MC_MoveAbsolute: Diagrama de función V4...5 (Página 3034)
MC_Power: Habilitar/bloquear eje V4...5 (Página 3017)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico V4...5 (Página 3022)
MC_Home: Referenciar eje; fijar punto de referencia V4...5 (Página 3023)

3032

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
MC_Halt: Parar eje V4...5 (Página 3028)
MC_MoveRelative: Posicionar eje de forma relativa V4...5 (Página 3035)
MC_MoveVelocity: Mover eje con especificación de velocidad de giro V4...5 (Página 3039)
MC_MoveJog: Mover eje en modo Jog V4...5 (Página 3043)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos V4...5
(Página 3046)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje V4...5 (Página 3048)
MC_ReadParam: Leer de forma continuada datos de movimiento de un eje de
posicionamiento V4...5 (Página 3051)
MC_WriteParam: Escribir variable del eje de posicionamiento V4...5 (Página 3053)
S7-1200 Motion Control V1...3 (Página 3054)

Programación del PLC
Manual de programación y manejo, 11/2019

3033

Instrucciones
4.1 Instrucciones

MC_MoveAbsolute: Diagrama de función V4...5
Diagrama de funcionamiento
)%

)%
0&B0RYH$EVROXWH

0&B0RYH$EVROXWH
$[LVB
([HB



$[LV
([HFXWH
3RVLWLRQ
9HORFLW\

'RQH
%XV\
&RPPDQG$ERUWHG
(UURU
(UURU,'
(UURU,QIR


)%
([HB
'RQHB
%XV\B
$ERUWB

)%
([HB
'RQHB
%XV\B

'RQHB
%XV\B
$ERUWB

$[LVB
([HB



$[LV
([HFXWH
3RVLWLRQ
9HORFLW\

'RQH
%XV\
&RPPDQG$ERUWHG
(UURU
(UURU,'
(UURU,QIR

'RQHB
%XV\B







W




W



W


W




W





W


W






9HORFLW\
$[LVB 

W



3RVLWLRQ
$[LVB 

W

Los siguientes valores han sido configurados en la ventana de configuración
Dinámica > General:
● Aceleración: 10.0
● Deceleración: 10.0

3034

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

①

②

Un eje es desplazado por una petición MC_MoveAbsolute a la posición absoluta 1000.0. En cuanto se alcanza la
posición de destino el sistema lo notifica mediante "Done_1". Con "Done_1" = TRUE se lanza otra petición MC_Mo‐
veAbsolute, con posición de destino 1500.0. Debido a los tiempos de reacción (p.ej. tiempo de ciclo del programa de
usuario, ...) se produce una breve parada del eje (ver representación ampliada). En cuanto se alcanza con éxito la nueva
posición de destino el sistema lo notifica mediante "Done_2".
Una petición MC_MoveAbsolute activa es cancelada por otra petición MC_MoveAbsolute. La cancelación se notifica
mediante "Abort_1". A continuación, el eje se mueve con la nueva velocidad hasta la nueva posición de destino 1500.0.
En cuanto se alcanza la nueva posición de destino el sistema lo notifica mediante "Done_2".

Consulte también
MC_MoveAbsolute: Posicionar eje de forma absoluta V4...5 (Página 3031)

MC_MoveRelative
MC_MoveRelative: Posicionar eje de forma relativa V4...5
Descripción
La instrucción de Motion Control "MC_MoveRelative" inicia un movimiento de posicionamiento
relativo respecto a la posición inicial.

Requisitos
● El objeto tecnológico Eje de posicionamiento se ha configurado correctamente.
● El eje está habilitado.

Comportamiento de relevo
La petición MC_MoveRelative puede ser cancelada por las siguientes peticiones de Motion
Control:
● Petición MC_Home Mode = 3
● Petición MC_Halt
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable
La nueva petición MC_MoveRelative cancela las siguientes peticiones de Motion Control en
curso:
● Petición MC_Home Mode = 3
● Petición MC_Halt

Programación del PLC
Manual de programación y manejo, 11/2019

3035

Instrucciones
4.1 Instrucciones
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_Positionin‐
gAxis

-

Objeto tecnológico del eje

Execute

INPUT

BOOL

FALSE

Inicio de la petición con flanco ascendente

Distance

INPUT

REAL

0.0

Trayecto de posicionamiento
Límites:
-1.0e12 ≤ Distance ≤ 1.0e12

Velocity

INPUT

REAL

10.0

Velocidad del eje
No siempre se alcanza esta velocidad, dependiendo
de la aceleración y deceleración configuradas y del
trayecto fijado.
Límites:
Velocidad de arranque/parada ≤ Velocity ≤ velocidad
máxima

Done

OUTPUT

BOOL

FALSE

TRUE

Posición de destino alcanzada

Busy

OUTPUT

BOOL

FALSE

TRUE

Petición en proceso

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

La petición ha sido cancelada por otra du‐
rante su procesamiento.

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar la petición.
La causa del error se puede consultar en los
parámetros "ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro
"ErrorID"

Consulte también
MC_MoveRelative: Diagrama de función V4...5 (Página 3038)
MC_Power: Habilitar/bloquear eje V4...5 (Página 3017)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico V4...5 (Página 3022)
MC_Home: Referenciar eje; fijar punto de referencia V4...5 (Página 3023)
MC_Halt: Parar eje V4...5 (Página 3028)
MC_MoveAbsolute: Posicionar eje de forma absoluta V4...5 (Página 3031)
MC_MoveVelocity: Mover eje con especificación de velocidad de giro V4...5 (Página 3039)

3036

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
MC_MoveJog: Mover eje en modo Jog V4...5 (Página 3043)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos V4...5
(Página 3046)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje V4...5 (Página 3048)
MC_ReadParam: Leer de forma continuada datos de movimiento de un eje de
posicionamiento V4...5 (Página 3051)
MC_WriteParam: Escribir variable del eje de posicionamiento V4...5 (Página 3053)
S7-1200 Motion Control V1...3 (Página 3054)

Programación del PLC
Manual de programación y manejo, 11/2019

3037

Instrucciones
4.1 Instrucciones

MC_MoveRelative: Diagrama de función V4...5
Diagrama de funcionamiento
$

$
0&B0RYH5HODWLYH

0&B0RYH5HODWLYH
$[LVB
([HB



$[LV
([HFXWH
'LVWDQFH
9HORFLW\

'RQH
%XV\
&RPPDQG$ERUWHG
(UURU
(UURU,'
(UURU,QIR

'RQHB
%XV\B
$ERUWB

$[LVB
([HB



$[LV
([HFXWH
'LVWDQFH
9HORFLW\

'RQH
%XV\
&RPPDQG$ERUWHG
(UURU
(UURU,'
(UURU,QIR

'RQHB
%XV\B

$
([HB
%XV\B
'RQHB
$ERUWB




W




W




W




W

$
([HB
%XV\B
'RQHB

9HORFLW\
$[LVB




W




W




W






3RVLWLRQ
$[LVB



W





W
$

%

Los siguientes valores han sido configurados en la ventana de configuración
Dinámica > General:
● Aceleración: 10.0
● Deceleración: 10.0

3038

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

①

②

Un eje es desplazado por una petición MC_MoveRelative en la distancia ("Distance") 1000.0. En cuanto se alcanza la
posición de destino el sistema lo notifica mediante "Done_1". Con "Done_1" = TRUE se lanza otra petición MC_Move‐
Relative con la distancia 500.0. Debido a los tiempos de reacción (p.ej. tiempo de ciclo del programa de usuario, ...) se
produce una breve parada del eje (ver representación ampliada). En cuanto se alcanza con éxito la nueva posición de
destino el sistema lo notifica mediante "Done_2".
Una petición MC_MoveRelative activa es cancelada por otra petición MC_MoveRelative. La cancelación se notifica
mediante "Abort_1". A continuación, el eje se mueve con la nueva velocidad hasta recorrer el nuevo trayecto ("Distance")
500.0. En cuanto se alcanza la nueva posición de destino el sistema lo notifica mediante "Done_2".

Consulte también
MC_MoveRelative: Posicionar eje de forma relativa V4...5 (Página 3035)

MC_MoveVelocity
MC_MoveVelocity: Mover eje con especificación de velocidad de giro V4...5
Descripción
La instrucción de Motion Control "MC_MoveVelocity" mueve el eje de forma constante a la
velocidad predeterminada.

Requisitos
● El objeto tecnológico Eje de posicionamiento se ha configurado correctamente.
● El eje está habilitado.

Comportamiento de relevo
La petición MC_MoveVelocity puede ser cancelada por las siguientes peticiones de Motion
Control:
● Petición MC_Home Mode = 3
● Petición MC_Halt
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable
La nueva petición MC_MoveVelocity cancela las siguientes peticiones de Motion Control en
curso:
● Petición MC_Home Mode = 3
● Petición MC_Halt

Programación del PLC
Manual de programación y manejo, 11/2019

3039

Instrucciones
4.1 Instrucciones
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_SpeedAxis

-

Objeto tecnológico del eje

Execute

INPUT

BOOL

FALSE

Inicio de la petición con flanco ascendente

Velocity

INPUT

REAL

10.0

Velocidad predeterminada para mover el eje
Límites:
Velocidad de inicio/parada ≤ |Velocity| ≤ velocidad
máxima
(Velocity = 0.0 está permitido)

Direction

INPUT

INT

0

Preajuste de sentido
0

Sentido de giro según el signo del valor del
parámetro "Velocity"

1

Sentido de giro positivo
(El signo del valor del parámetro "Velocity"
se ignora)

2

Sentido de giro negativo
(El signo del valor del parámetro "Velocity"
se ignora)

Current

INPUT

BOOL

FALSE

Mantener velocidad actual
FALSE "Mantener velocidad actual" desactivado.
Se utilizan los valores de los parámetros
"Velocity" y "Direction".
TRUE

"Mantener velocidad actual" activado. Los
valores de los parámetros "Velocity" y "Di‐
rection" no se tienen en cuenta.
En cuanto el eje vuelve a desplazarse a la
velocidad actual, el parámetro "InVelocity"
devuelve el valor TRUE.

InVelocity

OUTPUT

BOOL

FALSE

TRUE

● "Current" = FALSE:
La velocidad indicada en el parámetro
"Velocity" ha sido alcanzada.
● "Current" = TRUE:
El eje se mueve a la velocidad actual en
el momento de arranque.

Busy

OUTPUT

BOOL

FALSE

TRUE

Petición en proceso

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

La petición ha sido cancelada por otra du‐
rante su procesamiento.

3040

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Error

OUTPUT

BOOL

FALSE

TRUE

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro
"ErrorID"

Ha ocurrido un error al ejecutar la petición.
La causa del error se puede consultar en los
parámetros "ErrorID" y "ErrorInfo".

Nota
PLCopen versión 2.0
La instrucción de Motion Control "MC_MoveVelocity" a partir de V4 es conforme con la versión
2.0 de PLCopen.
Los parámetros "InVelocity" y "Busy" muestran su estado con independencia del parámetro
"Execute" hasta que la petición es relevada por otra o cancelada con un error. Tenga en cuenta
también al respecto el capítulo Seguimiento de peticiones en curso.

Comportamiento con velocidad de consigna cero (Velocity = 0.0)
Una petición MC_MoveVelocity con "Velocity" = 0.0 cancela (al igual que una petición
MC_Halt) las peticiones de movimiento activas y detiene el eje con la deceleración configurada.
Una vez alcanzada la parada se muestra en el parámetro de salida "InVelocity" el valor TRUE
durante al menos un ciclo de programa.
"Busy" muestra el valor TRUE durante un proceso de deceleración, cambiando a FALSE junto
con "InVelocity". Si el parámetro "Execute" = TRUE, "InVelocity" y "Busy" se indican
memorizados.
Cuando inicia la petición MC_MoveVelocity se activa el bit de estado "SpeedCommand" en el
objeto tecnológico. El bit de estado "ConstantVelocity" con la parada del eje. Ambos bits se
ajustan a la nueva situación con el inicio de una nueva petición de movimiento.

Consulte también
MC_MoveVelocity: Diagrama de función V4...5 (Página 3042)
MC_Power: Habilitar/bloquear eje V4...5 (Página 3017)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico V4...5 (Página 3022)
MC_Home: Referenciar eje; fijar punto de referencia V4...5 (Página 3023)
MC_Halt: Parar eje V4...5 (Página 3028)
MC_MoveAbsolute: Posicionar eje de forma absoluta V4...5 (Página 3031)
MC_MoveRelative: Posicionar eje de forma relativa V4...5 (Página 3035)
MC_MoveJog: Mover eje en modo Jog V4...5 (Página 3043)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos V4...5
(Página 3046)

Programación del PLC
Manual de programación y manejo, 11/2019

3041

Instrucciones
4.1 Instrucciones
MC_ChangeDynamic: Modificar ajustes dinámicos del eje V4...5 (Página 3048)
MC_ReadParam: Leer de forma continuada datos de movimiento de un eje de
posicionamiento V4...5 (Página 3051)
MC_WriteParam: Escribir variable del eje de posicionamiento V4...5 (Página 3053)
S7-1200 Motion Control V1...3 (Página 3054)

MC_MoveVelocity: Diagrama de función V4...5
Diagrama de funcionamiento
)%

)%
0&B0RYH9HORFLW\

0&B0RYH9HORFLW\
$[LV
,Q9HORFLW\
([HFXWH
%XV\
9HORFLW\ &RPPDQG$ERUWHG
(UURU
'LUHFWLRQ
(UURU,'
&XUUHQW
(UURU,QIR

$[LVB
([HB






,Q9HOB
%XV\B
$ERUWB

$[LVB
([HB




$[LV
,Q9HORFLW\
([HFXWH
%XV\
9HORFLW\ &RPPDQG$ERUWHG
(UURU
'LUHFWLRQ
(UURU,'
&XUUHQW
(UURU,QIR

,Q9HOB
%XV\B



)%


([HB 

W


%XV\B 

,Q9HOB 

W
W



$ERUWB 

W

)%


([HB 

%XV\B



,Q9HOB 

W
W
W


9HORFLW\ 
$[LVB 

3042

W

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Los siguientes valores han sido configurados en la ventana de configuración
Dinámica > General:
● Aceleración: 10.0
● Deceleración: 10.0

①

②

Una petición MC_MoveVelocity activa notifica el alcance de su velocidad consignada a través de "InVel_1". Seguida‐
mente es cancelada por otra petición MC_MoveVelocity. La cancelación se notifica mediante "Abort_1". En cuanto se
alcanza la nueva velocidad de destino 15.0 el sistema lo notifica mediante "InVel_2". A continuación el eje continúa
moviéndose de forma constante a la nueva velocidad.
Una petición MC_MoveVelocity activa es cancelada por otra petición MC_MoveVelocity antes de alcanzar su velocidad
consignada. La cancelación se notifica mediante "Abort_1". En cuanto se alcanza la nueva velocidad de destino 15.0 el
sistema lo notifica mediante "InVel_2". A continuación el eje continúa moviéndose de forma constante a la nueva
velocidad.

Consulte también
MC_MoveVelocity: Mover eje con especificación de velocidad de giro V4...5 (Página 3039)

MC_MoveJog
MC_MoveJog: Mover eje en modo Jog V4...5
Descripción
La instrucción de Motion Control "MC_MoveJog" mueve el eje de forma constante a la
velocidad predeterminada en modo Jog. Utilice esta instrucción de Motion Control para, p.ej.,
fines de test y puesta en servicio.

Requisitos
● El objeto tecnológico Eje de posicionamiento se ha configurado correctamente.
● El eje está habilitado.

Comportamiento de relevo
La petición MC_MoveJog puede ser cancelada por las siguientes peticiones de Motion Control:
● Petición MC_Home Mode = 3
● Petición MC_Halt
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable

Programación del PLC
Manual de programación y manejo, 11/2019

3043

Instrucciones
4.1 Instrucciones
La nueva petición MC_MoveJog cancela las siguientes peticiones de Motion Control en curso:
● Petición MC_Home Mode = 3
● Petición MC_Halt
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_SpeedAxis

-

Objeto tecnológico del eje

JogForward

INPUT

BOOL

FALSE

Mientras el parámetro sea TRUE, el eje se moverá a
la velocidad predeterminada en el parámetro "Velo‐
city" en sentido positivo.

JogBackward

INPUT

BOOL

FALSE

Mientras el parámetro sea TRUE, el eje se moverá a
la velocidad predeterminada en el parámetro "Velo‐
city" en sentido negativo.

Si ambos parámetros son al mismo tiempo TRUE, el eje se detiene con la deceleración configurada. En los parámetros
"Error", "ErrorID" y "ErrorInfo" se muestra un error.
Velocity

INPUT

REAL

10.0

Preajuste de velocidad para el modo Jog.
Límites:
Velocidad de arranque/parada ≤ Velocity ≤ velocidad
máxima

InVelocity

OUTPUT

BOOL

FALSE

TRUE

La velocidad indicada en el parámetro "Ve‐
locity" ha sido alcanzada.

Busy

OUTPUT

BOOL

FALSE

TRUE

Petición en proceso

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

La petición ha sido cancelada por otra du‐
rante su procesamiento.

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar la petición.
La causa del error se puede consultar en los
parámetros "ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro
"ErrorID"

Consulte también
MC_MoveJog: Diagrama de función V4...5 (Página 3045)
MC_Power: Habilitar/bloquear eje V4...5 (Página 3017)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico V4...5 (Página 3022)
MC_Home: Referenciar eje; fijar punto de referencia V4...5 (Página 3023)

3044

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
MC_Halt: Parar eje V4...5 (Página 3028)
MC_MoveAbsolute: Posicionar eje de forma absoluta V4...5 (Página 3031)
MC_MoveRelative: Posicionar eje de forma relativa V4...5 (Página 3035)
MC_MoveVelocity: Mover eje con especificación de velocidad de giro V4...5 (Página 3039)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos V4...5
(Página 3046)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje V4...5 (Página 3048)
MC_ReadParam: Leer de forma continuada datos de movimiento de un eje de
posicionamiento V4...5 (Página 3051)
MC_WriteParam: Escribir variable del eje de posicionamiento V4...5 (Página 3053)
S7-1200 Motion Control V1...3 (Página 3054)

MC_MoveJog: Diagrama de función V4...5
Diagrama de funcionamiento
)%
0&B0RYH-RJ
$[LVB
-RJB)
-RJB%


$[LV
,Q9HORFLW\
-RJ)RUZDUG
%XV\
-RJ%DFNZDUG &RPPDQG$ERUWHG
(UURU
9HORFLW\
(UURU,'
(UURU,QIR



,Q9HOB
%XV\B



)%
-RJB)




W

-RJB%




W

,Q9HOB
%XV\B






W
W


9HORFLW\
$[LVB



W


 

Programación del PLC
Manual de programación y manejo, 11/2019

3045

Instrucciones
4.1 Instrucciones
Los siguientes valores han sido configurados en la ventana de configuración
Dinámica > General:
● Aceleración: 10.0
● Deceleración: 5.0

①
②

"Jog_F" permite mover el eje en sentido positivo en modo Jog. En cuanto se alcanza la velocidad de destino 50.0 el
sistema lo notifica a través de "InVel_1". Tras desactivar "Jog_F" el eje frena hasta pararse del todo.
"Jog_B" permite mover el eje en sentido negativo en modo Jog. En cuanto se alcanza la velocidad de destino -50.0 el
sistema lo notifica a través de "InVel_1".
Si está activado "Jog_B", se modifica el valor del parámetro "Velocity" a 25.0. "InVel_1" se desactiva y el eje frena. En
cuanto se alcanza la nueva velocidad de destino -25.0 el sistema lo notifica mediante "InVel_1". Tras desactivar "Jog_B"
el eje frena hasta pararse del todo.

Consulte también
MC_MoveJog: Mover eje en modo Jog V4...5 (Página 3043)

MC_CommandTable
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos V4...5
Descripción
La instrucción de Motion Control "MC_CommandTable" reúne varias peticiones individuales
de control de un eje en una secuencia de movimientos. "MC_CommandTable" está disponible
para ejes con conexión del accionamiento mediante PTO (Pulse Train Output).

Requisitos
● El objeto tecnológico Eje de posicionamiento se ha insertado y configurado correctamente.
● El accionamiento está conectado mediante PTO (Pulse Train Output).
● El objeto tecnológico Tabla de peticiones se ha insertado y configurado correctamente.
● El eje está habilitado.

Comportamiento de relevo
La petición MC_CommandTable puede ser cancelada por las siguientes peticiones de Motion
Control:
● Petición MC_Home Mode = 3
● Petición MC_Halt
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity

3046

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
● Petición MC_MoveJog
● Petición MC_CommandTable
La nueva petición MC_CommandTable cancela las siguientes peticiones de Motion Control en
curso:
● Petición MC_Home Mode = 3
● Petición MC_Halt
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable
La petición Motion Control en curso se cancela cuando se inicia la primera petición
"Positioning Relative", "Positioning Absolute", "Velocity set point" o "Halt".

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_SpeedAxis

-

Objeto tecnológico del eje

CommandTa‐
ble

INPUT

TO_Command‐
Table

-

Objeto tecnológico de la tabla de peticiones

Execute

INPUT

BOOL

FALSE

Inicio de la tabla de peticiones con flanco ascendente

StartStep

INPUT

INT

1

Indicación que señala a partir de qué paso debe procesar‐
se la tabla de peticiones.
Límites:
1 ≤ StartStep ≤ EndStep

EndStep

INPUT

INT

32

Indicación que señala hasta qué paso debe procesarse la
tabla de peticiones.
Límites:
StartStep ≤ EndStep ≤ 32

Done

OUTPUT

BOOL

FALSE

TRUE

La tabla de peticiones se ha procesado correcta‐
mente

Busy

OUTPUT

BOOL

FALSE

TRUE

La tabla de peticiones se encuentra en proceso

CommandA‐
borted

OUTPUT

BOOL

FALSE

TRUE

La tabla de peticiones ha sido cancelada por otra
petición durante el procesamiento.

Error

OUTPUT

BOOL

FALSE

TRUE

Durante el procesamiento de la tabla de peticio‐
nes se ha producido un error. La causa del error
se puede consultar en los parámetros "ErrorID" y
"ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro "Erro‐
rID"

Programación del PLC
Manual de programación y manejo, 11/2019

3047

Instrucciones
4.1 Instrucciones
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

CurrentStep

OUTPUT

INT

0

Paso de la tabla de peticiones que se encuentra actual‐
mente en preparación

StepCode

OUTPUT

WORD

16#0000

Valor numérico/patrón de bits definido por el usuario que
corresponde a la etapa actualmente en procesamiento

Consulte también
MC_Power: Habilitar/bloquear eje V4...5 (Página 3017)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico V4...5 (Página 3022)
MC_Home: Referenciar eje; fijar punto de referencia V4...5 (Página 3023)
MC_Halt: Parar eje V4...5 (Página 3028)
MC_MoveAbsolute: Posicionar eje de forma absoluta V4...5 (Página 3031)
MC_MoveRelative: Posicionar eje de forma relativa V4...5 (Página 3035)
MC_MoveVelocity: Mover eje con especificación de velocidad de giro V4...5 (Página 3039)
MC_MoveJog: Mover eje en modo Jog V4...5 (Página 3043)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje V4...5 (Página 3048)
MC_ReadParam: Leer de forma continuada datos de movimiento de un eje de
posicionamiento V4...5 (Página 3051)
MC_WriteParam: Escribir variable del eje de posicionamiento V4...5 (Página 3053)
S7-1200 Motion Control V1...3 (Página 3054)

MC_ChangeDynamic
MC_ChangeDynamic: Modificar ajustes dinámicos del eje V4...5
Descripción
La instrucción de Motion Control "MC_ChangeDynamic" permite modificar los ajustes
siguientes del eje:
● Modificar valor del tiempo de aceleración (aceleración)
● Modificar valor del tiempo de deceleración (deceleración)
● Modificar valor del tiempo de deceleración de parada de emergencia (deceleración de
parada de emergencia)
● Modificar valor del tiempo de redondeo (tirón)
El efecto del cambio se puede consultar en la descripción de las variables.

3048

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Requisitos
El objeto tecnológico Eje de posicionamiento se ha configurado correctamente.

Comportamiento de relevo
Una petición MC_ChangeDynamic no puede ser cancelada por ninguna otra petición de
Motion Control.
Una nueva petición MC_ChangeDynamic no cancela ninguna petición de Motion Control en
curso.

Parámetro
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_SpeedAxis

-

Objeto tecnológico del eje

Execute

INPUT

BOOL

FALSE

Inicio de la petición con flanco ascendente

Change‐
RampUp

INPUT

BOOL

FALSE

TRUE

RampUpTi‐
me

INPUT

REAL

5.00

Tiempo (en segundos) que debe pasar para acelerar el eje
sin limitación de tirones desde la parada a la velocidad má‐
xima configurada.

Modificar tiempo de posicionamiento según el pa‐
rámetro de entrada "RampUpTime":

El cambio afecta al valor de la variable <Nombre del
eje>.Config.DynamicDefaults.Acceleration. El efecto de los
cambios puede consultarse en la descripción de esta varia‐
ble.
Change‐
INPUT
RampDown

BOOL

FALSE

TRUE

Ramp‐
DownTime

REAL

5.00

Tiempo (en segundos) que debe pasar para decelerar el eje
sin limitación de tirones desde la velocidad máxima configu‐
rada hasta su detención

INPUT

Tiempo de deceleración según el parámetro de en‐
trada "RampDownTime" modificado

El cambio afecta al valor de la variable <Nombre del
eje>.Config.DynamicDefaults.Deceleration . El efecto de los
cambios puede consultarse en la descripción de esta varia‐
ble.
ChangeE‐
mergency

INPUT

BOOL

FALSE

TRUE

Modificar tiempo de deceleración de parada de
emergencia según el parámetro de entrada "Emer‐
gencyRampTime"

Emer‐
gency‐
RampTime

INPUT

REAL

2.00

Tiempo (en segundos) que debe transcurrir para decelerar el
eje sin limitación de tirones en el modo de parada de emer‐
gencia desde la velocidad máxima configurada hasta la ve‐
locidad cero
El cambio afecta al valor de la variable <Nombre del
eje>.Config.DynamicDefaults.EmergencyDeceleration . El
efecto de los cambios puede consultarse en la descripción de
esta variable.

Change‐
JerkTime

INPUT

BOOL

Programación del PLC
Manual de programación y manejo, 11/2019

FALSE

TRUE

Modificar tiempo de redondeo según el parámetro
de entrada "JerkTime"

3049

Instrucciones
4.1 Instrucciones
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

JerkTime

INPUT

0.25

Tiempo de redondeo (en segundos) que se aplica a la rampa
de aceleración y deceleración del eje

REAL

El cambio afecta al valor de la variable <Nombre del
eje>.Config.DynamicDefaults.Jerk . El efecto de los cambios
puede consultarse en la descripción de esta variable.
Done

OUTPUT

BOOL

FALSE

TRUE

Los valores modificados se han escrito en el DB
tecnológico. En la descripción de las variables se
indica cuándo surte efecto la modificación.

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar la petición. La cau‐
sa del error se puede consultar en los parámetros
"ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro "ErrorID"

Nota
En los parámetros de entrada "RampUpTime", "RampDownTime", "EmergencyRampTime"
und "JerkTime" se pueden indicar valores que excedan los valores límite admisibles de los
parámetros resultantes: "aceleración", "deceleración", "deceleración de parada de
emergencia" y "tirón".
Teniendo en cuenta las ecuaciones y límites del capítulo "Dinámica", recuerde que las
entradas que efectúe deben encontrarse dentro del rango permitido.

Consulte también
MC_Power: Habilitar/bloquear eje V4...5 (Página 3017)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico V4...5 (Página 3022)
MC_Home: Referenciar eje; fijar punto de referencia V4...5 (Página 3023)
MC_Halt: Parar eje V4...5 (Página 3028)
MC_MoveAbsolute: Posicionar eje de forma absoluta V4...5 (Página 3031)
MC_MoveRelative: Posicionar eje de forma relativa V4...5 (Página 3035)
MC_MoveVelocity: Mover eje con especificación de velocidad de giro V4...5 (Página 3039)
MC_MoveJog: Mover eje en modo Jog V4...5 (Página 3043)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos V4...5
(Página 3046)
MC_ReadParam: Leer de forma continuada datos de movimiento de un eje de
posicionamiento V4...5 (Página 3051)
MC_WriteParam: Escribir variable del eje de posicionamiento V4...5 (Página 3053)
S7-1200 Motion Control V1...3 (Página 3054)

3050

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_ReadParam
MC_ReadParam: Leer de forma continuada datos de movimiento de un eje de posicionamiento V4...5
Descripción
La instrucción de Motion Control "MC_ReadParam" permite la lectura continua de los datos de
movimiento y avisos de estado de un eje. El valor actual de las correspondientes variables se
determina al iniciarse la petición.
Pueden leerse los siguientes datos de movimiento y avisos de estado:
● A partir de la versión tecnológica V4:
– Posición de consigna del eje
– Velocidad de consigna y real del eje
– Distancia actual del eje hasta la posición de destino
– Posición de destino del eje
● A partir de la versión tecnológica V5, además:
– Posición real del eje
– Velocidad real del eje
– Error de seguimiento actual
– Estado del accionamiento
– Estado del encóder
– Bits de estado
– Bits de error

Requisitos
El objeto tecnológico Eje de posicionamiento se ha configurado correctamente.

Comportamiento de relevo
Una petición MC_ReadParam no puede ser cancelada por ninguna otra petición de Motion
Control.
Una nueva petición MC_ReadParam no cancela ninguna petición de Motion Control en curso.

Programación del PLC
Manual de programación y manejo, 11/2019

3051

Instrucciones
4.1 Instrucciones

Parámetro
Parámetro

Declaración

Tipo de datos

Valor por de‐ Descripción
fecto

Enable

INPUT

BOOL

FALSE

TRUE

Leer la variable determinada a través de "Parame‐
ter" y almacenar el valor en la dirección de destino
determinada a través de "Value".

FALSE No actualizar datos de movimiento parametrizados
Parameter

INPUT

VARIANT
(REAL)

-

Puntero VARIANT en el valor que se debe leer. Las siguien‐
tes variables son admisibles:
● <Nombre de eje>.Position
● <Nombre de eje>.Velocity
● <Nombre de eje>.ActualPosition
● <Nombre de eje>.ActualVelocity
● <Nombre de eje>.StatusPositioning.<Nombre de
variable>
● <Nombre de eje>.StatusDrive.<Nombre de variable>
● <Nombre de eje>.StatusSensor.<Nombre de variable>
● <Nombre de eje>.StatusBits.<Nombre de variable>
● <Nombre de eje>.ErrorBits.<Nombre de variable>
La descripción de las variables y estructuras de variables
mencionadas se encuentra en el anexo AUTOHOTSPOT.

Value

INOUT

VARIANT
(REAL)

-

Puntero VARIANT en la variable de destino o en la dirección
de destino en la que se debe escribir el valor leído.

Valid

OUTPUT

BOOL

FALSE

TRUE

Busy

OUTPUT

BOOL

FALSE

TRUE

Petición en proceso

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar la petición. La cau‐
sa del error se puede consultar en los parámetros
"ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro "ErrorID"

El valor leído es válido.

FALSE El valor leído no es válido.

Consulte también
MC_Power: Habilitar/bloquear eje V4...5 (Página 3017)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico V4...5 (Página 3022)
MC_Home: Referenciar eje; fijar punto de referencia V4...5 (Página 3023)
MC_Halt: Parar eje V4...5 (Página 3028)
MC_MoveAbsolute: Posicionar eje de forma absoluta V4...5 (Página 3031)
MC_MoveRelative: Posicionar eje de forma relativa V4...5 (Página 3035)
MC_MoveVelocity: Mover eje con especificación de velocidad de giro V4...5 (Página 3039)
MC_MoveJog: Mover eje en modo Jog V4...5 (Página 3043)

3052

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos V4...5
(Página 3046)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje V4...5 (Página 3048)
MC_WriteParam: Escribir variable del eje de posicionamiento V4...5 (Página 3053)
S7-1200 Motion Control V1...3 (Página 3054)

MC_WriteParam
MC_WriteParam: Escribir variable del eje de posicionamiento V4...5
Descripción
La instrucción de Motion Control "MC_WriteParam" permite escribir variables del objeto
tecnológico Eje de posicionamiento en el programa de usuario. A diferencia de la asignación
de valores de las variables en el programa de usuario, "MC_WriteParam" también puede
modificar valores de variables de solo lectura.
Las variables que se pueden escribir en las distintas condiciones, así como el momento en el
que se hacen efectivos los cambios, se pueden consultar en la descripción de las variables del
objeto tecnológico.

Requisitos
● El objeto tecnológico Eje de posicionamiento se ha configurado correctamente.
● Para escribir variables que solo son legibles en el programa de usuario, el eje debe estar
bloqueado.

Comportamiento de relevo
Una petición MC_WriteParam no puede ser cancelada por ninguna otra petición de Motion
Control.
Una nueva petición MC_WriteParam no cancela ninguna petición de Motion Control en curso.

Parámetro
Parámetro

Declaración

Tipo de datos

Valor por defecto Descripción

Parameter

INPUT

VARIANT (BOOL, INT,
DINT, UDINT*, REAL)

-

Puntero VARIANT en la variable del objeto
tecnológico Eje de posicionamiento (direc‐
ción de destino) que se desea escribir.

-

Puntero VARIANT en el valor (dirección
de origen) que se desea escribir.

*) a partir de V5
Value

INPUT

VARIANT (BOOL, INT,
DINT, UDINT*, REAL)

Execute

INPUT

BOOL

FALSE

Inicio de la petición con flanco ascendente

Done

OUTPUT

BOOL

FALSE

TRUE

*) a partir de V5

Programación del PLC
Manual de programación y manejo, 11/2019

Se ha escrito el valor

3053

Instrucciones
4.1 Instrucciones
Parámetro

Declaración

Tipo de datos

Valor por defecto Descripción

Busy

OUTPUT

BOOL

FALSE

TRUE

Petición en proceso

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar
la petición. La causa del error
se puede consultar en los pa‐
rámetros "ErrorID" y "ErrorIn‐
fo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del
parámetro "ErrorID"

Consulte también
MC_Power: Habilitar/bloquear eje V4...5 (Página 3017)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico V4...5 (Página 3022)
MC_Home: Referenciar eje; fijar punto de referencia V4...5 (Página 3023)
MC_Halt: Parar eje V4...5 (Página 3028)
MC_MoveAbsolute: Posicionar eje de forma absoluta V4...5 (Página 3031)
MC_MoveRelative: Posicionar eje de forma relativa V4...5 (Página 3035)
MC_MoveVelocity: Mover eje con especificación de velocidad de giro V4...5 (Página 3039)
MC_MoveJog: Mover eje en modo Jog V4...5 (Página 3043)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos V4...5
(Página 3046)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje V4...5 (Página 3048)
MC_ReadParam: Leer de forma continuada datos de movimiento de un eje de
posicionamiento V4...5 (Página 3051)
S7-1200 Motion Control V1...3 (Página 3054)

S7-1200 Motion Control V1...3
MC_Power
MC_Power: Habilitar/bloquear eje V1...3
Descripción
La instrucción de Motion Control "MC_Power" habilita o bloquea un eje.

3054

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Requisitos
● El objeto tecnológico Eje se ha configurado correctamente.
● No hay ningún error que impida la habilitación.

Comportamiento de relevo
El procesamiento del "MC_Power" no puede ser cancelado por ninguna petición de Motion
Control.
Al bloquear el eje (parámetro de entrada "Enable" = FALSE ) se cancelan todas las peticiones
de Motion Control conforme al "StopMode" seleccionado en el respectivo objeto tecnológico.

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_Axis_1

-

Objeto tecnológico del eje

Enable

INPUT

BOOL

FALSE

TRUE

Motion Control intenta habilitar el eje.

FALSE Todas las peticiones en curso se cancelan confor‐
me al "StopMode" parametrizado. El eje se detiene
y se bloquea.
StopMode

INPUT

INT

0

0

Parada de emergencia
Si existe una demanda de bloqueo del eje, éste fre‐
na con la deceleración de parada de emergencia
configurada. Cuando el eje se para, se bloquea.

1

Desconexión inmediata
Si existe una demanda de bloqueo del eje, ésta se
bloquea sin deceleración. La salida de impulsos se
detiene inmediatamente.

2

Parada de emergencia con limitación de tirones
Si existe una demanda de bloqueo del eje, éste fre‐
na con la deceleración de parada de emergencia
configurada. Si la limitación de tirones está activa‐
da, se tiene en cuenta el tirón configurado. Cuando
el eje se para, se bloquea.

Programación del PLC
Manual de programación y manejo, 11/2019

3055

Instrucciones
4.1 Instrucciones
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Status

OUTPUT

FALSE

Estado de la habilitación del eje

BOOL

FALSE El eje está bloqueado
El eje no ejecuta ninguna petición de Motion Con‐
trol y no acepta nuevas peticiones (excepción: Pe‐
tición MC_Reset).
El eje no está referenciado.
Al bloquear, el estado cambia a FALSE en cuanto el
eje se para.
TRUE

El eje está habilitado
El eje está listo para ejecutar peticiones de Motion
Control.
Al habilitar el eje, el estado cambia a TRUE en
cuanto se produce la señal "Accionamiento listo". Si
no se ha configurado la señal del accionamiento
"Accionamiento listo" en la configuración del eje, el
estado cambia inmediatamente a TRUE.

Busy

OUTPUT

BOOL

FALSE

TRUE

"MC_Power" está activo.

Error

OUTPUT

BOOL

FALSE

TRUE

En la instrucción de Motion Control "MC_Power" o
el objeto tecnológico correspondiente se ha produ‐
cido un error. La causa del error se puede consultar
en los parámetros "ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro "ErrorID"

Nota
Si el eje se desconecta a causa de un error, se vuelve a habilitar automáticamente tras eliminar
y acusar el error. Requisito para ello es que el parámetro de entrada "Enable" mantenga el
valor TRUE durante esta operación.

Habilitación de un eje con señales del accionamiento configuradas
Para habilitar un eje, proceda del siguiente modo:
1. Compruebe los requisitos antes mencionados.
2. Configure el parámetro de entrada "StopMode" con el valor deseado. Ponga el parámetro
de entrada "Enable" en TRUE.
La salida de habilitación para "Habilitar accionamiento" cambia a TRUE para habilitar la
potencia del accionamiento. La CPU aguarda la señal "Accionamiento listo" del
accionamiento.
El eje queda habilitado en cuanto se emite la señal "Accionamiento listo" en la entrada de
disponibilidad configurada de la CPU. El parámetro de salida "Status", así como la variable
del objeto tecnológico <Nombre del eje>.StatusBits.Enable muestran el valor TRUE.

3056

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Habilitación de un eje sin señales del accionamiento configuradas
Para habilitar un eje, proceda del siguiente modo:
1. Compruebe los requisitos antes mencionados.
2. Configure el parámetro de entrada "StopMode" con el valor deseado. Ponga el parámetro
de entrada "Enable" en TRUE. El eje es habilitado. El parámetro de salida "Status", así
como la variable del objeto tecnológico <Nombre del eje>.StatusBits.Enable muestran el
valor TRUE.

Bloqueo de un eje
Para bloquear un eje puede proceder de la siguiente manera:
1. Detenga el eje.
La variable del objeto tecnológico <Nombre del eje>.StatusBits.StandStill permite
reconocer el momento de parada del eje.
2. Cambie el parámetro de entrada "Enable" a FALSE en cuanto se produzca la parada.
3. Si los parámetros de salida "Busy" y "Status", así como la variable del objeto tecnológico
<Nombre del eje>.StatusBits.Enable muestran el valor FALSE, el bloqueo del eje de habrá
finalizado.

Consulte también
S7-1200 Motion Control V4...5 (Página 3017)
MC_Power: Diagrama de funcionamiento V1...3 (Página 3058)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico V1...3 (Página 3059)
MC_Home: Referenciar eje, ajustar el punto de referencia V1...3 (Página 3060)
MC_Halt: Parar eje V1...3 (Página 3064)
MC_MoveAbsolute: Posicionar eje de forma absoluta V1...3 (Página 3067)
MC_MoveRelative: Posicionar eje de forma relativa V1...3 (Página 3070)
MC_MoveVelocity: Mover eje con especificación de velocidad V1...3 (Página 3074)
MC_MoveJog: Mover eje en modo Jog V1...3 (Página 3078)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos V2...3
(Página 3081)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje V2...3 (Página 3083)

Programación del PLC
Manual de programación y manejo, 11/2019

3057

Instrucciones
4.1 Instrucciones

MC_Power: Diagrama de funcionamiento V1...3
Diagrama de funcionamiento

$[LVB
(QDB


)%

)%

0&B3RZHU

0&B5HVHW

$[LV
(QDEOH
6WRS0RGH

6WDWXV
%XV\
(UURU
(UURU,'
(UURU,QIR


)%

6WDWXVB
%XV\B
(UURUB

$[LVB
([HB

$[LV
([HFXWH

'RQH
%XV\
(UURU
(UURU,'
(UURU,QIR

'RQHB
%XV\B



(QDB




W

6WDWXVB




W






W

([HB




W

'RQHB




W

%XV\B




W

'ULYH(QDEOHG




W

'ULYH5HDG\




W

%XV\B
(UURUB

)%

'ULYH,QWHUIDFH

①
②

W

Se habilita un eje y a continuación se vuelve a bloquear. En cuanto el accionamiento devuelve la señal "Accionamiento
listo" a la CPU se puede verificar el éxito de la habilitación a través de "Status_1".
Una vez habilitado un eje se produce un error, provocando el bloqueo del eje. El error se soluciona y se acusa con
"MC_Reset". A continuación se vuelve a habilitar el eje.

Consulte también
MC_Power: Habilitar/bloquear eje V1...3 (Página 3054)

3058

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_Reset
MC_Reset: Acusar errores, reiniciar un objeto tecnológico V1...3
Descripción
La instrucción de Motion Control "MC_Reset" permite acusar "Errores de funcionamiento con
parada del eje" y "Errores de configuración". En la "Lista de ErrorIDs y ErrorInfos", en el
apartado "Ayuda", puede consultar los errores que deben ser acusados.
A partir de la versión V3.0 es posible cargar la configuración del eje en la memoria de trabajo
después de una carga en el estado operativo RUN.

Requisitos
● El objeto tecnológico Eje se ha configurado correctamente.
● En caso de un error de configuración acusable debe haberse eliminado la causa (p. ej. la
aceleración en el objeto tecnológico Eje de posicionamiento ha sido cambiada a un valor
válido).

Comportamiento de relevo
La petición MC_Reset no puede ser cancelada por ninguna otra petición de Motion Control.
La nueva petición MC_Reset no cancela ninguna otra petición de Motion Control en curso.

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_Axis_1

-

Objeto tecnológico del eje

Execute

INPUT

BOOL

FALSE

Inicio de la petición con flanco ascendente

Restart

INPUT

BOOL

FALSE

(A partir de la versión V3.0)
TRUE

Carga la configuración del eje en la memoria de
trabajo desde la memoria de carga. La petición solo
puede ejecutarse con el eje bloqueado.
Para ello, tenga en cuenta las indicaciones referen‐
tes a la Carga en la CPU.

FALSE Acusa errores pendientes
Done

OUTPUT

BOOL

FALSE

TRUE

El error se ha acusado.

Busy

OUTPUT

BOOL

FALSE

TRUE

Petición en proceso

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar la petición. La cau‐
sa del error se puede consultar en los parámetros
"ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro "ErrorID"

Programación del PLC
Manual de programación y manejo, 11/2019

3059

Instrucciones
4.1 Instrucciones

Acusar un error con MC_Reset
Para acusar un error proceda del siguiente modo:
1. Compruebe los requisitos antes mencionados.
2. Inicie el acuse del error mediante un flanco ascendente en el parámetro de entrada
"Execute".
3. El error ha sido acusado si el parámetro de entrada "Done" muestra el valor TRUE y la
variable del objeto tecnológico <Nombre del eje:>.StatusBits.Error el valor FALSE.

Consulte también
S7-1200 Motion Control V4...5 (Página 3017)
MC_Power: Habilitar/bloquear eje V1...3 (Página 3054)
MC_Home: Referenciar eje, ajustar el punto de referencia V1...3 (Página 3060)
MC_Halt: Parar eje V1...3 (Página 3064)
MC_MoveAbsolute: Posicionar eje de forma absoluta V1...3 (Página 3067)
MC_MoveRelative: Posicionar eje de forma relativa V1...3 (Página 3070)
MC_MoveVelocity: Mover eje con especificación de velocidad V1...3 (Página 3074)
MC_MoveJog: Mover eje en modo Jog V1...3 (Página 3078)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos V2...3
(Página 3081)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje V2...3 (Página 3083)

MC_Home
MC_Home: Referenciar eje, ajustar el punto de referencia V1...3
Descripción
La instrucción de Motion Control "MC_Home" permite contrastar la coordenada axial con la
posición física real del accionamiento. Si el eje debe posicionarse de forma absoluta, es
necesaria la referenciación. Pueden ejecutarse los siguientes tipos de referenciación:
● Referenciación activa (Mode = 3)
La aproximación al punto de referencia se ejecuta automáticamente.
● Referenciación pasiva (Mode = 2)
En la referenciación pasiva, la instrucción de Motion Control "MC_Home" no realiza ningún
movimiento de referencia. El desplazamiento necesario para ello debe ser realizado por el
usuario con otras instrucciones de Motion Control. El eje se referencia al detectarse el
sensor del punto de referencia.

3060

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
● Referenciación directa absoluta (Mode = 0)
La posición actual del eje se fija con el valor del parámetro "Position".
● Referenciación directa relativa (Mode = 1)
La posición actual del eje se desplaza en la cuantía del valor del parámetro "Position".

Requisitos
● El objeto tecnológico Eje se ha configurado correctamente.
● El eje está habilitado.
● Al iniciar con Mode = 0, 1 y 2 no puede haber ninguna petición MC_CommandTable activa.

Comportamiento de relevo
El comportamiento de relevo depende del modo seleccionado:
Mode = 0, 1
La petición MC_Home no puede ser cancelada por ninguna otra petición de Motion Control.
La petición MC_Home no cancela ninguna petición de Motion Control en curso. Las peticiones
de desplazamiento con referencia de posición continúan, después del referenciado, de
acuerdo con la nueva posición de referenciado (valor en el parámetro de entrada: "Position").
Mode = 2
La petición MC_Home puede ser cancelada por las siguientes peticiones de Motion Control:
● Petición MC_Home Mode = 2, 3
La nueva petición MC_Home cancela la siguiente petición de Motion Control en curso:
● Petición MC_Home Mode = 2
Las peticiones de desplazamiento con referencia de posición continúan, después del
referenciado, de acuerdo con la nueva posición de referenciado (valor en el parámetro de
entrada: "Position").
Mode = 3
La petición MC_Home puede ser cancelada por las siguientes peticiones de Motion Control:
● Petición MC_Home Mode = 3
● Petición MC_Halt
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable
La nueva petición MC_Home cancela las siguientes peticiones de Motion Control en curso:
● Petición MC_Home Mode = 2, 3
● Petición MC_Halt

Programación del PLC
Manual de programación y manejo, 11/2019

3061

Instrucciones
4.1 Instrucciones
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable

Parámetro
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_Axis_1

-

Objeto tecnológico del eje

Execute

INPUT

BOOL

FALSE

Inicio de la petición con flanco ascendente

Position

INPUT

REAL

0.0

● Mode = 0, 2 y 3
Posición absoluta del eje una vez finalizado el
proceso de referenciación
● Mode = 1
Valor de corrección para la posición actual del eje
Límites:
-1.0E+12 ≤ Position ≤ 1.0E+12

Mode

INPUT

INT

0

Modo de toma de referencia
0

Referenciación directa absoluta
La nueva posición del eje es el valor de
posición del parámetro "Position".

1

Referenciación directa relativa
La nueva posición del eje es la posición
actual del eje + el valor de posición del
parámetro "Position".

2

Referenciación pasiva
Referenciación conforme a la configura‐
ción del eje. Tras la referenciación se apli‐
ca el valor del parámetro "Position" como
nueva posición del eje.

3

Referenciación activa
Aproximación al punto de referencia con‐
forme a la configuración del eje. Tras la
referenciación se aplica el valor del pará‐
metro "Position" como nueva posición del
eje.

Done

OUTPUT

BOOL

FALSE

TRUE

La petición ha finalizado

Busy

OUTPUT

BOOL

FALSE

TRUE

Petición en proceso

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

La petición ha sido cancelada por otra du‐
rante su procesamiento.

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar la peti‐
ción. La causa del error se puede consul‐
tar en los parámetros "ErrorID" y "ErrorIn‐
fo".

3062

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro
"ErrorID"

Nota
La toma de referencia de un eje se pierde cuando se dan las siguientes condiciones:
● Bloqueo del eje por la instrucción de Motion Control "MC_Power"
● Cambio entre modo automático y control manual
● Al iniciar la referenciación activa. La toma de referencia del eje vuelve a estar presente una
vez concluido el proceso de referenciación.
● Tras POWER OFF -> POWER ON de la CPU
● Tras un rearranque completo de la CPU (RUN-STOP -> STOP-RUN)

Referenciación de un eje
Para referenciar el eje, proceda del siguiente modo:
1. Compruebe los requisitos antes mencionados.
2. Configure los valores con los parámetros de entrada necesarios e inicie la referenciación
mediante un flanco ascendente en el parámetro de entrada "Execute"
3. La referenciación concluye cuando el parámetro de salida muestra "Done" y la variable del
objeto tecnológico <Nombre del eje:>.StatusBits.HomingDone el valor TRUE.

Consulte también
S7-1200 Motion Control V4...5 (Página 3017)
MC_Power: Habilitar/bloquear eje V1...3 (Página 3054)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico V1...3 (Página 3059)
MC_Halt: Parar eje V1...3 (Página 3064)
MC_MoveAbsolute: Posicionar eje de forma absoluta V1...3 (Página 3067)
MC_MoveRelative: Posicionar eje de forma relativa V1...3 (Página 3070)
MC_MoveVelocity: Mover eje con especificación de velocidad V1...3 (Página 3074)
MC_MoveJog: Mover eje en modo Jog V1...3 (Página 3078)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos V2...3
(Página 3081)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje V2...3 (Página 3083)

Programación del PLC
Manual de programación y manejo, 11/2019

3063

Instrucciones
4.1 Instrucciones

MC_Halt
MC_Halt: Parar eje V1...3
Descripción
La instrucción de Motion Control "MC_Halt" cancela todas las operaciones de movimiento y
frena el eje con la deceleración configurada hasta pararlo por completo. La posición de parada
no está definida.

Requisitos
● El objeto tecnológico Eje se ha configurado correctamente.
● El eje está habilitado.

Comportamiento de relevo
La petición MC_Halt puede ser cancelada por las siguientes peticiones de Motion Control:
● Petición MC_Home Mode = 3
● Petición MC_Halt
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable
La nueva petición MC_Halt cancela las siguientes peticiones de Motion Control en curso:
● Petición MC_Home Mode = 3
● Petición MC_Halt
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_Axis_1

-

Objeto tecnológico del eje

Execute

INPUT

BOOL

FALSE

Inicio de la petición con flanco ascendente

3064

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Done

OUTPUT

BOOL

FALSE

TRUE

Se ha alcanzado la velocidad cero

Busy

OUTPUT

BOOL

FALSE

TRUE

Petición en proceso

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

La petición ha sido cancelada por otra du‐
rante su procesamiento.

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar la petición.
La causa del error se puede consultar en los
parámetros "ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro
"ErrorID"

Consulte también
S7-1200 Motion Control V4...5 (Página 3017)
MC_Halt: Diagrama de funcionamiento V1...3 (Página 3066)
MC_Power: Habilitar/bloquear eje V1...3 (Página 3054)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico V1...3 (Página 3059)
MC_Home: Referenciar eje, ajustar el punto de referencia V1...3 (Página 3060)
MC_MoveAbsolute: Posicionar eje de forma absoluta V1...3 (Página 3067)
MC_MoveRelative: Posicionar eje de forma relativa V1...3 (Página 3070)
MC_MoveVelocity: Mover eje con especificación de velocidad V1...3 (Página 3074)
MC_MoveJog: Mover eje en modo Jog V1...3 (Página 3078)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos V2...3
(Página 3081)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje V2...3 (Página 3083)

Programación del PLC
Manual de programación y manejo, 11/2019

3065

Instrucciones
4.1 Instrucciones

MC_Halt: Diagrama de funcionamiento V1...3
Diagrama de funcionamiento
)%

)%
0&B0RYH9HORFLW\
$[LVB
([HB




$[LV
,Q9HORFLW\
([HFXWH
%XV\
9HORFLW\ &RPPDQG$ERUWHG
(UURU
'LUHFWLRQ
(UURU,'
&XUUHQW
(UURU,QIR



0&B+DOW
,Q9HOB
%XV\B
$ERUWB

$[LVB
([HB

$[LV
([HFXWH

'RQH
%XV\
&RPPDQG$ERUWHG
(UURU
(UURU,'
(UURU,QIR

'RQHB
%XV\B
$ERUWB



)%


([HB 

,Q9HOB 

W


%XV\B 

W


$ERUWB 

W

W

)%


([HB 

'RQHB 

W


%XV\B 

W


$ERUWB 

W

W


9HORFLW\
$[LVB 

W

Los siguientes valores han sido configurados en la ventana de configuración
Dinámica > General:
● Aceleración: 10.0
● Deceleración: 5.0

①
②

El eje se frena con una petición MC_Halt hasta pararse completamente. La parada completa se notifica mediante
"Done_2".
Mientras una petición MC_Halt frena el eje, dicha petición es cancelada por otra petición de desplazamiento. La can‐
celación se notifica mediante "Abort_2".

3066

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Consulte también
MC_Halt: Parar eje V1...3 (Página 3064)

MC_MoveAbsolute
MC_MoveAbsolute: Posicionar eje de forma absoluta V1...3
Descripción
La instrucción de Motion Control "MC_MoveAbsolute" inicia un movimiento de
posicionamiento del eje respecto a una posición absoluta.

Requisitos
● El objeto tecnológico Eje se ha configurado correctamente.
● El eje está habilitado.
● El eje está referenciado.

Comportamiento de relevo
La petición MC_MoveAbsolute puede ser cancelada por las siguientes peticiones de Motion
Control:
● Petición MC_Home Mode = 3
● Petición MC_Halt
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable
La nueva petición MC_MoveAbsolute cancela las siguientes peticiones de Motion Control en
curso:
● Petición MC_Home Mode = 3
● Petición MC_Halt
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable

Programación del PLC
Manual de programación y manejo, 11/2019

3067

Instrucciones
4.1 Instrucciones

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_Axis_1

-

Objeto tecnológico del eje

Execute

INPUT

BOOL

FALSE

Inicio de la petición con flanco ascendente

Position

INPUT

REAL

0.0

Posición absoluta de destino
Límites:
-1.0e12 ≤ Position ≤ 1.0e12

Velocity

INPUT

REAL

10.0

Velocidad del eje
No siempre se alcanza esta velocidad, dependiendo
de la aceleración y deceleración configuradas y de la
posición de destino fijada.
Límites:
Velocidad de arranque/parada ≤ Velocity ≤ velocidad
máxima

Done

OUTPUT

BOOL

FALSE

TRUE

Posición absoluta de destino alcanzada

Busy

OUTPUT

BOOL

FALSE

TRUE

Petición en proceso

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

La petición ha sido cancelada por otra du‐
rante su procesamiento.

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar la petición.
La causa del error se puede consultar en los
parámetros "ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro
"ErrorID"

Consulte también
S7-1200 Motion Control V4...5 (Página 3017)
MC_MoveAbsolute: Diagrama de funcionamiento V1...3 (Página 3069)
MC_Power: Habilitar/bloquear eje V1...3 (Página 3054)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico V1...3 (Página 3059)
MC_Home: Referenciar eje, ajustar el punto de referencia V1...3 (Página 3060)
MC_Halt: Parar eje V1...3 (Página 3064)
MC_MoveRelative: Posicionar eje de forma relativa V1...3 (Página 3070)
MC_MoveVelocity: Mover eje con especificación de velocidad V1...3 (Página 3074)
MC_MoveJog: Mover eje en modo Jog V1...3 (Página 3078)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos V2...3
(Página 3081)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje V2...3 (Página 3083)

3068

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_MoveAbsolute: Diagrama de funcionamiento V1...3
Diagrama de funcionamiento
)%

)%
0&B0RYH$EVROXWH

0&B0RYH$EVROXWH
$[LVB
([HB



$[LV
([HFXWH
3RVLWLRQ
9HORFLW\

'RQH
%XV\
&RPPDQG$ERUWHG
(UURU
(UURU,'
(UURU,QIR


)%
([HB
'RQHB
%XV\B
$ERUWB

)%
([HB
'RQHB
%XV\B

'RQHB
%XV\B
$ERUWB

$[LVB
([HB



$[LV
([HFXWH
3RVLWLRQ
9HORFLW\

'RQH
%XV\
&RPPDQG$ERUWHG
(UURU
(UURU,'
(UURU,QIR

'RQHB
%XV\B







W




W



W




W




W




W




W




9HORFLW\
$[LVB 

W



3RVLWLRQ
$[LVB 

W

Los siguientes valores han sido configurados en la ventana de configuración
Dinámica > General:
● Aceleración: 10.0
● Deceleración: 10.0

Programación del PLC
Manual de programación y manejo, 11/2019

3069

Instrucciones
4.1 Instrucciones

①

②

Un eje es desplazado por una petición MC_MoveAbsolute a la posición absoluta 1000.0. En cuanto se alcanza la
posición de destino el sistema lo notifica mediante "Done_1". Con "Done_1" = TRUE se lanza otra petición MC_Mo‐
veAbsolute, con posición de destino 1500.0. Debido a los tiempos de reacción (p.ej. tiempo de ciclo del programa de
usuario, ...) se produce una breve parada del eje (ver representación ampliada). En cuanto se alcanza con éxito la nueva
posición de destino el sistema lo notifica mediante "Done_2".
Una petición MC_MoveAbsolute activa es cancelada por otra petición MC_MoveAbsolute. La cancelación se notifica
mediante "Abort_1". A continuación, el eje se mueve con la nueva velocidad hasta la nueva posición de destino 1500.0.
En cuanto se alcanza la nueva posición de destino el sistema lo notifica mediante "Done_2".

Consulte también
MC_MoveAbsolute: Posicionar eje de forma absoluta V1...3 (Página 3067)

MC_MoveRelative
MC_MoveRelative: Posicionar eje de forma relativa V1...3
Descripción
La instrucción de Motion Control "MC_MoveRelative" inicia un movimiento de posicionamiento
relativo respecto a la posición inicial.

Requisitos
● El objeto tecnológico Eje se ha configurado correctamente.
● El eje está habilitado.

Comportamiento de relevo
La petición MC_MoveRelative puede ser cancelada por las siguientes peticiones de Motion
Control:
● Petición MC_Home Mode = 3
● Petición MC_Halt
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable
La nueva petición MC_MoveRelative cancela las siguientes peticiones de Motion Control en
curso:
● Petición MC_Home Mode = 3
● Petición MC_Halt

3070

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_Axis_1

-

Objeto tecnológico del eje

Execute

INPUT

BOOL

FALSE

Inicio de la petición con flanco ascendente

Distance

INPUT

REAL

0.0

Trayecto de posicionamiento
Límites:
-1.0e12 ≤ Distance ≤ 1.0e12

Velocity

INPUT

REAL

10.0

Velocidad del eje
No siempre se alcanza esta velocidad, dependiendo
de la aceleración y deceleración configuradas y del
trayecto fijado.
Límites:
Velocidad de arranque/parada ≤ Velocity ≤ velocidad
máxima

Done

OUTPUT

BOOL

FALSE

TRUE

Posición de destino alcanzada

Busy

OUTPUT

BOOL

FALSE

TRUE

Petición en proceso

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

La petición ha sido cancelada por otra du‐
rante su procesamiento.

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar la petición.
La causa del error se puede consultar en los
parámetros "ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro
"ErrorID"

Consulte también
S7-1200 Motion Control V4...5 (Página 3017)
MC_MoveRelative: Diagrama de funcionamiento V1...3 (Página 3073)
MC_Power: Habilitar/bloquear eje V1...3 (Página 3054)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico V1...3 (Página 3059)
MC_Home: Referenciar eje, ajustar el punto de referencia V1...3 (Página 3060)
MC_Halt: Parar eje V1...3 (Página 3064)
MC_MoveAbsolute: Posicionar eje de forma absoluta V1...3 (Página 3067)
MC_MoveVelocity: Mover eje con especificación de velocidad V1...3 (Página 3074)

Programación del PLC
Manual de programación y manejo, 11/2019

3071

Instrucciones
4.1 Instrucciones
MC_MoveJog: Mover eje en modo Jog V1...3 (Página 3078)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos V2...3
(Página 3081)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje V2...3 (Página 3083)

3072

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_MoveRelative: Diagrama de funcionamiento V1...3
Diagrama de funcionamiento
$

$
0&B0RYH5HODWLYH

0&B0RYH5HODWLYH
$[LVB
([HB



$[LV
([HFXWH
'LVWDQFH
9HORFLW\

'RQH
%XV\
&RPPDQG$ERUWHG
(UURU
(UURU,'
(UURU,QIR

'RQHB
%XV\B
$ERUWB

$[LVB
([HB



$[LV
([HFXWH
'LVWDQFH
9HORFLW\

'RQH
%XV\
&RPPDQG$ERUWHG
(UURU
(UURU,'
(UURU,QIR

'RQHB
%XV\B

$
([HB
%XV\B
'RQHB
$ERUWB




W




W




W




W

$
([HB
%XV\B
'RQHB

9HORFLW\
$[LVB




W




W




W






3RVLWLRQ
$[LVB



W





W
$

%

Los siguientes valores han sido configurados en la ventana de configuración
Dinámica > General:
● Aceleración: 10.0
● Deceleración: 10.0

Programación del PLC
Manual de programación y manejo, 11/2019

3073

Instrucciones
4.1 Instrucciones

①

②

Un eje es desplazado por una petición MC_MoveRelative en la distancia ("Distance") 1000.0. En cuanto se alcanza la
posición de destino el sistema lo notifica mediante "Done_1". Con "Done_1" = TRUE se lanza otra petición MC_Move‐
Relative con la distancia 500.0. Debido a los tiempos de reacción (p.ej. tiempo de ciclo del programa de usuario, ...) se
produce una breve parada del eje (ver representación ampliada). En cuanto se alcanza con éxito la nueva posición de
destino el sistema lo notifica mediante "Done_2".
Una petición MC_MoveRelative activa es cancelada por otra petición MC_MoveRelative. La cancelación se notifica
mediante "Abort_1". A continuación, el eje se mueve con la nueva velocidad hasta recorrer el nuevo trayecto ("Distance")
500.0. En cuanto se alcanza la nueva posición de destino el sistema lo notifica mediante "Done_2".

Consulte también
MC_MoveRelative: Posicionar eje de forma relativa V1...3 (Página 3070)

MC_MoveVelocity
MC_MoveVelocity: Mover eje con especificación de velocidad V1...3
Descripción
La instrucción de Motion Control "MC_MoveVelocity" mueve el eje de forma constante a la
velocidad predeterminada.

Requisitos
● El objeto tecnológico Eje se ha configurado correctamente.
● El eje está habilitado.

Comportamiento de relevo
La petición MC_MoveVelocity puede ser cancelada por las siguientes peticiones de Motion
Control:
● Petición MC_Home Mode = 3
● Petición MC_Halt
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable
La nueva petición MC_MoveVelocity cancela las siguientes peticiones de Motion Control en
curso:
● Petición MC_Home Mode = 3
● Petición MC_Halt

3074

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_Axis_1

-

Objeto tecnológico del eje

Execute

INPUT

BOOL

FALSE

Inicio de la petición con flanco ascendente

Velocity

INPUT

REAL

10.0

Velocidad predeterminada para mover el eje
Límites:
Velocidad de inicio/parada ≤ |Velocity| ≤ velocidad
máxima
(Velocity = 0.0 está permitido)

Direction

INPUT

INT

0

Preajuste de sentido
0

Sentido de giro según el signo del valor del
parámetro "Velocity"

1

Sentido de giro positivo
(El signo del valor del parámetro "Velocity"
se ignora)

2

Sentido de giro negativo
(El signo del valor del parámetro "Velocity"
se ignora)

Current

INPUT

BOOL

FALSE

Mantener velocidad actual
FALSE "Mantener velocidad actual" desactivado.
Se utilizan los valores de los parámetros
"Velocity" y "Direction".
TRUE

"Mantener velocidad actual" activado. Los
valores de los parámetros "Velocity" y "Di‐
rection" no se tienen en cuenta.
En cuanto el eje vuelve a desplazarse a la
velocidad actual, el parámetro "InVelocity"
devuelve el valor TRUE.

InVelocity

OUTPUT

BOOL

FALSE

TRUE

● "Current" = FALSE:
La velocidad indicada en el parámetro
"Velocity" ha sido alcanzada.
● "Current" = TRUE:
El eje se mueve a la velocidad actual en
el momento de arranque.

Busy

OUTPUT

BOOL

FALSE

TRUE

Petición en proceso

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

La petición ha sido cancelada por otra du‐
rante su procesamiento.

Programación del PLC
Manual de programación y manejo, 11/2019

3075

Instrucciones
4.1 Instrucciones
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Error

OUTPUT

BOOL

FALSE

TRUE

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro
"ErrorID"

Ha ocurrido un error al ejecutar la petición.
La causa del error se puede consultar en los
parámetros "ErrorID" y "ErrorInfo".

Comportamiento con velocidad de consigna cero (Velocity = 0.0)
Una petición MC_MoveVelocity con "Velocity" = 0.0 cancela (al igual que una petición
MC_Halt) las peticiones de movimiento activas y detiene el eje con la deceleración configurada.
Una vez alcanzada la parada se muestra en el parámetro de salida "InVelocity" el valor TRUE
durante al menos un ciclo de programa.
"Busy" muestra el valor TRUE durante un proceso de deceleración, cambiando a FALSE junto
con "InVelocity". Si el parámetro "Execute" = TRUE, "InVelocity" y "Busy" se indican
memorizados.
Cuando inicia la petición MC_MoveVelocity se activa el bit de estado "SpeedCommand" en el
objeto tecnológico. El bit de estado "ConstantVelocity" con la parada del eje. Ambos bits se
ajustan a la nueva situación con el inicio de una nueva petición de movimiento.

Consulte también
S7-1200 Motion Control V4...5 (Página 3017)
MC_MoveVelocity: Diagrama de funcionamiento V1...3 (Página 3077)
MC_Power: Habilitar/bloquear eje V1...3 (Página 3054)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico V1...3 (Página 3059)
MC_Home: Referenciar eje, ajustar el punto de referencia V1...3 (Página 3060)
MC_Halt: Parar eje V1...3 (Página 3064)
MC_MoveAbsolute: Posicionar eje de forma absoluta V1...3 (Página 3067)
MC_MoveRelative: Posicionar eje de forma relativa V1...3 (Página 3070)
MC_MoveJog: Mover eje en modo Jog V1...3 (Página 3078)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos V2...3
(Página 3081)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje V2...3 (Página 3083)

3076

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_MoveVelocity: Diagrama de funcionamiento V1...3
Diagrama de funcionamiento
)%

)%
0&B0RYH9HORFLW\

0&B0RYH9HORFLW\
$[LV
,Q9HORFLW\
([HFXWH
%XV\
9HORFLW\ &RPPDQG$ERUWHG
(UURU
'LUHFWLRQ
(UURU,'
&XUUHQW
(UURU,QIR

$[LVB
([HB






,Q9HOB
%XV\B
$ERUWB

$[LVB
([HB




$[LV
,Q9HORFLW\
([HFXWH
%XV\
9HORFLW\ &RPPDQG$ERUWHG
(UURU
'LUHFWLRQ
(UURU,'
&XUUHQW
(UURU,QIR

,Q9HOB
%XV\B



)%


([HB 

W


%XV\B 

,Q9HOB 

$ERUWB 

W
W
W

)%


([HB 

%XV\B



,Q9HOB 

W
W
W


9HORFLW\ 
$[LVB 

W

Los siguientes valores han sido configurados en la ventana de configuración
Dinámica > General:
● Aceleración: 10.0
● Deceleración: 10.0

Programación del PLC
Manual de programación y manejo, 11/2019

3077

Instrucciones
4.1 Instrucciones

①

②

Una petición MC_MoveVelocity activa notifica el alcance de su velocidad consignada a través de "InVel_1". Seguida‐
mente es cancelada por otra petición MC_MoveVelocity. La cancelación se notifica mediante "Abort_1". En cuanto se
alcanza la nueva velocidad de destino 15.0 el sistema lo notifica mediante "InVel_2". A continuación el eje continúa
moviéndose de forma constante a la nueva velocidad.
Una petición MC_MoveVelocity activa es cancelada por otra petición MC_MoveVelocity antes de alcanzar su velocidad
consignada. La cancelación se notifica mediante "Abort_1". En cuanto se alcanza la nueva velocidad de destino 15.0 el
sistema lo notifica mediante "InVel_2". A continuación el eje continúa moviéndose de forma constante a la nueva
velocidad.

Consulte también
MC_MoveVelocity: Mover eje con especificación de velocidad V1...3 (Página 3074)

MC_MoveJog
MC_MoveJog: Mover eje en modo Jog V1...3
Descripción
La instrucción de Motion Control "MC_MoveJog" mueve el eje de forma constante a la
velocidad predeterminada en modo Jog. Utilice esta instrucción de Motion Control para, p.ej.,
fines de test y puesta en servicio.

Requisitos
● El objeto tecnológico Eje se ha configurado correctamente.
● El eje está habilitado.

Comportamiento de relevo
La petición MC_MoveJog puede ser cancelada por las siguientes peticiones de Motion Control:
● Petición MC_Home Mode = 3
● Petición MC_Halt
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable
La nueva petición MC_MoveJog cancela las siguientes peticiones de Motion Control en curso:
● Petición MC_Home Mode = 3
● Petición MC_Halt

3078

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_Axis_1

-

Objeto tecnológico del eje

JogForward

INPUT

BOOL

FALSE

Mientras el parámetro sea TRUE, el eje se moverá a
la velocidad predeterminada en el parámetro "Velo‐
city" en sentido positivo.

JogBackward

INPUT

BOOL

FALSE

Mientras el parámetro sea TRUE, el eje se moverá a
la velocidad predeterminada en el parámetro "Velo‐
city" en sentido negativo.

Si ambos parámetros son al mismo tiempo TRUE, el eje se detiene con la deceleración configurada. En los parámetros
"Error", "ErrorID" y "ErrorInfo" se muestra un error.
Velocity

INPUT

REAL

10.0

Preajuste de velocidad para el modo Jog.
Límites de la versión de instrucción V1.0:
Velocidad de inicio/parada ≤ |Velocity| ≤ velocidad
máxima
Valores límite de la versión de instrucción V2.0:
Velocidad de arranque/parada ≤ Velocity ≤ velocidad
máxima

InVelocity

OUTPUT

BOOL

FALSE

TRUE

La velocidad indicada en el parámetro "Ve‐
locity" ha sido alcanzada.

Busy

OUTPUT

BOOL

FALSE

TRUE

Petición en proceso

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

La petición ha sido cancelada por otra du‐
rante su procesamiento.

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar la petición.
La causa del error se puede consultar en los
parámetros "ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro
"ErrorID"

Consulte también
S7-1200 Motion Control V4...5 (Página 3017)
MC_MoveJog: Diagrama de funcionamiento V1...3 (Página 3080)
MC_Power: Habilitar/bloquear eje V1...3 (Página 3054)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico V1...3 (Página 3059)
MC_Home: Referenciar eje, ajustar el punto de referencia V1...3 (Página 3060)

Programación del PLC
Manual de programación y manejo, 11/2019

3079

Instrucciones
4.1 Instrucciones
MC_Halt: Parar eje V1...3 (Página 3064)
MC_MoveAbsolute: Posicionar eje de forma absoluta V1...3 (Página 3067)
MC_MoveRelative: Posicionar eje de forma relativa V1...3 (Página 3070)
MC_MoveVelocity: Mover eje con especificación de velocidad V1...3 (Página 3074)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos V2...3
(Página 3081)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje V2...3 (Página 3083)

MC_MoveJog: Diagrama de funcionamiento V1...3
Diagrama de funcionamiento
)%
0&B0RYH-RJ
$[LVB
-RJB)
-RJB%


$[LV
,Q9HORFLW\
-RJ)RUZDUG
%XV\
-RJ%DFNZDUG &RPPDQG$ERUWHG
(UURU
9HORFLW\
(UURU,'
(UURU,QIR



,Q9HOB
%XV\B



)%
-RJB)




W

-RJB%




W

,Q9HOB
%XV\B






W
W


9HORFLW\
$[LVB

W




 

Los siguientes valores han sido configurados en la ventana de configuración
Dinámica > General:
● Aceleración: 10.0
● Deceleración: 5.0

3080

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

①
②

"Jog_F" permite mover el eje en sentido positivo en modo Jog. En cuanto se alcanza la velocidad de destino 50.0 el
sistema lo notifica a través de "InVelo_1". Tras desactivar " Jog_F" el eje frena hasta pararse del todo.
"Jog_B" permite mover el eje en sentido negativo en modo Jog. En cuanto se alcanza la velocidad de destino 50.0 el
sistema lo notifica a través de "InVelo_1". Tras desactivar " Jog_B" el eje frena hasta pararse del todo.

Consulte también
MC_MoveJog: Mover eje en modo Jog V1...3 (Página 3078)

MC_CommandTable
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos V2...3
Descripción
La instrucción de Motion Control "MC_CommandTable" reúne varias peticiones individuales
de control de un eje en una secuencia de movimientos.

Requisitos
● El objeto tecnológico Eje se ha insertado y configurado correctamente en la versión V2.
● El objeto tecnológico Tabla de peticiones se ha insertado y configurado correctamente.
● El eje está habilitado.

Comportamiento de relevo
La petición MC_CommandTable puede ser cancelada por las siguientes peticiones de Motion
Control:
● Petición MC_Home Mode = 3
● Petición MC_Halt
● Petición MC_MoveAbsolute
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable
La nueva petición MC_CommandTable cancela las siguientes peticiones de Motion Control en
curso:
● Petición MC_Home Mode = 3
● Petición MC_Halt
● Petición MC_MoveAbsolute

Programación del PLC
Manual de programación y manejo, 11/2019

3081

Instrucciones
4.1 Instrucciones
● Petición MC_MoveRelative
● Petición MC_MoveVelocity
● Petición MC_MoveJog
● Petición MC_CommandTable
La petición Motion Control en curso se cancela cuando se inicia la primera petición
"Positioning Relative", "Positioning Absolute", "Velocity set point" o "Halt".

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_Axis_1

-

Objeto tecnológico del eje

CommandTa‐
ble

INPUT

TO_Command‐
Table_1

-

Objeto tecnológico de la tabla de peticiones

Execute

INPUT

BOOL

FALSE

Inicio de la tabla de peticiones con flanco ascendente

StartStep

INPUT

INT

1

Indicación que señala a partir de qué paso debe procesar‐
se la tabla de peticiones.
Límites:
1 ≤ StartStep ≤ EndStep

EndStep

INPUT

INT

32

Indicación que señala hasta qué paso debe procesarse la
tabla de peticiones.
Límites:
StartStep ≤ EndStep ≤ 32

Done

OUTPUT

BOOL

FALSE

TRUE

La tabla de peticiones se ha procesado correcta‐
mente

Busy

OUTPUT

BOOL

FALSE

TRUE

La tabla de peticiones se encuentra en proceso

CommandA‐
borted

OUTPUT

BOOL

FALSE

TRUE

La tabla de peticiones ha sido cancelada por otra
petición durante el procesamiento.

Error

OUTPUT

BOOL

FALSE

TRUE

Durante el procesamiento de la tabla de peticio‐
nes se ha producido un error. La causa del error
se puede consultar en los parámetros "ErrorID" y
"ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro "Erro‐
rID"

CurrentStep

OUTPUT

INT

0

Paso de la tabla de peticiones que se encuentra actual‐
mente en preparación

StepCode

OUTPUT

WORD

16#0000

Valor numérico/patrón de bits definido por el usuario que
corresponde a la etapa actualmente en procesamiento

Consulte también
S7-1200 Motion Control V4...5 (Página 3017)
MC_Power: Habilitar/bloquear eje V1...3 (Página 3054)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico V1...3 (Página 3059)

3082

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
MC_Home: Referenciar eje, ajustar el punto de referencia V1...3 (Página 3060)
MC_Halt: Parar eje V1...3 (Página 3064)
MC_MoveAbsolute: Posicionar eje de forma absoluta V1...3 (Página 3067)
MC_MoveRelative: Posicionar eje de forma relativa V1...3 (Página 3070)
MC_MoveVelocity: Mover eje con especificación de velocidad V1...3 (Página 3074)
MC_MoveJog: Mover eje en modo Jog V1...3 (Página 3078)
MC_ChangeDynamic: Modificar ajustes dinámicos del eje V2...3 (Página 3083)

MC_ChangeDynamic
MC_ChangeDynamic: Modificar ajustes dinámicos del eje V2...3
Descripción
La instrucción de Motion Control "MC_ChangeDynamic" permite modificar los ajustes
siguientes del eje:
● Modificar valor del tiempo de aceleración (aceleración)
● Modificar valor del tiempo de deceleración (deceleración)
● Modificar valor del tiempo de deceleración de parada de emergencia (deceleración de
parada de emergencia)
● Modificar valor del tiempo de redondeo (tirón)
El efecto del cambio se puede consultar en la descripción de las variables.

Requisitos
● El objeto tecnológico Eje se ha insertado en la versión V2.
● El objeto tecnológico Eje se ha configurado correctamente.

Comportamiento de relevo
Una petición MC_ChangeDynamic no puede ser cancelada por ninguna otra petición de
Motion Control.
Una nueva petición MC_ChangeDynamic no cancela ninguna petición de Motion Control en
curso.

Parámetros
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Axis

INPUT

TO_Axis_1

-

Objeto tecnológico del eje

Execute

INPUT

BOOL

FALSE

Inicio de la petición con flanco ascendente

Programación del PLC
Manual de programación y manejo, 11/2019

3083

Instrucciones
4.1 Instrucciones
Parámetro

Declaración Tipo de datos

Valor por de‐
fecto

Descripción

Change‐
RampUp

INPUT

BOOL

FALSE

TRUE

RampUpTi‐
me

INPUT

REAL

5.00

Tiempo (en segundos) que debe pasar para acelerar el eje
sin limitación de tirones desde la parada a la velocidad má‐
xima configurada.

Modificar tiempo de posicionamiento según el pa‐
rámetro de entrada "RampUpTime":

El cambio afecta al valor de la variable <Nombre del
eje>.Config.DynamicDefaults.Acceleration. El efecto de los
cambios puede consultarse en la descripción de esta varia‐
ble.
Change‐
INPUT
RampDown

BOOL

FALSE

TRUE

Ramp‐
DownTime

REAL

5.00

Tiempo (en segundos) que debe pasar para decelerar el eje
sin limitación de tirones desde la velocidad máxima configu‐
rada hasta su detención

INPUT

Tiempo de deceleración según el parámetro de en‐
trada "RampDownTime modificado

El cambio afecta al valor de la variable <Nombre del
eje>.Config.DynamicDefaults.Deceleration . El efecto de los
cambios puede consultarse en la descripción de esta varia‐
ble.
ChangeE‐
mergency

INPUT

BOOL

FALSE

TRUE

Modificar tiempo de deceleración de parada de
emergencia según el parámetro de entrada "Emer‐
gencyRampTime"

Emer‐
gency‐
RampTime

INPUT

REAL

2.00

Tiempo (en segundos) que debe transcurrir para decelerar el
eje sin limitación de tirones en el modo de parada de emer‐
gencia desde la velocidad máxima configurada hasta la ve‐
locidad cero
El cambio afecta al valor de la variable <Nombre del
eje>.Config.DynamicDefaults.EmergencyDeceleration . El
efecto de los cambios puede consultarse en la descripción de
esta variable.

Change‐
JerkTime

INPUT

BOOL

FALSE

TRUE

Modificar tiempo de redondeo según el parámetro
de entrada "JerkTime"

JerkTime

INPUT

REAL

0.25

Tiempo de redondeo (en segundos) que se aplica a la rampa
de aceleración y deceleración del eje
El cambio afecta al valor de la variable <Nombre del
eje>.Config.DynamicDefaults.Jerk . El efecto de los cambios
puede consultarse en la descripción de esta variable.

Done

OUTPUT

BOOL

FALSE

TRUE

Los valores modificados se han escrito en el DB
tecnológico. En la descripción de las variables se
indica cuándo surte efecto la modificación.

Error

OUTPUT

BOOL

FALSE

TRUE

Ha ocurrido un error al ejecutar la petición. La cau‐
sa del error se puede consultar en los parámetros
"ErrorID" y "ErrorInfo".

ErrorID

OUTPUT

WORD

16#0000

Identificador de error del parámetro "Error"

ErrorInfo

OUTPUT

WORD

16#0000

Identificador de información de error del parámetro "ErrorID"

3084

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Nota
En los parámetros de entrada "RampUpTime", "RampDownTime", "EmergencyRampTime"
und "JerkTime" se pueden indicar valores que excedan los valores límite admisibles de los
parámetros resultantes: "aceleración", "deceleración", "deceleración de parada de
emergencia" y "tirón".
Considerando las ecuaciones y valores límite indicados en los capítulos: "Objeto tecnológico
Eje" -> "Configuración del objeto tecnológico" -> "Dinámica" tenga en cuenta que las entradas
que efectúe deben encontrarse dentro del rango permitido.

Consulte también
S7-1200 Motion Control V4...5 (Página 3017)
MC_Power: Habilitar/bloquear eje V1...3 (Página 3054)
MC_Reset: Acusar errores, reiniciar un objeto tecnológico V1...3 (Página 3059)
MC_Home: Referenciar eje, ajustar el punto de referencia V1...3 (Página 3060)
MC_Halt: Parar eje V1...3 (Página 3064)
MC_MoveAbsolute: Posicionar eje de forma absoluta V1...3 (Página 3067)
MC_MoveRelative: Posicionar eje de forma relativa V1...3 (Página 3070)
MC_MoveVelocity: Mover eje con especificación de velocidad V1...3 (Página 3074)
MC_MoveJog: Mover eje en modo Jog V1...3 (Página 3078)
MC_CommandTable: Ejecutar peticiones de eje como secuencia de movimientos V2...3
(Página 3081)

S7-1500 Motion Control
S7-1500 Motion Control V5
MC_Power V5
MC_Power: Enable, disable technology object V5
Description
With the Motion Control instruction "MC_Power", a technology object is enabled or disabled
and, if necessary, a configured drive is switched on or off.

Programación del PLC
Manual de programación y manejo, 11/2019

3085

Instrucciones
4.1 Instrucciones

Applies to
● Speed axis
● Positioning axis
● Synchronous axis
● External encoder

Requirement
● The technology object has been configured correctly.
● Cyclic BUS communication is established between controller and encoder
("<TO>.StatusSensor[1..4].CommunicationOK" = TRUE).
● Cyclic BUS communication is established between controller and drive
("<TO>.StatusDrive.CommunicationOK" = TRUE).
● The status of the active encoder is valid ("<TO>.StatusSensor[1..4].State" = 2).
● The optional data adaption has been completed ("<TO>.StatusDrive.AdaptionState" = 2
and "<TO>.StatusSensor[1..4].AdaptionState" = 2).

Override response
● An "MC_Power" job cannot be aborted by any other Motion Control job.
● An "MC_Power" job with parameter "Enable"TRUE enables a technology object but does
not thereby abort any other Motion Control instructions.
● Disabling the technology object (parameter "Enable" = FALSE) aborts all Motion Control
jobs on the corresponding technology object in accordance with the selected "StopMode".
This process cannot be canceled by the user.

Parameters
The following table shows the parameters of Motion Control instruction "MC_Power":
Parameters

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_SpeedAxis

-

Technology object

TO_PositioningAxis
TO_SynchronousAxis
TO_ExternalEncoder
Enable

INPUT

BOOL

FALSE

TRUE

The technology object is enabled.

FALSE

The technology object is disabled.
All current jobs at the technology object
are aborted in accordance with the con‐
figured "StopMode".

3086

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default
value

Description

StartMode

INPUT

DINT

1

0

Enable positioning axis/synchronous
axis not position-controlled

1

Enable positioning axis/synchronous
axis position-controlled

The parameter initially takes effect when the posi‐
tioning axis is enabled ("Enable" changes from
"FALSE" to "TRUE") and when the axis is enabled
after acknowledgment of an interrupt that caused
the axis to be disabled.
This parameter is ignored when a speed axis or an
external encoder is used.
StopMode

INPUT

INT

0

Not applicable to the technology object external
encoder
If you disable a technology object with a negative
edge at parameter "Enable", the axis decelerates
in accordance with the selected "StopMode".
0

Emergency stop
When the technology object is disabled,
the axis is braked to a standstill without
jerk limit, using the emergency stop de‐
celeration configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Emergency stop". The drive is
then switched off and the technology ob‐
ject is locked.
(<TO>.DynamicDefaults.EmergencyDe‐
celeration)

1

Immediate stop
When a technology object is disabled,
the setpoint zero is output. The axis is
braked to a standstill according to the
configuration in the drive. The drive is
then switched off and the technology ob‐
ject is locked.

2

Stop with maximum dynamic values
When the technology object is disabled,
the axis is braked to a standstill using the
maximum deceleration configured in
"Technology object > Configuration >
Extended parameters > Dynamic limits".
The configured maximum jerk is hereby
taken into account. The drive is then
switched off and the technology object is
locked.
(<TO>.DynamicLimits.MaxDecelera‐
tion; <TO>.DynamicLimits.MaxJerk)

Programación del PLC
Manual de programación y manejo, 11/2019

3087

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Status

OUTPUT BOOL

Default
value

Description

FALSE

Technology object enable status
FALSE

Disabled
● The technology object does not
accept any Motion Control jobs.
● Speed control and positioning
control are not active.
● The actual values of the technology
object are not checked for validity.

TRUE

Enabled
● The enabled technology object
accepts Motion Control jobs.
● Speed control and positioning
control are active.
● The actual values of the technology
object are valid.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred in Motion Control ins‐
truction "MC_Power". The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Enabling technology objects
To enable a technology object, set the "Enable" parameter to "TRUE".
The following two cases are differentiated:
● Enable at a standstill
● Enable in motion of axis
Enable at a standstill
Depending on the "StartMode" parameter, the position is held ("StartMode" = 1) or the velocity
setpoint zero is output ("StartMode" = 0). When the "Status" parameter shows the value
"TRUE", the technology object is enabled.
Enable in motion of axis
If "StartMode" = 1, the position at the time of the setting of the "Enable" input takes effect as the
position setpoint for the position controller. The axis is braked to a standstill and adjusted to the
set position depending on the maximum deceleration configured under "Technology object >
Configuration > Extended parameters > Dynamic limits". If monitoring operation or dynamic
limits are hereby exceeded, this leads to corresponding alarm reactions.
If "StartMode" = 0, the axis is braked as much as possible by the specification of the velocity
setpoint zero. Monitoring operations and dynamic limits are not active in this case.

3088

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
When the "Status" parameter shows the value "TRUE", the technology object is enabled.
Nota
Automatic enable after acknowledgment of a technology alarm
If the technology object is disabled due to a technology alarm, the technology object will be
enabled again automatically after the cause has been eliminated and the alarm has been
acknowledged. This requires the "Enable" parameter to have retained the value "TRUE" during
this process.

Disabling technology objects
To disable a technology object, set the "Enable" parameter to "FALSE".
If an axis is in motion, it is braked to a standstill according to the selected "StopMode".
When the "Busy" and "Status" parameters show the value "FALSE", the disabling of the
technology object is complete and, if necessary, a configured drive switched on or off.

Drive connection by means of PROFIdrive
When a drive is connected using PROFIdrive, the setpoint, enable and drive status are
transmitted via the PROFIdrive telegram.
● Enable technology object and activate drive
With "Enable" = TRUE parameter, the technology object is enabled. The drive is enabled
according to the PROFIdrive standard.
When the "<TO>.StatusDrive.InOperation" tag shows the value "TRUE", the drive is ready
to execute setpoints. The "Status" parameter is set to the value "TRUE".
● Disable technology object and deactivate drive
With the "Enable" = FALSE parameter, the "Status" parameter is set to the value "FALSE",
and the axis is braked according to the selected "StopMode". The drive is disabled
according to the PROFIdrive standard.

Analog drive connection
The setpoint is output via an analog output. Optionally, you can configure an enabling signal via
digital output (<TO>.Actor.Interface.EnableDriveOutput), and a readiness signal via digital
input (<TO>.Actor.Interface.DriveReadyInput).
● Enable technology object and activate drive
With "Enable" = TRUE parameter, the enable output ("Enable drive output") is set.
When the drive returns the readiness signal via the ready input ("Drive ready input"), the
"Status" parameter and the technology object's "<TO>.StatusDrive.InOperation" tag are set
to "TRUE", and the setpoint is switched to the analog output.
● Disable technology object and deactivate drive
With the "Enable" = FALSE parameter, the "Status" parameter is set to the value "FALSE",
and the axis is braked according to the selected "StopMode". When the setpoint zero is
reached, the enable output is set to "FALSE".

Programación del PLC
Manual de programación y manejo, 11/2019

3089

Instrucciones
4.1 Instrucciones

Additional information
Additional information on enabling and disabling technology objects and drives can be found in
the section ""MC_Power" function diagrams".

Consulte también
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

MC_Power: Function chart V5
Function chart: Enabling a technology object and example of alarm response
$

$

0&B3RZHU
72B
(QDEOHB

$[LV

0&B0RYH9HORFLW\
6WDWXV

6WDWXVB

72B

$[LV

,Q9HORFLW\

(QDEOH

%XV\

%XV\B

([HB

([HFXWH

%XV\



6WRS0RGH

(UURU

(UURUB



9HORFLW\

&RPPDQG$ERUWHG



6WDUW0RGH

(UURU,'



$FFHOHUDWLRQ

(UURU



'HFHOHUDWLRQ

(UURU,'

ದ

-HUN



$
(QDEOHB
%XV\B
6WDWXVB
(UURUB












'LUHFWLRQ



&XUUHQW



3RVLWLRQ&RQWUROOHG




(UURU

W
W
W
W

$
([HB




W


72B9HORFLW\


W

A technology object is enabled with "Enable_1= TRUE". The successful enable can be read
from "Status_1" at time ①. The axis will then move with an "MC_MoveVelocity" job (A2). The
velocity profile of the axis can be read from "TO_1.Velocity".

3090

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
At time ② an error occurs in the technology object, which results in the disabling of the
technology object (alarm response: remove enable). The axis is braked to a standstill according
to the configuration in the drive. When the technology object is disabled, "Status_1" is reset.
Since the axis was not disabled using "Enable_1" = FALSE, the selected "StopMode" does not
apply. The cause of the error is corrected and the alarm is acknowledged at time ③.
Since "Enable_1" is still set, the technology object is enabled again. The successful enable can
be read from "Status_1". Finally, the technology object is disabled with "Enable_1" = FALSE.

MC_Reset V5
MC_Reset: Acknowledge alarms, restart technology object V5
Description
With the Motion Control instruction "MC_Reset", you acknowledge all technology alarms that
can be acknowledged in the user program. Acknowledgment also resets the "Error" and
"Warning" bits in the technology object data block. An acknowledgment of alarms in the drive
is also possible without a pending error at the technology object.
With "Restart" = TRUE, you start reinitialization (restart) of technology objects. Upon restart of
the technology object, the new configuration data are applied in the technology object data
block.

Applies to
● All technology objects

Requirement
● The technology objects speed axis, positioning axis, synchronous axis and external
encoder.
For a restart, the technology object must be disabled.
("MC_Power.Status" = FALSE and "MC_Power.Busy" = FALSE)
● Cyclic BUS communication is established between controller and encoder
("<TO>.StatusSensor[1..4].CommunicationOK" = TRUE).
● Cyclic BUS communication is established between controller and drive
("<TO>.StatusDrive.CommunicationOK" = TRUE).

Override response
● An "MC_Reset" job cannot be aborted by any other Motion Control job.
● A "MC_Reset" job with "Restart" = TRUE cancels all running Motion Control jobs.

Programación del PLC
Manual de programación y manejo, 11/2019

3091

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction "MC_Reset":
Parameter

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_SpeedAxis

-

Technology object

TO_PositioningAxis
TO_SynchronousAxis
TO_ExternalEncoder
TO_LeadingAxis‐
Proxy
TO_OutputCam
TO_CamTrack
TO_MeasuringInput
TO_Cam
TO_Kinematics
Execute

INPUT

BOOL

FALSE

TRUE

Start job with a positive edge

Restart

INPUT

BOOL

FALSE

TRUE

Reinitialization of the technology object
and acknowledgment of pending techno‐
logy alarms. The technology object is
reinitialized with the configured start va‐
lues.

FALSE

Acknowledgment of queued technology
alarms

TRUE

Technology alarms have been acknow‐
ledged.

Done

OUTPUT BOOL

FALSE

The restart has been executed.
Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Acknowledging technology alarms
To acknowledge technology alarms, follow these steps:
1. Check the requirements indicated above.
2. Set the parameter "Restart" = FALSE.
3. Start the acknowledgment of the error with a positive edge at parameter "Execute".
When the "Done" parameter shows the value "TRUE", the error has been acknowledged.
If you acknowledge multiple pending alarms, the pending alarms are displayed once more
briefly in the "ErrorDetail.Number" tag without being signaled again. Check whether all alarms

3092

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
have been acknowledged after a restart with "MC_Reset.Done" = TRUE has been completely
processed.
Nota
Acknowledge technology alarms with "Restart" = FALSE
To acknowledge only the technology alarms, set "Restart" = FALSE. The technology object
cannot be used during a restart. All technology alarms on axes and encoders are
acknowledged, even if they are not enabled or not effective.

Restarting a technology object
To restart a technology object, follow these steps:
1. Check the requirements indicated above.
2. Set the parameter "Restart" = TRUE.
3. Perform the restart with a positive edge at parameter "Execute".
When the "Done" parameter shows the value "TRUE", the restart of the technology object
is complete.
You can find additional information on restarting in the "Restarting technology objects" section
of the "S7-1500/S7-1500T Motion Control overview" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766459).

Consulte también
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

MC_Home V5
MC_Home: Home technology object, set home position V5
Description
With the Motion Control instruction "MC_Home", you create the relationship between the
position in the technology object and the mechanical position. The actual position value in the
technology object is assigned to a homing mark at the same time. This homing mark represents
a known mechanical position.
Homing is performed according to the mode selected with the "Mode" parameter and the
configuration under "Technology object > Configuration > Extended parameters > Homing".
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control has
been standardized within the framework of technology version V2.0. This results in a new
assignment of the parameter values for the "MC_Home.Mode" parameter. A comparison of the
"MC_Home.Mode" parameter for technology versions V1.0 and ≥ V2.0 is available in the
section "Version overview" of the "S7-1500/S7-1500T Motion Control overview"
documentation (https://support.industry.siemens.com/cs/ww/en/view/109766459).

Programación del PLC
Manual de programación y manejo, 11/2019

3093

Instrucciones
4.1 Instrucciones
The preset values under "Technology object > Configuration > Extended parameters >
Dynamic default values" are used for the dynamic values Acceleration, Deceleration and Jerk.

Applies to
● Synchronous axis
● Positioning axis
● External encoder
The following table shows which modes are possible with each of the technology objects:
Operating mode

Positioning axis/
Positioning axis/
synchronous axis
synchronous axis
with incremental en‐ with absolute enco‐
coder
der

Active homing

External incremen‐
tal
encoder

External absolute
encoder

X

-

-

-

X

-

X

-

X

X

X

X

X

X

X

X

X

X

X

X

-

X

-

X

("Mode" = 3, 5)
Passive homing
("Mode" = 2, 8, 10)
Set actual position
("Mode" = 0)
Relative offset to the actual position
("Mode" = 1)
Set setpoint position (direct absolu‐
te)
("Mode" = 11)
Relative shift of the setpoint position
("Mode" = 12)
Absolute encoder adjustment
("Mode" = 6, 7)

Requirement
● The technology object has been configured correctly.
● "Mode" = 2, 3, 5, 8, 10
The technology object is enabled.
● "Mode" = 0, 1, 6, 7, 8, 11, 12
The actual encoder values are valid (<TO>.StatusSensor[1..4].State = 2).
● "Mode" = 6, 7
The axis is in position-controlled mode.

Override response
The override response for "MC_Home" jobs is described in section "Override response V5:
Homing and motion jobs (Página 3281)".

3094

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction "MC_Home":
Parameter

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_PositioningAxis

-

Technology object

TO_SynchronousAxis
TO_ExternalEncoder
Execute

INPUT

BOOL

FALSE

TRUE

Position

INPUT

LREAL

0.0

The specified value is used according to the selec‐
ted "Mode".

Programación del PLC
Manual de programación y manejo, 11/2019

Start job with a positive edge

3095

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

Mode

INPUT

INT

0

Operating mode
0

Direct homing (absolute)
The current position of the technology
object is set to the value of parameter
"Position".

1

Direct homing (relative)
The current position of the technology
object is shifted by the value of parame‐
ter "Position".

2

Passive homing (without reset)
Functions like "Mode" 8, with the diffe‐
rence that the "homed" status is not re‐
set when the function is enabled.

3

Active homing
The positioning axis/synchronous axis
technology object performs a homing
movement according to the configura‐
tion.
After the completion of the motion, the
axis is positioned at the value of the "Po‐
sition" parameter.

4

Reserved

5

Active homing ("Position" parameter has
no effect)
The positioning axis/synchronous axis
technology object performs a homing
movement according to the configura‐
tion.
After completion of the motion, the axis
is positioned at the home position confi‐
gured under "Technology object > Con‐
figuration > Extended parameters > Ho‐
ming > Active homing".
(<TO>.Homing.HomePosition)

6

Absolute encoder adjustment (relative)
The current position is shifted by the va‐
lue of parameter "Position".
The calculated absolute value offset is
stored retentively in the CPU.
(<TO>.StatusSensor[1..4].AbsEncode‐
rOffset)

7

Absolute encoder adjustment (absolute)
The current position is set to the value of
parameter "Position".
The calculated absolute value offset is
stored retentively in the CPU.
(<TO>.StatusSensor[1..4].AbsEncode‐
rOffset)

3096

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description
8

Passive homing
When the homing mark is detected, the
actual value is set to the value of the
"Position" parameter.

9

Abort passive homing
An active job for passive homing is abor‐
ted.

10

Passive homing ("Position" parameter
has no effect)
When the homing mark is detected, the
actual value is set to the home position
configured under "Technology object >
Configuration > Extended parameters >
Homing > Passive homing".
(<TO>.Homing.HomePosition)

11

Set setpoint position (absolute)
The setpoint position of the technology
object is set to the value of the "Position"
parameter. The following error remains.

12

Shift the setpoint position (relative)
The setpoint position of the technology
object is shifted by the value of the "Po‐
sition" parameter. The following error re‐
mains.

ReferenceMarkPosi‐
tion

OUTPUT LREAL

0.0

Display of the position at which the technology ob‐
ject was homed
(valid when "Done" = TRUE)

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Programación del PLC
Manual de programación y manejo, 11/2019

3097

Instrucciones
4.1 Instrucciones

Resetting the "Homed" status
The "Homed" status of a technology object is reset under the following conditions
(<TO>.StatusWord.X5 (HomingDone)):
● Technology objects with incremental actual values:
– Starting an "MC_Home" job with "Mode" = 3, 5, 8, 10
(After successful completion of the homing operation, the "Homed" status is reset.)
– Error in the encoder system, or encoder failure
– Restart of the technology object
– After POWER OFF → POWER ON of the CPU
– Memory reset
– Modification of the encoder configuration
● Technology objects with absolute actual values:
– Error in sensor system/encoder failure
– Replacement of the CPU
– Modification of the encoder configuration
– Restoration of the CPU factory settings
– Transfer of a different project into the controller

Homing a technology object with "Mode" = 1 … 8, 10
To home a technology object, follow these steps:
1. Check the requirements indicated above.
2. Specify the desired homing function in the "Mode" parameter.
3. Initialize the necessary parameters with values, and start the homing operation with a
positive edge at the "Execute" parameter.
When the "Done" parameter shows the value "TRUE", the "MC_Home" job has been
completed according to the selected "Mode". The "Homed" status of the technology object
is indicated under "Technology object > Diagnostics > Status and error bits > Motion status
> Homed" (<TO>.StatusWord.X5 (HomingDone)).

Abort of a passive homing process with "Mode" = 9
With "Mode" = 9, the technology object is not homed. When an active "MC_Home" job for
passive homing ("Mode" = 2, 8, 10) is overridden by another "MC_Home" job with "Mode" = 9,
the running job is aborted with parameter "CommandAborted" = TRUE. The overriding job with
"Mode" = 9 signals successful execution with parameter "Done" = TRUE.

Additional information
An option for evaluating the individual status bits can be found in the section "Evaluating
StatusWord, ErrorWord and WarningWord" of the "S7-1500/S7-1500T Motion Control
overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459) documentation.

3098

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Consulte también
Override response V5: Homing and motion jobs (Página 3281)
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

MC_Halt V5
MC_Halt: Pause axis V5
Description
With the Motion Control instruction "MC_Halt", you brake an axis until it comes to a standstill.
You define the dynamic behavior of the braking operation with parameters "Jerk" and
"Deceleration".

Applies to
● Speed axis
● Positioning axis
● Synchronous axis

Requirement
● The technology object has been configured correctly.
● The technology object has been enabled.

Override response
The override response for "MC_Halt" jobs is described in section "Override response V5:
Homing and motion jobs (Página 3281)".

Parameters
The following table shows the parameters of Motion Control instruction "MC_Halt":
Parameters

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_SpeedAxis

-

Technology object

FALSE

TRUE

TO_PositioningAxis
TO_SynchronousAxis
Execute

INPUT

BOOL

Programación del PLC
Manual de programación y manejo, 11/2019

Start job with a positive edge

3099

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default
value

Description

Deceleration

INPUT

LREAL

-1.0

Deceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The deceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk
> 0.0

Constant-acceleration velocity profile;
the specified jerk is used

= 0.0

Trapezoid velocity profile

< 0.0

The jerk configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Jerk)

AbortAcceleration

INPUT

BOOL

FALSE

FALSE

The current acceleration at the start of
the job is reduced using the configured
jerk. Afterwards, the deceleration builds
up

TRUE

The acceleration is set to 0.0 at the start
of the job, and the deceleration imme‐
diately builds up.

Done

OUTPUT BOOL

FALSE

TRUE

Velocity zero has been reached.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Braking an axis with "MC_Halt"
Proceed as follows to decelerate an axis to a standstill:
1. Check the requirements indicated above.
2. Set the necessary values for the parameters "Deceleration", "Jerk" and "AbortAcceleration".
3. Start the "MC_Halt" job with a positive edge at parameter "Execute".
The current motion state is indicated in parameters "Busy", "Done" and "Error". The
standstill of the axis is indicated under "Technology object > Diagnostics > Status and error
bits > Motion status > Standstill" (<TO>.StatusWord.X7 (Standstill)).

3100

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Braking an axis with active force/torque limit
To brake an axis with active force/torque limiting, use the Motion Control instruction "MC_Stop"
with "Emergency stop" mode ("Mode" = 0).

Additional information
Information on the evaluation of the individual bits can be found in the "Evaluating StatusWord,
ErrorWord and WarningWord" section of the "S7-1500/S7-1500T Motion Control overview"
documentation (https://support.industry.siemens.com/cs/ww/en/view/109766459).

Consulte también
Override response V5: Homing and motion jobs (Página 3281)
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

Programación del PLC
Manual de programación y manejo, 11/2019

3101

Instrucciones
4.1 Instrucciones

MC_Halt: Function chart V5
Function chart: Pausing an axis and the overriding job characteristics
$

$

0&B0RYH9HORFLW\
72B

0&B+DOW

,Q9HORFLW\

,Q9HOB

72B

([HB

([HFXWH

%XV\

%XV\B

([HB



9HORFLW\

&RPPDQG$ERUWHG

$[LV

$ERUWB





$FFHOHUDWLRQ

(UURU





'HFHOHUDWLRQ

(UURU,'

$ERUW$FFB



-HUN



'LUHFWLRQ



&XUUHQW



3RVLWLRQ&RQWUROOHG



$
([HB
%XV\B
$ERUWB

$[LV

'RQH

'RQHB

([HFXWH

%XV\

%XV\B

'HFHOHUDWLRQ

&RPPDQG$ERUWHG

-HUN
$ERUW$FFHOHUDWLRQ

(UURU,'






W




W




W

$
([HB
$ERUW$FFB
'RQHB
%XV\B

$ERUWB

(UURU




W




W




W




W


72B9HORFLW\

72B
$FFHOHUDWLRQ

W




W



72B-HUN




W



$

3102

%

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Section
$

Section
%

An axis is moved with an "MC_MoveVelocity" job (A1). At time ①, the "MC_MoveVelocity" job is overridden by
an "MC_Halt" job (A2). The job abort is signaled via "Abort_1". With "AbortAcc_2" = FALSE, the current accele‐
ration is reduced with the specified jerk. Afterward, the deceleration builds up and the axis is braked to a standstill.
The completion of the "MC_Halt" job is reported via "Done_2".

The axis is moved with an "MC_MoveVelocity" job (A1). At time ②, the "MC_MoveVelocity" job is overridden by
an "MC_Halt" job (A2). The job abort is signaled via "Abort_1". With "AbortAcc_2" = TRUE, the current acceleration
is set to zero immediately and the deceleration builds up. The axis is braked to a standstill. The completion of the
"MC_Halt" job is reported via "Done_2".

MC_MoveAbsolute V5
MC_MoveAbsolute: Position axis absolutely V5
Description
With the Motion Control instruction "MC_MoveAbsolute", you can move an axis to an absolute
position.
You define the dynamic behavior of the motion with parameters "Velocity", "Jerk",
"Acceleration" and "Deceleration".

Applies to
● Positioning axis
● Synchronous axis

Requirement
● The technology object has been configured correctly.
● The technology object has been enabled.
● The technology object is homed.

Override response
The override response for "MC_MoveAbsolute" jobs is described in section "Override response
V5: Homing and motion jobs (Página 3281)".

Programación del PLC
Manual de programación y manejo, 11/2019

3103

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction "MC_MoveAbsolute":
Parameters

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_PositioningAxis

-

Technology object

TO_SynchronousAxis
Execute

INPUT

BOOL

FALSE

TRUE

Position

INPUT

LREAL

0.0

Absolute target position

Start job with a positive edge

Velocity

INPUT

LREAL

-1.0

Velocity setpoint for the positioning
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The velocity configured in "Technology
object > Configuration > Extended para‐
meters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Velocity)

Acceleration

INPUT

LREAL

-1.0

Acceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The acceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The deceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk
> 0.0

Constant acceleration velocity profile

= 0.0

Trapezoid velocity profile

< 0.0

The jerk configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.

The specified value is used.

(<TO>.DynamicDefaults.Jerk)
Direction

INPUT

INT

1

Motion direction of the axis
This parameter is only evaluated when the modulo
function is enabled.
"Technology object > Configuration > Basic para‐
meters > Enable modulo"

3104

1

Positive direction

2

Negative direction

3

Shortest distance

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Done

OUTPUT BOOL

Default
value

Description

FALSE

TRUE

The target position has been reached.
The minimum dwell time has expired
(<TO>.PositioningMonitoring.MinDwell‐
Time).

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Moving an axis to an absolute position
Proceed as follows to move an axis to an absolute position:
1. Check the requirements indicated above.
2. Specify the desired target position in the "Position" parameter.
3. Start the "MC_MoveAbsolute" job with a positive edge at parameter "Execute".
The current motion state is indicated in parameters "Busy", "Done" and "Error".

Consulte también
Override response V5: Homing and motion jobs (Página 3281)
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

Programación del PLC
Manual de programación y manejo, 11/2019

3105

Instrucciones
4.1 Instrucciones

MC_MoveAbsolute: Function chart V5
Function chart: Absolute positioning of an axis, and the response to an overriding job

72B

$

$

0&B0RYH$EVROXWH

0&B0RYH$EVROXWH

$[LV

'RQH

'RQHB

72B

$[LV

'RQH

'RQHB

([HB

([HFXWH

%XV\

%XV\B

([HB

([HFXWH

%XV\

%XV\B



3RVLWLRQ

&RPPDQG$ERUWHG

$ERUWB



3RVLWLRQ

&RPPDQG$ERUWHG



9HORFLW\

(UURU



9HORFLW\

(UURU,'



$FFHOHUDWLRQ



'HFHOHUDWLRQ



$FFHOHUDWLRQ



'HFHOHUDWLRQ

ದ


ದ

-HUN



'LUHFWLRQ



$
([HB
'RQHB
%XV\B
$ERUWB

(UURU
(UURU,'

-HUN
'LUHFWLRQ






W




W




W




W

$
([HB
'RQHB
%XV\B




W




W




W


72B9HORFLW\




W


72B3RVLWLRQ




$

3106

%

W

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Section
$

Section
%

An axis is moved to absolute position 1000.0 with an "MC_MoveAbsolute" job (A1). When the axis reaches the
target position, this is signaled at time ① via "Done_1". At this time ①, another "MC_MoveAbsolute" job (A2) with
target position 1500.0 is started. When the axis reaches the target position 1500.0, this is signaled via "Done_2".
Since "Exe_2" was previously reset, "Done_2" is applied only to one cycle.
An active "MC_MoveAbsolute" job (A1) is overridden at time ② by another "MC_MoveAbsolute" job (A2). The
abort is signaled via "Abort_1". The axis is braked to the changed velocity and moved to the new target position
1500.0. When the new target position is reached, this is signaled via "Done_2".

MC_MoveRelative V5
MC_MoveRelative: Position axis relatively V5
Description
With the Motion Control instruction "MC_MoveRelative", you move an axis relative to its
position when execution of the job began.
You define the dynamic behavior of the motion with parameters "Velocity", "Jerk",
"Acceleration" and "Deceleration".

Applies to
● Positioning axis
● Synchronous axis

Requirement
● The technology object has been configured correctly.
● The technology object has been enabled.

Override response
The override response for "MC_MoveRelative" jobs is described in section "Override response
V5: Homing and motion jobs (Página 3281)".

Parameters
The following table shows the parameters of Motion Control instruction "MC_MoveRelative":
Parameter

Declara‐
tion

Axis

INPUT

Data type

Default
value

Description

TO_PositioningAxis

-

Technology object

TO_SynchronousAxis
Execute

INPUT

BOOL

FALSE

TRUE

Distance

INPUT

LREAL

0.0

Distance for the positioning process
(negative or positive)

Programación del PLC
Manual de programación y manejo, 11/2019

Start job with a positive edge

3107

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

Velocity

INPUT

LREAL

-1.0

Velocity setpoint for the positioning
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The velocity configured in "Technology
object > Configuration > Extended para‐
meters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Velocity)

Acceleration

INPUT

LREAL

-1.0

Acceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The acceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The deceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk
> 0.0

Constant acceleration velocity profile
The specified value is used.

= 0.0

Trapezoid velocity profile

< 0.0

The jerk configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Jerk)

Done

OUTPUT BOOL

FALSE

TRUE

The target position has been reached.
The minimum dwell time has expired
(<TO>.PositioningMonitoring.MinDwell‐
Time).

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

3108

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Moving an axis relative to the starting position
Proceed as follows to move an axis relative to the starting position:
1. Check the requirements indicated above.
2. Specify distance to be moved in the "Distance" parameter.
3. Start the "MC_MoveRelative" job with a positive edge at parameter "Execute".
The current motion state is indicated in parameters "Busy", "Done" and "Error".

Consulte también
Override response V5: Homing and motion jobs (Página 3281)
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

Programación del PLC
Manual de programación y manejo, 11/2019

3109

Instrucciones
4.1 Instrucciones

MC_MoveRelative: Function chart V5
Function chart: Relative positioning of an axis, and the overriding job characteristics

72B

$

$

0&B0RYH5HODWLYH

0&B0RYH5HODWLYH

$[LV

'RQH

'RQHB

72B

$[LV

'RQH

'RQHB

([HB

([HFXWH

%XV\

%XV\B

([HB

([HFXWH

%XV\

%XV\B



'LVWDQFH

$ERUWB



'LVWDQFH



&RPPDQG$ERUWHG

9HORFLW\



$FFHOHUDWLRQ



'HFHOHUDWLRQ

ದ

(UURU



(UURU,'



$FFHOHUDWLRQ



'HFHOHUDWLRQ

ದ

-HUN



$
([HB
%XV\B
'RQHB
$ERUWB

&RPPDQG$ERUWHG

9HORFLW\

(UURU
(UURU,'

-HUN






W




W




W




W

$
([HB
%XV\B
'RQHB

72B9HORFLW\




W




W




W





W


72B3RVLWLRQ




$

3110

%

W

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Section
$

Section
%

The axis is moved by an "MC_MoveRelative" job (A1) by the distance ("Distance") 1000.0 (the starting position
here is 0.0). When the axis reaches the target position, this is signaled at time ① via "Done_1". At this time ①,
another "MC_MoveRelative" job (A2) with distance 500.0 is started. When the new target position is reached, this
is signaled via "Done_2". Since "Exe_2" was previously reset, "Done_2" is applied only to one cycle.
An active "MC_MoveRelative" job (A1) is overridden by another "MC_MoveRelative" job (A2). The abort is sig‐
naled at time ② via "Abort_1". The axis is then moved at the new velocity by the distance ("Distance") 500.0.
When the new target position is reached, this is signaled via "Done_2".

MC_MoveVelocity V5
MC_MoveVelocity: Move axis with velocity/speed setpoint V5
Description
With the Motion Control instruction "MC_MoveVelocity", you move an axis at constant velocity/
speed.
You define the dynamic behavior of the motion with parameters "Velocity", "Jerk",
"Acceleration" and "Deceleration".
● Positioning axis/synchronous axis:
A velocity is specified in the "Velocity" parameter.
● Speed axis:
A speed is specified in the "Velocity" parameter.

Applies to
● Speed axis
● Positioning axis
● Synchronous axis

Requirement
● The technology object has been configured correctly.
● The technology object has been enabled.

Override response
The override response for "MC_MoveVelocity" jobs is described in section "Override response
V5: Homing and motion jobs (Página 3281)".

Programación del PLC
Manual de programación y manejo, 11/2019

3111

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction "MC_MoveVelocity":
Parameters

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_SpeedAxis

-

Technology object

TRUE

TO_PositioningAxis
TO_SynchronousAxis
Execute

INPUT

BOOL

FALSE

Velocity

INPUT

LREAL

100.0

Start job with a positive edge

Velocity setpoint/speed setpoint for the motion
("Velocity" = 0.0 is permitted)

Acceleration

INPUT

LREAL

-1.0

Acceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The acceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The deceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk
> 0.0

Constant acceleration velocity profile
The specified value is used.

= 0.0

Trapezoid velocity profile

< 0.0

The jerk configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Jerk)

Direction

INPUT

INT

0

Direction of rotation of the axis
0

The sign of the velocity specified at the
"Velocity" parameter defines the direc‐
tion of rotation.

1

Positive direction of rotation
The value of "Velocity" is used.

2

Negative direction of rotation
The value of "Velocity" is used.

3112

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default
value

Description

Current

INPUT

BOOL

FALSE

Maintain current velocity
FALSE

Disabled
The values of parameters "Velocity" and
"Direction" are taken into account.

TRUE

Enabled
The values at the parameters "Velocity"
and "Direction" are not taken into ac‐
count. The current velocity and direction
at function start are retained.
When the axis resumes motion at the
velocity that was current at function start,
the "InVelocity" parameter returns the
value "TRUE".

PositionControlled

INPUT

BOOL

TRUE

FALSE

Non position-controlled operation

TRUE

Position-controlled mode

The parameter applies as long as the "MC_Move‐
Velocity" job is being executed. After this, the set‐
ting of the following job applies.
This parameter is ignored when a speed axis is
used.
InVelocity

OUTPUT BOOL

FALSE

TRUE

The velocity setpoint/speed setpoint has
been reached. A velocity setpoint/speed
setpoint is output.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The cause of the error can be found
in the "ErrorID" parameter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Behavior with setpoint velocity/speed zero ("Velocity" = 0.0)
An "MC_MoveVelocity" job with "Velocity" = 0.0 stops the axis with the configured deceleration.
When the velocity setpoint/speed setpoint zero is reached, the parameter "InVelocity" will
indicate the value "TRUE".
Under "Technology object > Diagnostics > Status and error bits > Motion status", "constant
velocity" and "standstill" will be displayed (<TO>.StatusWord.X12 (ConstantVelocity);
<TO>.StatusWord.X7 (Standstill)).
The parameters "InVelocity" and "Busy" show the value "TRUE", until the "MC_MoveVelocity"
job is overridden by another Motion Control job.

Programación del PLC
Manual de programación y manejo, 11/2019

3113

Instrucciones
4.1 Instrucciones

Moving an axis with constant velocity/speed
Proceed as follows to move an axis with constant velocity/speed:
1. Check the requirements indicated above.
2. At the "Velocity" parameter, specify the velocity/speed, with which the axis should be moved.
3. Start the "MC_MoveVelocity" job with a positive edge at parameter "Execute".
The current motion state is indicated in parameters "Busy", "InVelocity" and "Error".
If the "InVelocity" parameter shows the value "TRUE", the velocity/speed setpoint has been
reached. The axis continues moving at this constant velocity. The parameters "InVelocity"
and "Busy" show the value "TRUE", until the "MC_MoveVelocity" job is overridden by
another Motion Control job.
Nota
Response to a change in the override
If the velocity/speed is influenced during constant motion by a change in the override
(<TO>.Override.Velocity), the "InVelocity" parameter is reset during the acceleration or
deceleration. When the newly calculated velocity/speed is reached ("Velocity" × "Override" %),
then "InVelocity" is set again.

Additional information
An option for evaluating the individual status bits can be found in the section "Evaluating
StatusWord, ErrorWord and WarningWord" of the "S7-1500/S7-1500T Motion Control
overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459) documentation.

Consulte también
Override response V5: Homing and motion jobs (Página 3281)
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

3114

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_MoveVelocity: Function chart V5
Function chart: Moving an axis with velocity specification, and the response to an overriding job
$

$

0&B0RYH9HORFLW\

0&B0RYH9HORFLW\

,Q9HORFLW\

,Q9HOB

72B

([HB

([HFXWH

%XV\

%XV\B

([HB

([HFXWH

%XV\



9HORFLW\

&RPPDQG$ERUWHG



9HORFLW\

&RPPDQG$ERUWHG

72B

$[LV

$ERUWB

$[LV

,Q9HORFLW\



$FFHOHUDWLRQ

(UURU



$FFHOHUDWLRQ

(UURU



'HFHOHUDWLRQ

(UURU,'



'HFHOHUDWLRQ

(UURU,'

ದ

ದ

-HUN
'LUHFWLRQ



'LUHFWLRQ



&XUUHQW



&XUUHQW
3RVLWLRQ&RQWUROOHG



$

%XV\B
$ERUWB

-HUN



3RVLWLRQ&RQWUROOHG

,Q9HOB







([HB




%XV\B




,Q9HOB




$ERUWB



W
W
W
W

$


([HB




%XV\B




,Q9HOB




$ERUWB



W
W
W
W


72B9HORFLW\



W

An "MC_MoveVelocity" job (A1) initiated via "Exe_1" accelerates the axis and signals at time ①
via "InVel_1" that the velocity setpoint 50.0 has been reached.
At time ②, the job is overridden by another "MC_MoveVelocity" job (A2). The abort is signaled
via "Abort_1". When the new velocity setpoint 15.0 is reached, this is signaled via "InVel_2".
The axis then continues moving at the constant velocity 15.0.

Programación del PLC
Manual de programación y manejo, 11/2019

3115

Instrucciones
4.1 Instrucciones
The running "MC_MoveVelocity" job (A2) is overridden by another "MC_MoveVelocity" job
(A1). The abort is signaled via "Abort_2". The axis is accelerated to the new velocity setpoint
50.0. Before the velocity setpoint is reached, the current "MC_MoveVelocity" job (A1) is
overridden at time ③ by another "MC_MoveVelocity" job (A2). The abort is signaled via
"Abort_1". When the new velocity setpoint 15.0 is reached, this is signaled via "InVel_2". The
axis then continues moving at the constant velocity 15.0.

MC_MoveJog V5
MC_MoveJog: Move axis in jog mode V5
Description
With the Motion Control instruction "MC_MoveJog", you move an axis in jog mode.
You define the dynamic behavior of the motion with parameters "Velocity", "Jerk",
"Acceleration" and "Deceleration".
● Positioning axis/synchronous axis:
A velocity is specified in the "Velocity" parameter.
● Speed axis:
A speed is specified in the "Velocity" parameter.

Applies to
● Speed axis
● Positioning axis
● Synchronous axis

Requirement
● The technology object has been configured correctly.
● The technology object has been enabled.

Override response
The override response for "MC_MoveJog" jobs is described in section "Override response V5:
Homing and motion jobs (Página 3281)".

3116

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction "MC_MoveJog":
Parameter

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_SpeedAxis

-

Technology object

TO_PositioningAxis
TO_SynchronousAxis
JogForward

INPUT

BOOL

FALSE

TRUE

As long as the parameter is "TRUE", the
axis moves in the positive direction at
the velocity specified in parameter "Ve‐
locity".

JogBackward

INPUT

BOOL

FALSE

TRUE

As long as the parameter is "TRUE", the
axis moves in the negative direction at
the velocity specified in parameter "Ve‐
locity".

Velocity

INPUT

LREAL

100.0

Acceleration

INPUT

LREAL

-1.0

Velocity setpoint/speed setpoint for the motion
≥ 0.0

The specified value is used.

< 0.0

The absolute value of the specified value
is used.

Acceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The acceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The deceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk
> 0.0

Constant acceleration velocity profile
The specified value is used.

= 0.0

Trapezoid velocity profile

< 0.0

The jerk configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Jerk)

Programación del PLC
Manual de programación y manejo, 11/2019

3117

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

PositionControlled

INPUT

BOOL

TRUE

FALSE

Non position-controlled operation

TRUE

Position-controlled mode

The parameter applies as long as the "MC_Move‐
Jog" job is being executed. After this, the setting of
the following job applies.
This parameter is ignored when a speed axis is
used.
InVelocity

OUTPUT BOOL

FALSE

TRUE

The velocity setpoint/speed setpoint has
been reached. A velocity setpoint/speed
setpoint is output.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Behavior with setpoint velocity/speed zero ("Velocity" = 0.0)
An "MC_MoveJog" job with "Velocity" = 0.0 stops the axis with the configured deceleration.
When the velocity setpoint/speed setpoint zero is reached, the parameter "InVelocity" will
indicate the value "TRUE".
Under "Technology object > Diagnostics > Status and error bits > Motion status", "constant
velocity" and "standstill" will be displayed (<TO>.StatusWord.X12 (ConstantVelocity);
<TO>.StatusWord.X7 (Standstill)).

Moving an axis in jog mode
Proceed as follows to move an axis in jog mode:
1. Check the requirements indicated above.
2. Move the axis in the positive direction with "JogForward", or in the negative direction with
"JogBackward".
The current motion state is indicated in parameters "Busy", "InVelocity" and "Error".
If both "JogForward" and "JogBackward" are set to TRUE, the axis is braked at the last valid
deceleration. The error 16#8007 (incorrect direction specification) is output.
Nota
Response to a change in the override
If the velocity/speed is influenced during constant motion by a change in the override
(<TO>.Override.Velocity), the "InVelocity" parameter is reset during the acceleration or
deceleration. When the newly calculated velocity is reached ("Velocity" × "Override" %), then
"InVelocity" is set again.

3118

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Additional information
An option for evaluating the individual status bits can be found in the section "Evaluating
StatusWord, ErrorWord and WarningWord" of the "S7-1500/S7-1500T Motion Control
overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459) documentation.

Consulte también
Override response V5: Homing and motion jobs (Página 3281)
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

MC_MoveJog: Function chart V5
Function chart: Moving an axis in jog mode
$
0&B0RYH-RJ
72B

$[LV

,Q9HORFLW\

,Q9HO

%XV\

%XV\

-RJB)

-RJ)RUZDUG

-RJB%

-RJ%DFNZDUG &RPPDQG$ERUWHG

9HOB,QSXW

9HORFLW\



$FFHOHUDWLRQ



'HFHOHUDWLRQ

ದ

-HUN

(UURU

(UURU
(UURU,'

3RVLWLRQ&RQWUROOHG



$





-RJB)




-RJB%




,Q9HO




%XV\




(UURU
9HOB,QSXW







W
W
W
W
W
W


72B9HORFLW\



ದ

Programación del PLC
Manual de programación y manejo, 11/2019

W

3119

Instrucciones
4.1 Instrucciones
The axis is moved in the negative direction in jog mode via "Jog_B". When the velocity setpoint
-50.0 is reached, this is signaled via "InVel" = TRUE. After "Jog_B" is reset, the axis is braked
and brought to a standstill. Then the axis is moved in the positive direction via "Jog_F". When
the velocity setpoint 50.0 is reached, this is signaled via "InVel" = TRUE.
At the time ①, if "Jog_F" is set, the velocity setpoint is changed to 100.0 by means of
"Vel_Input". Alternatively, you can also change the velocity setpoint using the velocity override.
"InVel" is reset. Axis is being accelerated. When the new velocity setpoint 100.0 is reached, this
is signaled via "InVel" = TRUE.
If "Jog_F" is set, "Jog_B" is likewise set at time ②. If both "Jog_F" and "Jog_B" are set, then the
axis is braked with the last applicable deceleration. An error is indicated via "Error", and the
"ErrorID" of the error 16#8007 (incorrect direction specification) is output.
This error is resolved by resetting the two inputs "Jog_F" and "Jog_B".
During the braking ramp, "Jog_F" is set at time ③. The axis is accelerated to the last configured
velocity. When the velocity setpoint 100.0 is reached, this is signaled via "InVel" = TRUE.

MC_MoveSuperimposed V5
MC_MoveSuperimposed: Position axes overlapping V5
Description
With the Motion Control instruction "MC_MoveSuperimposed", you start a relative positioning
motion that is superimposed on a active basic motion.
You define the dynamic behavior of the motion with parameters "VelocityDiff", "Jerk",
"Acceleration" and "Deceleration" . The dynamic values are added to the values of the basic
motion. The duration of the basic motion is not extended by a superimposed motion.
The dynamics of the total axis motion is the sum of the dynamic values of the basic motion and
the superimposed motion.
The behavior of the total motion depends on the type of basic motion:
● The basic motion is a single-axis motion:
– The maximum dynamics of the superimposed motion is the difference between the
current dynamic values of the basic motion and the dynamic limits.
– The entire motion is limited to the configured dynamic limits.
● The basic motion is a synchronous motion:
– The maximum dynamics of the superimposed motion is the difference between the
current dynamic values of the basic motion and the dynamic limits.
– The synchronous motion of the following axis is not limited to the dynamic limits of the
following axis.
– An "MC_MoveSuperimposed" job on a leading axis in synchronous operation affects the
leading axis and the following axis.
– An "MC_MoveSuperimposed" job on a following axis in synchronous operation only
affects the following axis.

3120

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
It is always the dynamics of the total motion that is displayed in the technology data block and
in the TIA Portal.

Applies to
● Positioning axis
● Synchronous axis

Requirement
● The technology object has been configured correctly.
● The technology object has been enabled.

Override response
The override response for "MC_MoveSuperimposed" jobs is described in section "Override
response V5: Homing and motion jobs (Página 3281)".

Parameters
The following table shows the parameters of Motion Control instruction
"MC_MoveSuperimposed":
Parameters

Declara‐
tion

Axis

INPUT

Data type

Default
value

Description

TO_PositioningAxis

-

Axis technology object

TO_SynchronousAxis
Execute

INPUT

BOOL

FALSE

TRUE

Start job with a positive edge

Distance

INPUT

LREAL

0.0

Additional distance for the overlapping positioning
process (negative or positive)

VelocityDiff

INPUT

LREAL

-1.0

Maximum velocity deviation compared to the acti‐
ve motion
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The velocity configured in "Technology
object > Configuration > Extended para‐
meters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Velocity)

Acceleration

INPUT

LREAL

-1.0

Acceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The acceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Programación del PLC
Manual de programación y manejo, 11/2019

3121

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default
value

Description

Deceleration

INPUT

LREAL

-1.0

Deceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The deceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk
> 0.0

Constant acceleration velocity profile

= 0.0

Trapezoid velocity profile

< 0.0

The jerk configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.

The specified value is used.

(<TO>.DynamicDefaults.Jerk)
Done

OUTPUT BOOL

FALSE

TRUE

Superimposed positioning complete

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

Starting superimposed positioning motion
To start a superimposed positioning motion with Motion Control instruction
"MC_MoveSuperimposed", follow these steps:
1. Check the requirements indicated above.
2. Specify the additional distance to be moved in the "Distance" parameter.
3. Start the "MC_MoveSuperimposed" job with a positive edge at parameter "Execute".
The current motion state is indicated in parameters "Busy", "Done" and "Error".

Consulte también
Override response V5: Homing and motion jobs (Página 3281)
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

3122

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_MoveSuperimposed: Function chart V5
Function chart: Positioning axes overlapping

72B
([HB

$

$

0&B0RYH5HODWLYH

0&B0RYH6XSHULPSRVHG

$[LV

'RQH

'RQHB

72B

([HFXWH

%XV\

%XV\B

([HB

&RPPDQG$ERUWHG



'LVWDQFH



9HORFLW\



$FFHOHUDWLRQ



'HFHOHUDWLRQ



$ERUWB

'LVWB,QSXW

'RQH

'RQHB

([HFXWH

%XV\

%XV\B

&RPPDQG$ERUWHG

'LVWDQFH

(UURU



9HORFLW\'LII

(UURU,'



$FFHOHUDWLRQ



'HFHOHUDWLRQ



-HUN



$

$[LV

(UURU
(UURU,'

-HUN





([HB



W



%XV\B



W



'RQHB



W

$


([HB



W



%XV\B



W



'RQHB



W




'LVWB,QSXW

W

ದ


Y0&B0RYH5HODWLYH

Y0&B0RYH6XSHULPSRVHG



W

ದ



72B9HORFLW\



W

ದ

72B3RVLWLRQ

$

Programación del PLC
Manual de programación y manejo, 11/2019

%

W

3123

Instrucciones
4.1 Instrucciones

Section
$

Section
%

Using "Exe_1", an "MC_MoveRelative" job with a distance of 50.0 is initiated. At time ①, using "Exe_2", an
"MC_MoveSuperimposed" job with a distance of 50.0 is initiated. The axis is moved with the added dynamic
values of both jobs by the distance 50 + 50 = 100.0. When the axis reaches the target position, this is signaled via
"Done_2".
Using "Exe_1", an "MC_MoveRelative" job with a distance of 50.0 is initiated. At time ②, using "Exe_2", a
MC_MoveSuperimposed job with a distance of -50.0 is initiated. The axis reverses and is moved with the added
dynamic values of both jobs by the distance 50.0 - 50.0 = 0.0. When the axis reaches the target position, this is
signaled via "Done_2".

MC_SetSensor V5
MC_SetSensor: Switch alternative encoder to operative encoder V5
Description
With the Motion Control instruction "MC_SetSensor", you switch over the encoder for closed
loop position control of the axis.
The actual value of the addressed encoder can be adapted without switchover using parameter
"Mode" 2 and 3.

Applies to
● Positioning axis
● Synchronous axis

Requirement
● The technology object and the alternative encoder have been configured correctly.
● No restart command and no "MC-Home" job running.

Override response
● An "MC_SetSensor" job is not aborted by any other Motion Control job.
● A new "MC_SetSensor" job does not abort any active Motion Control jobs.

Parameters
The following table shows the parameters of Motion Control instruction "MC_SetSensor":
Parameters

Declara‐
tion

Axis

INPUT

Data type

Default
value

Description

TO_PositioningAxis

-

Technology object

FALSE

TRUE

TO_SynchronousAxis
Execute

3124

INPUT

BOOL

Start job with a positive edge

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default
value

Description

Sensor

INPUT

INT

1

Number of the new encoder (1 to 4).

Mode

INPUT

DINT

0

The mode determines the position alignment bet‐
ween the old encoder and new encoder.
0

Switch over encoder and transfer actual
position to the new encoder
With this encoder switchover, step chan‐
ges in the positioning control are preven‐
ted. Bumpless switchover of the enco‐
ders is possible.

1

Switch over encoder without aligning the
actual position
Note
When closed loop position control is ac‐
tive, an additional difference of the two
encoders acts as additional control de‐
viation and can trigger a compensating
motion.

2

Transfer actual value
The actual position is transferred to the
encoder specified in the "Sensor" para‐
meter.

3

Transfer actual value
The actual position of the "Reference
encoder" ("ReferenceSensor" parame‐
ter) is transferred to the encoder speci‐
fied in the "Sensor" parameter.

ReferenceSensor

INPUT

Done
Busy

INT

1

Number of the reference encoder (see parameter
"Mode" = 3)

OUTPUT BOOL

FALSE

TRUE

Encoder for closed loop position control
of the axis was switched over.

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job has been aborted.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Changing to absolute encoder
When you switch the encoder to an absolute encoder and transfer the actual value ("Mode" =
2, 3), the actual value is calculated with the value of the absolute encoder and the absolute
value offset. When switching to a different encoder, calculation of the actual value is canceled.
The absolute encoder once again returns the absolute value + absolute value offset
(<TO>.StatusSensor[1..4].AbsEncoderOffset) without calculation by the "MC_SetSensor" job.

Programación del PLC
Manual de programación y manejo, 11/2019

3125

Instrucciones
4.1 Instrucciones

Consulte también
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

MC_Stop V5
MC_Stop: Stop axis and prevent new motion jobs V5
Description
With the "MC_Stop" Motion Control instruction, you stop all movements of an axis and prevent
new motion jobs for the technology object. The axis brakes to a standstill and remains switched
on.
The standstill position is derived from the stop ramp. Three modes, which you define with the
"Mode" parameter, are available for this purpose:
● "Mode" = 0: The dynamic response of the braking operation is determined by the configured
emergency stop ramp.
● "Mode" = 2: The dynamic response of the braking operation is determined by the maximum
dynamic values of the technology object.
● "Mode" = 3: The dynamic response of the braking operation is determined with parameters
"Jerk" and "Decelaration" of the "MC_Stop" job.

Applies to
● Speed axis
● Positioning axis
● Synchronous axis

Requirement
● The technology object has been configured correctly.
● The technology object has been enabled.

Override response
● An "MC_Stop" job is not triggered by other movements.
● An "MC_Stop" job is aborted by an "MC_Power" job with "Enable" = FALSE.
● An "MC_Stop" job does not abort any synchronous operation function in simulation.
● An "MC_Stop" job is aborted by another "MC_Stop" job with a stop response that is the same
or higher.
Significance of stop responses (descending): "Mode" = 0 > "Mode" = 2 > "Mode" = 3

3126

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
You can find more information on the override response of an "MC_Stop" job in the section
"Override response of Motion Control jobs V5 (Página 3281)".

Parameters
The following table shows the parameters of Motion Control instruction "MC_Stop":
Parameter

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_SpeedAxis

-

Technology object

FALSE

TRUE

The motion is stopped and new motion
jobs are prevented.

FALSE

Motion jobs can be executed again.

TO_PositioningAxis
TO_SynchronousAxis
Execute

Mode

INPUT

INPUT

BOOL

DINT

0

Mode for dynamic behavior
0

Emergency stop
The technology object is braked to a
standstill without jerk limit, using the
emergency stop deceleration configured
in "Technology object > Configuration >
Extended parameters > Emergency
stop".
(<TO>.DynamicDefaults.EmergencyDe‐
celeration)

1

Not permitted

2

Stop with maximum dynamic values
The technology object is braked to a
standstill using the maximum decelera‐
tion configured in "Technology object >
Configuration > Extended parameters >
Dynamics limits". The configured maxi‐
mum jerk is hereby taken into account.
(<TO>.DynamicLimits.MaxDecelera‐
tion, <TO>.DynamicLimits.MaxJerk)

3

Stop with specified dynamic response
The technology object is stopped with
the specified values at the parameters
"Deceleration" and "Jerk".

Deceleration

INPUT

LREAL

-1.0

When "Mode" = 3:
Deceleration for the braking ramp
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The deceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Programación del PLC
Manual de programación y manejo, 11/2019

3127

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

Jerk

INPUT

LREAL

-1.0

When "Mode" = 3:
Jerk for the braking ramp
> 0.0

The specified value is used.

= 0.0

No jerk limitation

< 0.0

The jerk configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Jerk)

AbortAcceleration

INPUT

BOOL

FALSE

TRUE

Acceleration is set to 0.0. The configured
deceleration is built up immediately.

FALSE

The acceleration is reduced using the
configured jerk. The configured decele‐
ration then builds up.

Done

OUTPUT BOOL

FALSE

TRUE

Standstill is reached.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted during execution
either by "MC_Power" with "Enable" =
FALSE or another "MC_Stop" job.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Braking an axis with "MC_Stop"
Proceed as follows to decelerate an axis to a standstill:
1. Check the requirements indicated above.
2. Set the necessary values for the parameters "Mode", "Deceleration", "Jerk" and
"AbortAcceleration".
3. Start the "MC_Stop" job with a positive edge at parameter "Execute".
The current motion state is indicated in parameters "Busy", "Done" and "Error". The
standstill of the axis is indicated under "Technology object > Diagnostics > Status and error
bits > Motion status > Standstill" (<TO>.StatusWord.X7 (Standstill)).
As long as "Execute" = TRUE, the technology object cannot execute motion jobs.

Braking an axis with active force/torque limiting
Use the "Emergency stop" mode ("Mode" = 0) to brake an axis with active force/torque
limitation.

3128

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Additional information
Information on the evaluation of the individual bits can be found in the "Evaluating StatusWord,
ErrorWord and WarningWord" section of the "S7-1500/S7-1500T Motion Control overview"
documentation (https://support.industry.siemens.com/cs/ww/en/view/109766459).

Consulte también
Override response V5: Homing and motion jobs (Página 3281)
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

Programación del PLC
Manual de programación y manejo, 11/2019

3129

Instrucciones
4.1 Instrucciones

MC_Stop: Function chart V5
Function chart: Braking an axis and the overriding job characteristics

72B

$

$

0&B0RYH9HORFLW\

0&B6WRS

,Q9HORFLW\

,Q9HOB

72B

([HB

([HFXWH

%XV\

%XV\B

([HB



9HORFLW\

&RPPDQG$ERUWHG

$[LV

$FFHOHUDWLRQ

(UURU

'HFHOHUDWLRQ

(UURU,'

$ERUWB



(UURUB



&XUUHQW



3RVLWLRQ&RQWUROOHG



$

,Q9HOB
$ERUWB
(UURUB

'RQHB

%XV\

%XV\B

&RPPDQG$ERUWHG

0RGH

(UURU
(UURU,'

$ERUW$FFHOHUDWLRQ

'LUHFWLRQ

%XV\B

'RQH

([HFXWH
'HFHOHUDWLRQ
-HUN

-HUN


([HB

$[LV
















W
W
W
W
W

$
([HB
%XV\B
'RQHB








W
W
W


72B9HORFLW\


W

An axis is moved with an "MC_MoveVelocity" job (A1). At time ①, the "MC_MoveVelocity" job
is overridden by an "MC_Stop" job (A2). The job abort is signaled via "Abort_1". Afterwards, the
configured deceleration builds up and the axis is braked to a standstill. While the axis is braking,
"Busy_2" = TRUE. The completion of the "MC_Stop" job is reported via "Done_2".

3130

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
At time ②, with an active "MC_Stop" job (A1), an "MC_MoveVelocity" job (A2) is executed.
Because the axis is disabled by an "MC_Stop" job, the "MC_MoveVelocity" job is rejected. The
error is signaled by "Error_1". "Exe_2" is subsequently reset to FALSE.
At time ③, the axis is moved by an "MC_MoveVelocity" job (A1) with positive edge.

MC_SetAxisSTW V5
MC_SetAxisSTW: Control bits of control word 1 and 2 V5
Description
With the Motion Control instruction "MC_SetAxisSTW", you control selected bits in control word
1 (STW1) and control word 2 (STW2) of the PROFIdrive telegram. This provides the possibility
of directly controlling bits not used by the technology object. The bits to be controlled are
specified via the parameters "STW1" and "STW2". The controlled bits remain effective until an
"MC_SetAxisSTW" job is reset, the technology object is restarted or the CPU transitions from
"RUN" to "STOP".
The following bits can be controlled in STW1:
● 8
● 9
● 11 to 15
Bits 0 to 11 can be controlled in STW2.
For the meaning of the bits to be controlled, refer to the "SINAMICS S120/S150" list manual
(https://support.industry.siemens.com/cs/ww/en/view/109763271).

Applies to
● Speed axis
● Positioning axis
● Synchronous axis

Requirement
● The technology object has been configured correctly.
● The technology object is interconnected with a drive telegram.
● The technology object is not in simulation.
● The technology object has been enabled.
● A permissible bit masking is set.

Programación del PLC
Manual de programación y manejo, 11/2019

3131

Instrucciones
4.1 Instrucciones

Override response
● A new "MC_SetAxisSTW" job does not abort any active Motion Control jobs.
● An "MC_SetAxisSTW" job is only aborted by another "MC_SetAxisSTW" job.

Parameters
The following table shows the parameters of Motion Control instruction "MC_SetAxisSTW":
Parameter

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_SpeedAxis

-

Technology object

TO_PositioningAxis
TO_SynchronousAxis
Execute

INPUT

BOOL

FALSE

TRUE

Start job with a positive edge

STW1

INPUT

WORD

16#0000

Set bits for STW1

STW1BitMask

INPUT

WORD

16#0000

Bit masking for STW1

STW2

INPUT

WORD

16#0000

Set bits for STW2

STW2BitMask

INPUT

WORD

16#0000

Bit masking for STW2

Done

OUTPUT BOOL

FALSE

TRUE

The job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
Override response V5: Homing and motion jobs (Página 3281)
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

MC_WriteParameter V5
MC_WriteParameter: Write parameter V5
Description
With the Motion Control instruction "MC_WriteParameter", you can change selected
parameters of the technology objects in runtime. The changes take effect directly or after a
restart, depending on the corresponding parameter.

3132

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
With a "RUN → STOP → RUN" transition of the CPU, the parameter value is retained. The
changed parameter value is reset to the start value in the event of a POWER OFF, memory
reset or a restart of the technology object.

Applies to
● Positioning axis
● Synchronous axis

Requirement
● The technology object has been configured correctly.

Parameters
The following table shows the parameters of Motion Control instruction "MC_WriteParameter":
Parameter

Declara‐
tion

Axis

INPUT

Data type

Default
value

Description

TO_PositioningAxis

-

Technology object

BOOL

FALSE

TRUE

0

TO_SynchronousAxis
Execute

INPUT

Start job with a positive edge

ParameterNumber

INPUT

DINT

Value

INPUT

Variant (BOOL, INT,
DINT, UDINT, LREAL)

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred during processing.
The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Programación del PLC
Manual de programación y manejo, 11/2019

Index of the parameter to be changed
Variant pointer to the value to be written (source
address)

3133

Instrucciones
4.1 Instrucciones

Modifiable parameters
The following table shows the parameters that can be changed with the Motion Control
instruction "MC_WriteParameter":
Tag

Index

Technology ob‐
ject

Data
type

Description

Effective‐
ness

PostionLimits_HW.Ac‐
tive

1000

Positioning axis

BOOL

Enabling/disabling hardware limit switch

Direct

Synchronous
axis

The negative and the positive hardware
limit switches are activated or deactivated
with this parameter,
FALSE

HW limit switch deactivated

TRUE

HW limit switch activated

Consulte también
Override response V5: Homing and motion jobs (Página 3281)
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

Measuring input, output cam, cam track
MC_MeasuringInput V5
MC_MeasuringInput: Start measuring once V5
Description
With the Motion Control instruction "MC_MeasuringInput", a one-time measuring is started.
With the one-time measuring, one or two edges can be detected with one measuring job. The
position of the respective technology object axis or external encoder is assigned to the
measuring event. The measurement result is indicated in the function block and in the
technology data block and can be further processed in the user program. This completes the
measuring job.
Another measuring job must be started again using "MC_MeasuringInput.Execute" = TRUE.

Applies to
● Measuring input

3134

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Requirement
● The technology object has been configured correctly.
● The encoder of the axis must have "valid" status (StatusSensor[1..4].State = valid).
Otherwise, the measuring job is rejected in the function block with an error indication.
● Measurement using PROFIdrive is not possible during active or passive homing.

Override response
The override response for "MC_MeasuringInput" jobs is described in section "Override
response V5: Measuring input jobs (Página 3283)".

Parameters
The following table shows the parameters of Motion Control instruction "MC_MeasuringInput":
Parameters

Declara‐
tion

Data type

Default
value

Description

MeasuringInput

INPUT

TO_MeasuringInput

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Mode

INPUT

DINT

0

Start job with a positive edge

Type of measurement
0

Measurement of next positive edge

1

Measurement of next negative edge

2

Measurement of next two edges

3

Measurement of two edges, beginning
with the positive edge
● Rising edge = "MeasuredValue1"
(measured value 1)
● Falling edge = "MeasuredValue2"
(measured value 2)

4

Measurement of two edges, beginning
with the negative edge
● Falling edge = "MeasuredValue1"
● Rising edge = "MeasuredValue2"

MeasuringRange

INPUT

BOOL

FALSE

Acquisition of measured values
Observe the time-related boundary conditions.

StartPosition

INPUT

LREAL

0.0

FALSE

Always acquire measured values

TRUE

Acquire measured values only within the
measuring range

Start position of the measuring range
For an axis or external encoder with active modulo
function, position data outside the modulo range is
mirrored in the modulo range.

EndPosition

INPUT

LREAL

0.0

End position of the measuring range
For an axis or external encoder with active modulo
function, position data outside the modulo range is
mirrored in the modulo range.

Programación del PLC
Manual de programación y manejo, 11/2019

3135

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Done

OUTPUT BOOL

Default
value

Description

FALSE

TRUE

The block has been completely proces‐
sed.
Measured values are valid.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The measuring job has been aborted.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The cause of the error can be found
in the "ErrorID" parameter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

MeasuredValue1

OUTPUT LREAL

0.0

First measured value

MeasuredValue2

OUTPUT LREAL

0.0

Second measured value (for measurement of two
edges)

Consulte también
Override response V5: Measuring input jobs (Página 3283)
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

3136

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_MeasuringInput: Function chart V5
Function chart: Start measuring job once
$
0&B0HDVXULQJLQSXW
72B
([HB

0HDVXULQJLQSXW

'RQH

([HFXWH

%XV\



0RGH

&RPPDQG$ERUWHG



0HDVXULQJ5DQJH

(UURU

6WDUW3RVLWLRQ
(QG3RVLWLRQ

(UURU,'
0HDVXUHG9DOXH
0HDVXUHG9DOXH



$
([HB
%XV\
'RQH
0HDVXUH
9DOXH
0HDVXULQJ
,QSXW

72B[3RVLWLRQ












W
W
W
W
W




W

A "MC_MeasuringInput" job with "Mode" = 0 initiated using "Execute" performs a measurement
of the next positive edge. A successfully completed measurement is signaled with "Done" =
TRUE. The determined measured value ① (in example: 50) is output using "MeasuredValue1".

MC_MeasuringInputCyclic V5
MC_MeasuringInputCyclic: Start cyclic measuring V5
Description
With the Motion Control instruction "MC_MeasuringInputCyclic", a cyclic measuring is started.
With cyclic measuring, up to two measuring events are detected by the system and the
associated measuring positions displayed. The measurements are continued cyclically until
they are ended per command.

Programación del PLC
Manual de programación y manejo, 11/2019

3137

Instrucciones
4.1 Instrucciones

Applies to
● Measuring input

Requirement
● The technology object has been configured correctly.
● Cyclic measuring is only possible when measuring using Timer DI.
● The encoder of the axis operationally in effect must have "valid" status "valid"
("StatusSensor[1..4].State" = valid). Otherwise, the measuring job is rejected in the function
block with an error indication.

Override response
The override response for "MC_MeasuringInputCyclic" jobs is described in section "Override
response V5: Measuring input jobs (Página 3283)".

Parameters
The following table shows the parameters of Motion Control instruction
"MC_MeasuringInputCyclic":
Parameters

Declara‐
tion

Data type

Default
value

Description

MeasuringInput

INPUT

TO_MeasuringInput

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Mode

INPUT

DINT

0

Type of measurement

MeasuringRange

INPUT

BOOL

FALSE

Start job with a positive edge

0

Measurement of positive edges

1

Measurement of negative edges

2

Measurement of both edges

Acquisition of measured values
Observe the time-related boundary conditions.

StartPosition

INPUT

LREAL

0.0

FALSE

Always acquire measured values

TRUE

Acquire measured values only within the
measuring range

Start position of the measuring range
For an axis or external encoder with active modulo
function, position data outside the modulo range is
mirrored in the modulo range.

EndPosition

INPUT

LREAL

0.0

End position of the measuring range
For an axis or external encoder with active modulo
function, position data outside the modulo range is
mirrored in the modulo range.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The measuring job has been aborted.

3138

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Error

Data type

Default
value

Description

OUTPUT BOOL

FALSE

TRUE

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

MeasuredValue1

OUTPUT LREAL

First measured value

MeasuredValue2

OUTPUT LREAL

Second measured value (when measuring multi‐
ple edges in one position control cycle)

MeasuredVa‐
lue1Counter

OUTPUT UDINT

0

Count value for the first measured value

MeasuredVa‐
lue2Counter

OUTPUT UDINT

0

Count value for the second measured value

LostEdgeCounter1

OUTPUT UDINT

0

Count value for the lost edges in the cycle clock of
the first measured value acquisition

LostEdgeCounter2

OUTPUT UDINT

0

Count value for the lost edges in the cycle clock of
the second measured value acquisition

An error occurred while processing the
job. The cause of the error can be found
in the "ErrorID" parameter.

Consulte también
Override response V5: Measuring input jobs (Página 3283)
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

MC_MeasuringInputCyclic: Function chart V5
Function chart: Start cyclic measuring job
$
0&B0HDVXULQJ,QSXW&\FOLF
72B
([HB



0HDVXULQJ,QSXW
([HFXWH

%XV\

&RPPDQG$ERUWHG

0RGH

(UURU

0HDVXULQJ5DQJH

(UURU,'

6WDUW3RVLWLRQ

0HDVXUHG9DOXH

(QG3RVLWLRQ

0HDVXUHG9DOXH

0HDVXUHG9DOXH&RXQWHU
0HDVXUHG9DOXH&RXQWHU
/RVW(JGH&RXQWHU
/RVW(GJH&RXQWHU

Programación del PLC
Manual de programación y manejo, 11/2019

3139

Instrucciones
4.1 Instrucciones
$
&DOORI
0&B0HDVXULQJ
,QSXW&\FOLF




W


0HDVXUHG
9DOXH





0HDVXUHG
9DOXH

W




W


0HDVXUHG
9DOXH&RXQWHU





0HDVXUHG
9DOXH&RXQWHU



/RVW(GJH
&RXQWHU



/RVW(GJH
&RXQWHU



W



W



W



W


$SSOLFDWLRQ
F\FOH
0HDVXULQJ
LQSXW





Q













W


72B[3RVLWLRQ






W

A "MC_MeasuringInputCyclic" command initiated using "Execute" (signal and start point not
shown) (e.g. call in MC-PreServo [OB67]) with "Mode" = 0 and without specified measuring
range "MeasuringRange = FALSE" performs a measurement of the positive edges.
The actual position determined at the time of the first positive edge ① in the position control
cycle is output using "MeasuredValue1", and count tag "MeasuredValue1Counter" is
incremented by "1".
The actual position determined at the time of the second positive edge ② in the position control
cycle is output using "MeasuredValue2", and count tag "MeasuredValue2Counter" is
incremented by "1".
If additional positive edges occur in the same position control cycle ③, these are recorded in
LostEdgeCounter1 and LostEdgeCounter2.

3140

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_AbortMeasuringInput V5
MC_AbortMeasuringInput: Cancel active measuring job V5
Description
With the Motion Control instruction "MC_AbortMeasuringInput", an active one-time or cyclic
measuring job is aborted.

Applies to
● Measuring input

Requirement
● The technology object has been configured correctly.

Override response
The override response for "MC_AbortMeasuringInput" jobs is described in section "Override
response V5: Measuring input jobs (Página 3283)".

Parameters
The following table shows the parameters of Motion Control instruction
"MC_AbortMeasuringInput":
Parameters

Declara‐
tion

Data type

Default
value

Description

MeasuringInput

INPUT

TO_MeasuringInput

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Done

OUTPUT BOOL

0

The function block has been processed. The mea‐
suring job has been deactivated.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job has been aborted.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The cause of the error can be found
in the "ErrorID" parameter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Start job with a positive edge

Consulte también
Override response V5: Measuring input jobs (Página 3283)
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

Programación del PLC
Manual de programación y manejo, 11/2019

3141

Instrucciones
4.1 Instrucciones

MC_OutputCam V5
MC_OutputCam: Activate/deactivate output cam V5
Description
You use Motion Control instruction "MC_OutputCam" to activate the specified output cam.
Depending on the output cam type, the following input parameters are in effect:
● Distance output cam
– "OnPosition"
– "OffPosition"
● Time-based output cam
– "OnPosition"
– "Duration"
You define the operating mode and the effective direction of the output cam with parameters
"Mode" and "Direction".
When "MC_OutputCam.Enable" = TRUE, the input parameters are always read and take effect
at the next position control cycle.
When a technological alarm occurs, the output cam is processed again after error
acknowledgment.
Nota
Enabling output cams
To guarantee precise switching, an output cam must be enabled for at least two application
cycles before the output cam start is reached. Otherwise, distance output cams are imprecise
and time-based output cams do not switch on.
Observe the switching behavior of the distance output cams and time-based output cams.

Applies to
● Output cam

Requirement
● The technology object has been configured correctly.
● The higher-level technology object must have a valid position.
● Setpoint output cams are not output for an axis in non-position-controlled operation.
● A setpoint output cam with the setting "MC_OutputCam.OnPosition" = 0 switches at position
setpoint = 0.

3142

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Override response
The "MC_OutputCam" is canceled by:
● Disabling of the output cam with "MC_OutputCam.Enable" = FALSE
● Only one instance of the "MC_OutputCam" function block can be active on an output cam
in the user program. A second instance of the "MC_OutputCam" function block on a
currently active output cam is rejected with an error.

Parameters
The following table shows the parameters of Motion Control instruction "MC_OutputCam":
Parameters

Declara‐
tion

Data type

Default
value

Description

OutputCam

INPUT

TO_OutputCam

-

Technology object

Enable

INPUT

BOOL

FALSE

OnPosition

INPUT

LREAL

0.0

FALSE

Output cam is disabled.

TRUE

Output cam is being processed.

Start position of the output cam [unit of measure‐
ment of the interconnected technology object]
For an axis or external encoder with active modulo
function, position data outside the modulo range is
mirrored in the modulo range.

OffPosition

INPUT

LREAL

0.0

End position of the distance output cam [unit of
measurement of the interconnected technology
object]
For an axis or external encoder with active modulo
function, position data outside the modulo range is
mirrored in the modulo range.

Duration

INPUT

LREAL

0.0

Switch-on duration of the time-based output cam
[unit of measurement: ms]
The value for the switch-on duration of a time-ba‐
sed output cam must be greater than 0.0.

Mode

INPUT

DINT

1

Operating mode
1

Standard
Output cam functionality (output not in‐
verted)

2

Output cam functionality with inverted
output

3

Output cam always ON
(while "Enable" = TRUE)

Direction

INPUT

DINT

1

Activation direction of the output cam
1

Positive direction

2

Negative direction

3

Both directions

CamOutput

OUTPUT BOOL

-

Status display based on last call of Motion Control
instruction "MC_OutputCam"

Busy

OUTPUT BOOL

FALSE

TRUE

Programación del PLC
Manual de programación y manejo, 11/2019

The processing of the output cam is ac‐
tive.

3143

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Error

ErrorID

Data type

Default
value

Description

OUTPUT BOOL

FALSE

TRUE

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

An error occurred while processing the
job. The cause of the error can be found
in the "ErrorID" parameter.

Consulte también
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

3144

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_OutputCam: Function chart V5
Function chart: Activate the specified output cam type
$

$

0&B2XWSXW&DP

0&B2XWSXW&DP

72B

2XWSXW&DP

(QB

(QDEOH

72B

2XWSXW&DP

%XV\

(QB

(QDEOH



&DP2XWSXW



2Q3RVLWLRQ

(UURU



2II3RVLWLRQ

(UURU,G

&DP2XW



'XUDWLRQ

2Q3RVLWLRQ

(UURU
(UURU,G

'XUDWLRQ

0RGH



0RGH



'LUHFWLRQ



'LUHFWLRQ





&DP2XW

%XV\

2II3RVLWLRQ



$

&DP2XWSXW











(QB




%XV\




&DP2XW



W

$


(QB




%XV\




&DP2XW

72B[3RVLWLRQ



W

2II3RVLWLRQ
2Q3RVLWLRQ
W

A1

Distance output cam

A2

Time-based output cam

An output cam is activated with "Enable" = TRUE. The output cam is output corresponding to
the parameters.
The processing of the output cam is indicated with "Busy" = TRUE.

Programación del PLC
Manual de programación y manejo, 11/2019

3145

Instrucciones
4.1 Instrucciones
When activation direction "Direction" = 1 (positive) is set, the output cam behaves as follows,
regardless of the output cam type setting:
● The distance output cam switches on at "OnPosition" ① and switches off again at
"OffPosition" ②. At a direction reversal the output cam is switched off ④.
● The time-based output cam switches on at "OnPosition" ① and switches off again after
expiration of the specified time "Duration" ③. A switched on time-based output cam
remains active for the specified switch-on duration "Duration", even if overtravel of the start
position occurs again in the reverse direction.
The switching state of the output cam is output using "CamOutput".
With "Enable" = FALSE, the specified output cam type is deactivated. "Busy" = FALSE shows
that the output cam is not being processed.

MC_CamTrack V5
MC_CamTrack: Activate/deactivate cam track V5
Description
With the Motion Control instruction "MC_CamTrack", the processing of a cam track is enabled.

Applies to
● Cam track

Requirement
● The technology object has been configured correctly.
● The higher-level technology object must have a valid position.
● Setpoint output cams are not output for an axis in non-position-controlled operation.

Override response
● The "MC_CamTrack" is aborted by the disabling of the cam track with
"MC_CamTrack.Enable" = FALSE.
● Only one instance of the "MC_CamTrack" function block can be active on a cam track in the
user program. A second instance of the "MC_CamTrack" function block on a currently active
cam track is rejected with an error.
● The cam track is recalculated at a change of the parameters of the Motion Control
instruction "MC_CamTrack" or in the technology data block. The cam track is processed in
accordance with all parameter settings.

3146

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction "MC_CamTrack":
Parameters

Declara‐
tion

Data type

Default
value

Description

CamTrack

INPUT

TO_CamTrack

-

Technology object

Enable

INPUT

BOOL

FALSE

TRUE

The cam track is processed.

FALSE

The cam track is disabled.

Mode

INPUT

INT

1

0

When "Enable" = TRUE:
The cam track processing is activated
immediately. Cam track data takes ef‐
fect immediately
Previously activated distance output
cams are aborted if their track signal is
not still set due to the changed cam track
data.
Previously activated time-based output
cams are always aborted.
When "Enable" = FALSE:
The cam track processing is ended im‐
mediately. Distance output cams/timebased output cams are aborted imme‐
diately.

1

When "Enable" = TRUE:
The cam track processing is activated
immediately/with the next track cycle:
● When a cam track is activated for the
first time, the cam track processing
begins immediately.
● If the cam track processing is already
active, the current cam track is
output up to the end of the track
cycle. The new cam track data then
takes effect.
When "Enable" = FALSE:
The cam track processing is ended at
the end of the cam track

2

When "Enable" = TRUE:
The cam track output is switched on im‐
mediately and remains switched on
When "Enable" = FALSE:
The cam track output is switched off im‐
mediately.

InvertOutput

INPUT

BOOL

FALSE

Inverted output
TRUE

The track output is output inverted.

FALSE

The track output is output non-inverted.

TrackOutput

OUTPUT BOOL

-

Indicates the switching state of the cam track.

Busy

OUTPUT BOOL

FALSE

TRUE

Programación del PLC
Manual de programación y manejo, 11/2019

The processing of the cam track is active.

3147

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Error

ErrorID

Data type

Default
value

Description

OUTPUT BOOL

FALSE

TRUE

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

An error occurred while processing the
job. The cause of the error can be found
in the "ErrorID" parameter.

Consulte también
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

MC_CamTrack: Function chart V5
Function chart: Activate cam track
$
0&B&DP7UDFN
&DP7UDFN

(QB

(QDEOH

%XV\



0RGH

(UURU



,QYHUW2XWSXW

(QB
7UDFN2XWSXW

3148

(UURU,'





$

①
②
③

7UDFN2XWSXW

72B



























      

$[LVSRVLWLRQ>r@

Axis reference position
Output cam configured as invalid
Start of cyclically continued cam track

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
A cam track is activated with "Enable" = TRUE. The cam track is output in accordance with the
parameters set in the technology data block.
Tag

Value

Description

<TO>Parameter.
CamTrackType

0

Specified output cam type for the cam track is distance output cam

ReferencePosition

20.0

Specified axis reference position for the cam track

CamTrackLength

100.0

Specified length of the cam track

CamTrack[1].Existent

TRUE

The first distance output cam of the cam track is specified as valid

CamTrack[1].OnPosition

10.0

Start position for the first output cam of the cam track

CamTrack[1].OffPosition

20.0

End position for the first output cam of the cam track

CamTrack[2].Existent

FALSE

The second distance output cam of the cam track is specified as invalid

CamTrack[2].OnPosition

30.0

Start position for the second output cam of the cam track

CamTrack[2].OffPosition

50.0

End position for the second output cam of the cam track

CamTrack[3].Existent

TRUE

The third distance output cam of the cam track is specified as valid

CamTrack[3].OnPosition

60.0

Start position for the third output cam of the cam track

CamTrack[3].OffPosition

90.0

End position for the third output cam of the cam track

Synchronous motion
MC_GearIn V5
MC_GearIn: Start gearing V5
Description
With the Motion Control instruction "MC_GearIn", you start a gearing operation between a
leading axis and a following axis.
You define the dynamic behavior of the following axis for synchronization with parameters
"Jerk", "Acceleration" and "Deceleration".
The synchronization duration and distance are dependent on the following parameters:
● Start time of the "MC_GearIn" job
● Dynamics of the following axis at the start time
● Dynamic settings for synchronization
● Dynamics of the leading axis
You specify the gear ratio as the relationship between two integers (numerator/denominator)
with the parameters "RatioNumerator" and "RatioDenominator".

Programación del PLC
Manual de programación y manejo, 11/2019

3149

Instrucciones
4.1 Instrucciones
The numerator of the gear ratio is specified as positive or negative. This yields the following
behavior:
● Positive gear ratio:
The leading and following axes move in the same direction.
● Negative gear ratio:
The following axis moves in the opposite direction of the leading axis.
You can start synchronous operation when the leading axis is at a standstill or when it is in
motion.

Applies to
● Synchronous axis

Requirement
● The technology objects of the leading axis and the following axis have been configured
correctly.
● The leading axis is a positioning axis, a synchronous axis, an external encoder or a leading
axis proxy.
● The following axis is a synchronous axis.
● The leading axis is specified as possible leading axis in the configuration of the following
axis in "Technology object > Configuration > Leading value interconnections".
● The following axis is enabled.

Override response
The override response for "MC_GearIn" jobs is described in section "Override response V5:
Synchronous operation jobs (Página 3282)".
Disabling the following axis with "MC_Power.Enable" = FALSE aborts the synchronous
operation in every status.
Disabling the leading axis with "MC_Power", in contrast, does not abort synchronous operation.
The following axis follows the leading axis even during the braking ramp and after the leading
axis is enabled again.

3150

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction "MC_GearIn":
Parameters

Declara‐
tion

Data type

Default
value

Description

Master

INPUT

TO_PositioningAxis

-

Leading axis technology object

TO_SynchronousAxis
TO_ExternalEncoder
TO_LeadingAxis‐
Proxy
Slave

INPUT

TO_SynchronousAxis

-

Following axis technology object

Execute

INPUT

BOOL

FALSE

TRUE

RatioNumerator

INPUT

DINT

1

Gear ratio numerator

Start job with a positive edge

Permitted integer values:
-2147483648 to 2147483647
(value 0 not permitted)
RatioDenominator

INPUT

DINT

1

Gear ratio denominator
Permitted integer values:
1 to 2147483647

Acceleration

INPUT

LREAL

-1.0

Acceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The acceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The deceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk
> 0.0

Constant acceleration velocity profile
The specified value is used.

= 0.0

Trapezoid velocity profile

< 0.0

The jerk configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.

TRUE

Synchronous operation reached

(<TO>.DynamicDefaults.Jerk)
InGear

OUTPUT BOOL

FALSE

The following axis is synchronized and
moves synchronously to the leading
axis.
Busy

OUTPUT BOOL

Programación del PLC
Manual de programación y manejo, 11/2019

FALSE

TRUE

The job is being processed.

3151

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

CommandAborted

Data type

Default
value

Description

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

Starting synchronous operation
To start synchronous operation with the Motion Control instruction "MC_GearIn", follow these
steps:
1. Check the requirements indicated above.
2. Specify the leading axis, the following axis and the gear ratio at the corresponding
parameters.
3. Start the "MC_GearIn" job with a positive edge at parameter "Execute".
The following axis is synchronized to the leading value of the leading axis. If the "InGear"
parameter shows the value "TRUE", the following axis is synchronized and moves
synchronously to the leading axis. The parameters "InGear" and "Busy" show the value
"TRUE" until the "MC_GearIn" job is overridden by another Motion Control job.

Consulte también
Override response V5: Synchronous operation jobs (Página 3282)
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

3152

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_GearIn: Function chart V5
Function chart: Synchronizing and switching the leading value
$

$

0&B*HDU,Q
72B0DVWHUB
72B6ODYH
([HB

0DVWHU

,Q*HDU

6ODYH
([HFXWH

0&B*HDU,Q
%XV\

&RPPDQG$ERUWHG



5DWLR1XPHUDWRU



5DWLR'HQRPLQDWRU

,Q*HDUB
%XV\B

72B0DVWHUB
72B6ODYH

$ERUWB

([HB

0DVWHU
([HFXWH



5DWLR1XPHUDWRU



5DWLR'HQRPLQDWRU

$FFHOHUDWLRQ



$FFHOHUDWLRQ

'HFHOHUDWLRQ



'HFHOHUDWLRQ

([HB
%XV\B
,Q*HDUB
$ERUWB

ದ

-HUN





,Q*HDUB
%XV\B

&RPPDQG$ERUWHG

(UURU



$

%XV\

(UURU,'


ದ

,Q*HDU

6ODYH

(UURU
(UURU,'

-HUN












$
([HB
%XV\B
,Q*HDUB

W
W
W
W








W
W
W

72B0DVWHUB
9HORFLW\
72B6ODYH
9HORFLW\
72B0DVWHUB
9HORFLW\
W

Using "Exe_1", an "MC_GearIn" job (A1) is initiated. The following axis (TO_Slave) is
synchronized to the leading axis (TO_Master_1). "InGear_1" signals at time ① that the
following axis is synchronized and moves synchronously to the leading axis.
At time ②, synchronous operation is overridden by another "MC_GearIn" job (A2). The abort
is signaled via "Abort_1". The following axis is synchronized to the new leading axis
(TO_Master_2). "InGear_2" signals at time ③ that the following axis is synchronized and
moves synchronously to the leading axis.

Programación del PLC
Manual de programación y manejo, 11/2019

3153

Instrucciones
4.1 Instrucciones

MC_GearInPos V5
MC_GearInPos: Start gearing with specified synchronous positions V5
Description
With the Motion Control instruction "MC_GearInPos", you start a gearing operation between a
leading axis and a following axis. The synchronous operation is synchronized depending on the
specified synchronous position for the leading and following axis.
The following types of synchronization are possible:
● Synchronization in advance using dynamic parameters ("SyncProfileReference" = 0)
● Synchronization in advance using leading value distance ("SyncProfileReference" = 1)
● Subsequent synchronization using leading value distance ("SyncProfileReference" = 3)
You specify the gear ratio as the relationship between two integers (numerator/denominator)
with the parameters "RatioNumerator" and "RatioDenominator".
The numerator of the gear ratio is specified as positive or negative. This yields the following
behavior:
● Positive gear ratio:
The leading and following axes move in the same direction.
● Negative gear ratio:
The following axis moves in the opposite direction of the leading axis.
You can start synchronous operation when the leading axis is at a standstill or when it is in
motion.

Applies to
● Synchronous axis

Requirement
● The technology objects of the leading axis and the following axis have been configured
correctly.
● The leading axis is a positioning axis, synchronous axis, external encoder or leading axis
proxy.
● The following axis is a synchronous axis.
● The leading axis is specified as possible leading axis in the configuration of the following
axis under "Technology object > Configuration > Leading value interconnections".
● The following axis is enabled.
● With synchronization in advance using leading value distance, the leading axis must be at
least the specified distance ("MasterStartDistance") from the synchronization position
("MasterSyncPosition") when starting the job.

3154

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Override response
The override response for "MC_GearInPos" jobs is described in section "Override response
V5: Synchronous operation jobs (Página 3282)".
Disabling the following axis with "MC_Power.Enable" = FALSE aborts the synchronous
operation in every status.
Disabling the leading axis with "MC_Power", in contrast, does not abort synchronous operation.
The following axis follows the leading axis even during the braking ramp and after the leading
axis is enabled again.

Parameters
The following table shows the parameters of Motion Control instruction "MC_GearInPos":
Parameters

Declara‐
tion

Master

INPUT

Data type

Default
value

Description

TO_PositioningAxis

-

Leading axis technology object

TO_SynchronousAxis
TO_ExternalEncoder
TO_LeadingAxis‐
Proxy
Slave

INPUT

TO_SynchronousAxis

-

Following axis technology object

Execute

INPUT

BOOL

FALSE

TRUE

RatioNumerator

INPUT

DINT

1

Start job with a positive edge

Gear ratio numerator
Permitted integer values:
-2147483648 to 2147483647
(value 0 not permitted)

RatioDenominator

INPUT

DINT

1

Gear ratio denominator
Permitted integer values:
1 to 2147483647

MasterSyncPosition

INPUT

LREAL

0.0

Synchronous position of leading axis
When "SyncProfileReference" = 0, 1:
Position of the leading axis from which the axes are
synchronous and the synchronization is comple‐
ted.
When "SyncProfileReference" = 3:
Position of the leading axis from which synchroni‐
zation starts

SlaveSyncPosition

INPUT

LREAL

0.0

Synchronous position of following axis
When "SyncProfileReference" = 0, 1:
Position of the following axis from which the axes
are synchronous and the synchronization is com‐
pleted.
When "SyncProfileReference" = 3:
Position of the following axis, which is assigned to
the synchronous position of the leading axis.

Programación del PLC
Manual de programación y manejo, 11/2019

3155

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default
value

Description

SyncProfileReference

INPUT

DINT

1

Type of synchronization

MasterStartDistance

INPUT

LREAL

1.0

0

Synchronization in advance using dyna‐
mic parameters

1

Synchronization in advance using lea‐
ding value distance

2

Reserved

3

Subsequent synchronization using lea‐
ding value distance

4

Reserved

When "SyncProfileReference" = 1, 3:
Leading value distance
When "SyncProfileReference" = 0:
Not relevant

Velocity

INPUT

LREAL

-1.0

When "SyncProfileReference" = 0:
Velocity
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The velocity configured in "Technology
object > Configuration > Extended para‐
meters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Velocity)

When "SyncProfileReference" = 1, 3:
Not relevant
Acceleration

INPUT

LREAL

-1.0

When "SyncProfileReference" = 0:
Acceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The acceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

When "SyncProfileReference" = 1, 3:
Not relevant
Deceleration

INPUT

LREAL

-1.0

When "SyncProfileReference" = 0:
Deceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The deceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

When "SyncProfileReference" = 1, 3:
Not relevant

3156

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default
value

Description

Jerk

INPUT

LREAL

-1.0

When "SyncProfileReference" = 0:
Jerk
> 0.0

Constant acceleration velocity profile

= 0.0

Trapezoid velocity profile

< 0.0

The jerk configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.

The specified value is used.

(<TO>.DynamicDefaults.Jerk)
When "SyncProfileReference" = 1, 3:
Not relevant
SyncDirection

INPUT

DINT

3

Direction of synchronization
(in effect for axes with activated Modulo setting)
1

Positive direction
The following axis may only travel in po‐
sitive direction during synchronization.

2

Negative direction
The following axis may only travel in ne‐
gative direction during synchronization.

3

Shortest distance
Changes in direction are permitted for
the following axis during synchroniza‐
tion.

StartSync

OUTPUT BOOL

FALSE

TRUE

The following axis is synchronized to the
leading axis.

InSync

OUTPUT BOOL

FALSE

TRUE

Synchronous operation reached
The following axis is synchronized and
moves synchronously to the leading
axis.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

Programación del PLC
Manual de programación y manejo, 11/2019

3157

Instrucciones
4.1 Instrucciones

Starting synchronous operation
To start synchronous operation with the Motion Control instruction "MC_GearInPos", follow
these steps:
1. Check the requirements indicated above.
2. Specify the leading axis, the following axis, the gear ratio and the synchronous position with
the corresponding parameters.
3. Start the "MC_GearInPos" job with a positive edge at parameter "Execute".
The following axis is synchronized to the leading value of the leading axis. If the "InSync"
parameter shows the value "TRUE", the following axis is synchronized and moves
synchronously to the leading axis. The parameters "InSync" and "Busy" show the value
"TRUE" until the "MC_GearInPos" job is overridden by another Motion Control job.

Consulte también
Override response V5: Synchronous operation jobs (Página 3282)
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

3158

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_GearInPos: Function chart V5
Function chart: Synchronization in advance using dynamic parameters/leading value distance
$
0&B*HDU,Q3RV
0DVWHU

72B0DVWHU
72B6ODYH

6WDUW6\QF

6ODYH

,Q6\QF

([HFXWH

([H

%XV\



5DWLR1XPHUDWRU &RPPDQG$ERUWHG



5DWLR'HQRPLQDWRU



0DVWHU6\QF3RVLWLRQ



6ODYH6\QF3RVLWLRQ

635

6\QF3URILOH5HIHUHQFH



0DVWHU6WDUW'LVWDQFH

ದ

9HORFLW\

ದ

$FFHOHUDWLRQ

ದ

'HFHOHUDWLRQ

ದ

-HUN

6WDUW6\QF
,Q6\QF
%XV\

(UURU
(UURU,'

6\QF'LUHFWLRQ



$
([H
%XV\
635
6WDUW6\QF
,Q6\QF




W




W




W




W




W



72B0DVWHU

3RVLWLRQ



W

72B6ODYH

3RVLWLRQ


W

72B0DVWHU
9HORFLW\


W

72B6ODYH
9HORFLW\

$

Programación del PLC
Manual de programación y manejo, 11/2019

%

W

3159

Instrucciones
4.1 Instrucciones

Section
$

Section
%

3160

Using "Exe", an "MC_GearInPos" job (A1) is initiated. The start of the synchronization is displayed with
"StartSync". The following axis (TO_Slave) is synchronized in advance to the leading axis (TO_Master) by means
of the specified dynamic parameters. The distance required for synchronization is calculated by the system. When
the specified reference positions "MasterSyncPosition" and "SlaveSyncPosition" are reached, "InSync" signals
that the following axis is synchronized and moving synchronously to the leading axis.
Using "Exe", an "MC_GearInPos" job (A1) is initiated. The start of the synchronization is displayed with
"StartSync". The following axis (TO_Slave) is synchronized to the leading axis (TO_Master) by means of the
specified leading value distance ("MasterStartDistance"). The dynamic response required for synchronization is
calculated by the system. When the specified reference positions "MasterSyncPosition" and "SlaveSyncPosition"
are reached, "InSync" signals that the following axis is synchronized and moving synchronously to the leading
axis.

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Function chart: Synchronization in advance/subsequent synchronization via leading value distance
$
0&B*HDU,Q3RV
72B0DVWHU

0DVWHU

72B6ODYH

%XV\

%XV\



5DWLR1XPHUDWRU &RPPDQG$ERUWHG



5DWLR'HQRPLQDWRU



0DVWHU6\QF3RVLWLRQ



6ODYH6\QF3RVLWLRQ

635

6\QF3URILOH5HIHUHQFH



0DVWHU6WDUW'LVWDQFH

ದ

9HORFLW\

ದ

$FFHOHUDWLRQ

ದ

'HFHOHUDWLRQ

ದ

-HUN



([H

,Q6\QF

([HFXWH

([H

$

6WDUW6\QF

6ODYH

6WDUW6\QF
,Q6\QF
%XV\

(UURU
(UURU,'

6\QF'LUHFWLRQ




W




W


635




6WDUW6\QF
,Q6\QF

W




W




W



72B0DVWHU

3RVLWLRQ




72B6ODYH

3RVLWLRQ



W

W

72B0DVWHU
9HORFLW\


W

72B6ODYH
9HORFLW\

$

Programación del PLC
Manual de programación y manejo, 11/2019

%

W

3161

Instrucciones
4.1 Instrucciones

Section
$

Section
%

Using "Exe", an "MC_GearInPos" job (A1) is initiated. The start of the synchronization is displayed with
"StartSync". The following axis (TO_Slave) is synchronized to the leading axis (TO_Master) by means of the
specified leading value distance ("MasterStartDistance"). The dynamic response required for synchronization is
calculated by the system. When the specified reference positions "MasterSyncPosition" and "SlaveSyncPosition"
are reached, "InSync" signals that the following axis is synchronized and moving synchronously to the leading
axis.
Using "Exe", an "MC_GearInPos" job (A1) is initiated. When the specified reference position "MasterSyncPosi‐
tion" is reached, the start of synchronization is indicated via "StartSync". The following axis (TO_Slave) is
synchronized subsequently to the leading axis (TO_Master) by means of the specified leading value distance
"MasterStartDistance". The dynamics required for synchronization is calculated by the system. "InSync" signals
that the following axis is synchronized and moving synchronously to the leading axis.

MC_PhasingRelative V5
MC_PhasingRelative: Relative shift of leading value on the following axis V5
Description
With the Motion Control instruction "MC_PhasingRelative", you shift the leading value on a
following axis during gearing with "MC_GearIn" and "MC_GearInPos" relative to the existing
leading value shift. The position of the leading axis is not affected by this.
You define the dynamic response of the motion of the following axis with the parameters
"Velocity", "Jerk", "Acceleration", and "Deceleration". The dynamic values are added to the
values of the synchronous operation motion.

Applies to
● Synchronous axis

Requirement
● The technology objects of the leading axis and the following axis have been configured
correctly.
● The leading axis is a positioning axis, synchronous axis, external encoder or leading axis
proxy.
● The following axis is a synchronous axis.
● The leading axis is specified as possible leading axis in the configuration of the following
axis in "Technology object > Configuration > Leading value interconnections".
● By means of the Motion Control instruction "MC_GearIn" or "MC_GearInPos", the following
axis is synchronized to the leading axis ("MC_GearIn.InGear" = TRUE or
"MC_GearInPos.InSync" = TRUE).
● The following axis is enabled.

3162

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Override response
The override response for "MC_PhasingRelative" jobs is described in section "Override
response V5: Synchronous operation jobs (Página 3282)".
Disabling the leading axis with "MC_Power.Enable" = FALSE does not abort the leading value
shift. The following axis follows the leading axis even during the braking ramp and after the
leading axis is enabled again.

Parameters
The following table shows the parameters of Motion Control instruction "MC_PhasingRelative":
Parameters

Declara‐
tion

Data type

Default
value

Description

Master

INPUT

TO_PositioningAxis

-

Leading axis technology object

TO_SynchronousAxis
TO_ExternalEncoder
TO_LeadingAxis‐
Proxy
Slave

INPUT

TO_SynchronousAxis

-

Following axis technology object

Execute

INPUT

BOOL

FALSE

TRUE

PhaseShift

INPUT

LREAL

0.0

Relative leading value shift

Velocity

INPUT

LREAL

-1.0

Velocity of the following axis for leading value shift
(added to synchronous operation motion)

Start job with a positive edge

> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The velocity configured in "Technology
object > Configuration > Extended para‐
meters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Velocity)

Acceleration

INPUT

LREAL

-1.0

Acceleration of the following axis for leading value
shift (added to synchronous operation motion)
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The acceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration of the following axis for leading value
shift (added to synchronous operation motion)
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The deceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Programación del PLC
Manual de programación y manejo, 11/2019

3163

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default
value

Description

Jerk

INPUT

LREAL

-1.0

Jerk of the following axis for leading value shift
(added to synchronous operation motion)
> 0.0

Constant acceleration velocity profile
The specified value is used.

= 0.0

Trapezoid velocity profile

< 0.0

The jerk configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Jerk)

Done

OUTPUT BOOL

FALSE

TRUE

Leading value shift is finished.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

CoveredPhaseShift

OUTPUT LREAL

0.0

As long as "Busy" = TRUE:
Display of leading value shift completed up to now

Start relative leading value shift
To start a relative leading value shift with the Motion Control instruction "MC_PhasingRelative",
follow these steps:
1. Check the requirements indicated above.
2. Specify the relative leading value shift in the "PhaseShift" parameter.
3. Start the "MC_PhasingRelative" job with a positive edge at parameter "Execute".
The current motion state is indicated in parameters "Busy", "CoveredPhaseShift", "Done"
and "Error".

Consulte también
Override response V5: Synchronous operation jobs (Página 3282)
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)
MC_GearIn V5 (Página 3149)
MC_GearInPos V5 (Página 3154)

3164

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_PhasingRelative: Function chart V5
Function chart: Relative shift of leading value
$

$
0&B3KDVLQJ5HODWLYH

0&B*HDU,Q3RV
72B0DVWHU
72B6ODYH

0DVWHU

6WDUW6\QF

6ODYH

,Q6\QF

([HFXWH

72B0DVWHU
,Q6\QF

72B6ODYH

0DVWHU

'RQH

'RQH

6ODYH

%XV\

%XV\

%XV\

([H

([HFXWH



5DWLR1XPHUDWRU &RPPDQG$ERUWHG



3KDVH6KLIW



5DWLR'HQRPLQDWRU

(UURU

ದ

9HORFLW\

(UURU,'

ದ

$FFHOHUDWLRQ

ದ

$FFHOHUDWLRQ

ದ

'HFHOHUDWLRQ

ದ

'HFHOHUDWLRQ

ದ

-HUN

ದ

-HUN

&RPPDQG$ERUWHG
(UURU
(UURU,'
&RYHUHG
3KDVH6KLIW

&RYHUHG
3KDVH6KLIW

$
,Q6\QF




W

$
([H
%XV\
'RQH
&RYHUHG
3KDVH6KLIW










W
W
W
W


72B0DVWHU3RVLWLRQ



W

72B6ODYH3RVLWLRQ


W

72B0DVWHU9HORFLW\


W

72B6ODYH9HORFLW\

72B6ODYH6WDWXV
6\QFKURQL]HG
0RWLRQ3KDVH6KLIW




Programación del PLC
Manual de programación y manejo, 11/2019

W



W

3165

Instrucciones
4.1 Instrucciones
During an active gearing operation with "MC_GearInPos" (A1), a "MC_PhasingRelative" job
(A2) is initiated using "Exe". The leading value shift is performed with the dynamics specified
additively to the synchronous operation motion. "Done" indicates that the leading value was
successfully shifted. The leading value shift 50.0 resulting from the job is indicated in
"CoveredPhaseShift". The absolute leading value shift 50.0 is indicated in the tag of the
technology object <TO>.StatusSynchronizedMotion.PhaseShift. The motion of the leading
axis is not affected.
After the leading value shift, the "MC_PhasingRelative" job (A2) is initiated again using "Exe".
The leading value shift is performed again with the dynamics specified additively to the
synchronous operation motion. "Done" indicates that the leading value was successfully
shifted. The leading value shift 50.0 resulting from the job is indicated in "CoveredPhaseShift".
The absolute leading value shift 100.0 is indicated in the tag of the technology object
<TO>.StatusSynchronizedMotion.PhaseShift.

MC_PhasingAbsolute V5
MC_PhasingAbsolute: Absolute shift of leading value on the following axis V5
Description
With the Motion Control instruction "MC_PhasingAbsolute", you shift the leading value on a
following axis during gearing with "MC_GearIn" and "MC_GearInPos" as an absolute shift. The
position of the leading axis is not affected by this.
You define the dynamic response of the motion of the following axis with the parameters
"Velocity", "Jerk", "Acceleration", and "Deceleration". The dynamic values are added to the
values of the synchronous operation motion.

Applies to
● Synchronous axis

Requirement
● The technology objects of the leading axis and the following axis have been configured
correctly.
● The leading axis is a positioning axis, synchronous axis, external encoder or leading axis
proxy.
● The following axis is a synchronous axis.
● The leading axis is specified as possible leading axis in the configuration of the following
axis in "Technology object > Configuration > Leading value interconnections".
● By means of the Motion Control instruction "MC_GearIn" or "MC_GearInPos", the following
axis is synchronized to the leading axis ("MC_GearIn.InGear" = TRUE or
"MC_GearInPos.InSync" = TRUE).
● The following axis is enabled.

3166

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Override response
The override response for "MC_PhasingAbsolute" jobs is described in section "Override
response V5: Synchronous operation jobs (Página 3282)".
Disabling the leading axis with "MC_Power.Enable" = FALSE does not abort the leading value
shift. The following axis follows the leading axis even during the braking ramp and after the
leading axis is enabled again.

Parameters
The following table shows the parameters of Motion Control instruction "MC_PhasingAbsolute":
Parameters

Declara‐
tion

Data type

Default
value

Description

Master

INPUT

TO_PositioningAxis

-

Leading axis technology object

TO_SynchronousAxis
TO_ExternalEncoder
TO_LeadingAxis‐
Proxy
Slave

INPUT

TO_SynchronousAxis

-

Following axis technology object

Execute

INPUT

BOOL

FALSE

TRUE

PhaseShift

INPUT

LREAL

0.0

Absolute leading value shift

Velocity

INPUT

LREAL

-1.0

Velocity of the following axis for leading value shift
(added to synchronous operation motion)

Start job with a positive edge

> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The velocity configured in "Technology
object > Configuration > Extended para‐
meters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Velocity)

Acceleration

INPUT

LREAL

-1.0

Acceleration of the following axis for leading value
shift (added to synchronous operation motion)
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The acceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration of the following axis for leading value
shift (added to synchronous operation motion)
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The deceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Programación del PLC
Manual de programación y manejo, 11/2019

3167

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default
value

Description

Jerk

INPUT

LREAL

-1.0

Jerk of the following axis for leading value shift
(added to synchronous operation motion)
> 0.0

Constant acceleration velocity profile
The specified value is used.

= 0.0

Trapezoid velocity profile

< 0.0

The jerk configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Jerk)

Done

OUTPUT BOOL

FALSE

TRUE

Leading value shift is finished.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

AbsolutePhaseShift

OUTPUT LREAL

0.0

As long as "Busy" = TRUE:
Display of leading value shift completed up to now

Start absolute leading value shift
To start an absolute leading value shift with the Motion Control instruction
"MC_PhasingAbsolute", follow these steps:
1. Check the requirements indicated above.
2. Specify the absolute leading value shift in the "PhaseShift" parameter.
3. Start the "MC_PhasingAbsolute" job with a positive edge at parameter "Execute".
The current motion state is indicated in parameters "Busy", "AbsolutePhaseShift", "Done"
and "Error".

Consulte también
Override response V5: Synchronous operation jobs (Página 3282)
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)
MC_GearIn V5 (Página 3149)
MC_GearInPos V5 (Página 3154)

3168

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_PhasingAbsolute: Function chart V5
Function chart: Absolute shift of leading value
$

$

0&B*HDU,Q3RV
72B0DVWHU
72B6ODYH

0DVWHU

0&B3KDVLQJ$EVROXWH

6WDUW6\QF

6ODYH

,Q6\QF

([HFXWH

%XV\

72B0DVWHU
,Q6\QF

72B6ODYH

0DVWHU

'RQH

'RQH

6ODYH

%XV\

%XV\

([H

([HFXWH
3KDVH6KLIW



5DWLR1XPHUDWRU &RPPDQG$ERUWHG





5DWLR'HQRPLQDWRU

(UURU



(UURU,'

9HORFLW\

ದ

$FFHOHUDWLRQ

ದ

$FFHOHUDWLRQ

ದ

'HFHOHUDWLRQ

ದ

'HFHOHUDWLRQ

ದ

-HUN

ದ

-HUN

&RPPDQG$ERUWHG
(UURU
(UURU,'
$EVROXWH
3KDVH6KLIW

$EVROXWH
3KDVH6KLIW

$
,Q6\QF




W

$
([H
%XV\
'RQH
$EVROXWH
3KDVH6KLIW










W
W
W
W


72B0DVWHU3RVLWLRQ



W

72B6ODYH3RVLWLRQ


W

72B0DVWHU9HORFLW\

72B6ODYH9HORFLW\




72B6ODYH6WDWXV
6\QFKURQL]HG
0RWLRQ3KDVH6KLIW

W





Programación del PLC
Manual de programación y manejo, 11/2019

W

W

3169

Instrucciones
4.1 Instrucciones
During an active gearing operation with "MC_GearInPos" (A1), a "MC_PhasingAbsolute" job
(A2) is initiated using "Exe". The leading value shift is performed with the dynamics specified
additively to the synchronous operation motion. "Done" indicates that the leading value was
successfully shifted. The leading value shift 50.0 resulting from the job is indicated in
"AbsolutePhaseShift". The absolute leading value shift 50.0 is indicated in the tag of the
technology object <TO>.StatusSynchronizedMotion.PhaseShift. The motion of the leading
axis is not affected.
After the leading value shift, the "MC_PhasingAbsolute" job (A2) is initiated again using "Exe".
Because the leading value shift (<TO>.StatusSynchronizedMotion.PhaseShift) is already 50.0,
the leading value is not shifted.

MC_CamIn V5
MC_CamIn: Start camming V5
Description
With the Motion Control instruction "MC_CamIn", you start a camming operation between a
leading axis and a following axis. The synchronous operation is synchronized depending on the
specified synchronous position of the leading axis.
A cam is defined between the start position (<TO>.StatusCam.StartLeadingValue) and end
position (<TO>.StatusCam.EndLeadingValue) after the interpolation. The specification for
leading and following value range in the configuration of the technology object only effect the
display in the graphical editor.
With the "MasterSyncPosition" parameter, you specify the synchronization position in the cam
relative to the starting position of the cam. The synchronous position establishes the
relationship between leading value and following value, independent of the type of
synchronization. With "MasterSyncPosition" ≠ 0.0, you move the synchronous position within
the cam without changing the position of the cam.
The synchronous position of the leading axis results from the starting position of the cam and
the "MasterSyncPosition" and "MasterOffset" parameters.
With the "MasterOffset" parameter, you offset the leading values of the cam (with
"SyncProfileReference" = 0, 1, 3, 4). This determines the position of the cam in relation to the
leading value of the synchronous operation function. This is how you move the cam to the
required position range.
The following figure shows the basic effect of the leading value and following value offset as
well as the position of the cam with the following parameter values:
● "MasterOffset" > 0
● Start position of the cam > 0
● "MasterSyncPosition" > 0

3170

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones

)ROORZLQJYDOXH

)ROORZLQJYDOXHRIWKHV\QFKURQRXV
RSHUDWLRQIXQFWLRQ
IROORZLQJD[LVSRVLWLRQ

4.1 Instrucciones

&DP

6ODYH2IIVHW

/HDGLQJYDOXH

0DVWHU2IIVHW




①
②
③
④
⑤




/HDGLQJYDOXHRIWKHV\QFKURQRXV
RSHUDWLRQIXQFWLRQ
OHDGLQJD[LVSRVLWLRQ



Start position of the cam
First defined interpolation point/start of the first segment of the cam (<TO>.StatusCam.Star‐
tLeadingValue)
Leading value distance with synchronization in advance ("MasterStartDistance")
Synchronous position of the leading axis relative to the starting position of the cam ("Mas‐
terSyncPosition")
Leading value distance with subsequent synchronization ("MasterStartDistance")
End position of the cam
Last defined interpolation point/end of the last segment of the cam (<TO>.StatusCam.EndLea‐
dingValue)

The figure below shows the basic effect of scaling the cam with the parameters "MasterScaling"
and "SlaveScaling":

Programación del PLC
Manual de programación y manejo, 11/2019

3171

Instrucciones
4.1 Instrucciones
0DVWHU6FDOLQJ 
6ODYH6FDOLQJ 

0DVWHU6FDOLQJ 
6ODYH6FDOLQJ 











W

W
0DVWHU6FDOLQJ 
6ODYH6FDOLQJ 

0DVWHU6FDOLQJ 
6ODYH6FDOLQJ 












W

W

Leading value
Following value

The following types of synchronization are possible:
● Synchronization in advance using dynamic parameters or leading value distance
("SyncProfileReference" = 0 or 1)
The synchronous operation is synchronized in advance to the specified synchronous
position of the leading axis ("MasterSyncPosition"). When the leading axis has reached the
synchronous position, the leading and following axis move synchronously.
To run through the entire cam, specify the value 0.0 (default value) in "MasterSyncPosition".
● Direct synchronous setting ("SyncProfileReference" = 2)
Synchronous operation is immediately set to synchronous. You use the
"MasterSyncPosition" parameter to set the exact synchronous position in the cam. This
setting is mainly suitable for synchronizing at a standstill.
● Subsequent synchronization using leading value distance ("SyncProfileReference" = 3)
The synchronous operation is synchronized subsequently starting from the specified
synchronous position of the leading axis ("MasterSyncPosition").
● Subsequent synchronization using leading value distance starting from current leading
value position ("SyncProfileReference" = 4)
The synchronous operation is synchronized subsequently starting from the current position
of the leading axis.
You can start synchronization when the leading axis or following axis is at a standstill or when
it is in motion.

3172

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Applies to
● Cam
● Synchronous axis

Requirement
● The technology objects of the leading axis, following axis, and cam have been configured
correctly.
● The leading axis is a positioning axis, synchronous axis, external encoder or leading axis
proxy.
● The following axis is a synchronous axis.
● The leading axis is specified as possible leading axis in the configuration of the following
axis under "Technology object > Configuration > Leading value interconnections".
● The following axis is enabled.
● The cam is interpolated with "MC_InterpolateCam".
● With synchronization in advance using leading value distance, the leading axis must be at
least the specified distance ("MasterStartDistance") from the synchronization position
("MasterSyncPosition") when starting the job.

Override response
The override response for "MC_CamIn" jobs is described in section "Override response V5:
Synchronous operation jobs (Página 3282)".
Disabling the following axis with "MC_Power.Enable" = FALSE aborts the synchronous
operation in every status.
Disabling the leading axis with "MC_Power", in contrast, does not abort synchronous operation.
The following axis follows the leading axis even during the braking ramp and after the leading
axis is enabled again.

Parameters
The following table shows the parameters of Motion Control instruction "MC_CamIn":
Parameter

Declara‐
tion

Data type

Default
value

Description

Master

INPUT

TO_PositioningAxis

-

Leading axis technology object

TO_SynchronousAxis
TO_ExternalEncoder
TO_LeadingAxis‐
Proxy
Slave

INPUT

TO_SynchronousAxis

-

Following axis technology object

Cam

INPUT

TO_Cam

-

Cam technology object

Execute

INPUT

BOOL

FALSE

TRUE

Programación del PLC
Manual de programación y manejo, 11/2019

Start job with a positive edge

3173

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

MasterOffset

INPUT

LREAL

0.0

When "SyncProfileReference" = 0, 1, 3, 4:
Offset of the leading values of cam
The cam technology object is not changed.
When "SyncProfileReference" = 2:
Not relevant

SlaveOffset

INPUT

LREAL

0.0

When "SyncProfileReference" = 0, 1, 3, 4:
Offset of the following values of cam
The cam technology object is not changed.
When "SyncProfileReference" = 2:
Not relevant

MasterScaling

INPUT

LREAL

1.0

Scaling the leading values of the cam
The cam technology object is not changed.

SlaveScaling

INPUT

LREAL

1.0

Scaling the following values of the cam
The cam technology object is not changed.

MasterSyncPosition

INPUT

LREAL

0.0

Synchronous position of leading axis
When "SyncProfileReference" = 0, 1, 2:
Position of the leading axis (relative to the starting
position of the cam), from which the axes are
synchronous and synchronization is complete.
The value must be within the definition of the cam.
When "SyncProfileReference" = 3:
Position of the leading axis (relative to the starting
position of the cam) from which the synchroniza‐
tion begins
The value must be within the definition of the cam.
When "SyncProfileReference" = 4:
Not relevant

SyncProfileReference

MasterStartDistance

INPUT

INPUT

DINT

LREAL

1

0.0

Synchronization profile
0

Synchronization in advance using dyna‐
mic parameters

1

Synchronization in advance using lea‐
ding value distance

2

Direct synchronous setting

3

Subsequent synchronization using lea‐
ding value distance

4

Subsequent synchronization using lea‐
ding value distance starting from current
leading value position

When "SyncProfileReference" = 1, 3, 4:
Leading value distance
Distance of the leading axis during the synchroni‐
zation
When "SyncProfileReference" = 0, 2:
Not relevant

3174

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

Velocity

INPUT

LREAL

-1.0

When "SyncProfileReference" = 0:
Velocity
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The velocity configured in "Technology
object > Configuration > Extended para‐
meters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Velocity)

When "SyncProfileReference" = 1, 2, 3, 4:
Not relevant
Acceleration

INPUT

LREAL

-1.0

When "SyncProfileReference" = 0:
Acceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The acceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

When "SyncProfileReference" = 1, 2, 3, 4:
Not relevant
Deceleration

INPUT

LREAL

-1.0

When "SyncProfileReference" = 0:
Deceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The deceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

When "SyncProfileReference" = 1, 2, 3, 4:
Not relevant
Jerk

INPUT

LREAL

-1.0

When "SyncProfileReference" = 0:
Jerk
> 0.0

Constant acceleration velocity profile

= 0.0

Trapezoid velocity profile

< 0.0

The jerk configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.

The specified value is used.

(<TO>.DynamicDefaults.Jerk)
When "SyncProfileReference" = 1, 2, 3, 4:
Not relevant

Programación del PLC
Manual de programación y manejo, 11/2019

3175

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

ApplicationMode

INPUT

DINT

0

Application of the cam

SyncDirection

INPUT

DINT

3

0

Once/not cyclic

1

Cyclic (absolute application on the follo‐
wing value side)

2

Cyclic appending (continuously appen‐
ding on the following value side)

Direction of synchronization
(in effect for axes with activated Modulo setting)
1

Positive direction
The following axis may only travel in po‐
sitive direction during synchronization.

2

Negative direction
The following axis may only travel in ne‐
gative direction during synchronization.

3

Shortest distance
Changes in direction are permitted for
the following axis during synchroniza‐
tion.

StartSync

OUTPUT BOOL

FALSE

TRUE

The following axis is synchronized to the
leading axis.

InSync

OUTPUT BOOL

FALSE

TRUE

Synchronous operation reached
The following axis is synchronized and
moves synchronously to the leading
axis.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

EndOfProfile

OUTPUT BOOL

FALSE

TRUE

The end of the cam has been reached.
Displayed for at least one call of
"MC_CamIn" in the user program when
the cam is used cyclically.

3176

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Starting synchronous operation
To start synchronous operation with the Motion Control instruction "MC_CamIn", follow these
steps:
1. Check the requirements indicated above.
2. Specify the leading axis, the following axis, the utilized cam and the synchronous position
in the corresponding parameters.
3. Start the "MC_CamIn" job with a positive edge at parameter "Execute".
The following axis is synchronized to the leading value of the leading axis. If the "InSync"
parameter shows the value "TRUE", the following axis is synchronized and moves
synchronously to the leading axis. With cyclic application of the cam, the "InSync" and
"Busy" parameters show the value "TRUE" until the "MC_CamIn" job is overridden by
another Motion Control job. With non-cyclic application of the cam, the "InSync" and "Busy"
parameters are set to the value "FALSE" when the parameter "EndOfProfile" is set to the
value "TRUE".

Consulte también
Override response V5: Synchronous operation jobs (Página 3282)
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

Programación del PLC
Manual de programación y manejo, 11/2019

3177

Instrucciones
4.1 Instrucciones

MC_CamIn: Function chart V5
Function chart: Synchronization in advance via dynamic parameters/leading value distance and
switching of the cam
$

$
0&B&DP,Q

0&B&DP,Q
72B0DVWHU

0DVWHU

72B0DVWHU
72B6ODYH
&DPB

6ODYH

&DPB

&DP

([HB

0DVWHU

72B6ODYH

6ODYH

&DP

([HB

([HFXWH

([HFXWH

0DVWHU2IIVHW

0DVWHU2IIVHW

6ODYH2IIVHW

6ODYH2IIVHW

0DVWHU6FDOLQJ

0DVWHU6FDOLQJ

6ODYH6FDOLQJ

6ODYH6FDOLQJ


0DVWHU6\QF3RVLWLRQ



0DVWHU6WDUW'LVWDQFH

6WDUW6\QF
,Q6\QF

ದ

9HORFLW\

ದ

$FFHOHUDWLRQ

%XV\

ದ

'HFHOHUDWLRQ

&RPPDQG$ERUWHG

-HUN

ದ

6\QF'LUHFWLRQ

6WDUW6\QFB

0DVWHU6WDUW'LVWDQFH

6WDUW6\QF

9HORFLW\

%XV\B

$FFHOHUDWLRQ

%XV\

$ERUWB

'HFHOHUDWLRQ

&RPPDQG$ERUWHG

,Q6\QF

-HUN

(UURU


6\QF'LUHFWLRQ

6WDUW6\QFB
,Q6\QFB
%XV\B

(UURU
(UURU,'

$SSOLFDWLRQ0RGH

(QG2I3URILOH



(QG2I3URILOH

(RSB





3178

6\QF3URILOH5HIHUHQFH



,Q6\QFB

(UURU,'

$SSOLFDWLRQ0RGH



0DVWHU6\QF3RVLWLRQ



6\QF3URILOH5HIHUHQFH



&DPB





&DPB



Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
$


([HB




%XV\B

W



6WDUW6\QFB

W




W



,Q6\QFB



W



$ERUWB



W

$


([HB




%XV\B

W



6WDUW6\QFB

W




W



,Q6\QFB



W



(RSB



W






72B0DVWHU
3RVLWLRQ



W

ದ
72B6ODYH
3RVLWLRQ




W


72B0DVWHU
9HORFLW\


W



72B6ODYH

9HORFLW\
ದ

W

6\QFB

6\QFB

Using "Exe_1", an "MC_CamIn" job (A1) is initiated. The start of the synchronization is
displayed with "StartSync_1". The following axis (TO_Slave) is synchronized in advance to the
cam (Cam_1) within the range "Sync_1" by means of the specified dynamic parameters. The
distance required for synchronization is calculated by the system. When the specified

Programación del PLC
Manual de programación y manejo, 11/2019

3179

Instrucciones
4.1 Instrucciones
reference position "MasterSyncPosition" relative to the start of the cam is reached, "InSync_1"
signals that the following axis is synchronized and moves synchronously to the leading axis.
The synchronous operation is overridden by another "MC_CamIn" job (A2). The abort is
signaled via "Abort_1". The start of the synchronization is displayed with "StartSync_2". The
following axis is synchronized in advance to the new cam (Cam_2) within the range "Sync_2"
by means of the specified leading value distance "MasterStartDistance". Within the range
"Sync_2", the axis does not follow the cam "Cam_1" The dynamic response required for
synchronization is calculated by the system. When the specified reference position
"MasterSyncPosition" relative to the start of the cam is reached, "InSync_2" signals that the
following axis is synchronized and moves synchronously to the leading axis.

Function chart: Synchronization in advance/subsequent synchronization via leading value distance and
switching the cam
$

$

0&B&DP,Q

0&B&DP,Q
72B0DVWHU

0DVWHU

72B0DVWHU
72B6ODYH
&DPB

6ODYH

&DPB

&DP

([HB

0DVWHU

72B6ODYH

6ODYH

&DP

([HB

([HFXWH

([HFXWH

0DVWHU2IIVHW

0DVWHU2IIVHW

6ODYH2IIVHW

6ODYH2IIVHW

0DVWHU6FDOLQJ

0DVWHU6FDOLQJ

6ODYH6FDOLQJ

6ODYH6FDOLQJ


0DVWHU6\QF3RVLWLRQ



0DVWHU6WDUW'LVWDQFH



6WDUW6\QF
,Q6\QF

9HORFLW\
$FFHOHUDWLRQ

%XV\

'HFHOHUDWLRQ

&RPPDQG$ERUWHG

-HUN
6\QF'LUHFWLRQ

6WDUW6\QFB

0DVWHU6WDUW'LVWDQFH

6WDUW6\QF

9HORFLW\

%XV\B

$FFHOHUDWLRQ

%XV\

$ERUWB

'HFHOHUDWLRQ

&RPPDQG$ERUWHG

,Q6\QF

-HUN

(UURU


6\QF'LUHFWLRQ

6WDUW6\QFB
,Q6\QFB
%XV\B

(UURU
(UURU,'

$SSOLFDWLRQ0RGH

(QG2I3URILOH



(QG2I3URILOH

(RSB





3180

6\QF3URILOH5HIHUHQFH



,Q6\QFB

(UURU,'

$SSOLFDWLRQ0RGH



0DVWHU6\QF3RVLWLRQ



6\QF3URILOH5HIHUHQFH



&DPB





&DPB



Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
$


([HB




%XV\B

W



6WDUW6\QFB

W




W



,Q6\QFB



W



$ERUWB



W

$


([HB




%XV\B

W



6WDUW6\QFB
,Q6\QFB

W




W




W



(RSB



W






72B0DVWHU

3RVLWLRQ 

W

ದ
72B6ODYH
3RVLWLRQ




W


72B0DVWHU
9HORFLW\


W



72B6ODYH

9HORFLW\
ದ

W

6\QFB

6\QFB

Using "Exe_1", an "MC_CamIn" job (A1) is initiated. The start of the synchronization is
displayed with "StartSync_1". The following axis (TO_Slave) is synchronized in advance to the
cam (Cam_1) within the range "Sync_1" by means of the specified leading value distance
"MasterStartDistance". The dynamic response required for synchronization is calculated by the

Programación del PLC
Manual de programación y manejo, 11/2019

3181

Instrucciones
4.1 Instrucciones
system. When the specified reference position "MasterSyncPosition" relative to the start of the
cam is reached, "InSync_1" signals that the following axis is synchronized and moves
synchronously to the leading axis.
The synchronous operation is overridden by another "MC_CamIn" job (A2). The abort is
signaled via "Abort_1". When the specified reference position "MasterSyncPosition" in relation
to the start of the cam disk is reached, the start of synchronization is indicated via
"StartSync_2". The following axis is synchronized subsequently to the new cam (Cam_2) within
the range "Sync_2" by means of the specified leading value distance "MasterStartDistance".
Within the range "Sync_2", the axis does not follow the cam "Cam_1" The dynamic response
required for synchronization is calculated by the system. "InSync_2" signals that the following
axis is synchronized and moving synchronously to the leading axis.

MC_SynchronizedMotionSimulation V5
MC_SynchronizedMotionSimulation: Simulate synchronous operation V5
Description
With the Motion Control instruction "MC_SynchronizedMotionSimulation", you simulate an
active synchronous operation on a following axis. As a result, a synchronous operation remains
active when the following axis is disabled with a "MC_Power" job. The following axis does not
have to be synchronized again after being enabled again.
With the start of a "MC_SynchronizedMotionSimulation" job, the velocity setpoint from the
synchronous operation is set to zero. If an overlaid movement is active on the following axis at
the start of the simulation, the setpoints of this overlaid movement will continue to be output.
Setpoints of motion jobs that are started during synchronous operation simulation are output to
the drive.
If the position of the following axis at the end of the simulation differs from the position at the
start of the simulation, this triggers a setpoint step-change.

Applies to
● Synchronous axis

Requirement
● The technology object has been configured correctly.
● The following axis is a synchronous axis.
● Synchronous operation is active on the technology object in status "Synchronous"
(<TO>.StatusWord.X22 = TRUE).

3182

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Override response
An "MC_SynchronizedMotionSimulation" job is not aborted by any other Motion Control job.
The simulated synchronous operation remains active even when the following axis is disabled
with "MC_Power.Enable" = FALSE or "MC_Stop".
A restart of the technology object stops the simulation and aborts the synchronous operation.
A new "MC_SynchronizedMotionSimulation" job does not abort any other Motion Control jobs.
With "MC_SynchronizedMotionSimulation.Enable" = TRUE, synchronous operation jobs are
rejected.

Parameters
The following table shows the parameters of Motion Control instruction
"MC_SynchronizedMotionSimulation":
Parameters

Declara‐
tion

Data type

Default
value

Description

Slave

INPUT

TO_SynchronousAxis

-

Following axis technology object

Enable

INPUT

BOOL

FALSE

TRUE

Simulation of synchronous operation is
started.

FALSE

Simulation of the synchronous operation
is stopped.

InSimulation

OUTPUT BOOL

FALSE

TRUE

Synchronous operation is being simula‐
ted

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

Continuing synchronous operation when the following axis is disabled
In order not to stop synchronous operation with "MC_SynchronizedMotionSimulation" Motion
Control instruction when the following axis is disabled, follow these steps:
1. Check the requirements indicated above.
2. Specify the following axis in the "Slave" parameter.
3. Bring the leading axis to a standstill (e.g. with "MC_Halt").
4. Start the simulation of the synchronous operation on the following axis with
"MC_SynchronizedMotionSimulation.Enable" = TRUE.
5. When the "InSimulation" parameter shows the value TRUE, disable the following axis. The
synchronous operation remains active in the simulation.
6. To reset synchronous operation again after the following axis is enabled, stop synchronous
operation simulation with "MC_SynchronizedMotionSimulation.Enable" = FALSE.
The synchronous operation simulation is stopped. The following axis follows the leading
axis without re-synchronization.

Programación del PLC
Manual de programación y manejo, 11/2019

3183

Instrucciones
4.1 Instrucciones

Consulte también
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

MC_LeadingValueAdditive V5
MC_LeadingValueAdditive: Specify additive leading value V5
Description
With the Motion Control instruction "MC_LeadingValueAdditive", you specify an additive
leading value cyclically in addition to the active leading value of a following axis.
The additive leading value consists of position, velocity and acceleration. Changes to the
specified values are effective immediately without consideration of the dynamic limits.
You specify the additive position value with the "Position" parameter. You specify the additive
velocity value with the "Velocity" parameter. You specify the additive acceleration value with
the "Acceleration" parameter.
The additive value is effective with the parameter "Enable" = TRUE. The values are valid as
long as the parameter "Busy" = TRUE. The additive leading value becomes ineffective with
"Enable" = FALSE.

Applies to
● Synchronous axis

Requirement
● The technology object has been configured correctly.
● The technology object has been enabled or is in simulation with an
"MC_SynchronizedMotionSimulation" job.

Override response
The override response for "MC_LeadingValueAdditive" jobs is described in section "Override
response V5: Synchronous operation jobs (Página 3282)".
If a synchronous operation is overridden by another synchronous operation, the additive
leading value remains valid.
An "MC_LeadingValueAdditive" job is aborted by an "MC_Stop" job and by an "MC_Reset" job
with "Restart" = TRUE.

3184

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction
"MC_LeadingValueAdditive":
Parameter

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_SynchronousAxis

-

Technology object on which the additive values act.

Enable

INPUT

BOOL

FALSE

TRUE

The leading value is adapted.

FALSE

The leading value is not adapted.

Position

INPUT

LREAL

0.0

Velocity

INPUT

LREAL

0.0

Additive position value
Additive velocity value
Observe the dynamic limits.

Acceleration

INPUT

LREAL

0.0

Additive acceleration value
Observe the dynamic limits.

Busy

OUTPUT BOOL

FALSE

TRUE

The additive values are valid.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
Override response V5: Synchronous operation jobs (Página 3282)
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)
Override response of Motion Control jobs V5 (Página 3281)

Programación del PLC
Manual de programación y manejo, 11/2019

3185

Instrucciones
4.1 Instrucciones

MC_LeadingValueAdditive V5: Function chart
Function chart: Specify additive leading value
$

$

0&B*HDU,Q3RV
72B0DVWHU
72B6ODYH
([H

0DVWHU
6ODYH
([HFXWH

6WDUW6\QF
,Q6\QF
%XV\



5DWLR1XPHUDWRU &RPPDQG$ERUWHG



5DWLR'HQRPLQDWRU



0DVWHU6\QF3RVLWLRQ



6ODYH6\QF3RVLWLRQ

635

6\QF3URILOH5HIHUHQFH



0DVWHU6WDUW'LVWDQFH

ದ

9HORFLW\

ದ

$FFHOHUDWLRQ

ದ

'HFHOHUDWLRQ

ದ

-HUN



3186

0&B/HDGLQJ9DOXH$GGLWLYH

(UURU

6WDUW6\QF
,Q6\QF
%XV\

72B6ODYH
(Q
$GG9DOXH

$[LV

%XV\

%XV\

(QDEOH

(UURU

(UU

3RVLWLRQ

(UURUOG

9HORFLW\
$FFHOHUDWLRQ

(UURU,'

6\QF'LUHFWLRQ

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
$
([H
%XV\
635
6WDUW6\QF
,Q6\QF


W




W





W




W




W

$
(Q
%XV\




W




W





72B0DVWHU
3RVLWLRQ

W




$GG9DOXH




W




(IIHFWLYH 
/HDGLQJ
9DOXH3RVLWLRQ


W




72B6ODYH
3RVLWLRQ





W

$

Programación del PLC
Manual de programación y manejo, 11/2019

%

3187

Instrucciones
4.1 Instrucciones

Section
$

Via "Exe" = TRUE, a "MC_GearInPos" job (A1) is started with synchronization in advance via dynamic parame‐
ters. At the same time, a "MC_LeadingValueAdditive" job (A2) is started via "En" = TRUE.
The leading axis (TO_Master) calculates the effective leading value (EffectiveLeadingValue.Position) and the
time for starting the synchronization. When the A1 job displays "StartSync" = TRUE, the following axis (TO_Slave)
synchronizes with the given specified dynamic parameters.
The additive leading value is continuously increased in the user program, added to the effective leading value and
has the effect of increased dynamic response of the following axis. When the additive leading value is reduced,
the dynamic response of the following axis is also reduced. If the additive leading value is 0.0, the effective leading
value follows the leading value of the leading axis.
The following axis synchronizes to the original synchronous position and the job A1 shows "InSync" = TRUE. The
job A2 is terminated with "En" = FALSE.

Section
%

Via "En" = TRUE, a "MC_LeadingValueAdditive" job (A2) is started before a synchronous operation job. The user
program continuously increases the additive leading value to the value "100.0". With "Exe" = TRUE a "MC_Gea‐
rInPos" job (A1) is started with synchronization in advance via leading value distance.
The leading axis calculates the effective leading value (EffectiveLeadingValue.Position). When the effective
leading value reaches "200.0", synchronization starts and the A1 job shows "StartSync" = TRUE. At this point the
leading axis has reached the value "100.0". The following axis is synchronized. The synchronous position is
moved by the additive leading value.
As soon as "InSync" = TRUE, the additive leading value is continuously reduced. While the leading value
(TO_Master.Position) increases from 200.0 to 300.0, the additive leading value (AddValue) decreases from 100.0
to 0.0. The effective leading value remains at 200.0 and the following axis does not move.
If the additive leading value is 0.0, the effective leading value follows the leading value of the leading axis. The shift
is canceled and the motion of the following axis is continued. The job A2 is terminated with "En" = FALSE.

Cam
MC_InterpolateCam V5
MC_InterpolateCam: Interpolate cam V5
Description
With the Motion Control instruction "MC_InterpolateCam", you interpolate a cam.
The interpolation closes the gaps between the defined interpolation points and segments of the
cam. The cam is interpolated between the following values in the definition range:
● First defined interpolation point/start of the first segment of the cam
(<TO>.StatusCam.StartLeadingValue)
● Last defined interpolation point/end of the last segment of the cam
(<TO>.StatusCam.EndLeadingValue)
After interpolation, an explicit value in the value range is assigned to each value in the definition
range.

3188

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
The interpolation type defines how missing ranges are interpolated. You specify the
interpolation type in the configuration of the technology object. The following interpolation
methods are possible:
● Linear interpolation
● Interpolation with cubic splines
● Interpolation with Bézier splines

Applies to
● Cam

Requirement
● The technology object has been configured correctly.
● The cam is not currently being used, e.g. for camming.

Override response
● An "MC_InterpolateCam" job is not aborted by any other Motion Control job.
● A new "MC_InterpolateCam" job does not abort any active Motion Control jobs.

Parameters
The following table shows the parameters of Motion Control instruction "MC_InterpolateCam":
Parameters

Declara‐
tion

Data type

Default
value

Description

Cam

INPUT

TO_Cam

-

Cam technology object

Execute

INPUT

BOOL

FALSE

TRUE

Start job with a positive edge

Done

OUTPUT BOOL

FALSE

TRUE

The cam is interpolated.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

Programación del PLC
Manual de programación y manejo, 11/2019

3189

Instrucciones
4.1 Instrucciones

Interpolating a cam
To interpolate a cam with the "MC_InterpolateCam" Motion Control instruction, follow these
steps:
1. Check the requirements indicated above.
2. Specify the cam to be interpolated in the "Cam" parameter.
3. Start the "MC_InterpolateCam" job with a positive edge at parameter "Execute".
The cam is interpolated. When the "Done" parameter shows the value "TRUE", the
interpolation is finished.

Consulte también
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

MC_GetCamLeadingValue V5
MC_GetCamLeadingValue: Read out leading value of a cam V5
Description
With the Motion Control instruction "MC_GetCamLeadingValue", you read the leading value
that is defined for a following value from a cam.
Because the same following values can be defined for different leading values, an
approximation of the leading value can specified in the "ApproachValue" parameter.

Applies to
● Cam

Requirement
● The technology object has been configured correctly.
● The cam is interpolated.

Override response
● An "MC_GetCamLeadingValue" job is not aborted by any other Motion Control job.
● A new "MC_GetCamLeadingValue" job does not abort any active Motion Control jobs.

3190

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction
"MC_GetCamLeadingValue":
Parameter

Declara‐
tion

Data type

Default
value

Description

Cam

INPUT

TO_Cam

-

Cam technology object

Execute

INPUT

BOOL

FALSE

TRUE

Start job with a positive edge

FollowingValue

INPUT

LREAL

0.0

Following value for which the leading value is read

ApproachLeadingVa‐
lue

INPUT

LREAL

0.0

Approximation value for the searched for leading
value
If the following value is used multiple times in the
cam, it can be used to limit the searched leading
value.

Done

OUTPUT BOOL

FALSE

TRUE

The leading value was read.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

Value

OUTPUT LREAL

-

Read leading value (position)
(valid when "Done" = TRUE)

Reading a leading value
To read a leading value from a cam with the "MC_GetCamLeadingValue" Motion Control
instruction, follow these steps:
1. Check the requirements indicated above.
2. Specify the cam, the following value, and the approximation value for the searched-for
leading value in the corresponding parameters.
3. Start the "MC_GetCamLeadingValue" job with a positive edge at parameter "Execute".
When the "Done" parameter shows the value "TRUE", the leading value has been
determined. The calculation of the leading value can take several cycles. The leading value
is output in the "Value" parameter.

Consulte también
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

Programación del PLC
Manual de programación y manejo, 11/2019

3191

Instrucciones
4.1 Instrucciones

MC_GetCamFollowingValue V5
MC_GetCamFollowingValue: Read out following value of a cam disc V5
Description
With the Motion Control instruction "MC_GetCamFollowingValue", you read the following value
and the first and second derivative of the following value for a leading value from a cam.

Applies to
● Cam

Requirement
● The technology object has been configured correctly.
● The cam is interpolated.

Override response
● An "MC_GetCamFollowingValue" job is not aborted by any other Motion Control job.
● A new "MC_GetCamFollowingValue" job does not abort any active Motion Control jobs.

Parameters
The following table shows the parameters of Motion Control instruction
"MC_GetCamFollowingValue":
Parameters

Declara‐
tion

Data type

Default
value

Description

Cam

INPUT

TO_Cam

-

Cam technology object

Execute

INPUT

BOOL

FALSE

TRUE

LeadingValue

INPUT

LREAL

0.0

Leading value for which the following value is read

Done

OUTPUT BOOL

FALSE

TRUE

The following value was read.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

Value

OUTPUT LREAL

-

Read following value (position)

Start job with a positive edge

(valid when "Done" = TRUE)

3192

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

FirstDerivative
SecondDerivative

Data type

Default
value

Description

OUTPUT LREAL

-

First derivative of read following value

OUTPUT LREAL

-

(valid when "Done" = TRUE)
Second derivative of read following value
(valid when "Done" = TRUE)

Reading a following value
To read a following value from a cam with the "MC_GetCamFollowingValue" Motion Control
instruction, follow these steps:
1. Check the requirements indicated above.
2. Specify the cam and the leading value in the corresponding parameters.
3. Start the "MC_GetCamFollowingValue" job with a positive edge at parameter "Execute".
When the "Done" parameter shows the value "TRUE", the following value has been read.
The following value and the derivatives are output in the "Value", "FirstDerivative" and
"SecondDerivative" parameters.

Consulte también
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

MotionIn
MC_MotionInVelocity V5
MC_MotionInVelocity: Specify motion setpoints V5
Description
With the Motion Control instruction "MC_MotionInVelocity", you specify cyclically applicable
calculated motion setpoints for velocity and acceleration as a basic motion for the axis. No
velocity profile is calculated for this, the values are directly active at the technology object. The
dynamic limits are not in effect. The motion setting using "MotionIn" can be superimposed with
an "MC_MoveSuperimposed" job (Página 3120).
With the "Velocity" parameter, you specify the desired velocity and with "Acceleration" the
desired acceleration. The setpoint velocity and setpoint acceleration are effective when the
parameter "Enable" = TRUE and at least the value for the "Velocity" parameter needs to be
specified.

Programación del PLC
Manual de programación y manejo, 11/2019

3193

Instrucciones
4.1 Instrucciones

Applies to
● Speed axis
● Positioning axis
● Synchronous axis

Requirement
● The technology object has been configured correctly.
● The technology object has been enabled.

Override response
The override response for "MC_MotionInVelocity" jobs is described in section "Override
response V5: Homing and motion jobs (Página 3281)".
Nota
Dynamic deviation possible
Pay attention to consistent specifications relating to velocity and acceleration when the
"MotionIn" instruction is overridden by another Motion Control instruction.
When the "MotionIn" instruction is overridden, make sure that the new acceleration
specifications are coordinated with the currently effective acceleration because the last
effective acceleration value will be applied.

Parameters
The following table shows the parameters of Motion Control instruction "MC_MotionInVelocity":
Parameter

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_SpeedAxis

-

Technology object

FALSE

TRUE

TO_PositioningAxis
TO_SynchronousAxis
Enable

INPUT

BOOL

Start job with a positive edge
The specified setpoints are used as long
as the parameter is set to "TRUE".

FALSE

End of the job with negative edge
If the parameter is set from "TRUE" to
"FALSE", the setpoints are set to 0.0.

Velocity

INPUT

LREAL

0.0

Acceleration

INPUT

LREAL

0.0

Velocity setpoint
Observe the dynamic limits.
Setpoint acceleration
Observe the dynamic limits.

PositionControlled

3194

INPUT

BOOL

TRUE

TRUE

Position-controlled mode

FALSE

Controlled running

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Busy

Data type

Default
value

Description

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
Override response V5: Homing and motion jobs (Página 3281)
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

Programación del PLC
Manual de programación y manejo, 11/2019

3195

Instrucciones
4.1 Instrucciones

MC_MotionInVelocity: Function chart V5
Function chart: Specify motion setpoints
0&B0RWLRQ,Q9HORFLW\
72B
(QDEOHB

%XV\

$[LV
(QDEOH

9HOB

9HORFLW\

$FFB

$FFHOHUDWLRQ

3RV&RQWUB

%XV\B

&RPPDQG$ERUWHG
(UURU

(UURUB

(UURU,'

3RVLWLRQ&RQWUROOHG



(QDEOHB
%XV\B
(UURUB
3RV&RQWUB




W




W




W




W



9HOB





$FFB

W




W

ದ
0&3UH6HUYR
F\FOH








W
$

3196

%

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones



72B9HORFLW\





72B
$FFHOHUDWLRQ

72B6WDWXV
3RVLWLRQLQJ
)ROORZLQJ
(UURU

W




W

ದ

0D[

0&3UH6HUYR
F\FOH

W







W
$

Section
$

%

With "Enable_1 = TRUE" the technology object is specified cyclic in the MC-PreServo-clock velocity
"Vel_1" and acceleration "Acc_1". These specifications are applied directly as setpoint velocity
"TO_1.Velocity" and setpoint acceleration "TO_1.Acceleration", without hereby calculating a velocity
profile.
As the position monitoring "PosContr_1" is set to FALSE, no following error "TO_1.StatusPositio‐
ning.FollowingError" is determined.

Section
%

The velocity and acceleration specifications are not active as long as "Enable_1" is set to FALSE.

At time ①, "Enable_1" is set to TRUE. As the position monitoring "PosContr_1" is set to TRUE, a
following error "TO_1.StatusPositioning.FollowingError" is determined.
The velocity specification "Vel_1" and the acceleration default "Acc_1" cause a setpoint jump which
exceeds the maximum permissible following error. With active position lag monitoring, the technology
alarm 521 is output, and the technology object is disabled. With deactivated following error monitoring,
the setpoint jump is executed with maximum dynamic.

MC_MotionInPosition V5
MC_MotionInPosition: Specify motion setpoints V5
Description
With the Motion Control instruction "MC_MotionInPosition", you specify the cyclic, applicable
motion setpoints for position, velocity and acceleration as basic motion for the axis. No velocity
profile is calculated for this, the values are directly active at the technology object. The dynamic
limits are not in effect. The motion setting using "MotionIn" can be superimposed with
an "MC_MoveSuperimposed" job (Página 3120).
With the "Position" parameter, you specify the set position. With the "Velocity" parameter, you
specify the setpoint velocity. With the "Acceleration" parameter, you specify the setpoint
acceleration.

Programación del PLC
Manual de programación y manejo, 11/2019

3197

Instrucciones
4.1 Instrucciones
The setpoint velocity is used as a feedforward control value when velocity feedforward control
is activated. The setpoint position, setpoint velocity and setpoint acceleration are effective
when the parameter "Enable" = TRUE and at least the values for the "Position" and "Velocity"
parameters are specified.

Applies to
● Positioning axis
● Synchronous axis

Requirement
● The technology object has been configured correctly.
● The technology object has been enabled.

Override response
The override response for "MC_MotionInPosition" jobs is described in section "Override
response V5: Homing and motion jobs (Página 3281)".
Nota
Dynamic deviation possible
Pay attention to consistent specifications relating to velocity and acceleration when the
"MotionIn" instruction is overridden by another Motion Control instruction.
When the "MotionIn" instruction is overridden, make sure that the new acceleration
specifications are coordinated with the currently effective acceleration because the last
effective acceleration value will be applied.

Parameters
The following table shows the parameters of Motion Control instruction "MC_MotionInPosition":
Parameter

Declara‐
tion

Axis

INPUT

Data type

Default
value

Description

TO_PositioningAxis

-

Technology object

FALSE

TRUE

TO_SynchronousAxis
Enable

INPUT

BOOL

Start job with a positive edge
The specified setpoints are used as long
as the parameter is set to "TRUE".

FALSE

End of the job with negative edge
If the parameter is set from "TRUE" to
"FALSE", the setpoints are set to 0.0.
The most recently specified value re‐
mains active for the position setpoint.

Position

3198

INPUT

LREAL

0.0

Position setpoint

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

Velocity

INPUT

LREAL

0.0

Velocity setpoint

Acceleration

INPUT

LREAL

0.0

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for the parameter "ErrorID"

Observe the dynamic limits.
Setpoint acceleration
Observe the dynamic limits.

Consulte también
Override response V5: Homing and motion jobs (Página 3281)
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

Programación del PLC
Manual de programación y manejo, 11/2019

3199

Instrucciones
4.1 Instrucciones

MC_MotionInPosition: Function chart V5
Function chart: Specify motion setpoints
0&B0RWLRQ,Q3RVLWLRQ
72B
(QDEOHB

%XV\

$[LV
(QDEOH

%XV\B

&RPPDQG$ERUWHG

3RVB

3RVLWLRQ

(UURU

9HOB

9HORFLW\

(UURU,'

$FFB

$FFHOHUDWLRQ

(UURUB



(QDEOHB
%XV\B
(UURUB




W




W




W





3RVB








W



9HOB





W


$FFB



W

ದ
0&3UH6HUYR
F\FOH








W
$

3200

%

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones





72B3RVLWLRQ






W


72B9HORFLW\





72B
$FFHOHUDWLRQ
72B6WDWXV
3RVLWLRQLQJ
)ROORZLQJ
(UURU

W




W

ದ

0D[

0&3UH6HUYR
F\FOH







W



W
$

Section
$

Section
%

%

With "Enable_1 = TRUE" the technology object is specified cyclic in the MC-PreServo-clock position
"Pos_1", velocity "Vel_1" and acceleration "Acc_1". These specifications are applied directly as set
position "TO_1.Position", setpoint velocity "TO_1.Velocity" and setpoint acceleration "TO_1.Accelera‐
tion", without hereby calculating a velocity profile.
The position, velocity and acceleration specifications are not active as long as "Enable_1" is set to
FALSE.

At time ①, "Enable_1" is set to TRUE. The default position setting "Pos_1" causes a setpoint jump
which exceeds the maximum permissible following error. With active position lag monitoring, the tech‐
nology alarm 521 is output, and the technology object is disabled. With deactivated following error
monitoring, the setpoint jump is executed with maximum dynamic.

Programación del PLC
Manual de programación y manejo, 11/2019

3201

Instrucciones
4.1 Instrucciones

Torque data
MC_TorqueAdditive V5
MC_TorqueAdditive: Specify additive torque V5
Description
With the Motion Control instruction "MC_TorqueAdditive", you specify an additive torque for the
drive to which the technology object is assigned. The torque data are transferred via the
telegram 750.
With the "Value" parameter, you specify the additive setpoint torque. The specification of the
additive torque setpoint is overriding. An additional torque may be positive or negative. If you
invert the setpoint for the technology object, the value for the additive torque is also inverted
and transferred inverted to the drive.

Applies to
● Speed axis
● Positioning axis
● Synchronous axis

Requirement
● The technology object has been configured correctly.
● The technology object has been enabled.
● The drive is connected via PROFIdrive telegram.
● Telegram 750 is configured.
Telegram 750 is available for SINAMICS drives V4.9 and higher.

Override response
● An "MC_TorqueAdditive" job is not aborted by any other Motion Control job.
● A new "MC_TorqueAdditive" job does not abort any active Motion Control jobs.

3202

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction "MC_TorqueAdditive":
Parameter

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_SpeedAxis

-

Technology object

FALSE

TRUE

The specified setpoint is used as long as
the parameter is set to TRUE.

FALSE

The additive torque transferred to the
drive is zero.

TO_PositioningAxis
TO_SynchronousAxis
Enable

INPUT

Value

INPUT

BOOL

LREAL

0.0

Additive setpoint torque
Permissible values:
-1.0E12 to 1.0E12

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

Programación del PLC
Manual de programación y manejo, 11/2019

3203

Instrucciones
4.1 Instrucciones

MC_TorqueAdditive: Function chart V5
Function chart: Activate/deactivate additive setpoint torque
0&B7RUTXH$GGLWLYH
72B
(QDEOHB
9DOXHB

$[LV

%XV\

(QDEOH

(UURU

9DOXH

%XV\B

(UURU,'


(QDEOHB
%XV\B




W




W


9DOXHB


W


6XSSOHPHQWDU\
WRUTXH


$

Section
$

Section
%

%

W

With "Enable_1 = TRUE", an additive setpoint torque "Value_1" is specified for the drive assigned to the
technology object. This setting is transferred to the drive parameter "p1511 - Supplementary torque 1"
using telegram 750.
With "Enable_1 = TRUE", an additive setpoint torque "Value_1" is specified for the drive assigned to the
technology object. This setting is transferred to the drive parameter "p1511 - Supplementary torque 1"
using telegram 750. The additive setpoint torque is first built up. At time ①, "Enable_1" is already set
to FALSE, before the additive setpoint torque is reduced again. The reduction of the torque setpoint is
transmitted directly to the drive.

MC_TorqueRange V5
MC_TorqueRange: Set high and low torque limits V5
Description
With the Motion Control instruction "MC_TorqueRange", you can specify an upper and lower
torque limit to the drive assigned to the technology object. The torque data are transferred via
the telegram 750.
With the "UpperLimit" parameter you specify the upper torque limit and with "LowerLimit" the
lower torque limit. The specification of the torque limits has smoothing effect on the
movements. If you invert the setpoints for the technology object, the values for the high and low
torque limit are also inverted and transferred inverted to the drive.

3204

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
If the high and low torque limits are active, the following monitors and limits are disabled by
default:
● Following error monitoring
● Time limitations for positioning and standstill monitoring
Monitoring remains in effect if you have selected the option "Leave position-related monitoring
enabled" under "Technology object > Configuration > Extended parameters > Limits > Torque
limit".

Applies to
● Speed axis
● Positioning axis
● Synchronous axis

Requirement
● The technology object has been configured correctly.
● The drive is connected via PROFIdrive telegram.
● Telegram 750 is configured.
Telegram 750 is available for SINAMICS drives V4.9 and higher.

Override response
● An "MC_TorqueRange" job is not aborted by any other Motion Control job.
● A new "MC_TorqueRange" job does not abort any active Motion Control jobs.
● If the torque limiting is active via the "MC_TorqueLimiting" job, the "MC_TorqueRange" job
is rejected with an error message and vice versa. The functions do not override one another.

Parameters
The following table shows the parameters of Motion Control instruction "MC_TorqueRange":
Parameter

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_SpeedAxis

-

Technology object

FALSE

TRUE

The specified values are used as long as
the TRUE parameter is set.

FALSE

No values for the high and low torque
limit are transferred to the drive.

TO_PositioningAxis
TO_SynchronousAxis
Enable

INPUT

BOOL

Programación del PLC
Manual de programación y manejo, 11/2019

3205

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

UpperLimit

INPUT

LREAL

1.0 E12

Upper torque limit (in the configured unit)
Permitted value range:
-1.0 E12 to 1.0 E12
The value of the parameter "UpperLimit" must not
be greater than the value of the parameter "Lower‐
Limit".

LowerLimit

INPUT

LREAL

-1.0 E12

Lower torque limit (in the configured unit)
Permitted value range:
-1.0 E12 to 1.0 E12
The value of the parameter "LowerLimit" must not
be less than the value of the parameter "UpperLi‐
mit".

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

3206

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_TorqueRange: Function chart V5
Function chart: Set high and low torque limits
0&B7RUTXH5DQJH
72B
(QDEOHB

$[LV

%XV\

(QDEOH

(UURU

8SSHU/LPLWB

8SSHU/LPLW

/RZHU/LPLWB

/RZHU/LPLW

%XV\B

(UURU,'



(QDEOHB




%XV\B



W
W


8SSHU/LPLWB




W


/RZHU/LPLWB


ದ

W



7RUTXHOLPLW
XSSHU





W


ದ
ದ

W

7RUTXHOLPLW ದ
ORZHU
ದ
ದ

With "Enable_1 = TRUE" an upper torque limit "UpperLimit_1" and a lower torque limit
"LowerLimit_1" are specified to the drive assigned to the technology object. These settings are
transferred directly to the drive parameters "p1522 - Torque limit upper" and "p1523 - Torque
limit lower" using telegram 750. If "Enable_1" is reset to FALSE, the upper and lower torque
limits are no longer active.

Programación del PLC
Manual de programación y manejo, 11/2019

3207

Instrucciones
4.1 Instrucciones

MC_TorqueLimiting V5
MC_TorqueLimiting: Activate/deactivate force/torque limit / fixed stop detection V5
Description
With the Motion Control instruction "MC_TorqueLimiting", you activate and assign parameters
for force/torque limiting and fixed stop detection. Together with a position-controlled motion job,
a "Travel to fixed stop" can be realized with the fixed stop detection. In the axis configuration,
you can configure whether the force/torque limiting is to relate to the drive side or the load side.
The functions of the Motion Control instruction "MC_TorqueLimiting" can be activated and
deactivated before and during a motion job.

Force/torque limiting applies to
● Speed axis
● Positioning axis
● Synchronous axis

Requirements for force/torque limiting
● The technology object and the reference torque of the drive have been configured correctly.
● No errors that prevent enabling are pending for the technology object (the technology object
must not be enabled).
● The drive must support force/torque reduction. Only PROFIdrive drives with SIEMENS
telegram 10x support force/torque limiting.
● Interconnection in the SINAMICS drive:
– P1522 to a fixed value of 100 %
– P1523 to a fixed value of -100% (e.g. through interconnection to fixed value parameter
P2902[i]).
– P2194 Threshold value for the parameter "InLimitation" must be < 100% (default 90%)

Fixed stop detection applies to
● Synchronous axis
● Positioning axis

Requirement for fixed stop detection
● The fixed stop detection can only be applied to position-controlled axes. For fixed stop
detection, the axis must be enabled as position-controlled. Motion jobs must be executed as
position-controlled.
● The technology object has been configured correctly.

3208

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
● When a drive and telegram that support force/torque limiting are used, the reference torque
of the drive must be correctly configured for the technology object.
● No errors that prevent enabling are pending for the technology object (the technology object
must be enabled).

Override response
● An "MC_TorqueLimiting" job cannot be aborted by any other Motion Control job.
● A new "MC_TorqueLimiting" job does not abort any active Motion Control jobs.
● If the high and low torque limiting is active via the "MC_TorqueRange" job, the
"MC_TorqueLimiting" job is rejected with an error message and vice versa. The functions do
not override one another.

Parameters
The following table shows the parameters of Motion Control instruction "MC_TorqueLimiting":
Parameter

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_SpeedAxis

-

Technology object

TO_PositioningAxis
TO_SynchronousAxis
Enable

INPUT

BOOL

FALSE

TRUE

Activate function corresponding to input
parameter "Mode"

Limit

INPUT

LREAL

-1.0

Value of force/torque limiting (in the configured unit
of measurement)1)
If the drive and telegram do not support force/
torque limiting, the specified value is irrelevant.
≥ 0.0

The value specified at the parameter is
used.

< 0.0

The value configured in the "Torque limi‐
ting" configuration window is used.
Tag Torque Limit:
<TO>.TorqueLimiting.LimitDefaults.Tor‐
que
Tag Force Limit:
<TO>.TorqueLimiting.LimitDefaults.For‐
ce

Mode

INPUT

DINT

0

0

Force/torque limiting1)

1

Fixed stop detection1)
If drive and telegram support force/
torque limiting, this is applied.

InClamping

OUTPUT BOOL

FALSE

TRUE

"Mode" = 1:
The drive is kept at the fixed stop (clam‐
ping2)). The axis position is within the po‐
sitioning tolerance.

Programación del PLC
Manual de programación y manejo, 11/2019

3209

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

InLimitation

OUTPUT BOOL

Default
value

Description

FALSE

TRUE

"Mode" = 0 and 1:
The value specified at parameter "Limit"
has exceeded the threshold value set in
the drive.
In case of SINAMICS drives default set‐
ting P2194 = 90%.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

1)

Changes to input parameters "Limit" and "Mode" are also applied at the cyclic call of the Motion Control instruction when
"Enable" = TRUE.

2)

If "InClamping" = TRUE, all motion and synchronization jobs are canceled.

Consulte también
Section "Error detection Motion Control instructions" of the documentation "S7-1500/S7-1500T
Motion Control Overview". (https://support.industry.siemens.com/cs/ww/en/view/109766459)

3210

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_TorqueLimiting: Function chart V5
Function chart: Pausing an axis when the torque limit is reached
$

$

0&B7RUTXH/LPLWLQJ

0&B+DOW

72B

$[LV

,Q&ODPSLQJ

(QB

(QDEOH

,Q/LPLWDWLRQ



/LPLW

%XV\

0RGH

(UURU

72B
,Q/LPLWDWLRQB
%XV\B

([HB

$[LV

'RQH

([HFXWH

%XV\

'HFHOHUDWLRQ

&RPPDQG$ERUWHG

-HUN
$ERUW$FFHOHUDWLRQ

(UURU,'

'RQHB

(UURU
(UURU,'



$


(QB




,Q/LPLWDWLRQB




%XV\B



$

W
W
W



([HB




'RQHB



72B
6WDWXV:RUG
;

W
W




W


72B9HORFLW\
72B$FWXDO
9HORFLW\


7RUTXH

W

/LPLW


W

At time ①, an "MC_Halt" job (A2) is executed on an axis with active torque limiting
"MC_TorqueLimiting" (A1). Torque limiting is still active ("MC_TorqueLimiting.Enable" =
TRUE) and any accumulated following error is retained and will be reduced with the time. When
the actual velocity is "0.0" and the minimum dwell time in the standstill window has elapsed, the
tag "MC_Halt.Done" shows = TRUE. When position monitoring is activated, reaching of the
target position is also monitored.

Programación del PLC
Manual de programación y manejo, 11/2019

3211

Instrucciones
4.1 Instrucciones

Function chart: Torque limiting with fixed stop detection (mode = 1)
$

$

0&B7RUTXH/LPLWLQJ

0&B0RYH9HORFLW\

72B

$[LV

,Q&ODPSLQJ

,Q&ODPSLQJB

72B

(QB

(QDEOH

,Q/LPLWDWLRQ

,Q/LPLWDWLRQB

([HB

ದ


%XV\

/LPLW
0RGH

%XV\B

$[LV

,Q9HORFLW\

([HFXWH

%XV\

9HORFLW\

&RPPDQG$ERUWHG

(UURU

$FFHOHUDWLRQ

(UURU

(UURU,'

'HFHOHUDWLRQ

(UURU,'

,Q9HOB
%XV\B
$ERUWB

-HUN
'LUHFWLRQB

'LUHFWLRQ
&XUUHQW

758(



$
(QB
,Q&ODPSLQJB
,Q/LPLWDWLRQB
%XV\B



3RVLWLRQ&RQWUROOHG










W
W






W
W

$
([HB
'LUHFWLRQB
%XV\B
,Q9HOB
$ERUWB












W
W
W
W
W

72B3RVLWLRQ
72B$FWXDO
3RVLWLRQ

7RUTXH

W

/LPLW


W

Positioning tolerance

At time ①, a "MC_TorqueLimiting" job (A1) is initiated via "En_1". An "MC_MoveVelocity" job
(A2) is executed on the axis with active torque limiting. The torque limiting is still active

3212

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
"MC_TorqueLimiting.Enable" = TRUE. When the following error limit ② is reached, the
"MC_MoveVelocity" job is aborted with "Abort" = TRUE. The drive is kept at the fixed stop
(clamping). The actual position of the axis is within the positioning tolerance. An
"MC_MoveVelocity" job is once again called via the two tags "Execute" = TRUE and
"Direction_2" = TRUE and the axis moves with constant velocity in the opposite direction. The
clamping is hereby reduced when the positioning tolerance ③ is exited. At time ④, the torque
limiting is cancelled.

Kinematics motions
MC_GroupInterrupt V5
MC_GroupInterrupt: Interrupt motion execution V5
Description
With the Motion Control instruction "MC_GroupInterrupt", you interrupt the execution of the
motion on a kinematics technology object. The interrupted kinematics motion can be resumed
with a "MC_GroupContinue" job.
If the kinematics is already at a standstill, the execution of the motion is also interrupted for
subsequent motion jobs. New motion jobs are then arranged as pending jobs in the job
sequence.
With the "Mode" parameter, you specify the dynamic behavior of the holding.

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● The interconnected axes are enabled.

Override response
The override response for "MC_GroupInterrupt" jobs is described in section "Override
response V5: Kinematics motion commands (Página 3283)".

Programación del PLC
Manual de programación y manejo, 11/2019

3213

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction "MC_GroupInterrupt":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Mode

INPUT

DINT

0

Start job with a positive edge

Mode for dynamic behavior
0

Stop with the dynamics of the motion job
to be interrupted

1

Stop with maximum dynamics of kine‐
matics motion

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Active

OUTPUT BOOL

FALSE

TRUE

The setpoints are calculated.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
Override response V5: Kinematics motion commands (Página 3283)

MC_GroupContinue V5
MC_GroupContinue: Continue motion execution V5
Description
With the Motion Control instruction "MC_GroupContinue", you continue a kinematics motion
that was previously interrupted with a "MC_GroupInterrupt" job. The kinematics motion can
also be continued if the kinematics has not yet come to a standstill following the
"MC_GroupInterrupt" job.
The "MC_GroupContinue" job has only an effect if the technology object is in "Interrupted" state.

Applies to
● Kinematics

3214

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Requirement
● The technology object has been configured correctly.
● The interconnected axes are enabled.

Override response
● An "MC_GroupContinue" job is not aborted by any other Motion Control job.
● A new "MC_GroupContinue" job aborts a current "MC_GroupInterrupt" job.
● The override response for "MC_GroupContinue" jobs is described in section "Override
response V5: Kinematics motion commands (Página 3283)".

Parameters
The following table shows the parameters of Motion Control instruction "MC_GroupContinue":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Start job with a positive edge

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
Override response V5: Kinematics motion commands (Página 3283)

Programación del PLC
Manual de programación y manejo, 11/2019

3215

Instrucciones
4.1 Instrucciones

MC_GroupContinue: Function chart V5
Function chart: Continue motion execution

72B.LQB
([HB


$

$

0&B0RYH/LQHDU$EVROXWH

0&B*URXS,QWHUUXSW

$[HV*URXS

'RQH

'RQHB

72B.LQB

([HFXWH

%XV\

%XV\B

([HB

3RVLWLRQ

$FWLYH

$FWLYHB

9HORFLW\

&RPPDQG$ERUWHG



$[HV*URXS

'RQH

'RQHB

([HFXWH

%XV\

%XV\B

$FWLYH

$FWLYHB

0RGH

&RPPDQG$ERUWHG

$FFHOHUDWLRQ

(UURU

(UURU

'HFHOHUDWLRQ

(UURU,'

(UURU,'

-HUN

5HPDLQLQJ'LVWDQFH

$

'LUHFWLRQ$
&RRUG6\VWHP
%XIIHU0RGH
7UDQVLWLRQ3DUDPHWHU
'\QDPLF$GDSWLRQ

0&B*URXS&RQWLQXH
72B.LQB
([HB

$[HV*URXS

'RQH

'RQHB

([HFXWH

%XV\

%XV\B

(UURU
(UURU,'

3216

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones



$





([HB




%XV\B




$FWLYHB




'RQHB



W
W
W
W

$


([HB




%XV\B




$FWLYHB




'RQHB



W
W
W
W

$


([HB




%XV\B




'RQHB



72B.LQB
6WDWXV:RUG;
,QWHUUXSWHG
72B.LQB
6WDWXV3DWK
9HORFLW\

W
W
W




W




W

The kinematics is moved with an "MC_MoveLinearAbsolute" job (A1).
At time ①, the "MC_MoveLinearAbsolute" job is interrupted by an "MC_GroupInterrupt" job
(A2). The kinematics is in "Interrupted" state. With "Mode = 0" the motion is stopped with the
dynamics of the "MC_MoveLinearAbsolute" job. The completion of the "MC_GroupInterrupt"
job is reported via "Done_2".
At time ②, the "MC_MoveLinearAbsolute" job is continued by an "MC_GroupContinue" job
(A3).

Programación del PLC
Manual de programación y manejo, 11/2019

3217

Instrucciones
4.1 Instrucciones

MC_GroupStop V5
MC_GroupStop: Stop motion V5
Description
With the Motion Control instruction "MC_GroupStop", you stop and abort an active motion on
the kinematics technology object. If the motion was already interrupted with an
"MC_GroupInterrupt", this is aborted. All still pending jobs in the job sequence are also aborted
by a "MC_GroupStop" job. As long as the "Execute" parameter is set to TRUE, kinematics jobs
are rejected ("ErrorID" = 16#80CD).
With the "Mode" parameter, you specify the dynamic behavior of the stop motion.

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● The interconnected axes are enabled.

Override response
The override response for "MC_GroupStop" jobs is described in section "Override response
V5: Kinematics motion commands (Página 3283)".

Parameters
The following table shows the parameters of Motion Control instruction "MC_GroupStop":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Mode

INPUT

DINT

0

Start job with a positive edge

Mode for dynamic behavior
0

Stop with the dynamics of the motion job
to be interrupted

1

Stop with maximum dynamics of kine‐
matics motion
When dynamic adaptation is activated,
the dynamics of the motion can also be
reduced so that the dynamic limits of the
axes are not exceeded.

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

3218

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Active

Data type

Default
value

Description

OUTPUT BOOL

FALSE

TRUE

The setpoints are calculated.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
Override response V5: Kinematics motion commands (Página 3283)

Programación del PLC
Manual de programación y manejo, 11/2019

3219

Instrucciones
4.1 Instrucciones

MC_GroupStop: Function chart V5
Function chart: Stop motion

72B.LQB
([HB


$

$

0&B0RYH/LQHDU$EVROXWH

0&B*URXS6WRS

$[HV*URXS

'RQH

([HFXWH

%XV\

%XV\B

3RVLWLRQ

$FWLYH

$FWLYHB

9HORFLW\

&RPPDQG$ERUWHG

$ERUWB

72B.LQB
([HB

$[HV*URXS

'RQH

'RQHB

([HFXWH

%XV\

%XV\B

$FWLYH

$FWLYHB

0RGH



&RPPDQG$ERUWHG

$FFHOHUDWLRQ

(UURU

(UURU

'HFHOHUDWLRQ

(UURU,'

(UURU,'

-HUN

5HPDLQLQJ'LVWDQFH

'LUHFWLRQ$
&RRUG6\VWHP
%XIIHU0RGH
7UDQVLWLRQ3DUDPHWHU
'\QDPLF$GDSWLRQ



$
([HB
%XV\B
$FWLYHB
$ERUWB




W




W




W




W

$
([HB
%XV\B
$FWLYHB
'RQHB

72B.LQB
6WDWXV3DWK
9HORFLW\




W




W




W




W




W

The kinematics is moved with an "MC_MoveLinearAbsolute" job (A1).
At time ①, the "MC_MoveLinearAbsolute" job is aborted by an "MC_GroupStop" job (A2). The
job abort is signaled via "Abort_1". With "Mode = 0" the motion is stopped with the dynamics of

3220

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
the "MC_MoveLinearAbsolute" job. The completion of the "MC_GroupStop" job is reported via
"Done_2".

MC_MoveLinearAbsolute V5
MC_MoveLinearAbsolute: Position kinematics with linear path motion V5
Description
With the Motion Control instruction "MC_MoveLinearAbsolute", you move a kinematics with a
circular motion to an absolute position. Cartesian orientation is also used absolute.
Dynamic behavior during movement is defined with the parameters "Velocity", "Acceleration",
"Deceleration" and "Jerk". For the dynamics of the orientation motion, the default values are
configured in "Technology object > Configuration > Extended parameters > Dynamic defaults".
● <TO>.DynamicDefaults.Orientation.Velocity
● <TO>.DynamicDefaults.Orientation.Acceleration
● <TO>.DynamicDefaults.Orientation.Deceleration
● <TO>.DynamicDefaults.Orientation.Jerk

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● The interconnected axes are enabled.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.

Override response
With the "TransitionParameter[1]" parameter, you determine the distance from the target point
of the previous motion job at which the new motion job is superimposed.
The override response for "MC_MoveLinearAbsolute" jobs is described in section "Override
response V5: Kinematics motion commands (Página 3283)".

Programación del PLC
Manual de programación y manejo, 11/2019

3221

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction
"MC_MoveLinearAbsolute":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Position

INPUT

ARRAY [1..4] OF
LREAL

-

Absolute target coordinates in the specified re‐
ference system

Position[1]

INPUT

LREAL

0.0

x-coordinate

Position[2]

INPUT

LREAL

0.0

y-coordinate

Position[3]

INPUT

LREAL

0.0

z-coordinate

Position[4]

INPUT

LREAL

0.0

A-coordinate

INPUT

LREAL

-1.0

Velocity

Velocity

Start job with a positive edge

> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The value configured in "Technology
object > Configuration > Extended pa‐
rameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Velo‐
city)

Acceleration

INPUT

LREAL

-1.0

Acceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The value configured in "Technology
object > Configuration > Extended pa‐
rameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Acce‐
leration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The value configured in "Technology
object > Configuration > Extended pa‐
rameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Dece‐
leration)

Jerk

INPUT

LREAL

-1.0

Jerk
> 0.0

The specified value is used.

= 0.0

No jerk limitation

< 0.0

The value configured in "Technology
object > Configuration > Extended pa‐
rameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Jerk)

3222

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

DirectionA

INPUT

DINT

3

Motion direction of the Cartesian orientation

CoordSystem

BufferMode

INPUT

INPUT

DINT

DINT

0

1

1

Positive direction

2

Negative direction

3

Shortest distance

Reference system of the specified target posi‐
tion and target orientation
0

World coordinate system (WCS)

1

Object coordinate system 1 (OCS1)

2

Object coordinate system 2 (OCS2)

3

Object coordinate system 3 (OCS3)

Motion transition
1

Append motion
The active motion sequence is com‐
pleted and the kinematics comes to a
standstill. The movement of this job is
then executed.

2

Smooth with the lower velocity
When the blending distance is rea‐
ched, the current motion is blended
with the motion of this job. The lower
velocity of the two jobs is used here.

5

Smooth with the higher velocity
When the blending distance is rea‐
ched, the current motion is blended
with the motion of this job. The higher
velocity of the two jobs is used here.

TransitionParameter

INPUT

TransitionParameter[1] INPUT

ARRAY [1..5] OF
LREAL
LREAL

Transition parameter
-1.0

Rounding clearance
≥ 0.0

The specified value is used.

< 0.0

The maximum possible rounding clea‐
rance is used.

TransitionParameter[2] INPUT

LREAL

-

Reserved

TransitionParameter[3] INPUT

LREAL

-

Reserved

TransitionParameter[4] INPUT

LREAL

-

Reserved

TransitionParameter[5] INPUT

LREAL

-

Reserved

Programación del PLC
Manual de programación y manejo, 11/2019

3223

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

DynamicAdaption

INPUT

DINT

-1

Dynamic adaptation
<0

The configured setting in "Technology
object > Configuration > Extended pa‐
rameters > Dynamic" is used.
(<TO>.DynamicDefaults.DynamicA‐
daption)

0

Without dynamic adaption

1

Dynamic adaptation with segmenta‐
tion of the path

2

Dynamic adaptation without segmen‐
tation of the path

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Active

OUTPUT BOOL

FALSE

TRUE

The setpoints are calculated.

FALSE

When "Busy" = TRUE:
Job is waiting. (Typical: A preceding
job is still active.)

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job
during execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing
the job. The job is rejected. The cause
of the error can be found in the "Erro‐
rID" parameter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

RemainingDistance

OUTPUT LREAL

-1.0

Distance-to-go of the current job

Consulte también
Override response V5: Kinematics motion commands (Página 3283)

3224

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_MoveLinearAbsolute: Function chart V5
Function chart: Position kinematics with linear path motion
$

$

0&B0RYH/LQHDU$EVROXWH

0&B0RYH/LQHDU$EVROXWH

$[HV*URXS

'RQH

'RQHB

72B.LQB

$[HV*URXS

'RQH

'RQHB

([HB

([HFXWH

%XV\

%XV\B

([HB

([HFXWH

%XV\

%XV\B

[_\_]_D

3RVLWLRQ

$FWLYH

$FWLYHB

[ _\_] _D 

3RVLWLRQ

$FWLYH

$FWLYHB



9HORFLW\

&RPPDQG$ERUWHG



9HORFLW\

&RPPDQG$ERUWHG

72B.LQB

$FFHOHUDWLRQ

(UURU

$FFHOHUDWLRQ

(UURU

'HFHOHUDWLRQ

(UURU,'

'HFHOHUDWLRQ

(UURU,'

-HUN

-HUN

5HPDLQLQJ'LVWDQFH

'LUHFWLRQ$


&RRUG6\VWHP



&RRUG6\VWHP



%XIIHU0RGH



%XIIHU0RGH



7UDQVLWLRQ3DUDPHWHU

G1

'\QDPLF$GDSWLRQ

7UDQVLWLRQ3DUDPHWHU
'\QDPLF$GDSWLRQ



$

5HPDLQLQJ'LVWDQFH

'LUHFWLRQ$





([HB




%XV\B




$FWLYHB




'RQHB



W
W
W
W

$


([HB




%XV\B




$FWLYHB




'RQHB



W
W
W
W


72B.LQB
6WDWXV3DWK
9HORFLW\




W

The kinematics is moved with an "MC_MoveLinearAbsolute" job (A1).

Programación del PLC
Manual de programación y manejo, 11/2019

3225

Instrucciones
4.1 Instrucciones
At time ① an additional "MC_MoveLinearAbsolute" job (A2) is initiated. As the
"MC_MoveLinearAbsolute" jobs have no override effect on one another, the job A2 is arranged
in the job sequence.
At the point in time ②, completion of the A1 job is signaled via "Done_1" and the job A2 is
started. As "BufferMode = 2" is set for job A2, the motion transition is smoothed with the lower
velocity of both jobs. As soon as the target position is reached, the completion of the A2 job is
signaled via "Done_2".

MC_MoveLinearRelative V5
MC_MoveLinearRelative: Relative positioning of kinematics with linear path motion V5
Description
With the Motion Control instruction "MC_MoveLinearRelative", you can move a kinematics with
a linear path relative to the position which was present at the start of the job processing.
Cartesian orientation is also used relative.
Dynamic behavior during movement is defined with the parameters "Velocity", "Acceleration",
"Deceleration" and "Jerk". For the dynamics of the orientation motion, the default values are
configured in "Technology object > Configuration > Extended parameters > Dynamic defaults".
● <TO>.DynamicDefaults.Orientation.Velocity
● <TO>.DynamicDefaults.Orientation.Acceleration
● <TO>.DynamicDefaults.Orientation.Deceleration
● <TO>.DynamicDefaults.Orientation.Jerk

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● The interconnected axes are enabled.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.

Override response
With the "TransitionParameter[1]" parameter, you determine the distance from the target point
of the previous motion job at which the new motion job is superimposed.
The override response for "MC_MoveLinearRelative" jobs is described in section "Override
response V5: Kinematics motion commands (Página 3283)".

3226

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction
"MC_MoveLinearRelative":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Distance

INPUT

ARRAY [1..4] OF
LREAL

-

Relative target coordinates in the specified refe‐
rence system

Distance[1]

INPUT

LREAL

0.0

x-coordinate

Distance[2]

INPUT

LREAL

0.0

y-coordinate

Distance[3]

INPUT

LREAL

0.0

z-coordinate

Distance[4]

INPUT

LREAL

0.0

A-coordinate

INPUT

LREAL

-1.0

Velocity

Velocity

Start job with a positive edge

> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The value configured in "Technology
object > Configuration > Extended pa‐
rameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Velo‐
city)

Acceleration

INPUT

LREAL

-1.0

Acceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The value configured in "Technology
object > Configuration > Extended pa‐
rameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Acce‐
leration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The value configured in "Technology
object > Configuration > Extended pa‐
rameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Dece‐
leration)

Jerk

INPUT

LREAL

-1.0

Jerk
> 0.0

The specified value is used.

= 0.0

No jerk limitation

< 0.0

The value configured in "Technology
object > Configuration > Extended pa‐
rameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Jerk)

Programación del PLC
Manual de programación y manejo, 11/2019

3227

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

CoordSystem

INPUT

DINT

0

Reference system of the specified target posi‐
tion and target orientation

BufferMode

INPUT

DINT

1

0

World coordinate system (WCS)

1

Object coordinate system 1 (OCS1)

2

Object coordinate system 2 (OCS2)

3

Object coordinate system 3 (OCS3)

Motion transition
1

Append motion
The active motion sequence is com‐
pleted and the kinematics comes to a
standstill. The movement of this job is
then executed.

2

Smooth with the lower velocity
When the blending distance is rea‐
ched, the current motion is blended
with the motion of this job. The lower
velocity of the two jobs is used here.

5

Smooth with the higher velocity
When the blending distance is rea‐
ched, the current motion is blended
with the motion of this job. The higher
velocity of the two jobs is used here.

TransitionParameter

INPUT

TransitionParameter[1] INPUT

TransitionParameter[2] INPUT

ARRAY [1..5] OF
LREAL

-

LREAL

-1.0

LREAL

-

Transition parameter
Rounding clearance
≥ 0.0

The specified value is used.

< 0.0

The maximum possible rounding clea‐
rance is used.

Reserved

TransitionParameter[3] INPUT

LREAL

-

Reserved

TransitionParameter[4] INPUT

LREAL

-

Reserved

TransitionParameter[5] INPUT

LREAL

-

Reserved

DINT

-1.0

DynamicAdaption

INPUT

Dynamic adaptation
<0

The configured setting in "Technology
object > Configuration > Extended pa‐
rameters > Dynamic" is used.
(<TO>.DynamicDefaults.DynamicA‐
daption)

0

Without dynamic adaption

1

Dynamic adaptation with segmenta‐
tion of the path

2

Dynamic adaptation without segmen‐
tation of the path

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

3228

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Active

OUTPUT BOOL

Default
value

Description

FALSE

TRUE

The setpoints are calculated.

FALSE

When "Busy" = TRUE:
Job is waiting. (Typical: A preceding
job is still active.)

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job
during execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing
the job. The job is rejected. The cause
of the error can be found in the "Erro‐
rID" parameter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

RemainingDistance

OUTPUT LREAL

-1.0

Distance-to-go of the current job

Consulte también
Override response V5: Kinematics motion commands (Página 3283)

Programación del PLC
Manual de programación y manejo, 11/2019

3229

Instrucciones
4.1 Instrucciones

MC_MoveLinearRelative: Function chart V5
Function chart: Relative positioning of kinematics with linear path motion

72B.LQB
([HB
___


$

$

0&B0RYH/LQHDU5HODWLYH

0&B0RYH/LQHDU5HODWLYH

$[HV*URXS

'RQH

'RQHB

72B.LQB

([HFXWH

%XV\

%XV\B

([HB

'LVWDQFH

$FWLYH

$FWLYHB

9HORFLW\

&RPPDQG$ERUWHG

___

(UURU



$FFHOHUDWLRQ



'RQH

'RQHB

([HFXWH

%XV\

%XV\B

$FWLYH

$FWLYHB

'LVWDQFH
9HORFLW\

&RPPDQG$ERUWHG

(UURU,'

$FFHOHUDWLRQ

(UURU

5HPDLQLQJ'LVWDQFH

'HFHOHUDWLRQ

(UURU,'

'HFHOHUDWLRQ
-HUN

$[HV*URXS

&RRUG6\VWHP

-HUN

%XIIHU0RGH
7UDQVLWLRQ3DUDPHWHU
'\QDPLF$GDSWLRQ



&RRUG6\VWHP



%XIIHU0RGH

5HPDLQLQJ'LVWDQFH

7UDQVLWLRQ3DUDPHWHU

G1

'\QDPLF$GDSWLRQ



$
([HB
%XV\B
$FWLYHB
'RQHB






W




W




W




W

$
([HB
%XV\B
$FWLYHB
'RQHB




W




W




W




W


72B.LQB
6WDWXV3DWK
9HORFLW\




W

The kinematics is moved with an "MC_MoveLinearRelative" job (A1).

3230

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
At time ① an additional "MC_MoveLinearRelative" job (A2) is initiated. As the
"MC_MoveLinearRelative" jobs have no override effect on one another, the job A2 is arranged
in the job sequence.
At the point in time ②, completion of the A1 job is signaled via "Done_1" and the job A2 is
started. As "BufferMode = 5" is set for job A2, the motion transition is smoothed with the higher
velocity of both jobs. As soon as the target position is reached, the completion of the A2 job is
signaled via "Done_2".

MC_MoveCircularAbsolute V5
MC_MoveCircularAbsolute: Position kinematics with circular path motion V5
Description
With the Motion Control instruction "MC_MoveCircularAbsolute", you can move a kinematics
with a circular motion to an absolute position. Cartesian orientation is also used absolute.
With the "CircMode" parameter, you specify the definition of the circular path:
● Via an intermediate point and the end point
With the "AuxPoint" parameter, you specify an intermediate point on the circular path, via
which the end point specified in the "EndPoint" parameter is to be approached. The circular
path is calculated via the starting, intermediate and end points. Only circular paths less than
360° can be traversed here.
● Via the circle center and angle in a main plane
With the "AuxPoint" parameter, you define the center point of the circle. The end point of the
circular path is calculated via the angle specified in the parameter "Arc". With the
"PathChoice" parameter, you specify whether the circular path is to be traversed in positive
or negative direction of rotation. With the "CirclePlane" parameter, you specify the main
plane in which the circular path is to be traversed.
● Via the circle radius and the end point in a main plane
With the "EndPoint" parameter, you specify the end point and with "Radius" the radius of the
circular path. Depending on the radius, up to four possible circular paths can occur in the
plane defined with the "CirclePlane" parameter. With the "PathChoice" parameter, you
specify which of these circular paths is to be moved.
Dynamic behavior during Kinematics motion is defined with the parameters "Velocity",
"Acceleration", "Deceleration" and "Jerk". For the dynamics of the orientation motion, the
default values are configured in "Technology object > Configuration > Extended parameters >
Dynamic defaults".
● <TO>.DynamicDefaults.Orientation.Velocity
● <TO>.DynamicDefaults.Orientation.Acceleration
● <TO>.DynamicDefaults.Orientation.Deceleration
● <TO>.DynamicDefaults.Orientation.Jerk

Programación del PLC
Manual de programación y manejo, 11/2019

3231

Instrucciones
4.1 Instrucciones

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● The interconnected axes are enabled.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.

Override response
With the "TransitionParameter[1]" parameter, you determine the distance from the target point
of the previous motion job at which the new motion job is superimposed.
The override response for "MC_MoveCircularAbsolute" jobs is described in section "Override
response V5: Kinematics motion commands (Página 3283)".

Parameters
The following table shows the parameters of Motion Control instruction
"MC_MoveCircularAbsolute":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

CircMode

INPUT

DINT

0

AuxPoint

INPUT

ARRAY [1..3] OF
LREAL

-

Start job with a positive edge

Definition of circular path
0

The position vector specified at the
"AuxPoint" parameter defines a point
on the circular path.

1

The position specified at the parame‐
ter "AuxPoint" defines the circle cen‐
ter.

2

The "Radius" and "EndPoint" parame‐
ters define the circle segment.

Circular path auxiliary point
● When "CircMode" = 0: Point on the circular
path
● When "CircMode" = 1: Center point of the
circular path
● When "CircMode" = 2: Not relevant

AuxPoint[1]

INPUT

LREAL

0.0

x-coordinate

AuxPoint[2]

INPUT

LREAL

0.0

y-coordinate

AuxPoint[3]

INPUT

LREAL

0.0

z-coordinate

INPUT

ARRAY [1..4] OF
LREAL

-

Target position in the specified reference system

EndPoint

When "CircMode" = 1:
Only "EndPoint[4]" relevant (orientation axis)

3232

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

EndPoint[1]

INPUT

LREAL

0.0

x-coordinate

EndPoint[2]

INPUT

LREAL

0.0

y-coordinate

EndPoint[3]

INPUT

LREAL

0.0

z-coordinate

EndPoint[4]

INPUT

LREAL

0.0

A-coordinate

INPUT

DINT

0

PathChoice

Orientation of the circular path
When "CircMode" = 0:
Not relevant
When "CircMode" = 1:
0

Positive direction of rotation

1

Negative direction of rotation

When "CircMode" = 2:

CirclePlane

INPUT

DINT

0

0

Shorter positive circle segment

1

Shorter negative circle segment

2

Longer positive circle segment

3

Longer negative circle segment

Main plane of the circular path
When "CircMode" = 0:
Not relevant
When "CircMode" = 1 and 2:

Radius

INPUT

LREAL

0.0

0

x-z plane

1

y-z plane

2

x-y plane

When "CircMode" = 2:
Radius of the circular movement

Arc

INPUT

LREAL

0.0

When "CircMode" = 1:
Angle of the circular movement

Velocity

INPUT

LREAL

-1.0

Velocity
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The value configured in "Technology
object > Configuration > Extended pa‐
rameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Velo‐
city)

Acceleration

INPUT

LREAL

-1.0

Acceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The value configured in "Technology
object > Configuration > Extended pa‐
rameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Acce‐
leration)

Programación del PLC
Manual de programación y manejo, 11/2019

3233

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

Deceleration

INPUT

LREAL

-1.0

Deceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The value configured in "Technology
object > Configuration > Extended pa‐
rameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Dece‐
leration)

Jerk

INPUT

LREAL

-1.0

Jerk
> 0.0

The specified value is used.

= 0.0

No jerk limitation

< 0.0

The value configured in "Technology
object > Configuration > Extended pa‐
rameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Jerk)

DirectionA

CoordSystem

BufferMode

INPUT

INPUT

INPUT

DINT

DINT

DINT

3

0

1

Motion direction of the Cartesian orientation
1

Positive direction

2

Negative direction

3

Shortest distance

Reference system
0

World coordinate system (WCS)

1

Object coordinate system 1 (OCS1)

2

Object coordinate system 2 (OCS2)

3

Object coordinate system 3 (OCS3)

Motion transition
1

Append motion
The active motion sequence is com‐
pleted and the kinematics comes to a
standstill. The movement of this job is
then executed.

2

Smooth with the lower velocity
When the blending distance is rea‐
ched, the current motion is blended
with the motion of this job. The lower
velocity of the two jobs is used here.

5

Smooth with the higher velocity
When the blending distance is rea‐
ched, the current motion is blended
with the motion of this job. The higher
velocity of the two jobs is used here.

TransitionParameter

3234

INPUT

ARRAY [1..5] OF
LREAL

Transition parameter

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

TransitionParameter[1] INPUT

Data type

Default
value

Description

LREAL

-1.0

Rounding clearance
≥ 0.0

The specified value is used.

< 0.0

The maximum possible rounding clea‐
rance is used.

TransitionParameter[2] INPUT

LREAL

-

Reserved

TransitionParameter[3] INPUT

LREAL

-

Reserved

TransitionParameter[4] INPUT

LREAL

-

Reserved

TransitionParameter[5] INPUT

LREAL

-

Reserved

DINT

-1.0

Dynamic adaptation

DynamicAdaption

INPUT

<0

The configured setting in "Technology
object > Configuration > Extended pa‐
rameters > Dynamic" is used.
(<TO>.DynamicDefaults.DynamicA‐
daption)

0

Without dynamic adaption

1

Dynamic adaptation with segmenta‐
tion of the path

2

Dynamic adaptation without segmen‐
tation of the path

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Active

OUTPUT BOOL

FALSE

TRUE

The setpoints are calculated.

FALSE

When "Busy" = TRUE:
Job is waiting. (Typical: A preceding
job is still active.)

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job
during execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing
the job. The job is rejected. The cause
of the error can be found in the "Erro‐
rID" parameter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

RemainingDistance

OUTPUT LREAL

-1.0

Distance-to-go of the current job

Consulte también
Override response V5: Kinematics motion commands (Página 3283)

Programación del PLC
Manual de programación y manejo, 11/2019

3235

Instrucciones
4.1 Instrucciones

MC_MoveCircularAbsolute: Function chart V5
Function chart: Position kinematics with circular path motion
In the function chart, sections A1 and A2 of the following kinematics motion are viewed:
[_\_]_D
$

$

\:&6

˞
]:&6

[:&6
[ _\_] 

$

$

0&B0RYH/LQHDU$EVROXWH

0&B0RYH&LUFXODU$EVROXWH

$[HV*URXS

'RQH

'RQHB

72B.LQB

([HB

([HFXWH

%XV\

%XV\B

([HB

[_\_]_D

3RVLWLRQ

$FWLYH

$FWLYHB



9HORFLW\

&RPPDQG$ERUWHG

72B.LQB


[ _\_] 

'RQH

'RQHB

([HFXWH

%XV\

%XV\B

$FWLYH

$FWLYHB

&LUF0RGH
$X[3RLQW

&RPPDQG$ERUWHG

(QG3RLQW

$FFHOHUDWLRQ

(UURU

'HFHOHUDWLRQ

(UURU,'



3DWK&KRLFH

(UURU,'

5HPDLQLQJ'LVWDQFH



&LUFOH3ODQH

5HPDLQLQJ'LVWDQFH

-HUN


&RRUG6\VWHP



%XIIHU0RGH

(UURU

5DGLXV

'LUHFWLRQ$



$[HV*URXS

˞


$UF
9HORFLW\

7UDQVLWLRQ3DUDPHWHU

$FFHOHUDWLRQ

'\QDPLF$GDSWLRQ

'HFHOHUDWLRQ
-HUN
'LUHFWLRQ$


&RRUG6\VWHP



%XIIHU0RGH

G1

7UDQVLWLRQ3DUDPHWHU
'\QDPLF$GDSWLRQ

3236

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones


$





([HB



W



%XV\B



W



$FWLYHB



W



'RQHB



W

$


([HB



W



%XV\B



W



$FWLYHB



W



'RQHB



W


72B.LQB
6WDWXV3DWK
9HORFLW\




W

The kinematics is moved with an "MC_MoveLinearAbsolute" job (A1).
At time ① an "MC_MoveCircularAbsolute" job (A2) is initiated. As the
"MC_MoveCircularAbsolute" job has no overdrive effect, the job A2 is arranged in the job
sequence.
At the point in time ②, completion of the A1 job is signaled via "Done_1" and the job A2 is
started. As "BufferMode = 2" is set for job A2, the motion transition is smoothed with the lower
velocity of both jobs and the rounding clearance d1. The circular motion is determined with
"CircMode = 1" via the radius r and the end point (x2|y2|z2). As soon as the target position is
reached, the completion of the A2 job is signaled via "Done_2".

MC_MoveCircularRelative V5
MC_MoveCircularRelative: Relative positioning of kinematics with circular path motion V5
Description
With the Motion Control instruction "MC_MoveCircularRelative", you can move a kinematics
with a circular motion to a relative position. Cartesian orientation is also used relative.

Programación del PLC
Manual de programación y manejo, 11/2019

3237

Instrucciones
4.1 Instrucciones
With the "CircMode" parameter, you specify the definition of the circular path:
● Via an intermediate point and the end point
With the "AuxPoint" parameter, you specify an intermediate point on the circular path, via
which the end point specified in the "EndPoint" parameter is to be approached. The circular
path is calculated via the starting, intermediate and end points. Only circular paths less than
360° can be traversed here.
● Via the circle center and angle in a main plane
With the "AuxPoint" parameter, you define the center point of the circle. The end point of the
circular path is calculated via the angle specified in the parameter "Arc". With the
"PathChoice" parameter, you specify whether the circular path is to be traversed in positive
or negative direction of rotation. With the "CirclePlane" parameter, you specify the main
plane in which the circular path is to be traversed.
● Via the circle radius and the end point in a main plane
With the "EndPoint" parameter, you specify the end point and with "Radius" the radius of the
circular path. Depending on the radius, up to four possible circular paths can occur in the
plane defined with the "CirclePlane" parameter. With the "PathChoice" parameter, you
specify which of these circular paths is to be moved.
Dynamic behavior during Kinematics motion is defined with the parameters "Velocity",
"Acceleration", "Deceleration" and "Jerk". For the dynamics of the orientation motion, the
default values are configured in "Technology object > Configuration > Extended parameters >
Dynamic defaults".
● <TO>.DynamicDefaults.Orientation.Velocity
● <TO>.DynamicDefaults.Orientation.Acceleration
● <TO>.DynamicDefaults.Orientation.Deceleration
● <TO>.DynamicDefaults.Orientation.Jerk

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● The interconnected axes are enabled.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.

Override response
With the "TransitionParameter[1]" parameter, you determine the distance from the target point
of the previous motion job at which the new motion job is superimposed.
The override response for "MC_MoveCircularRelative" jobs is described in section "Override
response V5: Kinematics motion commands (Página 3283)".

3238

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction
"MC_MoveCircularRelative":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

CircMode

INPUT

DINT

0

AuxPoint

INPUT

ARRAY [1..3] OF
LREAL

-

Start job with a positive edge

Definition of circular path
0

The position vector specified at the
"AuxPoint" parameter defines a point
on the circular path.

1

The position specified at the parame‐
ter "AuxPoint" defines the circle cen‐
ter.

2

The "Radius" and "EndPoint" parame‐
ters define the circle segment.

Circular path auxiliary point
● When "CircMode" = 0: Point on the circular
path
● When "CircMode" = 1: Center point of the
circular path
● When "CircMode" = 2: Not relevant
Coordinate relative to the starting point

AuxPoint[1]

INPUT

LREAL

0.0

x-coordinate

AuxPoint[2]

INPUT

LREAL

0.0

y-coordinate

AuxPoint[3]

INPUT

LREAL

0.0

z-coordinate

INPUT

ARRAY [1..4] OF
LREAL

-

Target position relative to the starting point in the
specified reference system

EndPoint

When "CircMode" = 1: Only EndPoint[4] rele‐
vant (orientation axis)
EndPoint[1]

INPUT

LREAL

0.0

x-coordinate

EndPoint[2]

INPUT

LREAL

0.0

y-coordinate

EndPoint[3]

INPUT

LREAL

0.0

z-coordinate

EndPoint[4]

INPUT

LREAL

0.0

A-coordinate

INPUT

DINT

0

PathChoice

Orientation of the circular path
When "CircMode" = 0:
Not relevant
When "CircMode" = 1:
0

Positive direction of rotation

1

Negative direction of rotation

When "CircMode" = 2:

Programación del PLC
Manual de programación y manejo, 11/2019

0

Shorter positive circular path

1

Shorter negative circular path

2

Longer positive circular path

3

Longer negative circular path

3239

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

CirclePlane

INPUT

DINT

0

Main plane of the circular path
When "CircMode" = 0:
Not relevant
When "CircMode" = 1 and 2:

Radius

INPUT

LREAL

0.0

Arc

INPUT

LREAL

0.0

Velocity

INPUT

LREAL

-1.0

0

x-z plane

1

y-z plane

2

x-y plane

When "CircMode" = 2:
Radius of the circular movement
When "CircMode" = 1:
Angle of the circular movement
Velocity
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The velocity configured in "Techno‐
logy object > Configuration > Exten‐
ded parameters > Dynamic defaults"
is used.
(<TO>.DynamicDefaults.Path.Velo‐
city)

Acceleration

INPUT

LREAL

-1.0

Acceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The velocity configured in "Techno‐
logy object > Configuration > Exten‐
ded parameters > Dynamic defaults"
is used.
(<TO>.DynamicDefaults.Path.Acce‐
leration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The velocity configured in "Techno‐
logy object > Configuration > Exten‐
ded parameters > Dynamic defaults"
is used.
(<TO>.DynamicDefaults.Path.Dece‐
leration)

3240

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

Jerk

INPUT

LREAL

-1.0

Jerk
> 0.0

The specified value is used.

= 0.0

No jerk limitation

< 0.0

The velocity configured in "Techno‐
logy object > Configuration > Exten‐
ded parameters > Dynamic defaults"
is used.
(<TO>.DynamicDefaults.Path.Jerk)

CoordSystem

BufferMode

INPUT

INPUT

DINT

DINT

0

1

Reference system
0

World coordinate system (WCS)

1

Object coordinate system 1 (OCS1)

2

Object coordinate system 2 (OCS2)

3

Object coordinate system 3 (OCS3)

Motion transition
1

Append motion
The active motion sequence is com‐
pleted and the kinematics comes to a
standstill. The movement of this job is
then executed.

2

Smooth with the lower velocity
When the blending distance is rea‐
ched, the current motion is blended
with the motion of this job. The lower
velocity of the two jobs is used here.

5

Smooth with the higher velocity
When the blending distance is rea‐
ched, the current motion is blended
with the motion of this job. The higher
velocity of the two jobs is used here.

TransitionParameter

INPUT

TransitionParameter[1] INPUT

ARRAY [1..5] OF
LREAL
LREAL

Transition parameter
-1.0

Rounding clearance
≥ 0.0

The specified value is used.

< 0.0

The maximum possible rounding clea‐
rance is used.

TransitionParameter[2] INPUT

LREAL

-

Reserved

TransitionParameter[3] INPUT

LREAL

-

Reserved

TransitionParameter[4] INPUT

LREAL

-

Reserved

TransitionParameter[5] INPUT

LREAL

-

Reserved

Programación del PLC
Manual de programación y manejo, 11/2019

3241

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

DynamicAdaption

INPUT

DINT

-1

Dynamic adaptation
<0

The configured setting in "Technology
object > Configuration > Extended pa‐
rameters > Dynamic" is used.
(<TO>.DynamicDefaults.DynamicA‐
daption)

0

Without dynamic adaption

1

Dynamic adaptation with segmenta‐
tion of the path

2

Dynamic adaptation without segmen‐
tation of the path

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Active

OUTPUT BOOL

FALSE

TRUE

The setpoints are calculated.

FALSE

When "Busy" = TRUE:
Job is waiting. (Typical: A preceding
job is still active.)

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job
during execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing
the job. The job is rejected. The cause
of the error can be found in the "Erro‐
rID" parameter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

RemainingDistance

OUTPUT LREAL

-1.0

Distance-to-go of the current job

Consulte también
Override response V5: Kinematics motion commands (Página 3283)

MC_MoveCircularRelative: Function chart V5
Function chart: Relative positioning of kinematics with circular path motion
In the function chart, sections A1 and A2 of the following kinematics motion are viewed:
[_\_]_D
$

$

\:&6

U
]:&6

[:&6
[ _\_] _D

3242

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

72B.LQB
([HB
[_\_]_D


$

$

0&B0RYH/LQHDU5HODWLYH

0&B0RYH&LUFXODU5HODWLYH

$[HV*URXS

'RQH

'RQHB

72B.LQB

([HFXWH

%XV\

%XV\B

([HB

'LVWDQFH

$FWLYH

$FWLYHB

9HORFLW\

'RQH

'RQHB

([HFXWH

%XV\

%XV\B

$FWLYH

$FWLYHB

&LUF0RGH
$X[3RLQW

&RPPDQG$ERUWHG

&RPPDQG$ERUWHG

$FFHOHUDWLRQ

(UURU

[ _\_] _D 

'HFHOHUDWLRQ

(UURU,'



3DWK&KRLFH

(UURU,'

5HPDLQLQJ'LVWDQFH



&LUFOH3ODQH

5HPDLQLQJ'LVWDQFH

U

5DGLXV

-HUN
'LUHFWLRQ$


&RRUG6\VWHP



%XIIHU0RGH





$[HV*URXS

(QG3RLQW

(UURU

$UF


9HORFLW\

7UDQVLWLRQ3DUDPHWHU

$FFHOHUDWLRQ

'\QDPLF$GDSWLRQ

'HFHOHUDWLRQ
-HUN


&RRUG6\VWHP



%XIIHU0RGH

G1

7UDQVLWLRQ3DUDPHWHU
'\QDPLF$GDSWLRQ



$





([HB




%XV\B




$FWLYHB




'RQHB



W
W
W
W

$


([HB




%XV\B




$FWLYHB




'RQHB



W
W
W
W


72B.LQB
6WDWXV3DWK
9HORFLW\




W

The kinematics is moved with an "MC_MoveLinearRelative" job (A1).

Programación del PLC
Manual de programación y manejo, 11/2019

3243

Instrucciones
4.1 Instrucciones
At time ① an "MC_MoveCircularRelative" job (A2) is initiated. As the
"MC_MoveCircularRelative" job has no overdrive effect, the job A2 is arranged in the job
sequence.
At the point in time ②, completion of the A1 job is signaled via "Done_1" and the job A2 is
started. As "BufferMode = 2" is set for job A2, the motion transition is smoothed with the lower
velocity of both jobs and the rounding clearance d1. The circular motion is determined with
"CircMode = 2" via the radius r and the end point (x2|y2|z2). As soon as the target position is
reached, the completion of the A2 job is signaled via "Done_2".

MC_MoveDirectAbsolute V5
MC_MoveDirectAbsolute: Absolute movement of kinematics with synchronous "point-to-point" motion
V5
Description
With the Motion Control instruction "MC_MoveDirectAbsolute", you can move the kinematics
with a synchronous "point-to-point" motion (sPTP motion) to absolute positions. All kinematics
axes are moved at the same time. The axes start the movement at the same time and reach the
target position at the same time.
The movement path of the tool center point (TCP) results from the dynamic values of the axes.
The kinematics axis with the longest movement time determines the movement time of the
motion. The position of the TCP results from the positions of the kinematics axes.
You can also move the orientation of the kinematics to an absolute position. You specify this
with the "PositionMode" parameter.
Dynamic behavior during movement is defined by means of factors with the parameters
"VelocityFactor", "AccelerationFactor", "DecelerationFactor" and "JerkFactor". The factors
relate as percentages to the maximum dynamic values of the corresponding axis configured in
"Technology object > Configuration > Extended parameters > Dynamic limits".

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● The interconnected axes are enabled.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.

Override response
With the "TransitionParameter[1]" parameter, you determine the distance from the target point
of the previous motion job at which the new motion job is superimposed.

3244

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
The override response for "MC_MoveDirectAbsolute" jobs is described in section "Override
response V5: Kinematics motion commands (Página 3283)".

Parameters
The following table shows the parameters of Motion Control instruction
"MC_MoveDirectAbsolute":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Position

INPUT

ARRAY [1..4] OF
LREAL

-

When "CoordSystem" = 100:

Start job with a positive edge

Absolute axis positions
When "CoordSystem" = 0, 1, 2 or 3 and "Posi‐
tionMode" = 1:
Absolute target coordinates in the specified re‐
ference system
When "CoordSystem" = 0, 1, 2 or 3 and "Posi‐
tionMode" = 2:
Absolute Cartesian position and relative Carte‐
sian orientation

Position[1]

INPUT

LREAL

0.0

When "CoordSystem" = 100 (MCS):
Position of the axis A1
When "CoordSystem" = 0, 1, 2 or 3 and "Posi‐
tionMode" = 1 or 2:
x-coordinate

Position[2]

INPUT

LREAL

0.0

When "CoordSystem" = 100 (MCS):
Position of the axis A2
When "CoordSystem" = 0, 1, 2 or 3 and "Posi‐
tionMode" = 1 or 2:
y-coordinate

Position[3]

INPUT

LREAL

0.0

When "CoordSystem" = 100 (MCS):
Position of the axis A3
When "CoordSystem" = 0, 1, 2 or 3 and "Posi‐
tionMode" = 1 or 2:
z-coordinate

Position[4]

INPUT

LREAL

0.0

When "CoordSystem" = 100 (MCS):
Position of orientation axis A4
When "CoordSystem" = 0, 1, 2 or 3 and "Posi‐
tionMode" = 1 or 2:
A-coordinate

Programación del PLC
Manual de programación y manejo, 11/2019

3245

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

VelocityFactor

INPUT

LREAL

-1.0

Factor for the velocity of axis movements in re‐
lation to the respective maximum velocity of the
axes ("DynamicLimits.MaxVelocity")
Permitted value range: -1.0 < Factor ≤ 1.0

AccelerationFactor

INPUT

LREAL

-1.0

< 0.0

The velocity factor configured in
"Technology object > Configuration >
Extended parameters > Dynamic de‐
faults" is used. (<TO>.DynamicDe‐
faults.MoveDirect.VelocityFactor)

> 0.0

The specified factor is used.

1.0

The maximum velocity of the axes is
used.

Factor for the acceleration of axis movements in
relation to the respective maximum acceleration
of the axis ("DynamicLimits.MaxAcceleration")
Permitted value range: -1.0 < Factor ≤ 1.0

DecelerationFactor

INPUT

LREAL

-1.0

< 0.0

The acceleration factor configured in
"Technology object > Configuration >
Parameter view > DynamicDefaults >
MoveDirect" is used. (<TO>.Dynamic‐
Defaults.MoveDirect.Acceleration‐
Factor)

> 0.0

The specified factor is used.

1.0

The maximum acceleration of the
axes is used.

Factor for the deceleration of the axis move‐
ments in relation to the respective maximum de‐
celeration of the axis ("DynamicLimits.MaxDe‐
celeration")
Permitted value range: -1.0 < Factor ≤ 1.0

3246

< 0.0

The deceleration factor configured in
"Technology object > Configuration >
Parameter view > DynamicDefaults >
MoveDirect" is used. (<TO>.Dynamic‐
Defaults.MoveDirect.Deceleration‐
Factor)

> 0.0

The specified factor is used.

1.0

The maximum deceleration of the
axes is used.

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

JerkFactor

INPUT

LREAL

-1.0

Factor for the jerk of axis movements in relation
to the respective maximum jerk of the axis
("DynamicLimits.MaxJerk")
Permitted value range: -1.0 <Factor ≤ 0.0 and
0.1 < Factor ≤ 0.9

LinkConstellation

CoordSystem

BufferMode

INPUT

INPUT

INPUT

DWORD

DINT

DINT

< 0.0

The jerk configured in "Technology
object > Configuration > Parameter
view > DynamicDefaults > MoveDi‐
rect" is used. (<TO>.DynamicDe‐
faults.MoveDirect.JerkFactor)

0.0

The maximum jerk of the axes is used.

> 0.1

The specified factor is used.

16#FFFF
FFFF

Target joint position space

0

Reference system

1

#FFFF
FFFF

Keep current joint position space

0

World coordinate system (WCS)

1

Object coordinate system 1 (OCS1)

2

Object coordinate system 2 (OCS2)

3

Object coordinate system 3 (OCS3)

100

Machine coordinate system (MCS)

Motion transition
1

Append motion
The active motion sequence is com‐
pleted and the kinematics comes to a
standstill. The movement of this job is
then executed.

2

Smooth with the lower velocity.
When the blending distance is rea‐
ched, the current motion is blended
with the motion of this job. The lower
velocity of the two jobs is used here.

5

Smooth with the higher velocity
When the blending distance is rea‐
ched, the current motion is blended
with the motion of this job. The higher
velocity of the two jobs is used here.

TransitionParameter

INPUT

Programación del PLC
Manual de programación y manejo, 11/2019

ARRAY [1..5] OF
LREAL

-

Rounding clearance

3247

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

TransitionParameter[1] INPUT

Data type

Default
value

Description

LREAL

-1.0

Rounding clearance
≥ 0.0

The specified value is used.

< 0.0

The maximum possible rounding clea‐
rance is used.

TransitionParameter[2] INPUT

LREAL

-

Reserved

TransitionParameter[3] INPUT

LREAL

-

Reserved

TransitionParameter[4] INPUT

LREAL

-

Reserved

TransitionParameter[5] INPUT

LREAL

-

Reserved

DINT

1

Use of the "Position" parameter

PositionMode

INPUT

DirectionA

INPUT

DINT

3

1

Absolute Cartesian position and abso‐
lute Cartesian orientation

2

Absolute Cartesian position and rela‐
tive Cartesian orientation

When "PositionMode" = 1:
Motion direction of the Cartesian orientation

ExecutionTimeStatus

OUTPUT LREAL

0.0

1

Positive direction

2

Negative direction

3

Shortest distance

Display of execution progress
Value range: 0.0 … 1.0
The job is completed with "ExecutionTimeSta‐
tus" = 1.0.

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Active

OUTPUT BOOL

FALSE

TRUE

The setpoints are calculated.

FALSE

When "Busy" = TRUE:
Job is waiting. (Typical: A preceding
job is still active.)

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job
during execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing
the job. The job is rejected. The cause
of the error can be found in the "Erro‐
rID" parameter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
Override response V5: Kinematics motion commands (Página 3283)

3248

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_MoveDirectAbsolute V5: Function chart
Function chart: Absolute movement of kinematics with synchronous "point-to-point" motion

72B.LQB

$

$

0&B0RYH'LUHFW$EVROXWH

0&B0RYH'LUHFW$EVROXWH

$[HV*URXS

([HFXWLRQ7LPH6WDWXV



72B.LQB

$[HV*URXS

([HFXWLRQ7LPH6WDWXV



([HB

([HFXWH

'RQH

'RQHB

([HB

([HFXWH

'RQH

'RQHB

[\]D

3RVLWLRQ

%XV\

%XV\B

[ \] D 

3RVLWLRQ

%XV\

%XV\B

$FWLYH

$FWLYHB

$FWLYH

$FWLYHB

ದ

9HORFLW\)DFWRU

ದ

$FFHOHUDWLRQ)DFWRU

ದ

'HFHOHUDWLRQ)DFWRU

ದ

-HUN)DFWRU

ದ

9HORFLW\)DFWRU

&RPPDQG$ERUWHG

ದ

$FFHOHUDWLRQ)DFWRU

(UURU

ದ

'HFHOHUDWLRQ)DFWRU

(UURU,'

ದ

-HUN)DFWRU

/LQN&RQVWHOODWLRQ

7UDQVLWLRQ3DUDPHWHU


3RVLWLRQ0RGH
'LUHFWLRQ$

Programación del PLC
Manual de programación y manejo, 11/2019

(UURU
(UURU,'

/LQN&RQVWHOODWLRQ

&RRUG6\VWHP
%XIIHUPRGH

&RPPDQG$ERUWHG

&RRUG6\VWHP




%XIIHUPRGH
7UDQVLWLRQ3DUDPHWHU
3RVLWLRQ0RGH
'LUHFWLRQ$

3249

Instrucciones
4.1 Instrucciones


$
([HB
%XV\B
$FWLYHB
'RQHB
([HFXWLRQ
7LPH6WDWXV






W




W




W




W




W

$
([HB




%XV\B

W




$FWLYHB



'RQHB



([HFXWLRQ
7LPH6WDWXV



72B.LQB
$[LVBB9HORFLW\

W



W



W



W





72B.LQB
$[LVBB9HORFLW\

W





W

The kinematics is moved with an "MC_MoveDirectAbsolute" job (A1).
At time ①, an additional "MC_MoveDirectAbsolute" job (A2) is initiated. As the
"MC_MoveDirectAbsolute" jobs have no override effect on one another, the job A2 is arranged
in the job sequence.
At time ②, completion of the job A1 is signaled via "Done_1" and the job A2 is started. As
"BufferMode" = 2 is set for job A2, the motion transition is blended with the lower velocity of the
two jobs. As soon as the target position is reached, the completion of the A2 job is signaled via
"Done_2".

3250

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_MoveDirectRelative V5
MC_MoveDirectRelative: Relative movement of kinematics with synchronous "point-to-point" motion V5
Description
With the Motion Control instruction "MC_MoveDirectRelative", you can move the kinematics
with a synchronous "point-to-point" motion to relative positions. All kinematics axes are moved
at the same time. The axes start the movement at the same time and reach the target position
at the same time.
The movement path of the tool center point (TCP) results from the dynamic values of the axes.
The kinematics axis with the longest movement time determines the movement time of the
motion. The position of the TCP results from the positions of the kinematics axes.
You can also move the orientation of the kinematics to a relative position.
Dynamic behavior during movement is defined by means of factors with the parameters
"VelocityFactor", "AccelerationFactor", "DecelerationFactor" and "JerkFactor". The factors
relate as percentages to the maximum dynamic values of the corresponding axis configured in
"Technology object > Configuration > Extended parameters > Dynamic limits".

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● The interconnected axes are enabled.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.

Override response
With the "TransitionParameter[1]" parameter, you determine the distance from the target point
of the previous motion job at which the new motion job is superimposed.
The override response for "MC_MoveDirectRelative" jobs is described in section "Override
response V5: Kinematics motion commands (Página 3283)".

Parameters
The following table shows the parameters of the Motion Control instruction:
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Programación del PLC
Manual de programación y manejo, 11/2019

Start job with a positive edge

3251

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

Distance

INPUT

ARRAY [1..4] OF
LREAL

-

When "CoordSystem" = 100:
Relative axis positions
When "CoordSystem" = 0, 1, 2 or 3:
Relative target coordinates in the specified refe‐
rence system

Distance[1]

INPUT

LREAL

0.0

When "CoordSystem" = 100:
Relative position of the axis A1
When "CoordSystem" = 0, 1, 2 or 3:
x-coordinate

Distance[2]

INPUT

LREAL

0.0

When "CoordSystem" = 100:
Relative position of the axis A2
When "CoordSystem" = 0, 1, 2 or 3:
y-coordinate

Distance[3]

INPUT

LREAL

0.0

When "CoordSystem" = 100:
Relative position of the axis A3
When "CoordSystem" = 0, 1, 2 or 3:
z-coordinate

Distance[4]

INPUT

LREAL

0.0

When "CoordSystem" = 100:
Relative position of the axis A4
When "CoordSystem" = 0, 1, 2 or 3:
A-coordinate

VelocityFactor

INPUT

LREAL

-1.0

Factor for the velocity of axis movements in re‐
lation to the respective maximum velocity of the
axes ("DynamicLimits.MaxVelocity")
Permitted value range: -1.0 < Factor ≤ 1.0

AccelerationFactor

INPUT

LREAL

-1.0

< 0.0

The velocity factor configured in
"Technology object > Configuration >
Parameter view > DynamicDefaults >
MoveDirect" is used. (<TO>.Dynamic‐
Defaults.MoveDirect.VelocityFactor)

> 0.0

The specified factor is used.

1.0

The maximum velocity of the axes is
used.

Factor for the acceleration of axis movements in
relation to the respective maximum acceleration
of the axis ("DynamicLimits.MaxAcceleration")
Permitted value range: -1.0 < Factor ≤ 1.0

3252

< 0.0

The acceleration factor configured in
"Technology object > Configuration >
Parameter view > DynamicDefaults >
MoveDirect" is used. (<TO>.Dynamic‐
Defaults.MoveDirect.Acceleration‐
Factor)

> 0.0

The specified factor is used.

1.0

The maximum acceleration of the
axes is used.

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

DecelerationFactor

INPUT

LREAL

-1.0

Factor for the deceleration of the axis move‐
ments in relation to the respective maximum de‐
celeration of the axis ("DynamicLimits.MaxDe‐
celeration")
Permitted value range: -1.0 < Factor ≤ 1.0

JerkFactor

INPUT

LREAL

-1.0

< 0.0

The deceleration factor configured in
"Technology object > Configuration >
Parameter view > DynamicDefaults >
MoveDirect" is used. (<TO>.Dynamic‐
Defaults.MoveDirect.Deceleration‐
Factor)

> 0.0

The specified factor is used.

1.0

The maximum deceleration of the
axes is used.

Factor for the jerk of axis movements in relation
to the respective maximum jerk of the axis
("DynamicLimits.MaxJerk")
Permitted value range: -1.0 <Factor ≤ 0.0 and
0.1 < Factor ≤ 0.9

LinkConstellation

CoordSystem

INPUT

INPUT

Programación del PLC
Manual de programación y manejo, 11/2019

DWORD

DINT

16#FFFF
FFFF
0

< 0.0

The jerk configured in "Technology
object > Configuration > Parameter
view > DynamicDefaults > MoveDi‐
rect" is used. (<TO>.DynamicDe‐
faults.MoveDirect.JerkFactor)

0.0

The maximum jerk of the axes is used.

> 0.1

The specified factor is used.

Target joint position space
#FFFF
FFFF

Keep current joint position space

Reference system
0

World coordinate system (WCS)

1

Object coordinate system 1 (OCS1)

2

Object coordinate system 2 (OCS2)

3

Object coordinate system 3 (OCS3)

100

Machine coordinate system (MCS)

3253

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

BufferMode

INPUT

DINT

1

Motion transition
1

Append motion
The active motion sequence is com‐
pleted and the kinematics comes to a
standstill. The movement of this job is
then executed.

2

Smooth with the lower velocity
When the blending distance is rea‐
ched, the current motion is blended
with the motion of this job. The lower
velocity of the two jobs is used here.

5

Smooth with the higher velocity
When the blending distance is rea‐
ched, the current motion is blended
with the motion of this job. The higher
velocity of the two jobs is used here.

TransitionParameter

INPUT

TransitionParameter[1] INPUT

ARRAY [1..5] OF
LREAL

-

Rounding clearance

LREAL

-1.0

Rounding clearance
≥ 0.0

The specified value is used.

< 0.0

The maximum possible rounding clea‐
rance is used.

TransitionParameter[2] INPUT

LREAL

-

Reserved

TransitionParameter[3] INPUT

LREAL

-

Reserved

TransitionParameter[4] INPUT

LREAL

-

Reserved

TransitionParameter[5] INPUT

LREAL

-

Reserved

ExecutionTimeStatus

OUTPUT LREAL

0.0

Display of execution progress
Value range: 0.0 … 1.0
The job is completed with "ExecutionTimeSta‐
tus" = 1.0.
0.0

The job has not yet been executed.

> 0.0

The job is being executed.

1.0

The job was executed.

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Active

OUTPUT BOOL

FALSE

TRUE

The setpoints are calculated.

FALSE

When "Busy" = TRUE:
Job is waiting. (Typical: A preceding
job is still active.)

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job
during execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing
the job. The job is rejected. The cause
of the error can be found in the "Erro‐
rID" parameter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

3254

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Consulte también
Override response V5: Kinematics motion commands (Página 3283)

MC_MoveDirectRelative V5: Function chart
Function chart: Relative movement of kinematics with synchronous "point-to-point" motion

72B.LQB
([HB
[\]D

$

$

0&B0RYH'LUHFW5HODWLYH

0&B0RYH'LUHFW5HODWLYH

$[HV*URXS

([HFXWLRQ7LPH6WDWXV



72B.LQB

([HFXWH

'RQH

'RQHB

([HB

'LVWDQFH

%XV\

%XV\B

[ \] D 

$FWLYH

$FWLYHB

ದ

9HORFLW\)DFWRU

ದ

$FFHOHUDWLRQ)DFWRU

ದ

'HFHOHUDWLRQ)DFWRU

ದ

-HUN)DFWRU

$[HV*URXS

([HFXWLRQ7LPH6WDWXV

'LVWDQFH

%XV\

%XV\B

$FWLYH

$FWLYHB

9HORFLW\)DFWRU

&RPPDQG$ERUWHG

ದ

$FFHOHUDWLRQ)DFWRU

(UURU

ದ

'HFHOHUDWLRQ)DFWRU

(UURU,'

ದ

-HUN)DFWRU

7UDQVLWLRQ3DUDPHWHU

Programación del PLC
Manual de programación y manejo, 11/2019

&RPPDQG$ERUWHG
(UURU
(UURU,2

/LQN&RQVWHOODWLRQ

&RRUG6\VWHP
%XIIHUPRGH

'RQHB

'RQH

ದ

/LQN&RQVWHOODWLRQ



([HFXWH

&RRUG6\VWHP



%XIIHUPRGH
7UDQVLWLRQ3DUDPHWHU

3255

Instrucciones
4.1 Instrucciones


$
([HB
%XV\B
$FWLYHB
'RQHB
([HFXWLRQ
7LPH6WDWXV






W




W




W




W




W

$
([HB




%XV\B

W




$FWLYHB



'RQHB



([HFXWLRQ
7LPH6WDWXV



72B.LQB
$[LVBB9HORFLW\

W



W



W



W





72B.LQB
$[LVBB9HORFLW\

W





W

The kinematics is moved with an "MC_MoveDirectRelative" job (A1).
At time ①, an additional "MC_MoveDirectRelative" job (A2) is initiated. As the
"MC_MoveDirectRelative" jobs have no override effect on one another, the job A2 is arranged
in the job sequence.
At time ②, completion of the job A1 is signaled via "Done_1" and the job A2 is started. As
"BufferMode" = 5 is set for job A2, the motion transition is blended with the higher velocity of the
two jobs. As soon as the target position is reached, the completion of the A2 job is signaled via
"Done_2".

3256

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_TrackConveyorBelt V5
MC_TrackConveyorBelt: Start conveyor tracking V5
Description
With the motion control instruction "MC_TrackConveyorBelt", an OCS is assigned via the
parameter "ConveyorBelt" to a leading value capable technology object which represents the
conveyor belt. The OCS is assigned to a known belt position.
The OCS is assigned with the OCS frame ("ConveyorBeltOrigin") and the product position
("InitialObjectPosition") to a product on the conveyor. The OCS is then coupled with the product
in the x-direction.
With the next kinematics motion job, the kinematics moves to the specified position in the OCS
and couples with the conveyor.

Applies to
● Kinematics

Requirement
● The technology objects have been configured correctly.
● You have selected a kinematics type that can execute path motion jobs.
● There is no active single axis job (e.g. "MC_MoveVelocity") on the interconnected axes.

Override response
● A "MC_SetOcsFrame" job cancels the tracking of the OCS with a leading value-capable
technology object.
● The override response for "MC_TrackConveyorBelt" jobs is described in section "Override
response V5: Kinematics motion commands (Página 3283)".

Programación del PLC
Manual de programación y manejo, 11/2019

3257

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction
"MC_TrackConveyorBelt":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Kinematics technology object

ConveyorBelt

INPUT

TO_PositioningAxis

-

Leading value capable technology object to which
the OCS is coupled:

TO_SynchronousAxis
TO_ExternalEncoder

Leading value capable technology objects are:

TO_LeadingAxis‐
Proxy

● Synchronous axis

● Positioning axis
● External encoder
● Leading axis proxy

Execute

INPUT

BOOL

FALSE

TRUE

Start job with a positive edge

ConveyorBeltOrigin

INPUT

TO_Struct_Kinema‐
tics_Frame

-

OCS frame for conveyor reference position

InitialObjectPosition

INPUT

TO_Struct_Kinema‐
tics_Frame

0.0

Position difference between OCS reference posi‐
tion and conveyor position

CoordSystem

INPUT

DINT

1

Number of the tracked OCS
1

OCS1

2

OCS2

3

OCS3

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
Override response V5: Kinematics motion commands (Página 3283)

3258

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_TrackConveyorBelt V5: Function chart
Function chart: Start conveyor tracking

72B
([HB

$

$

0&B0HDVXULQJLQSXW

0&B7UDFN&RQYH\RU%HOW

0HDVXULQJLQSXW

'RQH

([HFXWH

%XV\



0RGH




0HDVXULQJ5DQJH
6WDUW3RVLWLRQ



(QG3RVLWLRQ

'RQHB

72B.LQB
72B%HOWB

&RPPDQG$ERUWHG

([HB

(UURU

&219B)5$0(

(UURU,'
0HDVXUHG9DOXH

&219B326[

0HDVXUHG9DOXH

Programación del PLC
Manual de programación y manejo, 11/2019

09



$[HV*URXS

'RQH

'RQHB

&RQYH\RU%HOW

%XV\

%XV\B

([HFXWH

&RPPDQG$ERUWHG

&RQYH\RU%HOW2ULJLQ
,QLWLDO2EMHFW3RVLWLRQ

(UURU
(UURU,'

&RRUG6\VWHP

3259

Instrucciones
4.1 Instrucciones

$







'RQHB



W

$


([HB




%XV\B




'RQHB



W
W
W

09
72B%HOWBB3RVLWLRQ

09
09


W

09
09

&219B326[

09


W

72B.LQB!
6WDWXV&RQYH\RU>@
2EMHFW3RVLWLRQ


72B.LQB!
6WDWXV&RQYH\RU>@
7UDFNLQJ6WDWH

W






W

A "MC_MeasuringInput" job (A1) is used to record the position of a product at the time ①. The
recorded position is reported via "Done_1".
With a "MC_TrackConveyorBelt" job (A2), an OCS is assigned via the parameter
"ConveyorBelt" to a leading value capable technology object, which represents the conveyor
belt. The OCS is assigned to a known conveyor position. The OCS is assigned with the OCS

3260

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
frame ("ConveyorBeltOrigin") and the product position ("InitialObjectPosition") to a product on
the conveyor. The OCS is then coupled with the product in the x-direction.
The status of conveyor tracking ("<TO_Kin_1>.StatusConveyor[1].TrackingState") changes
from 0 to 1. When the kinematics moves to the product position, the conveyor tracking status
changes from 1 to 2. When the kinematics follow the product position, the status of the belt
tracking changes from 2 to 3.
At the times ② and ③, additional products are recorded on the conveyor and the OCS is
reassigned with additional "MC_TrackConveyorBelt" jobs.

Zones
MC_DefineWorkspaceZone V5
MC_DefineWorkspaceZone: Define workspace zone V5
Description
With the Motion Control instruction "MC_DefineWorkspaceZone", you define a workspace
zone in relation to the world coordinates system or an object coordinates system. The zones
(<TO>.WorkspaceZone[1..10]) defined under "Technology object > Configuration > Extended
parameters > Zones" are not hereby changed are available again after a restart of the
technology object. The "<TO>.StatusWorkspaceZone" tag of the technology object data block
contains the currently effective workspace zones.
The "MC_DefineWorkspaceZone" job interjects itself in the job sequence on the Kinematics
technology object and therefore effective for the following motion jobs.
With the "GeometryType" and "GeometryParameter" parameters, you specify the zone
geometry type and zone size. You use the "ZoneType" parameter to define a workspace zone
as work zone, blocked zone or signal zone. You can define up to ten workspace zones. While
several of the defined blocked zones and signal zones can be active simultaneously, only one
area of the defined work zones can be active.

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.

Override response
● The override response for "MC_DefineWorkspaceZone" jobs is described in section
"Override response V5: Kinematics motion commands (Página 3283)".

Programación del PLC
Manual de programación y manejo, 11/2019

3261

Instrucciones
4.1 Instrucciones

Parameter
The following table shows the parameters of Motion Control instruction
"MC_DefineWorkspaceZone":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

ZoneType

INPUT

DINT

0

Zone type

ZoneNumber

ReferenceSystem

INPUT

INPUT

DINT

DINT

1

0

The job is accepted in the job sequen‐
ce.

0

Blocked zone

1

Work zone

2

Signal zone

Zone number
1

Zone 1

2

Zone 2

3

Zone 3

4

Zone 4

5

Zone 5

6

Zone 6

7

Zone 7

8

Zone 8

9

Zone 9

10

Zone 10

Reference system
0

World coordinate system (WCS)

1

Object coordinate system 1 (OCS1)

2

Object coordinate system 2 (OCS2)

3

Object coordinate system 3 (OCS3)

Frame

INPUT

TO_Struct_Kinema‐
tics_Frame

-

Shifting of the zone zero point in relation to the
reference system

GeometryType

INPUT

DINT

0

Zone geometry type

GeometryParameter

INPUT

GeometryParameter[1] INPUT

0

Cuboid

1

Sphere

2

Cylinder

ARRAY [1..3] OF
LREAL

-

Geometric parameters

LREAL

0.0

Length x
When "GeometryType" = 1 or 2:
Radius

GeometryParameter[2] INPUT

LREAL

0.0

Length y
When "GeometryType" = 2:
Height

GeometryParameter[3] INPUT
Done

3262

LREAL

OUTPUT BOOL

0.0

Length z

FALSE

TRUE

Job is completed.

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Busy

Data type

Default
value

Description

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job
during execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing
the job. The job is rejected. The cause
of the error can be found in the "Erro‐
rID" parameter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
MC_SetWorkspaceZoneActive: Activate workspace zone V5 (Página 3265)
MC_SetWorkspaceZoneInactive: Deactivate workspace zone V5 (Página 3267)
Override response V5: Kinematics motion commands (Página 3283)

MC_DefineKinematicsZone V5
MC_DefineKinematicsZone: Define kinematics zone V5
Description
With the Motion Control instruction "MC_DefineKinematicsZone", you define a kinematics zone
in relation to the tool and flange coordinate system. The zones (<TO>.KinematicsZone[2..10])
defined under "Technology object > Configuration > Extended parameters > Zones" are not
hereby changed are available again after a restart of the technology object. The
"<TO>.StatusKinematicsZone" tag of the technology object data block contains the currently
effective kinematics zones.
The "MC_DefineKinematicsZone" job is added to the queue of the job sequence and is
therefore effective for subsequent motion jobs.
With the "GeometryType" and "GeometryParameter" parameters, you specify the zone
geometry type and size. You can define up to nine kinematics zones. Kinematics zone 1 is the
tool center point (TCP) and cannot be changed.

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.

Programación del PLC
Manual de programación y manejo, 11/2019

3263

Instrucciones
4.1 Instrucciones

Override response
● The override response for "MC_DefineKinematicsZone" jobs is described in section
"Override response V5: Kinematics motion commands (Página 3283)".

Parameters
The following table shows the parameters of Motion Control instruction
"MC_DefineKinematicsZone":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

ZoneNumber

INPUT

DINT

2

ReferenceSystem

INPUT

DINT

0

Frame

INPUT

TO_Struct_Kinema‐
tics_Frame

-

GeometryType

INPUT

DINT

0

GeometryParameter

INPUT

GeometryParameter[1] INPUT

The job is accepted in the job sequen‐
ce.

Zone number
2

Zone 2

3

Zone 3

4

Zone 4

5

Zone 5

6

Zone 6

7

Zone 7

8

Zone 8

9

Zone 9

10

Zone 10

Reference system
0

Flange coordinate system (FCS)

1

Tool coordinate system (TCS)

Shifting of the zone zero point in relation to the
reference system
Zone geometry type
0

Cuboid

1

Sphere

2

Cylinder

ARRAY [1..3] OF
LREAL

-

Geometric parameters

LREAL

0.0

Length x
When "GeometryType" = 1 or 2:
Radius

GeometryParameter[2] INPUT

LREAL

0.0

Length y
When "GeometryType" = 2:
Height

0.0

Length z

Done

GeometryParameter[3] INPUT

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

3264

LREAL

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

CommandAborted

Data type

Default
value

Description

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job
during execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing
the job. The job is rejected. The cause
of the error can be found in the "Erro‐
rID" parameter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
MC_SetKinematicsZoneActive: Activate kinematics zone V5 (Página 3269)
MC_SetKinematicsZoneInactive: Deactivate kinematics zone V5 (Página 3270)
Override response V5: Kinematics motion commands (Página 3283)

MC_SetWorkspaceZoneActive V5
MC_SetWorkspaceZoneActive: Activate workspace zone V5
Description
The "MC_SetWorkspaceZoneActive" Motion Control instruction is used to activate the
workspace zone which you have defined under "Technology object > Configuration > Extended
parameters > Zones" of via an "MC_DefineWorkspaceZone" job With the "ZoneNumber"
parameter, you enter the number of the zone to be activated.
The "MC_SetWorkspaceZoneActive" job is added to the queue of the job sequence and is
therefore effective for subsequent motion jobs.
The "<TO>.StatusWorkspaceZone[1..10].Active" tags of the technology object data block
contain the current activation status of the zones. While several of the defined blocked zones
and signal zones can be active simultaneously, only one area of the defined work zones can be
active.

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.
● The zone to be activated is defined.

Programación del PLC
Manual de programación y manejo, 11/2019

3265

Instrucciones
4.1 Instrucciones

Override response
● The override response for "MC_SetWorkspaceZoneActive" jobs is described in section
"Override response V5: Kinematics motion commands (Página 3283)".

Parameter
The following table shows the parameters of Motion Control instruction
"MC_SetWorkspaceZoneActive":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

ZoneNumber

INPUT

DINT

1

Zone number

Start job with a positive edge

1

Zone 1

2

Zone 2

3

Zone 3

4

Zone 4

5

Zone 5

6

Zone 6

7

Zone 7

8

Zone 8

9

Zone 9

10

Zone 10

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
MC_DefineWorkspaceZone: Define workspace zone V5 (Página 3261)
MC_SetWorkspaceZoneInactive: Deactivate workspace zone V5 (Página 3267)
Override response V5: Kinematics motion commands (Página 3283)

3266

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_SetWorkspaceZoneInactive V5
MC_SetWorkspaceZoneInactive: Deactivate workspace zone V5
Description
You use Motion Control instruction "MC_SetWorkspaceZoneInactive" to deactivate an active
workspace zone. With the "Mode" parameter, you can deactivate a specific zone, all zones of
a type or all zones.
The "MC_SetWorkspaceZoneInactive" job is added to the queue of the job sequence and is
therefore effective for subsequent motion jobs.
The "<TO>.StatusWorkspaceZone[1..10].Active" tags of the technology object data block
contain the current activation status of the zones.

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.
● The zone to be deactivated is defined.

Override response
● The override response for "MC_SetWorkspaceZoneInactive" jobs is described in section
"Override response V5: Kinematics motion commands (Página 3283)".

Parameters
The following table shows the parameters of Motion Control instruction
"MC_SetWorkspaceZoneInactive":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Programación del PLC
Manual de programación y manejo, 11/2019

Start job with a positive edge

3267

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

ZoneNumber

INPUT

DINT

1

Zone number

Mode

INPUT

DINT

0

1

Zone 1

2

Zone 2

3

Zone 3

4

Zone 4

5

Zone 5

6

Zone 6

7

Zone 7

8

Zone 8

9

Zone 9

10

Zone 10

Set zones of a zone type to inactive
0

Set a specific zone to inactive

1

Set all workspace zones to inactive

2

Set all blocked zones to inactive

3

Set all signal zones to inactive

4

Set workspace to inactive.

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
MC_DefineWorkspaceZone: Define workspace zone V5 (Página 3261)
MC_SetWorkspaceZoneActive: Activate workspace zone V5 (Página 3265)
Override response V5: Kinematics motion commands (Página 3283)

3268

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_SetKinematicsZoneActive V5
MC_SetKinematicsZoneActive: Activate kinematics zone V5
Description
The "MC_SetKinematicsZoneActive" Motion Control instruction is used to activate the zone
monitoring for a defined kinematics zone which you have defined under "Technology object >
Configuration > Extended parameters > Zones" of via an "MC_DefineKinematicsZone" job With
the "ZoneNumber" parameter, you enter the number of the kinematics zone to be activated.
The "MC_SetKinematicsZoneActive" job is added to the queue of the job sequence and is
therefore effective for subsequent motion jobs.
The "<TO>.StatusKinematicsZone[2..10].Active" tags of the technology object data block
contain the current activation status of the kinematics zones.

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.
● The kinematics zone to be activated is defined.

Override response
● The override response for "MC_SetKinematicsZoneActive" jobs is described in section
"Override response V5: Kinematics motion commands (Página 3283)".

Parameters
The following table shows the parameters of Motion Control instruction
"MC_SetKinematicsZoneActive":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Programación del PLC
Manual de programación y manejo, 11/2019

Start job with a positive edge

3269

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

ZoneNumber

INPUT

DINT

2

Zone number
2

Zone 2

3

Zone 3

4

Zone 4

5

Zone 5

6

Zone 6

7

Zone 7

8

Zone 8

9

Zone 9

10

Zone 10

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
MC_DefineKinematicsZone: Define kinematics zone V5 (Página 3263)
MC_SetKinematicsZoneInactive: Deactivate kinematics zone V5 (Página 3270)
Override response V5: Kinematics motion commands (Página 3283)

MC_SetKinematicsZoneInactive V5
MC_SetKinematicsZoneInactive: Deactivate kinematics zone V5
Description
You use Motion Control instruction "MC_SetKinematicsZoneInactive" to deactivate an active
kinematics zone. With the "Mode" parameter, you can deactivate a specific kinematics zone or
all kinematics zones.
The "MC_SetKinematicsZoneInactive" job is added to the queue of the job sequence and is
therefore effective for subsequent motion jobs.
The "<TO>.StatusKinematicsZone[2..10].Active" tags of the technology object data block
contain the current activation status of the kinematics zones.

3270

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.
● The kinematics zone to be deactivated is defined.

Override response
● The override response for "MC_SetKinematicsZoneInactive" jobs is described in section
"Override response V5: Kinematics motion commands (Página 3283)".

Parameters
The following table shows the parameters of Motion Control instruction
"MC_SetKinematicsZoneInactive":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

ZoneNumber

INPUT

DINT

2

Zone number

Mode

INPUT

DINT

0

Start job with a positive edge

2

Zone 2

3

Zone 3

4

Zone 4

5

Zone 5

6

Zone 6

7

Zone 7

8

Zone 8

9

Zone 9

10

Zone 10

Set zones to inactive
0

Set a specific zone to inactive

1

Set all zones to inactive

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Programación del PLC
Manual de programación y manejo, 11/2019

3271

Instrucciones
4.1 Instrucciones

Consulte también
MC_DefineKinematicsZone: Define kinematics zone V5 (Página 3263)
MC_SetKinematicsZoneActive: Activate kinematics zone V5 (Página 3269)
Override response V5: Kinematics motion commands (Página 3283)

Tools
MC_DefineTool V5
MC_DefineTool: Redefine tool V5
Description
You redefine the tool frame of the tool 1 job with the "MC_DefineTool" Motion Control
instruction. The start values stored in the system are not overwritten. Tool 1 is active by default.
The "MC_DefineTool" job is not added to the queue of the job sequence of the kinematics
technology object and therefore takes effect immediately. The "MC_DefineTool" job can be
executed only if the kinematics is in standstill.
The configurable coordinates depend on the kinematics type used:
Kinematics type
2D
3D

Configurable coordinates
without orientation

x, z1)

with orientation

z, a2)

without orientation

x, y, z3)

with orientation

x, y, z, a

1) The parameters "y" and "a" are pre-defined with the value "0.0".
2) The parameters "x" and "y" are pre-defined with the value "0.0".
3) The parameter "a" can only be defined with the value "0.0".

The following tags of the technology object data block contain the current coordinates of the tool
frame 1:
● <TO>.StatusTool.Frame[1].x
● <TO>.StatusTool.Frame[1].y
● <TO>.StatusTool.Frame[1].z
● <TO>.StatusTool.Frame[1].a

Applies to
● Kinematics

3272

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Requirement
● The technology object has been configured correctly.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.
● The kinematics is at a standstill.
● The kinematics is not in "Interrupted" state.
● No kinematics motion is active.

Override response
● An "MC_DefineTool" job cannot be aborted by any other Motion Control job.
● A new "MC_DefineTool" job does not abort any active Motion Control jobs.

Parameters
The following table shows the parameters of Motion Control instruction "MC_DefineTool":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

Frame

INPUT

TO_Struct_Kinema‐
tics_KinematicsFrame

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

TRUE

Start job with a positive edge

Coordinates in relation to the FCS

MC_SetTool V5
MC_SetTool: Change active tool V5
Description
With the "MC_SetTool" Motion Control instruction, you activate a tool. With the "ToolNumber"
parameter, you specify the tool number. The "MC_SetTool" job can be executed only if the
kinematics is in standstill. Tool 1 is active by default.
The "<TO>.StatusTool.ActiveTool" tag of the technology object data block contains the tool
number of the currently active tool.

Programación del PLC
Manual de programación y manejo, 11/2019

3273

Instrucciones
4.1 Instrucciones

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.
● The kinematics is at a standstill.
● The kinematics is not in "Interrupted" state.
● No kinematics motion is active.

Override response
● An "MC_SetTool" job cannot be aborted by any other Motion Control job.
● A new "MC_SetTool" job does not abort any active Motion Control jobs.

Parameters
The following table shows the parameters of Motion Control instruction "MC_SetTool":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

ToolNumber

INPUT

DINT

1

Start job with a positive edge

Number of the tool to be activated.
1

Tool 1

2

Tool 2

3

Tool 3

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
Override response V5: Kinematics motion commands (Página 3283)

3274

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Coordinate systems
MC_SetOcsFrame V5
MC_SetOcsFrame: Redefine object coordinate systems V5
Description
With the "MC_SetOcsFrame" Motion Control instruction, you define the position of an object
coordinate system (OCS) in relation to the world coordinate system (WCS). The initial values
stored in the technology object data block are not overwritten in the process.
The "MC_SetOcsFrame" job is added to the queue of the job sequence and is therefore
effective only for subsequent motion jobs.
The following tags of the technology object data block contain the current coordinates of the
object coordinate systems:
● <TO>.StatusOcsFrame[1..3].x
● <TO>.StatusOcsFrame[1..3].y
● <TO>.StatusOcsFrame[1..3].z
● <TO>.StatusOcsFrame[1..3].a
● <TO>.StatusOcsFrame[1..3].b
● <TO>.StatusOcsFrame[1..3].c

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.

Override response
The override response for "MC_SetOcsFrame" jobs is described in section "Override response
V5: Kinematics motion commands (Página 3283)".

Programación del PLC
Manual de programación y manejo, 11/2019

3275

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction "MC_SetOcsFrame":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Frame

INPUT

TO_Struct_Kinema‐
tics_Frame

-

Coordinates in relation to the WCS

OcsNumber

INPUT

DINT

1

Object coordinate system

The job is accepted in the job sequence.

1

Object coordinate system 1 (OCS1)

2

Object coordinate system 2 (OCS2)

3

Object coordinate system 3 (OCS3)

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed. The new values are
active for the display and the motion.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
Override response V5: Kinematics motion commands (Página 3283)

MC_KinematicsTransformation V5
MC_KinematicsTransformation: Convert axis coordinates to Cartesian coordinates V5
Description
With the Motion Control instruction "MC_KinematicsTransformation", you convert the setpoints
of positions, velocity and acceleration of the kinematics axes to Cartesian coordinates, velocity
and acceleration of the tool center point (TCP). The active tool is hereby taken into
consideration. The instruction is for information purposes only - the kinematics is not moved.
With the instruction, you can determine the Cartesian position, orientation, velocity and
acceleration of the axis values.

Applies to
● Kinematics

3276

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Requirement
● The technology object has been configured correctly.

Override response
● An "MC_KinematicsTransformation" job cannot be aborted by any other Motion Control job.
● A new "MC_KinematicsTransformation" job does not abort any active Motion Control jobs.

Parameters
The following table shows the parameters of Motion Control instruction
"MC_KinematicsTransformation":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Enable

INPUT

BOOL

FALSE

TRUE

AxesPosition

INPUT

ARRAY[1..4] OF

-

Positions of the kinematics axes

The calculation is performed synchro‐
nously.

LREAL
AxesPosition[1]

INPUT

LREAL

0.0

Position of the axis A1

AxesPosition[2]

INPUT

LREAL

0.0

Position of the axis A2

AxesPosition[3]

INPUT

LREAL

0.0

Position of the axis A3

INPUT

LREAL

0.0

Position of the axis A4

INPUT

ARRAY[1..4] OF

-

Velocity of kinematics axes

AxesPosition[4]
AxesVelocity

LREAL
AxesVelocity[1]

INPUT

LREAL

0.0

Velocity of axis A1

AxesVelocity[2]

INPUT

LREAL

0.0

Velocity of axis A2

AxesVelocity[3]

INPUT

LREAL

0.0

Velocity of axis A3

AxesVelocity[4]

INPUT

LREAL

0.0

Velocity of the axis A4

AxesAcceleration

INPUT

ARRAY[1..4] OF

-

Acceleration of the kinematics axes

LREAL
AxesAcceleration[1]

INPUT

LREAL

0.0

Acceleration of axis A1

AxesAcceleration[2]

INPUT

LREAL

0.0

Acceleration of axis A2

AxesAcceleration[3]

INPUT

LREAL

0.0

Acceleration of axis A3

INPUT

LREAL

0.0

Acceleration of the axis A4

INPUT

DINT

0

Reference system of the tool center point (TCP)

AxesAcceleration[4]
CoordSystem

Valid

OUTPUT BOOL

FALSE

Busy

OUTPUT BOOL

FALSE

Programación del PLC
Manual de programación y manejo, 11/2019

0

World coordinate system (WCS)

1

Object coordinate system 1 (OCS1)

2

Object coordinate system 2 (OCS2)

3

Object coordinate system 3 (OCS3)

TRUE

The output parameters are valid.

FALSE

The output parameters are invalid.

TRUE

The job is being processed.

3277

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Error

Data type

Default
value

Description

OUTPUT BOOL

FALSE

TRUE

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Position

OUTPUT ARRAY[1..4] OF

-

Cartesian position of the TCP in the reference
system

LREAL

An error occurred while processing
the job. The job is rejected. The cause
of the error can be found in the "Erro‐
rID" parameter.

Position[1]

OUTPUT LREAL

0.0

x-coordinate

Position[2]

OUTPUT LREAL

0.0

y-coordinate

Position[3]

OUTPUT LREAL

0.0

z-coordinate

Position[4]

OUTPUT LREAL

0.0

A-coordinate

OUTPUT ARRAY[1..4] OF

-

Cartesian velocity of the TCP

Velocity

LREAL
Velocity[1]

OUTPUT LREAL

0.0

Velocity in x direction

Velocity[2]

OUTPUT LREAL

0.0

Velocity in y direction

Velocity[3]

OUTPUT LREAL

0.0

Velocity in z direction

Velocity[4]

OUTPUT LREAL

0.0

Velocity of rotation A

OUTPUT ARRAY[1..4] OF

-

Cartesian acceleration of the TCP

Acceleration

LREAL
Acceleration[1]

OUTPUT LREAL

0.0

Acceleration in x direction

Acceleration[2]

OUTPUT LREAL

0.0

Acceleration in y direction

Acceleration[3]

OUTPUT LREAL

0.0

Acceleration in z direction

Acceleration[4]

OUTPUT LREAL

0.0

Acceleration of rotation A

OUTPUT DINT

0

LinkConstellation

Joint position information
0

Positive joint position space

1

Negative joint position space

MC_InverseKinematicsTransformation V5
MC_InverseKinematicsTransformation: Convert Cartesian coordinates to axis coordinates V5
Description
With the Motion Control instruction "MC_InverseKinematicsTransformation", you convert
Cartesian coordinates, velocity and acceleration of the tool center point (TCP) to the setpoints
of positions, velocity and acceleration of the kinematics axes. The active tool is hereby taken
into consideration. The instruction is for information purposes only - the kinematics is not
moved.
You can use the instruction to test, for example, whether specific Cartesian positions can be
reached with the kinematics or whether software limit switches of the axes are violated with
kinematics movements.

3278

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.

Override response
● An "MC_InverseKinematicsTransformation" job cannot be aborted by any other Motion
Control job.
● A new "MC_InverseKinematicsTransformation" job does not abort any active Motion
Control jobs.

Parameters
The following table shows the parameters of Motion Control instruction
"MC_InverseKinematicsTransformation":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Enable

INPUT

BOOL

FALSE

TRUE

Position

INPUT

ARRAY[1..4] OF
LREAL

-

Cartesian position of the TCP in the reference
system

Position[1]

INPUT

LREAL

0.0

x-coordinate

Position[2]

INPUT

LREAL

0.0

y-coordinate

Position[3]

INPUT

LREAL

0.0

z-coordinate

Position[4]

INPUT

LREAL

0.0

A-coordinate

INPUT

ARRAY[1..4] OF
LREAL

-

Cartesian velocity of the TCP

Velocity[1]

INPUT

LREAL

0.0

Velocity in x direction

Velocity[2]

INPUT

LREAL

0.0

Velocity in y direction

Velocity[3]

INPUT

LREAL

0.0

Velocity in z direction

Velocity[4]

INPUT

LREAL

0.0

Velocity of rotation A

Acceleration

INPUT

ARRAY[1..4] OF
LREAL

-

Cartesian acceleration of the TCP

Acceleration[1]

INPUT

LREAL

0.0

Acceleration in x direction

Acceleration[2]

INPUT

LREAL

0.0

Acceleration in y direction

Acceleration[3]

INPUT

LREAL

0.0

Acceleration in z direction

Acceleration[4]

INPUT

LREAL

0.0

Acceleration of rotation A

Velocity

Programación del PLC
Manual de programación y manejo, 11/2019

The calculation is performed synchro‐
nously.

3279

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

CoordSystem

INPUT

DINT

0

Reference system of the tool center point (TCP)

LinkConstellation

Valid

INPUT

DINT

OUTPUT BOOL

0

FALSE

0

World coordinate system (WCS)

1

Object coordinate system 1 (OCS1)

2

Object coordinate system 2 (OCS2)

3

Object coordinate system 3 (OCS3)

Joint position information
0

Positive joint position space

1

Negative joint position space

TRUE

The output parameters are valid.

FALSE

The output parameters are invalid.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing
the job. The job is rejected. The cause
of the error can be found in the "Erro‐
rID" parameter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

AxesPosition

OUTPUT ARRAY[1..4] OF
LREAL

-

Positions of the kinematics axes

AxesPosition[1]

OUTPUT LREAL

0.0

Position of the axis A1

AxesPosition[2]

OUTPUT LREAL

0.0

Position of the axis A2

AxesPosition[3]

OUTPUT LREAL

0.0

Position of the axis A3

AxesPosition[4]

OUTPUT LREAL

0.0

Position of the axis A4

OUTPUT ARRAY[1..4] OF
LREAL

-

Velocity of kinematics axes

AxesVelocity[1]

OUTPUT LREAL

0.0

Velocity of axis A1

AxesVelocity[2]

OUTPUT LREAL

0.0

Velocity of axis A2

AxesVelocity[3]

OUTPUT LREAL

0.0

Velocity of axis A3

AxesVelocity

AxesVelocity[4]

OUTPUT LREAL

0.0

Velocity of the axis A4

OUTPUT ARRAY[1..4] OF
LREAL

-

Acceleration of the kinematics axes

AxesAcceleration[1]

OUTPUT LREAL

0.0

Acceleration of axis A1

AxesAcceleration[2]

OUTPUT LREAL

0.0

Acceleration of axis A2

AxesAcceleration[3]

OUTPUT LREAL

0.0

Acceleration of axis A3

AxesAcceleration[4]

OUTPUT LREAL

0.0

Acceleration of the axis A4

AxesAcceleration

3280

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Override response of Motion Control jobs V5
Override response V5: Homing and motion jobs
The following table shows how a new Motion Control job affects active homing and motion jobs:
⇒ Active job

MC_Home

MC_Home

MC_Halt

⇓ New job

"Mode" =
2, 8, 10

("Mode" = 3, 5)

MC_MoveAb‐
solute

MC_Stop

MC_MoveSu‐
perimposed

MC_MotionIn‐
Velocity
MC_MotionIn‐
Position

MC_MoveRe‐
lative
MC_MoveVe‐
locity
MC_MoveJog
MC_Home

A

A

A

-

A

A

A

-

-

-

-

-

-

A

A

-

A

A

MC_MoveSuperim‐
posed

-

-

-

-

A

-

MC_Stop

A

A

A

B

A

A

MC_GearIn

-

A

A

-

A

-

MC_GearInPos

-

-

-

-

-

-

-

A

A

-

A

-

-

-

-

-

-

-

"Mode" = 3, 5
MC_Home
"Mode" = 9
MC_Halt
MC_MoveAbsolute
MC_MoveRelative
MC_MoveVelocity
MC_MoveJog
MC_MotionInVelocity
MC_MotionInPosition

MC_CamIn
waiting1)
MC_GearInPos
MC_CamIn
active2)
MC_LeadingVa‐
lueAdditive

A The running job is aborted with "CommandAborted" = TRUE.
B An "MC_Stop" job is aborted by another "MC_Stop" job with a stop response that is the same or higher.
-

No effect. Running job continues to be executed.

1)

The status "Busy" = TRUE, "StartSync" = FALSE, "InSync" = FALSE corresponds to a waiting synchronous operation.

2)

The status "Busy" = TRUE, "StartSync" or "InSync" = TRUE corresponds to an active synchronous operation.

Programación del PLC
Manual de programación y manejo, 11/2019

3281

Instrucciones
4.1 Instrucciones

Nota
Fixed stop
With an active force and torque limitation with "MC_TorqueLimiting", running jobs are aborted
if the drive is held at the fixed stop with "InClamping" = TRUE.

Override response V5: Synchronous operation jobs
The following table shows how a new Motion Control job affects the motion of the axis on active
synchronous operation jobs:
⇒ Active job

MC_GearIn MC_GearInPos MC_GearInPos

MC_Phasing‐
Absolute

MC_Leading‐
ValueAdditive

MC_CamIn

MC_CamIn

waiting1)

active2)

MC_Phasing‐
Relative

A

-

-

-

-

MC_Halt

A

-

A

A

-

MC_MoveAbsolute

A

-

A

A

-

A

A

A

-

-

⇓ New job

MC_Home
"Mode" = 3, 5

MC_MoveRelative
MC_MoveVelocity
MC_MoveJog
MC_MotionInVelocity
MC_MotionInPosition
MC_MoveSuperimposed

-

-

-

-

-

MC_Stop

A

A

A

A

A

MC_GearIn

A

A

A

A

-

MC_GearInPos

-

A

-

-

-

A

A

A

A

-

-

-

-

A

-

-

-

-

-

A

MC_CamIn
waiting1)
MC_GearInPos
MC_CamIn
active2)
MC_PhasingAbsolute
MC_PhasingRelative
MC_LeadingValueAdditive

A The running job is aborted with "CommandAborted" = TRUE.
-

No effect. Running job continues to be executed.

1)

A waiting synchronous operation job ("Busy" = TRUE, "StartSync" = FALSE, "InSync" = FALSE) does not abort any active
jobs. Abort with an "MC_Power" job is possible.

2)

The status "Busy" = TRUE, "StartSync" or "InSync" = TRUE corresponds to active synchronous operation.

3282

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Nota
Fixed stop
With an active force and torque limitation with "MC_TorqueLimiting", running jobs are aborted
if the drive is held at the fixed stop with "InClamping" = TRUE.

Override response V5: Measuring input jobs
The following table shows which new Motion Control jobs will override active measuring input
jobs:
⇒ Active job

MC_MeasuringInput

MC_MeasuringInputCyclic

A

A

-

-

A

A

⇓ New job
MC_Home
"Mode" = 2, 3, 5, 8, 9, 10
MC_Home
"Mode" = 0, 1, 6, 7, 11, 12
MC_MeasuringInput
MC_MeasuringInputCyclic
MC_AbortMeasuringInput
A The running job is aborted with "CommandAborted" = TRUE.
-

No effect. Running job continues to be executed.

Override response V5: Kinematics motion commands
Single axis jobs are not overridden by kinematics jobs.

Programación del PLC
Manual de programación y manejo, 11/2019

3283

Instrucciones
4.1 Instrucciones
The following table shows how a new Motion Control job affects active kinematics motion jobs:
⇒ Active job

MC_GroupInterrupt

MC_GroupStop

N

N

N

A

A

A

MC_GroupStop

A

A

N

MC_GroupInterrupt

B

A

N

⇓ New job

MC_MoveLinearAbsolute
MC_MoveLinearRelative
MC_MoveCircularAbsolute
MC_MoveCircularRelative
MC_MoveDirectAbsolute
MC_MoveDirectRelative
MC_TrackConveyorBelt
MC_DefineWorkspaceZone
MC_DefineKinematicsZone
MC_SetWorkspaceZoneActive
MC_SetWorkspaceZoneInactive
MC_SetKinematicsZoneActive
MC_SetKinematicsZoneInactive
MC_SetOcsFrame

MC_Home
MC_MoveSuperimposed
MC_Halt
MC_MoveAbsolute
MC_MoveRelative
MC_MoveVelocity
MC_MoveJog
MC_Stop
MC_GearIn
MC_GearInPos
MC_CamIn
MC_MotionInVelocity
MC_MotionInPosition

MC_GroupContinue

3284

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
⇒ Active job

MC_MoveLinearAbsolute

⇓ New job

MC_MoveLinearRelative

MC_GroupInterrupt

MC_GroupStop

-

-

N

C, -

-

N

MC_MoveCircularAbsolute
MC_MoveCircularRelative
MC_MoveDirectAbsolute
MC_MoveDirectRelative
MC_TrackConveyorBelt
MC_DefineWorkspaceZone
MC_DefineKinematicsZone
MC_SetWorkspaceZoneActive
MC_SetWorkspaceZoneInactive
MC_SetKinematicsZoneActive
MC_SetKinematicsZoneInactive
MC_SetOcsFrame
MC_MoveLinearAbsolute
MC_MoveLinearRelative
MC_MoveCircularAbsolute
MC_MoveCircularRelative
MC_MoveDirectAbsolute
MC_MoveDirectRelative
MC_TrackConveyorBelt
MC_DefineWorkspaceZone
MC_DefineKinematicsZone
MC_SetWorkspaceZoneActive
MC_SetWorkspaceZoneInactive
MC_SetKinematicsZoneActive
MC_SetKinematicsZoneInactive
MC_SetOcsFrame

A The running job is aborted with "CommandAborted" = TRUE.
B Running job is interrupted or resumed.
C Synchronization of the OCS with the conveyor belt is aborted with "MC_SetOcsFrame" = TRUE.
N Not permitted. Running job continues to be executed. The new job is rejected.
-

No effect. Running job continues to be executed. A new kinematics job is added to the job sequence.

S7-1500 Motion Control V4
MC_Power V4
MC_Power: Enable, disable technology object V4
Description
With the Motion Control instruction "MC_Power", a technology object is enabled or disabled.

Programación del PLC
Manual de programación y manejo, 11/2019

3285

Instrucciones
4.1 Instrucciones

Applies to
● Synchronous axis
● Positioning axis
● Speed axis
● External encoder

Requirement
● The technology object has been configured correctly.
● Cyclic BUS communication is established between controller and encoder
("<TO>.StatusSensor[n].CommunicationOK" = TRUE).
● Cyclic BUS communication is established between controller and drive
("<TO>.StatusDrive.CommunicationOK" = TRUE).

Override response
● An "MC_Power" job cannot be aborted by any other Motion Control job.
● An "MC_Power" job with parameter "Enable"TRUE enables a technology object but does
not thereby abort any other Motion Control instructions.
● Disabling the technology object (parameter "Enable" = FALSE) aborts all Motion Control
jobs on the corresponding technology object in accordance with the selected "StopMode".
This process cannot be canceled by the user.

Parameters
The following table shows the parameters of Motion Control instruction "MC_Power":
Parameters

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_Axis

-

Technology object

Enable

INPUT

BOOL

FALSE

TRUE

The technology object is enabled.

FALSE

The technology object is disabled.
All current jobs at the technology object
are aborted in accordance with the con‐
figured "StopMode".

StartMode

INPUT

DINT

1

0

Enable positioning axis/synchronous
axis not position-controlled

1

Enable positioning axis/synchronous
axis position-controlled

The parameter initially takes effect when the posi‐
tioning axis is enabled ("Enable" changes from
"FALSE" to "TRUE") and when the axis is enabled
after acknowledgment of an interrupt that caused
the axis to be disabled.
This parameter is ignored when a speed axis or an
external encoder is used.

3286

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default
value

Description

StopMode

INPUT

INT

0

Not applicable to the technology object external
encoder
If you disable a technology object with a negative
edge at parameter "Enable", the axis decelerates
in accordance with the selected "StopMode".
0

Emergency stop
When the technology object is disabled,
the axis brakes to a standstill without jerk
limit, using the emergency deceleration
configured in "Technology object > Con‐
figuration > Extended parameters >
Emergency stop ramp". The enable is
then canceled.
(<TO>.DynamicDefaults.EmergencyDe‐
celeration)

1

Immediate stop
When a technology object is disabled,
the setpoint zero is output, and the ena‐
ble is canceled. The axis is braked to a
standstill according to the configuration
in the drive.

2

Stop with maximum dynamic values
When the technology object is disabled,
the axis is braked to a standstill using the
maximum deceleration configured in
"Technology object > Configuration >
Extended parameters > Dynamic limits".
The configured maximum jerk is hereby
taken into account. The enable is then
canceled.
(<TO>.DynamicLimits.MaxDecelera‐
tion; <TO>.DynamicLimits.MaxJerk)

Status

OUTPUT BOOL

FALSE

Technology object enable status
FALSE

Disabled
● The technology object does not
accept any Motion Control jobs.
● Speed control and positioning
control are not active.
● The actual values of the technology
object are not checked for validity.

TRUE

Enabled
● The enabled technology object
accepts Motion Control jobs.
● Speed control and positioning
control are active.
● The actual values of the technology
object are valid.

Busy

OUTPUT BOOL

Programación del PLC
Manual de programación y manejo, 11/2019

FALSE

TRUE

The job is being processed.

3287

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Error

ErrorID

Data type

Default
value

Description

OUTPUT BOOL

FALSE

TRUE

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

An error occurred in Motion Control ins‐
truction "MC_Power". The cause of the
error can be found in the "ErrorID" para‐
meter.

Enabling technology objects
To enable a technology object, set the "Enable" parameter to "TRUE".
The following two cases are differentiated:
● Enable at a standstill
● Enable in motion of axis
Enable at a standstill
Depending on the "StartMode" parameter, the position is held ("StartMode" = 1) or the velocity
setpoint zero is output ("StartMode" = 0). When the "Status" parameter shows the value
"TRUE", the technology object is enabled.
Enable in motion of axis
If "StartMode" = 1, the position at the time of the setting of the "Enable" input takes effect as the
position setpoint for the position controller. The axis is braked to a standstill and adjusted to the
set position depending on the maximum deceleration configured under "Technology object >
Configuration > Extended parameters > Dynamic limits". If monitoring operation or dynamic
limits are hereby exceeded, this leads to corresponding alarm reactions.
If "StartMode" = 0, the axis is braked as much as possible by the specification of the velocity
setpoint zero. Monitoring operations and dynamic limits are not active in this case.
When the "Status" parameter shows the value "TRUE", the technology object is enabled.
Nota
Automatic enable after acknowledgment of a technology alarm
If the technology object is disabled due to a technology alarm, the technology object will be
enabled again automatically after the cause has been eliminated and the alarm has been
acknowledged. This requires the "Enable" parameter to have retained the value "TRUE" during
this process.

Disabling technology objects
To disable a technology object, set the "Enable" parameter to "FALSE".
If an axis is in motion, it is braked to a standstill according to the selected "StopMode".
When the "Busy" and "Status" parameters show the value "FALSE", the disabling of the
technology object is complete.

3288

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Drive connection by means of PROFIdrive
When a drive is connected using PROFIdrive, the setpoint, enable and drive status are
transmitted via the PROFIdrive telegram.
● Enable technology object and activate drive
With "Enable" = TRUE parameter, the technology object is enabled. The drive is enabled
according to the PROFIdrive standard.
When the "<TO>.StatusDrive.InOperation" tag shows the value "TRUE", the drive is ready
to execute setpoints. The "Status" parameter is set to the value "TRUE".
● Disable technology object and deactivate drive
With the "Enable" = FALSE parameter, the "Status" parameter is set to the value "FALSE",
and the axis is braked according to the selected "StopMode". The drive is disabled
according to the PROFIdrive standard.

Analog drive connection
The setpoint is output via an analog output. Optionally, you can configure an enabling signal via
digital output (<TO>.Actor.Interface.EnableDriveOutput), and a readiness signal via digital
input (<TO>.Actor.Interface.DriveReadyInput).
● Enable technology object and activate drive
With "Enable" = TRUE parameter, the enable output ("Enable drive output") is set.
When the drive returns the readiness signal via the ready input ("Drive ready input"), the
"Status" parameter and the technology object's "<TO>.StatusDrive.InOperation" tag are set
to "TRUE", and the setpoint is switched to the analog output.
● Disable technology object and deactivate drive
With the "Enable" = FALSE parameter, the "Status" parameter is set to the value "FALSE",
and the axis is braked according to the selected "StopMode". When the setpoint zero is
reached, the enable output is set to "FALSE".

Additional information
Additional information on enabling and disabling technology objects and drives can be found in
the appendix MC_Power Function Charts.

Programación del PLC
Manual de programación y manejo, 11/2019

3289

Instrucciones
4.1 Instrucciones

MC_Power: Function chart V4
Function chart: Enabling a technology object and example of alarm response
$

$

0&B3RZHU
72B
(QDEOHB

$[LV

0&B0RYH9HORFLW\
6WDWXV

6WDWXVB

72B

$[LV

,Q9HORFLW\

(QDEOH

%XV\

%XV\B

([HB

([HFXWH

%XV\



6WRS0RGH

(UURU

(UURUB



9HORFLW\

&RPPDQG$ERUWHG



6WDUW0RGH

(UURU,'



$FFHOHUDWLRQ

(UURU



'HFHOHUDWLRQ

(UURU,'

ದ

-HUN



$
(QDEOHB
%XV\B
6WDWXVB
(UURUB












'LUHFWLRQ



&XUUHQW



3RVLWLRQ&RQWUROOHG




(UURU

W
W
W
W

$
([HB




W


72B9HORFLW\


W

A technology object is enabled with "Enable_1= TRUE". The successful enable can be read
from "Status_1" at time ①. The axis will then move with an "MC_MoveVelocity" job (A2). The
velocity profile of the axis can be read from "TO_1.Velocity".
At time ② an error occurs in the technology object, which results in the disabling of the
technology object (alarm response: remove enable). The axis is braked to a standstill according
to the configuration in the drive. When the technology object is disabled, "Status_1" is reset.
Since the axis was not disabled using "Enable_1" = FALSE, the selected "StopMode" does not
apply. The cause of the error is corrected and the alarm is acknowledged at time ③.
Since "Enable_1" is still set, the technology object is enabled again. The successful enable can
be read from "Status_1". Finally, the technology object is disabled with "Enable_1" = FALSE.

3290

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_Reset V4
MC_Reset: Acknowledge alarms, restart technology object V4
Description
With the Motion Control instruction "MC_Reset", you acknowledge all technology alarms that
can be acknowledged in the user program. Acknowledgment also resets the "Error" and
"Warning" bits in the technology data block.
With the Motion Control instruction "MC_Reset" with "Restart" = TRUE, you start reinitialization
(restart) of technology objects. Upon restart of the technology object, the new configuration
data are applied in the technology data block.

Applies to
● All technology objects

Requirement
● Positioning/synchronous axis, speed axis and external encoder technology objects:
For a restart, the technology object must be disabled.
("MC_Power.Status" = FALSE and "MC_Power.Busy" = FALSE)

Override response
● Parameter "Restart" = FALSE:
Processing of the "MC_Reset" instruction with parameter "Restart" = FALSE cannot be
aborted by any other Motion Control job. The "MC_Reset" job does not abort any active
motion control jobs.
● Parameter "Restart" = TRUE:
Processing of the "MC_Reset" instruction with parameter "Restart" = TRUE cannot be
aborted by any other Motion Control job.

Parameters
The following table shows the parameters of Motion Control instruction "MC_Reset":
Parameter

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_Object

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Programación del PLC
Manual de programación y manejo, 11/2019

Start job with a positive edge

3291

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

Restart

INPUT

BOOL

FALSE

TRUE

Reinitialization of the technology object
and acknowledgment of pending techno‐
logy alarms. The technology object is
reinitialized with the configured start va‐
lues.

FALSE

Acknowledgment of queued technology
alarms

Done

OUTPUT BOOL

FALSE

TRUE

Error has been acknowledged.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

The restart has been executed.

Acknowledging technology alarms
To acknowledge technology alarms, follow these steps:
1. Check the requirements indicated above.
2. Set the parameter "Restart" = FALSE.
3. Start the acknowledgment of the error with a positive edge at parameter "Execute".
When the "Done" parameter shows the value "TRUE", the error has been acknowledged.
Nota
Acknowledge with "Restart" = FALSE
If only the technology alarms are to be acknowledged, set "Restart" = FALSE. The technology
object cannot be used during a restart.

Restarting a technology object
To restart a technology object, follow these steps:
1. Check the requirements indicated above.
2. Set the parameter "Restart" = TRUE.
3. Perform the restart with a positive edge at parameter "Execute".
When the "Done" parameter shows the value "TRUE", the restart of the technology object
is complete.
Additional information regarding the restart can be found in the section Restarting technology
objects.

3292

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_Home V4
MC_Home: Home technology object, set home position V4
Description
With the Motion Control instruction "MC_Home", you create the relationship between the
position in the technology object and the mechanical position. The actual position value in the
technology object is assigned to a homing mark at the same time. This homing mark represents
a known mechanical position.
Homing is performed according to the mode selected with the "Mode" parameter and the
configuration under "Technology object > Configuration > Extended parameters > Homing".
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control has
been standardized within the framework of technology version V2.0. This results in a new
assignment of the parameter values for the "MC_Home.Mode" parameter. A comparison of the
"MC_Home.Mode" parameter for technology versions V1.0 and ≥ V2.0 is available in section
Version overview.
The preset values under "Technology object > Configuration > Extended parameters >
Dynamic default values" are used for the dynamic values Acceleration, Deceleration and Jerk.

Applies to
● Synchronous axis
● Positioning axis
● External encoder
The following table shows which modes are possible with each of the technology objects:
Operating mode

Positioning axis/
Positioning axis/
synchronous axis
synchronous axis
with incremental en‐ with absolute enco‐
coder
der

Active homing

External incremen‐
tal
encoder

External absolute
encoder

X

-

-

-

X

-

X

-

X

X

X

X

X

X

X

X

-

X

-

X

("Mode" = 3, 5)
Passive homing
("Mode" = 2, 8, 10)
Set actual position
("Mode" = 0)
Relative offset to the actual position
("Mode" = 1)
Absolute encoder adjustment
("Mode" = 6, 7)

Programación del PLC
Manual de programación y manejo, 11/2019

3293

Instrucciones
4.1 Instrucciones

Requirement
● The technology object has been configured correctly.
● "Mode" = 2, 3, 5, 8, 10
The technology object is enabled.
● "Mode" = 0, 1, 6, 7, 8
The encoder values are valid (<TO>.StatusSensor[n].State = 2).
● "Mode" = 6, 7
The axis is in position-controlled mode.

Override response
The override response for "MC_Home" jobs is described in section Override response V4:
Homing and motion jobs (Página 3433).

Parameters
The following table shows the parameters of Motion Control instruction "MC_Home":
Parameter

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_Axis

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Position

INPUT

LREAL

0.0

The specified value is used according to the selec‐
ted "Mode".

3294

Start job with a positive edge

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

Mode

INPUT

INT

0

Operating mode
0

Direct homing (absolute)
The current position of the technology
object is set to the value of parameter
"Position".

1

Direct homing (relative)
The current position of the technology
object is shifted by the value of parame‐
ter "Position".

2

Passive homing (without reset)
Functions like "Mode" 8, with the diffe‐
rence that the "homed" status is not re‐
set when the function is enabled.

3

Active homing
The positioning axis/synchronous axis
technology object performs a homing
movement according to the configura‐
tion.
After the completion of the motion, the
axis is positioned at the value of the "Po‐
sition" parameter.

4

Reserved

5

Active homing ("Position" parameter has
no effect)
The positioning axis/synchronous axis
technology object performs a homing
movement according to the configura‐
tion.
After completion of the motion, the axis
is positioned at the home position confi‐
gured under "Technology object > Con‐
figuration > Extended parameters > Ho‐
ming > Active homing".
(<TO>.Homing.HomePosition)

6

Absolute encoder adjustment (relative)
The current position is shifted by the va‐
lue of parameter "Position".
The calculated absolute value offset is
stored retentively in the CPU.
(<TO>.StatusSensor[n].AbsEncoderOff‐
set)

7

Absolute encoder adjustment (absolute)
The current position is set to the value of
parameter "Position".
The calculated absolute value offset is
stored retentively in the CPU.
(<TO>.StatusSensor[n].AbsEncoderOff‐
set)

Programación del PLC
Manual de programación y manejo, 11/2019

3295

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description
8

Passive homing
When the homing mark is detected, the
actual value is set to the value of the
"Position" parameter.

9

Abort passive homing
An active job for passive homing is abor‐
ted.

10

Passive homing ("Position" parameter
has no effect)
When the homing mark is detected, the
actual value is set to the home position
configured under "Technology object >
Configuration > Extended parameters >
Homing > Passive homing".
(<TO>.Homing.HomePosition)

ReferenceMarkPosition

OUTPUT LREAL

0.0

Display of the position at which the technology ob‐
ject was homed
(valid when "Done" = TRUE)

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

3296

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Resetting the "Homed" status
The "Homed" status of a technology object is reset under the following conditions
(<TO>.StatusWord.X5 (HomingDone)):
● Technology objects with incremental actual values:
– Starting an "MC_Home" job with "Mode" = 3, 5, 8, 10
(After successful completion of the homing operation, the "Homed" status is reset.)
– Error in the encoder system, or encoder failure
– Restart of the technology object
– After POWER OFF → POWER ON of the CPU
– Memory reset
– Modification of the encoder configuration
● Technology objects with absolute actual values:
– Error in sensor system/encoder failure
– Replacement of the CPU
– Modification of the encoder configuration
– Restoration of the CPU factory settings
– Transfer of a different project into the controller

Homing a technology object with "Mode" = 1 … 8, 10
To home a technology object, follow these steps:
1. Check the requirements indicated above.
2. Specify the desired homing function in the "Mode" parameter.
3. Initialize the necessary parameters with values, and start the homing operation with a
positive edge at the "Execute" parameter.
When the "Done" parameter shows the value "TRUE", the "MC_Home" job has been
completed according to the selected "Mode". The "Homed" status of the technology object
is indicated under "Technology object > Diagnostics > Status and error bits > Motion status
> Homed" (<TO>.StatusWord.X5 (HomingDone)).

Abort of a passive homing process with "Mode" = 9
With "Mode" = 9, the technology object is not homed. When an active "MC_Home" job for
passive homing ("Mode" = 2, 8, 10) is overridden by another "MC_Home" job with "Mode" = 9,
the running job is aborted with parameter "CommandAborted" = TRUE. The overriding job with
"Mode" = 9 signals successful execution with parameter "Done" = TRUE.

Additional information
An option for the evaluation of the individual status bits can be found in the section Evaluating
StatusWord, ErrorWord and WarningWord.

Programación del PLC
Manual de programación y manejo, 11/2019

3297

Instrucciones
4.1 Instrucciones

Consulte también
Override response V4: Homing and motion jobs (Página 3433)

MC_Halt V4
MC_Halt: Pause axis V4
Description
With the Motion Control instruction "MC_Halt", you brake an axis until it comes to a standstill.
You define the dynamic behavior of the braking operation with parameters "Jerk" and
"Deceleration".

Applies to
● Synchronous axis
● Positioning axis
● Speed axis

Requirement
● The technology object has been configured correctly.
● The technology object is enabled.

Override response
The override response for "MC_Halt" jobs is described in section Override response V4:
Homing and motion jobs (Página 3433).

Parameters
The following table shows the parameters of Motion Control instruction "MC_Halt":
Parameters

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_SpeedAxis

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Deceleration

INPUT

LREAL

-1.0

Deceleration

Start job with a positive edge

> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The deceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

3298

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default
value

Description

Jerk

INPUT

LREAL

-1.0

Jerk
> 0.0

Constant-acceleration velocity profile;
the specified jerk is used

= 0.0

Trapezoid velocity profile

< 0.0

The jerk configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.

FALSE

The current acceleration at the start of
the job is reduced using the configured
jerk. Afterwards, the deceleration builds
up

TRUE

The acceleration is set to 0.0 at the start
of the job, and the deceleration imme‐
diately builds up.

(<TO>.DynamicDefaults.Jerk)
AbortAcceleration

Done

INPUT

BOOL

FALSE

OUTPUT BOOL

FALSE

TRUE

Velocity zero has been reached.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Braking an axis with "MC_Halt"
Proceed as follows to decelerate an axis to a standstill:
1. Check the requirements indicated above.
2. Supply the parameters "Deceleration", "Jerk" and "AbortAcceleration" with the desired
values.
3. Start the "MC_Halt" job with a positive edge at parameter "Execute".
The current motion state is indicated in "Busy", "Done" and "Error". The standstill of the axis
is indicated under "Technology object > Diagnostics > Status and error bits > Motion status
> Standstill" (<TO>.StatusWord.X7 (Standstill)).

Braking an axis with active force/torque limit
With active force/torque limiting the permitted torque may not be sufficient to move the
calculated braking ramp. The "MC_Halt" job does not signal "Done" = TRUE.
To brake an axis with active force/torque limiting, use the Motion Control instruction
"MC_MoveVelocity" with "MC_MoveVelocity.Velocity" = 0.0 and
"MC_MoveVelocity.PositionControlled" = FALSE.

Programación del PLC
Manual de programación y manejo, 11/2019

3299

Instrucciones
4.1 Instrucciones

Additional information
An option for the evaluation of the individual status bits can be found in the section Evaluating
StatusWord, ErrorWord and WarningWord.

Consulte también
Override response V4: Homing and motion jobs (Página 3433)
MC_MoveVelocity: Move axis with velocity/speed setpoint V4 (Página 3310)

3300

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_Halt: Function chart V4
Function chart: Stopping an axis and the overriding job characteristics
$

$

0&B0RYH9HORFLW\
72B

0&B+DOW

,Q9HORFLW\

,Q9HOB

72B

([HB

([HFXWH

%XV\

%XV\B

([HB



9HORFLW\

&RPPDQG$ERUWHG

$[LV

$ERUWB





$FFHOHUDWLRQ

(UURU





'HFHOHUDWLRQ

(UURU,'

$ERUW$FFB



-HUN



'LUHFWLRQ



&XUUHQW



3RVLWLRQ&RQWUROOHG



$

$[LV

'RQH

'RQHB

([HFXWH

%XV\

%XV\B

'HFHOHUDWLRQ

&RPPDQG$ERUWHG

-HUN

$ERUWB

(UURU

$ERUW$FFHOHUDWLRQ

(UURU,'





([HB



W



%XV\B



W



$ERUWB



W

$


([HB



W



$ERUW$FFB



W



'RQHB



W



%XV\B



W


72B9HORFLW\


W



72B
$FFHOHUDWLRQ



W





72B-HUN



W



$

Programación del PLC
Manual de programación y manejo, 11/2019

%

3301

Instrucciones
4.1 Instrucciones

Section
$

Section
%

An axis is moved with an "MC_MoveVelocity" job (A1). At time ①, the "MC_MoveVelocity" job is overridden by
an "MC_Halt" job (A2). The job abort is signaled via "Abort_1". With "AbortAcc_2" = FALSE, the current accele‐
ration is reduced with the specified jerk. Afterward, the deceleration builds up and the axis is braked to a standstill.
The completion of the "MC_Halt" job is reported via "Done_2".

The axis is moved with an "MC_MoveVelocity" job (A1). At time ②, the "MC_MoveVelocity" job is overridden by
an "MC_Halt" job (A2). The job abort is signaled via "Abort_1". With "AbortAcc_2" = TRUE, the current acceleration
is set to zero immediately and the deceleration builds up. The axis is braked to a standstill. The completion of the
"MC_Halt" job is reported via "Done_2".

MC_MoveAbsolute V4
MC_MoveAbsolute: Position axis absolutely V4
Description
With the Motion Control instruction "MC_MoveAbsolute", you can move an axis to an absolute
position.
You define the dynamic behavior of the motion with parameters "Velocity", "Jerk",
"Acceleration" and "Deceleration".

Applies to
● Synchronous axis
● Positioning axis

Requirement
● The technology object has been configured correctly.
● The technology object is enabled.
● The technology object is homed.

Override response
The override response for "MC_MoveAbsolute" jobs is described in section Override response
V4: Homing and motion jobs (Página 3433).

Parameters
The following table shows the parameters of Motion Control instruction "MC_MoveAbsolute":
Parameters

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_Positioning‐
Axis

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

3302

Start job with a positive edge

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default
value

Description

Position

INPUT

LREAL

0.0

Absolute target position

Velocity

INPUT

LREAL

-1.0

Velocity setpoint for the positioning
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The velocity configured in "Technology
object > Configuration > Extended para‐
meters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Velocity)

Acceleration

INPUT

LREAL

-1.0

Acceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The acceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The deceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk
> 0.0

Constant acceleration velocity profile

= 0.0

Trapezoid velocity profile

< 0.0

The jerk configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.

The specified value is used.

(<TO>.DynamicDefaults.Jerk)
Direction

INPUT

INT

1

Motion direction of the axis
This parameter is only evaluated when the modulo
function is enabled.
"Technology object > Configuration > Basic para‐
meters > Enable modulo
1

Positive direction

2

Negative direction

3

Shortest distance

Done

OUTPUT BOOL

FALSE

TRUE

The target position has been reached.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Programación del PLC
Manual de programación y manejo, 11/2019

3303

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Error

ErrorID

Data type

Default
value

Description

OUTPUT BOOL

FALSE

TRUE

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

Moving an axis to an absolute position
Proceed as follows to move an axis to an absolute position:
1. Check the requirements indicated above.
2. Specify the desired target position in the "Position" parameter.
3. Start the "MC_MoveAbsolute" job with a positive edge at parameter "Execute".
The current motion state is indicated in "Busy", "Done" and "Error".

Consulte también
Override response V4: Homing and motion jobs (Página 3433)

3304

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_MoveAbsolute: Function chart V4
Function chart: Absolute positioning of an axis, and the response to an overriding job

72B

$

$

0&B0RYH$EVROXWH

0&B0RYH$EVROXWH

$[LV

'RQH

'RQHB

72B

$[LV

'RQH

'RQHB

([HB

([HFXWH

%XV\

%XV\B

([HB

([HFXWH

%XV\

%XV\B



3RVLWLRQ

&RPPDQG$ERUWHG

$ERUWB



3RVLWLRQ

&RPPDQG$ERUWHG



9HORFLW\

(UURU



9HORFLW\

(UURU,'



$FFHOHUDWLRQ



'HFHOHUDWLRQ



$FFHOHUDWLRQ



'HFHOHUDWLRQ

ದ


ದ

-HUN



'LUHFWLRQ



$

(UURU
(UURU,'

-HUN
'LUHFWLRQ





([HB



W



'RQHB



W



%XV\B



W



$ERUWB



W

$


([HB



W



'RQHB



W



%XV\B



W


72B9HORFLW\




W


72B3RVLWLRQ




$

Programación del PLC
Manual de programación y manejo, 11/2019

%

W

3305

Instrucciones
4.1 Instrucciones

Section
$

Section
%

An axis is moved to absolute position 1000.0 with an "MC_MoveAbsolute" job (A1). When the axis reaches the
target position, this is signaled at time ① via "Done_1". At this time ①, another "MC_MoveAbsolute" job (A2) with
target position 1500.0 is started. When the axis reaches the target position 1500.0, this is signaled via "Done_2".
Since "Exe_2" was previously reset, "Done_2" is applied only to one cycle.
An active "MC_MoveAbsolute" job (A1) is overridden at time ② by another "MC_MoveAbsolute" job (A2). The
abort is signaled via "Abort_1". The axis is braked to the changed velocity and moved to the new target position
1500.0. When the new target position is reached, this is signaled via "Done_2".

MC_MoveRelative V4
MC_MoveRelative: Position axis relatively V4
Description
With the Motion Control instruction "MC_MoveRelative", you move an axis relative to its
position when execution of the job began.
You define the dynamic behavior of the motion with parameters "Velocity", "Jerk",
"Acceleration" and "Deceleration".

Applies to
● Synchronous axis
● Positioning axis

Requirement
● The technology object has been configured correctly.
● The technology object is enabled.

Override response
The override response for "MC_MoveRelative" jobs is described in section Override response
V4: Homing and motion jobs (Página 3433).

Parameters
The following table shows the parameters of Motion Control instruction "MC_MoveRelative":
Parameter

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_Positioning‐
Axis

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Distance

INPUT

LREAL

0.0

Distance for the positioning process
(negative or positive)

3306

Start job with a positive edge

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

Velocity

INPUT

LREAL

-1.0

Velocity setpoint for the positioning
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The velocity configured in "Technology
object > Configuration > Extended para‐
meters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Velocity)

Acceleration

INPUT

LREAL

-1.0

Acceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The acceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The deceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk
> 0.0

Constant acceleration velocity profile
The specified value is used.

= 0.0

Trapezoid velocity profile

< 0.0

The jerk configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Jerk)

Done

OUTPUT BOOL

FALSE

TRUE

The target position has been reached.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Programación del PLC
Manual de programación y manejo, 11/2019

3307

Instrucciones
4.1 Instrucciones

Moving an axis relative to the starting position
Proceed as follows to move an axis relative to the starting position:
1. Check the requirements indicated above.
2. Specify distance to be moved in the "Distance" parameter.
3. Start the "MC_MoveRelative" job with a positive edge at parameter "Execute".
The current motion state is indicated in "Busy", "Done" and "Error".

Consulte también
Override response V4: Homing and motion jobs (Página 3433)

3308

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_MoveRelative: Function chart V4
Function chart: Relative positioning of an axis, and the overriding job characteristics

72B

$

$

0&B0RYH5HODWLYH

0&B0RYH5HODWLYH

$[LV

'RQH

'RQHB

72B

$[LV

'RQH

'RQHB

([HB

([HFXWH

%XV\

%XV\B

([HB

([HFXWH

%XV\

%XV\B



'LVWDQFH

$ERUWB



'LVWDQFH



&RPPDQG$ERUWHG

9HORFLW\



$FFHOHUDWLRQ



'HFHOHUDWLRQ

ದ

(UURU



(UURU,'



$FFHOHUDWLRQ



'HFHOHUDWLRQ

ದ

-HUN



$

&RPPDQG$ERUWHG

9HORFLW\

(UURU
(UURU,'

-HUN





([HB



W



%XV\B



W



'RQHB



W



$ERUWB



W

$


([HB



%XV\B



W



'RQHB

72B9HORFLW\

W





W





W


72B3RVLWLRQ




$

Programación del PLC
Manual de programación y manejo, 11/2019

%

W

3309

Instrucciones
4.1 Instrucciones

Section
$

Section
%

The axis is moved by an "MC_MoveRelative" job (A1) by the distance ("Distance") 1000.0 (the starting position
here is 0.0). When the axis reaches the target position, this is signaled at time ① via "Done_1". At this time ①,
another "MC_MoveRelative" job (A2) with distance 500.0 is started. When the new target position is reached, this
is signaled via "Done_2". Since "Exe_2" was previously reset, "Done_2" is applied only to one cycle.
An active "MC_MoveRelative" job (A1) is overridden by another "MC_MoveRelative" job (A2). The abort is sig‐
naled at time ② via "Abort_1". The axis is then moved at the new velocity by the distance ("Distance") 500.0.
When the new target position is reached, this is signaled via "Done_2".

MC_MoveVelocity V4
MC_MoveVelocity: Move axis with velocity/speed setpoint V4
Description
With the Motion Control instruction "MC_MoveVelocity", you move an axis at constant velocity/
speed.
You define the dynamic behavior of the motion with parameters "Velocity", "Jerk",
"Acceleration" and "Deceleration".
● Positioning axis/synchronous axis:
A velocity is specified in the "Velocity" parameter.
● Speed axis:
A speed is specified in the "Velocity" parameter.

Applies to
● Synchronous axis
● Positioning axis
● Speed axis

Requirement
● The technology object has been configured correctly.
● The technology object is enabled.

Override response
The override response for "MC_MoveVelocity" jobs is described in section Override response
V4: Homing and motion jobs (Página 3433).

3310

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction "MC_MoveVelocity":
Parameters

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_SpeedAxis

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Velocity

INPUT

LREAL

100.0

Start job with a positive edge

Velocity setpoint / speed setpoint for the motion
("Velocity" = 0.0 is permitted)

Acceleration

INPUT

LREAL

-1.0

Acceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The acceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The deceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk
> 0.0

Constant acceleration velocity profile
The specified value is used.

= 0.0

Trapezoid velocity profile

< 0.0

The jerk configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Jerk)

Direction

INPUT

INT

0

Direction of rotation of the axis
0

The sign of the velocity specified at the
"Velocity" parameter defines the direc‐
tion of rotation.

1

Positive direction of rotation
The value of "Velocity" is used.

2

Negative direction of rotation
The value of "Velocity" is used.

Programación del PLC
Manual de programación y manejo, 11/2019

3311

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default
value

Description

Current

INPUT

BOOL

FALSE

Maintain current velocity
FALSE

Deactivated
The values of parameters "Velocity" and
"Direction" are taken into account.

TRUE

activated
The values at the parameters "Velocity"
and "Direction" are not taken into ac‐
count. The current velocity and direction
at function start are retained.
When the axis resumes motion at the
velocity that was current at function start,
the "InVelocity" parameter returns the
value "TRUE".

PositionControlled

INPUT

BOOL

TRUE

FALSE

Non position-controlled operation

TRUE

Position-controlled mode

The parameter applies as long as the "MC_Move‐
Velocity" job is being executed. After this, the set‐
ting of the following job applies.
This parameter is ignored when a speed axis is
used.
InVelocity

OUTPUT BOOL

FALSE

TRUE

The velocity setpoint/speed setpoint has
been reached. A velocity setpoint/speed
setpoint is output.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The cause of the error can be found
in the "ErrorID" parameter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Behavior with setpoint velocity/speed zero ("Velocity" = 0.0)
An "MC_MoveVelocity" job with "Velocity" = 0.0 stops the axis with the configured deceleration.
When the velocity setpoint/speed setpoint zero is reached, the parameter "InVelocity" will
indicate the value "TRUE".
Under "Technology object > Diagnostics > Status and error bits > Motion status", "constant
velocity" and "standstill" will be displayed (<TO>.StatusWord.X12 (ConstantVelocity);
<TO>.StatusWord.X7 (Standstill)).
The parameters "InVelocity" and "Busy" show the value "TRUE", until the "MC_MoveVelocity"
job is overridden by another Motion Control job.

3312

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Moving an axis with constant velocity/speed
Proceed as follows to move an axis with constant velocity/speed:
1. Check the requirements indicated above.
2. At the "Velocity" parameter, specify the velocity/speed, with which the axis should be moved.
3. Start the "MC_MoveVelocity" job with a positive edge at parameter "Execute".
The current motion state is indicated in "Busy", "InVelocity" and "Error".
If the "InVelocity" parameter shows the value "TRUE", the velocity/speed setpoint has been
reached. The axis continues moving at this constant velocity. The parameters "InVelocity"
and "Busy" show the value "TRUE", until the "MC_MoveVelocity" job is overridden by
another Motion Control job.
Nota
Response to a change in the override
If the velocity/speed is influenced during constant motion by a change in the override
(<TO>.Override.Velocity), the "InVelocity" parameter is reset during the acceleration or
deceleration. When the newly calculated velocity/speed is reached ("Velocity" × "Override" %),
then "InVelocity" is set again.

Additional information
An option for the evaluation of the individual status bits can be found in the section Evaluating
StatusWord, ErrorWord and WarningWord.

Consulte también
Override response V4: Homing and motion jobs (Página 3433)

Programación del PLC
Manual de programación y manejo, 11/2019

3313

Instrucciones
4.1 Instrucciones

MC_MoveVelocity: Function chart V4
Function chart: Moving an axis with velocity specification, and the response to an overriding job
$

$

0&B0RYH9HORFLW\

0&B0RYH9HORFLW\

,Q9HORFLW\

,Q9HOB

72B

([HB

([HFXWH

%XV\

%XV\B

([HB

([HFXWH

%XV\



9HORFLW\

&RPPDQG$ERUWHG



9HORFLW\

&RPPDQG$ERUWHG

72B

$[LV

$ERUWB

$[LV

,Q9HORFLW\



$FFHOHUDWLRQ

(UURU



$FFHOHUDWLRQ

(UURU



'HFHOHUDWLRQ

(UURU,'



'HFHOHUDWLRQ

(UURU,'

ದ

ದ

-HUN
'LUHFWLRQ



'LUHFWLRQ



&XUUHQW



&XUUHQW

([HB
%XV\B
,Q9HOB
$ERUWB

3RVLWLRQ&RQWUROOHG



$

%XV\B
$ERUWB

-HUN



3RVLWLRQ&RQWUROOHG

,Q9HOB














W
W
W
W

$
([HB
%XV\B
,Q9HOB
$ERUWB










W
W
W
W


72B9HORFLW\



W

An "MC_MoveVelocity" job (A1) initiated via "Exe_1" accelerates the axis and signals at time ①
via "InVel_1" that the velocity setpoint 50.0 has been reached.
At time ②, the job is overridden by another "MC_MoveVelocity" job (A2). The abort is signaled
via "Abort_1". When the new velocity setpoint 15.0 is reached, this is signaled via "InVel_2".
The axis then continues moving at the constant velocity 15.0.

3314

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
The running "MC_MoveVelocity" job (A2) is overridden by another "MC_MoveVelocity" job
(A1). The abort is signaled via "Abort_2". The axis is accelerated to the new velocity setpoint
50.0. Before the velocity setpoint is reached, the current "MC_MoveVelocity" job (A1) is
overridden at time ③ by another "MC_MoveVelocity" job (A2). The abort is signaled via
"Abort_1". When the new velocity setpoint 15.0 is reached, this is signaled via "InVel_2". The
axis then continues moving at the constant velocity 15.0.

MC_MoveJog V4
MC_MoveJog: Move axis in jog mode V4
Description
With the Motion Control instruction "MC_MoveJog", you move an axis in jog mode.
You define the dynamic behavior of the motion with parameters "Velocity", "Jerk",
"Acceleration" and "Deceleration".
● Positioning axis/synchronous axis:
A velocity is specified in the "Velocity" parameter.
● Speed axis:
A speed is specified in the "Velocity" parameter.

Applies to
● Synchronous axis
● Positioning axis
● Speed axis

Requirement
● The technology object has been configured correctly.
● The technology object is enabled.

Override response
The override response for "MC_MoveJog" jobs is described in section Override response V4:
Homing and motion jobs (Página 3433).

Programación del PLC
Manual de programación y manejo, 11/2019

3315

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction "MC_MoveJog":
Parameter

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_SpeedAxis

-

Technology object

JogForward

INPUT

BOOL

FALSE

TRUE

As long as the parameter is "TRUE", the
axis moves in the positive direction at
the velocity specified in parameter "Ve‐
locity".

JogBackward

INPUT

BOOL

FALSE

TRUE

As long as the parameter is "TRUE", the
axis moves in the negative direction at
the velocity specified in parameter "Ve‐
locity".

Velocity

INPUT

LREAL

100.0

Acceleration

INPUT

LREAL

-1.0

Velocity setpoint / speed setpoint for the motion
≥ 0.0

The specified value is used.

< 0.0

The absolute value of the specified value
is used.

Acceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The acceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The deceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk
> 0.0

Constant acceleration velocity profile
The specified value is used.

= 0.0

Trapezoid velocity profile

< 0.0

The jerk configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Jerk)

PositionControlled

INPUT

BOOL

TRUE

FALSE

Non position-controlled operation

TRUE

Position-controlled mode

The parameter applies as long as the "MC_Move‐
Jog" job is being executed. After this, the setting of
the following job applies.
This parameter is ignored when a speed axis is
used.

3316

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

InVelocity

Data type

Default
value

Description

OUTPUT BOOL

FALSE

TRUE

The velocity setpoint/speed setpoint has
been reached. A velocity setpoint/speed
setpoint is output.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Behavior with setpoint velocity/speed zero ("Velocity" = 0.0)
An "MC_MoveJog" job with "Velocity" = 0.0 stops the axis with the configured deceleration.
When the velocity setpoint/speed setpoint zero is reached, the parameter "InVelocity" will
indicate the value "TRUE".
Under "Technology object > Diagnostics > Status and error bits > Motion status", "constant
velocity" and "standstill" will be displayed (<TO>.StatusWord.X12 (ConstantVelocity);
<TO>.StatusWord.X7 (Standstill)).

Moving an axis in jog mode
Proceed as follows to move an axis in jog mode:
1. Check the requirements indicated above.
2. Move the axis in the positive direction with "JogForward", or in the negative direction with
"JogBackward".
The current motion state is indicated in "Busy", "InVelocity" and "Error".
If both "JogForward" and "JogBackward" are set to TRUE, the axis is braked at the last valid
deceleration. The error 16#8007 (incorrect direction specification) is output.
Nota
Response to a change in the override
If the velocity/speed is influenced during constant motion by a change in the override
(<TO>.Override.Velocity), the "InVelocity" parameter is reset during the acceleration or
deceleration. When the newly calculated velocity is reached ("Velocity" × "Override" %), then
"InVelocity" is set again.

Additional information
An option for the evaluation of the individual status bits can be found in the section Evaluating
StatusWord, ErrorWord and WarningWord.

Programación del PLC
Manual de programación y manejo, 11/2019

3317

Instrucciones
4.1 Instrucciones

Consulte también
Override response V4: Homing and motion jobs (Página 3433)

MC_MoveJog: Function chart V4
Function chart: Moving an axis in jog mode
$
0&B0RYH-RJ
72B

$[LV

,Q9HORFLW\

,Q9HO

%XV\

%XV\

-RJB)

-RJ)RUZDUG

-RJB%

-RJ%DFNZDUG &RPPDQG$ERUWHG

9HOB,QSXW

9HORFLW\



$FFHOHUDWLRQ



'HFHOHUDWLRQ

ದ

-HUN

(UURU

(UURU
(UURU,'

3RVLWLRQ&RQWUROOHG



$
-RJB)
-RJB%
,Q9HO
%XV\
(UURU
9HOB,QSXW


















W
W
W
W
W
W


72B9HORFLW\



ದ

W

The axis is moved in the negative direction in jog mode via "Jog_B". When the velocity setpoint
-50.0 is reached, this is signaled via "InVel" = TRUE. After "Jog_B" is reset, the axis is braked
and brought to a standstill. Then the axis is moved in the positive direction via "Jog_F". When
the velocity setpoint 50.0 is reached, this is signaled via "InVel" = TRUE.
At the time ①, if "Jog_F" is set, the velocity setpoint is changed to 100.0 by means of
"Vel_Input". Alternatively, you can also change the velocity setpoint using the velocity override.
"InVel" is reset. Axis is being accelerated. When the new velocity setpoint 100.0 is reached, this
is signaled via "InVel" = TRUE.

3318

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
If "Jog_F" is set, "Jog_B" is likewise set at time ②. If both "Jog_F" and "Jog_B" are set, then the
axis is braked with the last applicable deceleration. An error is indicated via "Error", and the
"ErrorID" of the error 16#8007 (incorrect direction specification) is output.
This error is resolved by resetting the two inputs "Jog_F" and "Jog_B".
During the braking ramp, "Jog_F" is set at time ③. The axis is accelerated to the last configured
velocity. When the velocity setpoint 100.0 is reached, this is signaled via "InVel" = TRUE.

MC_MoveSuperimposed V4
MC_MoveSuperimposed: Position axes overlapping V4
Description
With the Motion Control instruction "MC_MoveSuperimposed", you start a relative positioning
motion that is superimposed on a active basic motion.
You define the dynamic behavior of the motion with parameters "VelocityDiff", "Jerk",
"Acceleration" and "Deceleration" . The dynamic values are added to the values of the basic
motion. The duration of the basic motion is not extended by a superimposed motion.
The dynamics of the total axis motion is the sum of the dynamic values of the basic motion and
the superimposed motion.
The behavior of the total motion depends on the type of basic motion:
● The basic motion is a single-axis motion:
– The maximum dynamics of the superimposed motion is the difference between the
current dynamic values of the basic motion and the dynamic limits.
– The entire motion is limited to the configured dynamic limits.
● The basic motion is a synchronous motion:
– The maximum dynamics of the superimposed motion is the difference between the
current dynamic values of the basic motion and the dynamic limits.
– The synchronous motion of the following axis is not limited to the dynamic limits of the
following axis.
– An "MC_MoveSuperimposed" job on a leading axis in synchronous operation affects the
leading axis and the following axis.
– An "MC_MoveSuperimposed" job on a following axis in synchronous operation only
affects the following axis.
It is always the dynamics of the total motion that is displayed in the technology data block and
in the TIA Portal.

Applies to
● Synchronous axis
● Positioning axis

Programación del PLC
Manual de programación y manejo, 11/2019

3319

Instrucciones
4.1 Instrucciones

Requirement
● The technology object has been configured correctly.
● The technology object is enabled.

Override response
The override response for "MC_MoveSuperimposed" jobs is described in section Override
response V4: Homing and motion jobs (Página 3433).

Parameters
The following table shows the parameters of Motion Control instruction
"MC_MoveSuperimposed":
Parameters

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_Positioning‐
Axis

-

Axis technology object

Execute

INPUT

BOOL

FALSE

TRUE

Distance

INPUT

LREAL

0.0

Additional distance for the overlapping positioning
process (negative or positive)

VelocityDiff

INPUT

LREAL

-1.0

Maximum velocity deviation compared to the acti‐
ve motion

Start job with a positive edge

> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The velocity configured in "Technology
object > Configuration > Extended para‐
meters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Velocity)

Acceleration

INPUT

LREAL

-1.0

Acceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The acceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The deceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

3320

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default
value

Description

Jerk

INPUT

LREAL

-1.0

Jerk
> 0.0

Constant acceleration velocity profile
The specified value is used.

= 0.0

Trapezoid velocity profile

< 0.0

The jerk configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Jerk)

Done

OUTPUT BOOL

FALSE

TRUE

Superimposed positioning complete

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

Starting superimposed positioning motion
To start a superimposed positioning motion with Motion Control instruction
"MC_MoveSuperimposed", follow these steps:
1. Check the requirements indicated above.
2. Specify the additional distance to be moved in the "Distance" parameter.
3. Start the "MC_MoveSuperimposed" job with a positive edge at parameter "Execute".
The current motion state is indicated in "Busy", "Done" and "Error".

Consulte también
Override response V4: Homing and motion jobs (Página 3433)

Programación del PLC
Manual de programación y manejo, 11/2019

3321

Instrucciones
4.1 Instrucciones

MC_MoveSuperimposed: Function chart V4
Function chart: Positioning axes overlapping

72B
([HB

$

$

0&B0RYH5HODWLYH

0&B0RYH6XSHULPSRVHG

$[LV

'RQH

'RQHB

72B

([HFXWH

%XV\

%XV\B

([HB

&RPPDQG$ERUWHG



'LVWDQFH



9HORFLW\



$FFHOHUDWLRQ



'HFHOHUDWLRQ



$ERUWB

%XV\B
'RQHB

'RQHB

%XV\

%XV\B

&RPPDQG$ERUWHG

'LVWDQFH

(UURU



9HORFLW\'LII



$FFHOHUDWLRQ



'HFHOHUDWLRQ





$

'RQH

([HFXWH

(UURU,'

-HUN

([HB

'LVWB,QSXW

$[LV

(UURU
(UURU,'

-HUN






W




W




W

$
([HB
%XV\B
'RQHB




W




W




W


'LVWB,QSXW



W

ದ
Y0&B0RYH5HODWLYH

Y0&B0RYH6XSHULPSRVHG




W

ದ


72B9HORFLW\




W

ದ

72B3RVLWLRQ

$

3322

%

W

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Section
$

Section
%

Using "Exe_1", an "MC_MoveRelative" job with a distance of 50.0 is initiated. At time ①, using "Exe_2", an
"MC_MoveSuperimposed" job with a distance of 50.0 is initiated. The axis is moved with the added dynamic
values of both jobs by the distance 50 + 50 = 100.0. When the axis reaches the target position, this is signaled via
"Done_2".
Using "Exe_1", an "MC_MoveRelative" job with a distance of 50.0 is initiated. At time ②, using "Exe_2", a
MC_MoveSuperimposed job with a distance of -50.0 is initiated. The axis reverses and is moved with the added
dynamic values of both jobs by the distance 50.0 - 50.0 = 0.0. When the axis reaches the target position, this is
signaled via "Done_2".

MC_SetSensor V4
MC_SetSensor: Set alternative encoder as operationally active encoder V4
Description
With the Motion Control instruction "MC_SetSensor", you switch over the encoder for closed
loop position control of the axis.
The actual value of the addressed encoder can be adapted without switchover using parameter
"Mode" 2 and 3.

Applies to
● Synchronous axis
● Positioning axis

Requirement
● The technology object and the alternative encoder have been configured correctly.
● No restart command and no "MC-Home" job running.

Override response
● An "MC_SetSensor" job is not aborted by any other Motion Control job.
● A new "MC_SetSensor" job does not abort any active motion control jobs.

Parameters
The following table shows the parameters of Motion Control instruction "MC_SetSensor":
Parameters

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_Positioning‐
Axis

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Programación del PLC
Manual de programación y manejo, 11/2019

Start job with a positive edge

3323

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default
value

Description

Sensor

INPUT

INT

1

Number of the new encoder (1 to 4).

Mode

INPUT

DINT

0

The mode determines the position alignment bet‐
ween the old encoder and new encoder.
0

Switch over encoder and transfer actual
position to the new encoder
With this encoder switchover, step chan‐
ges in the positioning control are preven‐
ted. Bumpless switchover of the enco‐
ders is possible.

1

Switch over encoder without aligning the
actual position
Note
When closed loop position control is ac‐
tive, an additional difference of the two
encoders acts as additional control de‐
viation and can trigger a compensating
motion.

2

Transfer actual value
The actual position is transferred to the
encoder specified in the "Sensor" para‐
meter.

3

Transfer actual value
The actual position of the "Reference
encoder" ("ReferenceSensor" parame‐
ter) is transferred to the encoder speci‐
fied in the "Sensor" parameter.

ReferenceSensor

INPUT

Done

INT

1

Number of the reference encoder (see parameter
"Mode" = 3)

OUTPUT BOOL

FALSE

TRUE

Encoder for closed loop position control
of the axis was switched over.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job has been aborted.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Changing to absolute encoder
When you switch the encoder to an absolute encoder and transfer the actual value ("Mode" =
2, 3), the actual value is calculated with the value of the absolute encoder and the absolute
value offset. When switching to a different encoder, calculation of the actual value is canceled.
The absolute encoder once again returns the absolute value + absolute value offset
(<TO>.StatusSensor[n].AbsEncoderOffset) without calculation by the "MC_SetSensor" job.

3324

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Measuring input, output cam, cam track
MC_MeasuringInput V4
MC_MeasuringInput: Start measuring once V4
Description
With the Motion Control instruction "MC_MeasuringInput", a one-time measuring is started.
With the one-time measuring, one or two edges can be detected with one measuring job. The
position of the respective technology object axis or external encoder is assigned to the
measuring event. The measurement result is indicated in the function block and in the
technology data block and can be further processed in the user program. This completes the
measuring job.
Another measuring job must be started again using "MC_MeasuringInput.Execute" = TRUE.

Applies to
● Measuring input

Requirement
● The technology object has been configured correctly.
● The encoder of the axis must have "valid" status (StatusSensor[1..4].State = valid).
Otherwise, the measuring job is rejected in the function block with an error indication.
● Measuring using PROFIdrive is not possible during active or passive homing.

Override response
The override response for "MC_MeasuringInput" jobs is described in section Override
response V4: Measuring input jobs (Página 3434).

Parameters
The following table shows the parameters of Motion Control instruction "MC_MeasuringInput":
Parameters

Declara‐
tion

Data type

Default
value

Description

MeasuringInput

INPUT

TO_MeasuringIn‐
put

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Programación del PLC
Manual de programación y manejo, 11/2019

Start job with a positive edge

3325

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default
value

Description

Mode

INPUT

DINT

0

Type of measurement
0

Measurement of next positive edge

1

Measurement of next negative edge

2

Measurement of next two edges

3

Measurement of two edges, beginning
with the positive edge
● Rising edge = "MeasuredValue1"
(measured value 1)
● Falling edge = "MeasuredValue2"
(measured value 2)

4

Measurement of two edges, beginning
with the negative edge
● Falling edge = "MeasuredValue1"
● Rising edge = "MeasuredValue2"

MeasuringRange

INPUT

BOOL

FALSE

Acquisition of measured values
Observe the time-related boundary conditions.

StartPosition

INPUT

LREAL

0.0

FALSE

Always acquire measured values

TRUE

Acquire measured values only within the
measuring range

Start position of the measuring range
For an axis or external encoder with active modulo
function, position data outside the modulo range is
mirrored in the modulo range.

EndPosition

INPUT

LREAL

0.0

End position of the measuring range
For an axis or external encoder with active modulo
function, position data outside the modulo range is
mirrored in the modulo range.

Done

OUTPUT BOOL

FALSE

TRUE

The block has been completely proces‐
sed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The measuring job has been aborted.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The cause of the error can be found
in the "ErrorID" parameter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

MeasuredValue1

OUTPUT LREAL

0.0

First measured value

MeasuredValue2

OUTPUT LREAL

0.0

Second measured value (for measurement of two
edges)

Measured values are valid.

Consulte también
Override response V4: Measuring input jobs (Página 3434)

3326

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_MeasuringInput: Function chart V4
Function chart: Start measuring job once
$
0&B0HDVXULQJLQSXW
72B
([HB

0HDVXULQJLQSXW

'RQH

([HFXWH

%XV\



0RGH

&RPPDQG$ERUWHG



0HDVXULQJ5DQJH

(UURU

6WDUW3RVLWLRQ
(QG3RVLWLRQ

(UURU,'
0HDVXUHG9DOXH
0HDVXUHG9DOXH



$
([HB
%XV\
'RQH
0HDVXUH
9DOXH
0HDVXULQJ
,QSXW

72B[3RVLWLRQ












W
W
W
W
W




W

A "MC_MeasuringInput" job with "Mode" = 0 initiated using "Execute" performs a measurement
of the next positive edge. A successfully completed measurement is signaled with "Done" =
TRUE. The determined measured value ① (in example: 50) is output using "MeasuredValue1".

MC_MeasuringInputCyclic V4
MC_MeasuringInputCyclic: Start cyclic measuring V4
Description
With the Motion Control instruction "MC_MeasuringInputCyclic", a cyclic measuring is started.
With cyclic measuring, up to two measuring events are detected by the system and the
associated measuring positions displayed. The measurements are continued cyclically until
they are ended per command.

Programación del PLC
Manual de programación y manejo, 11/2019

3327

Instrucciones
4.1 Instrucciones

Applies to
● Measuring input

Requirement
● The technology object has been configured correctly.
● Cyclic measuring is only possible when measuring using TM Timer DIDQ.
● The encoder of the axis operationally in effect must have "valid" status "valid"
("StatusSensor[1..4].State" = valid). Otherwise, the measuring job is rejected in the function
block with an error indication.

Override response
The override response for "MC_MeasuringInputCyclic" jobs is described in section Override
response V4: Measuring input jobs (Página 3434).

Parameters
The following table shows the parameters of Motion Control instruction
"MC_MeasuringInputCyclic":
Parameters

Declara‐
tion

Data type

Default
value

Description

MeasuringInput

INPUT

TO_MeasuringIn‐
put

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Mode

INPUT

DINT

0

MeasuringRange

INPUT

BOOL

FALSE

Start job with a positive edge

Type of measurement
0

Measurement of positive edges

1

Measurement of negative edges

2

Measurement of both edges

Acquisition of measured values
Observe the time-related boundary conditions.

StartPosition

INPUT

LREAL

0.0

FALSE

Always acquire measured values

TRUE

Acquire measured values only within the
measuring range

Start position of the measuring range
For an axis or external encoder with active modulo
function, position data outside the modulo range is
mirrored in the modulo range.

EndPosition

INPUT

LREAL

0.0

End position of the measuring range
For an axis or external encoder with active modulo
function, position data outside the modulo range is
mirrored in the modulo range.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The measuring job has been aborted.

3328

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Error

ErrorID

Data type

Default
value

Description

OUTPUT BOOL

FALSE

TRUE

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

An error occurred while processing the
job. The cause of the error can be found
in the "ErrorID" parameter.

MeasuredValue1

OUTPUT LREAL

First measured value

MeasuredValue2

OUTPUT LREAL

Second measured value (when measuring multi‐
ple edges in one position control cycle)

MeasuredValue1Counter

OUTPUT UDINT

0

Count value for the first measured value

MeasuredValue2Counter

OUTPUT UDINT

0

Count value for the second measured value

LostEdgeCounter1

OUTPUT UDINT

0

Count value for the lost edges in the cycle clock of
the first measured value acquisition

LostEdgeCounter2

OUTPUT UDINT

0

Count value for the lost edges in the cycle clock of
the second measured value acquisition

Consulte también
Override response V4: Measuring input jobs (Página 3434)

MC_MeasuringInputCyclic: Function chart V4
Function chart: Start cyclic measuring job
$
0&B0HDVXULQJ,QSXW&\FOLF
72B
([HB



0HDVXULQJ,QSXW
([HFXWH

%XV\

&RPPDQG$ERUWHG

0RGH

(UURU

0HDVXULQJ5DQJH

(UURU,'

6WDUW3RVLWLRQ

0HDVXUHG9DOXH

(QG3RVLWLRQ

0HDVXUHG9DOXH

0HDVXUHG9DOXH&RXQWHU
0HDVXUHG9DOXH&RXQWHU
/RVW(JGH&RXQWHU
/RVW(GJH&RXQWHU

Programación del PLC
Manual de programación y manejo, 11/2019

3329

Instrucciones
4.1 Instrucciones
$
&DOORI
0&B0HDVXULQJ
,QSXW&\FOLF




W


0HDVXUHG
9DOXH





0HDVXUHG
9DOXH

W




W


0HDVXUHG
9DOXH&RXQWHU





0HDVXUHG
9DOXH&RXQWHU



/RVW(GJH
&RXQWHU



/RVW(GJH
&RXQWHU



W



W



W



W


$SSOLFDWLRQ
F\FOH
0HDVXULQJ
LQSXW





Q













W


72B3RVLWLRQ






W

A "MC_MeasuringInputCyclic" command initiated using "Execute" (signal and start point not
shown) (e.g. call in MC-PreServo [OB67]) with "Mode" = 0 and without specified measuring
range "MeasuringRange = FALSE" performs a measurement of the positive edges. By calling
the Motion Control instruction "MC_MeasuringInputCyclic" in MC-PreServo [OB67] or MCPreServo [OB67], the measuring command as well as the measurement itself is called in the
same application cycle.
The actual position determined at the time of the first positive edge ① in the position control
cycle is output using "MeasuredValue1", and count tag "MeasuredValue1Counter" is
incremented by "1".
The actual position determined at the time of the second positive edge ② in the position control
cycle is output using "MeasuredValue2", and count tag "MeasuredValue2Counter" is
incremented by "1".
If additional positive edges occur in the same position control cycle ③, these are recorded in
LostEdgeCounter1 and LostEdgeCounter2.

3330

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_AbortMeasuringInput V4
MC_AbortMeasuringInput: Cancel active measuring job V4
Description
With the Motion Control instruction "MC_AbortMeasuringInput", an active one-time or cyclic
measuring job is aborted.

Applies to
● Measuring input

Requirement
● The technology object has been configured correctly.

Override response
The override response for "MC_AbortMeasuringInput" jobs is described in section Override
response V4: Measuring input jobs (Página 3434).

Parameters
The following table shows the parameters of Motion Control instruction
"MC_AbortMeasuringInput":
Parameters

Declara‐
tion

Data type

Default
value

Description

MeasuringInput

INPUT

TO_MeasuringIn‐
put

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Done

OUTPUT BOOL

0

The function block has been processed. The mea‐
suring job has been deactivated.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job has been aborted.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The cause of the error can be found
in the "ErrorID" parameter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Start job with a positive edge

Consulte también
Override response V4: Measuring input jobs (Página 3434)

Programación del PLC
Manual de programación y manejo, 11/2019

3331

Instrucciones
4.1 Instrucciones

MC_OutputCam V4
MC_OutputCam: Activate/deactivate output cam V4
Description
You use Motion Control instruction "MC_OutputCam" to activate the specified output cam.
Depending on the output cam type, the following input parameters are in effect:
● Distance output cam
– "OnPosition"
– "OffPosition"
● Time-based output cam
– "OnPosition"
– "Duration"
You define the operating mode and the effective direction of the output cam with parameters
"Mode" and "Direction".
When "MC_OutputCam.Enable" = TRUE, the input parameters are always read and take effect
at the next position control cycle.
When a technological alarm occurs, the output cam is processed again after error
acknowledgment.

Applies to
● Output cam

Requirement
● The technology object has been configured correctly.
● The higher-level technology object must have a valid position.
● Setpoint output cams are not output for an axis in non-position-controlled operation.
● A setpoint output cam with the setting "MC_OutputCam.OnPosition" = 0 switches at position
setpoint = 0.

Override response
The "MC_OutputCam" is canceled by:
● Disabling of the output cam with "MC_OutputCam.Enable" = FALSE
● Only one instance of the "MC_OutputCam" function block can be active on an output cam
in the user program. A second instance of the "MC_OutputCam" function block on a
currently active output cam is rejected with an error.

3332

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction "MC_OutputCam":
Parameters

Declara‐
tion

Data type

Default
value

Description

OutputCam

INPUT

TO_OutputCam

-

Technology object

Enable

INPUT

BOOL

FALSE

FALSE

Output cam is disabled

TRUE

Output cam is being processed

OnPosition

INPUT

LREAL

0.0

Start position of the output cam [unit of measure‐
ment of the interconnected technology object]
For an axis or external encoder with active modulo
function, position data outside the modulo range is
mirrored in the modulo range.

OffPosition

INPUT

LREAL

0.0

End position of the distance output cam [unit of
measurement of the interconnected technology
object]
For an axis or external encoder with active modulo
function, position data outside the modulo range is
mirrored in the modulo range.

Duration

INPUT

LREAL

0.0

Switch-on duration of the time-based output cam
[unit of measurement: ms]
The value for the switch-on duration of a time-ba‐
sed output cam must be greater than 0.0.

Mode

INPUT

DINT

1

Operating mode
1

Standard
Output cam functionality (output not in‐
verted)

2

Output cam functionality with inverted
output

3

Output cam always ON
(while "Enable" = TRUE)

Direction

INPUT

DINT

1

Activation direction of the output cam
1

Positive direction

2

Negative direction

3

Both directions

CamOutput

OUTPUT BOOL

-

Status display based on last call of Motion Control
instruction "MC_OutputCam"

Busy

OUTPUT BOOL

FALSE

TRUE

The processing of the output cam is ac‐
tive.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The cause of the error can be found
in the "ErrorID" parameter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Programación del PLC
Manual de programación y manejo, 11/2019

3333

Instrucciones
4.1 Instrucciones

MC_OutputCam: Function chart V4
Function chart: Activate the specified output cam type
$

$

0&B2XWSXW&DP

0&B2XWSXW&DP

72B

2XWSXW&DP

(QB

(QDEOH

72B

2XWSXW&DP

%XV\

(QB

(QDEOH



&DP2XWSXW



2Q3RVLWLRQ

(UURU



2II3RVLWLRQ

(UURU,G

&DP2XW



'XUDWLRQ

2Q3RVLWLRQ

(UURU
(UURU,G

'XUDWLRQ

0RGH



0RGH



'LUHFWLRQ



'LUHFWLRQ



(QB
%XV\
&DP2XW



&DP2XW

%XV\

2II3RVLWLRQ



$

&DP2XWSXW
















W

$
(QB
%XV\
&DP2XW

72B[3RVLWLRQ








W

2II3RVLWLRQ
2Q3RVLWLRQ
W

A1

Distance output cam

A2

Time-based output cam

An output cam is activated with "Enable" = TRUE. The output cam is output corresponding to
the parameters.
The processing of the output cam is indicated with "Busy" = TRUE.

3334

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
When activation direction "Direction" = 1 (positive) is set, the output cam behaves as follows,
regardless of the output cam type setting:
● The distance output cam switches on at "OnPosition" ① and switches off again at
"OffPosition" ②. At a direction reversal the output cam is switched off ④.
● The time-based output cam switches on at "OnPosition" ① and switches off again after
expiration of the specified time "Duration" ③. A switched on time-based output cam
remains active for the specified switch-on duration "Duration", even if overtravel of the start
position occurs again in the reverse direction.
The switching state of the output cam is output using "CamOutput".
With "Enable" = FALSE, the specified cam type is deactivated. "Busy" = FALSE shows that the
output cam is not being processed.

MC_CamTrack V4
MC_CamTrack: Activate/deactivate cam track V4
Description
With the Motion Control instruction "MC_CamTrack", the processing of a cam track is enabled.

Applies to
● Cam track

Requirement
● The technology object has been configured correctly.
● The higher-level technology object must have a valid position.
● Setpoint output cams are not output for an axis in non-position-controlled operation.

Override response
● The "MC_CamTrack" is aborted by the disabling of the cam track with
"MC_CamTrack.Enable" = FALSE.
● Only one instance of the "MC_CamTrack" function block can be active on a cam track in the
user program. A second instance of the "MC_CamTrack" function block on a currently active
cam track is rejected with an error.
● The cam track is recalculated at a change of the parameters of the Motion Control
instruction "MC_CamTrack" or in the technology data block. The cam track is processed in
accordance with all parameter settings.

Programación del PLC
Manual de programación y manejo, 11/2019

3335

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction "MC_CamTrack":
Parameters

Declara‐
tion

Data type

Default
value

Description

CamTrack

INPUT

TO_CamTrack

-

Technology object

Enable

INPUT

BOOL

FALSE

TRUE

The cam track is processed.

FALSE

The cam track is disabled.

Mode

INPUT

INT

1

0

When "Enable" = TRUE:
The cam track processing is activated
immediately. Cam track data takes ef‐
fect immediately
Previously activated distance output
cams are aborted if their track signal is
not still set due to the changed cam track
data.
Previously activated time-based output
cams are always aborted.
When "Enable" = FALSE:
The cam track processing is ended im‐
mediately. Distance output cams / timebased output cams are aborted imme‐
diately.

1

When "Enable" = TRUE:
The cam track processing is activated
immediately/with the next track cycle:
● When a cam track is activated for the
first time, the cam track processing
begins immediately.
● If the cam track processing is already
active, the current cam track is
output up to the end of the track
cycle. The new cam track data then
takes effect.
When "Enable" = FALSE:
The cam track processing is ended at
the end of the cam track

2

When "Enable" = TRUE:
The cam track output is switched on im‐
mediately and remains switched on
When "Enable" = FALSE:
The cam track output is switched off im‐
mediately.

InvertOutput

INPUT

BOOL

FALSE

Inverted output
TRUE

The track output is output inverted

FALSE

The track output is output non-inverted

TrackOutput

OUTPUT BOOL

-

Indicates the switching state of the cam track.

Busy

OUTPUT BOOL

FALSE

TRUE

3336

The processing of the cam track is active.

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Error

ErrorID

Data type

Default
value

Description

OUTPUT BOOL

FALSE

TRUE

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

An error occurred while processing the
job. The cause of the error can be found
in the "ErrorID" parameter.

MC_CamTrack: Function chart V4
Function chart: Activate cam track
$
0&B&DP7UDFN
&DP7UDFN

(QB

(QDEOH

%XV\



0RGH

(UURU



,QYHUW2XWSXW

(QB
7UDFN2XWSXW

(UURU,'





$

①
②
③

7UDFN2XWSXW

72B



























      

$[LVSRVLWLRQ>r@

Axis reference position
Output cam configured as invalid
Start of cyclically continued cam track

A cam track is activated with "Enable" = TRUE. The cam track is output in accordance with the
parameters set in the technology data block.
Tag

Value

Description

CamTrackType

0

Specified output cam type for the cam track is distance output cam

ReferencePosition

20.0

Specified axis reference position for the cam track

CamTrackLength

100.0

Specified length of the cam track

CamTrack[1].Existent

TRUE

The first distance output cam of the cam track is specified as valid

CamTrack[1].OnPosition

10.0

Start position for the first output cam of the cam track

CamTrack[1].OffPosition

20.0

End position for the first output cam of the cam track

<TO>Parameter.

CamTrack[2].Existent

FALSE

The second distance output cam of the cam track is specified as invalid

CamTrack[2].OnPosition

30.0

Start position for the second output cam of the cam track

CamTrack[2].OffPosition

50.0

End position for the second output cam of the cam track

CamTrack[3].Existent

TRUE

The third distance output cam of the cam track is specified as valid

CamTrack[3].OnPosition

60.0

Start position for the third output cam of the cam track

CamTrack[3].OffPosition

90.0

End position for the third output cam of the cam track

Programación del PLC
Manual de programación y manejo, 11/2019

3337

Instrucciones
4.1 Instrucciones

Synchronous motion
MC_GearIn V4
MC_GearIn: Start gear synchronization V4
Description
With the Motion Control instruction "MC_GearIn", you start a gearing operation between a
leading axis and a following axis.
You define the dynamic behavior of the following axis for synchronization with parameters
"Jerk", "Acceleration" and "Deceleration".
The synchronization duration and distance are dependent on the following parameters:
● Start time of the "MC_GearIn" job
● Dynamics of the following axis at the start time
● Dynamic settings for synchronization
● Dynamics of the leading axis
You specify the gear ratio as the relationship between two integers (numerator/denominator)
with the parameters "RatioNumerator" and "RatioDenominator".
The numerator of the gear ratio is specified as positive or negative. This yields the following
behavior:
● Positive gear ratio:
The leading and following axes move in the same direction.
● Negative gear ratio:
The following axis moves in the opposite direction of the leading axis.
You can start synchronous operation when the leading axis is at a standstill or when it is in
motion.

Applies to
● Synchronous axis

Requirement
● The technology objects of the leading axis and the following axis have been configured
correctly.
● The leading axis is a positioning axis, synchronous axis, or external encoder.
● The following axis is a synchronous axis.
● The leading axis is specified as possible leading axis in the configuration of the following
axis in "Technology object > Configuration > Leading value interconnections".
● The following axis is enabled.

3338

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Override response
The override response for "MC_GearIn" jobs is described in section Override response V4:
Synchronous operation jobs (Página 3433).
Disabling the following axis with "MC_Power.Enable" = FALSE aborts the synchronous
operation in every status.
Disabling the leading axis with "MC_Power", in contrast, does not abort synchronous operation.
The following axis follows the leading axis even during the braking ramp and after the leading
axis is enabled again.

Parameters
The following table shows the parameters of Motion Control instruction "MC_GearIn":
Parameters

Declara‐
tion

Data type

Default
value

Description

Master

INPUT

TO_Axis

-

Leading axis technology object

Slave

INPUT

TO_Synchronous‐ Axis

Following axis technology object

Execute

INPUT

BOOL

FALSE

TRUE

RatioNumerator

INPUT

DINT

1

Gear ratio numerator

Start job with a positive edge

Permitted integer values:
-2147483648 to 2147483647
(value 0 not permitted)
RatioDenominator

INPUT

DINT

1

Gear ratio denominator
Permitted integer values:
1 to 2147483647

Acceleration

INPUT

LREAL

-1.0

Acceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The acceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The deceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Programación del PLC
Manual de programación y manejo, 11/2019

3339

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default
value

Description

Jerk

INPUT

LREAL

-1.0

Jerk
> 0.0

Constant acceleration velocity profile
The specified value is used.

= 0.0

Trapezoid velocity profile

< 0.0

The jerk configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Jerk)

InGear

OUTPUT BOOL

FALSE

TRUE

Synchronous operation reached
The following axis is synchronized and
moves synchronously to the leading
axis.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

Starting synchronous operation
To start synchronous operation with the Motion Control instruction "MC_GearIn", follow these
steps:
1. Check the requirements indicated above.
2. Specify the leading axis, the following axis and the gear ratio at the corresponding
parameters.
3. Start the "MC_GearIn" job with a positive edge at parameter "Execute".
The following axis is synchronized to the leading value of the leading axis. If the "InGear"
parameter shows the value "TRUE", the following axis is synchronized and moves
synchronously to the leading axis. The parameters "InGear" and "Busy" show the value
"TRUE" until the "MC_GearIn" job is overridden by another Motion Control job.

Consulte también
Override response V4: Synchronous operation jobs (Página 3433)

3340

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_GearIn: Function chart V4
Function chart: Synchronizing and switching the leading value
$

$

0&B*HDU,Q
72B0DVWHUB
72B6ODYH
([HB

0DVWHU

,Q*HDU

6ODYH
([HFXWH

0&B*HDU,Q
%XV\

&RPPDQG$ERUWHG



5DWLR1XPHUDWRU



5DWLR'HQRPLQDWRU

,Q*HDUB
%XV\B

72B0DVWHUB
72B6ODYH

$ERUWB

([HB

0DVWHU
([HFXWH



5DWLR1XPHUDWRU



5DWLR'HQRPLQDWRU

$FFHOHUDWLRQ



$FFHOHUDWLRQ

'HFHOHUDWLRQ



'HFHOHUDWLRQ

([HB
%XV\B
,Q*HDUB
$ERUWB

ದ

-HUN





,Q*HDUB
%XV\B

&RPPDQG$ERUWHG

(UURU



$

%XV\

(UURU,'


ದ

,Q*HDU

6ODYH

(UURU
(UURU,'

-HUN












$
([HB
%XV\B
,Q*HDUB

W
W
W
W








W
W
W

72B0DVWHUB
9HORFLW\
72B6ODYH
9HORFLW\
72B0DVWHUB
9HORFLW\
W

Using "Exe_1", an "MC_GearIn" job (A1) is initiated. The following axis (TO_Slave) is
synchronized to the leading axis (TO_Master_1). "InGear_1" signals at time ① that the
following axis is synchronized and moves synchronously to the leading axis.
At time ②, synchronous operation is overridden by another "MC_GearIn" job (A2). The abort
is signaled via "Abort_1". The following axis is synchronized to the new leading axis
(TO_Master_2). "InGear_2" signals at time ③ that the following axis is synchronized and
moves synchronously to the leading axis.

Programación del PLC
Manual de programación y manejo, 11/2019

3341

Instrucciones
4.1 Instrucciones

MC_GearInPos V4
MC_GearInPos: Start gearing with specified synchronous positions V4
Description
With the Motion Control instruction "MC_GearInPos", you start a gearing operation between a
leading axis and a following axis. The synchronous operation is synchronized in advance of the
specified synchronous position for the leading and following axis.
The following types of synchronization are possible:
● Synchronization using dynamic parameters ("SyncProfileReference" = 0)
● Synchronization using leading value distance ("SyncProfileReference" = 1)
You specify the gear ratio as the relationship between two integers (numerator/denominator)
with the parameters "RatioNumerator" and "RatioDenominator".
The numerator of the gear ratio is specified as positive or negative. This yields the following
behavior:
● Positive gear ratio:
The leading and following axes move in the same direction.
● Negative gear ratio:
The following axis moves in the opposite direction of the leading axis.
You can start synchronous operation when the leading axis is at a standstill or when it is in
motion.

Applies to
● Synchronous axis

Requirement
● The technology objects of the leading axis and the following axis have been configured
correctly.
● The leading axis is a positioning axis, synchronous axis, or external encoder.
● The following axis is a synchronous axis.
● The leading axis is specified as possible leading axis in the configuration of the following
axis in "Technology object > Configuration > Leading value interconnections".
● The following axis is enabled.
● When using the "MasterStartDistance", the leading axis must be at least the specified
distance from the "MasterSyncPosition" when starting the job.

Override response
The override response for "MC_GearInPos" jobs is described in section Override response V4:
Synchronous operation jobs (Página 3433).

3342

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Disabling the following axis with "MC_Power.Enable" = FALSE aborts the synchronous
operation in every status.
Disabling the leading axis with "MC_Power", in contrast, does not abort synchronous operation.
The following axis follows the leading axis even during the braking ramp and after the leading
axis is enabled again.

Parameters
The following table shows the parameters of Motion Control instruction "MC_GearInPos":
Parameters

Declara‐
tion

Data type

Default
value

Description

Master

INPUT

TO_Axis

-

Leading axis technology object

Slave

INPUT

TO_Synchronous‐ Axis

Following axis technology object

Execute

INPUT

BOOL

FALSE

TRUE

RatioNumerator

INPUT

DINT

1

Gear ratio numerator

Start job with a positive edge

Permitted integer values:
-2147483648 to 2147483647
(value 0 not permitted)
RatioDenominator

INPUT

DINT

1

Gear ratio denominator
Permitted integer values:
1 to 2147483647

MasterSyncPosition

INPUT

LREAL

0.0

Synchronous position of leading axis
Position of the leading axis starting from which the
leading and following axes move synchronously

SlaveSyncPosition

INPUT

LREAL

0.0

Synchronous position of following axis
Position of the following axis starting from which
the leading and following axes move synchro‐
nously

SyncProfileReference

INPUT

DINT

1

MasterStartDistance

INPUT

LREAL

1.0

Velocity

INPUT

LREAL

-1.0

Type of synchronization
0

Synchronization using dynamic parame‐
ters

1

Synchronization using leading value dis‐
tance

Leading value distance
(with "SyncProfileReference" = 1)
Velocity
(with "SyncProfileReference" = 0)
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The velocity configured in "Technology
object > Configuration > Extended para‐
meters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Velocity)

Programación del PLC
Manual de programación y manejo, 11/2019

3343

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default
value

Description

Acceleration

INPUT

LREAL

-1.0

Acceleration
(with "SyncProfileReference" = 0)
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The acceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
(with "SyncProfileReference" = 0)
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The deceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk
(with "SyncProfileReference" = 0)
> 0.0

Constant acceleration velocity profile
The specified value is used.

= 0.0

Trapezoid velocity profile

< 0.0

The jerk configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Jerk)

SyncDirection

INPUT

DINT

3

Direction of synchronization
(in effect for axes with activated Modulo setting)
1

Positive direction
The following axis may only travel in po‐
sitive direction during synchronization.

2

Negative direction
The following axis may only travel in ne‐
gative direction during synchronization.

3

Shortest distance
Changes in direction are permitted for
the following axis during synchroniza‐
tion.

StartSync

OUTPUT BOOL

FALSE

TRUE

The following axis is synchronized to the
leading axis.

InSync

OUTPUT BOOL

FALSE

TRUE

Synchronous operation reached
The following axis is synchronized and
moves synchronously to the leading
axis.

Busy

3344

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

CommandAborted

Data type

Default
value

Description

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

Starting synchronous operation
To start synchronous operation with the Motion Control instruction "MC_GearInPos", follow
these steps:
1. Check the requirements indicated above.
2. Specify the leading axis, the following axis, the gear ratio and the synchronous position with
the corresponding parameters.
3. Start the "MC_GearInPos" job with a positive edge at parameter "Execute".
The following axis is synchronized to the leading value of the leading axis. If the "InSync"
parameter shows the value "TRUE", the following axis is synchronized and moves
synchronously to the leading axis. The parameters "InSync" and "Busy" show the value
"TRUE" until the "MC_GearInPos" job is overridden by another Motion Control job.

Consulte también
Override response V4: Synchronous operation jobs (Página 3433)

Programación del PLC
Manual de programación y manejo, 11/2019

3345

Instrucciones
4.1 Instrucciones

MC_GearInPos: Function chart V4
Function chart: Synchronization using dynamic parameters/leading value distance
$
0&B*HDU,Q3RV
0DVWHU

72B0DVWHU
72B6ODYH

6WDUW6\QF

6ODYH

,Q6\QF

([HFXWH

([H

%XV\



5DWLR1XPHUDWRU &RPPDQG$ERUWHG



5DWLR'HQRPLQDWRU



0DVWHU6\QF3RVLWLRQ



6ODYH6\QF3RVLWLRQ

635

6\QF3URILOH5HIHUHQFH



0DVWHU6WDUW'LVWDQFH

ದ

9HORFLW\

ದ

$FFHOHUDWLRQ

ದ

'HFHOHUDWLRQ

ದ

-HUN

6WDUW6\QF
,Q6\QF
%XV\

(UURU
(UURU,'

6\QF'LUHFWLRQ



$
([H
%XV\
635
6WDUW6\QF
,Q6\QF




W




W




W




W




W



72B0DVWHU

3RVLWLRQ



W

72B6ODYH

3RVLWLRQ


W

72B0DVWHU
9HORFLW\


W

72B6ODYH
9HORFLW\

$

3346

%

W

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Section
$

Section
%

Using "Exe", an "MC_GearInPos" job (A1) is initiated. The following axis (TO_Slave) is synchronized to the leading
axis (TO_Master) by means of the specified dynamic parameters. The distance required for synchronization is
calculated by the system. The start of the synchronization is displayed with "StartSync". When the specified
synchronous position is reached, "InSync" signals that the following axis is synchronized and moving synchro‐
nously to the leading axis.
Using "Exe", an "MC_GearInPos" job (A1) is initiated. The following axis (TO_Slave) is synchronized to the leading
axis (TO_Master) by means of the specified leading value distance. The dynamics required for synchronization is
calculated by the system. The start of the synchronization is displayed with "StartSync". "InSync" signals that the
following axis is synchronized and moving synchronously to the leading axis.

MC_PhasingAbsolute V4
MC_PhasingAbsolute: Absolute shift of leading value on the following axis V4
Description
With the Motion Control instruction "MC_PhasingAbsolute", you shift the leading value on a
following axis during gearing with "MC_GearIn" and "MC_GearInPos" as an absolute shift. The
position of the leading axis is not affected by this.
You define the dynamic response of the motion of the following axis with the parameters
"Velocity", "Jerk", "Acceleration", and "Deceleration". The dynamic values are added to the
values of the synchronous operation motion.

Applies to
● Synchronous axis

Requirement
● The technology objects of the leading axis and the following axis have been configured
correctly.
● The leading axis is a positioning axis, synchronous axis, or external encoder.
● The following axis is a synchronous axis.
● The leading axis is specified as possible leading axis in the configuration of the following
axis in "Technology object > Configuration > Leading value interconnections".
● By means of the Motion Control instruction "MC_GearIn" or "MC_GearInPos", the following
axis is synchronized to the leading axis ("MC_GearIn.InGear" = TRUE or
"MC_GearInPos.InSync" = TRUE).
● The following axis is enabled.

Override response
The override response for "MC_PhasingAbsolute" jobs is described in section Override
response V4: Synchronous operation jobs (Página 3433).

Programación del PLC
Manual de programación y manejo, 11/2019

3347

Instrucciones
4.1 Instrucciones
Disabling the leading axis with "MC_Power.Enable" = FALSE does not abort the leading value
shift. The following axis follows the leading axis even during the braking ramp and after the
leading axis is enabled again.

Parameters
The following table shows the parameters of Motion Control instruction "MC_PhasingAbsolute":
Parameters

Declara‐
tion

Data type

Default
value

Description

Master

INPUT

TO_Axis

-

Leading axis technology object

Slave

INPUT

TO_Synchronous‐ Axis

Following axis technology object

Execute

INPUT

BOOL

FALSE

TRUE

PhaseShift

INPUT

LREAL

0.0

Absolute leading value shift

Velocity

INPUT

LREAL

-1.0

Velocity of the following axis for leading value shift
(added to synchronous operation motion)

Start job with a positive edge

> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The velocity configured in "Technology
object > Configuration > Extended para‐
meters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Velocity)

Acceleration

INPUT

LREAL

-1.0

Acceleration of the following axis for leading value
shift (added to synchronous operation motion)
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The acceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration of the following axis for leading value
shift (added to synchronous operation motion)
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The deceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk of the following axis for leading value shift
(added to synchronous operation motion)
> 0.0

Constant acceleration velocity profile

= 0.0

Trapezoid velocity profile

< 0.0

The jerk configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.

The specified value is used.

(<TO>.DynamicDefaults.Jerk)

3348

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Done

Data type

Default
value

Description

OUTPUT BOOL

FALSE

TRUE

Leading value shift is finished.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

AbsolutePhaseShift

OUTPUT LREAL

0.0

As long as "Busy" = TRUE:
Display of leading value shift completed up to now

Start absolute leading value shift
To start an absolute leading value shift with the Motion Control instruction
"MC_PhasingAbsolute", follow these steps:
1. Check the requirements indicated above.
2. Specify the absolute leading value shift in the "PhaseShift" parameter.
3. Start the "MC_PhasingAbsolute" job with a positive edge at parameter "Execute".
The current motion state is indicated in parameters "Busy", "AbsolutePhaseShift", "Done"
and "Error".

Consulte también
Override response V4: Synchronous operation jobs (Página 3433)
MC_GearIn V4 (Página 3338)
MC_GearInPos V4 (Página 3342)

Programación del PLC
Manual de programación y manejo, 11/2019

3349

Instrucciones
4.1 Instrucciones

MC_PhasingAbsolute: Function chart V4
Function chart: Absolute shift of leading value
$

$

0&B*HDU,Q3RV
72B0DVWHU
72B6ODYH

0DVWHU

0&B3KDVLQJ$EVROXWH

6WDUW6\QF

6ODYH

,Q6\QF

([HFXWH

%XV\

72B0DVWHU
,Q6\QF

72B6ODYH

0DVWHU

'RQH

'RQH

6ODYH

%XV\

%XV\

([H

([HFXWH
3KDVH6KLIW



5DWLR1XPHUDWRU &RPPDQG$ERUWHG





5DWLR'HQRPLQDWRU

(UURU



(UURU,'

9HORFLW\

ದ

$FFHOHUDWLRQ

ದ

$FFHOHUDWLRQ

ದ

'HFHOHUDWLRQ

ದ

'HFHOHUDWLRQ

ದ

-HUN

ದ

-HUN

&RPPDQG$ERUWHG
(UURU
(UURU,'
$EVROXWH
3KDVH6KLIW

$EVROXWH
3KDVH6KLIW

$
,Q6\QF




W

$
([H
%XV\
'RQH
$EVROXWH
3KDVH6KLIW










W
W
W
W


72B0DVWHU3RVLWLRQ



W

72B6ODYH3RVLWLRQ


W

72B0DVWHU9HORFLW\

72B6ODYH9HORFLW\




72B6ODYH6WDWXV
6\QFKURQL]HG
0RWLRQ3KDVH6KLIW

W





3350

W

W

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
During an active gearing operation with "MC_GearInPos" (A1), a "MC_PhasingAbsolute" job
(A2) is initiated using "Exe". The leading value shift is performed with the dynamics specified
additively to the synchronous operation motion. "Done" indicates that the leading value was
successfully shifted. The leading value shift 50.0 resulting from the job is indicated in
"AbsolutePhaseShift". The absolute leading value shift 50.0 is indicated in the tag of the
technology object <TO>.StatusSynchronizedMotion.PhaseShift. The motion of the leading
axis is not affected.
After the leading value shift, the "MC_PhasingAbsolute" job (A2) is initiated again using "Exe".
Because the leading value shift (<TO>.StatusSynchronizedMotion.PhaseShift) is already 50.0,
the leading value is not shifted.

MC_PhasingRelative V4
MC_PhasingRelative: Relative shift of leading value on the following axis V4
Description
With the Motion Control instruction "MC_PhasingRelative", you shift the leading value on a
following axis during gearing with "MC_GearIn" and "MC_GearInPos" relative to the existing
leading value shift. The position of the leading axis is not affected by this.
You define the dynamic response of the motion of the following axis with the parameters
"Velocity", "Jerk", "Acceleration", and "Deceleration". The dynamic values are added to the
values of the synchronous operation motion.

Applies to
● Synchronous axis

Requirement
● The technology objects of the leading axis and the following axis have been configured
correctly.
● The leading axis is a positioning axis, synchronous axis, or external encoder.
● The following axis is a synchronous axis.
● The leading axis is specified as possible leading axis in the configuration of the following
axis in "Technology object > Configuration > Leading value interconnections".
● By means of the Motion Control instruction "MC_GearIn" or "MC_GearInPos", the following
axis is synchronized to the leading axis ("MC_GearIn.InGear" = TRUE or
"MC_GearInPos.InSync" = TRUE).
● The following axis is enabled.

Override response
The override response for "MC_PhasingRelative" jobs is described in section Override
response V4: Synchronous operation jobs (Página 3433).

Programación del PLC
Manual de programación y manejo, 11/2019

3351

Instrucciones
4.1 Instrucciones
Disabling the leading axis with "MC_Power.Enable" = FALSE does not abort the leading value
shift. The following axis follows the leading axis even during the braking ramp and after the
leading axis is enabled again.

Parameters
The following table shows the parameters of Motion Control instruction "MC_PhasingRelative":
Parameters

Declara‐
tion

Data type

Default
value

Description

Master

INPUT

TO_Axis

-

Leading axis technology object

Slave

INPUT

TO_Synchronous‐ Axis

Following axis technology object

Execute

INPUT

BOOL

FALSE

TRUE

PhaseShift

INPUT

LREAL

0.0

Relative leading value shift

Velocity

INPUT

LREAL

-1.0

Velocity of the following axis for leading value shift
(added to synchronous operation motion)

Start job with a positive edge

> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The velocity configured in "Technology
object > Configuration > Extended para‐
meters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Velocity)

Acceleration

INPUT

LREAL

-1.0

Acceleration of the following axis for leading value
shift (added to synchronous operation motion)
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The acceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration of the following axis for leading value
shift (added to synchronous operation motion)
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The deceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk of the following axis for leading value shift
(added to synchronous operation motion)
> 0.0

Constant acceleration velocity profile

= 0.0

Trapezoid velocity profile

< 0.0

The jerk configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.

The specified value is used.

(<TO>.DynamicDefaults.Jerk)

3352

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Done

Data type

Default
value

Description

OUTPUT BOOL

FALSE

TRUE

Leading value shift is finished.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

CoveredPhaseShift

OUTPUT LREAL

0.0

As long as "Busy" = TRUE:
Display of leading value shift completed up to now

Start relative leading value shift
To start a relative leading value shift with the Motion Control instruction "MC_PhasingRelative",
follow these steps:
1. Check the requirements indicated above.
2. Specify the relative leading value shift in the "PhaseShift" parameter.
3. Start the "MC_PhasingRelative" job with a positive edge at parameter "Execute".
The current motion state is indicated in parameters "Busy", "CoveredPhaseShift", "Done"
and "Error".

Consulte también
Override response V4: Synchronous operation jobs (Página 3433)
MC_GearIn V4 (Página 3338)
MC_GearInPos V4 (Página 3342)

Programación del PLC
Manual de programación y manejo, 11/2019

3353

Instrucciones
4.1 Instrucciones

MC_PhasingRelative: Function chart V4
Function chart: Relative shift of leading value
$

$
0&B3KDVLQJ5HODWLYH

0&B*HDU,Q3RV
72B0DVWHU
72B6ODYH

0DVWHU

6WDUW6\QF

6ODYH

,Q6\QF

([HFXWH

72B0DVWHU
,Q6\QF

72B6ODYH

0DVWHU

'RQH

'RQH

6ODYH

%XV\

%XV\

%XV\

([H

([HFXWH



5DWLR1XPHUDWRU &RPPDQG$ERUWHG



3KDVH6KLIW



5DWLR'HQRPLQDWRU

(UURU

ದ

9HORFLW\

(UURU,'

ದ

$FFHOHUDWLRQ

ದ

$FFHOHUDWLRQ

ದ

'HFHOHUDWLRQ

ದ

'HFHOHUDWLRQ

ದ

-HUN

ದ

-HUN

&RPPDQG$ERUWHG
(UURU
(UURU,'
&RYHUHG
3KDVH6KLIW

&RYHUHG
3KDVH6KLIW

$
,Q6\QF




W

$
([H
%XV\
'RQH
&RYHUHG
3KDVH6KLIW










W
W
W
W


72B0DVWHU3RVLWLRQ



W

72B6ODYH3RVLWLRQ


W

72B0DVWHU9HORFLW\


W

72B6ODYH9HORFLW\

72B6ODYH6WDWXV
6\QFKURQL]HG
0RWLRQ3KDVH6KLIW




3354

W



W

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
During an active gearing operation with "MC_GearInPos" (A1), a "MC_PhasingRelative" job
(A2) is initiated using "Exe". The leading value shift is performed with the dynamics specified
additively to the synchronous operation motion. "Done" indicates that the leading value was
successfully shifted. The leading value shift 50.0 resulting from the job is indicated in
"CoveredPhaseShift". The absolute leading value shift 50.0 is indicated in the tag of the
technology object <TO>.StatusSynchronizedMotion.PhaseShift. The motion of the leading
axis is not affected.
After the leading value shift, the "MC_PhasingRelative" job (A2) is initiated again using "Exe".
The leading value shift is performed again with the dynamics specified additively to the
synchronous operation motion. "Done" indicates that the leading value was successfully
shifted. The leading value shift 50.0 resulting from the job is indicated in "CoveredPhaseShift".
The absolute leading value shift 100.0 is indicated in the tag of the technology object
<TO>.StatusSynchronizedMotion.PhaseShift.

MC_CamIn V4
MC_CamIn: Start camming V4
Description
With the Motion Control instruction "MC_CamIn", you start a camming operation between a
leading axis and a following axis.
With the "SyncProfileReference" parameter, you specify the synchronization profile.
● "SyncProfileReference" = 0 or 1
The synchronous operation is synchronized in advance of the specified synchronous
position of the leading axis.
The synchronous position of the leading axis starting from which the leading and following
axes move synchronously results from the starting position of the cam and the
"MasterSyncPosition" and "MasterOffset" parameters.
With the "MasterOffset" parameter, you offset the leading values of the cam (with
"SyncProfileReference" = 0 or 1). This determines the position of the cam in relation to the
leading value of the synchronous operation function. This is how you move the cam to the
required position range.
● "SyncProfileReference" = 2
Synchronous operation is immediately set to synchronous. You use the
"MasterSyncPosition" parameter to set the exact synchronous position in the cam. This
setting is used mainly for synchronizing at a standstill.
A cam is defined between the start position (<TO>.StatusCam.StartLeadingValue) and end
position (<TO>.StatusCam.EndLeadingValue) after interpolation. The specification for leading
and following value range in the configuration of the technology object only effect the display in
the graphical editor.
With the "MasterSyncPosition" parameter, you specify the synchronization position in the cam
relative to the starting position of the cam. Synchronization is completed upon reaching the
synchronous position. To run through the entire cam, specify the value 0.0 (default value) in
"MasterSyncPosition". With "MasterSyncPosition" ≠ 0.0, you move the synchronous position
within the cam without changing the position of the cam.

Programación del PLC
Manual de programación y manejo, 11/2019

3355

Instrucciones
4.1 Instrucciones
The figure below shows the basic effect of the leading value and following value offset as well
as the definition of the cam with the following parameter values:
● Start position of the cam > 0

)ROORZLQJYDOXH

)ROORZLQJYDOXHRIWKHV\QFKURQRXV
RSHUDWLRQIXQFWLRQ
IROORZLQJD[LVSRVLWLRQ

● "MasterSyncPosition" > 0

'HILQLWLRQRIWKHFDP

6ODYH2IIVHW

/HDGLQJYDOXH

0DVWHU2IIVHW

/HDGLQJYDOXHRIWKHV\QFKURQRXVRSHUDWLRQIXQFWLRQ
OHDGLQJD[LVSRVLWLRQ



①
②
③





Start position of the cam
First defined interpolation point/start of the first segment of the cam (<TO>.StatusCam.Star‐
tLeadingValue)
Completion of synchronization ("MasterSyncPosition")
End position of the cam
Last defined interpolation point/end of the last segment of the cam (<TO>.StatusCam.EndLea‐
dingValue)

The figure below shows the basic effect of scaling the cam with the parameters "MasterScaling"
and "SlaveScaling":

3356

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
0DVWHU6FDOLQJ 
6ODYH6FDOLQJ 

0DVWHU6FDOLQJ 
6ODYH6FDOLQJ 











W

W
0DVWHU6FDOLQJ 
6ODYH6FDOLQJ 

0DVWHU6FDOLQJ 
6ODYH6FDOLQJ 












W

W

Leading value
Following value

The following types of synchronization are possible:
● Synchronization using dynamic parameters ("SyncProfileReference" = 0)
● Synchronization using leading value distance ("SyncProfileReference" = 1)
● Set direct synchronous ("SyncProfileReference" = 2)
You can start synchronous operation when the leading axis or following axis is at a standstill or
when it is in motion.

Applies to
● Synchronous axis

Requirement
● The technology objects of the leading axis, following axis, and cam have been configured
correctly.
● The leading axis is a positioning axis, synchronous axis, or external encoder.
● The following axis is a synchronous axis.
● The leading axis is specified as possible leading axis in the configuration of the following
axis in "Technology object > Configuration > Leading value interconnections".

Programación del PLC
Manual de programación y manejo, 11/2019

3357

Instrucciones
4.1 Instrucciones
● The following axis is enabled.
● The cam is interpolated with "MC_InterpolateCam".
● When using the "MasterStartDistance", the leading axis must be at least the specified
distance from the "MasterSyncPosition" when starting the job.

Override response
The override response for "MC_CamIn" jobs is described in section Override response V4:
Synchronous operation jobs (Página 3433).
Disabling the following axis with "MC_Power.Enable" = FALSE aborts the synchronous
operation in every status.
Disabling the leading axis with "MC_Power", in contrast, does not abort synchronous operation.
The following axis follows the leading axis even during the braking ramp and after the leading
axis is enabled again.

Parameters
The following table shows the parameters of Motion Control instruction "MC_CamIn":
Parameter

Declara‐
tion

Data type

Default
value

Description

Master

INPUT

TO_Axis

-

Leading axis technology object

Slave

INPUT

TO_Synchronous‐ Axis

Following axis technology object

Cam

INPUT

TO_Cam

-

Cam technology object

Execute

INPUT

BOOL

FALSE

TRUE

MasterOffset

INPUT

LREAL

0.0

Offset of the leading values of cam

Start job with a positive edge

(with "SyncProfileReference" =0 or 1)
The cam technology object is not changed.
SlaveOffset

INPUT

LREAL

0.0

Offset of the following values of cam
(with "SyncProfileReference" =0 or 1)
The cam technology object is not changed.

MasterScaling

INPUT

LREAL

1.0

SlaveScaling

INPUT

LREAL

1.0

MasterSyncPosition

INPUT

LREAL

0.0

Scaling the leading values of the cam
The cam technology object is not changed.
Scaling the following values of the cam
The cam technology object is not changed.
Synchronous position
End position of the synchronization on the leading
value side in relation to the start position of the cam
(<TO>.StatusCam.StartLeadingValue)
The value must be within the definition of the cam.

3358

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

SyncProfileReference

INPUT

DINT

1

Synchronization profile

MasterStartDistance

INPUT

LREAL

0.0

0

Synchronization using dynamic parame‐
ters

1

Synchronization using leading value dis‐
tance

2

Direct synchronous setting

Leading value distance (distance of the leading
axis during the synchronization)
(with "SyncProfileReference" = 1)

Velocity

INPUT

LREAL

-1.0

Velocity
(with "SyncProfileReference" = 0)
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The velocity configured in "Technology
object > Configuration > Extended para‐
meters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Velocity)

Acceleration

INPUT

LREAL

-1.0

Acceleration
(with "SyncProfileReference" = 0)
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The acceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
(with "SyncProfileReference" = 0)
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The deceleration configured in "Techno‐
logy object > Configuration > Extended
parameters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk
(with "SyncProfileReference" = 0)
> 0.0

Constant acceleration velocity profile
The specified value is used.

= 0.0

Trapezoid velocity profile

< 0.0

The jerk configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Jerk)

Programación del PLC
Manual de programación y manejo, 11/2019

3359

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

ApplicationMode

INPUT

DINT

0

Application of the cam

SyncDirection

INPUT

DINT

3

0

Once/not cyclic

1

Cyclic (absolute application on the follo‐
wing value side)

2

Cyclic appending (continuously appen‐
ding on the following value side)

Direction of synchronization
(in effect for axes with activated Modulo setting)
1

Positive direction
The following axis may only travel in po‐
sitive direction during synchronization.

2

Negative direction
The following axis may only travel in ne‐
gative direction during synchronization.

3

Shortest distance
Changes in direction are permitted for
the following axis during synchroniza‐
tion.

StartSync

OUTPUT BOOL

FALSE

TRUE

The following axis is synchronized to the
leading axis.

InSync

OUTPUT BOOL

FALSE

TRUE

Synchronous operation reached
The following axis is synchronized and
moves synchronously to the leading
axis.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

EndOfProfile

OUTPUT BOOL

FALSE

TRUE

The end of the cam has been reached.
Displayed for at least one call of
"MC_CamIn" in the user program when
the cam is used cyclically.

3360

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Starting synchronous operation
To start synchronous operation with the Motion Control instruction "MC_CamIn", follow these
steps:
1. Check the requirements indicated above.
2. Specify the leading axis, the following axis, the utilized cam and the synchronous position
in the corresponding parameters.
3. Start the "MC_CamIn" job with a positive edge at parameter "Execute".
The following axis is synchronized to the leading value of the leading axis. If the "InSync"
parameter shows the value "TRUE", the following axis is synchronized and moves
synchronously to the leading axis. With cyclic application of the cam, "InSync" and "Busy"
show the value "TRUE" until the "MC_CamIn" job is overridden by another Motion Control
job. With non-cyclic application of the cam, "InSync" and "Busy" are set to the value
"FALSE" when the parameter "EndOfProfile" is set to the value "TRUE".

Consulte también
Override response V4: Synchronous operation jobs (Página 3433)

Programación del PLC
Manual de programación y manejo, 11/2019

3361

Instrucciones
4.1 Instrucciones

MC_CamIn: Function chart V4
Function chart: Synchronizing and switching the cam
$

$
0&B&DP,Q

0&B&DP,Q
72B0DVWHU

0DVWHU

72B0DVWHU
72B6ODYH
&DPB

6ODYH

&DPB

&DP

([HB

0DVWHU

72B6ODYH

6ODYH

&DP

([HB

([HFXWH

([HFXWH

0DVWHU2IIVHW

0DVWHU2IIVHW

6ODYH2IIVHW

6ODYH2IIVHW

0DVWHU6FDOLQJ

0DVWHU6FDOLQJ

6ODYH6FDOLQJ

6ODYH6FDOLQJ


0DVWHU6\QF3RVLWLRQ



0DVWHU6WDUW'LVWDQFH

6WDUW6\QF
,Q6\QF

ದ

9HORFLW\

ದ

$FFHOHUDWLRQ

%XV\

ದ

'HFHOHUDWLRQ

&RPPDQG$ERUWHG

-HUN

ದ

6\QF'LUHFWLRQ

6WDUW6\QFB

0DVWHU6WDUW'LVWDQFH

6WDUW6\QF

9HORFLW\

%XV\B

$FFHOHUDWLRQ

%XV\

$ERUWB

'HFHOHUDWLRQ

&RPPDQG$ERUWHG

,Q6\QF

-HUN

(UURU


6\QF'LUHFWLRQ

6WDUW6\QFB
,Q6\QFB
%XV\B

(UURU
(UURU,'

$SSOLFDWLRQ0RGH

(QG2I3URILOH



(QG2I3URILOH

(RSB





3362

6\QF3URILOH5HIHUHQFH



,Q6\QFB

(UURU,'

$SSOLFDWLRQ0RGH



0DVWHU6\QF3RVLWLRQ



6\QF3URILOH5HIHUHQFH



&DPB





&DPB



Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
$


([HB




%XV\B

W



6WDUW6\QFB

W




W



,Q6\QFB



W



$ERUWB



W

$


([HB




%XV\B

W



6WDUW6\QFB

W




W



,Q6\QFB



W



(RSB



W






72B0DVWHU
3RVLWLRQ



W

ದ
72B6ODYH
3RVLWLRQ




W


72B0DVWHU
9HORFLW\


W



72B6ODYH

9HORFLW\
ದ

W

6\QFB

6\QFB

Using "Exe_1", an "MC_CamIn" job (A1) is initiated. The start of the synchronization is
displayed with "StartSync_1". The following axis (TO_Slave) is synchronized to the cam
(Cam_1) within the range "Sync_1" by means of the specified dynamic parameters. "InSync_1"
signals that the following axis is synchronized and moving synchronously to the leading axis.

Programación del PLC
Manual de programación y manejo, 11/2019

3363

Instrucciones
4.1 Instrucciones
The synchronous operation is overridden by another "MC_CamIn" job (A2). The abort is
signaled via "Abort_1". The start of the synchronization is displayed with "StartSync_2". The
following axis is synchronized to the new cam (Cam_2) within the range "Sync_2" by means of
the specified leading value distance. Within the range "Sync_2", the axis does not follow the
cam "Cam_1" The axis is moved with the dynamics calculated by the system to the
synchronous position of A2. "InSync_2" signals that the following axis is synchronized and
moving synchronously to the leading axis.

MC_SynchronizedMotionSimulation V4
MC_SynchronizedMotionSimulation: Simulate synchronous operation V4
Description
With the Motion Control instruction "MC_SynchronizedMotionSimulation", you simulate an
active synchronous operation on a following axis. As a result, a synchronous operation remains
active when the following axis is disabled with a "MC_Power" job. The following axis does not
have to be synchronized again after being enabled again.
With the start of a "MC_SynchronizedMotionSimulation" job, the velocity setpoint from the
synchronous operation is set to zero. If an overlaid movement is active on the following axis at
the start of the simulation, the setpoints of this overlaid movement will continue to be output.
Setpoints of motion jobs that are started during synchronous operation simulation are output to
the drive.
If the position of the following axis at the end of the simulation differs from the position at the
start of the simulation, this triggers a setpoint step-change.

Applies to
● Synchronous axis

Requirement
● The technology object has been configured correctly.
● The following axis is a synchronous axis.
● Synchronous operation is active on the technology object in status "Synchronous"
(<TO>.StatusWord.X22 = TRUE).

Override response
An "MC_SynchronizedMotionSimulation" job is not aborted by any other Motion Control job.
The simulated synchronous operation remains active even when the following axis is disabled
with "MC_Power.Enable" = FALSE.
A restart of the technology object stops the simulation and aborts the synchronous operation.

3364

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
A new "MC_SynchronizedMotionSimulation" job does not abort any other Motion Control jobs.
With "MC_SynchronizedMotionSimulation.Enable" = TRUE, synchronous operation jobs are
rejected.

Parameters
The following table shows the parameters of Motion Control instruction
"MC_SynchronizedMotionSimulation":
Parameters

Declara‐
tion

Data type

Default
value

Slave

INPUT

TO_Synchronous‐ Axis

Following axis technology object

Enable

INPUT

BOOL

TRUE

Simulation of synchronous operation is
started.

FALSE

Simulation of the synchronous operation
is stopped.

FALSE

Description

InSimulation

OUTPUT BOOL

FALSE

TRUE

Synchronous operation is being simula‐
ted

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

Continuing synchronous operation when the following axis is disabled
In order not to stop synchronous operation with "MC_SynchronizedMotionSimulation" Motion
Control instruction when the following axis is disabled, follow these steps:
1. Check the requirements indicated above.
2. Specify the following axis in the "Slave" parameter.
3. Bring the leading axis to a standstill (e.g. with "MC_Halt").
4. Start the simulation of the synchronous operation on the following axis with
"MC_SynchronizedMotionSimulation.Enable" = TRUE.
5. When the "InSimulation" parameter shows the value TRUE, disable the following axis. The
synchronous operation remains active in the simulation.
6. To reset synchronous operation again after the following axis is enabled, stop synchronous
operation simulation with "MC_SynchronizedMotionSimulation.Enable" = FALSE.
The synchronous operation simulation is stopped. The following axis follows the leading
axis without re-synchronization.

Programación del PLC
Manual de programación y manejo, 11/2019

3365

Instrucciones
4.1 Instrucciones

Cam
MC_InterpolateCam V4
MC_InterpolateCam: Interpolate cam disc V4
Description
With the Motion Control instruction "MC_InterpolateCam", you interpolate a cam.
The interpolation closes the gaps between the defined interpolation points and segments of the
cam. The cam is interpolated between the following values in the definition range:
● First defined interpolation point/start of the first segment of the cam
(<TO>.StatusCam.StartLeadingValue)
● Last defined interpolation point/end of the last segment of the cam
(<TO>.StatusCam.EndLeadingValue)
After interpolation, an explicit value in the value range is assigned to each value in the definition
range.
The interpolation type defines how missing ranges are interpolated. You specify the
interpolation type in the configuration of the technology object. The following interpolation
methods are possible:
● Linear interpolation
● Interpolation with cubic splines
● Interpolation with Bézier splines

Applies to
● Cam

Requirement
● The technology object has been configured correctly.
● The cam is not currently being used, e.g. for camming.

Override response
● An "MC_InterpolateCam" job is not aborted by any other Motion Control job.
● A new "MC_InterpolateCam" job does not abort any active motion control jobs.

3366

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction "MC_InterpolateCam":
Parameters

Declara‐
tion

Data type

Default
value

Description

Cam

INPUT

TO_Cam

-

Cam technology object

Execute

INPUT

BOOL

FALSE

TRUE

Start job with a positive edge

Done

OUTPUT BOOL

FALSE

TRUE

The cam is interpolated.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

Interpolating a cam disc
To interpolate a cam with the "MC_InterpolateCam" Motion Control instruction, follow these
steps:
1. Check the requirements indicated above.
2. Specify the cam to be interpolated in the "Cam" parameter.
3. Start the "MC_InterpolateCam" job with a positive edge at parameter "Execute".
The cam is interpolated. When the "Done" parameter shows the value "TRUE", the
interpolation is finished.

MC_GetCamFollowingValue V4
MC_GetCamFollowingValue: Read out following value of a cam disc V4
Description
With the Motion Control instruction "MC_GetCamFollowingValue", you read the following value
and the first and second derivative of the following value for a leading value from a cam.

Applies to
● Cam

Requirement
● The technology object has been configured correctly.
● The cam is interpolated.

Programación del PLC
Manual de programación y manejo, 11/2019

3367

Instrucciones
4.1 Instrucciones

Override response
● An "MC_GetCamFollowingValue" job is not aborted by any other Motion Control job.
● A new "MC_GetCamFollowingValue" job does not abort any active motion control jobs.

Parameters
The following table shows the parameters of Motion Control instruction
"MC_GetCamFollowingValue":
Parameters

Declara‐
tion

Data type

Default
value

Description

Cam

INPUT

TO_Cam

-

Cam technology object

Execute

INPUT

BOOL

FALSE

TRUE

LeadingValue

INPUT

LREAL

0.0

Leading value for which the following value is read

Done

OUTPUT BOOL

FALSE

TRUE

The following value was read.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

Value

OUTPUT LREAL

-

Read following value (position)

Start job with a positive edge

(valid when "Done" = TRUE)
FirstDerivative

OUTPUT LREAL

-

First derivative of read following value
(valid when "Done" = TRUE)

SecondDerivative

OUTPUT LREAL

-

Second derivative of read following value
(valid when "Done" = TRUE)

Reading a following value
To read a following value from a cam with the "MC_GetCamFollowingValue" Motion Control
instruction, follow these steps:
1. Check the requirements indicated above.
2. Specify the cam and the leading value in the corresponding parameters.
3. Start the "MC_GetCamFollowingValue" job with a positive edge at parameter "Execute".
When the "Done" parameter shows the value "TRUE", the following value has been read.
The following value and the derivatives are output in the "Value", "FirstDerivative" and
"SecondDerivative" parameters.

3368

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_GetCamLeadingValue V4
MC_GetCamLeadingValue: Read out leading value of a cam disc V4 (S7-1500T)
Description
With the Motion Control instruction "MC_GetCamLeadingValue", you read the leading value
that is defined for a following value from a cam.
Because the same following values can be defined for different leading values, an
approximation of the leading value can specified in the "ApproachValue" parameter.

Applies to
● Cam

Requirement
● The technology object has been configured correctly.
● The cam is interpolated.

Override response
● An "MC_GetCamLeadingValue" job is not aborted by any other Motion Control job.
● A new "MC_GetCamLeadingValue" job does not abort any active motion control jobs.

Parameters
The following table shows the parameters of Motion Control instruction
"MC_GetCamLeadingValue":
Parameter

Declara‐
tion

Data type

Default
value

Description

Cam

INPUT

TO_Cam

-

Cam technology object

Execute

INPUT

BOOL

FALSE

TRUE

FollowingValue

INPUT

LREAL

0.0

Following value for which the leading value is read

ApproachLeadingValue

INPUT

LREAL

0.0

Approximation value for the searched for leading
value

Start job with a positive edge

If the following value is used multiple times in the
cam, it can be used to limit the searched leading
value.
Done

OUTPUT BOOL

FALSE

TRUE

The leading value was read.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

Programación del PLC
Manual de programación y manejo, 11/2019

3369

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

ErrorID
Value

Data type

Default
value

Description

OUTPUT WORD

0

Error ID for parameter "ErrorID"

OUTPUT LREAL

-

Read leading value (position)
(valid when "Done" = TRUE)

Reading a leading value
To read a leading value from a cam with the "MC_GetCamLeadingValue" Motion Control
instruction, follow these steps:
1. Check the requirements indicated above.
2. Specify the cam, the following value, and the approximation value for the searched-for
leading value in the corresponding parameters.
3. Start the "MC_GetCamLeadingValue" job with a positive edge at parameter "Execute".
When the "Done" parameter shows the value "TRUE", the leading value has been
determined. The calculation of the leading value can take several cycles. The leading value
is output in the "Value" parameter.

MotionIn
MC_MotionInVelocity V4
MC_MotionInVelocity: Specify motion setpoints V4
Description
With the Motion Control instruction "MC_MotionInVelocity", you specify cyclically applicable
calculated motion setpoints for velocity and acceleration as a basic motion for the axis. No
velocity profile is calculated for this, the values are directly active at the technology object. The
dynamic limits are not in effect. The motion setting using MotionIn can be superimposed with
an "MC_MoveSuperimposed" job (Página 3319).
With the "Velocity" parameter, you specify the desired velocity and with "Acceleration" the
desired acceleration. The setpoint velocity and setpoint acceleration are effective when the
parameter "Enable" = TRUE and at least the value for the "Velocity" parameter needs to be
specified.

Applies to
● Speed axis
● Positioning axis
● Synchronous axis

3370

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Requirement
● The technology object has been configured correctly.
● The technology object has been enabled.

Override response
The override response for "MC_MotionInVelocity" jobs is described in section "Override
response V4: Homing and motion jobs (Página 3433)".
Nota
Dynamic deviation possible
Pay attention to consistent specifications relating to velocity and acceleration when the
"MotionIn" instruction is overridden by another Motion Control instruction.
When the "MotionIn" instruction is overridden, make sure that the new acceleration
specifications are coordinated with the currently effective acceleration because the last
effective acceleration value will be applied.

Parameters
The following table shows the parameters of Motion Control instruction "MC_MotionInVelocity":
Parameter

Declara‐
tion

Axis

INPUT

Data type

Default
value

Description

TO_SpeedAxis

-

Technology object

FALSE

TRUE

TO_PositioningA‐
xis
TO_Synchronou‐
sAxis
Enable

INPUT

BOOL

Start job with a positive edge
The specified setpoints are used as long
as the parameter is set to "TRUE".

FALSE

End of the job with negative edge
If the parameter is set from "TRUE" to
"FALSE", the setpoints are set to 0.0.

Velocity

INPUT

LREAL

0.0

Acceleration

INPUT

LREAL

0.0

Velocity setpoint
Observe the dynamic limits.
Setpoint acceleration
Observe the dynamic limits.

PositionControlled

INPUT

BOOL

TRUE

TRUE

Position-controlled mode

FALSE

Controlled running

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Programación del PLC
Manual de programación y manejo, 11/2019

3371

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Error

ErrorID

Data type

Default
value

Description

OUTPUT BOOL

FALSE

TRUE

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

Consulte también
Override response V4: Homing and motion jobs (Página 3433)

MC_MotionInVelocity: Function chart V4
Function chart: Specify motion setpoints
0&B0RWLRQ,Q9HORFLW\
72B
(QDEOHB

%XV\

$[LV
(QDEOH

9HOB

9HORFLW\

$FFB

$FFHOHUDWLRQ

3RV&RQWUB

%XV\B

&RPPDQG$ERUWHG
(UURU

(UURUB

(UURU,'

3RVLWLRQ&RQWUROOHG



(QDEOHB
%XV\B
(UURUB
3RV&RQWUB




W




W




W




W



9HOB





$FFB

W




W

ದ
0&3UH6HUYR
F\FOH








W
$

3372

%

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones



72B9HORFLW\





72B
$FFHOHUDWLRQ

72B6WDWXV
3RVLWLRQLQJ
)ROORZLQJ
(UURU

W




W

ದ

0D[

0&3UH6HUYR
F\FOH

W







W
$

Section
$

%

With "Enable_1 = TRUE" the technology object is specified cyclic in the MC-PreServo-clock velocity
"Vel_1" and acceleration "Acc_1". These specifications are applied directly as setpoint velocity
"TO_1.Velocity" and setpoint acceleration "TO_1.Acceleration", without hereby calculating a velocity
profile.
As the position monitoring "PosContr_1" is set to FALSE, no following error "TO_1.StatusPositio‐
ning.FollowingError" is determined.

Section
%

The velocity and acceleration specifications are not active as long as "Enable_1" is set to FALSE.

At time ①, "Enable_1" is set to TRUE. As the position monitoring "PosContr_1" is set to TRUE, a
following error "TO_1.StatusPositioning.FollowingError" is determined.
The velocity specification "Vel_1" and the acceleration default "Acc_1" cause a setpoint jump which
exceeds the maximum permissible following error. With active position lag monitoring, the technology
alarm 521 is output, and the technology object is disabled. With deactivated following error monitoring,
the setpoint jump is executed with maximum dynamic.

MC_MotionInPosition V4
MC_MotionInPosition: Specify motion setpoints V4
Description
With the Motion Control instruction "MC_MotionInPosition", you specify the cyclic, applicable
motion setpoints for position, velocity and acceleration as basic motion for the axis. No velocity
profile is calculated for this, the values are directly active at the technology object. The dynamic
limits are not in effect. The motion setting using "MotionIn" can be superimposed with
an "MC_MoveSuperimposed" job (Página 3319).
With the "Position" parameter, you specify the set position. With the "Velocity" parameter, you
specify the setpoint velocity. With the "Acceleration" parameter, you specify the setpoint
acceleration.

Programación del PLC
Manual de programación y manejo, 11/2019

3373

Instrucciones
4.1 Instrucciones
The setpoint velocity is used as a feedforward control value when velocity feedforward control
is activated. The setpoint position, setpoint velocity and setpoint acceleration are effective
when the parameter "Enable" = TRUE and at least the values for the "Position" and "Velocity"
parameters are specified.

Applies to
● Positioning axis
● Synchronous axis

Requirement
● The technology object has been configured correctly.
● The technology object has been enabled.

Override response
The override response for "MC_MotionInPosition" jobs is described in section "Override
response V4: Homing and motion jobs (Página 3433)".
Nota
Dynamic deviation possible
Pay attention to consistent specifications relating to velocity and acceleration when the
"MotionIn" instruction is overridden by another Motion Control instruction.
When the "MotionIn" instruction is overridden, make sure that the new acceleration
specifications are coordinated with the currently effective acceleration because the last
effective acceleration value will be applied.

Parameters
The following table shows the parameters of Motion Control instruction "MC_MotionInPosition":
Parameter

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_Positioning‐
Axis

-

Technology object

FALSE

TRUE

TO_Synchronou‐
sAxis
Enable

INPUT

BOOL

Start job with a positive edge
The specified setpoints are used as long
as the parameter is set to "TRUE".

FALSE

End of the job with negative edge
If the parameter is set from "TRUE" to
"FALSE", the setpoints are set to 0.0.
The most recently specified value re‐
mains active for the position setpoint.

3374

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

Position

INPUT

LREAL

0.0

Position setpoint

Velocity

INPUT

LREAL

0.0

Velocity setpoint
Observe the dynamic limits.

Acceleration

INPUT

LREAL

0.0

Setpoint acceleration
Observe the dynamic limits.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for the parameter "ErrorID"

Consulte también
Override response V4: Homing and motion jobs (Página 3433)

Programación del PLC
Manual de programación y manejo, 11/2019

3375

Instrucciones
4.1 Instrucciones

MC_MotionInPosition: Function chart V4
Function chart: Specify motion setpoints
0&B0RWLRQ,Q3RVLWLRQ
72B
(QDEOHB

%XV\

$[LV
(QDEOH

%XV\B

&RPPDQG$ERUWHG

3RVB

3RVLWLRQ

(UURU

9HOB

9HORFLW\

(UURU,'

$FFB

$FFHOHUDWLRQ

(UURUB



(QDEOHB
%XV\B
(UURUB




W




W




W





3RVB








W



9HOB





W


$FFB



W

ದ
0&3UH6HUYR
F\FOH








W
$

3376

%

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones





72B3RVLWLRQ






W


72B9HORFLW\





72B
$FFHOHUDWLRQ
72B6WDWXV
3RVLWLRQLQJ
)ROORZLQJ
(UURU

W




W

ದ

0D[

0&3UH6HUYR
F\FOH







W



W
$

Section
$

Section
%

%

With "Enable_1 = TRUE" the technology object is specified cyclic in the MC-PreServo-clock position
"Pos_1", velocity "Vel_1" and acceleration "Acc_1". These specifications are applied directly as set
position "TO_1.Position", setpoint velocity "TO_1.Velocity" and setpoint acceleration "TO_1.Accelera‐
tion", without hereby calculating a velocity profile.
The position, velocity and acceleration specifications are not active as long as "Enable_1" is set to
FALSE.

At time ①, "Enable_1" is set to TRUE. The default position setting "Pos_1" causes a setpoint jump
which exceeds the maximum permissible following error. With active position lag monitoring, the tech‐
nology alarm 521 is output, and the technology object is disabled. With deactivated following error
monitoring, the setpoint jump is executed with maximum dynamic.

Programación del PLC
Manual de programación y manejo, 11/2019

3377

Instrucciones
4.1 Instrucciones

Torque data
MC_TorqueLimiting V4
MC_TorqueLimiting: Activate and deactivate force/torque limit / fixed stop detection V4
Description
With the Motion Control instruction "MC_TorqueLimiting", you activate and assign parameters
for force/torque limiting and fixed stop detection. Together with a position-controlled motion job,
a "Travel to fixed stop" can be realized with the fixed stop detection. In the axis configuration,
you can configure whether the force/torque limiting is to relate to the drive side or the load side.
The functions of the Motion Control instruction "MC_TorqueLimiting" can be activated and
deactivated before and during a motion job.

Force/torque limiting applies to
● Speed axis
● Positioning axis
● Synchronous axis

Requirements for force/torque limiting
● The technology object and the reference torque of the drive have been configured correctly.
● No errors that prevent enabling are pending for the technology object (the technology object
must not be enabled).
● The drive must support force/torque reduction. Only PROFIdrive drives with SIEMENS
telegram 10x support force/torque limiting.
● Interconnection in the SINAMICS drive:
– P1522 to a fixed value of 100 %
– P1523 to a fixed value of -100% (e.g. through interconnection to fixed value parameter
P2902[i]).

Fixed stop detection applies to
● Positioning axis
● Synchronous axis

3378

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Requirement for fixed stop detection
● The fixed stop detection can only be applied to position-controlled axes. For fixed stop
detection, the axis must be enabled as position-controlled. Motion jobs must be executed as
position-controlled.
● The technology object has been configured correctly.
● When a drive and telegram that support force/torque limiting are used, the reference torque
of the drive must be correctly configured for the technology object.
● No errors that prevent enabling are pending for the technology object (the technology object
must be enabled).

Override response
● An "MC_TorqueLimiting" job cannot be aborted by any other Motion Control job.
● A new "MC_TorqueLimiting" job does not abort any active Motion Control jobs.
● If the high and low torque limiting is active via the "MC_TorqueRange" job, the
"MC_TorqueLimiting" job is rejected with an error message and vice versa. The functions do
not override one another.

Parameters
The following table shows the parameters of Motion Control instruction "MC_TorqueLimiting":
Parameter

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_SpeedAxis

-

Technology object

Enable

INPUT

BOOL

FALSE

TRUE

Limit

INPUT

LREAL

-1.0

Value of force/torque limiting (in the configured unit
of measurement)

Activate function corresponding to input
parameter "Mode"

If drive and telegram do not support force/torque
limiting, the specified value is irrelevant.
≥ 0.0

Use the value specified in the parameter

< 0.0

Use the value configured in the "Torque
limiting" configuration window.
Tag Torque Limit:
<TO>.TorqueLimiting.LimitDefaults.Tor‐
que
Tag Force Limit:
<TO>.TorqueLimiting.LimitDefaults.For‐
ce

Mode

INPUT

DINT

0

0

Force/torque limiting

1

Fixed stop detection
If drive and telegram support force/
torque limiting, this is applied.

Programación del PLC
Manual de programación y manejo, 11/2019

3379

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

InClamping

OUTPUT BOOL

Default
value

Description

FALSE

TRUE

"Mode" = 1:
The drive is kept at the fixed stop (clam‐
ping), the axis position is within the posi‐
tioning tolerance.

InLimitation

OUTPUT BOOL

FALSE

TRUE

"Mode" = 0 and 1:
Drive is operating at the force/torque li‐
mit.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Changes to input parameters "Limit" and "Mode" are also transferred at the cyclic call of the
Motion Control instruction when "Enable" = TRUE.

3380

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_TorqueLimiting: Function chart V4
Function chart: Stopping an axis when the torque limit is reached
$

$

0&B7RUTXH/LPLWLQJ

0&B+DOW

72B

$[LV

,Q&ODPSLQJ

(QB

(QDEOH

,Q/LPLWDWLRQ



/LPLW

%XV\

0RGH

(UURU

72B
,Q/LPLWDWLRQB
%XV\B

([HB

$[LV

'RQH

([HFXWH

%XV\

'HFHOHUDWLRQ

&RPPDQG$ERUWHG

-HUN
$ERUW$FFHOHUDWLRQ

(UURU,'

'RQHB

(UURU
(UURU,'



$


(QB




,Q/LPLWDWLRQB




%XV\B



$

W
W
W



([HB




'RQHB



72B
6WDWXV:RUG
;

W
W




W


72B9HORFLW\
72B$FWXDO
9HORFLW\


7RUTXH

W

/LPLW


W

At time ①, an "MC_Halt" job (A2) is executed on an axis with active torque limiting
"MC_TorqueLimiting" (A1). Torque limiting is still active ("MC_TorqueLimiting.Enable" =
TRUE) and any accumulated following error is retained and will be reduced with the time. When
the actual velocity is "0.0" and the minimum dwell time in the standstill window has elapsed, the
tag "MC_Halt.Done" shows = TRUE. When position monitoring is activated, reaching of the
target position is also monitored.

Programación del PLC
Manual de programación y manejo, 11/2019

3381

Instrucciones
4.1 Instrucciones

Function chart: Torque limiting with fixed stop detection (mode = 1)
$

$

0&B7RUTXH/LPLWLQJ

0&B0RYH9HORFLW\

72B

$[LV

,Q&ODPSLQJ

,Q&ODPSLQJB

72B

(QB

(QDEOH

,Q/LPLWDWLRQ

,Q/LPLWDWLRQB

([HB

ದ


%XV\

/LPLW
0RGH

%XV\B

$[LV

,Q9HORFLW\

([HFXWH

%XV\

9HORFLW\

&RPPDQG$ERUWHG

(UURU

$FFHOHUDWLRQ

(UURU

(UURU,'

'HFHOHUDWLRQ

(UURU,'

,Q9HOB
%XV\B
$ERUWB

-HUN
'LUHFWLRQB

'LUHFWLRQ
&XUUHQW

758(



$
(QB
,Q&ODPSLQJB
,Q/LPLWDWLRQB
%XV\B



3RVLWLRQ&RQWUROOHG










W
W






W
W

$
([HB
'LUHFWLRQB
%XV\B
,Q9HOB
$ERUWB












W
W
W
W
W

72B3RVLWLRQ
72B$FWXDO
3RVLWLRQ

7RUTXH

W

/LPLW


W

Positioning tolerance

At time ①, a "MC_TorqueLimiting" job (A1) is initiated via "En_1". An "MC_MoveVelocity" job
(A2) is executed on the axis with active torque limiting. The torque limiting is still active

3382

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
"MC_TorqueLimiting.Enable" = TRUE. When the following error limit ② is reached, the
"MC_MoveVelocity" job is aborted with "Abort" = TRUE. The drive is kept at the fixed stop
(clamping). The actual position of the axis is within the positioning tolerance. An
"MC_MoveVelocity" job is once again called via the two tags "Execute" = TRUE and
"Direction_2" = TRUE and the axis moves with constant velocity in the opposite direction. The
clamping is hereby reduced when the positioning tolerance ③ is exited. At time ④, the torque
limiting is cancelled.

MC_TorqueAdditive V4
MC_TorqueAdditive: Specify additive torque V4
Description
With the Motion Control instruction "MC_TorqueAdditive", you specify an additive torque for the
drive to which the technology object is assigned. The torque data are transferred via the
telegram 750.
With the "Value" parameter, you specify the additive setpoint torque. The specification of the
additive torque setpoint is overriding. An additional torque may be positive or negative. If you
invert the setpoint for the technology object, the value for the additive torque is also inverted
and transferred inverted to the drive.

Applies to
● Positioning axis
● Speed axis
● Synchronous axis

Requirement
● The technology object has been configured correctly.
● The technology object is enabled.
● The drive is connected via PROFIdrive telegram.
● Telegram 750 is configured.
Telegram 750 is available for SINAMICS drives V4.9 and higher.

Override response
● An "MC_TorqueAdditive" job is not aborted by any other Motion Control job.
● A new "MC_TorqueAdditive" job does not abort any active Motion Control jobs.

Programación del PLC
Manual de programación y manejo, 11/2019

3383

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction "MC_TorqueAdditive":
Parameter

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_SpeedAxis

-

Technology object

Enable

INPUT

BOOL

FALSE

TRUE

The specified setpoint is used as long as
the parameter is set to TRUE.

FALSE

The additive torque transferred to the
drive is zero.

Value

INPUT

LREAL

0.0

Additive setpoint torque
Permissible values:
-1.0E12 to 1.0E12

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

MC_TorqueAdditive: Function chart V4
Function chart: Activate/deactivate additive setpoint torque
0&B7RUTXH$GGLWLYH
72B
(QDEOHB
9DOXHB

$[LV

%XV\

(QDEOH

(UURU

9DOXH

%XV\B

(UURU,'


(QDEOHB
%XV\B




W




W


9DOXHB


W


6XSSOHPHQWDU\
WRUTXH


$

3384

%

W

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Section
$

Section
%

With "Enable_1 = TRUE", an additive setpoint torque "Value_1" is specified for the drive assigned to the
technology object. This setting is transferred to the drive parameter "p1511 - Supplementary torque 1"
using telegram 750.
With "Enable_1 = TRUE", an additive setpoint torque "Value_1" is specified for the drive assigned to the
technology object. This setting is transferred to the drive parameter "p1511 - Supplementary torque 1"
using telegram 750. The additive setpoint torque is first built up. At time ①, "Enable_1" is already set
to FALSE, before the additive setpoint torque is reduced again. The reduction of the torque setpoint is
transmitted directly to the drive.

MC_TorqueRange V4
MC_TorqueRange: Set high and low torque limits V4
Description
With the Motion Control instruction "MC_TorqueRange", you can specify an upper and lower
torque limit to the drive assigned to the technology object. The torque data are transferred via
the telegram 750.
With the "UpperLimit" parameter you specify the upper torque limit and with "LowerLimit" the
lower torque limit. The specification of the torque limits has smoothing effect on the
movements. If you invert the setpoints for the technology object, the values for the high and low
torque limit are also inverted and transferred inverted to the drive.
If the high and low torque limits are active, the following monitors and limits are disabled by
default:
● Following error monitoring
● Time limitations for positioning and standstill monitoring
Monitoring remains in effect if you have selected the option "Leave position-related monitoring
enabled" under "Technology object > Configuration > Extended parameters > Limits > Torque
limit".

Applies to
● Positioning axis
● Speed axis
● Synchronous axis

Requirement
● The technology object has been configured correctly.
● The drive is connected via PROFIdrive telegram.
● Telegram 750 is configured.
Telegram 750 is available for SINAMICS drives V4.9 and higher.

Programación del PLC
Manual de programación y manejo, 11/2019

3385

Instrucciones
4.1 Instrucciones

Override response
● An "MC_TorqueRange" job is not aborted by any other Motion Control job.
● A new "MC_TorqueRange" job does not abort any active Motion Control jobs.
● If the torque limiting is active via the "MC_TorqueLimiting" job, the "MC_TorqueRange" job
is rejected with an error message and vice versa. The functions do not override one another.

Parameters
The following table shows the parameters of Motion Control instruction "MC_TorqueRange":
Parameter

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_SpeedAxis

-

Technology object

Enable

INPUT

BOOL

FALSE

TRUE

The specified values are used as long as
the TRUE parameter is set.

FALSE

No values for the high and low torque
limit are transferred to the drive.

UpperLimit

INPUT

LREAL

1.0 E12

Upper torque limit (in the configured unit)
Permitted range of values:
-1.0 E12 to 1.0 E12
The value of the parameter "UpperLimit" must not
be greater than the value of the parameter "Lower‐
Limit".

LowerLimit

INPUT

LREAL

-1.0 E12

Lower torque limit (in the configured unit)
Permitted range of values:
-1.0 E12 to 1.0 E12
The value of the parameter "LowerLimit" must not
be less than the value of the parameter "UpperLi‐
mit".

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

3386

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_TorqueRange: Function chart V4
Function chart: Set high and low torque limits
0&B7RUTXH5DQJH
72B
(QDEOHB

$[LV

%XV\

(QDEOH

(UURU

8SSHU/LPLWB

8SSHU/LPLW

/RZHU/LPLWB

/RZHU/LPLW

%XV\B

(UURU,'



(QDEOHB




%XV\B



W
W


8SSHU/LPLWB




W


/RZHU/LPLWB


ದ

W



7RUTXHOLPLW
XSSHU





W


ದ
ದ

W

7RUTXHOLPLW ದ
ORZHU
ದ
ದ

With "Enable_1 = TRUE" an upper torque limit "UpperLimit_1" and a lower torque limit
"LowerLimit_1" are specified to the drive assigned to the technology object. These settings are
transferred directly to the drive parameters "p1522 - Torque limit upper" and "p1523 - Torque
limit lower" using telegram 750. If "Enable_1" is reset to FALSE, the upper and lower torque
limits are no longer active.

Programación del PLC
Manual de programación y manejo, 11/2019

3387

Instrucciones
4.1 Instrucciones

Kinematics motions
MC_GroupInterrupt V4
MC_GroupInterrupt: Interrupt motion execution V4
Description
With the Motion Control instruction "MC_GroupInterrupt", you interrupt the execution of the
motion on a kinematics technology object. The interrupted kinematics motion can be resumed
with a "MC_GroupContinue" job.
If the kinematics is already at a standstill, the execution of the motion is also interrupted for
subsequent motion jobs. New motion jobs are then arranged as pending jobs in the job
sequence.
With the "Mode" parameter, you specify the dynamic behavior of the holding.

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● The interconnected axes are enabled.

Override response
The override response for "MC_GroupInterrupt" jobs is described in section Override response
V4: Kinematics motion commands (Página 3434).

Parameters
The following table shows the parameters of Motion Control instruction "MC_GroupInterrupt":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Mode

INPUT

DINT

0

Mode for dynamic behavior

Start job with a positive edge

0

Stop with the dynamics of the motion job
to be interrupted

1

Stop with maximum dynamics of kine‐
matics motion

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

3388

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Active

Data type

Default
value

Description

OUTPUT BOOL

FALSE

TRUE

The setpoints are calculated.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
Override response V4: Kinematics motion commands (Página 3434)

MC_GroupContinue V4
MC_GroupContinue: Continue motion execution V4
Description
With the Motion Control instruction "MC_GroupContinue", you continue a kinematics motion
that was previously interrupted with a "MC_GroupInterrupt" job. The kinematics motion can
also be continued if the kinematics has not yet come to a standstill following the
"MC_GroupInterrupt" job.
The "MC_GroupContinue" job has only an effect if the technology object is in "Interrupted" state.

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● The interconnected axes are enabled.

Override response
● An "MC_GroupContinue" job is not aborted by any other Motion Control job.
● A new "MC_GroupContinue" job aborts a current "MC_GroupInterrupt" job.
● The override response for "MC_GroupContinue" jobs is described in section Override
response V4: Kinematics motion commands (Página 3434).

Programación del PLC
Manual de programación y manejo, 11/2019

3389

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction "MC_GroupContinue":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Start job with a positive edge

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
Override response V4: Kinematics motion commands (Página 3434)

MC_GroupContinue: Function chart V4
Function chart: Continue motion execution

72B.LQB
([HB


$

$

0&B0RYH/LQHDU$EVROXWH

0&B*URXS,QWHUUXSW

$[HV*URXS

'RQH

'RQHB

72B.LQB

([HFXWH

%XV\

%XV\B

([HB

3RVLWLRQ

$FWLYH

$FWLYHB

9HORFLW\

&RPPDQG$ERUWHG



$[HV*URXS

'RQH

'RQHB

([HFXWH

%XV\

%XV\B

$FWLYH

$FWLYHB

0RGH

&RPPDQG$ERUWHG

$FFHOHUDWLRQ

(UURU

(UURU

'HFHOHUDWLRQ

(UURU,'

(UURU,'

-HUN

5HPDLQLQJ'LVWDQFH

$

'LUHFWLRQ$
&RRUG6\VWHP
%XIIHU0RGH
7UDQVLWLRQ3DUDPHWHU
'\QDPLF$GDSWLRQ

0&B*URXS&RQWLQXH
72B.LQB
([HB

$[HV*URXS

'RQH

'RQHB

([HFXWH

%XV\

%XV\B

(UURU
(UURU,'

3390

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones



$





([HB




%XV\B




$FWLYHB




'RQHB



W
W
W
W

$


([HB




%XV\B




$FWLYHB




'RQHB



W
W
W
W

$


([HB




%XV\B




'RQHB



72B.LQB
6WDWXV:RUG;
,QWHUUXSWHG
72B.LQB
6WDWXV3DWK
9HORFLW\

W
W
W




W




W

The kinematics is moved with an "MC_MoveLinearAbsolute" job (A1).
At time ①, the "MC_MoveLinearAbsolute" job is interrupted by an "MC_GroupInterrupt" job
(A2). The kinematics is in "Interrupted" state. With "Mode = 0" the motion is stopped with the
dynamics of the "MC_MoveLinearAbsolute" job. The completion of the "MC_GroupInterrupt"
job is reported via "Done_2".
At time ②, the "MC_MoveLinearAbsolute" job is continued by an "MC_GroupContinue" job
(A3).

Programación del PLC
Manual de programación y manejo, 11/2019

3391

Instrucciones
4.1 Instrucciones

MC_GroupStop V4
MC_GroupStop: Stop motion V4
Description
With the Motion Control instruction "MC_GroupStop", you stop and abort an active motion on
the kinematics technology object. If the motion was already interrupted with an
"MC_GroupInterrupt", this is aborted. All still pending jobs in the job sequence are also aborted
by a "MC_GroupStop" job. As long as the "Execute" parameter is set to TRUE, kinematics jobs
are rejected ("ErrorID" = 16#80CD).
With the "Mode" parameter, you specify the dynamic behavior of the stop motion.

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● The interconnected axes are enabled.

Override response
The override response for "MC_GroupStop" jobs is described in section Override response V4:
Kinematics motion commands (Página 3434).

Parameters
The following table shows the parameters of Motion Control instruction "MC_GroupStop":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Mode

INPUT

DINT

0

Start job with a positive edge

Mode for dynamic behavior
0

Stop with the dynamics of the motion job
to be interrupted

1

Stop with maximum dynamics of kine‐
matics motion
When dynamic adaptation is activated,
the dynamics of the motion can also be
reduced so that the dynamic limits of the
axes are not exceeded.

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

3392

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Active

Data type

Default
value

Description

OUTPUT BOOL

FALSE

TRUE

The setpoints are calculated.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
Override response V4: Kinematics motion commands (Página 3434)

Programación del PLC
Manual de programación y manejo, 11/2019

3393

Instrucciones
4.1 Instrucciones

MC_GroupStop: Function chart V4
Function chart: Stop motion

72B.LQB
([HB


$

$

0&B0RYH/LQHDU$EVROXWH

0&B*URXS6WRS

$[HV*URXS

'RQH

([HFXWH

%XV\

%XV\B

3RVLWLRQ

$FWLYH

$FWLYHB

9HORFLW\

&RPPDQG$ERUWHG

$ERUWB

72B.LQB
([HB

$[HV*URXS

'RQH

'RQHB

([HFXWH

%XV\

%XV\B

$FWLYH

$FWLYHB

0RGH



&RPPDQG$ERUWHG

$FFHOHUDWLRQ

(UURU

(UURU

'HFHOHUDWLRQ

(UURU,'

(UURU,'

-HUN

5HPDLQLQJ'LVWDQFH

'LUHFWLRQ$
&RRUG6\VWHP
%XIIHU0RGH
7UDQVLWLRQ3DUDPHWHU
'\QDPLF$GDSWLRQ



$
([HB
%XV\B
$FWLYHB
$ERUWB




W




W




W




W

$
([HB
%XV\B
$FWLYHB
'RQHB

72B.LQB
6WDWXV3DWK
9HORFLW\




W




W




W




W




W

The kinematics is moved with an "MC_MoveLinearAbsolute" job (A1).
At time ①, the "MC_MoveLinearAbsolute" job is aborted by an "MC_GroupStop" job (A2). The
job abort is signaled via "Abort_1". With "Mode = 0" the motion is stopped with the dynamics of

3394

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
the "MC_MoveLinearAbsolute" job. The completion of the "MC_GroupStop" job is reported via
"Done_2".

MC_MoveLinearAbsolute V4
MC_MoveLinearAbsolute: Position kinematics with linear motion V4
Description
With the Motion Control instruction "MC_MoveLinearAbsolute", you move a kinematics with a
circular motion to an absolute position. Cartesian orientation is also used absolute.
Dynamic behavior during movement is defined with the parameters "Velocity", "Acceleration",
"Deceleration" and "Jerk". For the dynamics of the orientation motion, the default values are
configured in "Technology object > Configuration > Extended parameters > Dynamic defaults".
● <TO>.DynamicDefaults.Orientation.Velocity
● <TO>.DynamicDefaults.Orientation.Acceleration
● <TO>.DynamicDefaults.Orientation.Deceleration
● <TO>.DynamicDefaults.Orientation.Jerk

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● The interconnected axes are enabled.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.

Override response
With the "TransitionParameter[1]" parameter, you determine the distance from the target point
of the previous motion job at which the new motion job is superimposed.
The override response for "MC_MoveLinearAbsolute" jobs is described in section "Override
response V4: Kinematics motion commands (Página 3434)".

Programación del PLC
Manual de programación y manejo, 11/2019

3395

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction
"MC_MoveLinearAbsolute":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Position

INPUT

ARRAY [1..4] OF
LREAL

-

Absolute target coordinates in the specified refe‐
rence system

Position[1]

INPUT

LREAL

0.0

x-coordinate

Position[2]

INPUT

LREAL

0.0

y-coordinate

Position[3]

INPUT

LREAL

0.0

z-coordinate

Position[4]

INPUT

LREAL

0.0

A-coordinate

INPUT

LREAL

-1.0

Velocity

Velocity

Start job with a positive edge

> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The value configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Velocity)

Acceleration

INPUT

LREAL

-1.0

Acceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The value configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Accelera‐
tion)

Deceleration

INPUT

LREAL

-1.0

Deceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The value configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Decelera‐
tion)

Jerk

INPUT

LREAL

-1.0

Jerk
> 0.0

The specified value is used.

= 0.0

No jerk limitation

< 0.0

The value configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Jerk)

3396

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

DirectionA

INPUT

DINT

3

Motion direction of the Cartesian orientation

CoordSystem

BufferMode

INPUT

INPUT

DINT

DINT

0

1

1

Positive direction

2

Negative direction

3

Shortest distance

Reference system of the specified target position
and target orientation
0

World coordinate system (WCS)

1

Object coordinate system 1 (OCS1)

2

Object coordinate system 2 (OCS2)

3

Object coordinate system 3 (OCS3)

Motion transition
1

Append motion
The active motion sequence is comple‐
ted and the kinematics comes to a
standstill. The movement of this job is
then executed.

2

Smooth with the lower velocity
When the blending distance is reached,
the current motion is blended with the
motion of this job. The lower velocity of
the two jobs is used here.

5

Smooth with the higher velocity
When the blending distance is reached,
the current motion is blended with the
motion of this job. The higher velocity of
the two jobs is used here.

TransitionParameter
TransitionParameter[1]

INPUT

ARRAY [1..5] OF
LREAL

INPUT

LREAL

Transition parameter
-1.0

Rounding clearance
≥ 0.0

The specified value is used.

< 0.0

The maximum possible rounding clea‐
rance is used.

TransitionParameter[2]

INPUT

LREAL

-

Reserved

TransitionParameter[3]

INPUT

LREAL

-

Reserved

TransitionParameter[4]

INPUT

LREAL

-

Reserved

TransitionParameter[5]

INPUT

LREAL

-

Reserved

Programación del PLC
Manual de programación y manejo, 11/2019

3397

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

DynamicAdaption

INPUT

DINT

-1

Dynamic adaptation
<0

The configured setting in "Technology
object > Configuration > Extended para‐
meters > Dynamic" is used.
(<TO>.DynamicDefaults.DynamicAdap‐
tion)

0

Without dynamic adaption

1

Dynamic adaptation with segmentation
of the path

2

Dynamic adaptation without segmenta‐
tion of the path

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Active

OUTPUT BOOL

FALSE

TRUE

The setpoints are calculated.

FALSE

When "Busy" = TRUE:
Job is waiting. (Typical: A preceding job
is still active.)

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

RemainingDistance

OUTPUT LREAL

-1.0

Distance-to-go of the current job

Consulte también
Override response V4: Kinematics motion commands (Página 3434)

3398

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_MoveLinearAbsolute: Function chart V4
Function chart: Position kinematics with linear path motion
$

$

0&B0RYH/LQHDU$EVROXWH

0&B0RYH/LQHDU$EVROXWH

$[HV*URXS

'RQH

'RQHB

72B.LQB

$[HV*URXS

'RQH

'RQHB

([HB

([HFXWH

%XV\

%XV\B

([HB

([HFXWH

%XV\

%XV\B

[_\_]_D

3RVLWLRQ

$FWLYH

$FWLYHB

[ _\_] _D 

3RVLWLRQ

$FWLYH

$FWLYHB



9HORFLW\

&RPPDQG$ERUWHG



9HORFLW\

&RPPDQG$ERUWHG

72B.LQB

$FFHOHUDWLRQ

(UURU

$FFHOHUDWLRQ

(UURU

'HFHOHUDWLRQ

(UURU,'

'HFHOHUDWLRQ

(UURU,'

-HUN

-HUN

5HPDLQLQJ'LVWDQFH

'LUHFWLRQ$


&RRUG6\VWHP



&RRUG6\VWHP



%XIIHU0RGH



%XIIHU0RGH



7UDQVLWLRQ3DUDPHWHU

G1

'\QDPLF$GDSWLRQ

7UDQVLWLRQ3DUDPHWHU
'\QDPLF$GDSWLRQ



$

5HPDLQLQJ'LVWDQFH

'LUHFWLRQ$





([HB




%XV\B




$FWLYHB




'RQHB



W
W
W
W

$


([HB




%XV\B




$FWLYHB




'RQHB



W
W
W
W


72B.LQB
6WDWXV3DWK
9HORFLW\




W

The kinematics is moved with an "MC_MoveLinearAbsolute" job (A1).

Programación del PLC
Manual de programación y manejo, 11/2019

3399

Instrucciones
4.1 Instrucciones
At time ① an additional "MC_MoveLinearAbsolute" job (A2) is initiated. As the
"MC_MoveLinearAbsolute" jobs have no override effect on one another, the job A2 is arranged
in the job sequence.
At the point in time ②, completion of the A1 job is signaled via "Done_1" and the job A2 is
started. As "BufferMode = 2" is set for job A2, the motion transition is smoothed with the lower
velocity of both jobs. As soon as the target position is reached, the completion of the A2 job is
signaled via "Done_2".

MC_MoveLinearRelative V4
MC_MoveLinearRelative: Relative positioning of kinematics with linear motion V4
Description
With the Motion Control instruction "MC_MoveLinearRelative", you can move a kinematics with
a linear path relative to the position which was present at the start of the job processing.
Cartesian orientation is also used relative.
Dynamic behavior during movement is defined with the parameters "Velocity", "Acceleration",
"Deceleration" and "Jerk". For the dynamics of the orientation motion, the default values are
configured in "Technology object > Configuration > Extended parameters > Dynamic defaults".
● <TO>.DynamicDefaults.Orientation.Velocity
● <TO>.DynamicDefaults.Orientation.Acceleration
● <TO>.DynamicDefaults.Orientation.Deceleration
● <TO>.DynamicDefaults.Orientation.Jerk

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● The interconnected axes are enabled.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.

Override response
With the "TransitionParameter[1]" parameter, you determine the distance from the target point
of the previous motion job at which the new motion job is superimposed.
The override response for "MC_MoveLinearRelative" jobs is described in section "Override
response V4: Kinematics motion commands (Página 3434)".

3400

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction
"MC_MoveLinearRelative":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Distance

INPUT

ARRAY [1..4] OF
LREAL

-

Relative target coordinates in the specified refe‐
rence system

Distance[1]

INPUT

LREAL

0.0

x-coordinate

Distance[2]

INPUT

LREAL

0.0

y-coordinate

Distance[3]

INPUT

LREAL

0.0

z-coordinate

Distance[4]

INPUT

LREAL

0.0

A-coordinate

INPUT

LREAL

-1.0

Velocity

Velocity

Start job with a positive edge

> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The value configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Velocity)

Acceleration

INPUT

LREAL

-1.0

Acceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The value configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Accelera‐
tion)

Deceleration

INPUT

LREAL

-1.0

Deceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The value configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Decelera‐
tion)

Jerk

INPUT

LREAL

-1.0

Jerk
> 0.0

The specified value is used.

= 0.0

No jerk limitation

< 0.0

The value configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Jerk)

Programación del PLC
Manual de programación y manejo, 11/2019

3401

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

CoordSystem

INPUT

DINT

0

Reference system of the specified target position
and target orientation

BufferMode

INPUT

DINT

1

0

World coordinate system (WCS)

1

Object coordinate system 1 (OCS1)

2

Object coordinate system 2 (OCS2)

3

Object coordinate system 3 (OCS3)

Motion transition
1

Append motion
The active motion sequence is comple‐
ted and the kinematics comes to a
standstill. The movement of this job is
then executed.

2

Smooth with the lower velocity
When the blending distance is reached,
the current motion is blended with the
motion of this job. The lower velocity of
the two jobs is used here.

5

Smooth with the higher velocity
When the blending distance is reached,
the current motion is blended with the
motion of this job. The higher velocity of
the two jobs is used here.

TransitionParameter
TransitionParameter[1]

TransitionParameter[2]

INPUT

ARRAY [1..5] OF
LREAL

-

INPUT

LREAL

-1.0

INPUT

LREAL

-

Transition parameter
Rounding clearance
≥ 0.0

The specified value is used.

< 0.0

The maximum possible rounding clea‐
rance is used.

Reserved

TransitionParameter[3]

INPUT

LREAL

-

Reserved

TransitionParameter[4]

INPUT

LREAL

-

Reserved

TransitionParameter[5]

INPUT

LREAL

-

Reserved

INPUT

DINT

-1.0

DynamicAdaption

Dynamic adaptation
<0

The configured setting in "Technology
object > Configuration > Extended para‐
meters > Dynamic" is used.
(<TO>.DynamicDefaults.DynamicAdap‐
tion)

0

Without dynamic adaption

1

Dynamic adaptation with segmentation
of the path

2

Dynamic adaptation without segmenta‐
tion of the path

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

3402

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Active

OUTPUT BOOL

Default
value

Description

FALSE

TRUE

The setpoints are calculated.

FALSE

When "Busy" = TRUE:
Job is waiting. (Typical: A preceding job
is still active.)

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

RemainingDistance

OUTPUT LREAL

-1.0

Distance-to-go of the current job

Consulte también
Override response V4: Kinematics motion commands (Página 3434)

Programación del PLC
Manual de programación y manejo, 11/2019

3403

Instrucciones
4.1 Instrucciones

MC_MoveLinearRelative: Function chart V4
Function chart: Relative positioning of kinematics with linear path motion

72B.LQB
([HB
___


$

$

0&B0RYH/LQHDU5HODWLYH

0&B0RYH/LQHDU5HODWLYH

$[HV*URXS

'RQH

'RQHB

72B.LQB

([HFXWH

%XV\

%XV\B

([HB

'LVWDQFH

$FWLYH

$FWLYHB

9HORFLW\

&RPPDQG$ERUWHG

___

(UURU



$FFHOHUDWLRQ
'HFHOHUDWLRQ
-HUN


$[HV*URXS

'RQH

'RQHB

([HFXWH

%XV\

%XV\B

$FWLYH

$FWLYHB

'LVWDQFH
9HORFLW\

&RPPDQG$ERUWHG

(UURU,'

$FFHOHUDWLRQ

(UURU

5HPDLQLQJ'LVWDQFH

'HFHOHUDWLRQ

(UURU,'

&RRUG6\VWHP

-HUN

%XIIHU0RGH
7UDQVLWLRQ3DUDPHWHU
'\QDPLF$GDSWLRQ



&RRUG6\VWHP



%XIIHU0RGH

5HPDLQLQJ'LVWDQFH

7UDQVLWLRQ3DUDPHWHU

G1

'\QDPLF$GDSWLRQ



$
([HB
%XV\B
$FWLYHB
'RQHB






W




W




W




W

$
([HB
%XV\B
$FWLYHB
'RQHB




W




W




W




W


72B.LQB
6WDWXV3DWK
9HORFLW\




W

The kinematics is moved with an "MC_MoveLinearRelative" job (A1).

3404

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
At time ① an additional "MC_MoveLinearRelative" job (A2) is initiated. As the
"MC_MoveLinearRelative" jobs have no override effect on one another, the job A2 is arranged
in the job sequence.
At the point in time ②, completion of the A1 job is signaled via "Done_1" and the job A2 is
started. As "BufferMode = 5" is set for job A2, the motion transition is smoothed with the higher
velocity of both jobs. As soon as the target position is reached, the completion of the A2 job is
signaled via "Done_2".

MC_MoveCircularAbsolute V4
MC_MoveCircularAbsolute: Position kinematics with circular path motion V4
Description
With the Motion Control instruction "MC_MoveCircularAbsolute", you can move a kinematics
with a circular motion to an absolute position. Cartesian orientation is also used absolute.
With the "CircMode" parameter, you specify the definition of the circular path:
● Via an intermediate point and the end point
With the "AuxPoint" parameter, you specify an intermediate point on the circular path, via
which the end point specified in the "EndPoint" parameter is to be approached. The circular
path is calculated via the starting, intermediate and end points. Only circular paths less than
360° can be traversed here.
● Via the circle center and angle in a main plane
With the "AuxPoint" parameter, you define the center point of the circle. The end point of the
circular path is calculated via the angle specified in the parameter "Arc". With the
"PathChoice" parameter, you specify whether the circular path is to be traversed in positive
or negative direction of rotation. With the "CirclePlane" parameter, you specify the main
plane in which the circular path is to be traversed.
● Via the circle radius and the end point in a main plane
With the "EndPoint" parameter, you specify the end point and with "Radius" the radius of the
circular path. Depending on the radius, up to four possible circular paths can occur in the
plane defined with the "CirclePlane" parameter. With the "PathChoice" parameter, you
specify which of these circular paths is to be moved.
Dynamic behavior during Kinematics motion is defined with the parameters "Velocity",
"Acceleration", "Deceleration" and "Jerk". For the dynamics of the orientation motion, the
default values are configured in "Technology object > Configuration > Extended parameters >
Dynamic defaults".
● <TO>.DynamicDefaults.Orientation.Velocity
● <TO>.DynamicDefaults.Orientation.Acceleration
● <TO>.DynamicDefaults.Orientation.Deceleration
● <TO>.DynamicDefaults.Orientation.Jerk

Programación del PLC
Manual de programación y manejo, 11/2019

3405

Instrucciones
4.1 Instrucciones

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● The interconnected axes are enabled.
● There is no single axis job (e.g. "MC_MoveVelocity") on the interconnected axes.

Override response
With the "TransitionParameter[1]" parameter, you determine the distance from the target point
of the previous motion job at which the new motion job is superimposed.
The override response for "MC_MoveCircularAbsolute" jobs is described in section "Override
response V4: Kinematics motion commands (Página 3434)".

Parameters
The following table shows the parameters of Motion Control instruction
"MC_MoveCircularAbsolute":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

CircMode

INPUT

DINT

0

AuxPoint

INPUT

ARRAY [1..3] OF
LREAL

-

Start job with a positive edge

Definition of circular path
0

The position vector specified at the "Aux‐
Point" parameter defines a point on the
circular path.

1

The position specified at the parameter
"AuxPoint" defines the circle center.

2

The "Radius" and "EndPoint" parame‐
ters define the circle segment.

Circular path auxiliary point
● When "CircMode" = 0: Point on the circular path
● When "CircMode" = 1: Center point of the
circular path
● When "CircMode" = 2: Not relevant

AuxPoint[1]

INPUT

LREAL

0.0

x-coordinate

AuxPoint[2]

INPUT

LREAL

0.0

y-coordinate

AuxPoint[3]

INPUT

LREAL

0.0

z-coordinate

INPUT

ARRAY [1..4] OF
LREAL

-

Target position in the specified reference system

EndPoint

3406

When "CircMode" = 1: Only EndPoint[4] relevant
(orientation axis)

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

EndPoint[1]

INPUT

LREAL

0.0

x-coordinate

EndPoint[2]

INPUT

LREAL

0.0

y-coordinate

EndPoint[3]

INPUT

LREAL

0.0

z-coordinate

EndPoint[4]

INPUT

LREAL

0.0

A-coordinate

INPUT

DINT

0

PathChoice

Orientation of the circular path
When "CircMode" = 0: Not relevant
When "CircMode" = 1:
0

Positive direction of rotation

1

Negative direction of rotation

When "CircMode" = 2:

CirclePlane

INPUT

DINT

0

0

Shorter positive circle segment

1

Shorter negative circle segment

2

Longer positive circle segment

3

Longer negative circle segment

Main plane of the circular path
When "CircMode" = 0: Not relevant
When "CircMode" = 1 and 2:

Radius

INPUT

LREAL

0.0

0

x-z plane

1

y-z plane

2

x-y plane

When "CircMode" = 2:
Radius of the circular movement

Arc

INPUT

LREAL

0.0

When "CircMode" = 1:
Angle of the circular movement

Velocity

INPUT

LREAL

-1.0

Velocity
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The value configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Velocity)

Acceleration

INPUT

LREAL

-1.0

Acceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The value configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Accelera‐
tion)

Programación del PLC
Manual de programación y manejo, 11/2019

3407

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

Deceleration

INPUT

LREAL

-1.0

Deceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The value configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Decelera‐
tion)

Jerk

INPUT

LREAL

-1.0

Jerk
> 0.0

The specified value is used.

= 0.0

No jerk limitation

< 0.0

The value configured in "Technology ob‐
ject > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Jerk)

DirectionA

CoordSystem

BufferMode

INPUT

INPUT

INPUT

DINT

DINT

DINT

3

0

1

Motion direction of the Cartesian orientation
1

Positive direction

2

Negative direction

3

Shortest distance

Reference system
0

World coordinate system (WCS)

1

Object coordinate system 1 (OCS1)

2

Object coordinate system 2 (OCS2)

3

Object coordinate system 3 (OCS3)

Motion transition
1

Append motion
The active motion sequence is comple‐
ted and the kinematics comes to a
standstill. The movement of this job is
then executed.

2

Smooth with the lower velocity
When the blending distance is reached,
the current motion is blended with the
motion of this job. The lower velocity of
the two jobs is used here.

5

Smooth with the higher velocity
When the blending distance is reached,
the current motion is blended with the
motion of this job. The higher velocity of
the two jobs is used here.

TransitionParameter

3408

INPUT

ARRAY [1..5] OF
LREAL

Transition parameter

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter
TransitionParameter[1]

Declara‐
tion

Data type

Default
value

Description

INPUT

LREAL

-1.0

Rounding clearance
≥ 0.0

The specified value is used.

< 0.0

The maximum possible rounding clea‐
rance is used.

TransitionParameter[2]

INPUT

LREAL

-

Reserved

TransitionParameter[3]

INPUT

LREAL

-

Reserved

TransitionParameter[4]

INPUT

LREAL

-

Reserved

TransitionParameter[5]

INPUT

LREAL

-

Reserved

INPUT

DINT

-1.0

Dynamic adaptation

DynamicAdaption

<0

The configured setting in "Technology
object > Configuration > Extended para‐
meters > Dynamic" is used.
(<TO>.DynamicDefaults.DynamicAdap‐
tion)

0

Without dynamic adaption

1

Dynamic adaptation with segmentation
of the path

2

Dynamic adaptation without segmenta‐
tion of the path

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Active

OUTPUT BOOL

FALSE

TRUE

The setpoints are calculated.

FALSE

When "Busy" = TRUE:
Job is waiting. (Typical: A preceding job
is still active.)

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

RemainingDistance

OUTPUT LREAL

-1.0

Distance-to-go of the current job

Consulte también
Override response V4: Kinematics motion commands (Página 3434)

Programación del PLC
Manual de programación y manejo, 11/2019

3409

Instrucciones
4.1 Instrucciones

MC_MoveCircularAbsolute: Function chart V4
Function chart: Position kinematics with circular path motion
In the function chart, sections A1 and A2 of the following kinematics motion are viewed:
[_\_]_D
$

$

\:&6

˞
]:&6

[:&6
[ _\_] 

$

$

0&B0RYH/LQHDU$EVROXWH

0&B0RYH&LUFXODU$EVROXWH

$[HV*URXS

'RQH

'RQHB

72B.LQB

([HB

([HFXWH

%XV\

%XV\B

([HB

[_\_]_D

3RVLWLRQ

$FWLYH

$FWLYHB



9HORFLW\

&RPPDQG$ERUWHG

72B.LQB


[ _\_] 

'RQH

'RQHB

([HFXWH

%XV\

%XV\B

$FWLYH

$FWLYHB

&LUF0RGH
$X[3RLQW

&RPPDQG$ERUWHG

(QG3RLQW

$FFHOHUDWLRQ

(UURU

'HFHOHUDWLRQ

(UURU,'



3DWK&KRLFH

(UURU,'

5HPDLQLQJ'LVWDQFH



&LUFOH3ODQH

5HPDLQLQJ'LVWDQFH

-HUN


&RRUG6\VWHP



%XIIHU0RGH

(UURU

5DGLXV

'LUHFWLRQ$



$[HV*URXS

˞


$UF
9HORFLW\

7UDQVLWLRQ3DUDPHWHU

$FFHOHUDWLRQ

'\QDPLF$GDSWLRQ

'HFHOHUDWLRQ
-HUN
'LUHFWLRQ$


&RRUG6\VWHP



%XIIHU0RGH

G1

7UDQVLWLRQ3DUDPHWHU
'\QDPLF$GDSWLRQ

3410

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones


$





([HB



W



%XV\B



W



$FWLYHB



W



'RQHB



W

$


([HB



W



%XV\B



W



$FWLYHB



W



'RQHB



W


72B.LQB
6WDWXV3DWK
9HORFLW\




W

The kinematics is moved with an "MC_MoveLinearAbsolute" job (A1).
At time ① an "MC_MoveCircularAbsolute" job (A2) is initiated. As the
"MC_MoveCircularAbsolute" job has no overdrive effect, the job A2 is arranged in the job
sequence.
At the point in time ②, completion of the A1 job is signaled via "Done_1" and the job A2 is
started. As "BufferMode = 2" is set for job A2, the motion transition is smoothed with the lower
velocity of both jobs and the rounding clearance d1. The circular motion is determined with
"CircMode = 1" via the radius r and the end point (x2|y2|z2). As soon as the target position is
reached, the completion of the A2 job is signaled via "Done_2".

MC_MoveCircularRelative V4
MC_MoveCircularRelative: Relative positioning of kinematics with circular path motion V4
Description
With the Motion Control instruction "MC_MoveCircularRelative", you can move a kinematics
with a circular motion to a relative position. Cartesian orientation is also used relative.

Programación del PLC
Manual de programación y manejo, 11/2019

3411

Instrucciones
4.1 Instrucciones
With the "CircMode" parameter, you specify the definition of the circular path:
● Via an intermediate point and the end point
With the "AuxPoint" parameter, you specify an intermediate point on the circular path, via
which the end point specified in the "EndPoint" parameter is to be approached. The circular
path is calculated via the starting, intermediate and end points. Only circular paths less than
360° can be traversed here.
● Via the circle center and angle in a main plane
With the "AuxPoint" parameter, you define the center point of the circle. The end point of the
circular path is calculated via the angle specified in the parameter "Arc". With the
"PathChoice" parameter, you specify whether the circular path is to be traversed in positive
or negative direction of rotation. With the "CirclePlane" parameter, you specify the main
plane in which the circular path is to be traversed.
● Via the circle radius and the end point in a main plane
With the "EndPoint" parameter, you specify the end point and with "Radius" the radius of the
circular path. Depending on the radius, up to four possible circular paths can occur in the
plane defined with the "CirclePlane" parameter. With the "PathChoice" parameter, you
specify which of these circular paths is to be moved.
Dynamic behavior during Kinematics motion is defined with the parameters "Velocity",
"Acceleration", "Deceleration" and "Jerk". For the dynamics of the orientation motion, the
default values are configured in "Technology object > Configuration > Extended parameters >
Dynamic defaults".
● <TO>.DynamicDefaults.Orientation.Velocity
● <TO>.DynamicDefaults.Orientation.Acceleration
● <TO>.DynamicDefaults.Orientation.Deceleration
● <TO>.DynamicDefaults.Orientation.Jerk

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● The interconnected axes are enabled.
● There is no single axis job (e.g. "MC_MoveVelocity") on the interconnected axes.

Override response
With the "TransitionParameter[1]" parameter, you determine the distance from the target point
of the previous motion job at which the new motion job is superimposed.
The override response for "MC_MoveCircularAbsolute" jobs is described in section "Override
response V4: Kinematics motion commands (Página 3434)".

3412

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction
"MC_MoveCircularRelative":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

CircMode

INPUT

DINT

0

AuxPoint

INPUT

ARRAY [1..3] OF
LREAL

-

Start job with a positive edge

Definition of circular path
0

The position vector specified at the "Aux‐
Point" parameter defines a point on the
circular path.

1

The position specified at the parameter
"AuxPoint" defines the circle center.

2

The "Radius" and "EndPoint" parame‐
ters define the circle segment.

Circular path auxiliary point
● When "CircMode" = 0: Point on the circular path
● When "CircMode" = 1: Center point of the
circular path
● When "CircMode" = 2: Not relevant
Coordinate relative to the starting point

AuxPoint[1]

INPUT

LREAL

0.0

x-coordinate

AuxPoint[2]

INPUT

LREAL

0.0

y-coordinate

AuxPoint[3]

INPUT

LREAL

0.0

z-coordinate

INPUT

ARRAY [1..4] OF
LREAL

-

Target position relative to the starting point in the
specified reference system

EndPoint

When "CircMode" = 1: Only EndPoint[4] relevant
(orientation axis)
EndPoint[1]

INPUT

LREAL

0.0

x-coordinate

EndPoint[2]

INPUT

LREAL

0.0

y-coordinate

EndPoint[3]

INPUT

LREAL

0.0

z-coordinate

EndPoint[4]

INPUT

LREAL

0.0

A-coordinate

INPUT

DINT

0

Orientation of the circular path

PathChoice

When "CircMode" = 0: Not relevant
When "CircMode" = 1:
0

Positive direction of rotation

1

Negative direction of rotation

When "CircMode" = 2:

Programación del PLC
Manual de programación y manejo, 11/2019

0

Shorter positive circular path

1

Shorter negative circular path

2

Longer positive circular path

3

Longer negative circular path

3413

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

CirclePlane

INPUT

DINT

0

Main plane of the circular path
When "CircMode" = 0: Not relevant
When "CircMode" = 1 and 2:

Radius

INPUT

LREAL

0.0

0

x-z plane

1

y-z plane

2

x-y plane

When "CircMode" = 2:
Radius of the circular movement

Arc

INPUT

LREAL

0.0

When "CircMode" = 1:
Angle of the circular movement

Velocity

INPUT

LREAL

-1.0

Velocity
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The velocity configured in "Technology
object > Configuration > Extended para‐
meters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Velocity)

Acceleration

INPUT

LREAL

-1.0

Acceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The velocity configured in "Technology
object > Configuration > Extended para‐
meters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Accelera‐
tion)

Deceleration

INPUT

LREAL

-1.0

Deceleration
> 0.0

The specified value is used.

= 0.0

Not permitted

< 0.0

The velocity configured in "Technology
object > Configuration > Extended para‐
meters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Decelera‐
tion)

Jerk

INPUT

LREAL

-1.0

Jerk
> 0.0

The specified value is used.

= 0.0

No jerk limitation

< 0.0

The velocity configured in "Technology
object > Configuration > Extended para‐
meters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Path.Jerk)

3414

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

CoordSystem

INPUT

DINT

0

Reference system

BufferMode

INPUT

DINT

1

0

World coordinate system (WCS)

1

Object coordinate system 1 (OCS1)

2

Object coordinate system 2 (OCS2)

3

Object coordinate system 3 (OCS3)

Motion transition
1

Append motion
The active motion sequence is comple‐
ted and the kinematics comes to a
standstill. The movement of this job is
then executed.

2

Smooth with the lower velocity
When the blending distance is reached,
the current motion is blended with the
motion of this job. The lower velocity of
the two jobs is used here.

5

Smooth with the higher velocity
When the blending distance is reached,
the current motion is blended with the
motion of this job. The higher velocity of
the two jobs is used here.

TransitionParameter
TransitionParameter[1]

INPUT

ARRAY [1..5] OF
LREAL

INPUT

LREAL

Transition parameter
-1.0

Rounding clearance
≥ 0.0

The specified value is used.

< 0.0

The maximum possible rounding clea‐
rance is used.

TransitionParameter[2]

INPUT

LREAL

-

Reserved

TransitionParameter[3]

INPUT

LREAL

-

Reserved

TransitionParameter[4]

INPUT

LREAL

-

Reserved

TransitionParameter[5]

INPUT

LREAL

-

Reserved

INPUT

DINT

-1

DynamicAdaption

Dynamic adaptation
<0

The configured setting in "Technology
object > Configuration > Extended para‐
meters > Dynamic" is used.
(<TO>.DynamicDefaults.DynamicAdap‐
tion)

0

Without dynamic adaption

1

Dynamic adaptation with segmentation
of the path

2

Dynamic adaptation without segmenta‐
tion of the path

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Programación del PLC
Manual de programación y manejo, 11/2019

3415

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Active

OUTPUT BOOL

Default
value

Description

FALSE

TRUE

The setpoints are calculated.

FALSE

When "Busy" = TRUE:
Job is waiting. (Typical: A preceding job
is still active.)

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

RemainingDistance

OUTPUT LREAL

-1.0

Distance-to-go of the current job

Consulte también
Override response V4: Kinematics motion commands (Página 3434)

MC_MoveCircularRelative: Function chart V4
Function chart: Relative positioning of kinematics with circular path motion
In the function chart, sections A1 and A2 of the following kinematics motion are viewed:
[_\_]_D
$

$

\:&6

U
]:&6

[:&6
[ _\_] _D

3416

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

72B.LQB
([HB
[_\_]_D


$

$

0&B0RYH/LQHDU5HODWLYH

0&B0RYH&LUFXODU5HODWLYH

$[HV*URXS

'RQH

'RQHB

72B.LQB

([HFXWH

%XV\

%XV\B

([HB

'LVWDQFH

$FWLYH

$FWLYHB

9HORFLW\

'RQH

'RQHB

([HFXWH

%XV\

%XV\B

$FWLYH

$FWLYHB

&LUF0RGH
$X[3RLQW

&RPPDQG$ERUWHG

&RPPDQG$ERUWHG

$FFHOHUDWLRQ

(UURU

[ _\_] _D 

'HFHOHUDWLRQ

(UURU,'



3DWK&KRLFH

(UURU,'

5HPDLQLQJ'LVWDQFH



&LUFOH3ODQH

5HPDLQLQJ'LVWDQFH

U

5DGLXV

-HUN
'LUHFWLRQ$


&RRUG6\VWHP



%XIIHU0RGH





$[HV*URXS

(QG3RLQW

(UURU

$UF


9HORFLW\

7UDQVLWLRQ3DUDPHWHU

$FFHOHUDWLRQ

'\QDPLF$GDSWLRQ

'HFHOHUDWLRQ
-HUN


&RRUG6\VWHP



%XIIHU0RGH

G1

7UDQVLWLRQ3DUDPHWHU
'\QDPLF$GDSWLRQ



$





([HB




%XV\B




$FWLYHB




'RQHB



W
W
W
W

$


([HB




%XV\B




$FWLYHB




'RQHB



W
W
W
W


72B.LQB
6WDWXV3DWK
9HORFLW\




W

The kinematics is moved with an "MC_MoveLinearRelative" job (A1).

Programación del PLC
Manual de programación y manejo, 11/2019

3417

Instrucciones
4.1 Instrucciones
At time ① an "MC_MoveCircularRelative" job (A2) is initiated. As the
"MC_MoveCircularRelative" job has no overdrive effect, the job A2 is arranged in the job
sequence.
At the point in time ②, completion of the A1 job is signaled via "Done_1" and the job A2 is
started. As "BufferMode = 2" is set for job A2, the motion transition is smoothed with the lower
velocity of both jobs and the rounding clearance d1. The circular motion is determined with
"CircMode = 2" via the radius r and the end point (x2|y2|z2). As soon as the target position is
reached, the completion of the A2 job is signaled via "Done_2".

Zones
MC_DefineWorkspaceZone V4
MC_DefineWorkspaceZone: Defining workspace zone V4
Description
With the Motion Control instruction "MC_DefineWorkspaceZone", you define a workspace
zone in relation to the world coordinates system or an object coordinates system. The zones
(<TO>.WorkspaceZone[1..10]) defined under "Technology object > Configuration > Extended
parameters > Zones" are not hereby changed are available again after a restart of the
technology object. The "<TO>.StatusWorkspaceZone" tag of the technology object data block
contains the currently effective workspace zones.
The "MC_DefineWorkspaceZone" job interjects itself in the job sequence on the Kinematics
technology object and therefore effective for the following motion jobs.
With the "GeometryType" and "GeometryParameter" parameters, you specify the zone
geometry type and zone size. You use the "ZoneType" parameter to define a workspace zone
as work zone, blocked zone or signal zone. You can define up to ten workspace zones. While
several of the defined blocked zones and signal zones can be active simultaneously, only one
area of the defined work zones can be active.

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.

Override response
● A "MC_DefineWorkspaceZone" job is aborted by an "MC_GroupStop" job.
● A new "MC_DefineWorkspaceZone" job does not abort any active Motion Control jobs.

3418

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Parameter
The following table shows the parameters of Motion Control instruction
"MC_DefineWorkspaceZone":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

ZoneType

INPUT

DINT

0

ZoneNumber

ReferenceSystem

INPUT

INPUT

DINT

DINT

1

0

Frame

INPUT

TO_Struct_Kine‐
matics_Frame

-

GeometryType

INPUT

DINT

0

GeometryParameter
GeometryParameter[1]

The job is accepted in the job sequence.

Zone type
0

Blocked zone

1

Work zone

2

Signal zone

Zone number
1

Zone 1

2

Zone 2

3

Zone 3

4

Zone 4

5

Zone 5

6

Zone 6

7

Zone 7

8

Zone 8

9

Zone 9

10

Zone 10

Reference system
0

World coordinate system (WCS)

1

Object coordinate system 1 (OCS1)

2

Object coordinate system 2 (OCS2)

3

Object coordinate system 3 (OCS3)

Shifting of the zone zero point in relation to the
reference system
Zone geometry type
0

Cuboid

1

Sphere

2

Cylinder

INPUT

ARRAY [1..3] OF
LREAL

-

Geometric parameters

INPUT

LREAL

0.0

Length x
When "GeometryType" = 1 or 2:
Radius

GeometryParameter[2]

INPUT

LREAL

0.0

Length y
When "GeometryType" = 2:
Height

0.0

Length z

Done

GeometryParameter[3]

OUTPUT BOOL

INPUT

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

Programación del PLC
Manual de programación y manejo, 11/2019

LREAL

3419

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

CommandAborted

Data type

Default
value

Description

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
MC_SetWorkspaceZoneActive: Activating workspace zone V4 (Página 3422)
MC_SetWorkspaceZoneInactive: Deactivating workspace zone V4 (Página 3423)

MC_DefineKinematicsZone V4
MC_DefineKinematicsZone: Defining kinematics zone V4
Description
With the Motion Control instruction "MC_DefineKinematicsZone", you define a kinematics zone
in relation to the tool and flange coordinate system. The zones (<TO>.KinematicsZone[2..10])
defined under "Technology object > Configuration > Extended parameters > Zones" are not
hereby changed are available again after a restart of the technology object. The
"<TO>.StatusKinematicsZone" tag of the technology object data block contains the currently
effective kinematics zones.
The "MC_DefineKinematicsZone" job is added to the queue of the job sequence and is
therefore effective for subsequent motion jobs.
With the "GeometryType" and "GeometryParameter" parameters, you specify the zone
geometry type and size. You can define up to nine kinematics zones. Kinematics zone 1 is the
tool center point (TCP) and cannot be changed.

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.

3420

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Override response
● A "MC_DefineKinematicsZone" job is aborted by an "MC_GroupStop" job.
● A new "MC_DefineKinematicsZone" job does not abort any active Motion Control jobs.

Parameters
The following table shows the parameters of Motion Control instruction
"MC_DefineKinematicsZone":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

ZoneNumber

INPUT

DINT

2

ReferenceSystem

INPUT

DINT

0

Frame

INPUT

TO_Struct_Kine‐
matics_Frame

-

GeometryType

INPUT

DINT

0

GeometryParameter
GeometryParameter[1]

The job is accepted in the job sequence.

Zone number
2

Zone 2

3

Zone 3

4

Zone 4

5

Zone 5

6

Zone 6

7

Zone 7

8

Zone 8

9

Zone 9

10

Zone 10

Reference system
0

Flange coordinate system (FCS)

1

Tool coordinate system (TCS)

Shifting of the zone zero point in relation to the
reference system
Zone geometry type
0

Cuboid

1

Sphere

2

Cylinder

INPUT

ARRAY [1..3] OF
LREAL

-

Geometric parameters

INPUT

LREAL

0.0

Length x
When "GeometryType" = 1 or 2:
Radius

GeometryParameter[2]

INPUT

LREAL

0.0

Length y
When "GeometryType" = 2:
Height

GeometryParameter[3]

0.0

Length z

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Done

INPUT

Programación del PLC
Manual de programación y manejo, 11/2019

LREAL

3421

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Error

ErrorID

Data type

Default
value

Description

OUTPUT BOOL

FALSE

TRUE

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

Consulte también
MC_SetKinematicsZoneActive: Activating kinematics zone V4 (Página 3425)
MC_SetKinematicsZoneInactive: Deactivating kinematics zone V4 (Página 3427)

MC_SetWorkspaceZoneActive V4
MC_SetWorkspaceZoneActive: Activating workspace zone V4
Description
The "MC_SetWorkspaceZoneActive" Motion Control instruction is used to activate the
workspace zone which you have defined under "Technology object > Configuration > Extended
parameters > Zones" of via an "MC_DefineWorkspaceZone" job With the "ZoneNumber"
parameter, you enter the number of the zone to be activated.
The "MC_SetWorkspaceZoneActive" job is added to the queue of the job sequence and is
therefore effective for subsequent motion jobs.
The "<TO>.StatusWorkspaceZone[1..10].Active" tags of the technology object data block
contain the current activation status of the zones. While several of the defined blocked zones
and signal zones can be active simultaneously, only one area of the defined work zones can be
active.

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.
● The zone to be activated is defined.

Override response
● A "MC_SetWorkspaceZoneActive" job is aborted by an "MC_GroupStop" job.
● A new "MC_SetWorkspaceZoneActive" job does not abort any active Motion Control jobs.

3422

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Parameter
The following table shows the parameters of Motion Control instruction
"MC_SetWorkspaceZoneActive":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

ZoneNumber

INPUT

DINT

1

Done

Start job with a positive edge

Zone number
1

Zone 1

2

Zone 2

3

Zone 3

4

Zone 4

5

Zone 5

6

Zone 6

7

Zone 7

8

Zone 8

9

Zone 9

10

Zone 10

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
MC_DefineWorkspaceZone: Defining workspace zone V4 (Página 3418)
MC_SetWorkspaceZoneInactive: Deactivating workspace zone V4 (Página 3423)

MC_SetWorkspaceZoneInactive V4
MC_SetWorkspaceZoneInactive: Deactivating workspace zone V4
Description
You use Motion Control instruction "MC_SetWorkspaceZoneInactive" to deactivate an active
workspace zone. With the "Mode" parameter, you can deactivate a specific zone, all zones of
a type or all zones.

Programación del PLC
Manual de programación y manejo, 11/2019

3423

Instrucciones
4.1 Instrucciones
The "MC_SetWorkspaceZoneInactive" job is added to the queue of the job sequence and is
therefore effective for subsequent motion jobs.
The "<TO>.StatusWorkspaceZone[1..10].Active" tags of the technology object data block
contain the current activation status of the zones.

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.
● The zone to be deactivated is defined.

Override response
● An "MC_SetWorkspaceZoneInactive" job is aborted by an "MC_GroupStop" job.
● A new "MC_SetWorkspaceZoneInactive" job does not abort any active Motion Control jobs.

Parameters
The following table shows the parameters of Motion Control instruction
"MC_SetWorkspaceZoneInactive":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

ZoneNumber

INPUT

DINT

1

Zone number

3424

Start job with a positive edge

1

Zone 1

2

Zone 2

3

Zone 3

4

Zone 4

5

Zone 5

6

Zone 6

7

Zone 7

8

Zone 8

9

Zone 9

10

Zone 10

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

Mode

INPUT

DINT

0

Set zones of a zone type to inactive
0

Set a specific zone to inactive

1

Set all workspace zones to inactive

2

Set all exclusion zones to inactive

3

Set all alarm zones to inactive

4

Set workspace to inactive.

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
MC_DefineWorkspaceZone: Defining workspace zone V4 (Página 3418)
MC_SetWorkspaceZoneActive: Activating workspace zone V4 (Página 3422)

MC_SetKinematicsZoneActive V4
MC_SetKinematicsZoneActive: Activating kinematics zone V4
Description
The "MC_SetKinematicsZoneActive" Motion Control instruction is used to activate the zone
monitoring for a defined kinematics zone which you have defined under "Technology object >
Configuration > Extended parameters > Zones" of via an "MC_DefineKinematicsZone" job With
the "ZoneNumber" parameter, you enter the number of the kinematics zone to be activated.
The "MC_SetKinematicsZoneActive" job is added to the queue of the job sequence and is
therefore effective for subsequent motion jobs.
The "<TO>.StatusKinematicsZone[2..10].Active" tags of the technology object data block
contain the current activation status of the kinematics zones.

Applies to
● Kinematics

Programación del PLC
Manual de programación y manejo, 11/2019

3425

Instrucciones
4.1 Instrucciones

Requirement
● The technology object has been configured correctly.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.
● The kinematics zone to be activated is defined.

Override response
● An "MC_SetKinematicsZoneActive" job is not aborted by any other Motion Control job.
● A new "MC_SetKinematicsZoneActive" job does not abort any active Motion Control jobs.

Parameters
The following table shows the parameters of Motion Control instruction
"MC_SetKinematicsZoneActive":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

ZoneNumber

INPUT

DINT

2

Zone number

Done

Start job with a positive edge

2

Zone 2

3

Zone 3

4

Zone 4

5

Zone 5

6

Zone 6

7

Zone 7

8

Zone 8

9

Zone 9

10

Zone 10

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
MC_DefineKinematicsZone: Defining kinematics zone V4 (Página 3420)
MC_SetKinematicsZoneInactive: Deactivating kinematics zone V4 (Página 3427)

3426

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_SetKinematicsZoneInactive V4
MC_SetKinematicsZoneInactive: Deactivating kinematics zone V4
Description
You use Motion Control instruction "MC_SetKinematicsZoneInactive" to deactivate an active
kinematics zone. With the "Mode" parameter, you can deactivate a specific kinematics zone or
all kinematics zones.
The "MC_SetKinematicsZoneInactive" job is added to the queue of the job sequence and is
therefore effective for subsequent motion jobs.
The "<TO>.StatusKinematicsZone[2..10].Active" tags of the technology object data block
contain the current activation status of the kinematics zones.

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.
● The kinematics zone to be deactivated is defined.

Override response
● An "MC_SetKinematicsZoneInactive" job is not aborted by any Motion Control job.
● A new "MC_SetKinematicsZoneInactive" job does not abort any active Motion Control jobs.

Parameters
The following table shows the parameters of Motion Control instruction
"MC_SetKinematicsZoneInactive":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Programación del PLC
Manual de programación y manejo, 11/2019

Start job with a positive edge

3427

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

ZoneNumber

INPUT

DINT

2

Zone number

Mode

INPUT

DINT

0

2

Zone 2

3

Zone 3

4

Zone 4

5

Zone 5

6

Zone 6

7

Zone 7

8

Zone 8

9

Zone 9

10

Zone 10

Set zones to inactive
0

Set a specific zone to inactive

1

Set all zones to inactive

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Consulte también
MC_DefineKinematicsZone: Defining kinematics zone V4 (Página 3420)
MC_SetKinematicsZoneActive: Activating kinematics zone V4 (Página 3425)

Tools
MC_DefineTool V4
MC_DefineTool: Redefine tool V4
Description
You redefine the tool frame of the tool 1 job with the "MC_DefineTool" Motion Control
instruction. The start values stored in the system are not overwritten. Tool 1 is active by default.
The "MC_DefineTool" job is not added to the queue of the job sequence of the kinematics
technology object and therefore takes effect immediately. The "MC_DefineTool" job can be
executed only if the kinematics is in standstill.

3428

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
The configurable coordinates depend on the kinematics type used:
Kinematics type

Configurable coordinates

2D
3D

without orientation

x, z1)

with orientation

z, a2)

without orientation

x, y, z3)

with orientation

x, y, z, a

1) The parameters "y" and "a" are pre-defined with the value "0.0".
2) The parameters "x" and "y" are pre-defined with the value "0.0".
3) The parameter "a" can only be defined with the value "0.0".

The following tags of the technology object data block contain the current coordinates of the tool
frame 1:
● <TO>.StatusTool.Frame[1].x
● <TO>.StatusTool.Frame[1].y
● <TO>.StatusTool.Frame[1].z
● <TO>.StatusTool.Frame[1].a

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.
● The kinematics is at a standstill.
● The kinematics is not in "Interrupted" state.
● No kinematics motion is active.

Override response
● An "MC_DefineTool" job cannot be aborted by any other Motion Control job.
● A new "MC_DefineTool" job does not abort any active Motion Control jobs.

Parameters
The following table shows the parameters of Motion Control instruction "MC_DefineTool":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Programación del PLC
Manual de programación y manejo, 11/2019

Start job with a positive edge

3429

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default
value

Description

Frame

INPUT

TO_Struct_Kine‐
matics_Kinema‐
ticsFrame

-

Coordinates in relation to the FCS

Done

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

MC_SetTool V4
MC_SetTool: Change active tool V4
Description
With the "MC_SetTool" Motion Control instruction, you activate a tool. With the "ToolNumber"
parameter, you specify the tool number. The "MC_SetTool" job can be executed only if the
kinematics is in standstill. Tool 1 is active by default.
The "<TO>.StatusTool.ActiveTool" tag of the technology object data block contains the tool
number of the currently active tool.

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.
● The kinematics is at a standstill.
● The kinematics is not in "Interrupted" state.
● No kinematics motion is active.

Override response
● An "MC_SetTool" job cannot be aborted by any other Motion Control job.
● A new "MC_SetTool" job does not abort any active Motion Control jobs.

3430

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction "MC_SetTool":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

ToolNumber

INPUT

DINT

1

Done

Start job with a positive edge

Number of the tool to be activated.
1

Tool 1

2

Tool 2

3

Tool 3

OUTPUT BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Coordinate systems
MC_SetOcsFrame V4
MC_SetOcsFrame: Redefining object coordinate systems V4
Description
With the "MC_SetOcsFrame" Motion Control instruction, you define the position of an object
coordinate system (OCS) in relation to the world coordinate system (WCS). The initial values
stored in the technology object data block are not overwritten in the process.
The "MC_SetOcsFrame" job is added to the queue of the job sequence and is therefore
effective only for subsequent motion jobs.
The following tags of the technology object data block contain the current coordinates of the
object coordinate systems:
● <TO>.StatusOcsFrame[1..3].x
● <TO>.StatusOcsFrame[1..3].y
● <TO>.StatusOcsFrame[1..3].z
● <TO>.StatusOcsFrame[1..3].a
● <TO>.StatusOcsFrame[1..3].b
● <TO>.StatusOcsFrame[1..3].c

Programación del PLC
Manual de programación y manejo, 11/2019

3431

Instrucciones
4.1 Instrucciones

Applies to
● Kinematics

Requirement
● The technology object has been configured correctly.
● A single axis job (e.g. "MC_MoveVelocity") is not active on any of the interconnected axes.

Override response
The override response for "MC_SetOcsFrame" jobs is described in section "Override response
V4: Kinematics motion commands (Página 3434)".

Parameters
The following table shows the parameters of Motion Control instruction "MC_SetOcsFrame":
Parameter

Declara‐
tion

Data type

Default
value

Description

AxesGroup

INPUT

TO_Kinematics

-

Technology object

Execute

INPUT

BOOL

FALSE

TRUE

Frame

INPUT

TO_Struct_Kine‐
matics_Frame

-

Coordinates in relation to the WCS

OcsNumber

INPUT

DINT

1

Object coordinate system

The job is accepted in the job sequence.

1

Object coordinate system 1 (OCS1)

2

Object coordinate system 2 (OCS2)

3

Object coordinate system 3 (OCS3)

OUTPUT BOOL

FALSE

TRUE

Job is completed. The new values are
active for the display and the motion.

Busy

OUTPUT BOOL

FALSE

TRUE

The job is being processed.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

16#0000

Error ID for parameter "ErrorID"

Done

Consulte también
Override response V4: Kinematics motion commands (Página 3434)

3432

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Override response of Motion Control jobs V4
Override response V4: Homing and motion jobs
The following table shows how a new Motion Control job affects active homing and motion jobs:
⇒ Active job
⇓ New job

MC_Home

MC_Home

MC_Halt

"Mode" = 2, 8, 10

("Mode" = 3,
5)

MC_MoveAbsolute

MC_MoveSuper‐ MC_MotionIn‐
imposed
Velocity
MC_MotionIn‐
Position

MC_MoveRelative
MC_MoveVelocity
MC_MoveJog

MC_Home

A

A

A

A

A

A

-

-

-

-

-

A

A

A

A

MC_MoveSuperimposed

-

-

-

A

-

MC_GearIn

-

A

A

A

-

"Mode" = 3, 5
MC_Home
"Mode" = 9
MC_Halt
MC_MoveAbsolute
MC_MoveRelative
MC_MoveVelocity
MC_MoveJog
MC_MotionInVelocity
MC_MotionInPosition

MC_GearInPos pending

1)

MC_GearInPos active2)

-

-

-

-

-

-

A

A

A

-

MC_CamIn pending1)

-

-

-

-

-

MC_CamIn active2)

-

A

A

A

-

A The running job is aborted with "CommandAborted" = TRUE.
-

No effect. Running job continues to be executed.

1) "Busy" = TRUE, "StartSync" = FALSE, "InSync" = FALSE
2) "Busy" = TRUE, "StartSync" or "InSync" = TRUE

Override response V4: Synchronous operation jobs
The following table shows how a new Motion Control job affects the motion of the axis on active
synchronous operation jobs:
⇒ Active job

MC_GearIn

⇓ New job

MC_Home

MC_GearIn‐
Pos pending1)

MC_GearIn‐
Pos active2)

MC_Phasing‐
Absolute

MC_CamIn
pending1)

MC_CamIn
active2)

MC_Phasing‐
Relative
A

-

-

-

-

-

A

-

A

A

-

A

"Mode" = 3, 5
MC_Halt

Programación del PLC
Manual de programación y manejo, 11/2019

3433

Instrucciones
4.1 Instrucciones
⇒ Active job

MC_GearIn

⇓ New job

MC_GearIn‐
Pos pending1)

MC_GearIn‐
Pos active2)

MC_Phasing‐
Absolute

MC_CamIn
pending1)

MC_CamIn
active2)

MC_Phasing‐
Relative

MC_MoveAbsolute

A

-

A

A

-

A

A

A

A

-

A

A

MC_MoveRelative
MC_MoveVelocity
MC_MoveJog
MC_MotionInVelocity
MC_MotionInPosition
MC_MoveSuperimposed

-

-

-

-

-

-

MC_GearIn

A

A

A

A

A

A

MC_GearInPos pending1)

-

A

-

-

A

-

MC_GearInPos active2)

A

A

A

A

A

A

MC_PhasingAbsolute

-

-

-

A

-

-

MC_CamIn pending1)

-

A

-

-

A

-

MC_CamIn active

A

A

A

A

A

A

MC_PhasingRelative
2)

A The running job is aborted with "CommandAborted" = TRUE.
-

No effect. Running job continues to be executed.

1) A pending synchronous operation ("Busy" = TRUE, "StartSync" = FALSE, "InSync" = FALSE) does not cancel active
commands. A pending synchronous operation job can only be overridden by a further synchronous operation job on the same
following axis. Cancellation is possible with "MC_Power".
2) The status "Busy" = TRUE, "StartSync" or "InSync" = TRUE corresponds to active synchronous operation.

Override response V4: Measuring input jobs
The following table shows which new Motion Control jobs will override active measuring input
jobs:
⇒ Active job

MC_MeasuringInput

MC_MeasuringInputCyclic

A

A

-

-

A

A

⇓ New job
MC_Home
"Mode" = 2, 3, 5, 8, 9, 10
MC_Home
"Mode" = 0, 1, 6, 7
MC_MeasuringInput
MC_MeasuringInputCyclic
MC_AbortMeasuringInput
A The running job is aborted with "CommandAborted" = TRUE.
-

No effect. Running job continues to be executed.

Override response V4: Kinematics motion commands
Single axis jobs are not overridden by kinematics jobs.

3434

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
The following table shows how a new Motion Control job affects active kinematics motion jobs:
⇒ Active job
⇓ New job

MC_MoveLinearAbsolute

MC_GroupInterrupt

MC_GroupStop

N

N

N

A

A

A

B

A

N

-

-

N

MC_MoveLinearRelative
MC_MoveCircularAbsolute
MC_MoveCircularRelative
MC_DefineWorkspaceZone
MC_DefineKinematikZone
MC_SetWorkspaceZoneActive
MC_SetWorkspaceZoneInactive
MC_SetKinematicsZoneActive
MC_SetKinematicsZoneInactive
MC_SetOcsFrame

MC_Home
MC_MoveSuperimposed
MC_Halt
MC_MoveAbsolute
MC_MoveRelative
MC_MoveVelocity
MC_MoveJog
MC_GearIn
MC_GearInPos
MC_CamIn
MC_MotionInVelocity
MC_MotionInPosition
MC_GroupStop
MC_GroupInterrupt
MC_GroupContinue
MC_MoveLinearAbsolute
MC_MoveLinearRelative
MC_MoveCircularAbsolute
MC_MoveCircularRelative
MC_DefineWorkspaceZone
MC_DefineKinematikZone
MC_SetWorkspaceZoneActive
MC_SetWorkspaceZoneInactive
MC_SetKinematicsZoneActive
MC_SetKinematicsZoneInactive
MC_SetOcsFrame

A The running job is aborted with "CommandAborted" = TRUE.
B Running job is interrupted or resumed.
N Not permitted. Running job continues to be executed. The new job is rejected.
-

No effect. Running job continues to be executed. The new job is added to the queue of the job sequence.

Programación del PLC
Manual de programación y manejo, 11/2019

3435

Instrucciones
4.1 Instrucciones

S7-1500 Motion Control V3
MC_Power V3
MC_Power: Enable, disable technology object V3
Description
With the Motion Control instruction "MC_Power", a technology object is enabled or disabled.

Applies to
● Synchronous axis
● Positioning axis
● Speed axis
● External encoder

Requirements
● The technology object has been configured correctly.

Override response
● An "MC_Power" job cannot be aborted by any other Motion Control job.
● An "MC_Power" job with parameter "Enable" = TRUE enables a technology object but does
not thereby abort any other Motion Control instructions.
● Disabling the technology object (parameter "Enable" = FALSE) aborts all Motion Control
jobs on the corresponding technology object in accordance with the selected "StopMode".
This process cannot be canceled by the user.

Parameters
The following table shows the parameters of the "MC_Power" Motion Control instruction:
Parameters

Declaration

Data type

Default value

Description

Axis

INPUT

TO_Axis

-

Technology object

Enable

INPUT

BOOL

FALSE

TRUE

The technology object is enabled.

FALSE The technology object is disabled.
All current jobs at the technology object are aborted
in accordance with the configured "StopMode".

3436

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declaration

Data type

Default value

Description

StartMode

INPUT

DINT

1

0

Enable positioning axis/synchronous axis not posi‐
tion-controlled

1

Enable positioning axis/synchronous axis positioncontrolled

The parameter acts initially when the positioning axis is ena‐
bled (Enable changes from FALSE to TRUE) and when the
axis is enabled after successful acknowledgment of an alarm
that caused the axis to be disabled.
This parameter is ignored when a speed axis or external en‐
coder is used.
StopMode

INPUT

INT

0

Not applicable to the technology object external encoder
If you disable a technology object with a negative edge at
parameter "Enable", the axis decelerates in accordance with
the selected "StopMode".
0

Emergency stop
When the technology object is disabled, the axis
brakes to a standstill without jerk limit, using the
emergency stop deceleration configured in "Tech‐
nology object > Configuration > Extended parame‐
ters > Emergency stop ramp". The enable is then
canceled.
(<TO>.DynamicDefaults.
EmergencyDeceleration)

1

Immediate stop
When a technology object is disabled, the setpoint
zero is output, and the enable is canceled. The axis
is braked to a standstill according to the configura‐
tion in the drive.

2

Stop with maximum dynamic values
When the technology object is disabled, the axis is
braked to a standstill using the maximum decelera‐
tion configured in "Technology object > Configura‐
tion > Extended parameters > Dynamic limits". The
configured maximum jerk is hereby taken into ac‐
count. The enable is then canceled.
(<TO>.DynamicLimits.MaxDeceleration;
<TO>.DynamicLimits.MaxJerk)

Programación del PLC
Manual de programación y manejo, 11/2019

3437

Instrucciones
4.1 Instrucciones
Parameters

Declaration

Data type

Default value

Description

Status

OUTPUT

BOOL

FALSE

Technology object enable status
FALSE Disabled
‑ A positioning axis, synchronous axis or speed axis
does not accept any Motion Control jobs.
‑ Speed control and position control are not active.
‑ The actual values of the technology object are not
checked for validity.
TRUE

Enabled
‑ An enabled positioning axis, synchronous axis or
speed axis accepts Motion Control jobs.
‑ Speed control and position control are active.
- The actual values of the technology object are va‐
lid.

Busy

OUTPUT

BOOL

FALSE

TRUE

Job is running.

Error

OUTPUT

BOOL

FALSE

TRUE

An error occurred in Motion Control instruction
MC_Power. The cause of the error can be found in
the "ErrorID" parameter.

ErrorID

OUTPUT

WORD

16#0000

Error ID for parameter "ErrorID"

Enabling technology objects
To enable a technology object, set the "Enable" parameter to TRUE.
When the Status parameter shows the value TRUE , the technology object is enabled.
If an axis is in motion when the technology object is enabled (actual velocity is present), the axis
brakes to the setpoint zero, using the maximum deceleration configured in "Technology object
> Configuration > Extended parameters > Dynamic limits"
(<TO>.DynamicLimits.MaxDeceleration). This braking ramp can be overridden by Motion
Control jobs.
Nota
Automatic enable after acknowledgment of a technology alarm
If the technology object is disabled due to a technology alarm, it will automatically be enabled
again after the cause has been eliminated and the alarm has been acknowledged. This
requires the "Enable" parameter to have retained the value TRUE during this process.

Disabling technology objects
To disable a technology object, set the "Enable" parameter to FALSE.
If an axis is in motion, it is braked to a standstill according to the selected "StopMode".
When the "Busy" and "Status" parameters show the value FALSE , the disabling of the
technology object is complete.

3438

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Drive connection by means of PROFIdrive
When a drive is connected using PROFIdrive, the setpoint, enable and drive status are
transmitted via the PROFIdrive telegram.
● Enable technology object and activate drive
With parameter "Enable" = TRUE, the technology object is enabled. The drive is enabled
according to the PROFIdrive standard.
When the tag <TO>.StatusDrive.InOperation shows the value TRUE , the drive is ready to
execute setpoints. The "Status" parameter is set to the value TRUE .
● Disable technology object and deactivate drive
With parameter "Enable" = FALSE, the "Status" parameter is set to the value FALSE, and
the axis is braked according to the selected "StopMode". The drive is disabled according to
the PROFIdrive standard.

Analog drive connection
The setpoint is output via an analog output. Optionally, you can configure an enabling signal via
digital output (<TO>.Actor.Interface.EnableDriveOutput), and a readiness signal via digital
input (<TO>.Actor.Interface.DriveReadyInput).
● Enable technology object and activate drive
With parameter "Enable" = TRUE, the enable output ("Enable drive output") is set.
When the drive returns the readiness signal via the ready input ("Drive ready input"), the
"Status" parameter and the technology object's <TO>.StatusDrive.InOperation tag are set
to TRUE, and the setpoint is switched to the analog output.
● Disable technology object and deactivate drive
With parameter "Enable" = FALSE, the "Status" parameter is set to the value FALSE, and
the axis is braked according to the selected "StopMode". When the setpoint zero is reached,
the enable output is set to FALSE.

Additional information
Additional information on enabling and disabling technology objects and drives can be found in
the appendix, MC_Power Function Charts.

Programación del PLC
Manual de programación y manejo, 11/2019

3439

Instrucciones
4.1 Instrucciones

MC_Power: Function chart V3
Function chart: Enabling a technology object and example of alarm response
$

$

0&B3RZHU
72B
(QDEOHB

$[LV

0&B0RYH9HORFLW\
6WDWXV

6WDWXVB

72B

$[LV

,Q9HORFLW\

(QDEOH

%XV\

%XV\B

([HB

([HFXWH

%XV\



6WRS0RGH

(UURU

(UURUB



9HORFLW\

&RPPDQG$ERUWHG



6WDUW0RGH

(UURU,'



$FFHOHUDWLRQ

(UURU



'HFHOHUDWLRQ

(UURU,'

ದ

-HUN





$
(QDEOHB
%XV\B
6WDWXVB
(UURUB










'LUHFWLRQ



&XUUHQW



3RVLWLRQ&RQWUROOHG




(UURU

W
W
W
W

$
([HB





72B
$FWXDO9HORFLW\


W

W

A technology object is enabled with "Enable_1= TRUE". The successful enable can be read
from "Status_1" at time ①. The axis will then move with an "MC_MoveVelocity" job (A2). The
velocity profile of the axis can be read from "Velocity Axis_1".
At time ② an error occurs in the technology object, which results in the disabling of the
technology object (alarm response: remove enable). The axis is braked to a standstill according
to the configuration in the drive. When the technology object is disabled, "Status_1" is reset.
Since the axis was not disabled using "Enable_1" = FALSE, the selected "StopMode" does not
apply. The cause of the error is corrected and the alarm is acknowledged at time ③.
Since "Enable_1" is still set, the technology object is enabled again. The successful enable can
be read from "Status_1". Finally, the technology object is disabled with "Enable_1" = FALSE.

3440

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_Reset V3
MC_Reset: Acknowledge alarms, restart technology object V3
Description
With the Motion Control instruction "MC_Reset", you acknowledge all technology alarms that
can be acknowledged in the user program. Acknowledgment also resets the "Error" and
"Warning" bits in the technology data block.
With the Motion Control instruction "MC_Reset" with "Restart" = TRUE, you start reinitialization
(restart) of technology objects. Upon restart of the technology object, the new configuration
data are applied in the technology data block.

Applies to
● All technology objects

Requirement
● Positioning/synchronous axis, speed axis and external encoder technology objects:
For a restart, the technology object must be disabled.
("MC_Power.Status" = FALSE and "MC_Power.Busy" = FALSE)

Override response
● Parameter "Restart" = FALSE:
The MC_Reset job does not abort any active motion control jobs.
● Parameter "Restart" = TRUE:
Processing of the "MC_Reset" instruction with parameter "Restart" = TRUE cannot be
aborted by any other Motion Control job.

Parameters
The following table shows the parameters of the "MC_Reset" Motion Control instruction:
Parameters

Declaration

Data type

Default value

Description

Axis

INPUT

TO_Object

-

Technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

Restart

INPUT

BOOL

FALSE

TRUE

"Restart"
Reinitialization of the technology object and ack‐
nowledgment of pending technology alarms. The
technology object is reinitialized with the configured
start values.

FALSE Acknowledgment of queued technology alarms.
Done

OUTPUT

BOOL

FALSE

TRUE

Error has been acknowledged.
Restart has been executed.

Programación del PLC
Manual de programación y manejo, 11/2019

3441

Instrucciones
4.1 Instrucciones
Parameters

Declaration

Data type

Default value

Description

Busy

OUTPUT

BOOL

FALSE

TRUE

Job is running.

Comman‐
dAborted

OUTPUT

BOOL

FALSE

TRUE

The job was aborted by another job during execu‐
tion.

Error

OUTPUT

BOOL

FALSE

TRUE

An error occurred during execution of the job. The
job is rejected. The cause of the error can be found
in the "ErrorID" parameter.

ErrorID

OUTPUT

WORD

16#0000

Error ID for parameter "ErrorID"

Acknowledging technology alarms
To acknowledge technology alarms, follow these steps:
1. Check the requirements indicated above.
2. Set parameter "Restart" = FALSE.
3. Start the acknowledgment of the error with a positive edge at parameter "Execute".
When the Done parameter shows the value TRUE, the error has been acknowledged.
Nota
Acknowledging with "Restart" = FALSE
If only the technology alarms are to be acknowledged, set "Restart" = FALSE. The technology
object cannot be used during a restart.

Restarting a technology object
To restart a technology object, follow these steps:
1. Check the requirements indicated above.
2. Set parameter "Restart" = TRUE.
3. Perform the restart with a positive edge at parameter "Execute".
When the "Done" parameter shows the value TRUE, the restart of the technology object is
complete.
Additional information regarding the restart can be found in the Restarting technology objects
section.

3442

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_Home V3
MC_Home: Home technology object, set home position V3
Description
With the Motion Control instruction "MC_Home", you create the relationship between the
position in the technology object and the mechanical position. The actual position value in the
technology object is assigned to a homing mark at the same time. This homing mark represents
a known mechanical position.
Homing is performed according to the mode selected with the "Mode" parameter and the
configuration under "Technology object > Configuration > Extended parameters > Homing".
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control has
been standardized within the framework of technology version V2.0. This results in a new
assignment of the parameter values for the "MC_Home.Mode" parameter. A comparison of the
"MC_Home.Mode" parameter for technology versions V1.0 and ≥ V2.0 is available in section
Version overview.
The preset values under "Technology object > Configuration > Extended parameters >
Dynamic default values" are used for the dynamic values Acceleration, Deceleration and Jerk.

Applies to
● Synchronous axis
● Positioning axis
● External encoder
The following table shows which modes are possible with each of the technology objects:
Operating mode

Positioning axis/
Positioning axis/
synchronous axis
synchronous axis
with incremental en‐ with absolute enco‐
coder
der

Active homing

External incremen‐
tal encoder

External absolute
encoder

X

-

-

-

X

-

X

-

X

X

X

X

X

X

X

X

-

X

-

X

("Mode" = 3, 5)
Passive homing
("Mode" = 2, 8, 10)
Set actual position
("Mode" = 0)
Relative shift of the actual position
("Mode" = 1)
Absolute encoder adjustment
("Mode" = 6, 7)

Programación del PLC
Manual de programación y manejo, 11/2019

3443

Instrucciones
4.1 Instrucciones

Requirement
● The technology object has been configured correctly.
● "Mode" = 2, 3, 5, 8, 10
The technology object is enabled.
● "Mode" = 0, 1, 6, 7, 8
The actual encoder values are valid (<TO>.StatusSensor[n].State = 2).
● "Mode" = 6, 7
The axis is in position-controlled mode.

Override response
The override response for "MC_Home" jobs is described in section Override response of
Motion Control commands V3 (Página 3526).

Parameters
The following table shows the parameters of the "MC_Home" Motion Control instruction:
Parameter

Declaration

Data type

Default value

Description

Axis

INPUT

TO_Axis

-

Technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

Position

INPUT

LREAL

0.0

The specified value is used according to the selected
"Mode".

3444

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declaration

Data type

Default value

Description

Mode

INPUT

INT

0

Operating mode
0

Direct homing (absolute)
The current position of the technology object
is set to the value of parameter "Position".

1

Direct homing (relative)
The current position of the technology object
is shifted by the value of parameter "Posi‐
tion".

2

Passive homing
(without reset)
Functions like "Mode" 8, with the difference
that the "homed" status is not reset when the
function is enabled.

3

Active homing
The TO positioning axis/synchronous axis
performs a homing movement according to
the configuration.
After the completion of the motion, the axis is
positioned at the value of the "Position" pa‐
rameter.

4

Reserved

5

Active homing
("Position" parameter has no effect)
The TO positioning axis/synchronous axis
performs a homing movement according to
the configuration.
After completion of the motion, the axis is
positioned at the home position configured
under "Technology object > Configuration >
Extended parameters > Homing > Active ho‐
ming".
(<TO>.Homing.HomePosition)

6

Absolute encoder adjustment (relative)
The current position is shifted by the value of
parameter "Position".
The calculated absolute value offset is sto‐
red retentively in the CPU.
(<TO>.StatusSensor[n].
AbsEncoderOffset)

7

Absolute encoder adjustment (absolute)
The current position is set to the value of
parameter "Position".
The calculated absolute value offset is sto‐
red retentively in the CPU.
(<TO>.StatusSensor[n].
AbsEncoderOffset)

8

Programación del PLC
Manual de programación y manejo, 11/2019

Passive homing

3445

Instrucciones
4.1 Instrucciones
Parameter

Declaration

Data type

Default value

Description
When the homing mark is detected, the ac‐
tual value is set to the value of the "Position"
parameter.
9

Abort passive homing
An active job for passive homing is aborted.

10

Passive homing
("Position" parameter has no effect)
When the homing mark is detected, the ac‐
tual value is set to the home position confi‐
gured under "Technology object > Configu‐
ration > Extended parameters > Homing >
Passive homing".
(<TO>.Homing.HomePosition)

ReferenceMarkPo‐ OUTPUT
sition

LREAL

0.0

Display of the position at which the technology object
was homed

Done

OUTPUT

BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT

BOOL

FALSE

TRUE

Job is running.

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

The job was aborted by another job during
execution.

Error

OUTPUT

BOOL

FALSE

TRUE

An error occurred during execution of the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" parame‐
ter.

ErrorID

OUTPUT

WORD

16#0000

Error ID for parameter "ErrorID"

(valid when "Done" = TRUE)

3446

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Resetting the "Homed" status
The "Homed" status of a technology object is reset under the following conditions
(<TO>.StatusWord.X5 (HomingDone)):
● Technology objects with incremental actual values:
– Starting an "MC_Home" job with "Mode" = 3, 5, 8, 10
(After successful completion of the homing operation, the "Homed" status is reset.)
– Error in the encoder system, or encoder failure
– Restart of the technology object
– After POWER OFF -> POWER ON of the CPU
– Memory reset
– Modification of the encoder configuration
● Technology objects with absolute actual values:
– Error in sensor system/encoder failure
– Replacement of the CPU
– Modification of the encoder configuration
– Restoration of the CPU factory settings
– Transfer of a different project into the controller

Homing a technology object with "Mode" = 1..8, 10
To home a technology object, follow these steps:
1. Check the requirements indicated above.
2. Specify the desired homing function in the "Mode" parameter.
3. Initialize the necessary parameters with values, and start the homing operation with a
positive edge at the "Execute" parameter.
When the "Done" parameter shows the value TRUE, the "MC_Home" job has been completed
according to the selected "Mode". The "Homed" status of the technology object is indicated
under "Technology object > Diagnostics > Status and error bits > Motion status > Homed"
(<TO>.StatusWord.X5 (HomingDone)).

Abort of a passive homing process with "Mode" = 9
With "Mode" = 9, the technology object is not homed. When an active "MC_Home" job for
passive homing ("Mode" = 2, 8, 10) is overridden by another "MC_Home" job with "Mode" = 9,
the running job is aborted with parameter "CommandAborted" = TRUE. The overriding job with
"Mode" = 9 signals successful execution with parameter "Done" = TRUE.

Additional information
An option for the evaluation of the individual status bits can be found in the Evaluating
StatusWord, ErrorWord and WarningWord section.

Programación del PLC
Manual de programación y manejo, 11/2019

3447

Instrucciones
4.1 Instrucciones

Consulte también
Override response of Motion Control commands V3 (Página 3526)

MC_Halt V3
MC_Halt: Stop axis V3
Description
With the Motion Control instruction "MC_Halt", you brake an axis until it comes to a standstill.
You define the dynamic behavior of the braking operation with parameters "Jerk" and
"Deceleration".

Applies to
● Synchronous axis
● Positioning axis
● Speed axis

Requirements
● The technology object has been configured correctly.
● The technology object has been enabled.

Override response
The override characteristics for "MC_Halt" jobs are described in section Override response of
Motion Control commands V3 (Página 3526).

Parameters
The following table shows the parameters of the "MC_Halt" Motion Control instruction:
Parameters

Declaration

Data type

Default value

Description

Axis

INPUT

TO_SpeedAxis

-

Technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

Deceleration

INPUT

LREAL

-1.0

Deceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The deceleration configured in "Techno‐
logy object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

3448

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declaration

Data type

Default value

Description

Jerk

INPUT

LREAL

-1.0

Jerk
Value > 0.0: Constant-acceleration velocity profile;
the specified jerk is used
Value = 0.0: Trapezoid velocity profile
Value < 0.0: The jerk configured in "Technology object
> Configuration > Extended parameters > Dynamic
defaults" is used.
(<TO>.DynamicDefaults.Jerk)

AbortAcceleration

INPUT

BOOL

FALSE

FALSE The current acceleration at the start of the
job is reduced using the configured jerk. Af‐
terwards, the deceleration builds up
TRUE

The acceleration is set to 0.0 at the start of
the job, and the deceleration immediately
builds up.

Done

OUTPUT

BOOL

FALSE

TRUE

Zero velocity reached

Busy

OUTPUT

BOOL

FALSE

TRUE

Job is running.

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

The job was aborted by another job during
execution.

Error

OUTPUT

BOOL

FALSE

TRUE

An error occurred during execution of the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" parame‐
ter.

ErrorID

OUTPUT

WORD

16#0000

Error ID for parameter "ErrorID"

Braking an axis with "MC_Halt"
Proceed as follows to decelerate an axis to a standstill:
1. Check the requirements indicated above.
2. Supply the parameters "Deceleration", "Jerk" and "AbortAcceleration" with the desired
values.
3. Start the "MC_Halt" job with a positive edge at parameter "Execute".
The current motion state is indicated in "Busy", "Done" and "Error". The standstill of the axis is
indicated under "Technology object > Diagnostics > Status and error bits > Motion status >
Standstill" (<TO>.StatusWord.X7 (Standstill)).

Braking an axis with active force/torque limit
With active force/torque limiting the permitted torque may not be sufficient to move the
calculated braking ramp. The "MC_Halt" command does not signal "Done" = TRUE.
To brake an axis with active force/torque limiting, use the Motion Control instruction
"MC_MoveVelocity" with "MC_MoveVelocity.Velocity" = 0.0 and
"MC_MoveVelocity.PositionControlled" = FALSE.

Programación del PLC
Manual de programación y manejo, 11/2019

3449

Instrucciones
4.1 Instrucciones

Additional information
An option for the evaluation of the individual status bits can be found in the Evaluating
StatusWord, ErrorWord and WarningWord section.

Consulte también
Override response of Motion Control commands V3 (Página 3526)
MC_MoveVelocity: Move axis at velocity/speed setpoint V3 (Página 3460)

3450

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_Halt: Function chart V3
Function chart: Stopping an axis and the overriding job characteristics
$

$

0&B0RYH9HORFLW\
72B

0&B+DOW

,Q9HORFLW\

,Q9HOB

72B

([HB

([HFXWH

%XV\

%XV\B

([HB



9HORFLW\

&RPPDQG$ERUWHG

$[LV

$ERUWB





$FFHOHUDWLRQ

(UURU





'HFHOHUDWLRQ

(UURU,'

$ERUW$FFB



-HUN



'LUHFWLRQ



&XUUHQW



3RVLWLRQ&RQWUROOHG



$

$[LV

'RQH

'RQHB

([HFXWH

%XV\

%XV\B

'HFHOHUDWLRQ

&RPPDQG$ERUWHG

-HUN

$ERUWB

(UURU

$ERUW$FFHOHUDWLRQ

(UURU,'





([HB



W



%XV\B



W



$ERUWB



W

$


([HB



$ERUW$FFB

W




W



'RQHB



W



%XV\B



W


72B9HORFLW\


W


72B$FFHOHUDWLRQ

W

ದ


72B-HUN



W

ದ
ದ
$

Programación del PLC
Manual de programación y manejo, 11/2019

%

3451

Instrucciones
4.1 Instrucciones

Section
$

Section
%

An axis is moved with an "MC_MoveVelocity" job (A1). At time ①, the "MC_MoveVelocity" job is overridden by
an "MC_Halt" job (A2). The job abort is signaled via "Abort_1". With "AbortAcc_2" = FALSE, the current accele‐
ration is reduced with the specified jerk. Afterward, the deceleration builds up and the axis is braked to a standstill.
Successful completion of the "MC_Halt" job is signaled via "Done_2".

The axis is moved with an "MC_MoveVelocity" job (A1). At time ②, the "MC_MoveVelocity" job is overridden by
an "MC_Halt" job (A2). The job abort is signaled via "Abort_1". With "AbortAcc_2" = TRUE, the current acceleration
is set to zero immediately and the deceleration builds up. The axis is braked to a standstill. Successful completion
of the "MC_Halt" job is signaled via "Done_2".

MC_MoveAbsolute V3
MC_MoveAbsolute: Position axis absolutely V3
Description
With the Motion Control instruction "MC_MoveAbsolute", you can move an axis to an absolute
position.
You define the dynamic behavior of the motion with parameters "Velocity", "Jerk",
"Acceleration" and "Deceleration".

Applies to
● Synchronous axis
● Positioning axis

Requirement
● The technology object has been configured correctly.
● The technology object is enabled.
● The technology object is homed.

Override response
The override response for "MC_MoveAbsolute" jobs is described in section Override response
of Motion Control commands V3 (Página 3526).

3452

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of the "MC_MoveAbsolute" Motion Control
instruction:
Parameters

Declaration

Data type

Default value

Description

Axis

INPUT

TO_Positionin‐
gAxis

-

Technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

Position

INPUT

LREAL

0.0

Absolute target position

Velocity

INPUT

LREAL

-1.0

Velocity setpoint for the positioning
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The velocity configured in "Technology
object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Velocity)

Acceleration

INPUT

LREAL

-1.0

Acceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The acceleration configured in "Techno‐
logy object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The deceleration configured in "Techno‐
logy object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk
Value > 0.0: Constant-acceleration velocity profile;
the specified jerk is used
Value = 0.0: Trapezoid velocity profile
Value < 0.0: The jerk configured in "Technology object
> Configuration > Extended parameters > Dynamic
defaults" is used.
(<TO>.DynamicDefaults.Jerk)

Direction

INPUT

INT

1

Motion direction of the axis
Is only evaluated with "modulo" enabled.
"Technology object > Configuration > Basic parame‐
ters > Enable modulo
1

Positive direction

2

Negative direction

3

Shortest distance

Done

OUTPUT

BOOL

FALSE

TRUE

Target position reached.

Busy

OUTPUT

BOOL

FALSE

TRUE

Job is running.

Programación del PLC
Manual de programación y manejo, 11/2019

3453

Instrucciones
4.1 Instrucciones
Parameters

Declaration

Data type

Default value

Description

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

The job was aborted by another job during
execution.

Error

OUTPUT

BOOL

FALSE

TRUE

An error occurred during execution of the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" parame‐
ter.

ErrorID

OUTPUT

WORD

16#0000

Error ID for parameter "ErrorID"

Moving an axis to an absolute position
Proceed as follows to move an axis to an absolute position:
1. Check the requirements indicated above.
2. Specify the desired target position in the "Position" parameter.
3. Start the "MC_MoveAbsolute" job with a positive edge at parameter "Execute".
The current motion state is indicated in "Busy", "Done" and "Error".

Consulte también
Override response of Motion Control commands V3 (Página 3526)

3454

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_MoveAbsolute: Function chart V3
Function chart: Absolute positioning of an axis, and the response to an overriding job
$

$

0&B0RYH$EVROXWH

0&B0RYH$EVROXWH

$[LV

'RQH

'RQHB

72B

$[LV

'RQH

'RQHB

([HB

([HFXWH

%XV\

%XV\B

([HB

([HFXWH

%XV\

%XV\B



3RVLWLRQ

&RPPDQG$ERUWHG

$ERUWB



3RVLWLRQ

&RPPDQG$ERUWHG



9HORFLW\

(UURU



9HORFLW\

(UURU,'



$FFHOHUDWLRQ



'HFHOHUDWLRQ

72B



$FFHOHUDWLRQ



'HFHOHUDWLRQ

ದ


ದ

-HUN
'LUHFWLRQ





$

(UURU
(UURU,'

-HUN
'LUHFWLRQ





([HB



W



'RQHB



W



%XV\B



W



$ERUWB



W

$


([HB



W



'RQHB



W



%XV\B



W



72B9HORFLW\


W



72B3RVLWLRQ


$

Programación del PLC
Manual de programación y manejo, 11/2019

%

W

3455

Instrucciones
4.1 Instrucciones

Section
$

Section
%

An axis is moved to absolute position 1000.0 with an "MC_MoveAbsolute" job (A1). When the axis reaches the
target position, this is signaled at time ① via "Done_1". At this time ①, another "MC_MoveAbsolute" job (A2) with
target position 1500.0 is started. When the axis reaches the target position 1500.0, this is signaled via "Done_2".
Since "Exe_2" was previously reset, "Done_2" is applied only to one cycle.
An active "MC_MoveAbsolute" job (A1) is overridden at time ② by another "MC_MoveAbsolute" job (A2). The
abort is signaled via "Abort_1". The axis is braked to the changed velocity and moved to the new target position
1500.0. When the new target position is reached, this is signaled via "Done_2".

MC_MoveRelative V3
MC_MoveRelative: Relative positioning of axis V3
Description
With the Motion Control instruction "MC_MoveRelative", you move an axis relative to its
position when execution of the job began.
You define the dynamic behavior of the motion with parameters "Velocity", "Jerk",
"Acceleration" and "Deceleration".

Applies to
● Synchronous axis
● Positioning axis

Requirements
● The technology object has been configured correctly.
● The technology object has been enabled.

Override response
The override characteristics for "MC_MoveRelative" jobs are described in section Override
response of Motion Control commands V3 (Página 3526).

Parameters
The following table shows the parameters of the "MC_MoveRelative" Motion Control
instruction:
Parameters

Declaration

Data type

Default value

Description

Axis

INPUT

TO_Positionin‐
gAxis

-

Technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

Distance

INPUT

LREAL

0.0

Distance for the positioning process
(negative or positive)

3456

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declaration

Data type

Default value

Description

Velocity

INPUT

LREAL

-1.0

Velocity setpoint for the positioning
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The velocity configured in "Technology
object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Velocity)

Acceleration

INPUT

LREAL

-1.0

Acceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The acceleration configured in "Techno‐
logy object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The deceleration configured in "Techno‐
logy object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk
Value > 0.0: Constant-acceleration velocity profile;
the specified jerk is used
Value = 0.0: Trapezoid velocity profile
Value < 0.0: The jerk configured in "Technology object
> Configuration > Extended parameters > Dynamic
defaults" is used.
(<TO>.DynamicDefaults.Jerk)

Done

OUTPUT

BOOL

FALSE

TRUE

Target position reached

Busy

OUTPUT

BOOL

FALSE

TRUE

Job is running.

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

The job was aborted by another job during
execution.

Error

OUTPUT

BOOL

FALSE

TRUE

An error occurred during execution of the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" parame‐
ter.

ErrorID

OUTPUT

WORD

16#0000

Error ID for parameter "ErrorID"

Moving an axis relative to the starting position
Proceed as follows to move an axis relative to the starting position:
1. Check the requirements indicated above.
2. Specify distance to be moved in the "Distance" parameter.
3. Start the "MC_MoveRelative" job with a positive edge at parameter "Execute".

Programación del PLC
Manual de programación y manejo, 11/2019

3457

Instrucciones
4.1 Instrucciones
The current motion state is indicated in "Busy", "Done" and "Error".

Consulte también
Override response of Motion Control commands V3 (Página 3526)

3458

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_MoveRelative: Function chart V3
Function chart: Relative positioning of an axis, and the overriding job characteristics

72B

$

$

0&B0RYH5HODWLYH

0&B0RYH5HODWLYH

$[LV

'RQH

'RQHB

72B

$[LV

'RQH

'RQHB

([HB

([HFXWH

%XV\

%XV\B

([HB

([HFXWH

%XV\

%XV\B



'LVWDQFH

$ERUWB



'LVWDQFH



9HORFLW\



$FFHOHUDWLRQ



'HFHOHUDWLRQ

ದ

&RPPDQG$ERUWHG
(UURU



(UURU,'



$FFHOHUDWLRQ



'HFHOHUDWLRQ

ದ

-HUN



$
([HB
%XV\B
'RQHB
$ERUWB

&RPPDQG$ERUWHG

9HORFLW\

(UURU
(UURU,'

-HUN






W




W




W




W

$
([HB
%XV\B
'RQHB




W




W




W



72B9HORFLW\


W



72B3RVLWLRQ


$

Programación del PLC
Manual de programación y manejo, 11/2019

%

W

3459

Instrucciones
4.1 Instrucciones

Section
$

Section
%

The axis is moved by an "MC_MoveRelative" job (A1) by the distance ("Distance") 1000.0 (the starting position
here is 0.0). When the axis reaches the target position, this is signaled at time ① via "Done_1". At this time ①,
another "MC_MoveRelative" job (A2) with distance 500.0 is started. When the axis reaches the new target posi‐
tion, this is signaled via "Done_2". Since "Exe_2" was previously reset, "Done_2" is applied only to one cycle.
An active "MC_MoveRelative" job (A1) is overridden by another "MC_MoveRelative" job (A2). The abort is sig‐
naled at time ② via "Abort_1". The axis is then moved at the new velocity by the distance ("Distance") 500.0.
When the new target position is reached, this is signaled via "Done_2".

MC_MoveVelocity V3
MC_MoveVelocity: Move axis at velocity/speed setpoint V3
Description
With the Motion Control instruction "MC_MoveVelocity", you move an axis at constant velocity/
speed.
You define the dynamic behavior of the motion with parameters"Velocity", "Jerk",
"Acceleration" and "Deceleration".
● Positioning axis/synchronous axis:
A velocity is specified in the "Velocity" parameter.
● Speed axis:
A speed is specified in the "Velocity" parameter.

Applies to
● Synchronous axis
● Positioning axis
● Speed axis

Requirement
● The technology object has been configured correctly.
● The technology object is enabled.

Override response
The override response for "MC_MoveVelocity" jobs is described in section Override response
of Motion Control commands V3 (Página 3526).

3460

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of the "MC_MoveVelocity" Motion Control instruction:
Parameters

Declaration

Data type

Default value

Description

Axis

INPUT

TO_SpeedAxis

-

Technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

Velocity

INPUT

LREAL

100.0

Velocity/speed setpoint for the motion process
("Velocity" = 0.0 is permitted)

Acceleration

INPUT

LREAL

-1.0

Acceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The acceleration configured in "Techno‐
logy object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The deceleration configured in "Techno‐
logy object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk
Value > 0.0: Constant-acceleration velocity profile;
the specified jerk is used.
Value = 0.0: Trapezoid velocity profile
Value < 0.0: The jerk configured in "Technology object
> Configuration > Extended parameters > Dynamic
defaults" is used.
(<TO>.DynamicDefaults.Jerk)

Direction

INPUT

INT

0

Direction of rotation of the axis
0

1

The sign of the velocity specified at the "Ve‐
locity" parameter defines the direction of ro‐
tation.
Positive direction of rotation
Value of "Velocity" is used.

2

Negative direction of rotation
Value of "Velocity" is used.

Programación del PLC
Manual de programación y manejo, 11/2019

3461

Instrucciones
4.1 Instrucciones
Parameters

Declaration

Data type

Default value

Description

Current

INPUT

BOOL

FALSE

Maintain current velocity
FALSE Deactivated
The values of parameters "Velocity" and "Di‐
rection" are taken into account.
TRUE

activated
The values at the parameters "Velocity" and
"Direction" are not taken into account. The
current velocity and direction at function
start are retained.
When the axis resumes motion at the velo‐
city that was current at function start, the "In‐
Velocity" parameter returns the value TRUE.

PositionControlled

INPUT

BOOL

TRUE

FALSE Non position-controlled operation
TRUE

Position-controlled mode

The parameter applies as long as the "MC_MoveVe‐
locity" job is being executed. After this, the setting of
the following job applies.
This parameter is ignored when a speed axis is used.
InVelocity

OUTPUT

BOOL

FALSE

TRUE

The velocity setpoint / speed setpoint was
reached and will be maintained.

Busy

OUTPUT

BOOL

FALSE

TRUE

Job is running.

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

The job was aborted by another job during
execution.

Error

OUTPUT

BOOL

FALSE

TRUE

An error occurred during execution of the
job. The cause of the error can be found in
the "ErrorID" parameter.

ErrorID

OUTPUT

WORD

16#0000

Error ID for parameter "ErrorID"

Behavior with velocity setpoint / speed setpoint zero ("Velocity" = 0.0)
An "MC_MoveVelocity" job with "Velocity" = 0.0 stops the axis with the configured deceleration.
When the velocity setpoint / speed setpoint zero is reached, the parameter "InVelocity" will
indicate the value TRUE.
Under "Technology object > Diagnostics > Status and error bits > Motion status", "constant
velocity" and "standstill" will be displayed (<TO>.StatusWord.X12 (ConstantVelocity);
<TO>.StatusWord.X7 (Standstill)).
The parameters "InVelocity" and "Busy" show the value TRUE until the "MC_MoveVelocity" job
is overridden by another Motion Control job.

Moving an axis with constant velocity / speed
Proceed as follows to move an axis with constant velocity / speed:
1. Check the requirements indicated above.
2. At the parameter "Velocity", specify the velocity / speed, with which the axis should be
moved.
3. Start the "MC_MoveVelocity" job with a positive edge at parameter "Execute".

3462

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
The current motion state is indicated in "Busy", "InVelocity" and "Error".
If the "InVelocity" parameter shows the value TRUE, then the velocity setpoint / speed setpoint
was reached. The axis continues moving at this constant velocity. The parameters "InVelocity"
and "Busy" show the value TRUE until the "MC_MoveVelocity" job is overridden by another
Motion Control job.
Nota
Response to a change in the override
If the velocity / speed is influenced during constant motion by a change in the override
(<TO>.Override.Velocity), the "InVelocity" parameter is reset during the acceleration or
deceleration. When the newly calculated velocity / speed is reached ("Velocity" × "Override"
%), then "InVelocity" is reset.

Additional information
An option for the evaluation of the individual status bits can be found in the Evaluating
StatusWord, ErrorWord and WarningWord section.

Consulte también
Override response of Motion Control commands V3 (Página 3526)

Programación del PLC
Manual de programación y manejo, 11/2019

3463

Instrucciones
4.1 Instrucciones

MC_MoveVelocity: Function chart V3
Function chart: Moving an axis with velocity specification, and the response to an overriding job
$

$

0&B0RYH9HORFLW\

0&B0RYH9HORFLW\

,Q9HORFLW\

,Q9HOB

72B

([HB

([HFXWH

%XV\

%XV\B

([HB

([HFXWH

%XV\



9HORFLW\

&RPPDQG$ERUWHG



9HORFLW\

&RPPDQG$ERUWHG

72B

$[LV

$ERUWB

$[LV

,Q9HORFLW\



$FFHOHUDWLRQ

(UURU



$FFHOHUDWLRQ

(UURU



'HFHOHUDWLRQ

(UURU,'



'HFHOHUDWLRQ

(UURU,'

ದ

ದ

-HUN
'LUHFWLRQ



'LUHFWLRQ



&XUUHQW



&XUUHQW
3RVLWLRQ&RQWUROOHG



$

%XV\B
$ERUWB

-HUN



3RVLWLRQ&RQWUROOHG

,Q9HOB







([HB




%XV\B




,Q9HOB




$ERUWB



W
W
W
W

$


([HB




%XV\B




,Q9HOB




$ERUWB



W
W
W
W


72B9HORFLW\



W

An "MC_MoveVelocity" job (A1) initiated via "Exe_1" accelerates the axis and signals at time ①
via "InVel_1" that the velocity setpoint 50.0 has been reached.
At time ②, the job is overridden by another "MC_MoveVelocity" job (A2). The abort is signaled
via "Abort_1". When the new velocity setpoint 15.0 is reached, this is signaled via "InVel_2".
The axis then continues moving at the constant velocity 15.0.

3464

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
The running "MC_MoveVelocity" job (A2) is overridden by another "MC_MoveVelocity" job
(A1). The abort is signaled via "Abort_2". The axis is accelerated to the new velocity setpoint
50.0. Before the velocity setpoint is reached, the current "MC_MoveVelocity" job A1) is
overridden at time ③ by another "MC_MoveVelocity" job A2). The abort is signaled via
"Abort_1". When the new velocity setpoint 15.0 is reached, this is signaled via "InVel_2". The
axis then continues moving at the constant velocity 15.0.

MC_MoveJog V3
MC_MoveJog: Move axis in jog mode V3
Description
With the Motion Control instruction "MC_MoveJog", you move an axis in jog mode.
You define the dynamic behavior of the motion with parameters "Velocity", "Jerk",
"Acceleration" and "Deceleration".
● Positioning axis/synchronous axis:
A velocity is specified in the "Velocity" parameter.
● Speed axis:
A speed is specified in the "Velocity" parameter.

Applies to
● Synchronous axis
● Positioning axis
● Speed axis

Requirement
● The technology object has been configured correctly.
● The technology object is enabled.

Override response
The override response for "MC_MoveJog" jobs is described in section Override response of
Motion Control commands V3 (Página 3526).

Programación del PLC
Manual de programación y manejo, 11/2019

3465

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of the Motion Control instruction "MC_MoveJog":
Parameters

Declaration

Data type

Default value

Description

Axis

INPUT

TO_SpeedAxis

-

Technology object

JogForward

INPUT

BOOL

FALSE

As long as the parameter is TRUE, the axis moves in
the positive direction at the velocity specified in para‐
meter "Velocity".

JogBackward

INPUT

BOOL

FALSE

As long as the parameter is TRUE, the axis moves in
the negative direction at the velocity specified in pa‐
rameter "Velocity".

Velocity

INPUT

LREAL

100.0

Velocity setpoint / speed setpoint for the motion
Value > 0.0: The specified value is used.
Value < 0.0: The absolute value of the specified value
is used.
("Velocity" = 0.0 is permitted)

Acceleration

INPUT

LREAL

-1.0

Acceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The acceleration configured in "Techno‐
logy object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The deceleration configured in "Techno‐
logy object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk
Value > 0.0: Constant-acceleration velocity profile;
the specified jerk is used.
Value = 0.0: Trapezoid velocity profile
Value < 0.0: The jerk configured in "Technology object
> Configuration > Extended parameters > Dynamic
defaults" is used.
(<TO>.DynamicDefaults.Jerk)

PositionControlled

INPUT

BOOL

TRUE

FALSE Non position-controlled operation
TRUE

Position-controlled mode

The parameter applies as long as the "MC_MoveJog"
job is being executed. After this, the setting of the fo‐
llowing job applies.
This parameter is ignored when a speed axis is used.
InVelocity

OUTPUT

BOOL

FALSE

TRUE

The velocity setpoint / speed setpoint was
reached and will be maintained.

Busy

OUTPUT

BOOL

FALSE

TRUE

Job is running.

3466

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declaration

Data type

Default value

Description

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

The job was aborted by another job during
execution.

Error

OUTPUT

BOOL

FALSE

TRUE

An error occurred during execution of the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" parame‐
ter.

ErrorID

OUTPUT

WORD

16#0000

Error ID for parameter "ErrorID"

Behavior with velocity setpoint / speed setpoint zero ("Velocity" = 0.0)
An "MC_MoveJog" job with "Velocity" = 0.0 stops the axis with the configured deceleration.
When the velocity setpoint / speed setpoint zero is reached, the parameter "InVelocity" will
indicate the value TRUE.
Under "Technology object > Diagnostics > Status and error bits > Motion status", "constant
velocity" and "standstill" will be displayed (<TO>.StatusWord.X12 (ConstantVelocity);
<TO>.StatusWord.X7 (Standstill)).

Moving an axis in jog mode
Proceed as follows to move an axis in jog mode:
1. Check the requirements indicated above.
2. Move the axis in the positive direction with "JogForward", or in the negative direction with
"JogBackward".
The current motion state is indicated in "Busy", "InVelocity" and "Error".
Nota
Response to a change in the override
If the velocity / speed is influenced during constant motion by a change in the override
(<TO>.Override.Velocity), the "InVelocity" parameter is reset during the acceleration or
deceleration. When the newly calculated velocity is reached ("Velocity" × "Override" %), then
"InVelocity" is set again.

Additional information
An option for the evaluation of the individual status bits can be found in the Evaluating
StatusWord, ErrorWord and WarningWord section.

Consulte también
Override response of Motion Control commands V3 (Página 3526)

Programación del PLC
Manual de programación y manejo, 11/2019

3467

Instrucciones
4.1 Instrucciones

MC_MoveJog: Function chart V3
Function chart: Moving an axis in jog mode
$
0&B0RYH-RJ
72B

$[LV

,Q9HORFLW\

,Q9HO

%XV\

%XV\

-RJB)

-RJ)RUZDUG

-RJB%

-RJ%DFNZDUG &RPPDQG$ERUWHG

9HOB,QSXW

9HORFLW\



$FFHOHUDWLRQ



'HFHOHUDWLRQ

ದ

-HUN

(UURU

(UURU
(UURU,'

3RVLWLRQ&RQWUROOHG



$
-RJB)
-RJB%
,Q9HO
%XV\
(UURU
9HOB,QSXW








W




W




W




W




W




W


72B9HORFLW\




W

ದ

The axis is moved in the negative direction in jog mode via "Jog_B". When the velocity setpoint
-50.0 is reached, this is signaled via "InVel" = TRUE. After "Jog_B" is reset, the axis is braked
and brought to a standstill. Then the axis is moved in the positive direction via "Jog_F". When
the velocity setpoint 50.0 is reached, this is signaled via "InVel" = TRUE.
At the time ①, if "Jog_F" is set, the velocity setpoint is changed to 100.0 by means of
"Vel_Input". Alternatively, you can also change the velocity setpoint using the velocity override.
"InVel" is reset. Axis is being accelerated. When the new velocity setpoint 100.0 is reached, this
is signaled via "InVel" = TRUE.
If "Jog_F" is set, "Jog_B" is likewise set at time ②. If both "Jog_F" and "Jog_B" are set, then the
axis is braked with the last applicable deceleration. An error is indicated via "Error", and the
"ErrorID" of the error 16#8007 (incorrect direction specification) is output.
This error is resolved by resetting the two inputs "Jog_F" and "Jog_B".

3468

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
During the braking ramp, "Jog_F" is set at time ③. The axis is accelerated to the last configured
velocity. When the velocity setpoint 100.0 is reached, this is signaled via "InVel" = TRUE.

MC_MoveSuperimposed V3
MC_MoveSuperimposed: Superimposed positioning of axis V3
Description
With the Motion Control instruction "MC_MoveSuperimposed", you start a relative positioning
motion that is superimposed on a active basic motion.
You define the dynamic behavior of the motion with parameters "VelocityDiff", "Jerk",
"Acceleration" and "Deceleration" . The dynamic values are added to the values of the basic
motion. The duration of the basic motion is not extended by a superimposed motion.
The dynamics of the total axis motion is the sum of the dynamic values of the basic motion and
the superimposed motion.
The behavior of the total motion depends on the type of basic motion:
● The basic motion is a single-axis motion:
– The maximum dynamics of the superimposed motion is the difference between the
current dynamic values of the basic motion and the dynamic limits.
– The entire motion is limited to the configured dynamic limits.
● The basic motion is a synchronous motion:
– The maximum dynamics of the superimposed motion is the difference between the
current dynamic values of the basic motion and the dynamic limits.
– The synchronous motion of the following axis is not limited to the dynamic limits of the
following axis.
– An "MC_MoveSuperimposed" job on a leading axis in synchronous operation affects the
leading axis and the following axis.
– An "MC_MoveSuperimposed" job on a following axis in synchronous operation only
affects the following axis.
It is always the dynamics of the total motion that is displayed in the technology data block and
in the TIA Portal.

Applies to
● Synchronous axis
● Positioning axis

Requirements
● The technology object has been configured correctly.
● The technology object has been enabled.

Programación del PLC
Manual de programación y manejo, 11/2019

3469

Instrucciones
4.1 Instrucciones

Override response
The override characteristics for "MC_MoveSuperimposed" jobs are described in
section Override response of Motion Control commands V3 (Página 3526).

Parameters
The following table shows the parameters of Motion Control instruction
"MC_MoveSuperimposed":
Parameters

Declara‐
tion

Data type

Default value Description

Axis

INPUT

TO_PositioningAxis

-

Axis technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

Distance

INPUT

LREAL

0.0

Additional travel distance for the superimposing
positioning operation
(negative or positive)

VelocityDiff

INPUT

LREAL

-1.0

Maximum velocity deviation compared to the acti‐
ve motion
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The velocity configured in "Techno‐
logy object > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Velocity)

Acceleration

INPUT

LREAL

-1.0

Acceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The acceleration configured in "Tech‐
nology object > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The deceleration configured in "Tech‐
nology object > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk
Value > 0.0: Constant-acceleration velocity profile;
the specified jerk is used
Value = 0.0: Trapezoid velocity profile
Value < 0.0: The jerk configured in "Technology
object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Jerk)

Done

3470

OUTPUT BOOL

FALSE

TRUE

Superimposed positioning complete

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default value Description

Busy

OUTPUT BOOL

FALSE

TRUE

Job is running.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

Starting superimposed positioning motion
To start a superimposed positioning motion with Motion Control instruction
"MC_MoveSuperimposed", follow these steps:
1. Check the requirements indicated above.
2. Specify the additional distance to be moved in the "Distance" parameter.
3. Start the "MC_MoveSuperimposed" job with a positive edge at parameter "Execute".
The current motion state is indicated in "Busy", "Done" and "Error".

Consulte también
Override response of Motion Control commands V3 (Página 3526)

Programación del PLC
Manual de programación y manejo, 11/2019

3471

Instrucciones
4.1 Instrucciones

MC_MoveSuperimposed: Function chart V3
Function chart: Positioning axes overlapping

72B
([HB

$

$

0&B0RYH5HODWLYH

0&B0RYH6XSHULPSRVHG

$[LV

'RQH

'RQHB

72B

([HFXWH

%XV\

%XV\B

([HB



'LVWDQFH



9HORFLW\



$FFHOHUDWLRQ



'HFHOHUDWLRQ



&RPPDQG$ERUWHG

$ERUWB

'LVWB,QSXW

'RQH

'RQHB

([HFXWH

%XV\

%XV\B

'LVWDQFH

(UURU



9HORFLW\'LII

(UURU,'



$FFHOHUDWLRQ



'HFHOHUDWLRQ



-HUN



$

$[LV

&RPPDQG$ERUWHG
(UURU
(UURU,'

-HUN





([HB



W



%XV\B



W



'RQHB



W

$


([HB



W



%XV\B



W



'RQHB



W


'LVWB,QSXW



W

ದ

Y0&B0RYH5HODWLYH
Y0&B0RYH6XSHULPSRVHG
ದ

W



72B9HORFLW\


W

ದ

72B3RVLWLRQ

$

3472

%

W

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Section
$

Section
%

Using "Exe_1", an "MC_MoveRelative" job with a distance of 50.0 is initiated. At time ①, using "Exe_2", an
MC_MoveSuperimposed job with a distance of 50.0 is initiated. The axis is moved with the added dynamic values
of both jobs by the distance 50 + 50 = 100.0. When the axis reaches the target position, this is signaled via
"Done_2".

Using "Exe_1", an "MC_MoveRelative" job with a distance of 50.0 is initiated. At time ②, using "Exe_2", a
MC_MoveSuperimposed job with a distance of -50.0 is initiated. The axis reverses and is moved with the added
dynamic values of both jobs by the distance 50.0 - 50.0 = 0.0. When the axis reaches the target position, this is
signaled via "Done_2".

MC_SetSensor V3
MC_SetSensor: Set alternative encoder as operationally active encoder V3
Description
With the Motion Control instruction "MC_SetSensor", you switch over the encoder for closed
loop position control of the axis.
The actual value of the addressed encoder can be adapted without switchover using parameter
"Mode" 2 and 3.

Applies to
● Synchronous axis
● Positioning axis

Requirements
● The technology object and the alternative encoder have been configured correctly.
● No restart command and no MC-Home job running.

Override response
● An "MC_SetSensor" job is not aborted by any other Motion Control job.
● A new MC_SetSensor job does not abort any active Motion Control jobs.

Parameters
The following table shows the parameters of Motion Control instruction "MC_SetSensor":
Parameters

Declara‐
tion

Data type

Default
value

Description

Axis

INPUT

TO_Positionin‐
gAxis

-

Technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

Programación del PLC
Manual de programación y manejo, 11/2019

3473

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default
value

Description

Sensor

INPUT

INT

1

Number of the new encoder (1 to 4).

Mode

INPUT

DINT

0

The mode determines the position alignment between the old
encoder and new encoder.
0

Switch over encoder and transfer current position to
the new encoder
With this encoder switchover, step changes in the
positioning control are prevented. Bumpless swit‐
chover of the encoders is possible.

1

Switch over encoder without aligning the actual po‐
sition
Note:
When closed loop position control is active, an ad‐
ditional difference of the two encoders acts as ad‐
ditional control deviation and can trigger a compen‐
sating motion.

2

Transfer actual value
The current actual value is transferred to the enco‐
der specified in the "Sensor" parameter.

3

Transfer actual value
The actual position of the "Reference encoder"
("ReferenceSensor" parameter) is transferred to
the encoder specified in the "Sensor" parameter.

ReferenceSen‐
sor

INPUT

INT

1

Number of the reference encoder (see parameter "Mode" 3)

Done

OUTPUT

BOOL

FALSE

TRUE

Encoder for closed loop position control of the axis
was switched over.

Busy

OUTPUT

BOOL

FALSE

TRUE

Job is running.

CommandAbor‐
ted

OUTPUT

BOOL

FALSE

TRUE

The job has been aborted.

Error

OUTPUT

BOOL

FALSE

TRUE

An error occurred during execution of the job. The
job is rejected. The cause of the error can be found
in the "ErrorID" parameter.

ErrorID

OUTPUT

WORD

16#0000

Error ID for parameter "ErrorID"

Changing to absolute encoder
When you switch the encoder to an absolute encoder and transfer the actual value (Mode = 2,
3), the actual value is calculated with the value of the absolute encoder and the absolute value
offset. When switching to a different encoder, calculation of the actual value is canceled. The
absolute encoder once again returns the absolute value + absolute value offset
(<TO>.StatusSensor[n].AbsEncoderOffset) without calculation by the MC_SetSensor.

3474

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Measuring input, output cam, cam track
MC_MeasuringInput V3
MC_MeasuringInput: Start measuring once V3
With the Motion Control instruction "MC_MeasuringInput", a one-time measuring is started.
With the one-time measuring, one or two edges can be detected with one measuring job. The
position of the respective technology object axis or external encoder is assigned to the
measuring event. The measurement result is indicated in the function block and in the
technology data block and can be further processed in the user program. This completes the
measuring job.
Another measuring job must be started again using "MC_MeasuringInput.Execute" = TRUE.

Applies to
● Measuring input

Requirements
● The technology object has been configured correctly.
● The encoder of the axis must have "valid" status (StatusSensor[1..4].State = valid).
Otherwise, the measuring job is rejected in the function block with an error indication.
● Measuring using PROFIdrive is not possible during active or passive homing.

Override response
The override characteristics for "MC_MeasuringInput" jobs are described in section Override
response of Motion Control commands V3 (Página 3526).

Parameters
The following table shows the parameters of Motion Control instruction "MC_MeasuringInput":
Parameters

Declaration

Data type

Default value

Description

MeasuringInput

INPUT

TO_Measuring‐
Input

-

Technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

Programación del PLC
Manual de programación y manejo, 11/2019

3475

Instrucciones
4.1 Instrucciones
Parameters

Declaration

Data type

Default value

Description

Mode

INPUT

DINT

0

Type of measurement
0

Measurement of next positive edge

1

Measurement of next negative edge

2

Measurement of next two edges

3

Measurement of two edges, beginning with
the positive edge
● Positive edge = "MeasuredValue1"
(measured value 1)
● Negative edge = "MeasuredValue2"
(measured value 2)

4

Measurement of two edges, beginning with
the negative edge
● Negative edge = "MeasuredValue1"
● Positive edge = "MeasuredValue2"

MeasuringRange

INPUT

BOOL

FALSE

Acquisition of measured values
Observe the time-related boundary conditions.
FALSE Always acquire measured values
TRUE

StartPosition

INPUT

LREAL

0.0

Acquire measured values only within the
measuring range

Start position of the measuring range
For an axis or external encoder with active modulo
function, position data outside the modulo range is
mirrored in the modulo range.

EndPosition

INPUT

LREAL

0.0

End position of the measuring range
For an axis or external encoder with active modulo
function, position data outside the modulo range is
mirrored in the modulo range.

Done

OUTPUT

BOOL

FALSE

TRUE

The block has been completely processed.
Measured values are valid.

Busy

OUTPUT

BOOL

FALSE

TRUE

Job is running.

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

The measuring job has been aborted.

Error

OUTPUT

BOOL

FALSE

TRUE

An error occurred while processing the job.
The cause of the error can be found in the
"ErrorID" parameter.

ErrorID

OUTPUT

WORD

16#0000

Error ID for parameter "ErrorID"

MeasuredValue1

OUTPUT

LREAL

0.0

First measured value

MeasuredValue2

OUTPUT

LREAL

0.0

Second measured value (for measurement of two ed‐
ges)

Consulte también
Override response of Motion Control commands V3 (Página 3526)

3476

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_MeasuringInput: Function chart V3
Function chart: Start measuring job once
$
0&B0HDVXULQJLQSXW
72B
([HB

0HDVXULQJLQSXW

'RQH

([HFXWH

%XV\



0RGH



0HDVXULQJ5DQJH

&RPPDQG$ERUWHG
(UURU
(UURU,'

6WDUW3RVLWLRQ
(QG3RVLWLRQ

0HDVXUHG9DOXH
0HDVXUHG9DOXH

$
([HB
%XV\

'RQH

0HDVXUHG9DOXH

0HDVXULQJLQSXW

72B[3RVLWLRQ




W




W




W




W




W





W

A "MC_MeasuringInput" job with "Mode" = 0 initiated using "Execute" performs a measurement
of the next positive edge. A successfully completed measurement is signaled with "Done" =
TRUE. The determined measured value ① (in example: 50) is output using "MeasuredValue1".

MC_MeasuringInputCyclic V3
MC_MeasuringInputCyclic: Start cyclic measuring V3
With the Motion Control instruction "MC_MeasuringInputCyclic", a cyclic measuring is started.
With cyclic measuring, up to two measuring events are detected by the system and the
associated measuring positions displayed. The measurements are continued cyclically until
they are ended per command.

Programación del PLC
Manual de programación y manejo, 11/2019

3477

Instrucciones
4.1 Instrucciones

Applies to
● Measuring input

Requirements
● The technology object has been configured correctly.
● Cyclic measuring is only possible when measuring using TM Timer DIDQ.
● The operationally active encoder of the axis must have "valid" status
(StatusSensor[1..4].State = valid). Otherwise, the measuring job is rejected in the function
block with an error indication.

Override response
The override characteristics for "MC_MeasuringInputCyclic" jobs are described in
section Override response of Motion Control commands V3 (Página 3526).

Parameters
The following table shows the parameters of Motion Control instruction
"MC_MeasuringInputCyclic":
Parameters

Declaration

Data type

Default value

Description

MeasuringInput

INPUT

TO_Measuring‐
Input

-

Technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

Mode

INPUT

DINT

0

Type of measurement

MeasuringRange

INPUT

BOOL

FALSE

0

Measurement of positive edges

1

Measurement of negative edges

2

Measurement of both edges

Acquisition of measured values
Observe the time-related boundary conditions.
FALSE Always acquire measured values
TRUE

StartPosition

INPUT

LREAL

0.0

Acquire measured values only within the
measuring range

Start position of the measuring range
For an axis or external encoder with active modulo
function, position data outside the modulo range is
mirrored in the modulo range.

EndPosition

INPUT

LREAL

0.0

End position of the measuring range
For an axis or external encoder with active modulo
function, position data outside the modulo range is
mirrored in the modulo range.

Busy

OUTPUT

BOOL

FALSE

TRUE

Job is running.

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

The measuring job has been aborted.

3478

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declaration

Data type

Default value

Description

Error

OUTPUT

BOOL

FALSE

TRUE

16#0000

An error occurred while processing the job.
The cause of the error can be found in the
"ErrorID" parameter.

ErrorID

OUTPUT

WORD

MeasuredValue1

OUTPUT

LREAL

First measured value

Error ID for parameter "ErrorID"

MeasuredValue2

OUTPUT

LREAL

Second measured value (when measuring multiple
edges in one position control cycle)

MeasuredVa‐
lue1Counter

OUTPUT

UDINT

0

Count value for the first measured value

MeasuredVa‐
lue2Counter

OUTPUT

UDINT

0

Count value for the second measured value

LostEdgeCounter1 OUTPUT

UDINT

0

Count value for the lost edges in the cycle clock of the
first measured value acquisition

LostEdgeCounter2 OUTPUT

UDINT

0

Count value for the lost edges in the cycle clock of the
second measured value acquisition

Consulte también
Override response of Motion Control commands V3 (Página 3526)

Programación del PLC
Manual de programación y manejo, 11/2019

3479

Instrucciones
4.1 Instrucciones

MC_MeasuringInputCyclic: Function chart V3
Function chart: Start cyclic measuring job

3480

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
$
0&B0HDVXULQJ,QSXW&\FOLF
72B
([HB



0HDVXULQJ,QSXW
([HFXWH

%XV\

&RPPDQG$ERUWHG

0RGH

(UURU

0HDVXULQJ5DQJH

(UURU,'

6WDUW3RVLWLRQ

0HDVXUHG9DOXH

(QG3RVLWLRQ

0HDVXUHG9DOXH

0HDVXUHG9DOXH&RXQWHU
0HDVXUHG9DOXH&RXQWHU
/RVW(JGH&RXQWHU
/RVW(GJH&RXQWHU



$SSOLFDWLRQ
F\FOH
0HDVXULQJ
LQSXW





Q













W


72B[3RVLWLRQ






$
&DOORI
0&B0HDVXULQJ
,QSXW&\FOLF





0HDVXUHG
9DOXH







0HDVXUHG
9DOXH&RXQWHU

W




0HDVXUHG
9DOXH

W

W
W





0HDVXUHG
9DOXH&RXQWHU



/RVW(GJH
&RXQWHU



/RVW(GJH
&RXQWHU







W
W
W
W

A "MC_MeasuringInputCyclic" command initiated using "Execute" (signal and start point not
shown) (e.g. call in MC-PreServo [OB67]) with "Mode" = 0 and without specified measuring
range "MeasuringRange" = FALSE performs a measurement of the positive edges. By calling

Programación del PLC
Manual de programación y manejo, 11/2019

3481

Instrucciones
4.1 Instrucciones
the Motion Control instruction "MC_MeasuringInputCyclic" in MC-PreServo [OB67] or MCPreServo [OB67], the measuring command as well as the measurement itself is called in the
same application cycle.
The actual position determined at the time of the first positive edge ① in the position control
cycle is output using "MeasuredValue1", and count tag "MeasuredValue1Counter" is
incremented by "1".
The actual position determined at the time of the second positive edge ② in the position control
cycle is output using "MeasuredValue2", and count tag "MeasuredValue2Counter" is
incremented by "1".
If additional positive edges occur in the same position control cycle ③, these are recorded in
LostEdgeCounter1 and LostEdgeCounter2.

MC_AbortMeasuringInput V3
MC_AbortMeasuringInput: Cancel active measuring job V3
With the Motion Control instruction "MC_AbortMeasuringInput", an active one-time or cyclic
measuring job is aborted.

Applies to
● Measuring input

Requirements
● The technology object has been configured correctly.

Override response
The override characteristics for "MC_AbortMeasuringInput" jobs are described in
section Override response of Motion Control commands V3 (Página 3526).

Parameters
The following table shows the parameters of Motion Control instruction
"MC_AbortMeasuringInput":
Parameters

Declaration

Data type

Default value

Description

MeasuringInput

INPUT

TO_Measuring‐
Input

-

Technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

Done

OUTPUT

BOOL

0

The function block has been processed. The measu‐
ring job has been deactivated.

Busy

OUTPUT

BOOL

FALSE

TRUE

Job is running.

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

The job has been aborted.

3482

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declaration

Data type

Default value

Description

Error

OUTPUT

BOOL

FALSE

TRUE

ErrorID

OUTPUT

WORD

16#0000

Error ID for parameter "ErrorID"

An error occurred while processing the job.
The cause of the error can be found in the
"ErrorID" parameter.

Consulte también
Override response of Motion Control commands V3 (Página 3526)

MC_OutputCam V3
MC_OutputCam: Activate/deactivate cam V3
Description
You use Motion Control instruction "MC_OutputCam" to activate the specified cam.
Depending on the cam type, the following input parameters are in effect:
● Distance output cam
– "OnPosition"
– "OffPosition"
● Time-based output cam
– "OnPosition"
– "Duration"
You define the operating mode and the effective direction of the cam with parameters "Mode"
and "Direction".
When "MC_OutputCam.Enable" = TRUE, the input parameters are always read and take effect
at the next position control cycle.
When a technological alarm occurs, the cam is processed again after error acknowledgment.

Applies to
● Output cam

Requirements
● The technology object has been configured correctly.
● The higher-level technology object must have a valid position.
● Setpoint output cams are not output for an axis in non-position-controlled operation.
● A setpoint output cam with the setting "MC_OutputCam.OnPosition" = 0 switches at position
setpoint = 0.

Programación del PLC
Manual de programación y manejo, 11/2019

3483

Instrucciones
4.1 Instrucciones

Override response
The "MC_OutputCam" is canceled by:
● Disabling of the cam with "MC_OutputCam.Enable" = FALSE
● Only one instance of the "MC_OutputCam" function block can be active on an output cam
in the user program. A second instance of the "MC_OutputCam" function block on a
currently active output cam is rejected with an error.

Parameters
The following table shows the parameters of Motion Control instruction "MC_OutputCam":
Parameters

Declaration

Data type

Default value

Description

OutputCam

INPUT

TO_OutputCam

-

Technology object

Enable

INPUT

BOOL

FALSE

FALSE Cam is disabled
TRUE

OnPosition

INPUT

LREAL

0.0

Cam is being processed

Start position of the cam [unit of measurement of the
interconnected technology object]
For an axis or external encoder with active modulo
function, position data outside the modulo range is
mirrored in the modulo range.

OffPosition

INPUT

LREAL

0.0

End position of the distance output cam [unit of mea‐
surement of the interconnected technology object]
For an axis or external encoder with active modulo
function, position data outside the modulo range is
mirrored in the modulo range.

Duration

INPUT

LREAL

0.0

Switch-on duration of the time-based output cam [unit
of measurement: ms]
The value for the switch-on duration of a time-based
output cam must be greater than 0.0.

Mode

INPUT

DINT

1

Operating mode
1

Standard
Cam functionality (output not inverted)

2

Cam functionality with inverted output

3

Cam always ON
(while "Enable" = TRUE)

Direction

INPUT

DINT

1

Activation direction of the cam
1

Positive direction

2

Negative direction

3

Both directions

CamOutput

OUTPUT

BOOL

-

Status display based on last call of Motion Control
instruction "MC_OutputCam"

Busy

OUTPUT

BOOL

FALSE

TRUE

Processing of the cam is active.

Error

OUTPUT

BOOL

FALSE

TRUE

An error occurred while processing the job.
The cause of the error can be found in the
"ErrorID" parameter.

ErrorID

OUTPUT

WORD

16#0000

Error ID for parameter "ErrorID"

3484

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_OutputCam: Function chart V3
Function chart: Activate the specified cam type
$

$

0&B2XWSXW&DP

0&B2XWSXW&DP

72B

2XWSXW&DP

(QB

(QDEOH

72B

2XWSXW&DP

%XV\

(QB

(QDEOH



&DP2XWSXW



2Q3RVLWLRQ

(UURU



2II3RVLWLRQ

(UURU,G

&DP2XW



'XUDWLRQ

(UURU

2II3RVLWLRQ

(UURU,G

'XUDWLRQ

0RGH



0RGH



'LUHFWLRQ



'LUHFWLRQ



(QB
%XV\
&DP2XW





&DP2XW

%XV\

2Q3RVLWLRQ



$

&DP2XWSXW














W

$
(QB
%XV\
&DP2XW








W

2II3RVLWLRQ
2Q3RVLWLRQ
72B[3RVLWLRQ
W

A1

Distance output cam

A2

Time-based output cam

A cam is activated with "Enable" = TRUE. The cam is output corresponding to the parameters.
The processing of the cam is indicated with "Busy" = TRUE.

Programación del PLC
Manual de programación y manejo, 11/2019

3485

Instrucciones
4.1 Instrucciones
When activation direction "Direction" = 1 (positive) is set, the cam behaves as follows,
regardless of the cam type setting:
● The distance output cam switches on at "OnPosition" ① and switches off again at
"OffPosition" ②. At a direction reversal the cam is switched off ④.
● The time-based output cam switches on at "OnPosition" ① and switches off again after
expiration of the specified time "Duration" ③. A switched on time-based output cam
remains active for the specified switch-on duration "Duration", even if overtravel of the start
position occurs again in the reverse direction.
The switching state of the cam is output using "CamOutput".
With "Enable" = FALSE, the specified cam type is deactivated. "Busy" = FALSE shows that the
cam is not being processed.

MC_CamTrack V3
MC_CamTrack: Activate/deactivate cam track V3
Description
With the Motion Control instruction "MC_CamTrack", the processing of a cam track is enabled.

Applies to
● Cam track

Requirements
● The technology object has been configured correctly.
● The higher-level technology object must have a valid position.
● Setpoint output cams are not output for an axis in non-position-controlled operation.

Override response
● The "MC_CamTrack" is aborted by the disabling of the cam track with
"MC_CamTrack.Enable" = FALSE.
● Only one instance of the "MC_CamTrack" function block can be active on a cam track in the
user program. A second instance of the "MC_CamTrack" function block on a currently active
cam track is rejected with an error.
● The cam track is recalculated at a change of the parameters of the Motion Control
instruction "MC_CamTrack" or in the technology data block. The cam track is processed in
accordance with all parameter settings.

3486

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction "MC_OutputCam":
Parameters

Declaration

Data type

Default value

Description

CamTrack

INPUT

TO_CamTrack

-

Technology object

Enable

INPUT

BOOL

FALSE

FALSE Cam track is disabled

Mode

INPUT

INT

1

TRUE

Cam track is processed

0

"Enable" =
TRUE

Cam track processing is
activated immediately
Cam track data takes ef‐
fect immediately
Previously activated dis‐
tance output cams are
aborted if their track signal
is not still set due to the
changed cam track data.
Previously activated timebased output cams are al‐
ways aborted.

"Enable" = FAL‐ Cam track processing is
SE
stopped immediately, dis‐
tance output/time-based
output cams are aborted
immediately.
1

"Enable" =
TRUE

Cam track processing is
activated immediately/
with the next track cycle:
● When a cam track is
activated for the first
time, the cam track
processing begins
immediately.
● If the cam track
processing is already
active, the current
cam track is output up
to the end of the track
cycle. The new cam
track data then takes
effect.

"Enable" = FAL‐ Cam track processing is
SE
ended at the end of the
cam track
2

"Enable" =
TRUE

Cam track output is swit‐
ched on immediately and
remains switched on

"Enable" = FAL‐ Cam track output is swit‐
SE
ched off immediately

Programación del PLC
Manual de programación y manejo, 11/2019

3487

Instrucciones
4.1 Instrucciones
Parameters

Declaration

Data type

Default value

Description

InvertOutput

INPUT

BOOL

FALSE

Inverted output
TRUE

Track output is output inverted

FALSE Track output is output not inverted
TrackOutput

OUTPUT

BOOL

-

Indicates the switching state of the cam track.

Busy

OUTPUT

BOOL

FALSE

TRUE

Processing of the cam track is active.

Error

OUTPUT

BOOL

FALSE

TRUE

An error occurred while processing the job.
The cause of the error can be found in the
"ErrorID" parameter.

ErrorID

OUTPUT

WORD

16#0000

Error ID for parameter "ErrorID"

MC_CamTrack: Function chart V3
Function chart: Activate cam track
$
0&B&DP7UDFN
&DP7UDFN

(QB

(QDEOH

%XV\



0RGH

(UURU



,QYHUW2XWSXW

(QB
7UDFN2XWSXW

(UURU,'





$

①
②
③

7UDFN2XWSXW

72B



























      

$[LVSRVLWLRQ>r@

Axis reference position
Cam configured as invalid
Start of cyclically continued cam track

A cam track is activated with "Enable" = TRUE. The cam track is output in accordance with the
parameters set in the technology data block.
Tag

Value

Description

CamTrackType

0

Specified cam type for the cam track is distance output cam

ReferencePosition

20.0

Specified axis reference position for the cam track

CamTrackLength

100.0

Specified length of the cam track

CamTrack[1].Existent

TRUE

The first distance output cam of the cam track is specified as valid

CamTrack[1].OnPosition

10.0

Start position for the first cam of the cam track

CamTrack[1].OffPosition

20.0

End position for the first cam of the cam track

CamTrack[2].Existent

FALSE

The second distance output cam of the cam track is specified as invalid

CamTrack[2].OnPosition

30.0

Start position for the second cam of the cam track

<TO>Parameter.

3488

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Tag

Value

Description

CamTrack[2].OffPosition

50.0

End position for the second cam of the cam track

CamTrack[3].Existent

TRUE

The third distance output cam of the cam track is specified as valid

CamTrack[3].OnPosition

60.0

Start position for the third cam of the cam track

CamTrack[3].OffPosition

90.0

End position for the third cam of the cam track

Synchronous motion
MC_GearIn V3
MC_GearIn: Start gear synchronization V3
Description
With the Motion Control instruction "MC_GearIn", you start a gearing operation between a
leading axis and a following axis.
You define the dynamic behavior of the following axis for synchronization with parameters
"Jerk", "Acceleration" and "Deceleration".
The synchronization duration and distance are dependent on the following parameters:
● Start time of the "MC_GearIn" job
● Dynamics of the following axis at the start time
● Dynamic settings for synchronization
● Dynamics of the leading axis
You specify the gear ratio as the relationship between two integers (numerator/denominator)
with the parameters "RatioNumerator" and "RatioDenominator".
The numerator of the gear ratio is specified as positive or negative. This yields the following
behavior:
● Positive gear ratio:
The leading and following axes move in the same direction.
● Negative gear ratio:
The following axis moves in the opposite direction of the leading axis.
You can start synchronous operation when the leading axis is at a standstill or when it is in
motion.

Applies to
● Synchronous axis

Programación del PLC
Manual de programación y manejo, 11/2019

3489

Instrucciones
4.1 Instrucciones

Requirement
● The technology objects of the leading axis and the following axis have been configured
correctly.
● The leading axis is a positioning axis, synchronous axis, or external encoder.
● The following axis is a synchronous axis.
● The leading axis is specified as possible leading axis in the configuration of the following
axis in "Technology object > Configuration > Leading value interconnections".
● The following axis is enabled.

Override response
The override response for "MC_GearIn" jobs are described in section Override response of
Motion Control commands V3 (Página 3526).
Disabling the leading axis with "MC_Power.Enable" = FALSE does not abort synchronous
operation. The following axis follows the leading axis even during the braking ramp and after
the leading axis is enabled again.

Parameters
The following table shows the parameters of Motion Control instruction "MC_GearIn":
Parameters

Declara‐
tion

Data type

Default value Description

Master

INPUT

TO_Axis

-

Slave

INPUT

TO_SynchronousAxis

-

Following axis technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

RatioNumerator

INPUT

DINT

1

Gear ratio numerator

Leading axis technology object

Permitted integer values:
-2147483648 to 2147483647
(value 0 not permitted)
RatioDenominator

INPUT

DINT

1

Gear ratio denominator
Permitted integer values:
1 to 2147483647

Acceleration

INPUT

LREAL

-1.0

Acceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The acceleration configured in "Tech‐
nology object > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

3490

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default value Description

Deceleration

INPUT

LREAL

-1.0

Deceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The deceleration configured in "Tech‐
nology object > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk
Value > 0.0: Constant-acceleration velocity profile;
the specified jerk is used
Value = 0.0: Trapezoid velocity profile
Value < 0.0: The jerk configured in "Technology
object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Jerk)

InGear

OUTPUT BOOL

FALSE

TRUE

Synchronous operation reached
The following axis is synchronized and
moves synchronously to the leading
axis.

Busy

OUTPUT BOOL

FALSE

TRUE

Job is running.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

Starting synchronous operation
To start synchronous operation with the Motion Control instruction "MC_GearIn", follow these
steps:
1. Check the requirements indicated above.
2. Specify the leading axis, the following axis and the gear ratio at the corresponding
parameters.
3. Start the "MC_GearIn" job with a positive edge at parameter "Execute".
The following axis is synchronized to the leading value of the leading axis. If the "InGear"
parameter shows the value TRUE, the following axis is synchronized and moves
synchronously to the leading axis. The parameters "InGear" and "Busy" show the value TRUE
until the "MC_GearIn" job is overridden by another Motion Control job.

Consulte también
Override response of Motion Control commands V3 (Página 3526)

Programación del PLC
Manual de programación y manejo, 11/2019

3491

Instrucciones
4.1 Instrucciones

MC_GearIn: Function chart V3
Function chart: Synchronizing and switching the leading value
$

$

0&B*HDU,Q
72B0DVWHUB
72B6ODYH
([HB

0DVWHU

,Q*HDU

6ODYH
([HFXWH

0&B*HDU,Q
%XV\

&RPPDQG$ERUWHG



5DWLR1XPHUDWRU



5DWLR'HQRPLQDWRU

,Q*HDUB
%XV\B

72B0DVWHUB
72B6ODYH

$ERUWB

([HB

0DVWHU
([HFXWH



5DWLR1XPHUDWRU



5DWLR'HQRPLQDWRU

$FFHOHUDWLRQ



$FFHOHUDWLRQ

'HFHOHUDWLRQ



'HFHOHUDWLRQ

([HB
%XV\B
,Q*HDUB
$ERUWB

ದ

-HUN





,Q*HDUB
%XV\B

&RPPDQG$ERUWHG

(UURU



$

%XV\

(UURU,'


ದ

,Q*HDU

6ODYH

(UURU
(UURU,'

-HUN






W




W




W




W

$
([HB
%XV\B
,Q*HDUB




W




W




W

72B0DVWHUB
9HORFLW\
72B6ODYH
9HORFLW\
72B0DVWHUB
9HORFLW\
W

Using "Exe_1", an "MC_GearIn" job (A1) is initiated. The following axis (TO_Slave) is
synchronized to the leading axis (TO_Master_1). "InGear_1" signals at time ① that the
following axis is synchronized and moves synchronously to the leading axis.
At time ②, synchronous operation is overridden by another "MC_GearIn" job (A2). The abort
is signaled via "Abort_1". The following axis is synchronized to the new leading axis
(TO_Master_2). "InGear_2" signals at time ③ that the following axis is synchronized and
moves synchronously to the leading axis.

3492

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_GearInPos V3
MC_GearInPos: Start gearing with specified synchronous positions V3
Description
With the Motion Control instruction "MC_GearInPos", you start a gearing operation between a
leading axis and a following axis.
The synchronous operation is synchronized in advance of the specified synchronous position
for the leading and following axis. The following types of synchronization are possible:
● Synchronization using dynamic parameters
(SyncProfileReference = 0)
● Synchronization using leading value distance
(SyncProfileReference = 1)
You specify the gear ratio as the relationship between two integers (numerator/denominator)
with the parameters "RatioNumerator" and "RatioDenominator".
The numerator of the gear ratio is specified as positive or negative. This yields the following
behavior:
● Positive gear ratio:
The leading and following axes move in the same direction.
● Negative gear ratio:
The following axis moves in the opposite direction of the leading axis.
You can start synchronous operation when the leading axis is at a standstill or when it is in
motion.

Applies to
● Synchronous axis

Requirement
● The technology objects of the leading axis and the following axis have been configured
correctly.
● The leading axis is a positioning axis, synchronous axis, or external encoder.
● The following axis is a synchronous axis.
● The leading axis is specified as possible leading axis in the configuration of the following
axis in "Technology object > Configuration > Leading value interconnections".
● The following axis is enabled.

Override response
The override response for "MC_GearInPos" jobs are described in section Override response of
Motion Control commands V3 (Página 3526).

Programación del PLC
Manual de programación y manejo, 11/2019

3493

Instrucciones
4.1 Instrucciones
Disabling the leading axis with "MC_Power.Enable" = FALSE does not abort synchronous
operation. The following axis follows the leading axis even during the braking ramp and after
the leading axis is enabled again.

Parameters
The following table shows the parameters of Motion Control instruction "MC_GearInPos":
Parameters

Declara‐
tion

Data type

Default value Description

Master

INPUT

TO_Axis

-

Leading axis technology object

Slave

INPUT

TO_SynchronousAxis

-

Following axis technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

RatioNumerator

INPUT

DINT

1

Gear ratio numerator
Permitted integer values:
-2147483648 to 2147483647
(value 0 not permitted)

RatioDenominator

INPUT

DINT

1

Gear ratio denominator
Permitted integer values:
1 to 2147483647

MasterSyncPosi‐
tion

INPUT

SlaveSyncPosition

INPUT

LREAL

0.0

Synchronous position of leading axis
Position of the leading axis starting from which the
leading and following axes move synchronously

LREAL

0.0

Synchronous position of following axis
Position of the following axis starting from which
the leading and following axes move synchro‐
nously

SyncProfileRefe‐
rence

INPUT

DINT

1

Type of synchronization
0

Synchronization using dynamic parame‐
ters

1

Synchronization using leading value dis‐
tance

MasterStartDistan‐
ce

INPUT

LREAL

1.0

Leading value distance

Velocity

INPUT

LREAL

-1.0

Velocity

(when "SyncProfileReference" = 1)
(when "SyncProfileReference" = 0)
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The velocity configured in "Techno‐
logy object > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Velocity)

3494

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default value Description

Acceleration

INPUT

LREAL

-1.0

Acceleration
(when "SyncProfileReference" = 0)
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The acceleration configured in "Tech‐
nology object > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
(when "SyncProfileReference" = 0)
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The deceleration configured in "Tech‐
nology object > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk
(when "SyncProfileReference" = 0)
Value > 0.0: Constant-acceleration velocity profile;
the specified jerk is used
Value = 0.0: Trapezoid velocity profile
Value < 0.0: The jerk configured in "Technology
object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Jerk)

SyncDirection

INPUT

DINT

3

Direction of synchronization
(in effect for axes with activated Modulo setting)
1

Positive direction
The following axis may only travel in po‐
sitive direction during synchronization.

2

Negative direction
The following axis may only travel in ne‐
gative direction during synchronization.

3

Shortest distance
Changes in direction are permitted for
the following axis during synchroniza‐
tion.

StartSync

OUTPUT BOOL

FALSE

TRUE

The following axis is synchronized to the
leading axis.

InSync

OUTPUT BOOL

FALSE

TRUE

Synchronous operation reached
The following axis is synchronized and
moves synchronously to the leading
axis.

Busy

OUTPUT BOOL

FALSE

TRUE

Job is running.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Programación del PLC
Manual de programación y manejo, 11/2019

3495

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default value Description

Error

OUTPUT BOOL

FALSE

TRUE

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

Starting synchronous operation
To start synchronous operation with the Motion Control instruction "MC_GearInPos", follow
these steps:
1. Check the requirements indicated above.
2. Specify the leading axis, the following axis, the gear ratio and the synchronous position with
the corresponding parameters.
3. Start the "MC_GearInPos" job with a positive edge at parameter "Execute".
The following axis is synchronized to the leading value of the leading axis. If the "InSync"
parameter shows the value TRUE, the following axis is synchronized and moves
synchronously to the leading axis. The parameters "InSync" and "Busy" show the value TRUE
until the "MC_GearInPos" job is overridden by another Motion Control job.

Consulte también
Override response of Motion Control commands V3 (Página 3526)

3496

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_GearInPos: Function chart V3
Function chart: Synchronization using dynamic parameters/leading value distance
$
0&B*HDU,Q3RV
72B0DVWHU
72B6ODYH
([H

0DVWHU

6WDUW6\QF

6ODYH

,Q6\QF

([HFXWH

%XV\



5DWLR1XPHUDWRU &RPPDQG$ERUWHG



5DWLR'HQRPLQDWRU



0DVWHU6\QF3RVLWLRQ



6ODYH6\QF3RVLWLRQ
6\QF3URILOH5HIHUHQFH
0DVWHU6WDUW'LVWDQFH
9HORFLW\
$FFHOHUDWLRQ

ದ

'HFHOHUDWLRQ

ದ

-HUN



%XV\

(UURU


ದ

,Q6\QF

(UURU,'

635
ದ

6WDUW6\QF

6\QF'LUHFWLRQ

$
([H
%XV\
635
6WDUW6\QF
,Q6\QF




W




W




W




W




W



72B0DVWHU
3RVLWLRQ 



W

72B6ODYH
3RVLWLRQ 


W

72B0DVWHU
9HORFLW\


W

72B6ODYH
9HORFLW\

$

Programación del PLC
Manual de programación y manejo, 11/2019

%

W

3497

Instrucciones
4.1 Instrucciones

Section
$

Section
%

Using "Exe", an "MC_GearInPos" job (A1) is initiated. The following axis (TO_Slave) is synchronized to the leading
axis (TO_Master) by means of the specified dynamic parameters. The distance required for synchronization is
calculated by the system. The start of the synchronization is displayed with StartSync. When the specified
synchronous position is reached, "InSync" signals that the following axis is synchronized and moving synchro‐
nously to the leading axis.
Using "Exe", an "MC_GearInPos" job (A1) is initiated. The following axis (TO_Slave) is synchronized to the leading
axis (TO_Master) by means of the specified leading value distance. The dynamics required for synchronization is
calculated by the system. The start of the synchronization is displayed with StartSync. "InSync" signals that the
following axis is synchronized and moving synchronously to the leading axis.

MC_PhasingAbsolute V3
MC_PhasingAbsolute: Absolute shift of leading value on the following axis V3
Description
With the Motion Control instruction "MC_PhasingAbsolute", you shift the leading value on a
following axis during gearing with "MC_GearIn" and "MC_GearInPos" as an absolute shift. The
position of the leading axis is not affected by this.
You define the dynamic response of the motion of the following axis with the parameters
"Velocity", "Jerk", "Acceleration", and "Deceleration". The dynamic values are added to the
values of the synchronous operation motion.

Applies to
● Synchronous axis

Requirements
● The technology objects of the leading axis and the following axis have been configured
correctly.
● The leading axis is a positioning axis, synchronous axis, or external encoder.
● The following axis is a synchronous axis.
● The leading axis is specified as possible leading axis in the configuration of the following
axis in "Technology object > Configuration > Leading value interconnections".
● The following axis is synchronized to the leading axis ("MC_GearIn.InGear" = TRUE or
"MC_GearInPos.InSync" = TRUE) by means of the Motion Control instruction "MC_GearIn"
or "MC_GearInPos".
● The following axis is enabled.

Override response
The override characteristics for "MC_PhasingAbsolute" jobs are described in section Override
response of Motion Control commands V3 (Página 3526).

3498

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Disabling the leading axis with "MC_Power.Enable" = FALSE does not abort the leading value
shift. The following axis follows the leading axis even during the braking ramp and after the
leading axis is enabled again.

Parameters
The following table shows the parameters of Motion Control instruction "MC_PhasingAbsolute":
Parameters

Declara‐
tion

Data type

Default value Description

Master

INPUT

TO_Axis

-

Leading axis technology object

Slave

INPUT

TO_SynchronousAxis

-

Following axis technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

PhaseShift

INPUT

LREAL

0.0

Absolute leading value shift

Velocity

INPUT

LREAL

-1.0

Velocity of the following axis for leading value shift
(added to synchronous operation motion)
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The velocity configured in "Techno‐
logy object > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Velocity)

Acceleration

INPUT

LREAL

-1.0

Acceleration of the following axis for leading value
shift (added to synchronous operation motion)
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The acceleration configured in "Tech‐
nology object > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration of the following axis for leading value
shift (added to synchronous operation motion)
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The deceleration configured in "Tech‐
nology object > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk of the following axis for leading value shift
(added to synchronous operation motion)
Value > 0.0: Constant-acceleration velocity profile;
the specified jerk is used
Value = 0.0: Trapezoid velocity profile
Value < 0.0: The jerk configured in "Technology
object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Jerk)

Done

OUTPUT BOOL

Programación del PLC
Manual de programación y manejo, 11/2019

FALSE

TRUE

Leading value shift is finished.

3499

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Busy

OUTPUT BOOL

FALSE

TRUE

Job is running.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

0.0

As long as "Busy" = TRUE:

AbsolutePhaseShift OUTPUT LREAL

Default value Description

Display of leading value shift completed up to now

Start absolute leading value shift
To start an absolute leading value shift with the Motion Control instruction
"MC_PhasingAbsolute", follow these steps:
1. Check the requirements indicated above.
2. Specify the absolute leading value shift in the "PhaseShift" parameter.
3. Start the "MC_PhasingAbsolute" job with a positive edge at parameter "Execute".
The current motion state is indicated in parameters "Busy", "AbsolutePhaseShift", "Done" and
"Error".

Consulte también
Override response of Motion Control commands V3 (Página 3526)
MC_GearInPos V3 (Página 3493)
MC_GearIn V3 (Página 3489)

3500

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_PhasingAbsolute: Function chart V3
Function chart: Absolute shift of leading value
$

$

0&B*HDU,Q3RV
72B0DVWHU
72B6ODYH

0DVWHU
6ODYH
([HFXWH

0&B3KDVLQJ$EVROXWH

6WDUW6\QF
,Q6\QF
%XV\

72B0DVWHU
,Q6\QF

72B6ODYH

0DVWHU

'RQH

'RQH

6ODYH

%XV\

%XV\

([H

([HFXWH
3KDVH6KLIW



5DWLR1XPHUDWRU &RPPDQG$ERUWHG





5DWLR'HQRPLQDWRU

(UURU



(UURU,'

9HORFLW\

ದ

$FFHOHUDWLRQ

ದ

$FFHOHUDWLRQ

ದ

'HFHOHUDWLRQ

ದ

'HFHOHUDWLRQ

ದ

-HUN

ದ

-HUN

&RPPDQG$ERUWHG
(UURU
(UURU,'
$EVROXWH
3KDVH6KLIW

$EVROXWH
3KDVH6KLIW

$
,Q6\QF




W

$
([H
%XV\
'RQH








$EVROXWH 
3KDVH6KLIW


W
W
W
W


72B0DVWHU
3RVLWLRQ



W

72B6ODYH
3RVLWLRQ


W

72B0DVWHU
9HORFLW\

72B6ODYH
9HORFLW\




72B6ODYH
6WDWXV 
6\QFKURQL]HG 
0RWLRQ3KDVH

6KLIW

Programación del PLC
Manual de programación y manejo, 11/2019

W

W

W

3501

Instrucciones
4.1 Instrucciones
During an active gearing operation with "MC_GearInPos" (A1), a "MC_PhasingAbsolute" job
(A2) is initiated using "Exe". The leading value shift is performed with the dynamics specified
additively to the synchronous operation motion. "Done" indicates that the leading value was
successfully shifted. The leading value shift 50.0 resulting from the job is indicated in
"AbsolutePhaseShift". The absolute leading value shift 50.0 is indicated in the tag of the
technology object <TO>.StatusSynchronizedMotion.PhaseShift. The motion of the leading
axis is not affected.
After the leading value shift, the "MC_PhasingAbsolute" job (A2) is initiated again using "Exe".
Because the leading value shift (<TO>.StatusSynchronizedMotion.PhaseShift) is already 50.0,
the leading value is not shifted.

MC_PhasingRelative V3
MC_PhasingRelative: Relative shift of leading value on the following axis V3
Description
With the Motion Control instruction "MC_PhasingRelative", you shift the leading value on a
following axis during gearing with "MC_GearIn" and "MC_GearInPos" relative to the existing
leading value shift. The position of the leading axis is not affected by this.
You define the dynamic response of the motion of the following axis with the parameters
"Velocity", "Jerk", "Acceleration", and "Deceleration" . The dynamic values are added to the
values of the synchronous operation motion.

Applies to
● Synchronous axis

Requirements
● The technology objects of the leading axis and the following axis have been configured
correctly.
● The leading axis is a positioning axis, synchronous axis, or external encoder.
● The following axis is a synchronous axis.
● The leading axis is specified as possible leading axis in the configuration of the following
axis in "Technology object > Configuration > Leading value interconnections".
● The following axis is synchronized to the leading axis ("MC_GearIn.InGear" = TRUE or
"MC_GearInPos.InSync" = TRUE) by means of the Motion Control instruction "MC_GearIn"
or "MC_GearInPos".
● The following axis is enabled.

Override response
The override characteristics for "MC_PhasingRelative" jobs are described in section Override
response of Motion Control commands V3 (Página 3526).

3502

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Disabling the leading axis with "MC_Power.Enable" = FALSE does not abort the leading value
shift. The following axis follows the leading axis even during the braking ramp and after the
leading axis is enabled again.

Parameters
The following table shows the parameters of Motion Control instruction "MC_PhasingRelative":
Parameters

Declara‐
tion

Data type

Default value Description

Master

INPUT

TO_Axis

-

Leading axis technology object

Slave

INPUT

TO_SynchronousAxis

-

Following axis technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

PhaseShift

INPUT

LREAL

0.0

Relative leading value shift

Velocity

INPUT

LREAL

-1.0

Velocity of the following axis for leading value shift
(added to synchronous operation motion)
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The velocity configured in "Techno‐
logy object > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Velocity)

Acceleration

INPUT

LREAL

-1.0

Acceleration of the following axis for leading value
shift (added to synchronous operation motion)
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The acceleration configured in "Tech‐
nology object > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration of the following axis for leading value
shift (added to synchronous operation motion)
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The deceleration configured in "Tech‐
nology object > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk of the following axis for leading value shift
(added to synchronous operation motion)
Value > 0.0: Constant-acceleration velocity profile;
the specified jerk is used
Value = 0.0: Trapezoid velocity profile
Value < 0.0: The jerk configured in "Technology
object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Jerk)

Done

OUTPUT BOOL

Programación del PLC
Manual de programación y manejo, 11/2019

FALSE

TRUE

Leading value shift is finished.

3503

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Busy

OUTPUT BOOL

FALSE

TRUE

Job is running.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

0.0

As long as "Busy" = TRUE:

CoveredPhaseShift OUTPUT LREAL

Default value Description

Display of leading value shift completed up to now

Start relative leading value shift
To start a relative leading value shift with the Motion Control instruction "MC_PhasingRelative",
follow these steps:
1. Check the requirements indicated above.
2. Specify the relative leading value shift in the "PhaseShift" parameter.
3. Start the "MC_PhasingRelative" job with a positive edge at parameter "Execute".
The current motion state is indicated in parameters "Busy", "CoveredPhaseShift", "Done" and
"Error".

Consulte también
Override response of Motion Control commands V3 (Página 3526)
MC_GearInPos V3 (Página 3493)
MC_GearIn V3 (Página 3489)

3504

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_PhasingRelative: Function chart V3
Function chart: Relative shift of leading value
$

$
0&B3KDVLQJ5HODWLYH

0&B*HDU,Q3RV
72B0DVWHU
72B6ODYH

0DVWHU
6ODYH
([HFXWH

6WDUW6\QF
,Q6\QF

72B0DVWHU
,Q6\QF

72B6ODYH

0DVWHU

'RQH

'RQH

6ODYH

%XV\

%XV\

%XV\

([H

([HFXWH



5DWLR1XPHUDWRU &RPPDQG$ERUWHG



3KDVH6KLIW



5DWLR'HQRPLQDWRU

(UURU

ದ

9HORFLW\

(UURU,'

ದ

$FFHOHUDWLRQ

ದ

$FFHOHUDWLRQ

ದ

'HFHOHUDWLRQ

ದ

'HFHOHUDWLRQ

ದ

-HUN

ದ

-HUN

&RPPDQG$ERUWHG
(UURU
(UURU,'
&RYHUHG
3KDVH6KLIW

&RYHUHG
3KDVH6KLIW

$
,Q6\QF




W

$
([H
%XV\
'RQH








&RYHUHG 
3KDVH6KLIW


W
W
W
W


72B0DVWHU
3RVLWLRQ



W

72B6ODYH
3RVLWLRQ


W

72B0DVWHU
9HORFLW\


W

72B6ODYH
9HORFLW\

72B6ODYH
6WDWXV 
6\QFKURQL]HG 
0RWLRQ3KDVH

6KLIW

Programación del PLC
Manual de programación y manejo, 11/2019

W

W

3505

Instrucciones
4.1 Instrucciones
During an active gearing operation with "MC_GearInPos" (A1), a "MC_PhasingRelative" job
(A2) is initiated using "Exe". The leading value shift is performed with the dynamics specified
additively to the synchronous operation motion. "Done" indicates that the leading value was
successfully shifted. The leading value shift 50.0 resulting from the job is indicated in
"CoveredPhaseShift". The absolute leading value shift 50.0 is indicated in the tag of the
technology object <TO>.StatusSynchronizedMotion.PhaseShift. The motion of the leading
axis is not affected.
After the leading value shift, the "MC_PhasingRelative" job (A2) is initiated again using "Exe".
The leading value shift is performed again with the dynamics specified additively to the
synchronous operation motion. "Done" indicates that the leading value was successfully
shifted. The leading value shift 50.0 resulting from the job is indicated in "CoveredPhaseShift".
The absolute leading value shift 100.0 is indicated in the tag of the technology object
<TO>.StatusSynchronizedMotion.PhaseShift.

MC_CamIn V3
MC_CamIn: Start camming V3.
Description
With the Motion Control instruction "MC_CamIn", you start a camming operation between a
leading axis and a following axis.
The synchronous operation is synchronized in advance of the specified synchronous position
of the leading axis. The synchronous position of the leading axis starting from which the leading
and following axes move synchronously results from the starting position of the cam and the
"MasterSyncPosition" and "MasterOffset" parameters.
With the "MasterSyncPosition" parameter, you specify the position in the cam relative to the
start of the cam starting from which the cam is to be run. If the entire cam is to be run, specify
the value 0.0 (default value) in "MasterSyncPosition".
With the "MasterOffset" parameter, you offset the leading values of the cam. As a result, you
offset the curve defined as an absolute curve to the position range needed for the application.
The figure below shows the basic effect of the leading value and following value offset as well
as of "MasterSyncPosition":

3506

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones

)ROORZLQJYDOXH

)ROORZLQJYDOXHRIWKHV\QFKURQRXV
RSHUDWLRQIXQFWLRQ
IROORZLQJD[LVSRVLWLRQ

4.1 Instrucciones

'HILQLWLRQRIWKHFDP

6ODYH2IIVHW

/HDGLQJYDOXH

0DVWHU2IIVHW

/HDGLQJYDOXHRIWKHV\QFKURQRXVRSHUDWLRQIXQFWLRQ
OHDGLQJD[LVSRVLWLRQ







The figure below shows the basic effect of scaling the cam with the parameters "MasterScaling"
and "SlaveScaling":
0DVWHU6FDOLQJ 
6ODYH6FDOLQJ 

0DVWHU6FDOLQJ 
6ODYH6FDOLQJ 











W

W
0DVWHU6FDOLQJ 
6ODYH6FDOLQJ 

0DVWHU6FDOLQJ 
6ODYH6FDOLQJ 












W

W

Leading value
Following value

Programación del PLC
Manual de programación y manejo, 11/2019

3507

Instrucciones
4.1 Instrucciones
The following types of synchronization are possible:
● Synchronization using dynamic parameters
(SyncProfileReference = 0)
● Synchronization using leading value distance
(SyncProfileReference = 1)
You can start synchronous operation when the leading axis or following axis is at a standstill or
when it is in motion.

Applies to
● Synchronous axis

Requirement
● The technology objects of the leading axis, following axis, and cam have been configured
correctly.
● The leading axis is a positioning axis, synchronous axis, or external encoder.
● The following axis is a synchronous axis.
● The leading axis is specified as possible leading axis in the configuration of the following
axis in "Technology object > Configuration > Leading value interconnections".
● The following axis is enabled.
● The cam is interpolated with "MC_InterpolateCam".

Override response
The override response for "MC_CamIn" jobs is described in section Override response of
Motion Control commands V3 (Página 3526).
Disabling the leading axis with "MC_Power.Enable" = FALSE does not abort synchronous
operation. The following axis follows the leading axis even during the braking ramp and after
the leading axis is enabled again.

Parameters
The following table shows the parameters of Motion Control instruction "MC_CamIn":
Parameter

Declara‐
tion

Data type

Default value Description

Master

INPUT

TO_Axis

-

Leading axis technology object

Slave

INPUT

TO_SynchronousAxis

-

Following axis technology object

Cam

INPUT

TO_Cam

-

Cam technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

MasterOffset

INPUT

LREAL

0.0

Offset of leading values of cam
(The cam technology object is not changed.)

3508

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default value Description

SlaveOffset

INPUT

LREAL

0.0

MasterScaling

INPUT

LREAL

1.0

SlaveScaling

INPUT

LREAL

1.0

MasterSyncPosi‐
tion

INPUT

LREAL

0.0

Offset of following values of cam
(The cam technology object is not changed.)
Scaling the leading values of the cam
(The cam technology object is not changed.)
Scaling the following values of the cam
(The cam technology object is not changed.)
Starting point in the cam/distance from the cam
start with reference to the scaled cam.
The value must be within the leading value range
of the cam.

SyncProfileRefe‐
rence

INPUT

DINT

1

Synchronization profile
0

Synchronization using dynamic parame‐
ters

1

Synchronization using leading value dis‐
tance

MasterStartDistan‐
ce

INPUT

LREAL

0.0

Leading value distance

Velocity

INPUT

LREAL

-1.0

Velocity

(when "SyncProfileReference" = 1)
(when "SyncProfileReference" = 0)
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The velocity configured in "Techno‐
logy object > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Velocity)

Acceleration

INPUT

LREAL

-1.0

Acceleration
(when "SyncProfileReference" = 0)
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The acceleration configured in "Tech‐
nology object > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
(when "SyncProfileReference" = 0)
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The deceleration configured in "Tech‐
nology object > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Programación del PLC
Manual de programación y manejo, 11/2019

3509

Instrucciones
4.1 Instrucciones
Parameter

Declara‐
tion

Data type

Default value Description

Jerk

INPUT

LREAL

-1.0

Jerk
(when "SyncProfileReference" = 0)
Value > 0.0: Constant-acceleration velocity profile;
the specified jerk is used
Value = 0.0: Trapezoid velocity profile
Value < 0.0: The jerk configured in "Technology
object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Jerk)

ApplicationMode

SyncDirection

INPUT

INPUT

DINT

DINT

0

3

Application of the cam
0

Once/not cyclic

1

Cyclic (absolute application on the follo‐
wing value side)

2

Cyclic appending (continuously appen‐
ding on the following value side)

Direction of synchronization
(in effect for axes with activated Modulo setting)
1

Positive direction
The following axis may only travel in po‐
sitive direction during synchronization.

2

Negative direction
The following axis may only travel in ne‐
gative direction during synchronization.

3

Shortest distance
Changes in direction are permitted for
the following axis during synchroniza‐
tion.

StartSync

OUTPUT BOOL

FALSE

TRUE

The following axis is synchronized to the
leading axis.

InSync

OUTPUT BOOL

FALSE

TRUE

Synchronous operation reached
The following axis is synchronized and
moves synchronously to the leading
axis.

Busy

OUTPUT BOOL

FALSE

TRUE

Job is running.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

EndOfProfile

OUTPUT BOOL

FALSE

TRUE

The end of the cam has been reached.
Displayed for at least one call of
"MC_CamIn" in the user program when
the cam is used cyclically.

3510

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Starting synchronous operation
To start synchronous operation with the Motion Control instruction "MC_CamIn", follow these
steps:
1. Check the requirements indicated above.
2. Specify the leading axis, the following axis, the utilized cam and the synchronous position
in the corresponding parameters.
3. Start the "MC_CamIn" job with a positive edge at parameter "Execute".
The following axis is synchronized to the leading value of the leading axis. If the "InSync"
parameter shows the value TRUE, the following axis is synchronized and moves
synchronously to the leading axis. With cyclic application of the cam, "InSync" and "Busy" show
the value TRUE until the "MC_CamIn" job is overridden by another Motion Control job. With
non-cyclic application of the cam, "InSync" and "Busy" are set to the value FALSE when the
parameter "EndOfProfile" is set to the value TRUE.

Consulte también
Override response of Motion Control commands V3 (Página 3526)

Programación del PLC
Manual de programación y manejo, 11/2019

3511

Instrucciones
4.1 Instrucciones

MC_CamIn: Function chart V3
Function chart: Synchronizing and switching the cam
$

$
0&B&DP,Q

0&B&DP,Q
72B0DVWHU

0DVWHU

72B0DVWHU
72B6ODYH
&DPB

6ODYH

&DPB

&DP

([HB

0DVWHU

72B6ODYH

6ODYH

&DP

([HB

([HFXWH

([HFXWH

0DVWHU2IIVHW

0DVWHU2IIVHW

6ODYH2IIVHW

6ODYH2IIVHW

0DVWHU6FDOLQJ

0DVWHU6FDOLQJ

6ODYH6FDOLQJ

6ODYH6FDOLQJ


0DVWHU6\QF3RVLWLRQ



0DVWHU6WDUW'LVWDQFH

6WDUW6\QF
,Q6\QF

ದ

9HORFLW\

ದ

$FFHOHUDWLRQ

%XV\

ದ

'HFHOHUDWLRQ

&RPPDQG$ERUWHG

-HUN

ದ

6\QF'LUHFWLRQ

6WDUW6\QFB

0DVWHU6WDUW'LVWDQFH

6WDUW6\QF

9HORFLW\

%XV\B

$FFHOHUDWLRQ

%XV\

$ERUWB

'HFHOHUDWLRQ

&RPPDQG$ERUWHG

,Q6\QF

-HUN

(UURU


6\QF'LUHFWLRQ

6WDUW6\QFB
,Q6\QFB
%XV\B

(UURU
(UURU,'

$SSOLFDWLRQ0RGH

(QG2I3URILOH



(QG2I3URILOH

(RSB





3512

6\QF3URILOH5HIHUHQFH



,Q6\QFB

(UURU,'

$SSOLFDWLRQ0RGH



0DVWHU6\QF3RVLWLRQ



6\QF3URILOH5HIHUHQFH



&DPB





&DPB



Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
$


([HB




%XV\B

W



6WDUW6\QFB

W




W



,Q6\QFB



W



$ERUWB



W

$


([HB




%XV\B

W



6WDUW6\QFB

W




W



,Q6\QFB



W



(RSB



W






72B0DVWHU
3RVLWLRQ



W

ದ
72B6ODYH
3RVLWLRQ




W


72B0DVWHU
9HORFLW\


W



72B6ODYH

9HORFLW\
ದ

W

6\QFB

6\QFB

Using "Exe_1", an "MC_CamIn" job (A1) is initiated. The start of the synchronization is
displayed with StartSync_1. The following axis (TO_Slave) is synchronized to the cam (Cam_1)
within the range "Sync_1" by means of the specified dynamic parameters. "InSync_1" signals
that the following axis is synchronized and moving synchronously to the leading axis.

Programación del PLC
Manual de programación y manejo, 11/2019

3513

Instrucciones
4.1 Instrucciones
The synchronous operation is overridden by another "MC_CamIn" job (A2). The abort is
signaled via "Abort_1". The start of the synchronization is displayed with StartSync_2. The
following axis is synchronized to the new cam (Cam_2) within the range "Sync_2" by means of
the specified leading value distance. Within the range "Sync_2", the axis does not following the
cam "Cam_1" The axis is moved with the dynamics calculated by the system to the
synchronous position of A2. "InSync_2" signals that the following axis is synchronized and
moving synchronously to the leading axis.

MC_SynchronizedMotionSimulation V3
MC_SynchronizedMotionSimulation: Simulate synchronous operation V3
Description
With the Motion Control instruction "MC_SynchronizedMotionSimulation", you simulate an
active synchronous operation on a following axis. As a result, a synchronous operation remains
active when the following axis is disabled with "MC_Power". The following axis does not have
to be synchronized again after being enabled again.
With the start of a "MC_SynchronizedMotionSimulation" job, the velocity setpoint from the
synchronous operation is set to zero. If an overlaid movement is active on the following axis at
the start of the simulation, the setpoints of this overlaid movement will continue to be output.
Setpoints of motion jobs that are started during synchronous operation simulation are output to
the drive.
If the position of the following axis at the end of the simulation differs from the position at the
start of the simulation, this triggers a setpoint step-change.

Applies to
● Synchronous axis

Requirement
● The technology object has been configured correctly.
● The following axis is a synchronous axis.
● A synchronous operation is active on the technology object in status "Synchronous"
(<TO>.StatusWord.X22 = TRUE).

Override response
The "MC_SynchronizedMotionSimulation" job is not aborted by any other Motion Control job.
The simulated synchronous operation remains active even when the following axis is disabled
with "MC_Power.Enable" = FALSE.
A restart of the technology object stops the simulation and aborts the synchronous operation.

3514

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
The start of an "MC_SynchronizedMotionSimulation" job does not abort any other Motion
Control jobs. With "MC_SynchronizedMotionSimulation.Enable" = TRUE, synchronous
operation jobs are rejected.

Parameters
The following table shows the parameters of Motion Control instruction
"MC_SynchronizedMotionSimulation":
Parameters

Declara‐
tion

Data type

Default value Description

Slave

INPUT

TO_SynchronousAxis

-

Following axis technology object

Enable

INPUT

BOOL

FALSE

TRUE

Simulation of synchronous operation is
started.

FALSE

Simulation of the synchronous operation
is stopped.

InSimulation

OUTPUT BOOL

FALSE

TRUE

Synchronous operation is being simula‐
ted

Busy

OUTPUT BOOL

FALSE

TRUE

Job is running.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

Continuing synchronous operation when the following axis is disabled
In order not to stop synchronous operation with "MC_SynchronizedMotionSimulation" Motion
Control instruction when the following axis is disabled, follow these steps:
1. Check the requirements indicated above.
2. Specify the following axis in the "Slave" parameter.
3. Bring the leading axis to a standstill (e.g. with "MC_Halt").
4. Start the simulation of the synchronous operation on the following axis with
"MC_SynchronizedMotionSimulation.Enable" = TRUE.
5. When the "InSimulation" parameter shows the value TRUE, disable the following axis. The
synchronous operation remains active in the simulation.
6. To stop the synchronous operation after the following axis is enabled, stop the synchronous
operation simulation with "MC_SynchronizedMotionSimulation.Enable" = FALSE.
The synchronous operation simulation is stopped. The following axis follows the leading
axis without re-synchronization.

Programación del PLC
Manual de programación y manejo, 11/2019

3515

Instrucciones
4.1 Instrucciones

Cam
MC_InterpolateCam V3
MC_InterpolateCam: Interpolate cam V3
Description
With the Motion Control instruction "MC_InterpolateCam", you interpolate a cam.
Following the interpolation, the gaps between the defined interpolation points and segments of
the cam are closed. The cam is interpolated from the minimum value of the definition range to
the maximum value. After interpolation, an explicit value in the value range is assigned to each
value in the definition range.
The interpolation method defines how missing ranges are interpolated. You specify the
interpolation method in the configuration of the technology object. The following interpolation
methods are possible:
● Linear interpolation
● Interpolation with cubic splines
● Interpolation with Bézier splines

Applies to
● Cam

Requirements
● The technology object has been configured correctly.
● The cam is not currently being used, e.g. for camming.

Override response
The "MC_InterpolateCam" job is not aborted by any other Motion Control job.
The start of an "MC_InterpolateCam" job does not abort any active Motion Control jobs.

Parameters
The following table shows the parameters of Motion Control instruction "MC_InterpolateCam":
Parameters

Declara‐
tion

Data type

Default value Description

Cam

INPUT

TO_Cam

-

Cam technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

Done

OUTPUT BOOL

FALSE

TRUE

3516

The cam is interpolated.

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default value Description

Busy

OUTPUT BOOL

FALSE

TRUE

Job is running.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

Interpolating a cam
To interpolate a cam with the "MC_InterpolateCam" Motion Control instruction, follow these
steps:
1. Check the requirements indicated above.
2. Specify the cam to be interpolated in the "Cam" parameter.
3. Start the "MC_InterpolateCam" job with a positive edge at parameter "Execute".
The cam is interpolated. When the "Done" parameter shows the value TRUE, the interpolation
is finished.

MC_GetCamFollowingValue V3
MC_GetCamFollowingValue: Read following value of a cam V3
Description
With the Motion Control instruction "MC_GetCamFollowingValue", you read the following value
and the first and second derivative of the following value for a leading value from a cam.

Applies to
● Cam

Requirements
● The technology object has been configured correctly.
● The cam is interpolated.

Override response
The "MC_GetCamFollowingValue" job is not aborted by any other Motion Control job.
The start of an "MC_GetCamFollowingValue" job does not abort any active Motion Control jobs.

Programación del PLC
Manual de programación y manejo, 11/2019

3517

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction
"MC_GetCamFollowingValue":
Parameters

Declara‐
tion

Data type

Default value Description

Cam

INPUT

TO_Cam

-

Cam technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

LeadingValue

INPUT

LREAL

0.0

Leading value for which the following value is read

Done

OUTPUT BOOL

FALSE

TRUE

The following value was read.

Busy

OUTPUT BOOL

FALSE

TRUE

Job is running.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

Value

OUTPUT LREAL

-

Read following value (position)
(valid when "Done" = TRUE)

FirstDerivative

OUTPUT LREAL

-

First derivative of read following value
(valid when "Done" = TRUE)

SecondDerivative

OUTPUT LREAL

-

Second derivative of read following value
(valid when "Done" = TRUE)

Reading a following value
To read a following value from a cam with the "MC_GetCamFollowingValue" Motion Control
instruction, follow these steps:
1. Check the requirements indicated above.
2. Specify the cam and the leading value in the corresponding parameters.
3. Start the "MC_GetCamFollowingValue" job with a positive edge at parameter "Execute".
When the "Done" parameter shows the value TRUE, the following value has been read. The
following value and the derivatives are output in the "Value", "FirstDerivative" and
"SecondDerivative" parameters.

MC_GetCamLeadingValue V3
MC_GetCamLeadingValue: Read leading value of a cam V3 (S7-1500T)
Description
With the Motion Control instruction "MC_GetCamLeadingValue", you read the leading value
that is defined for a following value from a cam.
Because the same following values can be defined for different leading values, an
approximation of the leading value can specified in the "ApproachValue" parameter.

3518

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Applies to
● Cam

Requirements
● The technology object has been configured correctly.
● The cam is interpolated.

Override response
The "MC_GetCamLeadingValue" job is not aborted by any other Motion Control job.
The start of an "MC_GetCamLeadingValue" job does not abort any active Motion Control jobs.

Parameters
The following table shows the parameters of Motion Control instruction
"MC_GetCamLeadingValue":
Parameters

Declara‐
tion

Data type

Default value Description

Cam

INPUT

TO_Cam

-

Cam technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

FollowingValue

INPUT

LREAL

0.0

Following value for which the leading value is read

ApproachLeading‐
Value

INPUT

LREAL

0.0

Approximation value for the searched for leading
value
If the following value is used multiple times in the
cam, it can be used to limit the searched leading
value.

Done

OUTPUT BOOL

FALSE

TRUE

The leading value was read.

Busy

OUTPUT BOOL

FALSE

TRUE

Job is running.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

Value

OUTPUT LREAL

-

Read leading value (position)
(valid when "Done" = TRUE)

Reading a leading value
To read a leading value from a cam with the "MC_GetCamLeadingValue" Motion Control
instruction, follow these steps:
1. Check the requirements indicated above.
2. Specify the cam, the leading value, and the approximation value for the searched-for
leading value in the corresponding parameters.
3. Start the "MC_GetCamLeadingValue" job with a positive edge at parameter "Execute".
Programación del PLC
Manual de programación y manejo, 11/2019

3519

Instrucciones
4.1 Instrucciones
When the "Done" parameter shows the value TRUE, the leading value has been read. The
leading value is output in the Value parameter.

Torque data
MC_TorqueLimiting V3
MC_TorqueLimiting: Activate and deactivate force/torque limit / fixed stop detection
Description
With the Motion Control instruction "MC_TorqueLimiting", you activate and assign parameters
for force/torque limiting and fixed stop detection.
Together with a position-controlled motion job, a "Travel to fixed stop" can be realized with the
fixed stop detection.
In the axis configuration, you can configure whether the force/torque limiting is to relate to the
drive side or the load side.
The functions of the Motion Control instruction "MC-TorqueLimiting" can be activated and
deactivated before and during a motion job.

Force/torque limiting applies to
● Speed axis
● Positioning axis
● Synchronous axis

Requirements for force/torque limiting
● The technology object and the reference torque of the drive have been configured correctly.
● The drive must support force/torque reduction. Only PROFIdrive drives with SIEMENS
telegram 10x support force/torque limiting.
● No enable-preventing errors are pending for the technology object (the technology object
does not have to be enabled).

Fixed stop detection applies to
● Positioning axis
● Synchronous axis

3520

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Requirement for fixed stop detection
● The fixed stop detection can only be applied to position-controlled axes. For fixed stop
detection, the axis must be enabled as position-controlled axis; motion commands must be
executed as position-controlled motion commands.
● The technology object has been configured correctly.
● When a drive and telegram that support force/torque limiting are used, the reference torque
of the drive must be correctly configured for the technology object.
● No enable-preventing errors are pending for the technology object (the technology object
does not have to be enabled).

Override response
● An MC_TorqueLimiting job cannot be aborted by another Motion Control job.
● A new MC_TorqueLimiting job does not abort active Motion Control jobs.

Parameters
The following table shows the parameters of Motion Control instruction "MC_TorqueLimiting":
Parameters

Declaration

Data type

Default value

Description

Axis

INPUT

Enable

INPUT

TO_SpeedAxis

-

Technology object

BOOL

FALSE

TRUE

Limit

INPUT

LREAL

-1.0

Value of force/torque limiting (in the configured unit of mea‐
surement)

Activate function corresponding to input parameter
Mode

If drive and telegram do not support force/torque limiting, the
specified value is irrelevant.
≥0

Use the value specified in the parameter ("0" value
is permissible)

<0

Use the value configured in the "Torque limiting"
configuration window.
Tag Torque Limit:
<TO>.TorqueLimiting.LimitDefaults.Torque
Tag Force Limit:
<TO>.TorqueLimiting.LimitDefaults.Force

Mode

INPUT

DINT

0

0

Force/torque limiting

1

Fixed stop detection
If drive and telegram support force/torque limiting,
this is applied.

InClamping

OUTPUT

BOOL

FALSE

TRUE

Mode = 1: The drive is kept at the fixed stop (clam‐
ping), the axis position is within the positioning to‐
lerance.

InLimitation

OUTPUT

BOOL

FALSE

TRUE

Mode = 0 and 1: Drive is operating at the force/
torque limit.

Busy

OUTPUT

BOOL

FALSE

TRUE

Job is running.

Programación del PLC
Manual de programación y manejo, 11/2019

3521

Instrucciones
4.1 Instrucciones
Parameters

Declaration

Data type

Default value

Description

Error

OUTPUT

BOOL

FALSE

TRUE

ErrorID

OUTPUT

WORD

16#0000

Error ID for parameter "ErrorID"

An error occurred while processing the job. The job
is rejected. The cause of the error can be found in
the "ErrorID" parameter.

Changes to input parameters "Limit" and "Mode" are also transferred at the cyclic call of the
Motion Control instruction when "Enable = TRUE".

3522

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_TorqueLimiting: Function chart V3
Function chart: Stopping an axis when the torque limit is reached

$[LVB
(QB

$

$

0&B7RUTXH/LPLWLQJ

0&B+DOW

$[LV

,Q&ODPSLQJ

$[LVB

(QDEOH

,Q/LPLWDWLRQ

([B

%XV\

/LPLW


0RGH

%XV\B

$[LV
'HFHOHUDWLRQ

(UURU

'RQH

([HFXWH

%XV\
&RPPDQG$ERUWHG

-HUN
$ERUW$FFHOHUDWLRQ

(UURU,'

(UURU
(UURU,'

$


(QB



,Q/LPLWDWLRQ
%XV\B

W




W




W

$
([B
'RQH




W




W

72'%

6WDWXV%LWV
7RUTXH/LPLWLQJ 
&RPPDQG

W


9HORFLW\



W


7RUTXH



/LPLW



①
②
③

W

Velocity setpoint
Actual velocity
Torque

A "MC_Halt" Motion Control instruction is executed for an axis with active torque limiting
"MC_TorqueLimiting". Torque limiting still "MC_TorqueLimiting.Enable" remains TRUE

Programación del PLC
Manual de programación y manejo, 11/2019

3523

Instrucciones
4.1 Instrucciones
(active) and any accumulated following error is retained and will be reduced. When the actual
velocity is "0.0" and the minimum dwell time in the standstill window has expired,
"MC_Halt.Done" = TRUE". When position monitoring is activated, reaching of the target
position is also monitored.

3524

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Function chart: Torque limiting with fixed stop detection (mode = 1)

$[LVB
(QB
ದ

$

$

0&B7RUTXH/LPLWLQJ

0&B0RYH9HORFLW\

$[LV

,Q&ODPSLQJ

$[LVB

(QDEOH

,Q/LPLWDWLRQ

([B

%XV\

/LPLW
0RGH



%XV\B

$[LV

,Q9HORFLW\

([HFXWH

%XV\

9HORFLW\

&RPPDQG$ERUWHG

(UURU

$FFHOHUDWLRQ

(UURU

(UURU,'

'HFHOHUDWLRQ

(UURU,'

,Q9HOB
%XV\B
$ERUWB

-HUN
'LUHFWLRQB

'LUHFWLRQ
&XUUHQW

758(

3RVLWLRQ&RQWUROOHG

$


(QB



,Q&ODPSLQJ
,Q/LPLWDWLRQ

W




W




W



%XV\B



W

$


([B



'LUHFWLRQB

W




W



%XV\B



W



,QB9HOB



$ERUWB

W




W



3RVLWLRQ



/LPLW
7RUTXH


/LPLWದ

①
②



W

W

Actual position remains
Target position reached (position setpoint)

Programación del PLC
Manual de programación y manejo, 11/2019

3525

Instrucciones
4.1 Instrucciones

③
④

Positioning tolerance
Torque

A "MC_MoveVelocity" Motion Control instruction is executed for an axis with active torque
limiting "MC_TorqueLimiting". The torque limiting "MC_TorqueLimiting.Enable" is still TRUE
(active) and the configured following error is reduced. When reaching the following error limit,
the Motion Control instruction "MC_MoveVelocity" is canceled with "Abort" = TRUE. The drive
is kept at the fixed stop (clamping), the axis position is within the positioning tolerance. The
Motion Control instruction "MC_MoveVelocity" is called again with "Execute" = TRUE, and the
axis is moved with constant velocity.

Override response of Motion Control commands V3
Homing and motion jobs
The following table shows how a new Motion Control job affects active homing and motion jobs:
⇒ Active job
⇓ New job

MC_Home MC_Home
Mode =
Mode =
2, 8, 10
3, 5

MC_Halt

MC_Move
Absolute

MC_Move
Relative

MC_Move
Velocity

MC_Move
Jog

MC_Move
Super
imposed

MC_Home
Mode = 3, 5

A

A

A

A

A

A

A

A

MC_Home
Mode = 9

A

-

-

-

-

-

-

-

MC_Halt

-

A

A

A

A

A

A

A

MC_Move
Absolute

-

A

A

A

A

A

A

A

MC_Move
Relative

-

A

A

A

A

A

A

A

MC_Move
Velocity

-

A

A

A

A

A

A

A

MC_MoveJog

-

A

A

A

A

A

A

A

MC_Move
Superimposed

-

-

-

-

-

-

-

A

MC_GearIn

-

A

A

A

A

A

A

A

MC_GearInPos pen‐
ding

-

-

-

-

-

-

-

-

-

A

A

A

A

A

A

A

(Busy = TRUE,
StartSync = FALSE,
InSync = FALSE )
MC_GearInPos acti‐
ve
(Busy = TRUE,
StartSync or InSync
= TRUE )

3526

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
⇒ Active job

MC_Home MC_Home
Mode =
Mode =
2, 8, 10
3, 5

⇓ New job
MC_CamIn pending

MC_Halt

MC_Move
Absolute

MC_Move
Relative

MC_Move
Velocity

MC_Move
Jog

MC_Move
Super
imposed

-

-

-

-

-

-

-

-

-

A

A

A

A

A

A

A

(Busy = TRUE,
StartSync = FALSE,
InSync = FALSE )
MC_CamIn active
(Busy = TRUE,
StartSync or InSync
= TRUE )
A The running job is aborted with "JobAborted" = TRUE. The current dynamics is smoothly transitioned to the dynamic values
of the new job.
- No effect, running job continues to be executed

Synchronous operation jobs
The following table shows how a new Motion Control job affects the motion of the axis on active
synchronous operation jobs:
⇒ Active job
⇓ New job

MC_Gea‐
rIn

MC_Gea‐
rInPos
pending

MC_Gea‐
rInPos acti‐
ve

(Busy =
TRUE,
InSync =
FALSE,
StartSync
= FALSE)

(Busy =
TRUE,
StartSync
or InSync =
TRUE )

MC_Pha‐
sing
Absolute

MC_Pha‐
sing
Relative

MC_Ca‐
mIn pen‐
ding
(Busy =
TRUE,
InSync =
FALSE,
StartSync
= FALSE)

MC_Ca‐
mIn active
(Busy =
TRUE,
StartSync
or InSync =
TRUE )

MC_Home Mode = 3, 5

A

-

-

-

-

-

-

MC_Halt

A

-

A

A

A

-

A

MC_MoveAbsolute

A

-

A

A

A

-

A

MC_MoveRelative

A

-

A

A

A

-

A

MC_MoveVelocity

A

-

A

A

A

-

A

MC_MoveJog

A

-

A

A

A

-

A

MC_MoveSuperimposed

-

-

-

-

-

-

-

MC_GearIn

A

A

A

A

A

A

A

MC_GearInPos pending

-

A

-

-

-

A

-

A

A

A

A

A

A

A

MC_PhasingAbsolute

-

-

-

A

A

-

-

MC_PhasingRelative

-

-

-

A

A

-

-

(Busy = TRUE, StartSync =
FALSE, InSync = FALSE )
MC_GearInPos active
(Busy = TRUE, StartSync or
InSync = TRUE )

Programación del PLC
Manual de programación y manejo, 11/2019

3527

Instrucciones
4.1 Instrucciones
⇒ Active job

MC_Gea‐
rIn

⇓ New job

MC_CamIn pending

MC_Gea‐
rInPos
pending

MC_Gea‐
rInPos acti‐
ve

(Busy =
TRUE,
InSync =
FALSE,
StartSync
= FALSE)

(Busy =
TRUE,
StartSync
or InSync =
TRUE )

-

A

-

-

-

A

-

A

A

A

A

A

A

A

MC_Pha‐
sing
Absolute

MC_Pha‐
sing
Relative

MC_Ca‐
mIn pen‐
ding
(Busy =
TRUE,
InSync =
FALSE,
StartSync
= FALSE)

MC_Ca‐
mIn active
(Busy =
TRUE,
StartSync
or InSync =
TRUE )

(Busy = TRUE, StartSync =
FALSE, InSync = FALSE )
MC_CamIn active
(Busy = TRUE, StartSync or
InSync = TRUE )
A The running job is aborted with "JobAborted" = TRUE. The current dynamics is smoothly transitioned to the dynamic values
of the new job.
- No effect, running job continues to be executed

A pending synchronous operation (Busy = TRUE, StartSync = FALSE, InSync = FALSE ) does
not cancel active commands. Only a pending synchronous operation command is permitted. A
second pending synchronous operation command cancels the first pending synchronous
operation command.
When one synchronous operation command is active and one synchronous operation
command is pending, a new motion command cancels the active as well as the pending
synchronous operation command.

Measuring input
The following table shows which new Motion Control jobs will override active measuring input
jobs:
⇒ Active job

MC_MeasuringInput

MC_MeasuringInputCyclic

A

A

⇓ New job
MC_Home Mode = 2, 3, 5, 8, 9, 10
MC_Home Mode = 0, 1, 6, 7

-

-

MC_MeasuringInput

A

A

MC_MeasuringInputCyclic

A

A

MC_AbortMeasuringInput

A

A

A The running job is aborted with "JobAborted" = TRUE. The new job will be executed.
- No effect, running job continues to be executed

3528

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

S7-1500 Motion Control V2
MC_Power V2
MC_Power: Enable, disable technology object V2
Description
With the Motion Control instruction "MC_Power", a technology object is enabled or disabled.

Applies to
● Synchronous axis
● Positioning axis
● Speed axis
● External encoder

Requirements
● The technology object has been configured correctly.

Override response
● An "MC_Power" job cannot be aborted by any other Motion Control job.
● An "MC_Power" job with parameter "Enable" = TRUE enables a technology object but does
not thereby abort any other Motion Control instructions.
● Disabling the technology object (parameter "Enable" = FALSE) aborts all Motion Control
jobs on the corresponding technology object in accordance with the selected "StopMode".
This process cannot be canceled by the user.

Parameters
The following table shows the parameters of the "MC_Power" Motion Control instruction:
Parameters

Declaration

Data type

Default value

Description

Axis

InOut

TO_Axis

-

Technology object

Enable

INPUT

BOOL

FALSE

TRUE

The technology object is enabled.

FALSE The technology object is disabled.
All current jobs at the technology object are aborted
in accordance with the configured "StopMode".

Programación del PLC
Manual de programación y manejo, 11/2019

3529

Instrucciones
4.1 Instrucciones
Parameters

Declaration

Data type

Default value

Description

StopMode

INPUT

INT

0

Not applicable to the technology object external encoder
If you disable a technology object with a negative edge at
parameter "Enable", the axis decelerates in accordance with
the selected "StopMode".
0

Emergency stop
When the technology object is disabled, the axis
brakes to a standstill without jerk limit, using the
emergency stop deceleration configured in "Tech‐
nology object > Configuration > Extended parame‐
ters > Emergency stop ramp". The enable is then
canceled.
(<TO>.DynamicDefaults.
EmergencyDeceleration)

1

Immediate stop
When a technology object is disabled, the setpoint
zero is output, and the enable is canceled. The axis
is braked to a standstill according to the configura‐
tion in the drive.

2

Stop with maximum dynamic values
When the technology object is disabled, the axis is
braked to a standstill using the maximum decelera‐
tion configured in "Technology object > Configura‐
tion > Extended parameters > Dynamic limits". The
configured maximum jerk is hereby taken into ac‐
count. The enable is then canceled.
(<TO>.DynamicLimits.MaxDeceleration;
<TO>.DynamicLimits.MaxJerk)

Status

OUTPUT

BOOL

FALSE

Technology object enable status
FALSE Disabled
‑ A positioning axis or speed axis does not accept
any Motion Control jobs.
‑ Speed control and position control are not active.
‑ The actual values of the technology object are not
checked for validity.
TRUE

Enabled
‑ An enabled positioning axis or speed axis accepts
Motion Control jobs.
‑ Speed control and position control are active.
- The actual values of the technology object are va‐
lid.

Busy

OUTPUT

BOOL

FALSE

TRUE

Job is running.

Error

OUTPUT

BOOL

FALSE

TRUE

An error occurred in Motion Control instruction
MC_Power. The cause of the error can be found in
the "ErrorID" parameter.

ErrorID

OUTPUT

WORD

16#0000

Error ID for parameter "ErrorID"

3530

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Enabling technology objects
To enable a technology object, set the "Enable" parameter to TRUE.
When the Status parameter shows the value TRUE , the technology object is enabled.
If an axis is in motion when the technology object is enabled (actual velocity is present), the axis
brakes to the setpoint zero, using the maximum deceleration configured in "Technology object
> Configuration > Extended parameters > Dynamic limits"
(<TO>.DynamicLimits.MaxDeceleration). This braking ramp can be overridden by Motion
Control jobs.
Nota
Automatic enable after acknowledgment of a technology alarm
If the technology object is disabled due to a technology alarm, it will automatically be enabled
again after the cause has been eliminated and the alarm has been acknowledged. This
requires the "Enable" parameter to have retained the value TRUE during this process.

Disabling technology objects
To disable a technology object, set the "Enable" parameter to FALSE.
If an axis is in motion, it is braked to a standstill according to the selected "StopMode".
When the "Busy" and "Status" parameters show the value FALSE , the disabling of the
technology object is complete.

Drive connection by means of PROFIdrive
When a drive is connected using PROFIdrive, the setpoint, enable and drive status are
transmitted via the PROFIdrive telegram.
● Enable technology object and activate drive
With parameter "Enable" = TRUE, the technology object is enabled. The drive is enabled
according to the PROFIdrive standard.
When the tag <TO>.StatusDrive.InOperation shows the value TRUE , the drive is ready to
execute setpoints. The "Status" parameter is set to the value TRUE .
● Disable technology object and deactivate drive
With parameter "Enable" = FALSE, the "Status" parameter is set to the value FALSE, and
the axis is braked according to the selected "StopMode". The drive is disabled according to
the PROFIdrive standard.

Programación del PLC
Manual de programación y manejo, 11/2019

3531

Instrucciones
4.1 Instrucciones

Analog drive connection
The setpoint is output via an analog output. Optionally, you can configure an enabling signal via
digital output (<TO>.Actor.Interface.EnableDriveOutput), and a readiness signal via digital
input (<TO>.Actor.Interface.DriveReadyInput).
● Enable technology object and activate drive
With parameter "Enable" = TRUE, the enable output ("Enable drive output") is set.
When the drive returns the readiness signal via the ready input ("Drive ready input"), the
"Status" parameter and the technology object's <TO>.StatusDrive.InOperation tag are set
to TRUE, and the setpoint is switched to the analog output.
● Disable technology object and deactivate drive
With parameter "Enable" = FALSE, the "Status" parameter is set to the value FALSE, and
the axis is braked according to the selected "StopMode". When the setpoint zero is reached,
the enable output is set to FALSE.

Additional information
Additional information on enabling and disabling technology objects and drives can be found in
the appendix, MC_Power Function Charts.

3532

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_Power: Function chart V2
Function chart: Enabling a technology object and example of alarm response
$

$
0&B3RZHU
72B
(QDEOHB


0&B0RYH9HORFLW\

$[LV
(QDEOH
6WRS0RGH

6WDWXV
%XV\
(UURU
(UURU,'


)%

)%

6WDWXVB
%XV\B
(UURUB

72B
([HB









$[LV
,Q9HORFLW\
([HFXWH
%XV\
9HORFLW\ &RPPDQG$ERUWHG
(UURU
$FFHOHUDWLRQ
'HFHOHUDWLRQ
(UURU,'
-HUN
'LUHFWLRQ
&XUUHQW

(5525



(QDEOHB




W

%XV\B




W

6WDWXVB




W

(UURUB




W

([HB




W

72B
$FWXDO9HORFLW\




W

A technology object is enabled with "Enable_1= TRUE". The successful enable can be read
from "Status_1" at time ①. The axis will then move with an "MC_MoveVelocity" job (A2). The
velocity profile of the axis can be read from "Velocity Axis_1".
At time ② an error occurs in the technology object, which results in the disabling of the
technology object (alarm response: remove enable). The axis is braked to a standstill according
to the configuration in the drive. When the technology object is disabled, "Status_1" is reset.
Since the axis was not disabled using "Enable_1" = FALSE, the selected "StopMode" does not
apply. The cause of the error is corrected and the alarm is acknowledged at time ③.
Since "Enable_1" is still set, the technology object is enabled again. The successful enable can
be read from "Status_1". Finally, the technology object is disabled with "Enable_1" = FALSE.

Programación del PLC
Manual de programación y manejo, 11/2019

3533

Instrucciones
4.1 Instrucciones

MC_Reset V2
MC_Reset: Acknowledge alarms, restart technology object V2
Description
With the Motion Control instruction "MC_Reset", you acknowledge all technology alarms that
can be acknowledged in the user program. Acknowledgment also resets the "Error" and
"Warning" bits in the technology data block.
With the Motion Control instruction "MC_Reset" with "Restart" = TRUE, you start reinitialization
(restart) of technology objects. Upon restart of the technology object, the new configuration
data are applied in the technology data block.

Applies to
● Synchronous axis
● Positioning axis
● Speed axis
● External encoder

Requirements
● The cause of the error has been resolved for a pending technology alarm.
● For a restart, the technology object must be disabled.
("MC_Power.Status" = FALSE and "MC_Power.Busy" = FALSE)

Override response
● Parameter "Restart" = FALSE:
Processing of the "MC_Reset" instruction can be aborted by other Motion Control jobs. The
MC_Reset job does not abort any running Motion Control jobs.
● Parameter "Restart" = TRUE:
Processing of the "MC_Reset" instruction with parameter "Restart" = TRUE cannot be
aborted by any other Motion Control job.

Parameters
The following table shows the parameters of the "MC_Reset" Motion Control instruction:
Parameters

Declaration

Data type

Axis

InOut

TO_Axis

-

Technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

3534

Default value

Description

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declaration

Data type

Default value

Description

Restart

INPUT

BOOL

FALSE

TRUE

"Restart"
Reinitialization of the technology object and ack‐
nowledgment of pending technology alarms. The
technology object is reinitialized with the configured
start values.

FALSE Acknowledgment of queued technology alarms.
Done

OUTPUT

BOOL

FALSE

TRUE

Error has been acknowledged.

Busy

OUTPUT

BOOL

FALSE

TRUE

Job is running.

Comman‐
dAborted

OUTPUT

BOOL

FALSE

TRUE

The job was aborted by another job during execu‐
tion.

Error

OUTPUT

BOOL

FALSE

TRUE

An error occurred during execution of the job. The
job is rejected. The cause of the error can be found
in the "ErrorID" parameter.

ErrorID

OUTPUT

WORD

16#0000

Error ID for parameter "ErrorID"

Restart has been executed.

Acknowledging technology alarms
To acknowledge technology alarms, follow these steps:
1. Check the requirements indicated above.
2. Set parameter "Restart" = FALSE.
3. Start the acknowledgment of the error with a positive edge at parameter "Execute".
When the Done parameter shows the value TRUE, the error has been acknowledged.
Nota
Acknowledging with "Restart" = FALSE
If only the technology alarms are to be acknowledged, set "Restart" = FALSE. The technology
object cannot be used during a restart.

Restarting a technology object
To restart a technology object, follow these steps:
1. Check the requirements indicated above.
2. Set parameter "Restart" = TRUE.
3. Perform the restart with a positive edge at parameter "Execute".
When the "Done" parameter shows the value TRUE, the restart of the technology object is
complete.
Additional information regarding the restart can be found in the Restarting technology objects
section.

Programación del PLC
Manual de programación y manejo, 11/2019

3535

Instrucciones
4.1 Instrucciones

MC_Home V2
MC_Home: Home technology objects, set home position V2
Description
With the Motion Control instruction "MC_Home", you create the relationship between the
position in the technology object and the mechanical position. The actual position value in the
technology object is assigned to a homing mark at the same time. This homing mark represents
a known mechanical position.
Homing is performed according to the mode selected with the "Mode" parameter and the
configuration under "Technology object > Configuration > Extended parameters > Homing".
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control has
been standardized within the framework of technology version V2.0. This results in a new
assignment of the parameter values for the "MC_Home.Mode" parameter. A comparison of the
"MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is available in the section
Version overview.
The preset values under "Technology object > Configuration > Extended parameters >
Dynamic default values" are used for the dynamic values Acceleration, Deceleration and Jerk.

Applies to
● Synchronous axis
● Positioning axis
● External encoder
The following table shows which modes are possible with each of the technology objects:
Operating mode

Active homing

Positioning axis/
Positioning axis/
synchronous axis
synchronous axis
with incremental en‐ with absolute enco‐
coder
der

External incremen‐
tal encoder

External absolute
encoder

X

-

-

-

X

-

X

-

X

X

X

X

X

X

X

X

-

X

-

X

("Mode" = 3, 5)
Passive homing
("Mode" = 2, 8, 10)
Set actual position
("Mode" = 0)
Relative shift of the actual position
("Mode" = 1)
Homing absolute encoder
("Mode" = 6, 7)

3536

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Requirements
● The technology object has been configured correctly.
● "Mode" = 2, 3, 5, 8, 10
The technology object must be enabled.
● Mode" = 0, 1, 6, 7, 8
The encoder values must be valid. (<TO>.StatusSensor[n].State = 2)

Override response
● An MC_Home job for passive homing is aborted by:
– Disabling the technology object with "MC_Power.Enable" = FALSE
– "MC_Home" job with parameter "Mode" = 3, 5, 9
● An "MC_Home" job for passive homing does not abort any other Motion Control jobs.
● An "MC_Home" job for active homing is aborted by:
– Disabling the technology object with "MC_Power.Enable" = FALSE
– "MC_Home" command "Mode" = 3, 5
– "MC_Halt" command
– "MC_MoveAbsolute" command
– "MC_MoveRelative" command
– "MC_MoveVelocity" command
– "MC_MoveJog" command
– "MC_GearIn" command
● An "MC_Home" job for active homing aborts the following active Motion Control jobs.
– "MC_Home" job with parameter "Mode" = 3, 5, 8, 10
– "MC_Halt" command
– "MC_MoveAbsolute" command
– "MC_MoveRelative" command
– "MC_MoveVelocity" command
– "MC_MoveJog" command
– "MC_GearIn" command
– "MC_MoveSuperimposed" command

Parameters
The following table shows the parameters of the "MC_Home" Motion Control instruction:
Parameters

Declaration

Data type

Default value

Description

Axis

InOut

TO_Axis

-

Technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

Programación del PLC
Manual de programación y manejo, 11/2019

3537

Instrucciones
4.1 Instrucciones
Parameters

Declaration

Data type

Default value

Description

Position

INPUT

LREAL

0.0

The specified value is used according to the selected
"Mode".

3538

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declaration

Data type

Default value

Description

Mode

INPUT

INT

0

Operating mode
0

Direct homing (absolute)
The current position of the technology object
is set to the value of parameter "Position".

1

Direct homing (relative)
The current position of the technology object
is shifted by the value of parameter "Posi‐
tion".

2

Passive homing
(without reset)
Functions like "Mode" 8, with the difference
that the "homed" status is not reset when the
function is enabled.

3

Active homing
The TO positioning axis/synchronous axis
performs a homing movement according to
the configuration.
After the completion of the movement, the
axis is positioned at the value of the "Posi‐
tion" parameter.

4

Reserved

5

Active homing
("Position" parameter has no effect)
The TO positioning axis/synchronous axis
performs a homing movement according to
the configuration.
After completion of the movement, the axis
is positioned at the home position configured
under "Technology object > Configuration >
Extended parameters > Homing > Active ho‐
ming".
(<TO>.Homing.HomePosition)

6

Absolute encoder adjustment (relative)
The current position is shifted by the value of
parameter "Position".
The calculated absolute value offset is sto‐
red retentively in the CPU.
(<TO>.StatusSensor[n].
AbsEncoderOffset)

7

Absolute encoder adjustment (absolute)
The current position is set to the value of
parameter "Position".
The calculated absolute value offset is sto‐
red retentively in the CPU.
(<TO>.StatusSensor[n].
AbsEncoderOffset)

8

Programación del PLC
Manual de programación y manejo, 11/2019

Passive homing

3539

Instrucciones
4.1 Instrucciones
Parameters

Declaration

Data type

Default value

Description
When the homing mark is detected, the ac‐
tual value is set to the value of the "Position"
parameter.
9

Abort passive homing
An active job for passive homing is aborted.

10

Passive homing
("Position" parameter has no effect)
When the homing mark is detected, the ac‐
tual value is set to the home position confi‐
gured under "Technology object > Configu‐
ration > Extended parameters > Homing >
Passive homing".
(<TO>.Homing.HomePosition)

Done

OUTPUT

BOOL

FALSE

TRUE

Job is completed.

Busy

OUTPUT

BOOL

FALSE

TRUE

Job is running.

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

The job was aborted by another job during
execution.

Error

OUTPUT

BOOL

FALSE

TRUE

An error occurred during execution of the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" parame‐
ter.

ErrorID

OUTPUT

WORD

16#0000

Error ID for parameter "ErrorID"

Resetting the "Homed" status
The "Homed" status of a technology object is reset under the following conditions
(<TO>.StatusWord.X5 (HomingDone)):
● Technology objects with incremental actual values:
– Starting an "MC_Home" job with "Mode" = 3, 5, 8, 10
(After successful completion of the homing operation, the "Homed" status is reset.)
– Error in the encoder system, or encoder failure
– Restart of the technology object
– After POWER OFF -> POWER ON of the CPU
– Memory reset
– Modification of the encoder configuration
● Technology objects with absolute actual values:
– Error in sensor system/encoder failure
– Replacement of the CPU
– Modification of the encoder configuration
– Restoration of the CPU factory settings
– Transfer of a different project into the controller

3540

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Homing a technology object with "Mode" = 1..8, 10
To home a technology object, follow these steps:
1. Check the requirements indicated above.
2. Specify the desired homing function in the "Mode" parameter.
3. Initialize the necessary parameters with values, and start the homing operation with a
positive edge at the "Execute" parameter.
When the "Done" parameter shows the value TRUE, the "MC_Home" job has been completed
according to the selected "Mode". The "Homed" status of the technology object is indicated
under "Technology object > Diagnostics > Status and error bits > Motion status > Homed"
(<TO>.StatusWord.X5 (HomingDone)).

Abort of a passive homing process with "Mode" = 9
With "Mode" = 9, the technology object is not homed. When an active "MC_Home" job for
passive homing ("Mode" = 2, 8, 10) is overridden by another "MC_Home" job with "Mode" = 9,
the running job is aborted with parameter "CommandAborted" = TRUE. The overriding job with
"Mode" = 9 signals successful execution with parameter "Done" = TRUE.

Additional information
An option for the evaluation of the individual status bits can be found in the Evaluating
StatusWord, ErrorWord and WarningWord section.

MC_Halt V2
MC_Halt: Halt axis V2
Description
With the Motion Control instruction "MC_Halt", you brake an axis until it comes to a standstill.
You define the dynamic behavior of the braking operation with parameters "Jerk" and
"Deceleration".

Applies to
● Synchronous axis
● Positioning axis
● Speed axis

Requirements
● The technology object has been configured correctly.
● The technology object has been enabled.

Programación del PLC
Manual de programación y manejo, 11/2019

3541

Instrucciones
4.1 Instrucciones

Override response
The "MC_Halt" job is aborted by:
● Disabling the axis with "MC_Power.Enable" = FALSE
● "MC_Home" command "Mode" = 3, 5
● "MC_Halt" command
● "MC_MoveAbsolute" command
● "MC_MoveRelative" command
● "MC_MoveVelocity" command
● "MC_MoveJog" command
● "MC_GearIn" command
The start of an "MC_Halt" job aborts the following active Motion Control jobs:
● "MC_Home" command "Mode" = 3, 5
● "MC_Halt" command
● "MC_MoveAbsolute" command
● "MC_MoveRelative" command
● "MC_MoveVelocity" command
● "MC_MoveJog" command
● "MC_GearIn" command
● "MC_MoveSuperimposed" command

Parameters
The following table shows the parameters of the "MC_Halt" Motion Control instruction:
Parameters

Declaration

Data type

Default value

Description

Axis

InOut

Execute

INPUT

TO_SpeedAxis

-

Technology object

BOOL

FALSE

Start job with a positive edge

Deceleration

INPUT

LREAL

-1.0

Deceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The deceleration configured in "Techno‐
logy object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

3542

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declaration

Data type

Default value

Description

Jerk

INPUT

LREAL

-1.0

Jerk
Value > 0.0: Constant-acceleration velocity profile;
the specified jerk is used
Value = 0.0: Trapezoid velocity profile
Value < 0.0: The jerk configured in "Technology object
> Configuration > Extended parameters > Dynamic
defaults" is used.
(<TO>.DynamicDefaults.Jerk)

Done

OUTPUT

BOOL

FALSE

TRUE

Zero velocity reached

Busy

OUTPUT

BOOL

FALSE

TRUE

Job is running.

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

The job was aborted by another job during
execution.

Error

OUTPUT

BOOL

FALSE

TRUE

An error occurred during execution of the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" parame‐
ter.

ErrorID

OUTPUT

WORD

16#0000

Error ID for parameter "ErrorID"

Braking an axis with "MC_Halt"
Proceed as follows to decelerate an axis to a standstill:
1. Check the requirements indicated above.
2. Supply the parameters "Deceleration" and "Jerk" with the desired values.
3. Start the "MC_Halt" job with a positive edge at parameter "Execute".
The current motion state is indicated in "Busy", "Done" and "Error". The standstill of the axis is
indicated under "Technology object > Diagnostics > Status and error bits > Motion status >
Standstill" (<TO>.StatusWord.X7 (Standstill)).

Additional information
An option for the evaluation of the individual status bits can be found in the Evaluating
StatusWord, ErrorWord and WarningWord section.

Programación del PLC
Manual de programación y manejo, 11/2019

3543

Instrucciones
4.1 Instrucciones

MC_Halt: Function chart V2
Function chart: Stopping an axis and the overriding job characteristics
$

$
0&B0RYH9HORFLW\
72B
([HB







$[LV
,Q9HORFLW\
%XV\
([HFXWH
9HORFLW\ &RPPDQG$ERUWHG
$FFHOHUDWLRQ
(UURU
'HFHOHUDWLRQ
(UURU,'
-HUN
'LUHFWLRQ
&XUUHQW


)%

0&B+DOW
,Q9HOB
%XV\B
$ERUWB

72B
([HB



$[LV
'RQH
%XV\
([HFXWH
'HFHOHUDWLRQ &RPPDQG$ERUWHG
(UURU
-HUN
(UURU,'

'RQHB
%XV\B
$ERUWB



,Q9HOB






W

%XV\B




W

$ERUWB




W

([HB

)%

W

'RQHB






W

%XV\B




W

$ERUWB




W

([HB

W


72B
9HORFLW\



W

$
Section

$
Section

%

3544

%

An axis is moved with an "MC_MoveVelocity" job (A1). When the velocity setpoint 50.0 is reached, this is signaled
via "InVel_1". At time ①, the "MC_MoveVelocity" job is overridden by an "MC_Halt" job (A2). The job abort is
signaled via "Abort_1". The axis is braked to a standstill. Successful completion of the "MC_Halt" job is signaled
via "Done_2".
The axis is moved with an "MC_MoveVelocity" job (A1). When the velocity setpoint 50.0 is reached, this is signaled
via "InVel_1". Next the "MC_MoveVelocity" job is overridden by an "MC_Halt" job (A2). The job abort is signaled
via "Abort_1". During the braking process the "MC_Halt" job is overridden at time ② by an "MC_MoveVelocity"
job (A1). The job abort is signaled via "Abort_2". When the velocity setpoint 50.0 is reached, this is signaled via
"InVel_1". The axis is then moved with constant velocity.

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_MoveAbsolute V2
MC_MoveAbsolute: Absolute positioning of axis V2
Description
With the Motion Control instruction "MC_MoveAbsolute", you can move an axis to an absolute
position.
You define the dynamic behavior of the motion with parameters "Velocity", "Jerk",
"Acceleration" and "Deceleration".

Applies to
● Synchronous axis
● Positioning axis

Requirements
● The technology object has been configured correctly.
● The technology object has been enabled.
● The technology object is homed.

Override response
The "MC_MoveAbsolute" job is aborted by:
● Disabling the axis with "MC_Power.Enable" = FALSE
● "MC_Home" command "Mode" = 3, 5
● "MC_Halt" command
● "MC_MoveAbsolute" command
● "MC_MoveRelative" command
● "MC_MoveVelocity" command
● "MC_MoveJog" command
● "MC_GearIn" command
The start of an "MC_MoveAbsolute" job aborts the following active Motion Control jobs:
● "MC_Home" command "Mode" = 3, 5
● "MC_Halt" command
● "MC_MoveAbsolute" command
● "MC_MoveRelative" command
● "MC_MoveVelocity" command
● "MC_MoveJog" command

Programación del PLC
Manual de programación y manejo, 11/2019

3545

Instrucciones
4.1 Instrucciones
● "MC_GearIn" command
● "MC_MoveSuperimposed" command

Parameters
The following table shows the parameters of the "MC_MoveAbsolute" Motion Control
instruction:
Parameters

Declaration

Data type

Default value

Description

Axis

InOut

TO_Positionin‐
gAxis

-

Technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

Position

INPUT

REAL

0.0

Absolute target position

Velocity

INPUT

LREAL

-1.0

Velocity setpoint for the positioning
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The velocity configured in "Technology
object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Velocity)

Acceleration

INPUT

LREAL

-1.0

Acceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The acceleration configured in "Techno‐
logy object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The deceleration configured in "Techno‐
logy object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk
Value > 0.0: Constant-acceleration velocity profile;
the specified jerk is used
Value = 0.0: Trapezoid velocity profile
Value < 0.0: The jerk configured in "Technology object
> Configuration > Extended parameters > Dynamic
defaults" is used.
(<TO>.DynamicDefaults.Jerk)

3546

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declaration

Data type

Default value

Description

Direction

INPUT

INT

1

Direction of rotation of the axis
Is only evaluated with "modulo" enabled.
"Technology object > Configuration > Basic parame‐
ters > Enable modulo
1

Positive direction of rotation

2

Negative direction of rotation

3

Shortest path

Done

OUTPUT

BOOL

FALSE

TRUE

Target position reached.

Busy

OUTPUT

BOOL

FALSE

TRUE

Job is running.

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

The job was aborted by another job during
execution.

Error

OUTPUT

BOOL

FALSE

TRUE

An error occurred during execution of the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" parame‐
ter.

ErrorID

OUTPUT

WORD

16#0000

Error ID for parameter "ErrorID"

Moving an axis to an absolute position
Proceed as follows to move an axis to an absolute position:
1. Check the requirements indicated above.
2. Specify the desired target position in the "Position" parameter.
3. Start the "MC_MoveAbsolute" job with a positive edge at parameter "Execute".
The current motion state is indicated in "Busy", "Done" and "Error".

Programación del PLC
Manual de programación y manejo, 11/2019

3547

Instrucciones
4.1 Instrucciones

MC_MoveAbsolute: Function chart V2
Function chart: Absolute positioning of an axis, and the response to an overriding job
$

$

0&B0RYH$EVROXWH

0&B0RYH$EVROXWH
72B
([HB







'RQH
$[LV
%XV\
([HFXWH
3RVLWLRQ &RPPDQG$ERUWHG
9HORFLW\
(UURU
$FFHOHUDWLRQ
(UURU,'
'HFHOHUDWLRQ
-HUN
'LUHFWLRQ


)%
([HB
'RQHB
%XV\B
$ERUWB

)%
([HB
'RQHB

'RQHB
%XV\B
$ERUWB

72B
([HB







$[LV
'RQH
%XV\
([HFXWH
3RVLWLRQ &RPPDQG$ERUWHG
(UURU
9HORFLW\
$FFHOHUDWLRQ
(UURU,'
'HFHOHUDWLRQ
-HUN
'LUHFWLRQ

'RQHB
%XV\B







W




W



W


W




W





W


%XV\B

W






72B
9HORFLW\ 

W



72B
3RVLWLRQ 

W

$

3548

%

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Section

$
Section

%

An axis is moved to absolute position 1000.0 with an "MC_MoveAbsolute" job (A1). When the axis reaches the
target position, this is signaled at time ① via "Done_1". At this time ①, another "MC_MoveAbsolute" job (A2) with
target position 1500.0 is started. When the axis reaches the target position 1500.0, this is signaled via "Done_2".
Since "Exe_2" was previously reset, "Done_2" is applied only to one cycle.
An active "MC_MoveAbsolute" job (A1) is overridden at time ② by another "MC_MoveAbsolute" job (A2). The
abort is signaled via "Abort_1". The axis is braked to the changed velocity and moved to the new target position
1500.0. When the new target position is reached, this is signaled via "Done_2".

MC_MoveRelative V2
MC_MoveRelative: Relative positioning of axis V2
Description
With the Motion Control instruction "MC_MoveRelative", you move an axis relative to its
position when execution of the job began.
You define the dynamic behavior of the motion with parameters "Velocity", "Jerk",
"Acceleration" and "Deceleration".

Applies to
● Synchronous axis
● Positioning axis

Requirements
● The technology object has been configured correctly.
● The technology object has been enabled.

Override response
The "MC_MoveRelative" job is aborted by:
● Disabling the axis with "MC_Power.Enable" = FALSE
● "MC_Home" command "Mode" = 3, 5
● "MC_Halt" command
● "MC_MoveAbsolute" command
● "MC_MoveRelative" command
● "MC_MoveVelocity" command
● "MC_MoveJog" command
● "MC_GearIn" command

Programación del PLC
Manual de programación y manejo, 11/2019

3549

Instrucciones
4.1 Instrucciones
The start of an "MC_MoveRelative" job aborts the following active Motion Control jobs:
● "MC_Home" command "Mode" = 3, 5
● "MC_Halt" command
● "MC_MoveAbsolute" command
● "MC_MoveRelative" command
● "MC_MoveVelocity" command
● "MC_MoveJog" command
● "MC_GearIn" command
● "MC_MoveSuperimposed" command

Parameters
The following table shows the parameters of the "MC_MoveRelative" Motion Control
instruction:
Parameters

Declaration

Data type

Default value

Description

Axis

InOut

TO_Positionin‐
gAxis

-

Technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

Distance

INPUT

LREAL

0.0

Distance for the positioning process
(negative or positive)

Velocity

INPUT

LREAL

-1.0

Velocity setpoint for the positioning
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The velocity configured in "Technology
object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Velocity)

Acceleration

INPUT

LREAL

-1.0

Acceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The acceleration configured in "Techno‐
logy object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The deceleration configured in "Techno‐
logy object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

3550

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declaration

Data type

Default value

Description

Jerk

INPUT

LREAL

-1.0

Jerk
Value > 0.0: Constant-acceleration velocity profile;
the specified jerk is used
Value = 0.0: Trapezoid velocity profile
Value < 0.0: The jerk configured in "Technology object
> Configuration > Extended parameters > Dynamic
defaults" is used.
(<TO>.DynamicDefaults.Jerk)

Done

OUTPUT

BOOL

FALSE

TRUE

Target position reached

Busy

OUTPUT

BOOL

FALSE

TRUE

Job is running.

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

The job was aborted by another job during
execution.

Error

OUTPUT

BOOL

FALSE

TRUE

An error occurred during execution of the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" parame‐
ter.

ErrorID

OUTPUT

WORD

16#0000

Error ID for parameter "ErrorID"

Moving an axis relative to the starting position
Proceed as follows to move an axis relative to the starting position:
1. Check the requirements indicated above.
2. Specify distance to be moved in the "Distance" parameter.
3. Start the "MC_MoveRelative" job with a positive edge at parameter "Execute".
The current motion state is indicated in "Busy", "Done" and "Error".

Programación del PLC
Manual de programación y manejo, 11/2019

3551

Instrucciones
4.1 Instrucciones

MC_MoveRelative: Function chart V2
Function chart: Relative positioning of an axis, and the overriding job characteristics
$

$

0&B0RYH5HODWLYH
72B
([HB






0&B0RYH5HODWLYH

'RQH
$[LV
([HFXWH
%XV\
'LVWDQFH &RPPDQG$ERUWHG
(UURU
9HORFLW\
$FFHOHUDWLRQ
(UURU,'
'HFHOHUDWLRQ
-HUN

'RQHB
%XV\B
$ERUWB


)%
([HB
%XV\B
'RQHB
$ERUWB
)%
([HB
%XV\B
'RQHB

72B
9HORFLW\

'RQHB
%XV\B



W




W




W




W






W



W


W





W










W

$

3552

$[LV
'RQH
([HFXWH
%XV\
'LVWDQFH &RPPDQG$ERUWHG
(UURU
9HORFLW\
(UURU,'
$FFHOHUDWLRQ
'HFHOHUDWLRQ
-HUN





72B
3RVLWLRQ

72B
([HB






%

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Section

$
Section

%

The axis is moved by an "MC_MoveRelative" job (A1) by the distance ("Distance") 1000.0 (the starting position
here is 0.0). When the axis reaches the target position, this is signaled at time ① via "Done_1". At this time ①,
another "MC_MoveRelative" job (A2) with distance 500.0 is started. When the axis reaches the new target posi‐
tion, this is signaled via "Done_2". Since "Exe_2" was previously reset, "Done_2" is applied only to one cycle.
An active "MC_MoveRelative" job (A1) is overridden by another "MC_MoveRelative" job (A2). The abort is sig‐
naled at time ② via "Abort_1". The axis is then moved at the new velocity by the distance ("Distance") 500.0.
When the new target position is reached, this is signaled via "Done_2".

MC_MoveVelocity V2
MC_MoveVelocity: Move axis at set velocity/speed V2
Description
With the Motion Control instruction "MC_MoveVelocity", you move an axis at constant velocity/
speed.
You define the dynamic behavior of the motion with parameters"Velocity", "Jerk",
"Acceleration" and "Deceleration".
● Positioning axis/synchronous axis:
A velocity is specified in the "Velocity" parameter.
● Speed axis:
A speed is specified in the "Velocity" parameter.

Applies to
● Synchronous axis
● Positioning axis
● Speed axis

Requirements
● The technology object has been configured correctly.
● The technology object has been enabled.

Override response
The "MC_MoveVelocity" is canceled by:
● Disabling the axis with "MC_Power.Enable" = FALSE
● "MC_Home" command "Mode" = 3, 5
● "MC_Halt" command
● "MC_MoveAbsolute" command
● "MC_MoveRelative" command

Programación del PLC
Manual de programación y manejo, 11/2019

3553

Instrucciones
4.1 Instrucciones
● "MC_MoveVelocity" command
● "MC_MoveJog" command
● "MC_GearIn" command
The start of an "MC_MoveVelocity" job aborts the following active Motion Control jobs:
● "MC_Home" command "Mode" = 3, 5
● "MC_Halt" command
● "MC_MoveAbsolute" command
● "MC_MoveRelative" command
● "MC_MoveVelocity" command
● "MC_MoveJog" command
● "MC_GearIn" command
● "MC_MoveSuperimposed" command

Parameters
The following table shows the parameters of the "MC_MoveVelocity" Motion Control instruction:
Parameters

Declaration

Data type

Default value

Description

Axis

InOut

TO_SpeedAxis

-

Technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

Velocity

INPUT

LREAL

100.0

Velocity/speed setpoint for the motion process

Acceleration

INPUT

LREAL

-1.0

("Velocity" = 0.0 is permitted)
Acceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The acceleration configured in "Techno‐
logy object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)
Deceleration

INPUT

LREAL

-1.0

Deceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The deceleration configured in "Techno‐
logy object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

3554

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declaration

Data type

Default value

Description

Jerk

INPUT

LREAL

-1.0

Jerk
Value > 0.0: Constant-acceleration velocity profile;
the specified jerk is used.
Value = 0.0: Trapezoid velocity profile
Value < 0.0: The jerk configured in "Technology object
> Configuration > Extended parameters > Dynamic
defaults" is used.
(<TO>.DynamicDefaults.Jerk)

Direction

INPUT

INT

0

Direction of rotation of the axis
0

The sign of the velocity specified at the "Ve‐
locity" parameter defines the direction of ro‐
tation.

1

Positive direction of rotation
Value of "Velocity" is used.

2

Negative direction of rotation
Value of "Velocity" is used.

Current

INPUT

BOOL

FALSE

Maintain current velocity
FALSE Deactivated
The values of parameters "Velocity" and "Di‐
rection" are taken into account.
TRUE

activated
The values at the parameters "Velocity" and
"Direction" are not taken into account. The
current velocity and direction at function
start are retained.
When the axis resumes motion at the velo‐
city that was current at function start, the "In‐
Velocity" parameter returns the value TRUE.

InVelocity

OUTPUT

BOOL

FALSE

TRUE

The velocity setpoint / speed setpoint was
reached and will be maintained.

Busy

OUTPUT

BOOL

FALSE

TRUE

Job is running.

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

The job was aborted by another job during
execution.

Error

OUTPUT

BOOL

FALSE

TRUE

An error occurred during execution of the
job. The cause of the error can be found in
the "ErrorID" parameter.

ErrorID

OUTPUT

WORD

16#0000

Error ID for parameter "ErrorID"

Behavior with velocity setpoint / speed setpoint zero ("Velocity" = 0.0)
An "MC_MoveVelocity" job with "Velocity" = 0.0 stops the axis with the configured deceleration.
When the velocity setpoint / speed setpoint zero is reached, the parameter "InVelocity" will
indicate the value TRUE.
Under "Technology object > Diagnostics > Status and error bits > Motion status", "constant
velocity" and "standstill" will be displayed (<TO>.StatusWord.X12 (ConstantVelocity);
<TO>.StatusWord.X7 (Standstill)).

Programación del PLC
Manual de programación y manejo, 11/2019

3555

Instrucciones
4.1 Instrucciones
The parameters "InVelocity" and "Busy" show the value TRUE until the "MC_MoveVelocity" job
is overridden by another Motion Control job.

Moving an axis with constant velocity / speed
Proceed as follows to move an axis with constant velocity / speed:
1. Check the requirements indicated above.
2. At the parameter "Velocity", specify the velocity / speed, with which the axis should be
moved.
3. Start the "MC_MoveVelocity" job with a positive edge at parameter "Execute".
The current motion state is indicated in "Busy", "InVelocity" and "Error".
If the "InVelocity" parameter shows the value TRUE, then the velocity setpoint / speed setpoint
was reached. The axis continues moving at this constant velocity. The parameters "InVelocity"
and "Busy" show the value TRUE until the "MC_MoveVelocity" job is overridden by another
Motion Control job.
Nota
Response to a change in the override
If the velocity / speed is influenced during constant motion by a change in the override
(<TO>.Override.Velocity), the "InVelocity" parameter is reset during the acceleration or
deceleration. When the newly calculated velocity / speed is reached ("Velocity" × "Override"
%), then "InVelocity" is reset.

Additional information
An option for the evaluation of the individual status bits can be found in the Evaluating
StatusWord, ErrorWord and WarningWord section.

3556

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_MoveVelocity: Function chart V2
Function chart: Moving an axis with velocity specification, and the response to an overriding job
$

$

0&B0RYH9HORFLW\

0&B0RYH9HORFLW\
72B
([HB







$[LV
,Q9HORFLW\
([HFXWH
%XV\
9HORFLW\ &RPPDQG$ERUWHG
$FFHOHUDWLRQ
(UURU
(UURU,'
'HFHOHUDWLRQ
-HUN
'LUHFWLRQ
&XUUHQW





,Q9HOB
%XV\B
$ERUWB

72B
([HB







,Q9HORFLW\
$[LV
([HFXWH
%XV\
9HORFLW\ &RPPDQG$ERUWHG
$FFHOHUDWLRQ
(UURU
'HFHOHUDWLRQ
(UURU,'
-HUN
'LUHFWLRQ
&XUUHQW

,Q9HOB
%XV\B
$ERUWB



)%


([HB 

W


%XV\B 

,Q9HOB 

$ERUWB 

W
W
W

)%


([HB 

%XV\B


W
W



,Q9HOB 
$ERUWB

W




W


72B
9HORFLW\



W

An "MC_MoveVelocity" job (A1) initiated via "Exe_1" accelerates the axis and signals at time ①
via "InVel_1" that the velocity setpoint 50.0 has been reached.
At time ②, the job is overridden by another "MC_MoveVelocity" job (A2). The abort is signaled
via "Abort_1". When the new velocity setpoint 15.0 is reached, this is signaled via "InVel_2".
The axis then continues moving at the constant velocity 15.0.
The running "MC_MoveVelocity" job (A2) is overridden by another "MC_MoveVelocity" job
(A1). The abort is signaled via "Abort_2". The axis is accelerated to the new velocity setpoint
50.0. Before the velocity setpoint is reached, the current "MC_MoveVelocity" job A1) is

Programación del PLC
Manual de programación y manejo, 11/2019

3557

Instrucciones
4.1 Instrucciones
overridden at time ③ by another "MC_MoveVelocity" job A2). The abort is signaled via
"Abort_1". When the new velocity setpoint 15.0 is reached, this is signaled via "InVel_2". The
axis then continues moving at the constant velocity 15.0.

MC_MoveJog V2
MC_MoveJog: Move axis in jog mode V2
Description
With the Motion Control instruction "MC_MoveJog", you move an axis in jog mode.
You define the dynamic behavior of the motion with parameters "Velocity", "Jerk",
"Acceleration" and "Deceleration".
● Positioning axis/synchronous axis:
A velocity is specified in the "Velocity" parameter.
● Speed axis:
A speed is specified in the "Velocity" parameter.

Applies to
● Synchronous axis
● Positioning axis
● Speed axis

Requirements
● The technology object has been configured correctly.
● The technology object has been enabled.

Override response
The "MC_MoveJog" job is aborted by:
● Disabling the axis with "MC_Power.Enable" = FALSE
● "MC_Home" command "Mode" = 3, 5
● "MC_Halt" command
● "MC_MoveAbsolute" command
● "MC_MoveRelative" command
● "MC_MoveVelocity" command
● "MC_MoveJog" command
● "MC_GearIn" command

3558

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Starting an "MC_MoveJog" job aborts the following active Motion Control jobs:
● "MC_Home" command "Mode" = 3, 5
● "MC_Halt" command
● "MC_MoveAbsolute" command
● "MC_MoveRelative" command
● "MC_MoveVelocity" command
● "MC_MoveJog" command
● "MC_GearIn" command
● "MC_MoveSuperimposed" command

Parameters
The following table shows the parameters of the Motion Control instruction "MC_MoveJog":
Parameters

Declaration

Data type

Default value

Description

Axis

InOut

TO_SpeedAxis

-

Technology object

JogForward

INPUT

BOOL

FALSE

As long as the parameter is TRUE, the axis moves in
the positive direction at the velocity specified in para‐
meter "Velocity".

JogBackward

INPUT

BOOL

FALSE

As long as the parameter is TRUE, the axis moves in
the negative direction at the velocity specified in pa‐
rameter "Velocity".

Velocity

INPUT

LREAL

100.0

Velocity setpoint / speed setpoint for the motion
Value > 0.0: The specified value is used.
Value < 0.0: The absolute value of the specified value
is used.
("Velocity" = 0.0 is permitted)

Acceleration

INPUT

LREAL

-1.0

Acceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The acceleration configured in "Techno‐
logy object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The deceleration configured in "Techno‐
logy object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Programación del PLC
Manual de programación y manejo, 11/2019

3559

Instrucciones
4.1 Instrucciones
Parameters

Declaration

Data type

Default value

Description

Jerk

INPUT

LREAL

-1.0

Jerk
Value > 0.0: Constant-acceleration velocity profile;
the specified jerk is used.
Value = 0.0: Trapezoid velocity profile
Value < 0.0: The jerk configured in "Technology object
> Configuration > Extended parameters > Dynamic
defaults" is used.
(<TO>.DynamicDefaults.Jerk)

InVelocity

OUTPUT

BOOL

FALSE

TRUE

The velocity setpoint / speed setpoint was
reached and will be maintained.

Busy

OUTPUT

BOOL

FALSE

TRUE

Job is running.

CommandAborted

OUTPUT

BOOL

FALSE

TRUE

The job was aborted by another job during
execution.

Error

OUTPUT

BOOL

FALSE

TRUE

An error occurred during execution of the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" parame‐
ter.

ErrorID

OUTPUT

WORD

16#0000

Error ID for parameter "ErrorID"

Behavior with velocity setpoint / speed setpoint zero ("Velocity" = 0.0)
An "MC_MoveJog" job with "Velocity" = 0.0 stops the axis with the configured deceleration.
When the velocity setpoint / speed setpoint zero is reached, the parameter "InVelocity" will
indicate the value TRUE.
Under "Technology object > Diagnostics > Status and error bits > Motion status", "constant
velocity" and "standstill" will be displayed (<TO>.StatusWord.X12 (ConstantVelocity);
<TO>.StatusWord.X7 (Standstill)).

Moving an axis in jog mode
Proceed as follows to move an axis in jog mode:
1. Check the requirements indicated above.
2. Move the axis in the positive direction with "JogForward", or in the negative direction with
"JogBackward".
The current motion state is indicated in "Busy", "InVelocity" and "Error".
Nota
Response to a change in the override
If the velocity / speed is influenced during constant motion by a change in the override
(<TO>.Override.Velocity), the "InVelocity" parameter is reset during the acceleration or
deceleration. When the newly calculated velocity is reached ("Velocity" × "Override" %), then
"InVelocity" is set again.

3560

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Additional information
An option for the evaluation of the individual status bits can be found in the Evaluating
StatusWord, ErrorWord and WarningWord section.

MC_MoveJog: Function chart V2
Function chart: Moving an axis in jog mode
$
0&B0RYH-RJ
72B
-RJB)
-RJB%
9HOB,QSXW




$[LV
,Q9HORFLW\
-RJ)RUZDUG
%XV\
-RJ%DFNZDUG &RPPDQG$ERUWHG
(UURU
9HORFLW\
$FFHOHUDWLRQ
(UURU,'
'HFHOHUDWLRQ
-HUN





,Q9HO
%XV\
(UURU



-RJB)




W

-RJB%




W

,Q9HO




W

%XV\




W

(UURU




W


9HOB,QSXW


W



72B9HORFLW\ 

W



The axis is moved in the negative direction in jog mode via "Jog_B". When the velocity setpoint
-50.0 is reached, this is signaled via "InVel" = TRUE. After "Jog_B" is reset, the axis is braked
and brought to a standstill. Then the axis is moved in the positive direction via "Jog_F". When
the velocity setpoint 50.0 is reached, this is signaled via "InVel" = TRUE.
At time ①, if "Jog_F" is set, the velocity setpoint is changed to 100.0 by means of "Vel_Input".
Alternatively, you can also change the velocity setpoint using the velocity override. "InVel" is

Programación del PLC
Manual de programación y manejo, 11/2019

3561

Instrucciones
4.1 Instrucciones
reset. Axis is being accelerated. When the new velocity setpoint 100.0 is reached, this is
signaled via "InVel" = TRUE.
If "Jog_F" is set, "Jog_B" is likewise set at time ②. If both "Jog_F" and "Jog_B" are set, then the
axis is braked with the last applicable deceleration. An error is indicated via "Error", and the
"ErrorID" of the error 16#8007 (incorrect direction specification) is output.
This error is resolved by resetting the two inputs "Jog_F" and "Jog_B".
During the braking ramp, "Jog_F" is set at time ③. The axis is accelerated to the last configured
velocity. When the velocity setpoint 100.0 is reached, this is signaled via "InVel" = TRUE.

MC_MoveSuperimposed V2
MC_MoveSuperimposed: Superimposed positioning of axes V2
Description
With the Motion Control instruction "MC_MoveSuperimposed", you start a relative positioning
motion that is superimposed on a active basic motion.
You define the dynamic behavior of the motion with parameters "VelocityDiff", "Jerk",
"Acceleration" and "Deceleration" . The dynamic values are added to the values of the basic
motion. The duration of the basic motion is not extended by a superimposed motion.
The dynamics of the total axis motion is the sum of the dynamic values of the basic motion and
the superimposed motion.
The behavior of the total motion depends on the type of basic motion:
● The basic motion is a single-axis motion:
– The maximum dynamics of the superimposed motion is the difference between the
current dynamic values of the basic motion and the dynamic limits.
– The entire motion is limited to the configured dynamic limits.
● The basic motion is a synchronous motion:
– The maximum dynamics of the superimposed motion is the difference between the
current dynamic values of the basic motion and the dynamic limits.
– The synchronous motion of the following axis is not limited to the dynamic limits of the
following axis.
– An "MC_MoveSuperimposed" job on a leading axis in synchronous operation affects the
leading axis and the following axis.
– An "MC_MoveSuperimposed" job on a following axis in synchronous operation only
affects the following axis.
It is always the dynamics of the total motion that is displayed in the technology data block and
in the TIA Portal.

3562

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Applies to
● Synchronous axis
● Positioning axis

Requirements
● The technology object has been configured correctly.
● The technology object has been enabled.

Override response
The "MC_MoveSuperimposed" job is aborted by:
● Disabling the axis with "MC_Power.Enable" = FALSE
● "MC_Home" command "Mode" = 3, 5
● "MC_Halt" command
● "MC_MoveAbsolute" command
● "MC_MoveRelative" command
● "MC_MoveVelocity" command
● "MC_MoveJog" command
● "MC_GearIn" command
● "MC_MoveSuperimposed" command
The start of an "MC_MoveSuperimposed" job aborts an active "MC_MoveSuperimposed" job.

Parameters
The following table shows the parameters of Motion Control instruction
"MC_MoveSuperimposed":
Parameters

Declara‐
tion

Data type

Default value Description

Axis

InOut

TO_PositioningAxis

-

Axis technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

Distance

INPUT

LREAL

0.0

Additional travel distance for the superimposing
positioning operation
(negative or positive)

VelocityDiff

INPUT

LREAL

-1.0

Maximum velocity deviation compared to the acti‐
ve motion
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The velocity configured in "Techno‐
logy object > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Velocity)

Programación del PLC
Manual de programación y manejo, 11/2019

3563

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default value Description

Acceleration

INPUT

LREAL

-1.0

Acceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The acceleration configured in "Tech‐
nology object > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The deceleration configured in "Tech‐
nology object > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk
Value > 0.0: Constant-acceleration velocity profile;
the specified jerk is used
Value = 0.0: Trapezoid velocity profile
Value < 0.0: The jerk configured in "Technology
object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Jerk)

Done

OUTPUT BOOL

FALSE

TRUE

Superimposed positioning complete

Busy

OUTPUT BOOL

FALSE

TRUE

Job is running.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

Error

OUTPUT BOOL

FALSE

TRUE

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

Starting superimposed positioning motion
To start a superimposed positioning motion with Motion Control instruction
"MC_MoveSuperimposed", follow these steps:
1. Check the requirements indicated above.
2. Specify the additional distance to be moved in the "Distance" parameter.
3. Start the "MC_MoveSuperimposed" job with a positive edge at parameter "Execute".
The current motion state is indicated in "Busy", "Done" and "Error".

3564

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

MC_MoveSuperimposed: Function chart V2
Function chart: Positioning axes overlapping
$

$

0&B0RYH5HODWLYH
72B
([HB






0&B0RYH6XSHULPSRVHG

'RQH
$[LV
([HFXWH
%XV\
'LVWDQFH &RPPDQG$ERUWHG
(UURU
9HORFLW\
$FFHOHUDWLRQ
(UURU,'
'HFHOHUDWLRQ
-HUN


([HB
%XV\B
'RQHB
)%
([HB
%XV\B
'RQHB
'LVWB,QSXW

72B
([HB
'LVWB,QSXW





$[LV
'RQH
([HFXWH
%XV\
'LVWDQFH &RPPDQG$ERUWHG
(UURU
9HORFLW\'LII
(UURU,'
$FFHOHUDWLRQ
'HFHOHUDWLRQ
-HUN

'RQHB
%XV\B



$
)%

'RQHB
%XV\B
$ERUWB

%




W




W




W





W



W






W
W


Y0&B0RYH5HODWLYH
Y0&B0RYH6XSHULPSRVHG 

W




72B9HORFLW\



W



72B3RVLWLRQ


Programación del PLC
Manual de programación y manejo, 11/2019

W

3565

Instrucciones
4.1 Instrucciones

Section

$
Section

%

Using "Exe_1", an "MC_MoveRelative" job with a distance of 50.0 is initiated. At time ①, using "Exe_2", an
MC_MoveSuperimposed job with a distance of 50.0 is initiated. The axis is moved with the added dynamic values
of both jobs by the distance 50 + 50 = 100.0. When the axis reaches the target position, this is signaled via
"Done_2".

Using "Exe_1", an "MC_MoveRelative" job with a distance of 50.0 is initiated. At time ②, using "Exe_2", a
MC_MoveSuperimposed job with a distance of -50.0 is initiated. The axis reverses and is moved with the added
dynamic values of both jobs by the distance 50.0 - 50.0 = 0.0. When the axis reaches the target position, this is
signaled via "Done_2".

Synchronous motion
MC_GearIn V2
MC_GearIn: Start relative gearing V2
Description
With the Motion Control instruction "MC_GearIn", you start relative gearing between a leading
axis and a following axis.
You define the dynamic behavior of the following axis during synchronization with parameters
"Jerk", "Acceleration" and "Deceleration" .
You specify the gear ratio as the relationship between two integers (numerator/denominator)
with the parameters "RatioNumerator" and "RatioDenominator". You can change the gear ratio
during operation by issuing a new "MC_GearIn" job. Transition processes are executed with the
specified dynamic values.
The numerator of the gear ratio is specified as positive or negative. This yields the following
behavior:
● Positive gear ratio:
The leading and following axes move in the same direction.
● Negative gear ratio:
The following axis rotates in the opposite direction of the leading axis.
You can start synchronous operation when the leading axis is at a standstill or when it is in
motion.
A position offset can occur between leading axis and following axis during synchronization.
This position offset depends on the start time of the "MC_GearIn" and the duration of the
synchronization process. The position offset is not compensated.

Applies to
● Synchronous axis

3566

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

Requirements
● The technology object has been configured correctly.
● The leading axis is a positioning axis or synchronous axis.
● The following axis is a synchronous axis.
● The leading axis is specified as possible leading axis in the configuration of the following
axis in "Technology object > Configuration > Leading value interconnections".
● The following axis is enabled.

Override response
The "MC_GearIn" job is aborted by:
● Disabling the following axis with "MC_Power.Enable" = FALSE
● "MC_Home" command "Mode" = 3, 5
● "MC_Halt" command
● "MC_MoveAbsolute" command
● "MC_MoveRelative" command
● "MC_MoveVelocity" command
● "MC_MoveJog" command
● "MC_GearIn" command
The start of an "MC_GearIn" job aborts the following active Motion Control jobs:
● "MC_Home" command "Mode" = 3, 5
● "MC_Halt" command
● "MC_MoveAbsolute" command
● "MC_MoveRelative" command
● "MC_MoveVelocity" command
● "MC_MoveJog" command
● "MC_GearIn" command
● "MC_MoveSuperimposed" command
Disabling the leading axis with "MC_Power.Enable" = FALSE does not abort synchronous
operation. The following axis follows the leading axis even during the braking ramp and after
the leading axis is enabled again.

Programación del PLC
Manual de programación y manejo, 11/2019

3567

Instrucciones
4.1 Instrucciones

Parameters
The following table shows the parameters of Motion Control instruction "MC_GearIn":
Parameters

Declara‐
tion

Data type

Default value Description

Master

InOut

TO_PositioningAxis

-

Leading axis technology object

Slave

InOut

TO_SynchronousAxis

-

Following axis technology object

Execute

INPUT

BOOL

FALSE

Start job with a positive edge

RatioNumerator

INPUT

DINT

1

Gear ratio numerator
Permitted integer values:
-2147483648 to 2147483648
(value 0 not permitted)

RatioDenominator

INPUT

DINT

1

Gear ratio denominator
Permitted integer values:
1 to 2147483648

Acceleration

INPUT

LREAL

-1.0

Acceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The acceleration configured in "Tech‐
nology object > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Acceleration)

Deceleration

INPUT

LREAL

-1.0

Deceleration
Value > 0.0: The specified value is used.
Value = 0.0: Not permitted
Value < 0.0: The deceleration configured in "Tech‐
nology object > Configuration > Extended parame‐
ters > Dynamic defaults" is used.
(<TO>.DynamicDefaults.Deceleration)

Jerk

INPUT

LREAL

-1.0

Jerk
Value > 0.0: Constant-acceleration velocity profile;
the specified jerk is used
Value = 0.0: Trapezoid velocity profile
Value < 0.0: The jerk configured in "Technology
object > Configuration > Extended parameters >
Dynamic defaults" is used.
(<TO>.DynamicDefaults.Jerk)

InGear

OUTPUT BOOL

FALSE

TRUE

Synchronous operation reached
The following axis is synchronized and
moves synchronously to the leading
axis.

Busy

OUTPUT BOOL

FALSE

TRUE

Job is running.

CommandAborted

OUTPUT BOOL

FALSE

TRUE

The job was aborted by another job du‐
ring execution.

3568

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones
Parameters

Declara‐
tion

Data type

Default value Description

Error

OUTPUT BOOL

FALSE

TRUE

ErrorID

OUTPUT WORD

0

Error ID for parameter "ErrorID"

An error occurred while processing the
job. The job is rejected. The cause of the
error can be found in the "ErrorID" para‐
meter.

Starting synchronous operation
To start synchronous operation with the Motion Control instruction "MC_GearIn", follow these
steps:
1. Check the requirements indicated above.
2. Specify the leading axis, the following axis and the gear ratio at the corresponding
parameters.
3. Start the "MC_GearIn" job with a positive edge at parameter "Execute".
The following axis is synchronized to the leading value of the leading axis. If the "InGear"
parameter shows the value TRUE, the following axis is synchronized and moves
synchronously to the leading axis. The parameters "InGear" and "Busy" show the value TRUE
until the "MC_GearIn" job is overridden by another Motion Control job.

Programación del PLC
Manual de programación y manejo, 11/2019

3569

Instrucciones
4.1 Instrucciones

MC_GearIn: Function chart V2
Function chart: Synchronizing and switching the leading value
$

$

0&B*HDU,Q

0&B*HDU,Q
72B0DVWHUB
72B6ODYH
([HB






0DVWHU
,Q*HDU
6ODYH
%XV\
([HFXWH &RPPDQG$ERUWHG
5DWLR1XPHUDWRU
(UURU
(UURU,'
5DWLR'HQRPLQDWRU
$FFHOHUDWLRQ
'HFHOHUDWLRQ
-HUN



,Q*HDUB 72B0DVWHUB
%XV\B
72B6ODYH
$ERUWB
([HB








,Q*HDU
0DVWHU
6ODYH
%XV\
([HFXWH &RPPDQG$ERUWHG
5DWLR1XPHUDWRU
(UURU
5DWLR'HQRPLQDWRU
(UURU,'
$FFHOHUDWLRQ
'HFHOHUDWLRQ
-HUN

,Q*HDUB
%XV\B



)%


([HB 

W


%XV\B 

,Q*HDUB 

$ERUWB 

W
W
W

)%


([HB 

%XV\B


W
W



,Q*HDUB 

W

72B0DVWHUB
9HORFLW\
72B6ODYH
9HORFLW\
72B0DVWHUB
9HORFLW\

W

Using "Exe_1", an "MC_GearIn" job (A1) is initiated. The following axis (TO_Slave) is
synchronized to the leading axis (TO_Master_1). "InGear_1" signals at time ① that the
following axis is synchronized and moves synchronously to the leading axis.
At time ②, synchronous operation is overridden by another "MC_GearIn" job (A2). The abort
is signaled via "Abort_1". The following axis is synchronized to the new leading axis
(TO_Master_2). "InGear_2" signals at time ③ that the following axis is synchronized and
moves synchronously to the leading axis.

3570

Programación del PLC
Manual de programación y manejo, 11/2019

Instrucciones
4.1 Instrucciones

S7-1500 Motion Control V1
MC_Power V1
MC_Power: Enable, disable technology object V1
Description
With the Motion Control instruction "MC_Power", a technology object is enabled or disabled.

Applies to
● Positioning axis
● Speed axis
● External encoder

Requirements
● The technology object has been configured correctly.

Override response
● An "MC_Power" job cannot be aborted by any other Motion Control job.
● An "MC_Power" job with parameter "Enable" = TRUE enables a technology object but does
not thereby abort any other Motion Control instructions.
● Disabling the technology object (parameter "Enable" = FALSE) aborts all Motion Control
jobs on the corresponding technology object in accordance with the selected "StopMode".
This process cannot be canceled by the user.

Parameters
The following table shows the parameters of the "MC_POWER" Motion Control instruction:
Parameter

Declaration

Data type

Default value

Description

Axis

InOut

TO_Axis

-

Technology object

Enable

INPUT

BOOL

FALSE

TRUE

The technology object is enabled.

FALSE The technology object is disabled.
All current jobs at the technology object are aborted
in accordance with the configured "StopMode".

Programación del PLC
Manual de programación y manejo, 11/2019

3571

Instrucciones
4.1 Instrucciones
Parameter

Declaration

Data type

Default value

Description

StopMode

INPUT

INT

0

Not applicable to the technology object external encoder
If you disable a technology object with a negative edge at
parameter "Enable", the axis decelerates in accordance with
the selected "StopMode".
0

Emergency stop
When the technology o