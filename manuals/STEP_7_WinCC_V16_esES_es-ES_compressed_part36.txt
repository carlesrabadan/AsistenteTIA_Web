uite

Principio EPS
Según el principio EPS, el procesamiento de los datos de energía puede dividirse en las fases
de "Entrada", "Procesamiento" y "Salida":
● Entrada: puesta a disposición de los datos de entrada procedentes de mediciones que se
van a procesar, p. ej., mediante hardware de medición o cálculos dentro de la CPU S7.
● Procesamiento: adquisición, cálculo y puesta a disposición de los valores de energía para
otros sistemas mediante objetos de energía de la CPU S7.
● Salida: visualización y archivado de los valores de energía en sistemas HMI o SCADA
conectados.

12

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Principios básicos de SIMATIC Energy Suite
1.2 Funcionamiento y componentes de SIMATIC Energy Suite

Sinopsis
La figura siguiente muestra la relación entre los distintos componentes de Energy Suite y los
pasos de procesamiento:

6DOLGD

3URFHVDPLHQWR

(QWUDGD
6&38

$GPLQLVWUDFLµQGH
GDWRV
9DORUHQ
PHPRULDLPDJHQ
GHSURFHVR
9DORUHQ'%

+0,

)%
8QLILFDFLµQ

+DUGZDUHGHPHGLFLµQ
'DWRVGHHQHUJ¯D
PHGLGRV

9LVXDOL]DFLµQ

2EMHWRVGHHQHUJ¯D

3XHVWDD
GLVSRVLFLµQGH
ORVYDORUHVGH
HQHUJ¯D

7UDWDPLHQWR
GHORVGDWRVGH
HQHUJ¯D

)%
'ULYHUGH
FRPXQLFDFLµQ

:LQ&&
%DVLF
&RPIRUW
$GYDQFHG
$UFKLYDGR

6&$'$
:LQ&&
3URIHVVLRQDO

)LFKHURGH
YDULDEOHV
$OPDFHQDPLHQ
WRWHPSRUDOGH
ORVYDORUHVGH
HQHUJ¯D
SHULµGLFRV

6&38
6,0$7,&
0HPRU\
&DUG

Datos de entrada procedentes de mediciones
Datos de energía brutos
Valores de energía momentáneos tratados
Valores de energía periódicos tratados con sello de tiempo
Bloques Energy Suite (prefijo EnS)
Bloques de drivers para hardware de medición (prefijo EnSL)
FB

Bloque de función
Proceso en una CPU S7

Componentes
La tabla siguiente muestra los componentes para la gestión de los datos de energía con
Energy Suite:
Área

Componente/paso de
procesamiento

Descripción

Entrada - Sumi‐
nistrar datos de
energía (Pági‐
na 23)

CPU S7

CPU S7-1500 configurada en el proyecto STEP 7 (TIA Portal)
Suministra los datos de entrada procedentes de mediciones al bloque de función
(FB) "Unificación"

Hardware de medición Hardware con capacidad de medición soportado por Energy Suite
Suministra los datos de entrada procedentes de mediciones al bloque de función
(FB) "Driver de comunicación"

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

13

Principios básicos de SIMATIC Energy Suite
1.2 Funcionamiento y componentes de SIMATIC Energy Suite
Área

Componente/paso de
procesamiento

Descripción

Procesamiento
- Procesar datos
de energía (Pá‐
gina 31)

FB "Unificación"

Contiene los bloques de Energy Suite con funcionalidad de driver para adquisi‐
ción, preprocesamiento y armonización de los datos de entrada procedentes de
mediciones, que pasan a ser datos de energía brutos.
Suministra los datos de energía brutos para el paso de procesamiento "Trata‐
miento de los datos de energía".
Se utilizan los siguientes bloques de Energy Suite:
● EnS_DrvAnalogValue (Página 176)
● EnS_DrvCounterLInt (Página 178)
● EnS_DrvCounterLReal (Página 180)
● EnS_DrvPulse (Página 182)

FB "Driver de comuni‐
cación"

Contiene los bloques de función con funcionalidad de driver (bloques de drivers)
para el hardware de medición soportado
Los bloques de drivers para el hardware de medición están disponibles en forma
de una Energy Support Library (EnSL) (Página 25) a través del DVD de pro‐
ducto "SIMATIC Energy Suite S", y deben instalarse por separado, es decir, no
forman parte de la librería Energy Suite.
Suministra los datos de energía brutos para el paso de procesamiento "Trata‐
miento de los datos de energía".

Objetos de adquisición En Energy Suite, un objeto de adquisición es generalmente un punto de medi‐
ción (p. ej., un medidor o un valor analógico).
En la ingeniería, el objeto de adquisición es el componente central en el que se
realizan todos los ajustes. Estos son, por ejemplo, la asignación de los periodos
de archivado y la fuente de datos de energía o los ajustes para el procesamiento
de los datos de energía brutos.
Tratamiento de los da‐ Sirve para calcular, sincronizar y organizar los datos de energía brutos (p. ej.,
tos de energía
compresión y sellado de tiempo periódico de los valores de energía).
Transfiere los valores de energía momentáneos tratados y los valores de ener‐
gía periódicos tratados con sello de tiempo al paso de procesamiento "Puesta a
disposición de los valores de energía"
Se utilizan los siguientes bloques de Energy Suite:
● EnS_CalcEnergyData (Página 170)
● EnS_TimeSync (Página 192)
● EnS_Organization (Página 191)
Puesta a disposición
Puesta a disposición de:
de los valores de ener‐ ● valores de energía momentáneos tratados para "Visualización - HMI" y
gía
"Visualización - SCADA"
● valores de energía periódicos tratados con sello de tiempo para
"Almacenamiento temporal de los valores de energía periódicos"
Se utilizan los siguientes bloques de Energy Suite:
● EnS_EnergyDataBasic (Página 187)
● Ens_EnergyDataAdv (Página 184)
● Ens_EnergyDataAdvMinMax (Página 185)
Almacenamiento tem‐
poral de los valores de
energía periódicos

Almacenamiento temporal de los valores de energía periódicos tratados con
etiqueta de fecha/hora de varios objetos de adquisición
Suministra los valores de energía a:
● Archivado - WinCC Professional (fichero de variables) o bien

14

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Principios básicos de SIMATIC Energy Suite
1.3 Descripción general del procedimiento
Área

Componente/paso de
procesamiento

Descripción
● Archivado - CPU S7 (SIMATIC Memory Card)
Energy Suite utiliza los siguientes bloques de datos (DB):
● EnS_BufferDB (Página 197)
● EnS_BufferWorkDB (Página 198)
● EnS_BufferRead (Página 165)
● EnS_BufferWrite (Página 167)

Salida - Visuali‐ Visualización - HMI
zar y evaluar da‐
tos de energía
Visualización - SCADA
(Página 95)
Archivado – WinCC
Professional (fichero
de variables)

Visualización de los valores de energía momentáneos en un SIMATIC Comfort
Panel o en un PC con aplicaciones WinCC (Basic, Comfort o Advanced)
Visualización de los valores de energía momentáneos o de los valores de ener‐
gía periódicos almacenados temporalmente en el sistema SCADA WinCC Pro‐
fessional
Archivado de valores de energía periódicos almacenados temporalmente en el
fichero de variables del sistema SCADA WinCC Professional
Se utilizan los siguientes bloques de Energy Suite:
● EnS_ArchiveHMI (Página 158)

Archivado - CPU S7
(SIMATIC Memory
Card)

Archivado de valores de energía periódicos almacenados temporalmente como
ficheros de variables (archivos CSV) en una SIMATIC Memory Card insertada en
una CPU S7-1500
Se utilizan los siguientes bloques de Energy Suite:
● EnS_ArchiveDataLog (Página 149)

1.3

Descripción general del procedimiento

Requisitos
Para los pasos de configuración que se describen a continuación se deben cumplir los
requisitos siguientes en STEP 7 (TIA Portal):
● El paquete complementario para "SIMATIC Energy Suite" se ha instalado.
Encontrará más información al respecto en las instrucciones de instalación de Energy
Suite, en el DVD.
● El proyecto STEP 7 se ha creado y configurado mediante la CPU S7-1500.
● Para la configuración de la medición del consumo de energía y del programa de gestión de
cargas debe haber instalada una licencia de Energy Suite válida.
Al utilizar hardware de medición como fuente de datos de energía se deben cumplir además
los siguientes requisitos adicionales:
● Se ha instalado la Energy Support Library para el uso futuro de hardware de medición.
Encontrará más información al respecto en la documentación del producto del hardware de
medición.
● El hardware de medición se ha creado y configurado en el proyecto STEP 7.
Encontrará más información al respecto en la documentación del producto del hardware de
medición.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

15

Principios básicos de SIMATIC Energy Suite
1.3 Descripción general del procedimiento
Para la visualización o el archivado de datos en ficheros de datos se debe cumplir
adicionalmente el siguiente requisito:
● La estación PC se ha creado y configurado en el proyecto STEP 7 con WinCC Professional
o WinCC Basic, Comfort o Advanced.

Pasos de configuración
La tabla siguiente muestra una sinopsis de los pasos de configuración más importantes para
la gestión de los datos de energía con los componentes Energy Suite:
Tema

Paso

Descripción

Facilitar datos de
energía

1

Suministrar datos de energía
(Página 23)

Editar datos de
energía

2.1

Crear tabla de objetos de adqui‐ Las tablas de objetos de adquisición sirven para crear y ad‐
ministrar objetos de adquisición. Con varias tablas de obje‐
sición (Página 33)
tos de adquisición es posible asignar y estructurar los obje‐
tos de adquisición, p. ej., según la jerarquía de los puntos de
medición de su planta de producción.

2.2

Agregar objetos de adquisición Para capturar y procesar los datos de energía de una fuente
para tablas de objetos de adqui‐ de datos de energía se deben crear objetos de adquisición
sición (Página 33)
en las tablas de objetos de adquisición.

2.3

Ajuste de las propiedades del
objeto de adquisición (Pági‐
na 36)

Creación y configuración del hardware de medición conec‐
tado o variables PLC (p. ej., valores procedentes de bloques
de datos o de la memoria imagen de proceso) para que pue‐
dan configurarse posteriormente como fuente de energía
para los objetos de energía.

Cada objeto de adquisición representa un punto de medi‐
ción de la planta de producción y debe configurarse según
corresponda.
● Asignar fuente de datos de energía
● Configurar el procesamiento de los datos de entrada
procedentes de mediciones
● Activar los valores de energía para el archivado y asignar
el periodo de archivado
● Comprobar la habilitación de los objetos de adquisición
para el programa de energía

16

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Principios básicos de SIMATIC Energy Suite
1.3 Descripción general del procedimiento
Tema

Paso

Respaldo y archi‐ 3.1
vado de los datos
de energía

Descripción
Definir períodos de archivado
(Página 53)

El usuario, de forma centralizada, administra los intervalos
periódicos (tiempos de archivado) en los cuales los datos de
energía brutos se deben calcular para obtener un valor de
energía periódico preparado con etiqueta de fecha/hora y, a
continuación, archivar.
A cada objeto de adquisición se le puede asignar el periodo
de archivado que se desee.

3.2

Definición del respaldo de los
valores de energía periódicos
(Página 61)

Para el respaldo de los valores de energía periódicos se
especifica el tamaño de los bloques de datos (DB de respal‐
do).
El número de DB de respaldo se corresponde con el número
de tablas de objetos de adquisición creadas (un DB de res‐
paldo por tabla de objetos de adquisición).

3.3

Definir archivado en CPU S7 (SI‐ Para archivar los valores de energía periódicos en una SI‐
MATIC Memory Card en la CPU S7, indique el nombre, el
MATIC Memory Card) (Pági‐
na 56)
número y el tamaño de los ficheros de datos. Los valores de
energía se introducen en los ficheros de datos.

3.4

Definir archivado en estación
PC con WinCC Professional (fi‐
chero de variables) (Página 59)

Para el archivado de los valores de energía periódicos en el
fichero de datos de WinCC Professional, active la casilla de
verificación correspondiente en la configuración del progra‐
ma de energía de Energy Suite.
Para ello, los protocolos de datos de WinCC Professional
deben configurarse en los ajustes de WinCC Professional.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

17

Principios básicos de SIMATIC Energy Suite
1.3 Descripción general del procedimiento
Tema

Paso

Generar el pro‐
4.1
grama de energía

Descripción
Definir los ajustes generales pa‐ Antes de generarse el programa de energía, ajuste el nú‐
ra el programa de energía (Pá‐ mero de canales de comunicación paralelos acíclicos y el
tiempo de arranque de los bloques en el programa de ener‐
gina 67)
gía.
Asimismo, defina la inhibición de avisos.

4.2

Comprobación de la habilitación
de los objetos de adquisición pa‐
ra el programa de energía y
adaptación si es necesario (Pá‐
gina 39)

Como muy tarde antes de que se genere el programa de
energía, se debe decidir qué objetos de adquisición (y, por
tanto, qué puntos de medición) deberá contener el programa
de energía. En las tablas de objetos de adquisición puede
activar/anular cómodamente la habilitación de los objetos de
adquisición.

4.3

Generar el programa de energía
(Página 70)

La generación del programa de PLC para la adquisición y el
procesamiento de datos de energía (abreviado: programa
de energía) se inicia en el árbol del proyecto.
Durante el proceso de generación, en el programa de ener‐
gía se utilizan automáticamente los bloques y tipos de datos
necesarios de la librería de Energy Suite y de la librería de
hardware de medición, y dichos bloques y tipos de datos se
interconectan según los objetos de adquisición configura‐
dos.
El programa de energía generado se crea en la subcarpeta
"Energy Suite - program" de la carpeta "Bloques de progra‐
ma" de la CPU S7.

18

4.4

Compilar y cargar programa de
PLC (Página 90)

Una vez que se haya generado el programa de energía,
compile todo el programa de PLC y cárguelo en el sistema
de destino CPU S7-1500.

4.5

Probar el programa de energía
(Página 90)

Para comprobar los ajustes, abra en el programa de energía
el bloque de datos en cuestión del objeto de adquisición
correspondiente y observe sus valores online mediante la
función "Observar todo".

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Principios básicos de SIMATIC Energy Suite
1.3 Descripción general del procedimiento
Tema

Paso

Visualizar y eva‐
luar datos de
energía (Pági‐
na 95)

5.1

Configuración de una estación
PC con WinCC Professional

Descripción

5.2

Creación de una conexión con el Para habilitar la transferencia de datos entre la CPU
sistema SCADA
S7-1500 y el sistema SCADA, configure en STEP 7 (TIA
Portal) una conexión HMI a la estación PC con WinCC Pro‐
fessional.

5.3

Lectura y visualización de los
valores de energía configurados
para el archivado en el sistema
de energía de la estación PC
(Página 97)

Para el sistema SCADA se necesita una estación PC con la
aplicación HMI SIMATIC "WinCC RT Professional".

En la estación PC con WinCC Professional, Energy Suite
ofrece una sinopsis de todos los objetos de adquisición y los
valores de energía periódicos que se han configurado en el
sistema de ingeniería para el archivado en el fichero de va‐
riables de WinCC Professional.
Con la función "Actualizar" se sincronizan los datos de inge‐
niería de la CPU S7-1500 a los que puede acceder la esta‐
ción PC a través de WinCC Professional.

5.4

Configuración del sistema SCA‐ Configuración de la estación PC con WinCC Professional:
DA (Página 100)
● Para la transferencia de datos al sistema SCADA,
genere las variables HMI para los bloques de datos de
respaldo (carpeta "Variables HMI").
● Para el archivado, genere el fichero de variables con las
variables de informe (valores de energía) y configure
los segmentos de fichero para archivado (Página 102)
de los valores de energía periódicos (carpeta "Fichero").
● Para la visualización de los datos de energía adquiridos
en Runtime, puede integrar plantillas de imagen y
elementos gráficos del Siemens Industry Online Support
en la aplicación WinCC (carpeta "Imágenes").

5.5

Compilación y carga de la esta‐ A continuación, compile la configuración de toda la estación
ción PC con WinCC Professional PC y cárguela en el sistema SCADA.

5.6

Inicio del programa PLC y del
sistema SCADA (Runtime)

Si se han iniciado WinCC RT Professional en el sistema
SCADA y los programas PLC en la CPU S7-1500, puede
comenzar el archivado.
Los valores de energía periódicos seleccionados se archi‐
van automáticamente. El archivado se produce continua‐
mente mientras Runtime esté activo.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

19

Principios básicos de SIMATIC Energy Suite
1.4 Características y convenciones

1.4

Características y convenciones

Compatibilidad de Energy Suite con CPU y FW
La tabla siguiente muestra la compatibilidad de las CPU con las distintas versiones de Energy
Suite.
CPU / ET 200SP CPU / ET 200SP Open Controller

FW

Versión de Energy Suite

CPU S7-1500

≥ V2.0

V14.0
V14.0 SP1
V15.0
V15.1
V16.0

Características de Energy Suite
La siguiente tabla muestra las características de Energy Suite:
Característica

Valor

Número máximo de objetos de adquisición licenciables por cada CPU
S7-1500

999 para firmware V2.8; pa‐
ra versiones anteriores, el
valor es 500

Número máximo de tablas de objetos de adquisición por cada CPU
S7-1500

10

Número máximo de CPU S7-1500 para archivado simultáneo

10

Número máximo de objetos de adquisición archivables simultáneamen‐ 2000
te (WinCC Professional)
Recomendación: repartidos entre un máximo de 10 CPU S7-1500
Periodo de archivado mínimo ajustable

1 min

Rango de valores de un periodo de archivado

Parte entera de una hora/de
un día, p. ej.:
● 1 minuto
● 5 minutos
● 15 minutos
● 12 horas
No son válidos, p. ej.:
● 7 minutos
● 11 minutos
● 5 horas

20

Periodo de archivado máximo ajustable

24 h

Periodo de archivado típico para magnitudes eléctricas

15 min

Periodo de archivado típico para magnitudes no eléctricas

60 min

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Principios básicos de SIMATIC Energy Suite
1.4 Características y convenciones

Convenciones en cuanto a nombres
La tabla siguiente muestra las convenciones en cuanto a nombres para la ingeniería con
Energy Suite:
Objeto

Rango de valores para nom‐
bres

Ámbito de validez

PLC

● Caracteres no permitidos: ● Para el archivado de los datos de
energía de los objetos de
– :?"'\*%
adquisición en la estación de PC
– <espacio>
con WinCC Professional se aplican
– <avance de línea>
las convenciones para nombres de
– <salto de línea>
los PLC.

Objeto de adquisición

● 1-32 caracteres

● Nombre unívoco para todo el
proyecto con tipo de archivado
● Caracteres no permitidos:
"WinCC Professional (fichero de
– :?'*"\$%§°
variables)"
– <espacio>
–

<avance de línea>

–

<salto de línea>

Tabla de objetos de adquisi‐
ción

● 1-32 caracteres

Periodo de archivado

● 1-32 caracteres

● Nombre unívoco para todo el
proyecto con tipo de archivado
● Caracteres no permitidos:
"WinCC Professional (fichero de
– <avance de línea>
variables)"
– <salto de línea>
-

● Caracteres no permitidos:

Fichero de variables

–

:?'*"\%§°

–

<espacio>

–

<avance de línea>

–

<salto de línea>

● 1 – 26 caracteres

-

● Caracteres permitidos:
–

0 ... 9

–

a ... z

–

A ... Z

–

-

–

_

Nota
Nombres unívocos
Los nombres de los objetos deben ser al menos unívocos en toda la CPU. Si un nombre ya se
ha asignado a un bloque, a una variable PLC o a una constante de la CPU, no podrá utilizarse
para un nuevo objeto. A la hora de comprobar si un nombre es unívoco, no se distingue entre
mayúsculas y minúsculas.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

21

Principios básicos de SIMATIC Energy Suite
1.4 Características y convenciones

Consulte también
Características y convenciones (Página 118)

22

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Suministrar datos de energía

2

Las fuentes de datos de energía suministran los datos de energía al objeto de adquisición para
ser procesados (adquisición, tratamiento, puesta a disposición). Las siguientes fuentes de
datos pueden parametrizarse como fuente de datos de energía de un objeto de adquisición:
● Datos de entrada procedentes de mediciones de hardware de medición conectado
(Página 25)
● Datos de energía procedentes de la memoria imagen de proceso o del área de marcas de
la CPU (variables PLC) (Página 27)
● Datos de energía procedentes de bloques de datos (variables DB) (Página 28)
El intercambio de los datos de energía periódicos (señal de impulso, valor del contador de
energía, valor de potencia), a partir de los cuales se calculan los datos de energía básicos, se
lleva a cabo cíclicamente a través de la memoria imagen de proceso. El hardware de medición
suministra datos de energía a objetos de adquisición utilizando la comunicación cíclica y
acíclica. El hardware de medición transfiere los datos de energía avanzados (p. ej., valores de
tensión, intensidad o frecuencia) al objeto de adquisición en un registro. El número máximo de
canales de comunicación acíclicos paralelos está limitado a 10.
La asignación de las fuentes de datos de energía para el programa de energía se lleva a cabo
durante la configuración de los objetos de adquisición. A cada objeto de adquisición se le
asigna una fuente de datos de energía.

Consulte también
Objetos de adquisición y programa de medición del consumo de energía (Página 31)

2.1

Información importante sobre los datos de energía
Se distingue entre los siguientes datos de energía:
● Datos de energía básicos
● Datos de energía avanzados

Datos de energía básicos
Los datos de energía básicos (inglés: Basic) incluyen los siguientes datos de energía:
● Consumo de energía calculado periódicamente
● Potencia media por período de archivado
● Valores actuales de consumo de energía y consumo de potencia
Los datos de energía básicos son datos de energía relevantes para la facturación, y son
necesarios para representar los flujos de energía en una instalación.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

23

Suministrar datos de energía
2.1 Información importante sobre los datos de energía
Los datos de energía básicos se proporcionan principalmente mediante comunicación cíclica
a través de la memoria imagen del proceso.

Datos de energía avanzados
Los datos de energía avanzados (inglés: Advanced) son leídos únicamente en el hardware de
medición que puede proporcionar estos datos. Los datos de energía avanzados incluyen los
siguientes datos de energía:
● Valores de intensidad, tensión y potencia para cada fase
● Valores de potencia total, energía total y potencia total
● Valores de frecuencia
Depende del hardware de medición en cuestión si los datos de energía avanzados se
proporcionan o no y con qué alcance. Además del valor medido de entrada, el hardware de
medición o el bloque driver también proporcionan los valores mínimos y máximos de los datos
de energía avanzados, p. ej., para la salida en un bloque gráfico en WinCC Professional.
Los datos de energía avanzados se transmiten mediante comunicación acíclica en un juego de
datos.

Comunicación cíclica
La comunicación cíclica se utiliza para datos de energía relevantes para la facturación (p. ej.
potencia, contadores de energía), los cuales se procesan en la CPU para funciones de
vigilancia y cálculo. Estos datos se leen cíclicamente, de manera rápida y fiable, a través de la
memoria imagen del proceso.
Si desea obtener más información sobre la memoria imagen de proceso, consulte la palabra
clave "Memoria imagen de proceso" en la ayuda en pantalla del sistema de información de TIA
Portal.

Comunicación acíclica
La comunicación acíclica se utiliza para datos de energía relevantes para la visualización
(p. ej., intensidad, tensión), que se visualizan en un SIMATIC Comfort Panel o PC. Estos datos
se comunican, p. ej., para la visualización mientras se está abriendo una imagen.
Los datos de energía se leen en un juego de datos con la instrucción "RDREC" desde el
módulo correspondiente. Si desea obtener más información sobre la instrucción "RDREC",
consulte la palabra clave "RDREC" en la ayuda en pantalla del sistema de información de TIA
Portal.
Los bloques driver para el hardware de medición llaman internamente a la instrucción
"RDREC" para la comunicación acíclica.
Nota
Utilice los dos tipos de comunicación dependiendo del caso de aplicación. Evite que los
canales de comunicación se sobrecarguen.

24

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Suministrar datos de energía
2.2 Datos de energía procedentes de hardware de medición

2.2

Datos de energía procedentes de hardware de medición
Existen muchos aparatos que suministran datos de energía. Además de los medidores (p. ej.,
ET 200SP AI EnergyMeter 480VAC ST, SENTRON PAC), cuya única tarea consiste en medir
energía, hay muchos sistemas de automatización (p. ej., convertidores de frecuencia o
aparatos de protección y maniobra) que, además de realizar las correspondientes funciones
de automatización (p. ej., regulación de la velocidad), suministran datos de energía. En
adelante, llamaremos a estos aparatos hardware de medición.

Sinopsis del hardware de medición para Energy Suite
La siguiente tabla muestra, a modo de ejemplo, algunos aparatos que se incluyen entre el
hardware de medición soportado por SIMATIC Energy Suite. Con este fin, a través de una
Energy Support Library (EnSL), el hardware de medición dispone de bloques de función (FB)
específicos con funcionalidad de driver.
Hardware de medición

Descripción

AI EnergyMeter 480VAC ST

Módulo de entradas analógicas para el sistema de periferia des‐
centralizada SIMATIC ET 200SP, para la medición de paráme‐
tros de red relevantes dentro de un rango de tensiones que llega
hasta 480 V AC de tensión conductor-conductor

AI EnergyMeter 480VAC HF

Módulo de entradas analógicas para el sistema de periferia des‐
centralizada SIMATIC ET 200SP, para la medición de paráme‐
tros de red relevantes dentro de un rango de tensiones que llega
hasta 480 V AC de tensión conductor-conductor.
Funcionalidad y aplicaciones ampliadas, medición de intensidad
mediante bobinas Rogowski o mediante transformador de inten‐
sidad y tensión.
El AI EnergyMeter 480 V AC HF está disponible en dos variantes:
CT y RC.

SENTRON PAC3200/PAC4200

Aparato multifunción para la medición y visualización de pará‐
metros de red relevantes en la distribución de energía en baja
tensión

SENTRON 3VA (ETU de la serie 8) Interruptores automáticos de caja moldeada para la distribución
de energía en baja tensión, p. ej., para evitar daños eléctricos en
plantas de producción
SINAMICS AC/AC

Convertidor para aplicaciones de exigencia media o baja, para
un funcionamiento económico de, p. ej., bombas, ventiladores o
compresores

SIMOCODE pro V PN

Guardamotor y aparato de control para tareas de gestión de mo‐
tor como, p. ej., amplias funciones de protección, vigilancia, se‐
guridad y control entre la derivación a motor y el sistema de au‐
tomatización

Arrancador de motor ET 200SP/
M200D

Arrancador de motor para maniobrar y proteger motores asín‐
cronos trifásicos y motores de corriente alterna monofásicos

Arrancador suave 3RW44

Arrancador suave para limitar la corriente de arranque y el par de
arranque. Con ello se pueden evitar de forma fiable tanto esfuer‐
zos mecánicos como caídas de tensión de red.

Arrancador suave 3RW55

Nueva generación de arrancadores suaves para la limitación de
la corriente de arranque y del par de arranque. Con ello se pue‐
den evitar de forma fiable tanto esfuerzos mecánicos como caí‐
das de tensión de red.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

25

Suministrar datos de energía
2.2 Datos de energía procedentes de hardware de medición

El hardware de medición se configura en STEP 7 (TIA Portal).
El hardware de medición se configura en STEP 7 (TIA Portal). Para agregar el hardware de
medición a la configuración hardware del proyecto, existen las siguientes posibilidades:
● Pasar directamente un aparato del catálogo de hardware a la vista de red o la vista
topológica
● Agregar un aparato que no esté presente en el catálogo de hardware a través de un archivo
GSD (archivo de datos maestro de aparato) o un HSP (Hardware Support Package)
Si desea configurar un hardware de medición que no está presente en el catálogo de hardware,
primero debe instalar el archivo GSD o el HSP facilitado por el fabricante. El hardware de
medición instalado mediante archivos GSD o un HSP se muestra en el catálogo de hardware
y, a continuación, puede seleccionarse y configurarse en el proyecto.
Para más información sobre la configuración de un aparato mediante un archivo GSD o un
HSP, consulte la ayuda en pantalla del sistema de información de TIA Portal.

Bloques de drivers del hardware de medición para STEP 7 (TIA Portal)
Los datos de energía (datos de entrada procedentes de mediciones) del hardware de medición
se ponen a disposición de diferentes maneras (p. ej., hay diferencias en el formato de los datos
o en la dirección de los registros).
Por ello, además de los bloques Energy Suite, el hardware de medición dispone también de
bloques de función (FB) específicos para hardware con funcionalidad de driver a través de la
Energy Support Library (EnSL). Estos bloques de función específicos para hardware (en
adelante denominados bloques de drivers) constituyen la interfaz entre el hardware de
medición especial y el sistema de automatización.
Por medio de los bloques de drivers se leen los datos de energía del hardware de medición y,
una vez que se ha unificado su formato, dichos datos se ponen a disposición del sistema de
automatización. Así los datos de energía brutos se suministran de manera más fácil y rápida
al programa de PLC y a Energy Suite. A continuación, los bloques Energie Suite preparan y
procesan los datos de energía brutos.

Energy Support Library (EnSL)
Efectúe la instalación de la Energy Support Library tal y como se describe en las instrucciones
de instalación del hardware de medición.
Una vez instalada correctamente la Energy Support Library:
● La librería de hardware de medición con los bloques de drivers está disponible como librería
global en STEP 7 (TIA Portal). Al seleccionar la fuente de datos de energía, el hardware de
medición se puede asignar a un objeto de adquisición.
● Los bloques de drivers pueden utilizarse en el programa de PLC.
Para más información sobre el uso de librerías globales, consulte la ayuda en pantalla del
sistema de información de TIA Portal.

26

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Suministrar datos de energía
2.3 Datos de energía procedentes de la memoria imagen del proceso o del área de marcas de la CPU S7

Tipo de comunicación
La CPU puede leer los datos de energía procedentes del hardware de medición de dos
maneras: mediante comunicación cíclica o acíclica. Los datos de energía cíclicos se
transfieren a través de la memoria imagen de proceso mientras que los datos de energía
acíclicos se transfieren en un registro procedente del hardware de medición a Energy Suite.
El tipo de comunicación entre la CPU y el hardware de medición depende del hardware de
medición empleado y de sus bloques de drivers. Normalmente los datos de energía básicos se
transfieren mediante comunicación cíclica, y los avanzados mediante comunicación acíclica:
● La comunicación cíclica se utiliza para datos de energía relevantes para la facturación (p.
ej. potencia, contadores), los cuales se procesan en la CPU para funciones de vigilancia y
cálculo.
● La comunicación acíclica se utiliza para datos de energía relevantes para la visualización
(p. ej., intensidad, tensión), que se visualizan en un SIMATIC Comfort Panel o PC.
Encontrará más información sobre la comunicación entre la CPU y el hardware de medición
empleado en la documentación de dicho hardware de medición.
Nota
Cuando utilice varios aparatos de hardware de medición, tenga en cuenta la carga de los
canales de comunicación soportados por la CPU utilizada.

Consulte también
Asignar fuente de datos de energía (Página 40)

2.3

Datos de energía procedentes de la memoria imagen del proceso o
del área de marcas de la CPU S7

Variables PLC
Las variables PLC se pueden utilizar como fuente de energía para objetos de adquisición. Para
ello, cree nuevas variables PLC o emplee variables PLC existentes en el programa de PLC.
Asigne la variable PLC creada al tipo de datos de energía que desee (señal de impulso, valor
de potencia o valor de contador de energía). El tipo de datos de las variables PLC se asigna
a partir de la declaración en la tabla de variables PLC. Los tipos de datos de energía se asignan
a las fuentes de datos de energía a partir de la configuración del objeto de adquisición.
Ejemplos
● Un medidor no soportado por la Energy Support Library suministra un valor de potencia y
un valor de contador de energía. Estos valores se asignan a las variables PLC.
● 10 motores de ventilador tienen una potencia nominal de 1,5 kW cada uno. Los motores se
controlan mediante un PLC. En el PLC se obtiene el consumo teórico a partir de los estados
de conmutación y de la potencia nominal. P. ej., si se conectan cinco motores, se obtiene
un consumo de 7,5 kW. Este cálculo se realiza en el PLC y se puede asignar a las variables
PLC.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

27

Suministrar datos de energía
2.4 Datos de energía procedentes de bloques de datos

Sinopsis de los tipos de datos relevantes para variables PLC
La tabla siguiente muestra los tipos de datos relevantes para variables PLC para la adquisición
de datos de energía:
Tipo de datos

Descripción

BOOL

Se utiliza para capturar una señal de impulso.
A partir de una señal de impulso binaria capturada, se calcula el con‐
sumo de energía resultante con ayuda del factor de normalización.
Ejemplo: con un factor de normalización de 2 y la unidad física "Wh",
de 3 señales de impulso se obtiene un consumo de energía de 6 Wh.

REAL, LREAL, SINT, USINT,
INT, UINT, DINT, UDINT,
LINT, ULINT, DWord

Se utiliza para capturar un valor de potencia.
Tras normalizar el valor de potencia capturado, se calcula el consumo
de energía resultante.
Ejemplo: Un consumo medio de potencia de 180 kW durante 10 se‐
gundos equivale a un consumo de energía de 0,5 kWh o 500 Wh.

REAL, LREAL, SINT, USINT,
INT, UINT, DINT, UDINT,
LINT, ULINT, LWord

Se utiliza para capturar un valor de contador de energía.
A partir de la variación del valor absoluto del contador de energía, y
con ayuda del factor de normalización, se calcula el consumo de po‐
tencia y el valor momentáneo del consumo.
Ejemplo: en 10 segundos, la lectura numérica de un contador de
energía cambia de 6.734.392 Wh a 6.734.414 Wh. Esta diferencia
equivale a un consumo de energía de 22 Wh y a un valor momentáneo
de consumo de potencia de 7,92 kW.

Definición de variables PLC para la adquisición de datos de energía
Para declarar las variables PLC para la adquisición de datos de energía, cree las variables PLC
en una tabla de variables PLC siguiendo el procedimiento estándar. Asigne a las variables PLC
el tipo de datos de energía adecuado.
Para más información sobre el procedimiento, consulte el apartado "Declarar variables en la
tabla de variables PLC" de la ayuda en pantalla del sistema de información de TIA Portal.

Consulte también
Asignar fuente de datos de energía (Página 40)

2.4

Datos de energía procedentes de bloques de datos

Variables DB
Las variables DB pueden utilizarse como fuentes de datos de energía para objetos de
adquisición. Para ello, cree nuevas variables DB en bloques de datos o emplee variables DB
existentes en el programa de PLC.
Asigne la variable DB creada al tipo de datos de energía que desee (señal de impulso, valor de
potencia o valor de contador de energía). El tipo de datos de las variables DB o un elemento
de la tabla de declaración se asignan para los bloques de datos. Los tipos de datos de energía

28

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Suministrar datos de energía
2.4 Datos de energía procedentes de bloques de datos
se asignan a las fuentes de datos de energía a partir de la configuración del objeto de
adquisición.

Resumen de los tipos de datos para variables DB
La tabla siguiente muestra los diferentes tipos de datos para variables DB para la adquisición
de datos de energía:
Tipo de datos

Descripción

BOOL

Se utiliza para capturar una señal de impulso.
A partir de una señal de impulso binaria capturada, se calcula el valor de potencia
analógico resultante con ayuda del factor de normalización.
Ejemplo: con un factor de normalización de 2 y la unidad física "Wh", de 3 señales
de impulso se obtiene un consumo de energía de 6 Wh.

SINT, USINT, INT,
UINT, DINT,
UDINT, LINT,
ULINT, DWord
REAL, LREAL
SINT, USINT, INT,
UINT, DINT,
UDINT, LINT,
ULINT, LWord
REAL, LREAL

Se utiliza para capturar un valor de potencia.
Tras normalizar el valor de potencia capturado, se calcula el valor de energía
resultante.
Ejemplo: un consumo de potencia de 180 kW durante 10 segundos equivale a un
consumo de energía de 0,5 kWh o 500 Wh.
Se utiliza para capturar un valor de contador de energía.
A partir de la variación del valor absoluto del contador de energía, y con ayuda del
factor de normalización, se calcula el consumo de potencia y el valor medio mo‐
mentáneo del consumo.
Ejemplo: en 10 segundos, la lectura numérica de un contador de energía cambia
de 6.734.392 Wh a 6.734.414 Wh. Esto equivale a un consumo de energía de
22 Wh y a un consumo medio de potencia de 7,92 kW.

Declaración de variables DB para la adquisición de datos de energía
Para declarar las variables DB para la adquisición de datos de energía, cree los bloques de
datos correspondientes y defina su estructura siguiendo el procedimiento estándar.
Para más información sobre el procedimiento, consulte el apartado "Editar propiedades de
variables en bloques de datos" de la ayuda en pantalla del sistema de información de TIA
Portal.

Consulte también
Asignar fuente de datos de energía (Página 40)

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

29

Suministrar datos de energía
2.4 Datos de energía procedentes de bloques de datos

30

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Procesar datos de energía
3.1

3

Objetos de adquisición y programa de medición del consumo de
energía
Para el procesamiento de los datos de energía brutos, se definen objetos de adquisición en
STEP 7 (TIA Portal) en el árbol del proyecto, bajo la CPU S7-1500. Los objetos de adquisición
sirven para parametrizar de manera específica los datos de energía brutos y generar luego un
programa de energía.
Una vez instalado correctamente SIMATIC Energy Suite, en el árbol del proyecto aparece la
nueva carpeta "Medición del consumo de energía". La figura siguiente muestra la carpeta
"Objetos de adquisición" en el árbol del proyecto.

Objetos de adquisición
Cada objeto de adquisición representa un punto de medición de la planta de producción. Con
la parametrización del objeto de adquisición se define la manera de procesar los datos de
entrada procedentes de mediciones para obtener valores de energía evaluables.
Para establecer el cálculo periódico de valores de energía, a cada objeto de adquisición se le
asigna un periodo de archivado. De este modo se define con qué periodicidad los datos de
energía brutos adquiridos habrán de compactarse para obtener un valor de energía periódico
y archivarse con su etiqueta de fecha/hora. Generalmente, un valor de energía eléctrico se
archiva en periodos de 15 minutos, y uno no eléctrico (p. ej., gas), en periodos de 60 minutos.
Se pueden crear y administrar de forma centralizada varios periodos de archivado con
independencia de los objetos de adquisición.
Los objetos de adquisición se crean y administran en tablas de objetos de adquisición. La
gestión de cargas se configura mediante los nodos de medición del consumo de energía. Con
varias tablas de objetos de adquisición es posible estructurar los objetos de adquisición, p. ej.,
según la jerarquía de los puntos de medición de la planta de producción.
Encontrará más información sobre el número posible de objetos de adquisición y tablas de
objetos de adquisición en el apartado "Características y convenciones (Página 20)".

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

31

Procesar datos de energía
3.1 Objetos de adquisición y programa de medición del consumo de energía

Programa de energía
A partir de los objetos de adquisición parametrizados y de los periodos de archivado, se genera
un programa de PLC para la adquisición, procesamiento y archivado de datos de energía. Este
programa se denominará en adelante "Programa de energía".
Para ello se generan automáticamente bloques a partir de la librería Energy Suite suministrada
y de la librería de hardware de medición (Energy Support Library) y dichos bloques se
interconectan según la configuración de los objetos de adquisición. Desde que da comienzo la
generación del programa de energía, con la habilitación de los objetos de adquisición se
pueden elegir los puntos de medición que deberán tenerse en cuenta en el programa de
energía.
Tras la generación, el programa de energía, junto con todos los bloques necesarios, se
encuentra en el árbol del proyecto debajo de la CPU, en la carpeta "Bloques de programa" >
"Energy Suite – program".

Gestión de cargas
Los bloques de gestión de cargas en SIMATIC Energy Suite V16.0 actúan como componentes
de vigilancia. Se encargan de garantizar que el consumo de potencia y de energía no supere
el valor límite de energía definido por el usuario. Encontrará más información sobre la gestión
de cargas en el apartado "Optimizar el consumo de energía (Página 115)".

Reglas de programación
Nota
Los prefijos "EnS_" y "EnSL_" están reservados para Energy Suite.
Antes de generarse el programa de energía, asegúrese de que los prefijos "EnS_" y "EnSL" no
se utilizan en el programa de PLC actual (bloques de usuario, variables, UDT u objetos
tecnológicos). De este modo se evita la sobrescritura accidental al generarse el programa de
energía.

32

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Procesar datos de energía
3.3 Agregar objetos de adquisición para tablas de objetos de adquisición
Nota
La carpeta "Energy Suite – program" está reservada para Energy Suite.
Antes de generarse el programa de energía, asegúrese de que la carpeta "Energy Suite –
program" no contiene partes del programa de PLC preexistente. De este modo se evita la
sobrescritura accidental al generarse el programa de energía.

3.2

Crear tabla de objetos de adquisición
En primer lugar, cree las tablas de objetos de adquisición debajo de la CPU, en la carpeta
"Medición del consumo de energía". Previamente debe decidir cómo quiere estructurar los
objetos de adquisición en varias tablas de objetos de adquisición. El número de tablas de
objetos de adquisición influye en la duración máxima del búfer (Página 61).
Encontrará más información sobre el número posible de tablas de objetos de adquisición y las
convenciones en cuanto a nombres en el apartado "Características y convenciones
(Página 20)".

Requisitos
● Se ha creado una CPU S7-1500 en el proyecto.

Procedimiento
Para crear una tabla de objetos de adquisición, proceda de la siguiente manera:
1. Abra la CPU S7-1500 en el árbol del proyecto.
2. Bajo la CPU S7-1500, abra la carpeta "Objetos de adquisición".
3. Abra la carpeta "Medición del consumo de energía".
4. Haga doble clic en el objeto "Agregar nueva tabla de objetos de adquisición".
Se crea directamente una nueva tabla de objetos de adquisición en la carpeta "Medición del
consumo de energía".
5. En el menú contextual de la nueva tabla de objetos de adquisición, seleccione el comando
"Renombrar" e indique el nombre que desee conforme a las convenciones en cuanto a
nombres (Página 20).
Si es necesario, cree de la misma forma otras tablas de objetos de adquisición. Si procede,
continúe creando tablas de objetos de adquisición debajo de otras CPU S7-1500.

3.3

Agregar objetos de adquisición para tablas de objetos de adquisición
Para procesar los datos de energía, cree objetos de adquisición en las tablas de objetos de
adquisición para los puntos de medición de la planta de producción. Debe decidir cómo quiere
estructurar los objetos de adquisición en varias tablas de objetos de adquisición.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

33

Procesar datos de energía
3.3 Agregar objetos de adquisición para tablas de objetos de adquisición
Encontrará más información sobre el número posible de objetos de adquisición y las
convenciones en cuanto a nombres en el apartado "Características y convenciones
(Página 20)".

Requisitos
● Se ha creado una tabla de objetos de adquisición en la carpeta "Medición del consumo de
energía", bajo la CPU S7-1500.

Procedimiento
Para crear un objeto de adquisición, proceda de la siguiente manera:
1. Bajo la CPU S7-1500, abra la carpeta "Objetos de adquisición".
2. Abra la carpeta "Medición del consumo de energía".
3. Haga doble clic en la tabla de objetos de adquisición donde desee crear el objeto de
adquisición.
Se abre la tabla de objetos de adquisición en el área de trabajo.
4. En la columna "Nombre" de la tabla de objetos de adquisición, haga doble clic en
"<Agregar>".
Se crea un nuevo objeto de adquisición en la tabla de objetos de adquisición.
Si es necesario, cree de la misma forma otros objetos de adquisición para todas las tablas de
objetos de adquisición. Continúe creando objetos de adquisición debajo de otras CPU
S7-1500.

Resultado
Cada fila de una tabla de objetos de adquisición representa un objeto de adquisición. Las
principales propiedades de los objetos de adquisición pueden verse y, dado el caso,
modificarse directamente en la tabla de objetos de adquisición. Ello incluye:
● Nombre del objeto de adquisición
● Fuente de datos de energía del objeto de adquisición
● Estado de habilitación del objeto de adquisición para el programa de energía
● Configuración de las propiedades específicas del objeto de adquisición (propiedades de
procesamiento)
● Periodo de archivado del objeto de adquisición
● Previsión periódica para la activación de la gestión de cargas (Página 115)
La figura siguiente muestra una tabla de objetos de adquisición en el área de trabajo de STEP 7
(TIA Portal):

34

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Procesar datos de energía
3.3 Agregar objetos de adquisición para tablas de objetos de adquisición

Al seleccionar un objeto de adquisición de la tabla de objetos de adquisición dentro del área de
trabajo de la ventana de inspección de STEP 7 (TIA Portal), se muestran las propiedades
específicas del objeto de adquisición. En los siguientes apartados se explica cómo ajustar
estas propiedades.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

35

Procesar datos de energía
3.4 Ajuste de las propiedades del objeto de adquisición

Copia de objetos de adquisición
Los objetos de adquisición se pueden copiar de una tabla de objetos de adquisición a otra
mediante el menú contextual. Tras la copia, compruebe las propiedades del objeto de
adquisición y, si es necesario, modifique los ajustes copiados.

Consulte también
Configuración del objeto de adquisición (Página 36)
Modificación de la habilitación de los objetos de adquisición para el programa de energía
(Página 39)

3.4

Ajuste de las propiedades del objeto de adquisición

3.4.1

Configuración del objeto de adquisición
Cada objeto de adquisición representa un punto de medición de la planta de producción y debe
configurarlo según corresponda. Los objetos de adquisición se parametrizan en la ventana de
inspección "Propiedades".
Nota
Como alternativa, puede mostrar u ocultar en la tabla de objetos de adquisición (mediante el
menú contextual que hay en el encabezado de la tabla) los parámetros más importantes del
objeto de adquisición. Puesto que las tablas de objetos de adquisición se crean de manera
individualizada, los ajustes del objeto de adquisición pueden visualizarse y modificarse
fácilmente.
Para cada objeto de adquisición debe especificarse lo siguiente:
● Fuente de los datos de energía brutos
● Parámetros para la adquisición y procesamiento de datos de energía
● Parámetros para archivar datos de energía (p. ej., archivado de la duración)
● Habilitación del objeto de adquisición para el programa de energía
El programa de energía se genera a partir de las propiedades configuradas.

Requisitos
● Se ha creado un nuevo objeto de adquisición en la tabla de objetos de adquisición.

36

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Procesar datos de energía
3.4 Ajuste de las propiedades del objeto de adquisición

Procedimiento
Para abrir la ventana de inspección "Propiedades" de un objeto de adquisición, proceda de la
siguiente manera:
1. Abra la carpeta "Objetos de energía" en el árbol del proyecto.
2. Haga doble clic en la tabla de objetos de adquisición donde esté creado el objeto de
adquisición.
Se abre la tabla de objetos de adquisición con los objetos de adquisición creados.
3. Dentro de la tabla de objetos de adquisición, haga clic en el objeto de adquisición que
desee.
En la ventana de inspección "Propiedades" se muestran los parámetros del objeto de
adquisición.
La configuración del objeto de adquisición se describe en detalle en el siguiente apartado.

Consulte también
Ajustes básicos (Página 37)
Fuente de datos de energía (Página 40)
Valores de energía periódicos (Página 46)
Procesamiento (Página 49)

3.4.2

Ajustes básicos
La tabla siguiente muestra los ajustes básicos de un objeto de adquisición:
Ajuste

Descripción

Nombre

Nombre unívoco del objeto de adquisición para toda la CPU. El nom‐
bre aparece en la tabla de objetos de adquisición y puede cambiarse
según los requisitos particulares.
Longitud válida del nombre: 1–32 caracteres
No están permitidos los siguientes caracteres: ? ' * " \ % § °
Encontrará más información sobre las convenciones en cuanto a nom‐
bres en el apartado "Características y convenciones (Página 20)".

Comentarios

Descripción abreviada opcional del objeto de adquisición, p. ej., su
finalidad o la fuente de datos del objeto de adquisición.

Habilitar objeto de adquisición ● Si esta casilla de verificación está activada, el objeto de
adquisición se habilita para la generación del programa de
energía.
● Si esta casilla de verificación está desactivada, el objeto de
adquisición no se utiliza en el programa de energía.
Si el número de licencias Runtime para Energy Suite (Página 68) es
menor que el número de objetos de adquisición activados, se cancela
la generación del programa de energía y se muestra un mensaje de
error.
Los objetos de adquisición no habilitados no se tienen en cuenta a la
hora de contar las licencias.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

37

Procesar datos de energía
3.4 Ajuste de las propiedades del objeto de adquisición
Ajuste

Descripción

Creado el

La fecha de creación es la fecha en la que se ha agregado el objeto de
adquisición a la tabla de objetos de adquisición. La fecha de creación
no puede modificarse.

Modificado por última vez el

La fecha de modificación es la fecha en la que el objeto de adquisición
se ha modificado por última vez. La fecha de modificación se actualiza
tras cada modificación de las propiedades del objeto de adquisición.
La fecha de modificación no puede modificarse.

Consulte también
Configuración del objeto de adquisición (Página 36)
Modificación de la habilitación de los objetos de adquisición para el programa de energía
(Página 39)

3.4.3

Información del proyecto
La tabla siguiente muestra los ajustes del objeto de adquisición en "Información del proyecto":
Ajuste

Descripción

Identificación del objeto
de adquisición

La identificación del objeto de adquisición se asigna automáticamente al
crear el objeto de adquisición. La identificación del objeto de adquisición se
utiliza internamente para direccionar e identificar el objeto de adquisición.
La identificación del objeto de adquisición no puede modificarse.

Autor

Nombre de la persona que ha creado el objeto de adquisición. El nombre
puede cambiarse según los requisitos particulares. De forma predetermi‐
nada se ajusta el usuario que ha iniciado sesión en el sistema operativo.

Consulte también
Configuración del objeto de adquisición (Página 36)

3.4.4

Identification & Maintenance
La tabla siguiente muestra los ajustes del objeto de adquisición en "Identificación y
mantenimiento":
Ajuste

Descripción

ID de la instalación

El ID de la instalación define el punto de medición al que está asignado el
objeto de adquisición en la instalación de procesos.

Identificador de ubicación El identificador de ubicación define la ubicación exacta a la que está asig‐
nado el objeto de adquisición en la instalación de procesos.

38

Fecha de instalación

Fecha en que se instaló el punto de medición que está asignado al objeto
de adquisición. La fecha se puede seleccionar en el cuadro de calendario.

Más información

Información adicional sobre el punto de medición asignado al objeto de
adquisición, por ejemplo, la utilización prevista del hardware de medición.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Procesar datos de energía
3.4 Ajuste de las propiedades del objeto de adquisición

Consulte también
Configuración del objeto de adquisición (Página 36)

3.4.5

Modificación de la habilitación de los objetos de adquisición para el programa de
energía
Es posible modificar la relación de los distintos objetos de adquisición para generar el
programa de energía. La habilitación se activa (ajuste estándar) tras agregar un nuevo objeto
de adquisición. Para determinadas aplicaciones, puede ser útil desactivar este ajuste (p. ej.,
con fines de test o para utilizar el máximo de licencias Runtime):
Nota
Los objetos de adquisición no habilitados no se tienen en cuenta para las licencias Runtime
(Página 68).
Para ello existen las opciones siguientes:
● En la ventana de inspección: al crear y parametrizar el objeto de adquisición
● En la tabla de objetos de adquisición: de manera centralizada y clara para todos los objetos
de adquisición correspondientes

Procedimiento
Para cambiar la habilitación del objeto de adquisición para el programa de energía en la
ventana de inspección, proceda del modo siguiente:
1. Abra la carpeta "Objetos de adquisición" en el árbol del proyecto.
2. Haga doble clic en la tabla de objetos de adquisición en la que se ha creado el objeto de
adquisición.
Se abre la tabla de objetos de adquisición con los objetos de adquisición creados.
3. En la tabla de objetos de adquisición, haga clic en el objeto de adquisición que desee.
En la ventana de inspección "Propiedades" se muestran todos los parámetros del objeto de
adquisición.
4. Active/desactive la casilla de verificación "Habilitar objeto de adquisición" para la
configuración básica.
– Activada: el objeto de adquisición está habilitado para la generación del programa de
energía.
– Desactivada: el objeto de adquisición no se utiliza para la generación del programa de
energía.
Este ajuste del objeto de adquisición se actualiza también en la columna "Habilitar objeto de
adquisición" de la tabla de objetos de adquisición. Como alternativa, puede activar/desactivar
la casilla de verificación en la tabla de objetos de adquisición.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

39

Procesar datos de energía
3.4 Ajuste de las propiedades del objeto de adquisición

3.4.6

Fuente de datos de energía

3.4.6.1

Asignar fuente de datos de energía
Para poder crear un programa de energía, es necesario que para cada objeto de adquisición
haya disponible una fuente de datos de energía que proporcione datos de energía. Las fuentes
siguientes están disponibles para los objetos de adquisición como fuentes de datos de
energía:
● Datos de entrada procedentes de mediciones de hardware de medición conectado
(Página 25)
● Datos de energía procedentes de la memoria imagen de proceso o del área de memoria de
bits de la CPU (variables PLC) (Página 27)
● Datos de energía procedentes de bloques de datos (variables DB) (Página 28)
Para asignar la fuente de datos de energía existen las opciones siguientes:
● En la ventana de inspección: al crear y parametrizar el objeto de adquisición
● En la tabla de objetos de adquisición: de manera centralizada y clara para todos los objetos
de adquisición correspondientes

Requisitos
● Las variables PLC y variables DB se han declarado para la adquisición de datos de energía.
● El hardware de medición para la adquisición de datos de energía se ha configurado debajo
de la CPU S7-1500.
● La Energy Support Library con los bloques de drivers para el hardware de medición está
instalada.

En la ventana de inspección
Para asignar una fuente de datos de energía a un objeto de adquisición, proceda del modo
siguiente:
1. Abra la carpeta "Objetos de adquisición" en el árbol del proyecto.
2. Haga doble clic en la tabla de objetos de adquisición en la que se ha introducido el objeto
de adquisición.
Se abre la tabla de objetos de adquisición con los objetos de adquisición creados.
3. En la tabla de objetos de adquisición, haga clic en el objeto de adquisición que desee.
En la ventana de inspección "Propiedades" se muestran las propiedades del objeto de
adquisición.
4. En la navegación local, seleccione la entrada "Configuración > Fuente de datos de energía".
5. Haga clic con el botón derecho del ratón en el campo "Datos de energía".
Se abre el diálogo de selección con variables PLC/DB declaradas en toda la CPU o con los
módulos del hardware de medición disponible.
6. Dentro del diálogo de selección, vaya hasta la fuente de datos de energía que desee.
7. Acepte la selección haciendo clic sobre la marca de verificación verde.

40

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Procesar datos de energía
3.4 Ajuste de las propiedades del objeto de adquisición
La fuente de datos de energía se puede seleccionar en función de los tipos de datos de energía
seleccionados en el área "Tipo de datos de energía". En la ventana de inspección se pueden
realizar ajustes adicionales relativos al tipo de datos de energía (Página 43).
Además, la fuente de datos de energía asignada también se actualiza en la columna "Fuente
de datos de energía" de la tabla de objetos de adquisición.

En la tabla de objetos de adquisición
Si desea asignar o modificar la fuente de datos de energía para varios objetos de adquisición,
proceda del modo siguiente:
1. Abra la carpeta "Objetos de adquisición" en el árbol del proyecto.
2. Haga doble clic en la tabla de objetos de adquisición en la que se han introducido los objetos
de adquisición.
Se abre la tabla de objetos de adquisición con los objetos de adquisición creados.
3. En la columna "Fuente de datos de energía", haga clic en el campo situado dentro de la fila
del objeto de adquisición.
Se abre el diálogo de selección con variables PLC/DB declaradas en toda la CPU o con los
módulos del hardware de medición disponible.
4. Dentro del diálogo de selección, vaya hasta la fuente de datos de energía que desee.
5. Acepte la selección haciendo clic sobre la marca de verificación verde.
La fuente de datos de energía asignada se actualiza también en la ventana de inspección
"Propiedades". En la ventana de inspección se pueden realizar ajustes adicionales relativos al
tipo de datos de energía (Página 43).

3.4.6.2

Fuente de datos de energía
La tabla siguiente muestra los ajustes del objeto de adquisición en "Fuente de datos de
energía":
Ajuste

Descripción

Fuente de datos de energía

Están disponibles las siguientes fuentes de datos de energía:
● Módulos de hardware de medición con datos de entrada
procedentes de mediciones de los puntos de medición
o bien
● Variable PLC con los valores procedentes de la memoria imagen
del proceso o del DB
Las fuentes de datos de energía deben crearse y configurarse antes de
la parametrización de los objetos de adquisición. A continuación, esta‐
rán disponibles en el cuadro de diálogo para seleccionar la fuente de
datos de energía.

Tipo

El tipo de fuente de datos de energía mostrado depende de cuál sea la
fuente de energía seleccionada para la adquisición de energía. El tipo
de una fuente de datos de energía no puede modificarse.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

41

Procesar datos de energía
3.4 Ajuste de las propiedades del objeto de adquisición
Ajuste

Descripción

Agregar vigilancia de errores Vigilancia de errores para fuentes de datos de energía sin vigilancia de
de la fuente de datos de ener‐ errores integrada (p. ej., para valores de energía analógicos). La eva‐
gía
luación del error de hardware se programa en el programa de PLC.
Si se produce un error en la señal de entrada de la fuente de datos de
energía, se activa el disparador para errores de hardware.
Convenciones para la señal
● Duración mínima de dos veces el valor de ajuste para el "Ciclo de
adquisición"
● Flanco ascendente: Error entrante
● Señal "High": Hay un error
● Flanco descendente: Error saliente
● Señal "Low": No hay ningún error
Únicamente se registran los eventos de error que están presentes
mientras dura el ciclo de adquisición. Encontrará más información so‐
bre el ciclo de adquisición en el apartado Tipo de datos de energía
(Página 43).
Si está marcada esta casilla de verificación, la variable del disparador
solo se puede seleccionar para un error de hardware.
Disparador para errores de
hardware

Selección de la variable del disparador para un error de hardware.
Si se detecta un valor de energía no válido procedente de una fuente de
datos de energía que no tiene vigilancia de errores integrada, se activa
la variable seleccionada del tipo de datos "BOOL" y se genera un men‐
saje de error "Error de hardware".
Para que se diagnostique un error entrante en caso de flanco descen‐
dente, la evaluación de las variables del disparador para un error de
hardware debe programarse conforme a las convenciones de la señal.
Las convenciones para la señal se encuentran en la descripción del
ajuste "Agregar vigilancia de errores de la fuente de datos de energía".
Ejemplo:
● Un aparato de medida no soportado por la Energy Support Library
suministra un valor de potencia analógico.
● Además, el aparato de medida proporciona una salida binaria que
emite un flanco descendente en caso de error.
Solo se puede seleccionar si está marcada la casilla de verificación
"Agregar vigilancia de errores de la fuente de datos de energía".

42

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Procesar datos de energía
3.4 Ajuste de las propiedades del objeto de adquisición

Datos de energía avanzados
La siguiente tabla muestra opciones adicionales para los objetos de adquisición que pueden
configurarse usando la fuente de datos como hardware de medición en "Fuente de datos de
energía":
Ajuste

Descripción

Activa la adquisición de los
datos de energía avanzados
en el aparato

Solo se activa si el objeto de adquisición se ha configurado usando el
hardware de medición como fuente de datos de energía. El aparato
registra la fuente de datos de energía avanzada. La casilla de verifica‐
ción "Activa la adquisición de los datos de energía avanzados en el
aparato" se debe desactivar para equipos de hardware no soportados
(ejemplo: SINAMICS).

Solo se activa si el objeto de adquisición se ha configurado usando el
Activa la adquisición de los
valores mínimos y máximos hardware de medición como fuente de datos de energía y contiene los
de los datos de energía avan‐ valores mínimo y máximo de los datos de energía avanzados.
zados

Consulte también
Asignar fuente de datos de energía (Página 40)
Información importante sobre los datos de energía (Página 23)

3.4.6.3

Tipo de datos de energía
En función de la fuente de datos de energía del objeto de adquisición de energía, se procesan
los tipos de datos de energía siguientes.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

43

Procesar datos de energía
3.4 Ajuste de las propiedades del objeto de adquisición

Tipo de datos de energía
La tabla siguiente muestra los tipos de datos de energía disponibles con las unidades
correspondientes y ejemplos:
Ajuste
Señal de impulso

Unidad

Ejemplo:

Wh

Con un factor de normalización de 0,5, seis impulsos equivalen a 3 Wh.

l
hl
m³
m³ [n]
kg
t
pcs
Valor de contador
de energía

Wh
l
hl
m³
m³ [n]
kg
t
pcs

Valor de potencia

W
l/h

En diez segundos, la lectura numérica de un contador de energía cam‐
bia de 6.734.392 Wh a 6.734.414 Wh.
Esta diferencia equivale a un consumo de energía de 22 Wh y a un
consumo medio de potencia de 7,92 kW.
El reset del contador de energía durante un periodo de archivado activo
provoca un cálculo de valores de energía incorrectos para este periodo.
Para un valor de contador de energía válido se aplica lo siguiente:
● Valor de contador de energía < valor de desbordamiento
Un consumo medio de potencia de 180 kW durante diez segundos
equivale a un consumo de energía de 0,5 kWh o 500 Wh.

hl/h
m³/h
m³/
h [n]kg/h
t/h
pcs/h

Ciclo de adquisición
Por cada ciclo de adquisición se llaman una vez los bloques de drivers para la adquisición de
los datos de energía.
Se puede elegir de entre los ciclos de adquisición siguientes:
● 0,01 s
● 0,02 s
● 0,05 s
● 0,1 s
● 0,2 s
● 0,3 s
● 0,5 s

44

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Procesar datos de energía
3.4 Ajuste de las propiedades del objeto de adquisición
● 1s
● 2s
Se aplican los ajustes predeterminados siguientes:
● Señal de impulso: 0,01 s
● Valor de contador de energía: 1 s
● Valor de potencia: 0,1 s

Ajustes para el tipo de datos de energía seleccionado
La tabla siguiente muestra los ajustes adicionales para el tipo de datos de energía
seleccionado:
Ajuste

Descripción

Tipo de datos

Solo visible con el tipo de datos de energía "Valor de contador de ener‐
gía"
El tipo de datos del valor de contador de energía se muestra en función
de la fuente de datos de energía seleccionada que suministra el valor
del contador de energía. En la fuente de datos de energía, el tipo de
datos se muestra tal y como se definió mediante el tipo de objeto de
adquisición introducido en Tipo de datos de energía. Son posibles los
valores siguientes:
● Señal de impulso: solo admite variables booleanas
● Valor de contador de energía: admite LReal, Real, Lint, Dint, Int,
SInt, ULint, UDInt, UInt, USInt, LWord
● Valor de potencia: admite LReal, Real, Lint, Dint, Int, SInt, ULint,
UDInt, UInt, USInt, DWord
En el área Propiedades se muestran los mismos tipos de datos para la
fuente de datos de energía.

Unidad

Unidad física del valor de energía.
● Unidades para la señal de impulso: Wh, l, hl, m³, m³ [n], kg, t, pcs
● Unidades para el valor de contador de energía: Wh, l, hl, m³, m³ [n],
kg, t, pcs
● Unidades para el valor de potencia: W, l/h, hl/h, m³/h, m³/h [n], kg/h,
t/h, pcs/h

Factor de normalización

Indica el valor por el cual se multiplica el valor de energía capturado
para representarlo en la unidad seleccionada (p. ej., "W", "Wh", "m³" o
"m³/h").
Predeterminado a 1,0 por defecto. Rango admisible: 0 – 9999999
Ejemplo:
Un medidor suministra un valor de salida de 3,7 junto con la unidad
"kWh". Ajuste correspondiente en Energy Suite:
● Unidad: Wh
● Factor de normalización: 1000
Energy Suite procesa el valor como 3700 Wh.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

45

Procesar datos de energía
3.4 Ajuste de las propiedades del objeto de adquisición
Ajuste

Descripción

Sentido de flujo de la energía Configuración del sentido de flujo de la energía
● Consumidor
El consumidor (p. ej., una máquina eléctrica en modo consumidor)
toma la energía de la red eléctrica.
● Productor
El generador (p. ej., una máquina eléctrica en modo generador)
inyecta la energía en la red eléctrica.
Valor de desbordamiento

Solo para el tipo de datos de energía "Valor de contador de energía"
Indica el valor con el que el valor del contador de energía se pondrá a
0.
El ajuste predeterminado es 1000000 (1*10^6).
Valores que se pueden asignar:
● 1000000 (1*10^6)
● 1000000000 (1*10^9)
● 1000000000000 (1*10^12)
● Definido por el usuario

Valor de desbordamiento de‐ Solo configurable con valor de desbordamiento = "Definido por el usua‐
finido por el usuario
rio"
Indicación manual del valor de desbordamiento con el que el valor del
contador de energía se pondrá a 0. Rango de valores admisible: 1 - 1.0e
+15

Consulte también
Asignar fuente de datos de energía (Página 40)

3.4.7

Valores de energía periódicos

3.4.7.1

Especificar valores de energía para archivado periódico
Después de ser procesados como valores de energía periódicos, los valores de energía
adquiridos se archivan con sus etiquetas de fecha/hora. En función del tipo de datos de energía
seleccionado, están disponibles diferentes valores de energía para el archivado.
Para ello, al configurar el objeto de adquisición se seleccionan los valores de energía
periódicos y los periodos de archivado en la ventana de inspección.

Requisitos
● Los periodos de archivado con diversos valores se crean de forma centralizada en la
configuración del programa de energía.
Encontrará más información al respecto en el apartado "Definir períodos de archivado
(Página 53)".

46

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Procesar datos de energía
3.4 Ajuste de las propiedades del objeto de adquisición

Procedimiento
Para definir los valores de energía periódicos de un objeto de adquisición para el archivado,
proceda del modo siguiente:
1. Abra la carpeta "Objetos de energía" en el árbol del proyecto.
2. Haga doble clic en la tabla de objetos de adquisición en la que se ha creado el objeto de
adquisición.
Se abre la tabla de objetos de adquisición con los objetos de adquisición creados.
3. En la tabla de objetos de adquisición, haga clic en el objeto de adquisición que desee.
En la ventana de inspección "Propiedades" se muestran las propiedades del objeto de
adquisición.
4. En la navegación local, seleccione la entrada "Configuración > Datos de energía
periódicos".
5. Active la casilla de verificación para los valores de energía deseados:
– Consumo de potencia
– Consumo de energía
– Valor de contador de energía (solo puede activarse para el valor de contador de energía
Tipo de datos de energía)
6. Haga clic con el botón derecho del ratón en el campo "Periodo de archivado".
Se abre la tabla con los periodos de archivado creados de manera centralizada
(Página 53) para el programa de energía. Si no se ha creado previamente ningún periodo
de archivado personalizado, la tabla incluye únicamente dos periodos de archivado
estándar seleccionables (15 min y 60 min).
7. Acepte el periodo de archivado deseado haciendo clic sobre la marca de verificación verde
del diálogo de selección.

3.4.7.2

Datos de energía periódicos
Después de ser procesados como valores de energía periódicos, los valores de energía
adquiridos se archivan con sus etiquetas de fecha/hora. En función del tipo de datos de energía
seleccionado, están disponibles diferentes valores de energía para el archivado.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

47

Procesar datos de energía
3.4 Ajuste de las propiedades del objeto de adquisición

Valores de energía periódicos
La tabla siguiente muestra los valores de energía periódicos para el archivado:
Ajuste

Descripción

Consumo de potencia

Consumo de potencia medio por periodo de archivado. Se pueden ar‐
chivar los siguientes tipos de datos de energía seleccionados:
● Señal de impulso
● Valor de contador de energía
● Valor de potencia

Consumo de energía

Consumo de energía por periodo de archivado. Se pueden archivar los
siguientes tipos de datos de energía seleccionados:
● Señal de impulso
● Valor de contador de energía
● Valor de potencia

Valor de contador de energía Valor de contador de energía por periodo de archivado. Se pueden
archivar los siguientes tipos de datos de energía seleccionados:
● Valor de contador de energía
Previsión

Solo se generan objetos de adquisición para la gestión de cargas si se
selecciona la opción Previsión.

Asignación del periodo de archivado
Al seleccionar el periodo de archivado, se asignan tanto el objeto de adquisición como el valor
de energía seleccionado al periodo para el cálculo y el archivado. A cada objeto de adquisición
se le asigna exactamente un periodo de archivado.
Los nuevos periodos de archivado se especifican en los ajustes centrales para el programa de
energía (Página 53). El periodo de archivado se puede elegir como valor predeterminado
para un objeto de adquisición activando la casilla de verificación "Predeterminado" en el
diálogo "Periodos de archivado". Encontrará más información sobre los periodos de archivado
en "Períodos de archivado (Página 54)".
Nota
Evite usar el mismo hardware de medición varias veces como fuente de datos de energía
Asegúrese de que cada hardware de medición se usa una única vez como fuente de datos de
energía en un programa de energía, con el fin de evitar la sobrecarga de los canales de
comunicación.

48

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Procesar datos de energía
3.4 Ajuste de las propiedades del objeto de adquisición

Ejemplo de asignación de varios periodos de archivado
Para el archivado del consumo de energía, por ejemplo, con periodos de archivado de 15 y 60
minutos, cree un objeto de adquisición para cada periodo de archivado.
1. Para el objeto de adquisición con un periodo de archivado de 15 minutos, seleccione el
hardware de medición como fuente de datos de energía y active el archivado del consumo
de energía. A continuación, genere el programa de energía.
2. Para el objeto de adquisición con un periodo de archivado de 60 minutos, seleccione el
parámetro de salida "energy" del bloque de drivers del hardware de medición como fuente
de datos de energía. A continuación, active el archivado del consumo de energía para el
objeto de adquisición y genere de nuevo el programa de energía.
De este modo, el consumo de energía de un punto de medición se archiva en dos periodos de
archivado, y el hardware de medición solo se utiliza una vez como fuente de datos de energía
en el programa de energía.

3.4.8

Procesamiento

3.4.8.1

Ajustes de procesamiento generales
La tabla siguiente muestra los ajustes del objeto de adquisición en "Procesamiento":
Ajuste

Descripción

Ajustes de procesamiento generales
Ciclo de procesamiento interno

Los datos de energía activados para el archivado se calculan para
cada ciclo de procesamiento interno y se actualizan una vez.
Es posible seleccionar las siguientes duraciones para el ciclo de
procesamiento interno:
● 0,1 s
● 0,2 s
● 0,5 s
● 1s
El ciclo de procesamiento interno se puede modificar para actualizar
con mayor rapidez los datos de energía, p. ej., para los siguientes
fines:
● Visualización de los datos de energía
● Procesamiento posterior de los datos de energía a través del
programa de usuario (por ejemplo, gestión de cargas)
El valor predeterminado es 1 s.

Cálculo del valor actual del consumo de potencia

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

49

Procesar datos de energía
3.4 Ajuste de las propiedades del objeto de adquisición
Ajuste

Descripción

Intervalo de cálculo

Se utiliza para el cálculo del valor actual del consumo de potencia.
El valor actual del consumo de potencia se calcula para cada inter‐
valo de cálculo a partir del consumo de energía. El valor momentá‐
neo calculado corresponde al valor medio para todo el intervalo de
cálculo.
Solo se puede procesar si está seleccionado el tipo de datos de
energía "Valor de contador de energía" o "Señal de impulso".
Para el intervalo de cálculo se pueden seleccionar las duraciones
siguientes:
● 1s
● 2s
● 3s
● 4s
● 5s
● 6s
● 10 s
● 15 s
● 20 s
● 30 s
● 60 s
La duración predeterminada es 10 s.

50

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Procesar datos de energía
3.4 Ajuste de las propiedades del objeto de adquisición
Ajuste

Descripción

Prolongación del intervalo de
cálculo

La prolongación dinámica del intervalo de cálculo permite calcular el
valor actual del consumo de potencia con un tiempo de adquisición
adicional.
Ejemplo:
El consumo de potencia constante y se emite un impulso cada 4 s. Si
se ha configurado un intervalo de cálculo predeterminado de 10 s, se
aplica lo siguiente:
● En el primer intervalo de cálculo se cuentan 2 impulsos en lugar
de 2,5.
● En el segundo intervalo de cálculo se cuentan 3 impulsos.
En caso de prolongación del intervalo de cálculo con 5 s, se aplica lo
siguiente:
● En el primer intervalo de cálculo se cuentan 3 impulsos.
● En el segundo intervalo de cálculo se cuentan 3 impulsos.
El segundo intervalo de cálculo se inicia después de 12 s empezan‐
do con el primer intervalo de cálculo.

Prolongación del intervalo de
cálculo

El cálculo del valor actual del consumo de potencia empieza cuando
se cumple una de las condiciones siguientes:
● El valor de contador de energía ha cambiado.
● Ha transcurrido al menos la duración de la prolongación del
intervalo de cálculo.
● Se ha desconectado el consumidor.
Para la prolongación del intervalo de cálculo se pueden seleccionar
las duraciones siguientes:
● 1s
● 2s
● 3s
● 4s
● 5s
● 6s
● 10 s
● 15 s
● 20 s
● 30 s
● 60 s

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

51

Procesar datos de energía
3.4 Ajuste de las propiedades del objeto de adquisición

52

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Almacenar temporalmente y archivar los datos de
energía
4.1

4

Definir períodos de archivado

Periodos de archivado
Los periodos de archivado son intervalos de tiempo periódicos durante los cuales los datos de
energía brutos del objeto de adquisición que corresponda se procesan en la CPU para obtener
un valor de energía periódico con etiqueta de fecha/hora y, a continuación (dependiendo del
ajuste), se archivan en la CPU (SIMATIC Memory Card) o en WinCC Professional (fichero de
variables) (p. ej., cada 15 minutos).
Para garantizar que los valores de energía de toda la instalación procedentes de todos los
objetos de adquisición se archiven simultáneamente, la duración configurada del periodo de
archivado se puede sincronizar con un reloj maestro interno o externo:
● De forma predeterminada, se utiliza la hora interna de la CPU como reloj maestro para
todos los bloques del programa de energía. La hora de la CPU se sincroniza para ello con
un servidor de tiempo externo (por ejemplo, NTP).
Encontrará más información a este respecto en la ayuda en pantalla del sistema de
información de TIA Portal, en "Sincronización horaria (S7-1500)".
● Para la sincronización con un reloj externo (por ejemplo, la señal de sincronización de un
proveedor de energía) es necesario activar el impulso externo y configurar su fuente de
impulsos.
Los periodos de archivado se pueden crear de forma centralizada en la configuración del
programa de energía. Durante la configuración del objeto de adquisición, puede asignar
individualmente a cada objeto de adquisición el periodo de archivado correspondiente.
Encontrará más información sobre las convenciones de nombres para periodos de archivado
en el apartado "Características y convenciones (Página 20)".

Hora universal coordinada (UTC)
Nota
Puede ajustar la hora de la CPU a la UTC, por ejemplo para evitar discrepancias horarias en
los cambios al horario de verano.
El ajuste de la hora de la CPU debe realizarse conforme al procedimiento habitual y, por tanto,
se lleva a cabo fuera de Energy Suite, en la vista Online y diagnóstico de la CPU.
Encontrará más información a este respecto en la ayuda en pantalla del sistema de
información de TIA Portal, en "Determinar y ajustar la hora de una CPU".

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

53

Almacenar temporalmente y archivar los datos de energía
4.2 Períodos de archivado

Procedimiento
Para crear nuevos periodos de archivado en el cuadro de diálogo central de la administración,
proceda de la manera siguiente:
1. Abra la carpeta "Objetos de adquisición" en el árbol del proyecto.
2. Haga doble clic en el objeto "Configuración del programa de energía".
En el área de trabajo se abre el cuadro de diálogo con los ajustes para el programa de
energía.
3. En el área de navegación, seleccione "Periodos de archivado".
Se abre la tabla con la administración central de los periodos de archivado. Cada fila de la
tabla se corresponde con un periodo de archivado. Si no se ha creado ningún periodo de
archivado personalizado, la tabla incluye únicamente dos periodos de archivado
seleccionables (15 min y 60 min).
4. Solo para periodos de archivado de 24 h: Mediante la casilla de verificación "Aplicar los
ajustes de zona horaria de la configuración regional del PC de ingeniería local", ajuste la
zona horaria (diferencia respecto de la hora UTC) para la sincronización:
– Activada: Se aplica la zona horaria del PC de ingeniería local.
– Desactivada: La zona horaria se selecciona en la siguiente lista desplegable.
Seleccione la zona horaria deseada en la lista desplegable.
5. Para crear otro periodo de archivado, vaya a la columna "Nombre" de la tabla y haga doble
clic en "<Agregar>".
Se crea un nuevo periodo de archivado en la tabla.
6. Si es necesario, cree otros periodos de archivado con el mismo procedimiento.
7. Defina los ajustes para cada periodo de archivado:
– Nombre del periodo de archivado
– Duración del periodo de archivado
– Unidad para la duración del periodo de archivado
– Ajuste predeterminado
– Sincronización con impulso externo (reloj maestro) y selección de la fuente de impulsos
El significado de los distintos ajustes se describe con detalle en el apartado "Períodos de
archivado (Página 54)".

4.2

Períodos de archivado
Los periodos de archivado se pueden crear de forma centralizada en la configuración del
programa de energía. Durante la configuración del objeto de adquisición, puede asignar
individualmente a cada objeto de adquisición el periodo de archivado correspondiente.
De forma predeterminada, hay dos periodos de archivado (15 min y 60 min) con un reloj interno
preajustados para la sincronización.

54

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Almacenar temporalmente y archivar los datos de energía
4.2 Períodos de archivado

Zona horaria
La tabla siguiente muestra los ajustes de zona horaria para la sincronización en "Periodos de
archivado". Los ajustes de zona horaria solamente son válidos para la sincronización de los
periodos de archivado con una duración de 24 h.
Ajuste

Descripción

Aplicar los ajustes de zona
horaria de la configuración
regional del PC de ingeniería
local

● Activada: Los periodos de archivado con una duración de 24 h se
sincronizan de acuerdo con los ajustes de zona horaria de la
configuración regional del PC de ingeniería local.
● Desactivada: Selección en una lista desplegable de la zona horaria
necesaria para la sincronización de los periodos de archivado con
una duración de 24 h.
Desactivado por defecto.

Zona horaria

Zona horaria (diferencia respecto de la hora UTC).
Los periodos de archivado con una duración de 24 h se sincronizan a
las 0:00:00:000 hora UTC.
Si existe una discrepancia entre la hora UTC y la hora regional, la sin‐
cronización de los periodos de archivado de 24 horas puede ajustarse
de acuerdo con la zona horaria seleccionada.
La zona horaria solo se puede seleccionar si no está marcada la casilla
de verificación "Aplicar los ajustes de zona horaria de la configuración
regional del PC de ingeniería local".

Periodos de archivado
La tabla siguiente muestra los ajustes para los nuevos periodos de archivado en la
administración central:
Ajuste

Descripción

Nombre

De forma predeterminada, hay dos periodos de archivado (15 min y 60 min) con
un reloj interno preajustados para la sincronización. Si se necesitan otros valores
para la duración, es necesario crear más periodos de archivado.
El nombre del periodo de archivado es unívoco para toda la CPU y puede cam‐
biarse según los requisitos particulares.
Recomendación: Indique la duración del periodo de archivado en el nombre (por
ejemplo, UserPeriod_15min).
Encontrará más información sobre las convenciones en cuanto a nombres en el
apartado "Características y convenciones (Página 20)".

Duración

Tiempo tras el cual los valores de energía se calculan y se archivan periódica‐
mente. Las etiquetas de fecha/hora se generan de acuerdo con la duración.
Ejemplo: Con un periodo de archivado de 15 minutos, las etiquetas de fecha/hora
se generan en pasos de 15 minutos (empezando por las 12 horas).
Los valores de energía periódicos se archivan con la etiqueta de fecha/hora
correspondiente:
● en la CPU, como archivo CSV en la SIMATIC Memory Card
o bien
● en el fichero de variables del sistema SCADA WinCC Professional
15 min es el ajuste predeterminado para los nuevos periodos de archivado que
se agregan.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

55

Almacenar temporalmente y archivar los datos de energía
4.3 Definir archivado en CPU S7 (SIMATIC Memory Card)
Ajuste

Descripción

Unidad

Unidad de duración con la que se calculan y guardan periódicamente los valores
de energía.
Pueden ajustarse las siguientes unidades:
● min = minutos
● h = horas

Ajuste predetermi‐
nado

Permite conservar el periodo de archivado como valor predeterminado mientras
se configura la tabla de objetos de adquisición.
Desactivado por defecto.

Impulso externo

Un impulso externo dispara el reloj para la sincronización del periodo de archi‐
vado.
● Si se marca esta casilla de verificación, se asigna la señal de sincronización
(p. ej., de un proveedor de energía) de la columna "Fuente de impulso" al
impulso externo.
● Si no se marca esta casilla, el disparo de la sincronización del periodo de
archivado corre a cargo del reloj de la CPU interno. Para generar la etiqueta
de fecha/hora, la hora interna de la CPU se sincroniza con la hora UTC a
través de un servidor de tiempo externo (por ejemplo, NTP).
Desactivado por defecto.

Fuente de impulsos

Como fuente de impulso puede seleccionarse una variable del tipo de datos
"BOOL".
La variable debe asignarse a la señal de sincronización; por ejemplo, a la señal
del proveedor de energía.
Solo puede editarse si el impulso externo está activado.

Consulte también
Definir períodos de archivado (Página 53)

4.3

Definir archivado en CPU S7 (SIMATIC Memory Card)
Los valores de energía periódicos tratados, junto con sus etiquetas de fecha/hora, se
almacenan de forma temporal en los bloques de datos para el respaldo antes de que se
archiven en la CPU S7-1500 (o en una SIMATIC Memory Card insertada).
El número de bloques de datos para el respaldo se corresponde con el número de tablas de
objetos de adquisición creadas.
Los valores de energía se archivan en ficheros de variables (archivos CSV) en la CPU S7-1500
(SIMATIC Memory Card). Por cada periodo de archivado se escribe un registro en el fichero de
variables. Un registro contiene un valor de energía con etiqueta de fecha/hora y estado.
Encontrará información general sobre ficheros de datos en el apartado "Archivado de datos:
sinopsis" de la ayuda en pantalla del sistema de información del TIA Portal.
Para el archivado en la Memory Card, defina el número y el tamaño de los archivos del fichero
de variables.

56

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Almacenar temporalmente y archivar los datos de energía
4.4 Archivado y respaldo (CPU S7)

Requisitos
● Los valores de energía periódicos tratados con etiqueta de fecha/hora (consumo de
potencia, consumo de energía, valor de contador de energía) están habilitados para el
archivado.
Encontrará más información al respecto en el apartado "Especificar valores de energía
para archivado periódico (Página 46)".

Procedimiento
Para realizar los ajustes necesarios para el archivado en la CPU S7-1500, proceda del modo
siguiente:
1. Abra la carpeta "Objetos de energía" en el árbol del proyecto.
2. Haga doble clic en el objeto "Configuración del programa de energía".
En el área de trabajo se abre el cuadro de diálogo con los ajustes para el programa de
energía.
3. Active la entrada "Archivar y respaldar" en la navegación local.
4. En el área "Archivado", active el campo de opción "PLC (SIMATIC Memory Card)".
– Los parámetros del fichero de variables se muestran debajo del campo de opción.
– En el área "Respaldo" se muestra el número y el tamaño de los bloques de datos para
el respaldo.
5. En el área "Archivado" realice los ajustes para los ficheros de variables (ficheros de
variables en formato CSV) para la transferencia a la tarjeta de memoria:
– Nombre del fichero de variables
– Número de ficheros de variables
– Tamaño del fichero de variables
6. En el área "Respaldo", compruebe los parámetros mostrados para el tamaño y el área de
memoria de los bloques de datos.
El significado de los distintos ajustes se describe con detalle en el apartado "Archivado y
respaldo (CPU S7) (Página 57)".

4.4

Archivado y respaldo (CPU S7)

Archivado
Los valores de energía periódicos creados con etiqueta de fecha/hora se archivan en ficheros
de datos (archivos CSV) en la CPU S7-1500 (SIMATIC Memory Card). Para más información
sobre ficheros de datos y la estructura de archivos CSV, consulte el apartado "Archivado de
datos: sinopsis" de la ayuda en pantalla del sistema de información de TIA Portal.
Para el archivado en la SIMATIC Memory Card, defina el número y el tamaño de los archivos
del fichero de datos.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

57

Almacenar temporalmente y archivar los datos de energía
4.4 Archivado y respaldo (CPU S7)
La tabla siguiente muestra los ajustes en el área "Archivado" para el tipo de archivado "PLC
(SIMATIC Memory Card)":
Ajuste

Descripción

Nombre del fichero de
datos

El nombre del fichero de datos se utiliza para el nombre del archivo CSV (va‐
lores separados por comas). El nombre de archivo se compone del nombre
(como prefijo) y la etiqueta de fecha/hora del primer valor de energía contenido
en el fichero de datos.
En las CPU S7-1500 existen las limitaciones siguientes para el nombre del
fichero de datos:
● Longitud permitida del nombre: 1–29 caracteres
● Se admiten los caracteres siguientes: 0 ... 9, a ... z, A ... Z, "_", "-"
Encontrará más información sobre las convenciones en cuanto a nombres en
el apartado "Características y convenciones (Página 20)".

Número de ficheros
de datos

El número de ficheros de datos está limitado por la capacidad de la SIMATIC
Memory Card.
Si se alcanza el número seleccionado de ficheros de datos, los ficheros más
antiguos se borrarán y se creará un nuevo fichero.
Número permitido de ficheros de datos: 2–10
El valor predeterminado es 5.

Tamaño del fichero
de datos

Si el tamaño de un fichero de datos se aproxima al valor definido, se creará un
nuevo fichero de datos.
El tamaño máximo del fichero de datos está limitado por el sistema a 1024 MB.
El espacio necesario para un fichero de datos en la SIMATIC Memory Card se
calcula según la fórmula siguiente:
45 bytes + (número de ficheros de datos × 116 bytes)
Un registro contiene un valor de energía con etiqueta de fecha/hora y estado.
Recomendación:
Para el ajuste "Tamaño del fichero de datos", no establezca un valor superior
a 180 MB para evitar pérdidas de datos si el archivo CSV se volverá a utilizar,
por ejemplo, mediante "Microsoft Excel".
El valor predeterminado es 10 MB.

Respaldo
Los valores de energía periódicos, junto con sus etiquetas de fecha/hora, se almacenan de
forma temporal en los bloques de datos para el respaldo antes de que se archiven en la CPU
S7-1500 (SIMATIC Memory Card). El almacenamiento intermedio evita pérdidas de datos,
p. ej., en caso de que la SIMATIC Memory Card esté llena por haberse alcanzado el número
configurado de ficheros de datos.

58

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Almacenar temporalmente y archivar los datos de energía
4.6 Definir archivado en estación PC con WinCC Professional (fichero de variables)
La tabla siguiente muestra los ajustes en el área "Respaldo" para el tipo de archivado "PLC
(SIMATIC Memory Card)":
Ajuste

Descripción

Número de bloques
de datos

El número de bloques de datos se corresponde con el número de tablas de
objetos de adquisición creadas. Para cada tabla de objetos de adquisición se
necesita un bloque de datos para el respaldo. Los bloques de datos se crean
automáticamente al generarse el programa de energía.

Tamaño de los blo‐
ques de datos

Si utiliza bloques de datos más grandes tiene la opción, p. ej., de aumentar el
tiempo de respaldo de los valores de energía en la CPU.
El valor predeterminado es 10 KB.

Memoria asignada

El resultado de multiplicar el número por el tamaño de los bloques de datos

Consulte también
Ejemplo para archivado (CPU S7) (Página 59)
Definir archivado en CPU S7 (SIMATIC Memory Card) (Página 56)

4.5

Ejemplo para archivado (CPU S7)
El espacio necesario para un fichero de datos en la SIMATIC Memory Card se calcula según
la fórmula siguiente:
45 bytes + (número de ficheros de datos × 116 bytes)
El tamaño máximo del fichero de datos está limitado por el sistema a 1 GB. De esta manera,
puede archivar 9.256.395 registros (de modo aproximado, 9.200.000 o 9.000.000) de un
objeto de adquisición en el que esté activado el archivado del consumo de potencia, del
consumo de energía y del valor de contador de energía en un fichero de datos.
● Si el número de registros se redondea a 9.200.000:
Esto equivale a un archivado durante 31.940 días (87 años) para un objeto de adquisición
o durante 159 días para 200 objetos de adquisición con la misma configuración.
● Si el número de registros se redondea a 9.000.000:
Esto equivale a un archivado durante 31.250 días (85 años) para un objeto de adquisición
o durante 157 días para 200 objetos de adquisición con la misma configuración.

4.6

Definir archivado en estación PC con WinCC Professional (fichero de
variables)
Los valores de energía periódicos tratados junto con sus etiquetas de fecha/hora se
almacenan de forma temporal en los bloques de datos para el respaldo antes de que se
archiven en el sistema SCADA WinCC Professional. A continuación los valores de energía se
transfieren al fichero de variables en el sistema SCADA WinCC Professional. Esta forma de
comunicación con respaldo permite un archivado seguro y, por tanto, una clara mejora de la
calidad y la coherencia de los datos de energía relevantes para facturación.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

59

Almacenar temporalmente y archivar los datos de energía
4.6 Definir archivado en estación PC con WinCC Professional (fichero de variables)
El número de bloques de datos para el respaldo se corresponde con el número de tablas de
objetos de adquisición creadas.
Nota
WinCC Professional (fichero de variables)
Para archivar los valores de energía almacenados de forma temporal en los ficheros de
variables de WinCC Professional, active la casilla de verificación correspondiente en Energy
Suite.
Los ficheros de variables de WinCC Professional están configurados en los ajustes de WinCC
Professional.

Requisitos
● Los valores de energía periódicos tratados (consumo de potencia, consumo de energía,
valor de contador de energía) están habilitados para el archivado.
Encontrará más información al respecto en el apartado "Especificar valores de energía
para archivado periódico (Página 46)".

Procedimiento
Para realizar los ajustes necesarios para el archivado en el fichero de variables de WinCC
Professional, proceda del modo siguiente:
1. Abra la carpeta "Objetos de energía" en el árbol del proyecto.
2. Haga doble clic en el objeto "Configuración del programa de energía".
En el área de trabajo se abre el cuadro de diálogo con los ajustes para el programa de
energía.
3. Active la entrada "Archivar y respaldar" en la navegación local.
4. En el área "Archivado", active el campo de opción "WinCC Professional (fichero de
variables)".
– Debajo del botón de opción aparece un aviso que indica que el ajuste del fichero de
variables para este tipo de archivado debe realizarse en WinCC Professional.
Encontrará más información al respecto en el apartado "Crear estructura de archivado
para valores de energía (Página 100)".
– Se puede utilizar la casilla de verificación "Ajustes de comunicación avanzados (entre
PLC y WinCC)" para definir otros ajustes opcionales para la comprobación de la
transferencia de datos y la conexión entre PLC y WinCC Professional.
– En el área "Respaldo" se muestra el número y el tamaño de los bloques de datos para
el respaldo.
El campo de salida "Número de bloques de datos" indica el número de bloques de datos.
Este número se corresponde con el número de tablas de objetos de adquisición creadas
y no puede modificarse.
5. En el área "Respaldo", indique el tamaño de los bloques de datos para el respaldo.
En el campo de salida "Memoria ocupada" se muestra el resultado de multiplicar el número
definido por el tamaño de los bloques de datos.

60

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Almacenar temporalmente y archivar los datos de energía
4.7 Archivado y respaldo (WinCC Professional)
El significado de los distintos ajustes se describe con detalle en el apartado "Archivado y
respaldo (WinCC Professional) (Página 61)".

4.7

Archivado y respaldo (WinCC Professional)

Archivado
Los valores de energía periódicos tratados con etiqueta de fecha/hora se archivan en ficheros
de variables en el sistema SCADA WinCC Professional.
Nota
WinCC Professional (fichero de variables)
Los ficheros de variables de WinCC Professional se configuran en los ajustes de WinCC
Professional.
Encontrará más información al respecto en el apartado "Crear estructura de archivado para
valores de energía (Página 100)".
La tabla siguiente muestra los ajustes de comunicación avanzados (entre PLC y WinCC) para
el tipo de archivado seleccionado "WinCC Professional (fichero de variables)".
PRECAUCIÓN
Ajustes de comunicación avanzados
No se deben modificar los ajustes de comunicación avanzados configurados por defecto.
Si tiene alguna pregunta relativa al archivado, diríjase a nuestro a nuestro Service & Support.

Ajuste

Descripción

Ajustes de comunicación
avanzados (entre PLC y
WinCC)

Solo se puede activar para el tipo de archivado "WinCC Professional
(fichero de variables)"
Si se activa la casilla de verificación, es posible configurar los ajustes en
las siguientes áreas:
● Vigilancia de la conexión
● Handshake para la transmisión de datos
Desactivado por defecto.

Vigilancia de la conexión

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

61

Almacenar temporalmente y archivar los datos de energía
4.7 Archivado y respaldo (WinCC Professional)
Ajuste

Descripción

Tiempo de vigilancia de la co‐ Tiempo de vigilancia de la conexión para watchdog
nexión
La conexión entre el PLC y WinCC Professional se vigila con watchdog
de la siguiente manera:
● Si la conexión está establecida, el componente Energy Suite de
WinCC Professional confirma la petición de comparación del
contador watchdog.
● Si no hay confirmación antes de que transcurra el tiempo de
vigilancia para watchdog, se interrumpe la comunicación y se envía
un mensaje de error.
Es posible seleccionar las siguientes duraciones para el tiempo de vi‐
gilancia de la conexión:
● 1s
● 2s
● 5s
● 10 s
● 20 s
El ajuste predeterminado son 5 s.
Handshake para la transmisión de datos

62

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Almacenar temporalmente y archivar los datos de energía
4.7 Archivado y respaldo (WinCC Professional)
Ajuste

Descripción

Tiempo de vigilancia

Tiempo de vigilancia de escritura de los datos de energía en el fichero
de variables.
El handshake para la transmisión de datos se lleva a cabo si se cumplen
las siguientes condiciones:
● El componente Energy Suite confirma la petición de escritura de los
datos de energía en el fichero de variables de WinCC Professional
antes de que transcurra el tiempo de vigilancia.
● Para watchdog no se ha producido ningún error de tiempo de
vigilancia.
Es posible seleccionar las siguientes duraciones para el tiempo de vi‐
gilancia:
● 10 s
● 20 s
● 30 s
● 60 s
● 120 s
● 180 s
● 240 s
● 300 s
● 600 s
● 900 s
El ajuste estándar es 30 s.

Tiempo de espera

Tiempo de espera para la repetición de la petición de escritura de los
datos de energía en el fichero de variables.
La petición se repite hasta que se cumplen las siguientes condiciones:
● El tiempo de espera ha expirado.
● El componente Energy Suite confirma la petición.
Es posible seleccionar las siguientes duraciones para el tiempo de es‐
pera:
● 10 s
● 20 s
● 30 s
● 60 s
● 90 s
● 120 s
El ajuste predeterminado es 60 s.

Nota
Tiempo watchdog suficiente
Adapte el tiempo watchdog al número de objetos de adquisición. Cuantos más objetos de
adquisición estén configurados, más largo deberá ser el tiempo watchdog.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

63

Almacenar temporalmente y archivar los datos de energía
4.8 Ejemplo de archivado y respaldo (WinCC Professional)

Respaldo
Los valores de energía periódicos, junto con sus etiquetas de fecha/hora, se almacenan de
forma temporal en los bloques de datos (DB) para el respaldo antes de que se archiven en el
fichero de variables de WinCC Professional. El almacenamiento intermedio evita pérdidas de
datos, p. ej., en caso de que se interrumpa la conexión con WinCC Professional.
Para la duración del respaldo de los valores de energía periódicos, se debe indicar el tamaño
de los bloques de datos (DB de respaldo). Para la duración máxima del almacenamiento
temporal, son relevantes el número de valores de energía archivados y el periodo de archivado
ajustado.
La tabla siguiente muestra los ajustes en el área "Respaldo" para el tipo de archivado "WinCC
Professional (fichero de variables)":
Ajuste

Descripción

Número de bloques
de datos

El número de bloques de datos se corresponde con el número de tablas de
objetos de adquisición creadas. Para cada tabla de objetos de adquisición se
necesita un bloque de datos para el respaldo. Los bloques de datos se crean
automáticamente al generarse el programa de energía.

Tamaño de los blo‐
ques de datos

Si utiliza bloques de datos más grandes tiene, p. ej., la opción de aumentar el
tiempo de respaldo de los valores de energía en la CPU, p. ej., en caso cortarse
la comunicación con el sistema SCADA WinCC Professional.

Memoria asignada

El resultado de multiplicar el número por el tamaño de los bloques de datos.

El valor predeterminado es 10 KB.

Consulte también
Ejemplo de archivado y respaldo (WinCC Professional) (Página 64)
Definir archivado en estación PC con WinCC Professional (fichero de variables) (Página 59)

4.8

Ejemplo de archivado y respaldo (WinCC Professional)

Ejemplos de respaldo
Los ejemplos siguientes ilustran la relación entre el número de tablas de objetos de adquisición
y la duración del respaldo, en función de la CPU. Los ejemplos muestran el cálculo de una o
dos tablas de objetos de adquisición.
● La duración del respaldo depende del número de tablas de objetos de adquisición porque
para cada tabla se crea exactamente un bloque de datos para el respaldo.
● La asignación de los distintos objetos de adquisición a la tabla de objetos de adquisición
influye también en la duración máxima del respaldo.
La tabla siguiente muestra, para varias CPU S7-1500, el tamaño máximo del bloque de datos
para el respaldo y los valores predeterminados para el respaldo de un registro (p. ej., consumo

64

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Almacenar temporalmente y archivar los datos de energía
4.8 Ejemplo de archivado y respaldo (WinCC Professional)
de potencia) con un periodo de archivado de 15 min. Un valor de archivado, incluida la etiqueta
de fecha/hora, tiene un tamaño de 150 bytes.
CPU

Tamaño máximo del DB [MB]

Duración del respaldo [d]

CPU 1511

1

72

CPU 1516

5

375

CPU 1518

10

750

CPU 1510SP

0,75

52

CPU 1512SP

1

72

Ejemplo con una tabla de objetos de adquisición
La duración del respaldo se calcula a partir de las siguientes condiciones marco:
● CPU utilizada: CPU 1518
● Tamaño máximo del bloque de datos para el respaldo: 10 MB
● Número de tablas de objetos de adquisición: 1
● Número de objetos de adquisición: 50
● Datos de energía para el archivado por objeto de adquisición:
– Consumo de potencia
– Consumo de energía
● Duración del periodo de archivado: 15 min
● Duración del respaldo: 7 1/2 días
La duración del respaldo se calcula de la manera siguiente:
750 días / 2 unidades de datos de energía / 50 objetos de adquisición = 7 1/2 días

Ejemplo con dos tablas de objetos de adquisición
La duración del respaldo se calcula a partir de las siguientes condiciones marco:
● CPU utilizada: CPU 1518
● Tamaño máximo del bloque de datos para el respaldo: 10 MB
● Número de tablas de objetos de adquisición: 2
– Por tabla de objetos de adquisición: 25 objetos de adquisición
● Número de objetos de adquisición: 50
● Datos de energía para el archivado por objeto de adquisición:
– Consumo de potencia
– Consumo de energía
● Duración del periodo de archivado: 15 min
● Duración del respaldo: 15 días
La duración del respaldo se calcula de la manera siguiente:

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

65

Almacenar temporalmente y archivar los datos de energía
4.8 Ejemplo de archivado y respaldo (WinCC Professional)
1500 días / 2 unidades de datos de energía / 50 objetos de adquisición = 15 días
La duración del respaldo depende directamente del número de tablas de objetos de
adquisición porque para cada tabla se crea exactamente un bloque de datos para el respaldo.

66

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Generar el programa de energía
5.1

5

Definir los ajustes generales para el programa de energía
Una vez que se han configurado los objetos de adquisición y se han definido los ajustes para
el respaldo y el archivado, se deben definir las siguientes propiedades generales para el
programa de energía antes de la generación, si es necesario:
● Habilitación de la inhibición de avisos
● Tiempo de arranque de los bloques Energy Suite

Procedimiento
Para abrir el cuadro de diálogo para los ajustes generales del programa de energía, proceda
del siguiente modo:
1. Abra la carpeta "Objetos de adquisición" en el árbol del proyecto.
2. Haga doble clic en el objeto "Configuración del programa de energía".
En el área de trabajo se abre el cuadro de diálogo "General" con los ajustes para el
programa de energía.
3. Realice los ajustes deseados en el cuadro de diálogo "General". El significado de los
parámetros se describe con detalle en el apartado "Ajustes generales (Página 68)".

Consulte también
Definir períodos de archivado (Página 53)
Definir archivado en CPU S7 (SIMATIC Memory Card) (Página 56)
Definir archivado en estación PC con WinCC Professional (fichero de variables) (Página 59)

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

67

Generar el programa de energía
5.3 Licencias Runtime para Energy Suite

5.2

Ajustes generales
La tabla siguiente muestra los ajustes del programa de energía en "General":
Ajuste

Descripción

Inhibición de avisos

Selección de la variable (tipo de datos "BOOL") para la inhibición de avisos
de nivel superior para el programa de energía.
De este modo los avisos de bloques quedan inhibidos, p. ej. en caso de
rearranque de la CPU tras una caída de tensión.

Tiempo de arranque

Tiempo que los bloques de Energy Suite permanecen desactivados tras un
rearranque de la CPU.
El ajuste predeterminado es 10000 ms.
Ejemplo:
Con el tiempo de arranque se evita que los dispositivos de campo que toda‐
vía están arrancando causen errores o avisen de errores de arranque. Cuan‐
do los dispositivos de campo han terminado de inicializarse (arranque fina‐
lizado), están listos para entrar en funcionamiento.
El ajuste del tiempo de arranque depende del número de dispositivos co‐
nectados a la CPU. Cuantos más dispositivos haya en la línea PROFINET,
mayor será el tiempo de arranque que habrá que ajustar.

Consulte también
Definir los ajustes generales para el programa de energía (Página 67)
Períodos de archivado (Página 54)
Archivado y respaldo (CPU S7) (Página 57)
Archivado y respaldo (WinCC Professional) (Página 61)

5.3

Licencias Runtime para Energy Suite

Licencias Runtime disponibles
Energy Suite requiere un número de licencias Runtime en la CPU equivalente al número de
objetos de adquisición configurados.
Se pueden especificar las siguientes licencias Runtime para Energy Suite:
● Tipo de licencia "5 objetos de adquisición"
● Tipo de licencia "10 objetos de adquisición"
Las licencias Runtime existentes para Energy Suite se muestran para la configuración de la
CPU en la ventana de inspección "Propiedades" en:

68

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Generar el programa de energía
5.3 Licencias Runtime para Energy Suite
Licencias Runtime > Energy Suite > Licencias Runtime > Número de licencias adquiridas
Nota
Licencias Runtime
Antes de generar el programa de energía, asegúrese de que en su sistema de ingeniería haya
suficientes licencias Runtime disponibles. Los objetos de adquisición desactivados no están
incluidos en ninguna licencia Runtime.
Si no hay suficientes licencias Runtime, la generación del programa se interrumpe.

Ejemplo:
La representación siguiente muestra la configuración de licencias Runtime para el ejemplo
siguiente:
Si en el programa de energía se utilizan 32 objetos de adquisición, se necesitarán:
● 1 licencia de tipo "5 objetos de adquisición" y 3 licencias de tipo "10 objetos de adquisición"
o bien
● 7 licencias de tipo "5 objetos de adquisición"

Licencias Runtime requeridas
Número de objetos de adquisición configurados calculado a partir de lo siguiente:
● El número de objetos de adquisición configurados
● El número de actuadores configurados para la gestión de cargas

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

69

Generar el programa de energía
5.4 Generar el programa de energía
Para mostrar los objetos configurados para la adquisición y la gestión de cargas, siga los pasos
siguientes:
1. Abra la carpeta "Objetos de adquisición" en el árbol del proyecto.
2. Haga doble clic en el objeto "Configuración del programa de energía".
En el área de trabajo se abre el cuadro de diálogo con los ajustes para el programa de
energía.
3. Active la entrada "Licencias Runtime de Energy Suite" en la navegación local.
Ahora se mostrarán los objetos de adquisición y los objetos de actuadores configurados. Una
licencia de objeto de actuador corresponde a tres licencias de objetos de adquisición. El
número total determina el número de licencias Runtime de Energy Suite necesarias.
Nota
Procure que el número de licencias adquiridas siempre sea inferior o igual al número total de
licencias de objetos de adquisición requeridas, que se indica en Licencias Runtime disponibles.

5.4

Generar el programa de energía
Una vez que se han terminado de configurar los objetos de adquisición y los ajustes del
programa de energía, genere el programa de energía a partir de esos datos.

Requisitos
● Todos los objetos de adquisición intervinientes están habilitados para el programa de
energía.
● Los objetos de adquisición habilitados para el programa de energía están totalmente
configurados.
● Se han definido los ajustes para el programa de energía.
● Hay suficientes licencias Runtime disponibles para Energy Suite.
Encontrará más información al respecto en el apartado "Licencias Runtime para Energy
Suite (Página 68)".
● Las estructuras de nombres generadas en el sistema SCADA no exceden la longitud
máxima permitida de 85 caracteres para nombres de CPU.

Procedimiento
Para generar el programa de energía, proceda de la siguiente manera:
1. Abra la CPU S7-1500 en el árbol del proyecto.
2. Haga clic en el objeto "Objetos de adquisición", debajo de la CPU S7-1500, y seleccione el
comando "Generar programa de energía" en el menú contextual.
Como alternativa, en la opción "Configuración del programa de energía" de este cuadro de
diálogo, haga clic en el símbolo
para abrir "Generar programa de energía".
Se abre un cuadro de diálogo con opciones de selección para generar el programa de
energía.

70

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Generar el programa de energía
5.4 Generar el programa de energía
3. Seleccione el botón de opción "Programa de energía Adquisición de datos de energía".
Recuerde que, si hace clic en "Programa de energía Adquisición de datos de energía", debe
haber objetos de adquisición configurados. Si no hay ningún objeto de adquisición
configurado, se mostrará un mensaje de error.
Para generar un programa de energía para la gestión de cargas, consulte el apartado
"Generar programas de energía (Página 133)". Si la generación de energía íntegra (incluida
la adquisición de energía y la gestión de cargas) se activa y no hay ninguna gestión de
cargas configurada, se mostrará un mensaje de error.
4. Haga clic en el botón "Generar". Para la generación de energía íntegra (incluida la
adquisición de energía y la gestión de cargas), recuerde configurar una alimentación y
actuadores mínimos para la gestión de cargas.
El generador comprueba la integridad y la plausibilidad de la configuración de los objetos
de adquisición e inicia la generación del programa de energía. En la ventana de inspección,
en la sección "Información > Energy Suite", se muestran informaciones y eventos durante
la generación del programa de energía. El estado de la generación se muestra con una
barra de progreso.
5. Con la función "Ir a" puede saltar hasta la posición de la configuración que sea relevante
para el evento en cuestión.
6. Corrija la configuración en caso necesario y vuelva a iniciar la generación del programa de
energía.

Resultado
Una vez que se han configurado completamente y sin errores los objetos de adquisición, en la
carpeta "Bloques de programa", debajo de la CPU S7-1500, se crean instancias de los bloques
necesarios a partir de la librería de Energy Suite y de la librería del hardware de medición.
Asimismo, en la carpeta "Bloques de programa" se completan otros componentes necesarios;
p. ej., bloques de organización y bloques de datos, y se crean las interconexiones necesarias.
En la carpeta "Tipos de datos PLC", debajo de la CPU S7-1500, se crean instancias de los tipos
de datos a partir de la librería de Energy Suite y de la librería del hardware de medición.
Se genera el programa de energía para todos los objetos de adquisición habilitados
(independientemente de la distribución en las tablas de objetos de adquisición).

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

71

Generar el programa de energía
5.4 Generar el programa de energía

①
②
③
④
⑤

72

Objeto

Descripción

Energy Suite – program

Nueva carpeta para el programa de energía

EnS - block types (Página 75)

Subcarpeta "Acquisition – block types" con los blo‐
ques de Energy Suite y los bloques de drivers del
hardware de medición (bloques de función)

Bloques de programa EnS (Pági‐
na 78)

Carpeta para otros bloques (bloques de organiza‐
ción, funciones, DB, etc.)

EnS - Objetos de adquisición (Pá‐ Bloques para objetos de adquisición (bloques de
gina 81)
datos)
Energy Suite: tipos de datos (Pá‐
gina 82)

Carpeta con los tipos de datos de Energy Suite y los
tipos de datos del hardware de medición

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Generar el programa de energía
5.4 Generar el programa de energía

Escenario para la generación del delta
● Agregar: si agrega un nuevo objeto de adquisición en la "Tabla de objetos de adquisición"
y genera un programa de energía durante la generación del delta, los bloques recién
generados se añadirán a los bloques existentes en la carpeta "Energy Suite - program". Las
respectivas llamadas de funciones se actualizan como corresponda.
– Durante el runtime del PLC, solo se archivarán con etiqueta de fecha/hora los bloques
recién agregados sin reiniciar el PLC.
● Cambiar: si durante la generación del delta se edita un nuevo objeto de adquisición en la
"Tabla de objetos de adquisición" y se genera un programa de energía, los bloques
editados se generarán y se agregarán a los bloques existentes en la carpeta "Energy Suite
- program". Los parámetros modificados de un objeto de adquisición se actualizan en
runtime en la columna "Valor inicial" solo para un DB de instancia. Para que los cambios de
la columna "Valor inicial" sean visibles en la columna "Valor de monitorización" en runtime,
haga clic en "Cargar valores iniciales como valores reales". Las respectivas llamadas de
funciones se actualizan como corresponda.
– En el runtime del PLC solo se reinicializarán los EnOs editados; los objetos de
adquisición existentes permanecen por lo general invariables y el periodo de energía
actual sigue siendo válido.
– En el runtime de SCADA: normalmente, esto no afecta a las instancias de objetos de
energía existentes.
● Borrar: si borra un objeto de adquisición en la "Tabla de objetos de adquisición" y genera un
programa de energía durante la generación del delta, solo se borrarán los bloques
seleccionados, lo que no influirá en los bloques existentes en la carpeta "Energy Suite program". Las respectivas llamadas de funciones se actualizan como corresponda.
– Durante el runtime del PLC, no se archivarán con etiqueta de fecha/hora los bloques
borrados, sino solo los bloques restantes, sin reiniciar el PLC.

Consulte también
Modificación de la habilitación de los objetos de adquisición para el programa de energía
(Página 39)
Definir los ajustes generales para el programa de energía (Página 67)
Información importante sobre los datos de energía (Página 23)

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

73

Generar el programa de energía
5.5 Estructura del programa de energía

5.5

Estructura del programa de energía

5.5.1

Estructura del programa de energía
Cuando se crea el programa de energía, se crean automáticamente las siguientes carpetas
bajo la CPU S7-1500:
● Carpeta "Energy Suite - program" debajo de "Bloques de programa", con subcarpetas
– [EnS General program elements]
- EnS - block types (Página 75)
- Bloques de programa EnS (Página 78)
– EnS - Objetos de adquisición (Página 81)
● Carpeta "Energy Suite: tipos de datos (Página 82)" debajo de "Tipos de datos PLC"
Nota
Bloques del programa de energía
A partir de los objetos de adquisición configurados y los ajustes del programa de energía,
SIMATIC Energy Suite genera automáticamente todos los bloques y tipos de datos
necesarios, así como sus interconexiones.
Para aplicaciones estándar con SIMATIC Energy Suite no es necesario adaptar estos bloques.
PRECAUCIÓN
Modificaciones manuales de bloques del programa de energía
Si después de generarse el programa de energía realiza modificaciones manuales de los
bloques, que no haya errores en los bloques o en el programa de energía será
responsabilidad suya.
PRECAUCIÓN
Uso de bloques de Energy Suite en otros programas de PLC
Si utiliza bloques de Energy Suite de la librería global en otros programas de PLC, será
responsabilidad suya que dichos bloques no causen errores.

Consulte también
Objetos de adquisición y programa de medición del consumo de energía (Página 31)

74

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Generar el programa de energía
5.5 Estructura del programa de energía

5.5.2

EnS - block types
La estructura de un programa de energía depende las siguientes configuraciones:
● Fuentes de datos de energía (Página 23)
● Objetos de adquisición habilitados (Página 36)
● Configuración del programa de energía (Página 67)
A continuación se describe cómo funcionan básicamente los bloques de Energy Suite en el
programa de energía para datos de energía procedentes de la memoria imagen de proceso de
la CPU (variables PLC) o de bloques de datos (variables DB).
Si se reciben datos de medición del hardware de medición conectado, los bloques de función
(FB) específicos del hardware se completan con funcionalidad de driver. Encontrará más
información al respecto en el apartado "Estructura del programa de energía para hardware de
medición (Página 84)".

Funcionamiento de los bloques de Energy Suite
El comodín "xxx" en la figura significa que hay diferentes tipos de este bloque; p. ej., para
"EnS_Drvxxx":
● EnS_DrvPulse
● EnS_DrvCounterLInt
Encontrará más tipos en la tabla "EnS - block types", después de la figura.
La figura siguiente muestra el funcionamiento de los bloques de Energy Suite:

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

75

Generar el programa de energía
5.5 Estructura del programa de energía

(Q6B2UJDQL]DWLRQ
)XQFLRQHVGHRUJDQL]DFLµQ
SHMLQKLELFLµQGHDYLVRV
,QKLELFLµQGHDYLVRV
XQDLQVWDQFLD
SRUFDGD2%GHDODUPD
F¯FOLFD

,PSXOVRGHVLQFURQL]DFLµQ
,PSXOVRGHVLQFURQL]DFLµQ
RELHQ
+RUDLQWHUQD
GHOD&38

6&38
9DORUHVGHHQHUJ¯D

(Q6B7LPH6\QF

(Q6B&DOF(QHUJ\'DWD

(Q6B(QHUJ\'DWD%DVLF

6LQFURQL]DFLµQKRUDULD

&£OFXORGHYDORUHV
SHULµGLFRVGHHQHUJ¯D\
SRWHQFLD

SHMPLQ 
GHXQREMHWRGHHQHUJ¯D

XQDLQVWDQFLD
SRUFDGDREMHWRGHHQHUJ¯D
SXQWRGHPHGLFLµQ

XQDLQVWDQFLD
SRUFDGDREMHWRGH
HQHUJ¯D

XQDLQVWDQFLD
SRUFDGDSHU¯RGRGH
DUFKLYDGR

(Q6B'UY[[[

9LVXDOL]DFLµQHQ
UXQWLPH+0,R
UXQWLPH6&$'$
(Q6B%XIIHU:ULWH
(VFULELUGDWRVHQHO
'%GHDOPDFHQD
PLHQWRLQWHUPHGLR

PXOWLLQVWDQFLDHQHO'%
GHLQVWDQFLDGH
(Q6B(QHUJ\'DWD%DVLF

'ULYHUVSDUDDGTXLVLFLµQGH
ORVGDWRVGHHQHUJ¯D
SURFHGHQWHVGHOD&386
XQEORTXHGHGULYHUV
SRUFDGDSXQWRGH
PHGLFLµQ

+DUGZDUHGHPHGLFLµQ
9DORUHVGHHQHUJ¯D

:LQ&&
3URIHVVLRQDO
(Q6B%XIIHU:RUN'%

(Q6/B'UY[[[
'ULYHUVSDUDDGTXLVLFLµQGH
GDWRVGHHQHUJ¯D
SURFHGHQWHVGHKDUGZDUH
GHPHGLFLµQ

%ORTXHGHGDWRVSDUD
DGPLQLVWUDFLµQGHO'%
GHDOPDFHQDPLHQWR
LQWHUPHGLR

XQEORTXHGHGULYHUV
SRUFDGDSXQWRGH
PHGLFLµQ

(Q6B$UFKLYH[[[
$UFKLYDGR
GHGDWRVGHHQHUJ¯D

XQDLQVWDQFLD
SRUFDGDREMHWRGH
HQHUJ¯D

)LFKHURGH
YDULDEOHV

6&38
'DWD/RJ

(Q6B%XIIHU'%

&RPXQLFDFLµQF¯FOLFD
RDF¯FOLFD

%ORTXHGHGDWRVSDUD
DOPDFHQDPLHQWR
LQWHUPHGLRGHYDORUHVGH
HQHUJ¯DSHULµGLFRV

(Q6B%XIIHU5HDG
/HHUGDWRVGHO'%GH
DOPDFHQDPLHQWR
LQWHUPHGLR
PXOWLLQVWDQFLDHQHO'%
GHLQVWDQFLDGH
(Q6B$UFKLYH'DWD/RJ

*

EnS_BufferRead no se llama durante el archivado en WinCC Professional
Flujo de datos de energía
Datos de parametrización
Bloques utilizados internamente
Bloques para una tabla de objetos de adquisición

76

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Generar el programa de energía
5.5 Estructura del programa de energía

EnS - block types
Cuando se ha generado el programa para la medición del consumo de energía, la subcarpeta
"Acquisition - block types" contiene las instancias de todos los bloques de función de la librería
de Energy Suite. Si el hardware de medición es la fuente de datos de energía, esta subcarpeta
contiene otra subcarpeta "EnSL - block types" con las instancias del bloque de drivers de la
librería del hardware de medición (Página 84) correspondiente.
Bloque de función

Descripción

EnS_ArchiveDataLog
(Página 149)

Datos de energía archivados en fiche‐
ros de variables (archivo CSV en la SI‐
MATIC Memory Card de la CPU).

EnS_ArchiveHMI (Pági‐
na 158)

Datos de energía archivados en fiche‐
ros de variables de WinCC Professio‐
nal.

EnS_BufferRead (Pági‐
na 165)

Lee los datos del DB de respaldo
(EnS_BufferDB (Página 197)).

Ejemplo en STEP 7 (TIA Portal)

Se utiliza internamente.
EnS_BufferWrite (Pági‐
na 167)

Escribe datos en el DB de respaldo
(EnS_BufferDB (Página 197)).
Se utiliza internamente.

EnS_CalcEnergyData
(Página 170)

Calcula periódicamente la energía con‐
sumida y el consumo de potencia me‐
dio.

EnS_DrvAnalogValue
(Página 176)

Bloque de drivers para una entrada
analógica (p. ej., valor de potencia, va‐
lor de caudal).

EnS_DrvCounterLInt
(Página 178)

Bloque de drivers para valores de con‐
tador de tipo LINT.

EnS_DrvCounterLReal
(Página 180)

Bloque de drivers para valores de con‐
tador de tipo LReal.

EnS_DrvPulse (Pági‐
na 182)

Bloque de drivers para una entrada de
impulsos.

EnS_EnergyDataAdv
(Página 184)

Datos de energía avanzados de un apa‐
rato (por ejemplo, sobre corriente de fa‐
se y valores de tensión).

EnS_EnergyDataAdv‐
MinMax (Página 185)

Valores mínimos y máximos de los da‐
tos de energía avanzados de un dispo‐
sitivo.

EnS_EnergyDataBasic
(Página 187)

Datos de energía generales de un apa‐
rato (por ejemplo, potencia, valor de
contador de energía).

EnS_Organization (Pá‐
gina 191)

Contiene datos y parámetros generales
sobre la organización del programa
central.

EnS_TimeSync (Pági‐
na 192)

Sincroniza los tiempos para el cálculo
de los datos de energía.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

77

Generar el programa de energía
5.5 Estructura del programa de energía

5.5.3

Bloques de programa EnS
Cuando se ha generado el programa, la carpeta "EnS - program blocks" contiene bloques
adicionales, como bloques de organización, bloques de datos y funciones (FC) que se
necesitan para el programa de energía.

78

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Generar el programa de energía
5.5 Estructura del programa de energía

EnS - program blocks
Cuando se ha generado el programa, la carpeta "EnS - program blocks" contiene los siguientes
bloques:

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

79

Generar el programa de energía
5.5 Estructura del programa de energía

Bloque

Descripción

Ejemplo en STEP 7 (TIA Portal)

Bloque de organización
EnS_CycInt<NNNcc>OB

Tres OB de alarma cíclica con distintos ajustes
de tiempo. "NNN" y "cc" son comodines para el
tiempo y la unidad.
Ejemplo:
Con tres velocidades de ciclo de 100 ms,
1000 ms y 10.000 ms se generan los siguientes
OB de alarma cíclica:
● "EnS_CycInt100msOB"
● "EnS_CycInt1sOB"
● "EnS_CycInt10sOB"

EnS_StartupOB

OB de arranque 100

Función
EnS_Archi‐
ve_CycInt<NNNcc>

FC para el archivado de los datos de energía en
el OB de alarma cíclica. "NNN" y "cc" son como‐
dines para la duración y la unidad.
Ejemplo:
Con un tiempo de ciclo de 500 ms se crea el FC
"EnS_Archive_CycInt500ms".

EnS_Basic_CycInt<NNNcc>

FC para los datos de energía generales de los
objetos de adquisición en el OB de alarma cícli‐
ca. "NNN" y "cc" son comodines para la duración
y la unidad.
Ejemplo:
Con un tiempo de ciclo de 1 s se crea "EnS_Ba‐
sic_CycInt1s".

EnS_Drv_CycInt<NNNcc>

FC para los bloques de drivers de los objetos de
adquisición en el OB de alarma cíclica. "NNN" y
"cc" son comodines para la duración y la unidad.
Ejemplo:
Con un tiempo de ciclo de 100 ms se crea
"EnS_Archive_CycInt100ms".

EnS_Org_CycInt<NNNcc>F
C

Tres FC para la organización central del progra‐
ma de energía que se invocan en OB de alarma
cíclica y en OB de arranque. "NNN" y "cc" son
comodines para el tiempo de ciclo y la unidad.
Ejemplo:
Con tres tiempos de ciclo de 1 s, 100 ms y 10 s
se crean los siguientes FC:
● "EnS_Org_CycInt1sFC"
● "EnS_ Org_CycInt100msFC"
● "EnS_ Org_CycInt10sFC"

EnS_StartupFC

FC que se invoca en el OB de arranque.

EnS_Sync_CycInt<NNNcc>

FC para la sincronización horaria. "NNN" y "cc"
son comodines para la duración y la unidad.
Ejemplo:

80

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Generar el programa de energía
5.5 Estructura del programa de energía
Bloque

Descripción

Ejemplo en STEP 7 (TIA Portal)

Con un tiempo de ciclo de 500 ms se crea el FC
"EnS_Sync_CycInt500ms".
Bloque de datos
EnS_Archive<N>

DB de instancia del FB "EnS_ArchiveDataLog".
"N" es un comodín para el número del búfer.
Ejemplo:
Para el número de respaldo "1" se crea el DB de
instancia "EnS_Archive1".

DrvPulse_<Nombre del obje‐ DB de instancia del FB "EnS_DrvPulse".
to de adquisición>
Ejemplo:
A partir de un objeto de adquisición llamado
"Transformer1" se crea el DB de instancia
"DrvPulse_Transformer1".
EnS_Calc_<Nombre del obje‐ DB de instancia del FB "EnS_CalcEnergyData".
to de adquisición>
Ejemplo:
A partir de un objeto de adquisición llamado
"Transformer1" se crea el DB de instancia
"EnS_Calc_Transformer1".
EnS_Org_CycInt<NNNcc>

DB de instancia del FB "EnS_Organization".
"NNN" y "cc" son comodines para el tiempo de
ciclo y la unidad.
Ejemplo:
Con un tiempo de ciclo de 10 ms se crea un DB
de instancia "EnS_Org_Cyclnt10ms".

EnS_Sync_Period_<NNNcc> DB de instancia del FB "EnS_TimeSync". "NNN"
y "cc" son comodines para el periodo de sincro‐
nización y la unidad.
Ejemplo:
Con un periodo de sincronización de 15 minutos,
se crea el DB de instancia "EnS_Time15m".

Consulte también
EnS_BufferDB (Página 197)
EnS_BufferWorkDB (Página 198)

5.5.4

EnS - Objetos de adquisición
Cuando se ha generado el programa, la carpeta "EnS - acquisition objects" contiene una
subcarpeta denominada "<Nombre de la tabla de objetos de adquisición>" por cada tabla de
objetos de adquisición con objetos de adquisición.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

81

Generar el programa de energía
5.5 Estructura del programa de energía
La carpeta "<Nombre de la tabla de objetos de adquisición>" contiene los bloques de datos de
instancia
● de los bloques de función necesarios para los objetos de adquisición en el programa de
energía.
● con los valores de energía periódicos de los objetos de adquisición que están disponibles
para el respaldo y el archivado.
Los bloques de datos para el respaldo de los datos de energía también se crean en esta
carpeta como instancias a partir de la librería de Energy Suite.

<Nombre de la tabla de objetos de adquisición>
En función de la configuración de los objetos de adquisición, la carpeta "<Nombre de la tabla
de objetos de adquisición>" puede contener los siguientes bloques de datos:
Bloque de datos

Descripción

Ejemplo en STEP 7 (TIA Portal)

<Nombre del objeto de ad‐ Bloque de datos con información sobre el punto
quisición>
de medición y los valores de energía disponi‐
bles para el archivado.
EnS_Buffer<ID unívoco de
la tabla de objetos de ad‐
quisición> (Página 197)

Bloque de datos para el respaldo de los datos
de energía registrados.
Ejemplo:
A partir de una tabla de objetos de adquisición
con el ID unívoco XXXXX de la tabla de objetos
de adquisición se crea el DB de respaldo
"EnS_BufferXXXXX".

EnS_BufferWork<ID unívo‐ Bloque de datos para información de control y
co de la tabla de objetos de estado del respaldo.
adquisición> (Página 198) Ejemplo:
A partir de una tabla de objetos de adquisición
con el ID unívoco XXXXX de la tabla de objetos
de adquisición se crea el DB de respaldo
"EnS_BufferWorkXXXXX".

5.5.5

Energy Suite: tipos de datos
La librería de Energy Suite contiene la información necesaria para los tipos de datos del
programa de energía.

82

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Generar el programa de energía
5.5 Estructura del programa de energía

Energy Suite - data types
Cuando se ha generado el programa, la carpeta "Energy Suite - data types" contiene las
instancias de los siguientes bloques de tipos de datos de la librería de Energy Suite.
Tipo de datos

Descripción

EnS_typeAnalogValue
(Página 199)

Tipo de datos para valores de proceso analógi‐
cos

EnS_typeBufferReadCtrl
(Página 199)

Tipo de datos para información de control del
respaldo para leer datos

EnS_typeBufferReadStat
(Página 200)

Tipo de datos para información de datos y esta‐
do del respaldo para leer datos

EnS_typeBufferWork (Pá‐
gina 200)

Tipo de datos para control e información de es‐
tado del respaldo

EnS_typeBufferWriteCtrl
(Página 202)

Tipo de datos para información de control del
respaldo para escribir datos

EnS_typeBufferWriteStat
(Página 202)

Tipo de datos para información de estado del
respaldo para escribir datos

EnS_typeEnergyAdv (Pá‐
gina 203)

Tipo de datos para datos de energía avanzados

EnS_typeEnergyBasic
(Página 204)

Tipo de datos para datos de energía básicos

EnS_typeEnergyCounter
(Página 205)

Tipo de datos para valor de contador de energía

Ejemplo en STEP 7 (TIA Portal):

EnS_typeEnergyMeta (Pá‐ Tipo de datos para metadatos del punto de me‐
gina 205)
dición (información sobre la configuración del
objeto de adquisición)
EnS_typeHMIWriteCtrl
(Página 208)

Tipo de datos para información de control del
respaldo para escribir datos de energía en el fi‐
chero de variables de WinCC Professional

EnS_typeHMIWriteStat
(Página 209)

Tipo de datos para información de estado del
respaldo para escribir datos de energía en el fi‐
chero de variables de WinCC Professional

EnS_typeOrgData (Pági‐
na 210)

Tipos de datos para datos de organización

EnS_typeSync (Pági‐
na 210)

Tipo de datos para sincronización horaria

EnS_typeValue (Pági‐
na 211)

Tipo de datos para valores de salida

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

83

Generar el programa de energía
5.5 Estructura del programa de energía

5.5.6

Bloques de drivers para hardware de medición

5.5.6.1

Estructura del programa de energía para hardware de medición

Bloques de drivers del hardware de medición para STEP 7 (TIA Portal)
Los datos de energía (datos de entrada) del hardware de medición se ponen a disposición de
diferentes maneras (p. ej. diferencias en el formato de los datos o en la dirección de los
registros). Estas diferencias dificultan el acceso y el procesamiento posterior de los datos de
energía del hardware de medición en el programa de PLC.
Para ello, a través de una Energy Support Library (EnSL), el hardware de medición dispone de
bloques de función (FB) específicos con funcionalidad de driver además de los bloques de
Energy Suite. Estos bloques de función específicos para hardware (en adelante llamados
bloques de drivers) constituyen la interfaz entre el hardware de medición que corresponda y el
sistema de automatización.
Por medio de los bloques de drivers se leen los datos de energía del hardware de medición y,
una vez unificados, dichos datos se ponen a disposición del sistema de automatización. Así los
datos de energía brutos se suministran de manera más fácil y rápida al programa de PLC y a
Energy Suite. A continuación, los datos de energía brutos se tratan y se procesan por medio
de los componentes de Energy Suite.

Interacción de los bloques de Energy Suite y los bloques de drivers para hardware de medición
Al generarse el programa de energía, en la carpeta "EnS - block types" del programa de
energía se crean y se interconectan automáticamente las instancias de los bloques de drivers
específicos para el hardware de medición (en función de las fuentes de datos de energía
seleccionadas).
En los siguientes apartados de la presente documentación se describe la interacción básica de
los bloques de Energy Suite y los bloques de drivers específicos para el hardware de medición
en el programa de energía.

Documentación de los bloques de drivers específicos para el hardware de medición
Encontrará una descripción detallada del funcionamiento y de los parámetros de los bloques
de drivers en la documentación del hardware de medición. La documentación del hardware de
medición forma parte de la Energy Support Library (EnSL).

5.5.6.2

Procesamiento de datos de energía según el principio "EPS"
Según el principio EPS, el procesamiento de los datos de energía puede dividirse en las fases
de "Entrada", "Procesamiento" y "Salida".

84

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Generar el programa de energía
5.5 Estructura del programa de energía

Funcionamiento de los bloques de función
La figura siguiente muestra el funcionamiento general de los bloques de función para el
hardware de medición según el principio "EPS":
(QWUDGD

3URFHVDPLHQWR

6DOLGD

%ORTXHVGHGULYHUV

'DWRVGHHQHUJ¯DF¯FOLFRV

(Q6/B'UY
%DVLF

(QHUJLH
/HLVWXQJ

(Q6/B'UY
$GY

$GY'DWD

(Q6B&DOF
(QHUJ\'DWD

+DUGZDUH
'DWRVGHHQHUJ¯DDF¯FOLFRV

ːHQHUJ¯D
SRWHQFLD

8,IFRV˳
634(

$GG'DWD

(Q6/B'UY
$GG

$GG'DWD

9DORUHVP¯QP£[
YDORUHV7+'5HWF

(Q6B(QHUJ\
'DWD%DVLF

(Q6B(QHUJ\
'DWD$GY

(Q6B(QHUJ\
'DWD$GG

Datos de energía mediante comunicación cíclica (memoria imagen del proceso)
Datos de energía mediante comunicación acíclica (leer registro)
Bloques de drivers para hardware de medición
Bloques de SIMATIC Energy Suite
Bloques requeridos
Bloques opcionales

La siguiente tabla describe las distintas áreas de la figura:
Área

Descripción

Entrada

Contiene el hardware de medición (p. ej., medidor) que proporciona los datos de entrada para el
procesamiento.

Procesamiento

Adquisición, cálculo, sellado de tiempo y puesta a disposición de los valores de energía para otros
sistemas mediante los bloques de función correspondientes.

Salida

Puesta a disposición de los valores de energía periódicos para diferentes sistemas con fines de
visualización, archivado o posterior evaluación (p. ej., SIMATIC Energy Manager PRO).

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

85

Generar el programa de energía
5.5 Estructura del programa de energía

5.5.6.3

Área: Entrada
El área "Entrada" contiene el hardware de medición. Los bloques de drivers leen los datos de
energía procedentes del hardware de medición. Esto se lleva a cabo mediante comunicación
cíclica (memoria imagen del proceso) o mediante comunicación acíclica (leer registro).
La figura siguiente muestra la "Entrada" según el principio "EPS":
(QWUDGD

&RPXQLFDFLµQF¯FOLFD

+DUGZDUH
&RPXQLFDFLµQDF¯FOLFD

Datos de energía mediante comunicación cíclica (memoria imagen del proceso)
Datos de energía mediante comunicación acíclica (leer registro)

Encontrará una descripción exacta del hardware de medición en la documentación del
medidor correspondiente.

5.5.6.4

Área: Procesamiento
En el área "Procesamiento", los datos de energía de los bloques de drivers correspondientes
se adquieren, se normalizan y se convierten a datos de energía brutos más fáciles de procesar.
Los bloques "Basic", "Adv" y "Add" se encuentran en el área "Bloques de drivers". El bloque de
drivers "EnSL_DrvBasic" transfiere los datos de energía básicos actuales al bloque de función
de Energy Suite "EnS_CalcEnergyData (Página 170)". El bloque de función
"EnS_CalcEnergyData" calcula el consumo de energía y la potencia media durante el período
de archivado que se haya configurado (p. ej., 15 min).
Encontrará una descripción exacta de los bloques de drivers en la documentación del
hardware de medición correspondiente.
La siguiente figura muestra, a modo de ejemplo, el "procesamiento" según el principio "EPS".
La interconexión de los parámetros puede variar en función del hardware de medición utilizado.

86

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Generar el programa de energía
5.5 Estructura del programa de energía

3URFHVDPLHQWR
%ORTXHVGHGULYHUV
HQHUJ\

PHVVDJH6XSSUHVV

(Q6B&DOF(QHUJ\
'DWD

SRZHU
'DWRVGHHQHUJ¯DF¯FOLFRV
HQHUJ\0HWD
RUJ'DWD

(Q6/B'UY
%DVLF

PHDV'DWD
HQHUJ\0HWD
RUJ'DWD

HQDEOH'UY$GY

HQDEOH'UY$GY

HQDEOH'UY$GY
HQHUJ\0HWD

HQHUJ\0HWD

RUJ'DWD

'DWRVGHHQHUJ¯DDF¯FOLFRV

RUJ'DWD

(Q6/B'UY
$GY

DGG'DWD

DGY'DWD
DGG'DWD

DGG'DWD

DGG'DWD
DGG'DWD5HDO
DGG'DWD/5HDO

RIIVHW7\SH
HQHUJ\0HWD

(Q6/B'UY
$GG

HQHUJ\0HWD

Datos de energía cíclicos
Datos de energía acíclicos
Bloques de drivers para hardware de medición
Bloques de SIMATIC Energy Suite
Bloques requeridos
Bloques opcionales

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

87

Generar el programa de energía
5.5 Estructura del programa de energía
La siguiente tabla describe los componentes de la figura:
Componente

Descripción

EnSL_DrvBasic

Bloque de drivers para datos de energía básicos
Lee, principalmente mediante comunicación cíclica, los datos de energía básicos (inglés:
Basic) procedentes del hardware de medición, p. ej. contador de energía, potencia

EnSL_DrvAdv

Bloque de datos para datos de energía avanzados
Lee, mediante comunicación acíclica, un registro con datos de energía avanzados (inglés:
Advanced) procedentes del hardware de medición, p. ej. tensión, intensidad

EnSL_DrvAdd

Bloque de drivers para datos de energía adicionales
Lee, mediante comunicación acíclica, un registro con datos de energía adicionales (inglés:
Additional) procedentes del hardware de medición, p. ej. armónicos

EnS_CalcEnergyData

Bloque de Energy Suite para el procesamiento posterior (cálculo periódico, sellado de tiempo,
etc.) de los datos de energía.
Encontrará más información al respecto en el apartado "EnS_CalcEnergyData (Página 170)".

Datos de energía cíclicos

Principalmente datos de energía básicos procedentes del hardware de medición que el blo‐
que de drivers "EnS_DrvBasic" lee mediante comunicación cíclica (memoria imagen del pro‐
ceso).

Datos de energía acíclicos

Principalmente datos de energía avanzados y adicionales que los bloques de drivers
"EnSL_DrvAdv" y "EnSL_DrvAdd" leen mediante comunicación acíclica (leer registro).

messageSuppress

Inhibición de avisos

energyMeta

Datos específicos de puntos de medición
Encontrará más información al respecto en el apartado "EnS_typeEnergyMeta (Página 205)".

orgData

Datos de organización
Encontrará más información al respecto en el apartado "EnS_typeOrgData (Página 210)".

enableDrvAdv

Habilitación de procesamiento del bloque de drivers "EnSL_DrvAdv"

energy

Valor actual del contador de energía activa

power

Valor actual de la potencia activa

measValues

Datos de medición cíclicos que se transfieren al bloque de drivers "EnSL_DrvAdv"

advData

Registro de datos de medición avanzados

addData

Datos de energía adicionales

addDataLReal / addDataReal Registro LREAL/REAL actual

Consulte también
Información importante sobre los datos de energía (Página 23)

5.5.6.5

Área: Salida
En la "Salida" se recopilan los datos de energía tras la adquisición y el procesamiento. La
"Salida" sirve como interfaz para la visualización con SIMATIC WinCC od con otros sistemas
(p. ej., SIMATIC Energy Manager PRO).
La figura siguiente muestra la "Salida" según el principio "EPS":

88

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Generar el programa de energía
5.5 Estructura del programa de energía
6DOLGD

ːHQHUJ¯D
SRWHQFLD

8,IFRV˳
634(

9DORUHVP¯QP£[
YDORUHV7+'5HWF

(Q6B(QHUJ\
'DWD%DVLF

(Q6B(QHUJ\
'DWD$GY

(Q6B(QHUJ\
'DWD$GY0LQ
0D[

Valores de energía cíclicos
Valores de energía acíclicos
Bloques de SIMATIC Energy Suite

La siguiente tabla describe los componentes de la figura:
Bloque de función

Descripción

EnS_EnergyDataBa‐ Bloque de Energy Suite para poner a disposición los datos de energía básicos y metadatos proce‐
sic
sados. El bloque de Energy Suite "EnS_CalcEnergyData" convierte los datos de energía básicos
cíclicos a los siguientes valores:
● Consumo de energía durante un período (p. ej., 15 min)
● Potencia media durante un período (p. ej., 15 min)
Encontrará más información en "EnS_EnergyDataBasic: Poner a disposición metadatos y valores de
energía (Página 187)".
EnS_EnergyDa‐
taAdv

Bloque de Energy Suite para poner a disposición un registro con valores de energía avanzados
Valores de energía avanzados (acíclicos):
● Tensión, intensidad,, cos φ
● Potencia aparente, potencia activa, potencia reactiva, etc.
Encontrará más información en "EnS_EnergyDataAdv: Poner a disposición valores de energía avan‐
zados (Página 184)".

EnS_EnergyDa‐
taAdvMinMax

Bloque de Energy Suite para poner a disposición un registro con valores mínimos y máximos de los
valores de energía avanzados.
Valores mínimos y máximos de los valores de energía avanzados:
● Tensión, intensidad,, cos φ
● Potencia aparente, potencia activa, potencia reactiva
Encontrará más información en "EnS_EnergyDataAdvMinMax: Poner a disposición valores mínimos
y máximos avanzados (Página 185)".

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

89

Generar el programa de energía
5.7 Probar el programa de energía

5.6

Compilar y cargar programa de PLC
Después de generarse el programa de energía, compile todo el programa de PLC y cárguelo
en el sistema de destino CPU S7-1500.
Existen diferentes variantes para la compilación y carga de datos de proyecto en la CPU. A
continuación se describe una de esas variantes. Encontrará más información a este respecto
en la ayuda en pantalla del sistema de información de TIA Portal.

Requisitos
● El programa de energía se ha generado por completo sin errores.
● El programa de PLC también está completo y sin errores.

Compilar
Para compilar todo el programa de PLC (incluido el programa de energía), proceda de la
siguiente manera:
1. Abra la CPU S7-1500 en el árbol del proyecto.
2. Haga clic en el objeto "Bloques de programa, debajo de la CPU S7-1500, y seleccione el
comando "Compilar > Software (compilar todos los bloques)" en el menú contextual.
El programa de PLC se compila. Para comprobar si la compilación se ha llevado a cabo
correctamente, seleccione "Info > Compilar" en la ventana de inspección.
3. Corrija las causas de los errores de compilación, si los hay, e inicie de nuevo la compilación.

Cargar
Para cargar todo el programa de PLC en la CPU, proceda de la siguiente manera:
1. Abra la CPU S7-1500 en el árbol del proyecto.
2. Haga clic en el objeto "Bloques de programa, debajo de la CPU S7-1500, y seleccione el
comando "Cargar en dispositivo > Software (solo cambios)" en el menú contextual.
3. Siga las instrucciones del asistente para el procedimiento de carga. Seleccione, si procede,
la interfaz para la conexión online con el sistema de destino.
Se establece la conexión online con la CPU.
4. Haga clic en el botón "Cargar" y a continuación en el botón "Finalizar".
Si no se han producido errores, todo el programa de PLC (incluido el programa de energía)
está cargado en la CPU. Si se han producido errores, consulte en la ayuda en pantalla del
sistema de información de TIA Portal qué medidas debe tomar.

5.7

Probar el programa de energía
Las funciones estándar de STEP 7 (TIA Portal) permiten comprobar la adquisición y
procesamiento de los valores de energía.

90

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Generar el programa de energía
5.7 Probar el programa de energía

Requisitos
● El programa de energía se ha generado por completo sin errores.
● El programa de PLC se ha compilado y cargado correctamente en la CPU S7-1500.
● Se ha establecido una conexión online con la CPU S7-1500.
● La ejecución del programa está activa (CPU en modo "RUN").

Procedimiento
Para comprobar el programa de energía, proceda de la siguiente manera:
1. En la carpeta "EO - <Nombre del objeto de adquisición>", abra el bloque de datos para el
objeto de adquisición: <Nombre del objeto de adquisición> [DBx].
El contenido del bloque de datos junto con los metadatos y los datos de energía del objeto
de adquisición se abre en el área de trabajo.
2. Inicie la observación haciendo clic en el símbolo
"Vigilar todos".
En la tabla se muestra la columna adicional "Valor de vigilancia". Esta contiene los valores
de datos actuales. Bajo la estructura "energyData" puede observar y, de ser necesario,
controlar los valores de energía periódicos actuales.

Comportamiento tras volver a generarse el programa de energía
Energy Suite muestra el siguiente comportamiento cuando el programa de energía se genera
de nuevo:
1. Se borra la totalidad del programa de energía.
2. El programa de energía, con todas las modificaciones, se crea de nuevo.
Todos los objetos de adquisición no modificados se crean de nuevo exactamente igual que
antes.
3. Las direcciones (nombres simbólicos) de los DB cambian si se modifican los siguientes
ajustes:
– Nombre del objeto de adquisición (DB de instancia de EnS_Drvxxx,
EnS_CalcEnergyData, EnS_EnergyDataBasic)
– Nombre del hardware de medición utilizado en la configuración hardware (DB de
instancia de EnSL_DrvBasicxxx)
– Nombre del periodo de archivado (DB de instancia de EnS_TimeSync)
Nota
STEP 7 (TIA Portal) asigna automáticamente los números de DB.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

91

Generar el programa de energía
5.8 Editar programa de PLC sin instalación de Energy Suite

5.8

Editar programa de PLC sin instalación de Energy Suite
Los proyectos STEP 7 (TIA Portal) con objetos de adquisición configurados y componentes de
un programa de energía se pueden abrir y editar en equipos STEP 7 (TIA Portal) sin instalación
de Energy Suite.
Así, es posible continuar editando por ejemplo la configuración del dispositivo o el resto del
programa PLC. La configuración existente de objetos de adquisición y el programa de energía
generado no cambian en el proyecto.

Reacción del sistema de ingeniería sin instalación de Energy Suite
Al abrir un proyecto STEP 7 (TIA Portal) en un sistema de ingeniería sin instalación de Energy
Suite, se muestra un cuadro de diálogo que informa de que no se ha instalado Energy Suite.
Tras confirmar el cuadro de diálogo, es posible modificar el proyecto (salvo los objetos de
Energy Suite), compilarlo y descargarlo en los sistemas de destino (CPU S7-1500, estación
PC).

Ejemplos de aplicación posibles
La figura y tabla siguientes muestran qué aplicaciones son posibles para la realización del
proyecto sin instalación de Energy Suite:
(QJLQHHULQJ6WDWLRQ 
67(33URIHVVLRQDO
:LQ&&3URIHVVLRQDO
(QHUJ\6XLWH



(QJLQHHULQJ6WDWLRQ 
3URMHFWVZLWFK



67(33URIHVVLRQDO
:LQ&&3URIHVVLRQDO

352),1(7,(

6,0$7,&6

Ejemplo de apli‐ Proyecto nuevo/modifica‐ ...puede editarse en esta‐
cación
do en estación de ingenie‐ ción de ingeniería (2) con
ría (1) con

①

● STEP 7 Professional

● STEP 7 Professional

● WinCC Professional
● Energy Suite

● STEP 7 Professional

con al menos un objeto de
adquisición

● WinCC Professional

Ejemplo de apli‐ Proyecto que puede edi‐ ...puede editarse en esta‐
cación
tarse en estación de inge‐ ción de ingeniería (1) con
niería (2) con

92

+0,

Procesamiento soportado

Abrir y editar un proyecto STEP 7 (TIA Portal) en
estación de ingeniería (2) con una configuración
de Energy Suite pero sin instalación de Energy
Suite.
La configuración de Energy Suite no cambia.
Procesamiento soportado

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Generar el programa de energía
5.9 Programa de PLC sin librería de hardware de medición con bloques de drivers

②

● STEP 7 Professional

● STEP 7 Professional

con configuración de
Energy Suite sin cambios

● WinCC Professional

● STEP 7 Professional

● Energy Suite

● WinCC Professional
con configuración de
Energy Suite sin cambios

5.9

Abrir y editar un proyecto STEP 7 (TIA Portal) en
una estación de ingeniería (1) con una instalación
de Energy Suite con cambio previo a una estación
de ingeniería (2) sin instalación de Energy Suite.
Nota: Si previamente se ha borrado por completo
un PLC (CPU S7-1500) con objetos de adquisi‐
ción configurados, los objetos de Energy Suite
para esa CPU S7-1500 en el proyecto ya no es‐
tarán disponibles.

Programa de PLC sin librería de hardware de medición con bloques
de drivers
Los proyectos STEP 7 (TIA Portal) con objetos de adquisición configurados y componentes de
un programa de energía para hardware de medición se pueden abrir y editar también en
equipos STEP 7 (TIA Portal) sin instalación de la Energy Support Library .
Así, es posible continuar editando por ejemplo la configuración del dispositivo o el resto del
programa PLC. La configuración existente de objetos de adquisición y el programa de energía
generado para hardware de medición no cambian en el proyecto.

Reacción del sistema de ingeniería sin Energy Support Library
Al configurar los objetos de adquisición y asignar la fuente de datos de energía, el hardware de
medición para una Energy Support Library que ya no existe (p. ej., porque se ha desinstalado
la Energy Support Library) deja de mostrarse en la lista de las posibles fuentes de datos de
energía.
El hardware de medición, que ya se ha asignado como fuente de datos de energía para una
Energy Support Library que ya no está disponible, evita que se vuelva a generar el programa
de energía. La referencia que falta se muestra en el campo de selección de la fuente de datos
de energía. La nueva generación del programa de energía se cancela hasta que se corrige la
referencia que falta (por ejemplo, al modificar la fuente de datos de energía o al instalar la
Energy Support Library).
El resto del programa PLC no afectado por el programa de energía puede modificarse,
compilarse y descargarse en los sistemas de destino (CPU S7-1500, estación PC).

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

93

Generar el programa de energía
5.9 Programa de PLC sin librería de hardware de medición con bloques de drivers

94

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Visualizar y evaluar datos de energía
6.1

6

Descripción general del procedimiento para archivado y visualización
con WinCC Professional

Requisitos
Para realizar los pasos de configuración que se describen a continuación, deben cumplirse los
siguientes requisitos en STEP 7 (TIA Portal), en el árbol del proyecto debajo de la CPU
S7-1500:
● En todas las CPU que ponen a disposición datos de energía está activado el tipo de
archivado "WinCC Professional (fichero de variables)".
Encontrará más información al respecto en el apartado "Definir archivado en estación PC
con WinCC Professional (fichero de variables) (Página 59)".
● El programa de energía se ha generado por completo sin errores.
● El programa de PLC se ha compilado y cargado correctamente en la CPU S7-1500.

Pasos de configuración
La tabla siguiente muestra una sinopsis de los pasos de configuración más importantes para
la visualización y archivado de los datos de energía periódicos con el sistema SCADA WinCC
Professional.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

95

Visualizar y evaluar datos de energía
6.1 Descripción general del procedimiento para archivado y visualización con WinCC Professional
Estos pasos se llevan a cabo en STEP 7 (TIA Portal) en el árbol del proyecto, bajo la estación
PC.
Tema

Paso

Descripción

Visualización y
evaluación de los
datos de energía

1.1

Configuración de una estación
PC con WinCC Professional

1.2

Creación de una conexión con el Para habilitar la transferencia de datos entre la CPU
sistema SCADA
S7-1500 y el sistema SCADA, configure en STEP 7 (TIA
Portal) una conexión HMI a la estación PC con WinCC Pro‐
fessional.

1.3

Lectura y visualización de los
valores de energía configurados
para el archivado en el sistema
de energía de la estación PC
(Página 97)

Para el sistema SCADA se necesita una estación PC con la
aplicación HMI SIMATIC "WinCC RT Professional".

En la estación PC con WinCC Professional, Energy Suite
ofrece una sinopsis de todos los objetos de adquisición y los
valores de energía periódicos que se han configurado en el
sistema de ingeniería para archivado en el fichero de varia‐
bles de WinCC Professional.
Con la función "Actualizar" se sincronizan los datos de inge‐
niería de la CPU S7-1500 a los que puede acceder la esta‐
ción PC a través de WinCC Professional.

1.4

Configuración del sistema SCA‐ Configuración de la estación PC con WinCC Professional:
DA (Página 100)
● Para la transferencia de datos al sistema SCADA,
genere las variables HMI para los bloques de datos de
respaldo (carpeta "Variables HMI").
● Para el archivado, genere el fichero de variables con las
variables de informe (valores de energía) y configure
los segmentos de fichero para archivado (Página 102)
de los valores de energía periódicos (carpeta "Ficheros").
● Para la visualización de los datos de energía adquiridos
en Runtime, puede integrar plantillas de imagen y
elementos gráficos del Siemens Industry Online Support
en la aplicación WinCC (carpeta "Imágenes").
● Para la visualización de los datos de energía adquiridos
en Runtime pueden utilizarse los faceplates de la librería
Energy Suite instalados automáticamente.
● Con ayuda del SIMATIC Visualization Architect (SiVArc)
instalado se pueden generar imágenes según las reglas
de SiVArc creadas para Energy Suite (Página 104). Con
SiVArc se crea la visualización de varios dispositivos
HMI y PLC desde bloques de programa y plantillas de
visualización de Energy Suite.

1.5

Compilación y carga de la esta‐ A continuación, compile la configuración de toda la estación
ción PC con WinCC Professional PC y cárguela en el sistema SCADA.

1.6

Inicio del programa PLC y del
sistema SCADA (Runtime)

Si se han iniciado WinCC RT Professional en el sistema
SCADA y los programas PLC en la CPU S7-1500, puede
comenzar el archivado.
Los valores de energía periódicos seleccionados se archi‐
van automáticamente. El archivado se produce continua‐
mente mientras Runtime esté activo.

96

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Visualizar y evaluar datos de energía
6.3 Mostrar valores de energía para archivado en WinCC Professional

6.2

Valores de energía en estación PC con WinCC Professional
Los valores de energía periódicos creados en la CPU S7-1500 pueden transferirse al fichero
de variables de WinCC Professional para archivado a largo plazo. Así, es posible por ejemplo:
● Generar informes a partir de valores de energía
● Visualizar los valores de energía dentro del entorno de WinCC Professional
● Transferir valores de energía a SIMATIC Energy Manager PRO para el procesamiento
posterior a nivel de gestión
En la estación PC con WinCC Professional, Energy Suite ofrece una sinopsis de todos los
objetos de adquisición y los valores de energía periódicos que se han habilitado para el
archivado en el fichero de variables de WinCC Professional.
Una vez instalado correctamente SIMATIC Energy Suite, aparece la nueva carpeta "Datos de
energía" en el árbol del proyecto, bajo la estación PC con WinCC Professional.
La figura siguiente muestra la carpeta "Datos de energía" en el árbol del proyecto.

Consulte también
Mostrar valores de energía para archivado en WinCC Professional (Página 97)

6.3

Mostrar valores de energía para archivado en WinCC Professional
Se necesita una sinopsis de todos los objetos de adquisición y sus valores de energía
periódicos que se han configurado para archivado en el fichero de variables de WinCC
Professional.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

97

Visualizar y evaluar datos de energía
6.3 Mostrar valores de energía para archivado en WinCC Professional

Requisitos
● En todas las CPU que ponen a disposición datos de energía está activado el tipo de
archivado "WinCC Professional (fichero de variables)".
Encontrará más información al respecto en el apartado "Definir archivado en estación PC
con WinCC Professional (fichero de variables) (Página 59)".
● En el proyecto hay configurada una estación PC con la aplicación HMI SIMATIC "WinCC
RT Professional".
● Existe una conexión HMI válida entre la CPU S7-1500 y la estación PC con WinCC
Professional.
Encontrará más información al respecto en la ayuda en pantalla del sistema de información
TIA Portal en "Configurar conexiones HMI > Crear gráficamente nueva conexión".

Procedimiento
Para mostrar los valores de energía para registro y archivado, proceda del siguiente modo:
1. Abra la estación PC en el árbol del proyecto.
2. Bajo la estación PC, abra la aplicación "WinCC RT Professional".
Bajo la aplicación se mostrará el objeto "Datos de energía".
3. Haga doble clic en el objeto "Datos de energía".
En el área de trabajo se abre una tabla con todos los objetos de adquisición de las CPU
S7-1500 para todo el proyecto. De este modo se obtiene una sinopsis de todos los objetos
de adquisición disponibles y los valores de energía periódicos que se deben archivar en el
fichero de variables de WinCC Professional.
4. Haga clic en el símbolo
"Actualizar".
Los datos de la tabla se leen de nuevo. Se realiza una comparación entre los datos de
ingeniería de la estación PC y las CPU S7-1500 accesibles desde WinCC Professional.

Resultado
Para cada objeto de adquisición, hay una habilitación para el programa de energía y la
configuración de los siguientes valores de energía para archivado:
● Consumo de potencia
● Consumo de energía
● Valor de contador de energía
El significado de las indicaciones se describe con detalle en el apartado "Resumen de los datos
de energía (Página 99)".
Nota
Capacidad
● Con WinCC Professional se pueden archivar hasta 2000 objetos de adquisición.
● Se pueden archivar los objetos de adquisición de hasta 10 CPU S7-1500.

98

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Visualizar y evaluar datos de energía
6.4 Resumen de los datos de energía

6.4

Resumen de los datos de energía
La tabla "Datos de energía" de la aplicación "WinCC RT Professional" muestra una sinopsis de
los objetos de adquisición configurados y los valores de energía periódicos que se deben
archivar en el fichero de variables de WinCC Professional.
Nota
Adaptación de los valores de energía periódicos
Los valores de energía periódicos solo se muestran en WinCC Professional. Para modificar los
ajustes de los valores de energía periódicos es preciso cambiar a la configuración de los
objetos de adquisición y la configuración del programa de energía en las CPU S7-1500.
La tabla siguiente muestra los ajustes para la adquisición y archivado de los valores de energía
en el fichero de variables de WinCC Professional:
Ajuste

Descripción

Nombre del objeto de adqui‐ Muestra el nombre del objeto de adquisición. El nombre solo se puede
sición
cambiar si el objeto de adquisición se configura en la CPU S7-1500.
Nombre de la CPU

Muestra el nombre de la CPU S7-1500 a la que está asignado el objeto
de adquisición.

Habilitar objeto de adquisi‐
ción

Muestra el estado de habilitación del objeto de adquisición para la ge‐
neración del programa de energía. La habilitación se activa al configurar
el objeto de adquisición en la CPU S7-1500.

Consumo de potencia

Muestra si los valores de energía periódicos del consumo de potencia
están habilitados para el archivado.

Consumo de energía

Muestra si los valores de energía periódicos del consumo de energía
están habilitados para el archivado.

Valor de contador de ener‐
gía

Muestra si los valores de energía periódicos del valor de contador de
energía están habilitados para el archivado.

Duración del periodo de ar‐ Muestra la duración del periodo de archivado. La duración solo puede
chivado
modificarse en la configuración del programa de energía en la CPU
S7-1500.
Nombre del periodo de ar‐
chivado

Muestra el nombre del periodo de archivado. El nombre solo puede mo‐
dificarse en la configuración del programa de energía en la CPU S7-1500.

Nota
Capacidad
● Con WinCC Professional se pueden archivar hasta 2000 objetos de adquisición.
● Se pueden archivar los objetos de adquisición de hasta 10 CPU S7-1500.

Consulte también
Mostrar valores de energía para archivado en WinCC Professional (Página 97)
Valores de energía en estación PC con WinCC Professional (Página 97)

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

99

Visualizar y evaluar datos de energía
6.5 Crear estructura de archivado para valores de energía

6.5

Crear estructura de archivado para valores de energía
Después de sincronizar los datos de energía del sistema de ingeniería con los datos de energía
de la estación PC con WinCC Professional, se generan las variables HMI y el fichero de
variables con las variables de fichero para los valores de energía que se deben archivar. Esta
generación se realiza automáticamente pulsando un botón; no es necesaria la adaptación
manual posterior.
A continuación, los datos generados pueden compilarse y cargarse en el sistema SCADA, o
bien están disponibles para la visualización en Runtime.

Requisitos
● En todas las CPU que ponen a disposición datos de energía está activado el tipo de
archivado "WinCC Professional (fichero de variables)".
Encontrará más información al respecto en el apartado "Definir archivado en estación PC
con WinCC Professional (fichero de variables) (Página 59)".
● En el proyecto hay configurada una estación PC con la aplicación HMI SIMATIC "WinCC
RT Professional".
● Existe una conexión HMI válida entre la CPU S7-1500 y la estación PC con WinCC
Professional.
Encontrará más información al respecto en la ayuda en pantalla del sistema de información
TIA Portal en "Configurar conexiones HMI > Crear gráficamente nueva conexión".

Procedimiento
Para generar la estructura de ficheros para los valores de energía, proceda del siguiente modo:
1. Abra la estación PC en el árbol del proyecto.
2. Bajo la estación PC, abra la aplicación "WinCC RT Professional".
Bajo la aplicación se mostrará el objeto "Datos de energía".
3. Haga doble clic en el objeto "Datos de energía".
En el área de trabajo se abre la tabla con todos los objetos de adquisición y sus valores de
energía periódicos archivados según las CPU S7-1500 para todo el proyecto.
4. Haga clic en el símbolo

100

"Crear fichero de variables".

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Visualizar y evaluar datos de energía
6.5 Crear estructura de archivado para valores de energía

Resultado: variables HMI creadas
Una nueva carpeta "Energy Suite - Variables HMI" se crea automáticamente en la carpeta
"Variables HMI". Esta se encuentra en el árbol del proyecto debajo de la estación PC y contiene
todas las variables de los bloques de datos necesarias para el respaldo.

①

Objeto

Descripción

EnS - Variables de sistema

②

Variable interna @EnS_SystemTag para la conexión con el fi‐
chero de variables.

EnS - Variables de siste‐
ma_<Nombre de la CPU>

Para cada bloque de datos n (n = 1, 2, 3...) para respaldo (y, por
tanto, para cada tabla de objetos de adquisición) se crean las
siguientes variables HMI:
● @EnS_Archive<n>_request_<Nombre de la CPU> con tipo
de datos EnS_typeHMIWriteCtrl
● @EnS_Archive<n>_statusWrite_<Nombre de la CPU> con
tipo de datos EnS_typeHMIWriteStat
● @EnS_Buffer<n>_<Nombre de la CPU> con tipo de datos
EnS_typeValue

La tabla correspondiente en el área de trabajo muestra las variables HMI creadas y la conexión
HMI con la CPU S7-1500. Las variables HMI no pueden modificarse.

Resultado: fichero de variables con variables de fichero
En el área de trabajo se crea automáticamente un nuevo fichero de variables con el nombre
"EnS_EnergyArchiv" con ajustes estándar para la carpeta "Fichero". Los ajustes "Bloqueado"
y "Entradas manuales permitidas" se pueden comprobar y cambiar si es necesario.
En el área "Variables de fichero", para cada valor de energía que debe archivarse de todos los
objetos de adquisición configurados hay una variable de fichero con el nombre del objeto de
adquisición y las extensiones _energy, _power o _energyCounter. Las variables de fichero
generadas están protegidas contra escritura y conectadas a la variable interna
""@EnS_SystemTag".
En la columna "Comentario en runtime" se han creado valores de parámetros que SIMATIC
Energy Manager PRO puede interpretar para su posterior procesamiento.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

101

Visualizar y evaluar datos de energía
6.6 Fichero de variables y segmentación para Energy Suite

Asimismo, el componente Energy Suite se incorpora a la lista de arranque de WinCC Runtime
en:
Configuración de runtime > Servicio > Tareas/aplicaciones adicionales
Los datos generados pueden compilarse y cargarse en el sistema SCADA, o bien están
disponibles para la visualización en Runtime.
Antes de compilar los datos, compruebe los ajustes de los segmentos del fichero de variables
(Página 102) en la Configuración de runtime de la estación PC.

6.6

Fichero de variables y segmentación para Energy Suite
El fichero de variables creado automáticamente en la estación PC con WinCC Professional
permite el archivado a largo plazo de los valores de energía con sello de tiempo, de manera
que los datos históricos archivados pueden utilizarse para evaluaciones estadísticas
empíricas.
Además, en la configuración de runtime bajo la estación PC con WinCC Professional existe la
posibilidad de segmentar el fichero de variables y de este modo definir su tamaño.
Los segmentos de fichero para el archivado de los valores de energía periódicos se configuran
en el área de trabajo, en:
Configuración de runtime > Archivado > Segmentos de fichero

Recomendación para segmentación del fichero de variables
En un fichero circular segmentado se crean varios segmentos de fichero de idéntico tamaño
que se llenan consecutivamente con datos de energía periódicos (valores de proceso).
Cuando todos los segmentos están llenos, el más antiguo se sobrescribe y los datos de
energía que contiene se pierden.

102

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Visualizar y evaluar datos de energía
6.7 Archivar datos de energía
Para el archivado a largo plazo únicamente se accede a datos de energía ubicados en el
período que abarca todos los segmentos. De forma predeterminada, el período ajustado es 1
semana.
Para que el archivado a largo plazo de los datos de energía se desarrolle de forma
homogénea, conviene hacer caso de las siguientes recomendaciones de Energy Suite:
● Período de todos los segmentos: 2 años
● Tamaño máximo de todos los segmentos: 24 GB
● Período que abarca un segmento individual: 1 mes
● Tamaño máximo de un segmento: 1 GB
● Copia de seguridad: activada
Asimismo, la ruta para la copia de seguridad se ajusta en un servidor de copia de seguridad.

6.7

Archivar datos de energía
Si se han iniciado WinCC RT Professional y el programa PLC, puede comenzar el archivado.
Los valores de energía periódicos se archivan automáticamente. El archivado se produce
continuamente mientras Runtime esté activo.

Requisitos
● El proyecto está compilado y descargado en los sistemas de destino (las CPU y la estación
PC con WinCC Professional).
● Hay establecidas conexiones online con las CPU S7-1500.
● El preprocesamiento de programas en las CPU S7-1500 está activo (CPU en modo "RUN").
● La estación PC con WinCC Professional se encuentra en modo runtime ("Iniciar runtime").

Resultado
Los datos archivados comprenden:
● Etiquetas de fecha/hora creadas por la CPU
● Parámetros de los objetos de adquisición, p. ej.:
– Nombre del objeto de adquisición
– Reconocimiento de objetos de adquisición
– Límite superior/inferior
– Nombre del fichero de variables

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

103

Visualizar y evaluar datos de energía
6.8 Creación de imágenes para Energy Suite con SiVArc
● Valores de energía periódicos durante un periodo de archivado:
– Valor de contador de energía
– Consumo de energía
– Consumo de potencia
● Atributos de variables (p. ej., código de calidad)

6.8

Creación de imágenes para Energy Suite con SiVArc

6.8.1

Creación de reglas de imagen SiVArc y copia de reglas para Energy Suite
Con ayuda de SiVArc se pueden generar reglas de imagen para bloques Energy Suite.

Sinopsis de las reglas
Existen reglas propias disponibles para los siguientes bloques de Energy Suite:
● EnS_EnergyDataBasic: Adquiere datos de energía generales y sirve como interfaz a un
sistema HMI
● EnS_EnergyDataAdv: Adquiere datos de energía avanzados y sirve como interfaz a un
sistema HMI
● EnS_LmgtControl_Peak: Controla la gestión de cargas de acuerdo con la previsión
● EnS_LmgtActor_Consumer: Controla los consumidores con comandos del bloque de
control
● EnS_LmgtActor_Producer: Controla el generador con comandos del bloque de control

Condición
● SIMATIC Visualization Architect (SiVArc) y SIMATIC Energy Suite deben tener la misma
versión.
● Las reglas para Energy Suite se editan sin licencia de SiVArc obligatoria. Lo mismo se
aplica a la creación de imágenes.

104

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Visualizar y evaluar datos de energía
6.8 Creación de imágenes para Energy Suite con SiVArc

Requisitos
● Hay disponible una licencia de Energy Suite.
● Está instalado SIMATIC Visualization Architect (SiVArc).

Procedimiento
Para crear reglas de imagen en SiVArc proceda del siguiente modo:
1. Abra la CPU S7-1500 en el árbol del proyecto.
2. Haga clic debajo de la CPU S7-1500 con el botón derecho del ratón en "Objetos de
adquisición" > "Crear reglas de SiVArc para Energy Suite".
Como alternativa, puede abrir esta opción en el editor "Configuración del programa de
energía" haciendo clic en el símbolo
"Crear reglas de imagen SiVArc para Energy
Suite".
Las reglas creadas con la función "Copiar reglas" también se utilizarán en la generación de
imágenes.
3. Abra la carpeta "Datos comunes" en el árbol del proyecto.
4. Abra la carpeta "SiVArc" y haga doble clic en el objeto "Reglas de imagen".

Resultado
Las reglas para las imágenes del sistema y las reglas de copia están protegidas contra
escritura y están disponibles en la pestaña "Reglas de imagen de sistema" del editor de reglas
de imagen de SiVArc, con los campos siguientes:
● Nombre: nombre unívoco de la regla de imagen con la estructura
"EnS_<blockname>_<WinCCdevice>"; WinCCdevice = WinCCComf/WinCCPro
Ejemplo: "EnS_EnergyDataBasic_WinCCComf"
● Autor: Energy Suite
● Bloque de programa: Consulte la lista en el apartado "Sinopsis de las reglas"
● Plantilla maestra de una imagen: Nombre de la plantilla de las imágenes de Energy Suite
necesaria de la librería de Energy Suite (subcarpeta "EnS_Visualization")
● Tipo de imagen: el tipo de faceplate o el tipo de imagen utilizado en la visualización
● Copiar reglas: permite copiar las variables e imágenes existentes de la librería en el panel
de operador correspondiente.

6.8.2

Generación de imágenes para Energy Suite
Puede crear imágenes para bloques de Energy Suite que, a su vez, creen faceplates
configurados con variables para la visualización de datos de Runtime. SiVArc automatiza la
generación de imágenes mediante reglas de SiVArc y genera imágenes.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

105

Visualizar y evaluar datos de energía
6.8 Creación de imágenes para Energy Suite con SiVArc

Condición
● SIMATIC Visualization Architect (SiVArc) y SIMATIC Energy Suite deben tener la misma
versión.
● Solo admitido por aparatos Comfort y Professional
● Para la gestión de cargas se admiten aparatos Professional.

Requisitos
● Hay disponible una licencia de Energy Suite.
● Está instalado SIMATIC Visualization Architect (SiVArc).
● Se han creado reglas de imagen SiVArc para Energy Suite (Página 104).
● Se ha generado correctamente el programa de energía.

Procedimiento
Para generar imágenes para Energy Suite, proceda del siguiente modo:
1. Abra la estación PC en el árbol del proyecto.
2. Bajo la estación PC, active el panel de operador "WinCC RT Professional".
3. Puede crear imágenes SiVArc haciendo clic en el símbolo
en las herramientas SFC
globales.
Como alternativa, puede hacer clic con el botón derecho del ratón en el panel de operador
y activar "Crear visualización (SiVArc)".
Aparecerá el cuadro de diálogo "Activar y crear aparatos".
4. Para un panel de operador determinado, active la función "Reglas Energy Suite" >
"Generar" en el menú desplegable "Juego de reglas".
Encontrará más información sobre el proceso de generación en la ventana de respuesta.

Resultado
Las imágenes que utilicen reglas de Energy Suite se generarán y estarán disponibles en la
carpeta "Imágenes" dentro de un panel de operador.
En el caso de los aparatos Comfort, se generarán las imágenes y estas estarán disponibles en
"Gestión de imágenes" e "Imágenes emergentes".
En generaciones posteriores, repita estos pasos para cada estación PC.
Para considerar las imágenes creadas con SiVArc y conectadas con un faceplate en runtime,
es preciso configurar la gestión de cargas con las reglas de Energy Suite y proceder del modo
siguiente:
1. Navegue hasta la ventana de la librería y, a continuación, hasta Librería del proyecto ->
Plantillas maestras -> "Scripts".
2. Copie la carpeta "Adquisición" e insértela en "WinCC Runtime Professional" -> "Scripts" ->
"Scripts VB".
3. Copie la carpeta "LMGT" e insértela en "WinCC Runtime Professional" -> "Scripts" ->
"Scripts C".

106

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Visualizar y evaluar datos de energía
6.10 Evaluación de los datos de energía con Energy Suite Export Tool

6.9

Visualización de los datos de energía con WinCC Online Trend View
La evolución de los valores de energía periódicos se puede seguir
● gráficamente, a través de WinCC Online Trend View (con conexión al fichero de variables)
● numéricamente, mediante Energy Suite Export Tool (Página 107) (incluido en el volumen
de instalación de Energy Suite)

Visualización con WinCC Online Trend View
Con WinCC Online Trend View, los valores de energía periódicos archivados en los ficheros
de variables pueden representarse en forma de curva en Runtime. La representación gráfica
de los valores de energía es configurable por el usuario. Para ello, cree la ventana de curvas
y conecte los valores de la curva con las variables de fichero de los valores de energía que
desee.
Para más información al respecto, consulte la palabra clave "WinCC Online Trend View" en el
sistema de información de WinCC.
La figura siguiente muestra un ejemplo de la visualización de valores de energía en WinCC
Online Trend View:

6.10

Evaluación de los datos de energía con Energy Suite Export Tool
Energy Suite Export Tool facilita la evaluación de los valores de energía adquiridos en formato
Microsoft Excel.
Energy Suite Export Tool forma parte de SIMATIC Energy Suite Runtime y se instala junto con
este en la estación PC con WinCC Professional. Encontrará más información al respecto en las
instrucciones de instalación de Energy Suite, en el DVD.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

107

Visualizar y evaluar datos de energía
6.10 Evaluación de los datos de energía con Energy Suite Export Tool
Energy Suite Export Tool permite exportar a un archivo externo en runtime los valores de
energía periódicos archivados en los ficheros de variables. A continuación, los datos así
exportados pueden abrirse y evaluarse en Microsoft Excel.
Además, la Energy Suite Export Tool permite generar informes de centros de costes con las
tarifas creadas. Estos informes se asignan a los centros de costes.
Nota
Para generar un informe de centro de costes deben crearse por lo menos una tarifa y un centro
de costes.
Sobre la base de las tarifas y los centros de costes definidos, el informe muestra el consumo
de energía y los costes energéticos resultantes. El informe de centro de costes puede abrirse
y evaluarse en Microsoft Excel.
Formato de exportación posible:
● .xlsx
● Compatible con Microsoft Excel versión 2010 o posterior
Opciones de generación de informes:
● Informe manual
● Informe automático

Inicio de Energy Suite Export Tool y generación de un informe manual
1. Seleccione el comando de menú Inicio > Siemens Automation > Options and Tools >
SIMATIC Energy Suite Runtime Toolbox > SIMATIC Energy Suite Export Tool.
Se abre Energy Suite Export Tool.
2. Compruebe el nombre del servidor WinCC:
– Si WinCC Professional está en runtime, el nombre del servidor (nombre del PC runtime
local) se introduce automáticamente.
– De lo contrario, puede ajustar manualmente la conexión con el servidor con el comando
de menú Configuración > WinCC Server.
3. Elija el idioma de la interfaz (alemán, inglés) con el comando de menú Configuración >
Idioma.

108

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Visualizar y evaluar datos de energía
6.10 Evaluación de los datos de energía con Energy Suite Export Tool
4. Configure la plantilla para los informes en el menú Informe. Se pueden realizar, p. ej., los
siguientes ajustes:
– Tipo de informe: Exportación de valores medidos del fichero o Informe de centro de
costes
– Ejecución "Manual"
– Nombre del informe
– Nombre de archivo (se compone del nombre del informe, así como de la fecha y hora de
generación del informe)
– Ruta de ubicación
– Tarifa (para Informe de centro de costes)
– Unidad (se determina automáticamente en función de la tarifa)
– Fichero de variables y variables de fichero para la evaluación (para Exportación de
valores medidos del fichero)
– Centro de costes (para Informe de centro de costes)
– Periodo durante el que se evalúa el informe (periodo del informe)
Nota
La unidad para metros cúbicos m3 se muestra como "m3" en la Energy Suite Export Tool.
5. Inicie la exportación a Microsoft Excel con el comando de menú Informe > Generar o haga
clic en el icono .
Este paso presupone una conexión con el servidor WinCC con WinCC Professional en
runtime.
Resultado
La figura siguiente muestra un ejemplo de la visualización de valores de energía mediante
Energy Suite Export Tool:

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

109

Visualizar y evaluar datos de energía
6.10 Evaluación de los datos de energía con Energy Suite Export Tool

Inicio de Energy Suite Export Tool y generación de un informe automático
1. Elija el comando de menú Inicio > SiemensAutomation > Options and Tools > SIMATIC
Energy Suite Runtime Toolbox > SIMATIC Energy Suite Export Tool.
Se abre Energy Suite Export Tool.
2. Compruebe el nombre del servidor WinCC:
– Si WinCC Professional está en runtime, el nombre del servidor (nombre del PC runtime
local) se introduce automáticamente.
– De lo contrario, puede ajustar manualmente la conexión con el servidor con el comando
de menú Configuración > WinCC Server.
3. Elija el idioma de la interfaz (alemán, inglés) con el comando de menú Configuración >
Idioma.
4. Guarde los ajustes de idioma con el comando de menú Archivo > Guardar ajustes.

110

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Visualizar y evaluar datos de energía
6.10 Evaluación de los datos de energía con Energy Suite Export Tool
5. Configure la plantilla para los informes en el menú Informe. La tabla siguiente muestra
todos los ajustes posibles. La última columna de la tabla muestra los valores concretos para
los ejemplos siguientes:
– Ejemplo 1: Durante el periodo de vacaciones comprendido entre el 17.07.2017 y el
18.08.2017, cada lunes a las 12:15 AM se debe generar un informe automático de
valores de fichero correspondiente a la semana terminada.
– Ejemplo 2: De manera permanente, cada 2 meses a las 09:00 AM se debe generar un
informe automático de valores de fichero correspondiente al último mes.
Parámetro

Descripción

Rango

Valores del ejemplo

Type

Clase de informe

Exportación de valores medidos
del fichero
Informe de centro de costes

● Exportación de
valores medidos del
fichero

Ejecución del informe

● Manual

● Automática

(Tipo)
Trigger
(Ejecución)
Name

● Automática
Nombre del informe

-

(Nombre)

Para el ejemplo 1:
● WeeklyReport
Para el ejemplo 2:
● MonthlyReport

Nombre de archivo; se
(Nombre de compone del nombre
del informe, así como
archivo)
de la fecha y hora de
generación del infor‐
me.

-

Path

-

(Ruta)

Ubicación del informe
generado

● C:\Users
\Administrator
\Desktop\

Tariff set

Selección de la tarifa

-

Para el ejemplo 1:

File name

Para el ejemplo 1:
● WeeklyReport_1707
17_1215.xls
Para el ejemplo 2:
● MonthlyReport_170
702_0900.xls

(tarifa)

Para el ejemplo 2:
-

Unit
(unidad)

Cost cen‐
ters

Unidad del consumo
de energía

-

-

(automáticamente a
partir de la tarifa)
Selección del centro
de costes

Para el ejemplo 2:
-

(Periodici‐
dad)

Para el ejemplo 1:
-

(centros de
costes)
Report
cycle

Para el ejemplo 1:

Para el ejemplo 2:
Periodicidad con la
que se crea el informe

● Diaria

Para el ejemplo 1:

● Semanal

● Semanal

● Mensual

Para el ejemplo 2:

● Anual

● Mensual

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

111

Visualizar y evaluar datos de energía
6.10 Evaluación de los datos de energía con Energy Suite Export Tool
Parámetro

Descripción

Rango

Time of day Hora a la que se crea el ● Formato de 12 h
informe
(Hora del
● Formato de 24 h
día)

Valores del ejemplo
Para el ejemplo 1:
● 12:15:00 a. m.
Para el ejemplo 2:
● 09:00:00 a. m.

Week day
(Día de la
semana)

Day
(Día)

Month
(Mes)

Día de la semana en el
que se genera el infor‐
me

Lunes a domingo

Para el ejemplo 1:
● Lunes
Para el ejemplo 2:

Sólo puede seleccio‐
narse si la periodicidad
es semanal.

-

Día en el que se gene‐ 1 - 28
ra el informe

Para el ejemplo 1:

Sólo puede seleccio‐
narse si la periodicidad
es mensual o anual.

Para el ejemplo 2:

● 2

Mes en el que se gene‐ Enero a diciembre
ra el informe

Para el ejemplo 1:

Sólo puede seleccio‐
narse si la periodicidad
es anual.

Para el ejemplo 2:

-

Time period Rango de tiempo que Con periodicidad "diaria":
se evalúa en el informe ● Inicio, fin
(Período)
● Último día

Para el ejemplo 1:
● Semana terminada
(lunes a domingo)

● Día terminado (00:00 - 24:00) Para el ejemplo 2:
● Último mes
Con periodicidad "semanal":
● Última semana
● Semana terminada (lunes a
domingo)
Con periodicidad "mensual":
● Último mes
● Mes terminado (desde el 1
hasta fin de mes)
Con periodicidad "anual":
● Último año
● Año terminado (enero a
diciembre)
Valid period Periodo total para el
(Período de que la generación de
informes está permiti‐
validez)
da y es válida

● Inicio: Fecha actual (ajuste
predeterminado)
● Fin: 31.12.2099 12:00:00 m.
(ajuste predeterminado)

Para el ejemplo 1:
● Inicio: 07/15/2017
12:15:00 AM
Fin: 08/15/2017
12:15:00 AM
Para el ejemplo 2:
● Valores ajustados
predeterminados

112

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Visualizar y evaluar datos de energía
6.10 Evaluación de los datos de energía con Energy Suite Export Tool

Nota
La unidad para metros cúbicos m3 se muestra como "m3" en la Energy Suite Export Tool.
6. Cuando haya terminado de configurar la plantilla para el informe, haga clic en "Finalizar".
Se agrega una tarea automáticamente al Windows Task Scheduler y se ejecuta con la
periodicidad configurada. Los informes se guardan en la ruta de ubicación configurada.

Crear tarifas
Para crear tarifas, proceda del siguiente modo:
1. Seleccione el comando de menú "Configuración > Tarifas".
Se abre el cuadro de diálogo "Administrar tarifas".
2. Para crear una tarifa nueva, haga clic en el símbolo "Agregar tarifa" de la barra de
herramientas.
Se abre el cuadro de diálogo "Agregar tarifa".
3. Configure la plantilla para las tarifas. Se pueden realizar, p. ej., los siguientes ajustes:
– Nombre de la plantilla de la tarifa
– Unidad de precio por consumo de energía
– Asignación de las tarifas a rangos de tiempo y días de la semana
– Precio por consumo de energía
– Ocultación de días festivos
Las entradas siguientes son obligatorias:
– Nombre de la plantilla
– Una selección de tarifa por día de la semana
– La tarifa debe cubrir un día completo por día de la semana (rango de tiempo)
4. Haga clic en el botón "Agregar".
La tarifa se agrega a la lista del cuadro de diálogo "Administrar tarifas".

Comportamiento en caso de error
Nota
En caso de comportamiento inesperado (p. ej., si la base de datos WinCC Professional no está
iniciada), los mensajes de error se guardan en el archivo
"Siemens.Simatic.EnergyMgmt.WinCCprof.DataExportTool.txt" en la ubicación "C:\Program
Files (x86)\Siemens\Automation\SCADA-RT_V11\WinCC\bin\config".

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

113

Visualizar y evaluar datos de energía
6.10 Evaluación de los datos de energía con Energy Suite Export Tool

114

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Optimizar el consumo de energía
7.1

7

Gestión de cargas con Energy Suite

Gestión de cargas
La demanda de energía es extremadamente elevada en cada vez más sectores. En
ocasiones, los dueños de las fábricas prestan poca atención a costes energéticos en general,
y a los costes de electricidad en particular, ya que suponen solo una pequeña parte de sus
costes totales. No obstante, con el aumento de los precios de la electricidad y la introducción
de tarifas temporizadas, las plantas de producción pueden revisar sus secuencias operativas
y disminuir así los costes de la electricidad.
La gestión de cargas es una ayuda inestimable en aquellos sectores en los que los
consumidores o el productor de energía adoptan medidas para la conexión de una carga, tanto
para aprovechar la carga de pico del sistema completo como para sacar el máximo partido de
las materias primas esenciales y la capacidad de distribución.
Un plan de carga óptimo supone una notable disminución de la demanda en las horas más
productivas y de los costes de electricidad. Generalmente, las empresas de suministro
eléctrico informan a sus consumidores sobre la necesidad de disminuir el consumo de
corriente a corto plazo.
Mediante la gestión de cargas se anima a los consumidores a reducir su demanda en periodos
de suministro crítico, y a aumentarla cuando existen capacidades de corriente económicas y
suficientes. Por su parte, el productor de energía conmuta su capacidad de producción de
corriente de acuerdo con la demanda y promueve el aprovechamiento de la generación de
corriente de emergencia, lo que conduce a un aprovechamiento eficiente de los recursos sin
que ello tenga un impacto negativo en el servicio de suministro eléctrico. Tanto los
consumidores como los productores de energía generan así efectos tangenciales sobre el
consumo total de energía que conducen a un menor coste de la producción.

Gestión de cargas con SIMATIC Energy Suite
La gestión de cargas actúa como un componente de vigilancia. Se encargan de garantizar que
el consumo de potencia y de energía no supere el valor límite de energía definido por el
usuario. Los componentes de la gestión de cargas incluyen un elemento definido por el
usuario: los denominados actuadores. Los actuadores pueden ser de los siguientes tipos:
● Consumidor: Sectores que consumen energía
● Generador: Sectores que generan energía
Un programa de gestión de cargas consta, por ejemplo, de los siguientes bloques:
● Bloque de previsión
● Bloque de control
● Bloque de actuadores
● Bloque de copia de seguridad/restauración

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

115

Optimizar el consumo de energía
7.2 Descripción general del procedimiento de gestión de cargas
El bloque de previsión recibe los datos de entrada de la alimentación; es decir, del objeto de
adquisición. Por ejemplo, en una central eléctrica, la alimentación es el suministro de la red
eléctrica al receptor. El bloque de previsión calcula o prevé el valor de potencia y energía medio
que determinará la alimentación al final del periodo de tiempo establecido.
Considere la vigilancia de una planta de producción mediante un componente de gestión de
cargas. El bloque de previsión recibe la alimentación de la red eléctrica y vigila el consumo de
potencia.
● Se vigila constantemente el aprovechamiento de la energía en relación con un valor límite
durante un periodo de tiempo determinado. Cuando los datos del bloque de rendimiento
superan el valor límite, la gestión de cargas dispara una alarma, una advertencia o una
violación de límites, e indica al consumidor que debe desconectarse. Este proceso se
denomina "escalada".
● Tras el pico del valor de umbral, cuando el consumo de potencia es mínimo o se encuentra
dentro del valor de umbral, se conecta el generador (actuador). Este proceso se denomina
"desescalada".
● El periodo de tiempo entre la escalada y la desescalada se denomina retardo de inhibición.
● El tiempo que transcurre hasta el comienzo de la nueva vigilancia de la escalada y la
desescalada se denomina tiempo de estabilización.

7.2

Descripción general del procedimiento de gestión de cargas

Requisitos
Para poder llevar a cabo los siguientes pasos de configuración, deben cumplirse los mismos
requisitos que se describen en el apartado "Descripción general del procedimiento
(Página 15)".

Pasos de configuración
Encontrará una sinopsis de los pasos de configuración más importantes para la gestión de los
datos de energía con los componentes Energy Suite antes de configurar la gestión de cargas
en el apartado "Descripción general del procedimiento (Página 15)".

116

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Optimizar el consumo de energía
7.2 Descripción general del procedimiento de gestión de cargas
La tabla siguiente muestra una sinopsis de los pasos de configuración más importantes para
la gestión de cargas con los componentes Energy Suite:
Tema

Paso

Optimizar el con‐
sumo de energía

1.1

Descripción
Activación de la función de pre‐
visión de un objeto de adquisi‐
ción (Página 122)

Para crear un sistema de gestión de cargas, debe activar la
función de previsión de un objeto de adquisición. Para la
gestión de cargas solo están disponibles los objetos de ad‐
quisición con la función de previsión activada.
Cualquier objeto de adquisición puede activarse para la ges‐
tión de cargas.

1.2

Crear un sistema de gestión de
cargas (Página 123)

Los sistemas de gestión de cargas se utilizan para adminis‐
trar objetos de alimentación. Puede crear un máximo de 5
sistemas de gestión de cargas activos, cada uno con un
objeto de adquisición u objeto de alimentación distinto habi‐
litado.

1.3

Configurar las propiedades de
un sistema de gestión de cargas
(Página 124)

Cada sistema de gestión de cargas representa la estrategia
de optimización del consumo de energía, y debe parametri‐
zarse consecuentemente.
● Seleccionar un objeto de adquisición como objeto de
alimentación
● Establecer valores límite de potencia con un valor
definido por el usuario
● Comprobar la habilitación de los sistemas de gestión de
cargas para el programa de energía

1.4

Agregar actuadores (Pági‐
na 130)

Los actuadores se utilizan para el consumo y/o la genera‐
ción de energía. Cree actuadores y defínalos de forma que
cada actuador pertenezca a un grupo distinto.

1.5

Ajustar las propiedades del ac‐
tuador (Página 131)

Cada actuador representa cómo se debe responder ante la
alimentación en la gestión de cargas, y debe parametrizarse
consecuentemente.
● Seleccionar el tipo de actuador para cada actuador
● Establecer el modo de respuesta y la fuente de respuesta
● Comprobar la habilitación de los actuadores para el
programa de energía

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

117

Optimizar el consumo de energía
7.3 Características y convenciones
Tema

Paso

Generar un pro‐
grama de energía
para la gestión de
cargas

2.1

Descripción
Definir los ajustes generales pa‐ Antes de generarse el programa de energía, ajuste el nú‐
ra el programa de energía (Pá‐ mero de canales de comunicación paralelos acíclicos y el
gina 67)
tiempo de arranque de los bloques en el programa de ener‐
gía.
Asimismo, defina la inhibición de avisos.

2.2

Comprobación de la habilitación
de los objetos de adquisición pa‐
ra el programa de energía y
adaptación si es necesario (Pá‐
gina 39)

Como muy tarde antes de que se genere el programa de
energía, debe decidir qué objetos de adquisición (y, por tan‐
to, qué puntos de medición) deberá contener el programa de
energía. En las tablas de objetos de adquisición puede acti‐
var/anular cómodamente la habilitación de los objetos de
adquisición.

2.3

Generar programas de energía
(Página 133)

La generación del programa de PLC para la adquisición y
procesamiento de datos de energía (abreviado: programa
de energía) se inicia en el árbol del proyecto.
Durante el proceso de generación, en el programa de ener‐
gía se utilizan automáticamente los bloques y tipos de datos
necesarios de la librería de Energy Suite y de la librería de
gestión de cargas, y dichos bloques y tipos de datos se in‐
terconectan según los objetos de adquisición configurados.
El programa de energía generado se crea en la carpeta
"Bloques de programa", subcarpeta "Energy Suite - pro‐
gram", de la CPU S7.

7.3

2.4

Compilar y cargar programa de
PLC (Página 90)

Una vez que se haya generado el programa de energía,
compile todo el programa de PLC y cárguelo en el sistema
de destino CPU S7-1500.

2.5

Probar el programa de energía
(Página 90)

Para comprobar los ajustes, abra en el programa de energía
el bloque de datos en cuestión del objeto de adquisición
correspondiente y observe sus valores online mediante la
función "Observar todo".

Características y convenciones

Compatibilidad de la gestión de cargas con CPU y FW
La tabla siguiente muestra la compatibilidad de las CPU con las distintas versiones de la
gestión de cargas de Energy Suite.

118

CPU / ET 200SP CPU / ET 200SP Open
Controller

FW

Versión de la gestión de cargas de
Energy Suite

CPU S7-1500

≥ V2.0

V16.0

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Optimizar el consumo de energía
7.3 Características y convenciones

Características de la gestión de cargas
La siguiente tabla muestra las características de la gestión de cargas:
Característica

Valor

Número máximo de sistemas de gestión de cargas habilitados para la
generación del programa

5

Número máximo de sistemas de gestión de cargas

99

Número máximo de actuadores por sistema de gestión de cargas

999

Nota
Solo 5 de los 99 sistemas de gestión de cargas disponibles pueden estar activos en varios PLC.
Encontrará más información sobre las características de los componentes de Energy Suite
habituales en el apartado "Características y convenciones (Página 20)".

Convenciones en cuanto a nombres
La tabla siguiente muestra las convenciones en cuanto a nombres para la ingeniería con la
gestión de cargas:
Objeto

Rango de valores para nom‐
bres

Ámbito de validez

Sistemas de gestión de car‐
gas

● 1-32 caracteres

● Nombre unívoco para todo el
proyecto con tipo de archivado
"WinCC Professional (fichero de
variables)"

Actuadores

● Caracteres permitidos:
–

0 ... 9

–

a ... z

–

A ... Z

–

-

–

_

● Nombre unívoco para todo el
proyecto con tipo de archivado
● Caracteres no permitidos:
"WinCC Professional (fichero de
– :?'*"\$%§°
variables)"
– <espacio>
● 1-32 caracteres

–

<avance de línea>

–

<salto de línea>

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

119

Optimizar el consumo de energía
7.4 Optimizar el consumo de energía
Encontrará más información sobre las convenciones en cuanto a nombres de los
componentes de Energy Suite habituales en el apartado "Características y convenciones
(Página 20)".
Nota
Nombres unívocos
Los nombres de los objetos deben ser al menos unívocos en toda la CPU. Si un nombre ya se
ha asignado a un bloque, a una variable PLC o a una constante de la CPU, no podrá utilizarse
para un nuevo objeto. Los actuadores y los sistemas de gestión de cargas deben tener
nombres unívocos. A la hora de comprobar si un nombre es unívoco, no se distingue entre
mayúsculas y minúsculas.

7.4

Optimizar el consumo de energía

7.4.1

Programa de energía para la gestión de cargas
Para la optimización del consumo de energía, defina objetos de adquisición y sistemas de
gestión de cargas en STEP 7 (TIA Portal), en el árbol del proyecto, bajo la CPU S7-1500. Los
objetos de adquisición se emplean para la alimentación en los sistemas de gestión de cargas.
Los sistemas de gestión de cargas se utilizan para la creación de actuadores que consumen
y/o generan energía. Ambos pueden utilizarse para la posterior generación de un programa de
energía.
Tras la correcta instalación de SIMATIC Energy Suite, en el árbol del proyecto, bajo la carpeta
"Objetos de energía", se crea una nueva carpeta denominada "Gestión de cargas". La figura
siguiente muestra la carpeta "Gestión de cargas" en el árbol del proyecto con la subcarpeta
"Sistemas de gestión de cargas".

120

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Optimizar el consumo de energía
7.4 Optimizar el consumo de energía

Objetos de alimentación
Los objetos de alimentación se refieren a la fuente de datos de objetos de adquisición que se
especifica para el bloque de gestión de cargas con el fin de prever los datos de energía. La
alimentación de un bloque de gestión de cargas solo puede ser un objeto de adquisición que
se haya configurado para una tabla de objetos de adquisición. Al seleccionar la alimentación
para un bloque de gestión de cargas, únicamente se muestran las tablas de objetos de
adquisición configuradas para un PLC determinado. En función de la fuente de datos de
energía que haya seleccionado, se generarán los bloques de gestión de cargas y bloques de
base de datos de instancias correspondientes.

Instrucciones para actuadores y valores límite
Para cada bloque de gestión de cargas seleccionado, puede configurar el actuador, el modo
Límite de potencia y la variable de límite. El campo del actuador se puede configurar con un
nombre unívoco. El tipo de actuador puede ser uno de los siguientes:
● Consumidor
● Generador
El modo Límite de potencia puede ser uno de los siguientes:
● Operador WinCC (estático): Se refiere a los datos de Runtime. El modo Límite de potencia
puede ser un valor estático que establezca en Runtime. Cuando se alcanza este valor, el
bloque de previsión dispara las correspondientes advertencias, alarmas o violación de
límites en la gestión de cargas. Puede conmutar los actuadores consecuentemente.
● Variable PLC (dinámico): Se refiere al valor de variable de PLC que se configura en el nodo
"'Variables PLC". Cuando se alcanza este valor, el bloque de previsión dispara las
correspondientes advertencias, alarmas o violación de límites en la gestión de cargas.
Puede conmutar los actuadores consecuentemente.
La variable de límite se refiere al valor de variable que se establece en el bloque de datos.
Puede configurar la variable de límite solo si ha seleccionado la opción de variable PLC. La
variable de límite se puede establecer de acuerdo con la variable PLC o con la variable del
bloque de datos.
Nota
Para el bloque de datos se admiten únicamente los tipos de datos Real y LReal.

Reglas de programación
Nota
Los prefijos "EnS_" y "EnSL_" están reservados para Energy Suite.
Antes de generarse el programa de energía, asegúrese de que los prefijos "EnS_" y "EnSL" no
se utilizan en el programa de PLC actual (bloques de usuario, variables, UDT u objetos
tecnológicos). De este modo se evita la sobrescritura accidental al generarse el programa de
energía.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

121

Optimizar el consumo de energía
7.4 Optimizar el consumo de energía

7.4.2

Activación de la función de previsión de un objeto de adquisición
Es imprescindible activar la función de previsión de un objeto de adquisición para poder usar
objetos de alimentación en los sistemas de gestión de cargas.
Encontrará más información sobre la creación de objetos de adquisición en el apartado
"Agregar objetos de adquisición para tablas de objetos de adquisición (Página 33)".
Hay distintas formas de activar la función de previsión de un objeto de adquisición:
● En la ventana de inspección: al crear y parametrizar el objeto de adquisición
● En la tabla de objetos de adquisición: de manera centralizada y clara para todos los objetos
de adquisición correspondientes

Requisitos
● Se ha creado una tabla de objetos de adquisición en la carpeta "Medición del consumo de
energía", bajo la CPU S7-1500.
● Se ha creado un objeto de adquisición en la tabla de objetos de adquisición.

En la ventana de inspección
Para activar la función de previsión de un objeto de adquisición, proceda del siguiente modo:
1. Bajo la CPU S7-1500, abra la carpeta "Objetos de energía".
2. Abra la carpeta "Medición del consumo de energía".
3. Haga doble clic en la tabla de objetos de adquisición donde esté creado el objeto de
adquisición.
Se abre la tabla de objetos de adquisición con los objetos de adquisición creados.
4. Dentro de la tabla de objetos de adquisición, haga clic en el objeto de adquisición que
desee.
En la ventana de inspección "Propiedades" se muestran las propiedades del objeto de
adquisición.
5. En la navegación local, seleccione la entrada "Configuración > Datos de energía
periódicos".
6. Active la casilla de verificación "Activar previsión periódica para el objeto de adquisición".
Se ha habilitado el objeto de adquisición para la previsión periódica o los sistemas de
gestión de cargas.
Este ajuste del objeto de adquisición se actualiza también en la columna "Previsión" de la tabla
de objetos de adquisición.

En la tabla de objetos de adquisición:
Para activar en caso necesario la función de previsión de uno o varios objetos de adquisición,
proceda del siguiente modo:
1. Bajo la CPU S7-1500, abra la carpeta "Objetos de energía".
2. Abra la carpeta "Medición del consumo de energía".

122

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Optimizar el consumo de energía
7.4 Optimizar el consumo de energía
3. Haga doble clic en la tabla de objetos de adquisición en la que se ha creado el objeto de
adquisición.
Se abre la tabla de objetos de adquisición con los objetos de adquisición creados.
4. Active la casilla de verificación de la columna "Previsión" en la tabla de objetos de
adquisición en todos los objetos de adquisición que desee habilitar para la gestión de
cargas.
Se han habilitado los objetos de adquisición con casillas de verificación activadas para la
previsión periódica o los sistemas de gestión de cargas.
Este ajuste de los objetos de adquisición se actualiza también en la ventana de inspección
"Propiedades".

Resultado
En Runtime:
● La demanda de potencia media y el consumo de energía total se prevén hasta el final del
periodo actual.
● La previsión de la demanda de potencia media [kW] hasta el final del periodo actual está
disponible.
● La previsión del consumo de energía medio [kWh] hasta el final del periodo actual está
disponible.

7.4.3

Crear un sistema de gestión de cargas
Para optimizar el consumo de energía, cree sistemas de gestión de cargas para su estrategia
de gestión de cargas particular. Los sistemas de gestión de cargas se crean en la carpeta
"Gestión de cargas", bajo la carpeta "Objetos de energía".
Encontrará más información sobre el número posible de sistemas de gestión de cargas y las
convenciones en cuanto a nombres en el apartado "Características y convenciones
(Página 118)".

Requisitos
● Se ha configurado una CPU S7-1500 en el proyecto.

Procedimiento
Para crear un sistema de gestión de cargas proceda del siguiente modo:
1. Abra la CPU S7-1500 en el árbol del proyecto.
2. Bajo la CPU S7-1500, abra la carpeta "Objetos de energía".
3. Abra la carpeta "Gestión de cargas".

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

123

Optimizar el consumo de energía
7.4 Optimizar el consumo de energía
4. Haga doble clic en el objeto "Sistemas de gestión de cargas".
Se abre la tabla de los sistemas de gestión de cargas en la mitad superior del área de
trabajo.
5. En la columna "Nombre" de los sistemas de gestión de cargas, haga doble clic en
"<Agregar>".
Se crea un nuevo sistema de gestión de cargas en los sistemas de gestión de cargas.
Si es necesario, cree de la misma forma otros sistemas de gestión de cargas. Si procede,
continúe creando sistemas de gestión de cargas debajo de otras CPU S7-1500 o de la CPU
actual. Dentro del editor de gestión de cargas, puede copiar y pegar la gestión de cargas.

Copiar y ordenar sistemas de gestión de cargas
● Los sistemas de gestión de cargas se pueden copiar mediante el menú contextual. Tras la
copia, compruebe las propiedades del sistema de gestión de cargas y, si es necesario,
modifique los ajustes copiados. Al copiar/pegar, se copian todas las columnas a excepción
de "Alimentación" y "Periodo de archivado". Durante la copia/pegado solo puede haber
activos 5 sistemas de gestión de cargas.
Nota
La copia/pegado solo es posible para un sistema de gestión de cargas. Los actuadores
vinculados al sistema de gestión de cargas no se pueden copiar.
● La columna "Nombre" puede organizarse en orden ascendente o descendente haciendo
clic en la flecha que aparece junto a "Nombre".

7.4.4

Configurar las propiedades de un sistema de gestión de cargas

7.4.4.1

Parametrizar un sistema de gestión de cargas
Cada sistema de gestión de cargas representa la estrategia de optimización del consumo de
energía, y debe parametrizarlo consecuentemente. Los sistemas de gestión de cargas se
parametrizan en la ventana de inspección "Propiedades".
Para cada sistema de gestión de cargas debe especificarse lo siguiente:
● Seleccionar un objeto de adquisición como objeto de alimentación
● Establecer valores límite de potencia con un valor definido por el usuario
● Habilitar el sistema de gestión de cargas para el programa de energía
El programa de energía se genera a partir de las propiedades parametrizadas.

124

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Optimizar el consumo de energía
7.4 Optimizar el consumo de energía

Requisitos
● Se ha creado una tabla de objetos de adquisición en la carpeta "Medición del consumo de
energía", bajo la CPU S7-1500.
● Se ha creado un objeto de adquisición con la función "Previsión" activada en la tabla de
objetos de adquisición.

Procedimiento
Para abrir la ventana de inspección "Propiedades" de un sistema de gestión de cargas,
proceda del siguiente modo:
1. Bajo la CPU S7-1500, abra la carpeta "Objetos de energía".
2. Abra la carpeta "Gestión de cargas".
3. Haga doble clic en el objeto "Sistemas de gestión de cargas".
Se abre la tabla de los sistemas de gestión de cargas en la mitad superior del área de
trabajo.
4. En la tabla de sistemas de gestión de cargas, haga clic en el sistema de gestión de cargas
que desee.
En la ventana de inspección "Propiedades" se muestran todos los parámetros del sistema
de gestión de cargas.
La configuración del sistema de gestión de cargas se describe detalladamente en "Ajustes
generales (Página 126)".
Nota
Todas las modificaciones que se realizan en la ventana de inspección se aplican a la ventana
de propiedades, y viceversa.

Previsión de las condiciones del valor de potencia
Si la previsión actual de potencia o energía reduce el límite de potencia configurado en
combinación con la tolerancia, la gestión de cargas lleva a cabo una desescalada. Para
permitir dicha desescalada, asegúrese de que la gestión de cargas activa esté configurada y
se pueda cargar en un PLC.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

125

Optimizar el consumo de energía
7.4 Optimizar el consumo de energía

7.4.4.2

Ajustes generales
Un sistema de gestión de cargas incluye los siguientes parámetros de configuración:
Ajuste

Descripción

Nombre

Nombre unívoco del sistema de gestión de cargas para toda la CPU.
El nombre puede cambiarse según los requisitos particulares.
Encontrará más información sobre las convenciones en cuanto a nom‐
bres en el apartado "Características y convenciones (Página 118)".

Habilitación gestión de cargas Determina si se debe activar la gestión de cargas durante la genera‐
ción del programa de energía.
● Si esta casilla de verificación está activada, el sistema de gestión
de cargas se habilita para la generación del programa de energía.
● Si esta casilla de verificación está desactivada, el sistema de
gestión de cargas no se utiliza en el programa de energía.
Si el número de licencias Runtime para Energy Suite es menor que el
número de sistemas de gestión de cargas habilitados, se cancela la
generación del programa de energía y se muestra un mensaje de
error. Los sistemas de gestión de cargas no habilitados no se tienen en
cuenta a la hora de contar las licencias.
Solo puede haber 5 sistemas de gestión de cargas activos por cada
CPU S7-1500. Tras activar 5 sistemas de gestión de cargas, la casilla
de verificación Habilitación gestión de cargas se desactiva y se mues‐
tra un mensaje de error.
Alimentación

Selección de la alimentación. La alimentación es la fuente de datos de
energía, ya se trate de datos de hardware o de software. La alimen‐
tación para el sistema de gestión de cargas es un objeto de adquisi‐
ción. La alimentación es el valor de potencia que se debe pronosticar
hasta el final del periodo actual del objeto de adquisición.
● Si la potencia real de la alimentación es superior al valor límite, el
sistema de gestión de cargas puede escalarse.
● Si la potencia real de la alimentación es inferior al valor límite, el
sistema de gestión de cargas puede desescalarse.
Puede configurar la misma alimentación para varios sistemas de ges‐
tión de cargas.
La información "El bloque de previsión calcula los datos de energía de
acuerdo con el valor fijado en este parámetro".

Periodo de archivado

Periodo de archivado del objeto de alimentación. El objeto de alimen‐
tación asume el periodo de archivado (y la unidad) del objeto de ad‐
quisición correspondiente.
El periodo de archivado puede modificarse en la configuración del
objeto de adquisición.

Modo Límite de potencia

Selección del modo Límite de potencia. El modo Límite de potencia
puede seleccionarse de la siguiente forma:
● Operador WinCC (estático): desactiva el campo de la tabla para la
variable de límite.
● Variable PLC (dinámico): permite explorar la tabla de variables
PLC.

126

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Optimizar el consumo de energía
7.4 Optimizar el consumo de energía
Ajuste

Descripción

Variable de límite

Al seleccionar el modo Límite de potencia "Variable PLC (dinámico)",
se puede configurar la variable de límite. Con el modo Límite de po‐
tencia "Variable PLC (dinámico)", seleccione la variable PLC corres‐
pondiente.
Según esta opción, puede regular el valor límite de la variable PLC con
un valor definido por el usuario.

Comentarios

Descripción abreviada opcional del sistema de gestión de cargas; p.
ej., su finalidad o la alimentación del sistema de gestión de cargas.

Consulte también
Parametrizar un sistema de gestión de cargas (Página 124)

7.4.5

Configuración de los parámetros de la gestión de cargas con ayuda de elementos
de librería

Enlace de faceplates con parámetros de gestión de cargas
Para vigilar el sistema de gestión de cargas, puede configurar los parámetros, p. ej., la
alimentación y los actuadores. Mientras configura el programa de gestión de cargas en el PLC,
tiene a su disposición en la librería global plantillas para el control de la gestión de cargas y la
configuración de parámetros de los actuadores. Puede configurar las pantallas de
visualización de la gestión de cargas de forma manual o automática. La visualización
automática se lleva a cabo con ayuda de SiVArc. Encontrará más información sobre la
generación automática en la ayuda en pantalla de SiVArc. El procedimiento expuesto a
continuación describe la configuración manual de la visualización de la gestión de cargas.
Requisitos
● Un PLC conectado a un panel de operador (el aparato soportado es WinCC RT
Professional)
● Uno o varios sistemas de gestión de cargas en curso con el objeto de alimentación
correspondiente y actuadores configurados
● Generación del programa correcta
Procedimiento
Para configurar faceplates mediante parámetros de gestión de cargas, proceda del modo
siguiente:
1. Después de la configuración de la gestión de cargas mediante alimentación y los
actuadores, examine la librería global: Energy Suite > Visualización gestión de cargas.
Se mostrarán plantillas de gestión de cargas.
2. Puede arrastrar y soltar las plantillas de imagen de la gestión de cargas en la carpeta
"Imágenes" del panel de operador.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

127

Optimizar el consumo de energía
7.4 Optimizar el consumo de energía
3. Puede arrastrar y soltar las plantillas de variables de la gestión de cargas en la
carpeta "Variables HMI" del panel de operador.
4. Para conectar los faceplates con las variables:
– Abra la plantilla que se colocó en la carpeta "Plantillas HMI".
– Examine la columna de variables PLC para buscar la variable PLC que esté disponible
junto con los objetos de adquisición después de la generación.
5. El faceplate se conecta con las variables.
6. Cargue el proyecto HMI en el dispositivo local haciendo clic en la opción Cargar en
dispositivo de las herramientas SFC.
Resultado
● Los parámetros de la gestión de cargas en WinCC RT Professional se muestran.
● Si desea modificar un faceplate en runtime, haga clic en los parámetros de la gestión de
cargas.
Modo de operación Juego de parámetros 1 y Juego de parámetros 2: puede agregar
valores a la gestión de cargas manualmente en runtime cambiando entre los juegos de
parámetros con un clic en "Activar juego de parámetros 1" o
"Activar juego de parámetros 2". El "Juego de parámetros 1" está activo por defecto.
● Se aplican los criterios siguientes:
1. Valor inicial de la tolerancia de límites: 0–999 [%]
2. Prioridad: 1–1999
3. Secuencia de Rolling: 1–99
Los parámetros predeterminados de la gestión de cargas son:
● Estado gestión de cargas: indica el estado de la gestión de cargas (activada/desactivada).
● Valor inicial de la tolerancia de límites: calcula la precisión de los valores de previsión.
● Duración de la tolerancia de límites: duración establecida para valores de tolerancia de
límites.
● Prioridad: los actuadores se priorizan para la escalada o desescalada.
● Secuencia de Rolling: se asigna para actuadores con la misma prioridad.
● Tiempo de conexión mínimo: tiempo mínimo necesario para la conexión con un actuador.
● Tiempo de conexión máximo: tiempo máximo necesario para la conexión con un actuador.
Nota
Para conmutar el estado de un actuador manualmente se utiliza el modo de
comando manualCommand. Este modo varía en función del modo de operación. El ajuste
predeterminado de manualCommand es FALSO. Si cambia el OperationMode a FALSO (es
decir, si activa el modo de comando manualCommand), el actuador se puede conmutar
manualmente en el sistema. Si OperationMode está ajustado a AUTO, el modo de
comando manualCommand mantiene el estado actual del actuador.

128

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Optimizar el consumo de energía
7.4 Optimizar el consumo de energía

Copia de seguridad y restauración
Después de cargar el PLC y el proyecto HMI, está disponible la interfaz de usuario para tareas
de copia de seguridad y restauración.
● En modo runtime, haga clic en "Copia de seguridad" para crear una copia de la
configuración de la gestión de cargas. Al hacer clic en la opción "Copia de seguridad" se
crea un archivo de seguridad en la tarjeta SD del PLC con el nombre <LMGTName
>_ConfigBackup.bin. Con cada nueva ejecución de la opción de copia de seguridad, el
archivo de seguridad se sobrescribirá con los últimos cambios.
● En modo runtime, haga clic en "Restablecer" para restaurar la configuración de la gestión
de cargas. Si hace clic en la opción de restauración, se leerá la configuración de la gestión
de cargas del archivo de seguridad más reciente que se haya guardado en la tarjeta SD del
PLC.
Nota
● Al restablecer se sobrescriben el juego de parámetros LMGT completo en el DB general,
así como los metadatos y el juego de parámetros del actuador en el DB de la lista de
actuadores.
● La copia de seguridad y la restauración de bloques funcionan en PLC con una versión
de firmware 2.5 o superior.

Archivo de registro para la gestión de cargas
Los tres tipos de archivos de registro son:
● Violación de límites: en caso de una violación de límites (la demanda de potencia excede
el límite de potencia), el bloque de programa Lmgt_Control dispara la creación del archivo
de registro accediendo a "EnS_LmgtGeneralData" y "EnS_ActorList". Se crea un archivo de
registro de tipo "<LMGTName>_LimitViol_xxx.bin". Cuando se alcanza el tamaño máximo
admitido del archivo, se crea un nuevo archivo con un número de archivo superior xxx. Los
datos se leen y se escriben en la tarjeta SD del PLC.
● Operación de conmutación: si los actuadores de la gestión de cargas realizan una
operación de conmutación, se leen los datos de "EnS_LmgtGeneralData" y "EnS_ActorList"
y estos se escriben en la tarjeta SD del PLC. Se crea un archivo de registro de tipo
"<LMGTName>SwitchEvnt_xxx.bin".
● Falta de actuadores: si el bloque regulador quiere realizar una escalación de la petición y
no hay ningún actuador disponible. Se crea un archivo de registro de tipo
"<LMGTName>_LackActors_xxx.bin".
Nota
Con varios archivos, xxx es un número consecutivo que se define mediante el parámetro de
entrada "amountLogFiles" en el PLC.
El archivo de registro se compone de todos los parámetros DB del sistema de gestión de
cargas y del DB de actuadores global. El archivo de registro incluye datos como el nombre del
sistema de gestión de cargas, la fecha y hora de la violación de límites o de los actuadores (incl.
la hora local y UTC), el límite de potencia, la potencia actual, la previsión de la potencia media
o la potencia media (al final de un periodo), etc.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

129

Optimizar el consumo de energía
7.4 Optimizar el consumo de energía

7.4.6

Agregar actuadores
Encontrará más información sobre el número posible de actuadores y las convenciones en
cuanto a nombres en el apartado "Características y convenciones (Página 118)".

Requisitos
● Se han creado uno o varios sistemas de gestión de cargas con el objeto de alimentación
correspondiente.

Procedimiento
Para crear un actuador para el sistema de gestión de cargas que desee, proceda de la
siguiente manera:
1. Abra la CPU S7-1500 en el árbol del proyecto.
2. Bajo la CPU S7-1500, abra la carpeta "Objetos de energía".
3. Abra la carpeta "Gestión de cargas".
4. Haga doble clic en el objeto "Sistemas de gestión de cargas".
Se abre la tabla de actuadores en la mitad inferior del área de trabajo.
5. En la mitad superior del área de trabajo, haga clic en el sistema de gestión de cargas que
desee.
6. En la columna "Nombre" de la tabla de actuadores, haga doble clic en "<Agregar>".
Puede configurar el "Tipo de actuador", cuando la "Fuente de respuesta" sea un objeto.
Se crea un nuevo actuador para el sistema de gestión de cargas deseado. El símbolo indica
el tipo de actuador:
Símbolo

Tipo de actuador
Consumidor
Generador

Si es necesario, cree de la misma forma otros actuadores.

Copiar actuadores
Se pueden copiar actuadores entre los sistemas de gestión de cargas mediante el menú
contextual. Tras la copia, compruebe las propiedades del actuador y, si es necesario,
modifique los ajustes copiados.

Consulte también
Crear un sistema de gestión de cargas (Página 123)

130

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Optimizar el consumo de energía
7.4 Optimizar el consumo de energía

7.4.7

Ajustar las propiedades del actuador

7.4.7.1

Parametrizar actuadores
Cada actuador representa cómo se debe responder ante la alimentación en la gestión de
cargas, y debe parametrizarlo consecuentemente. Los actuadores se parametrizan en la
ventana de inspección "Propiedades".
Para cada actuador debe especificarse lo siguiente:
● Seleccionar el tipo de actuador para cada actuador
● Establecer el modo de respuesta y la fuente de respuesta
● Establecer el tipo de señal de control y la señal de control.
● Habilitar el actuador para el programa de energía
El programa de energía se genera a partir de las propiedades parametrizadas.

Requisitos
● Se ha creado un actuador para el sistema de gestión de cargas deseado.

Procedimiento
Para abrir la ventana de inspección "Propiedades" de un actuador, proceda del siguiente modo:
1. Bajo la CPU S7-1500, abra la carpeta "Objetos de energía".
2. Abra la carpeta "Gestión de cargas".
3. Haga doble clic en el objeto "Sistemas de gestión de cargas".
4. Haga clic en el sistema de gestión de cargas en el que se creó el actuador deseado.
Se abre la tabla de actuadores del sistema de gestión de cargas seleccionado en la mitad
inferior del área de trabajo.
5. Haga clic en el actuador que desee.
En la ventana de inspección "Propiedades" se muestran todos los parámetros del actuador.
Este ajuste del actuador en la ventana de inspección "Propiedades" se actualiza
igualmente en la tabla "Actuadores".
La configuración del actuador se describe con detalle en "Ajustes generales (Página 132)".

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

131

Optimizar el consumo de energía
7.4 Optimizar el consumo de energía

7.4.7.2

Ajustes generales
Un actuador incluye los siguientes parámetros de configuración:
Ajuste

Descripción

Nombre

Nombre unívoco del actuador para toda la CPU. El nombre puede
cambiarse según los requisitos particulares.
Encontrará más información sobre las convenciones en cuanto a nom‐
bres en el apartado "Características y convenciones (Página 118)".

Tipo de actuador

Selección del tipo de actuador. El tipo de actuador puede ser uno de
los siguientes:
● Consumidor: consume energía
● Generador: genera energía
Puede conmutar los actuadores de acuerdo con los datos de previ‐
sión. De forma predeterminada, el tipo de actuador es "consumidor".

Modo de respuesta

Selección del modo de respuesta. El bloque de previsión proporciona
una respuesta según el consumo de energía del actuador. Si el con‐
sumo de energía es superior al valor límite, aparece la respuesta.
Las respuestas posibles son las siguientes:
● Sin respuesta
● Variable de estado
● Valor de potencia
● Objeto de adquisición

Fuente de respuesta

Selección de la fuente de respuesta. El bloque de previsión muestra la
fuente en razón de la cual se genera la respuesta. Para una respuesta
determinada pueden seleccionarse las siguientes fuentes:
● Sin respuesta: la celda está desactivada
● Variable de estado: admite únicamente variables PLC o de bloque
de datos del tipo de datos Bool
● Valor de potencia: admite variables PLC o de bloque de datos de
los tipos de datos Real, LReal, Int y DInt
● Objeto de adquisición: soporta los objetos de adquisición
configurados en la tabla de objetos de adquisición.

Tipo de señal de control

Determina el estado del control del actuador. Son posibles los siguien‐
tes tipos:
● Binario: indica el estado del conmutador; es decir, conectado/
desconectado
● Analógico: indica el estado de la potencia; es decir, conectada/
desconectada

Señal de control

Asigna las variables según el tipo de señal de control para:
● Binario: solo se pueden seleccionar variables con tipos de datos
booleanos
● Analógico: solo se pueden seleccionar variables de los tipos Real,
LReal, Int, Dint

132

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Optimizar el consumo de energía
7.5 Generar un programa de energía para la gestión de cargas
Ajuste

Descripción

Habilitación actuador

Determina si se deben activar los actuadores durante la generación
del programa de energía.
● Si esta casilla de verificación está activada, el actuador se habilita
para la generación del programa de energía.
● Si esta casilla de verificación está desactivada, el actuador no se
utiliza en el programa de energía.
Si el número de licencias Runtime para Energy Suite es menor que el
número de actuadores habilitados, se cancela la generación del pro‐
grama de energía y se muestra un mensaje de error. Los actuadores
no habilitados no se tienen en cuenta a la hora de contar las licencias.

Comentarios

Descripción abreviada opcional del actuador; p. ej., su finalidad o los
tipos de actuador.

Consulte también
Parametrizar actuadores (Página 131)

7.5

Generar un programa de energía para la gestión de cargas

7.5.1

Generar programas de energía
Una vez que se han terminado de configurar los sistemas de gestión de cargas y los
actuadores y de establecer los ajustes generales del programa de energía, genere el programa
de energía para la gestión de cargas de acuerdo con las instrucciones de los siguientes
apartados.
Encontrará más información sobre los ajustes generales del programa de energía y las
licencias Runtime para Energy Suite en los siguientes apartados:
● "Definir los ajustes generales para el programa de energía (Página 67)"
● "Ajustes generales (Página 68)"
● "Licencias Runtime para Energy Suite (Página 68)"

Requisitos
● Todos los sistemas de gestión de cargas intervinientes están habilitados para el programa
de energía.
● Los sistemas de gestión de cargas habilitados para el programa de energía están
totalmente configurados.
● Todos los actuadores intervinientes están habilitados para el programa de energía.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

133

Optimizar el consumo de energía
7.5 Generar un programa de energía para la gestión de cargas
● Los actuadores habilitados para el programa de energía están totalmente configurados.
● Se cumplen todos los requisitos para generar programas de energía generales de Energy
Suite.
Encontrará más información al respecto en el apartado "Generar el programa de energía
(Página 67)".

Procedimiento
A fin de generar el programa de energía para la gestión de cargas, proceda de la siguiente
manera:
1. Abra la CPU S7-1500 en el árbol del proyecto.
2. Haga clic en el objeto "Objetos de energía", debajo de la CPU S7-1500, y seleccione la
opción "Generar programa de energía" en el menú contextual.
Como alternativa, puede seleccionar esta opción en "Configuración del programa de
energía", haciendo clic en el símbolo
para "Generar programa de energía".
Se abre un cuadro de diálogo con opciones de selección para generar el programa de
energía.
3. Seleccione una de las opciones:
– Programa de medición del consumo de energía: genera el programa de energía con los
valores configurados para la medición del consumo de energía.
Si solo es necesario crear un programa de medición del consumo de energía, consulte
el apartado "Generar el programa de energía (Página 70)".
– Programa de energía completo (adquisición de datos de energía y gestión de cargas):
genera el programa de energía con los valores configurados para la medición del
consumo de energía y la gestión de cargas. Si la gestión de cargas no se ha
configurado, solo se genera el programa de medición del consumo de energía.
4. Haga clic en el botón "Generar".
El generador comprueba la integridad y la plausibilidad de la configuración de los objetos
de adquisición e inicia la generación del programa de energía. En la ventana de inspección,
en la sección "Información > Energy Suite", se muestran informaciones y eventos durante
la generación del programa de energía.
5. Haga clic en el botón "Cancelar" para interrumpir la generación.
6. Con la función "Ir a" puede saltar hasta la posición de la configuración que sea relevante
para el evento en cuestión.
7. Puede repetir los pasos para generar el programa de energía con las configuraciones
necesarias.

Resultado
Una vez que se han configurado los objetos de adquisición, en la carpeta "Bloques de
programa", debajo de la CPU S7-1500, se crean instancias de los bloques necesarios a partir
de la librería de Energy Suite y de la librería del hardware de medición. Asimismo, en la carpeta
"Bloques de programa" se completan otros componentes necesarios; p. ej., bloques de
organización y bloques de datos, y se crean las interconexiones necesarias.
En la carpeta "Tipos de datos PLC", debajo de la CPU S7-1500, se crean instancias de los tipos
de datos a partir de la librería de Energy Suite y de la librería del hardware de medición.

134

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Optimizar el consumo de energía
7.5 Generar un programa de energía para la gestión de cargas
Se genera el programa de energía para todos los objetos de adquisición habilitados
(independientemente de la distribución en las tablas de objetos de adquisición).

①
②

③
④

Objeto

Descripción

Energy Suite – program

Nueva carpeta para el programa de energía

EnS - block types (Página 137)

Subcarpeta "Acquisition – block types" con los blo‐
ques de Energy Suite y los bloques de drivers del
hardware de medición (bloques de función), así co‐
mo el bloque de previsión para la gestión de cargas.
Subcarpeta "LMGT – blocks" con otros bloques de
función para la gestión de cargas

EnS - program blocks (Pági‐
na 140)

Carpeta para otros bloques (bloques de organiza‐
ción, funciones, DB, etc.)

EnS - Objetos de adquisición (Pá‐ Bloques para objetos de adquisición (bloques de
gina 81)
datos)

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

135

Optimizar el consumo de energía
7.5 Generar un programa de energía para la gestión de cargas

⑤

Objeto

Descripción

LMGT - systems (Página 140)

⑥

Carpeta con otras funciones y bloques de datos pa‐
ra la gestión de cargas y actuadores

Energy Suite data types (Pági‐
na 141)

Carpeta con los tipos de datos de Energy Suite y los
tipos de datos del hardware de medición

⑦ Subcarpeta "LMGT - data types" que contiene
otros tipos de datos para la gestión de cargas

Escenario para la generación del delta
● Agregar: si agrega nuevos actuadores de la gestión de cargas en la tabla "Gestión de
cargas" junto con objetos de adquisición existentes y genera un programa de energía
durante la generación del delta, los bloques de actuadores recién generados se añadirán
a los bloques existentes en la carpeta "Energy Suite - program". Las respectivas llamadas
de funciones se actualizan como corresponda.
– Durante el runtime del PLC, solo se archivarán con etiqueta de fecha/hora los bloques
recién agregados sin reiniciar el PLC.
● Cambiar: si durante la generación delta se editan sistemas de gestión de cargas o
actuadores en la tabla "Gestión de cargas" junto con objetos de adquisición existentes y se
genera un programa de energía, los bloques de actuadores modificados del sistema de
gestión de cargas se generan y se agregan a los bloques de la carpeta "Energy Suite program". Los parámetros modificados de un sistema de gestión de cargas o actuador se
actualizan en runtime en la columna "Valor inicial" solo para un DB de instancia. Para que
los cambios de la columna "Valor inicial" sean visibles en la columna "Valor de
monitorización" en runtime, haga clic en "Cargar valores iniciales como valores reales". Las
respectivas llamadas de funciones se actualizan como corresponda.
– En el runtime del PLC solo se inicializan los bloques modificados (al cambiar un
parámetro de un actuador se reinicializa el DB del actuador).
– En el runtime de SCADA: todas las referencias de imágenes a la gestión de cargas no
modificada y a los actuadores siguen siendo válidas.
● Borrar: si borra actuadores de la gestión de cargas en la tabla "Gestión de cargas" junto con
objetos de adquisición existentes y genera un programa de energía durante la generación
del delta, solo se borrarán los bloques de actuadores seleccionados, lo que no influirá en
los bloques existentes en la carpeta "Energy Suite - program". Las respectivas llamadas de
funciones se actualizan como corresponda.
– Durante el runtime del PLC, no se archivarán con etiqueta de fecha/hora los bloques
modificados o borrados, sino solo los bloques restantes, sin reiniciar el PLC.

Consulte también
EnS - acquisition objects (Página 139)

136

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Optimizar el consumo de energía
7.5 Generar un programa de energía para la gestión de cargas

7.5.2

Estructura del programa de energía

7.5.2.1

Estructura del programa de energía
Cuando se crea el programa de energía, se crean automáticamente las siguientes carpetas
bajo la CPU S7-1500:
● Carpeta "Energy Suite - program" debajo de "Bloques de programa", con subcarpetas
– [EnS General program elements]
- EnS - block types (Página 137)
- EnS - program blocks (Página 140)
– EnS - acquisition objects (Página 139)
– LMGT - systems (Página 140)
● Carpeta "Energy Suite data types (Página 141)" debajo de "Tipos de datos PLC"
Nota
Bloques del programa de energía
A partir de los objetos de adquisición configurados y de la configuración del programa de
energía, SIMATIC Energy Suite genera automáticamente todos los bloques y tipos de datos
necesarios, así como sus interconexiones.
Para aplicaciones estándar con SIMATIC Energy Suite no es necesario adaptar estos bloques.

7.5.2.2

EnS - block types
La estructura de un programa de energía depende las siguientes configuraciones:
● Fuentes de datos de energía (Página 23)
● Objetos de adquisición habilitados (Página 36)
● Configuración del programa de energía (Página 67)
● Ajustes de la gestión de cargas (Página 124)
● Ajustes de actuadores (Página 131)

Funcionamiento de los bloques de Energy Suite
El programa de la gestión de cargas tiene un diseño modular, de modo que cada función puede
conectarse o desconectarse y administrarse por separado.
No obstante, hay una serie de funcionalidades imprescindibles para el funcionamiento básico
de la gestión de cargas.
● El conjunto básico de funciones consta de un bloque de previsión, un bloque de control, un
bloque de actuadores y un bloque de copia de seguridad/restauración.
● Dos bloques de datos se guardan en el sistema de memoria central, el DB
LmgtGeneralData para datos generales y el DB ActorList para los datos relevantes para los
actuadores.
Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

137

Optimizar el consumo de energía
7.5 Generar un programa de energía para la gestión de cargas
El bloque de previsión obtiene sus datos de entrada de un objeto de adquisición de una
alimentación que no forma parte de la gestión de cargas sino que procede de Energy Suite.
La figura siguiente muestra el funcionamiento de los bloques de Energy Suite:

'%SDUD
FRQIDFWXDGRU
SULRULGDG
57
'DWRVGHDFWXDGRU

'DWRVGHDFWXDGRU

&RQIYDORUO¯PLWH
8VXDULR5XQWLPH
3UHYHQHUJ¯D

%ORTXHGHFRSLD
GHVHJXULGDG
UHVWDXUDFLµQ

5HTXHVWGDWRV
SHWLFLµQ
3HWLFLRQHVGDWRV
SHWLFLµQ
'DWRV
2UJ

'%SDUD
DOPDFHQD
PLHQWRGH
GDWRV
FHQWUDOL]DGR

'DWRV
2UJ

&RQWDGRUGH
HQHUJ¯D

DFWXDOL]DFLµQGH
ORVYDORUHVDO
PHQRVFDGD
VHJXQGR

%ORTXHGHSUHYLVLµQ
(QHUJ¯D%DVLF
(QHUJ¯D0HWD

7DVNSLOD
SHWL
FLRQHV

%ORTXHGHDFWXDGRUHV

'DWRV
2UJ
3UHYLVLµQ
HQHUJ¯D

2EMHWRGHHQHUJ¯D
9DORU
PRPHQW£QHR 7LSRFRQWDGRUHQHUJ¯D
9DORUPRPHQW

5HTXHVW
SLOD
SHWL
FLRQHV

&RQIYDORU
O¯PLWH
8VXDULR
5XQWLPH
5HTXHVWSLOD
SHWLFLRQHV
7DVNSLOD
SHWLFLRQHV

%ORTXHGHFRQWURO

3UHYHQHUJ¯D
'DWRV
2UJ

(QHUJ¯D0HWD%DVLF

)OXMRGHGDWRVGHHQHUJ¯D
'DWRVGHSDUDPHWUL]DFLµQ

138

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Optimizar el consumo de energía
7.5 Generar un programa de energía para la gestión de cargas

Acquisition - block types y LMGT - blocks
Cuando se ha generado el programa general (medición del consumo de energía y gestión de
cargas), la subcarpeta "EnS - block types" contiene las instancias de todos los bloques de
función de la librería de Energy Suite. Si el hardware de medición es la fuente de datos de
energía, la carpeta "Acquisition - block types" contendrá una subcarpeta "EnSL - block types"
con las instancias del bloque de drivers de la librería del hardware de medición (Página 84)
correspondiente. Para la gestión de cargas, la carpeta "LMGT - blocks" contiene las instancias
de los bloques de función disponibles adicionalmente para la gestión de cargas.
● Bloques de función para la medición del consumo de energía: encontrará más información
sobre los bloques de función para la medición en el apartado "EnS - block types
(Página 75)"
● Bloques de función para la gestión de cargas: la tabla siguiente muestra los bloques de
función "LMGT - blocks" para la gestión de cargas
Bloque de función

Descripción

EnS_LmgtForecast_x (Pági‐
na 218)

Funcionalidad de previsión para los datos de
energía de la alimentación.

EnS_LmgtControl_Peak (Pá‐
gina 219)

Lógica de control para la gestión de cargas de
pico. Cálculo y evaluación de valores límite. Da‐
tos de manejo de órdenes para actuadores.

EnS_LmgtActor_x (Pági‐
na 226)

Funcionalidad de respuesta, estado y control.

EnS_LmgtBackupRestore
(Página 242)

Generación de informes de violaciones de lími‐
tes y operaciones de conmutación. Funcionali‐
dad de copia de seguridad/restauración para
datos de configuración.

7.5.2.3

Ejemplo en STEP 7 (TIA Portal)

EnS - acquisition objects
Cuando se ha generado el programa, la carpeta "EnS - acquistion objects" contiene una
subcarpeta denominada "<Nombre de la tabla de objetos de adquisición>" por cada tabla de
objetos de adquisición con objetos de adquisición.
La carpeta "<Nombre del objeto de adquisición>" contiene los bloques de datos de instancia
(Página 81)
● de los bloques de función necesarios para los objetos de adquisición en el programa de
energía.
● con los valores de energía periódicos de los objetos de adquisición que están disponibles
para el respaldo y el archivado.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

139

Optimizar el consumo de energía
7.5 Generar un programa de energía para la gestión de cargas
Los bloques de datos para el respaldo de los datos de energía también se crean en esta
carpeta como instancias a partir de la librería de Energy Suite.

7.5.2.4

EnS - program blocks
Cuando se ha generado el programa, la carpeta "EnS - program blocks" contiene bloques
adicionales, como bloques de organización, bloques de datos y funciones (FC) que se
necesitan para el programa de energía.

EnS - program blocks
Cuando se ha generado el programa, la carpeta "EnS - program blocks" contiene los bloques
generales:
● Bloques de programa generales para la medición del consumo de energía: encontrará más
información sobre los bloques de programa generales para la medición en el apartado
"Bloques de programa EnS (Página 78)"
● Bloques de programa generales para la gestión de cargas: la tabla siguiente muestra los
bloques de programa generales para la gestión de cargas
Bloque

Descripción

Ejemplo en STEP 7 (TIA Portal)

EnS_Forecast_CycInt
<NNNcc>FC

FC para el bloque de previsión en el OB de
alarma cíclica. "NNN" y "cc" son comodines
para la duración y la unidad.
Ejemplo:
Con un tiempo de ciclo de 100 ms se crea el
"EnS_Forecast_CycInt100msFC".

EnS_Lmgt_CycInt
<NNNcc>FC

FC para el bloque de gestión de cargas en el
OB de alarma cíclica. "NNN" y "cc" son como‐
dines para la duración y la unidad.
Ejemplo:
Con un tiempo de ciclo de 100 ms se crea el
"EnS_Lmgt_CycInt100msFC".

EnS_LmgtFore‐
DB de instancia del FB "EnS_LmgtFore‐
cast_LinExt_<Nombre cast_LinExt".
del objeto de adquisi‐ Ejemplo:
ción>
A partir de un objeto de adquisición llamado
"Transformer1" se crea el DB de instancia
"EnS_LmgtForecast_LinExt_Transformer1".

7.5.2.5

LMGT - systems
Cuando se ha generado el programa, la carpeta "LGMT - systems" contiene bloques
adicionales para los sistemas de gestión de cargas y actuadores, como bloques de datos y
funciones (FC) que se necesitan para la gestión de cargas.

140

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Optimizar el consumo de energía
7.5 Generar un programa de energía para la gestión de cargas

LMGT - systems
Cuando se ha generado el programa, la carpeta "LGMT - systems" contiene los siguientes
bloques generales:
Bloque

Descripción

EnS_LmgtActor‐
List_<Nombre
del sistema de
gestión de car‐
gas> (Pági‐
na 248)

Bloque de datos para parámetros, datos
de configuración y lista de prioridad de
los actuadores.

EnS_LmgtCon‐
trol_Peak_<Nom
bre del sistema
de gestión de
cargas> (Pági‐
na 219)

Bloque de datos para valor límite, pará‐
metros de control y tiempo de la gestión
de cargas.

EnS_LmgtGene‐
ralData_<Nom‐
bre del sistema
de gestión de
cargas> (Pági‐
na 247)

Bloque de datos para parámetros, esta‐
do, datos de petición e información de
control de la gestión de cargas.

EnS_LmgtActor
_<Nombre del
actuador>

Ejemplo en STEP 7 (TIA Portal)

Ejemplo:
A partir de un sistema de gestión de car‐
gas llamado "Load_manage‐
ment_system_1" se crea "EnS_LmgtAc‐
torList_Load_management_system_1".

Ejemplo:
A partir de un sistema de gestión de car‐
gas llamado "Load_manage‐
ment_system_1" se crea
"EnS_LmgtControl_Peak_Load_mana‐
gement_system_1".

Ejemplo:
A partir de un sistema de gestión de car‐
gas llamado "Load_manage‐
ment_system_1" se crea "EnS_LmgtGe‐
neralData_Load_manage‐
ment_system_1".
DB de instancia del FB "EnS_LmgtAc‐
tor".
Ejemplo:
A partir de un actuador llamado "Ac‐
tor_1" se crea el DB de instancia
"EnS_LmgtActor_Actor_1".

7.5.2.6

Energy Suite data types
La librería de Energy Suite contiene la información necesaria para los tipos de datos del
programa de energía.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

141

Optimizar el consumo de energía
7.5 Generar un programa de energía para la gestión de cargas

Energy Suite - data types
Cuando se ha generado el programa, la carpeta "Energy Suite - data types" contiene las
instancias de los bloques de tipos de datos de la librería de Energy Suite.
● Tipos de datos para la medición del consumo de energía: encontrará más información
sobre los tipos de datos para la medición en el apartado "Energy Suite: tipos de datos
(Página 82)"
● Tipos de datos para la gestión de cargas: la tabla siguiente muestra los tipos de datos para
la gestión de cargas en la subcarpeta "LMGT - data types"

142

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Optimizar el consumo de energía
7.5 Generar un programa de energía para la gestión de cargas

Tipo de datos

Descripción

EnS_typeActorElement (Pági‐
na 248)

Estructura de datos para un actuador

EnS_typeLmgtActorMeta (Pá‐
gina 249)

Metadatos del actuador

EnS_typeLmgtActorParameter
(Página 250)

Parámetros del actuador

Ejemplo en STEP 7 (TIA Portal)

EnS_typeLmgtActorParameter‐ Juego de parámetros para un actuador
Set (Página 251)
EnS_typeLmgtActorStatus (Pá‐ Información de estado y valores reales del
gina 251)
actuador
EnS_typeLmgtActorStatusI‐
nOut (Página 252)

Valores de respuesta y control del actuador

EnS_typeLmgtAlarmElement
(Página 253)

Datos de alarma y aviso

EnS_typeLmgtControlLimit‐
Config (Página 254)

Configuración de valores límite de las fun‐
ciones básicas de la gestión de cargas

EnS_typeLmgtControlParame‐
ters (Página 255)

Datos de parámetros de control

EnS_typeLmgtControlParame‐
terSet (Página 255)

Juego de parámetros de control

EnS_typeLmgtControlTime‐
Config (Página 256)

Configuración horaria de las funciones bá‐
sicas de la gestión de cargas

EnS_typeLmgtForecastValues
(Página 257)

Datos de previsión de energía para la ges‐
tión de cargas

EnS_typeLmgtGeneralData
(Página 257)

Datos generales

EnS_typeLmgtJobFeedbackE‐
lement (Página 258)

Datos de respuesta de petición de un ac‐
tuador

EnS_typeLmgtJobRequestEle‐
ment (Página 259)

Datos de Request de petición a actuadores

EnS_typeLmgtJobRequestS‐
tack (Página 260)

Datos de la pila de Request

EnS_typeLmgtJobTaskEle‐
ment (Página 260)

Datos de Task para actuadores

EnS_typeLmgtJobTaskStack
(Página 261)

Datos de la pila de Task

EnS_typeLmgtOrganisation
(Página 262)

Datos relevantes de los periodos para la
gestión de cargas

EnS_typeLmgtTriggerBR (Pá‐
gina 262)

Información de disparo para el bloque de
copia de seguridad/restauración

EnS_typeLmgtVisualization
(Página 263)

Datos para la visualización

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

143

Optimizar el consumo de energía
7.5 Generar un programa de energía para la gestión de cargas

144

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.1

A

Sinopsis de los bloques de Energy Suite para la adquisición
Nota
Descripción de los bloques de Energy Suite para expertos
En los apartados siguientes encontrará la descripción detallada del funcionamiento y de los
parámetros de cada bloque.
Para aplicaciones estándar con SIMATIC Energy Suite no se necesita esta información. A
partir de los objetos de adquisición configurados y de la configuración del programa de
energía, SIMATIC Energy Suite genera automáticamente todos los bloques necesarios, así
como sus interconexiones.
PRECAUCIÓN
Modificaciones manuales de bloques del programa de energía
Si después de generarse el programa de energía realiza modificaciones manuales en los
bloques y en su interconexión, será responsabilidad suya que no haya errores en el aparato
o en el programa de energía.
PRECAUCIÓN
Uso de bloques de Energy Suite en otros programas de PLC
Si utiliza bloques de Energy Suite de la librería global en otros programas de PLC, será
responsabilidad suya que dichos bloques no causen errores.
Este apartado ofrece una visión general de todos los bloques de Energy Suite disponibles. Una
vez instalado SIMATIC Energy Suite, los bloques pueden verse en STEP 7 (TIA Portal) dentro
de "Librerías globales":
● Bloques de función (Página 149)
● Bloques de datos (Página 197)
● Tipos de datos (Página 199), incluidas enumeraciones (Página 212)

Funcionamiento de los bloques de Energy Suite
A continuación se describe cómo funcionan básicamente los bloques de Energy Suite en el
programa de energía para datos de energía procedentes de la memoria imagen de proceso de
la CPU (variables PLC) o de bloques de datos (variables DB).

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

145

Bloques de Energy Suite – Adquisición
A.1 Sinopsis de los bloques de Energy Suite para la adquisición
El comodín "xxx" en la figura significa que hay diferentes tipos de este bloque; p. ej., para
"EnS_Drvxxx":
● EnS_DrvPulse
● EnS_DrvCounterLInt
Encontrará más tipos en la tabla "Bloques de función", después de la figura inferior.
La figura siguiente muestra el funcionamiento de los bloques de Energy Suite:
(Q6B2UJDQL]DWLRQ
)XQFLRQHVGHRUJDQL]DFLµQ
SHMLQKLELFLµQGHDYLVRV
,QKLELFLµQGHDYLVRV
XQDLQVWDQFLD
SRUFDGD2%GHDODUPD
F¯FOLFD

,PSXOVRGHVLQFURQL]DFLµQ
,PSXOVRGHVLQFURQL]DFLµQ
RELHQ
+RUDLQWHUQD
GHOD&38

6&38
9DORUHVGHHQHUJ¯D

(Q6B7LPH6\QF

(Q6B&DOF(QHUJ\'DWD

(Q6B(QHUJ\'DWD%DVLF

6LQFURQL]DFLµQKRUDULD

&£OFXORGHYDORUHV
SHULµGLFRVGHHQHUJ¯D\
SRWHQFLD

SHMPLQ 
GHXQREMHWRGHHQHUJ¯D

XQDLQVWDQFLD
SRUFDGDREMHWRGHHQHUJ¯D
SXQWRGHPHGLFLµQ

XQDLQVWDQFLD
SRUFDGDREMHWRGH
HQHUJ¯D

XQDLQVWDQFLD
SRUFDGDSHU¯RGRGH
DUFKLYDGR

(Q6B'UY[[[

9LVXDOL]DFLµQHQ
UXQWLPH+0,R
UXQWLPH6&$'$
(Q6B%XIIHU:ULWH
(VFULELUGDWRVHQHO
'%GHDOPDFHQD
PLHQWRLQWHUPHGLR

PXOWLLQVWDQFLDHQHO'%
GHLQVWDQFLDGH
(Q6B(QHUJ\'DWD%DVLF

'ULYHUVSDUDDGTXLVLFLµQGH
ORVGDWRVGHHQHUJ¯D
SURFHGHQWHVGHOD&386
XQEORTXHGHGULYHUV
SRUFDGDSXQWRGH
PHGLFLµQ

+DUGZDUHGHPHGLFLµQ
9DORUHVGHHQHUJ¯D

:LQ&&
3URIHVVLRQDO
(Q6B%XIIHU:RUN'%

(Q6/B'UY[[[
'ULYHUVSDUDDGTXLVLFLµQGH
GDWRVGHHQHUJ¯D
SURFHGHQWHVGHKDUGZDUH
GHPHGLFLµQ

%ORTXHGHGDWRVSDUD
DGPLQLVWUDFLµQGHO'%
GHDOPDFHQDPLHQWR
LQWHUPHGLR

XQEORTXHGHGULYHUV
SRUFDGDSXQWRGH
PHGLFLµQ
&RPXQLFDFLµQF¯FOLFD
RDF¯FOLFD

(Q6B$UFKLYH[[[
$UFKLYDGR
GHGDWRVGHHQHUJ¯D

XQDLQVWDQFLD
SRUFDGDREMHWRGH
HQHUJ¯D

)LFKHURGH
YDULDEOHV

6&38
'DWD/RJ

(Q6B%XIIHU'%
%ORTXHGHGDWRVSDUD
DOPDFHQDPLHQWR
LQWHUPHGLRGHYDORUHVGH
HQHUJ¯DSHULµGLFRV

(Q6B%XIIHU5HDG
/HHUGDWRVGHO'%GH
DOPDFHQDPLHQWR
LQWHUPHGLR
PXOWLLQVWDQFLDHQHO'%
GHLQVWDQFLDGH
(Q6B$UFKLYH'DWD/RJ

*

EnS_BufferRead no se llama durante el archivado en WinCC Professional
Flujo de datos de energía
Datos de parametrización
Bloques utilizados internamente
Bloques para una tabla de adquisición de energía

146

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.1 Sinopsis de los bloques de Energy Suite para la adquisición

Bloques de función
Nombre

Función

EnS_ArchiveDataLog (Página 149)

Datos de energía archivados en ficheros de variables (archivo CSV en la SIMATIC
Memory Card de la CPU).

EnS_ArchiveHMI (Página 158)

Datos de energía archivados en ficheros de variables de WinCC Professional.

EnS_BufferRead (Página 165)

Lee los datos del DB de respaldo (EnS_BufferDB (Página 197)).

EnS_BufferWrite (Página 167)

Escribe datos en el DB de respaldo (EnS_BufferDB (Página 197)).

Se utiliza internamente.
Se utiliza internamente.
EnS_CalcEnergyData (Página 170) Cálculo periódico de la energía consumida y del consumo medio de energía
EnS_DrvAnalogValue (Página 176) Bloque de drivers para una entrada analógica (p. ej., valor de potencia, valor de caudal).
EnS_DrvCounterLInt (Página 178)

Bloque de drivers para valores de contador de tipo LINT

EnS_DrvCounterLReal (Pági‐
na 180)

Bloque de drivers para valores de contador de tipo LREAL

EnS_DrvPulse (Página 182)

Bloque de drivers para una entrada de impulsos.

EnS_EnergyDataAdv (Página 184)

Datos de energía avanzados de un aparato (por ejemplo, sobre corriente de fase y
valores de tensión).

EnS_EnergyDataAdvMinMax (Pá‐
gina 185)

Valores mínimos y máximos de los datos de energía avanzados de un dispositivo.

EnS_EnergyDataBasic (Pági‐
na 187)

Datos de energía generales de un aparato (por ejemplo, potencia, valor de contador de
energía).

EnS_Organization (Página 191)

Contiene datos y parámetros generales sobre la organización del programa central.

EnS_TimeSync (Página 192)

Sincroniza los tiempos para el cálculo de los datos de energía.

Bloques de datos
Nombre

Función

EnS_BufferDB (Página 197) *

Bloque de datos para el respaldo de los datos de energía registrados

EnS_BufferWorkDB (Página 198) *

Bloque de datos para vigilancia e información de estado del respaldo

* El nombre se puede cambiar.

Tipos de datos definidos por el usuario
Nombre

Función

Lo utiliza

EnS_typeAnalogValue (Página 199) Tipo de datos para valores de proceso
analógicos

EnS_CalcEnergyData

EnS_typeBufferReadCtrl (Pági‐
na 199)

Tipo de datos para información de con‐
trol del respaldo para leer datos

EnS_BufferRead

EnS_typeBufferReadStat (Pági‐
na 200)

Tipo de datos para información de datos
y estado del respaldo para leer datos

EnS_typeBufferWork

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

EnS_DrvAnalogValue
EnS_typeBufferWork

147

Bloques de Energy Suite – Adquisición
A.1 Sinopsis de los bloques de Energy Suite para la adquisición
Nombre

Función

Lo utiliza

EnS_typeBufferWork (Página 200)

Tipo de datos para vigilancia e informa‐
ción de estado del respaldo

EnS_BufferRead
EnS_BufferWrite
EnS_ArchiveDataLog
EnS_EnergyDataBasic
EnS_BufferWorkDB
EnS_ArchiveHMI

EnS_typeBufferWriteCtrl (Pági‐
na 202)

Tipo de datos para información de con‐
trol del respaldo para escribir datos

EnS_BufferWrite

EnS_typeBufferWriteStat (Pági‐
na 202)

Tipo de datos para información de esta‐
do del respaldo para escribir datos

EnS_typeBufferWork

EnS_typeEnergyAdv (Página 203)

Tipo de datos para datos de energía
avanzados

EnS_EnergyDataAdv

EnS_typeBufferWork

EnS_typeEnergyBasic (Página 204) Tipo de datos para datos de energía bá‐ EnS_CalcEnergyData
sicos
EnS_EnergyDataBasic
EnS_typeEnergyCounter (Pági‐
na 205)

Tipo de datos para valor de contador de
energía

EnS_CalcEnergyData
EnS_DrvCounterLInt
EnS_DrvCounterLReal
EnS_DrvPulse

EnS_typeEnergyMeta (Página 205) Tipo de datos para metadatos del punto
de medición (información sobre la confi‐
guración del objeto de adquisición)

EnS_CalcEnergyData
EnS_BufferWrite
EnS_DrvAnalogValue
EnS_DrvCounterLInt
EnS_DrvCounterLReal
EnS_DrvPulse
EnS_EnergyDataAdv
EnS_EnergyDataBasic

EnS_typeHMIWriteCtrl (Pági‐
na 208)

Tipo de datos para información de con‐
trol del respaldo para escribir datos de
energía en el fichero de variables de
WinCC Professional

EnS_ArchiveHMI

EnS_typeHMIWriteStat (Pági‐
na 209)

Tipo de datos para información de esta‐
do del respaldo para escribir datos de
energía en el fichero de variables de
WinCC Professional

EnS_ArchiveHMI

EnS_typeOrgData (Página 210)

Tipos de datos para los datos de organi‐ EnS_Organization
zación
EnS_TimeSync
EnS_DrvAnalogValue
EnS_DrvCounterLInt
EnS_DrvCounterLReal
EnS_DrvPulse
EnS_ArchiveDataLog
EnS_EnergyDataAdv
EnS_EnergyDataBasic
EnS_ArchiveHMI

148

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
Nombre

Función

Lo utiliza

EnS_typeSync (Página 210)

Tipo de datos para sincronización hora‐
ria

EnS_TimeSync

EnS_typeValue (Página 211)

Tipo de datos para valores de salida

EnS_CalcEnergyData
EnS_BufferDB
EnS_BufferRead
EnS_ArchiveDataLog

A.2

Bloques de función (FB)

A.2.1

EnS_ArchiveDataLog: Escribir valores de energía en Data Logs

A.2.1.1

Descripción EnS_ArchiveDataLog

Descripción
El bloque de función "EnS_ArchiveDataLog" escribe datos de energía periódicos procedentes
del bloque de datos para almacenamiento intermedio "EnS_BufferDB (Página 197)"
(parámetro "bufferDB") en "Data Logs" en la SIMATIC Memory Card de la CPU. La escritura
solamente se lleva cabo si los parámetros "archiveEnergy", "archivePower",
"archiveEnergyCounter" en los metadatos (Página 205) correspondientes están ajustados a
"TRUE". Los datos se guardan como archivo CSV en la SIMATIC Memory Card
Para evitar conflictos de acceso a la SIMATIC Memory Card de la CPU, utilice solamente una
instancia del bloque de función para cada CPU.
La tabla siguiente muestra la estructura de un archivo CSV.
Columna

Nombre

Descripción

1

SeqNo

Número secuencial (predeterminado por el sistema)

2

Tagname

Nombre de variable

3

Value

Valor archivado

4

TimeStamp

Sello de tiempo del valor archivado

5

Status

Estado del valor archivado

El nombre de los datos archivados se compone de <DataLogName>+<YYYYMMDD_hhmm
(fecha y hora de creación en formato UTC)>
Ejemplo: DataLog_20141117_2315
El tamaño del Data Log está limitado por el sistema a 1 GB. El número de registros debe
ajustarse según corresponda con el parámetro "noRecords" (ver ejemplo de cálculo a
continuación).
Ejemplo: El espacio de memoria necesario para un Data Log en la Memory Card se calcula
mediante la siguiente fórmula: 45 bytes + (número de registros * 190 bytes).

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

149

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
El número de Data Logs viene definido por el parámetro "noDataLogs". El número de Data
Logs disponibles está limitado por el tamaño de la SIMATIC Memory Card (número válido:
1-100).

Escritura de Data Logs
Los datos de energía se archivan cuando el DB de almacenamiento intermedio contiene datos
nuevos (bufferWork.noItems > 0). A continuación, el bloque de función lee los datos nuevos
con el bloque de función "EnS_BufferRead (Página 165)" y los escribe en el Data Log.
Nota
La velocidad de escritura puede variar dependiendo de la CPU utilizada, la Memory Card
utilizada y la posición de los datos en la Memory Card. El número de ciclos necesarios para
escribir un registro de datos de energía es variable. No se puede escribir más de 1 registro de
datos por ciclo.

Número de Data Logs
Cuando un Data Log está lleno, se activa la salida "full" para un ciclo y se emite un aviso.
Cuando se alcanza el número máximo de Data Logs ("noDataLogs", número válido: 2-10) y
además el último Data Log está lleno, se borra el Data Log más antiguo y se crea un nuevo
Data Log. Si se borra un Data Log o se crea uno nuevo, se genera un aviso. El aviso puede
verse, p. ej., en un sistema SCADA.

Arranque
El bloque no tiene comportamiento en arranque.

Comportamiento en caso de error
Si ocurre un error, se activa el parámetro de salida "error". El parámetro "status (Página 153)"
contiene otra información de error. La información de error del bloque de función subordinado
"EnS_BufferRead (Página 165)" se añade al parámetro "status". La información de error se
muestra en el parámetro "status" hasta que el error se ha subsanado. Hasta ese momento no
se muestra la información del siguiente error presente.

A.2.1.2

Parámetro EnS_ArchiveDataLog
La tabla siguiente muestra los parámetros del bloque de función "EnS_ArchiveDataLog":

Parámetro

Declaración

Tipo de datos

Ajuste predeter‐
minado

Descripción

R*

dataLogName

Input

STRING[32]

-

Nombre del Data Log

-

noRecords

Input

UDINT

10000

Número de registros en el Data Log

-

noDataLogs

Input

UINT

5

Número de Data Logs

-

150

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
Parámetro

Declaración

Tipo de datos

Ajuste predeter‐
minado

Descripción

bufferDB

Input

DB_ANY

-

Puntero hacia bloque de datos de alma‐
cenamiento intermedio

R*
-

sD

Input

VARIANT

-

Valor asociado para avisos de alarma

-

messageSup‐
press

Input

BOOL

FALSE

TRUE = inhibición de avisos activada

-

full

Output

BOOL

FALSE

TRUE = Data Log lleno

-

busy

Output

BOOL

FALSE

TRUE = procesamiento activo

-

done

Output

BOOL

FALSE

TRUE = datos procesados correcta‐
mente

-

error

Output

BOOL

FALSE

TRUE = error

-

status

Output

WORD

-

Información de estado de error (Pági‐
na 153)

-

statusCreateFct

Output

WORD

-

Información de estado de error de la
instrucción DataLogCreate

-

statusOpenFct

Output

WORD

-

Información de estado de error de la
instrucción DataLogOpen

-

statusWriteFct

Output

WORD

-

Información de estado de error de la
instrucción DataLogWrite

-

statusDeleteFct

Output

WORD

-

Información de estado de error de la
instrucción DataLogDelete

-

statusCloseFct

Output

WORD

-

Información de estado de error de la
instrucción DataLogClose

-

dataLogNa‐
meAct

Output

STRING[48]

-

Nombre del Data Log activo

-

dataLogName‐
Last

Output

STRING[48]

-

Nombre del último Data Log

-

dataLogName‐
Del

Output

STRING[48]

-

Nombre del Data Log borrado

-

errorAlarm1

Output

BOOL

FALSE

TRUE = error Program_Alarm1

-

statusAlarm1

Output

WORD

-

Información de estado de error Pro‐
gram_Alarm1

-

alarmState1

Output

BYTE

-

Estado de alarma Program_Alarm1

-

errorAlarm2

Output

BOOL

FALSE

TRUE = error Program_Alarm2

-

statusAlarm2

Output

WORD

-

Información de estado de error Pro‐
gram_Alarm2

-

alarmState2

Output

BYTE

-

Estado de alarma Program_Alarm2

-

errorAlarm3

Output

BOOL

FALSE

TRUE = error Program_Alarm3

-

statusAlarm3

Output

WORD

-

Información de estado de error Pro‐
gram_Alarm3

-

alarmState3

Output

BYTE

-

Estado de alarma Program_Alarm3

-

errorAlarm4

Output

BOOL

FALSE

TRUE = error Program_Alarm4

-

statusAlarm4

Output

WORD

-

Información de estado de error Pro‐
gram_Alarm4

-

alarmState4

Output

BYTE

-

Estado de alarma Program_Alarm4

-

errorAlarm5

Output

BOOL

FALSE

TRUE = error Program_Alarm5

-

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

151

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
Parámetro

Declaración

Tipo de datos

Ajuste predeter‐
minado

Descripción

statusAlarm5

Output

WORD

-

Información de estado de error Pro‐
gram_Alarm5

R*
-

alarmState5

Output

BYTE

-

Estado de alarma Program_Alarm5

-

errorAlarm6

Output

BOOL

FALSE

TRUE = error Program_Alarm6

-

statusAlarm6

Output

WORD

-

Información de estado de error Pro‐
gram_Alarm6

-

alarmState6

Output

BYTE

-

Estado de alarma Program_Alarm6

-

id

InOut

DWORD

0

ID del Data Log actual

X

orgData

InOut

EnS_typeOrgData
(Página 210)

-

Datos de organización

-

bufferWork

InOut

EnS_typeBuffer‐
Work (Página 200)

-

Información de control y estado del bú‐
fer

-

* Los parámetros marcados contienen el atributo de sistema "Retain" y se guardan en la zona
de memoria permanente de la CPU.

152

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)

A.2.1.3

Parámetro Status
La tabla siguiente muestra los códigos de error que se emiten en el parámetro de salida
"status" del bloque de función "EnS_ArchiveDataLog" cuando se producen errores:

Código de
error
(W#16#...)

Descripción

Tipo de error Se copia en el
parámetro

Solución

8511

Error al leer de la
memoria intermedia

Error de ar‐
chivado

La lectura se repite hasta que se lleva a cabo co‐
rrectamente.

buffer‐
Work.readS‐
tat.status‐
ReadFct

Causa del error:
Está conectado un bloque de datos incorrecto o falta
el bloque de datos.
Procedimiento:
Corrija el programa.

8601

Error al crear el fi‐
chero de variables

Error de
creación

statusCreateFct

Los errores del SFC "DataLogCreate" se copian en
el parámetro "statusCreateFct".
La creación se repite hasta que se lleva a cabo co‐
rrectamente.
Causas del error:
● El nombre del fichero de variables no es válido.
● No se dispone de espacio de memoria.
Procedimiento:
● Asigne un nombre válido al Data Log.
● Encontrará más información sobre nombres
válidos en el apartado "Archivado y respaldo
(CPU S7) (Página 57)".
● Aumente la capacidad de almacenamiento de la
SIMATIC Memory Card utilizada.
● Desbloquee la lengüeta en la SIMATIC Memory
Card utilizada.

8602

Error al abrir el fiche‐ Error de
ro de variables
apertura

statusOpenFct

La apertura del fichero de variables se repite hasta
que se lleva a cabo correctamente.
Causas del error:
● El Data Log no está disponible.
● El Data Log ya está abierto.
Procedimiento:
● Cierre el fichero de variables antes de abrirlo.
● Asegúrese de que ya se ha creado el Data Log.
● Desbloquee la lengüeta en la SIMATIC Memory
Card utilizada.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

153

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
Código de
error
(W#16#...)

Descripción

Tipo de error Se copia en el
parámetro

Solución

8603

Error al escribir en el
fichero de variables

Error de es‐
critura

La escritura en el fichero de variables se repite hasta
que se lleva a cabo correctamente.

statusWriteFct

Causas del error:
● El Data Log no está disponible.
● No se dispone de espacio de memoria.
Procedimiento:
● Asegúrese de que ya se ha creado el Data Log.
● Desbloquee la lengüeta en la SIMATIC Memory
Card utilizada.
8604

Error al borrar el fi‐
chero de variables

Error de bo‐
rrado

statusDeleteFct

El archivo Data Log no se borra.
Causas del error:
● El Data Log no está disponible.
● Data Log está protegido contra escritura
● No se dispone de espacio de memoria.
Procedimiento:
● Cierre el archivo con el fichero de variables.
● Aumente la capacidad de almacenamiento de la
SIMATIC Memory Card utilizada.
● Desbloquee la lengüeta en la SIMATIC Memory
Card utilizada.

8605

Error al cerrar el fi‐
chero de variables

Error de cie‐
rre

statusCloseFct

El cierre del fichero de variables se repite hasta que
se lleva a cabo correctamente.
Causas del error:
● El Data Log no está disponible.
● El Data Log ya está cerrado.
Procedimiento:
● Abra el Data Log antes de cerrarlo.
● Asegúrese de que ya se ha creado el Data Log.
● Desbloquee la lengüeta en la SIMATIC Memory
Card utilizada.

154

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
Código de
error
(W#16#...)

Descripción

Tipo de error Se copia en el
parámetro

Solución

8611

El número máximo
de registros es de‐
masiado alto.

Error de pa‐
rametriza‐
ción

El tamaño del fichero de variables está limitado por
el sistema a 1 GB. El número de ficheros de varia‐
bles disponibles está limitado por la capacidad de la
SIMATIC Memory Card .

noRecords

Causas del error:
● Se ha superado el número máximo de registros.
Procedimiento:
● Aumente la capacidad de almacenamiento de la
SIMATIC Memory Card utilizada (p. ej., borrando
los ficheros de variables antiguos).
8612

Número de ficheros
de variables no váli‐
do (<2 o >10)

Error de pa‐
rametriza‐
ción

noDataLogs

El número de ficheros de variables se corresponde
con el ajuste "Número de ficheros de variables" en el
área "Archivado" para el tipo de archivado "PLC (SI‐
MATIC Memory Card)".
Causas del error:
● El número de ficheros de variables está fuera del
rango permitido.
Procedimiento:
● Introduzca un número válido en "CPU > Objetos
de adquisición > Configuración del programa de
energía > Archivado y respaldo> Número de
ficheros de variables".

Los textos de aviso adicionales (columna "Descripción") se escriben en la lista de textos
"EnS_Alarms" del bloque de aviso "Program_Alarm2" y se emiten junto con los códigos de
error en el error.

Consulte también
Descripción EnS_BufferRead (Página 165)

A.2.1.4

Avisos EnS_ArchiveDataLog
Los avisos se generan mediante la instrucción "Program_Alarm". Para cada aviso se crea una
multiinstancia del tipo de datos "Program_Alarm" en las variables "Static" del bloque de función
"EnS_ArchiveDataLog". Encontrará más información sobre "Program_Alarm" en la ayuda en
pantalla del sistema de información de TIA Portal, en "Instrucciones avanzadas > Avisos".
La tabla siguiente muestra los avisos generados por el bloque de función
"EnS_ArchiveDataLog".
Bloque de aviso

Texto de aviso

Categoría

Program_Alarm1

Error de parametrización

Con acuse

Program_Alarm2

Error de archivado: <Lista de textos: EnS_Alarms:#status>

Con acuse

Program_Alarm3

Log energía lleno: <Tag:#dataLogNameLast >

Con acuse

Program_Alarm4

Log energía creado: <Tag:#dataLogNameAct >

Con acuse

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

155

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
Bloque de aviso

Texto de aviso

Categoría

Program_Alarm5

Log energía borrado: <Tag:#datalogNameDel >

Con acuse

Program_Alarm6

Pérdida de datos de <Tag:#bufferWork.noDeletedItems" re‐
gistros*

Con acuse

* El parámetro "bufferWork.noDeletedItems" contiene el número de registros que se
sobrescriben al desbordarse el búfer.
Los textos de aviso adicionales para "Program_Alarm2" se describen en la lista de textos
"EnS_Alarms". Los códigos de error (status) se emiten en el texto de aviso y contienen textos
de aviso adicionales del código de error correspondiente.
La tabla siguiente muestra los códigos de error con textos de aviso adicionales del bloque de
aviso "Program_Alarm2":
Bloque de aviso

Código de
error
(W#16#...)

Texto de aviso

Parámetro Bloque de función

Program_Alarm2

8511

Error al leer del búfer

status

8601

Error al crear el Data Log

8602

Error al abrir el Data Log

8603

Error al escribir el Data Log

8604

Error al borrar el Data Log

8605

Error al cerrar el Data Log

EnS_BufferRead
(Página 165)
EnS_ArchiveData‐
Log

Los valores asociados para los avisos están asignados de la siguiente manera:

156

Bloque de aviso

Valor asocia‐
do

Parámetro

Descripción

Program_Alarm1

1

sD

Libre

2

-

No utilizado

3

-

No utilizado

4

-

No utilizado

5

-

No utilizado

6

-

No utilizado

7

-

No utilizado

8

-

No utilizado

9

-

No utilizado

10

-

No utilizado

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
Bloque de aviso

Valor asocia‐
do

Parámetro

Descripción

Program_Alarm2

1

status

Información de estado de error

2

sD

Libre

3

-

No utilizado

4

-

No utilizado

5

-

No utilizado

6

-

No utilizado

7

-

No utilizado

8

-

No utilizado

9

-

No utilizado

10

-

No utilizado

1

dataLogNameLast

Nombre del Data Log lleno

2

sD

Libre

3

-

No utilizado

4

-

No utilizado

5

-

No utilizado

6

-

No utilizado

7

-

No utilizado

8

-

No utilizado

9

-

No utilizado

10

-

No utilizado

Program_Alarm3

Program_Alarm4

Program_Alarm5

1

dataLogNameAct

Nombre del Data Log creado

2

sD

Libre

3

-

No utilizado

4

-

No utilizado

5

-

No utilizado

6

-

No utilizado

7

-

No utilizado

8

-

No utilizado

9

-

No utilizado

10

-

No utilizado

1

dataLogNameDel

Nombre del Data Log borrado

2

sD

Libre

3

-

No utilizado

4

-

No utilizado

5

-

No utilizado

6

-

No utilizado

7

-

No utilizado

8

-

No utilizado

9

-

No utilizado

10

-

No utilizado

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

157

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
Bloque de aviso

Valor asocia‐
do

Parámetro

Descripción

Program_Alarm6

1

bufferWork.noDeletedI‐
tems

Número de registros borrados al des‐
bordarse el búfer

2

sD

Libre

3

-

No utilizado

4

-

No utilizado

5

-

No utilizado

6

-

No utilizado

7

-

No utilizado

8

-

No utilizado

9

-

No utilizado

10

-

No utilizado

Los avisos se pueden modificar.
El parámetro de entrada "SD" se utiliza como valor asociado del aviso. Es posible interconectar
el parámetro con otra información que aparezca en el aviso.
Los avisos se pueden inhibir con "messageSuppress" o bien, en un nivel superior, con
"orgData.messageSuppress" del bloque de función "EnS_Organization (Página 191)".

A.2.2

EnS_ArchiveHMI: Escribir valores de energía en fichero de variables

A.2.2.1

Descripción EnS_ArchiveHMI

Descripción
El bloque de función (FB) "EnS_ArchiveHMI" escribe datos de energía periódicos procedentes
del bloque de datos (DB) para almacenamiento intermedio "EnS_BufferDB (Página 197)" en el
fichero de variables de WinCC Professional. Para ello, el FB "EnS_ArchiveHMI" consulta
cíclicamente al DB de almacenamiento intermedio "EnS_BufferDB" si contiene registros con
datos de energía. En caso de haber registros, el bloque de función (FB) "EnS_ArchiveHMI"
envía una petición al componente WinCC Professional de Energy Suite para leer los datos de
energía procedentes del DB de almacenamiento intermedio y escribir dichos datos en el
fichero de variables.

Escritura de los ficheros de variables
Los datos de energía únicamente se archivan en ficheros de variables si se cumplen las
condiciones siguientes:
● El DB de almacenamiento intermedio contiene nuevos registros (bufferWork.noItems > 0).
● El DB de almacenamiento intermedio está disponible (bufferWork.busy = FALSE).
● La conexión HMI con WinCC Professional está establecida.

158

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
Si se cumplen las condiciones, se activa la lectura de datos procedentes del DB de
almacenamiento intermedio. El FB "EnS_ArchiveHMI" envía una petición de transferencia de
datos a WinCC Professional. La petición en el parámetro "request" del tipo de datos
"EnS_typeHMIWriteCtrl (Página 208)" contiene puntero de lectura, puntero de escritura y el
número de registros que se archivan.
A continuación, el componente WinCC Professional de Energy Suite lee los datos del DB de
almacenamiento intermedio y los escribe en el fichero de variables. El parámetro "statusWrite"
del tipo de datos "EnS_typeHMIWriteStat (Página 209)" contiene el número de registros
escritos y el puntero de lectura actualizado. Durante el proceso de escritura, el componente
WinCC Professional de Energy Suite actualiza el número de registros escritos y el puntero de
escritura después de cada registro escrito.
Nota
Instancias individuales de "EnS_BufferWrite (Página 167)", "EnS_BufferRead (Página 165)" o
script WinCC pueden acceder al bloque de datos de almacenamiento intermedio. Solo es
posible el acceso simultáneo de escritura al bloque de datos.
La información de control y estado del búfer del DB global "EnS_BufferWorkDB (Página 198)"
se ofrece en el parámetro "bufferWork".

Vigilancia de tiempo
La conexión entre la CPU y WinCC Professional se vigila mediante el contador watchdog. El
FB "EnS_ArchiveHMI" activa el contador watchdog en el parámetro "request.watchdog". El
contenido del parámetro "request.watchdog" se copia en el parámetro "statusWrite.watchdog".
● Si el componente Energy Suite en WinCC Professional confirma la vigilancia de tiempo, el
FB "EnS_ArchiveHMI" incrementa el contador watchdog.
● Si no se produce confirmación dentro del tiempo de vigilancia, se emite el código de error
"16#8606" en el parámetro "status". Además, se resetea la petición activa y no se envía
ninguna otra petición hasta que el error del watchdog se ha subsanado.
Una vez subsanado el error, se genera un aviso con información sobre la pérdida de datos.

Arranque
El bloque no tiene comportamiento en arranque.

Comportamiento en caso de error
Si ocurre un error, se activa el parámetro de salida "error". El parámetro "status (Página 162)"
contiene otra información de error.
Si el componente WinCC Professional de Energy Suite no responde a la petición del FB
"EnS_ArchiveHMI" durante el tiempo de vigilancia y no se ha producido ningún error de
watchdog, se emite el código de error "16#8605" en el parámetro "status (Página 162)". La
petición se envía de nuevo después de que el componente Energy Suite de WinCC
Professional la haya procesado correctamente, una vez transcurrido el tiempo de espera.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

159

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)

A.2.2.2

Componente WinCC Professional

Descripción
El componente WinCC Professional de Energy Suite escribe datos de energía en el fichero de
variables de WinCC Professional.

Avisos
Si se producen errores, el componente WinCC Professional genera avisos de sistema en
WinCC Professional.
La tabla siguiente muestra los avisos:
Texto de aviso

Categoría

Error de archivado <Lista de textos: EnS_Alarms:#status>

Sistema

El archivado continúa.

Sistema

Posible pérdida de datos

Sistema

Comportamiento en caso de error
Si ocurre un error, se emite el código de error con el texto de aviso adicional en el aviso de
sistema de WinCC Professional. El texto de aviso adicional se muestra en la tabla siguiente,
en la columna "Descripción".
Además, se emiten los códigos de error con textos de aviso adicionales en el parámetro
"statusWrite.status"/"statusHMI" del DB de instancia del bloque de función "EnS_ArchiveHMI"
en la CPU.
La tabla siguiente muestra los códigos de error del componente WinCC Professional:

160

Código de error
(W#16#...)

Descripción

Tipo de error

Se copia en el paráme‐
tro

8621

Conexión interrumpida

Error en la supervisión
de tiempo

statusWrite.status

8622

Denegado el acceso al fichero
de variables

Error de escritura

statusWrite.status

8623

Cancelada la escritura de los
datos de energía en el fichero
de variables

Error de escritura

statusWrite.status

8624

Posible pérdida de datos

Error de datos

statusWrite.status

8625

Cancelado el acceso al bloque Error de datos
de datos de almacenamiento in‐
termedio

statusWrite.status

8631

Variable no configurada

statusWrite.status

Error de parametriza‐
ción

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)

A.2.2.3

Parámetro EnS_ArchiveHMI
La tabla siguiente muestra los parámetros del bloque de función "EnS_ArchiveHMI":

Parámetro

Declaración

Tipo de datos

Ajuste predeter‐
minado

Descripción

HMI *

statusWrite

Input

EnS_typeHMIWri‐
teStat (Página 209)

-

Información de estado para escritura de
los valores de energía en el fichero de
variables

-

monitoringTime

Input

TIME

T#5s

Tiempo de vigilancia para escritura de
los valores de energía en el fichero de
variables

-

monitoringTime‐
Watchdog

Input

TIME

T#10s

Tiempo de vigilancia para watchdog

-

waitTime

Input

TIME

T#1m

Tiempo de espera para la repetición de
la petición de escritura de los datos de
energía en el fichero de variables

-

bufferDB

Input

DB_ANY

-

Puntero hacia bloque de datos de alma‐
cenamiento intermedio

-

sD

Input

VARIANT

-

Valor asociado para avisos de alarma

-

messageSup‐
press

Input

BOOL

FALSE

TRUE = inhibición de avisos activada

-

request

Output

EnS_typeHMIWri‐
teCtrl (Página 208)

-

Petición de escritura de los datos de
energía en el fichero de variables

X

busy

Output

BOOL

FALSE

TRUE = la escritura de los datos de
energía en el fichero de variables está
activada

-

done

Output

BOOL

FALSE

TRUE = los datos de energía se han
escrito correctamente en el fichero de
variables

-

error

Output

BOOL

FALSE

TRUE = error

-

status

Output

WORD

-

Información de estado de error (Pági‐
na 162)

-

statusHMI

Output

WORD

-

Información de estado de error

-

errorAlarm1

Output

BOOL

FALSE

TRUE = error "Program_Alarm1"

-

statusAlarm1

Output

WORD

-

Información de estado de error "Pro‐
gram_Alarm1"

-

alarmState1

Output

BYTE

-

Estado de alarma de Program_Alarm1"

-

errorAlarm2

Output

BOOL

FALSE

TRUE = error "Program_Alarm2"

-

statusAlarm2

Output

WORD

-

Información de estado de error "Pro‐
gram_Alarm2"

-

alarmState2

Output

BYTE

-

Estado de alarma de "Program_Alarm2"

-

errorAlarm3

Output

BOOL

FALSE

TRUE = error "Program_Alarm3"

-

statusAlarm3

Output

WORD

-

Información de estado de error "Pro‐
gram_Alarm3"

-

alarmState3

Output

BYTE

-

Estado de alarma de "Program_Alarm3"

-

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

161

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
Parámetro

Declaración

Tipo de datos

Ajuste predeter‐
minado

Descripción

orgData

Output

EnS_typeOrgData
(Página 210)

-

Datos de organización

-

bufferWork

Output

EnS_typeBuffer‐
Work (Página 200)

-

Información de control y estado del bú‐
fer

-

A.2.2.4

HMI *

Parámetro Status
La tabla siguiente muestra los códigos de error que se emiten en el parámetro de salida
"status" cuando se producen errores:

Código de
error
(W#16#...)

Descripción

Tipo de error Se copia en el
parámetro

8603

Error al escribir los
datos de energía en
el fichero de varia‐
bles

Error de es‐
critura

statusHMI

Solución

Error interno
Causas del error:
● La conexión HMI con la CPU S7 está
interrumpida
● El Data Log no existe
● El nombre del Data Log no es válido
Procedimiento:
● El error interno no requiere intervención.

8606

Excedido el tiempo
para escritura de los
datos de energía en
el fichero de varia‐
bles

Error de es‐
critura

statusWri‐
te.busy /
statusWrite.do‐
ne /

Se ha agotado el tiempo disponible para que los da‐
tos de energía se transfieran de la CPU S7 al fichero
de variables.
Causas del error:

statusWrite-error ● El componente SCADA de Energy Suite no
reacciona a la petición de escritura de los datos
de energía dentro del tiempo de vigilancia
● La conexión HMI con la CPU S7 está
interrumpida
● Pérdida de datos

8607

Error de watchdog

Error de es‐
critura

statusWrite.error Error interno
Causas del error:
La confirmación por parte del componente SCADA
de Energy Suite no ha tenido lugar dentro del tiempo
de vigilancia.
Procedimiento:
● El error interno no requiere intervención.

8611

Tiempo de vigilancia Error de pa‐
< 0 o > 1 hora
rametriza‐
ción

monitoringTime

Error interno
Causas del error:
● Tiempo de vigilancia no válido
● El error Watchdog no ha ocurrido
Procedimiento:
● El error interno no requiere intervención.

162

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
Código de
error
(W#16#...)

Descripción

Tipo de error Se copia en el
parámetro

8612

Tiempo de vigilancia Error de pa‐
para watchdog < 0 o rametriza‐
> 1 hora
ción

monitoringTime‐
Watchdog

Solución

Error interno
Causas del error:
● El tiempo de vigilancia para Watchdog no es
válido
Procedimiento:
● El error interno no requiere intervención.

8613

Tiempo de espera <
0 o > 1 hora

Error de pa‐
rametriza‐
ción

waitTime

Error interno
Causas del error:
● El tiempo de espera para la repetición de la
petición de escritura de los datos de energía en
el fichero de variables no es válido.
Procedimiento:
● El error interno no requiere intervención.

Los textos de aviso adicionales (columna "Descripción") se describen en la lista de textos
"EnS_Alarms" del bloque de aviso "Program_Alarm2" y se emiten con los códigos de error en
el aviso.

A.2.2.5

Avisos EnS_ArchiveHMI
Los avisos se generan mediante la instrucción "Program_Alarm". Para cada aviso se crea una
multiinstancia del tipo de datos "Program_Alarm" en las variables "Static" del bloque de función
"EnS_ArchiveHMI". Encontrará más información sobre "Program_Alarm" en la ayuda en
pantalla del sistema de información de TIA Portal, en "Instrucciones avanzadas > Avisos".
La tabla siguiente muestra los avisos del bloque de función "EnS_ArchiveHMI":
Bloque de aviso

Texto de aviso

Categoría

Program_Alarm1

Error de parametrización

Con acuse

Program_Alarm2

Error de archivado <Lista de textos: EnS_Alarms:#status>

Con acuse

Program_Alarm3

Pérdida de datos de <Tag:#bufferWork.noDeletedItems" re‐
gistros *

Con acuse

* El parámetro "bufferWork.noDeletedItems" contiene el número de registros que se
sobrescriben al desbordarse el búfer. Cada vez que el búfer se desborda, el bloque de datos
de almacenamiento intermedio se vacía (bufferWork.noItems = 0).
Los textos de aviso adicionales del bloque de aviso "Program_Alarm2" se describen en la lista
de textos "EnS_Alarms". Los códigos de error (Status) se emiten en el texto de aviso y
contienen textos de aviso adicionales del código de error correspondiente.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

163

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
La tabla siguiente muestra los códigos de error con textos de aviso adicionales del bloque de
aviso "Program_Alarm2":
Bloque de aviso

Código de
error
(W#16#...)*

Texto de aviso

Parámetro Bloque de función

Program_Alarm2

8606

Excedido el tiempo para escritu‐ status
ra de los datos de energía en el
fichero de variables

EnS_ArchiveHMI

8607

Se ha perdido la conexión con el
fichero de variables

EnS_ArchiveHMI

* Los códigos de error pueden representarse como valor entero o hexadecimal en el editor de
programas. Para más información sobre el cambio del formato de visualización, consulte la
ayuda en pantalla del sistema de información de TIA Portal, en el apartado "Cambiar estados
de visualización en el estado del programa".
La tabla siguiente muestra los bloques de aviso con sus valores asociados:
Bloque de aviso

Valor asocia‐
do

Parámetro

Descripción

Program_Alarm1

1

sD

Libre

2

-

No utilizado

3

-

No utilizado

4

-

No utilizado

5

-

No utilizado

6

-

No utilizado

7

-

No utilizado

8

-

No utilizado

9

-

No utilizado

10

-

No utilizado

1

status

Información de estado de error

2

sD

Libre

3

-

No utilizado

4

-

No utilizado

5

-

No utilizado

6

-

No utilizado

7

-

No utilizado

8

-

No utilizado

9

-

No utilizado

10

-

No utilizado

1

bufferWork.noDeletedI‐
tems

Número de registros sobrescritos al
desbordarse el búfer

2

sD

No utilizado

3

-

No utilizado

4

-

No utilizado

5

-

No utilizado

6

-

No utilizado

Program_Alarm2

Program_Alarm3

164

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
Bloque de aviso

Valor asocia‐
do

Parámetro

Descripción

7

-

No utilizado

8

-

No utilizado

9

-

No utilizado

10

-

No utilizado

Los avisos se pueden modificar.
El parámetro de entrada "sD" se utiliza como valor asociado del aviso. Es posible interconectar
el parámetro con otra información que aparezca en el aviso.
Los avisos se pueden inhibir con "messageSuppress" o bien, en un nivel superior, con
"orgData.messageSuppress" del bloque de función "EnS_Organization (Página 191)".

A.2.3

EnS_BufferRead: Leer valores de energía de bloques de datos

A.2.3.1

Descripción EnS_BufferRead

Descripción
El bloque de función "EnS_BufferRead" lee datos del bloque de datos "EnS_BufferDB
(Página 197)".
El bloque de función "EnS_BufferRead" es invocado internamente por el bloque de función
"EnS_ArchiveDataLog (Página 149)".
La figura siguiente muestra la conexión de los parámetros:

(Q6B%XIIHU'%
(Q6B%XIIHU
:RUN'%

%XIIHU'%

(Q6B$UFKLYH
'DWD/RJ

%XIIHU:RUN

%XIIHU'%
%XIIHU:RUN

(Q6B%XIIHU5HDG

Arranque
El bloque no tiene comportamiento en arranque.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

165

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)

Comportamiento en caso de error
Si ocurre un error, se activa el parámetro de salida "error". El parámetro "status (Página 167)"
contiene otra información de error.

Avisos
El bloque no tiene comportamiento de aviso. Los avisos los genera el bloque de función
invocante.

Consulte también
EnS_BufferWorkDB (Página 198)

A.2.3.2

Parámetro - EnS_BufferRead
La tabla siguiente muestra los parámetros del bloque de función "EnS_BufferRead":

Parámetro

Declaración

Tipo de datos

Ajuste predeter‐
minado

Descripción

bufferDB

Input

DB_ANY

-

Referencia al bloque de datos de almacenamien‐
to intermedio

data

Output

EnS_typeValue (Pá‐ gina 211)

Leer datos del búfer

busy

Output

BOOL

TRUE = procesamiento activo

FALSE

done

Output

BOOL

FALSE

TRUE = datos procesados correctamente

error

Output

BOOL

FALSE

TRUE = error

status

Output

WORD

-

Información de estado de error (Página 167)

bufferWork

InOut

EnS_typeBuffer‐
Work (Página 200)

-

Información de control y estado del búfer

request

InOut

EnS_typeBuffe‐
rReadCtrl (Pági‐
na 199)

-

Información de control del búfer

166

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)

A.2.3.3

Parámetro Status
La tabla siguiente muestra los códigos de error que se emiten en el parámetro de salida
"status" cuando se producen errores:

Código de
error
(W#16#...)

Descripción

Tipo de error Se copia en el
parámetro

8511

Error al leer del búfer Error de lec‐
tura

buffer‐
Work.readS‐
tat.status‐
ReadFct

Solución

La lectura se repite hasta que se lleva a cabo co‐
rrectamente.
Causas del error:
● Está conectado un bloque de datos incorrecto o
falta bloque de datos.
Procedimiento:
● Corrija el programa.

8512

Pérdida de datos *

bufferWork.no‐
DeletedItems

Causas del error:
● Pérdida de datos tras desbordamiento del búfer.
El búfer se desborda cuando no puede vaciarse,
p. ej. por estar interrumpida la conexión con
WinCC (en caso de archivado en WinCC).
Procedimiento:
● Establezca la conexión con WinCC.
● Aumente el tamaño del bloque de datos de
almacenamiento intermedio.

* El parámetro "bufferWork.noDeletedItems" contiene registros que se sobrescriben al
desbordarse el búfer. El número de registros borrados es parte de la alarma que emite el FB
"EnS_ArchiveDataLog (Página 149)".

A.2.4

EnS_BufferWrite: Escribir valores de energía en bloques de datos

A.2.4.1

Descripción EnS_BufferWrite

Descripción
El bloque de función "EnS_BufferWrite" escribe datos (datos de energía periódicos) en el
bloque de datos "EnS_BufferDB (Página 197)".
El bloque de función "EnS_BufferWrite" es invocado internamente por el bloque
"EnS_EnergyDataBasic (Página 187)".
Para el control de accesos, "EnS_BufferWrite" está vinculado a "EnS_BufferWorkDB
(Página 198)" (parámetro "bufferWork").
La figura siguiente muestra la conexión de los parámetros:

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

167

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)

%XIIHU'%

(Q6B%XIIHU'%

(Q6B(QHUJ\
'DWD%DVLF

%XIIHU:RUN

(Q6B%XIIHU
:RUN'%

%XIIHU'%
%XIIHU:RUN

(Q6B%XIIHU:ULWH

Arranque
El bloque no tiene comportamiento en arranque.

Comportamiento en caso de error
Si ocurre un error, se activa el parámetro de salida "error". El parámetro "status (Página 169)"
contiene otra información de error.

Avisos
El bloque no tiene comportamiento de aviso. Los avisos los genera el bloque de función
invocante.

A.2.4.2

Parámetro EnS_BufferWrite
La tabla siguiente muestra los parámetros del bloque de función "EnS_BufferWrite":

Parámetro

Declaración

Tipo de datos

Ajuste predeter‐
minado

Descripción

bufferDB

Input

DB_ANY

-

Referencia al bloque de datos de almacenamien‐
to intermedio

busy

Output

BOOL

FALSE

TRUE = procesamiento activo

done

Output

BOOL

FALSE

TRUE = datos procesados correctamente

error

Ouput

BOOL

FALSE

TRUE = error

status

Output

WORD

-

Información de estado de error (Página 169)

bufferWork

InOut

EnS_typeBuffer‐
Work (Página 200)

-

Información de control y estado del búfer

request

InOut

EnS_typeBufferWri‐
teCtrl (Página 202)

-

Información de control del búfer

energyMeta

InOut

EnS_typeEnergy‐
Meta (Página 205)

-

Datos específicos de puntos de medición

168

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)

A.2.4.3

Parámetro Status
La tabla siguiente muestra los códigos de error que se emiten en el parámetro de salida
"status" cuando se producen errores:

Código de
error
(W#16#...)

Descripción

Tipo de error Se copia en el
parámetro

8501

Error al escribir en el
búfer

Error de es‐
critura

Solución

bufferWork.wri‐ La escritura se repite hasta que se lleva a cabo co‐
teStat.statusWri‐ rrectamente.
teFct
Causa del error:
● Está conectado un bloque de datos incorrecto o
falta el bloque de datos.
Procedimiento:
● Corrija el programa.

8502

Alarma: Búfer al
100 %, pérdida de
datos *

bufferWork.noI‐
tems /

Causa del error:

bufferWork.ma‐
xItem

● El búfer se desborda cuando no puede vaciarse,
p. ej. por estar interrumpida la conexión con
WinCC (en caso de archivado en WinCC).

● Pérdida de datos tras desbordamiento del búfer.

Procedimiento:
● Establezca conexión con WinCC (archivado con
WinCC) o subsane el error (p. ej., memoria llena)
en la SIMATIC Memory Card.
8503

Advertencia: Búfer
lleno en más del
80 %, pérdida de da‐
tos inminente

bufferWork.noI‐
tems /
bufferWork.ma‐
xItem

Causa del error:
● El número de elementos de ARRAY en el bloque
de datos es >= 0,8 * número máximo de
elementos de ARRAY.
Procedimiento:
● Aumente los límites de ARRAY en las
propiedades del bloque de datos.

8504

Advertencia: Búfer
lleno en más del
x %, pérdida de da‐
tos inminente **

bufferWork.noI‐
tems /
bufferWork.ma‐
xItems

Causa del error:
● El número de elementos de ARRAY en el bloque
de datos es < 0,8 * número máximo de
elementos de ARRAY.
Procedimiento:
● Aumente los límites de ARRAY en las
propiedades del bloque de datos.

* El parámetro "bufferWork.noDeletedItems" contiene registros que se sobrescriben al
desbordarse el búfer. El número de registros borrados es parte de la alarma que emite el FB
"EnS_ArchiveDataLog (Página 149)".
** El rango de advertencia se configura en "bufferWork.bufferLimit".

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

169

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)

A.2.5

EnS_CalcEnergyData: Calcular valores de energía

A.2.5.1

Descripción EnS_CalcEnergyData

Descripción
El bloque de función "EnS_CalcenergyBasic" calcula el consumo de energía y la potencia
media durante el período de archivado que se haya configurado (p. ej., 15 min).
El bloque puede conectarse de las siguientes maneras:
● Entrada de potencia
● Entrada de energía
● Entrada de energía y de potencia

Estructura del bloque con entrada de potencia conectada
El siguiente gráfico muestra la estructura del bloque con entrada de potencia conectada:
(Q6B2UJDQL]DWLRQ

V\QF3HULRG
SHMPLQ

(Q6B7LPH6\QF

RUJ'DWD

V\QF'DWD
V\QF3HULRG
V\QF3XOVH
RUJ'DWD

RUJ'DWD
V\QF'DWD
LQSXW
SRZHUYDOXH
9DORUGH
SRWHQFLDGH
+DUGZDUH

(Q6B'UY$QDORJ
9DOXH

RXWSXW
HQHUJ\%DVLFDFW3RZHU
9DORUGH
SRWHQFLD

SRZHU
HQHUJ\

9DORUGHSRWHQFLD
9DORUGHFRQWDGRU
GHHQHUJ¯D

(Q6B&DOF
(QHUJ\'DWD

HQHUJ\%DVLF HQHUJ\%DVLF
'DWRVGH
HQHUJ¯D
FDOFXODGRV\
FRQVHOORGH
WLHPSR
SHMPLQ

EXIIHU'%

(Q6B(QHUJ\
'DWD%DVLF

EXIIHU:RUN

Potencia actual
"power.value" se transfiere a la salida de potencia "energyBasic.actPower".
Es posible configurar una función de zona muerta para el valor de potencia calculado
(parámetro "zeroCut"). Si el valor de potencia es menor que el valor configurado, el valor de
potencia calculado se ajusta a 0. La función de zona muerta se desactiva asignando a
"zeroCut" el valor 0.
Energía actual
Al comenzar un nuevo período de archivado, el valor de energía "actEnergy" y el tiempo
transcurrido del período de archivado "syncData.syncPeriod" se reinician.
Por medio del valor de potencia actual se calcula el consumo de energía actual
"energyBasic.actEnergy" durante el período de archivado.

170

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
El valor de energía calculado se suma cíclicamente al valor de energía actual
"energyBasic.actEnergy".
Valor de contador de energía
"energyBasic.actEnergyCounter" y "energyBasic.energyCounter" se ajustan a 0.

Estructura del bloque con entrada de energía conectada
El siguiente gráfico muestra la estructura del bloque con entrada de energía conectada.
(Q6B2UJDQL]DWLRQ

V\QF3HULRG
SHMPLQ

(Q6B7LPH6\QF

RUJ'DWD

V\QF'DWD
V\QF3HULRG
V\QF3XOVH

RUJ'DWD
V\QF'DWD

9DORUGHSRWHQFLD

SRZHU

RUJ'DWD
(Q6B&DOF(QHUJ\
'DWD

HQHUJ\

LQSXW

(Q6B'UY&RXQWHU/LQW
9DORUGH (Q6B'UY&RXQWHU/5HDO
FRQWDGRUGH
(Q6B'UY3XOVH
HQHUJ¯D
VH³DOGH
LPSXOVRGH
KDUGZDUH

HQHUJ\%DVLF

HQHUJ\%DVLF

'DWRVGH
HQHUJ¯D
FDOFXODGRV\
FRQVHOORGH
WLHPSR
SHMPLQ

EXIIHU'%

(Q6B(QHUJ\'DWD
%DVLF

EXIIHU:RUN

RXWSXW
9DORUGHSRWHQFLD
9DORUGHFRQWDGRU
GHHQHUJ¯D

Energía actual
El consumo de energía actual "energyBasic.actEnergy" se calcula restando el valor de
contador actual "energy.value" del valor de contador anterior.
Al comenzar un nuevo período de archivado, el valor de energía actual
"energyBasic.ectEnergy" y el tiempo transcurrido del período de archivado
"syncData.syncPeriod" se reinician.
Potencia actual
La potencia actual "energyBasic.actPower" se calcula al término del intervalo de adquisición
("baseAcqTime" + "addAcqTime") por medio del consumo de energía.
Intervalo de adquisición:
El intervalo de adquisición para el cálculo de potencia se define a través de los parámetros
"baseAcqTime" y "addAcqTime". "baseAcqTime" especifica el intervalo de adquisición
mínimo. "addAcqTime" especifica el intervalo de adquisición adicional.
Se determina la diferencia en la lectura del contador desde el comienzo hasta el final del
intervalo de adquisición.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

171

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
Para calcular la potencia actual, el bloque espera como mínimo el intervalo de adquisición
estándar "baseAcqTime". El cálculo de la potencia actual "energyBasic.actPower" comienza
cuando se cumple una de las condiciones siguientes:
● El valor de contador ha cambiado.
● El intervalo de adquisición adicional "addAcqTime" ha expirado.
● Se ha desconectado el consumidor. En este caso, el parámetro "energy.consumerStatus"
se ajusta a FALSE.
Esta condición únicamente se evalúa si el estado del consumidor está disponible
("energyMeta.consumerStatusEnable" = TRUE)
Valor de contador de energía
El valor actual de contador de energía "energy.value" se copia a
"energyBasic.actEnergyCounter" y "energyBasic.energyCounter" al término del período de
archivado.

Estructura del bloque con entrada de energía y de potencia conectada
El siguiente gráfico muestra la estructura del bloque con entrada de energía y de potencia
conectada.
(Q6B2UJDQL]DWLRQ

V\QF3HULRG
SHMPLQ

(Q6B7LPH6\QF

RUJ'DWD

V\QF'DWD
V\QF3HULRG

V\QF3XOVH

V\QF'DWD
LQSXW
9DORUGHSRWHQFLD
GHKDUGZDUH

(Q6B'UY$QDORJ
9DOXH

LQSXW (Q6B'UY&RXQWHU/LQW
(Q6B'UY&RXQWHU
/5HDO
(Q6B'UY3XOVH

9DORUGH
FRQWDGRUGH
HQHUJ¯D
VH³DOGHLPSXOVR
GHKDUGZDUH

RXWSXW
9DORUGHSRWHQFLD

RUJ'DWD

RUJ'DWD

SRZHU
HQHUJ\

(Q6B&DOF(QHUJ\
'DWD

HQHUJ\%DVLF
'DWRVGHHQHUJ¯D
FDOFXODGRV\
FRQVHOORGHWLHPSR
SHMPLQ

HQHUJ\%DVLF
EXIIHU'%

(Q6B(QHUJ\'DWD
%DVLF

EXIIHU:RUN

RXWSXW
9DORUGHSRWHQFLD
9DORUGHFRQWDGRUGH
HQHUJ¯D

Potencia actual
"power.value" se transfiere a la salida de potencia "energyBasic.actPower".
Es posible configurar una función de zona muerta para el valor de potencia calculado
(parámetro "zeroCut"). Si el valor de potencia es menor que el valor configurado, el valor de
potencia calculado se ajusta a 0. La función de zona muerta se desactiva asignando a
"zeroCut" el valor 0.
Energía actual
El consumo de energía actual "energyBasic.actEnergy" se calcula restando el valor de
contador actual "energy.value" del valor de contador inicial.

172

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
Al comenzar el nuevo período de archivado, el valor de energía actual
"energyBasic.actEnergy" y el tiempo transcurrido del período de archivado
"syncData.syncPeriod" se reinician.
Valor de contador de energía
El valor actual de contador de energía "energy.value" se copia a
"energyBasic.actEnergyCounter" y "energyBasic.energyCounter" al término del período de
archivado.
Potencia media/energía consumida
Al término del período de archivado "syncData.syncPeriod" se calcula el consumo de potencia
medio "energyBasic.power" a partir de la energía consumida "energyBasic.energy".
Estado
Los cálculos únicamente se realizan si el valor de entrada es válido.
El estado del valor de entrada se describe en las estructuras de datos "energy"
("energy.status") y "power" ("power.status").
Si el valor de entrada no es válido, los parámetros de salida correspondientes se ajustan a
16#FFFF_FFFF . Para los bloques situados aguas abajo, el estado está disponible para
posterior registro y archivado.
Los valores actuales con el estado 16#8301 son válidos. Sin embargo, estos valores no son
aptos para calcular la energía consumida ni el consumo de potencia medio en el período de
archivado actual (p. ej., período de 15 minutos). Los valores para el consumo de potencia
medio y la energía consumida se identifican con el estado 18#8001 .

Arranque
Al arrancar, todos los valores se ponen a cero y los tiempos se reinician.
Nota
Durante un período de archivado incompleto, los valores adoptan el estado "16#8301" (valores
de entrada erróneos durante el período de archivado).

Comportamiento en caso de error
Si ocurre un error, se activa el parámetro de salida "error". El parámetro "status (Página 174)"
contiene otra información de error.

Avisos
El bloque no tiene comportamiento de aviso.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

173

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)

A.2.5.2

Parámetro EnS_CalcEnergyData
La tabla siguiente muestra los parámetros del bloque de función "EnS_CalcEnergyData":

Parámetro

Declaración

Tipo de datos

Ajuste predeter‐
minado

Descripción

power

Input

EnS_typeAnalogVa‐ lue (Página 199)

energy

Input

EnS_typeEnergy‐
Counter (Pági‐
na 205)

-

Datos de entrada energía

energyBasic

Output

EnS_typeEnergyBa‐ sic (Página 204)

Datos de energía básicos

Datos de entrada potencia

error

Output

BOOL

FALSE

TRUE = error

status

Output

WORD

-

Información de estado de error (Página 174)

orgData

InOut

EnS_typeOrgData
(Página 210)

-

Datos de organización

syncData

InOut

EnS_typeSync (Pá‐
gina 210)

-

Datos de sincronización

energyMeta

InOut

EnS_typeEnergy‐
Meta (Página 205)

-

Datos específicos de puntos de medición

A.2.5.3

Parámetro Status
La tabla siguiente muestra los códigos de error que se emiten en el parámetro de salida
"status" cuando se producen errores:

Código de
error
(W#16#...)

Descripción

Tipo de error Se copia en el
parámetro

Solución

8301

Valores de entrada
erróneos durante el
periodo de archiva‐
do

Error de
hardware

energy.status /

Error interno

power.status

Causa del error:
● El error ha ocurrido durante el periodo de
archivado y ya se ha subsanado.
Procedimiento:
● En caso de un error interno no es necesario
tomar ninguna medida.

8311

Error de intercone‐
xión

Error de co‐
nexión

energy.status /

Causa del error:

power.status

● Los parámetros "energy" y "power" no están
interconectados.
Procedimiento:
● Programar la interconexión.

174

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
Código de
error
(W#16#...)

Descripción

Tipo de error Se copia en el
parámetro

Solución

8312

Intervalo de cálculo
"energyMeta.ba‐
seAcqTime" < 0

Error de pa‐
rametriza‐
ción

Causa del error:

energyMeta.ba‐
seAcqTime

● La duración del intervalo de cálculo no es válida.
Procedimiento:
● Introducir valores válidos para la duración del
intervalo de cálculo: 0-3600.

8313

Ampliación del inter‐
valo de cálculo

energyMeta.ba‐
seAcqTime /

"energyMeta.ad‐
dAcqTime" < 0

energyMeta.ad‐
dAcqTime

Causa del error:
● La duración ampliada del intervalo de cálculo no
es válida.
Procedimiento:
● Introducir valores válidos para la duración de la
ampliación del intervalo de cálculo: 0-3600.

8314

Valor límite para
punto cero "energy‐
Meta.zeroCut" < 0.0

energyMeta.ze‐
roCut

Causa del error:
● Valor no válido del límite para el punto cero.
Procedimiento:
● Introducir valores válidos para el límite del punto
cero: 0.0-3.402823e+38.

8315

"energy.value" >=
"energyMeta.over‐
flowCntValue"

energy.value /

Causa del error:

energyMe‐
ta.overflowCnt‐
Value

● El valor de contador de energía del parámetro
"energy.value" es igual o superior al valor de
desbordamiento del parámetro
"energyMeta.overflowCntValue".
● El parámetro "overflowCntValue" no está bien
configurado (es demasiado pequeño).
Procedimiento:
● Corregir la configuración.
● Aumentar el valor de desbordamiento.

8316

Factor de normaliza‐ Error de pa‐
ción "energyMe‐
rametriza‐
ta.normFactorOut"
ción
≤0.0 o bien
>9999999.0

energyMe‐
ta.normFacto‐
rOut

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Causa del error:
● El factor de normalización del parámetro
"energyMeta.normFactorOut" no es válido.
Procedimiento:
● Introducir valores válidos para el factor de
normalización: 0.0 - 9999999.0.

175

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)

A.2.6

EnS_DrvAnalogValue: Adquirir valores de potencia del tipo REAL

A.2.6.1

Descripción EnS_DrvAnalogValue

Descripción
Con el bloque de función "EnS_DrvAnalogValue" se adquiere un valor de potencia. La señal de
entrada se normaliza.
El valor de salida se transfiere en la estructura "Output" al bloque de función
"EnS_CalcEnergyData (Página 170)".
Si se mide energía eléctrica, la unidad del valor emitido es "Wh". Si se mide una magnitud no
eléctrica, p. ej. el caudal, la unidad del valor emitido es, p. ej., "m³/h".

Arranque
El bloque no tiene comportamiento en arranque.

Comportamiento en caso de error
Si ocurre un error, se activa el parámetro de salida "error". El parámetro "status (Página 177)"
contiene otra información de error.

A.2.6.2

Parámetro EnS_DrvAnalogValue
La tabla siguiente muestra los parámetros del bloque de función "EnS_DrvAnalogValue":

Parámetro

Declaración

Tipo de datos

Ajuste predeter‐
minado

Descripción

input

Input

REAL

0.0

Señal de entrada analógica

normFactor

Input

REAL

1.0

Factor de normalización

hWFault

Input

BOOL

FALSE

TRUE = error de hardware de la señal de entrada

sD

Input

VARIANT

-

Valor asociado para aviso de alarma

messageSup‐
press

Input

BOOL

FALSE

TRUE = inhibición de avisos activada

output

Output

EnS_typeAnalogVa‐ lue (Página 199)

Señal de salida normalizada

error

Output

BOOL

FALSE

TRUE = error

status

Output

WORD

-

Información de estado de error (Página 177)

errorAlarm

Output

BOOL

FALSE

TRUE = error del bloque de aviso "Pro‐
gram_Alarm"

statusAlarm

Output

WORD

-

Información de estado de error del bloque de
aviso "Program_Alarm"

alarmState

Output

BYTE

-

Estado de alarma del bloque de aviso "Pro‐
gram_Alarm"

176

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
Parámetro

Declaración

Tipo de datos

Ajuste predeter‐
minado

Descripción

orgData

InOut

EnS_typeOrgData
(Página 210)

-

Datos de organización

energyMeta

InOut

EnS_typeEnergy‐
Meta (Página 205)

-

Datos específicos de puntos de medición

A.2.6.3

Parámetro Status
La tabla siguiente muestra los códigos de error que se emiten en el parámetro de salida
"status" cuando se producen errores:

Código de
error
(W#16#...)

Descripción

Tipo de error Se copia en el
parámetro

8001

Error de
Error de hardware
del aparato de medi‐ hardware
da

hWFault

Solución

Causas del error:
● Conexión incorrecta del aparato de medida
● Dirección incorrecta
Procedimiento:
● Compruebe la conexión del aparato de medida o
corrija la dirección.

8011

Factor de normaliza‐ Error de pa‐
ción <= 0.0 o bien > rametriza‐
9999999.0
ción

normFactor

Causas del error:
● Valor no válido en el ajuste "Factor de
normalización"
Procedimiento:
● Introduzca un valor válido (0.0 - 9999999.0) en el
ajuste "Factor de normalización".

A.2.6.4

Avisos EnS_DrvAnalogValue
Los avisos se generan mediante la instrucción "Program_Alarm". Encontrará más información
sobre "Program_Alarm" en la ayuda en pantalla del sistema de información de TIA Portal, en
"Instrucciones avanzadas > Avisos".
La tabla siguiente muestra los avisos del bloque de función "EnS_DrvAnalogValue":
Bloque de aviso

Texto de aviso

Categoría

Program_Alarm

Error de hardware

con acuse

El aviso se puede modificar.
El parámetro de entrada "sD" se utiliza como valor asociado del aviso. Es posible interconectar
el parámetro con otra información que deba aparecer en el aviso.
El aviso se puede inhibir con "messageSuppress" o bien, en un nivel superior, con
"orgData.messageSuppress" del bloque de función "EnS_Organization (Página 191)".

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

177

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)

A.2.7

EnS_DrvCounterLInt: Adquirir valores de contador de energía del tipo LINT

A.2.7.1

Descripción EnS_DrvCounterLInt

Descripción
Con el bloque de función "EnS_DrvCounterLInt" se adquiere un valor de contador de energía
entero del tipo LInt (64 bits). La señal de entrada se convierte a un valor de contador de energía
normalizado.
El bloque de función "EnS_CalcEnergyData (Página 170)" procesa el valor de salida como
valor de contador de energía.

Arranque
El bloque no tiene comportamiento en arranque.

Comportamiento en caso de error
Si ocurre un error, se activa el parámetro de salida "error". El parámetro "status (Página 179)"
contiene otra información de error.

A.2.7.2

Parámetro EnS_DrvCounterLInt
La tabla siguiente muestra los parámetros del bloque de función "EnS_DrvCounterLInt":

Parámetro

Declaración

Tipo de datos

Ajuste predeter‐
minado

Descripción

input

Input

LINT

0.0

Valor de contador de entrada

consumerStatus

Input

BOOL

FALSE

Bit de estado de consumidor: TRUE = On, FAL‐
SE = Off

hWFault

Input

BOOL

FALSE

TRUE = error de hardware de la señal de entrada

sD

Input

VARIANT

-

Valor asociado para aviso de alarma

messageSup‐
press

Input

BOOL

FALSE

TRUE = inhibición de avisos activada

output

Output

EnS_typeEnergy‐
Counter (Pági‐
na 205)

-

Valor de contador de salida

error

Output

BOOL

FALSE

TRUE = error

status

Output

WORD

-

Información de estado de error (Página 179)

errorAlarm

Output

BOOL

FALSE

TRUE = error del bloque de aviso "Pro‐
gram_Alarm"

statusAlarm

Output

WORD

-

Información de estado de error del bloque de
aviso "Program_Alarm"

alarmState

Output

BYTE

-

Estado de alarma del bloque de aviso "Pro‐
gram_Alarm"

178

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
Parámetro

Declaración

Tipo de datos

Ajuste predeter‐
minado

Descripción

orgData

InOut

EnS_typeOrgData
(Página 210)

-

Datos de organización

energyMeta

InOut

EnS_typeEnergy‐
Meta (Página 205)

-

Datos específicos de puntos de medición

A.2.7.3

Parámetro Status
La tabla siguiente muestra los códigos de error que se emiten en el parámetro de salida
"status" cuando se producen errores:

Código de
error
(W#16#...)

Descripción

Tipo de error Se copia en el
parámetro

8001

Error de
Error de hardware
del aparato de entra‐ hardware
da

hWFault

Solución

Causas del error:
● Conexión incorrecta del aparato de medida
● Dirección incorrecta
Procedimiento:
● Compruebe la conexión del aparato de medida.

8011

Factor de normaliza‐ Error de pa‐
ción <= 0.0 o bien > rametriza‐
9999999.0
ción

energyMe‐
ta.normFactorIn

Causas del error:
● Valor no válido en el ajuste "Factor de
normalización"
Procedimiento:
● Introduzca un valor válido (0.0 - 9999999.0) en el
ajuste "Factor de normalización".

8012

Valor de desborda‐
miento del contador
<1.0 o bien >1.0e
+21

energyMe‐
ta.overflowCnt‐
Value

Causas del error:
● Valor no válido en el ajuste "Valor de
desbordamiento"
Procedimiento:
● Introduzca un valor válido (1.0 - 1.0e+21) en el
ajuste definido por el usuario "Valor de
desbordamiento".

A.2.7.4

Avisos EnS_DrvCounterLInt
Los avisos se generan mediante la instrucción "Program_Alarm". Encontrará más información
sobre "Program_Alarm" en la ayuda en pantalla del sistema de información de TIA Portal, en
"Instrucciones avanzadas > Avisos".
La tabla siguiente muestra los avisos del bloque de función "EnS_DrvCounterLInt":
Bloque de aviso

Texto de aviso

Categoría

Program_Alarm

Error de hardware

Con acuse

El aviso se puede modificar.
El parámetro de entrada "sD" se utiliza como valor asociado del aviso. Es posible interconectar
el parámetro con otra información que deba aparecer en el aviso.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

179

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
El aviso se puede inhibir con "messageSuppress" o bien, en un nivel superior, con
"orgData.messageSuppress" del bloque de función "EnS_Organization (Página 191)".

A.2.8

EnS_DrvCounterLReal: Adquirir valores de contador de energía del tipo LREAL

A.2.8.1

Descripción EnS_DrvCounterLReal

Descripción
Con el bloque de función "EnS_DrvCounterLInt" se adquiere un valor de contador de energía
de coma flotante del tipo LREAL (64 bits). La señal de entrada se convierte a un valor de
energía normalizado.
El bloque de función "EnS_CalcEnergyData (Página 170)" procesa el valor de salida como
valor de contador de energía.

Arranque
El bloque no tiene comportamiento en arranque.

Comportamiento en caso de error
Si ocurre un error, se activa el parámetro de salida "error". El parámetro "status (Página 181)"
contiene otra información de error.

A.2.8.2

Parámetro EnS_DrvCounterLReal
La tabla siguiente muestra los parámetros del bloque de función "EnS_DrvCounterLReal":

Parámetro

Declaración

Tipo de datos

Ajuste predeter‐
minado

Descripción

input

Input

LREAL

0.0

Valor de contador de entrada

consumerStatus

Input

BOOL

FALSE

Bit de estado de consumidor: 1 = On, 0 = Off

hWFault

Input

BOOL

FALSE

FALSE = error de hardware de la señal de en‐
trada

sD

Input

VARIANT

-

Valor asociado para aviso de alarma

messageSup‐
press

Input

BOOL

FALSE

TRUE = inhibición de avisos activada

output

Output

EnS_typeEnergy‐
Counter (Pági‐
na 205)

-

Valores de contador de salida

error

Output

BOOL

FALSE

TRUE = error

status

Output

WORD

-

Información de estado de error (Página 181)

errorAlarm

Output

BOOL

FALSE

TRUE = error del bloque de aviso "Pro‐
gram_Alarm"

180

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
Parámetro

Declaración

Tipo de datos

Ajuste predeter‐
minado

Descripción

statusAlarm

Output

WORD

-

Información de estado de error del bloque de
aviso "Program_Alarm"

alarmState

Output

BYTE

-

Estado de alarma del bloque de aviso "Pro‐
gram_Alarm"

orgData

InOut

EnS_typeOrgData
(Página 210)

-

Datos de organización

energyMeta

InOut

EnS_typeEnergy‐
Meta (Página 205)

-

Datos específicos de puntos de medición

A.2.8.3

Parámetro Status
La tabla siguiente muestra los códigos de error que se emiten en el parámetro de salida
"status" cuando se producen errores:

Código de
error
(W#16#...)

Descripción

Tipo de error Se copia en el
parámetro

8001

Error de hardware
Error de
del aparato de medi‐ hardware
da

hWFault

Solución

Causas del error:
● Conexión incorrecta del aparato de medida.
● Dirección incorrecta.
Procedimiento:
● Compruebe la conexión del aparato de medida o
corrija la dirección.

8011

Factor de normaliza‐ Error de pa‐
ción <= 0.0 o bien > rametriza‐
9999999.0
ción

energyMe‐
ta.normFactorIn

Causas del error:
● Valor no válido en el ajuste "Factor de
normalización".
Procedimiento:
● Introduzca un valor válido (0.0 - 9999999.0) en el
ajuste "Factor de normalización".

8012

Valor de desborda‐
miento del contador
<1.0 o bien >1.0e
+21

energyMe‐
ta.overflowCnt‐
Value

Causas del error:
● Valor no válido en el ajuste "Valor de
desbordamiento".
Procedimiento:
● Introduzca un valor válido (1.0 - 1.0e+21) en el
ajuste definido por el usuario "Valor de
desbordamiento".

A.2.8.4

Avisos EnS_DrvCounterLReal
Los avisos se generan mediante la instrucción "Program_Alarm". Encontrará más información
sobre "Program_Alarm" en la ayuda en pantalla del sistema de información de TIA Portal, en
"Instrucciones avanzadas > Avisos".

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

181

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
La tabla siguiente muestra los avisos del bloque de función "EnS_DrvCounterLReal":
Bloque de aviso

Texto de aviso

Categoría

Program_Alarm

Error de hardware

Con acuse

El aviso se puede modificar.
El parámetro de entrada "sD" se utiliza como valor asociado del aviso. Es posible interconectar
el parámetro con otra información que aparezca en el aviso.
El aviso se puede inhibir con "messageSuppress" o bien, en un nivel superior, con
"orgData.messageSuppress" del bloque de función "EnS_Organization (Página 191)".

A.2.9

EnS_DrvPulse: Adquirir señales de impulso

A.2.9.1

Descripción EnS_DrvPulse

Descripción
El bloque de función "EnS_DrvPulse" suma los impulsos adquiridos, los convierte con el factor
de normalización configurado y calcula un valor de contador de energía del tipo LREAL.
"EnS_CalcEnergyData (Página 170)" procesa el valor de salida como valor de contador de
energía normalizado.

Arranque
El bloque no tiene comportamiento en arranque.

Comportamiento en caso de error
Si ocurre un error, se activa el parámetro de salida "error". El parámetro "status (Página 183)"
contiene otra información de error.

A.2.9.2

Parámetro EnS_DrvPulse
La tabla siguiente muestra los parámetros del bloque de función "EnS_DrvPulse":

Parámetro

Declaración

Tipo de datos

Ajuste predeter‐
minado

Descripción

input

Input

BOOL

FALSE

Entrada de impulsos

consumerStatus

Input

BOOL

FALSE

Bit de estado de consumidor: TRUE = On, FAL‐
SE = Off

hWFault

Input

BOOL

FALSE

TRUE = error de hardware de la señal de entrada

sD

Input

VARIANT

-

Valor asociado para aviso de alarma

messageSup‐
press

Input

BOOL

FALSE

TRUE = inhibición de avisos activada

182

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
Parámetro

Declaración

Tipo de datos

Ajuste predeter‐
minado

Descripción

output

Output

EnS_typeEnergy‐
Counter (Pági‐
na 205)

-

Valores de contador de salida

error

Output

BOOL

FALSE

TRUE = error

status

Output

WORD

-

Información de estado de error (Página 183)

errorAlarm

Output

BOOL

FALSE

TRUE = error Program_Alarm

statusAlarm

Output

WORD

-

Información de estado de error del bloque de
aviso "Program_Alarm"

alarmState

Output

BYTE

-

Estado de alarma del bloque de aviso "Pro‐
gram_Alarm"

orgData

InOut

EnS_typeOrgData
(Página 210)

-

Datos de organización

energyMeta

InOut

EnS_typeEnergy‐
Meta (Página 205)

-

Datos específicos de puntos de medición

A.2.9.3

Parámetro Status
La tabla siguiente muestra los códigos de error que se emiten en el parámetro de salida
"status" cuando se producen errores:

Código de
error
(W#16#...)

Descripción

Tipo de error Se copia en el
parámetro

8001

Error de hardware
Error de
del aparato de medi‐ hardware
da

hWFault

Solución

Causas del error:
● Conexión incorrecta del aparato de medida
● Dirección incorrecta
Procedimiento:
● Compruebe la conexión del aparato de medida o
corrija la dirección.

8011

Factor de normaliza‐ Error de pa‐
ción <= 0.0 o bien > rametriza‐
9999999.0
ción

energyMe‐
ta.normFactorIn

Causas del error:
● Valor no válido en el ajuste "Factor de
normalización"
Procedimiento:
● Introduzca un valor válido (0.0 - 9999999.0) en el
ajuste "Factor de normalización".

8012

Valor de desborda‐
miento del contador
<1.0 o bien >1.0e
+21

energyMe‐
ta.overflowCnt‐
Value

Causas del error:
● Valor no válido en el ajuste "Valor de
desbordamiento"
Procedimiento:
● Introduzca un valor válido (1.0 - 1.0e+21) en el
ajuste definido por el usuario "Valor de
desbordamiento".

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

183

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)

A.2.9.4

Avisos EnS_DrvPulse
Los avisos se generan mediante la instrucción "Program_Alarm". Encontrará más información
sobre "Program_Alarm" en la ayuda en pantalla del sistema de información de TIA Portal, en
"Instrucciones avanzadas > Avisos".
La tabla siguiente muestra los avisos del bloque de función "EnS_DrvPulse":
Bloque de aviso

Texto de aviso

Categoría

Program_Alarm

Error de hardware

Con acuse

El usuario puede modificar el aviso.
El parámetro de entrada "sD" se utiliza como valor asociado del aviso. Es posible interconectar
el parámetro con otra información que deba aparecer en el aviso.
El aviso se puede inhibir con "messageSuppress" o bien, en un nivel superior, con
"orgData.messageSuppress" del bloque de función "EnS_Organization (Página 191)".

A.2.10

EnS_EnergyDataAdv: Poner a disposición valores de energía avanzados

A.2.10.1

Descripción EnS_EnergyDataAdv

Descripción
El bloque de función "EnS_EnergyDataAdv" pone a disposición un registro de datos de energía
avanzados recogidos por un punto de medición. El bloque de función actúa como interfaz
central con WinCC Professional o con otros programas (p. ej. SIMATIC Energy Manager Pro).

Arranque
El bloque no tiene comportamiento en arranque.

Comportamiento en caso de error
Si ocurre un error, se activa el parámetro de salida "error". El parámetro "status (Página 185)"
contiene otra información de error.

Avisos
El bloque no tiene comportamiento de aviso.

184

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)

A.2.10.2

Parámetro EnS_EnergyDataAdv
La tabla siguiente muestra los parámetros del bloque "EnS_EnergyDataAdv":

Parámetro

Declaración

Tipo de datos

Ajuste predeter‐
minado

Descripción

HMI *

advData

Input

EnS_typeEnerg‐
yAdv (Página 203)

-

Registro de datos de medición avanza‐
dos

X

error

Output

BOOL

-

TRUE = error

-

status

Output

WORD

-

Información de estado de error (Pági‐
na 185)

-

orgData

InOut

EnS_typeOrgData
(Página 210)

-

Datos de organización

-

energyMeta

InOut

EnS_typeEnergy‐
Meta (Página 205)

-

Datos específicos de puntos de medi‐
ción

-

* Los parámetros marcados contienen los atributos de sistema "Accesible para HMI" y "Visible
en HMI". Se utilizan para la función de manejo y visualización en el dispositivo HMI, p. ej. para
visualizar un valor actual en un faceplate.

A.2.10.3

Parámetro Status
El parámetro de salida "error" se activa si se produce un error en un bloque de función
subordinado.
El parámetro "status" contiene información de error adicional. La información de error se
muestra en el parámetro "status" hasta que el error se ha subsanado. Hasta ese momento no
se muestra la información del siguiente error presente.

A.2.11

EnS_EnergyDataAdvMinMax: Poner a disposición valores mínimos y máximos
avanzados.

A.2.11.1

Descripción EnS_EnergyDataAdvMinMax

Descripción
El bloque de función "EnS_EnergyDataAdvMinMax" pone a disposición valores mínimos y
máximos de los datos de energía avanzados para la salida, p. ej., en WinCC Professional.

Arranque
El bloque no tiene comportamiento en arranque.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

185

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)

Comportamiento en caso de error
Si ocurre un error, se activa el parámetro de salida "error". La información de error del bloque
de función subordinado (p. ej., de hardware de medición) se emite en la salida "status
(Página 186)". La información de error se muestra en el parámetro "status" hasta que el error
se ha subsanado. Hasta ese momento no se muestra la información del siguiente error
presente.

Avisos
El bloque no tiene comportamiento de aviso.

A.2.11.2

Parámetro EnS_EnergyDataAdvMinMax
La tabla siguiente muestra los parámetros del bloque de función
"EnS_EnergyDataAdvMinMax":

Parámetro

Declaración

Tipo de datos

Ajuste predeter‐
minado

Descripción

advDataMin

Input

EnS_typeEnerg‐
yAdv (Página 203)

-

Registro con valores mínimos de los
valores de energía avanzados

X

advDataMax

Input

EnS_typeEnerg‐
yAdv (Página 203)

-

Registro con valores máximos de los
valores de energía avanzados

X

error

Output

BOOL

-

TRUE = error

status

Output

WORD

-

Información de estado de error (Pági‐
na 186)

orgData

InOut

EnS_typeOrgData
(Página 210)

-

Datos de organización

energyMeta

InOut

EnS_typeEnergy‐
Meta (Página 205)

-

Datos específicos de puntos de medi‐
ción

HMI *

* Los parámetros marcados contienen los atributos de sistema "Accesible para HMI" y "Visible
en HMI". Se utilizan para la función de manejo y visualización en el dispositivo HMI, p. ej. para
visualizar un valor actual en el faceplate.

A.2.11.3

Parámetro Status
El parámetro de salida "error" se activa si se produce un error en un bloque de función
subordinado.
El parámetro "status" contiene información de error adicional. La información de error se
muestra en el parámetro "status" hasta que el error se ha subsanado. Hasta ese momento no
se muestra la información del siguiente error presente.

186

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)

A.2.12

EnS_EnergyDataBasic: Poner a disposición metadatos y valores de energía

A.2.12.1

Descripción EnS_EnergyDataBasic

Descripción
El bloque de función "EnS_EnergyDataBasic" pone a disposición un registro de datos de
energía avanzados recogidos por un punto de medición. El bloque de función actúa como
interfaz central con WinCC Professional o con otros programas (p. ej. SIMATIC Energy
Manager Pro).

Metadatos
Los metadatos del parámetro "energyMeta" del tipo de datos "EnS_typeEnergyMeta
(Página 205)" contienen información general sobre el objeto de adquisición o el hardware de
medición.

Arranque
El bloque no tiene comportamiento en arranque.

Comportamiento en caso de error
Si ocurre un error, se activa el parámetro de salida "error". El parámetro "Status (Página 188)"
contiene otra información de error.

A.2.12.2

Parámetro EnS_EnergyDataBasic
La tabla siguiente muestra los parámetros del bloque de función "EnS_EnergyDataBasic":

Parámetro

Declaración

Tipo de datos

Ajuste predeter‐
minado

Descripción

HMI *

energyMeta

Input

EnS_typeEnergy‐
Meta (Página 205)

-

Datos específicos de puntos de medi‐
ción

X

energyBasic

Input

EnS_typeEnergyBa‐ sic (Página 204)

Datos de energía básicos

X

bufferDB

Input

DB_ANY

-

Puntero hacia el bloque de datos de al‐
macenamiento intermedio

-

sD

Input

VARIANT

-

Valor asociado para avisos de alarma

-

messageSup‐
press

Input

BOOL

FALSE

TRUE = inhibición de avisos activada

X

error

Output

BOOL

FALSE

TRUE = error

-

status

Output

WORD

-

Información de estado de error (Pági‐
na 188)

-

status1

Output

WORD

-

Información de estado de error 1

-

status2

Output

WORD

-

Información de estado de error 2

-

status3

Output

WORD

-

Información de estado de error 3

-

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

187

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
Parámetro

Declaración

Tipo de datos

Ajuste predeter‐
minado

Descripción

status4

Output

WORD

-

Información de estado de error 4

HMI *
-

status5

Output

WORD

-

Información de estado de error 5

-

errorAlarm1

Output

BOOL

FALSE

TRUE = error Program_Alarm1

-

statusAlarm1

Output

WORD

-

Información de estado de error Pro‐
gram_Alarm1

-

alarmState1

Output

BYTE

-

Estado de alarma de Program_Alarm1

-

errorAlarm2

Output

BOOL

FALSE

TRUE = error Program_Alarm2

-

statusAlarm2

Output

WORD

-

Información de estado de error Pro‐
gram_Alarm2

-

alarmState2

Output

BYTE

-

Estado de alarma de Program_Alarm2

-

errorAlarm3

Output

BOOL

FALSE

TRUE = error Program_Alarm3

-

statusAlarm3

Output

WORD

-

Información de estado de error Pro‐
gram_Alarm3

-

alarmState3

Output

BYTE

-

Estado de alarma Program_Alarm3

-

errorAlarm4

Output

BOOL

FALSE

TRUE = error Program_Alarm4

-

statusAlarm4

Output

WORD

-

Información de estado de error Pro‐
gram_Alarm4

-

alarmState4

Output

BYTE

-

Estado de alarma Program_Alarm4

-

errorAlarm5

Output

BOOL

FALSE

TRUE = error Program_Alarm5

-

statusAlarm5

Output

WORD

-

Información de estado de error Pro‐
gram_Alarm5

-

alarmState5

Output

BYTE

-

Estado de alarma Program_Alarm5

-

orgData

InOut

EnS_typeOrgData
(Página 210)

-

Datos de organización

-

bufferWork

InOut

EnS_typeBuffer‐
Work (Página 200)

-

Información de control y estado del bú‐
fer

-

* Los parámetros marcados contienen los atributos de sistema "Accesible para HMI" y "Visible
en HMI". Se utilizan para la función de manejo y visualización en el dispositivo HMI, p. ej. para
visualizar un valor actual en el faceplate.

A.2.12.3

Parámetro Status
La información de error de los bloques de función subordinados (p. ej., "EnS_TimeSync") se
añade al parámetro de salida "status1", "status5". La información de error se muestra en el
parámetro "status" hasta que el error se ha subsanado. Hasta ese momento no se muestra la
información del siguiente error presente.

A.2.12.4

Avisos EnS_EnergyDataBasic
Los avisos se generan mediante la instrucción "Program_Alarm". Encontrará más información
sobre "Program_Alarm" en la ayuda en pantalla del sistema de información de TIA Portal, en
"Instrucciones avanzadas > Avisos".

188

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
La tabla siguiente muestra los avisos del bloque de función "EnS_EnergyDataBasic":
Bloque de aviso

Texto de aviso

Categoría

Program_Alarm1

Error de parametrización <Lista de textos: EnS_Alarms:#sta‐ Con acuse
tus1>

Program_Alarm2

<Lista de textos: EnS_Alarms:#status2>

Program_Alarm3

Error de archivado <Lista de textos: EnS_Alarms:#status3>. Con acuse

Program_Alarm4

Reservado (advertencia para violación de valor límite)

Con acuse

Program_Alarm5

Reservado (advertencia para violación de valor límite)

Con acuse

Con acuse

Los textos de aviso adicionales se describen en la lista de textos "EnS_Alarms". Los
parámetros de salida "status1" hasta "status5" contienen el valor para la información de error
del FB "EnS_EnergyDataBasic" y de sus FB subordinados.
Bloque de aviso

Código de
error
(W#16#...)

Texto de aviso

Parámetro Bloque de función

Program_Alarm1

801x

Hardware

status1

821x

Sincronización horaria

EnS_TimeSync
(Página 192)

831x

Cálculo

8311

Error de interconexión cálculo

EnS_CalcEnergy‐
Data (Página 170)

Program_Alarm2

ProgramAlarm3

800x

Error de hardware

8201

Señal de sincronización externa
perdida

8202

Señal de sincronización externa
fuera del rango válido

8203

Salto sincronización horaria

8501

Error al escribir en el búfer

8502

Alarma: Búfer al 100 %, pérdida
de datos

8503

Advertencia: Búfer lleno en más
del 80 %, pérdida de datos inmi‐
nente

8504

Advertencia: Búfer lleno en más
del x %, pérdida de datos inmi‐
nente

8512

Posible pérdida de datos

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

status2

EnS_Drvxxx

EnS_Drvxxx
EnS_TimeSync
(Página 192)

status3

EnS_BufferWrite
(Página 167)

EnS_BufferRead
(Página 165)

189

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
Los valores asociados están asignados de la siguiente manera:
Bloque de aviso

Valor asocia‐
do

Parámetro

Significado

Program_Alarm1

1

status1

Información de estado de error 1

2

sD

Libre

3

-

No utilizado

4

-

No utilizado

5

-

No utilizado

6

-

No utilizado

7

-

No utilizado

8

-

No utilizado

9

-

No utilizado

10

-

No utilizado

Program_Alarm2

Program_Alarm3

1

status2

Información de estado de error 2

2

sD

Libre

3

-

No utilizado

4

-

No utilizado

5

-

No utilizado

6

-

No utilizado

7

-

No utilizado

8

-

No utilizado

9

-

No utilizado

10

-

No utilizado

1

status3

Información de estado de error 3

2

Reservado*

Reservado

3

sD

Libre

4

-

No utilizado

5

-

No utilizado

6

-

No utilizado

7

-

No utilizado

8

-

No utilizado

9

-

No utilizado

10

-

No utilizado

* Los valores asociados están reservados para un uso futuro.
El aviso se puede modificar.
El parámetro de entrada "sD" se utiliza como valor asociado del aviso. Es posible interconectar
el parámetro con otra información que aparezca en el aviso.
El aviso se puede inhibir con "messageSuppress" o bien, en un nivel superior, con
"orgData.messageSuppress" del bloque de función "EnS_Organization (Página 191)".

190

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)

A.2.13

EnS_Organization: Poner a disposición datos de organización

A.2.13.1

Descripción EnS_Organization

Descripción
El bloque de función "EnS_Organization" pone a disposición de forma centralizada datos de
organización a los que acceden otros bloques de función. El bloque debe ser invocado una vez
por cada OB de alarma cíclica.
El bloque administra los siguientes datos:
● Indicador de arranque ("orgData.startup")
El indicador de arranque es un parámetro del tipo BOOL. Este parámetro se encuentra en
el parámetro de salida "orgData.startup" del bloque de función "EnS_Organization". A
través de este parámetro, el bloque de función comunica si el programa se encuentra en la
fase de arranque. El número de ciclos para la fase de arranque se especifica en el
parámetro de entrada "runUpCyc" del bloque de función. El ajuste predeterminado es una
fase de arranque de diez ciclos.
● Inhibición de avisos ("orgData.messageSuppress")
Con el parámetro para inhibición de avisos se especifica si deben inhibirse o no los avisos
procedentes del programa de usuario de la CPU.
● Sello de tiempo actual (UTC) de la CPU
El sello de tiempo actual es la hora del sistema de la CPU.

Arranque
El bloque activa el parámetro de salida "orgData.startup" para el número de ciclos de arranque
configurados "runUpCyc" e inhibe los avisos a través del parámetro
"orgData.messageSuppress".

Comportamiento en caso de error
Si ocurre un error, se activa el parámetro de salida "error". El parámetro "status" contiene otra
información de error.

Avisos
El bloque no tiene comportamiento de aviso.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

191

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)

A.2.13.2

Parámetro EnS_Organization
La tabla siguiente muestra los parámetros del bloque de función "EnS_Organization":

Parámetro

Declaración

Tipo de datos

Ajuste predeter‐
minado

Descripción

runUpCyc

Input

UINT

10

Número de ciclos de arranque

messageSup‐
press

Input

BOOL

FALSE

TRUE = inhibición de avisos activada

orgData

Output

EnS_typeOrgData
(Página 210)

-

Datos de organización

error

Output

BOOL

FALSE

TRUE = error

status

Output

WORD

-

Información de estado de error

A.2.14

EnS_TimeSync: Sincronizar horas

A.2.14.1

Descripción EnS_TimeSync

Descripción
El bloque sirve como reloj maestro de sincronización para el bloque de adquisición de energía
"EnS_CalcEnergyData (Página 170)".
El ciclo puede especificarse de la manera siguiente:
El generador de impulsos "syncData.syncPulse" es disparado por un impulso de
sincronización externo "extSyncPulse", p. ej. de un proveedor de energía, o por la hora interna
de la CPU una vez por periodo de archivado. El bloque evalúa el flanco ascendente del impulso
de sincronización. El sello de tiempo para el impulso de sincronización se redondea al alza o
a la baja al siguiente valor de tiempo entero, p. ej. 15 minutos, en el parámetro
"syncData.syncTimeStamp".
El impulso de sincronización únicamente se detecta dentro del rango válido especificado. El
rango válido se define mediante el parámetro de bloque "validTimeRange". Se ha previsto una
tolerancia para impulsos de sincronización prematuros. Los impulsos de sincronización
prematuros se consideran válidos si se capturan como máximo un ciclo de CPU antes de hora.
Estos impulsos prematuros dependen del tiempo de ciclo del OB de alarma cíclica en el que
se llama el bloque "EnS_TimeSync".
Si el OB de alarma cíclica se llama una vez por segundo, el impulso de sincronización externo
deberá activarse como muy temprano en el segundo 59.
Si el OB de alarma cíclica se llama una vez cada dos segundos, el impulso de sincronización
externo deberá activarse como muy temprano en el segundo 58.
Si el impulso de sincronización externo de un proveedor de energía se activa con demasiada
antelación, no se activará el impulso de sincronización del bloque y se activará el estado de
error 16#8202.

192

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
Los impulsos no válidos se identifican con el estado "16#8202" y se acusan con un aviso.
● Sincronización externa "extEnable" = TRUE"
Ejemplos:
– Impulso de sincronización externo "extSyncPulse" ajustado demasiado pronto:
El tiempo que transcurre entre el sello de tiempo actual de la CPU y el siguiente período
es menor que el intervalo de cálculo del bloque de función. En este caso el sello de
tiempo de sincronización se redondea al siguiente valor entero del período.
Intervalo de cálculo: 1 s
Período: 15 min
Hora actual de la CPU: 6:59:59:500
Sello de tiempo de sincronización: 7:00:00:000
– Impulso de sincronización externo "extSyncPulse" ajustado demasiado tarde:
El tiempo que transcurre entre el sello de tiempo actual de la CPU y el último período es
menor que el rango válido "validTimeRange". En este caso el sello de tiempo de
sincronización se redondea al último valor entero del período.
Intervalo de cálculo: 1 s
Período: 15 min
Rango válido: 10 s
Hora actual de la CPU: 7:00:00:001
Sello de tiempo de sincronización: 7:00:00:000
– Impulso de sincronización externo "extSyncPulse" fuera del rango válido:
El tiempo que transcurre entre el sello de tiempo actual de la CPU y el último período es
mayor que el rango válido "vvalidTimeRange". En este caso se rechaza el sello de
tiempo de sincronización y se muestra un mensaje de error (Status = 16#8202).
Intervalo de cálculo: 1 s
Período: 15 min
Rango válido: 10 s
Hora actual de la CPU: 7:00:20:000
Sello de tiempo de sincronización: Mensaje de error (Status = 16#8202)
● Especificación mediante el parámetro ("syncPeriod")
Si la sincronización externa está desactivada ("extEnable" = FALSE"), el parámetro
"syncPeriod" contiene el período para la sincronización, p. ej. 15 minutos.
● Cuando falta el impulso de sincronización, el archivado de los datos de energía se
comporta del siguiente modo:
– Se calculan los datos de energía del periodo de archivado hasta que se activa el impulso
de sincronización.
– Se calcula la media de los valores de potencia de todo el periodo de archivado a partir
del último impulso de sincronización.
– Se acumulan los valores de recuento de energía de todo el periodo de archivado a partir
del último impulso de sincronización.
Se emiten sellos de tiempo como hora mundial estándar UTC.
Es posible crear más instancias de este bloque y, por tanto, implementar más períodos de
archivado. Lo habitual son períodos de 15 minutos para energía eléctrica y de 60 minutos para
medios no eléctricos.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

193

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)

Arranque
Al arrancar, los tiempos internos se reinician.

Comportamiento en caso de error
Si ocurre un error, se activa el parámetro de salida "error". El parámetro "status (Página 195)"
contiene otra información de error.

Avisos
El bloque no tiene comportamiento de aviso.

A.2.14.2

Parámetro EnS_TimeSync
La tabla siguiente muestra los parámetros del bloque de función "EnS_TimeSync":

Parámetro

Declaración

Tipo de datos

Ajuste predeter‐
minado

Descripción

extEnable

Input

BOOL

FALSE

TRUE = habilitación para sincronización externa

extSyncPulse

Input

BOOL

FALSE

Impulso de sincronización externo

syncPeriod

Input

TIME

T#15m

Período de archivado

pulseTime

Input

TIME

T#2s

Duración del impulso de sincronización

validTimeRange

Input

TIME

T#10s

Rango válido para el impulso de sincronización
externo

monitoringTi‐
meExtSync

Input

TIME

T#2s

Reservado

modeExtSync

Input

BOOL

FALSE

Reservado

offsetUTCToLo‐
calTime

Input

TIME

T#0s

Desfase de la hora mundial estándar UTC res‐
pecto de la hora local

syncData

Output

EnS_typeSync (Pá‐
gina 210)

-

Datos de sincronización

curTimeStamp

Output

DT

-

Sello de tiempo actual en llamada de bloque

error

Output

BOOL

FALSE

TRUE = error

status

Output

WORD

-

Información de estado de error (Página 195)

orgData

InOut

EnS_typeOrgData
(Página 210)

-

Datos de organización

resetErro‐
rExtSync

InOut

BOOL

FALSE

Reservado

194

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)

A.2.14.3

Parámetro Status
La tabla siguiente muestra los códigos de error que se emiten en el parámetro de salida
"status" cuando se producen errores:

Código de
error
(W#16#...)

Descripción

Tipo de error Se copia en el
parámetro

8201

El impulso de sincro‐ Error de
nización externo
hardware
extSyncPulse se ha
perdido durante el
período de archiva‐
do syncPeriod.

extSyncPulse

Solución

Causas del error:
● Impulso de sincronización externo perdido
Procedimiento:
● Compruebe la dirección de hardware del
impulso.
● Si el impulso externo no es fiable, utilice la
sincronización horaria interna (hora de la CPU
como reloj maestro).

8202

El impulso de sincro‐
nización externo
extSyncPulse no se
ha ajustado dentro
del rango válido va‐
lidTimeRange.

extSyncPulse /
validTimeRange

Causas del error:
● El impulso de sincronización externo se ha
ajustado fuera del rango válido.
El ajuste predeterminado del rango válido son 10 s .
Procedimiento:
● Si el impulso externo no es fiable, utilice la
sincronización horaria interna (hora de la CPU
como reloj maestro).

8203

El salto del sello de Error de
tiempo actual es ma‐ tiempo
yor que la duración
del período de archi‐
vado syncPeriod.

curTimeStamp /
syncPeriod

Error interno
Causas del error:
● El salto del sello de tiempo actual es mayor que
la duración del período de archivado.
Procedimiento:
● Si el impulso externo no es fiable, utilice la
sincronización horaria interna (hora de la CPU
como reloj maestro).

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

195

Bloques de Energy Suite – Adquisición
A.2 Bloques de función (FB)
Código de
error
(W#16#...)

Descripción

Tipo de error Se copia en el
parámetro

8211

La duración del pe‐
ríodo de archivado
syncPeriod es me‐
nor que:

Error de pa‐
rametriza‐
ción

● Duración del
impulso de
sincronización
pulseTime

Solución

syncPeriod / pul‐ Causas del error:
seTime
● La duración del impulso de sincronización es
mayor que la duración del período de archivado
o bien mayor que 1 minuto.
Procedimiento:
● Si el impulso externo no es fiable, utilice la
sincronización horaria interna (hora de la CPU
como reloj maestro).

o bien
● 1 minuto
8212

8213

La duración del pe‐
ríodo de archivado
syncPeriod es ma‐
yor que un día (24
horas).

syncPeriod

La duración del pe‐
ríodo de archivado
syncPeriod no es un
número entero.

syncPeriod

Causas del error:
● La duración del período de archivado
syncPeriod es mayor que un día (24 horas).
Procedimiento:
● Introduzca un valor válido (1 min - 24 h) en el
ajuste para la duración del período de archivado.
Causas del error:
● La duración del período de archivado syncPeriod
no es un número entero.
Procedimiento:
● Introduzca un valor válido (número entero) en el
ajuste para la duración del período de archivado.

8214

La duración del pe‐
ríodo de archivado
syncPeriod no es
una parte entera de
una hora/un día.

syncPeriod

Causas del error:
● La duración del período de archivado syncPeriod
no es una parte entera de una hora/un día.
Procedimiento:
● Introduzca un valor válido en el ajuste para la
duración del período de archivado.

Son válidos, p. ej.:
● 1 minuto
● 5 minutos
● 15 minutos
● 12 horas
No son válidos,
p. ej.:
● 7 minutos
● 11 minutos
● 5 horas
8215

El desfase de la ho‐
ra mundial estándar
UTC respecto de la
hora local no es un
múltiplo de 15 minu‐
tos o bien es menor
que 15 minutos.

extSyncPulse

Causas del error:
● El desfase de la hora mundial estándar UTC
respecto de la hora local no es un múltiplo de 15
minutos o bien es menor que 15 minutos.
Procedimiento:

Son válidos, p. ej.:

196

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.3 Bloques de datos (DB)
Código de
error
(W#16#...)

Descripción

Tipo de error Se copia en el
parámetro

● 1 hora
● 4 horas
● 30 minutos

Solución

● Introduzca un valor válido para el desfase de la
hora mundial estándar UTC respecto de la hora
local.

No son válidos,
p. ej.:
● 10 minutos
● 25 minutos

A.3

Bloques de datos (DB)

A.3.1

EnS_BufferDB

A.3.1.1

Descripción EnS_BufferDB

Descripción
El bloque de datos global "EnS_BufferDB" contiene en una matriz los datos de energía
adquiridos periódicamente. El bloque de función "EnS_EnergyDataBasic (Página 187)"
escribe los datos de energía en el bloque de función "EnS_BufferDB". Además, el bloque de
función "EnS_EnergyDataBasic" llama internamente al bloque de función "EnS_BufferWrite
(Página 167)".
La lectura de los datos de energía del bloque de datos "EnS_BufferDB" se lleva a cabo a través
del bloque de función "EnS_ArchiveDataLog (Página 149)" o el componente SCADA de
Energy Suite. Además, el bloque de función "EnS_ArchiveDataLog" llama internamente al
bloque de función "EnS_BufferRead (Página 165)".
El tamaño de la matriz puede modificarse en función de los requisitos particulares y la
capacidad de memoria de la CPU. Para ello, ajuste el número de elementos de matriz que
desee en las propiedades del bloque de datos "EnS_BufferDB". Asimismo, en el bloque
"EnS_BufferWorkDB (Página 198)" se ajustan otros varios parámetros, p. ej., una advertencia
de nivel.
Cada elemento de matriz se corresponde con un valor del tipo "EnS_typeValue (Página 211)".
Ello incluye otros cuatro valores:
● Nombre de variable
● Valor
● Sello de tiempo
● Estado

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

197

Bloques de Energy Suite – Adquisición
A.3 Bloques de datos (DB)
Es posible añadir a una CPU varios bloques de datos de almacenamiento intermedio siempre
y cuando esa CPU disponga de suficiente memoria libre. Un par consta siempre de dos
bloques de datos: "EnS_BufferDB" y "EnS_BufferWorkDB".

A.3.1.2

Estructura EnS_BufferDB
La tabla siguiente muestra la estructura del bloque de datos "EnS_BufferDB":
Elemento

Tipo de datos

EnS_BufferDB

ARRAY[0..n] of "EnS_typeValue" n+1 elementos de valores de da‐
tos calculados

A.3.2

EnS_BufferWorkDB

A.3.2.1

Descripción EnS_BufferWorkDB

Descripción

Descripción
El bloque de datos "EnS_BufferWorkDB" es un bloque de datos global del tipo
"EnS_typeBufferWork (Página 200)". El bloque de datos contiene la información de control y
estado del DB de almacenamiento intermedio "EnS_BufferDB (Página 197)". Los bloques de
función "EnS_BufferRead (Página 165)" y "EnS_BufferWrite (Página 167)" evalúan y
describen internamente los valores del bloque de datos "EnS_BufferWorkDB" para la
coordinación de los accesos de lectura y escritura al DB de almacenamiento intermedio
"EnS_BufferDB".

A.3.2.2

Estructura EnS_BufferWorkDB
La tabla siguiente muestra la estructura del bloque de datos "EnS_BufferWorkDB":

198

Elemento

Tipo de datos

Descripción

EnS_BufferWorkDB

EnS_typeBufferWork (Pági‐
na 200)

Información de control y estado
del búfer

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.4 Tipos de datos definidos por el usuario (UDT)

A.4

Tipos de datos definidos por el usuario (UDT)

A.4.1

EnS_typeAnalogValue

A.4.1.1

Descripción EnS_typeAnalogValue

Descripción
El tipo de datos de PLC "EnS_typeAnalogValue" describe la interfaz entre el bloque de función
para entradas analógicas "EnS_DrvAnalogValue (Página 176)" y el bloque de función para
cálculo periódico de datos de energía "EnS_CalcEnergyData (Página 170)".

A.4.1.2

Estructura EnS_typeAnalogValue
La tabla siguiente muestra los parámetros del tipo de datos de PLC "EnS_typeAnalogValue":
Parámetro

Tipo de datos

Ajuste predetermi‐ Descripción
nado

value

REAL

0.0

Valor de proceso

status

WORD

16#FFFF

Estado del valor de proceso

A.4.2

EnS_typeBufferReadCtrl

A.4.2.1

Descripción EnS_typeBufferReadCtrl

Descripción
El tipo de datos de PLC "EnS_typeBufferReadCtrl" contiene la información de control
necesaria para leer datos del bloque de datos de almacenamiento intermedio "EnS_BufferDB
(Página 197)".

A.4.2.2

Estructura EnS_typeBufferReadCtrl
La tabla siguiente muestra el parámetro del tipo de datos de PLC "EnS_typeBufferReadCtrl":
Parámetro

Tipo de datos

Ajuste predetermi‐ Descripción
nado

req

BOOL

FALSE

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Petición para leer datos del bloque
de datos de almacenamiento inter‐
medio "EnS_BufferDB (Pági‐
na 197)".

199

Bloques de Energy Suite – Adquisición
A.4 Tipos de datos definidos por el usuario (UDT)

A.4.3

EnS_typeBufferReadStat

A.4.3.1

Descripción EnS_typeBufferReadStat

Descripción
El tipo de datos de PLC "EnS_typeBufferReadStat" contiene los datos que se van a leer y la
información de estado para la lectura del bloque de datos de almacenamiento intermedio
"EnS_BufferDB (Página 197)".

A.4.3.2

Estructura EnS_typeBufferReadStat
La tabla siguiente muestra los parámetros del tipo de datos de PLC "EnS_typeBufferReadStat":
Parámetro

Tipo de datos

Ajuste predetermi‐ Descripción
nado

data

EnS_typeValue (Pági‐
na 211)

-

Datos leídos del búfer

busy

BOOL

FALSE

TRUE = procesamiento activo

done

BOOL

FALSE

TRUE = datos procesados correc‐
tamente

error

BOOL

FALSE

TRUE = error al leer

status

WORD

16#0000

Estado del búfer

statusReadFct

WORD

16#0000

Estado de "ReadFromArrayDB"

A.4.4

EnS_typeBufferWork

A.4.4.1

Descripción EnS_typeBufferWork

Descripción
El tipo de datos de PLC "EnS_typeBufferWork" contiene toda la información de control y estado
para la lectura y escritura de datos en el bloque de datos de almacenamiento intermedio
"EnS_BufferDB (Página 197)".

200

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.4 Tipos de datos definidos por el usuario (UDT)

A.4.4.2

Estructura EnS_typeBufferWork
La tabla siguiente muestra los parámetros del tipo de datos de PLC "EnS_typeBufferWork":
Parámetro

Tipo de datos

Ajuste predetermi‐ Descripción
nado

readCtrl

EnS_typeBuffe‐
rReadCtrl (Página 199)

-

Información de control del búfer
para lectura de datos

readStat

EnS_typeBufferReadS‐
tat (Página 200)

-

Datos e información de estado del
búfer para lectura de datos

writeCtrl

EnS_typeBufferWri‐
teCtrl (Página 202)

-

Información de control del búfer
para escritura de datos

writeStat

EnS_typeBufferWriteS‐
tat (Página 202)

-

Información de estado del búfer
para escritura de datos

busy

BOOL

FALSE

TRUE = procesamiento activo

done

BOOL

FALSE

TRUE = datos procesados correc‐
tamente

error

BOOL

FALSE

TRUE = error al procesar los datos

status

WORD

16#0000

Estado del búfer

maxItem

UDINT

0

Número máximo de registros del
"EnS_BufferDB"

maxItemRead

UDINT

0

Reservado

maxCycleWrite

UDINT

30

Número máximo de ciclos para es‐
cribir los datos

cycleWrite

UINT

0

Número de ciclos para escribir los
datos

noItems

UDINT

0

Número de registros escritos del
"EnS_BufferDB"

noDeletedItems

UDINT

0

Número de registros borrados del
"EnS_BufferDB" en caso de des‐
bordamiento del búfer

writeItem

DINT

0

Puntero de escritura hacia el regis‐
tro de datos

readItem

DINT

0

Puntero de lectura hacia el regis‐
tro de datos

bufferLimit

UINT

20

Límite de búfer configurable para
advertencias en [%] (rango válido
1-79). Cuando el búfer está lleno
al 80 %, de forma predeterminada
se emite un estado de error (ver
también "EnS_BufferWrite (Pági‐
na 167)").

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

201

Bloques de Energy Suite – Adquisición
A.4 Tipos de datos definidos por el usuario (UDT)

A.4.5

EnS_typeBufferWriteCtrl

A.4.5.1

Descripción EnS_typeBufferWriteCtrl

Descripción
El tipo de datos de PLC "EnS_typeBufferWriteCtrl" contiene los datos de energía periódicos
que deben escribirse en el bloque de datos de almacenamiento intermedio "EnS_BufferDB
(Página 197)", así como la información de control necesaria (p. ej. consulta) para escribir
datos.

A.4.5.2

Estructura EnS_typeBufferWriteCtrl
La tabla siguiente muestra los parámetros del tipo de datos de PLC "EnS_typeBufferWriteCtrl":
Parámetro

Tipo de datos

Ajuste predetermi‐ Descripción
nado

req

BOOL

FALSE

Petición para escribir datos en el
búfer.

data

EnS_typeValue (Pági‐
na 211)

-

Datos de energía periódicos que
se escriben en el búfer.

A.4.6

EnS_typeBufferWriteStat

A.4.6.1

Descripción EnS_typeBufferWriteStat

Descripción
El tipo de datos de PLC "EnS_typeBufferWriteStat" contiene información de estado para la
escritura de datos de energía periódicos en el bloque de datos de almacenamiento intermedio
"EnS_BufferDB (Página 197)".

A.4.6.2

Estructura EnS_typeBufferWriteStat
La tabla siguiente muestra los parámetros del tipo de datos de PLC "EnS_typeBufferWriteStat":

202

Parámetro

Tipo de datos

Ajuste predetermi‐ Descripción
nado

busy

BOOL

FALSE

TRUE = procesamiento activo

done

BOOL

FALSE

TRUE = datos procesados correc‐
tamente

error

BOOL

FALSE

TRUE = error al procesar los datos

status

WORD

16#0000

Estado del búfer

statusWriteFct

WORD

16#0000

Estado de escritura

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.4 Tipos de datos definidos por el usuario (UDT)

A.4.7

EnS_typeEnergyAdv

A.4.7.1

Descripción EnS_typeEnergyAdv

Descripción
El tipo de datos de PLC "EnS_typeEnergyAdv" contiene datos de energía avanzados que son
leídos por dispositivos de medición y se ponen a disposición de una CPU o un sistema HMI.

A.4.7.2

Estructura EnS_typeEnergyAdv
La tabla siguiente muestra los parámetros del tipo de datos de PLC "EnS_typeEnergyAdv":
Parámetro

Tipo de datos

Ajuste predetermi‐ Descripción
nado

voltage1N

REAL

0.0

Tensión actual entre fase 1 y N

voltage2N

REAL

0.0

Tensión actual entre fase 2 y N

voltage3N

REAL

0.0

Tensión actual entre fase 3 y N

voltage12

REAL

0.0

Tensión actual entre fase 1 y 2

voltage23

REAL

0.0

Tensión actual entre fase 2 y 3

voltage31

REAL

0.0

Tensión actual entre fase 3 y 1

current1

REAL

0.0

Intensidad actual en fase 1

current2

REAL

0.0

Intensidad actual en fase 2

current3

REAL

0.0

Intensidad actual en fase 3

frequency

REAL

0.0

Frecuencia actual

powerFactor1

REAL

0.0

Factor de potencia actual de la fa‐
se 1

powerFactor2

REAL

0.0

Factor de potencia actual de la fa‐
se 2

powerFactor3

REAL

0.0

Factor de potencia actual de la fa‐
se 3

totalPowerFactor

REAL

0.0

Valores de potencia total actual

appPower1

REAL

0.0

Potencia aparente actual de la fa‐
se 1

appPower2

REAL

0.0

Potencia aparente actual de la fa‐
se 2

appPower3

REAL

0.0

Potencia aparente actual de la fa‐
se 3

totalAppPower

REAL

0.0

Potencia aparente total actual

actPower1

REAL

0.0

Potencia activa actual de la fase 1

actPower2

REAL

0.0

Potencia activa actual de la fase 2

actPower3

REAL

0.0

Potencia activa actual de la fase 3

totalActPower

REAL

0.0

Potencia activa total actual

reactPower1

REAL

0.0

Potencia reactiva actual de la fase
1

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

203

Bloques de Energy Suite – Adquisición
A.4 Tipos de datos definidos por el usuario (UDT)
Parámetro

Tipo de datos

Ajuste predetermi‐ Descripción
nado

reactPower2

REAL

0.0

Potencia reactiva actual de la fase
2

reactPower3

REAL

0.0

Potencia reactiva actual de la fase
3

totalReactPower

REAL

0.0

Potencia reactiva total actual

totalAppEnergy

LREAL

0.0

Energía aparente total actual

totalActEnergy

LREAL

0.0

Energía activa total actual

totalReactEnergy

LREAL

0.0

Energía reactiva total actual

status

WORD

16#FFFF

Estado de los datos avanzados

A.4.8

EnS_typeEnergyBasic

A.4.8.1

Descripción EnS_typeEnergyBasic

Descripción
El tipo de datos de PLC "EnS_typeEnergyBasic" contiene datos de energía básicos que se
ponen a disposición de una CPU, un sistema HMI y el archivado, p. ej.:
● Consumo de energía calculado periódicamente
● Potencia media durante el período
● Valores actuales de consumo de energía y consumo de potencia

A.4.8.2

Estructura EnS_typeEnergyBasic
La tabla siguiente muestra los parámetros del tipo de datos de PLC "EnS_typeEnergyBasic":

204

Parámetro

Tipo de datos

Ajuste predetermi‐ Descripción
nado

actEnergy

REAL

0.0

Valor de energía actual

actPower

REAL

0.0

Valor de potencia actual

actEnergyCounter

LREAL

0.0

Valor de contador de energía ac‐
tual

actStatus

WORD

16#FFFF

Estado de los valores actuales

energy

REAL

0.0

Valor de energía acumulado al fi‐
nal del período de archivado

power

REAL

0.0

Valor de potencia medio al final del
período de archivado

energyCounter

LREAL

0.0

Valor de contador de energía al fi‐
nal del período de archivado

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.4 Tipos de datos definidos por el usuario (UDT)
Parámetro

Tipo de datos

Ajuste predetermi‐ Descripción
nado

status

WORD

16#FFFF

Estado de la energía acumulada y
potencia media

syncData

EnS_typeSync (Pági‐
na 210)

-

Datos de sincronización

A.4.9

EnS_typeEnergyCounter

A.4.9.1

Descripción EnS_typeEnergyCounter

Descripción
El tipo de datos de PLC "EnS_typeEnergyCounter" contiene una interfaz entre el bloque de
función de drivers para valores de contador de energía "EnS_DrvCounterLInt (Página 178)",
"EnS_DrvCounterLReal (Página 180)" y el bloque de función para el cálculo periódico de datos
de energía "EnS_CalcEnergyData (Página 170)".

A.4.9.2

Estructura EnS_typeEnergyCounter
La tabla siguiente muestra los parámetros del tipo de datos de PLC "EnS_typeEnergyCounter":
Parámetro

Tipo de datos

Ajuste predetermi‐ Descripción
nado

value

LREAL

0.0

Valor de contador de energía

normValue

LREAL

0.0

Valor de contador de energía nor‐
malizado

consumerStatus

BOOL

FALSE

Estado de consumidor: TRUE =
On, FALSE = Off

status

WORD

16#FFFF

Estado del valor de energía

A.4.10

EnS_typeEnergyMeta

A.4.10.1

Descripción EnS_typeEnergyMeta

Descripción
El tipo de datos de PLC "EnS_typeEnergyMeta" contiene información sobre el punto de
medición. La información sirve para la visualización en la CPU o en un sistema HMI.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

205

Bloques de Energy Suite – Adquisición
A.4 Tipos de datos definidos por el usuario (UDT)

A.4.10.2

Estructura EnS_typeEnergyMeta
La tabla siguiente muestra los parámetros del tipo de datos de PLC "EnS_typeEnergyMeta":

Parámetro

Tipo de datos

Ajuste pre‐
determinado

Rango

Descripción

name

STRING[32]

""

-

Nombre de adquisición de energía

HMI 1)
X

plantIdentCode STRING[128]

""

-

ID de la instalación

-

localIdentCode

""

-

Identificador de ubicación

-

STRING[128]

techUnitId

DWORD

0

0 = no configurado

ID de unidad tecnológica

-

deviceId

DWORD

0

0 = no válido

ID del dispositivo de medición

X

16#0000_0001 16#FFFF_FFFF
parentDeviceId DWORD

0

0 = no configurado

ID del dispositivo de medición de nivel su‐
perior (relación jerárquica)

X

id

ARRAY[0..9] of
HW_IO

0

0 = no configurado

ID de hardware del dispositivo de medi‐
ción en la configuración hardware

-

systemParam

ARRAY[0..6] of
LREAL

0

-

Parámetros del sistema de uso interno

-

connectionTy‐
pe2)

USINT

0

0-16 (ver 2))

Tipo de conexión del dispositivo de medi‐
ción

-

inputType

USINT

0

0 = no válido

Tipo de señal de entrada

X

Configuración del sentido de flujo de la
energía

X

Error de transformación del transformador
de tensión en [%]

-

Error de conversión del transformador de
corriente momentáneo en \ [%]

-

Error de medición del dispositivo de medi‐
ción en [%]

-

Factor de error adicional en [%]

-

1 = señal de impulso
2 = valor de conta‐
dor de energía
3 = valor de potencia
4 = valor de conta‐
dor de energía y va‐
lor de potencia
mode

USINT

0

0 = no válido
1 = consumidor
2 = generador

accuracyVolt‐
Conv

REAL

0.0

0.0 = ajuste de pre‐
cisión desactivado
Rango válido: 0.0 100.0

accuracyCurr‐
Conv

REAL

0.0

0.0 = ajuste de pre‐
cisión desactivado
Rango válido: 0.0 100.0

accuracyDevi‐
ce

REAL

0.0

0.0 = ajuste de pre‐
cisión desactivado
Rango válido: 0.0 100.0

accuracyAdd

REAL

0.0

0.0 = ajuste de pre‐
cisión desactivado
Rango válido: 0.0 100.0

206

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.4 Tipos de datos definidos por el usuario (UDT)
Parámetro

Tipo de datos

Ajuste pre‐
determinado

Rango

Descripción

HMI 1)

correctionFac‐
tor

REAL

0.0

0.0 = no válido

Factor de corrección

-

syncPeriod

REAL

Rango válido:
0.001-1d
900.0

60.0 - 86400.0 ( =
1min -1d)

Periodo de archivado en [s]

X

overflowCntVa‐ LREAL
lue

0.0

1.0 - 1.0e+21

Valor de desbordamiento del contador

X

normFactorIn

1.0

0.0 - 9999999.0

Factor de escala para valores de entrada
(el mismo factor de escala que para valo‐
res de energía y potencia)

X

0.001

0.0 - 9999999.0

Factor de escala para valores de salida

X

REAL

normFactorOut REAL

(0.001 = salida co‐
rresponde a kWh)
zeroCut

REAL

0.1

0.0 - 3.402823e+38

Valor límite para punto cero en el cálculo
del consumo de energía

X

baseAcqTime

REAL

10.0

0.0 - 3600.0 (1 h)

Intervalo de cálculo para el valor momen‐
táneo de consumo de potencia en [s]

X

Ampliación dinámica del intervalo de cál‐
culo para el valor momentáneo de consu‐
mo de potencia en [s]

X

El estado del consumidor/generador es
activo

-

Ver
también EnS_Cal‐
cEnergyData (Pági‐
na 170)
addAcqTime

REAL

10.0

0.0 - 3600.0 (=1h)
Ver
también EnS_Cal‐
cEnergyData (Pági‐
na 170)

consumerSta‐
tusEnable

BOOL

FALSE

coordinationE‐
nable

BOOL

FALSE

-

TRUE = la coordinación para los servicios
de comunicación acíclicos está activada

-

cyclicRd

BOOL

FALSE

-

TRUE = la lectura cíclica de los datos de
energía acíclicos está activada

-

cyclicTime

REAL

60.0

0.0 - 3600.0 (1 h)

Periodo de la lectura cíclica de los datos
de energía acíclicos en [s]

-

unitActEnergy3) UINT

0

ver 3)

Unidad de la energía activa

-

unitActPower

UINT

0

ver

3)

Unidad de la potencia activa

-

UINT

0

ver

3)

Unidad de la energía aparente

-

unitAppPower3) UINT

0

ver 3)

Unidad de la potencia aparente

-

unitReactE‐
nergy3)

UINT

0

ver

Unidad de la energía reactiva

-

unitReactPo‐
wer3)

UINT

0

ver 3)

Unidad de la potencia reactiva

-

unitPowerFac‐
tor3)

UINT

0

ver 3)

Unidad del factor de potencia

-

unitCurrent3)

UINT

0

ver 3)

Unidad de la intensidad

-

unitVoltage

UINT

0

ver 3)

Unidad de la tensión

-

3)

unitAppE‐
nergy3)

3)

TRUE = on
FALSE = off

3)

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

207

Bloques de Energy Suite – Adquisición
A.4 Tipos de datos definidos por el usuario (UDT)
Parámetro

Tipo de datos

Ajuste pre‐
determinado

Rango

Descripción

HMI 1)

unitFrequency3) UINT

0

ver 3)

Unidad de la frecuencia

-

unitAmpUnbal‐
Current3)

UINT

0

ver

3)

Unidad de la simetría de amplitud de la
intensidad

-

unitAmpUnbal‐
Voltage3)

UINT

0

ver 3)

Unidad de la simetría de amplitud de la
tensión

-

unitAddValue3)

ARRAY[0..19]

0

ver 3)

Reservado

-

typeAddValue

ARRAY[0..19]

0

0-16 (ver InputType) Reservado

-

archiveEnergy

BOOL

FALSE

-

-

FALSE = el archivado del valor de energía
está desactivado
TRUE = el archivado del valor de energía
está activado

archivePower

BOOL

FALSE

-

FALSE = el archivado del valor de poten‐
cia está desactivado

-

TRUE = el archivado del valor de potencia
está activado
archiveEnergy‐ BOOL
Counter

FALSE

-

FALSE = el archivado del valor de conta‐
dor de energía está desactivado

-

TRUE = el archivado del valor de contador
de energía está activado
archiveAddVa‐
lue

ARRAY[0..19]

0

-

Reservado

-

A los parámetros seleccionados se les asigna el atributo de sistema "Disponible para HMI"
y "Visible en HMI". Se utilizarán para las funciones de manejo y visualización en el dispositivo
HMI; por ejemplo, para mostrar el valor de intensidad de un faceplate.
1)

2)

Enumeración para el tipo de conexión del dispositivo de medición (Página 212).

3)

Enumeración para unidades (Página 212)

Consulte también
Parámetro Status (Página 169)

A.4.11

EnS_typeHMIWriteCtrl

A.4.11.1

Descripción EnS_typeHMIWriteCtrl
El tipo de datos de PLC EnS_typeHMIWriteCtrl contiene información de control para la
escritura de los datos de energía en el sistema SCADA.

208

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.4 Tipos de datos definidos por el usuario (UDT)

A.4.11.2

Estructura EnS_typeHMIWriteCtrl
La tabla siguiente muestra los parámetros del tipo de datos de PLC "EnS_typeHMIWriteCtrl":
Parámetro

Tipo de datos

Ajuste prede‐
terminado

Descripción

HMI
*

req

BOOL

FALSE

Petición de escritura de los da‐
tos de energía en el sistema
SCADA

X

maxItem

UDINT

0

Número máximo de registros en
el búfer

X

noItems

UDINT

0

Número de registros escritos en
el sistema SCADA

X

noDeletedItems

UDINT

0

Número de registros borrados
en caso de desbordamiento del
búfer

X

writeItems

DINT

0

Puntero de escritura hacia el re‐
gistro del búfer

X

readItems

DINT

0

Puntero de lectura hacia el re‐
gistro del búfer

X

watchdog

UINT

0

Contador watchdog

X

* Los parámetros marcados tienen asignados los parámetros de sistema "Accesible para HMI"
y "Visible para HMI". Los parámetros se utilizan para el intercambio con el componente SCADA
de Energy Suite.

A.4.12

EnS_typeHMIWriteStat

A.4.12.1

Descripción EnS_typeHMIWriteStat
El tipo de datos de PLC EnS_typeHMIWriteStat contiene información de estado para la
escritura de los datos de energía en el fichero de variables del sistema SCADA.

A.4.12.2

Estructura EnS_typeHMIWriteStat
La tabla siguiente muestra los parámetros del tipo de datos de PLC "EnS_typeHMIWriteStat":
Parámetro

Tipo de datos

Ajuste prede‐
terminado

Descripción

busy

BOOL

FALSE

TRUE = script WinCC: procesa‐
miento en curso

X

done

BOOL

FALSE

TRUE = los datos de energía se
han escrito correctamente en el
sistema SCADA

X

error

BOOL

FALSE

TRUE = ha ocurrido un error al
escribir los datos de energía

X

status

WORD

16#0000

Estado del script WinCC

X

noItems

UDINT

0

Número de registros escritos

X

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

HMI
*

209

Bloques de Energy Suite – Adquisición
A.4 Tipos de datos definidos por el usuario (UDT)
Parámetro

Tipo de datos

Ajuste prede‐
terminado

Descripción

HMI
*

readItem

DINT

0

Puntero de lectura hacia el re‐
gistro del búfer

X

writeHMIItem

DINT

0

Puntero de escritura hacia el re‐
gistro del archivo de variables

X

watchdog

UINT

0

Contador watchdog

X

* Los parámetros marcados tienen asignados los parámetros de sistema "Accesible para HMI"
y "Visible para HMI". Los parámetros se utilizan para el intercambio con el componente SCADA
de Energy Suite.

A.4.13

EnS_typeOrgData

A.4.13.1

Descripción EnS_typeOrgData

Descripción
El tipo de datos de PLC "EnS_typeOrgData" contiene datos y ajustes de nivel superior a los que
acceden todos los bloques. De este modo la información puede reenviarse a los bloques desde
un nivel superior, p. ej., bloqueo de avisos.

A.4.13.2

Estructura EnS_typeOrgData
La tabla siguiente muestra los parámetros del tipo de datos de PLC "EnS_typeOrgData":
Parámetro

Tipo de datos

Ajuste predetermi‐ Descripción
nado

startup

BOOL

TRUE

TRUE = el arranque está activo

messageSuppress BOOL

FALSE

TRUE = inhibición de avisos

currTimeStamp

-

Sello de tiempo actual (formato
UTC)

DT

A.4.14

EnS_typeSync

A.4.14.1

Descripción EnS_typeSync

Descripción
El tipo de datos de PLC "EnS_typeSync" contiene toda la información sobre el período de
archivado, incluido el impulso de sincronización.

210

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.4 Tipos de datos definidos por el usuario (UDT)

A.4.14.2

Estructura EnS_typeSync
La tabla siguiente muestra los parámetros del tipo de datos de PLC "EnS_typeSync":
Parámetro

Tipo de datos

Ajuste prede‐
terminado

Descripción

HMI
*

syncPeriod

REAL

900.0

Período de archivado en [s]

X

syncTime

REAL

0.0

Tiempo restante del período de
archivado en [s]

X

syncPulse

BOOL

FALSE

Impulso de sincronización

-

syncTimeStamp

DT

DT#1990-01-0
1-00:00:00.0

Sello de tiempo del impulso de
sincronización

X

error

BOOL

FALSE

1 = error

-

status

WORD

16#0000

Información de estado de error

-

* Los parámetros marcados tienen asignados los parámetros de sistema "Accesible para HMI"
y "Visible para HMI". Pueden utilizarse para la función de manejo y visualización en la HMI.

A.4.15

EnS_typeValue

A.4.15.1

Descripción EnS_typeValue

Descripción
El tipo de datos de PLC "EnS_typeValue" contiene toda la información sobre datos de energía
adquiridos periódicamente que deben archivarse, p. ej., en el fichero de variables. El bloque de
datos global "EnS_BufferDB (Página 197)" consiste en un ARRAY del tipo de datos de PLC
"EnS_typeValue".

A.4.15.2

Estructura EnS_typeValue
La tabla siguiente muestra los parámetros del tipo de datos de PLC "EnS_typeValue":
Parámetro

Tipo de datos

Ajuste prede‐
terminado

Descripción

HMI
*

tagname

STRING[48]

""

Nombre de variable

X

value

LREAL

0.0

Valor de energía periódico

X

timeStamp

Date_And_Time

DT#1990-01-0
1-00:00:00.0

Sello de tiempo del valor de
energía periódico

X

status

WORD

16#0000

Estado del valor de energía pe‐
riódico

X

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

211

Bloques de Energy Suite – Adquisición
A.5 Definición de las enumeraciones

A.5

Definición de las enumeraciones

A.5.1

Enumeración para el tipo de conexión del medidor
La tabla siguiente muestra la enumeración para el tipo de conexión del medidor:

A.5.2

Número

Tipo de conexión

0

No definido

1

1 fase

2

1 fase - 3 fases (simétrico)

3

3 fases (simétrico)

4

3 fases + N (asimétrico) sin transformador de tensión/con 3 transformadores de
corriente 3P4W

5

3 fases + N (asimétrico) con transformador de tensión/con 3 transformadores de
corriente 3P4W

6

3 fases + N (simétrico) sin transformador de tensión/con 1 transformador de co‐
rriente 3P4WB

7

3 fases + N (simétrico) con transformador de tensión/con 1 transformador de co‐
rriente 3P4WB

8

3 fases (asimétrico) sin transformador de tensión/con 3 transformadores de co‐
rriente 3P3W

9

3 fases (asimétrico) con transformador de tensión/con 3 transformadores de co‐
rriente 3P3W

10

3 fases (asimétrico) sin transformador de tensión/con 3 transformadores de co‐
rriente 3P3W

11

3 fases (asimétrico) con transformador de tensión/con 2 transformadores de co‐
rriente 3P3W

12

3 fases (simétrico) sin transformador de tensión/con 1 transformador de corriente
3P3WB

13

3 fases (simétrico) con transformador de tensión/con 1 transformador de corriente
3P3WB

14

2 fases + N (asimétrico) sin transformador de tensión/con 2 transformadores de
corriente 3P4W

15

1 fase + N sin transformador de tensión/con 1 transformador de corriente 1P2W

16

3 fases + N (asimétrico) con transformador de tensión/con 3 transformadores de
corriente 3P3W

Enumeración para unidades
La tabla siguiente muestra la enumeración para las unidades:
Número

Unidad

Unidades eléctricas

212

0

No definido

1209

A

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite – Adquisición
A.5 Definición de las enumeraciones
Número

Unidad

1210

kA

1240

V

1242

kV

1241

MV

1186

W

1190

kW

1189

MW

1188

GW

1175

Wh

1179

kWh

1178

MWh

1177

GWh

1342

%

1077

Hz

Unidades no eléctricas
1034

m³

1573

Nm³

1038

l

1041

hl

1088

kg

1092

t

32800

pcs

1598

m³/h

1590

Nm³/h

1353

l/h

1635

hl/h

1324

kg/h

1328

t/h

32801

pcs/h

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

213

Bloques de Energy Suite – Adquisición
A.5 Definición de las enumeraciones

214

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.1

B

Sinopsis de los bloques de Energy Suite para la gestión de cargas

Funcionamiento de los bloques de Energy Suite para la gestión de cargas
El programa de la gestión de cargas tiene un diseño modular, de modo que cada función puede
conectarse o desconectarse y administrarse por separado.
No obstante, hay una serie de funcionalidades imprescindibles para el funcionamiento básico
de la gestión de cargas.
● El conjunto básico de funciones consta de un bloque de previsión, bloque de control, bloque
de actuadores y un bloque de copia de seguridad/restauración.
● Dos bloques de datos se guardan en el sistema de memoria central, el DB
LmgtGeneralData para datos generales y el DB ActorList para los datos relevantes para los
actuadores.
El bloque de previsión obtiene sus datos de entrada de un objeto de adquisición de una
alimentación que no forma parte de la gestión de cargas sino que procede de Energy Suite.
La figura siguiente muestra el funcionamiento de los bloques de Energy Suite para la gestión
de cargas:

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

215

Bloques de Energy Suite - Gestión de cargas
B.1 Sinopsis de los bloques de Energy Suite para la gestión de cargas

'%SDUD
FRQIDFWXDGRU
SULRULGDG
57
'DWRVGHDFWXDGRU

'DWRVGHDFWXDGRU

&RQIYDORUO¯PLWH
8VXDULR5XQWLPH
3UHYHQHUJ¯D

%ORTXHGHFRSLD
GHVHJXULGDG
UHVWDXUDFLµQ

5HTXHVWGDWRV
SHWLFLµQ
3HWLFLRQHVGDWRV
SHWLFLµQ
'DWRV
2UJ

'%SDUD
DOPDFHQD
PLHQWRGH
GDWRV
FHQWUDOL]DGR

'DWRV
2UJ

&RQWDGRUGH
HQHUJ¯D

DFWXDOL]DFLµQGH
ORVYDORUHVDO
PHQRVFDGD
VHJXQGR

%ORTXHGHSUHYLVLµQ
(QHUJ¯D%DVLF
(QHUJ¯D0HWD

7DVNSLOD
SHWL
FLRQHV

%ORTXHGHDFWXDGRUHV

'DWRV
2UJ
3UHYLVLµQ
HQHUJ¯D

2EMHWRGHHQHUJ¯D
9DORU
PRPHQW£QHR 7LSRFRQWDGRUHQHUJ¯D
9DORUPRPHQW

5HTXHVW
SLOD
SHWL
FLRQHV

&RQIYDORU
O¯PLWH
8VXDULR
5XQWLPH
5HTXHVWSLOD
SHWLFLRQHV
7DVNSLOD
SHWLFLRQHV

%ORTXHGHFRQWURO

3UHYHQHUJ¯D
'DWRV
2UJ

(QHUJ¯D0HWD%DVLF

)OXMRGHGDWRVGHHQHUJ¯D
'DWRVGHSDUDPHWUL]DFLµQ

Bloques de función
Nombre

Función

EnS_LmgtForecast_x (Página 218)

Funcionalidad de previsión para los datos de energía de la alimentación.

EnS_LmgtControl_Peak (Pági‐
na 219)

Lógica de control para la gestión de cargas de pico. Cálculo y evaluación de valores
límite. Datos de manejo de órdenes para actuadores.

216

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.1 Sinopsis de los bloques de Energy Suite para la gestión de cargas
Nombre

Función

EnS_LmgtActor_x (Página 226)

Funcionalidad de respuesta, estado y control.

EnS_LmgtBackupRestore (Pági‐
na 242)

Generación de informes de violaciones de límites y operaciones de conmutación. Fun‐
cionalidad de copia de seguridad/restauración para datos de configuración.

Bloques de datos
Nombre

Función

EnS_LmgtGeneralData (Pági‐
na 247)

Memoria de datos central para parámetros, estado, datos de orden e información de
control de la gestión de cargas

EnS_LmgtActorList (Página 248)

Parámetros, datos de configuración y lista de prioridad de los actuadores

Tipos de datos definidos por el usuario
Nombre

Función

EnS_typeActorElement (Página 248)

Estructura de datos para un actuador

EnS_typeLmgtActorMeta (Página 249)

Metadatos del actuador

EnS_typeLmgtActorParameter (Página 250)

Parámetros del actuador

EnS_typeLmgtActorParameterSet (Página 251)

Juego de parámetros para un actuador

EnS_typeLmgtActorStatus (Página 251)

Información de estado y valores reales del actuador

EnS_typeLmgtActorStatusInOut (Página 252)

Valores de respuesta y control del actuador

EnS_typeLmgtAlarmElement (Página 253)

Datos de alarma y aviso

EnS_typeLmgtControlLimitConfig (Página 254)

Configuración de valores límite de las funciones básicas de la ges‐
tión de cargas

EnS_typeLmgtControlParameters (Página 255)

Datos de parámetros de control

EnS_typeLmgtControlParameterSet (Página 255)

Juego de parámetros de control

EnS_typeLmgtControlTimeConfig (Página 256)

Configuración horaria de las funciones básicas de la gestión de
cargas

EnS_typeLmgtForecastValues (Página 257)

Datos de previsión de energía para la gestión de cargas

EnS_typeLmgtGeneralData (Página 257)

Datos generales

EnS_typeLmgtJobFeedbackElement (Página 258)

Datos de respuesta de orden de un actuador

EnS_typeLmgtJobRequestElement (Página 259)

Datos de Request de orden a actuadores

EnS_typeLmgtJobRequestStack (Página 260)

Datos de la pila de Request

EnS_typeLmgtJobTaskElement (Página 260)

Datos de Task para actuadores

EnS_typeLmgtJobTaskStack (Página 261)

Datos de la pila de Task

EnS_typeLmgtOrganisation (Página 262)

Datos relevantes de los periodos para la gestión de cargas

EnS_typeLmgtTriggerBR (Página 262)

Información de disparo para el bloque de copia de seguridad/
restauración

EnS_typeLmgtVisualization (Página 263)

Datos para la visualización

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

217

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función

Consulte también
Bloques de función (Página 218)
Bloques de datos (Página 247)
Tipos de datos definidos por el usuario (UDT) (Página 248)

B.2

Bloques de función

B.2.1

EnS_LmgtForecast_x

B.2.1.1

Descripción de EnS_LmgtForecast_x

Descripción
El bloque de función EnS_LmgtForecast_x calcula la previsión para el valor de potencia y
energía promedio al final del periodo de la alimentación, y esta previsión se utiliza como base
para la gestión de cargas.
Para la previsión, deben implementarse distintos algoritmos que el usuario puede elegir para
optimizar la precisión de la gestión de carga y, de esta forma, minimizar el número de acciones
de conmutación durante el periodo en el menor tiempo posible y lograr la máxima precisión en
la precisión. Por cada algoritmo debe implementarse un FB unívoco; "x" se utiliza como
comodín en la abreviatura del algoritmo que se utiliza en el FB.

Algoritmos de previsión
Ampliación de la previsión

Descripción (algoritmo)

LinExt

Extrapolación lineal

Extrapolación lineal
Los valores de energía y potencia medios se calculan mediante una extrapolación.

Regresión cuadrática
TBD (V16)

Arranque
El bloque no tiene comportamiento en arranque.
La previsión solo puede calcularse cuando el periodo de sincronización ya es actual y válido.
Esto sucede al evaluar el estado del objeto de adquisición (EnO) Entrada de alimentación.

218

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función

Comportamiento en caso de error
Si ocurre un error, se activa el parámetro de salida "error". El parámetro "status (Página 219)"
contiene información adicional sobre el error.

B.2.1.2

Parámetro EnS_LmgtForecast_x
La tabla siguiente muestra los parámetros del bloque de función "EnS_LmgtForecast_x":

Parámetro

Decla‐
ración

Tipo de datos

infeedEnergyBasic

I

"EnS_typeEnergyBasic"

Estructura de energía básica del objeto de adqui‐
sición de la alimentación

infeedEnergyMeta

I

"EnS_typeEnergyMeta"

Metaestructura de energía del objeto de adquisi‐
ción de la alimentación

error

O

Bool

False

TRUE: el flanco ascendente informa de que se ha
producido un error durante la ejecución del FB

status

O

Word

16#0

Estado actual del FB

forecastValues

IO

"EnX
_typeLmgtForecastValues"

B.2.1.3

Ajuste
Descripción
prede‐
termina‐
do

Estructura con los valores de previsión

Parámetro status
La tabla siguiente muestra los códigos de error que se emiten en el parámetro de salida
"status" cuando se producen errores:

Código de error
(W#16#...)

Descripción

0000

Valor del estado Done

8004

Estado de error para variables de entrada incorrectas

B.2.2

EnS_LmgtControl_Peak

B.2.2.1

Descripción del bloque EnS_LmgtControl_Peak

Descripción
El bloque de función EnS_LmgtControl_Peak contiene la funcionalidad esencial de la gestión
de cargas.
Se encarga de vigilar la previsión de los valores de energía y potencia ante violaciones de
límites con el fin de determinar la escalada/desescalada de los actuadores. De esta forma se
garantiza que la demanda de potencia real permanezca por debajo del valor límite establecido.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

219

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función
Los datos de previsión se envían desde EnS_LmgtForecast_x y están disponibles en la
estructura "EnS_LmgtData.energyForecast".
El bloque de control de la gestión de cargas detecta la demanda de potencia que debe
escalarse para evitar la violaciones de límites, o la potencia que puede desescalarse hasta
alcanzar el límite de potencia actual.
Una escalada puede conducir a una separación de un actuador para reducir la demanda de
potencia o la conexión de generadores para suministrar más potencia al sistema.
Una desescalada implica que pueden conectarse más consumidores o desconectarse
generadores de la red, para aprovechar la energía sobrante hasta alcanzar el límite de
potencia actual.
La decisión de cuáles son los actuadores que se activan o se desactivan se basa en cada
instancia individual de EnS_LmgtActor_x, la cual depende del estado real, la prioridad y los
ajustes de parámetros.

Modo de configuración
El bloque de control de la gestión de cargas dispone de dos juegos de datos de configuración,
"dynamicParameters" y "permanentParameters".
El parámetro de entrada "parameterMode" establece qué parámetros deben emplearse para
la gestión de cargas.
● Configuración del usuario: parameterSet = "0"
→ permanentParameters se utiliza como juego de configuración actual
● Configuración de Runtime: parameterSet = "1"
→ dynamicParameters se utiliza como juego de configuración actual

Potencia diferencial/energía disponible hasta el final del periodo
La gestión de cargas calcula la potencia y energía diferenciales actuales que están disponibles
hasta el final del periodo, de acuerdo con los valores de energía/potencia previstos y la
duración del periodo restante.
La potencia diferencial se determina a partir de la potencia media prevista y el límite de
potencia. El límite de potencia activa se determina según un valor porcentual de un límite de
potencia absoluto, para asegurar una laguna de seguridad.
● Potencia diferencial:
Potencia disponible = límite de potencia – potencia media prevista
La energía disponible se determina a partir de la previsión de la suma de energía hasta el final
del periodo y el límite de energía. El límite de energía activa se determina según un valor
porcentual de un límite de energía absoluto, para asegurar una laguna de seguridad.
● Energía disponible:
Energía disponible = (límite de energía * porcentaje límite) – previsión de energía.

220

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función

P
[kW]

/¯PLWHGHSRWHQFLD
3RWHQFLDGLIHUHQFLDO
3UHYLVLµQGHSRWHQFLD

W
[kWh]
/¯PLWHGHHQHUJ¯D
(QHUJ¯DGLVSRQLEOH
3UHYLVLµQGHHQHUJ¯Dū
(QHUJ¯DFRQVXPLGD
WDFW


WDFW



Vigilancia de límites
Se vigilan los límites de energía configurados (advertencia, alarma y violación de límites) del
valor de previsión.
El límite de potencia configurado por el usuario se transforma en un límite de rendimiento
energético interno:
● La advertencia de valor límite se activa cuando se alcanza el límite de advertencia amarillo.
● La alarma de valor límite se activa cuando se alcanza el límite de alarma rojo.
Cuando se viola la previsión del valor límite (ver valor de pico) la gestión de cargas comienza
la escalada de los actuadores para disminuir el consumo de corriente (o aumentar la
generación de corriente), a fin de evitar una violación de límites al final del periodo.
El valor límite (línea roja discontinua) puede reducirse con un valor porcentual (línea negra
discontinua) (limitPercentage) como valor umbral. Este valor se utiliza como valor límite activo
para la escalada y la desescalada.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

221

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función

P
[MW]
Límite de
potencia

8,0

7,4

Alarma Límite de
Advertencia

escalada
(% del límite de
potencia)

6,0

4,0

2,0

ahora

07:15

07:30

Duración del retardo de inhibición
La vigilancia de límites se desactiva desde el inicio del periodo hasta el final de la duración del
retardo de inhibición.
Ninguna desescalada
Escalada
100 %

Duración del
retardo
de inhibición
07:00

07:04

07:15

Tolerancia de límites
Al comienzo del periodo, la precisión de los valores de previsión que se determinan puede ser
muy inexacta y provocar frecuentes e innecesarias conmutaciones de actuadores.
Para evitar o mejorar este comportamiento, el valor límite puede aumentarse mediante el
parámetro "limitToleranceStartValue" durante un tiempo determinado
"limitToleranceDuration".

222

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función
La duración de la tolerancia de límites comienza tras la duración del retardo de inhibición.
● limitToleranceStartValue:
Valor inicial de la tolerancia de límites en porcentaje (un 200 % significa el doble del valor
límite para comenzar).
El valor límite activo (limitConfig.avgPower) de la gestión de cargas se ajusta a este valor
al final de la duración del retardo de inhibición (comienzo de la vigilancia de límites y de la
deceleración de rampa lineal).
● limitToleranceDuration:
Duración de la tolerancia de límites
En el tiempo configurado se produce una deceleración de rampa del valor límite activo de
la gestión de cargas desde el límite inicial hasta límite del periodo, de modo que se alcance
el valor límite cuando transcurra el tiempo de la tolerancia de límites.

Tolerancia de
límites
Valor inicial

160 %

100 %

Duración del retardo
Duración
de inhibición
tolerancia límites

07:00

07:04

07:15

Escalada
Cuando la previsión de energía supera el valor límite del periodo, la gestión de cargas
determina la potencia necesaria que (en el caso de un generador) debe desconectarse o
conectarse, para quedar por debajo del valor límite.
El bloque de control de la gestión de cargas envía una Request de petición con la energía
(delta) de escalada.
● Consumidor de energía: desconectado
● Generador de energía: conectado

Desescalada
Cuando la previsión de energía no alcanza el valor límite configurado para el periodo, la
gestión de cargas determina la potencia diferencial que puede conectarse para acercarla al
valor límite.
El bloque de control de la gestión de cargas envía una Request de petición con la energía
(delta) de desescalada.
● Consumidor de energía: conectado
● Generador de energía: desconectado

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

223

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función

Tiempo de estabilización
Tras la operación de conmutación (el envío de una petición de escalada o desescalada), se
pasará a la siguiente petición una vez que transcurra el tiempo de estabilización.
El objetivo de este lapso es que el sistema tenga tiempo de reaccionar a la petición. Si aún
existe la demanda tras el retardo de estabilización, se envía una nueva petición con la
demanda actualizada.

El actuador se
ha conectado

Retardo de repercusión en
función de los actuadores

100 %

Tiempo de
retardo de estabilización
07:05:10

07:05:20

07:05:30

07:05:40

Violación de límites
Cuando se produce una violación de límites al final del periodo (es decir, no se pueden
desactivar los actuadores), se dispara la generación de informes de datos de Runtime y
configuración.
Los datos de gestión de cargas y la configuración de los actuadores se copian a un archivo en
la tarjeta SD del PLC.
Puede ver información relacionada en el bloque de función EnS_LmgtBackupRestore, que
también abarca la funcionalidad de generación de informes.

Arranque
Tras el rearranque del PLC, se inicializa la gestión de cargas y se mantiene hasta el inicio del
siguiente periodo de sincronización. Además, hay datos de alimentación válidos disponibles;
es decir, no se realiza ni una escalada ni una desescalada.
Solo se puede generar una escalada o desescalada una vez transcurrido el retardo de
sincronización.
Se restablecen los avisos de alarma.
Se determinan en este momento los valores de potencia y energía disponibles.

Comportamiento en caso de error
Si ocurre un error, se activa el parámetro de salida "error". El parámetro "status (Página 225)"
contiene información adicional sobre el error.

224

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función

B.2.2.2

Parámetro EnS_LmgtControl_Peak
La tabla siguiente muestra los parámetros del bloque de función "EnS_LmgtControl_Peak":

Parámetro

Decla‐ Tipo de datos
ración

Ajuste
predeter‐
minado

Descripción

enableLmgt

I

Bool

FALSE

Estado de la gestión de cargas; FALSE: inactiva;
TRUE: activa

infeedEnergyBa‐
sic

I

"EnS_typeEnergyBasic"

Estructura de energía básica del objeto de adquisición
de la alimentación

infeedEnergyMe‐
ta

I

"EnS_typeEnergyMeta"

Metaestructura de energía del objeto de adquisición de
la alimentación

error

O

Bool

FALSE

TRUE: el flanco ascendente informa de que se ha pro‐
ducido un error durante la ejecución del FB

status

O

Word

16#0000

Estado actual del FB

lmgtData

IO

"EnS_typeLmgtGeneral‐
Data"

B.2.2.3

Todos los datos relevantes de la gestión de cargas
configurada

Parámetro status
La tabla siguiente muestra los códigos de error que se emiten en el parámetro de salida
"status" cuando se producen errores:

Código de error

Descripción

(W#16#...)
0000

Valor de estado para DONE

7000

Sin errores

8001

El control no se llama en un OB de alarma cíclica

8002

Intervalo de OB incorrecto

8200

Parámetro "Mode" no válido

8201

Error en el parámetro de límite de los parámetros dinámicos (valor de potencia >= 0; valor porcentual >=
0 y < 100)

8202

Error en el parámetro de tiempo de los parámetros dinámicos (LimitToleranceStartValue >= 0; valores de
tiempo >= 0 y < snycPeriod)

8203

Error en el parámetro de límite de los parámetros permanentes (valor de potencia >= 0; valor porcentual
>= 0 y < 100)

8204

Error en el parámetro de tiempo de los parámetros permanentes (LimitToleranceStartValue >= 0; valores
de tiempo >= 0 y < snycPeriod)

8400

Error en un estado de EnO interno

8401

Error en la previsión

9000

Sistema de gestión de cargas no habilitado

9001

Se ha producido una violación de límites

9002

Se ha producido un error por ausencia de actuadores

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

225

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función

Avisos
Los avisos se implementan mediante la instrucción "Program_Alarm". Los distintos avisos, que
representan una multiinstancia del bloque Programm_Alarm, se encuentran en las variables
estáticas.
ID de aviso

Texto de aviso

Categoría

8001

El FB se llama en un OB incorrecto. Debe ser un OB de alarma cíclica.

0

8002

El OB de alarma cíclica que llama el FB tiene un tiempo de ciclo superior a 1 segundo. 0

8200

Valor no válido (>1) del parámetro "parameterSet" en los juegos de parámetros.

0

8201

Valor no válido para al menos un parámetro de límite en el juego de parámetros
dinámicos.

0

8202

Valor no válido para al menos un parámetro de tiempo en el juego de parámetros
dinámicos.

0

8203

Valor no válido para al menos un parámetro de límite en el juego de parámetros
permanentes.

0

8204

Valor no válido para al menos un parámetro de tiempo en el juego de parámetros
permanentes.

0

8400

Error en el objeto de adquisición de la alimentación.

0

8401

Valores de previsión no válidos.

0

9000

Gestión de cargas de pico desactivada.

0

9001

Se ha superado el límite de potencia medio.

0

9002

No hay actuadores disponibles para la escalada.

0

9003

Se ha alcanzado el umbral de advertencia para la potencia media.

0

9004

Se ha alcanzado el umbral de alarma para la potencia media.

0

B.2.3

EnS_LmgtActor_x

B.2.3.1

Descripción de EnS_LmgtActor_x

Descripción
El bloque de función EnS_LmgtActor_x contiene la funcionalidad de un actuador para la
evaluación del estado, la respuesta y la lógica de control en relación con los datos de órdenes,
que suministra EnS_LmgtControl_x de acuerdo con la energía delta. Esta es necesaria para
mantenerse por debajo del valor límite hasta el final del periodo.
Para el actuador deben implementarse distintos tipos, según el tipo de actuador del que se
trate.
Por cada tipo debe implementarse un FB unívoco; "x" se utiliza como comodín para el tipo de
actuador.

226

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función

Tipos de actuador
Tipo de ac‐
tuador

Descripción

Consumidor

Consume potencia/energía en estado conectado, habilita potencia en la escalada

Generador

Genera potencia/energía en estado conectado, suministra potencia en la escalada

Modo de configuración
El bloque de actuadores de la gestión de cargas dispone de dos juegos de datos de
configuración, "dynamicParameters" y "permanentParameters".
El parámetro de entrada "parameterSet" establece qué parámetros deben emplearse para la
gestión de cargas.
● Configuración del usuario: parameterSet = "0"
→ permanentParameters se utiliza como juego de configuración actual
● Configuración de Runtime: parameterSet = "1"
→ dynamicParameters se utiliza como juego de configuración actual
El usuario solo debería modificar directamente el juego de parámetros dinámicos. Si el usuario
desea modificar los ajustes del juego de parámetros permanentes, es posible copiar el juego
de parámetros dinámicos con el indicador "copyParameter" al juego de parámetros
permanentes.
Nota
La copia de los datos se realiza únicamente cuando el actuador está desescalado (estado de
desconexión del actuador).

Lista de prioridad
La lista de prioridad contiene información sobre la secuencia en la que deben escalarse y
desescalarse los actuadores. La secuencia de los actuadores se determina durante Runtime
y puede modificarse en cualquier momento, siempre que el actuador esté desescalado. La
acción tiene lugar inmediatamente.

Prioridad
Los actuadores se conectan en una secuencia que se especifica en la lista de prioridad.
● No se admite la prioridad "0".
● La prioridad "1" es la máxima prioridad (prioridad más baja desde la perspectiva del
proceso)
El orden de prioridad para la escalada es ascendente (1, 2, 3...), de modo que los actuadores
con un número de prioridad más bajo (p. ej., 1) se escalan antes que los actuadores con
números más altos y, por tanto, se escalan más frecuentemente.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

227

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función
El orden de prioridad para la desescalada es descendente (3, 2, 1...), de modo que los
actuadores con un número de prioridad más alto (p. ej., 10) se desescalan antes que los
actuadores con números más altos (ya que son más relevantes para el proceso).
Nota
En cada momento dado se escala un solo actuador/un grupo con la prioridad actual. Una vez
que se ha conectado un actuador (prioridad), el programa prosigue con la siguiente prioridad
de la lista de prioridad (los actuadores de un Rolling Sequence Identifier (Rolling ID) se escalan
simultáneamente dentro de una secuencia de Rolling –> varios actuadores pueden tener la
misma prioridad y Rolling ID).

Grupos de prioridad
Los actuadores con la misma prioridad (Priority) y el mismo Rolling Sequence Identifier (Rolling
ID) pertenecen a un grupo de prioridad y se conectan siempre al mismo tiempo (en el mismo
ciclo).

Secuencia de Rolling
Los actuadores con la misma prioridad (Priority) y distinto Rolling Sequence Identifier (Rolling
ID) pertenecen a una secuencia de Rolling. Los actuadores se desconectan alternativamente,
mientras que los actuadores con el mismo Rolling ID se conectan en el mismo momento.

Procedimiento
En su llamada, cada actuador comprueba su estado y si en la pila de Request hay órdenes
entrantes. El actuador determina autónomamente, según los parámetros y el estado actual, si
puede satisfacer la Request. El resultado de esta determinación se escribe como respuesta al
bloque de control de la gestión de cargas en la pila de Request, y se llama el siguiente actuador.
En el siguiente ciclo, el bloque de control de la gestión de cargas evalúa la respuesta de los
actuadores y escribe una orden correspondiente en la pila de Task.
Esta Task incluye la prioridad y el Rolling ID, así como la energía de escalada/desescalada.
Cada instancia de actuador comprueba si forma parte de esta prioridad y Rolling ID y ejecuta
la operación de conmutación, si le corresponde.

228

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función

Leer

Ciclo 1
Escribir
Controlador

Request

Actuadores

Controlador

Request

Actuadores

Ciclo 2

Task

Ejemplo de secuencia de conmutación
● Inicio con la prioridad número 1 (máxima prioridad)
● Consideración de la prioridad:
Ejemplo:
Actuador 1: Prioridad = 1, Rolling ID = 1 → Secuencia de conmutación = 1
Actuador 2: Prioridad = 2, Rolling ID = 1 → Secuencia de conmutación = 2
Actuador 3: Prioridad = 10, Rolling ID = 1 → Secuencia de conmutación = 3
● Consideración del grupo de prioridad:
Actuadores en un grupo de prioridad (Rolling Sequence Identifier = 1)
Ejemplo:
Actuador 1: Prioridad = 5, Rolling ID = 1 → Secuencia de conmutación = 1
Actuador 2: Prioridad = 5, Rolling ID = 1 → Secuencia de conmutación = 1
Actuador 3: Prioridad = 5, Rolling ID = 1 → Secuencia de conmutación = 1
● Consideración del grupo de prioridad y de la secuencia de Rolling:
Actuadores en un grupo de prioridad y con distinto Rolling Sequence Identifier
Ejemplo:
Actuador 1: Prioridad = 5, Rolling ID = 2 → Secuencia de conmutación = 2
Actuador 2: Prioridad = 5, Rolling ID = 1 → Secuencia de conmutación = 1
Actuador 3: Prioridad = 5, Rolling ID = 3 → Secuencia de conmutación = 3
● Actuadores en un grupo de prioridad y con el mismo Rolling Sequence Identifier
Ejemplo:
Actuador 1: Prioridad = 5, Rolling ID = 2 → Secuencia de conmutación = 2
Actuador 2: Prioridad = 5, Rolling ID = 2 → Secuencia de conmutación = 2
Actuador 3: Prioridad = 5, Rolling ID = 1 → Secuencia de conmutación = 1

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

229

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función

Valores de potencia/energía
Los valores de potencia y energía que se necesitan para la lógica de escalada y desescalada
se escriben en el DB EnS_ActorConfig, en la estructura "status".
● actPower:
El valor real de potencia que se deriva de la respuesta (feedbackBoolean/feedbackAnalog)
o de la potencia típica
● escalationEnergy:
El valor de energía disponible para la escalada (teniendo en cuenta el tipo de conexión/
desconexión y el tiempo muerto)
● deescalationEnergy:
El valor de energía disponible para la desescalada (teniendo en cuenta el tipo de conexión/
desconexión y el tiempo muerto)
actPower = potencia real (input actPower) o potencia típica/potencia en standby (a partir de la
configuración); energía de (des)escalada = previsión de energía – límite de energía (valor
límite activo)

Respuesta
Los actuadores admiten cuatro tipos distintos de respuesta:
1. Valor de potencia: el valor real de potencia (fedAnalog) se debe tener cuenta en el acuse
de escalada/desescalada.
2. Objeto de adquisición: respuesta de un objeto de adquisición de Energy Suite.
3. Estado de conmutación: el estado de conmutación (fedBoolean) proporciona el estado de
conexión/desconexión del actuador. El valor de potencia típico/en standby configurado se
debe tener cuenta en el acuse de escalada/desescalada.
4. Sin respuesta: la respuesta la determina el bloque que asume el estado de la salida de
control (ctrlBoolean). El valor de potencia típico (potencia típica/en standby) configurado se
debe tener cuenta en el acuse de escalada/desescalada.

Escalada
Según los tipos de actuador (actorType) se activan distintos comandos cuando se recibe una
Request de escalada (jobType = 1) y el bloque contiene el orden en el que deben escalarse los
actuadores:
1. Consumidor: desconectar (controlBoolean = FALSE)
2. Generador: conectar (controlBoolean = TRUE)

Desescalada
Según los tipos de actuador (actorType) se activan distintos comandos cuando se recibe una
Request de desescalada (jobType = 2) y el bloque contiene el orden en el que deben
desescalarse los actuadores:
1. Consumidor: conectar (controlBoolean = TRUE)
2. Generador: desconectar (controlBoolean = FALSE)

230

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función

Funcionalidad de carga parcial
El parámetro "partialConsumption" permite activar la funcionalidad de carga parcial de un
actuador. De esta forma, se puede modificar la demanda de potencia o la provisión de corriente
del actuador (de 0 a 100 %). El actuador calcula la potencia sobrante o el mayor consumo de
potencia que más se acerque al límite de potencia y reduce/aumenta el consumo de potencia
consecuentemente.
Este valor de potencia variable se procesa internamente como valor porcentual, de forma que,
en un grupo de prioridad de actuadores con distintas potencias nominales, cada actuador
determina el valor absoluto correspondiente.
Únicamente el último actuador del grupo de prioridad utiliza la carga parcial en la orden de Task
si se trata de un actuador de carga parcial. En caso contrario, el actuador se conecta
inmediatamente.

Tiempos de conexión y desconexión
Para la conmutación de actuadores se deben tener en cuenta el tiempo de conexión mínimo
(minDeescalationTime), el tiempo de desconexión mínimo (minEscalationTime) y el tiempo de
desconexión máximo (maxEscalationTime).
● Tiempo de conexión mínimo → relevante para la escalada
El tiempo de conexión mínimo es el tiempo mínimo que debe estar conectado un actuador. El
actuador solo se puede desconectar cuando ha transcurrido el tiempo de conexión mínimo.
Tiempo de
conexión
mínimo
CON

DES
TIEMPO

El actuador se ha conectado

Si aún no ha transcurrido el tiempo de conexión mínimo, para el cálculo de la energía/potencia
debe restarse la diferencia (minConnectTime – connectTime) respecto al tiempo restante en el
periodo (statusLmgt.infeedEnergyBasic.syncData.syncTime) para obtener los valores de
energía/ potencia disponible correctos que pueden escalarse.
Tiempo restante (hasta que se permite la desconexión) = minConnectTime – connectTime
Tiempo restante (para los cálculos de energía/potencia) =
statusLmgt.infeedEnergyBasic.syncData.syncTime – (minConnectTime –
statusActor.connectTime)
Tiempo de desconexión mínimo → relevante para la desescalada
El tiempo de desconexión mínimo es el tiempo mínimo que debe estar desconectado un
actuador. El actuador solo se puede conectar cuando ha transcurrido el tiempo de
desconexión mínimo.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

231

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función

Tiempo de
desconexión
mínimo
CON

DES
TIEMPO
El actuador se ha desconectado

Si aún no ha transcurrido el tiempo de desconexión mínimo, para el cálculo de la energía/
potencia debe restarse la diferencia (minDisconnectTime – disconnectTime) respecto al
tiempo restante en el periodo (statusLmgt.infeedEnergyBasic.syncData.syncTime) para
obtener los valores de energía/ potencia disponible correctos que pueden desescalarse.
Tiempo restante (hasta que se permite la conexión) = minDisconnectTime – disconnectTime
Tiempo restante (para los cálculos de energía/potencia) =
statusLmgt.infeedEnergyBasic.syncData.syncTime – (minDisconnectTime – disconnectTime)
Tiempo de desconexión máximo → relevante para la escalada
El tiempo de desconexión máximo es el tiempo máximo que puede estar desconectado un
actuador. El actuador debe conectarse cuando ha transcurrido el tiempo de desconexión
máximo.
Tiempo de
desconexión
máximo
CON

DES
TIEMPO

El actuador se ha desconectado

Si aún no ha transcurrido el tiempo de desconexión máximo, para el cálculo de la energía/
potencia debe restarse la diferencia (maxDisconnectTime – disconnectTime) respecto al
tiempo restante en el periodo (statusLmgt.infeedEnergyBasic.syncData.syncTime) para
obtener los valores de energía/ potencia disponible correctos que pueden escalarse.
Tiempo restante (hasta que se fuerce el restablecimiento de la conexión) =
maxDisconnectTime – disconnectTime
Tiempo restante (para los cálculos de energía/potencia) =
statusLmgt.infeedEnergyBasic.syncData.syncTime – (maxDisconnectTime – disconnectTime)
● Tiempo de desconexión máximo → relevante para la escalada
El tiempo de desconexión máximo es el tiempo máximo que puede estar desconectado un
actuador. El actuador se conecta de nuevo automáticamente cuando ha transcurrido el tiempo
de desconexión máximo.

232

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función

Tiempo muerto para la escalada
El tiempo muerto (escalationDelayTime) debe ser tenido en cuenta por cada actuador para
determinar la cantidad de energía que se puede aportar mediante la escalada del actuador. Si
el retardo es superior a cero, la escalada solo tendrá efecto tras dicho retardo. Eso significa que
el actuador puede aportar menor energía a la gestión de cargas.
Tiempo muerto
para escalada

Potencia
típica

10 kW

Potencia
disponible
para escalada
0 kW

Fin del periodo

TIEMPO

El actuador se ha escalado

Para calcular la energía y la potencia, escalationDelayTime debe restarse del tiempo restante
en el periodo.

Tiempo muerto para la desescalada
El tiempo muerto (deescalationDelayTime) debe ser tenido en cuenta por cada actuador para
determinar la cantidad de energía que se agrega tras la desescalada del actuador. Si el retardo
es superior a cero, la desescalada solo tendrá efecto tras dicho retardo. Eso significa que el
actuador consume menos energía tras la activación.
7LHPSRPXHUWRSDUD
GHVHVFDODGD

Potencia
típica

10 kW

Potencia
media para
desescalada
0 kW
Fin del periodo

TIEMPO

El actuador se ha desescalado

Para calcular la energía y la potencia, deescalationDelayTime debe restarse del tiempo
restante en el periodo.

Gestión de órdenes
Las Request de escalada y desescalada se reciben como órdenes en el sistema de gestión de
cargas. El bloque debe ser capaz de evaluar las órdenes y los parámetros del sistema de
gestión de cargas, y de reaccionar en consecuencia. Encontrará más información al respecto
en el apartado "Concepto de órdenes: secuencia de desescalada/escalada (Página 235)".

Arranque
El bloque "EnS_LmgtActor_x”" no tiene comportamiento en arranque.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

233

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función

Comportamiento en caso de error
Si ocurre un error, se activa el parámetro de salida "error". El parámetro "status (Página 234)"
contiene información adicional sobre el error.

B.2.3.2

Parámetro EnS_LmgtActor_x
La tabla siguiente muestra los parámetros del bloque de función "EnS_LmgtActor_Peak":

Parámetro

Decla‐ Tipo de datos
ración

Ajuste
predeter‐
minado

Descripción

id

I

UInt

0

Identificación del actuador, número de la memoria de
datos para el actuador en la lista de actuadores

enableActor

I

Bool

False

Habilitación para que el actuador participe en la ges‐
tión de cargas; FALSE: inactiva; TRUE: activa

fedBoolean

I

Bool

False

Respuesta booleana del actuador para la identificación
del resultado de una operación de conmutación

fedAnalog

I

Real

0.0

Respuesta analógica del actuador para la identifica‐
ción del resultado de una operación de conmutación
[kW]

hwFault

I

Bool

False

Señalización de errores del hardware de conmutación
conectado; TRUE = error en el dispositivo

hwStatus

I

Word

16#0

Información de estado de un dispositivo inteligente;
puede mostrar errores

actorEnergyBasic I

"EnS_typeEnergyBasic"

-

Estructura de energía básica de un objeto de adquisi‐
ción

actorEnergyMeta

I

"EnS_typeEnergyMeta"

-

Metaestructura de energía de un objeto de adquisición

ctrlBoolean

O

Bool

FALSE

Señal para conectar un actuador binario; TRUE = des‐
conectar

ctrlAnalog

O

Real

0.0

Consumo nominal del actuador [kW]

error

O

Bool

FALSE

TRUE: el flanco ascendente informa de que se ha pro‐
ducido un error durante la ejecución del FB

status

O

Word

16#0000

Estado actual del FB

actorList

IO

Array[*] of "EnX_typeLmg‐
tActorElement"

-

Datos de configuración de la gestión de cargas

lmgtData

IO

"EnX_typeLmgtGeneral‐
Data"

-

Todos los datos relevantes de la gestión de cargas
configurada

B.2.3.3

Parámetro status
La tabla siguiente muestra los códigos de error que se emiten en el parámetro de salida
"status" cuando se producen errores:

Código de error

Descripción

(W#16#...)
8601

ERROR_WRONG_OB

8602

ERROR_INTERRUPT_TOO_LONG

8201

ERROR_PARAM_ID

234

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función
Código de error

Descripción

(W#16#...)
8211

ERROR_PARAM_ACTOR_TYPE

8212

ERROR_PARAM_ACQ_TYPE

8213

ERROR_PARAM_CTRL_TYPE

8221

ERROR_PARAM_AUTO_POWER_LEVEL

8222

ERROR_PARAM_AUTO_PRIO

8231

ERROR_PARAM_MANU_POWER_LEVEL

8232

ERROR_PARAM_MANU_PRIO

8001

ERROR_OP_MODE_WRONG

8002

ERROR_PAR_MODE_WRONG

Avisos
Los avisos se implementan mediante la instrucción "Program_Alarm". Los distintos avisos, que
representan una multiinstancia del bloque Programm_Alarm, se encuentran en las variables
estáticas.
ID de aviso

Texto de aviso

Categoría

8001

Modo de operación incorrecto

0

8002

Modo de parámetros incorrecto

0

8003

No se puede modificar la prioridad cuando el actuador está escalado

0

8201

ID de parámetro incorrecta

0

8211

Configuración incorrecta: Tipo de actuador

0

8212

Configuración incorrecta: Tipo de adquisición

0

8213

Configuración incorrecta: Tipo de señal de control

0

8221

Configuración incorrecta de parámetros permanentes: Nivel de potencia

0

8222

Configuración incorrecta de parámetros permanentes: Prioridad

0

8223

Configuración incorrecta de parámetros permanentes: Rolling ID

0

8231

Configuración incorrecta de parámetros dinámicos: Nivel de potencia

0

8232

Configuración incorrecta de parámetros dinámicos: Prioridad

0

8233

Configuración incorrecta de parámetros dinámicos: Rolling ID

0

8601

Llamada de bloque en OB incorrecto

0

8602

Tiempo de alarma cíclica del OB demasiado prolongado

0

B.2.3.4

Concepto de peticiones: secuencia de desescalada/escalada
A continuación se ofrece una descripción simplificada de los distintos pasos para el tratamiento
de una petición mientras el programa procesa una petición de (des)escalada.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

235

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función

Secuencia de Request
1. El bloque "EnS_LmgtForecast" calcula los valores de energía y potencia de la previsión y
los escribe en el DB "EnS_LmgtGeneralData", en la estructura "forecastValues".
2. El bloque "EnS_LmgtControl" calcula la energía delta a partir de los valores de previsión y
los límites de energía actuales (de acuerdo con el juego de parámetros actual). Puede ser
un valor negativo, si la previsión está por encima del valor límite, o un valor positivo, si la
previsión es inferior al valor límite.
3. El bloque de control crea un nuevo "jobNumber", establece los valores de "jobType" y de
"deltaEnergy" correspondientes y los escribe en la estructura de "requestStack".
Nota
Este valor es siempre positivo. La información de si esa "deltaEnergy" debe escalarse o
desescalarse se evalúa mediante "jobType".
4. Cada actuador comprueba si se ha creado alguna petición nueva por parte del bloque de
control ("jobNumber" distinto del precedente). En caso afirmativo, el actuador evalúa su
estado y escribe sus datos de respuesta en la estructura "actorFeedback" con la siguiente
lógica:
– Si queda aún un campo de petición vacío o su prioridad es superior a las prioridades
existentes, introduzca datos de respuesta.
– Cuando ya existen la misma prioridad y Rolling ID, agregue un valor de energía propio
a "availEnergy" en la lista.
– Si la prioridad ya existe pero varía el Rolling ID, compruebe si el valor "countEscalated"
es superior al valor propio e introduzca a continuación datos de respuesta.

Secuencia de Task
En el siguiente ciclo, todos los actuadores han ejecutado su secuencia de respuesta y el
bloque de control puede evaluar los datos del último ciclo.
1. El bloque de control comprueba "availEnergy" en la estructura de respuesta.
– Si la energía disponible es cero, se produce el evento "LackOfActors", ya que ningún
actuador puede proporcionar energía para la Request de petición.
– En caso contrario, el juego de datos se copia de "requestStack" a "taskStack". Esto
sigue ocurriendo mientras la suma de energía disponible (order) sea igual o superior
(escalada) o inferior (desescalada) a la energía delta.
2. Cada actuador comprueba en "taskStack" si se ha creado alguna Task nueva por parte del
bloque de control ("jobNumber" distinto del precedente). En caso afirmativo, el actuador
comprueba si participa en la prioridad y Rolling ID de la Task de petición y ejecuta la
operación de conmutación de acuerdo con el "jobType" (desescalada/escalada).
Las secuencias de Request y Task son dependientes entre sí y se ejecutan en cada ciclo.

236

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función

Ejemplo
Descripción
El siguiente apartado incluye un ejemplo simplificado de una Request de petición para una
escalada.
La tabla de la pila de Request no incluye todas las entradas (se centra solo en los valores más
importantes).
Además, en este ejemplo no se tiene en cuenta la carga parcial.
Presentación: Request de escalada (jobType = 1) de 100 kW representada por pasos.
Requisitos:
● Se han configurado 10 actuadores con 3 prioridades y 3 Rolling ID
● Presentación de lista de actuadores, pila de Request
Condición:
● No hay ninguna Request/Task activa (primera ejecución)
● Todos los actuadores están habilitados y conectados

Estado y parámetros de los actuadores
ID de actuador

Prioridad

Rolling ID

P/E

Condición

Habilitado

1

3

3

10

CONECTADO

SÍ

2

2

1

20

CONECTADO

SÍ

3

1

1

30

CONECTADO

SÍ

4

1

3

40

CONECTADO

SÍ

5

1

2

50

CONECTADO

SÍ

6

3

1

50

CONECTADO

SÍ

7

3

2

40

CONECTADO

SÍ

8

1

2

30

CONECTADO

SÍ

9

2

2

20

CONECTADO

SÍ

10

2

1

10

CONECTADO

SÍ

Pila de Request (al comienzo)
ACTR
_Feedback [0..9]
Job_Num‐
ber

Job_Type

P/E_to
_de

Priority

Rolling ID

1

100

Count

_Escalated _De-esca‐
lated

_escalate
1

Count

P/E_avai‐
lable

-

-

-

-

-

-

-

-

-

-

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

237

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función
ACTR
_Feedback [0..9]
-

-

-

-

-

-

-

-

-

-

Pila de Request (avance tras cada llamada de actuador)
1. El primer actuador escribe sus datos en la pila de Request vacía
ACTR
_Feedback [0..9]
Job_Num‐ Job_Type
ber

P/E_to
_de

Priority

Rolling ID

_escalate
1

1

100

3

3

Count

Count

_Escala‐
ted

P/E
_De-esca‐ _available
lated

0

0

10

2. El segundo actuador tiene una prioridad más alta, por lo que copia los datos disponibles al
segundo juego de datos y escribe sus datos en el primer juego de datos.
ACTR
_Feedback [0..9]
Job_Num‐ Job_Type
ber

P/E_to
_de
_escalate

1

100

1

Priority

Rolling ID

Count
_Escala‐
ted

Count
P/E
_De-esca‐ _available
lated

2

1

0

0

20

3

3

0

0

10

3. El tercer actuador tiene una prioridad más alta que el del primer juego de datos, por lo que
desplaza todos los datos al siguiente juego de datos y escribe sus datos en el primer juego
de datos.
ACTR
_Feedback [0..9]

238

Job_Num‐ Job_Type
ber

P/E_to
_de
_escalate

Priority

Rolling ID

Count_Es‐ Count
P/E
calated
_De-esca‐ _available
lated

1

100

1

1

0

0

30

2

1

0

0

20

3

3

0

0

10

1

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función
4. El cuarto actuador tiene la misma prioridad que el primer actuador, pero un Rolling ID más
bajo, por lo que omite cualquier otra acción.
ACTR
_Feedback [0..9]
Job_Num‐ Job_Type
ber

P/E_to
_de
_escalate

1

100

1

Priority

Rolling ID

Count
_Escala‐
ted

Count
P/E
_De-esca‐ _available
lated

1

1

0

0

30

2

1

0

0

20

3

3

0

0

10

5. El quinto actuador tiene también la prioridad "1" con un Rolling ID más bajo que el actuador
disponible, por lo que este actuador también omite cualquier otra acción.
ACTR
_Feedback [0..9]
Job_Num‐ Job_Type
ber

P/E_to
_de
_escalate

Priority

Rolling ID

Count
_Escala‐
ted

Count
P/E
_De-esca‐ _available
lated

1

100

1

1

0

0

1

30

2

1

0

0

20

3

3

0

0

10

6. El sexto actuador tiene la prioridad "3" con Rolling ID "1", por lo que sobrescribe los datos
del actuador con ID 1.
ACTR
_Feedback [0..9]
Job_Num‐ Job_Type
ber

P/E_to
_de
_escalate

1

100

1

Priority

Rolling ID

Count
_Escala‐
ted

Count
P/E
_De-esca‐ _available
lated

1

1

0

0

30

2

1

0

0

20

3

1

0

0

50

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

239

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función
7. El séptimo actuador tiene también la prioridad "3" pero un Rolling ID "2", más bajo, por lo
que omite cualquier otra acción.
ACTR
_Feedback [0..9]
Job_Num‐ Job_Type
ber

P/E_to
_de
_escalate

1

100

1

Priority

Rolling ID

Count
_Escala‐
ted

Count
P/E
_De-esca‐ _available
lated

1

1

0

0

30

2

1

0

0

20

3

1

0

0

50

8. El octavo actuador tiene la prioridad "1" con Rolling ID "2", más bajo. El actuador omite
cualquier otra acción.
ACTR
_Feedback [0..9]

240

Job_Num‐ Job_Type
ber

P/E_to
_de
_escalate

Priority

Rolling ID

Count
_Escala‐
ted

Count
P/E
_De-esca‐ _available
lated

1

100

1

1

0

0

1

30

2

1

0

0

20

3

1

0

0

50

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función
9. El noveno actuador tiene la prioridad "2" con Rolling ID "2". Ya hay un grupo de prioridad
con prioridad más alta en la lista, por lo que este actuador omite su entrada.
ACTR
_Feedback [0..9]
Job_Num‐ Job_Type
ber

P/E_to
_de
_escalate

1

100

1

Priority

Rolling ID

Count
_Escala‐
ted

Count
P/E
_De-esca‐ _available
lated

1

1

0

0

30

2

1

0

0

20

3

1

0

0

40

10.El décimo actuador tiene la prioridad "2" con Rolling ID "1". Ya existe una entrada de este
grupo de prioridad en la pila de Request, por lo que se agrega la energía/potencia a esta
entrada.
ACTR
_Feedback [0..9]
Job_Num‐ Job_Type
ber

P/E_to
_de
_escalate

Priority

Rolling ID

Count
_Escala‐
ted

Count
P/E
_De-esca‐ _available
lated

1

100

1

1

0

0

1

30

2

1

0

0

30

3

1

0

0

50

Estado de los actuadores una vez finalizada la petición.
En total se han escalado 110 W de acuerdo con los grupos de prioridad de los actuadores
(Request: 100 W).
ID de actuador

Prioridad

Rolling ID

P/E

Condición

Habilitado

1

3

3

10

CONECTADO

SÍ

2

2

1

20

DESCONEC‐
TADO

SÍ

3

1

1

30

DESCONEC‐
TADO

SÍ

4

1

3

40

CONECTADO

SÍ

5

1

2

50

CONECTADO

SÍ

6

3

1

50

DESCONEC‐
TADO

SÍ

7

3

2

40

CONECTADO

SÍ

8

1

2

30

CONECTADO

SÍ

9

2

2

20

CONECTADO

SÍ

10

2

1

10

DESCONEC‐
TADO

SÍ

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

241

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función
Cuando al final del ciclo de PLC se han procesado todas las instancias de actuadores, la pila
de Request contiene diez actuadores ordenados por su prioridad y Rolling ID.
En el siguiente ciclo, el bloque de control puede guardar por pasos los juegos de datos en la
pila de Task mientras se siga cubriendo la demanda de potencia.
En el siguiente ciclo, los actuadores tienen en cuenta también la pila de Task y conmutan las
entradas consecuentemente.

B.2.4

EnS_LmgtBackupRestore

B.2.4.1

Descripción de EnS_LmgtBackupRestore

Descripción
El bloque de función EnS_LmgtBackupRestore ofrece la funcionalidad para escribir datos de
informes/configuración en la tarjeta SD del PLC. En caso de una de violación de límites, una
operación de conmutación o una ausencia de actuadores, los datos de configuración y
Runtime se escriben en el archivo correspondiente de la carpeta "UserFiles" de la tarjeta de
memoria.
Tras el comando del usuario, el bloque guarda los datos de configuración de los actuadores y
del sistema de gestión de cargas en esta carpeta y los restablece.

Generación de informes
Violación de límites
Si el bloque LmgtControl detecta una violación de límites al final del periodo, dispara la
generación de informes de los datos actuales de "EnS_LmgtGeneralData" y "EnS_ActorList".
Los datos correspondientes se leen y se escriben en la tarjeta SD del PLC.
El archivo se guarda en "UserFiles/" con el nombre "LMGT_ViolationPeriodEnd_xxx". Los
eventos se escriben continuamente en el archivo. Cuando se alcanza el tamaño máximo
admitido del archivo (16 MB), se crea un nuevo archivo con un número de archivo superior xxx.
Cada nuevo juego de datos comienza con la etiqueta de fecha/hora del evento.
El número máximo de archivos puede seleccionarse con el parámetro de entrada
"amountLogFiles".

Operación de conmutación
Siempre que el bloque LmgtAcotor ejecuta una operación de conmutación, se leen los datos
relevantes de "EnS_LmgtGeneralData" y "EnS_ActorList" y se escriben en la tarjeta SD del
PLC. El bloque LmgtControl se encarga de disparar la generación de informes con el comando
"trigSwitching" dentro de la estructura "triggerBackupRestore" del DB
"EnS_LmgtGeneralData".
El archivo se guarda en "UserFiles/" con el nombre "LMGT_SwitchingEvents_xxx". Los
eventos se escriben continuamente en el archivo. Cuando se alcanza el tamaño máximo

242

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función
admitido del archivo, se crea un nuevo archivo con un número de archivo superior xxx. Cada
nuevo juego de datos comienza con la etiqueta de fecha/hora del evento.
El número máximo de archivos puede seleccionarse con el parámetro de entrada
"amountLogFiles".

Ausencia de actuadores
Si el bloque de control quiere escalar una petición pero no recibe respuesta de los actuadores,
este evento se trata como "Ausencia de actuadores". Esto significa que ningún actuador puede
tramitar esta Request y que se producirá una violación de límites si ese estado continúa.
Este evento puede producirse como resultado de un ajuste incorrecto en los actuadores, la
lista de prioridad o los parámetros generales. El archivo se guarda en "UserFiles/" con el
nombre "LMGT_LackOfActors_xxx". Los eventos se escriben continuamente en el archivo.
Cuando se alcanza el tamaño máximo admitido del archivo, se crea un nuevo archivo con un
número de archivo superior xxx. Cada nuevo juego de datos comienza con la etiqueta de fecha/
hora del evento.
El número máximo de archivos puede seleccionarse con el parámetro de entrada
"amountLogFiles".

Copia de seguridad y restauración
El usuario puede crear una copia de seguridad de los datos de configuración actuales.
Cuando se guarda la configuración en el sistema SCADA o en caso de disparo (parámetro de
entrada de copia de seguridad = TRUE), se archiva toda la documentación de la gestión de
cargas con todos los parámetros de RT, incluidos los ajustes generales, de alimentación y de
actuadores. La copia de seguridad se guarda en la memoria remanente del PLC (tarjeta de
memoria del PLC).
La configuración se puede restaurar mediante el ajuste del parámetro de entrada de la
restauración.

Copia de seguridad
Cuando se dispara el comando "triggerBackup", se lee la configuración actual de los
actuadores y la gestión de cargas y se guarda en un archivo de copia de seguridad de la tarjeta
SD del PLC.
El archivo se guarda en "UserFiles/" con el nombre "LMGT_ConfigBackup".

Restauración
Cuando se dispara el comando "trigRestore", se lee una nueva configuración del archivo de
copia de seguridad guardado en la tarjeta SD del PLC y se sobrescribe el archivo actual.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

243

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función
Requisitos
Para restaurar un archivo de copia de seguridad de la tarjeta SD en la configuración de la
gestión de cargas, deben cumplirse los siguientes requisitos.
● Debe haberse guardado un archivo de copia de seguridad con el nombre
"LMGT_ConfigBackup" en la tarjeta de memoria del PLC, en "UserFiles/".
● El archivo debe tener formato binario para coincidir con la estructura interna de datos
(generado con la ayuda de la herramienta de conversión suministrada).
PRECAUCIÓN
El sistema no puede analizar ni comprobar si el archivo de restauración tiene datos correctos.
Al cargar el archivo de configuración en el sistema, se escriben los datos de configuración en
los rangos de parámetros con efecto inmediato.

Características
Por motivos de rendimiento del PLC, los archivos se escriben en formato binario. Los datos
pueden convertirse mediante un programa de conversión incluido en el volumen de suministro
para transformarlos en una estructura legible (archivo CSV).

Generación de archivos
En función del disparo, el bloque EnS_LmgtBackupRestore crea distintos archivos.
● Violación de límites: archivo con nombre "LMGT_ViolationPeriodEnd_xxx"
● Operación de conmutación: archivo con nombre "LMGT_SwitchingEvents_xxx"
● Copia de seguridad de la configuración: archivo con nombre "LMGT_ConfigBackup"
(solo se crea un archivo, que se sobrescribe)
Con xxx como número consecutivo, hasta el número máximo de archivos establecido en el
parámetro de entrada "amountLogFiles".

244

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función

Acceso a los archivos
Es posible acceder a los archivos creados a través del servidor web del PLC. Para ello, debe
estar activado el servidor web en Configuración de dispositivos, General – Servidor web.

PRECAUCIÓN
El usuario no puede borrar los archivos generados por el sistema. Dado que la función de
copia de seguridad y restauración escribe datos continuamente, el sistema no sabría cómo
continuar funcionando. Eso provocaría errores y cancelería la generación de informes
durante la ejecución posterior.
Deben estar activados como mínimo los derechos de escritura, lectura y borrado de archivos
en la administración de usuarios.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

245

Bloques de Energy Suite - Gestión de cargas
B.2 Bloques de función

Comportamiento en caso de error
Si ocurre un error, se activa el parámetro de salida "error". El parámetro "status (Página 247)"
contiene información adicional sobre el error.

B.2.4.2

Parámetro EnS_LmgtBackupRestore
La tabla siguiente muestra los parámetros del bloque de función "EnS_LmgtBackupRestore":

Parámetro

Decla‐ Tipo de datos
ración

Ajuste
predeter‐
minado

Descripción

triggerBackup

I

Bool

false

Entrada para la ejecución del comando de copia de
seguridad

triggerRestore

I

Bool

false

Entrada para la ejecución del comando de restauración

amountLogFiles

I

UInt

10

Número de archivos de informe para cada tipo de ar‐
chivo de informe

busy

O

Bool

false

El bloque está ocupado

error

O

Bool

false

Error en el procesamiento

status

O

Word

16#0

Información detallada de un error

mode

O

USInt

0

Modo de procesamiento propiamente dicho

lmgtData

IO

"EnX_typeLmgtGeneral‐
Data"

Estructura de datos general para la gestión de cargas

actorConfig

IO

"EnX_typeLmgtActorList"

Estructura de datos para la configuración de actuado‐
res

246

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.3 Bloques de datos

B.2.4.3

Parámetro status
La tabla siguiente muestra los códigos de error que se emiten en el parámetro de salida
"status" cuando se producen errores:

Código de error

Descripción

(W#16#...)
80B3

No hay suficiente espacio disponible en la tarjeta de memoria

80B4

La tarjeta de memoria o el archivo está protegido contra escritura

80C3

Se ha alcanzado ya el número máximo de instrucciones FileWriteC simultáneas

8094

Se ha alcanzado la longitud máxima del archivo de registro

B.3

Bloques de datos

B.3.1

EnS_LmgtGeneralData

B.3.1.1

Descripción de EnS_LmgtGeneralData

Descripción
El bloque "EnS_LmgtGeneralData" contiene los datos esenciales para la gestión de cargas.

B.3.1.2

Estructura de EnS_LmgtGeneralData

Descripción
El bloque "EnS_LmgtGeneralData" contiene los datos esenciales para la gestión de cargas.
Elemento

Tipo de datos

Descripción

parameterSets

"EnX_typeLmgtControlParameters"

Datos de configuración de la gestión de
cargas al completo

forecastValues

"EnX_typeLmgtForecastValues"

Valores de previsión para potencia y
energía medias al final del periodo

requestStack

"EnX_typeLmgtJobRequestStack"

Interfaz del control y actuadores para
las Request de petición

taskStack

"EnX_typeLmgtJobTaskStack"

Interfaz del control y actuadores para
las Task de petición

escalatedPriorities

Array[1..100] of Bool

Cada índice muestra una prioridad.
TRUE = uno o más actuadores de la
prioridad se están escalando en ese
momento

orgData

"EnX_typeLmgtOrganisation"

Datos de tiempo del periodo

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

247

Bloques de Energy Suite - Gestión de cargas
B.4 Tipos de datos definidos por el usuario (UDT)
Elemento

Tipo de datos

Descripción

triggerBackupRestore

"EnX_typeLmgtTriggerBR"

Variables de disparo para la funcionali‐
dad de generación de informes

criticalAlarms

Array[0..9] of "EnX_typeLmgtAlarmEle‐
ment"

Respaldo para las últimas 10 alarmas
críticas

visualization

"EnX_typeLmgtVisualization"

Datos de configuración de la gestión de
cargas al completo

parameterSets

"EnX_typeLmgtControlParameters"

Valores de previsión para potencia y
energía medias al final del periodo

B.3.2

EnS_LmgtActorList

B.3.2.1

Descripción de EnS_LmgtActorList

Descripción
El bloque de datos global "EnS_ActorList" contiene los parámetros, datos de configuración y
lista de prioridad de los actuadores.

B.3.2.2

Estructura de EnS_LmgtActorList

Descripción
La tabla siguiente muestra la estructura del bloque de datos "EnS_ActorList":
Elemento

Tipo de datos

Descripción

Actors

EnS_typeLmgtActorList

Matriz del número máximo de actuado‐
res con los datos correspondientes

B.4

Tipos de datos definidos por el usuario (UDT)

B.4.1

EnS_typeActorElement

B.4.1.1

Descripción de EnS_typeActorElement

Descripción
El tipo contiene la estructura de datos de un actuador.

248

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.4 Tipos de datos definidos por el usuario (UDT)

B.4.1.2

Estructura de EnS_typeActorElement

Descripción
La tabla siguiente muestra los parámetros del tipo de datos de PLC "EnS_typeActorElement":
Parámetro

Tipo de datos

Ajuste predeter‐
minado

Descripción

operationMode

USInt

0

0 = modo automático, el actuador reaccio‐
na conforme a los comandos del bloque
de control; 1 = el actuador ignora los co‐
mandos del bloque de control

manualCommand

Bool

False

Desconexión del actuador en modo ma‐
nual: 1 = escalar actuador

metaData

"EnX_typeLmgtActorMeta"

Metadatos del actuador

parameter

"EnX_typeLmgtActorParameter"

Parámetros del actuador

status

"EnX_typeLmgtActorStatus"

Información de estado y valores reales del
actuador

B.4.2

EnS_typeLmgtActorMeta

B.4.2.1

Descripción de EnS_typeLmgtActorMeta

Descripción
El tipo contiene los metadatos de un actuador.

B.4.2.2

Estructura de EnS_typeLmgtActorMeta

Descripción
La tabla siguiente muestra los parámetros del tipo de datos de PLC "EnS_typeLmgtActorMeta":
Parámetro

Tipo de datos

Ajuste pre‐ Descripción
determina‐
do

name

String[32]

‘Actor na‐
me’

Nombre del actuador

plantIdentCode

String[32]

‘’

ID de la instalación

localIdentCode

String[32]

‘’

Identificador de ubicación

uniqueID

UDInt

0

Identificación unívoca para la posición del actuador

unitPower

UInt

1190

Unidad del valor de potencia según Energy Suite

actorType

USInt

0

Tipo de actuador: 0 = no válido, 1 = consumidor, 2 = generador

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

249

Bloques de Energy Suite - Gestión de cargas
B.4 Tipos de datos definidos por el usuario (UDT)
Parámetro

Tipo de datos

Ajuste pre‐ Descripción
determina‐
do

acquisitionType

USInt

0

Tipo de adquisición: 0 = ningún actuador disponible, 1 = valor de
potencia analógico conectado, 2 = estado de conmutación conec‐
tado, 3 = sin respuesta

controlType

USInt

0

Tipo de salida de control 0 = ningún actuador disponible, 1 = control
analógico conectado, 2 = control booleano conectado

B.4.3

EnS_typeLmgtActorParameter

B.4.3.1

Descripción de EnS_typeLmgtActorParameter

Descripción
El tipo contiene los parámetros de un actuador.

B.4.3.2

Estructura de EnS_typeLmgtActorParameter

Descripción
La tabla siguiente muestra los parámetros del tipo de datos de PLC
"EnS_typeLmgtActorParameter":
Parámetro

Tipo de datos

Ajuste prede‐ Descripción
terminado

parameterSet

USInt

0

0 = se usan los parámetros permanentes
1 = se usan los parámetros dinámicos

copyParameter

Bool

false

Si también están activos los parámetros di‐
námicos, el flanco ascendente copia los pa‐
rámetros dinámicos en el juego de paráme‐
tros permanentes

permanentParameter

"EnX_typeLmgtActorParameterSet"

Juego de parámetros para el modo automá‐
tico

dynamicParameter

"EnX_typeLmgtActorParameterSet"

Juego de parámetros para el modo manual

250

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.4 Tipos de datos definidos por el usuario (UDT)

B.4.4

EnS_typeLmgtActorParameterSet

B.4.4.1

Descripción de EnS_typeLmgtActorParameterSet

Descripción
El tipo contiene un juego de parámetros para el actuador.

B.4.4.2

Estructura de EnS_typeLmgtActorParameterSet

Descripción
La tabla siguiente muestra los parámetros del tipo de datos de PLC
"EnS_typeLmgtActorParameterSet":
Parámetro

Tipo de datos

Ajuste predeter‐
minado

Descripción

priority

UInt

1

Prioridad del actuador para la (des)escalada, 1 = má‐
xima prioridad

rollingIdentifier

UInt

1

Número de Rolling del actuador en el grupo

typicalPower

Real

0.0

Carga típica del actuador

standbyPower

Real

0.0

Carga en standby del actuador

partialConsumption

Bool

false

Probabilidad de un consumo parcial por parte del ac‐
tuador

minDeescalationTime

UInt

0

Tiempo de desescalada mínimo en [s]

minEscalationTime

UInt

0

Tiempo de escalada mínimo en [s]

maxEscalationTime

UInt

0

Tiempo de escalada máximo en [s]

escalationDelayTime

UInt

0

Tiempo en [s] que necesita el actuador para la escalada

deescalationDelayTime

UInt

0

Tiempo en [s] que necesita el actuador para la deses‐
calada

B.4.5

EnS_typeLmgtActorStatus

B.4.5.1

Descripción de EnS_typeLmgtActorStatus

Descripción
El tipo contiene la información de estado y valores reales del actuador.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

251

Bloques de Energy Suite - Gestión de cargas
B.4 Tipos de datos definidos por el usuario (UDT)

B.4.5.2

Estructura de EnS_typeLmgtActorStatus

Descripción
La tabla siguiente muestra los parámetros del tipo de datos de PLC
"EnS_typeLmgtActorStatus":
Parámetro

Tipo de datos

Ajuste pre‐
determina‐
do

Descripción

connectionStatus

Word

16#0

Estado de conexión del actuador

actPower

Real

0.0

Consumo de potencia real del actuador

escalationEnergy

Real

0.0

Energía disponible para la escalada

deescalationEnergy

Real

0.0

Energía disponible para la desescalada

countEscalated

ULInt

0

Contador para conmutación

countDeescalated

ULInt

0

Contador para conmutación

connectTime

UDInt

0

Tiempo de conexión actual en [s]

disconnectTime

UDInt

0

Tiempo de desconexión actual en [s]

inOutVariables

"EnX_typeLmgtActorStatusI‐
nOut"

Estado actual de las variables de entrada/salida
para la generación de informes

B.4.6

EnS_typeLmgtActorStatusInOut

B.4.6.1

Descripción de EnS_typeLmgtActorStatusInOut

Descripción
El tipo contiene los valores de respuesta y control de un actuador.

252

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.4 Tipos de datos definidos por el usuario (UDT)

B.4.6.2

Estructura de EnS_typeLmgtActorStatusInOut

Descripción
La tabla siguiente muestra los parámetros del tipo de datos de PLC
"EnS_typeLmgtActorInOut":
Parámetro

Tipo de datos

Ajuste predeter‐
minado

Descripción

enableActor

Bool

false

TRUE: actuador disponible para operación de conmu‐
tación; FALSE: el sistema de gestión de cargas no tie‐
ne en cuenta al actuador

fedBoolean

Bool

false

TRUE: la señal de respuesta de hardware indica que el
actuador está conectado; FALSE: la señal de respues‐
ta de hardware indica que el actuador está desconec‐
tado

fedAnalog

Real

0.0

Valor de potencia de respuesta del hardware en [kW]

fedEnOActPower

Real

0.0

Señal de respuesta del actuador como objeto de ad‐
quisición

ctrlBoolean

Bool

false

TRUE: el sistema de gestión de cargas indica que el
actuador está conectado; FALSE: el sistema de ges‐
tión de cargas indica que el actuador está desconec‐
tado

ctrlAnalog

Real

0.0

Valor de destino en la gestión de cargas para el valor
de potencia del actuador

status

Word

16#0

Código de estado del actuador

B.4.7

EnS_typeLmgtAlarmElement

B.4.7.1

Descripción de EnS_typeLmgtAlarmElement

Descripción
El tipo contiene los datos para la emisión de alarmas.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

253

Bloques de Energy Suite - Gestión de cargas
B.4 Tipos de datos definidos por el usuario (UDT)

B.4.7.2

Estructura de EnS_typeLmgtAlarmElement

Descripción
La tabla siguiente muestra los parámetros del tipo de datos de PLC
"EnS_typeLmgtAlarmElement":
Parámetro

Tipo de datos

Ajuste predeterminado

Descripción

timestamp

Date_And_Time

DT#1990-01-01-00:00:00

Etiqueta de fecha/hora de la alarma

textListID

UInt

0

Identificación de la entrada en la lista de textos
que contiene el aviso de alarma

additionalAlarmParame‐
ter

Real

0.0

Parámetro adicional para el aviso de alarma; p.
ej., valor de la violación de límites

B.4.8

EnS_typeLmgtControlLimitConfig

B.4.8.1

Descripción de EnS_typeLmgtControlLimitConfig

Descripción
El tipo contiene la configuración de valores límite de la gestión de cargas.

B.4.8.2

Estructura de EnS_typeLmgtControlLimitConfig

Descripción
La tabla siguiente muestra los parámetros del tipo de datos de PLC
"EnS_typeLmgtControlLimitConfig":
Parámetro

Tipo de datos

Ajuste predeter‐
minado

Descripción

avgPower

LReal

0.0

Valor límite de la potencia media para la gestión
de cargas en [kW]

limitPercentage

Real

0.0

Porcentaje del límite de potencia media en [%]
que se usa realmente para las decisiones de
conmutación

warningPercentage

Real

0.0

Umbral de advertencia del límite de potencia
media en [%]

alarmPercentage

Real

0.0

Umbral de alarma del límite de potencia media
en [%]

254

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.4 Tipos de datos definidos por el usuario (UDT)

B.4.9

EnS_typeLmgtControlParameters

B.4.9.1

Descripción de EnS_typeLmgtControlParameters

Descripción
El tipo contiene los parámetros para un bloque de control.

B.4.9.2

Estructura de EnS_typeLmgtControlParameters

Descripción
La tabla siguiente muestra los parámetros del tipo de datos de PLC
"EnS_typeLmgtControlParameters":
Parámetro

Tipo de datos

Ajuste prede‐
terminado

Descripción

parameterSet

USInt

0

0 = se usan los parámetros permanentes
1 = se usan los parámetros dinámicos

copyParameter

Bool

permanentParameters

FALSE

EnX
_typeLmgtControlParameterSet

dynamicParameters

EnX
_typeLmgtControlParameterSet

B.4.10

EnS_typeLmgtControlParameterSet

B.4.10.1

Descripción de EnS_typeLmgtControlParameterSet

El flanco ascendente copia el juego de pa‐
rámetros dinámicos al juego de paráme‐
tros permanentes
Datos de configuración de la gestión de
cargas permanente
Datos de configuración de la gestión de
cargas dinámica

Descripción
El tipo contiene la configuración de la gestión de cargas.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

255

Bloques de Energy Suite - Gestión de cargas
B.4 Tipos de datos definidos por el usuario (UDT)

B.4.10.2

Estructura de EnS_typeLmgtControlParameterSet

Descripción
La tabla siguiente muestra los parámetros del tipo de datos de PLC
"EnS_typeLmgtControlParameters":
Parámetro

Tipo de datos

Ajuste prede‐
terminado

limitConfig

EnS_typeLmgtLimitConfig

Variables de valores límite para la gestión
de cargas

timeConfig

EnS_typeLmgtTimeConfig

Variables de tiempo para la gestión de
cargas

B.4.11

EnS_typeLmgtControlTimeConfig

B.4.11.1

Descripción de EnS_typeLmgtControlTimeConfig

Descripción

Descripción
El tipo contiene la configuración horaria para la gestión de cargas.

B.4.11.2

Estructura de EnS_typeLmgtControlTimeConfig

Descripción
La tabla siguiente muestra los parámetros del tipo de datos de PLC
"EnS_typeLmgtControlTimeConfig":
Parámetro

Tipo de datos

Ajuste prede‐
terminado

Descripción

suppressionDelayDuration

Real

0.0

Duración de la inhibición de la petición al
inicio del periodo de muestreo en [s]

limitToleranceStartValue

Real

100.0

Valor inicial de la tolerancia de límites de la
potencia media en [%]

limitToleranceDuration

Real

0.0

Duración en [s] de la tolerancia de límites
que se inicia tras el retardo de inhibición

stabilizationDelayDuration

Real

0.0

Duración en [s] del retardo de estabiliza‐
ción una vez finalizada una petición

256

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.4 Tipos de datos definidos por el usuario (UDT)

B.4.12

EnS_typeLmgtForecastValues

B.4.12.1

Descripción de EnS_typeLmgtForecastValues

Descripción
El tipo contiene los datos de previsión de energía para la gestión de cargas.

B.4.12.2

Estructura de EnS_typeLmgtForecastValues

Descripción
La tabla siguiente muestra los parámetros del tipo de datos de PLC
"EnS_typeLmgtForecastValues":
Parámetro

Tipo de datos

Ajuste prede‐
terminado

Descripción

power

LReal

-1.0

Valor de potencia medio previsto al final
del periodo

energy

LReal

-1.0

Valor de energía previsto al final del perio‐
do

valid

Bool

FALSE

TRUE: los valores de previsión son váli‐
dos; FALSE: los valores de previsión no
son válidos

B.4.13

EnS_typeLmgtGeneralData

B.4.13.1

Descripción de EnS_typeLmgtGeneralData

Descripción
El tipo contiene los datos generales para la gestión de cargas.

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

257

Bloques de Energy Suite - Gestión de cargas
B.4 Tipos de datos definidos por el usuario (UDT)

B.4.13.2

Estructura de EnS_typeLmgtGeneralData

Descripción
La tabla siguiente muestra los parámetros del tipo de datos de PLC
"EnS_typeLmgtGeneralData":
Parámetro

Tipo de datos

Ajuste pre‐
Descripción
determinado

parameterSets

"EnS_typeLmgtControlParame‐
ters"

Datos de configuración de la gestión de
cargas al completo

forecastValues

"EnS_typeLmgtForecastValues"

Valores de previsión para potencia y ener‐
gía medias al final del periodo

requestStack

"EnS_typeLmgtJobRequestStack"

Interfaz del control y actuadores para las
Request de petición

taskStack

"EnS_typeLmgtTaskStack"

Interfaz del control y actuadores para las
Task de petición

escalatedPriorities

Array[1..100] of Bool

Cada índice muestra una prioridad. TRUE
= uno o más actuadores de la prioridad se
están escalando en ese momento

orgData

"EnS_typeLmgtOrganisation"

Datos de tiempo del periodo

triggerBackupRestore

"EnS_typeLmgtTriggerBR"

Variables de disparo para la funcionalidad
de generación de informes

criticalAlarms

Array[0..9] of "EnS_typeLmgtAlar‐
mElement"

Respaldo para las últimas 10 alarmas crí‐
ticas

visualization

"EnS_typeLmgtVisualization"

Contiene variables relevantes para la vi‐
sualización

B.4.14

EnS_typeLmgtJobFeedbackElement

B.4.14.1

Descripción de EnS_typeLmgtJobFeedbackElement

Descripción
El tipo contiene datos de respuesta de petición de un actuador.

258

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.4 Tipos de datos definidos por el usuario (UDT)

B.4.14.2

Estructura de EnS_typeLmgtJobFeedbackElement

Descripción
La tabla siguiente muestra los parámetros del tipo de datos de PLC
"EnS_typeLmgtJobFeedbackElement":
Parámetro

Tipo de datos

Ajuste pre‐
Descripción
determinado

priority

UInt

0

Prioridad de los actuadores

rollingID

UInt

0

Rolling ID de los actuadores

countEscalated

ULInt

0

Contador de frecuencia de escalado de
los actuadores

countDeescalated

ULInt

0

Contador de frecuencia de desescalado
de los actuadores

powerEnergyAvailable

LReal

0.0

Cantidad de potencia/energía que pueden
conectar los actuadores

B.4.15

EnS_typeLmgtJobRequestElement

B.4.15.1

Descripción de EnS_typeLmgtJobRequestElement

Descripción
El tipo contiene los datos de Request de petición a los actuadores.

B.4.15.2

Estructura de EnS_typeLmgtJobRequestElement

Descripción
La tabla siguiente muestra los parámetros del tipo de datos de PLC
"EnS_typeLmgtJobRequestElement":
Parámetro

Tipo de datos

Ajuste pre‐
Descripción
determinado

priority

UInt

0

Prioridad de los actuadores

rollingID

UInt

0

Rolling ID de los actuadores

countEscalated

ULInt

0

Contador de frecuencia de escalado de
los actuadores

countDeescalated

ULInt

0

Contador de frecuencia de desescalado
de los actuadores

availEnergy

LReal

0.0

Cantidad de energía que puede conectar
el actuador

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

259

Bloques de Energy Suite - Gestión de cargas
B.4 Tipos de datos definidos por el usuario (UDT)
Parámetro

Tipo de datos

Ajuste pre‐
Descripción
determinado

partialConsumption

Bool

false

Consumo parcial del actuador

actorCounter

Uint

0

Contador de número de actuadores perte‐
necientes al mismo grupo de prioridad y
Rolling ID

B.4.16

EnS_typeLmgtJobRequestStack

B.4.16.1

Descripción de EnS_typeLmgtJobRequestStack

Descripción
El tipo contiene los datos para la pila de Request.

B.4.16.2

Estructura de EnS_typeLmgtJobRequestStack

Descripción
La tabla siguiente muestra los parámetros del tipo de datos de PLC
"EnS_typeLmgtJobRequestStack":
Parámetro

Tipo de datos

Ajuste pre‐
Descripción
determinado

priority

UInt

0

Prioridad de los actuadores

rollingID

UInt

0

Rolling ID de los actuadores

orderEnergy

LReal

0.0

Cantidad de energía que deben conectar
los actuadores

B.4.17

EnS_typeLmgtJobTaskElement

B.4.17.1

Descripción de EnS_typeLmgtJobTaskElement

Descripción
El tipo contiene datos de Task para un actuador.

260

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.4 Tipos de datos definidos por el usuario (UDT)

B.4.17.2

Estructura de EnS_typeLmgtJobTaskElement

Descripción
La tabla siguiente muestra los parámetros del tipo de datos de PLC
"EnS_typeLmgtJobTaskElement":
Parámetro

Tipo de datos

Ajuste pre‐
Descripción
determinado

priority

UInt

0

Prioridad de los actuadores

rollingID

UInt

0

Rolling ID de los actuadores

orderEnergy

LReal

0.0

Cantidad de energía que deben conectar
los actuadores

percentOfUsedEnergy

LReal

0.0

% de la energía que puede usar el actua‐
dor

partialConsumption

Bool

false

Consumo parcial del actuador

actorCounter

UInt

0

Contador de número de actuadores perte‐
necientes al mismo grupo de prioridad y
Rolling ID

B.4.18

EnS_typeLmgtJobTaskStack

B.4.18.1

Descripción de EnS_typeLmgtJobTaskStack

Descripción
El tipo contiene los datos para la pila de Task.

B.4.18.2

Estructura de EnS_typeLmgtJobTaskStack

Descripción
La tabla siguiente muestra los parámetros del tipo de datos de PLC
"EnS_typeLmgtJobTaskStack":
Parámetro

Tipo de datos

Ajuste pre‐
Descripción
determinado

jobNumber

ULInt

0

Número de petición consecutivo para fi‐
nes de identificación

jobType

UInt

0

0: ninguna petición activa; 1: escalada; 2:
desescalada

actorTask

Array[0..9] of "EnX_typeLmgtJob‐
TaskElement"

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Task para los actuadores

261

Bloques de Energy Suite - Gestión de cargas
B.4 Tipos de datos definidos por el usuario (UDT)

B.4.19

EnS_typeLmgtOrganisation

B.4.19.1

Descripción de EnS_typeLmgtOrganisation

Descripción
El tipo contiene datos relevantes de los periodos para la gestión de cargas.

B.4.19.2

Estructura de EnS_typeLmgtOrganisation

Descripción
La tabla siguiente muestra los parámetros del tipo de datos de PLC
"EnS_typeLmgtOrganisation":
Parámetro

Tipo de datos

Ajuste pre‐
Descripción
determinado

periodTime

LReal

0.0

Tiempo total del periodo de gestión de car‐
gas en [s]

currentPeriodTime

LReal

0.0

Tiempo actual del periodo de gestión de
cargas en [s]

remainingPeriodTime

LReal

0.0

Tiempo restante del periodo de gestión de
cargas en [s]

B.4.20

EnS_typeLmgtTriggerBR

B.4.20.1

Descripción de EnS_typeLmgtTriggerBR

Descripción
El tipo contiene el disparador para el bloque de copia de seguridad/restauración.

262

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Bloques de Energy Suite - Gestión de cargas
B.4 Tipos de datos definidos por el usuario (UDT)

B.4.20.2

Estructura de EnS_typeLmgtTriggerBR

Descripción
La tabla siguiente muestra los parámetros del tipo de datos de PLC "EnS_typeLmgtTriggerBR":
Parámetro

Tipo de datos

Ajuste pre‐
Descripción
determinado

trigViolation

Bool

false

TRUE: cuando se produce una violación
de límites al final del periodo

trigSwitching

Bool

false

TRUE: cuando se ha ejecutado una ope‐
ración de conmutación

trigLackOfActors

Bool

false

TRUE: cuando hay ausencia de actuado‐
res

B.4.21

EnS_typeLmgtVisualization

B.4.21.1

Descripción de EnS_typeLmgtVisualization

Descripción
El tipo contiene los datos para la visualización.

B.4.21.2

Estructura de EnS_typeLmgtVisualization

Descripción
La tabla siguiente muestra los parámetros del tipo de datos de PLC
"EnS_typeLmgtVisualization":
Parámetro

Tipo de datos

Ajuste pre‐
Descripción
determinado

chosenVisuType

UInt

0

0 = energía, 1 = potencia

actPowerInfeed

LReal

0.0

Valor real de potencia del objeto de adqui‐
sición de la alimentación

actPowerEnergy

LReal

0.0

Valor real de energía del objeto de adqui‐
sición de la alimentación

limitEnergykWh

LReal

0.0

Límite de energía del sistema de gestión
de cargas, calculado a partir del límite de
potencia medio

limitEscalationEnergykWh

LReal

0.0

Límite del valor real de energía incluido el
porcentaje límite

limitEscalationPowerkW

LReal

0.0

Límite del valor real de potencia incluido el
porcentaje límite

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

263

Bloques de Energy Suite - Gestión de cargas
B.4 Tipos de datos definidos por el usuario (UDT)
Parámetro

Tipo de datos

Ajuste pre‐
Descripción
determinado

unitPower

UInt

1190

Valor predeterminado: kW

unitEnergy

UInt

1179

Valor predeterminado: kWh

264

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Índice alfabético
A
Algoritmos de previsión
EnS_LmgtForecast_x, 218
Ampliación de la previsión
LinExt, 218
Arranque, 224, 233
EnS_LmgtForecast_x, 218
Ausencia de actuadores, 243
Avisos, 226, 235

Bloque de función, 218
Extrapolación lineal, 218
Regresión cuadrática, 218
Escalada, 223, 230
Estructura
EnS_ActorList, 248
Estructura de
EnS_LmgtGeneralData, 247
Extrapolación lineal
EnS_LmgtForecast_x, 218

G
B
Bloque de función
EnS_LmgtActor_x, 226
EnS_LmgtBackupRestore, 242
EnS_LmgtControl_Peak, 219
EnS_LmgtForecast_x, 218

Generación de archivos, 244
Generación de informes, 242
Violación de límites, 242
Gestión de órdenes, 233
Grupos de prioridad, 228

L
C

Lista de prioridad, 227

Características, 244
Comportamiento en caso de error, 219, 224, 234,
246

O

D
Desescalada, 230
Duración del retardo de inhibición, 222
dynamicParameters
parameterMode, 220
parameterSet, 227

E
Ejemplo de secuencia de conmutación, 229
energía disponible, 220
EnS_LmgtActor_x
Bloque de función, 226
EnS_LmgtBackupRestore
Bloque de función, 242
EnS_LmgtControl_Peak
Bloque de función, 219
EnS_LmgtForecast_x
Algoritmos de previsión, 218
Arranque, 218

Operación de conmutación, 242

P
parameterMode
dynamicParameters, 220
permanentParameters, 220
parameterSet
dynamicParameters, 227
permanentParameters, 227
Parámetro
EnS_typeActorElement, 249
EnS_typeLmgtActorMeta, 249
EnS_typeLmgtActorParameter, 250
Parámetro de
EnS_LmgtActor_Peak, 234
EnS_LmgtBackupRestore, 246
EnS_LmgtControl_Peak, 225
EnS_LmgtForecast_x, 219
EnS_typeLmgtActorInOut, 253
EnS_typeLmgtActorParameterSet, 251
EnS_typeLmgtActorStatus, 252

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

265

Índice alfabético

EnS_typeLmgtAlarmElement, 254
EnS_typeLmgtControlLimitConfig, 254
EnS_typeLmgtControlParameters, 255, 256
EnS_typeLmgtControlTimeConfig, 256
EnS_typeLmgtForecastValues, 257
EnS_typeLmgtGeneralData, 258
EnS_typeLmgtJobFeedbackElement, 259
EnS_typeLmgtJobRequestElement, 259
EnS_typeLmgtJobRequestStack, 260
EnS_typeLmgtJobTaskElement, 261
EnS_typeLmgtJobTaskStack, 261
EnS_typeLmgtOrganisation, 262
EnS_typeLmgtTriggerBR, 263
EnS_typeLmgtVisualization, 263
permanentParameters
parameterMode, 220
parameterSet, 227
potencia diferencial, 220
Prioridad, 227
Procedimiento, 228

R
Regresión cuadrática
EnS_LmgtForecast_x, 218
Respuesta, 230

S
Secuencia de Rolling, 228

T
Tiempo de estabilización, 224
Tiempo muerto para la desescalada, 233
Tiempo muerto para la escalada, 233
Tiempos de conexión, 231
Tiempos de conexión y desconexión, 231
Tiempos de desconexión, 231
Tipos de actuador, 227
Tolerancia de límites, 222

V
Valores de potencia y energía, 230
Valores de potencia/energía, 230
Vigilancia de límites, 221
Violación de límites, 224
Generación de informes, 242

266

Procesamiento de datos de energía y optimización de consumo de energía
Manual de programación, 11/2019

Uso de Team Engineering

Sinopsis del trabajo con
Team Engineering

1

Uso de Multiuser Engineering

2

Uso de la puesta en marcha
multiusuario (Multiuser
Commissioning)

3

Poner en marcha proyectos
con sincronización de PLC

4

Intercambio de datos con
Inter Project Engineering
(IPE)

5

Uso de Exclusive Engineering

6

Manual de programación y manejo

11/2019

Notas jurídicas
Filosofía en la señalización de advertencias y peligros

Este manual contiene las informaciones necesarias para la seguridad personal así como para la prevención de
daños materiales. Las informaciones para su seguridad personal están resaltadas con un triángulo de advertencia;
las informaciones para evitar únicamente daños materiales no llevan dicho triángulo. De acuerdo al grado de peligro
las consignas se representan, de mayor a menor peligro, como sigue.
PELIGRO
Significa que, si no se adoptan las medidas preventivas adecuadas se producirá la muerte, o bien lesiones
corporales graves.
ADVERTENCIA
Significa que, si no se adoptan las medidas preventivas adecuadas puede producirse la muerte o bien lesiones
corporales graves.
PRECAUCIÓN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse lesiones corporales.
ATENCIÓN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse daños materiales.
Si se dan varios niveles de peligro se usa siempre la consigna de seguridad más estricta en cada caso. Si en una
consigna de seguridad con triángulo de advertencia de alarma de posibles daños personales, la misma consigna
puede contener también una advertencia sobre posibles daños materiales.

Personal cualificado

El producto/sistema tratado en esta documentación sólo deberá ser manejado o manipulado por personal
cualificado para la tarea encomendada y observando lo indicado en la documentación correspondiente a la misma,
particularmente las consignas de seguridad y advertencias en ella incluidas. Debido a su formación y experiencia,
el personal cualificado está en condiciones de reconocer riesgos resultantes del manejo o manipulación de dichos
productos/sistemas y de evitar posibles peligros.

Uso previsto de los productos de Siemens
Considere lo siguiente:
ADVERTENCIA
Los productos de Siemens sólo deberán usarse para los casos de aplicación previstos en el catálogo y la
documentación técnica asociada. De usarse productos y componentes de terceros, éstos deberán haber sido
recomendados u homologados por Siemens. El funcionamiento correcto y seguro de los productos exige que su
transporte, almacenamiento, instalación, montaje, manejo y mantenimiento hayan sido realizados de forma
correcta. Es preciso respetar las condiciones ambientales permitidas. También deberán seguirse las indicaciones
y advertencias que figuran en la documentación asociada.

Marcas registradas

Todos los nombres marcados con ® son marcas registradas de Siemens AG. Los restantes nombres y
designaciones contenidos en el presente documento pueden ser marcas registradas cuya utilización por terceros
para sus propios fines puede violar los derechos de sus titulares.

Exención de responsabilidad

Hemos comprobado la concordancia del contenido de esta publicación con el hardware y el software descritos. Sin
embargo, como es imposible excluir desviaciones, no podemos hacernos responsable de la plena concordancia. El
contenido de esta publicación se revisa periódicamente; si es necesario, las posibles correcciones se incluyen en
la siguiente edición.

Siemens AG
Digital Industries
Postfach 48 48
90026 NÜRNBERG
ALEMANIA

Ⓟ 11/2019 Sujeto a cambios sin previo aviso

Copyright © Siemens AG 2019.
Reservados todos los derechos

Índice
1

Sinopsis del trabajo con Team Engineering .................................................................................................7

2

Uso de Multiuser Engineering ....................................................................................................................13
2.1

Introducción a Multiuser Engineering.....................................................................................13

2.2

Vista general del trabajo con Multiuser Engineering..............................................................15

2.3

Principios básicos del servidor de proyectos .........................................................................19

2.4

Notas sobre la compatibilidad del servidor de proyectos.......................................................22

2.5

Requisitos del sistema para trabajar con Multiuser Engineering ...........................................24

2.6

Objetos soportados para Multiuser Engineering ....................................................................27

2.7

Ajustes para trabajar con Multiuser Engineering ...................................................................29

2.8

Funcionalidad mejorada de Multiuser Engineering ................................................................30

2.9

Trabajar offline con Multiuser Engineering.............................................................................33

2.10
2.10.1
2.10.2
2.10.3

Elementos de mando en Multiuser Engineering ....................................................................34
Símbolos multiusuario en la interfaz de usuario ....................................................................34
Marcas multiusuario en la interfaz de usuario........................................................................36
Banner multiusuario en la interfaz de usuario........................................................................38

2.11
2.11.1
2.11.2
2.11.3

Funcionalidad del editor multiusuario.....................................................................................39
Introducción al editor multiusuario .........................................................................................39
Editor multiusuario en la vista "Check-in" ..............................................................................40
Editor multiusuario en la vista "Actualizar" .............................................................................42

2.12
2.12.1
2.12.2
2.12.3
2.12.4
2.12.5
2.12.6
2.12.7

Indicaciones para trabajar con el servidor de proyectos TIA .................................................44
Introducción al servidor de proyectos ....................................................................................44
Ajustar perfiles de red para el servidor de proyectos.............................................................46
Agregar nuevas conexiones de servidor al servidor de proyectos.........................................48
Visualizar la conexión con el servidor ....................................................................................49
Editar la conexión con el servidor ..........................................................................................49
Restablecer la conexión con el servidor ................................................................................50
Borrar la conexión con el servidor..........................................................................................51

2.13
2.13.1
2.13.2
2.13.3
2.13.4
2.13.5

Trabajar con el servidor de proyectos local ...........................................................................52
Introducción al servidor de proyectos local ............................................................................52
Configuración del servidor de proyectos local .......................................................................53
Visualización del servidor de proyectos local.........................................................................55
Iniciar el servidor de proyectos local ......................................................................................55
Finalizar el servidor de proyectos local ..................................................................................57

2.14
2.14.1
2.14.2
2.14.3
2.14.4
2.14.5

Crear y administrar proyectos de servidor .............................................................................57
Requisitos para proyectos de servidor...................................................................................57
Introducción al trabajo con proyectos de servidor..................................................................59
Crear un nuevo proyecto de servidor.....................................................................................61
Borrar un proyecto de servidor...............................................................................................62
Actualizar proyectos de servidor ............................................................................................62

Uso de Team Engineering
Manual de programación y manejo, 11/2019

3

Índice

3

4

4

2.15
2.15.1
2.15.1.1
2.15.1.2
2.15.1.3
2.15.1.4
2.15.1.5
2.15.1.6
2.15.1.7
2.15.2
2.15.2.1
2.15.2.2
2.15.2.3
2.15.2.4
2.15.2.5
2.15.2.6
2.15.2.7
2.15.2.8
2.15.2.9
2.15.2.10
2.15.2.11
2.15.2.12
2.15.2.13

Trabajar en la sesión local .....................................................................................................63
Crear y administrar una sesión local......................................................................................63
Crear una sesión local ...........................................................................................................63
Abrir una sesión local.............................................................................................................65
Guardar una sesión local .......................................................................................................67
Cerrar una sesión local ..........................................................................................................68
Borrar una sesión local ..........................................................................................................69
Mostrar todas las sesiones locales que pertenecen a un proyecto de servidor.....................70
Exportar una sesión local como proyecto de usuario individual ............................................71
Editar objetos en la sesión local.............................................................................................73
Introducción al trabajo en sesiones locales ...........................................................................73
Trabajar offline en la sesión local...........................................................................................75
Reglas para marcar objetos ...................................................................................................77
Marcar objetos automática o manualmente para su edición..................................................79
Posibles conflictos durante el marcado automático ...............................................................81
Quitar la marca de los objetos ...............................................................................................82
Mostrar la información de uso de los objetos marcados........................................................83
Actualizar la sesión local........................................................................................................85
Restablecer la sesión local tras la actualización....................................................................86
Realizar el check-in de objetos en el proyecto del servidor ...................................................87
Posibles conflictos durante el check-in ..................................................................................90
Posibles mensajes de error durante el check-in ....................................................................93
Borrar objetos en la sesión local ............................................................................................95

2.16
2.16.1
2.16.2
2.16.3
2.16.4

Trabajar en la vista del proyecto de servidor .........................................................................97
Introducción al trabajo en la vista del proyecto de servidor ...................................................97
Abrir y cerrar la vista del proyecto de servidor.......................................................................99
Editar objetos en la vista del proyecto de servidor...............................................................101
Cambiar el nombre de objetos en la vista del proyecto de servidor ....................................103

Uso de la puesta en marcha multiusuario (Multiuser Commissioning).....................................................105
3.1

Introducción al Multiuser Commissioning.............................................................................105

3.2

Resumen del trabajo general con Multiuser Commissioning ...............................................106

3.3

Ajustes para trabajar con Multiuser Commissioning ............................................................110

3.4

Reglas para trabajar con Multiuser Commissioning.............................................................112

3.5

Activar y desactivar el modo Multiuser Commisioning.........................................................113

3.6

Trabajar con el Commissioning síncrono.............................................................................115

3.7

Trabajar con el Commissioning asíncrono...........................................................................116

3.8

Indicaciones importantes para trabajar con el Commissioning asíncrono ...........................118

3.9

Funcionalidad del editor de Commissioning ........................................................................120

Poner en marcha proyectos con sincronización de PLC..........................................................................123
4.1

Principios básicos de la sincronización de PLC...................................................................123

4.2

Requisitos para la sincronización de PLC:...........................................................................126

4.3

Procedimiento para la sincronización de PLC .....................................................................127

4.4

Reglas para la sincronización de PLC .................................................................................130

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Índice

5

6

Intercambio de datos con Inter Project Engineering (IPE) .......................................................................139
5.1

Principios básicos de la ingeniería interproyecto (IPE)........................................................139

5.2

Requisitos para la ingeniería interproyecto (IPE).................................................................142

5.3

Vista general al trabajar con ingeniería interproyecto (IPE).................................................142

5.4

Creación de datos de proxy de dispositivo en el proyecto de origen...................................146

5.5

Creación del archivo IPE con ayuda de "Datos de proxy de dispositivo" ............................146

5.6
5.6.1
5.6.1.1
5.6.1.2
5.6.1.3
5.6.2
5.6.2.1
5.6.2.2
5.6.2.3
5.6.3
5.6.3.1
5.6.3.2
5.6.3.3
5.6.3.4
5.6.3.5
5.6.3.6
5.6.3.7
5.6.3.8

Uso de datos de control de otros proyectos con IPE ...........................................................147
Uso de datos de control de otros proyectos en el panel de operador..................................147
Principios básicos de los datos de control ...........................................................................147
Inicializar proxy de dispositivos mediante archivo IPE.........................................................147
Inicializar proxy de dispositivos mediante archivo de proyecto............................................153
Comunicación con proxys de dispositivos ...........................................................................158
Principios básicos sobre la comunicación con proxys de dispositivos.................................158
Configurar una conexión directa ..........................................................................................160
Configurar conexión enrutada..............................................................................................162
Configuración integrada con WinCC y SIMATIC Manager ..................................................165
Principios básicos de la configuración con WinCC y SIMATIC Manager ............................165
Inicialización del proxy de dispositivos mediante archivo de proyecto STEP 7 ...................166
Adaptación de parámetros de red........................................................................................167
Comprobación de datos incoherentes .................................................................................172
Adaptación de variables y conexiones.................................................................................173
Actualización del proxy de dispositivos mediante archivo de proyecto STEP 7 ..................173
Integración de variables del SIMATIC Manager ..................................................................174
Configuración de la función de sistema "Teclas directas" ...................................................175

Uso de Exclusive Engineering..................................................................................................................179
6.1

Introducción a Exclusive Engineering ..................................................................................179

6.2

Descripción general del trabajo con Exclusive Engineering ................................................180

6.3

Requisitos para trabajar con Exclusive Engineering............................................................183

6.4
6.4.1
6.4.2

Símbolos y marcas de la interfaz de usuario .......................................................................185
Símbolos de la interfaz de usuario.......................................................................................185
Marcas en la interfaz de usuario ..........................................................................................187

6.5
6.5.1
6.5.2
6.5.3

Crear y administrar proyectos de servidor ...........................................................................189
Introducción al trabajo con proyectos de servidor................................................................189
Crear un proyecto de servidor nuevo...................................................................................191
Borrar un proyecto de servidor.............................................................................................192

6.6
6.6.1
6.6.2
6.6.3
6.6.4
6.6.5
6.6.6
6.6.7
6.6.8

Crear y editar una sesión local exclusiva.............................................................................192
Crear una sesión local exclusiva..........................................................................................192
Abrir una sesión local exclusiva ...........................................................................................193
Editar una sesión local exclusiva .........................................................................................196
Guardar una sesión local exclusiva .....................................................................................197
Cerrar una sesión local exclusiva ........................................................................................197
Editar offline una sesión local exclusiva...............................................................................198
Finalizar el trabajo en la sesión local exclusiva ...................................................................199
Visualizar todas las sesiones locales exclusivas pertenecientes a un proyecto de
servidor ................................................................................................................................200

Uso de Team Engineering
Manual de programación y manejo, 11/2019

5

Índice

Índice alfabético........................................................................................................................................203

6

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Sinopsis del trabajo con Team Engineering

1

Introducción
Para editar las tareas de automatización, TIA Portal ofrece diferentes funcionalidades que se
resumen bajo el término genérico de Team Engineering .
Team Engineering permite trabajar cómodamente en equipo.
Esto significa que varios usuarios pueden trabajar en proyectos de forma conjunta y
simultánea. De este modo se reducen considerablemente los tiempos de configuración de los
proyectos. La instalación puede ponerse en marcha y funcionar de forma productiva con mayor
rapidez.
En las siguientes fases de desarrollo se dispone de diferentes funciones en el marco de Team
Engineering:
● en la fase de ingeniería
● en la fase de puesta en marcha
En la fase de ingeniería se desarrolla el proyecto en equipo. En esta fase se crea una
estructura lógica del proyecto y adecuada para el trabajo conjunto, que tiene en cuenta todas
las exigencias del proyecto. Aquí se incluyen, p. ej., una configuración hardware completa y
una distribución lógica del proyecto en partes que pueden editarse individualmente o en
Software Units.
En la fase de puesta en marcha (Commissioning)se pone en funcionamiento el proyecto de
forma conjunta y paralela. Las versiones del proyecto se cargan en la CPU, para lo que puede
servirse de las correspondientes funcionalidades de Team Engineering.

Funcionalidades de Team Engineering
En TIA Portal hay diferentes funciones y posibilidades para trabajar conjunta y paralelamente
en equipo:
● Multiuser Engineering y Multiuser Commissioning
● Software Units
● Sincronización de PLC
● Inter Project Engineering (IPE)

Uso de Team Engineering
Manual de programación y manejo, 11/2019

7

Sinopsis del trabajo con Team Engineering

A continuación encontrará una lista de las diferentes opciones disponibles para trabajar con
todas las funcionalidades de Team Engineering .
Multiuser Engineering y Multiuser Commissioning
Multiuser Engineering (ingeniería multiusuario) le
permite editar proyectos multiusuario de forma
conjunta y simultánea en varias sesiones locales.
Los proyectos se crean offline y se cargan en prin‐
cipio en el servidor multiusuario. El servidor mul‐
tiusuario permite sincronizar cómodamente los
proyectos y llevar a cabo pruebas locales.

Marco de la imagen

7,$

6HUYLGRUGHSUR\HFWRV

6LQFURQL]DFLµQ\FDUJDGHVGHHOSUR\HFWRGHVHUYLGRU

Multiuser Commissioning permite ponen en mar‐
cha en equipo los proyectos ya configurados con
gran comodidad. En la fase de puesta en marcha
y después de cargar el proyecto de servidor mul‐
tiusuario en la CPU, este se actualiza y se crea
una revisión nueva para el proyecto del servidor.
Esto tiene las siguientes ventajas:
Cuando se trabaja en sesiones locales, el proyec‐
to multiusuario se sincroniza con el proyecto del
servidor.

6HVLµQ
ORFDO

6HVLµQ
ORFDO
&38

La versión del proyecto en la CPU y en el servidor
multiusuario es siempre coherente después de
cargarla en la CPU.
Consulte al respecto también:
Introducción a Multiuser Engineering (Página 13)
Trabajar con el Commissioning asíncrono (Pági‐
na 116)
Posibilidades de aplicación combinadas:
La funcionalidad de las Software Units e IPE tam‐
bién puede emplearse en el entorno de Multiuser
Engineering y Multiuser Commissioning.

Sincronización de PLC

8

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Sinopsis del trabajo con Team Engineering

Marco de la imagen

7,$

Este proyecto se carga en la CPU utilizada con‐
juntamente y, seguidamente, se distribuye me‐
diante copias del proyecto a un máximo de cinco
sistemas de ingeniería.

U
JD

U

Durante la carga se visualizan las modificaciones
de los demás miembros del equipo en un cuadro
de diálogo para la "Sincronización del software" y,
en lo posible, se sincronizan automáticamente.

&RSLDGHO
SUR\HFWRPDHVWUR

JD

No puede cargar datos en la CPU más de un sis‐
tema de ingeniería a la vez.

&RSLDGHO
SUR\HFWRPDHVWUR

DU
&

Según sea la versión de firmware de la CPU utili‐
zada, algunas funciones online también pueden
ejecutarse simultánea y paralelamente en la CPU
utilizada conjuntamente desde varios sistemas de
ingeniería, por ejemplo: observar y forzar bloques
en la CPU y funciones Trace.

3UR\HFWRPDHVWUR

DU

Las copias del proyecto maestro pueden editarse
offline de forma simultánea, paralela e indepen‐
diente entre sí.

6HUYLGRUGHSUR\HFWRV

&

La base para la sincronización de PLC es un "pro‐
yecto maestro" común que contiene la configura‐
ción hardware completa con todos los objetos de
programa necesarios.

6LQFURQL]DFLµQPHGLDQWHOD&38

Si hay modificaciones concurrentes se requiere
una sincronización manual. Para la sincronización
manual de los cambios se dispone del editor de
comparación.
Consulte al respecto también:
Principios básicos de la sincronización de PLC
(Página 123)
Software Units

Uso de Team Engineering
Manual de programación y manejo, 11/2019

9

Sinopsis del trabajo con Team Engineering

El programa de usuario se estructura por medio
de Software Units. Así, por ejemplo, todos los ele‐
mentos de programación necesarios para "Mo‐
tor_1" pueden agruparse en una Software Unit.

Marco de la imagen

6HUYLGRUGHSUR\HFWRV

7,$

6RIWZDUH8QLWV
$
%

También en este caso hay un "proyecto maestro"
común que sirve de base y contiene la configura‐
ción hardware completa con todas las Software
Units necesarias.

La integración en el proyecto maestro se lleva a
cabo al final de la fase de puesta en marcha: cada
sistema de ingeniería vuelve a copiar en el pro‐
yecto maestro las Software Units que ha editado.

JD
U

6RIWZDUH8QLWV
$
%

DU

U
JD
DU

Las Software Units pueden editarse offline de for‐
ma paralela, simultánea e independiente entre sí,
e incluso pueden cargarse en la CPU sin necesi‐
dad de sincronización, siempre que se cumplan
determinados requisitos.

6RIWZDUH8QLWV
$
%

&

Cada Software Unit dispone de elementos de pro‐
gramación propios subordinados como, p. ej., al‐
gunas tablas de variables, de modo que se garan‐
tiza el trabajo independiente en las diferentes uni‐
dades.

3URFHVD6RIWZDUH8QLW%

3URFHVD6RIWZDUH8QLW$

&

Este proyecto se carga en la CPU utilizada con‐
juntamente y, seguidamente, se distribuye me‐
diante copias del proyecto a un máximo de cinco
sistemas de ingeniería que, a su vez, editan úni‐
camente las Software Units que les han sido asig‐
nadas.

3UR\HFWRPDHVWUR

6RIWZDUH8QLWV
$

%

&DUJDUVLQVLQFURQL]DFLµQ

Consulte al respecto también:
AUTOHOTSPOT
Posibilidades de aplicación combinadas:
La funcionalidad de las Software Units también
puede emplearse con IPE y con Multiuser Engi‐
neering y Multiuser Commissioning.

10

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Sinopsis del trabajo con Team Engineering

Ingeniería interproyecto (IPE)
Con la funcionalidad de la ingeniería interproyecto
(Inter Project Engineering), en lo sucesivo IPE, se
pueden intercambiar los datos de control de un
proyecto de origen con otros proyectos mediante
un proxy de dispositivo.

Marco de la imagen

3UR\HFWRGHRULJHQ
3/&B$
'DWRVGHOSUR[\GH
GLVSRVLWLYR3/&B$

Estos datos se pueden incorporar a otros proyec‐
tos, p. ej. para la visualización en HMI, y utilizarse
ahí para otras configuraciones.
Así, la ingeniería interproyecto le permite, de for‐
ma sencilla, poner a disposición datos de control
de una programación PLC de un proyecto para
una configuración HMI de otro proyecto.

3UR\HFWRGHGHVWLQR

([SRUWDFLµQ
'DWRVGHOSUR[\GH
GLVSRVLWLYR3/&B$

,QLFLDOL]DFLµQ
$UFKLYR,3(

3/&SUR[\GHGLVSRVLWLYR

Consulte al respecto también:
AUTOHOTSPOT
Posibilidades de aplicación combinadas:
La funcionalidad de IPE puede emplearse tanto
con la sincronización de PLC como con Software
Units y con Multiuser Engineering y Multiuser
Commissioning.

Consulte también
Introducción a Multiuser Engineering (Página 13)
Trabajar con el Commissioning asíncrono (Página 116)
Principios básicos de la sincronización de PLC (Página 123)

Uso de Team Engineering
Manual de programación y manejo, 11/2019

11

Sinopsis del trabajo con Team Engineering

12

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.1

2

Introducción a Multiuser Engineering

Introducción
En el TIA Portal existe la posibilidad de trabajar con Multiuser Engineering .
Esto significa que varios usuarios pueden trabajar en proyectos de servidor de forma conjunta
y simultánea. De este modo se reducen considerablemente los tiempos de configuración de
los proyectos. La instalación puede ponerse en marcha y funcionar de forma productiva con
mayor rapidez.
En Multiuser Engineering también es posible utilizar las demás funciones de Team
Engineering como, p. ej., el trabajo compartido en una CPU y el intercambio de datos con Inter
Project Engineering (IPE).
Multiuser Engineering funciona del siguiente modo en TIA Portal:
1. La administración de proyectos está ubicada en un servidor de proyectos TIA local o
externo.
2. Varios usuarios trabajan en sesiones locales sobre la base de proyectos administrados por
el servidor.
3. El trabajo en sesiones locales es independiente entre sí.
4. Los cambios de las sesiones locales se transfieren al proyecto de servidor mediante checkin.
5. Los cambios registrados mediante check-in de otros usuarios se muestran y pueden
aplicarse fácilmente.
Nota
Trabajo eficiente con Multiuser Engineering
Cuando se trabaja en paralelo en varias sesiones locales, conviene eliminar los errores a
tiempo para que el trabajo en equipo en un mismo proyecto sea eficiente.
Por ello es recomendable compilar los cambios pendientes en el editor multiusuario antes del
check-in. Para ello se dispone de varias opciones de compilación. Si se han indicado errores
de compilación, deben solucionarse antes del check-in.
Al compilar los cambios pendientes antes del check-in se garantiza que el check-in de un
proyecto se efectúe correctamente y que se transfiera a otros usuarios.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

13

Uso de Multiuser Engineering
2.1 Introducción a Multiuser Engineering
Para el trabajo simultáneo en un proyecto de servidor existen diferentes posibilidades, tal
como se muestra en la tabla siguiente:
Escenarios de aplicación para Multiuser Engineering
Escenario 1:
Varios ingenieros trabajan con varios objetos
en distintos dispositivos.
Cada ingeniero edita los objetos que se le han asignado en
distintos dispositivos.

Escenario 2:
Varios ingenieros trabajan con objetos distintos

en distintos dispositivos.
Cada ingeniero edita los objetos que se le han asignado en un
solo dispositivo.

Escenario 3:
Varios ingenieros trabajan con objetos distintos

con la misma tecnología.
Cada ingeniero edita objetos tecnológicos concretos (p. ej.
Motor_1 o Motor_2) en todos los dispositivos disponibles.

Gracias a la edición paralela de distintos objetos, como variables, bloques, variables PLC,
alarmas, imágenes, listas de textos y gráficos, objetos tecnológicos, etc. en uno o varios
equipos de un proyecto de servidor, es posible mejorar la eficiencia y reducir significativamente
los tiempos de configuración.

14

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.2 Vista general del trabajo con Multiuser Engineering

Consulte también
Vista general del trabajo con Multiuser Engineering (Página 15)
Principios básicos del servidor de proyectos (Página 19)
Requisitos del sistema para trabajar con Multiuser Engineering (Página 24)
Objetos soportados para Multiuser Engineering (Página 27)
Trabajar con el Commissioning asíncrono (Página 116)

2.2

Vista general del trabajo con Multiuser Engineering

Introducción
Cuando se trabaja con varios usuarios en proyectos de servidor de forma conjunta y
simultánea, deben observarse determinados procedimientos.
A continuación se ofrece una descripción general del trabajo con Multiuser Engineering.

Ejemplo de aplicación
Encontrará un ejemplo de aplicación para trabajar con Multiuser Engineering en el siguiente
enlace:
https://support.industry.siemens.com/cs/ww/es/view/109740141 (https://
support.industry.siemens.com/cs/ww/en/view/109740141)

Reglas para trabajar con Multiuser Engineering
Para trabajar en proyectos de servidor se aplican las siguientes reglas:
● Los proyectos que deben editarse contienen de antemano toda la configuración hardware,
los bloques, conexiones y ajustes globales necesarios, antes de poder utilizarse como
proyecto de servidor.
Encontrará más información al respecto en: Requisitos para proyectos de servidor
(Página 57)
● Para evitar trabajar simultáneamente en los mismos objetos, póngase de acuerdo primero
con los demás usuarios.
● Todos los ajustes generales, como, p. ej., los cambios en la configuración de dispositivos,
deben realizarse en la vista del proyecto de servidor (es decir, en el proyecto de servidor
central).
● En la vista del proyecto de servidor pueden editarse todos los objetos de un proyecto.
También es posible editar aquellos objetos que no son compatibles con la funcionalidad de
Multiuser Engineering.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

15

Uso de Multiuser Engineering
2.2 Vista general del trabajo con Multiuser Engineering

Descripción general del trabajo con Multiuser Engineering
Para utilizar la funcionalidad de Multiuser Engineering, haga lo siguiente:
Acción

Ejemplo

1. Crear un proyecto de servidor en el servidor de
proyectos

7,$

6HUYLGRUGHSUR\HFWRV

Instale un servidor de proyectos y cargue un proyec‐
to de usuario único en el servidor utilizado.
● El proyecto debe estar estructurado de forma que
cumpla los requisitos para proyectos de servidor.

)%

)%

)&

)&

Resultado:
Al cargar el proyecto de usuario único en el servidor
de proyectos, este se convierte en un proyecto de
servidor.

&UHDUXQSUR\HFWRGHVHUYLGRU

3UR\HFWRGHXVXDULR¼QLFR

2. Crear una sesión local para el "Usuario 1"

7,$

6HUYLGRUGHSUR\HFWRV

Una "sesión local" se crea en el equipo propio como
copia del proyecto de servidor.
● Para cada usuario se marcan automáticamente
con banderitas azules los objetos que este edita
en su sesión local.

3UR\HFWRGHVHUYLGRU

● Varios usuarios pueden editar simultáneamente
varios objetos en las diferentes sesiones locales.
Resultado:

)%

Los objetos editados en la sesión local propia se
marcan con una banderita azul.

)&

Las banderitas también se muestran en el árbol del
proyecto y en los editores de TIA Portal.

16

6HVLµQORFDO

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.2 Vista general del trabajo con Multiuser Engineering
Acción

Ejemplo

3. Crear una sesión local para el "Usuario 2"

7,$

Se crea una segunda sesión local para que el segun‐
do usuario también pueda llevar a cabo su tarea en
su propia sesión local.

6HUYLGRUGHSUR\HFWRV

3UR\HFWRGHVHUYLGRU

● También en el segundo usuario se marcan
automáticamente con banderitas azules los
objetos editados en su sesión local.
Resultado:
Los objetos seleccionados en la sesión local propia
se marcan con una banderita azul.
Los objetos seleccionados en otra sesión local se
marcan automáticamente con una banderita amarilla
en la sesión local propia.

)%

)%

)&

)&

6HVLµQORFDO

6HVLµQORFDO

Así pues, cada usuario ve los objetos que edita él
mismo y los que edita otro usuario.
4. Check in de los cambios por parte del "Usuario 1"
A medida que se va trabajando en la sesión local
hasta alcanzar un determinado estado, se lleva a ca‐
bo el check in de los cambios en el proyecto de ser‐
vidor.

7,$

6HUYLGRUGHSUR\HFWRV

)%
&KHFNLQGHFDPELRV

3UR\HFWRGHVHUYLGRU

● Con el check in, los cambios realizados en los
objetos seleccionados se aplican al proyecto de
servidor.

DQWLFXDGR

● Después del check in, el "Usuario 2" ve en su
sesión local que hay un objeto "obsoleto".
Resultado:
Los cambios del "Usuario 1" se transfieren al proyec‐
to de servidor.

6HVLµQORFDO

)%

)%

)&

)&
6HVLµQORFDO

El "Usuario 2", si lo desea, puede actualizar su se‐
sión local con los nuevos datos del servidor.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

17

Uso de Multiuser Engineering
2.2 Vista general del trabajo con Multiuser Engineering
Acción

Ejemplo

5. El "Usuario 2" actualiza su sesión local

7,$

En su sesión local, el "Usuario 2" ve que en el pro‐
yecto de servidor hay un objeto con una versión más
reciente y actualiza la sesión local.

6HUYLGRUGHSUR\HFWRV

3UR\HFWRGHVHUYLGRU

● Al actualizar se aplica la versión más reciente del
proyecto de servidor y se inserta en la sesión
local propia.

$FWXDOL]DUVHVLµQORFDO

● Los objetos no seleccionados se reemplazan por
la versión actual del servidor. Los objetos
seleccionados se conservan sin cambios.
Resultado:
Los cambios del proyecto de servidor se transfieren
a la sesión local del "Usuario 2".

)%

)%

)&

)&
6HVLµQORFDO

6HVLµQORFDO

6. El "Usuario 2" hace un check in de sus cambios en
el proyecto de servidor

7,$
)&

El "usuario 2" ha terminado de realizar cambios en la
sesión local y hace un check-in de sus objetos mar‐
cados en azul en el proyecto de servidor.

3UR\HFWRGHVHUYLGRU
&KHFNLQGHFDPELRV

● Con el check in, los cambios realizados en los
objetos seleccionados se aplican al proyecto de
servidor.
● Después del check in, el "Usuario 1" ve en su
sesión local que hay un objeto "obsoleto".
Resultado:
Los cambios del "Usuario 2" se transfieren al proyec‐
to de servidor.
El "Usuario 1", si lo desea, puede actualizar su se‐
sión local con los nuevos datos del servidor.

18

VHVLµQORFDO

)%

)%

)& DQWLFXDGR

)&
VHVLµQORFDO

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.3 Principios básicos del servidor de proyectos
Acción

Ejemplo

7. La edición ha finalizado

7,$

La edición de las diferentes tareas de configuración
en las sesiones locales ha terminado.

6HUYLGRUGHSUR\HFWRV

3UR\HFWRGHVHUYLGRU
(GLFLµQILQDOL]DGD

Resultado:

(GLFLµQILQDOL]DGD

Se ha realizado el check in de todos los cambios en
el proyecto de servidor.
Las sesiones locales y el proyecto de servidor están
sincronizados.
En las sesiones locales ya no hay marcas.
Nota:
Si lo desea, puede exportar sesiones locales como
proyectos de usuario único y seguir trabajando con
ellos de la forma habitual en TIA Portal.

)%

)%

)&

)&

6HVLRQHVORFDOHV!H[SRUWDUFRPRSUR\HFWRGHXVXDULR¼QLFR

Consulte también
Requisitos del sistema para trabajar con Multiuser Engineering (Página 24)
Principios básicos del servidor de proyectos (Página 19)
Objetos soportados para Multiuser Engineering (Página 27)
Requisitos para proyectos de servidor (Página 57)
Exportar una sesión local como proyecto de usuario individual (Página 71)

2.3

Principios básicos del servidor de proyectos

Introducción
Para trabajar con Multiuser Engineering, Multiuser Commissioning o Exclusive Engineering se
requiere un servidor de proyectos que administre los proyectos de servidor y las sesiones
locales.
Cada versión de TIA Portal contiene un servidor de proyectos específico de la versión con la
funcionalidad correspondiente.
El servidor de proyectos permite:
● Crear proyectos de servidor en los que varios usuarios puedan trabajar paralelamente.
● Visualizar y administrar los proyectos de servidor ya existentes.
● Crear y administrar sesiones locales.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

19

Uso de Multiuser Engineering
2.3 Principios básicos del servidor de proyectos

Compatibilidad del servidor de proyectos con TIA Portal
Existe la posibilidad de instalar diferentes versiones del servidor de proyectos en un mismo
equipo y ejecutarlas simultáneamente.
La comunicación entre el servidor de proyectos y TIA Portal es posible para diferentes casos
de aplicación.
Consulte al respecto: AUTOHOTSPOT

Requisitos
Para utilizar la funcionalidad del servidor de proyectos es necesario haber instalado el software
adecuado para el servidor de proyectos. Otra posibilidad consiste en utilizar el servidor de
proyectos local instalado por defecto.

Posibles constelaciones de servidor
En TIA Portal están disponibles diferentes constelaciones de servidor:
1. El servidor de proyectos como "servidor dedicado", que se ejecuta como servidor externo
para una cooperación a largo plazo.
2. El "servidor de proyectos temporal", en el que la funcionalidad de servidor se concentra en
una estación de trabajo.
3. El "servidor de proyectos local", que se instala automáticamente con TIA Portal, aunque
solo dispone de una funcionalidad limitada.
En la siguiente tabla se resume el trabajo con las posibles constelaciones de servidor.

20

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.3 Principios básicos del servidor de proyectos

Resumen de las posibles constelaciones de servidor para el servidor de proyectos
1. Servidor de proyectos como servidor dedicado
● El servidor de proyectos puede instalarse
con TIA Portal o bien independientemente.

7,$

6HUYLGRUGHSUR\HFWRV

● Esta es la configuración de "red de oficina"
que se utiliza normalmente.

3UR\HFWRVGHVHUYLGRU

● El servidor de proyectos se ejecuta en un
equipo propio.
● Esta constelación de servidor es accesible
desde todos sitios y permite de forma
estándar un trabajo continuo a todas horas.
● El servidor de proyectos debe instalarse y
configurarse.

6HVLµQORFDO

6HVLµQORFDO

6HVLµQORFDO

2. Servidor de proyectos temporal:
● Un usuario del proyecto de servidor puede
asumir la función de servidor en su equipo.
● Esta es también una posible "configuración
de oficina".

3UR\HFWRVGH
VHUYLGRU

● Es necesario instalar y configurar el servidor
de proyectos temporal.
6HVLµQORFDO

6HVLµQORFDO

Uso de Team Engineering
Manual de programación y manejo, 11/2019

6HVLµQORFDO

21

Uso de Multiuser Engineering
2.4 Notas sobre la compatibilidad del servidor de proyectos
Resumen de las posibles constelaciones de servidor para el servidor de proyectos
3. Servidor de proyectos local:
● El servidor de proyectos local se ejecuta en el
equipo del usuario correspondiente.
● El servidor local está disponible de inmediato
sin más instalaciones ni configuraciones,
pues se instala junto con TIA Portal.
● Para el servidor de proyectos local no se
solicita ninguna licencia.
● No es posible acceder al servidor de
proyectos local desde otros equipos.

6HVLµQORFDO

● El servidor de proyectos local es ideal para
aprender y probar la funcionalidad de
Multiuser Engineering, Multiuser
Connissioning y Exclusive Engineering. No
requiere la instalación ni configuración de
ningún servidor.

/RFDOHVSURSLRV
3UR\HFWRVGHVHUYLGRU

● El servidor de proyectos local también puede
emplearse para una administración de
proyectos propia con función de "rollback" o
reversión.

Consulte también
Vista general del trabajo con Multiuser Engineering (Página 15)
Requisitos del sistema para trabajar con Multiuser Engineering (Página 24)
Objetos soportados para Multiuser Engineering (Página 27)

2.4

Notas sobre la compatibilidad del servidor de proyectos

Introducción
Para poder trabajar con Multiuser Engineering, con Multiuser Commissioning y con Exclusive
Engineering se requiere un servidor de proyectos que administre los proyectos de servidor y
las sesiones locales.
En TIA Portal existe la posibilidad de instalar diferentes versiones del servidor de proyectos en
un mismo equipo y ejecutarlas simultáneamente.

Compatibilidad del servidor de proyectos con TIA Portal
La comunicación entre el servidor de proyectos y TIA Portal es posible para los siguientes
casos de aplicación.

22

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.4 Notas sobre la compatibilidad del servidor de proyectos

Versión del servidor de proyectos

Versión de TIA Portal

V16

V16, V15.1, V15 y V14

V15.1

V15.2, V15 y V14

V15

V15 y V14

V14

V14

Nota
Notas sobre la compatibilidad del servidor de proyectos
La nueva funcionalidad de servidor agregada a V16 solo está disponible si se ha instalado
también TIA Portal V16.
Si se sigue trabajando con un TIA Portal <V16 o con un servidor <V16, solo estará disponible
la funcionalidad incluida en la correspondiente versión del producto.

Directorio de almacenamiento del servidor de proyectos
Cada versión de TIA Portal se suministra con una versión adecuada del servidor de proyectos.
Existe la posibilidad de definir un directorio de almacenamiento nuevo para el nuevo servidor
de proyectos, o bien de seguir utilizando un directorio de almacenamiento existente de un
servidor de proyectos anterior, en el que se hayan guardado los proyectos V15, por ejemplo,
para la nueva versión del servidor.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

23

Uso de Multiuser Engineering
2.5 Requisitos del sistema para trabajar con Multiuser Engineering
Para ello se aplican las reglas siguientes:
● Para utilizar diferentes servidores de forma paralela e independiente entre sí, hay que
configurar puertos y directorios de almacenamiento distintos para los diferentes servidores
a la hora de instalar el nuevo servidor.
● Para poder seguir utilizando un directorio anterior del servidor como ubicación para el
nuevo servidor de proyectos instalado, introduzca el directorio existente cuando configure
el nuevo servidor de proyectos. La ruta de almacenamiento se comprueba durante la
instalación del servidor de proyectos y recibirá un mensaje que le indicará que este
directorio de almacenamiento ya se utiliza para otro servidor.
A continuación, existen las opciones siguientes:
– Puede cancelar la instalación e introducir un directorio de almacenamiento nuevo para
el servidor de proyectos.
– O bien puede actualizar el directorio de almacenamiento para el servidor de proyectos.
Sin embargo, con la actualización el directorio dejará de ser válido para versiones
anteriores del servidor y ya no podrá iniciarse con el anterior servidor.
La actualización del directorio de almacenamiento no afecta a los proyectos de TIA Portal
guardados en el mismo.
Antes de efectuar la actualización se realiza una copia de seguridad interna, de modo que
si la actualización fallara es posible deshacerla.
Si durante la actualización no se producen errores, la función "Deshacer" no está
disponible.
Nota
Directorio de almacenamiento del servidor
El directorio de almacenamiento del servidor de proyectos está bloqueado durante la
instalación del servidor. De este modo se impide que se modifique un directorio de
almacenamiento al que se está accediendo activamente.

2.5

Requisitos del sistema para trabajar con Multiuser Engineering

Requisitos del sistema
Para trabajar con Multiuser Engineering se aplican los mismos requisitos de hardware y
software que para trabajar con TIA Portal.
Infórmese de las disposiciones válidas para los productos que tenga instalados en
"Instalación" > "Requisitos del sistema para la instalación".
Nota
Instalación de software idéntica como requisito para trabajar con Multiuser Engineering
Para poder trabajar sin limitaciones con Multiuser Engineering, es importante que en todos los
sistemas de ingeniería utilizados estén instalados los mismos productos de software de TIA
Portal con versiones idénticas.

24

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.5 Requisitos del sistema para trabajar con Multiuser Engineering
Nota
Acceso al servidor de proyectos
Los usuarios solo obtienen acceso al servidor de proyectos si no están registrados en el grupo
de administradores local del servidor de proyectos.
Nota
Acceso al proyecto del servidor de proyectos
Los usuarios solo obtienen acceso al proyecto de servidor si están registrados por lo menos
como "Member" en la administración de usuarios del servidor de proyectos.

Servidor de proyectos
Para poder trabajar con la funcionalidad completa de Multiuser Engineering se requiere tener
un servidor de proyectos instalado.
Para la instalación, configuración y administración del servidor de proyectos se requieren en
parte derechos de administrador.
Encontrará información sobre la compatibilidad del servidor de proyectos en:AUTOHOTSPOT
El servidor de proyectos se configura y administra utilizando las herramientas suministradas.
Para ello se dispone de dos procedimientos alternativos:
● Uso de la interfaz de usuario gráfica
● Uso de las "Administrative Tools" y "Power Tools" que se ejecutan con la línea de
comandos.
El servidor de proyectos puede configurarse y administrarse tanto con una cómoda interfaz de
usuario como con los comandos de la línea de comandos. Ambos procedimientos llevan a un
resultado idéntico.
Encontrará una descripción detallada del procedimiento en "Instalación del servidor de
proyectos" y en "Configurar y administrar el servidor de proyectos"

Perfiles de red para el servidor de proyectos
Existe la posibilidad de ajustar la capacidad deseada para el perfil de red utilizado en la
configuración de TIA Portal.
Para ello, seleccione en TIA Portal el perfil deseado en la lista desplegable que aparece en
"Opciones" > "Configuración" > "Servidor de proyectos" > "Perfiles de red de servidor".
Encontrará una descripción detallada de los perfiles de red en Ajustar perfiles de red para el
servidor de proyectos (Página 46)

Concesión de licencia para Multiuser Engineering
Para trabajar con Multiuser Engineering se requiere únicamente una licencia de versión
(Floating License) y una License Key (clave de licencia) correspondiente, en caso de trabajar
con un servidor de proyectos.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

25

Uso de Multiuser Engineering
2.5 Requisitos del sistema para trabajar con Multiuser Engineering
Mientras solo se utilice el servidor de proyectos local que está disponible con funcionalidad
restringida, no es necesario adquirir ninguna licencia adicional para la versión instalada de TIA
Portal.
La License Key puede instalarse conjuntamente con la instalación de TIA Portal o transferirse
posteriormente con el Automation License Manager . Multiuser Engineering comprueba que
haya una License Key válida en cuanto se abre una sesión local para editar objetos.
Si se encuentra una License Key válida, se abre la sesión local y puede trabajarse en ella sin
limitaciones.
Si no se encuentra ninguna License Key válida, aparece un mensaje de error.
Transitoriamente es posible activar una licencia "Trial" que permite trabajar en una sesión local.
Una vez que ha expirado la licencia "Trial" se requiere una licencia multiusuario válida para
poder trabajar en sesiones locales.
Para las acciones siguientes en el contexto de Multiuser Engineering no se necesita licencia
alguna:
● Configurar e iniciar el servidor de proyectos
● Abrir la administración de proyectos de servidor
● Agregar proyectos al servidor de proyectos
● Crear sesiones locales
● Borrar sesiones locales
● Exportar sesiones locales como proyecto de usuario único
Nota
Manejo de licencias
Preste especial atención a las indicaciones generales sobre el manejo de licencias en TIA
Portal. Encontrará esta información en el capítulo "Instalación", junto a los productos
correspondientes, en el sistema de información.

Archivar y desarchivar proyectos
Las sesiones locales no pueden archivarse ni desarchivarse.
El archivado o desarchivado de proyectos multiusuario provoca sesiones locales no válidas,
pues con estas acciones se interrumpe la conexión con el servidor de proyectos.

Abrir una sesión local como proyecto de referencia
Al trabajar con Multiuser Engineering (ingeniería multiusuario) es posible abrir una sesión
guardada como proyecto de referencia.
Encontrará más información sobre cómo trabajar con proyectos de referencia en:
AUTOHOTSPOT

26

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.6 Objetos soportados para Multiuser Engineering

Longitud de los nombres de ruta y archivo en Multiuser Engineering
Si los nombres de ruta y archivo tienen más de 259 caracteres en total, se muestra un mensaje
de error al trabajar con Multiuser Engineering. En él se señala que los nombres utilizados son
demasiado largos y que por este motivo no es posible llevar a cabo la acción deseada. En este
caso deben acortarse los nombres de ruta y/o archivo para poder realizar la acción deseada.

Consulte también
Ajustar perfiles de red para el servidor de proyectos (Página 46)

2.6

Objetos soportados para Multiuser Engineering

Introducción
La funcionalidad de Multiuser Engineering está disponible en TIA Portal para los objetos
listados a continuación.
Los objetos que todavía no soportan esta funcionalidad no pueden marcarse en la sesión local.
Por este motivo, no se incorporan al proyecto de servidor al realizar el check-in. Tras el checkin y la actualización de la sesión local, los cambios realizados en este tipo de objetos se
sobrescriben con el contenido del proyecto de servidor y se pierden.
Este tipo de objetos que no pueden marcarse se pueden editar en la Vista del proyecto de
servidor.
Los cambios de versión de las instrucciones también deberían realizarse en la vista del
proyecto de servidor.
En Multiuser Engineering también es posible trabajar con la funcionalidad de Team
Engineering como, p. ej., trabajar en una CPU conjunta e intercambiar datos mediante Inter
Project Engineering (IPE).

Objetos soportados por STEP 7 para Multiuser Engineering
Se soportan los objetos citados a continuación para el producto STEP 7:
● Bloques:
OB, FB, FC, DB globales y DB de instancia
● Software-Units:
Bloques contenidos, p. ej. OB, FB, FC, DB globales y DB de instancia.
Las relaciones solo pueden editarse en la vista del proyecto de servidor.
● Tipos de datos PLC y constantes:
A excepción de los tipos de datos de sistema generados automáticamente por el sistema.
● Variables:
A excepción de variables de sistema, que el propio sistema crea y borra.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

27

Uso de Multiuser Engineering
2.6 Objetos soportados para Multiuser Engineering
● Alarmas:
A excepción de alarmas de sistema.
Las alarmas de programa solo pueden marcarse para su edición junto con el FB o DB
correspondiente.
● Clases de alarma:
A excepción de clases de alarma de sistema.
● Listas de textos:
A excepción de listas de textos del sistema.
● Tablas de observación y forzado permanente
● Elementos de las librerías del proyecto
● Objetos tecnológicos:
A excepción de los objetos tecnológicos para Motion Control en CPU S7-1500.
● Funcionalidad Trace:
A excepción de configuraciones online.

Objetos soportados por WinCC para Multiuser Engineering
Se soportan los objetos citados a continuación para el producto WinCC:
● Imágenes:
A excepción de imagen global, imagen sinóptica, imágenes deslizables y filtros globales del
visor de avisos.
● Scripts:
A excepción del archivo de encabezado "GlobalDefinitions.h".
● Variables:
A excepción de variables de sistema, variables de receta, variables de fichero y variables
de datos sin formato generadas por el sistema.
● Avisos:
A excepción de avisos del sistema, avisos de control, categorías de avisos de sistema
predefinidas (también "Safety Warnings" para KTP700F, KTP900F), grupos de clases del
sistema y grupos de avisos del sistema, así como bloques de avisos.
● Listas de textos y listas de gráficos y entradas de listas de texto C

Objetos soportados por OPC UA para Multiuser Engineering
Se soportan los objetos citados a continuación para la comunicación OPC UA:
● Interfaces de servidor y cliente

28

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.7 Ajustes para trabajar con Multiuser Engineering

ATENCIÓN
Edición de objetos no soportados en la sesión local
Los objetos no soportados pueden editarse en una sesión local, pero no marcarse. Los
cambios en objetos no soportados no se incorporan al proyecto de servidor al realizar el
check-in.
Los cambios realizados en este tipo de objetos se pierden tras el check-in y tras una
actualización en la sesión local, ya que estos objetos se sobrescriben con el contenido del
proyecto de servidor.
Sin embargo, estos objetos no soportados pueden editarse de la forma habitual en la vista del
proyecto de servidor.

2.7

Ajustes para trabajar con Multiuser Engineering

Introducción
Para trabajar con Multiuser Engineering pueden efectuarse los siguientes ajustes en la ficha
"Multiusuario" del TIA Portal:
● General
● Buscar en el proyecto
● Ajustes de compilación
A continuación se describen las diferentes posibilidades de ajuste.

General
En el ajuste "General" se selecciona si los editores abiertos en las sesiones locales deben
mantenerse ocultos cuando se abra la vista del proyecto de servidor.
Esta opción está desactivada como ajuste predeterminado.

Buscar en el proyecto
Para que la búsqueda global también funcione en sesiones locales, deben indexarse los datos
para la búsqueda. Esta opción está activada por defecto para que la indexación para la
búsqueda siempre se ejecute durante el check-in.
Este ajuste es el recomendado.
Si se desactiva esta opción, la indexación no se realizará durante el check-in, sino en otro
momento.
Los datos de indexación se transfieren en forma de archivo al servidor de proyectos. Sin
embargo, una búsqueda en la sesión local solo es posible tras ejecutar una indexación. Si
durante el check-in no se ha ejecutado una indexación, esto puede prolongar los tiempos de

Uso de Team Engineering
Manual de programación y manejo, 11/2019

29

Uso de Multiuser Engineering
2.8 Funcionalidad mejorada de Multiuser Engineering
espera durante la búsqueda. También puede prolongar los tiempos de check-in para otros
usuarios que también hayan activado esta opción.

Ajustes de compilación
Determine los ajustes de compilación deseados para las sesiones locales. Los ajustes
realizados aquí se adoptan como predeterminados en el editor multiusuario y ya no pueden
cambiarse allí.
Seleccione los ajustes deseados.
● Compilar antes del check-in
Esta opción está activada por defecto y significa que antes del check-in debe ejecutarse un
procedimiento de compilación.
● Ajustes de compilación:
Este ajuste determina el alcance de la compilación de las modificaciones del software.
Existen las opciones siguientes.
– Objetos seleccionados (solo cambios)
Se compilan los cambios en los objetos marcados para el dispositivo seleccionado junto
con los objetos locales del dispositivo.
– Software de dispositivo (solo cambios)
Se compilan los cambios en los objetos marcados junto con la versión de software
existente en los dispositivos asignados.
Ejemplo: se han marcado y modificado varios objetos que forman parte de más de un
dispositivo (p. ej., de CPU_1 y de CPU_2). Durante la compilación estos objetos
marcados se compilan junto con las versiones de software de las dos CPU.
● Desactivar ajustes de compilación en el editor multiusuario
Si se activa esta opción, los ajustes de compilación del editor multiusuario ya no pueden
modificarse.
En este caso, los ajustes realizados aquí serán los predeterminados.

Consulte también
Ajustar perfiles de red para el servidor de proyectos (Página 46)
Introducción al servidor de proyectos (Página 44)

2.8

Funcionalidad mejorada de Multiuser Engineering

Introducción
En TIA Portal existe la posibilidad de trabajar con varios usuarios en proyectos multiusuario de
forma conjunta y simultánea en el marco de Multiuser Engineering .
Se ha perfeccionado la funcionalidad de Multiuser Engineering del modo descrito a
continuación.

30

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.8 Funcionalidad mejorada de Multiuser Engineering

Función "Marcar automáticamente"
● A partir de TIA Portal V15, los objetos editados con Multiuser Engineering se marcan
automáticamente. La función "Marcar automáticamente" marca automáticamente para el
check in los objetos recién creados o modificados en las sesiones locales poniéndoles las
marcas de multiusuario correspondientes. En este caso no se distingue si los cambios son
realizados por el usuario o por el sistema.
● Los objetos borrados también se marcan automáticamente para que puedan borrarse
también del proyecto de servidor tras el check in.
● Además del marcado automático, sigue existiendo la posibilidad de marcar manualmente
los objetos al editarlos.
● Al trabajar con Multiuser Engineering no existen diferencias funcionales entre objetos
marcados automáticamente y objetos marcados manualmente.
● La función "Marcar automáticamente" detecta todos los cambios realizados por el usuario
correspondiente en los objetos susceptibles de ser marcados y, mediante el marcado
automático de dichos objetos, le ayuda a evitar incoherencias en el trabajo en grupo con
Multiuser Engineering.
Consulte al respecto: Marcar objetos automática o manualmente para su edición
(Página 79)

Trabajar offline con Multiuser Engineering
● A partir de TIA Portal V15 es posible cambiar entre "modo online y offline" mientras se
trabaja con Multiuser Engineering. Esto significa que, aunque no exista ninguna conexión
activa con un servidor de proyectos, es posible seguir trabajando en una sesión local.
● Independientemente de si la conexión con el servidor se interrumpe durante el trabajo en
la sesión local o de si el usuario decide de antemano "trabajar offline", ahora es posible
seguir trabajando (con algunas restricciones) en los proyectos multiusuario sin una
conexión activa con el servidor.
Consulte al respecto: Trabajar offline con Multiuser Engineering (Página 33)

Mejoras en los editores multiusuario
● Los editores multiusuario se han ampliado con funciones de comentario para documentar
el tipo y alcance de los cambios efectuados.
● Durante el check in se dispone de un filtro para mostrar objetos con "conflictos".
Consulte al respecto: Funcionalidad del editor multiusuario (Página 39)

Compatibilidad del servidor de proyectos
● Las distintas versiones del servidor de proyectos pueden utilizarse paralelamente.
● El servidor de proyectos actual soporta también proyectos anteriores de TIA Portal con el
correspondiente alcance funcional.
● La funcionalidad de servidor agregada para una nueva versión solo está disponible si se ha
instalado también la última versión de TIA Portal y se utiliza la última versión del proyecto.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

31

Uso de Multiuser Engineering
2.8 Funcionalidad mejorada de Multiuser Engineering
● Si se sigue trabajando con una versión anterior de TIA Portal o con un servidor antiguo, solo
estará disponible la funcionalidad incluida en la versión instalada.
● Consulte al respecto: AUTOHOTSPOT

Mejoras en "Configuration Tool" y "Administration Tool" de la función multiusuario
● A partir de la versión V15 del servidor de proyectos, las herramientas multiusuario externas
para la configuración y administración del servidor de proyectos están disponibles en todos
los idiomas de TIA Portal.
● El servidor de proyectos contiene un historial ampliado del proyecto con función de
restablecimiento. Esto permite reproducir el desarrollo del proyecto en el servidor de
proyectos. Las principales etapas de un proyecto pueden ser comentadas y guardadas. El
historial del proyecto se puede exportar para realizar un análisis avanzado.
Consulte al respecto: AUTOHOTSPOT

Administración de usuarios en TIA Portal con Multiuser Engineering
● Si en un servidor de proyectos se carga un proyecto de usuario único protegido por medio
de la administración de usuarios, el proyecto de servidor resultante también estará
protegido. Los usuarios y grupos de usuarios incluidos en el proyecto de servidor se
conservan, igual que sus contraseñas, de modo que pueden iniciar las sesiones locales del
proyecto multiusuario siempre que dispongan de los correspondientes derechos de acceso
a las funciones.
● Si se protege una sesión local que antes estaba desprotegida mediante la administración
de usuarios, la protección se eliminará tras realizar el check in y actualizar la sesión local,
pues esta acción no protege el proyecto en el servidor. Lo mismo es válido si varios
usuarios protegen sus sesiones locales.
● Si se protege el proyecto en el servidor mediante la administración de usuarios, las
sesiones locales creadas en este proyecto de servidor quedan también protegidas en
cuanto se actualizan.
● Si durante la edición de una sesión local desprotegida se protege el proyecto en el servidor
mediante la administración de usuarios y la cuenta del usuario no tiene asignado el derecho
de acceso a la función "Abrir proyecto en modo de lectura/escritura", no será posible
realizar el check in de los cambios realizados en la sesión local, ni tampoco actualizar la
sesión.
Encontrará más información sobre la administración de usuarios de TIA Portal en el
capítulo "Utilizar la administración de usuarios".

Consulte también
Marcar objetos automática o manualmente para su edición (Página 79)
Trabajar offline con Multiuser Engineering (Página 33)
Funcionalidad del editor multiusuario (Página 39)

32

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.9 Trabajar offline con Multiuser Engineering

2.9

Trabajar offline con Multiuser Engineering

Introducción
A partir de TIA Portal V15 existe la posibilidad de trabajar también "offline" con Multiuser
Engineering.
Esto significa que en modo offline es posible seguir trabajando en una sesión local incluso sin
una conexión activa a un servidor de proyectos con las restricciones citadas a continuación.

Casos de aplicación para "trabajar offline"
Son posibles los siguientes casos de aplicación para trabajar sin conexión a un servidor:
● No es posible establecer una conexión con el servidor al abrir la sesión local.
– Aparece un cuadro de diálogo con el correspondiente mensaje.
– Si se hace clic en "Aceptar", la sesión local se abre sin conectarse al servidor y se puede
seguir trabajando offline.
● Una conexión existente con un servidor quedará interrumpida mientras se está trabajando
en una sesión local.
– Aparece un cuadro de diálogo con el correspondiente mensaje.
– Si se hace clic en "Restaurar" se puede seguir trabajando offline.
● Una conexión existente con un servidor quedará interrumpida mientras está abierta la vista
del proyecto de servidor.
– Aparece un cuadro de diálogo con el correspondiente mensaje.
– Si se hace clic en "Restaurar", se intentará restablecer la conexión con el servidor.
– Si se hace clic en "Descartar" se descartarán los cambios realizados en la vista del
proyecto de servidor y se abrirá la sesión local.
– Puesto que al abrir la sesión local no hay conexión con el servidor, aparecerá un cuadro
de diálogo con el correspondiente mensaje.
– Si se hace clic en "Restaurar" se puede seguir trabajando offline.
● Ha optado de antemano por el "trabajo offline" y ha seleccionado esta opción en TIA Portal,
en "Proyecto > Multiusuario > Trabajar offline".

Restricciones al "trabajar offline"
Existen las restricciones siguientes al trabajar en modo offline:
● Solo se muestran las marcas propias de su sesión local.
● Las marcas de otros usuarios, es decir, las banderitas amarillas y rojas, así como las
marcas de objetos obsoletos, no pueden mostrarse sin conexión al servidor.
● El símbolo del estado del servidor en la barra de herramientas multiusuario indica que se
está trabajando offline y que no hay conexión con el servidor.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

33

Uso de Multiuser Engineering
2.10 Elementos de mando en Multiuser Engineering
● No es posible hacer el check in de los cambios en el proyecto de servidor.
● No es posible actualizar la sesión local.

Cambiar entre "modo online y offline"
El comando "Proyecto > Multiusuario > Trabajar offline" permite cambiar entre el modo online
y offline cuando se trabaja con Multiuser Engineering .
El ajuste predeterminado es "Trabajar online". Al hacer clic en la casilla de verificación situada
delante del comando "Trabajar offline" se pasa al modo offline. En la sesión local, el símbolo
de conexión activa del servidor cambia de un círculo verde a un círculo gris claro. Cuando se
desmarca de nuevo "Trabajar offline" se restablece la conexión de servidor. Si la conexión de
servidor es correcta, el estado del servidor vuelve a mostrar el círculo verde.
El ajuste correspondiente se guarda junto con la sesión local.
Si se ha trabajado en la sesión local en "modo offline" y se cambia al "modo online", en la
sesión local abierta se comprueba antes que nada si hay conflictos de marcas. El resultado de
la comprobación se muestra con el correspondiente mensaje.
Si se encuentran conflictos, se le pedirá que abra el editor de cambios y que visualice los
conflictos existentes con el ajuste de filtro "Mostrar conflictos".
Solucione los conflictos existentes y siga trabajando online del modo habitual en la sesión local.

2.10

Elementos de mando en Multiuser Engineering

2.10.1

Símbolos multiusuario en la interfaz de usuario

Introducción
Cuando se trabaja con Multiuser Engineering y se abre una sesión local, aparecen símbolos
específicos de la función multiusuario en la interfaz de usuario de TIA Portal.

Símbolos multiusuario en la barra de herramientas
La interfaz de usuario de Multiuser Engineering muestra los símbolos siguientes en la barra de
herramientas cuando hay una sesión local abierta:

34

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.10 Elementos de mando en Multiuser Engineering

Símbolo

Significado
Check in
Si se hace clic en este botón se abre el editor multiusuario en la vista de cambios.
En la vista de cambios se muestran todos los objetos marcados para el check in; aquí pueden seleccio‐
narse los objetos deseados y se puede realizar su check in.
Actualizar
Si se hace clic en este botón se abre el editor multiusuario en la vista "Actualizar".
Si se desea, en esta vista es posible actualizar las sesiones locales con los nuevos contenidos del pro‐
yecto de servidor.
Abrir/cerrar un proyecto de servidor
Si se hace clic en este símbolo, el proyecto de servidor correspondiente a la sesión local se abre para su
edición.
Seguidamente se puedne realizar los cambios directamente en el proyecto de servidor.
El modo Multiuser Commissioning no está activo
Este símbolo indica que el modo Multiuser Commisioning no está activado y que el usuario trabaja en el
modo de ingeniería.
El "modo Multiuser Commisioning" se activa y desactiva en la Administration Tool . El ajuste del modo es
válido siempre para todas las sesiones locales de un proyecto de servidor.
El modo Multiuser Commisioning está activo
Este símbolo indica que el usuario trabaja en el modo Multiuser Commisioning.
El "modo Multiuser Commisioning" se activa y desactiva en la Administration Tool . El ajuste del modo es
válido siempre para todas las sesiones locales de un proyecto de servidor.
Estado del servidor "conectado"
Este símbolo indica que el servidor de proyectos correspondiente está disponible.
Estado del servidor "bloqueado para otros usuarios"
Este símbolo indica que el servidor de proyectos correspondiente se muestra bloqueado para otros usua‐
rios, ya que lo está utilizando usted.
Estado del servidor "bloqueado"
Este símbolo indica que el servidor de proyectos correspondiente está siendo utilizado por un usuario y
por este motivo está bloqueado.
El servidor también se muestra como bloqueado cuando un usuario trabaja en la vista del proyecto de
servidor.
Si coloca el puntero del ratón sobre este símbolo, obtendrá información adicional sobre el bloqueo.
Estado del servidor "no conectado"
Este símbolo indica que el servidor de proyectos correspondiente no está conectado.
Estado del servidor "Trabajar offline"
Este símbolo indica que no hay ninguna conexión con el servidor de proyectos porque la función "Trabajar
offline" está activada.
Desactive la casilla de verificación en "Proyecto > Multiusuario > Trabajar offline" para restablecer la
conexión con el servidor de proyectos.
Este símbolo superpuesto indica que el servidor de proyectos contiene una versión más reciente del
proyecto de servidor.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

35

Uso de Multiuser Engineering
2.10 Elementos de mando en Multiuser Engineering

Símbolos para la visualización de proyectos multiusuario
Los símbolos siguientes se muestran para proyectos multiusuario y sesiones locales en la
interfaz de usuario:
Símbolo

Significado
Servidor de proyectos
Este símbolo identifica a un servidor de proyectos.
Proyecto de servidor
Este símbolo identifica a un proyecto de servidor que forma parte de un servidor de proyectos.
Sesión local
Este símbolo identifica una sesión local que pertenece a un proyecto de servidor multiusuario.

2.10.2

Marcas multiusuario en la interfaz de usuario

Introducción
Cuando se trabaja con Multiuser Engineering , en la interfaz de usuario de TIA Portal se
muestran símbolos específicos de la función multiusuario, que facilitan el trabajo simultáneo
de varios usuarios. Con una visualización clara y específica del usuario se pretende conseguir
que la colaboración dentro de proyectos multiusuario y en las sesiones locales sea más
efectiva y transparente.

Marcar objetos
Para poder editar un objeto en el marco de Multiuser Engineering, primero debe "marcarse".
Solo los objetos seleccionados para el check-in pueden volver a transferirse al proyecto de
servidor una vez editados.
Las marcas solo pueden agregarse a "objetos marcables". Los objetos que no pueden editarse
en la sesión local, tampoco se marcan.
Estos objetos pueden editarse sin embargo en la vista del proyecto de servidor.
Los símbolos descritos a continuación indican los objetos que han marcado el propio usuario
y también otros usuarios.
Los objetos pueden marcarse manualmente haciendo clic en la banderita gris situada delante
del objeto en cuestión, o bien automáticamente. Si un objeto que todavía no se ha marcado
manualmente se abre en un editor en una sesión local, se marca automáticamente con la
función "Marcar automáticamente".

Símbolos de marcas en Multiuser Engineering
En Multiuser Engineering se utilizan los siguientes símbolos para las marcas:

36

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.10 Elementos de mando en Multiuser Engineering

Símbolo

Significado
Objeto marcable
El objeto puede marcarse para el check-in haciendo clic en él.
Objeto marcado
El objeto se ha marcado para el check-in en la sesión local propia.
Objeto marcado
El objeto ha sido marcado para el check-in en otra sesión local o en la vista de proyectos
del servidor.
Objeto marcado con conflicto
El objeto se ha marcado para el check-in en varias sesiones locales o en una sesión
local y en la vista de proyectos del servidor y provoca un conflicto.
Un objeto solo deberá marcarse una vez para el check-in en todo el área de trabajo
multiusuario.
De todas formas, es posible realizar el check-in de un objeto marcado en rojo. No
obstante, el check-in puede dar lugar a sobrescrituras no deseadas en el proyecto de
servidor ya que solo se aplicará a dicho proyecto el último estado para el que se ha
realizado el check-in.
Objeto obsoleto
Si uno de los símbolos anteriores se marca adicionalmente con esta superposición,
significa que el objeto ya no se corresponde con el último estado del proyecto de ser‐
vidor y debe actualizarse.
Si se realiza el check-in del objeto sin actualizar, se sobrescribirá la edición del otro
usuario, es decir, se deshará.
La actualización garantiza que todos los usuarios de un proyecto multiusuario tengan
un estado coherente.

Nota
Objetos sin banderita
Tenga en cuenta que los objetos sin banderita no pueden editarse en la sesión local, sino solo
en la vista del proyecto de servidor.

Visualización de marcas multiusuario en TIA Portal
Cuando se trabaja con Multiuser Engineering en la sesión local o en el proyecto de servidor,
las marcas específicas de la función multiusuario aparecen en las siguientes vistas de todos
los editores de TIA Portal:
● En el árbol del proyecto
● En la vista detallada
● En la ventana general, bajo "Detalles"
● En las vistas de librerías
En todas las representaciones de tablas del árbol del proyecto hay una primera columna
adicional cuando se trabaja con Multiuser Engineering. Esta primera columna de la tabla está

Uso de Team Engineering
Manual de programación y manejo, 11/2019

37

Uso de Multiuser Engineering
2.10 Elementos de mando en Multiuser Engineering
reservada para las marcas específicas de la función multiusuario que se han descrito
anteriormente.
El gráfico siguiente muestra a modo de ejemplo varios objetos seleccionados en el árbol del
proyecto:

2.10.3

Banner multiusuario en la interfaz de usuario

Introducción
Al trabajar con Multiuser Engineering se visualizan textos específicos de la función
multiusuario en forma de banners dentro de los editores.
Los textos de los banners contienen indicaciones y advertencias relacionadas con el
procedimiento que debe seguirse y que facilitan el trabajo.
Estos textos pueden expandirse y contraerse haciendo clic en el círculo amarillo con
exclamación.

Ejemplo de un texto de banner multiusuario

38

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.11 Funcionalidad del editor multiusuario

Funcionalidad de los textos de banner multiusuario
Los textos de los banners se muestran tanto cuando se trabaja en la sesión local como cuando
se trabaja en la vista del proyecto de servidor.
En cuanto se requiere información adicional para trabajar con Multiuser Engineering , aparece
un texto en forma de banner con fondo amarillo.
Los textos de los banners multiusuario tienen la función siguiente:
● Notas informativas sobre la edición del objeto abierto:
– Así, p. ej., los textos de los banners indican que el objeto abierto no se ha marcado para
el check-in y que por este motivo los cambios no se aplican en el proyecto de servidor.
– Indican que el objeto en cuestión no puede editarse en la sesión local, sino solo en la
vista del proyecto de servidor.
●

Los enlaces facilitan la ejecución de los pasos necesarios para continuar.
– Los enlaces permiten marcar cómodamente el objeto abierto o abrir la vista del proyecto
de servidor para continuar con la edición.

En cuanto se han llevado a cabo los pasos necesarios en los diferentes editores, los textos de
los banners desaparecen parcialmente del editor y se puede seguir trabajando de la forma
habitual.

2.11

Funcionalidad del editor multiusuario

2.11.1

Introducción al editor multiusuario

Introducción
El editor multiusuario se abre con el botón "Check-in" y "Actualizar sesión local" en la barra de
herramientas de Multiuser Engineering.

Vistas del editor multiusuario
El editor multiusuario dispone de dos vistas distintas, en función del botón de la barra de
herramientas multiusuario con el que se abrió:
● Vista "Check-in": Se abre haciendo clic en el botón "Check-in" en la barra de herramientas
del árbol del proyecto.
● Vista "Actualizar": Se abre haciendo clic en el botón "Actualizar sesión local" en la barra de
herramientas del árbol del proyecto.
La vista "Actualizar" puede abrirse siempre, incluso si la sesión local no contiene objetos
que deban actualizarse.
La estructura del editor multiusuario es idéntica en las dos vistas, aunque se muestran
diferentes botones y opciones.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

39

Uso de Multiuser Engineering
2.11 Funcionalidad del editor multiusuario

Nota
Visualización en el editor multiusuario
Si ha abierto el editor multiusuario y simultáneamente realiza cambios en su sesión local, no
podrá ver dichos cambios en el editor abierto hasta que haga clic en "Actualizar". Para ello,
haga clic en el botón "Actualizar" (flechas circulares) en el editor abierto.

2.11.2

Editor multiusuario en la vista "Check-in"

Introducción
El editor multiusuario se abre en la vista "Check-in" con el botón "Check-in" de la barra de
herramientas de Multiuser Engineering.

Nota
Visualización en el editor multiusuario
Si ha abierto el editor multiusuario y simultáneamente realiza cambios en su sesión local, no
podrá ver dichos cambios en el editor abierto hasta que haga clic en "Actualizar". Para ello,
haga clic en el botón "Actualizar" (flechas circulares) en el editor abierto.

40

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.11 Funcionalidad del editor multiusuario

Editor multiusuario en la vista "Check-in"
El gráfico siguiente muestra un ejemplo del editor multiusuario en la vista "Check-in":

Estructura del editor multiusuario
El editor multiusuario tiene la estructura siguiente:
1. Barra de herramientas:
Presenta los botones siguientes:
● En la parte derecha el botón para guardar los ajustes de diseño.
● En la parte izquierda los botones "Contraer todo", "Expandir todo" y "Mostrar conflictos".
Al hacer clic en "Mostrar conflictos", en el editor se muestran todas las marcas con
"conflicto" (banderita roja).
2. Área de botones:
Muestra los botones específicos de la función multiusuario para el check-in.
3. Línea de comentario:
La línea de comentario solo existe en la vista "Check-in". Aquí existe la posibilidad de introducir
un comentario para documentar los cambios realizados en la sesión local.
4. Área de trabajo:

Uso de Team Engineering
Manual de programación y manejo, 11/2019

41

Uso de Multiuser Engineering
2.11 Funcionalidad del editor multiusuario
Muestra la vista de los cambios antes de realizar el check-in.
● Muestra todos los objetos marcados en la sesión local para el check-in y la actualización,
tal como se representan en el árbol del proyecto.
● Muestra los avisos de estado con los resultados del check-in y de la actualización.
● La carpeta "Variables PLC" puede abrirse.
Al hacer clic en la tabla de variables, en la ventana inferior de la vista detallada se muestran
las variables seleccionadas para el check-in.
● La carpeta "Elementos de librería" solo aparece si se han marcado elementos de librería
para el check-in.
Si se selecciona la carpeta, en la vista detallada se muestran los elementos de librería
marcados.
● La carpeta "Objetos borrados" solo aparece si se han borrado objetos en la sesión local.
Si se selecciona la carpeta, en la vista detallada se muestran todos los objetos que se han
borrado en la sesión local.
5. Vista detallada:
Muestra información sobre elementos subordinados (en este caso sobre las variables PLC
marcadas) y avisos de estado.

Nota
Procedimiento para trabajar con el editor multiusuario
El procedimiento para trabajar con el editor multiusuario se describe detalladamente en los
capítulos siguientes.

2.11.3

Editor multiusuario en la vista "Actualizar"

Introducción
El editor multiusuario se puede abrir en la vista "Actualizar" con el botón "Actualizar la sesión
local" de la barra de herramientas de Multiuser Engineering.

Nota
Visualización en el editor multiusuario
Si ha abierto el editor multiusuario y simultáneamente realiza cambios en su sesión local, no
podrá ver dichos cambios en el editor abierto hasta que haga clic en "Actualizar". Para ello,
haga clic en el botón "Actualizar" (flechas circulares) en el editor abierto.

42

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.11 Funcionalidad del editor multiusuario

Editor multiusuario en la vista "Actualizar"
El gráfico siguiente muestra un ejemplo del editor multiusuario en la vista "Actualizar":

Estructura del editor multiusuario
El editor multiusuario tiene la estructura siguiente:
1. Barra de herramientas:
Presenta los botones siguientes:
● En la parte derecha el botón para guardar los ajustes de diseño.
● En la parte izquierda los botones "Contraer todo", "Expandir todo" y "Mostrar conflictos".
Al hacer clic en "Mostrar conflictos", en el editor se muestran todas las marcas con
"conflicto" (banderita roja).
2. Área de botones:
Muestra los botones específicos de la función multiusuario para el check-in y la actualización.
3. Línea de comentario:
La línea de comentario solo existe en la vista "Check-in". Aquí existe la posibilidad de introducir
un comentario para documentar los cambios realizados en la sesión local.
4. Área de trabajo:
Muestra la vista de los cambios antes de actualizar.
● Muestra todos los objetos marcados en la sesión local para la actualización, tal como se
representan en el árbol del proyecto.
● Muestra los avisos de estado con los resultados de la actualización.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

43

Uso de Multiuser Engineering
2.12 Indicaciones para trabajar con el servidor de proyectos TIA
● La carpeta "Variables PLC" puede abrirse.
Al hacer clic en la tabla de variables, en la ventana inferior de la vista detallada se muestran
las variables seleccionadas para el check-in.
● La carpeta "Elementos de librería" solo se visualiza si se han marcado elementos de librería
para el check-in.
Si se selecciona la carpeta, en la vista detallada se muestran los elementos de librería
marcados.
● La carpeta "Objetos borrados" solo se visualiza si se han borrado objetos en la sesión local.
Si se selecciona la carpeta, en la vista detallada se muestran todos los objetos que se han
borrado en la sesión local.
5. Vista detallada:
Muestra información sobre elementos subordinados (en este caso sobre las variables PLC
marcadas) y avisos de estado.

Nota
Procedimiento para trabajar con el editor multiusuario
El procedimiento para trabajar con el editor multiusuario se describe detalladamente en los
capítulos siguientes.

2.12

Indicaciones para trabajar con el servidor de proyectos TIA

2.12.1

Introducción al servidor de proyectos

Introducción
TIA Portal V16 permite trabajar cómodamente con el servidor de proyectos TIA, en adelante
denominado servidor de proyectos.
La funcionalidad del servidor de proyectos permite trabajar con Multiuser Engineering, con
Multiuser Commissioning y con Exclusive Engineering .
Además del servidor de proyectos dedicado se dispone de otro servidor de proyectos local con
funcionalidad limitada.
Con el servidor de proyectos se administran los proyectos de servidor que se editan con
Multiuser Engineering y Exclusive Engineering en las respectivas sesiones locales.
El servidor de proyectos debe instalarse primero y configurarse e iniciarse después con las
Power-Tools .
A continuación es posible configurar y administrar las conexiones con el servidor de proyectos
en TIA Portal, en la configuración de TIA Portal.
A la configuración del servidor de proyectos se accede en TIA Portal con el comando
"Opciones" > "Configuración" > "Servidor de proyectos".

44

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.12 Indicaciones para trabajar con el servidor de proyectos TIA

Propiedades del servidor de proyectos
El servidor de proyectos tiene las siguientes propiedades:
● La instalación del servidor requiere ajustes en el cortafuegos de Windows y, en su caso, un
certificado.
● Para instalar y configurar el servidor de proyectos se necesitan derechos de administrador.
● Un administrador configura y administra el servidor de proyectos con las Power Tools
suministradas.
● El servidor de proyectos está disponible para todos los usuarios del proyecto de servidor
que dispongan de los derechos necesarios, y también es accesible desde el exterior.
● El servidor de proyectos puede iniciarse y administrarse fuera de TIA Portal.
● El "alias" asignado como nombre al servidor de proyectos sirve de identificador y no puede
cambiarse posteriormente.

Cuenta del sistema Microsoft para el servidor de proyectos
Al instalar el servidor de proyectos se crea una cuenta de sistema de Microsoft para el servidor
de proyectos. Microsoft cambia la contraseña de esta cuenta cíclicamente.
Si la contraseña de esta cuenta ha expirado, es preciso renovar la contraseña y reiniciar el
servidor de proyectos a continuación.

Capacidad funcional del servidor de proyectos
Para trabajar de forma eficiente con el servidor de proyectos es posible crear como máximo
100 conexiones de servidor.
Cuando se alcanza este número se recibe un mensaje indicando que ya no es posible crear
más conexiones de servidor. Tras borrar las conexiones de servidor que ya no se necesitan
vuelve a ser posible agregar conexiones nuevas, hasta el número máximo.
Para el servidor de proyectos está disponible la capacidad funcional siguiente, en función del
hardware:

Proyectos y revisiones existentes en el servidor de proyectos Servidor de proyectos estándar (aplicación como servidor de
proyectos temporal)
Hardware:
Field PG M5 Advanced (o equivalente)
Intel® Core™ i5-6440EQ hasta 3.4 GHz·,16 GB RAM (32 GB
para grandes proyectos)
SSD con 50 GB memoria disponible en disco duro
Red de 1 GB:
Pantalla Full HD de 15.6" (1920 × 1080)
Número máximo de proyectos de servidor por servidor:

1000

Número máximo de proyectos activos por servidor:

100

Número máximo de zonas de trabajo activas por proyecto

63

Uso de Team Engineering
Manual de programación y manejo, 11/2019

45

Uso de Multiuser Engineering
2.12 Indicaciones para trabajar con el servidor de proyectos TIA
Proyectos y revisiones existentes en el servidor de proyectos Servidor de proyectos estándar (aplicación como servidor de
proyectos temporal)
Hardware:
Field PG M5 Advanced (o equivalente)
Intel® Core™ i5-6440EQ hasta 3.4 GHz·,16 GB RAM (32 GB
para grandes proyectos)
SSD con 50 GB memoria disponible en disco duro
Red de 1 GB:
Pantalla Full HD de 15.6" (1920 × 1080)
Número máximo de operaciones de carga paralelas por ser‐ 10
vidor
Número máximo de revisiones guardadas por servidor

ilimitado, el número puede parametrizarse
Ajuste predeterminado = 10
Asegúrese de que haya suficiente espacio disponible en me‐
moria para guardar las revisiones.

Nota
Hardware de servidor
Si el servidor utiliza un hardware más potente, las capacidades funcionales serán mayores.

Consulte también
Visualizar la conexión con el servidor (Página 49)
Editar la conexión con el servidor (Página 49)
Borrar la conexión con el servidor (Página 51)
Ajustar perfiles de red para el servidor de proyectos (Página 46)

2.12.2

Ajustar perfiles de red para el servidor de proyectos

Introducción
Al trabajar con proyectos de servidor existe la posibilidad de elegir entre tres perfiles de red
distintos, en función de la potencia de su propia red.
El perfil de red seleccionado determina el tiempo que trascurre hasta el aviso de tiempo
rebasado.

46

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.12 Indicaciones para trabajar con el servidor de proyectos TIA

Perfiles de red disponibles
Los siguientes perfiles de red están disponibles para trabajar con el servidor de proyectos:
Perfil de red

Campo de aplicación

"Rápida"

● Entorno de oficina
● Gigabit Ethernet
● Entorno de red permanente y normalmente sin fallos

"Medio"

● Entorno de oficina, grupo de trabajo pequeño con ubicación fija
● Ethernet rápida, WLAN, conexiones VPN
● Buen entorno de red con fallos más bien escasos

"Lenta"

● Puesta en marcha, lugares de trabajo cambiantes
● Conexión WLAN
● Posibles fallos (máquinas, instalaciones eléctricas)

Perfiles de red y compresión del servidor de proyectos
En la lista desplegable existe la posibilidad de seleccionar el perfil de red deseado que se
adapte a la capacidad de la red empleada.
El perfil de red seleccionado determina el tiempo que transcurre hasta que aparece un
mensaje de tiempo excedido.
Si como perfil de red está ajustado "Medio" o "Lento", se activará la compresión para la
transmisión de datos.
Para el perfil de red "Rápido" no se realiza ninguna compresión.
Nota
El cambio del perfil de red no se hace efectivo hasta que se reinicia el cliente multiusuario o el
servidor de proyectos.

Ajustar perfiles de red
Para ajustar los perfiles de red para el servidor de proyectos en TIA Portal, haga lo sigiuente:
1. En TIA Portal, elija el comando "Opciones" > "Configuración" > "Multiusuario".
En los ajustes que se muestran a continuación se indican las posibles opciones para los
perfiles de red.
2. Seleccione el perfil deseado en la lista desplegable "Perfiles de red multiusuario".
3. Reinicie el cliente multiusuario o el servidor de proyectos para que el cambio del perfil de
red sea efectivo.

Resultado
Se activa el perfil seleccionado.
Dependiendo del perfil seleccionado, la compresión se activará o no.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

47

Uso de Multiuser Engineering
2.12 Indicaciones para trabajar con el servidor de proyectos TIA

Nota
La conmutación no afecta al comportamiento de tiempo rebasado del perfil de red actual.

2.12.3

Agregar nuevas conexiones de servidor al servidor de proyectos

Introducción
Tras instalar el servidor de proyectos, en TIA Portal es posible agregar un máximo de 100
conexiones de servidor al servidor de proyectos.

Requisitos
TIA Portal y un servidor de proyectos están instalados.
El servidor de proyectos está configurado con las Configuration y Administration Tools y está
iniciado.

Agregar una nueva conexión de servidor al servidor de proyectos
Para agregar una nueva conexión de servidor, haga lo siguiente:
1. En TIA Portal seleccione el comando "Opciones > Configuración > Servidor de proyectos".
La ficha "Servidor de proyectos" se abre y se muestran todas las conexiones de servidor
existentes.
Si todavía no se ha configurado ninguna conexión de servidor solo se dispone de la entrada
para el "servidor de proyectos local".
2. En la columna "Nombre del servidor" del editor siguiente haga clic en el comando "Agregar
conexión de servidor".
Si ya se ha alcanzado el número máximo de 100 conexiones de servidor, aparece un
mensaje que indica que antes de poder agregar una conexión de servidor nueva debe
borrarse una de las existentes.
En caso de que sí sea posible agregar una conexión de servidor nueva, se abre el cuadro
de diálogo "Agregar nueva conexión de servidor".
3. Introduzca el nombre para el servidor de proyectos en el campo "Nombre de servidor".
Para el nombre y la ruta dispone como máximo de 256 caracteres. Se permiten letras,
caracteres, números y comas.
Si el nombre introducido ya se está utilizando o el nombre y la ruta tienen más de 256
caracteres, se muestra una indicación.
4. Seleccione el protocolo de transmisión deseado (https o http) para el servidor de proyectos.
Por defecto está seleccionado el protocolo "http".
5. Introduzca el host y el puerto deseados para la conexión con el servidor.
Si el host y/o el puerto introducidos ya se están utilizando, se muestra una indicación.
6. Haga clic en el botón "Agregar".

48

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.12 Indicaciones para trabajar con el servidor de proyectos TIA

Resultado
La nueva conexión de servidor se agrega y se muestra en "Opciones > Configuración >
Servidor de proyectos".

2.12.4

Visualizar la conexión con el servidor

Introducción
Cuando se trabaja con el servidor de proyectos, es posible visualizar las conexiones de
servidor existentes con el servidor de proyectos en la configuración de TIA Portal.

Requisitos
TIA Portal y un servidor de proyectos están instalados.
El servidor de proyectos está configurado con las Power Tools y está iniciado.

Mostrar la conexión de servidor multiusuario
Para visualizar las conexiones de servidor existentes, haga lo siguiente:
1. En TIA Portal seleccione el comando "Opciones > Configuración > Servidor de proyectos".
En la columna "Nombre del servidor" del editor siguiente se muestran todas las conexiones
de servidor existentes.
2. Dado el caso, haga clic en los títulos de las columnas "Nombre del servidor" o "Host" para
clasificar el contenido si busca una conexión de servidor concreta.

Resultado
Las conexiones de servidor existentes se muestran en el editor, en "Opciones > Configuración
> Servidor de proyectos".

2.12.5

Editar la conexión con el servidor

Introducción
Cuando se trabaja con el servidor de proyectos, es posible editar las conexiones de servidor
existentes con el servidor de proyectos en la configuración de TIA Portal y agregar nuevas
conexiones de servidor.

Requisitos
TIA Portal y un servidor de proyectos están instalados.
El servidor de proyectos está configurado mediante las Power Tools y está iniciado.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

49

Uso de Multiuser Engineering
2.12 Indicaciones para trabajar con el servidor de proyectos TIA

Editar la conexión con el servidor
1. En TIA Portal seleccione el comando "Opciones > Configuración > Servidor de proyectos".
En la columna "Nombre del servidor" del cuadro de diálogo siguiente se listan todas las
conexiones de servidor existentes.
Nota
No está permitido editar una conexión de servidor multiusuario que se esté utilizando en
una sesión local abierta.
2. Dado el caso, haga clic en los títulos de las columnas "Nombre del servidor" o "Host" para
clasificar el contenido.
3. Haga doble clic en la conexión de servidor que desea editar.
Resultado: Se abre el cuadro de diálogo "Editar conexión de servidor".
4. Introduzca aquí los cambios deseados.
– El campo "Nombre de servidor" no se puede editar.
– La entrada del campo "Host" sí puede editarse.
– La entrada del campo "Puerto" sí puede editarse.
5. Siempre que sea posible, seleccione el protocolo de transmisión "https" para que el
intercambio de datos sea más seguro, con codificación y certificado.
6. Haga clic en el botón "Aceptar" para que los cambios sean efectivos.

Resultado
Los cambios se aplican a la conexión de servidor seleccionada y se muestran en "Opciones >
Configuración > Servidor de proyectos".

2.12.6

Restablecer la conexión con el servidor

Introducción
Cuando se trabaja con Multiuser Engineering , es posible que se interrumpa la conexión
existente con el servidor de proyectos.
Si esto sucediera, recibirá un mensaje de error al respecto al cabo de unos 30 segundos.
Dispone de diferentes opciones, en función de si trabaja en la sesión local o en la vista del
proyecto de servidor.
En caso de trabajar en la sesión local existen las opciones siguientes:
● Restablecer la conexión con el servidor
● Guardar y cerrar la sesión local
● Cerrar la sesión local sin guardarla

50

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.12 Indicaciones para trabajar con el servidor de proyectos TIA
En caso de trabajar en la vista del proyecto de servidor existen las opciones siguientes:
● Restablecer la conexión con el servidor
● Descartar los cambios

Procedimientos posibles en la sesión local
Para restablecer una conexión con el servidor de proyectos, haga lo siguiente:
1. En el cuadro de diálogo que aparece, haga clic en el botón "Restaurar".
Si es posible restablecer la conexión con el servidor, el cuadro de diálogo se cierra y puede
seguir trabajando sin restricciones.
2. Haga clic en "Guardar y cerrar sesión local" si no sigue trabajando por el momento pero
desea guardar los cambios.
3. Haga clic en "Cerrar sesión local" si desea salir de la sesión local sin guardarla.

Procedimientos posibles en la vista del proyecto de servidor
Para restablecer una conexión con el servidor de proyectos, haga lo siguiente:
1. En el cuadro de diálogo que aparece, haga clic en el botón "Restaurar".
Si es posible restablecer la conexión con el servidor, el cuadro de diálogo se cierra y puede
seguir trabajando sin restricciones.
2. Haga clic en "Descartar cambios" si desea salir de la vista del proyecto de servidor sin
guardarla y descartar los cambios que haya realizado.
A continuación se cierra la vista del proyecto de servidor.

2.12.7

Borrar la conexión con el servidor

Introducción
Cuando se trabaja con Multiuser Engineering , es posible borrar las conexiones existentes con
el servidor multiusuarioen la configuración del TIA Portal.
En el TIA Portal es posible crear, editar y borrar un máximo de 100 conexiones de servidor
multiusuario.
Nota
Tenga en cuenta que solo es posible borrar una conexión de servidor si antes se han cerrado
todas las sesiones locales existentes con esta conexión de servidor.
Tenga en cuenta que no es posible establecer una conexión entre una sesión local y un a
conexión de servidor multiusuario borrada.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

51

Uso de Multiuser Engineering
2.13 Trabajar con el servidor de proyectos local

Requisitos
El TIA Portal y un servidor multiusuario están instalados.
El servidor multiusuario está configurado mediante las herramientas multiusuario y está
iniciado.

Borrar una conexión de servidor multiusuario
Para borrar una conexión de servidor multiusuario existente, proceda del siguiente modo:
1. En el TIA Portal seleccione el comando "Opciones > Configuración > Multiusuario".
En la columna "Nombre del servidor" del editor siguiente se listan todas las conexiones de
servidor multiusuario existentes.
2. Dado el caso, haga clic en los títulos de las columnas "Nombre del servidor" o "Host" para
clasificar el contenido.
3. Seleccione una o varias conexiones de servidor que desee borrar y haga clic en el comando
"Borrar" del menú contextual.
Se abre el cuadro de diálogo "Eliminar".
4. Haga clic en el botón "Sí" para confirmar el aviso siguiente y borrar definitivamente las
conexiones de servidor seleccionadas.

Resultado
La conexión de servidor multiusuario seleccionada está borrada y ya no se muestra en
"Opciones > Configuración > Multiusuario".

2.13

Trabajar con el servidor de proyectos local

2.13.1

Introducción al servidor de proyectos local

Introducción
Para poder trabajar con Multiuser Engineering se requiere un servidor de proyectos que
administre los proyectos multiusuario.
Al instalar TIA Portal se instala siempre automáticamente un servidor local, que no puede
borrarse. No requiere una instalación de software aparte.
El servidor de proyectos local es la primera entrada que se muestra en todos los idiomas en la
lista de servidores de proyectos con el nombre no modificable "Local Project Server" y puede
llamarse con el comando "Opciones" > "Configuración" > "Multiusuario".

52

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.13 Trabajar con el servidor de proyectos local

Ventajas del servidor de proyectos local
El servidor de proyectos local ofrece las siguientes ventajas:
● Permite probar Multiuser Engineering sin tener que instalar previamente un servidor de
proyectos dedicado.
● Permite guardar de forma intermedia el progreso del trabajo en el servidor de proyectos
local.

Requisitos
Para poder utilizar la funcionalidad del servidor de proyectos local debe estar instalado TIA
Portal.

Propiedades del servidor de proyectos local
Al contrario que el servidor de proyectos dedicado, el servidor de proyectos local únicamente
tiene una funcionalidad limitada.
El servidor de proyectos local tiene las siguientes propiedades:
● Solo está disponible para un usuario en su equipo y no puede borrarse.
● Solo puede iniciarse dentro de TIA Portal.
● Solo puede llamarse desde el equipo en el que se ejecuta la sesión local que está asignada
a este servidor de proyectos local.
● No soporta tareas administrativas.
● No requiere adaptaciones en los ajustes del cortafuegos ni tampoco certificados.
● Solo es posible editar el puerto, pero no modificar el nombre del servidor ni el host.

Consulte también
Configuración del servidor de proyectos local (Página 53)
Visualización del servidor de proyectos local (Página 55)
Iniciar el servidor de proyectos local (Página 55)
Finalizar el servidor de proyectos local (Página 57)

2.13.2

Configuración del servidor de proyectos local

Introducción
Un servidor de proyectos local se instala por defecto junto con la instalación de TIA Portal.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

53

Uso de Multiuser Engineering
2.13 Trabajar con el servidor de proyectos local
Es la primera entrada que se muestra en la lista de servidores y puede llamarse con el
comando "Opciones > Configuración > Servidor de proyectos" de "Conexiones de servidor
multiusuario".
Nota
No se permite configurar el servidor de proyectos local mientras esté conectado con una
sesión local abierta.
Si ya se ha creado una sesión local y el servidor de proyectos local no se reconfigura hasta más
adelante, primero habrá que detener el servidor y volver a iniciarlo para que la sesión local
actual no quede invalidada.

Requisitos
Se ha instalado TIA Portal.

Configuración del servidor multiusuario local
Para configurar el servidor de proyectos local, haga lo siguiente:
1. En TIA Portal, elija el comando "Opciones > Configuración > Multiusuario".
En la columna "Nombre del servidor" de "Conexiones de servidor multiusuario" se muestran
todos los servidores existentes.
2. Dado el caso, haga clic en los títulos de las columnas "Nombre del servidor" o "Host" para
clasificar el contenido.
3. Coloque el puntero del ratón en la fila correspondiente y ejecute el comando "Editar
conexión de servidor" del menú contextual.
– Los campos "Nombre del servidor" y "Host" no pueden editarse en el servidor de
proyectos local.
– La entrada del campo "Puerto" sí puede editarse. Introduzca aquí el puerto deseado.
4. Haga clic en el botón "Aceptar" para que los cambios sean efectivos.
Resultado: Los cambios se aplican al servidor de proyectos local y se muestran en "Opciones
> Configuración > Multiusuario" bajo "Conexiones de servidor multiusuario".

Nota
El servidor de proyectos local no puede borrarse.
El servidor de proyectos local se muestra en todos los idiomas con el nombre de servidor no
modificable (alias) "Local Project Server".

Consulte también
Finalizar el servidor de proyectos local (Página 57)

54

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.13 Trabajar con el servidor de proyectos local

2.13.3

Visualización del servidor de proyectos local

Introducción
Junto con la instalación de TIA Portal se instala por defecto un servidor de proyectos local .

Requisitos
Se ha instalado TIA Portal.

Visualizar el servidor de proyectos
Para visualizar el servidor de proyectos local, haga lo siguiente:
1. En TIA Portal seleccione el comando "Opciones > Configuración > Servidor de proyectos".
El servidor de proyectos local se muestra en el primer lugar de la columna "Nombre del
servidor" en "Conexiones de servidor".
A continuación se listan los servidores de proyectos dedicados que se hayan creado. Si el
servidor de proyectos local no es el primero de la lista, haga clic en la columna "Nombre del
servidor" para ordenar las entradas visualizadas.
Nota
El servidor de proyectos local no puede borrarse.
El servidor de proyectos local se muestra en todos los idiomas con el nombre de servidor no
modificable (alias) "Local Project Server".

2.13.4

Iniciar el servidor de proyectos local

Introducción
Junto con la instalación de TIA Portal se instala por defecto un servidor de proyectos local .
Es la primera entrada que se muestra en la lista de servidores de proyectos y puede llamarse
con el comando "Opciones > Configuración > Servidor de proyectos" de "Conexiones de
servidor".

Uso de Team Engineering
Manual de programación y manejo, 11/2019

55

Uso de Multiuser Engineering
2.13 Trabajar con el servidor de proyectos local

Iniciar el servidor de proyectos local
Para iniciar el servidor de proyectos local, haga lo siguiente:
1. En TIA Portal, elija el comando "Proyecto > Servidor de proyectos > Gestionar proyectos de
servidor".
Se abre el cuadro de diálogo "Gestionar proyectos de servidor".
2. En el campo "Seleccionar servidor" seleccione el servidor de proyectos local en la lista
desplegable. Se indica con el nombre "Local Project Server".
– Si ya hay proyectos de servidor, se mostrarán en la lista. Las diferentes columnas
ofrecen información detallada sobre la ruta y la fecha de modificación del proyecto
correspondiente. Si lo desea, puede cambiar el orden de las columnas.
– Si el servidor de proyectos local no se ha iniciado todavía, se preguntará si debe
iniciarse.
– Si no fuera posible conectarse con el servidor seleccionado, se informará al respecto.
3. Confirme con "Sí" la pregunta de si debe iniciarse el servidor de proyectos local en el equipo.

Resultado
Se establece la conexión con el servidor de proyectos local. Se abre una ventana de comando
que indica que el servidor está activado.
Nota
Cuando se cierra TIA Portal se deshace la conexión con el servidor de proyectos local, pero
este no se detiene de forma automática.
Para detener el servidor de proyectos local hay que cerrar la línea de comandos visualizada.

Abrir la sesión local asignada al servidor de proyectos local
Si se abre una sesión local asignada al servidor de proyectos local sin que este esté iniciado,
se preguntará si debe iniciarse el servidor de proyectos local.
Si se responde a la pregunta con "Sí" se inicia el servidor de proyectos local y se abre la sesión
local para editarla.
Si se responde "No" se cancela la operación.

Nota
Tenga en cuenta las indicaciones siguientes:
● Solo es posible borrar una conexión de servidor si antes se han borrado todas las sesiones
locales existentes con esta conexión de servidor.
● No es posible establecer una conexión entre una sesión local existente y un proyecto de
servidor borrado.

56

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.14 Crear y administrar proyectos de servidor

2.13.5

Finalizar el servidor de proyectos local

Introducción
Cuando se abre una sesión local asignada al servidor de proyectos local, se pregunta si debe
iniciarse el servidor de proyectos local. Si se finaliza la sesión local o se cierra TIA Portal, el
servidor de proyectos local no finaliza de forma automática,
sino que deberá hacerse de forma explícita.

Requisitos
El servidor de proyectos local se ha iniciado.

Procedimiento
Para finalizar el servidor de proyectos local, haga lo siguiente:
1. Finalice el servidor de proyectos local cerrando la línea de comandos visualizada.

Resultado
La conexión con el servidor de proyectos local se deshace y el servidor de proyectos local se
detiene.

Nota
Cuando se cierra TIA Portal se deshace la conexión con el servidor de proyectos local, pero
este no se detiene de forma automática.
Para detener el servidor de proyectos local hay que cerrar la línea de comandos visualizada.

2.14

Crear y administrar proyectos de servidor

2.14.1

Requisitos para proyectos de servidor

Introducción
Para poder trabajar simultánea y paralelamente con Multiuser Engineering es muy importante
que el proyecto de servidor que se utiliza como base esté bien estructurado.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

57

Uso de Multiuser Engineering
2.14 Crear y administrar proyectos de servidor

Requisitos para proyectos de servidor
Para crear proyectos de servidor multiusuario empiece con un proyecto de usuario único que
cumpla los requisitos siguientes:
● El proyecto debe incluir de antemano la configuración hardware con todas las conexiones
necesarias.
● Divida el programa de usuario en partes independientes.
● Cree una estructura lógica orientada tecnológicamente con carpetas y grupos para los
objetos que deben editar los diferentes usuarios.
● A la hora de estructurar el proyecto asegúrese de que varios usuarios puedan trabajar de
forma simultánea y exclusiva en los diferentes directorios del proyecto.
Ejemplo: Un usuario edita los bloques del grupo 1, al mismo tiempo que otro usuario edita
los bloques del grupo 2.
● Utilice un Main-OB y por cada parte del programa un FB o FC central que llame las
funciones de la parte correspondiente.
● Siempre que sea posible, cree una tabla de variables PLC propia para cada grupo.
● En el proyecto de usuario único, defina de antemano todos los idiomas del proyecto
necesarios que deberán utilizar los sistemas de ingeniería implicados.
● Cree ya todas las conexiones que se editarán en el proyecto multiusuario.
● Defina la resolución de la pantalla y especifique el tamaño de las imágenes HMI.
● Utilice bloques de datos globales, y no marcas, para guardar los datos de las diferentes
partes del programa.
● Cargue en un servidor de proyectos un proyecto de usuario único creado de acuerdo con
estas reglas; de este modo el proyecto se convertirá en un proyecto de servidor.
● Edite en las sesiones locales los objetos definidos del proyecto de servidor con varios
usuarios paralelamente. Al crear objetos nuevos dentro de las sesiones locales, asegúrese
de utilizar nombres simbólicos distintos.

Ejemplo de un proyecto de servidor multiusuario
El gráfico siguiente muestra un ejemplo de un proyecto de servidor multiusuario con una buena
estructura que permite trabajar de forma paralela en diferentes objetos dentro del contexto de
Multiuser Engineering .
En cada parte del programa existe un "Main-FB", que llama las funciones subordinadas para
esta parte del programa.
Las partes del programa que deben editar los diferentes sistemas de ingeniería se dividen en
las siguientes partes:
● Parte 1: "Conveyer"
● Parte 2: "Drill"
● Parte 3: "FurtherProgrammPart"
En la parte "Conveyer", "ConveyerMainFB" llama la función "ConveyerStartupFC".

58

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.14 Crear y administrar proyectos de servidor

2.14.2

Introducción al trabajo con proyectos de servidor

Introducción
Una vez que el servidor de proyectos está instalado y se ha configurado e iniciado con las
Power Tools, es posible gestionar los proyectos de servidor en TIA Portal.

Gestionar proyectos de servidor
Cuando se ejecuta el comando "Proyecto > Servidor de proyectos > Gestionar proyectos de
servidor", se muestran en el cuadro de diálogo que se abre todos los proyectos de servidor y
sesiones locales existentes para las conexiones de servidor presentes.
Si todavía no se han agregado proyectos de servidor, la lista estará vacía.
Si ya hay proyectos de servidor, se muestran en la lista. En la lista desplegable situada en la
parte superior del cuadro de diálogo puede seleccionarse la conexión de servidor cuyos
proyectos de servidor y sesiones locales existentes se listarán.
Los diferentes botones permiten realizar las siguientes acciones:
● "Seleccionar servidor": agrega una nueva conexión de servidor.
● "Actualizar": actualiza la visualización en el cuadro de diálogo.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

59

Uso de Multiuser Engineering
2.14 Crear y administrar proyectos de servidor
● "Gestionar proyectos de servidor": Abre el visor de proyectos de servidor en la
configuración.
● "Agregar proyecto al servidor": Abre el cuadro de diálogo y agrega un nuevo proyecto de
servidor a la conexión de servidor seleccionada.
Existen las opciones siguientes:
– Agregar proyecto nuevo
– Agregar proyecto existente
– Si lo desea, en el campo "Nombre del proyecto de servidor" puede introducir un nuevo
nombre para el proyecto de servidor.
● "Crear sesión local": crea una sesión local nueva para el proyecto de servidor seleccionado.
● "Cancelar": cancela la acción y cierra el cuadro de diálogo.
● "Agregar": agrega la sesión local seleccionada.
Nota
Visualizar proyectos de servidor
Solo es posible visualizar proyectos de servidor si existe una conexión con el servidor de
proyectos y este está iniciado.
Si no se ha podido establecer la conexión, se mostrará una indicación al respecto.

Nota
Borrar proyectos de servidor
Para evitar incoherencias en la administración de proyectos, no está permitido borrar
manualmente proyectos de servidor en el directorio de almacenamiento utilizando el Explorer.
Los proyectos de servidor deben borrarse siempre utilizando las Power Tools.
Antes de borrar un proyecto de servidor deben haberse borrado previamente todas sus
sesiones locales.

Comandos del menú contextual
Las acciones siguientes pueden ejecutarse mediante el menú contextual en el cuadro de
diálogo "Gestionar proyectos de servidor":
● Agregar un proyecto al servidor de proyectos.
● Crear una nueva sesión local.
● Borrar una sesión local.
● Exportar una sesión local como proyecto de usuario único.
● Archivar una sesión local.

60

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.14 Crear y administrar proyectos de servidor

Consulte también
Crear un nuevo proyecto de servidor (Página 61)

2.14.3

Crear un nuevo proyecto de servidor

Introducción
Cuando se trabaja con el servidor de proyectos, primero hay que crear un proyecto de servidor.
Un proyecto de servidor se genera agregando un proyecto estándar (proyecto de usuario
único) al servidor de proyectos instalado con el fin de utilizar dicho proyecto como proyecto de
servidor.
Nota
Proyectos de servidor
Tenga en cuenta los requisitos que debe cumplir un proyecto apto para multiusuario y que se
describen en Requisitos para proyectos de servidor (Página 57).

Requisitos
TIA Portal y un servidor de proyectos están instalados.

Procedimiento
Para crear un proyecto de servidor, haga lo siguiente:
1. En TIA Portal haga clic en el comando de menú "Proyecto > Servidor de proyectos >
Gestionar proyectos de servidor".
2. En el cuadro de diálogo que se abre, haga doble clic en el botón "Agregar proyecto al
servidor".
3. Seleccione el proyecto que desea agregar como proyecto de servidor:
– Para agregar un proyecto nuevo, haga clic en el botón "Agregar nuevo proyecto".
– Para agregar un proyecto existente, haga clic en el botón "Agregar proyecto existente".
4. En caso necesario, indique la ruta de origen deseada hacia el proyecto de usuario único o
navegue hasta el directorio deseado mediante el botón "...".
5. Seleccione el proyecto que desea agregar como proyecto de servidor.
6. Introduzca un comentario sobre el proyecto de servidor en "Detalles".
La información que aparece en "Nombre del proyecto" y "Publicado por" está siempre
preasignada y no puede editarse.
El nombre que se muestra para el proyecto de servidor sí puede editarse.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

61

Uso de Multiuser Engineering
2.14 Crear y administrar proyectos de servidor
7. Active el botón "Crear sesión local" si desea crear una sesión local para el proyecto de
servidor agregado.
8. Haga clic en el botón "Agregar".
Si el proyecto seleccionado ya existe como proyecto de servidor o lo tiene abierto otro
usuario, se recibe una información al respecto.

Resultado
El proyecto de usuario único seleccionado se agrega como nuevo proyecto de servidor y se
muestra en "Proyecto > Servidor de proyectos > Gestionar proyectos de servidor".
Si la opción "Crear sesión local" estaba activada, se crea y abre una sesión local nueva.

Consulte también
Requisitos para proyectos de servidor (Página 57)

2.14.4

Borrar un proyecto de servidor

Introducción
Una vez que el servidor de proyectos está instalado y se ha configurado e iniciado con las
Power Tools, es posible gestionar los proyectos de servidor en TIA Portal.
Las conexiones de servidor se pueden borrar en TIA Portal con el comando "Borrar" en
"Opciones > Configuración > Servidor de proyectos".
Los proyectos de servidor solo pueden borrarse con las Power Tools.

Borrar un proyecto de servidor en el servidor de proyectos
Para borrar un proyecto del servidor de proyectos, haga lo siguiente:
1. Abra las Power Tools como interfaz de usuario o utilice en la línea de comandos los
comandos disponibles para borrar un proyecto de servidor.
Consulte al respecto: AUTOHOTSPOT

2.14.5

Actualizar proyectos de servidor

Introducción
En el momento en que se intenta abrir con una versión reciente de TIA Portal una sesión local
creada con una versión anterior de TIA Portal, se recibe un mensaje al respecto. Para poder
utilizar sesiones locales y proyectos de servidor antiguos en la versión actual de TIA Portal,
primero hay que actualizar dichos proyectos.

62

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local

Actualizar proyectos de servidor
Para poder utilizar proyectos de servidor antiguos en la versión actual de TIA Portal, haga lo
siguiente:
1. Abra la sesión local con la versión antigua de TIA Portal con la que se creó esta sesión local.
2. Asegúrese de que se han guardado todos los cambios de todas las sesiones locales en el
correspondiente proyecto de servidor.
3. Exporte el proyecto de servidor con la versión de creación como proyecto de usuario único.
4. Abra este proyecto con la nueva versión de TIA Portal y ejecute la actualización del
proyecto que se propone.
5. Agregue el proyecto actualizado como nuevo proyecto de servidor al servidor de proyectos
actual.
6. Cree nuevas sesiones locales para el proyecto de servidor actual.

Resultado
El proyecto de servidor actualizado puede editarse del modo habitual con Multiuser
Engineering.

2.15

Trabajar en la sesión local

2.15.1

Crear y administrar una sesión local

2.15.1.1

Crear una sesión local

Introducción
Para poder trabajar con Multiuser Engineering hay que crear una sesión local. La sesión local
está asignada siempre a un proyecto de servidor específico.

Requisitos
TIA Portal y un servidor de proyectos están instalados.
Se ha creado un proyecto de servidor ejecutable.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

63

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local

Procedimiento
Para crear una sesión local, haga lo siguiente:
1. En TIA Portal, elija el comando "Proyecto > Servidor de proyectos > Gestionar proyectos de
servidor".
Se abre el cuadro de diálogo "Gestionar proyectos de servidor".
Se muestra automáticamente el último proyecto de servidor utilizado.
2. En el cuadro de diálogo "Gestionar proyectos de servidor" haga clic en el botón "Crear
sesión local".
Se abre el cuadro de diálogo "Crear sesión local".
Nota
Tenga en cuenta que el autor de la sesión local ya está introducido de forma estándar y no
puede editarse.
3. Elija el tipo de sesión local que desea crear.
– Seleccione Multiuser Engineering si desea trabajar en paralelo con varios usuarios.
– Seleccione Exclusive Engineering si desea trabajar en exclusiva en la sesión local.
4. Haga clic en "Crear" para crear la sesión local seleccionada.
5. Se abre el cuadro de diálogo "Gestionar proyectos de servidor", que muestra la sesión local
creada debajo del proyecto de servidor seleccionado.

Resultado
La sesión local seleccionada se crea y se muestra en el cuadro de diálogo "Gestionar
proyectos de servidor".

Consulte también
Abrir una sesión local (Página 65)
Guardar una sesión local (Página 67)
Cerrar una sesión local (Página 68)
Borrar una sesión local (Página 69)
Mostrar todas las sesiones locales que pertenecen a un proyecto de servidor (Página 70)
Exportar una sesión local como proyecto de usuario individual (Página 71)

64

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local

2.15.1.2

Abrir una sesión local

Introducción
Hay varias formas distintas de abrir una sesión local:
● En TIA Portal mediante los "Últimos proyectos utilizados"
● En TIA Portal mediante el comando "Proyectos > Servidor de proyectos > Gestionar
proyectos de servidor".
● Con TIA Portal cerrado desde el explorador de Windows
Cuando se abre una sesión local asignada al servidor de proyectos local, se pregunta si se
desea iniciar el servidor de proyectos local, si no se ha hecho ya. Haga clic en "Sí" para iniciar
el servidor de proyectos local y abrir la sesión local seleccionada.

Nota
Indicaciones para abrir sesiones locales:
● No es posible abrir sesiones locales cuyo nombre se haya modificado o que se hayan
borrado.
● Una sesión local también puede abrirse como proyecto de referencia.
Al abrir una sesión local que cumpla los criterios mencionados anteriormente se mostrará un
mensaje indicando que no es posible abrirla. En ese caso se le preguntará si desea exportar
esta sesión local como proyecto de usuario único.

Requisitos
TIA Portal y un servidor de proyectos están instalados.
Se ha creado un proyecto de servidor ejecutable y una sesión local válida.

Abrir una sesión local
Para abrir una sesión local que se haya utilizado últimamente, haga lo siguiente:
1. En TIA Portal, elija el comando "Proyecto > Abrir".
Aparece el cuadro de diálogo "Abrir proyecto", con una lista de los proyectos y sesiones
utilizados recientemente.
Los símbolos mostrados en la primera columna sirven para distinguir entre proyectos de
usuario único y proyectos multiusuario.
2. Seleccione la sesión local deseada y haga clic en el botón "Abrir".

Resultado
La sesión local seleccionada se abre.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

65

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local

Abrir una sesión local desde el proyecto de servidor correspondiente
Para abrir una sesión local desde el proyecto de servidor correspondiente, haga lo siguiente:
1. En TIA Portal, elija el comando "Proyecto > Servidor de proyectos > Gestionar proyectos de
servidor".
Se abre el cuadro de diálogo "Gestionar proyectos de servidor".
2. En la lista desplegable seleccione el servidor de proyectos deseado.
3. Seleccione la sesión local deseada en la lista que se muestra y haga clic en el botón "Abrir".

Resultado
Todos los cuadros de diálogo abiertos se cierran y la sesión local seleccionada se abre.

Abrir una sesión local desde el explorador de Windows
Para abrir una sesión local desde el Windows Explorer, haga lo siguiente:
1. Estando TIA Portal cerrado, navegue con el explorador de Windows hasta el directorio en
el que están guardadas las sesiones locales.
2. Seleccione la sesión local deseada con la extensión de archivo "*.als<versión>" y ábrala
haciendo doble clic en ella.

Resultado
TIA Portal se inicia y la sesión local seleccionada se abre.
Nota
Para cerrar una sesión local se procede igual que en un proyecto de usuario único, es decir,
con el comando "Proyecto > Cerrar".

Abrir una sesión local desde otra ubicación
Para abrir una sesión local que se ha desplazado a otra ubicación, haga lo siguiente:
1. En TIA Portal, elija el comando "Proyecto > Abrir".
Aparece el cuadro de diálogo "Abrir proyecto", con una lista de los proyectos y sesiones
utilizados recientemente.
2. Seleccione la sesión local deseada y haga clic en el botón "Abrir".
Se informará de que se está intentando abrir una sesión local desde otra ubicación.
3. Confirme la consulta mostrada con "Aceptar" si desea llevar a cabo la acción.

Resultado
La sesión local seleccionada se abre desde la nueva ubicación.
La información relacionada con la nueva ubicación se muestra en el servidor correspondiente.

66

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local

Abrir una sesión local sin conexión de servidor
Una sesión local también puede abrirse si el servidor correspondiente no está disponible en
estos momentos. En este caso, al abrir la sesión local se recibe un mensaje que le informa de
que es posible seguir trabajando en la sesión local offline con las restricciones siguientes:
● No es posible ver los cambios de los demás usuarios en la sesión local. No se muestran
banderitas amarillas ni rojas, ni tampoco objetos "anticuados".
● No es posible hacer el check in de los cambios en el proyecto del servidor hasta que se
restablece la conexión con el servidor.
Si se confirma el mensaje con "Aceptar", se podrá seguir trabajando en la sesión local sin
conexión de servidor.

Consulte también
Crear una sesión local (Página 63)
Guardar una sesión local (Página 67)
Cerrar una sesión local (Página 68)
Borrar una sesión local (Página 69)
Mostrar todas las sesiones locales que pertenecen a un proyecto de servidor (Página 70)
Exportar una sesión local como proyecto de usuario individual (Página 71)

2.15.1.3

Guardar una sesión local

Introducción
Hay varias formas distintas de guardar una sesión local:
● Como "sesión local" con la extensión "*.als", si se trabaja con Multiuser Engineering .
● Tras una exportación, como "proyecto de usuario único" con la extensión "*.ap".
Si se exporta y guarda una sesión local como "proyecto de usuario único", dicho proyecto
puede seguir editándose de la forma habitual, sin la funcionalidad multiusuario.
Mientras trabaje en la sesión local, guárdela de la forma habitual como sesión local para poder
seguir trabajando en el contexto de Multiuser Engineering .

Requisitos
TIA Portal y un servidor de proyectos están instalados.
Se ha creado un proyecto de servidor ejecutable y una sesión local válida.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

67

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local

Procedimiento
Para guardar una sesión local, haga lo siguiente:
1. Abra la sesión local.
2. Realice los cambios deseados.
3. En TIA Portal, elija el comando "Proyecto > Guardar".

Resultado
La sesión local se guarda en el servidor de proyectos correspondiente con la extensión de
archivo "*.als".

Consulte también
Crear una sesión local (Página 63)
Abrir una sesión local (Página 65)
Cerrar una sesión local (Página 68)
Borrar una sesión local (Página 69)
Mostrar todas las sesiones locales que pertenecen a un proyecto de servidor (Página 70)
Exportar una sesión local como proyecto de usuario individual (Página 71)

2.15.1.4

Cerrar una sesión local

Introducción
Para cerrar una sesión local se procede igual que en un proyecto de usuario único, es decir,
con el comando "Proyecto > Cerrar".

Requisitos
TIA Portal y un servidor de proyectos están instalados.
Se ha creado un proyecto de servidor ejecutable y una sesión local válida que está abierta.

Procedimiento
Para cerrar una sesión local, haga lo siguiente:
1. En TIA Portal, elija el comando "Proyecto > Cerrar".
2. Confirme la consulta posterior con "Sí" en caso de que desee guardar los cambios.

Resultado
La sesión local se cierra.

68

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local

Consulte también
Crear una sesión local (Página 63)
Abrir una sesión local (Página 65)
Guardar una sesión local (Página 67)
Mostrar todas las sesiones locales que pertenecen a un proyecto de servidor (Página 70)
Exportar una sesión local como proyecto de usuario individual (Página 71)

2.15.1.5

Borrar una sesión local

Introducción
Con el fin de evitar incoherencias en proyectos de servidor, no es posible borrar una sesión
local del modo habitual, es decir, con el comando "Proyecto > Borrar proyecto...".
Las sesiones locales solo pueden borrarse en el contexto del servidor de proyectos y en
función del proyecto de servidor correspondiente.
Nota
En caso de borrar una sesión local manualmente del directorio de almacenamiento con el
explorador de Windows, esta seguirá mostrándose en el cuadro de diálogo "Sesiones locales",
pero no podrá abrirse.
En este caso debe volver a borrarse explícitamente la sesión local en el contexto multiusuario,
tal como se describe a continuación.
Las sesiones locales existentes en el servidor multiusuario también pueden borrarse en el
marco de la administración del servidor utilizando las Power Tools. Consulte al
respecto:AUTOHOTSPOT

Requisitos
TIA Portal y un servidor de proyectos están instalados.
Se ha creado un proyecto de servidor multiusuario ejecutable y una sesión local válida.
La sesión local que se borrará no debe estar abierta.

Procedimiento
Para borrar una sesión local en el TIA Portal, haga lo siguiente:
1. En TIA Portal seleccione el comando "Proyecto > Servidor de proyectos > Gestionar
proyectos de servidor...".
Aparece el cuadro de diálogo "Gestionar proyectos de servidor" con una lista de las
sesiones existentes en el servidor seleccionado.
2. Seleccione el servidor que desee utilizar.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

69

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local
3. Seleccione el proyecto de servidor deseado en la lista y haga clic en la sesión local que
desee borrar.
4. Elija el comando "Borrar" del menú contextual.
Nota
Si una sesión local está abierta no puede borrarse; en este caso el comando para borrar
está inactivo.
Dado el caso, cierre primero la sesión local y haga clic de nuevo en el botón "Borrar".
5. Confirme la consulta posterior para borrar con "Sí".

Resultado
La sesión local seleccionada se borra y desaparece de la lista de sesiones locales existentes.

Consulte también
Crear una sesión local (Página 63)
Abrir una sesión local (Página 65)
Guardar una sesión local (Página 67)
Cerrar una sesión local (Página 68)
Mostrar todas las sesiones locales que pertenecen a un proyecto de servidor (Página 70)
Exportar una sesión local como proyecto de usuario individual (Página 71)

2.15.1.6

Mostrar todas las sesiones locales que pertenecen a un proyecto de servidor

Introducción
Existe la posibilidad de mostrar en TIA Portal todas las sesiones locales que pertenecen a un
proyecto de servidor.

Requisitos
TIA Portal y un servidor de proyectos están instalados.
Se ha creado un proyecto de servidor ejecutable y una sesión local válida.

70

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local

Mostrar todas las sesiones locales
Para mostrar todas las sesiones locales que pertenecen a un proyecto de servidor, haga lo
siguiente:
1. En TIA Portal, elija el comando "Proyecto > Servidor de proyectos > Gestionar proyectos de
servidor".
Se abre el cuadro de diálogo "Gestionar proyectos de servidor", que muestra todas las
conexiones existentes con el servidor de proyectos.
2. Seleccione la conexión de servidor deseada.
Se listan todos los proyectos de servidor que hay para esta conexión de servidor.
3. Seleccione el proyecto de servidor deseado y ábralo para visualizar todas las sesiones
locales correspondientes.
4. Si desea abrir una sesión local, seleccione la sesión local deseada y haga clic en el botón
"Abrir".

Resultado
Se muestran todas las sesiones locales que hay para el proyecto de servidor seleccionado.

Consulte también
Crear una sesión local (Página 63)
Abrir una sesión local (Página 65)
Guardar una sesión local (Página 67)
Cerrar una sesión local (Página 68)
Borrar una sesión local (Página 69)
Exportar una sesión local como proyecto de usuario individual (Página 71)

2.15.1.7

Exportar una sesión local como proyecto de usuario individual

Introducción
Cuando se trabaja con el servidor de proyectos existe la posibilidad de exportar una sesión
local como proyecto de usuario único.
Esto resulta ventajoso cuando no es posible abrir temporalmente una sesión local porque el
servidor de proyectos no está disponible, por ejemplo.
También puede suceder que una sesión local deje de ser válida y por eso no pueda abrirse.
Una sesión local queda invalidada por los motivos siguientes:
● Cuando se ha cambiado el nombre de la sesión local.
● Cuando la sesión local se ha desplazado a otra ubicación.
● Cuando se han modificado los ajustes del servidor correspondiente y por este motivo el
servidor ya no está disponible.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

71

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local
Cuando una sesión local se reconoce como no válida al abrirla, se muestra una consulta
preguntando si desea realizar una exportación como proyecto de usuario único.
Esto permite guardar los resultados del trabajo de la sesión local en un proyecto de usuario
único para seguir utilizándolos.
Los cambios de la sesión local exportada pueden copiarse y volver a transferirse al proyecto
de servidor.
También existe la posibilidad de exportar una sesión local con las Multiuser Power Tools.
Consulte al respecto: AUTOHOTSPOT

Exportar una sesión local como proyecto de usuario único
Para exportar una sesión local como proyecto de usuario único, haga lo siguiente:
1. En TIA Portal, elija el comando "Proyecto > Servidor de proyectos > Gestionar proyectos de
servidor".
Se abre el cuadro de diálogo "Gestionar proyectos de servidor", que muestra todas las
conexiones existentes con el servidor de proyectos.
2. Seleccione la conexión de servidor deseada.
Se listan todos los proyectos de servidor que hay para esta conexión de servidor.
3. Seleccione el proyecto de servidor deseado y ábralo para visualizar todas las sesiones
locales correspondientes.
4. Seleccione la sesión local y haga clic en el comando "Exportar como proyecto de usuario
único" del menú contextual.
Se abre el cuadro de diálogo "Exportar como proyecto de usuario único". El nombre de la
sesión local y el del archivo de exportación están preajustados y no pueden modificarse.
5. Introduzca la ruta de exportación deseada o navegue hasta la ubicación deseada y haga
clic en "Exportar".
Si el directorio de destino no está vacío se recibirá el mensaje correspondiente. Seleccione
un directorio de destino nuevo y vacío y vuelva a hacer clic en "Exportar".

Resultado
La sesión local se exporta como proyecto de usuario único y se guarda en la ubicación
ajustada.
Aparece un mensaje que indica que la exportación ha finalizado correctamente.
Al hacer clic en "Aceptar" se cierra el cuadro de diálogo de exportación y se muestra de nuevo
la lista de proyectos de servidor.

Consulte también
Crear una sesión local (Página 63)
Abrir una sesión local (Página 65)
Guardar una sesión local (Página 67)
Cerrar una sesión local (Página 68)

72

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local
Borrar una sesión local (Página 69)
Mostrar todas las sesiones locales que pertenecen a un proyecto de servidor (Página 70)

2.15.2

Editar objetos en la sesión local

2.15.2.1

Introducción al trabajo en sesiones locales

Introducción
Para poder trabajar en el marco de la Multiuser Engineering simultáneamente con varios
usuarios en un mismo proyecto multiusuario es preciso que cada usuario tenga su propia
sesión local.
En una o varias sesiones locales cada usuario puede introducir los cambios necesarios y
realizar a continuación el check-in en el proyecto de servidor, es decir, publicarlos.
Después del check in, los cambios realizados en la sesión local están disponibles para todos
los usuarios en el proyecto de servidor. Pueden seguir utilizándose y, en su caso, volver a
modificarse en sesiones locales posteriores.

Procedimiento para el trabajo en sesiones locales
Para poder editar las tareas de ingeniería asignadas en una sesión local en calidad de
multiusuario deben llevarse a cabo los pasos siguientes:
● TIA Portal y un servidor de proyectos están instalados.
● Otra posibilidad consiste en utilizar el servidor de proyectos local instalado por defecto.
● Se ha creado un proyecto ejecutable y preparado para trabajar con Multiuser Engineering.
● El proyecto preparado se ha cargado en el servidor de proyectos, con lo que se ha creado
un proyecto de servidor.
● Se han acordado las tareas y las capacidades para trabajar en las sesiones locales entre
todos los usuarios.
● Se ha creado una sesión local para cada tarea de ingeniería.

Reglas para el trabajo en sesiones locales
Para el trabajo en sesiones locales rigen las reglas siguientes:
● Una sesión local está asignada siempre a un servidor de proyectos definido y a un proyecto
de servidor definido.
● Cada sesión local contiene diferentes tareas para los distintos usuarios que estén
asignados a uno proyecto de servidor multiusuario.
● Una sesión local se guarda con la extensión "*.als" y su nombre no debe cambiarse en el
explorador de Windows.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

73

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local
● Mientras una sesión local esté abierta, la conexión de servidor y el proyecto de servidor
correspondientes no deberán cambiarse de nombre, desplazarse o borrarse.
● Las sesiones locales no pueden volver a abrirse ni editarse si el servidor de proyectos o el
proyecto de servidor correspondientes se han borrado.
● A partir de TIA Portal V15, puede abrirse una sesión local aunque no haya conexión con el
servidor. Después de confirmar un mensaje en este sentido, es posible seguir trabajando
offline, es decir, sin conexión de servidor.
● Una sesión local también puede abrirse como proyecto de referencia.
● Una sesión local puede exportarse como proyecto de usuario único y seguir editándose sin
la funcionalidad multiusuario.
● Una sesión local no puede archivarse ni desarchivarse. Estas acciones son posibles en
cuanto la sesión local se edita de nuevo como proyecto de usuario único.
● En la sesión local no puede trabajarse con herramientas externas. Los cambios realizados
con herramientas externas en sesiones locales se perderán cuando se haga el check in y
se actualice la sesión local. Las herramientas externas que modifiquen la estructura de
archivo de un proyecto de servidor solo pueden utilizarse en la vista del proyecto de
servidor.
● En la sesión local no puede modificarse la documentación definida por el usuario. Las
modificaciones efectuadas en dicha documentación se perderán cuando se haga el check
in y se actualice la sesión local. La documentación definida por el usuario solo puede
modificarse en la vista del proyecto de servidor.
Nota
Cambiar el nombre de objetos en sesiones locales
Solo debe cambiarse el nombre de objetos en la vista del proyecto de servidor, puesto que así
no se origina ninguna incoherencia en el proyecto de servidor.
Al cambiar el nombre de objetos en la sesión local hay que asegurarse de que estén
seleccionados todos los objetos afectados por el cambio de nombre y sus lugares de uso
(ubicaciones), y de que se haya realizado su check in en el proyecto de servidor. Si no es así,
el cambio de nombre incompleto originará errores de compilación y un proyecto de servidor
incoherente.
Antes de efectuar el check in de los lugares de uso (ubicaciones) del objeto al que se cambia
el nombre hay que asegurarse de que la selección no genera ningún conflicto (banderitas
rojas) y de que no se ha seleccionado ningún objeto antiguo, puesto que en tal caso al efectuar
el check in se sobrescribirá el trabajo de otro usuario.

74

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local

Nota
Edición de objetos de librería en sesiones locales
Solo deben editarse objetos de librería en la vista del proyecto de servidor, puesto que así no
se origina ninguna incoherencia en el proyecto de servidor.
Si se cambia la versión de objetos de librería en la sesión local, p. ej. al crear versiones nuevas
de objetos de instancia de tipo, hay que asegurarse de que todos los objetos afectados se
hayan seleccionado con el cambio de versión y de que se haya realizado su check in en el
proyecto de servidor.
Si no es así, al crear versiones nuevas se originarán errores de compilación y un proyecto de
servidor incoherente.

Nota
Encontrará los procedimientos explícitos para trabajar con sesiones locales en los siguientes
capítulos.

Consulte también
Mostrar la información de uso de los objetos marcados (Página 83)
Quitar la marca de los objetos (Página 82)
Realizar el check-in de objetos en el proyecto del servidor (Página 87)
Posibles conflictos durante el check-in (Página 90)
Posibles mensajes de error durante el check-in (Página 93)

2.15.2.2

Trabajar offline en la sesión local

Introducción
Cuando se abre una sesión local se establece automáticamente la conexión con el servidor de
proyectos correspondiente. Hasta ahora, en el entorno de Multiuser Engineering solo era
posible trabajar en la sesión local con una conexión de servidor activa.
A partir de TIA Portal V15 existe la posibilidad de trabajar "offline" en una sesión local sin
conexión de servidor.
Si al abrir la sesión local no es posible establecer una conexión con el servidor, se mostrará un
cuadro de diálogo con el correspondiente mensaje de error.
Primero se le preguntará si desea exportar la sesión local como proyecto de usuario único. Si
confirma esta opción con "Aceptar", aparece otro cuadro de diálogo que le informa de que no
se ha podido establecer ninguna conexión con el servidor.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

75

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local
Si también confirma este cuadro de diálogo con "Aceptar", podrá trabajar en la sesión local
incluso sin tener conexión con el servidor, aunque con las restricciones siguientes:
● Las marcas de otros usuarios no se ven en la sesión local offline, es decir, no se muestran
banderitas amarillas ni rojas, ni tampoco objetos anticuados.
● No es posible realizar el check in de los cambios realizados en la sesión local offline en el
proyecto del servidor hasta que exista una conexión con el servidor.
Nota
Indicaciones para abrir sesiones locales:
● No es posible abrir sesiones locales cuyo nombre se haya modificado o que se hayan
borrado.
● Una sesión local también puede abrirse como proyecto de referencia.
Al abrir una sesión local que cumpla los criterios mencionados anteriormente se mostrará un
mensaje indicando que no es posible abrirla. En ese caso se le preguntará si desea exportar
esta sesión local como proyecto de usuario único.

Requisitos
TIA Portal y un servidor de proyectos están instalados.
Se ha creado un proyecto de servidor ejecutable y una sesión local válida.

Abrir una sesión local y trabajar offline
Para abrir una sesión local, haga lo siguiente:
1. En TIA Portal, elija el comando "Proyecto > Abrir".
Aparece el cuadro de diálogo "Abrir proyecto", con una lista de los proyectos y sesiones
utilizados recientemente.
Los símbolos mostrados en la primera columna sirven para distinguir entre proyectos de
usuario único y proyectos multiusuario.
2. Seleccione la sesión local deseada y haga clic en el botón "Abrir".
3. Si no es posible establecer una conexión con el servidor de proyectos correspondiente, se
recibirá un mensaje al respecto. Se le preguntará si desea exportar la sesión local como
proyecto de usuario único.
4. Haga clic en "Aceptar".
5. Aparece un segundo cuadro de diálogo informando de que no se ha podido establecer
ninguna conexión con el servidor. Si se confirma este cuadro de diálogo con "Aceptar", se
podrá seguir trabajando en la sesión local sin conexión de servidor con las restricciones
citadas.

Resultado
La sesión local seleccionada se abre offline.
No se ven las marcas de otros usuarios.

76

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local
No es posible realizar el check in de los cambios hasta que exista una conexión de servidor.

2.15.2.3

Reglas para marcar objetos

Introducción
Para poder editar objetos de forma paralela en el marco de Multiuser Engineering, los objetos
que van a editarse tienen que marcarse en la sesión local.
Existen dos posibilidades igual de válidas para marcar objetos:
● A partir del TIA Portal V15, la función "Marcar automáticamente" se encarga de marcar
automáticamente los objetos autorizados para su edición. Esto significa que se marcará
automáticamente cada objeto "marcable" en la sesión local que se cree, edite o borre.
● Además, es posible marcar manualmente los objetos dentro de la sesión local:
– Mediante el comando "Seleccionar objetos para el check-in" del menú contextual.
– Haciendo clic en la banderita gris visualizada en el árbol del proyecto y en los diferentes
editores del TIA Portal.
Con el menú contextual es posible realizar selecciones múltiples para marcar objetos
manualmente. Para el marcado es imprescindible que en la selección haya por lo menos un
objeto marcable. Si en la selección múltiple no hay ningún objeto marcable, los comandos
del menú contextual posiblemente no estén activos.
Hay algunos pasos de edición (p. ej. cambios en la configuración hardware) que solo pueden
realizarse en la vista del proyecto de servidor.

Reglas para marcar objetos
Las siguientes reglas rigen para el marcado:
● Las marcas y la columna de marcas en el árbol del proyecto y en los diferentes editores solo
se muestran en el contexto de Multiuser Engineering.
● Los objetos marcables se señalizan con una banderita gris en el árbol del proyecto y en los
editores.
● Solo es posible marcar los objetos que pueden editarse con Multiuser Engineering.
● Si un objeto no lleva ninguna banderita gris antepuesta significa que no puede marcarse y
no debería editarse en la sesión local, pues no sería posible realizar el check-in de los
cambios en el proyecto del servidor. Los objetos que no pueden marcarse deben editarse
en la vista del proyecto de servidor.
● Algunos directorios de nivel superior no pueden marcarse, pero en cambio sí se pueden los
diferentes objetos de dicha carpeta.
Ejemplo: "Tabla de variables PLC": No es posible marcar la tabla de variables PLC
propiamente dicha, en cambio sí pueden marcarse las variables de la tabla abierta.
● El marcado automático es llevado a cabo por el sistema al editar un objeto susceptible de
ser marcado.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

77

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local
● Para marcar manualmente hay que hacer clic en la banderita gris o utilizar el menú
contextual. La banderita cambia de color cuando un objeto está marcado.
● Los colores de las banderitas ofrecen información adicional sobre la marca:
Símbolo

Significado
El objeto puede marcarse para el check-in.
El objeto está marcado en la sesión local propia.
El objeto está marcado en otra sesión local que forma parte del mismo proyecto de
servidor multiusuario.
Conflicto: El objeto se ha marcado simultáneamente en varias sesiones locales.

Particularidades al marcar objetos automáticamente
Las particularidades siguientes deben tenerse en cuenta en el marcado automático:
Cuando se trabaja en los diferentes editores del TIA Portal, algunos objetos se marcan también
automáticamente en carpetas de nivel superior o inferior. A continuación se listan algunas de
estas acciones a modo de ejemplo.
● El marcado automático de objetos en el entorno de Multiuser Engineering funciona tanto en
los editores abiertos como cuando se trabaja en el árbol del proyecto.
– Si se cambia el nombre de un objeto en el árbol del proyecto, el nuevo objeto se marca
automáticamente.
– Si se desplaza un objeto en el árbol del proyecto a otra carpeta dentro del mismo
dispositivo, el objeto desplazado se marca automáticamente.
– Sin embargo, si un objeto que no puede marcarse (p. ej. la tabla de variables PLC) se
desplaza a otra ubicación en el árbol del proyecto, los objetos subordinados no se
marcarán automáticamente.
● Cuando se trabaja en la librería del proyecto se marcan automáticamente todos los objetos
que se crean de nuevo. Sin embargo, si una carpeta completa de la librería se desplaza a
otra ubicación en el árbol del proyecto, los tipos incluidos en ella no se marcarán
automáticamente.
● Cuando se trabaja con textos del proyecto se marcan automáticamente los objetos
susceptibles de ser marcados a los que pertenecen los textos del proyecto.
– Ejemplo: En caso de modificar un comentario del bloque, el bloque correspondiente se
marcará automáticamente para que los cambios realizados se incorporen al proyecto
del servidor al realizar el próximo check-in.
● Cuando se trabaja con listas de textos de avisos PLC se marcan automáticamente todos los
cambios realizados en los textos.
– Si se crea una entrada nueva en una lista de textos, dicha lista se marca
automáticamente.
– Si se edita un texto existente en una lista de textos, dicha lista se marca
automáticamente.

78

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local
● Al editar supervisiones y avisos PLC, todos los cambios se marcan automáticamente.
– Si se agrega una entrada nueva o se modifican entradas existentes, se marcan
automáticamente tanto la entrada modificada como el bloque correspondiente.
● Al editar listas de textos y gráficos HMI, todos los cambios se marcan automáticamente. Sin
embargo, las marcas solo se muestran en el editor de nivel superior.
● Al editar variables HMI solo es posible marcar las variables de nivel superior.
– Si se realizan cambios en las variables subordinadas, se marcan automáticamente las
variables correspondientes de nivel superior.
– Si se realizan cambios en el editor de alarmas, se marcan automáticamente las alarmas
correspondientes a estas variables y no las variables propiamente dichas.
● Cuando se editan imágenes HMI y scripts HMI deben tenerse en cuenta algunas
particularidades en relación al marcado automático, pues no todas las acciones realizadas
allí conllevan un marcado automático de los objetos.
– Si se realizan cambios en el editor de scripts, el marcado automático solo se lleva a cabo
si la acción ejecutada puede deshacerse mediante "Deshacer".
– Si se realizan cambios en elementos individuales de una imagen, se marca
automáticamente la imagen correspondiente.
– Si se realizan cambios en la configuración global del filtro en las propiedades de una
imagen HMI, estos no se marcan automáticamente, pues esta configuración no es
propia de una imagen.
● Cuando se editan funciones Trace y de analizador lógico, las siguientes acciones no se
marcan automáticamente:
– Borrar el OB de ejemplo (OB30) de la carpeta de programación.
– Modificar el tiempo de ciclo en el OB 30.

2.15.2.4

Marcar objetos automática o manualmente para su edición

Introducción
Para poder editar objetos de forma paralela en el marco de Multiuser Engineering, los objetos
que deben editarse tienen que estar marcados en la sesión local.
Existen dos posibilidades igual de válidas para marcar objetos:
● La función "Marcar automáticamente", que marca automáticamente los objetos editados en
la sesión local.
En cuanto se abre, copia, pega o borra un objeto de la sesión local en un editor de TIA
Portal, dicho objeto se marca automáticamente para el check-in.
Lo mismo es válido para objetos que el sistema genera en segundo plano mientras el
usuario va editando el programa (p. ej. bloques de sistema, etc.).
● El marcado manual de objetos sigue siendo posible:
– Mediante el comando "Seleccionar objetos para el check in" del menú contextual.
– Haciendo clic en la banderita gris visualizada en el árbol del proyecto y en los diferentes
editores de TIA Portal.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

79

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local

Nota
Cambios en objetos no marcables
Si bien es posible realizar cambios en objetos no marcables (objetos que no tienen banderita
gris) en la sesión local, los cambios no se aplicarán al proyecto del servidor.
Estos cambios se pierden tras una actualización de la sesión local, ya que sobrescriben el
contenido del proyecto del servidor.
Si se intenta editar un objeto no marcable, aparecerá un texto de banner en el editor abierto.
El texto de dicho banner ofrece información sobre cómo proceder.

Procedimiento para marcar objetos automáticamente
Para marcar objetos automáticamente en una sesión local, haga lo siguiente:
1. Abra la sesión local que desee.
2. Edite el objeto deseado, p. ej. abriéndolo, copiándolo, pegándolo o borrándolo en un editor.

Resultado
El objeto se marca automáticamente durante la edición y también al borrarlo, y la banderita
azul o roja correspondiente se activa en la sesión local propia.
La banderita azul significa que el objeto puede editarse en la sesión local.
La banderita roja señaliza un conflicto que debe solucionarse hablando con los demás
usuarios.
En caso de que se produjera un conflicto de marcado automático al copiar y pegar objetos, se
recibirá un mensaje de error. Parte del procedimiento posterior es controlado por un cuadro de
diálogo que permite seleccionar la opción deseada.

Procedimiento para marcar objetos manualmente
Para marcar objetos en una sesión local, haga lo siguiente:
1. Abra la sesión local deseada y haga clic en la banderita gris que se muestra para marcar
un objeto para el check in.
2. Otra posibilidad consiste en seleccionar el objeto deseado y marcarlo mediante el comando
"Seleccionar objetos para el check-in" del menú contextual.
3. En la sesión local, marque todos los objetos que desee editar actualmente. Para marcar es
posible realizar selecciones múltiples. Después de marcarlos, los objetos se editan y
guardan de la forma habitual.

80

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local

Nota
Selecciones múltiples
En cuanto se marcan en la sesión local >= 50 objetos, ambos comandos de menú contextual
están activos simultáneamente, tanto el comando para marcar los objetos como el comando
para quitar las marcas.

Resultado
Los objetos marcados se señalizan con una banderita azul o roja.
La banderita azul significa que el objeto puede editarse en la sesión local.
La banderita roja señaliza un conflicto que debe solucionarse hablando con los demás
usuarios.

Nota
Marcas con conflicto (banderita roja)
Un conflicto de marcas debe solucionarse hablando con los demás usuarios y definiendo una
secuencia para editar los objetos marcados. Para solucionar el conflicto, un usuario debe
quitar la marca.

Consulte también
Introducción al trabajo en sesiones locales (Página 73)
Quitar la marca de los objetos (Página 82)
Mostrar la información de uso de los objetos marcados (Página 83)

2.15.2.5

Posibles conflictos durante el marcado automático

Introducción
Para poder editar objetos de forma paralela en el marco de Multiuser Engineering, los objetos
que deben editarse tienen que estar marcados en la sesión local. Al marcar automáticamente
objetos en la sesión local pueden darse los conflictos siguientes:
● Un objeto marcado automáticamente puede ser "antiguo".
En este caso, es imprescindible actualizar el objeto antes del check-in para que puedan
aplicarse los cambios existentes en el servidor de proyectos.
● Un objeto marcado automáticamente puede haber sido marcado previamente por otros
usuarios. En este caso, durante el marcado automático se muestra una banderita roja y el
conflicto debe solucionarse en acuerdo con los demás usuarios.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

81

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local

Nota
Marcas con conflicto (banderita roja)
Un conflicto de marcas debe solucionarse hablando con los demás usuarios y definiendo una
secuencia para editar los objetos marcados. Para solucionar el conflicto, un usuario debe
quitar la marca.

Visualización de conflictos durante el marcado automático
Si se produce un conflicto de marcado automático, en la ficha "Información" de la ventana de
inspección aparece un mensaje de error.
Este mensaje de error le informa de qué acción ha provocado el conflicto y del tipo de conflicto
de que se trata.
Parte del procedimiento posterior es controlado por un cuadro de diálogo que permite
seleccionar la opción deseada.
Ejemplo de un mensaje de error durante el marcado automático:
La operación "Insertar nuevo segmento" provoca un conflicto automático, pues uno de los
objetos marcados automáticamente está anticuado.

Solución de conflictos durante el marcado automático
Todos los conflictos que puedan surgir durante el marcado automático tienen que solucionarse
sin falta antes del check in, ya que de lo contrario existe el peligro de perder datos. Al realizar
el check in de objetos obsoletos y de objetos "marcados con conflicto" se pierden los cambios
o se sobrescriben. Proceda del siguiente modo:
1. Si un objeto se marca como "anticuado" durante el marcado automático, dicho objeto
deberá actualizarse en la sesión local antes del check in y antes de proseguir con su edición
para que puedan aplicarse los cambios existentes en el servidor multiusuario.
2. Si un objeto se marca con una banderita roja durante el marcado automático, dicho objeto
está siendo editado por otro usuario en otra sesión local. Para solucionar este conflicto, uno
de los usuarios debe quitar su marca manualmente.

2.15.2.6

Quitar la marca de los objetos

Introducción
Para poder editar objetos en el marco de Multiuser Engineering, estos objetos tienen que
marcarse automática o manualmente en las sesiones locales. Las marcas para el check in
también pueden quitarse.

82

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local
Esto es necesario especialmente en caso de conflicto (señalizado mediante una banderita
roja), cuando varios usuarios han marcado el mismo objeto para el check in en sus respectivas
sesiones locales.
Nota
Marcas con conflicto (banderita roja)
Un conflicto de marcas debe solucionarse hablando con los demás usuarios y definiendo una
secuencia para editar los objetos marcados. Para solucionar el conflicto, un usuario debe
quitar la marca.

Procedimiento
Para quitar la marca de los objetos en una sesión local, haga lo siguiente:
1. Abra la sesión local y haga clic en la banderita azul o roja que se muestra para quitar la
marca de un objeto.
2. Otra posibilidad consiste en seleccionar el objeto deseado y quitar la marca mediante el
comando "Anular la selección" del menú contextual.

Resultado
Los objetos que ya no están marcados y los objetos que estaban marcados como conflicto se
muestran del siguiente modo:
Símbolo antes

Acción

Símbolo después

Anular la selección
Anular la selección

Consulte también
Introducción al trabajo en sesiones locales (Página 73)
Marcar objetos automática o manualmente para su edición (Página 79)
Mostrar la información de uso de los objetos marcados (Página 83)

2.15.2.7

Mostrar la información de uso de los objetos marcados

Introducción
Para poder editar objetos de forma paralela en el marco de Multiuser Engineering, cada
usuario debe marcar en su sesión local los objetos que desea editar.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

83

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local
Para evitar que los objetos se marquen varias veces y se generen conflictos, se obtiene la
información siguiente sobre los objetos marcados:
● Usuario: indica quién ha marcado el objeto.
● Equipo: indica en qué equipo se ha marcado el objeto.
● Ubicación: indica dónde se ha marcado el objeto, si en una sesión local o en la vista del
proyectos de servidor.
Esta información le ayuda a consultar con otros usuarios cómo debe procederse con los
objetos marcados o marcados con conflicto.

Mostrar información de uso
Para visualizar la información de uso de los objetos marcados, haga lo siguiente:
1. Seleccione un objeto marcado en amarillo o rojo en la sesión local o en la vista del proyecto
de servidor.
2. Llame el comando "Información de uso" del menú contextual.

Resultado
Se abre el cuadro de diálogo "Información de uso", que muestra la información citada
anteriormente sobre el objeto marcado.

Nota
Marcas con conflicto (banderita roja)
Un conflicto de marcas debe solucionarse hablando con los demás usuarios y definiendo una
secuencia para editar los objetos marcados. Para solucionar el conflicto, un usuario debe
quitar la marca.

Consulte también
Marcas multiusuario en la interfaz de usuario (Página 36)
Introducción al trabajo en sesiones locales (Página 73)
Marcar objetos automática o manualmente para su edición (Página 79)
Quitar la marca de los objetos (Página 82)

84

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local

2.15.2.8

Actualizar la sesión local

Introducción
Para poder editar objetos en paralelo en el contexto de Multiuser Engineering, estos objetos
tienen que marcarse automática o manualmente en las sesiones locales. Si los objetos tienen
una versión más reciente en el proyecto del servidor que en la sesión local, se marcan como
"anticuados".
Dichos objetos pueden actualizarse en la sesión local haciendo clic en el símbolo "Actualizar
sesión local" de la barra de herramientas multiusuario.
Es posible que otros usuarios hayan creado objetos nuevos en el proyecto del servidor o hayan
borrado objetos que todavía no se muestran actualizados en su sesión local.
Estos objetos nuevos también se mostrarán en su sesión local después de actualizarla.
Cuando se actualizan objetos "anticuados", el contenido de la sesión local se sobrescribe con
el contenido más reciente del proyecto del servidor.
Nota
Actualizar la sesión local
● El botón para actualizar la sesión local abre la vista "Actualizar" aunque en la sesión local
no haya objetos que actualizar. Al hacer clic en el botón "Iniciar actualización" se actualiza
la sesión local.
● Durante la actualización, todos los cambios realizados en objetos no seleccionados en su
sesión local se sobrescriben con el contenido del proyecto del servidor. Los objetos
seleccionados se conservan sin cambios.
● En caso necesario existe la posibilidad de deshacer la actualización de la sesión local
haciendo clic en el botón "Restaurar". A continuación, se restablece la sesión local con el
contenido que tenía antes de la actualización.

Procedimiento para la actualización
Para actualizar objetos en una sesión local, haga lo siguiente:
1. Abra la sesión local que contiene objetos que deben actualizarse.
2. Haga clic en el botón "Actualizar sesión local" de la barra de herramientas multiusuario.
A continuación se abre el editor multiusuario con la vista de actualización, que muestra
todos los objetos marcados en su sesión local. Los objetos que tiene marcados no se
sobrescriben durante la actualización. Únicamente los objetos no marcados se sincronizan
con el contenido del proyecto del servidor.
3. Haga clic en el botón "Iniciar actualización" para llevar a cabo la actualización.
Se le informará sobre el progreso de la actualización. Si se producen errores, se mostrará
un mensaje de error.
4. Se recibe un mensaje indicando que la actualización ha finalizado correctamente. Haga clic
en "Aceptar".

Uso de Team Engineering
Manual de programación y manejo, 11/2019

85

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local

Resultado
Se han actualizado todos los objetos no seleccionados en la sesión local.
Los objetos seleccionados en la sesión local no se han sincronizado con la versión del servidor.

Nota
Diferencias online-offline tras la actualización
Después de cargar en el dispositivo, la información online sobre los objetos cargados en la
sesión local se guarda en TIA Portal. Esto permite comparar la versión online con la offline.
Ahora bien, puesto que no se realiza un check in de esta información online en el servidor,
dicha información deja de estar disponible en la sesión local tras una actualización. Si después
de la actualización se trabaja online en el dispositivo, TIA Portal no puede llevar a cabo ninguna
comparación, pues le falta información. Los objetos se muestran con diferencias online-offline
a pesar de que el contenido de los objetos es idéntico.
Para solucionar este error, después de actualizar la sesión local debería realizarse otra carga
completa en el dispositivo.

2.15.2.9

Restablecer la sesión local tras la actualización

Introducción
En la sesión local es posible actualizar objetos no seleccionados que tengan un estado más
reciente en el proyecto de servidor. Al actualizarlos, los objetos no seleccionados en la sesión
local se sobrescriben con el contenido más reciente del proyecto del servidor.
En caso necesario existe la posibilidad de deshacer la actualización de la sesión local. Para
ello, haga clic en el botón "Restaurar" en el editor multiusuario después de la actualización. A
continuación, se restablece la sesión local con el contenido que tenía antes de la actualización.

Nota
Botón "Restaurar"
El botón "Restaurar" solo está activo después de llevar a cabo una actualización y mientras sea
posible restablecer el contenido de la sesión local con la última versión.
El botón "Restaurar" está inactivo cuando no es posible restablecer la sesión local, p. ej.
porque no se ha llevado a cabo ninguna actualización.
El botón "Restaurar" no se ve afectado por el hecho de cerrar y volver a abrir el editor. Si hay
una actualización que puede deshacerse, el botón también estará activo después de cerrar y
volver a abrir el editor.

86

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local

Procedimiento para restaurar la sesión local
Para restablecer la sesión local tras la actualización, haga lo siguiente:
1. Abra la sesión local que se ha actualizado, en caso de que se haya cerrado entretanto.
Si la vista de actualización sigue abierta, empiece por el paso 3.
2. Haga clic en el botón "Actualizar sesión local" de la barra de herramientas multiusuario para
abrir el editor multiusuario en la vista de actualización.
3. Haga clic en el botón "Restaurar" para recuperar el estado de la sesión local anterior a la
última actualización.
4. En el siguiente cuadro de diálogo haga clic en "Sí" en la pregunta que se muestra.
5. En caso de que aparezcan errores se muestra un mensaje de error que debe confirmarse.
6. Si la restauración ha sido correcta aparece un mensaje. Haga clic en "Aceptar".

Resultado
La sesión local se ha restablecido con la versión anterior a la última actualización.

Consulte también
Introducción al trabajo en sesiones locales (Página 73)

2.15.2.10

Realizar el check-in de objetos en el proyecto del servidor

Introducción
Una vez que se han editado los objetos seleccionados en la sesión local, es posible realizar el
check in de los cambios en el proyecto del servidor.
Para el check in se aplican las reglas siguientes:
● Durante el check in en el proyecto del servidor solo se aplican los cambios realizados en
objetos marcados.
● En caso de haber editado en la sesión local objetos no marcables, estos cambios no se
aplicarán durante el check in.
● Al actualizar la sesión local después del check in, los cambios realizados en objetos no
marcables se sobrescribirán con el contenido del proyecto del servidor.
● Si se producen errores durante el check in, se mostrará un mensaje de error con
información detallada. Elimine los errores producidos del modo descrito en la sesión local
o en la vista del proyecto de servidor. A continuación, vuelva a iniciar el check in.
● Durante el check-in y durante la edición de objetos en la vista del proyecto de servidor, el
usuario en cuestión trabaja de forma exclusiva en el servidor de proyectos. Por este motivo
el servidor está bloqueado para todos los demás usuarios. El estado del servidor se marca
como "no disponible" en la barra de herramientas durante la edición exclusiva. Sin
embargo, sigue siendo posible crear una sesión local nueva y actualizar sesiones locales.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

87

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local

Opciones para el check in
Compilar
Existe la posibilidad de compilar los cambios realizados en la sesión local antes del check in.
Nota
Opciones de compilación mostradas en el check in
Las opciones de compilación que se muestran en el check-in dependen de los ajustes
realizados en la "Configuración de compilación" del TIA Portal, bajo "Opciones > Configuración
> Multiusuario".
En función de estos ajustes, es posible que las opciones de compilación estén desactivadas
en el editor multiusuario.
Modo de compilación
El modo de compilación determina el alcance de la compilación de las modificaciones del
software. Es posible seleccionar las opciones siguientes en la lista desplegable:
● Objetos marcados (solo cambios)
Se compilan los cambios en los objetos marcados para el dispositivo seleccionado junto
con los objetos locales del dispositivo.
● Software de dispositivo (solo cambios)
Se compilan los cambios en los objetos marcados junto con la versión de software existente
en los dispositivos asignados.
Ejemplo: Se han marcado y modificado varios objetos que forman parte de más de un
dispositivo (p. ej. de CPU_1 y de CPU_2). Durante la compilación estos objetos marcados
se compilan junto con las versiones de software de las dos CPU.
Mostrar la vista del proyecto de servidor
Al activar esta opción se ofrece la posibilidad de volver a visualizar en la vista del proyecto de
servidor los cambios realizados en los objetos seleccionados antes de realizar el check in,
junto con el contenido actual del proyecto del servidor.
En la vista del proyecto de servidor pueden seleccionarse y editarse todos los objetos, así
como quitarse marcas existentes. Seguidamente, los cambios se pueden guardar en el
proyecto del servidor o bien descartar y salir de la vista del proyecto de servidor sin realizar
más acciones.

Requisitos
Hay una conexión con el servidor de proyectos y el servidor está disponible.
Los objetos editados en la sesión local se han marcado para el check in.

88

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local

Procedimiento para el check in de cambios
Para realizar el check-in de los cambios de la sesión local en el proyecto del servidor, haga lo
siguiente:
1. Abra la sesión local para la que desee realizar el check in.
2. Haga clic en el botón "Check in" de la barra de herramientas multiusuario.
A continuación se abre el editor multiusuario con la vista "Check in", que muestra todos los
objetos marcados en la sesión local que se aplicarán al proyecto del servidor durante el
check-in.
3. Abra las carpetas indicadas y compruebe los objetos visualizados y marcados para el check
in.
4. Haga clic en el botón con la banderita roja en la barra de herramientas para visualizar
posibles conflictos.
Se muestran los conflictos existentes. Solucione los conflictos visualizados antes del check
in con el fin de evitar pérdidas de datos o sobrescrituras indeseadas.
Si no hay conflictos, vuelva a hacer clic en este botón para regresar a la vista anterior
"Check in".
5. Seleccione las opciones deseadas para el check in.
– "Compilar": seleccione el ajuste deseado en la lista desplegable.
– "Abrir vista del proyecto de servidor": si se hace clic en esta opción, antes del check in
se abrirá la vista del proyecto de servidor en el árbol del proyecto.
6. Introduzca un comentario para el historial de cambios para documentar los cambios que ha
realizado en la sesión local.
7. Después de la comprobación, haga clic en el botón "Iniciar check-in" para realizar el checkin de los objetos visualizados en el proyecto de servidor.
– Si se ha abierto la vista del proyecto de servidor, es posible hacer el check in de los
cambios mediante el botón "Guardar cambios". Si se hace clic en el botón "Descartar
cambios", los cambios se descartan y no se aplican al proyecto del servidor.
– Si desea conservar las marcas en la sesión local incluso después de realizar el check in,
active la opción "Conservar marcas para objetos".
– Si solo se han marcado algunos de los cambios y se ha realizado su check in, no deberá
realizarse una actualización con el fin de conservar los cambios en los objetos no
marcados.
8. Si el check in se ha completado correctamente, se mostrará un mensaje al final. Si se
confirma el mensaje con "Aceptar", la sesión local se sobrescribirá con el contenido del
proyecto del servidor. Si desea conservar los cambios en los objetos marcados, haga clic
en el botón "Mantener sesión local" del mensaje.
9. Si desea conservar las marcas en la sesión local, active la casilla de verificación "Mantener
marcas".
10.Si el check in no se ha ejecutado correctamente y se ha cancelado con errores, aparecerá
el mensaje de error correspondiente. Elimine dichos errores en la sesión local o en la vista
del proyecto de servidor. A continuación, vuelva a iniciar el check in.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

89

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local

Resultado
Se recibe un mensaje indicando que el check in ha finalizado correctamente.
Si el check in ha sido correcto, la sesión local se actualizará con el contenido del proyecto del
servidor y se abrirá.
● Después de la actualización, la sesión local contiene todos los cambios para los que
entretanto se ha realizado el check in en el proyecto del servidor.
● Si se han agregado objetos nuevos en el proyecto del servidor, ahora también se ven en la
sesión local.
● Si se han borrado objetos del proyecto del servidor, ahora tampoco se ven en la sesión local.
● Las marcas en la sesión local se borran automáticamente si no se ha activado la opción
"Conservar marcas para objetos".
● La conexión con el servidor vuelve a quedar libre después del check in. En la indicación de
la barra de herramientas, el estado del servidor cambia de "ocupado" a "disponible".

Consulte también
Posibles conflictos durante el check-in (Página 90)
Posibles mensajes de error durante el check-in (Página 93)
Introducción al trabajo en sesiones locales (Página 73)
Introducción al trabajo en la vista del proyecto de servidor (Página 97)
Editar objetos en la vista del proyecto de servidor (Página 101)

2.15.2.11

Posibles conflictos durante el check-in

Introducción
Durante el check-in de los cambios de la sesión local al proyecto de servidor correspondiente,
es posible que se produzcan errores que impidan que el check-in se realice correctamente.
Existe la posibilidad de ver los errores existentes en el editor multiusuario antes del check in.
Para ello, en el encabezado del editor multiusuario haga clic en la banderita roja y se mostrarán
todos los conflictos existentes en la sesión local. Si no hay conflictos, se mostrará un mensaje
al respecto.
Si a pesar de haber conflictos desea hacer el check in de los cambios de la sesión local en el
proyecto del servidor, debe confirmarlo explícitamente en este cuadro de diálogo, ya que este
procedimiento puede provocar la pérdida de datos.
Las constelaciones de errores que se citan a continuación pueden evitarse fácilmente
hablando con los demás usuarios y observando los procedimientos recomendados.

Posibles conflictos de nombres durante el check in
Durante el check in se producen conflictos de nombres cuando en sesiones locales distintas
se utilizan nombres idénticos para objetos diferentes.

90

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local
Ejemplo:
● el usuario 1 crea la variable "Motor_1" en su sesión local.
● El usuario 2 crea también la variable "Motor_1" en su sesión local.
Resultado:
el usuario 1 puede realizar el check in de sus cambios sin errores.
El usuario 2 no puede realizar el check in de sus cambios. Recibe un mensaje de error debido
a un conflicto de nombres y el check in se cancela. El error debe solucionarse en la sesión local.

Posibles conflictos al crear dispositivos en la sesión local
Si en una sesión local un usuario agrega dispositivos nuevos con objetos marcados, p. ej. una
CPU nueva con bloques, durante el check in se produce un conflicto.
Ejemplo:
● El usuario 1 crea en su sesión local una CPU nueva con dos bloques de función.
● El usuario 1 marca los bloques correctamente antes de editarlos.
Resultado:
el usuario 1 recibe un mensaje de error durante el check in, pues la CPU nueva que ha creado
localmente no se encuentra en el proyecto del servidor. La transferencia de dispositivos no se
soporta por el momento en Multiuser Engineering. En este caso se cancela el check in y se
abre la vista del proyecto de servidor. El usuario 1 puede copiar los objetos que ha creado
directamente en el proyecto del servidor. Es decir, la edición no se pierde.

Posibles conflictos al cambiar el nombre de objetos en la sesión local
Solo debe cambiarse el nombre de objetos en la vista del proyecto de servidor, puesto que así
no se origina ninguna incoherencia en el proyecto de servidor.
Al cambiar el nombre de objetos en la sesión local hay que asegurarse de que estén
seleccionados todos los objetos afectados por el cambio de nombre y sus lugares de uso
(ubicaciones), y de que se haya realizado su check in en el proyecto de servidor. Si no es así,
el cambio de nombre incompleto originará errores de compilación y un proyecto de servidor
incoherente.
Antes de efectuar el check in de los lugares de uso (ubicaciones) del objeto al que se cambia
el nombre hay que asegurarse de que la selección no genera ningún conflicto (banderitas
rojas) y de que no se ha seleccionado ningún objeto antiguo, puesto que en tal caso al efectuar
el check in se sobrescribirá el trabajo de otro usuario.

Posibles conflictos al cambiar el tipo de dispositivo en la sesión local
Si se cambia el tipo de un dispositivo en una sesión local, es decir, se sustituye una "CPU_1"
del tipo S7-15xx o se le cambia el nombre, por ejemplo, es posible que los objetos marcados
en la CPU "antigua" dejen de visualizarse en la sesión local.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

91

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local

Posibles conflictos al borrar dispositivos en el proyecto del servidor
Si en el proyecto del servidor se borran dispositivos existentes con los objetos que contienen,
es posible que se produzca un error de transferencia.
Ejemplo:
● el usuario 1 trabaja en su sesión local con objetos marcados que forman parte de la
"CPU_1".
● Entretanto, el usuario 2 borra la "CPU_1" en la vista del proyecto de servidor y guarda los
cambios en el proyecto del servidor.
Resultado:
el usuario 1 recibe un mensaje de error durante el check in, pues la "CPU_1" ya no existe en
el proyecto del servidor. En este caso, el usuario 1 puede insertar los objetos que ha editado
en la vista del proyecto de servidor. Tiene la posibilidad de copiar la "CPU_1" completamente
en el proyecto del servidor o bien de insertar los bloques que ha editado en otra CPU que ya
exista en el proyecto del servidor.

Escenarios posibles para el check in de objetos que se han borrado del proyecto del servidor
Al realizar el check in de objetos que se han borrado del proyecto del servidor, dichos objetos
vuelven a crearse.
Ejemplo:
● el usuario 1 edita en su sesión local la variable marcada "Variable_1", que forma parte de
un grupo que contiene una tabla de variables con diferentes variables.
● El usuario 2 borra este grupo con toda la tabla de variables en la vista del proyecto de
servidor y guarda los cambios en el proyecto del servidor.
Resultado:
el usuario 1 ignora la indicación de que la "Variable_1" está anticuada, sigue trabajando y
realiza el check in de los cambios. En el proyecto del servidor se vuelve a crear el grupo con
la tabla de variables, pero esta ahora solo contiene la variable "Tag_1".

Cambiar el nombre de objetos
Debe evitarse cambiar el nombre de objetos en la sesión local, pues en caso de hacerlo se
producirán conflictos de nombres durante el check in. En caso de que deba cambiarse el
nombre de objetos, debe realizarse directamente en la vista del proyecto de servidor. Al mismo
tiempo, no debe haber ninguna sesión local que forme parte de este proyecto del servidor y
contenga objetos marcados.

Idiomas del proyecto distintos en el proyecto del servidor y en la sesión local
Si se cambia un idioma del proyecto en una sesión local, el cambio se pierde después del
check in y la actualización en la sesión local.
Si un idioma del proyecto se borra posteriormente en la vista del proyecto de servidor, dicho
idioma deja de existir en el proyecto del servidor.

92

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local
Los cambios en los idiomas del proyecto deben llevarse a cabo siempre directamente en la
vista del proyecto de servidor. Asegúrese de que no haya sesiones locales abiertas con
marcas para este proyecto del servidor o que se estén editando.

Consulte también
Introducción al trabajo en sesiones locales (Página 73)
Abrir y cerrar la vista del proyecto de servidor (Página 99)

2.15.2.12

Posibles mensajes de error durante el check-in

Introducción
Durante el check-in de los cambios marcados de la sesión local al proyecto de servidor, es
posible que aparezcan los mensajes de error que se describen a continuación:
● Error de transferencia
● Error de compilación
A continuación se describe el procedimiento que debe seguirse cuando aparecen los
mensajes de error citados.

Error de transferencia
Cuando se producen errores de transferencia durante el check in, se ejecutan
automáticamente las acciones siguientes:
● Un mensaje de error informa del tipo de error ocurrido y del procedimiento que debe
seguirse. Tras confirmarlo, el mensaje se cierra.
● Cuando se produce un error de transferencia crítico, se restablece el estado anterior al
check in tanto en la sesión local como en el proyecto del servidor. No se pierden los
cambios. Elimine el error en la sesión local.
● Cuando se produce un error de transferencia que puede solucionarse en la vista del
proyecto de servidor, se abre esta última. Solucione el error en la vista del proyecto de
servidor.
● En el editor multiusuario se muestran y marcan los objetos erróneos en la vista "Check in".
● El servidor de proyectos bloqueado para el check-in queda libre de nuevo si el error se
soluciona en la sesión local.
● El servidor de proyectos permanece bloqueado mientras se soluciona el error en la vista del
proyecto de servidor. Tenga en cuenta que durante este tiempo ningún otro usuario puede
realizar el check in de sus cambios.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

93

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local

Solucionar errores de transferencia
Después de producirse un error de transferencia existen las siguientes posibilidades acerca
del procedimiento a seguir:
1. Elimine los errores que se indiquen en la sesión local o en la vista del proyecto de servidor.
2. A continuación, vuelva a iniciar el check in para que el proyecto esté libre de errores.

Error de compilación
Si durante el check in está activada la opción "Compilar", después de transferir los cambios
marcados al proyecto del servidor se ejecuta un proceso de compilación con la opción
seleccionada. Están disponibles los siguientes modos de compilación:
● Objetos marcados (solo cambios)
Se compilan los cambios en los objetos marcados para el dispositivo seleccionado junto
con los objetos locales del dispositivo.
● Software de dispositivo (solo cambios)
Se compilan los cambios en los objetos marcados junto con la versión de software existente
en los dispositivos asignados.
Nota
Opciones de compilación mostradas en el check in
Las opciones de compilación que se muestran en el check-in dependen de los ajustes
realizados en la "Configuración de compilación" del TIA Portal, bajo "Opciones >
Configuración > Multiusuario".
En función de estos ajustes, es posible que las opciones de compilación estén
desactivadas en el editor multiusuario.
Si la compilación se desarrolla correctamente, los cambios de la sesión local se transfieren
automáticamente al proyecto del servidor.
Cuando se produce un error de compilación, se ejecutan las acciones siguientes:
● Se cierra el indicador de progreso del check in y este se detiene.
● En el editor multiusuario se muestran y marcan los objetos erróneos en la vista "Check in".
● El servidor de proyectos permanece bloqueado mientras se soluciona el error en la vista del
proyecto de servidor. Tenga en cuenta que durante este tiempo ningún otro usuario puede
realizar el check in de sus cambios.

Solucionar errores de compilación
Después de producirse un error de compilación existen las siguientes posibilidades acerca del
procedimiento a seguir:
1. Elimine los errores que se indiquen en la sesión local o en la vista del proyecto de servidor.
2. A continuación, vuelva a iniciar el check in con compilación para que el proyecto esté libre
de errores.

94

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local

Ignorar errores de compilación
También puede ignorar los errores de compilación visualizados y hacer el check in de un
proyecto defectuoso.
ATENCIÓN
Check in con errores de compilación
Aunque este procedimiento es posible, no lo recomendamos.
Para que todos los usuarios implicados puedan seguir trabajando de forma eficaz, procure
que en el servidor de proyectos se efectúe el check-in únicamente de proyectos sin errores.

Consulte también
Introducción al trabajo en sesiones locales (Página 73)

2.15.2.13

Borrar objetos en la sesión local

Introducción
Cuando se trabaja con Multiuser Engineering existe la posibilidad de borrar objetos en la
sesión local.
Para borrar objetos se aplican las reglas siguientes:
● Los objetos borrados dejan de visualizarse en la sesión local.
● La función "Deshacer" permite deshacer la acción "Borrar" en la sesión local.
● El sistema marca automáticamente los objetos borrados y los muestra en la carpeta
"Objetos borrados" del editor multiusuario.
● Si se quita la marca de un objeto borrado en el editor multiusuario, no se realizará el check
in del objeto borrado en el proyecto del servidor. Esto significa que el objeto borrado en la
sesión local no se borra en el proyecto del servidor. En la sesión local, el objeto que se ha
borrado pero cuyo check in no se ha realizado, solo se mostrará de nuevo cuando se vuelva
a actualizar.
● Cuando se borran objetos no marcables en la sesión local, estos objetos vuelven a
aparecer en la sesión local después de la actualización. Durante el check in solo se
transfieren los objetos marcados. Puesto que los objetos borrados no podían marcarse, el
borrado no se aplica al proyecto del servidor. La próxima vez que se actualice la sesión
local, dichos objetos se insertarán de nuevo en la sesión local.

Requisitos
Hay una conexión con el servidor de proyectos y el servidor está disponible.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

95

Uso de Multiuser Engineering
2.15 Trabajar en la sesión local

Procedimiento para borrar objetos
Para borrar objetos en la sesión local, haga lo siguiente:
1. Abra la sesión local que desee.
2. Borre el objeto marcado deseado o borre un objeto no marcado pero marcable.
3. Haga clic en el botón "Check in" de la barra de herramientas multiusuario.
A continuación se abre el editor multiusuario con la vista "Check in", que muestra todos los
objetos marcados en la sesión local que se aplicarán al proyecto del servidor durante el
check-in. En la carpeta "Objetos borrados" se visualizan los objetos borrados en la sesión
local.
4. Compruebe los objetos mostrados y marcados para borrar. Existe la posibilidad de quitar
las marcas si finalmente no desea borrar algunos objetos marcados previamente.
5. Seleccione las opciones deseadas para el check in:
– "Compilar": si se hace clic en esta opción, los cambios se compilarán antes del check in
con la opción "Software (solo cambios)". Esto significa que los cambios de software que
haya realizado se compilarán en el proyecto del servidor con todos los objetos
relacionados con dichos cambios.
– "Abrir vista del proyecto de servidor": si se hace clic en esta opción, antes del check in
se abrirá la vista del proyecto de servidor en el árbol del proyecto. La vista del proyecto
de servidor muestra ante todo el contenido del proyecto de servidor actual con los
cambios marcados para el check in. En la vista del proyecto de servidor pueden
seleccionarse y editarse todos los objetos, así como quitarse marcas existentes.
6. Haga clic en el botón "Check-in" para realizar el check-in de los objetos visualizados en el
proyecto de servidor.
Si desea conservar las marcas en la sesión local incluso después de realizar el check in,
active la opción "Conservar marcas".
7. Si el check in no se ha ejecutado correctamente y se ha cancelado con errores, aparecerán
los mensajes de error correspondientes. Elimine los errores en la sesión local o en la vista
del proyecto de servidor. A continuación, vuelva a iniciar el check in.

Resultado
Si el check in ha sido correcto, la sesión local se actualizará con el contenido del proyecto del
servidor y se abrirá.
● Después de la actualización, la sesión local contiene todos los cambios para los que
entretanto se ha realizado el check in en el proyecto del servidor.
● Si se han agregado objetos nuevos en el proyecto del servidor, ahora también se ven en la
sesión local.
● Los objetos borrados en el proyecto del servidor, ahora tampoco se ven en la sesión local.
● Las marcas en la sesión local se borran automáticamente si no se ha activado la opción
"Conservar marcas para objetos".
● La conexión con el servidor vuelve a quedar libre después del check in. En la indicación de
la barra de herramientas, el estado del servidor cambia de "ocupado" a "disponible".

96

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.16 Trabajar en la vista del proyecto de servidor

2.16

Trabajar en la vista del proyecto de servidor

2.16.1

Introducción al trabajo en la vista del proyecto de servidor

Introducción
En Multiuser Engineering , además de trabajar en sesiones locales, existe también la
posibilidad de trabajar directamente en la vista del proyecto de servidor.
La vista del proyecto de servidor se abre para su edición con el icono de la barra de
herramientas multiusuario.

Estructura de la vista del proyecto de servidor
La vista del proyecto de servidor muestra el contenido actual del proyecto del servidor en el
árbol del proyecto, debajo de la sesión local, y se representa con fondo amarillo.
El gráfico siguiente muestra un ejemplo de un proyecto multiusuario abierto en la vista del
proyecto de servidor:

Uso de Team Engineering
Manual de programación y manejo, 11/2019

97

Uso de Multiuser Engineering
2.16 Trabajar en la vista del proyecto de servidor

Acciones en la vista del proyecto de servidor
Las acciones siguientes pueden llevarse a cabo en la vista del proyecto de servidor:
● La vista del proyecto de servidor permite trabajar directamente en el proyecto del servidor.
● En la vista del proyecto de servidor es posible editar todos los objetos existentes, incluso
aquellos que no pueden editarse en las sesiones locales.
● La vista del proyecto de servidor ofrece la posibilidad de trabajar con la funcionalidad de
ingeniería interproyecto (Inter Project Engineering IPE) e intercambiar datos entre la CPU
y HMI mediante un proxy de PLC.
● También se soporta el trabajo conjunto en una CPU en el marco de una puesta en marcha
común.
● Solo está permitido cargar bloques o partes grandes del programa de una CPU en la vista
del proyecto de servidor.

98

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.16 Trabajar en la vista del proyecto de servidor
● En esta vista también pueden realizarse cambios en la configuración utilizando
herramientas externas. Esto no es posible cuando se trabaja en las sesiones locales.
● Los cambios en la documentación definida por el usuario, p. ej. agregar textos de usuario
nuevos o scripts HMI nuevos, también pueden realizarse únicamente en la vista del
proyecto de servidor.
● Los objetos que se editan también deben marcarse para su edición en la vista del proyecto
de servidor para que los demás usuarios vean que estos objetos se modificarán.
● Con los botones "Guardar cambios" y "Descartar cambios" se guardan o descartan los
cambios realizados en la vista del proyecto de servidor, respectivamente.
● Cuando se guardan, los cambios realizados se almacenan directamente en el proyecto del
servidor.
Nota
Restricciones para trabajar en la vista del proyecto de servidor
En cuanto se abre la vista del proyecto de servidor se aplican las condiciones siguientes:
● La sesión local está bloqueada para la edición.
● El servidor de proyectos está bloqueado para otros usuarios.
● El símbolo del estado del servidor se representa en amarillo en la barra de herramientas.
● Si al trabajar en la vista del proyecto de servidor no es posible guardar los cambios
realizados, debe marcar otro objeto más y volver a desmarcarlo para que el botón "Guardar
cambios" se active y permita guardar los cambios.

Consulte también
Abrir y cerrar la vista del proyecto de servidor (Página 99)
Editar objetos en la vista del proyecto de servidor (Página 101)

2.16.2

Abrir y cerrar la vista del proyecto de servidor

Introducción
La vista del proyecto de servidor permite editar todos los objetos existentes en el proyecto del
servidor.
Existen las siguientes posibilidades para abrir la vista del proyecto de servidor:
● mediante el icono de la barra de herramientas multiusuario
● mediante el enlace mostrado en los textos de los banners
● mediante el botón del editor multiusuario en la vista "Check in"
En caso de que no sea posible abrir la vista del proyecto de servidor porque el servidor está
siendo utilizado por otro usuario y está bloqueado, aparece un aviso.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

99

Uso de Multiuser Engineering
2.16 Trabajar en la vista del proyecto de servidor

Contenidos visualizados en la vista del proyecto de servidor
La vista del proyecto de servidor muestra siempre el estado actual del proyecto de servidor.
Si la vista del proyecto de servidor se abre en la vista "Check in" del editor multiusuario,
además del contenido actual del proyecto del servidor también mostrará los cambios
realizados en la sesión local. Así pues, ofrece una vista preliminar de cómo quedará el
proyecto del servidor después de realizar el check in de los cambios realizados en la sesión
local.

Abrir la vista del proyecto de servidor
Para abrir la vista del proyecto de servidor, haga lo siguiente:
1. Abra la sesión local que desee.
2. Haga clic en el símbolo "Abrir/cerrar vista del proyecto de servidor" de la barra de
herramientas multiusuario.
O bien haga clic en "Check in" en la barra de herramientas multiusuario y pulse el botón
"Abrir vista del proyecto de servidor antes del check in" en el editor multiusuario que se abre
a continuación.
Otra posibilidad consiste en hacer clic en el enlace que aparece en un texto de banner.

Cerrar la vista del proyecto de servidor
Para cerrar la vista del proyecto de servidor, haga lo siguiente:
1. Haga clic de nuevo en el símbolo "Abrir/cerrar vista del proyecto de servidor" de la barra de
herramientas multiusuario.
2. Si se han realizado cambios en la vista del proyecto de servidor, se preguntará si los
cambios deben guardarse o descartarse.
3. Haga clic en "Sí" para guardar los cambios o en "No" para descartarlos.
Alternativamente, puede hacer clic en el botón correspondiente de la vista del proyecto de
servidor antes de cerrar para guardar o descartar los cambios.

Resultado
La vista del proyecto de servidor se cierra.
La sesión local se vuelve a abrir para la edición.
El servidor queda libre y su estado cambia a verde.

Consulte también
Introducción al trabajo en la vista del proyecto de servidor (Página 97)
Editar objetos en la vista del proyecto de servidor (Página 101)

100

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.16 Trabajar en la vista del proyecto de servidor

2.16.3

Editar objetos en la vista del proyecto de servidor

Introducción
En el contexto de Multiuser Engineering existe la posibilidad de editar objetos directamente en
la vista del proyecto de servidor.
La vista del proyecto de servidor permite editar todos los objetos existentes en el proyecto del
servidor, incluso aquellos que no pueden editarse en las sesiones locales.
El trabajo en la vista del proyecto de servidor implica trabajar exclusivamente en el proyecto del
servidor. Mientras se trabaja en la vista del proyecto de servidor, el servidor de proyectos está
bloqueado para otros usuarios. La sesión local correspondiente no podrá editarse mientras se
trabaje en la vista del proyecto de servidor.
En la vista del proyecto de servidor también deben marcarse los objetos para los que desee
realizar el check in. De este modo queda asegurado que los demás usuarios vean en sus
sesiones locales que dichos objetos se están editando. Esto permite evitar conflictos de
marcas.
En la vista del proyecto de servidor también es posible utilizar la función "Marcar
automáticamente" o, alternativamente, marcar manualmente los objetos que deben editarse.
Nota
Marcar objetos idénticos en la sesión local y en la vista del proyecto de servidor
Tenga en cuenta que, si un objeto se marca varias veces, incluso por parte del mismo usuario,
se presenta un conflicto de marcas con una banderita roja.

Edición de objetos en la vista del proyecto de servidor
Las acciones siguientes pueden llevarse a cabo en la vista del proyecto de servidor, por
ejemplo:
● Agregar objetos nuevos que hasta el momento no existían en el proyecto del servidor.
● Agregar o modificar la configuración hardware y las conexiones.
● Modificar versiones en las instrucciones utilizadas.
● Trabajar con ingeniería interproyecto (IPE).
● Editar todos los objetos, independientemente de si pueden marcarse o no.
● Cambiar el nombre de objetos, desplazarlos y borrarlos.
● Establecer y cargar una conexión online con una CPU o bien cargar objetos.
● Ejecutar todas las funciones de TIA Portal soportadas por Multiuser Engineering.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

101

Uso de Multiuser Engineering
2.16 Trabajar en la vista del proyecto de servidor

Procedimiento para editar objetos en la vista del proyecto de servidor
Para editar objetos en la vista del proyecto de servidor, haga lo siguiente:
1. Abra la sesión local que desee.
2. Haga clic en el símbolo "Abrir/cerrar vista del proyecto de servidor" de la barra de
herramientas multiusuario.
Seguidamente, la vista del proyecto de servidor se abre en el árbol del proyecto, debajo de
la sesión local, y se representa con fondo amarillo.
Si se hace clic de nuevo en este símbolo se cierra la vista del proyecto de servidor.
3. En la vista del proyecto de servidor, marque los objetos que desee editar haciendo clic en
las banderitas que tienen delante o bien utilice la función "Marcar automáticamente"
abriendo y editando los objetos directamente en el editor.
4. Realice los cambios deseados.
5. Guarde los cambios haciendo clic en el botón "Guardar cambios".
Como alternativa, haga clic en el botón "Descartar cambios" si no desea aplicar los cambios
al proyecto del servidor.
6. Introduzca un comentario para el historial de modificaciones para documentar los cambios
que ha realizado en la vista del proyecto de servidor.
7. En caso de que desee aplicar los cambios de la vista del proyecto de servidor en la sesión
local, haga clic en el botón "Actualizar la sesión local" después de guardar los cambios en
la sesión local.

Resultado
Los cambios realizados en la vista del proyecto de servidor se guardan en el proyecto del
servidor.
● La vista del proyecto de servidor se cierra y la sesión local vuelve a quedar libre para la
edición.
● Las marcas se quitan en la vista del proyecto de servidor.
● La sesión local no se actualiza automáticamente con los nuevos contenidos del proyecto
del servidor. El símbolo del servidor de proyectos indica que existe una versión más
reciente del proyecto de servidor.

La vista del proyecto de servidor está abierta y la conexión con el servidor está interrumpida
Si ya ha abierto la vista del proyecto de servidor y posteriormente se interrumpe la conexión
con el servidor de proyectos, obtendrá un mensaje de error al respecto.
En este caso existen las opciones siguientes:
● Haga clic en el botón "Volver a conectar" para establecer una nueva conexión con el
servidor de proyectos correspondiente.
● O bien haga clic en el botón "Descartar" para descartar los cambios realizados en la vista
del proyecto de servidor.

102

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Multiuser Engineering
2.16 Trabajar en la vista del proyecto de servidor
En caso de que no sea posible restablecer la conexión interrumpida con el servidor y se
rechacen los cambios, la sesión local se abrirá offline con un mensaje de error. La sesión local
también puede abrirse si el servidor correspondiente no está disponible en estos momentos.
Es posible seguir trabajando offline en la sesión local con las restricciones siguientes:
● Las marcas de otros usuarios no se ven en la sesión local offline, es decir, no se muestran
banderitas amarillas ni rojas, ni tampoco objetos anticuados.
● No es posible realizar el check in de los cambios realizados en la sesión local offline en el
proyecto del servidor hasta que exista una conexión con el servidor.

Consulte también
Introducción al trabajo en la vista del proyecto de servidor (Página 97)
Abrir y cerrar la vista del proyecto de servidor (Página 99)

2.16.4

Cambiar el nombre de objetos en la vista del proyecto de servidor

Introducción
Cuando se trabaja con Multiuser Engineering es posible cambiar el nombre de objetos.

Reglas para cambiar el nombre de objetos
Las reglas siguientes se aplican a la hora de cambiar el nombre de objetos:
● Debe evitarse cambiar el nombre de objetos en la sesión local, pues en caso de hacerlo
pueden producirse conflictos de nombres durante el check in.
● Los cambios de nombres en los objetos deben llevarse a cabo siempre en la vista del
proyecto de servidor.
● Cuando se cambia el nombre de objetos en la vista del proyecto de servidor, dichos objetos
no deben tener marcas en las sesiones locales.
● Cuando se cambia el nombre de objetos es posible que se produzcan conflictos de
nombres. Asegúrese de no volver a asignar nombres ya utilizados en el proyecto cuando
cambie nombres.
● Los conflictos que se producen al cambiar nombres no se solucionan automáticamente con
el fin de evitar referencias involuntarias de objetos.
● Cuando se cambia el nombre de un dispositivo no se produce ningún conflicto con los
objetos del mismo, pues los dispositivos no se identifican por el nombre sino por la ID.
● Sin embargo, sí que se generan conflictos en caso de que haya referencias entre
dispositivos (PLC y HMI).
● Después de cambiar el nombre de objetos, los demás usuarios deberían actualizar sus
sesiones locales.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

103

Uso de Multiuser Engineering
2.16 Trabajar en la vista del proyecto de servidor

Requisitos
Hay una conexión con el servidor de proyectos y el servidor está disponible.
No hay ninguna otra sesión local abierta para este proyecto del servidor.

Cambiar el nombre de objetos
Para cambiar el nombre de objetos en la vista del proyecto de servidor, haga lo siguiente:
1. Abra la sesión local que desee.
2. Haga clic en el símbolo "Abrir/cerrar vista del proyecto de servidor" de la barra de
herramientas multiusuario.
Seguidamente, la vista del proyecto de servidor se abre en el árbol del proyecto, debajo de
la sesión local, y se representa con fondo amarillo.
Si se hace clic de nuevo en este símbolo se cierra la vista del proyecto de servidor.
3. Marque los objetos deseados en la vista del proyecto de servidor y cámbieles el nombre.
4. Haga clic en el botón "Guardar cambios" para aplicar los cambios al proyecto de servidor.

Resultado
Los cambios realizados en la vista del proyecto de servidor se guardan en el proyecto del
servidor.
● La vista del proyecto de servidor se cierra y la sesión local vuelve a quedar libre para la
edición.
● Las marcas se quitan en la vista del proyecto de servidor.
● La sesión local no se actualiza automáticamente con los nuevos contenidos del proyecto
del servidor.

104

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de la puesta en marcha multiusuario (Multiuser
Commissioning)
3.1

3

Introducción al Multiuser Commissioning

Introducción
En TIA Portal y en el contexto del producto "Multiuser Engineering" (ingeniería multiusuario)
existe la posibilidad de trabajar con Multiuser Commissioning en la fase de puesta en marcha.
Una vez que los proyectos multiusuario se han creado y editado conjunta y simultáneamente
con varios usuarios con Multiuser Engineering , la puesta en marcha también podrá realizarse
cómodamente y en equipo con Multiuser Commissioning (puesta en marcha multiusuario).
De este modo se reducen significativamente los tiempos de puesta en marcha de los
proyectos. La instalación puede utilizarse y funcionar de forma productiva con mayor rapidez.
A partir de V16, Multiuser Commissioning está disponible en "modo síncrono" y en "modo
asíncrono".

Activación del modo Commissioning
El modo Commissioning debe activarse en la Administration Tool .
Al activar el modo Commissioning en la Administration Tool se inicia el Commissioning
síncrono como ajuste predeterminado.
Consulte al respecto: Activar y desactivar el modo Multiuser Commisioning (Página 113)
Para cambiar entre el Commissioning síncrono y el asíncrono deben realizarse ajustes en TIA
Portal (Opciones > Configuración > Multiusuario > Configuración de Commissioning) o hacer
clic en el botón correspondiente del árbol del proyecto.
Para la sesión actual también es posible cambiar de modo utilizando el botón del árbol del
proyecto. Sin embargo, este cambio solo permanece activo hasta que se cierra la sesión.
Cuando se vuelve a abrir la sesión local se aplica de nuevo el ajuste predeterminado de la
configuración de TIA Portal.

Multiuser Commissioning en modo síncrono
En modo síncrono se trabaja en Multiuser Commissioning de la forma habitual hasta ahora.
Este es el ajuste predeterminado.
● El trabajo en modo síncrono permite realizar cómodamente la carga del dispositivo. La
sesión local se actualiza automáticamente tras la carga.
● Hasta que no ha finalizado la carga en el dispositivo no es posible realizar otras actividades
en TIA Portal.
Para más indicaciones sobre el trabajo en modo síncrono consulte el capítulo: Trabajar con el
Commissioning síncrono (Página 115)

Uso de Team Engineering
Manual de programación y manejo, 11/2019

105

Uso de la puesta en marcha multiusuario (Multiuser Commissioning)
3.2 Resumen del trabajo general con Multiuser Commissioning

Multiuser Commissioning en modo asíncrono
En modo asíncrono se ejecuta en segundo plano una segunda instancia de TIA Portal.
● Los tiempos para cargar en dispositivo se reducen considerablemente en el modo
asíncrono.
● El usuario solo recibe una notificación cuando deben tomarse decisiones y realizarse
acciones para cargar en el dispositivo. Si no se requieren decisiones del usuario, la carga
en el dispositivo se ejecuta de forma asíncrona en segundo plano.
● En caso de que se produzcan errores durante la compilación o la carga y el usuario deba
tomar decisiones, se le mostrará la información en el editor de Multiuser Commissioning.
● La sesión local no se actualiza automáticamente tras la carga.
Para más indicaciones sobre el trabajo en modo asíncrono consulte el capítulo: Trabajar con
el Commissioning asíncrono (Página 116)

Consulte también
Introducción a Multiuser Engineering (Página 13)
Trabajar con el Commissioning asíncrono (Página 116)
Trabajar con el Commissioning síncrono (Página 115)
Activar y desactivar el modo Multiuser Commisioning (Página 113)

3.2

Resumen del trabajo general con Multiuser Commissioning

Introducción
Al trabajar con varios usuarios en proyectos multiusuario de forma conjunta y simultánea
durante la puesta en marcha, debe observarse un procedimiento determinado.
A continuación obtendrá una visión de conjunto del trabajo básico con Multiuser
Commissioning.

Requisitos para trabajar con Multiuser Commissioning
Los siguientes pasos ya se han realizado previamente con Multiuser Engineering en la fase de
ingeniería:
1. Instalar el servidor de proyectos.
2. Crear un proyecto de servidor adecuado en el servidor de proyectos.
3. Crear sesiones locales para todos los usuarios que trabajan en él.
4. Crear paso a paso la tarea de automatización en las diferentes sesiones locales y realizar
un check-in de todos los cambios en el proyecto de servidor.
5. Actualizar las sesiones locales con el proyecto de servidor.
6. Continuar con la edición paso a paso hasta obtener un proyecto de servidor preparado para
la puesta en marcha y poder dar por finalizada la fase de ingeniería.

106

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de la puesta en marcha multiusuario (Multiuser Commissioning)
3.2 Resumen del trabajo general con Multiuser Commissioning

Trabajar con Multiuser Commissioning
Tenga en cuenta las siguientes indicaciones para trabajar en proyectos de servidor:
● Los proyectos deben haber sido editados previamente con Multiuser Engineering y
contener de antemano toda la configuración hardware, los bloques, conexiones y ajustes
globales necesarios, antes de poder utilizarse con Multiuser Commissioning .
Encontrará más información al respecto en: Requisitos para proyectos de servidor
(Página 57)
● Para evitar trabajar simultáneamente en los mismos objetos, hable primero con los demás
usuarios.
● Todos los ajustes generales, como cambios en la configuración de dispositivos, deben
realizarse en la vista del proyecto de servidor (es decir, en el proyecto de servidor central).
● En la vista del proyecto de servidor pueden editarse todos los objetos de un proyecto
multiusuario. También es posible editar aquellos objetos que no son compatibles con la
funcionalidad de Multiuser Engineering.
● Todos los cambios de las sesiones locales para los que se haya realizado el check in en el
proyecto de servidor deben estar compilados para mantener siempre una versión
coherente en el proyecto de servidor.
● Después de la carga en la CPU se actualiza automáticamente el proyecto de servidor.
Después de cada carga se crea una nueva revisión del proyecto de servidor.
Nota
Trabajo eficiente con Multiuser Commissioning
Cuando se trabaja en paralelo en varias sesiones locales, conviene solucionar rápidamente
los fallos que se produzcan para que el trabajo en equipo se mantenga efectivo en un proyecto
común.
Por ello se recomienda compilar los cambios pendientes en el editor multiusuario antes de la
carga y el check-in. Para ello se dispone de varias opciones de compilación. Si se han indicado
errores de compilación, deben solucionarse antes de la carga y el check-in.
Con la compilación de los cambios pendientes antes del check-in se asegura que el check-in
del proyecto y su posterior transferencia a la CPU se efectúen correctamente.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

107

Uso de la puesta en marcha multiusuario (Multiuser Commissioning)
3.2 Resumen del trabajo general con Multiuser Commissioning

Descripción general del trabajo con Multiuser Commissioning
Para utilizar la funcionalidad de Multiuser Commissioning, realice los pasos siguientes:
Acción

Ejemplo

1. La edición en la fase de ingeniería ha finalizado

Bildrahmen

7,$

La edición de las diferentes tareas de configura‐
ción en las sesiones locales ha terminado.
Resultado:

6HUYLGRUGHSUR\HFWRV

3UR\HFWRGHVHUYLGRU
(GLFLµQILQDOL]DGD

(GLFLµQILQDOL]DGD

Se ha realizado el check-in y la compilación de
todos los cambios en el proyecto del servidor.
Las sesiones locales y el proyecto del servidor
están sincronizados.
En las sesiones locales ya no hay marcas.
El proyecto de servidor se ha cargado en la CPU.
De ese modo, la versión del proyecto de servidor
y la versión del proyecto multiusuario de la CPU
son coherentes.
Nota:

)%

)%

)&

)&

(OSUR\HFWRPXOWLXVXDULRHVW£SUHSDUDGRSDUDODSXHVWDHQPDUFKD
&RQHOORILQDOL]DODIDVHGHLQJHQLHU¯D

Con ello finaliza la fase de ingeniería.

108

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de la puesta en marcha multiusuario (Multiuser Commissioning)
3.2 Resumen del trabajo general con Multiuser Commissioning
Acción

2. Trabajar en la fase de puesta en marcha

Ejemplo

Marco de la imagen

7,$

En la Administration Tool se cambia al "modo
Commissioning" y se inicia la fase de puesta en
marcha.
El procedimiento es el siguiente:

6HUYLGRUGHSUR\HFWRV

6LQFURQL]DFLµQ\FDUJDGHVGHHOSUR\HFWRGHVHUYLGRU

● La sesión local se sigue editando de la forma
habitual en el modo Multiuser Commisioning.
● A partir de TIA Portal V16 existe la posibilidad
de elegir entre el modo Commissioning
síncrono y el asíncrono. A continuación se
describe el procedimiento para el modo
Commissioning síncrono.
● Al realizar la carga, todos los cambios de las
sesiones locales se compilan y se transfieren
al proyecto de servidor con un check-in.
● Después de cada carga en la CPU, el
proyecto de servidor y, en modo
Commissioning síncrono, también la sesión
local se actualizan automáticamente. Las
modificaciones de otros usuarios pueden
verse entonces en la sesión local.

6HVLµQ
ORFDO

6HVLµQ
ORFDO
&38

● Después de cada carga en la CPU se crea una
nueva revisión del proyecto del servidor.
● Siga trabajando en la fase de puesta en
marcha hasta que haya terminado.
● Si lo desea, puede exportar el proyecto de
servidor como proyecto de usuario único y
seguir trabajando con él de la forma habitual
en TIA Portal.
Resultado:
En el modo Commissioning se asegura que el
proyecto online de la CPU y el proyecto offline del
servidor de proyectos sean coherentes. Esto faci‐
lita la puesta en marcha, pues no se genera tra‐
bajo de sincronización innecesario.
Sin embargo, durante la carga opcionalmente
también se admiten incoherencias, por ejemplo,
si se desea efectuar un check-in en el proyecto de
servidor directamente desde la sesión local sin
cargar previamente.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

109

Uso de la puesta en marcha multiusuario (Multiuser Commissioning)
3.3 Ajustes para trabajar con Multiuser Commissioning

Ventajas de trabajar con Multiuser Commissioning
Al cargar una versión del proyecto que siempre estará sincronizada, y por lo tanto será
coherente, tanto en el proyecto de servidor como en la CPU, se transmiten menos errores a
otros usuarios.
Gracias a la edición paralela de distintos objetos, como diferentes variables, bloques, variables
PLC, alarmas, imágenes, listas de textos y gráficos, objetos tecnológicos, etc. en uno o varios
dispositivos de un proyecto multiusuario, se mejora la eficiencia y se reducen
significativamente los tiempos de puesta en marcha.

Consulte también
Requisitos para proyectos de servidor (Página 57)

3.3

Ajustes para trabajar con Multiuser Commissioning

Introducción
Para trabajar con Multiuser Commissioning también rigen los ajustes generales para Multiuser
Engineering . En TIA Portal se pueden realizar los siguientes ajustes en "Opciones >
Configuración", ficha "Multiusuario":
● General
● Buscar en el proyecto
● Ajustes de compilación
● Configuración de Commissioning
A partir de TIA Portal V16 se pueden realizar los siguientes ajustes para Multiuser
Commissioning en "Opciones > Configuración", ficha "Commissioning":
● Ejecutar Multiuser Commissioning en modo síncrono
Consulte al respecto: Trabajar con el Commissioning síncrono (Página 115)
● Ejecutar Multiuser Commissioning en modo asíncrono
Consulte al respecto: Trabajar con el Commissioning asíncrono (Página 116)

Activación de Multiuser Commissioning
Cuando se trabaja con Multiuser Engineering es posible elegir entre el modo de ingeniería y el
modo Commissioning.
El ajuste se realiza en la Administration Tool.
Consulte al respecto: AUTOHOTSPOT
Abra la Administration Tool y agregue el servidor utilizado.
Seleccione el proyecto de servidor deseado.
En la barra de herramientas de la Administration Tool está integrado el botón "Multiuser
Commissioning".

110

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de la puesta en marcha multiusuario (Multiuser Commissioning)
3.3 Ajustes para trabajar con Multiuser Commissioning
En cuanto está activado este botón, se cambia al modo Multiuser Commissioning. El símbolo
del modo Multiuser Commissioning también se puede apreciar en el árbol del proyecto del TIA
Portal, en forma de símbolo superpuesto delante del nombre del proyecto.

En el modo Multiuser Commisioning, el proyecto de servidor se actualiza cada vez que se
efectúa una carga en la CPU.
Los cambios de las sesiones locales se compilan antes de la carga y se cargan en la CPU. Si
el proceso de carga finaliza correctamente, los cambios se transfieren al proyecto del servidor.
En el servidor de proyectos se crea entonces una nueva revisión y, en modo síncrono, se
actualiza la sesión local.
En caso de trabajar en modo asíncrono, se recomienda sincronizar manualmente la sesión
local de vez en cuando con el fin de trabajar siempre con una versión actual del proyecto de
servidor.
Si no se puede acceder al servidor de proyectos, aparece un mensaje de error y el modo
Commissioning se cierra.
En este caso, tiene la posibilidad de efectuar una carga directa en la CPU desde la sesión local
en modo de ingeniería y transferir los cambios al proyecto de servidor cuando se vuelva a
establecer la conexión con el servidor.

Salir del modo Multiuser Commisioning
Para salir del modo Multiuser Commissioning debe desactivarse el botón "Multiuser
Commissioning".
Para ello vuelva a hacer clic en el botón modo Multiuser Commissioning para desactivarlo. Si
el botón modo Multiuser Commissioning está desactivado, significa que está activado el modo
de ingeniería.
En el modo de ingeniería ya no se muestra el pequeño símbolo superpuesto delante del
nombre del proyecto.

Interrupción automática del modo Multiuser Commissioning
En los casos siguientes se interrumpe el modo Multiuser Commissioning:
● cuando se produce algún error al compilar los cambios
● cuando se produce algún error al cargar posteriormente en la CPU
● cuando se produce algún error al transferir los cambios cargados en la CPU al proyecto de
servidor
● cuando se producen interrupciones en la red

Uso de Team Engineering
Manual de programación y manejo, 11/2019

111

Uso de la puesta en marcha multiusuario (Multiuser Commissioning)
3.4 Reglas para trabajar con Multiuser Commissioning
● al trabajar en modo offline, cuando se trabaja en la sesión local sin conexión con el proyecto
de servidor
● cuando el proyecto de servidor ha sido bloqueado por otro usuario
Si se produce algún error, aparece un mensaje de error que informa sobre el tipo de error y las
posibles soluciones.

Consulte también
Ajustes para trabajar con Multiuser Engineering (Página 29)
Trabajar con el Commissioning síncrono (Página 115)
Trabajar con el Commissioning asíncrono (Página 116)

3.4

Reglas para trabajar con Multiuser Commissioning

Introducción
Cuando se pone en marcha un proyecto conjuntamente con Multiuser Commissioning, para
que el trabajo en equipo tenga éxito es muy importante que todos los integrantes del proyecto
conozcan las reglas siguientes.

Ajuste del modo Multiuser Commissioning
El modo de puesta en marcha Multiuser Commissioning se configura en Server Administration
Tool . Por lo general, lo configura el administrador y se aplica a todas las sesiones locales
existentes de un proyecto del servidor. Esto significa que todas las sesiones locales trabajan
bien en modo de ingeniería bien en modo Multiuser Commissioning.
Consulte al respecto: Activar y desactivar el modo Multiuser Commisioning (Página 113)

Trabajar con el servidor de proyectos en el modo Commissioning
En cuanto se inicia la carga en la CPU en el modo Commissioning, se intenta en primer lugar
establecer una conexión con el servidor de proyectos con el fin de actualizar la sesión local
también en el proyecto de servidor multiusuario. Si en ese instante no es posible acceder al
servidor de proyectos, se abre un cuadro de diálogo que muestra un mensaje al respecto.
En este caso, se ofrece la posibilidad de hacer clic en una opción del cuadro de diálogo para
cambiar al modo de ingeniería y cargar en la CPU desde la sesión local en modo Multiuser
Commissioning.

112

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de la puesta en marcha multiusuario (Multiuser Commissioning)
3.5 Activar y desactivar el modo Multiuser Commisioning

El servidor de proyectos no es accesible en el modo Commissioning
Si se trabaja en el modo Commissioning y el servidor de proyectos deja de ser accesible, se
recibe un mensaje al respecto. El cuadro de diálogo que se abre ofrece las siguientes opciones:
● Intentar restablecer la conexión con el servidor de proyectos.
● Cambiar al modo de ingeniería y cargar en la CPU desde la sesión local sin actualizar el
proyecto del servidor.
● Cancelar la acción.
Cada opción abre un cuadro de diálogo subsiguiente con posibilidades de selección y
cancelación adicionales.

Trabajar "offline" en el modo de Multiuser Commissioning
Aunque se trabaje "offline" en modo Multiuser Commissioning, es decir, sin estar conectado al
servidor de proyectos, es posible cargar en la CPU desde la sesión local.
En este caso también se abre un cuadro de diálogo que permite cambiar al modo de ingeniería
y cargar la sesión local en la CPU sin actualizar el proyecto del servidor. También existe la
posibilidad de cancelar la operación.

Interrupción automática del modo Multiuser Commissioning
El sistema interrumpe automáticamente el modo Multiuser Commissioning en los casos
siguientes:
● cuando se produce algún error al transferir los cambios al proyecto de servidor
● cuando se produce algún error al compilar los cambios
● cuando se producen interrupciones en la red
● cuando se produce algún error al cargar en la CPU
● al trabajar en modo offline, cuando se trabaja en la sesión local sin conexión con el proyecto
de servidor
● cuando el proyecto de servidor ha sido bloqueado por otro usuario
Si se produce algún error, aparece un mensaje de error que informa sobre el tipo de error y las
posibles soluciones.

3.5

Activar y desactivar el modo Multiuser Commisioning

Introducción
A partir de TIA Portal V15.1, mientras se trabaja con Multiuser Engineering puede cambiarse
entre el "modo de ingeniería"y el "modo Multiuser Commissioning".
El modo de ingeniería es el ajuste predeterminado.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

113

Uso de la puesta en marcha multiusuario (Multiuser Commissioning)
3.5 Activar y desactivar el modo Multiuser Commisioning
Para trabajar en el "modo Multiuser Commissioning" se aplican los mismos requisitos que para
trabajar en el "modo de ingeniería".
En el "modo de ingeniería" , los proyectos multiusuario se editan de la forma habitual y las
tareas de automatización se configuran de forma paralela en las diferentes sesiones locales.
En cuanto el proyecto multiusuario esté listo para la puesta en marcha, cambie al "modo
Commissioning" en la Administration Tool .
Funciones disponibles en el "modo Multiuser Commissioning":
● Al realizar la carga, los cambios de las sesiones locales se compilan y se cargan en la CPU.
● A continuación, los cambios se transfieren automáticamente al proyecto del servidor y se
actualiza la sesión local.
● Cada vez que se efectúa una carga se crea una nueva revisión en el servidor.
● De este modo se asegura que las versiones de los proyectos de la CPU y del servidor
multiusuario sean coherentes.
Nota
Si no se puede acceder al servidor multiusuario o si se produce otro error durante la carga,
aparece un mensaje de error y finaliza el "modo Commissioning".
En este caso, tiene la posibilidad de efectuar una carga directa en la CPU desde la sesión local
en "modo de ingeniería" y transferir los cambios al proyecto de servidor cuando se vuelva a
establecer la conexión con el servidor.

Activar y desactivar el "modo Multiuser Commissioning"
El "modo Commissioning" se activa y desactiva en la Administration Tool. El ajuste del modo
es válido siempre para todas las sesiones locales de un proyecto del servidor. Las sesiones
locales deben estar todas en el modo de ingeniería o en el modo Multiuser Commisioning.
Consulte al respecto también: AUTOHOTSPOT
Consulte al respecto también: AUTOHOTSPOT
Proceda del siguiente modo:
1. Abra la herramienta gráfica para la administración del servidor multiusuario.
– Abra el menú Inicio haciendo clic en el comando "Inicio" > "Todos los programas" >
"Siemens Automation".
– Haga clic en la entrada "Servidor multiusuario del TIA Portal" > "Servidor multiusuario
V<x.y> Administración" para abrir la Administration Tool.
2. En "Administración" hay una lista de las conexiones de servidor configuradas, siempre que
se haya creado una conexión al servidor multiusuario mediante "Agregar conexión de
servidor". En la vista detallada de la derecha, encontrará información adicional sobre los
objetos seleccionados a la izquierda.
3. Seleccione el servidor en el lado izquierdo y elija el proyecto para el que desea configurar
el modo Multiuser Commisioning.

114

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de la puesta en marcha multiusuario (Multiuser Commissioning)
3.6 Trabajar con el Commissioning síncrono
4. Haga clic en el botón "Multiuser Commissioning" de la barra de herramientas en el lado
derecho.
– En cuanto se activa el botón, se muestra sobre fondo azul y sobre el proyecto
seleccionado en el lado izquierdo se superpone el símbolo de Multiuser Commissioning.
– Con el modo de puesta en marcha se activa también la opción "Antes de cargar,
comprobar si hay datos que no coindicen (recomendado)".

5. Para volver a cerrar el "modo Multiuser Commissioning", vuelva a hacer clic en el botón
"modo Multiuser Commissioning" de la barra de herramientas.
– En cuanto se desactiva el botón, este se muestra sin fondo de color y en el proyecto
seleccionado a la izquierda desaparece el símbolo superpuesto.

Resultado
El "modo Multiuser Commisioning" se activa haciendo clic en el botón "Multiuser
Commissioning" y se desactiva volviendo a hacer clic en dicho botón.

3.6

Trabajar con el Commissioning síncrono

Introducción
A partir de V16, Multiuser Commissioning está disponible en "modo síncrono" y en "modo
asíncrono".
Para cambiar entre el Commissioning síncrono y el asíncrono deben realizarse ajustes en TIA
Portal mediante Opciones > Configuración > Multiusuario > Configuración de Commissioning.
Para la sesión actual también es posible cambiar de modo utilizando el botón del árbol del
proyecto. Sin embargo, este cambio solo permanece activo hasta que se cierra la sesión.
Cuando se vuelve a abrir la sesión local se aplica de nuevo el ajuste predeterminado de la
configuración de TIA Portal.

Trabajar con el Commissioning síncrono
En el Commissioning síncrono se trabaja en Multiuser Commissioning de la forma habitual
hasta ahora. Este es el ajuste predeterminado.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

115

Uso de la puesta en marcha multiusuario (Multiuser Commissioning)
3.7 Trabajar con el Commissioning asíncrono
El Multiuser Commissioning síncrono funciona del siguiente modo en TIA Portal:
1. Primero se crean y editan los proyectos con Multiuser Engineering en la fase de ingeniería.
Consulte al respecto: Introducción a Multiuser Engineering (Página 13)
2. En cuanto los proyectos están listos para la puesta en marcha, se continúa trabajando con
Multiuser Commissioning .
– Durante la puesta en marcha, la administración del proyecto también está ubicada en un
servidor local o externo.
– Diferentes usuarios trabajan en sesiones locales sobre la base de proyectos
administrados por el servidor.
– El trabajo en sesiones locales también es independiente entre sí en la puesta en marcha.
– Las modificaciones de las sesiones locales primero se cargan siempre en la CPU
utilizada conjuntamente y solo se transfieren al proyecto de servidor si la carga se ha
efectuado correctamente.
– Los cambios cargados de otros usuarios se muestran y pueden aplicarse fácilmente.
– La sincronización del proyecto de servidor se produce ya en el servidor de proyectos.
Eso permite cargar en la CPU siempre estados coherentes del proyecto de servidor. Así
no es necesario realizar la laboriosa sincronización de diferentes estados del proyecto.

Indicaciones para trabajar en modo Commissioning síncrono
Observe las siguientes indicaciones para trabajar en modo síncrono:
● Hasta que no ha finalizado la carga en el dispositivo no es posible realizar otras actividades
en TIA Portal.
● El trabajo en el Commissioning síncrono requiere mucho más tiempo, pues los proyectos
tienen que abrirse y cerrarse continuamente.
● Para ahorrar tiempo y trabajar con mayor rapidez, cambie al "modo Commissioning
asíncrono", que se ejecuta en segundo plano en una segunda instancia de TIA Portal.

Consulte también
Introducción a Multiuser Engineering (Página 13)

3.7

Trabajar con el Commissioning asíncrono

Introducción
A partir de V16, Multiuser Commissioning está disponible en "modo síncrono" y en "modo
asíncrono".
Para cambiar entre el Commissioning síncrono y el asíncrono deben realizarse ajustes en TIA
Portal mediante Opciones > Configuración > Multiusuario > Configuración de Commissioning.
Para la sesión actual también es posible cambiar de modo utilizando el botón del árbol del
proyecto. Sin embargo, este cambio solo permanece activo hasta que se cierra la sesión.

116

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de la puesta en marcha multiusuario (Multiuser Commissioning)
3.7 Trabajar con el Commissioning asíncrono
Cuando se vuelve a abrir la sesión local se aplica de nuevo el ajuste predeterminado de la
configuración de TIA Portal.

Trabajar con el Multiuser Commissioning asíncrono
En el Commissioning asíncrono también se trabaja en Multiuser Commissioning de la forma
habitual hasta ahora.
Así funciona Multiuser Commissioning en el TIA Portal:
1. Primero se crean y editan los proyectos con Multiuser Engineering en la fase de ingeniería.
Consulte al respecto: Vista general del trabajo con Multiuser Engineering (Página 15)
2. En cuanto los proyectos están listos para la puesta en marcha, se continúa trabajando con
Multiuser Commissioning .
– Durante la puesta en marcha, la administración del proyecto también está ubicada en un
servidor local o externo.
– Diferentes usuarios trabajan en sesiones locales sobre la base de proyectos
administrados por el servidor.
– El trabajo en sesiones locales también es independiente entre sí en la puesta en marcha.
– Las modificaciones de las sesiones locales primero se cargan siempre en la CPU
utilizada conjuntamente y solo se transfieren al proyecto de servidor si la carga se ha
efectuado correctamente.
– Los cambios cargados de otros usuarios se muestran y pueden aplicarse fácilmente.
– La sincronización del proyecto de servidor se produce ya en el servidor de proyectos.
Eso permite cargar en la CPU siempre estados coherentes del proyecto de servidor. Así
no es necesario realizar la laboriosa sincronización de diferentes estados del proyecto.

Procedimiento para trabajar en modo Commissioning asíncrono
Observe el siguiente procedimiento para trabajar en modo asíncrono:
● En modo asíncrono se ejecuta en segundo plano una segunda instancia de TIA Portal. De
este modo, los tiempos para cargar en dispositivo se reducen considerablemente en el
modo asíncrono.
● El usuario solo recibe una notificación cuando deben tomarse decisiones y realizarse
acciones para cargar en el dispositivo.
● Si no se requieren decisiones del usuario, la carga en el dispositivo se ejecuta de forma
asíncrona en segundo plano.
● En caso de que se produzcan errores durante la compilación o la carga y el usuario deba
tomar decisiones, se le mostrará la información en el editor de Multiuser Commissioning.
Consulte al respecto: Funcionalidad del editor de Commissioning (Página 120)
● En el editor de Commissioning obtendrá más indicaciones sobre las acciones que debe
realizar o las decisiones que debe tomar. Si hay errores que impiden la carga en la CPU,
se le pedirá que soluciones los errores en la vista del proyecto de servidor y vuelva a realizar
el check-in.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

117

Uso de la puesta en marcha multiusuario (Multiuser Commissioning)
3.8 Indicaciones importantes para trabajar con el Commissioning asíncrono
● Si se producen errores que no pueden solucionarse en modo asíncrono, deberá cambiar al
modo Commissioning síncrono. A continuación, abra la vista del proyecto de servidor y
solucione los errores mostrados. Seguidamente, inicie el check-in desde la vista del
proyecto de servidor. Después puede volver a cambiar al modo asíncrono, si lo desea.
● Adicionalmente se le mostrarán información de estado, advertencias y mensajes de error.
– En el editor de Commissioning se mostrarán los errores de compilación y las
advertencias de carga.
– La ventana de inspección muestra las informaciones y advertencias en la ficha
"Información > General". Si se había iniciado el Commissioning asíncrono, aquí se
mostrará un aviso al respecto con una flecha verde. Al hacer clic en esa flecha se abre
el editor de Commissioning en primer plano.

Consulte también
Vista general del trabajo con Multiuser Engineering (Página 15)
Introducción a Multiuser Engineering (Página 13)
Funcionalidad del editor de Commissioning (Página 120)

3.8

Indicaciones importantes para trabajar con el Commissioning
asíncrono

Introducción
A partir de V16, Multiuser Commissioning está disponible en "modo síncrono" y en "modo
asíncrono".
A continuación se ofrecen indicaciones importantes y consejos para trabajar con el
Commissioning asíncrono.

Indicaciones importantes para trabajar en modo Commissioning asíncrono
Las indicaciones y los consejos siguientes facilitan el trabajo y ayudan a aprovechar las
ventajas del Commissioning asíncrono:
Definir la información de inicio de sesión en Windows
● Si para el servidor de proyectos se utiliza una información de inicio de sesión distinta que
para el inicio de sesión en Windows, hay que agregar la información de inicio de sesión para
el servidor de proyectos en el Administrador de credenciales de Windows:
– Para ello, abra el panel de control y seleccione el administrador de credenciales situado
debajo de la cuenta de usuario correspondiente.
– Haga clic en "Credenciales de Windows" y agregue credenciales nuevas.
– En el cuadro de diálogo siguiente introduzca la dirección de Internet o de red del servidor
utilizado, además del nombre de usuario y la contraseña que permiten acceder al
servidor.

118

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de la puesta en marcha multiusuario (Multiuser Commissioning)
3.8 Indicaciones importantes para trabajar con el Commissioning asíncrono
Restricciones al trabajar con seguridad
● Los cambios en programas que requieren una contraseña de seguridad no pueden
cargarse en modo asíncrono.
● Estos cambios deben cargarse en la CPU en modo síncrono.
Restricciones al trabajar con un nivel de protección de CPU activado
● Los cambios en programas que requieren una contraseña de nivel de protección para la
CPU no pueden cargarse en modo asíncrono.
● Estos cambios deben cargarse en la CPU en modo síncrono.
Corrección de la numeración de bloques de datos en Commissioning asíncrono
● Si al cargar en Commissioning asíncrono, por ejemplo después de copiar un bloque de
datos, es necesario corregir la numeración de bloques de datos, se recibirá un aviso al
respecto en TIA Portal. Si se confirma la consulta para corregir la numeración, esta se
llevará a cabo al compilar. Sin embargo, el Commissioning asíncrono se cancelará primero
con un mensaje de error.
● En tal caso, vuelva a iniciar la carga en el dispositivo. Seguidamente, el bloque cuya
numeración se ha corregido se incorporará al dispositivo.
Cambiar el nombre de objetos en Commissioning asíncrono
● Cuando se trabaja con el Commissioning asíncrono, el nombre de los objetos solo puede
cambiarse en la vista del proyecto de servidor, pues de lo contrario se cancelará el
Commissioning asíncrono.
Certificados
● Para aplicar los certificados necesarios para el servidor debe cerrarse y volver a abrirse TIA
Portal después de confirmar el primer certificado.
● Con ello, los certificados se guardan en los ajustes y se aplican de forma permanente. Esto
evita que continuamente se pregunte por los certificados.
Quitar el bloqueo del servidor
● Cuando se produce una cancelación provocada por un error con bloqueo del servidor
mientras se trabaja en el modo Commissioning, es posible quitar el bloqueo del servidor del
siguiente modo:
– En TIA Portal, abra la vista del proyecto de servidor y vuélvala a cerrar.
– Como alternativa, es posible eliminar el bloqueo del servidor desde la Administration
Tool .
Creación de objetos nuevos en la sesión local
● Si se trabaja con varios usuarios en diferentes sesiones locales en modo Commissioning
asíncrono, cada sesión local debería actualizarse después de crear y hacer el check-in de
objetos nuevos.
● La ventaja de hacerlo es que los objetos recién creados pueden sincronizarse con el
proyecto de servidor en la sesión local.
● Así, por ejemplo, los bloques que tengan números idénticos en las diferentes sesiones
locales se corregirán después de la sincronización. Esto permite seguir trabajando con una
versión coherente del proyecto de servidor.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

119

Uso de la puesta en marcha multiusuario (Multiuser Commissioning)
3.9 Funcionalidad del editor de Commissioning
Actualización de la sesión local en el Commissioning asíncrono
● Cuando se trabaja con el Commissioning asíncrono, la sesión local no se actualiza
automáticamente.
● Asegúrese de actualizar regularmente su sesión local para aplicarle los cambios de otros
usuarios que están disponibles en el proyecto de servidor.
Visualización permanente del editor de Commissioning
● Puesto que el Commissioning asíncrono se ejecuta en segundo plano, el editor de
Commissioning no se muestra siempre. En cuanto se inicia la primera carga en el
dispositivo, el editor de Commissioning se inicia en segundo plano y se muestra en la barra
de estado. Haga clic en el icono de la barra de estado para abrir el editor.
● Si desea ver siempre el editor de Commissioning, dispone de las siguientes posibilidades:
– Desacople el editor de Commissioning de TIA Portal y colóquelo junto a TIA Portal en su
pantalla o en una segunda pantalla.
– Otra posibilidad consiste en dividir la ventana de trabajo de TIA Portal y visualizar el
editor de Commissioning de forma permanente en la ventana dividida.

3.9

Funcionalidad del editor de Commissioning

Introducción
El editor de Multiuser Commissioning solo se necesita cuando se trabaja en modo asíncrono.
En el Commissioning asíncrono se ejecuta adicionalmente en segundo plano una segunda
instancia de TIA Portal, con lo que se consiguen tiempos de carga considerablemente más
rápidos.
El editor de Commissioning se inicia en segundo plano la primera vez que se inicia una carga
asíncrona y se muestra en forma de botón en la barra de estado.
Si mientras se trabaja en modo asíncrono se produjeran errores o impedimentos para cargar,
se mostrarán en el editor de Commissioning para que puedan solucionarse.

Apertura del editor de Commissioning
Cuando se trabaja con el Commissioning asíncrono y se ejecuta una operación de carga, se
obtiene un aviso al respecto del modo habitual en la ficha "Información > General" de la
ventana de inspección. Una vez se ha iniciado el Commissioning asíncrono en segundo plano,
se obtiene un aviso al respecto con una flecha verde anexa.
Existen las siguientes posibilidades para abrir el editor:
1. Abra el editor de Commissioning haciendo clic en el botón "Editor de Commissioning" que
se muestra en la barra de estado después de iniciar la operación de carga.
2. Abra el editor de Commissioning haciendo clic en la flecha verde de la ventana de
inspección, tal como se muestra en el gráfico.
El gráfico siguiente muestra los avisos en inglés en la ventana de inspección.

120

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de la puesta en marcha multiusuario (Multiuser Commissioning)
3.9 Funcionalidad del editor de Commissioning

Visualización permanente del editor de Commissioning
Si mientras se trabaja en modo asíncrono surgen avisos o se requieren decisiones para cargar
en el dispositivo, se mostrarán en el editor de Commissioning.
Sin embargo, el editor de Commissioning no se muestra automáticamente en primer plano.
Nota
Visualización permanente del editor de Commissioning
Para visualizar de forma permanente el editor de Commissioning que se ejecuta en segundo
plano, debe desacoplarse de TIA Portal y colocarse en una ventana separada en un segundo
monitor.
Otra posibilidad consiste en dividir la ventana de trabajo de TIA Portal y visualizar el editor de
Commissioning de forma permanente en la ventana dividida.
Esto permite ver directamente los avisos pendientes de la instancia de fondo y tomar las
decisiones adecuadas.
Si el editor de Commissioning se había cerrado, puede volver a abrirse haciendo clic en el
aviso de la ventana de información. Cuando el editor de Commissioning está cerrado, cada vez
que se realiza una nueva carga en el dispositivo se inicia en segundo plano y se muestra en
la barra de estado.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

121

Uso de la puesta en marcha multiusuario (Multiuser Commissioning)
3.9 Funcionalidad del editor de Commissioning

Estructura del editor de Commissioning
El gráfico siguiente muestra un ejemplo de la estructura del editor de Commissioning en inglés:

Estructura del editor de Commissioning
El editor de Commissioning tiene la estructura siguiente:
1. Barra de herramientas:
En la parte derecha tiene el botón para guardar los ajustes de diseño.
2. Área de botones:
Muestra los botones específicos de Commissioning para la carga.
El botón izquierdo indica que se está ejecutando el Commissioning: "Commissioning is being
executed".
Las restricciones pendientes para la carga se visualizan por medio del botón "Pending load
restrictions".
Si para la carga en el dispositivo son necesarios requisitos o decisiones del usuario, se
muestran en "Load requirements".
Las acciones necesarias pueden seleccionarse y ejecutarse en la lista desplegable que hay
debajo de "Action".
Los botones de la parte superior derecha permiten aplicar las acciones seleccionadas con
"Apply" o cancelarlas con "Cancel".
3. Avisos de Commissioning o "Commissioning messages"
Aquí se muestran los avisos y las informaciones para cargar en dispositivo.

122

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Poner en marcha proyectos con sincronización de PLC
4.1

4

Principios básicos de la sincronización de PLC

Introducción
En el marco del Team Engineering es posible poner en marcha proyectos conjuntamente con
ayuda de la sincronización de PLC. Así, varias personas pueden acceder paralela y
conjuntamente a una CPU con un máximo de cinco sistemas de ingeniería (ES).
Una de las principales ventajas de esta opción es que en la fase de puesta en marcha es
posible editar offline partes de un proyecto maestro de forma simultánea, paralela e
independiente entre sí. Durante la carga se visualizan las modificaciones de los demás
miembros del equipo en un diálogo para la "Sincronización del software" y, en lo posible, se
sincronizan automáticamente.
Algunas funciones online también pueden ejecutarse simultánea y paralelamente en la CPU
utilizada conjuntamente desde varios sistemas de ingeniería, por ejemplo:
● observar bloques en la CPU
● forzar bloques en la CPU
● funciones Trace
Las siguientes funciones online no pueden ejecutarse de forma simultánea:
● Carga: solo un ES puede cargar en la CPU en cada momento.
Encontrará información adicional sobre la Team Engineering (ingeniería en equipo) en
Servicio técnico y soporte en el Siemens Industry Online Support (http://
support.automation.siemens.com/WW/view/es/82142829).

Uso de Team Engineering
Manual de programación y manejo, 11/2019

123

Poner en marcha proyectos con sincronización de PLC
4.1 Principios básicos de la sincronización de PLC

Crear un proyecto maestro
La base para la sincronización de PLC dentro del marco de la puesta en marcha conjunta es
un "proyecto maestro" estructurado conforme a las reglas especificadas (Página 130), que
contiene la configuración hardware completa con todas las variables y bloques necesarios.
Este proyecto se carga en la CPU utilizada conjuntamente y, seguidamente, se distribuye
como "proyecto maestro" mediante copias del proyecto a un máximo de cinco sistemas de
ingeniería.

)DVHGHLQJHQLHU¯D

)DVHGHSXHVWDHQPDUFKD

&RSLDGHOSUR\HFWR
&UHDUHVWUXFWXUDGHO
SUR\HFWR&RQILJXUDU
KDUGZDUH&UHDUSURJUDPD

&DPELRV
HQ)%)&'%
HQODSDUWH

&38

&RSLDGHOSUR\HFWR
&DPELRV
HQ)%)&'%
HQODSDUWH

3UR\HFWRPDHVWUR
5HDOL]DUFDPELRV
FHQWUDOHVTXHDIHFWDQD
SDUWHVGHOSUR\HFWR
FRQMXQWDV

&38XWLOL]DGD
FRQMXQWDPHQWH

&RSLDGHOSUR\HFWR
&DPELRV
HQ)%)&'%
HQODSDUWH

Trabajar con copias del proyecto
Cada sistema de ingeniería edita únicamente las partes que le han sido asignadas dentro de
la correspondiente copia del proyecto. Esto es muy importante para evitar conflictos a la hora
de cargar y para impedir que se sobrescriban los bloques modificados por otros ES.
Después de la edición, cada ES carga sus partes en la CPU utilizada conjuntamente. El TIA
Portal le ayuda a la hora de realizar la carga en la CPU. En el diálogo "Sincronización del
software antes de la carga en dispositivo" (denominado en adelante "diálogo de
sincronización") se visualizan mediante una comparación online-offline las modificaciones
realizadas desde la última carga. Aquí obtendrá propuestas sobre cómo sincronizar durante la
carga los datos que ha editado offline con los datos online ahí existentes.
Si hubiera cambios "rivalizantes" deberán sincronizarse manualmente.
Se producen cambios rivalizantes en los siguientes casos:
● Cuando varias personas editan paralelamente el mismo bloque en diferentes copias del
proyecto.
● Cuando se agregan, modifican o borran variables PLC (I, Q, M, T, C) en las copias del
proyecto.

124

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Poner en marcha proyectos con sincronización de PLC
4.1 Principios básicos de la sincronización de PLC
● Cuando en las copias del proyecto se editan bloques que contienen referencias a la
configuración hardware.
● Cuando se editan bloques F en las copias del proyecto.
Los editores no pueden cargar los cambios en la CPU hasta que se han eliminado todos los
conflictos.
El procedimiento para editar y cargar las copias del proyecto desde los diferentes sistemas de
ingeniería puede repetirse tantas veces como sea necesario hasta que la sincronización de
PLC dentro del marco de la puesta en marcha conjunta haya concluido.

Volver a integrar copias del proyecto en el proyecto maestro
Para finalizar la sincronización de PLC es necesario volver a integrar las diferentes copias del
proyecto en el proyecto maestro. De este modo se guardan también los datos que existen
únicamente en los proyectos offline, es decir, que no se cargan en la CPU. Aquí se incluyen,
por ejemplo, las listas de textos y los idiomas del proyecto creados en las copias.
Para ello, abra el proyecto maestro y una copia del proyecto en cada caso como objeto de
referencia. Por medio del editor de comparación es posible determinar las diferencias entre
ambos proyectos realizando una comparación offline/offline. Copie los objetos editados de la
copia correspondiente del proyecto al proyecto maestro. Realice esta acción para todas las
copias del proyecto existentes.
De este modo, al finalizar la puesta en marcha conjunta, mediante la sincronización de PLC se
dispondrá de un proyecto maestro ejecutable con todos los datos de proyecto generados.
La integración de las copias en el proyecto maestro también es necesaria cuando durante la
fase de puesta en marcha se detecta la necesidad de realizar más ampliaciones o
correcciones en los elementos centrales utilizados conjuntamente como, p. ej., una ampliación
de la tabla de variables PLC o agregar un nuevo componente de hardware.

Indicaciones referentes a la compatibilidad
Para la sincronización de PLC dentro del marco de la puesta en marcha conjunta son válidas
las siguientes reglas de compatibilidad:
● Si un sistema de ingeniería con un TIA Portal V13 o superior está conectado online con la
CPU y realiza una carga, ningún otro sistema de ingeniería (ES), sea cual sea la versión
que tenga, podrá establecer otra conexión online.
● Si un sistema de ingeniería con un TIA Portal < V13 está conectado online a la CPU, ningún
otro sistema de ingeniería (ES), sea cual sea la versión que tenga, podrá establecer otra
conexión online.

Team Engineering (ingeniería en equipo)
En el marco del Team Engineering es posible poner en marcha proyectos conjuntamente. Así,
varias personas pueden acceder paralela y conjuntamente a una CPU con varios sistemas de
ingeniería (ES).

Uso de Team Engineering
Manual de programación y manejo, 11/2019

125

Poner en marcha proyectos con sincronización de PLC
4.2 Requisitos para la sincronización de PLC:

Sincronización de PLC
En la sincronización de PLC hay varios sistemas de ingeniería que trabajan conjunta y
paralelamente en una CPU en el marco de Team Engineering (ingeniería en equipo).

Proyecto maestro
El proyecto maestro es el proyecto base para la sincronización de PLC. Es un proyecto
estructurado conforme a las reglas especificadas que contiene la configuración hardware
completamente configurada con todas las variables y bloques necesarios. Este proyecto se
carga en la CPU utilizada conjuntamente y, seguidamente, se distribuye como "proyecto
maestro" mediante copias del proyecto a los sistemas de ingeniería que intervienen. Cada
sistema de ingeniería edita únicamente las partes que le han sido asignadas dentro de la
correspondiente copia del proyecto. Seguidamente, las copias del proyecto vuelven a
integrarse en el proyecto maestro.

Copia del proyecto
Cuando se trabaja con Team Engineering se crean copias de un proyecto a partir de proyectos
maestros estructurados y se distribuyen a los sistemas de ingeniería implicados para su
procesamiento. En el marco de la sincronización de PLC, cada sistema de ingeniería procesa
únicamente las partes que le han sido asignadas dentro de la correspondiente copia del
proyecto. Al finalizar la sincronización de PLC se vuelven a integrar las diferentes copias del
proyecto en el proyecto maestro.

Consulte también
Requisitos para la sincronización de PLC: (Página 126)
Procedimiento para la sincronización de PLC (Página 127)

4.2

Requisitos para la sincronización de PLC:

Requisitos de software y hardware
Para poner en marcha proyectos en equipo deben cumplirse los requisitos mínimos de
software y hardware para la instalación del TIA Portal V13.
Adicionalmente, existen los requisitos siguientes:
Software:
● El TIA Portal V13 o superior y el paquete de software "SIMATIC STEP 7 Professional" están
instalados en los sistemas de ingeniería implicados.
● Todos los sistemas de ingeniería deben tener instalada la misma versión de software.
● El proyecto maestro debe estar creado con la versión V13 o superior, actualizada a la
versión del TIA Portal utilizada en el sistema de ingeniería.

126

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Poner en marcha proyectos con sincronización de PLC
4.3 Procedimiento para la sincronización de PLC
● Si el TIA Portal se actualiza de una versión inferior a una superior, es necesario que todos
los sistemas de ingeniería implicados utilicen esa versión.
● Si el TIA Portal se actualiza de una versión inferior a una superior, es necesario adaptar el
proyecto maestro de forma centralizada y enviar copias del proyecto a los sistemas de
ingeniería implicados.
Hardware:
● Se dispone de una CPU S7-1500 configurada y parametrizada a partir de la versión de
firmware V1.5.
● Los sistemas de ingeniería implicados pueden establecer una conexión online con dicha
CPU.

Requisitos para el trabajo paralelo en equipo
Para poner en marcha proyectos en equipo deben cumplirse los requisitos siguientes:
● Hay un proyecto creado con la configuración hardware completa y el programa de usuario
completamente programado y listo para ser puesto en marcha.
● El proyecto está cargado en la CPU y definido como "proyecto maestro".
● Varios sistemas de ingeniería tienen acceso a esta CPU y pueden establecer una conexión
online con ella.
● Los usuarios conocen las reglas y los procedimientos definidos para trabajar en equipo en
una CPU.

Información sobre el modo de compatibilidad
La función de sincronización de PLC no está disponible en modo de compatibilidad.

Consulte también
Principios básicos de la sincronización de PLC (Página 123)
Procedimiento para la sincronización de PLC (Página 127)
Reglas para la sincronización de PLC (Página 130)

4.3

Procedimiento para la sincronización de PLC

Introducción
Cuando se utiliza por primera vez un proyecto en la Team Engineering (ingeniería en equipo),
es muy importante que todos los integrantes del proyecto se ajusten a un procedimiento
definido.
Solo si se mantiene el procedimiento definido queda garantizado que todos los cambios y
todas las correcciones realizados en el proyecto puedan sincronizarse y aplicarse
automáticamente y que al cargar no se sobrescriban involuntariamente cambios realizados por
determinados editores o incluso se pierdan por culpa de cambios rivalizantes.
Uso de Team Engineering
Manual de programación y manejo, 11/2019

127

Poner en marcha proyectos con sincronización de PLC
4.3 Procedimiento para la sincronización de PLC

Procedimiento para crear el proyecto maestro
El proyecto maestro se crea siguiendo los pasos descritos a continuación:
1. Cree un proyecto maestro que ya contenga su estructura completa.
2. Configure totalmente el hardware para el proyecto maestro.
3. Defina el idioma de proyecto que utilizarán de forma exclusiva todos los sistemas de
ingeniería que intervienen.
4. Cree todas las variables y todos los bloques necesarios en el proyecto maestro.
5. Cree carpetas y grupos propios para los bloques que deben editar los diferentes sistemas
de ingeniería.
6. Cree un programa de usuario totalmente programado y ejecutable.
7. Cargue el proyecto maestro en la CPU utilizada conjuntamente.
8. Guarde el proyecto maestro cada vez que efectúe una carga.
Al hacerlo tenga también en cuenta las Reglas para la sincronización de PLC (Página 130)

Procedimiento para la sincronización de PLC
La sincronización de PLC se lleva a cabo siguiendo los pasos descritos a continuación:
1. Cargue el proyecto maestro en la CPU utilizada conjuntamente.
2. Cree copias del proyecto maestro y distribúyalas entre los editores que trabajan en los
sistemas de ingeniería correspondientes.
3. Informe a todos los editores de las partes que pueden editar de las copias del proyecto y
que pueden cargar en la CPU.
4. Haga editar las copias del proyecto en los diferentes sistemas de ingeniería.
5. Tras la edición, cada uno de los sistemas de ingeniería cargará sucesivamente los cambios
en la CPU.
6. Durante la carga, todos los cambios se determinan automáticamente por medio de una
comparación online-offline. En el cuadro de diálogo de sincronización que aparece se
muestran propuestas para sincronizar los datos modificados, siempre que sea posible.
Posiblemente primero deba cargar en su ES bloques modificados por otros editores antes
de poder cargar los cambios en la CPU. Esto es necesario para actualizar en su copia del
proyecto las correcciones de otros editores que ya se han cargado en la CPU.
Existen las siguientes posibilidades de sincronización:
– Cargar bloque: la CPU contiene bloques modificados que deben actualizarse en la copia
del proyecto del usuario.
– Cargar bloque: la CPU contiene bloques nuevos que deben cargarse en la copia del
proyecto.
– Bloques con cambios rivalizantes: en este caso no es posible realizar una
sincronización por parte del sistema; el conflicto debe solucionarse manualmente.
7. Solucione manualmente los conflictos que hayan podido surgir debido a cambios
rivalizantes o a cambios en objetos centrales.
8. Cargue la copia del proyecto en la CPU cuando se hayan eliminado todos los conflictos.

128

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Poner en marcha proyectos con sincronización de PLC
4.3 Procedimiento para la sincronización de PLC
9. Guarde su copia del proyecto cada vez que efectúe una carga.
10.Repita la edición de las copias del proyecto y la carga en la CPU tantas veces como sea
necesario hasta que la sincronización de PLC haya concluido.
11.Vuelva a integrar las copias terminadas en el proyecto maestro para que se guarden
también los datos del proyecto que solo están disponibles offline.
Al hacerlo tenga también en cuenta Reglas para la sincronización de PLC (Página 130).

Procedimiento para sincronizar manualmente cambios rivalizantes
La sincronización manual de cambios rivalizantes se lleva cabo siguiendo los pasos descritos
a continuación:
1. Inicie el editor de comparación para solucionar manualmente los conflictos visualizados en
el cuadro de diálogo de sincronización al cargar en la CPU. Seleccione para ello la CPU
utilizada conjuntamente del árbol del proyecto y elija el comando "Comparar > offline/
online" del menú contextual. Dependiendo del estado de los objetos se pueden definir
determinadas acciones. No obstante, tenga en cuenta que en una sincronización solo es
posible ejecutar acciones en un sentido.
2. Seleccione primero la acción "Cargar de dispositivo" para todos los bloques modificados
por otros editores en la CPU que desea aplicar.
3. En caso necesario, realice una comparación detallada de los bloques para identificar las
diferencias entre sus bloques offline y los bloques online cargados en la CPU.
4. Corrija manualmente los cambios rivalizantes en los bloques.
5. Seguidamente cargue los bloques afectados con el comando "Continuar sin
sincronización" en la CPU.
6. Guarde su proyecto o la copia del proyecto cada vez que efectúe una carga.
Al hacerlo tenga también en cuenta las Reglas para la sincronización de PLC (Página 130)

Nota
Para evitar que se vuelvan a realizar cambios en modo online mientras se esté sincronizando
manualmente un sistema de ingeniería, ninguno de los demás sistemas de ingeniería del
equipo deberá realizar cargas en la CPU utilizada conjuntamente durante la sincronización
manual.

Procedimiento para integrar copias del proyecto en el proyecto maestro
La integración de las copias en el proyecto maestro se lleva a cabo siguiendo los pasos
descritos a continuación:
1. Abra el proyecto maestro y la copia que deba integrarse como proyecto de referencia.
2. Copie las partes del programa que haya editado de la copia en cuestión en proyecto
maestro y confirme la sobrescritura de los objetos existentes. Otra posibilidad consiste en
utilizar el editor de comparación para incorporar las partes del programa al proyecto
maestro.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

129

Poner en marcha proyectos con sincronización de PLC
4.4 Reglas para la sincronización de PLC
3. Guarde el proyecto maestro y cárguelo en la CPU utilizada conjuntamente con el comando
"Continuar sin sincronización".
4. Guarde el proyecto maestro cada vez que efectúe una carga.
Al hacerlo tenga también en cuenta las Reglas para la sincronización de PLC (Página 130)

Procedimiento para modificar objetos centrales en un proyecto maestro
La modificación de objetos centrales que afectan a todas las partes del programa se lleva a
cabo siguiendo los pasos descritos a continuación:
1. En primer lugar, deje de editar las copias del proyecto.
2. Integre sucesivamente todas las copias existentes en el proyecto maestro tal como se
describe anteriormente.
3. Cargue el proyecto maestro en la CPU utilizada conjuntamente con el comando "Continuar
sin sincronización".
4. Realice los cambios deseados en los objetos utilizados conjuntamente como, p. ej., en la
configuración hardware o en la tabla de variables PLC. Para modificar otros objetos
centrales, como objetos tecnológicos, bloques F, OB, etc., el procedimiento es análogo.
5. Vuelva a cargar el proyecto maestro en la CPU cuando la modificación haya concluido.
6. Guarde el proyecto maestro cada vez que efectúe una carga.
7. Distribuya las copias actualizadas del proyecto a los sistemas de ingeniería en cuestión
para que puedan seguir editándolas.
Al hacerlo tenga también en cuenta las Reglas para la sincronización de PLC (Página 130)

Consulte también
Principios básicos de la sincronización de PLC (Página 123)
Requisitos para la sincronización de PLC: (Página 126)
Reglas para la sincronización de PLC (Página 130)

4.4

Reglas para la sincronización de PLC

Introducción
Cuando pone en marcha un proyecto conjuntamente en el marco de la Team Engineering
(ingeniería de equipo) mediante la sincronización de PLC, para que el trabajo en equipo tenga
éxito es muy importante que todos los integrantes del proyecto se ajusten a reglas predefinidas.

130

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Poner en marcha proyectos con sincronización de PLC
4.4 Reglas para la sincronización de PLC

Reglas para el proyecto maestro
Deben observarse las reglas siguientes:
● Cree un proyecto maestro que sea adecuado para el trabajo en equipo.
● Divida el programa de usuario en partes independientes.
● Utilice "grupos" para separar también visualmente las partes del programa.
● Utilice un OB principal y por cada parte del programa un FC central que llame las funciones
de la parte correspondiente.
● Siempre que sea posible, cree una tabla de variables PLC propia para cada parte.
● Defina en el proyecto maestro un idioma de proyecto que no podrá modificarse en las
copias del proyecto.
● Si desea intercambiar datos entre las partes del programa, utilice los parámetros de interfaz
de FC y FB (IN, OUT, INOUT) o bien bloques de datos globales.
● Utilice bloques de datos globales y no marcas, para guardar los datos de las diferentes
partes del programa.
● No asigne nombres diferentes a bloques con direcciones idénticas.
● No asigne nombres idénticos a bloques con direcciones diferentes.

Ejemplo de la estructura del programa en el proyecto maestro
A continuación se muestra un ejemplo de un proyecto maestro con una estructura adecuada
para trabajar en equipo y editarlo paralelamente durante la sincronización de PLC.
Las partes del programa que deben procesar los diferentes sistemas de ingeniería se dividen
del siguiente modo:
● Parte 1: "Conveyer"
● Parte 2: "Drill"
● Parte 3: "FurtherProgrammPart"
En cada parte del programa existe un "Main-FB" que llama las funciones subordinadas para
esta parte del programa.
Ejemplo: en la parte "Conveyer", "ConveyerMainFB" llama la función "ConveyerStartupFC".

Uso de Team Engineering
Manual de programación y manejo, 11/2019

131

Poner en marcha proyectos con sincronización de PLC
4.4 Reglas para la sincronización de PLC

Gracias a este tipo de subdivisión en la estructura del proyecto, en el marco de la Team
Engineering (ingeniería en equipo) es posible editar paralelamente las diferentes partes del
programa y sincronizar automáticamente los cambios durante la fase de puesta en marcha en
equipo.

Reglas para trabajar en equipo en una CPU
Deben observarse las reglas siguientes para el trabajo en equipo:
● Cada editor edita en su copia del proyecto únicamente los bloques que se le han asignado
en los grupos que se le han asignado.
● En las copias del proyecto solo pueden modificarse OB, FB, DB, FC y UDT, es decir, los
siguientes elementos del programa no pueden editarse en las copias del proyecto:
– Configuraciones hardware
– Tabla de variables PLC
– Objetos tecnológicos
– Listas de textos e idioma del proyecto
– Bloques F
● En lugar de marcas, en la programación deberán utilizarse bloques de datos globales.
● En lugar de temporizadores y contadores SIMATIC, en la programación deberán utilizarse
temporizadores y contadores IEC.
● El idioma definido en el proyecto maestro no se puede modificar en las copias del proyecto.

132

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Poner en marcha proyectos con sincronización de PLC
4.4 Reglas para la sincronización de PLC

Reglas para editar objetos centrales utilizados conjuntamente
Deben observarse las reglas siguientes para objetos centrales utilizados conjuntamente:
● Los cambios realizados en objetos centrales utilizados conjuntamente solo pueden
realizarse en el proyecto maestro.
Algunos de estos objetos son:
– Configuraciones hardware
– Tabla de variables PLC
– Objetos tecnológicos
– Listas de textos e idioma del proyecto
– Bloques F
● Antes de poder modificar objetos centrales utilizados conjuntamente en el proyecto
maestro, es necesario integrar de nuevo en el proyecto maestro las diferentes versiones de
trabajo de las copias del proyecto.
● Posteriormente es posible realizar los cambios en el proyecto maestro y volver a cargarlo
en la CPU de uso común.
● Una vez finalizada la modificación es posible crear nuevas copias del proyecto y
distribuirlas a los sistemas de ingeniería para seguir editándolas.

Reglas para trabajar con bloques de organización
Deben observarse las reglas siguientes para la edición de OB:
● Los OB pueden crearse exclusivamente en el proyecto maestro. Si crea OB nuevos en una
copia del proyecto, no podrá sincronizarlos.
● Los OB que ya existen en el proyecto maestro y que se han cargado ya en la CPU, pueden
modificarse en las copias correspondientes del proyecto. Durante la carga, estos OB se
sincronizan automáticamente.

Reglas para cargar en la CPU
Deben observarse las reglas siguientes para la carga:
● Los ingenieros solo pueden cargar las copias del proyecto en la CPU sucesivamente; no es
posible cargar más de un sistema de ingeniería a la vez.
● Al cargar los bloques (el hardware sólo se puede cargar en el proyecto maestro) puede
mantenerse la conexión online de los sistemas de ingeniería implicados.
● Ejecute la sincronización que se propone automáticamente en el diálogo de sincronización.
De este modo se garantiza que no se sobrescriban involuntariamente cambios de otros
editores.
● En el cuadro de diálogo de sincronización elimine los conflictos de nombres cambiando el
nombre del bloque offline antes de cargarlo en la CPU. Se indicará un conflicto de nombres
si desea cargar en la CPU un bloque que ya existe en la CPU con el mismo nombre.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

133

Poner en marcha proyectos con sincronización de PLC
4.4 Reglas para la sincronización de PLC
● Las "modificaciones rivalizantes" deben eliminarse manualmente. Se producen cambios
rivalizantes cuando dos editores editan simultáneamente el mismo bloque en dos sistemas
de ingeniería. El primer editor puede cargar los cambios en la CPU sin problemas, pero
cuando el segundo editor quiere cargar también en la CPU el mismo bloque con los
cambios que ha realizado, en el cuadro de diálogo de sincronización se muestra un
conflicto que no puede solucionarse automáticamente. Al realizar la carga, los cambios
anteriores realizados en este bloque se perderían debido a la sobrescritura. En este caso,
los editores deben decidir qué cambios deben aplicarse y cuáles se rechazarán. También
puede agrupar manualmente los cambios por medio de la comparación detallada de los
bloques en el editor de comparación.
En todo caso, este tipo de cambios deberían evitarse sin falta con una buena estructuración
del proyecto y una buena coordinación entre los integrantes del equipo.
● Los cambios realizados en objetos centrales se muestran en el cuadro de diálogo de
sincronización, aunque no pueden sincronizarse automáticamente. Los cambios
realizados en objetos centrales y en la configuración hardware deben realizarse siempre
desde el proyecto maestro.
● Guarde su proyecto o la copia del proyecto cada vez que efectúe una carga.
Nota
Creación y posterior borrado de objetos en las copias del proyecto
Tenga en cuenta que la sincronización del software sigue siendo necesaria antes de cargar si
en una copia del proyecto se crea un objeto y se vuelve a borrar inmediatamente.
La creación de un objeto implica un cambio en la gestión interna de los datos que no se
deshace al borrar el objeto seguidamente. Por lo tanto, siempre será necesario realizar una
sincronización antes de la siguiente carga, aunque el objeto recién creado se haya borrado
inmediatamente y no se vean cambios en los objetos existentes en la copia del proyecto.

Reglas para las funciones online
Para utilizar las funciones online, deben observarse las siguientes reglas:
Carga:
● No puede cargar datos en la CPU más de un sistema de ingeniería a la vez.
● Durante la carga, otros sistemas de ingeniería pueden utilizar funciones online adicionales,
como observar y forzar.
Observar y forzar:
● Hasta diez sistemas de ingeniería pueden observar y forzar simultáneamente hasta 16
bloques distintos en la CPU (CPU 1517/1518). Encontrará más detalles en los datos
técnicos de la CPU.
● Un bloque lógico específico no puede ser observado y forzado por más de un sistema de
ingeniería al mismo tiempo.
● Sin embargo otros sistemas de ingeniería pueden observar y forzar simultáneamente otros
bloques lógicos.

134

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Poner en marcha proyectos con sincronización de PLC
4.4 Reglas para la sincronización de PLC

ATENCIÓN
Peligro debido al forzado paralelo de un operando idéntico con diferentes valores de forzado
en varias tablas de observación
Cuando se trabaja con varias tablas de observación debe tenerse en cuenta que los
operandos idénticos no deben forzarse varias veces de forma permanente con diferentes
valores de forzado.
Cuando un operando idéntico se fuerza de forma permanente y simultánea en varias tablas
de observación con diferentes valores de forzado permanente, en todas las tablas de
observación se muestra el último valor forzado como valor de observación, puesto que en
este caso se fuerza siempre el último valor de forzado asignado.
Forzado permanente
● No se puede forzar permanentemente en la CPU desde más de un sistema de ingeniería
a la vez.
● El sistema de ingeniería que inicia el forzado permanente ha lanzado la petición de forzado
permanente en exclusiva. El resto de sistemas de ingeniería son informados de que se está
ejecutando una petición de forzado permanente, pero no pueden acceder a dicha petición
para realizar modificaciones. Con el comando "Actualizar operandos forzados
permanentemente" se actualizan en la tabla de forzado permanente abierta todos los
operandos y valores que actualmente están forzados de forma permanente en la CPU. En
la tabla de forzado permanente abierta se actualizan todos los operandos forzados
permanentemente con los valores correspondientes. En la primera columna aparece una
"F" roja que indica los operandos que se están forzando permanentemente.
● En cuanto el sistema de ingeniería al que pertenece la petición de forzado permanente
deshace la conexión online, la petición de forzado permanente puede ser asumida por otro
sistema de ingeniería (ES) que establezca una conexión online con la CPU y ejecute el
comando "Actualizar operandos forzados permanentemente". De este modo se habilitan
los botones "Forzar todos permanentemente" y "Finalizar forzado permanente" y es posible
ejecutar esta función.
Funciones Trace:
● Pueden realizar funciones Trace hasta cuatro sistemas de ingeniería a la vez.
● El sistema de ingeniería que inicia el Trace ha lanzado la petición Trace en exclusiva. El
resto de sistemas de ingeniería pueden ver esta petición en el editor de Trace, pero no
pueden acceder a ella.
● En cuanto el sistema de ingeniería al que pertenece la petición Trace finaliza el editor de
Trace, la petición Trace puede ser asumida por otro ES que vuelva a abrir el editor de Trace.
Test con puntos de parada:

Uso de Team Engineering
Manual de programación y manejo, 11/2019

135

Poner en marcha proyectos con sincronización de PLC
4.4 Reglas para la sincronización de PLC
En cuanto un sistema de ingeniería de una CPU S7-1500 con versión de firmware V2.5 o
superior activa un punto de parada, se aplican las reglas siguientes:
● La activación de puntos de parada por parte de otros sistemas de ingeniería está
bloqueada.
● La activación de puntos de parada adicionales en el sistema de ingeniería que se está
ejecutando está permitida incluso si la CPU está en estado operativo "PARADA" (pausada)
tras alcanzar un punto de parada.
● Desde otro sistema de ingeniería no es posible realizar una "carga en dispositivo" y el
programa de la CPU no puede seguir ejecutándose, pues la CPU está en estado operativo
"PARADA" tras alcanzar un punto de parada. La ejecución del programa no prosigue hasta
que el sistema de ingeniería que se está ejecutando cambia el estado operativo de la CPU
de "PARADA" a "RUN". Otros sistemas de ingeniería no pueden cambiar el estado
operativo directamente a "RUN" tras alcanzar un punto de parada. La CPU debe ponerse
primero al estado operativo "STOP" para poder ponerse a "RUN" a continuación.
● Si ya se está ejecutando una "carga en dispositivo", no es posible activar puntos de parada
durante el proceso de carga.
● La "carga en dispositivo" también es posible en estado operativo "PARADA" si no hay
puntos de parada activados. En este caso, durante la carga la CPU pasa al estado
operativo "STOP".
ATENCIÓN
Activar puntos de parada en una CPU S7-1500 con versión de firmware V2.5 o superior
En cuanto se activa un punto de parada en una CPU S7-1500 V2.5 o superior, se recibe
información de que los valores de salida para los módulos de salida conectados mantienen
su estado correspondiente y (al contrario que en SIMATIC S7-300/S7-400) no se restablecen
ni toman los valores sustitutivos configurados. Además, SIMATIC S7-1500 deja de reaccionar
en este estado a los valores de entrada de los módulos de entrada.
Esta información se muestra una sola vez en cada sesión online.

Reglas para trabajar con Software Units
Para trabajar con Software Units deben observarse las reglas siguientes:
Sincronización de Software Units:
● Las relaciones y propiedades de Software Units (p. ej., nombre, autor, etc.) no pueden
sincronizarse automáticamente al trabajar con "Sincronización PLC"
● El resultado puede ser que las relaciones y propiedades ya modificadas por un usuario se
sobrescriban con una versión anterior al cargar en el dispositivo y desde él.
Nota
Modificación de propiedades y relaciones de Software Units
Las propiedades y relaciones de Software Units solo pueden modificarse en el proyecto
maestro.

136

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Poner en marcha proyectos con sincronización de PLC
4.4 Reglas para la sincronización de PLC

Consulte también
Principios básicos de la sincronización de PLC (Página 123)
Requisitos para la sincronización de PLC: (Página 126)
Procedimiento para la sincronización de PLC (Página 127)

Uso de Team Engineering
Manual de programación y manejo, 11/2019

137

Poner en marcha proyectos con sincronización de PLC
4.4 Reglas para la sincronización de PLC

138

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Intercambio de datos con Inter Project Engineering
(IPE)
5.1

5

Principios básicos de la ingeniería interproyecto (IPE)

Introducción a la ingeniería interproyecto (IPE)
Con la funcionalidad de ingeniería interproyecto, en lo sucesivo IPE, se pueden intercambiar
los datos de control de un proyecto de origen con otros proyectos mediante un proxy de
dispositivo.
Estos datos se pueden incorporar a otros proyectos, p. ej. para la visualización en HMI, y ahí
ser utilizados para otras configuraciones.
Así, la ingeniería interproyecto le permite, de un modo simple, disponer de datos de control
interproyecto de una programación PLC para la configuración HMI.
Con el objeto "Datos del proxy del dispositivo" se efectúa un intercambio coherente y cómodo
de los datos de control entre varios proyectos sin redundancia de labores de configuración.
De esta manera, el ingeniero de configuración HMI puede trabajar en un proyecto sin
necesidad de que exista configuración hardware en su proyecto. Así, los trabajos los trabajos
en el proyecto PLC y en el proyecto HMI pueden realizarse paralela y simultáneamente.
Con el proxy de dispositivo se pueden intercambiar los siguientes datos de control entre los
proyectos:
● Bloques de programa
● Objetos tecnológicos
● Variables PLC
● Avisos PLC
En el intercambio se transfieren de forma automática los datos siguientes:
● Interfaces del controlador
● Procesadores y módulos de comunicación configurados
Con este intercambio automático de datos se asegura que, además de los datos
seleccionados por usted, también se transfieran las interfaces y los procesadores y módulos
de comunicación configurados. Estos datos son necesarios para un procesamiento ulterior
correcto y coherente en su proyecto de destino.

Intercambio de datos entre varios proyectos
Para el intercambio de datos entre varios proyectos con ingeniería interproyecto tiene las
opciones siguientes:
● Intercambio de datos de control mediante un archivo IPE
● Intercambio de datos de control mediante un archivo de proyecto

Uso de Team Engineering
Manual de programación y manejo, 11/2019

139

Intercambio de datos con Inter Project Engineering (IPE)
5.1 Principios básicos de la ingeniería interproyecto (IPE)

Intercambio de datos de control mediante un archivo IPE
En la figura siguiente se muestra el intercambio de datos entre varios proyectos por medio de
un archivo IPE.
Marco de la imagen

3UR\HFWRGHRULJHQ

3UR\HFWRGHGHVWLQR

'DWRVGHSUR[\GH
GLVSRVLWLYR3/&B$

3/&B$

([SRUWDFLµQ

,QLFLDOL]DFLµQ
$UFKLYR,3(
3UR[\GHGLVSRVLWLYR3/&

'DWRVGHSUR[\GH
GLVSRVLWLYR3/&B$

Los datos de control del PLC procedentes del proyecto de origen se transfieren al PLC del
proyecto de destino mediante el objeto "Datos del proxy del dispositivo".
Los datos de control que se intercambian mediante un archivo IPE tienen que proceder de
proyectos de TIA Portal V13 o superior.

Intercambio de los datos de control mediante un archivo de proyecto
La figura siguiente muestra el intercambio de datos entre varios proyectos por medio de un
archivo de proyecto.

Marco de la imagen

3UR\HFWRGHRULJHQ

3/&B$

'DWRVGHSUR[\GH
GLVSRVLWLYR

3UR\HFWRGHGHVWLQR

'DWRVGHSUR[\GH
GLVSRVLWLYR3/&B$\
3/&B%

,QLFLDOL]DFLµQ
3/&B%

'DWRVGHSUR[\GH
GLVSRVLWLYR

$UFKLYRGH
SUR\HFWR

3UR[\GHGLVSRVLWLYR3/&

Los datos de control de PLC procedentes del proyecto de origen se transfieren al PLC del
proyecto de destino mediante un archivo de proyecto.
Es posible adoptar y reutilizar cómodamente, en los proyectos TIA Portal actuales, datos de
control tanto de antiguos proyectos del TIA Portal como de proyectos STEP 7 Classic que no
están integrados en el TIA Portal.

140

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Intercambio de datos con Inter Project Engineering (IPE)
5.1 Principios básicos de la ingeniería interproyecto (IPE)

Ingeniería interproyecto (IPE)
Con la funcionalidad de ingeniería interproyecto (Inter Project Engineering), también llamada
"IPE", se pueden intercambiar los datos de control de un proyecto de origen con ayuda del
objeto "Datos de proxy de dispositivo" entre varios proyectos.

IPE
Con la funcionalidad de ingeniería interproyecto (Inter Project Engineering), también llamada
"IPE", se pueden intercambiar los datos de control de un proyecto de origen con ayuda del
objeto "Datos de proxy de dispositivo" entre varios proyectos.

Archivo IPE
El archivo IPE contiene datos de control de la CPU de un proyecto de origen que pueden se
transfieren mediante el objeto "Datos de proxy de dispositivo" a la CPU del proyecto de destino.

Archivo de proyecto
El archivo de proyecto transfiere los datos de control de la CPU de un proyecto de origen a la
CPU del proyecto de destino. Estos datos de control se pueden aplicar a los proyectos TIA
Portal actuales y reutilizar cómodamente, tanto desde antiguos proyectos del TIA Portal como
desde proyectos STEP 7 Classic que no estén integrados en el TIA Portal.

Datos de proxy de dispositivo
El objeto "Datos de proxy de dispositivo" permite intercambiar datos de control de la CPU de
forma coherente entre un proyecto de origen y uno de destino sin tener que repetir la
configuración.

Intercambio de datos entre proyectos con IPE
Con la funcionalidad de Inter Project Engineering (IPE) se dispone de las siguientes opciones
para intercambiar datos entre proyectos de forma coherente:
● Intercambio de datos de control mediante un archivo IPE
● Intercambio de los datos de control mediante un archivo de proyecto
Ambos archivos transfieren los datos de control de la CPU de un proyecto de origen a la CPU
del proyecto de destino.

Consulte también
Requisitos para la ingeniería interproyecto (IPE) (Página 142)
Vista general al trabajar con ingeniería interproyecto (IPE) (Página 142)

Uso de Team Engineering
Manual de programación y manejo, 11/2019

141

Intercambio de datos con Inter Project Engineering (IPE)
5.3 Vista general al trabajar con ingeniería interproyecto (IPE)

5.2

Requisitos para la ingeniería interproyecto (IPE)

Requisitos de software y hardware
Para aprovechar la funcionalidad de la ingeniería interproyecto, deben cumplirse los requisitos
mínimos de software y hardware para la instalación del TIA Portal V13 o superior.
Adicionalmente, existen los requisitos siguientes:
● El TIA Portal V13 o superior y el paquete de software "SIMATIC STEP 7 Professional" están
instalados.
● Utilice una CPU de la familia S7-1200/1500 o S7-300/400.
● Todos los controladores implicados deben tener instalada la misma versión de software.

Requisitos para IPE
Para poder importar datos de control procedentes de proyectos, existen los requisitos
siguientes:
● Haber creado un proyecto con configuración hardware y datos PLC que puedan transferirse
a otro proyecto.
● Haber comprobado si el proyecto es coherente antes de transferir los datos de control
mediante el objeto "Datos de proxy de dispositivo".
● Conocer los procedimientos definidos para la ingeniería de interproyecto.

Indicaciones sobre el modo de compatibilidad
La funcionalidad para la ingeniería interproyecto no está disponible en el modo de
compatibilidad.

Consulte también
Principios básicos de la ingeniería interproyecto (IPE) (Página 139)
Vista general al trabajar con ingeniería interproyecto (IPE) (Página 142)

5.3

Vista general al trabajar con ingeniería interproyecto (IPE)

Intercambio de datos de control entre varios proyectos
Con la funcionalidad de ingeniería interproyecto (IPE) se pueden intercambiar entre varios
proyectos los datos de control existentes con un "Proxy de dispositivo", y utilizarlos a
continuación en otro proyecto. El "Proxy de dispositivo" le permite un intercambio de datos
coherente y cómodo entre varios proyectos sin redundancia de labores de configuración.

142

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Intercambio de datos con Inter Project Engineering (IPE)
5.3 Vista general al trabajar con ingeniería interproyecto (IPE)

Procedimiento para el intercambio de datos de control mediante un archivo IPE
Para el intercambio de datos mediante un archivo IPE siga estos pasos:
1. Con TIA Portal, cree un proyecto con todos los datos de control necesarios y un programa
de usuario ejecutable.
2. Configure el hardware necesario para el proyecto.
3. Compile el proyecto para asegurar la coherencia de su proyecto.
4. En su proyecto, debajo de la CPU deseada, cree el objeto "Datos del proxy del dispositivo"
haciendo clic en el comando "Agregar datos del proxy del dispositivo" de la carpeta "Datos
del proxy del dispositivo".
Resultado: Se ha creado el objeto "Datos del proxy del dispositivo".
5. Seleccione el objeto Datos del proxy del dispositivo que desee en el árbol del proyecto y
ábralo en el editor haciendo doble clic.
6. Introduzca en el editor los datos deseados para Datos del proxy del dispositivo bajo
"General" o transfiera el ajuste predeterminado. Tiene la opción de modificar el nombre y de
añadir un comentario para la exportación de los datos de control.
Seleccione en el área "Definir contenido" del editor los datos de control que desee exportar
como archivo IPE y haga clic en el comando "Exportar datos del proxy del dispositivo".
7. Indique en el cuadro de diálogo siguiente el nombre y la ubicación para el archivo IPE que
se ha de crear y haga clic en "Guardar". En cuanto la exportación finalice correctamente, se
le mostrará un aviso.
Resultado: Los datos de control seleccionados se han exportado como archivo IPE.
8. En el proyecto de destino, cree un proxy de dispositivo para poder importar los datos de
control que hay en el archivo IPE. Para ello, haga clic en el comando "Agregar dispositivo"
y seleccione el proxy de dispositivo que desee en el cuadro de diálogo siguiente.
9. Haga clic en el proxy recién creado y, en el menú contextual, seleccione el comando
"Inicializar proxy del dispositivo".
10.Seleccione el archivo IPE que se creó antes y que va a utilizarse para la inicialización, y
confirme la selección en el cuadro de diálogo siguiente con "Aceptar". A continuación se
lleva a cabo la inicialización.
Resultado: Los datos de control del proyecto de origen contenidos en el archivo IPE se
transfieren al proxy de dispositivo del proyecto de destino.
En cuanto se haya realizado correctamente el intercambio de datos de control, se puede
proseguir con la configuración en el proyecto de destino y, por ejemplo, conectar las variables
PLC con las variables HMI. Si cambian los datos de control en el proyecto de origen, estos se
pueden actualizar con la frecuencia que convenga.

Procedimiento para el intercambio de datos de control mediante un archivo de proyecto
Al intercambiar datos de control mediante un archivo de proyecto, pueden haberse predefinido
datos del proxy del dispositivo en el proyecto de origen o definirse y seleccionarse desde el
proyecto de destino.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

143

Intercambio de datos con Inter Project Engineering (IPE)
5.3 Vista general al trabajar con ingeniería interproyecto (IPE)
Para el intercambio de datos mediante un archivo de proyecto siga estos pasos:
1. Con TIA Portal, cree un proyecto con todos los datos de control necesarios y un programa
de usuario ejecutable.
2. Configure el hardware necesario para el proyecto.
3. Compile el proyecto para asegurar la coherencia de su proyecto.
4. Abra el proyecto de TIA Portal cuyos datos de control desee importar al proyecto de destino.
5. En su proyecto, debajo de la CPU deseada, cree el objeto "Datos del proxy del dispositivo"
haciendo clic en el comando "Agregar datos del proxy del dispositivo" de la carpeta "Datos
del proxy del dispositivo".
Resultado: Se ha creado el objeto "Datos del proxy del dispositivo".
6. Introduzca en el editor los datos deseados para Datos del proxy del dispositivo bajo
"General" o transfiera el ajuste predeterminado. Tiene la opción de modificar el nombre y de
añadir un comentario para los datos del proxy del dispositivo.
7. Seleccione en el editor, en el área "Definir contenido", qué datos de control desea poner a
disposición a través del objeto Datos del proxy del dispositivo.
8. Haga clic en "Guardar" para guardar las modificaciones del proyecto.
Resultado: Ha guardado correctamente los datos de control seleccionados en sus datos del
proxy del dispositivo.
9. En el proyecto de destino, cree un proxy de dispositivo para poder importar los datos de
control que hay en el archivo de proyecto. Para ello, haga clic en el comando "Agregar
dispositivo" y seleccione el proxy de dispositivo que desee en el cuadro de diálogo
siguiente.
10.Haga clic en el proxy recién creado y, en el menú contextual, seleccione el comando
"Inicializar proxy del dispositivo".
11.Seleccione el archivo de proyecto creado anteriormente con el objeto Datos del proxy del
dispositivo que ha preparado y que va a utilizarse para la inicialización, y confirme la
selección en el cuadro de diálogo siguiente con "Aceptar". A continuación se lleva a cabo
la inicialización.
Resultado: Los datos de control del proyecto de origen contenidos en el archivo de proyecto
se transfieren al proxy de dispositivo del proyecto de destino.
En cuanto se haya realizado correctamente el intercambio de datos de control, se puede
proseguir con la configuración en el proyecto de destino y, por ejemplo, conectar las variables
PLC con las variables HMI. Si cambian los datos de control en el proyecto de origen, estos se
pueden actualizar con la frecuencia que convenga.

Procedimiento para actualizar los datos de control ya transferidos
Requisitos para la actualización:

144

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Intercambio de datos con Inter Project Engineering (IPE)
5.3 Vista general al trabajar con ingeniería interproyecto (IPE)
Para actualizar los datos de control ya transferidos mediante el objeto "Datos del proxy del
dispositivo" ya creado deben cumplirse los siguientes requisitos:
● Para la actualización se utiliza el mismo proyecto que en la anterior transferencia de los
datos de control.
● Para la transferencia de datos de control se utilizan el objeto "Datos del proxy del
dispositivo" ya creado.
● No ha modificado la configuración hardware ni las interfaces de comunicación. Está
permitido agregar nuevos componentes de hardware.
Procedimiento para la actualización:
1. Abra el proyecto del TIA Portal cuyos datos de control desee actualizar en el proyecto de
destino.
2. Haga doble clic en el objeto "Datos del proxy del dispositivo" existente y seleccione en
"Contenido" los datos de control que desee para la actualización.
3. Guarde el proyecto y exporte de nuevo el archivo IPE.
4. En el TIA Portal, abra el proyecto de destino que desee.
5. Haga clic en el proxy de dispositivos existente en el proyecto de destino y, en el menú
contextual, seleccione el comando "Actualizar proxy del dispositivo".
6. Seleccione el archivo de origen que deba utilizarse para la actualización y confirme la
selección.
7. En el cuadro de diálogo siguiente, seleccione en "Dispositivo" la CPU utilizada
anteriormente como CPU de origen, desde la que se deben volver a importar los datos de
control.
8. En "Datos definidos del proxy del dispositivo", seleccione el objeto que desee y cierre la
ventana con "Aceptar".
9. A continuación comienza la actualización y los datos seleccionados del proxy del
dispositivo se transfieren desde el proyecto de origen al proxy de dispositivo del proyecto
de destino.
Una vez finalizada correctamente la actualización de los datos de control, se puede proseguir
con la configuración en el proyecto de destino y, por ejemplo, conectar las variables PLC con
las variables HMI. Si cambian los datos de control en el proyecto de origen, estos se pueden
actualizar con la frecuencia que convenga.

Consulte también
Principios básicos de la ingeniería interproyecto (IPE) (Página 139)
Requisitos para la ingeniería interproyecto (IPE) (Página 142)

Uso de Team Engineering
Manual de programación y manejo, 11/2019

145

Intercambio de datos con Inter Project Engineering (IPE)
5.5 Creación del archivo IPE con ayuda de "Datos de proxy de dispositivo"

5.4

Creación de datos de proxy de dispositivo en el proyecto de origen

Introducción
Para poder intercambiar datos de control entre varios proyectos, en el proyecto de origen se
precisa el objeto "Datos de proxy de dispositivo", que puede transferir los datos de control de
la CPU correspondiente como archivo IPE.

Creación del objeto "Datos de proxy de dispositivo" en el proyecto de origen
Para crear un nuevo objeto "Datos de proxy del dispositivo", siga estos pasos:
1. Abra la carpeta "Datos de proxy de dispositivo" debajo de la CPU para la cual desea crear
un objeto "Datos de proxy de dispositivo".
2. Haga clic en el comando "Agregar nuevos datos del proxy del dispositivo".

Resultado
Se ha creado el objeto "Datos de proxy de dispositivo" y se muestra en la navegación del
proyecto debajo de la CPU correspondiente.
El objeto "Datos de proxy de dispositivo" generado contiene los datos de control de la CPU
correspondiente.

5.5

Creación del archivo IPE con ayuda de "Datos de proxy de dispositivo"

Abrir los datos de proxy de dispositivo y definir el contenido para el archivo IPE
Para generar un archivo IPE con ayuda de un objeto "Datos de proxy de dispositivo", siga estos
pasos:
1. En la carpeta "Datos del proxy del dispositivo" del árbol del proyecto de la respectiva CPU,
abra el objeto "Datos del proxy del dispositivo" que desee haciendo doble clic.
2. Introduzca en el editor los ajustes deseados para el objeto "Datos de proxy de dispositivo"
bajo "General", o adopte el ajuste predeterminado. Tiene la opción de modificar el nombre
y de añadir un comentario para la exportación de los datos de control.
3. En el área "Definir contenido" del editor, seleccione los datos de control de la CPU que
desee exportar como archivo IPE y haga clic en el comando "Exportar datos de proxy de
dispositivo".
4. Indique en el cuadro de diálogo siguiente el nombre y la ubicación para el archivo IPE que
se ha de crear y haga clic en "Guardar". En cuanto la exportación finalice correctamente, se
le mostrará un aviso.

146

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE

Resultado
Los datos de control seleccionados se han exportado como archivo IPE.

5.6

Uso de datos de control de otros proyectos con IPE

5.6.1

Uso de datos de control de otros proyectos en el panel de operador

5.6.1.1

Principios básicos de los datos de control

Introducción
En el proyecto de origen del controlador se puede elegir qué datos de control se guardarán
como datos de proxy de dispositivo.
Para ello se generan datos de proxy de un controlador configurado.

¿Qué datos de control pueden intercambiarse?
Mediante IPE se pueden intercambiar los siguientes datos de control:
● Bloques de datos
● Objetos tecnológicos
● Variables PLC
● Vigilancias de PLC y avisos de PLC
La siguiente información se intercambia automáticamente:
● Interfaces del controlador
● Procesadores de comunicación y módulos de comunicaciones configurados en el
controlador

5.6.1.2

Inicializar proxy de dispositivos mediante archivo IPE

Inicialización de proxys de dispositivos mediante archivo IPE
¿Cómo funciona la inicialización de un proxy de dispositivos mediante un archivo IPE?
Se pueden intercambiar datos de control entre dos o más proyectos con ayuda de los archivos
IPE.
Los archivos IPE se pueden enviar, p. ej., por correo electrónico, pues el volumen de datos es
reducido.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

147

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE
Puede generar para cada controlador varios archivos IPE con diferentes datos de proxy de
dispositivos.
En el proyecto de destino, un proxy de dispositivos solo puede llenarse con un registro de proxy
de dispositivos.
3UR\HFWRGHRULJHQ

3UR\HFWRGHGHVWLQR

3/&B$

([SRUWDFLµQ
'DWRVGHSUR[\GH
GLVSRVLWLYRV3/&B$

'DWRVGHSUR[\GH
GLVSRVLWLYRV
3/&B$

,QLFLDOL]DFLµQ

$UFKLYR,3(
3UR[\GHGLVSRVLWLYRV
3/&

● Desde el proyecto de origen se exporta un archivo IPE.
El archivo IPE contiene datos de proxy de dispositivos del controlador "PLC_A".
● En el proyecto de destino se crea un proxy de dispositivos.
● En el proyecto de destino se inicializa entonces el proxy de dispositivos con sus
correspondientes datos mediante el archivo IPE.
● Tras la inicialización, todos los datos de proxy de dispositivos procedentes del archivo IPE
estarán contenidos en dicho proxy.
● Si se realizan modificaciones en el proyecto de origen, el proxy de dispositivos puede ser
actualizado en el proyecto de destino por el PLC_A mediante el nuevo archivo IPE
generado.

Inicializar proxy de dispositivos mediante archivo IPE
Introducción
En el TIA Portal se inicializan los proxys de dispositivos en un cuadro de diálogo del proxy de
dispositivos.
En el archivo IPE están contenidos los datos de proxy de dispositivos procedentes del proyecto
de origen.

Requisitos
Debe existir un archivo IPE.

148

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE

Procedimiento
1. Haga doble clic en "Agregar dispositivo" en el árbol del proyecto.
2. Seleccione el proxy de dispositivos en "Controlador".

En el editor "Dispositivos y redes" se crea un nuevo dispositivo.
3. Seleccione el proxy de dispositivos en el árbol del proyecto.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

149

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE
4. Seleccione "Inicializar proxy de dispositivos" en el menú contextual.

5. Seleccione el archivo IPE y haga clic en "Abrir".
Se abre el cuadro de diálogo "Inicializar proxy de dispositivos".
Nota
En el proyecto de destino no es posible elegir los datos de proxy de dispositivos antes de
la inicialización.
Se aplican todos los datos de proxy de dispositivos que están presentes en el archivo IPE.
Si desea seleccionar datos de proxy de dispositivos antes de una inicialización, inicialice el
proxy de dispositivos mediante el archivo de proyecto: Inicializar proxy de dispositivos
mediante archivo de proyecto (Página 153)
6. Haga clic en "Aceptar".
Comenzará la inicialización del proxy de dispositivos.

Resultado
Tras la correcta inicialización, los datos de proxy de dispositivos procedentes del archivo IPE
estarán guardados en dicho proxy.
Ahora puede configurar una conexión HMI con el proxy de dispositivos y, p. ej., conectar
variables PLC del proxy de dispositivos con variables HMI.

150

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE

Actualizar proxy de dispositivos mediante archivo IPE
Introducción
Si en el proyecto de origen del proxy de dispositivos se han modificado los datos de dicho
proxy, estos datos se pueden actualizar en el proyecto de destino.

Requisitos
● Nuevo archivo IPE con los datos de proxy de dispositivos procedentes del proyecto de
origen.
● En el proyecto de destino ya se ha inicializado un proxy de dispositivos con un archivo IPE.

Procedimiento
1. Haga clic en el proxy de dispositivos en el árbol del proyecto.
2. Seleccione "Actualizar proxy de dispositivos" en el menú contextual.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

151

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE
3. Seleccione el archivo IPE.

4. Seleccione si desea actualizar las direcciones PROFINET o PROFIBUS.
5. Haga clic en "Aceptar".

152

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE

5.6.1.3

Inicializar proxy de dispositivos mediante archivo de proyecto

Inicialización de proxys de dispositivos mediante archivo de proyecto
¿Cómo funciona la inicialización mediante un archivo de proyecto?
Puede aplicar los datos de control a su proyecto del TIA Portal mediante un archivo de
proyecto:
3UR\HFWRGHRULJHQ

3/&B$

'DWRVGHSUR[\GH
GLVSRVLWLYRV

3/&B%

'DWRVGHSUR[\GH
GLVSRVLWLYRV

3UR\HFWRGHGHVWLQR

,QLFLDOL]DFLµQGHGDWRVGH
SUR[\GHGLVSRVLWLYRV

3UR[\GHGLVSRVLWL
YRV3/&

● En el proyecto de origen existen, p. ej., dos controladores.
● En el proyecto de origen, los dos controladores crean objetos de datos de proxy de
dispositivos.
● El proyecto de origen se guarda.
● En el proyecto de destino se crea un proxy de dispositivos.
● Con la entrada para inicializar el proxy de dispositivos en el menú contextual de dispositivo
se selecciona primero el proyecto de origen (*.ap13).
● Para la selección están disponibles los controladores "PLC_A" y "PLC_B" y sus datos de
proxy de dispositivos ya creados.
● Tras la selección de datos de proxy de dispositivos de "PLC_A", los datos se guardan en el
PLC_Proxy del proyecto de destino.
● Las modificaciones del proyecto de origen pueden aplicarse con una actualización
mediante el archivo de proyecto.

Inicializar proxy de dispositivos mediante archivo de proyecto
Introducción
Los proxys de dispositivos se inicializan con un archivo de proyecto.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

153

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE

Requisitos
Archivo de proyecto (*.ap*) disponible.

Procedimiento
1. Haga doble clic en "Agregar dispositivo" en el árbol del proyecto.
2. Seleccione el proxy del dispositivo en "Controlador".

En el editor "Dispositivos y redes" se crea un nuevo dispositivo.
3. Seleccione el proxy del dispositivo en el árbol del proyecto.

154

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE
4. Seleccione "Inicializar proxy del dispositivo" en el menú contextual.

5. Seleccione en el cuadro de diálogo "Abrir fuente de datos de proxy de dispositivos" la
siguiente entrada:
"Proyectos de TIA Portal (*.ap*)"
6. Seleccione un archivo de proyecto y haga clic en "Abrir".
Se abre el cuadro de diálogo "Inicializar proxy del dispositivo".
7. Seleccione, en un PLC disponible, un objeto de datos del proxy del dispositivo ya creado
para inicializar el proxy.
8. Haga clic en "Aceptar".
Nota
Al inicializar el proxy del dispositivo se comprueba automáticamente si los datos seleccionados
son coherentes y se pueden aplicar en el proyecto de destino. Si el proyecto de origen contiene
datos incoherentes, compílelo.

Resultado
Tras la inicialización, los datos de control del archivo de proyecto que contiene el objeto Datos
del proxy de dispositivos seleccionado se guardan en el proxy.
Ahora podrá configurar una conexión HMI con el proxy del dispositivo y, p. ej., conectar
variables PLC del proxy del dispositivo con variables HMI.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

155

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE

Inicialización mediante proyectos STEP 7 V5.5
Para más información sobre la importación de datos de control de proyectos previos a TIA
Portal V11, consulte el capítulo Configuración integrada con WinCC y Simatic Manager
(Página 165).
Encontrará más información en la FAQ con la ID de artículo 73502293 (http://
support.automation.siemens.com/WW/view/es/73502293)

Consulte también
Configuración integrada con WinCC y SIMATIC Manager (Página 165)

Actualizar proxy de dispositivos mediante archivo de proyecto
Introducción
Si en el proyecto de origen del proxy de dispositivos se han modificado los datos de control,
puede actualizar el proxy de dispositivos en su proyecto del TIA Portal.

Requisitos
● El archivo de proyecto se ha generado a partir del proyecto de origen del proxy de
dispositivos.
● En el proyecto de destino existe un proxy de dispositivos ya inicializado.

Procedimiento
1. Haga clic en el proxy de dispositivos en el árbol del proyecto.
2. Seleccione "Actualizar proxy de dispositivos" en el menú contextual.

156

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE
3. Seleccione el archivo de proyecto.
Se abre el cuadro de diálogo "Actualizar proxy de dispositivos".

Uso de Team Engineering
Manual de programación y manejo, 11/2019

157

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE
4. Seleccione un dispositivo.
Nota
Si ha creado en el proyecto de origen varios objetos de datos de proxy de dispositivos, debe
seleccionar uno de ellos.
Nota
Los proxys de dispositivos ya inicializados no se pueden sobrescribir con datos de control
de otro controlador.
5. Seleccione si desea actualizar las direcciones PROFINET o PROFIBUS.
6. Haga clic en "Aceptar".

5.6.2

Comunicación con proxys de dispositivos

5.6.2.1

Principios básicos sobre la comunicación con proxys de dispositivos

Introducción
El intercambio de datos entre el panel de operador del proyecto de destino y el controlador del
proyecto de origen se lleva a cabo en el TIA Portal mediante proxys de dispositivos. Se
inicializa un proxy de dispositivos con los datos del proxy del proyecto de origen y se conecta
en red el panel de operador con el PLC del proxy en el proyecto de destino.
El panel de operador y los PLC del proxy del dispositivo pueden comunicarse directamente
entre sí a través de una o varias subredes. Para la comunicación a través de varias subredes
debe configurarse un PLC del proxy del dispositivo como un router que conecte el panel de
operador y el PLC de destino.
La comunicación entre interlocutores es posible a través de las siguientes conexiones:
● PROFINET
● PROFIBUS
● MPI

Ajuste de los parámetros de red
En el TIA Portal, el panel de operador y el PLC proxy de dispositivo se conectan en el editor
"Dispositivos y redes".
Después de conectar en red un panel de operador HMI con el PLC proxy de dispositivo, hay
que ajustar las propiedades de los parámetros de red. Los

158

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE
parámetros de red del proyecto de origen se anotan y se introducen en las propiedades de la
conexión de red entre el PLC proxy de dispositivo y el dispositivo HMI.
Nota
IPE no transfiere datos de configuración de redes. Por eso, en el proyecto de destino deben
configurarse manualmente las redes necesarias de modo que la configuración de redes del
proyecto de destino se ajuste a la configuración del proyecto de origen. Especialmente las ID
de subred de los dispositivos del proyecto de destino deben corresponderse entre ellas y con
las ID de los dispositivos del proyecto de origen. En caso contrario, no será posible la
comunicación entre el dispositivo de origen y los dispositivos HMI en runtime.
En función de la conexión se transfieren los siguientes parámetros:
Conexión

Parámetros

Ethernet

ID de la subred S7

MPI
PROFIBUS

ID de la subred S7
Dirección más alta
Velocidad de transferencia
Parámetros del bus

Comunicación a través del routing S7
Para establecer una conexión enrutada entre los interlocutores es preciso interconectar un
router. Debe configurar tanto el router como el PLC de destino como un proxy de dispositivos.
El router y el PLC de destino se pueden inicializar con un archivo IPE, un archivo de proyecto
TIA Portal o un archivo de proyecto STEP 7 V5.5.
Los módulos aptos para la comunicación (CPUs o CPs) que deban crear transiciones entre las
subredes deberán ser "aptos para routing".
La configuración del routing S7 se edita a través de las propiedades correspondientes de la
interfaz.
La conexión de routing S7 se configura en el editor "Dispositivos y redes".

Nota
Para una conexión enrutada con un interlocutor que se ha cargado con los datos del proyecto
de origen, también debe haberse configurado una conexión enrutada en el proyecto de origen.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

159

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE

El sistema determina el encaminamiento de routing en runtime sin que el usuario pueda
modificar este valor. Durante la configuración no se visualiza información sobre una conexión
errónea. Todos los encaminamientos de routing relevantes deben reproducirse en el TIA
Portal tal como estaban configurados en el proyecto de origen STEP 7.

5.6.2.2

Configurar una conexión directa

Introducción
En el proyecto de destino, una conexión directa entre un PLC proxy de dispositivo y un panel
de operador se configura en el editor "Dispositivos y redes".
La configuración siguiente describe una red formada por los siguientes interlocutores:
● Panel de operador HMI
● PLC proxy de dispositivo

Requisitos
● Los datos del proxy del dispositivo se han exportado del proyecto de origen.
● Se ha creado un panel de operador HMI en el proyecto de destino.
● Se ha creado un proxy de dispositivos.

160

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE

Procedimiento
1. Anote la ID de subred de la conexión en el proyecto de origen.
En caso de conexión MPI o PROFIBUS, anote además la dirección más alta, la velocidad
de transferencia y los parámetros del bus.
2.
Inicialice el proxy de dispositivos en el proyecto de destino con los datos del proxy del
proyecto de origen.
3. Conecte las interfaces de comunicación del panel de operador HMI y del PLC proxy de
dispositivo.
La subred S7 correspondiente se crea automáticamente.

4. Transfiera los parámetros anotados del proyecto de origen a los parámetros del proyecto
de TIA:
– La ID de subred S7 se introduce en "Propiedades > General".
– La dirección más alta y la velocidad de transferencia se introducen en "Propiedades >
Ajustes de red".
– Los parámetros del bus se introducen en "Propiedades > Parámetros del bus".

Uso de Team Engineering
Manual de programación y manejo, 11/2019

161

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE

5.6.2.3

Configurar conexión enrutada

Introducción
El panel de operador y los PLC proxy de dispositivos pueden comunicarse entre sí a través de
varias subredes. Para una conexión enrutada, configure un PLC proxy de dispositivo como
router entre el panel de operador y el PLC de destino.
Nota
Para una conexión enrutada con un interlocutor del proyecto de origen es necesario que en el
proyecto de origen también se haya configurado una conexión enrutada.
La configuración siguiente describe una red formada por los siguientes interlocutores:
● Panel de operador HMI
● Proxy de dispositivos PLC como router
● Proxy de dispositivos PLC como PLC de destino
Todas las subredes que intervienen en el routing entre el dispositivo HMI y el PLC de
destino deben estar configuradas en el proyecto de origen. Dichas subredes deben
configurarse de manera idéntica en el proyecto de destino.

Requisitos
● Los datos del proxy del dispositivo se han exportado del proyecto de origen.
● Se ha creado un panel de operador HMI
● Se han agregado dos proxys de dispositivos

162

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE

Procedimiento
1. Anote las ID de subred de las conexiones en el proyecto de origen.
En caso de conexión PROFIBUS, anote además la dirección más alta, la velocidad de
transferencia y los parámetros del bus.
2. Inicialice el proxy de origen en el proyecto de destino con los datos del proxy del proyecto
de origen.
3. Cree la conexión de red entre el panel de operador HMI y el router, y entre el router y el PLC
de destino, tal como estaba configurada en el proyecto de origen.
4. Haga clic en el botón "Conexiones".
5. Conecte las interfaces de comunicación del panel de operador HMI y del router.
El router y el PLC de destino se conectan automáticamente.
6. Establezca la conexión HMI entre el dispositivo HMI y el PLC de destino con la función
Drag&Drop.
Se abre el cuadro de diálogo "Conectar con subred".

Uso de Team Engineering
Manual de programación y manejo, 11/2019

163

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE
7. Seleccione "Agregar conexión enrutada S7".
Se establece la conexión de routing.

8. Transfiera los parámetros anotados del proyecto de origen a los parámetros del proyecto
de TIA:
– La ID de subred S7 se introduce en "Propiedades > General".
– La dirección más alta y la velocidad de transferencia se introducen en "Propiedades >
Ajustes de red".
– Los parámetros del bus se introducen en "Propiedades > Parámetros del bus".

164

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE

Resultado
Consulte la conexión establecida en el editor "Conexiones HMI".

5.6.3

Configuración integrada con WinCC y SIMATIC Manager

5.6.3.1

Principios básicos de la configuración con WinCC y SIMATIC Manager

Configuración integrada con WinCC y SIMATIC Manager
El TIA Portal ofrece la posibilidad de crear programas de PLC y configuraciones HMI utilizando
una interfaz de software unitaria.
En algunos casos, por motivos técnicos o específicos del cliente es necesario seguir creando
el programa del PLC con el software "STEP 7 V5.x" y la configuración HMI con el software
"WinCC (TIA Portal)".
Los PLC de proxy de dispositivo permiten acceder directamente a los controladores
configurados en el SIMATIC Manager y a sus datos actuales e integrarlos en WinCC (TIA
Portal).

Requisitos
● WinCC versión V13 o superior
● SIMATIC Manager STEP 7 versión V5.4 SP3 o superior
● En el SIMATIC Manager deben estar instalados todos los paquetes opcionales de software
necesarios que se utilizan en el proyecto de STEP 7.
● El proyecto del SIMATIC Manager debe ser coherente.

Controladores soportados
● Controlador S7-300
● Controlador S7-300F
● Controlador S7-400

Uso de Team Engineering
Manual de programación y manejo, 11/2019

165

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE
● Controlador S7-400F
● Controlador S7-300 T
● Controlador ET200 (CPU IM 151-x)

Procedimientos de aviso soportados
● Procedimiento de aviso de bit
● Procedimiento de aviso analógico
● Notificar errores de sistema (SFM)
● Alarm_S, Alarm_SQ, Alarm_D, Alarm_DQ

5.6.3.2

Inicialización del proxy de dispositivos mediante archivo de proyecto STEP 7

Introducción
Mediante la inicialización se establece una conexión a una CPU en SIMATIC Manager. Tras
la correcta inicialización, las variables y los avisos que contiene SIMATIC Manager también
están disponibles en el proyecto WinCC.

Inicialización del proxy de dispositivos PLC
1. Inicialice el proxy de dispositivos mediante el archivo de proyecto (*.s7p) de su proyecto
STEP 7.
En el cuadro de diálogo "Inicializar proxy de dispositivos" seleccione la CPU, los bloques de
programa, los símbolos y los avisos de PLC para el proxy de dispositivos.
2. Tras la correcta inicialización, los datos seleccionados se muestran en las carpetas del
programa en el árbol del proyecto.
Nota
En WinCC (TIA Portal) no se procesan los datos. Solo puede accederse a las variables en
lectura. Los cambios en el programa STEP 7 siempre se ejecutan en SIMATIC Manager.
Nota
Soporte de PLC H
La funcionalidad IPE en el TIA Portal también soporta la utilización de PLC H de STEP 7 V5.5
o superior. Al inicializar el proxy de dispositivos solo es relevante el PLC H maestro.

166

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE

Visualización del nombre original del dispositivo de origen
1. Abra la configuración de dispositivos del proxy de dispositivos PLC.
2. Seleccione "Vista de dispositivos".
3. Abra la ventana "Propiedades > General > General > Información del proxy de dispositivo".
El nombre original se muestra en "Fuente de proxy".

Establecimiento de conexión de red entre HMI y PLC
Si utiliza un "PLC estándar", configure una conexión de red entre el panel de operador HMI
utilizado y el proxy de dispositivos PLC.
1. Seleccione "Vista de redes" en la configuración de dispositivos.
2. Seleccione el proxy de dispositivos PLC y en "Propiedades" introduzca las mismas
propiedades de conexión que tiene el programa de PLC en SIMATIC Manager.
3. Conecte en red y entre sí ambos aparatos.
Nota
Conexión de red y direcciones
Independiente de si ha creado una conexión Ethernet o una conexión PROFIBUS, compruebe
las direcciones en cuestión y los parámetros de bus del módulo utilizado y adáptelos en caso
necesario. Si utiliza PROFIBUS, tenga en cuenta la información adicional en Adaptación de
parámetros de red (Página 167).

5.6.3.3

Adaptación de parámetros de red

Introducción
Si ha conectado en red un panel de operador HMI con el proxy de dispositivo PLC, debe
adaptar las propiedades de los parámetros en el proyecto STEP 7 5.x en los siguientes casos:
● Tiene un proyecto STEP 7 V5.x. Los paneles de operador HMI existentes en este proyecto
y creados con WinCC flexible han sido migrados a WinCC (TIA Portal) y conectados en red
con el PLC proxy de dispositivo.
● Tiene un proyecto STEP 7 V5.x. Los paneles de operador HMI solo se han configurado con
WinCC (TIA Portal) y están conectados en red con el PLC proxy de dispositivo.
En función de la conexión se transfieren los siguientes parámetros:
Conexión

Parámetros

Ethernet

ID de la subred S7

MPI
PROFIBUS

ID de la subred S7
Dirección más alta
Velocidad de transferencia
Parámetros del bus

Uso de Team Engineering
Manual de programación y manejo, 11/2019

167

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE
Se anotan los parámetros del proyecto STEP 7 y se introducen en las propiedades de la
conexión de red del TIA Portal.

Adaptación de parámetros de red
1. Abra la configuración hardware de la CPU en el SIMATIC Manager.
2. Abra las propiedades de objeto de la interfaz PROFIBUS de la CPU.
3. En el cuadro de diálogo "Propiedades MPI/DP", seleccione el botón "Propiedades…" en
"General".
Se abre el cuadro de diálogo "Propiedades – Interfaz PROFIBUS".
4. En el cuadro de diálogo "Propiedades – Interfaz PROFIBUS", seleccione el botón
"Propiedades…" en "Parámetros".
Se abre el cuadro de diálogo "Propiedades - PROFIBUS".

168

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE
5. Anote la ID de subred S7.

6. Si adapta la conexión PROFIBUS, anote los parámetros "Dirección más alta" y "Velocidad
de transferencia" del cuadro de diálogo "Ajustes de red".
7. Si adapta la conexión PROFIBUS, seleccione el botón "Parámetros del bus" en "Ajustes de
red" de la ventana "Propiedades - PROFIBUS".
Anote los parámetros del bus allí indicados.
8. En el TIA Portal, seleccione la conexión de red entre el PLC proxy de dispositivo y el panel
de operador HMI en el editor "Dispositivos y redes".

Uso de Team Engineering
Manual de programación y manejo, 11/2019

169

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE
9. Seleccione el perfil "Definido por el usuario" en "Propiedades > General > Ajustes de red".

10.Transfiera los parámetros de la configuración de STEP 7 que ha anotado a los parámetros
del proyecto de TIA:
– La ID de subred S7 se introduce en "Propiedades > General".
– La dirección más alta y la velocidad de transferencia se introducen en "Propiedades >
Ajustes de red".
– Los parámetros del bus se introducen en "Propiedades > Parámetros del bus".

170

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE

Uso de Team Engineering
Manual de programación y manejo, 11/2019

171

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE

5.6.3.4

Comprobación de datos incoherentes

Introducción
Al inicializar un proxy de dispositivos se comprueba automáticamente si los datos
seleccionados del proyecto de origen son coherentes y se pueden aplicar en el proyecto de
destino. Si el proyecto de origen contiene datos incoherentes, repárelos en el proyecto de
origen en el SIMATIC Manager.
En STEP 7 V5.x están disponibles las siguientes herramientas para buscar y corregir datos
incoherentes:
● "Comprobar coherencia de bloques" para comprobar los bloques de datos y los avisos
● "Editor de símbolos" para comprobar los símbolos
Nota
Encontrará más información sobre las herramientas "Comprobar coherencia de bloques" y
"Editor de símbolos" en la documentación de STEP 7 V5.x.

Comprobación de bloques de datos y avisos
1. Abra el proyecto de origen en el SIMATIC Manager S7.
2. Seleccione la carpeta de bloques en la ventana del proyecto.
3. Seleccione la opción "Comprobar coherencia de bloques..." en el menú contextual.
Se abre el editor "Comprobar coherencia de bloques".
4. Seleccione el comando "Programa > Compilar" en el menú.
Las incoherencias de los bloques se corrigen automáticamente y los objetos se compilan.
5. Si alguna incoherencia no se puede corregir automáticamente, aparecerá un aviso de error.
Haciendo doble clic en el aviso de error se va directamente al objeto incorrecto. Corrija la
incoherencia manualmente y, a continuación, guarde el proyecto.

Comprobación de símbolos
1. Abra el proyecto de origen en el SIMATIC Manager S7.
2. Inicie el editor de símbolos haciendo doble clic en la tabla de símbolos.
El editor de símbolos se abre.
3. Los símbolos globales no válidos de la tabla están marcados en rojo.
4. Repare o borre los símbolos no válidos.

172

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE

5.6.3.5

Adaptación de variables y conexiones

Introducción
Para establecer la conexión tras la migración, adapte el nombre de conexión y sincronice las
variables.
Al conectar en red los paneles de operador HMI con el proxy de dispositivos PLC, el sistema
establece una conexión y asigna un nombre de conexión. Si ya hay una conexión HMI, adapte
el nuevo nombre de conexión.

Adaptación de nombres de conexión
1. Copie los anteriores nombres de conexión.
2. Borre la conexión existente.
3. Sustituya el nombre anterior por el nombre de conexión nuevo.

Conexión simbólica de las variables
1. Acceda al editor de variables.
2. Seleccione todas las variables.
3. Haga clic en "Sincronización con la variable PLC".
Se abre la ventana contextual "Opciones para la sincronización de variables WinCC".
4. En la ventana seleccione las opciones "Coincide el tipo de archivo y la dirección absoluta"
y "Sustituir nombres de variables WinCC por el nombre de variable PLC".
5. Haga clic en el botón "Sincronizar".
La sincronización de las variables se ejecuta.

5.6.3.6

Actualización del proxy de dispositivos mediante archivo de proyecto STEP 7

Introducción
Los datos del PLC proxy de dispositivo deben actualizarse siempre que en el SIMATIC
Manager se hayan realizado cambios que afecten al panel de operador HMI. Es el caso,
por ejemplo, cuando se han modificado o ampliado áreas de direcciones en los bloques de
datos.

Actualización de datos del proxy de dispositivos
1. Actualice los datos del proxy de dispositivos mediante el archivo de proyecto (*.s7p) de su
proyecto STEP 7.
2. En el diálogo de actualizaciones, seleccione como origen de los datos la misma CPU que
haya utilizado en la inicialización del PLC proxy de dispositivo.
No está permitida la actualización con otra configuración hardware.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

173

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE
3. En el cuadro de diálogo puede seleccionar también nuevos bloques de datos creados
desde el SIMATIC Manager.
En el proyecto de TIA Portal solo se adoptan los objetos seleccionados.
Nota
Todos los datos que se hayan seleccionado en la inicialización anterior se vuelven a
seleccionar automáticamente. Solo debe cambiar este ajuste predeterminado si desea
eliminar deliberadamente datos del PLC proxy de dispositivo. Si, por ejemplo, se ha
integrado el DB1 en el proyecto de TIA Portal mediante la inicialización y ahora desactiva
el DB1, al actualizar los datos se borrará el DB1 del proyecto de TIA Portal.
4. Confirme la selección con el botón "Aceptar".
Se inicia la actualización de las variables.
5. A través de la conexión simbólica de las variables, las direcciones de las variables se
adaptan automáticamente.
De esta forma finaliza la actualización de las variables.

5.6.3.7

Integración de variables del SIMATIC Manager

Introducción
Con la inicialización del PLC proxy de dispositivo habrá integrado las variables del SIMATIC
Manager en el proyecto WinCC.
En WinCC puede insertar variables del PLC proxy de dispositivo directamente en una imagen
HMI o en un objeto de imagen.

Inserción de una variable en la configuración HMI
1. En el árbol del proyecto, abra la carpeta que contiene los bloques de programa del proxy de
dispositivos PLC.
2. Seleccione el bloque que contiene las variables.
3. En la vista detallada se muestran todas las variables del bloque seleccionado.
4. Con la función de Drag&Drop arrastre una variable desde la vista detallada hasta el área de
trabajo.
Se crea un campo E/S con la variable seleccionada. En la ventana de inspección se
realizan otros ajustes.
También puede configurar un campo E/S en una imagen HMI y arrastrar la variable con la
función de Drag&Drop al campo E/S.

Resultado
La variable de un bloque del proxy de dispositivos PLC se agrega al proyecto HMI y se conecta
con el campo E/S.

174

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE

5.6.3.8

Configuración de la función de sistema "Teclas directas"

Introducción
Si desea integrar en la configuración de hardware del SIMATIC Manager paneles de operador
HMI que solo se puedan configurar con WinCC (TIA Portal), p. ej. SIMATIC HMI Comfort
Panels, necesita archivos GSD/GSDML adecuados.
Encontrará los archivos GSD/GSDM necesarios para WinCC en FAQ sobre la configuración
general con WinCC (TIA Portal) y STEP 7 V5.x (http://support.automation.siemens.com/WW/
llisapi.dll?aktprim=4&lang=es&referer=%2fWW
%2f&func=cslib.csinfo&siteid=csius&groupid=4000002&extranet=standard&viewreg=WW&n
odeid4=20229806&objaction=csopen)

Instalación de archivos GSD
1. Abra la configuración de hardware en el SIMATIC Manager.
2. Elija el comando de menú "Herramientas > Instalar archivos GSD".
Se abre el cuadro de diálogo "Instalar archivos GSD".
3. Con el botón "Examinar" seleccione la carpeta que contiene los archivos GSD.
Nota
Rutas de almacenamiento de PROFINET/PROFIBUS en el SIMATIC Manager
Encontrará los archivos GSDML para los paneles de operador HMI en el catálogo de
hardware, en „PROFINET IO > HMI > SIMATIC HMI > GSD > KP/x“.
Encontrará los archivos GSD para los paneles de operador HMI en el catálogo de
hardware, en „PROFIBUS DP > Weitere FELDGERÄTE > MMI > SIMATIC_HMI > HMI
CP_x“.
4. Seleccione todos los archivos y haga clic en el botón "Instalar".

Conexión PROFINET: teclas directas PROFINET IO
1. Anote las propiedades utilizadas del panel de operador que va a ser reemplazado.
Tenga en cuenta especialmente las direcciones E/S, los nombres de dispositivo, los
números de dispositivo y las direcciones de diagnóstico si dichos datos van a evaluarse.
2. Elimine el archivo GSD existente.
3. Con la función de Drag&Drop, arrastre el tipo de panel de operador configurado del
catálogo de hardware hasta el bus PROFINET IO visualizado.
4. Utilice los datos anotados para adaptar las propiedades.
Nota
Para el nombre del dispositivo observe las reglas al respecto para dispositivos PROFINET
IO. En el nombre del dispositivo utilice solo minúsculas y ningún carácter especial.
5. Confirme las entradas con Aceptar.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

175

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE
6. Guarde y compile la configuración, y transfiera la configuración de hardware al controlador.

7. Abra la configuración del dispositivo del TP1200 Comfort y cambie a la "Vista de
dispositivos".
8. Introduzca el nombre de dispositivo PROFINET en las propiedades del panel de operador
configurado en WinCC en "Propiedades > General > Interfaz PROFINET (X1) >
Direcciones Ethernet".
Para asignar el nombre de dispositivo PROFINET, desactive la opción "Generar
automáticamente el nombre del dispositivo PROFINET".
Nota
El nombre PROFINET de la configuración de WinCC debe coincidir con el nombre
PROFINET guardado en SIMATIC Manager.

176

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE

Conexión PROFIBUS: teclas directas PROFIBUS DP
Tenga en cuenta que las teclas directas se configuran en SIMATIC Manager.
Nota
Si se configuran teclas directas de un panel a varias CPU, las teclas directas funcionan solo en
una CPU.
Las otras CPU muestran un fallo en bus/agrupado.
1. Anote las propiedades utilizadas del panel de operador que va a ser reemplazado.
Tenga en cuenta especialmente las direcciones E/S, los nombres de dispositivo y las
direcciones de diagnóstico si dichos datos van a evaluarse.
2. Elimine el archivo GSD existente.
3. Arrastre el módulo GSD en el que se encuentra el panel de operador configurado desde el
catálogo de hardware hasta el bus PROFIBUS DP visualizado.
4. Utilice los datos anotados para adaptar las propiedades de dirección E/S, nombre de
dispositivo, dirección PROFIBUS y dirección de diagnóstico.
5. Confirme las entradas con Aceptar.
6. Guarde y compile la configuración, y transfiera la configuración de hardware al controlador.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

177

Intercambio de datos con Inter Project Engineering (IPE)
5.6 Uso de datos de control de otros proyectos con IPE
7. Abra la configuración de dispositivo del panel de operador que utiliza y cambie a la "Vista
de dispositivos".
8. Conecte en red la interfaz PROFIBUS en las propiedades del panel de operador
configurado en "Propiedades > General > Interfaz MPI/DP X2 > Dirección PROFIBUS >
Conectar interfaz con".
9. Especifique en "Parámetros" la dirección PROFIBUS.
Nota
La dirección PROFIBUS de la configuración de WinCC debe coincidir con la dirección
PROFIBUS guardada en SIMATIC Manager.

178

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Exclusive Engineering
6.1

6

Introducción a Exclusive Engineering

Introducción
A partir de la versión V16 de TIA Portal existe la posibilidad de trabajar con Exclusive
Engineering .
La ventaja de trabajar con Exclusive Engineering es que el usuario trabaja en una sesión local
exclusiva y que el servidor de proyectos de TIA Portal se convierte en el gestor de datos central
de los proyectos.
Los proyectos pueden editarse individualmente (con todas las ventajas que ofrece el servidor
de proyectos de TIA Portal) o bien conjuntamente en equipo.
El proyecto de servidor está reservado exclusivamente para usted y bloqueado para otros
usuarios mientras trabaja en su sesión local exclusiva.
Cada vez que se transfieren los cambios al proyecto de servidor, se genera una nueva revisión
de dicho proyecto. En caso necesario, se puede retroceder a las diferentes revisiones y
restaurar así un estado de trabajo anterior. De ese modo se dispone en todo momento del
historial del proyecto.
Para la administración del proyecto de servidor se utiliza el servidor de proyectos TIA o el
servidor de proyectos local.
El proyecto de servidor de la sesión exclusiva está reservado exclusivamente para usted y
bloqueado para el acceso de escritura de otros usuarios mientras
trabaja en la sesión local exclusiva.
Cuando se completa la edición en la sesión local exclusiva y se deshabilita el bloqueo para el
servidor de proyectos, la sesión local exclusiva también se borra. Todos los cambios ya están
guardados en el proyecto de servidor y en las diferentes revisiones del mismo y el proyecto
está disponible para seguir editándolo.

Funcionalidad de Exclusive Engineering
Exclusive Engineering funciona del siguiente modo en TIA Portal:
1. La administración de proyectos está ubicada en el servidor de proyectos TIA local o externo.
2. El usuario trabaja en la sesión local exclusiva que ha creado personalmente y que está
asignada a un proyecto de servidor concreto.
3. Los cambios realizados en la sesión local exclusiva se transfieren al proyecto de servidor.
4. El servidor está bloqueado para otros usuarios mientras trabaja en la sesión local exclusiva.
En el momento en el que se elimina el bloqueo del servidor, este vuelve a estar disponible
para otros usuario y la sesión local exclusiva se borra.
5. Una vez que los datos se han transferido al proyecto de servidor, para el historial del
proyecto se genera automáticamente una revisión a la que también se puede retroceder.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

179

Uso de Exclusive Engineering
6.2 Descripción general del trabajo con Exclusive Engineering
6. Tras finalizar la edición y transferir todos los cambios al proyecto de servidor, este puede
cargarse en la CPU y continuar editándose de la forma acostumbrada.
7. Una vez finalizado el trabajo en la sesión local exclusiva, se puede deshabilitar el bloqueo
para el servidor de proyectos. Al mismo tiempo se borra la sesión local exclusiva. Los
cambios están contenidos en el proyecto de servidor.

Trabajo paralelo con Exclusive Engineering y Multiuser Engineering
También existe la posibilidad de trabajar paralelamente en sesiones exclusivas con Exclusive
Engineering y en sesiones locales con Multiuser Engineering.
Esta forma de trabajar conlleva algunas ventajas y un buen ahorro de tiempo, puesto que
permite editar al mismo tiempo determinadas tareas de automatización en equipo y,
paralelamente, también como usuario individual con derechos exclusivos en el servidor.

Nota
Trabajar de forma eficiente con Exclusive Engineering y Multiuser Engineering
Cuando se trabaja en sesiones locales, es importante eliminar los errores a tiempo para que
el trabajo en el proyecto de servidor sea eficiente.

Trabajar con el servidor de proyectos TIA
En el capítulo "Trabajar con el servidor de proyectos TIA" encontrará toda la información
necesaria para trabajar con el servidor de proyectos.
Consulte también:
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT
AUTOHOTSPOT

6.2

Descripción general del trabajo con Exclusive Engineering

Introducción
A continuación se ofrece una descripción general del trabajo con Exclusive Engineering.

180

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Exclusive Engineering
6.2 Descripción general del trabajo con Exclusive Engineering

Reglas para trabajar con Exclusive Engineering
Para trabajar con Exclusive Engineering rigen las reglas siguientes:
● Se empieza con un proyecto vacío o ya rellenado y se carga en el servidor de proyectos TIA
o en el servidor de proyectos TIA local.
● A continuación se crea una sesión exclusiva en la que se editan los objetos.
● En cuanto se abre un objeto para editarlo, en la primera columna del árbol del proyecto
aparece una banderita azul.
● Si ya hay un proyecto abierto en otra sesión local por otro usuario, aparece una banderita
amarilla.
● Si se abren objetos idénticos en sesiones distintas, se marcan con una banderita roja. En
este caso, uno de los usuarios debe cerrar el objeto para que no se produzcan cambios
concurrentes en la edición, que se sobrescriban mutuamente.
● Todos los cambios, incluso los cambios en la configuración hardware o en objetos no
compatibles con Multiuser Engineering, pueden realizarse en la sesión local.
● Mientras trabaja en la sesión local exclusiva, el servidor queda bloqueado para otros
usuarios. No se habilitará de nuevo hasta que finalice la sesión exclusiva y elimine el
bloqueo del servidor.

Descripción general del trabajo con Exclusive Engineering
Para utilizar la funcionalidad de Exclusive Engineering, proceda del siguiente modo:
Acción

Ejemplo

1. Crear un proyecto de servidor en el servidor de proyectos TIA

7,$

6HUYLGRUGHSUR\HFWRV

Instale un servidor de proyectos y cargue un proyecto de usua‐
rio único vacío o ya rellenado en el servidor de proyectos utili‐
zado.
Resultado:
Al cargar el proyecto de usuario único en el servidor de proyec‐
tos, este se convierte en un proyecto de servidor.

)%

)%

)&

)&

3UR\HFWRGHXVXDULR¼QLFR

Uso de Team Engineering
Manual de programación y manejo, 11/2019

&UHDUSUR\HFWRGHVHUYLGRU

181

Uso de Exclusive Engineering
6.2 Descripción general del trabajo con Exclusive Engineering
Acción

Ejemplo

2. Crear una sesión local exclusiva

7,$

6HUYLGRUGHSUR\HFWRV

Una "sesión local exclusiva" se crea en el equipo propio como
copia del proyecto de servidor.
● En la sesión local exclusiva se editan los objetos deseados.

3UR\HFWRGHVHUYLGRU

Resultado:
El programa se edita hasta que se alcanza un estado determi‐
nado y se desea incorporar los cambios al proyecto de servidor.
)%
)&
6HVLµQORFDOH[FOXVLYD

3. Aplicar los cambios
Cuando la edición en la sesión local exclusiva alcanza un de‐
terminado estado, los cambios se transfieren al proyecto de
servidor.
● Al aplicar los cambios de la sesión local exclusiva, estos se
transfieren al proyecto de servidor.

7,$
)%
$SOLFDUFDPELRV

● Después de cada check in se crea una nueva revisión del
proyecto de servidor.
● Existe la posibilidad de documentar el progreso del proyecto
a través de los comentarios introducidos.
Resultado:
Los cambios se transfieren al proyecto de servidor.

6HUYLGRUGHSUR\HFWRV

3UR\HFWRGHVHUYLGRU

6HJHQHUDXQDQXHYDUHYLVLµQ

)%
)&
6HVLµQORFDOH[FOXVLYD

Se genera una nueva revisión del proyecto de servidor.

182

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Exclusive Engineering
6.3 Requisitos para trabajar con Exclusive Engineering
Acción

Ejemplo

4. La edición ha finalizado

7,$

La edición de las diferentes tareas de configuración en la sesión
local exclusiva ha terminado.
Ha transferido todas las modificaciones al proyecto de servidor
y ha activado la opción Finalizar Exclusive Engineering" en el
cuadro de diálogo "Aplicar cambios".

6HUYLGRUGHSUR\HFWRV
3UR\HFWRGHVHUYLGRU

(GLFLµQILQDOL]DGD

Resultado:
La sesión local exclusiva y el proyecto de servidor están sincro‐
nizados.

)%

La finalización de Exclusive Engineering elimina el bloqueo del
servidor y borra la sesión local exclusiva.

)&
)LQDOL]DUVHVLµQORFDOH[FOXVLYD!5HWLUDUEORTXHRGHVHUYLGRU


\ERUUDUVHVLµQORFDOH[FOXVLYD

6.3

Requisitos para trabajar con Exclusive Engineering

Requisitos del sistema
Para trabajar con Exclusive Engineering se aplican los mismos requisitos de hardware y
software que para trabajar con TIA Portal.
Infórmese de las disposiciones válidas para los productos que tenga instalados en
"Instalación" > "Requisitos del sistema para la instalación".
Nota
Instalación de software idéntica como requisito para trabajar con Exclusive Engineering
Para poder trabajar sin limitaciones con Exclusive Engineering, es importante que en todos los
sistemas de ingeniería utilizados estén instalados los mismos productos de software de TIA
Portal con versiones idénticas.
Nota
Acceso al servidor de proyectos
Los usuarios solo obtienen acceso al servidor de proyectos si no están registrados en el grupo
de administradores local del servidor de proyectos.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

183

Uso de Exclusive Engineering
6.3 Requisitos para trabajar con Exclusive Engineering
Nota
Acceso al proyecto de servidor
Los usuarios solo obtienen acceso al proyecto de servidor si están registrados por lo menos
como "Member" en la administración de usuarios del servidor de proyectos.

Servidor de proyectos TIA
Para poder trabajar con toda la funcionalidad de Exclusive Engineering es necesario tener
instalado un servidor de proyectos.
Para la instalación, configuración y administración del servidor de proyectos se requieren en
parte derechos de administrador.
Encontrará información sobre la compatibilidad del servidor de proyectos en:AUTOHOTSPOT
El servidor de proyectos se configura y administra utilizando las herramientas suministradas.
Para ello se dispone de dos procedimientos alternativos:
● Uso de la interfaz de usuario gráfica
● Uso de las "Administrative Tools" y "Power Tools" que se ejecutan con la línea de
comandos.
El servidor de proyectos puede configurarse y administrarse tanto con una cómoda interfaz de
usuario como con los comandos de la línea de comandos. Ambos procedimientos llevan a un
resultado idéntico.
Encontrará una descripción detallada del procedimiento en "AUTOHOTSPOT" y en
"AUTOHOTSPOT".

Perfiles de red para el servidor de proyectos
Existe la posibilidad de ajustar la capacidad deseada para el perfil de red utilizado en la
configuración de TIA Portal.
Para ello, seleccione en TIA Portal el perfil deseado en la lista desplegable que aparece en
"Opciones" > "Configuración" > "Servidor de proyectos" > "Perfiles de red de servidor".
Encontrará una descripción detallada de los perfiles de red en AUTOHOTSPOT

Licencias de Exclusive Engineering
Para trabajar con Exclusive Engineering no se requiere ninguna licencia adicional.

Archivar y desarchivar proyectos
Las sesiones locales no pueden archivarse ni desarchivarse.
El archivado o desarchivado de proyectos de servidor genera sesiones locales no válidas,
pues con estas acciones se interrumpe la conexión con el servidor de proyectos.

184

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Exclusive Engineering
6.4 Símbolos y marcas de la interfaz de usuario

Abrir una sesión local como proyecto de referencia
Al trabajar con Exclusive Engineering se puede abrir una sesión guardada localmente como
proyecto de referencia.
Encontrará más información sobre cómo trabajar con proyectos de referencia en:
AUTOHOTSPOT

Longitud de los nombres de ruta y archivo en Exclusive Engineering
Al trabajar con Exclusive Engineering, si los nombres de ruta y archivo tienen más de 259
caracteres en total, se muestra un mensaje de error. En él se señala que los nombres utilizados
son demasiado largos y que por este motivo no es posible llevar a cabo la acción deseada. En
este caso deben acortarse los nombres de ruta y/o archivo para poder realizar la acción
deseada.

6.4

Símbolos y marcas de la interfaz de usuario

6.4.1

Símbolos de la interfaz de usuario

Introducción
Cuando se trabaja con Exclusive Engineering y se abre una sesión local, aparecen los
siguientes símbolos en la interfaz de usuario de TIA Portal.

Símbolos de la barra de herramientas
La interfaz de usuario de Exclusive Engineering muestra los símbolos siguientes en la barra de
herramientas cuando hay una sesión local abierta:

Símbolo

Significado
Aplicar cambios
Al hacer clic en este símbolo, los cambios realizados en la sesión local exclusiva se aplican al proyecto de
servidor correspondiente.
Estado del servidor "bloqueado para otros usuarios"
Este símbolo indica que el servidor de proyectos correspondiente se muestra "bloqueado" para otros
usuarios, ya que está siendo utilizado en una sesión exclusiva.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

185

Uso de Exclusive Engineering
6.4 Símbolos y marcas de la interfaz de usuario
Símbolo

Significado
Estado del servidor "bloqueado"
Este símbolo indica que el servidor de proyectos correspondiente está siendo utilizado por un usuario y
por este motivo está bloqueado. Si coloca el puntero del ratón sobre este símbolo, obtendrá información
adicional sobre el bloqueo.
Estado del servidor "no conectado"
Este símbolo indica que el servidor de proyectos correspondiente no está conectado.
Estado del servidor "Trabajar offline"
Este símbolo indica que no hay ninguna conexión con el servidor de proyectos porque la función "Trabajar
offline" está activada.
Desactive la casilla de verificación en "Proyecto > Servidor de proyectos > Trabajar offline" para resta‐
blecer la conexión con el servidor de proyectos.

Símbolos para la visualización de proyectos de servidor
Los símbolos siguientes se muestran para proyectos de servidor y sesiones locales exclusivas
en la interfaz de usuario:
Símbolo

Significado
Servidor de proyectos
Este símbolo identifica un servidor de proyectos al trabajar con Exclusive Engenineering.
Proyecto de servidor
Este símbolo identifica a un proyecto de servidor que forma parte de un servidor de proyectos.
Sesión local exclusiva
Este símbolo identifica una sesión local exclusiva.

Símbolos de marcas en Exclusive Engineering
En Exclusive Engineering se utilizan los siguientes símbolos para las marcas:
Símbolo

Significado
Objeto marcable
El objeto puede marcarse para el check-in haciendo clic en él.
Objeto marcado
El objeto se ha marcado para el check-in en la sesión exclusiva propia.
Objeto marcado
El objeto ha sido marcado para el check-in en otra sesión local o en la vista del proyecto
de servidor.

186

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Exclusive Engineering
6.4 Símbolos y marcas de la interfaz de usuario
Símbolo

Significado
Objeto marcado con conflicto
El objeto se ha marcado para el check-in en varias sesiones locales o en una sesión
local y en la vista del proyectos de servidor y provoca un conflicto.
Un objeto solo deberá marcarse una vez para el check-in en todo el área de trabajo
multiusuario.
De todas formas, es posible realizar el check-in de un objeto marcado en rojo. No
obstante, el check-in puede dar lugar a sobrescrituras no deseadas en el proyecto de
servidor, ya que solo se aplicará a dicho proyecto el último estado para el que se ha
realizado el check-in.
Objeto obsoleto
Si uno de los símbolos anteriores se marca adicionalmente con esta superposición,
significa que el objeto ya no se corresponde con el último estado del proyecto de ser‐
vidor y debe actualizarse.
Si se realiza el check-in del objeto sin actualizar, se sobrescribirá la edición del otro
usuario, es decir, se deshará.
La actualización garantiza que todos los usuarios de un proyecto multiusuario tengan
un estado coherente.

6.4.2

Marcas en la interfaz de usuario

Introducción
Cuando se trabaja con Exclusive Engineering , en la interfaz de usuario de TIA Portal se
muestran símbolos específicos de la función multiusuario, que facilitan el trabajo simultáneo
de varios usuarios. Con una visualización clara y específica del usuario se pretende conseguir
que la colaboración dentro de proyectos de servidor y en las sesiones locales y exclusivas sea
más efectiva y transparente.

Marcar objetos
Para poder editar un objeto en el marco de Exclusive Engineering, primero debe "marcarse".
Solo los objetos seleccionados para la edición pueden volver a transferirse al proyecto de
servidor una vez editados.
Las marcas solo pueden agregarse a "objetos marcables". Los objetos que no pueden editarse
en la sesión local exclusiva tampoco se marcan.
Estos objetos pueden editarse sin embargo en la vista del proyecto de servidor.
Los símbolos descritos a continuación indican los objetos que han marcado el propio usuario
y también otros usuarios.
Los objetos pueden marcarse manualmente haciendo clic en la banderita gris situada delante
del objeto en cuestión, o bien automáticamente. Si un objeto que todavía no se ha marcado
manualmente se abre en un editor en una sesión local exclusiva, se marca automáticamente
con la función "Marcar automáticamente".

Uso de Team Engineering
Manual de programación y manejo, 11/2019

187

Uso de Exclusive Engineering
6.4 Símbolos y marcas de la interfaz de usuario

Símbolos de marcas en Exclusive Engineering
En Exclusive Engineering se utilizan los siguientes símbolos para las marcas:

Símbolo

Significado
Objeto marcable
El objeto puede marcarse para el check-in haciendo clic en él.
Objeto marcado
El objeto se ha marcado para el check-in en la sesión exclusiva propia.
Objeto marcado
El objeto ha sido marcado para el check-in en otra sesión local o en la vista de proyectos
del servidor.
Objeto marcado con conflicto
El objeto se ha marcado para el check-in en varias sesiones locales o en una sesión
local y en la vista de proyectos del servidor y provoca un conflicto.
Un objeto solo deberá marcarse una vez para el check-in en todo el área de trabajo
multiusuario.
De todas formas, es posible realizar el check-in de un objeto marcado en rojo. No
obstante, el check-in puede dar lugar a sobrescrituras no deseadas en el proyecto de
servidor ya que solo se aplicará a dicho proyecto el último estado para el que se ha
realizado el check-in.
Objeto obsoleto
Si uno de los símbolos anteriores se marca adicionalmente con esta superposición,
significa que el objeto ya no se corresponde con el último estado del proyecto de ser‐
vidor y debe actualizarse.
Si se realiza el check-in del objeto sin actualizar, se sobrescribirá la edición del otro
usuario, es decir, se deshará.
La actualización garantiza que todos los usuarios de un proyecto de servidor tengan un
estado coherente.

Nota
Objetos sin banderita
Tenga en cuenta que los objetos sin banderita no pueden editarse en la sesión local exclusiva,
sino solo en la vista del proyecto de servidor.

Visualización de marcas multiusuario en TIA Portal
Cuando se trabaja con Multiuser Engineering en la sesión local o en el proyecto de servidor,
las marcas específicas de la función multiusuario aparecen en las siguientes vistas de todos
los editores de TIA Portal:
● En el árbol del proyecto
● En la vista detallada
● En la ventana general, bajo "Detalles"
● En las vistas de librerías

188

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Exclusive Engineering
6.5 Crear y administrar proyectos de servidor
En todas las representaciones de tablas del árbol del proyecto hay una primera columna
adicional cuando se trabaja con Exclusive Engineering. Esta primera columna de la tabla está
reservada para las marcas específicas de la función multiusuario que se han descrito
anteriormente.
El gráfico siguiente muestra a modo de ejemplo varios objetos seleccionados en el árbol del
proyecto:

6.5

Crear y administrar proyectos de servidor

6.5.1

Introducción al trabajo con proyectos de servidor

Introducción
Una vez que el servidor de proyectos está instalado y se ha configurado e iniciado con las
Power Tools, es posible gestionar los proyectos de servidor en TIA Portal.

Gestionar proyectos de servidor
Cuando se ejecuta el comando "Proyecto > Servidor de proyectos > Gestionar proyectos de
servidor", se muestran en el cuadro de diálogo que se abre todos los proyectos de servidor y
sesiones locales existentes para las conexiones de servidor presentes.
Si todavía no se han agregado proyectos de servidor, la lista estará vacía.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

189

Uso de Exclusive Engineering
6.5 Crear y administrar proyectos de servidor
Si ya hay proyectos de servidor, se muestran en la lista. En la lista desplegable situada en la
parte superior del cuadro de diálogo puede seleccionarse la conexión de servidor cuyos
proyectos de servidor y sesiones locales existentes se listarán.
Los diferentes botones permiten realizar las siguientes acciones:
● "Seleccionar servidor": agrega una nueva conexión de servidor.
● "Actualizar": actualiza la visualización en el cuadro de diálogo.
● "Gestionar proyectos de servidor": Abre el visor de proyectos de servidor en la
configuración.
● "Agregar proyecto al servidor": Abre el cuadro de diálogo y agrega un proyecto de servidor
nuevo a la conexión de servidor seleccionada.
Existen las opciones siguientes:
– Agregar proyecto nuevo
– Agregar proyecto existente
– Si se desea, en el campo "Nombre del proyecto de servidor" se puede introducir un
nombre nuevo para el proyecto de servidor.
● "Crear una sesión local": crea una sesión local nueva para el proyecto de servidor
seleccionado.
● "Cancelar": cancela la acción y cierra el cuadro de diálogo.
● "Agregar": agrega la sesión local seleccionada.
Nota
Visualizar proyectos de servidor
Solo es posible visualizar proyectos de servidor si existe una conexión con el servidor de
proyectos y este está iniciado.
Si no se ha podido establecer la conexión, se mostrará una indicación al respecto.

Nota
Borrar proyectos de servidor
Para evitar incoherencias en la administración de proyectos, no está permitido borrar
manualmente proyectos de servidor en el directorio de almacenamiento utilizando el Explorer.
Los proyectos de servidor deben borrarse siempre utilizando las Power Tools.
Antes de borrar un proyecto de servidor deben haberse borrado previamente todas sus
sesiones locales.

190

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Exclusive Engineering
6.5 Crear y administrar proyectos de servidor

Comandos del menú contextual
Las acciones siguientes pueden ejecutarse mediante el menú contextual en el cuadro de
diálogo "Gestionar proyectos de servidor":
● Agregar un proyecto al servidor de proyectos.
● Crear una sesión local.
● Borrar una sesión local.
● Exportar una sesión local como proyecto de usuario único.
● Archivar una sesión local.

6.5.2

Crear un proyecto de servidor nuevo

Introducción
Cuando se trabaja con el servidor de proyectos, primero hay que crear un proyecto de servidor.
Un proyecto de servidor se genera agregando un proyecto estándar (proyecto de usuario
único) al servidor de proyectos instalado con el fin de utilizar dicho proyecto como proyecto de
servidor.

Requisitos
TIA Portal y un servidor de proyectos están instalados.

Procedimiento
Para crear un proyecto de servidor, haga lo siguiente:
1. En TIA Portal haga clic en el comando de menú "Proyecto > Servidor de proyectos >
Gestionar proyectos de servidor".
2. En el cuadro de diálogo que se abre, haga doble clic en el botón "Agregar proyecto al
servidor".
3. Seleccione el proyecto que desea agregar como proyecto de servidor:
– Para agregar un proyecto nuevo, haga clic en el botón "Agregar nuevo proyecto".
– Para agregar un proyecto ya existente, haga clic en el botón "Agregar proyecto
existente".
4. En caso necesario, indique la ruta de origen deseada hacia el proyecto de usuario único o
navegue hasta el directorio deseado mediante el botón "...".
5. Seleccione el proyecto que desea agregar como proyecto de servidor.
6. Introduzca un comentario sobre el proyecto de servidor en "Detalles".
La información que aparece en "Nombre del proyecto" y "Publicado por" está siempre
preasignada y no puede editarse.
El nombre que se muestra para el proyecto de servidor sí puede editarse.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

191

Uso de Exclusive Engineering
6.6 Crear y editar una sesión local exclusiva
7. Active el botón "Crear sesión local" si desea crear una sesión local para el proyecto de
servidor agregado.
8. Haga clic en el botón "Agregar".
Si el proyecto seleccionado ya existe como proyecto de servidor o lo tiene abierto otro
usuario, se recibe una información al respecto.

Resultado
El proyecto de usuario único seleccionado se agrega como nuevo proyecto de servidor y se
muestra en "Proyecto > Servidor de proyectos > Gestionar proyectos de servidor".
Si la opción "Crear sesión local" estaba activada, se crea y abre una sesión local nueva.

6.5.3

Borrar un proyecto de servidor

Introducción
Una vez que el servidor de proyectos está instalado y se ha configurado e iniciado con las
Power Tools, es posible gestionar los proyectos de servidor en TIA Portal.
Las conexiones de servidor se pueden borrar en TIA Portal con el comando "Borrar" en
"Opciones > Configuración > Servidor de proyectos".
Los proyectos de servidor solo pueden borrarse con las Power Tools.

Borrar un proyecto de servidor en el servidor de proyectos
Para borrar un proyecto del servidor de proyectos, haga lo siguiente:
1. Abra las Power Tools como interfaz de usuario o utilice en la línea de comandos los
comandos disponibles para borrar un proyecto de servidor.
Consulte al respecto: AUTOHOTSPOT

6.6

Crear y editar una sesión local exclusiva

6.6.1

Crear una sesión local exclusiva

Introducción
Para poder trabajar con Exclusive Engineering hay que crear una sesión local exclusiva. La
sesión local exclusiva está asignada siempre a un proyecto de servidor específico.

Requisitos
TIA Portal y un servidor de proyectos TIA están instalados.

192

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Exclusive Engineering
6.6 Crear y editar una sesión local exclusiva
Ha creado un proyecto de servidor.

Procedimiento
Para crear una sesión local exclusiva, proceda del siguiente modo:
1. En TIA Portal, elija el comando "Proyecto > Servidor de proyectos > Gestionar proyectos de
servidor".
Se abre el cuadro de diálogo "Gestionar proyectos de servidor".
Se muestra automáticamente el último proyecto de servidor utilizado.
2. En el cuadro de diálogo "Gestionar proyectos de servidor" haga clic en el botón "Crear
sesión local".
Se abre el cuadro de diálogo "Crear sesión local".
Nota
Tenga en cuenta que el autor de la sesión local ya está introducido de forma estándar y no
puede editarse.
3. Elija el tipo de sesión local que desea crear.
– Seleccione Multiuser Engineering si desea trabajar en paralelo con varios usuarios.
– Seleccione Exclusive Engineering si desea trabajar en exclusiva en la sesión local.
4. Haga clic en "Crear" para crear la sesión local seleccionada.
5. Se abre el cuadro de diálogo "Gestionar proyectos de servidor", que muestra la sesión local
creada debajo del proyecto de servidor seleccionado.

Resultado
La sesión local seleccionada se crea y se muestra en el cuadro de diálogo "Gestionar
proyectos de servidor".

6.6.2

Abrir una sesión local exclusiva

Introducción
Hay varias formas distintas de abrir una sesión local:
● En TIA Portal, desde "Últimos proyectos utilizados".
● En TIA Portal mediante el comando "Proyectos > Servidor de proyectos > Gestionar
proyectos de servidor".
● Con TIA Portal cerrado desde el proyecto del explorador de Windows
Cuando se abre una sesión local asignada al servidor de proyectos local, se pregunta si se
desea iniciar el servidor de proyectos local, si no se ha hecho ya. Haga clic en "Sí" para iniciar
el servidor de proyectos local y abrir la sesión local seleccionada.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

193

Uso de Exclusive Engineering
6.6 Crear y editar una sesión local exclusiva

Nota
Abrir sesiones locales:
● No es posible abrir sesiones locales cuyo nombre se haya modificado o que se hayan
borrado.
● Una sesión guardada localmente también puede abrirse como proyecto de referencia.
Si no es posible abrir una sesión local, aparece un mensaje indicándole que no se puede abrir.
Seguidamente se le preguntará si quiere exportar esta sesión local como proyecto de un solo
usuario.

Requisitos
TIA Portal y un servidor de proyectos están instalados.
Se ha creado un proyecto de servidor ejecutable y una sesión local válida.

Abrir una sesión local
Para abrir una sesión local que se haya utilizado últimamente, haga lo siguiente:
1. En TIA Portal, elija el comando "Proyecto > Abrir".
Aparece el cuadro de diálogo "Abrir proyecto", con una lista de los proyectos y sesiones
utilizados recientemente.
Los símbolos mostrados en la primera columna sirven para distinguir entre proyectos de
usuario único y proyectos multiusuario.
2. Seleccione la sesión local deseada y haga clic en el botón "Abrir".

Resultado
La sesión local seleccionada se abre.

Abrir una sesión local desde el proyecto de servidor correspondiente
Para abrir una sesión local desde el proyecto de servidor correspondiente, haga lo siguiente:
1. En TIA Portal, elija el comando "Proyecto > Servidor de proyectos > Gestionar proyectos de
servidor".
Se abre el cuadro de diálogo "Gestionar proyectos de servidor".
2. En la lista desplegable seleccione el servidor de proyectos deseado.
3. Seleccione la sesión local exclusiva deseada en la lista que se muestra y haga clic en el
botón "Abrir".

Resultado
Todos los cuadros de diálogo abiertos se cierran y la sesión local seleccionada se abre.

194

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Exclusive Engineering
6.6 Crear y editar una sesión local exclusiva

Abrir una sesión local desde el explorador de Windows
Para abrir una sesión local desde el Windows Explorer, haga lo siguiente:
1. Estando TIA Portal cerrado, navegue con el explorador de Windows hasta el directorio en
el que están guardadas las sesiones locales.
2. Seleccione la sesión local deseada con la extensión de archivo "*.es<versión>" y ábrala
haciendo doble clic en ella.

Resultado
TIA Portal se inicia y la sesión local seleccionada se abre.
Nota
Al trabajar con Exclusive Engineering, para cerrar una sesión local se utiliza el comando
"Proyecto > Cerrar".

Abrir una sesión local desde otra ubicación
Para abrir una sesión local que se ha desplazado a otra ubicación, haga lo siguiente:
1. En TIA Portal, elija el comando "Proyecto > Abrir".
Aparece el cuadro de diálogo "Abrir proyecto", con una lista de los proyectos y sesiones
utilizados recientemente.
2. Seleccione la sesión local deseada y haga clic en el botón "Abrir".
Se informará de que se está intentando abrir una sesión local desde otra ubicación.
3. Confirme la consulta mostrada con "Aceptar" si desea llevar a cabo la acción.

Resultado
La sesión local seleccionada se abre desde la nueva ubicación.
La información relacionada con la nueva ubicación se muestra en el servidor correspondiente.

Abrir una sesión local sin conexión de servidor
Una sesión local también puede abrirse si el servidor correspondiente no está disponible en
estos momentos. En este caso, al abrir la sesión local se recibe un mensaje que le informa de
que es posible seguir trabajando en la sesión local offline con las restricciones siguientes:
● No es posible ver los cambios de los demás usuarios en la sesión local. No se muestran
banderitas amarillas ni rojas, ni tampoco objetos "anticuados".
● No es posible hacer el check in de los cambios en el proyecto del servidor hasta que se
restablece la conexión con el servidor.
Si se confirma el mensaje con "Aceptar", se podrá seguir trabajando en la sesión local sin
conexión de servidor.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

195

Uso de Exclusive Engineering
6.6 Crear y editar una sesión local exclusiva

6.6.3

Editar una sesión local exclusiva

Introducción
Para poder trabajar en un proyecto de servidor dentro del marco de Exclusive Engineering hay
que crear una sesión local exclusiva.
Los cambios realizados pueden insertarse en una o varias sesiones locales y a continuación
transferirse al proyecto de servidor.
Al trabajar con Exclusive Engineering, cuando se aplican los cambios al proyecto de servidor
se genera una nueva revisión de dicho proyecto.

Requisitos
Para poder editar las tareas de ingeniería en una sesión local exclusiva deben llevarse a cabo
los pasos siguientes:
● TIA Portal y un servidor de proyectos están instalados.
● Otra posibilidad consiste en utilizar el servidor de proyectos local instalado por defecto.
● Se ha creado un proyecto ejecutable y preparado para trabajar con Exclusive Engineering .
● El proyecto preparado se ha cargado en el servidor de proyectos, con lo que se ha creado
un proyecto de servidor.
● Se ha creado una sesión local exclusiva.

Editar una sesión local exclusiva
Para editar objetos en una sesión local exclusiva, proceda del siguiente modo:
1. Cree una sesión local exclusiva nueva o abra una sesión local exclusiva ya existente.
2. Realice los cambios que desee en los diferentes objetos dentro de la sesión local.
Dado que está trabajando en la sesión local de forma exclusiva, puede editar todos los
objetos contenidos en ella.
3. Aplique los cambios al proyecto de servidor haciendo clic en el botón "Aplicar cambios" del
árbol del proyecto.
En el cuadro de diálogo siguiente "Aplicar cambios", seleccione las opciones deseadas y
haga clic en "Aceptar".

Resultado
Los cambios de la sesión local exclusiva se aplican al proyecto de servidor con las opciones
seleccionadas.
Se genera una nueva revisión del proyecto de servidor.
La sesión exclusiva no se guarda localmente.

196

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Exclusive Engineering
6.6 Crear y editar una sesión local exclusiva

6.6.4

Guardar una sesión local exclusiva

Introducción
Al trabajar con Exclusive Engineering , las sesiones locales exclusivas se guardan con la
extensión de archivo "*.es".

Requisitos
TIA Portal y un servidor de proyectos están instalados.
Se ha creado un proyecto de servidor y una sesión local válida.

Guardar una sesión local exclusiva
Para guardar una sesión local exclusiva, proceda del siguiente modo:
1. Abra la sesión local exclusiva.
2. Realice los cambios deseados.
3. En el menú "Proyecto" elija el comando "Guardar" o haga clic en el botón "Guardar" del
árbol del proyecto.

Resultado
La sesión local exclusiva se guarda con la extensión de archivo "*.es" conservando el actual
nombre del proyecto.

6.6.5

Cerrar una sesión local exclusiva

Introducción
Para cerrar una sesión local exclusiva se procede igual que en un proyecto de usuario único,
es decir, con el comando "Proyecto > Cerrar".

Requisitos
TIA Portal y un servidor de proyectos están instalados.
Se han creado un proyecto de servidor y una sesión local exclusiva válida, que está abierta.

Procedimiento
Para cerrar una sesión local exclusiva, proceda del siguiente modo:
1. En TIA Portal, elija el comando "Proyecto > Cerrar".
2. Confirme la consulta posterior con "Sí" en caso de que desee guardar los cambios.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

197

Uso de Exclusive Engineering
6.6 Crear y editar una sesión local exclusiva

Resultado
La sesión local exclusiva se cierra.
En el servidor de proyectos, el proyecto de servidor correspondiente se mantiene bloqueado
incluso después de haber cerrado la sesión local exclusiva.

6.6.6

Editar offline una sesión local exclusiva

Introducción
Cuando se abre una sesión local exclusiva, se establece automáticamente la conexión con el
servidor de proyectos correspondiente.
Sin embargo, también existe la posibilidad de trabajar "offline" en una sesión local exclusiva sin
conexión con el servidor.
Si al abrir la sesión local no es posible establecer una conexión con el servidor, se mostrará un
cuadro de diálogo con el correspondiente mensaje de error.
Si confirma este cuadro de diálogo con "Aceptar", podrá trabajar en la sesión local incluso sin
tener conexión con el servidor, aunque con las restricciones siguientes:
● No es posible transferir los cambios realizados en la sesión local offline al proyecto de
servidor hasta que exista una conexión con el servidor.
Nota
Indicaciones para abrir sesiones locales:
● No es posible abrir sesiones locales cuyo nombre se haya modificado o que se hayan
borrado.
● Una sesión local no puede abrirse como proyecto de referencia.
Al abrir una sesión local que cumpla los criterios mencionados anteriormente se mostrará un
mensaje indicando que no es posible abrirla.

Requisitos
TIA Portal y un servidor de proyectos están instalados.
Se ha creado un proyecto de servidor ejecutable y una sesión local válida.

198

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Exclusive Engineering
6.6 Crear y editar una sesión local exclusiva

Abrir una sesión local y trabajar offline
Para abrir una sesión local, haga lo siguiente:
1. En TIA Portal, elija el comando "Proyecto > Abrir".
Aparece el cuadro de diálogo "Abrir proyecto", con una lista de los proyectos y sesiones
utilizados recientemente.
Los símbolos mostrados en la primera columna sirven para distinguir entre proyectos de
usuario único y proyectos de servidor.
2. Seleccione la sesión local deseada y haga clic en el botón "Abrir".
3. Si no es posible establecer una conexión con el servidor de proyectos correspondiente, se
recibirá un mensaje al respecto.
4. Haga clic en "Aceptar".
5. Aparece un segundo cuadro de diálogo informando de que no se ha podido establecer
ninguna conexión con el servidor. Si se confirma este cuadro de diálogo con "Aceptar", se
podrá seguir trabajando en la sesión local sin conexión de servidor con las restricciones
citadas.
6. Los cambios pueden guardarse localmente en la sesión exclusiva. En cuanto el servidor
vuelve a estar disponible pueden aplicarse los cambios.

Resultado
La sesión local seleccionada se abre offline y puede editarse offline.
El botón "Aplicar cambios" está atenuado y no puede activarse.
No es posible aplicar los cambios al proyecto de servidor hasta que exista una conexión con
el servidor.

6.6.7

Finalizar el trabajo en la sesión local exclusiva

Introducción
Existen varias formas de finalizar el trabajo en la sesión exclusiva, anular el bloqueo de
servidor y borrar la sesión local exclusiva.

Requisitos
TIA Portal y un servidor de proyectos están instalados.
Se han creado un proyecto de servidor y una sesión local exclusiva válida, que está abierta.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

199

Uso de Exclusive Engineering
6.6 Crear y editar una sesión local exclusiva

Procedimiento con sesión exclusiva abierta
Para finalizar el trabajo en una sesión local exclusiva abierta, proceda del siguiente modo:
1. Abra la sesión local exclusiva.
2. Haga clic en el botón "Aplicar cambios" del árbol del proyecto.
A continuación se abre el cuadro de diálogo "Aplicar cambios".
3. Active la opción "Finalizar Exclusive Engineering " en el cuadro de diálogo.
4. Haga clic en "Aceptar".

Procedimiento con sesión exclusiva cerrada
Para finalizar el trabajo en una sesión local exclusiva cerrada, proceda del siguiente modo:
1. Haga clic en el comando "Proyecto > Gestionar proyectos de servidor".
Se abre el cuadro de diálogo "Gestionar proyectos de servidor".
2. Seleccione la sesión exclusiva que desee y haga clic en el comando "Finalizar sesión local"
del menú contextual.
3. Haga clic en "Aceptar".

Resultado
Los cambios de la sesión local exclusiva se aplican al proyecto de servidor.
El bloqueo del servidor de proyectos se anula, con lo que el servidor vuelve a habilitarse para
otros usuarios.
Finalmente, la sesión local exclusiva se borra.

6.6.8

Visualizar todas las sesiones locales exclusivas pertenecientes a un proyecto de
servidor

Introducción
En TIA Portal es posible visualizar todas las sesiones locales exclusivas pertenecientes a un
proyecto de servidor.

Requisitos
TIA Portal y un servidor de proyectos están instalados.
Se han creado un proyecto de servidor ejecutable y una sesión local exclusiva válida.

200

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Uso de Exclusive Engineering
6.6 Crear y editar una sesión local exclusiva

Mostrar todas las sesiones locales
Para visualizar todas las sesiones locales exclusivas pertenecientes a un proyecto de servidor,
proceda del siguiente modo:
1. En TIA Portal, elija el comando "Proyecto > Servidor de proyectos > Gestionar proyectos de
servidor".
Se abre el cuadro de diálogo "Gestionar proyectos de servidor", que muestra todos los
proyectos existentes para el servidor de proyectos seleccionado.
2. Seleccione la conexión de servidor deseada.
Se listan todos los proyectos de servidor que hay para esta conexión de servidor.
3. Seleccione el proyecto de servidor deseado y expándalo para visualizar todas las sesiones
locales exclusivas correspondientes.
4. Si desea abrir una sesión local exclusiva, seleccione la sesión que desee y haga clic en el
botón "Abrir".

Resultado
Se muestran todas las sesiones locales exclusivas existentes para el proyecto de servidor
seleccionado.

Uso de Team Engineering
Manual de programación y manejo, 11/2019

201

Uso de Exclusive Engineering
6.6 Crear y editar una sesión local exclusiva

202

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Índice alfabético
A

I

Actualizar
Datos IPE, 151, 156
Proxy de dispositivos, 151, 156
Adaptar
Nombre de conexión, 173
Archivo de proyecto
Inicialización, 153
Inicializar, 153
Archivo IPE, 147
Inicialización, 147
Inicializar, 148

Ingeniería interproyecto
Creación de datos de proxy de dispositivo en el
proyecto de origen, 146
Exportar el archivo IPE con ayuda de "Datos de
proxy de dispositivo", 146
Intercambio de datos de control entre varios
proyectos, 142
Procedimiento de intercambio de datos de control
mediante un archivo de proyecto, 143
Procedimiento de intercambio de datos de control
mediante un archivo IPE, 143
Procedimiento para la actualización de los datos
de control ya transferidos, 144
Requisitos, 142
Requisitos de software y hardware, 142
Ingeniería interproyecto (IPE)
Intercambio de datos de control mediante un
archivo de proyecto, 140
Intercambio de datos de control mediante un
archivo IPE, 140
Introducción, 139
Inicialización
Archivo de proyecto, 153
Archivo IPE, 147
Inicializar
Archivo de proyecto, 153
Archivo IPE, 148
Insertar
Variable, 174
Integrada
Configurar, 165
IPE
Archivo, 147, 148
Creación de datos de proxy de dispositivo en el
proyecto de origen, 146
Exportar los datos de control de "Datos de proxy
de dispositivo" como archivo IPE, 146
Intercambio de datos de control entre varios
proyectos, 142
Introducción, 139
Requisitos de software y hardware, 142

C
Comunicación
Routing, 158
Routing S7, 162
Conexión de red
Establecer, 167
Conexión de routing
Configuración, 158
Conexión directa
Configurar, 160
Conexión enrutada
Configurar, 162
Conexión simbólica
Variable, 173
Configurar
Conexión directa, 160
Integrada, 165

D
Datos de control, 147
Inicializar, 148
Datos de PLC, 147
Datos IPE
Actualizar, 151, 156

E
Establecer
Conexión de red, 167

Uso de Team Engineering
Manual de programación y manejo, 11/2019

203

Índice alfabético

M
Mostrar
Nombres de programas, 167
Multiuser Commissioning
Introducción, 105, 115, 116, 118
Multiuser Engineering
Introducción, 30, 106

N
Nombre de conexión
Adaptar, 173
Nombres de programas
Mostrar, 167

O
Objetos soportados para Multiuser Engineering
Multiuser Engineering, (Objetos soportados)

P
Procedimiento para el trabajo con sesiones
locales, 73
Proxy
Routing, 158
Proxy de dispositivos
Actualizar, 151, 156
Proxy del dispositivo
Inicializar, 153

R
Reglas para el trabajo en sesiones locales, 73
Routing S7
Configurar, 162

S

Ejemplo de la estructura del programa en el
proyecto maestro, 131
Indicaciones referentes a la compatibilidad, 125
Introducción a la puesta en marcha en
equipo, 123
Procedimiento para crear el proyecto
maestro, 128
Procedimiento para integrar copias del proyecto
en el proyecto maestro, 129
Procedimiento para la sincronización de
PLC, 128
Procedimiento para modificar objetos centrales en
un proyecto maestro, 130
Procedimiento para sincronizar manualmente
cambios rivalizantes, 129
Reglas para cargar en la CPU, 133
Reglas para editar objetos centrales utilizados
conjuntamente, 133
Reglas para el proyecto maestro, 131
Reglas para las funciones online, 134
Reglas para trabajar con bloques de
organización, 133
Reglas para trabajar en equipo en una CPU, 132
Requisitos de software y hardware, 126
Requisitos para el trabajo paralelo en
equipo, 127
Trabajar con copias del proyecto, 124
Volver a integrar copias del proyecto en el
proyecto maestro, 125
Trabajar con Multiuser Engineering, 30, 106
Trabajar con sesiones locales, 73
Trabajo con Multiuser Engineering, 30, 106

V
Variable
Conexión simbólica, 173
Insertar, 174
Vista general del trabajo con Multiuser
Commissioning, 105, 115, 116, 118
Vista general del trabajo con Multiuser
Engineering, 30, 106

SIMATIC Manager, 165
Sustitución, 147

T
Team Engineering (ingeniería en equipo)
Crear un proyecto maestro, 124

204

Uso de Team Engineering
Manual de programación y manejo, 11/2019

Trabajar con el servidor de
proyectos TIA
Manual de programación y manejo

11/2019

Introducción al servidor de
proyectos

1

Principios básicos del
servidor de proyectos

2

Ajustes para trabajar con el
servidor de proyectos

3

Ajustar perfiles de red para el
servidor de proyectos

4

Configuraciones de red
soportadas para el servidor
de proyectos

5

Instalar y desinstalar el
servidor de proyectos

6

Configurar y administrar el
servidor de proyectos

7

Notas jurídicas
Filosofía en la señalización de advertencias y peligros

Este manual contiene las informaciones necesarias para la seguridad personal así como para la prevención de
daños materiales. Las informaciones para su seguridad personal están resaltadas con un triángulo de advertencia;
las informaciones para evitar únicamente daños materiales no llevan dicho triángulo. De acuerdo al grado de peligro
las consignas se representan, de mayor a menor peligro, como sigue.
PELIGRO
Significa que, si no se adoptan las medidas preventivas adecuadas se producirá la muerte, o bien lesiones
corporales graves.
ADVERTENCIA
Significa que, si no se adoptan las medidas preventivas adecuadas puede producirse la muerte o bien lesiones
corporales graves.
PRECAUCIÓN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse lesiones corporales.
ATENCIÓN
Significa que si no se adoptan las medidas preventivas adecuadas, pueden producirse daños materiales.
Si se dan varios niveles de peligro se usa siempre la consigna de seguridad más estricta en cada caso. Si en una
consigna de seguridad con triángulo de advertencia de alarma de posibles daños personales, la misma consigna
puede contener también una advertencia sobre posibles daños materiales.

Personal cualificado

El producto/sistema tratado en esta documentación sólo deberá ser manejado o manipulado por personal
cualificado para la tarea encomendada y observando lo indicado en la documentación correspondiente a la misma,
particularmente las consignas de seguridad y advertencias en ella incluidas. Debido a su formación y experiencia,
el personal cualificado está en condiciones de reconocer riesgos resultantes del manejo o manipulación de dichos
productos/sistemas y de evitar posibles peligros.

Uso previsto de los productos de Siemens
Considere lo siguiente:
ADVERTENCIA
Los productos de Siemens sólo deberán usarse para los casos de aplicación previstos en el catálogo y la
documentación técnica asociada. De usarse productos y componentes de terceros, éstos deberán haber sido
recomendados u homologados por Siemens. El funcionamiento correcto y seguro de los productos exige que su
transporte, almacenamiento, instalación, montaje, manejo y mantenimiento hayan sido realizados de forma
correcta. Es preciso respetar las condiciones ambientales permitidas. También deberán seguirse las indicaciones
y advertencias que figuran en la documentación asociada.

Marcas registradas

Todos los nombres marcados con ® son marcas registradas de Siemens AG. Los restantes nombres y
designaciones contenidos en el presente documento pueden ser marcas registradas cuya utilización por terceros
para sus propios fines puede violar los derechos de sus titulares.

Exención de responsabilidad

Hemos comprobado la concordancia del contenido de esta publicación con el hardware y el software descritos. Sin
embargo, como es imposible excluir desviaciones, no podemos hacernos responsable de la plena concordancia. El
contenido de esta publicación se revisa periódicamente; si es necesario, las posibles correcciones se incluyen en
la siguiente edición.

Siemens AG
Digital Industries
Postfach 48 48
90026 NÜRNBERG
ALEMANIA

Ⓟ 11/2019 Sujeto a cambios sin previo aviso

Copyright © Siemens AG 2019.
Reservados todos los derechos

Índice
1

Introducción al servidor de proyectos...........................................................................................................5

2

Principios básicos del servidor de proyectos................................................................................................7

3

Ajustes para trabajar con el servidor de proyectos ....................................................................................11

4

Ajustar perfiles de red para el servidor de proyectos .................................................................................13

5

Configuraciones de red soportadas para el servidor de proyectos ............................................................15

6

7

5.1

Requisitos para una correcta comunicación cliente-servidor.................................................15

5.2

Red con servidor de proyectos dedicado...............................................................................17

5.3

Red con servidor de proyectos temporal ...............................................................................18

5.4

Red en un dominio Windows .................................................................................................21

5.5

Red en un dominio Windows con acceso a Internet a través de VPN...................................22

5.6

Red en un dominio Windows con acceso a Internet a través de proxy .................................25

Instalar y desinstalar el servidor de proyectos ...........................................................................................29
6.1

Notas sobre la instalación del servidor de proyectos.............................................................29

6.2

Notas sobre la compatibilidad del servidor de proyectos.......................................................31

6.3

Instalar el servidor de proyectos ............................................................................................32

6.4

Volver a instalar el servidor de proyectos sin perder datos ...................................................34

6.5

Utilizar el servidor de proyectos en una máquina virtual........................................................35

6.6

Desinstalar el servidor de proyectos ......................................................................................36

Configurar y administrar el servidor de proyectos ......................................................................................39
7.1

Posibilidades para configurar y administrar el servidor de proyectos ....................................39

7.2
7.2.1
7.2.2

Utilizar herramientas gráficas.................................................................................................40
Introducción a las herramientas gráficas Power Tools ..........................................................40
Configurar el servidor de proyectos con la herramienta de configuración gráfica
Configuration Tool..................................................................................................................42
Administrar el servidor de proyectos con la herramienta de administración gráfica
"Administration Tool" ..............................................................................................................46
Agregar y borrar nueva conexión de servidor ........................................................................49
Definir la administración de usuarios para el servidor de proyectos y los proyectos de
servidor ..................................................................................................................................51
Gestionar alarmas..................................................................................................................54
Administrar proyectos de servidor y sesiones locales ...........................................................55
Mostrar el historial de proyectos ............................................................................................58
Administrar revisiones............................................................................................................60
Cambiar entre modo de ingeniería y modo Multiuser Commisioning ....................................62
Seleccionar el idioma de la interfaz de usuario......................................................................64
Mostrar confirmaciones..........................................................................................................65

7.2.3
7.2.4
7.2.5
7.2.6
7.2.7
7.2.8
7.2.9
7.2.10
7.2.11
7.2.12

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

3

Índice

7.2.13

Administrar certificados..........................................................................................................66

7.3
7.3.1
7.3.2
7.3.3
7.3.4
7.3.5

Utilizar herramientas de líneas de comandos ........................................................................67
Introducción a las herramientas de la línea de comandos.....................................................67
Configurar el servidor de proyectos con las Administrative Tools .........................................69
Comandos para configurar el servidor de proyectos .............................................................71
Administrar el servidor de proyectos con las Power Tools ....................................................73
Comandos para administrar el servidor de proyectos............................................................74

7.4

Confirmar certificado para el servidor de proyectos...............................................................80

7.5

Introducir datos de acceso para el servidor de proyectos......................................................81

7.6

Transferir datos de servidor a otro servidor de proyectos......................................................82

7.7

Leer el registro de errores del servidor de proyectos.............................................................83

7.8

Comprimir el registro de errores del servidor de proyectos en un archivo Zip.......................84

7.9

Notas sobre el comportamiento erróneo del servidor de proyectos.......................................85

Índice alfabético..........................................................................................................................................87

4

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Introducción al servidor de proyectos

1

Introducción
TIA Portal V16 permite trabajar cómodamente con el servidor de proyectos TIA, en adelante
denominado servidor de proyectos.
La funcionalidad del servidor de proyectos permite trabajar con Multiuser Engineering, con
Multiuser Commissioning y con Exclusive Engineering .
Además del servidor de proyectos dedicado se dispone de otro servidor de proyectos local con
funcionalidad limitada.
Con el servidor de proyectos se administran los proyectos de servidor que se editan con
Multiuser Engineering y Exclusive Engineering en las respectivas sesiones locales.
El servidor de proyectos debe instalarse primero y configurarse e iniciarse después con las
Power-Tools .
A continuación es posible configurar y administrar las conexiones con el servidor de proyectos
en TIA Portal, en la configuración de TIA Portal.
A la configuración del servidor de proyectos se accede en TIA Portal con el comando
"Opciones" > "Configuración" > "Servidor de proyectos".

Propiedades del servidor de proyectos
El servidor de proyectos tiene las siguientes propiedades:
● La instalación del servidor requiere ajustes en el cortafuegos de Windows y, en su caso, un
certificado.
● Para instalar y configurar el servidor de proyectos se necesitan derechos de administrador.
● Un administrador configura y administra el servidor de proyectos con las Power Tools
suministradas.
● El servidor de proyectos está disponible para todos los usuarios del proyecto de servidor
que dispongan de los derechos necesarios, y también es accesible desde el exterior.
● El servidor de proyectos puede iniciarse y administrarse fuera de TIA Portal.
● El "alias" asignado como nombre al servidor de proyectos sirve de identificador y no puede
cambiarse posteriormente.

Cuenta del sistema Microsoft para el servidor de proyectos
Al instalar el servidor de proyectos se crea una cuenta de sistema de Microsoft para el servidor
de proyectos. Microsoft cambia la contraseña de esta cuenta cíclicamente.
Si la contraseña de esta cuenta ha expirado, es preciso renovar la contraseña y reiniciar el
servidor de proyectos a continuación.

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

5

Introducción al servidor de proyectos

Capacidad funcional del servidor de proyectos
Para trabajar de forma eficiente con el servidor de proyectos es posible crear como máximo
100 conexiones de servidor.
Cuando se alcanza este número se recibe un mensaje indicando que ya no es posible crear
más conexiones de servidor. Tras borrar las conexiones de servidor que ya no se necesitan
vuelve a ser posible agregar conexiones nuevas, hasta el número máximo.
Para el servidor de proyectos está disponible la capacidad funcional siguiente, en función del
hardware:

Proyectos y revisiones existentes en el servidor de proyectos Servidor de proyectos estándar (aplicación como servidor de
proyectos temporal)
Hardware:
Field PG M5 Advanced (o equivalente)
Intel® Core™ i5-6440EQ hasta 3.4 GHz·,16 GB RAM (32 GB
para grandes proyectos)
SSD con 50 GB memoria disponible en disco duro
Red de 1 GB:
Pantalla Full HD de 15.6" (1920 × 1080)
Número máximo de proyectos de servidor por servidor:

1000

Número máximo de proyectos activos por servidor:

100

Número máximo de zonas de trabajo activas por proyecto

63

Número máximo de operaciones de carga paralelas por ser‐ 10
vidor
Número máximo de revisiones guardadas por servidor

ilimitado, el número puede parametrizarse
Ajuste predeterminado = 10
Asegúrese de que haya suficiente espacio disponible en me‐
moria para guardar las revisiones.

Nota
Hardware de servidor
Si el servidor utiliza un hardware más potente, las capacidades funcionales serán mayores.

6

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Principios básicos del servidor de proyectos

2

Introducción
Para trabajar con Multiuser Engineering, Multiuser Commissioning o Exclusive Engineering se
requiere un servidor de proyectos que administre los proyectos de servidor y las sesiones
locales.
Cada versión de TIA Portal contiene un servidor de proyectos específico de la versión con la
funcionalidad correspondiente.
El servidor de proyectos permite:
● Crear proyectos de servidor en los que varios usuarios puedan trabajar paralelamente.
● Visualizar y administrar los proyectos de servidor ya existentes.
● Crear y administrar sesiones locales.

Compatibilidad del servidor de proyectos con TIA Portal
Existe la posibilidad de instalar diferentes versiones del servidor de proyectos en un mismo
equipo y ejecutarlas simultáneamente.
La comunicación entre el servidor de proyectos y TIA Portal es posible para diferentes casos
de aplicación.
Consulte al respecto: Notas sobre la compatibilidad del servidor de proyectos (Página 31)

Requisitos
Para utilizar la funcionalidad del servidor de proyectos es necesario haber instalado el software
adecuado para el servidor de proyectos. Otra posibilidad consiste en utilizar el servidor de
proyectos local instalado por defecto.

Posibles constelaciones de servidor
En TIA Portal están disponibles diferentes constelaciones de servidor:
1. El servidor de proyectos como "servidor dedicado", que se ejecuta como servidor externo
para una cooperación a largo plazo.
2. El "servidor de proyectos temporal", en el que la funcionalidad de servidor se concentra en
una estación de trabajo.
3. El "servidor de proyectos local", que se instala automáticamente con TIA Portal, aunque
solo dispone de una funcionalidad limitada.
En la siguiente tabla se resume el trabajo con las posibles constelaciones de servidor.

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

7

Principios básicos del servidor de proyectos

Resumen de las posibles constelaciones de servidor para el servidor de proyectos
1. Servidor de proyectos como servidor dedicado
● El servidor de proyectos puede instalarse
con TIA Portal o bien independientemente.

6HUYLGRUGHSUR\HFWRV

7,$

● Esta es la configuración de "red de oficina"
que se utiliza normalmente.

3UR\HFWRVGHVHUYLGRU

● El servidor de proyectos se ejecuta en un
equipo propio.
● Esta constelación de servidor es accesible
desde todos sitios y permite de forma
estándar un trabajo continuo a todas horas.
● El servidor de proyectos debe instalarse y
configurarse.

6HVLµQORFDO

6HVLµQORFDO

6HVLµQORFDO

2. Servidor de proyectos temporal:
● Un usuario del proyecto de servidor puede
asumir la función de servidor en su equipo.
● Esta es también una posible "configuración
de oficina".

3UR\HFWRVGH
VHUYLGRU

● Es necesario instalar y configurar el servidor
de proyectos temporal.
6HVLµQORFDO

6HVLµQORFDO

8

6HVLµQORFDO

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Principios básicos del servidor de proyectos

Resumen de las posibles constelaciones de servidor para el servidor de proyectos
3. Servidor de proyectos local:
● El servidor de proyectos local se ejecuta en el
equipo del usuario correspondiente.
● El servidor local está disponible de inmediato
sin más instalaciones ni configuraciones,
pues se instala junto con TIA Portal.
● Para el servidor de proyectos local no se
solicita ninguna licencia.
● No es posible acceder al servidor de
proyectos local desde otros equipos.
● El servidor de proyectos local es ideal para
aprender y probar la funcionalidad de
Multiuser Engineering, Multiuser
Connissioning y Exclusive Engineering. No
requiere la instalación ni configuración de
ningún servidor.

6HVLµQORFDO

/RFDOHVSURSLRV
3UR\HFWRVGHVHUYLGRU

● El servidor de proyectos local también puede
emplearse para una administración de
proyectos propia con función de "rollback" o
reversión.

Consulte también
Notas sobre la compatibilidad del servidor de proyectos (Página 31)

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

9

Principios básicos del servidor de proyectos

10

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Ajustes para trabajar con el servidor de proyectos

3

Introducción
Para trabajar con Multiuser Engineering es posible realizar los siguientes ajustes en "Opciones
> Configuración", ficha "Servidor de proyectos", de TIA Portal:
● Conexiones con el servidor
● Perfiles de red y compresión
● Configuración de almacenamiento
A continuación se describen las diferentes posibilidades de ajuste.

Conexiones con el servidor
Este cuadro de diálogo permite agregar nuevas conexiones de servidor para un servidor de
proyectos seleccionado:
● Haga clic en el botón "Agregar conexión de servidor", para crear esta conexión.
● En el cuadro de diálogo siguiente, introduzca el nombre de servidor y el host y puerto
correspondientes en "Nombre de servidor".
● Seleccione el protocolo de transmisión deseado para la conexión de servidor. Como
protocolo de transmisión predeterminado está seleccionado "http".
● Haga clic en el botón "Agregar".
La nueva conexión de servidor se agrega y se visualiza.
Consulte al respecto también Introducción al servidor de proyectos (Página 5).

Perfiles de red y compresión
En la lista desplegable existe la posibilidad de seleccionar el perfil de red deseado que se
adapte a la capacidad de la red empleada.
El perfil de red seleccionado determina el tiempo que transcurre hasta que aparece el mensaje
de tiempo rebasado.
Encontrará una descripción detallada de los diferentes perfiles de red en Ajustar perfiles de red
para el servidor de proyectos (Página 13).
Si como perfil de red está ajustado "Medio" o "Lento", se activará la compresión para la
transmisión de datos. Si se dispone de WLAN o de velocidades medias de transmisión de
datos (Fast Ethernet), la compresión mejora el tiempo de transferencia.
Para el perfil de red "Rápido" no se realiza ninguna compresión.
Nota
El cambio del perfil de red no es efectivo hasta que se reinicia el cliente o el servidor de
proyectos.

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

11

Ajustes para trabajar con el servidor de proyectos

Configuración de almacenamiento
Aquí es posible determinar dónde deben guardarse las sesiones locales y los proyectos de
servidor.
● Ubicación empleada en la actualidad
Esta opción está activada por defecto.
● Definir una ubicación predeterminada
Seleccione aquí la ubicación deseada navegando hasta el lugar deseado. Para ello, haga
clic en el botón "Examinar". Los ajustes se adoptarán como predeterminados.

Consulte también
Introducción al servidor de proyectos (Página 5)
Ajustar perfiles de red para el servidor de proyectos (Página 13)

12

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Ajustar perfiles de red para el servidor de proyectos

4

Introducción
Al trabajar con proyectos de servidor existe la posibilidad de elegir entre tres perfiles de red
distintos, en función de la potencia de su propia red.
El perfil de red seleccionado determina el tiempo que trascurre hasta el aviso de tiempo
rebasado.

Perfiles de red disponibles
Los siguientes perfiles de red están disponibles para trabajar con el servidor de proyectos:
Perfil de red

Campo de aplicación

"Rápida"

● Entorno de oficina
● Gigabit Ethernet
● Entorno de red permanente y normalmente sin fallos

"Medio"

● Entorno de oficina, grupo de trabajo pequeño con ubicación fija
● Ethernet rápida, WLAN, conexiones VPN
● Buen entorno de red con fallos más bien escasos

"Lenta"

● Puesta en marcha, lugares de trabajo cambiantes
● Conexión WLAN
● Posibles fallos (máquinas, instalaciones eléctricas)

Perfiles de red y compresión del servidor de proyectos
En la lista desplegable existe la posibilidad de seleccionar el perfil de red deseado que se
adapte a la capacidad de la red empleada.
El perfil de red seleccionado determina el tiempo que transcurre hasta que aparece un
mensaje de tiempo excedido.
Si como perfil de red está ajustado "Medio" o "Lento", se activará la compresión para la
transmisión de datos.
Para el perfil de red "Rápido" no se realiza ninguna compresión.
Nota
El cambio del perfil de red no se hace efectivo hasta que se reinicia el cliente multiusuario o el
servidor de proyectos.

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

13

Ajustar perfiles de red para el servidor de proyectos

Ajustar perfiles de red
Para ajustar los perfiles de red para el servidor de proyectos en TIA Portal, haga lo sigiuente:
1. En TIA Portal, elija el comando "Opciones" > "Configuración" > "Multiusuario".
En los ajustes que se muestran a continuación se indican las posibles opciones para los
perfiles de red.
2. Seleccione el perfil deseado en la lista desplegable "Perfiles de red multiusuario".
3. Reinicie el cliente multiusuario o el servidor de proyectos para que el cambio del perfil de
red sea efectivo.

Resultado
Se activa el perfil seleccionado.
Dependiendo del perfil seleccionado, la compresión se activará o no.

Nota
La conmutación no afecta al comportamiento de tiempo rebasado del perfil de red actual.

14

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configuraciones de red soportadas para el servidor de
proyectos
5.1

5

Requisitos para una correcta comunicación cliente-servidor

Introducción
A continuación encontrará una relación de los requisitos para una correcta comunicación
cliente-servidor en el contexto de Multiuser Engineering y Multiuser Commissioning, así como
de Exclusive Engineering con relación a:
● comunicación en red
● administración de certificados
● autenticación

Requisitos para la comunicación en red
La red utilizada debe permitir una comunicación HTTPS entre el cliente y el servidor de
proyectos.
Existen dos posibilidades para implementarla:
● Comunicación TCP directa entre cliente y servidor de proyectos a través del puerto
habilitado del servidor.
– No hay ningún ajuste de cortafuegos saliente que bloquee la comunicación en las
estaciones de trabajo.
– No hay ningún ajuste de cortafuegos entrante que bloquee la comunicación en el
servidor de proyectos.
– Tanto el servidor de proyectos como todas las estaciones de trabajo están en la misma
red IP (sin routing).
– Si hay un router intermedio, no debe bloquear la comunicación a través del puerto
seleccionado del servidor.
● Comunicación indirecta a través de un servidor proxy de HTTPS.
– Se dispone de un servidor proxy de HTTPS.
– El servidor proxy de HTTPW está configurado en la página del cliente en el sistema
Windows y habilitado para la comunicación.

Requisitos para la administración de certificados
Para establecer una comunicación segura es necesario utilizar "HTTPS". Con "HTTPS" se
codifica la comunicación y se solicita un certificado. De este modo, la comunicación tiene un
nivel de seguridad mayor que la comunicación "http" sin cifrar.

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

15

Configuraciones de red soportadas para el servidor de proyectos
5.1 Requisitos para una correcta comunicación cliente-servidor
Para establecer una comunicación HTTPS es necesario configurar el servidor de proyectos de
manera que utilice un certificado HTTPS válido para cifrar los datos.
● El certificado guardado en la memoria de certificados de Windows se utiliza en el servidor
de proyectos.
● El certificado debe ser válido actualmente y estar registrado para su uso con "http.sys".
● La huella digital del certificado debe transferirse al cliente.

Requisitos para la autenticación
Para la autenticación de la comunicación con el servidor de proyectos se utilizan los
mecanismos de Windows.
Multiuser Engineering soporta tanto la autenticación mediante cuentas de dominios como la
autenticación mediante cuentas locales de Windows.
● Autenticación con cuenta de dominio
– Tanto el cliente como el servidor de proyectos pertenecen al mismo dominio de
Windows.
– Para este dominio se utiliza una cuenta de usuario válida.
– Tanto el cliente como el servidor de proyectos pueden establecer una comunicación de
red con el servidor del dominio.
– Deben cumplirse los requisitos para utilizar una comunicación https segura.
● Autenticación con cuenta local
– Para la autenticación debe utilizarse una cuenta local en el servidor de proyectos.
– Deben cumplirse los requisitos para utilizar una comunicación HTTPS segura.
Nota
Autenticación NTLM en el servidor de proyectos
Para la autenticación en el servidor de proyectos se utiliza NTLM. Por razones de seguridad
es recomendable utilizar NTLM V2, activado con carácter estándar a partir de Windows
2000, y no activar NTLM V1.
NTLM V2 dispone de un procedimiento de inicio de sesión más seguro que NTLM V1.
Nota
En los capítulos siguientes encontrará más información sobre las configuraciones de red
soportadas para el servidor de proyectos.

Consulte también
Red en un dominio Windows (Página 21)
Red en un dominio Windows con acceso a Internet a través de VPN (Página 22)
Red en un dominio Windows con acceso a Internet a través de proxy (Página 25)

16

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configuraciones de red soportadas para el servidor de proyectos
5.2 Red con servidor de proyectos dedicado

5.2

Red con servidor de proyectos dedicado

Introducción
A continuación encontrará información sobre una configuración de servidor con un servidor de
proyectos dedicado en una red de oficina.
El gráfico muestra la posible estructura de dicha configuración:

5HGGHRILFLQDFRQVHUYLGRUGHSUR\HFWRVGHGLFDGR

3XHVWRGHWUDEDMR

3XHVWRGHWUDEDMR
PµYLO
5HGGHRILFLQD

6HUYLGRUGHSUR\HFWRVGHGLFDGR

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

17

Configuraciones de red soportadas para el servidor de proyectos
5.3 Red con servidor de proyectos temporal

Descripción de la configuración de red con un servidor de proyectos dedicado
La configuración de red debe cumplir los requisitos siguientes:
Configuración

Descripción

Entorno de red

Estructura:
● Varias estaciones de trabajo Windows en las que esté instalado el TIA Portal.
● Un servidor Windows dedicado que esté instalado como servidor de proyectos.
● Las estaciones de trabajo y el servidor se encuentran en la misma red.

Red

Requisitos:
● Existe una conexión TCP directa entre las estaciones de trabajo y el servidor de proyectos
a través del puerto seleccionado.
● No hay ningún ajuste de cortafuegos saliente que bloquee la comunicación en las
estaciones de trabajo.
● No hay ningún ajuste de cortafuegos entrante que bloquee la comunicación en el servidor.
● Tanto el servidor de proyectos como todas las estaciones de trabajo están en la misma
red IP (sin routing).
● Si hay un router intermedio, no debe bloquear la comunicación a través del puerto
seleccionado del servidor.
● O se ha creado un servidor proxy o existe una derivación local. Para ello, en los ajustes
de Windows para una red local debe estar activada la opción "No usar servidor proxy para
direcciones locales".

Autenticación

Cuentas de usuarios y grupos de trabajo en Windows:
● Deben crearse localmente en el servidor de proyectos.
● Deben estar configurados conforme a los derechos y las funciones para servidores y
proyectos.
● El nombre y la contraseña para la autenticación se solicitan en todas las estaciones de
trabajo.
● Para la autenticación solo está permitido usar cuentas locales del sistema servidor.
Nota:
Para preguntar nombre y contraseña puede utilizarse la autenticación de Windows. Para ello
es necesario crear cuentas locales que sean idénticas a las cuentas existentes en el servidor
de proyectos. Este procedimiento permite que el servidor autentique de manera automática
una cuenta local con datos de registro idénticos a los de una cuenta existente en el servidor.
Limitación:
Las cuentas de usuarios y los grupos no pueden administrarse de manera centralizada, para
lo que se necesitan usuarios locales y grupos.
Por este motivo esta configuración no es adecuada para redes Enterprise.

5.3

Red con servidor de proyectos temporal

Introducción
A continuación encontrará información sobre una configuración de servidor con un servidor de
proyectos temporal en una red de oficina.

18

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configuraciones de red soportadas para el servidor de proyectos
5.3 Red con servidor de proyectos temporal
El gráfico muestra la posible estructura de dicha configuración:

*UXSRGHWUDEDMRGHRILFLQD

*UXSRGHWUDEDMRWHPSRUDO

3XHVWRGHWUDEDMR

3XHVWRGHWUDEDMR
PµYLO

3XHVWRGHWUDEDMR
PµYLO
5HGGHRILFLQD

3XHVWRGHWUDEDMRPµYLOVHUYLGRUGHSUR\HFWRVGHGLFDGR

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

5HG
WHPSRUDO

3XHVWRGHWUDEDMRPµYLOVHUYLGRUGHSUR\HFWRVWHPSRUDO

19

Configuraciones de red soportadas para el servidor de proyectos
5.3 Red con servidor de proyectos temporal

Descripción de la configuración de red con un servidor de proyectos temporal
La configuración de red debe cumplir los requisitos siguientes:
Configuración

Descripción

Entorno de red

Estructura:
● Varias estaciones de trabajo Windows en las que esté instalado el TIA Portal.
● Un servidor Windows temporal que esté instalado como servidor de proyectos en una de
las estaciones de trabajo.
Posiblemente se abandonará el entorno de oficina, p.ej. para realizar una puesta en marcha
en una fábrica.
● Todas las estaciones de trabajo y el servidor de proyectos temporal se encuentran en la
misma red.
● Con el servidor de proyectos temporal se puede abandonar el entorno de oficina sin
interrumpir el trabajo.

Red

Requisitos:
● Existe una conexión TCP directa entre las estaciones de trabajo y el servidor de proyectos
a través del puerto seleccionado.
● No hay ningún ajuste de cortafuegos saliente que bloquee la comunicación en las
estaciones de trabajo.
● No hay ningún ajuste de cortafuegos entrante que bloquee la comunicación en el servidor.
● Tanto el servidor de proyectos como todas las estaciones de trabajo están en la misma
red IP (sin routing).
● Si hay un router intermedio, no debe bloquear la comunicación a través del puerto
seleccionado del servidor.
● O se ha creado un servidor proxy o existe una derivación local. Para ello, en los ajustes
de Windows para una red local debe estar activada la opción "No usar servidor proxy para
direcciones locales".

Autenticación

Cuentas de usuarios y grupos de trabajo en Windows:
● Deben estar creados localmente en el servidor de proyectos.
● Deben estar configurados conforme a los derechos y las funciones para servidores y
proyectos.
● El nombre y la contraseña para la autenticación se solicitan en todas las estaciones de
trabajo.
● Para la autenticación solo está permitido usar cuentas locales del sistema servidor.
Nota:
Para preguntar nombre y contraseña puede utilizarse la autenticación de Windows. Para ello
es necesario crear cuentas locales que sean idénticas a las cuentas existentes en el servidor
de proyectos. Este procedimiento permite que el servidor autentique de manera automática
una cuenta local con datos de registro idénticos a los de una cuenta existente en el servidor.
Limitación:
Las cuentas de usuarios y los grupos no pueden administrarse de manera centralizada, para
lo que se necesitan grupos locales.
Por este motivo esta configuración no es adecuada para redes Enterprise.

20

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configuraciones de red soportadas para el servidor de proyectos
5.4 Red en un dominio Windows

5.4

Red en un dominio Windows

Introducción
A continuación encontrará información sobre una configuración de servidor con un servidor de
proyectos dedicado en un dominio Windows.
El gráfico muestra la posible estructura de dicha configuración:

5HGGHQWURGHXQGRPLQLR:LQGRZV

3XHVWRGHWUDEDMR

&RQWURODGRUGH
GRPLQLRV
3XHVWRGHWUDEDMR
PµYLO

5HGGHRILFLQD

6HUYLGRUGHSUR\HFWRVGHGLFDGR

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

21

Configuraciones de red soportadas para el servidor de proyectos
5.5 Red en un dominio Windows con acceso a Internet a través de VPN

Descripción de la configuración de red en un dominio Windows
La configuración de red debe cumplir los requisitos siguientes:
Configuración

Descripción

Entorno de red

Estructura:
● Todas las estaciones de trabajo Windows en las que esté instalado el TIA Portal
pertenecen al mismo dominio.
● Un servidor Windows dedicado como servidor de proyectos se encuentra también en el
mismo dominio.
● Todas las estaciones de trabajo y el servidor de proyectos utilizan la misma LAN (Local
Area Network).
● Todas las estaciones de trabajo y el servidor de proyectos pueden conectarse con el
controlador del dominio.

Red

Requisitos:
● Existe una conexión TCP directa entre las estaciones de trabajo y el servidor de proyectos
a través del puerto seleccionado.
● No hay ningún ajuste de cortafuegos saliente que bloquee la comunicación en las
estaciones de trabajo.
● No hay ningún ajuste de cortafuegos entrante que bloquee la comunicación en el servidor.
● Tanto el servidor de proyectos como todas las estaciones de trabajo están en la misma
red IP (sin routing).
● Si hay un router intermedio, no debe bloquear la comunicación a través del puerto
seleccionado del servidor.
● O se ha creado un servidor proxy o existe una derivación local. Para ello, en los ajustes
de Windows para una red local debe estar activada la opción "No usar servidor proxy para
direcciones locales".

Autenticación

Cuentas de usuarios y grupos de trabajo en Windows:
● Deben estar creados en el controlador del dominio.
● Deben estar configurados conforme a los derechos y las funciones para servidores y
proyectos.
● Los usuarios de las estaciones de trabajo en las que se ejecute el TIA Portal se autentican
de manera automática con sus datos de inicio de sesión en el dominio.
Nota:
En el servidor de proyectos también es posible iniciar sesión con otros datos de inicio de
sesión válidos.
Limitación:
Esta configuración no es adecuada para configuraciones de servidores temporales, puesto
que necesitan también acceso al controlador del dominio.

5.5

Red en un dominio Windows con acceso a Internet a través de VPN

Introducción
A continuación encontrará información sobre una configuración de servidor con un servidor de
proyectos dedicado en un dominio Windows con VPN (Virtual Private Network).

22

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configuraciones de red soportadas para el servidor de proyectos
5.5 Red en un dominio Windows con acceso a Internet a través de VPN
El gráfico muestra la posible estructura de dicha configuración:

,QWHUQHW

'RPLQLRGHRILFLQD

3XHVWRGHWUDEDMR

&RQWURODGRU
GHGRPLQLRV
3XHVWRGHWUDEDMR
PµYLO

&RUWDIXHJRV

931
5HGGHRILFLQD

3XHVWRGHWUDEDMR
PµYLO

6HUYLGRUGHSUR\HFWRVGHGLFDGR

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

23

Configuraciones de red soportadas para el servidor de proyectos
5.5 Red en un dominio Windows con acceso a Internet a través de VPN

Descripción de la configuración de red en un dominio Windows con VPN
La configuración de red debe cumplir los requisitos siguientes:
Configuración

Descripción

Entorno de red

Estructura:
● Todas las estaciones de trabajo Windows en las que esté instalado TIA Portal pertenecen
al mismo dominio.
● Un servidor Windows dedicado como servidor de proyectos se encuentra también en el
mismo dominio.
● Todas las estaciones de trabajo y el servidor de proyectos utilizan la misma LAN (Local
Area Network).
● Tanto las estaciones de trabajo como el servidor de proyectos tienen acceso al
controlador del dominio.
● Además, las estaciones de trabajo pueden conectarse a la LAN a través de VPN.

Red

Requisitos:
● Existe una conexión TCP directa entre las estaciones de trabajo y el servidor de proyectos
a través del puerto seleccionado.
● No hay ningún ajuste de cortafuegos saliente que bloquee la comunicación en las
estaciones de trabajo.
● No hay ningún ajuste de cortafuegos entrante que bloquee la comunicación en el servidor.
● Tanto el servidor de proyectos como todas las estaciones de trabajo están en la misma
red IP (sin routing).
● Si hay un router intermedio, no debe bloquear la comunicación a través del puerto
seleccionado del servidor.
● O se ha creado un servidor proxy o existe una derivación local. Para ello, en los ajustes
de Windows para una red local debe estar activada la opción "No usar servidor proxy para
direcciones locales".
● Por motivos de seguridad es recomendable utilizar soluciones VPN, como p. ej. "Routing
and Remote Access Service".
● Por motivos de seguridad se recomienda encarecidamente crear un cortafuegos. Si se
utiliza VPN no es necesario abrir un puerto para el servidor de proyectos en el
cortafuegos.

24

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configuraciones de red soportadas para el servidor de proyectos
5.6 Red en un dominio Windows con acceso a Internet a través de proxy
Configuración

Descripción

Autenticación

La autenticación se realiza en función de la configuración seleccionada.
Cuentas de usuarios y grupos de trabajo en Windows con configuración como grupo de
trabajo de oficina:
● Deben crearse localmente en el servidor de proyectos.
● Deben estar configurados conforme a los derechos multiusuario y las funciones para
servidores y proyectos.
● El nombre y la contraseña para la autenticación se solicitan en todas las estaciones de
trabajo.
● Para la autenticación solo está permitido usar cuentas locales del sistema servidor.
Nota:
Para preguntar nombre y contraseña puede utilizarse la autenticación de Windows. Para ello
es necesario crear cuentas locales que sean idénticas a las cuentas existentes en el servidor
de proyectos. Este procedimiento permite que el servidor autentique de manera automática
una cuenta local con datos de registro idénticos a los de una cuenta existente en el servidor.
Limitación:
Las cuentas de usuarios y los grupos no pueden administrarse de manera centralizada, para
lo que se necesitan usuarios locales y grupos.
Por este motivo esta configuración no es adecuada para redes Enterprise.
Cuentas de usuarios y grupos de trabajo en Windows con configuración como dominio de
Windows:
● Deben estar creados en el controlador del dominio.
● Deben estar configurados conforme a los derechos multiusuario y las funciones para
servidores y proyectos.
● Los usuarios de las estaciones de trabajo en las que se ejecute TIA Portal se autentican
de manera automática con sus datos de inicio de sesión en el dominio.
Nota:
En el servidor de proyectos también es posible iniciar sesión con otros datos de inicio de
sesión válidos.
Limitación:
Esta configuración no es adecuada para configuraciones de servidores temporales, puesto
que necesitan también acceso al controlador del dominio.
La comunicación con un equipo remoto a través de VPN presenta para todas las aplicaciones
cliente-servidor típicas limitaciones de rendimiento. El servidor de proyectos también se ve
afectado por las mismas.

5.6

Red en un dominio Windows con acceso a Internet a través de proxy

Introducción
A continuación encontrará información sobre una configuración de servidor con un servidor de
proyectos dedicado en un dominio Windows con acceso a Intranet o Internet a través de un
proxy.
El gráfico muestra la posible estructura de dicha configuración:

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

25

Configuraciones de red soportadas para el servidor de proyectos
5.6 Red en un dominio Windows con acceso a Internet a través de proxy

,QWHUQHW

'RPLQLRGHRILFLQD

3XHVWRGHWUDEDMR

&RQWURODGRU
GHGRPLQLRV
3XHVWRGHWUDEDMR
PµYLO

&RUWDIXHJRV

3UR[\
5HGGHRILFLQD

3XHVWRGHWUDEDMR
PµYLO

6HUYLGRUGHSUR\HFWRVGHGLFDGR

26

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configuraciones de red soportadas para el servidor de proyectos
5.6 Red en un dominio Windows con acceso a Internet a través de proxy

Descripción de la configuración de red en un dominio Windows con proxy
La configuración de red debe cumplir los requisitos siguientes:

Entorno de red

Estructura:
● Todas las estaciones de trabajo Windows en las que esté instalado TIA Portal pertenecen
al mismo dominio.
● Un servidor Windows dedicado como servidor de proyectos se encuentra también en el
mismo dominio.
● Todas las estaciones de trabajo y el servidor de proyectos utilizan la misma LAN (Local
Area Network).
● Tanto las estaciones de trabajo como el servidor de proyectos tienen acceso al
controlador del dominio.
● Además, las estaciones de trabajo externas a la LAN pueden conectarse a la LAN a
través de un servidor proxy.

Red

Requisitos:
● Existe una conexión TCP directa entre las estaciones de trabajo y el servidor de proyectos
a través del puerto seleccionado.
● No hay ningún ajuste de cortafuegos saliente que bloquee la comunicación en las
estaciones de trabajo.
● No hay ningún ajuste de cortafuegos entrante que bloquee la comunicación en el servidor.
● Tanto el servidor de proyectos como todas las estaciones de trabajo están en la misma
red IP (sin routing).
● Si hay un router intermedio, no debe bloquear la comunicación a través del puerto
seleccionado del servidor.
● O se ha creado un servidor proxy o existe una derivación local. Para ello, en los ajustes
de Windows para una red local debe estar activada la opción "No usar servidor proxy para
direcciones locales".
● Por motivos de seguridad no se recomienda poner a disposición el servidor de proyectos
en Internet.
● Por motivos de seguridad se recomienda encarecidamente crear un cortafuegos que
acepte las conexiones entrantes en el puerto seleccionado.
● El servidor proxy debe aceptar comunicación HTTPS y reenviar desde el puerto
seleccionado al servidor de proyectos.

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

27

Configuraciones de red soportadas para el servidor de proyectos
5.6 Red en un dominio Windows con acceso a Internet a través de proxy

Autenticación

La autenticación se realiza en función de la configuración seleccionada.
Cuentas de usuarios y grupos de trabajo en Windows con configuración como grupo de
trabajo de oficina:
● Deben crearse localmente en el servidor de proyectos.
● Deben estar configurados conforme a los derechos multiusuario y las funciones para
servidores y proyectos.
● El nombre y la contraseña para la autenticación se solicitan en todas las estaciones de
trabajo.
● Para la autenticación solo está permitido usar cuentas locales del sistema servidor.
Nota:
Para preguntar nombre y contraseña puede utilizarse la autenticación de Windows. Para ello
es necesario crear cuentas locales que sean idénticas a las cuentas existentes en el servidor
de proyectos. Este procedimiento permite que el servidor autentique de manera automática
una cuenta local con datos de registro idénticos a los de una cuenta existente en el servidor.
Limitación:
Las cuentas de usuarios y los grupos no pueden administrarse de manera centralizada, para
lo que se necesitan usuarios locales y grupos.
Por este motivo esta configuración no es adecuada para redes Enterprise.
Cuentas de usuarios y grupos de trabajo en Windows con configuración como dominio de
Windows:
● Deben estar creados en el controlador del dominio.
● Deben estar configurados conforme a los derechos multiusuario y las funciones para
servidores y proyectos.
● Los usuarios de las estaciones de trabajo en las que se ejecute TIA Portal se autentican
de manera automática con sus datos de inicio de sesión en el dominio.
Nota:
En el servidor de proyectos también es posible iniciar sesión con otros datos de inicio de
sesión válidos.
Limitación:
Esta configuración no es adecuada para configuraciones de servidores temporales, puesto
que necesitan también acceso al controlador del dominio.
La comunicación con un equipo remoto a través de un proxy presenta limitaciones de rendi‐
miento para todas las aplicaciones cliente-servidor típicas. El servidor de proyectos también
se ve afectado por las mismas.

Puerto

Nota:
En parte es posible utilizar para una conexión https el puerto "443" en un servidor proxy. Para
una conexión https, en algunos servidores proxy no es posible ajustar un puerto distinto del
"443". En tal caso es necesario instalar también el servidor de proyectos en el puerto "443".

28

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Instalar y desinstalar el servidor de proyectos
6.1

6

Notas sobre la instalación del servidor de proyectos

Introducción
La instalación del servidor de proyectos permite utilizar las funciones de Multiuser Engineering,
Multiuser Commissioning y Exclusive Engineering .
El servidor de proyectos puede instalarse de uno de los modos siguientes:
● Junto con la instalación de TIA Portal.
● Como instalación independiente en un proceso de instalación propio sin TIA Portal.
Nota
Para instalar el servidor se requieren derechos de administrador.

Instalación del servidor de proyectos con TIA Portal
La instalación del servidor de proyectos se lleva a cabo junto con la instalación de los
siguientes productos de TIA Portal:
● SIMATIC STEP 7 Basic
● SIMATIC STEP 7 Professional
● SIMATIC WinCC Basic
● SIMATIC WinCC Comfort/Advanced
● SIMATIC WinCC Professional
El servidor de proyectos suele estar activado por defecto en la selección de productos y se
instala con ellos. Compruebe el ajuste durante la instalación de TIA Portal. Durante la
instalación encontrará el ajuste predeterminado correspondiente para el servidor de proyectos
en el directorio "Options" de la selección de productos. Seleccione, activando o no la casilla de
verificación, si desea que se instale o no además el servidor de proyectos durante la instalación
de TIA Portal.

Instalación del servidor de proyectos como instalación independiente
El servidor de proyectos también puede instalarse de forma independiente.
Encontrará también una descripción de la instalación automatizada en el directorio
"Documents\Readme\<directorio de idioma>" del DVD de producto.

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

29

Instalar y desinstalar el servidor de proyectos
6.1 Notas sobre la instalación del servidor de proyectos

Versiones idénticas de TIA Portal para la instalación
Al instalar productos de TIA Portal en los diferentes clientes asegúrese de que todos los
equipos utilizan las mismas versiones de los productos de software para la instalación.
Si, p. ej., se ha instalado STEP 7 Professional, WinCC Advanced y Safety así como el servidor
de proyectos con la versión Vx.y, el resto de dispositivos y clientes también deberán tener
instaladas las mismas versiones de este software.
La instalación de los Service Packs y las actualizaciones debe realizarse al mismo tiempo para
todos los productos.

Ruta de instalación
No utilice caracteres Unicode (p. ej. caracteres chinos) en la ruta de instalación.

Instalación de un servidor de proyectos más reciente
Tenga en cuenta que debe instalar primero el servidor de proyectos más reciente y solo
entonces podrá desinstalar la versión anterior.
Con este procedimiento garantiza que los privilegios de usuario existentes para el servidor
también se puedan aplicar también para el nuevo servidor. Si se borran completamente todos
los servidores de proyectos existentes antes de la instalación, se perderán también las
configuraciones de usuario y deberán reconfigurarse.

Programas antivirus
Durante la instalación es necesario poder acceder en lectura y escritura a los archivos ya
instalados. Algunos programas antivirus lo impiden. Durante la instalación del servidor de
proyectos se recomienda desactivar los antivirus y volver a activarlos después.

Plataformas de virtualización compatibles
Tanto el servidor de proyectos como TIA Portal pueden instalarse también en una máquina
virtual.
Para ello, utilice una de las siguientes plataformas de virtualización en la versión indicada o una
superior:
● VMware vSphere Hypervisor (ESXi) 6.5
● VMware Workstation 12.5.7
● VMware Player 12.5.7
● Microsoft Hyper-V Server 2016
Para instalar una plataforma de visualización se aplican los mismos requisitos que para
instalar TIA Portal.

30

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Instalar y desinstalar el servidor de proyectos
6.2 Notas sobre la compatibilidad del servidor de proyectos

6.2

Notas sobre la compatibilidad del servidor de proyectos

Introducción
Para poder trabajar con Multiuser Engineering, con Multiuser Commissioning y con Exclusive
Engineering se requiere un servidor de proyectos que administre los proyectos de servidor y
las sesiones locales.
En TIA Portal existe la posibilidad de instalar diferentes versiones del servidor de proyectos en
un mismo equipo y ejecutarlas simultáneamente.

Compatibilidad del servidor de proyectos con TIA Portal
La comunicación entre el servidor de proyectos y TIA Portal es posible para los siguientes
casos de aplicación.

Versión del servidor de proyectos

Versión de TIA Portal

V16

V16, V15.1, V15 y V14

V15.1

V15.2, V15 y V14

V15

V15 y V14

V14

V14

Nota
Notas sobre la compatibilidad del servidor de proyectos
La nueva funcionalidad de servidor agregada a V16 solo está disponible si se ha instalado
también TIA Portal V16.
Si se sigue trabajando con un TIA Portal <V16 o con un servidor <V16, solo estará disponible
la funcionalidad incluida en la correspondiente versión del producto.

Directorio de almacenamiento del servidor de proyectos
Cada versión de TIA Portal se suministra con una versión adecuada del servidor de proyectos.
Existe la posibilidad de definir un directorio de almacenamiento nuevo para el nuevo servidor
de proyectos, o bien de seguir utilizando un directorio de almacenamiento existente de un
servidor de proyectos anterior, en el que se hayan guardado los proyectos V15, por ejemplo,
para la nueva versión del servidor.

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

31

Instalar y desinstalar el servidor de proyectos
6.3 Instalar el servidor de proyectos
Para ello se aplican las reglas siguientes:
● Para utilizar diferentes servidores de forma paralela e independiente entre sí, hay que
configurar puertos y directorios de almacenamiento distintos para los diferentes servidores
a la hora de instalar el nuevo servidor.
● Para poder seguir utilizando un directorio anterior del servidor como ubicación para el
nuevo servidor de proyectos instalado, introduzca el directorio existente cuando configure
el nuevo servidor de proyectos. La ruta de almacenamiento se comprueba durante la
instalación del servidor de proyectos y recibirá un mensaje que le indicará que este
directorio de almacenamiento ya se utiliza para otro servidor.
A continuación, existen las opciones siguientes:
– Puede cancelar la instalación e introducir un directorio de almacenamiento nuevo para
el servidor de proyectos.
– O bien puede actualizar el directorio de almacenamiento para el servidor de proyectos.
Sin embargo, con la actualización el directorio dejará de ser válido para versiones
anteriores del servidor y ya no podrá iniciarse con el anterior servidor.
La actualización del directorio de almacenamiento no afecta a los proyectos de TIA Portal
guardados en el mismo.
Antes de efectuar la actualización se realiza una copia de seguridad interna, de modo que
si la actualización fallara es posible deshacerla.
Si durante la actualización no se producen errores, la función "Deshacer" no está
disponible.
Nota
Directorio de almacenamiento del servidor
El directorio de almacenamiento del servidor de proyectos está bloqueado durante la
instalación del servidor. De este modo se impide que se modifique un directorio de
almacenamiento al que se está accediendo activamente.

Consulte también
Configurar el servidor de proyectos con las Administrative Tools (Página 69)
Configurar el servidor de proyectos con la herramienta de configuración gráfica Configuration
Tool (Página 42)
Utilizar herramientas gráficas (Página 40)
Utilizar herramientas de líneas de comandos (Página 67)

6.3

Instalar el servidor de proyectos

Introducción
El servidor de proyectos puede instalarse en el marco de la instalación de TIA Portal o bien de
forma independiente. Si se instala el servidor de proyectos junto con TIA Portal, también se
instala siempre la versión del servidor de proyectos correspondiente a TIA Portal.

32

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Instalar y desinstalar el servidor de proyectos
6.3 Instalar el servidor de proyectos
Encontrará también una descripción de la instalación automatizada en el directorio
"Documents\Readme\<directorio de idioma>" del DVD de producto.
Nota
Reinstalación previa a la desinstalación
Tenga en cuenta que debe instalar primero el servidor de proyectos más reciente y solo
entonces podrá desinstalar la versión anterior.
Con este procedimiento garantiza que los privilegios de usuario existentes para el servidor
también se puedan aplicar también para el nuevo servidor. Si se borran completamente todos
los servidores de proyectos existentes antes de la instalación, se perderán también las
configuraciones de usuario y deberán reconfigurarse.

Reglas para la instalación
Un equipo puede tener instaladas varias versiones del servidor de proyectos, que pueden
utilizar diferentes versiones de proyecto de TIA Portal.
Versiones de proyecto utilizables
Versiones del servidor de proyectos

Versiones de TIA Portal

Servidor V16

V16, V15.1, V15 y V14

Servidor V15.1

V15.1, V15 y V14

Servidor V15

V15 y V14

Servidor V14

V14

En cualquier caso, hay que asegurarse de que cada versión de TIA Portal y del servidor de
proyectos solo dispone de las funciones contenidas en esta versión.
Multiuser Engineering no actualiza versiones de proyecto.

Requisitos para la instalación
Para instalar el servidor de proyectos se aplican los mismos requisitos que para instalar TIA
Portal.

Instalar el servidor de proyectos con TIA Portal
Para la instalación proceda del siguiente modo:
1. Observe los requisitos para la instalación del paquete de software seleccionado.
2. Inicie el programa de instalación del producto deseado insertando el soporte de datos de
instalación en la unidad de disco correspondiente.
3. Seleccione los ajustes deseados y haga clic en el botón "Instalar".
4. Asegúrese de que el servidor de proyectos está marcado en la selección de productos y
siga las instrucciones de los cuadros de diálogo del programa de instalación.

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

33

Instalar y desinstalar el servidor de proyectos
6.4 Volver a instalar el servidor de proyectos sin perder datos

Resultado
El servidor de proyectos se ha instalado en el equipo junto con TIA Portal.

Instalar el servidor de proyectos de forma independiente
Para la instalación proceda del siguiente modo:
1. Observe los requisitos para la instalación del servidor de proyectos.
2. Inicie el programa para la instalación independiente del servidor de proyectos haciendo
doble clic en el archivo .exe autoextraíble "TIA_Portal_Projekt_Server_V<x.y>.exe".
Encontrará el archivo en el directorio "Support" del DVD de producto correspondiente.
3. Seleccione los ajustes deseados y haga clic en el botón "Instalar".
4. Siga las instrucciones de los cuadros de diálogo del programa de instalación.

Resultado
El servidor de proyectos se ha instalado correctamente en el equipo.

6.4

Volver a instalar el servidor de proyectos sin perder datos

Introducción
Después de borrar un servidor de proyectos previamente instalado, es posible volver a
instalarlo sin perder datos siempre que la estructura de directorios con los datos utilizados
anteriormente siga existiendo y sea accesible para el servidor de proyectos que se instala.

Reglas para la instalación
Un equipo puede tener instaladas varias versiones del servidor de proyectos y de TIA Portal,
aunque no es posible ejecutar más de una versión del servidor con la versión correspondiente
de TIA Portal.
Consulte al respecto: Notas sobre la compatibilidad del servidor de proyectos (Página 31)

Instalación de un servidor de proyectos más reciente
Tenga en cuenta que debe instalar primero el servidor de proyectos más reciente y solo
entonces podrá desinstalar la versión anterior.
Con este procedimiento garantiza que los privilegios de usuario existentes para el servidor
también se puedan aplicar también para el nuevo servidor. Si se borran completamente todos
los servidores de proyectos existentes antes de la instalación, se perderán también las
configuraciones de usuario y deberán reconfigurarse.

34

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Instalar y desinstalar el servidor de proyectos
6.5 Utilizar el servidor de proyectos en una máquina virtual

Requisitos para la instalación
Para instalar el servidor de proyectos V<x.y> se aplican los mismos requisitos que para instalar
TIA Portal V<x.y>.

Volver a instalar el servidor de proyectos de forma independiente
Para la instalación, proceda del siguiente modo:
1. Detenga el servicio del servidor "antiguo" en la Configuration Tool.
2. Inicie el programa para la instalación independiente del servidor de proyectos haciendo
doble clic en el archivo .exe autoextraíble "TIA_Portal_Projekt_Server_V<x.y>.exe", que
está en el directorio "Support" del DVD de producto correspondiente.
3. Seleccione los ajustes deseados y haga clic en el botón "Instalar".
4. Siga las instrucciones de los cuadros de diálogo del programa de instalación.
5. Configure el servidor recién instalado en la Configuration Tool y seleccione el mismo
directorio de archivación que para los servidores "antiguos".
6. Asigne temporalmente un puerto nuevo al servidor recién instalado.
7. Instale el servicio para el nuevo servidor en la Configuration Tool.
8. Ahora, desinstale el servicio para el servidor "antiguo".
9. Desinstale el servidor "antiguo".
10.Vuelva a ajustar el puerto asignado anteriormente al servidor "antiguo".
11.Inicie el servicio para el servidor recién instalado en la Configuration Tool.
12.Ahora puede seguir trabajando en TIA Portal con el servidor de proyectos recién instalado
sin necesidad de más adaptaciones.

Resultado
En el equipo se ha instalado el servidor de proyectos correctamente.

Consulte también
Notas sobre la compatibilidad del servidor de proyectos (Página 31)

6.5

Utilizar el servidor de proyectos en una máquina virtual

Introducción
La instalación del servidor de proyectos permite utilizar la funcionalidad de Multiuser
Engineering, Multiuser Commissioning y Exclusive Engineering disponible en TIA Portal V16.

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

35

Instalar y desinstalar el servidor de proyectos
6.6 Desinstalar el servidor de proyectos
El servidor de proyectos puede instalarse de uno de los modos siguientes:
● Junto con la instalación de TIA Portal.
● Como instalación independiente en un proceso de instalación propio sin TIA Portal.
Nota
Para instalar el servidor de proyectos se requieren derechos de administrador.

Plataformas de virtualización compatibles
Tanto el servidor de proyectos como TIA Portal pueden instalarse también en una máquina
virtual.
Para ello, utilice una de las siguientes plataformas de virtualización en la versión indicada o una
superior:
● VMware vSphere Hypervisor (ESXi) 6.5
● VMware Workstation 12.5.7
● VMware Player 12.5.7
● Microsoft Hyper-V Server 2016

6.6

Desinstalar el servidor de proyectos

Introducción
El servidor de proyectos se puede desinstalar desde el Panel de control.
Nota
Reinstalación previa a la desinstalación
Tenga en cuenta que debe instalar primero el servidor de proyectos más reciente y solo
entonces podrá desinstalar la versión anterior.
Con este procedimiento garantiza que los privilegios de usuario existentes para el servidor
también se puedan aplicar también para el nuevo servidor. Si se borran completamente todos
los servidores de proyectos existentes antes de la instalación, se perderán también las
configuraciones de usuario y deberán reconfigurarse.

Requisitos para la desinstalación
El equipo dispone de una instalación del servidor de proyectos.

36

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Instalar y desinstalar el servidor de proyectos
6.6 Desinstalar el servidor de proyectos

Desinstalar el servidor de proyectos
Para la desinstalación, proceda del siguiente modo:
1. Abra el Panel de control.
2. Haga doble clic en la entrada "Agregar o quitar programas" del Panel de control.
Se abre el cuadro de diálogo "Agregar o quitar programas".
3. Seleccione la entrada del "Servidor de proyectos" en el cuadro de diálogo "Agregar o quitar
programas" y haga clic en el botón "Quitar".
Aparece una consulta de seguridad.
4. Confirme la consulta de seguridad haciendo clic en el botón "Desinstalar".

Resultado
El servidor de proyectos se ha desinstalado del equipo.

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

37

Instalar y desinstalar el servidor de proyectos
6.6 Desinstalar el servidor de proyectos

38

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configurar y administrar el servidor de proyectos
7.1

7

Posibilidades para configurar y administrar el servidor de proyectos

Introducción
Para configurar y administrar el servidor de proyectos existen las siguientes posibilidades:
● utilizar las herramientas gráficas (Configuration Tool y Administration Tool).
● utilizar las herramientas de líneas de comandos (Multiuser Administrative Tools y Multiuser
Power Tools).
Ambos procedimientos permiten configurar y administrar el servidor de proyectos.
Las herramientas gráficas se pueden manejar con comodidad mediante la interfaz de usuario
gráfica. Las herramientas de líneas de comandos tienen un alcance de funciones algo más
amplio que el registro de errores. Aquí es posible comprimir y enviar los registros de errores en
un archivo Zip.
Tiene la posibilidad de aplicar el procedimiento que prefiera.
Con independencia del procedimiento seleccionado, para configurar el servidor de proyectos
se necesitan derechos de administrador.
Para tareas administrativas se requieren en parte derechos de administrador (en la
administración de usuarios) y en parte derechos de usuario.
Nota
Idiomas disponibles
● Las herramientas de configuración y administración del servidor de proyectos solo están
disponibles en inglés para el servidor V14.
● A partir del servidor V15, las herramientas están disponibles en los idiomas de la interfaz de
usuario de TIA Portal.

Configuración y administración con las herramientas gráficas
La herramienta gráfica permite configurar y administrar el servidor de proyectos con toda
comodidad.
Le ofrece una vista general de todas las posibilidades de ajuste, que podrá activar
seleccionando las opciones correspondientes.
Encontrará los procedimientos exactos en: Utilizar herramientas gráficas (Página 40)

Configuración y administración con las herramientas de líneas de comandos
El servidor de proyectos se configura con las Administrative Tools.
Para administrar el servidor de proyectos se emplean las Power Tools.

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

39

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas
Las Power Tools también están disponibles en TIA Portal para llevar a cabo tareas
administrativas en el servidor de proyectos.
Encontrará el procedimiento exacto en: Utilizar herramientas de líneas de comandos
(Página 67)

Nota
Trabajar con las herramientas de líneas de comandos
Para poder trabajar con las herramientas de líneas de comandos debe tener experiencia en el
manejo de entradas en la línea de comandos.
Si carece de esta experiencia, utilice la interfaz de usuario gráfica más cómoda para configurar
y administrar el servidor de proyectos.

Consulte también
Utilizar herramientas de líneas de comandos (Página 67)
Utilizar herramientas gráficas (Página 40)

7.2

Utilizar herramientas gráficas

7.2.1

Introducción a las herramientas gráficas Power Tools

Introducción
El servidor de proyectos se configura y administra cómodamente con las herramientas gráficas
Power Tools:
● Para la configuración del servidor de proyectos utilice la herramienta "Configuration Tool".
● Y para su administración, la herramienta "Administration Tool".
Para la configuración del servidor de proyectos se necesitan en parte derechos de
administrador.

Nota
Idiomas disponibles
● Las herramientas de configuración y administración del servidor de proyectos solo están
disponibles en inglés para el servidor V14.
● A partir del servidor V15, las herramientas están disponibles en los idiomas de la interfaz de
usuario de TIA Portal.

40

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas

Requisitos
El servidor de proyectos está instalado.

Pasos para configurar el servidor de proyectos con la "Configuration Tool"
Para configurar el servidor de proyectos deben llevarse a cabo los pasos siguientes:
● Abra la herramienta gráfica para configurar el servidor con derechos de administrador.
● Abra el menú Inicio haciendo clic en el comando "Inicio" > "Todos los programas" >
"Siemens Automation".
● Haga clic en la entrada "TIA Portal > Project Server V<x.y> - Configuration" para abrir la
Configuration Tool .
● Seleccione el idioma deseado en el pie de página con fondo negro.
● Introduzca los datos de configuración que desee y haga clic en "Instalar servicio".
Encontrará los procedimientos exactos en: Configurar el servidor de proyectos con la
herramienta de configuración gráfica Configuration Tool (Página 42)

Pasos para administrar el servidor de proyectos con la "Administration Tool"
Para administrar el servidor de proyectos deben llevarse a cabo los pasos siguientes:
● Abra la herramienta gráfica para la administración del servidor de proyectos multiusuario.
● Abra el menú Inicio haciendo clic en el comando "Inicio" > "Todos los programas" >
"Siemens Automation".
● Haga clic en la entrada "TIA Portal > "Project-Server V<x.y> - Administration" para abrir la
Administration Tool.
● En la ficha "Administration", agregue una conexión al servidor de proyectos deseado e
introduzca los datos para administrar el servidor.
● En la ficha "Ajustes" se seleccionan los ajustes de idioma y se administran las
confirmaciones y los certificados.
Encontrará los procedimientos exactos en: Administrar el servidor de proyectos con la
herramienta de administración gráfica "Administration Tool" (Página 46)

Consulte también
Configurar el servidor de proyectos con la herramienta de configuración gráfica Configuration
Tool (Página 42)
Administrar el servidor de proyectos con la herramienta de administración gráfica
"Administration Tool" (Página 46)

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

41

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas

7.2.2

Configurar el servidor de proyectos con la herramienta de configuración gráfica
Configuration Tool

Introducción
Para configurar el servidor de proyectos utilice la herramienta gráfica "Configuration Tool".

Requisitos
El servidor de proyectos está instalado.

Funcionalidad de la Configuration Tool
La "Configuration Tool" permite ejecutar las siguientes funciones:
Área "Estado del servidor"
● La primera vez que se abra la Configuration Tool aparecerá el contenido indicado en el
gráfico, que no es editable.
● Finalizada la correcta configuración, el servidor puede desinstalarse, iniciarse o detenerse
con los botones de esta área.
Área "Ajustes de conexión"
● Permite seleccionar los datos de conexión.
Área "Seguridad"
● Si selecciona una conexión https, podrá crear un certificado nuevo o utilizar uno ya
existente.
Área "Memoria"
● Permite seleccionar la ubicación de los proyectos de servidor.
● Permite seleccionar cuántas versiones de proyecto estarán disponibles como "Rollback".
Nota
Espacio en memoria en el servidor de proyectos
Para administrar el proyecto se requiere suficiente espacio libre en memoria en el servidor de
proyectos, en función del número de proyectos guardados, de su tamaño y del número de
revisiones del proyecto previstas.
Básicamente el espacio disponible en memoria debe ser como mínimo cinco veces mayor que
el tamaño esperado del proyecto.
Si se utiliza un número mayor de revisiones del proyecto debe incrementarse en
correspondencia el espacio disponible en memoria. El número de revisiones del proyecto
previstas se define al configurar el servidor de proyectos.
En general debe proporcionarse suficiente espacio en memoria y atenderse o evaluarse los
mensajes del sistema operativo cuando disminuya el espacio disponible en memoria.

42

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas

Nota
Trabajar con Multiuser Commissioning
Cuando se trabaja con Multiuser Commissioning, después de cada carga en la CPU se crea
también automáticamente una nueva revisión del proyecto de servidor.
Con el fin de reducir el espacio necesario en memoria, debería reducirse también el número de
revisiones a un máximo por día y conservar únicamente las revisiones importantes, p. ej.
cuando se alcanza un hito o nivel determinado del proyecto.
Recuerde que cuando se alcanza el número máximo configurado de revisiones se borran
automáticamente las revisiones más antiguas.
El número de revisiones del proyecto que debe guardarse se establece en la Configuration
Tool al configurar el servidor de proyectos. El número máximo es de 100 revisiones.

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

43

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas

Interfaz de usuario de la Configuration Tool
La primera vez que se abre la interfaz de usuario de Configuration Tool aparecerá el siguiente
contenido:

44

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas

Configuración del servidor de proyectos con la herramienta de configuración "Configuration Tool"
Para configurar el servidor de proyectos, haga lo siguiente:
1. Abra la herramienta gráfica para configurar el servidor con derechos de administrador.
Abra el menú Inicio haciendo clic en el comando "Inicio" > "Todos los programas" >
"Siemens Automation".
Haga clic en la entrada "TIA Portal > Project Server V<x.y> - Configuration" para abrir la
Configuration Tool.
Se abrirá la interfaz de usuario de la Configuration Tool.
2. En el área "Ajustes de conexión", seleccione el protocolo deseado.
El ajuste predeterminado activado es "http". El texto con fondo amarillo se ocultará cuando
haga clic en "https".
Con "https" se codifica la comunicación y se solicita un certificado. De este modo, la
comunicación tiene un nivel de seguridad mayor que la comunicación "http" sin cifrar.
3. Si no desea utilizar el ajuste predeterminado, introduzca el puerto deseado para la conexión
con el servidor.
4. En la lista desplegable, seleccione el "Perfil de timeout" deseado para el servidor.
Esto permite definir el comportamiento de tiempo rebasado para el servidor.
Puede elegir entre tres perfiles distintos: "Rápido", "Medio" y "Lento". El ajuste
predeterminado es "Rápido".
5. Área "Seguridad": Si ha seleccionado el protocolo "https", se activará el área "Seguridad".
Seleccione la opción deseada para el certificado.
Puede crear un certificado nuevo o utilizar uno que ya se encuentre en su equipo.
Si activa la primera opción, se creará un certificado nuevo cuando finalice correctamente la
configuración.
Si activa la segunda opción, puede seleccionar el certificado deseado haciendo clic en la
lista de certificados visualizados.
6. En "Memoria", especifique la ubicación deseada para proyectos multiusuario. Puede
introducir la ruta directamente o navegar al lugar deseado con "Examinar".
7. En la siguiente lista desplegable, seleccione el número de versiones de proyecto que deben
guardarse.
En el ajuste predeterminado se guardan diez versiones de proyecto.
Puede elegir un número entre "1" e "Ilimitado" para las versiones de proyecto que deben
guardarse.
8. Para finalizar la configuración, haga clic en "Instalar servicio".

Resultado
Un mensaje le informa de que el servidor de proyectos se ha configurado correctamente.

La URL para el servidor de proyectos y la huella digital del certificado creado se encuentran en
el área "Estado del servidor" bajo "Información de cliente".
Ejemplo: https://XY12345.ww00X.siemens.net:8735/
C35F81B179062BA92A3EAE4DBF18B0DEA9F50D8A

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

45

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas
Si accede al servidor desde la página del cliente, compruebe siempre el certificado para
garantizar una comunicación segura con el servidor de proyectos. Con ello finaliza la
configuración del servidor de proyectos.

Eliminación de errores en la Configuration Tool
Si se producen advertencias o errores, consulte la correspondiente información en
ServerConfiguration.log.

Proceda del siguiente modo:
1. Para abrir ServerConfiguration.log, haga clic en el área con fondo amarillo, en "Abrir
registro".
2. Elimine los errores y las advertencias que se muestran en el archivo de registro.
3. Si no está abierta la Configuration Tool, vuelva a iniciarla.
4. Haga clic en el botón "Instalar servicio".

Resultado
Un mensaje le informa de que el servidor de proyectos se ha configurado correctamente.
Con ello finaliza la configuración del servidor de proyectos.
Nota
Cambios en entradas ya existentes
Para aplicar los cambios realizados en entradas ya existentes en la Configuration Tool, haga
clic en el botón "Aplicar".

7.2.3

Administrar el servidor de proyectos con la herramienta de administración gráfica
"Administration Tool"

Introducción
Para la administración del servidor de proyectos utilice la herramienta gráfica "Administration
Tool".
Nota
Administration Tool
● Para trabajar con la Administration Tool se necesitan derechos de administrador.
● También se dispone de la Administration Tool fuera del servidor de proyectos.

46

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas

Requisitos
El servidor de proyectos está instalado y configurado.
Ya ha creado proyectos en TIA Portal como proyectos de servidor y como mínimo una sesión
local.
Nota
Proyectos de servidor y sesiones locales
Si en TIA Portal aún no ha creado proyectos de servidor ni sesiones locales en el servidor de
proyectos, en la administración de dicho servidor no se le mostrará información al respecto.

Interfaz de la Administration Tool
Abra la herramienta gráfica para la administración del servidor de proyectos.
● Abra el menú Inicio haciendo clic en el comando "Inicio" > "Todos los programas" >
"Siemens Automation".
● Haga clic en la entrada "TIA Portal > Project Server V<x.y> - Administration" para abrir la
Administration Tool.
La interfaz de usuario de la Administration Tool presenta el aspecto siguiente:

Funcionalidad de la Administration Tool
La parte izquierda de esta herramienta contiene dos fichas que permiten cambiar entre los
"Ajustes" y la "Administración".
La "Administración Tool" permite ejecutar las siguientes funciones:
En "Administration" se muestra una lista de las conexiones de servidor configuradas, siempre
que se haya creado una conexión al servidor de proyectos mediante "Agregar conexión de

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

47

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas
servidor". En la vista detallada de la derecha, encontrará información adicional sobre los
objetos seleccionados a la izquierda.
Ambas partes disponen de una barra de herramientas propia para ejecutar las funciones
administrativas mostradas.
Se puede cambiar de vista haciendo clic en el botón "Administración" o en el botón "Ajustes",
según sea el caso.
La ficha "Administración" permite:
● Agregar y borrar servidores
● Agregar y borrar conexiones de servidor
● Actualizar datos
● Definir la administración de usuarios para las conexiones de servidor.
● Administrar sesiones y proyectos multiusuario existentes.
– Definir funciones de usuario para proyectos y sesiones: ("Manager", "Contributor",
"Member")
– Proyectos: Bloquear, desbloquear y borrar
– Sesiones: Mostrar y borrar
● Activar y desactivar el modo de puesta en marcha (Commissioning) para proyectos
● Mostrar "historial": Historial del proyecto con todos los datos y visualización de las
revisiones del proyecto guardadas
● Exportar "historial": El historial del proyecto se exporta como archivo XML con los datos
seleccionados.
● Administrar revisiones.
● Agregar notas de revisión.
La ficha "Ajustes" permite:
● Seleccionar el idioma de la interfaz de usuario
● Seleccionar confirmaciones
● Administrar certificados
Nota
Botón "Cargar de nuevo"
Haciendo clic en este botón se actualiza la visualización del objeto seleccionado en la
Administration Tool .
A continuación, se describen los procedimientos exactos para trabajar con la Administration
Tool .

Consulte también
Configurar el servidor de proyectos con la herramienta de configuración gráfica Configuration
Tool (Página 42)

48

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas

7.2.4

Agregar y borrar nueva conexión de servidor

Introducción
La herramienta gráfica "Administration" permite agregar y borrar nuevas conexiones de
servidor.
Estos comandos pueden ejecutarse tanto desde la barra de herramientas como desde el menú
contextual.

Nota
Administration Tool
Para trabajar con la Administration Tool se necesitan derechos de administrador.

Requisitos
El servidor de proyectos está instalado.
El servidor de proyectos ya se ha configurado.
Ya ha creado proyectos como proyectos de servidor y sesiones locales en TIA Portal.
Nota
Proyectos de servidor y sesiones locales
Si en TIA Portal aún no ha creado proyectos de servidor ni sesiones locales en el servidor de
proyectos, en la administración de dicho servidor no se le mostrará información al respecto.

Agregar nueva conexión de servidor
Proceda del siguiente modo:
1. Abra la herramienta gráfica para la administración del servidor de proyectos.
Abra el menú Inicio haciendo clic en el comando "Inicio" > "Todos los programas" >
"Siemens Automation".
Haga clic en la entrada "TIA Portal > Project Server V<x.y> - Administration" para abrir la
Administration Tool.
2. Haga clic en "Agregar conexión de servidor".

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

49

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas
3. Introduzca en el siguiente cuadro de diálogo los datos de conexión que desee para la
conexión de servidor, como se muestra en el gráfico a modo de ejemplo.

Nota
Datos de conexión para el servidor de proyectos local
Si se desea establecer una conexión con el servidor de proyectos local es necesario
arrancarlo previamente.
El servidor de proyectos local arranca automáticamente cuando se abre una sesión local en
TIA Portal.
Como alternativa, el servidor de proyectos local también puede arrancarse haciendo doble
clic en el archivo "Siemens.Automation.Portal.LocalServer.exe" de la carpeta "bin" del
directorio de instalación de TIA Portal.
Los datos de conexión para el servidor de proyectos local se encuentran en la ventana de
comandos visualizada tras el arranque.
4. Para agregar la conexión de servidor, haga clic en "Agregar".
5. Para activar la conexión y mostrar la lista de proyectos, haga clic en el triángulo de la nueva
conexión de servidor.
6. Si utiliza una conexión "https", se le pedirá que confirme la validez del certificado mostrado.
El protocolo de conexión empleado ya se ha definido en la configuración del servidor de
proyectos en "Ajustes de conexión".
Compare la huella digital del certificado mostrado con el certificado creado durante la
configuración.
Si ambas huellas digitales coinciden, haga clic en "Aceptar".
7. Si el servidor de proyectos no reconoce los datos de inicio de sesión utilizados, se le pedirá
que introduzca unos datos de conexión alternativos para acceder al servidor.
En el cuadro de diálogo que aparece, introduzca los datos de inicio de sesión alternativos
que conoce el servidor de proyectos.

Resultado
La nueva conexión de servidor se muestra en la parte izquierda de la Administration Tool.
A la derecha puede ver el número de proyectos de servidor existentes.

50

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas
Si "expande" la nueva conexión de servidor en la parte izquierda, verá una lista de todos los
proyectos existentes junto con otras posibilidades de ajuste.

Borrar conexión de servidor existente
Proceda del siguiente modo:
1. En la parte izquierda de la Administration Tool, seleccione la conexión de servidor deseada.
2. Haga clic en el botón "Eliminar servidor" o abra el comando "Remove" mediante el menú
contextual.
3. Confirme la consulta siguiente con "Sí".

Resultado
La conexión de servidor seleccionada se borrará.

Accesibilidad del servidor de proyectos
Si no es posible acceder al servidor de proyectos, recibirá un mensaje de error al respecto:
En tal caso, haga lo siguiente:
1. Compruebe los datos de conexión mostrados.
2. Asegúrese de que se inicia el servidor seleccionado.
3. Borre la conexión de servidor no válida haciendo clic en ella y en "Eliminar servidor".
4. Confirme la consulta siguiente con "Sí".
5. Haga clic en "Agregar conexión de servidor" y cree una nueva conexión de servidor a un
servidor de proyectos iniciado con datos de conexión válidos.

Resultado
Se muestra la nueva conexión de servidor con los datos de conexión válidos.

7.2.5

Definir la administración de usuarios para el servidor de proyectos y los proyectos
de servidor

Introducción
Con la herramienta gráfica "Administration Tool", defina en la "Administración de usuarios"
debajo del proyecto los derechos para trabajar con conexiones del servidor de proyectos, con
proyectos de servidor y con sesiones locales. El sistema de derechos se basa en los derechos
de acceso a Windows para carpetas y archivos.
Encontrará la entrada "Administración de usuarios" en la Administration Tool tanto debajo de
cada conexión de servidor como debajo de cada proyecto y de cada sesión local. Los

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

51

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas
correspondientes permisos se definen dependiendo de dónde se abra la "Administración de
usuarios".
Con la "Administración de usuarios" se definen permisos explícitos personales para las
siguientes funciones:
● Manager (acceso completo);
● Contributor (acceso parcial, sin borrado);
● Member (permiso de lectura).
Nota
Administración de usuarios
● Tenga en cuenta que cuando se asignan derechos de usuario para un proyecto no se crean
automáticamente derechos de usuario para todo el servidor de proyectos.
● En calidad de administrador, es preferible que agregue grupos de usuarios a la
administración de usuarios, en lugar de usuarios individuales.
Ejemplo: un grupo de usuarios de 10 personas supone para el servidor una carga menor
que si se agregaran 10 usuarios individuales a la administración de usuarios.

Para cada función puede ejecutar las siguientes funciones con los botones:
● "Agregar": agrega usuarios nuevos con las correspondientes autorizaciones.
● "Eliminar el usuario seleccionado": elimina el usuario seleccionado.
● "Subir de categoría al usuario seleccionado": Desplaza el usuario seleccionado hacia
arriba, al grupo de autorizaciones inmediatamente superior.
● "Degradar el usuario seleccionado": Desplaza el usuario seleccionado hacia abajo, al
grupo de autorizaciones inmediatamente inferior.
Los derechos definidos para las conexiones de servidor los heredan las autorizaciones para
proyectos y sesiones locales.
Nota
Administration Tool
● Para trabajar con la "Administración de usuarios" se necesitan derechos de administrador.
● Después de cambiar permisos es necesario reiniciar el proyecto.

Requisitos
El servidor de proyectos está instalado.
El servidor de proyectos ya se ha configurado.

52

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas
Ya ha creado proyectos como proyectos de servidor y sesiones locales en TIA Portal.
Nota
Proyectos de servidor y sesiones locales
Si en TIA Portal aún no ha creado proyectos de servidor ni sesiones locales en el servidor de
proyectos, en la administración de dicho servidor no se le mostrará información al respecto.

Asignar derechos de acceso
Proceda del siguiente modo:
1. Abra la herramienta gráfica para la administración del servidor de proyectos.
– Abra el menú Inicio haciendo clic en el comando "Inicio" > "Todos los programas" >
"Siemens Automation".
– Haga clic en la entrada "TIA Portal > Project Server V<x.y> - Administration" para abrir
la Administration Tool.
2. Haga doble clic bajo la entrada deseada en la parte izquierda en "Administración de
usuarios".
– Haciendo clic en "Administración de usuarios" debajo de un servidor se asignan los
derechos para trabajar con ese servidor.
– Haciendo doble clic en "Administración de usuarios" debajo de un proyecto se asignan
los derechos para trabajar con ese proyecto.
3. La "Administración de usuarios" se abre y se muestra en la parte derecha los ajustes
posibles. Ya puede ver qué derechos se han asignado para la correspondiente conexión de
servidor. Estos derechos los heredan los proyectos.

4. Haga clic en "Agregar" para agregar usuarios nuevos para las funciones mostradas.

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

53

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas
5. Introduzca los datos necesarios en el siguiente cuadro de diálogo de Windows y haga clic
en "Aceptar".
6. Los botones "Subir de categoría al usuario seleccionado" y "Degradar el usuario
seleccionado" permiten desplazar a los usuarios hacia abajo y hacia arriba hasta otros
grupos de permisos.
7. El botón "Eliminar el usuario seleccionado" permite eliminar al usuario seleccionado.
8. Asigne los derechos y funciones que desee mediante la "Administración de usuarios" tanto
para el servidor como para los proyectos y sesiones subordinados.

7.2.6

Gestionar alarmas

Introducción
Con la herramienta gráfica "Administration Tool", en la ficha "Administration" > "Advertencia"
podrá ver y gestionar los mensajes de advertencia existentes para el servidor de proyectos.
Con ayuda de los mensajes de advertencia puede transferirse información del servidor al
administrador.
Cuando aparezca un número entre paréntesis detrás de la entrada "Alarma", significará que
existe este número de mensajes de advertencia.
La entrada "Alarma" está disponible tanto debajo del servidor como debajo de los distintos
proyectos.
Se muestran los mensajes de advertencia siguientes:
● Una alarma de servidor en cuanto queden menos de 3 GB de espacio libre en la unidad en
la que se encuentra el directorio.
● Una alarma de proyecto para cada sesión local entre la que medien más de 5 revisiones.

Requisitos
El servidor de proyectos está instalado y configurado.
Ya ha creado proyectos en TIA Portal como proyectos de servidor y como mínimo una sesión
local.
Nota
Proyectos de servidor y sesiones locales
Si en TIA Portal aún no ha creado proyectos de servidor ni sesiones locales en el servidor de
proyectos, en la administración de dicho servidor no se le mostrará información al respecto.

54

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas

Administrar certificados
Proceda del siguiente modo:
1. Abra la herramienta gráfica para la administración del servidor de proyectos.
– Abra el menú Inicio haciendo clic en el comando "Inicio" > "Todos los programas" >
"Siemens Automation".
– Haga clic en la entrada "TIA Portal > Project Server V<x.y> - Administration" para abrir
la Administration Tool.
2. En la parte izquierda, haga clic en la ficha "Administración" en "Alarma". Hay mensajes de
advertencia tanto para el servidor de proyectos como para los distintos proyectos.
Se muestran todos los mensajes de advertencia existentes para el servidor de proyectos
seleccionado.
3. En caso de que ya no necesite una alarma y de que la desee borrar, selecciónela y haga
clic después en el botón "Borrar alarma seleccionada".
Resultado: la alarma seleccionada se borra de la lista.

7.2.7

Administrar proyectos de servidor y sesiones locales

Introducción
Con la "Administration Tool" se administran las sesiones creadas para un proyecto de servidor.
Se entiende por "sesiones" las sesiones locales existentes para el proyecto de servidor
seleccionado.
Encontrará la entrada "Sesiones" en la "Administration Tool" debajo de cada proyecto.

Requisitos
El servidor de proyectos está instalado y configurado.
Ya ha creado proyectos en TIA Portal como proyectos de servidor y como mínimo una sesión
local.

Nota
Proyectos de servidor y sesiones locales
Si en TIA Portal aún no ha creado proyectos de servidor ni sesiones locales en el servidor de
proyectos, en la administración de dicho servidor no se le mostrará información al respecto.

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

55

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas

Mostrar detalles de proyectos y administrar proyectos
Proceda del siguiente modo:
1. Inicie la "Administration Tool".
– Abra el menú Inicio haciendo clic en el comando "Inicio" > "Todos los programas" >
"Siemens Automation".
– Haga clic en la entrada "TIA Portal > Project Server V<x.y>- Administration" para abrir
la Administration Tool.
2. Haga clic en el proyecto que desee para visualizar en la parte derecha los detalles del
proyecto.
Se mostrará la siguiente información sobre los proyectos:
"Nombre del proyecto": muestra el nombre del proyecto
"Estado": muestra el estado del proyecto ("bloqueado" o "desbloqueado").
"Modo de operación": indica si se ha seleccionado el modo de ingeniería (Engineering) o el
modo de puesta en marcha (Commissioning).
"Creado por / fecha": usuario que ha creado el proyecto, y fecha de creación del proyecto.
"Editado por última vez por / fecha": usuario que ha modificado el proyecto por última vez,
y fecha de modificación del proyecto.
"Número de sesiones locales": número de sesiones locales correspondientes al proyecto.
"Comentario": visualización del comentario al proyecto, en caso de que exista.

3. Para borrar un proyecto, seleccione el proyecto correspondiente y a continuación haga clic
en el botón "Borrar proyecto".
Solo pueden borrarse los proyectos para los que no hay ninguna sesión local.
4. Confirme la consulta posterior sobre si desea borrar el proyecto.
5. Para desbloquear un proyecto bloqueado, seleccione el proyecto correspondiente y a
continuación haga clic en el botón "Desbloquear proyecto".
6. Confirme la consulta posterior sobre si desea desbloquear el proyecto.
7. Haga clic en el botón "Multiuser Commissioning" para cambiar al "modo de puesta en
marcha (Commissioning)". El botón se activa y se muestra con fondo azul.
Cuando se activa el modo de puesta en marcha se activa también al mismo tiempo la
opción "Antes de cargar, comprobar si hay datos que no coinciden (recomendado)".
8. Vuelva a hacer clic en el botón "Multiuser Commissioning" para salir del "modo de puesta
en marcha (Commissioning)" y regresar al "modo de ingeniería (Engineering)".

56

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas

Mostrar y borrar sesiones locales
Proceda del siguiente modo:
1. Abra la herramienta gráfica para la administración del servidor de proyectos.
– Abra el menú Inicio haciendo clic en el comando "Inicio" > "Todos los programas" >
"Siemens Automation".
– Haga clic en la entrada "TIA Portal > Project Server V<x.y> - Administration" para abrir
la Administration Tool.
2. Bajo el proyecto multiusuario deseado, haga clic en la parte izquierda en "Sesiones locales".
3. En la parte derecha, en "Administration Tool", se mostrará la siguiente información sobre
las sesiones locales existentes.
"ID": incrementa el número de la sesión existente.
"Ruta local": muestra el espacio en memoria que puede ajustarse localmente para las
sesiones.
"Nombre de equipo": muestra el nombre del equipo en el que está la sesión.
"Utilizado por última vez por": muestra el nombre del último usuario.
"Revisión del proyecto": indica la revisión del proyecto a la que pertenece la sesión
correspondiente.

4. Seleccione la sesión deseada y haga clic en el botón "Borrar la sesión seleccionada" para
borrarla.
5. En el siguiente cuadro de diálogo haga clic en "Aceptar" para borrar la sesión seleccionada.
Nota
Número de revisiones del proyecto
El número de revisiones del proyecto previstas se define al configurar el servidor de proyectos.
Consulte al respecto: Configurar el servidor de proyectos con la herramienta de configuración
gráfica Configuration Tool (Página 42)

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

57

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas

Consulte también
Configurar el servidor de proyectos con la herramienta de configuración gráfica Configuration
Tool (Página 42)

7.2.8

Mostrar el historial de proyectos

Introducción
Con la herramienta gráfica "Administration Tool" se visualiza el historial de los proyectos
creados y se administran las revisiones existentes del proyecto.
Existen las funciones siguientes:
● Revertir a la revisión seleccionada
● Exportar la revisión seleccionada
● Exportar historial
● Conservar revisión
● Ver detalles
● Borrar datos de la revisión (desde el menú contextual)
Encontrará la entrada "Historial" en la "Administration Tool" debajo de cada proyecto.

Requisitos
El servidor de proyectos está instalado y configurado.
Ya ha creado proyectos en TIA Portal como proyectos de servidor y como mínimo una sesión
local.
Nota
Proyectos de servidor y sesiones locales
Si en TIA Portal aún no ha creado proyectos de servidor ni sesiones locales en el servidor de
proyectos, en la administración de dicho servidor no se le mostrará información al respecto.

58

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas

Mostrar el historial
Proceda del siguiente modo:
1. Abra la herramienta gráfica para la administración del servidor de proyectos.
– Abra el menú Inicio haciendo clic en el comando "Inicio" > "Todos los programas" >
"Siemens Automation".
– Haga clic en la entrada "TIA Portal > Project Server V<x.y> - Administration" para abrir
la Administration Tool.
2. Bajo el proyecto de servidor deseado, haga clic en la parte izquierda en "Historial".
El historial muestra todas las revisiones existentes del proyecto.
En la parte derecha, en "Administration Tool", aparece la siguiente información sobre las
revisiones existentes.
"Disponibilidad": indica si la sesión está todavía disponible en el servidor.
"Número de revisión": indica el número de revisión.
"Nombre de equipo": indica el nombre del equipo en el que se creó la revisión.
"Creado por": muestra el nombre del autor.
"Fecha de creación": indica la fecha de creación de la revisión.
"Comentario": muestra el comentario, en caso de que exista.
"Notas": muestra el número de notas relacionadas con la revisión, si las hay. Las notas
pueden verse en la vista detallada.

3. El botón "Retroceder a la revisión seleccionada" permite retroceder hasta la revisión
seleccionada de una sesión seleccionada.
Después se crea una línea nueva que muestra la nueva revisión, con el comentario
"Rollback to Revision <número>".
4. Para exportar una revisión, haga clic en el botón "Exportar la revisión seleccionada".
En el cuadro de diálogo siguiente seleccione la ubicación deseada y haga clic en "Aceptar".
5. Para exportar el historial del proyecto como archivo XML, seleccione las revisiones
deseadas y haga clic en el botón "Exportar historial".
Introduzca los datos necesarios en el siguiente cuadro de diálogo y haga clic en "Guardar".
6. Para almacenar una revisión, haga clic en el botón "Conservar revisión".
En el cuadro de diálogo siguiente, introduzca una nota relacionada con la revisión que debe
conservarse y haga clic en "Conservar revisión".
Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

59

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas

Exportar el historial a un archivo XML
Proceda del siguiente modo:
1. Seleccione las revisiones deseadas y haga clic en el botón "Exportar historial".
2. Introduzca los datos necesarios en el siguiente cuadro de diálogo y haga clic en "Guardar".

7.2.9

Administrar revisiones

Introducción
Con la herramienta gráfica "Administration Tool" se administran las revisiones existentes del
proyecto.
Existen las funciones siguientes:
● Revertir a la revisión seleccionada
● Exportar la revisión seleccionada
● Conservar revisión
● Ver detalles
● Borrar datos de la revisión (desde el menú contextual)
Encontrará la entrada "Historial" en la "Administration Tool" debajo de cada proyecto.

Requisitos
El servidor de proyectos está instalado y configurado.
Ya ha creado proyectos en TIA Portal como proyectos de servidor y como mínimo una sesión
local.
Nota
Proyectos de servidor y sesiones locales
Si en TIA Portal aún no ha creado proyectos de servidor ni sesiones locales en el servidor de
proyectos, en la administración de dicho servidor no se le mostrará información al respecto.

Revertir a la revisión seleccionada
Proceda del siguiente modo:
1. Seleccione la revisión deseada o varias revisiones y haga clic en el comando "Retroceder
a la revisión seleccionada" del menú contextual.
Después se crea una línea nueva que muestra la nueva revisión, con el comentario
"Rollback to Revision <número>".

60

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas

Exportar la revisión seleccionada
Proceda del siguiente modo:
1. Seleccione la revisión deseada o varias revisiones y haga clic en el comando "Exportar la
revisión seleccionada" del menú contextual.
2. En el cuadro de diálogo siguiente seleccione la ubicación deseada y haga clic en "Aceptar".

Conservar revisión
Proceda del siguiente modo:
1. Haga clic en el botón "Conservar revisión".
2. En el cuadro de diálogo siguiente, introduzca una nota relacionada con la revisión que debe
conservarse y haga clic en "Conservar revisión".

Mostrar los detalles de una revisión
Dentro del historial de las versiones de proyecto existe la posibilidad de visualizar información
adicional sobre la revisión seleccionada en una ventana de detalles pulsando el botón "Mostrar
detalles".
● En la ficha "Detalles" es posible agregar notas.
Para ello, haga clic en el enlace e introduzca la nota deseada en el cuadro de diálogo que
aparece.
Haga clic en el botón "Agregar nota" para aplicar la nota.
● En la ficha "Objetos modificados" se ven todos los cambios realizados en el proyecto
seleccionado.

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

61

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas

Borrar datos de la revisión
Proceda del siguiente modo:
1. Seleccione la revisión deseada o varias revisiones y haga clic en el comando "Borrar datos
de la revisión" del menú contextual.
2. Confirme la consulta del cuadro de diálogo posterior con "Aceptar".
Resultado:
Los datos de la revisión seleccionada se borran. Toda la información relevante sobre el
historial de cambios de la revisión se conserva.
La revisión deja de mostrarse en "Disponibilidad" y ya no es posible retroceder a dicha revisión.

Nota
No es posible borrar los datos de las siguientes revisiones:
● Revisiones que se muestran sin símbolo en la columna "Disponibilidad". No es posible
acceder a dichas revisiones.
● Revisiones que tienen la marca "Conservar". Estas revisiones ya se han marcado como
"guardadas".
● La última revisión existente de un proyecto.
Si se intenta borrar los datos de una de las revisiones citadas anteriormente, se mostrará un
mensaje de error.

7.2.10

Cambiar entre modo de ingeniería y modo Multiuser Commisioning

Introducción
La herramienta gráfica "Administration Tool" permite cambiar entre el modo de ingeniería
(Engineering) y el modo de puesta en marcha (Commissioning). El ajuste del modo es válido
siempre para todas las sesiones locales de un proyecto de servidor. Las sesiones locales
deben estar todas en el modo de ingeniería (Engineering) o en el modo de puesta en marcha
(Commisioning). El modo de ingeniería (Engineering) es el ajuste predeterminado.
Cuando se cambia al modo de puesta en marcha (Commissioning), se activa también
automáticamente el botón "Comprobar si difieren los datos antes de cargar (recomendado)".
Es el ajuste recomendado para trabajar con Multiuser Commissioning. La comprobación
ajustada garantiza que no se carguen en la CPU datos que difieran del proyecto del servidor.
Esto puede suceder, por ejemplo, cuando se ha realizado el check in en el proyecto del
servidor en una sesión local anterior sin cargar en la CPU.
En caso de que existan diferencias entre los datos que hay en el proyecto del servidor y los
datos que se cargan en la CPU, aparece un cuadro de diálogo que informa sobre la forma de
proceder.
Los datos que difieren pueden depurarse en la vista del proyecto de servidor.

62

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas

Requisitos
El servidor de proyectos está instalado y configurado.
Ya ha creado proyectos en TIA Portal como proyectos de servidor y como mínimo una sesión
local.
Nota
Proyectos de servidor y sesiones locales
Si en TIA Portal aún no ha creado proyectos de servidor ni sesiones locales en el servidor de
proyectos, en la administración de dicho servidor no se le mostrará información al respecto.

Activar y desactivar el modo de puesta en marcha (Commisioning)
Proceda del siguiente modo:
1. Abra la herramienta gráfica para la administración del servidor.
– Abra el menú Inicio haciendo clic en el comando "Inicio" > "Todos los programas" >
"Siemens Automation".
– Haga clic en la entrada "TIA Portal > Project Server V<x.y> - Administration" para abrir
la Administration Tool.
2. En "Administration" se muestra una lista de las conexiones de servidor configuradas,
siempre que se haya creado una conexión al servidor de proyectos mediante "Agregar
conexión de servidor". En la vista detallada de la derecha, encontrará información adicional
sobre los objetos seleccionados a la izquierda.

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

63

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas
3. Seleccione el servidor en el lado izquierdo y elija el proyecto para el que desea configurar
el modo Multiuser Commisioning.
4. En el encabezado del lado derecho haga clic en el botón "Multiuser Commissioning" para
activar el modo de puesta en marcha (Commisioning).
– En cuanto se activa el botón, se muestra sobre fondo azul y sobre el proyecto
seleccionado en el lado izquierdo se superpone el símbolo de puesta en marcha
(Commissioning).
– Con el modo de puesta en marcha se activa también la opción "Antes de cargar,
comprobar si hay datos que no coindicen (recomendado)".

Para volver a cerrar el "modo de puesta en marcha (Commisioning)", vuelva a hacer clic en
el botón "Multiuser Commissioning" de la barra de herramientas.
– En cuanto se desactiva el botón, este se muestra sin fondo azul y en el proyecto
seleccionado a la izquierda desaparece el símbolo superpuesto.
– Con el modo de puesta en marcha (Commissioning) se desactiva también el botón
"Comprobar si difieren los datos antes de cargar (recomendado)" .

Resultado
El "modo de puesta en marcha (Commisioning)" se activa haciendo clic en el botón "Multiuser
Commissioning" y se desactiva volviendo a hacer clic en dicho botón.

7.2.11

Seleccionar el idioma de la interfaz de usuario

Introducción
Con la "Administration Tool" gráfica, en la ficha "Configuración" > "General" puede seleccionar
el idioma deseado de la interfaz de usuario.
Están disponibles los seis idiomas de TIA Portal.

Requisitos
El servidor de proyectos está instalado y configurado.

64

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas
Ya ha creado proyectos en TIA Portal como proyectos de servidor y como mínimo una sesión
local.
Nota
Proyectos de servidor y sesiones locales
Si en TIA Portal aún no ha creado proyectos de servidor ni sesiones locales en el servidor de
proyectos, en la administración de dicho servidor no se le mostrará información al respecto.

Cambiar el idioma
Proceda del siguiente modo:
1. Abra la herramienta gráfica para la administración del servidor.
– Abra el menú Inicio haciendo clic en el comando "Inicio" > "Todos los programas" >
"Siemens Automation".
– Haga clic en la entrada "TIA Portal > Project Server V<x.y> - Administration" para abrir
la Administration Tool.
2. En la parte izquierda, haga clic en la ficha "Ajustes" > "General".
En el área "Idioma", seleccione el idioma deseado de la interfaz de usuario en la lista
desplegable.

Resultado
Los textos de la interfaz de usuario se muestran en el idioma seleccionado.

7.2.12

Mostrar confirmaciones

Introducción
Con la "Administration Tool" gráfica, en la ficha "Ajustes" > "General" puede seleccionar las
acciones para las que se activan confirmaciones al trabajar con Multiuser Engineering .
Si se desea realizar alguna de las acciones seleccionadas a continuación, aparecerá una
consulta en forma de cuadro de diálogo para confirmar de nuevo esta acción antes de
ejecutarla.
Pueden seleccionarse confirmaciones para trabajar en las siguientes áreas:
● Administración de usuarios
● Borrar conexión de servidor
● Borrar sesión local
● Desbloquear proyecto
● Exportar revisión a una carpeta que no esté vacía

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

65

Configurar y administrar el servidor de proyectos
7.2 Utilizar herramientas gráficas
● Borrar notificación
● Publicar revisión

Requisitos
El servidor de proyectos está instalado y configurado.
Ya ha creado proyectos en TIA Portal como proyectos de servidor y como mínimo una sesión
local.
Nota
Proyectos de servidor y sesiones locales
Si en TIA Portal aún no ha creado proyectos de servidor ni sesiones locales en el servidor de
proyectos, en la administración de dicho servidor no se le mostrará información al respecto.

Seleccionar confirmación
Proceda del siguiente modo:
1. Abra la herramienta gráfica para la administración del servidor.
– Abra el menú Inicio haciendo clic en el comando "Inicio" > "Todos los programas" >
"Siemens Automation".
– Haga clic en la entrada "TIA Portal > Project Server V<x.y> - Administration" para abrir
la Administration Tool.
2. En la parte izquierda, haga clic en la ficha "Ajustes" > "General".
3. En "Confirmaciones", seleccione las acciones deseadas.
– Con el botón "Todas" puede activar confirmaciones para todas las entradas.
– Con el botón "Ninguna" puede desactivar confirmaciones para todas las entradas.
Resultado: en cuanto se realice alguna de las acciones seleccionadas, aparecerá una consulta
en forma de cuadro de diálogo para confirmar de nuevo esta acción antes de ejecutarla.

7.2.13

Administrar certificados

Introducción
Con la herramienta gráfica "Administration Tool", en la ficha "Ajustes" > "Certificados" podrá
ver y gestionar los certificados existentes para el servidor de proyectos. En cuanto se
selecciona "https" para la conexión de servidor, se genera un certificado.
Los certificados que ya no se necesiten pueden borrarse tan pronto como dejen de utilizarse.
Si intenta borrar un certificado que se está utilizando en una conexión de servidor activa,
recibirá la información correspondiente.

66

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configurar y administrar el servidor de proyectos
7.3 Utilizar herramientas de líneas de comandos

Requisitos
El servidor de proyectos está instalado y configurado.
Ya ha creado proyectos en TIA Portal como proyectos de servidor y como mínimo una sesión
local.
Nota
Proyectos de servidor y sesiones locales
Si en TIA Portal aún no ha creado proyectos de servidor ni sesiones locales en el servidor de
proyectos, en la administración de dicho servidor no se le mostrará información al respecto.

Administrar certificados
Proceda del siguiente modo:
1. Abra la herramienta gráfica para la administración del servidor.
– Abra el menú Inicio haciendo clic en el comando "Inicio" > "Todos los programas" >
"Siemens Automation".
– Haga clic en la entrada "TIA Portal > Project Server V<x.y> - Administration" para abrir
la Administration Tool.
2. En la parte izquierda, haga clic en la ficha "Ajustes" > "Certificados".
Se muestran todos los certificados existentes para el servidor de proyectos seleccionado
con los datos correspondientes.
3. En caso de que ya no necesite un certificado y desee borrarlo, selecciónelo y haga clic
después en el botón "Eliminar la confirmación de certificado seleccionada".

Resultado
El certificado seleccionado se borra de la lista. Si el certificado se está utilizando en una
conexión de servidor activa, recibirá el aviso de que no se borrará hasta después del siguiente
reinicio.

7.3

Utilizar herramientas de líneas de comandos

7.3.1

Introducción a las herramientas de la línea de comandos

Introducción
El servidor de proyectos se configura y administra utilizando las Administrative Tools y las
Power Tools.
Para configurar el servidor de proyectos con las Administrative Tools se necesitan derechos de
administrador.

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

67

Configurar y administrar el servidor de proyectos
7.3 Utilizar herramientas de líneas de comandos
Para las tareas de administración con las Power Tools se necesitan derechos de usuario.
Las Power Tools también están disponibles en TIA Portal para llevar a cabo tareas
administrativas en el servidor de proyectos.

Requisitos
El servidor de proyectos está instalado.

Pasos para la configuración del servidor de proyectos con las Administrative Tools
El servidor se instala y administra mediante un comando de la línea de comandos.
Para configurar el servidor de proyectos deben llevarse a cabo los pasos siguientes:
● Abra las Administrative Tools con derechos de administrador.
● La instalación completa se ejecuta con el comando:
musrv install –r d:\TIA\SRV –p 5080 –b https
● El directorio del proyecto (Repository) se crea de forma automática.
● La definición del protocolo y la dirección del puerto ya están incluidas en este comando,
igual que la administración de certificados integrada para una comunicación HTTPS
segura.
● La creación de certificados nuevos y la selección de los certificados existentes se realiza
con herramientas de Windows.
● Aquí encontrará comandos adicionales para configurar el servidor de
proyectos: Comandos para configurar el servidor de proyectos (Página 71)
Nota
Habilitación del puerto del cortafuegos
Para el acceso al servidor de proyectos se habilita automáticamente el puerto indicado en el
cortafuegos.

Administración del servidor de proyectos con las Power Tools
Para administrar el servidor de proyectos deben llevarse a cabo los pasos siguientes después
de instalar el servidor:
● Para el acceso al servidor de proyectos debe haberse habilitado, en su caso, un puerto en
el cortafuegos.
● Para la administración del servidor de proyectos deben abrirse las Power Tools o la
administración del servidor.
● Aquí encontrará comandos adicionales para administrar el servidor de
proyectos: Comandos para administrar el servidor de proyectos (Página 74)

68

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configurar y administrar el servidor de proyectos
7.3 Utilizar herramientas de líneas de comandos

Administración de usuarios y derechos
La administración de usuarios y derechos para el servidor de proyectos se basa en la
administración de usuarios para las cuentas de usuario de Windows.
● Es posible asignar derechos proyecto por proyecto.
● El uso de directivas de grupo permite asignar derechos de forma simple, rápida y clara.

Administración de proyectos
La administración de proyectos ofrece una visión rápida de los proyectos existentes y de las
sesiones locales correspondientes.
Los proyectos de servidor y las sesiones locales pueden administrarse con toda comodidad.
Existe la posibilidad de automatizar la administración de proyectos mediante scripts (batchfiles).

Mensajes de error
Si una acción no puede ejecutarse correctamente, se recibe un mensaje de error al respecto.
Encontrará las descripciones de los errores en las herramientas correspondientes, llamando
la ayuda de las mismas:
Llamada de ayuda para las Administrative Tools:
● Abra las Administrative Tools del siguiente modo:
● Copie el comando "musrv" en la línea de comandos y pulse la tecla Intro.
Llamada de ayuda para las Power Tools:
● Abra las Power Tools del siguiente modo:
● Copie el comando "mupt" en la línea de comandos y pulse la tecla Intro.

Consulte también
Comandos para configurar el servidor de proyectos (Página 71)
Comandos para administrar el servidor de proyectos (Página 74)

7.3.2

Configurar el servidor de proyectos con las Administrative Tools

Introducción
Antes de poder utilizar el servidor de proyectos externo instalado en el contexto de Multiuser
Engineering debe configurarse el servidor.
Si configura el servidor de proyectos con las Administrative Tools , utilice los comandos
descritos a continuación, que se ejecutan desde la línea de comandos.

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

69

Configurar y administrar el servidor de proyectos
7.3 Utilizar herramientas de líneas de comandos
Las acciones siguientes se llevan a cabo de forma automatizada al introducir el comando
"Install" descrito más abajo:
● Se instala el servicio de Windows para el servidor de proyectos.
● Se agrega una autorización del cortafuegos para el puerto indicado por medio de una
conexión TCP.
● Se instala la vigilancia del rendimiento para poder observar el servidor de proyectos.
● Se crea el directorio de almacenamiento "Repository" en caso de no existir.
● Se define el "Binding", si desea utilizar el protocolo de transferencia "http" o "https"
(recomendado).
● Se transfiere la "huella digital" al servidor para confirmar un certificado válido.
A partir de ahora puede utilizarse el servidor de proyectos.

Nota
Para la configuración del servidor de proyectos se necesitan derechos de administrador.

Requisitos
El servidor de proyectos está instalado.
Nota
Tanto los comandos como las ayudas y los textos informativos correspondientes de la línea de
comandos están únicamente en inglés.

Procedimiento
Para configurar el servidor de proyectos, haga lo siguiente:
1. Abra la herramienta para configurar el servidor con derechos de administrador. Para ello,
en el directorio de instalación de TIA Portal, en "bin", haga doble clic en el archivo
"start-musrv.bat".
2. Copie el comando siguiente para la configuración del servidor con los parámetros
deseados en la línea de comandos y pulse la tecla Intro.
Comando:
=> musrv install -r <repository-path> -p <port> -b <binding> -h
<certificate-hash>
Ejemplo de entrada:
musrv install -r c:\TIA\SERVER -p 5080 -b https -h <certificatehash>
3. Si el comando "musrv install" no se ha ejecutado correctamente, aparecerá un mensaje de
error y podrá leer una explicación.
Una vez se han ejecutado correctamente estos comandos, el servidor de proyectos está
configurado.

70

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configurar y administrar el servidor de proyectos
7.3 Utilizar herramientas de líneas de comandos

Ejemplo de configuración
Si no se introducen parámetros, el sistema pregunta por los parámetros necesarios.
Comando

Descripción

Definir "Repository-path"

Introduzca el nombre y la ruta del directorio (Repository) en el que el servidor
debe depositar los datos.

Utilizado en el ejemplo anterior:
-r c:\TIA\SERVER

Si se introduce un directorio nuevo que todavía no existe, el sistema lo crea
automáticamente.
Nota importante:
Este directorio y el almacenamiento de datos se conservan incluso después
de borrar el servidor.
En caso de volver a instalar el servidor de proyectos después de borrarlo y de
introducir un directorio existente como "Repository", estos datos estarán dis‐
ponibles sin restricción alguna en el servidor nuevo.

Definir "Port"
Utilizado en el ejemplo anterior:

Introduzca el puerto que debe utilizarse para la comunicación con el servidor
de proyectos.

-p 5080
Definir "Binding"
Utilizado en el ejemplo anterior:
-b https

Defina si desea utilizar el protocolo de transferencia "https" (recomendado) o
"http".
Con "https" se codifica la comunicación y se solicita un certificado. De este
modo, la comunicación tiene un nivel de seguridad mayor que la comunica‐
ción "http" sin cifrar.

"Certificate hash" = huella digital para el cer‐ Introduzca la huella digital para el certificado generado o utilizado para una
tificado utilizado
comunicación segura con el servidor.
Encontrará más información sobre la generación de un certificado en la ayuda
del sistema operativo Windows utilizado.
"Run service" = iniciar servicio

Con ello se inicia el servicio de Windows para el servidor de proyectos.

Ejemplo:
musrv start

Aquí encontrará comandos adicionales para configurar el servidor de proyectos: Comandos
para configurar el servidor de proyectos (Página 71)

Consulte también
Comandos para configurar el servidor de proyectos (Página 71)

7.3.3

Comandos para configurar el servidor de proyectos

Introducción
Los comandos para configurar el servidor de proyectos están disponibles en las Administrative
Tools .
Tenga en cuenta el procedimiento básico para configurar el servidor de proyectos: Configurar
el servidor de proyectos con las Administrative Tools (Página 69)

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

71

Configurar y administrar el servidor de proyectos
7.3 Utilizar herramientas de líneas de comandos

Nota
Tanto los comandos como las ayudas y los textos informativos correspondientes de la línea de
comandos están únicamente en inglés.

Comandos para configurar el servidor de proyectos
Están disponibles los comandos listados a continuación:
Comando

Descripción

Entradas posibles

"Install"

Instala el servidor de proyectos y per‐
mite la comunicación con el servidor.

Parámetros:

Encontrará un ejemplo de configura‐
ción en:
Configurar el servidor de proyectos con
las Administrative Tools (Página 69)

● -r, --repository: directorio en el que se guardan los datos
del servidor.
● -p, --port: número de puerto para el acceso al servidor
● -b, --binding: definición del protocolo para la comunicación
(http o https)
● -d, --debug: (opcional): define si el servidor muestra
información de depuración de runtime.
Nota: Si se utiliza la opción "-d" no se muestran registros
de depuración.
● -h, --certhash: huella digital del certificado que debe
emplearse para una transferencia de datos segura (solo
es necesaria para https).
● -t, --timeout: (opcional): define el perfil de timeout utilizado
("fast", "middle" o "slow"). Valor predeterminado: "fast".
● -f, --force: (opcional): activa el comando sin más consultas
● -c, --count: número máximo (de 1 a 10) de versiones
guardadas del proyecto.
Ejemplo:
musrv install -r <repository-path> -p <port>
-b <binding> -h <certificate-hash>

"Config"

Muestra la configuración actual del ser‐ Parámetros:
vidor de proyectos y ofrece parámetros ● -t, --timeout: (opcional): define el perfil de timeout utilizado
de configuración dinámicos opcionales.
("fast", "middle" o "slow").
● -c, --count: número máximo (de 1 a 10) de versiones
guardadas del proyecto.
● -d, --debug: (opcional): define si el servidor muestra
información de depuración de runtime.
Nota: Si se utiliza la opción "-d" no se muestran registros
de depuración.
Ejemplo:
musrv config -d

72

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configurar y administrar el servidor de proyectos
7.3 Utilizar herramientas de líneas de comandos
Comando

Descripción

Entradas posibles

"Start"

Inicia el servidor de proyectos.

Parámetros:
● No hay parámetros disponibles
Ejemplo:
musrv start

"Stop"

Detiene el servidor de proyectos.

Parámetros:
● -f, --force: (opcional): activa el comando sin más consultas
Ejemplo:
musrv stopp

"Uninstall"

Desinstala el servicio de proyectos.

Parámetros:

La desinstalación también puede reali‐ ● -f, --force: (opcional): activa el comando sin más consultas
zarse con los mecanismos de Windows. Ejemplo:
musrv uninstall

Consulte también
Configurar el servidor de proyectos con las Administrative Tools (Página 69)

7.3.4

Administrar el servidor de proyectos con las Power Tools

Introducción
Para poder administrar proyectos de servidor y sesiones locales en el servidor de proyectos,
están disponibles los comandos descritos a continuación, que se ejecutan con las Power Tools
desde la línea de comandos.
La administración del servidor de proyectos con las Power Tools puede llevarse a cabo desde
un equipo cualquiera que tenga instalados TIA Portal y las Power Tools.
Las entradas se guardan en una memoria de sesión y están disponibles la próxima vez que se
abran las Power Tools.

Nota
Para administrar el servidor de proyectos se necesitan derechos de usuario.

Requisitos
El servidor de proyectos está instalado y en el cortafuegos de Windows se ha habilitado un
puerto, de modo que el servidor de proyectos está accesible.

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

73

Configurar y administrar el servidor de proyectos
7.3 Utilizar herramientas de líneas de comandos

Procedimiento
Para administrar el servidor de proyectos, haga lo siguiente:
1. Abra la Power Tool para administrar el servidor con derechos de administrador. Para ello,
haga doble clic en el archivo "start-mupt.bat" que encontrará en el directorio de instalación
de TIA Portal en "bin".
2. Copie el comando "mupt" en la línea de comandos y pulse la tecla Intro.
Se muestra la ayuda de las Power Tools.
3. Introduzca el comando citado para la administración del servidor en la línea de comandos
y pulse la tecla Intro.
Los comandos disponibles están descritos en: Comandos para administrar el servidor de
proyectos (Página 74)
4. Si el comando no se ha ejecutado correctamente, se mostrará un mensaje de error.

Consulte también
Comandos para administrar el servidor de proyectos (Página 74)

7.3.5

Comandos para administrar el servidor de proyectos

Introducción
Los comandos para administrar el servidor de proyectos están disponibles en las Power Tools .
Nota
Tanto los comandos como las ayudas y los textos informativos correspondientes de la línea de
comandos están únicamente en inglés.

"User names" y "Role names"
"User names":
Todos los "User names" empleados deben considerar el formato descrito a continuación:
● <domain-or-machine-name>\<account>, p. ej. ww004\adgrfl0 o MD17E4MC\adgrfl0.
● Si el <domain-or-machine-name> no está asignado, Windows propondrá automáticamente
un dominio correspondiente para la cuenta.
"Role names":
Están disponibles los siguientes "Role names" con los derechos de acceso correspondientes:
● Member (only read access)
● Contributor (read & write access)
● Manager (read and write access and role management).

74

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configurar y administrar el servidor de proyectos
7.3 Utilizar herramientas de líneas de comandos

Comandos para administrar el servidor de proyectos
Están disponibles los comandos listados a continuación:
Comando

Descripción

Entradas posibles

"Display project"

Lista todos los proyectos existentes en
el servidor de proyectos actual.

Parámetros:
● -s, --server: dirección URI del servidor de proyectos
Ejemplo:
%InstallDirectory% > mupt project show -s
http://192.168.0.100:8057/
Llamada de la ayuda:
● "show-projects -?"

"Delete project"

Borra proyectos especificados en el ser‐ Parámetros:
vidor de proyectos.
● -s, --server: dirección URI del servidor de proyectos
● -p, --project: Definición del proyecto que se va a borrar
● -f --force: (opcional): activa el comando sin más consultas
Ejemplo:
%InstallDirectory% > mupt project remove -s
http://192.168.0.100:8057/ -p MyProject
Llamada de la ayuda:
● "delete-project -?"

"Display sessions"

Lista todas las sesiones locales que for‐ Parámetros:
man parte del proyecto de servidor ac‐ ● -s, --server: dirección URI del servidor de proyectos
tual.
● -p, --project: selección del proyecto
Ejemplo:
%InstallDirectory% > mupt session show -s
http://192.168.0.100:8057/ -p MyProject
Llamada de la ayuda:
● "show-sessions -?"

"Delete session"

Borra la sesión local seleccionada en el
servidor de proyectos

Parámetros:
● -s, --server: dirección URI del servidor de proyectos
● -p, --project: selección del proyecto
● -i, --id: número de identificación de la sesión
● -f, --force: (opcional): activa el comando sin más consultas
Ejemplo:
%InstallDirectory% > mupt session remove -s
http://192.168.0.100:8057/ -p MyProject -i 15
Llamada de la ayuda:
● "delete-session -?"

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

75

Configurar y administrar el servidor de proyectos
7.3 Utilizar herramientas de líneas de comandos
Comando

Descripción

"Remove project
lock"

Elimina el bloqueo del proyecto de ser‐ Parámetros:
vidor.
● -s, --server: dirección URI del servidor de proyectos

Entradas posibles

● -p, --project: selección del proyecto
● -f, --force: (opcional): activa el comando sin más consultas
Ejemplo:
%InstallDirectory% > mupt project unlock -s
http://192.168.0.100:8057/ -p MyProject
Llamada de la ayuda:
● "remove-projectlock -?"
"Show check-in
history"

Muestra el historial de check in del ser‐ Parámetros:
vidor seleccionado y la sesión local se‐ ● -s, --server: dirección URI del servidor de proyectos
leccionada.
● -p, --project: selección del proyecto
● -i, --id: número de identificación de la sesión
● -l, --page: muestra el resultado página por página
● -d, --display: muestra el resultado en distinto formato:
USAGE: -d [cascade/short/tab]
Ejemplo:
%InstallDirectory% > mupt checkin show -s
http://192.168.0.100:8057/ -p MyProject
Llamada de la ayuda:
● "show-checkinhistory -?"

"Show server ac‐
cess rights"

Muestra los derechos de usuario defini‐ Parámetros:
dos para el servidor seleccionado.
● -s, --server: dirección URI del servidor de proyectos
Ejemplo:
%InstallDirectory% > mupt user show -s
http://192.168.0.100:8057/
Llamada de la ayuda:
● "show-serveraccessrights -?"

"Modify server ac‐
cess rights"

Modifica los derechos de acceso para
el servidor seleccionado.

Parámetros:
● -s, --server: dirección URI del servidor de proyectos
● -r, --role: Selección de la función
● -u, --user: nombre de usuario por el que debe filtrarse.
● -f, --force: (opcional): activa el comando sin más consultas
Ejemplo:
%InstallDirectory% > mupt user add -u user1 r Manager -s http://192.168.0.100:8057/
Llamada de la ayuda:
● "modify-serveraccessrights -?"

76

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configurar y administrar el servidor de proyectos
7.3 Utilizar herramientas de líneas de comandos
Comando

Descripción

Entradas posibles

"Remove server
access rights"

Elimina los derechos de acceso para el
servidor seleccionado.

Parámetros:
● -s, --server: Dirección URI del servidor de proyectos
● -u, --user: nombre de usuario por el que debe filtrarse.
● -f, --force: (opcional): activa el comando sin más consultas
Ejemplo:
%InstallDirectory% > mupt user remove -u
user1 -s http://192.168.0.100:8057/
Llamada de la ayuda:
● "modify-serveraccessrights -?"

"Show project ac‐
cess rights"

Muestra los derechos de usuario defini‐ Parámetros:
dos para el proyecto seleccionado.
● -s, --server: dirección URI del servidor de proyectos
● -p, --project: nombre del proyecto para el que deben
listarse los derechos de usuario.
Ejemplo:
%InstallDirectory% > mupt user show -s
http://192.169.0.100:8057/ -p MYProject
Llamada de la ayuda:
● "show-projectaccessrights -?"

"Modify project ac‐ Modifica los derechos de usuario para
cess rights"
el proyecto seleccionado.

Parámetros:
● -s, --server: dirección URI del servidor de proyectos
● -p, --project: nombre del proyecto para el que deben
listarse los derechos de usuario.
● -r, --role: Selección de la función
● -u, --user: nombre de usuario por el que debe filtrarse.
● -f, --force: (opcional): activa el comando sin más consultas
Ejemplo:
%InstallDirectory% > mupt user add -u user2,
user3 -r Member -p MyProject -s http://
192.168.0.100:8057/
Llamada de la ayuda:
● "modify-projectaccessrights -?"

"Remove project
access rights"

Elimina los derechos de acceso del
usuario seleccionado para el proyecto
seleccionado.

Parámetros:
● -s, --server: dirección URI del servidor de proyectos
● -u, --user: nombre de usuario por el que debe filtrarse.
● -p, --project: nombre del proyecto para el que deben
listarse los derechos de usuario.
● -f, --force: (opcional): activa el comando sin más consultas
Ejemplo:
%InstallDirectory% > mupt user remove -u
user3 -p MyProject -s http://
192.168.0.100:8057/
Llamada de la ayuda:
● "remove-serveraccessrights -?"

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

77

Configurar y administrar el servidor de proyectos
7.3 Utilizar herramientas de líneas de comandos
Comando

Descripción

"Export project to
single user"

Parámetros:
Exporta el proyecto de servidor como
proyecto de usuario único a la ruta indi‐ ● -s, --server: dirección URI del servidor de proyectos
cada.
● -p, --project: nombre del proyecto para el que deben
listarse los derechos de usuario.

Entradas posibles

● -t, --path: Selección de la ruta de almacenamiento
Ejemplo:
%InstallDirectory% > mupt project export -s
http://192.168.0.100:8057/ -p MyProject -t
D:\MyDirectory\
Llamada de la ayuda:
● "export-projectassingleuser -?"
"Export of server
project"

Exporta un proyecto de servidor exis‐
tente a la carpeta de destino en la ruta
indicada.

Parámetros:
● -s, --server: dirección URI del servidor de proyectos
● -p, --project: nombre del proyecto que debe exportarse. Si
no se indica ningún nombre del proyecto se exportarán
todos los proyectos existentes en el Repository indicado
del servidor.
● -t, --path: selección de la carpeta de destino a la que debe
exportarse el proyecto. La carpeta debe estar vacía.
● -m,--metadata: (opcional)
El proyecto de servidor se exporta completo, con todo el
historial y todas las revisiones existentes. El ajuste
predeterminado es: "metadata" = false.
Si "metadata" no está especificado, se exporta la revisión
seleccionada (-v, --revision).
● -v, --revision: (opcional)
define el número de revisión que debe exportarse. Si
"metadata" está activo este valor se ignorará. En el ajuste
predeterminado se exporta siempre la última revisión.
● -f, --force: (opcional): activa el comando sin más consultas
Ejemplo:
%InstallDirectory% > mupt project export -server net.tcp://localhost:8735 --project
(ProjectName) --path (targetPath) --metadata
(true/false) --revision(revisionNumber) -force
Llamada de la ayuda:
● "export project -?"

78

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configurar y administrar el servidor de proyectos
7.3 Utilizar herramientas de líneas de comandos
Comando

Descripción

"Import of server
project"

Parámetros:
Importa un proyecto de servidor exis‐
tente desde la ruta indicada al reposito‐ ● -s, --server: dirección URI del servidor de proyectos
rio indicado del servidor de proyectos.
● -t, --path: selección de la ruta de almacenamiento de la
Requisitos: solo están autorizados a
que debe importarse el proyecto.
ejecutar esta acción los usuarios con la
Ejemplo:
función "Contributor" o "Manager".
%InstallDirectory% > mupt project import -Reglas:
server net.tcp://localhost:8735 --path
● solo es posible importar un proyecto (sourcePath)
de servidor a la vez.
Llamada de la ayuda:

● El nombre del proyecto de servidor
que debe importarse se asigna
también a la carpeta de destino.
"Export of server
project sessions"

Entradas posibles

● "import project -?"

Exporta las sesiones locales de un pro‐ Parámetros:
yecto de servidor a la ruta indicada.
● -s, --server: dirección URI del servidor de proyectos
● -p, --project: nombre del proyecto de servidor al que
deben exportarse las sesiones locales correspondientes.
Si no se indica ningún nombre del proyecto se exportarán
todos los proyectos existentes en el Repository indicado
del servidor.
● -t, --path: selección de la carpeta de destino a la que
deben exportarse las sesiones locales del proyecto de
servidor. La carpeta debe estar vacía.
● -i--id: (opcional)
ID de la sesión local que debe exportarse.
Ejemplo:
%InstallDirectory% > mupt session export -server net.tcp://localhost:8735 --path
(targetPath)--id (idNum)
Llamada de la ayuda:
● "session export -?"

"Import of server
project sessions"

Parámetros:
Importa las sesiones locales exporta‐
das a un proyecto de servidor seleccio‐ ● -s, --server: dirección URI del servidor de proyectos
nado.
● -p, --project: nombre del proyecto de servidor al que
Requisitos: solo están autorizados a
deben importarse las sesiones locales correspondientes.
ejecutar esta acción los usuarios con la
● -t, --path: selección de la ruta de almacenamiento de la
función "Contributor" o "Manager".
que deben importarse las sesiones locales.
Regla: solo se importan las sesiones lo‐
cales que conoce el proyecto de servi‐
dor correspondiente.

● -a, --alias: (opcional)
alias del servidor de destino, si está disponible.

Ejemplo:
%InstallDirectory% > mupt session import -server net.tcp://localhost:8735 --path
(sourcePath)--alias (serverAlias)

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

79

Configurar y administrar el servidor de proyectos
7.4 Confirmar certificado para el servidor de proyectos

Comando para restaurar una revisión anterior del servidor
El comando que se lista a continuación solo puede ejecutarse si el servidor no está bloqueado.
"Project rollback"

Restaurar una revisión anterior existen‐ Parámetros:
te del servidor.
● -s, --server: dirección URI del servidor de proyectos
● -p, --project: nombre del proyecto para el que deben
listarse los derechos de usuario.
● -v, --revision: número de revisión del proyecto que debe
restaurarse.
● -f, --force: (opcional): activa el comando sin más consultas
Ejemplo:
%InstallDirectory% > mupt project rollback s http://192.168.0.100:8057/ -p MyProject -v
132

7.4

Confirmar certificado para el servidor de proyectos

Introducción
Para poder establecer una conexión segura con un servidor de proyectos instalado, hay que
determinar el certificado de servidor SSL cuando se trabaja con Multiuser Engineering .
Cuando trabaje por primera vez en una sesión local después de instalar el servidor, se le pedirá
que confirme el certificado mostrado.
Si un certificado existente ha caducado, se le pedirá de nuevo que lo confirme.
Para la administración de los certificados de servidor SSL se utilizan los mecanismos de los
que dispone Windows.
Si no se confirma el certificado de servidor SSL, no es posible establecer conexión con el
servidor de proyectos.

Requisitos
TIA Portal y el software necesario para el servidor de proyectos están instalados.
El servidor de proyectos está configurado con las Power Tools y está iniciado.
Está trabajando por primera vez en la sesión local.

80

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configurar y administrar el servidor de proyectos
7.5 Introducir datos de acceso para el servidor de proyectos

Confirmar el certificado para el servidor de proyectos
Para confirmar el certificado para el servidor de proyectos, haga lo siguiente:
1. La primera vez que se trabaja con un servidor de proyectos conectado, p. ej., al abrir una
sesión local, el sistema operativo solicita automáticamente que se confirme el certificado
del servidor de proyectos.
2. Compruebe que el certificado mostrado es de confianza. En caso afirmativo, en el cuadro
de diálogo que aparece, confirme el certificado para el "TIA_Project_Server" haciendo clic
en "Aceptar".

Resultado
El cuadro de diálogo se cierra. El certificado del servidor de proyectos se considera de
confianza y se guarda de forma permanente.

7.5

Introducir datos de acceso para el servidor de proyectos

Introducción
Si se ha instalado un servidor de proyectos, hay que iniciar sesión en el servidor de proyectos
en caso de requerir autenticación.
Si esto fuera así, el servidor de proyectos le pedirá que inicie sesión. Aparece un cuadro de
diálogo para introducir los datos de acceso.
Para el inicio de sesión hay dos posibilidades:
● Inicio de sesión con el nombre de usuario y la contraseña actuales de Windows
● Inicio de sesión con los datos de acceso de otro usuario

Requisitos
TIA Portal y un servidor de proyectos están instalados.
El servidor de proyectos está configurado con las Power Tools y está iniciado.

Introducir datos de acceso para el servidor de proyectos
Para introducir los datos de usuario, haga lo siguiente:
1. En el cuadro de diálogo que se muestra, seleccione la opción deseada haciendo clic en ella.
– Si se inicia sesión con los datos de acceso actuales, el nombre de usuario utilizado
aparece ya en el cuadro y no puede editarse.
– Alternativamente, es posible iniciar sesión con los datos de acceso de otro usuario.
2. Para ello, seleccione la segunda opción e introduzca los datos deseados en "Nombre de
usuario" y "Contraseña".
3. Haga clic en "Aceptar".

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

81

Configurar y administrar el servidor de proyectos
7.6 Transferir datos de servidor a otro servidor de proyectos

Resultado
Si la autenticación es correcta, el cuadro de diálogo se cierra y se establece la conexión con
el servidor de proyectos.

7.6

Transferir datos de servidor a otro servidor de proyectos

Introducción
Si se trabaja con Multiuser Engineering y hay instalado un servidor de proyectos, es posible
transferir los datos de servidor ya existentes a otro servidor de proyectos sin pérdida de datos.
Los datos pueden transferirse al mismo equipo o a otro distinto.
Nota
Ubicación segura para el proyecto de servidor que debe exportarse
Asegúrese de indicar una ubicación segura para el proyecto de servidor que debe exportarse
con el fin de impedir la pérdida o el uso impropio de sus datos.

Transferir los datos del servidor a otro servidor de proyectos
Para transferir los datos de un servidor de proyectos a otro servidor de proyectos, haga lo
siguiente:
1. Detenga el servidor de proyectos activo.
– Abra la herramienta gráfica ConfigurationTool para configurar el servidor de proyectos
con derechos de administrador.
– Abra el menú Inicio con el comando "Inicio" > "Todos los programas" > "Siemens
Automation".
– Haga clic en la entrada "Servidor de proyectos V<x.y> - Configuration". Se abrirá la
interfaz de usuario de la Configuration Tool.
– En el área "Serverstatus", haga clic en el botón "Stop Service".
2. Desinstale el servidor de proyectos "antiguo".
Consulte al respecto: Instalar y desinstalar el servidor de proyectos (Página 29)
3. Copie todo el directorio de almacenamiento (Repository) con los datos del servidor
existentes en la nueva ubicación, p. ej. en otro equipo.
4. Instale el servidor de proyectos en el nuevo equipo.
Consulte al respecto: Instalar y desinstalar el servidor de proyectos (Página 29)
5. Configure el nuevo directorio de almacenamiento para el nuevo servidor de proyectos.
Consulte al respecto: Configurar el servidor de proyectos con la herramienta de
configuración gráfica Configuration Tool (Página 42)
6. Inicie el nuevo servidor de proyectos. Para ello, en la Configuration Tool haga clic en el
botón "Start Service" dentro del área "Serverstatus".

82

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configurar y administrar el servidor de proyectos
7.7 Leer el registro de errores del servidor de proyectos

Resultado
Los datos del servidor se han transferido sin pérdida de datos al nuevo servidor de proyectos.

Consulte también
Configurar el servidor de proyectos con la herramienta de configuración gráfica Configuration
Tool (Página 42)
Instalar y desinstalar el servidor de proyectos (Página 29)

7.7

Leer el registro de errores del servidor de proyectos

Introducción
Para comprobar la funcionalidad del servidor de proyectos, existe la posibilidad de leer
registros de errores. Los registros de errores le ofrecen información adicional sobre los
mensajes de error que aparecen en la interfaz de usuario cuando se producen errores en el
servidor.
El servidor crea cada día un archivo de registro de forma automatizada. Los archivos de
registro no se borran automáticamente.

Leer los registros de errores de un servidor de proyectos
Para leer el registro de errores, haga lo siguiente:
1. Abra en su lugar de almacenamiento el directorio para el servidor de proyectos deseado.
2. Seleccione el archivo de registro deseado en la ruta <Repository>\logs.
3. Abra el archivo de registro deseado para comprobar el contenido.

Leer registros de errores de un proyecto de servidor
Para leer el registro de errores, haga lo siguiente:
1. Abra en su lugar de almacenamiento el directorio para el servidor de proyectos deseado.
2. Seleccione el archivo de registro deseado en la ruta <Repository>\proj\<Nombre del
proyecto>\logs.
3. Abra el archivo de registro deseado para comprobar el contenido.

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

83

Configurar y administrar el servidor de proyectos
7.8 Comprimir el registro de errores del servidor de proyectos en un archivo Zip

Nota
Lectura de los registros de errores
Tenga en cuenta que no es posible leer registros de errores cuando se trabaja en modo de
depuración.
Compruebe y, en su caso, modifique la configuración del servidor en la línea de comandos con
el comando "musrv config" desde las Administrative Tools.
Asegúrese de que la opción "-d" no esté activada.

Leer el visor de sucesos de Windows
El visor de sucesos es una herramienta que permite ver información detallada de los sucesos
más importantes en el equipo. El visor de sucesos puede ser de ayuda para solucionar
problemas y errores.
Los siguientes eventos relevantes para la seguridad del servidor de proyectos también
originan una entrada en el visor de sucesos de Windows:
● Si un usuario desea iniciar el servidor de proyectos pero este lo desconoce, es decir, no
está registrado como usuario en el servidor.
● Si un usuario desea iniciar sesión en el servidor de proyectos con una contraseña errónea.
Para leer el visor de sucesos, haga lo siguiente:
1. Haga clic en "Inicio" > "Panel de control" > "Sistema y seguridad" > "Administración".
También puede hacer clic en "Inicio" e introducir "Visor de sucesos" en el campo de
búsqueda.
2. Abra el Visor de sucesos haciendo doble clic en él.
3. En "Registros de Windows" haga clic en "Seguridad" para ver los sucesos de seguridad que
se han registrado en relación al servidor de proyectos.

Resultado
Los eventos de seguridad que se han registrado para el servidor de proyectos se muestran en
una lista.

7.8

Comprimir el registro de errores del servidor de proyectos en un
archivo Zip

Introducción
Para comprobar la funcionalidad del servidor de proyectos, existe la posibilidad de leer
registros de errores. Los registros de errores le ofrecen información adicional sobre los
mensajes de error que aparecen en la interfaz de usuario cuando se producen errores en el
servidor.

84

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Configurar y administrar el servidor de proyectos
7.9 Notas sobre el comportamiento erróneo del servidor de proyectos
Existe la posibilidad de comprimir todos los registros de errores en un archivo Zip con el fin de
reenviarlo al Customer Support en caso de necesidad, por ejemplo.
Para ello debe iniciar sesión como administrador directamente en el servidor. No es posible
realizar esta acción con TIA Portal o con las Administrative y Power Tools.

Comprimir registros de errores en un archivo Zip
Para crear un archivo Zip de los registros de errores, haga lo siguiente:
1. Inicie sesión como administrador en el servidor de proyectos.
2. Ejecute el comando "musrv ziplogs".
3. Otra posibilidad consiste en ejecutar el comando con las opciones siguientes:
–

-n, --name: Entrada de la ruta de almacenamiento para el archivo Zip

– -f, --force: Sobrescribe los archivos Zip que pueda haber sin consultar.

Resultado
Se crea el archivo Zip con todos los registros de errores existentes relacionados con el servidor
de proyectos.

7.9

Notas sobre el comportamiento erróneo del servidor de proyectos

Introducción
A continuación se describe el comportamiento del servidor de proyectos después de
producirse un error.
Si se produce un error, se mostrará un mensaje de error al respecto.

Comportamiento del servidor de proyectos después de producirse un error
El servidor de proyectos presenta el comportamiento siguiente después de producirse un error:
Bloqueo de proyectos:
● La información acerca del proyecto que está bloqueado posiblemente se pierda tras un
error del servidor.
● Dicha información no estará disponible tras reiniciar el servidor.
Errores que se producen al "Cargar de dispositivo" o al "Cargar en dispositivo":
● No es posible actualizar la sesión local. La acción se cancela con un mensaje de error.
● No es posible realizar el check in. La acción se cancela con un mensaje de error.
● El servidor de proyectos elimina los datos que se hayan cargado anteriormente; el servidor
tiene el mismo estado que antes de iniciar la acción errónea.

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

85

Configurar y administrar el servidor de proyectos
7.9 Notas sobre el comportamiento erróneo del servidor de proyectos

Nota
Reinicio manual del servidor de proyectos
Después de producirse un error hay que reiniciar el servidor de proyectos manualmente.
El servidor de proyectos no se inicia automáticamente hasta el próximo reinicio del equipo en
el que se está ejecutando el servidor de proyectos.

86

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

Índice alfabético
M
Multiuser Engineering
Reglas y requisitos para la instalación, 34

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

87

Índice alfabético

88

Trabajar con el servidor de proyectos TIA
Manual de programación y manejo, 11/2019

