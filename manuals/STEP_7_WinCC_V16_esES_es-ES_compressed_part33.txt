nology versions V1.0 and V2.0 is available in the section
"Version overview" of the "S7-1500/S7-1500T Motion Control overview" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766459).

Consulte también
Homing (Página 1589)

Homing mode "Use homing mark via digital input"
Digital input homing mark/output cam
In this dialog field, select a digital input that is to act as a homing mark (reference output cam).
Also select the level at which the homing mark is to be detected.

Homing direction
Select the direction in which the homing mark for homing is to be approached.
The following options are available:
● Positive
The axis moves in the direction of higher position values.
● Negative
The axis moves in the direction of lower position values.
● Current
The currently effective approach direction is used for homing.

1656

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Homing mark
Select which switch position of the "digital input" is to be used as the homing mark.
When a "digital input" is crossed, two switching edges that are spatially separated from one
another are generated. The selection of the positive or negative side ensures that the homing
mark is always evaluated at the same mechanical position.
The positive side is the switch position with a greater position value; the negative side is the
switch position with the lesser position value.
The selection of the side is independent of the approach direction, and independent of whether
it causes a rising or falling edge.

Home position
In this field, configure the absolute coordinate of the home position. The home position
configured here is in effect when the Motion Control instruction "MC_Home" is executed with
"Mode" = 10.
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control has
been standardized within the framework of technology version V2.0. This results in a new
assignment of the parameter values for the "MC_Home.Mode" parameter. A comparison of the
"MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is available in the section
"Version overview" of the "S7‑1500/S7‑1500T Motion Control overview" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766459).

Consulte también
Homing (Página 1589)

Position monitoring functions
Configuration - Positioning monitoring
In the "Positioning monitoring" configuration window, configure the criteria for monitoring the
target position.

Positioning window
Configure the size of the positioning window in this field. If the axis is located within this window,
the position is considered to be "reached".

Tolerance time
In this field, configure the tolerance time within which the position value must reach the
positioning window.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1657

Control de movimiento
6.1 Using S7-1500 Motion Control

Minimum dwell time in positioning window
Configure the minimum dwell time in this field. The current position value must be located in the
positioning window for at least the "minimum dwell time". At the end of the hold time, the
corresponding positioning job reports "Done" = TRUE.
Recommended setting: To avoid longer pauses, set values between 0 ms and 20 ms for
dynamic positioning tasks.
If one of the criteria is violated, then the axis is stopped and the technology alarm 541 "Position
monitoring error" is displayed (alarm response: Remove enable).

Consulte también
Position monitoring functions (Página 1610)

Configuration - Following error
In the "Following Error" configuration window, configure the permissible deviation of the actual
position of the axis from the position setpoint. The following error can be dynamically adapted
to the current velocity of the axis.

Enable following error monitoring
Select this check box, if you want to enable following error monitoring. When following error
monitoring is enabled, the axis is stopped in the error range (orange). The technology alarm
521 "Following error" is displayed (alarm response: remove enable).
When following error monitoring is disabled, the configured limits have no effect.

Maximum following error
Configure the following error that is permissible at maximum velocity in this field.

Warning level
In this field, configure a percentage of the current following error limit above which a warning
should be output.
Example: The current maximum following error is 100 mm. The warning level is configured at
90%. If the current following error exceeds a value of 90 mm, the technology alarm 522
"Warning following error tolerance" is output. This is a warning and contains no alarm response.

Following error
In this field, configure the permissible following error for low velocities (without dynamic
adjustment of the following error).

1658

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Start of dynamic adjustment
Configure the velocity starting from which the following error is to be dynamically adjusted in
this field. Starting from this velocity, the following error up to the maximum velocity will be
adjusted to the maximum following error.

Consulte también
Following error monitoring (Página 1611)

Configuration - Standstill signal
In the "Standstill signal" configuration window, configure the criteria for standstill detection.

Standstill window
Configure the size of the standstill window in this field. For standstill to be indicated, the velocity
of the axis must be within this window.

Minimum dwell time in standstill window
Configure the minimum dwell time in the standstill window in this field. The velocity of the axis
must be in the standstill window for at least the specified duration.
If both criteria are met, the standstill of the axis is indicated.

Consulte también
Standstill signal (Página 1612)

Configuration - Control loop
In the "Control loop" configuration window, configure the precontrol and the gain Kv of the
position control loop.
The Kv factor affects the following parameters:
● Positioning accuracy and stop control
● Uniformity of motion
● Positioning time
The better the mechanical conditions of the axis are (high stiffness), the higher the Kv factor can
be configured. This reduces the following error, and a higher dynamic response is achieved.

Drive optimized
When the drive is optimized, the status bit lights up green. Otherwise, the status bit is gray.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1659

Control de movimiento
6.1 Using S7-1500 Motion Control

Optimizing values on the drive
Use the green arrow to navigate to "Automatic controller optimization" in the optimization mask
of the drive. The optimization mask of the drive is opened in online or offline mode, depending
on the mode you are in. You can perform the optimization on the drive and optionally go online
with the drive. You get back to the previous mask using the "Window Switcher".

Applying values from the drive
When you click the "Apply values from drive" button, a dialog box opens with the columns
"Current value", "New value" and "Value on drive". Depending on the status of the drive, the
online or offline values for "Speed control loop substitute time" and "Gain (Kv factor)" are
displayed there.
The "New value" column can be edited. 50% of the value calculated on the drive is determined
as a new value for the default setting for the gain. The new value of the gain should correspond
to a maximum of 30-50% of the value on the drive. You apply the set values by clicking on "Yes".

Precontrol
Configure the percentage velocity precontrol in this field.

Speed control loop substitute time
Configure the speed control loop substitute time in this field (Tvtc).
When speed precontrol is activated, the setpoint is delayed by the speed control loop substitute
time before the control deviation is established. This prevents an overshoot or a leading of the
actual value compared with the position setpoint. The speed control loop substitute time is a
simplified substitute model of the dynamic behavior of the speed control loop. The speed
control loop substitute time is included in the balancing filter.

Gain (Kv factor)
In the input field, enter the gain Kv of the position control loop.

Dynamic Servo Control (DSC)
For position-controlled axes (positioning axes/synchronous axes), the closed loop position
control can occur either in the CPU or in the drive, provided the drive supports Dynamic Servo
Control (DSC). Select your preferred control process:
● Position control in the drive (DSC enabled)
With the Dynamic Servo Control (DSC) function, the position controller is executed in the
drive in the cycle clock of the speed control loop. The setting of a significantly greater
position controller gain factor Kv is thus enabled. This increases the dynamics for setpoint
sequence and disturbance variable correction for highly dynamic drives.
● Position control in the PLC

1660

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Nota
Dynamic Servo Control (DSC) is only possible with one of the following PROFIdrive telegrams:
● Standard telegram 5 or 6
● SIEMENS telegram 105 or 106

Consulte también
Closed-loop control (Página 1613)
Control structure (Página 1614)
Function and structure of the optimization (Página 1683)

Configuration - Actual value extrapolation
Configure the properties of the extrapolation for an actual value coupling for synchronous
operation in the "Actual value extrapolation" configuration window. The values set here only
apply when the actual values of this axis are used as leading value.

Position filter T1 and T2
Enter the time constants of the PT2 filter for smoothing the position.

Velocity filter T1 and T2 and tolerance band width
Enter the time constants of the PT2 filter for the smoothing of the actual velocity and the
tolerance band width of the smoothed actual velocity.
For optimized application of the tolerance band, enter the same bandwidth for the tolerance
band as the width of the noise signal.

Hysteresis value
Enter a value for application of the hysteresis function to the extrapolated actual value of the
position. The specification is made in the configured length unit.

Leading axis dependent extrapolation time (read-only)
The leading axis-dependent time is calculated from the sum of the actual value acquisition time
at the leading axis, (Ti), the time of the interpolator (TIpo) and the sum of position filters T1 and
T2:
Leading axis dependent extrapolation time = Ti + TIpo + T1 + T2

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1661

Control de movimiento
6.1 Using S7-1500 Motion Control

Following axis dependent extrapolation time
Specify the following axis-related proportion for the extrapolation of the leading value. The
value (unchanged or offset against user-specific runtimes) from the tag
"<TO>.StatusPositioning.SetpointExecutionTime" of the following axis is used as the basis.

Time from cross-PLC synchronous operation (read-only)
The time from the cross-PLC synchronous operation corresponds to the value of the
deceleration time set at the axis or encoder in "Configuration > Leading value settings".

Apply leading value velocity from differentiation
When you select this check box, the leading value velocity is taken from the differentiation of
the extrapolated leading value position.
When you clear this check box, the filtered actual velocity is applied.

Include leading axis condition time
When you select this check box, the leading axis dependent extrapolation time is included in
the calculation of the effective extrapolation time.
When you clear this check box, the leading axis dependent extrapolation time is not included
in the calculation of the effective extrapolation time.

Effective extrapolation time (read-only)
The effective extrapolation time is the sum of the leading axis-dependent time, the following
axis-dependent time and the delay time of cross-PLC synchronous operation.

Configuring the technology object external encoder
Configuration - Basic Parameters
Configure the basic properties of the technology object in the "Basic Parameters" configuration
window.

Name
Define the name of the external encoder in this field. The technology object is listed under this
name in the project tree. The tags of the external encoder can be used in the user program
under this name.

External encoder type
In this selection, configure whether the external encoder records linear or rotary motions.

1662

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Units of measure
In the drop-down list, select the desired units of measure for the position and velocity of the
external encoder.
If you wish to use six decimal places in the selected unit, select the check box "Use position
values with higher resolution".

Modulo
Select the check box "Enable modulo", if you want to use a recurring measuring system for the
external encoder (e.g. 0-360° for an external encoder of the "rotary" type).
● Modulo start value
In this field, define the position at which the modulo range should begin (e.g. 0° for an
external encoder of the "rotary" type).
● Modulo length
In this field, define the length of the modulo range (e.g. 360° for an external encoder of the
"rotary" type).

Consulte también
Units of measure (Página 1389)
Modulo setting (Página 1551)
External encoder technology object (Página 1550)

Hardware interface
Configuration - Encoder
The external encoder records the position of an externally controlled drive. The encoder
required for this purpose communicates the encoder position to the controller by means of a
PROFIdrive telegram. Configure the encoder and encoder type in the "Encoder" configuration
window.

Data connection
In the drop-down list, select whether the data connection should be established directly with the
encoder or via a data block that can be edited in the user program.
The selection is only possible for encoders that are connected via PROFIdrive and support
parameter P979.

Encoder/data block
Select the encoder you have configured in the device configuration in this area.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1663

Control de movimiento
6.1 Using S7-1500 Motion Control
The following encoders can be used:
● Encoder on technology module (TM)
In the "Encoder" configuration field, select a previously configured technology module and
the channel to be used. Only technology modules set to the "Position input for Motion
Control" mode are displayed for selection.
You can operate the technology module centrally on an S7-1500 CPU or decentrally on a
distributed I/O. Isochronous mode is not possible with central operation in the CPU.
You can identify the technology modules suitable for position detection for Motion Control
in the documentation for the technology module and the catalog data.
● Encoder via PROFINET/PROFIBUS (PROFIdrive)
In the " Encoder" configuration field, select a configured encoder on the PROFINET/
PROFIBUS.
Nota
Option "Show all modules"
If a PROFIdrive that has already been configured is not available for selection, use the
option "Show all modules" to display all reachable modules.
When you select the option "Show all modules", only the address range for each of the
displayed modules is checked. If the address range of the module is large enough for the
selected PROFIdrive frame, you can select the module. For this reason, make sure that you
select a PROFIdrive encoder.
If you have selected "Data block" under the data connection, select a previously created data
block which contains a tag structure of the data type "PD_TELx" ("x" stands for the telegram
number to be used).

Encoder type
Select the encoder type in this configuration field. The following encoder types are available for
selection:
● Incremental (Página 1559)
● Absolute (Página 1559) (measuring range > traversing range)
● Cyclic absolute (Página 1559) (measuring range < traversing range)
Recommended settings for absolute actual values: The "Cyclic absolute" encoder type is
recommended. With this setting, the position of the zero crossing of the encoder is
automatically taken into consideration by the technology object.
Nota
Measuring range of the absolute encoder
Observe the boundary conditions with absolute values.
You can find more information in the section "Absolute actual value (Página 1559)" of the
"S7-1500/S7-1500T Axis functions" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766462).

1664

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Data connection drive/encoder via data block (Página 1570)
Connect drive/encoder via data block (Página 1440)
"Drive and encoder connection" section in the "S7-1500/S7-1500T Axis functions" function
manual (https://support.industry.siemens.com/cs/ww/en/view/109766462)

Configuration - Data exchange
Configure detailed encoder parameters and the data exchange with the encoder in the "Data
exchange with encoder" configuration window. The configuration varies according to the
encoder connection:
● Encoder to technology module (Página 1665)
● Encoder to PROFINET/PROFIBUS (Página 1667)

Encoder to technology module
Data exchange with encoder
In this area, you can configure the encoder telegram and the criteria for how the encoder data
are to be evaluated. The specifications must match those in the device configuration.

Encoder telegram
In the drop-down list for the technology module, select the telegram that you have configured
in the technology module.

Automatically apply encoder values during configuration (offline)
Select the check box if you want to transfer the offline values of the encoder to the configuration
of the technology object in the project.
Nota
Automatic transfer of encoder parameters is only possible with PROFIdrive encoders as of
product version A16. For this, "Hardware interface > Encoder" must be selected as the
"Encoder" data connection in the configuration window.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1665

Control de movimiento
6.1 Using S7-1500 Motion Control

Automatically apply encoder values during runtime (online)
Select the check box if you want to transfer the effective values online in the encoder to the CPU
during runtime. The encoder parameters are transferred from the bus after the (re-)initialization
of the technology object and (re)start of the encoder or the CPU.
Nota
Automatic transfer of encoder parameters is only possible with PROFIdrive encoders as of
product version A16. For this, "Hardware interface > Encoder" must be selected as the
"Encoder" data connection in the configuration window.

Encoder type
Depending on the selected encoder type, configure the following parameters: The
specifications must match those in the device configuration.
Encoder type

Rotary incremental

Increments per revolution

Configure the number of increments that the en‐
coder resolves per revolution in this field.

Bits for fine resolution in the incremental actual va‐ Configure the number of bits for fine resolution wit‐
lue (Gx_XIST1)
hin the incremental actual value (Gx_XIST1) in this
field.

Encoder type

Rotary absolute

Increments per revolution

Configure the number of increments that the en‐
coder resolves per revolution in this field.

Number of revolutions

Configure the number of revolutions that the abso‐
lute encoder can detect in this field.

Bits for fine resolution in the incremental actual va‐ Configure the number of bits for fine resolution wit‐
lue (Gx_XIST1)
hin the incremental actual value (Gx_XIST1) in this
field.
Bits for fine resolution in the absolute actual value
(Gx_XIST2)

Configure the number of bits for fine resolution wit‐
hin the absolute actual value (Gx_XIST2) in this
field.

Encoder type

Rotary cyclic absolute

Increments per revolution

Configure the number of increments that the en‐
coder resolves per revolution in this field.

Number of revolutions

Configure the number of revolutions that the abso‐
lute encoder can detect in this field.

Bits for fine resolution in the incremental actual va‐ Configure the number of bits for fine resolution wit‐
lue (Gx_XIST1)
hin the incremental actual value (Gx_XIST1) in this
field.
Bits for fine resolution in the absolute actual value
(Gx_XIST2)

1666

Configure the number of bits for fine resolution wit‐
hin the absolute actual value (Gx_XIST2) in this
field.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Encoder type

Linear incremental

Distance between two increments

Configure the distance between two increments of
the encoder in this field.

Bits for fine resolution in the incremental actual va‐ Configure the number of bits for fine resolution wit‐
lue (Gx_XIST1)
hin the incremental actual value (Gx_XIST1) in this
field.

Encoder type

Linear absolute

Distance between two increments

Configure the distance between two increments of
the encoder in this field.

Bits for fine resolution in the incremental actual va‐ Configure the number of bits for fine resolution wit‐
lue (Gx_XIST1)
hin the incremental actual value (Gx_XIST1) in this
field.
Bits for fine resolution in the absolute actual value
(Gx_XIST2)

Configure the number of bits for fine resolution wit‐
hin the absolute actual value (Gx_XIST2) in this
field.

Encoder type

Linear cyclic absolute

Distance between two increments

Configure the distance between two increments of
the encoder in this field.

Bits for fine resolution in the incremental actual va‐ Configure the number of bits for fine resolution wit‐
lue (Gx_XIST1)
hin the incremental actual value (Gx_XIST1) in this
field.
Bits for fine resolution in the absolute actual value
(Gx_XIST2)

Configure the number of bits for fine resolution wit‐
hin the absolute actual value (Gx_XIST2) in this
field.

Consulte también
Configuration - Data exchange (Página 1665)
Encoder to PROFINET/PROFIBUS (Página 1667)

Encoder to PROFINET/PROFIBUS
Data exchange with encoder
In this area, you can configure the encoder telegram and the criteria for how the encoder data
are to be evaluated. The specifications must match those in the device configuration.

Encoder telegram
The telegram to the encoder that is set in the device configuration is preselected in the dropdown list.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1667

Control de movimiento
6.1 Using S7-1500 Motion Control

Automatically apply encoder values during configuration (offline)
Select the check box if you want to transfer the offline values of the encoder to the configuration
of the technology object in the project.
Nota
Automatic transfer of encoder parameters is only possible with PROFIdrive encoders as of
product version A16. For this, "Hardware interface > Encoder" must be selected as the
"Encoder" data connection in the configuration window.

Automatically apply encoder values during runtime (online)
Select the check box if you want to transfer the effective values online in the encoder to the CPU
during runtime. The encoder parameters are transferred from the bus after the (re-)initialization
of the technology object and (re)start of the encoder or the CPU.
Nota
Automatic transfer of encoder parameters is only possible with PROFIdrive encoders as of
product version A16. For this, "Hardware interface > Encoder" must be selected as the
"Encoder" data connection in the configuration window.

Encoder type
Depending on the selected encoder type, configure the following parameters:
Encoder type

Rotary incremental

Increments per revolution

Configure the number of increments that the en‐
coder resolves per revolution in this field.

Bits for fine resolution in the incremental actual va‐ Configure the number of bits for fine resolution wit‐
lue (Gx_XIST1)
hin the incremental actual value (Gx_XIST1) in this
field.

Encoder type

Rotary absolute

Increments per revolution

Configure the number of increments that the en‐
coder resolves per revolution in this field.

Number of revolutions

Configure the number of revolutions that the abso‐
lute encoder can detect in this field.

Bits for fine resolution in the incremental actual va‐ Configure the number of bits for fine resolution wit‐
lue (Gx_XIST1)
hin the incremental actual value (Gx_XIST1) in this
field.
Bits for fine resolution in the absolute actual value
(Gx_XIST2)

1668

Configure the number of bits for fine resolution wit‐
hin the absolute actual value (Gx_XIST2) in this
field.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Encoder type

Rotary cyclic absolute

Increments per revolution

Configure the number of increments that the en‐
coder resolves per revolution in this field.

Number of revolutions

Configure the number of revolutions that the abso‐
lute encoder can detect in this field.

Bits for fine resolution in the incremental actual va‐ Configure the number of bits for fine resolution wit‐
lue (Gx_XIST1)
hin the incremental actual value (Gx_XIST1) in this
field.
Bits for fine resolution in the absolute actual value
(Gx_XIST2)

Configure the number of bits for fine resolution wit‐
hin the absolute actual value (Gx_XIST2) in this
field.

Encoder type

Linear incremental

Distance between two increments

Configure the distance between two increments of
the encoder in this field.

Bits for fine resolution in the incremental actual va‐ Configure the number of bits for fine resolution wit‐
lue (Gx_XIST1)
hin the incremental actual value (Gx_XIST1) in this
field.

Encoder type

Linear absolute

Distance between two increments

Configure the distance between two increments of
the encoder in this field.

Bits for fine resolution in the incremental actual va‐ Configure the number of bits for fine resolution wit‐
lue (Gx_XIST1)
hin the incremental actual value (Gx_XIST1) in this
field.
Bits for fine resolution in the absolute actual value
(Gx_XIST2)

Configure the number of bits for fine resolution wit‐
hin the absolute actual value (Gx_XIST2) in this
field.

Encoder type

Linear cyclic absolute

Distance between two increments

Configure the distance between two increments of
the encoder in this field.

Bits for fine resolution in the incremental actual va‐ Configure the number of bits for fine resolution wit‐
lue (Gx_XIST1)
hin the incremental actual value (Gx_XIST1) in this
field.
Bits for fine resolution in the absolute actual value
(Gx_XIST2)

Configure the number of bits for fine resolution wit‐
hin the absolute actual value (Gx_XIST2) in this
field.

Consulte también
Configuration - Data exchange (Página 1665)
Encoder to technology module (Página 1665)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1669

Control de movimiento
6.1 Using S7-1500 Motion Control

Configuration - Leading value settings
In the "Leading value settings" configuration window, select the parameters of the leading value
for cross-PLC synchronous operation.

Provision of leading value
In this area, define the settings for transferring the leading value to other CPUs:
Field

Description

Provide cross-PLC lea‐
ding value

Select this check box to make the actual value available as leading value for
a cross-PLC synchronous operation.

Transfer area

In this drop-down list, select the output tag of the transfer area set up between
the CPU of the leading axis and the CPUs of the following axes.
You can find more information about the transfer range in the section "Setting
up communication via Controller-Controller direct data exchange" of the do‐
cumentation "S7-1500/S7-1500T Synchronous operation functions" (https://
support.industry.siemens.com/cs/ww/en/view/109766464).

Delay time of the local leading value
In this area, configure the settings for local synchronous operation:
Field

Description

Allow system calcula‐
tion

Select this check box to adapt the delay time of the local leading value in the
system. System calculation is started when you trigger the calculation in the
interconnection overview.

Delay time

If the "Allow system calculation" check box is cleared, this field can be edited.
Enter the delay time in this field.
The entered delay time determines the output delay of the leading value for
the local following axes.
(<TO>.CrossPlcSynchronousOperation.LocalLeadingValueDelayTime)

Interconnection over‐
view

You open the interconnection overview via this link. With a cross-PLC
synchronous operation, the interconnection overview contains an overview
of the interconnected leading and following axes and their CPU assignment.

Extended Parameters
Configuration - Mechanics
Configure the encoder parameters for the position of the externally controlled drive in the
"Mechanics" configuration window.
The configuration varies according to the type of encoder:
● Linear (Página 1671)
● Rotary (Página 1671)

1670

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
External encoder technology object (Página 1550)
Mechanics (Página 1572)

Linear
Encoder
If you would like to invert the actual value of the encoder, select the check box "Invert encoder
direction".

Load gear
The gear ratio of the measuring gearbox is specified as the ratio between encoder revolutions
and load revolutions.
In the "Number of encoder revolutions" configuration field, configure the integer number of
encoder revolutions.
In this "Number of load revolutions" configuration field, configure the integer number of load
revolutions.
If no load gear is present, select the same values for the number of encoder revolutions and
load revolutions.

Position parameters
In the "Leadscrew pitch" configuration field, configure the distance by which the load is moved
when the leadscrew makes one revolution.

Consulte también
Configuration - Mechanics (Página 1670)
Rotary (Página 1671)
Mechanics (Página 1572)

Rotary
Encoder
If you would like to invert the actual value of the encoder, select the check box "Invert encoder
direction".

Load gear
The gear ratio of the measuring gearbox is specified as the ratio between encoder revolutions
and load revolutions.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1671

Control de movimiento
6.1 Using S7-1500 Motion Control
In the "Number of encoder revolutions" configuration field, configure the integer number of
encoder revolutions.
In this "Number of load revolutions" configuration field, configure the integer number of load
revolutions.
If no load gear is present, select the same values for the number of encoder revolutions and
load revolutions.

Consulte también
Configuration - Mechanics (Página 1670)
Linear (Página 1671)
Mechanics (Página 1572)

Homing
Configuration - Homing
Configure the parameters for homing the external encoder in the "Homing" configuration
window. Homing is executed using the Motion Control instruction "MC_Home" with "Mode" = 2,
8 and 10.
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control has
been standardized within the framework of technology version V2.0. This results in a new
assignment of the parameter values for the "MC_Home.Mode" parameter. A comparison of the
"MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is available in the section
"Version overview" of the "S7-1500/S7-1500T Motion Control overview" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766459).

Select the homing mode
Select from among the following homing modes:
● Reference output cam and zero mark via PROFIdrive telegram (Página 1672)
● Use zero mark via PROFIdrive telegram (Página 1673)
● Homing mark via digital input (Página 1674)

Reference output cam and zero mark via PROFIdrive telegram
Homing direction
Select the direction in which the zero mark should be approached for homing. The next zero
mark after leaving the reference output cam is used.

1672

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The following options are available:
● Positive
Axis moves in the direction of higher position values.
● Negative
Axis moves in the direction of lower position values.
● Current
The currently effective approach direction is used for homing.

Home position
In this field, configure the absolute coordinate of the home position. The home position
configured here is in effect when the Motion Control instruction "MC_Home" is executed with
"Mode" = 10.
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control has
been standardized within the framework of technology version V2.0. This results in a new
assignment of the parameter values for the "MC_Home.Mode" parameter. A comparison of the
"MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is available in the section
"Version overview" of the "S7-1500/S7-1500T Motion Control overview" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766459).

Consulte también
Configuration - Homing (Página 1672)
Use zero mark via PROFIdrive telegram (Página 1673)
Homing mark via digital input (Página 1674)

Use zero mark via PROFIdrive telegram
Homing direction
Select the direction in which the next zero mark should be approached for homing. The
following options are available:
● Positive
Axis moves in the direction of higher position values.
● Negative
Axis moves in the direction of lower position values.
● Current
The currently effective approach direction is used for homing.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1673

Control de movimiento
6.1 Using S7-1500 Motion Control

Home position
In this field, configure the absolute coordinate of the home position. The home position
configured here is in effect when the Motion Control instruction "MC_Home" is executed with
"Mode" = 10.
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control has
been standardized within the framework of technology version V2.0. This results in a new
assignment of the parameter values for the "MC_Home.Mode" parameter. A comparison of the
"MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is available in the section
"Version overview" of the "S7-1500/S7-1500T Motion Control overview" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766459).

Consulte también
Configuration - Homing (Página 1672)
Reference output cam and zero mark via PROFIdrive telegram (Página 1672)
Homing mark via digital input (Página 1674)

Homing mark via digital input
Digital input homing mark
In this configuration field, select a digital input that is to act as a homing mark (reference output
cam). Also select the level at which the homing mark is to be detected.

Homing direction
Select the direction in which the homing mark for homing is to be approached.
The following options are available:
● Positive
Axis moves in the direction of higher position values.
● Negative
Axis moves in the direction of lower position values.
● Current
The currently effective approach direction is used for homing.

Homing mark
Select which switch position of the "digital input" is to be used as the homing mark.

1674

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
When a "digital input" is crossed, two switching edges that are spatially separated from one
another are generated. The selection of the positive or negative side ensures that the homing
mark is always evaluated at the same mechanical position.
The positive side is the switch position with a greater position value; the negative side is the
switch position with the lesser position value.
The selection of the side is independent of the approach direction, and independent of whether
it causes a rising or falling edge.

Home position
In this field, configure the absolute coordinate of the home position. The home position
configured here is in effect when the Motion Control instruction "MC_Home" is executed with
"Mode" = 10.
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control has
been standardized within the framework of technology version V2.0. This results in a new
assignment of the parameter values for the "MC_Home.Mode" parameter. A comparison of the
"MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is available in the section
"Version overview" of the "S7-1500/S7-1500T Motion Control overview" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766459).

Consulte también
Configuration - Homing (Página 1672)
Use zero mark via PROFIdrive telegram (Página 1673)
Reference output cam and zero mark via PROFIdrive telegram (Página 1672)

Configuration - Actual value extrapolation
Configure the properties of the extrapolation for an actual value coupling for synchronous
operation in the "Actual value extrapolation" configuration window. The values set here only
apply when the actual values of this axis are used as leading value.

Position filter T1 and T2
Enter the time constants of the PT2 filter for smoothing the position.

Velocity filter T1 and T2 and tolerance band width
Enter the time constants of the PT2 filter for the smoothing of the actual velocity and the
tolerance band width of the smoothed actual velocity.
For optimized application of the tolerance band, enter the same bandwidth for the tolerance
band as the width of the noise signal.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1675

Control de movimiento
6.1 Using S7-1500 Motion Control

Hysteresis value
Enter a value for application of the hysteresis function to the extrapolated actual value of the
position. The specification is made in the configured length unit.

Leading axis dependent extrapolation time (read-only)
The leading axis-dependent time is calculated from the sum of the actual value acquisition time
at the leading axis, (Ti), the time of the interpolator (TIpo) and the sum of position filters T1 and
T2:
Leading axis dependent extrapolation time = Ti + TIpo + T1 + T2

Following axis dependent extrapolation time
Specify the following axis-related proportion for the extrapolation of the leading value. The
value (unchanged or offset against user-specific runtimes) from the tag
"<TO>.StatusPositioning.SetpointExecutionTime" of the following axis is used as the basis.

Time from cross-PLC synchronous operation (read-only)
The time from the cross-PLC synchronous operation corresponds to the value of the
deceleration time set at the axis or encoder in "Configuration > Leading value settings".

Apply leading value velocity from differentiation
When you select this check box, the leading value velocity is taken from the differentiation of
the extrapolated leading value position.
When you clear this check box, the filtered actual velocity is applied.

Include leading axis condition time
When you select this check box, the leading axis dependent extrapolation time is included in
the calculation of the effective extrapolation time.
When you clear this check box, the leading axis dependent extrapolation time is not included
in the calculation of the effective extrapolation time.

Effective extrapolation time (read-only)
The effective extrapolation time is the sum of the leading axis-dependent time, the following
axis-dependent time and the delay time of cross-PLC synchronous operation.

1676

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

6.1.2.4

Commissioning

Axis control panel
Function and structure of the axis control panel
You traverse individual axes with the axis control panel. A user program is not necessary for the
operation of the axis control panel. With the axis control panel, you assume master control for
a technology object and control the motions of the axis.
ADVERTENCIA
Uncontrolled axis motions
During operation with the axis control panel, the axis can execute uncontrolled motions (e.g.
due to erroneous configuration of the drive or the technology object). Furthermore, any
synchronized following axis is moved as well when moving a leading axis with the axis control
panel.
Therefore, perform the following protective measures before operation with the axis control
panel:
● Ensure that the EMERGENCY OFF switch is within the reach of the operator.
● Enable the hardware limit switches.
● Enable the software limit switches.
● Ensure that following error monitoring is enabled.
● Make sure that no following axis is coupled to the axis to be moved.
The axis control panel of the speed axis, positioning axis and synchronous axis can be found
in the project tree under "Technology object > Commissioning".
The axis control panel is divided into the following areas:
● Master control
● Axis
● Operating mode
● Modify
● Axis status
● Actual values

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1677

Control de movimiento
6.1 Using S7-1500 Motion Control

Elements of the axis control panel
The following table lists the elements of the axis control panel:

1678

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Area
Master control

Element

Description
In the "Master control" area, you assume master control of the technology object or
return it to your user program.

"Activate" button With the "Activate" button, you set up an online connection to the CPU and take over
master control for the selected technology object.
● To take over master control, the technology object must be disabled in the user
program.
● Any synchronized following axis is moved as well when moving a leading axis with
the axis control panel.
● If the online connection to the CPU is lost during operation with the axis control
panel, then after the sign of life monitoring has elapsed, the axis will be stopped with
maximum deceleration. In this case, an error message is displayed ("ErrorID" =
16#8013) and the master control is passed back to the user program.
● If the axis control panel is covered by a dialog, such as "Save as", during its
operation with the axis control panel, the axis is stopped with maximum deceleration
and the master control is returned to the user program.
If the "Stop" button is covered during operation with the axis control panel, for
example by scrolling or by another window, the master control is retained but the
axis is stopped with maximum deceleration.
If you change to another window within the TIA Portal, to the project tree for
example, during operation with the axis control panel, the master control and motion
of the axis is maintained, provided that the axis control panel is embedded in the
TIA Portal. If the axis control panel is replaced by the TIA Portal and you change to
another window within the TIA Portal, to the project tree for example, the master
control is retained but the axis is stopped with maximum deceleration.
If you change to another window outside the TIA Portal during operation with the
axis control panel, the master control is retained but the axis is stopped with
maximum deceleration.
● When you click the "Activate" button, a warning message is displayed. In the
warning, you can adapt the sign-of-life monitoring (100 to 60000 ms).
If the master control of the axis control panel is lost repeatedly without a direct error
message, the online connection to the CPU may be impaired because the
communication load is too high. In this case, the message "Error during
commissioning" is entered in the message display log. Sign-of-life failure between
controller and TIA Portal" is displayed.
To eliminate this error, adapt the sign-of-life monitoring in the warning.
● Until master control is returned, the user program has no influence on the functions
of the technology object. Motion Control jobs from the user program to the
technology object are rejected with error ("ErrorID" = 16#8012: Axis control panel
enabled).
● When master control is taken over, the configuration of the technology object is
adopted. Changes to the configuration of the technology object do not take effect
until leading control has been returned. Therefore, make any necessary changes
before master control is assumed again.
● If master control has been taken over for the technology object, the axis control
panel is blocked for access by another instance of the TIA Portal (Team Engineering
as of CPU V1.5).
"Deactivate" but‐ With the "Deactivate" button, you return master control to your user program.
ton

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1679

Control de movimiento
6.1 Using S7-1500 Motion Control
Area

Element

Axis

Description
In the "Axis" area, you can enable or disable the technology object.

"Enable" button
"Disable" button

With the "Enable" button, you enable the selected technology object
With the "Disable" button, you disable the selected technology object

Operating mode

Select the required mode in the "Operating mode" drop-down list.

Modify

The "Control" area displays the parameters for traversing with the axis control panel
according to the selected operating mode.
Position

Position to which the axis is homed.
("Homing" and "Set home position" modes only)

Distance

Distance the axis is traversed.
("Relative positioning" mode only)

Target position

Position to which the axis is traversed.
("Absolute positioning" mode only)

Velocity/
Velocity or speed at which the axis is traversed.
Velocity setpoint Default: 10% of the configured value in the "Technology object > Configuration > Ex‐
tended parameters > Limits > Dynamics limits".
(Velocity/speed setpoint, "Jog" and "Positioning" modes only)
Acceleration

Acceleration with which the axis is traversed.
Default: 10% of the configured value in the "Technology object > Configuration > Ex‐
tended parameters > Limits > Dynamics limits".

Deceleration

Deceleration with which the axis is traversed.
Default: 10% of the configured value in the "Technology object > Configuration > Ex‐
tended parameters > Limits > Dynamics limits".

Jerk

Jerk with which the axis is traversed.
Default: 100% of the configured value in "Technology objects > Configuration > Exten‐
ded parameters > Limits > Dynamic limits".

"Start" button

With the "Start" button, you start a job according to the selected operating mode.

"Forward" button With the "Forward" button, you start a motion in the positive direction according to the
selected operating mode.
"Backward" but‐
ton

With the "Backward" button, you start a motion in the negative direction according to the
selected operating mode.

"Stop" button

With the "Stop" button, you cancel a job or stop the axis.
If the "Stop" button is covered during operation with the axis control panel, for example
by scrolling or by another window, the master control is retained but the axis is stopped
with maximum deceleration.

Axis status

1680

The "Axis status" area displays the status of the axis and the status of the drive.
Drive ready

Drive is ready to execute setpoints.

Error

An error occurred at the technology object.

Enabled

The technology object has been enabled. The axis can be moved with motion jobs.

Homed

The technology object is homed.

More

The "More" link takes you to the window "Technology object > Diagnostics > Status and
error bits".

Active errors

The error that occurred most recently is displayed in the "Active errors" text field.

"Confirm" button

With the "Confirm" button, you acknowledge pending errors.

Alarm display

You can access the alarm display in the Inspector window by clicking on the "Alarm
display" link.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Area

Element

Actual values

Description
The "Current values" area shows the actual values of the axis.

Position

Actual position of the axis

Velocity

Actual velocity of the axis

Nota
No transfer of the parameters
Parameter values that you use in the axis control panel are discarded when the axis control
panel is closed.
To use the parameter values in the user program, transfer the values to the configuration.

Operating mode
The following table shows the operating modes of the axis control panel:
Operating mode

Description

Homing

This function corresponds to active homing. The parameters for homing (Página 1589) must be
configured.
Homing is not possible with an absolute encoder. The technology object is not referenced when this
mode is used with an absolute encoder.

Set home position

This function corresponds to direct homing (absolute).
With the "Start" button, you set the actual position to the value specified in "Position" and the "Ho‐
med" status is set.

Jog

Motion commands occur by means of jogging.
With the "Forward" or "Backward" button you start motion in the positive or negative direction. The
motion runs for as long as you hold down the left mouse button.

Velocity specification/
speed setpoint

The axis is moved at the specified velocity or speed until you stop the movement.

Positioning relative

The positioning is executed as a controlled, relative traversing motion according to the defaults
assigned under "Controller".

Positioning absolute

The positioning is executed as a controlled, absolute traversing motion according to the defaults
assigned under "Controller".

The motion commands are performed according to the setpoints assigned under "Controller".

If you have enabled the "Modulo" setting of the technology object, the buttons "Forward" and "Back‐
ward" are shown in the "Controller" area. The axis is positioned within the modulo range. Position
settings outside the modular range are recalculated to the modulo range.
If you have not enabled the "Modulo" setting of the technology object, only the "Start" button is shown
in the "Controller" area. You can directly approach the entered position.

Using the axis control panel
You traverse individual axes with the axis control panel. You assume master control of a
technology object and control the motions of the axis.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1681

Control de movimiento
6.1 Using S7-1500 Motion Control

Requirement
● The project has been created and downloaded to the CPU.
● The CPU must be in the RUN mode.
● The technology object is disabled by your user program ("MC_Power.Enable" = FALSE).
● The axis control panel for the technology object is not used by another instance of the
TIA Portal (Team Engineering as of CPU V1.5).

Procedure
Proceed as follows to enable control the axis using the axis control panel:
1. To assume master control of the technology object and to set up an online connection to the
CPU, click "Activate" in the "Master control" area.
A warning message is displayed.
2. If necessary, adapt the sign-of-life monitoring and click "OK".
3. To enable the technology object, click the "Enable" button in the "Axis" area.
4. In the drop-down list in the "Operation mode" area, select the desired function of the axis
control panel.
5. In the "Control" area, specify the parameter values for your job.
6. Depending on the mode selected, click the "Start", "Forward" or "Backward" button to start
the job.
7. Click the "Stop" button to stop the job.
8. Repeat steps 4 through 6 for additional jobs.
9. To disable the technology object, click the "Disable" button in the "Axis" area.
10.To return master control to your user program, click the "Deactivate" button in the "Master
control" area.

1682

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Optimization
Function and structure of the optimization
The "Optimization" function supports you in determining the optimal precontrol and gain (Kv
factor) for the closed loop position control of the axis. The axis velocity profile is recorded by
means of the Trace function for this purpose for the duration of a configurable positioning
movement. You can then evaluate the recording, and adjust the precontrol and gain
accordingly.
ADVERTENCIA
Uncontrolled axis motions
During operation with the optimization, the axis can execute uncontrolled motions (for
example, due to erroneous configuration of the drive or the technology object). In addition,
when a leading axis is moved, any synchronized following axis is also moved.
Therefore, perform the following protective measures before operation with the optimization:
● Ensure that the EMERGENCY OFF switch is within the reach of the operator.
● Enable the hardware limit switches.
● Enable the software limit switches.
● Ensure that following error monitoring is enabled.
● Make sure that no following axis is coupled to the axis to be moved.
The "Optimization" function for the positioning axis and synchronous axis technology objects
can be found in the project tree under "Technology object > Commissioning".
The "Tuning" dialog is divided into the following areas:
● Master control
● Axis
● Measurement configuration
● Optimize position controller
● Run measurement
● Trace

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1683

Control de movimiento
6.1 Using S7-1500 Motion Control
The following table lists the elements of optimization:
Area

Element

Master control

Description
In the "Master control" area, you take over master control of the technology object, or
return it to your user program.

"Activate" button With the "Activate" button, you set up an online connection to the CPU and take over
master control for the selected technology object.
● To take over master control, the technology object must be disabled in the user
program.
● Any synchronized following axis is moved as well when moving a leading axis with
the axis control panel.
● If the online connection to the CPU is lost during operation with the axis control
panel, then after the sign of life monitoring has elapsed, the axis will be stopped with
maximum deceleration. In this case, an error message is displayed ("ErrorID" =
16#8013) and the master control is passed back to the user program.
● When you click the "Activate" button, a warning message is displayed. You can
adapt the sign-of-life monitoring here (100 to 60000 ms).
If the master control of the axis control panel is lost repeatedly without a direct error
message, the online connection to the CPU may be impaired because the
communication load is too high. In this case, the message "Error during
commissioning. Sign-of-life failure between controller and TIA Portal" is displayed
in the message display log.
To eliminate this error, adapt the sign-of-life monitoring in the warning.
● Until master control is returned, the user program has no influence on the functions
of the technology object. Motion Control jobs from the user program to the
technology object are rejected with error ("ErrorID" = 16#8012: Axis control panel
enabled).
● When master control is taken over, the configuration of the technology object is
adopted. Changes to the configuration of the technology object do not take effect
until master control has been returned. For this reason, make any necessary
changes before master control is taken over.
● If master control has been taken over for the technology object, the axis control
panel is blocked for access by another installation of the TIA Portal (Team
Engineering as of CPU V1.5).
"Deactivate" but‐ With the "Deactivate" button, you return master control to your user program.
ton
Axis

1684

In the "Axis" area, you can enable or disable the technology object.
"Enable" button

With the "Enable" button, you enable the selected technology object

"Disable" button

With the "Disable" button, you disable the selected technology object

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Area
Measurement
configuration

Element

Description
In the "Measurement configuration" area, you configure the settings for a test step.

Distance

Travel distance for a test step

Measurement
duration

Time for a test step

"Customize
dynamics"
check box

The "Dynamics adapt" check box allows you to adapt the acceleration, deceleration and
maximum velocity.

Acceleration

Presetting of the acceleration for a test step

Deceleration

Default setting for delaying a test step

Maximum velo‐
city

Presetting of the maximum velocity for a test step

Optimize posi‐
tion controller

As long as the "Commissioning" working area is open, the previously set values are
displayed when the check box is selected again.

In the "Optimize position controller" area, you make the settings for optimization of the
controller characteristics.
symbol next to a field. The list of values
You open a list of values using the
contains the following values of the respective parameter:
● Online actual value
● Online start value
● Project start value
Enter the new value in the text field for the actual value. The new value is applied by
clicking the "Forward" or "Backward" button in the "Run measurement" area.
Precontrol

Current percentage velocity precontrol of the position controller

Current speed control loop substitute time
Speed control
loop substitute ti‐ With velocity precontrol, a simplified speed control loop model can be generated using
me
the speed control loop substitute time. This prevents the velocity variable being ove‐
rridden by the position controller during the acceleration and deceleration phases. To
accomplish this, the position setpoint of the position controller is delayed by the amount
of the speed control loop substitute time in relation to the velocity precontrol.
Gain
Run measure‐
ment

Current gain of the position controller (Kv)
In the "Run measurement" area, you perform the test steps.

"Forward" button With the "Forward" button, you start a test step for optimization in the positive direction.
"Backward" but‐
ton

With the "Backward" button, you start a test step for optimization in the negative direc‐
tion.

"Stop" button

You stop a test step with the "Stop" button. The axis decelerates with the configured
maximum deceleration.
If another window is superimposed on the "Stop" button, the axis stops.

Trace

The Trace function is displayed in the lower area of the "Tuning" dialog.
With each test step, a Trace recording of the required parameters is automatically
started and displayed after completion of the test step.
After master control has been returned, the Trace recording is deleted.
You can find a full description of the trace function in the section on using the "trace and
logic analyzer function".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1685

Control de movimiento
6.1 Using S7-1500 Motion Control

Nota
No automatic transfer of the parameters to the technology object
The configured parameter values are discarded after master control is returned.
Transfer the values as needed into your configuration. You can apply the values for the gain,
precontrol and speed control loop substitute time in your configuration using the "Project start
value" value.

Consulte también
Closed-loop control (Página 1613)

Optimize position controller
Requirements
● The CPU must be in the RUN mode.
● The project has been created and downloaded to the CPU.
● The technology object is disabled by your user program (MC_Power.Enable = FALSE).
● The axis control panel for the technology object is not used by another installation of the
TIA Portal (Team Engineering as of CPU V1.5).

Optimizing position control gain (Kv)
Proceed as follows to optimize the gain (Kv):
1. In the "Master control" area, click the "Activate" button to activate master control for the
technology object, and to establish an online connection to the CPU.
A warning message is displayed.
2. If necessary, adapt the sign-of-life monitoring and confirm with "OK".
3. In the "Axis" area, click the "Enable" button to enable the technology object.
4. If necessary, configure values for the distance, duration, and dynamics of a test step in the
"Measurement configuration" area.
5. If necessary, configure values for the precontrol and speed control loop substitute time of a
test step in the "Configure position controller" area.
6. Enter a start value for the gain. Start with a low value.

1686

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
7. Click the "Forward" or "Start" button to start a test step for the optimization.
For the specified duration, a setpoint is output according to the specified distance. The axis
moves by the specified distance. A trace recording of the motion (setpoint and actual
values) is created automatically.
You can find a full description of the trace function in the section on using the "trace and logic
analyzer function".
Nota
Adapt following error limits
If error messages from following error monitoring are repeatedly displayed during
optimization, temporarily adapt the following error limits.
8. Evaluate the curve of the trace recording. Adapt the gain incrementally. Click the "Forward"
or "Backward" button after each value you enter. This applies the value and start a new
movement and trace recording each time.
When adjusting the gain, pay attention to the following properties of the curve:
● The curve shows a brief compensation time.
● The curve does not show any motion reversal of the actual position.
● When approaching the position setpoint, no overshoot occurs.
● The curve shows a stable overall behavior (oscillation-free curve).
The following trace recording shows a curve with a long settling time:

The following trace recording shows a curve with overshoot when approaching the setpoint:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1687

Control de movimiento
6.1 Using S7-1500 Motion Control

The following trace recording shows a curve in which the gain is optimal and the overall
response is steady:

Transferring the parameter values of the position controller to the project
To transfer the determined parameter values of the position controller to your project, follow
these steps:
1. Click the
icon next to the field of the respective parameter.
A list of values is displayed.
2. Enter the measured value in the "Project start value" field of the value list.
3. In the "Axis" area, click the "Disable" button to disable the technology object.
4. In the "Master control" area, click the "Deactivate" button to return master control to your
user program.
5. Load your project into the CPU.

1688

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

6.1.2.5

Diagnostics
The "Diagnostics" section is limited to the description of the diagnostic view of the Speed axis,
Positioning axis and External encoder technology objects in the TIA Portal.
You will find a description of Motion Control diagnostics in the following sections of the
"S7-1500/S7-1500T Motion Control overview" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766459):
● Diagnostics concept
● Technology alarms
● Errors in Motion Control instructions
A comprehensive description of the system diagnostics of the S7‑1500 CPU can be found in the
"Diagnostics" function manual (https://support.automation.siemens.com/WW/view/en/
59192926).

Speed-controlled axis technology object
Status and error bits
You use the "Technology object > Diagnostics > Status and error bits" diagnostic function in the
TIA Portal to monitor the status and error messages for the technology object. The Diagnostics
function is available in online operation.
The meaning of the status and error messages is described in the following tables. The
associated technology object tag is given in parentheses.

Axis status
The following table shows the possible axis status values:
Status

Description

Simulation active

The axis is simulated in the CPU. Setpoints are not output to the drive.

Enabled

The technology object has been enabled. The axis can be moved with motion
jobs.
(<TO>.StatusWord.X0 (Enable))

Error

An error occurred at the technology object. Detailed information about the
error is available in the "Error" area and in the "<TO>.ErrorDetail.Number"
and "<TO>.ErrorDetail.Reaction" tags of the technology object.
(<TO>.StatusWord.X1 (Error))

Restart active

The technology object is being reinitialized.
(<TO>.StatusWord.X2 (RestartActive))

Axis control panel ena‐
bled

The axis control panel is active. The axis control panel has master control
over the technology object. The axis cannot be controlled from the user pro‐
gram.
(<TO>.StatusWord.X4 (ControlPanelActive))

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1689

Control de movimiento
6.1 Using S7-1500 Motion Control
Status

Description

Drive ready

Drive is ready to execute setpoints.
(<TO>.StatusDrive.InOperation)

Restart required

Data relevant for the restart has been changed. The changes are applied only
after a restart of the technology object.
(<TO>.StatusWord.X3 (OnlineStartValuesChanged))

Motion status
The following table shows the possible axis motion status values:
Status

Description

Done (no job running)

No motion job is running for the technology object.
(<TO>.StatusWord.X6 (Done))

Jog

The axis is being moved with a job for jog mode of Motion Control instruction
"MC_MoveJog" or from the axis control panel.

Speed setpoint

The axis is traversed with a job with speed setpoint of the Motion Control
instruction "MC_MoveVelocity" or using the axis control panel.

Constant speed

The axis is moved with constant speed or is stationary.

(<TO>.StatusWord.X9 (JogCommand))

(<TO>.StatusWord.X10 (VelocityCommand))
(<TO>.StatusWord.X12 (ConstantVelocity))
Accelerating

Axis is being accelerated.
(<TO>.StatusWord.X13 (Accelerating))

Decelerating

The axis is being decelerated.

Torque limiting enabled

At least the threshold value (default 90%) of the preset force/torque limitation
acts on the axis.

Active stop job

The axis is stopped and disabled by Motion Control instruction "MC_Stop".

(<TO>.StatusWord.X14 (Decelerating))

(<TO>.StatusWord.X27 (InLimitation))
(<TO>.StatusWord2.X0 (StopCommand))

Warnings
The following table shows the possible warnings:
Warning

Description

Configuration

One or several configuration parameters are adapted internally at a given
time.
(<TO>.WarningWord.X1 (ConfigWarning))

Job rejected

A job cannot be executed.
A Motion Control instruction cannot be executed because necessary requi‐
rements have not been met.
(<TO>.WarningWord.X3 (CommandNotAccepted))

Dynamic limitation

The dynamic values are limited to the dynamic limits.
(<TO>.WarningWord.X6 (DynamicWarning))

1690

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Error
The following table shows the possible errors:
Error

Description

System

A system-internal error has occurred.
(<TO>.ErrorWord.X0 (SystemFault))

Configuration

A configuration error has occurred.
One or more configuration parameters are inconsistent or invalid.
The technology object was incorrectly configured, or editable configuration
data were incorrectly modified during runtime of the user program.
(<TO>.ErrorWord.X1 (ConfigFault))

User program

An error occurred in the user program with a Motion Control instruction or its
use.
(<TO>.ErrorWord.X2 (UserFault))

Drive

An error occurred in the drive.
(<TO>.ErrorWord.X4 (DriveFault))

Data exchange

Communication with a connected device is faulty.
(<TO>.ErrorWord.X7 (CommunicationFault))

I/O

An error occurred accessing a logical address.
(<TO>.ErrorWord.X13 (PeripheralError))

Job rejected

A job cannot be executed.
A Motion Control instruction cannot be executed because necessary requi‐
rements have not been met (e.g. technology object not homed).
(<TO>.ErrorWord.X3 (CommandNotAccepted))

Dynamic limitation

The dynamic values are limited to the dynamic limits.
(<TO>.ErrorWord.X6 (DynamicError))

Alarm display
For additional information and to acknowledge the error, go to the Inspector window by clicking
on the "Alarm display" link.

Additional information
An option for evaluating the individual status bits can be found in the section "Evaluating
StatusWord, ErrorWord and WarningWord" of the "S7-1500/S7-1500T Motion Control
overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459) documentation.

Consulte también
"StatusWord" tag (speed axis) (Página 1710)
"ErrorWord" tag (speed axis) (Página 1713)
"WarningWord" tag (speed axis) (Página 1715)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1691

Control de movimiento
6.1 Using S7-1500 Motion Control

Motion status
You use the "Technology object > Diagnostics > Motion status" diagnostic function in the TIA
Portal to monitor the motion status of the axis. The Diagnostics function is available in online
operation.

"Setpoints" area
The following table shows the meaning of the status data:
Status

Description

Speed setpoint

Speed setpoint of the axis

Speed override

Speed setpoint correction as percentage

(<TO>.Velocity)
The speed setpoint specified in motion control instructions or set by the axis
control panel are superimposed with an override signal and corrected as a
percentage. Valid speed correction values range from 0.0 % to 200.0 %.
(<TO>.Override.Velocity)

"Current values" area
The following table shows the meaning of the status data:
Status

Description

Actual speed

Actual speed of the axis
(<TO>.ActualSpeed)

"Dynamic limits" area
This area displays the limit values for the dynamic parameters.
The following table shows the meaning of the status data:
Status

Description

Speed

Configured maximum speed
(<TO>.DynamicLimits.MaxVelocity)

Acceleration

Configured maximum acceleration
(<TO>.DynamicLimits.MaxAcceleration)

Deceleration

Configured maximum deceleration
(<TO>.DynamicLimits.MaxDeceleration)

Jerk

Configured maximum jerk
(<TO>.DynamicLimits.MaxJerk)

PROFIdrive telegram
The "Technology object > Diagnostics > PROFIdrive telegram" diagnostics function is used in
the TIA Portal to monitor the PROFIdrive telegram that the drive returns to the controller. The
Diagnostics function is available in online operation.

1692

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

"Drive" area
This area displays the following parameters contained in the PROFIdrive telegram from the
drive to the controller:
● Status words "ZSW1" and "ZSW2"
● The speed setpoint (NSET) that was output to the drive
● The actual speed that was signaled from the drive (NACT)

Positioning axis technology object
Status and error bits
You use the "Technology object > Diagnostics > Status and error bits" diagnostic function in the
TIA Portal to monitor the status and error messages for the technology object. The Diagnostics
function is available in online operation.
The meaning of the status and error messages is described in the following tables. The
associated technology object tag is given in parentheses.

Axis status
The following table shows the possible axis status values:
Status

Description

Simulation active

The axis is simulated in the CPU. Setpoints are not output to the drive.
(<TO>.StatusWord.X25 (AxisSimulation))

Enabled

The technology object has been enabled. You can move the axis with motion
jobs.
(<TO>.StatusWord.X0 (Enable))

Position-controlled mo‐
de

The axis is in position-controlled mode.

Homed

The technology object is homed. The relationship between the position in the
technology object and the mechanical position was successfully created.

(Inversion of <TO>.StatusWord.X28 (NonPositionControlled))

(<TO>.StatusWord.X5 (HomingDone))
Error

An error occurred at the technology object. Detailed information about the
error is available in the "Error" area and in the "<TO>.ErrorDetail.Number"
and "<TO>.ErrorDetail.Reaction" tags of the technology object.

Restart active

The technology object is being reinitialized.

(<TO>.StatusWord.X1 (Error))
(<TO>.StatusWord.X2 (RestartActive))
Axis control panel ena‐
bled

The axis control panel is active. The axis control panel has master control
over the technology object. You cannot control the axis from the user pro‐
gram.
(<TO>.StatusWord.X4 (ControlPanelActive))

Drive ready

Drive is ready to execute setpoints.
(<TO>.StatusDrive.InOperation)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1693

Control de movimiento
6.1 Using S7-1500 Motion Control
Status

Description

Encoder values valid

The actual encoder values are valid.
(<TO>.StatusSensor[1].State)

Actual encoder values
valid (S7‑1500T)

The actual encoder values of encoder 1, encoder 2, encoder 3 or encoder 4
are valid.

Active encoder

Encoder is operational.

(<TO>.StatusSensor[1..4].State)
(<TO>.OperativeSensor)
Active encoder
(S7‑1500T)

The encoder in effect operationally is encoder 1, encoder 2, encoder 3 or
encoder 4.

Restart required

Data relevant for the restart has been changed. The changes are applied only
after a restart of the technology object.

(<TO>.OperativeSensor)

(<TO>.StatusWord.X3 (OnlineStartValuesChanged))

Status limit switch
The following table shows the possibilities for enabling the software and hardware limit
switches:
Status

Description

Negative SW limit
switch approached.

The negative software limit switch was reached.

Positive SW limit switch
approached.

The positive software limit switch was reached.

Negative HW limit
switch approached.

The negative hardware limit switch has been approached or overtraveled.

Positive HW limit switch
approached.

The positive hardware limit switch has been approached or overtraveled.

(<TO>.StatusWord.X15 (SWLimitMinActive))
(<TO>.StatusWord.X16 (SWLimitMaxActive))
(<TO>.StatusWord.X17 (HWLimitMinActive))
(<TO>.StatusWord.X18 (HWLimitMaxActive))

Motion status
The following table shows the possible axis motion status values:
Status

Description

Done (no job running)

No job active at technology object.
(<TO>.StatusWord.X6 (Done))

Homing job

The technology object executes a homing job of the Motion Control instruc‐
tion "MC_Home" or from the axis control panel.
(<TO>.StatusWord.X11 (HomingCommand))

Jog

The axis is being moved with a job for jog mode of Motion Control instruction
"MC_MoveJog".

Velocity specification

The axis is traversed with a job with velocity specification of the Motion Con‐
trol instruction "MC_MoveVelocity" or from the axis control panel.

(<TO>.StatusWord.X9 (JogCommand))

(<TO>.StatusWord.X10 (VelocityCommand))

1694

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Status

Description

Positioning job

The axis is traversed with a positioning job of Motion Control instruction
"MC_MoveAbsolute" or "MC_MoveRelative" or from the axis control panel.

Constant velocity

The axis is moved with constant velocity or is stationary.

(<TO>.StatusWord.X8 (PositioningCommand))
(<TO>.StatusWord.X12 (ConstantVelocity))
Standstill

The axis is in standstill.
(<TO>.StatusWord.X7 (StandStill))

Accelerating

Axis is being accelerated.
(<TO>.StatusWord.X13 (Accelerating))

Decelerating

The axis is being decelerated.
(<TO>.StatusWord.X14 (Decelerating))

Torque limiting enabled

At least the threshold value (default 90%) of the preset force/torque limitation
acts on the axis.

Active stop job

The axis is stopped and disabled by Motion Control instruction "MC_Stop".

(<TO>.StatusWord.X27 (InLimitation))
(<TO>.StatusWord2.X0 (StopCommand))

Warnings
The following table shows the possible warnings:
Warning

Description

Configuration

One or more configuration parameters are being internally adapted tempo‐
rarily.
(<TO>.WarningWord.X1 (ConfigWarning))

Job rejected

Job cannot be executed.
You cannot execute a Motion Control instruction because necessary requi‐
rements are not fulfilled.
(<TO>.WarningWord.X3 (CommandNotAccepted))

Dynamic limitation

The dynamic values are limited to the dynamic limits.
(<TO>.WarningWord.X6 (DynamicWarning))

Error
The following table shows the possible errors:
Error

Description

System

A system-internal error has occurred.
(<TO>.ErrorWord.X0 (SystemFault))

Configuration

A configuration error has occurred.
One or more configuration parameters are inconsistent or invalid.
The technology object was incorrectly configured, or editable configuration
data were incorrectly modified during runtime of the user program.
(<TO>.ErrorWord.X1 (ConfigFault))

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1695

Control de movimiento
6.1 Using S7-1500 Motion Control
Error

Description

User program

An error occurred in the user program with a Motion Control instruction or its
use.
(<TO>.ErrorWord.X2 (UserFault))

Drive

An error occurred in the drive.
(<TO>.ErrorWord.X4 (DriveFault))

Encoder

An error occurred in the encoder system.

Encoder (S7‑1500T)

An error has occurred in the encoder system of encoder 1, encoder 2, enco‐
der 3 or encoder 4.

Data exchange

Communication with a connected device is faulty.

(<TO>.ErrorWord.X5 (SensorFault))

(<TO>.ErrorWord.X5 (SensorFault))
(<TO>.ErrorWord.X7 (CommunicationFault))
I/O

An error occurred accessing a logical address.
(<TO>.ErrorWord.X13 (PeripheralError))

Job rejected

A job cannot be executed.
You cannot execute a Motion Control instruction because necessary requi‐
rements are not fulfilled (for example, technology object not homed).
(<TO>.ErrorWord.X3 (CommandNotAccepted))

Homing

An error occurred during a homing process.
(<TO>.ErrorWord.X10 (HomingFault))

Positioning

The positioning axis was not positioned correctly at the end of a positioning
motion.
(<TO>.ErrorWord.X12 (PositioningFault))

Dynamic limitation

The dynamic values are limited to the dynamic limits.
(<TO>.ErrorWord.X6 (DynamicError))

Following error

The maximum permitted following error has been exceeded.
(<TO>.ErrorWord.X11 (FollowingErrorFault))

SW limit switch

A software limit switch has been reached.
(<TO>.ErrorWord.X8 (SwLimit))

HW limit switch

A hardware limit switch has been reached or overtraveled.
(<TO>.ErrorWord.X9 (HWLimit))

Adaptation

An error occurred during data adaption.
(<TO>.ErrorWord.X15 (AdaptionError))

Alarm display
For additional information and to acknowledge the error, go to the Inspector window by clicking
on the "Alarm display" link.

Additional information
An option for evaluating the individual status bits can be found in the section "Evaluating
StatusWord, ErrorWord and WarningWord" of the "S7-1500/S7-1500T Motion Control
overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459) documentation.

1696

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
"StatusWord" tag (positioning axis) (Página 1750)
"ErrorWord" tag (positioning axis) (Página 1754)
"WarningWord" tag (positioning axis) (Página 1757)

Motion status
You use the "Technology object > Diagnostics > Motion status" diagnostic function in the TIA
Portal to monitor the motion status of the axis. The Diagnostics function is available in online
operation.

"Setpoints" area
The following table shows the meaning of the status data:
Status

Description

Target position

Current target position of an active positioning job
The target position value is only valid during execution of a positioning job.
(<TO>.StatusPositioning.TargetPosition)

Position setpoint

Setpoint position of the axis

Velocity setpoint

Velocity setpoint of the axis

Velocity override

Percentage correction of the velocity specification

(<TO>.Position)
(<TO>.Velocity)
The velocity setpoint specified in Motion Control instructions or set by the axis
control panel is superimposed with an override signal and corrected as a
percentage. Valid velocity correction values range from 0.0 % to 200.0 %.
(<TO>.Override.Velocity)

"Current values" area
The following table shows the meaning of the status data:
Status

Description

Operative encoder

Operative encoder of the axis

Actual position

Actual position of the axis
If the technology object is not homed, then the value is displayed relative to
the position that existed when the technology object was enabled.
(<TO>.ActualPosition)

Actual velocity

Actual velocity of the axis
(<TO>.ActualVelocity)

Following error

Following error of the axis
(<TO>.StatusPositioning.FollowingError)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1697

Control de movimiento
6.1 Using S7-1500 Motion Control

"Dynamic limits" area
This area displays the limit values for the dynamic parameters.
The following table shows the meaning of the status data:
Status

Description

Velocity

Configured maximum velocity
(<TO>.DynamicLimits.MaxVelocity)

Acceleration

Configured maximum acceleration
(<TO>.DynamicLimits.MaxAcceleration)

Deceleration

Configured maximum deceleration
(<TO>.DynamicLimits.MaxDeceleration)

Jerk

Configured maximum jerk
(<TO>.DynamicLimits.MaxJerk)

PROFIdrive telegram
The "Technology object > Diagnostics > PROFIdrive telegram" diagnostics function is used in
the TIA Portal to monitor the PROFIdrive telegrams returned by the drive and encoder. The
display of the Diagnostics function is available in online operation.

"Drive" area
This area displays the following parameters contained in the PROFIdrive telegram from the
drive to the controller:
● Status words "ZSW1" and "ZSW2"
● The speed setpoint (NSET) that was output to the drive
● The actual speed that was signaled from the drive (NACT)

"Encoder" area
in the areas "Encoder" for CPU S7-1500 or "Encoder 1" to "Encoder 4" for CPU S7-1500T, the
following parameters from the PROFIdrive telegram are displayed by the encoder to the
controller.
● Status word "Gx_ZSW"
● The actual position value "Gx_XIST1" (cyclic actual encoder value)
● The actual position value "Gx_XIST2" (absolute encoder value)

Technology object external encoder
Status and error bits
You use the "Technology object > Diagnostics > Status and error bits" diagnostic function in the
TIA Portal to monitor the status and error messages for the technology object. The diagnostics
function is available in online operation.

1698

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The meaning of the status and error messages is described in the following tables. The
associated technology object tag is given in parentheses.

Encoder status
The following table shows the possible external encoder status values:
Status

Description

Encoder enabled

The technology object has been enabled.
(<TO>.StatusWord.X0 (Enable))

Homed

The technology object is homed. The relationship between the position in the
technology object and the mechanical position was successfully created.
(<TO>.StatusWord.X5 (HomingDone))

Error

An error occurred at the technology object. Detailed information about the
error is available in the "Error" area and in the "<TO>.ErrorDetail.Number"
and "<TO>.ErrorDetail.Reaction" tags of the technology object.
(<TO>.StatusWord.X1 (Error))

Restart active

The technology object is being reinitialized.

Encoder values valid

The actual encoder values are valid.

Restart required

Data relevant for the restart has been changed. The changes are applied only
after a restart of the technology object.

(<TO>.StatusWord.X2 (RestartActive))
(<TO>.StatusSensor[n].State)

(<TO>.StatusWord.X3 (OnlineStartValuesChanged))

Motion status
The following table shows the possible states of the job execution:
Status

Description

Done (no job running)

No Motion Control job is running for the technology object.
(Enable by "MC_Power" job excepted)
(<TO>.StatusWord.X6 (Done))

Homing job

The technology object executes a homing job of the Motion Control instruc‐
tion "MC_Home".
(<TO>.StatusWord.X11 (HomingCommand))

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1699

Control de movimiento
6.1 Using S7-1500 Motion Control

Error
The following table shows the possible errors:
Error

Description

System

A system-internal error has occurred.
(<TO>.ErrorWord.X0 (SystemFault))

Configuration

A configuration error has occurred.
One or more configuration parameters are inconsistent or invalid.
The technology object was incorrectly configured, or editable configuration
data were incorrectly modified during runtime of the user program.
(<TO>.ErrorWord.X1 (ConfigFault))

User program

An error occurred in the user program with a Motion Control instruction or its
use.
(<TO>.ErrorWord.X2 UserFault))

Encoder

An error occurred in the encoder system.
(<TO>.ErrorWord.X5 (SensorFault))

Data exchange

Missing or faulty communication.
(<TO>.ErrorWord.X7 (CommunicationFault))

Adaptation

An error occurred during data adaption.
(<TO>.ErrorWord.X15 (AdaptionError))

Alarm display
For additional information and to acknowledge the error, go to the Inspector window by clicking
on the "Alarm display" link.

Additional information
An option for evaluating the individual status bits can be found in the section "Evaluating
StatusWord, ErrorWord and WarningWord" of the "S7-1500/S7-1500T Motion Control
overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459) documentation.

Consulte también
"StatusWord" tag (external encoder) (Página 1772)
"ErrorWord" tag (external encoder) (Página 1773)
"WarningWord" tag (external encoder) (Página 1775)

Motion status
You use the "Technology object > Diagnostics > Motion status" diagnostic function in the TIA
Portal to monitor the actual encoder values. The diagnostics function is available in online
operation.

1700

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

"Current values" area
The following table shows the meaning of the status data:
Status

Description

Actual position

Actual position of the axis
If the technology object is not homed, then the value is displayed relative to
the position that existed when the technology object was enabled.
(<TO>.ActualPosition)

Actual velocity

Actual velocity of the axis
(<TO>.ActualVelocity)

PROFIdrive telegram
The "Technology object > Diagnostics > PROFIdrive telegram" diagnostic function is used in
the TIA Portal to monitor the PROFIdrive telegram of the encoder. The display of the
diagnostics function is available in technology object online mode.

"Encoder" area
This area displays the following parameters contained in the PROFIdrive telegram that the
encoder returns to the controller:
● Status word "G1_ZSW"
● The actual position value "G1_XIST1" (cyclic actual encoder value)
● The actual position value "G1_XIST2" (absolute value of the encoder)

6.1.2.6

Appendix

Tags of the speed axis technology object
Legend
Tag

Name of the tag

Data type

Data type of the tag

Values

Value range of the tag - minimum value to maximum value
If no specific value is shown, the value range limits of the relevant data type apply or the information under
"Description".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1701

Control de movimiento
6.1 Using S7-1500 Motion Control
W

Effectiveness of changes in the technology data block
DIR

Direct:
Values are changed via direct assignment and take effect at the start of the next MC‑Ser‐
vo [OB91].

CAL

At call of Motion Control instruction:
Values are changed directly and take effect at the start of the next MC‑Servo [OB91] after the
call of the corresponding Motion Control instruction in the user program.

RES

Restart:
Changes to the start value in the load memory are made using the extended instruction
"WRIT_DBL" (write to DB in load memory). Changes will not take effect until after restart of the
technology object.

RON

Read only:
The tag cannot and must not be changed during runtime of the user program.

Description

Description of the tag

Access to the tags is with "<TO>.<tag name>". The placeholder <TO> represents the name of
the technology object.

Actual values and setpoints (speed axis)
The following tags indicate the setpoint and actual values of the technology object.

Tags
Legend (Página 1701)
Tag

Data type

Values

W

Description

Velocity

LREAL

-

RON

Velocity setpoint/speed setpoint

ActualSpeed

LREAL

-

RON

With analog setpoint = 0.0:
Actual speed of the motor

Acceleration

LREAL

-

VelocitySetpoint

LREAL

-1.0E12 to 1.0E RON
12

RON

Setpoint acceleration
Output velocity setpoint/speed setpoint

"Simulation" tag (speed axis)
The tag structure "<TO>.Simulation.<tag name>" contains the configuration of the simulation
mode. In simulation mode, you can simulate axes without a real drive in the CPU.

1702

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1701)
Tag

Data type

Simulation.

TO_Struct_AxisSimulation

Mode

1)

UDINT

Values
0, 1

W

Description

RES1)

Simulation mode
0

No simulation, normal operation

1

Simulation mode

Technology version V2.0: RON

"VirtualAxis" tag (speed axis)
The tag structure "<TO>.VirtualAxis.<tag name>" contains the configuration of the simulation
mode. In simulation mode, you can simulate axes without a real drive in the CPU.

Tags
Legend (Página 1701)
Tag

Data type

VirtualAxis.

Values

W

Description

RON

Virtual axis

TO_Struct_VirtualAxis

Mode

UDINT

0, 1

0

No virtual axis

1

Axis is always and exclusively operated as vir‐
tual axis

"Actor" tag (speed axis)
The tag structure "<TO>.Actor.<tag name>" contains the controller-side configuration of the
drive.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1703

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1701)
Tag

Data type

Actor.

TO_Struct_Actor

1704

Values

W

Description

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
Type

InverseDirection

DataAdaption

Data type

Values

W

Description

DINT

0, 1

RON

Drive connection

BOOL

DINT

-

0, 1

Efficiency

LREAL

Interface.

TO_Struct_ActorInterface

0.0 to 1.0

RES

RES

RES

0

Analog output

1

PROFIdrive telegram

Inversion of the setpoint
FALSE

No

TRUE

Yes

Automatic transfer of the drive values reference speed,
maximum speed and reference torque in the device
0

No automatic transfer, manual configuration of
values

1

Automatic transfer of values configured in the
drive to the configuration of the technology ob‐
ject

Efficiency of gear

AddressIn

VREF

0 to 65535

RON

Input address for the PROFIdrive telegram

AddressOut

VREF

0 to 65535

RON

Output address for the PROFIdrive telegram or the analog
setpoint

EnableDriveOutput

BOOL

-

RES

"Enable output" for analog drives
FALSE

Disabled

TRUE

Enabled

EnableDriveOutpu‐
tAddress

VREF

0 to 65535

RON

Address for the "Enable output" for analog setpoint

DriveReadyInput

BOOL

-

RES

"Ready input" for analog drives
The analog drive signals its readiness to receive speed
setpoints.
FALSE

Disabled

TRUE

Enabled

DriveReadyInputA‐
ddress

VREF

0 to 65535

RON

Address for the "Enable input" for analog setpoint

EnableTorqueData

BOOL

-

RES

Torque data
FALSE

Disabled

TRUE

Enabled

TorqueDataAddres‐
sIn

VREF

0 to 65535

RON

Input Address of the Telegram 750

TorqueDataAddres‐
sOut

VREF

0 to 65535

RON

Output address of the telegram 750

DriveParameter.
ReferenceSpeed

TO_Struct_ActorDriveParameter
LREAL

0.0 to 1.0E12

RES

Reference value (100%) for the speed setpoint (N-set) of
the drive
The speed setpoint is transferred in the PROFIdrive tele‐
gram as a normalized value from -200% to 200% of the
"ReferenceSpeed".
For setpoint specification via an analog output, the analog
output can be operated in the range from -117% to 117%,
provided the drive permits this.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1705

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
MaxSpeed

Data type

Values

W

Description

LREAL

0.0 to 1.0E12

RES

Maximum value for the speed setpoint of the drive (N-set)
(PROFIdrive: MaxSpeed ≤ 2 × ReferenceSpeed
Analog setpoint: MaxSpeed ≤ 1.17 × ReferenceSpeed)

ReferenceTorque

LREAL

0.0 to 1.0E12

RES

Reference torque of drive (p2003)
Valid for the standard motor setting.

"TorqueLimiting" tag (speed axis)
The tag structure "<TO>.TorqueLimiting.<tag name>" contains the configuration of the torque
limiting.

Tags
Legend (Página 1701)
Tag

Data type

TorqueLimiting.

TO_Struct_TorqueLimiting

LimitBase

DINT

PositionBasedMonito‐
rings
LimitDefaults.

DINT

Values
0, 1

0, 1

W

Description

RES

Torque limiting

RES

0

Motor side

1

Load side

Positioning and following error monitoring
0

Monitoring deactivated

1

Monitoring activated

TO_Struct_TorqueLimitingLimitDe‐
faults

Torque

LREAL

0.0 to 1.0E12

CAL

Limiting torque

Force

LREAL

0.0 to 1.0E12

CAL

Limiting force

"LoadGear" tag (speed axis)
The tag structure "<TO>.LoadGear.<tag name>" contains the configuration of the load gear.

Tags
Legend (Página 1701)
Tag

Data type

Value range

LoadGear.

TO_Struct_LoadGear

W

Description

Numerator

UDINT

1 to 429496729 RES
5

Load gear numerator

Denominator

UDINT

1 to 429496729 RES
5

Load gear denominator

1706

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

"Units" tag (speed axis)
The tag structure "<TO>.Units.<tag name>" shows the set technological units.

Tags
Legend (Página 1701)
Values

W

Tag

Data type

Units.

TO_Struct_Units / TO_Struct_Exter‐
nalEncoder_Units

VelocityUnit

TimeUnit

UDINT

UDINT

-

-

RON

RON

Description

Unit for velocity
1082

1/s

1083

1/min

1528

1/h

Unit for time
1054

TorqueUnit

ForceUnit

UnitFactor

UDINT

UDINT

UDINT

-

-

-

RON

RON

RON

s

Unit for torque
1126

Nm

1128

kNm

1529

lbf in (pound-force-inch)

1530

lbf ft

1531

ozf in (ounce-force-inch)

1532

ozf ft

1533

pdl in (poundal-inch)

1534

pdl ft

Unit for force
1120

N

1122

kN

1094

lbf (pound-force)

1093

ozf (ounce-force)

1535

pdl (poundals)

Factor for internal conversion in the high-resolution units.

"DynamicLimits" tag (speed axis)
The tag structure "<TO>.DynamicLimits.<tag name>" contains the configuration of the
dynamic limits. During Motion Control, no dynamic values greater than the dynamic limits are
permitted. If you have specified greater values in a Motion Control instruction, then motion is
performed using the dynamic limits, and a warning is indicated (alarm 501 to 503 - Dynamic
values were limited).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1707

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1701)
Tag

Data type

Values

DynamicLimits.

TO_Struct_DynamicLimits

W

Description

MaxVelocity

LREAL

0.0 to 1.0E12

RES

Maximum permissible velocity of the axis

MaxAcceleration

LREAL

0.0 to 1.0E12

DIR

Maximum permissible acceleration of the axis

MaxDeceleration

LREAL

0.0 to 1.0E12

DIR

Maximum permissible deceleration of the axis

MaxJerk

LREAL

0.0 to 1.0E12

DIR

Maximum permissible jerk on the axis

"DynamicDefaults" tag (speed axis)
The tag structure "<TO>.DynamicDefaults.<tag name>" contains the configuration of the
dynamic defaults. These settings will be used when you specify a dynamic value less than 0.0
in a Motion Control instruction (exceptions: "MC_MoveJog.Velocity",
"MC_MoveVelocity.Velocity"). Changes to the default dynamic values will be applied at the next
positive edge at the "Execute" parameter of a Motion Control instruction.

Tags
Legend (Página 1701)
Tag

Data type

Values

DynamicDefaults.

TO_Struct_DynamicDefaults

W

Description

Velocity

LREAL

0.0 to 1.0E12

CAL

Default velocity

Acceleration

LREAL

0.0 to 1.0E12

CAL

Default acceleration

Deceleration

LREAL

0.0 to 1.0E12

CAL

Default deceleration

Jerk

LREAL

0.0 to 1.0E12

CAL

Default jerk

EmergencyDecelera‐
tion

LREAL

0.0 to 1.0E12

DIR

Emergency stop deceleration

"Override" tag (speed axis)
The tag structure "<TO>.Override.<tag name>" contains the configuration of override
parameters. The override parameters are used to apply a correction percentage to default
values. An override change takes effect immediately, and is performed with the dynamic
settings in effect in the Motion Control instruction.

Tags
Legend (Página 1701)
Tag

Data type

Override.

TO_Struct_Override

Velocity

LREAL

Values
0.0 to 200.0%

W
DIR

Description
Velocity or speed override
Percentage correction of the velocity/speed

1708

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

"StatusDrive" tag (speed axis)
The tag structure "<TO>.StatusDrive.<tag name>" indicates the status of the drive.

Tags
Legend (Página 1701)
Values

Tag

Data type

StatusDrive.

TO_Struct_StatusDrive

InOperation

BOOL

CommunicationOK

BOOL

-

-

W

Description

RON

Operational status of the drive

RON

FALSE

Drive not ready. Setpoints will not be executed.

TRUE

Drive ready. Setpoints can be executed.

Cyclic BUS communication between controller and drive
FALSE

Not established

TRUE

Established

Error

BOOL

-

RON

FALSE

No drive error

TRUE

Drive error

AdaptionState

DINT

0 to 4

RON

Status of automatic data transfer of drive parameters
0

"NOT_ADAPTED"

1

"IN_ADAPTION"

2

"ADAPTED"

3

"NOT_APPLICABLE"

4

"ADAPTION_ERROR"

Data not transferred
Data transfer in progress
Data transfer complete
Data transfer not selected, not possible
Error during data transfer

"StatusTorqueData" tag (speed axis)
The tag structure "<TO>.StatusTorqueData.<tag name>" indicates the status of the torque.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1709

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1701)
Tag

Data type

StatusTorqueData.

TO_Struct_StatusTorqueData

CommandAdditiveTor‐
queActive
CommandTorqueRan‐
geActive

ActualTorque

DINT

DINT

LREAL

Value range
-

-

W

Description

RON

Additive torque setpoint function

RON

-1.0E12 to 1.0E RON
12

0

Disabled

1

Enabled

Torque range above high and low limit of the torque func‐
tion
0

Disabled

1

Enabled

Actual torque of the axis in the technological unit of the
technology object for torque

"StatusMotionIn" tag (speed axis)
The tag structure "<TO>.StatusMotionIn.<tag name>" indicates the motion status.

Tags
Legend (Página 1701)
Value range

Tag

Data type

StatusMotionIn.

TO_Struct_StatusMotionIn

FunctionState

DINT

0, 1

W

Description

RON

0

No "MotionIn" function active

1

"MotionInVelocity" function active

"StatusWord" tag (speed axis)
The "<TO>.StatusWord" tag contains the status information of the technology object.
Information on the evaluation of the individual bits (e.g. bit 0 "Enable") can be found in the
"Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/S7-1500T
Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459)
documentation.

1710

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tag
Legend (Página 1701)
Tag

Data type

Values

W

Description

StatusWord

DWORD

-

RON

Status information of the technology object

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1711

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
Bit 0

Data type

Values

W

Description

-

-

-

"Enable"
Enable status

Bit 1

Bit 2

Bit 3

-

-

-

-

-

-

-

-

-

0

Technology object disabled

1

Technology object enabled

"Error"
0

No error present

1

Error present

"RestartActive"
0

No restart active

1

Restart active. The technology object is being
reinitialized.

"OnlineStartValuesChanged"
0

Restart tags unchanged

1

Change to Restart tags
For the changes to be applied, the technology
object must be reinitialized.

Bit 4

-

-

-

"ControlPanelActive"
Axis control panel
0

Disabled

1

Enabled

Bit 5

-

-

-

Reserved

Bit 6

-

-

-

"Done"
0

Motion job is active or axis control panel enabled

1

No motion job in process and axis control panel
disabled

Bit 7

-

-

-

Reserved

Bit 8

-

-

-

Reserved

Bit 9

-

-

-

"JogCommand"

Bit 10

-

-

-

0

No "MC_MoveJog" job active

1

"MC_MoveJog" job active

"VelocityCommand"
0

No "MC_MoveVelocity" job active

1

"MC_MoveVelocity" job active

Bit 11

-

-

-

Reserved

Bit 12

-

-

-

"ConstantVelocity"

Bit 13

Bit 14

1712

-

-

-

-

-

-

0

The axis is accelerated or decelerated.

1

The setpoint velocity is reached. A constant ve‐
locity setpoint is output.

"Accelerating"
0

No acceleration process active

1

Acceleration process active

"Decelerating"
0

No deceleration process active

1

Deceleration process active

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag

Data type

Values

W

Description

Bit 15...
Bit 24

-

-

-

Reserved

Bit 25

-

-

-

"AxisSimulation"

Bit 26

-

Bit 27

-

Bit 28...
Bit 31

-

-

-

-

-

-

-

0

No simulation

1

Simulation is active

"TorqueLimitingCommand"
0

No "MC_TorqueLimiting" job is active

1

"MC_TorqueLimiting" job is active

"InLimitation"
0

The drive does not operate at the torque limit.

1

The drive operates at least at the threshold va‐
lue (default 90%) of the torque limit.

Reserved

"StatusWord2" tag (speed axis)
The "<TO>.StatusWord2" tag contains the status information of the technology object.
Information on the evaluation of the individual bits (e.g. bit 0 "StopCommand") can be found in
the "Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/S7-1500T
Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459)
documentation.

Tags
Legend (Página 1701)
Tag

Data type

Value range

W

Description

StatusWord2

DWORD

-

RON

Status information of the technology object

BOOL

-

RON

"StopCommand"

Bit 0

Bit 1 to Bit 31

BOOL

-

RON

0

No "MC_Stop" job is active.

1

An "MC_Stop" job is running. The technology
object is disabled.

Reserved

Consulte también
Evaluating the technology data block (Página 1453)

"ErrorWord" tag (speed axis)
The "<TO>.ErrorWord" tag indicates technology object errors (technology alarms).
Information on the evaluation of the individual bits (e.g. bit 3 "CommandNotAccepted") can be
found in the "Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1713

Control de movimiento
6.1 Using S7-1500 Motion Control
S7-1500T Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/
109766459) documentation.

Tag
Legend (Página 1701)
Tag

Data type

ErrorWord

Values

W

Description

DWORD

-

RON

Bit 0

-

-

-

"SystemFault"

Bit 1

-

-

-

"ConfigFault"

System error
Configuration error
One or more configuration parameters are inconsistent or
invalid.
Bit 2

-

-

-

"UserFault"
Error in user program at a Motion Control instruction or its
use

Bit 3

-

-

-

"CommandNotAccepted"
Job cannot be executed
A Motion Control instruction cannot be executed because
necessary requirements have not been met.

Bit 4

-

-

-

"DriveFault"
Error in drive

Bit 5

-

-

-

Reserved

Bit 6

-

-

-

"DynamicError"
Specified dynamic values are limited to permissible values.

Bit 7

-

-

-

"CommunicationFault"
Communication error
Missing or faulty communication.

Bit 8...
Bit 12

-

-

-

Reserved

Bit 13

-

-

-

"PeripheralError"
Error accessing a logical address

Bit 14

-

-

-

Reserved

Bit 15

-

-

-

"AdaptionError"

Bit 16 ...

-

-

-

Reserved

Error during data transfer
Bit 31

"ErrorDetail" tag (speed axis)
The tag structure "<TO>.ErrorDetail.<tag name>" contains the alarm number and the effective
local alarm reaction for the technology alarm that is currently pending on the technology object.

1714

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
You can find a list of the technology alarms and alarm reactions in the "Technology alarms"
appendix of the "S7-1500/S7-1500T Motion Control overview" (https://
support.industry.siemens.com/cs/ww/en/view/109766459) documentation.

Tags
Legend (Página 1701)
Tag
ErrorDetail.

Data type

Values

W

Description

TO_Struct_ErrorDetail

Number

UDINT

-

RON

Alarm number

Reaction

DINT

0 to 5

RON

Effective alarm reaction
0

No reaction

1

Stop with current dynamic values

2

Stop with maximum dynamic values

3

Stop with emergency stop ramp

4

Remove enable

5

Track setpoints

"WarningWord" tag (speed axis)
The "<TO>.WarningWord" tag indicates pending warnings at the technology object.
Information on the evaluation of the individual bits (e.g. bit 13 "PeripheralWarning") can be
found in the "Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/
S7-1500T Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/
109766459) documentation.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1715

Control de movimiento
6.1 Using S7-1500 Motion Control

Tag
Legend (Página 1701)
Tag
WarningWord

Data type

Values

W

Description

DWORD

-

RON

Bit 0

-

-

-

"SystemWarning"

Bit 1

-

-

-

"ConfigWarning"

A system-internal error has occurred.
Configuration error
One or several configuration parameters are adjusted in‐
ternally.
Bit 2

-

-

-

"UserWarning"
Error in user program at a Motion Control instruction or its
use

Bit 3

-

-

-

"CommandNotAccepted"
Job cannot be executed
A Motion Control instruction cannot be executed because
necessary requirements have not been met.

Bit 4

-

-

-

"DriveWarning"
Error in drive

Bit 5

-

-

-

Reserved

Bit 6

-

-

-

"DynamicWarning"
Specified dynamic values are limited to permissible values.

Bit 7

-

-

-

"CommunicationWarning"
Communication error
Missing or faulty communication.

Bit 8...
Bit 12

-

-

-

Reserved

Bit 13

-

-

-

"PeripheralWarning"
Error accessing a logical address

Bit 14

-

-

-

Reserved

Bit 15

-

-

-

"AdaptionWarning"

Bit 16...
Bit 31

-

-

-

Reserved

Error in automatic data transfer

"ControlPanel" tag (speed axis)
The tag structure "<TO>.ControlPanel.<tag name>" contains no user-relevant data. This tag
structure is internally used.

1716

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1701)
Tag

Data type

ControlPanel.

Values

W

Description

TO_Struct_ControlPanel

Input.

TO_Struct_ControlPanelInput

TimeOut

LREAL

100 to 60000

DIR

-

EsLifeSign

UDINT

-

DIR

-

Command[1..1].

ARRAY [1..1] OF TO_Struct_Con‐
trolPanelInputCmd

ReqCounter

UDINT

-

DIR

-

Type

UDINT

-

DIR

-

Position

LREAL

-

DIR

-

Velocity

LREAL

-

DIR

-

Acceleration

LREAL

-

DIR

-

Deceleration

LREAL

-

DIR

-

Jerk

LREAL

-

DIR

-

Param

LREAL

-

DIR

-

Output.

TO_Struct_ControlPanelOutput

RTLifeSign

UDINT

Command[1..1].

ARRAY [1..1] OF TO_Struct_Con‐
trolPanelOutputCmd

-

RON

-

AckCounter

UDINT

-

RON

-

Error

BOOL

-

RON

-

ErrorID

UDINT

-

RON

-

Done

BOOL

-

RON

-

Aborted

BOOL

-

RON

-

"InternalToTrace[1..4]" tag (speed axis)
The tag structure "<TO>.InternalToTrace[1..4]..<tag name>" contains no user-relevant data.
This tag structure is internally used.

Tags
Legend (Página 1701)
Values

W

Tag

Data type

InternalToTrace[1..4].

ARRAY [1..4] OF TO_Struct_Inter‐
nal

Description

Id

DINT

-

DIR

-

Value

LREAL

-

DIR

-

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1717

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags of the positioning axis technology object
Legend
Tag

Name of the tag

Data type

Data type of the tag

Values

Value range of the tag - minimum value to maximum value
(L - linear specification R - rotary specification)
If no specific value is shown, the value range limits of the relevant data type apply or the information under
"Description".

W

Effectiveness of changes in the technology data block
DIR

Direct:
Values are changed via direct assignment and take effect at the start of the next MC‑Ser‐
vo [OB91].

CAL

At call of Motion Control instruction:
Values are changed directly and take effect at the start of the next MC‑Servo [OB91] after the
call of the corresponding Motion Control instruction in the user program.

RES

Restart:
Changes to the start value in the load memory are made using the extended instruction
"WRIT_DBL" (write to DB in load memory). Changes will not take effect until after restart of the
technology object.

RON

Read only:
The tag cannot and must not be changed during runtime of the user program.

Description

Description of the tag

Access to the tags is with "<TO>.<tag name>". The placeholder <TO> represents the name of
the technology object.

Actual values and setpoints (positioning axis)
The following tags indicate the setpoint and actual values of the technology object.

Tags
Legend (Página 1718)
Tag

Data type

Values

W

Description

Position

LREAL

-

RON

Position setpoint

Velocity

LREAL

-

RON

Velocity setpoint/speed setpoint

ActualPosition

LREAL

-

RON

Actual position

ActualVelocity

LREAL

-

RON

Actual velocity

ActualSpeed

LREAL

-

RON

With analog setpoint = 0.0:
Actual speed of the motor

Acceleration

LREAL

-

RON

Setpoint acceleration

ActualAcceleration

LREAL

-

RON

Actual acceleration

OperativeSensor

UDINT

1 to 4

RON

Operative encoder

1718

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag

Data type

Values

W

Description

ModuloCycle

DINT

-2147483648 t
o 2147483647

RON

Number of modulo cycles of the setpoint

ActualModuloCycle

DINT

-2147483648 t
o 2147483647

RON

Number of modulo cycles of the actual value

VelocitySetpoint

LREAL

-1.0E12 to 1.0E RON
12

Output velocity setpoint/speed setpoint

"Simulation" tag (positioning axis)
The tag structure "<TO>.Simulation.<tag name>" contains the configuration of the simulation
mode. In simulation mode, you can simulate axes without a real drive in the CPU.

Tags
Legend (Página 1718)
Tag

Data type

Simulation.

TO_Struct_AxisSimulation

Mode

1)

UDINT

Values
0, 1

W

Description

RES1 Simulation mode

)

0

No simulation, normal operation

1

Simulation mode

Technology version V2.0: RON

"VirtualAxis" tag (positioning axis)
The tag structure "<TO>.VirtualAxis.<tag name>" contains the configuration of the simulation
mode. In simulation mode, you can simulate axes without a real drive in the CPU.

Tags
Legend (Página 1718)
Tag

Data type

VirtualAxis.

TO_Struct_VirrtualAxis

Mode

UDINT

Values
0, 1

W

Description

RON

Virtual axis
0

No virtual axis

1

Axis is always and exclusively operated as vir‐
tual axis

"Actor" tag (positioning axis)
The tag structure "<TO>.Actor.<tag name>" contains the controller-side configuration of the
drive.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1719

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1718)
Tag

Data type

Actor.

TO_Struct_Actor

1720

Values

W

Description

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
Type

InverseDirection

DataAdaption

Data type

Values

W

Description

DINT

0, 1

RON

Drive connection

BOOL

DINT

-

0, 1

Efficiency

LREAL

Interface.

TO_Struct_ActorInterface

0.0 to 1.0

RES

RES

RES

0

Analog output

1

PROFIdrive telegram

Inversion of the setpoint
FALSE

No

TRUE

Yes

Automatic transfer of the drive values reference speed,
maximum speed and reference torque
0

No automatic transfer, manual configuration of
values

1

Automatic transfer of values configured in the
drive to the configuration of the technology ob‐
ject

Efficiency of mechanics (gear and leadscrew)

AddressIn

VREF

0 to 65535

RON

Input address for the PROFIdrive telegram

AddressOut

VREF

0 to 65535

RON

Output address for the PROFIdrive telegram or the analog
setpoint

EnableDriveOutput

BOOL

-

RES

"Enable output" for analog drives
FALSE

Disabled

TRUE

Enabled

EnableDriveOutpu‐
tAddress

VREF

0 to 65535

RON

Address for the "Enable output" for analog setpoint

DriveReadyInput

BOOL

-

RES

"Ready input" for analog drives
The analog drive signals its readiness to receive speed
setpoints.
FALSE

Disabled

TRUE

Enabled

DriveReadyInputA‐
ddress

VREF

0 to 65535

RON

Address for the "Enable input" for analog setpoint

EnableTorqueData

BOOL

-

RES

Torque data
FALSE

Disabled

TRUE

Enabled

TorqueDataAddres‐
sIn

VREF

0 to 65535

RON

Input address of the supplemental telegram

TorqueDataAddres‐
sOut

VREF

0 to 65535

RON

Output address of the supplemental telegram

DriveParameter.
ReferenceSpeed

TO_Struct_ActorDriveParameter
LREAL

0.0 to 1.0E12

RES

Reference value (100%) for the speed setpoint (N-set) of
the drive
The speed setpoint is transferred in the PROFIdrive tele‐
gram as a normalized value from -200% to 200% of the
"ReferenceSpeed".
For setpoint specification via an analog output, the analog
output can be operated in the range from -117% to 117%,
provided the drive permits this.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1721

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
MaxSpeed

Data type

Values

W

Description

LREAL

0.0 to 1.0E12

RES

Maximum value for the speed setpoint of the drive (N-set)
(PROFIdrive: MaxSpeed ≤ 2 × ReferenceSpeed
Analog setpoint: MaxSpeed ≤ 1.17 × ReferenceSpeed)

ReferenceTorque

LREAL

0.0 to 1.0E12

RES

Reference value (100%) for the drive torque

Consulte también
Evaluating the technology data block (Página 1453)

"TorqueLimiting" tag (positioning axis)
The tag structure "<TO>.TorqueLimiting.<tag name>" contains the configuration of the torque
limiting.

Tags
Legend (Página 1718)
Tag

Data type

TorqueLimiting.

TO_Struct_TorqueLimiting

LimitBase

DINT

PositionBasedMonito‐
rings
LimitDefaults.

DINT

Values
0, 1

0, 1

W

Description

RES

Torque limiting

RES

0

Motor side

1

Load side

Positioning and following error monitoring
0

Monitoring deactivated

1

Monitoring activated

TO_Struct_TorqueLimitingLimitDe‐
faults

Torque

LREAL

0.0 to 1.0E12

CAL

Limiting torque

Force

LREAL

0.0 to 1.0E12

CAL

Limiting force

"Clamping" tag (positioning axis)
The tag structure "<TO>.Clamping.<tag name>" contains the configuration of the fixed stop
detection.

Tags
Legend (Página 1718)
Tag
Clamping.

Data type

Values

W

Description

TO_Struct_Clamping

FollowingErrorDevia‐
tion

LREAL

0.001 to 1.0E12 DIR

Value of the following error starting from which the fixed
stop is detected.

PositionTolerance

LREAL

0.001 to 1.0E12 DIR

Position tolerance for the clamping monitoring

1722

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Sensor[1..4] tags (positioning axis)
The tag structure "<TO>.Sensor[1..4].<tag name>" contains the controller-end configuration
for the encoder, and the configuration for active and passive homing.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1723

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1718)
Tag

Data type

Sensor[1..4].

ARRAY [1..4] OF TO_Struct_Sen‐
sor / TO_Struct_ExternalEnco‐
der_Sensor

1724

Values

W

Description

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag

Data type

Values

W

Description

Existent

BOOL

-

RON

Displaying created encoders

Type

DINT

0 to 2

RON

Encoder type
0

"INCREMENTAL"
Incremental

1

"ABSOLUTE"
Absolute

2

"CYCLIC_ABSOLUTE"
Cyclic absolute

InverseDirection

System

BOOL

DINT

-

0, 1

RES

RES

Inversion of the actual value
FALSE

No

TRUE

Yes

Encoder system
0

"LINEAR"

1

"ROTATORY"

Linear encoder
Rotary encoder
MountingMode

DataAdaption

Interface.

DINT

DINT

0 to 2

0, 1

RES

RES

Mounting type of encoder
0

On motor shaft

1

On load side

2

External measuring system

Automatic transfer of the drive values reference speed,
maximum speed and reference torque in the device
0

No automatic transfer, manual configuration of
values

1

Automatic transfer of values configured in the
drive to the configuration of the technology ob‐
ject

TO_Struct_SensorInterface

AddressIn

VREF

0 to 65535

AddressOut

VREF

0 to 65535

RON

Output address for the PROFIdrive telegram

Number

UDINT

1 to 2

RON

Number of the encoder in the telegram

Parameter.

RON

Input address for the PROFIdrive telegram

TO_Struct_SensorParameter

Resolution

LREAL

1.0E-12 to 1.0E RES
12

Resolution of a linear encoder (offset between two enco‐
der pulses)

StepsPerRevolution

UDINT

1 to 8388608

RES

Increments per rotary encoder revolution

FineResolutionXist1

UDINT

0 … 31

RES

Number of bits for fine resolution Gx_XIST1 (cyclic actual
encoder value)

FineResolutionXist2

UDINT

0 … 31

RES

Number of bits for fine resolution Gx_XIST2 (absolute va‐
lue of encoder)

DeterminableRevo‐
lutions

UDINT

0 to 8388608

RES

Number of differentiable encoder revolutions for a multiturn absolute encoder
(For a single-turn absolute encoder = 1; for an incremental
encoder = 0)

DistancePerRevolu‐
tion

LREAL

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

0.0 to 1.0E12

RES

Load distance per revolution of an externally mounted en‐
coder

1725

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
BehaviorGx_XIST1

ActiveHoming.

Data type

Values

W

Description

DINT

-

RES

Evaluation of Gx_XIST1 bits
0

Based on the bits of the encoder resolution

1

32-bit value of the encoder value

TO_Struct_SensorActiveHoming

Mode

DINT

SideInput

BOOL

Direction

DINT

0 to 2

-

0, 1

RES

CAL

CAL

0

Use zero mark via PROFIdrive telegram

1

Zero mark via PROFIdrive telegram and refe‐
rence output cam

2

Use homing mark via digital input

Side of the digital input for active homing
FALSE

Negative side

TRUE

Positive side

Homing direction/approach direction on the homing mark
0

Positive homing direction

1

Negative homing direction

DigitalInputAddress

VREF

0 to 65535

HomePositionOffset

LREAL

-1.0E12 to 1.0E CAL
12

Home position offset

SwitchLevel

BOOL

-

Signal level that is present at the digital input when homing
mark is approached

PassiveHoming.

RON

Homing mode

RES

Address of digital input

FALSE

Low level

TRUE

High level

TO_Struct_SensorPassiveHoming

Mode

DINT

SideInput

BOOL

Direction

DINT

0 to 2

-

0 to 2

RES

CAL

CAL

Homing mode
0

Use zero mark via PROFIdrive telegram

1

Zero mark via PROFIdrive telegram and refe‐
rence output cam

2

Use homing mark via digital input

Side of the digital input for passive homing
FALSE

Negative side

TRUE

Positive side

Homing direction/approach direction on the homing mark
0

Positive homing direction

1

Negative homing direction

2

Current homing direction

DigitalInputAddress

VREF

0 to 65535

RON

Address of digital input

SwitchLevel

BOOL

-

RES

Signal level that is present at the digital input when homing
mark is approached
FALSE

Low level

TRUE

High level

Consulte también
Evaluating the technology data block (Página 1453)

1726

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

"CrossPlcSynchronousOperation" tag (positioning axis)
The tag structure "<TO>.CrossPlcSynchronousOperation.<tag name>" contains the
configuration of the cross-PLC synchronous operation.

Tags
Legend (Página 1718)
Values

W

Tag

Data type

CrossPlcSynchronousO‐
peration.

TO_Struct_CrossPlcSynchronou‐
sOperation

Interface[1..1].

Description

ARRAY [1..1] of
TO_Struct_CrossPlcLeadingVa‐
lueInterface

EnableLeadingVa‐
lueOutput

BOOL

AddressOut

VREF

-

RON

Output address for the leading value telegram

LREAL

0.0 to 1.0E12

DIR

Delay time of leading value output on the local following
axes

LocalLeadingValueDe‐
layTime

-

RON

Provide cross-PLC leading value
FALSE

No

TRUE

Yes

Consulte también
Evaluating the technology data block (Página 1453)

"Extrapolation" tag (positioning axis)
The tag structure "<TO>.Extrapolation.<tag name>" contains the configuration of the actual
value extrapolation.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1727

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1718)
Tag

Data type

Extrapolation.

TO_Struct_Extrapolation

1728

Values

W

Description

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
LeadingAxisDepen‐
dentTime

Data type

Values

W

Description

LREAL

-

RON

Extrapolation time component (caused by leading axis)
Results from the following times:
● Time of actual value acquisition for the leading axis
● Interpolator cycle clock
● Time of position filter of actual value extrapolation (T1
+ T2)

FollowingAxisDepen‐
dentTime

LREAL

0.0 to 1.0E12

DIR

Extrapolation time component (caused by following axis)
Results from the following times:
● For a following axis with set velocity precontrol:
–

Communication cycle

–

Interpolator cycle clock

–

Speed control loop substitute time for the following
axis

–

Output delay time of the setpoint at the following
axis

● For a following axis without velocity precontrol:

Settings.
SystemDefinedEx‐
trapolation
ExtrapolatedVelo‐
cityMode

–

Communication cycle

–

Interpolator cycle clock

–

Position control loop equivalent time (1/Kv from
"<TO>.PositionControl.Kv")

–

Output delay time of the setpoint at the following
axis

TO_Struct_ExtrapolationSettings
DINT

DINT

0, 1

0, 1

RES

RES

Leading axis dependent time
0

Not effective

1

Effective

Effective velocity value for the synchronization function
0

"FilteredVelocity"
Leading value velocity from filtered actual velo‐
city

1

"VelocityByDifferentiation"
The leading value velocity results from the diffe‐
rentiation of the extrapolated leading value po‐
sition

PositionFilter.

TO_Struct_ExtrapolationPosition‐
Filter

T1

LREAL

0.0 to 1.0E12

DIR

Position filter time constant T1

T2

LREAL

0.0 to 1.0E12

DIR

Position filter time constant T2

VelocityFilter.

TO_Struct_ExtrapolationVelocity‐
Filter

T1

LREAL

0.0 to 1.0E12

DIR

Velocity filter time constant T1

T2

LREAL

0.0 to 1.0E12

DIR

Velocity filter time constant T2

VelocityTolerance.

TO_Struct_ExtrapolationVelocity‐
Tolerance

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1729

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
Range
Hysteresis.
Value

Data type

Values

W

Description

LREAL

0.0 to 1.0E12

DIR

Tolerance band width for velocity

TO_Struct_ExtrapolationHysteresis
LREAL

0.0 to 1.0E12

DIR

Hysteresis of the extrapolated actual position value

"LoadGear" tag (positioning axis)
The tag structure "<TO>.LoadGear.<tag name>" contains the configuration of the load gear.

Tags
Legend (Página 1718)
Tag
LoadGear.

Data type

Value range

W

Description

TO_Struct_LoadGear

Numerator

UDINT

1 to 429496729 RES
5

Load gear counter

Denominator

UDINT

1 to 429496729 RES
5

Load gear denominator

"Properties" tag (positioning axis)
The tag structure "<TO>.Properties.<tag name>" contains the configuration of the type of axis
or motion.

Tags
Legend (Página 1718)
Tag

Data type

Properties.

TO_Struct_Properties

MotionType

DINT

Value range
0, 1

W

Description

RON

Indication of axis type or motion type
0

Linear axis or motion

1

Rotary axis or motion

"Units" tag (positioning axis)
The tag structure "<TO>.Units.<tag name>" shows the set technological units.

1730

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1718)
Tag

Data type

Units.

TO_Struct_Units / TO_Struct_Exter‐
nalEncoder_Units

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Values

W

Description

1731

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
LengthUnit

VelocityUnit

TimeUnit

Data type

Values

W

Description

UDINT

-

RON

Unit for position

UDINT

UDINT

-

-

RON

RON

1010

m

1013

mm

1536

mm1)

1011

km

1014

µm

1015

nm

1019

in

1018

ft

1021

mi

1004

rad

1005

°

1537

°1)

Unit for velocity
1521

°/s

1539

°/s1)

1522

°/min

1086

rad/s

1523

rad/min

1062

mm/s

1538

mm/s1)

1061

m/s

1524

mm/min

1525

m/min

1526

mm/h

1063

m/h

1527

km/min

1064

km/h

1066

in/s

1069

in/min

1067

ft/s

1070

ft/min

1075

mi/h

Unit for time
1054

TorqueUnit

1732

UDINT

-

RON

s

Unit for torque
1126

Nm

1128

kNm

1529

lbf in (pound-force-inch)

1530

lbf ft

1531

ozf in (ounce-force-inch)

1532

ozf ft

1533

pdl in (poundal-inch)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag

Data type

Values

W

Description
1534

ForceUnit

UDINT

UnitFactor
1)

UDINT

-

-

RON

RON

pdl ft

Unit for force
1120

N

1122

kN

1094

lbf (pound-force)

1093

ozf (ounce-force)

1535

pdl (poundals)

Factor for internal conversion in the high-resolution units.

Position values with higher resolution or six decimal places

Consulte también
Units of measure (Página 1389)

"Mechanics" tag (positioning axis)
The tag structure "<TO>.Mechanics.<tag name>" contains the configuration of the mechanics.

Tags
Legend (Página 1718)
Tag

Data type

Mechanics.

TO_Struct_Mechanics

LeadScrew

LREAL

Value range
0.0 to 1.0E12

W

Description

RES

Leadscrew pitch

"Modulo" tag (positioning axis)
The tag structure "<TO>.Modulo.<tag name>" contains the configuration of the modulo
function.

Tags
Legend (Página 1718)
Tag

Data type

Modulo.

TO_Struct_Modulo

Enable

BOOL

Values
-

W

Description

RES

FALSE

Modulo conversion disabled

TRUE

Modulo conversion enabled

When modulo conversion is enabled, a check is made for
modulo length > 0.0
Length

LREAL

0.001 to 1.0E12 RES

Modulo length

StartValue

LREAL

-1.0E12 to 1.0E RES
12

Modulo start value

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1733

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Evaluating the technology data block (Página 1453)

"DynamicLimits" tag (positioning axis)
The tag structure "<TO>.DynamicLimits.<tag name>" contains the configuration of the
dynamic limits. During Motion Control, no dynamic values greater than the dynamic limits are
permitted. If you have specified greater values in a Motion Control instruction, then motion is
performed using the dynamic limits, and a warning is indicated (alarm 501 to 503 - Dynamic
values are limited).

Tags
Legend (Página 1718)
Tag

Data type

Values

DynamicLimits.

TO_Struct_DynamicLimits

W

Description

MaxVelocity

LREAL

0.0 to 1.0E12

RES

Maximum permissible velocity of the axis

Velocity

LREAL

0.0 to 1.0E12

DIR

Current maximum velocity of the axis

MaxAcceleration

LREAL

0.0 to 1.0E12

DIR

Maximum permissible acceleration of the axis

MaxDeceleration

LREAL

0.0 to 1.0E12

DIR

Maximum permissible deceleration of the axis

MaxJerk

LREAL

0.0 to 1.0E12

DIR

Maximum permissible jerk on the axis

Consulte también
Evaluating the technology data block (Página 1453)

"DynamicDefaults" tag (positioning axis)
The tag structure "<TO>.DynamicDefaults.<tag name>" contains the configuration of the
dynamic defaults. These settings will be used when you specify a dynamic value less than 0.0
in a Motion Control instruction (exceptions: "MC_MoveJog.Velocity",
"MC_MoveVelocity.Velocity"). Changes to the default dynamic values will be applied at the next
positive edge at the "Execute" parameter of a Motion Control instruction.

Tags
Legend (Página 1718)
Tag

Data type

Values

DynamicDefaults.

TO_Struct_DynamicDefaults

W

Description

Velocity

LREAL

0.0 to 1.0E12

CAL

Default velocity

Acceleration

LREAL

0.0 to 1.0E12

CAL

Default acceleration

Deceleration

LREAL

0.0 to 1.0E12

CAL

Default deceleration

Jerk

LREAL

0.0 to 1.0E12

CAL

Default jerk

EmergencyDecelera‐
tion

LREAL

0.0 to 1.0E12

DIR

Emergency stop deceleration

1734

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Evaluating the technology data block (Página 1453)

"PositionLimits_SW" tag (positioning axis)
The tag structure "<TO>.PositionLimits_SW.<tag name>" contains the configuration of position
monitoring with software limit switches. Software limit switches are used to limit the operating
range of a positioning axis.

Tags
Legend (Página 1718)
Tag

Data type

Values

PositionLimits_SW.

TO_Struct_PositionLimitsSW

W

Description

DIR

FALSE

Monitoring deactivated

TRUE

Monitoring enabled

Active

BOOL

-

MinPosition

LREAL

-1.0E12 to 1.0E DIR
12

Position of negative software limit switches

MaxPosition

LREAL

-1.0E12 to 1.0E DIR
12

Position of positive software limit switches
("MaxPosition" > "MinPosition")

Consulte también
Evaluating the technology data block (Página 1453)

"PositionLimits_HW" tag (positioning axis)
The tag structure "<TO>.PositionLimits_HW.<tag name>" contains the configuration of
position monitoring with hardware limit switches. Hardware limit switches are used to limit the
traversing range of a positioning axis.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1735

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1718)
Tag

Data type

PositionLimits_HW.

TO_Struct_PositionLimitsHW

Active

BOOL

Values
-

W

Description

RES

FALSE

Monitoring deactivated

TRUE

Monitoring enabled

With "Active", both (negative and positive) hardware limit
switches are activated or deactivated.
MinSwitchLevel

BOOL

-

RES

Level selection for activation of the negative hardware limit
switch
FALSE

Low level (Low active)

TRUE

High level (high-enabled)

MinSwitchAddress

VREF

0 to 65535

RON

Address for the negative hardware limit switch

MaxSwitchLevel

BOOL

-

RES

Level selection for activation of the positive hardware limit
switch

MaxSwitchAddress

VREF

0 to 65535

RON

FALSE

Low level (Low active)

TRUE

High level (high-enabled)

Address for the positive hardware limit switch

Consulte también
Evaluating the technology data block (Página 1453)

"Homing" tag (positioning axis)
The tag structure "<TO>.Homing.<tag name>" contains the configuration for homing the TO.

1736

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1718)
Tag

Data type

Homing.

TO_Struct_Homing / TO_Struct_Ex‐
ternalEncoder_Homing

AutoReversal

BOOL

ApproachDirection

ApproachVelocity

BOOL

LREAL

Values

-

-

Linear:
0.0 to 10000.0
mm/s

W

RES

CAL

CAL

LREAL

CAL
Linear:
0.0 to 1000.0 m
m/s
Rotary:
0.0 ... 36000.0
°/s

HomePosition

LREAL

Reversal at the hardware limit switches
FALSE

No

TRUE

Yes

Direction of approach to the homing position switch
FALSE

Positive direction

TRUE

Negative direction

Approach velocity
Velocity during active homing at which the reference out‐
put cam and home position are approached.

Rotary:
0.0 ...
360000.0 °/s
ReferencingVelocity

Description

-1.0E12 to 1.0E CAL
12

Homing velocity
Velocity during active homing at which the home position
is approached.

Home position

Consulte también
Evaluating the technology data block (Página 1453)

"Override" tag (positioning axis)
The tag structure "<TO>.Override.<tag name>" contains the configuration of override
parameters. The override parameters are used to apply a correction percentage to default
values. An override change takes effect immediately, and is performed with the dynamic
settings in effect in the Motion Control instruction.

Tags
Legend (Página 1718)
Tag

Data type

Override.

TO_Struct_Override

Velocity

LREAL

Values
0.0 to 200.0%

W
DIR

Description
Velocity or speed override
Percentage correction of the velocity/speed

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1737

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Evaluating the technology data block (Página 1453)

"PositionControl" tag (positioning axis)
The tag structure "<TO>.PositionControl.<tag name>" contains the settings of position control.

1738

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1718)
Tag

Data type

PositionControl.

TO_Struct_PositionControl

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Values

W

Description

1739

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag

Data type

Values

Kv

LREAL

0.0 to 2147480. DIR
0

W

Kpc

LREAL

0.0 to 150.0%

DIR

Description
Proportional gain of the closed loop position control
("Kv" > 0.0)
Velocity precontrol of the position control
Recommended setting:
● Isochronous drive connection via PROFIdrive:
100.0%
● Non-isochronous drive connection via PROFIdrive:
0.0 to 100.0%
● Analog drive connection:
0.0 to 100.0%

EnableDSC

BOOL

-

RES

Dynamic Servo Control (DSC)
FALSE

DSC disabled

TRUE

DSC activated

DSC is only possible with one of the following PROFIdrive
telegrams:
● Standard telegram 5 or 6
● SIEMENS telegram 105 or 106
SmoothingTimeBy‐
ChangeDifference

LREAL

0.0 to 1.0E
+12 s

DIR

Smoothing time for the manipulated variable for switching
operations, for example:
● Encoder switchover
● Change in P-gain ("Kv")
● Switchover to emergency stop ramp

InitialOperativeSensor

UDINT

1 to 4

RES

Active sensor after initialization of the axis (sensor number
1 to 4)
This encoder is used after startup of the CPU and after a
restart of the technology object. At an operating mode
transition from STOP → RUN of the CPU (without restart of
the technology object), the encoder that was also active
before the STOP is still being used.

ControlDifference‐
Quantization.
Mode

TO_Struct_PositionDifference‐
Quantification
DINT

-

RES

Type of quantification
Configuration of a quantization when a drive with stepper
motor interface is connected
0

No quantification

1

Quantization corresponding to encoder resolu‐
tion

2

Quantization to a direct value

(configuration is performed using the parameter view (da‐
ta structure))
Value

LREAL

0.001 to 1.0E
+12

RES

Value of quantification
Configuration of a value for quantization to a direct value
(<TO>.PositionControl.ControlDifferenceQuantiza‐
tion.Mode = 2)
(configuration is performed using the parameter view (da‐
ta structure))

1740

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Evaluating the technology data block (Página 1453)

"DynamicAxisModel" tag (positioning axis)
The tag structure "<TO>.DynamicAxisModel.<tag name>" contains the settings of the
balancing filter.

Tags
Legend (Página 1718)
Tag

Data type

Values

W

Description

DynamicAxisModel.

TO_Struct_DynamicAxisModel

Time constants for braking ramp generation with alarm
response "Brake with emergency stop ramp"

VelocityTimeConstant

LREAL

0.0 to 1.0E12

DIR

Speed control loop substitute time [s]

AdditionalPositionTi‐
meConstant

LREAL

0.0 to 1.0E12

DIR

Additive position control loop substitute time [s]

"FollowingError" tag (positioning axis)
The tag structure "<TO>.FollowingError.<tag name>" contains the configuration of the dynamic
following error monitoring.
If the permissible following error is exceeded, then technology alarm 521 is output, and the
technology object is disabled (alarm reaction: remove enable).
When the warning level is reached, a warning is output (technology alarm 522).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1741

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1718)
Tag

Data type

Values

FollowingError.

TO_Struct_FollowingError

W

Description

EnableMonitoring

BOOL

-

RES

FALSE

Following error monitoring deactivated

TRUE

Following error monitoring enabled

MinValue

LREAL

Linear:
0.0 to 1.0E12

DIR

Permissible following error at velocities below the value of
"MinVelocity"

DIR

Maximum permissible following error, which may be rea‐
ched at the maximum velocity.

Rotary:
0.001 to 1.0E12
MaxValue

LREAL

Linear:
0.0 to 1.0E12
Rotary:
0.002 ... 1.0E12

MinVelocity

LREAL

0.0 to 1.0E12

DIR

"MinValue" is permissible below this velocity and is held
constant.

WarningLevel

LREAL

0.0 to 100.0

DIR

Warning level
Percentage value relative to the valid maximum following
error

Consulte también
Evaluating the technology data block (Página 1453)

"PositioningMonitoring" tag (positioning axis)
The tag structure "<TO>.PositioningMonitoring.<tag name>" contains the configuration of
position monitoring at the end of a positioning motion.
If the actual position value at the end of a positioning motion is reached within the tolerance time
and remains in the positioning window for the minimum dwell time, then "<TO>.StatusWord.X5
(Done)" is set in the technology data block. This completes a Motion Control job.
If the tolerance time is exceeded, then technology alarm 541 "Positioning monitoring" with
supplemental value 1: "Target range not reached" is displayed.
If the minimum dwell time is not met, then technology alarm 541 "Positioning monitoring" with
supplemental value 2: "Exit target range again" is displayed.

1742

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1718)
Tag

Data type

PositioningMonitoring.

TO_Struct_PositionMonitoring

ToleranceTime

LREAL

Values
0.0 to 1.0E12

W

Description

DIR

Tolerance time
Maximum permitted duration from reaching of velocity set‐
point zero until entrance into the positioning window

MinDwellTime

LREAL

0.0 to 1.0E12

DIR

Minimum dwell time in positioning window

Window

LREAL

0.0 to 1.0E12

DIR

Positioning window

Consulte también
Evaluating the technology data block (Página 1453)

"StandstillSignal" tag (positioning axis)
The tag structure "<TO>.StandstillSignal.<tag name>" contains the configuration of the
standstill signal.
If the actual velocity value is below the velocity threshold, and does not exceed it during the
minimum dwell time, then the standstill signal "<TO>.StatusWord.X7 (Standstill)" is set.

Tags
Legend (Página 1718)
Tag

Data type

StandstillSignal.

TO_Struct_StandstillSignal

VelocityThreshold

LREAL

Values
0.0 to 1.0E12

W

Description
Configuration for the standstill signal

DIR

Velocity threshold
If velocity is below this threshold, the minimum dwell time
begins.

MinDwellTime

LREAL

0.0 to 1.0E12

DIR

Minimum dwell time

Consulte también
Evaluating the technology data block (Página 1453)

"StatusPositioning" tag (positioning axis)
The tag structure "<TO>.StatusPositioning.<tag name>" indicates the status of a positioning
motion.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1743

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1718)
Tag

Data type

Values

StatusPositioning.

TO_Struct_StatusPositioning

W

Description

Distance

LREAL

-1.0E12 to 1.0E RON
12

Distance to the target position

TargetPosition

LREAL

-1.0E12 to 1.0E RON
12

Target position

TargetPositionModu‐
loCycle

DINT

-2147483648 t
o 2147483647

Number of modulo cycles to target position with positio‐
ning motions

FollowingError

LREAL

-1.0E12 to 1.0E RON
12

Current following error

SetpointExecutionTime

LREAL

-1.0E12 to 1.0E RON
12

Setpoint execution time of the axis

RON

(Results from TIpo, Tvtc or 1/kv, TSend and TO of the axis)

Consulte también
Evaluating the technology data block (Página 1453)

"StatusDrive" tag (positioning axis)
The tag structure "<TO>.StatusDrive.<tag name>" indicates the status of the drive.

1744

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1718)
Tag

Data type

StatusDrive.

Values

W

Description

TO_Struct_StatusDrive

Disabled

BOOL

-

RON

FALSE

Drive not switched off

TRUE

Drive switched off

InOperation

BOOL

-

RON

Operational status of the drive
FALSE

Drive not ready

TRUE

Drive ready

Setpoints will not be executed.
Setpoints can be executed.
CommunicationOK

BOOL

-

RON

Cyclic BUS communication between controller and drive
FALSE

Not established

TRUE

Established

Error

BOOL

-

RON

FALSE

No drive error

TRUE

Drive error

AdaptionState

DINT

0 to 4

RON

Status of automatic data transfer of drive parameters
0

"NOT_ADAPTED"
Data not transferred

1

"IN_ADAPTION"
Data transfer in progress

2

"ADAPTED"
Data transfer complete

3

"NOT_APPLICABLE"
Data transfer not selected, not possible

4

"ADAPTION_ERROR"
Error during data transfer

Consulte también
Evaluating the technology data block (Página 1453)

"StatusServo" tag (positioning axis)
The tag structure "<TO>.StatusServo.<tag name>" indicates the status for the balancing filter.

Tags
Legend (Página 1718)
Tag

Data type

Values

StatusServo.

TO_Struct_StatusServo

W

Description

BalancedPosition

LREAL

-

RON

Position after the balancing filter

ControlDifference

LREAL

-

RON

Control error

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1745

Control de movimiento
6.1 Using S7-1500 Motion Control

"StatusProvidedLeadingValue" tag (positioning axis)
The tag structure "<TO>.StatusProvidedLeadingValue.<tag name>" contains the provided
leading value with leading value delay of the cross-PLC synchronous operation.

Tags
Legend (Página 1718)
Values

W

Description

Tag

Data type

StatusProvidedLeading‐
Value.

TO_Struct_StatusProvidedLeading‐ Provided leading value
Value

DelayedLeadingValue

TO_Struct_ProvidedLeadingValue

Leading value with leading value delay

Position

LREAL

-1.0E12 to 1.0E RON
12

Position

Velocity

LREAL

-1.0E12 to 1.0E RON
12

Velocity

Acceleration

LREAL

-1.0E12 to 1.0E RON
12

Acceleration

Consulte también
Evaluating the technology data block (Página 1453)

StatusSensor[1..4] Tags (positioning axis)
The tag structure "<TO>.StatusSensor[1..4].<tag name>" indicates the status of the measuring
system.

1746

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1718)
Tag

Data type

StatusSensor[1..4].

Array [1..4] OF TO_Struct_Status‐
Sensor

State

DINT

Values

0 to 2

W

RON

Description

Status of the actual encoder value
0

"NOT_VALID"
Invalid

1

"WAITING_FOR_VALID"
Waiting for "Valid" status

2

"VALID"
Valid

CommunicationOK

BOOL

-

RON

Cyclic BUS communication between controller and enco‐
der
FALSE

Error

BOOL

-

RON

Not established

TRUE

Established

FALSE

No error in the measuring system

TRUE

Error in the measuring system.

AbsEncoderOffset

LREAL

-

RON

Home position offset for value of an absolute value enco‐
der.

Control

BOOL

-

RON

FALSE

Encoder is not active

TRUE

Encoder is active

The value will be retentively stored in the CPU.

Position

LREAL

-

RON

Encoder position

Velocity

LREAL

-

RON

Encoder velocity

AdaptionState

DINT

0 to 4

RON

Status of automatic data transfer of encoder parameters
0

"NOT_ADAPTED"

1

"IN_ADAPTION"

2

"ADAPTED"

Data not transferred
Data transfer in progress
Data transfer complete
3

"NOT_APPLICABLE"
Data transfer not selected, not possible

4

"ADAPTION_ERROR"
Error during data transfer

ModuloCycle

DINT

-2147483648 t
o 2147483647

RON

Number of modulo cycles

Consulte también
Evaluating the technology data block (Página 1453)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1747

Control de movimiento
6.1 Using S7-1500 Motion Control

"StatusExtrapolation" tag (positioning axis)
The tag structure "<TO>.StatusExtrapolation.<tag name>" indicates the status of the actual
value extrapolation.

Tags
Legend (Página 1718)
Values

W

Tag

Data type

StatusExtrapolation.

TO_Struct_StatusExtrapolation

Description

FilteredPosition

LREAL

-1.0E12 to 1.0E RON
12

Position after position filter

FilteredVelocity

LREAL

-1.0E12 to 1.0E RON
12

Velocity after velocity filter and tolerance band

ExtrapolatedPosition

LREAL

-1.0E12 to 1.0E RON
12

Extrapolated position

ExtrapolatedVelocity

LREAL

-1.0E12 to 1.0E RON
12

Extrapolated velocity

"StatusKinematicsMotion" tag (positioning axis)
The "<TO>.StatusKinematicsMotion" tag contains the status information of the technology
object.
Information on the evaluation of the individual bits (e.g. bit 2 "MaxDecelerationExceeded") can
be found in the "Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/
S7-1500T Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/
109766459) documentation.

1748

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tag
Legend (Página 1718)
Tag

Data type

StatusKinematicsMotion
Bit 0

Bit 1

Values

W

Description

DWORD

-

RON

Status information of the technology object

-

-

-

"MaxVelocityExceeded"

-

Bit 2

-

-

-

-

-

0

The kinematics technology object calculated a
lower velocity setpoint than the maximum velo‐
city on the axis.

1

The kinematics technology object calculated a
higher velocity setpoint than the maximum velo‐
city on the axis.

"MaxAccelerationExceeded"
0

The kinematics technology object calculated a
lower setpoint acceleration calculated than the
maximum acceleration of the axis.

1

The kinematics technology object calculated a
higher setpoint acceleration than the maximum
acceleration of the axis.

"MaxDecelerationExceeded"
0

The kinematics technology object calculated a
lower setpoint deceleration than the maximum
deceleration of the axis.

1

The kinematics technology object calculated a
lower setpoint deceleration than the maximum
deceleration of the axis.

"StatusTorqueData" tag (positioning axis)
The tag structure "<TO>.StatusTorqueData.<tag name>" indicates the status of the torque
data.

Tags
Legend (Página 1718)
Tag

Data type

StatusTorqueData.

TO_Struct_StatusTorqueData

CommandAdditiveTor‐
queActive

DINT

CommandTorqueRan‐
geActive

DINT

ActualTorque

LREAL

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Value range
0, 1

0, 1

W

Description

RON

Additive setpoint torque

RON

-1.0E12 to 1.0E RON
12

0

Inactive

1

Active

Torque limits B +, B0

Inactive

1

Active

Actual torque of the axis

1749

Control de movimiento
6.1 Using S7-1500 Motion Control

"StatusMotionIn" tag (positioning axis)
The tag structure "<TO>.StatusMotionIn.<tag name>" indicates the status of the "MotionIn"
function.

Tags
Legend (Página 1718)
Value range

Tag

Data type

StatusMotionIn.

TO_Struct_StatusMotionIn

FunctionState

DINT

0 to 2

W

Description

RON

0

No "MotionIn" function active

1

"MC_MotionInVelocity" active

2

"MC_MotionInPosition" active

"StatusWord" tag (positioning axis)
The "<TO>.StatusWord" tag contains the status information of the technology object.
Information on the evaluation of the individual bits (e.g. bit 5 "HomingDone") can be found in the
"Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/S7-1500T
Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459)
documentation.

1750

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tag
Legend (Página 1718)
Tag

Data type

Values

W

Description

StatusWord

DWORD

-

RON

Status information of the technology object

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1751

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
Bit 0

Data type

Values

W

Description

-

-

-

"Enable"
Enable status

Bit 1

Bit 2

Bit 3

Bit 4

Bit 5

-

-

-

-

-

-

-

-

-

-

-

-

-

-

-

0

The technology object is disabled.

1

The technology object has been enabled.

"Error"
0

No error is present.

1

An error is present.

"RestartActive"
0

No restart is active.

1

A restart is active. The technology object is
being reinitialized.

"OnlineStartValuesChanged"
0

The restart tags are unchanged.

1

The restart tags have been changed. For the
changes to be applied, the technology object
must be reinitialized.

"ControlPanelActive"
0

The axis control panel is deactivated.

1

The axis control panel is active.

"HomingDone"
Homing status

Bit 6

Bit 7

-

-

-

-

-

-

0

The technology object is not homed.

1

The technology object is homed.

"Done"
0

A motion job is in progress or the axis control
panel is activated.

1

No motion job is in progress and the axis control
panel is deactivated.

"Standstill"
Standstill signal

Bit 8

Bit 9

Bit 10

Bit 11

-

-

-

-

-

-

-

-

-

-

-

-

0

The axis is in motion.

1

The axis is at a standstill.

"PositioningCommand"
0

No positioning job is active.

1

A positioning job is active ("MC_MoveRelati‐
ve","MC_MoveAbsolute").

"JogCommand"
0

No "MC_MoveJog" job is active.

1

An "MC_MoveJog" job is running

"VelocityCommand"
0

No "MC_MoveVelocity" job is active.

1

An "MC_MoveVelocity" job is running

"HomingCommand"
0

1752

No "MC_Home" job is in progress.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag

Data type

Values

W

Description
1

Bit 12

Bit 13

Bit 14

Bit 15

Bit 16

Bit 17

Bit 18

Bit 19 …

-

-

-

-

-

-

-

-

-

-

-

-

-

-

-

-

-

-

-

-

-

An "MC_Home" job is being processed.

"ConstantVelocity"
0

The axis is accelerated or decelerated.

1

The setpoint velocity is reached. A constant ve‐
locity setpoint is output.

"Accelerating"
0

No acceleration operation is active.

1

An acceleration operation is active.

"Decelerating"
0

No deceleration process is active.

1

A deceleration operation is active.

"SWLimitMinActive"
0

No negative software limit switch was approa‐
ched.

1

A negative software limit switch was reached or
exceeded.

"SWLimitMaxActive"
0

No positive software limit switch was approa‐
ched.

1

A positive software limit switch was reached or
exceeded.

"HWLimitMinActive"
0

No negative hardware limit switch was approa‐
ched.

1

A negative hardware limit switch was reached or
exceeded.

"HWLimitMaxActive"
0

No positive hardware limit switch was approa‐
ched.

1

A positive hardware limit switch was reached or
exceeded.

-

-

-

Reserved

-

-

-

"SuperimposedMotionCommand"

Bit 22
Bit 23

0

No overlaid movement is active.

1

No overlaid movement is running.

Bit 24

-

-

-

Reserved

Bit 25

-

-

-

"AxisSimulation"

Bit 26

Bit 27

-

-

-

-

-

-

0

The simulation is not running.

1

The simulation is active.

"TorqueLimitingCommand"
0

No "MC_TorqueLimiting" job is active.

1

An "MC_TorqueLimiting" job is running

"InLimitation"
0

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

The drive does not operate at the torque limit.

1753

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag

Data type

Values

W

Description
1

Bit 28

-

Bit 29

-

Bit 30

-

Bit 31

-

-

-

-

-

-

-

-

-

The drive operates at least at the threshold va‐
lue (default 90%) of the torque limit.

"NonPositionControlled"
0

The axis is in position-controlled mode.

1

The axis is not in position-controlled mode.

"KinematicsMotionCommand"
0

The axis is not used for a kinematics job.

1

The axis is used for a kinematics job.

"InClamping"
0

The axis is not clamped at a fixed stop.

1

The axis is clamped at a fixed stop.

"MotionInCommand"
0

No "MotionIn" job is active.

1

A "MotionIn" job is running.

Consulte también
Evaluating the technology data block (Página 1453)

"StatusWord2" tag (positioning axis)
The "<TO>.StatusWord2" tag contains the status information of the technology object.
Information on the evaluation of the individual bits (e.g. bit 0 "StopCommand") can be found in
the "Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/S7-1500T
Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459)
documentation.

Tags
Legend (Página 1718)
Tag

Data type

Value range

W

Description

StatusWord2

DWORD

-

RON

Status information of the technology object

BOOL

-

RON

"StopCommand"

Bit 0

Bit 1 …

BOOL

-

RON

0

No "MC_Stop" job is active.

1

An "MC_Stop" job is running. The technology
object is disabled.

Reserved

Bit 31

"ErrorWord" tag (positioning axis)
The "<TO>.ErrorWord" tag indicates technology object errors (technology alarms).

1754

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Information on the evaluation of the individual bits (e.g. bit 3 "CommandNotAccepted") can be
found in the "Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/
S7-1500T Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/
109766459) documentation.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1755

Control de movimiento
6.1 Using S7-1500 Motion Control

Tag
Legend (Página 1718)
Tag
ErrorWord

Data type

Values

W

Description

DWORD

-

RON

Bit 0

-

-

-

"SystemFault"

Bit 1

-

-

-

"ConfigFault"

A system-internal error has occurred.
Configuration error
One or more configuration parameters are inconsistent or
invalid.
Bit 2

-

-

-

"UserFault"
Error in user program at a Motion Control instruction or its
use

Bit 3

-

-

-

"CommandNotAccepted"
Job cannot be executed
A Motion Control instruction cannot be executed because
necessary requirements have not been met.

Bit 4

-

-

-

"DriveFault"
Error in drive

Bit 5

-

-

-

"SensorFault"
Error in encoder system

Bit 6

-

-

-

"DynamicError"

Bit 7

-

-

-

"CommunicationFault"

Specified dynamic values are limited to permissible values.
Communication error
Missing or faulty communication.
Bit 8

-

-

-

"SWLimit"
Software limit switch reached or overtraveled.

Bit 9

-

-

-

"HWLimit"
Hardware limit switch reached or overtraveled.

Bit 10

-

-

-

"HomingError"
Error during homing operation
The homing cannot be completed.

Bit 11

-

-

-

"FollowingErrorFault"
Following error limits exceeded

Bit 12

-

-

-

"PositioningFault"
Positioning error

Bit 13

-

-

-

"PeripheralError"
Error accessing a logical address

Bit 14

-

-

-

Reserved

Bit 15

-

-

-

"AdaptionError"

Bit 16 ...

-

-

-

Reserved

Error in automatic data transfer
Bit 31

1756

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Evaluating the technology data block (Página 1453)

"ErrorDetail" tag (positioning axis)
The tag structure "<TO>.ErrorDetail.<tag name>" contains the alarm number and the effective
local alarm reaction for the technology alarm that is currently pending on the technology object.
You can find a list of the technology alarms and alarm reactions in the "Technology alarms"
appendix of the "S7-1500/S7-1500T Motion Control overview" (https://
support.industry.siemens.com/cs/ww/en/view/109766459) documentation.

Tags
Legend (Página 1718)
Tag

Data type

Values

ErrorDetail.

TO_Struct_ErrorDetail

W

Description

Number

UDINT

-

RON

Alarm number

Reaction

DINT

0 to 5

RON

Effective alarm reaction
0

No reaction

1

Stop with current dynamic values

2

Stop with maximum dynamic values

3

Stop with emergency stop ramp

4

Remove enable

5

Track setpoints

Consulte también
Evaluating the technology data block (Página 1453)
Technology alarms (Página 1481)

"WarningWord" tag (positioning axis)
The "<TO>.WarningWord" tag indicates pending warnings at the technology object.
Information on the evaluation of the individual bits (e.g. bit 13 "PeripheralWarning") can be
found in the "Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/
S7-1500T Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/
109766459) documentation.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1757

Control de movimiento
6.1 Using S7-1500 Motion Control

Tag
Legend (Página 1718)
Tag
WarningWord

Data type

Values

W

Description

DWORD

-

RON

Bit 0

-

-

-

"SystemWarning"

Bit 1

-

-

-

"ConfigWarning"

A system-internal error has occurred.
Configuration error
One or several configuration parameters are adjusted in‐
ternally.
Bit 2

-

-

-

"UserWarning"
Error in user program at a Motion Control instruction or its
use

Bit 3

-

-

-

"CommandNotAccepted"
Job cannot be executed
A Motion Control instruction cannot be executed because
necessary requirements have not been met.

Bit 4

-

-

-

"DriveWarning"
Error in drive

Bit 5

-

-

-

"SensorWarning"
Error in encoder system

Bit 6

-

-

-

"DynamicWarning"

Bit 7

-

-

-

"CommunicationWarning"

Specified dynamic values are limited to permissible values.
Communication error
Missing or faulty communication.
Bit 8

-

-

-

"SWLimitMin"

Bit 9

-

-

-

"SWLimitMax"

Bit 10

-

-

-

"HomingWarning"
Error during homing operation
The homing cannot be completed.

Bit 11

-

-

-

"FollowingErrorWarning"
Warning limit of following error monitoring reached/excee‐
ded

Bit 12

-

-

-

"PositioningWarning"

Bit 13

-

-

-

"PeripheralWarning"

Bit 14

-

-

-

Reserved

Bit 15

-

-

-

"AdaptionWarning"

Bit 16...
Bit 31

-

-

-

Reserved

Positioning error
Error accessing a logical address

Error in automatic data transfer

1758

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Evaluating the technology data block (Página 1453)

"ControlPanel" tag (positioning axis)
The tag structure "<TO>.ControlPanel.<tag name>" contains no user-relevant data. This tag
structure is internally used.

"InternalToTrace" tag (positioning axis)
The tag structure "<TO>.InternalToTrace.<tag name>" contains no user-relevant data. This tag
structure is internally used.

Tags of the technology object external encoder
Legend
Tag

Name of the tag

Data type

Data type of the tag

Values

Value range of the tag - minimum value to maximum value
If no specific value is shown, the value range limits of the relevant data type apply or the information under
"Description".

W

Effectiveness of changes in the technology data block
DIR

Direct:
Values are changed via direct assignment and take effect at the start of the next MC‑Ser‐
vo [OB91].

CAL

At call of Motion Control instruction:
Values are changed directly and take effect at the start of the next MC‑Servo [OB91] after the
call of the corresponding Motion Control instruction in the user program.

RES

Restart:
Changes to the start value in the load memory are made using the extended instruction
"WRIT_DBL" (write to DB in load memory). Changes will not take effect until after restart of the
technology object.

RON

Read only:
The tag cannot and must not be changed during runtime of the user program.

Description

Description of the tag

Access to the tags is with "<TO>.<tag name>". The placeholder <TO> represents the name of
the technology object.

Actual values and setpoints (external encoder)
The following tags indicate the setpoint and actual values of the technology object.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1759

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1759)
Tag

Data type

Values

W

Description

ActualPosition

LREAL

-

RON

Actual position

ActualVelocity

LREAL

-

RON

Actual velocity

ActualAcceleration

LREAL

-

RON

Actual acceleration

ActualModuloCycle

DINT

-2147483648 t
o 2147483647

RON

Number of modulo cycles of the actual value

"Sensor[1..4]" tag (external encoder)
The tag structure "<TO>.Sensor[1..4].<tag name>" contains the controller-end configuration
for the encoder, and the configuration for active and passive homing.

1760

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1759)
Tag

Data type

Sensor[1..4].

ARRAY [1..4] OF TO_Struct_Sen‐
sor / TO_Struct_ExternalEnco‐
der_Sensor

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Values

W

Description

1761

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
Type

Data type

Values

W

Description

DINT

0 to 2

RON

Encoder type
0

"INCREMENTAL"

1

"ABSOLUTE"

2

"CYCLIC_ABSOLUTE"

Incremental
Absolute
Cyclic absolute
InverseDirection

System

BOOL

DINT

-

0, 1

RES

RES

Inversion of the actual value
FALSE

No

TRUE

Yes

Encoder system
0

"LINEAR"
Linear encoder

1

"ROTATORY"
Rotary encoder

MountingMode

DataAdaption

DINT

DINT

0 to 2

0, 1

RES

RES

Mounting type of encoder
0

On motor shaft

1

On load side

2

External measuring system

Automatic transfer of the drive values reference speed,
maximum speed and reference torque in the device
0

No automatic transfer, manual configuration of
values

1

Automatic transfer of values configured in the
drive to the configuration of the technology ob‐
ject

Interface.
AddressIn

VREF

0 to 65535

RON

Input address for the PROFIdrive telegram

AddressOut

VREF

0 to 65535

RON

Output address for the PROFIdrive telegram

Number

UDINT

1 to 2

RON

Number of the encoder in the telegram

Resolution

LREAL

-1.0E12 to 1.0E RES
12

Resolution of a linear encoder (offset between two enco‐
der pulses)

StepsPerRevolution

UDINT

1 to 8388608

RES

Increments per rotary encoder revolution

FineResolutionXist1

UDINT

0 … 31

RES

Number of bits for fine resolution Gx_XIST1 (cyclic actual
encoder value)

FineResolutionXist2

UDINT

0 … 31

RES

Number of bits for fine resolution Gx_XIST2 (absolute va‐
lue of encoder)

DeterminableRevo‐
lutions

UDINT

0 to 8388608

RES

Number of differentiable encoder revolutions for a multiturn absolute encoder

Parameter.

(For a single-turn absolute encoder = 1; for an incremental
encoder = 0)

1762

DistancePerRevolu‐
tion

LREAL

0.0 to 1.0E12

RES

Load distance per revolution of an externally mounted en‐
coder

BehaviorGx_XIST1

DINT

0, 1

RES

Evaluation of Gx_XIST1 bits

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag

Data type

PassiveHoming.

Values

W

Description
0

Based on the bits of the encoder resolution

1

32-bit value of the encoder value

TO_Struct_SensorPassiveHoming

Mode

DINT

SideInput

BOOL

Direction

DINT

0 to 2

-

0 to 2

RES

CAL

CAL

Homing mode
0

Use zero mark via PROFIdrive telegram

1

Zero mark via PROFIdrive telegram and refe‐
rence output cam

2

Use homing mark via digital input

Side of the digital input for passive homing
FALSE

Negative side

TRUE

Positive side

Homing direction/approach direction on the homing mark
0

Positive homing direction

1

Negative homing direction

2

Current homing direction

DigitalInputAddress

VREF

0 to 65535

RON

Address of the digital input

SwitchLevel

BOOL

-

RON

Signal level that is present at the digital input when homing
mark is approached
FALSE

Low level

TRUE

High level

"CrossPlcSynchronousOperation" tag (external encoder)
The tag structure "<TO>.CrossPlcSynchronousOperation.<tag name>" contains the
configuration of the cross-PLC synchronous operation.

Tags
Legend (Página 1759)
Values

W

Tag

Data type

CrossPlcSynchronousO‐
peration.

TO_Struct_CrossPlcSynchronou‐
sOperation

Interface[1..1].

Description

ARRAY [1..1] of
TO_Struct_CrossPlcLeadingVa‐
lueInterface

EnableLeadingVa‐
lueOutput

BOOL

AddressOut

VREF

-

RON

Output address for the leading value telegram

LREAL

0.0 to 1.0E12

DIR

Delay time of leading value output on the local following
axes

LocalLeadingValueDe‐
layTime

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

-

RON

Provide cross-PLC leading value
FALSE

No

TRUE

Yes

1763

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Evaluating the technology data block (Página 1453)

"Extrapolation" tag (external encoder)
The tag structure "<TO>.Extrapolation.<tag name>" contains the configuration of the actual
value extrapolation.

1764

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1759)
Tag

Data type

Extrapolation.

TO_Struct_Extrapolation

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Values

W

Description

1765

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
LeadingAxisDepen‐
dentTime

Data type

Values

W

Description

LREAL

-

RON

Extrapolation time component (caused by leading axis)
Results from the following times:
● Time of actual value acquisition for the leading axis
● Interpolator cycle clock
● Time of position filter of actual value extrapolation (T1
+ T2)

FollowingAxisDepen‐
dentTime

LREAL

0.001 to 1.0E12 DIR

Extrapolation time component (caused by following axis)
Results from the following times:
● For a following axis with set velocity precontrol:
–

Communication cycle

–

Interpolator cycle clock

–

Speed control loop substitute time for the following
axis

–

Output delay time of the setpoint at the following
axis

● For a following axis without velocity precontrol:

Settings.
SystemDefinedEx‐
trapolation
ExtrapolatedVelo‐
cityMode

–

Communication cycle

–

Interpolator cycle clock

–

Position control loop equivalent time (1/Kv from
"<TO>.PositionControl.Kv")

–

Output delay time of the setpoint at the following
axis

TO_Struct_ExtrapolationSettings
DINT

DINT

0, 1

0, 1

RES

RES

Leading axis dependent time
0

Not effective

1

Effective

Effective velocity value for the synchronization function
0

"FilteredVelocity"
Leading value velocity from filtered actual velo‐
city

1

"VelocityByDifferentiation"
The leading value velocity results from the diffe‐
rentiation of the extrapolated leading value po‐
sition

PositionFilter.
T1

LREAL

0.0 to 1.0E12

DIR

Position filter time constant T1

T2

LREAL

0.0 to 1.0E12

DIR

Position filter time constant T2

VelocityFilter.

TO_Struct_ExtrapolationVelocity‐
Filter

T1

LREAL

0.0 to 1.0E12

DIR

Velocity filter time constant T1

T2

LREAL

0.0 to 1.0E12

DIR

Velocity filter time constant T2

VelocityTolerance.

1766

TO_Struct_ExtrapolationPosition‐
Filter

TO_Struct_ExtrapolationVelocity‐
Tolerance

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
Range
Hysteresis.
Value

Data type

Values

W

Description

LREAL

0.0 to 1.0E12

DIR

Tolerance band width for velocity

TO_Struct_ExtrapolationHysteresis
LREAL

0.0 to 1.0E12

DIR

Hysteresis of the extrapolated actual position value

"LoadGear" tag (external encoder)
The tag structure "<TO>.LoadGear.<tag name>" contains the configuration of the load gear.

Tags
Legend (Página 1759)
Tag
LoadGear.

Data type

Value range

W

Description

TO_Struct_LoadGear

Numerator

UDINT

1 to 429496729 RES
5

Load gear counter

Denominator

UDINT

1 to 429496729 RES
5

Load gear denominator

"Properties" tag (external encoder)
The tag structure "<TO>.Properties.<tag name>" contains the configuration of the type of axis
or motion.

Tags
Legend (Página 1759)
Tag

Data type

Properties.

TO_Struct_Properties

MotionType

DINT

Value range
0, 1

W

Description

RON

Display of axis type or motion type
0

Linear axis or motion

1

Rotary axis or motion

"Units" tag (external encoder)
The tag structure "<TO>.Units.<tag name>" shows the set technological units.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1767

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1759)
Tag

Data type

Units.

TO_Struct_Units / TO_Struct_Exter‐
nalEncoder_Units

LengthUnit

VelocityUnit

UDINT

UDINT

Values

-

-

W

RON

RON

Description

Unit for position
1010

m

1013

mm

1536

mm1)

1011

km

1014

µm

1015

nm

1019

in

1018

ft

1021

mi

1004

rad

1005

°

1537

°1)

Unit for velocity
1521

°/s

1539

°/s1)

1522

°/min

1086

rad/s

1523

rad/min

1062

mm/s

1538

mm/s1)

1061

m/s

1524

mm/min

1525

m/min

1526

mm/h

1063

m/h

1527

km/min

1064

km/h

1066

in/s

1069

in/min

1067

ft/s

1070

ft/min

1075

mi/h

TimeUnit

UDINT

-

RON

Unit for time

UnitFactor

UDINT

-

RON

Factor for internal conversion in the high-resolution units.

1054
1)

s

Position values with higher resolution or six decimal places

1768

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

"Mechanics" tag (external encoder)
The tag structure "<TO>.Mechanics.<tag name>" contains the configuration of the mechanics.

Tags
Legend (Página 1759)
Tag

Data type

Mechanics.

TO_Struct_Mechanics

LeadScrew

LREAL

Value range
0.0 to 1.0E12

W

Description

RES

Leadscrew pitch

"Modulo" tag (external encoder)
The tag structure "<TO>.Modulo.<tag name>" contains the configuration of the modulo
function.

Tags
Legend (Página 1759)
Values

Tag

Data type

Modulo.

TO_Struct_Modulo

Enable
Length

BOOL
LREAL

-

W

Description

RES

FALSE

Modulo conversion disabled

TRUE

Modulo conversion enabled

0.001 to 1.0E12 RES

Modulo length
When modulo conversion is enabled, a check is made for
modulo length > 0.0

StartValue

LREAL

-1.0E12 to 1.0E RES
12

Modulo start value

"Homing" tag (external encoder)
The tag structure "<TO>.Homing.<tag name>" contains the configuration for homing the TO.

Tags
Legend (Página 1759)
Tag

Data type

Homing.

TO_Struct_Homing / TO_Struct_Ex‐
ternalEncoder_Homing

HomePosition

LREAL

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Values

W

-1.0E12 to 1.0E CAL
12

Description

Home position

1769

Control de movimiento
6.1 Using S7-1500 Motion Control

"StatusProvidedLeadingValue" tag (external encoder)
The tag structure "<TO>.StatusProvidedLeadingValue.<tag name>" contains the provided
leading value with leading value delay of the cross-PLC synchronous operation.

Tags
Legend (Página 1759)
Data
type

StatusProvidedLea‐
dingValue.

TO_Struct_StatusProvide‐
dLeadingValue

DelayedLeading‐
Value

Values

W

Tag

Description
Provided leading value

TO_Struct_ProvidedLeading‐ Leading value with leading value delay
Value

Position

LREAL

-1.0E12 to 1 RO
.0E12
N

Position

Velocity

LREAL

-1.0E12 to 1 RO
.0E12
N

Velocity

Acceleration

LREAL

-1.0E12 to 1 RO
.0E12
N

Acceleration

Consulte también
Evaluating the technology data block (Página 1453)

"StatusSensor[1..4]" tag (external encoder)
The tag structure "<TO>.StatusSensor[1..4].<tag name>" indicates the status of the measuring
system.

1770

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1759)
Tag

Data type

StatusSensor[1..4].

Array [1..4] OF TO_Struct_Status‐
Sensor

State

DINT

Values

0 to 2

W

RON

Description

Status of the actual encoder value
0

"NOT_VALID"
Invalid

1

"WAITING_FOR_VALID"
Waiting for "Valid" status

2

"VALID"
Valid

CommunicationOK

BOOL

-

RON

Cyclic BUS communication between controller and enco‐
der
FALSE

Error

BOOL

-

RON

Not established

TRUE

Established

FALSE

No error in the measuring system

TRUE

Error in the measuring system.

AbsEncoderOffset

LREAL

-

RON

Home position offset for value of an absolute value enco‐
der.

Control

BOOL

-

RON

FALSE

Encoder is not active

TRUE

Encoder is active

The value will be retentively stored in the CPU.

Position

LREAL

-

RON

Encoder position

Velocity

LREAL

-

RON

Encoder velocity

AdaptionState

DINT

-

RON

Status of automatic data transfer of encoder parameters
0

"NOT_ADAPTED"

1

"IN_ADAPTION"

2

"ADAPTED"

Data not transferred
Data transfer in progress
Data transfer complete
3

"NOT_APPLICABLE"
Data transfer not selected, not possible

4

"ADAPTION_ERROR"
Error during data transfer

ModuloCycle

DINT

-2147483648 t
o 2147483647

RON

Number of modulo cycles

"StatusExtrapolation" tag (external encoder)
The tag structure "<TO>.StatusExtrapolation.<tag name>" indicates the status of the actual
value extrapolation.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1771

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1759)
Tag

Data type

Values

W

StatusExtrapolation.

TO_Struct_StatusExtrapolation

Description

FilteredPosition

LREAL

-1.0E12 to 1.0E RON
12

Position after position filter

FilteredVelocity

LREAL

-1.0E12 to 1.0E RON
12

Velocity after velocity filter and tolerance band

ExtrapolatedPosition

LREAL

-1.0E12 to 1.0E RON
12

Extrapolated position

ExtrapolatedVelocity

LREAL

-1.0E12 to 1.0E RON
12

Extrapolated velocity

"StatusWord" tag (external encoder)
The "<TO>.StatusWord" tag contains the status information of the technology object.
Information on the evaluation of the individual bits (e.g. bit 5 "HomingDone") can be found in the
"Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/S7-1500T
Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459)
documentation.

1772

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tag
Legend (Página 1759)
Tag

Data type

StatusWord
Bit 0

Values

W

Description

DWORD

-

RON

Status information of the technology object

-

-

-

"Enable"
Enable status

Bit 1

Bit 2

-

-

-

-

-

-

0

Technology object disabled

1

Technology object enabled

"Error"
0

No error present

1

Error present

"RestartActive"
0

No restart active

1

Restart active
The technology object is being reinitialized.

Bit 3

-

-

-

"OnlineStartValuesChanged"
0

Restart tags unchanged

1

Change to Restart tags
For the changes to be applied, the technology
object must be reinitialized.

Bit 4

-

-

-

Reserved

Bit 5

-

-

-

"HomingDone"
Homing status

Bit 6

Bit 7 …

-

-

-

0

Technology object not homed

1

Technology object homed

"Done"
0

Motion job is active or axis control panel enabled

1

No motion job in process and axis control panel
disabled

-

-

-

Reserved

-

-

-

"HomingCommand"

Bit 10
Bit 11

Bit 12...
Bit 31

-

-

-

0

No "MC_Home" job in progress

1

"MC_Home" job in progress

Reserved

"ErrorWord" tag (external encoder)
The "<TO>.ErrorWord" tag indicates technology object errors (technology alarms).
Information on the evaluation of the individual bits (e.g. bit 3 "CommandNotAccepted") can be
found in the "Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/
S7-1500T Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/
109766459) documentation.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1773

Control de movimiento
6.1 Using S7-1500 Motion Control

Tag
Legend (Página 1759)
Tag

Data type

ErrorWord

Values

W

Description

DWORD

-

RON

Bit 0

-

-

-

"SystemFault"

Bit 1

-

-

-

"ConfigFault"

A system-internal error has occurred.
Configuration error
One or more configuration parameters are inconsistent or
invalid.
Bit 2

-

-

-

"UserFault"
Error in user program at a Motion Control instruction or its
use

Bit 3

-

-

-

"CommandNotAccepted"
Job cannot be executed
A Motion Control instruction cannot be executed because
necessary requirements have not been met.

Bit 4

-

-

-

Reserved

Bit 5

-

-

-

"SensorFault"
Error in encoder system

Bit 6

-

-

-

Reserved

Bit 7

-

-

-

"CommunicationFault"
Communication error
Missing or faulty communication.

Bit 8

-

-

-

Reserved

Bit 9

-

-

-

Reserved

Bit 10

-

-

-

"HomingError"
Error during homing operation
The homing cannot be completed.

Bit 11

-

-

-

Reserved

Bit 12

-

-

-

Reserved

Bit 13

-

-

-

"PeripheralError"
Error accessing a logical address

Bit 14 …

-

-

-

Reserved

Bit 31

"ErrorDetail" tag (external encoder)
The tag structure "<TO>.ErrorDetail.<tag name>" contains the alarm number and the effective
local alarm reaction for the technology alarm that is currently pending on the technology object.
You can find a list of the technology alarms and alarm reactions in the "Technology alarms"
appendix of the "S7-1500/S7-1500T Motion Control overview" (https://
support.industry.siemens.com/cs/ww/en/view/109766459) documentation.

1774

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1759)
Tag
ErrorDetail.

Data type

Values

W

Description

TO_Struct_ErrorDetail

Number

UDINT

-

RON

Alarm number

Reaction

DINT

0, 4

RON

Effective alarm reaction
0

No reaction

4

Remove enable

"WarningWord" tag (external encoder)
The "<TO>.WarningWord" tag indicates pending warnings at the technology object.
Information on the evaluation of the individual bits (e.g. bit 13 "PeripheralWarning") can be
found in the "Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/
S7-1500T Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/
109766459) documentation.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1775

Control de movimiento
6.1 Using S7-1500 Motion Control

Tag
Legend (Página 1759)
Tag
WarningWord

Data type

Values

W

Description

DWORD

-

RON

Bit 0

-

-

-

"SystemWarning"

Bit 1

-

-

-

"ConfigWarning"

A system-internal error has occurred.
Configuration error
One or several configuration parameters are adjusted in‐
ternally.
Bit 2

-

-

-

"UserWarning"
Error in user program at a Motion Control instruction or its
use

Bit 3

-

-

-

"CommandNotAccepted"
Job cannot be executed
A Motion Control instruction cannot be executed because
necessary requirements have not been met.

Bit 4

-

-

-

Reserved

Bit 5

-

-

-

"SensorWarning"
Error in encoder system

Bit 6

-

-

-

Reserved

Bit 7

-

-

-

"CommunicationWarning"
Communication error
Missing or faulty communication.

Bit 8

-

-

-

Reserved

Bit 9

-

-

-

Reserved

Bit 10

-

-

-

"HomingWarning"
Error during homing operation
The homing cannot be completed.

Bit 11

-

-

-

Reserved

Bit 12

-

-

-

Reserved

Bit 13

-

-

-

"PeripheralWarning"
Error accessing a logical address

Bit 14...
Bit 31

-

-

-

Reserved

"InternalToTrace[1..4]" tag (external encoder)
The tag structure "<TO>.InternalToTrace[1..4].<tag name>" contains no user-relevant data.
This tag structure is internally used.

1776

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1759)
Tag

Data type

Values

W

InternalToTrace[1..4].

ARRAY [1..4] OF TO_Struct_Inter‐
nal

Description

Id

DINT

-

DIR

-

Value

LREAL

-

RON

-

"MC_Power" function diagrams
Drive connection via PROFIdrive
PROFIdrive State Machine
An axis controls the PROFIdrive state machine in the drive through the control word in the
PROFIdrive telegram. The PROFIdrive state machine shows the state of the drive.
The following table shows the states of the PROFIdrive state machine:
Status

Description

S1

Switching on inhibited (drive off, brake closed if necessary)

S2

Ready for power-up

S3

Switched on (drive switched on, release brake if necessary)

S4

Operation (drive released, brakes released if necessary)

S5

Switching off (braking with drive-defined ramp)

Additional information
For more information about the PROFIdrive state machine, refer to Siemens Industry Online
Support in the FAQ entry 109770665 (https://support.industry.siemens.com/cs/ww/en/view/
109770665).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1777

Control de movimiento
6.1 Using S7-1500 Motion Control

"StopMode" = 0, 2
Function chart: Enabling a technology object and disabling with "StopMode" = 0, 2
0&B3RZHU(QDEOH
0&B3RZHU%XV\
0&B3RZHU6WDWXV




W




W




72!6WDWXV'ULYH
,Q2SHUDWLRQ



72!(UURU'HWDLO
5HDFWLRQ



W



W



72!6WDWXV:RUG
'RQH



72!
6WDWXV:RUG(UURU



W



W



W

6
352),GULYH
6WDWH0DFKLQH

6
6
6
6

W

9HORFLW\


W


①

● "StopMode" = 0
The axis is braked with the configured emergency stop deceleration.
● "StopMode" = 2
The axis decelerates with the configured maximum deceleration.

1778

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

"StopMode" = 1
Function chart: Enabling a technology object and disabling with "StopMode" = 1
0&B3RZHU(QDEOH
0&B3RZHU%XV\
0&B3RZHU6WDWXV




W




W




72!6WDWXV'ULYH
,Q2SHUDWLRQ



72!(UURU'HWDLO
5HDFWLRQ



W



W



72!6WDWXV:RUG
'RQH



72!
6WDWXV:RUG(UURU



W



W



W

6
352),GULYH
6WDWH0DFKLQH

6
6
6
6

W

9HORFLW\


W


① The deceleration ramp depends on the configuration in the drive.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1779

Control de movimiento
6.1 Using S7-1500 Motion Control

Alarm reactions with braking ramp via the technology object
Function chart: Enabling a technology object and occurrence of a technology alarm with braking ramp
via the technology object
0&B3RZHU(QDEOH
0&B3RZHU%XV\
0&B3RZHU6WDWXV



(UURU



W




W




72!6WDWXV'ULYH
,Q2SHUDWLRQ



72!(UURU'HWDLO
5HDFWLRQ



72!6WDWXV:RUG
'RQH



72!6WDWXV:RUG
(UURU



W



W



W



W



W

6
352),GULYH
6WDWH0DFKLQH

6
6
6
6

W

9HORFLW\


W


①



The axis is braked based on the alarm reaction:
● Stop with current dynamic values (<TO>.ErrorDetail.Reaction = 1)
The axis is braked with the deceleration in the Motion Control instruction.
● Stop with maximum dynamic values (<TO>.ErrorDetail.Reaction = 2)
The axis decelerates with the configured maximum deceleration.

②

1780

● Stop with emergency stop ramp (<TO>.ErrorDetail.Reaction = 3)
The axis is braked with the configured emergency stop deceleration.
The technology alarm is acknowledged.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Alarm response "Remove enable"
Function chart: Enabling a technology object and occurrence of a technology alarm with alarm reaction
"Remove enable"
0&B3RZHU(QDEOH
0&B3RZHU%XV\
0&B3RZHU6WDWXV



(UURU



W




W




72!6WDWXV'ULYH
,Q2SHUDWLRQ



72!(UURU'HWDLO
5HDFWLRQ



72!6WDWXV:RUG
'RQH



72!6WDWXV:RUG
(UURU



W



W



W



W



W

6
352),GULYH
6WDWH0DFKLQH

6
6
6
6

W

9HORFLW\


W


①
②



The deceleration ramp depends on the configuration in the drive.

The technology alarm is acknowledged at time ②.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1781

Control de movimiento
6.1 Using S7-1500 Motion Control

Analog drive connection
"StopMode" = 0, 2
Function chart: Enabling a technology object and disabling with "StopMode" = 0, 2
0&B3RZHU(QDEOH
0&B3RZHU%XV\
0&B3RZHU6WDWXV




W




W




W

72!6WDWXV'ULYH 
,Q2SHUDWLRQ 

W

72!(UURU'HWDLO 
5HDFWLRQ 

W

72! 
6WDWXV:RUG'RQH 

W

72! 
6WDWXV:RUG(UURU 

W

'2 
(QDEOH'ULYH2XWSXW 

W

', 
'ULYH5HDG\,QSXW 

W

9HORFLW\


W


①

● "StopMode" = 0
The axis is braked with the configured emergency stop deceleration.
● "StopMode" = 2
The axis decelerates with the configured maximum deceleration.

1782

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

"StopMode" = 1
Function chart: Enabling a technology object and disabling with "StopMode" = 1
0&B3RZHU(QDEOH
0&B3RZHU%XV\
0&B3RZHU6WDWXV




W




W




W

72!6WDWXV'ULYH 
,Q2SHUDWLRQ 

W

72!(UURU'HWDLO 
5HDFWLRQ 

W

72! 
6WDWXV:RUG'RQH 

W

72! 
6WDWXV:RUG(UURU 

W

'2 
(QDEOH'ULYH2XWSXW 

W

', 
'ULYH5HDG\,QSXW 

W

9HORFLW\


W


①
②



The deceleration ramp depends on the configuration in the drive.
The behavior of the ready signal of the drive "DI DriveReadyInput" is manufacturer-spe‐
cific.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1783

Control de movimiento
6.1 Using S7-1500 Motion Control

Alarm reactions with braking ramp via the technology object
Function chart: Enabling a technology object and occurrence of a technology alarm with braking ramp
via the technology object
0&B3RZHU(QDEOH
0&B3RZHU%XV\
0&B3RZHU6WDWXV



(UURU



W




W




W

72!6WDWXV'ULYH 
,Q2SHUDWLRQ 

W

72!(UURU'HWDLO 
5HDFWLRQ 

W

72! 
6WDWXV:RUG'RQH 

W

72! 
6WDWXV:RUG(UURU 

W

'2 
(QDEOH'ULYH2XWSXW 

W

', 
'ULYH5HDG\,QSXW 

W

9HORFLW\


W


①





The axis is braked based on the alarm reaction:
● Stop with current dynamic values (<TO>.ErrorDetail.Reaction = 1)
The axis is braked with the deceleration in the Motion Control instruction.
● Stop with maximum dynamic values (<TO>.ErrorDetail.Reaction = 2)
The axis decelerates with the configured maximum deceleration.

②
③

1784

● Stop with emergency stop ramp (<TO>.ErrorDetail.Reaction = 3)
The axis is braked with the configured emergency stop deceleration.
The behavior of the ready signal of the drive "DI DriveReadyInput" is manufacturer-specific.
The technology alarm is acknowledged at time ③.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Alarm response "Remove enable"
Function chart: Enabling a technology object and occurrence of a technology alarm with alarm reaction
"Remove enable"
0&B3RZHU(QDEOH
0&B3RZHU%XV\
0&B3RZHU6WDWXV



(UURU



W




W




W

72!6WDWXV:RUG 
0&B3RZHU6WRS$FWLYH 

W

72!6WDWXV:RUG 
(UURU6WRS$FWLYH 

W

72!6WDWXV'ULYH 
,Q2SHUDWLRQ 

W

72!(UURU'HWDLO 
5HDFWLRQ 

W

72! 
6WDWXV:RUG'RQH 

W

72! 
6WDWXV:RUG(UURU 

W

'2 
(QDEOH'ULYH2XWSXW 

W

', 
'ULYH5HDG\,QSXW 

W

9HORFLW\


W


①
②
③





The deceleration ramp depends on the configuration in the drive.
The behavior of the ready signal of the drive "DI DriveReadyInput" is manufacturer-specific.
The technology alarm is acknowledged at time ③.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1785

Control de movimiento
6.1 Using S7-1500 Motion Control

6.1.3

Using S7-1500/S7-1500T measuring input and output cam functions

6.1.3.1

Introduction

Interplay of the various documents
For a better overview, the documentation of the Motion Control functions is divided into the
following documents:
Documentation

Description

S7-1500/S7-1500T Motion Con‐
trol overview

This documentation describes the general Motion Control func‐
tions independent of technology objects.

Function manual "S7-1500/
S7-1500T Motion Control over‐
view" (https://
support.industry.siemens.com/cs/
ww/en/view/109766459)
Using S7-1500/S7-1500T axis
functions

This documentation describes the Motion Control functions for the
following technology objects:

Function manual "S7-1500/
S7-1500T Axis functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766462)

● Speed axis
● Positioning axis
● External encoder

Using S7-1500/S7-1500T measu‐ This documentation describes the Motion Control functions for the
ring input and output cam functions following technology objects:
Function manual "S7-1500/
S7-1500T Measuring input and
output cam functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766466)

● Measuring input

Using S7-1500/S7-1500T
synchronous operation functions

This documentation describes the Motion Control functions for the
following technology objects:

Function manual "S7-1500/
S7-1500T Synchronous operation
functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766464)

● Synchronous axis

Using S7-1500T kinematics func‐
tions

This documentation describes the Motion Control functions for the
following technology objects:

● Output cam
● Cam track

● Cam (S7-1500T)
● Leading axis proxy (S7-1500T)

Function manual "S7-1500T Kine‐ ● Kinematics (S7-1500T)
matics functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766463)

Additional information
You can find an overview and important links to the topic "SIMATIC Motion Control" in the
Siemens Industry Online Support under the entry ID 109751049 (https://
support.industry.siemens.com/cs/ww/en/view/109751049).

1786

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Functions
You execute the functions of the measuring input, output cam and cam track technology objects
via the Motion Control instructions in your user program.
The following table shows the Motion Control instructions that are supported by the technology
objects:
Motion Control instruction

"MC_Reset"

Validity

Technology object

S7-1500

S7-1500T

Measuring in‐
put (Pági‐
na 1787)

Output cam
(Página 1800)

Cam track (Pá‐
gina 1814)

X

X

X

X

X

X

X

X

-

-

X

X

X

-

-

X

X

X

-

-

X

X

-

X

-

X

X

-

-

X

Acknowledge alarms, restart techno‐
logy objects
"MC_MeasuringInput"
Start measuring once
"MC_MeasuringInputCyclic"
Start cyclic measuring
"MC_AbortMeasuringInput"
Cancel active measuring job
"MC_OutputCam"
Activate/deactivate output cam
"MC_CamTrack"
Activate/deactivate cam track

6.1.3.2

Basics

Measuring input technology object
The measuring input technology object acquires the actual position of an axis or external
encoder at a signal change at the measuring input.
You can find an overview of the functions of the measuring input technology object in the
"Functions (Página 1787)" section.
The following figure shows the basic principle of operation of the measuring input technology
object:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1787

Control de movimiento
6.1 Using S7-1500 Motion Control

&RQILJXUDWLRQRIWHFKQRORJ\REMHFWV

7HFKQRORJ\REMHFW
ZLWKSRVLWLRQYDOXH

3RVLWLRQ

7HFKQRORJ\REMHFW
0HDVXULQJLQSXW
0HDVXUHGYDOXHJHQHUDWLRQ

0HDVXUHGYDOXH
RXWSXW

8VHUSURJUDP
0RWLRQ&RQWURO
LQVWUXFWLRQV
0HDVXUHGYDOXHVWDWXV
HYDOXDWLRQ

$FWXDOSRVLWLRQ

6\VWHPWLPH

&RPPXQLFDWLRQ
&RPPXQLFDWLRQ

352),1(7

6,1$0,&6

6LJQDODFTXLVLWLRQ
707LPHU','4

$OWHUQDWLYHFRQQHFWLRQ
6HQVRU

Measurement types
The following types of measurement can be performed:
● One-time measurement (Página 1791)
Up to two measured values are acquired with edge accuracy with one measuring job. A onetime measuring job is started with "MC_MeasuringInput".
● Cyclic measuring (Página 1792)
With cyclic measuring, up to two measured values are acquired with edge accuracy in each
position control cycle.
A cyclic measuring job is started with "MC_MeasuringInputCyclic". The measurements are
continued cyclically until they are ended per command.
The edges to be detected are selected when starting the measurement using Motion Control
instruction "MC_MeasuringInput" or "MC_MeasuringInputCyclic".

1788

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Assignment
The measuring input technology object must always be assigned to another technology object
whose position will be evaluated by the measuring input.
The measuring input technology object can be assigned to the following technology objects:
● Synchronous axis
● Positioning axis
● External encoder
723RVLWLRQLQJD[LV
726\QFKURQRXVD[LV
72([WHUQDOHQFRGHU

720HDVXULQJLQSXWQ
720HDVXULQJLQSXW
720HDVXULQJLQSXW

Exactly one axis or one external encoder can be assigned to a measuring input technology
object.
An axis or external encoder can be assigned multiple measuring input technology objects.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1789

Control de movimiento
6.1 Using S7-1500 Motion Control

Measured value determination
The position can be detected using support from the hardware in one of the following ways:
● Measurement using Timer DI
With measured value acquisition via time value, the time points of the signal changes are
recorded precisely. The time stamps are then transferred to the controller and the
associated actual positions are determined in the technology object.
Measurement using Timer DI requires isochronous mode.
● Measurement using SINAMICS (central probe)
With central measuring inputs, the time points of the signal changes are recorded precisely.
The time stamps are then transferred to the controller via telegram 39x and the associated
actual positions are determined in the technology object.
Measurements via a central measuring input are only possible for SINAMICS drives, see
"Compatibility list". The maximum usable cycle time on the bus is limited, see "Time-related
boundary conditions (Página 1797)".
You can find more information on the telegrams in the "PROFIdrive telegrams
(Página 1555)" section of the documentation "S7-1500/S7-1500T Axis functions (https://
support.industry.siemens.com/cs/ww/en/view/109766462)".
● Measurement using PROFIdrive telegram (drive or external encoder)
With measurement using PROFIdrive telegram, the measurement input is connected to the
drive device and measurement takes place directly in the drive. The position value is
determined on a signal change at the measurement input. The drive or encoder module
communicates the determined position value to the technology object via the PROFIdrive
telegram.
With measurement using PROFIdrive telegram, only one measurement input at a time can
be active on an actual value or encoder in the PROFIdrive telegram. A maximum of two
measuring inputs can be configured on an actual value or encoder in the PROFIdrive
telegram via PROFIdrive; see section "Automatic transfer of drive and encoder parameters
in the device" of the "S7-1500/S7-1500T Axis functions" (https://
support.industry.siemens.com/cs/ww/en/view/109766462) documentation.
Measuring job
A measuring job is started using the Motion Control instruction "MC_MeasuringInput" (one-time
measuring) or "MC_MeasuringInputCyclic" (cyclic measuring). Cyclic measuring is only
available at selected measurement inputs. You can find an overview in the section
Configuration - Hardware interface (Página 1828). One-time measuring is always possible.
The resulting measured value is indicated at the respective output of the Motion Control
instruction "MC_MeasuringInput" or "MC_MeasuringInputCyclic".
Use with SIMATIC S7-PLCSIM
The measuring input technology object cannot be used with SIMATIC S7-PLCSIM. The
measuring input technology object and the measuring input jobs used in the user program can
be loaded into SIMATIC S7-PLCSIM, but have no function. Measured values are not shown.

Correction time
The time of the measurement can be corrected by setting a correction time
(<TO>.Parameter.CorrectionTime) for the measuring input technology object.

1790

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Corrections may be required for the following examples:
● Times for mechanical displacement of the measuring input
● Times for the generation of the measured signal before the input at the measurement
module
● Filter times at measurement input
The correction time is included in the calculation for all measuring input types of the measuring
input technology object.
Also note the time delay when measuring on a virtual axis, see section "Brief description of
actual values" of the "S7-1500/S7-1500T Axis functions" (https://
support.industry.siemens.com/cs/ww/en/view/109766462) documentation.

Measuring
One-time measurement
With one-time measurement, up to two edges can be detected with one measuring job. The
associated actual positions are signaled back in the function block and in the technology data
block and can be further processed in the user program.

Measuring job
A measuring job is started using the Motion Control instruction "MC_MeasuringInput". The
"<TO>.Status" tag in the technology data block changes to "WAITING_FOR_TRIGGER". The
technology object activates the measurement when the selected edge is detected.
● The measurement occurs at the measurement input in the form of up to two system times.
Based on the times, the associated position is determined and output, taking into
consideration a correction time, if present.
● With direct position detection, the detected position value is supplied directly from the drive
or encoder module to the technology object via the PROFIdrive telegram.
The measurement is then finished. An additional measurement must be restarted using Motion
Control instruction "MC_MeasuringInput".
Configured "Mode" parameter in Motion Control
instruction "MC_MeasuringInput"
Measure positive edge only
Measure negative edge only
Measure the next two edges

Output of Motion Control instruction "MC_MeasuringInput"
"MeasuredValue1"

"MeasuredValue2"

Actual position at the time of the ed‐ –
ge
Actual position at the time of the first
edge

Actual position at the time of the se‐
cond edge

Measure the next two edges starting with the po‐ Actual position at the time of the po‐ Actual position at the time of the ne‐
sitive edge
sitive edge
gative edge
Measure the next two edges starting with the ne‐ Actual position at the time of the ne‐ Actual position at the time of the po‐
gative edge
gative edge
sitive edge

The last detected values are set in the technology data block. If a new job is initiated with the
function block, the outputs of the function block are initialized. The technology data block is not

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1791

Control de movimiento
6.1 Using S7-1500 Motion Control
initialized. After detecting the first valid measuring cycle, the values in the technology data block
and function block are consistent with one another.
The finished measuring job is indicated in the function block in "MC_MeasuringInput.DONE" =
TRUE or in the technology data block in "<TO>.Status" = "TRIGGER_OCCURRED".

Temporal requirements for measuring jobs via "MC_MeasuringInput"
The hardware-related restrictions to measuring via the PROFIdrive telegram (drive or encoder)
or measuring via SINAMICS (central probe) result in time requirements for the period until the
measuring event can be recorded.
When measuring once via "MC_MeasuringInput" with "Mode" = 3 (measurement at both edges,
beginning with the rising edge) or "Mode" = 4 (measurement at both edges, beginning with the
falling edge), a minimum interval of several servo cycles is therefore required between the first
edge to be measured and the previous edge, so that the first edge to be measured can be
recorded.
You can find information on the temporal boundary conditions in the section Time-related
boundary conditions (Página 1797).

Consulte también
Time-related boundary conditions (Página 1797)

Cyclic measuring
With cyclic measuring, up to two measuring events can be acquired by the system in each
position control cycle of the technology object and the associated measuring positions can be
displayed. The measurements are continued cyclically until they are ended per command.
The determined measured values are displayed and can be read by the user program.
Cyclic measuring requires the measured value to be determined using hardware support of the
type "Measurement using Timer DI".
Measuring edges at which a measured value could not be determined are indicated in a lost
edge counter in the technology data block as well as in function block
"MC_MeasuringInputCyclic".

Measuring job
A cyclic measuring job is started with Motion Control instruction "MC_MeasuringInputCyclic"
and the measuring job is issued to the corresponding measuring hardware. Depending on the
functionality of the hardware, up to two measuring events and thus measuring times can be
recorded with edge reference per position control cycle and then forwarded to the technology
object. The technology object determines the measuring positions for the measuring times
taking into consideration any specified correction times.
The technology data block tag "<TO>.Status" changes from "INACTIVE" to
"WAITING_FOR_TRIGGER" and remains in this status as long as additional events are
awaited.

1792

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The mode set in the Motion Control instruction specifies the edges for which the measured
values are to be acquired. At most, the following edges can be detected in each position control
cycle:
● Two positive edges when detecting positive edges
● Two negative edges when detecting negative edges
● One positive edge and one negative edge when detecting positive and negative edges

Measured values and counters
With a positive edge at the input "MC_MeasuringInputCyclic.Execute", outputs
"MeasuredValue1Counter" and "MeasuredValue2Counter" are reset to "0". As a result, new
events can be tracked immediately and new measured value entries can be detected.
All measuring event occurrences of the measuring job are incremented by "1" in the
corresponding event counters "<TO>.MeasuredValues.MeasuredValue1Counter" and
"<TO>.MeasuredValues.MeasuredValue2Counter" of the technology data block.
The acquired measured values are continuously captured in the technology data block
irrespective of individual jobs and the values are only reset to "0" at power-up or restart of the
technology object.
After a completed measurement, the measured values are output in the function block. The
counters of the function block are set to "0" at a new measuring job. The measured value output
in the technology data block always indicates the last acquired measured value.

Lost edge counter (LEC)
If more than two edges to be detected occur within one position control cycle, a measured value
cannot be evaluated for the other edges to be detected. The number of lost edges is recorded
in the LEC.
The lost edges that are recorded in the LEC depend on the mode set in the Motion Control
instruction. For example, if only positive edges are to be measured, the LEC records only the
non-measured positive edges.
A maximum of seven lost edges can be counted and displayed in the LEC.
The number of lost edges is indicated in the function block and in the technology data block in:
● "LostEdgeCounter1"
Lost cleared edges from the position control cycle in which "MeasuredValue1" was
acquired.
⇒ The displayed value in "LostEdgeCounter1" is updated when counter
"MeasuredValueCounter1" is incremented.
● "LostEdgeCounter2"
Lost cleared edges from the position control cycle in which "MeasuredValue2" was acquired.
⇒ The displayed value in "LostEdgeCounter2" is updated when counter
"MeasuredValueCounter2" is incremented.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1793

Control de movimiento
6.1 Using S7-1500 Motion Control

Display of measurement results when using cyclic measuring
Edges selected in the command

Display per position control cycle
"MeasuredValue1"

Detect positive edges only
"MC_MeasuringInputCyclic.Mo‐
de" = 0
Detect negative edges only
"MC_MeasuringInputCyclic.Mo‐
de" = 1

"MeasuredValue2"

Actual position at
the time of the first
positive edge

Actual position at
the time of the se‐
cond positive edge

Actual position at
the time of the first
negative edge

Actual position at
the time of the se‐
cond negative edge

"LostEdgeCounter1" "LostEdgeCounter2"
Number of positive or negative edges in ex‐
cess of two in the position control cycle of
acquisition of "MeasuredValue1" and "Mea‐
suredValue2".
The following applies here:
● If a "MeasuredValue1" and a
"MeasuredValue2" are acquired, the
number of acquired and lost edges
indicated in "LostEdgeCounter1" and
"LostEdgeCounter2" are the same.
● If only one "MeasuredValue1" is
acquired, the "LostEdgeCounter1" is
reset to "0". The value in
"LostEdgeCounter2" remains changed.

Detect positive and negative ed‐
ges
"MC_MeasuringInputCyclic.Mo‐
de" = 2

Actual position at
the time of the first
positive edge in the
position control cycle

Actual position at
the time of the first
negative edge in the
position control cycle

Number of edges in excess of two in the
position control cycle of acquisition of "Mea‐
suredValue1" and "MeasuredValue2".
The following applies here:
● If a "MeasuredValue1" and a
"MeasuredValue2" are acquired, the
number of acquired and lost edges
indicated in "LostEdgeCounter1" and
"LostEdgeCounter2" are the same.
● If only one "MeasuredValue1" is
acquired, the "LostEdgeCounter1" is
reset to "0". The value in
"LostEdgeCounter2" remains changed.
● If only one "MeasuredValue2" is
acquired, the "LostEdgeCounter2" is
reset to "0". The value in
"LostEdgeCounter1" remains changed.

Examples
The following figures show examples of divergence of "MeasuredValue1Counter" and
"MeasuredValue2Counter" as a result of lost edges.
Example: Measurement at positive edges (Mode = 0)

1794

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
3URFHVVLQJF\FOHFORFN
720HDVXULQJLQSXW

1

1

1

1

1

1

1

1

1

1

1

0HDVXUHG9DOXH&RXQWHU

ಹ





















/RVW(GJH&RXQWHU

ಹ





















0HDVXUHG9DOXH&RXQWHU

ಹ





















/RVW(GJH&RXQWHU

ಹ





















0HDVXULQJLQSXW

Example: Measurement at negative edges (Mode = 1)
3URFHVVLQJF\FOHFORFN
720HDVXULQJLQSXW

1

1

1

1

1

1

1

1

1

1

1

0HDVXUHG9DOXH&RXQWHU

ಹ





















/RVW(GJH&RXQWHU

ಹ





















0HDVXUHG9DOXH&RXQWHU

ಹ





















/RVW(GJH&RXQWHU

ಹ





















0HDVXULQJLQSXW

Example: Measurement at positive and negative edges (Mode = 2)
3URFHVVLQJF\FOHFORFN
720HDVXULQJLQSXW

1

1

1

1

1

1

1

1

1

1

1

0HDVXUHG9DOXH&RXQWHU

ಹ





















/RVW(GJH&RXQWHU

ಹ





















0HDVXUHG9DOXH&RXQWHU

ಹ





















/RVW(GJH&RXQWHU

ಹ





















0HDVXULQJLQSXW

Measuring with measuring range
A measuring job can be activated directly or restricted to a defined measuring range.
The following graphic shows an example of measuring with measuring range in "Mode" = 0
(measurement of next positive edge):

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1795

Control de movimiento
6.1 Using S7-1500 Motion Control

0HDVXULQJUDQJH


W
6WDUWSRVLWLRQ

(QGSRVLWLRQ

6ZLWFKLQJVLJQDO

0HDVXULQJLQSXW


W


0HDVXULQJRFFXUV


W

Only measured values within the measuring range are displayed for the technology object.
● If no measuring edge within the measuring range is detected during a one-time
measurement, the measuring job is canceled and an alarm is triggered.
● Cyclic measuring remains active even if no measuring edge within the measuring range was
detected.
For axes without modulo function, it is immaterial in which order the start and end positions are
specified. If the start position is greater than the end position, the two values are interchanged
in the application. If the start position for an axis with modulo function is greater than the end
position, the measuring range is extended from the start position past the modulo transition of
the axis to the end position.
r

r

0HDVXULQJUDQJH

r

r

r

r
6WDUWSRVLWLRQ

0HDVXULQJUDQJH

r

r
(QGSRVLWLRQ

(QGSRVLWLRQ

6WDUWSRVLWLRQ

The measuring range positions are specified in the Motion Control instruction
"MC_MeasuringInput" or "MC_MeasuringInputCyclic".

Activation time for the measuring range
The measuring function must be active at the measurement input when the start of the
measuring range is reached. To compensate for the communication time for activation in the
Timer DI or drive, for example, the activation of the measurement in the technology object
begins earlier then the measuring range start by the amount of the activation time.

1796

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The activation time for measuring with measuring range is divided up as follows:
● The activation time allocation defined and active on the system side is indicated in the
"<TO>.Parameter.MeasuringRangeActivationTime" tag.
● An additional activation time can also be set by the user with the
"<TO>.Parameter.MeasuringRangeAdditionalActivationTime" tag.

Time-related boundary conditions
Depending on the hardware configuration and selection of edges to be detected, different
system-inherent requirements apply to the time allowed after calling the Motion Control
instruction "MC_MeasuringInput" or "MC_MeasuringInputCyclic" until a measurement occurs
and the results are displayed.
The following times must be distinguished here:
● Time until the measuring event can be captured
● Time until the measurement result is displayed or the measurement is finished.
The times calculated taking into account the current settings are indicated in configuration
window "Extended parameters" of a measuring input.

Measurement using Timer DI/measurement using SINAMICS (central probe)
● Time from output of an "MC_MeasuringInput" job until measuring event detection becomes
effective:
– "MeasuringRangeActivationTime": 2 x Tservo
● Time after measuring event until measured value is available in the controller:
– One-time measurement: 2 x Tservo + TSend
– Cyclic measuring: Tservo + TSend
● Activation time for a measurement with measuring range:
– "MeasuringRangeActivationTime" + "MeasuringRangeAdditionalActivationTime"
Nota
Maximum bus clock cycle
With the use of SINAMICS measuring inputs, the maximum bus clock cycle TSend can be up to
8 ms.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1797

Control de movimiento
6.1 Using S7-1500 Motion Control

Measurement using PROFIdrive telegram (drive or external encoder)
● "MeasuringRangeActivationTime":
– TSend and Tservo equal to: 3 x Tservo
– TSend and Tservo not equal to: 2 x Tservo
● Time from output of an "MC_MeasuringInput" job until measuring event detection becomes
effective:
– Measuring a positive/negative edge or two edges:
"MeasuringRangeActivationTime" + 2 x Tservo
– Measuring two dedicated edges:
"MeasuringRangeActivationTime" + 3 x Tservo
● Time after measuring event until measured value is available in the controller:
– Measuring an edge: 7 x Tservo
– Measuring two edges: 13 x Tservo
● Activation time for a measurement with measuring range:
– Measuring a positive/negative edge or two edges:
"MeasuringRangeActivationTime" + "MeasuringRangeAdditionalActivationTime"
+ 2 x Tservo
– Measuring two dedicated edges:
"MeasuringRangeActivationTime" + "MeasuringRangeAdditionalActivationTime"
+ 3 x Tservo

Definition of tags
● Tservo = Call interval of the technology object in the servo cycle clock [ms]
● TSend = Send clock [ms]
● "MeasuringRangeActivationTime" = See section Measuring with measuring range
(Página 1795)
To prevent asynchronous processing from overwriting a measured value that was just
determined, a new one-time measuring job cannot be started until the active measurement has
concluded. The sum of the activation time and the time until display or conclusion must be taken
into account for this.
In the case of cyclic measuring, evaluation or temporary storage of the measurement results in
the synchronous MC-PreInterpolator [OB68] is recommended from the user perspective.

1798

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags: Measuring input technology object
The following technology object tags are relevant for measuring:
Status indicator
Tag

Description

<TO>.Status

Status of the measuring input function

<TO>.InputState

0

Measurement is not active ("INACTIVE")

1

The measuring input is waiting for a measuring event ("WAI‐
TING_FOR_TRIGGER")

2

The measuring input has acquired one or more measured
values ("TRIGGER_OCCURRED").

3

Error during the measurement ("MEASURING_ERROR")

Status of measuring input

Parameters
Tag

Description

<TO>.Parameter.MeasuringInputType

Measuring input type

<TO>.Parameter.PROFIdriveProbeNumber

Number of the measuring input to be used for a measurement via PRO‐
FIdrive telegram

<TO>.Parameter.MeasuringRangeActivationTi‐
me

System-defined activation time allocation [ms]

<TO>.Parameter.MeasuringRangeAdditional‐
ActivationTime

Additional user-defined activation time allocation [ms]

<TO>.Parameter.CorrectionTime

User-defined correction time for the measurement result [ms]

Interface
Tag

Description

<TO>.Interface.Address

I/O address for the digital measuring input

Units
Tag

Description

<TO>.Units.LengthUnit

Unit of the length data

<TO>.Units.TimeUnit

Unit of the time data

MeasuredValues
Tag

Description

<TO>.MeasuredValues.MeasuredValue1

First measured value

<TO>.MeasuredValues.MeasuredValue2

Second measured value (when measuring two or more edges in one po‐
sition control cycle)

<TO>.MeasuredValues.MeasuredValue1Coun‐
ter

Count value for the first measured value

<TO>.MeasuredValues.MeasuredValue2Coun‐
ter

Count value for the second measured value

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1799

Control de movimiento
6.1 Using S7-1500 Motion Control
MeasuredValues
Tag

Description

<TO>.MeasuredValues.LostEdgeCounter1

Lost edges in the cycle clock of the first measured value acquisition

<TO>.MeasuredValues.LostEdgeCounter2

Lost edges in the cycle clock of the second measured value acquisition

(zero in the case of one-time measurement)
(zero in the case of one-time measurement)

StatusWord
Tag

Description

<TO>.StatusWord.X0 (Control)

The technology object is in operation.

<TO>.StatusWord.X1 (Error)

An error occurred at the technology object.

<TO>.StatusWord.X2 (RestartActive)

The technology object is being reinitialized. The tags of the technology
data block are not updated with active restart.

<TO>.StatusWord.X3 (OnlineStartValuesChan‐
ged)

Data relevant for the restart has been changed. The changes are applied
only after a restart of the technology object.

<TO>.StatusWord.X5 (CommunicationOk)

The measuring input is synchronized with the measuring module and can
be used.

ErrorWord
Tag

Description

<TO>.ErrorWord.X0 (SystemFault)

A system-internal error has occurred.

<TO>.ErrorWord.X1 (ConfigFault)

Configuration error
One or more configuration parameters are inconsistent or invalid.
The technology object was incorrectly configured, or editable configuration
data were incorrectly modified during runtime of the user program.

<TO>.ErrorWord.X2 (UserFault)

Error in user program at a Motion Control instruction or its use

<TO>.ErrorWord.X3 (CommandNotAccepted)

Command cannot be executed
A Motion Control instruction cannot be executed because necessary re‐
quirements have not been met.

<TO>.ErrorWord.X13 (PeripheralError)

Error accessing a logical address

ErrorDetail
Tag

Description

<TO>.ErrorDetail.Number

Alarm number

<TO>.ErrorDetail.Reaction

Effective alarm reaction
0

No reaction

6

End measuring input processing

Output cam technology object
The output cam technology object generates switching signals depending on the position of an
axis or external encoder. The switching states can be evaluated in the user program and fed to
digital outputs.

1800

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
You can find an overview of the functions of the output cam technology object in the "Functions
(Página 1787)" section.
The following figure shows the basic operating principle of the output cam technology object:
&RQILJXUDWLRQRIWHFKQRORJ\REMHFWV

7HFKQRORJ\REMHFW
ZLWKSRVLWLRQYDOXH

3RVLWLRQ

7HFKQRORJ\REMHFW
2XWSXWFDP
6ZLWFKLQJFDOFXODWLRQ

6WDUWSRVLWLRQ
(QGSRVLWLRQ
VZLWFKRQGXUDWLRQ

3RVLWLRQ
VHWSRLQW

$FWXDOSRVLWLRQ

8VHUSURJUDP
0RWLRQ&RQWURO
LQVWUXFWLRQV
2XWSXWFDPVWDWXV
HYDOXDWLRQ

2XWSXWWLPH

&RPPXQLFDWLRQ
&RPPXQLFDWLRQ

352),1(7

6,1$0,&6

6LJQDORXWSXW
707LPHU','4

Output cam types
The following output cam types can be used:
● Distance output cam (Página 1803)
Distance output cams switch on between the start position and end position. Outside this
range, the distance output cam is switched off.
● Time-based output cam (Página 1805)
Time-based output cams switch on for a defined time period when the start position is
reached.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1801

Control de movimiento
6.1 Using S7-1500 Motion Control

Assignment
The output cam technology object must always be assigned to another technology object
whose position will be evaluated.
The output cam technology object can be assigned to the following technology objects:
● Synchronous axis
● Positioning axis
● External encoder
723RVLWLRQLQJD[LV
726\QFKURQRXVD[LV
72([WHUQDOHQFRGHU

722XWSXWFDPQ
722XWSXWFDP
722XWSXWFDP

Exactly one axis or one external encoder can be assigned to an output cam.
Multiple output cams can be assigned to one axis or external encoder.

Output cam calculation and output cam output
The output cam technology object calculates the exact switching time, thereby ensuring exact
adherence to the switching positions. The switching time is calculated two position control
cycles before the output.
The following output options are available for the digital output cam output:
● Timer-DQ
Digital output with high degree of accuracy and reproducibility in the microsecond range on
time-based IO modules basis. In the case of signal output via time value, the times of the
signal changes are determined by the technology object. The time stamps are then
transferred to the hardware of the digital output and the edges are output with high precision.
Output via Timer DQ requires isochronous mode.
● Digital output module
Digital output with switching accuracy depending on the output cycle of the I/O used
When output is deactivated, the output cam status is not output at the hardware output. The
output cam status can be used internally in the user program by evaluating the relevant
"<TO>.CamOutput" tag.
Inverted output
In the case of inverted output, the range in which the output cam output is switched on and the
range in which it is switched off are swapped.
The inverted output is set in Motion Control instruction "MC_OutputCam" and is active when the
instruction is enabled.

1802

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The inverted output can be used for both distance output cams and time-based output cams.
Output of multiple output cams to one output
The output of multiple output cams to one output is performed with either an AND or OR logic
operation of the output cam signals to the output.
! 
2XWSXWFDP
2XWSXWFDP
2XWSXWFDP
2XWSXWFDP
2XWSXWFDP

Display of the switching state
The switching state of the output cam is displayed in the associated technology data block in
"<TO>.CamOutput".

Position reference
The switching points of the output cams can be referenced to the following positions, depending
on the interconnected technology object.
● Actual position of a synchronous axis/positioning axis
● Position setpoint of a synchronous axis/positioning axis
● Position of an external encoder
Homing the interconnected technology object
A change to the position of an axis or external encoder using Motion Control instruction
"MC_Home" is regarded as a sudden position change.
● Distance output cams are either skipped or correspondingly output.
● Time-based output cams are skipped. A time-based output cam is switched on only when
the start position is overtraveled and remains switched on for the switch-on duration.
● Switched time-based output cams are not canceled by a homing operation.
Trace recording of output cam with reference to setpoint position
The CPU calculates the output time of the output cam in such a way that the output cam is
switched when the position setpoint has been transferred from the PLC to the drive.
The communication time is not considered in the trace.

Distance output cam
Switch-on range
The switch-on range of distance output cams is basically defined by the start position and end
position.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1803

Control de movimiento
6.1 Using S7-1500 Motion Control
Start position smaller than end position
When the start position is less than the end position, the switch-on range begins with the start
position and ends with the end position.
6ZLWFKLQJVLJQDO

'LVWDQFH
RXWSXWFDP


6ZLWFKRQUDQJH
3RVLWLRQ
6WDUWSRVLWLRQ

(QGSRVLWLRQ

Start position greater than end position
When the start position is greater than the end position, there are two switch-on ranges as
follows:
● Switch-on range beginning with the start position and ending with the positive range end
(e.g. positive software limit switch, end of modulo range)
● Switch-on range beginning with the negative range end (e.g. negative software limit switch,
start of modulo range) and ending with the end position
6ZLWFKLQJVLJQDO

'LVWDQFH
RXWSXWFDP


6ZLWFKRQUDQJH

6ZLWFKRQUDQJH
3RVLWLRQ

(QGSRVLWLRQ

6WDUWSRVLWLRQ

Mapping to an axis with modulo function
With active modulo function of the interconnected technology object, the start and end positions
of the output cam are automatically mapped to values within the modulo range.
Example
● Modulo range = 0° to 50°
● Output cam start position = 80°
● Output cam end position = 220°
⇒ The specified start and end position of the output cam are outside the modulo range. The
values are therefore mapped onto the modulo range. The start position is at 30° (80° mod 50°
= 30°) and the end position is at 20° (220° mod 50° = 20°). The output cam remains switched
on over two consecutive modulo lengths and switches off at 20° in every second modulo length.

1804

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
$[LVSRVLWLRQ





W

6ZLWFKLQJVLJQDO

'LVWDQFH
RXWSXWFDP


W

Switching characteristics
After activation, a distance output cam switches on in the following cases:
● The position of the interconnected technology object reaches the start or end position in the
activation direction configured in Motion Control instruction "MC_OutputCam".
● The position of the interconnected technology object is moved into the switch-on range of
the output cam (e.g. during homing) in the activation direction configured in Motion Control
instruction "MC_OutputCam". If both activation directions are enabled in Motion Control
instruction "MC_OutputCam", the output cam switches on even when the interconnected
technology object is at a standstill.
● The output cam is switched on permanently using Motion Control instruction
"MC_OutputCam" with "Mode" = 3.
An active distance output cam switches off in the following cases:
● The position is outside the switch-on range of the output cam.
● The position value is moved outside the switch-on range of the output cam.
● Motion Control instruction "MC_OutputCam" is set to "Enable" = FALSE.
● The motion direction of the interconnected technology object is reversed and no longer
agrees with the enabled activation direction.

Time-based output cam
A time-based output cam switches on at the start position and remains set for the on-load factor.
6ZLWFKLQJVLJQDO

7LPHEDVHG
RXWSXWFDP


6ZLWFKRQGXUDWLRQ
W
6WDUWSRVLWLRQ

Mapping to an axis with modulo function
In the case of active modulo function of the interconnected technology object, the start position
of the output cam is automatically mapped to the value within the modulo range.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1805

Control de movimiento
6.1 Using S7-1500 Motion Control
Example
● Modulo range = 0° to 50°
● Output cam start positions:
– Output cam 1 = 20°
– Output cam 2 = 30°
– Output cam 3 = 80°
⇒ The time-based output cam 1 switches on at 20°, the time-based output cam 2 switches on
at 30°. The specified start position of time-based output cam 3 is outside the modulo range. The
value for the start position is therefore mapped onto the modulo range so that the time-based
output cam 3 switches on at 30°. All three output cams remain active the set on-load factor in
each case.
$[LVSRVLWLRQ





W

6ZLWFKLQJVLJQDO

7LPHEDVHG
RXWSXWFDP


W

6ZLWFKLQJVLJQDO

7LPHEDVHG
RXWSXWFDP


W

6ZLWFKLQJVLJQDO

7LPHEDVHG
RXWSXWFDP


W

Switching characteristics
A time-based output cam switches on in the following cases:
● The start position has been reached and the motion direction of the interconnected
technology object corresponds to the effective direction enabled by the instruction.
Nota
● If the start position is reached again while an output cam is switched on, the on-load
factor is not re-triggered.
● If due to the Motion Control instruction "MC_Home", the position value of the
interconnected technology object is placed directly on or behind the start position of the
output cam during the motion, the output cam does not switch on.

1806

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
A time-based output cam switches off in the following cases:
● The configured on-load factor has expired.
● Motion Control instruction "MC_OutputCam" is set to "Enable" = FALSE.

Activation direction of cam
An output cam can be switched depending on the motion direction of the interconnected
technology object. An output of the output cam in positive or negative motion direction or
independent of direction is possible.
The effective direction is set in "MC_OutputCam.Direction".
The following examples show the behavior of the output cam as a function of the effective
direction setting.

Example of "positive" effective direction ("Direction" = 1)
3RVLWLRQYDOXH
(QGSRVLWLRQ

$[LVSRVLWLRQ


6WDUWSRVLWLRQ

W

6ZLWFKLQJVLJQDO

'LVWDQFH
RXWSXWFDP


W

6ZLWFKLQJVLJQDO

7LPHEDVHG
RXWSXWFDP







W

Distance output cam
The output cam switches on when the switch-on range is reached in the positive direction. At
a direction reversal ②, the output cam switches off.
If the position value is moved into the switch-on range of the output cam, the cam switches on
when there is positive motion direction of the interconnected technology object. The output cam
remains switched off when the interconnected technology object is at a standstill.
Time-based output cam
The output cam switches on when the start position is reached in the positive direction. At a
direction reversal, the output cam remains switched on for the specified on-load factor ①.
If during the homing motion, the position value of the interconnected technology object is
directly on or behind the start position of the output cam, the output cam does not switch on.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1807

Control de movimiento
6.1 Using S7-1500 Motion Control

Example of "negative" effective direction ("Direction" = 2)
3RVLWLRQYDOXH
(QGSRVLWLRQ
$[LVSRVLWLRQ
6WDUWSRVLWLRQ

W

6ZLWFKLQJVLJQDO

'LVWDQFH
RXWSXWFDP


W

6ZLWFKLQJVLJQDO

7LPHEDVHG
RXWSXWFDP



W

Distance output cam
The output cam switches on when the switch-on range is reached in the negative direction. At
a direction reversal ②, the output cam switches off.
If the position value is moved into the switch-on range of the output cam, the output cam
switches on when there is negative motion direction of the interconnected technology object.
The output cam remains switched off when the interconnected technology object is at a
standstill.
Time-based output cam
The output cam switches on when the start position is reached in the negative direction. At a
direction reversal, the output cam remains switched on for the specified on-load factor ①.
If during the homing motion, the position value of the interconnected technology object is
directly on or behind the start position of the output cam, the output cam does not switch on.

1808

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Example of "both directions" effective direction ("Direction" = 3)
3RVLWLRQYDOXH

$[LVSRVLWLRQ

(QGSRVLWLRQ
6WDUWSRVLWLRQ

W

6ZLWFKLQJVLJQDO

'LVWDQFH
RXWSXWFDP


W

6ZLWFKLQJVLJQDO

7LPHEDVHG
RXWSXWFDP







W

Distance output cam
The output cam switches on when the position of the interconnected technology object is within
the switch-on range.
If the position value of the interconnected technology object is moved into the switch-on range
of the output cam, the cam switches on even when the interconnected technology object is at
a standstill.
Time-based output cam
The output cam switches on when the start position is reached. At a direction reversal, the
output cam remains switched on for the specified on-load factor ①.
If during the homing motion, the position value of the interconnected technology object is
directly on or behind the start position of the output cam, the output cam does not switch on.

Hysteresis
Possible variations in the actual position/position setpoint can result in unwanted switch-on and
switch-off of cams.
Minimal changes of the actual value of an axis in standstill can result in the switching on or off
of an actual value output cam with preset positive or negative effective direction. Even minimal
changes of the setpoints of a switched-off axis in follow-up mode can result in switch-on or
switch-off of an actual value output cam with specified positive or negative effective direction.
Such unwanted switching states can be prevented by configuring a hysteresis (> 0.0). The
configuration of a hysteresis value (> 0.0) is recommended in particular with reference to the
actual position.
The hysteresis is a position tolerance within which the position values may vary without
changing the switching state of the output cam. Changes of direction detected within the
hysteresis are ignored.
The hysteresis is set for the technology object in "<TO>.Parameter.Hysteresis".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1809

Control de movimiento
6.1 Using S7-1500 Motion Control

Behavior
● The hysteresis is activated at a direction reversal.
● The following applies within the hysteresis:
– The switching state of distance output cams is not changed.
– The motion direction is not determined again.
– If the start position of a time-based output cam is within the hysteresis, the time-based
output cam is switched on when leaving the hysteresis with the corresponding effective
direction.
– The on-load factor of time-based output cams remains unchanged.
● After the hysteresis range is exited, distance output cams are set according to the output
cam settings.
3RVLWLRQ


W


①
②
③



Actual position
Effective position
Hysteresis range

The following examples show the effects of the hysteresis on the switching behavior of output
cams with positive activation direction.

1810

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

3RVLWLRQYDOXH









(QGSRVLWLRQ
6WDUWSRVLWLRQ

W
6ZLWFKLQJVLJQDO

'LVWDQFH
RXWSXWFDP

6ZLWFKLQJVLJQDO

7LPHEDVHG
RXWSXWFDP


①
②
③
④
⑤

W







W

Direction reversal without hysteresis effect
Hysteresis in effect
The switch-on position of the distance output cam is influenced according to the direction reversal
and hysteresis.
The start position of the time-based output cam is located within the hysteresis. The time-based
output cam is switched on when leaving the hysteresis with the corresponding effective direction.
Switch-on duration

Hysteresis range
The maximum size of the hysteresis range in the system is as follows: for an axis with modulo
function, one quarter of the modulo range; for an axis without modulo function, one quarter of
the operating range.

Compensation of actuator switching times
Switching times of the output and the connected actuator (e.g. valve) can be compensated for
using the activation time or deactivation time of the output cam technology object.
The activation time is specified as the lead time for the switch-on edge, and the deactivation
time as the lead time for the switch-off edge.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1811

Control de movimiento
6.1 Using S7-1500 Motion Control

7LPHEDVHG
RXWSXWFDP


&RQILJXUHG
VZLWFKRQGXUDWLRQ
W
$FWLYDWLRQWLPH

6ZLWFKLQJVLJQDO

7LPHEDVHG
RXWSXWFDP


6ZLWFKRQSRVLWLRQ

'HDFWLYDWLRQWLPH

5HVXOWLQJ
VZLWFKRQGXUDWLRQ
W
6ZLWFKRIIWLPH

6ZLWFKRQWLPH

The activation time is set in the technology object via the "<TO>.Parameter.OnCompensation"
tag.
The deactivation time is set at the technology object via the
"<TO>.Parameter.OffCompensation" tag.
Nota
● The following must be met for the times:
On-load factor > deactivation time - activation time
(The switch-on duration for distance output cams is determined by the switching positions
and the current velocity.)
● If the output cam has been switched taking the lead times into consideration, this action has
taken place from the system perspective and will not be restarted in response to any
subsequent variation in the actual velocity.
● System-dependent runtimes are automatically taken into consideration when output by TM
Timer DIDQ is used.
When the output with a digital output module is used, system-dependent runtimes are not
taken into consideration and must be set as correction times in the activation time or
deactivation time.

Tags: Output cam technology object
The following technology object tags are relevant:
Status indicator
Tag

Description

<TO>.CamOutput

The output cam is switched.

Parameters
Tag

Description

<TO>.Parameter.OutputCamType

Output cam type

1812

0

Distance output cam

1

Time-based output cam

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Parameters
Tag

Description

<TO>.Parameter.PositionType

Position reference
0

Position setpoint

1

Actual position

<TO>.ParameterOnCompensation

Activation time (lead time for the switch-on edge)

<TO>.Parameter.OffCompensation

Deactivation time (lead time for the switch-off edge)

<TO>.Parameter.Hysteresis

Hysteresis value

Interface
Tag

Description

<TO>.Interface.EnableOutput

Activation of the output cam output
FALSE

No output

TRUE

Output

<TO>.Interface.Address

I/O address of the output cam

<TO>.Interface.LogicOperation

Logical operation of the output cam signals at the output
0

OR logic operation

1

AND logic operation

Units
Tag

Description

<TO>.Units.LengthUnit

Unit of the length data

<TO>.Units.TimeUnit

Unit of the time data

StatusWord
Tag

Description

<TO>.StatusWord.X0 (Control)

The technology object is in operation.

<TO>.StatusWord.X1 (Error)

An error occurred at the technology object.

<TO>.StatusWord.X2 (RestartActive)

The technology object is being reinitialized. The tags of the technology
data block are not updated with active restart.

<TO>.StatusWord.X3 (OnlineStartValuesChan‐
ged)

Data relevant for the restart has been changed. The changes are applied
only after a restart of the technology object.

<TO>.StatusWord.X4 (OutputInverted)

The output cam output is inverted.

<TO>.StatusWord.X5 (CommunicationOk)

The output cam is synchronized with the output module and available for
use.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1813

Control de movimiento
6.1 Using S7-1500 Motion Control

ErrorWord
Tag

Description

<TO>.ErrorWord.X0 (SystemFault)

A system-internal error has occurred.

<TO>.ErrorWord.X1 (ConfigFault)

Configuration error
One or more configuration parameters are inconsistent or invalid.
The technology object was incorrectly configured, or editable configuration
data was incorrectly modified during runtime of the user program.

<TO>.ErrorWord.X2 (UserFault)

Error in user program at a Motion Control instruction or its use

<TO>.ErrorWord.X3 (CommandNotAccepted)

Command cannot be executed
A Motion Control instruction cannot be executed because the necessary
conditions are not met.

<TO>.ErrorWord.X13 (PeripheralError)

Error accessing a logical address

ErrorDetail
Tag

Description

<TO>.ErrorDetail.Number

Alarm number
You can find a list of the technology alarms and alarm reactions in the
"Technology alarms" appendix of the "S7-1500/S7-1500T Motion Control
overview" (https://support.industry.siemens.com/cs/ww/en/view/
109766459) documentation.

<TO>.ErrorDetail.Reaction

Effective alarm reaction
0

No reaction

6

Output cam processing is complete.

You can find a list of the technology alarms and alarm reactions in the
"Technology alarms" appendix of the "S7-1500/S7-1500T Motion Control
overview" (https://support.industry.siemens.com/cs/ww/en/view/
109766459) documentation.

Cam track technology object
The cam track technology object generates a switching signal sequence dependent on the
position of an axis or external encoder. A cam track can consist of up to 32 individual output
cams and be output to one output. The switching states can be evaluated in the user program
or fed to digital outputs.
You can find an overview of the functions of the cam track technology object in the "Functions
(Página 1787)" section.
The following figure shows the basic principle of operation of the cam track technology object:

1814

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

&RQILJXUDWLRQRIWHFKQRORJ\REMHFWV

7HFKQRORJ\REMHFW
ZLWKSRVLWLRQYDOXH

7HFKQRORJ\REMHFW
&DPWUDFN
6ZLWFKLQJFDOFXODWLRQ

3RVLWLRQ

0RWLRQ&RQWURO
LQVWUXFWLRQV

5HIHUHQFH
SRVLWLRQ
7UDFNOHQJWK
ืRXWSXW
FDPV

3RVLWLRQ
VHWSRLQW

$FWXDOSRVLWLRQ

8VHUSURJUDP

2XWSXWFDPVWDWXV
HYDOXDWLRQ

2XWSXWWLPH

&RPPXQLFDWLRQ
&RPPXQLFDWLRQ

352),1(7

6,1$0,&6

6LJQDORXWSXW
707LPHU','4

Definition of cam track
A cam track consists of up to 32 individual output cams that are specified within an adjustable
track length.
6ZLWFKLQJVLJQDO

'LVWDQFH
RXWSXWFDP


2XWSXWFDP

2XWSXWFDP

2XWSXWFDP
3RVLWLRQ
















①
②
③

Start position
End position
Cam track length

The output cam positions are defined relative to the cam track. The start of the cam track is
always 0.0. The output cam positions on the cam track are thus always positive.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1815

Control de movimiento
6.1 Using S7-1500 Motion Control
When the cam track is processed, the output cams with start position within the track length are
taken into consideration.
The output cams of the cam track can be set as distance output cams or time-based output
cams, whereby only one of the two output cam types can be used in a cam track.
If the end of a cam track is crossed, connected output cams behave as follows within the cam
track:
● Time-based output cams remain switched on for the set on-load factor.
● Distance output cams whose end position lies outside the cam track are switched off when
the cam track is left.
Cams whose start and end positions lie outside the cam track length are ignored. They become
active only if the cam track length is increased so that at least the respective start position of an
output cam is within the new track length.

Assignment
The cam track technology object must always be assigned to another technology object whose
position is evaluated.
The cam track technology object can be assigned to the following technology objects:
● Synchronous axis
● Positioning axis
● External encoder
723RVLWLRQLQJD[LV
726\QFKURQRXVD[LV
72([WHUQDOHQFRGHU

72&DPWUDFNQ
72&DPWUDFN
72&DPWUDFN

Exactly one axis or one external encoder can be assigned to a cam track.
Multiple cam tracks can be assigned to one axis or external encoder.

Position reference
The switching points of the output cams of a cam track can be referenced to the following
positions, depending on the interconnected technology object.
● Actual position of a synchronous axis/positioning axis
● Position setpoint of a synchronous axis/positioning axis
● Position of an external encoder

1816

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Mapping of the cam track to the position of the technology object
The start of the cam track is placed at the specified reference position of the interconnected
technology object. Thus, the switching positions result from the cam track positions mapped
onto the interconnected technology object starting from the reference position. The cam track
is continued in both directions of the interconnected technology object.
The setting for the reference position can be either positive or negative.
Example
● Axis range = -1000 mm to +1000 mm
● Desired switching points of the output cam with reference to axis position:
– Start position = -200 mm
– End position = -100 mm
● Cam track length = 2000 mm
● Definition of output cam on the track:
– Start position = 800 mm
– End position = 900 mm
&DPWUDFNOHQJWK bPP



2XWSXW
FDP

&RQILJXUDWLRQ



6ZLWFKLQJVLJQDO

7UDFNSRVLWLRQ>PP@


WR



2XWSXW
FDP


ದ

WR



$[LVSRVLWLRQ>PP@

5HIHUHQFHSRVLWLRQ

Processing of a cam track
The processing of a cam track occurs cyclically.

&DPWUDFNOHQJWK

$[LVSRVLWLRQ

5HIHUHQFHSRVLWLRQ

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1817

Control de movimiento
6.1 Using S7-1500 Motion Control
The cam track is mapped onto the position of the interconnected technology object starting
from the reference position and is continued cyclically in both directions.

Output of a cam track
The following output options are available for the digital cam track output:
● Timer-DQ
Digital output with high degree of accuracy and reproducibility in the microsecond range on
time-based IO modules basis. In the case of signal output via time value, the times of the
signal changes are determined by the technology object. The time stamps are then
transferred to the hardware of the digital output and the edges are output with high precision.
Output via Timer DQ requires isochronous mode.
● Digital output module
Digital output with switching accuracy depending on the output cycle of the I/O used
A maximum of two edges (via Timer DQ, positive and negative) or one edge (via digital output
module, positive or negative) can be output per position control cycle. If multiple switch-on
edges or switch-off edges are transmitted in one position control cycle clock, the last written
values in each case are valid.
Masking of individual output cams of a cam track
In order for output cams to be processed, they must be configured as valid in the technology
data block with "<TO>.Parameter.Cam[1..32].Existent" = TRUE. In addition, output cams of a
cam track configured as valid can be defined as valid in the user program using bit masking
("<TO>.Parameter.CamMasking"). In the default setting, all valid output cams are enabled
("<TO>.Parameter.CamMasking" = 0xFFFFFFFF). The cam track itself is activated/
deactivated using the Motion Control instruction "MC_CamTrack".

Modulo function
Track length and mapping to an axis or encoder with modulo function
When a cam track is mapped onto an axis with modulo function, a reference position specified
outside the modulo range is mapped within the modulo range.

1818

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The track length can be less than or greater than the modulo length of the axis. In order for the
cam track to be mapped without offset in the modulo range and to prevent unwanted overrides,
an integer ratio of modulo length to track length, and vice versa, is required.
Example Mapping without offset

Example Mapping with offset

r
r

r
r
r





r

r




r

r

r

r

① Axis with modulo length 360°
② Cam track with track length 120°

① Axis with modulo length 360°
② Cam track with track length 160°

⇒ Ratio = 360° / 120° = 3
⇒ Ratio = 360° / 160° = 2.25
The cam track is output 3 times on a mo‐
The cam track is output 2.25 times on the
dulo length.
first modulo length and continued corres‐
pondingly in the other modulo lengths.
During cyclic processing of the cam track, the continued reference position of the current cam
track is displayed in the "<TO>.MatchPosition" tag. The continued reference position is
independent of direction and always the position of the left boundary of the cam track. The
unique detection and output of the position is only possible when the assigned technology
object is in motion. The distance to the current reference position of the current cam track
(<TO>.MatchPosition) is displayed in the "<TO>.TrackPosition" tag.
When the cam track is enabled by a "MC_CamTrack" job, the position of the cam track
(<TO_CamTrack>.MatchPosition) is set as if the current position had been reached by a motion
in the positive direction starting from the reference position
(<TO_CamTrack>.ReferencePosition).

Homing of an axis or an encoder without modulo function
A change to the position of an axis or external encoder using Motion Control instruction
"MC_Home" is regarded as a sudden position change. An enabled cam track is referenced to
the changed position and processed further from there.
● Homing also has an effect on the current position of the cam track (<TO>.TrackPosition).
The position is formed again as quickly as possible due to the offset.
● Distance output cams are either skipped or correspondingly output.
● Time-based output cams are skipped. A time-based output cam is switched on only when
the start position is overtraveled and remains switched on for the switch-on duration.
● Switched time-based output cams are not canceled by a homing operation.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1819

Control de movimiento
6.1 Using S7-1500 Motion Control
Recommendation:
Disable the cam track before or during homing.

Homing of an axis or an encoder with modulo function
● Homing also has an effect on the current position of the cam track (<TO>.TrackPosition).
The homing of the assigned technology object influences the position of the subsequently
active cam track on a direction-dependent basis. This is dependent on the position
difference, the difference between the new position minus the original position. If the
position difference is negative, you add the modulo length (<TO_Axis/
TO_Encoder>.Modulo.Length).
If this position difference is less than or equal to half the modulo length, the new position of
the cam track (<TO_CamTrack>.MatchPosition) is set as if the new position had been
reached by a motion in the positive direction starting from the original position.
If this position difference is greater than half the modulo length, the new position of the cam
track (<TO_CamTrack>.MatchPosition) is set as if the new position had been reached by a
motion in the negative direction starting from the original position.
● Distance output cams are either skipped or correspondingly output.
● Time-based output cams are skipped. A time-based output cam is switched on only when
the start position is overtraveled and remains switched on for the switch-on duration.
● Switched time-based output cams are not canceled by a homing operation.
Recommendation:
Disable the cam track before or during homing.

Effective direction
The cam track is always active for both directions of the position of the interconnected
technology object.

Output of a cam track with distance output cams
Distance output cams are switched when the switch-on range is overtraveled.
The following graphic shows the execution of a cam track with distance output cam depending
on the motion direction of the axis.
&DPWUDFNOHQJWK
'LVWDQFH
RXWSXWFDP
3RVLWLYH
PRWLRQ
GLUHFWLRQ
1HJDWLYH
PRWLRQ
GLUHFWLRQ

1820


1

1


1
$[LVSRVLWLRQ


























Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
With positive motion direction, the output cams of the cam track are output in the order Output
Cam N1, Output Cam N2, Output Cam N3. In the case of negative motion direction, the output
cams of the cam track are output in the order Output Cam N3, Output Cam N2, Output Cam N1.
The distance output cams switch on at ① and switch off at ②.

Output of a cam track with time-based output cams
The time-based output cams are switched when the start position is crossed.
The following graphic shows the execution of a cam track with time-based output cam
depending on the motion direction of the axis.

7LPHEDVHG
RXWSXWFDP

3RVLWLYH
PRWLRQ
GLUHFWLRQ


7LPHEDVHG
RXWSXWFDP

1HJDWLYH
PRWLRQ
GLUHFWLRQ

1

1

1













1

1

1











$[LVSRVLWLRQ

$[LVSRVLWLRQ



With positive motion direction, the output cams of the cam track are output in the order Output
Cam N1, Output Cam N2, Output Cam N3. In the case of negative motion direction, the output
cams of the cam track are output in the order Output Cam N3, Output Cam N2, Output Cam N1.
The time-based output cams switch on at ① and remain switched on for the set switch-on
duration ②.

Changing the cam track data during operation
The data of a cam track and the parameters of the associated Motion Control instruction
"MC_CamTrack" can be changed while track processing is enabled. The active Motion Control
instruction "MC_CamTrack" is not aborted. The modified parameters, however, only take effect
at the next call of the Motion Control instruction "MC_CamTrack".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1821

Control de movimiento
6.1 Using S7-1500 Motion Control
The following parameters can be changed during operation and are in effect after another call
of Motion Control instruction "MC_CamTrack".
● Cam track data in technology data block
– Reference position (<TO>.Parameter.ReferencePosition)
– Track length (<TO>.Parameter.CamTrackLength)
– Bit masking of individual output cams (<TO>.Parameter.CamMasking)
– Activation time (<TO>.Parameter.OnCompensation)
– Deactivation time (<TO>.Parameter.OffCompensation)
– Hysteresis value (<TO>.Parameter.Hysteresis)
– Output cam data (<TO>.Parameter.Cam[1..32])
● Parameters in the function block
– Enable (MC_CamTrack.Enable)
– Mode (MC_CamTrack.Mode)
– Inverted output (MC_CamTrack.InvertOutput)
Note the different activation behavior (Página 1822) when changing the cam track data.

Activation behavior
A cam track is activated by the call of Motion Control instruction "MC_CamTrack" with "Enable"
= TRUE. A distinction must be made here between:
● First-time activation of the cam track
● Call after a change of the cam track data during active cam track processing

1822

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The difference relates to how the cam track data is applied. Depending on the set mode
("MC_CamTrack.Mode"), the configuration (cam track data, data in the function block) is
applied at different times.
● First-time switch-on of a cam track
Calling the Motion Control instruction "MC_CamTrack" with "Enable" = TRUE activates the
cam track immediately ("<TO>.Status" changes to 1) and configured cam track data takes
effect immediately. This behavior is the same when "MC_CamTrack.Mode" = 0 and
"MC_CamTrack.Mode" = 1.
● Change of cam track data of an already activated cam track ("<TO>.Status" = 1)
– With the call of Motion Control instruction "MC_CamTrack" with "Enable" = TRUE and
"Mode" = 0, the modified cam track data takes effect immediately.
Previously activated distance output cams are aborted if their track signals are not still
set due to the changed cam track data. Previously activated time-based output cams are
always aborted.
– With the call of Motion Control instruction "MC_CamTrack" with "Enable" = TRUE and
"Mode" = 1, the cam track continues to be output with the prior configuration up to the
cam track end. Modified cam track data takes effect at the end of the current track cycle.
If you change a cam track with "MC_CamTrack.Mode" = 1 during runtime of the user
program, keep in mind the lead time of the cam track as reserve for the first output cam.
Define the first output cam position in the cam track only after the following position:
Position of first output cam > velocity of axis x lead time of the cam track
(<TO>.Parameter.OnCompensation)
Also keep in mind the internal system time for output cam calculation, even if you set the
lead time 0.0.
Changing cam track data when modulo length is not a multiple of the track length
For the switching times to be set correctly, we recommend the following procedure for changes:
● Enter changes as soon as possible after start of a new cam track
● Enter a new reference position (<TO>.Parameter.ReferencePosition) for the changed cam
track. The new reference position is composed as follows depending on the direction:
– Positive effective direction: Current reference position (<TO>.MatchPosition) + cam
track length (<TO>.Parameter.CamTrackLength)
– Negative effective direction: Current reference position (<TO>.MatchPosition) - cam
track length (<TO>.Parameter.CamTrackLength)
● Output the changes of the cam track when calling the Motion Control instruction
"MC_CamTrack" and "Mode" = 1.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1823

Control de movimiento
6.1 Using S7-1500 Motion Control

Example
The following figure shows an example of the differences in the activation behavior.
$

$

0&B&DP7UDFN

0&B&DP7UDFN

72B

0DVWHU

7UDFN2XWSXW

72B

&DP7UDFN

(QB

(QDEOH

%XV\

(QB

(QDEOH

%XV\



0RGH

(UURU



0RGH

(UURU



,QYHUW2XWSXW

(UURU,'



,QYHUW2XWSXW



7UDFN2XWSXW

(UURU,'



$


(QB



W



%XV\



7UDFN2XWSXW

W




W

$


(QB



W



%XV\



7UDFN2XWSXW

W




W
<TO>.Parameter.ReferencePosition

72B[3RVLWLRQ
W
72!7UDFN 
3RVLWLRQ

$

A1

A2

A

W

The cam track is activated the first time with "MC_CamTrack.Enable" = TRUE and the output
cams are output immediately with set "MC_CamTrack.Mode" = 0.

B

After cam track data were changed (①), the cam track is activated by calling Motion Control
instruction "MC_CamTrack" with "Enable" = TRUE and the modified data takes effect imme‐
diately (①) with set "MC_CamTrack.Mode" = 0.

A

The cam track is activated the first time with "MC_CamTrack.Enable" = TRUE and the output
cams are output immediately with set "MC_CamTrack.Mode" = 1.

B

1824

%

After cam track data were changed (①), the cam track is activated by calling Motion Control
instruction "MC_CamTrack" with "Enable" = TRUE and the modified data takes effect at the
end of the current track cycle (②) with set "MC_CamTrack.Mode" = 1.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Hysteresis
The hysteresis is set in the cam track technology object. The behavior and effect of the
hysteresis setting corresponds to the hysteresis (Página 1809) for the cam technology object.

Time offset of cam switching points
Switching times of the output and the connected actuator (e.g. valve) can be compensated for
using the activation time or deactivation time of the cam track technology object.
The time offset of cam switching points corresponds to the activation time or deactivation time
(Página 1811) for the cam technology object.

Tags: Cam track technology object
The following technology object tags are relevant:
Status indicator
Tag

Description

<TO>.Status

Status of the cam track function
0

Inactive

1

Active

2

Active and waiting for next track

<TO>.TrackOutput

An output cam of cam track is switched.

<TO>.SingleCamState

Switched on output cam (bit-masked)

<TO>.TrackPosition

Display of the current position within the cam track
The distance to the current reference position of the current cam track
(<TO>.MatchPosition) is displayed.

<TO>.MatchPosition

Reference position of the current cam track
During cyclic processing of the cam track, the continued reference position
of the current cam track is displayed. The unique detection and output of
the position is only possible when the assigned technology object is in
motion.

Parameters
Tag

Description

<TO>.Parameter.CamTrackType

Output cam type

<TO>.Parameter.PositionType

0

Distance output cam

1

Time-based output cam

Position reference
0

Position setpoint

1

Actual position

<TO>.Parameter.ReferencePosition

Reference position

<TO>.Parameter.CamTrackLength

Track length

<TO>.Parameter.CamMasking

Bit masking of individual output cams

<TO>.Parameter.OnCompensation

Activation time (lead time for the switch-on edge)

<TO>.Parameter.OffCompensation

Deactivation time (lead time for the switch-off edge)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1825

Control de movimiento
6.1 Using S7-1500 Motion Control
Parameters
Tag

Description

<TO>.Parameter.Hysteresis

Hysteresis value

<TO>.Parameter.Cam[1..32].OnPosition

Start position (distance output cams and time-based output cams)

<TO>.Parameter.Cam[1..32].OffPosition

End position (distance output cam)

<TO>.Parameter.Cam[1..32].Duration

Switch-on duration (time-based output cam)

<TO>.Parameter.Cam[1..32].Existent

Validity of an output cam
FALSE

Output cam is not used.

TRUE

Output cam is used.

Interface
Tag

Description

<TO>.Interface.EnableOutput

Output cam output at the bit specified under "Address"

<TO>.Interface.Address

FALSE

No output

TRUE

Output

I/O address for digital output cam output

Units
Tag

Description

<TO>.Units.LengthUnit

Unit of the length data

<TO>.Units.TimeUnit

Unit of the time data

StatusWord
Tag

Description

<TO>.StatusWord.X0 (Control)

The technology object is in operation.

<TO>.StatusWord.X1 (Error)

An error occurred at the technology object.

<TO>.StatusWord.X2 (RestartActive)

The technology object is being reinitialized. The tags of the technology
data block are not updated with active restart.

<TO>.StatusWord.X3 (OnlineStartValuesChan‐
ged)

Data relevant for the restart has been changed. The changes are applied
only after a restart of the technology object.

<TO>.StatusWord.X4 (OutputInverted)

The output cam output is inverted.

<TO>.StatusWord.X5 (CommunicationOk)

The cam track is synchronized with the output module and available for
use.

<TO>.StatusWord.X6 (CamDataChanged)

The data of individual output cams has been changed but not yet taken
effect with Motion Control instruction "MC_CamTrack".

1826

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

ErrorWord
Tag

Description

<TO>.ErrorWord.X0 (SystemFault)

A system-internal error has occurred.

<TO>.ErrorWord.X1 (ConfigFault)

Configuration error
One or more configuration parameters are inconsistent or invalid.
The technology object was incorrectly configured, or editable configuration
data were incorrectly modified during runtime of the user program.

<TO>.ErrorWord.X2 (UserFault)

Error in user program at a Motion Control instruction or its use.

<TO>.ErrorWord.X3 (CommandNotAccepted)

Job cannot be executed.
A Motion Control instruction cannot be executed because necessary re‐
quirements have not been met.

<TO>.ErrorWord.X13 (PeripheralError)

Error accessing a logical address.

ErrorDetail
Tag

Description

<TO>.ErrorDetail.Number

Alarm number

<TO>.ErrorDetail.Reaction

Effective alarm reaction

6.1.3.3

0

No reaction

5

Cam track processing is complete.

Configuring

Configuring the technology object measuring input
Configuration - Basic parameters
Configure the basic properties of the technology object in the "Basic parameters" configuration
window.

Name
Define the name of the measuring input in this field. The technology object is listed under this
name in the project tree. The tags of the measuring input can be used in the user program under
this name.

Assigned axis or external encoder
The axis or external encoder assigned to the measuring input is displayed. You can use the
to directly access the configuration of the basic parameters of the higher-level
button
technology object.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1827

Control de movimiento
6.1 Using S7-1500 Motion Control

Unit of measure
The indicated unit of measure for the position of the measuring input corresponds to the unit of
measure of the higher-level technology object.
To use six decimal places in the selected unit, select the check box "Use position values with
higher resolution" in the higher-level technology object.

Consulte también
Units of measure (Página 1389)
Measuring input technology object (Página 1787)

Configuration - Hardware interface
Measuring input type
Select the measuring input type.
● Measurement using Timer DI
● Measurement using SINAMICS (central probe)
● Measurement using PROFIdrive telegram (drive or external encoder)
Overview of possible measurement inputs and measuring types
Measuring input type

Possible measurement inputs

Possible measuring types

Measurement using Ti‐
mer DI

With Timer DI

● "MC_MeasuringInput"
(One-time measuring)

("STANDARD")

● ET 200SP or ET 200MP TM Timer
DIDQ
● SIMATIC Drive Controller (X142)

Measurement using SI‐
NAMICS
(central probe)
("STANDARD")

Using telegram 39x of the drive control:
● SINAMICS S120 CU320-2 (X122/
X132)

● "MC_MeasuringInputCyclic
" (Cyclic measuring)
"MC_MeasuringInput" (One-ti‐
me measuring)

● SINAMICS S120 CU310-2 (X121/
X131)
● SIMATIC Drive Controller (X122/
X132)

Measurement using
PROFIdrive telegrams

Using PROFIdrive telegram of the drive
axis:

("PROFIDRIVE")

● SINAMICS S210 (X130)

"MC_MeasuringInput" (One-ti‐
me measuring)

● SINAMICS S120 CU320-2 (X122/
X132)
● SINAMICS S120 CU310-2 (X121/
X131)
● SIMATIC Drive Controller (X122/
X132)

1828

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Measurement using Timer DI
Select a measurement input for a measurement using a Timer DI. The selection box shows all
channels that are configured correctly. For this purpose, you need to have configured the I/O
channels as Timer DI beforehand.

Measurement using SINAMICS (central probe)
Select a measuring input for a measurement via SINAMICS measurement sensing input. The
selection box shows all compatible telegram types. You are shown all terminals that can
potentially be used as measuring inputs. For this purpose, you need to have configured the
necessary central measuring inputs on the drive side beforehand.
For SINAMICS drives that are not configured via Startdrive, you need to assign the inputs to the
measuring inputs (p680) in the telegram without gaps and in ascending order.
With p728.8 to p728.15, you configure as input all DI/DQs used as measurement input on the
control unit. Use p680 of the control unit to specify the terminals for the global measuring inputs.
You must configure a suitable telegram 39x for the drive control.

Measurement using PROFIdrive telegram (drive or external encoder)
For a measurement via PROFIdrive telegram, select the number of the measuring input in the
telegram in the "Number of the measuring input" drop-down list. The input field is preset with the
value "1".
Two communication channels are available for the transmission of measured values in the
PROFIdrive telegram. These communication channels are assigned to one measurement
input/digital input each in the drive. Use the PROFIdrive parameters to configure the digital
input on the drive that is to be used for the configured communication channel.
● Measurement input for the first communication channel
("<TO>.Parameter.PROFIdriveProbeNumber" = 1)
If you use two encoders, you must select the associated DI in the SINAMICS for each
encoder. Various results are then transferred to the technology object depending on the
selected encoder. The encoders are configured using the parameters p488[0] and p488[1].
● Measurement input for the second communication channel
("<TO>.Parameter.PROFIdriveProbeNumber" = 2)
If you use two encoders, you must select the associated DI in the SINAMICS for each
encoder. Various results are then transferred to the technology object depending on the
selected encoder. The encoders are configured using the parameters p489[0] and p489[1].

Correction time for the measuring signal
Specify a correction time if possible delay times in the measurement signal are to be
compensated.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1829

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Automatic transfer of drive and encoder parameters in the device (Página 1560)
Measuring input technology object (Página 1787)
Configuring technological modules and onboard I/O for Motion Control (Página 1424)

Configuration - Extended parameters
Adjustment for activation time of the measuring range
To adjust the activation time defined on the system side, enter an additional activation time
here.
The configuration window also displays the following times calculated on the system side:
● Time after the measuring job request until the measuring event can be recoreded
● Time after the measuring event until the measurement result is displayed (for measuring of
one or two edges)

Consulte también
Measuring with measuring range (Página 1795)
Time-related boundary conditions (Página 1797)
Measuring input technology object (Página 1787)

Configuring the output cam technology object
Configuration - Basic parameters
Configure the basic properties of the technology object in the "Basic parameters" configuration
window.

Name
Define the name of the output cam in this field. The technology object is listed under this name
in the project tree. The tags of the output cam can be used in the user program under this name.

Assigned axis or external encoder
The axis or external encoder assigned to the output cam is displayed. You can use the
button
to directly access the configuration of the basic parameters of the higher-level
technology object.

1830

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Output cam type
Select based on the desired switching behavior of an output cam type:
● Distance output cam (position-dependent switch-on/switch-off)
● Time-based output cam (position-dependent switch-on and position-independent or timedependent switch-off)

Output cam reference
Configure in this selection whether the switching points of the output cam are to reference the
actual position or the position setpoint.

Unit of measure
The indicated unit of measure for the position of the output cam corresponds to the unit of
measure of the higher-level technology object.
To use six decimal places in the selected unit, select the check box "Use position values with
higher resolution" in the higher-level technology object.
When a time-based output cam is selected as the output cam type, the unit of measure for the
switch-on duration and other times is also indicated. For output cams, this is always ms.

Consulte también
Units of measure (Página 1389)
Output cam technology object (Página 1800)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1831

Control de movimiento
6.1 Using S7-1500 Motion Control

Configuration - Hardware interface
Output cam output
Select whether the generated switching signals are to be output at the digital output.
● Activate output
Select one of the following two output options for the output cam output:
– Output via Timer DQ
With output via a Timer DQ, you select a suitable channel in the "Output" field. The
selection box shows all channels that are configured as Timer DQ. For this purpose, you
need to have configured the I/O channels as Timer DQ beforehand.
Timer DQs are supported by:
- ET 200MP TM Timer DIDQ 16x24V
- ET 200SP TM Timer DIDQ 10x24V
- SIMATIC Drive Controller (X142)
– Output by digital output module
For output by a digital output module, select this in the "Output cam output" field. Only the
digital outputs with previously defined PLC tags are displayed for selection.
Select the logical operation of the output cam signal at the output. The logic operation
relates to the last signal to be output after the set inversion, if any.
All output cams that use the selected output are shown graphically.
● Output deactivated
When the output is deactivated, the output cam is evaluated only in the software.

Consulte también
Output cam technology object (Página 1800)
Configuring technological modules and onboard I/O for Motion Control (Página 1424)

Extended parameters
Configuration - Activation time
The specified output cam type is indicated in the upper area of the "Activation time"
configuration window.

Activation time and deactivation time
For a time shift of the switch-on and switch-off times of an output cam, enter an activation time
and a deactivation time.

Consulte también
Compensation of actuator switching times (Página 1811)
Output cam technology object (Página 1800)

1832

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Configuration - Hysteresis
To prevent unwanted changes in the switching state of the output cams of a cam track, enter
a hysteresis value.
When using an output cam with reference to actual position, always enter a hysteresis value
(> 0.0).

Consulte también
Hysteresis (Página 1809)
Output cam technology object (Página 1800)

Configuring the cam track technology object
Configuration - Basic parameters
Configure the basic properties of the technology object in the "Basic parameters" configuration
window.

Name
Define the name of the cam track in this field. The technology object is listed under this name
in the project tree. The tags of the cam track can be used in the user program under this name.

Assigned axis or external encoder
The axis or external encoder assigned to the cam track is displayed. You can use the button
to directly access the configuration of the basic parameters of the higher-level technology
object.

Output cam type
Select based on the desired switching behavior of an output cam type for the cam track:
● Distance output cam (position-dependent switch-on/switch-off)
● Time-based output cam (position-dependent switch-on and position-independent or timedependent switch-off)

Output cam reference
In this selection, configure whether the switching points of the cam track are to reference the
actual position or the position setpoint.

Unit of measure
The indicated unit of measure for the position of the cam track corresponds to the unit of
measure of the higher-level technology object.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1833

Control de movimiento
6.1 Using S7-1500 Motion Control
To use six decimal places in the selected unit, select the check box "Use position values with
higher resolution" in the higher-level technology object.
When a time-based output cam is selected as the output cam type, the unit of measure for the
switch-on duration and other times is also indicated. For output cams, this is always ms.

Consulte también
Units of measure (Página 1389)
Cam track technology object (Página 1814)

Configuration - Hardware interface
Output cam track
Select whether the generated switching signals are to be output at the digital output.
● Activate output
Select one of the following two output options for the output track:
– Output via Timer DQ
With output via a Timer DQ, you select a suitable channel in the "Output" field. The
selection box shows all channels that are configured as Timer DQ. For this purpose, you
need to have configured the I/O channels as Timer DQ beforehand.
Timer DQs are supported by:
- ET 200MP TM Timer DIDQ 16x24V
- ET 200SP TM Timer DIDQ 10x24V
- SIMATIC Drive Controller (X142)
– Output by digital output module
For output by a digital output module, select this in the "Output cam output" field. Only the
digital outputs with previously defined PLC tags are displayed for selection.
● Deactivate output
When the output is deactivated, the cam track is evaluated only in the software.

Consulte también
Cam track technology object (Página 1814)
Configuring technological modules and onboard I/O for Motion Control (Página 1424)

Extended parameters
Track data
Configuration - Activation time
The set output cam type is displayed.

1834

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Activation time and deactivation time
Enter the activation time and the deactivation time.
For a time shift of the switch-on and switch-off times of the output cam of a cam track, enter an
activation time and a deactivation time.

Consulte también
Time offset of cam switching points (Página 1825)
Cam track technology object (Página 1814)

Configuration - Hysteresis
To prevent unwanted changes in the switching state of the output cams of a cam track, enter
a hysteresis value.
When using an output cam with reference to actual position, always enter a hysteresis value
(> 0.0).

Consulte también
Hysteresis (Página 1825)
Cam track technology object (Página 1814)

Configuration - Track dimensions
Track length
Enter the corresponding track length.
Also take into account the output cam data of the individual output cams when defining the track
length. Output cams whose start position lies outside the cam track length are not included.
They become active only if the cam track length is increased so that at least the respective start
position of an output cam is within the new track length.

Axis reference position
Enter the position of an axis or external encoder starting from which the output of the cam track
is to occur. The start of the cam track is placed at the entered position.
You can enter a negative or positive value for the reference position.

Modulo length of the axis
When an axis with modulo function is used, the modulo length of the axis is displayed.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1835

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Cam track technology object (Página 1814)

Configuration - Output cam data
The set output cam type is displayed.
Enter the properties for the output cams of the cam track that are to be output. You can set up
to 32 individual output cams on a cam track.
Also take into account any previously defined track length when defining the output cam data.
Output cams whose start position lies outside the cam track length are not included. They
become active only if the cam track length is increased so that at least the respective start
position of an output cam is within the new track length.
The input options described below are displayed in the Output cam data configuration window
according to the configured output cam type.
● Valid
Only output cams set as "valid" are output and have a status display.
● Start position
– The start position may not be greater than the end position for distance output cams.
– If the start position is equal to the end position, the distance output cam does not switch.
– The switching ranges of individual output cams are permitted to overlap.
● End position
– The "End position" column is only displayed when distance output cam is set for the
output cam type.
– The end position must not be less than the start position.
● Switch-on duration
The "Switch-on duration" column is only displayed when time-based output cam is set for
the cam type.

Consulte también
Cam track technology object (Página 1814)

6.1.3.4

Diagnostics
The "Diagnostics" section is limited to describing the diagnostics view of the individual
technology objects measuring input, output cam and cam track in the TIA Portal.
You will find a description of Motion Control diagnostics in the following sections of the
"S7-1500/S7-1500T Motion Control overview" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766459):
● Diagnostic concept
● Technology alarms
● Errors in Motion Control instructions

1836

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
A comprehensive description of the system diagnostics of the S7‑1500 CPU can be found in the
"Diagnostics" function manual (https://support.automation.siemens.com/WW/view/en/
59192926).

Measuring input technology object
Status and error bits
You use the "Technology object > Diagnostics > Status and error bits" diagnostic function in the
TIA Portal to monitor the status and error messages for the technology object. The diagnostics
function is available in online operation.
The meaning of the status and error messages is described in the following tables. The
associated technology object tag is given in parentheses.

Measuring input status
The following table shows the possible states of the measuring input:
Status

Description

Active

The technology object is in operation.
(<TO>.StatusWord.X0 (Control))

Waiting for measuring
event

The measuring input is waiting for a measuring event.
The technology data block tag "<TO>.Status" has the value "1" ("WAI‐
TING_FOR_TRIGGER").

Measured value present The measuring input has acquired one or more measured values.
The technology data block tag "<TO>.Status" has the value "2" ("TRIG‐
GER_OCCURRED").
Error

An error occurred at the technology object. Detailed information about the
error is available in the "Error" area and in the "<TO>.ErrorDetail.Number"
and "<TO>.ErrorDetail.Reaction" tags of the technology object.
(<TO>.StatusWord.X1 (Error))

Restart active

The technology object is being reinitialized. The tags of the technology data
block are not updated with active restart.
(<TO>.StatusWord.X2 (RestartActive))

Measuring input ready

The measuring input is synchronized with the measuring module and can be
used.
(<TO>.StatusWord.X5 (CommunicationOK))

Restart required

Data relevant for the restart has been changed. The changes are applied only
after a restart of the technology object.
(<TO>.StatusWord.X3 (OnlineStartValuesChanged))

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1837

Control de movimiento
6.1 Using S7-1500 Motion Control

Error
The following table shows the possible errors:
Error

Description

System

A system-internal error has occurred.
(<TO>.ErrorWord.X0 (SystemFault))

Configuration

A configuration error has occurred.
One or more configuration parameters are inconsistent or invalid.
The technology object was incorrectly configured, or editable configuration
data was incorrectly modified during runtime of the user program.
(<TO>.ErrorWord.X1 (ConfigFault))

User program

An error occurred in the user program at a Motion Control instruction or its
use.
(<TO>.ErrorWord.X2 (UserFault))

Job rejected

A job cannot be executed.
A Motion Control instruction cannot be executed because the necessary
conditions are not met (e.g. axis assigned to the measuring input is not ho‐
med).
(<TO>.ErrorWord.X3 (CommandNotAccepted))

I/O

An error occurred accessing a logical address.
(<TO>.ErrorWord.X13 (PeripheralError))

Alarm display
For additional information and to acknowledge the error, go to the Inspector window by clicking
on the "Alarm display" link.

Additional information
An option for evaluating the individual status bits can be found in the section "Evaluating
StatusWord, ErrorWord and WarningWord" of the "S7-1500/S7-1500T Motion Control
overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459) documentation.

Consulte también
"StatusWord" tag (measuring input) (Página 1846)
"ErrorWord" tag (measuring input) (Página 1847)
"WarningWord" tag (measuring input) (Página 1849)

Output cam technology object
Status and error bits
You use the "Technology object > Diagnostics > Status and error bits" diagnostic function in the
TIA Portal to monitor the status and error messages for the technology object. The diagnostics
function is available in online operation.

1838

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The meaning of the status and error messages is described in the following tables. The
associated technology object tag is given in parentheses.

Output cam status
The following table shows the possible states of the output cam:
Status

Description

Active

The technology object is in operation.
(<TO>.StatusWord.X0 (Control))

Switched

The output cam is switched.
(<TO>.CamOutput)

Inverted output for out‐
put cam

The output cam output is inverted.

Error

An error occurred at the technology object. Detailed information about the
error is available in the "Error" area and in the "<TO>.ErrorDetail.Number"
and "<TO>.ErrorDetail.Reaction" tags of the technology object.

(<TO>.StatusWord.X4 (OutputInverted))

(<TO>.StatusWord.X1 (Error))
Restart active

The technology object is being reinitialized. The tags of the technology data
block are not updated with active restart.
(<TO>.StatusWord.X2 (RestartActive))

Output cam output
ready
Restart required

The output cam is synchronized with the output module and available for use.
(<TO>.StatusWord.X5 (CommunicationOk))
Data relevant for the restart has been changed. The changes are applied only
after a restart of the technology object.
(<TO>.StatusWord.X3 (OnlineStartValuesChanged))

Error
The following table shows the possible errors:
Error

Description

System

A system-internal error has occurred.
(<TO>.ErrorWord.X0 (SystemFault))

Configuration

A configuration error has occurred.
One or more configuration parameters are inconsistent or invalid.
The technology object was incorrectly configured, or editable configuration
data was incorrectly modified during runtime of the user program.
(<TO>.ErrorWord.X1 (ConfigFault))

User program

An error occurred in the user program at a Motion Control instruction or its
use.
(<TO>.ErrorWord.X2 (UserFault))

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1839

Control de movimiento
6.1 Using S7-1500 Motion Control
Error

Description

Job rejected

A job cannot be executed.
A Motion Control instruction cannot be executed because the necessary
conditions are not met (e.g. axis assigned to the output cam is not homed).
(<TO>.ErrorWord.X3 (CommandNotAccepted))

I/O

An error occurred accessing a logical address.
(<TO>.ErrorWord.X13 (PeripheralError))

Alarm display
For additional information and to acknowledge the error, go to the Inspector window by clicking
on the "Alarm display" link.

Additional information
An option for evaluating the individual status bits can be found in the section "Evaluating
StatusWord, ErrorWord and WarningWord" of the "S7-1500/S7-1500T Motion Control
overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459) documentation.

Consulte también
"StatusWord" tag (output cam) (Página 1852)
"ErrorWord" tag (output cam) (Página 1853)
"WarningWord" tag (output cam) (Página 1855)

Cam track technology object
Status and error bits
You use the "Technology object > Diagnostics > Status and error bits" diagnostic function in the
TIA Portal to monitor the status and error messages for the technology object. The diagnostics
function is available in online operation.
The meaning of the status and error messages is described in the following tables. The
associated technology object tag is given in parentheses.

Cam track status
The following table shows the possible states of the cam track:
Status

Description

Active

The technology object is in operation.
(<TO>.StatusWord.X0 (Control))

Switched

An output cam of cam track is switched.
(<TO>.TrackOutput)

1840

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Status

Description

Inverted output for out‐
put cam

The output cam output is inverted.

Error

An error occurred at the technology object. Detailed information about the
error is available in the "Error" area and in the "<TO>.ErrorDetail.Number"
and "<TO>.ErrorDetail.Reaction" tags of the technology object.

(<TO>.StatusWord.X4 (OutputInverted))

(<TO>.StatusWord.X1 (Error))
Restart active

The technology object is being reinitialized. The tags of the technology data
block are not updated with active restart.
(<TO>.StatusWord.X2 (RestartActive))

Cam track output ready

The cam track is synchronized with the output module and available for use.
(<TO>.StatusWord.X5 (CommunicationOk))

Restart required

Data relevant for the restart has been changed. The changes are applied only
after a restart of the technology object.
(<TO>.StatusWord.X3 (OnlineStartValuesChanged))

Error
The following table shows the possible errors:
Error

Description

System

A system-internal error has occurred.
(<TO>.ErrorWord.X0 (SystemFault))

Configuration

A configuration error has occurred.
One or more configuration parameters are inconsistent or invalid.
The technology object was incorrectly configured, or editable configuration
data was incorrectly modified during runtime of the user program.
(<TO>.ErrorWord.X1 (ConfigFault))

User program

An error occurred in the user program at a Motion Control instruction or its
use.
(<TO>.ErrorWord.X2 (UserFault))

Job rejected

A job cannot be executed.
A Motion Control instruction cannot be executed because the necessary
conditions are not met (e.g. axis assigned to the cam track is not homed).
(<TO>.ErrorWord.X3 (CommandNotAccepted))

I/O

An error occurred accessing a logical address.
(<TO>.ErrorWord.X13 (PeripheralError))

Alarm display
For additional information and to acknowledge the error, go to the Inspector window by clicking
on the "Alarm display" link.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1841

Control de movimiento
6.1 Using S7-1500 Motion Control

Additional information
An option for evaluating the individual status bits can be found in the section "Evaluating
StatusWord, ErrorWord and WarningWord" of the "S7-1500/S7-1500T Motion Control
overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459) documentation.

Consulte también
"StatusWord" tag (cam track) (Página 1858)
"ErrorWord" tag (cam track) (Página 1859)
"WarningWord" tag (cam track) (Página 1861)

Cam track status
You use the "Technology object > Diagnostics > Cam track status" diagnostics function in the
TIA Portal to monitor the status of the cam track. The diagnostics function is available in online
operation.

"Validity and masking of the output cams" area
The individual cams of a cam track are shown in this area along with the status for the following
properties:
Status

Description

Valid

Validity of the individual cams of the cam track
(<TO>.Parameter.Cam[1..32].Existent)

Masked

Bit masking of the individual cams of the cam track
(<TO>.Parameter.CamMasking)

Effective

Switched on output cam (bit-masked)
(<TO>.SingleCamState)

"Positions" area
The following status values are displayed in this area:
Status

Description

Current position in the
cam track

Position during cam track processing within a cam track cycle
The distance to the current reference position of the current cam track
(<TO>.MatchPosition) is displayed.
(<TO>.TrackPosition)

Current cam track start

Reference position of the current cam track
During cyclic processing of the cam track, the continued reference position of
the current cam track is displayed. The unique detection and output of the
position is only possible when the assigned technology object is in motion.
(<TO>.MatchPosition)

1842

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

6.1.3.5

Appendix

Tags of the measuring input technology object
Legend
Tag

Name of the tag

Data type

Data type of the tag

Values

Value range of the tag - minimum value to maximum value
If no specific value is shown, the value range limits of the relevant data type apply or the information under
"Description".

W

Effectiveness of changes in the technology data block
DIR

Direct:
Values are changed directly and take effect at the start of the next MC‑Servo [OB91].

CAL

At call of Motion Control instruction:
Values are changed directly and take effect at the start of the next MC‑Servo [OB91] after the
call of the corresponding Motion Control instruction in the user program.

RES

Restart:
Changes to the start value in the load memory are made using the extended instruction
"WRIT_DBL" (write to DB in load memory). Changes will not take effect until after restart of the
technology object.

RON

Read only:
The tag cannot and must not be changed during runtime of the user program.

Description

Description of the tag

Access to the tags is with "<TO>.<tag name>". The placeholder <TO> represents the name of
the technology object.

Display data (measuring input)
The "<TO>.Status" and "<TO>.InputState" tags show the status of the measuring function and
the measuring input.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1843

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1843)
Tag

Data type

Values

W

Description

Status

DINT

-

RON

Status of the measuring input function
0

"INACTIVE"

1

"WAITING_FOR_TRIGGER"

No measurement is active.
The measuring input is waiting for the measu‐
ring event.
2

"TRIGGER_OCCURRED"
One or more measured values have been cap‐
tured.

3

"MEASURING_ERROR"
Error during the measurement

InputState

BOOL

-

RON

Status of measuring input
FALSE

Measuring input inactive

TRUE

Input of measuring input active

"Parameter" tag (measuring input)
The tag structure "<TO>.Parameter.<tag name>" contains the configuration of the basic
parameters of the measuring input technology object.

Tags
Legend (Página 1843)
Tag

Data type

Parameter.

TO_MeasuringInput_Struct_Para‐
meter

MeasuringInputType

DINT

Values

0, 1

W

RON

Description

Measuring input type
0

"STANDARD"

1

"PROFIDRIVE"

Measurement using time stamp
Measuring event using PROFIdrive telegram
PROFIdriveProbeNum‐ UDINT
ber

1, 2

RES

Number of the measuring input to be used for a measure‐
ment via PROFIdrive telegram

MeasuringRangeActi‐
vationTime

LREAL

0.0 … 1.0E12

RON

System share for activation time of measuring range

MeasuringRangeAddi‐
tionalActivationTime

LREAL

0.0 … 1.0E12

RES

Additional activation time when using measuring range li‐
mits [ms]

CorrectionTime

LREAL

0.0 … 1.0E12

RES

Correction time for the measurement result [ms]

1844

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

"Interface" tag (measuring input)
The tag structure "<TO>.Interface.<tag name>" contains the configuration of the input
properties for the measuring input technology object.

Tags
Legend (Página 1843)
Values

W

Tag

Data type

Interface.

TO_MeasuringInput_Struct_Interfa‐
ce

Address

VREF

-

RON

Description

I/O address for the digital measurement input

"Units" tag (measuring input)
The tag structure "<TO>.Units.<tag name>" shows the set technological units.

Tags
Legend (Página 1843)
Values

W

Tag

Data type

Units.

TO_MeasuringInput_Struct_Units

LengthUnit

TimeUnit

UDINT

UDINT

-

-

RON

RON

Description
Unit for position
1010

m

1013

mm

1536

mm1)

1011

km

1014

µm

1015

nm

1019

in

1018

ft

1021

mi

1004

rad

1005

°

1537

°1)

Unit for time
1056

1)

ms

Position values with higher resolution or six decimal places.

"MeasuredValues" tag (measuring input)
The tag structure "<TO>.MeasuredValues.<tag name>" displays the measurement results.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1845

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1843)
Tag

Data type

Values

W

MeasuredValues.

TO_MeasuringInput_Struct_Mea‐
suringValues

Description

MeasuredValue1

LREAL

-1.0E12 …
1.0E12

RON

First measured value

MeasuredValue2

LREAL

-1.0E12 …
1.0E12

RON

Second measured value

MeasuredValue1Coun‐
ter

UDINT

0…
2147483647

RON

Count value for the first measured value

MeasuredValue2Coun‐
ter

UDINT

0…
2147483647

RON

Count value for the second measured value

LostEdgeCounter1

UDINT

0…7

RON

LEC for measured value 1

LostEdgeCounter2

UDINT

0…7

RON

LEC for measured value 2

(Zero in the case of one-time measurement)
(Zero in the case of one-time measurement)

"StatusWord" tag (measuring input)
The "<TO>.StatusWord" tag contains the status information of the technology object.
Information on the evaluation of the individual bits (e.g. bit 2 "RestartActive") can be found in the
"Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/S7-1500T
Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459)
documentation.

1846

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1843)
Tag

Data type

StatusWord
Bit 0

Bit 1

Bit 2

Values

W

Description

DWORD

-

RON

Status information of the technology object

-

-

-

"Control"

-

-

-

-

-

-

0

Technology object not in operation

1

Technology object in operation

"Error"
0

No error present

1

Error present

"RestartActive"
0

No restart active

1

Restart active
The technology object is being reinitialized.

Bit 3

-

-

-

"OnlineStartValuesChanged"
0

Restart tags unchanged

1

Change to Restart tags
For the changes to be applied, the technology
object must be reinitialized.

Bit 4

-

-

-

Reserved

Bit 5

-

-

-

"CommunicationOK"
Communication between measuring input and measuring
module

Bit 6...
Bit 31

-

-

-

0

Not established

1

Established

Reserved

"ErrorWord" tag (measuring input)
The "<TO>.ErrorWord" tag indicates technology object errors (technology alarms).
Information on the evaluation of the individual bits (e.g. bit 3 "CommandNotAccepted") can be
found in the "Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/
S7-1500T Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/
109766459) documentation.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1847

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1843)
Tag
ErrorWord

Data type

Values

W

Description

DWORD

-

RON

Bit 0

-

-

-

"SystemFault"

Bit 1

-

-

-

"ConfigFault"

A system-internal error has occurred.
Configuration error
One or more configuration parameters are inconsistent or
invalid.
Bit 2

-

-

-

"UserFault"
Error in user program at a Motion Control instruction or its
use

Bit 3

-

-

-

"CommandNotAccepted"
Job cannot be executed
A Motion Control instruction cannot be executed because
the necessary conditions are not met.

Bit 4...
Bit 12

-

-

-

Reserved

Bit 13

-

-

-

"PeripheralError"

Bit 14...
Bit 31

-

-

-

Reserved

Error accessing a logical address

"ErrorDetail" tag (measuring input)
The tag structure "<TO>.ErrorDetail.<tag name>" contains the alarm number and the effective
local alarm reaction for the technology alarm that is currently pending on the technology object.
You can find a list of the technology alarms and alarm reactions in the "Technology alarms"
appendix of the "S7-1500/S7-1500T Motion Control overview" (https://
support.industry.siemens.com/cs/ww/en/view/109766459) documentation.

Tags
Legend (Página 1843)
Tag

Data type

Values

ErrorDetail.

TO_Struct_ErrorDetail

W

Description

Number

UDINT

-

RON

Alarm number

Reaction

DINT

0, 6

RON

Effective alarm reaction

1848

0

No reaction

6

End measuring input processing

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

"WarningWord" tag (measuring input)
The "<TO>.WarningWord" tag indicates pending warnings at the technology object.
Information on the evaluation of the individual bits (e.g. bit 1 "ConfigWarning") can be found in
the "Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/S7-1500T
Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459)
documentation.

Tag
Legend (Página 1843)
Tag

Data type

WarningWord

Values

W

Description

DWORD

-

RON

Bit 0

-

-

-

"SystemWarning"

Bit 1

-

-

-

"ConfigWarning"

A system-internal error has occurred.
Configuration error
One or several configuration parameters are adjusted in‐
ternally.
Bit 2

-

-

-

"UserWarning"
Error in user program at a Motion Control instruction or its
use

Bit 3

-

-

-

"CommandNotAccepted"
Job cannot be executed
A Motion Control instruction cannot be executed because
the necessary conditions are not met.

Bit 4...
Bit 12

-

-

-

Bit 13

Reserved
"PeripheralWarning"
Error accessing a logical address

Bit 14...
Bit 31

-

-

-

Reserved

Tags of the output cam technology object
Legend
Tag

Name of the tag

Data type

Data type of the tag

Values

Value range of the tag - minimum value to maximum value
If no specific value is shown, the value range limits of the relevant data type apply or the information under
"Description".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1849

Control de movimiento
6.1 Using S7-1500 Motion Control
W

Effectiveness of changes in the technology data block
DIR

Direct:
Values are changed directly and take effect at the start of the next MC‑Servo [OB91].

CAL

At call of Motion Control instruction:
Values are changed directly and take effect at the start of the next MC‑Servo [OB91] after the
call of the corresponding Motion Control instruction in the user program.

RES

Restart:
Changes to the start value in the load memory are made using the extended instruction
"WRIT_DBL" (write to DB in load memory). Changes will not take effect until after restart of the
technology object.

RON

Read only:
The tag cannot and must not be changed during runtime of the user program.

Description

Description of the tag

Access to the tags is with "<TO>.<tag name>". The placeholder <TO> represents the name of
the technology object.

Display data (output cam)
The "<TO>.CamOutput" tag indicates the switching state of the output cam.

Tags
Legend (Página 1849)
Tag

Data type

Values

W

Description

CamOutput

BOOL

-

RON

Switching state of output cam
FALSE

Not switched

TRUE

Switched

"Parameter" tag (output cam)
The tag structure "<TO>.Parameter.<tag name>" contains the configuration of the basic
parameters of the output cam technology object.

1850

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1849)
Tag
Parameter.
OutputCamType

PositionType

Data type

Values

W

Description

TO_OutputCam_Struct_Parameter
DINT

DINT

0…2

0, 1

RES

RES

OnCompensation

LREAL

0.0 … 1.0E12

DIR

OffCompensation

LREAL

0.0 … 1.0E12

DIR

Output cam type
0

Distance output cam

1

Time-based output cam

2

Switching output cam

Position reference
0

Position setpoint

1

Actual position

Activation time
Lead time for the switch-on edge
Deactivation time
Lead time for the switch-off edge

Hysteresis

LREAL

0.0 … 1.0E12

DIR

Hysteresis value
For output cams with reference to actual position, always
enter a hysteresis value (> 0.0).

"Interface" tag (output cam)
The tag structure "<TO>.Interface.<tag name>" contains the configuration of the output
properties for the output cam technology object.

Tags
Legend (Página 1849)
Tag

Data type

Interface.

TO_OutputCam_Struct_Interface

EnableOutput

BOOL

Values
-

W
RES

Description
Activation of the output cam output
FALSE

Output is deactivated

TRUE

Output is activated

Address

VREF

-

RON

I/O address of the output cam

LogicOperation

DINT

0, 1

RON

Logical operation of the output cam signals at the output
0

OR logic operation

1

AND logic operation

"Units" tag (output cam)
The tag structure "<TO>.Units.<tag name>" shows the set technological units.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1851

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1849)
Tag

Data type

Units.

TO_OutputCam_Struct_Units

LengthUnit

TimeUnit

UDINT

UDINT

Values
-

-

W

Description

RON

Unit for position

RON

1010

m

1013

mm

1536

mm1)

1011

km

1014

µm

1015

nm

1019

in

1018

ft

1021

mi

1004

rad

1005

°

1537

°1)

Unit for time
1056

1)

ms

Position values with higher resolution or six decimal places.

"StatusWord" tag (output cam)
The "<TO>.StatusWord" tag contains the status information of the technology object.
Information on the evaluation of the individual bits (e.g. bit 2 "RestartActive") can be found in the
"Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/S7-1500T
Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459)
documentation.

1852

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1849)
Tag

Data type

StatusWord
Bit 0

Bit 1

Bit 2

Values

W

Description

DWORD

-

RON

Status information of the technology object

-

-

-

"Control"

-

-

-

-

-

-

0

Technology object not in operation

1

Technology object in operation

"Error"
0

No error present

1

Error present

"RestartActive"
0

No restart active

1

Restart active
The technology object is being reinitialized.

Bit 3

-

-

-

"OnlineStartValuesChanged"
0

Restart tags unchanged

1

Change to Restart tags
For the changes to be applied, the technology
object must be reinitialized.

Bit 4

Bit 5

-

-

-

-

-

-

"OutputInverted"
0

Output cam output not inverted

1

Output cam output inverted

"CommunicationOK"
Communication between output cam and output module

Bit 6...
Bit 31

-

-

-

0

Not established

1

Established

Reserved

"ErrorWord" tag (output cam)
The "<TO>.ErrorWord" tag indicates technology object errors (technology alarms).
Information on the evaluation of the individual bits (e.g. bit 3 "CommandNotAccepted") can be
found in the "Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/
S7-1500T Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/
109766459) documentation.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1853

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1849)
Tag
ErrorWord

Data type

Values

W

Description

DWORD

-

RON

Bit 0

-

-

-

"SystemFault"

Bit 1

-

-

-

"ConfigFault"

A system-internal error has occurred.
Configuration error
One or more configuration parameters are inconsistent or
invalid.
Bit 2

-

-

-

"UserFault"
Error in user program at a Motion Control instruction or its
use

Bit 3

-

-

-

"CommandNotAccepted"
Job cannot be executed
A Motion Control instruction cannot be executed because
the necessary conditions are not met.

Bit 4...
Bit 12

-

-

-

Reserved

Bit 13

-

-

-

"PeripheralError"

Bit 14...
Bit 31

-

-

-

Reserved

Error accessing a logical address

"ErrorDetail" tag (output cam)
The tag structure "<TO>.ErrorDetail.<tag name>" contains the alarm number and the effective
local alarm reaction for the technology alarm that is currently pending on the technology object.
You can find a list of the technology alarms and alarm reactions in the "Technology alarms"
appendix of the "S7-1500/S7-1500T Motion Control overview" (https://
support.industry.siemens.com/cs/ww/en/view/109766459) documentation.

Tags
Legend (Página 1849)
Values

Tag

Data type

ErrorDetail.

TO_Struct_ErrorDetail

W

Description

Number

UDINT

-

RON

Alarm number

Reaction

DINT

0, 6

RON

Effective alarm reaction

1854

0

No reaction

6

Output cam processing is complete.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

"WarningWord" tag (output cam)
The "<TO>.WarningWord" tag indicates pending warnings at the technology object.
Information on the evaluation of the individual bits (e.g. bit 1 "ConfigWarning") can be found in
the "Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/S7-1500T
Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459)
documentation.

Tag
Legend (Página 1849)
Tag
WarningWord

Data type

Values

W

Description

DWORD

-

RON

Bit 0

-

-

-

"SystemWarning"

Bit 1

-

-

-

"ConfigWarning"

A system-internal error has occurred.
Configuration error
One or several configuration parameters are adjusted in‐
ternally.
Bit 2

-

-

-

"UserWarning"
Error in user program at a Motion Control instruction or its
use

Bit 3

-

-

-

"CommandNotAccepted"
Job cannot be executed
A Motion Control instruction cannot be executed because
the necessary conditions are not met.

Bit 4...
Bit 12

-

-

-

Bit 13

Reserved
"PeripheralWarning"
Error accessing a logical address

Bit 14...
Bit 31

-

-

-

Reserved

Tags of the cam track technology object
Legend
Tag

Name of the tag

Data type

Data type of the tag

Values

Value range of the tag - minimum value to maximum value
If no specific value is shown, the value range limits of the relevant data type apply or the information under
"Description".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1855

Control de movimiento
6.1 Using S7-1500 Motion Control
W

Effectiveness of changes in the technology data block
DIR

Direct:
Values are changed directly and take effect at the start of the next MC‑Servo [OB91].

CAL

At call of Motion Control instruction:
Values are changed directly and take effect at the start of the next MC‑Servo [OB91] after the
call of the corresponding Motion Control instruction in the user program.

RES

Restart:
Changes to the start value in the load memory are made using the extended instruction
"WRIT_DBL" (write to DB in load memory). Changes will not take effect until after restart of the
technology object.

RON

Read only:
The tag cannot and must not be changed during runtime of the user program.

Description

Description of the tag

Access to the tags is with "<TO>.<tag name>". The placeholder <TO> represents the name of
the technology object.

Display data (cam track)
The following tags indicate the status of the cam track:

Tags
Legend (Página 1855)
Tag

Data type

Values

W

Description

Status

DINT

0…2

RON

0

"INACTIVE"
Inactive

1

"ACTIVE"
Active

2

"ACTIVE_WAITING_FOR_NEXT_CYCLE"
Active and waiting for next track

TrackOutput
SingleCamState

BOOL
DWORD

16#0 …
16#FFFF_FFFF

RON
RON

FALSE

Cam track is not output.

TRUE

Cam track is output.

Switched on output cam (bit-masked)
0

Output cam is not switched on

1

Output cam is switched on

TrackPosition

LREAL

-1.0E12 …
1.0E12

RON

Display of the current position within the cam track

MatchPosition

LREAL

-1.0E12 …
1.0E12

RON

Reference position of the current cam track

1856

During cyclic processing of the cam track, the continued
reference position of the current cam track is displayed.
The unique detection and output of the position is only
possible when the assigned technology object is in motion.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

"Parameter" tag (cam track)
The tag structure "<TO>.Parameter.<tag name>" contains the configuration of the basic
parameters of the cam track technology object.

Tags
Legend (Página 1855)
Values

W

Tag

Data type

Parameter.

TO_CamTrack_Struct_Parameter

CamTrackType

DINT

PositionType

DINT

0, 1

0, 1

RES

RES

DIR

Description
Output cam type
0

Distance output cam

1

Time-based output cam

Position reference
0

Position setpoint

1

Actual position

ReferencePosition

LREAL

-1.0E12 …
1.0E12

Reference position

CamTrackLength

LREAL

0.001 … 1.0E12

DIR

Track length

CamMasking

DWORD

16#0 …
16#FFFF_FFFF

DIR

Bit masking of individual output cams

OnCompensation

LREAL

0.0 … 1.0E12

DIR

Activation time
Lead time for the switch-on edge

OffCompensation

LREAL

0.0 … 1.0E12

DIR

Deactivation time
Lead time for the switch-off edge

Hysteresis

LREAL

0.0 … 1.0E12

DIR

Hysteresis value
For output cams with reference to actual position, always
enter a hysteresis value (> 0.0).

Cam[1..32].
OnPosition

ARRAY[1..32] OF TO_Cam‐
Track_Struct_CamData
LREAL

0.0 … 1.0E12

CAL

With distance output cams and time-based output cams:
Start position

Offposition

LREAL

0.0 … 1.0E12

CAL

With distance output cams:
End position

Duration

LREAL

0.001 … 1.0E12

CAL

With time-based output cams:

Existent

BOOL

-

CAL

FALSE

Output cam is not used.

TRUE

Output cam is used.

Switch-on duration

"Interface" tag (cam track)
The tag structure "<TO>.Interface.<tag name>" contains the configuration of the output
properties for the cam track technology object.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1857

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1855)
Tag

Data type

Interface.

TO_CamTrack_Struct_Interface

EnableOutput

BOOL

Address

VREF

Values
-

-

W
RES

RON

Description
Output cam output at the bit specified under "<TO>.Inter‐
face.Address"
FALSE

No output

TRUE

Output

I/O address for digital output cam output

"Units" tag (cam track)
The tag structure "<TO>.Units.<tag name>" shows the set technological units.

Tags
Legend (Página 1855)
Values

Tag

Data type

Units.

TO_CamTrack_Struct_Units

LengthUnit

UDINT

TimeUnit

UDINT

-

-

W

Description

RON

Unit for position

RON

1010

m

1013

mm

1536

mm1)

1011

km

1014

µm

1015

nm

1019

in

1018

ft

1021

mi

1004

rad

1005

°

1537

°1)

Unit for time
1056

1)

ms

Position values with higher resolution or six decimal places.

Consulte también
Units of measure (Página 1389)

"StatusWord" tag (cam track)
The "<TO>.StatusWord" tag contains the status information of the technology object.

1858

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Information on the evaluation of the individual bits (e.g. bit 2 "RestartActive") can be found in the
"Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/S7-1500T
Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459)
documentation.

Tags
Legend (Página 1855)
Tag
StatusWord
Bit 0

Bit 1

Bit 2

Data type

Values

W

Description

DWORD

-

RON

Status information of the technology object

-

-

-

"Control"

-

-

-

-

-

-

0

Technology object not in operation

1

Technology object in operation

"Error"
0

No error present

1

Error present

"RestartActive"
0

No restart active

1

Restart active
The technology object is being reinitialized.

Bit 3

-

-

-

"OnlineStartValuesChanged"
0

Restart tags unchanged

1

Change to Restart tags
For the changes to be applied, the technology
object must be reinitialized.

Bit 4

Bit 5

-

-

-

-

-

-

"OutputInverted"
0

Output cam output not inverted

1

Output cam output inverted

"CommunicationOK"
Communication between cam track and output module

Bit 6...
Bit 31

-

-

-

0

Not established

1

Established

Reserved

"ErrorWord" tag (cam track)
The "<TO>.ErrorWord" tag indicates technology object errors (technology alarms).
Information on the evaluation of the individual bits (e.g. bit 3 "CommandNotAccepted") can be
found in the "Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/
S7-1500T Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/
109766459) documentation.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1859

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 1855)
Tag
ErrorWord

Data type

Values

W

Description

DWORD

-

RON

Bit 0

-

-

-

"SystemFault"

Bit 1

-

-

-

"ConfigFault"

A system-internal error has occurred.
Configuration error
One or more configuration parameters are inconsistent or
invalid.
Bit 2

-

-

-

"UserFault"
Error in user program at a Motion Control instruction or its
use

Bit 3

-

-

-

"CommandNotAccepted"
Command cannot be executed
A Motion Control instruction cannot be executed because
the necessary conditions are not met.

Bit 4...
Bit 12

-

-

-

Reserved

Bit 13

-

-

-

"PeripheralError"

Bit 14...
Bit 31

-

-

-

Reserved

Error accessing a logical address

"ErrorDetail" tag (cam track)
The tag structure "<TO>.ErrorDetail.<tag name>" contains the alarm number and the effective
local alarm reaction for the technology alarm that is currently pending on the technology object.
You can find a list of the technology alarms and alarm reactions in the "Technology alarms"
appendix of the "S7-1500/S7-1500T Motion Control overview" (https://
support.industry.siemens.com/cs/ww/en/view/109766459) documentation.

Tags
Legend (Página 1855)
Tag

Data type

Values

ErrorDetail.

TO_Struct_ErrorDetail

W

Description

Number

UDINT

-

RON

Alarm number

Reaction

DINT

0, 6

RON

Effective alarm reaction

1860

0

No reaction

6

Cam track processing is complete.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

"WarningWord" tag (cam track)
The "<TO>.WarningWord" tag indicates pending warnings at the technology object.
Information on the evaluation of the individual bits (e.g. bit 1 "ConfigWarning") can be found in
the "Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/S7-1500T
Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459)
documentation.

Tag
Legend (Página 1843)
Tag

Data type

WarningWord

Values

W

Description

DWORD

-

RON

Bit 0

-

-

-

"SystemWarning"

Bit 1

-

-

-

"ConfigWarning"

A system-internal error has occurred.
Configuration error
One or several configuration parameters are adjusted in‐
ternally.
Bit 2

-

-

-

"UserWarning"
Error in user program at a Motion Control instruction or its
use

Bit 3

-

-

-

"CommandNotAccepted"
Command cannot be executed
A Motion Control instruction cannot be executed because
the necessary conditions are not met.

Bit 4...
Bit 12

-

-

-

Reserved

Bit 13

-

-

-

"PeripheralWarning"

Bit 14...
Bit 31

-

-

-

Reserved

Error accessing a logical address

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1861

Control de movimiento
6.1 Using S7-1500 Motion Control

6.1.4

Using S7-1500/S7-1500T synchronous operation functions

6.1.4.1

Introduction

Interplay of the various documents
For a better overview, the documentation of the Motion Control functions is divided into the
following documents:
Documentation

Description

S7-1500/S7-1500T Motion Con‐
trol overview

This documentation describes the general Motion Control func‐
tions independent of technology objects.

Function manual "S7-1500/
S7-1500T Motion Control over‐
view" (https://
support.industry.siemens.com/cs/
ww/en/view/109766459)
Using S7-1500/S7-1500T axis
functions

This documentation describes the Motion Control functions for the
following technology objects:

Function manual "S7-1500/
S7-1500T Axis functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766462)

● Speed axis
● Positioning axis
● External encoder

Using S7-1500/S7-1500T measu‐ This documentation describes the Motion Control functions for the
ring input and output cam functions following technology objects:
Function manual "S7-1500/
S7-1500T Measuring input and
output cam functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766466)

● Measuring input

Using S7-1500/S7-1500T
synchronous operation functions

This documentation describes the Motion Control functions for the
following technology objects:

Function manual "S7-1500/
S7-1500T Synchronous operation
functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766464)

● Synchronous axis

Using S7-1500T kinematics func‐
tions

This documentation describes the Motion Control functions for the
following technology objects:

● Output cam
● Cam track

● Cam (S7-1500T)
● Leading axis proxy (S7-1500T)

Function manual "S7-1500T Kine‐ ● Kinematics (S7-1500T)
matics functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766463)

Additional information
You can find an overview and important links to the topic "SIMATIC Motion Control" in the
Siemens Industry Online Support under the entry ID 109751049 (https://
support.industry.siemens.com/cs/ww/en/view/109751049).

1862

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Functions
You execute the functions of the synchronous axis, cam and leading axis proxy technology
objects using Motion Control instructions in your user program or using the TIA Portal (under
"Technology object > Commissioning").
The following table shows the Motion Control instructions that are supported by the technology
objects:
Motion Control instruction

Validity
S7-1500

"MC_Power"

Technology object

S7-1500T Synchronous axis
(Página 1866)

Cam (Pági‐
na 1867)

Leading axis
proxy (Pági‐
na 1987)

X

X

X

-

-

X

X

X

X

X

X

X

X

-

-

X

X

X

-

-

X

X

X

-

-

X

X

X

-

-

X

X

X

-

-

X

X

X

-

-

X

X

X

-

-

-

X

X

-

-

X

X

X

-

-

X

X

X

-

-

X

X

X

-

-

X

X

X

-

X

-

X

X

-

X

Enable, disable technology object
"MC_Reset"
Acknowledge alarms, restart techno‐
logy objects
"MC_Home"
Home technology object, set home po‐
sition
"MC_Halt"
Pause axis
"MC_MoveAbsolute"
Position axis absolutely
"MC_MoveRelative"
Position axis relatively
"MC_MoveVelocity"
Move axis with velocity/speed setpoint
"MC_MoveJog"
Move axis in jog mode
"MC_MoveSuperimposed"
Position axes overlapping
"MC_SetSensor"
Set alternative encoder as operatio‐
nally active encoder
"MC_Stop"
Stop and disable axis
"MC_SetAxisSTW"
Controlling bits of control word 1 and
control word 2
"MC_WriteParameter"
Write parameter
"MC_GearIn"
Start gearing
"MC_GearInPos"
Start gearing with specified synchro‐
nous positions

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1863

Control de movimiento
6.1 Using S7-1500 Motion Control
Motion Control instruction

Validity
S7-1500

"MC_PhasingRelative"

Technology object

S7-1500T Synchronous axis
(Página 1866)

Cam (Pági‐
na 1867)

Leading axis
proxy (Pági‐
na 1987)

-

X

X

-

X

-

X

X

-

X

-

X

X

X

X

-

X

X

-

-

-

X

X

-

-

-

X

-

X

-

-

X

-

X

-

-

X

-

X

-

-

X

X

-

-

-

X

X

-

-

X

X

X

-

-

X

X

X

-

-

X

X

X

-

-

Relative shift of leading value on the
following axis
"MC_PhasingAbsolute"
Absolute shift of leading value on the
following axis
"MC_CamIn"
Start camming
"MC_SynchronizedMotionSimulation"
Simulate synchronous operation
"MC_LeadingValueAdditive"
Specify additive leading value
"MC_InterpolateCam"
Interpolate cam disc
"MC_GetCamLeadingValue"
Read out leading value of a cam
"MC_GetCamFollowingValue"
Read out following value of a cam disc
"MC_MotionInVelocity"
Specify motion setpoints
"MC_MotionInPosition"
Specify motion setpoints
"MC_TorqueAdditive"
Specify additive torque
"MC_TorqueRange"
Set high and low torque limits
"MC_TorqueLimiting"
Activate/deactivate force/torque limit /
fixed stop detection

The following table shows the functions that are supported by technology objects in the
TIA Portal:
Technology object

"Axis control panel"

Synchronous axis (Pági‐
na 1866)

Cam (Página 1867)

Leading axis proxy (Pági‐
na 1987)

X

-

-

X

-

-

Move and home axes using the
TIA Portal
"Optimization"
Optimization of closed loop position
control

1864

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
In addition to the functionality of the S7-1500 CPU, the S7-1500T CPU provides additional
functions and technology objects:
Additional functions

Description

Multiple encoders for positioning axis/ Up to four encoders can be connected to a positioning axis/synchronous axis. The
synchronous axis
encoders can be switched over during operation. Only one encoder at a time is active
for closed loop position control.
Actual value coupling (Página 1870)

As an alternative to the setpoint, the extrapolated actual value can be interconnected
as a leading value for synchronous operation. As a result, an external encoder tech‐
nology object can also be used as a leading value.

Gearing with "MC_GearInPos" (Pági‐
na 1879)

During gearing, the leading axis and following axis are coupled, similar to a mecha‐
nical gear unit, by a linear synchronous operation function. You use the gear ratio to
specify the synchronous operation function. The synchronous positions of the lea‐
ding and following axes that specify the relationship of the axes to one another can
be specified in the Motion Control instruction "MC_GearInPos".

Cam technology object (Página 1867) The cam technology object (TO_Cam) defines a function f(x) by means of interpo‐
lation points and/or segments. Gaps between the defined interpolation points and
segments of the cam are closed by interpolation during runtime of the user program.
Camming with "MC_CamIn" (Pági‐
na 1889)

During camming, the leading axis and following axis are coupled by a synchronous
operation function, which you specify using a cam.

Synchronization in advance using lea‐ Gearing is synchronized with "MC_GearInPos" and camming is synchronized with
"MC_CamIn" subsequently or in advance to user-specified reference positions.
ding value distance (Página 1884)
or dynamic parameters (Página 1882)
Cross-PLC synchronous operation
(Página 1986)

Cross-PLC synchronous operation enables synchronous operation over multiple
controllers. Leading and following axes can be configured on different controllers.

Leading axis proxy technology object
(Página 1987)

With cross-PLC synchronous operation, the leading axis proxy technology object
(TO_LeadingAxisProxy) represents the leading axis for local synchronous operation
within a CPU. The leading axis proxy evaluates the leading value telegram and
provides the external leading value for the local synchronous axes.

6.1.4.2

Basics of synchronous operation
In a synchronous operation, a following axis follows a leading axis. The synchronous operation
relationship between the leading and following axes is specified by a synchronous operation
function.

Gearing
During gearing, the position of the following axis results from the position of the leading axis
multiplied by the gear ratio. You specify the gear ratio as a ratio of two integers. The result is a
linear synchronous operation function.

Camming
During camming, the leading axis and following axis are coupled by a synchronous operation
function, which you specify using a cam. The transmission behavior during camming is
expressed by the cam curve.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1865

Control de movimiento
6.1 Using S7-1500 Motion Control

Cross-PLC synchronous operation
With cross-PLC synchronous operation, you realize synchronous operations (gearing or
camming) between axes that are on different CPUs. The synchronous operation function is
executed on the CPU of the following axis.

Synchronous axis technology object
The synchronous axis technology object includes all functions of the positioning axis
technology object.
A synchronous axis can also follow the motions of a leading axis. The synchronous operation
relationship between the leading and following axes is specified by a synchronous operation
function.
You can find an overview of the functions of the synchronous axis technology object in the
Functions (Página 1863) section.
The figure below shows the basic principle of operation of the synchronous axis technology
object:
&RQILJXUDWLRQRIWHFKQRORJ\REMHFWV

7HFKQRORJ\REMHFW
ZLWKSRVLWLRQYDOXH
/HDGLQJYDOXH

7HFKQRORJ\REMHFW
6\QFKURQRXVD[LV
6\QFKURQRXVRSHUDWLRQIXQFWLRQ
3RVLWLRQ
VHWSRLQW

3RVLWLRQ
VHWSRLQW

0RWLRQ&RQWURO
LQVWUXFWLRQV


([WUDSRODWLRQ

$FWXDOSRVLWLRQ

8VHUSURJUDP

ದ

3RVLWLRQ
FRQWUROOHU

$FWXDOSRVLWLRQ

6SHHGVHWSRLQW

6WDWXVHYDOXDWLRQ

&RPPXQLFDWLRQ

&RPPXQLFDWLRQ

352),1(7

6,1$0,&6

1866

6,1$0,&6

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Synchronous operation phases
By means of synchronous operation, a following axis can be linked to a leading axis and move
synchronously with it.
The synchronous operation proceeds in the following phases:
● Pending synchronous operation (S7-1500T)
The following axis waits for the start conditions of the synchronizing motion to be met.
● Synchronization
The following axis is synchronized to the leading value.
● Synchronous motion
The following axis follows the position of the leading axis according to the synchronous
operation function.
● Synchronous operation override
Active synchronous operation is overridden by motion jobs (e.g. "MC_Halt") to the following
axis.
Different dynamic limits are in effect in the phases, as described in the sections "Dynamic limits
in gearing (Página 1886)" and "Dynamic limits in camming (Página 1900)".
Avoid homing the leading axis during an active synchronous operation. Homing the leading
axis during synchronous operation corresponds to a setpoint jump on the following axis. The
following axis compensates for the jump according to the synchronous operation function and
limited only to the maximum speed of the drive.
Nota
The leading values and following values are coupled without conversion in the respective
configured user unit. If, for example, a linear leading axis moves by 10 mm, a rotary following
axis moves by 10° with a gear ratio of 1:1.

Cam technology object
The cam technology object defines a transfer function y = f(x). The dependency of an output
value on an input value is described in this transfer function in a unit-neutral manner. A cam
technology object can be used multiple times.
You can find an overview of the functions of the cam technology object in the Functions
(Página 1863) section.
You define the function y = f(x) in the configuration of the technology object (Página 1938) using
interpolation points and/or segments. Ranges between interpolation points and segments are
interpolated using the Motion Control instruction "MC_InterpolateCam". The settings can be
changed/redefined during runtime of the user program with the technology data block
according to the appendix "Tags of the cam technology object (Página 2045)".
I[

[

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1867

Control de movimiento
6.1 Using S7-1500 Motion Control
An interpolated cam can be applied as a synchronous operation function for camming
(Página 1889).
The figure below shows the basic operating principle of the cam technology object:

1868

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

7HFKQRORJ\REMHFW
&DP
\ I [

8VHUSURJUDP
0RWLRQ&RQWURO
LQVWUXFWLRQV

,QWHUSRODWLRQ

1R [ \

\



6WDWXVHYDOXDWLRQ

,QWHUSRODWLRQ
SRLQWV
VHJPHQWV

[

&RQILJXUDWLRQRIWHFKQRORJ\REMHFWV

7HFKQRORJ\REMHFW
6\QFKURQRXVD[LV

7HFKQRORJ\REMHFW
ZLWKSRVLWLRQYDOXH
/HDGLQJYDOXH

6\QFKURQRXVRSHUDWLRQIXQFWLRQ

3RVLWLRQ
VHWSRLQW

3RVLWLRQ
VHWSRLQW



([WUDSRODWLRQ

3RVLWLRQ
FRQWUROOHU

ದ

$FWXDOSRVLWLRQ

$FWXDOSRVLWLRQ

8VHUSURJUDP
0RWLRQ&RQWURO
LQVWUXFWLRQV
6WDWXVHYDOXDWLRQ

6SHHGVHWSRLQW

&RPPXQLFDWLRQ

&RPPXQLFDWLRQ

352),1(7

6,1$0,&6

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

6,1$0,&6

1869

Control de movimiento
6.1 Using S7-1500 Motion Control

Leading value coupling
The leading value for synchronous operation is provided by a leading axis, a leading axis proxy
(only S7‑1500T) or an external encoder (only S7‑1500T). The leading value is specified and
coupled in the user program with the call of the corresponding Motion Control instruction for
synchronous operation. The leading value is switched when you call the Motion Control
instruction again specifying a different leading axis.
The following rules apply to the leading value coupling:
● A leading axis, a leading axis proxy (only S7‑1500T) or an external encoder (only S7-1500T)
can output the leading value for multiple following axes.
● The synchronous axis can be interconnected with different leading values. All
interconnections required during operation must be set up during configuration of the
technology object.
● Only one leading value at a time is coupled and evaluated.

Setpoint coupling
With setpoint coupling, the position setpoint of the leading axis is used as the leading value for
synchronous operation.
The position setpoint of the following technology objects can be interconnected as the leading
value for synchronous operation:
● Positioning axis
● Synchronous axis
● Leading axis proxy (only S7-1500T)

Actual value coupling
For applications in which setpoint coupling is not possible (e.g. when using an external
encoder) or does not make sense from a technical perspective, the S7-1500T CPU additionally
offers actual value coupling for synchronous operation. With actual value coupling,
the extrapolated actual position (Página 1871) of a technology object is used as the leading
value.
The actual position of the following technology objects can used as the leading value:
● Positioning axis
● Synchronous axis
● External encoder

Leading value delay
In a cross-PLC synchronous operation (Página 1986), you define with the "Delayed" setting
whether the leading value should be delayed for a local synchronous operation.

1870

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The leading value of the following technology objects can be delayed:
● Positioning axis
● Synchronous axis
● External encoder

Extrapolation of the leading values for actual value coupling
With actual value coupling (Página 1870), delay times result from the processing of the actual
values. To compensate for these delay times, the actual value is extrapolated on the leading
value side. This means that the leading value is extrapolated based on previously known
values.
Delay times at constant velocity or at constant acceleration or deceleration can be
compensated for with the extrapolation. For technical reasons, changes of acceleration or
deceleration (jerk) during extrapolation always cause a displacement of the following axis
relative to the leading value.
The effective extrapolation time consists of a leading axis-dependent part, a configured
following axis-dependent part and, optionally, the time from the cross-PLC synchronous
operation:
● Leading axis-dependent part
The part caused by the leading axis is calculated automatically and displayed at the leading
axis in the "<TO>.Extrapolation.LeadingAxisDependentTime" tag of the technology object.
You can disable the leading axis-dependent part using the tag
"<TO>.Extrapolation.Settings.SystemDefinedExtrapolation" = 0.
● Following axis-caused part
The part caused by the leading axis is calculated automatically and displayed at the
following axis in the "<TO>.StatusPositioning.SetpointExecutionTime" tag of the
technology object. You configure the value under "Technology object > Configuration >
Extended parameters > Actual value extrapolation"
(<TO>.Extrapolation.FollowingAxisDependentTime).
● Time from the cross-PLC synchronous operation
For cross-PLC synchronous operation, the output delay of the leading value at the locally
coupled following axes is automatically taken into account. The displayed value is equal to
the leading value delay and corresponds to the delay time entered at the leading axis or at
the external encoder. You configure the delay time under "Technology object >
Configuration > Leading value settings"
(<TO>.CrossPlcSynchronousOperation.LocalLeadingValueDelayTime).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1871

Control de movimiento
6.1 Using S7-1500 Motion Control
The extrapolated actual value is evaluated with a configurable hysteresis before it is output as
the leading value. The hysteresis evaluation prevents an inversion of the leading value, which
may result from extrapolation of a noisy value.
ATENCIÓN
Machine damage
If you change the extrapolation time during user program runtime in increments that are too
large, damage to the machine may occur.
Change the extrapolation time only by a small amount.
The following diagram shows the sequence of the actual value extrapolation.

/HDGLQJD[LV
[DFWXDO



37ILOWHU

[OHDGLQJYDOXH
+\VWHUHVLV

)ROORZLQJD[LV

'LIIHUHQWLDWLRQ
G[GW



YOHDGLQJ
YDOXH

&URVV
3/&

YDFWXDO
37ILOWHU

7ROHUDQFHEDQG

1)

Actual position value

2)

Actual velocity value

3)

Actual position filters T1 (<TO>.Extrapolation.PositionFilter.T1) and T2 (<TO>.Extrapolation.PositionFilter.T2)

4)

Actual velocity filters T1 (<TO>.Extrapolation.VelocityFilter.T1) and T2 (<TO>.Extrapolation.VelocityFilter.T2)

5)

Tolerance band width for velocity (<TO>.Extrapolation.VelocityTolerance.Range)

6)

Extrapolation time component caused by the leading axis (<TO>.Extrapolation.LeadingAxisDependentTime)

7)

Extrapolation time component caused by the following axis (<TO>.Extrapolation.FollowingAxisDependentTime)

8)

Portion of the extrapolation time from cross-PLC synchronous operation (<TO>.CrossPlcSynchronousOperation.Lo‐
calLeadingValueDelayTime)

9)

Hysteresis value in the configured unit of length (<TO>.Extrapolation.Hysteresis.Value)

10)

Extrapolated position value

11)

Differentiation of the extrapolated leading value position

12)

Extrapolated velocity leading value depending on the switch position:
● Leading value velocity from filtered actual velocity ("<TO>.Extrapolation.Settings.ExtrapolatedVelocityMode" = 0)
● Leading value velocity from differentiation of the extrapolated leading value position
("<TO>.Extrapolation.Settings.ExtrapolatedVelocityMode" = 1)

1872

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Filtering the actual values
Noisy encoder signals lead to high velocity step changes, which also affect the extrapolation.
These step changes can be reduced or compensated for by using suitable filter settings. The
actual position filter is a PT2 filter. The velocity filter is a PT2 filter with configurable tolerance
bandwidth.
The actual position value is first blended by the actual position filter. The actual velocity value
is blended by the velocity filter and further "stabilized" by the tolerance band. The filtered actual
position is then extrapolated taking into account the filtered velocity.
The leading value velocity results from the differentiation of the extrapolated leading value
position. The filtered actual velocity can optionally be used as leading value velocity directly and
without extrapolation ("<TO>.Extrapolation.Settings.ExtrapolatedVelocityMode" = 0).
Recommended settings.
Set the total of the time constants T1 and T2 of the position filter significantly smaller than the
time constants T1 and T2 of the velocity filter.

Tolerance band
The tolerance band acts on the filtered velocity value in the interpolation cycle. The position of
the tolerance band is automatically shifted in the direction of the velocity value as soon as it
changes in one direction by more than half of the tolerance band from the last output value. A
new output value is simultaneously formed with the shift of the tolerance band. This
corresponds to the filtered velocity value minus half the tolerance band. As long as the velocity
value remains within the tolerance band, no new output value is formed.
Y


W

①

Tolerance band
Filtered velocity before tolerance band
Filtered velocity according to tolerance band

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1873

Control de movimiento
6.1 Using S7-1500 Motion Control

Hysteresis
The hysteresis acts on the filtered extrapolated position value in the interpolation cycle. A
change of direction only takes effect when the position value changes in the direction opposite
at least by the hysteresis value. The hysteresis/reversal tolerance prevents undesired
reversing of the leading value on position reversal within the tolerance band.
[



W

①

Hysteresis/reversal tolerance
Extrapolated position before hysteresis/reversal tolerance
Extrapolated position after hysteresis/reversal tolerance

Non position controlled operation in synchronous operation
Synchronous operation with setpoint coupling
A following axis is set into position-controlled operation with the start of a synchronous
operation job. If the leading axis is in non-position-controlled operation at the start of the
synchronous operation, the synchronous operation job remains waiting. Synchronization is
started only after position control has been activated and the start position of the
synchronization has been reached.
Nota
If the leading axis is set to the non-position-controlled mode during active synchronization, your
setpoint is then set to zero. A setpoint step change is obtained as a result of coupling the
setpoint of following axis. The setpoint step change is compensated according to the constant
function. The only limiting factor is the maximum speed of the drive.

1874

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Synchronous operation with actual value coupling (S7-1500T)
A following axis is set into position-controlled operation with the start of a synchronous
operation job. If the leading axis is in non-position-controlled operation at the start of the
synchronous operation and the actual values are valid, synchronization is started.
If the leading axis is set to the non-position-controlled mode during active synchronization, the
synchronization remains active.

Tags: Leading value coupling
The following technology object tags are relevant for the actual value extrapolation:
Configuration
Tag

Description

<TO>.CrossPlcSynchronousOperation.Loca‐
lLeadingValueDelayTime

(For cross-PLC synchronous operation)

<TO>.Extrapolation.LeadingAxisDependentTi‐
me

(for the leading axis)

The delay time of leading value output to the local following axes
Leading axis dependent portion of the extrapolation time, which results
from Ti, Tipo, and TFilter.

<TO>.Extrapolation.FollowingAxisDependentTi‐ (for the leading axis)
me
Following-axis dependent portion of the extrapolation time
Enter the value from the "<TO>.StatusPositioning.SetpointExecutionTi‐
me" tag of the following axis (unchanged or compensated with user-spe‐
cific times).
<TO>.Extrapolation.Settings.SystemDefinedEx‐ Effectiveness of the leading axis portion of the extrapolation time
trapolation
(<TO>.Extrapolation.LeadingAxisDependentTime)

<TO>.Extrapolation.Settings.ExtrapolatedVelo‐
cityMode

0

Not effective

1

Effective

0

"FilteredVelocity"
Leading value velocity from filtered actual velocity

1

"VelocityByDifferentiation"
Leading value velocity from differentiation of the extrapolated
leading value position

<TO>.Extrapolation.PositionFilter.T1

Position filter time constant T1

<TO>.Extrapolation.PositionFilter.T2

Position filter time constant T2

<TO>.Extrapolation.VelocityFilter.T1

Velocity filter time constant T1

<TO>.Extrapolation.VelocityFilter.T2

Velocity filter time constant T2

<TO>.Extrapolation.VelocityTolerance.Range

Tolerance band width for velocity

<TO>.Extrapolation.Hysteresis.Value

Hysteresis value (in the configured unit of length)

Status indicators
Tag

Description

<TO>.StatusPositioning.SetpointExecutionTime Setpoint execution time of the axis
(Results from TIpo, Tvtc or 1/kv, TSend and TO of the axis)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1875

Control de movimiento
6.1 Using S7-1500 Motion Control

Simulate synchronous operation
An active synchronous operation connection is triggered when access enables are removed or
four motion jobs on a following axis. By simulating synchronous operation, you keep the
synchronous operation active without overriding the synchronous operation relationship.
With the "MC_SynchronizedMotionSimulation" Motion Control instruction, you can simulate an
active synchronous operation in simulation. The leading axis should be stopped at this time.
The synchronized motion simulation only affects the synchronized motion of the following axis.
Setpoint changes from the synchronous operation are no longer taken into consideration at the
axis and no longer forwarded to the drive. The setpoint output to the drive continues to come
from the possibly superimposed motions of the following axis. The same applies to single axis
commands during the synchronous operation simulation.
Start a "MC_SynchronizedMotionSimulation" job only if the following axis is in synchronous
operation. The status "Synchronous" is then set ("<TO>.StatusWord.X22" = TRUE). If the
following axis is not or not yet in synchronous operation, the instruction is aborted with error.
The synchronous operation remains active in simulation, including the motions through single
axis jobs or with disabling the leading and/or following axis, e.g. by opening a protective door.
The following axis does not have to be synchronized again after the synchronized motion
simulation has been completed. The synchronous operation remains in "synchronous" status.
When the simulation is ended, the setpoints of the synchronous operation are effective
immediately at the axis. Therefore, make sure that the setpoints of the following axis
correspond to the setpoints from the synchronous operation relationship when simulation is
ended.

Tags: Synchronous operation is being simulated
The following tags of the technology object are relevant for simulation:
Status indicators
Tag

Description

<TO>.StatusSynchronizedMotion.Status‐
Word.X3 (InSimulation)

Simulation of synchronous operation
FALSE

Not simulated

TRUE

Simulated

Additive leading value
In addition to the active leading value on a following axis, you can also specify an additive
leading value. You therefore have the possibility on the following axis to overlap the leading
value from the application. With the "MC_LeadingValueAdditive" Motion Control instruction, an
additive leading value becomes effective directly and without dynamic limitation at the following
axis. Value changes take effect directly. The additive leading value is composed of the position,
the velocity and the acceleration.
The following figure shows the general influence of the additive leading value on the following
axis:

1876

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

/HDGLQJ9DOXH

0&B/HDGLQJ9DOXH$GGLWLYH


(IIHFWLYH
/HDGLQJ9DOXH

0&B*HDUOQ0&B*HDU,Q3RV
0&B&DPOQ

The leading axis is selected with the input parameter "Master" at the synchronous operation
function. The following axis, on which the additive leading value acts, is defined by the input
parameter "Axis" from the "MC_LeadingValueAdditive" job.
The effect of a "MC_LeadingValueAdditive" job depends on the status of the synchronous
operation:
Status of synchronous operation

Effect on:

Not active or pending

● Start position of synchronization
● Following axis dynamic response

Synchronization

● Synchronous position
● Phase position
● Following axis dynamic response

Synchronous motion

● Phase position
● Following axis dynamic response

With a leading value switchover, the additive leading value still remains effective.
A "MC_LeadingValueAdditive" job can be started independently of the synchronous operation
job. Only one "MC_LeadingValueAdditive" job can be active on a following axis.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1877

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags: Additive leading value
The following technology object tags are relevant for the additive leading value:
Status indicators
Tag

Description

<TO>.StatusSynchronizedMotion.Status‐
Word.X4 (LeadingValueAdditiveCommand)

Additive leading value via "MC_LeadingValueAdditive"

<TO>.StatusSynchronizedMotion.EffectiveLea‐
dingValue.Position

Effective position of the leading value of the synchronous operation func‐
tion

<TO>.StatusSynchronizedMotion.EffectiveLea‐
dingValue.Velocity

Effective velocity of the leading value of the synchronous operation func‐
tion

<TO>.StatusSynchronizedMotion.EffectiveLea‐
dingValue.Acceleration

Effective acceleration of the leading value of the synchronous operation
function

6.1.4.3

Gearing

Gearing with "MC_GearIn"
During gearing, the position of the following axis results from the position of the leading axis
multiplied by the gear ratio. You specify the gear ratio as a ratio of two integers. The result is a
linear synchronous operation function.
Synchronous travel with the Motion Control instruction "MC_GearIn" begins after
synchronization when the following axis has reached the velocity and acceleration of the
leading axis, taking into account the gear ratio.

Synchronization
Synchronization establishes the relationship between the leading axis and following axis.
Synchronization begins with the start of an "MC_GearIn" job.
For more detailed information on synchronization, refer to section "Synchronization with
"MC_GearIn" (Página 1882)".

Synchronous motion
When a synchronous axis is synchronized to a leading value, the "Synchronous" status is
indicated by parameter "MC_GearIn.InGear" = TRUE as well as in the "<TO>.StatusWord.X22
(Synchronous)" tag of the technology object. The following axis follows the dynamics of the
leading axis according to the gear ratio.
The transmission behavior during gearing is expressed by a linear relationship between the
leading value and the following value.

1878

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
)ROORZLQJYDOXH

/HDGLQJYDOXH


Slope of line/transmission ratio
Gear ratio = "MC_GearIn.RatioNumerator"/"MC_GearIn.RatioDenominator"

①

Synchronization
Position starting from which the leading and following axes move synchronously

The following value is calculated according to the following function:
Position of following axis (following value) = Position ① of following axis + gear ratio × (Position
of leading axis - Position ① of leading axis)

Direction
The numerator of the gear ratio is specified as positive or negative. This yields the following
behavior:
● Positive gear ratio:
The leading and following axes move in the same direction.
● Negative gear ratio:
The following axis moves in the opposite direction to the leading axis.

Consulte también
Tags: Gearing (Página 1888)
Dynamic limits in gearing (Página 1886)

Gearing with "MC_GearInPos" with specified synchronous position
During gearing, the position of the following axis results from the position of the leading axis
multiplied by the gear ratio. You specify the gear ratio as a ratio of two integers. The result is a
linear synchronous operation function.
Synchronous travel with the Motion Control instruction "MC_GearInPos" begins after
synchronization.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1879

Control de movimiento
6.1 Using S7-1500 Motion Control

Synchronization
Synchronization establishes the relationship between the leading axis and following axis. The
following options are available for this:
Synchronization mode

Description

Synchronization in advance

Synchronization begins in such a way that the leading and
following axis are synchronous when the synchronous posi‐
tions are reached.

● Using dynamic parameters
● Using leading value distance
Subsequent synchronization
● Using leading value distance

Synchronization begins as soon as the leading value has
reached the synchronous position of the leading axis.

The synchronous positions represent the relationship of the two axes to one another. The start
of movement of the following axis is defined depending on the selected synchronization mode.
You can find more detailed information on synchronization in the following sections:
● Synchronization in advance with "MC_GearInPos" using dynamic parameters
(Página 1882)
● Synchronization in advance with "MC_GearInPos" using leading value distance
(Página 1884)
● Subsequent synchronization with "MC_GearInPos" using leading value distance
(Página 1885)

Synchronous motion
Synchronous operation is reached after the synchronization. The "Synchronous" status is
indicated by parameter "MC_GearInPos.InSync" = TRUE as well as in the
"<TO>.StatusWord.X22 (Synchronous)" tag of the technology object. The following axis
follows the position of the leading axis according to the synchronous positions and the gear
ratio.
The transmission behavior during gearing is expressed by a linear relationship between the
leading value and the following value.

1880

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
)ROORZLQJYDOXH

6\QFKURQRXVSRVLWLRQ
)ROORZLQJD[LV

/HDGLQJYDOXH




6\QFKURQRXVSRVLWLRQ
/HDGLQJD[LV

Slope of line/transmission ratio
Gear ratio = "MC_GearInPos.RatioNumerator"/"MC_GearInPos.RatioDenomina‐
tor"
Synchronization in advance

①
②

Subsequent synchronization
Leading value distance with synchronization in advance
Leading value distance with subsequent synchronization

The following value is calculated according to the following function:
Position of following axis (following value) = Synchronous position of following axis + gear ratio
× (Position of leading axis - Synchronous position of leading axis)

Direction
The numerator of the gear ratio is specified as positive or negative. This yields the following
behavior:
● Positive gear ratio:
The leading and following axes move in the same direction.
● Negative gear ratio:
The following axis moves in the opposite direction to the leading axis.

Consulte también
Dynamic limits in gearing (Página 1886)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1881

Control de movimiento
6.1 Using S7-1500 Motion Control

Synchronization
Synchronization with "MC_GearIn"
For synchronization using the Motion Control instruction "MC_GearIn", you specify the
dynamics (acceleration, deceleration, jerk). Synchronization begins after the "MC_GearIn" job
starts. Active motion jobs are overridden.
The synchronization duration and distance are dependent on the following parameters:
● Start time of the "MC_GearIn" job
● Dynamics of the following axis at the start time
● Dynamic value settings for "MC_GearIn"
● Dynamics of the leading axis
The synchronization is indicated in the "<TO>.StatusWord.X21 (Synchronizing)" tag of the
technology object.
If the following axis has reached the velocity and the acceleration of the leading axis, taking into
account the gear ratio, the following axis is synchronized. The following axis travels
synchronously with the leading axis. The "Synchronous" status is indicated in the Motion
Control instruction with parameter "InGear" = TRUE.

Consulte también
Gearing with "MC_GearIn" (Página 1878)

Synchronization in advance with "MC_GearInPos" using dynamic parameters
For synchronization in advance using dynamic parameters with a "MC_GearInPos" job, you
specify the dynamics (velocity, acceleration, deceleration, jerk). Also specify the synchronous
positions of the leading and following axis, which define the relationship of the axes to one
another. For synchronization in advance, the synchronous position is the position starting from
which the leading and following axes are synchronous. The required travel distance
(synchronization length) is calculated by the system.
After the start of the "MC_GearInPos" job with "SyncProfileReference" = 0, a motion profile for
the following axis is calculated continuously. The motion profile is calculated based on the
following parameters:
● Specified synchronous positions of the leading and following axis at the Motion Control
instruction
● Specified dynamics of the Motion Control instruction
● Current position and dynamics of the leading and following axes
● Synchronous operation function
The calculation determines the synchronization length and thus the start position of the leading
axis for the synchronization.
The status "Waiting" is displayed at the following axis until the leading value has reached the
start position (<TO>.StatusSynchronizedMotion.WaitingFunctionState = 2).

1882

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The following axis begins to synchronize as soon as the leading value has reached the start
position. The start position of the leading axis is derived in the following way:
Start position = Synchronous position of leading axis - Synchronization length
The synchronization is indicated by parameter "MC_GearInPos.StartSync" = TRUE as well as
in the "<TO>.StatusWord.X21 (Synchronizing)" tag of the technology object. The leading value
must reverse during synchronization.
The dynamics of the following axis during synchronization is obtained from the calculated
motion profile and the current dynamics of the leading axis. Changes in the dynamics of the
leading axis during synchronization are superimposed on the calculated motion profile. This
can have the result that the configured dynamic limits at the following axis are violated. This is
displayed in the "<TO>.StatusSynchronizedMotion.StatusWord" tag.
As soon as the leading axis has reached the synchronous position, the following axis is
synchronized. The following axis travels synchronously with the leading axis. The
"Synchronous" status is indicated in the Motion Control instruction with parameter "InSync" =
TRUE.
If the leading axis is already in its synchronous position before synchronization, the following
axis must also be moved to its synchronous position. In this case, establish the synchronization
with an "MC_GearIn" job.

Consulte también
Gearing with "MC_GearInPos" with specified synchronous position (Página 1879)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1883

Control de movimiento
6.1 Using S7-1500 Motion Control

Synchronization in advance with "MC_GearInPos" using leading value distance
For synchronization in advance using the leading value distance with an "MC_GearInPos" job,
you specify the synchronization length. Also specify the synchronous positions of the leading
and following axis, which define the relationship of the axes to one another. For synchronization
in advance, the synchronous position is the position starting from which the leading and
following axes are synchronous.




/HDGLQJYDOXH

6\QFKURQRXV
SRVLWLRQ
/HDGLQJD[LV

W
)ROORZLQJYDOXH

6\QFKURQRXV
SRVLWLRQ
)ROORZLQJD[LV

W

①
②

Time when synchronization starts
Time when synchronization is complete

After the start of the "MC_GearInPos" job with "SyncProfileReference" = 1, a motion profile with
the required dynamics is calculated for the following axis depending on the specified leading
value distance. For this, the leading axis must be at least the leading value distance from the
synchronous position.
The status "Waiting" is displayed at the following axis until the leading value has reached the
start position (<TO>.StatusSynchronizedMotion.WaitingFunctionState = 2).
The following axis begins to synchronize as soon as the leading value has reached the start
position. The start position of the leading axis is derived in the following way:
Start position = Synchronous position of leading axis - Synchronization length
The synchronization is indicated by parameter "MC_GearInPos.StartSync" = TRUE as well as
in the "<TO>.StatusWord.X21 (Synchronizing)" tag of the technology object. The leading value
must reverse during synchronization.
The dynamics of the following axis during synchronization is obtained from the calculated
motion profile and the current dynamics of the leading axis. Changes in the dynamics of the
leading axis during synchronization are superimposed on the calculated motion profile in
accordance with the synchronous operation function. This can have the result that the
configured dynamic limits at the following axis are violated. This is displayed in the
"<TO>.StatusSynchronizedMotion.StatusWord" tag.

1884

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
When the leading axis has reached the synchronous position, the following axis is
synchronized. The following axis travels synchronously with the leading axis. The
"Synchronous" status is indicated in the Motion Control instruction with parameter "InSync" =
TRUE.

Consulte también
Gearing with "MC_GearInPos" with specified synchronous position (Página 1879)

Subsequent synchronization with "MC_GearInPos" using leading value distance
For subsequent synchronization using the leading value distance with an "MC_GearInPos" job,
you specify the synchronization length. Also specify the synchronous positions of the leading
and following axis, which define the relationship of the axes to one another. For synchronization
in advance, the synchronous position of the leading axis is the start position for synchronization.




/HDGLQJYDOXH

6\QFKURQRXV
SRVLWLRQ
/HDGLQJD[LV
W
)ROORZLQJYDOXH

6\QFKURQRXV
SRVLWLRQ
)ROORZLQJD[LV
W

①
②

Time when synchronization starts
Time when synchronization is complete

After the start of the "MC_GearInPos" job with "SyncProfileReference" = 3, a motion profile with
the required dynamics is calculated for the following axis depending on the specified leading
value distance.
The status "Waiting" is displayed at the following axis until the leading value has reached the
synchronous position of the leading axis
(<TO>.StatusSynchronizedMotion.WaitingFunctionState = 2).
Synchronization begins as soon as the leading value has reached the synchronous position of
the leading axis. The synchronization is indicated by parameter "MC_GearInPos.StartSync" =
TRUE as well as in the "<TO>.StatusWord.X21 (Synchronizing)" tag of the technology object.
The leading value must reverse during synchronization.
Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1885

Control de movimiento
6.1 Using S7-1500 Motion Control
The dynamics of the following axis during synchronization is obtained from the calculated
motion profile and the current dynamics of the leading axis. Changes in the dynamics of the
leading axis during synchronization are superimposed on the calculated motion profile in
accordance with the synchronous operation function. This can have the result that the
configured dynamic limits at the following axis are violated. This is displayed in the
"<TO>.StatusSynchronizedMotion.StatusWord" tag.
The position of the leading axis from which the leading axis and following axis are synchronous
is derived in the following way:
Position axes synchronous = Synchronous position of leading axis + Synchronization length
The following axis travels synchronously with the leading axis in accordance with the gear
ratios. The "Synchronous" status is indicated in the Motion Control instruction with parameter
"InSync" = TRUE.

Consulte también
Gearing with "MC_GearInPos" with specified synchronous position (Página 1879)

Dynamic limits in gearing
Dynamic limits in gearing with "MC_GearIn"
Leading axis
The dynamic limits configured for the technology object are always in effect for the leading axis.

1886

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Following axis
If a synchronous axis is operated as a following axis in synchronous operation with
"MC_GearIn", the following dynamic limits apply depending on the phase of the synchronous
operation:
● Synchronization
During the synchronizing phase, dynamic limits configured for the technology object apply
to the following axis.
● Synchronous motion
When the synchronous axis is moving synchronously to the leading axis as a following axis,
the dynamics of the following axis is limited only to the maximum speed of the drive
(<TO>.Actor.DriveParameter.MaxSpeed). The dynamics of the following axis results from
the synchronous operation function.
If the dynamic limits configured for the following axis are exceeded, this is indicated in the
"<TO>.StatusSynchronizedMotion.StatusWord" tag of the technology object. The SW limit
switches continue to be monitored with the configured dynamic limits of the following axis.
If the following axis cannot follow the leading value, this results in a following error, which is
monitored by the following error monitoring.
● Synchronous operation override
As soon as synchronous operation has been overridden, the dynamic limits configured for
the technology object apply to the following axis again. With the start of the overriding job,
the active dynamics is transitioned (smoothed) to the configured dynamic limits and the
specifications for the Motion Control instruction.

Consulte también
Gearing with "MC_GearIn" (Página 1878)

Dynamic limits in gearing with "MC_GearInPos"
Leading axis
The dynamic limits configured for the technology object are always in effect for the leading axis.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1887

Control de movimiento
6.1 Using S7-1500 Motion Control

Following axis
If a synchronous axis is operated as a following axis in synchronous operation with the Motion
Control instruction "MC_GearInPos", the following dynamic limits apply depending on the
phase of the synchronous operation:
● Pending synchronous operation
If synchronous operation is not active, the configured dynamic limits apply. If a synchronous
operation is already active, these limits are overridden by the previous synchronous
operation.
● Synchronization/synchronous motion
During synchronization/synchronous motion, the dynamics of the following axis is limited
only to the maximum speed of the drive (<TO>.Actor.DriveParameter.MaxSpeed). The
dynamics of the following axis results from the synchronous operation function.
If the dynamic limits configured for the following axis are exceeded, this is indicated in the
"<TO>.StatusSynchronizedMotion.StatusWord" tag of the technology object. The SW limit
switches continue to be monitored with the configured dynamic limits of the following axis.
If the following axis cannot follow the leading value, this results in a following error, which is
monitored by the following error monitoring.
● Synchronous operation override
As soon as synchronous operation has been overridden, the dynamic limits configured for
the technology object apply to the following axis again. With the start of the overriding job,
the active dynamics is transitioned (smoothed) to the configured dynamic limits and the
specifications for the Motion Control instruction.

Consulte también
Gearing with "MC_GearInPos" with specified synchronous position (Página 1879)

Leading value shift in gearing
With the Motion Control instructions "MC_PhasingRelative" and "MC_PhasingAbsolute", the
leading value can be shifted in gearing with "MC_GearIn" and "MC_GearInPos". The leading
value shift is executed on the following axis. The leading axis is not affected.
The leading value shift only has an effect in the "Synchronous" status. If the synchronous
operation is overridden, the leading value shift is reset to zero.

Tags: Gearing
The following technology object tags are relevant for gearing:
Status indicators
Tag

Description

<TO>.StatusSynchronizedMotion.FunctionState Indication of which synchronous operation function is active

1888

0

No synchronous operation active

1

Gearing ("MC_GearIn")

2

Gearing with specified synchronous positions ("MC_GearIn‐
Pos")

3

Camming ("MC_CamIn")

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Status indicators
Tag

Description

<TO>.StatusSynchronizedMotion.WaitingFunc‐
tionState

Indication of which synchronous operation function is waiting

<TO>.StatusSynchronizedMotion.ActualMaster

0

No synchronous operation waiting

1

Reserved

2

Gearing with specified synchronous positions waiting
("MC_GearInPos")

3

Camming waiting ("MC_CamIn")

When a synchronous operation job is started, the number of the techno‐
logy data block of the currently used leading axis is displayed.
0

Synchronous operation inactive

<TO>.StatusSynchronizedMotion.PhaseShift

Current absolute leading value shift

<TO>.StatusSynchronizedMotion.Status‐
Word.X0 (MaxVelocityExceeded)

Set to the value "TRUE" when the maximum velocity configured for the
following axis is exceeded during synchronous operation.

<TO>.StatusSynchronizedMotion.Status‐
Word.X1 (MaxAccelerationExceeded)

Set to the value "TRUE" when the maximum acceleration configured for
the following axis is exceeded during synchronous operation.

<TO>.StatusSynchronizedMotion.Status‐
Word.X2 (MaxDecelerationExceeded)

Set to the value "TRUE" when the maximum deceleration configured for
the following axis is exceeded during synchronous operation.

<TO>.StatusWord.X21 (Synchronizing)

Set to the value "TRUE" when the synchronous axis synchronizes to a
leading value.

<TO>.StatusWord.X22 (Synchronous)

Set to the value "TRUE" when the synchronous axis is synchronized and
moves synchronously to the leading axis.

<TO>.ErrorWord.X14 (SynchronousError)

Error during synchronous operation
The leading axis specified in the Motion Control instruction was not confi‐
gured as a possible leading axis.

6.1.4.4

Camming
During camming, the leading axis and following axis are coupled by a synchronous operation
function, which you specify using a cam (Página 1867).
The utilized cam can be scaled on a job-related basis and applied shifted. To use the cam for
camming, it must be interpolated (Página 1891). You interpolate the cam in your user program
with the Motion Control instruction "MC_InterpolateCam".
Synchronous travel with the Motion Control instruction "MC_CamIn" begins after
synchronization.

Synchronous position
The synchronous position of the leading axis and the corresponding position from the cam
represent the relationship of the two axes to one another. The start of movement of the following
axis is defined depending on the selected synchronization mode.
The synchronous position of the leading axis is determined by the following parameters:
● Start position of the cam (<TO_Cam>.StatusCam.StartLeadingValue)
● Scaling the leading values of the cam (MC_CamIn.MasterScaling)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1889

Control de movimiento
6.1 Using S7-1500 Motion Control
● Offset/position of the cam (MC_CamIn.MasterOffset)
● Starting point within the cam (MC_CamIn.MasterSyncPosition)
The synchronous position is calculated using the following equation:
Synchronous position = (Start position of the cam x "MasterScaling") + "MasterOffset" +
"MasterSyncPosition"

Synchronization
Synchronization establishes the relationship between the leading axis and following axis. The
following options are available for this:
Synchronization mode

Description

Synchronization in advance

Synchronization begins in such a way that the leading and
following axis are synchronous when the synchronous posi‐
tions are reached.

● Using dynamic parameters
● Using leading value distance
Subsequent synchronization
● Using leading value distance with
specific synchronous position

Synchronization begins as soon as the leading value has
reached the synchronous position of the leading axis or as
soon as the job takes effect.

● Using leading value distance with
current position as synchronous
position

You can find more detailed information on synchronization in the following sections:
● Synchronization in advance with "MC_CamIn" using dynamic parameters (Página 1896)
● Synchronization in advance with "MC_CamIn" using leading value distance (Página 1897)
● Subsequent synchronization with "MC_CamIn" using leading value distance (Página 1898)

Direct synchronization
When you set the parameter "MC_CamIn.SyncProfileReference" = 2, the status is set
synchronously directly at the current leading value position and at the current following value
position.
For more detailed information on direct synchronization, refer to section "Direct synchronous
setting with "MC_CamIn" (Página 1900)".

Synchronous motion
Synchronous operation is reached after the synchronization. The "Synchronous" status is
indicated by parameter "MC_CamIn.InSync" = TRUE as well as in the "<TO>.StatusWord.X22
(Synchronous)" tag of the technology object. The following axis follows the position of the
leading axis according to the cam profile.
The transmission behavior during camming is expressed by the cam curve:

1890

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
)ROORZLQJ
YDOXH





/HDGLQJYDOXH

6\QFKURQRXVSRVLWLRQRI
OHDGLQJD[LV

Transfer function:
Following value = f(leading value)
Synchronization in advance

①
②

Subsequent synchronization
Leading value distance with synchronization in advance
Leading value distance with subsequent synchronization

Consulte también
Interpolation of the cam (Página 1891)
Dynamic limits in gearing (Página 1886)

Interpolation of the cam
To use a cam in the user program, you must interpolate the cam after downloading to the CPU
or after adaptation of the technology object data block. The interpolation closes the gaps
between the defined interpolation points and segments of the cam. The cam is interpolated
from the minimum value in the leading value range to the maximum value. The minimum value
in the leading value range is the first defined interpolation point/start of the first segment of the
cam (<TO>.StatusCam.StartLeadingValue). The maximum value in the leading value range is
the last defined interpolation point/end of the last segment of the cam
(<TO>.StatusCam.EndLeadingValue).
You interpolate a cam disc in your user program with the Motion Control instruction
"MC_InterpolateCam". When a cam is interpolated, this is indicated by the
"MC_InterpolateCam.Done" parameter = TRUE and via the "<TO>.StatusWord.X5
(Interpolated)" tag = 1 in the technology data block.
You specify the interpolation in the configuration of the technology object (Página 1941). The
following methods are possible:
● System interpolation
● Optimization of transitions according to VDI Guideline 2143

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1891

Control de movimiento
6.1 Using S7-1500 Motion Control

System interpolation
With system interpolation, the transitions are interpolated according to the interpolation type
and the response in the boundary points of the transition segment. The following interpolation
methods are possible:
● Linear interpolation
Gaps in the cam are closed with a straight line.

Specified position (point)
Interpolated position
Resulting velocity (scaled)
Resulting acceleration
Resulting jerk

● Interpolation with cubic splines
The interpolated curve runs through the interpolation points and the segments of the curve.
After completion of interpolation, the range of the cam can be greater than before
interpolation.

1892

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Specified position (point)
Interpolated position
Resulting velocity (scaled)
Resulting acceleration (scaled)
Resulting jerk (scaled)

● Interpolation with Bézier splines
The interpolated curve runs along the interpolation points and through the segments of the
curve.
The range of the cam is not changed by interpolation.

Specified position (point)
Interpolated position
Resulting velocity (scaled)
Resulting acceleration (scaled)
Resulting jerk (scaled)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1893

Control de movimiento
6.1 Using S7-1500 Motion Control

Optimization of transitions according to VDI Guideline 2143
The transitions are specified according to the motion task and the optimization settings
according to the VDI Guideline 2143.
Note that the optimization of transitions according to VDI guideline 2143 directly occupies
segments in the technology object data block, in contrast to system interpolation. This
optimization type is thus not possible via "MC_InterpolateCam" during runtime.

Scaling and offset of the cam
The scaling and shifting of the cam can be specified for camming in the Motion Control
instruction "MC_CamIn". The configured cam is not changed by calling "MC_CamIn".
The following figure shows the basic sequence for scaling/shifting the cam:
/HDGLQJYDOXHVKLIW
3RVLWLRQ
OHDGLQJD[LV

ದ

)ROORZLQJYDOXHVKLIW

&DP







/HDGLQJYDOXHVFDOLQJ

)ROORZLQJYDOXHVFDOLQJ

3RVLWLRQ
IROORZLQJD[LV

Position following axis = f[(Position leading axis - Leading value shift) / Leading value scaling]
× Following value scaling + Following value shift

1894

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Cyclic and non-cyclic application of the cam
The "MC_CamIn.ApplicationMode" parameter can be used to set whether or not the cam is to
be applied cyclically for synchronous operation:
● Not cyclic
The cam is run exactly once. When the cam is run in the positive direction, synchronous
operation is ended when the end point of the cam is reached. When the cam is run in the
negative direction, synchronous operation is ended when the starting point of the cam is
reached. To prevent step changes in the dynamic values, the velocity of the following axis
must be zero at the starting and end points of the cam.
)ROORZLQJYDOXH

/HDGLQJYDOXH

● Cyclic
The cam is run cyclically. When the cam is run in the positive direction, the cam is repeated
from the starting point when the end point of the cam is reached. When the cam is run in the
negative direction, the cam is repeated from the end point when the starting point of the cam
is reached. To prevent step changes in the dynamic values, the starting and end points of
the cam must match and the velocity in the start and end point must be consistent.
)ROORZLQJYDOXH

/HDGLQJYDOXH

● Cyclic appending
The cam is run cyclically. When the cam is run in the positive direction, the end point of the
cam is used as the starting point for the next run. When the cam is run in the negative
direction, the starting point of the cam is used as the starting point for the next run. The
position difference between the starting and end points on the following value side is added
up. To prevent step changes in the dynamic values, the velocity in the boundary points must
be continuous.
)ROORZLQJYDOXH

/HDGLQJYDOXH

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1895

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Configuration of profile - System interpolation (Página 1956)

Synchronization
Synchronization in advance with "MC_CamIn" using dynamic parameters
For synchronization using dynamic parameters, you specify the dynamics (velocity,
acceleration, deceleration, jerk). Specify also the synchronous position of the leading axes. For
synchronization in advance, the synchronous position of the leading axis is the position starting
from which the leading and following axes are synchronous. The required travel distance
(synchronization length) is calculated by the system.
After the start of the "MC_CamIn" job with "SyncProfileReference" = 0, a motion profile for the
following axis is calculated continuously. The motion profile is calculated based on the following
parameters:
● Specified synchronous position of the Motion Control instruction
● Specified dynamics of the Motion Control instruction
● Current position and dynamics of the leading and following axes
● Synchronous operation specified via cam
The calculation determines the synchronization length and thus the start position of the leading
axis for the synchronization.
The status "Waiting" is displayed at the following axis until the leading value has reached the
start position (<TO>.StatusSynchronizedMotion.WaitingFunctionState = 3).
The following axis begins to synchronize as soon as the leading value has reached the start
position. The start position of the leading axis is derived in the following way:
Start position = Synchronous position of leading axis - Synchronization length
The synchronization is indicated by parameter "MC_CamIn.StartSync" = TRUE as well as in
the "<TO>.StatusWord.X21 (Synchronizing)" tag of the technology object. The leading value
must reverse during synchronization.
The dynamics of the following axis during synchronization is obtained from the calculated
motion profile and the current dynamics of the leading axis. Changes in the dynamics of the
leading axis during synchronization are superimposed on the calculated motion profile. This
can have the result that the configured dynamic limits at the following axis are violated. This is
displayed in the "<TO>.StatusSynchronizedMotion.StatusWord" tag.
When the leading axis reaches the synchronous position, the following axis is synchronized.
The following axis travels synchronously with the leading axis. The "Synchronous" status is
indicated in the Motion Control instruction with parameter "InSync" = TRUE.
If only the leading axis is in its synchronous position when the "MC_CamIn" job is started, the
leading axis must first cross the start position to start synchronization.

Consulte también
Camming (Página 1889)

1896

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Synchronization in advance with "MC_CamIn" using leading value distance
For synchronization in advance using the leading value distance with an "MC_CamIn" job, you
specify the synchronization length. Specify also the synchronous position of the leading axis.
For synchronization in advance, the synchronous position of the leading axis is the position
starting from which the leading and following axes are synchronous.




)ROORZLQJYDOXH
&DP

/HDGLQJYDOXH
/HDGLQJYDOXH

6\QFKURQRXV
SRVLWLRQ
/HDGLQJD[LV

W
)ROORZLQJYDOXH

W

①
②

Time when synchronization starts
Time when synchronization is complete

After the start of the "MC_CamIn" job with "SyncProfileReference" = 1, a motion profile with the
required dynamics is calculated for the following axis depending on the specified leading value
distance. For this, the leading axis must be at least the leading value distance from the
synchronous position.
The following axis begins to synchronize as soon as the leading value has reached the start
position. The start position of the leading axis is derived in the following way:
Start position = Synchronous position of leading axis - Synchronization length
The status "Waiting" is displayed at the following axis until the leading value has reached the
start position (<TO>.StatusSynchronizedMotion.WaitingFunctionState = 3).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1897

Control de movimiento
6.1 Using S7-1500 Motion Control
The synchronization is indicated by parameter "MC_CamIn.StartSync" = TRUE as well as in
the "<TO>.StatusWord.X21 (Synchronizing)" tag of the technology object. The leading value
must reverse during synchronization.
The dynamics of the following axis during synchronization is obtained from the calculated
motion profile and the current dynamics of the leading axis. Changes in the dynamics of the
leading axis during synchronization are superimposed on the calculated motion profile in
accordance with the synchronous operation function. This can have the result that the
configured dynamic limits at the following axis are violated. This is displayed in the
"<TO>.StatusSynchronizedMotion.StatusWord" tag.
When the leading axis has reached the synchronous position, the following axis is
synchronized. The following axis travels synchronously with the leading axis. The
"Synchronous" status is indicated in the Motion Control instruction with parameter "InSync" =
TRUE.

Consulte también
Camming (Página 1889)

Subsequent synchronization with "MC_CamIn" using leading value distance
For subsequent synchronization using the leading value distance with an "MC_CamIn" job, you
specify the synchronization length. Specify also the synchronous position of the leading axis.
You have the following options:
● Define a specific synchronous position ("SyncProfileReference" = 3)
● Use the current position of the leading axis as synchronous position
("SyncProfileReference" = 4)
The values must each be within the definition of the cam.
For synchronization in advance, the synchronous position of the leading axis is the start
position for synchronization.

1898

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control




)ROORZLQJYDOXH
&DP

/HDGLQJYDOXH
/HDGLQJYDOXH

6\QFKURQRXV
SRVLWLRQ
/HDGLQJD[LV

W
)ROORZLQJYDOXH

W

①
②

Time when synchronization starts
Time when synchronization is complete

After the start of the "MC_CamIn" job, a motion profile with the required dynamics is calculated
for the following axis depending on the specified leading value distance.
The status "Waiting" is displayed at the following axis until the leading value has reached the
synchronous position of the leading axis
(<TO>.StatusSynchronizedMotion.WaitingFunctionState = 3).
Synchronization begins as soon as the leading value has reached the synchronous position of
the leading axis ("SyncProfileReference" = 3) or as soon as the "MC_CamIn" job takes effect
("SyncProfileReference" = 4). The synchronization is indicated by parameter
"MC_CamIn.StartSync" = TRUE as well as in the "<TO>.StatusWord.X21 (Synchronizing)" tag
of the technology object. The leading value must reverse during synchronization.
The dynamics of the following axis during synchronization is obtained from the calculated
motion profile and the current dynamics of the leading axis. Changes in the dynamics of the
leading axis during synchronization are superimposed on the calculated motion profile in
accordance with the synchronous operation function. This can have the result that the
configured dynamic limits at the following axis are violated. This is displayed in the
"<TO>.StatusSynchronizedMotion.StatusWord" tag.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1899

Control de movimiento
6.1 Using S7-1500 Motion Control
The position of the leading axis from which the leading axis and following axis are synchronous
is derived in the following way:
Position axes synchronous = Synchronous position of leading axis + Synchronization length
The following axis travels synchronously with the leading axis in accordance with the cam
profile. The "Synchronous" status is indicated in the Motion Control instruction with parameter
"InSync" = TRUE.

Consulte también
Camming (Página 1889)

Direct synchronous setting with "MC_CamIn"
This type of synchronization is mainly suitable for synchronizing at a standstill.
After the "MC_CamIn" job has started with "SyncProfileReference" = 2, the status
"Synchronous" is set directly at the current leading value position and at the current following
value position. The "Synchronous" status is indicated in the Motion Control instruction with
parameter "InSync" = TRUE.
The synchronous position specified in the "MasterSyncPosition" parameter in the cam is
assigned to the position setpoint of the leading axis in the leading value range and to the
position setpoint of the following axis in the following value range. The cam is offset accordingly.
The current offset results from the cam and is displayed at the
"<TO>.StatusSynchronizedMotion.MasterOffset" and
"<TO>.StatusSynchronizedMotion.SlaveOffset" tags of the technology object.

Additional information
For more information on direct synchronous setting, refer to the FAQ entry 109758886 (https://
support.industry.siemens.com/cs/ww/en/view/109758886) in the Siemens Industry Online
Support.

Consulte también
Camming (Página 1889)

Dynamic limits in camming
Leading axis
The dynamic limits configured for the technology object are always in effect for the leading axis.

1900

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Following axis
If a synchronous axis is operated as a following axis in camming with the Motion Control
instruction "MC_CamIn", the following dynamic limits apply depending on the phase of the
synchronous operation:
● Pending synchronous operation
If synchronous operation is not active, the configured dynamic limits apply. If a synchronous
operation is already active, these limits are overridden by the previous synchronous
operation.
● Synchronization/synchronous motion
During synchronization/synchronous motion, the dynamics of the following axis is limited
only to the maximum speed of the drive (<TO>.Actor.DriveParameter.MaxSpeed). The
dynamics of the following axis results from the synchronous operation function.
If the dynamic limits configured for the following axis are exceeded, this is indicated in the
"<TO>.StatusSynchronizedMotion.StatusWord" tag of the technology object. The SW limit
switches continue to be monitored with the configured dynamic limits of the following axis.
If the following axis cannot follow the leading value, this results in a following error, which is
monitored by the following error monitoring.
● Synchronous operation override
As soon as synchronous operation has been overridden, the dynamic limits configured for
the technology object apply to the following axis again. With the start of the overriding job,
the active dynamics is transitioned (smoothed) to the configured dynamic limits and the
specifications for the Motion Control instruction.

Consulte también
Camming (Página 1889)

Tags: Camming
The following technology object tags are relevant for camming:
Status indicators
Tag

Description

<TO>.StatusSynchronizedMotion.FunctionState Indication of which synchronous operation function is active

<TO>.StatusSynchronizedMotion.WaitingFunc‐
tionState

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

0

No synchronous operation active

1

Gearing ("MC_GearIn")

2

Gearing with specified synchronous positions ("MC_GearIn‐
Pos")

3

Camming ("MC_CamIn")

Indication of which synchronous operation function is waiting
0

No synchronous operation waiting

1

Reserved

2

Gearing with specified synchronous positions waiting
("MC_GearInPos")

3

Camming waiting ("MC_CamIn")

1901

Control de movimiento
6.1 Using S7-1500 Motion Control
Status indicators
Tag

Description

<TO>.StatusSynchronizedMotion.ActualMaster

When a synchronous operation job is started, the number of the techno‐
logy data block of the currently used leading axis is displayed.
0

Synchronous operation inactive

<TO>.StatusSynchronizedMotion.CurrentCam

Cam that is currently being used for camming

<TO>.StatusSynchronizedMotion.MasterOffset

Current shift of the leading value range of the cam

<TO>.StatusSynchronizedMotion.MasterSca‐
ling

Current scaling of the leading value range of the cam

<TO>.StatusSynchronizedMotion.SlaveOffset

Current shift of the following value range of the cam

<TO>.StatusSynchronizedMotion.SlaveScaling

Current scaling of the following value range of the cam

<TO>.StatusSynchronizedMotion.Status‐
Word.X0 (MaxVelocityExceeded)

Set to the value "TRUE" when the maximum velocity configured for the
following axis is exceeded during synchronous operation.

<TO>.StatusSynchronizedMotion.Status‐
Word.X1 (MaxAccelerationExceeded)

Set to the value "TRUE" when the maximum acceleration configured for
the following axis is exceeded during synchronous operation.

<TO>.StatusSynchronizedMotion.Status‐
Word.X2 (MaxDecelerationExceeded)

Set to the value "TRUE" when the maximum deceleration configured for
the following axis is exceeded during synchronous operation.

<TO>.StatusWord.X21 (Synchronizing)

Set to the value "TRUE" when the synchronous axis synchronizes to a
leading value.

<TO>.StatusWord.X22 (Synchronous)

Set to the value "TRUE" when the synchronous axis is synchronized and
moves synchronously to the leading axis.

<TO>.ErrorWord.X14 (SynchronousError)

Error during synchronous operation
The leading axis specified in the Motion Control instruction was not confi‐
gured as a possible leading axis.

6.1.4.5

Configuring

Configuring the synchronous axis technology object
Configuration - Basic Parameters
Configure the basic properties of the technology object in the "Basic Parameters" configuration
window.

Name
Define the name of the synchronous axis in this field. The technology object is listed under this
name in the project tree. The tags of the technology object can be used in the user program
under this name.

Axis type
If you want to use the axis in the CPU exclusively as a virtual leading axis for synchronization,
for example, select the "Virtual axis" check box. The configuration of a drive and encoder
connection is not relevant.
In this selection, configure whether the axis should perform linear or rotary motions.

1902

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Units of measure
In the drop-down list, select the desired units of measure for the position, velocity, torque and
force of the axis.
If you wish to use six decimal places in the selected unit, select the check box "Use position
values with higher resolution".

Modulo
Select the "Enable modulo" check box if you want to use a recurring system of units for the axis
(e.g. 0° to 360° for an axis of the "rotary" axis type).
● Modulo start value
In this field, define the position at which the modulo range should begin (e.g. 0° for an axis
of the "rotary" axis type).
● Modulo length
In this field, define the length of the modulo range (e.g. 360° for an axis of the "rotary" axis
type).

Simulation
If you want to move a real axis in the simulation mode, select the "Activate simulation" check
box.
In simulation mode, speed, positioning and synchronous axes can be simulated in the CPU
without connected drives and encoders. Simulation mode is possible as of Technology Version
V3.0 even without a configured drive and encoder connection.
For simulation mode without hardware connected to the CPU, you can influence the startup
time of the CPU via the "Configuration time for central and distributed I/Os" parameter. You can
find the parameter in the CPU properties in the "Startup" area navigation.

Hardware interface
Configuration - Drive
In the "Drive" configuration window, configure which drive type and which drive you want to use.

Drive type
In the drop-down list, select whether you want to deploy a PROFIdrive drive or a drive with an
analog drive connection.
PROFIdrive drives are connected to the controller by means of a digital communication system
(PROFINET or PROFIBUS). The communication is performed via PROFIdrive telegrams.
Drives with an analog drive connection receive the speed setpoint via an analog output signal
(e.g. from -10 V to +10 V) from the CPU.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1903

Control de movimiento
6.1 Using S7-1500 Motion Control

Drive type: PROFIdrive
Data connection
In the drop-down list, select whether the data connection is to be made directly with the drive
device or via an editable data block in the user program.
Drive/data block
In the "Drive" field, select an already configured PROFIdrive drive/slot. When you have
selected a PROFIdrive drive, you can configure the PROFIdrive drive using the "Device
configuration" and "Drive configuration" buttons.
If no PROFIdrive drive is available for selection, switch to the device configuration, and add a
PROFIdrive drive in the network view. Switch to drive configuration to configure the drive.
Nota
Option "Show all modules"
If a PROFIdrive that has already been configured is not available for selection, use the option
"Show all modules" to display all reachable modules.
When you select the option "Show all modules", only the address range for each of the
displayed modules is checked. If the address range of the module is large enough for the
selected PROFIdrive frame, you can select the module. For this reason, make sure that you
select a PROFIdrive drive.
If you have selected "Data block" under the data connection, select a previously created data
block which contains a tag structure of the data type "PD_TELx" ("x" stands for the telegram
number to be used).

Drive type: Analog drive connection
Analog output
In the "Analog output" field, select the PLC tag of the analog output via which the drive is to be
controlled.
In order to be able to select an output, you first need to add an analog output module in the
device configuration and define the PLC tag name for the analog output.
Activating enable output
Select the "Activate enable output" check box if the drive supports an enable.
Select the PLC tag of the digital output for the drive enable in the corresponding field. With the
enable output, the speed controller in the drive is enabled, or disabled.
In order to be able to select an enable output, a digital output module must be added in the
device configuration and the PLC tag name must be defined for the digital output.
Nota
If you do not use an enable output, the drive cannot be immediately disabled on the part of the
system due to error reactions or monitoring functions. A controlled stop of the drive is not
guaranteed.

1904

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Enable ready input
Select the "Enable ready input" check box if the drive can signal its readiness.
Select the PLC tag of the digital input via which the drive is to signal its operational readiness
to the technology object in the corresponding field. The power module is switched on and the
analog speed setpoint input is enabled.
In order to be able to select a ready input, you first need to add a digital input module in the
device configuration and define the PLC tag name for the digital input.
Nota
The enable output and the ready input can be separately enabled.
The following boundary conditions apply to the activated ready input:
● The axis is only enabled ("MC_Power Status" = TRUE) when a signal is present at the ready
input.
● If a signal is not present at the ready input on an enabled axis, the axis is disabled with an
error.
● If the axis is disabled with the instruction "MC_Power" ("Enable" = FALSE), the axis is
disabled even when a signal is present at the ready input.

Consulte también
"Drive and encoder connection" section in the "S7-1500/S7-1500T Axis functions" function
manual (https://support.industry.siemens.com/cs/ww/en/view/109766462)

Configuration - Encoder
For closed-loop position control, synchronous axes require an actual position value in the form
of an encoder position. The encoder position is transmitted to the controller by means of a
PROFIdrive telegram.
As well as the S7-1500, the S7-1500T also offers the possibility to configure up to four encoders
and switch between the encoders. You control the switch in the user program with the Motion
Control instruction "MC_SetSensor".

Encoder on startup (S7-1500T)
In the drop-down list, select the encoder that is to be active after startup of the CPU
(STARTUP). The encoder must be configured and marked as "used".
This encoder is used after startup of the CPU and after a restart of the technology object. At an
operating mode transition from STOP → RUN of the CPU (without restart of the technology
object), the encoder that was also active before the STOP is still being used.

Use encoder (S7-1500T)
Select the "Use encoder" check box if you want to use this encoder alternatively for closed loop
position control.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1905

Control de movimiento
6.1 Using S7-1500 Motion Control

Data connection
In the drop-down list, select whether the data connection should be established directly with the
encoder or via a data block that can be edited in the user program.
The selection is only possible for encoders that are connected via PROFIdrive and support
parameter P979.

Encoder/data block
Select a previously configured encoder in this configuration field.
The following encoders can be selected:
● Connection to the drive (not with analog drive connection)
The encoder is configured via the configuration of the PROFIdrive drive. The drive evaluates
the encoder signals and sends them to the controller in the PROFIdrive telegram.
● Encoder on technology module (TM)
Select a previously configured technology module and the channel to be used. Only
technology modules set to the "Position input for Motion Control" mode are displayed for
selection.
If no technology module is available for selection, change to the device configuration and
add a technology module. If you have selected a technology module, you can access the
configuration of the technology module using the "Device configuration" button.
You can operate the technology module centrally on an S7-1500 CPU or decentrally on a
distributed I/O. Isochronous mode is not possible with central operation in the CPU.
You can identify the technology modules suitable for position detection for Motion Control
in the documentation for the technology module and the catalog data.
● PROFIdrive encoder on PROFINET/PROFIBUS (PROFIdrive)
In the "PROFIdrive encoder" field, select a configured encoder on PROFINET/PROFIBUS.
When you have selected an encoder, you can configure the encoder using the "Device
configuration" button.
Switch to the device configuration in the network view, and add an encoder, in the event that
no encoder can be selected.
Nota
Option "Show all modules"
If a PROFIdrive that has already been configured is not available for selection, use the
option "Show all modules" to display all reachable modules.
When you select the option "Show all modules", only the address range for each of the
displayed modules is checked. If the address range of the module is large enough for the
selected PROFIdrive frame, you can select the module. For this reason, make sure that you
select a PROFIdrive encoder.
If you have selected "Data block" under the data connection, select in the "Data block" field a
previously created data block which contains a tag structure of the data type "PD_TELx" ("x"
stands for the telegram number to be used).

1906

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Encoder type
Select the encoder type of the encoder in the drop-down list. The following encoder types are
available:
● Incremental
● Absolute (measuring range > traversing range)
● Cyclic absolute (measuring range < traversing range)
Recommended settings for absolute actual values: The "Cyclic absolute" encoder type is
recommended. With this setting, the position of the zero crossing of the encoder is
automatically taken into consideration by the technology object.
Nota
Measuring range of the absolute encoder
Observe the boundary conditions with absolute values.
You can find more information in the section "AUTOHOTSPOT" of the "S7-1500/S7-1500T
Axis functions" documentation (https://support.industry.siemens.com/cs/ww/en/view/
109766462).

Consulte también
"Drive and encoder connection" section in the "S7-1500/S7-1500T Axis functions" function
manual (https://support.industry.siemens.com/cs/ww/en/view/109766462)

Configuration - Data exchange with the drive
Configure the data exchange with the drive in the "Data exchange with the drive" configuration
window.
The configuration differs according to the selected drive type:

Drive type: PROFIdrive
Drive telegram
The telegram to the drive that is set in the device configuration is preselected in the drop-down
list.
Automatically apply drive values during configuration (offline)
Select the check box if you want to transfer the offline values of the drive "Reference speed",
"Maximum speed" and "Reference torque" to the configuration of the technology object in the
project.
Automatically apply drive values at runtime (online)
Select the check box if you want to transfer the effective values "Reference speed", "Maximum
speed" and "Reference torque" online in the drive to the CPU during runtime. The drive
parameters are transferred from the bus after the (re-)initialization of the technology object or
the (re)start of the drive or the CPU.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1907

Control de movimiento
6.1 Using S7-1500 Motion Control
Alternatively, you must synchronize the following parameters manually:
● Reference speed
Configure the reference speed of the drive in accordance with the manufacturer's
specifications in this field. The specification of the drive speed is a percentage of the
reference speed in the range -200% to 200%.
● Maximum speed
Configure the maximum speed of the drive in this field.
● Reference torque
Configure the reference torque of the drive corresponding to its configuration in this field.
The reference torque is needed for force/torque reduction, which is supported with telegram
10x.
Supplementary data
Select the "Torque data" check box if you want to configure the data connection of the torque
data. If you have selected a drive with which the supplemental telegram 750 has been
configured, the "Torque data" check box is preselected.
Data connection
In the drop-down list, define whether the data connection should be made via supplemental
telegrams or data blocks:
● If you select the entry "Supplemental telegram" in the "Data connection" drop-down list, you
can edit the "Supplemental telegram" drop-down list.
● If you select the "Data block" entry in the "Data connection" drop-down list, you can select
the previously created data block which contains a tag structure of the "PD_TELx" data type
("x" stands for the additional telegram number that is used).
Data block / supplemental telegram
Select an supplemental telegram configured in the "Supplemental telegram" field.
Select the "Show all modules" check box if you want to display all submodules of the connected
drive. You can also find self-defined supplemental telegrams with this function.
In the "Data block" field, select the data block which you want to use to integrate the torque data.
Nota
Automatic transfer of drive parameters is only possible with SINAMICS drives as of V4.x. To do
this, set the "Drive" data connection in the configuration window "Hardware interface > Drive".

Drive type: Analog drive connection
Reference speed
The reference speed of the drive is the speed with which the drive spins when there is an output
of 100% at the analog output. The reference speed must be configured for the drive and
transferred in the configuration of the technology object.
The analog value that is output at 100% depends on the type of the analog output. For example,
for an analog output with +/- 10 V, the value 10 V is output at 100%.

1908

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Analog outputs can be overridden by approximately 17%. This means that an analog output
can be operated in the range from -117% to 117%, insofar as the drive permits this.
Maximum speed
Specify the maximum speed of the drive in this field.

Consulte también
"Drive and encoder connection" section in the "S7-1500/S7-1500T Axis functions" function
manual (https://support.industry.siemens.com/cs/ww/en/view/109766462)

Configuration - Data exchange with encoder
Configure detailed encoder parameters and the data exchange of the encoder in the "Data
exchange with encoder" configuration window.
If you are using an S7-1500T CPU, you need to define the settings for each of the maximum
four configured encoders.
The display and selection of the configuration parameters described here is dependent on the
following parameters:
● Configuration window "Basic parameters": Drive type (linear/rotary)
● Configuration window "Hardware interface > Encoder": Encoder type (incremental/absolute/
cyclic absolute)
● Configuration window - "Extended parameters > Mechanics": Encoder mounting type

Settings for (S7-1500T)
In the drop-down list, select the encoder for which you wish to edit the following configurations.

Encoder telegram
The telegram to the encoder that is set in the device configuration is preselected in the dropdown list.

Automatically apply encoder values during configuration (offline)
Select the check box if you want to transfer the offline values of the encoder to the configuration
of the technology object in the project.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1909

Control de movimiento
6.1 Using S7-1500 Motion Control

Automatically apply encoder values during runtime (online)
Select the check box if you want to transfer the effective values online in the encoder to the CPU
during runtime. The encoder parameters are transferred from the bus after the (re-)initialization
of the technology object and (re)start of the encoder or the CPU.
Nota
Automatic transfer of encoder parameters is only possible with PROFIdrive encoders as of
product version A16. For this, "Hardware interface > Encoder" must be selected as the
"Encoder" data connection in the configuration window.
Alternatively, you must manually calibrate the following parameters, depending on encoder
type.

Measuring system
In the drop-down list, select the measuring procedure. The options are "Linear" and "Rotary".

Additional parameters
Depending on the selected measuring system and the encoder type selected under
"Technology object > Configurations > Hardware interface > Encoders", configure the
parameters described below:
● Measuring system: Rotary; encoder type: Incremental
Parameter

Description

Increments per revolution

Configure the number of increments that the encoder re‐
solves per revolution in this field.

Bits for fine resolution in the incremen‐ Configure the number of bits for fine resolution within the
tal actual value (Gx_XIST1)
incremental actual value (Gx_XIST1) in this field.

● Measuring system: Rotary; encoder type: Absolute
Parameter

Description

Increments per revolution

Configure the number of increments that the encoder re‐
solves per revolution in this field.

Number of revolutions

Configure the number of revolutions that the absolute en‐
coder can detect in this field.

Bits for fine resolution in the incremen‐ Configure the number of bits for fine resolution within the
tal actual value (Gx_XIST1)
incremental actual value (Gx_XIST1) in this field.
Bits for fine resolution in the absolute
actual value (Gx_XIST2)

1910

Configure the number of bits for fine resolution within the
absolute actual value (Gx_XIST2) in this field.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
● Measuring system: Rotary; encoder type: Cyclic absolute
Parameter

Description

Increments per revolution

Configure the number of increments that the encoder re‐
solves per revolution in this field.

Number of revolutions

Configure the number of revolutions that the absolute en‐
coder can detect in this field.

Bits for fine resolution in the incremen‐ Configure the number of bits for fine resolution within the
tal actual value (Gx_XIST1)
incremental actual value (Gx_XIST1) in this field.
Bits for fine resolution in the absolute
actual value (Gx_XIST2)

Configure the number of bits for fine resolution within the
absolute actual value (Gx_XIST2) in this field.

● Measuring system: Linear; encoder type: Incremental
Parameter

Description

Distance between two increments

Configure the distance between two increments of the en‐
coder in this field.

Bits for fine resolution in the incremen‐ Configure the number of bits for fine resolution within the
tal actual value (Gx_XIST1)
incremental actual value (Gx_XIST1) in this field.

● Measuring system: Linear; encoder type: Absolute
Parameter

Description

Distance between two increments

Configure the distance between two increments of the en‐
coder in this field.

Bits for fine resolution in the incremen‐ Configure the number of bits for fine resolution within the
tal actual value (Gx_XIST1)
incremental actual value (Gx_XIST1) in this field.
Bits for fine resolution in the absolute
actual value (Gx_XIST2)

Configure the number of bits for fine resolution within the
absolute actual value (Gx_XIST2) in this field.

● Measuring system: Linear; encoder type: Cyclic absolute
Parameter

Description

Distance between two increments

Configure the distance between two increments of the en‐
coder in this field.

Bits for fine resolution in the incremen‐ Configure the number of bits for fine resolution within the
tal actual value (Gx_XIST1)
incremental actual value (Gx_XIST1) in this field.
Bits for fine resolution in the absolute
actual value (Gx_XIST2)

Configure the number of bits for fine resolution within the
absolute actual value (Gx_XIST2) in this field.

Consulte también
Configuration - Encoder (Página 1905)
"Drive and encoder connection" section in the "S7-1500/S7-1500T Axis functions" function
manual (https://support.industry.siemens.com/cs/ww/en/view/109766462)
Configuration - Mechanics (Página 1914)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1911

Control de movimiento
6.1 Using S7-1500 Motion Control

Configuration - Leading value interconnections
You can interconnect a synchronous axis with multiple leading value-capable technology
objects. The following technology objects are leading value-capable:
● Positioning axis
● Synchronous axis (Página 1866)
● External encoder (S7-1500T)
● Leading axis proxy (Página 1987) (S7-1500T)
You can select only one leading value during runtime of your user program.
All interconnection required during operation must be set up during configuration of the
technology object.

Interconnection overview
You open the interconnection overview via this link. With a cross-PLC synchronous operation,
the interconnection overview contains an overview of the interconnected leading and following
axes and their CPU assignment.

Possible leading values
In the "Possible leading values" table column, add all leading value-capable technology objects
that you need during operation as leading value for the synchronous axis.
You can use the technology objects added in the table with the corresponding Motion Control
instruction as leading value for the synchronous axis. All configured leading value
interconnections for the technology object are displayed in the cross-reference list of the
technology object.
In a cross-PLC synchronous operation, you add the corresponding leading axis proxy
technology object instead of the leading axis of another CPU (only for S7‑1500T CPU). The
leading axis proxy technology object makes the leading value of the corresponding leading axis
available locally on the CPU.

Leading value source (S7-1500T)
If you add a leading value proxy technology object in the "Possible leading values" table
column, the "Leading value source" column displays which technology object of which CPU
provides the leading value:
<Name of CPU>.<Name of technology object>

Type of coupling
In the "Type of coupling" table column, configure whether the leading value is to be coupled via
setpoint, actual value or with a delay. "Actual value" is available only for the S7‑1500T CPU.
In a cross-PLC synchronous operation, you define with the "Delayed" setting whether the
leading value should be delayed for a local synchronous operation.
Coupling via setpoint is the default setting for a leading axis proxy technology object.

1912

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Consider interconnection when calculating the delay time (S7-1500T)
In the table column with the icon , select for a leading axis proxy technology object whether
this leading value interconnection should be taken into consideration in the calculation of the
delay time in the interconnection overview (Página 1997).

Consulte también
Interconnection possibilities (Página 1989)
Leading value coupling (Página 1870)

Configuration - Leading value settings
In the "Leading value settings" configuration window, select the parameters of the leading value
for cross-PLC synchronous operation.

Provision of leading value
In this area, define the settings for transferring the leading value to other CPUs:
Field

Description

Provide cross-PLC lea‐
ding value

Select this check box to make the setpoint or actual value available as leading
value for a cross-PLC synchronous operation.

Transfer area

In this drop-down list, select the output tag of the transfer area set up between
the CPU of the leading axis and the CPUs of the following axes.
You can find additional information on the transfer area in the section "Setting
up communication via controller-controller data exchange (Página 1992)".

Delay time of local leading value
In this area, configure the settings for local synchronous operation:
Field

Description

Allow system calcula‐
tion

Select this check box to adapt the delay time of the local leading value in the
system. System calculation is started when you trigger the calculation in the
interconnection overview.

Delay time

If the "Allow system calculation" check box is cleared, this field can be edited.
Enter the delay time in this field.
The entered delay time determines the output delay of the leading value for
the local following axes.
(<TO>.CrossPlcSynchronousOperation.LocalLeadingValueDelayTime)

Interconnection over‐
view

You open the interconnection overview via this link. With a cross-PLC
synchronous operation, the interconnection overview contains an overview
of the interconnected leading and following axes and their CPU assignment.

Consulte también
Interconnection possibilities (Página 1989)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1913

Control de movimiento
6.1 Using S7-1500 Motion Control

Extended parameters
Configuration - Mechanics
In the "Mechanics" configuration window, configure the mounting type of the encoder, and the
adaptation of the actual encoder value to the mechanical conditions.

Settings for (S7-1500T)
In the drop-down list, select the encoder for which the following configurations are to apply.

Encoder mounting type
In the drop-down list, select how the encoder is mounted to the mechanics.
The configuration differs depending on the axis type and the encoder mounting type selected
in the "Basic parameters" configuration window.
Axis type: Linear
● Linear - On motor shaft (Página 1914)
● Linear - On load side (Página 1915)
● Linear - External Measuring System (Página 1915)
Axis type: Rotary
● Rotary - On motor shaft (Página 1916)
● Rotary - On load side (Página 1917)
● Rotary - External Measuring System (Página 1917)

Invert encoder direction
Select this check box if you must invert the direction of rotation of the encoder.

Consulte también
Configuration - Data exchange with encoder (Página 1909)
Section "Mechanics" in the function manual "S7-1500/S7-1500T Axis functions" (https://
support.industry.siemens.com/cs/ww/en/view/109766462)

Axis type: Linear
Linear - On motor shaft
The encoder is connected to the motor shaft in a mechanically fixed manner. Motor and
encoder form a unit.

1914

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Drive mechanism
Select the "Invert drive direction" check box if the direction of rotation of the drive is to be
inverted.

Load gear
The gear ratio of the load gear is specified as the ratio between motor revolutions and load
revolutions.
In this "Number of motor revolutions" configuration field, configure the integer number of motor
revolutions.
In this "Number of load revolutions" configuration field, configure the integer number of load
revolutions.

Position parameters
In the "Leadscrew pitch" configuration field, configure the distance by which the load is moved
when the leadscrew makes one revolution.

Linear - On load side
The encoder is mechanically connected to the load side of the gear.

Drive mechanism
Select the "Invert drive direction" check box if the direction of rotation of the drive is to be
inverted.

Load gear
The gear ratio of the load gear is specified as the ratio between motor revolutions and load
revolutions.
In this "Number of motor revolutions" configuration field, configure the integer number of motor
revolutions.
In this "Number of load revolutions" configuration field, configure the integer number of load
revolutions.

Position parameters
In the "Leadscrew pitch" configuration field, configure the distance by which the load is moved
when the leadscrew makes one revolution.

Linear - External Measuring System
An external measuring system provides the position values of the linear load motion.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1915

Control de movimiento
6.1 Using S7-1500 Motion Control

Distance per encoder revolution
In this configuration field, configure the linear load travel per encoder revolution.

Drive mechanism
Select the "Invert drive direction" check box if the direction of rotation of the drive is to be
inverted.

Load gear
The gear ratio of the load gear is specified as the ratio between motor revolutions and load
revolutions.
In this "Number of motor revolutions" configuration field, configure the integer number of motor
revolutions.
In this "Number of load revolutions" configuration field, configure the integer number of load
revolutions.

Position parameters
In the "Leadscrew pitch" configuration field, configure the distance by which the load is moved
when the leadscrew makes one revolution.

Axis type: Rotary
Rotary - On motor shaft
The encoder is connected to the motor shaft in a mechanically fixed manner. Motor and
encoder form a unit.

Drive mechanism
Select the "Invert drive direction" check box if the direction of rotation of the drive is to be
inverted.

Load gear
The gear ratio of the load gear is specified as the ratio between motor revolutions and load
revolutions.
In this "Number of motor revolutions" configuration field, configure the integer number of motor
revolutions.
In this "Number of load revolutions" configuration field, configure the integer number of load
revolutions.

1916

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Rotary - On load side
The encoder is mechanically connected to the load side of the gear.

Drive mechanism
Select the "Invert drive direction" check box if the direction of rotation of the drive is to be
inverted.

Load gear
The gear ratio of the load gear is specified as the ratio between motor revolutions and load
revolutions.
In this "Number of motor revolutions" configuration field, configure the integer number of motor
revolutions.
In this "Number of load revolutions" configuration field, configure the integer number of load
revolutions.

Rotary - External Measuring System
An external measuring system provides the position values of the rotary load motion.

Distance per encoder revolution
In this configuration field, configure the linear load travel per encoder revolution.

Drive mechanism
Select the "Invert drive direction" check box if the direction of rotation of the drive is to be
inverted.

Load gear
The gear ratio of the load gear is specified as the ratio between motor revolutions and load
revolutions.
In this "Number of motor revolutions" configuration field, configure the integer number of motor
revolutions.
In this "Number of load revolutions" configuration field, configure the integer number of load
revolutions.

Configuration - Dynamic Defaults
In the "Dynamic default values" configuration window, configure the default values for velocity,
acceleration, deceleration and jerk of the axis.
The default values take effect when values < 0 are specified in Motion Control instructions for
the "Velocity", "Acceleration", "Deceleration" or "Jerk" parameters. The default values can be
applied separately for each of the parameters just listed.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1917

Control de movimiento
6.1 Using S7-1500 Motion Control
The default values for acceleration and deceleration also act on the traversing motions of active
homing.

Velocity
In this field, define the default value for the velocity of the axis.

Acceleration/deceleration - Ramp-up time/ramp-down time
Configure the desired default value for acceleration in the "Ramp-up time" or "Acceleration"
fields. The desired deceleration can be set in the "Ramp-down time" or "Deceleration" fields.
The following equations show the relationship between the ramp-up time and acceleration and
the ramp-down time and deceleration:

Ramp-up time =

Ramp-down time =

Velocity
Acceleration

Velocity
Deceleration

Nota
A change in the velocity influences the acceleration and deceleration values of the axis. The
ramp-up and ramp-down times are retained.

1918

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Smoothing time/jerk
You can enter the jerk limit parameters in the "Smoothing time" box, or alternatively in the "Jerk"
box:
● Set the desired jerk for the acceleration and deceleration ramp in the "Jerk" field. The value
0 means that jerk limiting is deactivated.
● Set the desired smoothing time for the acceleration ramp in the "Smoothing time" field.
Nota
The jerk value is identical for the acceleration and deceleration ramp. The smoothing time
in effect for the deceleration ramp results from the following relationships:
● Acceleration > Deceleration
A shorter smoothing time is used for the deceleration ramp compared with the
acceleration ramp.
● Acceleration < Deceleration
A longer smoothing time is used for the deceleration ramp compared with the
acceleration ramp.
● Acceleration = Deceleration
The smoothing times of the acceleration and deceleration ramp are equal.
If an error occurs, the axis decelerates with the configured emergency stop deceleration. A
configured jerk limit is not taken into account for this.
The following equations show the relationship between the smoothing times and the jerk:

6PRRWKLQJWLPH DFFHOHUDWLRQUDPS  

6PRRWKLQJWLPH GHFHOHUDWLRQUDPS  

$FFHOHUDWLRQ
-HUN
'HFHOHUDWLRQ
-HUN

Motion jobs started in the user program are performed with the selected jerk.

Consulte también
Section "Velocity profile" in the function manual "S7-1500/S7-1500T Axis functions" (https://
support.industry.siemens.com/cs/ww/en/view/109766462)

Configuration - Emergency stop
In the "Emergency stop" configuration window, you can configure the emergency stop
deceleration of the axis. In the event of an error, and when disabling the axis, the axis is brought
to a standstill with this deceleration using the Motion Control instruction "MC_Power" (input
parameter "StopMode" = 0).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1919

Control de movimiento
6.1 Using S7-1500 Motion Control

Emergency deceleration/emergency stop ramp-down time
Configure the deceleration value for emergency stop in the "Emergency stop deceleration" field
or the "Emergency stop ramp-down time" field.
The relationship between emergency stop ramp-down time and emergency stop deceleration
can be seen in the following equation:

Emergency stop ramp-down time =

Maximum velocity
Emergency stop deceleration

The configuration of the emergency stop deceleration is related to the configured maximum
velocity of the axis. If the maximum velocity of the axis changes, then the value of the
emergency deceleration also changes (the emergency stop ramp-down time remains
unchanged).

Consulte también
Section "Emergency stop deceleration" in the function manual "S7-1500/S7-1500T Axis
functions" (https://support.industry.siemens.com/cs/ww/en/view/109766462)

Limits
Configuration - Position limits
Configure the hardware and software limit switches of the axis in the "Position limits"
configuration window.

Enable HW limit switches
The check box activates the function of the negative and positive hardware limit switches. The
negative hardware limit switch is located on the side in the negative direction of travel, and the
positive hardware limit switch on the side in the positive direction of travel.
If a hardware limit switch is reached, technology alarm 531 is output, and the technology object
is disabled (alarm response: remove enable).
Exception:
1. If a hardware limit switch is overtraveled during an active home position approach with
activated direction reversal at the hardware limit switch, the axis stops with the configured
maximum deceleration and continues the home position approach in the opposite direction.
2. If the hardware limit switches were deactivated using the Motion Control instruction
"MC_WriteParameter".

1920

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Nota
Only use hardware limit switches that remain permanently switched after the approach. This
switching state may only be canceled after the return to the permitted traversing range.
The digital inputs of the hardware limit switches are evaluated by default in cyclic data
exchange. If the hardware limit switch is to be evaluated in the position control cycle of the drive,
select the entry "MC-Servo" for "Organization block" and the entry "PIP OB Servo" for "Process
image" in the input module settings under "I/O addresses".

Input of negative/positive HW limit switch
In these fields, select the PLC tag of the digital input for the negative and positive hardware limit
switch.
In order to be able to select an input, a digital input module must have been added in the device
configuration, and the PLC tag name for the digital input must be defined.
PRECAUCIÓN
During installation of hardware limit switches, attention must be paid to the filter times of the
digital inputs.
Based on the time for one position control cycle clock and the filter time of the digital inputs,
the resulting delay times must be taken into account.
The filter time is configurable in individual digital input modules in the device configuration.
The digital inputs are set to a filter time of 6.4 ms by default. If these are used as hardware limit
switches, undesired decelerations may occur. If this occurs, reduce the filter time for the
relevant digital inputs.
The filter time can be set under "Input filter" in the device configuration of the digital inputs.

Level selection of negative/positive HW limit switch
Select the triggering signal level ("low level"/"high level") of the hardware limit switch in the dropdown list. With "Low level", the input signal is "FALSE" after the axis has reached or passed the
hardware limit switch. With "High level", the input signal is "TRUE" after the axis has reached
or passed the hardware limit switch.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1921

Control de movimiento
6.1 Using S7-1500 Motion Control

Enable SW limit switches
This check box activates the high and low software limit switches. When software switches are
activated, an active motion comes to a stop at the position of the software limit switch. The
technological object signals an error. After acknowledgment of the error, the axis can again be
moved in the direction of its operating range.
Nota
Activated software limit switches act only on a homed axis.

Position of negative/positive SW limit switch
Configure the operating range of the axis with the positions of the negative and positive
software limit switches.

Consulte también
Section "Traversing range limitation" in the function manual "S7-1500/S7-1500T Axis
functions" (https://support.industry.siemens.com/cs/ww/en/view/109766462)

Configuration - Dynamic limits
In the "Dynamic limits" configuration window, configure the maximum values for velocity,
acceleration, deceleration and jerk of the axis.

Maximum velocity
In this field, define the maximum permitted velocity of the axis.

Maximum acceleration/maximum deceleration - ramp-up time/ramp-down time
Set the desired acceleration in the "Ramp-up time" or "Acceleration" fields. The desired
deceleration can be set in the "Ramp-down time" or "Deceleration" fields.
The following equations show the relationship between the ramp-up time and acceleration and
the ramp-down time and deceleration:

Ramp-up time =

Ramp-down time =

1922

Maximum velocity
Acceleration

Maximum velocity
Deceleration

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Nota
A change in the maximum velocity influences the acceleration and deceleration values of the
axis. The ramp-up and ramp-down times are retained.
The "maximum deceleration" for active homing with change of direction at the hardware limit
switch must be set sufficiently large, to brake the axis before reaching the mechanical endstop.

Smoothing time/jerk
You can enter the jerk limit parameters in the "Smoothing time" box, or alternatively in the "Jerk"
box:
● Set the desired jerk for the acceleration and deceleration ramp in the "Jerk" field. The value
0 means that the jerk is not limited.
● Set the desired smoothing time for the acceleration ramp in the "Smoothing time" field.
Nota
The configured smoothing time displayed in the configuration, applies only to the
acceleration ramp.
If the values of the acceleration and deceleration differ, the smoothing time of the
deceleration ramp is calculated and used according to the jerk of the acceleration ramp.
The smoothing time of the deceleration is adapted as follows:
● Acceleration > Deceleration
A shorter smoothing time is used for the deceleration ramp compared with the
acceleration ramp.
● Acceleration < Deceleration
A longer smoothing time is used for the deceleration ramp compared with the
acceleration ramp.
● Acceleration = Deceleration
The smoothing times of the acceleration and deceleration ramp are equal.
If an error occurs, the axis decelerates with the configured emergency stop deceleration. A
configured jerk limit is not taken into account for this.
The following equations show the relationship between the smoothing times and the jerk:

6PRRWKLQJWLPH DFFHOHUDWLRQUDPS  

6PRRWKLQJWLPH GHFHOHUDWLRQUDPS  

$FFHOHUDWLRQ
-HUN
'HFHOHUDWLRQ
-HUN

Motion jobs started in the user program are performed with the selected jerk.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1923

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Section "Velocity profile" in the function manual "S7-1500/S7-1500T Axis functions" (https://
support.industry.siemens.com/cs/ww/en/view/109766462)
Dynamic limits in gearing (Página 1886)

Configuration - Torque limits
Configure the force/torque limiting of the drive in the "Torque limiting" configuration window.
The configuration is only available if a drive that supports force/torque limiting is selected and
a telegram 10x is used. Telegram 101 cannot be used.

Effective
In the drop-down list, select whether the limit value is to be in effect "on load side" or "on motor
side".

Torque limits
Enter a default value for the torque limiting in the specified unit of measurement in this field.
The default value is in effect when the torque limiting is specified using Motion Control
instruction "MC_TorqueLimiting", input parameter "Limit" < 0.
Torque limiting applies to the following axis configurations:
● Axis type is "Rotary" and limit value is in effect "On load side" or "On motor side"
● Axis type is "Linear" and limit value is in effect "On motor side"

Force limit
Enter a default value for the force limit in the specified unit of measure in this field.
The default value is in effect when the force limit is specified using Motion Control instruction
"MC_TorqueLimiting", input parameter "Limit" < 0.
The force limit applies to the following axis configuration: Axis type is "Linear" and limit value is
in effect "On load side"
If the efficiency of the gear and leadscrew is crucial, you can set them in the
"<TO>.Actor.Efficiency" tag.

Position-related monitoring
As a result of the force/torque limiting on the drive, a larger following error may occur or the axis
standstill may not be detected reliably in positioning monitoring.
To deactivate the monitoring of the following error and the positioning monitoring during force/
torque limiting, select the "Deactivate position-related monitoring" option. If you want to activate
the position-related monitoring, select the option "Leave position-related monitoring enabled".

1924

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Interconnection in the SINAMICS drive
The following interconnection is required in the SINAMICS drive:
● P1522 to a fixed value of +100%
● P1523 to a fixed value of -100% (e.g. through interconnection to fixed value parameter
P2902[i]).

Consulte también
Section "Force/torque limiting" in the function manual "S7-1500/S7-1500T Axis functions"
(https://support.industry.siemens.com/cs/ww/en/view/109766462)

Configuration - Fixed stop detection
Configure the fixed stop detection in the configuration window.
A "Travel to fixed stop" can be realized by activating fixed stop detection using the Motion
Control instruction "MC_TorqueLimiting" and a position-controlled motion job. The operation is
also referred to as clamping.

Positioning tolerance
In this configuration field, configure the positioning tolerance that is regarded as a breaking
away or turning back of the fixed stop when exceeded. To detect the breaking away or turning
back of the fixed stop, the position setpoint must be located outside the positioning tolerance.
The configured position tolerance must be less than the configured following error.

Following error
If the drive is stopped by a mechanical fixed stop during a motion job, the following error is
increased. The accumulating following error serves as a criterion for fixed stop detection. In the
"Following error" configuration field, configure the value of the following error starting from
which the fixed stop detection is to take effect. The configured following error must be greater
than the configured position tolerance.
Nota
If the following error monitoring was activated in the position monitoring configuration, the
"Maximum following error" configured there must be greater than the "Following error" of the
fixed stop detection.

Consulte también
Section "Fixed stop detection" in the function manual "S7-1500/S7-1500T Axis functions"
(https://support.industry.siemens.com/cs/ww/en/view/109766462)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1925

Control de movimiento
6.1 Using S7-1500 Motion Control

Homing
Homing means matching the position value of a technology object to the real, physical location
of the drive. Absolute target positions of the axis can only be approached with a homed axis.

Operating modes of the Motion Control instruction "MC_Home"
In S7-1500 Motion Control, the axis is homed with the Motion Control instruction "MC_Home".
The following operating modes are used in the process:
● Active homing (incremental encoder)
With active homing, the Motion Control instruction "MC_Home" performs the configured
home position approach. Active traversing motions are aborted. When the homing mark is
detected, the position of the axis is set according to the configuration.
● Passive homing (incremental encoder)
With passive homing, the Motion Control instruction "MC_Home" instruction does not carry
out any homing motion. The traversing motion required for this must be implemented by the
user with other Motion Control instructions. Active traversing motions are not aborted upon
start of passive homing. When the homing mark is detected, the axis is set according to the
configuration.
● Direct homing absolute (incremental encoder or absolute encoder)
The axis position is set without taking into consideration the home position switch. Active
traversing motions are not aborted. The value of input parameter "Position" of Motion
Control instruction "MC_Home" is set immediately as the actual position of the axis.
● Direct homing relative (incremental encoder or absolute encoder)
The axis position is set without taking into consideration the home position switch. Active
traversing motions are not aborted. The following statement applies to the axis position after
homing:
New axis position = Current axis position + Value of parameter "Position" of instruction
"MC_Home".

Consulte también
Section "Homing" in the function manual "S7-1500/S7-1500T Axis functions" (https://
support.industry.siemens.com/cs/ww/en/view/109766462)

1926

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Active homing
Configuration - Active homing
In the "Active Homing" configuration window, configure the parameters for active homing.
"Active homing" is executed using the Motion Control instruction "MC_Home" with "Mode" = 3
and 5.
Nota
Parameter "MC_Home.Mode" (S7-1500 CPU)
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control has
been standardized within the framework of technology version V2.0. This results in a new
assignment of the parameter values for the "MC_Home.Mode" parameter. A comparison of the
"MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is available in the section
"Version overview" of the "S7‑1500/S7‑1500T Motion Control overview" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766459).

Settings for (S7-1500T)
In the drop-down list, select the encoder to which the homing settings are to apply.

Select the homing mode
Select from among the following homing modes:
● Use zero mark via PROFIdrive telegram (Página 1927)
● Use reference output cam and zero mark via PROFIdrive telegram (Página 1928)
● Use homing mark via digital input (Página 1929)

Homing mode "Use zero mark via PROFIdrive telegram"
Enable direction reversal at the hardware limit switch
Select this check box to use the hardware limit switch as a reversing output cam for the home
position approach. After the axis has reached the hardware limit switch during active homing,
it is ramped down at the configured maximum deceleration rate and the direction is then
reversed. The zero mark is then sought in the reverse direction. If this function is not enabled
and the axis reaches the hardware limit switch during active homing, then the drive is disabled
and braked with the ramp configured in the drive.

Homing direction
Select the direction in which the next zero mark should be approached for homing.
"Positive" is the homing direction in the direction of positive position values; "negative" in the
direction of negative position values.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1927

Control de movimiento
6.1 Using S7-1500 Motion Control

Approach velocity
In this field, specify the velocity which is used to traverse to the home position offset.

Homing velocity
In this field, specify the velocity at which the axis approaches the zero mark for homing.

Home position offset
In the case of a differing zero mark position and home position, enter the corresponding home
position offset in this field. The axis approaches the home position at approach velocity.

Home position
In this field, configure the absolute coordinate of the home position. The home position
configured here is in effect when the Motion Control instruction "MC_Home" is executed with
"Mode" = 5.

Homing mode "Use reference output cam and zero mark via PROFIdrive telegram"
Enable direction reversal at the hardware limit switch
Select this check box to use the hardware limit switch as a reversing output cam for the home
position approach. After the axis has reached the hardware limit switch during active homing,
it is ramped down at the configured maximum deceleration rate and the direction is then
reversed. The reference output cam is then searched for in the reverse direction. If this function
is not enabled and the axis reaches the hardware limit switch during active homing, then the
drive is disabled and braked with the ramp configured in the drive.

Approach direction
Select the approach direction for the reference output cam search.
"Positive" is the approach direction in the direction of positive position values; "negative" in the
direction of negative position values.

Homing direction
Select the direction in which the zero mark should be approached for homing.

Approach velocity
In this field, specify the velocity at which the reference output cam is searched for during the
homing procedure. Any configured home position offset is traversed at the same velocity.

1928

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Homing velocity
In this field, specify the velocity at which the axis approaches the zero mark for homing. For zero
mark detection, the reference output cam must be exited.

Home position offset
In the case of a differing zero mark position and home position, enter the corresponding home
position offset in this field. The axis approaches the home position at approach velocity.

Home position
In this field, configure the absolute coordinate of the home position. The home position
configured here is in effect when the Motion Control instruction "MC_Home" is executed with
"Mode" = 5.

Homing mode "Use homing mark via digital input"
When a digital input is used as a homing mark, the accuracy of the homing process is not as
high as for hardware-supported homing using zero marks. You can improve the accuracy by
using a low homing velocity.
Pay attention to the setting of short filter times for the digital input as well.

Digital input homing mark/output cam
In this configuration field, select the PLC tag of the digital input that is to act as a homing mark
(reference output cam). Also select the level at which the homing mark is to be detected.
In order to be able to select an input, a digital input module must have been added in the device
configuration, and the PLC tag name for the digital input must be defined.

Enable direction reversal at the hardware limit switch
Select this check box to use the hardware limit switch as a reversing output cam for the home
position approach. After the axis has reached the hardware limit switch during active homing,
it is ramped down at the configured maximum deceleration rate and the direction is then
reversed. The homing mark is then sensed in reverse direction. If this function is not enabled
and the axis reaches the hardware limit switch during active homing, then the drive is disabled
and braked with the ramp configured in the drive.

Approach direction
Select the approach direction for the homing mark search.
"Positive" is the approach direction in the direction of positive position values; "negative" in the
direction of negative position values.

Homing direction
Select the direction in which the homing mark for homing is to be approached.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1929

Control de movimiento
6.1 Using S7-1500 Motion Control

Homing mark
Select the switch position of the "digital input" that is to be used as the homing mark.
When a "digital input" is crossed, two switching edges that are spatially separated from one
another are generated. The selection of the positive or negative side ensures that the homing
mark is always evaluated at the same mechanical position.
The positive side is the switch position with a greater position value; the negative side is the
switch position with the lesser position value.
The selection of the side is independent of the approach direction, and independent of whether
it causes a rising or falling edge.

Approach velocity
In this field, specify the velocity at which the axis searches for the "digital input" during the home
position approach. Any configured home position offset is traversed at the same velocity.

Homing velocity
In this field, specify the velocity at which the axis approaches the home position for homing.

Home position offset
If the homing mark position is different from the home position, enter the corresponding home
position offset in this field. The axis approaches the home position at approach velocity.

Home position
In this field, configure the absolute coordinate of the home position. The home position
configured here is in effect when the Motion Control instruction "MC_Home" is executed with
"Mode" = 5.

1930

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Passive homing
Configuration - Passive homing
Configure the parameters for passive homing in the "Passive Homing" (homing on the fly)
configuration window. The "Passive homing" homing function is executed using the Motion
Control instruction "MC_Home" with "Mode" = 2, 8 and 10.
Nota
Parameter "MC_Home.Mode" (S7-1500 CPU)
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control has
been standardized within the framework of technology version V2.0. This results in a new
assignment of the parameter values for the "MC_Home.Mode" parameter. A comparison of the
"MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is available in the section
"Version overview" of the "S7‑1500/S7‑1500T Motion Control overview" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766459).

Settings for
In the drop-down list, select the encoder for which the homing settings are to apply (only for
S7-1500T).

Select the homing mode
Select from among the following homing modes:
● Use zero mark via PROFIdrive telegram (Página 1931)
● Use reference output cam and zero mark via PROFIdrive telegram (Página 1932)
● Use homing mark via digital input (Página 1933)

Homing mode "Use zero mark via PROFIdrive telegram"
Homing direction
Select the direction in which the next zero mark should be approached for homing. The
following options are available:
● Positive
The axis moves in the direction of higher position values.
● Negative
The axis moves in the direction of lower position values.
● Current
The currently effective approach direction is used for homing.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1931

Control de movimiento
6.1 Using S7-1500 Motion Control

Home position
In this field, configure the absolute coordinate of the home position. The home position
configured here is in effect when the Motion Control instruction "MC_Home" is executed with
"Mode" = 10.
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control has
been standardized within the framework of technology version V2.0. This results in a new
assignment of the parameter values for the "MC_Home.Mode" parameter. A comparison of the
"MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is available in the section
"Version overview" of the "S7‑1500/S7‑1500T Motion Control overview" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766459).

Homing mode "Use reference output cam and zero mark via PROFIdrive telegram"
Homing direction
Select the direction in which the zero mark should be approached for homing. The next zero
mark after leaving the reference output cam is used.
The following options are available:
● Positive
The axis moves in the direction of higher position values.
● Negative
The axis moves in the direction of lower position values.
● Current
The currently effective approach direction is used for homing.

Home position
In this field, configure the absolute coordinate of the home position. The home position
configured here is in effect when the Motion Control instruction "MC_Home" is executed with
"Mode" = 10.
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control has
been standardized within the framework of technology version V2.0. This results in a new
assignment of the parameter values for the "MC_Home.Mode" parameter. A comparison of the
"MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is available in the section
"Version overview" of the "S7-1500/S7-1500T Motion Control overview" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766459).

1932

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Homing mode "Use homing mark via digital input"
Digital input homing mark/output cam
In this dialog field, select a digital input that is to act as a homing mark (reference output cam).
Also select the level at which the homing mark is to be detected.

Homing direction
Select the direction in which the homing mark for homing is to be approached.
The following options are available:
● Positive
The axis moves in the direction of higher position values.
● Negative
The axis moves in the direction of lower position values.
● Current
The currently effective approach direction is used for homing.

Homing mark
Select which switch position of the "digital input" is to be used as the homing mark.
When a "digital input" is crossed, two switching edges that are spatially separated from one
another are generated. The selection of the positive or negative side ensures that the homing
mark is always evaluated at the same mechanical position.
The positive side is the switch position with a greater position value; the negative side is the
switch position with the lesser position value.
The selection of the side is independent of the approach direction, and independent of whether
it causes a rising or falling edge.

Home position
In this field, configure the absolute coordinate of the home position. The home position
configured here is in effect when the Motion Control instruction "MC_Home" is executed with
"Mode" = 10.
Nota
Parameter "MC_Home.Mode"
The "MC_Home.Mode" parameter for S7-1200 Motion Control and S7-1500 Motion Control has
been standardized within the framework of technology version V2.0. This results in a new
assignment of the parameter values for the "MC_Home.Mode" parameter. A comparison of the
"MC_Home.Mode" parameter for technology versions V1.0 and V2.0 is available in the section
"Version overview" of the "S7‑1500/S7‑1500T Motion Control overview" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766459).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1933

Control de movimiento
6.1 Using S7-1500 Motion Control

Position monitoring functions
Configuration - Positioning monitoring
In the "Positioning monitoring" configuration window, configure the criteria for monitoring the
target position.

Positioning window
Configure the size of the positioning window in this field. If the axis is located within this window,
the position is considered to be "reached".

Tolerance time
In this field, configure the tolerance time within which the position value must reach the
positioning window.

Minimum dwell time in positioning window
Configure the minimum dwell time in this field. The current position value must be located in the
positioning window for at least the "minimum dwell time". At the end of the hold time, the
corresponding positioning job reports "Done" = TRUE.
Recommended setting: To avoid longer pauses, set values between 0 ms and 20 ms for
dynamic positioning tasks.
If one of the criteria is violated, then the axis is stopped and the technology alarm 541 "Position
monitoring error" is displayed (alarm response: Remove enable).

Configuration - Following error
In the "Following Error" configuration window, configure the permissible deviation of the actual
position of the axis from the position setpoint. The following error can be dynamically adapted
to the current velocity of the axis.

Enable following error monitoring
Select this check box, if you want to enable following error monitoring. When following error
monitoring is enabled, the axis is stopped in the error range (orange). The technology alarm
521 "Following error" is displayed (alarm response: remove enable).
When following error monitoring is disabled, the configured limits have no effect.

Maximum following error
Configure the following error that is permissible at maximum velocity in this field.

1934

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Warning level
In this field, configure a percentage of the current following error limit above which a warning
should be output.
Example: The current maximum following error is 100 mm. The warning level is configured at
90%. If the current following error exceeds a value of 90 mm, the technology alarm 522
"Warning following error tolerance" is output. This is a warning and contains no alarm response.

Following error
In this field, configure the permissible following error for low velocities (without dynamic
adjustment of the following error).

Start of dynamic adjustment
Configure the velocity starting from which the following error is to be dynamically adjusted in
this field. Starting from this velocity, the following error up to the maximum velocity will be
adjusted to the maximum following error.

Configuration - Standstill signal
In the "Standstill signal" configuration window, configure the criteria for standstill detection.

Standstill window
Configure the size of the standstill window in this field. For standstill to be indicated, the velocity
of the axis must be within this window.

Minimum dwell time in standstill window
Configure the minimum dwell time in the standstill window in this field. The velocity of the axis
must be in the standstill window for at least the specified duration.
If both criteria are met, the standstill of the axis is indicated.

Consulte también
Section "Position monitoring functions" in the function manual "S7-1500/S7-1500T Axis
functions" (https://support.industry.siemens.com/cs/ww/en/view/109766462)

Configuration - Control loop
In the "Control loop" configuration window, configure the precontrol and the gain Kv of the
position control loop.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1935

Control de movimiento
6.1 Using S7-1500 Motion Control
The Kv factor affects the following parameters:
● Positioning accuracy and stop control
● Uniformity of motion
● Positioning time
The better the mechanical conditions of the axis are (high stiffness), the higher the Kv factor can
be configured. This reduces the following error, and a higher dynamic response is achieved.

Drive optimized
When the drive is optimized, the status bit lights up green. Otherwise, the status bit is gray.

Optimizing values on the drive
Use the green arrow to navigate to "Automatic controller optimization" in the optimization mask
of the drive. The optimization mask of the drive is opened in online or offline mode, depending
on the mode you are in. You can perform the optimization on the drive and optionally go online
with the drive. You get back to the previous mask using the "Window Switcher".

Applying values from the drive
When you click the "Apply values from drive" button, a dialog box opens with the columns
"Current value", "New value" and "Value on drive". Depending on the status of the drive, the
online or offline values for "Speed control loop substitute time" and "Gain (Kv factor)" are
displayed there.
The "New value" column can be edited. 50% of the value calculated on the drive is determined
as a new value for the default setting for the gain. The new value of the gain should correspond
to a maximum of 30-50% of the value on the drive. You apply the set values by clicking on "Yes".

Precontrol
Configure the percentage velocity precontrol in this field.

Speed control loop substitute time
Configure the speed control loop substitute time in this field (Tvtc).
When speed precontrol is activated, the setpoint is delayed by the speed control loop substitute
time before the control deviation is established. This prevents an overshoot or a leading of the
actual value compared with the position setpoint. The speed control loop substitute time is a
simplified substitute model of the dynamic behavior of the speed control loop. The speed
control loop substitute time is included in the balancing filter.

Gain (Kv factor)
In the input field, enter the gain Kv of the position control loop.

1936

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Dynamic Servo Control (DSC)
For position-controlled axes (positioning axes/synchronous axes), the closed loop position
control can occur either in the CPU or in the drive, provided the drive supports Dynamic Servo
Control (DSC). Select your preferred control process:
● Position control in the drive (DSC enabled)
With the Dynamic Servo Control (DSC) function, the position controller is executed in the
drive in the cycle clock of the speed control loop. The setting of a significantly greater
position controller gain factor Kv is thus enabled. This increases the dynamics for setpoint
sequence and disturbance variable correction for highly dynamic drives.
● Position control in the PLC
Nota
Dynamic Servo Control (DSC) is only possible with one of the following PROFIdrive telegrams:
● Standard telegram 5 or 6
● SIEMENS telegram 105 or 106

Consulte también
Section "Closed loop control" in the function manual "S7-1500/S7-1500T Axis functions"
(https://support.industry.siemens.com/cs/ww/en/view/109766462)

Configuration - Actual value extrapolation
Configure the properties of the extrapolation for an actual value coupling for synchronous
operation in the "Actual value extrapolation" configuration window. The values set here only
apply when the actual values of this axis are used as leading value.

Position filter T1 and T2
Enter the time constants of the PT2 filter for smoothing the position.

Velocity filter T1 and T2 and tolerance band width
Enter the time constants of the PT2 filter for the smoothing of the actual velocity and the
tolerance band width of the smoothed actual velocity.
For optimized application of the tolerance band, enter the same bandwidth for the tolerance
band as the width of the noise signal.

Hysteresis value
Enter a value for application of the hysteresis function to the extrapolated actual value of the
position. The specification is made in the configured length unit.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1937

Control de movimiento
6.1 Using S7-1500 Motion Control

Leading axis dependent extrapolation time (read-only)
The leading axis-dependent time is calculated from the sum of the actual value acquisition time
at the leading axis, (Ti), the time of the interpolator (TIpo) and the sum of position filters T1 and
T2:
Leading axis dependent extrapolation time = Ti + TIpo + T1 + T2

Following axis dependent extrapolation time
Specify the following axis-related proportion for the extrapolation of the leading value. The
value (unchanged or offset against user-specific runtimes) from the tag
"<TO>.StatusPositioning.SetpointExecutionTime" of the following axis is used as the basis.

Time from cross-PLC synchronous operation (read-only)
The time from the cross-PLC synchronous operation corresponds to the value of the
deceleration time set at the axis or encoder in "Configuration > Leading value settings".

Apply leading value velocity from differentiation
When you select this check box, the leading value velocity is taken from the differentiation of
the extrapolated leading value position.
When you clear this check box, the filtered actual velocity is applied.

Include leading axis condition time
When you select this check box, the leading axis dependent extrapolation time is included in
the calculation of the effective extrapolation time.
When you clear this check box, the leading axis dependent extrapolation time is not included
in the calculation of the effective extrapolation time.

Effective extrapolation time (read-only)
The effective extrapolation time is the sum of the leading axis-dependent time, the following
axis-dependent time and the delay time of cross-PLC synchronous operation.

Consulte también
Extrapolation of the leading values for actual value coupling (Página 1871)

Configuring the cam technology object
Structure of the cam editor
You configure the cam technology object (Página 1867) with an editor.

1938

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
You create the cam using a diagram, a table containing the elements of the curve and the
properties of the elements. Transitions are calculated between the individual elements of the
cam (e.g. points, lines, polynomials). The curve reflects the path-related dependency between
the leading axis (leading values, abscissa in the chart) and following axis (following values,
ordinate in the chart).
The following figure shows the structure of the editor.








①
②

Toolbar
Graphical editor
The leading value range (definition range) is displayed on the abscissa (x axis).

③
④

The following value range (value range) is displayed on the ordinate (y axis).
Tabular editor
Properties (Inspector window)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1939

Control de movimiento
6.1 Using S7-1500 Motion Control

Toolbar
You use the toolbar to operate the graphical editor and to import/export cams.

Graphical editor
In the graphical editor, you edit the elements of the curve graphically. The elements can be
added, edited and deleted. Up to four charts can be created one above the other with
synchronized abscissa. The setpoint curve as well as the curves for the effective position,
velocity, acceleration and jerk can be displayed in the charts.
The definition of the cam starts with the first defined interpolation point or the first segment and
does not corresponds to the definition range in the cam editor.

Tabular editor
All elements of the curve are listed in the tabular editor. Existing elements can be edited. New
elements can be added.

Properties (Inspector window)
In the Inspector window, you configure the properties of the trend and of the selected element
in the "Properties" tab, and the graphical view in the "Display" tab:
● Profile (e.g. leading and following value range, optimization and interpolation of the profile,
number of elements used)
● Element (e.g. derivatives, polynomial coefficients, optimization of the element)
● Graphical view (e.g. line type, line color, scaling of the view)

Elements of the curve
The following table shows the elements that can be used to define the curve:
Element

Description

Point

A point assigns a following value to a leading value. The curve runs through
the point with these coordinates.
The velocity, acceleration and jerk can be defined in this point using the first,
second and third derivative.

1940

Point group

A point group combines two or more points into an commonly interpolated
element and allows precise interpolation between these points.

Line

A line describes a motion with constant velocity from the start point of the line
to the end point. The incline of the line specifies the constant velocity.

Sine

A sine element describes a motion according to the sine function. The sine
function can be adjusted with the phase angle in the start point and end point,
the period length, the amplitude as well as the oscillation zero point (offset).

Polynomial

A polynomial describes a motion according to a polynomial function of the 7th
degree maximum. Polynomials can be defined by entering the boundary
conditions or the polynomial coefficients. Optionally, you can configure a
trigonometric polynomial component.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Element

Description

Inverse sine (approxi‐
mated)

An inverse sine describes a motion according to the arcsine function. An
inverse sine is approximated using interpolation points of the arcsine function.

Transition

Transitions interpolate the range between two elements. The ranges are au‐
tomatically interpolated by the controller or using a configurable optimization
according to VDI Guideline 2143.
Transitions are added automatically.

Additional information
You can find more information about working with the cam editor in FAQ entry 109749820
(https://support.industry.siemens.com/cs/ww/en/view/109749820) in the Siemens Industry
Online Support.

Operating the cam editor
The procedure described here shows the basic operation of the cam editor. This procedure
serves as a recommendation.
The basic operation can include the follow tasks:
● Adapting defaults
● Creating and adapting the curve
● Interpolation/optimization of the transitions

Adapting defaults
To adjust the leading and following value range of the cam profile as well as the graphical view,
follow these steps:
1. In the properties (Inspector window), open the "Profile > General (Página 1954)"
configuration window.
2. Configure the leading value range and the following value range of the curve definition.
The graphical view is automatically adapted to the inputs.
3. In the area navigation of the Inspector window, open the "Display (Página 1973)" tab.
4. Configure the configuration windows:
– The display of the charts and curves
– The grid spacing for aligning inputs in the graphical editor
– The decimal places displayed in the cam editor.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1941

Control de movimiento
6.1 Using S7-1500 Motion Control

Creating and adapting the curve
To create and adapt the curve, follow these steps:
1. Use the graphical editor and/or the tabular editor to add the elements of the cam:
– Select the tool required for inserting the respective element in the toolbar. Place the
element at the required position in the graphical editor.
– Use <Add> to insert the corresponding elements in the "Element type" column of the
tabular editor. Adjust the position of the elements using the start and end values.
Transitions between the elements are added automatically.
2. To edit an element, select it in the graphical or tabular editor.
The element is highlighted in the graphical and in the tabular editor. The "Element >
Parameter/Characteristic" configuration window is displayed in the properties (Inspector
window).
3. The elements can be adjusted as follows:
– Move the element or the drag handles of the element in the graphical editor.
– Adjust the start and end values in the tabular editor.
– Configure additional element-specific parameters in the properties (Inspector window) in
the "Element > Parameter (Página 1961)" configuration window.
– Set the interpolation of the transitions with the properties (Inspector window).
The number of elements used is displayed in the properties (Inspector window) in the "Profile
> Statistics (Página 1958)" properties window.

Setting the interpolation of the transitions (system interpolation)
The interpolation (Página 1891) can be set separately for each transition. The default for
interpolation of the transitions is the system interpolation. You configure the system
interpolation for all transitions in the properties (Inspector window) in the "Profile > System
interpolation (Página 1956)" configuration window.

Setting the optimization of the transitions (according to VDI Guideline 2143)
Each transition can also be adapted separately according to the VDI Guideline 2143. The
settings in the properties (Inspector window) in the "Profile > Default optimization settings
(Página 1955)" configuration window are hereby taken into consideration.
To adapt the optimization of a transition according to the VDI Guideline 2143, follow these
steps:
1. Select the transition in the graphical or tabular editor.
2. In the properties (Inspector window), open the "Element > Characteristic (Página 1969)"
configuration window.
3. Select the optimization method "VDI-based optimization" in the "Optimization method" dropdown list.
4. If necessary, change the default settings.
The selection of the parameters is automatically limited to the settings that can be applied
according to VDI Guideline 2143.

1942

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The optimization of the transitions according to VDI guidelines consumes additional points and/
or segments (Página 1958) in the cam.

Consulte también
Configuration charts - Charts and curves (Página 1973)

Graphical editor
Structure of the graphical editor
The graphical editor is divided into the following areas:
● Toolbar
● Curve diagram

Toolbar
The toolbar at the top of the graphical editor provides you with buttons for the following
functions:
Button

Function

Description

Importing cam from file

See section Importing/exporting cam (Página 1975)

Exporting cam to file

See section Importing/exporting cam (Página 1975)

Edit elements/Move view

● Selecting and moving of individual elements and element
● Moving the view using drag-and-drop
To switch from any tool to the "Edit elements/Move view" tool, press the
<Esc> key.

Activate zoom selection

Zoom into selected area

Activate vertical zoom

Vertical zoom into selected area without horizontal scaling
Alternative: <Ctrl> +drag to ordinate keeping mouse button pressed

Activate horizontal zoom

Horizontal zoom into selected area without vertical scaling
Alternative: <Ctrl> +drag to abscissa keeping mouse button pressed

Zoom in

Enlargement of the display
Alternative: <Ctrl> + mouse wheel up in curve diagram

Zoom out

Reduction of the display
Alternative: <Ctrl> + mouse wheel down in curve diagram

Show all

Display of entire definition and value range

Zoom into curve

Zoom to the following value range of the curve that you selected in the legend
of the chart

Activate snap grid

Inputs and element end points are aligned to the configurable snap grid and
to other element end points.

Inserting a point

Adding a point to the chart

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1943

Control de movimiento
6.1 Using S7-1500 Motion Control
Button

Function

Description

Inserting a line

Adding a line to the chart

Inserting a sine

Adding a sine element to the chart

Inserting a polynomial

Adding a polynomial to the chart

Inserting an inverse sine

Adding an inverse sine to the chart

Insert point group

Add a point group to the chart

View: A chart with positions

Display of one chart with the following curves of the cam opened in the editor:
● Preset curve
● Effective position

View: A chart with all curves

Display of one chart with the following curves of the cam opened in the editor:
● Preset curve
● Effective position
● Effective velocity
● Effective acceleration
● Effective jerk

View: Four charts with all cur‐ Display of four charts with the following curves of the cam opened in the
ves
editor:
● Chart with setpoint curve and effective position
● Chart with effective velocity
● Chart with effective acceleration
● Chart with effective jerk
Vertical measuring lines

Displaying and moving of vertical measuring lines
Hold down the left mouse button and drag to draw a measuring range. The
vertical position of the measuring lines can be moved.
The function values for the measuring line positions are displayed in the
chart. The difference of the measuring lines is displayed between the mea‐
suring lines.

Horizontal measuring lines

Displaying and moving of horizontal measuring lines
Hold down the left mouse button and drag to draw a measuring range. The
horizontal position of the measuring lines can be moved.
The function values for the measuring line positions are displayed in the
chart. The difference of the measuring lines is displayed between the mea‐
suring lines.

Show legend

Showing or hiding of the legend in the curve diagram.
To display values for a specific curve on the ordinate, click on the name of the
corresponding curve in the legend.

1944

Show legend left

Display of the legend on the left side of the curve diagram.

Show legend right

Display of the legend on the right side of the curve diagram.

Read out and display online
curve one time

Display of the position values of the cam read back from the CPU (orange)
The cam editor reads out the cam that was already loaded into the CPU. The
read out "Online curve" is displayed in the graphical editor.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Curve diagram
In the curve diagram, you enter the elements of the curve and adjust the curve by selecting and
moving elements.
Chart areas outside of the leading value/following value range configured in "Profile > General
(Página 1954)" are grayed out. Elements outside the leading value/following value range are
displayed with a warning ("Element is outside the definition range").
You can display various curves (position, velocity, acceleration and jerk) one above the other
in up to four charts by configuring the graphical view accordingly. When multiple charts are
displayed, you can adapt the graphs to match the separator lines.
The view can be zoomed in the manual mode by pressing <Ctrl > + Mouse wheel and <Ctrl >
+ while pressing the mouse button on the abscissa/ordinate.
The editor shows messages for checking the entered curve via warning triangles . The tooltip
of the waring triangle shows the message text. Configure the checking of the curve in the
"Check (Página 1958)" configuration window.

Display of the online curve
When you click the
button, the cam editor reads the data from the technology object data
block and displays the curve in the graphical editor:
Cam status

Interpolation status

Description

Data not modified

Not interpolated

Only the points and segments of the cam are dis‐
played.

(CamDataChanged = 0) (Interpolated = 0)
Interpolated

The interpolated cam is displayed.

(Interpolated = 1)
Data modified

Not interpolated

(CamDataChanged = 1) (Interpolated = 0)
Interpolated
(Interpolated = 1)

Only the points and segments of the cam are dis‐
played.
The interpolated cam as well as changed points
and segments are displayed.

Inserting a point
A point assigns a following value to a leading value. The curve runs through the point with these
coordinates.
By means of the first, second and third derivatives, the velocity, acceleration and jerk can be
defined in this point. The derivations are only taken into consideration during VDI-based
optimization of transitions of the point to other elements.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1945

Control de movimiento
6.1 Using S7-1500 Motion Control

Inserting a point
To add a point to the curve, follow these steps:
1. Select the "Insert point" tool

in the toolbar.

2. Click on the position in chart 1 where you want to insert the point.
The point is inserted. The coordinates are displayed for the point. The tabular editor and the
view of the properties (Inspector window) are updated. A transition to any element is
inserted automatically.

Moving a point
To move a point in the graphical editor, follow these steps:
1. Select the "Edit elements/Move view" tool

in the toolbar.

2. Select the point in chart 1.
3. Use drag-and-drop to move the point to the desired position.

Adapting parameters
The parameters of the point can be adjusted in the tabular editor as well as in the properties
(Inspector window) under "Element > Parameter (Página 1961)".

Insert point group
A point group combines two or more points into an commonly interpolated element and allows
precise interpolation between the points.

Insert point group
To add a point group to the trend, proceed as follows:
1. Select the "Insert point group" tool

in the toolbar.

2. In Chart 1, click on the position at which you want to insert the point group.
The point group is inserted. The coordinates of the start point and the end point are
displayed at the point group. The tabular editor and the view of the properties (Inspector
window) are updated. If a different element already exists, a transition to the existing
element is automatically inserted.

1946

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Adapt point group
To adapt a point group in the graphical editor, proceed as follows:
1. Select the "Edit elements/Move view" tool

in the toolbar.

2. Select the point group in Chart 1.
The point group is highlighted graphically with drag handles. The following drag handles are
displayed:
– Start value of the point group
– End value of the point group
3. Drag-and-drop the drag handles or the whole point group to the desired position.
If further interpolation points are configured between the start point and the end point in the
point group, the cam editor handles the interpolation points as follows:
– Definition type of the leading value "Relative to the segment"
The interpolation points are shifted relative to the start and end points.
– Definition type of the leading value "Absolute in the profile"
The interpolation points are not moved.

Adapting parameters
The parameters of the point group can be adapted in the graphical editor, in the tabular editor
as well as in the properties (Inspector window) under "Element > Parameter (Página 1962)".

Inserting a line
A line describes a motion with constant velocity from the start point of the line to the end point.
The incline of the line specifies the constant velocity.

Inserting a line
To add a line to the curve, follow these steps:
1. Select the "Insert line" tool

in the toolbar.

2. Use drag-and-drop in chart 1 to draw the line from the start position to the end position.
The line is inserted. The coordinates of the start point and end point are displayed for the
line. The tabular editor and the view of the properties (Inspector window) are updated. A
transition to any element is inserted automatically.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1947

Control de movimiento
6.1 Using S7-1500 Motion Control

Moving a line
To move a line in the graphical editor, follow these steps:
1. Select the "Edit elements/Move view" tool

in the toolbar.

2. Select the line in chart 1.
The line is graphically highlighted with drag handles. The following drag handles are
displayed:
– Start point of the line
– End point of the line
3. Use drag-and-drop to move the drag handles or the entire line to the desired position.

Adapting parameters
The parameters of the line can be adjusted in the graphical editor, in the tabular editor as well
as in the properties (Inspector window) under "Element > Parameter (Página 1964)".

Inserting a sine
A sine element describes a motion according to the sine function. The sine function can be
adjusted with the phase angle in the start point and end point, the period length, the amplitude
as well as the oscillation zero point (offset).

Inserting a sine
To add a sine to the curve, follow these steps:
1. Select the "Insert sine" tool

in the toolbar.

2. Click on the position in chart 1 where you want to insert the sine. The mouse pointer points
to the start position of the sine here.
The sine is inserted. The coordinates of the start point and end point are displayed for the
sine. The tabular editor and the view of the properties (Inspector window) are updated. A
transition to any element is inserted automatically.

1948

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Adjusting a sine
To adjust a sine in the graphical editor, follow these steps:
1. Select the "Edit elements/Move view" tool

in the toolbar.

2. Select the sine in chart 1.
The sine is graphically highlighted with drag handles and guide lines for the zero line and the
amplitude. The following drag handles are displayed:
– Leading value/shifting at left/right boundary
These drag handles can also be used to adjust the inclination of an inclined sine.
– Leading value at left/right boundary
– Phase at left/right boundary
– Amplitude
3. Use drag-and-drop to move the drag handles or the entire sine to the desired position.

Adapting parameters
The parameters of the sine can be adjusted in the graphical editor, in the tabular editor as well
as in the properties (Inspector window) under "Element > Parameter (Página 1965)".

Inserting a polynomial
A polynomial describes a motion according to a polynomial function of the 7th degree
maximum. Polynomials can be defined by entering the boundary conditions or the polynomial
coefficients. Optionally, you can configure a trigonometric polynomial component.

Inserting a polynomial
To add a polynomial to the curve, follow these steps:
1. Select the "Insert polynomial" tool

in the toolbar.

2. Click on the position in chart 1 where you want to insert the polynomial. In so doing, the
mouse pointer points to the start position of the polynomial.
The polynomial is inserted. The coordinates of the start point and end point are displayed for
the polynomial. The tabular editor and the view of the properties (Inspector window) are
updated. If a different element already exists, a transition to the existing element is
automatically inserted.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1949

Control de movimiento
6.1 Using S7-1500 Motion Control

Adjusting a polynomial
To adjust a polynomial in the graphical editor, follow these steps:
1. Select the "Edit elements/Move view" tool

in the toolbar.

2. Select the polynomial in chart 1.
The polynomial is graphically highlighted with drag handles. The following drag handles are
displayed:
– Leading value/following value at left/right boundary
– Position of point of inflection (lambda: relative to the element or absolute in the profile)
3. Use drag-and-drop to move the drag handles or the entire sine to the desired position.

Adapting parameters
The parameters of the polynomial can be adapted in the graphical editor, in the tabular editor
as well as in the properties (Inspector window) under "Element > Parameter (Página 1966)".

Inserting an inverse sine
An inverse sine describes a motion according to the arcsine function. The arcsine function is
the inverse function of the sine function. An inverse sine is approximated using interpolation
points of the arcsine function.

Inserting an inverse sine
To add an inverse sine to the curve, follow these steps:
1. Select the "Insert inverse sine" tool

in the toolbar.

2. Click on the position in chart 1 where you want to insert the inverse sine. In so doing, the
mouse pointer points to the start position of the inverse sine.
The sine is inserted. The coordinates are displayed for the point. The tabular editor and the
view of the properties (Inspector window) are updated. A transition to any element is
inserted automatically.

Adjusting an inverse sine
To adjust an inverse sine in the graphical editor, follow these steps:
1. Select the "Edit elements/Move view" tool

in the toolbar.

2. Select the inverse sine in chart 1.
The inverse sine is graphically highlighted with drag handles. The following drag handles
are displayed:
– Start point of the inverse sine
– End point of the inverse sine
3. Use drag-and-drop to move the drag handles or the entire inverse sine to the desired
position.

1950

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Adapting parameters
The parameters of the inverse sine can be adjusted in the graphical editor, in the tabular editor
as well as in the properties (Inspector window) under "Element > Parameter (Página 1968)".

Deleting an element
To delete an element in the graphical editor, follow these steps:
1. Select the element.
2. Press the <Del> key.
The element is deleted. The graphical editor and the view of the properties (Inspector
window) are updated. A transition to any element present is also deleted.

Shortcut menu in the graphical editor
The following table shows the functions in the shortcut menu of the graphical editor:
Function

Description

Show all

Display of entire definition and value range

Zoom into curve

Displays the curve selected in the legend of the chart

Zoom in

Enlargement of the display

Zoom out

Reduction of the display

Open charts and curves Call of the "Charts and curves (Página 1973)" dialog
Cut

Removing the selected elements and copying them to the clipboard

Copy

Copying of the selected elements to the clipboard

Paste

Pasting of the elements from the clipboard to the last element

Delete

Deletion of the selected elements
Transitions to existing elements are also deleted.

Paste special

Call of the "Paste elements (Página 1977)" dialog

Group points

Combine the selected points into a group of points
The entry is displayed under the following conditions:
● Only points are selected in the graphic/tabular editor.
● There are no other elements between the selected points.

Dissolve point group

Ungroups the selected point group into individual points

Show/hide measuring
point labels

Showing or hiding the measuring points
The entry is displayed under the following conditions:
● Measuring lines are displayed.
● Measuring points are hidden/shown.

Move

Call of the "Move elements (Página 1977)" dialog

Scale

Call of the "Scale elements (Página 1977)" dialog

Consulte también
Dialogs in the shortcut menu (Página 1977)
Configuration charts - Charts and curves (Página 1973)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1951

Control de movimiento
6.1 Using S7-1500 Motion Control

Tabular editor
Structure of the tabular editor
The tabular editor shows all elements of the curve, sorted by their leading values. The elements
can be adjusted. New elements can be added.
The following properties are displayed in the corresponding column for each element of the
curve:
Column/Property

Description

First column

Sequential number of the element

Second column

Display of calculation problems that might occur with warning triangle
The alarm text is displayed in the tooltip of the warning triangle.

Element type

● Display/change of element type
● Adding elements
Possible element types:
● Point
● Point group
● Line
● Sine
● Polynomial
● Inverse sine
● Transition

Start

Parameter values at start point of the element

Leading value

Leading values at start point of the element

Following value

Following values at start point of the element

1)

Calculated effective position at start point of the element

Velocity1)

Position

Calculated effective velocity at start point of the element

Acceleration1)

Calculated effective acceleration at start point of the element

Jerk1)

Calculated effective jerk at start point of the element

End

Parameter values at end point of the element

Leading value

Leading values at end point of the element

Following value

Following values at end point of the element

1)

Position

Calculated effective position at end point of the element

Velocity1)

Calculated effective velocity at end point of the element

Acceleration1)

Calculated effective acceleration at end point of the element

Jerk

Calculated effective jerk at end point of the element

1)

Comment
1)

1952

Optional comment for element.

Displayed according to the configuration in "Properties (Inspector window) > Graphical view > Charts
and curves".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Editing the curve
The tabular editor provides you with the following options for editing the curve:
● Pasting elements
● Deleting elements
● Changing the element type
● Adjusting the leading value and following value of the boundary points

Inserting an element
To add an element in the tabular editor, follow these steps:
1. Select the desired element type from the "Add" drop-down list in the "Element type" column.
"Add" is always displayed in the line after the last added element.
The element is inserted after the last element with suitable values. The tabular editor and the
view of the properties (Inspector window) are updated. A transition to any element is
inserted automatically.
The parameters of the element can be adjusted in the graphical editor, tabular editor, and
properties (Inspector window).

Deleting an element
To delete an element in the tabular editor, follow these steps:
1. Select the line of the element.
2. Press the <Del> key.
The element is deleted. The tabular editor and the view of the properties (Inspector window)
are updated. A transition to any element present is also deleted.

Converting the element type
To convert the element type of an element in the tabular editor, follow these steps:
1. Select the line of the element.
2. Select the desired element type from the drop-down list in the "Element type" column.
The element type of the element is converted to the selected element type. The tabular
editor and the view of the properties (Inspector window) are updated. A transition to any
element present is adjusted automatically.

Adjusting the leading value and following value of the boundary points
To change the leading value/following value of the boundary points of an element in the tabular
editor, follow these steps:
1. Select the input field of the parameter to be changed.
2. Enter the desired value.
The tabular editor and the view of the properties (Inspector window) are updated. A
transition to any element present is adjusted automatically.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1953

Control de movimiento
6.1 Using S7-1500 Motion Control

Shortcut menu in the tabular editor
The following table shows the functions in the shortcut menu of the tabular editor:
Function

Description

Insert row above

Insert a table row/an element before the selected line/selected element
If no transition exists before the element, the selected element and the ad‐
joining elements are changed.

Insert row below

Insert a table row/an element after the selected line/selected element
If no transition exists before the element, the selected element and the ad‐
joining elements are changed.

Cut

Removing the selected elements and copying them to the clipboard

Copy

Copying of the selected elements to the clipboard

Paste

Pasting of the elements from the clipboard to the last element

Delete

Deletion of the selected elements
Transitions to existing elements are also deleted.

Paste special

Call of the "Paste elements (Página 1977)" dialog

Group points

Combine the selected points into a group of points
The entry is displayed under the following conditions:
● Only points are selected in the graphic/tabular editor.
● There are no other elements between the selected points.

Dissolve point group

Ungroups the selected point group into individual points

Move

Call of the "Move elements (Página 1977)" dialog

Scale

Call of the "Scale elements (Página 1977)" dialog

Properties (Inspector window)
Context-sensitive display
The parameters for the profile of the cam as well as for the elements are displayed in the
properties (Inspector window). The corresponding parameters are displayed according to the
selected element: If no element of the curve is selected, only the settings for the profile of the
cam are displayed. If an element of the curve is selected, the parameters of the element are
additionally displayed.

Configuration of profile - General
Configure the display range of the graphical editor in the "General" configuration window.
The inputs of the leading value range and following value range only effect the display in the
graphical editor. The cam is interpolated in the definition range between the following values:
● First defined interpolation point/start of the first segment of the cam
(<TO>.StatusCam.StartLeadingValue)
● Last defined interpolation point/end of the last segment of the cam
(<TO>.StatusCam.EndLeadingValue)

1954

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Display range of the leading value
In this area, you configure the display range of the leading value in the graphical editor:
Parameters

Description

Start

In this field you configure the start point of the display range of the leading
value.

End

In this field you configure the endpoint of the display range of the leading
value.

Display range of the following value
In this area, you can configure the limitation of the following value range in the graphical editor:
Parameters

Description

Minimum

In this field you configure the lowest permissible value for the following value
display range.

Maximum

In this field you configure the greatest permissible value for the following
value display range.

Configuration of profile - Default optimization settings
You configure the default values for optimization of transitions according to VDI Guideline 2143
in the "Default optimization settings" configuration window. The default values are used when
you use the "VDI-based optimization" optimization method for a transition (Página 1969) and
when you select the setting "Default optimization setting" for the continuity or the optimization
target.
The cam is interpolated with the Motion Control instruction MC_InterpolateCam according to
the settings for the VDI optimization.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1955

Control de movimiento
6.1 Using S7-1500 Motion Control

Defaults for the VDI optimization
Configure the default settings for continuity requirement and optimization target in this area:
Parameters

Description

Continuity

In the drop-down list, select which parameter is continuous in the boundary
points and is to be taken into consideration for optimization.
● Position
● Velocity
● Acceleration
● Jerk

Optimization target

In the drop-down list, select the optimization target according the VDI guide‐
line:
● Not specified
● Velocity (Cv)
● Acceleration (Ca)
● Jerk (Cj)
● Minimum Dynamic Moment (Cmdyn)

Configuration of profile - System interpolation
In the "System interpolation" configuration window, configure the interpolation of transitions
according to the system specifications. These settings are used when you use the "System
interpolation" optimization method for a transition (Página 1969) (default setting).
The cam is interpolated with the Motion Control instruction "MC_InterpolateCam".

System interpolation settings
Configure the interpolation type and the behavior of the boundary points in this area.
Parameters

Description

Interpolation type

In the drop-down list, select the interpolation type by which the transitions in
the curve are interpolated:
● Linear interpolation
● Interpolation with cubic splines
● Interpolation with Bézier splines

Behavior at boundary

In the drop-down list, select which behavior of the boundary points applies to
the interpolation:
● No restrictions
● First derivative continuous (velocity continuous)
The cam is interpolated in such a way that the first derivative (velocity) is
equal at the start and end of the cam.

1956

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Configuration of profile - Effective runtime curves
Configure the values for the leading axis and following axis that are applied to the effective
curve In the "Effective runtime curves" configuration window. The runtime emulation calculates
the effective curve with these applied values and displays the curve in the graphical editor with
the applied limits.
The inputs are not downloaded into the CPU. This means the cam is interpolated without these
inputs. You can use these applied values to test and visualize how the cam behaves during
operation, e.g. when entering a scaling at "MC_CamIn".

Settings of the leading axis
Configure the calculation and display of the curve on the leading value end in this area:
Parameters

Description

Copy from axis

Using the button and the "Copy leading value settings of axis" dialog,
select an axis whose maximum velocity is applied as the velocity for the
leading axis.

Scaling factor

Configure a leading value-side scaling factor in this field. This allows the
acceptance that a scaling is specified for an "MC_CamIn" job.

Unit of measure

In the selection list, select the unit of measurement for the leading value.

Unit of measure of the first
derivative

In the selection list, select the unit of measurement for the first derivative
of the leading value.

Velocity

Configure the velocity of the leading axis applied for the runtime emu‐
lation of the curve in this field.

Settings of the following axis
Configure the calculation and display of the curve on the following value side in this area:
Parameters

Description

Copy from axis

Using the button and the "Copy following value settings of axis" dialog,
select an axis whose maximum dynamic values are applied as the limits
to be checked during calculation and display of the curve.

Scaling factor

Configure a following value-side scaling factor in this field. This allows
the acceptance that a scaling is specified for an "MC_CamIn" job.

Unit of measure

In the selection list, select the unit of measurement for the following
value.

Unit of measure of the first
derivative

In the selection list, select the unit of measurement for the first derivative
of the following value.

Maximum velocity

Configure the maximum velocity for the following axis in this field.

Maximum acceleration

Configure the maximum acceleration for the following axis in this field.

Maximum jerk

Configure the maximum jerk for the following axis in this field.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1957

Control de movimiento
6.1 Using S7-1500 Motion Control

Configuration - Check
In the "Verification" configuration window, you configure which criteria the cam editor checks
when entering the curve. When you activate a check, the graphical and the tabular editor
display corresponding messages via a warning triangle on the element. Use the tooltip at the
warning triangle to display the message text.

Examination of limit violations
Configure the checks for compliance with the configured limits in this area:
Check/Element

Description

Observe the curve definition of the lea‐
ding and following value ranges

Select the "Check curve definition of the leading and follo‐
wing value ranges" check box to have the cam editor check
the curve accordingly.

Check adherence to the maximum va‐
lues of the derivatives of the effective
runtime curve

Select the "Check adherence to the maximum values of the
derivatives of the effective runtime curve" check box to have
the cam editor check the curve accordingly.

Verification of VDI suitability
Select the "Check the suitability of transitions in accordance with VDI" check box to have the
cam editor check the VDI suitability of the curve.
The cam editor checks the following with this:
● Support of the transition classification of the currently selected VDI transition
● Boundary value adjustment according to VDI

Verification of continuity
In the "Required continuity" list, select which parameter the cam editor checks for continuity:
● Position
● Velocity
● Acceleration
● Jerk
If a function or a derivative is discontinuous, all higher derivatives are also discontinuous.

Profile - Statistics
The "Statistics" properties window shows an overview of the number of elements of the cam,
as well as the minimum and maximum values of the effective curves for the slave value and the
derivatives. A cam consists of a maximum of 1000 points and a maximum of 50 segments.

1958

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Used elements
This area shows the number of used elements of the curve:
Parameters

Description

Points

This field shows the number of used points of the cam.
A cam consists of a maximum of 1000 points.

Segments

This field shows the number of used segments of the cam.
A cam consists of a maximum of 50 segments.

The use of points and segments depends on the compilation and configuration of the elements.
The following table shows the use of points and segments per element:
Element

Number of used points

Number of used segments

Point

1

0

Point at a transition with VDI-based optimization 0

0

Point group with point approximation mapping
method

Number of interpolation points con‐ 0
figured.
("Properties (Inspector window) >
Element > Parameter > Approxima‐
tion > Number of interpolation
points")
Default setting: 32

Point group with segment approximation map‐
ping method

0

Number of interpolation points con‐
figured - 1

Line

0

1

Sine

0

1

< of the 7th degree

0

1

of the 7th degree

0

2

Polynomial

Inverse sine

Number of interpolation points con‐ 0
figured.
("Properties (Inspector window) >
Element > Parameter > Approxima‐
tion > Number of interpolation
points")
Default: 32

Inverse sine to the right of a transition with VDIbased optimization

Number of interpolation points con‐ 0
figured - 1

Transition with system interpolation

0

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

0

1959

Control de movimiento
6.1 Using S7-1500 Motion Control
Element

Number of used points

Number of used segments

Sine

0

1

Sine with relative Lambda ≠ 0.5

0

2

Inclined sine

0

1

Inclined sine with relative Lambda ≠ 0.5

0

2

Polynomial

0

1

Sinus with relative Lambda ≠ 0.5

0

2

Dwell-in-reverse

0

5

Reverse-in-dwell

0

5

Dwell-in-dwell

0

6

Dwell-in-dwell

0

3

Constant velocity-in-constant velo‐
city

0

4

Constant-velocity-in-dwell

0

4

Dwell-in-constant velocity

Transition with VDI-based optimization
Motion rule

Modified acceleration trapezoid
Motion task

Modified sine
Motion task

0

4

Sine line combination

0

3

Harmonic combination

0

3

Double-harmonic transition

Number of interpolation points con‐ 0
figured.
("Properties (Inspector window) >
Element > Parameter > Approxima‐
tion > Number of interpolation
points")
Default setting: 32

Quadratic parabola

0

2

Lambda = turning point of the curve

Value ranges
This area shows the minimum and maximum values of the effective curves for the following
value and the derivatives.

1960

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Boundary conditions
The following boundary conditions apply to the input and use of points and segments:
● Points
With points with the same leading values, the point that you have entered last or which is
listed in the tabular editor is active.
● Segments
– Gaps between segments are filled with a transition segment.
– For gaps in the leading value range of less than 1.0E-4, segment end points and
segment start points are pulled together.
– For gaps in the leading value range greater than 1.0E-4, a new transition segment is
inserted.
– For overlaps, the new segment is inserted from the start point and used completely.
When the previous segment is defined in excess of the new segment, the previous
segment continues to be used after the end point of the new segment.
● Interpolation points and segments (mixed cams)
The segment is used when points are defined in the same range.

Configuration of elements - Parameters
In the "Parameters/Characteristic" configuration window, configure the parameters of the
selected element of the curve. The inputs are applied in the tabular and graphical editors. The
element-specific parameters are displayed according to the selected element:
● Point (Página 1961)
● Point group (Página 1962)
● Line (Página 1964)
● Sine (Página 1965)
● Polynomial (Página 1966)
● Inverse sine (Página 1968)
● Transition (characteristic) (Página 1969)

Configuration of elements - Parameters (Point)
Configure the parameters of the selected element in the "Parameters" configuration window.

Parameters
Configure the parameters of the selected point in this area:
Parameter/Option

Description

Leading value of the point
Leading value

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

In this field, configure the leading value of the point (value in the definition
area).

1961

Control de movimiento
6.1 Using S7-1500 Motion Control
Parameter/Option

Description

Following values of the
point
Following value

Configure the following value of the point (value in the range of the function)
in this field.

Use first derivative

Select the check box to specify the first derivative in the selected point and
to include it in the interpolation of the cam.

First derivative

Configure the value of the first derivative in the selected point in this field.

Use second derivative

Select the check box to specify the second derivative in the selected point
and to include it in the interpolation of the cam.

Second derivative

Configure the value of the second derivative in the selected point in this
field.

Use third derivative

Select the check box to specify the third derivative in the selected point and
to include it in the interpolation of the cam.

Third derivative

Configure the value of the third derivative in the selected point in this field.

The derivations are taken into consideration during VDI-based optimization of transitions of the
points to other elements.

Consulte también
Inserting a point (Página 1945)

Configuration elements - Parameters (point group)
Configure the parameters of the selected element in the "Parameters" configuration window.

Parameters
In this area, configure the parameters of the selected point group:
Parameter/Option

Description

Leading values of the point
group
Start

In this field, configure the start point of the point group in the leading value
range (definition area).

End

In this field, configure the end point of the point group in the leading value
area (definition area).

Interpolation points

1962

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Parameter/Option
Definition type of the lea‐
ding values

Description
In the drop-down list, select how the leading values of the interpolation
points are specified:
● Relative to the segment
You specify the leading values of the interpolation points relative to
the group of points from 0.0 to 1.0. The value 0.0 corresponds to the
beginning of the point group. The value 1.0 corresponds to the end of
the point group.
● Absolute in the profile
You specify the leading values of the interpolation points as absolute
values.

Definition type of the follo‐ In the drop-down list, select how the following values of the interpolation
wing values
points are specified:
● Relative to the segment
You specify the following values of the interpolation points relative to
the following value range of the point group from 0.0 to 1.0. The value
0.0 corresponds to the configured minimum following value of the
point group. The value 1.0 corresponds to the configured maximum
following value of the point group.
● Absolute in the profile
You specify the following values of the interpolation points as
absolute values.
Minimum following value

In this field, configure the minimum following value for the point group in
the following value range.

Maximum following value

In this field, configure the maximum following value of the point group in
the following value range (value range).
Use the "Add interpolation point" button to add an interpolation point to
the point group.

Interpolation points

This table shows the configured interpolation points sorted by increasing
leading value.
Add breakpoints using the
button. Delete interpolation points by mar‐
king a row and pressing <Delete>. If you delete all points except one, the
element type is changed from "Point group" to "Point".

Leading value

In this field, configure the leading value of the interpolation point (value in
the definition area).

Following value

In this field, configure the following value of the interpolation point (value
in the value range).

Interpolation
Interpolation type

In the drop-down list, select the interpolation type to be used for interpo‐
lating the point group:
● Interpolation with cubic splines
● Interpolation with Bézier splines

Approximation

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1963

Control de movimiento
6.1 Using S7-1500 Motion Control
Parameter/Option
Mapping method

Description
Select the mapping method in the drop-down list.
● Point approximation
● Segment approximation

Number of interpolation
points

Configure the number of breakpoints for the point approximation in this
field.

Maximum following value
tolerance

In this field, enter the maximum permissible deviation (absolute) of the
approximation from the interpolation points.
If the configured value is exceeded, a warning is displayed in the grap‐
hical editor at the point group.

Consulte también
Insert point group (Página 1946)

Configuration of elements - Parameters (line)
Configure the parameters of the selected element in the "Parameters" configuration window.

Parameters
Configure the parameters of the selected line in this area:
Parameters

Description

Leading values of the line
Start

Configure the start point of the line in the leading value range (definition
range) in this field.

End

Configure the end point of the line in the leading value range (definition
range) in this field.

Following values of the li‐
ne
Definition by

In the selection list, select the parameters to be used to define the line:
● Following values at start and end
● Following value at the start and incline
● Incline and following value at end
The corresponding parameters are displayed based on the selection.

Start

Configure the start point of the line in the following value range (value
range) in this field.

End

Configure the end point of the line in the following value range (value range)
in this field.

Incline

Configure the incline of the line in this field.

Consulte también
Inserting a line (Página 1947)

1964

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Configuration of elements - Parameters (sine)
Configure the parameters of the selected element in the "Parameters" configuration window.

Parameters
Configure the parameters of the selected sine element in this area:
Parameters

Description

Leading values of the sine
Start

Configure the start point of the sine element in the leading value range
(definition range) in this field.

End

Configure the end point of the sine element in the leading value range
(definition range) in this field.

Trigonometric parameters
Amplitude

Configure the amplitude of the sine element in this field.

Definition by

In the drop-down list, select how the sine element is defined:
● Phase at start and at end
● Phase at start and period length
● Phase at start and frequency
● Period length and phase at end
● Frequency and phase at end
The corresponding parameters are displayed based on the selection.

Phase angle at start

Configure the phase angle at the start of the sine element in this field.

Phase angle at end

Configure the phase angle at the end of the sine element in this field.

Period length

Configure the period length of the sine element in this field.

Frequency

Configure the frequency of the sine element in this field.

Extended parameters
Segment type

Select the variant of the sine element in the drop-down list.
● Sine
● Inclined sine
The corresponding parameters are displayed based on the selection.
If you have configured an inclined sine, additional orientation lines are dis‐
played in the graphical editor for the amplitude and center position.

Offset

Configure the oscillation midpoint of the sine element in this field.

Definition of inclination
as a function of:

In the drop-down list, select how the inclined sine element is defined:
● Offset at start and end
● Offset at start and inclination
● Inclination and offset at end
The corresponding parameters are displayed based on the selection.

Offset at start

Configure the center of oscillation at the start of the sine element in this field.

Offset at end

Configure the center of oscillation at the end of the sine element in this field.

Inclination

Configure the inclination of the sine element in this field.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1965

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Inserting a sine (Página 1948)

Configuration of elements - Parameters (polynomial)
Configure the parameters of the selected element in the "Parameters" configuration window.

Parameters
Configure the parameters of the selected polynomial in this area:
Parameters

Description

Leading values of the
polynomial
Start

Configure the start point of the polynomial in the leading value range (de‐
finition range) in this field.

End

Configure the end point of the polynomial in the leading value range (defi‐
nition range) in this field.

Polynomial parameters

1966

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Parameters
Definition by

Description
In the selection list, select how the polynomial is defined:
● Coefficients
● Boundary values
The corresponding parameters are displayed based on the selection.

Coefficients

Configure the coefficients of the 6th degree polynomial function in these
fields:
P(x) = a6x6 + a5x5 + a4x4 + a3x3 + a2x2 + a1x + a0
The coefficients are shown in scientific notation, e.g. "9.6450617283e-11".

Following value - Left
boundary value

Configure the following value at the start of the polynomial in this field.

Following value - Right
boundary value

Configure the following value at the end of the polynomial in this field.

Use first derivative

Select the check box to specify the first derivative in the left/right boundary
value of the polynomial and to include it in the interpolation of the cam.

First derivative - left
boundary value

Configure the first derivative (velocity) for the following value at the start of
the polynomial in this field.

First derivative - right
boundary value

Configure the first derivative (velocity) for the following value at the end of
the polynomial in this field.

Use second derivative

Select the check box to specify the second derivative in the left/right boun‐
dary value of the polynomial and to include it in the interpolation of the cam.

Second derivative - left
boundary value

Configure the second derivative (acceleration) for the following value at the
start of the polynomial in this field.

Second derivative right boundary value

Configure the second derivative (acceleration) for the following value at the
end of the polynomial in this field.

Use third derivative

Select the check box to specify the third derivative in the left/right boundary
value of the polynomial and to include it in the interpolation of the cam.

Third derivative - left
boundary value

Configure the third derivative (jerk) for the following value at the start of the
polynomial in this field.

Third derivation - right
boundary value

Configure the third derivative (jerk) for the following value at the end of the
polynomial in this field.

Lambda

In the selection list, select how the turning point of the polynomial is spe‐
cified in the "Lambda position" field:
● No lambda
Do not enter any value. The position of the point of inflection is
calculated automatically.
● Relative to the element
You specify the leading value of the turning point relative to the
polynomial from 0.0 to 1.0. The value 0.0 corresponds to the beginning
of the polynomial. The value 1.0 corresponds to the end of the
polynomial.
● Absolute in the profile
You specify the leading value of the point of inflection as an absolute
value.
In this field, configure the leading value of the point of inflection for the
polynomial according to the selection in the selection list.

Extended parameters

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1967

Control de movimiento
6.1 Using S7-1500 Motion Control
Parameters
Segment type

Description
In the selection list, select whether or not the polynomial is to have a trigo‐
nometric component.
When "Polynomial with trigonometric portion" is selected, the correspon‐
ding trigonometric parameters are displayed, as they are with sine. When
a sine element is converted to a polynomial, the sine element is configured
as a polynomial with trigonometric portion. The shape of the element is
retained.
You have the option to define the trigonometric portion of the polynomial
using the following formula:
Y(x) = a6x6 + a5x5 + a4x4 + a3x3 + a2x2 + a1x + a0 + b0sin((b1x) + b2)
a0…6: Coefficient of order 0…6 of the polynomial
b0: Amplitude of the trigonometric portion
b1: Period of the trigonometric portion
b2: Phase offset of the trigonometric portion

Amplitude

Configure the amplitude of the trigonometric component in this field.

Definition by

In the selection list, select how the trigonometric component is defined:
● Phase at start and at end
● Phase at start and period length
● Phase at start and frequency
● Period length and phase at end
● Frequency and phase at end
The corresponding parameters are displayed based on the selection.

Phase angle at start

Configure the phase angle at the start of the trigonometric component in
this field.

Phase angle at end

Configure the phase angle at the end of the trigonometric component in this
field.

Period length

Configure the period length of the trigonometric component in this field.

Frequency

Configure the frequency of the trigonometric component in this field.

Consulte también
Inserting a polynomial (Página 1949)

Configuration of elements - Parameters (inverse sine)
Configure the parameters of the selected element in the "Parameters" configuration window.
The inverse sine is defined within the definition range [-1, 1]. The inverse sine can be calculated
for the entire definition range or a restricted definition range of the arcsine function.
An inverse sine is approximated using interpolation points of the arcsine function.

1968

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Parameters
Configure the parameters of the selected inverse sine in this area:
Parameters

Description

Leading values of the in‐
verse sine
Start

Configure the start point of the inverse sine in the leading value range
(definition range) in this field.

End

Configure the end point of the inverse sine in the leading value range (de‐
finition range) in this field.

Following values of the in‐
verse sine
Minimum

Configure the minimum value of the inverse sine in the following value
range (value range) in this field.

Maximum

Configure the maximum value of the inverse sine in the following value
range (value range) in this field.

Definition range
Not mirrored/mirrored

Select whether or not the inverse sine is to be mirrored about the abscissa.

Start

Configure the start point in the definition range of the arcsine function that
is to be used in this field.

End

Configure the end point in the definition range of the arcsine function that is
to be used in this field.

Approximation
Number of interpolation
points

Configure the number of interpolation points for the approximation in this
field.

Maximum following va‐
lue tolerance

In this field, specify the maximum permitted deviation (absolute) of the
approximation from the arcsine function.
If the configured value is exceeded, a warning is displayed in the graphical
editor for the arcsine element.

Consulte también
Inserting an inverse sine (Página 1950)

Configuration of elements - Characteristic (transition)
Configure the parameters of the selected transition in the "Characteristics" configuration
window.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1969

Control de movimiento
6.1 Using S7-1500 Motion Control

Characteristics
Configure the settings for optimization of the transition in this area:
Parameters

Description

Interpolation settings of the
transition
Optimization method

Select the optimization method in the drop-down list.
● System interpolation
The CPU defines the optimization parameters automatically
according to the settings of the system interpolation (Página 1956).
● VDI-based optimization
You adjust the optimization manually. The inputs are applied
automatically according to the VDI Guideline 2143.

Motion task

The transition type is determined from the properties of the adjacent
elements of the transition and displayed in this field.

Continuity at start/end

In the drop-down lists, select which parameter is continuous in the boun‐
dary points and is to be included for optimization.
● Default optimization setting (setting under "Profile > Default
optimization settings (Página 1955)")
● Position
● Velocity (bumpless)
● Acceleration (jerkless)
● Jerk (jerk continuity permitted on one side only)

Optimization target

In the drop-down list, select the optimization target:
● Default optimization setting (setting under "Profile > Default
optimization settings")
● Not specified
● Velocity (Cv)
● Acceleration (Ca)
● Jerk (Cj)
● Minimum Dynamic Moment (Cmdyn)

Selection of motion rule

1970

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Parameters
Motion rule

Description
In the drop-down list, select the motion rule according to which optimi‐
zation is to occur.
● Line
● Quadratic parabola
● Sine
● Polynomial
● Inclined sine
● Modified acceleration trapezoid
● Modified sine
● Harmonic combination
● Double-harmonic transition
● Sine line combination
The selection is automatically limited to the motion rules that can be
applied according to the motion task and the selected boundary condi‐
tions. Additional parameters are displayed depending on the selected
motion rule.
If you have changed the motion task in such a way that the motion rule
can no longer be applied, a notice is displayed. In this case, you need to
select a motion rule that can be applied.

Parameter used

In the drop-down list, select the parameters to be included in the optimi‐
zation:
● Lambda
● Maximum acceleration (Ca)
● Maximum deceleration (Ca*)
The selection is automatically limited to the parameters that can be ap‐
plied according to the motion rule.

Lambda

In the drop-down list, select the transition point in the "Lambda position"
field:
● No lambda
Do not enter any value. The position of the point of inflection is
calculated automatically.
● Relative to the segment
You specify the leading value of the turning point relative to the
transition from 0.0 to 1.0. The value 0.0 corresponds to the beginning
of the transition. The value 1.0 corresponds to the end of the
transition.
● Absolute in the profile
You specify the leading value of the point of inflection as an absolute
value.

Lambda position

In this field, configure the leading value of the turning point for the tran‐
sition according to the selection in the "Lambda" drop-down list.

Maximum acceleration
(Ca)

Configure the maximum acceleration (Ca) for the transition in this field.

Maximum deceleration
(Ca*)

Configure the maximum deceleration (Ca*) for the transition in this field.

Approximation

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1971

Control de movimiento
6.1 Using S7-1500 Motion Control
Parameters

Description

Number of interpolation
points

In this field, configure the number of interpolation points for the transition.

Maximum following va‐
lue tolerance

In this field, enter the maximum permitted deviation (absolute) of the
approximation from the motion law.
If the configured value is exceeded, a warning is displayed in the grap‐
hical editor at the transition.

Characteristic values of the
transition

The characteristic values of the transition that are relevant according to
VDI 2143 are displayed in this area. The maximum value and the stan‐
dardized value are displayed for the following characteristic values:
● Velocity (Cv)
● Acceleration (Ca)
● Deceleration (Ca*)
● Jerk (Cj)
● Dynamic torque (Cmdyn)

Motion jobs according to VDI Guideline 2143
The VDI Guideline 2143 distinguishes between areas of usage and motion transitions:
● Areas of usage correspond to the sequences in a process, which means the inserted
elements of the cam.
● Motion transitions are transitions between areas of usage that are not directly relevant to the
process but must meet specific boundary conditions (e.g. velocity consistency).
The following motion tasks are defined based on VDI guideline 2143:
Motion tasks

Designation

Properties

Dwell

R

Velocity = 0
Acceleration = 0

Constant velocity

G

Velocity ≠ 0
Acceleration = 0

Reverse

U

Velocity = 0
Acceleration ≠ 0

Motion

B

Velocity ≠ 0
Acceleration ≠ 0

The following figure shows an example of the motion tasks:

1972

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
I[


8




*



5

























;

The figure below shows the possible combinations of motion tasks:
5

5

*

8

%

Y 
D 

Y 
D 

Y 
D 

Y 
D 

*
Y 
D 

Y 
D 

Y 
D 

Y 
D 

8
Y 
D 

Y 
D 

Y 
D 
Y 
D 

Y 
D 

Y 
D 
Y 
D 

Y 
D 

Y 
D 
Y 
D 

Y 
D 

Y 
D 

%
Y 
D 

Y 
D 

Y 
D 

Y 
D 

Y 
D 
Y 
D 
Y 
D 
Y 
D 
Y 
D 
Y 
D 
Y 
D 
Y 
D 

Representation (Inspector window)
Configuration charts - Charts and curves
In the "Charts and curves" configuration window, configure the display of the graphical editor.

"Reset to defaults" button
Use this button to reset all settings of the view of charts and curves to the default settings.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1973

Control de movimiento
6.1 Using S7-1500 Motion Control

Configuration table
Configure the display of the graphical editor in the table:
Column

Description

Show

Displaying/hiding of charts 1 to 4

Visible

Displaying/hiding of curves in the chart
You can show or hide online curves already offline.
The curve becomes visible when you have shown the curve, established an
online connection and read out the online curve.

Name

Name of chart or curve
New curves can be added. Existing curves can be removed.
Curves of other cams can also be displayed. The name of the other cam is
also displayed in the table and in the legend of the chart.
A curve can be inserted multiple times in a chart, e.g. in order to display it with
different scalings.

Color

Line color of the curve

Line type

Line type of the curve

Offset of the leading va‐ Movement of the curve on the abscissa
lues1)
Multiplier for leading va‐ Scaling of abscissa
lues1)
Offset of the following
values1)

Movement of the curve on the ordinate

Multiplier for following
values1)

Scaling of ordinate

1)

Only affects the display of the curve in the chart. You specify the scaling and shifting of the cam during
camming in the Motion Control instruction "MC_CamIn".

Configuration charts - Snap grid
In the "Snap grid" configuration window, you configure the grid spacing for aligning inputs to the
grid in the graphical editor. When "Snap" is activated, inputs and element end points are aligned
to this grid and to other element end points.

Snap grid spacing
In this area, configure the grid spacing of the snap grid:
Parameter

Description

Grid spacing leading va‐ Configure the grid spacing on the abscissa (leading values) in this field.
lue
Grid spacing following
value

1974

Configure the grid spacing on the ordinate (following values) in this field.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Configuration - Decimal places
In the "Decimal places" configuration window, you configure how many decimal places are
used to represent the values in the graphical and tabular editor as well as in the configuration
windows. The values are rounded in the displays. The settings do not affect the calculation of
the curves. The curves are calculated with higher accuracy regardless of the settings.

Displayed decimal places
In this area, configure the displayed decimal places:
Parameter

Description

Tabular editor and con‐
figuration window

In this field, configure the number of decimal places for displaying values in
the tabular editor and in the configuration windows.

Graphical editor

In this field, configure the number of decimal places for displaying values in
the graphical editor.

Importing/exporting cam
You can use the toolbar to export cams from the cam editor and import cams into the cam
editor.

Importing cam
ATENCIÓN
Machine damage
Importing corrupt files (.txt, .csv) can result in unwanted behavior of the axes.
Each time you import a cam from a file, check the integrity of the imported data.
The following table shows the supported file formats for importing/exporting a cam:
File format

Comment

Import format
SIMOTION SCOUT
CamTool format/MCD

MCD exchange format is automatically detected, imported data:

*.txt, *.csv

● Lines

● Interpolated points
● Sine elements
● Inverse sine elements
● Polynomials
● Transitions

Proprietary binary for‐
mat

The binary format is used for exchanging cams between multiple TIA Portal
installations and external applications.

*.bin

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1975

Control de movimiento
6.1 Using S7-1500 Motion Control
To import a cam, follow these steps:
1. In the toolbar, click the icon
"Import cam from file".
The "Cam import" dialog opens.
2. Select the file type of the file you want to import.
3. Select the file you want to import from the file directory.
4. Click the "Open" button.
The cam is opened in the cam editor. All previous entries in the editor are discarded.

Exporting cam
The following table shows the structure of the "Cam export" dialog:
Parameter/Element

Description

Export format
Export as

Select the export format in the drop-down list:
● MCD exchange format
● SIMOTION SCOUT CamTool format
● Point list
● Binary format

Delimiters

In the drop-down list, select the delimiter with which the data fields are to be
separated in the file:
● Comma
● Tab

Number of points

In this field, configure the number of points to be exported to a point list. The
more points exported, the more precise the configured cam formed by the
point list.
Possible values: 0 to 1E5
Default setting: 360

Additional curves

Point list only

Velocity

Select the "Velocity" check box when the derivative curve of the velocity is
to be exported in addition to the position.

Acceleration

Select the "Acceleration" check box if you want to export the derivative
curve of the acceleration in addition to the position.

Jerk

Select the "Jerk" check box when the derivative curve of the jerk is to be
exported in addition to the position.

Directory for export
File name

Enter a file name in this field.

Directory

In this field, enter the directory into which the file is to be written.

Export

Export the file

Cancel

Cancellation of export and closing of the dialog

To export a cam, follow these steps:
1. In the toolbar, click the icon
"Export cam to file".
The "Cam export" dialog opens.
2. Select the export format in the "Export as" drop-down list.

1976

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
3. Optionally, configure the delimiter, the number of points, and the additional curves for the
export.
4. Enter a file name in the "File name" box.
5. Select the directory to which the file is written.
6. Click "Export".

Consulte también
Structure of the graphical editor (Página 1943)

Dialogs in the shortcut menu
The following dialogs can be called with the shortcut menu of the graphical and tabular editor:
● Pasting elements
● Moving elements
● Scaling elements

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1977

Control de movimiento
6.1 Using S7-1500 Motion Control

"Paste elements" dialog
The following table shows the structure of the "Paste elements" dialog:
Parameter/Element

Description

Insert mode

Select the Insert mode from the selection list:
Overwrite from the
end to the left

You overwrite the selected elements with the elements
from the clipboard starting from the end in the direction
of smaller leading values. The end of the inserted ele‐
ments then lies at the end of the selected elements.
Elements that are located in the leading value range of
the elements in the clipboard are overwritten or trunca‐
ted.

Overwrite from the
start to the right

Starting from the start, you overwrite the selected ele‐
ments with the elements from the clipboard in the direc‐
tion of larger leading values. The start of the inserted
elements then lies at the start of the selected elements.
Elements that are located in the leading value range of
the elements in the clipboard are overwritten or trunca‐
ted.

Overwrite from the
middle

Starting from the center, you overwrite the selected ele‐
ments with the elements from the clipboard. The center
of the inserted elements then lies at the center of the
selected elements.
Elements that are located in the leading value range of
the elements in the clipboard are overwritten or trunca‐
ted.

Scale selection to
the leading value
range

The elements in the clipboard are scaled to the leading
value range of selected elements. The start and end of
the inserted elements then lie at the start and end of the
selected elements.

Apply leading va‐
lues from the clip‐
board

The elements in the clipboard are pasted with the lea‐
ding values at the start and end.
Elements that are located in the leading value range of
the elements in the clipboard are overwritten or trunca‐
ted.

Paste

Pasting of the elements from the clipboard with the selected mode

Cancel

Cancellation of paste operation and closing of the dialog

"Move elements" dialog
The following table shows the structure of the "Move elements" dialog:

1978

Parameter/Element

Description

Horizontal distance

In this field, enter the shift of the selection on the abscissa (x axis).

Vertical distance

In this field, enter the shift of the selection on the ordinate (y axis).

Move

Move the selection by the entered distance

Cancel

Cancellation of move operation and closing of the dialog

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

"Scale elements" dialog
The following table shows the structure of the "Scale elements" dialog:
Parameter/Element

Description

Adjust to leading value
range

In this field, enter the scaling length (leading value side) to which you want to
scale the selection.

Anchor point

Select the direction of scaling in the selection list:
Left boundary

The selection is adjusted by the left boundary point to
the scaling length.

Center

The selection is adjusted by the center point to the sca‐
ling length.

Right boundary

The selection is adjusted by the right boundary point to
the scaling length.

Scale

Scaling with the selected parameter values

Cancel

Cancellation of scaling and closing of the dialog

Consulte también
Shortcut menu in the tabular editor (Página 1954)
Shortcut menu in the graphical editor (Página 1951)

6.1.4.6

Diagnostics
The "Diagnostics" section is limited to describing the diagnostics view of the synchronous axis
technology object in the TIA Portal.
You will find a description of Motion Control diagnostics in the following sections of the
"S7-1500/S7-1500T Motion Control overview" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766459):
● Diagnostic concept
● Technology alarms
● Errors in Motion Control instructions
A comprehensive description of the system diagnostics of the S7‑1500 CPU can be found in the
"Diagnostics" function manual (https://support.automation.siemens.com/WW/view/en/
59192926).

Synchronous axis technology object
Status and error bits
You use the "Technology object > Diagnostics > Status and error bits" diagnostic function in the
TIA Portal to monitor the status and error messages for the technology object. The diagnostics
function is available in online operation.
The meaning of the status and error messages is described in the following tables. The
associated technology object tag is given in parentheses.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1979

Control de movimiento
6.1 Using S7-1500 Motion Control

Axis status
The following table shows the possible axis status values:
Status

Description

Simulation active

The axis is simulated in the CPU. Setpoints are not output to the drive.
(<TO>.StatusWord.X25 (AxisSimulation))

Enabled

The technology object has been enabled. You can move the axis with motion
jobs.
(<TO>.StatusWord.X0 (Enable))

Position-controlled mo‐
de

The axis is in position-controlled mode.

Homed

The technology object is homed. The relationship between the position in the
technology object and the mechanical position was successfully created.

(Inversion of <TO>.StatusWord.X28 (NonPositionControlled))

(<TO>.StatusWord.X5 (HomingDone))
Error

An error occurred at the technology object. Detailed information about the
error is available in the "Error" area and in the "<TO>.ErrorDetail.Number"
and "<TO>.ErrorDetail.Reaction" tags of the technology object.

Restart active

The technology object is being reinitialized.

(<TO>.StatusWord.X1 (Error))
(<TO>.StatusWord.X2 (RestartActive))
Axis control panel active The axis control panel is active. The axis control panel has master control
over the technology object. You cannot control the axis from the user pro‐
gram.
(<TO>.StatusWord.X4 (ControlPanelActive))
Drive ready

Drive is ready to execute setpoints.
(<TO>.StatusDrive.InOperation)

Encoder values valid

Encoder values are valid
(<TO>.StatusSensor[1].State)

Encoder values valid
(S7‑1500T)

The encoder values of encoder 1, encoder 2, encoder 3 or encoder 4 are
valid.
(<TO>.StatusSensor[1..4].State)

Active encoder

Encoder is operational.
(<TO>.OperativeSensor)

Active encoder
(S7‑1500T)

The encoder in effect operationally is encoder 1, encoder 2, encoder 3 or
encoder 4.
(<TO>.OperativeSensor)

Restart required

Data relevant for the restart has been changed. The changes are applied only
after a restart of the technology object.
(<TO>.StatusWord.X3 (OnlineStartValuesChanged))

1980

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Status limit switch
The following table shows the possibilities for enabling the software and hardware limit
switches:
Status

Description

Negative SW limit
switch approached

The negative software limit switch was reached.

Positive SW limit switch
approached

The positive software limit switch was reached.

Negative HW limit
switch approached

The negative hardware limit switch has been approached or overtraveled.

Positive HW limit switch
approached

The positive hardware limit switch has been approached or overtraveled.

(<TO>.StatusWord.X15 (SWLimitMinActive))
(<TO>.StatusWord.X16 (SWLimitMaxActive))
(<TO>.StatusWord.X17 (HWLimitMinActive))
(<TO>.StatusWord.X18 (HWLimitMaxActive))

Motion status
The following table shows the possible axis motion status values:
Status

Description

Done (no job running)

No job active at technology object.
(<TO>.StatusWord.X6 (Done))

Homing job

The technology object executes a homing job of the Motion Control instruc‐
tion "MC_Home" or from the axis control panel.
(<TO>.StatusWord.X11 (HomingCommand))

Jog

The axis is being moved with a job for jog mode of Motion Control instruction
"MC_MoveJog".
(<TO>.StatusWord.X9 (JogCommand))

Velocity specification

The axis is traversed with a job with velocity specification of the Motion Con‐
trol instruction "MC_MoveVelocity" or from the axis control panel.
(<TO>.StatusWord.X10 (VelocityCommand))

Positioning job

The axis is traversed with a positioning job of Motion Control instruction
"MC_MoveAbsolute" or "MC_MoveRelative" or from the axis control panel.
(<TO>.StatusWord.X8 (PositioningCommand))

Constant velocity

The axis is moved with constant velocity or is stationary.
(<TO>.StatusWord.X12 (ConstantVelocity))

Standstill

The axis is in standstill.
(<TO>.StatusWord.X7 (StandStill))

Accelerating

Axis is being accelerated.
(<TO>.StatusWord.X13 (Accelerating))

Decelerating

The axis is being decelerated.
(<TO>.StatusWord.X14 (Decelerating))

Torque limit active

At least the threshold value (default 90%) of the preset force/torque limitation
acts on the axis.
(<TO>.StatusWord.X27 (InLimitation))

Stop job active

The axis is stopped and disabled by Motion Control instruction "MC_Stop".
(<TO>.StatusWord2.X0 (StopCommand))

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1981

Control de movimiento
6.1 Using S7-1500 Motion Control

Synchronous operation status
Status

Description

Synchronization

The axis is synchronized to the leading value of a leading axis.
(<TO>.StatusWord.X21 (Synchronizing))

Synchronous

The axis is synchronized and moves synchronously to the leading axis.
(<TO>.StatusWord.X22 (Synchronous))

Synchronization pen‐
ding (S7‑1500T)

A synchronous operation is pending until the leading value reaches the start
position for synchronization.
(<TO>.StatusSynchronizedMotion.WaitingFunctionState.X2 (GearInPos‐
Waiting); <TO>.StatusSynchronizedMotion.WaitingFunctionState.X3 (Ca‐
mInWaiting))

Additive leading value
active (S7‑1500T)

The axis receives an additive leading value with the Motion Control instruc‐
tion "MC_LeadingValueAdditive".
(<TO>.StatusSynchronizedMotion.StatusWord.X4 (LeadingValueAdditive‐
Command))

Superimposed profile
(S7-1500T)

The axis is being moved superimposed with a job of Motion Control instruc‐
tion "MC_MoveSuperimposed".
(<TO>.StatusWord.X23 (SuperimposedMotionCommand))

Error
The following table shows the possible errors:
Error

Description

System

A system-internal error has occurred.
(<TO>.ErrorWord.X0 (SystemFault))

Configuration

A configuration error has occurred.
One or more configuration parameters are inconsistent or invalid.
The technology object was incorrectly configured, or editable configuration
data was incorrectly modified during runtime of the user program.
(<TO>.ErrorWord.X1 (ConfigFault))

User program

An error occurred in the user program at a Motion Control instruction or its
use.
(<TO>.ErrorWord.X2 (UserFault))

Drive

An error occurred in the drive.
(<TO>.ErrorWord.X4 (DriveFault))

Encoder

An error occurred in the encoder system.

Encoder (S7‑1500T)

An error has occurred in the encoder system of encoder 1, encoder 2, enco‐
der 3 or encoder 4.

(<TO>.ErrorWord.X5 (SensorFault))

(<TO>.ErrorWord.X5 (SensorFault))
Data exchange

Communication with a connected device is faulty.
(<TO>.ErrorWord.X7 (CommunicationFault))

I/O

An error occurred accessing a logical address.
(<TO>.ErrorWord.X13 (PeripheralError))

1982

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Error

Description

Job rejected

A job cannot be executed.
You cannot execute a Motion Control instruction because necessary requi‐
rements are not fulfilled (for example, technology object not homed).
(<TO>.ErrorWord.X3 (CommandNotAccepted))

Homing

An error occurred during a homing process.
(<TO>.ErrorWord.X10 (HomingFault))

Positioning

The positioning axis was not positioned correctly at the end of a positioning
motion.
(<TO>.ErrorWord.X12 (PositioningFault))

Dynamic limitation

The dynamic values are limited to the dynamic limits.
(<TO>.ErrorWord.X6 (DynamicError))

Following error

The maximum permitted following error has been exceeded.
(<TO>.ErrorWord.X11 (FollowingErrorFault))

SW limit switch

A software limit switch has been reached.
(<TO>.ErrorWord.X8 (SwLimit))

HW limit switch

A hardware limit switch has been reached or overtraveled.
(<TO>.ErrorWord.X9 (HWLimit))

Adapt

An error occurred during data adaption.

Synchronization

Synchronous axis only

(<TO>.ErrorWord.X15 (AdaptionError))
An error occurred during synchronization. The leading axis specified for the
corresponding Motion Control instruction was not configured as a possible
leading axis.
(<TO>.ErrorWord.X14 (SynchronousError))

Warnings
The following table shows the possible warnings:
Warning

Description

Configuration

One or several configuration parameters are adjusted internally at a certain
time.
(<TO>.WarningWord.X1 (ConfigWarning))

Job rejected

Job cannot be executed.
You cannot execute a Motion Control instruction because necessary requi‐
rements are not fulfilled.
(<TO>.WarningWord.X3 (CommandNotAccepted))

Dynamic limitation

The dynamic values are limited to the dynamic limits.
(<TO>.WarningWord.X6 (DynamicWarning))

Synchronization

Synchronous axis only
An error occurred during synchronization. The leading axis specified for the
corresponding Motion Control instruction was not configured as a possible
leading axis.
(<TO>.WarningWord.X14 (SynchronousWarning))

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1983

Control de movimiento
6.1 Using S7-1500 Motion Control

Alarm display
For additional information and to acknowledge the error, go to the Inspector window by clicking
on the "Alarm display" link.

Additional information
An option for evaluating the individual status bits can be found in the section "Evaluating
StatusWord, ErrorWord and WarningWord" of the "S7-1500/S7-1500T Motion Control
overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459) documentation.

Motion status
You use the "Technology object > Diagnostics > Motion status" diagnostic function in the TIA
Portal to monitor the motion status of the axis. The diagnostics function is available in online
operation.

"Setpoints" area
The following table shows the meaning of the status data:
Status

Description

Target position

Current target position of an active positioning job
The target position value is only valid during execution of a positioning job.
(<TO>.StatusPositioning.TargetPosition)

Position setpoint

Setpoint position of the axis
(<TO>.Position)

Velocity setpoint

Velocity setpoint of the axis
(<TO>.Velocity)

Velocity override

Percentage correction of the velocity specification
The velocity setpoint specified in Motion Control instructions or set by the axis
control panel is superimposed with an override signal and corrected as a
percentage. Valid velocity correction values range from 0.0 % to 200.0 %.
(<TO>.Override.Velocity)

"Current values" area
The following table shows the meaning of the status data:
Status

Description

Operative encoder

Operative encoder of the axis

Actual position

Actual position of the axis
If the technology object is not homed, then the value is displayed relative to
the position that existed when the technology object was enabled.
(<TO>.ActualPosition)

1984

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Status

Description

Actual velocity

Actual velocity of the axis
(<TO>.ActualVelocity)

Following error

Following error of the axis
(<TO>.StatusPositioning.FollowingError)

"Dynamic limits" area
This area displays the limit values for the dynamic parameters.
The following table shows the meaning of the status data:
Status

Description

Velocity

Configured maximum velocity
(<TO>.DynamicLimits.MaxVelocity)

Acceleration

Configured maximum acceleration
(<TO>.DynamicLimits.MaxAcceleration)

Deceleration

Configured maximum deceleration
(<TO>.DynamicLimits.MaxDeceleration)

Jerk

Configured maximum jerk
(<TO>.DynamicLimits.MaxJerk)

PROFIdrive telegram
The "Technology object > Diagnostics > PROFIdrive telegram" diagnostics function is used in
the TIA Portal to monitor the PROFIdrive telegrams returned by the drive and encoder. The
display of the Diagnostics function is available in online operation.

"Drive" area
This area displays the following parameters contained in the PROFIdrive telegram from the
drive to the controller:
● Status words "ZSW1" and "ZSW2"
● The speed setpoint (NSET) that was output to the drive
● The actual speed that was signaled from the drive (NACT)

"Encoder" area
This area displays the following parameters contained in the PROFIdrive telegram from the
encoder to the controller:
● Status word "Gx_ZSW"
● The actual position value "Gx_XIST1" (cyclic actual encoder value)
● The actual position value "Gx_XIST2" (absolute encoder value)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1985

Control de movimiento
6.1 Using S7-1500 Motion Control

Areas "Encoder 1" to "Encoder 4" (S7-1500T)
The "Encoder 1" to "Encoder 4" areas display the following parameters from the PROFIdrive
telegram of the corresponding encoder to the controller:
● Status word "Gx_ZSW"
● The actual position value "Gx_XIST1" (cyclic actual encoder value)
● The actual position value "Gx_XIST2" (absolute encoder value)

6.1.4.7

Cross-PLC synchronous operation

Basics
With cross-PLC synchronous operation, you realize synchronous operations (gearing or
camming) between axes that are on different CPUs. All following axes of a leading value are
hereby synchronous to one another with consideration of the respective synchronous
operation function. All following axes receive the same leading value at the same time. You can
configure and operate the following axes on different CPUs within a project. You can also
configure the leading axis on any CPU of the same project.
The figure below shows the operating principle based on an example with two following axes
on two CPUs:
&38
/HDGLQJD[LV

&38
)ROORZLQJD[LV

/HDGLQJD[LVSUR[\

)ROORZLQJD[LV

/HDGLQJYDOXHWHOHJUDP

352),1(7

6,1$0,&6

6,1$0,&6

Leading value

The leading axis and a local following axis 1 are located on CPU 1. The leading axis and the
following axis 1 are interconnected to a synchronous operation.
The leading axis makes the leading value available for cross-PLC synchronous operation. The
leading value is transferred to CPU 2 by means of a leading value telegram via PROFINET IO
with IRT.
On CPU 2, a leading axis proxy reads the leading value. A following axis 2 is interconnected
locally with the leading axis proxy as leading axis.
The following axes 1 and 2 are synchronous and follow the same leading value.

1986

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The S7-1500 and S7-1500T CPUs can make the leading value available for a cross-PLC
synchronous operation. You need to use an S7-1500T CPU as the CPU that receives the
leading value via a leading value proxy.

Leading axis proxy technology object
With cross-PLC synchronous operation, the leading axis proxy technology object represents
the leading axis for local synchronous operation within a CPU. The leading axis proxy adjust the
time of the leading value so that the following axes on the different CPUs are synchronous, and
it provides the leading value for the local following axes.
You can find an overview of the functions of the technology object in the "Functions
(Página 1863)" section.
The figure below shows the basic principle of operation of the leading axis proxy technology
object:
&RQILJXUDWLRQRIWHFKQRORJ\REMHFWV

7HFKQRORJ\REMHFW
/HDGLQJD[LVSUR[\
/HDGLQJ
YDOXH

7HFKQRORJ\REMHFW
6\QFKURQRXVD[LV
6\QFKURQRXVRSHUDWLRQ
IXQFWLRQ
6HWSRVLWLRQ

8VHUSURJUDP
0RWLRQ&RQWURO
LQVWUXFWLRQV
6WDWXVHYDOXDWLRQ



3RVLWLRQ
FRQWUROOHU

$FWXDO
SRVLWLRQ

6SHHG
VHWSRLQW

7HPSRUDO
DGDSWDWLRQ

&RPPXQLFDWLRQ

/HDGLQJYDOXH
WHOHJUDP

ದ

&RPPXQLFDWLRQ

352),1(7

6,1$0,&6

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1987

Control de movimiento
6.1 Using S7-1500 Motion Control

Communication via PROFINET IO with IRT
In a cross-PLC synchronous operation, the leading value is transferred via PROFINET IO with
IRT. "Controller-controller data exchange" is used for the communication between the CPUs
within a project. For this purpose, the CPUs must be on a bus and belong to the same sync
domain.

Provision of leading value via controller-controller data exchange
With communication by means of controller-controller data exchange, the leading value is
made available once within a project and can then by received by multiple CPUs on the same
bus. Leading axis proxies that are interconnected with the same leading value can be
configured on different CPUs. In addition, it is possible to make multiple leading values of
different leading axes available on different CPUs via the same bus.
You can find additional information in the section "Setting up communication via controllercontroller data exchange (Página 1992)" and in the function manual "SIMATIC S7-1500, ET
200MP, ET 200SP, ET 200AL, ET 200pro Communication" (https://
support.industry.siemens.com/cs/ww/en/view/59192925).

Tolerance time
If an external leading value becomes invalid or a communication error occurs, a technology
alarm 900 is output after a tolerance time. You can configure this tolerance time (Página 1995)
on the leading axis proxy technology object under "Technology object > Configuration >
Leading value settings".
Note that the leading value is still being extrapolated during the tolerance time and that the
following axis continues to move. Therefore, set the tolerance time as brief as possible.

1988

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Interconnection possibilities
The figure below shows the schematic structure of synchronous following axes with different
synchronous operation functions that are distributed over multiple CPUs:

/HDGLQJD[LV

&38

)ROORZLQJD[LV

/HDGLQJYDOXHWHOHJUDP

&38

/HDGLQJD[LVSUR[\

9LUWXDOIROORZLQJD[LV

&DVFDGH

/HDGLQJD[LVSUR[\

)ROORZLQJD[LV

/HDGLQJYDOXHWHOHJUDP

&38Q
&38
&38

)ROORZLQJD[LV

&DVFDGH

&38

/HDGLQJD[LVSUR[\

)ROORZLQJD[LV

Leading value delay that can be configured at the leading axis (delay time)
Delay time caused by the processing and transfer of the leading value
Gearing (example)

You can interconnect a positioning axis, external encoder or synchronous axis technology
object as the leading axis on CPU 1.

Cascaded interconnection
With a cascaded interconnection, a following axis makes a cross-PLC leading value available
to a leading axis proxy again. Use a virtual axis for this purpose.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1989

Control de movimiento
6.1 Using S7-1500 Motion Control
The figure above shows two cascades: The interconnection between the leading axis and the
following axes 2 and 4 is the first cascade. The interconnection between the virtual following
axis and the following axes 3 is the second cascade.

Communication and time response
In the processing and transfer of the leading value, a delay time occurs between the generation
of the leading value on the leading axis one on CPU and the provision of the leading value for
the following axes at the leading axis proxy on the other CPUs. The following axes of the other
CPUs receive the leading value with a time delay.
In principle, the delay time per cascade is:
Delay time = 2 x application cycle of the CPU of the leading axis proxy
To achieve synchronicity between the local following axes of the CPU of the leading axis and
the following axes of other CPUs without extrapolating the leading value at the leading axis
proxy, the leading value can be delayed at the leading axis for the local following axes. The
delay time can be compensated for with these configurable delay times.
Therefore, in the figure above, a delay time is set at the leading axis on CPU 1, which delays
the leading value output to the local following axis 1. In addition, a delay time at the virtual
following axis on CPU 2 is set, because CPU 3 is present in a cascade. All following axes thus
receive the same leading value at the same time.
During configuration of the following axis under "Leading value interconnections", you select
the entry "Delayed" as type of coupling so that the leading value is delayed for local
synchronous operation.
Recommendation: Use a virtual axis as leading axis.

Delay time
You can calculate and view the delay times in the interconnection overview (Página 1997). The
application cycles of the leading axis proxy and any cascading present are included in the
calculation of the delay times.
Alternatively, you can manually configure the delay times on the leading axis and on the virtual
following axis. In this way, you can consider additional requirements from your specific
application, for example.
Depending on the set delay time, the leading value at the leading axis proxy is automatically
interpolated or extrapolated. The automatic interpolation and extrapolation guarantees the
synchronicity of all following axes. In the connection view, an indication of whether the leading
value is interpolated or extrapolated is provided for each route of a leading value (Página 1999).
With an extrapolation, deviations in the following values can occur in the event of velocity
changes. With constant velocity, these deviations are automatically compensated for. With an
interpolation, no deviations of the following values occur in the event of velocity changes.

1990

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Recursive interconnection
When all axes are active, the leading axis becomes the following axis of its own leading value
with a recursive interconnection. During the configuration, recursive interconnections are
displayed in the interconnection overview. No delay times can be calculated for recursive
interconnections. Recursive interconnections over multiple CPUs are not detected during
runtime.
A recursive interconnection that is in effect during runtime is not permitted.

Tags: Cross-PLC synchronous operation
Positioning axis/synchronous axis/external encoder
The following tags of the positioning axis, synchronous axis and external encoder are relevant
for cross-PLC synchronous operation:
Tag

Description

<TO>.CrossPlcSynchronousOperation.Interfa‐
ce[1..1].EnableLeadingValueOutput

Provide cross-PLC leading value
FALSE

No

TRUE

Yes

<TO>.CrossPlcSynchronousOperation.Interfa‐
ce[1..1].AddressOut

Output address for the telegram of cross-PLC synchronous opera‐
tion

<TO>.CrossPlcSynchronousOperation.LocalLeading‐
ValueDelayTime

Delay time for setpoint coupling with delayed leading value

<TO>.StatusProvidedLeadingValue.DelayedLeading‐
Value.Position

Position of the provided leading value

<TO>.StatusProvidedLeadingValue.DelayedLeading‐
Value.Velocity

Velocity of the provided leading value

<TO>.StatusProvidedLeadingValue.DelayedLeading‐
Value.Acceleration

Acceleration of the provided leading value

Leading axis proxy
The following leading axis proxy technology object tags are relevant for cross-PLC
synchronous operation:
Tag

Description

<TO>.Position

Position of the leading value for local synchronous operation

<TO>.Velocity

Velocity of the leading value for local synchronous operation

<TO>.Acceleration

Acceleration of the leading value for local synchronous operation

<TO>.Interface.AddressIn

Input address for the telegram of the external leading value

<TO>.Parameter.LocalLeadingValueDelayTime

Delay time of leading value output on the local following axis which,
in turn, provides a leading value

<TO>.Parameter.ToleranceTimeExternalLeadingVa‐
lueInvalid

Tolerance time until a technology alarm is triggered when the ex‐
ternal leading value becomes invalid

<TO>.StatusExternalLeadingValue.ModuloLength

Modulo length of the external leading value

<TO>.StatusExternalLeadingValue.ModuloStartValue

Modulo start value of the external leading value

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1991

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag

Description

<TO>.StatusExternalLeadingValue.AdjustmentTime

Time by which the external leading value is adjusted

<TO>.StatusWord.X4 (LeadingValueValid)

<TO>.StatusWord.X5 (LeadingValueModulo)

<TO>.StatusWord.X6 (LeadingAxisControl)

<0

The external leading value is interpolated by this time.

>0

The external leading value is extrapolated by this time.

Validity of the external leading value
0

Leading value does not exist or is not valid

1

Leading value exists and is valid

Modulo functionality
0

Leading value without modulo functionality

1

Leading value with modulo functionality

Follow-up mode
0

Leading axis in follow-up mode

1

Leading axis not in follow-up mode

Configuring
Setting up communication via controller-controller data exchange
In a cross-PLC synchronous operation, the leading value is transferred via PROFINET IO with
IRT. "Controller-controller data exchange" is used for the communication between the CPUs
within a project.
For this purpose, you first set up the transfer areas for the required communication directions
between the interconnected CPUs. You then create input and output tags for the CPUs which
reference the relevant transfer areas. You can then select these tags for the transfer area when
configuring the leading axis and the leading axis proxy.
Hereafter, the sender CPU is the CPU on which a leading axis provides a leading value. The
receiver CPU is the CPU on which a leading axis proxy reads the leading value.

Requirements
● You have set up a network via PROFINET IO with IRT.
● You have connected the IRT ports of the CPUs in the network view and in the topology view.
● You have assigned the same sync domain to all CPUs.
● You have configured a CPU as sync master.
● You have configured all other CPUs as sync slaves.

Adding communication directions
To add the communication directions, proceed as follows:
1. Open the "I/O communication" tab in the network view.
2. To create a communication direction from the sender CPU to the receiver CPU, select the
sender CPU.

1992

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
3. Drag-and-drop the receiver CPU into the "Drop or select the device here" field of the
"Partner 2" table column of the corresponding PROFINET interface.
The communication direction from sender CPU to receiver CPU is created.
4. Repeat steps 2 and 3 for all communication directions required between the interconnected
CPUs.
Nota
Communication direction from the receiver CPU to the sender CPU
If necessary, also set up a communication direction from the receiver CPU to the sender
CPU, e.g. to transfer application-specific status information.

Configuring transfer areas
To configure the transfer areas, follow these steps:
1. In the "I/O communication" tab in the network view, select a communication direction of a
selected CPU.
2. Add a transfer area in the Inspector window under "Properties > General > Direct data
exchange" by entering a name.
3. Repeat steps 1 and 2 for all created configuration directions.
4. Configure the created transfer area in the Inspector window "Properties > General > Direct
data exchange > <Name of transfer area>":
– In the "Start address" fields, define the start address of the assigned logical address area
of the sender and of the receiver.
Nota
Multiple receiver CPUs in the same cascade (1:n relationship)
If multiple receiver CPUs receive the same leading value of the sender CPU, select the
same address area for the transfer area between the sender CPU and the receiver
CPU n that you defined between the sender CPU and the receiver CPU 1 under
"Properties > General > Direct data exchange" in the "Partner address" table column.
– In the "Organization block" fields, select the MC-Servo OB of the respective CPU.
Nota
"MC-Servo [OB91]" organization block
When you create a technology object, an MC-Servo OB is created automatically.
– Define a data length of 48 bytes in the "Data length [byte]" field.
5. Repeat step 4 for all created transfer areas.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1993

Control de movimiento
6.1 Using S7-1500 Motion Control

Creating tags
To create the output tag of a sender CPU and the input tag of a receiver CPU, proceed as
follows:
1. Open the PLC tags of a CPU via the project tree "<Name of CPU> > PLC tags > Show all
tags".
The "PLC tags" table opens.
2. Enter the name of the new tag in the "Name" column.
3. In the "Data type" column, specify the "DX_TEL_SyncOp" data type.
Nota
Data type "DX_TEL_SyncOp"
If you have created a technology object V5.0, the data type "DX_TEL_SyncOp" is available
in the drop-down list.
4. Enter the configured start address of the transfer area in the "Address" column with the
following prefix:
– "%Q" for an output tag on the sender CPU
– "%I" for an input tag on the receiver CPU
5. Repeat steps 1 to 4 for the respective sender and receiver CPUs of all configured transfer
areas.

Result
You have set up communication via controller-controller data exchange. During configuration
of the leading axis and the leading axis proxy, you can now select the configured tags for the
transfer areas in the "Transfer area" field under "Technology object > Configuration > Leading
value settings".
You can find additional information on the topic of "Controller-controller data exchange" in the
function manual "SIMATIC S7-1500, ET 200MP, ET 200SP, ET 200AL, ET 200pro
Communication" (https://support.industry.siemens.com/cs/ww/en/view/59192925).

Configure provision of leading value
In the "Leading value settings" configuration window of the leading axis, configure the
parameters of the leading value transfer.
You can find additional information depending on the technology object in the following
sections:

1994

Technology object

Section

Positioning axis

Section "Configuration - Leading value settings" of the "S7-1500/S7-1500T
Axis functions" documentation (https://support.industry.siemens.com/cs/ww/
en/view/109766462)

External encoder

Section "Configuration - Leading value settings" of the "S7-1500/S7-1500T
Axis functions" documentation (https://support.industry.siemens.com/cs/ww/
en/view/109766462)

Synchronous axis

"Configuration - Leading value settings (Página 1913)" section

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Configuring the leading axis proxy technology object
Configuration - Basic parameters
Configure the name of the technology object in the "Basic parameters" configuration window.

Name
Define the name of the leading axis proxy in this field. The technology object is listed under this
name in the project tree. The tags of the technology object can be used in the user program
under this name.

Configuration - Leading value settings
In the "Leading value settings" configuration window, select the parameters of the leading value
transfer.

Provision of leading value
In this area, define the settings for transferring the leading value to other CPUs:
Field

Description

Transfer area

In this drop-down list, select the input tag of the transfer area set up between
the CPU of the leading axis and the CPUs of the following axes.
When the technology object is copied, the selected transfer area is applied to
the copy.
You can find additional information on the transfer area in the section "Setting
up communication via controller-controller data exchange (Página 1992)".

Leading value monitoring
In this area, define the settings for leading value monitoring:
Field

Description

Tolerance time invalid
leading value

In this input field, enter the tolerance time within which a valid leading value
is expected.
Note
Note that the leading value is still being extrapolated during the tolerance time
and that the following axis continues to move. Therefore, set the tolerance
time as brief as possible.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1995

Control de movimiento
6.1 Using S7-1500 Motion Control

Delay time of local leading value
In this area, configure the settings for local synchronous operation:
Field

Description

Allow system calcula‐
tion

Select this check box to adapt the delay time of the local leading value in the
system. System calculation is started when you trigger the calculation in the
interconnection overview.

Delay time

If the "Allow system calculation" check box is cleared, this field can be edited.
In this field (<TO>.Parameter.LocalLeadingValueDelayTime), enter the sa‐
me delay time that is set at the virtual local following axis which, in turn,
provides a cross-PLC leading value within a cascade (<TO>.CrossPlcSynch‐
ronousOperation.LocalLeadingValueDelayTime).

Interconnection over‐
view

You open the interconnection overview via this link. With a cross-PLC
synchronous operation, the interconnection overview contains an overview
of the interconnected leading and following axes and their CPU assignment.

Consulte también
Interconnection possibilities (Página 1989)
Communication via PROFINET IO with IRT (Página 1988)

Working with the interconnection overview table
Opening the interconnection overview
The interconnection overview contains an overview of the interconnected leading and following
axes and their CPU assignment. In the interconnection overview, you also trigger the system
calculation of the delay time.

Requirement
● You have created technology objects in the project for:
– Leading axis
– Following axis
– Leading axis proxy
● You have interconnected the CPUs and technology objects with one another.

1996

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Procedure
To open the interconnection overview, follow these steps:
1. Select one of the following technology objects in the project navigation:
– Positioning axis
– Synchronous axis
– External encoder
– Leading axis proxy
2. Select the "Interconnection overview" command from the shortcut menu.

Result
The interconnection overview opens.

Interconnection overview
The interconnection overview contains an overview of the interconnected leading and following
axes and their CPU assignment in tabular form.

Toolbar
The toolbar at the top of the interconnection overview provides the following functions via
buttons:
Button

Description
You update the view of the interconnection overview with this icon.

Calculate delay times

You trigger calculation of delay times with this button.
The delay time is only calculated if the check box "Allow system calculation"
is selected under "Leading value settings" during configuration of the tech‐
nology objects.
You can only trigger the calculation of the delay times if the values are not
current and the technology objects are not recursively connected.

Filtering the view
You have the following options above the table to filter the view of the interconnection overview:
Field

Description

Enter text filter

In this field, enter a term by which the view should be filtered.

Show delay times

Select this check box to show the "Delay time" columns which contain the
delay times.

Show local synchro‐
nous operations

Select this check box to display the local leading value interconnections in
addition to the cross-PLC leading value interconnections.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1997

Control de movimiento
6.1 Using S7-1500 Motion Control

Interconnection overview table
The interconnection overview table contains the following information and functions:
Column

Description

Leading value source
PLC
Leading axis

This column displays the CPU of the leading axis.
This column displays the name of the leading axis.
You open the configuration of the technology object via the link.
If this icon is displayed in the "Leading axis" column, the intercon‐
nection is excluded from the system calculation of the delay time.
In the configuration of the leading axis, the check box "Allow
system calculation" is not selected under "Leading value settings".

DT

This column displays the delay time in ms.
This column is only displayed when the "Show delay times" check box is
selected.

Leading value output

This column displays the type of the leading value output.

Recipient
PLC

This column displays the CPU of the following axis.

Following axis

This column displays the name of the following axis.
You open the configuration of the technology object via the link.

Routes
Leading axis proxy

When you select a row, the icon
"Routes" area with this icon.

is displayed in this column. You open the

The name of the leading axis proxy is displayed in this column.
You open the configuration of the technology object via the link.
If this icon is displayed in the "Leading axis proxy" column, the
interconnection is excluded from the system calculation of the de‐
lay time.
In the configuration of the leading axis proxy, the check box "Allow
system calculation" is not selected under "Leading value settings".

DT

This column displays the delay time in ms.
This column is only displayed when the "Show delay times" check box is
selected.

Interconnection

If this icon is displayed in the "Interconnection" column, the inter‐
connection is affected by a recursion.
If this icon is displayed in the "Interconnection" column, the inter‐
connection is affected by a recursion, but at least one intercon‐
nection is excluded from the calculation of the delay time.
If this icon is displayed in the "Interconnection" column, the inter‐
connection is excluded from the system calculation of the delay
time.
With this icon, you open the configuration of the following axis.
If the configured delay time corresponds to the calculated delay time, the
icon
is displayed in this column.

1998

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Showing routes
The routes of the leading value of a selected following axis are shown in the area underneath
the interconnection overview table. The leading value is tracked back from the following axis to
the leading axis source. If there are multiple routes, they are displayed next to one another.

Requirement
● You have opened the interconnection overview.

Procedure
To display the existing routes of a following axis, follow these steps:
1. Select the row of the corresponding following axis in the table.
2. To show the routes, click the icon

in the "Routes" column.

Result
All routes are displayed in the area below the table for the selected following axis. Routes
affected by a recursion are not displayed.
It is indicated underneath a route whether the leading value is interpolated or extrapolated:
● If all cascades interpolate, "Interpolated" is displayed.
● If at least one cascade extrapolates, "Extrapolated" is displayed.

Setting the delay times
You can calculate and view the delay times in the interconnection overview. Alternatively, you
can manually configure the delay times on the leading axis and on the virtual following axes.
Depending on the set delay time, the leading value at the leading axis proxy is automatically
interpolated or extrapolated.

Requirements
● You have interconnected the CPUs and technology objects with one another.
● Except for the delay time, the technology objects are fully configured.

Procedure
To set the delay times, proceed as follows:
1. In the configuration of the technology objects under "Leading value settings", select the
check box "Allow system calculation".
2. Open the interconnection overview.
3. In the interconnection overview, click on "Calculate delay times".
4. Check the calculated delay times in the columns "DT" of the interconnection overview.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1999

Control de movimiento
6.1 Using S7-1500 Motion Control
5. In the routes, check whether a leading value is interpolated or extrapolated at the leading
axis proxy (<TO>.StatusExternalLeadingValue.AdjustmentTime (Página 2053)).
6. To adjust the delay time, if necessary, and take into account additional requirements from
your special application, for example, proceed as follows:
– In the configuration of the leading axis and the virtual following axes under "Leading
value settings", select the check box "Allow system calculation".
– Enter the corresponding value in the "Delay time" input field.

Diagnostics
The "Diagnostics" section is limited to describing the diagnostics view of the leading axis proxy
technology object in the TIA Portal.
You will find a description of Motion Control diagnostics in the following sections of the
"S7-1500/S7-1500T Motion Control overview" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766459):
● Diagnostic concept
● Technology alarms
● Errors in Motion Control instructions
A comprehensive description of the system diagnostics of the S7‑1500 CPU can be found in the
"Diagnostics" function manual (https://support.automation.siemens.com/WW/view/en/
59192926).
You can find an example of the diagnostics of cross-PLC synchronous operation with the
project trace in the Siemens Industry Online Support in the FAQ entry 109770938 (https://
support.industry.siemens.com/cs/ww/en/view/109770938).

Leading axis proxy technology object
Status and error bits
You use the "Technology object > Diagnostics > Status and error bits" diagnostic function in the
TIA Portal to monitor the status and error messages for the technology object. The diagnostics
function is available in online operation.
The meaning of the status and error messages is described in the following tables. The
associated technology object tag is given in parentheses.

2000

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Leading axis proxy status
The following table shows the possible states of the leading axis proxy:
Status

Description

Error

An error occurred at the technology object. Detailed information about the
error is available in the "Error" area and in the "<TO>.ErrorDetail.Number"
and "<TO>.ErrorDetail.Reaction" tags of the technology object.
(<TO>.StatusWord.X1 (Error))

Restart active

The technology object is being reinitialized.

Restart required

Data relevant for the restart has been changed. The changes are applied only
after a restart of the technology object.

(<TO>.StatusWord.X2 (RestartActive))

(<TO.>StatusWord.X3 (OnlineStartValuesChanged))
External leading value
valid

The external leading value exists and is valid.
(<TO>.StatusWord.X4 (LeadingValueValid))

Warnings
The following table shows the possible warnings:
Warning

Description

System

A system-internal error has occurred.
(<TO>.WarningWord.X0 (SystemWarning))

Configuration

One or more configuration parameters are being internally adapted tempo‐
rarily.
(<TO>.WarningWord.X1 (ConfigWarning))

User program

An error has occurred in the user program.
(<TO>.WarningWord.X2 (UserWarning))

Job rejected

Job cannot be executed.
You cannot execute a Motion Control instruction because necessary requi‐
rements are not fulfilled.
(<TO>.WarningWord.X3 (CommandNotAccepted))

Data exchange

An error in the communication has occurred.
(<TO>.WarningWord.X7 (CommunicationWarning))

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2001

Control de movimiento
6.1 Using S7-1500 Motion Control

Error
The following table shows the possible errors:
Error

Description

System

A system-internal error has occurred.
(<TO>.ErrorWord.X0 (SystemFault))

Configuration

A configuration error has occurred.
One or more configuration parameters are inconsistent or invalid.
The technology object was incorrectly configured, or editable configuration
data was incorrectly modified during runtime of the user program.
(<TO>.ErrorWord.X1 (ConfigFault))

User program

An error occurred in the user program at a Motion Control instruction or its
use.
(<TO>.ErrorWord.X2 (UserFault))

Job rejected

A job cannot be executed.
You cannot execute a Motion Control instruction because necessary requi‐
rements are not fulfilled (for example, technology object not homed).
(<TO>.ErrorWord.X3 (CommandNotAccepted))

Alarm display
For additional information and to acknowledge the error, go to the Inspector window by clicking
on the "Alarm display" link.

6.1.4.8

Appendix

Tags of the synchronous axis technology object
Legend
Tag

Name of the tag

Data type

Data type of the tag

Values

Value range of the tag - minimum value to maximum value
(L - linear specification R - rotary specification)
If no specific value is shown, the value range limits of the relevant data type apply or the information under
"Description".

2002

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
W

Effectiveness of changes in the technology data block
DIR

Direct:
Values are changed directly and take effect at the start of the next MC‑Servo [OB91].

CAL

At call of Motion Control instruction:
Values are changed directly and take effect at the start of the next MC‑Servo [OB91] after the
call of the corresponding Motion Control instruction in the user program.

RES

Restart:
Changes to the start value in the load memory are made using the extended instruction
"WRIT_DBL" (write to DB in load memory). Changes will not take effect until after restart of the
technology object.

RON

Read only:
The tag cannot and must not be changed during runtime of the user program.

Description

Description of the tag

Access to the tags is with "<TO>.<tag name>". The placeholder <TO> represents the name of
the technology object.

Actual values and setpoints (synchronous axis)
The following tags indicate the setpoint and actual values of the technology object.

Tags
Legend (Página 2002)
Tag

Data type

Values

W

Description

Position

LREAL

-

RON

Position setpoint

Velocity

LREAL

-

RON

Velocity setpoint/speed setpoint

ActualPosition

LREAL

-

RON

Actual position

ActualVelocity

LREAL

-

RON

Actual velocity

ActualSpeed

LREAL

-

RON

With analog setpoint = 0.0:
Actual speed of the motor

Acceleration

LREAL

-

RON

Setpoint acceleration

ActualAcceleration

LREAL

-

RON

Actual acceleration

OperativeSensor

UDINT

1…4

RON

Operative encoder

ModuloCycle

DINT

-2147483648
RON
… 2147483647

Number of modulo cycles of the setpoint

ActualModuloCycle

DINT

-2147483648
RON
… 2147483647

Number of modulo cycles of the actual value

VelocitySetpoint

LREAL

-1.0E12 …
1.0E12

Output velocity setpoint/speed setpoint

RON

"Simulation" tag (synchronous axis)
The tag structure "<TO>.Simulation.<tag name>" contains the configuration of the simulation
mode. In simulation mode, you can simulate axes without a real drive in the CPU.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2003

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2002)
Tag

Data type

Simulation.

TO_Struct_AxisSimulation

Mode

1)

UDINT

Values
0, 1

W

Description

RES1 Simulation mode
)

0

No simulation, normal operation

1

Simulation mode

Technology version V2.0: RON

"VirtualAxis" tag (synchronous axis)
The tag structure "<TO>.VirtualAxis.<tag name>" contains the configuration of the simulation
mode. In simulation mode, you can simulate axes without a real drive in the CPU.

Tags
Legend (Página 2002)
Tag
VirtualAxis.
Mode

Data type

Values

W

Description

RON

Virtual axis

TO_Struct_VirrtualAxis
UDINT

0, 1

0

No virtual axis

1

Axis is always and exclusively operated as vir‐
tual axis

"Actor" tag (synchronous axis)
The tag structure "<TO>.Actor.<tag name>" contains the controller-side configuration of the
drive.

2004

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2002)
Tag

Data type

Actor.

TO_Struct_Actor

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Values

W

Description

2005

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
Type

InverseDirection

DataAdaption

Data type

Values

W

Description

DINT

0, 1

RON

Drive connection

BOOL

DINT

-

0, 1

Efficiency

LREAL

Interface.

TO_Struct_ActorInterface

0.0 … 1.0

RES

RES

RES

0

Analog output

1

PROFIdrive telegram

Inversion of the setpoint
FALSE

No

TRUE

Yes

Automatic transfer of the drive values reference speed,
maximum speed and reference torque
0

No automatic transfer, manual configuration of
values

1

Automatic transfer of values configured in the
drive to the configuration of the technology ob‐
ject

Efficiency of mechanics (gear and leadscrew)

AddressIn

VREF

0 … 65535

RON

Input address for the PROFIdrive telegram

AddressOut

VREF

0 … 65535

RON

Output address for the PROFIdrive telegram or the analog
setpoint

EnableDriveOutput

BOOL

-

RES

"Enable output" for analog drives
FALSE

Disabled

TRUE

Enabled

EnableDriveOutpu‐
tAddress

VREF

0 … 65535

RON

Address for the "Enable output" for analog setpoint

DriveReadyInput

BOOL

-

RES

"Ready input" for analog drives
The analog drive signals its readiness to receive speed
setpoints.
FALSE

Disabled

TRUE

Enabled

DriveReadyInputA‐
ddress

VREF

0 … 65535

RON

Address for the "Enable input" for analog setpoint

EnableTorqueData

BOOL

-

RES

Torque data
FALSE

Disabled

TRUE

Enabled

TorqueDataAddres‐
sIn

VREF

0 … 65535

RON

Input address of the supplemental telegram

TorqueDataAddres‐
sOut

VREF

0 … 65535

RON

Output address of the supplemental telegram

DriveParameter.
ReferenceSpeed

TO_Struct_ActorDriveParameter
LREAL

0.0 … 1.0E12

RES

Reference value (100%) for the speed setpoint (N-set) of
the drive
The speed setpoint is transferred in the PROFIdrive tele‐
gram as a normalized value from -200% to 200% of the
"ReferenceSpeed".
For setpoint specification via an analog output, the analog
output can be operated in the range from -117% to 117%,
provided the drive permits this.

2006

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
MaxSpeed

Data type

Values

W

Description

LREAL

0.0 … 1.0E12

RES

Maximum value for the speed setpoint of the drive (N-set)
(PROFIdrive: MaxSpeed ≤ 2 × ReferenceSpeed
Analog setpoint: MaxSpeed ≤ 1.17 × ReferenceSpeed)

ReferenceTorque

LREAL

0.0 … 1.0E12

RES

Reference value (100%) for the drive torque

"TorqueLimiting" tag (synchronous axis)
The tag structure "<TO>.TorqueLimiting.<tag name>" contains the configuration of the torque
limiting.

Tags
Legend (Página 2002)
Tag

Data type

TorqueLimiting.

TO_Struct_TorqueLimiting

LimitBase

DINT

Values
0, 1

0, 1

W

Description

RES

Torque limiting

PositionBasedMonito‐
rings

DINT

RES

LimitDefaults.

TO_Struct_TorqueLimitingLimitDe‐
faults

0

Motor side

1

Load side

Positioning and following error monitoring
0

Monitoring deactivated

1

Monitoring activated

Torque

LREAL

0.0 … 1.0E12

CAL

Limiting torque

Force

LREAL

0.0 … 1.0E12

CAL

Limiting force

"Clamping" tag (synchronous axis)
The tag structure "<TO>.Clamping.<tag name>" contains the configuration of the fixed stop
detection.

Tags
Legend (Página 2002)
Values

Tag

Data type

Clamping.

TO_Struct_Clamping

W

Description

FollowingErrorDevia‐
tion

LREAL

0.001 …
1.0E12

DIR

Value of the following error starting from which the fixed
stop is detected.

PositionTolerance

LREAL

0.001 …
1.0E12

DIR

Position tolerance for the clamping monitoring

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2007

Control de movimiento
6.1 Using S7-1500 Motion Control

"Sensor[1..4]" tags (synchronous axis)
The tag structure "<TO>.Sensor[1..4].<tag name>" contains the controller-end configuration of
the encoder and the configuration of active and passive homing.

2008

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2002)
Tag

Data type

Sensor[1..4].

ARRAY [1..4] OF TO_Struct_Sen‐
sor/TO_Struct_ExternalEnco‐
der_Sensor

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Values

W

Description

2009

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag

Data type

Values

W

Description

Existent

BOOL

-

RON

Displaying created encoders

Type

DINT

0…2

RON

Encoder type
0

"INCREMENTAL"
Incremental

1

"ABSOLUTE"
Absolute

2

"CYCLIC_ABSOLUTE"
Cyclic absolute

InverseDirection

System

BOOL

DINT

-

0, 1

RES

RES

Inversion of the actual value
FALSE

No

TRUE

Yes

Encoder system
0

"LINEAR"

1

"ROTATORY"

Linear encoder
Rotary encoder
MountingMode

DataAdaption

Interface.

DINT

DINT

0…2

0, 1

RES

RES

Mounting type of encoder
0

On motor shaft

1

On load side

2

External measuring system

Automatic transfer of the drive values reference speed,
maximum speed and reference torque in the device
0

No automatic transfer, manual configuration of
values

1

Automatic transfer of values configured in the
drive to the configuration of the technology ob‐
ject

TO_Struct_SensorInterface

AddressIn

VREF

0 … 65535

AddressOut

VREF

0 … 65535

RON

Output address for the PROFIdrive telegram

Number

UDINT

1…2

RON

Number of the encoder in the telegram

Parameter.

RON

Input address for the PROFIdrive telegram

TO_Struct_SensorParameter

Resolution

LREAL

1.0E-12 …
1.0E12

RES

Resolution of a linear encoder (offset between two enco‐
der pulses)

StepsPerRevolution

UDINT

1 … 8388608

RES

Increments per rotary encoder revolution

FineResolutionXist1

UDINT

0 … 31

RES

Number of bits for fine resolution Gx_XIST1 (cyclic actual
encoder value)

FineResolutionXist2

UDINT

0 … 31

RES

Number of bits for fine resolution Gx_XIST2 (absolute va‐
lue of encoder)

DeterminableRevo‐
lutions

UDINT

0 … 8388608

RES

Number of differentiable encoder revolutions for a multiturn absolute encoder
(For a single-turn absolute encoder = 1; for an incremental
encoder = 0)

DistancePerRevolu‐
tion

2010

LREAL

0.0 … 1.0E12

RES

Load distance per revolution of an externally mounted en‐
coder

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
BehaviorGx_XIST1

ActiveHoming.
Mode

SideInput

Direction

Data type

Values

W

Description

DINT

-

RES

Evaluation of Gx_XIST1 bits
0

Based on the bits of the encoder resolution

1

32-bit value of the encoder value

TO_Struct_SensorActiveHoming
DINT

BOOL

DINT

0…2

-

0, 1

RES

CAL

CAL

Homing mode
0

Use zero mark via PROFIdrive telegram

1

Zero mark via PROFIdrive telegram and refe‐
rence output cam

2

Use homing mark via digital input

Side of the digital input for active homing
FALSE

Negative side

TRUE

Positive side

Homing direction/approach direction on the homing mark
0

Positive homing direction

1

Negative homing direction

DigitalInputAddress

VREF

0 … 65535

RON

Address of digital input

HomePositionOffset

LREAL

-1.0E12 …
1.0E12

CAL

Home position offset

SwitchLevel

BOOL

-

RES

Signal level that is present at the digital input when homing
mark is approached

PassiveHoming.
Mode

SideInput

Direction

FALSE

Low level

TRUE

High level

TO_Struct_SensorPassiveHoming
DINT

BOOL

DINT

0…2

-

0…2

RES

CAL

CAL

Homing mode
0

Use zero mark via PROFIdrive telegram

1

Zero mark via PROFIdrive telegram and refe‐
rence output cam

2

Use homing mark via digital input

Side of the digital input for passive homing
FALSE

Negative side

TRUE

Positive side

Homing direction/approach direction on the homing mark
0

Positive homing direction

1

Negative homing direction

2

Current homing direction

DigitalInputAddress

VREF

0 … 65535

RON

Address of digital input

SwitchLevel

BOOL

-

RES

Signal level that is present at the digital input when homing
mark is approached

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

FALSE

Low level

TRUE

High level

2011

Control de movimiento
6.1 Using S7-1500 Motion Control

"CrossPlcSynchronousOperation" tag (synchronous axis)
The tag structure "<TO>.CrossPlcSynchronousOperation.<tag name>" contains the
configuration of the cross-PLC synchronous operation.

Tags
Legend (Página 2002)
Values

W

Tag

Data type

CrossPlcSynchronousO‐
peration.

TO_Struct_CrossPlcSynchronou‐
sOperation

Interface[1..1].

Description

ARRAY [1..1] of
TO_Struct_CrossPlcLeadingVa‐
lueInterface

EnableLeadingVa‐
lueOutput

BOOL

AddressOut

VREF

-

RON

Output address for the leading value telegram

LREAL

0.0 … 1.0E12

DIR

Delay time of leading value output at the local following
axes

LocalLeadingValueDe‐
layTime

-

RON

Provide cross-PLC leading value
FALSE

No

TRUE

Yes

"Extrapolation" tag (synchronous axis)
The tag structure "<TO>.Extrapolation.<tag name>" contains the configuration of the actual
value extrapolation.

2012

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2002)
Tag

Data type

Extrapolation.

TO_Struct_Extrapolation

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Values

W

Description

2013

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
LeadingAxisDepen‐
dentTime

Data type

Values

W

Description

LREAL

-

RON

Extrapolation time component (caused by leading axis)
Results from the following times:
● Time of actual value acquisition for the leading axis
● Interpolator cycle clock
● Time of position filter of actual value extrapolation (T1
+ T2)

FollowingAxisDepen‐
dentTime

LREAL

0.0 … 1.0E12

DIR

Extrapolation time component (caused by following axis)
Results from the following times:
● For a following axis with set velocity precontrol:
–

Communication cycle

–

Interpolator cycle clock

–

Speed control loop substitute time for the following
axis

–

Output delay time of the setpoint at the following
axis

● For a following axis without velocity precontrol:

Settings.
SystemDefinedEx‐
trapolation
ExtrapolatedVelo‐
cityMode

–

Communication cycle

–

Interpolator cycle clock

–

Position control loop equivalent time (1/Kv from
"<TO>.PositionControl.Kv")

–

Output delay time of the setpoint at the following
axis

TO_Struct_ExtrapolationSettings
DINT

DINT

0, 1

0, 1

RES

RES

Leading axis dependent time
0

Not effective

1

Effective

Effective velocity value for the synchronization function
0

"FilteredVelocity"
Leading value velocity from filtered actual velo‐
city

1

"VelocityByDifferentiation"
The leading value velocity results from the diffe‐
rentiation of the extrapolated leading value po‐
sition

PositionFilter.
T1

LREAL

0.0 … 1.0E12

DIR

Position filter time constant T1

T2

LREAL

0.0 … 1.0E12

DIR

Position filter time constant T2

VelocityFilter.

TO_Struct_ExtrapolationVelocity‐
Filter

T1

LREAL

0.0 … 1.0E12

DIR

Velocity filter time constant T1

T2

LREAL

0.0 … 1.0E12

DIR

Velocity filter time constant T2

VelocityTolerance.

2014

TO_Struct_ExtrapolationPosition‐
Filter

TO_Struct_ExtrapolationVelocity‐
Tolerance

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
Range
Hysteresis.
Value

Data type

Values

W

Description

LREAL

0.0 … 1.0E12

DIR

Tolerance band width for velocity

TO_Struct_ExtrapolationHysteresis
LREAL

0.0 … 1.0E12

DIR

Hysteresis of the extrapolated actual position value

"LoadGear" tag (synchronous axis)
The tag structure "<TO>.LoadGear.<tag name>" contains the configuration of the load gear.

Tags
Legend (Página 2002)
Tag

Data type

LoadGear.

TO_Struct_LoadGear

Value range

W

Description

Numerator

UDINT

1…
4294967295

RES

Load gear counter

Denominator

UDINT

1…
4294967295

RES

Load gear denominator

"Properties" tag (synchronous axis)
The tag structure "<TO>.Properties.<tag name>" contains the configuration of the type of axis
or motion.

Tags
Legend (Página 2002)
Tag

Data type

Properties.

TO_Struct_Properties

MotionType

DINT

Value range
0, 1

W

Description

RON

Indication of axis type or motion type
0

Linear axis or motion

1

Rotary axis or motion

"Units" tag (synchronous axis)
The tag structure "<TO>.Units.<tag name>" shows the set technological units.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2015

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2002)
Tag

Data type

Units.

TO_Struct_Units/TO_Struct_Exter‐
nalEncoder_Units

2016

Values

W

Description

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
LengthUnit

VelocityUnit

TimeUnit

Data type

Values

W

Description

UDINT

-

RON

Unit for position

UDINT

UDINT

-

-

RON

RON

1010

m

1013

mm

1536

mm1)

1011

km

1014

µm

1015

nm

1019

in

1018

ft

1021

mi

1004

rad

1005

°

1537

°1)

Unit for velocity
1521

°/s

1539

°/s1)

1522

°/min

1086

rad/s

1523

rad/min

1062

mm/s

1538

mm/s1)

1061

m/s

1524

mm/min

1525

m/min

1526

mm/h

1063

m/h

1527

km/min

1064

km/h

1066

in/s

1069

in/min

1067

ft/s

1070

ft/min

1075

mi/h

Unit for time
1054

TorqueUnit

UDINT

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

-

RON

s

Unit for torque
1126

Nm

1128

kNm

1529

lbf in (pound-force-inch)

1530

lbf ft

1531

ozf in (ounce-force-inch)

1532

ozf ft

1533

pdl in (poundal-inch)

2017

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag

Data type

Values

W

Description
1534

ForceUnit

UnitFactor
1)

UDINT

UDINT

-

-

RON

RON

pdl ft

Unit for force
1120

N

1122

kN

1094

lbf (pound-force)

1093

ozf (ounce-force)

1535

pdl (poundals)

Factor for internal conversion in the high-resolution units.

Position values with higher resolution or six decimal places

"Mechanics" tag (synchronous axis)
The tag structure "<TO>.Mechanics.<tag name>" contains the configuration of the mechanics.

Tags
Legend (Página 2002)
Tag

Data type

Mechanics.

TO_Struct_Mechanics

LeadScrew

LREAL

Value range
0.0 … 1.0E12

W

Description

RES

Leadscrew pitch

"Modulo" tag (synchronous axis)
The tag structure "<TO>.Modulo.<tag name>" contains the configuration of the modulo
function.

Tags
Legend (Página 2002)
Tag

Data type

Modulo.

TO_Struct_Modulo

Enable

BOOL

Values
-

W

Description

RES

FALSE

Modulo conversion disabled

TRUE

Modulo conversion enabled

When modulo conversion is enabled, a check is made for
modulo length > 0.0
Length

LREAL

0.001 …
1.0E12

RES

Modulo length

StartValue

LREAL

-1.0E12 …
1.0E12

RES

Modulo start value

2018

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

"DynamicLimits" tag (synchronous axis)
The tag structure "<TO>.DynamicLimits.<tag name>" contains the configuration of the
dynamic limits. During Motion Control, no dynamic values greater than the dynamic limits are
permitted. If you have specified greater values in a Motion Control instruction, then motion is
performed using the dynamic limits, and a warning is indicated (alarm 501 to 503 - Dynamic
values are limited).

Tags
Legend (Página 2002)
Tag

Data type

Values

DynamicLimits.

TO_Struct_DynamicLimits

W

Description

MaxVelocity

LREAL

0.0 … 1.0E12

RES

Maximum permissible velocity of the axis

Velocity

LREAL

0.0 … 1.0E12

DIR

Current maximum velocity of the axis

MaxAcceleration

LREAL

0.0 … 1.0E12

DIR

Maximum permissible acceleration of the axis

MaxDeceleration

LREAL

0.0 … 1.0E12

DIR

Maximum permissible deceleration of the axis

MaxJerk

LREAL

0.0 … 1.0E12

DIR

Maximum permissible jerk on the axis

"DynamicDefaults" tag (synchronous axis)
The tag structure "<TO>.DynamicDefaults.<tag name>" contains the configuration of the
dynamic defaults. These settings will be used when you specify a dynamic value less than 0.0
in a Motion Control instruction (exceptions: "MC_MoveJog.Velocity",
"MC_MoveVelocity.Velocity"). Changes to the default dynamic values will be applied at the next
positive edge at the "Execute" parameter of a Motion Control instruction.

Tags
Legend (Página 2002)
Tag

Data type

Values

DynamicDefaults.

TO_Struct_DynamicDefaults

W

Description

Velocity

LREAL

0.0 … 1.0E12

CAL

Default velocity

Acceleration

LREAL

0.0 … 1.0E12

CAL

Default acceleration

Deceleration

LREAL

0.0 … 1.0E12

CAL

Default deceleration

Jerk

LREAL

0.0 … 1.0E12

CAL

Default jerk

EmergencyDecelera‐
tion

LREAL

0.0 … 1.0E12

DIR

Emergency stop deceleration

"PositionLimits_SW" tag (synchronous axis)
The tag structure "<TO>.PositionLimits_SW.<tag name>" contains the configuration of position
monitoring with software limit switches. Software limit switches are used to limit the operating
range of a synchronous axis.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2002)
Tag

Data type

Values

PositionLimits_SW.

TO_Struct_PositionLimitsSW

W

Description

Active

BOOL

-

DIR

FALSE

Monitoring deactivated

TRUE

Monitoring activated

MinPosition

LREAL

-1.0E12 …
1.0E12

DIR

Position of negative software limit switches

MaxPosition

LREAL

-1.0E12 …
1.0E12

DIR

Position of positive software limit switches
("MaxPosition" > "MinPosition")

"PositionLimits_HW" tag (synchronous axis)
The tag structure "<TO>.PositionLimits_HW.<tag name>" contains the configuration of
position monitoring with hardware limit switches. Hardware limit switches are used to limit the
traversing range of a synchronous axis.

Tags
Legend (Página 2002)
Tag

Data type

PositionLimits_HW.

TO_Struct_PositionLimitsHW

Active

BOOL

Values
-

W

Description

RES

FALSE

Monitoring deactivated

TRUE

Monitoring activated

With "Active", both (negative and positive) hardware limit
switches are activated or deactivated.
MinSwitchLevel

BOOL

-

RES

Level selection for activation of the negative hardware limit
switch
FALSE

Low level (Low active)

TRUE

High level (High active)

MinSwitchAddress

VREF

0 … 65535

RON

Address for the negative hardware limit switch

MaxSwitchLevel

BOOL

-

RES

Level selection for activation of the positive hardware limit
switch

MaxSwitchAddress

VREF

0 … 65535

RON

FALSE

Low level (Low active)

TRUE

High level (High active)

Address for the positive hardware limit switch

"Homing" tag (synchronous axis)
The tag structure "<TO>.Homing.<tag name>" contains the configuration for homing the TO.

2020

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2002)
Tag

Data type

Homing.

TO_Struct_Homing / TO_Struct_Ex‐
ternalEncoder_Homing

AutoReversal

BOOL

ApproachDirection

ApproachVelocity

BOOL

LREAL

Values

-

-

Linear:
0.0 …
10000.0 mm/s

W

RES

CAL

CAL

LREAL

Linear:
0.0 …
1000.0 mm/s

CAL

LREAL

-1.0E12 …
1.0E12

FALSE

No

TRUE

Yes

Direction of approach to the homing position switch
FALSE

Positive direction

TRUE

Negative direction

Approach velocity

Homing velocity
Velocity during active homing at which the home position
is approached.

Rotary:
0.0 ... 36000.0
°/s
HomePosition

Reversal at the hardware limit switches

Velocity during active homing at which the reference cam
and home position are approached.

Rotary:
0.0 ...
360000.0 °/s
ReferencingVelocity

Description

CAL

Home position

"Override" tag (synchronous axis)
The tag structure "<TO>.Override.<tag name>" contains the configuration of override
parameters. The override parameters are used to apply a correction percentage to default
values. An override change takes effect immediately, and is performed with the dynamic
settings in effect in the Motion Control instruction.

Tags
Legend (Página 2002)
Tag
Override.
Velocity

Data type

Values

W

Description

DIR

Velocity or speed override

TO_Struct_Override
LREAL

0.0 … 200.0%

Percentage correction of the velocity/speed

"PositionControl" tag (synchronous axis)
The tag structure "<TO>.PositionControl.<tag name>" contains the settings of position control.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2021

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2002)
Tag

Data type

PositionControl.

TO_Struct_PositionControl

2022

Values

W

Description

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag

Data type

Values

W

Description

Kv

LREAL

0.0 …
2147480.0

DIR

Proportional gain of the closed loop position control
("Kv" > 0.0)

Kpc

LREAL

0.0 … 150.0%

DIR

Velocity precontrol of the position control
Recommended setting:
● Isochronous drive connection via PROFIdrive:
100.0%
● Non-isochronous drive connection via PROFIdrive:
0.0 to 100.0%
● Analog drive connection:
0.0 to 100.0%

EnableDSC

BOOL

-

RES

Dynamic Servo Control (DSC)
FALSE

DSC disabled

TRUE

DSC activated

DSC is only possible with one of the following PROFIdrive
telegrams:
● Standard telegram 5 or 6
● SIEMENS telegram 105 or 106
SmoothingTimeBy‐
ChangeDifference

LREAL

0.0 … 1.0E+12
s

DIR

Smoothing time for the manipulated variable for switching
operations, for example:
● Encoder switchover
● Change in P-gain ("Kv")
● Switchover to emergency stop ramp

InitialOperativeSensor

UDINT

1…4

RES

Active sensor after initialization of the axis (sensor number
1 to 4)
This encoder is used after startup of the CPU and after a
restart of the technology object. At an operating mode
transition from STOP → RUN of the CPU (without restart of
the technology object), the encoder that was also active
before the STOP is still being used.

ControlDifference‐
Quantization.
Mode

TO_Struct_PositionDifference‐
Quantification
DINT

-

RES

Type of quantification
Configuration of a quantization when a drive with stepper
motor interface is connected
0

No quantification

1

Quantization corresponding to encoder resolu‐
tion

2

Quantization to a direct value

(configuration is performed using the parameter view (da‐
ta structure))
Value

LREAL

0.001 … 1.0E
+12

RES

Value of quantification
Configuration of a value for quantization to a direct value
(<TO>.PositionControl.ControlDifferenceQuantiza‐
tion.Mode = 2)
(configuration is performed using the parameter view (da‐
ta structure))

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2023

Control de movimiento
6.1 Using S7-1500 Motion Control

"DynamicAxisModel" tag (synchronous axis)
The tag structure "<TO>.DynamicAxisModel.<tag name>" contains the settings of the
balancing filter.

Tags
Legend (Página 2002)
Values

W

Description

Tag

Data type

DynamicAxisModel.

TO_Struct_DynamicAxisModel

Time constants for braking ramp generation with alarm
response "Brake with emergency stop ramp"

VelocityTimeConstant

LREAL

0.0 … 1.0E12

DIR

Speed control loop substitute time [s]

AdditionalPositionTi‐
meConstant

LREAL

0.0 … 1.0E12

DIR

Additive position control loop substitute time [s]

"FollowingError" tag (synchronous axis)
The tag structure "<TO>.FollowingError.<tag name>" contains the configuration of the dynamic
following error monitoring.
If the permissible following error is exceeded, then technology alarm 521 is output, and the
technology object is disabled (alarm reaction: remove enable).
When the warning level is reached, a warning is output (technology alarm 522).

Tags
Legend (Página 2002)
Tag

Data type

FollowingError.

TO_Struct_FollowingError

EnableMonitoring
MinValue

BOOL
LREAL

Values
Linear:
0.0 … 1.0E12

W

Description

RES

FALSE

Following error monitoring deactivated

TRUE

Following error monitoring enabled

DIR

Permissible following error at velocities below the value of
"MinVelocity"

DIR

Maximum permissible following error, which may be rea‐
ched at the maximum velocity.

Rotary:
0.001 …
1.0E12
MaxValue

LREAL

Linear:
0.0 … 1.0E12
Rotary:
0.002 ... 1.0E12

MinVelocity

LREAL

0.0 … 1.0E12

DIR

"MinValue" is permissible below this velocity and is held
constant.

WarningLevel

LREAL

0.0 … 100.0

DIR

Warning level
Percentage value relative to the valid maximum following
error

2024

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

"PositioningMonitoring" tag (synchronous axis)
The tag structure "<TO>.PositioningMonitoring.<tag name>" contains the configuration of
position monitoring at the end of a positioning motion.
If the actual position value at the end of a positioning motion is reached within the tolerance time
and remains in the positioning window for the minimum dwell time, then "<TO>.StatusWord.X5
(Done)" is set in the technology data block. This completes a Motion Control job.
If the tolerance time is exceeded, then technology alarm 541 "Positioning monitoring" with
supplemental value 1: "Target range not reached" is displayed.
If the minimum dwell time is not met, then technology alarm 541 "Positioning monitoring" with
supplemental value 2: "Exit target range again" is displayed.

Tags
Legend (Página 2002)
Tag

Data type

PositioningMonitoring.

TO_Struct_PositionMonitoring

ToleranceTime

LREAL

Values
0.0 … 1.0E12

W

Description

DIR

Tolerance time
Maximum permitted duration from reaching of velocity set‐
point zero until entrance into the positioning window

MinDwellTime

LREAL

0.0 … 1.0E12

DIR

Minimum dwell time in positioning window

Window

LREAL

0.0 … 1.0E12

DIR

Positioning window

"StandstillSignal" tag (synchronous axis)
The tag structure "<TO>.StandstillSignal.<tag name>" contains the configuration of the
standstill signal.
If the actual velocity value is below the velocity threshold, and does not exceed it during the
minimum dwell time, then the standstill signal "<TO>.StatusWord.X7 (Standstill)" is set.

Tags
Legend (Página 2002)
Values

Tag

Data type

StandstillSignal.

TO_Struct_StandstillSignal

VelocityThreshold

LREAL

0.0 … 1.0E12

W

Description
Configuration for the standstill signal

DIR

Velocity threshold
If velocity is below this threshold, the minimum dwell time
begins.

MinDwellTime

LREAL

0.0 … 1.0E12

DIR

Minimum dwell time

"StatusProvidedLeadingValue" tag (synchronous axis)
The tag structure "<TO>.StatusProvidedLeadingValue.<tag name>" contains the provided
leading value with leading value delay of the cross-PLC synchronous operation.
Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2025

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2002)
Tag

Data type

StatusProvidedLeading‐
Value.

TO_Struct_StatusProvidedLeading‐ Provided leading value
Value

DelayedLeadingValue

Values

W

Description

TO_Struct_ProvidedLeadingValue

Leading value with leading value delay

Position

LREAL

-1.0E12 …
1.0E12

RON

Position

Velocity

LREAL

-1.0E12 …
1.0E12

RON

Velocity

Acceleration

LREAL

-1.0E12 …
1.0E12

RON

Acceleration

"StatusPositioning" tag (synchronous axis)
The tag structure "<TO>.StatusPositioning.<tag name>" indicates the status of a positioning
motion.

Tags
Legend (Página 2002)
Values

Tag

Data type

StatusPositioning.

TO_Struct_StatusPositioning

W

Description

Distance

LREAL

-1.0E12 …
1.0E12

RON

Distance to the target position

TargetPosition

LREAL

-1.0E12 …
1.0E12

RON

Target position

TargetPositionModu‐
loCycle

DINT

-2147483648
RON
… 2147483647

Number of modulo cycles to target position with positio‐
ning motions

FollowingError

LREAL

-1.0E12 …
1.0E12

RON

Current following error

SetpointExecutionTime

LREAL

-1.0E12 …
1.0E12

RON

Setpoint execution time of the axis
(Results from TIpo, Tvtc or 1/kv, TSend and TO of the axis)

"StatusDrive" tag (synchronous axis)
The tag structure "<TO>.StatusDrive.<tag name>" indicates the status of the drive.

2026

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2002)
Tag

Data type

StatusDrive.

Values

W

Description

TO_Struct_StatusDrive

Disabled

BOOL

-

RON

FALSE

Drive not switched off

TRUE

Drive switched off

InOperation

BOOL

-

RON

Operational status of the drive
FALSE

Drive not ready

TRUE

Drive ready

Setpoints will not be executed.
Setpoints can be executed.
CommunicationOK

BOOL

-

RON

Cyclic BUS communication between controller and drive
FALSE

Not established

TRUE

Established

Error

BOOL

-

RON

FALSE

No drive error

TRUE

Drive error

AdaptionState

DINT

0…4

RON

Status of automatic data transfer of drive parameters
0

"NOT_ADAPTED"
Data not transferred

1

"IN_ADAPTION"
Data transfer in progress

2

"ADAPTED"
Data transfer complete

3

"NOT_APPLICABLE"
Data transfer not selected, not possible

4

"ADAPTION_ERROR"
Error during data transfer

"StatusServo" tag (synchronous axis)
The tag structure "<TO>.StatusServo.<tag name>" indicates the status for the balancing filter.

Tags
Legend (Página 2002)
Tag
StatusServo.

Data type

Values

W

Description

TO_Struct_StatusServo

BalancedPosition

LREAL

-

RON

Position after the balancing filter

ControlDifference

LREAL

-

RON

Control error

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2027

Control de movimiento
6.1 Using S7-1500 Motion Control

"StatusSensor[1..4]" tags (synchronous axis)
The tag structure "<TO>.StatusSensor[1..4].<tag name>" indicates the status of the measuring
system.

Tags
Legend (Página 2002)
Tag

Data type

StatusSensor[1..4].

Array [1..4] OF TO_Struct_Status‐
Sensor

State

DINT

Values

0…2

W

RON

Description

Status of the actual encoder value
0

"NOT_VALID"

1

"WAITING_FOR_VALID"

2

"VALID"

Invalid
Waiting for "Valid" status
Valid
CommunicationOK

Error
AbsEncoderOffset

BOOL

BOOL
LREAL

-

-

RON

RON
RON

Cyclic BUS communication between controller and enco‐
der
FALSE

Not established

TRUE

Established

FALSE

No error in the measuring system

TRUE

Error in the measuring system.

Home point offset to the value of an absolute value enco‐
der.
The value will be retentively stored in the CPU.

Control

BOOL

-

RON

FALSE

Encoder is not active

TRUE

Encoder is active

Position

LREAL

-

RON

Encoder position

Velocity

LREAL

-

RON

Encoder velocity

AdaptionState

DINT

0…4

RON

Status of automatic data transfer of encoder parameters
0

"NOT_ADAPTED"
Data not transferred

1

"IN_ADAPTION"
Data transfer in progress

2

"ADAPTED"
Data transfer complete

3

"NOT_APPLICABLE"

4

"ADAPTION_ERROR"

Data transfer not selected, not possible
Error during data transfer
ModuloCycle

2028

DINT

-2147483648
RON
… 2147483647

Number of modulo cycles

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

"StatusExtrapolation" tag (synchronous axis)
The tag structure "<TO>.StatusExtrapolation.<tag name>" indicates the status of the actual
value extrapolation.

Tags
Legend (Página 2002)
Values

W

Tag

Data type

StatusExtrapolation.

TO_Struct_StatusExtrapolation

Description

FilteredPosition

LREAL

-1.0E12 …
1.0E12

RON

Position after position filter

FilteredVelocity

LREAL

-1.0E12 …
1.0E12

RON

Velocity after velocity filter and tolerance band

ExtrapolatedPosition

LREAL

-1.0E12 …
1.0E12

RON

Extrapolated position

ExtrapolatedVelocity

LREAL

-1.0E12 …
1.0E12

RON

Extrapolated velocity

"StatusSynchronizedMotion" tag (synchronous axis)
The tag structure "<TO>.StatusSynchronizedMotion.<tag name>" indicates the status of the
synchronous operation.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2029

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2002)
Tag

Data type

StatusSynchronizedMotion.

TO_Struct_StatusSynchronizedMo‐
tion

2030

Value range

W

Description

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
FunctionState

WaitingFunctionState

Data type

Value range

W

Description

DINT

0…3

RON

Indication of which synchronous operation function is
active

DINT

0…3

RON

0

No synchronous operation active

1

Gearing ("MC_GearIn")

2

Gearing with specified synchronous positions
("MC_GearInPos")

3

Camming ("MC_CamIn")

Indication of which synchronous operation function is
waiting
0

No synchronous operation waiting

1

Reserved

2

Gearing with specified synchronous positions
waiting ("MC_GearInPos")

3

Camming waiting ("MC_CamIn")

PhaseShift

LREAL

-1.0E12 …
1.0E12

RON

Current absolute leading value shift

ActualMaster

DB_ANY

0 … 65535

RON

When a synchronous operation job is started, the num‐
ber of the technology data block of the currently used
leading axis is displayed.

ActualCam

DB_ANY

0 … 65535

RON

Cam that is currently being used for camming

MasterOffset

LREAL

-1.0E12 …
1.0E12

RON

Current shift of the leading value range of the cam

MasterScaling

LREAL

-1.0E12 …
1.0E12

RON

Current scaling of the leading value range of the cam

SlaveOffset

LREAL

-1.0E12 …
1.0E12

RON

Current shift of the following value range of the cam

SlaveScaling

LREAL

-1.0E12 …
1.0E12

RON

Current scaling of the following value range of the cam

EffectiveLeadingValue.

TO_Struct_EffectiveLeadingValue

Effective leading value of the synchronous operation
function

Position

LREAL

-1.0E12 …
1.0E12

RON

Position

Velocity

LREAL

-1.0E12 …
1.0E12

RON

Velocity

Acceleration

LREAL

-1.0E12 …
1.0E12

RON

Acceleration

DWORD

-

RON

Status information of synchronous operation

BOOL

-

RON

"MaxVelocityExceeded"

0

StatusWord.
Bit 0

Synchronous operation inactive

Configured maximum velocity is exceeded during
synchronous operation.
Bit 1

BOOL

-

RON

"MaxAccelerationExceeded"
Configured maximum acceleration is exceeded during
synchronous operation.

Bit 2

BOOL

-

RON

"MaxDecelerationExceeded"
Configured maximum deceleration is exceeded during
synchronous operation.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2031

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
Bit 3

Data type

Value range

W

Description

BOOL

-

RON

"InSimulation"
Simulation of synchronous operation

Bit 4

BOOL

-

RON

FALSE

Not simulated

TRUE

Simulated

"LeadingValueAdditiveCommand"
Additive leading value via "MC_LeadingValueAdditive"

Bit 5 …

BOOL

-

RON

FALSE

No additive leading value active

TRUE

Additive leading value active

Reserved

Bit 31

"StatusKinematicsMotion" tag (synchronous axis)
The "<TO>.StatusKinematicsMotion" tag contains the status information of the technology
object.
Information on the evaluation of the individual bits (e.g. bit 2 "MaxDecelerationExceeded") can
be found in the "Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/
S7-1500T Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/
109766459) documentation.

2032

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2002)
Tag

Data type

StatusKinematicsMotion
Bit 0

Bit 1

Values

W

Description

DWORD

-

RON

Status information of the technology object

-

-

-

"MaxVelocityExceeded"

-

Bit 2

-

-

-

-

-

0

The kinematics technology object calculated a
lower velocity setpoint than the maximum velo‐
city on the axis.

1

The kinematics technology object calculated a
higher velocity setpoint than the maximum velo‐
city on the axis.

"MaxAccelerationExceeded"
0

The kinematics technology object calculated a
lower setpoint acceleration calculated than the
maximum acceleration of the axis.

1

The kinematics technology object calculated a
higher setpoint acceleration than the maximum
acceleration of the axis.

"MaxDecelerationExceeded"
0

The kinematics technology object calculated a
lower setpoint deceleration than the maximum
deceleration of the axis.

1

The kinematics technology object calculated a
lower setpoint deceleration than the maximum
deceleration of the axis.

"StatusTorqueData" tag (synchronous axis)
The tag structure "<TO>.StatusTorqueData.<tag name>" indicates the status of the torque
data.

Tags
Legend (Página 2002)
Tag

Data type

StatusTorqueData.

TO_Struct_StatusTorqueData

CommandAdditiveTor‐
queActive

DINT

CommandTorqueRan‐
geActive

DINT

ActualTorque

LREAL

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Value range
0, 1

0, 1

-1.0E12 …
1.0E12

W

Description

RON

Additive setpoint torque

RON

RON

0

Inactive

1

Active

Torque limits B +, B0

Inactive

1

Active

Actual torque of the axis

2033

Control de movimiento
6.1 Using S7-1500 Motion Control

"StatusMotionIn" tag (synchronous axis)
The tag structure "<TO>.StatusMotionIn.<tag name>" indicates the status of the "MotionIn"
function.

Tags
Legend (Página 2002)
Tag

Data type

StatusMotionIn.

TO_Struct_StatusMotionIn

FunctionState

DINT

Value range
0…2

W

Description

RON

0

No "MotionIn" function active

1

"MC_MotionInVelocity" active

2

"MC_MotionInPosition" active

"StatusWord" tag (synchronous axis)
The "<TO>.StatusWord" tag contains the status information of the technology object.
Information on the evaluation of the individual bits (e.g. bit 5 "HomingDone") can be found in the
"Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/S7-1500T
Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459)
documentation.

2034

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tag
Legend (Página 2002)
Tag

Data type

Values

W

Description

StatusWord

DWORD

-

RON

Status information of the technology object

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2035

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
Bit 0

Data type

Values

W

Description

-

-

-

"Enable"
Enable status

Bit 1

Bit 2

Bit 3

Bit 4

Bit 5

-

-

-

-

-

-

-

-

-

-

-

-

-

-

-

0

The technology object is disabled.

1

The technology object has been enabled.

"Error"
0

No error is present.

1

An error is present.

"RestartActive"
0

No restart is active.

1

A restart is active. The technology object is
being reinitialized.

"OnlineStartValuesChanged"
0

The restart tags are unchanged.

1

The restart tags have been changed. For the
changes to be applied, the technology object
must be reinitialized.

"ControlPanelActive"
0

The axis control panel is deactivated.

1

The axis control panel is active.

"HomingDone"
Homing status

Bit 6

Bit 7

-

-

-

-

-

-

0

The technology object is not homed.

1

The technology object is homed.

"Done"
0

A motion job is in progress or the axis control
panel is activated.

1

No motion job is in progress and the axis control
panel is deactivated.

"Standstill"
Standstill signal

Bit 8

Bit 9

Bit 10

Bit 11

-

-

-

-

-

-

-

-

-

-

-

-

0

The axis is in motion.

1

The axis is at a standstill.

"PositioningCommand"
0

No positioning job is active.

1

A positioning job is active ("MC_MoveRelati‐
ve","MC_MoveAbsolute").

"JogCommand"
0

No "MC_MoveJog" job is active.

1

An "MC_MoveJog" job is running.

"VelocityCommand"
0

No "MC_MoveVelocity" job is active.

1

An "MC_MoveVelocity" job is running.

"HomingCommand"
0

2036

No "MC_Home" job is in progress.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag

Data type

Values

W

Description
1

Bit 12

Bit 13

Bit 14

Bit 15

Bit 16

Bit 17

Bit 18

-

-

-

-

-

-

-

-

-

-

-

-

-

-

-

-

-

-

-

-

-

An "MC_Home" job is being processed.

"ConstantVelocity"
0

The axis is accelerated or decelerated.

1

The setpoint velocity is reached. A constant ve‐
locity setpoint is output.

"Accelerating"
0

No acceleration operation is active.

1

An acceleration operation is active.

"Decelerating"
0

No deceleration process is active.

1

A deceleration operation is active.

"SWLimitMinActive"
0

No negative software limit switch was approa‐
ched.

1

A negative software limit switch was reached or
exceeded.

"SWLimitMaxActive"
0

No positive software limit switch was approa‐
ched.

1

A positive software limit switch was reached or
exceeded.

"HWLimitMinActive"
0

No negative hardware limit switch was approa‐
ched.

1

A negative hardware limit switch was reached or
exceeded.

"HWLimitMaxActive"
0

No positive hardware limit switch was approa‐
ched.

1

A positive hardware limit switch was reached or
exceeded.

Bit 19

-

-

-

Reserved

Bit 20

-

-

-

Reserved

Bit 21

-

-

-

"Synchronizing"

Bit 22

Bit 23

-

-

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

-

-

-

-

0

The axis does not synchronize to a leading va‐
lue.

1

The axis synchronizes to a leading value.

"Synchronous"
0

The axis moves asynchronous to a leading va‐
lue.

1

The axis moves synchronously to a leading va‐
lue.

"SuperimposedMotionCommand"
0

No overlaid movement is active.

1

An overlaid movement is running.

2037

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
Bit 24

Bit 25

Bit 26

Bit 27

Bit 28

Bit 29

Bit 30

Bit 31

Data type

Values

W

Description

-

-

-

"PhasingCommand"

-

-

-

-

-

-

-

-

-

-

-

-

-

-

-

-

-

-

-

-

-

0

No Motion Control instruction for leading value
shift is active.

1

A Motion Control instruction for leading value
shift is active.

"AxisSimulation"
0

The simulation is not running.

1

The simulation is active.

"TorqueLimitingCommand"
0

No "MC_TorqueLimiting" job is active.

1

An "MC_TorqueLimiting" job is running.

"InLimitation"
0

The drive does not operate at the torque limit.

1

The drive operates at least at the threshold va‐
lue (default 90%) of the torque limit.

"NonPositionControlled"
0

The axis is in position-controlled mode.

1

The axis is not in position-controlled mode.

"KinematicsMotionCommand"
0

The axis is not used for a kinematics job.

1

The axis is used for a kinematics job.

"InClamping"
0

The axis is not clamped at a fixed stop.

1

The axis is clamped at a fixed stop.

"MotionInCommand"
0

No "MotionIn" job is active.

1

An "MotionIn" job is running.

"StatusWord2" tag (synchronous axis)
The "<TO>.StatusWord2" tag contains the status information of the technology object.
Information on the evaluation of the individual bits (e.g. bit 0 "StopCommand") can be found in
the "Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/S7-1500T
Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459)
documentation.

2038

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2002)
Tag

Data type

Value range

W

Description

StatusWord2

DWORD

-

RON

Status information of the technology object

BOOL

-

RON

"StopCommand"

Bit 0

Bit 1 …

BOOL

-

RON

0

No "MC_Stop" job is active.

1

An "MC_Stop" job is running. The technology
object is disabled.

Reserved

Bit 31

"ErrorWord" tag (synchronous axis)
The "<TO>.ErrorWord" tag indicates technology object errors (technology alarms).
Information on the evaluation of the individual bits (e.g. bit 3 "CommandNotAccepted") can be
found in the "Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/
S7-1500T Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/
109766459) documentation.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2039

Control de movimiento
6.1 Using S7-1500 Motion Control

Tag
Legend (Página 2002)
Tag

Data type

Values

W

ErrorWord

DWORD

-

RON

2040

Description

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
Bit 0

Data type

Values

W

Description

-

-

-

"SystemFault"
A system-internal error has occurred.

Bit 1

-

-

-

"ConfigFault"
Configuration error
One or more configuration parameters are inconsistent or
invalid.

Bit 2

-

-

-

"UserFault"
Error in user program at a Motion Control instruction or its
use

Bit 3

-

-

-

"CommandNotAccepted"
Job cannot be executed
A Motion Control instruction cannot be executed because
the necessary conditions are not met.

Bit 4

-

-

-

"DriveFault"

Bit 5

-

-

-

"SensorFault"

Bit 6

-

-

-

"DynamicError"

Bit 7

-

-

-

"CommunicationFault"

Error in drive
Error in encoder system
Specified dynamic values are limited to permissible values.
Communication error
Missing or faulty communication.
Bit 8

-

-

-

"SWLimit"
Software limit switch reached or overtraveled.

Bit 9

-

-

-

"HWLimit"
Hardware limit switch reached or overtraveled.

Bit 10

-

-

-

"HomingError"
Error during homing operation
The homing cannot be completed.

Bit 11

-

-

-

"FollowingErrorFault"
Following error limits exceeded

Bit 12

-

-

-

"PositioningFault"
Positioning error

Bit 13

-

-

-

"PeripheralError"
Error accessing a logical address

Bit 14

-

-

-

"SynchronousError"
Error during synchronous operation
The leading axis specified in the Motion Control instruction
was not configured as a possible leading axis.

Bit 15

-

-

-

"AdaptionError"

Bit 16 ...

-

-

-

Reserved

Error in automatic data transfer
Bit 31

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2041

Control de movimiento
6.1 Using S7-1500 Motion Control

"ErrorDetail" tag (synchronous axis)
The tag structure "<TO>.ErrorDetail.<tag name>" contains the alarm number and the effective
local alarm reaction for the technology alarm that is currently pending on the technology object.
You can find a list of the technology alarms and alarm reactions in the "Technology alarms"
section of the "S7-1500/S7-1500T Motion Control overview" (https://
support.industry.siemens.com/cs/ww/en/view/109766459) documentation.

Tags
Legend (Página 2002)
Tag

Data type

Values

ErrorDetail.

TO_Struct_ErrorDetail

W

Description

Number

UDINT

-

RON

Alarm number

Reaction

DINT

0…5

RON

Effective alarm reaction
0

No reaction

1

Stop with current dynamic values

2

Stop with maximum dynamic values

3

Stop with emergency stop ramp

4

Remove enable

5

Track setpoints

"WarningWord" tag (synchronous axis)
The "<TO>.WarningWord" tag indicates pending warnings at the technology object.
Information on the evaluation of the individual bits (e.g. bit 13 "PeripheralWarning") can be
found in the "Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/
S7-1500T Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/
109766459) documentation.

2042

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tag
Legend (Página 2002)
Tag

Data type

Values

W

WarningWord

DWORD

-

RON

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Description

2043

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
Bit 0

Data type

Values

W

Description

-

-

-

"SystemWarning"
A system-internal error has occurred.

Bit 1

-

-

-

"ConfigWarning"
Configuration error
One or several configuration parameters are adjusted in‐
ternally.

Bit 2

-

-

-

"UserWarning"
Error in user program at a Motion Control instruction or its
use

Bit 3

-

-

-

"CommandNotAccepted"
Job cannot be executed
A Motion Control instruction cannot be executed because
the necessary conditions are not met.

Bit 4

-

-

-

"DriveWarning"

Bit 5

-

-

-

"SensorWarning"

Bit 6

-

-

-

"DynamicWarning"

Bit 7

-

-

-

"CommunicationWarning"

Error in drive
Error in encoder system
Specified dynamic values are limited to permissible values.
Communication error
Missing or faulty communication.
Bit 8

-

-

-

"SWLimitMin"

Bit 9

-

-

-

"SWLimitMax"

Bit 10

-

-

-

"HomingWarning"
Error during homing operation
The homing cannot be completed.

Bit 11

-

-

-

"FollowingErrorWarning"
Warning limit of following error monitoring reached/excee‐
ded

Bit 12

-

-

-

"PositioningWarning"
Positioning error

Bit 13

-

-

-

"PeripheralWarning"
Error accessing a logical address

Bit 14

-

-

-

"SynchronousWarning"
Error during synchronous operation
The leading axis specified in the Motion Control instruction
was not configured as a possible leading axis.

Bit 15

-

-

-

"AdaptionWarning"
Error in automatic data transfer

Bit 16...
Bit 31

2044

-

-

-

Reserved

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

"ControlPanel" tag (synchronous axis)
The tag structure "<TO>.ControlPanel.<tag name>" contains no user-relevant data. This tag
structure is internally used.

"InternalToTrace" tag (synchronous axis)
The tag structure "<TO>.InternalToTrace.<tag name>" contains no user-relevant data. This tag
structure is internally used.

Tags of the cam technology object
Legend
Tag

Name of the tag

Data type

Data type of the tag

Values

Value range of the tag - minimum value to maximum value
If no specific value is shown, the value range limits of the relevant data type apply or the information under
"Description".

W

Effectiveness of changes in the technology data block
DIR

Direct:
Values are changed directly and take effect at the start of the next MC‑Servo [OB91].

CAL

At call of Motion Control instruction:
Values are changed directly and take effect at the start of the next MC‑Servo [OB91] after the
call of the corresponding Motion Control instruction in the user program.

RES

Restart:
Changes to the start value in the load memory are made using the extended instruction
"WRIT_DBL" (write to DB in load memory). Changes will not take effect until after restart of the
technology object.

RON

Read only:
The tag cannot and must not be changed during runtime of the user program.

Description

Description of the tag

Access to the tags is with "<TO>.<tag name>". The placeholder <TO> represents the name of
the technology object.

"Point[1..1000]" tag (cam)
The tag structure "<TO>.Point[1..1000].<tag name>" contains the defined points of the cam.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2045

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2045)
Tag

Data type

Values

Point[1..1000].

ARRAY [1..1000] OF
TO_Cam_Struct_PointData

W

Description

x

LREAL

-1.0E12 …
1.0E12

CAL

Value of the point in the definition range

y

LREAL

-1.0E12 …
1.0E12

CAL

Value of the point in the range of the function

"ValidPoints[1..1000]" tag (cam)
The tag structure "<TO>.ValidPoint[1-1000].<tag name>" shows the validity of the defined
points of the cam.

Tags
Legend (Página 2045)
Tag

Data type

ValidPoint[1..1000].

ARRAY
[1..1000]
OF BOOL

ValidPoint

BOOL

Values

W

Description

-

CAL

Indicates whether the defined point is valid.
FALSE

Invalid

TRUE

Valid

"Segment[1..50]" tag (cam)
The tag structure "<TO>.Segment[1..50].<tag name>" contains the defined segments of the
cam.

2046

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2045)
Tag

Data type

Values

W

Segment[1..50].

ARRAY [1..50] OF
TO_Cam_Struct_SegmentData

Description

xmin

LREAL

-1.0E12 …
1.0E12

CAL

Start coordinates of the segment

xmax

LREAL

-1.0E12 …
1.0E12

CAL

End coordinates of the segment

a0

LREAL

-1.0E12 …
1.0E12

CAL

Coefficient A0 for x0 of the polynomial for the segment

a1

LREAL

-1.0E12 …
1.0E12

CAL

Coefficient A1 for x1 of the polynomial for the segment

a2

LREAL

-1.0E12 …
1.0E12

CAL

Coefficient A2 for x2 of the polynomial for the segment

a3

LREAL

-1.0E12 …
1.0E12

CAL

Coefficient A3 for x3 of the polynomial for the segment

a4

LREAL

-1.0E12 …
1.0E12

CAL

Coefficient A4 for x4 of the polynomial for the segment

a5

LREAL

-1.0E12 …
1.0E12

CAL

Coefficient A5 for x5 of the polynomial for the segment

a6

LREAL

-1.0E12 …
1.0E12

CAL

Coefficient A6 for x6 of the polynomial for the segment

sineAmplitude

LREAL

-1.0E12 …
1.0E12

CAL

Amplitude of the sine element

sinePeriod

LREAL

-1.0E12 …
1.0E12

CAL

Period length of the sine element [rad]

sinePhase

LREAL

-1.0E12 …
1.0E12

CAL

Phase offset of the sine element [rad]

"ValidSegments[1..50]" tag (cam)
The tag structure "<TO>.ValidSegment[1..50].<tag name>" shows the validity of the defined
segments of the cam.

Tags
Legend (Página 2045)
Tag

Data type

ValidSegment[1..50].

ARRAY
[1..50] OF
BOOL

ValidSegment

BOOL

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Values

W

Description

-

CAL

Indicates whether the defined segment is valid.
FALSE

Invalid

TRUE

Valid

2047

Control de movimiento
6.1 Using S7-1500 Motion Control

"InterpolationSettings" tag (cam)
The tag structure "<TO>.InterpolationSettings.<tag name>" contains the configuration for the
interpolation of the cam.

Tags
Legend (Página 2045)
Tag

Data type

InterpolationSettings.

TO_Cam_Struct_InterpolationSet‐
tings

InterpolationMode

BoundaryConditions

DINT

DINT

Values

0…2

0, 1

W

CAL

CAL

Description

Interpolation type
0

Linear

1

C splines

2

B splines

Characteristics of the boundary points
0

No profile start or profile end conditions

1

First derivative equal at profile start and end

"StatusCam" tag (cam)
The tag structure "<TO>.StatusCam.<tag name>" indicates the status of the cam.

Tags
Legend (Página 2045)
Values

Tag

Data type

StatusCam.

TO_Cam_Struct_StatusCam

W

Description

StartLeadingValue

LREAL

-1.0E12 …
1.0E12

RON

First defined interpolation point/start of the first segment of
the cam
(Start value of the cam definition range)

EndLeadingValue

LREAL

-1.0E12 …
1.0E12

RON

Last defined interpolation point/end of the last segment of
the cam
(End value of the definition range of the cam)

"StatusWord" tag (cam)
The "<TO>.StatusWord" tag contains the status information of the technology object.
Information on the evaluation of the individual bits (e.g. bit 4 "CamDataChanged") can be found
in the "Evaluating StatusWord, ErrorWord and WarningWord (Página 1455)" section of the
"S7-1500/S7-1500T Motion Control overview" (https://
support.industry.siemens.com/cs/ww/en/view/109766459) documentation.

2048

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2045)
Tag

Data type

StatusWord
Bit 0

Values

W

Description

DWORD

-

RON

Status information of the technology object

-

-

-

"Control"
Use status

Bit 1

-

Bit 2

-

-

-

-

-

0

Cam not in use

1

Cam in use

"Error"
0

No error present

1

Error present

"RestartActive"
0

No restart active

1

Restart active
The technology object is being reinitialized.

Bit 3

-

-

-

"OnlineStartValuesChanged"
0

Restart tags unchanged

1

Change to Restart tags
For the changes to be applied, the technology
object must be reinitialized.

Bit 4

-

Bit 5

-

Bit 6

-

Bit 7...
Bit 31

-

-

-

-

-

-

-

-

-

"CamDataChanged"
0

No change

1

The definition range of the cam has changed in
the technology data block.

"Interpolated"
0

Cam is not interpolated

1

Cam is interpolated

"InInterpolation"
0

Cam not undergoing interpolation

1

Cam undergoing interpolation

Reserved

"ErrorWord" tag (cam)
The "<TO>.ErrorWord" tag indicates technology object errors (technology alarms).
Information on the evaluation of the individual bits (e.g. bit 3 "CommandNotAccepted") can be
found in the "Evaluating StatusWord, ErrorWord and WarningWord (Página 1455)" section of
the "S7-1500/S7-1500T Motion Control overview" (https://
support.industry.siemens.com/cs/ww/en/view/109766459) documentation.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2049

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2045)
Tag

Data type

ErrorWord

Values

W

Description

DWORD

-

RON

Bit 0

-

-

-

"SystemFault"

Bit 1

-

-

-

"ConfigFault"

A system-internal error has occurred.
Configuration error
One or more configuration parameters are inconsistent or
invalid.
Bit 2

-

-

-

"UserFault"
Error in user program at a Motion Control instruction or its
use

Bit 3

-

-

-

"CommandNotAccepted"
Job cannot be executed
A Motion Control instruction cannot be executed because
the necessary conditions are not met.

Bit 4 …

-

-

-

Reserved

Bit 31

"ErrorDetail" tag (cam)
The tag structure "<TO>.ErrorDetail.<tag name>" contains the alarm number and the effective
local alarm reaction for the technology alarm that is currently pending on the technology object.
You can find a list of the technology alarms and alarm reactions in the "Technology alarms
(Página 1510)" section of the "S7-1500/S7-1500T Motion Control overview" (https://
support.industry.siemens.com/cs/ww/en/view/109766459) documentation.

Tags
Legend (Página 2045)
Tag

Data type

ErrorDetail.

TO_Struct_ErrorDetail

Values

W

Description

Number

UDINT

-

RON

Alarm number

Reaction

DINT

0, 6

RON

Effective alarm reaction
0

No reaction

6

Terminate processing of the technology object

"WarningWord" tag (cam)
The "<TO>.WarningWord" tag indicates pending warnings at the technology object.
Information on the evaluation of the individual bits (e.g. bit 3 "CommandNotAccepted") can be
found in the "Evaluating StatusWord, ErrorWord and WarningWord (Página 1455)" section of

2050

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
the "S7-1500/S7-1500T Motion Control overview" (https://
support.industry.siemens.com/cs/ww/en/view/109766459) documentation.

Tags
Legend (Página 2045)
Tag
WarningWord

Data type

Values

W

Description

DWORD

-

RON

Bit 0

-

-

-

"SystemWarning"

Bit 1

-

-

-

"ConfigWarning"

A system-internal error has occurred.
Configuration error
One or more configuration parameters are inconsistent or
invalid.
Bit 2

-

-

-

"UserWarning"
Error in user program at a Motion Control instruction or its
use

Bit 3

-

-

-

"CommandNotAccepted"
Job cannot be executed
A Motion Control instruction cannot be executed because
the necessary conditions are not met.

Bit 4 …

-

-

-

Reserved

Bit 31

Tags of the leading axis proxy technology object
Legend
Tag

Name of the tag

Data type

Data type of the tag

Values

Value range of the tag - minimum value to maximum value
If no specific value is shown, the value range limits of the relevant data type apply or the information under
"Description".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2051

Control de movimiento
6.1 Using S7-1500 Motion Control
W

Effectiveness of changes in the technology data block
DIR

Direct:
Values are changed directly and take effect at the start of the next MC‑Servo [OB91].

CAL

At call of Motion Control instruction:
Values are changed directly and take effect at the start of the next MC‑Servo [OB91] after the
call of the corresponding Motion Control instruction in the user program.

RES

Restart:
Changes to the start value in the load memory are made using the extended instruction
"WRIT_DBL" (write to DB in load memory). Changes will not take effect until after restart of the
technology object.

RON

Read only:
The tag cannot and must not be changed during runtime of the user program.

Description

Description of the tag

Access to the tags is with "<TO>.<tag name>". The placeholder <TO> represents the name of
the technology object.

Leading value (leading axis proxy)
The following tags indicate the leading value parameters of the technology object for local
synchronous operation.

Tags
Legend (Página 2051)
Tag

Data type

Values

W

Description

Position

LREAL

-

RON

Adapted leading value for local synchronous operation

Velocity

LREAL

-

RON

Leading value velocity for local synchronous operation

Acceleration

LREAL

-

RON

Leading value velocity for local synchronous operation

"Interface" tag (leading axis proxy)
The tag structure "<TO>.Interface.<Tag name>" contains the input address of the telegram.

Tags
Legend (Página 2051)
Tag

Data type

Interface.

TO_Struct_LeadingAxisProxy_In‐
terface

AddressIn

2052

VRef

Values

-

W

RON

Description

Input address for the telegram of the external leading value

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

"Parameter" tag (leading axis proxy)
The tag structure "<TO>.Parameter.<tag name>" contains parameters for leading value
adaptation.

Tags
Legend (Página 2051)
Values

W

Tag

Data type

Parameter.

TO_Struct_LeadingAxisProxy_Pa‐
rameter

LocalLeadingValueDe‐
layTime

Description

LREAL

0.0 … 1.0E12

DIR

Delay time of virtual local following axis which, in turn, pro‐
vides a cross-PLC leading value with a cascade
(<TO>.CrossPlcSynchronousOperation.LocalLeadingVa‐
lueDelayTime)

ToleranceTimeExterna‐ LREAL
lLeadingValueInvalid

0.0 … 1.0E12

DIR

Tolerance time until a technology alarm is triggered when
the external leading value becomes invalid

"StatusExternalLeadingValue" tag (leading axis proxy)
The tag structure "<TO>.StatusExternalLeadingValue.<Tag name>" contains the parameter
values of the external leading value.

Tags
Legend (Página 2051)
Tag

Data type

Values

W

StatusExternalLeading‐
Value.

TO_Struct_LeadingAxisProxy_Sta‐
tusData

Description

ModuloLength

LREAL

0.0 … 1.0E12

RON

Modulo length of the external leading value

ModuloStartValue

LREAL

-1.0E12 …
1.0E12

RON

Modulo start value of the external leading value

AdjustmentTime

LREAL

-1.0E12 …
1.0E12

RON

Time by which the external leading value is adjusted
<0

The external leading value is interpolated by
this time.

>0

The external leading value is extrapolated by
this time.

"StatusWord" tag (leading axis proxy)
The "<TO>.StatusWord" tag contains the status information of the technology object.
Information on the evaluation of the individual bits (e.g. bit 4 "LeadingValueValid") can be found
in the "Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/
S7-1500T Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/
109766459) documentation.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2053

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2051)
Tag
StatusWord
Bit 0

Data type

Values

W

Description

DWORD

-

RON

Status information of the technology object

-

-

-

"Control"
Use status

Bit 1

Bit 2

-

-

-

-

-

-

0

Leading axis proxy not in operation

1

Leading axis proxy in operation

"Error"
0

No error present

1

Error present

"RestartActive"
0

No restart active

1

Restart active
The technology object is being reinitialized.

Bit 3

-

-

-

"OnlineStartValuesChanged"
0
1

Restart tags unchanged
Change to Restart tags
For the changes to be applied, the technology
object must be reinitialized.

Bit 4

Bit 5

Bit 6

Bit 7 …

-

-

-

-

-

-

-

-

-

-

-

-

"LeadingValueValid"
0

Leading value does not exist or is not valid

1

Leading value exists and is valid

"LeadingValueModulo"
0

Leading value without modulo functionality

1

Leading value with modulo functionality

"LeadingAxisControl"
0

Leading axis in tracking mode

1

Leading axis not in tracking mode

Reserved

Bit 31

"'ErrorWord" tag (leading axis proxy)
The "<TO>.ErrorWord" tag indicates technology object errors (technology alarms).
Information on the evaluation of the individual bits (e.g. bit 3 "CommandNotAccepted") can be
found in the "Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/
S7-1500T Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/
109766459) documentation.

2054

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2051)
Tag

Data type

ErrorWord

Values

W

Description

DWORD

-

RON

Bit 0

-

-

-

"SystemFault"

Bit 1

-

-

-

"ConfigFault"

System error
Configuration error
One or more configuration parameters are inconsistent or
invalid.
Bit 2

-

-

-

"UserFault"
Error in user program at a Motion Control instruction or its
use

Bit 3

-

-

-

"CommandNotAccepted"
Job cannot be executed
A Motion Control instruction cannot be executed because
the necessary conditions are not met.

Bit 4 …

-

-

-

Reserved

-

-

-

"CommunicationFault"

Bit 7
Bit 7

Communication error
Missing or faulty communication.
Bit 8 …

-

-

-

Reserved

Bit 31

"ErrorDetail" tag (leading axis proxy)
The tag structure "<TO>.ErrorDetail.<tag name>" contains the alarm number and the effective
local alarm reaction for the technology alarm that is currently pending on the technology object.
You can find a list of the technology alarms and alarm reactions in the "Technology alarms"
section of the "S7-1500/S7-1500T Motion Control overview" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766459).

Tags
Legend (Página 2051)
Tag
ErrorDetail.

Data type

Values

W

Description

TO_Struct_ErrorDetail

Number

UDINT

-

RON

Alarm number

Reaction

DINT

0, 13

RON

Effective alarm reaction

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

0

No reaction

13

Invalid leading value

2055

Control de movimiento
6.1 Using S7-1500 Motion Control

"WarningWord" tag (leading axis proxy)
The "<TO>.WarningWord" tag indicates pending warnings at the technology object.
Information on the evaluation of the individual bits (e.g. bit 1 "ConfigWarning") can be found in
the "Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/S7-1500T
Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459)
documentation.

Tags
Legend (Página 2051)
Tag

Data type

WarningWord

Values

W

Description

DWORD

-

RON

Bit 0

-

-

-

"SystemWarning"

Bit 1

-

-

-

"ConfigWarning"

A system-internal error has occurred.
Configuration error
One or several configuration parameters are adjusted in‐
ternally.
Bit 2

-

-

-

"UserWarning"
Error in user program at a Motion Control instruction or its
use

Bit 3

-

-

-

"CommandNotAccepted"
Job cannot be executed
A Motion Control instruction cannot be executed because
the necessary conditions are not met.

Bit 4 …

-

-

-

Reserved

-

-

-

"CommunicationWarning"

Bit 6
Bit 7

Communication error
Missing or faulty communication.
Bit 8 …

-

-

-

Reserved

Bit 31

2056

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

6.1.5

Using S7-1500T kinematics functions

6.1.5.1

Introduction

Interplay of the various documents
For a better overview, the documentation of the Motion Control functions is divided into the
following documents:
Documentation

Description

S7-1500/S7-1500T Motion Con‐
trol overview

This documentation describes the general Motion Control func‐
tions independent of technology objects.

Function manual "S7-1500/
S7-1500T Motion Control over‐
view" (https://
support.industry.siemens.com/cs/
ww/en/view/109766459)
Using S7-1500/S7-1500T axis
functions

This documentation describes the Motion Control functions for the
following technology objects:

Function manual "S7-1500/
S7-1500T Axis functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766462)

● Speed axis
● Positioning axis
● External encoder

Using S7-1500/S7-1500T measu‐ This documentation describes the Motion Control functions for the
ring input and output cam functions following technology objects:
Function manual "S7-1500/
S7-1500T Measuring input and
output cam functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766466)

● Measuring input

Using S7-1500/S7-1500T
synchronous operation functions

This documentation describes the Motion Control functions for the
following technology objects:

Function manual "S7-1500/
S7-1500T Synchronous operation
functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766464)

● Synchronous axis

Using S7-1500T kinematics func‐
tions

This documentation describes the Motion Control functions for the
following technology objects:

● Output cam
● Cam track

● Cam (S7-1500T)
● Leading axis proxy (S7-1500T)

Function manual "S7-1500T Kine‐ ● Kinematics (S7-1500T)
matics functions" (https://
support.industry.siemens.com/cs/
ww/en/view/109766463)

Additional information
You can find an overview and important links to the topic "SIMATIC Motion Control" in the
Siemens Industry Online Support under the entry ID 109751049 (https://
support.industry.siemens.com/cs/ww/en/view/109751049).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2057

Control de movimiento
6.1 Using S7-1500 Motion Control

Kinematics systems for handling tasks
Kinematics are user-programmable mechanical systems in which multiple mechanically
coupled axes produce the motion of a working point. The S7‑1500T technology CPUs provide
functions for controlling kinematics systems, e.g. for handling tasks, with the kinematics
technology object. Typical applications include:
● Pick & Place
● Installation
● Palletizing
The kinematics control panel and extensive online and diagnostic functions support
straightforward commissioning of kinematics systems. The kinematics technology object is
fully integrated in the system diagnostics of the S7-1500T CPU.

Term definition
Kinematics
Kinematics are user-programmable mechanical systems in which multiple mechanically
coupled axes produce the motion of a working point.

Kinematics axes
Kinematics axes are the axes of the kinematics motion. You connect each kinematics axis with
a positioning axis/synchronous axis technology object.

Kinematics zero point (KZP)
The coordinate origin of the kinematics coordinate system (KCS) is the KZP. You configure the
geometry parameters of the kinematics starting from the KZP.

Zero point of the flange coordinate system (FNP)
The coordinate origin of the flange coordinate system (FCS) is the FNP. Starting from the FNP,
you define, for example, the flange zones of the kinematics.

Tool center point (TCP)
The coordinate origin of the tool coordinate system (TCS) is the tool center point or TCP. The
TCP is the operating point of the kinematics.

Degrees of freedom of kinematics
The degrees of freedom of kinematics are the dimensions in which the tool can move. 2D
kinematics systems move the tool in the xz plane and thus have two translational degrees of
freedom. 3D kinematics systems move the tool in xyz space and thus have three translational
degrees of freedom. The optional orientation of the tool is a further degree of freedom (rotation
of the tool around the z-axis).

2058

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Machine coordinate system (MCS)
The MCS contains the position data of the interconnected kinematics axes and thus combines
up to four one-dimensional systems in one system.

Job sequence
The job sequence of the kinematics technology object is the memory to which motion-related
Motion Control jobs are entered as pending, inactive jobs. All jobs in the job sequence are taken
into account during the motion preparation.

AxesGroup
Kinematics-related Motion Control instructions have the input parameter "AxesGroup". The
kinematics technology object groups the interconnected kinematics axes. Therefore, you can
assign the kinematics technology object directly to the input parameter "AxesGroup".

Functions
You execute the functions of the kinematics technology object using the Motion Control
instructions in your user program or the TIA Portal (under "Technology object >
Commissioning").
The following table shows the functions that are supported by the technology object:
Function

Brief description
Motion Control instructions (user program)

"MC_GroupInterrupt"

Interrupt motion execution

"MC_GroupContinue"

Continue motion execution

"MC_GroupStop"

Stop motion

"MC_MoveLinearAbsolute"

Position kinematics with linear path motion

"MC_MoveLinearRelative"

Relative positioning of kinematics with linear path motion

"MC_MoveCircularAbsolute"

Position kinematics with circular path motion

"MC_MoveCircularRelative"

Relative positioning of kinematics with circular path motion

"MC_MoveDirectAbsolute"

Absolute movement of kinematics with synchronous "point-topoint" motion

"MC_MoveDirectRelative"

Relative movement of kinematics with synchronous "point-topoint" motion

"MC_TrackConveyorBelt"

Start conveyor tracking

"MC_DefineWorkspaceZone"

Define workspace zone

"MC_DefineKinematicsZone"

Define kinematics zone

"MC_SetWorkspaceZoneActive"

Activate workspace zone

"MC_SetWorkspaceZoneInactive" Deactivate workspace zone
"MC_SetKinematicsZoneActive"

Activate kinematics zone

"MC_SetKinematicsZoneInactive"

Deactivate kinematics zone

"MC_DefineTool"

Re-define tool

"MC_SetTool"

Change active tool

"MC_SetOcsFrame"

Redefine object coordinate systems

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2059

Control de movimiento
6.1 Using S7-1500 Motion Control
Function

Brief description

"MC_KinematicsTransformation"

Transforming axis coordinates into Cartesian coordinates

"MC_InverseKinematicsTransfor‐
mation"

Transforming Cartesian coordinates into axis coordinates
TIA Portal

"Kinematics control panel (Pági‐
na 2221)"

6.1.5.2

Homing of kinematics axes and traversing of kinematics systems
or individual kinematics axes via the TIA Portal

Basics

Kinematics technology object
The kinematics technology object calculates motion setpoints for the tool center point (TCP) of
the kinematics taking into account the dynamic settings. The kinematics technology object
calculates the motion setpoints for the individual axes of the kinematics and vice versa from the
current values of the axes using the kinematics transformation. The kinematics technology
object outputs the axis-specific motion setpoints to the interconnected positioning axes.
The kinematics technology object provides the kinematics transformation (Página 2154) for the
predefined kinematics types on the system level. In the case of user-defined kinematics
systems, you must provide the user transformation (Página 2161) in a separate program.
You create the individual axes of the kinematics in the TIA Portal as "Positioning axis" or
"Synchronous axis" technology objects. When you configure the kinematics technology object,
you interconnect the axes in accordance with the configured kinematics type.
You can find an overview of the functions of the kinematics technology object in the "Functions"
(Página 2059) section.
The graphic below shows the basic principle of operation of the kinematics technology object:

2060

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

&RQILJXUDWLRQRIWHFKQRORJ\REMHFWV

VWD[LVRIWKHNLQHPDWLFV
72B3RVLWLRQLQJD[LV
7HFKQRORJ\REMHFW
.LQHPDWLFV

QGD[LVRIWKHNLQHPDWLFV
72B3RVLWLRQLQJD[LV

.LQHPDWLFVW\SH

6HWSRLQWV$

[

$

\

$

ದ

3RVLWLRQ
FRQWUROOHU

$FWXDO
SRVLWLRQ

6SHHG
VHWSRLQW

7UDQVIRUPDWLRQ

$

]
$

,QVWUXFWLRQVIRU
NLQHPDWLFV
6WDWXVHYDOXDWLRQ

6WDWXVOLPLWVHWF

6HWSRVLWLRQ



8VHUSURJUDP

$

6HWSRLQWV

2ULHQWDWLRQD[LV
72B3RVLWLRQLQJD[LV

6HWSRLQWV

UGD[LVRIWKHNLQHPDWLFV
72B3RVLWLRQLQJD[LV

&RPPXQLFDWLRQ


3UHGHILQHGRUXVHUGHILQHG

352),1(7
6,1$0,&6
$

6,1$0,&6
$

6,1$0,&6
$

6,1$0,&6
$

Interconnection rules
You can interconnect a kinematics technology object with positioning axes and synchronous
axes. There must be a clear reference between the kinematics technology object and the
interconnected axes. You cannot use a second kinematics technology object with already
interconnected axes.
No provision is made for changing the interconnection of the axes during operation.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2061

Control de movimiento
6.1 Using S7-1500 Motion Control

Virtual axis/simulation
You can also interconnect the kinematics technology object with axes in simulation and with
virtual axes.

Configuration limits for kinematics systems
Motion Control resources
Each CPU offers a defined set of "Motion Control resources". For information on the total
Motion Control resources available, refer to the technical specifications of the utilized CPU.
You can find an overview of the Motion Control resources of a CPU in the TIA Portal under
"Tools > Resources".

Extended Motion Control resources (S7-1500T)
In addition to the Motion Control resources of the interconnected axes, a kinematics technology
object utilizes 30 "Extended Motion Control resources". For information on the maximum
number of usable kinematics systems, refer to the technical specifications of the utilized CPU.
You can find the technical specifications of the S7-15xxT CPUs in the respective manual.

Application cycle
As the number of technology objects used increases, the computing time needed by the CPU
to process the technology objects increases. The Motion Control application cycle can be
adapted according to the number of technology objects used.

Units of measure
The kinematics technology object supports the following units of measure for position and
velocity of linear axes:
Position

Velocity

nm, μm, mm , m, km

mm/s1), mm/min, mm/h, m/s, m/min, m/h, km/min,
km/h

in, ft, mi

in/s, in/min, ft/s, ft/min, mi/h

1)

The kinematics technology object supports the following units of measure for angle and angular
velocity of rotary axes:
Angle

Angular velocity

° , rad

°/s1), °/min, rad/s, rad/min

1)

1)

Six decimal places when the option box "Use position values with higher resolution" is selected.

The acceleration is set accordingly as the position/s² (angle/s²) unit of measure.

2062

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The jerk is set accordingly as the position/s³ (angle/s³) unit of measure.
Nota
When setting or changing the units of measure, take into consideration the effect on the display
of parameter values and the user program:
● Display of parameter values in the technology data block
● Assignment of parameters in the user program
● Input and display of the position and velocity in the TIA Portal
● Setpoint settings by leading axes in synchronous operation
All information and displays are shown according to the selected unit of measure.
The set units are displayed in the tag structure of the <TO>.Units technology object. The tag
structure is described in the Appendix (Página 2281).

Units of measure of the axes and the kinematics technology object
The technology objects always transfer values without units of measure.
For example, if you set [mm] for an axis and [m] for the kinematics technology object, the
kinematics technology object miscalculates the position values of the linear axis in [m]. If, in this
example, the kinematics technology object outputs a setpoint for a one-meter motion, the axis
only moves by one millimeter.
The kinematics technology object outputs linear and rotary setpoints to the interconnected
axes according to the kinematics type. The kinematics technology object does not check the
axis type of the interconnected axis (linear or rotary).
When configuring the units of measure, take into consideration the following specifications:
● Configure the interconnected technology objects as linear or rotary axes according to the
kinematics type.
● Configure the same linear/rotary units of measure for the axes interconnected according to
the kinematics type as for the kinematics technology object.
Position values with higher resolution
If you select the check box "Use position values with higher resolution" in the configuration of
the technology objects "TO_PositioningAxis", "TO_SynchronousAxis", "TO_ExternalEncoder"
and "TO_Kinematics", six decimal places are available in the selected unit. Due to the LREAL
format, the displayable position and angle range in [mm] and [°] is limited to +1.0E09 digits. This
reduces the position and angle range that can be displayed as well as the mechanical gear ratio
by the factor 1000. With regard to long-term stability, the numerical travel range limit is reduced
accordingly by the factor 1000.

Modulo setting
The kinematics technology object itself has no modulo setting. When you interconnect axes
with active modulo setting to the kinematics technology object, the module range of the axes
must cover at least the traversing range of the kinematics. The zero position of the axis must
match the zero position of the kinematics axis. With the exception of the orientation axis, the
module range of the axes cannot be changed during a kinematics motion.
Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2063

Control de movimiento
6.1 Using S7-1500 Motion Control
The modulo setting is typically used for the orientation axis. In the case of the orientation axis
(axis A4 in the kinematics), the kinematics transformation covers the entire traversing range of
the axis. The orientation axis traverses without limitations through an activated modulo setting.
An angle greater than 360° can be defined for the Cartesian orientation. A relative motion
traverses this angle. An absolute motion maps this angle in the range from 0° to 360°. The
range -180° to +180° is generally defined for the coordinate A of the tool center point (TCP).

Coordinate systems and frames
A handling task involves many objects, e.g. kinematics systems, tools, pallets and products.
You describe these objects and their relative positions with coordinate systems and frames.
The kinematics technology object calculates all motions for the tool center point (TCP).

Frames
Frames specify the shift and rotation of one coordinate system relative to another coordinate
system.

Coordinate systems
The kinematics technology object uses the following right-handed Cartesian coordinate
systems according to DIN 66217:
● World coordinate system (WCS)
● Kinematics coordinate system (KCS)
● Flange coordinate system (FCS)
● Tool coordinate system (TCS)
● Object coordinate systems (OCS)
The following graphic shows the relative position of the coordinate systems using a workspace
example:

2064

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

7&3

)&6

7&6



2&6

.&6
2&6

2&6
:&6

①
②
③

Control cabinet

WCS

World coordinate system

KCS

Kinematics coordinate system

FCS

Flange coordinate system (FCS)

TCS

Tool coordinate system

TCP

Tool center point

OCS

Object coordinate system

Conveyor belt
Slide

World coordinate system (WCS)
The WCS is the fixed coordinate system of the environment or workspace of the kinematics.
The zero point of the WCS is the reference point for objects and motions on the kinematics
technology object. Starting from the zero point of the WCS (e.g. corner of a workspace), you
define the position of the objects using frames.

Kinematics coordinate system (KCS)
The KCS is connected to the kinematics. The position of the KCS within the kinematics is
specified for each predefined kinematics type. The coordinate origin of the KCS is the
kinematics zero point (KZP). You configure the geometry parameters of the kinematics starting
from the KZP.
You configure the position of the KCS in the WCS using the KCS frame.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2065

Control de movimiento
6.1 Using S7-1500 Motion Control

Flange coordinate system (FCS)
The FCS is attached to the tool adapter (flange) of the kinematics. As a result, the position of
the FCS changes with kinematics motions.
The position of the FCS in the zero position of the kinematics results from the configuration of
the geometry parameters of the kinematics. The kinematics technology object calculates the
transformation frame from the geometry parameters. The transformation frame describes the
position of the FCS in the KCS. The z axis of the FCS always points in the negative z direction
of the KCS.
The following graphic shows the positions of the FCS and KCS and the transformation frame
using the "Cylindrical robot" kinematics example:

)&6





.&6

:&6

①
②

Transformation frame
KCS frame

Tool coordinate system (TCS - Tool Coordinate System) and tool center point (TCP - Tool Center Point)
The TCS is attached to the FCS and defines the tool center point (TCP) in the coordinate origin.
The TCP is the operating point of the tool. The kinematics motions always refer to the TCP (with
reference to WCS/OCS). You define the position of the TCS in the FCS using a tool frame. The
z axis of the TCS always points in the negative z direction of the KCS. You can define tool
frames for up to three tools, of which only one tool and therefore one tool frame is active at the
same time.
The following graphic shows the position of the TCS and the TCP in the workspace:

2066

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

)&6
7&3

7&6

①

Tool frame

Object coordinate system (OCS)
The OCS is a user-defined coordinate system. With an OCS, for example, you define the
position of a pallet in the workspace. You define the position of the OCS in the WCS with an
OCS frame. You can define up to three OCS frames which are active at the same time.

2&6


:&6

①

OCS frame

Frames
The following table shows the frames for the kinematics technology object:
Frame

Description

KCS frame

Position of the kinematics coordinate system (KCS) in the world coordinate
system (WCS)

Transformation frame

Position of the flange coordinate system (FCS) in the KCS
The transformation frame results from the kinematics transformation and is
displayed in the "<TO>.FlangeInKcs" tag of the technology object.

Tool frame

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Position of the tool coordinate system (TCS) in the FCS

2067

Control de movimiento
6.1 Using S7-1500 Motion Control
Frame

Description

OCS1..3 frame

Position of the object coordinate systems 1 to 3 (OCS[1..3]) in the WCS

Target position

Target position for a kinematics motion

Shift
You use the shift to define the position of the zero point of a coordinate system or a zone within
the reference coordinate system. You specify the shift in Cartesian coordinates.

Rotation
You use the rotation to define the orientation of a coordinate system or a zone within the
reference coordinate system. The rotation is made up of three successive individual rotations
around the axes of the coordinate system which you define using three Euler angles. The
individual rotations depend on each other.
The following graphic shows the three successive rotations using a cuboid zone as an example:

2068

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control


]

]

\

\

[
[



\

\

]

]

[
[


\
]

\
]

[

①
②
③

[

Rotation A
Rotation B
Rotation C

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2069

Control de movimiento
6.1 Using S7-1500 Motion Control
The following table shows the definition of the rotations:
Rotation

Description

Rotation A

Euler angle of the first rotation
A positive angle corresponds to a clockwise rotation around the z axis of the
coordinate system.
The coordinate system rotated once consists of the axes x', y' and z.

Rotation B

Euler angle of the second rotation
A positive angle corresponds to a clockwise rotation around the rotated y'
axis.
The coordinate system rotated twice consists of the axes x'', y' and z'.

Rotation C

Euler angle of the third rotation
A positive angle corresponds to a clockwise rotation around the rotated x''
axis.
The coordinate system rotated three times consists of the axes x'', y'' and z''.
The x'', y'' and z'' axes correspond to the x, y and z axes of the rotated coor‐
dinate system or of the rotated zone.

Frame definition
Frames define the shift and rotation of one coordinate system relative to another coordinate
system with the following values:
Value in the frame

Description

x

Shift in the x direction in the reference coordinate system

y

Shift in the y direction in the reference coordinate system

z

Shift in the z direction in the reference coordinate system

A

Rotation around the z-axis

B

Rotation around the y-axis

C

Rotation around the x-axis

The following table shows the restrictions for frames depending on the kinematics type. The
information "x", "y" and "z" means that a shift in the respective direction is possible. The
information "A", "B" and "C" means that a rotation in the respective direction is possible. The
information "= 0.0" means that a shift or rotation in the respective direction is not permitted or
not relevant for the kinematics type.
Kinematics type
2D

2D with orientation

2070

KCS frame/OCS frame

Tool frame

Target position

Shift

Rotation

Shift

Rotation

Shift

Rotation

x

A = 0.0

x

A = 0.0

x

A = 0.0

y = 0.0

B

y = 0.0

B = 0.0

y = 0.0

B = 0.0

z

C = 0.0

z

C = 0.0

z

C = 0.0

Shift

Rotation

Shift

Rotation

Shift

Rotation

x

A = 0.0

x = 0.0

A

x

A

y = 0.0

B = 0.0

y = 0.0

B = 0.0

y = 0.0

B = 0.0

z

C = 0.0

z

C = 0.0

z

C = 0.0

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Kinematics type

KCS frame/OCS frame

3D

3D with orientation

Tool frame

Target position

Shift

Rotation

Shift

Rotation

Shift

Rotation

x

A

x

A = 0.0

x

A = 0.0

y

B

y

B = 0.0

y

B = 0.0

z

C

z

C = 0.0

z

C = 0.0

Shift

Rotation

Shift

Rotation

Shift

Rotation

x

A

x

A

x

A

y

B = 0.0

y

B = 0.0

y

B = 0.0

z

C = 0.0

z

C = 0.0

z

C = 0.0

x, y, z, A, B, C: Shift/rotation possible
Value = 0.0: Shift/rotation not permitted or not relevant

The following table shows the value ranges for the rotations of KCS, OCS and tool frames
depending on the kinematics type:
Kinematics type

Value ranges
KCS frame/OCS frame

2D

2D with orientation

3D

3D with orientation

Tool frame

A

0.0

A

0.0

B

-180.0° to 179.999°

-

-

C

0.0

-

-

A

0.0

A

-180.0° to 179.999°

B

0.0

-

-

C

0.0

-

-

A

-180.0° to 179.999°

A

0.0

B

-90.0° to 90.0°

-

-

C

-180.0° to 179.999°

-

-

A

-180.0° to 179.999°

A

-180.0° to 179.999°

B

0.0

-

-

C

0.0

-

-

Value = 0.0: Rotation not permitted
No information (-): Parameter not available

Tags: Coordinate systems and frames
The following tags of the kinematics technology object are relevant for coordinate systems and
frames:
Tag

Description

Configuration
<TO>.KcsFrame

KCS frame
x, y, z, A, B, C

<TO>.OcsFrame[1..3]

OCS frame
x, y, z, A, B, C

<TO>.Tool[1..3]

Tool frame
x, y, z, A

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2071

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag

Description

Status values
<TO>.Tcp

Position of the tool center point (TCP), TCP frame in the world coordinate system (WCS).
x, y, z, A

<TO>.TcpInWcs

Parameter for tool center point in the world coordinate system
x, y, z, A

<TO>.TcpInOcs[1..3]

Parameter for the tool center point (TCP) in the Object Coordinate Systems 1 to 3 (OCS)
x, y, z, A

<TO>.FlangeInKcs

Parameter for the flange coordinate system (FCS) in the kinematics coordinate system (KCS)
x, y, z, A

<TO>.StatusOcsFrame[1..3]

Display of the OCS frames
x, y, z, A, B, C

Kinematics types
The type of the mechanical system and the number of the axes determine the kinematics type.
The mechanically coupled axes produce the motion of the tool center point (TCP). Depending
on the kinematics type, you configure the kinematics using appropriate geometry parameters.
The kinematics technology object supports the following kinematics types:
Category

Kinematics type

Predefined kinematics systems
Cartesian portal (Página 2074)

Cartesian portal 2D
Cartesian portal 2D with orientation
Cartesian portal 3D
Cartesian portal 3D with orientation

Roller picker (Página 2085)

Roller picker 2D
Roller picker 2D with orientation
Roller picker 3D (vertical)
Roller picker 3D with orientation (vertical)
Roller picker 3D with orientation (horizontal)

SCARA (Página 2099)

SCARA 3D with orientation
SCARA 2D with orientation

Articulated arm (Página 2107)

Articulated arm 2D
Articulated arm 2D with orientation
Articulated arm 3D
Articulated arm 3D with orientation

Delta picker (Página 2124)

Delta picker 2D
Delta picker 2D with orientation
Delta picker 3D
Delta picker 3D with orientation

Cylindrical robot (Página 2137)

Cylindrical robot 3D
Cylindrical robot 3D with orientation

2072

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Category

Kinematics type

Tripod (Página 2146)

Tripod 3D
Tripod 3D with orientation

User-defined kinematics systems
User-defined kinematics
systems (Página 2153)

User-defined 2D
User-defined 2D with orientation
User-defined 3D
User-defined 3D with orientation

Legend for representation of the kinematics
The following table shows the graphic elements and symbols which are used to display the
kinematics:
Graphic element

Meaning
Basis of kinematics
Kinematics arm
Kinematics deflected from zero position
Active rotary axis
● Passive joint
● Axis guide
Active linear axis
Rotary axis on the tool adapter (orientation axis)
Tool adapter
Tool (gripper)

Coordinate axis set up out of the mapping plane
Coordinate axis set up into the mapping plane
Color x axis
Color y axis
Color z axis

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2073

Control de movimiento
6.1 Using S7-1500 Motion Control

Cartesian portal
Portal 2D
The kinematics "Portal 2D" supports two axes and two degrees of freedom. The following
graphic shows the principal configuration and the typical working area of the kinematics:

The kinematics consists of two orthogonal, linear axes A1 and A2. The axes enclose a
rectangular working range.

Coordinate systems and zero position
The graphic below shows the following in the front view:
● The position of the axes and the coordinate systems KCS and FCS
● The zero position of the kinematics
● The positive deflection of the kinematics is indicated (dashed)

2074

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

$

$

/)

].&6

[ )&6

/

[ )&6

]

])&6

])&6

[ .&6
/

[

Zero position of the kinematics
L1

At zero position of the axis A1:
Distance of the FCS to the KZP in x direction of the KCS

L2

At zero position of the axis A2:
Distance of the FCS to the KZP and flange length LF in z direction of the KCS

LF

Flange length before the FCS in the z direction of the KCS

Deflection of the kinematics
x1

Deflection of the axis A1 in the positive x direction

z1

Deflection of the axis A2 in the positive z direction

Legend for representation of the kinematics (Página 2073)

The kinematics coordinate system (KCS) with the kinematics zero point (KZP) is located at the
base of the kinematics. The flange coordinate system (FCS) is located at distance LF from the
zero position of the axis A2.
The position 0.0 on the respective interconnected technology object defines the zero positions
of the axes A1 and A2 in the KCS. You define the distances of the zero positions of the axes in
relation to the kinematics zero point using lengths L1 and L2.

Transformation area
The kinematics transformation covers the entire traversing range (Página 2155) of the axes.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2075

Control de movimiento
6.1 Using S7-1500 Motion Control

Portal 2D with orientation
The kinematics "Portal 2D with orientation" supports three axes and three degrees of freedom.
The following graphic shows the principal configuration and the typical working area of the
kinematics:

The kinematics consists of the following axes:
● Two orthogonal linear axes A1 and A2
● One rotary axis A4 (orientation axis)
The linear axes enclose a rectangular working area. The orientation axis A4 enables rotation
of the tool.

Coordinate systems and zero position
The graphic below shows the following in the front view:
● The position of the axes and the coordinate systems KCS and FCS
● The zero position of the kinematics
● The positive deflection of the kinematics is indicated (dashed)

2076

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

$

$
$
/)

].&6

[ )&6

/

[ )&6

]

])&6

])&6

[ .&6
/

[

Zero position of the kinematics
L1

At zero position of the axis A1:
Distance of the FCS to the kinematics zero point (KZP) in x direction of the KCS

L2

At zero position of the axis A2:
Distance of the FCS to the KZP and flange length LF in z direction of the KCS

LF

Flange length before the FCS in the z direction of the KCS

Deflection of the kinematics
x1

Deflection of the axis A1 in the positive x direction

z1

Deflection of the axis A2 in the positive z direction

Legend for representation of the kinematics (Página 2073)

The kinematics coordinate system (KCS) with the kinematics zero point (KZP) is located at the
base of the kinematics. The flange coordinate system (FCS) is located at distance LF from the
zero position of the axis A2.
The position 0.0 on the respective interconnected technology object defines the zero positions
of the axes A1 and A2 in the KCS. You define the distances of the zero positions of the axes A1
and A2 to the kinematics zero point with lengths L1 and L2. At the zero position of axis A4, the
x axis of the FCS points in the direction of the x axis of the KCS.

Transformation area
The kinematics transformation covers the entire traversing range (Página 2155) of the axes.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2077

Control de movimiento
6.1 Using S7-1500 Motion Control

Portal 3D
The kinematics "Portal 3D with orientation" supports three axes and three degrees of freedom.
The following graphic shows the principal configuration and the typical working area of the
kinematics:

The kinematics consists of three orthogonal, linear axes A1, A2 and A3. The linear axes
enclose a rectangular working area.

Coordinate systems and zero position
The graphic below shows the following in the front view (xz plane):
● The position of the axes and the coordinate systems KCS and FCS
● The zero position of the kinematics
● The positive/negative deflection of the axes A1 and A3 is indicated (dashed)

2078

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

$

$

$

\)&6

/)

].&6

/

\.&6

\)&6

[ )&6

[ )&6

]

])&6

])&6

[ .&6
/

[

Zero position of the kinematics
L1

At zero position of the axis A1:
Distance of the FCS to the kinematics zero point (KZP) in x direction of the KCS

L3

At zero position of the axis A3:
Distance of the FCS to the KZP and flange length LF in z direction of the KCS

LF

Flange length before the FCS in the z direction of the KCS

Deflection of the kinematics
x1

Deflection of the axis A1 in the positive x direction

z1

Deflection of the axis A3 in the positive z direction

Legend for representation of the kinematics (Página 2073)

The graphic below shows the following in the top view (xy plane):
● The position of the axes and the coordinate systems KCS and FCS
● The zero position of the kinematics
● The positive/negative deflection of the axes A1 and A2 is indicated (dashed)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2079

Control de movimiento
6.1 Using S7-1500 Motion Control

$
$

$

])&6

[ )&6
\

\)&6
])&6

\.&6

/

[ )&6

\)&6

].&6

[ .&6
/

[

Zero position of the kinematics
L1

At zero position of the axis A1:

L2

At zero position of the axis A2:

Distance of the FCS to the KZP in x direction of the KCS
Distance of the FCS to the KZP in y direction of the KCS
Deflection of the kinematics
x1

Deflection of the axis A1 in the positive x direction

y1

Deflection of the axis A2 in negative y direction

Legend for representation of the kinematics (Página 2073)

The kinematics coordinate system (KCS) with the kinematics zero point (KZP) is located at the
base of the kinematics. The flange coordinate system (FCS) is located at distance LF from the
zero position of the axis A2.
The position 0.0 on the respective interconnected technology object defines the zero positions
of the axes A1, A2 and A3 in the KCS. You define the distances of the zero positions of the axes
to the kinematics zero point with lengths L1, L2 and L3.

Transformation area
The kinematics transformation covers the entire traversing range (Página 2155) of the axes.

2080

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Portal 3D with orientation
The kinematics "Portal 3D with orientation" supports four axes and four degrees of freedom.
The following graphic shows the principal configuration and the typical working area of the
kinematics:

The kinematics consists of the following axes:
● Three orthogonal linear axes A1, A2 and A3
● One rotary axis A4 (orientation axis)
The linear axes enclose a rectangular working area. The orientation axis A4 enables rotation
of the tool.

Coordinate systems and zero position
The graphic below shows the following in the front view (xz plane):
● The position of the axes and the coordinate systems KCS and FCS
● The zero position of the kinematics
● The positive/negative deflection of the axes A1 and A3 is indicated (dashed)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2081

Control de movimiento
6.1 Using S7-1500 Motion Control

$

$

$
$
/)

].&6

/

\.&6

\)&6
\)&6

[ )&6

[ )&6

]

])&6

])&6

[ .&6
/

[

Zero position of the kinematics
L1

At zero position of the axis A1:
Distance of the FCS to the kinematics zero point (KZP) in x direction of the KCS

L3

At zero position of the axis A3:
Distance of the FCS to the KZP and flange length LF in z direction of the KCS

LF

Flange length before the FCS in the z direction of the KCS

Deflection of the kinematics
x1

Deflection of the axis A1 in the positive x direction

z1

Deflection of the axis A3 in the positive z direction

Legend for representation of the kinematics (Página 2073)

The graphic below shows the following in the top view (xy plane):
● The position of the axes and the coordinate systems KCS and FCS
● The zero position of the kinematics
● The positive/negative deflection of the axes A1 and A2 is indicated (dashed)

2082

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

$
$

$$

])&6

[ )&6
\

\)&6
])&6

\.&6

[ )&6

/

\)&6

].&6

[ .&6
/

[

Zero position of the kinematics
L1

At zero position of the axis A1:

L2

At zero position of the axis A2:

Distance of the FCS to the KZP in x direction of the KCS
Distance of the FCS to the KZP in y direction of the KCS
Deflection of the kinematics
x1

Deflection of the axis A1 in the positive x direction

y1

Deflection of the axis A2 in negative y direction

Legend for representation of the kinematics (Página 2073)

The kinematics coordinate system (KCS) with the kinematics zero point (KZP) is located at the
base of the kinematics. The flange coordinate system (FCS) is located at distance LF from the
zero position of the axis A2.
The position 0.0 on the respective interconnected technology object defines the zero positions
of the axes A1, A2 and A3 in the KCS. You define the distances of the zero positions of the axes
A1, A2 and A3 to the kinematics zero point with lengths L1, L2 and L3. At the zero position of
axis A4, the x axis of the FCS points in the direction of the x axis of the KCS.

Transformation area
The kinematics transformation covers the entire traversing range (Página 2155) of the axes.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2083

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags: Cartesian portal
Portal 2D
You define the 2D portal kinematics using the following tags of the technology object:
Tags
<TO>.Kinematics.TypeOfKinematics

Values

Description

1

Portal 2D

2

Portal 2D with orientation

<TO>.Kinematics.Parameter[1]

-1.0E12 to 1.0E12

Distance L1 of the zero position of the axis A1 to the kine‐
matics zero point (KZP) in x direction of the kinematics coor‐
dinate system (KCS)

<TO>.Kinematics.Parameter[2]

-1.0E12 to 1.0E12

Distance of the flange coordinate system from the axis A2 in
the negative z direction of the KCS

<TO>.Kinematics.Parameter[3]

-1.0E12 to 1.0E12

Distance L2 of the zero position of the axis A2 to the KZP in
z direction of the KCS

Portal 3D
You define the 3D portal kinematics using the following tags of the technology object:
Tags
<TO>.Kinematics.TypeOfKinematics

Values

Description

3

Portal 3D

4

Portal 3D with orientation

<TO>.Kinematics.Parameter[1]

-1.0E12 to 1.0E12

Distance L1 of the zero position of the axis A1 to the KZP in
x direction of the KCS

<TO>.Kinematics.Parameter[2]

-1.0E12 to 1.0E12

Distance L2 of the zero position of the axis A2 to the KZP in
y direction of the KCS

<TO>.Kinematics.Parameter[3]

-1.0E12 to 1.0E12

Distance of the flange coordinate system from the axis A3 in
the negative z direction of the KCS

<TO>.Kinematics.Parameter[4]

-1.0E12 to 1.0E12

Distance L3 of the zero position of the axis A3 to the KZP in
z direction of the KCS

Consulte también
Tags of the kinematics technology object (Página 2258)

2084

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Roller picker
Roller picker 2D
The kinematics "Roller picker 2D" supports two axes and two degrees of freedom. The
following graphic shows the principal configuration and the typical working area of the
kinematics:

The kinematics consists of two rotary axes A1 and A2 and a system of guide rollers. If both axes
A1 and A2 rotate with the same velocity in the same direction, the flange moves horizontally in
x direction of the KCS. If both axes A1 and A2 rotate with the same velocity in opposite
directions, the flange moves vertically in z direction of the KCS. The kinematics enables a
rectangular working area.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2085

Control de movimiento
6.1 Using S7-1500 Motion Control

Coordinate systems and zero position
The graphic below shows the following in the front view:
● The position of the axes and the coordinate systems KCS and FCS
● The zero position of the kinematics
● The deflection of the kinematics is indicated (dashed)

$

$

5

5

[ )&6
])&6

]
/)
[ )&6

/
])&6

].&6

[ .&6
/

[

Zero position of the kinematics
L1

With zero position of the axes A1 and A2:
Distance of the FCS to the KZP in x direction of the KCS

L2

With zero position of the axes A1 and A2:
Distance of the FCS to the KZP and flange length LF in z direction of the KCS

LF

Flange length before the FCS in the z direction of the KCS

R1

Cam radius for axis A1

R2

Cam radius for axis A2

Deflection of the kinematics
x1

Deflection of the kinematics in the positive x direction

z1

Deflection of the kinematics in the positive z direction

Legend for representation of the kinematics (Página 2073)

2086

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The kinematics coordinate system (KCS) with the kinematics zero point (KZP) is located at the
base of the kinematics. The flange coordinate system (FCS) is located between axes A1 and
A2.
The position 0.0 on the respective interconnected technology object defines the zero position
of the axes A1 and A2. You define the position of the FCS for zero position of the axes A1 and
A2 using lengths L1 and L2. You shift the FCS in the negative z direction of the KCS using
length LF.

Transformation area
The kinematics transformation covers the entire traversing range (Página 2155) of the axes.

Roller picker 2D with orientation
The kinematics "Roller picker 2D with orientation" supports three axes and three degrees of
freedom. The following graphic shows the principal configuration and the typical working area
of the kinematics:

The kinematics consists of a system made up of guide rollers and the following axes:
● Two rotary axes A1 and A2
● A rotational axis A4 (orientation axis) with rotation around z in the KCS
If both axes A1 and A2 rotate with the same velocity in the same direction, the flange moves
horizontally in x direction of the KCS. If both axes A1 and A2 rotate with the same velocity in
opposite directions, the flange moves vertically in z direction of the KCS. The kinematics
enables a rectangular working area. The orientation axis A4 enables rotation of the tool.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2087

Control de movimiento
6.1 Using S7-1500 Motion Control

Coordinate systems and zero position
The graphic below shows the following in the front view:
● The position of the axes and the coordinate systems KCS and FCS
● The zero position of the kinematics
● The deflection of the kinematics is indicated (dashed)

$

$

5

5

[ )&6

$

])&6

]
/)
[ )&6

/
])&6

].&6

[ .&6
/

[

Zero position of the kinematics
L1

With zero position of the axes A1 and A2:
Distance of the FCS to the KZP in x direction of the KCS

L2

With zero position of the axes A1 and A2:
Distance of the FCS to the KZP and flange length LF in z direction of the KCS

LF

Flange length before the FCS in the z direction of the KCS

R1

Cam radius for axis A1

R2

Cam radius for axis A2

Deflection of the kinematics
x1

Deflection of the kinematics in the positive x direction

z1

Deflection of the kinematics in the positive z direction

Legend for representation of the kinematics (Página 2073)

2088

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The kinematics coordinate system (KCS) with the kinematics zero point (KZP) is located at the
base of the kinematics. The flange coordinate system (FCS) is located between axes A1 and
A2.
The position 0.0 on the respective interconnected technology object defines the zero position
of the axes A1 and A2. You define the position of the FCS for zero position of the axes A1 and
A2 using lengths L1 and L2. You shift the FCS in the negative z direction of the KCS using
length LF. At the zero position of axis A4, the x axis of the FCS points in the direction of the x
axis of the KCS.

Transformation area
The kinematics transformation covers the entire traversing range (Página 2155) of the axes.

Roller picker 3D (vertical)
The kinematics "Roller picker 3D (vertical)" supports three axes and three degrees of freedom.
The following graphic shows the principal configuration and the typical working area of the
kinematics:

The kinematics consists of a system made up of guide rollers and the following axes:
● Two rotary axes A1 and A2
● A linear axis A3 in y direction of the KCS
If both axes A1 and A2 rotate with the same velocity in the same direction, the flange moves
horizontally in x direction of the KCS. If both axes A1 and A2 rotate with the same velocity in
opposite directions, the flange moves vertically in z direction of the KCS. The linear portal axis
A3 moves the system of guide rollers horizontally in y direction of the KCS. The kinematics
enables a cuboid working area.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2089

Control de movimiento
6.1 Using S7-1500 Motion Control

Coordinate systems and zero position
The graphic below shows the following in the front view (xz plane):
● The position of the axes and the coordinate systems KCS and FCS
● The zero position of the kinematics
● The deflection of the kinematics is indicated (dashed)

$

$

5

5

$

\)&6

[ )&6

])&6

]
/)
\)&6

[ )&6
/

])&6

].&6

\.&6

[ .&6
/

[

Zero position of the kinematics
L1

With zero position of the axes A1 and A2:
Distance of the FCS to the KZP in x direction of the KCS

L3

With zero position of the axes A1 and A2:
Distance of the FCS to the KZP and flange length LF in z direction of the KCS

LF

Flange length before the FCS in the z direction of the KCS

R1

Cam radius for axis A1

R2

Cam radius for axis A2

Deflection of the kinematics
x1

Deflection of the kinematics in the positive x direction

z1

Deflection of the kinematics in the positive z direction

Legend for representation of the kinematics (Página 2073)

2090

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The graphic below shows the following in the top view (xy plane):
● The position of the axes and the coordinate systems KCS and FCS
● The zero position of the kinematics
● The deflection of the kinematics is indicated (dashed)

])&6

$

[ )&6

\)&6
$

$

])&6
\.&6

[ )&6
/

\)&6

].&6

\

[ .&6
/

[

Zero position of the kinematics
L1

With zero position of the axes A1 and A2:
Distance of the FCS to the KZP in x direction of the KCS

L2

At zero position of the axis A3:
Distance of the FCS to the KZP in y direction of the KCS

R1

Cam radius for axis A1

R2

Cam radius for axis A2

Deflection of the kinematics
x1

Deflection of the kinematics in the positive x direction

y1

Deflection of the kinematics in the positive y direction

Legend for representation of the kinematics (Página 2073)

The kinematics coordinate system (KCS) with the kinematics zero point (KZP) is located at the
base of the kinematics. The flange coordinate system (FCS) is located between axes A1 and
A2.
The position 0.0 on the respective interconnected technology object defines the zero position
of the axes A1 and A2 and the zero position of the axis A3 in the KCS. You define the distance
of the zero position of the axis A3 to the KZP in y direction of the KCS using length L2.
You define the position of the FCS for zero position of the axes A1 and A2 using lengths L1 and
L3. You shift the FCS in the negative z direction of the KCS using length LF.

Transformation area
The kinematics transformation covers the entire traversing range (Página 2155) of the axes.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2091

Control de movimiento
6.1 Using S7-1500 Motion Control

Roller picker 3D with orientation (vertical)
The kinematics "Roller picker 3D with orientation (vertical)" supports four axes and four
degrees of freedom. The following graphic shows the principal configuration and the typical
working area of the kinematics:

The kinematics consists of a system made up of guide rollers and the following axes:
● Two rotary axes A1 and A2
● A linear axis A3 in y direction of the KCS
● A rotational axis A4 (orientation axis) with rotation around z in the KCS
If both axes A1 and A2 rotate with the same velocity in the same direction, the flange moves
horizontally in x direction of the KCS. If both axes A1 and A2 rotate with the same velocity in
opposite directions, the flange moves vertically in z direction of the KCS. The linear portal axis
A3 moves the system of guide rollers horizontally in y direction of the KCS. The kinematics
enables a cuboid working area. The orientation axis A4 enables rotation of the tool.

2092

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Coordinate systems and zero position
The graphic below shows the following in the front view (xz plane):
● The position of the axes and the coordinate systems KCS and FCS
● The zero position of the kinematics
● The deflection of the kinematics is indicated (dashed)

$

$

5

5

$

\)&6

$

[ )&6

])&6

]
/)
\)&6

[ )&6
/

])&6

].&6

\.&6

[ .&6
/

[

Zero position of the kinematics
L1

With zero position of the axes A1 and A2:
Distance of the FCS to the KZP in x direction of the KCS

L3

With zero position of the axes A1 and A2:
Distance of the FCS to the KZP and flange length LF in z direction of the KCS

LF

Flange length before the FCS in the z direction of the KCS

R1

Cam radius for axis A1

R2

Cam radius for axis A2

Deflection of the kinematics
x1

Deflection of the kinematics in the positive x direction

z1

Deflection of the kinematics in the positive z direction

Legend for representation of the kinematics (Página 2073)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2093

Control de movimiento
6.1 Using S7-1500 Motion Control
The graphic below shows the following in the top view (xy plane):
● The position of the axes and the coordinate systems KCS and FCS
● The zero position of the kinematics
● The deflection of the kinematics is indicated (dashed)

])&6

$

[ )&6

\)&6
$

$

$

])&6
\.&6

[ )&6
/

\)&6

].&6

\

[ .&6
/

[

Zero position of the kinematics
L1

With zero position of the axes A1 and A2:
Distance of the FCS to the KZP in x direction of the KCS

L2

At zero position of the axis A3:
Distance of the FCS to the KZP in y direction of the KCS

R1

Cam radius for axis A1

R2

Cam radius for axis A2

Deflection of the kinematics
x1

Deflection of the kinematics in the positive x direction

y1

Deflection of the kinematics in the positive y direction

Legend for representation of the kinematics (Página 2073)

The kinematics coordinate system (KCS) with the kinematics zero point (KZP) is located at the
base of the kinematics. The flange coordinate system (FCS) is located between axes A1 and
A2.
The position 0.0 on the respective interconnected technology object defines the zero position
of the axes A1 and A2 and the zero position of the axis A3 in the KCS. You define the distance
of the zero position of the axis A3 to the KZP in y direction of the KCS using length L2.
You define the position of the FCS for zero position of the axes A1 and A2 using lengths L1 and
L3. You shift the FCS in the negative z direction of the KCS using length LF. At the zero position
of axis A4, the x axis of the FCS points in the direction of the x axis of the KCS.

Transformation area
The kinematics transformation covers the entire traversing range (Página 2155) of the axes.

2094

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Roller picker 3D with orientation (horizontal)
The kinematics "Roller picker 3D with orientation (horizontal)" supports four axes and four
degrees of freedom. The following graphic shows the principal configuration and the typical
working area of the kinematics:

The kinematics consists of a system made up of guide rollers and the following axes:
● Two rotary axes A1 and A2
● A linear axis A3 in z direction of the KCS
● A rotational axis A4 (orientation axis) with rotation around z in the KCS
If both axes A1 and A2 rotate with the same velocity in the same direction, the flange moves
horizontally in x direction of the KCS. If both axes A1 and A2 rotate with the same velocity in
opposite directions, the flange moves horizontally in y direction of the KCS. The linear portal
axis A3 moves the system of guide rollers vertically in z direction of the KCS. The kinematics
enables a cuboid working area. The orientation axis A4 enables rotation of the tool.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2095

Control de movimiento
6.1 Using S7-1500 Motion Control

Coordinate systems and zero position
The graphic below shows the following in the front view (xz plane):
● The position of the axes and the coordinate systems KCS and FCS
● The zero position of the kinematics
● The deflection of the kinematics is indicated (dashed)

$

$

$

\)&6

[ )&6

])&6
$

]
/)
\)&6
].&6

[ )&6

/

])&6

\.&6

[ .&6
/

[

Zero position of the kinematics
L1

With zero position of the axes A1 and A2:
Distance of the FCS to the KZP in x direction of the KCS

L3

At zero position of the axis A3:
Distance of the FCS to the KZP and flange length LF in z direction of the KCS

LF

Flange length before the FCS in the z direction of the KCS

R1

Cam radius for axis A1

R2

Cam radius for axis A2

Deflection of the kinematics
x1

Deflection of the kinematics in the positive x direction

z1

Deflection of the kinematics in the positive z direction

Legend for representation of the kinematics (Página 2073)

2096

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The graphic below shows the following in the top view (xy plane):
● The position of the axes and the coordinate systems KCS and FCS
● The zero position of the kinematics
● The deflection of the kinematics is indicated (dashed)
$

$
5

5

])&6

[ )&6

\)&6

[
$$

])&6

\.&6

[ )&6
/

\)&6
[ .&6

].&6

/

[

Zero position of the kinematics
L1

With zero position of the axes A1 and A2:
Distance of the FCS to the KZP in x direction of the KCS

L2

With zero position of the axes A1 and A2:
Distance of the FCS to the KZP in y direction of the KCS

R1

Cam radius for axis A1

R2

Cam radius for axis A2

Deflection of the kinematics
x1

Deflection of the kinematics in the positive x direction

y1

Deflection of the kinematics in the positive y direction

Legend for representation of the kinematics (Página 2073)

The kinematics coordinate system (KCS) with the kinematics zero point (KZP) is located at the
base of the kinematics. The flange coordinate system (FCS) is located between axes A1 and
A2.
The position 0.0 on the respective interconnected technology object defines the zero position
of the axes A1 and A2 and the zero position of the axis A3 in the KCS. You define the distance
of the zero position of the axis A3 to the KZP in y direction of the KCS using length L2.
You define the position of the FCS for zero position of the axes A1 and A2 using lengths L1 and
L3. You shift the FCS in the negative z direction of the KCS using length LF.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2097

Control de movimiento
6.1 Using S7-1500 Motion Control

Transformation area
The kinematics transformation covers the entire traversing range (Página 2155) of the axes.

Tags: Roller picker
Roller picker 2D
You define the 2D delta picker kinematics systems using the following tags of the technology
object:
Tags

Values

Description

<TO>.Kinematics.TypeOfKinematics

5

Roller picker 2D

<TO>.Kinematics.Parameter[1]

6

Roller picker 2D with orientation

-1.0E12 to 1.0E12

With zero position of the axes A1 and A2:
Distance L1 of the FCS to the KZP in x direction of the kine‐
matics coordinate system (KCS)

<TO>.Kinematics.Parameter[2]

0.001 to 1.0E12

Cam radius R1 for axis 1

<TO>.Kinematics.Parameter[3]

0.001 to 1.0E12

Cam radius R2 for axis 2

<TO>.Kinematics.Parameter[4]

-1.0E12 to 1.0E12

Flange length LF before the flange coordinate system (FCS)
in the negative z direction of the KCS

<TO>.Kinematics.Parameter[5]

-1.0E12 to 1.0E12

With zero position of the axes A1 and A2:
Distance L2 of the FCS to the KZP in z direction of the KCS

Roller picker 3D
You define the 3D roller picker kinematics systems using the following tags of the technology
object:
Tags
<TO>.Kinematics.TypeOfKinematics

<TO>.Kinematics.Parameter[1]

Values

Description

7

Roller picker 3D (vertical)

8

Roller picker 3D with orientation (vertical)

9

Roller picker 3D with orientation (horizontal)

-1.0E12 to 1.0E12

With zero position of the axes A1 and A2:
Distance L1 of the FCS to the KZP in x direction of the KCS

<TO>.Kinematics.Parameter[2]

0.001 to 1.0E12

Cam radius R1 for axis 1

<TO>.Kinematics.Parameter[3]

0.001 to 1.0E12

Cam radius R2 for axis 2

<TO>.Kinematics.Parameter[4]

-1.0E12 to 1.0E12

Flange length LF before the FCS in the negative z direction
of the KCS

<TO>.Kinematics.Parameter[5]

-1.0E12 to 1.0E12

Roller picker
vertical

Distance L2 of the zero position of the axis
A3 to the KZP in y direction of the KCS

Roller picker
horizontal

With zero position of the axes A1 and A2:

2098

Distance L2 of the FCS to the kinematics
zero point (KZP) in y direction of the KCS

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Tags

Values

Description

<TO>.Kinematics.Parameter[6]

-1.0E12 to 1.0E12

Roller picker
vertical

With zero position of the axes A1 and A2:

Roller picker
horizontal

Distance L3 of the zero position of the axis
A3 to the KZP in z direction of the KCS

Distance L3 of the FCS to the KZP in z di‐
rection of the KCS

SCARA
SCARA 2D with orientation
The kinematics "SCARA 2D with orientation" (swivel arm) supports three axes and three
degrees of freedom. The axes are configured as serial kinematics.
The following graphic shows the principal configuration and the typical working area of the
kinematics:

The kinematics consists of the following axes:
● A rotary axis A1 with rotation around the z axis of the kinematics coordinate system (KCS)
● A linear axis A2 in z direction of the KCS
● A rotational axis A4 (orientation axis) with rotation around z in the KCS
The kinematics consists of a base and an articulated arm for horizontal alignment, which are
connected by revolute joints (axis A1). A linear stroke axis (axis A2) is fastened to the end of the
articulated arm for the vertical alignment. The tool is fastened to the end of the linear axis. The
orientation axis A4 enables a rotation of the tool.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2099

Control de movimiento
6.1 Using S7-1500 Motion Control

Coordinate systems and zero position
The graphic below shows the following in the side view (xz plane):
● The position of the axes and the coordinate systems KCS and FCS
● The zero position of the kinematics
● The positive/negative deflection of the kinematics is indicated (dashed)

/

$

$

/)
$

\)&6

[ )&6

])&6

/

]

].&6

\.&6

[ .&6

Zero position of the kinematics
L1

Distance of the axis A1 to the KZP in z direction of the KCS

L2

Distance of the axis A1 to the FCS in x direction of the KCS

LF

Distance of the FCS to the axis A1 in z direction of the FCS

Deflection of the kinematics
z1

Deflection of the axis A2 in the positive direction

Legend for representation of the kinematics (Página 2073)

The graphic below shows the following in the top view (xy plane):
● The position of the axes and the coordinate systems KCS and FCS
● The zero position of the kinematics
● The positive/negative deflection of the kinematics is indicated (dashed)

2100

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
])&6
\.&6

[ )&6
\)&6

˞ r

$
].&6

[ .&6

])&6

$$
[ )&6

˞ r
\)&6

])&6
\)&6

[ )&6

Zero position of the kinematics
Deflection of the kinematics
α1

Deflection of the axis A1 in positive direction when α1 = 30.0°
Deflection of the axis A1 in negative direction when α1 = -60.0°

Legend for representation of the kinematics (Página 2073)

The KCS with the kinematics zero point (KZP) is located at the base of the kinematics. The
flange coordinate system (FCS) is located at the end of the articulated arm.
The following table shows the zero position of the axes:
Axis

Zero position

A1

The articulated arm points in x direction of the KCS.

A2

The axis A2 is at the position 0.0 of the interconnected technology object.

A4

At zero position of axes A1, the x axis of the FCS points in the direction of the
x axis of the KCS.

Compensation of mechanical axis couplings
You can configure a mechanical axis coupling of axis A4 to axis A2 for the kinematics. The
kinematics transformation compensates for the configured mechanical axis coupling. The axis
coupling between axis A4 and axis A2 is implemented as a leadscrew pitch. With a coupling
factor of 1.0, 360.0° on axis A4 corresponds to a distance of -1.0 mm on axis A2.

Transformation area
The kinematics transformation covers the following traversing range (Página 2155) of the axes:
● Axis A1: -180.0° ≤ α1 < 180.0°
● Axis A2: No limiting
● Axis A4: No limiting
An angle greater than 360° can be defined for the orientation. But coordinate A of the tool
center point (TCP) is mapped in the range -180° to +180°.
Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2101

Control de movimiento
6.1 Using S7-1500 Motion Control
You can process these kinematics only with the Motion Control instructions
MC_MoveDirectAbsolute and MC_MoveDirectRelative or single-axis jobs.

SCARA 3D with orientation
The kinematics "SCARA (Selective Compliance Assembly Robot Arm) 3D with orientation"
supports four axes and four degrees of freedom. The axes are configured as serial kinematics.
The following graphic shows the principal configuration and the typical working area of the
kinematics:

The kinematics consists of the following axes:
● A rotary axis A1 with rotation around the z axis of the kinematics coordinate system (KCS)
● A rotary axis A2 at distance L2 to A1 with rotation around z of the KCS
● A linear axis A3 at distance L3 to A2 with motion in z direction of the KCS
● A rotational axis A4 (orientation axis) with rotation around z in the KCS
The kinematics consists of a base and two levers for horizontal alignment, which are connected
by revolute joints (axis A1 and A2). A linear axis (axis A3) is fastened to the end of the
articulated arm for the vertical alignment. The tool is fastened to the end of the linear axis. The
orientation axis A4 enables the rotary motion of the tool.

Coordinate systems and zero position
The graphic below shows the following in the side view (xz plane):
● The position of the axes and the coordinate systems KCS and FCS
● The zero position of the kinematics

2102

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
/

$

/

$

$
/)

/

$
\)&6

].&6

]

[ )&6

])&6
\.&6

[ .&6

Zero position of the kinematics
L1

Distance of the axis A1 to the KZP in z direction of the KCS

L2

Distance of the axis A2 to the axis A1 in x direction of the KCS

L3

Distance of the axis A3 to the axis A2 in x direction of the KCS

LF

Distance of the FCS to the axis A2 in z direction of the FCS

Deflection of the kinematics
z1

Deflection of the axis A3 in the positive direction

Legend for representation of the kinematics (Página 2073)

The graphic below shows the following in the top view (xy plane):
● The position of the axes and the coordinate systems KCS and FCS
● The zero position of the kinematics
● The positive/negative deflection of the kinematics is indicated (dashed)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2103

Control de movimiento
6.1 Using S7-1500 Motion Control
[ )&6
])&6

\)&6

˞ r

\.&6

˞ r

$
].&6

$

$$
])&6

[ .&6
˞ ದr

[ )&6

\)&6

˞ ದr

\)&6
])&6
[ )&6

Zero position of the kinematics
Deflection of the kinematics in the positive direction when α1 = 30.0° with positive joint position
when α2 = 75.0°
Deflection of the kinematics in the negative direction when α1 = -60.0° with negative joint position
when α2 = -45.0°
α1

Deflection of the axis A1 in positive direction when α1 = 30.0°
Deflection of the axis A1 in negative direction when α1 = -60.0°

α2

The deflection of the axis A2 in the positive direction when α2 = 75.0° produces a positive
joint position.
The deflection of the axis A2 in negative direction when α2 = -45.0° produces a negative
joint position.

Legend for representation of the kinematics (Página 2073)

The KCS with the kinematics zero point (KZP) is located at the base of the kinematics. The
flange coordinate system (FCS) is located at the end of the axis A3.

2104

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The following table shows the zero position of the axes:
Axis

Zero position

A1 and A2

The kinematics is elongated in the xKCS direction.

A3

The FCS is located at distance L1-LF from the KCS in z direction.

A4

At the zero position of axis A1 and A2, the x axis of the FCS points in the
direction of the x axis of the KCS.

Compensation of mechanical axis couplings
You can configure the following mechanical coupled axes for the kinematics:
● Mechanical coupling of axis A1 to axis A2
● Mechanical coupling of axis A4 to axis A3
The kinematics transformation compensates for the configured mechanical axis couplings.
With a coupling factor > 0.0, the kinematics transformation assumes that a positive motion of
the axis A1 leads to a negative motion on the axis A2. The axis coupling between axis A4 and
axis A3 is implemented as a leadscrew pitch. With a coupling factor of 1.0, 360.0° on axis A4
corresponds to a distance of -1.0 mm on axis A3.

Transformation area
The kinematics transformation covers the following traversing range (Página 2155) of the axes:
● Axis A1: -180.0° ≤ α1 ≤ 180.0°
● Axis A2: -180.0° ≤ α2 ≤ 180.0°
● Axis A3: No limiting
● Axis A4: No limiting
An angle greater than 360° can be defined for the orientation. But coordinate A of the tool
center point (TCP) is mapped in the range -180° to +180°.
Nota
Singular positions
The kinematics have singular positions (Página 2159).
A singular position occurs when the zero point of the flange coordinate system (FCS) is located
on the z-axis of the kinematics coordinate system (KCS). Inverse transformation is not possible
in this area. This position may result, e.g. in the event of suspended installation if the lengths L2
and L3 are the same size.
The graphic below shows examples of a movement in the direction of the singular joint position:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2105

Control de movimiento
6.1 Using S7-1500 Motion Control

\.&6

$

[ .&6

].&6

$

\)&6
[ )&6

])&6
\)&6
])&6

$$

[ )&6

Permissible joint position
Invalid joint position for transformation with L2 = L3

Tags: SCARA
SCARA 2D
You define the SCARA 2D kinematics using the following tags of the technology object:
Tags

Values

<TO>.Kinematics.TypeOfKinematics

20

SCARA 2D with orientation

<TO>.Kinematics.Parameter[1]

-1.0E12 to 1.0E12

Distance of the axis A1 from the kinematics zero point in z
direction of the kinematics coordinate system (KCS)

<TO>.Kinematics.Parameter[2]

-1.0E12 to 1.0E12

Distance L2 of the axis A2 from the axis A4 in x direction of
the KCS

<TO>.Kinematics.Parameter[3]

0.001 to 1.0E

Distance of the flange coordinate system from the axis A2 in
the negative z direction of the KCS

<TO>.Kinematics.Parameter[4]

-

Mechanical axis coupling of axis A4 to A2 present/not pre‐
sent

0

Not present

1

Present

-1.0E12 to 1.0E12

Mechanical axis coupling factor of axis A4 to axis A2

<TO>.Kinematics.Parameter[5]

2106

Description

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

SCARA 3D
You define the SCARA 3D kinematics using the following tags of the technology object:
Tags

Values

Description

<TO>.Kinematics.TypeOfKinematics

10

SCARA 3D with orientation

<TO>.Kinematics.Parameter[1]

-1.0E12 to 1.0E12

Distance of the axis A1 from the kinematics zero point in z
direction of the kinematics coordinate system (KCS)

<TO>.Kinematics.Parameter[2]

0.001 to 1.0E12

Distance L2 of the axis A2 from the axis A1 in x direction of
the KCS

<TO>.Kinematics.Parameter[3]

-

Mechanical axis coupling of axis A1 to axis A2 present/not
present

0

Not present

1

Present

<TO>.Kinematics.Parameter[4]

-1.0E12 to 1.0E12

Mechanical axis coupling factor of axis A1 to axis A2

<TO>.Kinematics.Parameter[5]

0.001 to 1.0E12

Distance L3 of the axis A3 from the axis A2 in x direction of
the KCS

<TO>.Kinematics.Parameter[6]

-

Mechanical axis coupling of axis A4 to axis A3 present/not
present

0

Not present

1

Present

<TO>.Kinematics.Parameter[7]

-1.0E12 to 1.0E12

Mechanical axis coupling factor of axis A4 to axis A3

<TO>.Kinematics.Parameter[8]

-1.0E12 to 1.0E12

Distance of the flange coordinate system from the axis A2 in
the negative z direction of the KCS

Articulated arm
Articulated arm 2D
The kinematics "Articulated arm 2D" supports two axes and two degrees of freedom. The axes
are configured as serial kinematics with forced coupling of the flange system.
The following graphic shows the principal configuration and the typical working area of the
kinematics:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2107

Control de movimiento
6.1 Using S7-1500 Motion Control
The kinematics consists of the following axes:
● A rotary axis A1 with the distances L1 in z direction of the KCS and L2 in x direction of the
KCS to the kinematics zero point
● A rotary axis A2 at distance L3 to axis A1
The kinematics consists of a base and articulated arms, which are connected by revolute joints
(axes A1, A2). Axes A1 and A2 move the articulated arm in the xz plane. Through a forced
coupling between the axes and the flange system, the z axis of the FCS always points in the
negative z direction of the KCS.

Coordinate systems and zero position
The graphic below shows the following in the side view:
● The position of the axes and of the forced coupler point
● The position of coordinate systems KCS and FCS
● The zero position of the kinematics
● The positive/negative deflection of the kinematics is indicated (dashed)

2108

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

˞ ದr

[ )&6
])&6

˞ r
/

/

/


$

$
/)

˞ ದr
[ )&6
])&6

/

˞ r

].&6

[ )&6

[ .&6
])&6

①

Forced coupler point
Zero position of the kinematics
L1

Distance of the axis A1 to the kinematics zero point (KZP) in z direction of the KCS

L2

Distance of the axis A1 to the KZP in x direction of the KCS

L3

Distance of the axis A2 to the axis A1 in x direction of the KCS

L4

Distance of the forced coupler point to the axis A2 in x direction of the KCS

LF

Distance of the FCS to the forced coupler point in z direction of the FCS

Deflection of the kinematics
α1

Positive deflection of the axis A1 when α1 = 45.0°
Negative deflection of the axis A1 when α1 = -60.0°

α2

The deflection of the axis A2 in the positive direction when α2 = 45.0° produces a positive
joint position.
The deflection of the axis A2 in negative direction when α2 = -15.0° produces a negative
joint position.

Legend for representation of the kinematics (Página 2073)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2109

Control de movimiento
6.1 Using S7-1500 Motion Control
The kinematics coordinate system (KCS) with the kinematics zero point (KZP) is located at the
base of the kinematics. You define the position of the axis A1 relative to the KZP using lengths
L1 and L2. The axis A2 is located at distance L3 in x direction of the KCS from the axis A1.
The flange coordinate system (FCS) is located at the following distances from the axis A2 and
the forced coupler point:
● Distance L4 to the axis A2 in x direction of the KCS
● Distance LF to the forced coupler point in the negative z direction of the KCS
The axis A2 and the flange system are force-coupled. With the force coupling, the z axis of the
FCS always points in negative z direction of the KCS. The forced coupler point is located at
distance L4 in x direction of the KCS from the axis A2.
The following table shows the zero position of the axes:
Axis

Zero position

A1

Length L3 points in x direction of the KCS.

A2

At zero position of the axis A1, the length L4 points in x direction of the KCS.

Compensation of mechanical axis couplings
For the kinematics, you can configure a mechanical axis coupling of axis A1 to axis A2. The
kinematics transformation compensates for the configured mechanical axis coupling. With a
coupling factor > 0.0, the kinematics transformation assumes that a positive motion of the axis
A1 leads to a negative motion on the axis A2.

Transformation area
The kinematics transformation covers the following traversing range (Página 2155) of the axes:
● Axis A1: -180.0° ≤ α1 < 180.0°
● Axis A2: -180.0° ≤ α2 < 180.0°

Articulated arm 2D with orientation
The kinematics "Articulated arm 2D with orientation" supports three axes and three degrees of
freedom. The axes are configured as serial kinematics with forced coupling of the flange
system.
The following graphic shows the principal configuration and the typical working area of the
kinematics:

2110

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

The kinematics consists of the following axes:
● A rotary axis A1 with the distances L1 in z direction of the KCS and L2 in x direction of the
KCS to the kinematics zero point
● A rotary axis A2 at distance L3 to axis A1
● A rotary axis A4 (orientation axis) at distance L4 in x direction of the KCS from the axis A2
The kinematics consists of a base and articulated arms, which are connected by revolute joints
(axes A1, A2). Axes A1 and A2 move the articulated arm in the xz plane. Through a forced
coupling between the axes and the flange system, the z axis of the FCS always points in the
negative z direction of the KCS. The orientation axis A4 enables rotation of the tool.

Coordinate systems and zero position
The graphic below shows the following in the side view:
● The position of the axes and of the forced coupler point
● The position of coordinate systems KCS and FCS
● The zero position of the kinematics
● The positive/negative deflection of the kinematics is indicated (dashed)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2111

Control de movimiento
6.1 Using S7-1500 Motion Control

˞ ದr

[ )&6
])&6

˞ r
/

/

/


$

$
/)

˞ ದr

$
[ )&6
])&6

/

˞ r

].&6

[ )&6

[ .&6
])&6

①

Forced coupler point
Zero position of the kinematics
L1

Distance of the axis A1 to the kinematics zero point (KZP) in z direction of the KCS

L2

Distance of the axis A1 to the KZP in x direction of the KCS

L3

Distance of the axis A2 to the axis A1 in x direction of the KCS

L4

Distance of the forced coupler point to the axis A2 in x direction of the KCS

LF

Distance of the FCS to the forced coupler point in z direction of the FCS

Deflection of the kinematics
α1

Positive deflection of the axis A1 when α1 = 45.0°
Negative deflection of the axis A1 when α1 = -60.0°

α2

The deflection of the axis A2 in the positive direction when α2 = 45.0° produces a positive
joint position.
The deflection of the axis A2 in negative direction when α2 = -15.0° produces a negative
joint position.

Legend for representation of the kinematics (Página 2073)

2112

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The kinematics coordinate system (KCS) with the kinematics zero point (KZP) is located at the
base of the kinematics. You define the position of the axis A1 relative to the KZP using lengths
L1 and L2. The axis A2 is located at distance L3 in x direction of the KCS from the axis A1.
The flange coordinate system (FCS) is located at the following distances from the axis A2 and
the forced coupler point:
● Distance L4 to the axis A2 in x direction of the KCS
● Distance LF to the forced coupler point in the negative z direction of the KCS
The axis A2 and the flange system are force-coupled. With the force coupling, the z axis of the
FCS always points in negative z direction of the KCS. The forced coupler point is located at
distance L4 in x direction of the KCS from the axis A2.
The following table shows the zero position of the axes:
Axis

Zero position

A1

Length L3 points in x direction of the KCS.

A2

At zero position of the axis A1, the length L4 points in x direction of the KCS.

A4

At the zero position of axis A1 and A2, the x axis of the FCS points in the
direction of the x axis of the KCS.

Compensation of mechanical axis couplings
For the kinematics, you can configure a mechanical axis coupling of axis A1 to axis A2. The
kinematics transformation compensates for the configured mechanical axis coupling. With a
coupling factor > 0.0, the kinematics transformation assumes that a positive motion of the axis
A1 leads to a negative motion on the axis A2.

Transformation area
The kinematics transformation covers the following traversing range (Página 2155) of the axes:
● Axis A1: -180.0° ≤ α1 < 180.0°
● Axis A2: -180.0° ≤ α2 < 180.0°
● Axis A4: No limiting
An angle greater than 360° can be defined for the orientation. But coordinate A of the tool
center point (TCP) is mapped in the range -180° to +180°.

Articulated arm 3D
The kinematics "Articulated arm 3D" supports three axes and three degrees of freedom. The
axes are configured as serial kinematics with forced coupling of the flange system.
The following graphic shows the principal configuration and the typical working area of the
kinematics:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2113

Control de movimiento
6.1 Using S7-1500 Motion Control

The kinematics consists of the following axes:
● A rotary axis A1 with rotation around the z axis of the kinematics coordinate system (KCS)
● A rotary axis A2 with the distances L1 in z direction of the KCS and L2 in x direction of the
KCS to the kinematics zero point
● A rotary axis A3 at distance L3 to axis A2
The kinematics consists of a base and articulated arms, which are connected by revolute joints
(axes A1, A2 and A3). Axis A1 rotates the kinematics horizontally around the base. Axes A2 and
A3 move the articulated arm. The kinematics enables an approximately spherical working area.
Through a forced coupling between the axes and the flange system, the z axis of the FCS
always points in the negative z direction of the KCS.

Coordinate systems and zero position
The graphic below shows the following in the side view (xz plane):
● The position of the axes and of the forced coupler point
● The position of coordinate systems KCS and FCS
● The zero position of the axes
● The positive/negative deflection of the axes A2 and A3 is indicated (dashed)

2114

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

˞ ದr

[ )&6

\)&6
])&6

˞ r
/

/

/


$

$

˞ ದr

/)
[ )&6

\)&6
$

])&6

/

˞ r

].&6

\.&6

[ .&6

\)&6

[ )&6
])&6

①

Forced coupler point
Zero position of the kinematics
L1

Distance of the axis A2 to the kinematics zero point (KZP) in z direction of the KCS

L2

Distance of the axis A2 to the KZP in x direction of the KCS

L3

Distance of the axis A3 to the axis A2 in x direction of the KCS

L4

Distance of the forced coupler point to the axis A3 in x direction of the KCS

LF

Distance of the FCS to the forced coupler point in z direction of the FCS

Deflection of the kinematics
α2

Positive deflection of the axis A2 when α2 = 45.0°
Negative deflection of the axis A2 when α2 = -60.0°

α3

The deflection of the A3 in the positive direction when α3 = 45.0° produces a positive joint
position.
The deflection of the A3 in negative direction when α3 = -15.0° produces a negative joint
position.

Legend for representation of the kinematics (Página 2073)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2115

Control de movimiento
6.1 Using S7-1500 Motion Control
The graphic below shows the following in the top view (xy plane):
● The position of the axes and the coordinate systems KCS and FCS
● The zero position of the kinematics
● The positive/negative deflection of the kinematics is indicated (dashed)
[ )&6

])&6

\)&6

\.&6

˞ r

$
].&6

$

[ .&6

])&6

$

\)&6

˞ ದr

\)&6

[ )&6

])&6

[ )&6

Zero position of the kinematics
Deflection of the kinematics
α1

Positive deflection of the axis A1 when α1 = 30.0°
Negative deflection of the axis A1 when α1 = -60.0°

Legend for representation of the kinematics (Página 2073)

The KCS with the kinematics zero point (KZP) is located at the base of the kinematics. You
define the position of the axis A2 relative to the KZP using lengths L1 and L2. The axis A3 is
located at distance L3 in x direction of the KCS from the axis A2.

2116

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The flange coordinate system (FCS) is located at the following distances from the axis A3 and
the forced coupler point:
● Distance L4 to the axis A3 in x direction of the KCS
● Distance LF to the forced coupler point in the negative z direction of the KCS
The axis A3 and the flange system are force-coupled. With the force coupling, the z axis of the
FCS always points in negative z direction of the KCS. The forced coupler point is located at
distance L4 in x direction of the KCS from the axis A3.
The following table shows the zero position of the axes:
Axis

Zero position

A1

The articulated arms of the kinematics point in the x direction of the KCS.

A2

At zero position of the axis A1, the length L3 points in x direction of the KCS.

A3

At zero position of the axes A1 and A2, the length L4 points in x direction of
the KCS.

Compensation of mechanical axis couplings
You can configure a mechanical axis coupling of axis A2 to axis A3 for the kinematics. The
kinematics transformation compensates for the configured mechanical axis coupling. With a
coupling factor > 0.0, the kinematics transformation assumes that a positive motion of the axis
A2 leads to a negative motion on the axis A3.

Transformation area
The kinematics transformation covers the following traversing range (Página 2155) of the axes:
● Axis A1: -180.0° ≤ α1 < 180.0°
● Axis A2: -180.0° ≤ α2 < 180.0°
● Axis A3: -180.0° ≤ α3 < 180.0°
Nota
Singular positions
The kinematics have singular positions (Página 2159).
A singular position occurs when the zero point of the flange coordinate system (FCS) is located
on the z-axis of the kinematics coordinate system (KCS). Inverse transformation is not possible
in this area.
The graphic below shows examples of permissible and impermissible joint positions for the
transformation:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2117

Control de movimiento
6.1 Using S7-1500 Motion Control

\)&6

[ )&6
])&6

$

$
$

[ )&6

\)&6
])&6

[ )&6

\)&6

].&6

])&6
\.&6

[ .&6

Permissible joint position
Invalid joint position for the transformation

Articulated arm 3D with orientation
The kinematics "Articulated arm 3D with orientation" supports four axes and four degrees of
freedom. The axes are configured as serial kinematics with forced coupling of the flange
system.
The following graphic shows the principal configuration and the typical working area of the
kinematics:

2118

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

The kinematics consists of the following axes:
● A rotary axis A1 with rotation around the z axis of the kinematics coordinate system (KCS)
● A rotary axis A2 with the distances L1 in z direction of the KCS and L2 in x direction of the
KCS to the kinematics zero point
● A rotary axis A3 at distance L3 to axis A2
● A rotary axis A4 (orientation axis) at distance L4 in x direction of the KCS from the axis A3
The kinematics consists of a base and articulated arms, which are connected by revolute joints
(axes A1, A2 and A3). Axis A1 rotates the kinematics horizontally around the base. Axes A2 and
A3 move the articulated arm. The kinematics enables an approximately spherical working area.
Through a forced coupling between the axes and the flange system, the z axis of the FCS
always points in the negative z direction of the KCS. The orientation axis A4 enables rotation
of the tool.

Coordinate systems and zero position
The graphic below shows the following in the side view (xz plane):
● The position of the axes and of the forced coupler point
● The position of coordinate systems KCS and FCS
● The zero position of the kinematics
● The positive/negative deflection of the kinematics is indicated (dashed)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2119

Control de movimiento
6.1 Using S7-1500 Motion Control

˞ ದr

[ )&6

\)&6
])&6

˞ r
/

/

/


$

$

˞ ದr

/)
[ )&6

\)&6
$

])&6

/

˞ r

].&6

\.&6

[ .&6

\)&6

[ )&6
])&6

①

Forced coupler point
Zero position of the kinematics
L1

Distance of the axis A2 to the kinematics zero point (KZP) in z direction of the KCS

L2

Distance of the axis A2 to the KZP in x direction of the KCS

L3

Distance of the axis A3 to the axis A2 in x direction of the KCS

L4

Distance of the forced coupler point to the axis A3 in x direction of the KCS

LF

Distance of the FCS to the forced coupler point in z direction of the FCS

Deflection of the kinematics
α2

Positive deflection of the axis A2 when α2 = 45.0°
Negative deflection of the axis A2 when α2 = -60.0°

α3

The deflection of the A3 in the positive direction when α3 = 45.0° produces a positive joint
position.
The deflection of the A3 in negative direction when α3 = -15.0° produces a negative joint
position.

Legend for representation of the kinematics (Página 2073)

2120

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The graphic below shows the following in the top view (xy plane):
● The position of the axes
● The position of coordinate systems KCS and FCS
● The zero position of the kinematics
● The positive/negative deflection of the kinematics is indicated (dashed)
[ )&6

])&6

\)&6

\.&6

˞ r

$

$
].&6

$

[ .&6

$

[ )&6

\)&6

˞ ದr

\)&6

])&6

])&6

[ )&6

Zero position of the kinematics
Deflection of the kinematics
α1

Positive deflection of the axis A1 when α1 = 30.0°
Negative deflection of the axis A1 when α1 = -60.0°

Legend for representation of the kinematics (Página 2073)

The KCS with the kinematics zero point (KZP) is located at the base of the kinematics. You
define the position of the axis A2 relative to the KZP using lengths L1 and L2. The axis A3 is
located at distance L3 in x direction of the KCS from the axis A2.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2121

Control de movimiento
6.1 Using S7-1500 Motion Control
The flange coordinate system (FCS) is located at the following distances from the axis A3 and
the forced coupler point:
● Distance L4 to the axis A3 in x direction of the KCS
● Distance LF to the forced coupler point in the negative z direction of the KCS
The axis A3 and the flange system are force-coupled. With the force coupling, the z axis of the
FCS always points in negative z direction of the KCS. The forced coupler point is located at
distance L4 in x direction of the KCS from the axis A3.
The following table shows the zero position of the axes:
Axis

Zero position

A1

The articulated arms of the kinematics point in the x direction of the KCS.

A2

At zero position of the axis A1, the length L3 points in x direction of the KCS.

A3

At zero position of the axes A1 and A2, the length L4 points in x direction of
the KCS.

A4

At zero position of the axes A1, A2 and A3, the x axis of the FCS points in the
direction of the x axis of the KCS.

Compensation of mechanical axis couplings
You can configure a mechanical axis coupling of axis A2 to axis A3 for the kinematics. The
kinematics transformation compensates for the configured mechanical axis coupling. With a
coupling factor > 0.0, the kinematics transformation assumes that a positive motion of the axis
A2 leads to a negative motion on the axis A3.

Transformation area
The kinematics transformation covers the following traversing range (Página 2155) of the axes:
● Axis A1: -180.0° ≤ α1 < 180.0°
● Axis A2: -180.0° ≤ α2 < 180.0°
● Axis A3: -180.0° ≤ α3 < 180.0°
● Axis A4: No limiting
An angle greater than 360° can be defined for the orientation. But coordinate A of the tool
center point (TCP) is mapped in the range -180° to +180°.
Nota
Singular positions
The kinematics have singular positions (Página 2159).
A singular position occurs when the zero point of the flange coordinate system (FCS) is located
on the z-axis of the kinematics coordinate system (KCS). Inverse transformation is not possible
in this area.
The graphic below shows examples of permissible and impermissible joint positions for the
transformation:

2122

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

\)&6

[ )&6
])&6

$

$
$

[ )&6

\)&6
])&6

[ )&6

\)&6

].&6

])&6
\.&6

[ .&6

Permissible joint position
Invalid joint position for the transformation

Tags: Articulated arm
Articulated arm 2D
You define the 2D articulated arm kinematics systems using the following tags of the
technology object:
Tags
<TO>.Kinematics.TypeOfKinematics
<TO>.Kinematics.Parameter[1]

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Values

Description

11

Articulated arm 2D

12

Articulated arm 2D with orientation

-1.0E12 to 1.0E12

Distance L1 of the axis A1 to the kinematics zero point in z
direction of the kinematics coordinate system (KCS)

2123

Control de movimiento
6.1 Using S7-1500 Motion Control
Tags

Values

Description

<TO>.Kinematics.Parameter[2]

-1.0E12 to 1.0E12

Distance L2 of the axis A1 to the kinematics zero point in x
direction of the KCS

<TO>.Kinematics.Parameter[3]

0.001 to 1.0E12

Arm length L3 between the axes A1 and A2

<TO>.Kinematics.Parameter[4]

-

Mechanical axis coupling of axis A1 to axis A2 present/not
present

0

Not present

1

Present

<TO>.Kinematics.Parameter[5]

-1.0E12 to 1.0E12

Mechanical axis coupling factor of axis A1 to axis A2

<TO>.Kinematics.Parameter[6]

0.001 to 1.0E12

Side length L4 between A2 and positive coupling point

<TO>.Kinematics.Parameter[7]

-1.0E12 to 1.0E12

Distance LF of the flange coordinate system (FCS) from the
forced coupler point in the negative z direction of the KCS

Articulated arm 3D
You define the 3D articulated arm kinematics systems using the following tags of the
technology object:
Tags

Values

Description

<TO>.Kinematics.TypeOfKinematics

13

Articulated arm 3D

14

Articulated arm 3D with orientation

<TO>.Kinematics.Parameter[1]

-1.0E12 to 1.0E12

Distance L1 of the axis A2 to the kinematics zero point in z
direction of the KCS

<TO>.Kinematics.Parameter[2]

0.0 to 1.0E12

Distance L2 of the axis A2 to the kinematics zero point in x
direction of the KCS

<TO>.Kinematics.Parameter[3]

0.001 to 1.0E12

Arm length L3 between the axes A2 and A3

<TO>.Kinematics.Parameter[4]

-

Mechanical axis coupling of axis A2 to A3 present/not pre‐
sent

0

Not present

1

Present

<TO>.Kinematics.Parameter[5]

-1.0E12 to 1.0E12

Mechanical axis coupling factor from axis A2 to axis A3

<TO>.Kinematics.Parameter[6]

0.001 to 1.0E12

Arm length L4 between the axis A3 and positive coupler point

<TO>.Kinematics.Parameter[7]

-1.0E12 to 1.0E12

Distance LF of the FCS from the forced coupler point in the
negative z direction of the KCS

Delta picker
Delta picker 2D
The kinematics "Delta picker 2D" supports two axes and two degrees of freedom The axes are
configured as parallel kinematics.
The following graphic shows the principal configuration and the typical working area of the
kinematics:

2124

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

The kinematics consists of two rotary axes A1 and A2.
The kinematics is modeled suspended and consists of an upper connecting plate, two upper
arms and a lower connecting plate. The axes for moving the arms (axes A1, A2) are fastened
to the upper connecting plate. The upper arms and the connecting rods connect the upper and
lower connecting plates. The tool is suspended from the lower connecting plate. The
parallelogram structures of the connecting rods keep the lower connecting plate parallel to the
xy plane of the KCS.

Coordinate systems and zero position
The graphic below shows the following in the front view:
● The position of the axes and the coordinate systems KCS and FCS
● The zero position of the kinematics
● The deflection of the kinematics is indicated (dashed)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2125

Control de movimiento
6.1 Using S7-1500 Motion Control

].&6

'

$

$

[ .&6
˞ r
/
˞ ದr

/

/)
[ )&6
'
])&6

Zero position of the kinematics
D1

Distance of the axes from the center of the upper connecting plate (radius of the upper
connecting plate)

D2

Distance of the hinge points of the connecting rods to the middle of the lower connecting
plate (radius of the lower connecting plate)

L1

Length of the upper arms

L2

Length of the connecting rods

D1, D2, L1 and L2 are identical for the two arms of the kinematics.
LF

Flange length before the FCS in the z direction of the KCS

Deflection of the kinematics
The motion of the axes in the positive direction is the outward rotation of the upper arms.
α1

Deflection of the axis A1 in the negative direction when α1 = -45.0°

α2

Deflection of the axis A2 in the positive direction when α2 = 88.0°

Legend for representation of the kinematics (Página 2073)

2126

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The kinematics coordinate system (KCS) with the kinematics zero point (KZP) is located at the
center point of the upper connecting plate. The axes A1 and A2 are at distance D1 from the
common center point (kinematics zero point).
The flange coordinate system (FCS) is located on the bottom of the lower connecting plate with
equal distance D2 to the hinge points of each arm. You shift the FCS in the negative z direction
of the KCS using length LF.
In the zero position of the axes A1 and A2, the upper arms point in the negative z direction of
the KCS.

Transformation area
Only the outwardly bent joint position (Página 2136) is permitted for the arms of the kinematics.
You cannot traverse the axes beyond the extended position of the arms.

Delta picker 2D with orientation
The kinematics "Delta picker 2D with orientation" supports three axes and three degrees of
freedom. The axes are configured as parallel kinematics.
The following graphic shows the principal configuration and the typical working area of the
kinematics:

The kinematics consists of the following axes:
● Two rotary axes A1, A2
● One rotary axis A4 (orientation axis)
The kinematics is modeled suspended and consists of an upper connecting plate, two upper
arms and a lower connecting plate. The axes for moving the arms (axes A1, A2) are fastened
to the upper connecting plate. The upper arms and the connecting rods connect the upper and
lower connecting plates. The tool is suspended from the lower connecting plate. The
parallelogram structures of the connecting rods keep the lower connecting plate parallel to the
xy plane of the KCS. The orientation axis A4 enables rotation of the tool.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2127

Control de movimiento
6.1 Using S7-1500 Motion Control

Coordinate systems and zero position
The graphic below shows the following in the front view:
● The position of the axes and the coordinate systems KCS and FCS
● The zero positions of the axes A1 and A4
● The deflection of the kinematics is indicated (dashed)

2128

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

].&6

'

$

$

[ .&6
˞ r
/
˞ ದr

/

/)

$
[ )&6
'
])&6

Zero position of the kinematics
D1

Distance of the axes from the center of the upper connecting plate (radius of the upper
connecting plate)

D2

Distance of the hinge points of the connecting rods to the middle of the lower connecting
plate (radius of the lower connecting plate)

L1

Length of the upper arms

L2

Length of the connecting rods

D1, D2, L1 and L2 are identical for the two arms of the kinematics.
LF

Flange length before the FCS in the z direction of the KCS

Deflection of the kinematics
The motion of the axes in the positive direction is the outward rotation of the upper arms.
α1

Deflection of the axis A1 in the negative direction when α1 = -45.0°

α2

Deflection of the axis A2 in the positive direction when α2 = 88.0°

Legend for representation of the kinematics (Página 2073)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2129

Control de movimiento
6.1 Using S7-1500 Motion Control
The kinematics coordinate system (KCS) with the kinematics zero point (KZP) is located at the
center point of the upper connecting plate. The axes A1 and A2 are at distance D1 from the
common center point (kinematics zero point).
The flange coordinate system (FCS) is located on the bottom of the lower connecting plate with
equal distance D2 to the hinge points of each arm. You shift the FCS in the negative z direction
of the KCS using length LF.
In the zero position of the axes A1 and A2, the upper arms point in the negative z direction of
the KCS. At the zero position of axis A4, the x axis of the FCS points in the direction of the x axis
of the KCS.

Transformation area
Only the outwardly bent joint position (Página 2136) is permitted for the arms of the kinematics.
You cannot traverse the axes beyond the extended position of the arms.

Delta picker 3D
The kinematics "Delta picker 3D" supports three axes and three degrees of freedom. The axes
are configured as parallel kinematics.
The following graphic shows the principal configuration and the typical working area of the
kinematics:

The kinematics consists of three rotary axes A1, A2 and A3.
The kinematics is modeled suspended and consists of an upper connecting plate, three upper
arms and a lower connecting plate. The axes for moving the arms (axes A1, A2 and A3) are
fastened to the upper connecting plate. The upper arms and the connecting rods connect the
upper and lower connecting plates. The tool is suspended from the lower connecting plate. The
parallelogram structures of the connecting rods keep the lower connecting plate parallel to the
xy plane of the KCS.

2130

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Coordinate systems and zero position
The graphic below shows the following in the top view (xy plane):
● The position of the kinematics coordinate system (KCS)
● The angles of the axes A1, A2 and A3 to one another
\.&6

$
$

˟
˟

[ .&6

].&6
'

$

β1

Angle between the axes A1 and A2

β2

Angle between the axes A2 and A3

Legend for representation of the kinematics (Página 2073)

The following graphic shows the top view of the position of the flange coordinate system (FCS)
in the xy plane of the lower connecting plate:

˟

˟

])&6

[ )&6
'

\)&6

The graphic below shows the following in the front view (xz plane):
● The position of the axis A1 and the coordinate systems KCS and FCS
● The zero position of the axis A1
● The positive/negative deflection of the axis A1 is indicated (dashed)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2131

Control de movimiento
6.1 Using S7-1500 Motion Control

].&6

'

\.&6

$

[ .&6

˞ r

/

˞ ದr

/

/)
\)&6

[ )&6
'

])&6

Zero position of the kinematics
D1

Distance of the axes from the center of the upper connecting plate (radius of the upper
connecting plate)

D2

Distance of the hinge points of the connecting rods to the middle of the lower connecting
plate (radius of the lower connecting plate)

L1

Length of the upper arms

L2

Length of the connecting rods

D1, D2, L1 and L2 are identical for the three arms of the kinematics.
LF

Flange length before the FCS in the z direction of the KCS

Deflection of the kinematics
The motion of the axes in the positive direction is the outward rotation of the upper arms.
α1

Deflection of the axis A1 in negative direction when α1 = -50.0°
Deflection of the axis A1 in positive direction when α1 = 90.0°

Legend for representation of the kinematics (Página 2073)

2132

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The KCS with the kinematics zero point (KZP) is located at the center point of the upper
connecting plate. The axes A1, A2 and A3 are at distance D1 from the common center point
(kinematics zero point).
The FCS is located in the center on the bottom of the lower connecting plate with equal distance
D2 to the hinge points of each arm. You shift the FCS in the negative z direction of the KCS
using length LF.
In the zero position of the axes A1, A2 and A3, the upper arms point in the negative z direction
of the KCS.

Transformation area
Only the outwardly bent joint position (Página 2136) is permitted for the arms of the kinematics.
You cannot traverse the axes beyond the extended position of the arms.

Delta picker 3D with orientation
The kinematics "Delta picker 3D with orientation" supports four axes and four degrees of
freedom. The axes are configured as parallel kinematics.
The following graphic shows the principal configuration and the typical working area of the
kinematics:

The kinematics consists of the following axes:
● Three rotary axes A1, A2 and A3
● One rotary axis A4 (orientation axis)
The kinematics is modeled suspended and consists of an upper connecting plate, three upper
arms and a lower connecting plate. The axes for moving the arms (axes A1, A2 and A3) are
fastened to the upper connecting plate. The upper arms and the connecting rods connect the
upper and lower connecting plates. The tool is attached to the lower connecting plate. The
parallelogram structures of the connecting rods keep the lower connecting plate parallel to the
xy plane of the KCS. The orientation axis A4 enables rotation of the tool.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2133

Control de movimiento
6.1 Using S7-1500 Motion Control

Coordinate systems and zero position
The graphic below shows the following in the top view (xy plane):
● The position of the kinematics coordinate system (KCS)
● The angles of the axes A1, A2 and A3 to one another
\.&6

$
$

˟
˟

[ .&6

].&6
'

$

β1

Angle between the axes A1 and A2

β2

Angle between the axes A2 and A3

Legend for representation of the kinematics (Página 2073)

The following graphic shows the top view of the position of the flange coordinate system (FCS)
in the xy plane of the lower connecting plate:

˟

˟

])&6

[ )&6
'

\)&6

The graphic below shows the following in the front view (xz plane):
● The position of the axis A1 and the coordinate systems KCS and FCS
● The zero positions of the axes A1 and A4
● The positive/negative deflection of the axis A1 is indicated (dashed)

2134

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

].&6

'

\.&6

$

[ .&6

˞ r

/

˞ ದr

/

/)

$
\)&6

[ )&6
'

])&6

Zero position of the kinematics
D1

Distance of the axes from the center of the upper connecting plate (radius of the upper
connecting plate)

D2

Distance of the hinge points of the connecting rods to the middle of the lower connecting
plate (radius of the lower connecting plate)

L1

Length of the upper arms

L2

Length of the connecting rods

D1, D2, L1 and L2 are identical for the three arms of the kinematics.
LF

Flange length before the FCS in the z direction of the KCS

Deflection of the kinematics
The motion of the axes in the positive direction is the outward rotation of the upper arms.
α1

Deflection of the axis A1 in negative direction when α1 = -50.0°
Deflection of the axis A1 in positive direction when α1 = 90.0°

Legend for representation of the kinematics (Página 2073)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2135

Control de movimiento
6.1 Using S7-1500 Motion Control
The KCS with the kinematics zero point (KZP) is located at the center point of the upper
connecting plate. The axes A1, A2 and A3 are at distance D1 from the common center point
(kinematics zero point).
The FCS is located in the center on the bottom of the lower connecting plate with equal distance
D2 to the hinge points of each arm. You shift the FCS in the negative z direction of the KCS
using length LF.
In the zero position of the axes A1, A2 and A3, the upper arms point in the negative z direction
of the KCS. At the zero position of axis A4, the x axis of the FCS points in the direction of the
x axis of the KCS.

Transformation area
Only the outwardly bent joint position (Página 2136) is permitted for the arms of the kinematics.
You cannot traverse the axes beyond the extended position of the arms.

Permissible joint position for delta picker
Only the outwardly bent joint position is permitted for the arms of the delta picker kinematics.
The graphic below shows examples of permissible and impermissible joint positions for the
transformation:

Permissible joint position
Invalid joint position for the transformation

2136

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags: Delta picker
Delta picker 2D
You define the 2D delta picker kinematics using the following tags of the technology object:
Tags
<TO>.Kinematics.TypeOfKinematics

Values

Description

15

Delta picker 2D

16

Delta picker 2D with orientation

<TO>.Kinematics.Parameter[1]

0.0 to 1.0E12

Distance D1 (radius of the upper connecting plate)

<TO>.Kinematics.Parameter[2]

0.001 to 1.0E12

Length L1 of the upper arms

<TO>.Kinematics.Parameter[3]

0.001 to 1.0E12

Length L2 of connecting rods

<TO>.Kinematics.Parameter[4]

0.0 to 1.0E12

Distance D2 (radius of the lower connecting plate)

<TO>.Kinematics.Parameter[5]

-1.0E12 to 1.0E12

Distance LF of the FCS from the lower connecting plate in
the negative z direction of the KCS

Delta picker 3D
You define the 3D delta picker kinematics using the following tags of the technology object:
Tags
<TO>.Kinematics.TypeOfKinematics

Values

Description

17

Delta picker 3D

18

Delta picker 3D with orientation

<TO>.Kinematics.Parameter[1]

0.0 to 1.0E12

Distance D1 (radius of the upper connecting plate)

<TO>.Kinematics.Parameter[2]

0.001 to 1.0E12

Length L1 of the upper arms

<TO>.Kinematics.Parameter[3]

0.001 to 1.0E12

Length L2 of connecting rods

<TO>.Kinematics.Parameter[4]

0.0 to 1.0E12

Distance D2 (radius of the lower connecting plate)

<TO>.Kinematics.Parameter[5]

90.001° to 179.998°

Angle β1 between the axes A1 and A2

<TO>.Kinematics.Parameter[6]

90.001° to 179.998°

Angle β2 between the axes A2 and A3

<TO>.Kinematics.Parameter[7]

-1.0E12 to 1.0E12

Distance LF of the FCS from the lower connecting plate in
the negative z direction of the KCS

Cylindrical robot
Cylindrical robot 3D
The kinematics "Cylindrical robot 3D" supports three axes and three degrees of freedom. The
axes are configured as serial kinematics.
The following graphic shows the principal configuration and the typical working area of the
kinematics:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2137

Control de movimiento
6.1 Using S7-1500 Motion Control

The kinematics consists of the following axes:
● A rotary axis A1 with rotation around the z axis of the kinematics coordinate system (KCS)
● A linear axis A2 in z direction of the KCS
● A linear axis A3 in x direction of the KCS
The kinematics consists of a base, a supporting column and a jib. Axis A1 rotates the supporting
column with jib around the base. Axis A2 moves the jib vertically. Axis A3 moves the flange
system horizontally on the jib. The kinematics enables a cylindrical working area.

Coordinate systems and zero position
The graphic below shows the following in the side view (xz plane):
● The position of the axes and the coordinate systems KCS and FCS
● The zero positions of the axes A1 and A2
● The deflection of the kinematics is indicated (dashed)

2138

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

$

]

$

\)&6

[ )&6

])&6
/)
\)&6
$

].&6

[ )&6

/

])&6

[ .&6

\.&6
[

[

Zero position of the axes A1 and A2
L1

At zero position of the axis A2:
Distance of the FCS to the kinematics zero point (KZP) and flange length LF in z direction
of the KCS

LF

Flange length before the FCS in the z direction of the KCS

x1

Positive deflection of the axis A3
At the zero position of axis A3, the z axis of the FCS is located on the z axis of the KCS.
For mechanical reasons, the kinematics shown cannot approach the zero position of the
axis A3.

Deflection of the kinematics
x2

Positive deflection of the axis A3

z1

Positive deflection of the axis A2

Legend for representation of the kinematics (Página 2073)

The graphic below shows the following in the top view (xy plane):
● The position of the axes and the coordinate systems KCS and FCS
● The zero position of the kinematics
● The positive/negative deflection of the kinematics is indicated (dashed)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2139

Control de movimiento
6.1 Using S7-1500 Motion Control

\.&6
])&6

/
˞ r

/

].&6

[ )&6
\)&6

[ .&6
])&6

$

[ )&6

\)&6
˞ ದr

])&6

\)&6
[ )&6

Zero position of the kinematics
L2

Distance of the axis A3 from the KZP in y direction of the KCS (negative value here)

Deflection of the kinematics
α1

Positive deflection of the axis A1 when α1 = 30°
Negative deflection of the axis A1 when α1 = -75°

Legend for representation of the kinematics (Página 2073)

The KCS with the kinematics zero point (KZP) is located at the base of the kinematics. You
define the distance of the zero position of axis A2 in z direction of the KCS from the KZP using
length L1. You define the distance of the axis A3 from the KNP in y direction of the KCS using
length L2.
The flange coordinate system (FCS) is located on the axis A3, shifted by the length LF in
negative z direction of the KCS.
The following table shows the zero position of the axes:
Axis

Zero position

A1

The jib with the axis A3 points in xKCS direction.

A2

The axis A2 is at the position 0.0 of the interconnected technology object.

A3

The axis A3 is at the position 0.0 of the interconnected technology object.

Transformation area
The kinematics transformation covers the following traversing range (Página 2155) of the axes:
● Axis A1: -180.0° ≤ α1 < 180.0°
● Axis A2: No limiting
● Axis A3: No limiting

2140

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Nota
Singular positions
The kinematics have singular positions (Página 2159).
A singular position occurs when the zero point of the flange coordinate system (FCS) is located
on the z-axis of the kinematics coordinate system (KCS). Inverse transformation is not possible
in this area. This position may result, e.g. if the length L2 is 0.0 due to the design.
The graphic below shows examples of permissible and impermissible joint positions for the
transformation:
\.&6

/

].&6
])&6

$

[ .&6
[ )&6

])&6

[ )&6

\)&6
\)&6

Permissible joint position
Invalid joint position for transformation with L2 = 0.0

Cylindrical robot 3D with orientation
The kinematics "Cylindrical robot 3D with orientation" supports four axes and four degrees of
freedom. The axes are configured as serial kinematics.
The following graphic shows the principal configuration and the typical working area of the
kinematics:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2141

Control de movimiento
6.1 Using S7-1500 Motion Control

The kinematics consists of the following axes:
● A rotary axis A1 with rotation around the z axis of the kinematics coordinate system (KCS)
● A linear axis A2 in z direction of the KCS
● A linear axis A3 in x direction of the KCS
● One rotary axis A4 (orientation axis)
The kinematics consists of a base, a supporting column and a jib. Axis A1 rotates the supporting
column with jib around the base. Axis A2 moves the jib vertically. Axis A3 moves the flange
system horizontally on the jib. The kinematics enables a cylindrical working area. The
orientation axis A4 enables the rotary motion of the tool.

Coordinate systems and zero position
The graphic below shows the following in the side view (xz plane):
● The position of the axes and the coordinate systems KCS and FCS
● The zero positions of the axes A1 and A2
● The deflection of the kinematics is indicated (dashed)

2142

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

$

]

$

\)&6

[ )&6

])&6

$
\)&6
$

].&6

[ )&6

/)

/

])&6

[ .&6

\.&6
[

[

Zero position of the kinematics
L1

At zero position of the axis A2:
Distance of the FCS to the kinematics zero point (KZP) and flange length LF in z direction
of the KCS

LF

Flange length before the FCS in the z direction of the KCS

x1

Positive deflection of the axis A3
At the zero position of axis A3, the z axis of the FCS is located on the z axis of the KCS.
For mechanical reasons, the kinematics shown cannot approach the zero position of the
axis A3.

Deflection of the kinematics
x2

Positive deflection of the axis A3

z1

Positive deflection of the axis A2

Legend for representation of the kinematics (Página 2073)

The graphic below shows the following in the top view (xy plane):
● The position of the axes and the coordinate systems KCS and FCS
● The zero position of the kinematics
● The positive/negative deflection of the kinematics is indicated (dashed)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2143

Control de movimiento
6.1 Using S7-1500 Motion Control

\.&6
])&6

/
˞ r

/

].&6

[ )&6
\)&6

[ .&6
])&6

$

[ )&6
$

\)&6
˞ ದr

])&6

\)&6
[ )&6

Zero position of the kinematics
L2

Distance of the axis A3 to the KZP in y direction of the KCS (negative value in this case)

Deflection of the kinematics
α1

Positive deflection of the axis A1 when α1 = 30°
Negative deflection of the axis A1 when α1 = -75°

Legend for representation of the kinematics (Página 2073)

The KCS with the kinematics zero point (KZP) is located at the base of the kinematics. You
define the distance of the zero position of axis A2 in z direction of the KCS from the KZP using
length L1. You define the distance of the axis A3 from the KNP in y direction of the KCS using
length L2.
The flange coordinate system (FCS) is located on the axis A3, shifted by the length LF in
negative z direction of the KCS.
The following table shows the zero position of the axes:

2144

Axis

Zero position

A1

The jib with the axis A3 points in xKCS direction.

A2

The axis A2 is at the position 0.0 of the interconnected technology object.

A3

The axis A3 is at the position 0.0 of the interconnected technology object.

A4

At the zero position of axis A1, the x axis of the FCS points in the direction of
the x axis of the KCS.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Compensation of mechanical axis couplings
You can configure a mechanical axis coupling of axis A4 to axis A2 for the kinematics. The
kinematics transformation compensates for the configured mechanical axis coupling. The axis
coupling between axis A4 and axis A2 is implemented as a leadscrew pitch. With a coupling
factor of 1.0, 360.0° on axis A4 corresponds to a distance of -1.0 mm on axis A2.

Transformation area
The kinematics transformation covers the following traversing range (Página 2155) of the axes:
● Axis A1: -180.0° ≤ α1 < 180.0°
● Axis A2: No limiting
● Axis A3: No limiting
● Axis A4: No limiting
An angle greater than 360° can be defined for the orientation. But coordinate A of the tool
center point (TCP) is mapped in the range -180° to +180°.
Nota
Singular positions
The kinematics have singular positions (Página 2159).
A singular position occurs when the zero point of the flange coordinate system (FCS) is located
on the z-axis of the kinematics coordinate system (KCS). Inverse transformation is not possible
in this area. This position may result, e.g. if the length L2 is 0.0 due to the design.
The graphic below shows examples of permissible and impermissible joint positions for the
transformation:
\.&6

/

].&6
])&6

$

[ .&6
[ )&6

])&6

[ )&6

\)&6
\)&6

Permissible joint position
Invalid joint position for transformation with L2 = 0.0

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2145

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags: Cylindrical robot
Cylindrical robot 3D
You define the "Cylindrical robot 3D" kinematics using the following tags of the technology
object:
Tags

Values

Description

<TO>.Kinematics.TypeOfKinematics

21

Cylindrical robot 3D

<TO>.Kinematics.Parameter[1]

-1.0E12 to 1.0E12

Distance L1 of the zero position of the axis A2 to the kine‐
matics zero point in z direction of the kinematics coordinate
system (KCS)

<TO>.Kinematics.Parameter[2]

-1.0E12 to 1.0E12

Distance L2 between the axes A2 and A3 in y direction of the
KCS

<TO>.Kinematics.Parameter[3]

-1.0E12 to 1.0E12

Distance of the flange coordinate system from the axis A3 in
the negative z direction of the KCS

Cylindrical robot 3D with orientation
You define the "Cylindrical robot 3D with orientation" kinematics using the following tags of the
technology object:
Tags

Values

Description

<TO>.Kinematics.TypeOfKinematics

22

Cylindrical robot 3D with orientation

<TO>.Kinematics.Parameter[1]

-1.0E12 to 1.0E12

Distance L1 of the zero position of the axis A2 to the kine‐
matics zero point in z direction of the KCS

<TO>.Kinematics.Parameter[2]

-1.0E12 to 1.0E12

Distance L2 between the axes A2 and A3 in y direction of the
KCS

<TO>.Kinematics.Parameter[3]

-1.0E12 to 1.0E12

Distance of the flange coordinate system from the axis A3 in
the negative z direction of the KCS

<TO>.Kinematics.Parameter[4]

-

Mechanical axis coupling of axis A4 to A2 present/not pre‐
sent

0

Not present

<TO>.Kinematics.Parameter[5]

1

Present

-1.0E12 to 1.0E12

Mechanical axis coupling factor of axis A4 to axis A2

Tripod
Tripod 3D
The kinematics "Tripod 3D" supports three axes and three degrees of freedom. The axes are
configured as parallel kinematics.
The following graphic shows the principal configuration and the typical working area of the
kinematics:

2146

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

The kinematics consists of three linear axes A1, A2 and A3.
The kinematics is modeled suspended and consists of an upper connecting plate, three arms
and a lower connecting plate. The axes for the motion of the arms consist of rails with sliding
carriages. The rails with the sliding carriages are fastened to the upper connecting plate.
Connecting rods connect the sliding carriages to the lower connecting plate. The tool is
suspended from the lower connecting plate. The parallelogram structures of the connecting
rods keep the lower connecting plate parallel to the xy plane of the KCS.

Coordinate systems and zero position
The graphic below shows the following in the top view (xy plane):
● The position of the kinematics coordinate system (KCS)
● The angles of the axes A1, A2 and A3 to one another

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2147

Control de movimiento
6.1 Using S7-1500 Motion Control

$
\.&6
$

˟
˟

].&6

[ .&6
'

$

β1

Angle between the axes A1 and A2

β2

Angle between the axes A2 and A3

Legend for representation of the kinematics (Página 2073)

The following graphic shows the top view of the position of the flange coordinate system (FCS)
in the xy plane of the lower connecting plate:

˟

˟

])&6

[ )&6
'

\)&6

The graphic below shows the following in the front view (xz plane):
● The position of the axis A1 and the coordinate systems KCS and FCS
● The zero position of the axis A1
● The positive deflection of the axis A1 is indicated (dashed)

2148

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
'

].&6

ˠ

\.&6

[ .&6

$

/
'

/)
\)&6

[ )&6

])&6

\)&6

[ )&6

])&6

Zero position of the kinematics
D1

Distance of the upper hinge points of the connecting rods to the center of the upper
connecting plate

D2

Distance of the lower hinge points of the connecting rods to the center of the lower
connecting plate

L1

Length of the connecting rods

LF

Flange length before the FCS in the z direction of the KCS

γ

Angle between the upper connecting plate (xy plane of the KCS) and the rail of the axis
A1 (0.0° ≤ γ < 90.0°)

D1, D2, L1 and γ are identical for the three arms of the kinematics.
Deflection of the kinematics with deflection of the axis A1 in positive direction
Legend for representation of the kinematics (Página 2073)

The KCS with the kinematics zero point (KZP) is located at the center point of the upper
connecting plate. The kinematics zero point is centered relative to the zero positions of the axes
A1, A2 and A3.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2149

Control de movimiento
6.1 Using S7-1500 Motion Control
The FCS is located in the center point of the lower connecting plate with identical distance D2
to the joint points of each connecting rod. You shift the FCS in the negative z direction of the
KCS using length LF.
At the zero position, axes A1, A2 and A3 are in the x-y plane of the KCS.

Transformation area
The kinematics transformation covers the following traversing range (Página 2155) of the axes:
● Axes A1, A2 and A3: 0.0 ≤ Travel distance

Tripod 3D with orientation
The kinematics "Tripod 3D with orientation" supports four axes and four degrees of freedom.
The axes are configured as parallel kinematics.
The following graphic shows the principal configuration and the typical working area of the
kinematics:

The kinematics consists of the following axes:
● Three linear axes A1, A2 and A3
● One rotary axis A4 (orientation axis)
The kinematics is modeled suspended and consists of an upper connecting plate, three arms
and a lower connecting plate. The axes for the motion of the arms consist of rails with sliding
carriages. The rails with the sliding carriages are fastened to the upper connecting plate.
Connecting rods connect the sliding carriages to the lower connecting plate. The tool is
suspended from the lower connecting plate. The parallelogram structures of the connecting
rods keep the lower connecting plate parallel to the xy plane of the KCS. The orientation axis
A4 enables the rotary motion of the tool.

2150

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Coordinate systems and zero position
The graphic below shows the following in the top view (xy plane):
● The position of the kinematics coordinate system (KCS)
● The angles of the axes A1, A2 and A3 to one another

$
\.&6
$

˟
˟

].&6

[ .&6
'

$

β1

Angle between the axes A1 and A2

β2

Angle between the axes A2 and A3

Legend for representation of the kinematics (Página 2073)

The following graphic shows the top view of the position of the flange coordinate system (FCS)
in the xy plane of the lower connecting plate:

˟

˟

])&6

[ )&6
'

\)&6

The graphic below shows the following in the side view:
● The position of the axis A1 and the coordinate systems KCS and FCS
● The zero position of the axis A1
● The positive deflection of the axis A1 is indicated (dashed)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2151

Control de movimiento
6.1 Using S7-1500 Motion Control
'

].&6

ˠ

\.&6

[ .&6

$

/
'

/)

$
\)&6

[ )&6

])&6

\)&6

[ )&6

])&6

Zero position of the kinematics
D1

Distance of the upper hinge points of the connecting rods to the center of the upper
connecting plate

D2

Distance of the lower hinge points of the connecting rods to the center of the lower
connecting plate

L1

Length of the connecting rods

LF

Flange length before the FCS in the z direction of the KCS

γ

Angle between the upper connecting plate (xy plane of the KCS) and the rail of the axis
A1 (0.0° ≤ γ < 90.0°)

D1, D2, L1 and γ are identical for the three arms of the kinematics.
Deflection of the kinematics with deflection of the axis A1 in positive direction
Legend for representation of the kinematics (Página 2073)

The KCS with the kinematics zero point (KZP) is located at the center point of the upper
connecting plate. The kinematics zero point is centered relative to the zero positions of the axes
A1, A2 and A3.

2152

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The FCS is located in the center point of the lower connecting plate with identical distance D2
to the joint points of each connecting rod. You shift the FCS in the negative z direction of the
KCS using length LF.
At the zero position, axes A1, A2 and A3 are in the x-y plane of the KCS. At the zero position
of axis A4, the x axis of the FCS points in the direction of the x axis of the KCS.

Transformation area
The kinematics transformation covers the following traversing range (Página 2155) of the axes:
● Axes A1, A2 and A3: 0.0 ≤ Travel distance
● Axis A4: No limiting
An angle greater than 360° can be defined for the orientation. But coordinate A of the tool
center point (TCP) is mapped in the range -180° to +180°.

Tags: Tripod
You define the tripod kinematics using the following tags of the technology object:
Tags
<TO>.Kinematics.TypeOfKinematics

Values

Description

23

Tripod 3D

24

Tripod 3D with orientation

<TO>.Kinematics.Parameter[1]

0.0 to 1.0E12

Distance D1 (radius of the upper connecting plate)

<TO>.Kinematics.Parameter[2]

0.001 to 1.0E12

Length L1 of connecting rods

<TO>.Kinematics.Parameter[3]

0.0° to 89.999°

Angle γ between the linear axes and the x-y plane of the
kinematics coordinate system

<TO>.Kinematics.Parameter[4]

0.0 to 1.0E12

Distance D2 (radius of the lower connecting plate)

<TO>.Kinematics.Parameter[5]

90.001° to 179.998°

Angle β1 between the axes A1 and A2

<TO>.Kinematics.Parameter[6]

90.001° to 179.998°

Angle β2 between the axes A2 and A3

<TO>.Kinematics.Parameter[7]

-1.0E12 to 1.0E12

Distance of the flange coordinate system from the lower
connecting plate in the negative z direction of the kinematics
coordinate system

User-defined kinematics systems
You can configure user-defined kinematics systems with corresponding axis interconnections:
● User-defined 2D
● User-defined 2D with orientation
● User-defined 3D
● User-defined 3D with orientation
The configuration supports you in the interconnection of the positioning axes in a user-defined
kinematics. In addition, up to 32 tags for defining the geometry of your kinematics area available
on the system level.
You have to program the user transformation (Página 2161) of the Cartesian positions and the
axis positions and axis dynamics. Predefined interfaces are available on the system level.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2153

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
User transformation (Página 2161)

Tags: User-defined kinematics systems
You configure the user-defined kinematics systems using the following tags of the technology
object:
Tag

Values

Description

<TO>.Kinematics.TypeOfKinematics

31

User-defined 2D

32

User-defined 2D with orientation

33

User-defined 3D

34

User-defined 3D with orientation

-

Up to 32 user-specific parameters

<TO>.Kinematics.Parameter[1..32]

Kinematics transformation
The kinematics transformation is the conversion between the Cartesian coordinates of the
kinematics motion and the setpoints for the individual kinematics axes:
● Forward transformation
Calculation of the Cartesian coordinates from the axis positions of the kinematics axes
● Inverse transformation
Calculation of the axis positions of the kinematics axes from the Cartesian coordinates
The kinematics transformation converts the position values and the dynamic values (velocity,
acceleration).
The kinematics technology object provides the kinematics transformation for the predefined
kinematics types on the system level. In the case of user-defined kinematics systems, you must
calculate the user transformation (Página 2161) in its own program.

Transformation for predefined kinematics systems
Reference points
The kinematics transformation uses the following reference points:
● Kinematics zero point (KZP)
● Zero positions of the kinematics axes
● Tool center point (TCP)
The positive direction of the axes for the kinematics transformation is dependent on the
kinematics type (Página 2072). Configure the positive direction on the positioning axis/
synchronous axis technology object corresponding to the positive direction of the axis in the
kinematics.

2154

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Kinematics zero point (KZP)
The coordinate origin of the kinematics coordinate system (KCS) is the KZP. You configure the
geometry parameters of the kinematics starting from the KZP.

Zero positions of the kinematics axes
The position 0.0 on the positioning axis/synchronous axis technology object defines the zero
position of the kinematics axis. Reference the axes in such a way that the axes indicate the
position 0.0 in the zero position of the kinematics. The zero position of the kinematics depends
on the kinematics type (Página 2072).

Tool center point (TCP)
The position of the TCP results from the geometry parameters and the tool frame.

Traversing range and transformation area
The transformation area is the area of the axis positions that the kinematics transformation
covers. The kinematics type defines the transformation area for the individual kinematics axes.
You will find information on the transformation area in the description of the
individual kinematics systems (Página 2072).
The hardware and software limit switches of an axis define the maximum traversing range and
the working area. The working area of a kinematics axis can be greater than or less than the
transformation area depending on the axis configuration:
● Work area > Transformation area
When a kinematics axis exits the transformation area during a kinematics motion, the
kinematics technology object outputs the technology alarm 803. The kinematics motion is
aborted and the axes stop with the maximum dynamic values configured for the axes (alarm
reaction: Stop with maximum dynamic values of the axes).
● Work area ≤ Transformation area
When a kinematics axis runs into the software limit switch, the positioning axis/synchronous
axis technology object outputs the technology alarm 533. The axis stops with the maximum
dynamic values configured for the axis (alarm reaction: Stop with maximum dynamic
values). When the axis is stopped, the kinematics technology object outputs the technology
alarm 801. The kinematics motion is aborted and the axes stop with the maximum dynamic
values configured for the axes (alarm reaction: Stop with maximum dynamic values of the
axes).
The following graphic shows the relationship between the working area of the axis and the
transformation area:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2155

Control de movimiento
6.1 Using S7-1500 Motion Control






①
②
③
④
⑤
⑥











Mechanical end stop
Hardware limit switch for positioning axis/synchronous axis technology object
Software limit switch for positioning axis/synchronous axis technology object
Maximum traversing range of the axis
Work area of the axis
Transformation area
(here working area > transformation area)

Joint position spaces (kinematics-dependent)
Depending on the kinematics type, a kinematics system can reach Cartesian coordinates via
various joint positions. The kinematics type (Página 2072) defines the possible joint positions
and the positive and negative joint position space. The joint positioning spaces are limited by
the respective transformation areas. In addition, with the "Delta picker" kinematics type there
are further limitations due to invalid joint positions and singular positions (Página 2159) with the
kinematics types "articulated arm", "SCARA 3D" and "cylindrical robot". Also note the resulting
constructional limitations due to the installation location of the kinematics.
The kinematics technology object indicates the current joint position in the
"<TO>.StatusKinematics.LinkConstellation" tag.
The kinematics system cannot exit the joint position space during a linear or circular motion.
You can change the arm positioning space using single-axis motions and synchronous point-topoint motion (sPTP motion).

Example: Kinematics type SCARA 3D
A "SCARA 3D" kinematics is to relocate an object from one pallet to another pallet. Due to a
wall, the kinematics system cannot reach the second pallet without the axis A2 changing the
joint position space.
The figure below shows the kinematics in the top view (xy plane):

2156

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

˞ r

\.&6

˞ r
].&6

$

[ .&6

$

˞ r

˞ r

Zero position of the kinematics
Deflection of the kinematics in the positive direction when α1 = 45.0° with positive joint position
when α2 = 120.0°
Deflection of the kinematics in the negative direction when α1 = -45.0° with negative joint position
when α2 = -120.0°
α1

Deflection of the axis A1 in positive direction when α1 = 45.0°
Deflection of the axis A1 in the negative direction when α1 = -45.0°

α2

The deflection of the axis A2 in the positive direction when α2 = 120.0° produces a
positive joint position.
The deflection of the axis A2 in negative direction when α2 = -120.0° produces a negative
joint position.

Legend for representation of the kinematics (Página 2073)

Example: "Articulated arm 3D" kinematics type
A kinematics "Articulated arm 3D" should move one object from one storage location to
another. The kinematics cannot reach the second storage location because of the ceiling
without axis A3 changing the arm positioning space.
The figure below shows the kinematics in the side view (xz plane):

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2157

Control de movimiento
6.1 Using S7-1500 Motion Control

˞ r

$

˞ r

˞ ದr

$

˞ r

$

].&6

\.&6

[ .&6

Zero position of the kinematics
Deflection of the kinematics in the positive direction when α1 = 10.0° with positive joint position when α2 = 35.0°
Deflection of the kinematics in the negative direction when α1 = -15.0° with negative joint position when α2 = -75.0°
α2

Deflection of the axis A2 in the positive direction when α2 = 10.0°
Deflection of the axis A2 in negative direction when α2 = -15.0°

α3

The deflection of the A3 in the positive direction when α3 = 35.0° produces a positive joint position.
The deflection of the A3 in negative direction when α3 = -75.0° produces a negative joint position.

Legend for representation of the kinematics (Página 2073)

Example: Kinematics type "cylindrical robot"
A kinematics "Cylindrical robot" should move an object from one storage location to another.
The kinematics cannot reach the second storage location without axis A3 changing the arm
positioning space.
The figure below shows the kinematics in the top view (xy plane):

2158

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

\.&6
$$
˞ r

].&6

[ .&6

$

˞ ದr

Zero position of the kinematics
Deflection of the kinematics in positive direction when α1 = 30.0°
Deflection of the kinematics in the negative direction when α1 = -75.0°
α1

Deflection of the axis A1 in positive direction when α1 = 30.0°
Deflection of the axis A1 in the negative direction when α1 = -75.0°

Legend for representation of the kinematics (Página 2073)

Singular positions
Depending on the kinematics type, inverse transformation Cartesian coordinates are possible,
which cannot be clearly converted into axis positions of the kinematics axes. This occurs when
the zero point of the flange coordinate system (FCS) is located on the z-axis of the kinematics
coordinate system (KCS). The Cartesian coordinates at which this behavior occurs are referred
to as singular positions.
The following kinematics types of the kinematics technology object have singular positions.
● Articulated arm 3D
● Articulated arm 3D with orientation
● SCARA 3D with orientation
● Cylindrical robot 3D
● Cylindrical robot 3D with orientation

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2159

Control de movimiento
6.1 Using S7-1500 Motion Control

Behavior in singular positions
A path motion on or through a singular position is not possible. When the singular position is
reached, the technology alarm 803 "Error during calculation of the transformation" is output
(alarm reaction: Stop with maximum dynamic values of the axes). The kinematics system
reduces the overruns of the dynamics caused by setpoints to the maximum dynamics of the
axis. The reduction of the overruns of the dynamics can result in unexpected axis motion.

Dynamic increase in the vicinity of singular positions
If the path motion runs in the vicinity of singular positions, kinematics axes may accelerate or
decelerate considerably and travel at very high speed. The dynamic limits of the axes may be
exceeded because of this. If the dynamic limits of the axes with regard to speed, acceleration
or deceleration are exceeded, this is displayed on the technology object data block of the
corresponding axis and the technology alarm 511 "Dynamic limit is violated by the kinematics
motion" is triggered. This is a warning and contains no alarm response. The kinematics motion
is not stopped.
The size of the area in which this behavior occurs depends on the kinematics used.

Possible measures
To prevent a dynamic increase in the vicinity of singular positions, take the following measures:
1. Plan the path motions in such a way that the kinematics do not travel in or in the vicinity of
singular positions.
2. Check whether travel with your kinematics in or in the vicinity of singular positions can be
prevented by blocked zones or software limit switches.
3. In the user program, send Motion Control jobs with activated dynamic adaptation to the
kinematics technology object.
Nota
Dynamic adaptation in the kinematics control panel
The dynamic adaptation is not active in the kinematics control panel. The dynamic limits of the
kinematics axes are not taken into account during a kinematics motion with the kinematics
control panel.

Mechanical couplings (kinematics-dependent)
If the position of a kinematics axis changes due to the motion of another kinematics axis, these
two axes are mechanically coupled. Mechanical couplings between two kinematics axes can
arise for reasons of construction. For example, if the orientation axis of the "SCARA" kinematics
is coupled to the spindle of a linear axis, the orientation changes due to the motion of the linear
axis.
The kinematics transformation compensates for the mechanical couplings with a coupling
factor. You specify the mechanical couplings and coupling factors depending on the kinematics
type during configuration of the kinematics.

2160

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Transformation for user-defined kinematics systems
User transformation
Unlike for predefined kinematics types, you must calculate the transformation for user-defined
kinematics systems in your own program. Like for predefined kinematics types, the kinematics
technology object performs the following tasks:
● Processing of Motion Control instructions
● Monitoring functions
● Communication with the interconnected axes
You program the user transformation of the Cartesian coordinates and the axis-specific
setpoints in the MC‑Transformation [OB98] organization block. This programming includes the
transformation of the positions and the dynamic values (velocity, acceleration, jerk). You freely
define the parameters of a user-defined kinematics system in the tags of the kinematics
technology object "<TO>.Kinematics.Parameter[1..32]" or under "Technology object >
Configuration > Geometry".
When you add the MC‑Transformation [OB98] in the TIA Portal, the system data block
"TransformationParameter" is automatically created under "Program blocks > System blocks
> Program resources". In the properties of the organization block under "General >
Transformation", the MC‑Transformation [OB98] indicates the number of the system data block
"TransformationParameter". You write and read the axis-specific data or the Cartesian data of
the kinematics to be transformed in the system data block "TransformationParameter".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2161

Control de movimiento
6.1 Using S7-1500 Motion Control

Programming
The graphic below shows the interfaces and the interaction of system performance and user
transformation:
7HFKQRORJ\REMHFW
.LQHPDWLFV

WULJJHU

6WDUWLQIRUPDWLRQ

6HWSRLQWV

$[LVVSHFLILFGDWD

(YDOXDWHNLQHPDWLFV
DQGGLUHFWLRQ

$
$
$

[
7UDQVIRUPDWLRQ

\
]
˞

$

&DUWHVLDQGDWD

.LQHPDWLFVW\SH
8VHUGHILQHG

5HIHUHQFH

5HIHUHQFH

6HWSRLQWV

0&7UDQVIRUPDWLRQ>2%@

6WDWXVOLPLWVHWF

8VHUWUDQVIRUPDWLRQ
)RUZDUG

5HDG

,QYHUVH

8VHU
GHILQHG
SDUDPHWHUV


5HDGZULWH
5HDGZULWH

7UDQVIRUPDWLRQSDUDPHWHUV
V\VWHPEORFN

Processing by user program
System performance

The kinematics technology object automatically calls the MC‑Transformation [OB98]. The
MC‑Transformation [OB98] contains the following start information:
● Kinematics technology object that calls the MC‑Transformation [OB98]
● Required direction of the transformation (forward or inverse transformation)
● Processing context of the transformation (current motion or motion planning)
● Pointer to the system data block "TransformationParameter" (VARIANT)
You evaluate this status information in your user program. In MC‑Transformation [OB98]. you
program the algorithms for the calculation of the axis-specific data or the Cartesian data of all
user-defined kinematics systems. You read the kinematics parameters needed for this from the
tags of the "<TO>.Kinematics.Parameter[1..32]" technology object. You write the result of the
calculation to the "TransformationParameter" interface.
The transformation parameters are then applied automatically to the kinematics technology
object and processed further. The kinematics technology object outputs the setpoints to the
kinematics axes.

2162

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Restrictions during transformation of multiple kinematics
Each kinematics technology object calls the MC‑Transformation [OB98]. Only one kinematics
can be transformed in an MC‑Transformation [OB98]. Only one MC‑Transformation [OB98]
can be called in each servo clock.

MC-Transformation [OB98]
Reference declaration for system data block "TransformationParameter"
You must specify a reference to the data type for the system data block
"TransformationParameter" in the "MC‑Transformation [OB98]". For this purpose, you specify
a tag with the following data type in the "Temp" area of the block interface:
"REF_TO TO_Struct_TransformationParameter_V1"
To enable access to the system data block "TransformationParameter", assign the data type
"TO_Struct_TransformationParameter_V1" using the following casting command:
#P ?= #TransformationParameters;
The declaration is described in a program example (Página 2165).

Block call
The MC‑Transformation [OB98] is called in the Motion Control application cycle according to
the configured priority. When the MC‑Transformation [OB98] is called, the kinematics
technology object assigns its parameters:
Parameter

Declaration

Data type

Default
value

Description

KinematicsObject

INPUT

DB_ANY

-

Kinematics technology object for which the MC‑Trans‐
formation [OB98] calculates the transformation when
called.

ExecutionContext

INPUT

DINT

-

Processing context of the MC-Transformation OB
0

MOTION_EXECUTION
Calculation of the axis setpoints in the motion
execution in the MC-Interpolator [OB92]. The
calculated values are necessary for the current
motion control.

1

NON_MOTION_EXECUTION
The transformation is necessary for the motion
planning (currently no motion).

TransformationType

INPUT

DINT

-

Calculation called for
0

Forward transformation
Calculation of the Cartesian parameters from the
axis positions

1

Inverse transformation
Calculation of the axis-specific parameters from
the Cartesian parameters

TransformationParameters

InOut

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

VARIANT

-

Pointer to the system data block "TransformationPara‐
meter"

2163

Control de movimiento
6.1 Using S7-1500 Motion Control
Parameter

Declaration

Data type

Default
value

Description

FunctionResult

OUTPUT

DINT

-

Return value of the MC‑Transformation [OB98] to the
kinematics technology object
0

Calculation performed and parameters output

≠0

Error during calculation (user-defined)
If an error occurs during the calculation, the ki‐
nematics technology object stops the motion.
The kinematics technology object outputs a tech‐
nology alarm with the error ID as an accompany
value and deletes the job sequence.
The value can be greater than or less than zero.

Priority
You configure the priority of the MC‑Transformation [OB98] in the properties of the organization
block under "General > Attributes > Priority". For the priority you can set values from 17 to 25
(default setting 25):
● The priority of MC‑Transformation [OB98] must be at least one level lower than the priority
of MC‑Servo [OB91].
● The priority of MC‑Transformation [OB98] must be at least one level higher than the priority
of MC‑Interpolator [OB92].

Tags of the system data block "TransformationParameter"
The following table shows the tags in the system data block "TransformationParameter":
Tag

Data type

Description

STRUCT_
Transformation
AxisData_V1

Axis-specific parameters

a1Position

LREAL

Position setpoint of the axis A1

a1Velocity

LREAL

Velocity setpoint of the axis A1

a1Acceleration

LREAL

Acceleration setpoint of the axis A1

a2Position

LREAL

Position setpoint of the axis A2

a2Velocity

LREAL

Velocity setpoint of the axis A2

a2Acceleration

LREAL

Acceleration setpoint of the axis A2

a3Position

LREAL

Position setpoint of the axis A3

a3Velocity

LREAL

Velocity setpoint of the axis A3

a3Acceleration

LREAL

Acceleration setpoint of the axis A3

a4Position

LREAL

Position setpoint of the axis A4

a4Velocity

LREAL

Velocity setpoint of the axis A4

a4Acceleration

LREAL

Acceleration setpoint of the axis A4

AxisData.

2164

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag

Data type

Description

STRUCT_
Transformation
CartesianDa‐
ta_V1

Cartesian parameters and joint position

xPosition

LREAL

x position

xVelocity

LREAL

x velocity

xAcceleration

LREAL

x acceleration

yPosition

LREAL

y position

yVelocity

LREAL

y velocity

yAcceleration

LREAL

y acceleration

zPosition

LREAL

z position

zVelocity

LREAL

z velocity

zAcceleration

LREAL

z acceleration

aPosition

LREAL

A-position (orientation)

aVelocity

LREAL

A velocity (orientation)

aAcceleration

LREAL

A acceleration (orientation)

LinkConstellation

DWORD

Joint position area

CartesianData

Program example for a user-defined kinematics systems
The following describes a example for the user transformation in the MC-Transformation
[OB98] (Página 2163) of a 2D kinematics with the name "KinematicsUserDefined2D". For
these kinematics, two transformation parameters were defined under "Technology object >
Configuration > Geometry".
The interaction of system performance and user transformation is displayed in the figure in
section "User transformation (Página 2161)".
The following table shows the declaration of the tags used:
Tag

Declaration

Data type

Description

KinematicsObject

Input

DB_ANY

Reference to the technology object

TransformationType

Input

DInt

Transformation direction

FunctionResult

Output

DInt

0

Forward transformation

1

Inverse transformation

Transformation result
0

Successful

<0

Error

TransformationPara‐
meters

InOut

Variant

Reference to the system data block "TransformationParame‐
ter" in the MC-Transformation [OB98]

P

Temp

REF_TO
TO_Struct_Tran
sformationPara‐
meter_V1

Temporary tag for the casting command

GearRatioA1

Temp

LReal

Temporary tag for read the defined transformation parame‐
ters

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2165

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag

Declaration

Data type

Description

GearRatioA2

Temp

LReal

Temporary tag for read the defined transformation parame‐
ters

InvalidCast

Constant

DInt

Return value for an unsuccessful casting command

The program example is structured as follows:
● Casting command for access to the system data block "TransformationParameter"
● Evaluation of the technology object
● Read the defined transformation parameters
● Evaluation of the transformation direction
● Calculation of the Cartesian coordinates from the axis positions of the kinematics axes
(forward transformation)
● Calculation of the axis positions of the kinematics axes from the Cartesian coordinates
(backward transformation)
First, the example program is explained step by step. The program code is summarized in the
section "Program example".

Casting command for access to the system data block "TransformationParameter"
The casting command enables access the transformation parameters defined in the
configuration.
The variant pointer is passed on to the temporary variable using the casting command.
#P ?= #TransformationParameters;

It is then tested whether the casting command was successful. The meaning of the specified
InOut "Transformation Parameter" has the expected structure of the type
TO_Struct_TransformationParameters_V1.
If the casting command was not successful, the calculation is canceled and the tag
"FunctionResult" gets the value "InvalidCast".
IF #P = NULL THEN
#FunctionResult := #InvalidCast;
RETURN;
END_IF;

Evaluation of the technology object
An IF query is used to evaluate whether the user-defined kinematics requires the
transformation defined below.
IF #KinematicsObject = "KinematicsUserDefined2D" THEN

2166

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Read the defined transformation parameters
First, the transformation parameters defined in the configuration are read out. Two gears ratios
were defined in this example.
#GearRatioA1 := "KinematicsUserDefined2D".Kinematics.Parameter[1];
#GearRatioA2 := "KinematicsUserDefined2D".Kinematics.Parameter[2];

Evaluation of the transformation direction
The transformation direction is evaluated in the next step. If the tag "TransformationType" has
the value "0", the forward transformation is calculated. If the tag has the value "1", the backward
transformation is calculated.
IF #TransformationType = 0 THEN

Calculation of the Cartesian coordinates from the axis positions of the kinematics axes (forward
transformation)
In the forward transformation, Cartesian data (position, velocity and acceleration) are
calculated from the axis data. The forward transformation is first calculated in x direction and
then in z direction.
#P^.CartesianData.xPosition := #P^.AxisData.a1Position * #GearRatioA1;
#P^.CartesianData.xVelocity := #P^.AxisData.a1Velocity * #GearRatioA1;
#P^.CartesianData.xAcceleration := #P^.AxisData.a1Acceleration * #GearRatioA1;
#P^.CartesianData.zPosition := #P^.AxisData.a2Position * #GearRatioA2;
#P^.CartesianData.zVelocity := #P^.AxisData.a2Velocity * #GearRatioA2;
#P^.CartesianData.zAcceleration := #P^.AxisData.a2Acceleration * #GearRatioA2;

The specification of the arm positioning space is not required in this example. The
corresponding tag is set to zero.
#P^.CartesianData.LinkConstellation := 16#0000;

If the transformation is successful, the tag "FunctionResult" receives the value "0".
#FunctionResult := 0;

Calculation of the axis positions of the kinematics axes from the Cartesian coordinates (backward
transformation)
In the backward transformation, axis data (position, velocity and acceleration) are calculated
from the Cartesian data. The backward transformation is first calculated for axis A1 and then for
axis A2.
ELSIF #TransformationType = 1 THEN

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2167

Control de movimiento
6.1 Using S7-1500 Motion Control
#P^.AxisData.a1Position := #P^.CartesianData.xPosition / #GearRatioA1;
#P^.AxisData.a1Velocity := #P^.CartesianData.xVelocity / #GearRatioA1;
#P^.AxisData.a1Acceleration := #P^.CartesianData.xAcceleration / #GearRatioA1;
#P^.AxisData.a2Position := #P^.CartesianData.zPosition / #GearRatioA2;
#P^.AxisData.a2Velocity := #P^.CartesianData.zVelocity / #GearRatioA2;
#P^.AxisData.a2Acceleration := #P^.CartesianData.zAcceleration / #GearRatioA2;

If the transformation is successful, the tag "FunctionResult" receives the value "0".
#FunctionResult := 0;
END_IF;
END_IF;

Program example
The program example is summarized with Commentary in the following section:
SCL
//Caste of the variant "TransformationParameters" to the referenced datatype
//"TO_Struct_TransformationParameter_V1".
//This has to be done in order to access the variant pointer, which references
//the "TransformationParameters" where the "AxisData" and "CartesianData" for
//the calculation of user transformation are stored.
#P ?= #TransformationParameters;
//Check if cast of "TransformationParameters" was successfull. Otherwise abort calculation.
IF #P = NULL THEN
#FunctionResult := #InvalidCast;
RETURN;
END_IF;
//Check if "KinematicsUserDefined2D" needs transformation.
IF #KinematicsObject = "KinematicsUserDefined2D" THEN
//Read the user defined cartesian parameters.
#GearRatioA1 := "KinematicsUserDefined2D".Kinematics.Parameter[1];
#GearRatioA2 := "KinematicsUserDefined2D".Kinematics.Parameter[2];
//Calculate the forward transformation "AxisData" -> "CartesianData".
//The system fills the "AxisData" of "TransformationParameters" with values.
//To calculate the "CartesianData" evaluate "AxisData".
IF #TransformationType = 0 THEN
//Calculate the position, velocity and acceleration component for the x-vector.
#P^.CartesianData.xPosition := #P^.AxisData.a1Position * #GearRatioA1;
#P^.CartesianData.xVelocity := #P^.AxisData.a1Velocity * #GearRatioA1;
#P^.CartesianData.xAcceleration := #P^.AxisData.a1Acceleration * #GearRatioA1;

2168

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
SCL
//Calculate the position, velocity and acceleration component for the z-vector.
#P^.CartesianData.zPosition := #P^.AxisData.a2Position * #GearRatioA2;
#P^.CartesianData.zVelocity := #P^.AxisData.a2Velocity * #GearRatioA2;
#P^.CartesianData.zAcceleration := #P^.AxisData.a2Acceleration * #GearRatioA2;
//Link constellation can be set to 0 here, hence it is not needed.
#P^.CartesianData.LinkConstellation := 16#0000;
//Transformation was successfull.
#FunctionResult := 0;
//Calculate the backward transformation "CartesianData" -> "AxisData".
//The system fills the "CartesianData" of "TransformationParameters" with values.
//To calculate the "AxisData" evaluate "CartesianData".
ELSIF #TransformationType = 1 THEN
//Calculate the position, velocity and acceleration component for the first axis.
#P^.AxisData.a1Position := #P^.CartesianData.xPosition / #GearRatioA1;
#P^.AxisData.a1Velocity := #P^.CartesianData.xVelocity / #GearRatioA1;
#P^.AxisData.a1Acceleration := #P^.CartesianData.xAcceleration / #GearRatioA1;
//Calculate the position, velocity and acceleration component for the second axis.
#P^.AxisData.a2Position := #P^.CartesianData.zPosition / #GearRatioA2;
#P^.AxisData.a2Velocity := #P^.CartesianData.zVelocity / #GearRatioA2;
#P^.AxisData.a2Acceleration := #P^.CartesianData.zAcceleration / #GearRatioA2;
//Transformation was successfull.
#FunctionResult := 0;
END_IF;
END_IF;

Tags: Kinematics transformation
The following tags of the kinematics technology object are relevant for the kinematics
transformation:
Tag

Description

Status values
<TO>.StatusKinematics.Valid

TRUE

Transformation/Cartesian values valid

FALSE

Transformation/Cartesian values invalid

<TO>.StatusKinematics.LinkConstellation

Joint position

<TO>.FlangeInKcs

Current transformation frame (with dynamics, setpoint reference)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2169

Control de movimiento
6.1 Using S7-1500 Motion Control

Kinematics motions
With kinematics motions you move the kinematics through the three-dimensional space. Plan
the kinematics motion in advance. Take into consideration the following:
● Reachable points of the kinematics
● Zones
● Transformation areas
● Joint position spaces
● Software limit switches of axes
The orientation motion is the motion of the Cartesian orientation and is performed at the same
time for the kinematics motion. When motions are smoothed, the orientation motion is also
smoothed. When the kinematics motion stops, the orientation motion also stops.

Reference system
The target position and the target orientation you specify for a kinematics motion can relate to
the world coordinate system (WCS) or an object coordinate system (OCS).

Motion types
Linear motion
You can move a kinematics system with a linear motion. You define the linear motion using the
Motion Control instructions "MC_MoveLinearAbsolute" and "MC_MoveLinearRelative". While
the kinematics system is moved to an absolute position with a "MC_MoveLinearAbsolute" job,
it is moved relative to the current position with a "MC_MoveLinearRelative" job. The kinematics
system moves from the current position to the defined target position with a linear motion.

Circular motion
You can move a kinematics system with a circular motion. You define the circular motion using
the Motion Control instructions "MC_MoveCircularAbsolute" and "MC_MoveCircularRelative".
While the kinematics system is moved to an absolute position with a
"MC_MoveCircularAbsolute" job, it is moved relative to the current position with a
"MC_MoveCircularRelative" job.

2170

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Definition of circular path ("CircMode")
With the "CircMode" parameter, you specify the definition of the circular path. Depending on
this parameter value, the circular path is calculated as follows:
● Via an intermediate point and the end point ("CircMode" = 0)
With the intermediate point, you specify a point on the circular path, via which the end point
is to be approached. The circular path is calculated from the starting, intermediate and end
points. Only circular paths less than 360° can be traversed here.
● Via the circle center and the angle in a main plane ("CircMode" = 1)
The end point of the circular path is calculated with the circle center and the angle. With the
"PathChoice" parameter, you specify whether the circular path is to be traversed in positive
or negative direction of rotation. With the "CirclePlane" parameter, you specify the main
plane in which the circular path is to be traversed.
● Via the circle radius and the end point in a main plane ("CircMode" = 2)
The circular path is calculated with the circle radius and the end point. This can yield up to
four possible circular paths. With the "PathChoice" parameter, you specify which of the four
possible circular paths is to be traversed. With the "CirclePlane" parameter, you specify the
main plane in which the circular path is to be traversed.
When defining the intermediate and end points, circle center and angle or circle radius and end
point, ensure that the information is consistent.

Orientation direction of the circular path ("PathChoice")
When the circular path is to be calculated using circle center and the angle, you use the
"PathChoice" parameter to define whether the circular path is to be traversed in positive or
negative direction of rotation.


]

\

[






①
②
③
④
⑤
⑥

Positive direction of rotation ("PathChoice" = 0)
End point
Circle center
Starting point
End point
Positive direction of rotation ("PathChoice" = 1)

When the circular path is to be calculated using the circle radius and the end point, you use the
"PathChoice" parameter to define which of the four possible circular paths is to be traversed.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2171

Control de movimiento
6.1 Using S7-1500 Motion Control
A distinction is made here between the positive and negative direction of rotation as well as
between the longer and shorter circle segment.


]




\

[






①
②
③
④
⑤
⑥

Longer positive circle segment ("PathChoice" = 2)
Shorter positive circle segment ("PathChoice" = 0)
Starting point
End point
Shorter negative circle segment ("PathChoice" = 1)
Longer negative circle segment ("PathChoice" = 3)

Synchronous "point-to-point" motion
You can move a kinematics system with a synchronous "point-to-point" motion (sPTP motion).
With the sPTP motion you can move a kinematics time- and motion-optimized, bypass single
positions or change joint position spaces. The kinematics does not follow a specified path, but
approaches the specified end point via the shortest distance.
You can predetermine axis positions or Cartesian coordinates for an sPTP motion. The singleaxis motions are calculated from the start and target positions, which are moved
synchronously. All kinematics axes are moved simultaneously and reach the given target
position at the same time. The kinematics axis with the longest travel time determines the travel
time of the sPTP motion.
The kinematics motion of the kinematics is determined by the dynamics and motion of the
individual axes. The course of the TCP motion is derived from the travel motions and the
dynamics of the individual axes.
To reduce the travel time of a sequence of motion jobs, blending is supported between sPTP
motions and path motions.

2172

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
A sequence of motion jobs can be, for example:
● Record product with defined motion
● Move product with sPTP motion as quickly as possible
● Place product with defined motion
Define the motion via the Motion Control instructions "MC_MoveDirectAbsolute" and
"MC_MoveDirectRelative".

Target position
Define a corresponding target position for the kinematics. Specify an absolute or relative
position for the orientation. While the kinematics system is moved to absolute position with a
"MC_MoveDirectAbsolute" job, it is moved relative to the current position with a
"MC_MoveDirectRelative" job.
The target positions can be specified Cartesian or axis-related. To do this, define the
corresponding reference coordinate system. Enter axis-related coordinates in the machine
coordinate system (MCS). Cartesian coordinates are defined in the world coordinate system
(WCS) or in one of the object coordinate systems (OCS). If you enter Cartesian coordinates,
you can also predetermine the arm positioning space and the arm position in the target position.

Dynamics of the synchronous "point-to-point" motion
The dynamics of the synchronous point-to-point motion are determined by factors. These
factors are percental to the maximum values of velocity, acceleration, deceleration and jerk that
you have configured for the individual axes under "Technology object > Configuration >
Extended parameters > Dynamic default values".

Motion dynamics
Dynamics of kinematics motion and orientation motion
You specify the dynamic values (velocity, acceleration, jerk) of a kinematics motion for the
corresponding Motion Control instruction.

Dynamic defaults
If you do not specify any dynamic values for motion jobs (default value "-1.0"), the dynamic
defaults configured under "Technology object > Configuration > Extended parameters >
Dynamics" are used for the kinematics motion. For the orientation motion you can only specify
the dynamic values using the dynamic defaults.
If you change the dynamic defaults during an active motion, the changed values take effect only
in the next motion job.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2173

Control de movimiento
6.1 Using S7-1500 Motion Control

Dynamic limits of the kinematics
The configured dynamic limits of the kinematics configured under "Technology object >
Configuration > Extended parameters > Dynamics" are taken into account during the motion
execution. The dynamics of a motion can be restricted so that the dynamic limits of the
kinematics are not exceeded. When you change the dynamic limits of the kinematics, the
changes take effect immediately for the kinematics motion and orientation motion.

Dynamic limits of the kinematics axes
When a motion job is transmitted, the dynamic limits of the kinematics axes configured under
"Technology object > Configuration > Extended parameters > Limits > Dynamic limits" are only
taken into account if the Dynamic adaptation is active. The dynamics of the motion can be
restricted so that the dynamic limits of the kinematics axes are not exceeded. When you change
the dynamic limits of the kinematics axes during an active motion, the changed values only take
effect with the next motion job.
Nota
Dynamic adaptation in the user program
Dynamic adaptation is only active if it is activated in the user program.
Nota
Dynamic adaptation in the kinematics control panel
The dynamic adaptation is not active in the kinematics control panel. The dynamic limits of the
kinematics axes are not taken into account during a kinematics motion with the kinematics
control panel.

Dynamic adaptation
You set the dynamic adaptation under "Kinematics technology object > Configuration >
Extended parameters > Dynamics". When dynamic adaptation is active, a velocity profile is
calculated for the entire motion which takes into account the dynamic limits of the kinematics
axes and the kinematics (<TO>.StatusPath.DynamicAdaption). Velocity and acceleration are
included in the dynamic adaptation. Tangential and radial acceleration of the path is taken into
account in acceleration. The jerk is not limited for dynamic adaptation.
Nota
Dynamic adaptation in the user program
Dynamic adaptation is only active if it is activated in the user program.
Nota
Dynamic adaptation in the kinematics control panel
The dynamic adaptation is not active in the kinematics control panel. The dynamic limits of the
kinematics axes are not taken into account during a kinematics motion with the kinematics
control panel.

2174

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The graphic below shows examples of a velocity curve with and without dynamic adaptation:

0&B0RYH/LQHDU$EVROXWH
9HORFLW\
72B.LQHPDWLFV!6WDWXV3DWK
9HORFLW\

W

$[LV!'\QDPLFV/LPLWV
0D[9HORFLW\

$

$

With dynamic adaptation

%

Without dynamic adaption

%

W

With dynamic adaptation without segmentation of the path, the velocity profile is calculated
taking into consideration the dynamic limits of the kinematics axes which apply for the entire
motion.
For dynamic adaptation with segmentation, the path is divided into individual equidistant
segments. For each of these segments, the velocity profile is calculated taking into
consideration the dynamic limits of the kinematics axes which apply for individual sections of
the motion. The dynamic response is therefore adapted for individual sections of a motion.

Override
You can specify a velocity override for the kinematics (<TO>.Override.Velocity) using the
technology object data block. You can specify a value between 0% and 200%. The velocity
override acts on the velocity of the tool center point (TCP) along the path. If you change the
velocity override of the kinematics, the change takes effect immediately for the kinematics
motion and orientation motion.
The setpoint velocity of the motion is the velocity specified for the Motion Control instruction
multiplied by the percentage value of the velocity override.
The axis-specific velocity override values do not take effect for kinematics motions.

Tags: Kinematics motions
The following technology object tags are relevant for motion control:
Tag

Description

Status values
<TO>.StatusWord

Status indicator for an active motion

<TO>.StatusPath.CoordSystem

Coordinate system of the active motion job

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

0

World coordinate system

1, 2, 3

Object coordinate system 1, 2, 3

2175

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag

Description

<TO>.Tcp

Target coordinates of the kinematics motion in the world coordinate
system
x, y, z, A

<TO>.StatusPath.Velocity

Current path velocity (setpoint reference)

<TO>.StatusPath.Acceleration

Current path acceleration (setpoint reference)

<TO>.StatusPath.DynamicAdaption

Dynamic adaptation

<TO>.StatusMotionQueue.NumberOfCommands

0

No dynamic adaptation

1

Dynamic adaptation with segmentation of the path

2

Dynamic adaptation without segmentation of the path

Number of jobs in the job sequence

Override
<TO>.Override.Velocity

Velocity override

Dynamic limits
<TO>.DynamicLimits.Path.Velocity

Dynamic limitation for the maximum velocity of the path

<TO>.DynamicLimits.Path.Acceleration

Dynamic limitation for the maximum acceleration of the path

<TO>.DynamicLimits.Path.Deceleration

Dynamic limitation for the maximum deceleration of the path

<TO>.DynamicLimits.Path.Jerk

Dynamic limitation for the maximum jerk of the path

<TO>.DynamicLimits.Orientation.Velocity

Dynamic limitation for the maximum velocity of the Cartesian orientation

<TO>.DynamicLimits.Orientation.Acceleration

Dynamic limitation for the maximum acceleration of the Cartesian orien‐
tation

<TO>.DynamicLimits.Orientation.Deceleration

Dynamic limitation for the maximum deceleration of the Cartesian orien‐
tation

<TO>.DynamicLimits.Orientation.Jerk

Dynamic limitation for the maximum jerk of the Cartesian orientation

Dynamic defaults
<TO>.DynamicDefaults.Path.Velocity

Default setting of the velocity of the path

<TO>.DynamicDefaults.Path.Acceleration

Default setting of the acceleration of the path

<TO>.DynamicDefaults.Path.Deceleration

Default setting of the deceleration of the path

<TO>.DynamicDefaults.Path.Jerk

Default setting of the jerk of the path

<TO>.DynamicDefaults.Orientation.Velocity

Default setting of the velocity of the Cartesian orientation

<TO>.DynamicDefaults.Orientation.Acceleration

Default setting of the acceleration of the Cartesian orientation

<TO>.DynamicDefaults.Orientation.Deceleration

Default setting of the deceleration of the Cartesian orientation

<TO>.DynamicDefaults.Orientation.Jerk

Default setting of the jerk of the Cartesian orientation

<TO>.DynamicDefaults.DynamicAdaption

Default setting of the dynamic adaptation
0

No dynamic adaptation

1

Dynamic adaptation with segmentation of the path

2

Dynamic adaptation without segmentation of the path

<TO>.DynamicDefaults.MoveDirect.VelocityFac‐
tor

Factor for the velocity of the axis motions in relation to the respective
maximum velocity of the axes with sPTP motion.

<TO>.DynamicDefaults.MoveDirect.Acceleration‐
Factor

Factor for the acceleration of the axis motions in relation to the respec‐
tive maximum acceleration of the axes with sPTP motion.

<TO>.DynamicDefaults.MoveDirect.Deceleration‐
Factor

Factor for the deceleration of the axis motions in relation to the respec‐
tive maximum deceleration of the axes with sPTP motion.

<TO>.DynamicDefaults.MoveDirect.JerkFactor

Factor for the jerk of the axis motions in relation to the respective ma‐
ximum jerk of the axes with sPTP motion.

2176

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Conveyor Tracking
With conveyor tracking, the kinematics can follow a moving object coordinate system (OCS).
The OCS is connected to a leading-value-capable technology object which represents the
conveyor belt and is coupled in x direction.
Leading-value-capable technology objects are:
● Positioning axis
● Synchronous axis
● External encoder
● Leading axis proxy

Phases of conveyor tracking
The conveyor tracking proceeds in the following phases:
● Detect product position on the conveyor
● OCS is assigned to the product position
● Tool center point (TCP) approaches position in the OCS
● Move TCP in the OCS
● Finish moving the kinematics with the OCS
● Finish conveyor tracking
The following graphic shows the functionality of conveyor tracking using the example of a
kinematics and a conveyor belt:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2177

Control de movimiento
6.1 Using S7-1500 Motion Control

7&3

.&6
2&6

2&6
2&6

:&6

The products are transported to the room via a conveyor belt. The product position on the
conveyor belt is recorded via a light barrier. The Motion Control instruction
"MC_TrackConveyorBelt" assigns this product position to the object coordinate system 1
(OCS1). With the next kinematics motion job, the TCP moves to the specified position in the
OCS1.
When this position is reached, the TCP follows the OCS1, the kinematics thus follows the first
product on the conveyor. Further product-related steps are now possible via further path motion
jobs with reference to the coupled OCS1.
The position of the pallet is defined by the OCS3 frame. A store the product on the pallet, a
motion job to the OCS3 is required.
As soon as the kinematics travels to the OCS3, another "MC_TrackConveyorBelt" job can
assign the OCS1 again and start the process again. Alternatively, another product can be
assigned to the OCS2 beforehand and later be used for conveyor tracking.

Detect product position on the conveyor
No OCS is yet coupled in this phase (<TO>.StatusConveyor[1..3].TrackingState = 0).
When a product reaches a defined position on the conveyor, the position is detected, for
example, via a measuring-input function with light barrier. The corresponding conveyor position
is stored temporarily.

2178

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

OCS is assigned to the product position
In this stage the status changes to "OCS assigned"
(<TO>.StatusConveyor[1..3].TrackingState = 1).
To enable product tracking, the associated OCS frame must be known to the recorded product
position on the conveyor.
The OCS is assigned to a leading-value-capable technology object via a
"MC_TrackConveyorBelt" job with the "ConveyorBelt" parameter. The OCS is assigned to the
product with the OCS frame ("ConveyorBeltOrigin") and the product position
("InitialObjectPosition"). The OCS is now coupled in x direction of the technology object. The
OCS must be assigned to the product before the kinematics can follow the OCS.
The OCS can be moved in "TrackingState" = 1 or assigned to a different product or technology
object. You can move the object coordinate systems with the same or different technology
objects.

TCP approaches the position of the OCS
During this stage the status shows "TCP is approaching OCS"
(<TO>.StatusConveyor[1..3].TrackingState = 2).
With the next kinematics motion job, the TCP moves to the specified position in the OCS The
kinematics can be moved with the Motion Control instructions "MC_MoveLinearAbsolute" or
"MC_MoveCircularAbsolute". Program the approach by specifying an absolute target position
in the coupled OCS.
Individual orientation motions and dynamic adaptation are not possible in this phase. The
dynamics of the kinematics when approaching the position in the OCS results from the
dynamics of the motion job and the dynamics of the product motion on the conveyor belt.
The OCS cannot be shifted or assigned to another technology object.
Before starting the motion, the status is "TrackingState" = 1. During the motion the
"TrackingState" is = 2. When the motion is complete, the status changes to "TrackingState" =
3.

Move TCP in the OCS
In this phase, the status is "TCP follows OCS" (<TO>.StatusConveyor[1..3].TrackingState = 3).
The TCP follows the technology object. The kinematics can now perform additional motions
within the coupled OCS.
The kinematics can now be moved with following jobs:
● "MC_MoveLinearAbsolute" job and "MC_MoveLinearRelative" job
● "MC_MoveCircularAbsolute" job and "MC_MoveCircularRelative" job
Moving onto the conveyor belt and the first motion on the belt is only possible without blending.
Blending is possible with other motions.
With a "MC_GroupInterrupt" job or a "MC_GroupStop" job, the path motion within the coupled
OCS is stopped. The kinematics continues to follow the OCS. The status "TCP follows OCS"
is retained.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2179

Control de movimiento
6.1 Using S7-1500 Motion Control
With a "MC_GroupContinue" job, an interruption can be continued with a "MC_GroupInterrupt"
job.
The path motions on the conveyor belt are canceled with a "MC_GroupStop" job. The path
motion is restarted with a new job in the OCS.

Finish moving the kinematics with the OCS
In this stage the status changes to "OCS assigned"
(<TO>.StatusConveyor[1..3].TrackingState = 1).
The kinematics is typically guided away from the conveyor after the motions within the coupled
OCS have been completed.
Start a kinematics motion without reference to the coupled OCS either to a stationary position
or to another coupled OCS. This OCS can also be assigned to another conveyor.
With the start of this motion, the status of "TrackingState" = 3 changes to "TrackingState" = 1.
The original OCS is still coupled with the technology object and can be approached again by
the kinematics.
When a coupled OCS is approached again, the status changes according to the specified
phases of "TrackingState" = 1 up to "TrackingState" = 3.

Finish conveyor tracking
In this stage the status changes to "OCS not assigned"
(<TO>.StatusConveyor[1..3].TrackingState = 0).
To enable the OCS again for its stationary function, the coupling must be terminated. The
position of the OCS frame corresponds to the original configuration. The moving of the
kinematics with this OCS must first be completed (<TO>.StatusConveyor[1..3].TrackingState
= 1).
The coupling of the OCS with the technology object is canceled via a "MC_SetOcsFrame" job
or by a "MC_Reset" job with "Restart" = TRUE.
ATENCIÓN
Product and machine damage
If the kinematics is coupled with a technology object, this leads to a motion abort. This can lead
to product and machine damage.
Terminate the motion of the leading-value-capable technology object.

Zone monitoring
The zone monitoring has the following purposes:
● Protection from collisions with mechanical installations
● Triggering of process-related actions (signal zones)

2180

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

ADVERTENCIA
No protection of personnel
The zone monitoring is not suitable for protection of personnel.
Implement suitable protective measures for protecting personnel, e.g. set up protective
fences, install safety doors, etc.
Zones are geometric bodies you can use to describe and subdivide the workspace of a
kinematics system. You can configure workspace zones and kinematics zones on the
kinematics technology object. Workspace zones describe the environment of a kinematics
system. Kinematics zones envelope the end point of a kinematics system (flange or tool).
The following graphic shows the zones of a kinematics system:

Work zone
Signal zone
Blocked zone
Flange zone and tool zone

Zone configuration
You can specify and activate/deactivate zones via the configuration of the kinematics
technology object or in your user program using Motion Control instructions.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2181

Control de movimiento
6.1 Using S7-1500 Motion Control

Zone monitoring
The zone monitoring checks all activated workspace zones (work zones, signal zones, blocked
zones) for collision with all activated kinematics zones (flange zones, tool zones). The zone
monitoring monitors the zones for all motions of the kinematics system:
● Kinematics motions via the user program or kinematics control panel
● Single axis motions via the user program or axis control panel
The status of the zone monitoring is indicated in the diagnostics (Página 2233) and in the tags
(Página 2187) of the kinematics technology object.
If the zone monitoring detects a zone violation by a kinematics motion, the following reactions
occur:
Zone violation

Reaction

Description

Exiting the work zone

Alarm with
stop

The kinematics technology object outputs a technology
alarm. The kinematics motion is stopped.

Entering an signal zone Alarm wit‐
hout stop

The kinematics technology object outputs a technology
alarm. The kinematics motion will be continued.

Entering an blocked zo‐ Alarm with
ne
stop

The kinematics technology object outputs a technology
alarm. The kinematics motion is stopped. The kinematics
violates the zone by the length of the brake path at a mini‐
mum.

The kinematics technology object outputs a technology alarm following zone violations by
single axis motions. The positioning axis/synchronous axis technology object outputs a
technology alarm. The single axis motion is not aborted. You can abort the single axis motion
in the application.
In addition to the zones of the kinematics technology object, you limit the travel space of the
kinematics by the software limit switches of the axes.

Retracting after a zone violation
Once you have acknowledged the technology alarm on the kinematics technology object, you
can move the kinematics system again.
ATENCIÓN
Zone monitoring for violated zone deactivated after acknowledgment
After you have acknowledged the technology alarm on the kinematics technology object, the
zone monitoring is deactivated for the violated zone until the kinematics exits the violated
blocked zone / signal zone or enters the violated work zone again. You can move the
kinematics in all directions including again into the violated blocked zone / signal zone or from
the work zone.
Take into consideration the travel direction when retracting the kinematics.
Monitor retraction in the application. The zone monitoring status is still displayed in the data
block technology object.

2182

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
After the kinematics has exited the violated blocked zone / signal zone again or entered the
violated work zone again, zone monitoring is activated again for this zone. A new technology
alarm is therefore triggered when the zone is violated again.

Consulte también
Tags: Zone monitoring (Página 2187)

Workspace zones
Workspace zones describe the environment of a kinematics system. You define workspace
zones in the world coordinate system (WCS) or in the object coordinate system (OCS). You can
configure and activate/deactivate up to ten workspace zones. The following table shows the
workspace zones of the kinematics technology object:
Workspace zone

Description

Work zone

Work zones define areas in which kinematics zones may move.

Signal zone

Signal zones indicate the following:
● Kinematics zone is entering the signal zones
● Kinematics zone is located in the signal zone

Blocked zone

Blocked zones define areas in which a kinematics zone must not enter.

Work zone
With work zones you limit the possible travel space of the kinematics or define several possible
work areas. You can specify several work zones. Only one work zone can be activated at a
given time. If no work zone is activated, the entire traversing space of the kinematics is
regarded as the work area.
Kinematics zones must be located within work zones. When a kinematics zone exits a work
zone, the kinematics technology object outputs the technology alarm 806 (alarm reaction: Stop
with maximum dynamic values of the kinematics). The axes involved in the kinematics motion
stop with the maximum dynamic values configured for the kinematics technology object. All
jobs in the job sequence are canceled.

Signal zone
Signal zones are areas within the traversing space of the kinematics. Signal zones indicate a
zone violation by a kinematics zone but do not trigger a stop of the kinematics motion. Signal
zones can be located outside the work zone to some extent.
When a kinematics zone violates an signal zone, the kinematics technology object outputs the
technology alarm 807 (no alarm reaction).

Blocked zone
Blocked zones are areas within the traversing space of the kinematics in which a kinematics
zone must not enter (e.g. control cabinet, protective wall). Blocked zones can be located
outside the work zone to some extent.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2183

Control de movimiento
6.1 Using S7-1500 Motion Control
When a kinematics zone violates an blocked zone, the kinematics technology object outputs
the technology alarm 806 (alarm reaction: Stop with maximum dynamic values of the
kinematics). The axes involved in the kinematics motion stop with the maximum dynamic
values configured for the kinematics technology object. All jobs in the job sequence are
canceled.

Kinematics zones
Kinematics zones are related to the working point / flange of a kinematics and move with the
kinematics. The zone monitoring checks the kinematics zones for penetration with workspace
zones. With kinematics zones you expand the monitored area beyond the tool center point
(TCP). You can configure and activate/deactivate up to nine kinematics zones. The following
table shows the kinematics zones of the kinematics technology object:
Kinematics zone

Reference system

Description

Tool zone

TCS

Tool zones envelope the tool or parts of the tool.

Flange zone

FCS

Flange zones envelope the flange or parts of the flange.

Tool zone
You define tool zones in the tool coordinate system (TCS). The following graphic shows a
spherical tool zone:

U

[7&6

\7&6

]7&6

2184

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Flange zone
You define flange zones in the flange coordinate system (FCS). The following graphic shows
a cylindrical flange zone:
U

K

[ )&6

\)&6
])&6

In this example, a shift by the height of the flange zone in negative z direction of the FCS has
been defined.

Zone geometry
You can configure zones with the following geometric bodies:
● Sphere
● Cuboid
● Cylinder
You specify the position of the zero point of the zone coordinate system in the reference
coordinate system. You specify the dimensions and rotation of the body starting from this zero
point.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2185

Control de movimiento
6.1 Using S7-1500 Motion Control

Sphere
You define a sphere starting from the zero point using the radius:
]

\

[

U

r

Radius of the sphere

Cuboid
You define a cuboid starting from the zero point using the edge lengths in x, y and z direction:
]
/]

\

[
/[

2186

/\

Lx

Edge length in x direction of the zone coordinate system

Ly

Edge length in y direction of the zone coordinate system

Lz

Edge length in z direction of the zone coordinate system

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Cylinder
You define a cylinder starting from the zero point using the radius of the base and the cylinder
height:
]

/]

\

U

[

r

Radius of the base of the cylinder

Lz

Height of the cylinder in z direction of the zone coordinate system

Tags: Zone monitoring
The following tags of the kinematics technology object are relevant for the zone monitoring:
Tag

Description

Zone configuration
<TO>.WorkspaceZone[1..10]

Configuration of the workspace zones

<TO>.KinematicsZone[2..10]

Configuration of the kinematics zones
The <TO>.KinematicsZone[1] zone is the tool center point (TCP) and is
always activated.

Status values
<TO>.StatusWorkspaceZone[1..10]

Status of the workspace zones

<TO>.StatusKinematicsZone[2..10]

Status of the kinematics zones

<TO>.StatusZoneMonitoring.WorkingZones

Display of violated work zones
The bit numbers 1 to 10 correspond to the configured zone numbers.

<TO>.StatusZoneMonitoring.BlockedZones

Display of violated blocked zones
The bit numbers 1 to 10 correspond to the configured zone numbers.

<TO>.StatusZoneMonitoring.SignalizingZones

Display of approached signal zones
The bit numbers 1 to 10 correspond to the configured zone numbers.

<TO>.StatusZoneMonitoring.KinematicsZones

Display of kinematics zones that violate workspace zones
The bit number 1 indicates the monitoring status of the TCP. The bit num‐
bers 2 to 10 correspond to the configured zone numbers.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2187

Control de movimiento
6.1 Using S7-1500 Motion Control

6.1.5.3

Version overview
For S7-1500T Motion Control, a distinction is made between the version of the technology, the
technology objects and the Motion Control instructions.
The version of a technology object or a Motion Control instruction is indicated in the properties
of the technology object in the "General > Information" tab, "Version" field.

2188

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Compatibility list
The table below shows the compatibility of the technology version with the CPU version:
CPU

Technology

Technology object

Motion Control instruction

V2.8

V5.0

Kinematics V5.0

MC_GroupInterrupt V5.0
MC_GroupContinue V5.0
MC_GroupStop V5.0
MC_MoveLinearAbsolute V5.0
MC_MoveLinearRelative V5.0
MC_MoveCircularAbsolute V5.0
MC_MoveCircularAbsolute V5.0
MC_MoveDirectAbsolute V5.0
MC_MoveDirectRelative V5.0
MC_TrackConveyorBelt V5.0
MC_DefineWorkspaceZone V5.0
MC_DefineKinematicsZone V5.0
MC_SetWorkspaceZoneActive V5.0
MC_SetWorkspaceZoneInactive V5.0
MC_SetKinematicsZoneActive V5.0
MC_SetKinematicsZoneInactive V5.0
MC_DefineTool V5.0
MC_SetTool V5.0
MC_SetOcsFrame V5.0
MC_KinematicsTransformation V5.0
MC_InverseKinematicsTransformation
V5.0

V2.5

V4.0

Kinematics V4.0

MC_GroupInterrupt V4.0
MC_GroupContinue V4.0
MC_GroupStop V4.0
MC_MoveLinearAbsolute V4.0
MC_MoveLinearRelative V4.0
MC_MoveCircularAbsolute V4.0
MC_MoveCircularAbsolute V4.0
MC_DefineWorkspaceZone V4.0
MC_DefineKinematicsZone V4.0
MC_SetWorkspaceZoneActive V4.0
MC_SetWorkspaceZoneInactive V4.0
MC_SetKinematicsZoneActive V4.0
MC_SetKinematicsZoneInactive V4.0
MC_DefineTool V4.0
MC_SetTool V4.0
MC_SetOcsFrame V4.0

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2189

Control de movimiento
6.1 Using S7-1500 Motion Control

Version-dependent organization block MC-LookAhead [OB97]
If you change of a technology version V4.0 to ≥ V5.0, an organization block (OB) MCLockAhead [OB97] is automatically created.
When changing a technology version V4.0 to ≥ V5.0, you still have the same options as with a
technology version V4.0.
If you use multiple kinematics, only one MC-LockAhead [OB97] is used for all kinematics used.
The movement preparation of the kinematics technology object is calculated in the
MC‑LookAhead [OB97] organization block.

6.1.5.4

Configuring

Adding a kinematics technology object
The following describes how to add a kinematics technology object in the project tree.

Requirement
A project with a CPU S7-1500T is created.

Procedure
To add a kinematics technology object, follow these steps:
1. Open the CPU's folder in the project navigator.
2. Open the "Technology Objects" folder.
3. Double-click "Add new object".
The "Add new object" dialog opens.
4. Select "TO_Kinematics". You can infer the function of the technology object from the
displayed description.
5. In the "Name" input field, adapt the name of the kinematics to your requirements.
6. To change the suggested data block number, select the "Manual" option.
7. To add your own information about the technology object, click "Additional information".
8. To open the configuration after adding the technology object, select the "Add new and open"
check box.
9. To add the technology object, click "OK".

Result
The new kinematics technology object was created and placed in the "Technology objects"
folder of the project tree.

2190

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Configuring the kinematics technology object
Configuration - Basic Parameters
Configure the basic properties of the kinematics technology object in the "Basic Parameters"
configuration window.

Kinematics name
Define the name of the kinematics in this field. The technology object is listed under this name
in the project tree. The variables of the technology object can be used in the user program
under this name.

Kinematics type
Select the desired kinematics type (Página 2072) in this drop-down list.

Units of measure
In the drop-down list, select the desired units of measure (Página 2062) for the position,
velocity, angle and angular velocity of the kinematics.
If you wish to use six decimal places in the selected unit, select the check box "Use position
values with higher resolution".

Configuration - Interconnections
Configure the axes of kinematics in the "Interconnections" configuration window.

Kinematics axes
You can interconnect a kinematics technology object with positioning axes and synchronous
axes which are already created in the project. In the drop-down list, select the desired axes
depending on the kinematics type (Página 2072). You can directly call the configuration of the
selected technology object using the
button. Configure the interconnected technology
objects as linear or rotary axes according to the kinematics type.
Depending on the kinematics type, the following kinematics axes are relevant:
Kinematics type

Kinematics axis A1 Kinematics axis A2 Kinematics axis A3 Orientation axis A4

2D

x

x

-

-

2D with orientation

x

3D

x

x

-

x

x

x

-

3D with orientation

x

x

x

x

x relevant
- Not relevant

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2191

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Interconnection rules (Página 2061)

Configuration - Geometry
Configuration - Geometry (Cartesian portal)
Configure the geometric parameters of kinematics in the "Geometry" configuration window.

Transformation parameters
In these fields, define the transformation parameters of the kinematics in the kinematics
coordinate system (KCS) depending on the kinematics type:
● Kinematics type "Cartesian portal 2D" and "Cartesian portal 2D with orientation"
Field

Description

Length L1

Define the distance of the zero position of the A1 axis to the kinematics zero
point (KZP) in x direction of the KCS

Length L2

Define the distance of the zero position of the A2 axis to the kinematics zero
point in z direction of the KCS

Flange length LF

Define the distance of the flange coordinate system (FCS) from the axis A2 in
the negative z direction of the KCS in this field.

● Kinematics type "Cartesian portal 3D" and "Cartesian portal 3D with orientation"

2192

Field

Description

Length L1

Define the distance of the zero position of the A1 axis to the kinematics zero
point in x direction of the KCS in this field.

Length L2

Define the distance of the zero position of the A2 axis to the kinematics zero
point in y direction of the KCS in this field.

Length L3

Define the distance of the zero position of the A3 axis to the kinematics zero
point in z direction of the KCS in this field.

Flange length LF

Define the distance of the flange coordinate system from the axis A3 in the
negative z direction of the KCS in this field.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Representation in kinematics trace
In these fields, define the scaling in which the kinematics is displayed in the kinematics trace,
depending on the kinematics type:
● Kinematics type "Cartesian portal 2D" and "Cartesian portal 2D with orientation"
Field

Description

x minimum

Define the dimensioning of the kinematics in the negative x direction in this field.

x maximum

Define the dimensioning of the kinematics in the positive x direction in this field.

z minimum

Define the dimensioning of the kinematics in the negative z direction in this field.

z maximum

Define the dimensioning of the kinematics in the positive z direction in this field.

● Kinematics type "Cartesian portal 3D" and "Cartesian portal 3D with orientation"
Field

Description

x minimum

Define the dimensioning of the kinematics in the negative x direction in this field.

x maximum

Define the dimensioning of the kinematics in the positive x direction in this field.

y minimum

Define the dimensioning of the kinematics in the negative y direction in this field.

y maximum

Define the dimensioning of the kinematics in the positive y direction in this field.

z minimum

Define the dimensioning of the kinematics in the negative z direction in this field.

z maximum

Define the dimensioning of the kinematics in the positive z direction in this field.

Consulte también
Cartesian portal (Página 2074)

Configuration - Geometry (roller picker)
Configure the geometric parameters of kinematics in the "Geometry" configuration window.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2193

Control de movimiento
6.1 Using S7-1500 Motion Control

Transformation parameters
In these fields, define the transformation parameters of the kinematics in the kinematics
coordinate system (KCS) depending on the kinematics type:
● Kinematics type "Roller picker 2D" and "Roller picker 2D with orientation"
Field

Description

Radius R1

Define the cam radius for the axis A1 in this field.

Radius R2

Define the cam radius for the axis A2 in this field.

Length L1

Define the distance of the flange coordinate system (FCS) to the kinematics
zero point (KZP) in x direction of the KCS on zero position of the axes A1 and
A2 in this field.

Length L2

Define the distance of the FCS to the kinematics zero point including the flange
length LF in z direction of the KCS on zero position of the axes A1 and A2 in this
field.

Flange length LF

Define the flange length before the FCS in the negative z direction of the KCS
in this field.

● Kinematics type "Roller picker 3D (vertical)", and "Roller picker 3D with orientation
(vertical)" and "Roller picker 3D with orientation (horizontal)"
Field

Description

Radius R1

Define the cam radius for the axis A1 in this field.

Radius R2

Define the cam radius for the axis A2 in this field.

Length L1

Define the distance of the FCS to the kinematics zero point in x direction of the
KCS in this field.

Length L2

For kinematics type "Roller picker 3D (vertical)" and "Roller picker 3D with
orientation (vertical)":
Define the distance of the A3 axis to the kinematics zero point in y direction of
the KCS in this field.
For kinematics type "Roller picker 3D with orientation (horizontal)":
Define the distance of the FCS to the kinematics zero point in y direction of the
KCS in this field.

Length L3

For kinematics type "Roller picker 3D (vertical)" and "Roller picker 3D with
orientation (vertical)":
Define the distance of the FCS to the kinematics zero point in z direction of the
KCS in this field.
For kinematics type "Roller picker 3D with orientation (horizontal)":
Define the distance of the A3 axis to the kinematics zero point in z direction of
the KCS in this field.

Flange length LF

2194

Define the flange length before the FCS in the negative z direction of the KCS
in this field.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Representation in kinematics trace
In these fields, define the scaling in which the kinematics is displayed in the kinematics trace,
depending on the kinematics type:
● Kinematics type "Roller picker 2D" and "Roller picker 2D with orientation"
Field

Description

x minimum

Define the dimensioning of the kinematics in the negative x direction in this field.

x maximum

Define the dimensioning of the kinematics in the positive x direction in this field.

z minimum

Define the dimensioning of the kinematics in the negative z direction in this field.

z maximum

Define the dimensioning of the kinematics in the positive z direction in this field.

● Kinematics type "Roller picker 3D (vertical)", and "Roller picker 3D with orientation
(vertical)" and "Roller picker 3D with orientation (horizontal)"
Field

Description

x minimum

Define the dimensioning of the kinematics in the negative x direction in this field.

x maximum

Define the dimensioning of the kinematics in the positive x direction in this field.

y minimum

Define the dimensioning of the kinematics in the negative y direction in this field.

y maximum

Define the dimensioning of the kinematics in the positive y direction in this field.

z minimum

Define the dimensioning of the kinematics in the negative z direction in this field.

z maximum

Define the dimensioning of the kinematics in the positive z direction in this field.

Consulte también
Roller picker (Página 2085)

Configuration - Geometry (SCARA)
Configure the geometric parameters of kinematics in the "Geometry" configuration window.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2195

Control de movimiento
6.1 Using S7-1500 Motion Control

Transformation parameters
In these fields, define the transformation parameters of the kinematics in the kinematics
coordinate system (KCS):
● Kinematics type "SCARA 2D with orientation"
Field

Description

Length L1

Define the distance of the A1 axis to the kinematics zero point (KZP) in z direc‐
tion of the KCS

Length L2

Define the distance of the A1 axis to the A2 axis in x direction of the KCS in this
field.

Flange length LF

Define the distance of the flange coordinate system (FCS) from the axis A2 in
the negative z direction of the KCS in this field.

● Kinematics type "SCARA 3D with orientation"
Field

Description

Length L1

Define the distance of the A1 axis to the kinematics zero point (KZP) in z direc‐
tion of the KCS

Length L2

Define the distance of the A1 axis to the A2 axis in x direction of the KCS in this
field.

Length L3

Define the distance of the A2 axis to the A3 axis in x direction of the KCS in this
field.

Flange length LF

Define the distance of the flange coordinate system (FCS) from the axis A3 in
the negative z direction of the KCS in this field.

Mechanical axis coupling
The kinematics transformation compensates for the configured mechanical axis couplings. If
you set a mechanical axis coupling for a first axis to a second axis, the setting "Modulo" must
not be activated for the first axis.
You can configure the following mechanical axis couplings for the kinematics "SCARA 2D with
Orientation":
● Mechanical coupling of axis A4 to axis A2
You can configure the following mechanical axis couplings for the kinematics "SCARA 3D with
Orientation":
● Mechanical coupling of axis A1 to axis A2
● Mechanical coupling of axis A4 to axis A3
Enter the desired coupling factor in the "Compensation factor" fields.

2196

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Representation in kinematics trace
In these fields, define for the "SCARA 2D with Orientation" and the "SCARA 3D with
Orientation" in which scaling the kinematics is displayed in the kinematics trace:
Field

Description

z minimum

Define the dimensioning of the kinematics in the negative z direction in this field.

z maximum

Define the dimensioning of the kinematics in the positive z direction in this field.

Consulte también
SCARA (Página 2099)

Configuration - Geometry (articulated arm)
Configure the geometric parameters of kinematics in the "Geometry" configuration window.

Transformation parameters
In these fields, define the transformation parameters of the kinematics in the kinematics
coordinate system (KCS) depending on the kinematics type:
● Kinematics type "Articulated arm 2D" and "Articulated arm 2D with orientation"
Field

Description

Length L1

Define the distance of the A1 axis from the kinematics zero point (KZP) in z
direction of the KCS

Length L2

Define the distance of the A1 axis from the kinematics zero point in x direction
of the KCS

Length L3

Define the distance of the A2 axis from the A1 axis in this field.

Length L4

Define the distance of the forced coupler point from the A2 axis in this field.

Flange length LF

Define the distance of the flange coordinate system (FCS) from the forced cou‐
pler point in the negative z direction of the KCS in this field.

● Kinematics type "Articulated arm 3D" and "Articulated arm 3D with orientation"
Field

Description

Length L1

Define the distance of the A2 axis from the kinematics zero point in z direction
of the KCS in this field.

Length L2

Define the distance of the A2 axis from the kinematics zero point in x direction
of the KCS

Length L3

Define the distance of the A3 axis from the A2 axis in this field.

Length L4

Define the distance of the forced coupler point from the A3 axis in this field.

Flange length LF

Define the distance of the FCS from the forced coupler point in the negative z
direction of the KCS in this field.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2197

Control de movimiento
6.1 Using S7-1500 Motion Control

Mechanical axis coupling
The kinematics transformation compensates for the configured mechanical axis couplings. If
you set a mechanical axis coupling for a first axis to a second axis, the setting "Modulo" must
not be activated for the first axis.
You can configure the following mechanical coupled axes, depending on the kinematics type:
● Kinematics type "Articulated arm 2D" and "Articulated arm 2D with orientation":
Mechanical coupling of axis A1 to axis A2
● Kinematics type "Articulated arm 3D" and "Articulated arm 3D with orientation":
Mechanical coupling of axis A2 to axis A3
Enter the required coupling factor in the "Compensation factor" field.

Consulte también
Articulated arm (Página 2107)

Configuration - Geometry (delta picker)
Configure the geometric parameters of kinematics in the "Geometry" configuration window.

2198

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Transformation parameters
In these fields, define the transformation parameters of the kinematics in the kinematics
coordinate system (KCS) depending on the kinematics type:
● Kinematics type "Delta picker 2D" and "Delta picker 2D with orientation"
Field

Description

Length L1

Define the length of the upper arms in this field.

Length L2

Define the length of the connecting rods in this field.

Flange length LF

Define the distance of the flange coordinate system (FCS) from the lower con‐
necting plate in the negative z direction of the KCS in this field.

Distance D1

Define the distance of the axes to the middle of the upper connecting plate
(radius of the upper connecting plate) in this field.

Distance D2

In this field, you can define the distance of the hinge points of the connecting
rods to the lower connecting plate (radius of the lower connecting plate) in this
field.

● Kinematics type "Delta picker 3D" and "Delta picker 3D with orientation"
Field

Description

Length L1

Define the length of the upper arms in this field.

Length L2

Define the length of the connecting rods in this field.

Flange length LF

Define the distance of the FCS from the lower connecting plate in the negative
z direction of the KCS in this field.

Distance D1

Define the distance of the axes to the middle of the upper connecting plate
(radius of the upper connecting plate) in this field.

Distance D2

In this field, you can define the distance of the hinge points of the connecting
rods to the lower connecting plate (radius of the lower connecting plate) in this
field.

Angle A1 to A2

Define the angle between the axes A1 and A2 in this field.

Angle A2 to A3

Define the angle between the axes A2 and A3 in this field.

Consulte también
Delta picker (Página 2124)

Configuration - Geometry (cylindrical robot)
Configure the geometric parameters of kinematics in the "Geometry" configuration window.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2199

Control de movimiento
6.1 Using S7-1500 Motion Control

Transformation parameters
In these fields, define the transformation parameters of the kinematics in the kinematics
coordinate system (KCS):
Field

Description

Length L1

Define the distance of the zero position of the A2 axis from the kinematics zero
point (KZP) in z direction of the KCS

Length L2

Define the distance of the A3 axis from the kinematics zero point in y direction of
the KCS

Flange length LF

Define the distance of the flange coordinate system (FCS) from the axis A3 in the
negative z direction of the KCS in this field.

Mechanical axis coupling
The kinematics transformation compensates for the configured mechanical axis couplings. If
you set a mechanical axis coupling for a first axis to a second axis, the setting "Modulo" must
not be activated for the first axis.
You can configure the following mechanical axis coupling for the kinematics type "Cylindrical
robot 3D with orientation":
● Mechanical coupling of axis A4 to axis A2
Enter the required coupling factor in the "Compensation factor" field.

Representation in kinematics trace
In these fields, define the scaling in which the kinematics is displayed in the kinematics trace:
Field

Description

z minimum

Define the dimensioning of the kinematics in the negative z direction in this field.

z maximum

Define the dimensioning of the kinematics in the positive z direction in this field.

A3 maximum

Define the maximum traversing length of the A3 axis in this field.

Consulte también
Cylindrical robot (Página 2137)

Configuration - Geometry (tripod)
Configure the geometric parameters of kinematics in the "Geometry" configuration window.

2200

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Transformation parameters
In these fields, define the transformation parameters of the kinematics in the kinematics
coordinate system (KCS):
Field

Description

Length L1

Define the length of the connecting rods in this field.

Flange length LF

Define the distance of the flange coordinate system (FCS) from the lower connec‐
ting plate in the negative z direction of the KCS in this field.

Distance D1

Define the distance of the upper hinge points of the connecting rods to the center
of the upper connecting plate in this field.

Distance D2

Define the distance of the lower hinge points of the connecting rods to the center
of the lower connecting plate in this field.

Angle for A1 to xy
plane of the KCS

Define the angle between the upper connecting plate (xy plane of the KCS) and the
rail of the axis A1 (0.0° ≤ γ < 90.0°) in this field.

Angle A1 to A2

Define the angle between the axes A1 and A2 in this field.

Angle A2 to A3

Define the angle between the axes A2 and A3 in this field.

Consulte también
Tripod (Página 2146)

Configuration - Geometry (user-defined)
Configure the geometric parameters of kinematics in the "Geometry" configuration window.

Transformation parameters
In this table, define the start values of the parameters 1 to 32 of the kinematics
(<TO>.Kinematics.Parameter[1..32]).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2201

Control de movimiento
6.1 Using S7-1500 Motion Control

Representation in kinematics trace
In these fields, define the scaling in which the kinematics is displayed in the kinematics trace,
depending on the kinematics type:
● Kinematics type "User-defined 2D" and "User-defined 2D with orientation"
Field

Description

x minimum

Define the dimensioning of the kinematics in the negative x direction in this field.

x maximum

Define the dimensioning of the kinematics in the positive x direction in this field.

z minimum

Define the dimensioning of the kinematics in the negative z direction in this field.

z maximum

Define the dimensioning of the kinematics in the positive z direction in this field.

● Kinematics type "User-defined 3D" and "User-defined 3D with orientation"
Field

Description

x minimum

Define the dimensioning of the kinematics in the negative x direction in this field.

x maximum

Define the dimensioning of the kinematics in the positive x direction in this field.

y minimum

Define the dimensioning of the kinematics in the negative y direction in this field.

y maximum

Define the dimensioning of the kinematics in the positive y direction in this field.

z minimum

Define the dimensioning of the kinematics in the negative z direction in this field.

z maximum

Define the dimensioning of the kinematics in the positive z direction in this field.

Consulte también
User transformation (Página 2161)
User-defined kinematics systems (Página 2153)

Configuration - Conveyor tracking
In the "Conveyor tracking" configuration window, configure the conveyor tracking properties.
You can interconnect conveyor tracking with leading-value-capable technology objects.
Leading-value-capable technology objects are:
● Positioning axis
● Synchronous axis
● External encoders
● Leading axis proxy

Possible technology objects
In the table column "Possible technology objects", add all leading-value-capable technology
objects that you need in the instruction as leading-value-capable values for conveyor tracking.
An object coordinate system can only be coupled with a leading-value-capable technology
object whose technology object is defined in this table.

2202

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Type of coupling
In the "Type of coupling" column, select whether the leading value of the leading-value-capable
technology object is to be coupled via a setpoint or actual value. With external encoders, only
the selection of the actual value is available.

Extended parameters
Configuration - Dynamics
In the "Dynamics" configuration window, configure the default values for the dynamics, the
dynamic limits and the dynamic adaptation of the kinematics motion and the orientation motion.

Presets and limits
In order to define the default values for the kinematics motion, select the entry "Path" in the
"Settings" drop-down list. In order to define the default values for the orientation motion, select
the entry "Orientation motion" in the "Settings" drop-down list.
Define the default values of the dynamics in the "Velocity", "Acceleration", "Deceleration" and
"Jerk" fields. Kinematics motion jobs triggered in the user program are executed with these
default values if no separate dynamics values are defined for the jobs.
Define the default values of the dynamic limits in the "Maximum velocity", "Maximum
acceleration", "Maximum deceleration" and "Maximum jerk" fields.

Dynamic adaptation
Select the default for the dynamics adaptation in the drop-down list. When dynamic adaptation
is active, a velocity profile is calculated for the entire motion which takes into account the
dynamic limits of the axes and the kinematics .
Mode

Description

Do not limit

The dynamic limits of the axes are not taken into consideration.

Limit with segmentation of
the path

The path is divided into segments. For each of these segments, the
dynamic is adapted in such a way that the dynamic limits of the axes are
not exceeded.

Limit without segmentation of
the path

The dynamic is adapted in such a way that the dynamic limits of the axes
are not exceeded over the entire path.

Consulte también
Dynamics of kinematics motion and orientation motion (Página 2173)

Configuration - Kinematics coordinate system
In the "Kinematics coordinate system" configuration window, configure the KCS frame
(Página 2067) and therefore the position of the kinematics coordinate system (KCS) in the
world coordinate system (WCS).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2203

Control de movimiento
6.1 Using S7-1500 Motion Control

Kinematics zero point in the WCS
In these fields, define the position of the kinematics coordinate system:
Field

Description

x position

Define the shift of the KCS in x direction of the WCS in this field.

y position

Define the shift of the KCS in y direction of the WCS in this field.

z position

Define the shift of the KCS in z direction of the WCS in this field.

Rotation A

Define the rotation of the KCS around the z axis in this field.

Rotation B

Define the rotation of the KCS around the y axis in this field.

Rotation C

Define the rotation of the KCS around the x axis in this field.

Consulte también
Coordinate systems and frames (Página 2064)

Configuration - Object coordinate systems
In the "Object coordinate system" configuration window, configure the OCS frames
(Página 2067) and therefore the position of the object coordinate system (OCS) in the world
coordinate system (WCS).

Object coordinate system (OCS)
Select the object coordinate system to be defined in this drop-down list. You can define up to
three tool object coordinate systems.

OCS in the world coordinate system (WCS)
In these fields, define the position of the selected object coordinate system:
Field

Description

x position

Define the shift of the OCS in x direction of the WCS in this field.

y position

Define the shift of the OCS in y direction of the WCS in this field.

z position

Define the shift of the OCS in z direction of the WCS in this field.

Rotation A

Define the rotation of the OCS around the z axis in this field.

Rotation B

Define the rotation of the OCS around the y axis in this field.

Rotation C

Define the rotation of the OCS around the x axis in this field.

Consulte también
Coordinate systems and frames (Página 2064)

Configuration- Tools
In the "Tools" configuration window, configure the tool frames (Página 2067) and also the
position of the tool center point (TCP) of the tools in the flange coordinate system (FCS).

2204

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tools
Select the tool to be defined in this drop-down list. You can define up to three tools.

Tool center point in the FCS
In these fields, define the position of the tool center point of the selected tool:
Field

Description

x position

Define the shift of the TCP in x direction of the FCS in this field.

y position

Define the shift of the TCP in y direction of the FCS in this field.

z position

Define the shift of the TCP in z direction of the FCS in this field.

Rotation A

Define the rotation of the TCP around the z axis in this field.

Consulte también
Coordinate systems and frames (Página 2064)

Configuration - Zones
Configure the workspace zones and kinematics zones of the technology object in the "Zones"
configuration window.
The configuration window is divided into the following areas:
● Graphic view
● Tabular editor
– Workspace zones
– Kinematics zones

Graphic view
The workspace zones or the kinematics zones, which you define in the corresponding tabular
editor, are displayed in the graphic view. You can rotate the view and zoom in and out using the
mouse.
The toolbar at the top of the graphical editor provides you with buttons for the following
functions, depending on the respective tabular editor:
Button

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Function

Description

Fit to screen size

The view is displayed adapted to the size of the window.

Show / hide grid

The grid lines of the coordinate system are hidden/displayed.

Select the coordi‐
nate system.

Select a coordinate system.

Select tool

Select a tool.

Show 2D view

The 2D view is shown.

Show 3D view

The 3D view is shown.

2205

Control de movimiento
6.1 Using S7-1500 Motion Control
Button

Function

Description

Show xy plane

The xy plane is displayed.

Show xy plane ro‐
tated

The xy plane is displayed rotated around the x-axis.

Show xz plane

The xz plane is displayed.

Show xz plane ro‐
tated

The xz plane is displayed rotated around the z-axis.

Show xz plane ro‐
tated

The xz plane is displayed rotated around the x-axis.

Show xz plane ro‐
tated

The xz plane is displayed rotated around the x-axis and the zaxis.

Show yz plane

The yz plane is displayed.

Show yz plane ro‐
tated

The yz plane is displayed rotated around the z-axis.

Show yz plane ro‐
tated

The yz plane is displayed rotated around the y-axis.

Show yz plane ro‐
tated

The yz plane is displayed rotated around the y-axis and the zaxis.

Workspace zones
Workspace zones (Página 2183) describe the environment of a kinematics system. You can
configure up to ten workspace zones in the table.
Column

Description

Visible

You show and hide the zone in the top view using the symbol in this column.

Number

This column displays the zone number.

Status

Select the activation status of the zone in this column.
Active

Zone monitoring is activated for the zone.
You can deactivate the zone in your user program via an
"MC_SetWorkspaceZoneInactive" job.

Inactive

Zone monitoring is deactivated for the zone.
You can activate the zone in your user program via an
"MC_SetWorkspaceZoneActive" job.

Invalid

The zone is not defined.
You can define the zone in your user program via an "MC_De‐
fineWorkspaceZone" job.

2206

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Column

Description

Zone type

Select the type of the zone in this column.
Work zone

Work zones define areas in which kinematics zones may mo‐
ve.
You can specify several work zones. Only one work zone can
be activated at a given time, however. If no work zone is
activated, the entire traversing space of the kinematics is re‐
garded as the work area.

Geometry

Blocked zone

Blocked zones define areas in which a kinematics zone must
not enter.

Signal zone

Signal zones are areas within the traversing space of the
kinematics. Signal zones indicate a zone violation by a kine‐
matics zone but do not trigger a stop of the kinematics motion.

Select the geometry of the zone (Página 2185) in this column.
Sphere
Cuboid
Cylinder

Length x

With a cuboid-shaped zone, define the length of the zone in x direction in this
column.

Length y

With a cuboid-shaped zone, define the width of the zone in y direction in this
column.

Length z

With a cuboid-shaped zone, define the height of the zone in z direction in this
column.
With a cylindrical zone, define the height of the zone in z direction in this column.

Radius

With a spherical zone, define the radius of the zone in this column.
With a cylindrical zone, define the radius of the zone in this column.

CS

Select the reference coordinate system in this column.
WCS

World coordinate system

OCS 1

Object coordinate system 1

OCS 2

Object coordinate system 2

OCS 3

Object coordinate system 3

x

Define the position of the zone in x direction in this column.

y

Define the position of the zone in y direction in this column.

z

Define the position of the zone in z direction in this column.

A

Define the rotation of the zone around the z-axis in this column (not relevant for a
spherical zone). Enter a value between -180.0° and 179.999°.

B

Define the rotation of the zone around the y-axis in this column (not relevant for a
spherical zone). Enter a value between -90.0° and 90.0°.

C

Define the rotation of the zone around the x-axis in this column (not relevant for a
spherical zone). Enter a value between -180.0° and 179.999°.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2207

Control de movimiento
6.1 Using S7-1500 Motion Control

Kinematics zones
Kinematics zones (Página 2184) are related to the working point / flange of a kinematics system
and move with the kinematics. The zone monitoring checks the kinematics zones for
penetration with workspace zones. You can configure up to ten kinematics areas in the table.
Column

Description

Visible

You show and hide the zone in the top view using the symbol in this column.

Number

This column displays the zone number.

Status

Select the activation status of the zone in this column.
Active

Zone monitoring is activated for the zone.
You can deactivate the zone in your user program via an
"MC_SetKinematicsZoneInactive" job.

Inactive

Zone monitoring is deactivated for the zone.
You can activate the zone in your user program via an
"MC_SetKinematicsZoneActive" job.

Invalid

The zone is not defined.
You can define the zone in your user program via an "MC_De‐
fineKinematicsZone" job.

Zone type

Geometry

Select the type of the zone in this column.
Flange zone

Flange zones envelope the flange or parts of the flange.

Tool zone

Tool zones envelope the tool or parts of the tool.

Select the geometry of the zone (Página 2185) in this column.
Sphere
Cuboid
Cylinder

Length x

With a cuboid-shaped zone, define the length of the zone in x direction in this
column.

Length y

With a cuboid-shaped zone, define the width of the zone in y direction in this
column.

Length z

With a cuboid-shaped zone, define the height of the zone in z direction in this
column.
With a cylindrical zone, define the height of the zone in z direction in this column.

Radius

With a spherical zone, define the radius of the zone in this column.
With a cylindrical zone, define the radius of the zone in this column.

CS

2208

Select the reference coordinate system in this column.
FCS

Flange coordinate system (FCS)

TCS

Tool coordinate system

x

Define the position of the zone in x direction in this column.

y

Define the position of the zone in y direction in this column.

z

Define the position of the zone in z direction in this column.

A

Define the rotation of the zone around the z-axis in this column (not relevant for a
spherical zone). Enter a value between -180.0° and 179.999°.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Column

Description

B

Define the rotation of the zone around the y-axis in this column (not relevant for a
spherical zone). Enter a value between -90.0° and 90.0°.

C

Define the rotation of the zone around the x-axis in this column (not relevant for a
spherical zone). Enter a value between -180.0° and 179.999°.

Online view
When you click on the
symbol, values of the workspace zones and the kinematics zones at
the current point in time are read back from the CPU. You can display two additional rows for
each zone in the table using the
symbol in the "Number" column. These three lines contain
the following values:
Line

Identifier in the "Num‐
ber" column.

Description

1

Number of the zone

This line contains the current values of the zone.

2

This line contains the start values of the CPU.

3

This line contains the start values in the project. You can
edit the values.

Consulte también
Zone monitoring (Página 2180)

Configuration - Job sequence
In "Job sequence" configuration window you configure the maximum number of jobs in the Job
sequence (Página 2211) .

Maximum number of jobs
In the "Maximum number of jobs" field, enter the maximum number of jobs that the job
sequence can contain. By default, the job sequence can contain up to five jobs. The job
sequence can contain a maximum of ten jobs.
Nota
Multiple jobs in the job sequence
The more jobs the job sequence contains, the longer the calculation of the motion jobs takes.

Copying a kinematics technology object
The following describes how to copy a kinematics technology object in the project tree.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2209

Control de movimiento
6.1 Using S7-1500 Motion Control

Requirement
● A project with a CPU S7-1500T is created.
● A kinematics technology object is created in the project.

Procedure
To copy a kinematics technology object, follow these steps:
1. Open the CPU's folder in the project navigator.
2. Open the "Technology Objects" folder.
3. Select the kinematics technology object to be copied.
4. To also copy the interconnected axes, select them as well. To select multiple axes, press
and hold down the <Ctrl> key.
5. Select "Copy" in the shortcut menu.
6. Select the "Technology objects" folder.
7. Select "Paste" in the shortcut menu.

Result
The selected kinematics technology object, together with any selected interconnected axes,
are copied and created in the "Technology objects" folder of the project tree.

Deleting a kinematics technology object
The following describes how to delete a kinematics technology object in the project tree.

Requirement
● A project with a CPU S7-1500T is created.
● A kinematics technology object is created in the project.

Procedure
To delete a kinematics technology object, follow these steps:
1. Open the CPU's folder in the project navigator.
2. Open the "Technology Objects" folder.
3. Select the kinematics technology object to be deleted.
4. Select the "Delete" command in the shortcut menu.
The "Confirm delete" dialog is opened.
5. To delete the technology object, click "Yes".

2210

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Result
The selected kinematics technology object has been deleted. The axes interconnected to the
kinematics technology object are retained.

Toolbar of the configuration
The following functions are available in the toolbar of the function view:
Symbol

Function

Explanation

Show online values

Displays the current values read back from the
CPU.

Couples the function view and parame‐ Enables the targeted toggling between the para‐
ter view for the objects selected in the
meter view and function-based view.
navigation

6.1.5.5

Collapse/expand all nodes and objects

Collapses or expands all nodes and objects of the
navigation or the data structure in the currently ac‐
tive view.

Collapse/expand the nodes below the
marked node

Collapses or expands the marked nodes and ob‐
jects of the navigation or the data structure in the
currently active view.

Programming
The "Programming" section contains general information on supplying and evaluating the
Motion Control instructions.
You can find an overview of the Motion Control instructions for the kinematics technology object
in the "Functions (Página 2059)" section.
You can use Motion Control instructions in the user program to transmit jobs to the technology
object. You define the job with the input parameters of the Motion Control instructions. The
current job status is indicated in the output parameters.
Because the kinematics technology object groups the kinematics axes, you can assign the
kinematics technology object directly to the input parameter "AxesGroup".
You cannot enable the kinematics technology object itself using an "MC_Power" command or
home it using an "MC_Home" job. For kinematics motions, the interconnected axes must be
enabled ("MC_Power.Enable" = TRUE).
You can acknowledge errors of the kinematics technology object with an "MC_Reset" job or by
restarting the technology object.

Job sequence
Motion-relevant jobs are entered in the job sequence of the kinematics technology object.
The following jobs enter the job sequence:
Job

Brief description
Kinematics motions

"MC_MoveLinearAbsolute"

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Position kinematics with linear path motion

2211

Control de movimiento
6.1 Using S7-1500 Motion Control
Job

Brief description

"MC_MoveLinearRelative"

Relative positioning of kinematics with linear path motion

"MC_MoveCircularAbsolute"

Position kinematics with circular path motion

"MC_MoveCircularRelative"

Relative positioning of kinematics with circular path motion

"MC_MoveDirectAbsolute"

Absolute movement of kinematics with synchronous "point-topoint" motion

"MC_MoveDirectRelative"

Relative movement of kinematics with synchronous "point-topoint" motion

"MC_DefineWorkspaceZone"

Define workspace zone

"MC_DefineKinematicsZone"

Define kinematics zone

"MC_SetWorkspaceZoneActive"

Activate workspace zone

Zones

"MC_SetWorkspaceZoneInactive" Deactivate workspace zone
"MC_SetKinematicsZoneActive"

Activate kinematics zone

"MC_SetKinematicsZoneInactive"

Deactivate kinematics zone
Coordinate systems

"MC_SetOcsFrame"

Redefine object coordinate systems

The jobs are processed in the same order in which they were entered in the job sequence. The
order of the jobs cannot be changed subsequently. If another motion job is added to the job
sequence, all jobs in the job sequence will be recalculated. The kinematics motion jobs do not
cancel each other. Because all jobs in the job sequence are taken into account for preparing the
motion and calculation of the velocity profile, even jobs with short traversing lengths and blend
motions with higher velocities can be traversed than what is possible for individual motions. The
current job is also included in the new calculation so that the current job can be blended with the
next job.
You can also interrupt execution of the jobs with an "MC_GroupInterrupt" job, fill the job
sequence and then continue execution with an "MC_GroupContinue" job.
By default, the job sequence can contain up to five jobs. You can change the maximum number
of jobs (Página 2209) in "Technology object > Configuration > Extended parameters >Job
sequence". The job sequence can contain a maximum of ten jobs.

Consulte también
"MotionQueue" tag (kinematics) (Página 2265)
Interrupting, continuing and stopping kinematics motions (Página 2213)

Motion status and remaining distance
You can obtain the status and the remaining distance of a motion job from the parameters of the
corresponding Motion Control instruction.

2212

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Status of a motion job
You can identify the status of a motion job based on the "Busy" and "Active" parameters. When
the job is transmitted, the "Busy" parameter is set to TRUE and the job is added to the job
sequence. As long as the job is still in the job sequence, the "Active" parameter is set to FALSE.
As soon as the job is active in the motion control, the "Active" parameter is set to TRUE. If the
motion job is completed, the parameters "Busy" and "Active"are set to FALSE and the
parameter "Done" to TRUE.
All inactive jobs in the job sequence are recalculated if another motion job is added to the job
sequence. The current job is also included in the new calculation so that the current job can be
blended with the next job. If a motion control is interrupted by a "MC_GroupInterrupt" job, the
jobs in the job sequence are only calculated when the motion control is continued with an
"MC_GroupContinue" job.

Remaining distance of a motion job
You can obtain the remaining distance of a motion job from the "RemainingDistance"
parameter. If the motion is not being blended, the "RemainingDistance" parameter contains the
distance to the target position on the path. If the active motion is being blended with the next
motion, the "RemainingDistance" parameter contains the distance to the beginning of the
blending segment on the path. If only the orientation axis is being moved in a motion job
(reorientation), the "RemainingDistance" parameter contains the value "-1.0".

Interrupting, continuing and stopping kinematics motions
You can interrupt and continue active kinematics motions or stop them and thus also cancel
queued motion jobs.

Interruption of kinematics motions
With the Motion Control instruction "MC_GroupInterrupt", you interrupt the execution of the
motion for the kinematics technology object. With the "Mode" parameter, you specify the
dynamic behavior. The kinematics can be stopped either with the dynamics of the motion job
to be interrupted or with the maximum dynamics. The current path is not exited when the
kinematics is stopped. If the kinematics is already at a standstill, the motion control is also
interrupted for subsequent motion jobs.
The kinematics technology object is in "Interrupted" status (<TO>.StatusWord.X17).
For path planning, you can interrupt execution of the jobs, fill the job sequence (Página 2211)
and then continue execution of the commands.

Continuation of kinematics motions
With the Motion Control instruction "MC_GroupContinue", you continue a kinematics motion
that was previously interrupted with a "MC_GroupInterrupt" job. The kinematics motion can
also be continued if the kinematics has not yet come to a standstill following the
"MC_GroupInterrupt" job.
The "MC_GroupContinue" job only has an effect if the kinematics technology object is in
"Interrupted" status (<TO>.StatusWord.X17).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2213

Control de movimiento
6.1 Using S7-1500 Motion Control

Stopping of kinematics motions
With the Motion Control instruction "MC_GroupStop", you stop the Motion Control of the
kinematics technology object. In so doing, both the active motion job as well as all queued jobs
in the job sequence are canceled and the job sequence is emptied. If the kinematics motion was
already interrupted with an "MC_GroupInterrupt" job, this job is also canceled. As long as the
"Execute" parameter is set to TRUE, the following kinematics jobs are rejected
("ErrorID" = 16#80CD).
With the "Mode" parameter, you specify the dynamic behavior. The kinematics can be stopped
either with the dynamics of the motion job to be stopped or with the maximum dynamics. The
current path is not exited when the kinematics is stopped.

Motion preparation using multiple jobs
Preliminary motion preparation
With technology version V5.0, the calculation of the motion preparation has changed. The
motion preparation is calculated in the organization block (OB) MC-LookAhead [OB97] and no
longer in the OB MC‑Interpolator [OB92].
With the OB MC‑LookAhead [OB97], all jobs from the job sequence are prepared in advance.
The dynamic values for path motions and orientation motions are transferred to the job
sequence. The dynamic values are only active when the job is executed.
For motion preparation, the current path motion job and the subsequent path motion jobs must
be taken into account to allow for blending of path motions. Path motions that you use with
blending are first processed in the OB MC-LookAhead[OB97] and then active in the OB MCInterpolator[OB92]. Motions with blending require a longer lead time and a longer reaction time.
You can change the velocity override during a path motion, which immediately changes the
dynamics of the path motion.
In the OB MC‑Interpolator [OB92], less time is needed for motion preparation and you can set
a shorter application cycle of the OB MC‑Servo [OB91].

Connection of multiple kinematics motions with geometric transitions
Multiple motions can be appended to one another, in which case the kinematics comes to a
standstill between the individual motions. To achieve an uninterrupted motion control, the
individual motions can be blended with geometric transitions. You define the corresponding
parameters at the new motion job (A2), into which the previous job (A1) is to be blended.

2214

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Transitions of linear motions
With the Motion Control instructions "MC_MoveLinearAbsolute" and
"MC_MoveLinearRelative", you move a kinematics system with a linear motion. You define the
motion transition mode with the "BufferMode" parameter and the rounding clearance with the
"TransitionParameter[1]" parameter. The following table shows how these parameters act on
the motion transition based on two linear motions:
Rounding clearance
("TransitionParame‐
ter[1]")

Motion transition ("BufferMode")

Description

Not relevant

"BufferMode" = 1

Append motion
The active linear motion is completed and
the kinematics comes to a standstill. The
next linear motion is then executed.

%

$

$

d > 0.0

$

&

Blend motion

"BufferMode" = 2, 5
G

When the rounding clearance distance from
the target position is reached, the active li‐
near motion is blended with the next linear
motion.

G

%

$

$

d = 0.0



Both motion jobs are blended at the lower
velocity when "BufferMode" = 2 and at the
higher velocity when "BufferMode" = 5.



$

&

"BufferMode" = 2, 5

Blend motion
G 

Because the rounding clearance is 0.0, tra‐
versing is the same as when "BufferMo‐
de" = 1.

G 
%

$

$

d < 0.0

The active linear motion is completed and
the kinematics comes to a standstill. The
next linear motion is then executed.



$

&

"BufferMode" = 2, 5

G 

/ 



%

G

/

Blend motion



/

/

$

$
$

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

/!/


&

Because the rounding clearance is negati‐
ve, the maximum rounding clearance is
used. When the rounding clearance distan‐
ce from the target position is reached, the
active linear motion is blended with the next
linear motion.
Both motion jobs are blended at the lower
velocity when "BufferMode" = 2 and at the
higher velocity when "BufferMode" = 5.

2215

Control de movimiento
6.1 Using S7-1500 Motion Control

Transitions of circular motions
With the Motion Control instructions "MC_MoveCircularAbsolute" and
"MC_MoveCircularRelative", you move a kinematics system with a circular motion. You define
the motion transition mode with the "BufferMode" parameter and the rounding clearance with
the "TransitionParameter[1]" parameter. The following table shows how these parameters act
on the motion transition based on a linear motion and a circular motion:
Rounding clearance
("TransitionParame‐
ter[1]")

Motion transition ("BufferMode")

Description

Not relevant

"BufferMode" = 1

Append motion
The active linear motion is completed and
the kinematics comes to a standstill. The
circular motion is then executed.

%

$

$

$

&

d > 0.0

Blend motion

"BufferMode" = 2, 5
G

$
$

%

G

$

When the rounding clearance distance from
the target position is reached, the active li‐
near motion is blended with the circular mo‐
tion.
Both motion jobs are blended at the lower
velocity when "BufferMode" = 2 and at the
higher velocity when "BufferMode" = 5.

&

2216

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Rounding clearance
("TransitionParame‐
ter[1]")

Motion transition ("BufferMode")

Description

d = 0.0

"BufferMode" = 2, 5

Blend motion
G 

Because the rounding clearance is 0.0, tra‐
versing is the same as when "BufferMo‐
de" = 1.

G 
%

$

The active linear motion is completed and
the kinematics comes to a standstill. The
circular motion is then executed.

$

$

&

d < 0.0

"BufferMode" = 2, 5
/

Blend motion
/
G 



Because the rounding clearance is negati‐
ve, the maximum rounding clearance is
used. When the rounding clearance distan‐
ce from the target position is reached, the
active linear motion is blended with the cir‐
cular motion.

%

/
G 


$

$

$

/

Both motion jobs are blended at the lower
velocity when "BufferMode" = 2 and at the
higher velocity when "BufferMode" = 5.

/!/
&

Transitions of synchronous "point-to-point" motion
With the Motion Control instructions "MC_MoveDirectAbsolute" and "MC_MoveDirectRelative"
you move a kinematics with a synchronous point-to-point motion (sPTP motion). You define the
motion transition mode with the "BufferMode" parameter and the rounding clearance with the
"TransitionParameter[1]" parameter.
The kinematics motion of the sPTP motion is displayed as an example. The motion of the
kinematics results from off the joint position of the individual axes and the dynamics of the
motion job.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2217

Control de movimiento
6.1 Using S7-1500 Motion Control
The following table shows how these parameters act on the motion transition based on linear
motions and sPTP motions:
Rounding clearance
("TransitionParame‐
ter[1]")

Motion transition ("BufferMode")

Description

Not relevant

"BufferMode" = 1

Append motion

$

$

The active linear motion is completed and
the kinematics comes to a standstill. The
sPTP motion is then executed.

%

$

&

d > 0.0

"BufferMode" = 2, 5

Blending motion
When the rounding clearance distance from
the target position is reached, the active li‐
near motion is blended with the sPTP mo‐
tion.

G
$

$

%

G

Both motion jobs are blended at the lower
velocity when "BufferMode" = 2 and at the
higher velocity when "BufferMode" = 5.

$

&

2218

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Rounding clearance
("TransitionParame‐
ter[1]")

Motion transition ("BufferMode")

Description

d = 0.0

"BufferMode" = 2, 5

Blending motion
G 

$

$

%

G 

$

Because the rounding clearance is 0.0, tra‐
versing is the same as when "BufferMo‐
de" = 1.
The active sPTP motion is completed and
the kinematics come to a standstill. An
sPTP motion is then executed.

&

d < 0.0

"BufferMode" = 2, 5

Blending motion
Because the rounding clearance is negati‐
ve, the maximum rounding clearance is
used. When the distance to the target posi‐
tion is reached, the running sPTP motion is
blended with another sPTP motion.

/
G /

$

%

/!/

G /

$

$

/

Both motion jobs are blended at the lower
velocity when "BufferMode" = 2 and at the
higher velocity when "BufferMode" = 5.

&

To enable constant rounding between sPTP motion and path motions, note the following:
● Set a sufficiently large rounding clearance.
● Avoid small curvature radii in the resulting contour of the TCP.
● Set the dynamic response of the path motion and the sPTP motion similarly.
● Set the dynamic adaptation for the path motion.
● Set factors < 1.0 for the dynamic response of the sPTP motion.
For more information on rounding sPTP motion, refer to the FAQ entry 109771154 (https://
support.industry.siemens.com/cs/ww/en/view/109771154) in the Siemens Industry Online
Support.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2219

Control de movimiento
6.1 Using S7-1500 Motion Control

Maximum rounding clearance
The maximum rounding clearance is used if the value of the "TransitionParameter[1]"
parameter is < 0.0. The maximum rounding clearance is calculated as half the shorter path
distance of the two motions.
Requirement

Maximum rounding clearance

L1 > L2

dmax = ½ · L2

L1 < L2

dmax = ½ · L1

L1 Path length of the first job
L2 Path length of the second job

Dynamic behavior when motions are appended/blended
You define the dynamic behavior for the transition of kinematics motions with the "BufferMode"
and "DynamicAdaption" parameters.
Multiple motions can be appended to one another, in which case the kinematics comes to a
standstill between the individual motions ("BufferMode" = 1). To achieve an uninterrupted
motion, the individual motions can be blended with a blending segment. The consecutive
motions can be blended at the lower velocity ("BufferMode" = 2) or at the higher velocity
("BufferMode" = 5).

Dynamic adaptation
For active dynamic adaptation with segmentation, the path including the blending segment is
subdivided into additional segments ("DynamicAdaption" = 1). For each of these segments, the
velocity profile is calculated taking into consideration the dynamic limits of the axes which apply
for individual sections of the motion. The dynamic response is therefore adapted for individual
sections of a motion.
With active dynamic adaptation without segmentation of the path, the velocity profile is
calculated taking into consideration the dynamic limits of the axes which apply for the entire
motion ("DynamicAdaption" = 2).
Velocity and acceleration are included in the dynamic adaptation. Tangential and radial
acceleration of the path is taken into account in acceleration. The jerk is not limited for dynamic
adaptation.
If the dynamic adaptation is deactivated, the dynamic limits of the axes are not taken into
account ("DynamicAdaption" = 0).

Interaction of kinematics motions and single axis motions
Kinematics motions are only possible if no single axis motions are active on the kinematics
axes. Single axis motions have an overriding effect on kinematics motions. The motion of the
corresponding axis is overridden by the single-axis motion and the job sequence is cleared.
The other kinematics axes stop with the maximum dynamics.

2220

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
The following functions are permitted during an active kinematics motion:
● Torque reduction on the axes/Travel to fixed stop ("MC_TorqueLimiting")
When the fixed stop is reached, the kinematics motion is aborted.
● Setting of an additive torque ("MC_TorqueAdditive")
● Setting of the upper and lower torque limit ("MC_TorqueRange")
● Sensor switchover ("MC_SetSensor")
The following functions are rejected during an active kinematics motion:
● Overlaid motion on the axes ("MC_MoveSuperimposed")
● Homing of the axes ("MC_Home")

6.1.5.6

Commissioning

Function and structure of the kinematics control panel
With the kinematics control panel, you assume master control for a kinematics technology
object and control the motions of the kinematics or the individual axes.
ADVERTENCIA
Uncontrolled axis motions
During operation with the kinematics control panel, the kinematics can execute uncontrolled
motions (e.g. due to incorrect configuration of the drive or technology object). In addition,
when a leading axis is moved with the kinematics control panel, any synchronized following
axis is also moved.
Therefore, take the following protective measures before operation with the kinematics control
panel:
● Ensure that the EMERGENCY OFF switch is within the reach of the operator.
● Enable the hardware limit switches.
● Enable the software limit switches.
● Ensure that following error monitoring is enabled.
● Make sure that no following axis is coupled to the axis to be moved.
Nota
Dynamic adaptation in the kinematics control panel
The dynamic adaptation is not active in the kinematics control panel. The dynamic limits of the
kinematics axes are not taken into account during a kinematics motion with the kinematics
control panel.
You can find kinematics control panel of the kinematics technology object in the project tree
under "Technology object > Commissioning".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2221

Control de movimiento
6.1 Using S7-1500 Motion Control
The kinematics control panel is divided into the following areas:
● Master control
● Kinematics
● Operating mode
● Control
● Status
● Current position values

2222

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Elements of the kinematics control panel
The following table shows the elements of the kinematics control panel:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2223

Control de movimiento
6.1 Using S7-1500 Motion Control

Area
Master control

Element

Description
In the "Master control" area, you assume master control for the technology object or
return it to your user program.

"Activate" button With the "Activate" button, you establish an online connection to the CPU and take over
master control for the selected technology object.
● To take over master control, the technology object must be disabled in the user
program.
● With the takeover of the master control of the kinematics, the master control of all
axes interconnected with the kinematics is taken over.
The master control can only be assumed with a kinematics control panel if axis
control panel of the interconnected axes is active.
● Any synchronized following axis is moved as well when a leading axis is moved with
the kinematics control panel.
● When you click the "Activate" button, a warning message is displayed. In the
warning, you can adapt the sign-of-life monitoring (100 to 60000 ms).
If the master control of the kinematics control panel is lost repeatedly without a direct
error message, the online connection to the CPU may be impaired because the
communication load is too high. In this case, the following message is entered in the
alarm display log: "Commissioning error. Sign-of-life failure between controller and
TIA Portal".
To eliminate this error, adapt the sign-of-life monitoring in the warning.
● Until master control is returned, the user program has no influence on the functions
of the technology object. Motion Control jobs from the user program to the
technology object are rejected with error ("ErrorID" = 16#8012: Kinematics control
panel enabled).
● When master control is taken over, the configuration of the technology object is
taken over. Changes to the configuration of the technology object do not take effect
until master control has been returned. Therefore, make any necessary changes
before the takeover of master control.
● If master control has been taken over for the technology object, the kinematics
control panel and the axis control panels of the interconnected axes are blocked for
access by another instance of the TIA Portal (Team Engineering as of CPU V1.5).
● If the online connection to the CPU is lost during operation with the kinematics
control panel, the kinematics or axis will be stopped at maximum deceleration after
expiration of the sign of life monitoring. In this case, an error message is displayed
("ErrorID" = 16#8013) and the master control is passed back to the user program.
● If the kinematics control panel is covered by a dialog, e.g. "Save As", during its
operation, the kinematics or axis is stopped at maximum deceleration and the
master control is returned to the user program.
If you change to another window within the TIA Portal, e.g. to the project tree, during
operation with the kinematics control panel, the master control and motion of the
kinematics or axis is maintained, provided that the kinematics control panel is
embedded in the TIA Portal. If the kinematics control panel is replaced by the
TIA Portal and you change to another window within the TIA Portal, e.g. to the
project tree, the master control is retained but the kinematics or axis is stopped at
maximum deceleration.
If you change to another window outside the TIA Portal during operation with the
kinematics control panel, the master control is retained but the kinematics or axis is
stopped at maximum deceleration.

2224

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Area

Element

Description

"Deactivate" but‐ With the "Deactivate" button, you return master control to your user program.
ton
Kinematics

Operating mode

In the "Kinematics" area, you enable or disable the technology object.
"Enable" button

With the "Enable" button, you release the interconnected axes of the selected kinema‐
tics technology object.

"Disable" button

With the "Disable" button, you disable the interconnected axes of the selected kine‐
matics technology object.
Select the desired operating mode of the kinematics control panel in the "Operating
mode" drop-down list.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2225

Control de movimiento
6.1 Using S7-1500 Motion Control
Area

Element

Control

Description
The "Control" area displays the parameters for traversing with the kinematics control
panel according to the selected operating mode.

Coordinate
system

In the "Coordinate system" drop-down list, you select the desired coordinate system in
which the kinematics will be moved.
("Jog" and "Jog to target position" modes only)

Active tool

Select the required tool from the "Active tool" drop-down list.

"Customize
dynamics"
check box

If you select the check box, you can edit the values for acceleration, deceleration and
jerk.

Acceleration

Acceleration at which the kinematics is moved dependent on the kinematics type in x,
y and z direction and orientation.

("Jog" and "Jog to target position" modes only)

Preassignment: 10% of the default value
You can only edit the values if the "Customize dynamics" check box is selected.
("Jog" and "Jog to target position" modes only)
Deceleration

Deceleration at which the kinematics is moved dependent on the kinematics type in x,
y and z direction and orientation.
Preassignment: 100% of default value
You can only edit the values if the "Customize dynamics" check box is selected.
("Jog" and "Jog to target position" modes only)

Jerk

Jerk at which the kinematics is moved dependent on the kinematics type in x, y and z
direction and orientation.
Preassignment: 100% of default value
You can only edit the values if the "Customize dynamics" check box is selected.
("Jog" and "Jog to target position" modes only)

Velocity

Velocity at which the kinematics is moved dependent on the kinematics type in x, y and
z direction and orientation.
Preassignment: 10% of the default value
You use the slider to adjust the velocity as a percentage between 0% and 200% of the
set velocity values. Alternatively, enter a velocity value in the field to the right of the
slider. (Default value 100%).
("Jog" and "Jog to target position" modes only)

Target position

Position to which the kinematics or axis is moved.
("Jog to target position" and "Single axes: Set home position" mode only)
Position at which the home position is set.
("Single axes: Set home position" mode only)

"Set" button

With the "Set" button, you set a home position.
("Single axes: Set home position" mode only)

"Start" button

With the "Start" button, you start a motion according to the selected operating mode.
("Jog to target position" and "Single axes: Homing" mode only)

"Forward" button With the "Forward" button, you start a motion in the positive direction according to the
selected operating mode.
"Backward" but‐
ton

2226

With the "Backward" button, you start a motion in the negative direction according to the
selected operating mode.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Area

Element

Status

Description
The "Axis status" area displays the status of the axis and the status of the drive.

Valid

The kinematic transformation is valid.
The status of the kinematic transformation is displayed in "Technology object Kinema‐
tics > Diagnostics", in the "Status and error bits" diagnostics window.

Enabled

The technology object has been enabled. The axis can be moved with motion jobs.

Homed

The technology object is homed.

Error

An error occurred at the technology object.
Error messages are displayed in the Inspector window under "Diagnostics > Alarm
display".

Current position
values

The "Current position values" area shows the actual values of the axis.
Coordinate
system

Coordinate system in which the kinematics or an axis is currently being moved.

x position

The current position and rotation of the tool center point in the set coordinate system.

In the drop-down list on the right, you can select an additional coordinate system in
order to display the actual position of the active tool in this coordinate system.

y position
z position
Rotation A

Nota
No transfer of the parameters
The configured parameter values are discarded when master control is returned. If necessary,
transfer the values to your configuration.
If you have changed configuration values during operation with the kinematics control panel,
these changes have no effect on the operation of the kinematics control panel.

Operating mode
The following table shows the operating modes of the kinematics control panel:
Operating mode

Description

Jog

With the "Forward" button, you move an axis by jogging in the positive direction. With the "Backward"
button, you move an axis by jogging in the negative direction. The respective axis moves as long as
you keep the "Forward" or "Backward" button pressed.

Jog to target position

With the "Start" button, you move the kinematics or an axis by jogging to the position specified under
"Target position". The motion direction of the Cartesian orientation is not limited to the positive
direction here. The orientation axis is moved with the "Shortest distance" mode.
The kinematics moves as long as you keep the "Start" button pressed. When the target position is
reached, the kinematics stops automatically.
The specified position relates to the coordinate system that is selected in the "Coordinate system"
drop-down list.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2227

Control de movimiento
6.1 Using S7-1500 Motion Control
Operating mode

Description

Single axes: Set home
position

With the "Set" button, you set the home position of the respective axis to the value specified under
"Target position". The "Homed" status is set for the corresponding axis.
The specified position relates to the machine coordinate system (MCS) that is preset in the "Coor‐
dinate system" drop-down list with this operating mode.
This function corresponds to direct homing (absolute).
Homing is not possible with an absolute encoder. The technology object is not referenced when this
mode is used with an absolute encoder.

Single axes: Homing

With the "Start" button, you move an axis by jogging to the predefined home position. The respective
axis moves as long as you keep the "Start" button pressed. When the home position is reached, the
axis stops automatically.

Using the kinematics control panel
With the kinematics control panel, you assume master control for a kinematics technology
object and control the motions of the kinematics or the individual axes.

Requirement
● The project is created and downloaded to the CPU.
● The CPU is in RUN operating state.
● The interconnected axes of the kinematics are disabled by your user program
("MC_Power.Enable" = FALSE).
● The kinematics control panel for the technology object is not being used by another instance
of the TIA Portal (Team Engineering as of CPU V1.5).
● The drives are ready.

Procedure
To control the kinematics or the kinematics axes with the kinematics control panel, follow these
steps:
1. To assume master control for the technology object and to establish an online connection
to the CPU, click the "Activate" button in the "Master control" area.
A warning message is displayed.
2. If necessary, adapt the sign-of-life monitoring and click "OK".
3. To enable the technology object, click the "Enable" button in the "Kinematics" area.
4. In the drop-down list in the "Operating mode" area, select the desired function of the
kinematics control panel.
5. Select the reference coordinate system depending on the set operating mode in the
"Control" area in the "Coordinate system" drop-down list.
6. In the "Control" area, specify the appropriate parameter values for your job.
7. Depending on the set operating mode, click the "Set", "Start", "Forward" or "Backward"
button to start the job.
8. Repeat steps 4 through 7 for additional jobs.

2228

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
9. To disable the technology object, click the "Disable" button in the "Axis" area.
10.To return master control to your user program, click the "Deactivate" button in the "Master
control" area.

6.1.5.7

Diagnostics
The "Diagnostics" section is limited to describing the diagnostics view of the Kinematics
technology object in the TIA Portal.
The description of the diagnostics concept for Motion Control can be found in the "Diagnostics
concept" section of the "S7-1500/S7-1500T Motion Control overview" documentation (https://
support.industry.siemens.com/cs/ww/en/view/109766459).
A comprehensive description of the system diagnostics of the S7‑1500 CPU can be found in the
"Diagnostics" function manual (https://support.automation.siemens.com/WW/view/en/
59192926).

Kinematics technology object
Structure of the diagnostics
The diagnostics of the kinematics in "Technology object > Diagnostics" is divided into the
following areas:
● Graphic display
The graphic display shows the kinematics, the motion of the tool center point (TCP) and the
zones.
Nota
You set the scaling of the kinematics in the kinematics trace under "Technology object >
Configuration > Geometry (Página 2192)".
● Diagnostics window
The following diagnostics windows are available in the graphic display:
– Status and error bits (Página 2231)
– Zones status (Página 2233)
– Motion and Tools (Página 2234)
– Positions (Página 2236)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2229

Control de movimiento
6.1 Using S7-1500 Motion Control

Toolbar
The toolbar at the top of the graphical display provides you with buttons for the following
functions:
Button

Function

Description

Monitor all

Switches the live display of the kinematics on or off.
The kinematics trace establishes an online connection to the device. If
the online/offline trace configurations differ, the trace configuration is
loaded to the device.

Darker

Changes the brightness of the graphic display according to your needs

Select brightness
Lighter
Show 2D view

Switches the view to the 2D view.

Show 3D view

Switches the view to the 3D view.

Focus TCP

Switches the view to "Focus TCP"
During the path motion of the kinematics, the focus is always on the
TCP. In standstill, the view can be moved or rotated using the mouse.

Fit to screen size

Centers the view and displays the entire kinematics.

Show coordinate system

Shows or hides the selected coordinate system with grid lines.

Select coordinate system

Select a coordinate system.

Show xz plane

Shows the xz plane

Show xz plane rotated

Shows the xz plane rotated around the z axis.

Show yz plane

Shows the yz plane

Show yz plane rotated

Shows the yz plane rotated around the z axis.

Show xy plane

Shows the xy plane

Show xy plane rotated

Shows the xy plane rotated around the z axis.

Show model

If you click on the arrow, the graphical view options of the kinematics are
shown.
If you click on the symbol, you change the graphical view of the kine‐
matics.

2230

Show kinematics

Shows the kinematics.

Display simplified model

Shows a simplified view of the kinematics.

Hide model

Hides the view of the kinematics.

Highlight TCS

Shows or hides the tool coordinate system (TCS).

Show/hide all zones

Shows or hides all workspace zones and kinematics zones.

Status and error bits

Shows or hides the diagnostics window "Status and error bits".

Zones status

Shows or hides the diagnostics window "Status Zones".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Button

Function

Description

Motion and tools

Shows or hides the diagnostics window "Motion and Tools".

Positions

Shows or hides the diagnostics window "Positions".

Operation of the graphic display
In the graphic display you have the following possible operations with the mouse:
● Rotate and zoom the coordinate system with displayed kinematics
● Display, hide and move the diagnostics window
If you change the scaling of the graphical display, the diagnostics windows keep their
position.

Status and error bits
With the diagnostics window "Status and error bits" in "Technology object > Diagnostics" you
monitor the status and error messages of the technology object in the TIA portal. The diagnostic
function is available in online operation.
The diagnostics window "Status and error bits" is shown in the graphic display of the
diagnostics. You can show the diagnostics window via the symbol
of the toolbar and move
the window to a desired position within the graphic display.
The meaning of the status and error messages is described in the following tables. The
associated technology object tag is given in parentheses.

"Kinematics status"
The following table shows the possible statuses of the kinematics:
Status

Description

Error

An error occurred at the technology object. Detailed information about the
error is available in the "Error" area and in the "<TO>.ErrorDetail.Number"
and "<TO>.ErrorDetail.Reaction" tags of the technology object.
(<TO>.StatusWord.X1 (Error))

Restart active

The technology object is being reinitialized.
(<TO>.StatusWord.X2 (RestartActive))

Kinematics control pa‐
nel active

The kinematics control panel is activated. The kinematics control panel has
master control over the technology object. The kinematics cannot be contro‐
lled from the user program.
(<TO>.StatusWord.X4 (ControlPanelActive))

Restart required

Data relevant for the restart has been changed. The changes are applied only
after a restart of the technology object.
(<TO>.StatusWord.X3 (OnlineStartValuesChanged))

Valid

Displays the status of the kinematic transformation.
The status of the kinematic transformation is displayed in "Technology object
Kinematics > Diagnostics" in the "Status and error bits" diagnostics window.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2231

Control de movimiento
6.1 Using S7-1500 Motion Control

"Error"
The following table shows the possible errors:
Error

Description

System

A system-internal error has occurred.
(<TO>.ErrorWord.X0 (SystemFault))

Configuration

A configuration error has occurred.
One or more configuration parameters are inconsistent or invalid.
The technology object was incorrectly configured, or editable configuration
data was incorrectly modified during runtime of the user program.
(<TO>.ErrorWord.X1 (ConfigFault))

Transformation

A transformation error has occurred.
(<TO>.ErrorWord.X4 (TransformationFault))

User program

An error in user program at a Motion Control instruction or its use occurred.
(<TO>.ErrorWord.X2 (UserFault))

Job rejected

A job cannot be executed.
A Motion Control instruction cannot be executed because necessary requi‐
rements have not been met (e.g. technology object not homed).
(<TO>.ErrorWord.X3 (CommandNotAccepted))

Dynamic limitation

The dynamic values are restricted to the dynamic limits.
(<TO>.ErrorWord.X6 (DynamicError))

"Warnings"
The following table shows the possible warnings:
Warning

Description

Configuration

One or more configuration parameters are being internally adapted tempo‐
rarily.
(<TO>.WarningWord.X1 (ConfigWarning))

Job rejected

A job cannot be executed.
A Motion Control instruction cannot be executed because the necessary re‐
quirements are not met.
(<TO>.WarningWord.X3 (CommandNotAccepted))

Dynamic limitation

The dynamic values are restricted to the dynamic limits.
(<TO>.WarningWord.X6 (DynamicWarning))

"Motion status"
The following table shows the possible statuses of the kinematics motion:
Status

Description

Done (no job running)

No motion job is active for the technology object.
(<TO>.StatusWord.X6 (Done))

Linear motion active

A linear motion job is active for the technology object.
(<TO>.StatusWord.X8 (LinearCommand))

2232

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Status

Description

Circular motion active

A circular motion job is active for the technology object.
(<TO>.StatusWord.X9 (CircularCommand))

sPTP motion active

A synchronous point-to-point motion job is active at the technology object.
(<TO>.StatusWord.X11 (DirectCommand))

Constant velocity

The kinematics is being moved at constant velocity or is at a standstill.
(<TO>.StatusWord.X12 (ConstantVelocity))

Accelerating

The kinematics is being accelerated.
(<TO>.StatusWord.X13 (Accelerating))

Decelerating

The kinematics is being decelerated.
(<TO>.StatusWord.X14 (Decelerating))

Motion interrupted

The active kinematics motion is interrupted by an "MC_GroupInterrupt" com‐
mand .
(<TO>.StatusWord.X17 (Interrupted))

Orientation movement
active

An orientation motion is active for the technology object.
(<TO>.StatusWord.X15 (OrientationMotion))

Consulte también
"StatusWord" tag (kinematics) (Página 2283)
"ErrorWord" tag (kinematics) (Página 2286)
"WarningWord" tag (kinematics) (Página 2288)

Zones status
Using the diagnostics windows "Status Zones" in "Technology object > Diagnostics", you
monitor the status and error messages of the technology object in the TIA portal. The diagnostic
function is available in online operation.
The diagnostics window "Zones Status" is displayed in the graphic display of the diagnostics.
You can show the diagnostics window via the symbol
of the toolbar and move the window
to a desired position within the graphic display.
The meaning of the status and error messages is described in the following tables. The
associated technology object tag is given in parentheses.

"Zones status"
The "Workspace zones" and "Kinematics zones" tables show the status of the individual zones.
The following symbols are displayed for this purpose:
Symbol

Description
The zone is invalid.
The zone is inactive.
The zone is active.
The zone was violated.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2233

Control de movimiento
6.1 Using S7-1500 Motion Control
You can show and hide all active zones via the Symbol
of the toolbar in the graphic display
of the diagnostics. In addition, you can display and hide the zones via the corresponding symbol
.

Consulte también
Structure of the diagnostics (Página 2229)

Motion and tools
You monitor the path motions and the tools of the technology object in the TIA portal using the
diagnostics window "Motion and Tools" in "Technology object > Diagnostics". The diagnostics
function is available in online operation.
The diagnostics window "Motion and Tools" is shown in the graphic display of the diagnostics.
You can show the diagnostics window via the symbol
of the toolbar and move the window
to a desired position within the graphic display.

"Motion and Tools"
The following table describes the meaning of the parameters of the motions and tools:
Status

Description

Dynamic values of the
kinematics
Limit path dynamics
to axis dynamics

Display of dynamic values with or without configured dynamic adaptation.

Velocity

Path velocity
(<TO>.StatusPath.Velocity)

Acceleration

Path acceleration
(<TO>.StatusPath.Acceleration)

Override

Percentage correction of the velocity specification
The setpoint velocity set in Motion Control instructions or from the kinematics
control panel is superimposed with an override signal and corrected as a
percentage. Values from 0.0% to 200.0% are permissible for the velocity
correction.
(<TO>.Override.Velocity)

Job sequence
Job in the job sequen‐ Current number of jobs for the kinematics technology object in the job se‐
ce
quence.
(<TO>.StatusMotionQueue.NumberOfCommands)
Active tool
Active tool

Current selected tool

Tool center point (TCP)

2234

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Status
Tool center point in
the FCS
x position

Description
In the "Tool center point in the FCS", the values of the current tool frames are
displayed in the flange coordinate system (FCS).
x coordinate
(<TO>.StatusTool.Frame[1].x)

y position

y coordinate
(<TO>.StatusTool.Frame[1].y)

z position

z coordinate
(<TO>.StatusTool.Frame[1].z)

Rotation A

A coordinate
(<TO>.StatusTool.Frame[1].a)

Conveyor tracking
OCS1 … 3
Coupled techno‐
logy object

Actively coupled OCS1, 2 or 3
Technology object for active conveyor tracking
Leading-value-capable technology objects are:
● Positioning axis
● Synchronous axis
● External encoder
● Leading axis proxy
(<TO>.StatusConveyor.ConveyorBelt)

Conveyor position

Conveyor position of the technology object
(<TO>.StatusConveyor.BeltPosition)

OCS x position

Position of the OCS in x direction on the conveyor
(<TO>.StatusConveyor.ObjectPosition)

OCS status

Conveyor tracking status
(<TO>.StatusConveyor.TrackingState)
OCS not assigned

No OCS is assigned to a leading-value-capable tech‐
nology object.
(<TO>.StatusConveyor[1..3].TrackingState = 0)

OCS assigned

The OSC is assigned to a leading-value-capable tech‐
nology object. The kinematics is waiting for the next
path motion job to the OCS.
(<TO>.StatusConveyor[1..3].TrackingState = 1)

TCP approaches
OCS

The OSC is assigned to a leading-value-capable tech‐
nology object. The position specified in the OCS is ap‐
proached with the current path motion job of the kine‐
matics.
(<TO>.StatusConveyor[1..3].TrackingState = 2)

TCP follows OCS

The OSC is assigned to a leading-value-capable tech‐
nology object.
The position of the OCS is reached. The kinematics is
moved with the position of the OCS.
(<TO>.StatusConveyor[1..3].TrackingState = 3)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2235

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Structure of the diagnostics (Página 2229)

Positions
You monitor the position values of the technology object in the TIA Portal using the diagnostics
window "Positions" in "Technology object > Diagnostics". The diagnostic function is available
in online operation.
The diagnostics window "Positions" is shown in the graphical display of the diagnostics. You
can show the diagnostics window via the symbol
of the toolbar and move the window to a
desired position within the graphic display.

"Positions"
The following table describes the meaning of the position information:
Status

Description

World coordinate
system
Coordinate system

Reference coordinate system
The world coordinate system (WCS) is preset in this field.

x position

x coordinate of the TCP in the WCS
(<TO>.TcpInWcs.x.Position)

y position

y coordinate of the TCP in the WCS
(<TO>.TcpInWcs.y.Position)

z position

z coordinate of the TCP in the WCS
(<TO>.TcpInWcs.z.Position)

Rotation A

A coordinate of the TCP in the WCS
(<TO>.TcpInWcs.a.Position)

Coordinate system

Reference coordinate system
In the drop-down list you can select an additional coordinate system in order
to display the actual position of the active tool in this coordinate system.

x position

x coordinate of the active tool in the set coordinate system.

y position

y coordinate of the active tool in the set coordinate system.

z position

z coordinate of the active tool in the set coordinate system.

Rotation A

A coordinate of the active tool in the set coordinate system.

Machine coordinate
system
A1

Axis A1

A2

Axis A2

A3

Axis A3

A4

Axis A4

Consulte también
Structure of the diagnostics (Página 2229)

2236

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

6.1.5.8

Kinematics trace
The kinematics trace offers the following functions:
● 3D visualization of the current motion of the tool center point (TCP) and the three object
coordinate systems (OCS)
● Recording, playing and saving kinematic motions
● Exporting and importing the recordings
You can find the kinematics trace of the kinematics technology object in the project tree under
"Technology object > Kinematics trace".
The kinematics trace is divided into two views:
● Configuration (Página 2237)
● 3D visualization (Página 2239)

Consulte también
Graphic display and toolbar (Página 2239)
Recording and playing kinematics motions (Página 2242)
List of recordings (Página 2241)

Configuration
You specify the parameter values for the recording under "Technology object > Kinematics
trace > Configuration"

Sampling
The following table shows you the configuration options for the duration of a recording:
Parameter

Description

Time of recording

In this drop-down list, select the desired recording time between the
following OBs:
● MC-Servo
● MC-Interpolator

Record every

In this drop-down list, select the desired value for the recording interval.
For the MC-Servo you have the following options via a drop-down list:
● Specification in cycles
● Specification in seconds

Max. recording duration

This field shows the calculated value of the maximum recording time.
If you change the recording interval in the field "Record all", the maxi‐
mum recording time changes.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2237

Control de movimiento
6.1 Using S7-1500 Motion Control
Parameter

Description

Use maximum recording du‐
ration

If you activate this check box, the recording duration will be set to the
maximum possible recording duration.

Recording duration (a)

In this drop-down list, select the desired type of recording duration dis‐
play for the recording:
● In seconds
● Number of measuring points

Trigger
The following table shows you the configuration options for starting a recording:
Parameter
Trigger mode

Description
In this drop-down list, select the desired trigger mode for your recording:
● Record now
The recording starts immediately after the configuration is loaded.
● Trigger on tag
The system waits for a trigger event that triggers the recording.

Trigger tag

In this field, select a tag of the data type "BOOL" as trigger tag.

Event

In this drop-down list, select the desired trigger event to be used as
trigger event:
● Positive edge
● Falling edge

Pre-trigger

In this drop down list, select a suitable pre-trigger for your recording:
● In seconds
● Number of measuring points
The "pre-trigger" is used to record measuring points already before the
beginning of the trigger event. As soon as the trigger event occurs, the
recording is displayed in the graphical view.

Traces
The following table shows you the configuration options for a recording a trace:
Parameter

Description

Tool center point (TCP) and
kinematics

If you activate this option, the coordinates of the TCP will be recorded.
You can follow the motions of the kinematics and the single-axis mo‐
tions in the graphical view.

Tool center point (TCP)

If you activate this option, the coordinates of the TCP will be recorded.
The motions of the kinematics and the single-axis motions are not dis‐
played.

OCS 1

Select the object coordinate systems (OCS) to be recorded.

OCS 2
OCS 3

2238

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Nota
Recording multiple traces
The more traces you record, the lower the maximum recording duration and the number of
measuring points per trace.

3D visualization
Graphic display and toolbar
The traversing of the kinematics, the tool center point (TCP) and the object coordinate systems
(OCS) are displayed graphically under "Technology object > Kinematics Trace > 3D
Visualization".
The 3D visualization is divided into the following areas:
● Graphic display with toolbar
● Toolbar for playing recordings (Página 2241)
● List of recordings (Página 2241)
In the graphic display, you can record up to four traces simultaneously:
● TCP
● OCS 1
● OCS 2
● OCS 3
Nota
You set the scaling of the kinematics in the kinematics trace under "Technology object >
Configuration > Geometry (Página 2192)".

Toolbar
The toolbar of the kinematics trace provides you with buttons for the following functions:
Button

Function

Description

Monitoring On/Off

Starts monitoring the kinematics trace.
The kinematics trace establishes an online con‐
nection to the device. If the online and offline trace
configurations differ, the trace configuration is loa‐
ded into the device.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Start recording

Starts the recording (Página 2242) of the kinema‐
tics trace.

Stop recording

Finished the record of the kinematics trace.

2239

Control de movimiento
6.1 Using S7-1500 Motion Control
Button

Function

Description

Import recording from file

Imports a selected recording (Página 2244) from a
selected file folder.

Export selected recording to
file

Exports a selected recording (Página 2244) into a
selected file folder.

Add selected recording to
measurements

Adds a selected recording of the measurements
under "Trace".

The toolbar at the top of the graphical display provides you with buttons for the following
functions:
Button

Function

Description

Switch to live display

Switches the live display of the kinematics on or off.
With the live display you can view how the kinematics is
currently moving. This function is only available in online
mode.

Darker

Changes the brightness of the graphic display.

Select brightness
Lighter
Show 2D view

Switches the view to the 2D view.

Show 3D view

Switches the view to the 3D view.

Focus on TCP

Switches the view to "Focus TCP"
During the path motion of the kinematics, the focus is al‐
ways on the TCP. In standstill, the view can be moved or
rotated using the mouse.

Fit to screen size

Centers the view and displays the entire kinematics.

Show coordinate system

Shows or hides the selected coordinate system with grid
lines.

Select coordinate system

Select a coordinate system. Insert WOFÜR

Show xz plane

Shows the xz plane

Show xz plane rotated

Shows the xz plane rotated around the z axis.

Show yz plane

Shows the yz plane

Show yz plane rotated

Shows the yz plane rotated around the z axis.

Show xy plane

Shows the xy plane

Show xy plane rotated

Shows the xy plane rotated around the z axis.

Show model

If you click on the arrow, the graphical view options of the
kinematics are shown.
If you click on the symbol, you change the graphical view of
the kinematics.

2240

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Button

Function

Description

Show kinematics

Shows the kinematics.

Display simplified model

Shows a simplified view of the kinematics.

Hide model

Hides the view of the kinematics.

Highlight TCS

Shows or hides the tool coordinate system (TCS).

Operation of the graphic display
In the graphic display you have the following possible operations with the mouse:
● Rotate display
● Zoom display
If you position the mouse pointer to one of the traces, the following values are displayed for the
corresponding position:
● Measuring point number
● Coordinates x, y, z and A

Toolbar for playing a recording
The toolbar for playing a recording, at the bottom of the graphical display, provides the following
functions via buttons:
Button

Function

Description

Jump to start

Jumps back to the start of the selected recording.

Step backward

Jumps back step by step in the selected recording.

Play

Plays the selected recording.

Pause

Pauses the selected recording.

Stop

Pauses the selected recording at the current posi‐
tion.

Step forward

Jumps forward step-by-step in the selected recor‐
ding.

Jump to end

Jumps to the end of the selected recording.

Adjust speed

Adjusts the playback speed of the selected recor‐
ding using the speed slider.

List of recordings
If you have a recorded a recording, this is displayed in the list of recordings. The list of
recordings is displayed below the graphic display and is divided into two areas:
● Current recording
● Saved recording

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2241

Control de movimiento
6.1 Using S7-1500 Motion Control
A recording is displayed as a line in the tabular editor. If you expand a line, all traces in this
recording are displayed.
You also have the option of saving a current recording. A saved recording contains the following
data:
● Kinematics type
● Coordinates of:
– Kinematics
– Tool center point (TCP)
– Object coordinate systems (OCS)
● Valid online geometry at the time of the recording

Tools within the list of recordings
The following functions are available in the list of recordings:
Button

Function

Description

Saving a recording

Saves the current recorded recording in the tabu‐
lar editor. The recording is added to the area "Sa‐
ved recording".

Delete recording

Deletes the selected recording (Página 2243) from
the list of recordings.

Trace is hidden

The recording or the trace is hidden.
Shows the hidden recording or trace.

Traces of the recording are
shown and hidden

The traces of the recording are partially shown and
hidden.

Trace is shown

The recording or the trace is shown.
Hides the recording or trace

Consulte también
Graphic display and toolbar (Página 2239)

Recording and playing kinematics motions
For the recording, use the values set under "Technology object > Kinematics trace >
Configuration". If you have switched on the live display via the symbol
, the graphic display
shows the current position of the kinematics.

Requirements
● The kinematics trace was configured under "Technology object > Kinematics trace >
Configuration".

2242

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Record kinematics motion
To record a kinematics motion, proceed as follows:
1. To start a recording, click on the symbol
on the toolbar.
If no online connection is available at this point, it is established automatically.
2. Move the kinematics.
3. To end the recording, click on the symbol
on the toolbar.
The current recording and the configuration are kept until the "kinematics trace" has been
closed. When you start a new recording, the current recording is overwritten.

Play kinematics motion
To play a kinematics motion, proceed as follows:
1. If the live display is activated, switch off the live display by clicking the symbol

.

2. To show the trace, click on this symbol
of the corresponding recording.
The graphic display displays the complete trace of the recording.
3. To play the selected recording, click on the symbol
The selected recording is played.

at the bottom of the graphic display.

4. To adjust the playback speed, change the position of the speed slider in the toolbar for
playing a recording.
5. To pause a recording, click on the symbol
6. To stop a record, click on the symbol

in the toolbar for playing a recording.

in the toolbar for playing a recording.

Consulte también
Configuration (Página 2237)
Graphic display and toolbar (Página 2239)

Saving and deleting recordings
Saving a recording
To adjust and save a recording, proceed as follows:
1. In the "Current recording" area, enter the name of the recording in the "Name" column.
2. In the "Color" column, select the desired colors for the traces.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2243

Control de movimiento
6.1 Using S7-1500 Motion Control
3. If necessary, enter comments in the "Comment" column.
4. To save the current recording, click on the symbol
in the "Current recording" area.
The record is inserted in the "Saved record" area in the tabular editor.
Nota
Up to 20 recordings which can be saved
The tabular editor can save a maximum of 20 recordings.
To save additional recordings, delete the recording you no longer need.

Deleting saved recordings
To delete a recording, follow these steps:
1. To delete a recording, click on the symbol
recordings" area.
The record is deleted.

in the corresponding line in the "Saved

Nota
Traces cannot be deleted individually
You cannot delete traces individually. When you delete a recording, all included traces are
deleted.

Importing and exporting recordings
You have the option to export a recording as measurement, as *.ltr or *.csv file. The exported
file contains the TCP position values, the OCS position values and the configuration of the
kinematics technology object.
You can re-import an exported *.ltr file into the kinematics trace. The recordings saved under
measurements cannot be imported into the kinematics trace again.

Export record as file
To export a record, proceed as follows:
1. From the list of recordings, select the record to be exported.
2. Click on the symbol
in the toolbar.
The "Export recording" dialog opens.
3. Select "*.csv" or "*.ltr" as file format.
4. Select the storage location.
5. Click on "Export recording".
The file is exported.

2244

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Import recording as file
To import a recording, proceed as follows:
1. Click on the symbol
in the toolbar.
The "Import recording" dialog opens.
2. In the corresponding folder, select the file you want to import.
3. Click on the "Import file" button.
The file is imported. The recording is displayed in the tabular editor under saved recordings.

Save recording as measurement
With the trace you have extended evaluation options to analyze kinematics motion in detail.
To save the recording as a measurement, proceed as follows:
1. Select the current recording or a saved recording.
2. Click on the symbol
in the toolbar.
The "Save recording" dialog opens.
3. File the recording under "Traces > Measurements".
4. Under "Traces > Measurements", load the saved recording into the trace.
The recording is displayed in the trace. The recording contains the coordinates of the TCP
and the positions of the interconnected axes.

Consulte también
Graphic display and toolbar (Página 2239)

6.1.5.9

Measuring
Open calibration under "Technology object > Calibration". Alternatively, specify an OCS frame
under "Technology object > Configuration > Extended parameters > OCS frames" and click on
the symbol .
With the calibration you determine the exact position of the object coordinate systems (OCS)
in the world coordinate system (WCS).
The following options are available for this:
● Check the position of an already defined OCS in the WCS.
● Redefine the position of an OCS frame in the WCS.
The procedure for determining the position of an OCS is identical for both options.
Different calibration methods are available for each kinematics type:
Calibration method

2D kinema‐
tics

Three-point (Página 2247)

-

Two-point (Página 2247)
One-point (Página 2247)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2D kinematics with 3D kinema‐
orientation
tics

3D kinematics with
orientation

-

x

-

x

-

-

x

-

x

-

-

2245

Control de movimiento
6.1 Using S7-1500 Motion Control
Calibration method

2D kinema‐
tics

2D kinematics with 3D kinema‐
orientation
tics

3D kinematics with
orientation

Move and rotate (Pági‐
na 2250)

-

-

x

-

Move and rotate around y
(Página 2252)

x

-

-

-

Move and rotate around z
(Página 2252)

-

-

-

x

Plane (Página 2254)

-

-

x

-

Structure of the calibration
During calibration you configure the calibration methods. The kinematics with the selected
calibration method is shown graphically in the graphic display. You can use the calibration in
offline and online instructions.
The calibration is divided into the following areas:
● Selecting the calibration method
● Graphic display with toolbar and keypad
● Kinematics control panel

Selecting the calibration method
In the area "Selection of the calibration method", select a calibration method for the kinematics.
You can assign an object coordinate system (OCS) to the calibration method. Select an OCS
from the kinematics and assign a calibration method to the OCS.
You can assign the following calibration methods:
● Three-point, two-point or one-point (Página 2247)
● Move and rotate (Página 2250)
● Move and rotate around y or z (Página 2252)
● Plane (Página 2254)
If you have selected a calibration method, you can configure the corresponding parameters. If
you have configured the parameters, you can transfer the values to the configuration or reset
the values again.

Graphic display with toolbar and keypad
The following configured parameters are shown graphically in the graphic display:
● Points ("Three-point", "Two-point" or "One-point" method)
● Planes ("Planes" method)
● Angle ("Move and rotate" method)
You operate the graphic display of the calibration via the toolbar. Offline, you can change the
position of the Kinematics in the graphic display using a keypad. By jogging on a coordinate
axis, you can navigate the positions of the kinematics in positive or negative x, y or z direction.

2246

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Kinematics control panel
With the kinematics control panel, you assume master control for a kinematics technology
object and control the motions of the kinematics or the individual axes.
The functionality of the kinematics control panel is described in section "Commissioning
(Página 2221)".

"Three-point" / "two-point" / "one-point" calibration method
Use the following points methods to compare points in the world coordinate system (WCS) and
object coordinate system (OCS):
● Three-point
● Two-point
● One-point
The points methods are used, for example, to approach a pallet or a box.
To determine the position of an OCS, first define the points in the WCS. Then enter the
corresponding coordinates in the OCS for the configured points. With these methods, the tool
center point (TCP) of the kinematics must be able to reach the defined points.
Your entries are checked by comparing the points in the WCS with the points in the OCS. The
status of the check gives you feedback on the accuracy of your information. With the one-point
method, it is not necessary to consider the accuracy of the points.
To compare the actual position of an OCS in the WCS with your configured OCS frames, move
the kinematics to the corresponding points.
You have the following options for defining positions in the WCS:
● Enter values manually in the x, y and z coordinate fields.
● Apply the current position values of the TCP using the symbol
● Couple position values to the TCP via the symbol

Object coordinate system
Select an OCS from the drop-down list.

Calibration method
In the drop-down list, select a calibration method.
Depending of the kinematics type, the following calibration methods are available:
Calibration method

2D kinema‐
tics

2D kinematics with 3D kinema‐
orientation
tics

3D kinematics with
orientation

Three-point

-

-

x

-

Two-point

x

-

-

x

One-point

-

x

-

-

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2247

Control de movimiento
6.1 Using S7-1500 Motion Control

Status display
The status indicator shows the progress and notes on input.
The entered values of the calibration are checked for the "three-point" and "two point" methods.
The distances between the points in the OCS are compared with the distances between the
points in the WCS. With the one-point method, a comparison of the points is not necessary.
If the inputs are still incomplete, the status indicator is displayed in red. Depending of your
inputs, the status indicator shows the following:
● With the three-point method:
Angle of triangles in WCS and OCS, less than 20° degrees
● With the three-point and two-point method:
Deviation of the points in WCS and OCS to each other greater than 5%
If your entries are complete and correct, the status indicator appears green. You can accept the
values in the configuration.

1. Configure first point
You define the first point for the following methods:
● Three-point
● Two-point
● One-point
In the "one-point" method, only the x and y coordinates are available to you
In this area, define the position of the first point in the WCS and OCS:
Field/Button

Description

Position in the
WCS

In these fields, define the coordinates in the WCS.

x

In this field, define the position of the OCS in x direction of the WCS.

y

In this field, define the position of the OCS in y direction of the WCS.

z

In this field, define the position of the OCS in z direction of the WCS.
With this symbol next to the field "Position of the WCS", you apply all coordinates
of the position of the TCP. With this symbol next to the field of a coordinate, you
accept only the value of the corresponding coordinate.
Move the kinematics to a position. If you click on the symbol, the current position
value of the TCP is applied. During calibration, you can move the kinematics offline
via the keypad or online via the kinematics control panel.
With this symbol next to the field "Position of the WCS", you couple all coordinates
of the position to the TCP. With this symbol next to the field of a coordinate, you
couple only the value of the corresponding coordinate to the TCP.
When you click on the symbol, the symbol changes to
and the position value is
coupled to the TCP. The corresponding fields of the coordinates are inactive.
In the corresponding fields of the coupled coordinates, the current value of the TCP
is displayed while moving the kinematics. During calibration, you can move the
kinematics offline via the keypad or online via the kinematics control panel.

2248

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Field/Button

Description
With this symbol next to the field "Position of the WCS", you decouple all coordi‐
nates of the position at the TCP. With this symbol next to the field of a coordinate,
you decouple only the value of the corresponding coordinate at the TCP.
When you click on the symbol, the symbol changes to
and the corresponding
position value is coupled of the TCP is decoupled. The corresponding fields of the
coordinates can be edited again.

Position in OCS

In these fields, define the coordinates in the OCS.

x position

In this field, define the position of the calibration point in x direction in the OCS.

y position

In this field, define the position of the calibration point in y direction in the OCS.

z position

In this field, define the position of the calibration point in z direction in the OCS.

2. Configure second point
You define the second point for the following methods:
● Three-point
● Two-point
in the "two-point" method, the z coordinate is taken from the first point.
In this area, define the position of the second point in the WCS and OCS. Proceed as described
under "Configure first point".

3. Configure third point
You define the third point for the "three-point" method.
In this area, define the position of the third point in the WCS and OCS. Proceed as described
under "Configure first point".

Apply values
If you have entered new values for the calibration and the "status indicator" is green, you can
click on the button "Apply values".
With the button "Apply values", you accept the values from the calibration into the configuration.
As soon as the values of the configuration match the values of the measurement, the button is
inactive.

Reset values
With the "Reset values" button, you reset the entered values of the calibration.

Consulte también
Measuring (Página 2245)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2249

Control de movimiento
6.1 Using S7-1500 Motion Control

"Move and rotate" calibration method
With the "Move and rotate" method, you shift the origin of the object coordinate system (OCS)
and rotate the OCS.
To begin with, define the OCS origin as first point. Move this point e.g. to the corner point of a
pallet. To define the rotation of the OCS, select a coordinate axis and an angle.
You have the following options to define positions in the world coordinate system (WCS):
● Enter values manually in the x, y and z coordinate fields.
● Apply the current position values of the tool center point (TCP) with the symbol

.

● Couple position values to the TCP via the symbol

Object coordinate system
Select an OCS from the drop-down list.

Calibration method
In the drop-down list, select a calibration method.
Depending of the kinematics type, the following calibration methods are available:
Calibration method

2D kinema‐
tics

Move and rotate

-

2D kinematics with 3D kinema‐
orientation
tics
-

3D kinematics with
orientation

x

-

Status display
If your entries are still incomplete, the status indicator appears red.
If your entries are complete and correct, the status indicator appears green. You can accept the
values in the configuration.

1. Shift of the OCS origin
Define the offset of the OCS in the WCS in this area:
Field/Button

Description

Position in the
WCS

In these fields, define the coordinates in the WCS.

x

In this field, define the position of the OCS in x direction of the WCS.

y

In this field, define the position of the OCS in y direction of the WCS.

z

In this field, define the position of the OCS in z direction of the WCS.
With this symbol next to the field "Position of the WCS", you apply all coordinates
of the position of the TCP. With this symbol next to the field of a coordinate, you
accept only the value of the corresponding coordinate.
Move the kinematics to a position. If you click on the symbol, the current position
value of the TCP is applied. During calibration, you can move the kinematics offline
via the keypad or online via the kinematics control panel.

2250

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Field/Button

Description
With this symbol next to the field "Position of the WCS", you couple all coordinates
of the position to the TCP. With this symbol next to the field of a coordinate, you
couple only the value of the corresponding coordinate to the TCP.
When you click on the symbol, the symbol changes to
and the position value is
coupled to the TCP. The corresponding fields of the coordinates are inactive.
In the corresponding fields of the coupled coordinates, the current value of the TCP
is displayed while moving the kinematics. During calibration, you can move the
kinematics offline via the keypad or online via the kinematics control panel.
With this symbol next to the field "Position of the WCS", you decouple all coordi‐
nates of the position at the TCP. With this symbol next to the field of a coordinate,
you decouple only the value of the corresponding coordinate at the TCP.
and the corresponding
When you click on the symbol, the symbol changes to
position value is coupled of the TCP is decoupled. The corresponding fields of the
coordinates can be edited again.

2. Select the coordinate axis around which you want to rotate
In the drop-down list, select a coordinate axis around which you want to rotate.

3. Rotate OCS
To align a coordinate axis in direction of the TCP, you have the following options:
● Align angle with this symbol
● Couple angle with this symbol

in direction of the TCP.
to the TCP.

In these fields, define the rotation around the selected coordinate axis:
Field

Description

Rotation of the
coordinate axis

In this drop-down list, select a coordinate axis around which the OCS is to be
rotated.

Angle

In this field, define the rotation of the coordinate axis to the TCP.
Move the kinematics to a position. When you click on the symbol, the angle to the
TCP is applied.
When you click on this symbol, the symbol changes to
to the TCP. The input field of the angle is inactive.

and the angle is coupled

In the corresponding fields of the coupled coordinates, the angle of the coordinate
axis to the TCP is displayed when moving the kinematics.
When you click on this symbol, the symbol changes to
and the angle of the
coordinate axis is decoupled from the TCP. The input field of the angle can be
edited again.

Apply values
With the button "Apply values", you accept the values from the calibration into the configuration.
As soon as the values of the configuration match the values of the measurement, the button is
inactive.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2251

Control de movimiento
6.1 Using S7-1500 Motion Control

Reset values
The "Reset values" button is used to reset the entered values.

Consulte también
Measuring (Página 2245)

"Move and rotate around y or z" calibration method
Use the "Move and rotate around y or z" method to move the origin of the object coordinate
system (OCS) and to rotate OCS.
To begin with, define the OCS origin as first point. Move this point e.g. to the corner point of a
pallet. To define the rotation of the OCS, select a coordinate axis.
You have the following options to define positions in the world coordinate system (WCS):
● Enter values manually in the x, y and z coordinate fields.
● Apply the current position values of the tool center point (TCP) with the symbol

.

● Couple position values to the TCP via the symbol

Object coordinate system
Select an OCS from the drop-down list.

Calibration method
In the drop-down list, select a calibration method.
Depending of the kinematics type, the following calibration methods are available:
Calibration method

2D kinema‐
tics

2D kinematics with 3D kinema‐
orientation
tics

3D kinematics with
orientation

Move and rotate around y

x

-

-

-

Move and rotate around z

-

-

-

x

Status display
If your entries are still incomplete, the status indicator appears red.
If your entries are complete and correct, the status indicator appears green. You can accept the
values in the configuration.

2252

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

1. Shift of the OCS origin
Define the offset of the OCS in the WCS in this area:
Field/Button

Description

Position in the
WCS

In these fields, define the coordinates in the WCS.

x

In this field, define the position of the OCS in x direction of the WCS.

y

In this field, define the position of the OCS in y direction of the WCS.

z

In this field, define the position of the OCS in z direction of the WCS.
With this symbol next to the field "Position of the WCS", you apply all coordinates
of the position of the TCP. With this symbol next to the field of a coordinate, you
accept only the value of the corresponding coordinate.
Move the kinematics to a position. If you click on the symbol, the current position
value of the TCP is applied. During calibration, you can move the kinematics offline
via the keypad or online via the kinematics control panel.
With this symbol next to the field "Position of the WCS", you couple all coordinates
of the position to the TCP. With this symbol next to the field of a coordinate, you
couple only the value of the corresponding coordinate to the TCP.
When you click on the symbol, the symbol changes to
and the position value is
coupled to the TCP. The corresponding fields of the coordinates are grayed out.
In the corresponding fields of the coupled coordinates, the current value of the TCP
is displayed while moving the kinematics. During calibration, you can move the
kinematics offline via the keypad or online via the kinematics control panel.
With this symbol next to the field "Position of the WCS", you decouple all coordi‐
nates of the position at the TCP. With this symbol next to the field of a coordinate,
you decouple only the value of the corresponding coordinate at the TCP.
When you click on the symbol, the symbol changes to
and the corresponding
position value is coupled of the TCP is decoupled. The corresponding fields of the
coordinates can be edited again.

2. Rotate OCS
To align a coordinate axis in direction of the TCP, you have the following options:
● Align angle with this symbol
● Couple angle with this symbol

in direction of the TCP.
to the TCP.

In these fields, define the rotation around the selected coordinate axis in the second point:
Field

Description

Rotation of the
coordinate axis

In this drop-down list, select a coordinate axis around which the OCS is to be
rotated.

Angle

In this field, define the rotation of the axis to the TCP.
Move the kinematics to a position. During calibration, you can move the kinematics
offline via the keypad or online via the kinematics control panel.
When you click on the symbol, the current rotation of the angle to the TCP is
applied. When you click on the symbol, the current rotation of the axis to the TCP
is applied.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2253

Control de movimiento
6.1 Using S7-1500 Motion Control
Field

Description
When you click on the symbol, the symbol changes to
and the angle is coupled
to the TCP. The corresponding field of the angle is inactive.
In the corresponding fields of the coupled coordinates, the angle of the coordinate
axis to the TCP is displayed when moving the kinematics. During calibration, you
can move the kinematics offline via the keypad or online via the kinematics control
panel.
When you click on the symbol, the symbol changes to
and the angle of the
coordinates axis is decoupled from the TCP. The corresponding field of the angle
can be edited again.

Apply values
With the button "Apply values", you accept the values from the calibration into the configuration.
As soon as the values of the configuration match the values of the measurement, the button is
inactive.

Reset values
The "Reset values" button is used to reset the entered values.

Consulte también
Measuring (Página 2245)

"Plane" calibration method
With the "Plane" method you move the origin of the object coordinate system (OCS) and
determine the position and rotation of the OCS.
The "Plane" method can be used, for example, with a pallet that lies on an inclined plane.
To begin with, define the OCS origin as first point. Move this point e.g. to the corner point of a
pallet. To define the position of the OCS, select a coordinate axis that you want to rotate in the
direction of the TCP.
To align the coordinate axis in the direction of the TCP, move the kinematics to a point along
an edge of the pallet. The position of the OCS is thus determined. The rotation of the OCS is
determined by clamping a plane between two coordinate axes.
You have the following options to define positions in the world coordinate system (WCS):
● Enter values manually in the x, y and z coordinate fields.
● Apply the current position values of the tool center point (TCP) with the symbol

.

● Couple position values to the TCP with the symbol

Object coordinate system
Select an OCS from the drop-down list.

2254

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Calibration method
In the drop-down list, select a calibration method.
Depending of the kinematics type, the following calibration methods are available:
Calibration method

2D kinema‐
tics

Plane

-

2D kinematics with 3D kinema‐
orientation
tics
-

3D kinematics with
orientation

x

-

Status display
If your entries are still incomplete, the status indicator appears red.
If your entries are complete and correct, the status indicator appears green. You can accept the
values in the configuration.

1. Shift of the OCS origin
In this area, define the position of the OCS in the WCS:
Field/Button

Description

Position in the
WCS

In these fields, define the coordinates of the OCS in the WCS.

x

In this field, define the position of the OCS in x direction of the WCS.

y

In this field, define the position of the OCS in y direction of the WCS.

z

In this field, define the position of the OCS in z direction of the WCS.
With this symbol next to the field "Position of the WCS", you apply all coordinates
of the position of the TCP. With this symbol next to the field of a coordinate, you
accept only the value of the corresponding coordinate.
Move the kinematics to a position. If you click on the symbol, the current position
value of the TCP is applied. During calibration, you can move the kinematics offline
via the keypad or online via the kinematics control panel.
With this symbol next to the field "Position of the WCS", you couple all coordinates
of the position to the TCP. With this symbol next to the field of a coordinate, you
couple only the value of the corresponding coordinate to the TCP.
When you click on the symbol, the symbol changes to
and the position value is
coupled to the TCP. The corresponding fields of the coordinates are inactive.
In the corresponding fields of the coupled coordinates, the current value of the TCP
is displayed while moving the kinematics. During calibration, you can move the
kinematics offline via the keypad or online via the kinematics control panel.
With this symbol next to the field "Position of the WCS", you decouple all coordi‐
nates of the position at the TCP. With this symbol next to the field of a coordinate,
you decouple only the value of the corresponding coordinate at the TCP.
When you click on the symbol, the symbol changes to
and the corresponding
position value is coupled of the TCP is decoupled. The corresponding fields of the
coordinates can be edited again.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2255

Control de movimiento
6.1 Using S7-1500 Motion Control

2. Rotate the coordinate axis toward the TCP
You have two options for aligning a coordinate axis in the direction of the TCP:
● Align the coordinate axis with this symbol

in the direction of the TCP.

● Couple the coordinate axis to the TCP with this symbol
Use the buttons to define how the coordinate axis is adapted to the current position values of
the TCP:
Field

Description

Rotation of the
coordinate axis

In this drop-down list, select a coordinate axis around which the OCS is to be
rotated.
When you click on this symbol, the rotation of the selected coordinate axis to the
TCP is applied.
Move the kinematics to a position. During calibration, you can move the kinematics
offline via the keypad or online via the kinematics control panel.
When you click on this symbol, the symbol changes to
and the coordinate axis
is coupled to the TCP. During calibration, you can move the kinematics offline via
the keypad or online via the kinematics control panel.
When you click on this symbol, the symbol changes to
is decoupled from the TCP.

and the coordinate axis

3. Clamp plane over two coordinate axes
To clamp a plane with coordinate axes, you have the following options:
● Clamp plane with the symbol

in the direction of the TCP.

● Clamp plane with the symbol

via the traversing of the TCP

Use the buttons to define how the alignment of the planes is adapted to the current position
value of the TCP:
Field/Button

Description

Plane

In this drop-down list, select the coordinate axes via which the plane is to be
clamped.
Different coordinate axes are available for selection depending of the coordinate
axis that you have selected in the field "Rotation of the coordinate axis".
During calibration, you can move the kinematics offline via the keypad or online via
the kinematics control panel.
Move the kinematics to a position. If you click on this symbol, the current position
value of the TCP is applied.
During calibration, you can move the kinematics offline via the keypad or online via
the kinematics control panel.
When you click on this symbol, the symbol changes to
and the clamped plane
is coupled to the TCP. The alignment of the planes changes when the kinematics
is moved.
When you click on this symbol, the symbol changes to
is decoupled.

2256

and the clamped plane

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Apply values
With the button "Apply values", you accept the values from the calibration into the configuration.
As soon as the values of the configuration match the values of the measurement, the button is
inactive.

Reset values
The "Reset values" button is used to reset the entered values.

Consulte también
Measuring (Página 2245)

Graphic display and toolbar
In the graphic display with toolbar, the traversing of the kinematics and the tool center point
(TCP) is displayed graphically with the selected measuring method.

Toolbar
The toolbar at the top of the graphical display provides you with buttons for the following
functions:
Button

Function

Description

Fit to screen size

Centers the view and displays the entire kinematics.

Show coordinate system

Shows or hides the selected coordinate system with grid
lines.

Select coordinate system

Select a coordinate system.

Show 2D view

Switches the view to the 2D view.

Show 3D view

Switches the view to the 3D view.

Focus TCP

Switches the view to "Focus TCP"
During the path motion of the kinematics, the focus is al‐
ways on the TCP. In standstill, the view can be moved or
rotated using the mouse.

Show xz plane

Shows the xz plane

Show xz plane rotated

Shows the xz plane rotated around the z axis.

Show yz plane

Shows the yz plane

Show yz plane rotated

Shows the yz plane rotated around the z axis.

Show xy plane

Shows the xy plane

Show xy plane rotated

Shows the xy plane rotated around the z axis.

Select tool

Select a tool.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2257

Control de movimiento
6.1 Using S7-1500 Motion Control
Button

Function

Description

Show/hide kinematics model

If you click on the arrow, the graphical view options of the
kinematics are shown.
If you click on the symbol, you change the graphical view of
the kinematics.

Show kinematics

Shows the kinematics.

Display simplified model

Shows a simplified view of the kinematics.

Hide model

Hides the view of the kinematics.

Highlight zones

Shows or hides the tool coordinate system (TCS).

Operation of the graphic display
The following values are displayed graphically depending of the configured calibration method:
● Configured points in the world coordinate system (WCS) and in the object coordinate
system (OCS)
● Configured angle
● Guide lines are shown
● Offset of the OCS from the origin
● Current position of the TCP
● Active calibration point is graphically highlighted
In the graphic display you have the following possible operations with the mouse:
● Rotate and zoom the coordinate system with displayed kinematics
● Change the position of the TCP with the keypad via the x, y or z coordinate axes

6.1.5.10

Appendix

Tags of the kinematics technology object
Legend
Tag

Name of the tag

Data type

Data type of the tag

Values

Value range of the tag - minimum value to maximum value
(L - linear specification R - rotary specification)
If no specific value is shown, the value range limits of the relevant data type apply or the
information under "Description".

2258

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
W

Effectiveness of changes in the technology data block
DIR

Direct:
Values are changed via direct assignment and take effect at the start of the
next MC‑Servo [OB91].

CAL

At call of Motion Control instruction:
Values are changed directly and take effect at the start of the next MC‑Ser‐
vo [OB91] after the call of the corresponding Motion Control instruction in the
user program.

RES

Restart:
Changes to the start value in the load memory are made using the extended
instruction "WRIT_DBL" (write to DB in load memory). Changes will not take
effect until after restart of the technology object.

RON

Read only:
The tag cannot and must not be changed during runtime of the user program.

Description

Description of the tag

Access to the tags is with "<TO>.<tag name>". The placeholder <TO> represents the name of
the technology object.

"Tcp" tag (kinematics)
The tag structure "<TO>.Tcp.<Tag name>" contains the position of the tool center point (TCP),
the TCP frame in the World Coordinate System (WCS)

Tags
Legend (Página 2258)
Tag

Data type

Values

W

Tcp.

TO_Struct_Kinematics_StatusKine‐
maticsFrameTcp

Description

x

LREAL

-1.79769E308 t RON
o 1.79769E308

x coordinate

y

LREAL

-1.79769E308 t RON
o 1.79769E308

y coordinate

z

LREAL

-1.79769E308 t RON
o 1.79769E308

z coordinate

a

LREAL

-180 to 180

A coordinate

RON

Consulte también
Tags: Coordinate systems and frames (Página 2071)

"Kinematics" tag (kinematics)
The tag structure "<TO>.Kinematics.<Tag name>" contains the defined kinematics type.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2259

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2258)
Tag

Data type

Kinematics.

Values

W

Description

TO_Struct_Kinematics_Kinematics

TypeOfKinematics

DINT

1 to 34

RON

Kinematics type
The configuration is performed using the function view.
1

Cartesian portal 2D

2

Cartesian portal 2D with orientation

3

Cartesian portal 3D

4

Cartesian portal 3D with orientation

5

Roller picker 2D

6

Roller picker 2D with orientation

7

Roller picker 3D (vertical)

8

Roller picker 3D with orientation (vertical)

9

Roller picker 3D with orientation (horizontal)

10

SCARA 3D with orientation

11

Articulated arm 2D

12

Articulated arm 2D with orientation

13

Articulated arm 3D

14

Articulated arm 3D with orientation

15

Delta picker 2D

16

Delta picker 2D with orientation

17

Delta picker 3D

18

Delta picker 3D with orientation

19

Reserved

20

SCARA 2D with orientation

21

Cylindrical robot 3D

22

Cylindrical robot 3D with orientation

23

Tripod 3D

24

Tripod 3D with orientation

25 … 30 Reserved

Parameter[1..32]

ARRAY
[1..32] OF
LREAL

-1.0E12 to 1.0
E12

RES

31

User-defined 2D

32

User-defined 2D with orientation

33

User-defined 3D

34

User-defined 3D with orientation

Kinematics-specific parameters

Consulte también
Tags: Cartesian portal (Página 2084)
Tags: Delta picker (Página 2137)

2260

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Tags: Roller picker (Página 2098)
Tags: Articulated arm (Página 2123)
Tags: Cylindrical robot (Página 2146)
Tags: Tripod (Página 2153)
Tags: SCARA (Página 2106)
Tags: User-defined kinematics systems (Página 2154)

"KcsFrame" tag (kinematics)
The tag structure "<TO>.KcsFrame.<Tag name>" contains the frame of the Kinematic
Coordinate System (KCS) in the World Coordinate System (WCS).

Tags
Legend (Página 2258)
Tag

Data type

Value range

W

KcsFrame.

TO_Struct_Kinematics_Frame

Description

x

LREAL

-1.0E12 to 1.0E RES
12

x coordinate

y

LREAL

-1.0E12 to 1.0E RES
12

y coordinate

z

LREAL

-1.0E12 to 1.0E RES
12

z coordinate

a

LREAL

RES

A coordinate

b

0.0

With kinematics type "2D"

0.0

With kinematics type "2D with orientation"

-180.0 to 179.9
99

With kinematics type "3D"

-180.0 to 179.9
99

With kinematics type "3D with orientation"

LREAL

RES

With kinematics type "2D"

0.0

With kinematics type "2D with orientation"

-90.0 to 90.0

With kinematics type "3D"

0.0
c

LREAL

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

B coordinate

-180.0 to 179.9
99

With kinematics type "3D with orientation"
RES

C coordinate

0.0

With kinematics type "2D"

0.0

With kinematics type "2D with orientation"

-180.0 to 179.9
99

With kinematics type "3D"

0.0

With kinematics type "3D with orientation"

2261

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Tags: Coordinate systems and frames (Página 2071)

"OcsFrame[1..3]" tag (kinematics)
The tag structure "<TO>.OcsFrame[1..3].<Tag name>" contains the frames of the Object
Coordinate Systems 1 to 3 (OCS) in the World Coordinate System (WCS).

Tags
Value range

W

Tag

Data type

OcsFrame[1..3].

ARRAY [1..3] OF TO_Struct_Kine‐
matics_Frame

Description

x

LREAL

-1.0E12 to 1.0E RES
12

x coordinate

y

LREAL

-1.0E12 to 1.0E RES
12

y coordinate

z

LREAL

-1.0E12 to 1.0E RES
12

z coordinate

a

LREAL

RES

A coordinate

b

0.0

With kinematics type "2D"

0.0

With kinematics type "2D with orientation"

-180.0 to 179.9
99

With kinematics type "3D"

-180.0 to 179.9
99

With kinematics type "3D with orientation"

LREAL

c

RES

B coordinate

-180.0 to 179.9
99

With kinematics type "2D"

0.0

With kinematics type "2D with orientation"

-90.0 to 90.0

With kinematics type "3D"

0.0

With kinematics type "3D with orientation"

LREAL

RES

C coordinate

0.0

With kinematics type "2D"

0.0

With kinematics type "2D with orientation"

-180.0 to 179.9
99

With kinematics type "3D"

0.0

With kinematics type "3D with orientation"

Consulte también
Tags: Coordinate systems and frames (Página 2071)
Legend (Página 2258)

2262

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

"Tool[1..3]" tag (kinematics)
The tag structure "<TO>.Tool[1..3].<Tag name>" contains the tool frame in the Flange
Coordinate System (FCS).

Tags
Legend (Página 2258)
Value range

W

Tag

Data type

Tool[1..3].

ARRAY [1..3] OF TO_Struct_Kine‐
matics_Tool

Frame.

Description

TO_Struct_Kinematics_Kinematics‐
Frame

x

LREAL

-1.0E12 to 1.0E RES
12

x coordinate in the FCS

y

LREAL

-1.0E12 to 1.0E RES
12

y coordinate in the FCS

z

LREAL

-1.0E12 to 1.0E RES
12

z coordinate in the FCS

a

LREAL

RES

A coordinate

0.0

With kinematics type "2D"

-180.0 to 179.9
99

With kinematics type "2D with orientation"

0.0

With kinematics type "3D"

-180.0 to 179.9
99

With kinematics type "3D with orientation"

Consulte también
Tags: Coordinate systems and frames (Página 2071)

"DynamicDefaults" tag (kinematics)
The tag structure "<TO>.DynamicDefaults.<Tag name>" contains the configuration of the
dynamic presets. These settings will be used when you specify a dynamic value less than 0.0
for a Motion Control instruction. Changes to the default dynamics will be applied at the next
positive edge at the "Execute" parameter of a Motion Control instruction.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2263

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2258)
Tag

Data type

DynamicDefaults.

TO_Struct_Kinematics_Dynamic‐
Defaults

Path.

Values

W

Description

TO_Struct_Kinematics_Dynamics

Velocity

LREAL

0.0 to 1.0E12

DIR

Default setting of the velocity of the path

Acceleration

LREAL

0.0 to 1.0E12

DIR

Default setting of the acceleration of the path

Deceleration

LREAL

0.0 to 1.0E12

DIR

Default setting of the deceleration of the path

Jerk

LREAL

0.0 to 1.0E12

DIR

Default setting of the jerk of the path

Orientation.

TO_Struct_Kinematics_Orienta‐
tionDynamics

Velocity

LREAL

0.0 to 1.0E12

DIR

Default setting of the velocity of the Cartesian orientation

Acceleration

LREAL

0.0 to 1.0E12

DIR

Default setting of the acceleration of the Cartesian orien‐
tation

Deceleration

LREAL

0.0 to 1.0E12

DIR

Default setting of the deceleration of the Cartesian orien‐
tation

Jerk

LREAL

0.0 to 1.0E12

DIR

Default setting of the jerk of the Cartesian orientation

DINT

0 to 2

CAL

Default setting of the dynamic adaptation

DynamicAdaption

MoveDirect

0

No dynamic adaptation

1

Dynamic adaptation with segmentation of the
path

2

Dynamic adaptation without segmentation of
the path

TO_Struct_Kinematics_MoveDi‐
rectDynamics

VelocityFactor

LREAL

0.0 to 1.0E12

CAL

Factor for the velocity of the axis motions in relation to the
respective maximum velocity of the axes with sPTP mo‐
tion.

AccelerationFactor

LREAL

0.0 to 1.0E12

CAL

Factor for the acceleration of the axis motions in relation to
the respective maximum acceleration of the axes with
sPTP motion.

DecelerationFactor

LREAL

0.0 to 1.0E12

CAL

Factor for the deceleration of the axis motions in relation to
the respective maximum deceleration of the axes with
sPTP motion.

JerkFactor

LREAL

0.0 to 1.0E12

CAL

Factor for the jerk of the axis motions in relation to the
respective maximum jerk of the axes with sPTP motion.

Consulte también
Tags: Kinematics motions (Página 2175)

2264

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

"DynamicLimits" tag (kinematics)
The tag structure "<TO>.DynamicLimits.<Tag name>" contains the configuration of the
dynamic limits. During Motion Control, no dynamic values greater than the dynamic limits are
permitted. If you have specified greater values in a Motion Control instruction, then motion is
performed using the dynamic limits, and a warning is indicated (alarm 501 to 503 - Dynamic
values are limited).

Tags
Legend (Página 2258)
Tag

Data type

DynamicLimits.

TO_Struct_Kinematics_DynamicLi‐
mits

Path.

Values

W

Description

TO_Struct_Kinematics_Dynamics

Velocity

LREAL

0.0 to 1.0E12

DIR

Dynamic limitation for the maximum velocity of the path

Acceleration

LREAL

0.0 to 1.0E12

DIR

Dynamic limitation for the maximum velocity of the path

Deceleration

LREAL

0.0 to 1.0E12

DIR

Dynamic limitation for the maximum deceleration of the
path

Jerk

LREAL

0.0 to 1.0E12

DIR

Dynamic limitation for the maximum jerk of the path

Orientation.

TO_Struct_Kinematics_Orienta‐
tionDynamics

Velocity

LREAL

0.0 to 1.0E12

DIR

Dynamic limitation for the maximum velocity of the Carte‐
sian orientation

Acceleration

LREAL

0.0 to 1.0E12

DIR

Dynamic limitation for the maximum velocity of the Carte‐
sian orientation

Deceleration

LREAL

0.0 to 1.0E12

DIR

Dynamic limitation for the maximum deceleration of the
Cartesian orientation

Jerk

LREAL

0.0 to 1.0E12

DIR

Dynamic limitation for the maximum jerk of the Cartesian
orientation

Consulte también
Tags: Kinematics motions (Página 2175)

"MotionQueue" tag (kinematics)
The tag structure "<TO>.MotionQueue.<Tag name>" contains the configuration of parameters
of the job sequence.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2265

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2258)
Tag

Data type

MotionQueue.

TO_Struct_Kinematics_Motion‐
Queue

MaxNumberOfCom‐
mands

DINT

Values

1 to 10

W

RON

Description

Maximum number of commands in job sequence
The configuration takes place in "Technology object >
Configuration > Extended parameters > Job sequence".

Consulte también
Tags: Kinematics motions (Página 2175)

"Override" tag (kinematics)
The tag structure "<TO>.Override.<Tag name>" contains the configuration of override
parameters.

Tags
Legend (Página 2258)
Tag

Data type

Override.

TO_Struct_Kinematics_Override

Velocity

LREAL

Values
0.0 to 200.0

W
DIR

Description
Velocity override

Consulte también
Tags: Kinematics motions (Página 2175)

"WorkspaceZone[1..10]" tag (kinematics)
The tag structure "<TO>.WorkspaceZone[1..10].<Tag name>" contains the parameter for the
workspace zones.

2266

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2258)
Tag

Data type

Values

W

WorkspaceZone[1..10].

ARRAY [1..10] OF TO_Struct_Kine‐
matics_WorkSpaceZone

Description

Active

BOOL

-

RES

FALSE
TRUE

Workspace zone activated

Valid

BOOL

-

RES

FALSE

Zone is not defined

TRUE

Zone is defined

Type

DINT

0 to 2

RES

Type of the workspace zone

ReferenceSystem

Frame.

DINT

0…3

RES

Workspace zone deactivated

0

Blocked zone

1

Work zone

2

Signal zone

Reference coordinate system for the workspace zone
0

WCS

1

OCS1

2

OCS2

3

OCS3

TO_Struct_Kinematics_Frame

x

LREAL

-1.0E12 to 1.0E RES
12

x coordinate

y

LREAL

-1.0E12 to 1.0E RES
12

y coordinate

z

LREAL

-1.0E12 to 1.0E RES
12

z coordinate

a

LREAL

-180.0 to 179.9 RES
99

A coordinate

b

LREAL

-90.0 to 90.0

RES

B coordinate

c

LREAL

-180.0 to 179.9 RES
99

C coordinate

Geometry.

TO_Struct_Kinematics_ZoneGeo‐
metry

Type

DINT

Parameter[1..3]

ARRAY
[1..3] OF
LREAL

0 to 2

0.0 to 1.0E12

RES

RES

Zone geometry
0

Cuboid

1

Sphere

2

Cylinder

1

Length x (cuboid) or radius (sphere, cylinder)

2

Length y (cuboid) or height (cylinder)

3

Length z (cuboid)

Consulte también
Tags: Zone monitoring (Página 2187)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2267

Control de movimiento
6.1 Using S7-1500 Motion Control

"KinematicsZone[2..10]" tag (kinematics)
The tag structure "<TO>.KinematicsZone[2..10].<Tag name>" contains the parameters for
kinematic zones.

Tags
Legend (Página 2258)
Values

W

Tag

Data type

KinematicsZone[2..10].

ARRAY [2..10] OF TO_Struct_Kine‐
matics_KinematicsZone

Active

BOOL

Valid

BOOL

ReferenceSystem

Frame.

DINT

0 to 1

RES
RES
RES

Description

FALSE

Kinematics zone deactivated

TRUE

Kinematics zone activated

FALSE

Zone is not defined

TRUE

Zone is defined

Reference coordinate system for the kinematics zone
0

FCS

1

TCS

TO_Struct_Kinematics_Frame

x

LREAL

-1.0E12 to 1.0E RES
12

x coordinate

y

LREAL

-1.0E12 to 1.0E RES
12

y coordinate

z

LREAL

-1.0E12 to 1.0E RES
12

z coordinate

a

LREAL

-180.0 to 179.9 RES
99

A coordinate

b

LREAL

-90.0 to 90.0

RES

B coordinate

c

LREAL

-180.0 to 179.9 RES
99

C coordinate

Geometry.

TO_Struct_Kinematics_ZoneGeo‐
metry

Type

DINT

Parameter[1..3]

ARRAY
[1..3] OF
LREAL

0 to 2

0.0 to 1.0E12

RES

RES

Zone geometry
0

Cuboid

1

Sphere

2

Cylinder

1

Length x (cuboid) or radius (sphere, cylinder)

2

Length y (cuboid) or height (cylinder)

3

Length z (cuboid)

Consulte también
Tags: Zone monitoring (Página 2187)

2268

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

"StatusPath" tag (kinematics)
The tag structure "<TO>.StatusPath.<Tag name>" contains the parameters of the current
kinematics movement. With synchronous point-to-point motion (sPTP motion), the parameters
StatusPath.Velocity and StatusPath.Acceleration = 0.0.

Tags
Legend (Página 2258)
Tag

Data type

StatusPath.

TO_Struct_Kinematics_StatusPath

CoordSystem

DINT

Values
0…3

W
RON

Description
Coordinate system of the active motion job
0

World coordinate system

1, 2, 3

Object coordinate system 1, 2, 3

Velocity

LREAL

-1.0E12 to 1.0E RON
12

Current path velocity (setpoint reference)

Acceleration

LREAL

-1.0E12 to 1.0E RON
12

Current path acceleration (setpoint reference)

DynamicAdaption

DINT

0 to 2

Dynamic adaptation

RON

0

No dynamic adaptation

1

Dynamic adaptation with segmentation of the
path

2

Dynamic adaptation without segmentation of
the path

Consulte también
Tags: Kinematics motions (Página 2175)

"TcpInWcs" tag (kinematics)
The tag structure "<TO>.TcpInWcs.<Tag name>" contains the parameters for the tool center
point (TCP) in the World Coordinate System (WCS).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2269

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2258)
Tag

Data type

TcpInWcs.

TO_Struct_Kinematics_StatusKine‐
maticsFrameWithDynamics

x.

Values

W

Description

TO_Struct_Kinematics_StatusMo‐
tionVector
Acceleration

LREAL

-1.79769E308 t RON
o 1.79769E308

Acceleration of path coordinate x

Position

LREAL

-1.79769E308 t RON
o 1.79769E308

Position of path coordinate x

Velocity

LREAL

-1.79769E308 t RON
o 1.79769E308

Velocity of path coordinate x

y.

TO_Struct_Kinematics_StatusMo‐
tionVector
Acceleration

LREAL

-1.79769E308 t RON
o 1.79769E308

Acceleration of path coordinate y

Position

LREAL

-1.79769E308 t RON
o 1.79769E308

Position of path coordinate y

Velocity

LREAL

-1.79769E308 t RON
o 1.79769E308

Velocity of path coordinate y

z.

TO_Struct_Kinematics_StatusMo‐
tionVector
Acceleration

LREAL

-1.79769E308 t RON
o 1.79769E308

Acceleration of path coordinate z

Position

LREAL

-1.79769E308 t RON
o 1.79769E308

Position of path coordinate z

Velocity

LREAL

-1.79769E308 t RON
o 1.79769E308

Velocity of path coordinate z

a.

TO_Struct_Kinematics_StatusMo‐
tionVector
Acceleration

LREAL

-1.79769E308 t RON
o 1.79769E308

Acceleration of rotation A

Position

LREAL

-1.79769E308 t RON
o 1.79769E308

Position of rotation A

Velocity

LREAL

-1.79769E308 t RON
o 1.79769E308

Velocity of rotation A

Consulte también
Tags: Coordinate systems and frames (Página 2071)

"TcpInOcs[1..3]" tag (kinematics)
The tag structure "<TO>.TcpInOcs[1..3].<Tag name>" contains the parameters for the tool
center point (TCP) in the Object Coordinate Systems 1 to 3 (OCS).

2270

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2258)
Tag

Data type

TcpInOcs[1..3].

ARRAY [1..3] OF TO_Struct_Kine‐
matics_StatusKinematicsFrame‐
WithDynamicsOcs

x.

Values

W

Description

TO_Struct_Kinematics_StatusMo‐
tionVectorOcs
Acceleration

LREAL

-1.79769E308 t RON
o 1.79769E308

Acceleration of the x coordinate of the tool center point in
the object coordinate system 1 to 3

Position

LREAL

-1.79769E308 t RON
o 1.79769E308

x coordinate of the tool center point in the object coordi‐
nate system 1 to 3

Velocity

LREAL

-1.79769E308 t RON
o 1.79769E308

Velocity of the x coordinate of the tool center point in the
object coordinate system 1 to 3

y.

TO_Struct_Kinematics_StatusMo‐
tionVectorOcs
Acceleration

LREAL

-1.79769E308 t RON
o 1.79769E308

Acceleration of the y coordinate of the tool center point in
the object coordinate system 1 to 3

Position

LREAL

-1.79769E308 t RON
o 1.79769E308

y coordinate of the tool center point in the object coordi‐
nate system 1 to 3

Velocity

LREAL

-1.79769E308 t RON
o 1.79769E308

Velocity of the y coordinate of the tool center point in the
object coordinate system 1 to 3

z.

TO_Struct_Kinematics_StatusMo‐
tionVectorOcs
Acceleration

LREAL

-1.79769E308 t RON
o 1.79769E308

Acceleration of the z coordinate of the tool center point in
the object coordinate system 1 to 3

Position

LREAL

-1.79769E308 t RON
o 1.79769E308

z coordinate of the tool center point in the object coordi‐
nate system 1 to 3

Velocity

LREAL

-1.79769E308 t RON
o 1.79769E308

Velocity of the z coordinate of the tool center point in the
object coordinate system 1 to 3

a.

TO_Struct_Kinematics_StatusMo‐
tionVectorOcs
Acceleration

LREAL

-1.79769E308 t RON
o 1.79769E308

Acceleration of the A coordinate of the tool center point in
the object coordinate system 1 to 3

Position

LREAL

-1.79769E308 t RON
o 1.79769E308

A coordinate of the tool center point in the object coordi‐
nate system 1 to 3

Velocity

LREAL

-1.79769E308 t RON
o 1.79769E308

Velocity of the A coordinate of the tool center point in the
object coordinate system 1 to 3

Consulte también
Tags: Coordinate systems and frames (Página 2071)

"StatusOcsFrame[1..3]" tag (kinematics)
The tag structure "<TO>.StatusOcsFrame[1..3].<Tag name>" contains the frames of the
Object Coordinate Systems 1 to 3 (OCS) in the World Coordinate System (WCS).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2271

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2258)
Tag

Data type

Value range

W

StatusOcsFrame[1..3].

ARRAY [1..3] OF TO_Struct_Kine‐
matics_StatusFrame

Description

x

LREAL

-1.79769E308 t RON
o 1.79769E308

x coordinate in the WCS

y

LREAL

-1.79769E308 t RON
o 1.79769E308

y coordinate in the WCS

z

LREAL

-1.79769E308 t RON
o 1.79769E308

z coordinate in the WCS

a

LREAL

RON

A coordinate in the WCS

b

0.0

With kinematics type "2D"

0.0

With kinematics type "2D with orientation"

-180.0 to 179.9
99

With kinematics type "3D"

-180.0 to 179.9
99

With kinematics type "3D with orientation"

LREAL

RON
-180.0 to 179.9
99

With kinematics type "2D"

0.0

With kinematics type "2D with orientation"

-90.0 to 90.0

With kinematics type "3D"

0.0
c

B coordinate in the WCS

LREAL

With kinematics type "3D with orientation"
RON

C coordinate in the WCS

0.0

With kinematics type "2D"

0.0

With kinematics type "2D with orientation"

-180.0 to 179.9
99

With kinematics type "3D"

0.0

With kinematics type "3D with orientation"

Consulte también
Tags: Coordinate systems and frames (Página 2071)

"StatusKinematics" tag (kinematics)
The tag structure "<TO>.StatusKinematics.<Tag name>" contains the status of the kinematics.

2272

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2258)
Tag

Data type

StatusKinematics.

TO_Struct_Kinematics_StatusKine‐
matics

Valid

BOOL

LinkConstellation
Bit 0

Values

-

W

RON

Description

Validity of the transformation values
FALSE

Invalid

TRUE

Valid

DWORD

0 to n

RON

Joint position

-

-

-

Angle α1 of axis A1 in the front/rear area (standard area/
overhead area)
0

The zero point of the FCS is located in the front
area (standard area) of the joint position lines for
the axis A1.

1

The zero point of the FCS is located in the rear
area (overhead area) of the joint position lines
for the axis A1.

α1 = arctan(yFCS/xFCS)

α1 = -arctan(yFCS/xFCS)
Bit 1

-

Bit 2

-

-

-

-

-

Angle α2 of axis A2 positive/negative taking into conside‐
ration the mechanical axis coupling
0

α2 positive

1

α2 negative

Angle α3 of axis A3 positive/negative taking into conside‐
ration the mechanical axis coupling
0

α3 positive

1

α3 negative

Consulte también
Tags: Kinematics transformation (Página 2169)

"FlangeInKcs" tag (kinematics)
The tag structure "<TO>.FlangeInKcs.<Tag name>" contains the parameters for the Flange
Coordinate System (FCS) in the Kinematics Coordinate System (KCS).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2273

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2258)
Tag

Data type

FlangeInKcs.

TO_Struct_Kinematics_StatusFlan‐
geInKcs

x.

Values

W

Description

TO_Struct_Kinematics_StatusMo‐
tionVectorKcs
Acceleration

LREAL

-1.79769E308 t RON
o 1.79769E308

Acceleration of the x coordinate of the flange coordinate
system (FCS) in the kinematics coordinate system (KCS)

Position

LREAL

-1.79769E308 t RON
o 1.79769E308

x coordinate of the flange coordinate system in the kine‐
matics coordinate system

Velocity

LREAL

-1.79769E308 t RON
o 1.79769E308

Velocity of the x coordinate of the flange coordinate
system in the kinematics coordinate system

y.

TO_Struct_Kinematics_StatusMo‐
tionVectorKcs
Acceleration

LREAL

-1.79769E308 t RON
o 1.79769E308

Acceleration of the y coordinate of the flange coordinate
system in the kinematics coordinate system

Position

LREAL

-1.79769E308 t RON
o 1.79769E308

y coordinate of the flange coordinate system in the kine‐
matics coordinate system

Velocity

LREAL

-1.79769E308 t RON
o 1.79769E308

Velocity of the y coordinate of the flange coordinate
system in the kinematics coordinate system

z.

TO_Struct_Kinematics_StatusMo‐
tionVectorKcs
Acceleration

LREAL

-1.79769E308 t RON
o 1.79769E308

Acceleration of the z coordinate of the flange coordinate
system in the kinematics coordinate system

Position

LREAL

-1.79769E308 t RON
o 1.79769E308

z coordinate of the flange coordinate system in the kine‐
matics coordinate system

Velocity

LREAL

-1.79769E308 t RON
o 1.79769E308

Velocity of the z coordinate of the flange coordinate
system in the kinematics coordinate system

a.

TO_Struct_Kinematics_StatusMo‐
tionVectorKcs
Acceleration

LREAL

-1.79769E308 t RON
o 1.79769E308

Acceleration of the rotation A of the flange coordinate
system in the kinematics coordinate system

Position

LREAL

-1.79769E308 t RON
o 1.79769E308

Position of the rotation A of the flange coordinate system
in the kinematics coordinate system

Velocity

LREAL

-1.79769E308 t RON
o 1.79769E308

Velocity of the rotation A of the flange coordinate system in
the kinematics coordinate system

Consulte también
Tags: Coordinate systems and frames (Página 2071)

"StatusTool" tag (kinematics)
The tag structure "<TO>.StatusTool.<Tag name>" contains the parameters for the tool.

2274

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2258)
Tag

Data type

Values

StatusTool.

TO_Struct_Kinematics_StatusTool
1 to 3

W

ActiveTool

DINT

RON

Frame[1..1].

ARRAY [1..1] OF TO_Struct_Kine‐
matics_StatusKinematicsFrame

Description
Currently active tool

x

LREAL

-1.79769E308 t RON
o 1.79769E308

x coordinate of tool 1

y

LREAL

-1.79769E308 t RON
o 1.79769E308

y coordinate of tool 1

z

LREAL

-1.79769E308 t RON
o 1.79769E308

z coordinate of tool 1

a

LREAL

-1.79769E308 t RON
o 1.79769E308

A coordinate of tool 1

Consulte también
Tags: Coordinate systems and frames (Página 2071)

"StatusConveyor[1..3]" tag (kinematics)
The tag structure "<TO>.StatusConveyor[1..3].<Tag name>" contains the conveyor tracking
status.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2275

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2258)
Tag

Data type

StatusConveyor[1..3].

ARRAY [1..3] OF TO_Struct_Kine‐
matics_StatusConveyor

2276

Values

W

Description

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag
ConveyorBelt

Data type

Values

W

Description

DB_ANY

-

RON

Active leading-value-capable technology object to which
the object coordinate system (OCS) is coupled:
Leading-value-capable technology objects are:
● Positioning axis
● Synchronous axis
● External encoder
● Leading axis proxy

BeltPostion

LREAL

-

RON

Position of the leading-value-capable technology object.

ObjectPostion

TO_STRU CT_Kine‐
ma‐
tics_Sta‐
tusFrame

RON

Object position on the leading-value-capable technology
object.

x

LREAL

-1.0E12 to 1.0E RON
12

x coordinate

y

LREAL

-1.0E12 to 1.0E RON
12

y coordinate

z

LREAL

-1.0E12 to 1.0E RON
12

z coordinate

a

LREAL

-180.0 to 179.9 RON
99

A coordinate

b

LREAL

-180.0 to 179.9 RON
99

B coordinate

c

LREAL

-180.0 to 179.9 RON
99

C coordinate

DINT

0…3

Conveyor tracking status

TrackingState

RON

0

OCS not assigned
No OCS is assigned to a leading-value-capable
technology object.

1

OCS assigned
The OCS is assigned to a leading-value-capa‐
ble technology object. The kinematics is waiting
for the next path motion job to the OCS.

2

TCP approaches OCS
The OSC is assigned to a leading-value-capa‐
ble technology object. The position specified in
the OCS is approached with the current path
motion job of the kinematics.

3

TCP follows OCS
The OSC is assigned to a leading-value-capa‐
ble technology object.
The position of the OCS is reached. The kine‐
matics is moved with the position of the OCS.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2277

Control de movimiento
6.1 Using S7-1500 Motion Control

"StatusWorkspaceZone[1..10]" tag (kinematics)
The tag structure "<TO>.StatusWorkspaceZone[1..10].<Tag name>" contains the status of the
workspace zones.

Tags
Legend (Página 2258)
Tag

Data type

StatusWorkspaceZo‐
ne[1..10].

ARRAY [1..10] OF TO_Struct_Kine‐
matics_StatusWorkSpaceZone

Active
Valid
Type

ReferenceSystem

Frame.

BOOL
DINT

DINT

0 to 2

0…3

W

RON
RON
RON

RON

Description

FALSE

Workspace zone deactivated

TRUE

Workspace zone activated

FALSE

Zone is not defined

TRUE

Zone is defined

Type of the workspace zone
0

Bloc