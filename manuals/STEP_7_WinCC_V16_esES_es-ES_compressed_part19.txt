ea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, T, C, D, L

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

IN1

Input

WORD, DWORD

I, Q, M, D, L, P o
constante

Primer valor de la operaci√≥n
l√≥gica

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5169

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN2

Input

WORD, DWORD

I, Q, M, D, L, P o
constante

Segundo valor de la opera‚Äê
ci√≥n l√≥gica

OUT

Output

WORD, DWORD

I, Q, M, D, L, P

Resultado de la instrucci√≥n

En la lista desplegable "???" del cuadro de la instrucci√≥n se puede seleccionar el tipo de datos
de la instrucci√≥n.
Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
$1'
:25'
‡≤Ø7DJ,Q‡≤Ø

(1

‡≤Ø7DJB9DOXH‡≤Ø

,1

287

‡≤Ø7DJB9DOXH‡≤Ø

,1

(12

‡≤Ø7DJB5HVXOW‡≤Ø
‡≤Ø7DJ2XW‡≤Ø

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Par√°metro

Operando

Valor

IN1

Tag_Value1

01010101 01010101

IN2

Tag_Value2

00000000 00001111

OUT

Tag_Result

00000000 00000101

Si el operando "TagIn" devuelve el estado l√≥gico "1", se ejecuta la instrucci√≥n. El valor del
operando "Tag_Value1" se combina mediante una Y l√≥gica con el valor del operando
"Tag_Value2". El resultado se obtiene de bit en bit y se deposita en el operando "Tag_Result".
La salida de habilitaci√≥n ENO y la salida "TagOut" adoptan el estado l√≥gico "1".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Activar el bit de estado en operaciones l√≥gicas con palabras (P√°gina 194)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Insertar elementos FUP (P√°gina 8017)
Seleccionar el tipo de datos de un elemento FUP (P√°gina 8021)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

5170

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

OR: Operaci√≥n l√≥gica O
Descripci√≥n
La instrucci√≥n "Operaci√≥n l√≥gica O" permite combinar el valor de la entrada IN1 con el valor de
la entrada IN2 de bit en bit mediante una O l√≥gica y consultar el resultado en la salida OUT.
Al ejecutar la instrucci√≥n, el bit 0 del valor de la entrada IN1 se combina mediante una O l√≥gica
con el bit 0 del valor de la entrada IN2. El resultado se deposita en el bit 0 de la salida OUT. La
misma combinaci√≥n l√≥gica se realiza para todos los bits de la variable indicada.
El estado l√≥gico del bit de resultado es "1" si el estado l√≥gico de como m√≠nimo uno de los dos
bits que deben combinarse l√≥gicamente tambi√©n es "1". Si el estado l√≥gico de ambos bits que
deben combinarse l√≥gicamente es "0", se desactivar√° el bit de resultado correspondiente.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Operaci√≥n l√≥gica O":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, T, C, D, L

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

IN1

Input

WORD, DWORD

I, Q, M, D, L, P o
constante

Primer valor de la operaci√≥n
l√≥gica

IN2

Input

WORD, DWORD

I, Q, M, D, L, P o
constante

Segundo valor de la opera‚Äê
ci√≥n l√≥gica

OUT

Output

WORD, DWORD

I, Q, M, D, L, P

Resultado de la instrucci√≥n

En la lista desplegable "???" del cuadro de la instrucci√≥n se puede seleccionar el tipo de datos
de la instrucci√≥n.
Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
25
:25'
‡≤Ø7DJ,Q‡≤Ø

(1

‡≤Ø7DJB9DOXH‡≤Ø

,1

287

‡≤Ø7DJB9DOXH‡≤Ø

,1

(12

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

‡≤Ø7DJB5HVXOW‡≤Ø
‡≤Ø7DJ2XW‡≤Ø

5171

Instrucciones
4.2 Instrucciones
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Par√°metro

Operando

Valor

IN1

Tag_Value1

01010101 01010101

IN2

Tag_Value2

00000000 00001111

OUT

Tag_Result

01010101 01011111

Si el operando "TagIn" devuelve el estado l√≥gico "1", se ejecuta la instrucci√≥n. El valor del
operando "Tag_Value1" se combina mediante una O l√≥gica con el valor del operando
"Tag_Value2". El resultado se obtiene de bit en bit y se deposita en el operando "Tag_Result".
La salida de habilitaci√≥n ENO y la salida "TagOut" adoptan el estado l√≥gico "1".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Activar el bit de estado en operaciones l√≥gicas con palabras (P√°gina 194)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Insertar elementos FUP (P√°gina 8017)
Seleccionar el tipo de datos de un elemento FUP (P√°gina 8021)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

XOR: Operaci√≥n l√≥gica O-exclusiva
Descripci√≥n
La instrucci√≥n "Operaci√≥n l√≥gica O-exclusiva" permite combinar el valor de la entrada IN1 con
el valor de la entrada IN2 de bit en bit mediante una O-exclusiva l√≥gica y consultar el resultado
en la salida OUT.
Al ejecutar la instrucci√≥n, el bit 0 del valor de la entrada IN1 se combina mediante una Oexclusiva l√≥gica con el bit 0 del valor de la entrada IN2. El resultado se deposita en el bit 0 de
la salida OUT. La misma combinaci√≥n l√≥gica se realiza para todos los dem√°s bits del valor
indicado.
El estado l√≥gico del bit de resultado es "1" si el estado l√≥gico de uno de los dos bits que deben
combinarse l√≥gicamente tambi√©n es "1". Si el estado l√≥gico de ambos bits que deben
combinarse l√≥gicamente es "1" o "0", se desactivar√° el bit de resultado correspondiente.

5172

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Operaci√≥n l√≥gica O-exclusiva":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, T, C, D, L

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

IN1

Input

WORD, DWORD

I, Q, M, D, L, P o
constante

Primer valor de la operaci√≥n
l√≥gica

IN2

Input

WORD, DWORD

I, Q, M, D, L, P o
constante

Segundo valor de la opera‚Äê
ci√≥n l√≥gica

OUT

Output

WORD, DWORD

I, Q, M, D, L, P

Resultado de la instrucci√≥n

En la lista desplegable "???" del cuadro de la instrucci√≥n se puede seleccionar el tipo de datos
de la instrucci√≥n.
Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
;25
:25'
‡≤Ø7DJ,Q‡≤Ø

(1

‡≤Ø7DJB9DOXH‡≤Ø

,1

287

‡≤Ø7DJB9DOXH‡≤Ø

,1

(12

‡≤Ø7DJB5HVXOW‡≤Ø
‡≤Ø7DJ2XW‡≤Ø

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Par√°metro

Operando

Valor

IN1

Tag_Value1

01010101 01010101

IN2

Tag_Value2

00000000 00001111

OUT

Tag_Result

01010101 01011010

Si el operando "TagIn" devuelve el estado l√≥gico "1", se ejecuta la instrucci√≥n. El valor del
operando "Tag_Value1" se combina mediante una O-exclusiva l√≥gica con el valor del
operando "Tag_Value2". El resultado se obtiene de bit en bit y se deposita en el operando
"Tag_Result". La salida de habilitaci√≥n ENO y la salida "TagOut" adoptan el estado l√≥gico "1".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Activar el bit de estado en operaciones l√≥gicas con palabras (P√°gina 194)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Insertar elementos FUP (P√°gina 8017)
Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5173

Instrucciones
4.2 Instrucciones
Seleccionar el tipo de datos de un elemento FUP (P√°gina 8021)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

INV: Complemento a 1
Descripci√≥n
La instrucci√≥n "Complemento a 1" permite invertir el estado l√≥gico de los bits de la entrada IN.
Al ejecutar la instrucci√≥n, el valor de la entrada IN se combina con una operaci√≥n l√≥gica Oexclusiva utilizando una plantilla hexadecimal (W#16#FFFF para n√∫meros de 16 bits o
DW#16#FFFF FFFF para n√∫meros de 32 bits). Esto invierte el estado l√≥gico de los distintos
bits y deposita el resultado en la salida OUT.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Complemento a 1":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, T, C, D, L

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

IN

Input

Enteros

I, Q, M, D, L, P o
constante

Valor de entrada

OUT

Output

Enteros

I, Q, M, D, L, P

Complemento a 1 del valor
de la entrada IN

En la lista desplegable "???" del cuadro de la instrucci√≥n se puede seleccionar el tipo de datos
de la instrucci√≥n.
Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
,19
‡≤Ø7DJ,Q‡≤Ø
‡≤Ø7DJ,QB9DOXH‡≤Ø

,17
(1

287

,1

(12

‡≤Ø7DJ2XWB9DOXH‡≤Ø
‡≤Ø7DJ2XW‡≤Ø

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Par√°metro

5174

Operando

Valor

IN

TagIn_Value

W#16#000F

OUT

TagOut_Value

W#16#FFF0

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Si el operando "TagIn" devuelve el estado l√≥gico "1", se ejecuta la instrucci√≥n. La instrucci√≥n
invierte el estado l√≥gico de los distintos bits de la entrada "TagIn_Value" y escribe el resultado
en la salida "TagOut_Value". La salida de habilitaci√≥n ENO y la salida "TagOut" adoptan el
estado l√≥gico "1".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Insertar elementos FUP (P√°gina 8017)
Seleccionar el tipo de datos de un elemento FUP (P√°gina 8021)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

DECO: Descodificar
Descripci√≥n
La instrucci√≥n "Descodificar" permite activar un bit predeterminado por el valor de entrada en
el valor de salida.
La instrucci√≥n "Descodificar" lee el valor de la entrada IN y activa el bit del valor de salida, cuya
posici√≥n de bit equivale al valor le√≠do. Los dem√°s bits del valor de salida se rellenan con ceros.
Si el valor de la entrada IN es mayor que 31, se ejecuta una instrucci√≥n modulo 32.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Descodificar":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, D, L, T, C

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

IN

Input

WORD

I, Q, M, D, L, P o
constante

Posici√≥n del bit que se activa
en el valor de salida.

OUT

Output

DWORD

I, Q, M, D, L, P

Valor de salida

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5175

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
'(&2
:25' WR

':25'

‡≤Ø7DJ,Q‡≤Ø

(1

287

‡≤Ø7DJ,QB9DOXH‡≤Ø

,1

(12

‡≤Ø7DJ2XWB9DOXH‡≤Ø
‡≤Ø7DJ2XW‡≤Ø

La figura siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
‡≤Ø7DJ,QB9DOXH‡≤Ø 

‡≤Ø7DJ2XWB9DOXH‡≤Ø

 



 

Si el operando "TagIn" devuelve el estado l√≥gico "1", se ejecuta la instrucci√≥n. La instrucci√≥n
lee el n√∫mero de bit "3" del valor del operando "TagIn_Value" de la entrada y activa el tercer bit
del valor del operando "TagOut_Value" de la salida.
Si no ocurren errores al ejecutar la instrucci√≥n, la salida de habilitaci√≥n ENO devuelve el estado
l√≥gico "1" y se activa la salida "TagOut".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Insertar elementos FUP (P√°gina 8017)
Seleccionar el tipo de datos de un elemento FUP (P√°gina 8021)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

ENCO: Codificar
Descripci√≥n
La instrucci√≥n "Codificar" lee el n√∫mero del bit menos significativo en el valor de entrada y lo
emite en la salida OUT.
La instrucci√≥n "Codificar" selecciona el bit menos significativo del valor de la entrada IN y
escribe su n√∫mero de bit en la variable de la salida OUT.

5176

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Codificar":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, D, L, T, C

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

IN

Input

DWORD

I, Q, M, D, L, P o
constante

Valor de entrada

OUT

Output

INT

I, Q, M, D, L, P

Valor de salida

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
(1&2
':25'
‡≤Ø7DJ,Q‡≤Ø
‡≤Ø7DJ,QB9DOXH‡≤Ø

(1

287

,1

(12

‡≤Ø7DJ2XWB9DOXH‡≤Ø
‡≤Ø7DJ2XW‡≤Ø

La figura siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:

‡≤Ø7DJ,QB9DOXH‡≤Ø
‡≤Ø7DJ2XWB9DOXH‡≤Ø

 



 


Si el operando "TagIn" devuelve el estado l√≥gico "1", se ejecuta la instrucci√≥n. La instrucci√≥n
selecciona el bit menos significativo activado en la entrada "TagIn_Value" y escribe el bit "3" en
la variable de la salida "TagOut_Value".
Si no ocurren errores al ejecutar la instrucci√≥n, la salida de habilitaci√≥n ENO devuelve el estado
l√≥gico "1" y se activa la salida "TagOut".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Insertar elementos FUP (P√°gina 8017)
Seleccionar el tipo de datos de un elemento FUP (P√°gina 8021)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5177

Instrucciones
4.2 Instrucciones

SEL: Seleccionar
Descripci√≥n
La instrucci√≥n "Seleccionar" permite elegir, en funci√≥n de un interruptor (entrada G), una de las
entradas IN0 o IN1 y copia su contenido en la salida OUT. Si la entrada G tiene el estado l√≥gico
"0", se copia el valor de la entrada IN0. Si la entrada G tiene el estado l√≥gico "1", se copia el
valor de la entrada IN1 en la salida OUT.
La instrucci√≥n solo se puede ejecutar si el estado l√≥gico de la entrada de habilitaci√≥n EN es "1"
y las variables de todos los par√°metros son del mismo tipo de datos.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Seleccionar":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, D, L, T, C

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

G

Input

BOOL

I, Q, M, D, L, T, C

IN0

Input

I, Q, M, D, L, P
Secuencias de
bits, enteros, n√∫‚Äê
meros en coma flo‚Äê
tante, temporiza‚Äê
dores, CHAR,
TOD, DATE

Primer valor de entrada

IN1

Input

I, Q, M, D, L, P
Secuencias de
bits, enteros, n√∫‚Äê
meros en coma flo‚Äê
tante, temporiza‚Äê
dores, CHAR,
TOD, DATE

Segundo valor de entrada

OUT

Output

I, Q, M, D, L, P
Secuencias de
bits, enteros, n√∫‚Äê
meros en coma flo‚Äê
tante, temporiza‚Äê
dores, CHAR,
TOD, DATE

Resultado

Interruptor

En la lista desplegable "???" del cuadro de la instrucci√≥n se puede seleccionar el tipo de datos
de la instrucci√≥n.
Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

5178

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
6(/
:25'
‡≤Ø7DJ,Q‡≤Ø
‡≤Ø7DJ,QB*‡≤Ø

(1
*

‡≤Ø7DJ2XW‡≤Ø

‡≤Ø7DJ,QB9DOXH‡≤Ø

,1

(12

‡≤Ø7DJ,QB9DOXH‡≤Ø

,1

287

‡≤Ø7DJ2XWB9DOXH‡≤Ø

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Par√°metro

Operando

Valor

G

TagIn_G

0

1

IN0

TagIn_Value0

W#16#0000

W#16#4C

IN1

TagIn_Value1

W#16#FFFF

W#16#5E

OUT

TagOut_Value

W#16#0000

W#16#5E

Si el operando "TagIn" tiene el estado l√≥gico "1", se ejecuta la instrucci√≥n. Dependiendo del
estado l√≥gico de la entrada "TagIn_G", se selecciona el valor de la entrada "TagIn_Value0" o
"TagIn_Value1" y se copia en la salida "TagOut_Value". Si no se producen errores al ejecutar
la instrucci√≥n, la salida de habilitaci√≥n ENO devuelve el estado l√≥gico "1" y se activa la salida
"TagOut".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Insertar elementos FUP (P√°gina 8017)
Seleccionar el tipo de datos de un elemento FUP (P√°gina 8021)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

Desplazamiento y rotaci√≥n
SHR: Desplazar a la derecha
Descripci√≥n
La instrucci√≥n "Desplazar a la derecha" permite desplazar el contenido del operando de la
entrada IN de bit en bit hacia la derecha y consultar el resultado en la salida OUT. El par√°metro
N determina el n√∫mero de bits que debe desplazarse el valor indicado.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5179

Instrucciones
4.2 Instrucciones
Si el valor del par√°metro N es "0", el valor de la entrada IN se copia en el operando de la salida
OUT.
Si el valor del par√°metro N es mayor que el n√∫mero de bits disponibles, el valor del operando
de la entrada IN se desplaza hacia la derecha las posiciones de bit disponibles.
En los valores sin signo, se rellenan con ceros los bits que quedan libres en el √°rea izquierda
del operando al realizar el desplazamiento. Si el valor indicado lleva signo, las posiciones libres
se ocupan con el estado l√≥gico del bit de signo.
La figura siguiente muestra c√≥mo el contenido de un operando del tipo de datos INT se
desplaza cuatro posiciones de bit hacia la derecha:


,1



1

%LW
GHVLJQR

287



 













































SRVLFLRQHV

























(VWRVFXDWURELWV
VHSLHUGHQ

/RVELWVTXHTXHGDQOLEUHV
VHUHOOHQDQFRQHOHVWDGRO¬µJLFR
GHOELWGHVLJQR

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Desplazar a la derecha":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, T, C, D, L

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

IN

Input

BYTE, WORD,
DWORD, INT,
DINT

I, Q, M, D, L, P o
constante

Valor que se desplaza

N

Input

BYTE, WORD, INT I, Q, M, D, L, P o
constante

N√∫mero de posiciones de bit
que se desplaza el valor

OUT

Output

BYTE, WORD,
DWORD, INT,
DINT

Resultado de la instrucci√≥n

I, Q, M, D, L

En la lista desplegable "???" del cuadro de la instrucci√≥n se puede seleccionar el tipo de datos
de la instrucci√≥n.
Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

5180

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
6+5
:25'
‡≤Ø7DJ,Q‡≤Ø

(1

‡≤Ø7DJ,QB9DOXH‡≤Ø

,1

287

‡≤Ø7DJB1XPEHU‡≤Ø

1

(12

‡≤Ø7DJ2XWB9DOXH‡≤Ø
‡≤Ø7DJ2XW‡≤Ø
6

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Par√°metro

Operando

Valor

IN

TagIn_Value

0011 1111 1010 1111

N

Tag_Number

3

OUT

TagOut_Value

0000 0111 1111 0101

Si el operando "TagIn" devuelve el estado l√≥gico "1", se ejecuta la instrucci√≥n. El contenido del
operando "TagIn_Value" se desplaza tres posiciones de bit hacia la derecha. El resultado se
emite en la salida "TagOut_Value". Si no se producen errores al ejecutar la instrucci√≥n, la
salida de habilitaci√≥n ENO devuelve el estado l√≥gico "1" y se activa la salida "TagOut".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Activar el bit de estado en instrucciones de desplazamiento y rotaci√≥n (P√°gina 194)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Insertar elementos FUP (P√°gina 8017)
Seleccionar el tipo de datos de un elemento FUP (P√°gina 8021)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

SHL: Desplazar a la izquierda
Descripci√≥n
La instrucci√≥n "Desplazar a la izquierda" permite desplazar el contenido del operando de la
entrada IN de bit en bit hacia la izquierda y consultar el resultado en la salida OUT. El
par√°metro N determina el n√∫mero de bits que debe desplazarse el valor indicado.
Si el valor del par√°metro N es "0", el valor de la entrada IN se copia en el operando de la salida
OUT.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5181

Instrucciones
4.2 Instrucciones
Si el valor del par√°metro N es mayor que el n√∫mero de bits disponibles, el valor del operando
de la entrada IN se desplaza hacia la izquierda las posiciones de bit disponibles.
Los bits que quedan libres en el √°rea derecha del operando al realizar el desplazamiento se
rellenan con ceros.
La figura siguiente muestra c√≥mo el contenido de un operando del tipo de datos WORD se
desplaza seis posiciones de bit hacia la izquierda:


,1



 








1

287
























SRVLFLRQHV

     

































/RVELWVTXHTXHGDQ
OLEUHVVHUHOOHQDQ
FRQFHURV

(VWRVVHLVELWV
VHSLHUGHQ

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Desplazar a la izquierda":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, T, C, D, L

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

IN

Input

BYTE, WORD,
DWORD, INT,
DINT

I, Q, M, D, L, P o
constante

Valor que se desplaza

N

Input

BYTE, WORD, INT I, Q, M, D, L, P o
constante

N√∫mero de posiciones de bit
que se desplaza el valor

OUT

Output

BYTE, WORD,
DWORD, INT,
DINT

Resultado de la instrucci√≥n

I, Q, M, D, L

En la lista desplegable "???" del cuadro de la instrucci√≥n se puede seleccionar el tipo de datos
de la instrucci√≥n.
Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

5182

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
6+/
:25'
‡≤Ø7DJ,Q‡≤Ø

(1

‡≤Ø7DJ,QB9DOXH‡≤Ø

,1

‡≤Ø7DJB1XPEHU‡≤Ø

1

287

‡≤Ø7DJ2XWB9DOXH‡≤Ø
‡≤Ø7DJ2XW‡≤Ø

(12

6

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Par√°metro

Operando

Valor

IN

TagIn_Value

0011 1111 1010 1111

N

Tag_Number

4

OUT

TagOut_Value

1111 1010 1111 0000

Si el operando "TagIn" devuelve el estado l√≥gico "1", se ejecuta la instrucci√≥n. El contenido del
operando "TagIn_Value" se desplaza cuatro posiciones de bit hacia la izquierda. El resultado
se emite en la salida "TagOut_Value". Si no se producen errores al ejecutar la instrucci√≥n, la
salida de habilitaci√≥n ENO devuelve el estado l√≥gico "1" y se activa la salida "TagOut".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Activar el bit de estado en instrucciones de desplazamiento y rotaci√≥n (P√°gina 194)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Insertar elementos FUP (P√°gina 8017)
Seleccionar el tipo de datos de un elemento FUP (P√°gina 8021)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

ROR: Rotar a la derecha
Descripci√≥n
La instrucci√≥n "Rotar a la derecha" permite rotar el contenido del operando de la entrada IN de
bit en bit hacia la derecha y consultar el resultado en la salida OUT. El par√°metro N determina
el n√∫mero de bits que debe rotarse el valor indicado. Los bits que quedan libres al realizar la
rotaci√≥n se rellenan con los bits desplazados hacia fuera.
Si el valor del par√°metro N es "0", el valor de la entrada IN se copia en el operando de la salida
OUT.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5183

Instrucciones
4.2 Instrucciones
Si el valor del par√°metro N es mayor que el n√∫mero de bits disponibles, el valor del operando
en la entrada IN rota de todos modos el n√∫mero indicado de posiciones de bit.
La figura siguiente muestra c√≥mo el contenido de un operando del tipo de datos DWORD rota
tres posiciones hacia la derecha:


,1

 



       

1

SRVLFLRQHV

287

        
(OHVWDGRO¬µJLFRGHORVWUHV
ELWVGHVSOD]DGRVVHLQVHUWD
HQODVSRVLFLRQHVTXHTXHGDQ
OLEUHV

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Rotar a la derecha":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, T, C, D, L

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

IN

Input

BYTE, WORD,
DWORD, DINT

I, Q, M, D, L, P o
constante

Valor que se rota

N

Input

BYTE, WORD, INT I, Q, M, D, L, P o
constante

N√∫mero de posiciones de bit
que rota el valor

OUT

Output

BYTE, WORD,
DWORD, DINT

Resultado de la instrucci√≥n

I, Q, M, D, L

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

5184

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
525
:25'
‡≤Ø7DJ,Q‡≤Ø

(1

‡≤Ø7DJ,QB9DOXH‡≤Ø

,1

‡≤Ø7DJB1XPEHU‡≤Ø

1

287

‡≤Ø7DJ2XWB9DOXH‡≤Ø
‡≤Ø7DJ2XW‡≤Ø

(12

6

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Par√°metro

Operando

Valor

IN

TagIn_Value

1010 1010 0000 1111 0000
1111 0101 0101

N

Tag_Number

5

OUT

TagOut_Value

1010 1101 0101 0000 0111
1000 0111 1010

Si el operando "TagIn" devuelve el estado l√≥gico "1", se ejecuta la instrucci√≥n. El contenido del
operando "TagIn_Value" se rota cinco posiciones de bit hacia la derecha. El resultado se emite
en la salida "TagOut_Value". Si no se producen errores al ejecutar la instrucci√≥n, la salida de
habilitaci√≥n ENO devuelve el estado l√≥gico "1" y se activa la salida "TagOut".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Activar el bit de estado en instrucciones de desplazamiento y rotaci√≥n (P√°gina 194)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Insertar elementos FUP (P√°gina 8017)
Seleccionar el tipo de datos de un elemento FUP (P√°gina 8021)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

ROL: Rotar a la izquierda
Descripci√≥n
La instrucci√≥n "Rotar a la izquierda" permite rotar el contenido del operando de la entrada IN
de bit en bit hacia la izquierda y consultar el resultado en la salida OUT. El par√°metro N
determina el n√∫mero de bits que debe rotarse el valor indicado. Los bits que quedan libres al
realizar la rotaci√≥n se rellenan con los bits desplazados hacia fuera.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5185

Instrucciones
4.2 Instrucciones
Si el valor del par√°metro N es "0", el valor de la entrada IN se copia en el operando de la salida
OUT.
Si el valor del par√°metro N es mayor que el n√∫mero de bits disponibles, el valor del operando
en la entrada IN rota de todos modos el n√∫mero indicado de posiciones de bit.
La figura siguiente muestra c√≥mo el contenido de un operando del tipo de datos DWORD rota
tres posiciones hacia la izquierda:


,1

 

       

1

287



G¬ØJLWRV

        
(OHVWDGRO¬µJLFRGHORVWUHV
ELWVGHVSOD]DGRVVHLQWURGXFHHQODV
SRVLFLRQHVTXHKDQTXHGDGROLEUHV

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Rotar a la izquierda":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, T, C, D, L

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

IN

Input

BYTE, WORD,
DWORD, DINT

I, Q, M, D, L, P o
constante

Valor que se rota.

N

Input

BYTE, WORD, INT I, Q, M, D, L, P o
constante

N√∫mero de bits que rota el
valor.

OUT

Output

BYTE, WORD,
DWORD, DINT

Resultado de la instrucci√≥n

I, Q, M, D, L

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

5186

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
52/
':25'
‡≤Ø7DJ,Q‡≤Ø

(1

‡≤Ø7DJ,QB9DOXH‡≤Ø

,1

‡≤Ø7DJB1XPEHU‡≤Ø

1

287

‡≤Ø7DJ2XWB9DOXH‡≤Ø
‡≤Ø7DJ2XW‡≤Ø

(12

6

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Par√°metro

Operando

Valor

IN

TagIn_Value

1111 0000 1010 1010 0000
1111 0000 1111

N

Tag_Number

5

OUT

TagOut_Value

0001 0101 0100 0001 1110
0001 1111 1110

Si la entrada "TagIn" devuelve el estado l√≥gico "1", se ejecuta la instrucci√≥n. El contenido del
operando "TagIn_Value" se rota cinco posiciones de bit hacia la izquierda. El resultado se
emite en la salida "TagOut_Value". Si no se producen errores al ejecutar la instrucci√≥n, la
salida de habilitaci√≥n ENO devuelve el estado l√≥gico "1" y se activa la salida "TagOut".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Activar el bit de estado en instrucciones de desplazamiento y rotaci√≥n (P√°gina 194)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Insertar elementos FUP (P√°gina 8017)
Seleccionar el tipo de datos de un elemento FUP (P√°gina 8021)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5187

Instrucciones
4.2 Instrucciones

Otras instrucciones
---| |---: Consultar si el bit de estado es 1
Descripci√≥n
Con la instrucci√≥n "Consultar si el bit de estado es 1" es posible consultar el estado l√≥gico de
los siguientes bits de estado:
‚óè BR: Resultado binario
‚óè OV: Rebase por exceso
‚óè OS: Desbordamiento con memoria
‚óè CC 0 y CC 1: Bits de visualizaci√≥n
Qu√© bits de estado se consultan se determina mediante la selecci√≥n del s√≠mbolo
correspondiente en la lista desplegable de la instrucci√≥n. La siguiente tabla muestra las
posibilidades de consulta de los bits de estado:
S√≠mbolo

Consulta

Explicaci√≥n

==0

CC 0 = 0 y CC 1 = 0

La instrucci√≥n consulta si el re‚Äê
sultado de una funci√≥n matem√°‚Äê
tica es igual a 0.

<>0

CC 0 = 1 y CC 1 = 0

La instrucci√≥n consulta si el re‚Äê
sultado de una funci√≥n matem√°‚Äê
tica es diferente a 0.

o
CC 0 = 0 y CC 1 = 0

5188

>=0

CC 0 = 0

La instrucci√≥n consulta si el re‚Äê
sultado de una funci√≥n matem√°‚Äê
tica es mayor o igual que 0.

<=0

CC 1 = 0

La instrucci√≥n consulta si el re‚Äê
sultado de una funci√≥n matem√°‚Äê
tica es menor o igual que 0.

>0

CC 0 = 1 y CC 1 = 0

La instrucci√≥n consulta si el re‚Äê
sultado de una funci√≥n matem√°‚Äê
tica es mayor que 0.

<0

CC 1 = 0 y CC 1 = 0

La instrucci√≥n consulta si el re‚Äê
sultado de una funci√≥n matem√°‚Äê
tica es menor que 0.

UO

CC 1 = 1 y CC 1 = 0

La instrucci√≥n consulta si el re‚Äê
sultado de una funci√≥n matem√°‚Äê
tica no es v√°lido. La causa de un
resultado inv√°lido puede ser un
n√∫mero en coma flotante no v√°‚Äê
lido o una divisi√≥n entre cero.

OV

OV = 1

La instrucci√≥n consulta si se ha
producido un desbordamiento
num√©rico.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
S√≠mbolo

Consulta

Explicaci√≥n

OS

OS = 1

La instrucci√≥n consulta si se ha
producido un desbordamiento
num√©rico con memoria en una
instrucci√≥n.

BR

BR = 1

La instrucci√≥n consulta el estado
l√≥gico del bit de estado BR.

Si la respuesta es afirmativa, la instrucci√≥n devuelve el estado l√≥gico "1". Si no se cumple la
condici√≥n, la instrucci√≥n devuelve el estado l√≥gico "0".
Se puede programar una consulta del bit de estado en "0" con ayuda de la instrucci√≥n "Invertir
RLO".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
6HJPHQWR
08/
,17

‡≤Ø7DJ,Q‡≤Ø

(1

‡≤Ø7DJB9DOXH‡≤Ø

,1

287

‡≤Ø7DJB9DOXH‡≤Ø

,1

(12

‡≤Ø7DJB5HVXOW‡≤Ø
‡≤Ø7DJ2XW‡≤Ø
6

6HJPHQWR
29

‡≤Ø7DJ29‡≤Ø
6

Cuando el operando "TagIn" devuelve el estado l√≥gico "1", se ejecuta la instrucci√≥n
"Multiplicar" (MUL). Si se produce un desbordamiento durante la ejecuci√≥n de la instrucci√≥n
"Multiplicar" se activa el bit de estado OV. Tras la consulta del bit de estado OV, se ejecuta la
instrucci√≥n "Activar salida" (S) en el segmento 2 y se activa el operando "TagOV".

Consulte tambi√©n
Principios b√°sicos de la palabra de estado (P√°gina 184)
Insertar elementos FUP (P√°gina 8017)
Editar elementos FUP (P√°gina 8034)
Activar el bit de estado (P√°gina 186)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5189

Instrucciones
4.2 Instrucciones

CALL: Llamar bloque
Descripci√≥n
La instrucci√≥n "Llamar bloque" llama una funci√≥n (FC) sin par√°metros. En funci√≥n de la
operaci√≥n l√≥gica precedente, se puede tratar de una llamada absoluta o condicionada.
En la secci√≥n de instrucciones de una funci√≥n (FC) no puede indicar como operando ning√∫n
par√°metro del tipo de datos BLOCK_FC en una llamada condicional. En un bloque de funci√≥n
(FB) tampoco puede indiciar como operando un par√°metro del tipo BLOCK_FC.
S√≥lo se ejecutar√° una llamada condicional cuando el resultado l√≥gico (RLO) sea "1". Si no se
ejecuta una llamada condicionada, despu√©s de la operaci√≥n de llamada el RLO es "0". Si se
ejecuta la operaci√≥n, √©sta trabaja del modo siguiente:
‚óè Guarda la direcci√≥n de retorno del bloque que efect√∫a la llamada.
‚óè Guarda los dos registros de bloque de datos (bloque de datos y bloque de datos de
instancia).
‚óè Actualiza el √°rea de datos locales para la FC o SFC llamada.
‚óè Desplaza el bit MA (bit MCR activo) a la pila de bloques (pila BSTACK).

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Llamar bloque":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Bloque>

Output

BLOCK_FC

-

Funci√≥n llamada

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
)&
&$//
‡≤Ø7DJB‡≤Ø

Se llama la funci√≥n "FC3" cuando el operando "Tag_1" tiene el estado l√≥gico "1".

Consulte tambi√©n
El MCR (Master Control Relay) (P√°gina 203)
Insertar elementos FUP (P√°gina 8017)
Editar elementos FUP (P√°gina 8034)

5190

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

SAVE: Guardar RLO en bit BR
Descripci√≥n
La instrucci√≥n "Guardar RLO en bit BR" permite guardar el resultado l√≥gico (RLO) en el
resultado binario (BR). Durante la ejecuci√≥n, la instrucci√≥n transfiere el estado l√≥gico del
resultado l√≥gico actual al bit de estado BR. La instrucci√≥n trabaja independientemente de las
condiciones y no influye en ning√∫n otro bit de estado.
Nota
Tras aplicar la instrucci√≥n "Guardar RLO en bit BR", el bit BR puede ser modificado
nuevamente por instrucciones posteriores del mismo bloque o de bloques de nivel inferior.
La instrucci√≥n "Guardar RLO en bit BR" tambi√©n se utiliza para controlar el estado de ejecuci√≥n
de un bloque. Si, p. ej., la instrucci√≥n "Guardar RLO en bit BR" se programa al final de un
bloque, el bit BR se pone al estado l√≥gico del resultado l√≥gico actual del bloque. Si el bloque
se ejecuta sin fallos, tanto el bit BR como la salida de habilitaci√≥n ENO se establecen como
resultado l√≥gico "1" en el bloque que efect√∫a la llamada. El estado l√≥gico "0" se asigna al bit BR
si se han producido errores durante el procesamiento del bloque. Mediante consulta del bit BR
es posible programar un tratamiento de errores.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
‡≤Ø7DJ,QB‡≤Ø



‡≤Ø7DJ,QB‡≤Ø

6$9(

El bit BR se ajusta en el estado l√≥gico "1" si los operandos "TagIn_1" y "TagIn_2" devuelven el
estado l√≥gico "1".

Consulte tambi√©n
Principios b√°sicos de la palabra de estado (P√°gina 184)
Ejemplo del mecanismo EN/ENO en FUP (P√°gina 161)
Insertar elementos FUP (P√°gina 8017)
Editar elementos FUP (P√°gina 8034)

MCR<: Abrir √°reas MCR
Descripci√≥n
La instrucci√≥n "Abrir √°reas MCR" guarda el resultado l√≥gico (RLO) en la pila MCR y cambia la
dependencia MCR dentro de un √°rea MCR (MCR = Master Control Relay).

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5191

Instrucciones
4.2 Instrucciones
La pila MCR puede contener como m√°ximo 8 entradas y funciona como una memoria
intermedia LIFO (Last In, First Out). Cuando la pila est√° llena, la instrucci√≥n genera un mensaje
de error (MCRF).
Nota
Observe la informaci√≥n contenida en el apartado "Indicaciones importantes sobre el uso de la
funcionalidad MCR", en "Consulte tambi√©n".
El principio y el fin de un √°rea MCR se definen mediante las instrucciones "Activar √°rea MCR"
(MCRA) y "Desactivar √°rea MCR" (MCRD). Dentro del √°rea MCR definida es posible activar y
desactivar la dependencia MCR para una o varias partes del programa.
La dependencia MCR se activa si el RLO es "1" antes de procesar la instrucci√≥n. Si el RLO es
"0" antes de la instrucci√≥n, la dependencia MCR se desactiva. El final de la secci√≥n del
programa dependiente de MCR se programa mediante la instrucci√≥n "Cerrar √°reas MCR". La
secci√≥n del programa que se encuentra entre las dos instrucciones se ve influenciada por el
MCR. Solo est√°n afectadas las siguientes instrucciones dependientes de MCR:
‚óè Asignaci√≥n
‚óè Activar salida (S)
‚óè Desactivar salida (R)
‚óè Flipflop de desactivaci√≥n/activaci√≥n (RS)
‚óè Flipflop de activaci√≥n/desactivaci√≥n (SR)
‚óè Copiar valor (MOVE)
Tambi√©n es posible anidar la activaci√≥n y desactivaci√≥n de la dependencia MCR programando
la instrucci√≥n "Abrir √°reas MCR" en una secci√≥n del programa dependiente de MCR. Esta
instrucci√≥n se puede anidar hasta 8 niveles de profundidad. La dependencia MCR de la parte
del programa de nivel superior controla las dependencias MCR en todas las partes del
programa subordinadas. Si la dependencia MCR en la parte del programa de nivel superior
est√° desactivada, no es posible activarla en una parte subordinada del programa dependiente
de MCR.
Si dentro de un √°rea MCR se llama un bloque, la dependencia MCR est√° desactivada en el
bloque llamado. Cuando se sale de un bloque, la dependencia MCR se ajusta igual que estaba
antes de llamarlo.
Las instrucciones "Abrir √°reas MCR" y "Cerrar √°reas MCR" deben programarse siempre de dos
en dos. Si una de las dos instrucciones no est√° programada, se dispara un error de pila MCR.

5192

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
6HJPHQWR
0&5$
6HJPHQWR
‡≤Ø7DJ,QB‡≤Ø

0&5

6HJPHQWR
‡≤Ø7DJ,QB‡≤Ø
6HJPHQWR

0&5

‡≤Ø7DJ2XWB‡≤Ø

|QLYHOGHO
¬£UHD0&5
HUQLYHOGHO
¬£UHD0&5

‡≤Ø7DJ,QB‡≤Ø
6HJPHQWR
0&5!
6HJPHQWR

‡≤Ø7DJ2XWB‡≤Ø

‡≤Ø7DJ,QB‡≤Ø
6HJPHQWR
0&5!
6HJPHQWR
0&5'

En el segmento 1 se programa el inicio del √°rea MCR. Si el operando "TagIn_1" devuelve el
estado l√≥gico "1", se conecta la dependencia MCR en el primer nivel del √°rea MCR. En ese
caso, el estado l√≥gico del operando "TagIn_4" est√° asignado al operando "TagOut_2"
(segmento 6). Si el operando "TagIn_1" tiene el estado l√≥gico "0", se desactiva la dependencia
MCR y se pone a "0" el operando "TagOut_2". En el segmento 7 se desconecta la dependencia
MCR del √°rea MCR.
En el segmento 3 se activa la dependencia MCR en el segundo nivel del √°rea MCR si el
operando "TagIn_2" devuelve el estado l√≥gico "1" y el primer nivel del √°rea MCR est√° activado.
En ese caso, el estado l√≥gico del operando "TagIn_3" se asigna al operando "TagOut_1". Si el
operando "TagIn_2" tiene el estado l√≥gico "0", se desactiva la dependencia MCR y se pone a
"0" el operando "TagOut_1". En el segmento 5 se desactiva la dependencia MCR en el
segundo nivel del √°rea MCR. En el segmento 8 se programa el final del √°rea MCR.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5193

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
El MCR (Master Control Relay) (P√°gina 203)
Indicaciones importantes sobre el uso de la funci√≥n MCR (P√°gina 204)
MCR>: Cerrar √°reas MCR (P√°gina 5194)
MCRA: Activar √°rea MCR (P√°gina 5196)
MCRD: Desactivar √°rea MCR (P√°gina 5198)
Insertar elementos FUP (P√°gina 8017)
Editar elementos FUP (P√°gina 8034)

MCR>: Cerrar √°reas MCR
Descripci√≥n
La instrucci√≥n "Cerrar √°reas MCR" cierra una secci√≥n de programa dependiente de MCR
(MCR = Master Control Relay). Tambi√©n borra el resultado l√≥gico (RLO) de la √∫ltima entrada
de la pila MCR.
La pila MCR puede contener como m√°ximo 8 entradas y funciona como una memoria
intermedia LIFO (Last In, First Out). Cuando la pila ya est√° vac√≠a, la instrucci√≥n genera un
mensaje de error (MCRF).
Nota
Observe la informaci√≥n contenida en el apartado "Indicaciones importantes sobre el uso de la
funcionalidad MCR", en "Consulte tambi√©n".
La dependencia MCR se programa con la instrucci√≥n "Abrir √°reas MCR". Las instrucciones
"Abrir √°reas MCR" y "Cerrar √°reas MCR" deben programarse siempre de dos en dos. Si una
de las dos instrucciones no est√° programada, se dispara un error de pila MCR.

5194

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
6HJPHQWR
0&5$
6HJPHQWR
‡≤Ø7DJ,QB‡≤Ø

0&5

6HJPHQWR
‡≤Ø7DJ,QB‡≤Ø
6HJPHQWR

0&5

‡≤Ø7DJ2XWB‡≤Ø

|QLYHOGHO
¬£UHD0&5
HUQLYHOGHO
¬£UHD0&5

‡≤Ø7DJ,QB‡≤Ø
6HJPHQWR
0&5!
6HJPHQWR

‡≤Ø7DJ2XWB‡≤Ø

‡≤Ø7DJ,QB‡≤Ø
6HJPHQWR
0&5!
6HJPHQWR
0&5'

En el segmento 1 se programa el inicio del √°rea MCR. Si el operando "TagIn_1" devuelve el
estado l√≥gico "1", se conecta la dependencia MCR en el primer nivel del √°rea MCR. En ese
caso, el estado l√≥gico del operando "TagIn_4" est√° asignado al operando "TagOut_2"
(segmento 6). Si el operando "TagIn_1" tiene el estado l√≥gico "0", se desactiva la dependencia
MCR y se pone a "0" el operando "TagOut_2". En el segmento 7 se desconecta la dependencia
MCR del √°rea MCR.
En el segmento 3 se activa la dependencia MCR en el segundo nivel del √°rea MCR si el
operando "TagIn_2" devuelve el estado l√≥gico "1". En ese caso, el estado l√≥gico del operando
"TagIn_3" se asigna al operando "TagOut_1". Si el operando "TagIn_2" tiene el estado l√≥gico
"0", se desactiva la dependencia MCR y se pone a "0" el operando "TagOut_1"
independientemente del estado l√≥gico del operando "TagIn_3". En el segmento 5 se desactiva
la dependencia MCR en el segundo nivel del √°rea MCR. En el segmento 8 se programa el final
del √°rea MCR.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5195

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
El MCR (Master Control Relay) (P√°gina 203)
Indicaciones importantes sobre el uso de la funci√≥n MCR (P√°gina 204)
MCR<: Abrir √°reas MCR (P√°gina 5191)
MCRA: Activar √°rea MCR (P√°gina 5196)
MCRD: Desactivar √°rea MCR (P√°gina 5198)
Insertar elementos FUP (P√°gina 8017)
Editar elementos FUP (P√°gina 8034)

MCRA: Activar √°rea MCR
Descripci√≥n
La instrucci√≥n "Activar √°rea MCR" permite definir el principio de un √°rea MCR (MCR = Master
Control Relay). Dentro de dicha √°rea es posible activar y desactivar la dependencia MCR con
la ayuda de las instrucciones siguientes:
‚óè MCR<: Abrir √°reas MCR
‚óè MCR>: Cerrar √°reas MCR
El fin del √°rea MCR se define con la instrucci√≥n "Desactivar √°rea MCR" (MCRD). Las
instrucciones para definir el principio y fin de un √°rea MCR siempre deben utilizarse por parejas.
Nota
Observe la informaci√≥n contenida en el apartado "Indicaciones importantes sobre el uso de la
funcionalidad MCR", en "Consulte tambi√©n".
Si dentro de un √°rea MCR se llama un bloque, la dependencia MCR est√° desactivada en el
bloque llamado. Cuando se sale de un bloque, la dependencia MCR se ajusta igual que estaba
antes de llamarlo.
La instrucci√≥n se ejecuta sin considerar ni influir en los bits de estado.

5196

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
6HJPHQWR
0&5$
6HJPHQWR
‡≤Ø7DJ,QB‡≤Ø

0&5

6HJPHQWR
‡≤Ø7DJ2XW‡≤Ø
‡≤Ø7DJ,QB‡≤Ø
6HJPHQWR
0&5!
6HJPHQWR
0&5'

En el segmento 1 se programa el inicio del √°rea MCR. Si el operando "TagIn_1" devuelve el
estado l√≥gico "1", se activa la dependencia MCR. En ese caso, el estado l√≥gico del operando
"TagIn_2" est√° asignado al operando "TagOut" (segmento 3). Si el operando "TagIn_1" tiene
el estado l√≥gico "0", se desactiva la dependencia MCR y se pone a "0" el operando "TagOut"
independientemente del estado l√≥gico del operando "TagIn_2". En el segmento 4 se
desconecta la dependencia MCR del √°rea MCR. En el segmento 8 se programa el final del √°rea
MCR.

Consulte tambi√©n
El MCR (Master Control Relay) (P√°gina 203)
Indicaciones importantes sobre el uso de la funci√≥n MCR (P√°gina 204)
MCR<: Abrir √°reas MCR (P√°gina 5191)
MCR>: Cerrar √°reas MCR (P√°gina 5194)
MCRD: Desactivar √°rea MCR (P√°gina 5198)
Insertar elementos FUP (P√°gina 8017)
Editar elementos FUP (P√°gina 8034)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5197

Instrucciones
4.2 Instrucciones

MCRD: Desactivar √°rea MCR
Descripci√≥n
La instrucci√≥n "Desactivar √°rea MCR" permite definir el fin de un √°rea MCR (MCR = Master
Control Relay).
El principio de un √°rea MCR se define con la instrucci√≥n "Activar √°rea MCR" (MCRA). Las
instrucciones para definir el principio y fin de un √°rea MCR siempre deben utilizarse por parejas.
Nota
Observe la informaci√≥n contenida en el apartado "Indicaciones importantes sobre el uso de la
funcionalidad MCR", en "Consulte tambi√©n".
Dentro de un √°rea MCR es posible programar la dependencia MCR con la ayuda de las
instrucciones siguientes:
‚óè MCR<: Abrir √°reas MCR
‚óè MCR>: Cerrar √°reas MCR
Si dentro de un √°rea MCR se llama un bloque, la dependencia MCR est√° desactivada en el
bloque llamado. Cuando se sale de un bloque, la dependencia MCR se ajusta igual que estaba
antes de llamarlo.
La instrucci√≥n se ejecuta sin considerar ni influir en los bits de estado.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
6HJPHQWR
0&5$
6HJPHQWR
‡≤Ø7DJ,QB‡≤Ø

0&5

6HJPHQWR
‡≤Ø7DJ2XW‡≤Ø
‡≤Ø7DJ,QB‡≤Ø
6HJPHQWR
0&5!
6HJPHQWR
0&5'

5198

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
En el segmento 1 se programa el inicio del √°rea MCR. Si el operando "TagIn_1" devuelve el
estado l√≥gico "1", se activa la dependencia MCR. En ese caso, el estado l√≥gico del operando
"TagIn_2" est√° asignado al operando "TagOut" (segmento 3). Si el operando "TagIn_1" tiene
el estado l√≥gico "0", se desactiva la dependencia MCR y se pone a "0" el operando "TagOut".
En el segmento 4 se desconecta la dependencia MCR del √°rea MCR. En el segmento 8 se
programa el final del √°rea MCR.

Consulte tambi√©n
El MCR (Master Control Relay) (P√°gina 203)
Indicaciones importantes sobre el uso de la funci√≥n MCR (P√°gina 204)
MCR<: Abrir √°reas MCR (P√°gina 5191)
MCR>: Cerrar √°reas MCR (P√°gina 5194)
MCRA: Activar √°rea MCR (P√°gina 5196)
Insertar elementos FUP (P√°gina 8017)
Editar elementos FUP (P√°gina 8034)

SET: Activar √°rea por bits
Descripci√≥n
La instrucci√≥n "Activar √°rea por bits" pone a "1" el estado l√≥gico de los bits en un √°rea definida.
El punto inicial del √°rea se define mediante el puntero del par√°metro S_BIT. Si el puntero
se√±ala al √°rea de memoria de la periferia externa (P), no se ejecuta la instrucci√≥n. El n√∫mero
de bits que deben activarse en el √°rea indicada se determina en el par√°metro N de la
instrucci√≥n. Si el par√°metro N tiene el valor "0", la llamada de la instrucci√≥n no tendr√° efecto
alguno.
La instrucci√≥n se ejecuta s√≥lo si el bit MCR est√° a "1". Si el bit MCR tiene el estado l√≥gico "0",
no se modifican los bits en el √°rea indicada.
Nota
Par√°metro N
En el par√°metro N tambi√©n es posible interconectar un elemento de un bloque de datos.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Activar √°rea por bits":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, D, L, T, C

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5199

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

S_BIT

Input

POINTER

I, Q, M, D

Apunta al primer bit del √°rea
cuyos bits se activan
En el direccionamiento indi‚Äê
recto por registro inter√°rea,
el puntero debe indicarse en
formato de palabra doble.

N

Input

INT

I, Q, M, D, L, P o
constante

N√∫mero de bits que deben
activarse

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
6(7
‡≤Ø7DJ,Q‡≤Ø
30


(1
6B%,7
1

(12

‡≤Ø7DJ2XW‡≤Ø

Cuando el operando "TagIn" devuelve el estado l√≥gico "1", la instrucci√≥n establece 10 bits en
el √°rea de M0.0 a M1.2.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
El MCR (Master Control Relay) (P√°gina 203)
Insertar elementos FUP (P√°gina 8017)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

SETP: Activar mapa de bits en el √°rea de periferia
Descripci√≥n
La instrucci√≥n "Activar mapa de bits en el √°rea de periferia" pone los bits de un √°rea de periferia
al estado l√≥gico "1". Paralelamente a los bits de periferia, tambi√©n se activan los bits
correspondientes en la memoria imagen de proceso de las salidas.

5200

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Los par√°metros N y SA de la instrucci√≥n sirven para definir el mapa de bits que debe activarse.
Los bits del mapa deben encontrarse en aquella parte del √°rea de periferia que tiene asignada
una memoria imagen de proceso.
Si no se ha conectado periferia para una parte del mapa de bits seleccionado, la instrucci√≥n
intentar√° activar el mapa de bits completo. En este caso se devuelve una informaci√≥n de error
en el par√°metro RET_VAL.
El √°rea de periferia se activa por bytes. Si el mapa de bits definido a trav√©s de los par√°metros
N y SA no empieza ni termina en un l√≠mite de byte, la llamada de la instrucci√≥n tendr√° el efecto
siguiente:
‚óè Los bits contenidos en el primer o √∫ltimo byte que debe transferirse y que no pertenecen al
mapa de bits definido, obtienen el valor de los bits correspondientes en la memoria imagen
de proceso de las salidas.
ADVERTENCIA
Comportamiento involuntario
El ajuste de los bits al valor de los bits correspondientes en la memoria imagen de proceso
de las salidas puede ocasionar p. ej. el arranque accidental de motores o la desconexi√≥n
de sistemas de refrigeraci√≥n.
‚óè Los bits que pertenecen al mapa de bits definido se ponen al estado l√≥gico "1".
La instrucci√≥n "Activar mapa de bits en el √°rea de periferia" debe llamarse en un √°rea MCR.
La llamada de la instrucci√≥n "Activar mapa de bits en el √°rea de periferia" no tiene efecto alguno
y la salida de habilitaci√≥n ENO se pone a "0" si se cumple una de las condiciones siguientes:
‚óè La entrada de habilitaci√≥n EN devuelve el estado l√≥gico "0".
‚óè El par√°metro N devuelve el valor "0"
‚óè El bit MCR tiene el estado l√≥gico "1".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Activar mapa de bits en el √°rea de
periferia":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, D, L, T, C

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

N

Input

INT

I, Q, M, D, L o
constante

N√∫mero de bits que deben
activarse

RET_VAL

Output

INT

I, Q, M, D, L

Informaci√≥n de error

SA

Output

POINTER

P

Puntero hacia el primer bit
que debe activarse

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5201

Instrucciones
4.2 Instrucciones

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

8xyy

Encontrar√° m√°s informaci√≥n de error en "Consulte tambi√©n".

*Los c√≥digos de error que aparecen en el editor de programas se pueden representar como valores
enteros o hexadecimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n
en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
6(73
‡≤Ø7DJ,Q‡≤Ø


(1
1

6$
5(7B9$/
(12

3
‡≤Ø7DJB(UURU‡≤Ø
‡≤Ø7DJ2XW‡≤Ø

Si el operando "TagIn" devuelve el estado l√≥gico "1", la instrucci√≥n activa 8 bits en el √°rea de
periferia de acuerdo con las salidas Q10.0 a Q10.7.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)
Evaluaci√≥n de errores con el par√°metro de salida RET_VAL (P√°gina 174)
Principios b√°sicos de FUP (P√°gina 8005)

5202

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

SETI: Activar √°rea por bytes
Descripci√≥n
La instrucci√≥n "Activar √°rea por bytes" pone a "1" el estado l√≥gico de los bits en un √°rea definida
de bytes. El punto inicial del √°rea se define en el par√°metro S_BYTE. El tama√±o del √°rea se
define indicando el n√∫mero de bits que deben activarse en el par√°metro N de la instrucci√≥n.
Nota
El valor del par√°metro N debe ser un m√∫ltiplo de 8 (p. ej. 8, 16, 24, etc.).
El puntero indicado en el par√°metro S_BYTE debe se√±alar al √°rea de memoria de la periferia
externa (P). Puesto que al √°rea de memoria "P" se accede en formato de byte, palabra y
palabra doble, el puntero del par√°metro S_BYTE debe se√±alar a un operando equivalente a un
valor l√≠mite de byte. Por tanto, el n√∫mero de bit del puntero debe ser "0".
Nota
El estado l√≥gico de los bits correspondientes en la memoria imagen de proceso de las salidas
(Q) se pone a "0".
La llamada de la instrucci√≥n "Activar √°rea por bytes" no tiene efecto alguno y la salida de
habilitaci√≥n ENO se pone a "0" si se cumple una de las condiciones siguientes:
‚óè La entrada de habilitaci√≥n EN devuelve el estado l√≥gico "0".
‚óè El puntero del par√°metro S_BYTE no se√±ala al √°rea de memoria de la periferia externa (P).
‚óè El puntero del par√°metro S_BYTE se√±ala a un operando que no equivale a ning√∫n valor
l√≠mite de byte.
‚óè El valor del par√°metro N no es un m√∫ltiplo de 8.
‚óè El bit MCR tiene el estado l√≥gico "0".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Activar √°rea por bytes":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, D, L, T, C

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5203

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

S_BYTE

Input

POINTER

P o constante

Se√±ala al primer byte del
√°rea cuyos bits se activan
En el direccionamiento indi‚Äê
recto por registro inter√°rea,
el puntero debe indicarse en
formato de palabra doble.

N

Input

INT

I, Q, M, D, L, P o
constante

Tama√±o del √°rea que debe
activarse
El √°rea se indica mediante el
n√∫mero de bits como m√∫ltiplo
de 8 (p. ej. 8, 16, 24, etc.).

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
6(7,
‡≤Ø7DJ,Q‡≤Ø
3


(1
6B%<7(
1

(12

‡≤Ø7DJ2XW‡≤Ø

Si el operando "TagIn" devuelve el estado l√≥gico "1", la instrucci√≥n activa 2 bytes (16 bits) en
el √°rea de P2.0 a P3.7.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
El MCR (Master Control Relay) (P√°gina 203)
Insertar elementos FUP (P√°gina 8017)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

5204

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

RESET: Desactivar √°rea por bits
Descripci√≥n
La instrucci√≥n "Desactivar √°rea por bits" pone a "0" el estado l√≥gico de los bits en un √°rea
definida. El punto inicial del √°rea se define mediante el puntero del par√°metro S_BIT. Si el
puntero se√±ala al √°rea de memoria de la periferia externa (P), no se ejecuta la instrucci√≥n. El
n√∫mero de bits que deben desactivarse en el √°rea indicada se determina en el par√°metro N de
la instrucci√≥n. Si el par√°metro N tiene el valor "0", la llamada de la instrucci√≥n no tendr√° efecto
alguno.
La instrucci√≥n se ejecuta s√≥lo si el bit MCR est√° a "1". Si el bit MCR tiene el estado l√≥gico "0",
no se modifican los bits en el √°rea indicada.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Desactivar √°rea por bits":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, D, L, T, C

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

S_BIT

Input

POINTER

I, Q, M, D

Se√±ala al primer bit del √°rea
cuyos bits se desactivan
En el direccionamiento indi‚Äê
recto por registro inter√°rea,
el puntero debe indicarse en
formato de palabra doble.

N

Input

INT

I, Q, M, D, L, P o
constante

N√∫mero de bits que deben
desactivarse

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
5(6(7
‡≤Ø7DJ,Q‡≤Ø
30


(1
6B%,7
1

(12

‡≤Ø7DJ2XW‡≤Ø

Cuando el operando "TagIn" devuelve el estado l√≥gico "1", la instrucci√≥n desactiva 10 bits en
el √°rea de M0.0 a M1.2.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5205

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
El MCR (Master Control Relay) (P√°gina 203)
Insertar elementos FUP (P√°gina 8017)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

RESETP: Desactivar mapa de bits en el √°rea de periferia
Descripci√≥n
La instrucci√≥n "Desactivar mapa de bits en el √°rea de periferia" pone los bits de un √°rea de
periferia al estado l√≥gico "0". Simult√°neamente con los bits de periferia se desactivan tambi√©n
los bits correspondientes en la memoria imagen de proceso de las salidas.
Los par√°metros N y SA de la instrucci√≥n sirven para definir el mapa de bits que debe
desactivarse. Los bits del mapa deben encontrarse en aquella parte del √°rea de periferia que
tiene asignada una memoria imagen de proceso.
Si no hay periferia enchufada para una parte del mapa de bits seleccionado, la instrucci√≥n
intentar√° desactivar el mapa de bits completo. En este caso se devuelve una informaci√≥n de
error en el par√°metro RET_VAL.
El √°rea de periferia se desactiva por bytes. Si el mapa de bits definido a trav√©s de los
par√°metros N y SA no empieza ni termina en un l√≠mite de byte, la llamada de la instrucci√≥n
tendr√° el efecto siguiente:
‚óè Los bits contenidos en el primer o √∫ltimo byte que debe transferirse y que no pertenecen al
mapa de bits definido, obtienen el valor de los bits correspondientes en la memoria imagen
de proceso de las salidas.
ADVERTENCIA
Comportamiento involuntario
El ajuste de los bits al valor de los bits correspondientes en la memoria imagen de proceso
de las salidas puede ocasionar p. ej. el arranque accidental de motores o la desconexi√≥n
de sistemas de refrigeraci√≥n.
‚óè Los bits que pertenecen al mapa de bits definido se ponen al estado l√≥gico "0".
La instrucci√≥n "Desactivar mapa de bits en el √°rea de periferia" debe llamarse en un √°rea MCR.
La llamada de la instrucci√≥n "Desactivar mapa de bits en el √°rea de periferia" no tiene efecto
alguno y la salida de habilitaci√≥n ENO se pone a "0" si se cumple una de las condiciones
siguientes:
‚óè La entrada de habilitaci√≥n EN devuelve el estado l√≥gico "0".
‚óè El par√°metro N devuelve el valor "0"
‚óè El bit MCR tiene el estado l√≥gico "1".

5206

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Desactivar mapa de bits en el √°rea
de periferia":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, D, L, T, C

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

N

Input

INT

I, Q, M, D, L o
constante

N√∫mero de bits que deben
desactivarse.

RET_VAL

Output

INT

I, Q, M, D, L

Informaci√≥n de error

SA

Output

POINTER

P

Puntero al primer bit que de‚Äê
be desactivarse.

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

8xyy

Encontrar√° m√°s informaci√≥n de error en "Consulte tambi√©n".

*Los c√≥digos de error que aparecen en el editor de programas se pueden representar como valores
enteros o hexadecimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n
en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
5(6(73
‡≤Ø7DJ,Q‡≤Ø


(1
1

6$
5(7B9$/
(12

3
‡≤Ø7DJB(UURU‡≤Ø
‡≤Ø7DJ2XW‡≤Ø

Si el operando "TagIn" devuelve el estado l√≥gico "1", la instrucci√≥n desactiva 8 bits en el √°rea
de periferia de acuerdo con las salidas Q10.0 a Q10.7.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5207

Instrucciones
4.2 Instrucciones
Evaluaci√≥n de errores con el par√°metro de salida RET_VAL (P√°gina 174)
Principios b√°sicos de FUP (P√°gina 8005)

RESETI: Desactivar √°rea por bytes
Descripci√≥n
La instrucci√≥n "Desactivar √°rea por bytes" pone a "0" el estado l√≥gico de los bits en un √°rea
definida de bytes. El punto inicial del √°rea se define mediante el puntero del par√°metro
S_BYTE. El tama√±o del √°rea se define indicando el n√∫mero de bits que deben desactivarse en
el par√°metro N de la instrucci√≥n.
Nota
El valor del par√°metro N debe ser un m√∫ltiplo de 8 (p. ej. 8, 16, 24, etc.).
El puntero indicado en el par√°metro S_BYTE debe se√±alar al √°rea de memoria de la periferia
externa (P). Puesto que al √°rea de memoria "P" se accede en formato de byte, palabra y
palabra doble, el puntero del par√°metro S_BYTE debe se√±alar a un operando equivalente a un
valor l√≠mite de byte. Por tanto, el n√∫mero de bit del puntero debe ser "0".
Nota
El estado l√≥gico de los bits correspondientes en la memoria imagen de proceso de las salidas
(Q) se pone a "0".
La llamada de la instrucci√≥n "Desactivar √°rea por bytes" no tiene efecto alguno y la salida de
habilitaci√≥n ENO se pone a "0" si se cumple una de las condiciones siguientes:
‚óè La entrada de habilitaci√≥n EN devuelve el estado l√≥gico "0".
‚óè El puntero del par√°metro S_BYTE no se√±ala al √°rea de memoria de la periferia externa (P).
‚óè El puntero del par√°metro S_BYTE se√±ala a un operando que no equivale a ning√∫n valor
l√≠mite de byte.
‚óè El valor del par√°metro N no es un m√∫ltiplo de 8.
‚óè El bit MCR tiene el estado l√≥gico "0".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Desactivar √°rea por bytes":

5208

Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, D, L, T, C

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

S_BYTE

Input

POINTER

P o constante

Se√±ala al primer byte del
√°rea cuyos bits se desactivan
En el direccionamiento indi‚Äê
recto por registro inter√°rea,
el puntero debe indicarse en
formato de palabra doble.

N

Input

INT

I, Q, M, D, L, P o
constante

Tama√±o del √°rea cuyos bits
se desactivan.
El √°rea se indica mediante el
n√∫mero de bits como m√∫ltiplo
de 8 (p. ej. 8, 16, 24, etc.).

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
5(6(7,
‡≤Ø7DJ,Q‡≤Ø
3


(1
6B%<7(
1

(12

‡≤Ø7DJ2XW‡≤Ø

Si el operando "TagIn" devuelve el estado l√≥gico "1", la instrucci√≥n desactiva 2 bytes (16 bits)
en el √°rea de P2.0 a P3.7.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
El MCR (Master Control Relay) (P√°gina 203)
Insertar elementos FUP (P√°gina 8017)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5209

Instrucciones
4.2 Instrucciones

REPL_VAL: Introducir valor sustitutivo
Descripci√≥n
La instrucci√≥n "Introducir valor sustitutivo" introduce un valor sustitutivo en el acumulador 1
(ACU 1) desde un bloque de organizaci√≥n de error s√≠ncrono.
Nota
La instrucci√≥n "Introducir valor sustitutivo" s√≥lo se puede llamar desde bloques de organizaci√≥n
de error s√≠ncrono (OB 121, OB 122).
La instrucci√≥n "Introducir valor sustitutivo" se utiliza si ya no es posible leer ning√∫n valor de un
m√≥dulo. Tras cada acceso a dicho m√≥dulo se inicia el OB 122. Llamando la instrucci√≥n
"Introducir valor sustitutivo" es posible cargar un valor sustitutivo en el acumulador 1. La
ejecuci√≥n del programa se prosigue entonces con este valor sustitutivo. La informaci√≥n
necesaria para seleccionar el valor sustitutivo puede consultarse en las variables locales del
OB 122.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Introducir valor sustitutivo":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, D, L, T, C

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

VAL

Input

DWORD

I, Q, M, D, L o
constante

Valor sustitutivo

RET_VAL

Output

INT

I, Q, M, D, L

Informaci√≥n de error

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de Descripci√≥n
error*
(W#16#....)
0000

Ning√∫n error

8080

La instrucci√≥n no se ha llamado desde un OB de error s√≠ncrono.

8xyy

Encontrar√° m√°s informaci√≥n de error en "Consulte tambi√©n".

*Los c√≥digos de error que aparecen en el editor de programas se pueden representar como valores
enteros o hexadecimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n
en "Consulte tambi√©n".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)

5210

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)
Evaluaci√≥n de errores con el par√°metro de salida RET_VAL (P√°gina 174)
Principios b√°sicos de FUP (P√°gina 8005)

DRUM: Materializar circuito secuencial sucesivo
Descripci√≥n
La instrucci√≥n "Materializar circuito secuencial sucesivo" permite ocupar los bits de salida
programados (OUT1 a OUT16) y la palabra de salida (OUT_WORD) con los valores
programados del par√°metro OUT_VAL del paso respectivo. El paso en cuesti√≥n debe cumplir
las condiciones de la m√°scara de habilitaci√≥n programada en el par√°metro S_MASK mientras
la instrucci√≥n permanece en dicho paso. La instrucci√≥n pasa al paso siguiente cuando el
evento de √©ste es verdadero y una vez transcurrido el tiempo programado para el paso actual,
o bien cuando el valor del par√°metro JOG cambia de "0" a "1". La instrucci√≥n se desactiva
cuando el estado l√≥gico del par√°metro RESET cambia a "1". Con ello, el paso actual se iguala
al paso predeterminado (DSP).
El tiempo de permanencia en un paso se calcula multiplicando la base de tiempo
predeterminada (DTBP) por el valor de contaje predeterminado (S_PRESET) para cada paso.
Al comienzo de un nuevo paso, este valor calculado se carga en el par√°metro DCC, que
contiene el tiempo restante para el paso actual. Por ejemplo, si el valor del par√°metro DTBP es
"2" y el valor predeterminado para el primer paso es "100" (100 ms), el par√°metro DCC
devolver√° el valor "200" (200 ms).
Un paso puede programarse con un valor de tiempo, con un evento o con ambos. Los pasos
programados con un bit de evento y el valor de tiempo "0" pasan al siguiente paso en cuanto
el estado l√≥gico del bit de evento es "1". Los pasos programados s√≥lo con un valor de tiempo
empiezan a contar el tiempo inmediatamente. Los pasos programados con un bit de evento y
un valor de tiempo mayor que "0" empiezan a contar el tiempo en cuanto el estado l√≥gico del
bit de evento es "1". Los bits de evento se inicializan con el estado l√≥gico "1".
Si el circuito secuencial sucesivo se encuentra en el √∫ltimo paso programado (LST_STEP) y ha
transcurrido el tiempo para dicho paso, el estado l√≥gico del par√°metro Q se pone a "1". De lo
contrario, se pone a "0". Si est√° activado el par√°metro Q, la instrucci√≥n permanece en el paso
hasta la desactivaci√≥n.
En la m√°scara configurable (S_MASK) es posible seleccionar los distintos bits de la palabra de
salida (OUT_WORD) y activar o desactivar los bits de salida (OUT1 a OUT16) mediante los
valores de salida (OUT_VAL). Si un bit de la m√°scara configurable tiene el estado l√≥gico "1",
el valor OUT_VAL activa o desactiva el bit respectivo. Si el estado l√≥gico de un bit de la
m√°scara configurable es "0", no cambia el bit respectivo. Todos los bits de la m√°scara
configurable de todos los 16 pasos se inicializan con el estado l√≥gico "1".
El bit de salida del par√°metro OUT1 equivale al bit menos significativo de la palabra de salida
(OUT_WORD). El bit de salida del par√°metro OUT16 equivale al bit m√°s significativo de la
palabra de salida (OUT_WORD).
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si los par√°metros de bloque de la instrucci√≥n se
depositan en un bloque de datos propio (instancia individual) o bien como variable local
(multiinstancia) en la interfaz del bloque. Si crea un bloque de datos propio, lo encontrar√° en

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5211

Instrucciones
4.2 Instrucciones
el √°rbol del proyecto, en la carpeta "Recursos de programa", en "Bloques de programa >
Bloques de sistema". Encontrar√° m√°s informaci√≥n al respecto en "Consulte tambi√©n".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Materializar circuito secuencial
sucesivo":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, D, L, T, C

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

RESET

Input

BOOL

I, Q, M, D, L

El estado l√≥gico "1" indica
una condici√≥n de desactiva‚Äê
ci√≥n.

JOG

Input

BOOL

I, Q, M, D, L

Si el estado l√≥gico cambia de
"0" a "1", la instrucci√≥n pasa
al siguiente paso.

DRUM_EN

Input

BOOL

I, Q, M, D, L

El estado l√≥gico "1" permite
que el circuito secuencial su‚Äê
cesivo siga contando seg√∫n
el evento y los criterios de
tiempo.

LST_STEP

Input

BYTE

I, Q, M, D, L o
constante

N√∫mero del √∫ltimo paso pro‚Äê
gramado

EVENT(i),

Input

BOOL

I, Q, M, D, L

Bit de evento (i);
el estado l√≥gico inicial es "1".

1 ‚â§ i ‚â§ 16
Output

BOOL

I, Q, M, D, L

Bit de salida (j)

Q

Output

BOOL

I, Q, M, D, L

El estado l√≥gico "1" indica
que ha transcurrido el tiempo
del √∫ltimo paso.

OUT_WORD

Output

WORD

I, Q, M, D, L, P

Direcci√≥n de palabra en la
que el circuito secuencial su‚Äê
cesivo escribe los valores de
salida.

ERR_CODE

Output

WORD

I, Q, M, D, L, P

Informaci√≥n de error

JOG_HIS

Static

BOOL

I, Q, M, D, L

Bit de evoluci√≥n del par√°me‚Äê
tro JOG

EOD

Static

BOOL

I, Q, M, D, L

El estado l√≥gico "1" indica
que ha transcurrido el tiempo
del √∫ltimo paso.

DSP

Static

BYTE

I, Q, M, D, L, P

Paso predeterminado del cir‚Äê
cuito secuencial sucesivo

DSC

Static

BYTE

I, Q, M, D, L, P

Paso actual del circuito se‚Äê
cuencial sucesivo

DCC

Static

DWORD

I, Q, M, D, L, P

Valor de contaje actual del
circuito secuencial sucesivo

DTBP

Static

WORD

I, Q, M, D, L, P

Base de tiempo predetermi‚Äê
nada del circuito secuencial
sucesivo

OUT(j),
1 ‚â§ j ‚â§ 16

5212

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

PrevTime

Static

TIME

I, Q, M, D, L o
constante

Hora de sistema anterior

S_PRESET

Static

ARRAY[1..16] of
WORD

I, Q, M, D, L

Valor de contaje predetermi‚Äê
nado para cada paso [1 a 16];
1 ciclo de reloj = 1 ms.

OUT_VAL

Static

ARRAY[1..16,
0..15] of BOOL

I, Q, M, D, L

Valores de salida para cada
paso [1 a 16, 0 a 15].

S_MASK

Static

ARRAY[1..16,
0..15] of BOOL

I, Q, M, D, L

M√°scara configurable para
cada paso [1 a 16, 0 a 15].
Los estados l√≥gicos iniciales
son "1".

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Par√°metro ERR_CODE
La tabla siguiente muestra el significado de los valores del par√°metro ERR_CODE:
ERR_CODE*

Explicaci√≥n

W#16#0000

Ning√∫n error

W#16#000B

El valor del par√°metro LST_STEP es menor que 1 o mayor que 16.

W#16#000C

El valor del par√°metro DSC es menor que 1 o mayor que el valor del par√°metro LST_STEP.

W#16#000D

El valor del par√°metro DSP es menor que 1 o mayor que el valor de LST_STEP.

*Los c√≥digos de error en el editor de programas se pueden representar como valores enteros o hexadecimales. Encontrar√°
m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n en "Consulte tambi√©n".

Resultado
En el ejemplo siguiente, la instrucci√≥n pasa del paso 1 al paso 2. Los bits de salida (OUT1 a
OUT16) y la palabra de salida (OUT_WORD) se activan seg√∫n la m√°scara configurada para el
paso 2 y los valores del par√°metro OUT_VAL.
Nota
Los par√°metros est√°ticos pueden inicializarse en el bloque de datos.
‡≤Ø'580B'%‡≤Ø
'580
‡≤Ø7DJ,Q‡≤Ø
‡≤Ø7DJB5HVHW‡≤Ø
‡≤Ø7DJB,QSXWB-2*‡≤Ø
‡≤Ø7DJB'580B(1‡≤Ø
‡≤Ø/DVW6WHS‡≤Ø
‡≤Ø0\(YHQW‡≤Ø

(1
5(6(7
-2*
'580B(1
/67B67(3
(9(17

(12
287
4
287B:25'
(55B&2'(

‡≤Ø7DJ2XW‡≤Ø
‡≤Ø0\2XWSXW‡≤Ø
‡≤Ø7DJB2XWSXWB4‡≤Ø
‡≤Ø7DJB2XWSXWB:25'‡≤Ø
‡≤Ø7DJB(UURU&RGH‡≤Ø

Las tablas siguientes muestran el funcionamiento de la instrucci√≥n con valores concretos.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5213

Instrucciones
4.2 Instrucciones

Antes de la ejecuci√≥n
En este ejemplo se utilizan los siguientes valores para asignar valores a los par√°metros de
entrada:
Par√°metro

Operando

Direcci√≥n

Valor

RESET

Tag_Reset

M0.0

FALSE

JOG

Tag_Input_JOG

M0.1

FALSE

DRUM_EN

Tag_Input_Drum_EN

M0.2

TRUE

LST_STEP

Tag_Number_LastStep

MB1

B#16#08

EVENT2

MyTag_Event_2

M20.0

FALSE

EVENT4

MyTag_Event_4

M20.1

FALSE

EVENT6

MyTag_Event_6

M20.2

FALSE

EVENT8

MyTag_Event_8

M20.3

FALSE

EVENT10

MyTag_Event_10

M20.4

FALSE

EVENT12

MyTag_Event_12

M20.5

FALSE

EVENT14

MyTag_Event_14

M20.6

FALSE

EVENT16

MyTag_Event_16

M20.7

FALSE

En el bloque de datos de instancia "DRUM_DB" de la instrucci√≥n est√°n almacenados los
siguientes valores:
Par√°metro

5214

Direcci√≥n

Valor

JOG_HIS

DBX12.0

FALSE

EOD

DBX12.1

FALSE

DSP

DBB13

W#16#0001

DSC

DBB14

W#16#0001

DCC

DBD16

DW#16#0000000A

DTBP

DBW20

W#16#0001

S_PRESET[1]

DBW26

W#16#0064

S_PRESET[2]

DBW28

W#16#00C8

OUT_VAL[1,0]

DBX58.0

TRUE

OUT_VAL[1,1]

DBX58.1

TRUE

OUT_VAL[1,2]

DBX58.2

TRUE

OUT_VAL[1,3]

DBX58.3

TRUE

OUT_VAL[1,4]

DBX58.4

TRUE

OUT_VAL[1,5]

DBX58.5

TRUE

OUT_VAL[1,6]

DBX58.6

TRUE

OUT_VAL[1,7]

DBX58.7

TRUE

OUT_VAL[1,8]

DBX59.0

TRUE

OUT_VAL[1,9]

DBX59.1

TRUE

OUT_VAL[1,10]

DBX59.2

TRUE

OUT_VAL[1,11]

DBX59.3

TRUE

OUT_VAL[1,12]

DBX59.4

TRUE

OUT_VAL[1,13]

DBX59.5

TRUE

OUT_VAL[1,14]

DBX59.6

TRUE

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Direcci√≥n

Valor

OUT_VAL[1,15]

DBX59.7

TRUE

OUT_VAL[2,0]

DBX60.0

FALSE

OUT_VAL[2,1]

DBX60.1

FALSE

OUT_VAL[2,2]

DBX60.2

FALSE

OUT_VAL[2,3]

DBX60.3

FALSE

OUT_VAL[2,4]

DBX60.4

FALSE

OUT_VAL[2,5]

DBX60.5

FALSE

OUT_VAL[2,6]

DBX60.6

FALSE

OUT_VAL[2,7]

DBX60.7

FALSE

OUT_VAL[2,8]

DBX61.0

FALSE

OUT_VAL[2,9]

DBX61.1

FALSE

OUT_VAL[2,10]

DBX61.2

FALSE

OUT_VAL[2,11]

DBX61.3

FALSE

OUT_VAL[2,12]

DBX61.4

FALSE

OUT_VAL[2,13]

DBX61.5

FALSE

OUT_VAL[2,14]

DBX61.6

FALSE

OUT_VAL[2,15]

DBX61.7

FALSE

S_MASK[2,0]

DBX92.0

FALSE

S_MASK[2,1]

DBX92.1

TRUE

S_MASK[2,2]

DBX92.2

TRUE

S_MASK[2,3]

DBX92.3

TRUE

S_MASK[2,4]

DBX92.4

TRUE

S_MASK[2,5]

DBX92.5

FALSE

S_MASK[2,6]

DBX92.6

TRUE

S_MASK[2,7]

DBX92.7

TRUE

S_MASK[2,8]

DBX93.0

FALSE

S_MASK[2,9]

DBX93.1

FALSE

S_MASK[2,10]

DBX93.2

TRUE

S_MASK[2,11]

DBX93.3

TRUE

S_MASK[2,12]

DBX93.4

TRUE

S_MASK[2,13]

DBX93.5

TRUE

S_MASK[2,14]

DBX93.6

FALSE

S_MASK[2,15]

DBX93.7

TRUE

Los par√°metros de salida tienen los valores siguientes antes de ejecutarse la instrucci√≥n:
Par√°metro

Operando

Direcci√≥n

Valor

Q

Tag_Output_Q

M6.0

FALSE

OUTWORD

Tag_OutputWord

MW8

W#16#FFFF

OUT1

MyTag_Output_1

M4.0

TRUE

OUT2

MyTag_Output_2

M4.1

TRUE

OUT3

MyTag_Output_3

M4.2

TRUE

OUT4

MyTag_Output_4

M4.3

TRUE

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5215

Instrucciones
4.2 Instrucciones
Par√°metro

Operando

Direcci√≥n

Valor

OUT5

MyTag_Output_5

M4.4

TRUE

OUT6

MyTag_Output_6

M4.5

TRUE

OUT7

MyTag_Output_7

M4.6

TRUE

OUT8

MyTag_Output_8

M4.7

TRUE

OUT9

MyTag_Output_9

M5.0

TRUE

OUT10

MyTag_Output_10

M5.1

TRUE

OUT11

MyTag_Output_11

M5.2

TRUE

OUT12

MyTag_Output_12

M5.3

TRUE

OUT13

MyTag_Output_13

M5.4

TRUE

OUT14

MyTag_Output_14

M5.5

TRUE

OUT15

MyTag_Output_15

M5.6

TRUE

OUT16

MyTag_Output_16

M5.7

TRUE

Despu√©s de la ejecuci√≥n
Una vez ejecutada la instrucci√≥n, los valores siguientes se escriben en los par√°metros de
salida:

5216

Par√°metro

Operando

Direcci√≥n

Valor

OUT1

MyTag_Output_1

M4.0

TRUE

OUT2

MyTag_Output_2

M4.1

FALSE

OUT3

MyTag_Output_3

M4.2

FALSE

OUT4

MyTag_Output_4

M4.3

FALSE

OUT5

MyTag_Output_5

M4.4

FALSE

OUT6

MyTag_Output_6

M4.5

TRUE

OUT7

MyTag_Output_7

M4.6

FALSE

OUT8

MyTag_Output_8

M4.7

FALSE

OUT9

MyTag_Output_9

M5.0

TRUE

OUT10

MyTag_Output_10

M5.1

TRUE

OUT11

MyTag_Output_11

M5.2

FALSE

OUT12

MyTag_Output_12

M5.3

FALSE

OUT13

MyTag_Output_13

M5.4

FALSE

OUT14

MyTag_Output_14

M5.5

FALSE

OUT15

MyTag_Output_15

M5.6

TRUE

OUT16

MyTag_Output_16

M5.7

FALSE

Q

Tag_Output_Q

M6.0

FALSE

OUTWORD

Tag_OutputWord

MW8

W#16#4321

ERR_CODE

Tag_ErrorCode

MW10

W#16#0000

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
En el bloque de datos de instancia "DRUM_DB" de la instrucci√≥n est√°n almacenados los
siguientes valores:
Par√°metro

Direcci√≥n

Valor

JOG_HIS

DBX12.0

FALSE

EOD

DBX12.1

FALSE

DSC

DBB14

W#16#0002

DCC

DBD16

DW#16#000000C8

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)
Insertar elementos FUP (P√°gina 8017)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

DRUM_X: Materializar circuito secuencial sucesivo
Descripci√≥n
La instrucci√≥n "Materializar circuito secuencial sucesivo" permite materializar un circuito
secuencial sucesivo con 16 pasos como m√°ximo. El n√∫mero del primer paso se define con el
par√°metro DSP. El n√∫mero del √∫ltimo paso se predetermina con el par√°metro LST_STEP.
En cada paso se escriben todos los 16 bits de salida OUT0 a OUT15 y el par√°metro de salida
OUT_WORD (que contiene los bits de salida). A un bit de salida se asigna bien sea el bit
correspondiente del campo predefinido OUT_VAL, o bien el bit de salida del paso anterior. El
valor que se asigne depender√° de la ocupaci√≥n de los bits de m√°scara en el par√°metro
S_MASK.
Nota
El ajuste predeterminado de los bits de m√°scara es 0. Para modificar el ajuste actual de uno
o varios bits de m√°scara, realice el cambio en el bloque de datos de instancia.
La instrucci√≥n "Materializar circuito secuencial sucesivo" pasa al siguiente paso cuando se
produce un flanco ascendente en el par√°metro JOG. Si la instrucci√≥n ya se encuentra en el
√∫ltimo paso y se produce un flanco ascendente en el par√°metro JOG, se activan las variables
Q y EOD. En este caso, el par√°metro DCC se pone al valor 0. La instrucci√≥n permanece en el
√∫ltimo paso hasta que el par√°metro RESET se pone al valor "1".
Adem√°s, tambi√©n se puede permitir la transici√≥n al paso siguiente en funci√≥n del tiempo. Para
ello se debe poner al valor "1" el par√°metro DRUM_EN. La transici√≥n al paso siguiente tiene
lugar si est√° activado el bit de evento (EVENTi) correspondiente al paso actual y si ha
transcurrido el tiempo predeterminado para el paso actual. El tiempo necesario para un paso

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5217

Instrucciones
4.2 Instrucciones
resulta de la multiplicaci√≥n de la base de tiempo (DTBP por el factor de tiempo v√°lido para el
paso actual (S_PRESET).
Nota
El tiempo de ejecuci√≥n restante en el paso actual (DCC) se reduce √∫nicamente si est√° activado
el bit de evento correspondiente (EVENTi).
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si los par√°metros de bloque de la instrucci√≥n se
depositan en un bloque de datos propio (instancia individual) o bien como variable local
(multiinstancia) en la interfaz del bloque. Si crea un bloque de datos propio, lo encontrar√° en
el √°rbol del proyecto, en la carpeta "Recursos de programa", en "Bloques de programa >
Bloques de sistema". Encontrar√° m√°s informaci√≥n al respecto en "Consulte tambi√©n".
Si, al llamar la instrucci√≥n, el par√°metro RESET tiene el valor "1", el circuito secuencial
sucesivo pasar√° al paso cuyo n√∫mero se haya asignado al par√°metro DSP.
Un paso puede programarse con un valor de tiempo, con un evento o con ambos. Los pasos
programados con un bit de evento y el valor de tiempo "0" pasan al siguiente paso en cuanto
el estado l√≥gico del bit de evento es "1". Los pasos programados solo con un valor de tiempo
empiezan a contar el tiempo inmediatamente. Los pasos programados con un bit de evento y
un valor de tiempo mayor que "0" empiezan a contar el tiempo en cuanto el estado l√≥gico del
bit de evento es "1".
El circuito secuencial sucesivo tambi√©n se puede conmutar en progresi√≥n en todo momento a
trav√©s del valor del par√°metro JOG.
En la primera llamada de la instrucci√≥n, el par√°metro RESET se debe poner a 1.
Si el circuito secuencial se encuentra en el √∫ltimo paso y ha transcurrido el tiempo de ejecuci√≥n
predefinido para este paso, se activan los par√°metros Q y EOD. La instrucci√≥n permanece en
el √∫ltimo paso hasta que el par√°metro RESET adopte el valor "1".
Esta instrucci√≥n se ejecuta solo en los estados operativos ARRANQUE y RUN.
El sistema operativo inicializa la instrucci√≥n "Materializar circuito secuencial sucesivo" cuando
se efect√∫a un arranque en fr√≠o. La instrucci√≥n no se inicializa en caso de un rearranque
completo (en caliente). Si la instrucci√≥n "Materializar circuito secuencial sucesivo" debe
inicializarse tras un rearranque completo (en caliente), es preciso llamarla en el OB 100 con el
valor "1" en el par√°metro RESET.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Materializar circuito secuencial
sucesivo":

5218

Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, D, L, T, C

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

RESET

Input

BOOL

I, Q, M, D, L

El estado l√≥gico "1" desactiva
el circuito secuencial. En la
primera llamada de la instruc‚Äê
ci√≥n, el par√°metro RESET se
debe poner a "1".
En el par√°metro RESET tam‚Äê
bi√©n se pueden indicar cons‚Äê
tantes.

JOG

Input

BOOL

I, Q, M, D, L

Un flanco ascendente (con
respecto a la √∫ltima llamada)
provoca la transici√≥n al paso
siguiente, siempre que el cir‚Äê
cuito secuencial no se en‚Äê
cuentre a√∫n en el √∫ltimo pa‚Äê
so. La transici√≥n tiene lugar
independientemente del va‚Äê
lor asignado al par√°metro
DRUM_EN.

DRUM_EN

Input

BOOL

I, Q, M, D, L

Par√°metro de control que de‚Äê
termina si se puede realizar
una transici√≥n al paso si‚Äê
guiente en funci√≥n del tiem‚Äê
po. Si el valor es "1", es posi‚Äê
ble una transici√≥n en funci√≥n
del tiempo.

LST_STEP

Input

BYTE

I, Q, M, D, L o
constante

N√∫mero del √∫ltimo paso

EVENTi,

Los valores admisibles son 1
a 16.

Input

BOOL

I, Q, M, D, L

Bit de evento n.¬∫ i (pertenece
al paso i)

Output

BOOL

I, Q, M, D, L

Bit de salida j

Q

Output

BOOL

I, Q, M, D, L

Par√°metro de estado que in‚Äê
dica si ha transcurrido el tiem‚Äê
po predefinido por el usuario
para la ejecuci√≥n del √∫ltimo
paso.

OUT_WORD

Output

WORD

I, Q, M, D, L, P

Bits de salida resumidos en
una variable

ERR_CODE

Output

WORD

I, Q, M, D, L, P

Informaci√≥n de error

JOG_HIS

Static

BOOL

I, Q, M, D, L

Irrelevante para el usuario
(par√°metro de entrada JOG
de la llamada anterior)

EOD

Static

BOOL

I, Q, M, D, L

Id√©ntico al par√°metro de sali‚Äê
da Q

DSP

Static

BYTE

I, Q, M, D, L, P o
constante

N√∫mero del primer paso

1 ‚â§ i ‚â§ 16
OUTj,
0 ‚â§ j ‚â§ 15

DSC

Static

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

BYTE

I, Q, M, D, L, P o
constante

Los valores admisibles son 1
a 16.
N√∫mero del paso actual

5219

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

DCC

Static

DWORD

I, Q, M, D, L, P

Tiempo de ejecuci√≥n restan‚Äê
te del paso actual, indicado
en milisegundos (ms) (rele‚Äê
vante solo si DRUM_EN = 1 y
el bit de evento correspon‚Äê
diente = 1)

DTBP

Static

WORD

I, Q, M, D, L, P o
constante

Base de tiempo en milisegun‚Äê
dos (ms) v√°lida para todos
los pasos

PREV_TIME

Static

DWORD

I, Q, M, D, L o
constante

(Irrelevante para el usuario:
hora de sistema de la llama‚Äê
da anterior)

S_PRESET

Static

ARRAY of WORD

I, Q, M, D, L o
constante

Campo unidimensional con
los factores de tiempo para
cada paso.
Selecci√≥n recomendada de
√≠ndices: [1 a 16].
En este caso, S_PRESET [x]
contiene el factor de tiempo
del paso x.

OUT_VAL

Static

ARRAY of BOOL

I, Q, M, D, L

Campo bidimensional con
los valores que deben emitir‚Äê
se en cada paso, a no ser
que se hayan inhibido v√≠a
S_MASK.
Selecci√≥n recomendada de
√≠ndices: [1 a 16, 0 a 15]. En
este caso, OUT_VAL [x, y]
contiene el valor asignado al
bit de salida OUTy en el paso
x.

S_MASK

Static

ARRAY of BOOL

I, Q, M, D, L

Campo bidimensional con
los bits de m√°scara para ca‚Äê
da paso.
Selecci√≥n recomendada de
√≠ndices: [1 a 16, 0 a 15]. En
este caso, S_MASK [x, y]
contiene el bit de m√°scara
para el valor "y"-√©simo que
debe emitirse en el paso x.
Significado de los bits de
m√°scara:
‚óè 0: el valor
correspondiente del paso
anterior se asigna al
respectivo bit de salida
‚óè 1: el valor
correspondiente de
OUT_VAL se asigna al
respectivo bit de salida.

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

5220

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metro ERR_CODE
La tabla siguiente muestra el significado de los valores del par√°metro ERR_CODE:
ERR_CO‚Äê
DE*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

8081

Valor no admisible en el par√°metro LST_STEP

8082

Valor no admisible en DSC

8083

Valor no admisible en DSP

8084

El producto DCC = DTBP * S_PRESET[DSC] excede el valor 2**31-1 (aprox. 24,86 d√≠as).

*Los c√≥digos de error en el editor de programas se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n en "Consulte
tambi√©n".

Ejemplo
En el ejemplo siguiente, la instrucci√≥n pasa del paso 1 al paso 2. Los bits de salida (OUT0 a
OUT15) y la palabra de salida (OUT_WORD) se activan seg√∫n la m√°scara configurada para el
paso 2 y los valores del par√°metro OUT_VAL.
Nota
Los par√°metros est√°ticos pueden inicializarse en el bloque de datos.
‡≤Ø'580B;B'%‡≤Ø
'580B;
‡≤Ø7DJ,Q‡≤Ø
‡≤Ø7DJB5HVHW‡≤Ø
‡≤Ø7DJB,QSXWB-2*‡≤Ø
‡≤Ø7DJB'580B(1‡≤Ø
‡≤Ø/DVW6WHS‡≤Ø
‡≤Ø0\(YHQW‡≤Ø

(12

(1
5(6(7
-2*
'580B(1
/67B67(3
(9(17

287
4
287B:25'
(55B&2'(

‡≤Ø7DJ2XW‡≤Ø
‡≤Ø0\2XWSXW‡≤Ø
‡≤Ø7DJB2XWSXWB4‡≤Ø
‡≤Ø7DJB2XWSXWB:25'‡≤Ø
‡≤Ø7DJB(UURU&RGH‡≤Ø

Las tablas siguientes muestran el funcionamiento de la instrucci√≥n con valores concretos.

Antes de la ejecuci√≥n
En este ejemplo se utilizan los siguientes valores para asignar valores a los par√°metros de
entrada:
Par√°metro

Operando

Direcci√≥n

Valor

RESET

Tag_Reset

M0.0

FALSE

JOG

Tag_Input_JOG

M0.1

FALSE

DRUM_EN

Tag_Input_Drum_EN

M0.2

TRUE

LST_STEP

Tag_Number_LastStep

MB1

B#16#08

EVENT2

MyTag_Event_2

M20.0

FALSE

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5221

Instrucciones
4.2 Instrucciones
Par√°metro

Operando

Direcci√≥n

Valor

EVENT4

MyTag_Event_4

M20.1

FALSE

EVENT6

MyTag_Event_6

M20.2

FALSE

EVENT8

MyTag_Event_8

M20.3

FALSE

EVENT10

MyTag_Event_10

M20.4

FALSE

EVENT12

MyTag_Event_12

M20.5

FALSE

EVENT14

MyTag_Event_14

M20.6

FALSE

EVENT16

MyTag_Event_16

M20.7

FALSE

En el bloque de datos de instancia "DRUM_X_DB" de la instrucci√≥n est√°n almacenados los
siguientes valores:
Par√°metro

5222

Direcci√≥n

Valor

JOG_HIS

DBX12.0

FALSE

EOD

DBX12.1

FALSE

DSP

DBB13

W#16#0001

DSC

DBB14

W#16#0001

DCC

DBD16

DW#16#0000000A

DTBP

DBW20

W#16#0001

S_PRESET[1]

DBW26

W#16#0064

S_PRESET[2]

DBW28

W#16#00C8

OUT_VAL[1,0]

DBX58.0

TRUE

OUT_VAL[1,1]

DBX58.1

TRUE

OUT_VAL[1,2]

DBX58.2

TRUE

OUT_VAL[1,3]

DBX58.3

TRUE

OUT_VAL[1,4]

DBX58.4

TRUE

OUT_VAL[1,5]

DBX58.5

TRUE

OUT_VAL[1,6]

DBX58.6

TRUE

OUT_VAL[1,7]

DBX58.7

TRUE

OUT_VAL[1,8]

DBX59.0

TRUE

OUT_VAL[1,9]

DBX59.1

TRUE

OUT_VAL[1,10]

DBX59.2

TRUE

OUT_VAL[1,11]

DBX59.3

TRUE

OUT_VAL[1,12]

DBX59.4

TRUE

OUT_VAL[1,13]

DBX59.5

TRUE

OUT_VAL[1,14]

DBX59.6

TRUE

OUT_VAL[1,15]

DBX59.7

TRUE

OUT_VAL[2,0]

DBX60.0

FALSE

OUT_VAL[2,1]

DBX60.1

FALSE

OUT_VAL[2,2]

DBX60.2

FALSE

OUT_VAL[2,3]

DBX60.3

FALSE

OUT_VAL[2,4]

DBX60.4

FALSE

OUT_VAL[2,5]

DBX60.5

FALSE

OUT_VAL[2,6]

DBX60.6

FALSE

OUT_VAL[2,7]

DBX60.7

FALSE

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Direcci√≥n

Valor

OUT_VAL[2,8]

DBX61.0

FALSE

OUT_VAL[2,9]

DBX61.1

FALSE

OUT_VAL[2,10]

DBX61.2

FALSE

OUT_VAL[2,11]

DBX61.3

FALSE

OUT_VAL[2,12]

DBX61.4

FALSE

OUT_VAL[2,13]

DBX61.5

FALSE

OUT_VAL[2,14]

DBX61.6

FALSE

OUT_VAL[2,15]

DBX61.7

FALSE

S_MASK[2,0]

DBX92.0

FALSE

S_MASK[2,1]

DBX92.1

TRUE

S_MASK[2,2]

DBX92.2

TRUE

S_MASK[2,3]

DBX92.3

TRUE

S_MASK[2,4]

DBX92.4

TRUE

S_MASK[2,5]

DBX92.5

FALSE

S_MASK[2,6]

DBX92.6

TRUE

S_MASK[2,7]

DBX92.7

TRUE

S_MASK[2,8]

DBX93.0

FALSE

S_MASK[2,9]

DBX93.1

FALSE

S_MASK[2,10]

DBX93.2

TRUE

S_MASK[2,11]

DBX93.3

TRUE

S_MASK[2,12]

DBX93.4

TRUE

S_MASK[2,13]

DBX93.5

TRUE

S_MASK[2,14]

DBX93.6

FALSE

S_MASK[2,15]

DBX93.7

TRUE

Los par√°metros de salida tienen los valores siguientes antes de ejecutarse la instrucci√≥n:
Par√°metro

Operando

Direcci√≥n

Valor

Q

Tag_Output_Q

M6.0

FALSE

OUTWORD

Tag_OutputWord

MW8

W#16#FFFF

OUT0

MyTag_Output_0

M4.0

TRUE

OUT1

MyTag_Output_1

M4.1

TRUE

OUT2

MyTag_Output_2

M4.2

TRUE

OUT3

MyTag_Output_3

M4.3

TRUE

OUT4

MyTag_Output_4

M4.4

TRUE

OUT5

MyTag_Output_5

M4.5

TRUE

OUT6

MyTag_Output_6

M4.6

TRUE

OUT7

MyTag_Output_7

M4.7

TRUE

OUT8

MyTag_Output_8

M5.0

TRUE

OUT9

MyTag_Output_9

M5.1

TRUE

OUT10

MyTag_Output_10

M5.2

TRUE

OUT11

MyTag_Output_11

M5.3

TRUE

OUT12

MyTag_Output_12

M5.4

TRUE

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5223

Instrucciones
4.2 Instrucciones
Par√°metro

Operando

Direcci√≥n

Valor

OUT13

MyTag_Output_13

M5.5

TRUE

OUT14

MyTag_Output_14

M5.6

TRUE

OUT15

MyTag_Output_15

M5.7

TRUE

Despu√©s de la ejecuci√≥n
Una vez ejecutada la instrucci√≥n, los valores siguientes se escriben en los par√°metros de
salida:
Par√°metro

Operando

Direcci√≥n

Valor

OUT0

MyTag_Output_0

M4.0

TRUE

OUT1

MyTag_Output_1

M4.1

FALSE

OUT2

MyTag_Output_2

M4.2

FALSE

OUT3

MyTag_Output_3

M4.3

FALSE

OUT4

MyTag_Output_4

M4.4

FALSE

OUT5

MyTag_Output_5

M4.5

TRUE

OUT6

MyTag_Output_6

M4.6

FALSE

OUT7

MyTag_Output_7

M4.7

FALSE

OUT8

MyTag_Output_8

M5.0

TRUE

OUT9

MyTag_Output_9

M5.1

TRUE

OUT10

MyTag_Output_10

M5.2

FALSE

OUT11

MyTag_Output_11

M5.3

FALSE

OUT12

MyTag_Output_12

M5.4

FALSE

OUT13

MyTag_Output_13

M5.5

FALSE

OUT14

MyTag_Output_14

M5.6

TRUE

OUT15

MyTag_Output_15

M5.7

FALSE

Q

Tag_Output_Q

M6.0

FALSE

OUTWORD

Tag_OutputWord

MW8

W#16#4321

ERR_CODE

Tag_ErrorCode

MW10

W#16#0000

En el bloque de datos de instancia "DRUM_X_DB" de la instrucci√≥n est√°n almacenados los
siguientes valores:
Par√°metro

Direcci√≥n

Valor

JOG_HIS

DBX12.0

FALSE

EOD

DBX12.1

FALSE

DSC

DBB14

W#16#0002

DCC

DBD16

DW#16#000000C8

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)

5224

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Insertar elementos FUP (P√°gina 8017)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

DCAT: Alarma de tiempo para control discreto
Descripci√≥n
La instrucci√≥n "Alarma de tiempo para control discreto" acumula el tiempo desde el instante en
el que el par√°metro CMD da la orden de abrir o cerrar. El tiempo se acumula hasta excederse
el tiempo predeterminado (PT) o hasta recibir la notificaci√≥n de que el dispositivo se ha cerrado
o abierto dentro del tiempo prescrito (O_FB o C_FB). Si se excede el tiempo predeterminado
antes de recibirse la notificaci√≥n de que se ha abierto o cerrado el dispositivo, se activa la
alarma correspondiente. Si el estado l√≥gico de la entrada de la orden cambia antes del tiempo
predeterminado, se reinicia el tiempo.
Al insertar la instrucci√≥n en el programa se abre autom√°ticamente el cuadro de di√°logo
"Opciones de llamada" se abre autom√°ticamente; en √©l se puede determinar si los par√°metros
de bloque de la instrucci√≥n se depositan en un bloque de datos propio (instancia individual) o
bien como variable local (multiinstancia) en la interfaz del bloque. Si crea un bloque de datos
propio, lo encontrar√° en el √°rbol del proyecto, en la carpeta "Recursos de programa", en
"Bloques de programa > Bloques de sistema". Encontrar√° m√°s informaci√≥n al respecto en
"Consulte tambi√©n".
La instrucci√≥n "Alarma de tiempo para control discreto" tiene las reacciones siguientes en las
condiciones de entrada:
‚óè Si el estado l√≥gico del par√°metro CMD cambia de "0" a "1", esto tiene los efectos siguientes
en los estados l√≥gicos de los par√°metros Q, CMD_HIS, ET, OA y CA:
‚Äì Los par√°metros Q y CMD_HIS se ponen a "1"
‚Äì Los par√°metros ET, OA y CA se ponen a "0"
‚óè Si el estado l√≥gico del par√°metro CMD cambia de "1" a "0", los par√°metros Q, ET, OA, CA
y CMD_HIS se ponen a "0".
‚óè Si los par√°metros CMD y CMD_HIS tienen el estado l√≥gico "1" y el par√°metro O_FB se pone
a "0", la diferencia de tiempo (ms) desde la √∫ltima ejecuci√≥n de la instrucci√≥n se suma al
valor del par√°metro ET. Si el valor del par√°metro ET excede el del par√°metro PT, el estado
l√≥gico del par√°metro OA se pone a "1". Si el valor del par√°metro ET no excede el del
par√°metro PT, el estado l√≥gico del par√°metro OA se pone a "0". El valor del par√°metro
CMD_HIS se pone al del par√°metro CMD.
‚óè Si los estados l√≥gicos de los par√°metros CMD, CMD_HIS y O_FB est√°n a "1" y el par√°metro
C_FB devuelve el valor "0", el estado l√≥gico del par√°metro OA se pone a "0". El valor del
par√°metro ET se pone al del par√°metro PT. Si el estado l√≥gico del par√°metro O_FB cambia
a "0", se activa la alarma en la siguiente ejecuci√≥n de la instrucci√≥n. El valor del par√°metro
CMD_HIS se pone al del par√°metro CMD.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5225

Instrucciones
4.2 Instrucciones
‚óè Si los par√°metros CMD, CMD_HIS y C_FB devuelven el estado l√≥gico "0", la diferencia de
tiempo (ms) desde la √∫ltima ejecuci√≥n de la instrucci√≥n se suma al valor del par√°metro ET.
Si el valor del par√°metro ET excede el del par√°metro PT, el estado l√≥gico del par√°metro CA
se pone a "1". Si no se excede el valor del par√°metro PT, el par√°metro CA devuelve el
estado l√≥gico "0". El valor del par√°metro CMD_HIS se pone al del par√°metro CMD.
‚óè Si los par√°metros CMD, CMD_HIS y O_FB devuelven el estado l√≥gico "0" y el par√°metro
C_FB est√° a "1", el par√°metro CA se pone a "0". El valor del par√°metro ET se pone al del
par√°metro PT. Si el estado l√≥gico del par√°metro C_FB cambia a "0", se activa la alarma en
la siguiente ejecuci√≥n de la instrucci√≥n. El valor del par√°metro CMD_HIS se pone al del
par√°metro CMD.
‚óè Si los par√°metros O_FB y C_FB devuelven simult√°neamente el estado l√≥gico "1", los
estados l√≥gicos de ambas salidas de alarma se ponen a "1".
La instrucci√≥n "Alarma de tiempo para control discreto" no devuelve informaci√≥n de error.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Alarma de tiempo para control
discreto":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, D, L, T, C

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

CMD

Input

BOOL

I, Q, M, D, L

El estado l√≥gico "0" da la or‚Äê
den de "Cerrar".
El estado l√≥gico "1" da la or‚Äê
den de "Abrir".

O_FB

Input

BOOL

I, Q, M, D, L

Entrada de realimentaci√≥n al
abrir

C_FB

Input

BOOL

I, Q, M, D, L

Entrada de realimentaci√≥n al
cerrar

Q

Output

BOOL

I, Q, M, D, L

Indica el estado del par√°me‚Äê
tro CMD

OA

Output

BOOL

I, Q, M, D, L

Salida de alarma al abrir

CA

Output

BOOL

I, Q, M, D, L

Salida de alarma al cerrar

ET

Static

DINT

I, Q, M, D, L

Tiempo actual transcurrido;
un ciclo de reloj = 1 ms.

PT

Static

DINT

I, Q, M, D, L

Valor de tiempo predetermi‚Äê
nado; un ciclo de reloj = 1 ms.

PREV_TIME

Static

DWORD

I, Q, M, D, L

Hora de sistema anterior

CMD_HIS

Static

BOOL

I, Q, M, D, L

Bit de evoluci√≥n de CMD

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

5226

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
En el ejemplo siguiente, el par√°metro CMD cambia de "0" a "1". Una vez ejecutada la
instrucci√≥n, el par√°metro Q se pone a "1" y las dos salidas de alarma OA y CA se ponen a "0".
El par√°metro CMD_HIS del bloque de datos de instancia se pone a "1" y el par√°metro ET se
pone a "0".
Nota
Los par√°metros est√°ticos pueden inicializarse en el bloque de datos.
‡≤Ø'&$7B'%‡≤Ø
'&$7
‡≤Ø7DJ,Q‡≤Ø

(1

4

‡≤Ø7DJB2XWSXWB4‡≤Ø

‡≤Ø7DJB,QSXWB&0'‡≤Ø

&0'

2$

‡≤Ø7DJB2XWSXWB2$‡≤Ø

‡≤Ø7DJB,QSXWB2B)%‡≤Ø

2B)%

&$

‡≤Ø7DJB2XWSXWB&$‡≤Ø

‡≤Ø7DJB,QSXWB&B)%‡≤Ø

&B)%

(12

‡≤Ø7DJ2XW‡≤Ø

Las tablas siguientes muestran el funcionamiento de la instrucci√≥n con valores concretos.
Antes de la ejecuci√≥n
En este ejemplo se utilizan los siguientes valores para los par√°metros de entrada y salida:
Par√°metro

Operando

Valor

CMD

Tag_Input_CMD

TRUE

O_FB

Tag_Input_O_FB

FALSE

C_FB

Tag_Input_C_FB

FALSE

Q

Tag_Output_Q

FALSE

OA

Tag_Output_OA

FALSE

CA

Tag_Output_CA

FALSE

En el bloque de datos de instancia "DCAT_DB" de la instrucci√≥n est√°n almacenados los
siguientes valores:
Par√°metro

Direcci√≥n

Valor

ET

DBD4

L#12

PT

DBD8

L#222

CMD_HIS

DBX16.0

FALSE

Despu√©s de la ejecuci√≥n

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5227

Instrucciones
4.2 Instrucciones
Una vez ejecutada la instrucci√≥n, los valores siguientes se escriben en los par√°metros de
salida:
Par√°metro

Operando

Valor

Q

Tag_Output_Q

TRUE

OA

Tag_Output_OA

FALSE

CA

Tag_Output_CA

FALSE

En el bloque de datos de instancia "DCAT_DB" de la instrucci√≥n est√°n almacenados los
siguientes valores:
Par√°metro

Direcci√≥n

Valor

ET

DBD4

L#0

CMD_HIS

DBX16.0

TRUE

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Insertar elementos FUP (P√°gina 8017)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

MCAT: Alarma de tiempo para control del motor
Descripci√≥n
La instrucci√≥n "Alarma de tiempo para control del motor" permite acumular el tiempo desde el
instante en el que se activa una de las entradas de comando (abrir o cerrar). El tiempo se
acumula hasta que se excede el tiempo predeterminado o hasta que la entrada de
realimentaci√≥n correspondiente indica que el dispositivo ha ejecutado la operaci√≥n solicitada
dentro del tiempo prescrito. Si se excede el tiempo predeterminado antes de recibir la
realimentaci√≥n, se dispara la alarma correspondiente.
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si los par√°metros de bloque de la instrucci√≥n se
depositan en un bloque de datos propio (instancia individual) o bien como variable local
(multiinstancia) en la interfaz del bloque. Si crea un bloque de datos propio, lo encontrar√° en
el √°rbol del proyecto, en la carpeta "Recursos de programa", en "Bloques de programa >
Bloques de sistema". Encontrar√° m√°s informaci√≥n al respecto en "Consulte tambi√©n".
La instrucci√≥n "Alarma de tiempo para control del motor" no devuelve informaci√≥n de error.

5228

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejecuci√≥n de la instrucci√≥n "Alarma de tiempo para control del motor"
La tabla siguiente muestra las reacciones de la instrucci√≥n "Alarma de tiempo para control del
motor" a las distintas condiciones de entrada:
Par√°metros de entrada

Par√°metros de salida

ET

O_H
IS

C_H
IS

O_C
MD

C_C
MD

S_C
MD

O_F
B

C_F
B

OO

CO

OA

CA

ET

O_H
IS

C_HI Q
S

Estado

X

1

1

X

X

X

X

X

0

0

1

1

PT

0

0

Alarma

X

X

X

X

X

X

1

1

0

0

1

1

PT

0

0

0

Alarma

X

X

X

X

X

1

X

X

0

0

0

0

X

0

0

1

Stop

X

X

X

1

1

X

X

X

0

0

0

0

X

0

0

1

Stop

X

0

X

1

0

0

X

X

1

0

0

0

0

1

0

1

Empezar a
abrir

<PT

1

0

X

0

0

0

X

1

0

0

0

INC

1

0

1

Abrir

X

1

0

X

0

0

1

0

0

0

0

0

PT

1

0

1

Abierto

>=
PT

1

0

X

0

0

0

X

0

0

1

0

PT

1

0

0

Abrir alarma

X

X

0

0

1

0

X

X

0

1

0

0

0

0

1

1

Empezar a
cerrar

< PT 0

1

0

X

0

X

0

0

1

0

0

INC

0

1

1

Cerrar

X

0

1

0

X

0

0

1

0

0

0

0

PT

0

1

1

Cerrado

>=
PT

0

1

0

X

0

X

0

0

0

0

1

PT

0

1

0

Cerrar alar‚Äê
ma

X

0

0

0

0

0

X

X

0

0

0

0

X

0

0

1

Parado

0

Leyenda:
INC

Sumar a ET la diferencia de tiempo (en ms) desde la √∫ltima ejecuci√≥n del FB

PT

PT se pone al mismo valor que ET

X

No aplicable

< PT

ET < PT

>= PT

ET >= PT

Si los par√°metros de entrada O_HIS y C_HIS tienen el estado l√≥gico "1", se ponen inmediatamente al estado l√≥gico "0". En
este caso se aplica la √∫ltima fila de la tabla mencionada m√°s arriba (X). Puesto que por este motivo no es posible comprobar
si los par√°metros de entrada O_HIS y C_HIS tienen el estado l√≥gico "1", en este caso se asigna el siguiente valor a los
par√°metros de salida:
OO = FALSE
CO = FALSE
OA = FALSE
CA = FALSE
ET = PT
Q = TRUE

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5229

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Alarma de tiempo para control del
motor":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, D, L, T, C

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

O_CMD

Input

BOOL

I, Q, M, D, L

Entrada de la orden "Abrir"

C_CMD

Input

BOOL

I, Q, M, D, L

Entrada de la orden "Cerrar"

S_CMD

Input

BOOL

I, Q, M, D, L

Entrada de la orden "Parar"

O_FB

Input

BOOL

I, Q, M, D, L

Entrada de realimentaci√≥n al
abrir

C_FB

Input

BOOL

I, Q, M, D, L

Entrada de realimentaci√≥n al
cerrar

OO

Output

BOOL

I, Q, M, D, L

Salida "Abrir"

CO

Output

BOOL

I, Q, M, D, L

Salida "Cerrar"

OA

Output

BOOL

I, Q, M, D, L

Salida de alarma al abrir

CA

Output

BOOL

I, Q, M, D, L

Salida de alarma al cerrar

Q

Output

BOOL

I, Q, M, D, L

El estado l√≥gico "0" indica
una condici√≥n de error.

ET

Static

DINT

I, Q, M, D, L

Tiempo actual transcurrido;
un ciclo de reloj = 1 ms

PT

Static

DINT

I, Q, M, D, L

Valor de tiempo predetermi‚Äê
nado; un ciclo de reloj = 1 ms

PREV_TIME

Static

DWORD

I, Q, M, D, L

Hora de sistema anterior

O_HIS

Static

BOOL

I, Q, M, D, L

Bit de evoluci√≥n "Abrir"

C_HIS

Static

BOOL

I, Q, M, D, L

Bit de evoluci√≥n "Cerrar"

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
Nota
Los par√°metros est√°ticos pueden inicializarse en el bloque de datos.

5230

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
‡≤Ø0&$7B'%‡≤Ø
0&$7
(1

22

‡≤Ø7DJB2XWSXW2SHQ‡≤Ø

‡≤Ø7DJB,QSXWB2B&0'‡≤Ø

2B&0'

&2

‡≤Ø7DJB2XWSXW&ORVHG‡≤Ø

‡≤Ø7DJB,QSXWB&B&0'‡≤Ø

&B&0'

2$

‡≤Ø7DJB2XWSXWB2$‡≤Ø

‡≤Ø7DJB,QSXWB6B&0'‡≤Ø

6B&0'

&$

‡≤Ø7DJB2XWSXWB&$‡≤Ø

4

‡≤Ø7DJB2XWSXWB4‡≤Ø

‡≤Ø7DJ,Q‡≤Ø

‡≤Ø7DJB,QSXWB2B)%‡≤Ø

2B)%

‡≤Ø7DJ2XW‡≤Ø
‡≤Ø7DJB,QSXWB&B)%‡≤Ø

&B)%

(12

Las tablas siguientes muestran el funcionamiento de la instrucci√≥n con valores concretos.
Antes de la ejecuci√≥n
En este ejemplo se utilizan los siguientes valores para los par√°metros de entrada y salida:
Par√°metro

Operando

Valor

O_CMD

Tag_Input_O_CMD

TRUE

C_CMD

Tag_Input_C_CMD

FALSE

S_CMD

Tag_Input_S_CMD

FALSE

O_FB

Tag_Input_O_FB

FALSE

C_FB

Tag_Input_C_FB

FALSE

OO

Tag_OutputOpen

FALSE

CO

Tag_OutputClosed

FALSE

OA

Tag_Output_OA

FALSE

CA

Tag_Output_CA

FALSE

Q

Tag_Output_Q

FALSE

Los siguientes valores est√°n almacenados en el bloque de datos de instancia "MCAT_DB" de
la instrucci√≥n:
Par√°metro

Direcci√≥n

Valor

ET

DBD4

L#2

PT

DBD8

L#22

O_HIS

DBX16.0

TRUE

C_HIS

DBX16.1

FALSE

Despu√©s de la ejecuci√≥n

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5231

Instrucciones
4.2 Instrucciones
Una vez ejecutada la instrucci√≥n, los valores siguientes se escriben en los par√°metros de
salida:
Par√°metro

Operando

Valor

OO

Tag_OutputOpen

TRUE

CO

Tag_OutputClosed

FALSE

OA

Tag_Output_OA

FALSE

CA

Tag_Output_CA

FALSE

Q

Tag_Output_Q

TRUE

Los siguientes valores est√°n almacenados en el bloque de datos de instancia "MCAT_DB" de
la instrucci√≥n:
Par√°metro

Direcci√≥n

Valor

ET

DBD4

L#0

O_HIS

DBX16.0

TRUE

CMD_HIS

DBX16.1

FALSE

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Insertar elementos FUP (P√°gina 8017)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

IMC: Comparar bits de entrada con bits de una m√°scara
Descripci√≥n
La instrucci√≥n "Comparar bits de entrada con bits de una m√°scara" compara el estado l√≥gico
de hasta 16 bits de entrada programados (IN_BIT0 a IN_BIT15) con el bit correspondiente de
una m√°scara. Es posible programar como m√°ximo 16 pasos con m√°scaras. El valor del
par√°metro IN_BIT0 se compara con el valor de la m√°scara CMP_VAL[x,0], siendo "x" el
n√∫mero del paso. El n√∫mero del paso de la m√°scara utilizada para la comparaci√≥n se define en
el par√°metro CMP_STEP. De esta misma manera se comparan todos los valores
programados. Los bits de entrada no programados o los bits no programados de la m√°scara
tienen el estado l√≥gico predeterminado FALSE.
Si se encuentra una coincidencia al realizar la comparaci√≥n, el estado l√≥gico del par√°metro
OUT se pone a "1". De lo contrario, el par√°metro OUT se pone a "0".
Si el valor del par√°metro CMP_STEP es mayor que 15, no se ejecuta la instrucci√≥n. En el
par√°metro ERR_CODE se emite un mensaje de error.
Al insertar la instrucci√≥n en el programa se abre autom√°ticamente el cuadro de di√°logo
"Opciones de llamada" se abre autom√°ticamente; en √©l se puede determinar si los par√°metros
de bloque de la instrucci√≥n se depositan en un bloque de datos propio (instancia individual) o

5232

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
bien como variable local (multiinstancia) en la interfaz del bloque. Si crea un bloque de datos
propio, lo encontrar√° en el √°rbol del proyecto, en la carpeta "Recursos de programa", en
"Bloques de programa > Bloques de sistema". Encontrar√° m√°s informaci√≥n al respecto en
"Consulte tambi√©n".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Comparar bits de entrada con bits
de una m√°scara":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, D, L, T, C

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

IN_BIT0

Input

BOOL

I, Q, M, D, L

El bit de entrada 0 se compa‚Äê
ra con el bit 0 de la m√°scara.

IN_BIT1

Input

BOOL

I, Q, M, D, L

El bit de entrada 1 se compa‚Äê
ra con el bit 1 de la m√°scara.

IN_BIT2

Input

BOOL

I, Q, M, D, L

El bit de entrada 2 se compa‚Äê
ra con el bit 2 de la m√°scara.

IN_BIT3

Input

BOOL

I, Q, M, D, L

El bit de entrada 3 se compa‚Äê
ra con el bit 3 de la m√°scara.

IN_BIT4

Input

BOOL

I, Q, M, D, L

El bit de entrada 4 se compa‚Äê
ra con el bit 4 de la m√°scara.

IN_BIT5

Input

BOOL

I, Q, M, D, L

El bit de entrada 5 se compa‚Äê
ra con el bit 5 de la m√°scara.

IN_BIT6

Input

BOOL

I, Q, M, D, L

El bit de entrada 6 se compa‚Äê
ra con el bit 6 de la m√°scara.

IN_BIT7

Input

BOOL

I, Q, M, D, L

El bit de entrada 7 se compa‚Äê
ra con el bit 7 de la m√°scara.

IN_BIT8

Input

BOOL

I, Q, M, D, L

El bit de entrada 8 se compa‚Äê
ra con el bit 8 de la m√°scara.

IN_BIT9

Input

BOOL

I, Q, M, D, L

El bit de entrada 9 se compa‚Äê
ra con el bit 9 de la m√°scara.

IN_BIT10

Input

BOOL

I, Q, M, D, L

El bit de entrada 10 se com‚Äê
para con el bit 10 de la m√°s‚Äê
cara.

IN_BIT11

Input

BOOL

I, Q, M, D, L

El bit de entrada 11 se com‚Äê
para con el bit 11 de la m√°s‚Äê
cara.

IN_BIT12

Input

BOOL

I, Q, M, D, L

El bit de entrada 12 se com‚Äê
para con el bit 12 de la m√°s‚Äê
cara.

IN_BIT13

Input

BOOL

I, Q, M, D, L

El bit de entrada 13 se com‚Äê
para con el bit 13 de la m√°s‚Äê
cara.

IN_BIT14

Input

BOOL

I, Q, M, D, L

El bit de entrada 14 se com‚Äê
para con el bit 14 de la m√°s‚Äê
cara.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5233

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN_BIT15

Input

BOOL

I, Q, M, D, L

El bit de entrada 15 se com‚Äê
para con el bit 15 de la m√°s‚Äê
cara.

CMP_STEP

Input

BYTE

I, Q, M, D, L, P o
constante

N√∫mero de paso de la m√°s‚Äê
cara con la que se compara.

OUT

Output

BOOL

I, Q, M, D, L

El estado l√≥gico "1" indica
que se ha encontrado una
coincidencia.
El estado l√≥gico "0" indica
que no se ha encontrado nin‚Äê
guna coincidencia.

ERR_CODE

Output

WORD

I, Q, M, D, L, P

Informaci√≥n de error

CMP_VAL

Static

ARRAY of BOOL

I, Q, M, D, L

M√°scaras de comparaci√≥n [0
a 15, 0 a 15]: El primer n√∫me‚Äê
ro del √≠ndice es el n√∫mero del
paso y, el segundo, el n√∫me‚Äê
ro de bit de la m√°scara.

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Par√°metro ERR_CODE
La tabla siguiente muestra el significado de los valores del par√°metro ERR_CODE:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

000A

El valor del par√°metro CMP_STEP es mayor que 15.

*Los c√≥digos de error que aparecen en el editor de programas se pueden representar como valores
enteros o hexadecimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n
en "Consulte tambi√©n".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)
Insertar elementos FUP (P√°gina 8017)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

5234

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

SMC: Barrido de matriz
Descripci√≥n
La instrucci√≥n "Barrido de matriz" compara el estado l√≥gico de hasta 16 bits de entrada
programados (IN_BIT0 a IN_BIT15) con los bits correspondientes de las m√°scaras de
comparaci√≥n de cada paso. La ejecuci√≥n empieza por el paso 1 y contin√∫a hasta el √∫ltimo paso
programado (LAST) o hasta que se encuentre una correspondencia. El bit de entrada del
par√°metro IN_BIT0 se compara con el valor de la m√°scara CMP_VAL[x,0], siendo "x" el
n√∫mero de paso. De esta misma manera se comparan todos los valores programados. Si se
encuentra una correspondencia, el estado l√≥gico del par√°metro OUT se pone a "1" y el n√∫mero
de paso se escribe con la m√°scara correspondiente en el par√°metro OUT_STEP. Los bits de
entrada no programados o los bits no programados de la m√°scara tienen el estado l√≥gico
predeterminado FALSE. Si varios pasos tienen una m√°scara equivalente, se indica s√≥lo la
primera correspondencia encontrada en el par√°metro OUT_STEP. Si no se encuentra ninguna
correspondencia, el estado l√≥gico del par√°metro OUT se pone a "0". En este caso, el valor del
par√°metro OUT_STEP excede en "1" el valor del par√°metro LAST.
Al insertar la instrucci√≥n en el programa se abre autom√°ticamente el cuadro de di√°logo
"Opciones de llamada" se abre autom√°ticamente; en √©l se puede determinar si los par√°metros
de bloque de la instrucci√≥n se depositan en un bloque de datos propio (instancia individual) o
bien como variable local (multiinstancia) en la interfaz del bloque. Si crea un bloque de datos
propio, lo encontrar√° en el √°rbol del proyecto, en la carpeta "Recursos de programa", en
"Bloques de programa > Bloques de sistema". Encontrar√° m√°s informaci√≥n al respecto en
"Consulte tambi√©n".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Barrido de matriz":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, D, L, T, C

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

IN_BIT0

Input

BOOL

I, Q, M, D, L

El bit de entrada 0 se compa‚Äê
ra con el bit 0 de la m√°scara.

IN_BIT1

Input

BOOL

I, Q, M, D, L

El bit de entrada 1 se compa‚Äê
ra con el bit 1 de la m√°scara.

IN_BIT2

Input

BOOL

I, Q, M, D, L

El bit de entrada 2 se compa‚Äê
ra con el bit 2 de la m√°scara.

IN_BIT3

Input

BOOL

I, Q, M, D, L

El bit de entrada 3 se compa‚Äê
ra con el bit 3 de la m√°scara.

IN_BIT4

Input

BOOL

I, Q, M, D, L

El bit de entrada 4 se compa‚Äê
ra con el bit 4 de la m√°scara.

IN_BIT5

Input

BOOL

I, Q, M, D, L

El bit de entrada 5 se compa‚Äê
ra con el bit 5 de la m√°scara.

IN_BIT6

Input

BOOL

I, Q, M, D, L

El bit de entrada 6 se compa‚Äê
ra con el bit 6 de la m√°scara.

IN_BIT7

Input

BOOL

I, Q, M, D, L

El bit de entrada 7 se compa‚Äê
ra con el bit 7 de la m√°scara.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5235

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN_BIT8

Input

BOOL

I, Q, M, D, L

El bit de entrada 8 se compa‚Äê
ra con el bit 8 de la m√°scara.

IN_BIT9

Input

BOOL

I, Q, M, D, L

El bit de entrada 9 se compa‚Äê
ra con el bit 9 de la m√°scara.

IN_BIT10

Input

BOOL

I, Q, M, D, L

El bit de entrada 10 se com‚Äê
para con el bit 10 de la m√°s‚Äê
cara.

IN_BIT11

Input

BOOL

I, Q, M, D, L

El bit de entrada 11 se com‚Äê
para con el bit 11 de la m√°s‚Äê
cara.

IN_BIT12

Input

BOOL

I, Q, M, D, L

El bit de entrada 12 se com‚Äê
para con el bit 12 de la m√°s‚Äê
cara.

IN_BIT13

Input

BOOL

I, Q, M, D, L

El bit de entrada 13 se com‚Äê
para con el bit 13 de la m√°s‚Äê
cara.

IN_BIT14

Input

BOOL

I, Q, M, D, L

El bit de entrada 14 se com‚Äê
para con el bit 14 de la m√°s‚Äê
cara.

IN_BIT15

Input

BOOL

I, Q, M, D, L

El bit de entrada 15 se com‚Äê
para con el bit 15 de la m√°s‚Äê
cara.

OUT

Output

BOOL

I, Q, M, D, L

El estado l√≥gico "1" indica
que se ha encontrado una
coincidencia.
El estado l√≥gico "0" indica
que no se ha encontrado nin‚Äê
guna coincidencia.

ERR_CODE

Output

WORD

I, Q, M, D, L, P

Informaci√≥n de error

OUT_STEP

Output

BYTE

I, Q, M, D, L, P

Contiene el n√∫mero de paso
con la m√°scara correspon‚Äê
diente o el n√∫mero de paso
que excede en "1" el valor del
par√°metro LAST, si no se ha
encontrado ninguna corres‚Äê
pondencia.

LAST

Static

BYTE

I, Q, M, D, L, P

Indica el n√∫mero del √∫ltimo
paso en que se tiene que
buscar una m√°scara corres‚Äê
pondiente.

CMP_VAL

Static

ARRAY of WORD

I, Q, M, D, L

M√°scaras de comparaci√≥n [0
a 15, 0 a 15]: El primer n√∫me‚Äê
ro del √≠ndice es el n√∫mero del
paso y, el segundo, el n√∫me‚Äê
ro de bit de la m√°scara.

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

5236

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metro ERR_CODE
La tabla siguiente muestra el significado de los valores del par√°metro ERR_CODE:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

000E

El valor del par√°metro LAST es mayor que 15.

*Los c√≥digos de error que aparecen en el editor de programas se pueden representar como valores
enteros o hexadecimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n
en "Consulte tambi√©n".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)
Insertar elementos FUP (P√°gina 8017)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

LEAD_LAG: Algoritmo Lead y Lag
Descripci√≥n
La instrucci√≥n "Algoritmo Lead y Lag" procesa se√±ales con una variable anal√≥gica. El valor
para la amplificaci√≥n en el par√°metro GAIN debe ser mayor que cero. El resultado de la
instrucci√≥n "Algoritmo Lead y Lag" se calcula con la siguiente ecuaci√≥n:
287

/*B7,0(
/'B7,0(6$03/(B7
/'B7,0(
,1*$,1
35(9B287*$,1
/*B7,0(6$03/(B7
/*B7,0(6$03/(B7
/*B7,0(6$03/(B7

35(9B,1

La instrucci√≥n "Algoritmo Lead y Lag" solo devuelve resultados relevantes cuando se ejecuta
en ciclos de programa fijos. Deben indicarse las mismas unidades en los par√°metros
LD_TIME, LG_TIME y SAMPLE_T. Si LG_TIME > 4 + SAMPLE_T, la instrucci√≥n se aproxima
a la siguiente funci√≥n:
OUT = GAIN * ((1 + LD_TIME * s) / (1 + LG_TIME * s)) * IN
Si el valor del par√°metro GAIN es menor o igual a cero, no se realiza el c√°lculo y el par√°metro
ERR_CODE devuelve una informaci√≥n de error.
La instrucci√≥n "Algoritmo Lead y Lag" puede utilizarse junto con bucles para la compensaci√≥n
en el control anticipativo din√°mico. La instrucci√≥n comprende dos operaciones. La operaci√≥n
"Lead" desplaza la fase de la salida OUT, anticip√°ndose la salida a la entrada. En cambio, la
operaci√≥n "Lag" desplaza la salida, de manera que la salida sigue a la entrada. Puesto que la
operaci√≥n "Lag" equivale a una integraci√≥n, puede utilizarse para suprimir perturbaciones o
como filtro pasa bajo. La operaci√≥n "Lead" equivale a una acci√≥n diferencial, por lo que puede

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5237

Instrucciones
4.2 Instrucciones
utilizarse como un filtro de paso alto. La combinaci√≥n de ambas operaciones (Lead y Lag) hace
que la fase de salida siga a la entrada a bajas frecuencias y se le anticipe a altas frecuencias.
Por este motivo, la instrucci√≥n "Algoritmo Lead y Lag" puede utilizarse como si fuera un filtro
de paso de banda.
Al insertar la instrucci√≥n en el programa se abre autom√°ticamente el cuadro de di√°logo
"Opciones de llamada" se abre autom√°ticamente; en √©l se puede determinar si los par√°metros
de bloque de la instrucci√≥n se depositan en un bloque de datos propio (instancia individual) o
bien como variable local (multiinstancia) en la interfaz del bloque. Si crea un bloque de datos
propio, lo encontrar√° en el √°rbol del proyecto, en la carpeta "Recursos de programa", en
"Bloques de programa > Bloques de sistema". Encontrar√° m√°s informaci√≥n al respecto en
"Consulte tambi√©n".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Algoritmo Lead y Lag":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, D, L, T, C

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

IN

Input

REAL

I, Q, M, D, L, P o
constante

Valor de entrada del tiempo
de muestreo actual (tiempo
de ciclo) que se procesa.

SAMPLE_T

Input

INT

I, Q, M, D, L, P o
constante

Tiempo de muestreo

OUT

Output

REAL

I, Q, M, D, L, P

Resultado de la instrucci√≥n

ERR_CODE

Output

WORD

I, Q, M, D, L, P

Informaci√≥n de error

LD_TIME

Static

REAL

I, Q, M, D, L, P o
constante

Tiempo de anticipaci√≥n en la
misma unidad que el tiempo
de muestreo.

LG_TIME

Static

REAL

I, Q, M, D, L, P o
constante

Tiempo de seguimiento en la
misma unidad que el tiempo
de muestreo.

GAIN

Static

REAL

I, Q, M, D, L, P o
constante

Ganancia en % / % (relaci√≥n
del cambio en la salida con
respecto al cambio en la en‚Äê
trada como estado constan‚Äê
te).

PREV_IN

Static

REAL

I, Q, M, D, L, P o
constante

Entrada anterior

PREV_OUT

Static

REAL

I, Q, M, D, L, P o
constante

Salida anterior

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

5238

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metro ERR_CODE
La tabla siguiente muestra el significado de los valores del par√°metro ERR_CODE:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

0009

El valor del par√°metro GAIN es menor o igual a cero.

*Los c√≥digos de error que aparecen en el editor de programas se pueden representar como valores
enteros o hexadecimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n
en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
Nota
Los par√°metros est√°ticos pueden inicializarse en el bloque de datos.
‡≤Ø/($'B/$*B'%‡≤Ø
/($'B/$*
‡≤Ø7DJ,Q‡≤Ø
‡≤Ø7DJB,QSXW‡≤Ø
‡≤Ø7DJB,QSXWB6$03/(B7‡≤Ø

287

(1
,1

(55B&2'(

6$03/(B7

(12

‡≤Ø7DJB2XWSXWB5HVXOW‡≤Ø
‡≤Ø7DJB(UURU&RGH‡≤Ø
‡≤Ø7DJ2XW‡≤Ø

Las tablas siguientes muestran el funcionamiento de la instrucci√≥n con valores concretos.
Antes de la ejecuci√≥n
En este ejemplo se utilizan los siguientes valores para los par√°metros de entrada:
Par√°metro

Operando

Valor

IN

Tag_Input

2.0

SAMPLE_T

Tag_InputSampleTime

10

En el bloque de datos de instancia "LEAD_LAG_DB" de la instrucci√≥n est√°n almacenados los
siguientes valores:
Par√°metro

Direcci√≥n

Valor

LD_TIME

DBD12

2.0

LG_TIME

DBD16

2.0

GAIN

DBD20

1.0

PREV_IN

DBD24

6.0

PREV_OUT

DBD28

6.0

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5239

Instrucciones
4.2 Instrucciones
Despu√©s de la ejecuci√≥n
Una vez ejecutada la instrucci√≥n, los valores siguientes se escriben en los par√°metros de
salida:
Par√°metro

Operando

Valor

OUT

Tag_Output_Result

2.0

Los siguientes valores se almacenan en el bloque de datos de instancia LEAD_LAD_DB de la
instrucci√≥n:
Par√°metro

Operando

Valor

PREV_IN

DBD24

2.0

PREV_OUT

DBD28

2.0

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)
Insertar elementos FUP (P√°gina 8017)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

TONR_X: Acumulador de tiempo
Descripci√≥n
La instrucci√≥n "Acumulador de tiempo" acumula valores de tiempo dentro de un periodo
definido, que se indica con la entrada PV. La instrucci√≥n se ejecuta cuando el estado l√≥gico de
la entrada de arranque TMR_EN cambia de "0" a "1". Al mismo tiempo, el temporizador cuenta
el tiempo programado en la entrada PV. Mientras la instrucci√≥n se ejecuta, suma el valor de
tiempo de la entrada DELTA_T al valor de tiempo de InOut ET.
Deben cumplirse las siguientes condiciones:
‚óè La entrada de arranque TMR_EN devuelve el estado l√≥gico "1".
‚óè El valor de tiempo de InOut ET es menor que el del par√°metro PV.
‚óè La entrada RESET devuelve el estado l√≥gico "0".
La instrucci√≥n se interrumpe cuando el estado l√≥gico de la entrada de arranque TMR_EN
cambia de "1" a "0". En cuanto el estado l√≥gico cambia de nuevo a "1", la instrucci√≥n prosigue.
La instrucci√≥n finaliza cuando el valor de tiempo de InOut ET alcanza el valor de tiempo de la
entrada PV. Entonces la salida Q devuelve el estado l√≥gico "1".
Mientras la salida Q devuelva el estado l√≥gico "1", el valor de tiempo de InOut ET no se
modifica. El valor de tiempo y la salida Q se vuelven a poner a "0" cuando la entrada RESET
adopta el estado l√≥gico "1".

5240

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Puesto que la instrucci√≥n "Acumulador de tiempo" utiliza el tiempo de ciclo (DELTA_T) del
√∫ltimo ciclo del bloque de organizaci√≥n (OB), solo puede llamarse en bloques de organizaci√≥n
c√≠clicos.
Nota
El tiempo de ciclo del bloque de organizaci√≥n debe desplazarse desde la informaci√≥n de
arranque a la variable global del par√°metro DELTA_T.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Acumulador de tiempo":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, D, L, T, C

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L, T, C

Salida de habilitaci√≥n

TMR_EN (Ti‚Äê
mer Enable)

Input

BOOL

I, Q, M, D, L, T, C

Entrada de arranque

RESET

Input

BOOL

I, Q, M, D, L, T, C

Entrada de reset

PV (Preset
Value)

Input

DINT

I, Q, M, D, L, P o
constante

Tiempo m√°ximo de lectura
del tiempo

DELTA_T

Input

INT

I, Q, M, D, L o
constante

Tiempo de ciclo del bloque
de organizaci√≥n del ciclo an‚Äê
terior

Q

Output

BOOL

I, Q, M, D, L

Salida que se activa al alcan‚Äê
zar el valor de tiempo prede‚Äê
terminado

ET (Elapsed
Time)

InOut

DINT

I, Q, M, D, L

Inicia la instrucci√≥n y la eje‚Äê
cuci√≥n del tiempo predetermi‚Äê
nado de la entrada PV

Valor de tiempo acumulado
(valor de tiempo transcurrido
actualmente + valor de tiem‚Äê
po de la entrada DELTA_T)

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5241

Instrucciones
4.2 Instrucciones

Cronograma de impulsos
La figura siguiente muestra el cronograma de impulsos de la instrucci√≥n "Acumulador de
tiempo":
705B(1

5(6(7

4

39

(7

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
7215B;
‡≤Ø7DJ,Q‡≤Ø
‡≤Ø7DJB6WDUW‡≤Ø
‡≤Ø7DJB5HVHW‡≤Ø


‡≤Ø7DJB(ODSVHG
7LPH‡≤Ø

(1
705B(1

(12
4

‡≤Ø7DJ2XW‡≤Ø
‡≤Ø7DJB2XWSXW‡≤Ø

5(6(7
39
'(/7$B7
(7

La instrucci√≥n se inicia cuando los operandos "TagIn" y "Tag_Start" devuelven el estado l√≥gico
"1". Con cada cambio de estado l√≥gico de "0" a "1" en la entrada TMR_EN el tiempo de ciclo
"2" de la entrada DELTA_T se suma al valor de tiempo actual de InOut ET hasta que se alcanza
el valor de tiempo m√°ximo "10" de la entrada PV. Si no se producen errores al ejecutar la
instrucci√≥n, la salida de habilitaci√≥n ENO devuelve el estado l√≥gico "1" y se activa la salida
"TagOut".

5242

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Insertar elementos FUP (P√°gina 8017)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

WSR: Guardar datos en el registro de desplazamiento
Descripci√≥n
La instrucci√≥n "Guardar datos en el registro de desplazamiento" permite escribir datos en un
registro de desplazamiento desde el origen indicado. Todo elemento del registro se desplaza
a la siguiente direcci√≥n. Los datos contenidos en la √∫ltima direcci√≥n del registro de
desplazamiento se pierden tras la operaci√≥n de desplazamiento.
Cada vez que la instrucci√≥n se ejecuta con el valor "0" en el par√°metro RESET, se leen datos
nuevos del origen (S_DATA) y se desplazan a la direcci√≥n inicial (START) del registro de
desplazamiento. El par√°metro LENGTH indica el n√∫mero de elementos que deben
desplazarse. El tipo de datos de los elementos se define en el par√°metro E_TYPE. Si se indica
un tipo de datos no admisible en el par√°metro E_TYPE, no se procesa la instrucci√≥n.
Si el par√°metro RESET est√° a "1" al ejecutarse la instrucci√≥n, se borra el registro. El par√°metro
Q se pone al estado l√≥gico "1" si el registro de desplazamiento est√° ocupado con ceros o si se
borra.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Guardar datos en el registro de
desplazamiento":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, D, L, T, C

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

RESET

Input

BOOL

I, Q, M, D, L

Entrada de reset

S_DATA

Input

POINTER

I, Q, M, D

Apunta al elemento de origen
que se desplaza a la direc‚Äê
ci√≥n inicial (START).
En el direccionamiento indi‚Äê
recto por registro inter√°rea,
el puntero debe indicarse en
formato de palabra doble.

START

Input

POINTER

I, Q, M, D

Apunta a la direcci√≥n inicial
del registro.
En el direccionamiento indi‚Äê
recto por registro inter√°rea,
el puntero debe indicarse en
formato de palabra doble.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5243

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

LEN

Input

WORD

I, Q, M, D, L, P

N√∫mero de elementos que
deben desplazarse.

E_TYPE

Input

BYTE

I, Q, M, D, L, P

Indica el tipo de datos de los
elementos que deben despla‚Äê
zarse. Los siguientes tipos
de datos son admisibles:
‚óè W#16#04 = WORD
‚óè B#16#05 = INT
‚óè B#16#06 = DWORD
‚óè B#16#07 = DINT
‚óè B#16#08 = REAL

Q

Output

BOOL

Q, M, D, L

Indica "0" si el par√°metro RE‚Äê
SET est√° activado (1) o si to‚Äê
dos los elementos que deben
desplazarse tienen el valor
"0".

Ejemplo
En el ejemplo siguiente se desplazan cuatro elementos del tipo de datos WORD a partir de la
direcci√≥n indicada en el par√°metro START. Una vez desplazado el primer elemento del
registro a la siguiente direcci√≥n, la primera direcci√≥n se ocupar√° con los datos a los que se√±ala
el puntero en el par√°metro S_DATA. El valor del √∫ltimo elemento del registro se pierde
entonces.
:65
‡≤Ø7DJ,Q‡≤Ø
‡≤Ø7DJB,QSXWB5HVHW‡≤Ø
‡≤Ø7DJB,QSXWB'DWD6RXUFH‡≤Ø
‡≤Ø7DJB,QSXWB6WDUW$GGUHVV‡≤Ø
‡≤Ø7DJB,QSXWB/HQJWK‡≤Ø
‡≤Ø7DJB,QSXWB(OHPHQW7\SH‡≤Ø

(1
5(6(7
6B'$7$
67$57

4

/(1

‡≤Ø7DJB2XWSXWB4‡≤Ø
‡≤Ø7DJ2XW‡≤Ø

(B7<3(

(12

Las tablas siguientes muestran el funcionamiento de la instrucci√≥n con valores concretos.
Antes de la ejecuci√≥n
En este ejemplo se utilizan los siguientes valores para los par√°metros de entrada y salida:
Par√°metro

Operando

Valor

RESET

Tag_Input_Reset

0

S_DATA

Tag_Input_DataSource

P#DB2.DBX6.0
DW0 = W#16#1111
DW2 = W#16#2222
DW4 = W#16#3333
DW6 = W#16#4444

5244

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Operando

Valor

START

Tag_Input_StartAddress

P#DB1.DBX0.0
DW6 = W#16#1234

LEN

Tag_Input_Length

W#16#04

E_TYPE

Tag_Input_ElementType

B#16#04

Q

Tag_Output_Q

1

Despu√©s de la ejecuci√≥n
Una vez ejecutada la instrucci√≥n, los valores siguientes se escriben en los par√°metros de
salida:
Par√°metro

Operando

Valor

RESET

Tag_Input_Reset

0

S_DATA

Tag_Input_DataSource

P#DB2.DBX6.0
DW0 = W#16#1234
DW2 = W#16#1111
DW4 = W#16#2222
DW6 = W#16#3333

START

Tag_Input_StartAddress

P#DB1.DBX0.0

LEN

Tag_Input_Length

W#16#04

E_TYPE

Tag_Input_ElementType

B#16#04

Q

Tag_Output_Q

1

DW6 = W#16#1234

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Insertar elementos FUP (P√°gina 8017)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

SHRB: Desplazar bit al registro de desplazamiento
Descripci√≥n
La instrucci√≥n "Desplazar bit al registro de desplazamiento" escribe un bit en un registro de
desplazamiento desde el origen indicado (DATA). Cada vez que la instrucci√≥n se ejecuta con
el valor "0" en el par√°metro RESET, se leen datos nuevos del origen y se desplazan a la
direcci√≥n inicial (S_BIT) del registro de desplazamiento. Los restantes bits se desplazan una
posici√≥n. El bit de la √∫ltima direcci√≥n (S_BIT + N) se pierde tras el desplazamiento. Si el
par√°metro RESET est√° a "1" mientras se ejecuta la instrucci√≥n, las direcciones del registro de
desplazamiento se ponen a "0" y no se desplazan.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5245

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Desplazar bit al registro de
desplazamiento":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, D, L, T, C

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

DATA

Input

BOOL

I, Q, M, D, L

Bit de origen

RESET

Input

BOOL

I, Q, M, D, L

Entrada de reset

S_BIT

Input

POINTER

I, Q, M, D

Apunta al bit inicial del regis‚Äê
tro de desplazamiento
En el direccionamiento indi‚Äê
recto por registro inter√°rea,
el puntero debe indicarse en
formato de palabra doble.

N

5246

Input

WORD

I, Q, M, D, L, P

N√∫mero de bits que deben
desplazarse.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
En el ejemplo siguiente, el par√°metro N se pone al valor 14 ("E" en notaci√≥n hexadecimal), con
lo que 14 bits se desplazan a partir de la direcci√≥n indicada en el par√°metro S_BIT. Una vez
desplazados los bits, la primera direcci√≥n se ocupa con los datos del origen del par√°metro
DATA. El √∫ltimo valor de bit se pierde.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5247

Instrucciones
4.2 Instrucciones

5248

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Las tablas siguientes muestran el funcionamiento de la instrucci√≥n con valores concretos.
Antes de la ejecuci√≥n
En este ejemplo se utilizan los siguientes valores para los par√°metros de entrada y salida:
Par√°metro

Operando

Valor

RESET

Tag_Input_Reset

0

DATA

Tag_Input_Data

0

S_BIT

Tag_Input_BitSource

P#DB1.DBX1.4

N

Tag_Input_Number

B#16#0E

Antes de ejecutarse la instrucci√≥n, los siguientes estados l√≥gicos est√°n almacenados en los 14
bits del registro:


























6B%,7









































Despu√©s de la ejecuci√≥n
Una vez ejecutada la instrucci√≥n, los siguientes estados l√≥gicos se almacenan en los 14 bits
del registro:


























6B%,7









































Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Insertar elementos FUP (P√°gina 8017)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5249

Instrucciones
4.2 Instrucciones

SEG: Generar patr√≥n de bits para el display de 7 segmentos
Descripci√≥n
La instrucci√≥n "Generar patr√≥n de bits para el display de 7 segmentos" convierte cada una de
las cuatro cifras hexadecimales de la palabra de origen indicada (IN) en un patr√≥n de bits
equivalente para un display de 7 segmentos. El resultado de la instrucci√≥n se deposita en la
palabra doble del par√°metro OUT.
Entre las cifras hexadecimales y la ocupaci√≥n de los 7 segmentos (a, b, c, d, e, f, g) existe la
siguiente relaci√≥n:
Cifra de en‚Äê
trada
(binaria)
0000
0001
0010
0011
0100
0101
0110
0111
1000
1001
1010
1011
1100
1101
1110
1111

Ocupaci√≥n de
los segmentos
‚Äëgfedcba
00111111
00000110
01011011
01001111
01100110
01101101
01111101
00000111
01111111
01100111
01110111
01111100
00111001
01011110
01111001
01110001

Display
Display de siete segmentos
(hexadecimal)
0
1
2
3
4
5
6
7
8
9
A
B
C
D
E
F

D
I

E
J

H

F
G

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Generar patr√≥n de bits para el
display de 7 segmentos":

5250

Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, D, L, T, C

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

IN

Input

WORD

I, Q, M, D, L, P o
constante

Palabra de origen con cuatro
cifras hexadecimales

OUT

Output

DWORD

I, Q, M, D, L, P

Patr√≥n de bits para el display
de 7 segmentos

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
6(*
‡≤Ø7DJ,Q‡≤Ø
‡≤Ø7DJB,QSXW‡≤Ø

(1

287

‡≤Ø7DJB2XWSXW‡≤Ø

,1

(12

‡≤Ø7DJ2XW‡≤Ø

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores concretos:
Par√°metro

Operando

Valor

Hexadecimal

Binario

IN

Tag_Input

W#16#1234

0001 0010 0011 0100

OUT

Tag_Output

DW#16065B4F66

00000110 01011011 01001111
01100110
Visualizaci√≥n: 1234

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Insertar elementos FUP (P√°gina 8017)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

BCDCPL: Generar complemento a diez
Descripci√≥n
La instrucci√≥n "Generar complemento a diez" crea el complemento a diez de un n√∫mero BCD
de siete d√≠gitos que se indica en el par√°metro IN. La instrucci√≥n realiza el c√°lculo con la
siguiente f√≥rmula matem√°tica:
10000000 (como BCD)
‚Äì Valor BCD de 7 d√≠gitos
---------------------------------------Complemento a diez (como BCD)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5251

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Generar complemento a diez":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, D, L, T, C

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

IN

Input

DWORD

I, Q, M, D, L, P o
constante

N√∫mero BCD de 7 d√≠gitos

ERR_CODE

Output

DWORD

I, Q, M, D, L, P

Resultado de la instrucci√≥n

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
%&'&3/
‡≤Ø7DJ,Q‡≤Ø
‡≤Ø7DJB,QSXW‡≤Ø

(1
,1

(55B&2'(
(12

‡≤Ø7DJB2XWSXW‡≤Ø
‡≤Ø7DJ2XW‡≤Ø

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores concretos:
Par√°metro

Operando

Valor*

IN

Tag_Input

DW#16#01234567

ERR_CODE

Tag_Output

DW#16#08765433

*Los c√≥digos de error que aparecen en el editor de programas se pueden representar como valores
enteros o hexadecimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n
en "Consulte tambi√©n".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)
Insertar elementos FUP (P√°gina 8017)
Editar elementos FUP (P√°gina 8034)
Cablear operandos en instrucciones FUP (P√°gina 8041)

5252

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

BITSUM: Contar n√∫mero de bits activados
Descripci√≥n
La instrucci√≥n "Contar n√∫mero de bits activados" cuenta el n√∫mero de bits de un operando que
est√°n puestos al estado l√≥gico "1". El operando cuyos bits se cuentan se especifica en el
par√°metro IN. El resultado de la instrucci√≥n se devuelve en el par√°metro RET_VAL.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Contar n√∫mero de bits activados":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

EN

Input

BOOL

I, Q, M, D, L, T, C

Entrada de habilitaci√≥n

ENO

Output

BOOL

I, Q, M, D, L

Salida de habilitaci√≥n

IN

Input

DWORD

I, Q, M, D, L, P o
constante

Operando cuyos bits activa‚Äê
dos se cuentan

RET_VAL

Output

INT

I, Q, M, D, L, P

N√∫mero de bits activados

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
%,7680
‡≤Ø7DJ,Q‡≤Ø
‡≤Ø7DJB,QSXW‡≤Ø

(1
,1

5(7B9$/
(12

‡≤Ø7DJB2XWSXW‡≤Ø
‡≤Ø7DJ2XW‡≤Ø

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores concretos:
Par√°metro

Operando

Valor*

IN

Tag_Input

DW#16#12345678

RET_VAL

Tag_Output

W#16#000D (13 bits)

*Los c√≥digos de error que aparecen en el editor de programas se pueden representar como valores
enteros o hexadecimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n
en "Consulte tambi√©n".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos del mecanismo EN/ENO (P√°gina 152)
Principios b√°sicos de FUP (P√°gina 8005)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5253

Instrucciones
4.2 Instrucciones

4.2.2.3

AWL

Temporizadores CEI
TP: Impulso
Descripci√≥n
La instrucci√≥n "Impulso" activa un operando por un tiempo programado. La instrucci√≥n se inicia
cuando el resultado l√≥gico (RLO) del par√°metro IN cambia de "0" a "1" (flanco de se√±al
ascendente). Al iniciar la instrucci√≥n empieza a contarse el periodo programado en el
par√°metro (PT). El par√°metro Q se activa por el tiempo PT, independientemente de c√≥mo
evolucione la se√±al en el par√°metro IN. La detecci√≥n de un nuevo flanco de se√±al ascendente
tampoco influye en el estado l√≥gico del par√°metro Q mientras transcurre el tiempo PT.
El valor de tiempo actual se puede consultar en la salida ET. Este valor de tiempo empieza a
partir de T#0s y termina al alcanzarse el valor del tiempo PT. Una vez alcanzado este tiempo
PT y si el estado l√≥gico de la entrada IN es "0", se desactiva la salida ET.
En el c√≥digo del programa, la instrucci√≥n "Impulso" se debe llamar con la instrucci√≥n "Llamar
bloque" (CALL).
A cada llamada de la instrucci√≥n "Impulso" debe asign√°rsele un temporizador CEI, en el que
se guardan los datos de la instrucci√≥n. Un temporizador CEI se puede declarar como se indica
a continuaci√≥n:
‚óè Declaraci√≥n de un bloque de datos del tipo TP (p. ej., "TP_DB")
‚óè Declaraci√≥n como variable local del tipo TP en la secci√≥n "Static" de un bloque (p. ej.,
#MyTP_TIMER)
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si el temporizador CEI se deposita en un bloque
de datos propio (instancia individual) o bien como variable local (multiinstancia) en la interfaz
del bloque. Si crea un bloque de datos propio, lo encontrar√° en el √°rbol del proyecto, en
"Bloques de programa > Bloques de sistema", carpeta "Recursos de programa", . Encontrar√°
m√°s informaci√≥n al respecto en "Consulte tambi√©n".
El sistema operativo inicializa las instancias de la instrucci√≥n "Impulso" cuando se efect√∫a un
arranque en fr√≠o. Si alguna instancia de la instrucci√≥n debe estar inicializada tras un rearranque
completo (en caliente), las instancias que se deben inicializar se deben llamar en un OB de
arranque con el valor "0" en el par√°metro PT. Si un bloque diferente contiene instancias de la
instrucci√≥n "Impulso", estas pueden inicializarse p. ej. inicializando el bloque de nivel superior.
Nota
Ignorar instrucci√≥n
Si en el programa no se llama la instrucci√≥n porque, p. ej., esta es ignorada, la salida ET
devuelve un valor de constante en cuanto ha transcurrido este tiempo.

5254

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Nota
Actualizaci√≥n de los datos de la instrucci√≥n
Los datos de la instrucci√≥n se actualizan √∫nicamente al llamar la instrucci√≥n. Al acceder a las
salidas Q o ET, no se actualizan los datos.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Impulso":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN

Input

BOOL

I, Q, M, D, L

Entrada de arranque

PT

Input

TIME

I, Q, M, D, L, P o
constante

Duraci√≥n del impulso.
El valor indicado en el par√°‚Äê
metro PT debe ser positivo

Q

Output

BOOL

I, Q, M, D, L

Salida de impulso

ET

Output

TIME

I, Q, M, D, L

Valor de tiempo actual

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Cronograma de impulsos
La figura siguiente muestra el comportamiento de la instrucci√≥n "Impulso" tras el arranque:
,1

4

37

37

37

(7
37

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5255

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL TP, "TP_DB"

// Se llama la instrucci√≥n. El bloque de datos "TP_DB" se asigna
a la instrucci√≥n.

IN := "Tag_Start"

// Cuando se produce un flanco de se√±al ascendente en el operando, se ejecuta la instrucci√≥n.

PT := "Tag_PresetTIME"

// Duraci√≥n del impulso

Q := "Tag_Output"

// El operando se activa durante el periodo determinado por el
operando "Tag_PresetTIME".

ET := "Tag_Elapsed"

// Valor de tiempo actual

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en instrucciones de temporizaci√≥n y contaje (P√°gina 188)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Instancias (P√°gina 61)

TON: Retardo al conectar
Descripci√≥n
La instrucci√≥n "Retardo al conectar" retarda un flanco de se√±al ascendente por el tiempo PT.
La instrucci√≥n se inicia cuando el resultado l√≥gico (RLO) del par√°metro IN cambia de "0" a "1"
(flanco de se√±al ascendente). Cuando se inicia la instrucci√≥n, se empieza a contar el tiempo
programado PT. Una vez transcurrido el tiempo PT, el par√°metro Q lleva el estado l√≥gico "1".
El operando del par√°metro Q permanecer√° activado mientras la entrada de arranque IN siga
a "1". Cuando el estado l√≥gico de la entrada de arranque cambia de "1" a "0", se desactiva el
par√°metro Q. La funci√≥n de temporizaci√≥n se reinicia al detectarse un nuevo flanco de se√±al
ascendente en la entrada de arranque.
El valor de tiempo actual se puede consultar en la salida ET. Este valor de tiempo empieza a
partir de T#0s y termina al alcanzarse el valor del tiempo PT. Una vez alcanzado este tiempo
PT y si el estado l√≥gico de la entrada IN es "0", se desactiva la salida ET.
En la l√≥gica del programa, la instrucci√≥n "Retardo al conectar" se debe llamar con la instrucci√≥n
"Llamar bloque" (CALL).

5256

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
A cada llamada de la instrucci√≥n "Retardo al conectar" debe asign√°rsele un temporizador CEI,
en el que se guarden los datos de la instrucci√≥n. Un temporizador CEI se puede declarar como
se indica a continuaci√≥n:
‚óè Declaraci√≥n de un bloque de datos del tipo TON (p. ej., "TON_DB")
‚óè Declaraci√≥n como variable local del tipo TON en la secci√≥n "Static" de un bloque (p. ej.,
#MyTON_TIMER)
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si el temporizador CEI se deposita en un bloque
de datos propio (instancia individual) o bien como variable local (multiinstancia) en la interfaz
del bloque. Si crea un bloque de datos propio, lo encontrar√° en el √°rbol del proyecto, en
"Bloques de programa > Bloques de sistema", carpeta "Recursos de programa", . Encontrar√°
m√°s informaci√≥n al respecto en "Consulte tambi√©n".
El sistema operativo inicializa las instancias de la instrucci√≥n "Retardo al conectar" cuando se
realiza un arranque en fr√≠o. Si alguna instancia de la instrucci√≥n debe estar inicializada tras un
rearranque completo (en caliente), las instancias que se deben inicializar se deben llamar en
un OB de arranque con el valor "0" en el par√°metro PT. Si un bloque diferente contiene
instancias de la instrucci√≥n "Retardo al conectar", estas pueden inicializarse p. ej. inicializando
el bloque de nivel superior.
Nota
Ignorar instrucci√≥n
Si en el programa no se llama la instrucci√≥n porque, p. ej., esta es ignorada, la salida ET
devuelve un valor de constante en cuanto ha transcurrido este tiempo.
Nota
Actualizaci√≥n de los datos de la instrucci√≥n
Los datos de la instrucci√≥n se actualizan √∫nicamente al llamar la instrucci√≥n. Al acceder a las
salidas Q o ET, no se actualizan los datos.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Retardo al conectar":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN

Input

BOOL

I, Q, M, D, L

Entrada de arranque

PT

Input

TIME

I, Q, M, D, L, P o
constante

Tiempo del retardo al conec‚Äê
tar
El valor indicado en el par√°‚Äê
metro PT debe ser positivo

Q

Output

BOOL

I, Q, M, D, L

Estado l√≥gico que se retarda
por el tiempo PT

ET

Output

TIME

I, Q, M, D, L

Valor de tiempo actual

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5257

Instrucciones
4.2 Instrucciones

Cronograma de impulsos
La figura siguiente muestra el comportamiento de la instrucci√≥n "Retardo al conectar" tras el
arranque:
,1

4

37

37

(7
37

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL TON, "TON_DB"

// Se llama la instrucci√≥n. El bloque de datos
"TON_DB" se asigna a la instrucci√≥n.

IN := "Tag_Start"

// Cuando se produce un flanco de se√±al ascendente en
el operando, se ejecuta la instrucci√≥n.

PT := "Tag_PresetTIME"

// Indica el tiempo en el que se retarda el flanco de
se√±al ascendente en el par√°metro IN.

Q := "Tag_Output"

// El operando se activa una vez transcurrido el tiempo PT predeterminado por la variable "Tag_PresetTIME".
// El par√°metro Q permanecer√° activado mientras la variable "Tag_Start" siga a "1".
// Cuando el estado l√≥gico de la entrada de arranque
cambie de "1" a "0", se desactivar√° el operando en el
par√°metro Q.

ET := "Tag_ElapsedTIME"

// Valor de tiempo actual

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en instrucciones de temporizaci√≥n y contaje (P√°gina 188)
A√±adir instrucciones AWL (P√°gina 8079)

5258

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Procesar instrucciones AWL (P√°gina 8098)
Instancias (P√°gina 61)

TOF: Retardo al desconectar
Descripci√≥n
La instrucci√≥n "Retardo al desconectar" retarda un flanco de se√±al descendente por el tiempo
PT. El operando del par√°metro Q se activa cuando el resultado l√≥gico (RLO) del par√°metro IN
cambia de "0" a "1" (flanco de se√±al ascendente). Cuando el estado l√≥gico del par√°metro IN
cambia nuevamente a "0", el tiempo programado PT deja de contar. El operando del par√°metro
Q permanece activado mientras transcurre el tiempo PT. Una vez transcurrido el tiempo PT se
inicializa el par√°metro Q. Si el estado l√≥gico del par√°metro IN cambia a "1" antes de que
transcurra el tiempo PT, se inicializa el temporizador. El estado l√≥gico del par√°metro Q
permanece a "1".
El valor actual de tiempo se puede consultar en el par√°metro ET. Este valor de tiempo actual
empieza a contar a partir de T#0s y termina al alcanzarse el valor de tiempo PT. Una vez
transcurrido el tiempo PT, el par√°metro ET permanece al valor actual hasta que el par√°metro
IN vuelva a cambiar a "1".
En la l√≥gica del programa, la instrucci√≥n "Retardo al desconectar" se debe llamar con la
instrucci√≥n "Llamar bloque" (CALL).
A cada llamada de la instrucci√≥n "Retardo al desconectar" debe asign√°rsele un temporizador
CEI, en el que se guarden los datos de la instrucci√≥n. Un temporizador CEI se puede declarar
como se indica a continuaci√≥n:
‚óè Declaraci√≥n de un bloque de datos del tipo TOF (p. ej., "TOF_DB")
‚óè Declaraci√≥n como variable local del tipo TOF en la secci√≥n "Static" de un bloque (p. ej.,
#MyTOF_TIMER)
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si el temporizador CEI se deposita en un bloque
de datos propio (instancia individual) o bien como variable local (multiinstancia) en la interfaz
del bloque. Si crea un bloque de datos propio, lo encontrar√° en el √°rbol del proyecto, en
"Bloques de programa > Bloques de sistema", carpeta "Recursos de programa", . Encontrar√°
m√°s informaci√≥n al respecto en "Consulte tambi√©n".
El sistema operativo inicializa las instancias de la instrucci√≥n "Retardo al desconectar" cuando
se realiza un arranque en fr√≠o. Si alguna instancia de la instrucci√≥n debe estar inicializada tras
un rearranque completo (en caliente), las instancias que se deben inicializar se deben llamar
en un OB de arranque con el valor "0" en el par√°metro PT. Si un bloque diferente contiene
instancias de la instrucci√≥n "Retardo al desconectar", estas pueden inicializarse p. ej.
inicializando el bloque de nivel superior.
Nota
Ignorar instrucci√≥n
Si en el programa no se llama la instrucci√≥n porque, p. ej., esta es ignorada, la salida ET
devuelve un valor de constante en cuanto ha transcurrido este tiempo.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5259

Instrucciones
4.2 Instrucciones
Nota
Actualizaci√≥n de los datos de la instrucci√≥n
Los datos de la instrucci√≥n se actualizan √∫nicamente al llamar la instrucci√≥n. Al acceder a las
salidas Q o ET, no se actualizan los datos.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Retardo al desconectar":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN

Input

BOOL

I, Q, M, D, L

Entrada de arranque

PT

Input

TIME

I, Q, M, D, L, P o
constante

Tiempo del retardo al desco‚Äê
nectar
El valor indicado en el par√°‚Äê
metro PT debe ser positivo

Q

Output

BOOL

I, Q, M, D, L

Estado l√≥gico que se retarda
por el tiempo PT

ET

Output

TIME

I, Q, M, D, L

Valor de tiempo actual

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Cronograma de impulsos
La figura siguiente muestra el comportamiento de la instrucci√≥n "Retardo al desconectar" tras
el arranque:
,1

4
37

37

(7
37

5260

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL TOF, "TOF_DB"

// Se llama la instrucci√≥n. El bloque de datos
"TOF_DB" se asigna a la instrucci√≥n.

IN := "Tag_Start"

// Cuando se produce un flanco de se√±al ascendente en
el operando, se ejecuta la instrucci√≥n.

PT := "Tag_PresetTIME"

// Indica el tiempo en el que se retarda el flanco de
se√±al descendente en el par√°metro IN.

Q := "Tag_Output"

// El operando se activa cuando la instrucci√≥n se inicia debido a un flanco de se√±al ascendente en el par√°metro IN.
// Si el estado l√≥gico del par√°metro IN cambia de "1"
a "0", el operando "Tag_Output" permanecer√° activado
mientras transcurra el tiempo predeterminado por la
variable "Tag_PresetTIME".
// Una vez transcurrido el tiempo del par√°metro PT, se
desactiva el operando.

ET := "Tag_ElapsedTIME"

// Valor de tiempo actual

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en instrucciones de temporizaci√≥n y contaje (P√°gina 188)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Instancias (P√°gina 61)

Contadores CEI
CTU: Contador ascendente
Descripci√≥n
La instrucci√≥n "Contador ascendente" incrementa el valor de contaje del par√°metro CV.
Cuando el estado l√≥gico del par√°metro CU cambia de "0" a "1" (flanco de se√±al ascendente),
se ejecuta la instrucci√≥n y el valor de contaje actual del par√°metro CV se incrementa en uno.
El valor de contaje se incrementa cada vez que se detecta un flanco de se√±al ascendente,
hasta alcanzar el valor l√≠mite superior del tipo de datos INT. Cuando se alcanza el valor l√≠mite
superior, el estado l√≥gico del par√°metro CU deja de tener efecto en la instrucci√≥n.
El estado del contador se puede consultar en el par√°metro Q. El estado l√≥gico del par√°metro
Q es determinado por el par√°metro PV. Si el valor de contaje actual es mayor o igual al valor
del par√°metro PV, el par√°metro Q adopta el estado l√≥gico "1". En los restantes casos, el estado
l√≥gico del par√°metro Q es "0". En el par√°metro PV tambi√©n se puede indicar una constante.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5261

Instrucciones
4.2 Instrucciones
El valor del par√°metro CV se pone a cero cuando el estado l√≥gico del par√°metro R cambia a
"1". Mientras el par√°metro R tenga el estado l√≥gico "1", el estado l√≥gico del par√°metro CU no
tendr√° efecto alguno en la instrucci√≥n.
En la l√≥gica del programa, la instrucci√≥n "Contador ascendente" se debe llamar con la
instrucci√≥n "Llamar bloque" (CALL).
Nota
Utilice el contador en una sola posici√≥n del programa para evitar fallos de contaje.
A cada llamada de la instrucci√≥n "Contador ascendente" debe asign√°rsele un contador CEI, en
el que se guarden los datos de la instrucci√≥n. Un contador CEI se declara del siguiente modo:
‚óè Declaraci√≥n de un bloque de datos del tipo CTU (p. ej., "CTU_DB")
‚óè Declaraci√≥n como variable local del tipo CTU en la secci√≥n "Static" de un bloque (p. ej.,
#MyCTU_COUNTER)
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si el contador CEI se deposita en un bloque de
datos propio (instancia individual), o bien como variable local (multiinstancia) en la interfaz del
bloque. Si crea un bloque de datos propio, lo encontrar√° en el √°rbol del proyecto, en "Bloques
de programa > Bloques de sistema", carpeta "Recursos de programa", . Encontrar√° m√°s
informaci√≥n al respecto en "Consulte tambi√©n".
El sistema operativo inicializa las instancias de la instrucci√≥n "Contador ascendente" cuando
se realiza un arranque en fr√≠o. Si deben inicializarse instancias de la instrucci√≥n tras un
rearranque completo (en caliente), las instancias por inicializar deben llamarse en un OB de
arranque con el valor "1" en el par√°metro R de la instrucci√≥n. Si un bloque diferente contiene
instancias de la instrucci√≥n "Contador ascendente", estas pueden resetearse p. ej.
inicializando el bloque de nivel superior.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Contador ascendente":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

CU

Input

BOOL

I, Q, M, D, L

Entrada de contaje

R

Input

BOOL

I, Q, M, D, L, P

Entrada de reset

PV

Input

INT

I, Q, M, D, L, P o
constante

Valor con el que se activa la
salida Q

Q

Output

BOOL

I, Q, M, D, L

Estado del contador

CV

Output

INT

I, Q, M, D, L, P

Valor de contaje actual

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:

5262

AWL

Explicaci√≥n

CALL CTU, "CTU_DB"

// Se llama la instrucci√≥n. El bloque de datos
"CTU_DB" se asigna a la instrucci√≥n.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

CU := "Tag_StartCTU"

// Cuando el estado l√≥gico del operando "Tag_StartCTU"
cambia de "0" a "1", se ejecuta la instrucci√≥n y el
valor actual del operando "Tag_CounterValue" se incrementa en uno.
// El valor de contaje sigue incrementando hasta alcanzar el valor l√≠mite superior de INT = 32767.

R := "Tag_ResetCounter"

// Cuando el estado l√≥gico del operando "Tag_ResetCounter" cambia a "1", el operando "Tag_CounterValue"
se pone a "0".

PV := "Tag_PresetValue"

// El operando determina a partir de qu√© valor debe
activarse el operando del par√°metro Q.

Q := "Tag_CounterStatus"

// El operando permanece activado mientras el valor de
contaje actual sea mayor o igual al valor del par√°metro PV.

CV := "Tag_CounterValue"

// Valor de contaje actual

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en instrucciones de temporizaci√≥n y contaje (P√°gina 188)
Procesar instrucciones AWL (P√°gina 8098)
A√±adir instrucciones AWL (P√°gina 8079)
Instancias (P√°gina 61)

CTD: Contador descendente
Descripci√≥n
La instrucci√≥n "Contador descendente" decrementa el valor de contaje del par√°metro CV.
Cuando el estado l√≥gico del par√°metro CD cambia de "0" a "1" (flanco de se√±al ascendente),
se ejecuta la instrucci√≥n y el valor de contaje actual del par√°metro CV se decrementa en uno.
Cada vez que se detecta un flanco de se√±al ascendente, el valor de contaje se decrementa
hasta alcanzar el valor l√≠mite inferior del tipo de datos INT indicado. Cuando se alcanza el valor
l√≠mite inferior, el estado l√≥gico del par√°metro CD deja de tener efecto en la instrucci√≥n.
El estado del contador se puede consultar en el par√°metro Q. Si el valor de contaje actual es
menor o igual a cero, el par√°metro Q adopta el estado l√≥gico "1". En los restantes casos, el
estado l√≥gico del par√°metro Q es "0".
El valor del par√°metro CV se pone al valor del par√°metro PV cuando el estado l√≥gico del
par√°metro LD cambia a "1". Mientras el par√°metro LD tenga el estado l√≥gico "1", el estado
l√≥gico del par√°metro CD no tendr√° efecto alguno en la instrucci√≥n.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5263

Instrucciones
4.2 Instrucciones
En la l√≥gica del programa, la instrucci√≥n "Contador descendente" se debe llamar con la
instrucci√≥n "Llamar bloque" (CALL).
Nota
Utilice el contador en una sola posici√≥n del programa para evitar fallos de contaje.
A cada llamada de la instrucci√≥n "Contador descendente" debe asign√°rsele un contador CEI,
en el que se guarden los datos de la instrucci√≥n. Un contador CEI se declara del siguiente
modo:
‚óè Declaraci√≥n de un bloque de datos del tipo CTD (p. ej., "CTD_DB")
‚óè Declaraci√≥n como variable local del tipo CTD en la secci√≥n "Static" de un bloque (p. ej.,
#MyCTD_COUNTER)
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si el contador CEI se deposita en un bloque de
datos propio (instancia individual), o bien como variable local (multiinstancia) en la interfaz del
bloque. Si crea un bloque de datos propio, lo encontrar√° en el √°rbol del proyecto, en "Bloques
de programa > Bloques de sistema", carpeta "Recursos de programa", . Encontrar√° m√°s
informaci√≥n al respecto en "Consulte tambi√©n".
El sistema operativo inicializa las instancias de la instrucci√≥n "Contador descendente" cuando
se realiza un arranque en fr√≠o. Si deben inicializarse instancias de la instrucci√≥n tras un
rearranque completo (en caliente), las instancias por inicializar deben llamarse en un OB de
arranque con el valor "1" en el par√°metro LD de la instrucci√≥n. En el par√°metro PV se indica en
este caso el valor inicial deseado para el par√°metro CV. Si un bloque diferente contiene
instancias de la instrucci√≥n "Contador descendente", estas pueden resetearse p. ej.
inicializando el bloque de nivel superior.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Contador descendente":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

CD

Input

BOOL

I, Q, M, D, L

Entrada de contaje

LD

Input

BOOL

I, Q, M, D, L, P

Entrada de carga

PV

Input

INT

I, Q, M, D, L, P o
constante

Valor al que se pone la salida
CV cuando LD = 1.

Q

Output

BOOL

I, Q, M, D, L

Estado del contador

CV

Output

INT

I, Q, M, D, L, P

Valor de contaje actual

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:

5264

AWL

Explicaci√≥n

CALL CTD, "CTD_DB"

// Se llama la instrucci√≥n. El bloque de datos
"CTD_DB" se asigna a la instrucci√≥n.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

CD := "Tag_StartCTD"

// Cuando el estado l√≥gico del operando "Tag_StartCTD"
cambia de "0" a "1", se ejecuta la instrucci√≥n y el
valor actual del operando "Tag_CounterValue" se decrementa en uno.
// El valor de contaje del par√°metro CV se sigue decrementando hasta alcanzar el valor l√≠mite inferior de
INT = -32768.

LD := "Tag_LoadPV"

// Cuando el estado l√≥gico del operando "Tag_LoadPV"
cambia a "1", el operando "Tag_CounterValue" se pone
al valor del operando "Tag_PresetValue".

PV := "Tag_PresetValue"

// Indica el valor al que se pone el contador cuando
el estado l√≥gico del par√°metro LD es "1".

Q := "Tag_CounterStatus"

// El operando se activa si el valor de contaje actual
es menor o igual a cero.

CV := "Tag_CounterValue"

// Valor de contaje actual

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en instrucciones de temporizaci√≥n y contaje (P√°gina 188)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Instancias (P√°gina 61)

CTUD: Contador ascendente - descendente
Descripci√≥n
La instrucci√≥n "Contador ascendente - descendente" incrementa y decrementa el valor de
contaje del par√°metro CV. Cuando el estado l√≥gico del par√°metro CU cambia de "0" a "1"
(flanco de se√±al ascendente), el valor de contaje actual del par√°metro CV se incrementa en
uno. Cuando el estado l√≥gico del par√°metro CD cambia de "0" a "1" (flanco de se√±al
ascendente), el valor de contaje del par√°metro CV se decrementa en uno. Si en un ciclo del
programa se detecta un flanco de se√±al ascendente en las entradas CU y CD, el valor de
contaje actual no cambia en el par√°metro CV.
El valor de contaje se puede seguir incrementando hasta alcanzar el valor l√≠mite superior del
tipo de datos indicado INT. Una vez alcanzado el valor l√≠mite superior, el valor de contaje ya no
se incrementa al detectarse un flanco de se√±al ascendente. Cuando se alcanza el valor l√≠mite
inferior del tipo de datos indicado INT, ya no se decrementa el valor de contaje.
Cuando el estado l√≥gico del par√°metro LD cambia a "1", el valor de contaje del par√°metro CV
se pone al valor del par√°metro PV. Mientras el par√°metro LD tenga el estado l√≥gico "1", el
estado l√≥gico de las entradas CU y CD no tendr√° efecto alguno en la instrucci√≥n.
El valor de contaje se pone a cero cuando el estado l√≥gico del par√°metro R cambia a "1".
Mientras el par√°metro R tenga el estado l√≥gico "1", un cambio del estado l√≥gico de los

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5265

Instrucciones
4.2 Instrucciones
par√°metros CU, CD y LD no tendr√° efecto alguno en la instrucci√≥n "Contador ascendente descendente".
El estado del contador ascendente se puede consultar en el par√°metro QU. Si el valor de
contaje actual es mayor o igual al valor del par√°metro PV, el par√°metro QU adopta el estado
l√≥gico "1". En los restantes casos, el estado l√≥gico del par√°metro QU es "0". En el par√°metro
PV tambi√©n se puede indicar una constante.
El estado del contador descendente se puede consultar en el par√°metro QD. Si el valor de
contaje actual es menor o igual a cero, el par√°metro QD adopta el estado l√≥gico "1". En los
restantes casos, el estado l√≥gico del par√°metro QD es "0".
En la l√≥gica del programa, la instrucci√≥n "Contador ascendente - descendente" se debe llamar
con la instrucci√≥n "Llamar bloque" (CALL).
Nota
Utilice el contador en una sola posici√≥n del programa para evitar fallos de contaje.
A cada llamada de la instrucci√≥n "Contador ascendente - descendente" debe asign√°rsele un
contador CEI en el que se guarden los datos de la instrucci√≥n. Un contador CEI se declara del
siguiente modo:
‚óè Declaraci√≥n de un bloque de datos del tipo CTUD (p. ej., "CTUD_DB")
‚óè Declaraci√≥n como variable local del tipo CTUD en la secci√≥n "Static" de un bloque (p. ej.,
#MyCTUD_COUNTER)
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si el contador CEI se deposita en un bloque de
datos propio (instancia individual), o bien como variable local (multiinstancia) en la interfaz del
bloque. Si crea un bloque de datos propio, lo encontrar√° en el √°rbol del proyecto, en "Bloques
de programa > Bloques de sistema", carpeta "Recursos de programa", . Encontrar√° m√°s
informaci√≥n al respecto en "Consulte tambi√©n".
El sistema operativo inicializa las instancias de la instrucci√≥n "Contador ascendente descendente" cuando se realiza un arranque en fr√≠o. Si deben inicializarse instancias tras un
rearranque completo (en caliente), las instancias por inicializar deben llamarse en un OB de
arranque con los siguientes valores de par√°metros:
‚óè Si se utiliza como contador ascendente, el valor del par√°metro R debe ponerse a "1".
‚óè Si se utiliza como contador descendente, el valor del par√°metro LD debe ponerse a "1". En
el par√°metro PV debe indicarse en este caso el valor inicial deseado del par√°metro CV.
Si un bloque diferente contiene instancias de la instrucci√≥n "Contador ascendente descendente", estas pueden resetearse p. ej. inicializando el bloque de nivel superior.

5266

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Contador ascendente descendente":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

CU

Input

BOOL

I, Q, M, D, L

Entrada de contaje ascen‚Äê
dente

CD

Input

BOOL

I, Q, M, D, L

Entrada de contaje descen‚Äê
dente

R

Input

BOOL

I, Q, M, D, L, P

Entrada de reset

LD

Input

BOOL

I, Q, M, D, L, P

Entrada de carga

PV

Input

INT

I, Q, M, D, L, P o
constante

Valor con el que se activa la
salida QU. / Valor al que se
pone la salida CV cuando LD
= 1. Valor con el que se acti‚Äê
va la salida QU. / Valor al que
se pone la salida CV cuando
LD = 1.

QU

Output

BOOL

I, Q, M, D, L

Estado del contador ascen‚Äê
dente

QD

Output

BOOL

I, Q, M, D, L

Estado del contador descen‚Äê
dente

CV

Output

INT

I, Q, M, D, L, P

Valor de contaje actual

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL CTUD, "CTUD_DB"

// Se llama la instrucci√≥n. El bloque de datos
"CTUD_DB" se asigna a la instrucci√≥n.

CU := "Tag_StartCTU"

// Cuando el estado l√≥gico del operando "Tag_StartCTU"
cambia de "0" a "1", se ejecuta la instrucci√≥n y el
valor actual del operando "Tag_CounterValue" se incrementa en uno.
// Si se detecta un flanco ascendente en el par√°metro
CU, el valor de contaje se sigue incrementando hasta
alcanzar el valor l√≠mite superior de INT = 32767.

CD := "Tag_StartCTD"

// Cuando el estado l√≥gico del operando "Tag_StartCTD"
cambia de "0" a "1", se ejecuta la instrucci√≥n y el
valor actual del operando "Tag_CounterValue" se decrementa en uno.
// El valor de contaje del par√°metro CV se sigue decrementando hasta alcanzar el valor l√≠mite inferior de
-32768.

R := "Tag_ResetCounter"

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

// Cuando el estado l√≥gico del operando "Tag_ResetCounter" cambia a "1", el operando "Tag_CounterValue"
se pone a "0".

5267

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

LD := "Tag_LoadPV"

// Cuando el estado l√≥gico del operando "Tag_LoadPV"
cambia a "1", el operando "Tag_CounterValue" se pone
al valor del operando "Tag_PresetValue".

PV := "Tag_PresetValue"

// Indica el valor al que se pone el contador cuando
el estado l√≥gico del par√°metro LD es "1".

QU := "Tag_CounterStatus"

// El operando permanece activado mientras el valor de
contaje actual sea mayor o igual al valor del par√°metro PV.

QD := "Tag_CounterStatus"

// El operando se activa si el valor de contaje actual
es menor o igual a cero.

CV := "Tag_CounterValue"

// Valor de contaje actual

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en instrucciones de temporizaci√≥n y contaje (P√°gina 188)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Instancias (P√°gina 61)

Funciones matem√°ticas
MIN: Determinar m√≠nimo
Descripci√≥n
La instrucci√≥n "Determinar m√≠nimo" compara los valores de las entradas IN1, IN2 e IN3 y
escribe el valor menor en la salida OUT. Para poder ejecutar la instrucci√≥n, es imprescindible
que las variables de todas las entradas sean del mismo tipo de datos.
El valor del par√°metro OUT no es v√°lido si se cumple una de las siguientes condiciones:
‚óè Los operandos indicados no son del mismo tipo de datos.
‚óè Un n√∫mero en coma flotante tiene un valor no v√°lido.
Nota
Aun estando desactivada la verificaci√≥n CEI, en los par√°metros de entrada √∫nicamente est√°n
permitidos los tipos de datos INT, DINT y REAL. Si utiliza los tipos de datos WORD o DWORD
en los par√°metros de entrada, la instrucci√≥n devolver√° un resultado no definido.

5268

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Determinar m√≠nimo":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN1

Input

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

Primer valor de entrada

IN2

Input

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

Segundo valor de entrada

IN3

Input

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

Tercer valor de entrada

OUT

Output

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

Resultado

En la lista desplegable "???" puede seleccionar el tipo de datos de los par√°metros INn y OUT.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL MIN

// Se llama la instrucci√≥n.
// Seleccione el tipo de datos deseado de la lista
desplegable "???".

IN1 := "TagIn_Value1"

// Primer valor de entrada que se compara.

IN2 := "TagIn_Value2"

// Segundo valor de entrada que se compara.

IN3 := "TagIn_Value3"

// Tercer valor de entrada que se compara.

OUT := "Tag_Minimum"

// El operando "Tag_Minimum" se describe con el valor
del operando "TagIn_Value1", ya que este tiene el valor m√°s bajo.

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Par√°metro

Operando

Valor

IN1

TagIn_Value1

12222

IN2

TagIn_Value2

14444

IN3

TagIn_Value3

13333

OUT

Tag_Minimum

12222

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros enteros (P√°gina 190)
Activar los bits de estado en instrucciones con n√∫meros en coma flotante (P√°gina 191)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5269

Instrucciones
4.2 Instrucciones

MAX: Determinar m√°ximo
Descripci√≥n
La instrucci√≥n "Determinar m√°ximo" compara los valores de las entradas IN1, IN2 e IN3 y
escribe el valor mayor en la salida OUT. Para poder ejecutar la instrucci√≥n, es imprescindible
que las variables de todas las entradas sean del mismo tipo de datos.
El valor de la salida OUT no es v√°lido si se cumple una de las siguientes condiciones:
‚óè Los operandos indicados no son del mismo tipo de datos.
‚óè Un operando tiene un valor no v√°lido.
Nota
Aun estando desactivada la verificaci√≥n CEI, en los par√°metros de entrada √∫nicamente est√°n
permitidos los tipos de datos INT, DINT y REAL. Si utiliza los tipos de datos WORD o DWORD
en los par√°metros de entrada, la instrucci√≥n devolver√° un resultado no definido.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Determinar m√°ximo":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN1

Input

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

Primer valor de entrada

IN2

Input

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

Segundo valor de entrada

IN3

Input

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

Tercer valor de entrada

OUT

Output

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

Resultado

En la lista desplegable "???" puede seleccionar el tipo de datos de los par√°metros INn y OUT.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL MAX

// Se llama la instrucci√≥n.
// Seleccione el tipo de datos deseado de la lista
desplegable "???".

5270

value_type := Int

// Tipo de datos de los par√°metros IN y OUT

IN1 := "TagIn_Value1"

// Primer valor de entrada que se compara.

IN2 := "TagIn_Value2"

// Segundo valor de entrada que se compara.

IN3 := "TagIn_Value3"

// Tercer valor de entrada que se compara.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

OUT := "Tag_Maximum"

// El operando "Tag_Maximum" se describe con el valor
del operando "TagIn_Value2", ya que este tiene el valor m√°s grande.

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Par√°metro

Operando

Valor

IN1

TagIn_Value1

12222

IN2

TagIn_Value2

14444

IN3

TagIn_Value3

13333

OUT

Tag_Maximum

14444

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros enteros (P√°gina 190)
Activar los bits de estado en instrucciones con n√∫meros en coma flotante (P√°gina 191)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

LIMIT: Ajustar valor l√≠mite
Descripci√≥n
La instrucci√≥n "Ajustar valor l√≠mite" limita el valor de la entrada IN a los valores de las entradas
MN y MX. Si el valor de la entrada IN cumple la condici√≥n MN <= IN <= MX, se copia en la salida
OUT. Si no se cumple la condici√≥n y el valor de entrada IN es menor que el l√≠mite inferior MN,
la salida OUT adopta el valor de la entrada MN. Si el l√≠mite superior MX se rebasa por exceso,
la salida OUT adopta el valor de la entrada MX.
Para poder ejecutar la instrucci√≥n, todas las variables de las entradas deben ser del mismo tipo
de datos.
El valor de la salida OUT no es v√°lido si se cumple una de las siguientes condiciones:
‚óè Las variables indicadas no son del mismo tipo de datos.
‚óè Un operando tiene un valor no v√°lido.
‚óè El valor del par√°metro MN es mayor que el valor del par√°metro MX.
Nota
Aun estando desactivada la verificaci√≥n CEI, en los par√°metros de entrada √∫nicamente est√°n
permitidos los tipos de datos INT, DINT y REAL. Si utiliza los tipos de datos WORD o DWORD
en los par√°metros de entrada, la instrucci√≥n devolver√° un resultado no definido.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5271

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Ajustar valor l√≠mite":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

MN

Input

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

L√≠mite inferior

IN

Input

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

Valor de entrada

MX

Input

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

L√≠mite superior

OUT

Output

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

Resultado

En la lista desplegable "???" puede seleccionar el tipo de datos de los par√°metros MN, IN, MX
y OUT.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL LIMIT

// Se llama la instrucci√≥n.
// Seleccione el tipo de datos deseado de la lista
desplegable "???".

MN := "Tag_LowLimit"

// L√≠mite inferior

IN := "Tag_InputValue"

// Valor de entrada

MX := "Tag_HighLimit"

// L√≠mite superior

OUT := "Tag_Result"

// El operando "Tag_Result" se describe con el valor
del operando "Tag_LowLimit", ya que el valor del operando "Tag_InputValue" se encuentra fuera del √°rea l√≠mite definida.

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Par√°metro

Operando

Valor

MN

Tag_LowLimit

12000

IN

Tag_InputValue

8000

MX

Tag_HighLimit

16000

OUT

Tag_Result

12000

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros enteros (P√°gina 190)
Activar los bits de estado en instrucciones con n√∫meros en coma flotante (P√°gina 191)

5272

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

Transferencia
BLKMOV: Copiar √°rea
Descripci√≥n
La instrucci√≥n "Copiar √°rea" copia los contenidos de un √°rea de memoria (√°rea de origen) en
un √°rea de memoria diferente (√°rea de destino). La operaci√≥n de copia se realiza por orden
ascendente de direcciones. Las √°reas de origen y destino se definen mediante punteros ANY.
Nota
En esta instrucci√≥n solo se pueden utilizar tipos de datos que sean v√°lidos en una CPU de la
serie S7-300/400.
La figura siguiente muestra el principio de la operaci√≥n de copia:

'%'%:

$

%

'%'%:

&

'

'%'%:

(

)

'%'%:

*

+

&RSLDU
/DFRSLDVHHIHFW¬ºDHQ
VHQWLGRDVFHQGHQWHGH
ODVGLUHFFLRQHV

0:

$

%

0:

&

'

0:

(

)

0:

*

+

¬ÉUHDGHPHPRULD

Coherencia de los datos de origen y destino
Tenga en cuenta que al ejecutar la instrucci√≥n "Copiar √°rea" no se modifican los datos de
origen. De lo contrario no est√° garantizada la coherencia de los datos de destino.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5273

Instrucciones
4.2 Instrucciones

Posibilidad de interrupci√≥n
Mientras el √°rea de origen no forme parte de un bloque de datos que solo figura en la memoria
de carga, no hay limitaciones en cuanto a la profundidad de anidamiento.
Por el contrario, en caso de interrumpirse la ejecuci√≥n de BLKMOV, en la que se copia desde
un DB no relevante para la ejecuci√≥n, no puede anidarse m√°s la ejecuci√≥n de la BLKMOV.

√Åreas de memoria
La instrucci√≥n "Copiar √°rea" copia las siguientes √°reas de memoria:
‚óè √Åreas de un bloque de datos
‚óè Marcas
‚óè Memoria imagen de proceso de las entradas
‚óè Memoria imagen de proceso de las salidas
‚óè Bloques de datos no relevantes para la ejecuci√≥n

Reglas generales para copiar
Las √°reas de origen y destino no deben solaparse. Si las √°reas de origen y destino son de
diferente longitud, se copia solo hasta la longitud del √°rea m√°s peque√±a.
Si el √°rea de origen es m√°s peque√±a que el √°rea de destino, el √°rea de origen se copiar√° por
completo en el √°rea de destino. Los restantes bytes del √°rea de destino permanecen
inalterados.
Si el √°rea de destino es m√°s peque√±a que el √°rea de origen, se escribir√° en toda el √°rea de
destino. Los restantes bytes del √°rea de origen se ignoran.
Al copiar un √°rea del tipo de datos BOOL, la longitud indicada del √°rea debe ser un m√∫ltiplo de
8, pues de lo contrario no se ejecutar√° la instrucci√≥n.
Nota
Si el √°rea de origen o destino realmente existente es menor que el √°rea de origen o destino
indicada en el par√°metro SRCBLK o DSTBLK, el comportamiento depender√° del tipo de CPU:
‚óè Para las CPU S7-300 rige lo siguiente:
No se transfieren datos. En el par√°metro RET_VAL se devuelve el c√≥digo de error
W#16#837F. Este c√≥digo de error debe evaluarse en el programa de usuario.
‚óè Para las CPU V4 del S7-400 (V4, CPU H V4 y CPU H V4.5 se aplica lo siguiente:
No se transfieren datos. En el par√°metro RET_VAL se devuelve el c√≥digo de error
W#16#8122 o W#16#8323. Este c√≥digo de error debe evaluarse en el programa de usuario.
‚óè Para las restantes CPU S7-400 rige:
Se transfieren datos. En el par√°metro RET_VAL se devuelve el c√≥digo de error W#16#8122
o W#16#8323. Este c√≥digo de error debe evaluarse en el programa de usuario.

5274

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Reglas para copiar cadenas de caracteres
La instrucci√≥n "Copiar √°rea" copia asimismo √°reas de origen y destino del tipo de datos
STRING. Si solo el √°rea de origen es del tipo de datos STRING, se copiar√°n los caracteres
realmente contenidos en la cadena de caracteres. La informaci√≥n sobre la longitud real y
m√°xima tambi√©n se escribe en el √°rea de destino. Si tanto el √°rea de origen como el √°rea de
destino son del tipo de datos STRING, la longitud actual de la cadena de caracteres en el √°rea
de destino se pone al n√∫mero de caracteres realmente copiados.
Si se desea copiar informaci√≥n sobre la longitud m√°xima y real de una cadena de caracteres,
las √°reas de los par√°metros SRCBLK y DSTBLK deben indicarse en bytes.

Reglas para copiar bloques de datos no relevantes para la ejecuci√≥n
El √°rea de origen tambi√©n puede encontrarse en un bloque de datos no relevante para la
ejecuci√≥n en la memoria de carga. Los bloques de datos no relevantes para la ejecuci√≥n se
identifican con la palabra clave UNLINKED.
Si en la memoria de trabajo se copia un bloque de datos no relevante para la ejecuci√≥n con la
instrucci√≥n "Copiar √°rea" y, al mismo tiempo, este se vuelve a cargar p. ej. desde la
programadora, la ejecuci√≥n de la instrucci√≥n puede retardarse varios milisegundos. Esto
prolonga el ciclo del OB y puede activar la vigilancia del tiempo de ciclo.
Si un bloque de datos no relevante para la ejecuci√≥n se copia con la instrucci√≥n "Copiar √°rea"
y la operaci√≥n de copia se interrumpe, la instrucci√≥n no se podr√° seguir ejecutando.
Si en la CPU existe la instrucci√≥n "Leer de un bloque de datos de la memoria de carga", debe
utilizarse dicha instrucci√≥n para leer los bloques de datos no relevantes para la ejecuci√≥n en
la memoria de carga. Si se utiliza la instrucci√≥n "Copiar √°rea" se emite el error W#16#8092.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Copiar √°rea":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

SRCBLK

Input

ANY

I, Q, M, D, L, P

Indicaci√≥n del √°rea de memo‚Äê
ria que se copia (√°rea de ori‚Äê
gen).

RET_VAL

Output

INT

I, Q, M, D, L, P

Informaci√≥n de error:
El par√°metro RET_VAL de‚Äê
vuelve un c√≥digo de error
cuando ocurre un error du‚Äê
rante la ejecuci√≥n de la ins‚Äê
trucci√≥n.

DSTBLK

Output 1)

ANY

I, Q, M, D, L, P

Indicaci√≥n del √°rea de memo‚Äê
ria en la que se copia (√°rea
de destino).

1) El par√°metro DSTBLK se declara como Output, pero en la interfaz del bloque debe declararse como
InOut.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5275

Instrucciones
4.2 Instrucciones

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

8092

El √°rea de origen o destino est√° solo en la memoria de carga.

8xyy

Encontrar√° m√°s informaci√≥n de error aqu√≠: Evaluaci√≥n de errores con el par√°metro de
salida RET_VAL (P√°gina 174)

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n aqu√≠: Cambiar
formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL BLKMOV

// Se llama a la instrucci√≥n.

SRCBLK := P#M100.0 BYTE 10

// Se copian 10 bytes a partir de MB100.

RET_VAL := "Tag_ErrorCode"

// Si ocurre un error durante la operaci√≥n de copia,
el respectivo c√≥digo de error se deposita en la variable "Tag_ErrorCode".

DSTBLK := P#M200.0 BYTE 10

// Los bytes copiados se escriben en los 10 bytes a
partir de MB200.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros enteros (P√°gina 190)
Bases de AWL (P√°gina 8065)

UBLKMOV: Copiar √°rea sin interrupciones
Descripci√≥n
La instrucci√≥n "Copiar √°rea sin interrupciones" copia los contenidos de un √°rea de memoria
(√°rea de origen) en un √°rea de memoria diferente (√°rea de destino). La operaci√≥n de copia se
realiza por orden ascendente de direcciones. Las √°reas de origen y destino se definen
mediante punteros ANY.

5276

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
La operaci√≥n de copia no debe ser interrumpida por otras actividades del sistema operativo.
Ello puede aumentar el tiempo de reacci√≥n a alarmas de la CPU durante la ejecuci√≥n de la
instrucci√≥n "Copiar √°rea sin interrupciones".
Nota
En esta instrucci√≥n solo se pueden utilizar tipos de datos que sean v√°lidos en una CPU de la
serie S7-300/400.

√Åreas de memoria
La instrucci√≥n "Copiar √°rea sin interrupciones" permite copiar las siguientes √°reas de memoria:
‚óè √Åreas de un bloque de datos
‚óè Marcas
‚óè Memoria imagen de proceso de las entradas
‚óè Memoria imagen de proceso de las salidas

Reglas generales para copiar
Al ejecutar la instrucci√≥n "Copiar √°rea sin interrupciones" no pueden solaparse las √°reas de
origen y destino. Si el √°rea de origen es m√°s peque√±a que el √°rea de destino, el √°rea de origen
se copiar√° por completo en el √°rea de destino. Los restantes bytes del √°rea de destino
permanecen inalterados.
Si el √°rea de destino es m√°s peque√±a que el √°rea de origen, se escribir√° en toda el √°rea de
destino. Los restantes bytes del √°rea de origen se ignoran.
Si un √°rea de origen o destino definida como par√°metro formal es menor que un √°rea de origen
o destino indicada en los par√°metros SRCBLK o DSTBLK, no se transferir√°n datos.
Al copiar un √°rea del tipo de datos BOOL, la longitud indicada del √°rea debe ser un m√∫ltiplo de
8, pues de lo contrario no se ejecutar√° la instrucci√≥n.
La instrucci√≥n "Copiar √°rea sin interrupciones" permite copiar 512 bytes como m√°ximo. A este
respecto deben tenerse en cuenta las limitaciones espec√≠ficas de la CPU.
Nota
Si el √°rea de origen o destino realmente existente es menor que el √°rea de origen o destino
indicada en el par√°metro SRCBLK o DSTBLK, el comportamiento depender√° del tipo de CPU:
‚óè Para las CPU S7-300 rige lo siguiente:
No se transfieren datos. En el par√°metro RET_VAL se devuelve el c√≥digo de error
W#16#837F. Este c√≥digo de error debe evaluarse en el programa de usuario.
‚óè Para las CPU V4 del S7-400 (V4, CPU H V4 y CPU H V4.5 se aplica lo siguiente:
No se transfieren datos. En el par√°metro RET_VAL se devuelve el c√≥digo de error
W#16#8122 o W#16#8323. Este c√≥digo de error debe evaluarse en el programa de usuario.
‚óè Para las restantes CPU S7-400 rige:
Se transfieren datos. En el par√°metro RET_VAL se devuelve el c√≥digo de error W#16#8122
o W#16#8323. Este c√≥digo de error debe evaluarse en el programa de usuario.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5277

Instrucciones
4.2 Instrucciones

Reglas para copiar cadenas de caracteres
La instrucci√≥n "Copiar √°rea sin interrupciones" permite copiar asimismo √°reas de origen y
destino del tipo de datos STRING. Si solo el √°rea de origen es del tipo de datos STRING, se
copiar√°n los caracteres realmente contenidos en la cadena de caracteres. La informaci√≥n
sobre la longitud real y m√°xima no se escribe en el √°rea de destino. Si tanto el √°rea de origen
como el √°rea de destino son del tipo de datos STRING, la longitud actual de la cadena de
caracteres en el √°rea de destino se pone al n√∫mero de caracteres realmente copiados. Si se
copian √°reas del tipo de datos STRING, debe indicarse "1" como longitud del √°rea.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Copiar √°rea sin interrupciones":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

SRCBLK

Input

ANY

I, Q, M, D, L, P

Indicaci√≥n del √°rea de memo‚Äê
ria que se copia (√°rea de ori‚Äê
gen).

RET_VAL

Output

INT

I, Q, M, D, L, P

Informaci√≥n de error:
El par√°metro RET_VAL de‚Äê
vuelve un c√≥digo de error
cuando ocurre un error du‚Äê
rante la ejecuci√≥n de la ins‚Äê
trucci√≥n.

DSTBLK

Output 1)

ANY

I, Q, M, D, L, P

Indicaci√≥n del √°rea de memo‚Äê
ria en la que se copia (√°rea
de destino).

1) El par√°metro DSTBLK se declara como Output, pero en la interfaz del bloque debe declararse como
InOut.

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

8091

El √°rea de origen o destino est√° solo en la memoria de carga.

8xyy

Encontrar√° m√°s informaci√≥n de error aqu√≠: Evaluaci√≥n de errores con el par√°metro de
salida RET_VAL (P√°gina 174)

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n aqu√≠: Cambiar
formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)

5278

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL UBLKMOV

// Se llama la instrucci√≥n.

SRCBLK := P#M100.0 BYTE 10

// Se copian 10 bytes a partir de MB100.

RET_VAL := "Tag_ErrorCode"

// Si ocurre un error durante la operaci√≥n de copia,
el respectivo c√≥digo de error se deposita en la variable "Tag_ErrorCode".

DSTBLK := P#M200.0 BYTE 10

// Los bytes copiados se escriben en los 10 bytes a
partir de MB200.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros enteros (P√°gina 190)
Bases de AWL (P√°gina 8065)

FILL: Rellenar √°rea
Descripci√≥n
La instrucci√≥n "Rellenar √°rea" rellena un √°rea de memoria (√°rea de destino) con el contenido
de un √°rea de memoria diferente (√°rea de origen). La instrucci√≥n "Rellenar √°rea" copia el
contenido del √°rea de origen en el √°rea de destino hasta que el √°rea de destino quede escrita
por completo. La operaci√≥n de copia se realiza por orden ascendente de direcciones. Las
√°reas de origen y destino se definen mediante punteros ANY.
Nota
En esta instrucci√≥n solo se pueden utilizar tipos de datos que sean v√°lidos en una CPU de la
serie S7-300/400.
La figura siguiente muestra el principio de la operaci√≥n de copia:

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5279

Instrucciones
4.2 Instrucciones
),//

%9$/

$

%

0:

$

%

0:

&

'

0:

&

'

0:

(

)

0:

(

)

0:

*

+

0:

*

+

0:

$

%

0:

&

'

0:

(

)

0:

*

+

0:

$

%

0:

&

'

0:

%/.

Ejemplo: el contenido del √°rea MW100 a MW118 debe inicializarse con el contenido de las
palabras de marcas MW14 a MW20.

Coherencia de los datos de origen y destino
Tenga en cuenta que al ejecutar la instrucci√≥n "Rellenar √°rea" no se modifican los datos de
origen, pues de lo contrario no se podr√≠a garantizar la coherencia de los datos de destino.

√Åreas de memoria
La instrucci√≥n "Rellenar √°rea" permite copiar las siguientes √°reas de memoria:
‚óè √Åreas de un bloque de datos
‚óè Marcas
‚óè Memoria imagen de proceso de las entradas
‚óè Memoria imagen de proceso de las salidas

Reglas generales para copiar
Las √°reas de origen y destino no deben solaparse. Aunque el √°rea de destino que se debe
inicializar no sea m√∫ltiplo entero de la longitud del par√°metro de entrada BVAL, el √°rea de
destino se rellenar√° igualmente hasta el √∫ltimo byte.
Si el √°rea de destino que se debe preasignar es menor que el √°rea de origen, solo se copian
los datos que caben en el √°rea de destino.
Si el √°rea de origen o destino realmente existente es menor que el tama√±o del √°rea de memoria
parametrizada para el √°rea de origen o destino (par√°metros BVAL, BLK), los datos no se
transfieren.

5280

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Si el puntero ANY (origen o destino) es del tipo BOOL, la longitud indicada debe ser divisible
por 8. De lo contrario, la instrucci√≥n no se ejecutar√°.
Si el √°rea de destino es del tipo de datos STRING, la instrucci√≥n escribe la cadena de
caracteres completa, incluida la informaci√≥n de administraci√≥n.
Nota
Si el √°rea de origen o destino realmente existente es menor que el √°rea de origen o destino
indicada en el par√°metro BVAL o BLK, el comportamiento depender√° del tipo de CPU:
‚óè Para las CPU S7-300 rige lo siguiente:
No se transfieren datos. En el par√°metro RET_VAL se devuelve el c√≥digo de error
W#16#837F. Este c√≥digo de error debe evaluarse en el programa de usuario.
‚óè Para las CPU V4 del S7-400 (V4, CPU H V4 y CPU H V4.5 se aplica lo siguiente:
No se transfieren datos. En el par√°metro RET_VAL se devuelve el c√≥digo de error
W#16#8122 o W#16#8323. Este c√≥digo de error debe evaluarse en el programa de usuario.
‚óè Para las restantes CPU S7-400 rige:
Se transfieren datos. En el par√°metro RET_VAL se devuelve el c√≥digo de error W#16#8122
o W#16#8323. Este c√≥digo de error debe evaluarse en el programa de usuario.

Reglas para copiar estructuras
Al indicar una estructura a modo de par√°metro de entrada, tenga en cuenta que la longitud de
una estructura se rige siempre por un n√∫mero entero de bytes. Si se declara una estructura con
un n√∫mero impar de bytes, esta estructura necesita un byte adicional de espacio en memoria.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Rellenar √°rea":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

BVAL

Input

ANY

I, Q, M, D, L, P

Indicaci√≥n del √°rea de memo‚Äê
ria (√°rea de origen) con cuyo
contenido se rellena el √°rea
de destino en el par√°metro
BLK.

RET_VAL

Output

INT

I, Q, M, D, L, P

Informaci√≥n de error:
El par√°metro RET_VAL de‚Äê
vuelve un c√≥digo de error
cuando ocurre un error du‚Äê
rante la ejecuci√≥n de la ins‚Äê
trucci√≥n.

BLK

Output 1)

ANY

I, Q, M, D, L, P

Indicaci√≥n del √°rea de memo‚Äê
ria que se rellena con el con‚Äê
tenido del √°rea de origen.

1) El par√°metro BLK se declara como Output, pero en la interfaz del bloque debe declararse como
InOut.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5281

Instrucciones
4.2 Instrucciones

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

8092

El √°rea de origen o destino est√° solo en la memoria de carga.

8xyy

Encontrar√° m√°s informaci√≥n de error aqu√≠: Evaluaci√≥n de errores con el par√°metro de
salida RET_VAL (P√°gina 174)

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n aqu√≠: Cambiar
formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL FILL

// Se llama la instrucci√≥n "Rellenar √°rea".

BVAL := P#M14.0 WORD 4

// Se copia el √°rea de MW14 a MW20.

RET_VAL := "Tag_ErrorCode"

// Informaci√≥n de error

BLK := P#M100.0 WORD 10

// El √°rea de memoria de MW100 a MW118 se rellena con
el contenido de las 4 palabras contenidas en el √°rea
de memoria del par√°metro BVAL.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros enteros (P√°gina 190)
Bases de AWL (P√°gina 8065)

Conversi√≥n
SCALE: Escalar
Descripci√≥n
La instrucci√≥n "Escalar" convierte el entero del par√°metro IN en un n√∫mero en coma flotante
que se escala en unidades f√≠sicas entre un l√≠mite inferior y uno superior. Los l√≠mites inferior y
superior del rango de valores en el que se escala el valor de entrada se definen mediante los
par√°metros LO_LIM y HI_LIM. El resultado de la instrucci√≥n se devuelve en el par√°metro OUT.
La instrucci√≥n "Escalar" utiliza la siguiente ecuaci√≥n:
OUT = [((FLOAT (IN) ‚Äì K1)/(K2‚ÄìK1)) ‚àó (HI_LIM‚ÄìLO_LIM)] + LO_LIM

5282

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
El estado l√≥gico del par√°metro BIPOLAR determina los valores de las constantes "K1" y "K2".
El par√°metro BIPOLAR puede tener los siguientes estados l√≥gicos:
‚óè Estado l√≥gico "1": se presupone que el valor del par√°metro IN es bipolar y est√° comprendido
en un rango de valores entre -27648 y 27648. En este caso, la constante "K1" tiene el valor
"-27648,0" y la constante "K2", el valor "+27648,0".
‚óè Estado l√≥gico "0": se presupone que el valor del par√°metro IN es unipolar y est√°
comprendido en un rango de valores entre 0 y 27648. En este caso, la constante "K1" tiene
el valor "0,0" y la constante "K2", el valor "+27648,0".
Si el valor del par√°metro IN es mayor que el de la constante "K2", el resultado de la instrucci√≥n
se pone al valor del l√≠mite superior (HI_LIM) y se emite un error.
Si el valor del par√°metro IN es menor que el de la constante "K1", el resultado de la instrucci√≥n
se pone al valor del l√≠mite inferior (LO_LIM) y se emite un error.
Si el l√≠mite inferior indicado es mayor que el l√≠mite superior (LO_LIM > HI_LIM), el resultado se
escala de forma inversamente proporcional al valor de entrada.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Escalar":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN

Input

INT

I, Q, M, D, L, P o
constante

Valor de entrada que se es‚Äê
cala

HI_LIM

Input

REAL

I, Q, M, D, L, P o
constante

Valor l√≠mite superior

LO_LIM

Input

REAL

I, Q, M, D, L, P o
constante

Valor l√≠mite inferior

BIPOLAR

Input

BOOL

I, Q, M, D, L o
constante

Indica si el valor del par√°me‚Äê
tro IN se interpreta como bi‚Äê
polar o unipolar. El par√°me‚Äê
tro puede adoptar los valores
siguientes:
1: Bipolar
0: Unipolar

RET_VAL

Output

WORD

I, Q, M, D, L, P

Informaci√≥n de error

OUT

Output

REAL

I, Q, M, D, L, P

Resultado de la instrucci√≥n

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

0008

El valor del par√°metro IN es mayor que el de la constante "K2" o menor que el de la
constante "K1"

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5283

Instrucciones
4.2 Instrucciones
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

8xyy

Encontrar√° m√°s informaci√≥n de error aqu√≠: Evaluaci√≥n de errores con el par√°metro de
salida RET_VAL (P√°gina 174)

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n aqu√≠: Cambiar
formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL SCALE

// Se llama la instrucci√≥n.

IN := "Tag_InputValue"

// Indica el valor que se convierte y escala.

HI_LIM := "Tag_HighLimit"

// Valor l√≠mite superior

LO_LIM := "Tag_LowLimit"

// Valor l√≠mite inferior

BIPOLAR := "Tag_Bipolar"

// Indica si el valor del par√°metro IN se interpreta
como bipolar o unipolar.

RET_VAL := "Tag_ErrorCode"

// Informaci√≥n de error

OUT := "Tag_OutputValue"

// Resultado de la instrucci√≥n

La tabla siguiente muestra los valores de los distintos operandos antes de ejecutar la
instrucci√≥n:
Par√°metro

Operando

Valor

IN

Tag_InputValue

22

HI_LIM

Tag_HighLimit

100.0

LO_LIM

Tag_LowLimit

0.0

BIPOLAR

Tag_Bipolar

1

RET_VAL

Tag_ErrorCode

W#16#0000

OUT

Tag_OutputValue

0.0

La tabla siguiente muestra los valores de los distintos operandos despu√©s de ejecutar la
instrucci√≥n:
Par√°metro

5284

Operando

Valor

IN

Tag_InputValue

22

HI_LIM

Tag_HighLimit

100.0

LO_LIM

Tag_LowLimit

0.0

BIPOLAR

Tag_Bipolar

1

RET_VAL

Tag_ErrorCode

W#16#0000

OUT

Tag_OutputValue

50.03978588

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros en coma flotante (P√°gina 191)
Activar los bits de estado en instrucciones con n√∫meros enteros (P√°gina 190)
Bases de AWL (P√°gina 8065)

UNSCALE: Desescalar
Descripci√≥n
La instrucci√≥n "Desescalar" desescala el n√∫mero en coma flotante del par√°metro IN en
unidades f√≠sicas entre un valor l√≠mite inferior y un valor l√≠mite superior y lo convierte en un
n√∫mero entero. Los l√≠mites inferior y superior del rango de valores en el que se desescala el
valor de entrada se definen mediante los par√°metros LO_LIM y HI_LIM. El resultado de la
instrucci√≥n se devuelve en el par√°metro OUT.
La instrucci√≥n "Desescalar" utiliza la siguiente ecuaci√≥n:
OUT = [((IN‚ÄìLO_LIM)/(HI_LIM‚ÄìLO_LIM)) ‚àó (K2‚ÄìK1) ] + K1
El estado l√≥gico del par√°metro BIPOLAR determina los valores de las constantes "K1" y "K2".
El par√°metro BIPOLAR puede tener los siguientes estados l√≥gicos:
‚óè Estado l√≥gico "1": se presupone que el valor del par√°metro IN es bipolar y est√° comprendido
en un rango de valores entre -27648 y 27648. En este caso, la constante "K1" tiene el valor
"-27648,0" y la constante "K2", el valor "+27648,0".
‚óè Estado l√≥gico "0": se presupone que el valor del par√°metro IN es unipolar y est√°
comprendido en un rango de valores entre 0 y 27648. En este caso, la constante "K1" tiene
el valor "0,0" y la constante "K2", el valor "+27648,0".
Si el valor del par√°metro IN no se encuentra dentro de los l√≠mites definidos por HI_LIM y
LO_LIM, se emite un error. El resultado se ajusta al l√≠mite m√°s pr√≥ximo.
Si el l√≠mite inferior indicado es mayor que el l√≠mite superior (LO_LIM > HI_LIM), el resultado se
escala de forma inversamente proporcional al valor de entrada.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Desescalar":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN

Input

REAL

I, Q, M, D, L, P o
constante

Valor de entrada que se de‚Äê
sescala en un valor entero

HI_LIM

Input

REAL

I, Q, M, D, L, P o
constante

Valor l√≠mite superior

LO_LIM

Input

REAL

I, Q, M, D, L, P o
constante

Valor l√≠mite inferior

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5285

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

BIPOLAR

Input

BOOL

I, Q, M, D, L o
constante

Indica si el valor del par√°me‚Äê
tro IN se interpreta como bi‚Äê
polar o unipolar. El par√°me‚Äê
tro puede adoptar los valores
siguientes:
1: Bipolar
0: Unipolar

RET_VAL

Output

WORD

I, Q, M, D, L, P

Informaci√≥n de error

OUT

Output

INT

I, Q, M, D, L, P

Resultado de la instrucci√≥n

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

0008

El valor del par√°metro IN es mayor que el del l√≠mite superior (HI_LIM) o menor que el del
l√≠mite inferior (LO_LIM).

8xyy

Encontrar√° m√°s informaci√≥n de error aqu√≠: Evaluaci√≥n de errores con el par√°metro de
salida RET_VAL (P√°gina 174)

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n aqu√≠: Cambiar
formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL UNSCALE

// Se llama la instrucci√≥n.

IN := "Tag_InputValue"

// Indica el valor que se desescala.

HI_LIM := "Tag_HighLimit"

// Valor l√≠mite superior

LO_LIM := "Tag_LowLimit"

// Valor l√≠mite inferior

BIPOLAR := "Tag_Bipolar"

// Indica si el valor del par√°metro IN se interpreta
como bipolar o unipolar.

RET_VAL := "Tag_ErrorCode"

// Informaci√≥n de error

OUT := "Tag_OutputValue"

// Resultado de la instrucci√≥n

La tabla siguiente muestra los valores de los distintos operandos antes de ejecutar la
instrucci√≥n:

5286

Par√°metro

Operando

Valor

IN

Tag_InputValue

50.03978588

HI_LIM

Tag_HighLimit

100.0

LO_LIM

Tag_LowLimit

0.0

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Operando

Valor

BIPOLAR

Tag_Bipolar

1

RET_VAL

Tag_ErrorCode

W#16#0000

OUT

Tag_OutputValue

0.0

La tabla siguiente muestra los valores de los distintos operandos despu√©s de ejecutar la
instrucci√≥n:
Par√°metro

Operando

Valor

IN

Tag_InputValue

50.03978588

HI_LIM

Tag_HighLimit

100.0

LO_LIM

Tag_LowLimit

0.0

BIPOLAR

Tag_Bipolar

1

RET_VAL

Tag_ErrorCode

W#16#0000

OUT

Tag_OutputValue

22

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros enteros (P√°gina 190)
Activar los bits de estado en instrucciones con n√∫meros en coma flotante (P√°gina 191)
Bases de AWL (P√°gina 8065)

Control del programa
Control del tiempo de ejecuci√≥n
COMPRESS: Comprimir la memoria de la CPU
Descripci√≥n
La instrucci√≥n "Comprimir la memoria de la CPU" comprime la memoria de trabajo de la CPU
o la memoria de carga RAM. Los huecos creados por haber borrado o cargado bloques, se
rellenan juntando los bloques existentes.
Con la llamada de la instrucci√≥n "Comprimir la memoria de la CPU" se lanza el proceso de
compresi√≥n. El proceso de compresi√≥n se reparte entre varios ciclos del programa. La
vigilancia del proceso de compresi√≥n se realiza mediante los valores de los distintos
par√°metros. Si el par√°metro BUSY de la instrucci√≥n tiene el valor "1", significa que el proceso
de compresi√≥n se est√° ejecutando todav√≠a. El valor "1" del par√°metro DONE indica que ha
finalizado el proceso de compresi√≥n. La informaci√≥n de error puede consultarse en el
par√°metro RET_VAL.
Si se est√° ejecutando un proceso de compresi√≥n lanzado externamente, la llamada de la
instrucci√≥n "Comprimir la memoria de la CPU" origina un error.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5287

Instrucciones
4.2 Instrucciones

Control del proceso de compresi√≥n
Con la llamada √∫nica de la instrucci√≥n "Comprimir la memoria de la CPU" se lanza el proceso
de compresi√≥n. No obstante, no puede controlar si la compresi√≥n se ha realizado
satisfactoriamente.
Si desea realizar esta comprobaci√≥n debe proceder de la siguiente manera:
La instrucci√≥n "Comprimir la memoria de la CPU" se debe llamar en el ciclo. Una vez realizada
la llamada se debe evaluar a continuaci√≥n el par√°metro RET_VAL. Si este es igual a "0" se
deben evaluar los par√°metros BUSY y DONE. Si BUSY = "1" y DONE = "0", ello indica que el
proceso de compresi√≥n a√∫n permanece activo. En cuanto BUSY adopta valor "0" y DONE el
valor "1", ello ser√° un indicador de que el proceso de compresi√≥n ha concluido
satisfactoriamente. Si a continuaci√≥n se vuelve a llamar la instrucci√≥n "Comprimir la memoria
de la CPU", se iniciar√° un nuevo proceso de compresi√≥n.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Comprimir la memoria de la CPU":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

RET_VAL

Output

INT

I, Q, M, D, L

Informaci√≥n de error:
El par√°metro RET_VAL de‚Äê
vuelve un c√≥digo de error
cuando ocurre un error du‚Äê
rante la ejecuci√≥n de la ins‚Äê
trucci√≥n.

BUSY

Output

BOOL

I, Q, M, D, L

Informaci√≥n de si est√° activo
el proceso de compresi√≥n

DONE

Output

BOOL

I, Q, M, D, L

Informaci√≥n de si ha finaliza‚Äê
do el proceso de compresi√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error
El estado del proceso de compresi√≥n puede consultarse en los par√°metros BUSY y DO‚Äê
NE.

8091

Ya se est√° ejecutando un proceso de compresi√≥n lanzado externamente.

8092

La instrucci√≥n no se puede ejecutar porque se cumple una de las condiciones siguientes:
‚óè La funci√≥n "Borrar bloque" est√° activa.
‚óè Una funci√≥n de PG est√° accediendo a uno de los bloques que se deben desplazar.
‚óè Ya se est√° ejecutando un proceso de compresi√≥n lanzado externamente.
‚óè La CPU H se encuentra en un proceso de acoplamiento o actualizaci√≥n.

5288

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

8xyy

Encontrar√° m√°s informaci√≥n de error aqu√≠: Evaluaci√≥n de errores con el par√°metro de
salida RET_VAL (P√°gina 174)

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n aqu√≠: Cambiar
formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Bases de AWL (P√°gina 8065)

RE_TRIGR: Reiniciar tiempo de vigilancia del ciclo
Descripci√≥n
La instrucci√≥n "Reiniciar tiempo de vigilancia del ciclo" reinicia el tiempo de vigilancia del ciclo
de la CPU. El tiempo de vigilancia del ciclo se reinicia entonces con la duraci√≥n ajustada en la
configuraci√≥n de la CPU.
La instrucci√≥n "Reiniciar tiempo de vigilancia del ciclo" se puede llamar en todos los bloques
independientemente de la prioridad.
Si se llama la instrucci√≥n en un bloque de prioridad superior, p. ej. en una alarma de proceso
o una alarma de diagn√≥stico, la instrucci√≥n no se ejecuta.
La instrucci√≥n "Reiniciar tiempo de vigilancia del ciclo" se ejecuta correctamente en un espacio
de tiempo (10 veces el ciclo m√°ximo del programa), independientemente del n√∫mero de
llamadas. Transcurrido ese tiempo, el ciclo del programa ya no puede prolongarse.

Par√°metros
La instrucci√≥n "Reiniciar tiempo de vigilancia del ciclo" no tiene par√°metros y no devuelve
informaci√≥n de error.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Bases de AWL (P√°gina 8065)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5289

Instrucciones
4.2 Instrucciones

STP: Finalizar programa
Descripci√≥n
La instrucci√≥n "Finalizar programa" conmuta la CPU al estado operativo STOP, con lo que se
finaliza la ejecuci√≥n del programa. Los efectos al conmutar de RUN a STOP dependen de la
configuraci√≥n de la CPU.

Par√°metros
La instrucci√≥n "Finalizar programa" no tiene par√°metros y no devuelve informaci√≥n de error.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Bases de AWL (P√°gina 8065)

WAIT: Programar retardo
Descripci√≥n
La instrucci√≥n "Programar retardo" detiene la ejecuci√≥n del programa durante un periodo
parametrizado. El periodo se indica en microsegundos en el par√°metro WT de la instrucci√≥n.
Es posible parametrizar tiempos de retardo de -32768 a 32767 microsegundos (Œºs). El tiempo
de retardo m√≠nimo depende de la CPU utilizada y equivale al tiempo de ejecuci√≥n de la
instrucci√≥n.
La ejecuci√≥n de la instrucci√≥n puede verse interrumpida por eventos de prioridad superior y no
arrojar√° informaci√≥n de error.
V√°lido para CPU S7-300:
En las CPU S7-300 (a excepci√≥n de S7-318), el tiempo de retardo programado con la
instrucci√≥n es un tiempo m√≠nimo. Se prolonga con el tiempo de ejecuci√≥n de las clases de
prioridad que intervienen y con las cargas del sistema.
Nota
Tiempo de retardo negativo
Si indica un tiempo de retardo negativo en el par√°metro WT, la salida de habilitaci√≥n ENO, o
el RLO y el bit BR arrojan el estado l√≥gico FALSE. Un tiempo de retardo negativo no afecta para
nada a la CPU. En KOP y FUP no se ejecutan las siguientes instrucciones vinculadas a la
salida de habilitaci√≥n ENO.

5290

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Programar retardo":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

WT

Input

INT

I, Q, M, D, L, P o
constante

Tiempo de retardo en micro‚Äê
segundos (Œºs)

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Bases de AWL (P√°gina 8065)

PROTECT: Cambiar nivel de protecci√≥n
Descripci√≥n
La instrucci√≥n "Cambiar nivel de protecci√≥n" permite modificar el nivel de protecci√≥n "1"
configurado para la CPU.
El nivel de protecci√≥n "1" parametrizado con la opci√≥n activada "Eliminable por contrase√±a"
hace que sea necesario parametrizar una contrase√±a. Esta contrase√±a permite acceder en
escritura a la CPU protegida contra escritura mediante la instrucci√≥n "Cambiar nivel de
protecci√≥n" durante el funcionamiento (p. ej. cargar).
El nivel de protecci√≥n se especifica en el par√°metro MODE de la instrucci√≥n. El nivel de
protecci√≥n actual de la CPU se visualiza en la ventana de inspecci√≥n en "Propiedades >
Protecci√≥n".
La tabla siguiente muestra una explicaci√≥n de los niveles de protecci√≥n:
Nivel
de pro‚Äê
tecci√≥n

Explicaci√≥n

1

Se permiten todas las funciones de PG. En el caso que exista un bloqueo de la legitimaci√≥n de la contrase√±a, este
se elimina llamando la instrucci√≥n "Cambiar nivel de protecci√≥n".

2

‚óè El programa y la configuraci√≥n de la CPU no se pueden modificar. El programa contenido en la CPU se puede
leer.
‚óè Se permiten las funciones de control, observaci√≥n y comunicaci√≥n del proceso.
‚óè Se permiten todas las funciones de informaci√≥n.
‚óè Si conoce la contrase√±a v√°lida, podr√° desactivar la protecci√≥n contra escritura ajustada.
‚óè En el caso que exista un bloqueo de la legitimaci√≥n de la contrase√±a, este se elimina llamando la instrucci√≥n
"Cambiar nivel de protecci√≥n".

3

‚óè Aun conociendo la contrase√±a v√°lida, no podr√° desactivar la protecci√≥n contra lectura y escritura ajustada.
‚óè Si al llamar la instrucci√≥n "Cambiar nivel de protecci√≥n" existe una conexi√≥n legitimada, la llamada de la
instrucci√≥n no tendr√° ning√∫n efecto en esta conexi√≥n.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5291

Instrucciones
4.2 Instrucciones
Si se ha configurado el nivel de protecci√≥n "2" o "3" para la CPU, la llamada de la instrucci√≥n
"Cambiar nivel de protecci√≥n" no tiene efecto alguno.
El efecto del nivel de protecci√≥n "2" o "3" una vez ejecutada la instrucci√≥n "Cambiar nivel de
protecci√≥n" puede consultarse en la lista parcial SZL con la ID de SZL W#16#0232 y el √≠ndice
W#16#0004.
Nota
La instrucci√≥n "Cambiar nivel de protecci√≥n" permite ajustar un nivel de protecci√≥n m√°s bajo
que aquel ajustado con "Configurar hardware" de STEP 7. Supongamos que se ha configurado
el nivel de protecci√≥n 3 y a continuaci√≥n se llama la instrucci√≥n "Cambiar nivel de protecci√≥n"
con el par√°metro MODE = 12. Esto bloquear√° la legitimaci√≥n de la contrase√±a. Si la instrucci√≥n
se llama nuevamente con el par√°metro MODE = 0 o 1, el nivel de protecci√≥n 3 se mantiene y
ser√° posible desactivar la protecci√≥n de lectura y escritura introduciendo la contrase√±a v√°lida.

Efectos de las transiciones de estado operativo en el nivel de protecci√≥n
La tabla siguiente muestra qu√© efectos tienen las transiciones de estado operativo en el nivel
de protecci√≥n ajustado con la instrucci√≥n "Cambiar nivel de protecci√≥n".
Acci√≥n

Efectos en el nivel de protecci√≥n

‚óè Selector de modo en STOP

El nivel de protecci√≥n se pone a "1". Se permiten todas las
funciones de PG.

‚óè Conexi√≥n (POWER ON) sin respaldo
‚óè Borrado total mediante el selector de modo
‚óè Cambios de configuraci√≥n y/o del programa en el estado
operativo STOP de la CPU S7-400
‚óè Arranque en fr√≠o
‚óè Rearranque (en caliente)

Conexi√≥n (POWER ON) respaldada

El sistema operativo pone el nivel de protecci√≥n a "1". Se
permiten todas las funciones de PG.
En caso necesario, llamando la instrucci√≥n "Cambiar nivel de
protecci√≥n" en el programa es posible ajustar el nivel de pro‚Äê
tecci√≥n en "2" o "3".
No cambia

Transici√≥n de estado operativo RUN/ARRANQUE/PARADA - No cambia
> STOP (debida a la llamada de la instrucci√≥n "Finalizar pro‚Äê
grama" (STP), a errores del programa sin el correspondiente
OB de error o a una acci√≥n del usuario).
S7-400: Rearranque por acci√≥n del usuario o autom√°tica‚Äê
mente tras conexi√≥n (POWER ON)

5292

No cambia

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Cambiar nivel de protecci√≥n":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

MODE

Input

WORD

I, Q, M, D, L o
constante

Nivel de protecci√≥n
Valores posibles:
‚óè W#16#0000: Ajuste del
nivel de protecci√≥n "1"
‚óè W#16#0001: Ajuste del
nivel de protecci√≥n "2"
con legitimaci√≥n de la
contrase√±a
‚óè W#16#000C: Ajuste del
nivel de protecci√≥n "3" sin
legitimaci√≥n de la
contrase√±a
En el par√°metro MODE tam‚Äê
bi√©n se pueden indicar cons‚Äê
tantes.

RET_VAL

Output

INT

I, Q, M, D, L

Si ocurre un error durante la
ejecuci√≥n, se emite una infor‚Äê
maci√≥n de error.

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

La petici√≥n se ha ejecutado sin errores.

8090

Valor no admisible en el par√°metro MODE.

80C3

En este momento los recursos necesarios est√°n ocupados.

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n aqu√≠: Cambiar
formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)

Ejemplo
Por principio, la CPU debe protegerse contra accesos en el estado operativo RUN. La
protecci√≥n se debe suprimir √∫nicamente si se conmuta el selector de modo a STOP. Esto se
logra llamando la instrucci√≥n "Cambiar nivel de protecci√≥n" en un OB de arranque y
ejecut√°ndola con el valor W#16#0001 (nivel de protecci√≥n "2") en el par√°metro MODE. De esta
manera, el nivel de protecci√≥n "2" permanece ajustado a√∫n tras un rearranque completo (en
caliente).
AWL

Explicaci√≥n

CALL PROTECT

// Se llama la instrucci√≥n.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5293

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

MODE := "Tag_ProtectionLevel" // Ajustar el nivel de protecci√≥n
RET_VAL := "Tag_ErrorCode"

// Informaci√≥n de error

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Evaluaci√≥n de errores con el par√°metro de salida RET_VAL (P√°gina 174)
Bases de AWL (P√°gina 8065)

CiR: Controlar proceso CiR
Descripci√≥n
La instrucci√≥n "Controlar proceso CiR" permite influir en el proceso CiR en el programa de
usuario como se indica a continuaci√≥n:
‚óè Bloquear el proceso CiR. En este caso, se rechazar√° siempre la carga de una configuraci√≥n
modificada desde la programadora en la CPU. El bloqueo se aplica hasta que se elimina
con la instrucci√≥n "Controlar proceso CiR".
‚óè El proceso CiR se puede bloquear de forma condicionada, indicando un l√≠mite superior para
el tiempo de sincronizaci√≥n CiR en el par√°metro FRZ_TIME. En este caso, solo se permitir√°
cargar una configuraci√≥n modificada desde la programadora en la CPU si el tiempo de
sincronizaci√≥n CiR calculado en la CPU no excede el l√≠mite superior definido.
‚óè Habilitar el proceso CiR. El l√≠mite superior del tiempo de sincronizaci√≥n CiR se establece al
valor predeterminado de 1000 ms.
‚óè Determina si el proceso CiR est√° habilitado o no. Si el proceso CiR est√° habilitado o lo est√°
condicionadamente, el l√≠mite superior actual del tiempo de sincronizaci√≥n CiR se indica en
el par√°metro A_FT de la instrucci√≥n.
Nota
Durante el tiempo de sincronizaci√≥n CiR, las salidas est√°n congeladas y las entradas no se
eval√∫an.

5294

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Controlar proceso CiR":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

MODE

Input

BYTE

I, Q, M, D, L o
constante

ID de la petici√≥n
Los valores admisibles del
par√°metro MODE son:
‚óè 0: Funci√≥n de informaci√≥n
‚óè 1: Habilitar proceso CiR
‚óè 2: Bloquear proceso CiR
‚óè 3: Bloquear proceso CiR
de forma condicionada.
El l√≠mite superior del
tiempo de sincronizaci√≥n
CiR se define en
FRZ_TIME.

FRZ_TIME

Input

TIME

I, Q, M, D, L o
constante

L√≠mite superior del tiempo de
sincronizaci√≥n CiR en milise‚Äê
gundos.
Rango de valores admisible:
60 ... 2500 ms (valor prede‚Äê
terminado: 1000 ms)
El par√°metro FRZ_TIME s√≥lo
es relevante si el par√°metro
MODE est√° al valor "3".

RET_VAL

Output

INT

I, Q, M, D, L

Informaci√≥n de error
Si el par√°metro MODE est√° a
"0", el par√°metro RET_VAL
indica si el proceso CiR est√°
habilitado o no.

A_FT

Output

TIME

I, Q, M, D, L

L√≠mite superior v√°lido actual‚Äê
mente del tiempo de sincro‚Äê
nizaci√≥n CiR

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

La petici√≥n se ha ejecutado sin errores.
Este c√≥digo de error solo se puede emitir si el par√°metro MODE est√° ajustado al valor 1,
2 √≥ 3.

0001

El proceso CiR est√° habilitado.
Este c√≥digo de error solo se puede emitir si el par√°metro MODE est√° puesto al valor "0".

0002

El proceso CiR est√° bloqueado.
Este c√≥digo de error solo se puede emitir si el par√°metro MODE est√° puesto al valor "0".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5295

Instrucciones
4.2 Instrucciones
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0003

El proceso CiR est√° bloqueado de forma condicionada.
Este c√≥digo de error solo se puede emitir si el par√°metro MODE est√° puesto al valor "0".

8001

La CPU no est√° lista para un proceso CiR. Se est√° utilizando una CPU H en el sistema H
(modo "Individual") o una CPU est√°ndar en modo multiprocesador.

8002

El valor del par√°metro MODE no es admisible.

8003

El valor del par√°metro FRZ_TIME no es admisible.

8xyy

Encontrar√° m√°s informaci√≥n de error aqu√≠: Evaluaci√≥n de errores con el par√°metro de
salida RET_VAL (P√°gina 174)

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n aqu√≠: Cambiar
formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)

Ejemplo
La instrucci√≥n "Controlar proceso CiR" permite programar p. ej. que no se lance ning√∫n
proceso CiR en periodos en los que se requiera la capacidad m√°xima de la CPU para el
procesamiento.
En este caso, la instrucci√≥n "Controlar proceso CiR" debe llamarse en el programa antes de
comenzar el periodo de actividad aumentada del proceso y ejecutarse con el valor "2"
(bloquear proceso CiR) en el par√°metro MODE. Con ello se bloquea el proceso CiR.
Para volver a habilitar el proceso CiR tras finalizar el periodo de actividad aumentada del
proceso, la instrucci√≥n "Controlar proceso CiR" debe llamarse de nuevo y ejecutarse con el
valor "1" en el par√°metro MODE. Como alternativa, el par√°metro MODE se puede poner al
valor "3", con lo que el proceso CiR se bloquea de forma condicionada.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Bases de AWL (P√°gina 8065)

Operaciones l√≥gicas con palabras
DECO: Descodificar
Descripci√≥n
La instrucci√≥n "Descodificar" activa un bit predeterminado por el valor de entrada en el valor de
salida.
La instrucci√≥n "Descodificar" lee el valor del par√°metro IN y activa el bit del par√°metro OUT
cuya posici√≥n de bit equivale al valor le√≠do. Los dem√°s bits del valor de salida se rellenan con
ceros. Si el valor del par√°metro IN es mayor que 31, se ejecuta una operaci√≥n modulo 32.

5296

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Descodificar":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN

Input

WORD, INT

I, Q, M, D, L, P o
constante

Posici√≥n del bit que se activa
en el valor de salida

OUT

Output

DWORD

I, Q, M, D, L, P

Valor de salida

En la lista desplegable "???" puede seleccionar el tipo de datos del par√°metro IN.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL DECO

// Se llama la instrucci√≥n.
// Seleccione el tipo de datos deseado de la lista
desplegable "???".

IN := "Tag_Input"

// Valor de entrada que predetermina el bit que debe
activarse en el valor de salida.

OUT := "Tag_Output"

// Resultado

La figura siguiente muestra el funcionamiento de la instrucci√≥n con valores concretos:
7DJB,QSXW




7DJB2XWSXW

 



 

La instrucci√≥n lee el n√∫mero de bit "3" del valor del operando "Tag_Input" de la entrada y activa
el tercer bit del valor del operando "Tag_Output" de la salida.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en operaciones l√≥gicas con palabras (P√°gina 194)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

ENCO: Codificar
Descripci√≥n
La instrucci√≥n "Codificar" lee el n√∫mero del bit menos significativo que est√° activado en el valor
de entrada y devolverlo en el par√°metro OUT.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5297

Instrucciones
4.2 Instrucciones
La instrucci√≥n "Codificar" selecciona el bit menos significativo del valor del par√°metro IN y
escribe su n√∫mero de bit en el operando del par√°metro OUT. Si el par√°metro IN devuelve el
valor DW#16#00000001 o DW#16#00000000, en el par√°metro OUT se deposita el valor "0".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Codificar":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN

Input

DWORD

I, Q, M, D, L, P o
constante

Valor de entrada

OUT

Output

INT

I, Q, M, D, L, P

Valor de salida

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL ENCO

// Se llama la instrucci√≥n.

IN := "Tag_Input"

// Valor de entrada cuyo bit activado menos significativo se lee.

OUT := "Tag_Output"

// N√∫mero del bit menos significativo que est√° activado en el valor de entrada

La figura siguiente muestra el funcionamiento de la instrucci√≥n con valores concretos:


 



‡≤Ø7DJB,QSXW‡≤Ø  
‡≤Ø7DJB2XWSXW‡≤Ø 

La instrucci√≥n selecciona el bit menos significativo que est√° activado en la variable "Tag_Input"
y escribe su bit "3" en la variable "Tag_Output".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en operaciones l√≥gicas con palabras (P√°gina 194)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

5298

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

SEL: Seleccionar
Descripci√≥n
La instrucci√≥n "Seleccionar" permite elegir, en funci√≥n de un interruptor (entrada G), una de las
entradas IN0 o IN1 y copiar su contenido en la salida OUT. Si la entrada G tiene el estado l√≥gico
"0", se copia el valor de la entrada IN0. Si la entrada G tiene el estado l√≥gico "1", se copia el
valor de la entrada IN1 en la salida OUT.
Para poder procesar la instrucci√≥n, las variables de todos los par√°metros deben ser del mismo
tipo de datos.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Seleccionar":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

G

Input

BOOL

I, Q, M, D, L

Interruptor

IN0

Input

I, Q, M, D, L, P
Secuencias de
bits, enteros, n√∫‚Äê
meros en coma flo‚Äê
tante, temporiza‚Äê
dores, CHAR,
TOD, DATE

Primer valor de entrada

IN1

Input

I, Q, M, D, L, P
Secuencias de
bits, enteros, n√∫‚Äê
meros en coma flo‚Äê
tante, temporiza‚Äê
dores, CHAR,
TOD, DATE

Segundo valor de entrada

OUT

Output

I, Q, M, D, L, P
Secuencias de
bits, enteros, n√∫‚Äê
meros en coma flo‚Äê
tante, temporiza‚Äê
dores, CHAR,
TOD, DATE

Resultado

En la lista desplegable "???" puede seleccionar el tipo de datos de los par√°metros IN0, IN1 y
OUT.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL SEL

// Se llama la instrucci√≥n.
// Seleccione el tipo de datos deseado de la lista
desplegable "???".

G := "Tag_Input_G"

// Estado l√≥gico del interruptor

IN0 := "Tag_Input0"

// Primer valor de entrada

IN1 := "Tag_Input1"

// Segundo valor de entrada

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5299

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

OUT := "Tag_Output"

// Valor de la entrada seleccionada

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores concretos:
Par√°metro

Operando

Valor

G

Tag_Input_G

1

IN0

Tag_Input0

W#16#0000

IN1

Tag_Input1

W#16#FFFF

OUT

Tag_Output

W#16#FFFF

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en operaciones l√≥gicas con palabras (P√°gina 194)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

Otras instrucciones
SET: Activar √°rea por bits
Descripci√≥n
La instrucci√≥n "Activar √°rea por bits" pone a "1" el estado l√≥gico de los bits de un √°rea indicada.
El punto inicial del √°rea se define mediante el puntero del par√°metro S_BIT. Si el puntero
se√±ala al √°rea de memoria de la periferia externa (P), no se ejecuta la instrucci√≥n. El n√∫mero
de bits que deben activarse en el √°rea indicada se determina en el par√°metro N de la
instrucci√≥n. Si el par√°metro N tiene el valor "0", la llamada de la instrucci√≥n no tendr√° efecto
alguno.
La instrucci√≥n se ejecuta solo si el bit MCR est√° a "1". Si el bit MCR tiene el estado l√≥gico "0",
no se modifican los bits en el √°rea indicada.
Nota
Par√°metro N
En el par√°metro N tambi√©n es posible interconectar un elemento de un bloque de datos.

5300

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Activar √°rea por bits":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

S_BIT

Input

POINTER

I, Q, M, D

Apunta al primer
bit del √°rea cuyos
bits se activan.
En el direcciona‚Äê
miento indirecto
por registro inter√°‚Äê
rea, el puntero de‚Äê
be indicarse en for‚Äê
mato de palabra
doble.

N

Input

INT

I, Q, M, D, L, P o
constante

N√∫mero de bits
que deben activar‚Äê
se.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL SET

// Se llama la instrucci√≥n "Activar √°rea por bits".

S_BIT := P#M0.0

// Puntero hacia el primer bit que debe activarse
(M0.0)

N := 10

// N√∫mero de bits que deben activarse

En el ejemplo, la instrucci√≥n activa 10 bits en el √°rea de M0.0 a M1.2.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado (P√°gina 186)
Bases de AWL (P√°gina 8065)
Master Control Relay (P√°gina 203)

SETP: Activar mapa de bits en el √°rea de periferia
Descripci√≥n
La instrucci√≥n "Activar mapa de bits en el √°rea de periferia" permite poner los bits de un √°rea
de periferia al estado l√≥gico "1". Paralelamente a los bits de periferia, tambi√©n se activan los
bits correspondientes en la memoria imagen de proceso de las salidas.
Los par√°metros N y SA de la instrucci√≥n sirven para definir el mapa de bits que debe activarse.
Los bits del mapa deben encontrarse en aquella parte del √°rea de periferia que tiene asignada
una memoria imagen de proceso.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5301

Instrucciones
4.2 Instrucciones
Si no se ha conectado periferia para una parte del mapa de bits seleccionado, la instrucci√≥n
intentar√° activar el mapa de bits completo. En este caso se devuelve una informaci√≥n de error
en el par√°metro RET_VAL.
El √°rea de periferia se activa por bytes. Si el mapa de bits definido a trav√©s de los par√°metros
N y SA no empieza ni termina en un l√≠mite de byte, la llamada de la instrucci√≥n tendr√° el efecto
siguiente:
‚óè Los bits contenidos en el primer o √∫ltimo byte que debe transferirse y que no pertenecen al
mapa de bits definido, obtienen el valor de los bits correspondientes en la memoria imagen
de proceso de las salidas.
ADVERTENCIA
Comportamiento involuntario
El ajuste de los bits al valor de los bits correspondientes en la memoria imagen de proceso
de las salidas puede ocasionar, p. ej., el arranque accidental de motores o la desconexi√≥n
de sistemas de refrigeraci√≥n.
‚óè Los bits que pertenecen al mapa de bits definido se ponen al estado l√≥gico "1".
La instrucci√≥n "Activar mapa de bits en el √°rea de periferia" debe llamarse en un √°rea MCR.
La llamada de la instrucci√≥n "Activar mapa de bits en el √°rea de periferia" no tiene efecto alguno
si se cumple una de las condiciones siguientes:
‚óè El par√°metro N devuelve el valor "0".
‚óè El bit MCR tiene el estado l√≥gico "0".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Activar mapa de bits en el √°rea de
periferia":

5302

Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

N

Input

INT

I, Q, M, D, L o
constante

N√∫mero de bits que deben
activarse

RET_VAL

Output

INT

I, Q, M, D, L

Informaci√≥n de error

SA

Output

POINTER

P

Puntero hacia el primer bit
que debe activarse

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

8xyy

Encontrar√° m√°s informaci√≥n de error aqu√≠: Evaluaci√≥n de errores con el par√°metro de
salida RET_VAL (P√°gina 174)

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n aqu√≠: Cambiar
formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL SETP

// Se llama la instrucci√≥n.

N := 8

// N√∫mero de bits que deben activarse

RET_VAL := "Tag_ErrorCode"

// Informaci√≥n de error

SA := P#10.0

// Puntero hacia el primer bit que debe activarse
(Q10.0)

En el ejemplo, la instrucci√≥n activa 8 bits en el √°rea de periferia conforme a las salidas Q10.0
a Q10.7.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado (P√°gina 186)
Bases de AWL (P√°gina 8065)
Master Control Relay (P√°gina 203)

SETI: Activar √°rea por bytes
Descripci√≥n
La instrucci√≥n "Activar √°rea por bytes" pone a "1" el estado l√≥gico de los bits de un √°rea definida
de bytes. El punto inicial del √°rea se define en el par√°metro S_BYTE. El tama√±o del √°rea se
define indicando el n√∫mero de bits que deben activarse en el par√°metro N de la instrucci√≥n.
Nota
El valor del par√°metro N debe ser un m√∫ltiplo de 8 (p. ej. 8, 16, 24, etc.).

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5303

Instrucciones
4.2 Instrucciones
El puntero indicado en el par√°metro S_BYTE debe se√±alar al √°rea de memoria de la periferia
externa (P). Puesto que al √°rea de memoria "P" se accede en formato de byte, palabra y
palabra doble, el puntero del par√°metro S_BYTE debe se√±alar a un operando equivalente a un
valor l√≠mite de byte; por tanto, el n√∫mero de bit del puntero debe ser "0".
Nota
El estado l√≥gico de los bits correspondientes en la memoria imagen de proceso de las salidas
(Q) se pone a "0".
La llamada de la instrucci√≥n "Activar √°rea por bytes" no tiene efecto alguno si se cumple una
de las condiciones siguientes:
‚óè El puntero del par√°metro S_BYTE no se√±ala al √°rea de memoria de la periferia externa (P).
‚óè El puntero del par√°metro S_BYTE se√±ala a un operando que no equivale a ning√∫n valor
l√≠mite de byte.
‚óè El valor del par√°metro N no es un m√∫ltiplo de 8.
‚óè El bit MCR tiene el estado l√≥gico "0".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Activar √°rea por bytes":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

S_BYTE

Input

POINTER

P o constante

Se√±ala al primer byte del
√°rea cuyos bits se activan.
En el direccionamiento indi‚Äê
recto por registro inter√°rea,
el puntero debe indicarse en
formato de palabra doble.

N

Input

INT

I, Q, M, D, L, P o
constante

Tama√±o del √°rea que debe
activarse
El √°rea se indica mediante el
n√∫mero de bits como m√∫ltiplo
de 8 (p. ej. 8, 16, 24, etc.).

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL SETI

// Se llama la instrucci√≥n.

S_BYTE := P#2.0

// Puntero hacia el primer byte del √°rea (P2.0)

N := 16

// N√∫mero de bits que deben activarse

En el ejemplo, la instrucci√≥n activa 2 bytes (16 bits) en el √°rea de P2.0 a P3.7 (salidas
perif√©ricas).

5304

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado (P√°gina 186)
Bases de AWL (P√°gina 8065)
Master Control Relay (P√°gina 203)

RESET: Desactivar √°rea por bits
Descripci√≥n
La instrucci√≥n "Desactivar √°rea por bits" pone a "0" el estado l√≥gico de los bits de un √°rea
definida. El punto inicial del √°rea se define mediante el puntero del par√°metro S_BIT. Si el
puntero se√±ala al √°rea de memoria de la periferia externa (P), no se ejecuta la instrucci√≥n. El
n√∫mero de bits que deben desactivarse en el √°rea indicada se determina en el par√°metro N de
la instrucci√≥n. Si el par√°metro N tiene el valor "0", la llamada de la instrucci√≥n no tendr√° efecto
alguno.
La instrucci√≥n se ejecuta solo si el bit MCR est√° a "1". Si el bit MCR tiene el estado l√≥gico "0",
no se modifican los bits en el √°rea indicada.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Desactivar √°rea por bits":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

S_BIT

Input

POINTER

I, Q, M, D

Se√±ala al primer bit del √°rea
cuyos bits se desactivan.
En el direccionamiento indi‚Äê
recto por registro inter√°rea,
el puntero debe indicarse en
formato de palabra doble.

N

Input

INT

I, Q, M, D, L, P o
constante

N√∫mero de bits que deben
desactivarse.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL RESET

// Se llama la instrucci√≥n.

S_BIT := P#M0.0

// Puntero al primer bit (M0.0) que debe desactivarse.

N := 10

// N√∫mero de bits que deben desactivarse

En el ejemplo, la instrucci√≥n desactiva 10 bits en el √°rea de M0.0 a M1.2.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5305

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado (P√°gina 186)
Bases de AWL (P√°gina 8065)
Master Control Relay (P√°gina 203)

RESETP: Desactivar mapa de bits en el √°rea de periferia
Descripci√≥n
La instrucci√≥n "Desactivar mapa de bits en el √°rea de periferia" pone los bits de un √°rea de
periferia al estado l√≥gico "0". Simult√°neamente con los bits de periferia se desactivan tambi√©n
los bits correspondientes en la memoria imagen de proceso de las salidas.
Los par√°metros N y SA de la instrucci√≥n sirven para definir el mapa de bits que debe
desactivarse. Los bits del mapa deben encontrarse en aquella parte del √°rea de periferia que
tiene asignada una memoria imagen de proceso.
Si no hay periferia enchufada para una parte del mapa de bits seleccionado, la instrucci√≥n
intentar√° desactivar el mapa de bits completo. En este caso se devuelve una informaci√≥n de
error en el par√°metro RET_VAL.
El √°rea de periferia se desactiva por bytes. Si el mapa de bits definido a trav√©s de los
par√°metros N y SA no empieza ni termina en un l√≠mite de byte, la llamada de la instrucci√≥n
tendr√° el efecto siguiente:
‚óè Los bits contenidos en el primer o √∫ltimo byte que debe transferirse y que no pertenecen al
mapa de bits definido, obtienen el valor de los bits correspondientes en la memoria imagen
de proceso de las salidas.
ADVERTENCIA
Comportamiento involuntario
El ajuste de los bits al valor de los bits correspondientes en la memoria imagen de proceso
de las salidas puede ocasionar, p. ej., el arranque accidental de motores o la desconexi√≥n
de sistemas de refrigeraci√≥n.
‚óè Los bits que pertenecen al mapa de bits definido se ponen al estado l√≥gico "0".
La instrucci√≥n "Desactivar mapa de bits en el √°rea de periferia" debe llamarse en un √°rea MCR.
La llamada de la instrucci√≥n "Desactivar mapa de bits en el √°rea de periferia" no tiene efecto
alguno si se cumple una de las condiciones siguientes:
‚óè El par√°metro N devuelve el valor "0".
‚óè El bit MCR tiene el estado l√≥gico "0".

5306

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Desactivar mapa de bits en el √°rea
de periferia":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

N

Input

INT

I, Q, M, D, L o
constante

N√∫mero de bits que deben
desactivarse.

RET_VAL

Output

INT

I, Q, M, D, L

Informaci√≥n de error

SA

Output

POINTER

P

Puntero al primer bit que de‚Äê
be desactivarse.

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

8xyy

Encontrar√° m√°s informaci√≥n de error aqu√≠: Evaluaci√≥n de errores con el par√°metro de
salida RET_VAL (P√°gina 174)

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n aqu√≠: Cambiar
formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL RESETP

// Se llama la instrucci√≥n.

N := 8

// N√∫mero de bits que deben desactivarse.

RET_VAL := "Tag_ErrorCode"

// Informaci√≥n de error

SA := P#10.0

// Puntero hacia el primer bit (Q10.0) que debe desactivarse.

En el ejemplo, la instrucci√≥n desactiva 8 bits del √°rea de periferia correspondientes a las
salidas Q10.0 a Q10.7.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado (P√°gina 186)
Bases de AWL (P√°gina 8065)
Master Control Relay (P√°gina 203)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5307

Instrucciones
4.2 Instrucciones

RESETI: Desactivar √°rea por bytes
Descripci√≥n
La instrucci√≥n "Desactivar √°rea por bytes" pone a "0" el estado l√≥gico de los bits de un √°rea
definida de bytes. El punto inicial del √°rea se define mediante el puntero del par√°metro
S_BYTE. El tama√±o del √°rea se define indicando el n√∫mero de bits que deben desactivarse en
el par√°metro N de la instrucci√≥n.
Nota
El valor del par√°metro N debe ser un m√∫ltiplo de 8 (p. ej. 8, 16, 24, etc.).
El puntero indicado en el par√°metro S_BYTE debe se√±alar al √°rea de memoria de la periferia
externa (P). Puesto que al √°rea de memoria "P" se accede en formato de byte, palabra y
palabra doble, el puntero del par√°metro S_BYTE debe se√±alar a un operando equivalente a un
valor l√≠mite de byte; por tanto, el n√∫mero de bit del puntero debe ser "0".
Nota
El estado l√≥gico de los bits correspondientes en la memoria imagen de proceso de las salidas
(Q) se pone a "0".
La llamada de la instrucci√≥n "Desactivar √°rea por bytes" no tiene efecto alguno si se cumple
una de las condiciones siguientes:
‚óè El puntero del par√°metro S_BYTE no se√±ala al √°rea de memoria de la periferia externa (P).
‚óè El puntero del par√°metro S_BYTE se√±ala a un operando que no equivale a ning√∫n valor
l√≠mite de byte.
‚óè El valor del par√°metro N no es un m√∫ltiplo de 8.
‚óè El bit MCR tiene el estado l√≥gico "0".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Desactivar √°rea por bytes":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

S_BYTE

Input

POINTER

P o constante

Se√±ala al primer byte del
√°rea cuyos bits se desacti‚Äê
van.
En el direccionamiento indi‚Äê
recto por registro inter√°rea,
el puntero debe indicarse en
formato de palabra doble.

N

Input

INT

I, Q, M, D, L, P o
constante

Tama√±o del √°rea cuyos bits
se desactivan.
El √°rea se indica mediante el
n√∫mero de bits como m√∫ltiplo
de 8 (p. ej. 8, 16, 24, etc.).

5308

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL RESETI

// Se llama la instrucci√≥n.

S_BYTE := P#2.0

// Puntero hacia el primer byte del √°rea (P2.0)

N := 16

// N√∫mero de bits que deben desactivarse.

En el ejemplo, la instrucci√≥n desactiva 2 bytes (16 bits) en el √°rea de P2.0 a P3.7 (salidas
perif√©ricas).

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado (P√°gina 186)
Bases de AWL (P√°gina 8065)
Master Control Relay (P√°gina 203)

REPL_VAL: Introducir valor sustitutivo
Descripci√≥n
La instrucci√≥n "Introducir valor sustitutivo" introduce un valor sustitutivo en el acumulador 1
(ACU 1) desde un bloque de organizaci√≥n de error s√≠ncrono.
Nota
La instrucci√≥n "Introducir valor sustitutivo" solo se puede llamar desde bloques de organizaci√≥n
de error s√≠ncrono (OB 121, OB 122).
La instrucci√≥n "Introducir valor sustitutivo" se utiliza si ya no es posible leer ning√∫n valor de un
m√≥dulo. Tras cada acceso a dicho m√≥dulo se inicia el OB 122. Llamando la instrucci√≥n
"Introducir valor sustitutivo" es posible cargar un valor sustitutivo en el acumulador 1. La
ejecuci√≥n del programa se prosigue entonces con este valor sustitutivo. La informaci√≥n
necesaria para seleccionar el valor sustitutivo puede consultarse en las variables locales del
OB 122.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Introducir valor sustitutivo":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

VAL

Input

DWORD

I, Q, M, D, L o
constante

Valor sustitutivo

RET_VAL

Output

INT

I, Q, M, D, L

Informaci√≥n de error

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5309

Instrucciones
4.2 Instrucciones

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de Descripci√≥n
error*
(W#16#....)
0000

Ning√∫n error

8080

La instrucci√≥n no se ha llamado desde un OB de error s√≠ncrono.

8xyy

Encontrar√° m√°s informaci√≥n de error aqu√≠: Evaluaci√≥n de errores con el par√°metro de
salida RET_VAL (P√°gina 174)

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n aqu√≠: Cambiar
formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado (P√°gina 186)
Bases de AWL (P√°gina 8065)
Master Control Relay (P√°gina 203)

DRUM: Materializar circuito secuencial sucesivo
Descripci√≥n
La instrucci√≥n "Materializar circuito secuencial sucesivo" ocupa los bits de salida programados
(OUT1 a OUT16) y la palabra de salida (OUT_WORD) con los valores programados del
par√°metro OUT_VAL del paso respectivo. El paso en cuesti√≥n debe cumplir las condiciones de
la m√°scara de habilitaci√≥n programada en el par√°metro S_MASK mientras la instrucci√≥n
permanece en dicho paso. La instrucci√≥n pasa al paso siguiente cuando el evento de √©ste es
verdadero y una vez transcurrido el tiempo programado para el paso actual, o bien cuando el
valor del par√°metro JOG cambia de "0" a "1". La instrucci√≥n se desactiva cuando el estado
l√≥gico del par√°metro RESET cambia a "1". Con ello, el paso actual se iguala al paso
predeterminado (DSP).
El tiempo de permanencia en un paso se calcula multiplicando la base de tiempo
predeterminada (DTBP) por el valor de contaje predeterminado (S_PRESET) para cada paso.
Al comienzo de un nuevo paso, este valor calculado se carga en el par√°metro DCC, que
contiene el tiempo restante para el paso actual. Por ejemplo, si el valor del par√°metro DTBP es
"2" y el valor predeterminado para el primer paso es "100" (100 ms), el par√°metro DCC
devolver√° el valor "200" (200 ms).
Un paso puede programarse con un valor de tiempo, con un evento o con ambos. Los pasos
programados con un bit de evento y el valor de tiempo "0" pasan al siguiente paso en cuanto
el estado l√≥gico del bit de evento es "1". Los pasos programados solo con un valor de tiempo
empiezan a contar el tiempo inmediatamente. Los pasos programados con un bit de evento y
un valor de tiempo mayor que "0" empiezan a contar el tiempo en cuanto el estado l√≥gico del
bit de evento es "1". Los bits de evento se inicializan con el estado l√≥gico "1".

5310

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Si el circuito secuencial sucesivo se encuentra en el √∫ltimo paso programado (LST_STEP) y ha
transcurrido el tiempo para dicho paso, el estado l√≥gico del par√°metro Q se pone a "1". De lo
contrario, se pone a "0". Si est√° activado el par√°metro Q, la instrucci√≥n permanece en el paso
hasta la desactivaci√≥n.
En la m√°scara configurable (S_MASK) es posible seleccionar los distintos bits de la palabra de
salida (OUT_WORD) y activar o desactivar los bits de salida (OUT1 a OUT16) mediante los
valores de salida (OUT_VAL). Si un bit de la m√°scara configurable tiene el estado l√≥gico "1",
el valor OUT_VAL activa o desactiva el bit correspondiente. Si el estado l√≥gico de un bit de la
m√°scara configurable es "0", no cambia el bit respectivo. Todos los bits de la m√°scara
configurable de todos los 16 pasos se inicializan con el estado l√≥gico "1".
El bit de salida del par√°metro OUT1 equivale al bit menos significativo de la palabra de salida
(OUT_WORD). El bit de salida del par√°metro OUT16 equivale al bit m√°s significativo de la
palabra de salida (OUT_WORD).
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si los par√°metros de bloque de la instrucci√≥n se
depositan en un bloque de datos propio (instancia individual) o bien como variable local
(multiinstancia) en la interfaz del bloque. Si crea un bloque de datos propio, lo encontrar√° en
el √°rbol del proyecto, en la carpeta "Recursos de programa", en "Bloques de programa >
Bloques de sistema". Encontrar√° m√°s informaci√≥n al respecto en "Consulte tambi√©n".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Materializar circuito secuencial
sucesivo":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

RESET

Input

BOOL

I, Q, M, D, L

El estado l√≥gico "1" indica
una condici√≥n de desactiva‚Äê
ci√≥n

JOG

Input

BOOL

I, Q, M, D, L

Si el estado l√≥gico cambia de
"0" a "1", la instrucci√≥n pasa
al siguiente paso.

DRUM_EN

Input

BOOL

I, Q, M, D, L

El estado l√≥gico "1" permite
que el circuito secuencial su‚Äê
cesivo siga contando seg√∫n
el evento y los criterios de
tiempo.

LST_STEP

Input

BYTE

I, Q, M, D, L o
constante

N√∫mero del √∫ltimo paso pro‚Äê
gramado.

EVENT(i),

Input

BOOL

I, Q, M, D, L

Bit de evento (i);

Output

BOOL

I, Q, M, D, L

Bit de salida (j)

Output

BOOL

I, Q, M, D, L

El estado l√≥gico "1" indica
que ha transcurrido el tiempo
del √∫ltimo paso.

El estado l√≥gico inicial es "1".

1<= i <=16
OUT(j),
1 ‚â§ j ‚â§ 16
Q

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5311

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

OUT_WORD

Output

WORD

I, Q, M, D, L, P

Direcci√≥n de palabra en la
que el circuito secuencial su‚Äê
cesivo escribe los valores de
salida.

ERR_CODE

Output

WORD

I, Q, M, D, L, P

Informaci√≥n de error

JOG_HIS

Static

BOOL

I, Q, M, D, L

Bit de evoluci√≥n del par√°me‚Äê
tro JOG

EOD

Static

BOOL

I, Q, M, D, L

El estado l√≥gico "1" indica
que ha transcurrido el tiempo
del √∫ltimo paso.

DSP

Static

BYTE

I, Q, M, D, L, P

Primer paso predeterminado
del circuito secuencial suce‚Äê
sivo (1 a 16)

DSC

Static

BYTE

I, Q, M, D, L, P

Paso actual del circuito se‚Äê
cuencial sucesivo

DCC

Static

DWORD

I, Q, M, D, L, P

Tiempo de ejecuci√≥n restan‚Äê
te para el paso actual

DTBP

Static

WORD

I, Q, M, D, L, P

Base de tiempo predetermi‚Äê
nada del circuito secuencial
sucesivo

PrevTime

Static

TIME

I, Q, M, D, L o
constante

hora de sistema de la llama‚Äê
da anterior

S_PRESET

Static

ARRAY[1..16] of
WORD

I, Q, M, D, L

Valor de contaje predetermi‚Äê
nado para cada paso [1 a 16];
1 ciclo de reloj = 1 ms.

OUT_VAL

Static

ARRAY[1..16,
0..15] of BOOL

I, Q, M, D, L

Valores de salida para cada
paso [1 a 16, 0 a 15].

S_MASK

Static

ARRAY[1..16,
0..15] of BOOL

I, Q, M, D, L

M√°scara configurable para
cada paso [1 a 16, 0 a 15].
Los estados l√≥gicos iniciales
son "1".

Par√°metro ERR_CODE
La tabla siguiente muestra el significado de los valores del par√°metro ERR_CODE:
ERR_CO‚Äê
DE*

Explicaci√≥n

W#16#000
0

Ning√∫n error

W#16#000
B

El valor del par√°metro LST_STEP es menor que 1 o mayor que 16.

W#16#000
C

El valor del par√°metro DSC es menor que 1 o mayor que el valor del par√°metro
LST_STEP.

W#16#000
D

El valor del par√°metro DSP es menor que 1 o mayor que el valor de LST_STEP.

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n aqu√≠: Cambiar
formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)

5312

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
En el ejemplo siguiente, la instrucci√≥n pasa del paso 1 al paso 2. Los bits de salida (OUT1 a
OUT16) y la palabra de salida (OUT_WORD) se activan seg√∫n la m√°scara configurada para el
paso 2 y los valores del par√°metro OUT_VAL.
Nota
Los par√°metros est√°ticos pueden inicializarse en el bloque de datos.

AWL

Explicaci√≥n

CALL DRUM, "DRUM_DB"

// Se llama la instrucci√≥n y se crea el bloque de datos de instancia "DRUM_DB".

RESET := "Tag_Reset"

// Entrada de inicializaci√≥n

JOG := "Tag_Input_Jog"

// Si se produce un flanco ascendente, la instrucci√≥n
pasa al paso siguiente.

DRUM_EN := "Tag_Input_DrumEN" // El estado l√≥gico "1" permite que el circuito secuencial sucesivo siga contando seg√∫n el evento y los
criterios de tiempo.
LST_STEP := "Tag_Number_LastStep"

// N√∫mero del √∫ltimo paso programado

EVENT1 := "MyTag_Event_1"

// Bit de evento 1

EVENT2 := "MyTag_Event_2"

// Bit de evento 2

EVENT3 := "MyTag_Event_3"

// Bit de evento 3

EVENT4 := "MyTag_Event_4"

// Bit de evento 4

EVENT5 := "MyTag_Event_5"

// Bit de evento 5

EVENT6 := "MyTag_Event_6"

// Bit de evento 6

EVENT7 := "MyTag_Event_7"

// Bit de evento 7

EVENT8 := "MyTag_Event_8"

// Bit de evento 8

EVENT9 := "MyTag_Event_9"

// Bit de evento 9

EVENT10 := "MyTag_Event_10"

// Bit de evento 10

EVENT11 := "MyTag_Event_11"

// Bit de evento 11

EVENT12 := "MyTag_Event_12"

// Bit de evento 12

EVENT13 := "MyTag_Event_13"

// Bit de evento 13

EVENT14 := "MyTag_Event_14"

// Bit de evento 14

EVENT15 := "MyTag_Event_15"

// Bit de evento 15

EVENT16 := "MyTag_Event_16"

// Bit de evento 16

OUT1 := "MyTag_Output_1"

// Bit de salida 1

OUT2 := "MyTag_Output_2"

// Bit de salida 2

OUT3 := "MyTag_Output_3"

// Bit de salida 3

OUT4 := "MyTag_Output_4"

// Bit de salida 4

OUT5 := "MyTag_Output_5"

// Bit de salida 5

OUT6 := "MyTag_Output_6"

// Bit de salida 6

OUT7 := "MyTag_Output_7"

// Bit de salida 7

OUT8 := "MyTag_Output_8"

// Bit de salida 8

OUT9 := "MyTag_Output_9"

// Bit de salida 9

OUT10 := "MyTag_Output_10"

// Bit de salida 10

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5313

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

OUT11 := "MyTag_Output_11"

// Bit de salida 11

OUT12 := "MyTag_Output_12"

// Bit de salida 12

OUT13 := "MyTag_Output_13"

// Bit de salida 13

OUT14 := "MyTag_Output_14"

// Bit de salida 14

OUT15 := "MyTag_Output_15"

// Bit de salida 15

OUT16 := "MyTag_Output_16"

// Bit de salida 16

Q := "Tag_Output_Q"

// El estado l√≥gico "1" indica que ha transcurrido el
tiempo del √∫ltimo paso.

OUT_WORD := "Tag_OutputWord"

// Direcci√≥n de palabra en la que el circuito secuencial sucesivo escribe los valores de salida

ERR_CODE := "Tag_ErrorCode"

// Informaci√≥n de error

Las tablas siguientes muestran el funcionamiento de la instrucci√≥n con valores concretos.

Antes de la ejecuci√≥n
En este ejemplo se utilizan los siguientes valores para asignar valores a los par√°metros de
entrada:
Par√°metro

Operando

Direcci√≥n

Valor

RESET

Tag_Reset

M0.0

FALSE

JOG

Tag_Input_JOG

M0.1

FALSE

DRUM_EN

Tag_Input_DrumEN

M0.2

TRUE

LST_STEP

Tag_Number_LastStep

MB1

B#16#08

EVENT2

MyTag_Event_2

M20.0

FALSE

EVENT4

MyTag_Event_4

M20.1

FALSE

EVENT6

MyTag_Event_6

M20.2

FALSE

EVENT8

MyTag_Event_8

M20.3

FALSE

EVENT10

MyTag_Event_10

M20.4

FALSE

EVENT12

MyTag_Event_12

M20.5

FALSE

EVENT14

MyTag_Event_14

M20.6

FALSE

EVENT16

MyTag_Event_16

M20.7

FALSE

Los siguientes valores se almacenan en el bloque de datos de instancia "DRUM_DB" de la
instrucci√≥n:

5314

Par√°metro

Direcci√≥n

Valor

JOG_HIS

DBX12.0

FALSE

EOD

DBX12.1

FALSE

DSP

DBB13

W#16#0001

DSC

DBB14

W#16#0001

DCC

DBD16

DW#16#0000000A

DTBP

DBW20

W#16#0001

S_PRESET[1]

DBW26

W#16#0064

S_PRESET[2]

DBW28

W#16#00C8

OUT_VAL[1,0]

DBX58.0

TRUE

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Direcci√≥n

Valor

OUT_VAL[1,1]

DBX58.1

TRUE

OUT_VAL[1,2]

DBX58.2

TRUE

OUT_VAL[1,3]

DBX58.3

TRUE

OUT_VAL[1,4]

DBX58.4

TRUE

OUT_VAL[1,5]

DBX58.5

TRUE

OUT_VAL[1,6]

DBX58.6

TRUE

OUT_VAL[1,7]

DBX58.7

TRUE

OUT_VAL[1,8]

DBX59.0

TRUE

OUT_VAL[1,9]

DBX59.1

TRUE

OUT_VAL[1,10]

DBX59.2

TRUE

OUT_VAL[1,11]

DBX59.3

TRUE

OUT_VAL[1,12]

DBX59.4

TRUE

OUT_VAL[1,13]

DBX59.5

TRUE

OUT_VAL[1,14]

DBX59.6

TRUE

OUT_VAL[1,15]

DBX59.7

TRUE

OUT_VAL[2,0]

DBX60.0

FALSE

OUT_VAL[2,1]

DBX60.1

FALSE

OUT_VAL[2,2]

DBX60.2

FALSE

OUT_VAL[2,3]

DBX60.3

FALSE

OUT_VAL[2,4]

DBX60.4

FALSE

OUT_VAL[2,5]

DBX60.5

FALSE

OUT_VAL[2,6]

DBX60.6

FALSE

OUT_VAL[2,7]

DBX60.7

FALSE

OUT_VAL[2,8]

DBX61.0

FALSE

OUT_VAL[2,9]

DBX61.1

FALSE

OUT_VAL[2,10]

DBX61.2

FALSE

OUT_VAL[2,11]

DBX61.3

FALSE

OUT_VAL[2,12]

DBX61.4

FALSE

OUT_VAL[2,13]

DBX61.5

FALSE

OUT_VAL[2,14]

DBX61.6

FALSE

OUT_VAL[2,15]

DBX61.7

FALSE

S_MASK[2,0]

DBX92.0

FALSE

S_MASK[2,1]

DBX92.1

TRUE

S_MASK[2,2]

DBX92.2

TRUE

S_MASK[2,3]

DBX92.3

TRUE

S_MASK[2,4]

DBX92.4

TRUE

S_MASK[2,5]

DBX92.5

FALSE

S_MASK[2,6]

DBX92.6

TRUE

S_MASK[2,7]

DBX92.7

TRUE

S_MASK[2,8]

DBX93.0

FALSE

S_MASK[2,9]

DBX93.1

FALSE

S_MASK[2,10]

DBX93.2

TRUE

S_MASK[2,11]

DBX93.3

TRUE

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5315

Instrucciones
4.2 Instrucciones
Par√°metro

Direcci√≥n

Valor

S_MASK[2,12]

DBX93.4

TRUE

S_MASK[2,13]

DBX93.5

TRUE

S_MASK[2,14]

DBX93.6

FALSE

S_MASK[2,15]

DBX93.7

TRUE

Los par√°metros de salida tienen los valores siguientes antes de ejecutarse la instrucci√≥n:
Par√°metro

Operando

Direcci√≥n

Valor

Q

Tag_Output_Q

M6.0

FALSE

OUTWORD

Tag_OutputWord

MW8

W#16#FFFF

OUT1

MyTag_Output_1

M4.0

TRUE

OUT2

MyTag_Output_2

M4.1

TRUE

OUT3

MyTag_Output_3

M4.2

TRUE

OUT4

MyTag_Output_4

M4.3

TRUE

OUT5

MyTag_Output_5

M4.4

TRUE

OUT6

MyTag_Output_6

M4.5

TRUE

OUT7

MyTag_Output_7

M4.6

TRUE

OUT8

MyTag_Output_8

M4.7

TRUE

OUT9

MyTag_Output_9

M5.0

TRUE

OUT10

MyTag_Output_10

M5.1

TRUE

OUT11

MyTag_Output_11

M5.2

TRUE

OUT12

MyTag_Output_12

M5.3

TRUE

OUT13

MyTag_Output_13

M5.4

TRUE

OUT14

MyTag_Output_14

M5.5

TRUE

OUT15

MyTag_Output_15

M5.6

TRUE

OUT16

MyTag_Output_16

M5.7

TRUE

Despu√©s de la ejecuci√≥n
Una vez ejecutada la instrucci√≥n, los valores siguientes se escriben en los par√°metros de
salida:

5316

Par√°metro

Operando

Direcci√≥n

Valor

OUT1

MyTag_Output_1

M4.0

TRUE

OUT2

MyTag_Output_2

M4.1

FALSE

OUT3

MyTag_Output_3

M4.2

FALSE

OUT4

MyTag_Output_4

M4.3

FALSE

OUT5

MyTag_Output_5

M4.4

FALSE

OUT6

MyTag_Output_6

M4.5

TRUE

OUT7

MyTag_Output_7

M4.6

FALSE

OUT8

MyTag_Output_8

M4.7

FALSE

OUT9

MyTag_Output_9

M5.0

TRUE

OUT10

MyTag_Output_10

M5.1

TRUE

OUT11

MyTag_Output_11

M5.2

FALSE

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Operando

Direcci√≥n

Valor

OUT12

MyTag_Output_12

M5.3

FALSE

OUT13

MyTag_Output_13

M5.4

FALSE

OUT14

MyTag_Output_14

M5.5

FALSE

OUT15

MyTag_Output_15

M5.6

TRUE

OUT16

MyTag_Output_16

M5.7

FALSE

Q

Tag_Output_Q

M6.0

FALSE

OUTWORD

Tag_OutputWord

MW8

W#16#4321

ERR_CODE

Tag_ErrorCode

MW10

W#16#0000

Los siguientes valores se modifican en el bloque de datos de instancia "DRUM_DB" de la
instrucci√≥n despu√©s de su ejecuci√≥n:
Par√°metro

Direcci√≥n

Valor

JOG_HIS

DBX12.0

FALSE

EOD

DBX12.1

FALSE

DSC

DBB14

W#16#0002

DCC

DBD16

DW#16#000000C8

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado (P√°gina 186)
Bases de AWL (P√°gina 8065)
Master Control Relay (P√°gina 203)

DRUM_X: Materializar circuito secuencial sucesivo
Descripci√≥n
La instrucci√≥n "Materializar circuito secuencial sucesivo" permite materializar un circuito
secuencial sucesivo con 16 pasos como m√°ximo. El n√∫mero del primer paso se define con el
par√°metro DSP. El n√∫mero del √∫ltimo paso se predetermina con el par√°metro LST_STEP.
En cada paso se escriben todos los 16 bits de salida OUT0 a OUT15 y el par√°metro de salida
OUT_WORD (que contiene los bits de salida). A un bit de salida se asigna bien sea el bit
correspondiente del campo predefinido OUT_VAL, o bien el bit de salida del paso anterior. El
valor que se asigne depender√° de la ocupaci√≥n de los bits de m√°scara en el par√°metro
S_MASK.
Nota
El ajuste predeterminado de los bits de m√°scara es 0. Para modificar el ajuste actual de uno
o varios bits de m√°scara, realice el cambio en el bloque de datos de instancia.
La instrucci√≥n "Materializar circuito secuencial sucesivo" pasa al siguiente paso cuando se
produce un flanco de se√±al ascendente en el par√°metro JOG. Si la instrucci√≥n ya se encuentra
Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5317

Instrucciones
4.2 Instrucciones
en el √∫ltimo paso y se produce un flanco de se√±al ascendente en el par√°metro JOG, se activan
las variables Q y EOD. En este caso, el par√°metro DCC se pone al valor 0. La instrucci√≥n
permanece en el √∫ltimo paso hasta que el par√°metro RESET se pone al valor "1".
Adem√°s, tambi√©n se puede permitir la transici√≥n al paso siguiente en funci√≥n del tiempo. Para
ello se debe poner al valor "1" el par√°metro DRUM_EN. La transici√≥n al paso siguiente tiene
lugar si est√° activado el bit de evento (EVENTi) correspondiente al paso actual y si ha
transcurrido el tiempo predeterminado para el paso actual. El tiempo necesario para un paso
resulta de la multiplicaci√≥n de la base de tiempo (DTBP) por el factor de tiempo v√°lido para el
paso actual (S_PRESET).
Nota
El tiempo de ejecuci√≥n restante en el paso actual (DCC) se reduce √∫nicamente si est√° activado
el bit de evento correspondiente (EVENTi).
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si los par√°metros de bloque de la instrucci√≥n se
depositan en un bloque de datos propio (instancia individual) o bien como variable local
(multiinstancia) en la interfaz del bloque. Si crea un bloque de datos propio, lo encontrar√° en
el √°rbol del proyecto, en la carpeta "Recursos de programa", en "Bloques de programa >
Bloques de sistema". Encontrar√° m√°s informaci√≥n al respecto en "Consulte tambi√©n".
Si, al llamar la instrucci√≥n, el par√°metro RESET tiene el valor "1", el circuito secuencial
sucesivo pasar√° al paso cuyo n√∫mero se ha asignado al par√°metro DSP.
Un paso puede programarse con un valor de tiempo, con un evento o con ambos. Los pasos
programados con un bit de evento y el valor de tiempo "0" pasan al siguiente paso en cuanto
el estado l√≥gico del bit de evento es "1". Los pasos programados solo con un valor de tiempo
empiezan a contar el tiempo inmediatamente. Los pasos programados con un bit de evento y
un valor de tiempo mayor que "0" empiezan a contar el tiempo en cuanto el estado l√≥gico del
bit de evento es "1".
El circuito secuencial sucesivo tambi√©n se puede conmutar en progresi√≥n en todo momento a
trav√©s del valor del par√°metro JOG.
En la primera llamada de la instrucci√≥n, el par√°metro RESET se debe poner a "1".
Si el circuito secuencial se encuentra en el √∫ltimo paso y ha transcurrido el tiempo de ejecuci√≥n
predefinido para este paso, se activan los par√°metros Q y EOD. La instrucci√≥n permanece en
el √∫ltimo paso hasta que el par√°metro RESET adopte el valor "1".
Esta instrucci√≥n se ejecuta solo en los estados operativos ARRANQUE y RUN.
El sistema operativo inicializa la instrucci√≥n "Materializar circuito secuencial sucesivo" cuando
se efect√∫a un arranque en fr√≠o. La instrucci√≥n no se inicializa en caso de un rearranque
completo (en caliente). Si la instrucci√≥n "Materializar circuito secuencial sucesivo" debe
inicializarse tras un rearranque completo (en caliente), es preciso llamarla en el OB 100 con el
valor "1" en el par√°metro RESET.

5318

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Materializar circuito secuencial
sucesivo":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

RESET

Input

BOOL

I, Q, M, D, L

El estado l√≥gico "1" desactiva
el circuito secuencial. En la
primera llamada de la instruc‚Äê
ci√≥n, el par√°metro RESET se
debe poner a "1".

JOG

Input

BOOL

I, Q, M, D, L

Un flanco ascendente (con
respecto a la √∫ltima llamada)
provoca la transici√≥n al paso
siguiente, siempre que el cir‚Äê
cuito secuencial no se en‚Äê
cuentre a√∫n en el √∫ltimo pa‚Äê
so. La transici√≥n tiene lugar
independientemente del va‚Äê
lor asignado al par√°metro
DRUM_EN.

DRUM_EN

Input

BOOL

I, Q, M, D, L

Par√°metro de control que de‚Äê
termina si se puede realizar
una transici√≥n al paso si‚Äê
guiente en funci√≥n del tiem‚Äê
po. Si el valor es "1", es posi‚Äê
ble una transici√≥n en funci√≥n
del tiempo.

LST_STEP

Input

BYTE

I, Q, M, D, L o
constante

N√∫mero del √∫ltimo paso

EVENT(i),

Los valores admisibles son 1
a 16.

Input

BOOL

I, Q, M, D, L

Bit de evento (i) (pertenece al
paso i)

Output

BOOL

I, Q, M, D, L

Bit de salida (j)
(id√©ntico al bit n.¬∫ j de
OUT_WORD)

Q

Output

BOOL

I, Q, M, D, L

Par√°metro de estado que in‚Äê
dica si ha transcurrido el tiem‚Äê
po predefinido por el usuario
para la ejecuci√≥n del √∫ltimo
paso.

OUT_WORD

Output

WORD

I, Q, M, D, L, P

Bits de salida resumidos en
una variable

ERR_CODE

Output

WORD

I, Q, M, D, L, P

Informaci√≥n de error

JOG_HIS

Static

BOOL

I, Q, M, D, L

Irrelevante para el usuario
(par√°metro de entrada JOG
de la llamada anterior)

EOD

Static

BOOL

I, Q, M, D, L

Id√©ntico al par√°metro de sali‚Äê
da Q

DSP

Static

BYTE

I, Q, M, D, L, P o
constante

N√∫mero del primer paso

1 ‚â§ i ‚â§ 16
OUTj,
0 ‚â§ j ‚â§ 15

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Los valores admisibles son 1
a 16.

5319

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

DSC

Static

BYTE

I, Q, M, D, L, P o
constante

N√∫mero del paso actual

DCC

Static

DWORD

I, Q, M, D, L, P

Tiempo de ejecuci√≥n restan‚Äê
te del paso actual, indicado
en milisegundos (ms) (rele‚Äê
vante solo si DRUM_EN = 1 y
el bit de evento correspon‚Äê
diente = 1)

DTBP

Static

WORD

I, Q, M, D, L, P o
constante

Base de tiempo en milisegun‚Äê
dos (ms) v√°lida para todos
los pasos

PREV_TIME

Static

DWORD

I, Q, M, D, L o
constante

(Irrelevante para el usuario:
hora de sistema de la llama‚Äê
da anterior)

S_PRESET

Static

ARRAY of WORD

I, Q, M, D, L o
constante

Campo unidimensional con
los factores de tiempo para
cada paso.
Selecci√≥n recomendada de
√≠ndices: [1 a 16].
En este caso, S_PRESET [x]
contiene el factor de tiempo
del paso x.

5320

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

OUT_VAL

Static

ARRAY of BOOL

I, Q, M, D, L

Campo bidimensional con
los valores que deben emitir‚Äê
se en cada paso, a no ser
que se hayan inhibido v√≠a
S_MASK.
Selecci√≥n recomendada de
√≠ndices: [1 a 16, 0 a 15]. En
este caso, OUT_VAL [x, y]
contiene el valor asignado al
bit de salida OUTy en el paso
x.

S_MASK

Static

ARRAY of BOOL

I, Q, M, D, L

Campo bidimensional con
los bits de m√°scara para ca‚Äê
da paso.
Selecci√≥n recomendada de
√≠ndices: [1 a 16, 0 a 15]. En
este caso, S_MASK [x, y]
contiene el bit de m√°scara
para el valor "y"-√©simo que
debe emitirse en el paso x.
Significado de los bits de
m√°scara:
‚óè 0: el valor
correspondiente del paso
anterior se asigna al
respectivo bit de salida
‚óè 1: el valor
correspondiente de
OUT_VAL se asigna al
respectivo bit de salida.

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Par√°metro ERR_CODE
La tabla siguiente muestra el significado de los valores del par√°metro ERR_CODE:
ERR_CO‚Äê
DE*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

8081

Valor no admisible en el par√°metro LST_STEP

8082

Valor no admisible en DSC

8083

Valor no admisible en DSP

8084

El producto DCC = DTBP * S_PRESET[DSC] excede el valor 2**31-1 (aprox. 24,86 d√≠as).

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n aqu√≠: Cambiar
formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5321

Instrucciones
4.2 Instrucciones

Ejemplo
En el ejemplo siguiente, la instrucci√≥n pasa del paso 1 al paso 2. Los bits de salida (OUT0 a
OUT15) y la palabra de salida (OUT_WORD) se activan seg√∫n la m√°scara configurada para el
paso 2 y los valores del par√°metro OUT_VAL.
Nota
Los par√°metros est√°ticos pueden inicializarse en el bloque de datos.

AWL

Explicaci√≥n

CALL DRUM_X, "DRUM_X_DB"

// Se llama la instrucci√≥n y se crea el bloque de datos de instancia "DRUM_DB".

RESET := "Tag_Reset"

// Entrada de inicializaci√≥n

JOG := "Tag_Input_Jog"

// Si se produce un flanco ascendente, la instrucci√≥n
pasa al paso siguiente.

DRUM_EN := "Tag_Input_DrumEN" // El estado l√≥gico "1" permite que el circuito secuencial sucesivo siga contando seg√∫n el evento y los
criterios de tiempo.

5322

LST_STEP := "Tag_Number_LastStep"

// N√∫mero del √∫ltimo paso programado

EVENT1 := "MyTag_Event_1"

// Bit de evento 1

EVENT2 := "MyTag_Event_2"

// Bit de evento 2

EVENT3 := "MyTag_Event_3"

// Bit de evento 3

EVENT4 := "MyTag_Event_4"

// Bit de evento 4

EVENT5 := "MyTag_Event_5"

// Bit de evento 5

EVENT6 := "MyTag_Event_6"

// Bit de evento 6

EVENT7 := "MyTag_Event_7"

// Bit de evento 7

EVENT8 := "MyTag_Event_8"

// Bit de evento 8

EVENT9 := "MyTag_Event_9"

// Bit de evento 9

EVENT10 := "MyTag_Event_10"

// Bit de evento 10

EVENT11 := "MyTag_Event_11"

// Bit de evento 11

EVENT12 := "MyTag_Event_12"

// Bit de evento 12

EVENT13 := "MyTag_Event_13"

// Bit de evento 13

EVENT14 := "MyTag_Event_14"

// Bit de evento 14

EVENT15 := "MyTag_Event_15"

// Bit de evento 15

EVENT16 := "MyTag_Event_16"

// Bit de evento 16

OUT0 := "MyTag_Output_0"

// Bit de salida 0

OUT1 := "MyTag_Output_1"

// Bit de salida 1

OUT2 := "MyTag_Output_2"

// Bit de salida 2

OUT3 := "MyTag_Output_3"

// Bit de salida 3

OUT4 := "MyTag_Output_4"

// Bit de salida 4

OUT5 := "MyTag_Output_5"

// Bit de salida 5

OUT6 := "MyTag_Output_6"

// Bit de salida 6

OUT7 := "MyTag_Output_7"

// Bit de salida 7

OUT8 := "MyTag_Output_8"

// Bit de salida 8

OUT9 := "MyTag_Output_9"

// Bit de salida 9

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

OUT10 := "MyTag_Output_10"

// Bit de salida 10

OUT11 := "MyTag_Output_11"

// Bit de salida 11

OUT12 := "MyTag_Output_12"

// Bit de salida 12

OUT13 := "MyTag_Output_13"

// Bit de salida 13

OUT14 := "MyTag_Output_14"

// Bit de salida 14

OUT15 := "MyTag_Output_15"

// Bit de salida 15

Q := "Tag_Output_Q"

// El estado l√≥gico "1" indica que ha transcurrido el
tiempo del √∫ltimo paso.

OUT_WORD := "Tag_OutputWord"

// Direcci√≥n de palabra en la que el circuito secuencial sucesivo escribe los valores de salida

ERR_CODE := "Tag_ErrorCode"

// Informaci√≥n de error

Las tablas siguientes muestran el funcionamiento de la instrucci√≥n con valores concretos.

Antes de la ejecuci√≥n
En este ejemplo se utilizan los siguientes valores para asignar valores a los par√°metros de
entrada:
Par√°metro

Operando

Direcci√≥n

Valor

RESET

Tag_Reset

M0.0

FALSE

JOG

Tag_Input_JOG

M0.1

FALSE

DRUM_EN

Tag_Input_Drum_EN

M0.2

TRUE

LST_STEP

Tag_Number_LastStep

MB1

B#16#08

EVENT2

MyTag_Event_2

M20.0

FALSE

EVENT4

MyTag_Event_4

M20.1

FALSE

EVENT6

MyTag_Event_6

M20.2

FALSE

EVENT8

MyTag_Event_8

M20.3

FALSE

EVENT10

MyTag_Event_10

M20.4

FALSE

EVENT12

MyTag_Event_12

M20.5

FALSE

EVENT14

MyTag_Event_14

M20.6

FALSE

EVENT16

MyTag_Event_16

M20.7

FALSE

Los siguientes valores se almacenan en el bloque de datos de instancia "DRUM_X_DB" de la
instrucci√≥n:
Par√°metro

Direcci√≥n

Valor

JOG_HIS

DBX12.0

FALSE

EOD

DBX12.1

FALSE

DSP

DBB13

W#16#0001

DSC

DBB14

W#16#0001

DCC

DBD16

DW#16#0000000A

DTBP

DBW20

W#16#0001

S_PRESET[1]

DBW26

W#16#0064

S_PRESET[2]

DBW28

W#16#00C8

OUT_VAL[1,0]

DBX58.0

TRUE

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5323

Instrucciones
4.2 Instrucciones

5324

Par√°metro

Direcci√≥n

Valor

OUT_VAL[1,1]

DBX58.1

TRUE

OUT_VAL[1,2]

DBX58.2

TRUE

OUT_VAL[1,3]

DBX58.3

TRUE

OUT_VAL[1,4]

DBX58.4

TRUE

OUT_VAL[1,5]

DBX58.5

TRUE

OUT_VAL[1,6]

DBX58.6

TRUE

OUT_VAL[1,7]

DBX58.7

TRUE

OUT_VAL[1,8]

DBX59.0

TRUE

OUT_VAL[1,9]

DBX59.1

TRUE

OUT_VAL[1,10]

DBX59.2

TRUE

OUT_VAL[1,11]

DBX59.3

TRUE

OUT_VAL[1,12]

DBX59.4

TRUE

OUT_VAL[1,13]

DBX59.5

TRUE

OUT_VAL[1,14]

DBX59.6

TRUE

OUT_VAL[1,15]

DBX59.7

TRUE

OUT_VAL[2,0]

DBX60.0

FALSE

OUT_VAL[2,1]

DBX60.1

FALSE

OUT_VAL[2,2]

DBX60.2

FALSE

OUT_VAL[2,3]

DBX60.3

FALSE

OUT_VAL[2,4]

DBX60.4

FALSE

OUT_VAL[2,5]

DBX60.5

FALSE

OUT_VAL[2,6]

DBX60.6

FALSE

OUT_VAL[2,7]

DBX60.7

FALSE

OUT_VAL[2,8]

DBX61.0

FALSE

OUT_VAL[2,9]

DBX61.1

FALSE

OUT_VAL[2,10]

DBX61.2

FALSE

OUT_VAL[2,11]

DBX61.3

FALSE

OUT_VAL[2,12]

DBX61.4

FALSE

OUT_VAL[2,13]

DBX61.5

FALSE

OUT_VAL[2,14]

DBX61.6

FALSE

OUT_VAL[2,15]

DBX61.7

FALSE

S_MASK[2,0]

DBX92.0

FALSE

S_MASK[2,1]

DBX92.1

TRUE

S_MASK[2,2]

DBX92.2

TRUE

S_MASK[2,3]

DBX92.3

TRUE

S_MASK[2,4]

DBX92.4

TRUE

S_MASK[2,5]

DBX92.5

FALSE

S_MASK[2,6]

DBX92.6

TRUE

S_MASK[2,7]

DBX92.7

TRUE

S_MASK[2,8]

DBX93.0

FALSE

S_MASK[2,9]

DBX93.1

FALSE

S_MASK[2,10]

DBX93.2

TRUE

S_MASK[2,11]

DBX93.3

TRUE

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Direcci√≥n

Valor

S_MASK[2,12]

DBX93.4

TRUE

S_MASK[2,13]

DBX93.5

TRUE

S_MASK[2,14]

DBX93.6

FALSE

S_MASK[2,15]

DBX93.7

TRUE

Los par√°metros de salida tienen los valores siguientes antes de ejecutarse la instrucci√≥n:
Par√°metro

Operando

Direcci√≥n

Valor

Q

Tag_Output_Q

M6.0

FALSE

OUTWORD

Tag_OutputWord

MW8

W#16#FFFF

OUT0

MyTag_Output_0

M4.0

TRUE

OUT1

MyTag_Output_1

M4.1

TRUE

OUT2

MyTag_Output_2

M4.2

TRUE

OUT3

MyTag_Output_3

M4.3

TRUE

OUT4

MyTag_Output_4

M4.4

TRUE

OUT5

MyTag_Output_5

M4.5

TRUE

OUT6

MyTag_Output_6

M4.6

TRUE

OUT7

MyTag_Output_7

M4.7

TRUE

OUT8

MyTag_Output_8

M5.0

TRUE

OUT9

MyTag_Output_9

M5.1

TRUE

OUT10

MyTag_Output_10

M5.2

TRUE

OUT11

MyTag_Output_11

M5.3

TRUE

OUT12

MyTag_Output_12

M5.4

TRUE

OUT13

MyTag_Output_13

M5.5

TRUE

OUT14

MyTag_Output_14

M5.6

TRUE

OUT15

MyTag_Output_15

M5.7

TRUE

Despu√©s de la ejecuci√≥n
Una vez ejecutada la instrucci√≥n, los valores siguientes se escriben en los par√°metros de
salida:
Par√°metro

Operando

Direcci√≥n

Valor

OUT0

MyTag_Output_0

M4.0

TRUE

OUT1

MyTag_Output_1

M4.1

FALSE

OUT2

MyTag_Output_2

M4.2

FALSE

OUT3

MyTag_Output_3

M4.3

FALSE

OUT4

MyTag_Output_4

M4.4

FALSE

OUT5

MyTag_Output_5

M4.5

TRUE

OUT6

MyTag_Output_6

M4.6

FALSE

OUT7

MyTag_Output_7

M4.7

FALSE

OUT8

MyTag_Output_8

M5.0

TRUE

OUT9

MyTag_Output_9

M5.1

TRUE

OUT10

MyTag_Output_10

M5.2

FALSE

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5325

Instrucciones
4.2 Instrucciones
Par√°metro

Operando

Direcci√≥n

Valor

OUT11

MyTag_Output_11

M5.3

FALSE

OUT12

MyTag_Output_12

M5.4

FALSE

OUT13

MyTag_Output_13

M5.5

FALSE

OUT14

MyTag_Output_14

M5.6

TRUE

OUT15

MyTag_Output_15

M5.7

FALSE

Q

Tag_Output_Q

M6.0

FALSE

OUTWORD

Tag_OutputWord

MW8

W#16#4321

ERR_CODE

Tag_ErrorCode

MW10

W#16#0000

Los siguientes valores se almacenan en el bloque de datos de instancia "DRUM_X_DB" de la
instrucci√≥n:
Par√°metro

Direcci√≥n

Valor

JOG_HIS

DBX12.0

FALSE

EOD

DBX12.1

FALSE

DSC

DBB14

W#16#0002

DCC

DBD16

DW#16#000000C8

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado (P√°gina 186)
Bases de AWL (P√°gina 8065)
Master Control Relay (P√°gina 203)

DCAT: Alarma de tiempo para control discreto
Descripci√≥n
La instrucci√≥n "Alarma de tiempo para control discreto" acumula el tiempo desde el instante en
el que el par√°metro CMD da la orden de abrir o cerrar. El tiempo se acumula hasta excederse
el tiempo predeterminado (PT) o hasta recibir la notificaci√≥n de que el dispositivo se ha cerrado
o abierto dentro del tiempo prescrito (O_FB o C_FB). Si se excede el tiempo predeterminado
antes de recibirse la notificaci√≥n de que se ha abierto o cerrado el dispositivo, se activa la
alarma correspondiente. Si el estado l√≥gico de la entrada de la orden cambia antes del tiempo
predeterminado, se reinicia el tiempo.
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si los par√°metros de bloque de la instrucci√≥n se
depositan en un bloque de datos propio (instancia individual) o bien como variable local
(multiinstancia) en la interfaz del bloque. Si crea un bloque de datos propio, lo encontrar√° en
el √°rbol del proyecto, en la carpeta "Recursos de programa", en "Bloques de programa >
Bloques de sistema". Encontrar√° m√°s informaci√≥n al respecto en "Consulte tambi√©n".

5326

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
La instrucci√≥n "Alarma de tiempo para control discreto" tiene los efectos siguientes en las
condiciones de entrada:
‚óè Si el estado l√≥gico del par√°metro CMD cambia de "0" a "1", esto tiene los efectos siguientes
en los estados l√≥gicos de los par√°metros Q, CMD_HIS, ET, OA y CA:
‚Äì Los par√°metros Q y CMD_HIS se ponen a "1".
‚Äì Los par√°metros ET, OA y CA se ponen a "0".
‚óè Si el estado l√≥gico del par√°metro CMD cambia de "1" a "0", los par√°metros Q, ET, OA, CA
y CMD_HIS se ponen a "0".
‚óè Si los par√°metros CMD y CMD_HIS tienen el estado l√≥gico "1" y el par√°metro O_FB se pone
a "0", la diferencia de tiempo (ms) desde la √∫ltima ejecuci√≥n de la instrucci√≥n se suma al
valor del par√°metro ET. Si el valor del par√°metro ET excede el del par√°metro PT, el estado
l√≥gico del par√°metro OA se pone a "1". Si el valor del par√°metro ET no excede el del
par√°metro PT, el estado l√≥gico del par√°metro OA se pone a "0". El valor del par√°metro
CMD_HIS se pone al del par√°metro CMD.
‚óè Si los estados l√≥gicos de los par√°metros CMD, CMD_HIS y O_FB est√°n a "1" y el par√°metro
C_FB devuelve el valor "0", el estado l√≥gico del par√°metro OA se pone a "0". El valor del
par√°metro ET se pone al del par√°metro PT. Si el estado l√≥gico del par√°metro O_FB cambia
a "0", se activa la alarma en la siguiente ejecuci√≥n de la instrucci√≥n. El valor del par√°metro
CMD_HIS se pone al del par√°metro CMD.
‚óè Si los par√°metros CMD, CMD_HIS y C_FB devuelven "0", la diferencia de tiempo (ms)
desde la √∫ltima ejecuci√≥n de la instrucci√≥n se suma al valor del par√°metro ET. Si el valor del
par√°metro ET excede el del par√°metro PT, el estado l√≥gico del par√°metro CA se pone a "1".
Si no se excede el valor del par√°metro PT, el par√°metro CA devuelve el estado l√≥gico "0".
El valor del par√°metro CMD_HIS se pone al del par√°metro CMD.
‚óè Si los par√°metros CMD, CMD_HIS y O_FB devuelven el estado l√≥gico "0" y el par√°metro
C_FB est√° a "1", el par√°metro CA se pone a "0". El valor del par√°metro ET se pone al del
par√°metro PT. Si el estado l√≥gico del par√°metro C_FB cambia a "0", se activa la alarma en
la siguiente ejecuci√≥n de la instrucci√≥n. El valor del par√°metro CMD_HIS se pone al del
par√°metro CMD.
‚óè Si los par√°metros O_FB y C_FB devuelven simult√°neamente el estado l√≥gico "1", los
estados l√≥gicos de ambas salidas de alarma se ponen a "1".
La instrucci√≥n "Alarma de tiempo para control discreto" no devuelve informaci√≥n de error.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Alarma de tiempo para control
discreto":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

CMD

Input

BOOL

I, Q, M, D, L

El estado l√≥gico "0" da la or‚Äê
den de "Cerrar".
El estado l√≥gico "1" da la or‚Äê
den de "Abrir".

O_FB

Input

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

BOOL

I, Q, M, D, L

Entrada de realimentaci√≥n al
abrir

5327

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

C_FB

Input

BOOL

I, Q, M, D, L

Entrada de realimentaci√≥n al
cerrar

Q

Output

BOOL

I, Q, M, D, L

Indica el estado del par√°me‚Äê
tro CMD

OA

Output

BOOL

I, Q, M, D, L

Salida de alarma al abrir

CA

Output

BOOL

I, Q, M, D, L

Salida de alarma al cerrar

ET

Static

DINT

I, Q, M, D, L

Tiempo actual transcurrido;
un ciclo de reloj = 1 ms.

PT

Static

DINT

I, Q, M, D, L

Valor de tiempo predetermi‚Äê
nado; un ciclo de reloj = 1 ms.

PREV_TIME

Static

DWORD

I, Q, M, D, L

Hora de sistema anterior

CMD_HIS

Static

BOOL

I, Q, M, D, L

Bit de evoluci√≥n de CMD

Ejemplo
En el ejemplo siguiente, el par√°metro CMD cambia de "0" a "1". Una vez ejecutada la
instrucci√≥n, el par√°metro Q se pone a "1" y las dos salidas de alarma OA y CA se ponen a "0".
El par√°metro CMD_HIS del bloque de datos de instancia se pone a "1" y el par√°metro ET se
pone a "0".
Nota
Los par√°metros est√°ticos pueden inicializarse en el bloque de datos.

AWL

Explicaci√≥n

CALL DCAT, "DCAT_DB"

// Se llama la instrucci√≥n y se crea el bloque de datos de instancia "DCAT_DB".

CMD := "Tag_Input_CMD"

// Abrir o cerrar el dispositivo

O_FB := "Tag_Input_O_FB"

// Realimentaci√≥n al abrir

C_FB := "Tag_Input_C_FB"

// Realimentaci√≥n al cerrar

Q := "Tag_Output_Q"

// Indica el estado del par√°metro CMD

OA := "Tag_Output_OA"

// Salida de alarma al abrir

CA := "Tag_Output_CA"

// Salida de alarma al cerrar

Las tablas siguientes muestran el funcionamiento de la instrucci√≥n con valores concretos.

Antes de la ejecuci√≥n
En este ejemplo se utilizan los siguientes valores para los par√°metros de entrada y salida:
Par√°metro

5328

Operando

Valor

CMD

Tag_Input_CMD

TRUE

O_FB

Tag_Input_O_FB

FALSE

C_FB

Tag_Input_C_FB

FALSE

Q

Tag_Output_Q

FALSE

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Operando

Valor

OA

Tag_Output_OA

FALSE

CA

Tag_Output_CA

FALSE

Los siguientes valores se almacenan en el bloque de datos de instancia "DCAT_DB" de la
instrucci√≥n:
Par√°metro

Direcci√≥n

Valor

ET

DBD4

L#12

PT

DBD8

L#222

CMD_HIS

DBX16.0

FALSE

Despu√©s de la ejecuci√≥n
Una vez ejecutada la instrucci√≥n, los valores siguientes se escriben en los par√°metros de
salida:
Par√°metro

Operando

Valor

Q

Tag_Output_Q

TRUE

OA

Tag_Output_OA

FALSE

CA

Tag_Output_CA

FALSE

Los siguientes valores se almacenan en el bloque de datos de instancia "DCAT_DB" de la
instrucci√≥n:
Par√°metro

Direcci√≥n

Valor

ET

DBD4

L#0

CMD_HIS

DBX16.0

TRUE

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado (P√°gina 186)
Bases de AWL (P√°gina 8065)
Master Control Relay (P√°gina 203)

MCAT: Alarma de tiempo para control del motor
Descripci√≥n
La instrucci√≥n "Alarma de tiempo para control del motor" acumula el tiempo desde el instante
en el que se activa una de las entradas de comando (abrir o cerrar). El tiempo se acumula hasta
que se excede el tiempo predeterminado o hasta que la entrada de realimentaci√≥n
correspondiente indica que el dispositivo ha ejecutado la operaci√≥n solicitada dentro del
tiempo prescrito. Si se excede el tiempo predeterminado antes de recibir realimentaci√≥n, se
activa la alarma correspondiente.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5329

Instrucciones
4.2 Instrucciones
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si los par√°metros de bloque de la instrucci√≥n se
depositan en un bloque de datos propio (instancia individual) o bien como variable local
(multiinstancia) en la interfaz del bloque. Si crea un bloque de datos propio, lo encontrar√° en
el √°rbol del proyecto, en la carpeta "Recursos de programa", en "Bloques de programa >
Bloques de sistema". Encontrar√° m√°s informaci√≥n al respecto en "Consulte tambi√©n".

Ejecuci√≥n de la instrucci√≥n "Alarma de tiempo para control del motor"
La tabla siguiente muestra las reacciones de la instrucci√≥n "Alarma de tiempo para control del
motor" a las distintas condiciones de entrada:
Par√°metros de entrada

Par√°metros de salida

ET

O_H
IS

C_H
IS

O_C
MD

C_C
MD

S_C
MD

O_F
B

C_F
B

OO

CO

OA

CA

ET

O_H
IS

C_HI Q
S

Estado

X

1

1

X

X

X

X

X

0

0

1

1

PT

0

0

0

Alarma

X

X

X

X

X

X

1

1

0

0

1

1

PT

0

0

0

Alarma

X

X

X

X

X

1

X

X

0

0

0

0

X

0

0

1

Stop

X

X

X

1

1

X

X

X

0

0

0

0

X

0

0

1

Stop

X

0

X

1

0

0

X

X

1

0

0

0

0

1

0

1

Empezar a
abrir

<PT

1

0

X

0

0

0

X

1

0

0

0

INC

1

0

1

Abrir

X

1

0

X

0

0

1

0

0

0

0

0

PT

1

0

1

Abierto

>=
PT

1

0

X

0

0

0

X

0

0

1

0

PT

1

0

0

Abrir alarma

X

X

0

0

1

0

X

X

0

1

0

0

0

0

1

1

Empezar a
cerrar

< PT 0

1

0

X

0

X

0

0

1

0

0

INC

0

1

1

Cerrar

X

0

1

0

X

0

0

1

0

0

0

0

PT

0

1

1

Cerrado

>=
PT

0

1

0

X

0

X

0

0

0

0

1

PT

0

1

0

Cerrar alar‚Äê
ma

X

0

0

0

0

0

X

X

0

0

0

0

X

0

0

1

Parado

Leyenda:
INC

Sumar a ET la diferencia de tiempo (en ms) desde la √∫ltima ejecuci√≥n del FB

PT

PT se pone al mismo valor que ET

X

No aplicable

< PT

ET < PT

5330

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metros de entrada
>= PT

Par√°metros de salida

ET >= PT

Si los par√°metros de entrada O_HIS y C_HIS tienen el estado l√≥gico "1", se ponen inmediatamente al estado l√≥gico "0". En
este caso se aplica la √∫ltima fila de la tabla mencionada m√°s arriba (X). Puesto que por este motivo no es posible comprobar
si los par√°metros de entrada O_HIS y C_HIS tienen el estado l√≥gico "1", en este caso se asigna el siguiente valor a los
par√°metros de salida:
OO = FALSE
CO = FALSE
OA = FALSE
CA = FALSE
ET = PT
Q = TRUE

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Alarma de tiempo para control del
motor":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

O_CMD

Input

BOOL

I, Q, M, D, L

Entrada de la orden "Abrir"

C_CMD

Input

BOOL

I, Q, M, D, L

Entrada de la orden "Cerrar"

S_CMD

Input

BOOL

I, Q, M, D, L

Entrada de la orden "Parar"

O_FB

Input

BOOL

I, Q, M, D, L

Entrada de realimentaci√≥n al
abrir

C_FB

Input

BOOL

I, Q, M, D, L

Entrada de realimentaci√≥n al
cerrar

OO

Output

BOOL

I, Q, M, D, L

Salida "Abrir"

CO

Output

BOOL

I, Q, M, D, L

Salida "Cerrar"

OA

Output

BOOL

I, Q, M, D, L

Salida de alarma al abrir

CA

Output

BOOL

I, Q, M, D, L

Salida de alarma al cerrar

Q

Output

BOOL

I, Q, M, D, L

El estado l√≥gico "0" indica
una condici√≥n de error

ET

Static

DINT

I, Q, M, D, L

Tiempo actual transcurrido;
un ciclo de reloj = 1 ms

PT

Static

DINT

I, Q, M, D, L

Valor de tiempo predetermi‚Äê
nado; un ciclo de reloj = 1 ms

PREV_TIME

Static

DWORD

I, Q, M, D, L

Hora de sistema anterior

O_HIS

Static

BOOL

I, Q, M, D, L

Bit de evoluci√≥n "Abrir"

C_HIS

Static

BOOL

I, Q, M, D, L

Bit de evoluci√≥n "Cerrar"

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5331

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
Nota
Los par√°metros est√°ticos pueden inicializarse en el bloque de datos.

AWL

Explicaci√≥n

CALL MCAT, "MCAT_DB"

// Se llama la instrucci√≥n y se crea el bloque de datos de instancia "MCAT_DB".

O_CMD := "Tag_Input_O_CMD"

// Entrada de la orden "Abrir"

C_CMD := "Tag_Input_C_CMD"

// Entrada de la orden "Cerrar"

S_CMD := "Tag_Input_S_CMD"

// Entrada de la orden "Parar"

O_FB := "Tag_Input_O_FB"

// Realimentaci√≥n al abrir

C_FB := "Tag_Input_C_FB"

// Realimentaci√≥n al cerrar

OO := "Tag_OutputOpen"

// Salida "Abrir"

CO := "Tag_OutputClosed"

// Salida "Cerrar"

OA := "Tag_Output_OA"

// Salida de alarma al abrir

CA := "Tag_Output_CA"

// Salida de alarma al cerrar

Q := "Tag_Output_Q"

// Informaci√≥n de error

Las tablas siguientes muestran el funcionamiento de la instrucci√≥n con valores concretos.

Antes de la ejecuci√≥n
En este ejemplo se utilizan los siguientes valores para los par√°metros de entrada y salida:
Par√°metro

Operando

Valor

O_CMD

Tag_Input_O_CMD

TRUE

C_CMD

Tag_Input_C_CMD

FALSE

S_CMD

Tag_Input_S_CMD

FALSE

O_FB

Tag_Input_O_FB

FALSE

C_FB

Tag_Input_C_FB

FALSE

OO

Tag_OutputOpen

FALSE

CO

Tag_OutputClosed

FALSE

OA

Tag_Output_OA

FALSE

CA

Tag_Output_CA

FALSE

Q

Tag_Output_Q

FALSE

Los siguientes valores se almacenan en el bloque de datos de instancia "MCAT_DB" de la
instrucci√≥n:

5332

Par√°metro

Direcci√≥n

Valor

ET

DBD4

L#2

PT

DBD8

L#22

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Direcci√≥n

Valor

O_HIS

DBX16.0

TRUE

C_HIS

DBX16.1

FALSE

Despu√©s de la ejecuci√≥n
Una vez ejecutada la instrucci√≥n, los valores siguientes se escriben en los par√°metros de
salida:
Par√°metro

Operando

Valor

OO

Tag_OutputOpen

TRUE

CO

Tag_OutputClosed

FALSE

OA

Tag_Output_OA

FALSE

CA

Tag_Output_CA

FALSE

Q

Tag_Output_Q

TRUE

Los siguientes valores se almacenan en el bloque de datos de instancia "MCAT_DB" de la
instrucci√≥n:
Par√°metro

Direcci√≥n

Valor

ET

DBD4

L#0

O_HIS

DBX16.0

TRUE

CMD_HIS

DBX16.1

FALSE

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado (P√°gina 186)
Bases de AWL (P√°gina 8065)
Master Control Relay (P√°gina 203)

IMC: Comparar bits de entrada con bits de una m√°scara
Descripci√≥n
La instrucci√≥n "Comparar bits de entrada con bits de una m√°scara" compara el estado l√≥gico
de hasta 16 bits de entrada programados (IN_BIT0 a IN_BIT15) con el bit correspondiente de
una m√°scara. Es posible programar como m√°ximo 16 pasos con m√°scaras. El valor del
par√°metro IN_BIT0 se compara con el valor de la m√°scara CMP_VAL[x,0], siendo "x" el
n√∫mero del paso. El n√∫mero del paso de la m√°scara utilizada para la comparaci√≥n se define en
el par√°metro CMP_STEP. De esta misma manera se comparan todos los valores
programados. Los bits de entrada no programados o los bits no programados de la m√°scara
tienen el estado l√≥gico predeterminado FALSE.
Si se encuentra una correspondencia al realizar la comparaci√≥n, el estado l√≥gico del par√°metro
OUT se pone a "1". De lo contrario, el par√°metro OUT se pone a "0".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5333

Instrucciones
4.2 Instrucciones
Si el valor del par√°metro CMP_STEP es mayor que 15, no se ejecuta la instrucci√≥n. En el
par√°metro ERR_CODE se emite un mensaje de error.
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si los par√°metros de bloque de la instrucci√≥n se
depositan en un bloque de datos propio (instancia individual) o bien como variable local
(multiinstancia) en la interfaz del bloque. Si crea un bloque de datos propio, lo encontrar√° en
el √°rbol del proyecto, en la carpeta "Recursos de programa", en "Bloques de programa >
Bloques de sistema". Encontrar√° m√°s informaci√≥n al respecto en "Consulte tambi√©n".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Comparar bits de entrada con bits
de una m√°scara":

5334

Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN_BIT0

Input

BOOL

I, Q, M, D, L

El bit de entrada 0 se compa‚Äê
ra con el bit 0 de la m√°scara.

IN_BIT1

Input

BOOL

I, Q, M, D, L

El bit de entrada 1 se compa‚Äê
ra con el bit 1 de la m√°scara.

IN_BIT2

Input

BOOL

I, Q, M, D, L

El bit de entrada 2 se compa‚Äê
ra con el bit 2 de la m√°scara.

IN_BIT3

Input

BOOL

I, Q, M, D, L

El bit de entrada 3 se compa‚Äê
ra con el bit 3 de la m√°scara.

IN_BIT4

Input

BOOL

I, Q, M, D, L

El bit de entrada 4 se compa‚Äê
ra con el bit 4 de la m√°scara.

IN_BIT5

Input

BOOL

I, Q, M, D, L

El bit de entrada 5 se compa‚Äê
ra con el bit 5 de la m√°scara.

IN_BIT6

Input

BOOL

I, Q, M, D, L

El bit de entrada 6 se compa‚Äê
ra con el bit 6 de la m√°scara.

IN_BIT7

Input

BOOL

I, Q, M, D, L

El bit de entrada 7 se compa‚Äê
ra con el bit 7 de la m√°scara.

IN_BIT8

Input

BOOL

I, Q, M, D, L

El bit de entrada 8 se compa‚Äê
ra con el bit 8 de la m√°scara.

IN_BIT9

Input

BOOL

I, Q, M, D, L

El bit de entrada 9 se compa‚Äê
ra con el bit 9 de la m√°scara.

IN_BIT10

Input

BOOL

I, Q, M, D, L

El bit de entrada 10 se com‚Äê
para con el bit 10 de la m√°s‚Äê
cara.

IN_BIT11

Input

BOOL

I, Q, M, D, L

El bit de entrada 11 se com‚Äê
para con el bit 11 de la m√°s‚Äê
cara.

IN_BIT12

Input

BOOL

I, Q, M, D, L

El bit de entrada 12 se com‚Äê
para con el bit 12 de la m√°s‚Äê
cara.

IN_BIT13

Input

BOOL

I, Q, M, D, L

El bit de entrada 13 se com‚Äê
para con el bit 13 de la m√°s‚Äê
cara.

IN_BIT14

Input

BOOL

I, Q, M, D, L

El bit de entrada 14 se com‚Äê
para con el bit 14 de la m√°s‚Äê
cara.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN_BIT15

Input

BOOL

I, Q, M, D, L

El bit de entrada 15 se com‚Äê
para con el bit 15 de la m√°s‚Äê
cara.

CMP_STEP

Input

BYTE

I, Q, M, D, L, P o
constante

N√∫mero de paso de la m√°s‚Äê
cara con la que se compara.

OUT

Output

BOOL

I, Q, M, D, L

El estado l√≥gico "1" indica
que se ha encontrado una
correspondencia.
El estado l√≥gico "0" indica
que no se ha encontrado nin‚Äê
guna correspondencia.

ERR_CODE

Output

WORD

I, Q, M, D, L, P

Informaci√≥n de error

CMP_VAL

Static

ARRAY of BOOL

I, Q, M, D, L

M√°scaras de comparaci√≥n [0
a 15, 0 a 15]: El primer n√∫me‚Äê
ro del √≠ndice es el n√∫mero del
paso y, el segundo, el n√∫me‚Äê
ro de bit de la m√°scara.

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Par√°metro ERR_CODE
La tabla siguiente muestra el significado de los valores del par√°metro ERR_CODE:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

000A

El valor del par√°metro CMP_STEP es mayor que 15.

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n aqu√≠: Cambiar
formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)

Ejemplo
En el ejemplo siguiente se comparan todos los 16 bits de entrada con la m√°scara para el paso
2. El estado l√≥gico del par√°metro OUT se pone a TRUE porque los bits de entrada concuerdan
con la m√°scara para el paso 2.
Nota
Los par√°metros est√°ticos pueden inicializarse en el bloque de datos.

AWL

Explicaci√≥n

CALL IMC, "IMC_DB"

// Se llama la instrucci√≥n y se crea el bloque de datos de instancia "IMC_DB".

IN_BIT0 := "Tag_Input_BIT0"

// Bit de entrada 0

IN_BIT1 := "Tag_Input_BIT1"

// Bit de entrada 1

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5335

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

IN_BIT2 := "Tag_Input_BIT2"

// Bit de entrada 2

IN_BIT3 := "Tag_Input_BIT3"

// Bit de entrada 3

IN_BIT4 := "Tag_Input_BIT4"

// Bit de entrada 4

IN_BIT5 := "Tag_Input_BIT5"

// Bit de entrada 5

IN_BIT6 := "Tag_Input_BIT6"

// Bit de entrada 6

IN_BIT7 := "Tag_Input_BIT7"

// Bit de entrada 7

IN_BIT8 := "Tag_Input_BIT8"

// Bit de entrada 8

IN_BIT9 := "Tag_Input_BIT9"

// Bit de entrada 9

IN_BIT10 := "Tag_Input_BIT10" // Bit de entrada 10
IN_BIT11 := "Tag_Input_BIT11" // Bit de entrada 11
IN_BIT12 := "Tag_Input_BIT12" // Bit de entrada 12
IN_BIT13 := "Tag_Input_BIT13" // Bit de entrada 13
IN_BIT14 := "Tag_Input_BIT14" // Bit de entrada 14
IN_BIT15 := "Tag_Input_BIT15" // Bit de entrada 15
CMP_STEP := "Tag_CMP_STEP"

// N√∫mero de paso de la m√°scara

OUT := "Tag_Output"

// Indica si se ha encontrado una correspondencia

ERR_CODE := "Tag_ErrorCode"

// Informaci√≥n de error

Las tablas siguientes muestran el funcionamiento de la instrucci√≥n con valores concretos.

Antes de la ejecuci√≥n
En este ejemplo se utilizan los siguientes valores para los par√°metros de entrada y salida:
Par√°metro

5336

Operando

Valor

IN_BIT0

Tag_Input_BIT0

TRUE

IN_BIT1

Tag_Input_BIT1

TRUE

IN_BIT2

Tag_Input_BIT2

FALSE

IN_BIT3

Tag_Input_BIT3

TRUE

IN_BIT4

Tag_Input_BIT4

TRUE

IN_BIT5

Tag_Input_BIT5

FALSE

IN_BIT6

Tag_Input_BIT6

TRUE

IN_BIT7

Tag_Input_BIT7

TRUE

IN_BIT8

Tag_Input_BIT8

FALSE

IN_BIT9

Tag_Input_BIT9

TRUE

IN_BIT10

Tag_Input_BIT10

TRUE

IN_BIT11

Tag_Input_BIT11

FALSE

IN_BIT12

Tag_Input_BIT12

TRUE

IN_BIT13

Tag_Input_BIT13

TRUE

IN_BIT14

Tag_Input_BIT14

FALSE

IN_BIT15

Tag_Input_BIT15

TRUE

CMP_STEP

Tag_CMP_STEP

B#16#02

OUT

Tag_Output

FALSE

ERR_CODE

Tag_ErrorCode

W#16#0000

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
En el bloque de datos de instancia "IMC_DB" de la instrucci√≥n est√°n almacenados los
siguientes valores para la m√°scara del paso 2:
Par√°metro

Direcci√≥n

Valor

CMP_VAL [2,0]

DBX12.0

TRUE

CMP_VAL [2,1]

DBX12.1

TRUE

CMP_VAL [2,2]

DBX12.2

FALSE

CMP_VAL [2,3]

DBX12.3

TRUE

CMP_VAL [2,4]

DBX12.4

TRUE

CMP_VAL [2,5]

DBX12.5

FALSE

CMP_VAL [2,6]

DBX12.6

TRUE

CMP_VAL [2,7]

DBX12.7

TRUE

CMP_VAL [2,8]

DBX13.0

FALSE

CMP_VAL [2,0]

DBX13.1

TRUE

CMP_VAL [2,10]

DBX13.2

TRUE

CMP_VAL [2,11]

DBX13.3

FALSE

CMP_VAL [2,12]

DBX13.4

TRUE

CMP_VAL [2,13]

DBX13.5

TRUE

CMP_VAL [2,14]

DBX13.6

FALSE

CMP_VAL [2,15]

DBX13.7

TRUE

Despu√©s de la ejecuci√≥n
Una vez ejecutada la instrucci√≥n, los valores siguientes se escriben en los par√°metros de
salida:
Par√°metro

Operando

Valor

OUT

Tag_Output

TRUE

ERR_CODE

Tag_ErrorCode

W#16#0000

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado (P√°gina 186)
Bases de AWL (P√°gina 8065)
Master Control Relay (P√°gina 203)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5337

Instrucciones
4.2 Instrucciones

SMC: Barrido de matriz
Descripci√≥n
La instrucci√≥n "Barrido de matriz" compara el estado l√≥gico de hasta 16 bits de entrada
programados (IN_BIT0 a IN_BIT15) con los bits correspondientes de las m√°scaras de
comparaci√≥n de cada paso. La ejecuci√≥n empieza por el paso 1 y contin√∫a hasta el √∫ltimo paso
programado (LAST) o hasta que se encuentre una correspondencia. El bit de entrada del
par√°metro IN_BIT0 se compara con el valor de la m√°scara CMP_VAL[x,0], siendo "x" el
n√∫mero de paso. De esta misma manera se comparan todos los valores programados. Si se
encuentra una correspondencia, el estado l√≥gico del par√°metro OUT se pone a "1" y el n√∫mero
de paso se escribe con la m√°scara correspondiente en el par√°metro OUT_STEP. Los bits de
entrada no programados o los bits no programados de la m√°scara tienen el estado l√≥gico
predeterminado FALSE. Si varios pasos tienen una m√°scara equivalente, se indica solo la
primera correspondencia encontrada en el par√°metro OUT_STEP. Si no se encuentra ninguna
correspondencia, el estado l√≥gico del par√°metro OUT se pone a "0". En este caso, el valor del
par√°metro OUT_STEP excede en "1" el valor del par√°metro LAST.
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si los par√°metros de bloque de la instrucci√≥n se
depositan en un bloque de datos propio (instancia individual) o bien como variable local
(multiinstancia) en la interfaz del bloque. Si crea un bloque de datos propio, lo encontrar√° en
el √°rbol del proyecto, en la carpeta "Recursos de programa", en "Bloques de programa >
Bloques de sistema". Encontrar√° m√°s informaci√≥n al respecto en "Consulte tambi√©n".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Barrido de matriz":

5338

Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN_BIT0

Input

BOOL

I, Q, M, D, L

El bit de entrada 0 se compa‚Äê
ra con el bit 0 de la m√°scara.

IN_BIT1

Input

BOOL

I, Q, M, D, L

El bit de entrada 1 se compa‚Äê
ra con el bit 1 de la m√°scara.

IN_BIT2

Input

BOOL

I, Q, M, D, L

El bit de entrada 2 se compa‚Äê
ra con el bit 2 de la m√°scara.

IN_BIT3

Input

BOOL

I, Q, M, D, L

El bit de entrada 3 se compa‚Äê
ra con el bit 3 de la m√°scara.

IN_BIT4

Input

BOOL

I, Q, M, D, L

El bit de entrada 4 se compa‚Äê
ra con el bit 4 de la m√°scara.

IN_BIT5

Input

BOOL

I, Q, M, D, L

El bit de entrada 5 se compa‚Äê
ra con el bit 5 de la m√°scara.

IN_BIT6

Input

BOOL

I, Q, M, D, L

El bit de entrada 6 se compa‚Äê
ra con el bit 6 de la m√°scara.

IN_BIT7

Input

BOOL

I, Q, M, D, L

El bit de entrada 7 se compa‚Äê
ra con el bit 7 de la m√°scara.

IN_BIT8

Input

BOOL

I, Q, M, D, L

El bit de entrada 8 se compa‚Äê
ra con el bit 8 de la m√°scara.

IN_BIT9

Input

BOOL

I, Q, M, D, L

El bit de entrada 9 se compa‚Äê
ra con el bit 9 de la m√°scara.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN_BIT10

Input

BOOL

I, Q, M, D, L

El bit de entrada 10 se com‚Äê
para con el bit 10 de la m√°s‚Äê
cara.

IN_BIT11

Input

BOOL

I, Q, M, D, L

El bit de entrada 11 se com‚Äê
para con el bit 11 de la m√°s‚Äê
cara.

IN_BIT12

Input

BOOL

I, Q, M, D, L

El bit de entrada 12 se com‚Äê
para con el bit 12 de la m√°s‚Äê
cara.

IN_BIT13

Input

BOOL

I, Q, M, D, L

El bit de entrada 13 se com‚Äê
para con el bit 13 de la m√°s‚Äê
cara.

IN_BIT14

Input

BOOL

I, Q, M, D, L

El bit de entrada 14 se com‚Äê
para con el bit 14 de la m√°s‚Äê
cara.

IN_BIT15

Input

BOOL

I, Q, M, D, L

El bit de entrada 15 se com‚Äê
para con el bit 15 de la m√°s‚Äê
cara.

OUT

Output

BOOL

I, Q, M, D, L

El estado l√≥gico "1" indica
que se ha encontrado una
correspondencia.
El estado l√≥gico "0" indica
que no se ha encontrado nin‚Äê
guna correspondencia.

ERR_CODE

Output

WORD

I, Q, M, D, L, P

Informaci√≥n de error

OUT_STEP

Output

BYTE

I, Q, M, D, L, P

Contiene el n√∫mero de paso
con la m√°scara correspon‚Äê
diente o el n√∫mero de paso
que excede en "1" el valor del
par√°metro LAST, si no se ha
encontrado ninguna corres‚Äê
pondencia.

LAST

Static

BYTE

I, Q, M, D, L, P

Indica el n√∫mero del √∫ltimo
paso en que se tiene que
buscar una m√°scara corres‚Äê
pondiente.

CMP_VAL

Static

ARRAY of WORD

I, Q, M, D, L

M√°scaras de comparaci√≥n [0
a 15, 0 a 15]: El primer n√∫me‚Äê
ro del √≠ndice es el n√∫mero del
paso y, el segundo, el n√∫me‚Äê
ro de bit de la m√°scara.

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5339

Instrucciones
4.2 Instrucciones

Par√°metro ERR_CODE
La tabla siguiente muestra el significado de los valores del par√°metro ERR_CODE:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

000E

El valor del par√°metro LAST es mayor que 15.

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n aqu√≠: Cambiar
formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)

Ejemplo
En el ejemplo siguiente, todos los 16 bits de entrada se comparan con la m√°scara para los
pasos 0 a 5 hasta que se encuentre una correspondencia. Se consultan √∫nicamente las
m√°scaras para los pasos 0 a 2, ya que la m√°scara para el paso 2 se corresponde con el bit de
entrada.
Nota
Los par√°metros est√°ticos pueden inicializarse en el bloque.

AWL

Explicaci√≥n

CALL SMC, "SMC_DB"

// Se llama la instrucci√≥n y se crea el bloque de datos de instancia "SMC_DB".

IN_BIT0 := "Tag_Input_BIT0"

// Bit de entrada 0

IN_BIT1 := "Tag_Input_BIT1"

// Bit de entrada 1

IN_BIT2 := "Tag_Input_BIT2"

// Bit de entrada 2

IN_BIT3 := "Tag_Input_BIT3"

// Bit de entrada 3

IN_BIT4 := "Tag_Input_BIT4"

// Bit de entrada 4

IN_BIT5 := "Tag_Input_BIT5"

// Bit de entrada 5

IN_BIT6 := "Tag_Input_BIT6"

// Bit de entrada 6

IN_BIT7 := "Tag_Input_BIT7"

// Bit de entrada 7

IN_BIT8 := "Tag_Input_BIT8"

// Bit de entrada 8

IN_BIT9 := "Tag_Input_BIT9"

// Bit de entrada 9

IN_BIT10 := "Tag_Input_BIT10" // Bit de entrada 10
IN_BIT11 := "Tag_Input_BIT11" // Bit de entrada 11
IN_BIT12 := "Tag_Input_BIT12" // Bit de entrada 12
IN_BIT13 := "Tag_Input_BIT13" // Bit de entrada 13
IN_BIT14 := "Tag_Input_BIT14" // Bit de entrada 14
IN_BIT15 := "Tag_Input_BIT15" // Bit de entrada 15
OUT := "Tag_Output"

// Indica si se ha encontrado una correspondencia.

OUT_STEP := "Tag_Output_STEP" // Contiene el n√∫mero de paso con la m√°scara correspondiente.
ERR_CODE := "Tag_ErrorCode"

5340

// Informaci√≥n de error

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Las tablas siguientes muestran el funcionamiento de la instrucci√≥n con valores concretos.

Antes de la ejecuci√≥n
En este ejemplo se utilizan los siguientes valores para los par√°metros de entrada y salida:
Par√°metro

Operando

Valor

IN_BIT0

Tag_Input_BIT0

TRUE

IN_BIT1

Tag_Input_BIT1

TRUE

IN_BIT2

Tag_Input_BIT2

FALSE

IN_BIT3

Tag_Input_BIT3

TRUE

IN_BIT4

Tag_Input_BIT4

TRUE

IN_BIT5

Tag_Input_BIT5

FALSE

IN_BIT6

Tag_Input_BIT6

TRUE

IN_BIT7

Tag_Input_BIT7

TRUE

IN_BIT8

Tag_Input_BIT8

FALSE

IN_BIT9

Tag_Input_BIT9

TRUE

IN_BIT10

Tag_Input_BIT10

TRUE

IN_BIT11

Tag_Input_BIT11

FALSE

IN_BIT12

Tag_Input_BIT12

TRUE

IN_BIT13

Tag_Input_BIT13

TRUE

IN_BIT14

Tag_Input_BIT14

FALSE

IN_BIT15

Tag_Input_BIT15

TRUE

OUT

Tag_Output

FALSE

OUT_STEP

Tag_Output_STEP

B#16#00

ERR_CODE

Tag_ErrorCode

W#16#0000

En el bloque de datos de instancia "SMC_DB" de la instrucci√≥n est√°n almacenados los
siguientes valores para la m√°scara del paso 2:
Par√°metro

Direcci√≥n

Valor

CMP_VAL [2,0]

DBX12.0

TRUE

CMP_VAL [2,1]

DBX12.1

TRUE

CMP_VAL [2,2]

DBX12.2

FALSE

CMP_VAL [2,3]

DBX12.3

TRUE

CMP_VAL [2,4]

DBX12.4

TRUE

CMP_VAL [2,5]

DBX12.5

FALSE

CMP_VAL [2,6]

DBX12.6

TRUE

CMP_VAL [2,7]

DBX12.7

TRUE

CMP_VAL [2,8]

DBX13.0

FALSE

CMP_VAL [2,0]

DBX13.1

TRUE

CMP_VAL [2,10]

DBX13.2

TRUE

CMP_VAL [2,11]

DBX13.3

FALSE

CMP_VAL [2,12]

DBX13.4

TRUE

CMP_VAL [2,13]

DBX13.5

TRUE

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5341

Instrucciones
4.2 Instrucciones
Par√°metro

Direcci√≥n

Valor

CMP_VAL [2,14]

DBX13.6

FALSE

CMP_VAL [2,15]

DBX13.7

TRUE

LAST

DB84

B#16#05

Despu√©s de la ejecuci√≥n
Una vez ejecutada la instrucci√≥n, los valores siguientes se escriben en los par√°metros de
salida:
Par√°metro

Operando

Valor

OUT

Tag_Output

TRUE

OUT_STEP

Tag_Output_STEP

B#16#02

ERR_CODE

Tag_ErrorCode

W#16#0000

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado (P√°gina 186)
Bases de AWL (P√°gina 8065)
Master Control Relay (P√°gina 203)

LEAD_LAG: Algoritmo Lead y Lag
Descripci√≥n
La instrucci√≥n "Algoritmo Lead y Lag" procesa se√±ales con una variable anal√≥gica. El valor de
la ganancia en el par√°metro GAIN debe ser mayor que cero. El resultado de la instrucci√≥n
"Algoritmo Lead y Lag" se calcula con la siguiente ecuaci√≥n:
287

/*B7,0(
/'B7,0(6$03/(B7
/'B7,0(
,1*$,1
35(9B287*$,1
/*B7,0(6$03/(B7
/*B7,0(6$03/(B7
/*B7,0(6$03/(B7

35(9B,1

La instrucci√≥n "Algoritmo Lead y Lag" solo devuelve resultados relevantes cuando se ejecuta
en ciclos de programa fijos. Deben indicarse las mismas unidades en los par√°metros
LD_TIME, LG_TIME y SAMPLE_T. Si LG_TIME > 4 + SAMPLE_T, la instrucci√≥n se aproxima
a la siguiente funci√≥n:
OUT = GAIN * ((1 + LD_TIME * s) / (1 + LG_TIME * s)) * IN
Si el valor del par√°metro GAIN es menor o igual a cero, no se realiza el c√°lculo y el par√°metro
ERR_CODE devuelve una informaci√≥n de error.
La instrucci√≥n "Algoritmo Lead y Lag" puede utilizarse junto con bucles para la compensaci√≥n
en el control anticipativo. La instrucci√≥n comprende dos operaciones. La operaci√≥n "Lead"
desplaza la fase de la salida OUT, anticip√°ndose la salida a la entrada. En cambio, la operaci√≥n
"Lag" desplaza la salida, de manera que la salida sigue a la entrada. Puesto que la operaci√≥n
"Lag" equivale a una integraci√≥n, puede utilizarse como supresor de perturbaciones o filtro de

5342

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
paso bajo. La operaci√≥n "Lead" equivale a una acci√≥n diferencial, por lo que puede utilizarse
como un filtro de paso alto. La combinaci√≥n de ambas operaciones (Lead y Lag) hace que la
fase de salida siga a la entrada a bajas frecuencias y se le anticipe a altas frecuencias. Por este
motivo, la instrucci√≥n "Algoritmo Lead y Lag" puede utilizarse como si fuera un filtro de paso de
banda.
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si los par√°metros de bloque de la instrucci√≥n se
depositan en un bloque de datos propio (instancia individual) o bien como variable local
(multiinstancia) en la interfaz del bloque. Si crea un bloque de datos propio, lo encontrar√° en
el √°rbol del proyecto, en la carpeta "Recursos de programa", en "Bloques de programa >
Bloques de sistema". Encontrar√° m√°s informaci√≥n al respecto en "Consulte tambi√©n".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Algoritmo Lead y Lag":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN

Input

REAL

I, Q, M, D, L, P o
constante

Valor de entrada del tiempo
de muestreo actual (tiempo
de ciclo) que se procesa.

SAMPLE_T

Input

INT

I, Q, M, D, L, P o
constante

Tiempo de muestreo

OUT

Output

REAL

I, Q, M, D, L, P

Resultado de la instrucci√≥n

ERR_CODE

Output

WORD

I, Q, M, D, L, P

Informaci√≥n de error

LD_TIME

Static

REAL

I, Q, M, D, L, P o
constante

Tiempo de anticipaci√≥n en la
misma unidad que el tiempo
de muestreo.

LG_TIME

Static

REAL

I, Q, M, D, L, P o
constante

Tiempo de seguimiento en la
misma unidad que el tiempo
de muestreo.

GAIN

Static

REAL

I, Q, M, D, L, P o
constante

Ganancia en % / % (relaci√≥n
del cambio en la salida con
respecto al cambio en la en‚Äê
trada como estado constan‚Äê
te).

PREV_IN

Static

REAL

I, Q, M, D, L, P o
constante

Entrada anterior

PREV_OUT

Static

REAL

I, Q, M, D, L, P o
constante

Salida anterior

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5343

Instrucciones
4.2 Instrucciones

Par√°metro ERR_CODE
La tabla siguiente muestra el significado de los valores del par√°metro ERR_CODE:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

0009

El valor del par√°metro GAIN es menor o igual a cero.

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n aqu√≠: Cambiar
formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
Nota
Los par√°metros est√°ticos pueden inicializarse en el bloque de datos.

AWL

Explicaci√≥n

CALL LEAD_LAG, "LEAD_LAG_DB"

// Se llama la instrucci√≥n y se crea el bloque de datos de instancia "LEAD_LAG_DB".

IN := "Tag_Input"

// Valor de entrada del tiempo de muestreo actual
(tiempo de ciclo) que se procesa.

SAMPLE_T := "Tag_Input_SAMPE_T"

// Tiempo de muestreo

OUT := "Tag_Output_Result"

// Resultado de la instrucci√≥n

ERR_CODE := "Tag_ErrorCode"

// Informaci√≥n de error

Las tablas siguientes muestran el funcionamiento de la instrucci√≥n con valores concretos.

Antes de la ejecuci√≥n
En este ejemplo se utilizan los siguientes valores para los par√°metros de entrada:
Par√°metro

Operando

Valor

IN

Tag_Input

2.0

SAMPLE_T

Tag_InputSampleTime

10

Los siguientes valores se almacenan en el bloque de datos de instancia "LEAD_LAG_DB" de
la instrucci√≥n:

5344

Par√°metro

Direcci√≥n

Valor

LD_TIME

DBD12

2.0

LG_TIME

DBD16

2.0

GAIN

DBD20

1.0

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Direcci√≥n

Valor

PREV_IN

DBD24

6.0

PREV_OUT

DBD28

6.0

Despu√©s de la ejecuci√≥n
Una vez ejecutada la instrucci√≥n, los valores siguientes se escriben en los par√°metros de
salida:
Par√°metro

Operando

Valor

OUT

Tag_Output_Result

2.0

Los siguientes valores se guardan en el bloque de datos de instancia "LEAD_LAD_DB" de la
instrucci√≥n:
Par√°metro

Operando

Valor

PREV_IN

DBD24

2.0

PREV_OUT

DBD28

2.0

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado (P√°gina 186)
Bases de AWL (P√°gina 8065)
Master Control Relay (P√°gina 203)

TONR_X: Acumulador de tiempo
Descripci√≥n
La instrucci√≥n "Acumulador de tiempo" acumula valores de tiempo dentro de un periodo
definido con ayuda de la entrada PV. La instrucci√≥n se ejecuta cuando el estado l√≥gico de la
entrada de arranque TMR_EN cambia de "0" a "1". Simult√°neamente, el temporizador cuenta
el tiempo programado en la entrada PV. Mientras se ejecuta la instrucci√≥n, a√±ade el valor de
tiempo de la entrada DELTA_T al valor de tiempo de InOut ET.
Adem√°s, deben cumplirse las siguientes condiciones:
‚óè La entrada de arranque TMR_EN devuelve el estado l√≥gico "1".
‚óè El valor de tiempo de InOut ET es menor que el valor de tiempo del par√°metro PV.
‚óè La entrada RESET devuelve el estado l√≥gico "0".
La instrucci√≥n se interrumpe cuando el estado l√≥gico de la entrada de arranque TMR_EN
cambia de "1" a "0". En cuanto el estado l√≥gico cambia de nuevo a "1", la instrucci√≥n sigue
ejecut√°ndose.
La instrucci√≥n finaliza cuando el valor de tiempo de InOut ET alcanza el valor de tiempo de la
entrada PV. Entonces, la salida Q devuelve el estado l√≥gico "1".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5345

Instrucciones
4.2 Instrucciones
Mientras la salida Q devuelva el estado l√≥gico "1", el valor de tiempo de InOut ET no se
modificar√°. El valor de tiempo y la salida Q vuelven a ponerse a "0" solo cuando la entrada
RESET se pone al estado l√≥gico "1".
Puesto que la instrucci√≥n "Acumulador de tiempo" utiliza el tiempo de ciclo (DELTA_T) del
√∫ltimo ciclo del bloque de organizaci√≥n (OB), la instrucci√≥n solo puede llamarse en bloques de
organizaci√≥n c√≠clicos.
Nota
El tiempo de ciclo del bloque de organizaci√≥n debe desplazarse desde la informaci√≥n de
arranque a la variable global del par√°metro DELTA_T.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Acumulador de tiempo":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

TMR_EN (Ti‚Äê
mer Enable)

Input

BOOL

I, Q, M, D, L

RESET

Input

BOOL

I, Q, M, D, L

Entrada de reset

PV (Preset
Value)

Input

DINT

I, Q, M, D, L, P o
constante

Tiempo m√°ximo de lectura
del tiempo

DELTA_T

Input

INT

I, Q, M, D, L o
constante

Tiempo de ciclo del bloque
de organizaci√≥n del ciclo an‚Äê
terior

Q

Output

BOOL

I, Q, M, D, L

Salida que se establece al al‚Äê
canzar el valor de tiempo pre‚Äê
determinado

ET (Elapsed
Time)

InOut

DINT

I, Q, M, D, L

Valor de tiempo acumulado

Entrada de arranque
Arranca la instrucci√≥n y la
temporizaci√≥n predetermina‚Äê
da en la entrada PV

(Valor de tiempo transcurrido
actualmente + valor de tiem‚Äê
po de la entrada DELTA_T)

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

5346

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Cronograma de impulsos
La figura siguiente muestra el cronograma de impulsos de la instrucci√≥n "Acumulador de
tiempo":
705B(1

5(6(7

4

39

(7

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL TONR_X

// Se llama la instrucci√≥n.

TMR_EN := "Tag_Start"

// Entrada de arranque

RESET := "Tag_Reset"

// Entrada de inicializaci√≥n

PV := 10

// Duraci√≥n m√°xima del cronometraje

DELTA_T := 2

// Tiempo de ciclo del bloque de organizaci√≥n del ciclo anterior

ET := "Tag_Elapsed_Time"

// Tiempo acumulado

Q := "Tag_Output"

// Indica si se ha alcanzado el tiempo del par√°metro
PV.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
A√±adir instrucciones AWL (P√°gina 8079)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5347

Instrucciones
4.2 Instrucciones
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

WSR: Guardar datos en el registro de desplazamiento
Descripci√≥n
La instrucci√≥n "Guardar datos en el registro de desplazamiento" escribe datos en un registro
de desplazamiento desde el origen indicado. Todo elemento del registro se desplaza a la
siguiente direcci√≥n. Los datos contenidos en la √∫ltima direcci√≥n del registro de desplazamiento
se pierden tras la operaci√≥n de desplazamiento.
Cada vez que la instrucci√≥n se ejecuta con el valor "0" en el par√°metro RESET, se leen datos
nuevos del origen (S_DATA) y se desplazan a la direcci√≥n inicial (START) del registro de
desplazamiento. El par√°metro LEN indica el n√∫mero de elementos que deben desplazarse. El
tipo de datos de los elementos se define en el par√°metro E_TYPE. Si se indica un tipo de datos
no admisible en el par√°metro E_TYPE, no se procesa la instrucci√≥n.
Si el par√°metro RESET est√° a "1" al ejecutarse la instrucci√≥n, se borra el registro. El par√°metro
Q se pone al estado l√≥gico "1" si el registro de desplazamiento est√° ocupado con ceros o si se
borra.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Guardar datos en el registro de
desplazamiento":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

RESET

Input

BOOL

I, Q, M, D, L

Entrada de reset

S_DATA

Input

POINTER

I, Q, M, D

Apunta al elemento de origen
que se desplaza a la direc‚Äê
ci√≥n inicial (START).
En el direccionamiento indi‚Äê
recto por registro inter√°rea,
el puntero debe indicarse en
formato de palabra doble.

START

Input

POINTER

I, Q, M, D

Apunta a la direcci√≥n inicial
del registro.
En el direccionamiento indi‚Äê
recto por registro inter√°rea,
el puntero debe indicarse en
formato de palabra doble.

LEN

5348

Input

WORD

I, Q, M, D, L, P

N√∫mero de elementos que
deben desplazarse.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

E_TYPE

Input

BYTE

I, Q, M, D, L, P

Indica el tipo de datos de los
elementos que deben despla‚Äê
zarse. Los siguientes tipos
de datos son admisibles:
‚óè W#16#04 = WORD
‚óè B#16#05 = INT
‚óè B#16#06 = DWORD
‚óè B#16#07 = DINT
‚óè B#16#08 = REAL

Q

Output

BOOL

Q, M, D, L

Indica "1" si el par√°metro RE‚Äê
SET est√° activado (1) o si to‚Äê
dos los elementos que deben
desplazarse tienen el valor
"0".

Ejemplo
En el ejemplo siguiente se desplazan cuatro elementos del tipo de datos WORD a partir de la
direcci√≥n indicada en el par√°metro START. Una vez desplazado el primer elemento del
registro a la siguiente direcci√≥n, la primera direcci√≥n se ocupar√° con los datos a los que se√±ala
el puntero en el par√°metro S_DATA. El valor del √∫ltimo elemento del registro se pierde
entonces.
AWL

Explicaci√≥n

CALL WSR

// Se llama la instrucci√≥n.

RESET := "Tag_Input_Reset"

// Entrada de inicializaci√≥n

S_DATA := "Tag_Input_DataSource"

// Elemento de origen que se desplaza a la direcci√≥n
inicial.

START := "Tag_Input_StartAddress"

// Direcci√≥n inicial

LEN := "Tag_Input_LEN"

// N√∫mero de elementos que deben desplazarse

E_TYPE := "Tag_Input_ElementType"

// Tipo de datos de los elementos

Q := "Tag_Output_Q"

// Estado del registro

Las tablas siguientes muestran el funcionamiento de la instrucci√≥n con valores concretos.

Antes de la ejecuci√≥n
En este ejemplo se utilizan los siguientes valores para los par√°metros de entrada y salida:
Par√°metro

Operando

Valor

RESET

Tag_Input_Reset

0

S_DATA

Tag_Input_SourceData

P#DB2.DBX6.0
DW6 = W#16#1234

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5349

Instrucciones
4.2 Instrucciones
Par√°metro

Operando

Valor

START

Tag_Input_StartAddress

P#DB1.DBX0.0
DW0 = W#16#1111
DW2 = W#16#2222
DW4 = W#16#3333
DW6 = W#16#4444

LEN

Tag_Input_LEN

W#16#04

E_TYPE

Tag_Input_ElementType

W#16#04

Q

Tag_Output_Q

1

Despu√©s de la ejecuci√≥n
Una vez ejecutada la instrucci√≥n, los valores siguientes se escriben en los par√°metros de
salida:
Par√°metro

Operando

Valor

RESET

Tag_Input_Reset

0

S_DATA

Tag_Input_SourceData

P#DB2.DBX6.0
DW6 = W#16#1234

START

Tag_Input_StartAddress

P#DB1.DBX0.0
DW0 = W#16#1234
DW2 = W#16#1111
DW4 = W#16#2222
DW6 = W#16#3333

LEN

Tag_Input_LEN

W#16#04

E_TYPE

Tag_Input_ElementType

B#16#04

Q

Tag_Output_Q

1

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

5350

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

SHRB: Desplazar bit al registro de desplazamiento
Descripci√≥n
La instrucci√≥n "Desplazar bit al registro de desplazamiento" escribe un bit en un registro de
desplazamiento desde el origen indicado (DATA). Cada vez que la instrucci√≥n se ejecuta con
el valor "0" en el par√°metro RESET, se leen datos nuevos del origen y se desplazan a la
direcci√≥n inicial (S_BIT) del registro de desplazamiento. Los restantes bits se desplazan una
posici√≥n. El bit de la √∫ltima direcci√≥n (S_BIT + N) se pierde tras el desplazamiento. Si el
par√°metro RESET est√° a "1" mientras se ejecuta la instrucci√≥n, las direcciones del registro de
desplazamiento se ponen a "0" y no se desplazan.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Desplazar bit al registro de
desplazamiento":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

DATA

Input

BOOL

I, Q, M, D, L

Bit de origen

RESET

Input

BOOL

I, Q, M, D, L

Entrada de reset

S_BIT

Input

POINTER

I, Q, M, D

Apunta al primer bit del regis‚Äê
tro de desplazamiento.
En el direccionamiento indi‚Äê
recto por registro inter√°rea,
el puntero debe indicarse en
formato de palabra doble.

N

Input

WORD

I, Q, M, D, L, P

N√∫mero de bits que deben
desplazarse.

Ejemplo
En el ejemplo siguiente, el par√°metro N se pone al valor 14 ("E" en notaci√≥n hexadecimal), con
lo que 14 bits se desplazan a partir de la direcci√≥n indicada en el par√°metro S_BIT. Una vez
desplazados los bits, la primera direcci√≥n se ocupa con los datos del origen del par√°metro
DATA. El √∫ltimo valor de bit se pierde.
AWL

Explicaci√≥n

CALL SHRB

// Se llama la instrucci√≥n.

DATA := "Tag_Input_Data"

// Bit de origen que se desplaza a la direcci√≥n inicial.

RESET := "Tag_Input_Reset"

// Entrada de inicializaci√≥n

S_BIT := "Tag_Input_BitSource"

// Direcci√≥n inicial

N := "Tag_Input_Number"

// N√∫mero de bits que deben desplazarse

Las tablas siguientes muestran el funcionamiento de la instrucci√≥n con valores concretos.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5351

Instrucciones
4.2 Instrucciones

Antes de la ejecuci√≥n
En este ejemplo se utilizan los siguientes valores para los par√°metros de entrada y salida:
Par√°metro

Operando

Valor

RESET

Tag_Input_Reset

0

DATA

Tag_Input_Data

0

S_BIT

Tag_Input_BitSource

P#DB1.DBX1.4

N

Tag_Input_Number

B#16#0E

Antes de ejecutarse la instrucci√≥n, los siguientes estados l√≥gicos est√°n almacenados en los 14
bits del registro:


























6B%,7







































Despu√©s de la ejecuci√≥n
Una vez ejecutada la instrucci√≥n, los siguientes estados l√≥gicos se almacenan en los 14 bits
del registro:


























6B%,7







































Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

5352

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

SEG: Generar patr√≥n de bits para el display de 7 segmentos
Descripci√≥n
La instrucci√≥n "Generar patr√≥n de bits para el display de 7 segmentos" convierte cada una de
las cuatro cifras hexadecimales de la palabra de origen indicada (IN) en un patr√≥n de bits
equivalente para un display de 7 segmentos. El resultado de la instrucci√≥n se deposita en la
palabra doble del par√°metro OUT.
Entre las cifras hexadecimales y la ocupaci√≥n de los 7 segmentos (a, b, c, d, e, f, g) existe la
siguiente relaci√≥n:
Cifra de en‚Äê
trada
(binaria)
0000
0001
0010
0011
0100
0101
0110
0111
1000
1001
1010
1011
1100
1101
1110
1111

Ocupaci√≥n de
los segmentos
‚Äëgfedcba
00111111
00000110
01011011
01001111
01100110
01101101
01111101
00000111
01111111
01100111
01110111
01111100
00111001
01011110
01111001
01110001

Display
Display de siete segmentos
(hexadecimal)
0
1
2
3
4
5
6
7
8
9
A
B
C
D
E
F

D
I

E
J

H

F
G

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Generar patr√≥n de bits para el
display de 7 segmentos":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN

Input

WORD

I, Q, M, D, L, P o
constante

Palabra de origen con cuatro
cifras hexadecimales

OUT

Output

DWORD

I, Q, M, D, L, P

Patr√≥n de bits para el display
de 7 segmentos

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5353

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL SEG

// Se llama la instrucci√≥n.

IN := "Tag_Input"

// Palabra de origen

OUT := "Tag_Output"

// Patr√≥n de bits para el display de 7 segmentos

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores concretos:
Par√°metro

Operando

Valor

Hexadecimal

Binario

IN

Tag_Input

W#16#1234

0001 0010 0011 0100

OUT

Tag_Output

DW#16#065B4F66

00000110 01011011 01001111
01100110
Visualizaci√≥n: 1234

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

BCDCPL: Generar complemento a diez
Descripci√≥n
La instrucci√≥n "Generar complemento a diez" crea el complemento a diez de un n√∫mero BCD
de siete d√≠gitos que se indica en el par√°metro IN. La instrucci√≥n realiza el c√°lculo con la
siguiente f√≥rmula matem√°tica:
10000000 (como BCD)
‚Äì Valor BCD de 7 d√≠gitos
---------------------------------------Complemento a diez (como BCD)

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Generar complemento a diez":

5354

Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN

Input

DWORD

I, Q, M, D, L, P o
constante

N√∫mero BCD de 7 d√≠gitos

ERR_CODE

Output

DWORD

I, Q, M, D, L, P

Resultado de la instrucci√≥n

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL BCDCPL

// Se llama la instrucci√≥n.

IN := "Tag_Input"

// N√∫mero BCD de 7 d√≠gitos

ERR_CODE := "Tag_Output"

// Complemento a diez del n√∫mero BCD indicado

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores concretos:
Par√°metro

Operando

Valor*

IN

Tag_Input

DW#16#01234567

ERR_CODE

Tag_Output

DW#16#08765433

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n aqu√≠: Cambiar
formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado (P√°gina 186)

BITSUM: Contar n√∫mero de bits activados
Descripci√≥n
La instrucci√≥n "Contar n√∫mero de bits activados" cuenta el n√∫mero de bits de un operando que
est√°n puestos al estado l√≥gico "1". El operando cuyos bits se cuentan se especifica en el
par√°metro IN. El resultado de la instrucci√≥n se devuelve en el par√°metro RET_VAL.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Contar n√∫mero de bits activados":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN

Input

DWORD

I, Q, M, D, L, P o
constante

Operando cuyos bits activa‚Äê
dos se cuentan.

RET_VAL

Output

INT

I, Q, M, D, L, P

N√∫mero de bits activados

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL BITSUM

// Se llama la instrucci√≥n.

IN := "Tag_Input"

// Operando cuyos bits activados se cuentan.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5355

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

RET_VAL := "Tag_Output"

// N√∫mero de bits activados del operando "Tag_Input"

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores concretos:
Par√°metro

Operando

Valor*

IN

Tag_Input

DW#16#12345678

RET_VAL

Tag_Output

W#16#000D (13 bits)

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n aqu√≠: Cambiar
formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado (P√°gina 186)
Bases de AWL (P√°gina 8065)

AWL Mnem√≥nica
Operaciones l√≥gicas con bits
A: Operaci√≥n l√≥gica Y
Descripci√≥n
La instrucci√≥n "Operaci√≥n l√≥gica Y" consulta si el estado l√≥gico de un operando binario es "1"
y combina el resultado l√≥gicamente con Y con el estado l√≥gico del resultado l√≥gico (RLO). En
este caso, el resultado de la consulta es id√©ntico al estado l√≥gico del operando consultado.
Una vez ejecutada la instrucci√≥n, el RLO es "1" si los dos estados l√≥gicos combinados tambi√©n
son "1". Si uno de los estados l√≥gicos combinados es "0", el RLO ser√° "0" tras ejecutar la
instrucci√≥n.
Si se aplica la instrucci√≥n varias veces consecutivas, todos los resultados de las consultas
deben ser "1" para que el resultado l√≥gico com√∫n tambi√©n sea "1".
Con la instrucci√≥n "Operaci√≥n l√≥gica Y" tambi√©n es posible consultar el estado l√≥gico de la
palabra de estado. Para ello se debe indicar el bit de estado en cuesti√≥n (==0, <>0, >0, <0, >=0,
<=0, OV, OS, UO, BR) como par√°metro de la instrucci√≥n.

5356

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Operaci√≥n l√≥gica Y":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Operando>

Input

BOOL

I, Q, M, D, L, T, C

Operando cuyo estado l√≥gico
se consulta.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
3URJUDPD$:/

(VTXHPDGHFRQH[LRQHVGHUHO¬´
%DUUDGHDOLPHQWDFL¬µQ

$

‡≤Ø7DJB,QSXWB‡≤Ø

(VWDGRO¬µJLFR

&RQWDFWR1$

$

‡≤Ø7DJB,QSXWB‡≤Ø

(VWDGRO¬µJLFR

&RQWDFWR1$

‡≤Ø7DJB2XWSXW‡≤Ø

(VWDGRO¬µJLFR

%RELQD

,QGLFDXQLQWHUUXSWRUFHUUDGR

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en operaciones l√≥gicas con bits (P√°gina 186)
Consultar el bit de estado con instrucciones de operaciones l√≥gicas con bits (P√°gina 195)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Ejemplos de programaci√≥n AWL (P√°gina 8102)

AN: Operaci√≥n l√≥gica Y negada
Descripci√≥n
La instrucci√≥n "Operaci√≥n l√≥gica Y negada" consulta si el estado l√≥gico de un operando binario
es "0" y combinar el resultado l√≥gicamente con Y con el estado l√≥gico del resultado l√≥gico
(RLO). En este caso, el resultado de la consulta es el estado l√≥gico negado del operando
consultado. Si el estado l√≥gico del operando es "0", el resultado de la consulta es "1". Si el
estado l√≥gico del operando es "1", el resultado de la consulta es "0".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5357

Instrucciones
4.2 Instrucciones
Una vez ejecutada la instrucci√≥n, el RLO es "1" si el resultado de la consulta y el RLO antes de
ejecutar la instrucci√≥n devuelven el estado l√≥gico "1".
Una vez ejecutada la instrucci√≥n, el RLO es "0" si el resultado de la consulta o el RLO antes de
ejecutar la instrucci√≥n devuelven el estado l√≥gico "0".
Con la instrucci√≥n "Operaci√≥n l√≥gica Y negada" tambi√©n es posible consultar el estado l√≥gico
de la palabra de estado. Para ello se debe indicar el bit de estado en cuesti√≥n (==0, <>0, >0,
<0, >=0, <=0, OV, OS, UO, BR) como par√°metro de la instrucci√≥n.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Operaci√≥n l√≥gica Y negada":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Operando>

Input

BOOL

I, Q, M, D, L, T, C

Operando cuyo estado l√≥gico
se consulta.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
3URJUDPD$:/

(VTXHPDGHFRQH[LRQHVGHUHO¬´
%DUUDGHDOLPHQWDFL¬µQ

$

‡≤Ø7DJB,QSXWB‡≤Ø

(VWDGRO¬µJLFR

&RQWDFWR1$

$1

‡≤Ø7DJB,QSXWB‡≤Ø

(VWDGRO¬µJLFR

&RQWDFWR1&

‡≤Ø7DJB2XWSXW‡≤Ø

(VWDGRO¬µJLFR

%RELQD

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en operaciones l√≥gicas con bits (P√°gina 186)
Consultar el bit de estado con instrucciones de operaciones l√≥gicas con bits (P√°gina 195)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Ejemplos de programaci√≥n AWL (P√°gina 8102)

5358

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

O: Operaci√≥n l√≥gica O
Descripci√≥n
La instrucci√≥n "Operaci√≥n l√≥gica O" consulta si el estado l√≥gico de un operando binario es "1"
y combina el resultado l√≥gicamente con O con el estado l√≥gico del resultado l√≥gico (RLO). En
este caso, el resultado de la consulta es id√©ntico al estado l√≥gico del operando consultado.
Una vez ejecutada la instrucci√≥n, el RLO es "1" si uno de los estados l√≥gicos combinados
tambi√©n es "1". Si los dos estados l√≥gicos combinados son "0", el RLO ser√° "0" tras ejecutar la
instrucci√≥n.
Si se aplica la instrucci√≥n varias veces consecutivas, basta con que uno de los resultados de
las consultas sea "1" para que el resultado l√≥gico com√∫n tambi√©n sea "1".
Con la instrucci√≥n "Operaci√≥n l√≥gica O" tambi√©n es posible consultar el estado l√≥gico de la
palabra de estado. Para ello se debe indicar el bit de estado en cuesti√≥n (==0, <>0, >0, <0, >=0,
<=0, OV, OS, UO, BR) como par√°metro de la instrucci√≥n.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Operaci√≥n l√≥gica O":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Operando>

Input

BOOL

I, Q, M, D, L, T, C

Operando cuyo estado l√≥gico
se consulta.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
3URJUDPD$:/

(VTXHPDGHFRQH[LRQHVGHUHO¬´
%DUUDGHDOLPHQWDFL¬µQ

2

‡≤Ø7DJB,QSXWB‡≤Ø

2

‡≤Ø7DJB,QSXWB‡≤Ø

‡≤Ø7DJB2XWSXW‡≤Ø

(VWDGRO¬µJLFRFRQWDFWR1$
‡≤Ø7DJB,QSXWB‡≤Ø

(VWDFRO¬µJLFRFRQWDFWR1$
‡≤Ø7DJB,QSXWB‡≤Ø

(VWDGRO¬µJLFR

%RELQD

,QGLFDXQLQWHUUXSWRUFHUUDGR

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5359

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en operaciones l√≥gicas con bits (P√°gina 186)
Consultar el bit de estado con instrucciones de operaciones l√≥gicas con bits (P√°gina 195)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Ejemplos de programaci√≥n AWL (P√°gina 8102)

ON: Operaci√≥n l√≥gica O negada
Descripci√≥n
La instrucci√≥n "Operaci√≥n l√≥gica O negada" consulta si el estado l√≥gico de un operando binario
es "0" y combina el resultado l√≥gicamente con O con el estado l√≥gico del resultado l√≥gico
(RLO). En este caso, el resultado de la consulta es el estado l√≥gico negado del operando
consultado. Si el estado l√≥gico del operando es "0", el resultado de la consulta es "1". Si el
estado l√≥gico del operando es "1", el resultado de la consulta es "0".
Una vez ejecutada la instrucci√≥n, el RLO es "1" si el resultado de la consulta o el RLO antes de
ejecutar la instrucci√≥n devuelven el estado l√≥gico "1". Si los dos estados l√≥gicos combinados
son "0", el RLO tambi√©n ser√° "0" tras ejecutar la instrucci√≥n.
Si se aplica la instrucci√≥n varias veces consecutivas, basta con que uno de los resultados de
las consultas sea "1" para que el resultado l√≥gico com√∫n tambi√©n sea "1".
Con la instrucci√≥n "Operaci√≥n l√≥gica O negada" tambi√©n es posible consultar el estado l√≥gico
de la palabra de estado. Para ello se debe indicar el bit de estado en cuesti√≥n (==0, <>0, >0,
<0, >=0, <=0, OV, OS, UO, BR) como par√°metro de la instrucci√≥n.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Operaci√≥n l√≥gica O negada":

5360

Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Operando>

Input

BOOL

I, Q, M, D, L, T, C

Operando cuyo estado l√≥gico
se consulta

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
3URJUDPD$:/

(VTXHPDGHFRQH[LRQHVGHUHO¬´V
%DUUDGHDOLPHQWDFL¬µQ

2

‡≤Ø7DJB,QSXWB‡≤Ø

(VWDGRO¬µJLFR

21

‡≤Ø7DJB,QSXWB‡≤Ø

(VWDGRO¬µJLFR

&RQWDFWR
QRUPDOPHQWH
FHUUDGR

(VWDGRO¬µJLFR

%RELQD

‡≤Ø7DJB2XWSXW‡≤Ø

&RQWDFWRQRUPDO
PHQWHDELHUWR

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en operaciones l√≥gicas con bits (P√°gina 186)
Consultar el bit de estado con instrucciones de operaciones l√≥gicas con bits (P√°gina 195)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

X: Operaci√≥n l√≥gica O-exclusiva
Descripci√≥n
La instrucci√≥n "Operaci√≥n l√≥gica O-exclusiva" consulta si el estado l√≥gico de un operando
binario es "1" y combinar el resultado l√≥gicamente con O-exclusiva con el estado l√≥gico del
resultado l√≥gico (RLO). En este caso, el resultado de la consulta es id√©ntico al estado l√≥gico del
operando consultado. Una vez ejecutada la instrucci√≥n, el RLO es "1" si los estados l√≥gicos
combinados entre s√≠ son distintos. El RLO es "0" si ambos estados l√≥gicos son id√©nticos.
Si, p. ej., el RLO antes de ejecutar la instrucci√≥n es "1" y el operando consultado devuelve "1",
el RLO se pone a "0". Si el RLO es "1" y el operando devuelve el estado l√≥gico "0", el RLO tras
ejecutar la instrucci√≥n se pondr√° a "1".
Si se aplica la instrucci√≥n varias veces consecutivas, basta con que uno de los resultados de
las consultas sea "1" para que el RLO com√∫n tambi√©n sea "1". Si todos los resultados son "1"
o "0", el RLO se pone a "0".
Con la instrucci√≥n "Operaci√≥n l√≥gica O-exclusiva" tambi√©n es posible consultar el estado l√≥gico
de la palabra de estado. Para ello se debe indicar el bit de estado en cuesti√≥n (==0, <>0, >0,
<0, >=0, <=0, OV, OS, UO, BR) como par√°metro de la instrucci√≥n.
Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5361

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Operaci√≥n l√≥gica O-exclusiva":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Operando>

Input

BOOL

I, Q, M, D, L, T, C

Operando cuyo estado l√≥gico
se consulta.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
3URJUDPD$:/

(VTXHPDGHFRQH[LRQHVGHUHO¬´
%DUUDGHDOLPHQWDFL¬µQ

;

‡≤Ø7DJB,QSXWB‡≤Ø

&RQWDFWR

;

‡≤Ø7DJB,QSXWB‡≤Ø

&RQWDFWR

‡≤Ø7DJB2XWSXW‡≤Ø

%RELQD

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en operaciones l√≥gicas con bits (P√°gina 186)
Consultar el bit de estado con instrucciones de operaciones l√≥gicas con bits (P√°gina 195)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

XN: Operaci√≥n l√≥gica O-exclusiva negada
Descripci√≥n
La instrucci√≥n "Operaci√≥n l√≥gica O-exclusiva negada" consulta si el estado l√≥gico de un
operando binario es "0" y combinar el resultado l√≥gicamente con O con el estado l√≥gico del
resultado l√≥gico (RLO). En este caso, el resultado de la consulta es el estado l√≥gico negado del
operando consultado. Una vez ejecutada la instrucci√≥n, el RLO es "1" si los estados l√≥gicos
combinados entre s√≠ son distintos. El RLO es "0" si ambos estados l√≥gicos son id√©nticos.

5362

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Si, p. ej., el estado l√≥gico del operando consultado es "0", el resultado de la consulta es "1". La
combinaci√≥n l√≥gica con O-exclusiva del resultado de la consulta y un RLO "1" devuelve el
estado l√≥gico "0". La combinaci√≥n con un RLO "0" devuelve el estado l√≥gico "1".
Con la instrucci√≥n "Operaci√≥n l√≥gica O-exclusiva negada" tambi√©n es posible consultar el
estado l√≥gico de la palabra de estado. Para ello se debe indicar el bit de estado en cuesti√≥n
(==0, <>0, >0, <0, >=0, <=0, OV, OS, UO, BR) como par√°metro de la instrucci√≥n.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Operaci√≥n l√≥gica O-exclusiva
negada":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Operando>

Input

BOOL

I, Q, M, D, L, T, C

Operando cuyo estado l√≥gico
se consulta.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
3URJUDPD$:/

(VTXHPDGHFRQH[LRQHVGHUHO¬´
%DUUDGHDOLPHQWDFL¬µQ

;

‡≤Ø7DJB,QSXWB‡≤Ø

&RQWDFWR

;1

‡≤Ø7DJB,QSXWB‡≤Ø

&RQWDFWR

‡≤Ø7DJB2XWSXW‡≤Ø

%RELQD

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en operaciones l√≥gicas con bits (P√°gina 186)
Consultar el bit de estado con instrucciones de operaciones l√≥gicas con bits (P√°gina 195)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5363

Instrucciones
4.2 Instrucciones

O: Operaci√≥n l√≥gica O de funciones Y
Descripci√≥n
La instrucci√≥n "Operaci√≥n l√≥gica O de funciones Y" ejecuta varias operaciones l√≥gicas Y antes
de una operaci√≥n l√≥gica O. El resultado global de las operaciones l√≥gicas Y se guarda y se
combina l√≥gicamente con O con el resultado l√≥gico (RLO) actual as√≠ como con otras posibles
consultas.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
3URJUDPD$:/

(VTXHPDGHFRQH[LRQHVGHUHO¬´
%DUUDGHDOLPHQWDFL¬µQ

$
$

‡≤Ø7DJB,QSXWB‡≤Ø
‡≤Ø7DJB,QSXWB‡≤Ø

2
$
$

‡≤Ø7DJB,QSXWB‡≤Ø
‡≤Ø7DJB,QSXWB‡≤Ø

2

‡≤Ø7DJB,QSXWB‡≤Ø

‡≤Ø7DJB,QSXWB‡≤Ø

‡≤Ø7DJB,QSXWB‡≤Ø

‡≤Ø7DJB,QSXWB‡≤Ø

‡≤Ø7DJB,QSXWB‡≤Ø

‡≤Ø7DJB2XWSXW‡≤Ø

‡≤Ø7DJB,QSXWB‡≤Ø

‡≤Ø7DJB2XWSXW‡≤Ø

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en operaciones l√≥gicas con bits (P√°gina 186)
Consultar el bit de estado con instrucciones de operaciones l√≥gicas con bits (P√°gina 195)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

A(: Operaci√≥n l√≥gica Y con abrir par√©ntesis
Descripci√≥n
La instrucci√≥n "Operaci√≥n l√≥gica Y con abrir par√©ntesis" procesa las instrucciones de una
expresi√≥n entre par√©ntesis antes de una operaci√≥n l√≥gica Y.

5364

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Al ejecutar la instrucci√≥n, la CPU guarda el resultado l√≥gico (RLO) actual as√≠ como el resultado
binario BR y el bit de estado OR. El RLO guardado se combina l√≥gicamente con Y con el
resultado l√≥gico de toda la expresi√≥n entre par√©ntesis. Si a la expresi√≥n entre par√©ntesis le
siguen otras consultas, tambi√©n se combinan con la funci√≥n Y.
Las expresiones entre par√©ntesis se anidan programando en ellas una instrucci√≥n que tambi√©n
contenga una expresi√≥n entre par√©ntesis. La profundidad de anidamiento est√° limitada a 7
niveles.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
3URJUDPD$:/

(VTXHPDGHFRQH[LRQHVGHUHO¬´
%DUUDGHDOLPHQWDFL¬µQ

$
2
2

‡≤Ø7DJB,QSXWB‡≤Ø
‡≤Ø7DJB,QSXWB‡≤Ø

$
2
2

‡≤Ø7DJB,QSXWB‡≤Ø
‡≤Ø7DJB,QSXWB‡≤Ø

$

‡≤Ø7DJB,QSXWB‡≤Ø

‡≤Ø7DJB,QSXWB‡≤Ø

‡≤Ø7DJB,QSXWB‡≤Ø

‡≤Ø7DJB,QSXWB‡≤Ø

‡≤Ø7DJB,QSXWB‡≤Ø

‡≤Ø7DJB,QSXWB‡≤Ø

‡≤Ø7DJB2XWSXW‡≤Ø

‡≤Ø7DJB2XWSXW‡≤Ø

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en operaciones l√≥gicas con bits (P√°gina 186)
Consultar el bit de estado con instrucciones de operaciones l√≥gicas con bits (P√°gina 195)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

AN(: Operaci√≥n l√≥gica Y negada con abrir par√©ntesis
Descripci√≥n
La instrucci√≥n "Operaci√≥n l√≥gica Y negada con abrir par√©ntesis" procesa las instrucciones de
una expresi√≥n entre par√©ntesis antes de una operaci√≥n l√≥gica Y y negar el resultado global de
la expresi√≥n entre par√©ntesis.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5365

Instrucciones
4.2 Instrucciones
Al ejecutar la instrucci√≥n, la CPU guarda el resultado l√≥gico (RLO) actual as√≠ como el resultado
binario BR y el bit de estado OR. Despu√©s de procesar las instrucciones que est√°n en la
expresi√≥n entre par√©ntesis, el RLO de toda la expresi√≥n entre par√©ntesis se niega y se combina
l√≥gicamente con Y con el RLO guardado. Si a la expresi√≥n entre par√©ntesis le siguen otras
consultas, tambi√©n se combinan con la instrucci√≥n Y.
Las expresiones entre par√©ntesis se anidan programando en ellas una instrucci√≥n que tambi√©n
contenga una expresi√≥n entre par√©ntesis. La profundidad de anidamiento est√° limitada a 7
niveles.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

AN(

// Principio de la expresi√≥n entre par√©ntesis
// Combinar l√≥gicamente con Y el RLO de la expresi√≥n
entre par√©ntesis y negar el resultado global.

O "Tag_Input_1"

// Consultar si el estado l√≥gico del operando es "1" y
combinar el resultado l√≥gicamente con O con el RLO actual.

O "Tag_Input_2"

// Consultar si el estado l√≥gico del operando es "1" y
combinar el resultado l√≥gicamente con O con el RLO actual.

)

// Fin de la expresi√≥n entre par√©ntesis

AN "Tag_Input_3"

// Consultar si el estado l√≥gico del operando es "0" y
combinar el resultado l√≥gicamente con Y con el RLO actual.

= "Tag_Output"

// Asignar el estado l√≥gico del RLO al operando.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en operaciones l√≥gicas con bits (P√°gina 186)
Consultar el bit de estado con instrucciones de operaciones l√≥gicas con bits (P√°gina 195)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

O(: Operaci√≥n l√≥gica O con abrir par√©ntesis
Descripci√≥n
La instrucci√≥n "Operaci√≥n l√≥gica O con abrir par√©ntesis" procesa las instrucciones de una
expresi√≥n entre par√©ntesis antes de una operaci√≥n l√≥gica O.
Al ejecutar la instrucci√≥n, la CPU guarda el resultado l√≥gico (RLO) actual as√≠ como el resultado
binario BR y el bit de estado OR. Despu√©s de procesar las instrucciones que est√°n en la

5366

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
expresi√≥n entre par√©ntesis, el RLO guardado se combina l√≥gicamente con O con el RLO de
toda la expresi√≥n entre par√©ntesis. Si a la expresi√≥n entre par√©ntesis le siguen otras consultas,
tambi√©n se combinan con la instrucci√≥n O.
Las expresiones entre par√©ntesis se anidan programando en ellas una instrucci√≥n que tambi√©n
contenga una expresi√≥n entre par√©ntesis. La profundidad de anidamiento est√° limitada a 7
niveles.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

A "Tag_Input_1"

// Consultar si el estado l√≥gico del operando es "1" y
combinar el resultado l√≥gicamente con Y con el RLO actual.

O(

// Principio de la expresi√≥n entre par√©ntesis
// Combinar l√≥gicamente con O el RLO de la expresi√≥n
entre par√©ntesis.

A "Tag_Input_2"

// Consultar si el estado l√≥gico del operando es "1" y
combinar el resultado l√≥gicamente con Y con el RLO actual.

A "Tag_Input_3"

// Consultar si el estado l√≥gico del operando es "1" y
combinar el resultado l√≥gicamente con Y con el RLO actual.

)

// Fin de la expresi√≥n entre par√©ntesis

= "Tag_Output"

// Asignar el estado l√≥gico del RLO al operando.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en operaciones l√≥gicas con bits (P√°gina 186)
Consultar el bit de estado con instrucciones de operaciones l√≥gicas con bits (P√°gina 195)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

ON(: Operaci√≥n l√≥gica O negada con abrir par√©ntesis
Descripci√≥n
La instrucci√≥n "Operaci√≥n l√≥gica O negada con abrir par√©ntesis" procesa las instrucciones de
una expresi√≥n entre par√©ntesis antes de una operaci√≥n l√≥gica O y negar el resultado global de
la expresi√≥n entre par√©ntesis.
Al ejecutar la instrucci√≥n, la CPU guarda el resultado l√≥gico (RLO) actual as√≠ como el resultado
binario BR y el bit de estado OR. Despu√©s de procesar las instrucciones que est√°n en la
expresi√≥n entre par√©ntesis, el RLO de la expresi√≥n entre par√©ntesis se niega y se combina
Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5367

Instrucciones
4.2 Instrucciones
l√≥gicamente con O con el RLO guardado. Si a la expresi√≥n entre par√©ntesis le siguen otras
consultas, tambi√©n se combinan con la instrucci√≥n O.
Las expresiones entre par√©ntesis se anidan programando en ellas una instrucci√≥n que tambi√©n
contenga una expresi√≥n entre par√©ntesis. La profundidad de anidamiento est√° limitada a 7
niveles.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

A "Tag_Input_1"

// Consultar si el estado l√≥gico del operando es "1" y
combinar el resultado l√≥gicamente con Y con el RLO actual.

ON(

// Principio de la expresi√≥n entre par√©ntesis
// Combinar l√≥gicamente con O el RLO de la expresi√≥n
entre par√©ntesis y negar el resultado global.

A "Tag_Input_2"

// Consultar si el estado l√≥gico del operando es "1" y
combinar el resultado l√≥gicamente con Y con el RLO actual.

A "Tag_Input_3"

// Consultar si el estado l√≥gico del operando es "1" y
combinar el resultado l√≥gicamente con Y con el RLO actual.

)

// Fin de la expresi√≥n entre par√©ntesis

= "Tag_Output"

// Asignar el estado l√≥gico del RLO al operando.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en operaciones l√≥gicas con bits (P√°gina 186)
Consultar el bit de estado con instrucciones de operaciones l√≥gicas con bits (P√°gina 195)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

X(: Operaci√≥n l√≥gica O-exclusiva con abrir par√©ntesis
Descripci√≥n
La instrucci√≥n "Operaci√≥n l√≥gica O-exclusiva con abrir par√©ntesis" procesa las instrucciones
de una expresi√≥n entre par√©ntesis antes de una operaci√≥n l√≥gica O-exclusiva.
Al ejecutar la instrucci√≥n, la CPU guarda el resultado l√≥gico (RLO) actual as√≠ como el resultado
binario BR y el bit de estado OR. Despu√©s de procesar las instrucciones que est√°n en la
expresi√≥n entre par√©ntesis, el RLO guardado se combina l√≥gicamente con O-exclusiva con el
RLO de toda la expresi√≥n entre par√©ntesis. Si a la expresi√≥n entre par√©ntesis le siguen otras
consultas, tambi√©n se combinan con la funci√≥n O-exclusiva.

5368

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Las expresiones entre par√©ntesis se anidan programando en ellas una instrucci√≥n que tambi√©n
contenga una expresi√≥n entre par√©ntesis. La profundidad de anidamiento est√° limitada a 7
niveles.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

X(

// Principio de la expresi√≥n entre par√©ntesis
// Combinar l√≥gicamente con O-exclusiva el RLO de la
expresi√≥n entre par√©ntesis.

A "Tag_Input_1"

// Consultar si el estado l√≥gico del operando es "1" y
combinar el resultado l√≥gicamente con Y con el RLO actual.

A "Tag_Input_2"

// Consultar si el estado l√≥gico del operando es "1" y
combinar el resultado l√≥gicamente con Y con el RLO actual.

)

// Fin de la expresi√≥n entre par√©ntesis

X "Tag_Input_3"

// Consultar si el estado l√≥gico del operando es "1" y
combinar el resultado l√≥gicamente con Y con el RLO actual.

= "Tag_Output"

// Asignar el estado l√≥gico del RLO al operando.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en operaciones l√≥gicas con bits (P√°gina 186)
Consultar el bit de estado con instrucciones de operaciones l√≥gicas con bits (P√°gina 195)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

XN(: Operaci√≥n l√≥gica O-exclusiva negada con abrir par√©ntesis
Descripci√≥n
La instrucci√≥n "Operaci√≥n l√≥gica O-exclusiva negada con abrir par√©ntesis" procesa las
instrucciones de una expresi√≥n entre par√©ntesis antes de una operaci√≥n l√≥gica O-exclusiva y
negar el resultado global de la expresi√≥n entre par√©ntesis.
Al ejecutar la instrucci√≥n, la CPU guarda el resultado l√≥gico (RLO) actual as√≠ como el resultado
binario BR y el bit de estado OR. Despu√©s de procesar las instrucciones que est√°n en la
expresi√≥n entre par√©ntesis, el RLO de la expresi√≥n entre par√©ntesis se niega y se combina
l√≥gicamente con O-exclusiva con el RLO guardado. Si a la expresi√≥n entre par√©ntesis le siguen
otras consultas, tambi√©n se combinan con la funci√≥n O-exclusiva.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5369

Instrucciones
4.2 Instrucciones
Las expresiones entre par√©ntesis se anidan programando en ellas una instrucci√≥n que tambi√©n
contenga una expresi√≥n entre par√©ntesis. La profundidad de anidamiento est√° limitada a 7
niveles.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

XN(

// Principio de la expresi√≥n entre par√©ntesis
// Combinar l√≥gicamente con O-exclusiva el RLO de la
expresi√≥n entre par√©ntesis y negar el resultado global.

A "Tag_Input_1"

// Consultar si el estado l√≥gico del operando es "1" y
combinar el resultado l√≥gicamente con Y con el RLO actual.

A "Tag_Input_2"

// Consultar si el estado l√≥gico del operando es "1" y
combinar el resultado l√≥gicamente con Y con el RLO actual.

)

// Fin de la expresi√≥n entre par√©ntesis

XN "Tag_Input_3"

// Consultar si el estado l√≥gico del operando es "1" y
combinar el resultado l√≥gicamente con Y con el RLO actual.

= "Tag_Output"

// Asignar el estado l√≥gico del RLO al operando.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en operaciones l√≥gicas con bits (P√°gina 186)
Consultar el bit de estado con instrucciones de operaciones l√≥gicas con bits (P√°gina 195)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

): Cerrar par√©ntesis
Descripci√≥n
La instrucci√≥n "Cerrar par√©ntesis" determina el final de una expresi√≥n entre par√©ntesis. Tras
ejecutar la instrucci√≥n, el resultado global de la expresi√≥n entre par√©ntesis se combina
l√≥gicamente con la instrucci√≥n que se ha utilizado para abrir la expresi√≥n entre par√©ntesis.
Para abrir una expresi√≥n entre par√©ntesis se utilizan las instrucciones siguientes:
‚óè A(: Operaci√≥n l√≥gica Y con abrir par√©ntesis
‚óè AN(: Operaci√≥n l√≥gica Y negada con abrir par√©ntesis
‚óè O(: Operaci√≥n l√≥gica O con abrir par√©ntesis

5370

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
‚óè ON(: Operaci√≥n l√≥gica O negada con abrir par√©ntesis
‚óè X(: Operaci√≥n l√≥gica O-exclusiva con abrir par√©ntesis
‚óè XN(: Operaci√≥n l√≥gica O-exclusiva negada con abrir par√©ntesis
Despu√©s de la instrucci√≥n "Cerrar par√©ntesis", la CPU pone el resultado binario BR al estado
l√≥gico que ten√≠a antes de la expresi√≥n entre par√©ntesis.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
3URJUDPD$:/

(VTXHPDGHFRQH[LRQHVGHUHO¬´
%DUUDGHDOLPHQWDFL¬µQ

$
2
2

‡≤Ø7DJB,QSXWB‡≤Ø
‡≤Ø7DJB,QSXWB‡≤Ø

$
2
2

‡≤Ø7DJB,QSXWB‡≤Ø
‡≤Ø7DJB,QSXWB‡≤Ø

$

‡≤Ø7DJB,QSXWB‡≤Ø

‡≤Ø7DJB,QSXWB‡≤Ø

‡≤Ø7DJB,QSXWB‡≤Ø

‡≤Ø7DJB,QSXWB‡≤Ø

‡≤Ø7DJB,QSXWB‡≤Ø

‡≤Ø7DJB,QSXWB‡≤Ø

‡≤Ø7DJB2XWSXW‡≤Ø

‡≤Ø7DJB2XWSXW‡≤Ø

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en operaciones l√≥gicas con bits (P√°gina 186)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Consultar el bit de estado en AWL (P√°gina 195)

=: Asignaci√≥n
Descripci√≥n
La instrucci√≥n "Asignaci√≥n" asigna a un operando concreto el estado l√≥gico del resultado
l√≥gico (RLO) guardado en la CPU. Si el RLO tiene el estado l√≥gico "1", se activa el operando.
Si el estado l√≥gico de la entrada es "0", el operando se pone a "0".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5371

Instrucciones
4.2 Instrucciones
La ejecuci√≥n de la instrucci√≥n "Asignaci√≥n" se ve influida por el Master Control Relay (MCR).
Si el bit MCR se pone a "0", el operando indicado adopta el valor "0".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Asignaci√≥n":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Operando>

Output

BOOL

I, Q, M, D, L

Operando al que se asigna el
RLO actual.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
3URJUDPD$:/
$

(VTXHPDGHFRQH[LRQHVGHUHO¬´
%DUUDGHDOLPHQWDFL¬µQ

‡≤Ø7DJB,QSXW‡≤Ø
‡≤±7DJB2XWSXW‡≤Ø

‡≤Ø7DJB,QSXW‡≤Ø

'LDJUDPDVGHHVWDGRVO¬µJLFRV
‡≤Ø7DJB,QSXW‡≤Ø




‡≤Ø7DJB2XWSXW‡≤Ø






‡≤Ø7DJB2XWSXW‡≤Ø

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
El MCR (Master Control Relay) (P√°gina 203)
Indicaciones importantes sobre el uso de la funci√≥n MCR (P√°gina 204)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en operaciones l√≥gicas con bits (P√°gina 186)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Ejemplos de programaci√≥n AWL (P√°gina 8102)

R: Desactivar
Descripci√≥n
La instrucci√≥n "Desactivar" pone a "0" el estado l√≥gico de un operando concreto.

5372

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
La instrucci√≥n solo se ejecuta si el resultado l√≥gico (RLO) actual es "1". Tras ejecutar la
instrucci√≥n, el operando indicado se pone a "0". Si el RLO actual es "0", el estado l√≥gico del
operando indicado no cambia.
La ejecuci√≥n de la instrucci√≥n "Desactivar" se ve influida por el Master Control Relay (MCR).
Si el bit MCR est√° puesto a "0", el estado l√≥gico del operando indicado no cambia.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Desactivar":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Operando>

Output

BOOL

I, Q, M, D, L

Operando que se desactiva
si el RLO = "1".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

A "Tag_Input_1"

// Consultar si el estado l√≥gico del operando es "1" y
combinar el resultado l√≥gicamente con Y con el RLO actual.

A "Tag_Input_2"

// Consultar si el estado l√≥gico del operando es "1" y
combinar el resultado l√≥gicamente con Y con el RLO actual.

R "Tag_Output"

// Poner el operando a "0" si el RLO = "1".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
El MCR (Master Control Relay) (P√°gina 203)
Indicaciones importantes sobre el uso de la funci√≥n MCR (P√°gina 204)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en operaciones l√≥gicas con bits (P√°gina 186)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Ejemplos de programaci√≥n AWL (P√°gina 8102)

S: Activar
Descripci√≥n
La instrucci√≥n "Activar" pone a "1" el estado l√≥gico de un operando concreto.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5373

Instrucciones
4.2 Instrucciones
La instrucci√≥n solo se ejecuta si el resultado l√≥gico (RLO) actual es "1". Tras ejecutar la
instrucci√≥n, el operando indicado se pone a "1". Si el RLO actual es "0", el estado l√≥gico del
operando indicado no cambia.
La ejecuci√≥n de la instrucci√≥n "Activar" se ve influida por el Master Control Relay (MCR). Si el
bit MCR est√° puesto a "0", el estado l√≥gico del operando indicado no cambia.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Activar":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Operando>

Output

BOOL

I, Q, M, D, L

Operando que se activa si el
RLO = "1".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

A "Tag_Input_1"

// Consultar si el estado l√≥gico del operando es "1" y
combinar el resultado l√≥gicamente con Y con el RLO actual.

A "Tag_Input_2"

// Consultar si el estado l√≥gico del operando es "1" y
combinar el resultado l√≥gicamente con Y con el RLO actual.

S "Tag_Output"

// Poner el operando a "1" si el RLO = "1".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
El MCR (Master Control Relay) (P√°gina 203)
Indicaciones importantes sobre el uso de la funci√≥n MCR (P√°gina 204)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en operaciones l√≥gicas con bits (P√°gina 186)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Ejemplos de programaci√≥n AWL (P√°gina 8102)

NOT: Invertir RLO
Descripci√≥n
La instrucci√≥n "Invertir RLO" invierte el estado l√≥gico del resultado l√≥gico (RLO). La instrucci√≥n
"Invertir RLO" puede aplicarse en cualquier posici√≥n, incluso dentro de una operaci√≥n l√≥gica.

5374

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

A "Tag_Input_1"

// Consultar si el estado l√≥gico del operando "Tag_Input_1" es "1" y combinar el resultado l√≥gicamente con
Y con el RLO actual.

A "Tag_Input_2"

// Consultar si el estado l√≥gico del operando "Tag_Input_2" es "1" y combinar el resultado l√≥gicamente con
Y con el RLO actual.

A "Tag_Input_3"

// Consultar si el estado l√≥gico del operando "Tag_Input_3" es "1" y combinar el resultado l√≥gicamente con
Y con el RLO actual.

NOT

// Invertir el estado l√≥gico del RLO

= "Tag_Output"

// Asignar el estado l√≥gico del RLO al operando
"Tag_Output".

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Input_1

1

1

1

0

0

0

1

0

Tag_Input_2

0

1

1

0

1

1

0

1

Tag_Input_3

0

0

1

0

0

1

1

1

Tag_Output

1

1

0

1

1

1

1

1

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en operaciones l√≥gicas con bits (P√°gina 186)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

SET: Poner RLO a 1
Descripci√≥n
La instrucci√≥n "Poner RLO a 1" pone el resultado l√≥gico (RLO) actual al estado l√≥gico "1".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5375

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
3URJUDPD$:/

(VWDGRO¬µJLFR

5HVXOWDGRO¬µJLFR 5/2

6(7

‡≤Ø7DJB2XWSXWB‡≤Ø
‡≤Ø7DJB2XWSXWB‡≤Ø
‡≤Ø7DJB2XWSXWB‡≤Ø







&/5

‡≤Ø7DJB2XWSXWB‡≤Ø
‡≤Ø7DJB2XWSXWB‡≤Ø






Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en operaciones l√≥gicas con bits (P√°gina 186)

CLR: Poner RLO a 0
Descripci√≥n
La instrucci√≥n "Poner RLO a 0" pone el resultado l√≥gico (RLO) actual al estado l√≥gico "0".

5376

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
3URJUDPD$:/

(VWDGRO¬µJLFR

5HVXOWDGRO¬µJLFR 5/2

6(7

‡≤Ø7DJB2XWSXWB‡≤Ø
‡≤Ø7DJB2XWSXWB‡≤Ø
‡≤Ø7DJB2XWSXWB‡≤Ø







&/5

‡≤Ø7DJB2XWSXWB‡≤Ø
‡≤Ø7DJB2XWSXWB‡≤Ø






Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en operaciones l√≥gicas con bits (P√°gina 186)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

SAVE: Guardar RLO en bit BR
Descripci√≥n
La instrucci√≥n "Guardar RLO en bit BR" guarda el resultado l√≥gico (RLO) en el resultado binario
(BR). Durante la ejecuci√≥n, la instrucci√≥n transfiere el estado l√≥gico del resultado l√≥gico actual
al bit de estado BR. La instrucci√≥n trabaja independientemente de las condiciones y no influye
en ning√∫n otro bit de estado.
Nota
Tras aplicar la instrucci√≥n "Guardar RLO en bit BR", el bit BR puede ser modificado
nuevamente por instrucciones posteriores del mismo bloque o de bloques de nivel inferior.
La instrucci√≥n "Guardar RLO en bit BR" tambi√©n se utiliza para controlar el estado de ejecuci√≥n
de un bloque. Si, p. ej., la instrucci√≥n "Guardar RLO en bit BR" se aplica al final de un bloque,
el bit BR se pone al estado l√≥gico del resultado l√≥gico actual del bloque.
El bit BR ayuda a la realizaci√≥n del mecanismo EN/ENO en llamadas de bloques. Encontrar√°
m√°s informaci√≥n al respecto en "Consulte tambi√©n".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5377

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

A "Tag_Input"

// Consultar si el estado l√≥gico del operando "Tag_Input" es "1".

SAVE

// Transferir el estado l√≥gico del RLO al bit BR.

BEC

// Si el RLO = "1", finalizar el bloque.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en operaciones l√≥gicas con bits (P√°gina 186)
Ejemplo de la emulaci√≥n del mecanismo EN/ENO en AWL (P√°gina 165)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

FN: Consultar flanco de se√±al descendente del RLO
Descripci√≥n
La instrucci√≥n "Consultar flanco de se√±al descendente del RLO" permite detectar si el estado
l√≥gico del resultado l√≥gico (RLO) ha cambiado de "1" a "0". La instrucci√≥n compara el estado
l√≥gico actual del RLO con el estado l√≥gico de la consulta anterior, que est√° guardado en la
marca de flancos <Operando>. Si la instrucci√≥n detecta un cambio del RLO de "1" a "0",
significa que hay un flanco de se√±al descendente.
La figura siguiente muestra el cambio del RLO en caso de flanco de se√±al descendente y
ascendente:
)ODQFRGHVH¬≥DODVFHQGHQWH

)ODQFRGHVH¬≥DOGHVFHQGHQWH

5/2



7HPSRUL]DGRU

El flanco de se√±al descendente se consulta cada vez que se ejecuta la instrucci√≥n. Si se
detecta un flanco de se√±al descendente, tras la evaluaci√≥n del flanco el RLO adopta el estado

5378

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
l√≥gico "1" durante un ciclo del programa. En todos los dem√°s casos, el estado l√≥gico del RLO
es "0".
Nota
Uso de la direcci√≥n de la marca de flancos
La direcci√≥n de la marca de flancos no se puede utilizar m√°s de una vez en el programa, puesto
que, de lo contrario, se sobrescribe el bit de marcas. Esto influye negativamente en la
evaluaci√≥n de flancos, de manera que el resultado deja de ser un√≠voco. El √°rea de memoria de
la marca de flancos debe estar en un bloque de datos (√°rea 'Static' de FB) o en el √°rea de
marcas.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Consultar flanco de se√±al
descendente del RLO":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Operando>

Output

BOOL

I, Q, M, D, L

Marca de flancos en la que
se almacena el RLO de la
consulta anterior.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
3URJUDPD$:/

'LDJUDPDVGHHVWDGRVO¬µJLFRV

‡≤Ø7DJB,QSXW‡≤Ø

‡≤Ø7DJB,QSXW‡≤Ø




)1 ‡≤Ø7DJB(GJH‡≤Ø

‡≤Ø7DJB(GJH‡≤Ø




‡≤Ø7DJB2XWSXW‡≤Ø




$

‡≤Ø7DJB2XWSXW‡≤Ø
1|GHFLFORGHO2%



















Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en operaciones l√≥gicas con bits (P√°gina 186)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5379

Instrucciones
4.2 Instrucciones
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

FP: Consultar flanco de se√±al ascendente del RLO
Descripci√≥n
La instrucci√≥n "Consultar flanco de se√±al ascendente del RLO" permite detectar si el estado
l√≥gico del resultado l√≥gico (RLO) ha cambiado de "0" a "1". La instrucci√≥n compara el estado
l√≥gico actual del RLO con el estado l√≥gico de la consulta anterior, que est√° guardado en la
marca de flancos <Operando>. Si la instrucci√≥n detecta un cambio del RLO de "0" a "1",
significa que hay un flanco de se√±al ascendente.
La figura siguiente muestra el cambio del RLO en caso de flanco de se√±al descendente y
ascendente:
)ODQFRGHVH¬≥DODVFHQGHQWH

)ODQFRGHVH¬≥DOGHVFHQGHQWH

5/2



7HPSRUL]DGRU

El flanco de se√±al ascendente se consulta cada vez que se ejecuta la instrucci√≥n. Si se detecta
un flanco de se√±al ascendente, tras la evaluaci√≥n del flanco el RLO adopta el estado l√≥gico "1"
durante un ciclo del programa. En todos los dem√°s casos, el estado l√≥gico del RLO es "0".
Nota
Uso de la direcci√≥n de la marca de flancos
La direcci√≥n de la marca de flancos no se puede utilizar m√°s de una vez en el programa, puesto
que, de lo contrario, se sobrescribe el bit de marcas. Esto influye negativamente en la
evaluaci√≥n de flancos, de manera que el resultado deja de ser un√≠voco. El √°rea de memoria de
la marca de flancos debe estar en un bloque de datos (√°rea 'Static' de FB) o en el √°rea de
marcas.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Consultar flanco de se√±al
ascendente del RLO":

5380

Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Operando>

Output

BOOL

I, Q, M, D, L

Marca de flancos en la que
se almacena el RLO de la
consulta anterior.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
3URJUDPD$:/

'LDJUDPDVGHHVWDGRVO¬µJLFRV

‡≤Ø7DJB,QSXW‡≤Ø

‡≤Ø7DJB,QSXW‡≤Ø




)3 ‡≤Ø7DJB(GJH‡≤Ø

‡≤Ø7DJB(GJH‡≤Ø




‡≤Ø7DJB2XWSXW‡≤Ø




$

‡≤Ø7DJB2XWSXW‡≤Ø
1|GHFLFORGHO2%



















Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en operaciones l√≥gicas con bits (P√°gina 186)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Ejemplos de programaci√≥n AWL (P√°gina 8102)

Temporizadores
FR: Habilitar temporizador
Descripci√≥n
La instrucci√≥n "Habilitar temporizador" provoca el rearranque de un temporizador. La
instrucci√≥n se ejecuta con un flanco de se√±al ascendente y desactiva la marca de flancos
interna para arrancar un temporizador. Al procesar una instrucci√≥n para arrancar el
temporizador con un resultado l√≥gico "1", el temporizador arranca de nuevo, aunque no haya
ning√∫n flanco de se√±al ascendente antes de la instrucci√≥n de arranque. Si el resultado l√≥gico
es "0" antes de una instrucci√≥n de arranque, la desactivaci√≥n de la marca de flancos interna no
influye en el temporizador.
Un cambio del resultado l√≥gico a "0" antes de la instrucci√≥n "Habilitar temporizador" no tiene
repercusi√≥n una vez rearrancado el temporizador.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5381

Instrucciones
4.2 Instrucciones
En el acumulador 1 debe haber un valor de tiempo v√°lido en formato S5TIME, aunque al
procesar una funci√≥n de arranque no se inicie el temporizador.
Nota
En la c√©lula de temporizaci√≥n, el sistema operativo reduce el valor de tiempo en una unidad
respectivamente, y en un intervalo definido por la base de tiempo, hasta que el valor de tiempo
sea "0". La reducci√≥n se realiza de modo as√≠ncrono respecto al programa de usuario. De este
modo el tiempo resultante es menor que el valor de tiempo deseado, como m√°ximo hasta un
intervalo de la base de tiempo.
Encontrar√° un ejemplo de la estructura de una c√©lula de temporizaci√≥n en: Consulte tambi√©n
"L: Cargar valor del temporizador".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Habilitar temporizador":
Operando

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Temporiza‚Äê
dor>

Input

TIMER

T

Temporizador que se habilita

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:

5382

AWL

Explicaci√≥n

A "Tag_EnableInput"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

FR "MyTimer"

// Habilitar temporizador con un flanco de se√±al ascendente.

A "Tag_StartInput"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

L S5T#10s

// Cargar tiempo (10 s)

SP "MyTimer"

// Arrancar temporizador como impulso cuando haya un
flanco de se√±al ascendente en el operando "Tag_StartInput" o en el operando "Tag_EnableInput" y el operando "Tag_StartInput" devuelva el estado l√≥gico "1".

A "Tag_Reset"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

R "MyTimer"

// Si el RLO es "1", inicializar temporizador.

A "MyTimer"

// Consultar si el estado del temporizador es "1".

= "Tag_TimerStatus"

// Asignar el estado del temporizador al operando.

L "MyTimer"

// Cargar el valor actual del temporizador en el acumulador 1.

T "Tag_TimerValue"

// Transferir el valor actual del temporizador al operando "Tag_TimerValue".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Activar el bit de estado en instrucciones de temporizaci√≥n y contaje (P√°gina 188)
Principios b√°sicos de la palabra de estado (P√°gina 184)
L: Cargar valor del temporizador (P√°gina 5383)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

L: Cargar valor del temporizador
Descripci√≥n
La instrucci√≥n "Cargar valor del temporizador" carga el valor de un temporizador concreto en
el acumulador 1. El valor del temporizador en c√≥digo dual se carga sin base de tiempo. En lugar
de la base de tiempo se escriben ceros en el acumulador 1.
Despu√©s de la carga, el valor que est√° en el acumulador 1 equivale a un n√∫mero positivo del
tipo de datos INT.
Nota
En la c√©lula de temporizaci√≥n, el sistema operativo reduce el valor de tiempo en una unidad
respectivamente, y en un intervalo definido por la base de tiempo, hasta que el valor de tiempo
sea "0". La reducci√≥n se realiza de modo as√≠ncrono respecto al programa de usuario. De este
modo el tiempo resultante es menor que el valor de tiempo deseado, como m√°ximo hasta un
intervalo de la base de tiempo.
La figura siguiente muestra, a modo de ejemplo, c√≥mo se carga en valor del temporizador en
el acumulador:
3DODEUDGH
WHPSRUL]DGRUSDUD
HOWHPSRUL]DGRU7
HQODPHPRULD

&RQWHQLGRGHOD
SDODEUDGHUHFKD
GHO
DFXPXODGRU
GHVSX¬´VGHOD
LQVWUXFFL¬µQ /7

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

   

%DVHGHWLHPSR
 PV
 PV
 V
 V

9DORUGHWLHPSR D 
FRGLILFDGRHQELQDULR
/7

   
7RGRV‡≤Ø‡≤Ø





9DORUGHWLHPSR D FRGLILFDGRHQ
ELQDULR

5383

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Cargar valor del temporizador":
Operando

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Temporiza‚Äê
dor>

Input

TIMER

T

Temporizador cuyo valor ac‚Äê
tual se carga

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

A "Tag_EnableInput"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

FR "MyTimer"

// Habilitar temporizador con un flanco de se√±al ascendente.

A "Tag_StartInput"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

L S5T#10s

// Cargar tiempo (10 s)

SP "MyTimer"

// Arrancar temporizador como impulso cuando haya un
flanco de se√±al ascendente en el operando "Tag_StartInput" o en el operando "Tag_EnableInput" y el operando "Tag_StartInput" devuelva el estado l√≥gico "1".

A "Tag_Reset"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

R "MyTimer"

// Si el RLO es "1", inicializar temporizador.

A "MyTimer"

// Consultar si el estado del temporizador es "1".

= "Tag_TimerStatus"

// Asignar el estado del temporizador al operando.

L "MyTimer"

// Cargar el valor actual del temporizador en el acumulador 1.

T "Tag_TimerValue"

// Transferir el valor actual del temporizador al operando "Tag_TimerValue".

Consulte tambi√©n
Activar el bit de estado en instrucciones de temporizaci√≥n y contaje (P√°gina 188)
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

5384

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

LC: Cargar valor del temporizador codificado en BCD
Descripci√≥n
La instrucci√≥n "Cargar valor del temporizador codificado en BCD" carga el valor de un
temporizador concreto en c√≥digo dual en el acumulador 1 en formato BCD. Durante la carga
tambi√©n se transfiere la base de tiempo al acumulador 1.
Despu√©s de la carga, el valor que est√° en el acumulador 1 equivale a una duraci√≥n en formato
S5TIME. La palabra izquierda del acumulador 1 se rellena con ceros.
Nota
En la c√©lula de temporizaci√≥n, el sistema operativo reduce el valor de tiempo en una unidad
respectivamente, y en un intervalo definido por la base de tiempo, hasta que el valor de tiempo
sea "0". La reducci√≥n se realiza de modo as√≠ncrono respecto al programa de usuario. De este
modo el tiempo resultante es menor que el valor de tiempo deseado, como m√°ximo hasta un
intervalo de la base de tiempo.
La figura siguiente muestra c√≥mo se carga en valor del temporizador en el acumulador:
3DODEUDGHWHPSRUL]
DGRUSDUDHO
WHPSRUL]DGRU7
HQODPHPRULD

   

%DVHGHWLHPSR
 PV
 PV
 V
 V



9DORUGHWLHPSR  
HQFRGLILFDFL¬µQELQDULD
/&7
%LQDULRHQ%&'

&RQWHQLGRGHOD
SDODEUDGHUHFKDGHO  
DFXPXODGRU
   
GHVSX¬´VGHOD
LQVWUXFFL¬µQ
 FHQWHQDV
GHFHQDV
/&7


 XQLGDGHV

9DORUGHWLHPSRHQIRUPDWR%&'

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Cargar valor del temporizador
codificado en BCD":
Operando

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Temporiza‚Äê
dor>

Input

TIMER

T

Temporizador cuyo valor ac‚Äê
tual se carga codificado en
BCD

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5385

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

A "Tag_EnableInput"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

FR "MyTimer"

// Habilitar temporizador con un flanco de se√±al ascendente.

A "Tag_StartInput"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

L S5T#10s

// Cargar tiempo (10 s)

SP "MyTimer"

// Arrancar temporizador como impulso cuando haya un
flanco de se√±al ascendente en el operando "Tag_StartInput" o en el operando "Tag_EnableInput" y el operando "Tag_StartInput" devuelva el estado l√≥gico "1".

A "Tag_Reset"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

R "MyTimer"

// Si el RLO es "1", inicializar temporizador.

A "MyTimer"

// Consultar si el estado del temporizador es "1".

= "Tag_TimerStatus"

// Asignar el estado del temporizador al operando.

LC "MyTimer"

// Cargar el valor actual del temporizador codificado
en BCD en el acumulador 1.

T "Tag_TimerValue"

// Transferir el valor actual del temporizador al operando "Tag_TimerValue".

Consulte tambi√©n
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en instrucciones de temporizaci√≥n y contaje (P√°gina 188)
Vista general de los tipos de datos v√°lidos (P√°gina 241)
L: Cargar valor del temporizador (P√°gina 5383)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

5386

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

R: Inicializar temporizador
Descripci√≥n
La instrucci√≥n "Inicializar temporizador" pone a "0" un temporizador concreto. La instrucci√≥n se
ejecuta si el resultado l√≥gico (RLO) actual es "1". Mientras el RLO "1" est√© pendiente antes de
la instrucci√≥n, el temporizador indicado dar√° el valor "0". La instrucci√≥n tambi√©n pone a "0" el
valor del temporizador y la base de tiempo de la duraci√≥n programada.
Nota
En la c√©lula de temporizaci√≥n, el sistema operativo reduce el valor de tiempo en una unidad
respectivamente, y en un intervalo definido por la base de tiempo, hasta que el valor de tiempo
sea "0". La reducci√≥n se realiza de modo as√≠ncrono respecto al programa de usuario. De este
modo el tiempo resultante es menor que el valor de tiempo deseado, como m√°ximo hasta un
intervalo de la base de tiempo.
Nota
La instrucci√≥n "Inicializar temporizador" no desactiva la marca de flancos interna. Para
desactivar la marca de flancos interna debe programarse la instrucci√≥n "Habilitar
temporizador" o ejecutarse una instrucci√≥n para arrancar el temporizador con el estado l√≥gico
"0".
Encontrar√° un ejemplo de la estructura de una c√©lula de temporizaci√≥n en: Consulte tambi√©n
"L: Cargar valor del temporizador".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Inicializar temporizador":
Operando

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Temporiza‚Äê
dor>

Input

TIMER

T

Temporizador que se iniciali‚Äê
za

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

A "Tag_Reset"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

R "MyTimer"

// Si el RLO es "1", inicializar temporizador.

A "MyTimer"

// Consultar si el estado del temporizador es "1".

= "Tag_TimerStatus"

// Asignar el estado del temporizador al operando.

L "MyTimer"

// Cargar el valor actual del temporizador en el acumulador 1.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5387

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

T "Tag_TimerValue"

// Transferir el valor actual del temporizador al operando "Tag_TimerValue".

Consulte tambi√©n
Activar el bit de estado en instrucciones de temporizaci√≥n y contaje (P√°gina 188)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Vista general de los tipos de datos v√°lidos (P√°gina 241)
L: Cargar valor del temporizador (P√°gina 5383)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

SP: Arrancar temporizador como impulso
Descripci√≥n
La instrucci√≥n "Arrancar temporizador como impulso" arranca un temporizador concreto con
un flanco de se√±al ascendente. Cuando se registra un flanco de se√±al ascendente, la
instrucci√≥n se ejecuta y el temporizador arranca. El temporizador termina con la duraci√≥n que
figura en el acumulador 1, mientras el resultado l√≥gico (RLO) antes de la instrucci√≥n siga
siendo "1". Si el RLO cambia a "0" antes de finalizar el temporizador, este se detiene. Las
consultas de si el estado del temporizador es "1" dan como resultado "1" mientras el
temporizador est√° en marcha.
Es posible rearrancar el temporizador con un flanco de se√±al ascendente antes de la
instrucci√≥n "Arrancar temporizador como impulso" o con la ayuda de la instrucci√≥n "Habilitar
temporizador". Para ello, es imprescindible que el temporizador no est√© desactivado.
La duraci√≥n en el acumulador 1 se compone de un valor de tiempo y una base de tiempo. Si
se arranca un temporizador concreto con la instrucci√≥n "Arrancar temporizador como impulso",
el valor del temporizador se reduce de acuerdo con la base de tiempo. El temporizador cuenta
el tiempo hasta que el valor de contaje decrementa hasta cero.
En el acumulador 1 debe haber una duraci√≥n v√°lida en formato S5TIME, aunque al procesar
la instrucci√≥n no arranque el temporizador. Si el acumulador 1 no tiene ning√∫n valor BCD
v√°lido, se ejecuta el tratamiento de errores s√≠ncronos (STOP u OB122). El bit de estado OV no
se ve afectado.
Nota
En la c√©lula de temporizaci√≥n, el sistema operativo reduce el valor de tiempo en una unidad
respectivamente, y en un intervalo definido por la base de tiempo, hasta que el valor de tiempo
sea "0". La reducci√≥n se realiza de modo as√≠ncrono respecto al programa de usuario. De este
modo el tiempo resultante es menor que el valor de tiempo deseado, como m√°ximo hasta un
intervalo de la base de tiempo.
Encontrar√° un ejemplo de la estructura de una c√©lula de temporizaci√≥n en: Consulte tambi√©n
"L: Cargar valor del temporizador".

5388

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Arrancar temporizador como
impulso":
Operando

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Temporiza‚Äê
dor>

Input

TIMER

T

Temporizador que arranca
como impulso

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

A "Tag_StartInput"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

L S5T#10s

// Cargar tiempo (10 s)

SP "MyTimer"

// Arrancar temporizador como impulso cuando haya un
flanco de se√±al ascendente en el operando "Tag_StartInput" o en el operando "Tag_EnableInput" y el operando "Tag_StartInput" devuelva el estado l√≥gico "1".

A "Tag_Reset"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

R "MyTimer"

// Inicializar el temporizador si el RLO es "1" y detener el tiempo.

A "MyTimer"

// Consultar si el estado del temporizador es "1".

= "Tag_TimerStatus"

// Asignar el estado del temporizador al operando.

L "MyTimer"

// Cargar el valor actual del temporizador en el acumulador 1.

T "Tag_TimerValue"

// Transferir el valor actual del temporizador al operando "Tag_TimerValue".

LC "MyTimer"

// Cargar el valor actual del temporizador codificado
en BCD en el acumulador 1.

T "Tag_TimerValue_BCD"

// Transferir el valor del temporizador codificado en
BCD al operando "Tag_TimerValue_BCD".

La figura siguiente muestra el cronograma del ejemplo:
$UUDQFDU

‡≤Ø7DJB6WDUW,QSXW‡≤Ø

'HVDFWLYDU

‡≤Ø7DJB5HVHW‡≤Ø

7HPSRUL]DGRU
6DOLGD

W
‡≤Ø7DJB7LPHU6WDWXV‡≤Ø

&DUJDUWHPSRUL]DGRU
//&
W WLHPSRSURJUDPDGR

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5389

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Activar el bit de estado en instrucciones de temporizaci√≥n y contaje (P√°gina 188)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Vista general de los tipos de datos v√°lidos (P√°gina 241)
L: Cargar valor del temporizador (P√°gina 5383)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

SE: Arrancar temporizador como impulso prolongado
Descripci√≥n
La instrucci√≥n "Arrancar temporizador como impulso prolongado" arranca un temporizador
concreto con un flanco de se√±al ascendente. Cuando se registra un flanco de se√±al
ascendente, la instrucci√≥n se ejecuta y el temporizador arranca. El temporizador termina con
el tiempo que figura en el acumulador 1, aunque el resultado l√≥gico antes de la instrucci√≥n
cambie a "0". Las consultas de si el estado del temporizador es "1" dan como resultado "1"
mientras el temporizador est√° en marcha.
Con cada flanco de se√±al ascendente, la instrucci√≥n rearranca el temporizador con la duraci√≥n
programada, aunque este todav√≠a no haya terminado.
La duraci√≥n en el acumulador 1 se compone de un valor de tiempo y una base de tiempo. Si
se arranca un temporizador concreto con la instrucci√≥n "Arrancar temporizador como impulso
prolongado", el valor del temporizador decrementa de acuerdo con la base de tiempo. El
temporizador cuenta el tiempo hasta que el valor de contaje decrementa hasta cero.
En el acumulador 1 debe haber una duraci√≥n v√°lida en formato S5TIME, aunque al procesar
la instrucci√≥n no arranque el temporizador. Si el acumulador 1 no tiene ning√∫n valor BCD
v√°lido, se ejecuta el tratamiento de errores s√≠ncronos (STOP u OB 122). El bit de estado OV
no se ve afectado.
Nota
En la c√©lula de temporizaci√≥n, el sistema operativo reduce el valor de tiempo en una unidad
respectivamente, y en un intervalo definido por la base de tiempo, hasta que el valor de tiempo
sea "0". La reducci√≥n se realiza de modo as√≠ncrono respecto al programa de usuario. De este
modo el tiempo resultante es menor que el valor de tiempo deseado, como m√°ximo hasta un
intervalo de la base de tiempo.
Encontrar√° un ejemplo de la estructura de una c√©lula de temporizaci√≥n aqu√≠: L: Cargar valor del
temporizador (P√°gina 5383)

5390

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Arrancar temporizador como
impulso prolongado":
Operando

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Temporiza‚Äê
dor>

Input

TIMER

T

Temporizador que arranca
como impulso prolongado

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

A "Tag_StartInput"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

L S5T#10s

// Cargar tiempo (10 s)

SE "MyTimer"

// Arrancar temporizador como impulso prolongado cuando haya un flanco de se√±al ascendente en el operando
"Tag_StartInput" o en el operando "Tag_EnableInput" y
el operando "Tag_StartInput" devuelva el estado l√≥gico "1".

A "Tag_Reset"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

R "MyTimer"

// Inicializar el temporizador si el RLO es "1" y detener el tiempo.

A "MyTimer"

// Consultar si el estado del temporizador es "1".

= "Tag_TimerStatus"

// Asignar el estado del temporizador al operando

L "MyTimer"

// Cargar el valor actual del temporizador en el acumulador 1.

T "Tag_TimerValue"

// Transferir el valor actual del temporizador al operando "Tag_TimerValue".

LC "MyTimer"

// Cargar el valor actual del temporizador codificado
en BCD en el acumulador 1.

T "Tag_TimerValue_BCD"

// Transferir el valor del temporizador codificado en
BCD al operando "Tag_TimerValue_BCD".

La figura siguiente muestra el cronograma del ejemplo:

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5391

Instrucciones
4.2 Instrucciones
$UUDQFDU

‡≤Ø7DJB6WDUW,QSXW‡≤Ø

'HVDFWLYDU

‡≤Ø7DJB5HVHW‡≤Ø

7HPSRUL]DGRU
6DOLGD

W
‡≤Ø7DJB7LPHU6WDWXV‡≤Ø

&DUJDUWHPSRUL]DGRU
//&
W WLHPSRSURJUDPDGR

Consulte tambi√©n
Activar el bit de estado en instrucciones de temporizaci√≥n y contaje (P√°gina 188)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Vista general de los tipos de datos v√°lidos (P√°gina 241)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Ejemplos de programaci√≥n AWL (P√°gina 8102)

SD: Arrancar temporizador como retardo a la conexi√≥n
Descripci√≥n
La instrucci√≥n "Arrancar temporizador como retardo a la conexi√≥n" arranca un temporizador
programado al detectarse el estado l√≥gico "1" en la entrada de arranque. Mientras se
mantenga el estado l√≥gico "1", el temporizador contar√° el tiempo indicado en el acumulador 1.
Una vez transcurrido el tiempo y si el estado l√≥gico en la entrada de arranque sigue siendo "1",
la consulta del estado del temporizador tambi√©n dar√° como resultado "1". Si la se√±al de la
entrada de arranque es "0", el temporizador se inicializa. En ese caso, la consulta del estado
del temporizador devuelve el estado l√≥gico "0". En cuanto la se√±al en la entrada de arranque
vuelve a cambiar a "1", el temporizador vuelve a contar el tiempo.
El estado l√≥gico de la salida del temporizador es id√©ntico al de la entrada de arranque. La
entrada de arranque est√° interconectada directamente con la salida y no tiene relaci√≥n con el
temporizador.
El tiempo en el acumulador 1 se compone internamente de un valor de tiempo y una base de
tiempo. Cuando se inicia la instrucci√≥n, el valor de tiempo programado se cuenta hacia atr√°s
hasta cero.
En el acumulador 1 debe haber una duraci√≥n v√°lida en formato S5TIME, aunque al procesar
la instrucci√≥n no arranque el temporizador. Si el acumulador 1 no tiene ning√∫n valor BCD v√°lido
y el RLO de la operaci√≥n l√≥gica precedente devuelve el valor "0", el bit de estado OV se

5392

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
ajustar√° a "1". No se inicia ning√∫n tratamiento de errores s√≠ncrono. Si el acumulador 1 tiene un
valor BCD v√°lido, el bit de estado OV se ajusta a "0".
Nota
En la c√©lula de temporizaci√≥n, el sistema operativo reduce el valor de tiempo en una unidad
respectivamente, y en un intervalo definido por la base de tiempo, hasta que el valor de tiempo
sea "0". La reducci√≥n se realiza de modo as√≠ncrono respecto al programa de usuario. De este
modo el tiempo resultante es menor que el valor de tiempo deseado, como m√°ximo hasta un
intervalo de la base de tiempo.
Encontrar√° un ejemplo de la estructura de una c√©lula de temporizaci√≥n aqu√≠: L: Cargar valor del
temporizador (P√°gina 5383)

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Arrancar temporizador como
retardo a la conexi√≥n":
Operando

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Temporiza‚Äê
dor>

Input

TIMER

T

Temporizador que arranca
como retardo a la conexi√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

A "Tag_StartInput"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

L S5T#10s

// Cargar tiempo (10 s)

SD "MyTimer"

// Arrancar temporizador como retardo a la conexi√≥n
cuando haya un flanco de se√±al ascendente en el operando "Tag_StartInput" o en el operando "Tag_EnableInput" y el operando "Tag_StartInput" devuelva el estado
l√≥gico "1".

A "Tag_Reset"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

R "MyTimer"

// Inicializar el temporizador si el RLO es "1" y detener el tiempo.

A "MyTimer"

// Consultar si el estado del temporizador es "1"

= "Tag_TimerStatus"

// Asignar el estado del temporizador al operando.

L "MyTimer"

// Cargar el valor actual del temporizador en el acumulador 1.

T "Tag_TimerValue"

// Transferir el valor actual del temporizador al operando "Tag_TimerValue".

LC "MyTimer"

// Cargar el valor actual del temporizador codificado
en BCD en el acumulador 1.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5393

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

T "Tag_TimerValue_BCD"

// Transferir el valor del temporizador codificado en
BCD al operando "Tag_TimerValue_BCD".

La figura siguiente muestra el cronograma del ejemplo:
$UUDQFDU

‡≤Ø7DJB6WDUW,QSXW‡≤Ø

'HVDFWLYDU

‡≤Ø7DJB5HVHW‡≤Ø

7HPSRUL]DGRU
6DOLGD

W

W

‡≤Ø7DJB7LPHU6WDWXV‡≤Ø
W WLHPSRSURJUDPDGR

Consulte tambi√©n
Activar el bit de estado en instrucciones de temporizaci√≥n y contaje (P√°gina 188)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Vista general de los tipos de datos v√°lidos (P√°gina 241)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

SS: Arrancar temporizador como retardo a la conexi√≥n con memoria
Descripci√≥n
La instrucci√≥n "Arrancar temporizador como retardo a la conexi√≥n con memoria" arranca un
temporizador concreto con un flanco de se√±al ascendente. Cuando se registra un flanco de
se√±al ascendente, la instrucci√≥n se ejecuta y el temporizador arranca. El temporizador termina
con la duraci√≥n que figura en el acumulador 1, aunque el resultado l√≥gico (RLO) antes de la
instrucci√≥n cambie a "0". Cuando el tiempo ha transcurrido, las consultas de si el estado del
temporizador es "1" dan como resultado "1". El estado l√≥gico del resultado l√≥gico actual antes
de la instrucci√≥n no influye en el resultado de la consulta.
Con cada flanco de se√±al ascendente, la instrucci√≥n rearranca el temporizador con la duraci√≥n
programada, aunque este todav√≠a no haya terminado.
La duraci√≥n en el acumulador 1 se compone de un valor de tiempo y una base de tiempo. Si
se arranca un temporizador concreto con la instrucci√≥n "Arrancar temporizador como retardo
a la conexi√≥n con memoria", el valor del temporizador se reduce de acuerdo con la base de
tiempo. El temporizador cuenta el tiempo hasta que el valor de contaje decrementa hasta cero.
En el acumulador 1 debe haber una duraci√≥n v√°lida en formato S5TIME, aunque al procesar
la instrucci√≥n no arranque el temporizador. Si el acumulador 1 no tiene ning√∫n valor BCD

5394

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
v√°lido, se ejecuta el tratamiento de errores s√≠ncronos (STOP u OB 122). El bit de estado OV
no se ve afectado.
Nota
En la c√©lula de temporizaci√≥n, el sistema operativo reduce el valor de tiempo en una unidad
respectivamente, y en un intervalo definido por la base de tiempo, hasta que el valor de tiempo
sea "0". La reducci√≥n se realiza de modo as√≠ncrono respecto al programa de usuario. De este
modo el tiempo resultante es menor que el valor de tiempo deseado, como m√°ximo hasta un
intervalo de la base de tiempo.
Encontrar√° un ejemplo de la estructura de una c√©lula de temporizaci√≥n aqu√≠: L: Cargar valor del
temporizador (P√°gina 5383)

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Arrancar temporizador como
retardo a la conexi√≥n con memoria":
Operando

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Temporiza‚Äê
dor>

Input

TIMER

T

Temporizador que arranca
como retardo a la conexi√≥n
con memoria

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

A "Tag_StartInput"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

L S5T#10s

// Cargar tiempo (10 s)

SS "MyTimer"

// Arrancar temporizador como retardo a la conexi√≥n
con memoria cuando haya un flanco de se√±al ascendente
en el operando "Tag_StartInput" o en el operando
"Tag_EnableInput" y el operando "Tag_StartInput" devuelva el estado l√≥gico "1".

A "Tag_Reset"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

R "MyTimer"

// Inicializar el temporizador si el RLO es "1" y detener el tiempo.

A "MyTimer"

// Consultar si el estado del temporizador es "1".

= "Tag_TimerStatus"

// Asignar el estado del temporizador al operando.

L "MyTimer"

// Cargar el valor actual del temporizador en el acumulador 1.

T "Tag_TimerValue"

// Transferir el valor actual del temporizador al operando "Tag_TimerValue".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5395

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

LC "MyTimer"

// Cargar el valor actual del temporizador codificado
en BCD en el acumulador 1.

T "Tag_TimerValue_BCD"

// Transferir el valor del temporizador codificado en
BCD al operando "Tag_TimerValue_BCD".

La figura siguiente muestra el cronograma del ejemplo:
$UUDQFDU

‡≤Ø7DJB6WDUW,QSXW‡≤Ø

'HVDFWLYDU

‡≤Ø7DJB5HVHW‡≤Ø

7HPSRUL]DGRU
6DOLGD

W
‡≤Ø7DJB7LPHU6WDWXV‡≤Ø
W WLHPSRSURJUDPDGR

Consulte tambi√©n
Activar el bit de estado en instrucciones de temporizaci√≥n y contaje (P√°gina 188)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Vista general de los tipos de datos v√°lidos (P√°gina 241)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

SF: Arrancar temporizador como retardo a la desconexi√≥n
Descripci√≥n
La instrucci√≥n "Arrancar temporizador como retardo a la desconexi√≥n" arranca un
temporizador concreto con un flanco de se√±al descendente. Cuando se registra un flanco de
se√±al descendente, la instrucci√≥n se ejecuta y el temporizador arranca. El temporizador
termina con la duraci√≥n que figura en el acumulador 1. Si el resultado l√≥gico (RLO) cambia a
"1" antes de finalizar el tiempo, el temporizador se inicializa. El temporizador solo arranca de
nuevo cuando se registra un flanco de se√±al descendente al ejecutar la instrucci√≥n.
Las consultas del estado del temporizador en "1" dan como resultado "1" si el estado del
resultado l√≥gico al ejecutar la instrucci√≥n es "1" o si el temporizador programado est√° en
marcha. Si el temporizador no cuenta o el RLO est√° a "0", las consultas de si el estado del
temporizador es "1" dan como resultado "0".
La duraci√≥n en el acumulador 1 se compone de un valor de tiempo y una base de tiempo. Si
se arranca un temporizador concreto con la instrucci√≥n "Arrancar temporizador como retardo
a la desconexi√≥n", el valor del temporizador decrementa de acuerdo con la base de tiempo. El
temporizador cuenta el tiempo hasta que el valor de contaje decrementa hasta cero.

5396

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
En el acumulador 1 debe haber una duraci√≥n v√°lida en formato S5TIME, aunque al procesar
la instrucci√≥n no arranque el temporizador. Si el acumulador 1 no tiene ning√∫n valor BCD
v√°lido, se ejecuta el tratamiento de errores s√≠ncronos (STOP u OB 122). El bit de estado OV
no se ve afectado.
Nota
En la c√©lula de temporizaci√≥n, el sistema operativo reduce el valor de tiempo en una unidad
respectivamente, y en un intervalo definido por la base de tiempo, hasta que el valor de tiempo
sea "0". La reducci√≥n se realiza de modo as√≠ncrono respecto al programa de usuario. De este
modo el tiempo resultante es menor que el valor de tiempo deseado, como m√°ximo hasta un
intervalo de la base de tiempo.
Encontrar√° un ejemplo de la estructura de una c√©lula de temporizaci√≥n aqu√≠: L: Cargar valor del
temporizador (P√°gina 5383)

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Arrancar temporizador como
retardo a la desconexi√≥n":
Operando

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Temporiza‚Äê
dor>

Input

TIMER

T

Temporizador que arranca
como retardo a la descone‚Äê
xi√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

A "Tag_StartInput"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

L S5T#10s

// Cargar tiempo (10 s)

SF "MyTimer"

// Arrancar temporizador como retardo a la desconexi√≥n
cuando haya un flanco de se√±al descendente en el operando "Tag_StartInput" o en el operando "Tag_EnableInput" y el operando "Tag_StartInput" devuelva el estado
l√≥gico "1".

A "Tag_Reset"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

R "MyTimer"

// Inicializar el temporizador si el RLO es "1" y detener el tiempo.

A "MyTimer"

// Consultar si el estado del temporizador es "1".

= "Tag_TimerStatus"

// Asignar el estado del temporizador al operando.

L "MyTimer"

// Cargar el valor actual del temporizador en el acumulador 1.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5397

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

T "Tag_TimerValue"

// Transferir el valor actual del temporizador al operando "Tag_TimerValue".

LC "MyTimer"

// Cargar el valor actual del temporizador codificado
en BCD en el acumulador 1.

T "Tag_TimerValue_BCD"

// Transferir el valor del temporizador codificado en
BCD al operando "Tag_TimerValue_BCD".

La figura siguiente muestra el cronograma del ejemplo:
$UUDQFDU

‡≤Ø7DJB6WDUW,QSXW‡≤Ø

'HVDFWLYDU

‡≤Ø7DJB5HVHW‡≤Ø

7HPSRUL]DGRU
W
6DOLGD

W

‡≤Ø7DJB7LPHU6WDWXV‡≤Ø
W WLHPSRSURJUDPDGR

Consulte tambi√©n
Activar el bit de estado en instrucciones de temporizaci√≥n y contaje (P√°gina 188)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Vista general de los tipos de datos v√°lidos (P√°gina 241)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

Contadores
FR: Habilitar contador
Descripci√≥n
La instrucci√≥n "Habilitar contador" ejecuta las instrucciones "Inicializar contador", "Contador
ascendente" y "Contador descendente" sin que exista actualmente un flanco de se√±al
ascendente. Durante la ejecuci√≥n, la instrucci√≥n pone la marca de flancos interna al estado
l√≥gico "0". La consulta anterior a la instrucci√≥n de contaje correspondiente debe seguir
teniendo el estado l√≥gico "1".
La instrucci√≥n "Habilitar contador" se ejecuta si el resultado l√≥gico (RLO) cambia de "0" a "1"
antes de la instrucci√≥n.
Para ejecutar una instrucci√≥n de contaje no es necesario habilitar un contador.

5398

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Habilitar contador":
Operando

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Operando>

Input

COUNTER

C

Contador que se habilita.

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

A "Tag_Input_1"

// Consultar si el estado l√≥gico es "1" y combinar el
resultado l√≥gicamente con Y con el RLO actual.

FR "MyCounter"

// Habilitar contador

A "Tag_Input_2"

// Consultar si el estado l√≥gico es "1" y combinar el
resultado l√≥gicamente con Y con el RLO actual.

CD "MyCounter"

// Decrementar contador

A "MyCounter"

// Consultar estado del contador

= "Tag_Output"

// Asignar el resultado de la consulta al operando.

En el ejemplo, el contador "MyCounter" se habilita cuando el estado l√≥gico del operando
"Tag_Input_1" cambia de "0" a "1". Si el operando "Tag_Input_2" tiene el estado l√≥gico "1", el
valor de contaje decrementa en uno al habilitar el contador. Si el estado l√≥gico del operando
"Tag_Input_2" es "0", el valor de contaje no cambia. El valor de contaje tambi√©n decrementa
en uno, independientemente de la habilitaci√≥n del contador, cuando el estado l√≥gico del
operando "Tag_Input_2" cambia de "0" a "1".
La consulta del estado del contador da como resultado "1" si el estado del contador es mayor
que cero. Si el estado del contador es igual a cero, el resultado de la consulta es "0".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en instrucciones de temporizaci√≥n y contaje (P√°gina 188)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

L: Cargar valor de contaje
Descripci√≥n
La instrucci√≥n "Cargar valor de contaje" transfiere el valor actual de un contador concreto a la
palabra derecha del acumulador 1 en c√≥digo dual. A continuaci√≥n, el valor de contaje cargado
est√° disponible como entero de 16 bits para su posterior procesamiento.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5399

Instrucciones
4.2 Instrucciones
La figura siguiente muestra el funcionamiento de la instrucci√≥n:
3DODEUDGHFRQWDMH
SDUD
FRQWDGRU&GHOD
PHPRULD

   



9DORUGHFRQWDMH D FRGLILFDGRHQ
ELQDULR
/&

&RQWHQLGRGHOD
SDODEUDGHUHFKD
GHO
DFXPXODGRU
GHVSX¬´VGHOD
LQVWUXFFL¬µQGH
FDUJD /&

   
7RGRV‡≤Ø‡≤Ø



9DORUGHFRQWDMH D FRGLILFDGRHQ
ELQDULR

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Cargar valor de contaje":
Operando

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Operando>

Input

COUNTER

C

Contador cuyo valor actual
se carga.

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "MyCounter"

// Cargar el valor de contaje actual en el acumulador
1 en c√≥digo binario.

L "Tag_Value"

// Desplazar el valor de contaje al acumulador 2.
// Cargar el valor del operando "Tag_Value" en el acumulador 1.

>=I

// Consulta sobre si el valor de contaje es mayor o
igual al valor del operando "Tag_Value".

= "Tag_Output"

// Asignar el resultado de la consulta al operando.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en instrucciones de temporizaci√≥n y contaje (P√°gina 188)

5400

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

LC: Cargar valor de contaje codificado en BCD
Descripci√≥n
La instrucci√≥n "Cargar valor de contaje codificado en BCD" transfiere el valor actual de un
contador concreto en formato BCD a la palabra derecha del acumulador 1. Despu√©s, el valor
de contaje cargado est√° disponible en BCD para su posterior procesamiento.
La figura siguiente muestra el funcionamiento de la instrucci√≥n "Cargar valor de contaje
codificado en BCD":
3DODEUDGHFRQWDMH
SDUD
FRQWDGRU&HQOD
PHPRULD

   



9DORUGHFRQWDMH D FRGLILFDGRHQ
ELQDULR
/&&

&RQWHQLGRGHOD
SDODEUDGHUHFKDGHO 
DFXPXODGRU
   
GHVSX¬´VGHOD
LQVWUXFFL¬µQGHFDUJD
 &HQWHQDV
'HFHQDV
/&&


 8QLGDGHV

9DORUGHFRQWDMHHQ%&'

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Cargar valor de contaje codificado
en BCD":
Operando

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Operando>

Input

COUNTER

C

Contador cuyo valor actual
se carga.

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5401

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

LC "MyCounter"

// Cargar el valor de contaje actual en el acumulador
1 codificado en BCD.

T "Tag_Output"

// Transferir el valor de contaje actual al operando
"Tag_Output" y guardarlo.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en instrucciones de temporizaci√≥n y contaje (P√°gina 188)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

R: Inicializar contador
Descripci√≥n
La instrucci√≥n "Poner contador a 0" pone a "0" el valor de contaje actual de un contador
concreto.
La instrucci√≥n solo se ejecuta si el resultado l√≥gico (RLO) previo a la instrucci√≥n tiene el estado
l√≥gico "1". Mientras el RLO antes de la instrucci√≥n "Poner contador a 0" est√© a "1", las consultas
de si el estado del contador es "1" dar√°n como resultado "0".
Al poner un contador a 0, la marca de flancos interna para las instrucciones "Inicializar
contador", "Contador ascendente" y "Contador descendente" no se desactiva.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Poner contador a 0":
Operando

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Operando>

Input

COUNTER

C

Contador cuyo valor de con‚Äê
taje se pone a "0".

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:

5402

AWL

Explicaci√≥n

A "Tag_Input"

// Consultar si el estado l√≥gico es "1" y combinar el
resultado l√≥gicamente con Y con el RLO actual.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

R "MyCounter"

// Poner contador a 0

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en instrucciones de temporizaci√≥n y contaje (P√°gina 188)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

S: Inicializar contador
Descripci√≥n
La instrucci√≥n "Inicializar contador" pone un contador concreto al valor que se encuentra en el
acumulador 1 en el momento de la consulta.
La instrucci√≥n "Inicializar contador" se ejecuta solamente cuando el resultado l√≥gico cambia de
"0" a "1" antes de la instrucci√≥n. El flanco de se√±al ascendente tambi√©n puede obtenerse
mediante la instrucci√≥n "Habilitar contador", que pone a "0" la marca de flancos interna.
Para inicializar un contador debe haber un valor de contaje v√°lido en el acumulador 1. Se
consideran valores de contaje v√°lidos los valores codificados en BCD con tres d√©cadas. S√≥lo
se admiten valores de contaje positivos, la instrucci√≥n de contaje no puede procesar valores
negativos. Si el acumulador 1 no tiene ning√∫n valor BCD v√°lido, se ejecuta el tratamiento de
errores s√≠ncronos (STOP u OB122). El bit de estado OV no se ve afectado.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Inicializar contador":
Operando

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Operando>

Input

COUNTER

C

Contador que se inicializa.

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

A "Tag_Input"

// Consultar si el estado l√≥gico es "1" y combinar el
resultado l√≥gicamente con Y con el RLO actual.

L "Tag_CountValue"

// Cargar el valor de contaje en el acumulador 1.

S "MyCounter"

// Poner el contador al valor que se encuentra en el
acumulador 1.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5403

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en instrucciones de temporizaci√≥n y contaje (P√°gina 188)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

CU: Contador ascendente
Descripci√≥n
La instrucci√≥n "Contador ascendente" incrementa en uno el valor de contaje actual cuando el
resultado l√≥gico (RLO) antes de la instrucci√≥n cambie de "0" a "1". En cada flanco de se√±al
ascendente, el valor de contaje se sigue incrementando hasta alcanzar el l√≠mite superior "999".
Una vez alcanzado el valor l√≠mite, el RLO antes de la instrucci√≥n ya no influye en el valor de
contaje.
Para ejecutar la instrucci√≥n "Contador ascendente" se requiere siempre un flanco de se√±al
ascendente. El flanco de se√±al ascendente tambi√©n puede obtenerse mediante la instrucci√≥n
"Habilitar contador", que pone a "0" la marca de flancos interna.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Contador ascendente":
Operando

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Operando>

Input

COUNTER

C

Contador cuyo valor de con‚Äê
taje se incrementa en uno
con un flanco ascendente.

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

A "Tag_Input"

// Consultar si el estado l√≥gico es "1" y combinar el
resultado l√≥gicamente con Y con el RLO actual.

CU "MyCounter"

// Incrementar el valor de contaje en uno con un flanco ascendente.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en instrucciones de temporizaci√≥n y contaje (P√°gina 188)

5404

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Ejemplos de programaci√≥n AWL (P√°gina 8102)

CD: Contador descendente
Descripci√≥n
La instrucci√≥n "Contador descendente" decrementa en uno el valor de contaje actual cuando
el resultado l√≥gico (RLO) antes de la instrucci√≥n cambie de "0" a "1". En cada flanco de se√±al
ascendente, el valor de contaje sigue decrementando hasta alcanzar el l√≠mite inferior "0". Una
vez alcanzado el valor l√≠mite, el RLO antes de la instrucci√≥n ya no influye en el valor de contaje.
No se cuenta con valores negativos.
Para ejecutar la instrucci√≥n "Contador descendente" se requiere siempre un flanco de se√±al
ascendente. El flanco de se√±al ascendente tambi√©n puede obtenerse mediante la instrucci√≥n
"Habilitar contador", que pone a "0" la marca de flancos interna.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Contador descendente":
Operando

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Operando>

Input

COUNTER

C

Contador cuyo valor de con‚Äê
taje se decrementa en uno
con un flanco ascendente.

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

A "Tag_Input"

// Consultar si el estado l√≥gico es "1" y combinar el
resultado l√≥gicamente con Y con el RLO actual.

CD "MyCounter"

// Decrementar el valor de contaje en uno con un flanco ascendente.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en instrucciones de temporizaci√≥n y contaje (P√°gina 188)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5405

Instrucciones
4.2 Instrucciones
Procesar instrucciones AWL (P√°gina 8098)
Ejemplos de programaci√≥n AWL (P√°gina 8102)

Comparaci√≥n
? I: Comparaci√≥n de enteros
Descripci√≥n
La instrucci√≥n "Comparaci√≥n de enteros" (16 bits) compara el contenido de la palabra derecha
del acumulador 2 con el contenido de la palabra derecha del acumulador 1. Los contenidos de
los acumuladores 1 y 2 se interpretan como enteros (de 16 bits). La instrucci√≥n ejecuta la
comparaci√≥n en funci√≥n de la funci√≥n de comparaci√≥n indicada.
La tabla siguiente muestra las funciones de comparaci√≥n disponibles y su significado:
Funci√≥n de comparaci√≥n

Significado

==I

Comparaci√≥n de igualdad de enteros

<>I

Comparaci√≥n de desigualdad de enteros

>I

Comparaci√≥n de superioridad de enteros

<I

Comparaci√≥n de inferioridad de enteros

>=I

Comparaci√≥n de superioridad o igualdad de enteros

<=I

Comparaci√≥n de inferioridad o igualdad de enteros

El resultado de la comparaci√≥n influye en el resultado l√≥gico (RLO) as√≠ como en los bits de
estado CC 1 y CC 0. Si se cumple la condici√≥n de la comparaci√≥n, el RLO se pone al estado
l√≥gico "1". Si no se cumple la condici√≥n de la comparaci√≥n, el RLO se pone a "0".
La tabla siguiente muestra c√≥mo las distintas funciones de comparaci√≥n influyen en el RLO:
Funci√≥n de compara‚Äê
ci√≥n

RLO si
ACU 2 > ACU 1

RLO si
ACU 2 = ACU 1

RLO si
ACU 2 < ACU 1

==I

0

1

0

<>I

1

0

1

>I

1

0

0

<I

0

0

1

>=I

1

1

0

<=I

0

1

1

La activaci√≥n de los bits de estado CC 1 y CC 0 depende de la relaci√≥n de los dos valores que
intervienen en la comparaci√≥n.
Los contenidos de los acumuladores 1 y 2 no cambian debido a la ejecuci√≥n de las funciones
de comparaci√≥n. Tras ejecutar una funci√≥n de comparaci√≥n, es posible evaluar el resultado
l√≥gico con funciones de asignaci√≥n y salto.

5406

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Input_1"

// Cargar el valor del operando "Tag_Input_1" en el
acumulador 1.

L "Tag_Input_2"

// Desplazar el contenido del acumulador 1 (Tag_Input_1) al acumulador 2.
// Cargar el valor del operando "Tag_Input_2" en el
acumulador 1.

>I

// Comparar si el valor del operando "Tag_Input_1" es
mayor que el valor del operando "Tag_Input_2".

= "Tag_Output"

// Asignar el resultado de la comparaci√≥n al operando
"Tag_Output".

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valores

Tag_Input_1

10

10

5

Tag_Input_2

5

10

10

Tag_Output

1

0

0

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en operaciones de comparaci√≥n (P√°gina 192)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Ejemplos de programaci√≥n AWL (P√°gina 8102)

? D: Comparaci√≥n de enteros dobles
Descripci√≥n
La instrucci√≥n "Comparaci√≥n de enteros dobles" (32 bits) compara el contenido del
acumulador 2 (ACU 2) con el contenido del acumulador 1 (ACU 1). Los contenidos de los
acumuladores 1 y 2 se interpretan como enteros dobles (de 32 bits). La instrucci√≥n ejecuta la
comparaci√≥n en funci√≥n de la funci√≥n de comparaci√≥n indicada.
La tabla siguiente muestra las funciones de comparaci√≥n disponibles y su significado:
Funci√≥n de comparaci√≥n

Significado

==D

Comparaci√≥n de igualdad de enteros dobles

<>D

Comparaci√≥n de desigualdad de enteros dobles

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5407

Instrucciones
4.2 Instrucciones
Funci√≥n de comparaci√≥n

Significado

>D

Comparaci√≥n de superioridad de enteros dobles

<D

Comparaci√≥n de inferioridad de enteros dobles

>=D

Comparaci√≥n de superioridad o igualdad de enteros dobles

<=D

Comparaci√≥n de inferioridad o igualdad de enteros dobles

El resultado de la comparaci√≥n influye en el resultado l√≥gico (RLO) as√≠ como en los bits de
estado CC 1 y CC 0. Si se cumple la condici√≥n de la comparaci√≥n, el RLO se pone al estado
l√≥gico "1". Si no se cumple la condici√≥n de la comparaci√≥n, el RLO se pone al estado l√≥gico "0".
La tabla siguiente muestra c√≥mo las distintas funciones de comparaci√≥n influyen en el RLO:
Funci√≥n de compara‚Äê
ci√≥n

RLO si
ACU 2 > ACU 1

RLO si
ACU 2 = ACU 1

RLO si
ACU 2 < ACU 1

==D

0

1

0

<>D

1

0

1

>D

1

0

0

<D

0

0

1

>=D

1

1

0

<=D

0

1

1

La activaci√≥n de los bits de estado CC 1 y CC 0 depende de la relaci√≥n de los dos valores que
intervienen en la comparaci√≥n.
Los contenidos de los acumuladores 1 y 2 no cambian debido a la ejecuci√≥n de las funciones
de comparaci√≥n. Tras ejecutar una funci√≥n de comparaci√≥n, es posible evaluar el resultado
l√≥gico con funciones de asignaci√≥n y salto.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Input_1"

// Cargar el valor del operando "Tag_Input_1" en el
acumulador 1.

L "Tag_Input_2"

// Desplazar el contenido del acumulador 1 (Tag_Input_1) al acumulador 2.
// Cargar el valor del operando "Tag_Input_2" en el
acumulador 1.

>D

// Comparar si el valor del operando "Tag_Input_1" es
mayor que el valor del operando "Tag_Input_2".

= "Tag_Output"

// Asignar el resultado de la comparaci√≥n al operando
"Tag_Output".

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:

5408

Operando

Valores

Tag_Input_1

150 000

150 000

100 000

Tag_Input_2

100 000

150 000

150 000

Tag_Output

1

0

0

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en operaciones de comparaci√≥n (P√°gina 192)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

? R: Comparaci√≥n de n√∫meros en coma flotante
Descripci√≥n
La instrucci√≥n "Comparaci√≥n de n√∫meros en coma flotante" compara el contenido del
acumulador 2 (ACU 2) con el contenido del acumulador 1 (ACU 1). Los contenidos de los
acumuladores 1 y 2 se interpretan como n√∫meros en coma flotante. Para ejecutar la
comparaci√≥n debe haber n√∫meros en coma flotante v√°lidos en los acumuladores 1 y 2. La
instrucci√≥n ejecuta la comparaci√≥n en funci√≥n de la funci√≥n de comparaci√≥n indicada.
La tabla siguiente muestra las funciones de comparaci√≥n disponibles y su significado:
Funci√≥n de comparaci√≥n

Significado

==R

Comparaci√≥n de igualdad de n√∫meros en coma flotante

<>R

Comparaci√≥n de desigualdad de n√∫meros en coma flotante

>R

Comparaci√≥n de superioridad de n√∫meros en coma flotante

<R

Comparaci√≥n de inferioridad de n√∫meros en coma flotante

>=R

Comparaci√≥n de superioridad o igualdad de n√∫meros en coma flotante

<=R

Comparaci√≥n de inferioridad o igualdad de n√∫meros en coma flotante

El resultado de la comparaci√≥n influye en el resultado l√≥gico (RLO) as√≠ como en los bits de
estado CC 1 y CC 0. Si se cumple la condici√≥n de la comparaci√≥n, el RLO se pone al estado
l√≥gico "1". Si no se cumple la condici√≥n de la comparaci√≥n, el RLO se pone al estado l√≥gico "0".
La tabla siguiente muestra c√≥mo las distintas funciones de comparaci√≥n influyen en el RLO:
Funci√≥n de compara‚Äê
ci√≥n

RLO si
ACU 2 > ACU 1

RLO si
ACU 2 = ACU 1

RLO si
ACU 2 < ACU 1

==R

0

1

0

<>R

1

0

1

>R

1

0

0

<R

0

0

1

>=R

1

1

0

<=R

0

1

1

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5409

Instrucciones
4.2 Instrucciones
La activaci√≥n de los bits de estado CC 1 y CC 0 depende de la relaci√≥n de los dos valores que
intervienen en la comparaci√≥n.
Nota
Si se comparan n√∫meros en coma flotante no v√°lidos, la CPU pone el resultado l√≥gico a "0" y
los bits de estado CC 0, CC 1, OV y OS a "1".
Los contenidos de los acumuladores 1 y 2 no cambian debido a la ejecuci√≥n de las funciones
de comparaci√≥n. Tras ejecutar una funci√≥n de comparaci√≥n, es posible evaluar el resultado
l√≥gico con funciones de asignaci√≥n y salto.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Input_1"

// Cargar el valor del operando "Tag_Input_1" en el
acumulador 1.

L "Tag_Input_2"

// Desplazar el contenido del acumulador 1 (Tag_Input_1) al acumulador 2.
// Cargar el valor del operando "Tag_Input_2" en el
acumulador 1.

>R

// Comparar si el valor del operando "Tag_Input_1" es
mayor que el valor del operando "Tag_Input_2".

= "Tag_Output"

// Asignar el resultado de la comparaci√≥n al operando
"Tag_Output".

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valores

Tag_Input_1

10 515

10 515

5 232

Tag_Input_2

5 232

10 515

10 515

Tag_Output

1

0

0

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en operaciones de comparaci√≥n (P√°gina 192)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

5410

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Funciones matem√°ticas
Enteros
+I: Sumar enteros (16 bits)
Descripci√≥n
La instrucci√≥n "Sumar enteros (16 bits)" suma los valores que se encuentran en las palabras
derechas de los acumuladores 1 y 2. La instrucci√≥n interpreta dichos valores como enteros de
16 bits.
La instrucci√≥n guarda la suma en la palabra derecha del acumulador 1. La palabra izquierda
del acumulador 1 no cambia.
Tras ejecutar la instrucci√≥n, los bits de estado CC 0 y CC 1 indican si la suma es negativa, cero
o positiva. Si el resultado est√° fuera del rango num√©rico admisible, los bits de estado OV y OS
se ponen a "1".
En los controladores con dos acumuladores, el contenido del acumulador 2 no cambia
despu√©s de ejecutar la instrucci√≥n.
En los controladores con cuatro acumuladores, el contenido del acumulador 3 se copia en el
acumulador 2 y el contenido del acumulador 4 se copia en el acumulador 3. El contenido del
acumulador 4 no cambia despu√©s de ejecutar la instrucci√≥n.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el primer sumando.

L "Tag_Value_2"

// Cargar el segundo sumando.

+I

// Sumar valores

T "Tag_Result"

// Transferir la suma al operando "Tag_Result".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar los bits de estado en instrucciones con n√∫meros enteros (P√°gina 190)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Ejemplos de programaci√≥n AWL (P√°gina 8102)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5411

Instrucciones
4.2 Instrucciones

-I: Restar enteros (16 bits)
Descripci√≥n
La instrucci√≥n "Restar enteros (16 bits)" resta el valor de la palabra derecha del acumulador 1
del valor de la palabra derecha del acumulador 2. La instrucci√≥n interpreta los valores de los
acumuladores 1 y 2 como enteros de 16 bits.
La instrucci√≥n guarda la diferencia en la palabra derecha del acumulador 1. La palabra
izquierda del acumulador 1 no cambia.
Tras ejecutar la instrucci√≥n, los bits de estado CC 0 y CC 1 indican si la diferencia es negativa,
cero o positiva. Si el resultado est√° fuera del rango num√©rico admisible, los bits de estado OV
y OS se ponen a "1".
En los controladores con dos acumuladores, el contenido del acumulador 2 no cambia
despu√©s de ejecutar la instrucci√≥n.
En los controladores con cuatro acumuladores, el contenido del acumulador 3 se copia en el
acumulador 2 y el contenido del acumulador 4 se copia en el acumulador 3. El contenido del
acumulador 4 no cambia despu√©s de ejecutar la instrucci√≥n.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el primer valor de la resta en el acumulador
1.

L "Tag_Value_2"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el segundo valor de la suma en el acumulador
1.

-I

// Restar el valor del acumulador 1 del valor del acumulador 2.

T "Tag_Result"

// Transferir la diferencia al operando "Tag_Result".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar los bits de estado en instrucciones con n√∫meros enteros (P√°gina 190)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Ejemplos de programaci√≥n AWL (P√°gina 8102)

5412

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

*I: Multiplicar enteros (16 bits)
Descripci√≥n
La instrucci√≥n "Multiplicar enteros (16 bits)" multiplica los valores que se encuentran en las
palabras derechas de los acumuladores 1 y 2. La instrucci√≥n interpreta dichos valores como
enteros de 16 bits.
La instrucci√≥n guarda el producto en el acumulador 1 como entero de 32 bits (DINT).
Tras ejecutar la instrucci√≥n, los bits de estado CC 0 y CC 1 indican si el producto es negativo,
cero o positivo. Si el resultado est√° fuera del rango num√©rico admisible, los bits de estado OV
y OS se ponen a "1".
En los controladores con dos acumuladores, el contenido del acumulador 2 no cambia
despu√©s de ejecutar la instrucci√≥n.
En los controladores con cuatro acumuladores, el contenido del acumulador 3 se copia en el
acumulador 2 y el contenido del acumulador 4 se copia en el acumulador 3. El contenido del
acumulador 4 no cambia despu√©s de ejecutar la instrucci√≥n.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el multiplicando.

L "Tag_Value_2"

// Cargar el multiplicador.

*I

// Multiplicar valores

T "Tag_Result"

// Transferir el producto al operando "Tag_Result".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar los bits de estado en instrucciones con n√∫meros enteros (P√°gina 190)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Ejemplos de programaci√≥n AWL (P√°gina 8102)

/I: Dividir enteros (16 bits)
Descripci√≥n
La instrucci√≥n "Dividir enteros (16 bits)" divide el valor de la palabra derecha del acumulador
2 por el valor de la palabra derecha del acumulador 1. La instrucci√≥n interpreta los valores de
los acumuladores como enteros de 16 bits.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5413

Instrucciones
4.2 Instrucciones
La instrucci√≥n da dos resultados: el cociente y el resto de la divisi√≥n. El cociente es el resultado
entero de la divisi√≥n. La instrucci√≥n lo guarda en la palabra derecha del acumulador 1. El resto
de la divisi√≥n lo guarda en la palabra izquierda del acumulador 1. Si el dividendo es negativo,
el resto de la divisi√≥n tambi√©n lo ser√°.
Tras ejecutar la instrucci√≥n, los bits de estado CC 0 y CC 1 indican si el cociente es negativo,
cero o positivo. Si el resultado est√° fuera del rango num√©rico admisible, los bits de estado OV
y OS se ponen a "1".
En caso de dividir entre cero, la instrucci√≥n da cero tanto para el cociente como para el resto.
En este caso, los bits de estado CC 0, CC 1, OV y OS se ponen al estado l√≥gico "1".
En los controladores con dos acumuladores, el contenido del acumulador 2 no cambia
despu√©s de ejecutar la instrucci√≥n.
En los controladores con cuatro acumuladores, el contenido del acumulador 3 se copia en el
acumulador 2 y el contenido del acumulador 4 se copia en el acumulador 3. El contenido del
acumulador 4 no cambia despu√©s de ejecutar la instrucci√≥n.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el dividendo en el acumulador 1.

L "Tag_Value_2"

// Desplazar el dividendo al acumulador 2.
// Cargar el divisor en el acumulador 1.

/I

// Dividir el valor del acumulador 2 entre el valor
del acumulador 1.

T "Tag_Result"

// Transferir el resultado al operando "Tag_Result".

Antes de la ejecuci√≥n
La tabla siguiente muestra los contenidos de las palabras derechas de los acumuladores 1 y
2 antes de ejecutar la instrucci√≥n "Dividir enteros (16 bits)":
Acumulador

Valor

Acumulador 2

13

Acumulador 1

4

Despu√©s de la ejecuci√≥n
La tabla siguiente muestra el contenido del acumulador 1 despu√©s de ejecutar la instrucci√≥n
"Dividir enteros (16 bits)":

5414

Acumulador 1

Valor

Bits 0 a 15
(palabra derecha)

3

Bits 16 a 31
(palabra izquierda)

1

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar los bits de estado en instrucciones con n√∫meros enteros (P√°gina 190)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Ejemplos de programaci√≥n AWL (P√°gina 8102)

+D: Sumar enteros dobles (32 bits)
Descripci√≥n
La instrucci√≥n "Sumar enteros dobles (32 bits)" suma los valores que se encuentran en los
acumuladores 1 y 2. La instrucci√≥n interpreta dichos valores como enteros de 32 bits. La
instrucci√≥n guarda la suma en el acumulador 1.
Tras ejecutar la instrucci√≥n, los bits de estado CC 0 y CC 1 indican si la suma es negativa, cero
o positiva. Si el resultado est√° fuera del rango num√©rico admisible, los bits de estado OV y OS
se ponen a "1".
En los controladores con dos acumuladores, el contenido del acumulador 2 no cambia
despu√©s de ejecutar la instrucci√≥n.
En los controladores con cuatro acumuladores, el contenido del acumulador 3 se copia en el
acumulador 2 y el contenido del acumulador 4 se copia en el acumulador 3. El contenido del
acumulador 4 no cambia despu√©s de ejecutar la instrucci√≥n.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el primer sumando.

L "Tag_Value_2"

// Cargar el segundo sumando.

+D

// Sumar valores

T "Tag_Result"

// Transferir la suma al operando "Tag_Result".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar los bits de estado en instrucciones con n√∫meros enteros (P√°gina 190)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5415

Instrucciones
4.2 Instrucciones

-D: Restar enteros dobles (32 bits)
Descripci√≥n
La instrucci√≥n "Restar enteros dobles (32 bits)" resta el valor del acumulador 1 del valor del
acumulador 2. La instrucci√≥n interpreta los valores de los acumuladores 1 y 2 como enteros
dobles (32 bits). La instrucci√≥n guarda el resultado de la resta en el acumulador 1.
Tras ejecutar la instrucci√≥n, los bits de estado CC 0 y CC 1 indican si la diferencia es negativa,
cero o positiva. Si el resultado est√° fuera del rango num√©rico admisible, los bits de estado OV
y OS se ponen a "1".
En los controladores con dos acumuladores, el contenido del acumulador 2 no cambia
despu√©s de ejecutar la instrucci√≥n.
En los controladores con cuatro acumuladores, el contenido del acumulador 3 se copia en el
acumulador 2 y el contenido del acumulador 4 se copia en el acumulador 3. El contenido del
acumulador 4 no cambia despu√©s de ejecutar la instrucci√≥n.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el primer valor de la resta en el acumulador
1.

L "Tag_Value_2"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el segundo valor de la resta en el acumulador 1.

-D

// Restar el valor del acumulador 1 del valor del acumulador 2.

T "Tag_Result"

// Transferir la diferencia al operando "Tag_Result".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar los bits de estado en instrucciones con n√∫meros enteros (P√°gina 190)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

5416

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

*D: Multiplicar enteros dobles (32 bits)
Descripci√≥n
La instrucci√≥n "Multiplicar enteros dobles (32 bits)" multiplica los valores que se encuentran en
los acumuladores 1 y 2. La instrucci√≥n interpreta dichos valores como enteros de 32 bits. La
instrucci√≥n guarda el producto en el acumulador 1.
Tras ejecutar la instrucci√≥n, los bits de estado CC 0 y CC 1 indican si el producto es negativo,
cero o positivo. Si el resultado est√° fuera del rango num√©rico admisible, los bits de estado OV
y OS se ponen a "1".
En los controladores con dos acumuladores, el contenido del acumulador 2 no cambia
despu√©s de ejecutar la instrucci√≥n.
En los controladores con cuatro acumuladores, el contenido del acumulador 3 se copia en el
acumulador 2 y el contenido del acumulador 4 se copia en el acumulador 3. El contenido del
acumulador 4 no cambia despu√©s de ejecutar la instrucci√≥n.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el multiplicando.

L "Tag_Value_2"

// Cargar el multiplicador.

*D

// Multiplicar valores

T "Tag_Result"

// Transferir el producto al operando "Tag_Result".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar los bits de estado en instrucciones con n√∫meros enteros (P√°gina 190)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

/D: Dividir enteros dobles (32 bits)
Descripci√≥n
La instrucci√≥n "Dividir enteros dobles (32 bits)" divide el valor del acumulador 2 por el valor del
acumulador 1. La instrucci√≥n interpreta los valores de los acumuladores 1 y 2 como enteros
dobles (32 bits). La instrucci√≥n guarda el resultado entero de la divisi√≥n (cociente) en el
acumulador 1.
Tras ejecutar la instrucci√≥n, los bits de estado CC 0 y CC 1 indican si el cociente es negativo,
cero o positivo. Si el resultado est√° fuera del rango num√©rico admisible, los bits de estado OV
y OS se ponen a "1".
Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5417

Instrucciones
4.2 Instrucciones
En caso de dividir entre cero, la instrucci√≥n da cero para el cociente. En este caso, los bits de
estado CC 0, CC 1, OV y OS se ponen al estado l√≥gico "1".
En los controladores con dos acumuladores, el contenido del acumulador 2 no cambia
despu√©s de ejecutar la instrucci√≥n.
En los controladores con cuatro acumuladores, el contenido del acumulador 3 se copia en el
acumulador 2 y el contenido del acumulador 4 se copia en el acumulador 3. El contenido del
acumulador 4 no cambia despu√©s de ejecutar la instrucci√≥n.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el dividendo en el acumulador 1.

L "Tag_Value_2"

// Desplazar el dividendo al acumulador 2.
// Cargar el divisor en el acumulador 1.

/D

// Dividir el valor del acumulador 2 entre el valor
del acumulador 1.

T "Tag_Result"

// Transferir el cociente al operando "Tag_Result".

Antes de la ejecuci√≥n
La tabla siguiente muestra los contenidos de los acumuladores 1 y 2 antes de ejecutar la
instrucci√≥n "Dividir enteros dobles (32 bits)":
Acumulador

Valor

Acumulador 2

13

Acumulador 1

4

Despu√©s de la ejecuci√≥n
La tabla siguiente muestra el contenido del acumulador 1 despu√©s de ejecutar la instrucci√≥n
"Dividir enteros dobles (32 bits)":
Acumulador

Valor

Acumulador 1

3

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar los bits de estado en instrucciones con n√∫meros enteros (P√°gina 190)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

5418

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

+: Sumar constantes
Descripci√≥n
La instrucci√≥n "Sumar constantes" suma el valor de una constante concreta al contenido del
acumulador 1. El valor de la constante puede indicarse como entero (16 bits) o entero doble (32
bits). La instrucci√≥n guarda el resultado en el acumulador 1. Cuando se suman enteros de 16
bits, la instrucci√≥n influye solo en la palabra derecha del acumulador 1.
Para ejecutar la suma de un entero de 16 bits como operaci√≥n DINT, antes de la constante hay
que introducir "L#". La instrucci√≥n "Sumar constantes" utiliza n√∫meros negativos.
La instrucci√≥n no influye en los bits de estado.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Sumar constantes":
Par√°metro

Tipo de datos

Descripci√≥n

<Constante>

INT, DINT

Constante que se suma.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1".

+ 25

// Aumentar en 25 el valor del acumulador 1.

T "Tag_Result_1"

// Transferir el contenido del acumulador 1 al operando "Tag_Result_1".

L "Tag_Value_2"

// Cargar el valor del operando "Tag_Value_2" en el
acumulador 1.

L "Tag_Value_3"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_3" en el
acumulador 1.

+ -100

// Reducir en 100 el valor del acumulador 1.

<I

// Consultar si el valor del acumulador 2 es menor que
el valor del acumulador 1.

JC NEXT

// Si el resultado de la consulta es "1", saltar a la
etiqueta NEXT .
// Si el resultado de la consulta es "0", procesar la
instrucci√≥n siguiente.

T "Tag_Result_2"

Transferir el contenido del acumulador 1 al operando
"Tag_Result_2".

L "Tag_Value_4"

// Cargar el valor del operando "Tag_Value_4".

+ L#20

// Incrementar en 20 el contenido del acumulador 1.
// La suma se efect√∫a conforme a un c√°lculo DINT

T "Tag_Result_3"

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

// Transferir el contenido del acumulador 1 al operando "Tag_Result_3".

5419

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

NEXT: L "Tag_Value_5"

// Etiqueta "NEXT"
// Cargar el valor del operando "Tag_Value_5".

+D

// Sumar los valores de los acumuladores 1 y 2.

T "Tag_Result_4"

// Transferir la suma al operando "Tag_Result_4".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar los bits de estado en instrucciones con n√∫meros enteros (P√°gina 190)
Activar los bits de estado en instrucciones con n√∫meros en coma flotante (P√°gina 191)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

INC: Incrementar
Descripci√≥n
La instrucci√≥n "Incrementar" aumenta el valor que se encuentra en el acumulador 1 en el valor
que se indica como par√°metro de la instrucci√≥n. El valor indicado puede estar comprendido en
un rango de valores de 0 a 255. El incremento solo se realiza en el byte derecho del
acumulador 1. No se lleva a cabo ning√∫n traslado a los bytes que est√°n a la izquierda.
La CPU ejecuta la instrucci√≥n independientemente del resultado l√≥gico y los bits de estado. La
instrucci√≥n no influye ni en el resultado l√≥gico ni en los bits de estado.
Los contenidos de los acumuladores 2, 3 y 4 no cambian.
Si el valor del par√°metro est√° fuera del rango de valores, el resultado quedar√° falsificado o bien
se generar√° un mensaje de error.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Incrementar":
Par√°metro

Formato

Descripci√≥n

<Constante>

Entero de 8 bits

Valor que se aumenta.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:

5420

AWL

Explicaci√≥n

L "Tag_Value"

// Cargar el valor del operando en el acumulador 1.

INC 5

// Aumentar en 5 el valor del acumulador 1.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

T "Tag_Result"

// Transferir el contenido del acumulador 1 al operando.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar los bits de estado en instrucciones con n√∫meros enteros (P√°gina 190)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

DEC: Decrementar
Descripci√≥n
La instrucci√≥n "Decrementar" reduce el valor que se encuentra en el acumulador 1 en el valor
que se indica como par√°metro de la instrucci√≥n. El valor indicado puede estar comprendido en
un rango de valores de 0 a 255. El valor solo se reduce en el byte derecho del acumulador 1.
No se lleva a cabo ning√∫n traslado a los bytes que est√°n a la izquierda.
La CPU ejecuta la instrucci√≥n independientemente del resultado l√≥gico y los bits de estado. La
instrucci√≥n no influye ni en el resultado l√≥gico ni en los bits de estado.
Los contenidos de los acumuladores 2, 3 y 4 no cambian.
Si el valor del par√°metro est√° fuera del rango de valores, el resultado quedar√° falsificado o bien
se generar√° un mensaje de error.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Decrementar":
Par√°metro

Formato

Descripci√≥n

<Constante>

Entero de 8 bits

Valor que se decrementa.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value"

// Cargar el valor del operando en el acumulador 1.

DEC 5

// Decrementar en 5 el valor del acumulador 1.

T "Tag_Result"

// Transferir el contenido del acumulador 1 al operando.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5421

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar los bits de estado en instrucciones con n√∫meros enteros (P√°gina 190)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

MOD: Obtener resto de divisi√≥n
Descripci√≥n
La instrucci√≥n "Obtener resto de divisi√≥n" divide el valor del acumulador 2 entre el valor del
acumulador 1 y guardar el resto de la divisi√≥n.
La instrucci√≥n interpreta los valores de los acumuladores 1 y 2 como enteros de 32 bits. La
instrucci√≥n guarda el resto de la divisi√≥n en el acumulador 1.
Tras ejecutar la instrucci√≥n, los bits de estado CC 0 y CC 1 indican si el resto de la divisi√≥n es
negativo, cero o positivo. Si el resultado est√° fuera del rango num√©rico admisible, los bits de
estado OV y OS se ponen a "1".
En caso de dividir entre cero, la instrucci√≥n da cero para el resultado. En este caso, los bits de
estado CC 0, CC 1, OV y OS se ponen al estado l√≥gico "1".
En los controladores con dos acumuladores, el contenido del acumulador 2 no cambia
despu√©s de ejecutar la instrucci√≥n.
En los controladores con cuatro acumuladores, el contenido del acumulador 3 se copia en el
acumulador 2 y el contenido del acumulador 4 se copia en el acumulador 3. El contenido del
acumulador 4 no cambia despu√©s de ejecutar la instrucci√≥n.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el dividendo en el acumulador 1.

L "Tag_Value_2"

// Desplazar el dividendo al acumulador 2.
// Cargar el divisor en el acumulador 1.

5422

MOD

// Dividir el valor del acumulador 2 entre el valor
del acumulador 1.

T "Tag_Result"

// Transferir el resto de la divisi√≥n al operando
"Tag_Result".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Antes de la ejecuci√≥n
La tabla siguiente muestra los contenidos de los acumuladores 1 y 2 antes de ejecutar la
instrucci√≥n "Obtener resto de divisi√≥n":
Acumulador

Valor

Acumulador 2

13

Acumulador 1

4

Despu√©s de la ejecuci√≥n
La tabla siguiente muestra el contenido del acumulador 1 despu√©s de ejecutar la instrucci√≥n
"Obtener resto de divisi√≥n":
Acumulador

Valor

Acumulador 1

1

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar los bits de estado en instrucciones con n√∫meros enteros (P√°gina 190)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

N√∫meros en coma flotante
+R: Sumar n√∫meros en coma flotante
Descripci√≥n
La instrucci√≥n "Sumar n√∫meros en coma flotante" suma los valores que se encuentran en los
acumuladores 1 y 2. La instrucci√≥n interpreta dichos valores como n√∫meros en coma flotante.
La instrucci√≥n guarda la suma en el acumulador 1.
Tras ejecutar la instrucci√≥n, los bits de estado CC 0 y CC 1 indican si la suma es negativa, cero
o positiva. Si el resultado est√° fuera del rango num√©rico admisible, los bits de estado OV y OS
se ponen a "1".
Si se introduce un n√∫mero en coma flotante no v√°lido o el car√°cter de infinito (+/- ‚àû), la
instrucci√≥n escribe un valor no v√°lido en el acumulador 1 y pone los bits de estado CC 0, CC
1, OV y OS a "1".
En los controladores con dos acumuladores, el contenido del acumulador 2 no cambia
despu√©s de ejecutar la instrucci√≥n.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5423

Instrucciones
4.2 Instrucciones
En los controladores con cuatro acumuladores, el contenido del acumulador 3 se copia en el
acumulador 2 y el contenido del acumulador 4 se copia en el acumulador 3. El contenido del
acumulador 4 no cambia despu√©s de ejecutar la instrucci√≥n.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el primer sumando.

L "Tag_Value_2"

// Cargar el segundo sumando.

+R

// Sumar valores

T "Tag_Result"

// Transferir la suma al operando "Tag_Result".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros en coma flotante (P√°gina 191)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

-R: Restar n√∫meros en coma flotante
Descripci√≥n
La instrucci√≥n "Restar n√∫meros en coma flotante" resta el valor del acumulador 1 del valor del
acumulador 2. La instrucci√≥n interpreta los valores de los acumuladores 1 y 2 como n√∫meros
en coma flotante. La instrucci√≥n guarda la diferencia en el acumulador 1.
Tras ejecutar la instrucci√≥n, los bits de estado CC 0 y CC 1 indican si la diferencia es negativa,
cero o positiva. Si el resultado est√° fuera del rango num√©rico admisible, los bits de estado OV
y OS se ponen a "1".
Si se introduce un n√∫mero en coma flotante no v√°lido o el car√°cter de infinito (+/- ‚àû), la
instrucci√≥n escribe un valor no v√°lido en el acumulador 1 y pone los bits de estado CC 0, CC
1, OV y OS a "1".
En los controladores con dos acumuladores, el contenido del acumulador 2 no cambia
despu√©s de ejecutar la instrucci√≥n.
En los controladores con cuatro acumuladores, el contenido del acumulador 3 se copia en el
acumulador 2 y el contenido del acumulador 4 se copia en el acumulador 3. El contenido del
acumulador 4 no cambia despu√©s de ejecutar la instrucci√≥n.

5424

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el primer valor de la resta en el acumulador
1.

L "Tag_Value_2"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el segundo valor de la resta en el acumulador 1.

-R

// Restar el valor del acumulador 1 del valor del acumulador 2.

T "Tag_Result"

// Transferir la diferencia al operando "Tag_Result".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros en coma flotante (P√°gina 191)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

*R: Multiplicar n√∫meros en coma flotante
Descripci√≥n
La instrucci√≥n "Multiplicar n√∫meros en coma flotante" multiplica los valores que se encuentran
en los acumuladores 1 y 2. La instrucci√≥n interpreta dichos valores como n√∫meros en coma
flotante. La instrucci√≥n guarda el producto en el acumulador 1.
Tras ejecutar la instrucci√≥n, los bits de estado CC 0 y CC 1 indican si el producto es negativo,
cero o positivo. Si el resultado est√° fuera del rango num√©rico admisible, los bits de estado OV
y OS se ponen a "1".
Si se introduce un n√∫mero en coma flotante no v√°lido o el car√°cter de infinito (+/- ‚àû), la
instrucci√≥n escribe un valor no v√°lido en el acumulador 1 y pone los bits de estado CC 0, CC
1, OV y OS a "1".
En los controladores con dos acumuladores, el contenido del acumulador 2 no cambia
despu√©s de ejecutar la instrucci√≥n.
En los controladores con cuatro acumuladores, el contenido del acumulador 3 se copia en el
acumulador 2 y el contenido del acumulador 4 se copia en el acumulador 3. El contenido del
acumulador 4 no cambia despu√©s de ejecutar la instrucci√≥n.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5425

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el multiplicando.

L "Tag_Value_2"

// Cargar el multiplicador.

*R

// Multiplicar valores

T "Tag_Result"

// Transferir el producto al operando "Tag_Result".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros en coma flotante (P√°gina 191)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

/R: Dividir n√∫meros en coma flotante
Descripci√≥n
La instrucci√≥n "Dividir n√∫meros en coma flotante" divide el valor del acumulador 2 por el valor
del acumulador 1. La instrucci√≥n interpreta los valores de los acumuladores 1 y 2 como
n√∫meros en coma flotante. La instrucci√≥n guarda el resultado entero de la divisi√≥n (cociente)
en el acumulador 1.
Tras ejecutar la instrucci√≥n, los bits de estado CC 0 y CC 1 indican si el cociente es negativo,
cero o positivo. Si el resultado est√° fuera del rango num√©rico admisible, los bits de estado OV
y OS se ponen a "1".
En caso de dividir entre cero, la instrucci√≥n da cero para el cociente. En este caso, los bits de
estado CC 0, CC 1, OV y OS se ponen al estado l√≥gico "1".
Si se introduce un n√∫mero en coma flotante no v√°lido o el car√°cter de infinito (+/- ‚àû), la
instrucci√≥n escribe un valor no v√°lido en el acumulador 1 y pone los bits de estado CC 0, CC
1, OV y OS a "1".
En los controladores con dos acumuladores, el contenido del acumulador 2 no cambia
despu√©s de ejecutar la instrucci√≥n.
En los controladores con cuatro acumuladores, el contenido del acumulador 3 se copia en el
acumulador 2 y el contenido del acumulador 4 se copia en el acumulador 3. El contenido del
acumulador 4 no cambia despu√©s de ejecutar la instrucci√≥n.

5426

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el dividendo en el acumulador 1.

L "Tag_Value_2"

// Desplazar el dividendo al acumulador 2.
// Cargar el divisor en el acumulador 1.

/R

// Dividir el valor del acumulador 2 entre el valor
del acumulador 1.

T "Tag_Result"

// Transferir el cociente al operando "Tag_Result".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros en coma flotante (P√°gina 191)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

ABS: Calcular valor absoluto
Descripci√≥n
La instrucci√≥n "Calcular valor absoluto" calcula el valor absoluto del valor que se encuentra en
el acumulador 1. La instrucci√≥n interpreta el contenido del acumulador 1 como n√∫mero en
coma flotante y pone el signo de la mantisa a "0". El resultado se guarda en el acumulador 1.
La instrucci√≥n "Calcular valor absoluto" no influye en los bits de estado.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value"

// Cargar el n√∫mero en coma flotante en el acumulador
1.

ABS

// Calcular el valor absoluto

T "Tag_Result"

// Transferir el resultado al operando "Tag_Result".

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Value

-1.5E+02

Tag_Result

1.5E+02

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5427

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

N√∫meros en coma flotante, avanzado
SQR: Calcular cuadrado
Descripci√≥n
La instrucci√≥n "Calcular cuadrado" calcula el cuadrado de un n√∫mero en coma flotante que se
encuentra en el acumulador 1. El resultado se guarda en el acumulador 1.
Tras ejecutar la instrucci√≥n, los bits de estado CC 0 y CC 1 indican si el resultado es negativo,
cero o positivo. Si el resultado est√° fuera del rango num√©rico admisible, los bits de estado OV
y OS se ponen a "1".
Si los n√∫meros en coma flotante no son v√°lidos, la instrucci√≥n pone los bits de estado CC 0, CC
1, OV y OS a "1".
La instrucci√≥n solo influye en el contenido del acumulador 1. Los contenidos de los
acumuladores restantes no cambian.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1" en el
acumulador 1.

SQR

// Calcular el cuadrado
// Guardar el resultado en el acumulador 1.

L "Tag_Value_2"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_2" en el
acumulador 1.

*R

// Multiplicar los valores de los acumuladores 1 y 2.
// Guardar el producto en el acumulador 1.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros en coma flotante (P√°gina 191)
Principios b√°sicos de la palabra de estado (P√°gina 184)

5428

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

SQRT: Calcular ra√≠z cuadrada
Descripci√≥n
La instrucci√≥n "Calcular ra√≠z cuadrada" calcula la ra√≠z cuadrada del n√∫mero en coma flotante
que se encuentra en el acumulador 1. El resultado se guarda en el acumulador 1.
Tras ejecutar la instrucci√≥n, los bits de estado CC 0 y CC 1 indican si el resultado es negativo,
cero o positivo. Si el resultado est√° fuera del rango num√©rico admisible, los bits de estado OV
y OS se ponen a "1".
Si en el acumulador 1 se introduce un valor inferior a cero o un n√∫mero en coma flotante no
v√°lido, la instrucci√≥n escribe un valor no v√°lido en el acumulador 1 y pone los bits de estado CC
0, CC 1, OV y OS a "1".
Si en el acumulador 1 se encuentra el valor "0", la instrucci√≥n devuelve el valor "0".
La instrucci√≥n solo influye en el contenido del acumulador 1. Los contenidos de los
acumuladores restantes no cambian.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1" en el
acumulador 1.

L "Tag_Value_2"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_2" en el
acumulador 1.

+R

// Sumar los valores de los acumuladores 1 y 2.
// Guardar la suma en el acumulador 1.

SQRT

// Calcular la ra√≠z cuadrada

T "Tag_Result"

// Transferir el resultado (contenido del acumulador
1) al operando "Tag_Result".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros en coma flotante (P√°gina 191)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5429

Instrucciones
4.2 Instrucciones

EXP: Calcular valor exponencial
Descripci√≥n
La instrucci√≥n "Calcular valor exponencial" calcula la potencia en base e (e = 2.718282) del
n√∫mero en coma flotante que se encuentra en el acumulador 1. La instrucci√≥n guarda el
resultado en el acumulador 1.
Tras ejecutar la instrucci√≥n, los bits de estado CC 0 y CC 1 indican si el resultado es negativo,
cero o positivo. Si el resultado est√° fuera del rango num√©rico admisible, los bits de estado OV
y OS se ponen a "1".
Si los n√∫meros en coma flotante no son v√°lidos, la instrucci√≥n pone los bits de estado CC 0, CC
1, OV y OS a "1".
La instrucci√≥n solo influye en el contenido del acumulador 1. Los contenidos de los
acumuladores restantes no cambian.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1" en el
acumulador 1.

EXP

// Calcular el valor exponencial
// Guardar el resultado en el acumulador 1.

T "Tag_Result"

// Transferir el resultado (contenido del acumulador
1) al operando "Tag_Result".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros en coma flotante (P√°gina 191)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

LN: Calcular el logaritmo natural
Descripci√≥n
La instrucci√≥n "Calcular logaritmo natural" calcula el logaritmo natural en base e (e = 2.718282)
a partir del n√∫mero en coma flotante que se encuentra en el acumulador 1.
Tras ejecutar la instrucci√≥n, los bits de estado CC 0 y CC 1 indican si el resultado es negativo,
cero o positivo. Si el resultado est√° fuera del rango num√©rico admisible, los bits de estado OV
y OS se ponen a "1".

5430

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Si en el acumulador 1 hay un valor inferior o igual a cero, la instrucci√≥n escribe un valor no
v√°lido en el acumulador 1 y pone los bits de estado CC 0, CC 1, OV y OS a "1". Si los n√∫meros
en coma flotante no son v√°lidos, la instrucci√≥n pone los bits de estado CC 0, CC 1, OV y OS
tambi√©n a "1".
La instrucci√≥n solo influye en el contenido del acumulador 1. Los contenidos de los
acumuladores restantes no cambian.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1" en el
acumulador 1.

LN

// Calcular el logaritmo natural
// Guardar el resultado en el acumulador 1.

T "Tag_Result"

// Transferir el resultado (contenido del acumulador
1) al operando "Tag_Result".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros en coma flotante (P√°gina 191)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

SIN: Calcular valor de seno
Descripci√≥n
La instrucci√≥n "Calcular valor de seno" calcula el seno del √°ngulo que se encuentra en el
acumulador 1. El √°ngulo debe indicarse en radianes y encontrarse en el acumulador 1 en forma
de n√∫mero en coma flotante. La instrucci√≥n guarda el resultado en el acumulador 1.
Tras ejecutar la instrucci√≥n, los bits de estado CC 0 y CC 1 indican si el resultado es negativo,
cero o positivo. Si el resultado est√° fuera del rango num√©rico admisible, los bits de estado OV
y OS se ponen a "1". Si los n√∫meros en coma flotante no son v√°lidos, la instrucci√≥n pone los
bits de estado CC 0, CC 1, OV y OS a "1".
La instrucci√≥n solo influye en el contenido del acumulador 1. Los contenidos de los
acumuladores restantes no cambian.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5431

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1" en el
acumulador 1.

SIN

// Calcular el seno
// Guardar el resultado en el acumulador 1.

L "Tag_Value_2"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_2" en el
acumulador 1.

*R

// Multiplicar los valores de los acumuladores 1 y 2.
// Guardar el producto en el acumulador 1.

T "Tag_Result"

// Transferir el resultado (contenido del acumulador
1) al operando "Tag_Result".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros en coma flotante (P√°gina 191)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

ASIN: Calcular arcoseno
Descripci√≥n
La instrucci√≥n "Calcular valor de arcoseno" calcula, a partir del valor que se encuentra en el
acumulador 1, el tama√±o del √°ngulo que corresponde a dicho valor. El valor del acumulador 1
debe encontrarse en forma de n√∫mero en coma flotante en un rango de valores de "-1" a "1".
El resultado de la instrucci√≥n se devuelve en radianes y se guarda en el acumulador 1. Seg√∫n
sea el valor del acumulador 1, el resultado puede encontrarse en un rango de valores de -œÄ/2
a +œÄ/2 (œÄ = 3,14159).
Tras ejecutar la instrucci√≥n, los bits de estado CC 0 y CC 1 indican si el resultado es negativo,
cero o positivo. Si el resultado est√° fuera del rango num√©rico admisible, los bits de estado OV
y OS se ponen a "1".
Si el valor que est√° en el acumulador 1 rebasa por exceso el rango admisible, la instrucci√≥n
escribe un n√∫mero en coma flotante no v√°lido en el acumulador 1 y pone los bits de estado CC
0, CC 1, OV y OS a "1". Si los n√∫meros en coma flotante no son v√°lidos, la instrucci√≥n pone los
bits de estado CC 0, CC 1, OV y OS tambi√©n a "1".
La instrucci√≥n solo influye en el contenido del acumulador 1. Los contenidos de los
acumuladores restantes no cambian.

5432

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1" en el
acumulador 1.

ASIN

// Calcular el arcoseno
// Guardar el resultado en el acumulador 1.

L "Tag_Value_2"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_2" en el
acumulador 1.

*R

// Multiplicar los valores de los acumuladores 1 y 2.
// Guardar el producto en el acumulador 1.

T "Tag_Result"

// Transferir el resultado (contenido del acumulador
1) al operando "Tag_Result".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros en coma flotante (P√°gina 191)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

COS: Calcular valor de coseno
Descripci√≥n
La instrucci√≥n "Calcular valor de coseno" calcula el coseno del √°ngulo que se encuentra en el
acumulador 1. El tama√±o del √°ngulo debe indicarse en radianes y encontrarse en el
acumulador 1 en forma de n√∫mero en coma flotante. La instrucci√≥n guarda el resultado en el
acumulador 1.
Tras ejecutar la instrucci√≥n, los bits de estado CC 0 y CC 1 indican si el resultado es negativo,
cero o positivo. Si el resultado est√° fuera del rango num√©rico admisible, los bits de estado OV
y OS se ponen a "1". Si los n√∫meros en coma flotante no son v√°lidos, la instrucci√≥n pone los
bits de estado CC 0, CC 1, OV y OS a "1".
La instrucci√≥n solo influye en el contenido del acumulador 1. Los contenidos de los
acumuladores restantes no cambian.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5433

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1" en el
acumulador 1.

COS

// Calcular el coseno
// Guardar el resultado en el acumulador 1.

L "Tag_Value_2"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_2" en el
acumulador 1.

*R

// Multiplicar los valores de los acumuladores 1 y 2.
// Guardar el producto en el acumulador 1.

T "Tag_Result"

// Transferir el resultado (contenido del acumulador
1) al operando "Tag_Result".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros en coma flotante (P√°gina 191)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

ACOS: Calcular valor de arcocoseno
Descripci√≥n
La instrucci√≥n "Calcular valor de arcocoseno" calcula, a partir del valor que se encuentra en el
acumulador 1, el tama√±o del √°ngulo que corresponde a dicho valor. El valor del acumulador 1
debe encontrarse en forma de n√∫mero en coma flotante en un rango de valores de "-1" a "1".
El resultado de la instrucci√≥n se devuelve en radianes y se guarda en el acumulador 1. Seg√∫n
sea el valor del acumulador 1, el resultado puede encontrarse en un rango de valores de "0"
a "œÄ" (œÄ = 3,14159).
Tras ejecutar la instrucci√≥n, los bits de estado CC 0 y CC 1 indican si el resultado es negativo,
cero o positivo. Si el resultado est√° fuera del rango num√©rico admisible, los bits de estado OV
y OS se ponen a "1".
Si el valor que est√° en el acumulador 1 rebasa por exceso el rango admisible, la instrucci√≥n
escribe un n√∫mero en coma flotante no v√°lido en el acumulador 1 y pone los bits de estado CC
0, CC 1, OV y OS a "1". Si los n√∫meros en coma flotante no son v√°lidos, la instrucci√≥n pone los
bits de estado CC 0, CC 1, OV y OS tambi√©n a "1".
La instrucci√≥n solo influye en el contenido del acumulador 1. Los contenidos de los
acumuladores restantes no cambian.

5434

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1" en el
acumulador 1.

ACOS

// Calcular el arcocoseno
// Guardar el resultado en el acumulador 1.

L "Tag_Value_2"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_2" en el
acumulador 1.

*R

// Multiplicar los valores de los acumuladores 1 y 2.
// Guardar el producto en el acumulador 1.

T "Tag_Result"

// Transferir el resultado (contenido del acumulador
1) al operando "Tag_Result".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros en coma flotante (P√°gina 191)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

TAN: Calcular valor de tangente
Descripci√≥n
La instrucci√≥n "Calcular valor de tangente" calcula la tangente del √°ngulo que se encuentra en
el acumulador 1. El tama√±o del √°ngulo debe indicarse en radianes y encontrarse en el
acumulador 1 en forma de n√∫mero en coma flotante. La instrucci√≥n guarda el resultado en el
acumulador 1.
Tras ejecutar la instrucci√≥n, los bits de estado CC 0 y CC 1 indican si el resultado es negativo,
cero o positivo. Si el resultado est√° fuera del rango num√©rico admisible, los bits de estado OV
y OS se ponen a "1". Si los n√∫meros en coma flotante no son v√°lidos, la instrucci√≥n pone los
bits de estado CC 0, CC 1, OV y OS a "1".
La instrucci√≥n solo influye en el contenido del acumulador 1. Los contenidos de los
acumuladores restantes no cambian.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5435

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1" en el
acumulador 1.

TAN

// Calcular la tangente
// Guardar el resultado en el acumulador 1.

L "Tag_Value_2"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_2" en el
acumulador 1.

*R

// Multiplicar los valores de los acumuladores 1 y 2.
// Guardar el producto en el acumulador 1.

T "Tag_Result"

// Transferir el resultado (contenido del acumulador
1) al operando "Tag_Result".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros en coma flotante (P√°gina 191)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

ATAN: Calcular valor de arcotangente
Descripci√≥n
La instrucci√≥n "Calcular valor de arcotangente" calcula, a partir del valor que se encuentra en
el acumulador 1, el tama√±o del √°ngulo que corresponde a dicho valor. El valor del acumulador
1 debe encontrarse en forma de n√∫mero en coma flotante.
El resultado de la instrucci√≥n se devuelve en radianes y se guarda en el acumulador 1. Seg√∫n
sea el valor del acumulador 1, el resultado puede encontrarse en un rango de valores de -œÄ/2
a +œÄ/2 (œÄ = 3,14159).
Tras ejecutar la instrucci√≥n, los bits de estado CC 0 y CC 1 indican si el resultado es negativo,
cero o positivo. Si el resultado est√° fuera del rango num√©rico admisible, los bits de estado OV
y OS se ponen a "1".
Si el valor que est√° en el acumulador 1 rebasa por exceso el rango admisible, la instrucci√≥n
escribe un n√∫mero en coma flotante no v√°lido en el acumulador 1 y pone los bits de estado CC
0, CC 1, OV y OS a "1". Si los n√∫meros en coma flotante no son v√°lidos, la instrucci√≥n pone los
bits de estado CC 0, CC 1, OV y OS tambi√©n a "1".
La instrucci√≥n solo influye en el contenido del acumulador 1. Los contenidos de los
acumuladores restantes no cambian.

5436

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1" en el
acumulador 1.

ATAN

// Calcular la arcotangente
// Guardar el resultado en el acumulador 1.

L "Tag_Value_2"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_2" en el
acumulador 1.

*R

// Multiplicar los valores de los acumuladores 1 y 2.
// Guardar el producto en el acumulador 1.

T "Tag_Result"

// Transferir el resultado (contenido del acumulador
1) al operando "Tag_Result".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros en coma flotante (P√°gina 191)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

Carga y transferencia
Carga
L: Cargar
Descripci√≥n
La instrucci√≥n "Cargar" carga el contenido de un operando concreto en el acumulador 1. El
operando que debe cargarse puede estar direccionado en una de las √°reas de memoria
siguientes en forma de byte, palabra o palabra doble:
‚óè Memoria imagen de proceso de las entradas y salidas (I, Q)
‚óè Marcas (M)
‚óè Datos locales temporales (L)
‚óè Bloques de datos (DB, DI)
‚óè Punteros
‚óè Periferia (P)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5437

Instrucciones
4.2 Instrucciones
‚óè Temporizador (T)
‚óè Contador (C)
El √°rea de memoria del acumulador 1 est√° organizada por bytes y tiene 32 bits de ancho.
La instrucci√≥n escribe el contenido de un operando que se cargar√° en formato de byte alineado
a la derecha en el acumulador 1. Los bytes restantes del acumulador 1 se rellenan con "0".
La instrucci√≥n escribe el contenido de un operando que se cargar√° en formato de palabra en
la palabra derecha del acumulador 1. El byte con un direccionamiento m√°s alto se transfiere al
byte derecho (bits 0 a 7) del acumulador 1. El byte con un direccionamiento m√°s bajo se
escribe a su izquierda. Los bytes restantes de la palabra izquierda del acumulador 1 se
rellenan con "0".
La instrucci√≥n escribe el contenido de un operando que se cargar√° en formato de palabra doble
en los 32 bits del acumulador 1. El byte con un direccionamiento m√°s alto se transfiere al byte
derecho (bits 0 a 7) del acumulador 1. El byte con el direccionamiento m√°s bajo se escribe en
los bits 24 y 31.
La tabla siguiente muestra a modo de ejemplo c√≥mo el contenido del acumulador 1 se
transforma en formato de byte, palabra y palabra doble al cargar operandos:
Instrucci√≥n

Acumulador 1
31 . . .

. . . 24

23 . . .

. . . 16

15 . . .

...8

7...

Cargar un
byte:
L MB10

0000

0000

0000

0000

0000

0000

<MB10>

Cargar una
palabra:
L MW10

0000

0000

0000

0000

<MB10>

<MB11>

Cargar una
palabra do‚Äê
ble:
L MD10

<MB10>

<MB12>

<MB13>

<MB11>

...0

Al cargar el operando indicado, el contenido previo del acumulador 1 se desplaza al
acumulador 2. La instrucci√≥n "Cargar" transfiere todo el contenido del acumulador 1 al
acumulador 2. El contenido previo del acumulador 2 se pierde.
En los controladores con cuatro acumuladores, los contenidos de los acumuladores 3 y 4 no
se ven influidos por esta instrucci√≥n.
La CPU ejecuta la instrucci√≥n independientemente del resultado l√≥gico y los bits de estado. La
instrucci√≥n no influye ni en el resultado l√≥gico ni en los bits de estado.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Cargar":

5438

Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Operando>

Input

Secuencias de
bits, enteros, tem‚Äê
porizadores,
REAL, DATE,
TOD, CHAR.

I, Q, PI, M, L, DB,
DI, T, C, puntero,
par√°metro

Operando cuyo contenido se
carga.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1" en el
acumulador 1.

L "Tag_Value_2"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_2" en el
acumulador 1.

*R

// Multiplicar los valores de los acumuladores 1 y 2.
// Guardar el producto en el acumulador 1.

L "Tag_Value_3"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_3" en el
acumulador 1.

+R

// Sumar los valores de los acumuladores 1 y 2.
// Guardar la suma en el acumulador 1.

T "Tag_Result"

// Transferir el resultado (contenido del acumulador
1) al operando "Tag_Result".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)
Ejemplos de programaci√≥n AWL (P√°gina 8102)

L STW: Cargar palabra de estado en acumulador 1
Descripci√≥n
La instrucci√≥n "Cargar palabra de estado en acumulador 1" carga la palabra de estado en el
acumulador 1. Al ejecutarse, la instrucci√≥n escribe los bits de estado en la palabra derecha del
acumulador 1. Los bits restantes del acumulador 1 se rellenan con "0".
La tabla siguiente muestra el contenido del acumulador despu√©s de ejecutar la instrucci√≥n
"Cargar palabra de estado en acumulador 1":
Acumulador 1
N√∫mero de bit

31-9

8

7

6

5

4

3

2

1

0

Contenido

0

BR

CC 1

CC 0

OV

OS

OR

STA

RLO

/FC

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5439

Instrucciones
4.2 Instrucciones
Esta instrucci√≥n se ejecuta independientemente del estado l√≥gico del bit de estado.
Nota
Los controladores de la serie S7-300 (excepto el S7-318) no cargan los bits de estado /FC, STA
y OR en el acumulador 1. Estas posiciones se rellenan con "0".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L STW

// Cargar palabra de estado en acumulador 1.

T "Tag_STW"

// Transferir el contenido del acumulador 1 (bits de
estado) al operando "Tag_STW".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

LAR1: Cargar contenido del acumulador 1 en AR1
Descripci√≥n
La instrucci√≥n "Cargar contenido del acumulador 1 en AR1" carga el contenido del acumulador
1 en el registro de direcciones 1 (AR1). El valor del acumulador 1 debe equivaler al formato de
un puntero de √°rea (POINTER).
La CPU ejecuta la instrucci√≥n independientemente del resultado l√≥gico y los bits de estado. La
instrucci√≥n no influye ni en el resultado l√≥gico ni en los bits de estado.
Los contenidos de los acumuladores no cambian debido a la instrucci√≥n.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:

5440

AWL

Explicaci√≥n

L P#10.0

// Cargar el puntero (P#10.0) en el acumulador 1.

LAR1

// Cargar el contenido del acumulador 1 en el registro
de direcciones 1.

L MW [AR1,P#4.0]

// Cargar MW14 en acumulador 1.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

L "Tag_Value"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el contenido del operando "Tag_Value" en el
acumulador 1.

>I

// Comparar si el valor del acumulador 2 es mayor que
el valor del acumulador 1.

A I [AR1,P#2.1]

// Consultar si el estado l√≥gico del bit I12.1 es "1"
y combinar el resultado l√≥gicamente con Y con el RLO
actual.

= "Tag_Output"

// Si la condici√≥n se cumple (RLO = "1"), poner el
operando "Tag_Output" a "1".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

LAR1 <D>: Cargar palabra doble o puntero de √°rea en AR1
Descripci√≥n
La instrucci√≥n "Cargar palabra doble o puntero de √°rea en AR1" carga el contenido de una
palabra doble o de un puntero intra√°rea o inter√°rea en el registro de direcciones 1 (AR1). El
contenido de la palabra doble debe equivaler al formato de un puntero de √°rea.
El puntero y la palabra doble pueden estar direccionados en una de las √°reas de memoria
siguientes:
‚óè Marcas (M)
‚óè Datos locales temporales (L)
‚óè Bloques de datos (DB, DI)
La CPU ejecuta la instrucci√≥n independientemente del resultado l√≥gico y los bits de estado. La
instrucci√≥n no influye ni en el resultado l√≥gico ni en los bits de estado.
Los contenidos de los acumuladores no cambian debido a la instrucci√≥n.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5441

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Cargar palabra doble o puntero de
√°rea en AR1":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<D>

Input

DWORD, POIN‚Äê
TER

D, M, L

Operando cuyo contenido se
carga.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

LAR1 P#10.0

// Cargar el contenido del puntero intra√°rea P#10.0 en
el registro de direcciones 1.

L MW [AR1,P#4.0]

// Cargar MW14 en el acumulador 1.

L "Tag_Value"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el contenido del operando "Tag_Value" en el
acumulador 1.

>I

// Comparar si el valor del acumulador 2 es mayor que
el valor del acumulador 1.

A I [AR1,P#2.1]

// Consultar si el estado l√≥gico del bit I12.1 es "1"
y combinar el resultado l√≥gicamente con Y con el RLO
actual.

= "Tag_Output"

// Si la condici√≥n se cumple (RLO= "1"), poner el operando "Tag_Output" a "1".

LAR1 MD20

// Cargar el contenido de MD20 (MD20 = P#30.0) en el
registro de direcciones 1.

A I [AR1,P#2.1]

// Consultar si el estado l√≥gico del bit I32.1 es "1"
y combinar el resultado l√≥gicamente con Y con el RLO
actual.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

5442

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

LAR1 AR2: Cargar contenido del AR2 en AR1
Descripci√≥n
La instrucci√≥n "Cargar contenido del AR2 en AR1" carga el contenido del registro de
direcciones 2 (AR2) en el registro de direcciones 1 (AR1).
La CPU ejecuta la instrucci√≥n independientemente del resultado l√≥gico y los bits de estado. La
instrucci√≥n no influye ni en el resultado l√≥gico ni en los bits de estado.
Los contenidos de los acumuladores no cambian debido a la instrucci√≥n.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

LAR2 P#20.0

// Cargar el contenido del puntero intra√°rea P#20.0 en
el registro de direcciones 2.

LAR1 AR2

// Copiar el contenido del registro de direcciones 2
en el registro de direcciones 1.

L MW [AR1,P#4.0]

// Cargar MW24 en el acumulador 1.

T "Tag_2"

// Transferir el acumulador 1 a "Tag_2".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

LAR2: Cargar contenido del acumulador 1 en AR2
Descripci√≥n
La instrucci√≥n "Cargar contenido del acumulador 1 en AR2" carga el contenido del acumulador
1 en el registro de direcciones 2 (AR2). El valor del acumulador 1 debe equivaler al formato de
un puntero de √°rea (POINTER).
La CPU ejecuta la instrucci√≥n independientemente del resultado l√≥gico y los bits de estado. La
instrucci√≥n no influye ni en el resultado l√≥gico ni en los bits de estado.
Los contenidos de los acumuladores no cambian debido a la instrucci√≥n.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5443

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L P#10.0

// Cargar el puntero (P#10.0) en el acumulador 1.

LAR2

// Cargar el contenido del acumulador 1 en el registro
de direcciones 2.

L MW [AR2,P#4.0]

// Cargar MW14 en el acumulador 1.

L "Tag_Value"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el contenido del operando "Tag_Value" en el
acumulador 1.

>I

// Comparar si el valor del acumulador 2 es mayor que
el valor del acumulador 1.

A I [AR2,P#2.1]

// Consultar si el estado l√≥gico del bit I12.1 es "1"
y combinar el resultado l√≥gicamente con Y con el RLO
actual.

= "Tag_Output"

// Si la condici√≥n se cumple (RLO = "1"), poner el
operando "Tag_Output" a "1".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

LAR2 <D>: Cargar palabra doble o puntero de √°rea en AR2
Descripci√≥n
La instrucci√≥n "Cargar palabra doble o puntero de √°rea en AR2" carga el contenido de una
palabra doble o de un puntero intra√°rea o inter√°rea en el registro de direcciones 2 (AR2). El
contenido de la palabra doble debe equivaler al formato de un puntero de √°rea (POINTER).
El puntero y la palabra doble pueden estar direccionados en una de las √°reas de memoria
siguientes:
‚óè Marcas (M)
‚óè Datos locales temporales (L)
‚óè Bloques de datos (DB, DI)
La CPU ejecuta la instrucci√≥n independientemente del resultado l√≥gico y los bits de estado. La
instrucci√≥n no influye ni en el resultado l√≥gico ni en los bits de estado.
Los contenidos de los acumuladores no cambian debido a la instrucci√≥n.

5444

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Sintaxis
Para la instrucci√≥n "Cargar palabra doble o puntero de √°rea en AR2" se utiliza la siguiente
sintaxis:

LAR2 <D>

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Cargar palabra doble o puntero de
√°rea en AR2":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<D>

Input

DWORD, POIN‚Äê
TER

D, M, L

Operando cuyo contenido se
carga.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

LAR2 P#10.0

// Cargar el contenido del puntero intra√°rea P#10.0 en
el registro de direcciones 2.

L MW [AR2,P#4.0]

// Cargar MW14 en el acumulador 1.

L "Tag_Value"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el contenido del operando "Tag_Value" en el
acumulador 1.

>I

// Comparar si el valor del acumulador 2 es mayor que
el valor del acumulador 1.

A I [AR2,P#2.1]

// Consultar si el estado l√≥gico del bit I12.1 es "1"
y combinar el resultado l√≥gicamente con Y con el RLO
actual.

= "Tag_Output"

// Si la condici√≥n se cumple (RLO = "1"), poner el
operando "Tag_Output" a "1".

LAR2 MD20

// Cargar el contenido de MD20 (MD20 = P#30.0) en el
registro de direcciones 2.

A I [AR2,P#2.1]

// Consultar si el estado l√≥gico del bit I32.1 es "1"
y combinar el resultado l√≥gicamente con Y con el RLO
actual.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5445

Instrucciones
4.2 Instrucciones
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

Transferir
T: Transferir
Descripci√≥n
La instrucci√≥n "Transferir" transfiere el contenido del acumulador 1 a un operando concreto por
bytes, palabras o palabras dobles. El contenido del acumulador 1 no cambia. El operando
indicado debe estar direccionado en una de las √°reas de memoria siguientes:
‚óè Memoria imagen de proceso de las entradas y salidas (I, Q)
‚óè Marcas (M)
‚óè Datos locales temporales (L)
‚óè Bloques de datos (DB, DI)
‚óè Periferia (PQ)
El n√∫mero de bytes que se transferir√°n depende del formato del operando indicado. Si el
operando est√° en formato de byte, la instrucci√≥n transfiere el contenido de los bits 0 a 7 del
acumulador 1.
Si el operando indicado est√° en formato de palabra, la instrucci√≥n transfiere el contenido de la
palabra que est√° alineada a la derecha en el acumulador 1. El byte derecho del acumulador 1
se transfiere al byte con un direccionamiento m√°s alto en el operando. Al byte con un
direccionamiento m√°s bajo del operando se transfieren los bits de 8 a 15 del acumulador 1.
Si el operando indicado est√° en formato de palabra doble, la instrucci√≥n transfiere todo el
contenido del acumulador 1. El byte derecho del acumulador 1 se transfiere al byte con el
direccionamiento m√°s alto del operando. Al byte con un direccionamiento m√°s bajo del
operando se transfieren los bits 24 a 31 del acumulador 1.
La tabla siguiente muestra un ejemplo de c√≥mo se transfiere el contenido del acumulador 1 por
bytes, palabras o palabras dobles:
Instrucci√≥n

Acumulador 1

Bits

31 . . ... . 24

23 . . . . . . 16

15 . . .. . . 8

7......0

Contenido del acu‚Äê
mulador 1

Byte (n)

Byte (n+1)

Byte (n+2)

Byte (n+3)

Byte (n+2)

Byte (n+3)

Byte (n+2)

Byte (n+3)

Transferir un byte

Byte (n+3)

Transferir una pala‚Äê
bra
Transferir una pala‚Äê
bra doble

Byte (n)

Byte (n+1)

La CPU ejecuta la instrucci√≥n independientemente del resultado l√≥gico y los bits de estado. La
instrucci√≥n no influye ni en el resultado l√≥gico ni en los bits de estado.

5446

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
La ejecuci√≥n de la instrucci√≥n "Transferir" se ve influida por el Master Control Relay (MCR). Si
el bit MCR se pone a "0", se transfiere el valor "0" al operando indicado.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Transferir":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Operando>

Output

Secuencias de
bits, enteros, tem‚Äê
porizadores,
REAL, DATE,
TOD, CHAR

I, Q, PQ, M, L, DB,
DI

Operando al que se transfie‚Äê
re el contenido del acumula‚Äê
dor 1.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1" en el
acumulador 1.

L "Tag_Value_2"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_2" en el
acumulador 1.

*R

// Multiplicar los valores de los acumuladores 1 y 2.
// Guardar el producto en el acumulador 1.

T "Tag_Result_1"

// Transferir el producto (contenido del acumulador 1)
al operando "Tag_Result_1".

L "Tag_Value_3"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_3" en el
acumulador 1.

+R

// Sumar los valores de los acumuladores 1 y 2.
// Guardar la suma en el acumulador 1.

T "Tag_Result_2"

// Transferir la suma (contenido del acumulador 1) al
operando "Tag_Result_2".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
El MCR (Master Control Relay) (P√°gina 203)
Indicaciones importantes sobre el uso de la funci√≥n MCR (P√°gina 204)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5447

Instrucciones
4.2 Instrucciones
Activar el bit de estado (P√°gina 186)
Ejemplos de programaci√≥n AWL (P√°gina 8102)

T STW: Transferir acumulador 1 a palabra de estado
Descripci√≥n
La instrucci√≥n "Transferir acumulador 1 a palabra de estado" transfiere los bits 0 a 8 del
acumulador 1 a la palabra de estado.
La tabla siguiente muestra los bits del acumulador 1 con los que se sobrescriben los bits de
estado despu√©s de ejecutar la instrucci√≥n:
Acumulador 1
N√∫mero de bit

8

7

6

5

4

3

2

1

0

Bits de estado

BR

CC 1

CC 0

OV

OS

OR

STA

RLO

/FC

Esta instrucci√≥n se ejecuta independientemente del estado l√≥gico del bit de estado.
Nota
Los bits de la palabra de estado /FC, STA y OR no se cargan con la instrucci√≥n "Transferir
acumulador 1 a palabra de estado". √önicamente los bits 1, 4, 5, 6, 7 y 8 se cargan en las
posiciones de bit respectivas de la palabra significativamente baja del acumulador 1.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_STW"

// Cargar el valor del operando "Tag_STW" en el acumulador 1.

T STW

// Transferir los bits 0 a 8 del acumulador 1 a la palabra de estado.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

5448

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

CAR: Intercambiar AR1 y AR2
Descripci√≥n
La instrucci√≥n "Intercambiar AR1 y AR2" intercambia los contenidos de los registros de
direcciones 1 (AR1) y 2 (AR2).
La CPU ejecuta la instrucci√≥n independientemente del resultado l√≥gico y los bits de estado. La
instrucci√≥n no influye ni en el resultado l√≥gico ni en los bits de estado.
Los contenidos de los acumuladores no cambian debido a la instrucci√≥n.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

LAR1 P#10.0

// Cargar el contenido del puntero intra√°rea P#10.0 en
el registro de direcciones 1.

LAR2 P#20.0

// Cargar el contenido del puntero intra√°rea P#20.0 en
el registro de direcciones 2.

CAR

// Intercambiar el contenido de los registros de direcciones.

L MD [AR1,P#2.0]

// Cargar MD22 en el acumulador 1.

T MD [AR2,P#2.0]

// Transferir MD12 al acumulador 2.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

TAR1: Transferir AR1 a acumulador 1
Descripci√≥n
La instrucci√≥n "Transferir AR1 a acumulador 1" transfiere el contenido del registro de
direcciones 1 (AR1) al acumulador 1. El contenido del acumulador 1 se desplaza al
acumulador 2.
La CPU ejecuta la instrucci√≥n independientemente del resultado l√≥gico y los bits de estado. La
instrucci√≥n no influye ni en el resultado l√≥gico ni en los bits de estado.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5449

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

LAR1 P#15.0

// Cargar el contenido del puntero intra√°rea P#15.0 en
el registro de direcciones 1.

TAR1

// Transferir el contenido del registro de direcciones
1 (P#15.0) al acumulador 1.

T "Tag_Pointer"

// Transferir el contenido del acumulador 1 al operando "Tag_Pointer".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

TAR1 <D>: Transferir AR1 a palabra doble
Descripci√≥n
La instrucci√≥n "Transferir AR1 a palabra doble" transfiere el contenido del registro de
direcciones 1 (AR1) a una palabra doble. La palabra doble debe estar direccionada en una de
las √°reas de memoria siguientes:
‚óè Marcas (M)
‚óè Datos locales temporales (L)
‚óè Bloques de datos (DB, DI)
La CPU ejecuta la instrucci√≥n independientemente del resultado l√≥gico y los bits de estado. La
instrucci√≥n no influye ni en el resultado l√≥gico ni en los bits de estado.
Los contenidos de los acumuladores no cambian debido a la instrucci√≥n.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Transferir AR1 a palabra doble":

5450

Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<D>

Output

DWORD

D, M, L

Operando al que se transfie‚Äê
re el contenido del registro de
direcciones 1.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

TAR1 %DBD20

// Transferir el contenido del registro de direcciones
1 a la doble palabra de datos DBD20.

TAR1 %DID30

// Transferir el contenido del registro de direcciones
1 a la doble palabra de instancia DID30.

TAR1 %LD18

// Transferir el contenido del registro de direcciones
1 a la doble palabra de datos locales LD18.

TAR1 %MD24

// Transferir el contenido del registro de direcciones
1 a la doble palabra de marcas MD24.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

TAR1 AR2: Transferir AR1 a AR2
Descripci√≥n
La instrucci√≥n "Transferir AR1 a AR2" copia el contenido del registro de direcciones 1 (AR1) en
el registro de direcciones 2 (AR2).
La CPU ejecuta la instrucci√≥n independientemente del resultado l√≥gico y los bits de estado. La
instrucci√≥n no influye ni en el resultado l√≥gico ni en los bits de estado.
Los contenidos de los acumuladores no cambian debido a la instrucci√≥n.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

LAR1 P#10.4

// Cargar el contenido del puntero intra√°rea P#10.4 en
el registro de direcciones 1.

TAR1 AR2

// Transferir el contenido del registro de direcciones
1 al registro de direcciones 2.

A I [AR2,P#3.2]

// Consultar si el estado l√≥gico del bit I13.6 es "1"
y combinar el resultado l√≥gicamente con Y con el RLO
actual.

= "Tag1"

// Poner el operando "Tag_1" a "1".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5451

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

TAR2: Transferir AR2 a acumulador 1
Descripci√≥n
La instrucci√≥n "Transferir AR2 a acumulador 1" transfiere el contenido del registro de
direcciones 2 (AR2) al acumulador 1. El contenido del acumulador 1 se desplaza al
acumulador 2.
La CPU ejecuta la instrucci√≥n independientemente del resultado l√≥gico y los bits de estado. La
instrucci√≥n no influye ni en el resultado l√≥gico ni en los bits de estado.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

LAR2 P#20.0

// Cargar el contenido del puntero intra√°rea P#20.0 al
registro de direcciones 2.

TAR2

// Transferir el contenido del registro de direcciones
2 (P#20.0) al acumulador 1.

T "Tag_Pointer"

// Transferir el contenido del acumulador 1 al operando "Tag_Pointer".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

5452

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

TAR2 <D>: Transferir AR2 a palabra doble
Descripci√≥n
La instrucci√≥n "Transferir AR2 a palabra doble" transfiere el contenido del registro de
direcciones 2 (AR2) a una palabra doble. La palabra doble debe estar direccionada en una de
las √°reas de memoria siguientes:
‚óè Marcas (M)
‚óè Datos locales temporales (L)
‚óè Bloques de datos (DB, DI)
La CPU ejecuta la instrucci√≥n independientemente del resultado l√≥gico y los bits de estado. La
instrucci√≥n no influye ni en el resultado l√≥gico ni en los bits de estado.
Los contenidos de los acumuladores no cambian debido a la instrucci√≥n.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Transferir AR2 a palabra doble":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<D>

Output

DWORD

D, M, L

Operando al que se transfie‚Äê
re el contenido del registro de
direcciones 2.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

TAR2 %DBD20

// Transferir el contenido del registro de direcciones
2 a la doble palabra de datos DBD20.

TAR2 %DID30

// Transferir el contenido del registro de direcciones
2 a la doble palabra de instancia DID30.

TAR2 %LD18

// Transferir el contenido del registro de direcciones
2 a la doble palabra de datos locales LD18.

TAR2 %MD24

// Transferir el contenido del registro de direcciones
2 a la doble palabra de marcas MD24.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5453

Instrucciones
4.2 Instrucciones

Conversi√≥n
BTI: Convertir BCD en entero (16 bits)
Descripci√≥n
La instrucci√≥n "Convertir BCD en entero (16 bits)" convierte el valor que est√° en la palabra
derecha del acumulador 1 en un entero (de 16 bits). La instrucci√≥n interpreta el valor que debe
convertirse como n√∫mero decimal codificado en binario de tres d√≠gitos (BCD).
Los bits 1 a 11 del acumulador 1 indican el valor que se convertir√°. Se admiten valores dentro
del rango "-999" a "+999".
El signo del valor del resultado se lee del bit 15 del acumulador 1. Si el estado l√≥gico del bit es
"0", el signo es positivo. Si el estado l√≥gico del bit es "1", el signo es negativo. Los bits 12 a 14
no se utilizan en la conversi√≥n.
Si el c√≥digo BCD contiene un error de BCD, la CPU notifica un error de programaci√≥n y llama
el bloque de organizaci√≥n "OB121". Si el bloque de organizaci√≥n OB121 no existe, la CPU
pasa a STOP.
El resultado de la conversi√≥n se guarda en la palabra derecha del acumulador 1. El contenido
de la palabra izquierda del acumulador 1 no se ve influido por la instrucci√≥n.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Input"

// Cargar BCD en el acumulador 1.

BTI

// Convertir BCD en entero de 16 bits.

T "Tag_Output"

// Transferir el resultado al operando "Tag_Output".

La figura siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
‡≤Ø‡≤Ø

‡≤Ø‡≤Ø



‡≤Ø7DJB,QSXW‡≤Ø
%7,
‡≤Ø7DJB2XWSXW‡≤Ø

‡≤Ø‡≤Ø








‡≤Ø‡≤Ø



‡≤Ø‡≤Ø%&'



‡≤Ø‡≤ØHQWHUR

&RQYHUWLU%&'HQHQWHUR ELWV






Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)

5454

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

ITB: Convertir entero en BCD (16 bits)
Descripci√≥n
La instrucci√≥n "Convertir entero en BCD (16 bits)" convierte el valor que se encuentra en la
palabra derecha del acumulador 1 en un n√∫mero decimal en c√≥digo binario de tres d√≠gitos
(BCD). La instrucci√≥n interpreta el valor que debe convertirse como un entero de 16 bits.
Los bits 0 a 11 del acumulador 1 indican el valor que se convertir√°. Se admiten valores dentro
del rango "-999" a "+999". Si el valor que debe convertirse est√° fuera de este rango, los bits OV
y OS se ponen al estado l√≥gico "1". En este caso no se lleva a cabo la conversi√≥n.
El signo del valor del resultado se lee de los bits 12 a 15 del acumulador 1. Si el estado l√≥gico
de los bits es "0", el signo es positivo. Si el estado l√≥gico de los cuatro bits es "1", el signo es
negativo.
El resultado de la conversi√≥n se guarda en la palabra derecha del acumulador 1. El contenido
de la palabra izquierda del acumulador 1 no se ve influido por la instrucci√≥n.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Input"

// Cargar entero (16 bits) en el acumulador 1.

ITB

// Convertir entero en BCD.

T "Tag_Output"

// Transferir el resultado al operando "Tag_Output".

La figura siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:



‡≤Ø7DJB,QSXW‡≤Ø



,7%
‡≤Ø7DJB2XWSXW‡≤Ø











‡≤Ø‡≤ØHQWHUR



‡≤Ø‡≤Ø%&'

&RQYHUWLUHQWHURHQ%&' ELWV




‡≤Ø‡≤Ø

‡≤Ø‡≤Ø


‡≤Ø‡≤Ø

‡≤Ø‡≤Ø

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros enteros (P√°gina 190)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5455

Instrucciones
4.2 Instrucciones
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

BTD: Convertir BCD en entero doble (32 bits)
Descripci√≥n
La instrucci√≥n "Convertir BCD en entero doble (32 bits)" convierte el valor que est√° en el
acumulador 1 en un entero doble (de 32 bits). La instrucci√≥n interpreta el valor que debe
convertirse como n√∫mero decimal codificado en binario de siete d√≠gitos (BCD).
Los bits 0 a 27 del acumulador 1 indican el valor que se convertir√°. Se admiten valores dentro
del rango "-9999999" a "+9999999".
El signo del valor del resultado se lee del bit 31 del acumulador 1. Si el estado l√≥gico del bit es
"0", el signo es positivo. Si el estado l√≥gico del bit es "1", el signo es negativo. Los bits 28 a 30
no se utilizan en la conversi√≥n.
El resultado de la instrucci√≥n se guarda en el acumulador 1. El contenido del acumulador 2 no
cambia.
Si el c√≥digo BCD contiene una pseudot√©trada, la CPU notifica un error de programaci√≥n y llama
el bloque de organizaci√≥n "OB121". Si el bloque de organizaci√≥n OB121 no existe, la CPU
pasa al estado "STOP".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Input"

// Cargar BCD en el acumulador 1.

BTD

// Convertir BCD en un entero de 32 bits.

T "Tag_Output"

// Transferir el resultado al operando "Tag_Output".

La figura siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
‡≤Ø‡≤Ø

‡≤Ø‡≤Ø

‡≤Ø‡≤Ø

%7'
‡≤Ø7DJB2XWSXW‡≤Ø

5456

‡≤Ø‡≤Ø

 


‡≤Ø7DJB,QSXW‡≤Ø

‡≤Ø‡≤Ø

‡≤Ø‡≤Ø

‡≤Ø‡≤Ø

‡≤Ø‡≤Ø


        ‡≤Ø‡≤Ø
&RQYHUWLU%&'HQHQWHUR ELWV
        ‡≤Ø‡≤Ø

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

ITD: Convertir entero (16 bits) en entero doble (32 bits)
Descripci√≥n
La instrucci√≥n "Convertir entero (16 bits) en entero doble (32 bits)" convierte el valor que se
encuentra en la palabra derecha del acumulador 1 en un entero doble (de 32 bits). La
instrucci√≥n interpreta el valor que debe convertirse como un entero de 16 bits.
Los bits 0 a 15 se aplican sin cambios en la conversi√≥n. Los bits 16 a 31 del valor del resultado
se rellenan con el estado l√≥gico del bit 15.
El valor del resultado se guarda en el acumulador 1. El contenido del acumulador 2 no cambia.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Input"

// Cargar entero (16 bits) en el acumulador 1.

ITD

// Convertir entero de 16 bits en entero doble de 32
bits.

T "Tag_Output"

// Transferir el resultado al operando "Tag_Output".

La tabla siguiente muestra el contenido del acumulador 1 antes y despu√©s de ejecutar la
instrucci√≥n:
Estado

Acumulador 1
31 . . .

....

....

. . . 16

15 . . .

....

....

...0

Antes de la
ejecuci√≥n

XXXX

XXXX

XXXX

XXXX

1111

1111

1111

0110

Despu√©s de
la ejecuci√≥n

1111

1111

1111

1111

1111

1111

1111

0110

X : el estado l√≥gico de los bits no es relevante para la conversi√≥n

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5457

Instrucciones
4.2 Instrucciones
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

DTB: Convertir entero doble (32 bits) en BCD
Descripci√≥n
La instrucci√≥n "Convertir entero doble (32 bits) en BCD" convierte el valor que est√° en el
acumulador 1 en un n√∫mero decimal en c√≥digo binario de siete d√≠gitos (BCD). La instrucci√≥n
interpreta el valor que debe convertirse como un entero de 32 bits.
Los bits 0 a 27 del acumulador 1 indican el valor que se convertir√°. Se admiten valores dentro
del rango "-9999999" a "+9999999". Si el valor que debe convertirse est√° fuera de este rango,
los bits OV y OS se ponen al estado l√≥gico "1". En este caso no se lleva a cabo la conversi√≥n.
El signo del valor del resultado se lee de los bits 28 a 31 del acumulador 1. Si el estado l√≥gico
de los bits es "0", el signo es positivo. Si el estado l√≥gico de los cuatro bits es "1", el signo es
negativo.
El resultado de la instrucci√≥n se guarda en el acumulador 1. El contenido del acumulador 2 no
cambia.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Input"

// Cargar entero de 32 bits en el acumulador 1.

DTB

// Convertir entero de 32 bits en BCD

T "Tag_Output"

// Transferir el resultado al operando "Tag_Output".

La figura siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
 


‡≤Ø7DJB,QSXW‡≤Ø

       

'7%
‡≤Ø7DJB2XWSXW‡≤Ø



‡≤Ø‡≤ØHQWHUR

&RQYHUWLUHQWHURHQ%&' ELWV

       
‡≤Ø‡≤Ø

‡≤Ø‡≤Ø

‡≤Ø‡≤Ø

‡≤Ø‡≤Ø

‡≤Ø‡≤Ø

‡≤Ø‡≤Ø

‡≤Ø‡≤Ø
‡≤Ø‡≤Ø
‡≤Ø‡≤Ø%&'

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros enteros (P√°gina 190)

5458

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

DTR: Convertir entero doble (32 bits) en n√∫mero en coma flotante
Descripci√≥n
La instrucci√≥n "Convertir entero doble (32 bits) en n√∫mero en coma flotante" convierte el valor
que est√° en el acumulador 1 en un n√∫mero en coma flotante. La instrucci√≥n interpreta el valor
que debe convertirse como un entero de 32 bits.
Puesto que un entero de 32 bits es m√°s exacto que un n√∫mero en coma flotante, el resultado
de la conversi√≥n se redondea al entero superior.
El resultado de la instrucci√≥n se guarda en el acumulador 1. El contenido del acumulador 2 no
cambia.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Input"

// Cargar entero de 32 bits en el acumulador 1.

DTR

// Convertir entero de 32 bits en n√∫mero en coma flotante.

T "Tag_Output"

// Transferir el resultado al operando "Tag_Output".

La figura siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
‡≤Ø7DJB,QSXW‡≤Ø
'75

       
&RQYHUWLUHQWHURGREOH ELWV HQQ¬ºPHURHQFRPDIORWDQWH


7DJB2XWSXW

‡≤Ø‡≤ØHQWHUR




       
([SRQHQWHELWV

0DQWLVDELWV

ELW
6LJQRGHODPDQWLVD

‡≤Ø‡≤Ø,((()3

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5459

Instrucciones
4.2 Instrucciones
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

INVI: Generar complemento a uno de un entero (16 bits)
Descripci√≥n
La instrucci√≥n "Generar complemento a uno de un entero (16 bits)" niega bit por bit el valor que
se encuentra en la palabra derecha del acumulador 1.
Al ejecutarse, la instrucci√≥n invierte el estado l√≥gico de cada uno de los bits de la palabra
derecha del acumulador 1. Los unos son sustituidos por ceros y viceversa.
El resultado se guarda en la palabra derecha del acumulador 1. El contenido de la palabra
izquierda del acumulador 1 no se ve influido por la instrucci√≥n.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Input"

// Cargar el valor en el acumulador 1.

INVI

// Generar un complemento a 1

T "Tag_Output"

// Transferir el resultado al operando "Tag_Output".

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor
15 . . .

....

....

...0

Tag_Input

0110

0011

1010

1110

Tag_Output

1001

1100

0101

0001

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

5460

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

INVD: Generar complemento a uno de un entero doble (32 bits)
Descripci√≥n
La instrucci√≥n "Generar complemento a uno de un entero doble (32 bits)" niega bit por bit el
valor que se encuentra en el acumulador 1.
Al ejecutarse, la instrucci√≥n invierte el estado l√≥gico de cada uno de los bits del acumulador 1.
Los unos son sustituidos por ceros y viceversa.
El resultado de la instrucci√≥n se guarda en el acumulador 1. El contenido del acumulador 2 no
cambia.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Input"

// Cargar el valor en el acumulador 1.

INVD

// Generar un complemento a 1

T "Tag_Output"

// Transferir el resultado al operando "Tag_Output".

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor
31 . . .

....

....

. . . 16

15 . . .

....

....

...0

Tag_Input

0110

1111

1000

1100

0110

0011

1010

1110

Tag_Output

1001

0000

0111

0011

1001

1100

0101

0001

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

NEGI: Negar entero (16 bits)
Descripci√≥n
La instrucci√≥n "Negar entero (16 bits)" invierte el signo del valor que est√° en la palabra derecha
del acumulador 1 por una formaci√≥n de complemento a dos. La instrucci√≥n interpreta el valor
del acumulador 1 como un entero de 16 bits.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5461

Instrucciones
4.2 Instrucciones
La ejecuci√≥n de la instrucci√≥n es equivalente a una multiplicaci√≥n por "-1". El resultado de la
instrucci√≥n se guarda en la palabra derecha del acumulador 1. El contenido de la palabra
izquierda del acumulador 1 no se ve influido por la instrucci√≥n.
La instrucci√≥n "Negar entero (16 bits)" influye en los bits de estado CC 0, CC 1, OV y OS. La
tabla siguiente muestra c√≥mo la instrucci√≥n influye en los bits de estado en funci√≥n del
resultado:
Resultado:

CC 1

CC 0

OV

OS

de +1 a +32767

1

0

0

-

0

0

0

0

-

de -1 a -32767

0

1

0

-

(-) 32768

0

1

1

1

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Input"

// Cargar el valor en el acumulador 1.

NEGI

// Negar entero de 16 bits

T "Tag_Output"

// Transferir el resultado al operando "Tag_Output".

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor
15 . . .

....

....

...0

Tag_Input

0101

1101

0011

1000

Tag_Output

1010

0010

1100

1000

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar los bits de estado en instrucciones con n√∫meros enteros (P√°gina 190)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

NEGD: Negar entero doble (32 bits)
Descripci√≥n
La instrucci√≥n "Negar entero doble (32 bits)" invierte el signo del valor que se encuentra en el
acumulador 1 por una formaci√≥n de complemento a dos. La instrucci√≥n interpreta el valor del
acumulador 1 como un entero de 32 bits.

5462

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
La ejecuci√≥n de la instrucci√≥n es equivalente a una multiplicaci√≥n por "-1". El resultado de la
instrucci√≥n se guarda en el acumulador 1. El contenido del acumulador 2 no cambia.
La instrucci√≥n "Negar entero doble (32 bits)" influye en los bits de estado CC 0, CC 1, OV y OS.
La tabla siguiente muestra c√≥mo la instrucci√≥n influye en los bits de estado en funci√≥n del
resultado:
Resultado

CC 1

CC 0

OV

OS

de +1 a +2147483647

1

0

0

-

0

0

0

0

-

de -1 a -2147483647

0

1

0

-

(-) 2147483648

0

1

1

1

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Input"

// Cargar el valor en el acumulador 1.

NEGD

// Negar entero doble de 32 bits.

T "Tag_Output"

// Transferir el resultado al operando "Tag_Output".

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Estado

Valor
31 . . .

....

....

. . . 16

15 . . .

....

....

...0

Tag_Input

0101

1111

0110

0100

0101

1101

0011

1000

Tag_Output

1010

0000

1001

1011

1010

0010

1100

1000

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar los bits de estado en instrucciones con n√∫meros enteros (P√°gina 190)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

NEGR: Negar n√∫mero en coma flotante
Descripci√≥n
La instrucci√≥n "Negar n√∫mero en coma flotante" invierte el estado l√≥gico del bit 31 en el
acumulador 1. La instrucci√≥n interpreta el valor del acumulador 1 como un n√∫mero en coma
flotante. El bit 31 del n√∫mero en coma flotante contiene el signo de la mantisa.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5463

Instrucciones
4.2 Instrucciones
La ejecuci√≥n de la instrucci√≥n es equivalente a una multiplicaci√≥n por "-1". Tras ejecutar la
instrucci√≥n se invierte el signo de la mantisa.
El resultado de la instrucci√≥n se guarda en el acumulador 1. El contenido del acumulador 2 no
cambia.
La instrucci√≥n no influye en los bits de estado.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Input"

// Cargar el n√∫mero en coma flotante en el acumulador
1.

NEGR

// Negar n√∫mero en coma flotante.

T "Tag_Output"

// Transferir el resultado al operando "Tag_Output".

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Input

1.5E+02

Tag_Output

-1.5E+02

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

CAW: Invertir orden de los bytes en la palabra derecha del acumulador 1
Descripci√≥n
La instrucci√≥n "Invertir orden de los bytes en la palabra derecha del acumulador 1" invierte el
orden de los dos bytes derechos en la palabra derecha del acumulador 1.
La tabla siguiente muestra el contenido del acumulador 1 antes y despu√©s de ejecutar la
instrucci√≥n:
Estado

Bytes del acumulador 1

Antes de la ejecuci√≥n

Valor A

Valor B

Valor C

Valor D

Despu√©s de la ejecuci√≥n

Valor A

Valor B

Valor D

Valor C

El resultado de la instrucci√≥n se guarda en la palabra derecha del acumulador 1. Los bytes de
la palabra izquierda del acumulador 1 no se ven influidos por la instrucci√≥n y no cambian.

5464

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Input"

// Cargar el valor en el acumulador.

CAW

// Invertir orden de los bytes en la palabra derecha
del acumulador 1.

T "Tag_Output"

// Transferir el resultado al operando "Tag_Output".

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Input

0000

1111

0000

1111

Tag_Output

0000

1111

1111

0000

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

CAD: Invertir orden de los bytes en todo el acumulador 1
Descripci√≥n
La instrucci√≥n "Invertir orden de los bytes en todo el acumulador 1" invierte el orden de los
bytes en el acumulador 1.
La tabla siguiente muestra el contenido del acumulador 1 antes y despu√©s de ejecutar la
instrucci√≥n:
Estado

Bytes del acumulador 1

Antes de la ejecuci√≥n

Valor A

Valor B

Valor C

Valor D

Despu√©s de la ejecuci√≥n

Valor D

Valor C

Valor B

Valor A

El resultado de la instrucci√≥n se guarda en el acumulador 1. El contenido del acumulador 2 no
cambia.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Input"

// Cargar el valor del operando en el acumulador 1.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5465

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

CAD

// Invertir orden de los bytes del acumulador 1.

T "Tag_Output"

// Transferir el resultado al operando "Tag_Output".

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Input

1111

0000

0000

1111

0000

0000

1111

1111

Tag_Output

1111

1111

0000

0000

0000

1111

1111

0000

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

RND: Redondear n√∫mero
Descripci√≥n
La instrucci√≥n "Redondear n√∫mero" convierte el valor que se encuentra en el acumulador 1 en
un entero doble (de 32 bits). La instrucci√≥n interpreta el valor que debe convertirse como un
n√∫mero en coma flotante y lo redondea al siguiente entero.
Si el n√∫mero en coma flotante se encuentra exactamente entre un n√∫mero par y uno impar, se
selecciona el n√∫mero par como resultado.
El resultado de la instrucci√≥n se guarda en el acumulador 1. El contenido del acumulador 2 no
cambia.
La conversi√≥n no se ejecuta y los bits de estado OV y OS se activan si se cumple una de las
condiciones siguientes:
‚óè El valor que se encuentra en el acumulador 1 no es un n√∫mero en coma flotante v√°lido.
‚óè El resultado est√° fuera del rango permitido para un entero del tipo de datos DINT.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:

5466

AWL

Explicaci√≥n

L "Tag_Input"

// Cargar el n√∫mero en coma flotante en el acumulador
1.

RND

// Redondear un n√∫mero en coma flotante a un entero.

T "Tag_Output"

// Transferir el resultado al operando "Tag_Output".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valores

Tag_Input

101.5

-101.5

Tag_Output

102

-102

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros en coma flotante (P√°gina 191)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

TRUNC: Truncar a entero
Descripci√≥n
La instrucci√≥n "Truncar a entero" convierte el valor que se encuentra en el acumulador 1 en un
entero doble (de 32 bits). La instrucci√≥n interpreta el valor que debe convertirse como n√∫mero
en coma flotante y devuelve como resultado su parte entera.
El resultado de la instrucci√≥n se guarda en el acumulador 1. El contenido del acumulador 2 no
cambia.
La conversi√≥n no se ejecuta y los bits de estado OV y OS se activan si se cumple una de las
condiciones siguientes:
‚óè El valor que se encuentra en el acumulador 1 no es un n√∫mero en coma flotante v√°lido.
‚óè El resultado est√° fuera del rango permitido para un entero del tipo de datos DINT.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Input"

// Cargar el n√∫mero en coma flotante en el acumulador
1.

TRUNC

// Convertir el n√∫mero en coma flotante en un entero
del tipo de datos DINT.

T "Tag_Output"

// Transferir el resultado al operando "Tag_Output".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5467

Instrucciones
4.2 Instrucciones
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valores

Tag_Input

101.5

-101.5

Tag_Output

101

-101

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros en coma flotante (P√°gina 191)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

RND+: Redondear n√∫mero en coma flotante al siguiente entero superior
Descripci√≥n
La instrucci√≥n "Redondear un n√∫mero en coma flotante al siguiente entero superior" convierte
el valor que se encuentra en el acumulador 1 en un entero doble (de 32 bits). La instrucci√≥n
interpreta el valor que debe convertirse como n√∫mero en coma flotante y lo redondea al
siguiente entero superior. El resultado de la instrucci√≥n es un n√∫mero del tipo de datos DINT,
mayor o igual al n√∫mero en coma flotante que se ha convertido.
El resultado de la instrucci√≥n se guarda en el acumulador 1. El contenido del acumulador 2 no
cambia.
La conversi√≥n no se ejecuta y los bits de estado OV y OS se activan si se cumple una de las
condiciones siguientes:
‚óè El valor que se encuentra en el acumulador 1 no es un n√∫mero en coma flotante v√°lido.
‚óè El resultado est√° fuera del rango permitido para un entero del tipo de datos DINT.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:

5468

AWL

Explicaci√≥n

L "Tag_Input"

// Cargar el n√∫mero en coma flotante en el acumulador
1.

RND+

// Redondear el n√∫mero en coma flotante al siguiente
entero superior.

T "Tag_Output"

// Transferir el resultado al operando "Tag_Output".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valores

Tag_Input

100.5

-100.5

Tag_Output

101

-100

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros en coma flotante (P√°gina 191)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

RND-: Redondear n√∫mero en coma flotante al siguiente entero inferior
Descripci√≥n
La instrucci√≥n "Redondear un n√∫mero en coma flotante al siguiente entero inferior" convierte
el valor que se encuentra en el acumulador 1 en un entero doble (de 32 bits). La instrucci√≥n
interpreta el valor que debe convertirse como n√∫mero en coma flotante y lo redondea al
siguiente entero inferior. El resultado de la instrucci√≥n es un n√∫mero del tipo de datos DINT,
menor o igual al n√∫mero en coma flotante que se ha convertido.
El resultado de la instrucci√≥n se guarda en el acumulador 1. El contenido del acumulador 2 no
cambia.
La conversi√≥n no se ejecuta y los bits de estado OV y OS se activan si se cumple una de las
condiciones siguientes:
‚óè El valor que se encuentra en el acumulador 1 no es un n√∫mero en coma flotante v√°lido.
‚óè El resultado est√° fuera del rango permitido para un entero del tipo de datos DINT.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Input"

// Cargar el n√∫mero en coma flotante en el acumulador
1.

RND-

// Redondear el n√∫mero en coma flotante al siguiente
entero inferior.

T "Tag_Output"

// Transferir el resultado al operando "Tag_Output".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5469

Instrucciones
4.2 Instrucciones
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valores

Tag_Input

100.5

-100.5

Tag_Output

100

-101

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar los bits de estado en instrucciones con n√∫meros en coma flotante (P√°gina 191)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

Control del programa
Operaciones de salto
Etiqueta
Descripci√≥n
Una etiqueta sirve para identificar el punto del programa en el que debe continuar la ejecuci√≥n
tras un salto. El nombre de la etiqueta puede comprender un m√°ximo de 128 letras, cifras o
caracteres de subrayado.
La etiqueta y la instrucci√≥n en la que se indica la etiqueta como destino del salto deben
encontrarse en el mismo bloque. El nombre de una etiqueta debe ser √∫nico en el bloque. A toda
etiqueta se puede acceder desde distintas posiciones.
Es posible saltar hacia delante y hacia atr√°s. La distancia m√°xima de salto es de -32768 o
+32767 palabras de la l√≥gica del programa. El n√∫mero m√°ximo real de instrucciones que
pueden saltarse depende de la combinaci√≥n de instrucciones dentro del programa
(instrucciones de una, dos o tres palabras).
Si se utiliza la funcionalidad MCR, la etiqueta debe encontrase en el mismo rango de MCR que
la instrucci√≥n de salto.
Para la etiqueta deben observarse las siguientes reglas gramaticales:
‚óè Letras (a - z, A - Z)
‚óè Una combinaci√≥n de letras y n√∫meros. Es importante observar el orden, es decir, primero
las letras y despu√©s los n√∫meros (a - z, A - Z, 0 - 9).
‚óè No pueden utilizarse caracteres especiales o una combinaci√≥n de letras y n√∫meros en
orden inverso, es decir, primero los n√∫meros y despu√©s las letras (0 - 9, a - z, A - Z).

5470

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Input_1"

// Cargar el primer valor de comparaci√≥n.

L "Tag_Input_2"

// Cargar el segundo valor de comparaci√≥n.

>I

// Consultar si el valor del operando "Tag_Input_1" es
mayor que el valor del operando "Tag_Input_2".

JC MyLABEL

// Si el resultado de la consulta es "1", saltar a la
etiqueta "MyLABEL" y continuar all√≠ el procesamiento
del programa
// Si el resultado de la consulta es "0", procesar la
instrucci√≥n siguiente.

L "Tag_Input_3"

// Cargar el contenido del operando "Tag_Input_3" en
el acumulador 1.

T "Tag_Output"

// Cargar el contenido del acumulador 1 en el operando
"Tag_Output".

MyLABEL: A "Tag_Input_4"

// Continuar la ejecuci√≥n del programa en este punto
en caso de haberse ejecutado un salto.
// Consultar si el operando "Tag_Input_4" est√° a "1".

Consulte tambi√©n
Principios b√°sicos de la palabra de estado (P√°gina 184)
Vista general de los tipos de datos v√°lidos (P√°gina 241)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

JU: Salto incondicional
Descripci√≥n
La instrucci√≥n "Salto incondicional" interrumpe la ejecuci√≥n lineal del programa y continuarla
en el punto marcado por la etiqueta indicada. Esta instrucci√≥n se ejecuta siempre,
independientemente de las condiciones.
La instrucci√≥n "Salto incondicional" no influye en los bits de estado.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Salto incondicional":
Par√°metro

Descripci√≥n

<Etiqueta>

Nombre simb√≥lico del destino del salto

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5471

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Input_1"

// Cargar el primer valor de comparaci√≥n.

L "Tag_Input_2"

// Cargar el segundo valor de comparaci√≥n.

>I

// Consultar si el valor del operando "Tag_Input_1" es
mayor que el valor del operando "Tag_Input_2".

JC MyLABEL_1

// Si el resultado de la consulta es "1", saltar a la
etiqueta "MyLABEL_1" y continuar all√≠ el procesamiento del programa
// Si el resultado de la consulta es "0", continuar
con la ejecuci√≥n lineal del programa.

L "Tag_Input_3"

// Cargar el contenido del operando "Tag_Input_3" en
el acumulador 1.

T "Tag_Output_1"

// Cargar el contenido del acumulador 1 en el operando
"Tag_Output_1".

JU MyLABEL_2

// Saltar a la etiqueta "MyLABEL_2" y continuar all√≠
con la ejecuci√≥n del programa.

MyLABEL_1: L "Tag_Input_4"

// Etiqueta
// Cargar el contenido del operando "Tag_Input_4" en
el acumulador 1.

T "Tag_Output_2"
MyLABEL_2: A "Tag_Input_5"

// Cargar el contenido del acumulador 1 en el operando
"Tag_Output_2".
// Etiqueta "MyLABEL_2"
// Consultar si el operando "Tag_Input_5" est√° a "1".

Consulte tambi√©n
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Consultar el bit de estado con instrucciones de salto (P√°gina 196)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Ejemplos de programaci√≥n AWL (P√°gina 8102)

JC: Saltar si RLO = 1
Descripci√≥n
La instrucci√≥n "Saltar si RLO = 1" interrumpe la ejecuci√≥n lineal del programa en funci√≥n del
resultado l√≥gico y continuarla en el punto marcado por la etiqueta indicada.
El salto a la etiqueta indicada se ejecuta solo si el RLO actual es "1". Si el RLO actual antes de
la instrucci√≥n es "0", el salto no se ejecuta y la ejecuci√≥n del programa contin√∫a con la
instrucci√≥n siguiente.

5472

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
La instrucci√≥n "Saltar si RLO = 1" pone el RLO y el bit de estado STA a "1" y los bits de estado
OR y /FC a "0", tanto si la condici√≥n se cumple como si no.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Saltar si RLO = 1":
Par√°metro

Descripci√≥n

<Etiqueta>

Nombre simb√≥lico del destino del salto

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Input_1"

// Cargar el primer valor de comparaci√≥n.

L "Tag_Input_2"

// Cargar el segundo valor de comparaci√≥n.

>I

// Consultar si el valor del operando "Tag_Input_1" es
mayor que el valor del operando "Tag_Input_2".

JC MyLABEL

// Si el RLO = "1", saltar a la etiqueta "MyLABEL" y
continuar all√≠ la ejecuci√≥n del programa.
// Si el RLO = "0", procesar la instrucci√≥n siguiente.

L "Tag_Input_3"

// Cargar el contenido del operando "Tag_Input_3" en
el acumulador 1.

T "Tag_Output_1"

// Cargar el contenido del acumulador 1 en el operando
"Tag_Output_1".

MyLABEL: L "Tag_Input_4"

// Continuar la ejecuci√≥n del programa en este punto
en caso de haberse ejecutado un salto.
// Cargar el contenido del operando "Tag_Input_4" en
el acumulador 1.

T "Tag_Output_2"

// Transferir el contenido del acumulador 1 al operando "Tag_Output_2".

Consulte tambi√©n
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Consultar el bit de estado con instrucciones de salto (P√°gina 196)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Ejemplos de programaci√≥n AWL (P√°gina 8102)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5473

Instrucciones
4.2 Instrucciones

JCN: Saltar si RLO = 0
Descripci√≥n
La instrucci√≥n "Saltar si RLO = 0" interrumpe la ejecuci√≥n lineal del programa en funci√≥n del
resultado l√≥gico (RLO) y continuarla en el punto marcado por la etiqueta indicada.
El salto a la etiqueta indicada se ejecuta solo si el RLO actual es "0". Si el RLO actual antes de
la instrucci√≥n es "1", el salto no se ejecuta y la ejecuci√≥n del programa contin√∫a con la
instrucci√≥n siguiente.
La instrucci√≥n "Saltar si RLO = 0" pone el RLO y el bit de estado STA a "1" y los bits de estado
OR y /FC a "0", tanto si la condici√≥n se cumple como si no.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Saltar si RLO = 0":
Par√°metro

Descripci√≥n

<Etiqueta>

Nombre simb√≥lico del destino del salto

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

A "Tag_Input_1"

// Consultar si el operando "Tag_Input_1" es "1" y
combinar el resultado l√≥gicamente con Y.

A "Tag_Input_2"

// Consultar si el operando "Tag_Input_2" es "1" y
combinar el resultado l√≥gicamente con Y.

JCN MyLABEL

// Si el RLO ="0", saltar a la etiqueta "MyLABEL" y
continuar all√≠ la ejecuci√≥n del programa.

L "Tag_Input_3"

// Cargar el contenido del operando "Tag_Input_3" en
el acumulador 1.

T "Tag_Output"

// Cargar el contenido del acumulador 1 en el operando
"Tag_Output".

MyLABEL: A "Tag_Input_4"

// Continuar la ejecuci√≥n del programa en este punto
en caso de haberse ejecutado un salto.

// Si el RLO = "1", procesar la instrucci√≥n siguiente.

// Consultar si el operando "Tag_Input_4" es "1" y
combinar el resultado l√≥gicamente con Y con el RLO.

Consulte tambi√©n
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Consultar el bit de estado con instrucciones de salto (P√°gina 196)
A√±adir instrucciones AWL (P√°gina 8079)

5474

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Procesar instrucciones AWL (P√°gina 8098)
Ejemplos de programaci√≥n AWL (P√°gina 8102)

JCB: Saltar si RLO = 1 y guardar RLO
Descripci√≥n
La instrucci√≥n "Saltar si RLO = 1 y guardar RLO" interrumpe la ejecuci√≥n lineal del programa
en funci√≥n del resultado l√≥gico (RLO) y continuarla en el punto marcado por la etiqueta
indicada. Paralelamente, el estado l√≥gico del RLO actual se copia en el resultado binario (BR).
El salto a la etiqueta indicada se ejecuta solo si el RLO actual es "1". En este caso, la
instrucci√≥n pone el resultado binario a "1".
Si el RLO actual antes de la instrucci√≥n es "0", el salto no se ejecuta y la ejecuci√≥n del programa
contin√∫a con la instrucci√≥n siguiente. En tal caso, la instrucci√≥n asigna el estado l√≥gico "0" al
resultado binario.
La instrucci√≥n "Saltar si RLO = 1 y guardar RLO" pone el RLO y el bit de estado STA a "1" y los
bits de estado OR y /FC a "0", tanto si la condici√≥n se cumple como si no.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Saltar si RLO = 1 y guardar RLO":
Par√°metro

Descripci√≥n

<Etiqueta>

Nombre simb√≥lico del destino del salto

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Input_1"

// Cargar el primer valor de comparaci√≥n.

L "Tag_Input_2"

// Cargar el segundo valor de comparaci√≥n.

>I

// Consultar si el valor del operando "Tag_Input_1" es
mayor que el valor del operando "Tag_Input_2".

JCB MyLABEL

// Copiar RLO actual en BR.
// Si el RLO ="1", saltar a la etiqueta "MyLABEL" y
continuar all√≠ la ejecuci√≥n del programa.
// Si el RLO es "0", procesar la instrucci√≥n siguiente.

L "Tag_Input_3"

// Cargar el contenido del operando "Tag_Input_3" en
el acumulador 1.

T "Tag_Output_1"

// Cargar el contenido del acumulador 1 en el operando
"Tag_Output_1".

MyLABEL: L "Tag_Input_4"

// Continuar la ejecuci√≥n del programa en este punto
en caso de haberse ejecutado un salto.
// Cargar el contenido del operando "Tag_Input_4" en
el acumulador 1.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5475

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

T "Tag_Output_2"

// Cargar el contenido del acumulador 1 en el operando
"Tag_Output_2".

Consulte tambi√©n
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Consultar el bit de estado con instrucciones de salto (P√°gina 196)
Vista general de los tipos de datos v√°lidos (P√°gina 241)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

JNB: Saltar si RLO = 0 y guardar RLO
Descripci√≥n
La instrucci√≥n "Saltar si RLO = 0 y guardar RLO" interrumpe la ejecuci√≥n lineal del programa
en funci√≥n del resultado l√≥gico (RLO) y continuarla en el punto marcado por la etiqueta
indicada. Paralelamente, el estado del resultado l√≥gico actual se copia en el resultado binario
(BR).
El salto a la etiqueta indicada se ejecuta solo si el RLO actual es "0". En tal caso, la instrucci√≥n
pone el resultado binario a "0".
Si el RLO actual antes de la instrucci√≥n es "1", el salto no se ejecuta y la ejecuci√≥n del programa
contin√∫a con la instrucci√≥n siguiente. En tal caso, la instrucci√≥n asigna el estado l√≥gico "1" al
resultado binario.
La instrucci√≥n "Saltar si RLO = 0 y guardar RLO" pone el RLO y el bit de estado STA a "1" y los
bits de estado OR y /FC a "0", tanto si la condici√≥n se cumple como si no.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Saltar si RLO = 0 y guardar RLO":
Par√°metro

Descripci√≥n

<Etiqueta>

Nombre simb√≥lico del destino del salto

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:

5476

AWL

Explicaci√≥n

A "Tag_Input_1"

// Consultar si el operando "Tag_Input_1" es "1" y
combinar el resultado l√≥gicamente con Y.

A "Tag_Input_2"

// Consultar si el operando "Tag_Input_2" es "1" y
combinar el resultado l√≥gicamente con Y.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

JNB MyLABEL

// Copiar RLO actual en BR.
// Si el RLO = "0", saltar a la etiqueta "MyLABEL" y
continuar all√≠ la ejecuci√≥n del programa.
// Si el RLO = "1", procesar la instrucci√≥n siguiente.

L "Tag_Input_3"

// Cargar el contenido del operando "Tag_Input_3" en
el acumulador 1.

T "Tag_Output"

// Transferir el contenido del acumulador 1 al operando "Tag_Output".

MyLABEL: A "Tag_Input_4"

// Continuar la ejecuci√≥n del programa en este punto
en caso de haberse ejecutado un salto.
// Consultar si el operando "Tag_Input_4" es "1" y
combinar el resultado l√≥gicamente con Y con el RLO.

Consulte tambi√©n
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Consultar el bit de estado con instrucciones de salto (P√°gina 196)
Vista general de los tipos de datos v√°lidos (P√°gina 241)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

JBI: Saltar si BR = 1
Descripci√≥n
La instrucci√≥n "Saltar si BR = 1" interrumpe la ejecuci√≥n lineal del programa en funci√≥n del
resultado binario y continuarla en el punto marcado por la etiqueta indicada.
El salto a la etiqueta se ejecuta solo si el bit de estado BR es "1". Si el bit de estado BR es "0",
el salto no se ejecuta y la ejecuci√≥n del programa contin√∫a con la instrucci√≥n siguiente.
La instrucci√≥n "Saltar si BR = 1" pone el bit de estado STA a "1" y los bits de estado OR y /FC
a "0", tanto si la condici√≥n se cumple como si no.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Saltar si BR = 1":
Par√°metro

Descripci√≥n

<Etiqueta>

Nombre simb√≥lico del destino del salto

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5477

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

SET

// Poner el RLO a "1" al principio del bloque.

SAVE

// Transferir el estado l√≥gico del RLO al bit BR.

....

// Cualquier programa

AN OV

// Consultar el bit OV al final del bloque.

SAVE

// En caso de desbordamiento, poner el bit BR a "0".
// Poner BR a "1" si no se produce desbordamiento.

JBI END

// Si BR = "1", saltar a la etiqueta END.
// Si BR = "0", procesar la instrucci√≥n siguiente.

R "Tag_Output_1"

// Poner el operando "Tag_Output_1" a "0".

END: S "Tag_Output_2"

// Poner el operando "Tag_Output_2" a "1".

Consulte tambi√©n
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Consultar el bit de estado con instrucciones de salto (P√°gina 196)
Vista general de los tipos de datos v√°lidos (P√°gina 241)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

JNBI: Saltar si BR = 0
Descripci√≥n
La instrucci√≥n "Saltar si BR = 0" interrumpe la ejecuci√≥n lineal del programa en funci√≥n del
resultado binario (BR) y la contin√∫a en el punto marcado por la etiqueta indicada.
El salto a la etiqueta se ejecuta solo si el bit de estado BR es "0". Si el bit de estado BR antes
de la instrucci√≥n es "1", el salto no se ejecuta y la ejecuci√≥n del programa contin√∫a con la
instrucci√≥n siguiente.
La instrucci√≥n "Saltar si BR = 0" pone el bit de estado STA a "1" y los bits de estado OR y /FC
a "0", tanto si la condici√≥n se cumple como si no.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Saltar si BR = 0":

5478

Par√°metro

Descripci√≥n

<Etiqueta>

Nombre simb√≥lico del destino del salto

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

SET

// Poner el RLO a "1" al principio del bloque.

SAVE

// Transferir el estado l√≥gico del RLO al bit BR.

....

// Cualquier programa

AN OV

// Consultar el bit OV al final del bloque.

SAVE

// En caso de desbordamiento, poner el bit BR a "0".
// Poner BR a "1" si no se produce desbordamiento.

JNBI END

// Si BR = "0", saltar a la etiqueta END.
// Si BR = "1", procesar la instrucci√≥n siguiente.

S "Tag_Output"

// Poner el operando "Tag_Output" a "1".

END: BE

// Finalizar bloque

Consulte tambi√©n
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Consultar el bit de estado con instrucciones de salto (P√°gina 196)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

JO: Saltar si OV = 1
Descripci√≥n
La instrucci√≥n "Saltar si OV = 1" interrumpe la ejecuci√≥n lineal del programa en funci√≥n del bit
de estado OV y la contin√∫a en el punto marcado por la etiqueta indicada.
El salto a la etiqueta se ejecuta solo si el bit de estado OV es "1". El bit de estado OV se activa
si, p. ej., el resultado de un c√°lculo est√° fuera del rango permitido o si al comparar n√∫meros en
coma flotante hay un valor no v√°lido.
Si el bit de estado OV es "0", el salto no se ejecuta y la ejecuci√≥n del programa contin√∫a con
la instrucci√≥n siguiente.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Saltar si OV = 1":
Par√°metro

Descripci√≥n

<Etiqueta>

Nombre simb√≥lico del destino del salto

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5479

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar valor

L "Tag_Value_2"

// Cargar valor

*I

// Multiplicar valores

JO OVER

// Si el estado l√≥gico del bit de estado OV es "1",
saltar a la etiqueta "OVER" y continuar all√≠ la ejecuci√≥n del programa.
// Si el estado l√≥gico del bit de estado OV es "0",
procesar la instrucci√≥n siguiente.

T "Tag_Result"

// Transferir el resultado de la multiplicaci√≥n al
operando "Tag_Result".

JU NEXT

// Saltar a la etiqueta "NEXT" y continuar all√≠ con la
ejecuci√≥n del programa.

OVER: SET

// Continuar la ejecuci√≥n del programa en este punto
si se cumple la condici√≥n (OV = "1").
// Poner el RLO al estado l√≥gico "1".

R "Tag_Output"

// Poner el operando "Tag_Output" a "0".

NEXT: A "MyTag_1"

// Etiqueta "NEXT"
// Consultar si el operando "MyTag_1" es "1" y combinar el resultado l√≥gicamente con Y.

A "MyTag_2"

// Consultar si el operando "MyTag_2" es "1" y combinar el resultado l√≥gicamente con Y.

S "Tag_Output_2"

// Si el RLO = 1, poner el operando "Tag_Output_2" a
"1".

Consulte tambi√©n
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Consultar el bit de estado con instrucciones de salto (P√°gina 196)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

JOS: Saltar si OS = 1
Descripci√≥n
La instrucci√≥n "Saltar si OS = 1" interrumpe la ejecuci√≥n lineal del programa en funci√≥n del bit
de estado OS y la contin√∫a en el punto marcado por la etiqueta indicada.
El salto a la etiqueta se ejecuta solo si el bit de estado OS es "1". El bit de estado OS se activa
siempre que un desbordamiento del rango num√©rico pone el bit de estado OV a "1". Al contrario

5480

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
que el bit de estado OV, el bit OS se mantiene activado aunque posteriormente haya un
resultado que est√© dentro del rango num√©rico permitido.
Si el bit de estado OS es "0", el salto no se ejecuta y la ejecuci√≥n del programa contin√∫a con
la instrucci√≥n siguiente.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Saltar si OS = 1":
Par√°metro

Descripci√≥n

<Etiqueta>

Nombre simb√≥lico del destino del salto

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar valor

L "Tag_Value_2"

// Cargar valor

*I

// Multiplicar valores cargados.
// Guardar el producto en el acumulador 1.

L "Tag_Value_3"

// Cargar valor

+I

// Sumar el valor cargado al producto.
// Guardar el producto en el acumulador 1.

L "Tag_Value_4"

// Cargar valor

-I

// Restar el valor cargado de la suma calculada.
// Guardar el producto en el acumulador 1.

JOS OVER

// En caso de desbordamiento en una de las tres instrucciones precedentes, el bit de estado OS se pone a
"1".
// Si el estado l√≥gico del bit de estado OS es "1" la
ejecuci√≥n del programa contin√∫a en la posici√≥n de la
etiqueta "OVER".
// Si el estado l√≥gico del bit de estado OS es "0",
procesar la instrucci√≥n siguiente.

T "Tag_Result"

// Transferir el resultado de todo el c√°lculo al operando "Tag_Result".

JU NEXT

// Saltar a la etiqueta "NEXT" y continuar all√≠ con la
ejecuci√≥n del programa.

OVER: SET

// Continuar la ejecuci√≥n del programa en este punto
si se cumple la condici√≥n (OV = "1").
// Poner el RLO al estado l√≥gico "1".

R "Tag_Output"

// Poner el operando "Tag_Output" a "0".

NEXT: A "MyTag_1"

// Etiqueta "NEXT"
// Consultar si el operando "MyTag_1" es "1" y combinar el resultado l√≥gicamente con Y.

A "MyTag_2"

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

// Consultar si el operando "MyTag_2" es "1" y combinar el resultado l√≥gicamente con Y.

5481

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

S "Tag_Output_2"

// Si el RLO = 1, poner el operando "Tag_Output_2" a
"1".

Consulte tambi√©n
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Consultar el bit de estado con instrucciones de salto (P√°gina 196)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

JZ: Saltar si el resultado es cero
Descripci√≥n
La instrucci√≥n "Saltar si el resultado es cero" interrumpe la ejecuci√≥n lineal del programa en
funci√≥n de los bits de estado CC 0 y CC 1 y continuarla en el punto marcado por la etiqueta
indicada.
El salto a la etiqueta indicada se ejecuta solo si el estado l√≥gico de los bits de estado CC 0 y
CC 1 es "0". Esto sucede cuando se cumple una de las condiciones siguientes:
‚óè Despu√©s de ejecutar una instrucci√≥n aritm√©tica sin desbordamiento, el acumulador 1 tiene
el valor "0".
‚óè Al ejecutar la instrucci√≥n "Sumar enteros (16 bits)" (+I) o "Sumar enteros dobles (32 bits)"
(+D) se produce un desbordamiento en el rango negativo.
‚óè Al ejecutar una instrucci√≥n aritm√©tica (aritm√©tica de punto flotante) con desbordamiento se
produce un rebasamiento inferior gradual del rango permitido.
‚óè El contenido del acumulador 2 es igual al contenido del acumulador 1 despu√©s de ejecutar
una instrucci√≥n de comparaci√≥n.
‚óè El contenido del acumulador 1 es cero despu√©s de ejecutar una operaci√≥n l√≥gica con
palabras.
‚óè Tras ejecutar una instrucci√≥n de desplazamiento, el valor del √∫ltimo bit desplazado es "0".
En los restantes casos, el salto no se ejecuta y la ejecuci√≥n del programa contin√∫a con la
instrucci√≥n siguiente.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Saltar si el resultado es cero":

5482

Par√°metro

Descripci√≥n

<Etiqueta>

Nombre simb√≥lico del destino del salto

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value"

// Cargar el valor del operando "Tag_Value".

SRW 1

// Desplazar el contenido de la palabra derecha del
acumulador 1 una posici√≥n a la derecha.

JZ ZERO

// Si el estado l√≥gico del √∫ltimo bit desplazado hacia
fuera es "0", saltar a la etiqueta "OVER" y continuar
all√≠ el procesamiento del programa
// Si el estado l√≥gico del √∫ltimo bit desplazado hacia
fuera es "1", procesar la instrucci√≥n siguiente.

L "MyTag_1"

// Cargar el valor del operando "MyTag_1" en el acumulador 1.

INC 1

// Sumar el valor "1" al byte derecho del acumulador 1.

T "Tag_Result_1"

// Transferir el resultado al operando "Tag_Result_1".

JU NEXT

// Saltar a la etiqueta "NEXT" y continuar all√≠ con la
ejecuci√≥n del programa.

ZERO: L "MyTag_2"

// Etiqueta "ZERO"
// Cargar el valor del operando "MyTag_2" en el acumulador 1.

INC 1

// Sumar el valor "1" al byte derecho del acumulador 1.

T "Tag_Result_2"

// Transferir el resultado al operando "Tag_Result_2".

NEXT: A "MyTag_3"

// Etiqueta "NEXT"
// Consultar si el operando "MyTag_3" es "1" y combinar el resultado l√≥gicamente con Y.

A "MyTag_4"

// Consultar si el operando "MyTag_4" es "1" y combinar el resultado l√≥gicamente con Y.

Consulte tambi√©n
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Consultar el bit de estado con instrucciones de salto (P√°gina 196)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

JN: Saltar si el resultado no es cero
Descripci√≥n
La instrucci√≥n "Saltar si el resultado no es cero" interrumpe la ejecuci√≥n lineal del programa en
funci√≥n de los bits de estado CC 0 y CC 1 y la contin√∫a en el punto marcado por la etiqueta
indicada.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5483

Instrucciones
4.2 Instrucciones
El salto a la etiqueta indicada se ejecuta solo si el estado l√≥gico de los bits de estado CC 0 y
CC 1 es distinto. Esto sucede cuando se cumple una de las condiciones siguientes:
‚óè Despu√©s de ejecutar una instrucci√≥n aritm√©tica sin desbordamiento, el valor del
acumulador 1 es distinto de cero.
‚óè Al ejecutar una instrucci√≥n aritm√©tica con enteros (+I, -I, *I, +D, -D, *D) se produce un
desbordamiento en el rango negativo.
‚óè Al ejecutar una instrucci√≥n aritm√©tica con enteros (+I, -I, *I, /I, +D, -D, *D, /D, NEGI, NEGD)
se produce un desbordamiento en el rango positivo.
‚óè Al ejecutar una instrucci√≥n aritm√©tica con n√∫meros en coma flotante se produce un
desbordamiento en el rango positivo o negativo.
‚óè El contenido del acumulador 2 es distinto al contenido del acumulador 1 despu√©s de
ejecutar una instrucci√≥n de comparaci√≥n.
‚óè El contenido del acumulador 1 no es cero despu√©s de ejecutar una operaci√≥n l√≥gica con
palabras.
‚óè Tras ejecutar una instrucci√≥n de desplazamiento, el valor del √∫ltimo bit desplazado es "1".
En los restantes casos, el salto no se ejecuta y la ejecuci√≥n del programa contin√∫a con la
instrucci√≥n siguiente.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Saltar si el resultado no es cero":
Par√°metro

Descripci√≥n

<Etiqueta>

Nombre simb√≥lico del destino del salto

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Valu_1".

L "Tag_Value_2"

// Cargar el valor del operando "Tag_Value_2".

XOW

// Combinar l√≥gicamente con O-exclusiva

JN NOZERO

// Cuando el valor del acumulador 1 no es cero, se
salta a la etiqueta "NOZERO" donde se contin√∫a ejecutando el programa.
// Cuando el valor en el acumulador 1 es igual a cero
se ejecuta la siguiente instrucci√≥n.

5484

AN "MyTag_1"

// Consultar si el operando "MyTag_1" es "0" y combinar el resultado l√≥gicamente con Y.

S "Tag_Output_1"

// Si el RLO = "1", poner el operando "Tag_Output_1" a
"1"

JU NEXT

// Saltar a la etiqueta "NEXT" y continuar all√≠ con la
ejecuci√≥n del programa.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

NOZERO: AN "MyTag_2"

// Etiqueta "NOZERO"
// Consultar si el operando "MyTag_2" es "0" y combinar el resultado l√≥gicamente con Y.

S "Tag_Output_2"

// Si el RLO es "1", poner el operando "Tag_Output_2"
a "1".

NEXT: A "MyTag_3"

// Etiqueta "NEXT"
// Consultar si el operando "MyTag_3" es "1" y combinar el resultado l√≥gicamente con Y.

A "MyTag_4"

// Consultar si el operando "MyTag_4" es "1" y combinar el resultado l√≥gicamente con Y.

Consulte tambi√©n
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Consultar el bit de estado con instrucciones de salto (P√°gina 196)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

JP: Saltar si el resultado es mayor que cero
Descripci√≥n
La instrucci√≥n "Saltar si el resultado es mayor que cero" interrumpe la ejecuci√≥n lineal del
programa en funci√≥n de los bits de estado CC 0 y CC 1 y la contin√∫a en el punto marcado por
la etiqueta indicada.
El salto a la etiqueta indicada se ejecuta solo si el estado l√≥gico del bit de estado CC 0 es "0"
y el del bit de estado CC 1 es "1". Esto sucede cuando se cumple una de las condiciones
siguientes:
‚óè Despu√©s de ejecutar una instrucci√≥n aritm√©tica sin desbordamiento, el valor del
acumulador 1 es mayor que cero.
‚óè Al ejecutar una instrucci√≥n aritm√©tica con enteros (+I, -I, +D, -D) se produce un
desbordamiento en el rango negativo.
‚óè Al ejecutar una instrucci√≥n aritm√©tica con enteros (*I, /I, *D, /D) se produce un
desbordamiento en el rango positivo.
‚óè Al ejecutar una instrucci√≥n aritm√©tica con n√∫meros en coma flotante se produce un
desbordamiento en el rango positivo.
‚óè Tras ejecutar una instrucci√≥n de comparaci√≥n, el contenido del acumulador 2 es mayor que
el contenido del acumulador 1.
‚óè Tras ejecutar una operaci√≥n l√≥gica con palabras, el contenido del acumulador 1 no es cero.
‚óè Tras ejecutar una instrucci√≥n de desplazamiento, el valor del √∫ltimo bit desplazado es "1".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5485

Instrucciones
4.2 Instrucciones
En los restantes casos, el salto no se ejecuta y la ejecuci√≥n del programa contin√∫a con la
instrucci√≥n siguiente.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Saltar si el resultado es mayor que
cero":
Par√°metro

Descripci√≥n

<Etiqueta>

Nombre simb√≥lico del destino del salto

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1".

L "Tag_Value_2"

// Cargar el valor del operando "Tag_Value_2".

-I

// Restar el valor del operando "Tag_Value_2" del valor del operando "Tag_Value_1".

JP POSITIVE

// Si el valor del resultado en el acumulador 1 es positivo, saltar a la etiqueta "POSITIVE" y continuar
all√≠ el procesamiento del programa
// Si el valor del resultado en el acumulador 1 es negativo, procesar la instrucci√≥n siguiente.

AN "MyTag_1"

// Consultar si el operando "MyTag_1" es "0" y combinar el resultado l√≥gicamente con Y.

S "Tag_Output_1"

// Si el RLO = "1", poner el operando "Tag_Output_1" a
"1"

JU NEXT

// Saltar a la etiqueta "NEXT" y continuar all√≠ con la
ejecuci√≥n del programa.

POSITIVE: AN "MyTag_2"

// Etiqueta "POSITIVE"
// Consultar si el operando "MyTag_2" es "0" y combinar el resultado l√≥gicamente con Y.

S "Tag_Output_2"

// Si el RLO ="1", poner el operando "Tag_Output_2" a
"1"

NEXT: A "MyTag_3"

// Etiqueta "NEXT"
// Consultar si el operando "MyTag_3" es "1" y combinar el resultado l√≥gicamente con Y.

A "MyTag_4"

// Consultar si el operando "MyTag_4" es "1" y combinar el resultado l√≥gicamente con Y.

Consulte tambi√©n
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Consultar el bit de estado con instrucciones de salto (P√°gina 196)

5486

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

JM: Saltar si el resultado es menor que cero
Descripci√≥n
La instrucci√≥n "Saltar si el resultado es menor que cero" interrumpe la ejecuci√≥n lineal del
programa en funci√≥n de los bits de estado CC 0 y CC 1 y la contin√∫a en el punto marcado por
la etiqueta indicada.
El salto a la etiqueta indicada se ejecuta solo si el estado l√≥gico del bit de estado CC 0 es "1"
y el del bit de estado CC 1 es "0". Esto sucede cuando se cumple una de las condiciones
siguientes:
‚óè Despu√©s de ejecutar una instrucci√≥n aritm√©tica sin desbordamiento, el valor del
acumulador 1 es menor que cero.
‚óè Al ejecutar una instrucci√≥n aritm√©tica con enteros (*I, *D) se produce un desbordamiento en
el rango negativo.
‚óè Al ejecutar una instrucci√≥n aritm√©tica con enteros (+I, -I, +D, -D, NEGI, NEGD) se produce
un desbordamiento en el rango positivo.
‚óè Al ejecutar una instrucci√≥n aritm√©tica con n√∫meros en coma flotante se produce un
desbordamiento en el rango negativo.
‚óè Tras ejecutar una instrucci√≥n de comparaci√≥n, el contenido del acumulador 2 es menor que
el contenido del acumulador 1.
En los restantes casos, el salto no se ejecuta y la ejecuci√≥n del programa contin√∫a con la
instrucci√≥n siguiente.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Saltar si el resultado es menor que
cero":
Par√°metro

Descripci√≥n

<Etiqueta>

Nombre simb√≥lico del destino del salto

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1".

L "Tag_Value_2"

// Cargar el valor del operando "Tag_Value_2".

-I

// Restar el valor del operando "Tag_Value_2" del valor del operando "Tag_Value_1".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5487

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

JM NEGATIVE

// Si el valor del resultado en el acumulador 1 es negativo, saltar a la etiqueta "NEGATIVE" y continuar
all√≠ el procesamiento del programa
// Si el valor del resultado en el acumulador 1 es positivo, procesar la instrucci√≥n siguiente.

AN "MyTag_1"

// Consultar si el operando "MyTag_1" es "0" y combinar el resultado l√≥gicamente con Y.

S "Tag_Output_1"

// Si el RLO = "1", poner el operando "Tag_Output_1" a
"1"

JU NEXT

// Saltar a la etiqueta "NEXT" y continuar all√≠ con la
ejecuci√≥n del programa.

NEGATIVE: AN "MyTag_2"

// Etiqueta "NEGATIVE"
// Consultar si el operando "MyTag_2" es "0" y combinar el resultado l√≥gicamente con Y.

S "Tag_Output_2"

// Si el RLO = "1", poner el operando "Tag_Output_2" a
"1"

NEXT: A "MyTag_3"

// Etiqueta "NEXT"
// Consultar si el operando "MyTag_3" es "1" y combinar el resultado l√≥gicamente con Y.

A "MyTag_4"

// Consultar si el operando "MyTag_4" es "1" y combinar el resultado l√≥gicamente con Y.

Consulte tambi√©n
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Consultar el bit de estado con instrucciones de salto (P√°gina 196)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

JPZ: Saltar si el resultado es mayor o igual a cero
Descripci√≥n
La instrucci√≥n "Saltar si el resultado es mayor o igual a cero" interrumpe la ejecuci√≥n lineal del
programa en funci√≥n del bit de estado CC 0 y la contin√∫a en el punto marcado por la etiqueta
indicada.
El salto a la etiqueta indicada se ejecuta solo si el estado l√≥gico del bit de estado CC 0 es "0".
Esto sucede cuando se cumple una de las condiciones siguientes:
‚óè Despu√©s de ejecutar una instrucci√≥n aritm√©tica sin desbordamiento, el valor del
acumulador 1 es mayor o igual que cero.
‚óè Al ejecutar una instrucci√≥n aritm√©tica con enteros (+I, -I, +D, -D) se produce un
desbordamiento en el rango negativo.

5488

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
‚óè Al ejecutar una instrucci√≥n aritm√©tica con enteros (*I, /I, *D, /D) se produce un
desbordamiento en el rango positivo.
‚óè Al ejecutar una instrucci√≥n aritm√©tica con n√∫meros en coma flotante se produce un
desbordamiento en el rango positivo.
‚óè Al ejecutar una instrucci√≥n aritm√©tica (aritm√©tica de punto flotante) con desbordamiento se
produce un rebasamiento inferior gradual del rango permitido.
‚óè Tras ejecutar una instrucci√≥n de comparaci√≥n, el contenido del acumulador 2 es mayor o
igual al contenido del acumulador 1.
‚óè Se ha ejecutado una instrucci√≥n de operaci√≥n l√≥gica por palabras.
‚óè Se ha ejecutado una instrucci√≥n de desplazamiento.
En los restantes casos, el salto no se ejecuta y la ejecuci√≥n del programa contin√∫a con la
instrucci√≥n siguiente.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Saltar si el resultado es mayor o
igual a cero":
Par√°metro

Descripci√≥n

<Etiqueta>

Nombre simb√≥lico del destino del salto

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1".

L "Tag_Value_2"

// Cargar el valor del operando "Tag_Value_2".

-I

// Restar el valor del operando "Tag_Value_2" del valor del operando "Tag_Value_1".

JPZ REGULAR

// Si el valor del resultado en el acumulador 1 es positivo, saltar a la etiqueta "REGULAR" y continuar
all√≠ el procesamiento del programa
// Si el valor del resultado en el acumulador 1 es negativo, procesar la instrucci√≥n siguiente.

AN "MyTag_1"

// Consultar si el operando "MyTag_1" es "0" y combinar el resultado l√≥gicamente con Y.

S "Tag_Output_1"

// Si el RLO = "1", poner el operando "Tag_Output_1" a
"1"

JU NEXT

// Saltar a la etiqueta "NEXT" y continuar all√≠ con la
ejecuci√≥n del programa.

REGULAR: AN "MyTag_2"

// Etiqueta "REGULAR"
// Consultar si el operando "MyTag_2" es "0" y combinar el resultado l√≥gicamente con Y.

S "Tag_Output_2"

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

// Si el RLO = "1", poner el operando "Tag_Output_2" a
"1"

5489

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

NEXT: A "MyTag_3"

// Etiqueta "NEXT"
// Consultar si el operando "MyTag_3" es "1" y combinar el resultado l√≥gicamente con Y.

A "MyTag_4"

// Consultar si el operando "MyTag_4" es "1" y combinar el resultado l√≥gicamente con Y.

Consulte tambi√©n
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Consultar el bit de estado con instrucciones de salto (P√°gina 196)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

JMZ: Saltar si el resultado es menor o igual a cero
Descripci√≥n
La instrucci√≥n "Saltar si el resultado es menor o igual a cero" interrumpe la ejecuci√≥n lineal del
programa en funci√≥n del bit de estado CC 1 y la contin√∫a en el punto marcado por la etiqueta
indicada.
El salto a la etiqueta indicada se ejecuta solo si el estado l√≥gico del bit de estado CC 1 es "0".
Esto sucede cuando se cumple una de las condiciones siguientes:
‚óè Despu√©s de ejecutar una instrucci√≥n aritm√©tica sin desbordamiento, el valor del
acumulador 1 es menor o igual que cero.
‚óè Al ejecutar una instrucci√≥n aritm√©tica con enteros (+I, *I, +D, *D) se produce un
desbordamiento en el rango negativo.
‚óè Al ejecutar una instrucci√≥n aritm√©tica con enteros (+I, -I, +D, -D, NEGI, NEGD) se produce
un desbordamiento en el rango positivo.
‚óè Al ejecutar una instrucci√≥n aritm√©tica con n√∫meros en coma flotante se produce un
desbordamiento en el rango negativo.
‚óè Al ejecutar una instrucci√≥n aritm√©tica (aritm√©tica de punto flotante) con desbordamiento se
produce un rebasamiento inferior gradual del rango permitido.
‚óè Tras ejecutar una instrucci√≥n de comparaci√≥n, el contenido del acumulador 2 es menor o
igual al contenido del acumulador 1.
‚óè Tras ejecutar una operaci√≥n l√≥gica con palabras, el valor del acumulador 1 es cero.
‚óè Tras ejecutar una instrucci√≥n de desplazamiento, el valor del √∫ltimo bit desplazado es cero.
En los restantes casos, el salto no se ejecuta y la ejecuci√≥n del programa contin√∫a con la
instrucci√≥n siguiente.

5490

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Saltar si el resultado es menor o
igual a cero":
Par√°metro

Descripci√≥n

<Etiqueta>

Nombre simb√≥lico del destino del salto

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1".

L "Tag_Value_2"

// Cargar el valor del operando "Tag_Value_2".

-I

// Restar el valor del operando "Tag_Value_2" del valor del operando "Tag_Value_1".

JMZ MyLABEL

// Si el valor del resultado en el acumulador 1 es negativo, saltar a la etiqueta "MyLABEL" y continuar
all√≠ el procesamiento del programa
// Si el valor del resultado en el acumulador 1 es positivo, procesar la instrucci√≥n siguiente.

AN "MyTag_1"

// Consultar si el operando "MyTag_1" es "0" y combinar el resultado l√≥gicamente con Y.

S "Tag_Output_1"

// Si el RLO = "1", poner el operando "Tag_Output_1" a
"1"

JU NEXT

// Saltar a la etiqueta "NEXT" y continuar all√≠ con la
ejecuci√≥n del programa.

MyLABEL: AN "MyTag_2"

// Etiqueta "MyLABEL"
// Consultar si el operando "MyTag_2" es "0" y combinar el resultado l√≥gicamente con Y.

S "Tag_Output_2"

// Si RLO="1", poner el operando "Tag_Output_2" a "1"

NEXT: A "MyTag_3"

// Etiqueta "NEXT"
// Consultar si el operando "MyTag_3" es "1" y combinar el resultado l√≥gicamente con Y.

A "MyTag_4"

// Consultar si el operando "MyTag_4" es "1" y combinar el resultado l√≥gicamente con Y.

Consulte tambi√©n
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Consultar el bit de estado con instrucciones de salto (P√°gina 196)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5491

Instrucciones
4.2 Instrucciones

JUO: Saltar si el resultado no es v√°lido
Descripci√≥n
La instrucci√≥n "Saltar si el resultado no es v√°lido" interrumpe la ejecuci√≥n lineal del programa
en funci√≥n de los bits de estado CC 0 y CC 1 y la contin√∫a en el punto marcado por la etiqueta
indicada.
El salto a la etiqueta indicada se ejecuta solo si el estado l√≥gico de los bits de estado CC 0 y
CC 1 es "1". Esto sucede cuando se cumple una de las condiciones siguientes:
‚óè En una instrucci√≥n matem√°tica (/I, /D, MOD) se divide entre cero.
‚óè En la ejecuci√≥n de una instrucci√≥n matem√°tica con n√∫meros en coma flotante se produce
un desbordamiento y el resultado es un n√∫mero en coma flotante no v√°lido.
‚óè En la ejecuci√≥n de una instrucci√≥n de comparaci√≥n con n√∫meros en coma flotante se ha
empleado un n√∫mero en coma flotante no v√°lido o ha dado como resultado.
En los restantes casos, el salto no se ejecuta y la ejecuci√≥n del programa contin√∫a con la
instrucci√≥n siguiente.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Saltar si el resultado no es v√°lido":
Par√°metro

Descripci√≥n

<Etiqueta>

Nombre simb√≥lico del destino del salto

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1".

L "Tag_Value_2"

// Cargar el valor del operando "Tag_Value_2".

/I

// Dividir el valor del operando "Tag_Value_1" por el
valor del operando "Tag_Value_2".

JUO ERROR

// En una divisi√≥n por cero, saltar a la etiqueta
"ERROR" y continuar all√≠ el procesamiento del programa
// En otro caso, procesar la instrucci√≥n siguiente.

T "Tag_Result"

// Transferir el contenido del acumulador 1 al operando "Tag_Result".

A "MyTag_1"

// Consultar si el operando "MyTag_1" es "1" y combinar el resultado l√≥gicamente con Y.

R "MyTag_1"

// Si el RLO = "1", poner el operando "MyTag_1" a "0".

JU NEXT

// Saltar a la etiqueta "NEXT" y continuar all√≠ con la
ejecuci√≥n del programa.

ERROR: AN "MyTag_1"

// Etiqueta "ERROR"
// Consultar si el operando "MyTag_1" es "0" y combinar el resultado l√≥gicamente con Y.

5492

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

S "MyTag_1"

// Si el RLO = "1", poner el operando "MyTag_1" a "1"

NEXT: A "MyTag_3"

// Etiqueta "NEXT"
// Consultar si el operando "MyTag_3" es "1" y combinar el resultado l√≥gicamente con Y.

A "MyTag_4"

// Consultar si el operando "MyTag_4" es "1" y combinar el resultado l√≥gicamente con Y.

Consulte tambi√©n
Principios b√°sicos de la palabra de estado (P√°gina 184)
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Consultar el bit de estado con instrucciones de salto (P√°gina 196)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Activar el bit de estado (P√°gina 186)

JL: Definir lista de saltos
Descripci√≥n
La instrucci√≥n "Definir lista de saltos" permite programar una lista compuesta por varias
entradas de la instrucci√≥n "Salto incondicional" (JU). La lista empieza inmediatamente
despu√©s de la instrucci√≥n "Definir lista de saltos" y puede contener un m√°ximo de 255
entradas. La numeraci√≥n de las funciones de salto de la lista empieza por cero. La lista de
saltos debe programarse sin huecos. El final de la lista de saltos se marca con una etiqueta que
se indica en la instrucci√≥n "Definir lista de saltos".
La funci√≥n de salto de la lista que se ejecutar√° depende del valor del byte derecho del
acumulador 1. Si, p. ej., en el acumulador 1 hay el valor "0", se ejecutar√° la primera funci√≥n de
salto. Si el valor del acumulador 1 es "1", se ejecutar√° la segunda funci√≥n de salto. Si el valor
del acumulador "1" es mayor que el n√∫mero de entradas de la lista, la instrucci√≥n "Definir lista
de saltos" remite al final de la lista.
La instrucci√≥n "Distribuidor de saltos" se ejecuta independientemente de las condiciones y no
influye en los bits de estado.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value"

// Cargar el n√∫mero de salto en el acumulador 1.

JL END

// Principio de la lista de saltos

JU MyLABEL_1

// Si el valor del acumulador 1 es "0", ejecutar y
saltar a la etiqueta "MyLABEL_1".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5493

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

JU MyLABEL_2

// Si el valor del acumulador 1 es "1", ejecutar y
saltar a la etiqueta "MyLABEL_2".

JU MyLABEL_3

// Si el valor del acumulador 1 es "2", ejecutar y
saltar a la etiqueta "MyLABEL_3".

END: L "MyTag_1"

// Fin de la lista de saltos
// Cargar el contenido del operando "MyTag_1" en el
acumulador 1.

L "MyTag_2"

// Cargar el contenido del operando "MyTag_2" en el
acumulador 1.

+I

// Sumar valores

T "Tag_Output_2"

// Cargar el contenido del acumulador 1 en el operando
"Tag_Output_2".

MyLABEL_1: ...

// Etiqueta "MyLABEL_1"

....

// Cualquier programa

JU NEXT

// Saltar a la etiqueta "NEXT" y continuar all√≠ con la
ejecuci√≥n del programa.

MyLABEL_2: ...

// Etiqueta "MyLABEL_2"

....

// Cualquier programa

JU NEXT

// Saltar a la etiqueta "NEXT" y continuar all√≠ con la
ejecuci√≥n del programa.

MyLABEL_3: ...

// Etiqueta "MyLABEL_3"

....

// Cualquier programa

JU NEXT

// Saltar a la etiqueta "NEXT" y continuar all√≠ con la
ejecuci√≥n del programa.

NEXT: ...

// Etiqueta "NEXT"

Consulte tambi√©n
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Consultar el bit de estado con instrucciones de salto (P√°gina 196)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Ejemplos de programaci√≥n AWL (P√°gina 8102)

LOOP: Bucle
Descripci√≥n
La instrucci√≥n "Bucle" permite programar bucles.
La instrucci√≥n interpreta la palabra derecha del acumulador 1 como un entero de 16 bits sin
signo en el rango de 0 a 65535. Al ejecutarse, la instrucci√≥n reduce primero en uno el contenido
del acumulador 1. Si el valor del acumulador 1 no es cero despu√©s de decrementar, se ejecuta
el salto hasta la etiqueta indicada. Si el valor es cero, el salto no se ejecuta y la ejecuci√≥n del

5494

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
programa contin√∫a con la instrucci√≥n siguiente. Por consiguiente, el valor del acumulador 1
determina el n√∫mero de bucles que se ejecutar√°n. Dicho n√∫mero debe guardarse en un
contador de bucles.
El operando <N√∫mero> contiene el n√∫mero de bucles ejecutados. El operando <Contador de
bucles> contiene el n√∫mero de bucles pendientes de ser ejecutados. Al final del bucle, el
contenido del contador de bucles se carga en el acumulador 1 y es decrementado en uno por
la instrucci√≥n. El salto hasta la etiqueta al principio del bucle se ejecuta si el valor del
acumulador no es cero despu√©s de decrementar.
La instrucci√≥n "Bucle" no influye en los bits de estado.
Nota
Si al contador de bucles no se le ha asignado ning√∫n valor inicial o se le ha asignado el valor
inicial "0", se va reduciendo hacia el negativo, lo que resulta en un bucle sin fin que puede
provocar el estado operativo STOP de la CPU.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value"

// Cargar el n√∫mero de ejecuciones de bucle pendientes
en la palabra derecha del acumulador 1.

START: T "Tag_Counter"

// Principio de la lista de saltos
// Transferir el contenido del acumulador 1 al contador de bucles.

L "MyTag_1"

// Cargar el valor del operando "MyTag_1".

L "MyTag_2"

// Cargar el valor del operando "MyTag_2".

*D

// Multiplicar valores

T "MyTag_1"

// Transferir el resultado de la multiplicaci√≥n al
operando "MyTag_1".

L "Tag_Counter"

// Cargar el contenido del contador de bucles en el
acumulador 1.

LOOP START

// Decrementar en uno el valor del acumulador 1.
// Si el valor es distinto de cero, saltar al principio del bucle.
// Si el valor es cero, procesar la instrucci√≥n siguiente.

L "MyTag_2"

// Cargar el valor del operando "MyTag_2".

L 100

// Cargar el valor 100.

>I

// Comparar si el valor del operando "MyTag_2" es mayor que 200.

= "MyTag_3"

// Escribir el resultado de la comparaci√≥n en el operando "MyTag_3".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5495

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Consultar el bit de estado con instrucciones de salto (P√°gina 196)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

Bloques de datos
OPN: Abrir bloque de datos global
Descripci√≥n
La instrucci√≥n "Abrir bloque de datos global" abre un bloque de datos (DB) global. El n√∫mero
del bloque de datos se transmite al registro del DB. Los siguientes comandos de DB acceden
a los bloques correspondientes en funci√≥n de los contenidos del registro.
La instrucci√≥n "Abrir bloque de datos global" se ejecuta independientemente de las
condiciones y no influye ni en el resultado l√≥gico ni en los contenidos de los acumuladores.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Abrir bloque de datos global":
Operando

Declaraci√≥n

Tipo del bloque de da‚Äê
tos

Descripci√≥n

<Bloque de datos>

-

DB

Bloque de datos que se
abrir√°.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

OPN "GlobalDataBlock"

// Abrir el bloque de datos global.

L %DBW0

// Cargar palabra de datos DBW0 del bloque de
datos global abierto en acumulador 1.

T "MyTag"

// Transferir el contenido del acumulador 1 al
operando "MyTag_1".

Consulte tambi√©n
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Principios b√°sicos de la palabra de estado (P√°gina 184)

5496

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

OPNDI: Abrir el bloque de datos de instancia
Descripci√≥n
La instrucci√≥n "Abrir bloque de datos de instancia" abre un bloque de datos de instancia (DI).
El n√∫mero del bloque de datos se transmite al registro del DI. Los siguientes comandos del DI
acceden a los bloques correspondientes en funci√≥n de los contenidos del registro.
La instrucci√≥n "Abrir bloque de datos de instancia" se ejecuta independientemente de las
condiciones y no influye ni en el resultado l√≥gico ni en los contenidos de los acumuladores.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Abrir bloque de datos de
instancia":
Operando

Declaraci√≥n

Tipo del bloque de da‚Äê
tos

Descripci√≥n

<Bloque de datos>

-

DI

Bloque de datos que se
abrir√°.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

OPNDI "InstanceDataBlock"

// Abrir el bloque de datos de instancia

L %DIW0

// Cargar palabra de datos DIW0 del bloque de
datos de instancia abierto en acumulador 1.

T "MyTag"

// Transferir el contenido del acumulador 1 al
operando "MyTag".

Consulte tambi√©n
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5497

Instrucciones
4.2 Instrucciones

CDB: Intercambiar registros de bloques de datos
Descripci√≥n
La instrucci√≥n "Intercambiar registros de bloques de datos" cambia los contenidos de los
registros de los bloques de datos. La instrucci√≥n se ejecuta independientemente de las
condiciones y no influye en los bits de estado.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

OPN "GlobalDataBlock"

// Abrir bloque de datos global

OPNDI "InstanceDataBlock"

// Abrir el bloque de datos de instancia

CDB

// Intercambiar registros de bloques de datos
// El registro DB remite a "InstanceDataBlock"
y el registro DI remite a "GlobalDataBlock".

L %DIW0

// Cargar DW0 de "GlobalDataBlock" en el acumulador 1.

Consulte tambi√©n
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

L DBLG: Cargar longitud de un bloque de datos global en acumulador 1
Descripci√≥n
La instrucci√≥n "Cargar longitud del bloque de datos global en acumulador 1" carga en el
acumulador 1 la longitud de un bloque de datos global abierto mediante el registro del bloque
de datos. El contenido anterior del acumulador 1 se desplaza al acumulador 2.
Si antes de ejecutar la instrucci√≥n no se ha abierto ning√∫n bloque de datos global mediante el
registro del bloque de datos, se carga el valor "0" en el acumulador 1. La longitud del bloque
de datos es equivalente al n√∫mero de bytes de datos.
La instrucci√≥n no modifica los bits de estado.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:

5498

AWL

Explicaci√≥n

OPN "GlobalDataBlock"

// Abrir bloque de datos global

L DBLG

// Cargar la longitud de un bloque de datos
abierto en el acumulador 1.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

L "MyTag_1"

// Cargar el valor de comparaci√≥n

<D

// Comparar si la longitud del bloque de datos
es menor que el valor del operando "MyTag_1".

= "MyTag_2"

// Escribir el resultado de la consulta en el
operando "MyTag_2".

Consulte tambi√©n
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

L DBNO: Cargar n√∫mero de un bloque de datos global en acumulador 1
Descripci√≥n
La instrucci√≥n "Cargar n√∫mero del bloque de datos global en acumulador 1" carga en el
acumulador 1 el n√∫mero de un bloque de datos global abierto mediante el registro del bloque
de datos. El contenido anterior del acumulador 1 se desplaza al acumulador 2.
Si antes de ejecutar la instrucci√≥n no se ha abierto ning√∫n bloque de datos global mediante el
registro del bloque de datos, se carga el valor "0" en el acumulador 1.
La instrucci√≥n no modifica los bits de estado.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

OPN "GlobalDataBlock"

// Abrir bloque de datos global

L DBNO

// Cargar n√∫mero de un bloque de datos abierto
en acumulador 1.

L "MyTag_1"

// Cargar el valor de comparaci√≥n

==I

// Comparar si el n√∫mero del bloque de datos
es igual al valor del operando "MyTag_1".

= "MyTag_2"

// Escribir el resultado de la consulta en el
operando "MyTag_2".

Consulte tambi√©n
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5499

Instrucciones
4.2 Instrucciones

L DILG: Cargar longitud de un bloque de datos de instancia en acumulador 1
Descripci√≥n
La instrucci√≥n "Cargar longitud del bloque de datos de instancia en acumulador 1" carga en el
acumulador 1 la longitud de un bloque de datos de instancia abierto mediante el registro del
bloque de datos. El contenido anterior del acumulador 1 se desplaza al acumulador 2.
Si antes de ejecutar la instrucci√≥n no se ha abierto ning√∫n bloque de datos de instancia
mediante el registro del bloque de datos, se carga el valor "0" en el acumulador 1. La longitud
del bloque de datos es equivalente al n√∫mero de bytes de datos.
La instrucci√≥n no modifica los bits de estado.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

OPNDI "InstanceDataBlock"

// Abrir el bloque de datos de instancia

L DILG

// Cargar la longitud de un bloque de datos
abierto en el acumulador 1.

L "MyTag_1"

// Cargar el valor de comparaci√≥n

<I

// Comparar si la longitud del bloque de datos
es menor que el valor del operando "MyTag_1".

= "MyTag_2"

// Escribir el resultado de la consulta en el
operando "MyTag_2".

Consulte tambi√©n
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

L DINO: Cargar n√∫mero de un bloque de datos de instancia en acumulador 1
Descripci√≥n
La instrucci√≥n "Cargar n√∫mero del bloque de datos de instancia en acumulador 1" carga en el
acumulador 1 el n√∫mero de un bloque de datos de instancia abierto mediante el registro del
bloque de datos. El contenido anterior del acumulador 1 se desplaza al acumulador 2.
Si antes de ejecutar la instrucci√≥n no se ha abierto ning√∫n bloque de datos de instancia
mediante el registro del bloque de datos, se carga el valor "0" en el acumulador 1.
La instrucci√≥n no modifica los bits de estado.

5500

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

OPNDI "InstanceDataBlock"

// Abrir el bloque de datos de instancia

L DINO

// Cargar n√∫mero de un bloque de datos abierto
en acumulador 1.

L "MyTag_1"

// Cargar el valor de comparaci√≥n

==I

// Comparar si el n√∫mero del bloque de datos
es igual al valor del operando "MyTag_1".

= "MyTag_2"

// Asignar el resultado de la consulta al operando "MyTag_2".

Consulte tambi√©n
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

Bloques l√≥gicos
BE: Fin de bloque
Descripci√≥n
La instrucci√≥n "Fin de bloque" finaliza el procesamiento del bloque actual y pasa al punto del
programa en el que se llama el bloque. El procesamiento del programa contin√∫a con la
instrucci√≥n que se encuentra justo despu√©s de la llamada del bloque.
Al finalizar el bloque, el resultado l√≥gico actual se transfiere al bloque que efect√∫a la llamada.
La instrucci√≥n "Fin de bloque" se ejecuta siempre, independientemente de las condiciones. Si
el procesamiento de la instrucci√≥n se salta debido a una instrucci√≥n de salto, la ejecuci√≥n
actual del programa no finaliza, sino que contin√∫a en el destino del salto dentro del bloque.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1" en el
acumulador 1.

SIN

// Calcular el seno
// Guardar el resultado en el acumulador 1.

L "Tag_Value_2"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_2" en el
acumulador 1.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5501

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

*R

// Multiplicar los valores de los acumuladores 1 y 2.
// Guardar el producto en el acumulador 1.

L "Tag_Value_3"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_3" en el
acumulador 1.

*R

// Multiplicar los valores de los acumuladores 1 y 2.
// Guardar el producto en el acumulador 1.

T "Tag_Result"

// Transferir el contenido del acumulador 1 al operando "Tag_Result".

BE

// Finalizar bloque

Consulte tambi√©n
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

BEC: Fin de bloque condicional
Descripci√≥n
La instrucci√≥n "Fin de bloque condicional" finaliza el procesamiento del bloque actual en
funci√≥n del resultado l√≥gico (RLO) y pasa al punto del programa en el que se llama el bloque.
Si el RLO es "1", se ejecuta la instrucci√≥n. El bloque actual se finaliza y la ejecuci√≥n del
programa contin√∫a en el bloque que efect√∫a la llamada. El procesamiento del programa
contin√∫a con la instrucci√≥n que se encuentra justo despu√©s de la llamada del bloque.
Al finalizar el bloque, el resultado l√≥gico actual se transfiere al bloque que efect√∫a la llamada.
En el bloque que efect√∫a la llamada, la dependencia de MCR se ajusta igual que estaba antes
de llamar el bloque. Los bloques de datos que estaban abiertos en el momento de llamar el
bloque vuelven a abrirse.
Si el RLO es "0" al procesar la instrucci√≥n, esta no se ejecuta. En este caso, la CPU pone el
RLO a "1" y procesa la instrucci√≥n siguiente.
Si el procesamiento de la instrucci√≥n se salta debido a una instrucci√≥n de salto, la ejecuci√≥n
actual del programa no finaliza, sino que contin√∫a en el destino del salto dentro del bloque.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:

5502

AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1" en el
acumulador 1.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

L "Tag_Value_2"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_2" en el
acumulador 1.

>I

// Comparar si el valor del acumulador 2 es mayor que
el valor del acumulador 1.

A "Tag_Input"

// Consultar si el operando "Tag_Input" es "1" y combinar el resultado l√≥gicamente con Y con el RLO.

BEC

// Si la condici√≥n se cumple (RLO = "1"), finalizar el
bloque.
// Si la condici√≥n no se cumple (RLO = "0"), procesar
la instrucci√≥n siguiente.

T "Tag_Result"

// Transferir el contenido del acumulador 1 al operando "Tag_Result".

Consulte tambi√©n
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

BEU: Fin de bloque incondicional
Descripci√≥n
La instrucci√≥n "Fin de bloque incondicional" finaliza el procesamiento del bloque actual y pasa
al punto del programa en el que se llama el bloque. El procesamiento del programa contin√∫a
con la instrucci√≥n que se encuentra justo despu√©s de la llamada del bloque.
Al finalizar el bloque, el resultado l√≥gico actual se transfiere al bloque que efect√∫a la llamada.
En el bloque que efect√∫a la llamada, la dependencia de MCR se ajusta igual que estaba antes
de llamar el bloque. Los bloques de datos que estaban abiertos en el momento de llamar el
bloque vuelven a abrirse.
La instrucci√≥n "Fin de bloque incondicional" se ejecuta siempre, independientemente de las
condiciones. Al contrario que la instrucci√≥n "Fin de bloque", es posible programar la instrucci√≥n
"Fin de bloque incondicional" varias veces dentro de un bloque. Si el procesamiento de la
instrucci√≥n se salta debido a una instrucci√≥n de salto, la ejecuci√≥n actual del programa no
finaliza, sino que contin√∫a en el destino del salto dentro del bloque.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5503

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1" en el
acumulador 1.

L "Tag_Value_2"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_2" en el
acumulador 1.

>I

// Comparar si el valor del acumulador 2 es mayor que
el valor del acumulador 1.

A "Tag_Input"

// Consultar si el operando "Tag_Input" es "1" y combinar el resultado l√≥gicamente con Y con el RLO.

JC NEXT

// Si la condici√≥n se cumple (RLO = "1"), continuar el
procesamiento del programa a partir de la etiqueta
"NEXT".
// Si la condici√≥n no se cumple (RLO = "0"), procesar
la instrucci√≥n siguiente.

BEU

// Finalizar bloque

NEXT: T "Tag_Result"

// Etiqueta "NEXT"
// Transferir el contenido del acumulador 1 al operando "Tag_Result".

Consulte tambi√©n
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Ejemplos de programaci√≥n AWL (P√°gina 8102)

CALL: Llamar bloque
Descripci√≥n
La instrucci√≥n "Llamar bloque" llama los siguientes tipos de bloque en el programa:
‚óè Funciones
‚óè Bloques de funci√≥n
La instrucci√≥n "Llamar bloque" se ejecuta siempre, independientemente de las condiciones.
Tras ejecutar la instrucci√≥n, el procesamiento del programa contin√∫a en el bloque llamado.
Existe la posibilidad de suministrar datos a un bloque llamado. Los datos se transfieren
mediante los par√°metros del bloque. Los par√°metros del bloque llamado se listan en el bloque
que efect√∫a la llamada despu√©s de la instrucci√≥n de llamada. Es posible asignarles los
par√°metros actuales necesarios. Al ejecutar la instrucci√≥n "Llamar bloque", los datos se

5504

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
transfieren al bloque llamado. Con la transmisi√≥n de los datos se modifican los contenidos
tanto de la palabra de estado como del registro de direcciones y del de los bloques de datos.
Los par√°metros de un bloque de funci√≥n que no reciben valores nuevos conservan su valor
actual. Al llamar funciones deben suministrarse valores a todos los par√°metros. Si un bloque
llamado no tiene par√°metros, no se muestra la lista de par√°metros.
Si el bloque llamado requiere un bloque de datos de instancia, √©ste debe indicarse en la
llamada, separado por una coma. El bloque de datos indicado debe haberse creado antes de
la llamada.
Una vez procesado el bloque llamado, la CPU vuelve al bloque que efect√∫a la llamada y
contin√∫a con el procesamiento de dicho bloque despu√©s de la instrucci√≥n de llamada.
En el bloque que efect√∫a la llamada, la dependencia de MCR se ajusta igual que estaba antes
de llamar el bloque. Los bloques de datos que estaban abiertos en el momento de llamar el
bloque vuelven a abrirse.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

CALL "MyFunction"
Input_1 := "Tag_Input_1",

// Llamar la funci√≥n "MyFunction"
// Asignar par√°metros actuales

Input_2 := "Tag_Input_2"
Output_1 := "Tag_Output_1"
Output_2 := "Tag_Output_1"
CALL "MyFunctionBlock", "MyFB_DB"
Value_1 := "Tag_Value_1"

// Llamar el bloque de funci√≥n "MyFunctionBlock"

Value_2 := "Tag_Value_2"

// Asignar par√°metros actuales

Output := "Tag_Output"
CALL "LIMIT"
MN := "Tag_LowLimit"

// Llamar la instrucci√≥n "Ajustar valor l√≠mite"

IN := "Tag_InputValue"

// Asignar par√°metros actuales

MX := "Tag_HighLimit"
OUT := "Tag_Output"
CALL "CTU", "CTU_DB"
CU := "Tag_StartCTU"

// Llamar el contador "Contador ascendente"
// Asignar par√°metros actuales

R := "Tag_ResetCounter"
PV := "Tag_PresetValue"
Q := "Tag_CounterStatus"
CV := "Tag_CounterValue"

Consulte tambi√©n
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Principios b√°sicos de la palabra de estado (P√°gina 184)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5505

Instrucciones
4.2 Instrucciones
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

CC: Llamada condicional
Descripci√≥n
La instrucci√≥n "Llamada condicional" llama en funci√≥n del resultado l√≥gico (RLO) funciones
(FC) y bloques de funci√≥n (FB) que no tienen par√°metros ni bloques de datos de instancia.
La instrucci√≥n solo se ejecuta si el resultado l√≥gico (RLO) actual antes de procesar la
instrucci√≥n es "1". Tras ejecutar la instrucci√≥n, el procesamiento del programa contin√∫a en el
bloque llamado. Una vez procesado el bloque llamado, la CPU vuelve al bloque que efect√∫a la
llamada y contin√∫a con el procesamiento de dicho bloque despu√©s de la instrucci√≥n de llamada.
Al cambiar el bloque, los bits de estado OS y /FC se ponen a "0". Los bits de estado CC 0, CC
1 y OV no se ven influidos.
En el bloque que efect√∫a la llamada, la dependencia de MCR se ajusta igual que estaba antes
de llamar el bloque. Los bloques de datos que estaban abiertos en el momento de llamar el
bloque vuelven a abrirse.
La instrucci√≥n "Llamada condicional" no modifica el contenido de los acumuladores ni los
registros de direcciones.
Si el RLO actual es "0", la instrucci√≥n y, por consiguiente, la llamada de bloque no se ejecutan
y el RLO se pone a "1".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

A "Tag_Input_1"

// Consultar si el operando "Tag_Input_1" es
"1" y combinar el resultado l√≥gicamente con Y
con el RLO actual.

CC "MyFunction"

// Si la condici√≥n se cumple (RLO = "1"), llamar la funci√≥n "MyFunction".
// Si la condici√≥n no se cumple (RLO = "0"),
procesar la instrucci√≥n siguiente.

A "Tag_Input_2"

// Consultar si el operando "Tag_Input_2" es
"1" y combinar el resultado l√≥gicamente con Y
con el RLO actual.

CC "MyFunctionBlock"

// Si la condici√≥n se cumple (RLO = "1"), llamar el bloque de funci√≥n "MyFunctionBlock".
// Si la condici√≥n no se cumple (RLO = "0"),
procesar la instrucci√≥n siguiente.

5506

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

UC: Llamada incondicional
Descripci√≥n
La instrucci√≥n "Llamada incondicional" llama funciones (FC) y bloques de funci√≥n (FB) que no
tienen par√°metros ni bloques de datos de instancia.
Esta instrucci√≥n se ejecuta independientemente de las condiciones. Tras ejecutar la
instrucci√≥n, el procesamiento del programa contin√∫a en el bloque llamado. Una vez procesado
el bloque llamado, la CPU vuelve al bloque que efect√∫a la llamada y contin√∫a con el
procesamiento de dicho bloque despu√©s de la instrucci√≥n de llamada.
Al cambiar el bloque, los bits de estado OS y /FC se ponen a "0". Los bits de estado CC 0, CC
1 y OV no se ven influidos.
En el bloque que efect√∫a la llamada, la dependencia de MCR se ajusta igual que estaba antes
de llamar el bloque. Los bloques de datos que estaban abiertos en el momento de llamar el
bloque vuelven a abrirse.
La instrucci√≥n "Llamada incondicional" no modifica el contenido de los acumuladores ni los
registros de direcciones.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

A "Tag_Input_1"

// Consultar si el operando "Tag_Input_1" es
"1" y combinar el resultado l√≥gicamente con Y
con el RLO actual.

UC "MyFunction"

// Llamar la funci√≥n "MyFunction".

A "Tag_Input_2"

// Consultar si el operando "Tag_Input_2" es
"1" y combinar el resultado l√≥gicamente con Y
con el RLO actual.

UC "MyFunctionBlock"

// Llamar el bloque de funci√≥n "MyFunctionBlock".

Consulte tambi√©n
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Principios b√°sicos de la palabra de estado (P√°gina 184)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5507

Instrucciones
4.2 Instrucciones
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

Operaciones l√≥gicas con palabras
AW: Operaci√≥n l√≥gica Y por palabras
Descripci√≥n
La instrucci√≥n "Operaci√≥n l√≥gica Y por palabras" combina l√≥gicamente con Y por bits el valor
de la palabra derecha del acumulador 1 con el valor de la palabra derecha del acumulador 2
o una constante concreta. El resultado se guarda en la palabra derecha del acumulador 1. El
contenido de la palabra izquierda del acumulador 1 no cambia.
La instrucci√≥n combina el bit 0 del acumulador 1 con el bit 0 del acumulador 2 o una constante
y guarda el resultado en el bit 0 del acumulador 1. Los bits 1 a 15 se combinan del mismo modo.
El estado l√≥gico del bit de resultado es "1" si el estado l√≥gico de los dos bits que deben
combinarse l√≥gicamente tambi√©n es "1". Si el estado l√≥gico de uno de los bits que deben
combinarse l√≥gicamente es "0", se desactivar√° el bit de resultado correspondiente.
La tabla siguiente muestra c√≥mo se forma el resultado en una operaci√≥n l√≥gica Y por palabras:
Acumulador 2 /
constante

0

0

1

1

Acumulador 1

0

1

0

1

Resultado

0

0

0

1

La instrucci√≥n se ejecuta independientemente de las condiciones y no influye en el resultado
l√≥gico.
La instrucci√≥n influye en los bits de estado CC 0, CC 1 y OV.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Operaci√≥n l√≥gica Y por palabras":
Par√°metro

Tipo de datos

Descripci√≥n

<Constante>

WORD

Valor que se combina l√≥gica‚Äê
mente con Y con el valor que se
encuentra en la palabra derecha
del acumulador 1.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:

5508

AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando en la palabra derecha
del acumulador 1.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

AW W#16#F6B5

// Combinar l√≥gicamente con Y el valor de la palabra
derecha del acumulador 1 con la constante (W#16#F6B5).
// El resultado se guarda en la palabra derecha del
acumulador 1.

T "Tag_Result_1"

// Transferir el resultado al operando "Tag_Result_1".

L "Tag_Value_2"

// Cargar el valor del operando en la palabra derecha
del acumulador 1.

L "Tag_Value_3"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_3" en la
palabra derecha del acumulador 1.

AW

// Combinar l√≥gicamente con Y el valor de la palabra
derecha del acumulador 2 ("Tag_Value_2") con el valor
de la palabra derecha del acumulador 1 ("Tag_Value_3").
// El resultado se guarda en la palabra derecha del
acumulador 1.

T "Tag_Result_2"

// Transferir el resultado al operando "Tag_Result_2".

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando
Tag_Value_1

Valor
0101

1001

0011

1011

Constante (W#16#F6B5) 1111

0110

1011

0101

Tag_Result_1

0000

0011

0001

0101

Tag_Value_2

0110

1100

0010

1010

Tag_Value_3

1101

1010

1001

0011

Tag_Result_2

0100

1000

0000

0010

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en operaciones l√≥gicas con palabras (P√°gina 194)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Ejemplos de programaci√≥n AWL (P√°gina 8102)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5509

Instrucciones
4.2 Instrucciones

OW: Operaci√≥n l√≥gica O por palabras
Descripci√≥n
La instrucci√≥n "Operaci√≥n l√≥gica O por palabras" combina l√≥gicamente con O por bits el valor
de la palabra derecha del acumulador 1 con el valor de la palabra derecha del acumulador 2
o una constante concreta. El resultado se guarda en la palabra derecha del acumulador 1. El
contenido de la palabra izquierda del acumulador 1 no cambia.
La instrucci√≥n combina el bit 0 del acumulador 1 con el bit 0 del acumulador 2 o una constante
y guarda el resultado en el bit 0 del acumulador 1. Los bits 1 a 15 se combinan del mismo modo.
El estado l√≥gico del bit de resultado es "1" si el estado l√≥gico de como m√≠nimo uno de los dos
bits que deben combinarse l√≥gicamente tambi√©n es "1". Si el estado l√≥gico de los dos bits que
deben combinarse l√≥gicamente es "0", el bit de resultado correspondiente se pondr√° a "0".
La tabla siguiente muestra c√≥mo se forma el resultado en una operaci√≥n l√≥gica O por palabras:
Acumulador 2 /
constante

0

0

1

1

Acumulador 1

0

1

0

1

Resultado

0

1

1

1

La instrucci√≥n se ejecuta independientemente de las condiciones y no influye en el resultado
l√≥gico.
La instrucci√≥n influye en los bits de estado CC 0, CC 1 y OV.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Operaci√≥n l√≥gica O por palabras":
Par√°metro

Tipo de datos

Descripci√≥n

<Constante>

WORD

Valor que se combina l√≥gica‚Äê
mente con O con el valor que se
encuentra en la palabra derecha
del acumulador 1.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando en la palabra derecha
del acumulador 1.

OW W#16#F6B5

// Combinar l√≥gicamente con O el valor de la palabra
derecha del acumulador 1 con la constante (W#16#F6B5).
// El resultado se guarda en la palabra derecha del
acumulador 1.

5510

T "Tag_Result_1"

// Transferir el resultado al operando "Tag_Result_1".

L "Tag_Value_2"

// Cargar el valor del operando en la palabra derecha
del acumulador 1.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

L "Tag_Value_3"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_3" en la
palabra derecha del acumulador 1.

OW

// Combinar l√≥gicamente con O el valor de la palabra
derecha del acumulador 2 ("Tag_Value_2") con el valor
de la palabra derecha del acumulador 1 ("Tag_Value_3").
// El resultado se guarda en la palabra derecha del
acumulador 1.

T "Tag_Result_2"

// Transferir el resultado al operando "Tag_Result_2".

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando
Tag_Value_1

Valor
0101

1001

0011

1011

Constante (W#16#F6B5) 1111

0110

1011

0101

Tag_Result_1

1111

1111

1011

1111

Tag_Value_2

0110

1100

0010

1010

Tag_Value_3

1101

1010

1001

0011

Tag_Result_2

1111

1110

1011

1011

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en operaciones l√≥gicas con palabras (P√°gina 194)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)
Ejemplos de programaci√≥n AWL (P√°gina 8102)

XOW: Operaci√≥n l√≥gica O-exclusiva por palabras
Descripci√≥n
La instrucci√≥n "Operaci√≥n l√≥gica O-exclusiva por palabras" combina l√≥gicamente con Oexclusiva por bits el valor de la palabra derecha del acumulador 1 con el valor de la palabra
derecha del acumulador 2 o una constante concreta. El resultado se guarda en la palabra
derecha del acumulador 1. El contenido de la palabra izquierda del acumulador 1 no cambia.
La instrucci√≥n combina el bit 0 del acumulador 1 con el bit 0 del acumulador 2 o una constante
y guarda el resultado en el bit 0 del acumulador 1. Los bits 1 a 15 se combinan del mismo modo.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5511

Instrucciones
4.2 Instrucciones
El estado l√≥gico del bit de resultado es "1" si el estado l√≥gico de los dos bits que deben
combinarse l√≥gicamente es diferente. Si el estado l√≥gico de los dos bits que deben combinarse
l√≥gicamente es el mismo, el bit de resultado correspondiente se pondr√° a "0".
La tabla siguiente muestra c√≥mo se forma el resultado en una operaci√≥n l√≥gica O-exclusiva por
palabras:
Acumulador 2 /
constante

0

0

1

1

Acumulador 1

0

1

0

1

Resultado

0

1

1

0

La instrucci√≥n se ejecuta independientemente de las condiciones y no influye en el resultado
l√≥gico.
La instrucci√≥n influye en los bits de estado CC 0, CC 1 y OV.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Operaci√≥n l√≥gica O-exclusiva por
palabras":
Par√°metro

Tipo de datos

Descripci√≥n

<Constante>

WORD

Valor que se combina l√≥gica‚Äê
mente con O-exclusiva con el va‚Äê
lor que se encuentra en la pala‚Äê
bra derecha del acumulador 1.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando en la palabra derecha
del acumulador 1.

XOW W#16#F6B5

// Combinar l√≥gicamente con O-exclusiva el valor de la
palabra derecha del acumulador 1 con la constante
(W#16#F6B5).
// El resultado se guarda en la palabra derecha del
acumulador 1.

T "Tag_Result_1"

// Transferir el resultado al operando "Tag_Result_1".

L "Tag_Value_2"

// Cargar el valor del operando en la palabra derecha
del acumulador 1.

L "Tag_Value_3"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_3" en la
palabra derecha del acumulador 1.

5512

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

XOW

// Combinar l√≥gicamente con O-exclusiva el valor de la
palabra derecha del acumulador 2 ("Tag_Value_2") con
el valor de la palabra derecha del acumulador 1
("Tag_Value_3").
// El resultado se guarda en la palabra derecha del
acumulador 1.

T "Tag_Result_2"

// Transferir el resultado al operando "Tag_Result_2".

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando
Tag_Value_1

Valor
0101

1001

0011

1011

Constante (W#16#F6B5) 1111

0110

1011

0101

Tag_Result_1

1010

1111

1000

1110

Tag_Value_2

0110

1100

0010

1010

Tag_Value_3

1101

1010

1001

0011

Tag_Result_2

1011

0110

1011

1001

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en operaciones l√≥gicas con palabras (P√°gina 194)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

AD: Operaci√≥n l√≥gica Y por palabras dobles
Descripci√≥n
La instrucci√≥n "Operaci√≥n l√≥gica Y por palabras dobles" combina l√≥gicamente con Y por bits el
contenido del acumulador 1 con el contenido del acumulador 2 o el valor de una constante
concreta. El resultado se guarda en el acumulador 1.
La instrucci√≥n combina el bit 0 del acumulador 1 con el bit 0 del acumulador 2 o una constante
y guarda el resultado en el bit 0 del acumulador 1. Los bits 1 a 31 se combinan del mismo modo.
El estado l√≥gico del bit de resultado es "1" si el estado l√≥gico de los dos bits que deben
combinarse l√≥gicamente tambi√©n es "1". Si el estado l√≥gico de uno de los bits que deben
combinarse l√≥gicamente es "0", se desactivar√° el bit de resultado correspondiente.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5513

Instrucciones
4.2 Instrucciones
La tabla siguiente muestra c√≥mo se forma el resultado en una operaci√≥n l√≥gica Y por palabras:
Acumulador 2 /
constante

0

0

1

1

Acumulador 1

0

1

0

1

Resultado

0

0

0

1

La instrucci√≥n se ejecuta independientemente de las condiciones y no influye en el resultado
l√≥gico.
La instrucci√≥n influye en los bits de estado CC 0, CC 1 y OV.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Operaci√≥n l√≥gica Y por palabras
dobles":
Par√°metro

Tipo de datos

Descripci√≥n

<Constante>

DWORD

Valor que se combina l√≥gica‚Äê
mente con Y con el valor que es‚Äê
t√° en el acumulador 1.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando en el acumulador 1.

AD DW#16#39C657AC

// Combinar l√≥gicamente con Y el valor del acumulador
1 con la constante (DW#16#39C657AC).
// Guardar el resultado en el acumulador 1.

T "Tag_Result_1"

// Transferir el resultado al operando "Tag_Result_1".

L "Tag_Value_2"

// Cargar el valor del operando en el acumulador 1.

L "Tag_Value_3"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_3" en el
acumulador 1.

AD

// Combinar l√≥gicamente con Y el valor del acumulador
2 ("Tag_Value_2") con el valor del acumulador 1
("Tag_Value_3").
// Guardar el resultado en el acumulador 1.

T "Tag_Result_2"

5514

// Transferir el resultado al operando "Tag_Result_2".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Value_1

0101

1111

0110

0100

1001

1101

0011

1011

Constante
(DW#16#39C65
7AC)

0011

1001

1100

0110

0101

0111

1010

1100

Tag_Result_1

0001

1001

0100

0100

0001

0101

0010

1000

Tag_Value_2

0110

0101

0100

0011

0101

1101

0010

1011

Tag_Value_3

0011

1001

1100

0110

0101

0111

1010

1100

Tag_Result_2

0010

0001

0100

0010

0101

0101

0010

1010

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en operaciones l√≥gicas con palabras (P√°gina 194)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

OD: Operaci√≥n l√≥gica O por palabras dobles
Descripci√≥n
La instrucci√≥n "Operaci√≥n l√≥gica O por palabras dobles" combina l√≥gicamente con O por bits
el contenido del acumulador 1 con el contenido del acumulador 2 o el valor de una constante
concreta. El resultado se guarda en el acumulador 1.
La instrucci√≥n combina el bit 0 del acumulador 1 con el bit 0 del acumulador 2 o una constante
y guarda el resultado en el bit 0 del acumulador 1. Los bits 1 a 31 se combinan del mismo modo.
El estado l√≥gico del bit de resultado es "1" si el estado l√≥gico de como m√≠nimo uno de los dos
bits que deben combinarse l√≥gicamente tambi√©n es "1". Si el estado l√≥gico de los dos bits que
deben combinarse l√≥gicamente es "0", el bit de resultado correspondiente se pondr√° a "0".
La tabla siguiente muestra c√≥mo se forma el resultado en una operaci√≥n l√≥gica O por palabras:
Acumulador 2 /
constante

0

0

1

1

Acumulador 1

0

1

0

1

Resultado

0

1

1

1

La instrucci√≥n se ejecuta independientemente de las condiciones y no influye en el resultado
l√≥gico.
La instrucci√≥n influye en los bits de estado CC 0, CC 1 y OV.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5515

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Operaci√≥n l√≥gica O por palabras
dobles":
Par√°metro

Tipo de datos

Descripci√≥n

<Constante>

DWORD

Valor que se combina l√≥gica‚Äê
mente con O con el valor que es‚Äê
t√° en el acumulador 1.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando en el acumulador 1.

OD DW#16#39C657AC

// Combinar l√≥gicamente con O el valor del acumulador
1 con la constante (DW#16#39C657AC).
// Guardar el resultado en el acumulador 1.

T "Tag_Result_1"

// Transferir el resultado al operando "Tag_Result_1".

L "Tag_Value_2"

// Cargar el valor del operando en el acumulador 1.

L "Tag_Value_3"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_3" en el
acumulador 1.

OD

// Combinar l√≥gicamente con O el valor del acumulador
2 ("Tag_Value_2") con el valor del acumulador 1
("Tag_Value_3").
// Guardar el resultado en el acumulador 1

T "Tag_Result_2"

// Transferir el resultado al operando "Tag_Result_2".

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

5516

Valor

Tag_Value_1 0101

1111

0110

0100

1001

1101

0011

1011

Constante
(DW#16#39
C657AC)

0011

1001

1100

0110

0101

0111

1010

1100

Tag_Re‚Äê
sult_1

0111

1111

1110

0110

1101

1111

1011

1111

Tag_Value_2 0110

0101

0100

0011

0101

1101

0010

1011

Tag_Value_3 0011

1001

1100

0110

0101

0111

1010

1100

Tag_Re‚Äê
sult_2

1101

1100

0111

0101

1111

1110

1111

0111

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en operaciones l√≥gicas con palabras (P√°gina 194)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

XOD: Operaci√≥n l√≥gica O-exclusiva por palabras dobles
Descripci√≥n
La instrucci√≥n "Operaci√≥n l√≥gica O-exclusiva por palabras dobles" combina l√≥gicamente con
O-exclusiva por bits el contenido del acumulador 1 con el contenido del acumulador 2 o el valor
de una constante concreta. El resultado se guarda en el acumulador 1.
La instrucci√≥n combina el bit 0 del acumulador 1 con el bit 0 del acumulador 2 o una constante
y guarda el resultado en el bit 0 del acumulador 1. Los bits 1 a 31 se combinan del mismo modo.
El estado l√≥gico del bit de resultado es "1" si el estado l√≥gico de los dos bits que deben
combinarse l√≥gicamente es diferente. Si el estado l√≥gico de los dos bits que deben combinarse
l√≥gicamente es el mismo, el bit de resultado correspondiente se pondr√° a "0".
La tabla siguiente muestra c√≥mo se forma el resultado en una operaci√≥n l√≥gica O-exclusiva por
palabras:
Acumulador 2 /
constante

0

0

1

1

Acumulador 1

0

1

0

1

Resultado

0

1

1

0

La instrucci√≥n se ejecuta independientemente de las condiciones y no influye en el resultado
l√≥gico.
La instrucci√≥n influye en los bits de estado CC 0, CC 1 y OV.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Operaci√≥n l√≥gica O-exclusiva por
palabras dobles":
Par√°metro

Tipo de datos

Descripci√≥n

<Constante>

DWORD

Valor que se combina l√≥gica‚Äê
mente con O-exclusiva con el va‚Äê
lor que est√° en el acumulador 1.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5517

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando en el acumulador 1.

XOD DW#16#39C657AC

// Combinar l√≥gicamente con O-exclusiva el valor del
acumulador 1 con la constante (DW#16#39C657AC).
// Guardar el resultado en el acumulador 1.

T "Tag_Result_1"

// Transferir el resultado al operando "Tag_Result_1".

L "Tag_Value_2"

// Cargar el valor del operando en el acumulador 1.

L "Tag_Value_3"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_3" en el
acumulador 1.

XOD

// Combinar l√≥gicamente con O-exclusiva el valor del
acumulador 2 ("Tag_Value_2") con el valor del acumulador 1 ("Tag_Value_3").
// Guardar el resultado en el acumulador 1.

T "Tag_Result_2"

// Transferir el resultado al operando "Tag_Result_2".

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Value_1 0101

1111

0110

0100

1001

1101

0011

1011

Constante
(DW#16#39
C657AC)

0011

1001

1100

0110

0101

0111

1010

1100

Tag_Re‚Äê
sult_1

0110

0110

1010

0010

1100

1010

1001

0111

Tag_Value_2 0110

0101

0100

0011

0101

1101

0010

1011

Tag_Value_3 0011

1001

1100

0110

0101

0111

1010

1100

Tag_Re‚Äê
sult_2

1100

1000

0101

0000

1010

1000

0111

0101

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Activar el bit de estado en operaciones l√≥gicas con palabras (P√°gina 194)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

5518

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Desplazamiento y rotaci√≥n
Desplazar
SSI: Desplazar con signo por palabras
Descripci√≥n
La instrucci√≥n "Desplazar con signo por palabras" desplaza bit por bit la palabra derecha (bits
de 0 a 15) del acumulador 1 hacia la derecha. Las posiciones que quedan libres al desplazar
se rellenan con el estado l√≥gico del bit 15 (bit de signo en n√∫meros INT). Los bits 16 a 31 del
acumulador 1 no cambian. Esta instrucci√≥n se ejecuta independientemente del RLO. El bit de
estado CC1 se ajusta al estado l√≥gico del √∫ltimo bit desplazado.
Para indicar el n√∫mero de posiciones de bit que se desplazar√°n existen las posibilidades
siguientes:
‚óè Indicaci√≥n de un entero positivo como par√°metro de la instrucci√≥n. (<N√∫mero>)
‚óè Indicaci√≥n mediante el valor del byte derecho del acumulador 2. El byte se interpreta en
forma de entero positivo.
Se pueden utilizar los siguientes formatos:
‚óè SSI <N√∫mero>: El operando <N√∫mero> indica el n√∫mero de desplazamiento. Se admiten
valores entre 0 y 15. Los bits de estado CC0 y OV se ponen a "0" si <N√∫mero> es mayor que
cero.
‚óè SSI: El valor del acumulador 2 indica el n√∫mero de desplazamiento. Se admiten valores
entre 0 y 255. Los bits de estado CC0 y OV se ponen a "0" si el contenido del acumulador
2 es mayor que cero.
Si el n√∫mero de desplazamiento indicado es mayor que 15, todos los bits de la palabra
derecha del acumulador 1 se rellenar√°n con el estado l√≥gico del bit 15.
La instrucci√≥n se ejecuta aunque el n√∫mero de desplazamiento indicado sea cero. El bit de
estado CC 1 se pone a "0".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Formato

Descripci√≥n

<N√∫mero>

Enteros positivos:

N√∫mero de posiciones de bit que
se desplazar√°n.

SINT, INT, UINT, USINT

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando en el acumulador 1.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5519

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

SSI 6

// Desplazar los bits 0 a 15 del acumulador 1 seis posiciones a la derecha.
// Rellenar las posiciones liberadas con el estado del
bit 15.

T "Tag_Result_1"

// Transferir el contenido del acumulador 1 al operando.

L 3

// Cargar el n√∫mero de desplazamiento en el acumulador
1.

L "Tag_Value_2"

// Desplazar el n√∫mero de desplazamiento al byte derecho del acumulador 2.
// Cargar el valor del operando en el acumulador 1.

SSI

// Desplazar los bits 0 a 15 del acumulador 1 tres posiciones a la derecha.
// Rellenar las posiciones liberadas con el estado del
bit 15.

T "Tag_Result_2"

// Transferir el contenido del acumulador 1 al operando.

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Value_1 0101

1111

0110

0100

1001

1101

0011

1011

Tag_Re‚Äê
sult_1

0101

1111

0110

0100

1111

1110

0111

0100

Tag_Value_2 0101

1111

0110

0100

0101

1101

0010

1011

Tag_Re‚Äê
sult_2

1111

0110

0100

0000

1011

1010

0101

0101

Consulte tambi√©n
Activar el bit de estado en instrucciones de desplazamiento y rotaci√≥n (P√°gina 194)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Vista general de los tipos de datos v√°lidos (P√°gina 241)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

SSD: Desplazar con signo por palabras dobles
Descripci√≥n
La instrucci√≥n "Desplazar con signo por palabras dobles" desplaza bit por bit todo el contenido
del acumulador 1 hacia la derecha. Las posiciones que quedan libres al desplazar se rellenan
con el estado l√≥gico del bit 31 (bit de signo en n√∫meros DINT). Esta instrucci√≥n se ejecuta
independientemente del RLO. El bit de estado CC1 se ajusta al estado l√≥gico del √∫ltimo bit
desplazado.

5520

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Para indicar el n√∫mero de posiciones de bit que se desplazar√°n existen las posibilidades
siguientes:
‚óè Indicaci√≥n de un entero positivo como par√°metro de la instrucci√≥n. (<N√∫mero>)
‚óè Indicaci√≥n mediante el valor del byte derecho del acumulador 2. El byte se interpreta en
forma de entero positivo.
Se pueden utilizar los siguientes formatos:
‚óè SSD <N√∫mero>: El operando <N√∫mero> indica el n√∫mero de desplazamiento. Se admiten
valores entre 0 y 31. Los bits de estado CC0 y OV se ponen a "0" si <N√∫mero> es mayor que
cero.
‚óè SSD: El valor del acumulador 2 indica el n√∫mero de desplazamiento. Se admiten valores
entre 0 y 255. Los bits de estado CC0 y OV se ponen a "0" si el contenido del acumulador
2 es mayor que cero.
Con valores mayores que 31, todos los bits del acumulador 1 se rellenan con el estado
l√≥gico del bit 31.
La instrucci√≥n se ejecuta aunque el n√∫mero de desplazamiento indicado sea cero. El bit de
estado CC 1 se pone a "0".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Formato

Descripci√≥n

<N√∫mero>

Enteros positivos:

N√∫mero de posiciones de bit que
se desplazar√°n.

SINT, INT, UINT, USINT

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando en el acumulador 1.

SSD 7

// Desplazar los bits 0 a 31 del acumulador 1 siete
posiciones a la derecha.
// Rellenar las posiciones liberadas con el estado del
bit 31.

T "Tag_Result_1"

// Transferir el contenido del acumulador 1 al operando.

L 4

// Cargar el n√∫mero de desplazamiento en el acumulador
1.

L "Tag_Value_2"

// Desplazar el n√∫mero de desplazamiento al byte derecho del acumulador 2.
// Cargar el valor del operando en el acumulador 1.

SSD

// Desplazar los bits 0 a 31 del acumulador 1 cuatro
posiciones a la derecha.
// Rellenar las posiciones liberadas con el estado del
bit 31.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5521

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

T "Tag_Result_2"

// Transferir el contenido del acumulador 1 al operando.

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Value_1 1000

1111

0110

0100

0101

1101

0011

1011

Tag_Re‚Äê
sult_1

1111

1111

0001

1110

1100

1000

1011

1010

Tag_Value_2 0010

1000

1010

0010

1001

1011

1100

1101

Tag_Re‚Äê
sult_2

0010

1000

1010

0010

1001

1011

1100

0000

Consulte tambi√©n
Activar el bit de estado en instrucciones de desplazamiento y rotaci√≥n (P√°gina 194)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Vista general de los tipos de datos v√°lidos (P√°gina 241)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

SLW: Desplazar a la izquierda por palabras
Descripci√≥n
La instrucci√≥n "Desplazar a la izquierda por palabras" desplaza bit por bit la palabra derecha
(bits 0 a 15) del acumulador 1 hacia la izquierda. Las posiciones que quedan libres al desplazar
se rellenan con ceros. Los bits 16 a 31 del acumulador 1 no cambian. Esta instrucci√≥n se
ejecuta independientemente del RLO. El bit de estado CC1 se ajusta al estado l√≥gico del √∫ltimo
bit desplazado.
Para indicar el n√∫mero de posiciones de bit que se desplazar√°n existen las posibilidades
siguientes:
‚óè Indicaci√≥n de un entero positivo como par√°metro de la instrucci√≥n. (<N√∫mero>)
‚óè Indicaci√≥n mediante el valor del byte derecho del acumulador 2. El byte se interpreta en
forma de entero positivo.
Se pueden utilizar los siguientes formatos:
‚óè SLW <N√∫mero>: El operando <N√∫mero> indica el n√∫mero de desplazamiento. Se admiten
valores entre 0 y 15. Los bits de estado CC0 y OV se ponen a "0" si <N√∫mero> es mayor que
cero.
‚óè SLW: El valor del acumulador 2 indica el n√∫mero de desplazamiento. Se admiten valores
entre 0 y 255. Los bits de estado CC0 y OV se ponen a "0" si el contenido del acumulador
2 es mayor que cero.

5522

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Si el n√∫mero de desplazamiento indicado es mayor que 15, todos los bits de la palabra derecha
del acumulador 1 se rellenar√°n con ceros.
La instrucci√≥n se ejecuta aunque el n√∫mero de desplazamiento indicado sea cero. El bit de
estado CC 1 se pone a "0".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Desplazar a la izquierda por
palabras":
Par√°metro

Formato

Descripci√≥n

<N√∫mero>

Enteros positivos:

N√∫mero de posiciones de bit que
se desplazar√°n.

SINT, INT, UINT, USINT

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando en el acumulador 1.

SLW 5

// Desplazar los bits 0 a 15 del acumulador 1 cinco
posiciones a la izquierda.
// Rellenar las posiciones liberadas con ceros.

T "Tag_Result_1"

// Transferir el contenido del acumulador 1 al operando.

L 4

// Cargar el n√∫mero de desplazamiento en el acumulador
1.

L "Tag_Value_2"

// Desplazar el n√∫mero de desplazamiento al byte derecho del acumulador 2.
// Cargar el valor del operando en el acumulador 1.

SLW

// Desplazar los bits 0 a 15 del acumulador 1 cuatro
posiciones a la izquierda.
// Rellenar las posiciones liberadas con ceros.

T "Tag_Result_2"

// Transferir el contenido del acumulador 1 al operando.

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Value_1 0101

1111

0110

0100

0101

1101

0011

1011

Tag_Re‚Äê
sult_1

0101

1111

0110

0100

1010

0111

0110

0000

Tag_Value_2 0101

1111

0110

0100

0101

1101

0010

1011

Tag_Re‚Äê
sult_2

1111

0110

0100

1101

0010

1011

0000

0101

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5523

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Activar el bit de estado en instrucciones de desplazamiento y rotaci√≥n (P√°gina 194)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Vista general de los tipos de datos v√°lidos (P√°gina 241)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

SRW: Desplazar a la derecha por palabras
Descripci√≥n
La instrucci√≥n "Desplazar a la derecha por palabras" desplaza bit por bit la palabra derecha
(bits 0 a 15) del acumulador 1 hacia la derecha. Las posiciones que quedan libres al desplazar
se rellenan con ceros. Los bits 16 a 31 del acumulador 1 no cambian. Esta instrucci√≥n se
ejecuta independientemente del RLO. El bit de estado CC1 se ajusta al estado l√≥gico del √∫ltimo
bit desplazado.
Para indicar el n√∫mero de posiciones de bit que se desplazar√°n existen las posibilidades
siguientes:
‚óè Indicaci√≥n de un entero positivo como par√°metro de la instrucci√≥n. (<N√∫mero>)
‚óè Indicaci√≥n mediante el valor del byte derecho del acumulador 2. El byte se interpreta en
forma de entero positivo.
Se pueden utilizar los siguientes formatos:
‚óè SRW <N√∫mero>: El operando <N√∫mero> indica el n√∫mero de desplazamiento. Se admiten
valores entre 0 y 15. Los bits de estado CC0 y OV se ponen a "0" si <N√∫mero> es mayor que
cero.
‚óè SRW: El valor del acumulador 2 indica el n√∫mero de desplazamiento. Se admiten valores
entre 0 y 255. Los bits de estado CC0 y OV se ponen a "0" si el contenido del acumulador
2 es mayor que cero.
Si el n√∫mero de desplazamiento indicado es mayor que 15, todos los bits de la palabra
derecha del acumulador 1 se rellenar√°n con ceros.
La instrucci√≥n se ejecuta aunque el n√∫mero de desplazamiento indicado sea cero. El bit de
estado CC 1 se pone a "0".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Desplazar a la derecha por
palabras":
Par√°metro

Formato

Descripci√≥n

<N√∫mero>

Enteros positivos:

N√∫mero de posiciones de bit que
se desplazar√°n.

SINT, INT, UINT, USINT

5524

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando en el acumulador 1.

SRW 6

// Desplazar los bits 0 a 15 del acumulador 1 seis posiciones a la derecha.
// Rellenar las posiciones liberadas con ceros.

T "Tag_Result_1"

// Transferir el contenido del acumulador 1 al operando.

L 4

// Cargar el n√∫mero de desplazamiento en el acumulador
1.

L "Tag_Value_2"

// Desplazar el n√∫mero de desplazamiento al byte derecho del acumulador 2.
// Cargar el valor del operando en el acumulador 1.

SRW

// Desplazar los bits 0 a 15 del acumulador 1 cuatro
posiciones a la derecha.
// Rellenar las posiciones liberadas con ceros.

T "Tag_Result_2"

// Transferir el contenido del acumulador 1 al operando.

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Value_1 0101

1111

0110

0100

0101

1101

0011

1011

Tag_Re‚Äê
sult_1

0101

1111

0110

0100

0000

0001

0111

0100

Tag_Value_2 0101

1111

0110

0100

0101

1101

0010

1011

Tag_Re‚Äê
sult_2

1111

0110

0100

0000

0101

1101

0010

0101

Consulte tambi√©n
Activar el bit de estado en instrucciones de desplazamiento y rotaci√≥n (P√°gina 194)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Vista general de los tipos de datos v√°lidos (P√°gina 241)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5525

Instrucciones
4.2 Instrucciones

SLD: Desplazar a la izquierda por palabras dobles
Descripci√≥n
La instrucci√≥n "Desplazar a la izquierda por palabras dobles" desplaza bit por bit todo el
contenido del acumulador 1 hacia la izquierda. Las posiciones que quedan libres al desplazar
se rellenan con ceros. Esta instrucci√≥n se ejecuta independientemente del RLO. El bit de
estado CC1 se ajusta al estado l√≥gico del √∫ltimo bit desplazado.
Para indicar el n√∫mero de posiciones de bit que se desplazar√°n existen las posibilidades
siguientes:
‚óè Indicaci√≥n de un entero positivo como par√°metro de la instrucci√≥n. (<N√∫mero>)
‚óè Indicaci√≥n mediante el valor del byte derecho del acumulador 2. El byte se interpreta en
forma de entero positivo.
Se pueden utilizar los siguientes formatos:
‚óè SLD <N√∫mero>: El operando <N√∫mero> indica el n√∫mero de desplazamiento. Se admiten
valores entre 0 y 31. Los bits de estado CC0 y OV se ponen a "0" si <N√∫mero> es mayor que
cero.
‚óè SLD: El valor del acumulador 2 indica el n√∫mero de desplazamiento. Se admiten valores
entre 0 y 255. Los bits de estado CC0 y OV se ponen a "0" si el contenido del acumulador
2 es mayor que cero.
Con valores mayores que 31, todos los bits del acumulador 1 se rellenan con ceros.
La instrucci√≥n se ejecuta aunque el n√∫mero de desplazamiento indicado sea cero. El bit de
estado CC 1 se pone a "0".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Desplazar a la izquierda por
palabras dobles":
Par√°metro

Formato

Descripci√≥n

<N√∫mero>

Enteros positivos:

N√∫mero de posiciones de bit que
se desplazar√°n.

SINT, INT, UINT, USINT

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando en el acumulador 1.

SLD 5

// Desplazar los bits 0 a 31 del acumulador 1 cinco
posiciones a la izquierda.
// Rellenar las posiciones liberadas con ceros.

5526

T "Tag_Result_1"

// Transferir el contenido del acumulador 1 al operando.

L 4

// Cargar el n√∫mero de desplazamiento en el acumulador
1.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

L "Tag_Value_2"

// Desplazar el n√∫mero de desplazamiento al byte derecho del acumulador 2.
// Cargar el valor del operando en el acumulador 1.

SLD

// Desplazar los bits 0 a 31 del acumulador 1 cuatro
posiciones a la izquierda.
// Rellenar las posiciones liberadas con ceros.

T "Tag_Result_2"

// Transferir el contenido del acumulador 1 al operando.

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Value_1 0101

1111

0110

0100

0101

1101

0011

1011

Tag_Re‚Äê
sult_1

1110

1100

1000

1011

1010

0111

0110

0000

Tag_Value_2 1010

1000

1010

0010

1001

1011

1100

1101

Tag_Re‚Äê
sult_2

1010

0010

1001

1011

1100

1101

0000

1000

Consulte tambi√©n
Activar el bit de estado en instrucciones de desplazamiento y rotaci√≥n (P√°gina 194)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Vista general de los tipos de datos v√°lidos (P√°gina 241)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

SRD: Desplazar a la derecha por palabras dobles
Descripci√≥n
La instrucci√≥n "Desplazar a la derecha por palabras dobles" desplaza bit por bit todo el
contenido del acumulador 1 hacia la derecha. Las posiciones que quedan libres al desplazar
se rellenan con ceros. Esta instrucci√≥n se ejecuta independientemente del RLO. El bit de
estado CC1 se ajusta al estado l√≥gico del √∫ltimo bit desplazado.
Para indicar el n√∫mero de posiciones de bit que se desplazar√°n existen las posibilidades
siguientes:
‚óè Indicaci√≥n de un entero positivo como par√°metro de la instrucci√≥n. (<N√∫mero>)
‚óè Indicaci√≥n mediante el valor del byte derecho del acumulador 2. El byte se interpreta en
forma de entero positivo.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5527

Instrucciones
4.2 Instrucciones
Se pueden utilizar los siguientes formatos:
‚óè SRD <N√∫mero>: El operando <N√∫mero> indica el n√∫mero de desplazamiento. Se admiten
valores entre 0 y 31. Los bits de estado CC0 y OV se ponen a "0" si <N√∫mero> es mayor que
cero.
‚óè SRD: El valor del acumulador 2 indica el n√∫mero de desplazamiento. Se admiten valores
entre 0 y 255. Los bits de estado CC0 y OV se ponen a "0" si el contenido del acumulador
2 es mayor que cero.
Con valores mayores que 31, todos los bits del acumulador 1 se rellenan con ceros.
La instrucci√≥n se ejecuta aunque el n√∫mero de desplazamiento indicado sea cero. El bit de
estado CC 1 se pone a "0".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Desplazar a la derecha por
palabras dobles":
Par√°metro

Formato

Descripci√≥n

<N√∫mero>

Enteros positivos:

N√∫mero de posiciones de bit que
se desplazar√°n.

SINT, INT, UINT, USINT

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando en el acumulador 1.

SRD 7

// Desplazar los bits 0 a 31 del acumulador 1 siete
posiciones a la derecha.
// Rellenar las posiciones liberadas con ceros.

T "Tag_Result_1"

// Transferir el contenido del acumulador 1 al operando.

L 4

// Cargar el n√∫mero de desplazamiento en el acumulador
1.

L "Tag_Value_2"

// Desplazar el n√∫mero de desplazamiento al byte derecho del acumulador 2.
// Cargar el valor del operando en el acumulador 1.

SRD

// Desplazar los bits 0 a 31 del acumulador 1 cuatro
posiciones a la derecha.
// Rellenar las posiciones liberadas con ceros.

T "Tag_Result_2"

5528

// Transferir el contenido del acumulador 1 al operando.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Value_1 0101

1111

0110

0100

0101

1101

0011

1011

Tag_Re‚Äê
sult_1

0000

0000

1011

1110

1100

1000

1011

1010

Tag_Value_2 1010

1000

1010

0010

1001

1011

1100

1101

Tag_Re‚Äê
sult_2

1010

1000

1010

0010

1001

1011

1100

0000

Consulte tambi√©n
Activar el bit de estado en instrucciones de desplazamiento y rotaci√≥n (P√°gina 194)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Vista general de los tipos de datos v√°lidos (P√°gina 241)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

Rotaci√≥n
RLD: Rotar a la izquierda por palabras dobles
Descripci√≥n
La instrucci√≥n "Rotar a la izquierda por palabras dobles" rota bit por bit todo el contenido del
acumulador 1 hacia la izquierda. Durante la ejecuci√≥n, la instrucci√≥n desplaza por bits los bits
de 0 a 31 del acumulador 1 hacia la izquierda y rellena las posiciones que han quedado libres
al desplazar con las posiciones de bit desplazadas. Esta instrucci√≥n se ejecuta
independientemente del RLO. El bit de estado CC1 se ajusta al estado l√≥gico del √∫ltimo bit
desplazado.
Para indicar el n√∫mero de posiciones de bit que se rotar√°n existen las posibilidades siguientes:
‚óè Indicaci√≥n de un entero positivo como par√°metro de la instrucci√≥n. (<N√∫mero>)
‚óè Indicaci√≥n mediante el valor del byte derecho del acumulador 2. El byte se interpreta en
forma de entero positivo.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5529

Instrucciones
4.2 Instrucciones
Se pueden utilizar los siguientes formatos:
‚óè RLD <N√∫mero>: El operando <N√∫mero> indica el n√∫mero de rotaci√≥n. Se admiten valores
entre 0 y 32. Los bits de estado CC0 y OV se ponen a "0" si <N√∫mero> es mayor que cero.
‚óè RLD: El valor del acumulador 2 indica el n√∫mero de rotaci√≥n. Se admiten valores entre 0 y
255. Los bits de estado CC0 y OV se ponen a "0" si el contenido del acumulador 2 es mayor
que cero.
Si el valor es mayor que 32, el n√∫mero de rotaci√≥n se calcula con una divisi√≥n m√≥dulo entre
32. Si, p. ej., el n√∫mero de rotaci√≥n es 34, los bits del acumulador 1 se rotar√°n 2 posiciones
de bit.
Si el n√∫mero de rotaci√≥n indicado es 32, el contenido del acumulador 1 no cambia.
Aunque el n√∫mero de rotaci√≥n indicado sea cero, la instrucci√≥n se ejecuta. El bit de estado CC
1 se pone a "0".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Formato

Descripci√≥n

<N√∫mero>

Enteros positivos:

N√∫mero de posiciones de bit que
se rotar√°n.

SINT, INT, UINT, USINT

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando en el acumulador 1.

RLD 4

// Rotar los bits 0 a 31 del acumulador 1 cuatro posiciones a la izquierda.

T "Tag_Result_1"

// Transferir el contenido del acumulador 1 al operando.

L 6

// Cargar el n√∫mero de rotaci√≥n en el acumulador 1.

L "Tag_Value_2"

// Desplazar el n√∫mero de rotaci√≥n al byte derecho del
acumulador 2.
// Cargar el valor del operando en el acumulador 1.

RLD

// Rotar los bits 0 a 31 del acumulador 1 seis posiciones a la izquierda.

T "Tag_Result_2"

// Transferir el contenido del acumulador 1 al operando.

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

5530

Valor

Tag_Value_1 0101

1111

0110

0100

0101

1101

0011

1011

Tag_Re‚Äê
sult_1

0110

0100

0101

1101

0011

1011

0101

1111

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Operando

Valor

Tag_Value_2 1010

1000

1010

0010

1001

1011

1100

1101

Tag_Re‚Äê
sult_2

1000

1010

0110

1111

0011

0110

1010

0010

Consulte tambi√©n
Activar el bit de estado en instrucciones de desplazamiento y rotaci√≥n (P√°gina 194)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Vista general de los tipos de datos v√°lidos (P√°gina 241)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

RRD: Rotar a la derecha por palabras dobles
Descripci√≥n
La instrucci√≥n "Rotar a la derecha por palabras dobles" rota bit por bit todo el contenido del
acumulador 1 hacia la derecha. Durante la ejecuci√≥n, la instrucci√≥n desplaza por bits los bits
0 a 31 del acumulador 1 hacia la derecha y rellena las posiciones que han quedado libres al
desplazar con las posiciones de bit desplazadas. Esta instrucci√≥n se ejecuta
independientemente del RLO. El bit de estado CC1 se ajusta al estado l√≥gico del √∫ltimo bit
desplazado.
Para indicar el n√∫mero de posiciones de bit que se rotar√°n existen las posibilidades siguientes:
‚óè Indicaci√≥n de un entero positivo como par√°metro de la instrucci√≥n. (<N√∫mero>)
‚óè Indicaci√≥n mediante el valor del byte derecho del acumulador 2. El byte se interpreta en
forma de entero positivo.
Se pueden utilizar los siguientes formatos:
‚óè RRD <N√∫mero>: El operando <N√∫mero> indica el n√∫mero de rotaci√≥n. Se admiten valores
entre 0 y 32. Los bits de estado CC0 y OV se ponen a "0" si <N√∫mero> es mayor que cero.
‚óè RRD: El valor del acumulador 2 indica el n√∫mero de rotaci√≥n. Se admiten valores entre 0 y
255. Los bits de estado CC0 y OV se ponen a "0" si el contenido del acumulador 2 es mayor
que cero.
Si el valor es mayor que 32, el n√∫mero de rotaci√≥n se calcula con una divisi√≥n m√≥dulo entre
32. Si, p. ej., el n√∫mero de rotaci√≥n es 34, los bits del acumulador 1 se rotar√°n 2 posiciones
de bit.
Si el n√∫mero de rotaci√≥n indicado es 32, el contenido del acumulador 1 no cambia.
Aunque el n√∫mero de rotaci√≥n indicado sea cero, la instrucci√≥n se ejecuta. El bit de estado CC
1 se pone a "0".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5531

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Formato

Descripci√≥n

<N√∫mero>

Enteros positivos:

N√∫mero de posiciones de bit que
se rotar√°n.

SINT, INT, UINT, USINT

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando en el acumulador 1.

RRD 4

// Rotar los bits 0 a 31 del acumulador 1 cuatro posiciones a la derecha.

T "Tag_Result_1"

// Transferir el contenido del acumulador 1 al operando.

L 6

// Cargar el n√∫mero de rotaci√≥n en el acumulador 1.

L "Tag_Value_2"

// Desplazar el n√∫mero de rotaci√≥n al byte derecho del
acumulador 2.
// Cargar el valor del operando en el acumulador 1.

RRD

// Rotar los bits 0 a 31 del acumulador 1 seis posiciones a la derecha.

T "Tag_Result_2"

// Transferir el contenido del acumulador 1 al operando.

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Value_1 0101

1111

0110

0100

0101

1101

0011

1011

Tag_Re‚Äê
sult_1

1011

0101

1111

0110

0100

0101

1101

0011

Tag_Value_2 1010

1000

1010

0010

1001

1011

1100

1101

Tag_Re‚Äê
sult_2

0110

1010

0010

1000

1010

0110

1111

0011

Consulte tambi√©n
Activar el bit de estado en instrucciones de desplazamiento y rotaci√≥n (P√°gina 194)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Vista general de los tipos de datos v√°lidos (P√°gina 241)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

5532

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

RLDA: Rotar a la izquierda v√≠a bit de estado CC 1
Descripci√≥n
La instrucci√≥n "Rotar a la izquierda v√≠a bit de estado CC 1" desplaza el contenido del
acumulador 1 un bit a la izquierda. La posici√≥n de bit que ha quedado libre al desplazar (0) se
rellena con el estado l√≥gico del bit de estado CC 1. El bit de estado CC 1 obtiene el estado
l√≥gico del bit desplazado (31).
Esta instrucci√≥n se ejecuta independientemente del RLO. Pone el bit de estado CC 0 a "0".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value"

// Cargar el valor del operando en el acumulador 1.

RLDA

// Rotar los bits 0 a 31 del acumulador 1 una posici√≥n
a la izquierda.
// Rellenar el bit 1 con el estado l√≥gico del bit de
estado CC 1.
// Escribir el bit desplazado en el bit de estado CC 1.

T "Tag_Result"

// Transferir el contenido del acumulador 1 al operando.

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

CC 1

Valor

Tag_Value 1

0101

1111

0110

0100

0101

1101

0011

1011

Tag_Re‚Äê
sult

1011

1110

1100

1000

1011

1010

0111

0111

0

Consulte tambi√©n
Activar el bit de estado en instrucciones de desplazamiento y rotaci√≥n (P√°gina 194)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

RRDA: Rotar a la derecha v√≠a bit de estado CC 1
Descripci√≥n
La instrucci√≥n "Rotar a la derecha v√≠a bit de estado CC 1" desplaza el contenido del
acumulador 1 un bit a la derecha. La posici√≥n de bit que ha quedado libre al desplazar (31) se
rellena con el estado l√≥gico del bit de estado CC 1. El bit de estado CC 1 obtiene el estado
l√≥gico del bit desplazado (0).
Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5533

Instrucciones
4.2 Instrucciones
Esta instrucci√≥n se ejecuta independientemente del RLO. Pone el bit de estado CC 0 a "0".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value"

// Cargar el valor del operando en el acumulador 1.

RRDA

// Rotar los bits 0 a 31 del acumulador 1 una posici√≥n
a la derecha.
// Rellenar el bit 31 con el estado l√≥gico del bit de
estado CC 1.
// Escribir el bit desplazado en el bit de estado CC 1.

T "Tag_Result"

// Transferir el contenido del acumulador 1 al operando.

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

CC 1

Valor

Tag_Value

1

0101

1111

0110

0100

0101

1101

0011

1011

Tag_Result

0

1010

1111

1011

0010

0010

1110

1001

1101

El bit de estado CC 1 tiene el valor "1", ya que el bit 0 del operando "Tag_Value" tambi√©n tiene
el valor "1".

Consulte tambi√©n
Activar el bit de estado en instrucciones de desplazamiento y rotaci√≥n (P√°gina 194)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

Otras instrucciones
Acumulador
TAK: Intercambiar contenido de los acumuladores 1 y 2
Descripci√≥n
La instrucci√≥n "Intercambiar contenido de los acumuladores 1 y 2" intercambia el contenido del
acumulador 1 con el contenido del acumulador 2. En los controladores con cuatro
acumuladores, los contenidos de los acumuladores 3 y 4 no se ven influidos por esta
instrucci√≥n.

5534

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
La CPU ejecuta la instrucci√≥n independientemente del resultado l√≥gico y los bits de estado. La
instrucci√≥n no influye ni en el resultado l√≥gico ni en los bits de estado.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1" en el
acumulador 1.

L "Tag_Value_2"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_2" en el
acumulador 1.

>I

// Comparar si el valor del acumulador 2 es mayor que
el valor del acumulador 1.

JC NEXT

// Si la condici√≥n se cumple (RLO = "1"), saltar a la
etiqueta "NEXT".
// Si la condici√≥n no se cumple (RLO = "0"), procesar
la instrucci√≥n siguiente.

TAK

// Intercambiar contenido de los acumuladores 1 y 2.

NEXT: -I

// Etiqueta "NEXT"
// Restar el valor del acumulador 1 del valor del acumulador 2.

T "Tag_Output"

// Transferir el contenido del acumulador 1 al operando "Tag_Output".

Consulte tambi√©n
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

PUSH: Desplazar contenido al siguiente acumulador superior
Descripci√≥n
La instrucci√≥n "Desplazar contenido al siguiente acumulador superior" desplaza los
contenidos de los acumuladores 1 a 3 al siguiente acumulador superior en cada caso.
En los controladores con 2 acumuladores solo se copia el contenido del acumulador 1 en el
acumulador 2.
En los controladores con 4 acumuladores se desplaza el contenido del acumulador 1 al
acumulador 2, el contenido del acumulador 2 al acumulador 3 y el contenido del acumulador
3 al acumulador 4. El contenido del acumulador 4 se pierde.
El contenido del acumulador 1 no se ve influido por la instrucci√≥n y permanece invariable una
vez ejecutada la misma.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5535

Instrucciones
4.2 Instrucciones
La tabla siguiente muestra el contenido de los acumuladores 1 a 4 antes y despu√©s de ejecutar
la instrucci√≥n:
Estado

Acumulador
1

2

3

4

Antes de la ejecuci√≥n

Valor A

Valor B

Valor C

Valor D

Despu√©s de la ejecuci√≥n

Valor A

Valor A

Valor B

Valor C

La CPU ejecuta la instrucci√≥n independientemente del resultado l√≥gico y los bits de estado. La
instrucci√≥n no influye ni en el resultado l√≥gico ni en los bits de estado.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando en el acumulador 1.

PUSH

// Desplazar el contenido de los acumuladores 1 a 3 al
siguiente acumulador superior en cada caso.

L "Tag_Value_2"

// Cargar el valor del operando en el acumulador 1.

Consulte tambi√©n
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

POP: Desplazar contenido al siguiente acumulador inferior
Descripci√≥n
La instrucci√≥n "Desplazar contenido al siguiente acumulador inferior" desplaza los contenidos
de los acumuladores 4 a 2 al siguiente acumulador inferior en cada caso.
En los controladores con 2 acumuladores se copia el contenido del acumulador 2 en el
acumulador 1.
En los controladores con 4 acumuladores se desplaza el contenido del acumulador 4 al
acumulador 3, el contenido del acumulador 3 al acumulador 2 y el contenido del acumulador
2 al acumulador 1. El contenido del acumulador 1 se pierde.
El contenido del acumulador 4 no se ve influido por la instrucci√≥n y permanece invariable una
vez ejecutada la misma.
La tabla siguiente muestra el contenido de los acumuladores 1 a 4 antes y despu√©s de ejecutar
la instrucci√≥n:
Estado

Acumulador
1

5536

2

3

4

Antes de la ejecuci√≥n

Valor A

Valor B

Valor C

Valor D

Despu√©s de la ejecuci√≥n

Valor B

Valor C

Valor D

Valor D

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
La CPU ejecuta la instrucci√≥n independientemente del resultado l√≥gico y los bits de estado. La
instrucci√≥n no influye ni en el resultado l√≥gico ni en los bits de estado.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

T "Tag_Value_1"

// Transferir el contenido del acumulador 1 al operando "Tag_Value_1".

POP

// Desplazar el contenido de los acumuladores 4 a 2 al
siguiente acumulador inferior en cada caso.

T "Tag_Value_2"

// Transferir el contenido del acumulador 1 al operando "Tag_Value_2".

Consulte tambi√©n
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

ENT: Desplazar los acumuladores 2 y 3 al siguiente acumulador superior
Descripci√≥n
La instrucci√≥n "Desplazar los acumuladores 2 y 3 al siguiente acumulador superior" desplaza
el contenido del acumulador 3 al acumulador 4 y el contenido del acumulador 2 al acumulador
3. Los contenidos de los acumuladores 1 y 2 no cambian.
La tabla siguiente muestra el contenido de los acumuladores 1 a 4 antes y despu√©s de ejecutar
la instrucci√≥n:
Estado

Acumulador
1

2

3

4

Antes de la ejecuci√≥n

Valor A

Valor B

Valor C

Valor D

Despu√©s de la ejecuci√≥n

Valor A

Valor B

Valor B

Valor C

La CPU ejecuta la instrucci√≥n independientemente del resultado l√≥gico y los bits de estado. La
instrucci√≥n no influye ni en el resultado l√≥gico ni en los bits de estado.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1" en el
acumulador 1.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5537

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

L "Tag_Value_2"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_2" en el
acumulador 1.

*R

// Multiplicar los valores de los acumuladores 1 y 2.
// Guardar el producto (resultado parcial) en el acumulador 1.

L "Tag_Value_3"

// Desplazar el contenido del acumulador 1 (resultado
parcial) al acumulador 2.
// Cargar el valor del operando "Tag_Value_3" en el
acumulador 1.

ENT

// Copiar el contenido del acumulador 2 (resultado
parcial) en el acumulador 3.
// Copiar el contenido del acumulador 3 en el acumulador 4.

L "Tag_Value_4"

// Desplazar el contenido del acumulador 1 ("Tag_Value_3") al acumulador 2.
// Cargar el valor del operando "Tag_Value_4" en el
acumulador 1.

+R

// Sumar los valores de los acumuladores 1 y 2.
// Guardar la suma en el acumulador 1.
// Transferir el valor del acumulador 3 (resultado
parcial) al acumulador 2.

LEAVE

// Desplazar el contenido del acumulador 3 (resultado
parcial) al acumulador 2.
// Desplazar el contenido del acumulador 4 al acumulador 3.

/R

// Dividir los valores de los acumuladores 1 y 2.
// Guardar el resultado en el acumulador 1.

T "Tag_Result"

// Transferir el resultado (contenido del acumulador
1) al operando "Tag_Result".

Consulte tambi√©n
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

LEAVE: Desplazar los acumuladores 3 y 4 al siguiente acumulador inferior
Descripci√≥n
La instrucci√≥n "Desplazar los acumuladores 3 y 4 al siguiente acumulador inferior" desplaza el
contenido del acumulador 3 al acumulador 2 y el contenido del acumulador 4 al acumulador 3.
Los contenidos de los acumuladores 1 y 4 no cambian.
Las instrucciones de c√°lculos aritm√©ticos incluyen la funcionalidad de la instrucci√≥n "Desplazar
los acumuladores 3 y 4 al siguiente acumulador inferior".

5538

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
La tabla siguiente muestra el contenido de los acumuladores 1 a 4 antes y despu√©s de ejecutar
la instrucci√≥n:
Estado

Acumulador
1

2

3

4

Antes de la ejecuci√≥n

Valor A

Valor B

Valor C

Valor D

Despu√©s de la ejecuci√≥n

Valor A

Valor C

Valor D

Valor D

La CPU ejecuta la instrucci√≥n independientemente del resultado l√≥gico y los bits de estado. La
instrucci√≥n no influye ni en el resultado l√≥gico ni en los bits de estado.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1" en el
acumulador 1.

L "Tag_Value_2"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_2" en el
acumulador 1.

AD

// Combinar l√≥gicamente con Y el valor del acumulador
2 ("Tag_Value_1") con el valor del acumulador 1
("Tag_Value_2").
// Guardar el resultado en el acumulador 1.

L "Tag_Value_3"

// Desplazar el contenido del acumulador 1 (resultado
parcial) al acumulador 2.
// Cargar el valor del operando "Tag_Value_3" en el
acumulador 1.

ENT

// Copiar el contenido del acumulador 2 (resultado
parcial) en el acumulador 3.
// Copiar el contenido del acumulador 3 en el acumulador 4.

L "Tag_Value_4"

// Desplazar el contenido del acumulador 1 ("Tag_Value_3") al acumulador 2.
// Cargar el valor del operando "Tag_Value_4" en el
acumulador 1.

AD

// Combinar l√≥gicamente con Y el valor del acumulador
2 ("Tag_Value_3") con el valor del acumulador 1
("Tag_Value_4").
// Guardar el resultado en el acumulador 1.

LEAVE

// Desplazar el contenido del acumulador 3 (resultado
parcial) al acumulador 2.
// Desplazar el contenido del acumulador 4 al acumulador 3.

OD

// Combinar l√≥gicamente con O el valor del acumulador
2 con el valor del acumulador 1.
// Guardar el resultado en el acumulador 1.

T "Tag_Result"

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

// Transferir el resultado al operando "Tag_Result".

5539

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

Registro de direcciones
+AR1: Sumar acumulador 1 a AR1
Descripci√≥n
La instrucci√≥n "Sumar acumulador 1 a AR1" suma un valor al contenido del registro de
direcciones 1. El tipo de puntero que est√° en el registro de direcciones 1 y el √°rea de operandos
se conservan.
Para indicar el valor que debe sumarse existen las posibilidades siguientes:
‚óè Indicaci√≥n mediante una constante: La instrucci√≥n suma el valor de la constante al registro
de direcciones 1. El valor de la constante debe equivaler al formato de un puntero interno
del √°rea (POINTER).
‚óè Indicaci√≥n mediante el valor de la palabra derecha del acumulador 1: la instrucci√≥n
interpreta el valor de la palabra derecha del acumulador 1 como un entero de 16 bits y lo
ampl√≠a a 24 bits con el signo correcto. Seguidamente, la instrucci√≥n suma el valor del
acumulador 1 al registro de direcciones 1. Se admiten valores de -32768 a +32767.
La CPU ejecuta la instrucci√≥n independientemente del resultado l√≥gico y los bits de estado. La
instrucci√≥n no influye ni en el resultado l√≥gico ni en los bits de estado.
Los contenidos de los acumuladores no cambian debido a la instrucci√≥n.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Sumar acumulador 1 a AR1":
Par√°metro

Tipo de datos

Descripci√≥n

<Constante>

POINTER

Valor que se suma al registro de
direcciones 1.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:

5540

AWL

Explicaci√≥n

+AR1 P#10.0

// Sumar el puntero al registro de direcciones 1.

L "Tag_Value"

// Cargar el valor del operando "Tag_Value" en la palabra derecha del acumulador 1.

+AR1

// Sumar el valor del acumulador 1 al registro de direcciones 1.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

TAR1 %MD24

// Transferir el contenido del registro de direcciones
1 a la palabra doble MD24.

Consulte tambi√©n
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

+AR2: Sumar acumulador 1 a AR2
Descripci√≥n
La instrucci√≥n "Sumar acumulador 1 a AR2" suma un valor al contenido del registro de
direcciones 2. El tipo de puntero que est√° en el registro de direcciones 2 y el √°rea de operandos
se conservan.
Para indicar el valor que debe sumarse existen las posibilidades siguientes:
‚óè Indicaci√≥n mediante una constante: La instrucci√≥n suma el valor de la constante al registro
de direcciones 2. El valor de la constante debe equivaler al formato de un puntero interno
del √°rea (POINTER).
‚óè Indicaci√≥n mediante el valor de la palabra derecha del acumulador 1: la instrucci√≥n
interpreta el valor de la palabra derecha del acumulador 1 como un entero de 16 bits y lo
ampl√≠a a 24 bits con el signo correcto. Seguidamente, la instrucci√≥n suma el valor del
acumulador 1 al registro de direcciones 2. Se admiten valores de -32 768 a +32 767.
La CPU ejecuta la instrucci√≥n independientemente del resultado l√≥gico y los bits de estado. La
instrucci√≥n no influye ni en el resultado l√≥gico ni en los bits de estado.
Los contenidos de los acumuladores no cambian debido a la instrucci√≥n.
Nota
El registro de direcciones AR2 se utiiza para procesar multiinstancias. Si se programa la
instrucci√≥n "Sumar acumulador 1 a AR2", primero debe "salvarse" el contenido del registro de
direcciones 2 y volver a cargarlo despu√©s.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Sumar acumulador 1 a AR2":
Par√°metro

Tipo de datos

Descripci√≥n

<Constante>

POINTER

Valor que se suma al registro de
direcciones 1.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5541

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

+AR2 P#10.0

// Sumar el puntero al registro de direcciones 2.

L "Tag_Value"

// Cargar el valor del operando "Tag_Value" en la palabra derecha del acumulador 1.

+AR2

// Sumar el valor del acumulador 1 al registro de direcciones 2.

TAR2 %MD24

// Transferir el contenido del registro de direcciones
1 a la palabra doble MD24.

Consulte tambi√©n
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

Master Control Relay
MCR(: Abrir √°reas MCR
Descripci√≥n
La instrucci√≥n "Abrir √°reas MCR" activa y desactiva la dependencia MCR dentro de un √°rea
MCR en funci√≥n del resultado l√≥gico (RLO).
El principio y el fin de un √°rea MCR se definen mediante las instrucciones "Activar √°rea MCR"
(MCRA) y "Desactivar √°rea MCR" (MCRD). Dentro del √°rea MCR definida es posible activar y
desactivar la dependencia MCR para una o varias partes del programa.
Nota
Observe la informaci√≥n contenida en el apartado "Indicaciones importantes sobre el uso de la
funcionalidad MCR", en "Consulte tambi√©n".
La dependencia MCR se activa si el RLO es "1" antes de procesar la instrucci√≥n. Si el RLO es
"0" antes de la instrucci√≥n, la dependencia MCR se desactiva. El final de la secci√≥n del
programa dependiente de MCR se programa mediante la instrucci√≥n "Cerrar √°reas MCR". La
secci√≥n del programa que se encuentra entre las dos instrucciones se ve influenciada por el
MCR. Solo se ven afectadas las instrucciones dependientes de MCR (p. ej. la instrucci√≥n
"Transferir" (T)).
Tambi√©n es posible anidar la activaci√≥n y desactivaci√≥n de la dependencia MCR programando
la instrucci√≥n "Abrir √°reas MCR" en una secci√≥n del programa dependiente de MCR. Esta
instrucci√≥n se puede anidar hasta 8 niveles de profundidad. La dependencia MCR de la parte
del programa de nivel superior controla las dependencias MCR en todas las partes del
programa subordinadas. Si la dependencia MCR en la parte del programa de nivel superior

5542

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
est√° desactivada, no es posible activarla en una parte subordinada del programa dependiente
de MCR.
Si dentro de un √°rea MCR se llama un bloque, la dependencia MCR est√° desactivada en el
bloque llamado. Cuando se sale de un bloque, la dependencia MCR se ajusta igual que estaba
antes de llamarlo.
Las instrucciones "Abrir √°reas MCR" y "Cerrar √°reas MCR" deben programarse siempre de dos
en dos. Si una de las dos instrucciones no est√° programada, se dispara un error de pila MCR.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

MCRA

// Comienzo del √°rea MCR

A "Tag_Input_1"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

MCR(

// Comienzo de la dependencia MCR
// Si el estado l√≥gico del RLO es "1", activar la dependencia MCR.
// Si el estado l√≥gico del RLO es "0", desactivar la
dependencia MCR.

A "Tag_Input_2"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

= "Tag_Output_1"

// Si la dependencia MCR est√° desactivada, poner el
operando a "0".
// Si la dependencia MCR est√° activada, poner el operando a "1" o "0" en funci√≥n del RLO.

A "Tag_Input_3"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

MCR(

// Anidamiento de la dependencia MCR

A "Tag_Input_4"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

A "Tag_Input_5"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

= "Tag_Output_2"

// Si la dependencia MCR est√° desactivada, poner el
operando a "0".
// Si la dependencia MCR est√° activada, poner el operando a "1" o "0" en funci√≥n del RLO.

)MCR

// Fin del anidamiento

L "Tag_InputValue_1"

// Cargar el valor del operando en el acumulador 1.

T "Tag_OutputValue_1"

// Si la dependencia MCR est√° desactivada, escribir el
valor "0" en el operando.
// Si la dependencia MCR est√° activada, transferir el
contenido del acumulador 1 al operando.

)MCR

// Fin de la dependencia MCR

A "Tag_Input_6"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5543

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

MCR(

// Comienzo de la dependencia MCR
// Si el estado l√≥gico del RLO es "1", activar la dependencia MCR.
// Si el estado l√≥gico del RLO es "0", desactivar la
dependencia MCR.

L "Tag_InputValue_2"

// Cargar el valor del operando en el acumulador 1.

T "Tag_OutputValue_2"

// Si la dependencia MCR est√° desactivada, escribir el
valor "0" en el operando.
// Si la dependencia MCR est√° activada, transferir el
contenido del acumulador 1 al operando.

)MCR

// Fin de la dependencia MCR

MCRD

// Fin del √°rea MCR

A "Tag_Input_7"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

= "Tag_Output_3"

// Poner el operando a "1" o "0" en funci√≥n del RLO.

Consulte tambi√©n
Indicaciones importantes sobre el uso de la funci√≥n MCR (P√°gina 204)
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

)MCR: Cerrar √°reas MCR
Descripci√≥n
La instrucci√≥n "Cerrar √°reas MCR" cierra una secci√≥n del programa dependiente de MCR.
Tambi√©n borra el RLO de la √∫ltima entrada de la pila MCR.
Nota
Observe la informaci√≥n contenida en el apartado "Indicaciones importantes sobre el uso de la
funcionalidad MCR", en "Consulte tambi√©n".
La dependencia MCR se programa con la instrucci√≥n "Abrir √°reas MCR". Las instrucciones
"Abrir √°reas MCR" y "Cerrar √°reas MCR" deben programarse siempre de dos en dos. Si una
de las dos instrucciones no est√° programada, se dispara un error de pila MCR.

5544

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

MCRA

// Comienzo del √°rea MCR

A "Tag_Input_1"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

MCR(

// Comienzo de la dependencia MCR
// Si el estado l√≥gico del RLO es "1", activar la dependencia MCR.
// Si el estado l√≥gico del RLO es "0", desactivar la
dependencia MCR.

A "Tag_Input_2"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

= "Tag_Output_1"

// Si la dependencia MCR est√° desactivada, poner el
operando a "0".
// Si la dependencia MCR est√° activada, poner el operando a "1" o "0" en funci√≥n del RLO.

L "Tag_InputValue"

// Cargar el valor del operando en el acumulador 1.

T "Tag_OutputValue"

// Si la dependencia MCR est√° desactivada, escribir el
valor "0" en el operando.
// Si la dependencia MCR est√° activada, transferir el
contenido del acumulador 1 al operando.

)MCR

// Fin de la dependencia MCR

MCRD

// Fin del √°rea MCR

A "Tag_Input_3"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

= "Tag_Output_2"

// Poner el operando a "1" o "0" en funci√≥n del RLO.

Consulte tambi√©n
Indicaciones importantes sobre el uso de la funci√≥n MCR (P√°gina 204)
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

MCRA: Activar √°rea MCR
Descripci√≥n
La instrucci√≥n "Activar √°rea MCR" define el principio de un √°rea MCR. Dentro de dicha √°rea es
posible activar y desactivar la dependencia MCR con la ayuda de las instrucciones siguientes:
‚óè MCR(: Abrir √°reas MCR
‚óè )MCR: Cerrar √°reas MCR

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5545

Instrucciones
4.2 Instrucciones
El fin del √°rea MCR se define con la instrucci√≥n "Desactivar √°rea MCR" (MCRD). Las
instrucciones para definir el principio y fin de un √°rea MCR siempre deben utilizarse por parejas.
Nota
Observe la informaci√≥n contenida en el apartado "Indicaciones importantes sobre el uso de la
funcionalidad MCR", en "Consulte tambi√©n".
Si dentro de un √°rea MCR se llama un bloque, la dependencia MCR est√° desactivada en el
bloque llamado. Cuando se sale de un bloque, la dependencia MCR se ajusta igual que estaba
antes de llamarlo.
La instrucci√≥n se ejecuta sin considerar ni influir en los bits de estado.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

MCRA

// Comienzo del √°rea MCR

A "Tag_Input_1"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

MCR(

// Comienzo de la dependencia MCR
// Si el estado l√≥gico del RLO es "1", activar la dependencia MCR.
// Si el estado l√≥gico del RLO es "0", desactivar la
dependencia MCR.

A "Tag_Input_2"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

= "Tag_Output_1"

// Si la dependencia MCR est√° desactivada, poner el
operando a "0".
// Si la dependencia MCR est√° activada, poner el operando a "1" o "0" en funci√≥n del RLO.

L "Tag_InputValue"

// Cargar el valor del operando en el acumulador 1.

T "Tag_OutputValue"

// Si la dependencia MCR est√° desactivada, escribir el
valor "0" en el operando.
// Si la dependencia MCR est√° activada, transferir el
contenido del acumulador 1 al operando.

)MCR

// Fin de la dependencia MCR

MCRD

// Fin del √°rea MCR

A "Tag_Input_3"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

= "Tag_Output_2"

// Poner el operando a "1" o "0" en funci√≥n del RLO.

Consulte tambi√©n
Indicaciones importantes sobre el uso de la funci√≥n MCR (P√°gina 204)
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Principios b√°sicos de la palabra de estado (P√°gina 184)

5546

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

MCRD: Desactivar √°rea MCR
Descripci√≥n
La instrucci√≥n "Desactivar √°rea MCR" define el final de un √°rea MCR.
El principio de un √°rea MCR se define con la instrucci√≥n "Activar √°rea MCR" (MCRA). Las
instrucciones para definir el principio y fin de un √°rea MCR siempre deben utilizarse por parejas.
Nota
Observe la informaci√≥n contenida en el apartado "Indicaciones importantes sobre el uso de la
funcionalidad MCR", en "Consulte tambi√©n".
Dentro de un √°rea MCR es posible programar la dependencia MCR con la ayuda de las
instrucciones siguientes:
‚óè MCR(: Abrir √°reas MCR
‚óè )MCR: Cerrar √°reas MCR
Si dentro de un √°rea MCR se llama un bloque, la dependencia MCR est√° desactivada en el
bloque llamado. Cuando se sale de un bloque, la dependencia MCR se ajusta igual que estaba
antes de llamarlo.
La instrucci√≥n se ejecuta sin considerar ni influir en los bits de estado.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

MCRA

// Comienzo del √°rea MCR

A "Tag_Input_1"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

MCR(

// Comienzo de la dependencia MCR
// Si el estado l√≥gico del RLO es "1", activar la dependencia MCR.
// Si el estado l√≥gico del RLO es "0", desactivar la
dependencia MCR.

A "Tag_Input_2"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

= "Tag_Output_1"

// Si la dependencia MCR est√° desactivada, poner el
operando a "0".
// Si la dependencia MCR est√° activada, poner el operando a "1" o "0" en funci√≥n del RLO.

L "Tag_InputValue"

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

// Cargar el valor del operando en el acumulador 1.

5547

Instrucciones
4.2 Instrucciones
AWL

Explicaci√≥n

T "Tag_OutputValue"

// Si la dependencia MCR est√° desactivada, escribir el
valor "0" en el operando.
// Si la dependencia MCR est√° activada, transferir el
contenido del acumulador 1 al operando.

)MCR

// Fin de la dependencia MCR

MCRD

// Fin del √°rea MCR

A "Tag_Input_3"

// Consultar si el operando es "1" y combinar el resultado l√≥gicamente con Y con el RLO actual.

= "Tag_Output_2"

// Poner el operando a "1" o "0" en funci√≥n del RLO.

Consulte tambi√©n
Indicaciones importantes sobre el uso de la funci√≥n MCR (P√°gina 204)
Activar el bit de estado en instrucciones de control del programa (P√°gina 192)
Principios b√°sicos de la palabra de estado (P√°gina 184)
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

Instrucciones nulas
BLD: Refresco de imagen (instrucci√≥n nula)
Descripci√≥n
La instrucci√≥n "Refresco de imagen (instrucci√≥n nula)" no ejecuta ninguna funci√≥n y no influye
en los bits de estado. La instrucci√≥n sirve para reconocer secuencias de c√≥digos en la
transferencia de par√°metros o en los segmentos KOP/FUP. Se genera autom√°ticamente
cuando se visualiza un programa KOP o FUP en AWL. El valor de par√°metro es el n√∫mero de
identificaci√≥n de la instrucci√≥n y es generado por la programadora.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Refresco de imagen (instrucci√≥n
nula)":
Par√°metro

Tipo de datos

Descripci√≥n

<n√∫mero de identificaci√≥n>

WORD

N√∫mero de identificaci√≥n de la
instrucci√≥n

Consulte tambi√©n
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

5548

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

NOP 0: Instrucci√≥n nula
Descripci√≥n
La instrucci√≥n "Instrucci√≥n nula" con un par√°metro 0 no ejecuta ninguna funci√≥n y no influye en
los bits de estado. El c√≥digo de la instrucci√≥n contiene un patr√≥n de bits con 16 ceros. La
instrucci√≥n solo es importante para la programadora cuando se visualiza un programa.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
AWL

Explicaci√≥n

L "Tag_Value_1"

// Cargar el valor del operando "Tag_Value_1" en el
acumulador 1.

L "Tag_Value_2"

// Desplazar el contenido del acumulador 1 al acumulador 2.
// Cargar el valor del operando "Tag_Value_2" en el
acumulador 1.

>I

// Comparar si el valor del acumulador 2 es mayor que
el valor del acumulador 1.

A

// Consultar si el estado l√≥gico del operando es "1" y
combinar el resultado l√≥gicamente con Y con el RLO actual.

JC NEXT

// Si la condici√≥n se cumple (RLO = "1"), saltar a la
etiqueta "NEXT".
// Si la condici√≥n no se cumple (RLO = "0"), procesar
la instrucci√≥n siguiente.

TAK

// Intercambiar contenido de los acumuladores 1 y 2.

NEXT: NOP 0

// Etiqueta "NEXT"

Consulte tambi√©n
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

NOP 1: Instrucci√≥n nula
Descripci√≥n
La instrucci√≥n "Instrucci√≥n nula" con un par√°metro 1 no ejecuta ninguna funci√≥n y no influye en
los bits de estado. El c√≥digo de la instrucci√≥n contiene un patr√≥n de bits con 16 unos. La
instrucci√≥n solo es importante para la programadora cuando se visualiza un programa.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5549

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
A√±adir instrucciones AWL (P√°gina 8079)
Procesar instrucciones AWL (P√°gina 8098)

4.2.2.4

SCL

Temporizadores
Temporizadores CEI
TP: Impulso
Descripci√≥n
La instrucci√≥n "Impulso" permite activar el par√°metro Q durante el tiempo PT. La instrucci√≥n se
inicia cuando el resultado l√≥gico (RLO) del par√°metro IN cambia de "0" a "1" (flanco de se√±al
ascendente). El tiempo programado PT empieza a contar al iniciar la instrucci√≥n. El par√°metro
Q se activa por el tiempo PT, independientemente de c√≥mo evolucione la se√±al en el par√°metro
IN. La detecci√≥n de un nuevo flanco de se√±al ascendente tampoco influye en el estado l√≥gico
del par√°metro Q mientras transcurre el tiempo PT.
El valor actual de tiempo se puede consultar en el par√°metro ET. Este valor de tiempo empieza
a partir de T#0s y termina al alcanzarse el valor del tiempo PT. Si cuando se alcanza el tiempo
PT el estado l√≥gico del par√°metro IN es "0", se resetea el par√°metro ET.
A cada llamada de la instrucci√≥n "Impulso" debe asign√°rsele un temporizador CEI, en el que
se guardan los datos de la instrucci√≥n. Un temporizador CEI se puede declarar como se indica
a continuaci√≥n:
‚óè Declaraci√≥n de un bloque de datos del tipo TP (p. ej. "TP_DB")
‚óè Declaraci√≥n como variable local del tipo TP en la secci√≥n "Static" de un bloque (p. ej.,
#MyTP_TIMER)
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si el temporizador CEI se deposita en un bloque
de datos propio (instancia individual) o bien como variable local (multiinstancia) en la interfaz
del bloque. Si crea un bloque de datos propio, lo encontrar√° en el √°rbol del proyecto, en
"Bloques de programa > Bloques de sistema", carpeta "Recursos de programa", . Encontrar√°
m√°s informaci√≥n al respecto en "Consulte tambi√©n".
El sistema operativo inicializa las instancias de la instrucci√≥n "Impulso" cuando se efect√∫a un
arranque en fr√≠o. Si alguna instancia de la instrucci√≥n debe estar inicializada tras un rearranque
completo (en caliente), las instancias que se deben inicializar se deben llamar en un OB de

5550

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
arranque con el valor "0" en el par√°metro PT. Si un bloque diferente contiene instancias de la
instrucci√≥n "Impulso", estas pueden inicializarse p. ej. inicializando el bloque de nivel superior.
Nota
Ignorar instrucci√≥n
Si en el programa no se llama la instrucci√≥n porque, p. ej., esta es ignorada, la salida ET
devuelve un valor de constante en cuanto ha transcurrido este tiempo.
Nota
Actualizaci√≥n de los datos de la instrucci√≥n
Los datos de la instrucci√≥n se actualizan √∫nicamente al llamar la instrucci√≥n. Al acceder a las
salidas Q o ET, no se actualizan los datos.

Temporizador CEI como bloque de datos de instancia del tipo de datos de sistema
<Temporizador_CEI> (Shared DB)
Un temporizador CEI se puede declarar como bloque de datos del modo siguiente:
<DB_temporizador_CEI>.TP();

Temporizador CEI como variable local de la interfaz del bloque (multiinstancia)
El temporizador CEI se puede declarar como variable local del modo siguiente:
#myLocal_Timer();

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN

Input

BOOL

I, Q, M, D, L

Entrada de arranque

PT

Input

TIME

I, Q, M, D, L, P

Duraci√≥n del impulso.
El valor del par√°metro PT de‚Äê
be ser positivo.

Q

Output

BOOL

I, Q, M, D, L

Operando que se activa por
el tiempo PT.

ET

Output

TIME

I, Q, M, D, L

Valor de tiempo actual

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5551

Instrucciones
4.2 Instrucciones

Cronograma de impulsos
La figura siguiente muestra el cronograma de impulsos de la instrucci√≥n "Impulso":
,1

4

37

37

37

(7
37

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"TP_DB".TP(IN := "Tag_Start",
PT := "Tag_PresetTime",
Q => "Tag_Status",
ET => "Tag_ElapsedTime");

Cuando el estado l√≥gico del operando "Tag_Start" cambia de "0" a "1", el tiempo programado
en el par√°metro PT empieza a contar y el operando "Tag_Status" pasa a "1". El valor de tiempo
actual se guarda en el operando "Tag_ElapsedTime".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Instancias (P√°gina 61)
Principios b√°sicos de SCL (P√°gina 8115)

5552

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

TON: Retardo al conectar
Descripci√≥n
La instrucci√≥n "Retardo al conectar" permite retardar la activaci√≥n del par√°metro Q por el
tiempo programado PT. La instrucci√≥n se inicia cuando el resultado l√≥gico (RLO) del par√°metro
IN cambia de "0" a "1" (flanco de se√±al ascendente). Cuando se inicia la instrucci√≥n, se
empieza a contar el tiempo programado PT. Una vez transcurrido el tiempo PT, el par√°metro
Q devuelve el estado l√≥gico "1". El par√°metro Q permanecer√° activado mientras la entrada de
arranque est√© puesta a "1". Cuando el estado l√≥gico del par√°metro IN cambia de "1" a "0", se
resetea el par√°metro Q. La funci√≥n de temporizaci√≥n se reinicia al detectarse un nuevo flanco
ascendente en el par√°metro IN.
El valor actual de tiempo se puede consultar en el par√°metro ET. Este valor de tiempo empieza
a partir de T#0s y termina al alcanzarse el valor del tiempo PT. El par√°metro ET se resetea en
cuanto el estado l√≥gico del par√°metro IN cambia a "0".
A cada llamada de la instrucci√≥n "Retardo al conectar" debe asign√°rsele un temporizador CEI,
en el que se guarden los datos de la instrucci√≥n. Un temporizador CEI se puede declarar como
se indica a continuaci√≥n:
‚óè Declaraci√≥n de un bloque de datos del tipo TON (p. ej., "TON_DB")
‚óè Declaraci√≥n como variable local del tipo TON en la secci√≥n "Static" de un bloque (p. ej.,
#MyTON_TIMER)
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si el temporizador CEI se deposita en un bloque
de datos propio (instancia individual) o bien como variable local (multiinstancia) en la interfaz
del bloque. Si crea un bloque de datos propio, lo encontrar√° en el √°rbol del proyecto, en
"Bloques de programa > Bloques de sistema", carpeta "Recursos de programa", . Encontrar√°
m√°s informaci√≥n al respecto en "Consulte tambi√©n".
El sistema operativo inicializa las instancias de la instrucci√≥n "Retardo al conectar" cuando se
realiza un arranque en fr√≠o. Si alguna instancia de la instrucci√≥n debe estar inicializada tras un
rearranque completo (en caliente), las instancias que se deben inicializar se deben llamar en
un OB de arranque con el valor "0" en el par√°metro PT. Si un bloque diferente contiene
instancias de la instrucci√≥n "Retardo al conectar", estas pueden inicializarse p. ej. inicializando
el bloque de nivel superior.
Nota
Ignorar instrucci√≥n
Si en el programa no se llama la instrucci√≥n porque, p. ej., esta es ignorada, la salida ET
devuelve un valor de constante en cuanto ha transcurrido este tiempo.
Nota
Actualizaci√≥n de los datos de la instrucci√≥n
Los datos de la instrucci√≥n se actualizan √∫nicamente al llamar la instrucci√≥n. Al acceder a las
salidas Q o ET, no se actualizan los datos.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5553

Instrucciones
4.2 Instrucciones

Temporizador CEI como bloque de datos de instancia del tipo de datos de sistema
<Temporizador_CEI> (Shared DB)
Un temporizador CEI se puede declarar como bloque de datos del modo siguiente:
<DB_temporizador_CEI>.TON();

Temporizador CEI como variable local de la interfaz del bloque (multiinstancia)
El temporizador CEI se puede declarar como variable local del modo siguiente:
#myLocal_Timer();

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN

Input

BOOL

I, Q, M, D, L

Entrada de arranque

PT

Input

TIME

I, Q, M, D, L, P

Tiempo de retardo al conec‚Äê
tar.
El valor del par√°metro PT de‚Äê
be ser positivo.

Q

Output

BOOL

I, Q, M, D, L

Operando que se activa una
vez transcurrido el tiempo PT.

ET

Output

TIME

I, Q, M, D, L

Valor de tiempo actual

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

5554

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Cronograma de impulsos
La figura siguiente muestra el cronograma de impulsos de la instrucci√≥n "Retardo al conectar":
,1

4

37

37

(7
37

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"TON_DB".TON(IN := "Tag_Start",
PT := "Tag_PresetTime",
Q => "Tag_Status",
ET => "Tag_ElapsedTime");

Cuando el estado l√≥gico del operando "Tag_Start" cambia de "0" a "1", el tiempo programado
en el par√°metro PT empieza a contar. Una vez transcurrido el tiempo, el operando "Tag_Start"
se pone a "1" si el operando "Tag_Status" tiene el estado l√≥gico "1". Una vez transcurrido el
tiempo, el operando "Tag_Status" adopta el estado l√≥gico "1" mientras el operando "Tag_Start"
tenga el estado l√≥gico "1". El valor de tiempo actual se guarda en el operando
"Tag_ElapsedTime".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5555

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Instancias (P√°gina 61)
Principios b√°sicos de SCL (P√°gina 8115)

TOF: Retardo al desconectar
Descripci√≥n
La instrucci√≥n "Retardo al desconectar" permite retardar el reset del par√°metro Q por el tiempo
programado PT. El par√°metro Q se activa cuando el resultado l√≥gico (RLO) del par√°metro IN
cambia de "0" a "1" (flanco de se√±al ascendente). Cuando el estado l√≥gico del par√°metro IN
cambia nuevamente a "0", el tiempo programado PT deja de contar. El par√°metro Q
permanecer√° activado mientras transcurra el tiempo PT. Una vez transcurrido el tiempo PT se
inicializa el par√°metro Q. Si el estado l√≥gico del par√°metro IN cambia a "1" antes de que
transcurra el tiempo PT, se inicializa el temporizador. El estado l√≥gico del par√°metro Q
permanece a "1".
El valor actual de tiempo se puede consultar en el par√°metro ET. Este valor de tiempo actual
empieza a contar a partir de T#0s y termina al alcanzarse el valor de tiempo PT. Una vez
transcurrido el tiempo PT, el par√°metro ET permanece al valor actual hasta que el par√°metro
IN vuelva a cambiar a "1". Si el par√°metro IN cambia a "1" antes de transcurrir el tiempo PT, el
par√°metro ET se restablece al valor T#0s.
A cada llamada de la instrucci√≥n "Retardo al desconectar" debe asign√°rsele un temporizador
CEI, en el que se guarden los datos de la instrucci√≥n. Un temporizador CEI se puede declarar
como se indica a continuaci√≥n:
‚óè Declaraci√≥n de un bloque de datos del tipo TOF (p. ej., "TOF_DB")
‚óè Declaraci√≥n como variable local del tipo TOF en la secci√≥n "Static" de un bloque (p. ej.,
#MyTOF_TIMER)
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si el temporizador CEI se deposita en un bloque
de datos propio (instancia individual) o bien como variable local (multiinstancia) en la interfaz
del bloque. Si crea un bloque de datos propio, lo encontrar√° en el √°rbol del proyecto, en
"Bloques de programa > Bloques de sistema", carpeta "Recursos de programa", . Encontrar√°
m√°s informaci√≥n al respecto en "Consulte tambi√©n".
El sistema operativo inicializa las instancias de la instrucci√≥n "Retardo al desconectar" cuando
se realiza un arranque en fr√≠o. Si alguna instancia de la instrucci√≥n debe estar inicializada tras
un rearranque completo (en caliente), las instancias que se deben inicializar se deben llamar
en un OB de arranque con el valor "0" en el par√°metro PT. Si un bloque diferente contiene

5556

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
instancias de la instrucci√≥n "Retardo al desconectar", estas pueden inicializarse p. ej.
inicializando el bloque de nivel superior.
Nota
Ignorar instrucci√≥n
Si en el programa no se llama la instrucci√≥n porque, p. ej., esta es ignorada, la salida ET
devuelve un valor de constante en cuanto ha transcurrido este tiempo.
Nota
Actualizaci√≥n de los datos de la instrucci√≥n
Los datos de la instrucci√≥n se actualizan √∫nicamente al llamar la instrucci√≥n. Al acceder a las
salidas Q o ET, no se actualizan los datos.

Temporizador CEI como bloque de datos de instancia del tipo de datos de sistema
<Temporizador_CEI> (Shared DB)
Un temporizador CEI se puede declarar como bloque de datos del modo siguiente:
<DB_temporizador_CEI.TOF();

Temporizador CEI como variable local de la interfaz del bloque (multiinstancia)
El temporizador CEI se puede declarar como variable local del modo siguiente:
#myLocal_Timer();

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN

Input

BOOL

I, Q, M, D, L

Entrada de arranque

PT

Input

TIME

I, Q, M, D, L, P

Tiempo del retardo al desco‚Äê
nectar
El valor del par√°metro PT de‚Äê
be ser positivo.

Q

Output

BOOL

I, Q, M, D, L

Operando que se desactiva
una vez transcurrido el tiem‚Äê
po PT.

ET

Output

TIME

I, Q, M, D, L

Valor de tiempo actual

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5557

Instrucciones
4.2 Instrucciones

Cronograma de impulsos
La figura siguiente muestra el cronograma de impulsos de la instrucci√≥n "Retardo al
desconectar":
,1

4
37

37

(7
37

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"TOF_DB".TOF(IN := "Tag_Start",
PT := "Tag_PresetTime",
Q => "Tag_Status",
ET => "Tag_ElapsedTime");

Si se produce un cambio del estado l√≥gico del operando "Tag_Start" de "0" a "1", el operando
se pone a "Tag_Status". Cuando el estado l√≥gico del operando "Tag_Start" cambia de "1" a "0",
el tiempo programado en el par√°metro PT empieza a contar. Mientras transcurra el tiempo,
permanecer√° activado el operando "Tag_Status". Una vez transcurrido el tiempo, el operando
"Tag_Status" se desactiva. El valor de tiempo actual se guarda en el operando
"Tag_ElapsedTime".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Instancias (P√°gina 61)
Principios b√°sicos de SCL (P√°gina 8115)

5558

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Temporizadores SIMATIC
S_PULSE: Parametrizar y arrancar temporizador como impulso
Descripci√≥n
La instrucci√≥n "Parametrizar y arrancar temporizador como impulso" arranca el temporizador
programado en el par√°metro T_NO cuando se detecta un cambio del resultado l√≥gico (RLO) de
"0" a "1" (flanco de se√±al ascendente) en el par√°metro S. El temporizador cuenta el tiempo
programado TV mientras el estado l√≥gico del par√°metro S sea "1".
Si el estado l√≥gico del par√°metro S cambia a "0" antes de que transcurra el tiempo programado,
el temporizador se detiene y el par√°metro "Q" adopta el estado l√≥gico "0".
El tiempo se compone internamente de un valor de tiempo y una base de tiempo y se programa
en el par√°metro TV. Cuando se inicia la instrucci√≥n, el valor de tiempo programado se cuenta
hacia atr√°s hasta cero. La base de tiempo indica con qu√© periodo de tiempo se modifica el valor
de tiempo. El valor actual de tiempo se deposita en el par√°metro BI.
Si el temporizador est√° contando y el estado l√≥gico de la entrada R cambia a "1", el valor actual
de tiempo y la base de tiempo tambi√©n se ponen a cero. Si el temporizador no est√° en marcha,
el estado l√≥gico "1" de la entrada R no provoca ning√∫n efecto.
El par√°metro Q devuelve el estado l√≥gico "1" mientras el temporizador est√° contando y el
estado l√≥gico del par√°metro S es "1". Si el estado l√≥gico del par√°metro S cambia a "0" antes
de que transcurra el tiempo programado, el par√°metro Q devuelve el estado l√≥gico "0". Si el
par√°metro R resetea el temporizador o si el tiempo ha transcurrido, el par√°metro Q tambi√©n
devuelve el estado l√≥gico "0".
Los datos de la instrucci√≥n se actualizan con cada acceso. Por este motivo es posible que una
consulta de datos al principio del ciclo devuelva valores diferentes en comparaci√≥n con el fin
del ciclo.
Nota
En la c√©lula de temporizaci√≥n, el sistema operativo reduce el valor de tiempo en una unidad
respectivamente, y en un intervalo definido por la base de tiempo, hasta que el valor de tiempo
sea "0". La reducci√≥n se realiza de modo as√≠ncrono respecto al programa de usuario. De este
modo el tiempo resultante es menor que el valor de tiempo deseado, como m√°ximo hasta un
intervalo de la base de tiempo.
Encontrar√° un ejemplo de la estructura de una c√©lula de temporizaci√≥n en: Consulte tambi√©n
"L: Cargar valor del temporizador".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5559

Instrucciones
4.2 Instrucciones

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

T_NO

Input

TIMER, INT

T

Temporizador que arranca.
El n√∫mero de temporizado‚Äê
res depende de la CPU.

S

Input

BOOL

I, Q, M, D, L

Entrada de arranque

TV

Input

S5TIME, WORD

I, Q, M, D, L

Valor de tiempo predetermi‚Äê
nado

R

Input

BOOL

I, Q, M, D, L, P

Entrada de reset

Q

Output

BOOL

I, Q, M, D, L, P

Estado del temporizador

BI

Output

WORD

I, Q, M, D, L, P

Valor actual de tiempo en c√≥‚Äê
digo dual

S5TIME

I, Q, M, D, L

Valor de tiempo actual

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

5560

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Cronograma de impulsos
La imagen siguiente muestra el cronograma de impulsos de la instrucci√≥n "Parametrizar y
arrancar temporizador como impulso":
W

W

W

5/2HQODHQWUDGD6

5/2HQODHQWUDGD5

(OWLHPSRWUDQVFXUUH

&RQVXOWD‡≤Ø‡≤Ø

&RQVXOWD‡≤Ø‡≤Ø

W WLHPSRSURJUDPDGR

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := S_PULSE(T_NO := "Timer_1",
S := "Tag_1",
TV := "Tag_Number",
R := "Tag_Reset",
Q := "Tag_Status",
BI := "Tag_Value");

Cuando el estado l√≥gico del operando "Tag_1" cambia de "0" a "1", el temporizador "Timer_1"
se pone en marcha. El temporizador empieza a contar con el valor de tiempo del operando
"Tag_Number" y sigue contando mientras el operando "Tag_1" devuelva el estado l√≥gico "1".
Si el estado l√≥gico del par√°metro S cambia a "0" antes de que transcurra el tiempo programado,
el operando "Tag_Status" adopta el estado l√≥gico "0". Si el par√°metro R resetea el
temporizador o si el tiempo ha transcurrido, el operando "Tag_Status" tambi√©n devuelve el
estado l√≥gico "0".
Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5561

Instrucciones
4.2 Instrucciones
El valor actual de tiempo se guarda en c√≥digo dual en el operando "Tag_Value" y se devuelve
como valor de funci√≥n.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
L: Cargar valor del temporizador (P√°gina 5383)
Principios b√°sicos de SCL (P√°gina 8115)

S_PEXT: Parametrizar y arrancar temporizador como impulso prolongado
Descripci√≥n
La instrucci√≥n "Parametrizar y arrancar temporizador como impulso prolongado" arranca el
temporizador programado cuando se detecta un flanco de se√±al ascendente en el par√°metro
S. El temporizador deja de contar el tiempo programado TV aunque el estado l√≥gico del
par√°metro S cambie a "0". Mientras el temporizador est√° contando, el par√°metro Q devuelve
el estado l√≥gico "1".
Una vez transcurrido el tiempo, el par√°metro Q adopta el valor l√≥gico "0". Si el estado l√≥gico del
par√°metro S cambia de "0" a "1" mientras el temporizador est√° contando, el temporizador se
inicia de nuevo con el tiempo programado en el par√°metro TV.
El tiempo se compone internamente de un valor de tiempo y una base de tiempo y se programa
en el par√°metro TV. Cuando se inicia la instrucci√≥n, el valor de tiempo programado se cuenta
hacia atr√°s hasta cero. La base de tiempo indica con qu√© periodo de tiempo se modifica el valor
de tiempo. El valor actual de tiempo se deposita en el par√°metro BI.
Si el temporizador est√° contando y el estado l√≥gico del par√°metro R cambia a "1", el valor
actual de tiempo y la base de tiempo tambi√©n se ponen a cero. Si el temporizador no est√°
contando, el estado l√≥gico "1" en el par√°metro R no tiene ning√∫n efecto.
Los datos de la instrucci√≥n se actualizan con cada acceso. Por este motivo es posible que una
consulta de datos al principio del ciclo devuelva valores diferentes en comparaci√≥n con el fin
del ciclo.
Nota
En la c√©lula de temporizaci√≥n, el sistema operativo reduce el valor de tiempo en una unidad
respectivamente, y en un intervalo definido por la base de tiempo, hasta que el valor de tiempo
sea "0". La reducci√≥n se realiza de modo as√≠ncrono respecto al programa de usuario. De este
modo el tiempo resultante es menor que el valor de tiempo deseado, como m√°ximo hasta un
intervalo de la base de tiempo.
Encontrar√° un ejemplo de la estructura de una c√©lula de temporizaci√≥n en: Consulte tambi√©n
"L: Cargar valor del temporizador".

5562

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

T_NO

Input

TIMER, INT

T

Temporizador que arranca.
El n√∫mero de temporizado‚Äê
res depende de la CPU.

S

Input

BOOL

I, Q, M, D, L

Entrada de arranque

TV

Input

S5TIME, WORD

I, Q, M, D, L

Valor de tiempo predetermi‚Äê
nado

R

Input

BOOL

I, Q, M, D, L, P

Entrada de reset

Q

Output

BOOL

I, Q, M, D, L, P

Estado del temporizador

BI

Output

WORD

I, Q, M, D, L, P

Valor actual de tiempo en c√≥‚Äê
digo dual

S5TIME

I, Q, M, D, L

Valor de tiempo actual

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Cronograma de impulsos
La imagen siguiente muestra el cronograma de impulsos de la instrucci√≥n "Parametrizar y
arrancar temporizador como impulso prolongado":
W

W

W

W

5/2HQODHQWUDGD6

5/2HQODHQWUDGD5

7HPSRUL]DGRUHQPDUFKD

&RQVXOWD

&RQVXOWD
W WLHPSRSURJUDPDGR

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5563

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := S_PEXT(T_NO := "Timer_1",
S := "Tag_1",
TV := "Tag_Number",
R := "Tag_Reset",
Q := "Tag_Status",
BI := "Tag_Value");

Cuando el estado l√≥gico del operando "Tag_1" cambia de "0" a "1", el temporizador "Timer_1"
se pone en marcha. Mientras el temporizador est√° en marcha, el operando "Tag_Status"
devuelve el estado l√≥gico "1". Una vez transcurrido el tiempo, el operando "Tag_Status" adopta
el valor l√≥gico "0". Si el estado l√≥gico de la entrada S cambia de "0" a "1" mientras el
temporizador est√° contando, el temporizador se inicia de nuevo con el tiempo "Tag_Number".
El valor actual de tiempo se guarda en c√≥digo dual en el operando "Tag_Value" y se devuelve
como valor de funci√≥n.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
L: Cargar valor del temporizador (P√°gina 5383)
Principios b√°sicos de SCL (P√°gina 8115)

S_ODT: Parametrizar y arrancar temporizador como retardo a la conexi√≥n
Descripci√≥n
La instrucci√≥n "Parametrizar y arrancar temporizador como retardo a la conexi√≥n" arranca el
temporizador programado como retardo a la conexi√≥n cuando se detecta un flanco de se√±al
ascendente en el par√°metro S. El temporizador cuenta el tiempo programado TV mientras el
estado l√≥gico del par√°metro S sea "1".
Si el tiempo ha transcurrido correctamente y el par√°metro S sigue presentando el estado l√≥gico
"1", el par√°metro Q devuelve el estado l√≥gico "1". Si el estado l√≥gico del par√°metro S cambia
de "1" a "0" mientras el temporizador est√° contando, este se detiene. En este caso, la salida Q
adopta el estado l√≥gico "0".
El tiempo se compone internamente de un valor de tiempo y una base de tiempo y se programa
en el par√°metro TV. Cuando se inicia la instrucci√≥n, el valor de tiempo programado se cuenta
hacia atr√°s hasta cero. La base de tiempo indica con qu√© periodo de tiempo se modifica el valor
de tiempo. El valor actual de tiempo se deposita en el par√°metro BI.
Si el temporizador est√° contando y el estado l√≥gico de la entrada R cambia de "0" a "1", el valor
actual de tiempo y la base de tiempo tambi√©n se ponen a cero. En este caso, el estado l√≥gico
del par√°metro Q es "0". El temporizador se resetea si el par√°metro R presenta el estado l√≥gico
"1", aunque el temporizador no est√© en marcha y el resultado l√≥gico (RLO) del par√°metro S sea
"1".

5564

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Los datos de la instrucci√≥n se actualizan con cada acceso. Por este motivo es posible que una
consulta de datos al principio del ciclo devuelva valores diferentes en comparaci√≥n con el fin
del ciclo.
Nota
En la c√©lula de temporizaci√≥n, el sistema operativo reduce el valor de tiempo en una unidad
respectivamente, y en un intervalo definido por la base de tiempo, hasta que el valor de tiempo
sea "0". La reducci√≥n se realiza de modo as√≠ncrono respecto al programa de usuario. De este
modo el tiempo resultante es menor que el valor de tiempo deseado, como m√°ximo hasta un
intervalo de la base de tiempo.
Encontrar√° un ejemplo de la estructura de una c√©lula de temporizaci√≥n en: Consulte tambi√©n
"L: Cargar valor del temporizador".

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

T_NO

Input

TIMER, INT

T

Temporizador que arranca.
El n√∫mero de temporizado‚Äê
res depende de la CPU.

S

Input

BOOL

I, Q, M, D, L

Entrada de arranque

TV

Input

S5TIME, WORD

I, Q, M, D, L

Valor de tiempo predetermi‚Äê
nado

R

Input

BOOL

I, Q, M, D, L, P

Entrada de reset

Q

Output

BOOL

I, Q, M, D, L, P

Estado del temporizador

BI

Output

WORD

I, Q, M, D, L, P

Valor actual de tiempo en c√≥‚Äê
digo dual

S5TIME

I, Q, M, D, L

Valor de tiempo actual

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5565

Instrucciones
4.2 Instrucciones

Cronograma de impulsos
La imagen siguiente muestra el cronograma de impulsos de la instrucci√≥n "Parametrizar y
arrancar temporizador como retardo a la conexi√≥n":
W

W

W

5/2HQODHQWUDGD6

5/2HQODHQWUDGD5

(OWLHPSRWUDQVFXUUH

&RQVXOWD‡≤Ø‡≤Ø

&RQVXOWD‡≤Ø‡≤Ø
W WLHPSRSURJUDPDGR

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := S_ODT(T_NO := "Timer_1",
S := "Tag_1",
TV := "Tag_Number",
R := "Tag_Reset",
Q := "Tag_Status",
BI := "Tag_Value");

Cuando el estado l√≥gico del operando "Tag_1" cambia de "0" a "1", el temporizador "Timer_1"
se pone en marcha. El temporizador cuenta el tiempo "Tag_Number" mientras el estado l√≥gico
del operando "Tag_1" sea "1".
Si el tiempo ha transcurrido correctamente y el operando "Tag_Status" presenta el estado
l√≥gico "1", el operando "Tag_Status" se pone a "1". Si el estado l√≥gico del operando "Tag_1"
cambia de "1" a "0" mientras el temporizador est√° contando, este se detiene. El operando
"Tag_Status" devuelve en ese caso el estado l√≥gico "0".
El valor actual de tiempo se guarda en c√≥digo dual en el operando "Tag_Value" y se devuelve
como valor de funci√≥n.

5566

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
L: Cargar valor del temporizador (P√°gina 5383)
Principios b√°sicos de SCL (P√°gina 8115)

S_ODTS: Parametrizar y arrancar temporizador como retardo a la conexi√≥n con memoria
Descripci√≥n
La instrucci√≥n "Parametrizar y arrancar temporizador como retardo a la conexi√≥n con
memoria" arranca el temporizador programado cuando se detecta un flanco de se√±al
ascendente en el par√°metro S. El temporizador deja de contar el tiempo programado TV
aunque el estado l√≥gico del par√°metro S cambie a "0".
Una vez transcurrido el tiempo, el par√°metro Q devuelve el estado l√≥gico "1"
independientemente del estado l√≥gico del par√°metro S. Si el estado l√≥gico del par√°metro S
cambia de "0" a "1" mientras el temporizador est√° contando, el temporizador se inicia de nuevo
con el tiempo programado TV.
El tiempo se compone internamente de un valor de tiempo y una base de tiempo y se programa
en el par√°metro TV. Cuando se inicia la instrucci√≥n, el valor de tiempo programado se cuenta
hacia atr√°s hasta cero. La base de tiempo indica con qu√© periodo de tiempo se modifica el valor
de tiempo. El valor actual de tiempo se deposita en el par√°metro BI.
El estado l√≥gico "1" del par√°metro R pone a "0" el valor actual de tiempo y la base de tiempo,
independientemente del estado l√≥gico del par√°metro S. En este caso, el estado l√≥gico del
par√°metro Q es "0".
Los datos de la instrucci√≥n se actualizan con cada acceso. Por este motivo es posible que una
consulta de datos al principio del ciclo devuelva valores diferentes en comparaci√≥n con el fin
del ciclo.
Nota
En la c√©lula de temporizaci√≥n, el sistema operativo reduce el valor de tiempo en una unidad
respectivamente, y en un intervalo definido por la base de tiempo, hasta que el valor de tiempo
sea "0". La reducci√≥n se realiza de modo as√≠ncrono respecto al programa de usuario. De este
modo el tiempo resultante es menor que el valor de tiempo deseado, como m√°ximo hasta un
intervalo de la base de tiempo.
Encontrar√° un ejemplo de la estructura de una c√©lula de temporizaci√≥n en: Consulte tambi√©n
"L: Cargar valor del temporizador".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5567

Instrucciones
4.2 Instrucciones

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

T_NO

Input

TIMER, INT

T

Temporizador que arranca.
El n√∫mero de temporizado‚Äê
res depende de la CPU.

S

Input

BOOL

I, Q, M, D, L

Entrada de arranque

TV

Input

S5TIME, WORD

I, Q, M, D, L

Valor de tiempo predetermi‚Äê
nado

R

Input

BOOL

I, Q, M, D, L, P

Entrada de reset

Q

Output

BOOL

I, Q, M, D, L, P

Estado del temporizador

BI

Output

WORD

I, Q, M, D, L, P

Valor actual de tiempo en c√≥‚Äê
digo dual

S5TIME

I, Q, M, D, L

Valor de tiempo actual

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Cronograma de impulsos
La imagen siguiente muestra el cronograma de impulsos de la instrucci√≥n "Parametrizar y
arrancar temporizador como retardo a la conexi√≥n con memoria":
W

W

W

W

5/2HQODHQWUDGD6

5/2HQODHQWUDGD5

(OWLHPSRWUDQVFXUUH

&RQVXOWD‡≤Ø‡≤Ø
&RQVXOWD‡≤Ø‡≤Ø
W WLHPSRSURJUDPDGR

5568

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := S_ODTS(T_NO := "Timer_1",
S := "Tag_1",
TV := "Tag_Number",
R := "Tag_Reset",
Q := "Tag_Status",
BI := "Tag_Value");

Cuando el estado l√≥gico del operando "Tag_1" cambia de "0" a "1", el temporizador "Timer_1"
se pone en marcha. El temporizador cuenta el tiempo "Tag_Number".
Una vez transcurrido el tiempo, el operando "Tag_Status" devuelve el estado l√≥gico "1"
independientemente del estado l√≥gico del operando "Tag_1". Si el estado l√≥gico del operando
"Tag_1" cambia de "0" a "1" mientras el temporizador est√° contando, el temporizador se inicia
de nuevo con el tiempo "Tag_Number".
El valor actual de tiempo se guarda en c√≥digo dual en el operando "Tag_Value" y se devuelve
como valor de funci√≥n.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
L: Cargar valor del temporizador (P√°gina 5383)
Principios b√°sicos de SCL (P√°gina 8115)

S_OFFDT: Parametrizar y arrancar temporizador como retardo a la desconexi√≥n
Descripci√≥n
La instrucci√≥n "Parametrizar y arrancar temporizador como retardo a la desconexi√≥n" arranca
el temporizador programado cuando se detecta un flanco de se√±al descendente en el
par√°metro S. El temporizador cuenta el tiempo programado TV. Mientras el temporizador est√°
contando o el par√°metro S devuelve el estado l√≥gico "1", el par√°metro Q presenta el estado
l√≥gico "1".
Si el tiempo ha transcurrido y el estado l√≥gico es "0", el par√°metro Q adopta el valor l√≥gico "0".
Si el estado l√≥gico del par√°metro S cambia de "0" a "1" mientras el temporizador est√° en
marcha, este se detiene. El temporizador solo arranca de nuevo cuando se detecta un flanco
de se√±al descendente en el par√°metro S.
El tiempo se compone internamente de un valor de tiempo y una base de tiempo y se programa
en el par√°metro TV. Cuando se inicia la instrucci√≥n, el valor de tiempo programado se cuenta
hacia atr√°s hasta cero. La base de tiempo indica con qu√© periodo de tiempo se modifica el valor
de tiempo. El valor actual de tiempo se deposita en el par√°metro BI.
El estado l√≥gico "1" del par√°metro R pone a "0" el valor actual de tiempo y la base de tiempo.
En este caso, el estado l√≥gico del par√°metro Q es "0".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5569

Instrucciones
4.2 Instrucciones
Los datos de la instrucci√≥n se actualizan con cada acceso. Por este motivo es posible que una
consulta de datos al principio del ciclo devuelva valores diferentes en comparaci√≥n con el fin
del ciclo.
Nota
En la c√©lula de temporizaci√≥n, el sistema operativo reduce el valor de tiempo en una unidad
respectivamente, y en un intervalo definido por la base de tiempo, hasta que el valor de tiempo
sea "0". La reducci√≥n se realiza de modo as√≠ncrono respecto al programa de usuario. De este
modo el tiempo resultante es menor que el valor de tiempo deseado, como m√°ximo hasta un
intervalo de la base de tiempo.
Encontrar√° un ejemplo de la estructura de una c√©lula de temporizaci√≥n en: Consulte tambi√©n
"L: Cargar valor del temporizador".

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

T_NO

Input

TIMER, INT

T

Temporizador que arranca.
El n√∫mero de temporizado‚Äê
res depende de la CPU.

S

Input

BOOL

I, Q, M, D, L

Entrada de arranque

TV

Input

S5TIME, WORD

I, Q, M, D, L

Valor de tiempo predetermi‚Äê
nado

R

Input

BOOL

I, Q, M, D, L, P

Entrada de reset

Q

Output

BOOL

I, Q, M, D, L, P

Estado del temporizador

BI

Output

WORD

I, Q, M, D, L, P

Valor actual de tiempo en c√≥‚Äê
digo dual

S5TIME

I, Q, M, D, L

Valor de tiempo actual

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

5570

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Cronograma de impulsos
La imagen siguiente muestra el cronograma de impulsos de la instrucci√≥n "Parametrizar y
arrancar temporizador como retardo a la desconexi√≥n":
W

W

W

W

5/2HQODHQWUDGD6

5/2HQODHQWUDGD5

7HPSRUL]DGRUHQPDUFKD

&RQVXOWD

&RQVXOWD
W WLHPSRSURJUDPDGR

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := S_OFFDT(T_NO := "Timer_1",
S := "Tag_1",
TV := "Tag_Number",
R := "Tag_Reset",
Q := "Tag_Status",
BI := "Tag_Value");

Cuando el estado l√≥gico del operando "Tag_1" cambia de "1" a "0", el temporizador "Timer_1"
arranca. El temporizador cuenta el tiempo "Tag_Number". Mientras el temporizador est√°
contando o el operando "Tag_1" devuelve el estado l√≥gico "1", el operando "Tag_Status"
presenta el estado l√≥gico "1".
Si el tiempo ha transcurrido y el estado l√≥gico del operando "Tag_1" es "0", el operando
"Tag_Status" adopta el valor l√≥gico "0". Si el estado l√≥gico del operando "Tag_1" cambia de "0"
a "1" mientras el temporizador est√° en marcha, el temporizador se reinicia. El temporizador
solo arranca de nuevo cuando se detecta un flanco descendente en el par√°metro S.
El valor actual de tiempo se guarda en c√≥digo dual en el operando "Tag_Value" y se devuelve
como valor de funci√≥n.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5571

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
L: Cargar valor del temporizador (P√°gina 5383)
Principios b√°sicos de SCL (P√°gina 8115)

Contadores
Contadores CEI
CTU: Contador ascendente
Descripci√≥n
La instrucci√≥n "Contador ascendente" incrementa el valor del par√°metro CV. Cuando el estado
l√≥gico del par√°metro CU cambia de "0" a "1" (flanco de se√±al ascendente), se ejecuta la
instrucci√≥n y el valor de contaje actual del par√°metro CV se incrementa en uno. El valor de
contaje se incrementa cada vez que se detecta un flanco de se√±al ascendente, hasta alcanzar
el valor l√≠mite superior del tipo de datos (INT). Cuando se alcanza el valor l√≠mite superior, el
estado l√≥gico del par√°metro CU deja de tener efecto en la instrucci√≥n.
El estado del contador se puede consultar en el par√°metro Q. El estado l√≥gico del par√°metro
Q es determinado por el par√°metro PV. Si el valor de contaje actual es mayor o igual al valor
del par√°metro PV, el par√°metro Q adopta el estado l√≥gico "1". En los restantes casos, el estado
l√≥gico del par√°metro Q es "0". En el par√°metro PV tambi√©n se puede indicar una constante.
El valor del par√°metro CV se pone a cero cuando el estado l√≥gico del par√°metro R cambia a
"1". Mientras el par√°metro R tenga el estado l√≥gico "1", el estado l√≥gico del par√°metro CU no
tendr√° efecto alguno en la instrucci√≥n.
Nota
Utilice el contador en una sola posici√≥n del programa para evitar fallos de contaje.
A cada llamada de la instrucci√≥n "Contador ascendente" debe asign√°rsele un contador CEI, en
el que se guarden los datos de la instrucci√≥n. Un contador CEI se declara del siguiente modo:
‚óè Declaraci√≥n de un bloque de datos del tipo CTU (p. ej., "CTU_DB")
‚óè Declaraci√≥n como variable local del tipo CTU en la secci√≥n "Static" de un bloque (p. ej.,
#MyCTU_COUNTER)
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si el contador CEI se deposita en un bloque de
datos propio (instancia individual), o bien como variable local (multiinstancia) en la interfaz del
bloque. Si crea un bloque de datos propio, lo encontrar√° en el √°rbol del proyecto, en "Bloques
de programa > Bloques de sistema", carpeta "Recursos de programa", . Encontrar√° m√°s
informaci√≥n al respecto en "Consulte tambi√©n".
El sistema operativo inicializa las instancias de la instrucci√≥n "Contador ascendente" cuando
se realiza un arranque en fr√≠o. Si deben inicializarse instancias de la instrucci√≥n tras un

5572

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
rearranque completo (en caliente), las instancias por inicializar deben llamarse en un OB de
arranque con el valor "1" en el par√°metro R de la instrucci√≥n. Si un bloque diferente contiene
instancias de la instrucci√≥n "Contador ascendente", estas pueden resetearse p. ej.
inicializando el bloque de nivel superior.

Contador CEI como bloque de datos del tipo de datos de sistema IEC_<Nombre_del_contador> (Shared
DB)
Un contador CEI se puede declarar como bloque de datos del modo siguiente:
<IEC_contador_DB>.CTU();

Contador CEI como variable local de la interfaz del bloque (multiinstancia)
El contador CEI se puede declarar como variable local del modo siguiente:
#myLocal_Counter();

Sintaxis
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

CU

Input

BOOL

I, Q, M, D, L

Entrada de contaje

R

Input

BOOL

I, Q, M, D, L, P

Entrada de reset

PV

Input

INT

I, Q, M, D, L, P

Valor con el que se activa la
salida Q.

Q

Output

BOOL

I, Q, M, D, L

Estado del contador

CV

Output

INT

I, Q, M, D, L, P

Valor de contaje actual

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"CTU_DB".CTU(CU := "Tag_Start",
R := "Tag_Reset",
PV := "Tag_PresetValue",
Q => "Tag_Status",
CV => "Tag_CounterValue");

Cuando el estado l√≥gico del operando "Tag_Start" cambia de "0" a "1", se ejecuta la instrucci√≥n
"Contador ascendente" y el valor de contaje actual del operando "Tag_CounterValue" se
incrementa en uno. Con cada flanco de se√±al ascendente posterior, el valor de contaje ir√°
incrementando hasta alcanzar el valor l√≠mite superior del tipo de datos (INT = 32767).
La salida "Tag_Status" devuelve el estado l√≥gico "1" mientras el valor de contaje actual sea
mayor o igual que el valor del operando "Tag_PresetValue". En todos los dem√°s casos, la
salida "Tag_Status" devuelve el estado l√≥gico "0". El valor de contaje actual se guarda en el
operando "Tag_CounterValue".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5573

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Instancias (P√°gina 61)
Principios b√°sicos de SCL (P√°gina 8115)

CTD: Contador descendente
Descripci√≥n
La instrucci√≥n "Contador descendente" decrementa el valor del par√°metro CV. Cuando el
estado l√≥gico del par√°metro CD cambia de "0" a "1" (flanco de se√±al ascendente), se ejecuta
la instrucci√≥n y el valor de contaje actual del par√°metro CV se decrementa en uno. Cada vez
que se detecta un flanco de se√±al ascendente, el valor de contaje se decrementa hasta
alcanzar el valor l√≠mite inferior del tipo de datos (INT) indicado. Cuando se alcanza el valor
l√≠mite inferior, el estado l√≥gico del par√°metro CD deja de tener efecto en la instrucci√≥n.
El estado del contador se puede consultar en el par√°metro Q. Si el valor de contaje actual es
menor o igual a cero, el par√°metro Q adopta el estado l√≥gico "1". En los restantes casos, el
estado l√≥gico del par√°metro Q es "0".
El valor del par√°metro CV se pone al valor del par√°metro PV cuando el estado l√≥gico del
par√°metro LD cambia a "1". Mientras el par√°metro LD tenga el estado l√≥gico "1", el estado
l√≥gico del par√°metro CD no tendr√° efecto alguno en la instrucci√≥n.
Nota
Utilice el contador en una sola posici√≥n del programa para evitar fallos de contaje.
A cada llamada de la instrucci√≥n "Contador descendente" debe asign√°rsele un contador CEI,
en el que se guarden los datos de la instrucci√≥n. Un contador CEI se declara del siguiente
modo:
‚óè Declaraci√≥n de un bloque de datos del tipo CTD (p. ej., "CTD_DB")
‚óè Declaraci√≥n como variable local del tipo CTD en la secci√≥n "Static" de un bloque (p. ej.,
#MyCTD_COUNTER)
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si el contador CEI se deposita en un bloque de
datos propio (instancia individual), o bien como variable local (multiinstancia) en la interfaz del
bloque. Si crea un bloque de datos propio, lo encontrar√° en el √°rbol del proyecto, en "Bloques
de programa > Bloques de sistema", carpeta "Recursos de programa", . Encontrar√° m√°s
informaci√≥n al respecto en "Consulte tambi√©n".
El sistema operativo inicializa las instancias de la instrucci√≥n "Contador descendente" cuando
se realiza un arranque en fr√≠o. Si deben inicializarse instancias de la instrucci√≥n tras un
rearranque completo (en caliente), las instancias por inicializar deben llamarse en un OB de
arranque con el valor "1" en el par√°metro LD de la instrucci√≥n. En el par√°metro PV se indica en
este caso el valor inicial deseado para el par√°metro CV. Si un bloque diferente contiene
instancias de la instrucci√≥n "Contador descendente", estas pueden resetearse p. ej.
inicializando el bloque de nivel superior.

5574

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Contador CEI como bloque de datos del tipo de datos de sistema IEC_<Nombre_del_contador> (Shared
DB)
Un contador CEI se puede declarar como bloque de datos del modo siguiente:
<IEC_Nombre_del_contador_DB>.CTD();

Contador CEI como variable local de la interfaz del bloque (multiinstancia)
El contador CEI se puede declarar como variable local del modo siguiente:
#myLocal_Counter();

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

CD

Input

BOOL

I, Q, M, D, L

Entrada de contaje

LD

Input

BOOL

I, Q, M, D, L, P

Entrada de carga

PV

Input

INT

I, Q, M, D, L, P

Valor al que se pone la salida
CV cuando LD = 1.

Q

Output

BOOL

I, Q, M, D, L

Estado del contador

CV

Output

INT

I, Q, M, D, L, P

Valor de contaje actual

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"CTD_DB".CTD(CD := "Tag_Start",
LD := "Tag_Load",
PV := "Tag_PresetValue",
Q => "Tag_Status",
CV => "Tag_CounterValue");

Cuando el estado l√≥gico del operando "Tag_Start" cambia de "0" a "1", la instrucci√≥n "Contador
descendente" se ejecuta y el valor del operando "Tag_CounterValue" se decrementa en uno.
Con cada flanco de se√±al ascendente posterior, el valor de contaje ir√° decrementando hasta
alcanzar el valor l√≠mite inferior del tipo de datos (INT = -32768).
El operando "Tag_Status" devuelve el estado l√≥gico "1" mientras el valor del contador actual
sea menor o igual a cero. En todos los dem√°s casos, la salida "Tag_Status" devuelve el estado
l√≥gico "0". El valor de contaje actual se guarda en el operando "Tag_CounterValue".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5575

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Instancias (P√°gina 61)
Principios b√°sicos de SCL (P√°gina 8115)

CTUD: Contador ascendente - descendente
Descripci√≥n
La instrucci√≥n "Contador ascendente - descendente" incrementa y decrementa el valor de
contaje del par√°metro CV. Cuando el estado l√≥gico del par√°metro CU cambia de "0" a "1"
(flanco de se√±al ascendente), el valor de contaje actual del par√°metro CV se incrementa en
uno. Cuando el estado l√≥gico del par√°metro CD cambia de "0" a "1" (flanco de se√±al
ascendente), el valor de contaje del par√°metro CV se decrementa en uno. Si en un ciclo del
programa se detecta un flanco de se√±al ascendente en las entradas CU y CD, el valor de
contaje actual no cambia en el par√°metro CV.
El valor de contaje se puede seguir incrementando hasta alcanzar el valor l√≠mite superior del
tipo de datos indicado (INT). Una vez alcanzado el valor l√≠mite superior, el valor de contaje ya
no se incrementa al detectarse un flanco de se√±al ascendente. Cuando se alcanza el valor
l√≠mite inferior del tipo de datos indicado (INT), ya no se decrementa el valor de contaje.
Cuando el estado l√≥gico del par√°metro LD cambia a "1", el valor de contaje del par√°metro CV
se pone al valor del par√°metro PV. Mientras el par√°metro LD tenga el estado l√≥gico "1", el
estado l√≥gico de los par√°metros CU y CD no tendr√° efecto alguno en la instrucci√≥n.
El valor de contaje se pone a cero cuando el estado l√≥gico del par√°metro R cambia a "1".
Mientras el par√°metro R tenga el estado l√≥gico "1", un cambio del estado l√≥gico de los
par√°metros CU, CD y LD no tendr√° efecto alguno en la instrucci√≥n "Contador ascendente descendente".
El estado del contador ascendente se puede consultar en el par√°metro QU. Si el valor de
contaje actual es mayor o igual al valor del par√°metro PV, el par√°metro QU adopta el estado
l√≥gico "1". En los restantes casos, el estado l√≥gico del par√°metro QU es "0". En el par√°metro
PV tambi√©n se puede indicar una constante.
El estado del contador descendente se puede consultar en el par√°metro QD. Si el valor de
contaje actual es menor o igual a cero, el par√°metro QD adopta el estado l√≥gico "1". En los
restantes casos, el estado l√≥gico del par√°metro QD es "0".
Nota
Utilice el contador en una sola posici√≥n del programa para evitar fallos de contaje.
A cada llamada de la instrucci√≥n "Contador ascendente - descendente" debe asign√°rsele un
contador CEI en el que se guarden los datos de la instrucci√≥n. Un contador CEI se declara del
siguiente modo:
‚óè Declaraci√≥n de un bloque de datos del tipo CTUD (p. ej., "CTUD_DB")
‚óè Declaraci√≥n como variable local del tipo CTUD en la secci√≥n "Static" de un bloque (p. ej.,
#MyCTUD_COUNTER)

5576

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si el contador CEI se deposita en un bloque de
datos propio (instancia individual), o bien como variable local (multiinstancia) en la interfaz del
bloque. Si crea un bloque de datos propio, lo encontrar√° en el √°rbol del proyecto, en "Bloques
de programa > Bloques de sistema", carpeta "Recursos de programa", . Encontrar√° m√°s
informaci√≥n al respecto en "Consulte tambi√©n".
El sistema operativo inicializa las instancias de la instrucci√≥n "Contador ascendente descendente" cuando se realiza un arranque en fr√≠o. Si deben inicializarse instancias tras un
rearranque completo (en caliente), las instancias por inicializar deben llamarse en un OB de
arranque con los siguientes valores de par√°metros:
‚óè Si se utiliza como contador ascendente, el valor del par√°metro R debe ponerse a "1".
‚óè Si se utiliza como contador descendente, el valor del par√°metro LD debe ponerse a "1". En
el par√°metro PV debe indicarse en este caso el valor inicial deseado del par√°metro CV.
Si un bloque diferente contiene instancias de la instrucci√≥n "Contador ascendente descendente", estas pueden resetearse p. ej. inicializando el bloque de nivel superior.

Contador CEI como bloque de datos del tipo de datos de sistema IEC_<Nombre_del_contador> (Shared
DB)
Un contador CEI se puede declarar como bloque de datos del modo siguiente:
<IEC_Nombre_del_contador_DB>.CTUD();

Contador CEI como variable local de la interfaz del bloque (multiinstancia)
El contador CEI se puede declarar como variable local del modo siguiente:
#myLocal_Counter();

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

CU

Input

BOOL

I, Q, M, D, L

Entrada de contaje ascen‚Äê
dente

CD

Input

BOOL

I, Q, M, D, L

Entrada de contaje descen‚Äê
dente

R

Input

BOOL

I, Q, M, D, L, P

Entrada de reset

LD

Input

BOOL

I, Q, M, D, L, P

Entrada de carga

PV

Input

INT

I, Q, M, D, L, P

Valor con el que se activa la
salida QU. / Valor al que se
pone la salida CV cuando LD
= 1.

QU

Output

BOOL

I, Q, M, D, L

Estado del contador ascen‚Äê
dente

QD

Output

BOOL

I, Q, M, D, L

Estado del contador descen‚Äê
dente

CV

Output

INT

I, Q, M, D, L, P

Valor de contaje actual

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5577

Instrucciones
4.2 Instrucciones
Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"CTUD_DB".CTUD(CU := "Tag_Start1",
CD := "Tag_Start2",
LD := "Tag_Load",
R := "Tag_Reset",
PV := "Tag_PresetValue",
QU => "Tag_CU_Status",
QD => "Tag_CD_Status",
CV => "Tag_CounterValue");

Cuando se detecta un flanco de se√±al ascendente en el estado l√≥gico del operando
"Tag_Start1", el valor actual del contador se incrementa en uno y se deposita en el operando
"Tag_CounterValue". Cuando se detecta un flanco de se√±al ascendente en el estado l√≥gico del
operando "Tag_Start2", el valor del contador se decrementa en uno y se deposita tambi√©n en
el operando "Tag_CounterValue". Cuando se detecta un flanco de se√±al ascendente en el
par√°metro CU el valor del contador va incrementando hasta alcanzar el valor l√≠mite superior
hasta alcanzar el valor l√≠mite de 32 767. Cuando se detecta un flanco de se√±al ascendente en
el par√°metro CD el valor de contaje se sigue decrementando hasta alcanzar el valor l√≠mite
inferior de INT = -32 768.
El operando "Tag_CU_Status" devuelve el estado l√≥gico "1" mientras el valor de contaje actual
sea mayor o igual al valor del operando "Tag_PresetValue". En todos los dem√°s casos, la
salida "Tag_CU_Status" devuelve el estado l√≥gico "0".
El operando "Tag_CD_Status" devuelve el estado l√≥gico "1" mientras el valor del contador
actual sea menor o igual a cero. En todos los dem√°s casos, la salida "Tag_CD_Status"
devuelve el estado l√≥gico "0".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Instancias (P√°gina 61)
Principios b√°sicos de SCL (P√°gina 8115)

5578

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Contadores SIMATIC
S_CU: Parametrizar e incrementar contador
Descripci√≥n
La instrucci√≥n "Parametrizar e incrementar contador" permite incrementar el valor de un
contador. Si el estado l√≥gico del par√°metro CU cambia de "0" a "1" (flanco de se√±al
ascendente), el valor de contaje actual se incrementa en uno. El valor de contaje actual se
deposita en el par√°metro CV. El valor de contaje sigue incrementando hasta alcanzar el l√≠mite
de "999". Una vez alcanzado el valor l√≠mite, el valor de contaje no se incrementa m√°s aunque
se detecte un flanco de se√±al ascendente.
Cuando el estado l√≥gico del par√°metro S cambia de "0" a "1", el valor de contaje adopta el valor
del par√°metro PV. Si el contador se activa y el resultado l√≥gico (RLO) de la entrada CU es "1",
el contador cuenta una √∫nica vez en el ciclo siguiente aunque no se detecte ning√∫n cambio de
flanco.
El valor de contaje se pone a cero cuando el estado l√≥gico del par√°metro R cambia a "1".
Mientras el estado l√≥gico del par√°metro R sea "1", un cambio en el estado l√≥gico de los
par√°metros CU y S no tiene ning√∫n efecto sobre el valor de contaje.
El estado l√≥gico del par√°metro Q es "1" si el valor de contaje es mayor que cero. Si el valor de
contaje es igual a cero, el par√°metro Q devuelve el estado l√≥gico "0".
Nota
Utilice el contador en una sola posici√≥n del programa para evitar fallos de contaje.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

C_NO

Input

COUNTER, INT

C

Contadores
La cantidad de contadores
depende de la CPU

CU

Input

BOOL

I, Q, M, D, L

Entrada de contaje ascen‚Äê
dente

S

Input

BOOL

I, Q, M, D, L

Entrada para preajustar el
contador

PV

Input

WORD

I, Q, M, D, L, P

Valor de contaje predetermi‚Äê
nado (C#0 a C#999) en for‚Äê
mato BCD

R

Input

BOOL

I, Q, M, D, L

Entrada de reset

Q

Output

BOOL

I, Q, M, D, L

Estado del contador

CV

Output

WORD

I, Q, M, D, L, P

Valor de contaje actual

WORD

I, Q, M, D, L, P

Valor de contaje actual en
formato BCD

Valor de funci√≥n

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5579

Instrucciones
4.2 Instrucciones
Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := S_CU(C_NO := "Counter_1",
CU := "Tag_Start",
S := "Tag_1",
PV := "Tag_PresetValue",
R := "Tag_Reset",
Q => "Tag_Status",
CV => "Tag_Value");

Cuando el estado l√≥gico del par√°metro "Tag_Start" cambia de "0" a "1" (flanco de se√±al
ascendente) y el valor de contaje actual es menor que "999", este valor se incrementar√° en
uno. Si el estado l√≥gico de la entrada "Tag_1" cambia de "0" a "1", el valor de contaje en formato
BCD se pone al valor del operando "Tag_PresetValue". El valor de contaje se pone a "0" si el
operando "Tag_Reset" tiene el estado l√≥gico "1".
El valor de contaje actual se almacena en formato hexadecimal en el operando "Tag_Value".
La salida "Tag_Status" devuelve el estado l√≥gico "1" mientras el valor de contaje actual sea
diferente a "0". El valor actual de contaje se guarda en el operando "Tag_Value" y se devuelve
como valor de funci√≥n.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

S_CD: Parametrizar y decrementar contador
Descripci√≥n
La instrucci√≥n "Parametrizar y decrementar contador" permite decrementar el valor de un
contador. Si el estado l√≥gico del par√°metro CD cambia de "0" a "1" (flanco de se√±al
ascendente), el valor de contaje se decrementa en uno. El valor de contaje actual se deposita
en el par√°metro CV. El valor de contaje sigue decrementando hasta alcanzar el l√≠mite inferior
"0". Una vez alcanzado el valor l√≠mite, el valor de contaje no se decrementa m√°s al detectarse
un flanco de se√±al ascendente.
Cuando el estado l√≥gico del par√°metro S cambia de "0" a "1", el valor de contaje adopta el valor
del par√°metro PV. Si el contador se activa y el resultado l√≥gico (RLO) del par√°metro CD es "1",
el contador cuenta una √∫nica vez en el ciclo siguiente aunque no se detecte ning√∫n cambio de
flanco.
El valor de contaje se pone a cero cuando el estado l√≥gico del par√°metro R cambia a "1".
Mientras el estado l√≥gico del par√°metro R sea "1", un cambio en el estado l√≥gico de los
par√°metros CD y S no tiene ning√∫n efecto sobre el valor de contaje.

5580

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
El estado l√≥gico del par√°metro Q es "1" si el valor de contaje es mayor que cero. Si el valor de
contaje es igual a cero, el par√°metro Q devuelve el estado l√≥gico "0".
Nota
Utilice el contador en una sola posici√≥n del programa para evitar fallos de contaje.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

C_NO

Input

COUNTER, INT

C

Contadores
El n√∫mero de contadores de‚Äê
pende de la CPU.

CD

Input

BOOL

I, Q, M, D, L

Entrada de contaje descen‚Äê
dente

S

Input

BOOL

I, Q, M, D, L

Entrada para preajustar el
contador

PV

Input

WORD

I, Q, M, D, L, P

Valor de contaje predetermi‚Äê
nado (C#0 a C#999) en for‚Äê
mato BCD

R

Input

BOOL

I, Q, M, D, L

Entrada de reset

Q

Output

BOOL

I, Q, M, D, L

Estado del contador

CV

Output

WORD

I, Q, M, D, L, P

Valor de contaje actual

WORD

I, Q, M, D, L, P

Valor de contaje actual en
formato BCD

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := S_CD(C_NO := "Counter_1",
CD := "Tag_Start",
S := "Tag_1",
PV := "Tag_PresetValue",
R := "Tag_Reset",
Q => "Tag_Status",
CV => "Tag_Value");

Cuando el estado l√≥gico del operando "Tag_Start" cambia de "0" a "1" (flanco de se√±al
ascendente) y el valor de contaje actual es superior a "0", el valor de contaje se decrementa en
uno. Cuando el estado l√≥gico del operando "Tag_1" cambia de "0" a "1", el valor de contaje
adopta el valor del operando "Tag_PresetValue" en formato BCD. El valor de contaje se pone
a "0" si el operando "Tag_Reset" tiene el estado l√≥gico "1".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5581

Instrucciones
4.2 Instrucciones
El valor de contaje actual se almacena en el operando "Tag_Value".
El operando "Tag_Status" devuelve el estado l√≥gico "1" mientras el valor de contaje actual sea
distinto de "0". El valor actual de contaje se guarda en el operando "Tag_Value" y se devuelve
como valor de funci√≥n.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

S_CUD: Parametrizar e incrementar/decrementar contador
Descripci√≥n
La instrucci√≥n "Parametrizar e incrementar/decrementar contador" permite incrementar y
decrementar el valor de un contador. Si el estado l√≥gico del par√°metro CU cambia de "0" a "1"
(flanco de se√±al ascendente), el valor de contaje actual se incrementa en uno. Si el estado
l√≥gico del par√°metro CD cambia de "0" a "1" (flanco de se√±al ascendente), el valor de contaje
se decrementa en uno. El valor de contaje actual se deposita en el par√°metro CV. Si en un ciclo
del programa se detecta un flanco de se√±al ascendente en los par√°metros CU y CD el valor de
contaje permanece invariable.
El valor de contaje sigue incrementando hasta alcanzar el l√≠mite superior "999". Una vez
alcanzado el valor l√≠mite superior, el valor de contaje no se incrementa m√°s aunque se detecte
un flanco de se√±al ascendente. Cuando se alcanza el valor l√≠mite inferior "0", no se decrementa
m√°s el valor de contaje.
Cuando el estado l√≥gico del par√°metro S cambia de "0" a "1", el valor de contaje adopta el valor
del par√°metro PV. Si el contador se activa y el resultado l√≥gico (RLO) de los par√°metros CU y
CD es "1", el contador cuenta una √∫nica vez en el ciclo siguiente aunque no se detecte ning√∫n
cambio de flanco.
El valor de contaje se pone a cero cuando el estado l√≥gico del par√°metro R cambia a "1".
Mientras el par√°metro R tenga el estado l√≥gico "1", el estado l√≥gico de los par√°metros CU, CD
y S no tiene ning√∫n efecto sobre el valor de contaje.
El estado l√≥gico del par√°metro Q es "1" si el valor de contaje es mayor que cero. Si el valor de
contaje es igual a cero, el par√°metro Q devuelve el estado l√≥gico "0".
Nota
Utilice el contador en una sola posici√≥n del programa para evitar fallos de contaje.

5582

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

C_NO

Input

COUNTER, INT

C

Contadores
La cantidad de contadores
depende de la CPU

CU

Input

BOOL

I, Q, M, D, L

Entrada de contaje ascen‚Äê
dente

CD

Input

BOOL

I, Q, M, D, L

Entrada de contaje descen‚Äê
dente

S

Input

BOOL

I, Q, M, D, L

Entrada para preajustar el
contador

PV

Input

WORD

I, Q, M, D, L, P

Valor de contaje predetermi‚Äê
nado (C#0 a C#999) en for‚Äê
mato BCD

R

Input

BOOL

I, Q, M, D, L

Entrada de reset

Q

Output

BOOL

I, Q, M, D, L

Estado del contador

CV

Output

WORD

I, Q, M, D, L, P

Valor de contaje actual (he‚Äê
xadecimal)

WORD

I, Q, M, D, L, P

Valor de contaje actual en
formato BCD

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := S_CUD(C_NO := "Counter_1",
CU := "Tag_CU",
CD := "Tag_CD",
S := "Tag_1",
PV := "Tag_PresetValue",
R := "Tag_Reset",
Q => "Tag_Status",
CV => "Tag_Value");

Cuando se detecta un flanco de se√±al ascendente en el estado l√≥gico del operando "Tag_CU"
y el valor de contaje actual es menor que "999", el valor de contaje se incrementa en uno.
Cuando se detecta un flanco de se√±al ascendente en el estado l√≥gico del operando "Tag_CD"
y el valor de contaje actual es mayor que "0", el valor de contaje se decrementa en uno.
Cuando el estado l√≥gico del operando "Tag_1" cambia de "0" a "1", el valor de contaje adopta
el valor del operando "Tag_PresetValue" en formato BCD. El valor de contaje se pone a "0" si
el operando "Tag_Reset" tiene el estado l√≥gico "1".
El valor de contaje actual se almacena en el operando "Tag_Value".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5583

Instrucciones
4.2 Instrucciones
El operando "Tag_Status" devuelve el estado l√≥gico "1" mientras el valor de contaje actual sea
distinto de "0". El valor actual de contaje se guarda en el operando "Tag_Value" y se devuelve
como valor de funci√≥n.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

Funciones matem√°ticas
ABS: Calcular valor absoluto
Descripci√≥n
La instrucci√≥n "Calcular valor absoluto" permite calcular el valor absoluto de un valor de
entrada y guardar el resultado en el operando indicado.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Expresi√≥n>

Input

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

Valor de entrada

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

Valor absoluto del valor de
entrada

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result1" := ABS("Tag_Value");
"Tag_Result2" := ABS("Tag_Value1"*"Tag_Value2");

El valor absoluto del valor de entrada se devuelve en el formato del valor de entrada como valor
de funci√≥n.
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:

5584

Operando

Valor

Tag_Value

-2

Tag_Result1

2

Tag_Value1

4

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Operando

Valor

Tag_Value2

-1

Tag_Result2

4

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

MIN: Determinar m√≠nimo
Descripci√≥n
Con la instrucci√≥n "Determinar m√≠nimo" se comparan los valores de las entradas indicadas y
se devuelve el menor como resultado. Para poder ejecutar la instrucci√≥n, es imprescindible
que las variables de todas las entradas sean del mismo tipo de datos.
Para la ejecuci√≥n de la instrucci√≥n se pueden indicar como m√≠nimo dos y como m√°ximo 32
entradas.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN1

Input

Enteros, n√∫meros
en coma flotante,
TIME, DATE, DT

I, Q, M, D, L, P

Primer valor de entrada

IN2

Input

Enteros, n√∫meros
en coma flotante,
TIME, DATE, DT

I, Q, M, D, L, P

Segundo valor de entrada

INn

Input

Enteros, n√∫meros
en coma flotante,
TIME, DATE, DT

I, Q, M, D, L, P

Entradas insertadas adicio‚Äê
nalmente cuyos valores se
comparan

Enteros, n√∫meros
en coma flotante,
TIME, DATE, DT

I, Q, M, D, L, P

Resultado de la instrucci√≥n

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := MIN(IN1 := "Tag_Value1",
IN2 := "Tag_Value2",
IN3 := "Tag_Value3");

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5585

Instrucciones
4.2 Instrucciones
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Par√°metro

Operando

Valor

IN1

Tag_Value1

12222

IN2

Tag_Value2

14444

IN3

Tag_Value3

13333

Valor de funci√≥n

Tag_Result

12222

La instrucci√≥n compara los valores de los operandos indicados y copia el valor menor
("Tag_Value1") en el operando "Tag_Result".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

MAX: Determinar m√°ximo
Descripci√≥n
Con la instrucci√≥n "Determinar m√°ximo" se comparan los valores de las entradas indicadas y
se devuelve el mayor como resultado. Para poder ejecutar la instrucci√≥n, es imprescindible
que las variables de todas las entradas sean del mismo tipo de datos.
Para la ejecuci√≥n de la instrucci√≥n se pueden indicar como m√≠nimo dos y como m√°ximo 32
entradas.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN1

Input

Enteros, n√∫meros
en coma flotante,
TIME, DATE, DT

I, Q, M, D, L, P

Primer valor de entrada

IN2

Input

Enteros, n√∫meros
en coma flotante,
TIME, DATE, DT

I, Q, M, D, L, P

Segundo valor de entrada

INn

Input

Enteros, n√∫meros
en coma flotante,
TIME, DATE, DT

I, Q, M, D, L, P

Entradas insertadas adicio‚Äê
nalmente cuyos valores se
comparan

Enteros, n√∫meros
en coma flotante,
TIME, DATE, DT

I, Q, M, D, L, P

Resultado de la instrucci√≥n

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

5586

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := MAX(IN1 := "Tag_Value1",
IN2 := "Tag_Value2",
IN3 := "Tag_Value3");

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Par√°metro

Operando

Valor

IN1

Tag_Value1

12222

IN2

Tag_Value2

14444

IN3

Tag_Value3

13333

Valor de funci√≥n

Tag_Result

14444

La instrucci√≥n compara los valores de los operandos indicados y copia el valor mayor
("Tag_Value2") en el operando "Tag_Result".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

LIMIT: Ajustar valor l√≠mite
Descripci√≥n
La instrucci√≥n "Ajustar valor l√≠mite" limita el valor del par√°metro IN a los valores de los
par√°metros MN y MX. Para ello, el valor del par√°metro MN no puede ser mayor que el valor del
par√°metro MX.
Si el valor del par√°metro IN cumple la condici√≥n MN <= IN <= MX, se devuelve como resultado
de la instrucci√≥n. Si no se cumple la condici√≥n y el valor de entrada IN rebasa por defecto el
l√≠mite inferior MN, se devuelve como resultado el valor del par√°metro MN. Si se rebasa por
exceso el l√≠mite superior MX se devuelve como resultado el valor del par√°metro MX.
Si el valor de la entrada MN es mayor que el de la entrada MX, el resultado no est√° definido.
Para poder ejecutar la instrucci√≥n, es imprescindible que los operandos de todos los
par√°metros sean del mismo tipo de datos.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5587

Instrucciones
4.2 Instrucciones

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

MN

Input

Enteros, n√∫meros
en coma flotante,
TIME, DATE, DT

I, Q, M, D, L, P

L√≠mite inferior

IN

Input

Enteros, n√∫meros
en coma flotante,
TIME, DATE, DT

I, Q, M, D, L, P

Valor de entrada

MX

Input

Enteros, n√∫meros
en coma flotante,
TIME, DATE, DT

I, Q, M, D, L, P

L√≠mite superior

Enteros, n√∫meros
en coma flotante,
TIME, DATE, DT

I, Q, M, D, L, P

Resultado de la instrucci√≥n

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := LIMIT(MN := "Tag_Minimum",
IN := "Tag_Value",
MX := "Tag_Maximum");

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Par√°metro

Operando

Valor

MN

Tag_Minimum

12000

IN

Tag_Value

8000

MX

Tag_Maximum

16000

Valor de funci√≥n

Tag_Result

12000

El valor del operando "Tag_Value" se compara con los valores de los operandos
"Tag_Minimum" y "Tag_Maximum". Puesto que el valor del operando "Tag_Value" es menor
que el valor l√≠mite inferior, el valor del operando "Tag_Minimum" se copia en el operando
"Tag_Result".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

5588

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

SQR: Calcular cuadrado
Descripci√≥n
La instrucci√≥n "Calcular cuadrado" permite elevar al cuadrado el valor de entrada y guardar el
resultado en el operando indicado.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Expresi√≥n>

Input

N√∫meros en coma
flotante

I, Q, M, D, L, P

Valor de entrada

N√∫meros en coma
flotante

I, Q, M, D, L, P

Cuadrado del valor de entra‚Äê
da

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result1" := SQR("Tag_Value");
"Tag_Result2" := SQR((SQR("Tag_Value1"))*"Tag_Value2");

El cuadrado del valor de entrada se devuelve en el operando "Tag_Resultxy" como valor de
funci√≥n.
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Value

2.5

Tag_Result1

6.25

Tag_Value1

6.0

Tag_Value2

2.0

Tag_Result2

5184.0

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5589

Instrucciones
4.2 Instrucciones

SQRT: Calcular ra√≠z cuadrada
Descripci√≥n
La instrucci√≥n "Calcular ra√≠z cuadrada" permite extraer la ra√≠z cuadrada del valor de entrada y
guardar el resultado en el operando indicado. La instrucci√≥n da un resultado positivo si el valor
de entrada es mayor que cero. En los valores de entrada menores que cero, la instrucci√≥n
devuelve un n√∫mero en coma flotante no v√°lido. Si el valor de entrada es "0", el resultado
tambi√©n es "0".

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Expresi√≥n>

Input

N√∫meros en coma
flotante

I, Q, M, D, L, P

Valor de entrada

N√∫meros en coma
flotante

I, Q, M, D, L, P

Ra√≠z cuadrada del valor de
entrada

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result1" := SQRT("Tag_Value");
"Tag_Result2" := SQRT((SQR("Tag_Value1"))+"Tag_Value2");

La ra√≠z cuadrada del valor de entrada se devuelve en el operando "Tag_Resultxy" como valor
de funci√≥n.
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Value

4.0

Tag_Result1

2.0

Tag_Value1

3.0

Tag_Value2

16.0

Tag_Result2

5.0

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

5590

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

LN: Calcular logaritmo natural
Descripci√≥n
La instrucci√≥n "Calcular logaritmo natural" permite calcular el logaritmo natural en base e (e =
2,718282) a partir del valor de entrada. La instrucci√≥n da un resultado positivo si el valor de
entrada es mayor que cero. En los valores de entrada menores que cero, la instrucci√≥n
devuelve un n√∫mero en coma flotante no v√°lido.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Expresi√≥n>

Input

N√∫meros en coma
flotante

I, Q, M, D, L, P

Valor de entrada

N√∫meros en coma
flotante

I, Q, M, D, L, P

Logaritmo natural del valor
de entrada

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result1" := LN("Tag_Value");
"Tag_Result2" := LN("Tag_Value1"+"Tag_Value2");

El resultado de la instrucci√≥n se devuelve en el operando "Tag_Resultxy" como valor de
funci√≥n.
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Value

2.5

Tag_Result1

0.916

Tag_Value1

1.5

Tag_Value2

3.2

Tag_Result2

1.548

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5591

Instrucciones
4.2 Instrucciones

EXP: Calcular valor exponencial
Descripci√≥n
La instrucci√≥n "Calcular valor exponencial" permite calcular la potencia en base e (e =
2,718282) a partir del valor de entrada y guardar el resultado en el operando indicado.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Expresi√≥n>

Input

N√∫meros en coma
flotante

I, Q, M, D, L, P

Valor de entrada

N√∫meros en coma
flotante

I, Q, M, D, L, P

Valor exponencial del valor
de entrada

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result1" := EXP("Tag_Value");
"Tag_Result2" := EXP("Tag_Value1"/"Tag_Value2");

El resultado de la instrucci√≥n se devuelve en el operando "Tag_Resultxy" como valor de
funci√≥n.
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Value

20.5

Tag_Result1

799 902 200

Tag_Value1

15.5

Tag_Value2

30.2

Tag_Result2

1.671

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

5592

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

SIN: Calcular valor de seno
Descripci√≥n
La instrucci√≥n "Calcular valor de seno" permite calcular el seno del valor de entrada. El valor
de entrada se ha de indicar en radianes.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Expresi√≥n>

Input

N√∫meros en coma
flotante

I, Q, M, D, L, P

Valor de entrada (tama√±o de
un √°ngulo en radianes)

N√∫meros en coma
flotante

I, Q, M, D, L, P

Resultado de la instrucci√≥n

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := SIN("Tag_Value");

El resultado de la instrucci√≥n se devuelve en el operando "Tag_Result" como valor de funci√≥n.
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Value

+1.570796 (œÄ/2)

Tag_Result

1.0

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

COS: Calcular valor de coseno
Descripci√≥n
La instrucci√≥n "Calcular valor de coseno" permite calcular el coseno del valor de entrada. El
valor de entrada se ha de indicar en radianes.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5593

Instrucciones
4.2 Instrucciones

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Expresi√≥n>

Input

N√∫meros en coma
flotante

I, Q, M, D, L, P

Valor de entrada (tama√±o de
un √°ngulo en radianes)

N√∫meros en coma
flotante

I, Q, M, D, L, P

Resultado de la instrucci√≥n

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := COS("Tag_Value");

El resultado de la instrucci√≥n se devuelve en el operando "Tag_Result" como valor de funci√≥n.
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Value

+1.570796 (œÄ/2)

Tag_Result

0

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

TAN: Calcular valor de tangente
Descripci√≥n
La instrucci√≥n "Calcular valor de tangente" permite calcular la tangente del valor de entrada. El
valor de entrada se ha de indicar en radianes.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Expresi√≥n>

Input

N√∫meros en coma
flotante

I, Q, M, D, L, P

Valor de entrada (tama√±o de
un √°ngulo en radianes)

N√∫meros en coma
flotante

I, Q, M, D, L, P

Resultado de la instrucci√≥n

Valor de funci√≥n

5594

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := TAN("Tag_Value");

El resultado de la instrucci√≥n se devuelve en el operando "Tag_Result" como valor de funci√≥n.
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Value

+3.141593 (œÄ)

Tag_Result

0

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

ASIN: Calcular valor de arcoseno
Descripci√≥n
La instrucci√≥n "Calcular valor de arcoseno" permite calcular a partir del valor de seno el tama√±o
del √°ngulo que equivale a este valor. Como valores de entrada solo se pueden indicar n√∫meros
en coma flotante v√°lidos, comprendidos en un rango de valores entre -1 y +1. El tama√±o del
√°ngulo calculado se devuelve en radianes y puede estar comprendido entre -œÄ/2 y +œÄ/2.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Expresi√≥n>

Input

N√∫meros en coma
flotante

I, Q, M, D, L, P

Valor de seno

N√∫meros en coma
flotante

I, Q, M, D, L, P

Tama√±o del √°ngulo en radia‚Äê
nes

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5595

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := ASIN("Tag_Value");

El resultado de la instrucci√≥n se devuelve en el operando "Tag_Result" como valor de funci√≥n.
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Value

1.0

Tag_Result

+1.570796 (œÄ/2)

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

ACOS: Calcular valor de arcocoseno
Descripci√≥n
La instrucci√≥n "Calcular valor de arcocoseno" permite calcular a partir del valor de coseno el
tama√±o del √°ngulo que equivale a este valor. Como valores de entrada solo se pueden indicar
n√∫meros en coma flotante v√°lidos, comprendidos en un rango de valores entre -1 y +1. El
tama√±o del √°ngulo calculado se devuelve en radianes y puede estar comprendido entre 0 y +œÄ.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Expresi√≥n>

Input

N√∫meros en coma
flotante

I, Q, M, D, L, P

Valor de coseno

N√∫meros en coma
flotante

I, Q, M, D, L, P

Tama√±o del √°ngulo en radia‚Äê
nes

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := ACOS("Tag_Value");

El resultado de la instrucci√≥n se devuelve en el operando "Tag_Result" como valor de funci√≥n.

5596

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Value

0

Tag_Result

+1.570796 (œÄ/2)

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

ATAN: Calcular valor de arcotangente
Descripci√≥n
La instrucci√≥n "Calcular valor de arcotangente" permite calcular a partir del valor de tangente
el tama√±o del √°ngulo que equivale a este valor. Solo se pueden indicar valores de entrada que
sean n√∫meros en coma flotante v√°lidos (o -NaN/+NaN). El tama√±o del √°ngulo calculado se
devuelve en radianes y puede estar comprendido entre -œÄ/2 y +œÄ/2.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Expresi√≥n>

Input

N√∫meros en coma
flotante

I, Q, M, D, L, P

Valor de tangente

N√∫meros en coma
flotante

I, Q, M, D, L, P

Tama√±o del √°ngulo en radia‚Äê
nes

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := ATAN("Tag_Value");

El resultado de la instrucci√≥n se devuelve en el operando "Tag_Result" como valor de funci√≥n.
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Value

1,0

Tag_Result

+0,785398 (œÄ/4)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5597

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
N√∫meros en coma flotante no v√°lidos (P√°gina 263)
Principios b√°sicos de SCL (P√°gina 8115)

Transferencia
BLKMOV: Copiar √°rea
Descripci√≥n
La instrucci√≥n "Copiar √°rea" copia los contenidos de un √°rea de memoria (√°rea de origen) en
un √°rea de memoria diferente (√°rea de destino). La operaci√≥n de copia se realiza por orden
ascendente de direcciones. Las √°reas de origen y destino se definen mediante punteros ANY.
Nota
En esta instrucci√≥n solo se pueden utilizar tipos de datos que sean v√°lidos en una CPU de la
serie S7-300/400.
La figura siguiente muestra el principio de la operaci√≥n de copia:

'%'%:

$

%

'%'%:

&

'

'%'%:

(

)

'%'%:

*

+

0:

$

%

0:

&

'

0:

(

)

0:

*

+

&RSLD
/DRSHUDFL¬µQGHFRSLDVH
UHDOL]DSRURUGHQ
DVFHQGHQWHGH
GLUHFFLRQHV

¬ÉUHDGHPHPRULD

5598

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Coherencia de los datos de origen y destino
Tenga en cuenta que durante la ejecuci√≥n de la instrucci√≥n "Copiar √°rea" no se modifican los
datos de origen pues, de lo contrario, no se podr√≠a garantizar la coherencia de los datos de
destino.

Posibilidad de interrupci√≥n
Mientras el √°rea de origen no forme parte de un bloque de datos que solo figura en la memoria
de carga, no hay limitaciones en cuanto a la profundidad de anidamiento.
Por el contrario, en caso de interrumpirse la ejecuci√≥n de BLKMOV, en la que se copia desde
un DB no relevante para la ejecuci√≥n, no puede anidarse m√°s la ejecuci√≥n de la BLKMOV.

√Åreas de memoria
La instrucci√≥n "Copiar √°rea" copia las siguientes √°reas de memoria:
‚óè √Åreas de un bloque de datos
‚óè Marcas
‚óè Memoria imagen de proceso de las entradas
‚óè Memoria imagen de proceso de las salidas
‚óè Bloques de datos no relevantes para la ejecuci√≥n

Reglas generales para copiar
Las √°reas de origen y destino no deben solaparse. Si las √°reas de origen y destino son de
diferente longitud, se copia solo hasta la longitud del √°rea m√°s peque√±a.
Si el √°rea de origen es m√°s peque√±a que el √°rea de destino, el √°rea de origen se copiar√° por
completo en el √°rea de destino. Los restantes bytes del √°rea de destino permanecen
inalterados.
Si el √°rea de destino es m√°s peque√±a que el √°rea de origen, se escribir√° en toda el √°rea de
destino. Los restantes bytes del √°rea de origen se ignoran.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5599

Instrucciones
4.2 Instrucciones
Al copiar un √°rea del tipo de datos BOOL, la longitud indicada del √°rea debe ser un m√∫ltiplo de
8, pues de lo contrario no se ejecutar√° la instrucci√≥n.
Nota
Si el √°rea de origen o destino realmente existente es menor que el √°rea de origen o destino
indicada en el par√°metro SRCBLK o DSTBLK, el comportamiento depender√° del tipo de CPU:
‚óè Para las CPU S7-300 rige lo siguiente:
No se transfieren datos. En el par√°metro RET_VAL se devuelve el c√≥digo de error
W#16#837F. Este c√≥digo de error debe evaluarse en el programa de usuario.
‚óè Para las CPU V4 del S7-400 (V4, CPU H V4 y CPU H V4.5 se aplica lo siguiente:
No se transfieren datos. En el par√°metro RET_VAL se devuelve el c√≥digo de error
W#16#8122 o W#16#8323. Este c√≥digo de error debe evaluarse en el programa de usuario.
‚óè Para las restantes CPU S7-400 rige:
Se transfieren datos. En el par√°metro RET_VAL se devuelve el c√≥digo de error W#16#8122
o W#16#8323. Este c√≥digo de error debe evaluarse en el programa de usuario.

Reglas para copiar cadenas de caracteres
La instrucci√≥n "Copiar √°rea" copia asimismo √°reas de origen y destino del tipo de datos
STRING. Si solo el √°rea de origen es del tipo de datos STRING, se copiar√°n los caracteres
realmente contenidos en la cadena de caracteres. La informaci√≥n sobre la longitud real y
m√°xima tambi√©n se escribe en el √°rea de destino. Si tanto el √°rea de origen como el √°rea de
destino son del tipo de datos STRING, la longitud actual de la cadena de caracteres en el √°rea
de destino se pone al n√∫mero de caracteres realmente copiados.
Si se desea copiar informaci√≥n sobre la longitud m√°xima y real de una cadena de caracteres,
las √°reas de los par√°metros SRCBLK y DSTBLK deben indicarse en bytes.

Reglas para copiar bloques de datos no relevantes para la ejecuci√≥n
El √°rea de origen tambi√©n puede encontrarse en un bloque de datos no relevante para la
ejecuci√≥n en la memoria de carga. Los bloques de datos no relevantes para la ejecuci√≥n se
identifican con la palabra clave UNLINKED.
Si en la memoria de trabajo se copia un bloque de datos no relevante para la ejecuci√≥n con la
instrucci√≥n "Copiar √°rea" y, al mismo tiempo, este se vuelve a cargar p. ej. desde la
programadora, la ejecuci√≥n de la instrucci√≥n puede retardarse varios milisegundos. Esto
prolonga el ciclo del OB y puede activar la vigilancia del tiempo de ciclo.
Si un bloque de datos no relevante para la ejecuci√≥n se copia con la instrucci√≥n "Copiar √°rea"
y la operaci√≥n de copia se interrumpe, la instrucci√≥n no se podr√° seguir ejecutando.
Si en la CPU existe la instrucci√≥n "Leer de un bloque de datos de la memoria de carga", debe
utilizarse dicha instrucci√≥n para leer los bloques de datos no relevantes para la ejecuci√≥n en
la memoria de carga. Si se utiliza la instrucci√≥n "Copiar √°rea" se emite el error W#16#8092.

5600

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n "Copiar √°rea":
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

SRCBLK

Input

ANY

I, Q, M, D, L, P

Indicaci√≥n del √°rea de memo‚Äê
ria que se copia (√°rea de ori‚Äê
gen).

DSTBLK

Output 1)

ANY

I, Q, M, D, L, P

Indicaci√≥n del √°rea de memo‚Äê
ria en la que se copia (√°rea
de destino).

INT

I, Q, M, D, L, P

Informaci√≥n de error

Valor de funci√≥n (RET_VAL)

1) El par√°metro DSTBLK se declara como Output, pero en la interfaz del bloque debe declararse como
InOut.

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

8092

El √°rea de origen o destino est√° solo en la memoria de carga.

8xyy

Encontrar√° m√°s informaci√≥n de error en "Consulte tambi√©n".

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n en "Consulte
tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_RetVal" := BLKMOV(SRCBLK := P#M100.0 BYTE 10,
DSTBLK => P#DB1.DBX0.0 BYTE 10);

La instrucci√≥n copia 10 bytes a partir de MB100 y los escribe en el DB1. Si ocurre un error
durante la operaci√≥n de copia, el respectivo c√≥digo de error se indica en la variable
"Tag_RetVal".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)
Evaluaci√≥n de errores con el par√°metro de salida RET_VAL (P√°gina 174)
Principios b√°sicos de SCL (P√°gina 8115)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5601

Instrucciones
4.2 Instrucciones

UBLKMOV: Copiar √°rea sin interrupciones
Descripci√≥n
La instrucci√≥n "Copiar √°rea sin interrupciones" copia los contenidos de un √°rea de memoria
(√°rea de origen) en un √°rea de memoria diferente (√°rea de destino). La operaci√≥n de copia se
realiza por orden ascendente de direcciones. Las √°reas de origen y destino se definen
mediante punteros ANY.
La operaci√≥n de copia no debe ser interrumpida por otras actividades del sistema operativo.
Ello puede aumentar el tiempo de reacci√≥n a alarmas de la CPU durante la ejecuci√≥n de la
instrucci√≥n "Copiar √°rea sin interrupciones".
Nota
En esta instrucci√≥n solo se pueden utilizar tipos de datos que sean v√°lidos en una CPU de la
serie S7-300/400.

√Åreas de memoria
La instrucci√≥n "Copiar √°rea sin interrupciones" permite copiar las siguientes √°reas de memoria:
‚óè √Åreas de un bloque de datos
‚óè Marcas
‚óè Memoria imagen de proceso de las entradas
‚óè Memoria imagen de proceso de las salidas

Reglas generales para copiar
Al ejecutar la instrucci√≥n "Copiar √°rea sin interrupciones" no pueden solaparse las √°reas de
origen y destino. Si el √°rea de origen es m√°s peque√±a que el √°rea de destino, el √°rea de origen
se copiar√° por completo en el √°rea de destino. Los restantes bytes del √°rea de destino
permanecen inalterados.
Si el √°rea de destino es m√°s peque√±a que el √°rea de origen, se escribir√° en toda el √°rea de
destino. Los restantes bytes del √°rea de origen se ignoran.
Si un √°rea de origen o destino definida como par√°metro formal es menor que un √°rea de origen
o destino indicada en los par√°metros SRCBLK o DSTBLK, no se transferir√°n datos.
Al copiar un √°rea del tipo de datos BOOL, la longitud indicada del √°rea debe ser un m√∫ltiplo de
8, pues de lo contrario no se ejecutar√° la instrucci√≥n.

5602

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
La instrucci√≥n "Copiar √°rea sin interrupciones" permite copiar 512 bytes como m√°ximo. A este
respecto deben tenerse en cuenta las limitaciones espec√≠ficas de la CPU.
Nota
Si el √°rea de origen o destino realmente existente es menor que el √°rea de origen o destino
indicada en el par√°metro BVAL o BLK, el comportamiento depender√° del tipo de CPU:
‚óè Para las CPU S7-300 rige lo siguiente:
No se transfieren datos. En el par√°metro RET_VAL se devuelve el c√≥digo de error
W#16#837F. Este c√≥digo de error debe evaluarse en el programa de usuario.
‚óè Para las CPU V4 del S7-400 (V4, CPU H V4 y CPU H V4.5 se aplica lo siguiente:
No se transfieren datos. En el par√°metro RET_VAL se devuelve el c√≥digo de error
W#16#8122 o W#16#8323. Este c√≥digo de error debe evaluarse en el programa de usuario.
‚óè Para las restantes CPU S7-400 rige:
Se transfieren datos. En el par√°metro RET_VAL se devuelve el c√≥digo de error W#16#8122
o W#16#8323. Este c√≥digo de error debe evaluarse en el programa de usuario.

Reglas para copiar cadenas de caracteres
La instrucci√≥n "Copiar √°rea sin interrupciones" permite copiar asimismo √°reas de origen y
destino del tipo de datos STRING. Si solo el √°rea de origen es del tipo de datos STRING, se
copiar√°n los caracteres realmente contenidos en la cadena de caracteres. La informaci√≥n
sobre la longitud real y m√°xima no se escribe en el √°rea de destino. Si tanto el √°rea de origen
como el √°rea de destino son del tipo de datos STRING, la longitud actual de la cadena de
caracteres en el √°rea de destino se pone al n√∫mero de caracteres realmente copiados. Si se
copian √°reas del tipo de datos STRING, debe indicarse "1" como longitud del √°rea.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

SRCBLK

Input

ANY

I, Q, M, D, L, P

Indicaci√≥n del √°rea de memo‚Äê
ria que se copia (√°rea de ori‚Äê
gen).

DSTBLK

Output 1)

ANY

I, Q, M, D, L, P

Indicaci√≥n del √°rea de memo‚Äê
ria en la que se copia (√°rea
de destino).

INT

I, Q, M, D, L, P

Informaci√≥n de error

Valor de funci√≥n (RET_VAL)

1) El par√°metro DSTBLK se declara como Output, pero en la interfaz del bloque debe declararse como
InOut.

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5603

Instrucciones
4.2 Instrucciones

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

8091

El √°rea de origen o destino est√° solo en la memoria de carga.

8xyy

Encontrar√° m√°s informaci√≥n de error en "Consulte tambi√©n".

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n en "Consulte
tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_RetVal" := UBLKMOV(SRCBLK := P#M100.0 BYTE 10,
DSTBLK => P#DB1.DBX0.0 BYTE 10);

La instrucci√≥n copia 10 bytes a partir de MB100 y los escribe en el DB1. Si ocurre un error
durante la operaci√≥n de copia, el respectivo c√≥digo de error se indica en la variable
"Tag_RetVal".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)
Evaluaci√≥n de errores con el par√°metro de salida RET_VAL (P√°gina 174)
Principios b√°sicos de SCL (P√°gina 8115)

FILL: Rellenar √°rea
Descripci√≥n
La instrucci√≥n "Rellenar √°rea" rellena un √°rea de memoria (√°rea de destino) con el contenido
de un √°rea de memoria diferente (√°rea de origen). La instrucci√≥n "Rellenar √°rea" copia el
contenido del √°rea de origen en el √°rea de destino hasta que el √°rea de destino quede escrita
por completo. La operaci√≥n de copia se realiza por orden ascendente de direcciones. Las
√°reas de origen y destino se definen mediante punteros ANY.
Nota
En esta instrucci√≥n solo se pueden utilizar tipos de datos que sean v√°lidos en una CPU de la
serie S7-300/400.

5604

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
La figura siguiente muestra el principio de la operaci√≥n de copia:
),//

%9$/

$

%

0:

$

%

0:

&

'

0:

&

'

0:

(

)

0:

(

)

0:

*

+

0:

*

+

0:

$

%

0:

&

'

0:

(

)

0:

*

+

0:

$

%

0:

&

'

0:

%/.

Ejemplo: el contenido del √°rea MW100 a MW118 debe inicializarse con el contenido de las
palabras de marcas MW14 a MW20.

Coherencia de los datos de origen y destino
Tenga en cuenta que al ejecutar la instrucci√≥n "Rellenar √°rea" no se modifican los datos de
origen, pues de lo contrario no se podr√≠a garantizar la coherencia de los datos de destino.

√Åreas de memoria
La instrucci√≥n "Rellenar √°rea" permite copiar las siguientes √°reas de memoria:
‚óè √Åreas de un bloque de datos
‚óè Marcas
‚óè Memoria imagen de proceso de las entradas
‚óè Memoria imagen de proceso de las salidas

Reglas generales para copiar
Las √°reas de origen y destino no deben solaparse. Aunque el √°rea de destino que se debe
inicializar no sea m√∫ltiplo entero de la longitud del par√°metro de entrada BVAL, el √°rea de
destino se rellenar√° igualmente hasta el √∫ltimo byte.
Si el √°rea de destino que se debe preasignar es menor que el √°rea de origen, solo se copian
los datos que caben en el √°rea de destino.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5605

Instrucciones
4.2 Instrucciones
Si el √°rea de origen o destino realmente existente es menor que el tama√±o del √°rea de memoria
parametrizada para el √°rea de origen o destino (par√°metros BVAL, BLK), los datos no se
transfieren.
Si el puntero ANY (origen o destino) es del tipo BOOL, la longitud indicada debe ser divisible
por 8. De lo contrario, la instrucci√≥n no se ejecutar√°.
Si el √°rea de destino es del tipo de datos STRING, la instrucci√≥n escribe la cadena de
caracteres completa, incluida la informaci√≥n de administraci√≥n.
Nota
Si el √°rea de origen o destino realmente existente es menor que el √°rea de origen o destino
indicada en el par√°metro BVAL o BLK, el comportamiento depender√° del tipo de CPU:
‚óè Para las CPU S7-300 rige lo siguiente:
No se transfieren datos. En el par√°metro RET_VAL se devuelve el c√≥digo de error
W#16#837F. Este c√≥digo de error debe evaluarse en el programa de usuario.
‚óè Para las CPU V4 del S7-400 (V4, CPU H V4 y CPU H V4.5 se aplica lo siguiente:
No se transfieren datos. En el par√°metro RET_VAL se devuelve el c√≥digo de error
W#16#8122 o W#16#8323. Este c√≥digo de error debe evaluarse en el programa de usuario.
‚óè Para las restantes CPU S7-400 rige:
Se transfieren datos. En el par√°metro RET_VAL se devuelve el c√≥digo de error W#16#8122
o W#16#8323. Este c√≥digo de error debe evaluarse en el programa de usuario.

Reglas para copiar estructuras
Al indicar una estructura a modo de par√°metro de entrada, tenga en cuenta que la longitud de
una estructura se rige siempre por un n√∫mero entero de bytes. Si se declara una estructura con
un n√∫mero impar de bytes, esta estructura necesita un byte adicional de espacio en memoria.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

BVAL

Input

ANY

I, Q, M, D, L, P

Indicaci√≥n del √°rea de memo‚Äê
ria (√°rea de origen) con cuyo
contenido se rellena el √°rea
de destino en el par√°metro
BLK.

BLK

Output 1)

ANY

I, Q, M, D, L, P

Indicaci√≥n del √°rea de memo‚Äê
ria que se rellena con el con‚Äê
tenido del √°rea de origen.

INT

I, Q, M, D, L, P

Informaci√≥n de error

Valor de funci√≥n (RET_VAL)

1) El par√°metro BLK se declara como Output, pero en la interfaz del bloque debe declararse como
InOut.

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

5606

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metro BVAL
Al indicar una estructura a modo de par√°metro de entrada, tenga en cuenta que la longitud de
una estructura se adapta siempre a un n√∫mero entero de bytes. Si se declara una estructura
con un n√∫mero impar de bytes, esta estructura necesita un byte adicional de espacio en
memoria.

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

8092

El √°rea de origen o destino est√° solo en la memoria de carga.

8xyy

Encontrar√° m√°s informaci√≥n de error en "Consulte tambi√©n".

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n en "Consulte
tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_RetVal" := FILL(BVAL := P#M14.0 WORD 4,
BLK => P#M100.0 WORD 10);

La instrucci√≥n copia el √°rea de origen de MW14 a MW20 y rellena el √°rea de destino de MW100
a MW118 con el contenido de las 4 palabras contenidas en el √°rea de memoria del par√°metro
BVAL.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)
Evaluaci√≥n de errores con el par√°metro de salida RET_VAL (P√°gina 174)
Principios b√°sicos de SCL (P√°gina 8115)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5607

Instrucciones
4.2 Instrucciones

Conversi√≥n
CONVERT: Convertir valor
Descripci√≥n
La instrucci√≥n "Convertir valor" permite programar conversiones expl√≠citas. Los tipos de datos
que se han de convertir se especifican en un cuadro de di√°logo que se abre autom√°ticamente
al insertar la instrucci√≥n. Durante la ejecuci√≥n, la instrucci√≥n lee el valor de origen y lo convierte
al valor de destino indicado.
Encontrar√° m√°s informaci√≥n relacionada con las conversiones posibles en el apartado
"Conversi√≥n expl√≠cita" de "Consulte tambi√©n".

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

<Tipo de ori‚Äê
gen>

Input

Secuencias de
I, Q, M, D, L, P o
bits, enteros, n√∫‚Äê
constante
meros en coma flo‚Äê
tante, temporiza‚Äê
dores, fecha y ho‚Äê
ra, secuencias de
caracteres

Valor que se convierte.

I, Q, M, D, L, P
Secuencias de
bits, enteros, n√∫‚Äê
meros en coma flo‚Äê
tante, temporiza‚Äê
dores, fecha y ho‚Äê
ra, secuencias de
caracteres

Resultado de la conversi√≥n

<Tipo de des‚Äê Output
tino>

√Årea de memoria

Descripci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_INT" := REAL_TO_INT("Tag_REAL");

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:

5608

Operando

Tipo de datos

Valor

Tag_REAL

REAL

20.56

Tag_INT

INT

21

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
En la conversi√≥n, el valor del operando "Tag_REAL" se redondea al siguiente entero y se
deposita en el operando "Tag_INT".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Conversiones expl√≠citas (P√°gina 590)
Principios b√°sicos de SCL (P√°gina 8115)

ROUND: Redondear n√∫mero
Descripci√≥n
La instrucci√≥n "Redondear n√∫mero" permite redondear el valor de la entrada IN al siguiente
n√∫mero entero. La instrucci√≥n interpreta el valor de la entrada IN como n√∫mero en coma
flotante y lo convierte a un n√∫mero entero o a un n√∫mero en coma flotante. Si el valor de
entrada se encuentra entre un n√∫mero par y uno impar, se selecciona el n√∫mero par.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Expresi√≥n>

Input

REAL

I, Q, M, D, L, P

Valor de entrada que se debe
redondear.

DINT

I, Q, M, D, L, P

Resultado del redondeo

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := ROUND("Tag_Value");

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Value

1.50000000

-1.50000000

Tag_Result

2

-2

El resultado de la instrucci√≥n se devuelve en el operando "Tag_Result" como valor de funci√≥n.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5609

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

CEIL: Redondear un n√∫mero en coma flotante al siguiente entero superior
Descripci√≥n
La instrucci√≥n "Redondear un n√∫mero en coma flotante al siguiente entero superior" permite
redondear el valor al siguiente n√∫mero entero superior. La instrucci√≥n interpreta el valor de
entrada como n√∫mero en coma flotante y lo convierte al n√∫mero entero superior m√°s pr√≥ximo.
El valor de la funci√≥n puede ser mayor o igual al valor de entrada.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Expresi√≥n>

Input

REAL

I, Q, M, D, L, P

Valor de entrada

DINT

I, Q, M, D, L, P

Valor de entrada redondeado

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := CEIL("Tag_Value");

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Value

0,5

-0,5

Tag_Result

1

0

El resultado de la instrucci√≥n se devuelve en el operando "Tag_Result" como valor de funci√≥n.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

5610

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

FLOOR: Redondear un n√∫mero en coma flotante al siguiente entero inferior
Descripci√≥n
La instrucci√≥n "Redondear un n√∫mero en coma flotante al siguiente entero inferior" permite
redondear el valor al siguiente n√∫mero entero inferior. La instrucci√≥n interpreta el valor de
entrada como n√∫mero en coma flotante y lo convierte al n√∫mero entero inferior m√°s pr√≥ximo.
El valor de funci√≥n puede ser menor o igual al valor de entrada.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Expresi√≥n>

Input

REAL

I, Q, M, D, L, P

Valor de entrada

DINT

I, Q, M, D, L, P

Valor de entrada redondeado

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := FLOOR("Tag_Value");

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_Value

0.5

-0.5

Tag_Result

0

-1

El resultado de la instrucci√≥n se devuelve en el operando "Tag_Result" como valor de funci√≥n.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

TRUNC: Truncar a entero
Descripci√≥n
La instrucci√≥n "Truncar a entero" permite generar un valor entero no redondeado a partir del
valor de entrada. La instrucci√≥n selecciona solo la parte entera del valor de entrada y la
devuelve sin decimales como valor de funci√≥n.
Para modificar el tipo de datos de la instrucci√≥n, utilice la sintaxis siguiente:

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5611

Instrucciones
4.2 Instrucciones
TRUNC_<Tipo de datos>();

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

<Expresi√≥n>

Input

REAL

I, Q, M, D, L, P

_<tipo de datos>

Enteros
Valor predetermi‚Äê
nado: DINT

Descripci√≥n
Valor de entrada
Tipo de datos del valor de
funci√≥n:
‚óè Si desea utilizar el tipo de
datos predeterminado,
no es necesario indicar
nada.
‚óè Si desea utilizar otro tipo
de datos admisible, hay
que indicarlo
expl√≠citamente.

Valor de funci√≥n

Enteros

I, Q, M, D, L

Parte entera del valor de en‚Äê
trada

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result1" := TRUNC("Tag_Value1");
"Tag_Result2" := TRUNC("Tag_Value2"+"Tag_Value3");
"Tag_Result3" := TRUNC_REAL("Tag_Value4");

El resultado de la instrucci√≥n se devuelve en el operando "Tag_Result" como valor de funci√≥n.
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:

5612

Operando

Valor

Tag_Value1

-1.5

Tag_Result1

-1

Tag_Value2

2.1

Tag_Value3

3.2

Tag_Result2

5

Tag_Result3

2.0

Tag_Value4

2.4

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

SCALE: Escalar
Descripci√≥n
La instrucci√≥n "Escalar" convierte el entero del par√°metro IN en un n√∫mero en coma flotante
que se escala en unidades f√≠sicas entre un l√≠mite inferior y uno superior. Los l√≠mites inferior y
superior del rango de valores en el que se escala el valor de entrada se definen mediante los
par√°metros LO_LIM y HI_LIM. El resultado de la instrucci√≥n se devuelve en el par√°metro OUT.
La instrucci√≥n "Escalar" utiliza la siguiente ecuaci√≥n:
OUT = [((FLOAT (IN) ‚Äì K1)/(K2‚ÄìK1)) ‚àó (HI_LIM‚ÄìLO_LIM)] + LO_LIM
El estado l√≥gico del par√°metro BIPOLAR determina los valores de las constantes "K1" y "K2".
El par√°metro BIPOLAR puede tener los siguientes estados l√≥gicos:
‚óè Estado l√≥gico "1": se presupone que el valor del par√°metro IN es bipolar y est√° comprendido
en un rango de valores entre -27648 y 27648. En este caso, la constante "K1" tiene el valor
"-27648,0" y la constante "K2", el valor "+27648,0".
‚óè Estado l√≥gico "0": se presupone que el valor del par√°metro IN es unipolar y est√°
comprendido en un rango de valores entre 0 y 27648. En este caso, la constante "K1" tiene
el valor "0,0" y la constante "K2", el valor "+27648,0".
Si el valor del par√°metro IN es mayor que el de la constante "K2", el resultado de la instrucci√≥n
se pone al valor del l√≠mite superior (HI_LIM) y se emite un error.
Si el valor del par√°metro IN es menor que el de la constante "K1", el resultado de la instrucci√≥n
se pone al valor del l√≠mite inferior (LO_LIM) y se emite un error.
Si el l√≠mite inferior indicado es mayor que el l√≠mite superior (LO_LIM > HI_LIM), el resultado se
escala de forma inversamente proporcional al valor de entrada.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN

Input

INT

I, Q, M, D, L, P

Valor de entrada que se es‚Äê
cala.

HI_LIM

Input

REAL

I, Q, M, D, L, P

Valor l√≠mite superior

LO_LIM

Input

REAL

I, Q, M, D, L, P

Valor l√≠mite inferior

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5613

Instrucciones
4.2 Instrucciones
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

BIPOLAR

Input

BOOL

I, Q, M, D, L

Indica si el valor del par√°me‚Äê
tro IN se interpreta como bi‚Äê
polar o unipolar. El par√°me‚Äê
tro puede adoptar los valores
siguientes:
1: Bipolar
0: Unipolar

OUT

Output

Valor de funci√≥n (RET_VAL)

REAL

I, Q, M, D, L, P

Resultado de la instrucci√≥n

WORD

I, Q, M, D, L, P

Informaci√≥n de error

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

0008

El valor del par√°metro IN es mayor que 27 648 o menor que 0 (unipolar) o -27 648 (bipolar).

8xyy

Encontrar√° m√°s informaci√≥n de error en "Consulte tambi√©n".

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n en "Consulte
tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:

"Tag_ErrorCode" := SCALE(IN := "Tag_InputValue",
HI_LIM := "Tag_HighLimit"
LO_LIM := "Tag_LowLimit"
BIPOLAR := "Tag_Bipolar",
OUT => "Tag_Result");

La informaci√≥n de error de la instrucci√≥n se devuelve en el operando "Tag_ErrorCode" como
valor de funci√≥n.
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Par√°metro

5614

Operando

Valor

IN

Tag_InputValue

22

HI_LIM

Tag_HighLimit

100.0

LO_LIM

Tag_LowLimit

0.0

BIPOLAR

Tag_Bipolar

1

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Operando

Valor

OUT

Tag_Result

50.03978588

RET_VAL

Tag_ErrorCode

W#16#0000

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)
Evaluaci√≥n de errores con el par√°metro de salida RET_VAL (P√°gina 174)
Principios b√°sicos de SCL (P√°gina 8115)

UNSCALE: Desescalar
Descripci√≥n
La instrucci√≥n "Desescalar" permite desescalar el n√∫mero en coma flotante del par√°metro IN
en unidades f√≠sicas comprendidas entre un l√≠mite inferior y uno superior y convertirlo en un
n√∫mero entero. Los l√≠mites inferior y superior del rango de valores en el que se desescala el
valor de entrada se definen mediante los par√°metros LO_LIM y HI_LIM. El resultado de la
instrucci√≥n se devuelve en el par√°metro OUT.
La instrucci√≥n "Desescalar" utiliza la siguiente ecuaci√≥n:
OUT = [((IN‚ÄìLO_LIM)/(HI_LIM‚ÄìLO_LIM)) ‚àó (K2‚ÄìK1)] + K1
El estado l√≥gico del par√°metro BIPOLAR determina los valores de las constantes "K1" y "K2".
El par√°metro BIPOLAR puede tener los siguientes estados l√≥gicos:
‚óè Estado l√≥gico "1": se presupone que el valor del par√°metro IN es bipolar y est√° comprendido
en un rango de valores entre -27648 y 27648. En este caso, la constante "K1" tiene el valor
"-27648,0" y la constante "K2", el valor "+27648,0".
‚óè Estado l√≥gico "0": se presupone que el valor del par√°metro IN es unipolar y est√°
comprendido en un rango de valores entre 0 y 27648. En este caso, la constante "K1" tiene
el valor "0,0" y la constante "K2", el valor "+27648,0".
Si el valor del par√°metro IN no se encuentra dentro de los l√≠mites definidos por HI_LIM y
LO_LIM, se emite un error. El resultado se ajusta al l√≠mite m√°s pr√≥ximo.
Si el l√≠mite inferior indicado es mayor que el l√≠mite superior (LO_LIM > HI_LIM), el resultado se
escala de forma inversamente proporcional al valor de entrada.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN

Input

REAL

I, Q, M, D, L, P

Valor de entrada que se de‚Äê
sescala en un valor entero.

HI_LIM

Input

REAL

I, Q, M, D, L, P

Valor l√≠mite superior

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5615

Instrucciones
4.2 Instrucciones
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

LO_LIM

Input

REAL

I, Q, M, D, L, P

Valor l√≠mite inferior

BIPOLAR

Input

BOOL

I, Q, M, D, L

Indica si el valor del par√°me‚Äê
tro IN se interpreta como bi‚Äê
polar o unipolar. El par√°me‚Äê
tro puede adoptar los valores
siguientes:
1: Bipolar
0: Unipolar

OUT

Output

Valor de funci√≥n (RET_VAL)

INT

I, Q, M, D, L, P

Resultado de la instrucci√≥n

WORD

I, Q, M, D, L, P

Informaci√≥n de error

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

0008

El valor del par√°metro IN es mayor que el del l√≠mite superior (HI_LIM) o menor que el del
l√≠mite inferior (LO_LIM).

8xyy

Encontrar√° m√°s informaci√≥n de error en "Consulte tambi√©n".

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n aqu√≠: Cambiar
formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_ErrorCode" := UNSCALE(IN := "Tag_InputValue",
HI_LIM := "Tag_HighLimit"
LO_LIM := "Tag_LowLimit"
BIPOLAR := "Tag_Bipolar",
OUT => "Tag_Result");

La informaci√≥n de error de la instrucci√≥n se devuelve en el operando "Tag_ErrorCode" como
valor de funci√≥n.
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:

5616

Par√°metro

Operando

Valor

IN

Tag_InputValue

50.03978588

HI_LIM

Tag_HighLimit

100.0

LO_LIM

Tag_LowLimit

0.0

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Operando

Valor

BIPOLAR

Tag_Bipolar

1

OUT

Tag_Result

22

RET_VAL

Tag_ErrorCode

W#16#0000

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Evaluaci√≥n de errores con el par√°metro de salida RET_VAL (P√°gina 174)
Principios b√°sicos de SCL (P√°gina 8115)

Control del programa
IF: Ejecuci√≥n condicional
Descripci√≥n
La instrucci√≥n "Ejecuci√≥n condicional" permite ramificar el flujo del programa en funci√≥n de una
condici√≥n. La condici√≥n es una expresi√≥n con un valor booleano (TRUE o FALSE). Como
condici√≥n se pueden indicar expresiones l√≥gicas o expresiones de comparaci√≥n.
Al ejecutar la instrucci√≥n, se eval√∫an las expresiones indicadas. Si el valor de una expresi√≥n
es TRUE, la condici√≥n se considera cumplida; en el caso de FALSE se considera que la
condici√≥n no se cumple.

Par√°metros
Dependiendo del tipo de ramificaci√≥n se pueden programar las siguientes formas de la
instrucci√≥n:
‚óè Ramificaci√≥n con IF:
IF <condici√≥n> THEN <instrucciones>
END_IF;
Si se cumple la condici√≥n, se ejecutan las instrucciones que est√°n programadas despu√©s de
THEN. Si la condici√≥n no se cumple, el procesamiento del programa contin√∫a con la siguiente
instrucci√≥n despu√©s de END_IF.
‚óè Ramificaci√≥n con IF y ELSE:
IF <condici√≥n> THEN <instrucciones1>
ELSE <Instrucciones0>
END_IF;
Si se cumple la condici√≥n, se ejecutan las instrucciones que est√°n programadas despu√©s de
THEN. Si no se cumple la condici√≥n, se ejecutan las instrucciones que est√°n programadas

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5617

Instrucciones
4.2 Instrucciones
despu√©s de ELSE. Despu√©s, el procesamiento del programa contin√∫a con la siguiente
instrucci√≥n despu√©s de END_IF.
‚óè Ramificaci√≥n con IF, ELSIF y ELSE:
IF <condici√≥n1> THEN <instrucciones1>
IF <condici√≥n2> THEN <instrucciones2>
ELSE <Instrucciones0>
END_IF;
Si se cumple la primera condici√≥n (<condici√≥n1>), se ejecutan las instrucciones
(<instrucciones1>) despu√©s de THEN. Despu√©s de ejecutar las instrucciones, el
procesamiento del programa contin√∫a despu√©s de END_IF.
Si no se cumple la primera condici√≥n, se comprueba la segunda (<condici√≥n2>). Si se cumple
la segunda condici√≥n (<condici√≥n2>), se ejecutan las instrucciones (<instrucciones2>)
despu√©s de THEN. Despu√©s de ejecutar las instrucciones, el procesamiento del programa
contin√∫a despu√©s de END_IF.
Si no se cumple ninguna condici√≥n, se ejecutan las instrucciones (<instrucciones0> despu√©s
de ELSE y, a continuaci√≥n, contin√∫a el procesamiento del programa despu√©s de END_IF.
En una instrucci√≥n IF se pueden anidar tantas combinaciones de ELSIF y THEN como se
desee. La programaci√≥n de una rama ELSE es opcional.
La sintaxis de la instrucci√≥n IF se compone de las siguientes partes:
Par√°metro

Tipo de datos √Årea de memoria

Descripci√≥n

<Condici√≥n>

BOOL

Expresi√≥n que se eval√∫a.

<Instruccio‚Äê
nes>

-

I, Q, M, D, L

Instrucciones que se ejecutan si se cumple la con‚Äê
dici√≥n. Una excepci√≥n son las instrucciones que
est√°n programadas despu√©s de ELSE. Estas se
ejecutan si no se cumple ninguna condici√≥n dentro
del bucle.

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
IF "Tag_1" = 1
THEN "Tag_Value" :=
ELSIF "Tag_2" = 1
THEN "Tag_Value" :=
ELSIF "Tag_3" = 1
THEN "Tag_Value" :=
ELSE "Tag_Value" :=
END_IF;

5618

10;
20;
30;
0;

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

Tag_1

1

0

0

0

Tag_2

0

1

0

0

Tag_3

0

0

1

0

Tag_Value

10

20

30

0

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

CASE: Estructura selectiva m√∫ltiple
Descripci√≥n
La instrucci√≥n "Estructura selectiva m√∫ltiple" permite procesar una de varias secuencias de
instrucciones en funci√≥n del valor de una expresi√≥n.
El valor de la expresi√≥n puede ser un n√∫mero entero o una secuencia de bits. Al ejecutar la
instrucci√≥n CASE se compara el valor de la expresi√≥n (variable) con los valores de varias
constantes. Si el valor de la expresi√≥n (variable) coincide con el de una constante, se cumple
la condici√≥n y se ejecutan las instrucciones que est√°n programadas directamente despu√©s de
esta constante. Al hacerlo, las constantes pueden adoptar distintos valores.
La instrucci√≥n se puede declarar del siguiente modo:
CASE <Variable> OF
<Constante1>: <Instrucciones1>;
<Constante2>: <Instrucciones2>;
<ConstanteX>: <InstruccionesX>; // X >= 3
ELSE <Instrucciones0>;
END_CASE;

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5619

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Tipo de datos √Årea de memoria

Descripci√≥n

<Variable>

Secuencias
de bits, ente‚Äê
ros

I, Q, M, D, L

Valor que se compara con los valores de constan‚Äê
tes programados.

<Constante>

Secuencias
de bits

-

En el caso de una secuencia de bits, las constan‚Äê
tes pueden adoptar los siguientes valores:

Pueden pro‚Äê
gramarse
constantes
locales y glo‚Äê
bales.

‚óè N√∫mero binario (p. ej., 2#10)
‚óè N√∫mero octal (p. ej., 8#77)
‚óè N√∫mero hexadecimal (p. ej., 16#AD)
‚óè Constante sin tipo (p. ej., 1000)
En caso de una variable Byte tipificada, deben
programarse constantes Byte (p. ej., BYTE#2).
En caso de una variable Word tipificada, pueden
programarse constantes Byte o Word (p. ej.,
BYTE#2, WORD#2).
En caso de una variable DWord tipificada, pueden
programarse constantes Byte, Word o DWord
(p. ej., BYTE#2, WORD#2, DWORD#2).
En caso de una variable LWord tipificada, pueden
programarse constantes Byte, Word, DWord o
LWord (p. ej., BYTE#2, WORD#2, DWORD#2,
LWORD#2).
Enteros

En el caso de un n√∫mero entero, las constantes
pueden adoptar los siguientes valores:
‚óè un n√∫mero entero (p. ej., 5)
‚óè un rango de enteros (p. ej., 15 a 20)
‚óè una enumeraci√≥n de n√∫meros enteros y
rangos (p. ej., 10, 11, 15..20)

<Instrucci√≥n> -

-

Cualquier instrucci√≥n que se ejecuta si el valor de
la expresi√≥n coincide con el valor de una constan‚Äê
te. Una excepci√≥n son las instrucciones que est√°n
programadas despu√©s de ELSE. Estas se ejecu‚Äê
tan cuando los valores no coinciden.

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".
Si el valor de la expresi√≥n coincide con el valor de la primera constante (<Constante1>), se
ejecutan las instrucciones (<instrucciones1>) que est√°n programadas directamente despu√©s
de la primera constante. Luego, el procesamiento del programa contin√∫a despu√©s de
END_CASE.
Si el valor de la expresi√≥n no coindice con el valor de la primera constante (<Constante1), este
se compara con el valor de la constante que est√° programada a continuaci√≥n. De esta manera
la instrucci√≥n CASE se ejecuta hasta que coincidan los valores. Si el valor de la expresi√≥n no
se corresponde con ninguno de los valores programados de las constantes, se ejecutan las
instrucciones (<instrucciones0>) que est√°n programadas despu√©s de ELSE. ELSE es una
parte opcional de la sintaxis y se puede omitir.

5620

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
La instrucci√≥n CASE tambi√©n se puede anidar sustituyendo un bloque de instrucciones por
CASE. END_CASE cierra la instrucci√≥n CASE.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
CASE "Tag_Value" OF
0 :
"Tag_1" :=
1,3,5 :
"Tag_2" :=
6..10 :
"Tag_3" :=
16,17,20..25 :
"Tag_4" :=
ELSE
"Tag_5" :=
END_CASE;

1;
1;
1;
1;
1;

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valores

Tag_Value

0

1, 3 , 5

6, 7, 8, 9, 10

16,17, 20, 21,
22, 23, 24, 25

2

Tag_1

1

-

-

-

-

Tag_2

-

1

-

-

-

Tag_3

-

-

1

-

-

Tag_4

-

-

-

1

-

Tag_5

-

-

-

-

1

1: El operando se pone al estado l√≥gico "1".
-: El estado l√≥gico del operando permanece sin cambios.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

FOR: Ejecutar en bucle contador
Descripci√≥n
La instrucci√≥n "Ejecutar en bucle contador" permite procesar un bucle mientras la variable de
contaje se encuentre dentro del rango de valores indicado.
Los bucles tambi√©n se pueden anidar. Dentro de un bucle se pueden programar otros bucles
con otras variables de contaje.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5621

Instrucciones
4.2 Instrucciones
La ejecuci√≥n actual de un bucle se puede finalizar con la instrucci√≥n "Verificar condici√≥n de
bucle" (CONTINUE). La instrucci√≥n "Abandonar el bucle inmediatamente" (EXIT) permite
finalizar el procesamiento de todo el bucle. Encontrar√° m√°s informaci√≥n al respecto en
"Consulte tambi√©n".
Nota
Informaci√≥n sobre el n√∫mero de ejecuciones y sobre la variable de control
El n√∫mero de ejecuciones no puede modificarse durante la ejecuci√≥n del programa.
Por motivos de rendimiento, la variable de control debe declararse en la secci√≥n "Temp" de la
interfaz del bloque. Del mismo modo, la variable de control no debe modificarse durante le
ejecuci√≥n del programa, ya que de lo contrario la instrucci√≥n puede devolver un resultado
indefinido en funci√≥n de la implementaci√≥n.

Valores l√≠mite para instrucciones FOR
Para programar instrucciones FOR "seguras" que no se ejecuten de manera infinita, tenga en
cuenta las siguientes reglas y los siguientes valores l√≠mite:
FOR <variable de contaje> := <valor inicial> TO <valor final> BY <incremento> DO
<instrucciones>;
END_FOR;
Si...

... entonces

Observaci√≥n

Valor inicial < valor final

Valor final < (PMAX - paso)

La variable de contaje cuenta en
sentido positivo

Valor inicial > valor final AND va‚Äê Valor final > (NMAX - paso)
lor de paso < O

La variable de contaje cuenta en
sentido negativo

Valores l√≠mite
Para los tipos de datos posibles son v√°lidos diferentes valores l√≠mite:
Tipo de datos

PMAX

Variable de contaje del tipo INT

32767

NMAX
-32768

Variable de contaje del tipo DINT 2147483647

-2147483648

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:

5622

Par√°metros

Tipo de datos √Årea de memoria

Descripci√≥n

<Variable de
contaje>

INT, DINT

I, Q, M, D, L

Operando, cuyo valor se eval√∫a durante el proce‚Äê
samiento del bucle. El tipo de datos de la variable
de contaje determina el tipo de datos de los par√°‚Äê
metros restantes.

<Valor ini‚Äê
cial>

INT, DINT

I, Q, M, D, L

Expresi√≥n, cuyo valor se asigna a la variable de
contaje al comienzo del procesamiento del bucle.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metros

Tipo de datos √Årea de memoria

Descripci√≥n

<Valor final>

INT, DINT

Expresi√≥n, cuyo valor determina la √∫ltima ejecu‚Äê
ci√≥n del bucle. Antes de cada ejecuci√≥n del bucle
se comprueba qu√© valor tiene la variable de con‚Äê
taje:

I, Q, M, D, L

‚óè Valor final no alcanzado:
Se ejecutar√°n las instrucciones seg√∫n DO
‚óè Valor final alcanzado:
El bucle FOR se ejecuta por √∫ltima vez
‚óè Valor final sobrepasado:
El bucle FOR finaliza
No se puede modificar el valor final durante la eje‚Äê
cuci√≥n de la instrucci√≥n.
<Incremen‚Äê
to>

INT, DINT

I, Q, M, D, L

Expresi√≥n, en cuyo valor aumenta (incremento po‚Äê
sitivo) o disminuye (incremento negativo) la varia‚Äê
ble de contaje despu√©s de cada ejecuci√≥n del bu‚Äê
cle. La indicaci√≥n del incremento es opcional. Si
no se ha indicado ning√∫n incremento, el valor de la
variable de contaje aumenta en 1 despu√©s de ca‚Äê
da ejecuci√≥n del bucle.
No se puede modificar el incremento durante la
ejecuci√≥n de la instrucci√≥n.

<Instruccio‚Äê
nes>

-

Instrucciones que se ejecutan durante cada eje‚Äê
cuci√≥n del bucle mientras el valor de la variable de
control se encuentre en el rango de valores. El
rango de valores se especifica mediante los valo‚Äê
res inicial y final.

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
FOR i := 2 TO 8 BY 2
DO "a_array[i] := "Tag_Value"*"b_array[i]";
END_FOR;

El operando "Tag_Value" se multiplica por los elementos (2, 4, 6, 8) de las variables ARRAY
"b_array". El resultado se lee en los elementos (2, 4, 6, 8) de las variables ARRAY "a_array".

Consulte tambi√©n
CONTINUE: Verificar condici√≥n de bucle (P√°gina 1965)
EXIT: Abandonar el bucle inmediatamente (P√°gina 1966)
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5623

Instrucciones
4.2 Instrucciones

WHILE: Ejecutar cuando se cumpla la condici√≥n
Descripci√≥n
La instrucci√≥n "Ejecutar cuando se cumpla la condici√≥n" permite procesar un bucle mientras se
cumpla una condici√≥n de ejecuci√≥n. La condici√≥n es una expresi√≥n con un valor booleano
(TRUE o FALSE). Como condici√≥n se pueden indicar expresiones l√≥gicas o expresiones de
comparaci√≥n.
Al ejecutar la instrucci√≥n, se eval√∫an las expresiones indicadas. Si el valor de una expresi√≥n
es TRUE, la condici√≥n se considera cumplida; en el caso de FALSE se considera que la
condici√≥n no se cumple.
Los bucles tambi√©n se pueden anidar. Dentro de un bucle se pueden programar otros bucles
con otras variables de contaje.
La ejecuci√≥n actual de un bucle se puede finalizar con la instrucci√≥n "Verificar condici√≥n de
bucle" (CONTINUE). La instrucci√≥n "Abandonar el bucle inmediatamente" (EXIT) permite
finalizar el procesamiento de todo el bucle. Encontrar√° m√°s informaci√≥n al respecto en
"Consulte tambi√©n".
La instrucci√≥n se puede declarar del siguiente modo:
WHILE <condici√≥n> DO <instrucciones>;
END_WHILE;

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Tipo de datos √Årea de memoria

Descripci√≥n

<Condici√≥n>

BOOL

Expresi√≥n que se eval√∫a antes de cada ejecuci√≥n
del bucle.

<Instruccio‚Äê
nes>

-

I, Q, M, D, L

Instrucciones que se ejecutan si se cumple la con‚Äê
dici√≥n. Si no se cumple la condici√≥n, el procesa‚Äê
miento del programa contin√∫a despu√©s de
END_WHILE.

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
WHILE
"Tag_Value1" <> "Tag_Value2"
DO "Tag_Result"
:= "Tag_Input";
END_WHILE:

Mientras difieran los valores de los operandos "Tag_Value1" y "Tag_Value2", al operando
"Tag_Result" se le asignar√° el valor del operando "Tag_Input".

5624

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
CONTINUE: Verificar condici√≥n de bucle (P√°gina 5626)
EXIT: Abandonar el bucle inmediatamente (P√°gina 5627)
Principios b√°sicos de SCL (P√°gina 8115)

REPEAT: Ejecutar cuando no se cumpla la condici√≥n
Descripci√≥n
La instrucci√≥n "Ejecutar cuando no se cumpla la condici√≥n" permite procesar un bucle mientras
no se cumpla una condici√≥n de interrupci√≥n. La condici√≥n es una expresi√≥n con un valor
booleano (TRUE o FALSE). Como condici√≥n se pueden indicar expresiones l√≥gicas o
expresiones de comparaci√≥n.
Al ejecutar la instrucci√≥n, se eval√∫an las expresiones indicadas. Si el valor de una expresi√≥n
es TRUE, la condici√≥n se considera cumplida; en el caso de FALSE se considera que la
condici√≥n no se cumple.
Las instrucciones se ejecutan una vez aunque se cumpla la condici√≥n de interrupci√≥n.
Los bucles tambi√©n se pueden anidar. Dentro de un bucle se pueden programar otros bucles
con otras variables de contaje.
La ejecuci√≥n actual de un bucle se puede finalizar con la instrucci√≥n "Verificar condici√≥n de
bucle" (CONTINUE). La instrucci√≥n "Abandonar el bucle inmediatamente" (EXIT) permite
finalizar el procesamiento de todo el bucle. Encontrar√° m√°s informaci√≥n al respecto en
"Consulte tambi√©n".
La instrucci√≥n se puede declarar del siguiente modo:
REPEAT <instrucciones>;
UNTIL <condici√≥n> END_REPEAT;

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Tipo de datos √Årea de memoria

Descripci√≥n

<Instruccio‚Äê
nes>

-

Instrucciones que se ejecutan mientras la condi‚Äê
ci√≥n programada tenga el valor FALSE. Las ins‚Äê
trucciones se ejecutan una vez aunque se cumpla
la condici√≥n de interrupci√≥n.

<Condici√≥n>

BOOL

I, Q, M, D, L

Expresi√≥n que se eval√∫a despu√©s de cada ejecu‚Äê
ci√≥n del bucle. Si la expresi√≥n tiene el valor FAL‚Äê
SE, el bucle se procesa de nuevo. Si la expresi√≥n
tiene el valor TRUE, el procesamiento del progra‚Äê
ma contin√∫a despu√©s de END_REPEAT.

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5625

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
REPEAT "Tag_Result"
:= "Tag_Value";
UNTIL "Tag_Error"
END_REPEAT;

Mientras el valor del operando "Tag_Error" tenga el estado l√≥gico "0", se le asignar√° al
operando "Tag_Result" el valor del operando "Tag_Value".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

CONTINUE: Verificar condici√≥n de bucle
Descripci√≥n
La instrucci√≥n "Verificar condici√≥n de bucle" permite finalizar la ejecuci√≥n actual de un bucle
FOR, WHILE o REPEAT.
Despu√©s de ejecutar la instrucci√≥n, se eval√∫an de nuevo las condiciones para continuar el
bucle. La instrucci√≥n tiene efecto sobre el bucle que incluye directamente la instrucci√≥n.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
FOR i
:= 1 TO 15 BY 2 DO
IF (i < 5) THEN
CONTINUE;
END_IF;
"DB10".Test[i] := 1;
END_FOR;

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".
Si se cumple la condici√≥n i < 5, no se ejecuta la siguiente asignaci√≥n de valor
("DB10".Test[i] :=1). La variable de contaje (i) se incrementa en "2" y se comprueba si su valor
actual se encuentra en el rango de valores programados. Si la variable de contaje se encuentra
en el rango de valores, se eval√∫a de nuevo una condici√≥n IF.
Si no se cumple la condici√≥n i < 5, se ejecuta la siguiente asignaci√≥n de valor ("DB10".Test[i] :=
1) y se inicia una nueva ejecuci√≥n del bucle. La variable de control tambi√©n se aumenta con el
incremento "2" y se comprueba.

5626

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

EXIT: Abandonar el bucle inmediatamente
Descripci√≥n
La instrucci√≥n "Abandonar el bucle inmediatamente" permite interrumpir en cualquier punto la
ejecuci√≥n de un bucle FOR, WHILE o REPEAT independientemente de las condiciones. El
procesamiento del programa contin√∫a despu√©s finalizar el bucle (END_FOR, END_WHILE,
END_REPEAT).
La instrucci√≥n tiene efecto sobre el bucle que incluye directamente la instrucci√≥n.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
FOR i := 15 TO 1 BY -2 DO
IF (i < 5)
THEN EXIT;
END_IF;
"DB10".Test[i] := 1;
END_FOR;

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".
Si se cumple la condici√≥n i < 5, se interrumpe el procesamiento del bucle. El procesamiento
contin√∫a despu√©s de END_FOR.
Si no se cumple la condici√≥n i < 5, se ejecuta la siguiente asignaci√≥n de valor
("DB10".Test[i] :=1) y se inicia una nueva ejecuci√≥n del bucle. La variable de contaje (i) se
decrementa en "-2" y se comprueba si su valor actual se encuentra en el rango de valores
programados. Si la variable de control (i) se encuentra en el rango de valores, la condici√≥n IF
se eval√∫a de nuevo.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

GOTO: Saltar
Descripci√≥n
La instrucci√≥n "Saltar" permite continuar el procesamiento del programa en un punto marcado
con una etiqueta.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5627

Instrucciones
4.2 Instrucciones
La etiqueta y la instrucci√≥n "Saltar" deben estar en el mismo bloque. La denominaci√≥n de la
etiqueta debe ser un√≠voca en un bloque. A toda etiqueta pueden acceder distintas
instrucciones de salto.
No se permite saltar a un bucle desde "fuera", pero s√≠ es posible saltar desde un bucle hacia
"fuera".
Para la etiqueta deben observarse las siguientes reglas gramaticales:
‚óè Letras (a - z, A - Z)
‚óè Una combinaci√≥n de letras y n√∫meros. Es importante observar el orden, es decir, primero
las letras y despu√©s los n√∫meros (a - z, A - Z, 0 - 9).
‚óè No pueden utilizarse caracteres especiales o una combinaci√≥n de letras y n√∫meros en
orden inverso, es decir, primero los n√∫meros y despu√©s las letras (0 - 9, a - z, A - Z).
La instrucci√≥n se puede declarar del siguiente modo:
GOTO <Etiqueta>;
...
<Etiqueta>: <Instrucciones>

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Tipo de datos

Descripci√≥n

<Etiqueta>

-

Etiqueta a la que se salta

<Instrucciones>

-

Instrucciones que se ejecutan despu√©s del salto.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
CASE "Tag_Value" OF
1 : GOTO MyLABEL1;
2 : GOTO MyLABEL2;
3 : GOTO MyLABEL3;
ELSE GOTO MyLABEL4;
END_CASE;
MyLABEL1: "Tag_1" := 1;
MyLABEL2: "Tag_2" := 1;
MyLABEL3: "Tag_3" := 1;
MyLABEL4: "Tag_4" := 1;

Dependiendo del valor del operando "Tag_Value", el procesamiento del programa se contin√∫a
en el punto marcado por la etiqueta correspondiente. Por ejemplo, si el operando "Tag_Value"
tiene el valor "2", el procesamiento del programa contin√∫a a partir de la etiqueta "MyLABEL2".
En este caso, la l√≠nea del programa marcada con la etiqueta "MyLABEL1" se omite.

5628

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

RETURN: Abandonar el bloque
Descripci√≥n
La instrucci√≥n "Abandonar el bloque" permite finalizar el procesamiento del programa en el
bloque que se est√° ejecutando y continuar en el bloque invocante.
En el fin del bloque se puede omitir la instrucci√≥n.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
IF "Tag_Error" <>0 THEN RETURN;
END_IF;

Si el estado l√≥gico del operando "Tag_Error" no es igual a cero, el procesamiento del programa
se finaliza en el bloque que se est√° procesando.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

(*...*): Insertar secci√≥n de comentario
Descripci√≥n
La instrucci√≥n "Insertar secci√≥n de comentario" permite insertar una secci√≥n de comentario. El
texto encerrado entre par√©ntesis "(*...*)" se trata como un comentario.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
(*Esta es una secci√≥n de comentario.*)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5629

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

(/*...*/): Insertar comentario multiling√ºe
Descripci√≥n
Con la instrucci√≥n "Insertar comentario multiling√ºe" se inserta un comentario que puede
traducirse a otros idiomas del proyecto. Un comentario multiling√ºe se inicia con "(/*" y se cierra
con "*/)", lo que lo convierte en una unidad. Esto significa que, en cualquier caso, solo se puede
marcar o seleccionar el comentario entero y no partes por separado. Los comentarios
multiling√ºes no pueden anidarse unos dentro de otros, pero pueden utilizarse dentro de
comentarios de l√≠neas y secciones de comentarios. A diferencia de ello, no es posible emplear
comentarios de l√≠neas o secciones de comentarios sencillas dentro de comentarios
multiling√ºes, ya que todo lo incluido entre "(/*" y "*/)" se interpreta como texto normal.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
(/*Este es un comentario que puede traducirse a otros idiomas del
proyecto.*/)

Consulte tambi√©n
Inserci√≥n de comentarios (P√°gina 8179)

REGION: Estructurar el c√≥digo del programa
Descripci√≥n
La instrucci√≥n "Estructurar el c√≥digo del programa" permite estructurar el c√≥digo del programa
en un bloque SCL dividi√©ndolo en diferentes √°reas.
Encontrar√° m√°s informaci√≥n sobre c√≥mo trabajar con √°reas aqu√≠: Trabajar con √°reas
(P√°gina 8153)
La instrucci√≥n se puede declarar del siguiente modo:
REGION <Nombre>
<Instrucciones>
END_REGION

5630

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Tipo de datos

√Årea de memoria

Descripci√≥n

REGION

-

-

Palabra clave con la
que empieza el √°rea

<Nombre>

-

-

Texto que designa RE‚Äê
GION

<Instrucciones>

-

-

C√≥digo de programa
que comprende RE‚Äê
GION

END_REGION

-

-

Palabra clave con la
que finaliza el √°rea

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
REGION Feeder System
// Estructura el c√≥digo fuente para el sistema de alimentaci√≥n
IF "Variable_1" = 0 THEN
"Variable_2" := 10;
END_IF;
END_REGION

El √°rea Feeder System abarca el c√≥digo del programa completo.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

Control del tiempo de ejecuci√≥n
COMPRESS: Comprimir la memoria de la CPU
Descripci√≥n
La instrucci√≥n "Comprimir la memoria de la CPU" comprime la memoria de trabajo de la CPU
o la memoria de carga RAM. Los huecos creados por haber borrado o cargado bloques, se
rellenan juntando los bloques existentes.
Con la llamada de la instrucci√≥n "Comprimir la memoria de la CPU" se lanza el proceso de
compresi√≥n. El proceso de compresi√≥n se reparte entre varios ciclos del programa. La
vigilancia del proceso de compresi√≥n se realiza mediante los valores de los distintos
par√°metros. Si el par√°metro BUSY de la instrucci√≥n tiene el valor "1", significa que el proceso

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5631

Instrucciones
4.2 Instrucciones
de compresi√≥n se est√° ejecutando todav√≠a. El valor "1" del par√°metro DONE indica que ha
finalizado el proceso de compresi√≥n. La informaci√≥n de error se puede consultar en el
par√°metro RET_VAL.
Si se est√° ejecutando un proceso de compresi√≥n lanzado externamente, la llamada de la
instrucci√≥n "Comprimir la memoria de la CPU" origina un error.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

BUSY

Output

BOOL

I, Q, M, D, L

Informaci√≥n de si est√° activo
el proceso de compresi√≥n.

DONE

Output

BOOL

I, Q, M, D, L

Informaci√≥n de si ha finaliza‚Äê
do el proceso de compresi√≥n.

INT

I, Q, M, D, L

Informaci√≥n de error

Valor de funci√≥n (RET_VAL)

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error
El estado del proceso de compresi√≥n puede consultarse en los par√°metros BUSY y DO‚Äê
NE.

8091

Ya se est√° ejecutando un proceso de compresi√≥n lanzado externamente.

8092

La instrucci√≥n no se puede ejecutar porque se cumple una de las condiciones siguientes:
‚óè La funci√≥n "Borrar bloque" est√° activa.
‚óè Una funci√≥n de PG est√° accediendo a uno de los bloques que se deben desplazar.
‚óè Ya se est√° ejecutando un proceso de compresi√≥n lanzado externamente.
‚óè La CPU H se encuentra en un proceso de acoplamiento o actualizaci√≥n.

8xyy

Encontrar√° m√°s informaci√≥n de error en "Consulte tambi√©n".

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n en "Consulte
tambi√©n".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)
Evaluaci√≥n de errores con el par√°metro de salida RET_VAL (P√°gina 174)
Principios b√°sicos de SCL (P√°gina 8115)

5632

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

RE_TRIGR: Reiniciar tiempo de vigilancia del ciclo
Descripci√≥n
La instrucci√≥n "Reiniciar tiempo de vigilancia del ciclo" reinicia el tiempo de vigilancia del ciclo
de la CPU. El tiempo de vigilancia del ciclo se reinicia entonces con la duraci√≥n ajustada en la
configuraci√≥n de la CPU.
La instrucci√≥n "Reiniciar tiempo de vigilancia del ciclo" se puede llamar en todos los bloques
independientemente de la prioridad.
Si se llama la instrucci√≥n en un bloque de prioridad superior, p. ej. en una alarma de proceso
o una alarma de diagn√≥stico, la instrucci√≥n no se ejecuta.
La instrucci√≥n "Reiniciar tiempo de vigilancia del ciclo" se ejecuta correctamente en un espacio
de tiempo (10 veces el ciclo m√°ximo del programa), independientemente del n√∫mero de
llamadas. Transcurrido ese tiempo, el ciclo del programa ya no puede prolongarse.

Par√°metro
La instrucci√≥n "Reiniciar tiempo de vigilancia del ciclo" no tiene par√°metros y no devuelve
informaci√≥n de error.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

STP: Finalizar programa
Descripci√≥n
La instrucci√≥n "Finalizar programa" conmuta la CPU al estado operativo STOP, con lo que se
finaliza la ejecuci√≥n del programa. Los efectos al conmutar de RUN a STOP dependen de la
configuraci√≥n de la CPU.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

WAIT: Programar retardo
Descripci√≥n
La instrucci√≥n "Programar retardo" permite detener la ejecuci√≥n del programa durante un
periodo predeterminado. El periodo se indica en microsegundos en el par√°metro WT de la
instrucci√≥n.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5633

Instrucciones
4.2 Instrucciones
Es posible programar tiempos de retardo de -32768 a 32767 microsegundos (Œºs). El tiempo de
retardo m√≠nimo depende de la CPU utilizada y equivale al tiempo de ejecuci√≥n de la instrucci√≥n.
La ejecuci√≥n de la instrucci√≥n puede verse interrumpida por eventos de prioridad superior y no
arrojar√° informaci√≥n de error.
V√°lido para CPU S7-300:
En las CPU S7-300 (a excepci√≥n de S7-318), el tiempo de retardo programado con la
instrucci√≥n es un tiempo m√≠nimo. Se prolonga con el tiempo de ejecuci√≥n de las clases de
prioridad que intervienen y con las cargas del sistema.
Nota
Tiempo de retardo negativo
Si indica un tiempo de retardo negativo en el par√°metro WT, la salida de habilitaci√≥n ENO, o
el RLO y el bit BR arrojan el estado l√≥gico FALSE. Un tiempo de retardo negativo no afecta para
nada a la CPU. En KOP y FUP no se ejecutan las siguientes instrucciones vinculadas a la
salida de habilitaci√≥n ENO.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

WT

Input

INT

I, Q, M, D, L, P o
constante

Tiempo de retardo en micro‚Äê
segundos (Œºs)

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

PROTECT: Cambiar nivel de protecci√≥n
Descripci√≥n
La instrucci√≥n "Cambiar nivel de protecci√≥n" permite modificar el nivel de protecci√≥n "1"
configurado para la CPU.
El nivel de protecci√≥n "1" parametrizado con la opci√≥n activada "Eliminable por contrase√±a"
hace que sea necesario parametrizar una contrase√±a. Esta contrase√±a permite accesos de
escritura durante el funcionamiento a la CPU protegida contra escritura mediante la instrucci√≥n
"Cambiar nivel de protecci√≥n" (p. ej. cargar).
El nivel de protecci√≥n se especifica en el par√°metro MODE de la instrucci√≥n. El nivel de
protecci√≥n actual de la CPU se visualiza en la ventana de inspecci√≥n en "Propiedades >
Protecci√≥n".

5634

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
La tabla siguiente muestra una explicaci√≥n de los niveles de protecci√≥n:
Nivel
de
pro‚Äê
tec‚Äê
ci√≥n

Explicaci√≥n

1

Se permiten todas las funciones de PG. En el caso que exista un bloqueo de la legitimaci√≥n de
la contrase√±a, este se elimina llamando la instrucci√≥n "Cambiar nivel de protecci√≥n".

2

‚óè El programa y la configuraci√≥n de la CPU no se pueden modificar. El programa contenido
en la CPU se puede leer.
‚óè Se permiten las funciones de control, observaci√≥n y comunicaci√≥n del proceso.
‚óè Se permiten todas las funciones de informaci√≥n.
‚óè Si conoce la contrase√±a v√°lida, podr√° desactivar la protecci√≥n contra escritura ajustada.
‚óè En el caso que exista un bloqueo de la legitimaci√≥n de la contrase√±a, este se elimina
llamando la instrucci√≥n "Cambiar nivel de protecci√≥n".

3

‚óè Aun conociendo la contrase√±a v√°lida, no podr√° desactivar la protecci√≥n contra lectura y
escritura ajustada.
‚óè Si al llamar la instrucci√≥n "Cambiar nivel de protecci√≥n" existe una conexi√≥n legitimada, la
llamada de la instrucci√≥n no tendr√° ning√∫n efecto en esta conexi√≥n.

Si se ha configurado el nivel de protecci√≥n "2" o "3" para la CPU, la llamada de la instrucci√≥n
"Cambiar nivel de protecci√≥n" no tiene efecto alguno.
El efecto del nivel de protecci√≥n "2" o "3" una vez ejecutada la instrucci√≥n "Cambiar nivel de
protecci√≥n" puede consultarse en la lista parcial SZL con la ID de SZL W#16#0232 y el √≠ndice
W#16#0004.
Nota
La instrucci√≥n "Cambiar nivel de protecci√≥n" permite ajustar un nivel de protecci√≥n m√°s bajo
que aquel ajustado con "Configurar hardware" de STEP 7. Supongamos que se ha configurado
el nivel de protecci√≥n 3 y a continuaci√≥n se llama la instrucci√≥n "Cambiar nivel de protecci√≥n"
con el par√°metro MODE = 12. Esto bloquear√° la legitimaci√≥n de la contrase√±a. Si la instrucci√≥n
se llama nuevamente con el par√°metro MODE = 0 o 1, el nivel de protecci√≥n 3 se mantiene y
ser√° posible desactivar la protecci√≥n de lectura y escritura introduciendo la contrase√±a v√°lida.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5635

Instrucciones
4.2 Instrucciones

Efectos de las transiciones de estado operativo en el nivel de protecci√≥n
La tabla siguiente muestra qu√© efectos tienen las transiciones de estado operativo en el nivel
de protecci√≥n ajustado con la instrucci√≥n "Cambiar nivel de protecci√≥n".
Acci√≥n

Efectos en el nivel de protecci√≥n

‚óè Selector de modo en "STOP"

El nivel de protecci√≥n se pone a "1". Se permiten
todas las funciones de PG.

‚óè Conexi√≥n (POWER ON) sin respaldo
‚óè Borrado total mediante el selector de modo
‚óè Cambios de configuraci√≥n y/o del programa en
el estado operativo "STOP" de la CPU S7-400

El sistema operativo pone el nivel de protecci√≥n a
"1". Se permiten todas las funciones de PG.

‚óè Arranque en fr√≠o
‚óè Rearranque (en caliente)

En caso necesario, llamando la instrucci√≥n "Cam‚Äê
biar nivel de protecci√≥n" en el programa es posible
ajustar el nivel de protecci√≥n en "2" o "3".

Conexi√≥n (POWER ON) respaldada

No cambia

Transici√≥n de estado operativo RUN/ARRANQUE/ No cambia
PARADA -> STOP (debida a la llamada de la ins‚Äê
trucci√≥n "Finalizar programa" (STP), a errores del
programa sin el correspondiente OB de error o a
una acci√≥n del usuario).
S7-400: Rearranque por acci√≥n del usuario o au‚Äê
tom√°ticamente tras conexi√≥n (POWER ON)

No cambia

Sintaxis
Para la instrucci√≥n "Cambiar nivel de protecci√≥n" se utiliza la siguiente sintaxis:
SCL
PROTECT(MODE := <Operando>)

La sintaxis de la instrucci√≥n se compone de las siguientes partes:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

MODE

Input

WORD

I, Q, M, D, L

Descripci√≥n
Nivel de protecci√≥n
Valores posibles:
‚óè W#16#0000: Ajuste del
nivel de protecci√≥n "1"
‚óè W#16#0001: Ajuste del
nivel de protecci√≥n "2"
con legitimaci√≥n de la
contrase√±a
‚óè W#16#000C: Ajuste del
nivel de protecci√≥n "3" sin
legitimaci√≥n de la
contrase√±a

Valor de funci√≥n (RET_VAL)

5636

INT

I, Q, M, D, L

Si ocurre un error durante la
ejecuci√≥n, se emite una infor‚Äê
maci√≥n de error.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

La petici√≥n se ha ejecutado sin errores.

8090

Valor no admisible en el par√°metro MODE.

80C3

En este momento los recursos necesarios est√°n ocupados.

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n en "Consulte
tambi√©n".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)
Evaluaci√≥n de errores con el par√°metro de salida RET_VAL (P√°gina 174)
Principios b√°sicos de SCL (P√°gina 8115)

CiR: Controlar proceso CiR
Descripci√≥n
La instrucci√≥n "Controlar proceso CiR" permite influir en el proceso CiR en el programa de
usuario como se indica a continuaci√≥n:
‚óè Bloquear el proceso CiR. En este caso, se rechazar√° siempre la carga de una configuraci√≥n
modificada desde la programadora en la CPU. El bloqueo se aplica hasta que se elimina
con la instrucci√≥n "Controlar proceso CiR".
‚óè El proceso CiR se puede bloquear de forma condicionada, indicando un l√≠mite superior para
el tiempo de sincronizaci√≥n CiR en el par√°metro FRZ_TIME. En este caso, solo se permitir√°
cargar una configuraci√≥n modificada desde la programadora en la CPU si el tiempo de
sincronizaci√≥n CiR calculado en la CPU no excede el l√≠mite superior definido.
‚óè Habilitar el proceso CiR. El l√≠mite superior del tiempo de sincronizaci√≥n CiR se establece al
valor predeterminado de 1000 ms.
‚óè Determina si el proceso CiR est√° habilitado o no. Si el proceso CiR est√° habilitado o lo est√°
condicionadamente, el l√≠mite superior actual del tiempo de sincronizaci√≥n CiR se indica en
el par√°metro A_FT de la instrucci√≥n.
Nota
Durante el tiempo de sincronizaci√≥n CiR, las salidas est√°n congeladas y las entradas no se
eval√∫an.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5637

Instrucciones
4.2 Instrucciones

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

MODE

Input

BYTE

I, Q, M, D, L

Descripci√≥n
ID de la petici√≥n
Los valores admisibles del
par√°metro MODE son:
‚óè 0: Funci√≥n de informaci√≥n
‚óè 1: Habilitar proceso CiR
‚óè 2: Bloquear proceso CiR
‚óè 3: Bloquear proceso CiR
de forma condicionada.
El l√≠mite superior del
tiempo de sincronizaci√≥n
CiR se define en
FRZ_TIME.

FRZ_TIME

Input

TIME

I, Q, M, D, L

L√≠mite superior del tiempo de
sincronizaci√≥n CiR en milise‚Äê
gundos.
Rango de valores admisible:
60 ... 2500 ms (valor prede‚Äê
terminado: 1000 ms)
El par√°metro FRZ_TIME s√≥lo
es relevante si el par√°metro
MODE est√° al valor "3".

A_FT

Output

Valor de funci√≥n (RET_VAL)

TIME

I, Q, M, D, L

INT

I, Q, M, D, L

L√≠mite superior v√°lido actual‚Äê
mente del tiempo de sincro‚Äê
nizaci√≥n CiR
Informaci√≥n de error
Si el par√°metro MODE est√° a
"0", el par√°metro RET_VAL
indica si el proceso CiR est√°
habilitado o no.

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

La petici√≥n se ha ejecutado sin errores.
Este c√≥digo de error solo se puede emitir si el par√°metro MODE est√° ajustado al valor 1,
2 √≥ 3.

0001

El proceso CiR est√° habilitado.
Este c√≥digo de error solo se puede emitir si el par√°metro MODE est√° puesto al valor "0".

0002

El proceso CiR est√° bloqueado.
Este c√≥digo de error solo se puede emitir si el par√°metro MODE est√° puesto al valor "0".

5638

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0003

El proceso CiR est√° bloqueado de forma condicionada.
Este c√≥digo de error solo se puede emitir si el par√°metro MODE est√° puesto al valor "0".

8001

La CPU no est√° lista para un proceso CiR.

8002

El valor del par√°metro MODE no es admisible.

8003

El valor del par√°metro FRZ_TIME no es admisible.

8xyy

Encontrar√° m√°s informaci√≥n de error en "Consulte tambi√©n".

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n en "Consulte
tambi√©n".

Ejemplo
La instrucci√≥n "Controlar proceso CiR" permite programar p. ej. que no se lance ning√∫n
proceso CiR en periodos en los que se requiera la capacidad m√°xima de la CPU para el
procesamiento.
En este caso, la instrucci√≥n "Controlar proceso CiR" debe llamarse en el programa antes de
comenzar el periodo de actividad aumentada del proceso y ejecutarse con el valor "2"
(bloquear proceso CiR) en el par√°metro MODE. Con ello se bloquea el proceso CiR.
Para volver a habilitar el proceso CiR tras finalizar el periodo de actividad aumentada del
proceso, la instrucci√≥n "Controlar proceso CiR" debe llamarse de nuevo y ejecutarse con el
valor "1" en el par√°metro MODE. Como alternativa, el par√°metro MODE se puede poner al
valor "3", con lo que el proceso CiR se bloquea de forma condicionada.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Evaluaci√≥n de errores con el par√°metro de salida RET_VAL (P√°gina 174)
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)
Principios b√°sicos de SCL (P√°gina 8115)

Operaciones l√≥gicas con palabras
DECO: Descodificar
Descripci√≥n
La instrucci√≥n "Descodificar" activa un bit predeterminado por el valor de entrada en el valor de
salida.
La instrucci√≥n "Descodificar" lee el valor del par√°metro IN y activa el bit en el valor de salida
cuya posici√≥n equivale al valor le√≠do. Los dem√°s bits del valor de salida se rellenan con ceros.
Si el valor del par√°metro IN es mayor que 31, se ejecuta una instrucci√≥n modulo 32.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5639

Instrucciones
4.2 Instrucciones

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN

Input

WORD

I, Q, M, D, L, P

Posici√≥n del bit que se activa
en el valor de salida.

DWORD

I, Q, M, D, L, P

Valor de salida actual

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := DECO(IN := "Tag_Value");

La figura siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
‡≤Ø7DJB9DOXH‡≤Ø




‡≤Ø7DJB5HVXOW‡≤Ø

 



 

La instrucci√≥n lee el n√∫mero "3" del valor del operando "Tag_Value" y activa el tercer bit del
valor del operando "Tag_Result".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

ENCO: Codificar
Descripci√≥n
La instrucci√≥n "Codificar" permite leer el n√∫mero del bit menos significativo que est√° activado
en el valor de entrada y devolverlo como resultado.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN

Input

DWORD

I, Q, M, D, L, P

Valor de entrada

INT

I, Q, M, D, L, P

N√∫mero del bit que se lee en
el valor de entrada.

Valor de funci√≥n

5640

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := ENCO(IN := "Tag_Value");

La figura siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:

‡≤Ø7DJB9DOXH‡≤Ø
‡≤Ø7DJB5HVXOW‡≤Ø

 



 


La instrucci√≥n lee el bit menos significativo que est√° activado en el operando "Tag_Value" y
escribe la posici√≥n de bit "3" en el operando "Tag_Result". El resultado de la instrucci√≥n se
devuelve en el operando "Tag_Result" como valor de funci√≥n.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

SEL: Seleccionar
Descripci√≥n
La instrucci√≥n "Seleccionar" selecciona, en funci√≥n de un interruptor (par√°metro G), uno de los
par√°metros IN0 o IN1 y devuelve su contenido como resultado. Si el par√°metro G tiene el
estado l√≥gico "0", se copia el valor del par√°metro IN0. Si el par√°metro G tiene el estado l√≥gico
"1", se copia el valor del par√°metro IN1 y se devuelve como valor de funci√≥n.
Para poder ejecutar la instrucci√≥n, es imprescindible que las variables de todos los par√°metros
del tipo de datos sean de la misma clase.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5641

Instrucciones
4.2 Instrucciones

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

G

Input

BOOL

I, Q, M, D, L

Interruptor

IN0

Input

N√∫meros binarios,
enteros, n√∫meros
en coma flotante,
temporizadores,
secuencias de ca‚Äê
racteres, TOD,
DATE, DT

I, Q, M, D, L, P

Primer valor de entrada

IN1

Input

N√∫meros binarios,
enteros, n√∫meros
en coma flotante,
temporizadores,
secuencias de ca‚Äê
racteres, TOD,
DATE, DT

I, Q, M, D, L, P

Segundo valor de entrada

N√∫meros binarios,
enteros, n√∫meros
en coma flotante,
temporizadores,
secuencias de ca‚Äê
racteres, TOD,
DATE, DT

I, Q, M, D, L, P

Resultado de la instrucci√≥n

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := SEL(G := "Tag_Value",
IN0 := "Tag_0",
IN1 := "Tag_1");

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando
Tag_Value

Valor
0

1

Tag_0

W#16#0000

W#16#4C

Tag_1

W#16#FFFF

D#16#5E

Tag_Result

W#16#0000

D#16#5E

El resultado de la instrucci√≥n se devuelve en el operando "Tag_Result" como valor de funci√≥n.

5642

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

MUX: Multiplexar
Descripci√≥n
La instrucci√≥n "Multiplexar" copia el valor de un par√°metro de entrada seleccionado y lo
devuelve. Con el par√°metro K se especifica el n√∫mero del par√°metro de entrada cuyo n√∫mero
se copiar√°. La numeraci√≥n comienza por IN0 y contin√∫a en orden ascendente con cada nueva
entrada. Se puede declarar un m√°ximo de 32 par√°metros de entrada.
Si el valor del par√°metro K es mayor que el n√∫mero de entradas y el par√°metro INELSE no est√°
activado, el valor de funci√≥n de la instrucci√≥n no ser√° v√°lido y la salida de habilitaci√≥n ENO se
pone a "0".
Todas las variables parametrizadas deben ser del mismo tipo de datos. El valor de funci√≥n
adopta el tipo de datos m√°s significativo.
Nota
El par√°metro K tiene un entero negativo
Si en los par√°metros de entrada se indica una variable con un tipo de datos v√°lido y el
par√°metro K tiene un entero negativo, el valor de la variable se modificar√°.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

K

Input

Enteros

I, Q, M, D, L, P

Indica el par√°metro cuyo con‚Äê
tenido se transfiere.
‚óè Si K = 0 => par√°metro IN0
‚óè Si K = 1 => par√°metro
IN1, etc.

IN0

Input

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

N√∫meros binarios,
enteros, n√∫meros
en coma flotante,
temporizadores,
secuencias de ca‚Äê
racteres, TOD,
DATE, DT

I, Q, M, D, L, P

Primer valor de entrada

5643

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN1

Input

N√∫meros binarios,
enteros, n√∫meros
en coma flotante,
temporizadores,
secuencias de ca‚Äê
racteres, TOD,
DATE, DT

I, Q, M, D, L, P

Segundo valor de entrada

INn

Input

N√∫meros binarios,
enteros, n√∫meros
en coma flotante,
temporizadores,
secuencias de ca‚Äê
racteres, TOD,
DATE, DT

I, Q, M, D, L, P

Valores de entrada opciona‚Äê
les

INELSE

Input

N√∫meros binarios,
enteros, n√∫meros
en coma flotante,
temporizadores,
secuencias de ca‚Äê
racteres, TOD,
DATE, DT

I, Q, M, D, L, P

Indica el valor que se copia si
K <> n.

N√∫meros binarios,
enteros, n√∫meros
en coma flotante,
temporizadores,
secuencias de ca‚Äê
racteres, TOD,
DATE, DT

I, Q, M, D, L, P

Resultado de la instrucci√≥n

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := MUX(K := "Tag_Number",
IN0 := "Tag_1",
IN1 := "Tag_2",
INELSE := "Tag_3");

El resultado de la instrucci√≥n se devuelve en el operando "Tag_Result" como valor de funci√≥n.
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

5644

Valor

Tag_Number

1

4

Tag_1

DW#16#00000000

DW#16#00000000

Tag_2

DW#16#003E4A7D

DW#16#003E4A7D

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Operando

Valor

Tag_3

DW#16#FFFF0000

DW#16#FFFF0000

Tag_Result

DW#16#003E4A7D

DW#16#FFFF0000

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

Desplazamiento y rotaci√≥n
SHR: Desplazar a la derecha
Descripci√≥n
Con la instrucci√≥n "Desplazar a la derecha" se desplaza el contenido del par√°metro IN de bit
en bit hacia la derecha y se devuelve como valor de funci√≥n. El par√°metro N determina el
n√∫mero de bits que debe desplazarse el valor indicado.
Si el valor del par√°metro N es "0", se devuelve como resultado el valor del par√°metro IN.
Si el valor del par√°metro N es mayor que el n√∫mero de bits disponibles, el valor del par√°metro
IN se desplaza hacia la derecha las posiciones de bit disponibles.
Los bits que quedan libres en el √°rea izquierda del operando al realizar el desplazamiento se
rellenan con ceros.
La figura siguiente muestra c√≥mo el contenido de un operando del tipo de datos INT se
desplaza cuatro posiciones de bit a la derecha:


,1



 










1

5HVXOWDGR!




































SRVLFLRQHV

















/DVSRVLFLRQHVGHELWTXHTXHGDQOLEUHV
VHUHOOHQDQFRQFHURV

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019











(VWRVFXDWURELWV
VHSLHUGHQ

5645

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

IN

Input

Secuencias de bits I, Q, M, D, L, P

Valor que se desplaza.

N

Input

Enteros

N√∫mero de bits que se des‚Äê
plaza el valor (IN).

I, Q, M, D, L, P

Descripci√≥n

El valor del par√°metro N de‚Äê
be ser positivo.
Valor de funci√≥n

Secuencias de bits I, Q, M, D, L

Resultado de la instrucci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := SHR(IN := "Tag_Value",
N := "Tag_Number");

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Par√°metro

Operando

Valor

IN

Tag_Value

0011 1111 1010 1111

N

Tag_Number

3

Valor de funci√≥n

Tag_Result

0000 0111 1111 0101

El valor del operando "Tag_Value" se desplaza tres posiciones de bit hacia la derecha. El
resultado de la instrucci√≥n se devuelve en el operando "Tag_Result" como valor de funci√≥n.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

SHL: Desplazar a la izquierda
Descripci√≥n
Con la instrucci√≥n "Desplazar a la izquierda" se desplaza el contenido del par√°metro IN de bit
en bit hacia la izquierda y se devuelve como valor de funci√≥n. El par√°metro N determina el
n√∫mero de bits que debe desplazarse el valor indicado.
Si el valor del par√°metro N es "0", se devuelve como resultado el valor del par√°metro IN.
Si el valor del par√°metro N es mayor que el n√∫mero de bits disponibles, el valor del par√°metro
IN se desplaza hacia la izquierda las posiciones de bit disponibles.

5646

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Las posiciones que quedan libres al desplazar se rellenan con ceros.
La figura siguiente muestra c√≥mo el contenido de un operando del tipo de datos WORD se
desplaza seis posiciones de bit hacia la izquierda:


,1



 




1




























G¬ØJLWRV

5HVXOWDGR!      

































/DVSRVLFLRQHVGHELWV
TXH
TXHGDQOLEUHVDO
GHVSOD]DU
VHUHOOHQDQFRQFHURV

(VWRVVHLVELWV
VHSLHUGHQ

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

IN

Input

Secuencias de bits I, Q, M, D, L, P

Valor que se desplaza

N

Input

Enteros

N√∫mero de bits que se des‚Äê
plaza el valor IN.

I, Q, M, D, L, P

Descripci√≥n

El valor del par√°metro N de‚Äê
be ser positivo.
Valor de funci√≥n

Secuencias de bits I, Q, M, D, L

Resultado de la instrucci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := SHL(IN := "Tag_Value",
N := "Tag_Number");

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5647

Instrucciones
4.2 Instrucciones
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Par√°metro

Operando

Valor

IN

Tag_Value

0011 1111 1010 1111

N

Tag_Number

4

Valor de funci√≥n

Tag_Result

1111 1010 1111 0000

El valor del operando "Tag_Value" se desplaza cuatro posiciones de bit hacia la izquierda. El
resultado de la instrucci√≥n se devuelve en el operando "Tag_Result" como valor de funci√≥n.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

ROR: Rotar a la derecha
Descripci√≥n
Con la instrucci√≥n "Rotar a la derecha", el contenido del par√°metro IN rota de bit en bit hacia
la derecha y se devuelve como valor de funci√≥n. El par√°metro N determina el n√∫mero de bits
que debe rotarse el valor indicado. Los bits que quedan libres al realizar la rotaci√≥n se rellenan
con los bits desplazados hacia fuera.
Si el valor del par√°metro N es "0", se devuelve como resultado el valor de la entrada IN.
Si el valor del par√°metro N es mayor que el n√∫mero de bits disponibles, el valor del operando
en la entrada IN rota de todos modos el n√∫mero indicado de posiciones de bit.
La figura siguiente muestra c√≥mo el contenido de un operando del tipo de datos DWORD rota
tres posiciones hacia la derecha:

5648

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones


,1

 

       

1

5HVXOWDGR!



SRVLFLRQHV

        
(OHVWDGRO¬µJLFRGHORVWUHV
ELWVGHVSOD]DGRVVHLQWURGXFH
HQODV
SRVLFLRQHVTXHKDQTXHGDGR
OLEUHV

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

IN

Input

Secuencias de bits I, Q, M, D, L, P

Valor que se rota

N

Input

Enteros

N√∫mero de bits que rota el
valor IN.

I, Q, M, D, L, P

Descripci√≥n

El valor del par√°metro N de‚Äê
be ser positivo.
Valor de funci√≥n

Secuencias de bits I, Q, M, D, L

Resultado de la instrucci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := ROR(IN := "Tag_Value",
N := "Tag_Number");

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5649

Instrucciones
4.2 Instrucciones
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Par√°metro

Operando

Valor

IN

Tag_Value

1010 1010 0000 1111 0000
1111 0101 0101

N

Tag_Number

5

Valor de funci√≥n

Tag_Result

1010 1101 0101 0000 0111
1000 0111 1010

El contenido del operando "Tag_Value" se rota cinco posiciones de bit hacia la derecha. El
resultado de la instrucci√≥n se devuelve en el operando "Tag_Result" como valor de funci√≥n.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

ROL: Rotar a la izquierda
Descripci√≥n
Con la instrucci√≥n "Rotar a la izquierda", el contenido del par√°metro IN rota de bit en bit hacia
la izquierda y se devuelve como valor de funci√≥n. El par√°metro N determina el n√∫mero de bits
que debe rotarse el valor indicado. Los bits que quedan libres al realizar la rotaci√≥n se rellenan
con los bits desplazados hacia fuera.
Si el valor del par√°metro N es "0", se devuelve como resultado el valor de la entrada IN.
Si el valor del par√°metro N es mayor que el n√∫mero de bits disponibles, el valor del operando
en la entrada IN rota de todos modos el n√∫mero indicado de posiciones de bit.
La figura siguiente muestra c√≥mo el contenido de un operando del tipo de datos DWORD rota
tres posiciones hacia la izquierda:

5650

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones


,1

 

       

1

5HVXOWDGR!



G¬ØJLWRV

        
(OHVWDGRO¬µJLFRGHORVWUHV
ELWVGHVSOD]DGRVVHLQVHUWDHQ
ODVSRVLFLRQHVTXHTXHGDQOLEUHVDO
GHVSOD]DU

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

IN

Input

Secuencias de bits I, Q, M, D, L, P

Valor que se rota

N

Input

Enteros

N√∫mero de bits que rota el
valor IN.

I, Q, M, D, L, P

Descripci√≥n

El valor del par√°metro N de‚Äê
be ser positivo.
Valor de funci√≥n

Secuencias de bits I, Q, M, D, L

Resultado de la instrucci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := ROL(IN := "Tag_Value",
N := "Tag_Number");

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5651

Instrucciones
4.2 Instrucciones
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Par√°metro

Operando

Valor

IN

Tag_Value

1111 0000 1010 1010 0000
1111 0000 1111

N

Tag_Number

5

Valor de funci√≥n

Tag_Result

0001 0101 0100 0001 1110
0001 1111 1110

El contenido del operando "Tag_Value" se rota cinco posiciones de bit hacia la izquierda. El
resultado de la instrucci√≥n se devuelve en el operando "Tag_Result" como valor de funci√≥n.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Entrada de instrucciones SCL (P√°gina 8149)
Edici√≥n de instrucciones SCL (P√°gina 8181)
Principios b√°sicos de SCL (P√°gina 8115)

Otras instrucciones
SET: Activar √°rea por bits
Descripci√≥n
La instrucci√≥n "Activar √°rea por bits" pone a "1" el estado l√≥gico de los bits de un √°rea indicada.
El punto inicial del √°rea se define mediante el puntero del par√°metro S_BIT. Si el puntero
se√±ala al √°rea de memoria de la periferia externa (P), no se ejecuta la instrucci√≥n. El n√∫mero
de bits que deben activarse en el √°rea indicada se determina en el par√°metro N de la
instrucci√≥n. Si el par√°metro N tiene el valor "0", la llamada de la instrucci√≥n no tendr√° efecto
alguno.
Nota
Par√°metro N
En el par√°metro N tambi√©n es posible interconectar un elemento de un bloque de datos.

5652

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

S_BIT

Input

POINTER

I, Q, M, D

Apunta al primer bit del √°rea
cuyos bits se activan.
En el direccionamiento indi‚Äê
recto por registro inter√°rea,
el puntero debe indicarse en
formato de palabra doble.

N

Input

INT

I, Q, M, D, L, P o
constante

N√∫mero de bits que deben
activarse

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
SET(S_BIT := P#M0.0,
N := 10);

En el ejemplo, la instrucci√≥n activa 10 bits en el √°rea de M0.0 a M1.1.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

SETP: Activar mapa de bits en el √°rea de periferia
Descripci√≥n
La instrucci√≥n "Activar mapa de bits en el √°rea de periferia" permite poner los bits de un √°rea
de periferia al estado l√≥gico "1". Paralelamente a los bits de periferia, tambi√©n se activan los
bits correspondientes en la memoria imagen de proceso de las salidas.
Los par√°metros N y SA de la instrucci√≥n sirven para definir el mapa de bits que debe activarse.
Los bits del mapa deben encontrarse en aquella parte del √°rea de periferia que tiene asignada
una memoria imagen de proceso.
Si no se ha conectado periferia para una parte del mapa de bits seleccionado, la instrucci√≥n
intentar√° activar el mapa de bits completo. En este caso se devuelve una informaci√≥n de error
en el par√°metro RET_VAL.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5653

Instrucciones
4.2 Instrucciones
El √°rea de periferia se activa por bytes. Si el mapa de bits definido a trav√©s de los par√°metros
N y SA no empieza ni termina en un l√≠mite de byte, la llamada de la instrucci√≥n tendr√° el efecto
siguiente:
‚óè Los bits contenidos en el primer o √∫ltimo byte que debe transferirse y que no pertenecen al
mapa de bits definido, obtienen el valor de los bits correspondientes en la memoria imagen
de proceso de las salidas. Esto puede ocasionar p. ej. el arranque accidental de motores o
la desconexi√≥n de sistemas de refrigeraci√≥n.
ADVERTENCIA
Comportamiento involuntario
El ajuste de los bits al valor de los bits correspondientes en la memoria imagen de proceso
de las salidas puede ocasionar, p. ej., el arranque accidental de motores o la desconexi√≥n
de sistemas de refrigeraci√≥n.
‚óè Los bits que pertenecen al mapa de bits definido se ponen al estado l√≥gico "1".
La llamada de la instrucci√≥n "Activar mapa de bits en el √°rea de periferia" no tiene efecto alguno
si el par√°metro N devuelve el valor "0".

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

N

Input

INT

I, Q, M, D, L

N√∫mero de bits que deben
activarse

SA

Output

POINTER

P

Puntero hacia el primer bit
que debe activarse

INT

I, Q, M, D, L

Informaci√≥n de error

Valor de funci√≥n (RET_VAL)

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

8xyy

Encontrar√° m√°s informaci√≥n de error en "Consulte tambi√©n".

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n en "Consulte
tambi√©n".

5654

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Error" := SETP(N := 8,
SA => P#10.0);

En el ejemplo, la instrucci√≥n activa 8 bits en el √°rea de periferia conforme a las salidas Q10.0
a Q10.7.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Evaluaci√≥n de errores con el par√°metro de salida RET_VAL (P√°gina 174)
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)
Principios b√°sicos de SCL (P√°gina 8115)

SETI: Activar √°rea por bytes
Descripci√≥n
La instrucci√≥n "Activar √°rea por bytes" pone a "1" el estado l√≥gico de los bits de un √°rea definida
de bytes. El punto inicial del √°rea se define en el par√°metro S_BYTE. El tama√±o del √°rea se
define indicando el n√∫mero de bits que deben activarse en el par√°metro N de la instrucci√≥n.
Nota
El valor del par√°metro N debe ser un m√∫ltiplo de 8 (p. ej. 8, 16, 24, etc.).
El puntero indicado en el par√°metro S_BYTE debe se√±alar al √°rea de memoria de la periferia
externa (P). Puesto que al √°rea de memoria "P" se accede en formato de byte, palabra y
palabra doble, el puntero del par√°metro S_BYTE debe se√±alar a un operando equivalente a un
valor l√≠mite de byte. Por tanto, el n√∫mero de bit del puntero debe ser "0".
Nota
El estado l√≥gico de los bits correspondientes en la memoria imagen de proceso de las salidas
(Q) se pone a "0".
La llamada de la instrucci√≥n "Activar √°rea por bytes" no tiene efecto alguno si se cumple una
de las condiciones siguientes:
‚óè El puntero del par√°metro S_BYTE no se√±ala al √°rea de memoria de la periferia externa (P).
‚óè El puntero del par√°metro S_BYTE se√±ala a un operando que no equivale a ning√∫n valor
l√≠mite de byte.
‚óè El valor del par√°metro N no es un m√∫ltiplo de 8.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5655

Instrucciones
4.2 Instrucciones

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

S_BYTE

Input

POINTER

P

Se√±ala al primer byte del
√°rea cuyos bits se activan.
En el direccionamiento indi‚Äê
recto por registro inter√°rea,
el puntero debe indicarse en
formato de palabra doble.

N

Input

INT

I, Q, M, D, L, P

Tama√±o del √°rea que debe
activarse
El √°rea se indica mediante el
n√∫mero de bits como m√∫ltiplo
de 8 (p. ej. 8, 16, 24, etc.).

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
SETI(S_BYTE := byte_array[100],
N := 16);

En el ejemplo, la instrucci√≥n activa 2 bytes (16 bits) en el √°rea de 100.0 a 101.7 del √°rea por
bytes.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

RESET: Desactivar √°rea por bits
Descripci√≥n
La instrucci√≥n "Desactivar √°rea por bits" pone a "0" el estado l√≥gico de los bits de un √°rea
definida. El punto inicial del √°rea se define mediante el puntero del par√°metro S_BIT. Si el
puntero se√±ala al √°rea de memoria de la periferia externa (P), no se ejecuta la instrucci√≥n. El
n√∫mero de bits que deben desactivarse en el √°rea indicada se determina en el par√°metro N de
la instrucci√≥n. Si el par√°metro N tiene el valor "0", la llamada de la instrucci√≥n no tendr√° efecto
alguno.

5656

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

S_BIT

Input

POINTER

I, Q, M, D

Se√±ala al primer bit del √°rea
cuyos bits se desactivan.
En el direccionamiento indi‚Äê
recto por registro inter√°rea,
el puntero debe indicarse en
formato de palabra doble.

N

Input

INT

I, Q, M, D, L, P

N√∫mero de bits que deben
desactivarse.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
RESET(S_BIT := %M0.0,
N := 10);

En el ejemplo, la instrucci√≥n desactiva 10 bits en el √°rea de M0.0 a M1.1.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

RESETP: Desactivar mapa de bits en el √°rea de periferia
Descripci√≥n
La instrucci√≥n "Desactivar mapa de bits en el √°rea de periferia" pone los bits de un √°rea de
periferia al estado l√≥gico "0". Simult√°neamente con los bits de periferia se desactivan tambi√©n
los bits correspondientes en la memoria imagen de proceso de las salidas.
Los par√°metros N y SA de la instrucci√≥n sirven para definir el mapa de bits que debe
desactivarse. Los bits del mapa deben encontrarse en aquella parte del √°rea de periferia que
tiene asignada una memoria imagen de proceso.
Si no hay periferia enchufada para una parte del mapa de bits seleccionado, la instrucci√≥n
intentar√° desactivar el mapa de bits completo. En este caso se devuelve una informaci√≥n de
error en el par√°metro RET_VAL.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5657

Instrucciones
4.2 Instrucciones
El √°rea de periferia se desactiva por bytes. Si el mapa de bits definido a trav√©s de los
par√°metros N y SA no empieza ni termina en un l√≠mite de byte, la llamada de la instrucci√≥n
tendr√° el efecto siguiente:
‚óè Los bits contenidos en el primer o √∫ltimo byte que debe transferirse y que no pertenecen al
mapa de bits definido, obtienen el valor de los bits correspondientes en la memoria imagen
de proceso de las salidas.
ADVERTENCIA
Comportamiento involuntario
El ajuste de los bits al valor de los bits correspondientes en la memoria imagen de proceso
de las salidas puede ocasionar, p. ej., el arranque accidental de motores o la desconexi√≥n
de sistemas de refrigeraci√≥n.
‚óè Los bits que pertenecen al mapa de bits definido se ponen al estado l√≥gico "0".
La llamada de la instrucci√≥n "Desactivar mapa de bits en el √°rea de periferia" no tiene efecto
alguno si el par√°metro N devuelve el valor "0".

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

N

Input

INT

I, Q, M, D, L

N√∫mero de bits que deben
desactivarse.

SA

Output

POINTER

P

Puntero al primer bit que de‚Äê
be desactivarse.

INT

I, Q, M, D, L

Informaci√≥n de error

Valor de funci√≥n (RET_VAL)

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

8xyy

Encontrar√° m√°s informaci√≥n de error en "Consulte tambi√©n".

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n en "Consulte
tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Error" := RESETP(N := 8,
SA => P#10.0);

5658

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
En el ejemplo, la instrucci√≥n desactiva 8 bits del √°rea de periferia correspondientes a las
salidas Q10.0 a Q10.7.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Evaluaci√≥n de errores con el par√°metro de salida RET_VAL (P√°gina 174)
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)
Principios b√°sicos de SCL (P√°gina 8115)

RESETI: Desactivar √°rea por bytes
Descripci√≥n
La instrucci√≥n "Desactivar √°rea por bytes" pone a "0" el estado l√≥gico de los bits de un √°rea
definida de bytes. El punto inicial del √°rea se define mediante el puntero del par√°metro
S_BYTE. El tama√±o del √°rea se define indicando el n√∫mero de bits que deben desactivarse en
el par√°metro N de la instrucci√≥n.
Nota
El valor del par√°metro N debe ser un m√∫ltiplo de 8 (p. ej. 8, 16, 24, etc.).
El puntero indicado en el par√°metro S_BYTE debe se√±alar al √°rea de memoria de la periferia
externa (P). Puesto que al √°rea de memoria "P" se accede en formato de byte, palabra y
palabra doble, el puntero del par√°metro S_BYTE debe se√±alar a un operando equivalente a un
valor l√≠mite de byte. Por tanto, el n√∫mero de bit del puntero debe ser "0".
Nota
El estado l√≥gico de los bits correspondientes en la memoria imagen de proceso de las salidas
(Q) se pone a "0".
La llamada de la instrucci√≥n "Desactivar √°rea por bytes" no tiene efecto alguno si se cumple
una de las condiciones siguientes:
‚óè El puntero del par√°metro S_BYTE no se√±ala al √°rea de memoria de la periferia externa (P).
‚óè El puntero del par√°metro S_BYTE se√±ala a un operando que no equivale a ning√∫n valor
l√≠mite de byte.
‚óè El valor del par√°metro N no es un m√∫ltiplo de 8.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5659

Instrucciones
4.2 Instrucciones

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

S_BYTE

Input

POINTER

P

Se√±ala al primer byte del
√°rea cuyos bits se desacti‚Äê
van.
En el direccionamiento indi‚Äê
recto por registro inter√°rea,
el puntero debe indicarse en
formato de palabra doble.

N

Input

INT

I, Q, M, D, L, P

Tama√±o del √°rea cuyos bits
se desactivan.
El √°rea se indica mediante el
n√∫mero de bits como m√∫ltiplo
de 8 (p. ej. 8, 16, 24, etc.).

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
RESETI(S_BYTE := byte_array[100],
N := 16);

En el ejemplo, la instrucci√≥n desactiva 2 bytes (16 bits) en el √°rea de 100.0 a 101.7 del √°rea por
bytes.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

REPL_VAL: Introducir valor sustitutivo
Descripci√≥n
La instrucci√≥n "Introducir valor sustitutivo" introduce un valor sustitutivo en el acumulador 1
(ACU 1) desde un bloque de organizaci√≥n de error s√≠ncrono.
Nota
La instrucci√≥n "Introducir valor sustitutivo" solo se puede llamar desde bloques de organizaci√≥n
de error s√≠ncrono (OB 121, OB 122).
La instrucci√≥n "Introducir valor sustitutivo" se utiliza si ya no es posible leer ning√∫n valor de un
m√≥dulo. Tras cada acceso a dicho m√≥dulo se inicia el OB 122. Llamando la instrucci√≥n
"Introducir valor sustitutivo" es posible cargar un valor sustitutivo en el acumulador 1. La
ejecuci√≥n del programa se prosigue entonces con este valor sustitutivo. La informaci√≥n

5660

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
necesaria para seleccionar el valor sustitutivo puede consultarse en las variables locales del
OB 122.

Par√°metro
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metros

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

VAL

Input

DWORD

I, Q, M, D, L

Valor sustitutivo

INT

I, Q, M, D, L

Informaci√≥n de error

Valor de funci√≥n (RET_VAL)

Par√°metro RET_VAL
La tabla siguiente muestra el significado de los valores del par√°metro RET_VAL:
C√≥digo de Descripci√≥n
error*
(W#16#....)
0000

Ning√∫n error

8080

La instrucci√≥n no se ha llamado desde un OB de error s√≠ncrono.

8xyy

Encontrar√° m√°s informaci√≥n de error en "Consulte tambi√©n".

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n en "Consulte
tambi√©n".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)
Evaluaci√≥n de errores con el par√°metro de salida RET_VAL (P√°gina 174)
Principios b√°sicos de SCL (P√°gina 8115)

DRUM: Materializar circuito secuencial sucesivo
Descripci√≥n
La instrucci√≥n "Materializar circuito secuencial sucesivo" ocupa los bits de salida programados
(OUT1 a OUT16) y la palabra de salida (OUT_WORD) con los valores programados del
par√°metro OUT_VAL del paso respectivo. El paso en cuesti√≥n debe cumplir las condiciones de
la m√°scara de habilitaci√≥n programada en el par√°metro S_MASK mientras la instrucci√≥n
permanece en dicho paso. La instrucci√≥n pasa al paso siguiente cuando el evento de √©ste es
verdadero y una vez transcurrido el tiempo programado para el paso actual, o bien cuando el
valor del par√°metro JOG cambia de "0" a "1". La instrucci√≥n se desactiva cuando el estado
l√≥gico del par√°metro RESET cambia a "1". Con ello, el paso actual se iguala al paso
predeterminado (DSP).

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5661

Instrucciones
4.2 Instrucciones
El tiempo de permanencia en un paso se calcula multiplicando la base de tiempo
predeterminada (DTBP) por el valor de contaje predeterminado (S_PRESET) para cada paso.
Al comienzo de un nuevo paso, este valor calculado se carga en el par√°metro DCC, que
contiene el tiempo restante para el paso actual. Por ejemplo, si el valor del par√°metro DTBP es
"2" y el valor predeterminado para el primer paso es "100" (100 ms), el par√°metro DCC
devolver√° el valor "200" (200 ms).
Un paso puede programarse con un valor de tiempo, con un evento o con ambos. Los pasos
programados con un bit de evento y el valor de tiempo "0" pasan al siguiente paso en cuanto
el estado l√≥gico del bit de evento es "1". Los pasos programados solo con un valor de tiempo
empiezan a contar el tiempo inmediatamente. Los pasos programados con un bit de evento y
un valor de tiempo mayor que "0" empiezan a contar el tiempo en cuanto el estado l√≥gico del
bit de evento es "1". Los bits de evento se inicializan con el estado l√≥gico "1".
Si el circuito secuencial sucesivo se encuentra en el √∫ltimo paso programado (LST_STEP) y ha
transcurrido el tiempo para dicho paso, el estado l√≥gico del par√°metro Q se pone a "1". De lo
contrario, se pone a "0". Si est√° activado el par√°metro Q, la instrucci√≥n permanece en el paso
hasta la desactivaci√≥n.
En la m√°scara configurable (S_MASK) es posible seleccionar los distintos bits de la palabra de
salida (OUT_WORD) y activar o desactivar los bits de salida (OUT1 a OUT16) mediante los
valores de salida (OUT_VAL). Si un bit de la m√°scara configurable tiene el estado l√≥gico "1",
el valor OUT_VAL activa o desactiva el bit correspondiente. Si el estado l√≥gico de un bit de la
m√°scara configurable es "0", no cambia el bit respectivo. Todos los bits de la m√°scara
configurable de todos los 16 pasos se inicializan con el estado l√≥gico "1".
El bit de salida del par√°metro OUT1 equivale al bit menos significativo de la palabra de salida
(OUT_WORD). El bit de salida del par√°metro OUT16 equivale al bit m√°s significativo de la
palabra de salida (OUT_WORD).
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si los par√°metros de bloque de la instrucci√≥n se
depositan en un bloque de datos propio (instancia individual) o bien como variable local
(multiinstancia) en la interfaz del bloque. Si crea un bloque de datos propio, lo encontrar√° en
el √°rbol del proyecto, en la carpeta "Recursos de programa", en "Bloques de programa >
Bloques de sistema". Encontrar√° m√°s informaci√≥n al respecto en "Consulte tambi√©n".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:

5662

Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

RESET

Input

BOOL

I, Q, M, D, L

El estado l√≥gico "1" indica
una condici√≥n de desactiva‚Äê
ci√≥n.

JOG

Input

BOOL

I, Q, M, D, L

Si el estado l√≥gico cambia de
"0" a "1", la instrucci√≥n pasa
al siguiente paso.

DRUM_EN

Input

BOOL

I, Q, M, D, L

El estado l√≥gico "1" permite
que el circuito secuencial su‚Äê
cesivo siga contando seg√∫n
el evento y los criterios de
tiempo.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

LST_STEP

Input

BYTE

I, Q, M, D, L

N√∫mero del √∫ltimo paso pro‚Äê
gramado.

EVENT(i),

Input

BOOL

I, Q, M, D, L

OUT(j),

Bit de evento (i);
El estado l√≥gico inicial es "1".

1 ‚â§ i ‚â§ 16
Output

BOOL

I, Q, M, D, L

Bit de salida (j)

Q

Output

BOOL

I, Q, M, D, L

El estado l√≥gico "1" indica
que ha transcurrido el tiempo
del √∫ltimo paso.

OUT_WORD

Output

WORD

I, Q, M, D, L, P

Direcci√≥n de palabra en la
que el circuito secuencial su‚Äê
cesivo escribe los valores de
salida.

ERR_CODE

Output

WORD

I, Q, M, D, L, P

Informaci√≥n de error

JOG_HIS

Static

BOOL

I, Q, M, D, L

Bit de evoluci√≥n del par√°me‚Äê
tro JOG

EOD

Static

BOOL

I, Q, M, D, L

El estado l√≥gico "1" indica
que ha transcurrido el tiempo
del √∫ltimo paso.

DSP

Static

BYTE

I, Q, M, D, L, P

Paso predeterminado del cir‚Äê
cuito secuencial sucesivo

DSC

Static

BYTE

I, Q, M, D, L, P

Paso actual del circuito se‚Äê
cuencial sucesivo

DCC

Static

DWORD

I, Q, M, D, L, P

Valor de contaje actual del
circuito secuencial sucesivo

DTBP

Static

WORD

I, Q, M, D, L, P

Base de tiempo predetermi‚Äê
nada del circuito secuencial
sucesivo

PrevTime

Static

TIME

I, Q, M, D, L

Hora de sistema anterior

S_PRESET

Static

ARRAY[1..16] of
WORD

I, Q, M, D, L

Valor de contaje predetermi‚Äê
nado para cada paso [1 a 16];
1 ciclo de reloj = 1 ms.

OUT_VAL

Static

ARRAY[1..16,
0..15] of BOOL

I, Q, M, D, L

Valores de salida para cada
paso [1 a 16, 0 a 15].

S_MASK

Static

ARRAY[1..16,
0..15] of BOOL

I, Q, M, D, L

M√°scara configurable para
cada paso [1 a 16, 0 a 15].
Los estados l√≥gicos iniciales
son "1".

1 ‚â§ j ‚â§ 16

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5663

Instrucciones
4.2 Instrucciones

Par√°metro ERR_CODE
La tabla siguiente muestra el significado de los valores del par√°metro ERR_CODE:
ERR_CO‚Äê
DE*

Explicaci√≥n

W#16#000
0

Ning√∫n error

W#16#000
B

El valor del par√°metro LST_STEP es menor que 1 o mayor que 16.

W#16#000
C

El valor del par√°metro DSC es menor que 1 o mayor que el valor del par√°metro
LST_STEP.

W#16#000
D

El valor del par√°metro DSP es menor que 1 o mayor que el valor de LST_STEP.

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n en "Consulte
tambi√©n".

Ejemplo
En el ejemplo siguiente, la instrucci√≥n pasa del paso 1 al paso 2. Los bits de salida (OUT1 a
OUT16) y la palabra de salida (OUT_WORD) se activan seg√∫n la m√°scara configurada para el
paso 2 y los valores del par√°metro OUT_VAL.
Nota
Los par√°metros est√°ticos pueden inicializarse en el bloque de datos.

SCL
"DRUM_DB"(RESET := "Tag_Reset"
JOG := "Tag_Input_Jog"
DRUM_EN := "Tag_Input_DrumEN"
LST_STEP := "Tag_Number_LastStep"
EVENT1 := "MyTag_Event_1"
EVENT2 := "MyTag_Event_2"
EVENT3 := "MyTag_Event_3"
EVENT4 := "MyTag_Event_4"
EVENT5 := "MyTag_Event_5"
EVENT6 := "MyTag_Event_6"
EVENT7 := "MyTag_Event_7"
EVENT8 := "MyTag_Event_8"
EVENT9 := "MyTag_Event_9"
EVENT10 := "MyTag_Event_10"
EVENT11 := "MyTag_Event_11"
EVENT12 := "MyTag_Event_12"
EVENT13 := "MyTag_Event_13"
EVENT14 := "MyTag_Event_14"

5664

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
SCL
EVENT15 := "MyTag_Event_15"
EVENT16 := "MyTag_Event_16"
OUT1 => "MyTag_Output_1"
OUT2 => "MyTag_Output_2"
OUT3 => "MyTag_Output_3"
OUT4 => "MyTag_Output_4"
OUT5 => "MyTag_Output_5"
OUT6 => "MyTag_Output_6"
OUT7 => "MyTag_Output_7"
OUT8 => "MyTag_Output_8"
OUT9 => "MyTag_Output_9"
OUT10 => "MyTag_Output_10"
OUT11 => "MyTag_Output_11"
OUT12 => "MyTag_Output_12"
OUT13 => "MyTag_Output_13"
OUT14 => "MyTag_Output_14"
OUT15 => "MyTag_Output_15"
OUT16 => "MyTag_Output_16"
Q => "Tag_Output_Q"
OUT_WORD => "Tag_OutputWord"
ERR_CODE => "Tag_ErrorCode");

Las tablas siguientes muestran el funcionamiento de la instrucci√≥n con valores concretos.

Antes de la ejecuci√≥n
En este ejemplo se utilizan los siguientes valores para asignar valores a los par√°metros de
entrada:
Par√°metro

Operando

Direcci√≥n

Valor

RESET

Tag_Reset

M0.0

FALSE

JOG

Tag_Input_JOG

M0.1

FALSE

DRUM_EN

Tag_Input_DrumEN

M0.2

TRUE

LST_STEP

Tag_Number_LastStep

MB1

B#16#08

EVENT2

MyTag_Event_2

M20.0

FALSE

EVENT4

MyTag_Event_4

M20.1

FALSE

EVENT6

MyTag_Event_6

M20.2

FALSE

EVENT8

MyTag_Event_8

M20.3

FALSE

EVENT10

MyTag_Event_10

M20.4

FALSE

EVENT12

MyTag_Event_12

M20.5

FALSE

EVENT14

MyTag_Event_14

M20.6

FALSE

EVENT16

MyTag_Event_16

M20.7

FALSE

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5665

Instrucciones
4.2 Instrucciones
Los siguientes valores se almacenan en el bloque de datos de instancia "DRUM_DB" de la
instrucci√≥n:

5666

Par√°metro

Direcci√≥n

Valor

JOG_HIS

DBX12.0

FALSE

EOD

DBX12.1

FALSE

DSP

DBB13

W#16#0001

DSC

DBB14

W#16#0001

DCC

DBD16

DW#16#0000000A

DTBP

DBW20

W#16#0001

S_PRESET[1]

DBW26

W#16#0064

S_PRESET[2]

DBW28

W#16#00C8

OUT_VAL[1,0]

DBX58.0

TRUE

OUT_VAL[1,1]

DBX58.1

TRUE

OUT_VAL[1,2]

DBX58.2

TRUE

OUT_VAL[1,3]

DBX58.3

TRUE

OUT_VAL[1,4]

DBX58.4

TRUE

OUT_VAL[1,5]

DBX58.5

TRUE

OUT_VAL[1,6]

DBX58.6

TRUE

OUT_VAL[1,7]

DBX58.7

TRUE

OUT_VAL[1,8]

DBX59.0

TRUE

OUT_VAL[1,9]

DBX59.1

TRUE

OUT_VAL[1,10]

DBX59.2

TRUE

OUT_VAL[1,11]

DBX59.3

TRUE

OUT_VAL[1,12]

DBX59.4

TRUE

OUT_VAL[1,13]

DBX59.5

TRUE

OUT_VAL[1,14]

DBX59.6

TRUE

OUT_VAL[1,15]

DBX59.7

TRUE

OUT_VAL[2,0]

DBX60.0

FALSE

OUT_VAL[2,1]

DBX60.1

FALSE

OUT_VAL[2,2]

DBX60.2

FALSE

OUT_VAL[2,3]

DBX60.3

FALSE

OUT_VAL[2,4]

DBX60.4

FALSE

OUT_VAL[2,5]

DBX60.5

FALSE

OUT_VAL[2,6]

DBX60.6

FALSE

OUT_VAL[2,7]

DBX60.7

FALSE

OUT_VAL[2,8]

DBX61.0

FALSE

OUT_VAL[2,9]

DBX61.1

FALSE

OUT_VAL[2,10]

DBX61.2

FALSE

OUT_VAL[2,11]

DBX61.3

FALSE

OUT_VAL[2,12]

DBX61.4

FALSE

OUT_VAL[2,13]

DBX61.5

FALSE

OUT_VAL[2,14]

DBX61.6

FALSE

OUT_VAL[2,15]

DBX61.7

FALSE

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Direcci√≥n

Valor

S_MASK[2,0]

DBX92.0

FALSE

S_MASK[2,1]

DBX92.1

TRUE

S_MASK[2,2]

DBX92.2

TRUE

S_MASK[2,3]

DBX92.3

TRUE

S_MASK[2,4]

DBX92.4

TRUE

S_MASK[2,5]

DBX92.5

FALSE

S_MASK[2,6]

DBX92.6

TRUE

S_MASK[2,7]

DBX92.7

TRUE

S_MASK[2,8]

DBX93.0

FALSE

S_MASK[2,9]

DBX93.1

FALSE

S_MASK[2,10]

DBX93.2

TRUE

S_MASK[2,11]

DBX93.3

TRUE

S_MASK[2,12]

DBX93.4

TRUE

S_MASK[2,13]

DBX93.5

TRUE

S_MASK[2,14]

DBX93.6

FALSE

S_MASK[2,15]

DBX93.7

TRUE

Los par√°metros de salida tienen los valores siguientes antes de ejecutarse la instrucci√≥n:
Par√°metro

Operando

Direcci√≥n

Valor

Q

Tag_Output_Q

M6.0

FALSE

OUTWORD

Tag_OutputWord

MW8

W#16#FFFF

OUT1

MyTag_Output_1

M4.0

TRUE

OUT2

MyTag_Output_2

M4.1

TRUE

OUT3

MyTag_Output_3

M4.2

TRUE

OUT4

MyTag_Output_4

M4.3

TRUE

OUT5

MyTag_Output_5

M4.4

TRUE

OUT6

MyTag_Output_6

M4.5

TRUE

OUT7

MyTag_Output_7

M4.6

TRUE

OUT8

MyTag_Output_8

M4.7

TRUE

OUT9

MyTag_Output_9

M5.0

TRUE

OUT10

MyTag_Output_10

M5.1

TRUE

OUT11

MyTag_Output_11

M5.2

TRUE

OUT12

MyTag_Output_12

M5.3

TRUE

OUT13

MyTag_Output_13

M5.4

TRUE

OUT14

MyTag_Output_14

M5.5

TRUE

OUT15

MyTag_Output_15

M5.6

TRUE

OUT16

MyTag_Output_16

M5.7

TRUE

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5667

Instrucciones
4.2 Instrucciones

Despu√©s de la ejecuci√≥n
Una vez ejecutada la instrucci√≥n, los valores siguientes se escriben en los par√°metros de
salida:
Par√°metro

Operando

Direcci√≥n

Valor

OUT1

MyTag_Output_1

M4.0

TRUE

OUT2

MyTag_Output_2

M4.1

FALSE

OUT3

MyTag_Output_3

M4.2

FALSE

OUT4

MyTag_Output_4

M4.3

FALSE

OUT5

MyTag_Output_5

M4.4

FALSE

OUT6

MyTag_Output_6

M4.5

TRUE

OUT7

MyTag_Output_7

M4.6

FALSE

OUT8

MyTag_Output_8

M4.7

FALSE

OUT9

MyTag_Output_9

M5.0

TRUE

OUT10

MyTag_Output_10

M5.1

TRUE

OUT11

MyTag_Output_11

M5.2

FALSE

OUT12

MyTag_Output_12

M5.3

FALSE

OUT13

MyTag_Output_13

M5.4

FALSE

OUT14

MyTag_Output_14

M5.5

FALSE

OUT15

MyTag_Output_15

M5.6

TRUE

OUT16

MyTag_Output_16

M5.7

FALSE

Q

Tag_Output_Q

M6.0

FALSE

OUTWORD

Tag_OutputWord

MW8

W#16#4321

ERR_CODE

Tag_ErrorCode

MW10

W#16#0000

Los siguientes valores se modifican en el bloque de datos de instancia "DRUM_DB" de la
instrucci√≥n despu√©s de su ejecuci√≥n:
Par√°metro

Direcci√≥n

Valor

JOG_HIS

DBX12.0

FALSE

EOD

DBX12.1

FALSE

DSC

DBB14

W#16#0002

DCC

DBD16

DW#16#000000C8

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)
Principios b√°sicos de SCL (P√°gina 8115)

5668

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

DRUM_X: Materializar circuito secuencial sucesivo
Descripci√≥n
La instrucci√≥n "Materializar circuito secuencial sucesivo" permite materializar un circuito
secuencial sucesivo con 16 pasos como m√°ximo. El n√∫mero del primer paso se define con el
par√°metro DSP. El n√∫mero del √∫ltimo paso se predetermina con el par√°metro LST_STEP.
En cada paso se escriben todos los 16 bits de salida OUT0 a OUT15 y el par√°metro de salida
OUT_WORD (que contiene los bits de salida). A un bit de salida se asigna bien sea el bit
correspondiente del campo predefinido OUT_VAL, o bien el bit de salida del paso anterior. El
valor que se asigne depender√° de la ocupaci√≥n de los bits de m√°scara en el par√°metro
S_MASK.
Nota
El ajuste predeterminado de los bits de m√°scara es 0. Para modificar el ajuste actual de uno
o varios bits de m√°scara, realice el cambio en el bloque de datos de instancia.
La instrucci√≥n "Materializar circuito secuencial sucesivo" pasa al siguiente paso cuando se
produce un flanco de se√±al ascendente en el par√°metro JOG. Si la instrucci√≥n ya se encuentra
en el √∫ltimo paso y se produce un flanco ascendente en el par√°metro JOG, se activan las
variables Q y EOD. En este caso, el par√°metro DCC se pone al valor 0. La instrucci√≥n
permanece en el √∫ltimo paso hasta que el par√°metro RESET se pone al valor "1".
Adem√°s, tambi√©n se puede permitir la transici√≥n al paso siguiente en funci√≥n del tiempo. Para
ello se debe poner al valor "1" el par√°metro DRUM_EN. La transici√≥n al paso siguiente tiene
lugar si est√° activado el bit de evento (EVENTi) correspondiente al paso actual y si ha
transcurrido el tiempo predeterminado para el paso actual. El tiempo necesario para un paso
resulta de la multiplicaci√≥n de la base de tiempo (DTBP) por el factor de tiempo v√°lido para el
paso actual (S_PRESET).
Nota
El tiempo de ejecuci√≥n restante en el paso actual (DCC) se reduce √∫nicamente si est√° activado
el bit de evento correspondiente (EVENTi).
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si los par√°metros de bloque de la instrucci√≥n se
depositan en un bloque de datos propio (instancia individual) o bien como variable local
(multiinstancia) en la interfaz del bloque. Si crea un bloque de datos propio, lo encontrar√° en
el √°rbol del proyecto, en la carpeta "Recursos de programa", en "Bloques de programa >
Bloques de sistema". Encontrar√° m√°s informaci√≥n al respecto en "Consulte tambi√©n".
Si, al llamar la instrucci√≥n, el par√°metro RESET tiene el valor "1", el circuito secuencial
sucesivo pasar√° al paso cuyo n√∫mero se ha asignado al par√°metro DSP.
Un paso puede programarse con un valor de tiempo, con un evento o con ambos. Los pasos
programados con un bit de evento y el valor de tiempo "0" pasan al siguiente paso en cuanto
el estado l√≥gico del bit de evento es "1". Los pasos programados solo con un valor de tiempo
empiezan a contar el tiempo inmediatamente. Los pasos programados con un bit de evento y
un valor de tiempo mayor que "0" empiezan a contar el tiempo en cuanto el estado l√≥gico del
bit de evento es "1".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5669

Instrucciones
4.2 Instrucciones
El circuito secuencial sucesivo tambi√©n se puede conmutar en progresi√≥n en todo momento a
trav√©s del valor del par√°metro JOG.
En la primera llamada de la instrucci√≥n, el par√°metro RESET se debe poner a 1.
Si el circuito secuencial se encuentra en el √∫ltimo paso y ha transcurrido el tiempo de ejecuci√≥n
predefinido para este paso, se activan los par√°metros Q y EOD. La instrucci√≥n permanece en
el √∫ltimo paso hasta que el par√°metro RESET adopte el valor "1".
Esta instrucci√≥n se ejecuta solo en los estados operativos ARRANQUE y RUN.
El sistema operativo inicializa la instrucci√≥n "Materializar circuito secuencial sucesivo" cuando
se efect√∫a un arranque en fr√≠o. La instrucci√≥n no se inicializa en caso de un rearranque
completo (en caliente). Si la instrucci√≥n "Materializar circuito secuencial sucesivo" debe
inicializarse tras un rearranque completo (en caliente), es preciso llamarla en el OB 100 con el
valor "1" en el par√°metro RESET.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

RESET

Input

BOOL

I, Q, M, D, L

El estado l√≥gico "1" desactiva
el circuito secuencial. En la
primera llamada de la instruc‚Äê
ci√≥n, el par√°metro RESET se
debe poner a "1".

JOG

Input

BOOL

I, Q, M, D, L

Un flanco de se√±al ascenden‚Äê
te (con respecto a la √∫ltima
llamada) provoca la transi‚Äê
ci√≥n al paso siguiente, siem‚Äê
pre que el circuito secuencial
no se encuentre a√∫n en el √∫l‚Äê
timo paso. La transici√≥n tiene
lugar independientemente
del valor asignado al par√°me‚Äê
tro DRUM_EN.

DRUM_EN

Input

BOOL

I, Q, M, D, L

Par√°metro de control que de‚Äê
termina si se puede realizar
una transici√≥n al paso si‚Äê
guiente en funci√≥n del tiem‚Äê
po. Si el valor es "1", es posi‚Äê
ble una transici√≥n en funci√≥n
del tiempo.

LST_STEP

Input

BYTE

I, Q, M, D, L

N√∫mero del √∫ltimo paso
Los valores admisibles son 1
a 16.

EVENTi,

Input

BOOL

I, Q, M, D, L

Bit de evento n.¬∫ i (pertenece
al paso i)

Output

BOOL

I, Q, M, D, L

Bit de salida n.¬∫ j (id√©ntico al
bit n.¬∫ j de OUT_WORD)

1 ‚â§ i ‚â§ 16
OUTj,
0 ‚â§ j ‚â§ 15

5670

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

Q

Output

BOOL

I, Q, M, D, L

Par√°metro de estado que in‚Äê
dica si ha transcurrido el tiem‚Äê
po predefinido por el usuario
para la ejecuci√≥n del √∫ltimo
paso.

OUT_WORD

Output

WORD

I, Q, M, D, L, P

Bits de salida resumidos en
una variable

ERR_CODE

Output

WORD

I, Q, M, D, L, P

Informaci√≥n de error

JOG_HIS

Static

BOOL

I, Q, M, D, L

Irrelevante para el usuario
(par√°metro de entrada JOG
de la llamada anterior)

EOD

Static

BOOL

I, Q, M, D, L

Id√©ntico al par√°metro de sali‚Äê
da Q

DSP

Static

BYTE

I, Q, M, D, L, P

N√∫mero del primer paso
Los valores admisibles son 1
a 16.

DSC

Static

BYTE

I, Q, M, D, L, P

N√∫mero del paso actual

DCC

Static

DWORD

I, Q, M, D, L, P

Tiempo de ejecuci√≥n restan‚Äê
te del paso actual, indicado
en milisegundos (ms) (rele‚Äê
vante solo si DRUM_EN = 1 y
el bit de evento correspon‚Äê
diente = 1)

DTBP

Static

WORD

I, Q, M, D, L, P

Base de tiempo en milisegun‚Äê
dos (ms) v√°lida para todos
los pasos

PREV_TIME

Static

DWORD

I, Q, M, D, L

(Irrelevante para el usuario:
hora de sistema de la llama‚Äê
da anterior)

S_PRESET

Static

ARRAY of WORD

I, Q, M, D, L

Campo unidimensional con
los factores de tiempo para
cada paso.
Selecci√≥n recomendada de
√≠ndices: [1 a 16].
En este caso, S_PRESET [x]
contiene el factor de tiempo
del paso x.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5671

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

OUT_VAL

Static

ARRAY of BOOL

I, Q, M, D, L

Campo bidimensional con
los valores que deben emitir‚Äê
se en cada paso, a no ser
que se hayan inhibido v√≠a
S_MASK.
Selecci√≥n recomendada de
√≠ndices: [1 a 16, 0 a 15]. En
este caso, OUT_VAL [x, y]
contiene el valor asignado al
bit de salida OUTy en el paso
x.

S_MASK

Static

ARRAY of BOOL

I, Q, M, D, L

Campo bidimensional con
los bits de m√°scara para ca‚Äê
da paso.
Selecci√≥n recomendada de
√≠ndices: [1 a 16, 0 a 15]. En
este caso, S_MASK [x, y]
contiene el bit de m√°scara
para el valor "y"-√©simo que
debe emitirse en el paso x.
Significado de los bits de
m√°scara:
‚óè 0: el valor
correspondiente del paso
anterior se asigna al
respectivo bit de salida
‚óè 1: el valor
correspondiente de
OUT_VAL se asigna al
respectivo bit de salida.

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Par√°metro ERR_CODE
La tabla siguiente muestra el significado de los valores del par√°metro ERR_CODE:
ERR_CO‚Äê
DE*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

8081

Valor no admisible en el par√°metro LST_STEP

8082

Valor no admisible en DSC

8083

Valor no admisible en DSP

8084

El producto DCC = DTBP * S_PRESET[DSC] excede el valor 2**31-1 (aprox. 24,86 d√≠as).

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n en "Consulte
tambi√©n".

5672

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Ejemplo
En el ejemplo siguiente, la instrucci√≥n pasa del paso 1 al paso 2. Los bits de salida (OUT0 a
OUT15) y la palabra de salida (OUT_WORD) se activan seg√∫n la m√°scara configurada para el
paso 2 y los valores del par√°metro OUT_VAL.
Nota
Los par√°metros est√°ticos pueden inicializarse en el bloque de datos.

SCL
"DRUM_DB"(RESET := "Tag_Reset"
JOG := "Tag_Input_Jog"
DRUM_EN := "Tag_Input_DrumEN"
LST_STEP := "Tag_Number_LastStep"
EVENT1 := "MyTag_Event_1"
EVENT2 := "MyTag_Event_2"
EVENT3 := "MyTag_Event_3"
EVENT4 := "MyTag_Event_4"
EVENT5 := "MyTag_Event_5"
EVENT6 := "MyTag_Event_6"
EVENT7 := "MyTag_Event_7"
EVENT8 := "MyTag_Event_8"
EVENT9 := "MyTag_Event_9"
EVENT10 := "MyTag_Event_10"
EVENT11 := "MyTag_Event_11"
EVENT12 := "MyTag_Event_12"
EVENT13 := "MyTag_Event_13"
EVENT14 := "MyTag_Event_14"
EVENT15 := "MyTag_Event_15"
EVENT16 := "MyTag_Event_16"
OUT0 => "MyTag_Output_0"
OUT1 => "MyTag_Output_1"
OUT2 => "MyTag_Output_2"
OUT3 => "MyTag_Output_3"
OUT4 => "MyTag_Output_4"
OUT5 => "MyTag_Output_5"
OUT6 => "MyTag_Output_6"
OUT7 => "MyTag_Output_7"
OUT8 => "MyTag_Output_8"
OUT9 => "MyTag_Output_9"
OUT10 => "MyTag_Output_10"
OUT11 => "MyTag_Output_11"
OUT12 => "MyTag_Output_12"
OUT13 => "MyTag_Output_13"
OUT14 => "MyTag_Output_14"

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5673

Instrucciones
4.2 Instrucciones
SCL
OUT15 => "MyTag_Output_15"
Q => "Tag_Output_Q"
OUT_WORD => "Tag_OutputWord"
ERR_CODE => "Tag_ErrorCode");

Las tablas siguientes muestran el funcionamiento de la instrucci√≥n con valores concretos.

Antes de la ejecuci√≥n
En este ejemplo se utilizan los siguientes valores para asignar valores a los par√°metros de
entrada:
Par√°metro

Operando

Direcci√≥n

Valor

RESET

Tag_Reset

M0.0

FALSE

JOG

Tag_Input_JOG

M0.1

FALSE

DRUM_EN

Tag_Input_Drum_EN

M0.2

TRUE

LST_STEP

Tag_Number_LastStep

MB1

B#16#08

EVENT2

MyTag_Event_2

M20.0

FALSE

EVENT4

MyTag_Event_4

M20.1

FALSE

EVENT6

MyTag_Event_6

M20.2

FALSE

EVENT8

MyTag_Event_8

M20.3

FALSE

EVENT10

MyTag_Event_10

M20.4

FALSE

EVENT12

MyTag_Event_12

M20.5

FALSE

EVENT14

MyTag_Event_14

M20.6

FALSE

EVENT16

MyTag_Event_16

M20.7

FALSE

Los siguientes valores se almacenan en el bloque de datos de instancia "DRUM_X_DB" de la
instrucci√≥n:
Par√°metro

5674

Direcci√≥n

Valor

JOG_HIS

DBX12.0

FALSE

EOD

DBX12.1

FALSE

DSP

DBB13

W#16#0001

DSC

DBB14

W#16#0001

DCC

DBD16

DW#16#0000000A

DTBP

DBW20

W#16#0001

S_PRESET[1]

DBW26

W#16#0064

S_PRESET[2]

DBW28

W#16#00C8

OUT_VAL[1,0]

DBX58.0

TRUE

OUT_VAL[1,1]

DBX58.1

TRUE

OUT_VAL[1,2]

DBX58.2

TRUE

OUT_VAL[1,3]

DBX58.3

TRUE

OUT_VAL[1,4]

DBX58.4

TRUE

OUT_VAL[1,5]

DBX58.5

TRUE

OUT_VAL[1,6]

DBX58.6

TRUE

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Direcci√≥n

Valor

OUT_VAL[1,7]

DBX58.7

TRUE

OUT_VAL[1,8]

DBX59.0

TRUE

OUT_VAL[1,9]

DBX59.1

TRUE

OUT_VAL[1,10]

DBX59.2

TRUE

OUT_VAL[1,11]

DBX59.3

TRUE

OUT_VAL[1,12]

DBX59.4

TRUE

OUT_VAL[1,13]

DBX59.5

TRUE

OUT_VAL[1,14]

DBX59.6

TRUE

OUT_VAL[1,15]

DBX59.7

TRUE

OUT_VAL[2,0]

DBX60.0

FALSE

OUT_VAL[2,1]

DBX60.1

FALSE

OUT_VAL[2,2]

DBX60.2

FALSE

OUT_VAL[2,3]

DBX60.3

FALSE

OUT_VAL[2,4]

DBX60.4

FALSE

OUT_VAL[2,5]

DBX60.5

FALSE

OUT_VAL[2,6]

DBX60.6

FALSE

OUT_VAL[2,7]

DBX60.7

FALSE

OUT_VAL[2,8]

DBX61.0

FALSE

OUT_VAL[2,9]

DBX61.1

FALSE

OUT_VAL[2,10]

DBX61.2

FALSE

OUT_VAL[2,11]

DBX61.3

FALSE

OUT_VAL[2,12]

DBX61.4

FALSE

OUT_VAL[2,13]

DBX61.5

FALSE

OUT_VAL[2,14]

DBX61.6

FALSE

OUT_VAL[2,15]

DBX61.7

FALSE

S_MASK[2,0]

DBX92.0

FALSE

S_MASK[2,1]

DBX92.1

TRUE

S_MASK[2,2]

DBX92.2

TRUE

S_MASK[2,3]

DBX92.3

TRUE

S_MASK[2,4]

DBX92.4

TRUE

S_MASK[2,5]

DBX92.5

FALSE

S_MASK[2,6]

DBX92.6

TRUE

S_MASK[2,7]

DBX92.7

TRUE

S_MASK[2,8]

DBX93.0

FALSE

S_MASK[2,9]

DBX93.1

FALSE

S_MASK[2,10]

DBX93.2

TRUE

S_MASK[2,11]

DBX93.3

TRUE

S_MASK[2,12]

DBX93.4

TRUE

S_MASK[2,13]

DBX93.5

TRUE

S_MASK[2,14]

DBX93.6

FALSE

S_MASK[2,15]

DBX93.7

TRUE

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5675

Instrucciones
4.2 Instrucciones
Los par√°metros de salida tienen los valores siguientes antes de ejecutarse la instrucci√≥n:
Par√°metro

Operando

Direcci√≥n

Valor

Q

Tag_Output_Q

M6.0

FALSE

OUTWORD

Tag_OutputWord

MW8

W#16#FFFF

OUT0

MyTag_Output_0

M4.0

TRUE

OUT1

MyTag_Output_1

M4.1

TRUE

OUT2

MyTag_Output_2

M4.2

TRUE

OUT3

MyTag_Output_3

M4.3

TRUE

OUT4

MyTag_Output_4

M4.4

TRUE

OUT5

MyTag_Output_5

M4.5

TRUE

OUT6

MyTag_Output_6

M4.6

TRUE

OUT7

MyTag_Output_7

M4.7

TRUE

OUT8

MyTag_Output_8

M5.0

TRUE

OUT9

MyTag_Output_9

M5.1

TRUE

OUT10

MyTag_Output_10

M5.2

TRUE

OUT11

MyTag_Output_11

M5.3

TRUE

OUT12

MyTag_Output_12

M5.4

TRUE

OUT13

MyTag_Output_13

M5.5

TRUE

OUT14

MyTag_Output_14

M5.6

TRUE

OUT15

MyTag_Output_15

M5.7

TRUE

Despu√©s de la ejecuci√≥n
Una vez ejecutada la instrucci√≥n, los valores siguientes se escriben en los par√°metros de
salida:

5676

Par√°metro

Operando

Direcci√≥n

Valor

OUT0

MyTag_Output_0

M4.0

TRUE

OUT1

MyTag_Output_1

M4.1

FALSE

OUT2

MyTag_Output_2

M4.2

FALSE

OUT3

MyTag_Output_3

M4.3

FALSE

OUT4

MyTag_Output_4

M4.4

FALSE

OUT5

MyTag_Output_5

M4.5

TRUE

OUT6

MyTag_Output_6

M4.6

FALSE

OUT7

MyTag_Output_7

M4.7

FALSE

OUT8

MyTag_Output_8

M5.0

TRUE

OUT9

MyTag_Output_9

M5.1

TRUE

OUT10

MyTag_Output_10

M5.2

FALSE

OUT11

MyTag_Output_11

M5.3

FALSE

OUT12

MyTag_Output_12

M5.4

FALSE

OUT13

MyTag_Output_13

M5.5

FALSE

OUT14

MyTag_Output_14

M5.6

TRUE

OUT15

MyTag_Output_15

M5.7

FALSE

Q

Tag_Output_Q

M6.0

FALSE

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Operando

Direcci√≥n

Valor

OUTWORD

Tag_OutputWord

MW8

W#16#4321

ERR_CODE

Tag_ErrorCode

MW10

W#16#0000

Los siguientes valores se almacenan en el bloque de datos de instancia "DRUM_X_DB" de la
instrucci√≥n:
Par√°metro

Direcci√≥n

Valor

JOG_HIS

DBX12.0

FALSE

EOD

DBX12.1

FALSE

DSC

DBB14

W#16#0002

DCC

DBD16

DW#16#000000C8

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)
Principios b√°sicos de SCL (P√°gina 8115)

DCAT: Alarma de tiempo para control discreto
Descripci√≥n
La instrucci√≥n "Alarma de tiempo para control discreto" acumula el tiempo desde el instante en
el que el par√°metro CMD da la orden de abrir o cerrar. El tiempo se acumula hasta excederse
el tiempo predeterminado (PT) o hasta recibir la notificaci√≥n de que el dispositivo se ha cerrado
o abierto dentro del tiempo prescrito (O_FB o C_FB). Si se excede el tiempo predeterminado
antes de recibirse la notificaci√≥n de que se ha abierto o cerrado el dispositivo, se activa la
alarma correspondiente. Si el estado l√≥gico de la entrada de la orden cambia antes del tiempo
predeterminado, se reinicia el tiempo.
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si los par√°metros de bloque de la instrucci√≥n se
depositan en un bloque de datos propio (instancia individual) o bien como variable local
(multiinstancia) en la interfaz del bloque. Si crea un bloque de datos propio, lo encontrar√° en
el √°rbol del proyecto, en la carpeta "Recursos de programa", en "Bloques de programa >
Bloques de sistema". Encontrar√° m√°s informaci√≥n al respecto en "Consulte tambi√©n".
La instrucci√≥n "Alarma de tiempo para control discreto" tiene las reacciones siguientes en las
condiciones de entrada:
‚óè Si el estado l√≥gico del par√°metro CMD cambia de "0" a "1", esto tiene los efectos siguientes
en los estados l√≥gicos de los par√°metros Q, CMD_HIS, ET, OA y CA:
‚Äì Los par√°metros Q y CMD_HIS se ponen a "1"
‚Äì Los par√°metros ET, OA y CA se ponen a "0"
‚óè Si el estado l√≥gico del par√°metro CMD cambia de "1" a "0", los par√°metros Q, ET, OA, CA
y CMD_HIS se ponen a "0".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5677

Instrucciones
4.2 Instrucciones
‚óè Si los par√°metros CMD y CMD_HIS tienen el estado l√≥gico "1" y el par√°metro O_FB se pone
a "0", la diferencia de tiempo (ms) desde la √∫ltima ejecuci√≥n de la instrucci√≥n se suma al
valor del par√°metro ET. Si el valor del par√°metro ET excede el del par√°metro PT, el estado
l√≥gico del par√°metro OA se pone a "1". Si el valor del par√°metro ET no excede el del
par√°metro PT, el estado l√≥gico del par√°metro OA se pone a "0". El valor del par√°metro
CMD_HIS se pone al del par√°metro CMD.
‚óè Si los estados l√≥gicos de los par√°metros CMD, CMD_HIS y O_FB est√°n a "1" y el par√°metro
C_FB devuelve el valor "0", el estado l√≥gico del par√°metro OA se pone a "0". El valor del
par√°metro ET se pone al del par√°metro PT. Si el estado l√≥gico del par√°metro O_FB cambia
a "0", se activa la alarma en la siguiente ejecuci√≥n de la instrucci√≥n. El valor del par√°metro
CMD_HIS se pone al del par√°metro CMD.
‚óè Si los par√°metros CMD, CMD_HIS y C_FB devuelven "0", la diferencia de tiempo (ms)
desde la √∫ltima ejecuci√≥n de la instrucci√≥n se suma al valor del par√°metro ET. Si el valor del
par√°metro ET excede el del par√°metro PT, el estado l√≥gico del par√°metro CA se pone a "1".
Si no se excede el valor del par√°metro PT, el par√°metro CA devuelve el estado l√≥gico "0".
El valor del par√°metro CMD_HIS se pone al del par√°metro CMD.
‚óè Si los par√°metros CMD, CMD_HIS y O_FB devuelven el estado l√≥gico "0" y el par√°metro
C_FB est√° a "1", el par√°metro CA se pone a "0". El valor del par√°metro ET se pone al del
par√°metro PT. Si el estado l√≥gico del par√°metro C_FB cambia a "0", se activa la alarma en
la siguiente ejecuci√≥n de la instrucci√≥n. El valor del par√°metro CMD_HIS se pone al del
par√°metro CMD.
‚óè Si los par√°metros O_FB y C_FB devuelven simult√°neamente el estado l√≥gico "1", los
estados l√≥gicos de ambas salidas de alarma se ponen a "1".
La instrucci√≥n "Alarma de tiempo para control discreto" no devuelve informaci√≥n de error.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

CMD

Input

BOOL

I, Q, M, D, L

El estado l√≥gico "0" da la or‚Äê
den de "Cerrar".
El estado l√≥gico "1" da la or‚Äê
den de "Abrir".

5678

O_FB

Input

BOOL

I, Q, M, D, L

Entrada de realimentaci√≥n al
abrir

C_FB

Input

BOOL

I, Q, M, D, L

Entrada de realimentaci√≥n al
cerrar

Q

Output

BOOL

I, Q, M, D, L

Indica el estado del par√°me‚Äê
tro CMD

OA

Output

BOOL

I, Q, M, D, L

Salida de alarma al abrir

CA

Output

BOOL

I, Q, M, D, L

Salida de alarma al cerrar

ET

Static

DINT

I, Q, M, D, L

Tiempo actual transcurrido;
un ciclo de reloj = 1 ms.

PT

Static

DINT

I, Q, M, D, L

Valor de tiempo predetermi‚Äê
nado; un ciclo de reloj = 1 ms.

PREV_TIME

Static

DWORD

I, Q, M, D, L

Hora de sistema anterior

CMD_HIS

Static

BOOL

I, Q, M, D, L

Bit de evoluci√≥n de CMD

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".
Los par√°metros est√°ticos no son visibles al efectuar la llamada de la instrucci√≥n en el
programa. Estos se almacenan en la instancia de la instrucci√≥n.

Ejemplo
En el ejemplo siguiente, el par√°metro CMD cambia de "0" a "1". Una vez ejecutada la
instrucci√≥n, el par√°metro Q se pone a "1" y las dos salidas de alarma OA y CA se ponen a "0".
El par√°metro CMD_HIS del bloque de datos de instancia se pone a "1" y el par√°metro ET se
pone a "0".
Nota
Los par√°metros est√°ticos pueden inicializarse en el bloque de datos.

SCL
"DCAT_DB"(CMD := "Tag_Input_CMD",
O_FB := "Tag_Input_O_FB",
C_FB := "Tag_Input_C_FB",
Q => "Tag_Output_Q",
OA => "Tag_Output_OA",
CA => "Tag_Output_CA");

Las tablas siguientes muestran el funcionamiento de la instrucci√≥n con valores concretos.
Antes de la ejecuci√≥n
En este ejemplo se utilizan los siguientes valores para los par√°metros de entrada y salida:
Par√°metro

Operando

Valor

CMD

Tag_Input_CMD

TRUE

O_FB

Tag_Input_O_FB

FALSE

C_FB

Tag_Input_C_FB

FALSE

Q

Tag_Output_Q

FALSE

OA

Tag_Output_OA

FALSE

CA

Tag_Output_CA

FALSE

Los siguientes valores se almacenan en el bloque de datos de instancia "DCAT_DB" de la
instrucci√≥n:
Par√°metro

Direcci√≥n

Valor

ET

DBD4

L#12

PT

DBD8

L#222

CMD_HIS

DBX16.0

FALSE

Despu√©s de la ejecuci√≥n

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5679

Instrucciones
4.2 Instrucciones
Una vez ejecutada la instrucci√≥n, los valores siguientes se escriben en los par√°metros de
salida:
Par√°metro

Operando

Valor

Q

Tag_Output_Q

TRUE

OA

Tag_Output_OA

FALSE

CA

Tag_Output_CA

FALSE

Los siguientes valores se almacenan en el bloque de datos de instancia "DCAT_DB" de la
instrucci√≥n:
Par√°metro

Direcci√≥n

Valor

ET

DBD4

L#0

CMD_HIS

DBX16.0

TRUE

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

MCAT: Alarma de tiempo para control del motor
Descripci√≥n
La instrucci√≥n "Alarma de tiempo para control del motor" acumula el tiempo desde el instante
en el que se activa una de las entradas de comando (abrir o cerrar). El tiempo se acumula hasta
que se excede el tiempo predeterminado o hasta que la entrada de realimentaci√≥n
correspondiente indica que el dispositivo ha ejecutado la operaci√≥n solicitada dentro del
tiempo prescrito. Si se excede el tiempo predeterminado antes de recibir realimentaci√≥n, se
activa la alarma correspondiente.
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si los par√°metros de bloque de la instrucci√≥n se
depositan en un bloque de datos propio (instancia individual) o bien como variable local
(multiinstancia) en la interfaz del bloque. Si crea un bloque de datos propio, lo encontrar√° en
el √°rbol del proyecto, en la carpeta "Recursos de programa", en "Bloques de programa >
Bloques de sistema". Encontrar√° m√°s informaci√≥n al respecto en "Consulte tambi√©n".

Ejecuci√≥n de la instrucci√≥n "Alarma de tiempo para control del motor"
La tabla siguiente muestra las reacciones de la instrucci√≥n "Alarma de tiempo para control del
motor" a las distintas condiciones de entrada:
Par√°metros de entrada

Par√°metros de salida

ET

O_H
IS

C_H
IS

O_C
MD

C_C
MD

S_C
MD

O_F
B

C_F
B

OO

CO

OA

CA

ET

O_H
IS

C_HI Q
S

Estado

X

1

1

X

X

X

X

X

0

0

1

1

PT

0

0

0

Alarma

X

X

X

X

X

X

1

1

0

0

1

1

PT

0

0

0

Alarma

5680

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metros de entrada

Par√°metros de salida

X

X

X

X

X

1

X

X

0

0

0

0

X

0

0

1

Stop

X

X

X

1

1

X

X

X

0

0

0

0

X

0

0

1

Stop

X

0

X

1

0

0

X

X

1

0

0

0

0

1

0

1

Empezar a
abrir

<PT

1

0

X

0

0

0

X

1

0

0

0

INC

1

0

1

Abrir

X

1

0

X

0

0

1

0

0

0

0

0

PT

1

0

1

Abierto

>=
PT

1

0

X

0

0

0

X

0

0

1

0

PT

1

0

0

Abrir alarma

X

X

0

0

1

0

X

X

0

1

0

0

0

0

1

1

Empezar a
cerrar

< PT 0

1

0

X

0

X

0

0

1

0

0

INC

0

1

1

Cerrar

X

0

1

0

X

0

0

1

0

0

0

0

PT

0

1

1

Cerrado

>=
PT

0

1

0

X

0

X

0

0

0

0

1

PT

0

1

0

Cerrar alar‚Äê
ma

X

0

0

0

0

0

X

X

0

0

0

0

X

0

0

1

Parado

Leyenda:
INC

Sumar a ET la diferencia de tiempo (en ms) desde la √∫ltima ejecuci√≥n del FB

PT

PT se pone al mismo valor que ET

X

No aplicable

< PT

ET < PT

>= PT

ET >= PT

Si los par√°metros de entrada O_HIS y C_HIS tienen el estado l√≥gico "1", se ponen inmediatamente al estado l√≥gico "0". En
este caso se aplica la √∫ltima fila de la tabla mencionada m√°s arriba (X). Puesto que por este motivo no es posible comprobar
si los par√°metros de entrada O_HIS y C_HIS tienen el estado l√≥gico "1", en este caso se asigna el siguiente valor a los
par√°metros de salida:
OO = FALSE
CO = FALSE
OA = FALSE
CA = FALSE
ET = PT
Q = TRUE

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

O_CMD

Input

BOOL

I, Q, M, D, L

Entrada de la orden "Abrir"

C_CMD

Input

BOOL

I, Q, M, D, L

Entrada de la orden "Cerrar"

S_CMD

Input

BOOL

I, Q, M, D, L

Entrada de la orden "Parar"

O_FB

Input

BOOL

I, Q, M, D, L

Entrada de realimentaci√≥n al
abrir

C_FB

Input

BOOL

I, Q, M, D, L

Entrada de realimentaci√≥n al
cerrar

OO

Output

BOOL

I, Q, M, D, L

Salida "Abrir"

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5681

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

CO

Output

BOOL

I, Q, M, D, L

Salida "Cerrar"

OA

Output

BOOL

I, Q, M, D, L

Salida de alarma al abrir

CA

Output

BOOL

I, Q, M, D, L

Salida de alarma al cerrar

Q

Output

BOOL

I, Q, M, D, L

El estado l√≥gico "0" indica
una condici√≥n de error.

ET

Static

DINT

I, Q, M, D, L

Tiempo actual transcurrido;
un ciclo de reloj = 1 ms

PT

Static

DINT

I, Q, M, D, L

Valor de tiempo predetermi‚Äê
nado; un ciclo de reloj = 1 ms

PREV_TIME

Static

DWORD

I, Q, M, D, L

Hora de sistema anterior

O_HIS

Static

BOOL

I, Q, M, D, L

Bit de evoluci√≥n "Abrir"

C_HIS

Static

BOOL

I, Q, M, D, L

Bit de evoluci√≥n "Cerrar"

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".
Los par√°metros est√°ticos no son visibles al efectuar la llamada de la instrucci√≥n en el
programa. Estos se almacenan en la instancia de la instrucci√≥n.

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
Nota
Los par√°metros est√°ticos pueden inicializarse en el bloque de datos.

SCL
"MCAT_DB"(O_CMD := "Tag_Iput_O_CMD",
C_CMD := "Tag_Input_C_CMD",
S_CMD := "Tag_Input_S_CMD",
O_FB := "Tag_Input_O_FB",
C_FB := "Tag_Input_C_FB",
OO => "Tag_OutputOpen",
CO => "Tag_OutputClosed",
OA => "Tag_Output_OA",
CA => "Tag_Output_CA",
Q => "Tag_Output_Q");

Las tablas siguientes muestran el funcionamiento de la instrucci√≥n con valores concretos.
Antes de la ejecuci√≥n
En este ejemplo se utilizan los siguientes valores para los par√°metros de entrada y salida:

5682

Par√°metro

Operando

Valor

O_CMD

Tag_Input_O_CMD

TRUE

C_CMD

Tag_Input_C_CMD

FALSE

S_CMD

Tag_Input_S_CMD

FALSE

O_FB

Tag_Input_O_FB

FALSE

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Operando

Valor

C_FB

Tag_Input_C_FB

FALSE

OO

Tag_OutputOpen

FALSE

CO

Tag_OutputClosed

FALSE

OA

Tag_Output_OA

FALSE

CA

Tag_Output_CA

FALSE

Q

Tag_Output_Q

FALSE

Los siguientes valores se almacenan en el bloque de datos de instancia "MCAT_DB" de la
instrucci√≥n:
Par√°metro

Direcci√≥n

Valor

ET

DBD4

L#2

PT

DBD8

L#22

O_HIS

DBX16.0

TRUE

C_HIS

DBX16.1

FALSE

Despu√©s de la ejecuci√≥n
Una vez ejecutada la instrucci√≥n, los valores siguientes se escriben en los par√°metros de
salida:
Par√°metro

Operando

Valor

OO

Tag_OutputOpen

TRUE

CO

Tag_OutputClosed

FALSE

OA

Tag_Output_OA

FALSE

CA

Tag_Output_CA

FALSE

Q

Tag_Output_Q

TRUE

Los siguientes valores se almacenan en el bloque de datos de instancia "MCAT_DB" de la
instrucci√≥n:
Par√°metro

Direcci√≥n

Valor

ET

DBD4

L#0

O_HIS

DBX16.0

TRUE

CMD_HIS

DBX16.1

FALSE

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5683

Instrucciones
4.2 Instrucciones

IMC: Comparar bits de entrada con bits de una m√°scara
Descripci√≥n
La instrucci√≥n "Comparar bits de entrada con bits de una m√°scara" compara el estado l√≥gico
de hasta 16 bits de entrada programados (IN_BIT0 a IN_BIT15) con el bit correspondiente de
una m√°scara. Es posible programar como m√°ximo 16 pasos con m√°scaras. El valor del
par√°metro IN_BIT0 se compara con el valor de la m√°scara CMP_VAL[x,0], siendo "x" el
n√∫mero del paso. El n√∫mero del paso de la m√°scara utilizada para la comparaci√≥n se define en
el par√°metro CMP_STEP. De esta misma manera se comparan todos los valores
programados. Los bits de entrada no programados o los bits no programados de la m√°scara
tienen el estado l√≥gico predeterminado FALSE.
Si se encuentra una correspondencia al realizar la comparaci√≥n, el estado l√≥gico del par√°metro
OUT se pone a "1". De lo contrario, el par√°metro OUT se pone a "0".
Si el valor del par√°metro CMP_STEP es mayor que 15, no se ejecuta la instrucci√≥n. En el
par√°metro ERR_CODE se emite un mensaje de error.
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si los par√°metros de bloque de la instrucci√≥n se
depositan en un bloque de datos propio (instancia individual) o bien como variable local
(multiinstancia) en la interfaz del bloque. Si crea un bloque de datos propio, lo encontrar√° en
el √°rbol del proyecto, en la carpeta "Recursos de programa", en "Bloques de programa >
Bloques de sistema". Encontrar√° m√°s informaci√≥n al respecto en "Consulte tambi√©n".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:

5684

Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN_BIT0

Input

BOOL

I, Q, M, D, L

El bit de entrada 0 se compa‚Äê
ra con el bit 0 de la m√°scara.

IN_BIT1

Input

BOOL

I, Q, M, D, L

El bit de entrada 1 se compa‚Äê
ra con el bit 1 de la m√°scara.

IN_BIT2

Input

BOOL

I, Q, M, D, L

El bit de entrada 2 se compa‚Äê
ra con el bit 2 de la m√°scara.

IN_BIT3

Input

BOOL

I, Q, M, D, L

El bit de entrada 3 se compa‚Äê
ra con el bit 3 de la m√°scara.

IN_BIT4

Input

BOOL

I, Q, M, D, L

El bit de entrada 4 se compa‚Äê
ra con el bit 4 de la m√°scara.

IN_BIT5

Input

BOOL

I, Q, M, D, L

El bit de entrada 5 se compa‚Äê
ra con el bit 5 de la m√°scara.

IN_BIT6

Input

BOOL

I, Q, M, D, L

El bit de entrada 6 se compa‚Äê
ra con el bit 6 de la m√°scara.

IN_BIT7

Input

BOOL

I, Q, M, D, L

El bit de entrada 7 se compa‚Äê
ra con el bit 7 de la m√°scara.

IN_BIT8

Input

BOOL

I, Q, M, D, L

El bit de entrada 8 se compa‚Äê
ra con el bit 8 de la m√°scara.

IN_BIT9

Input

BOOL

I, Q, M, D, L

El bit de entrada 9 se compa‚Äê
ra con el bit 9 de la m√°scara.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN_BIT10

Input

BOOL

I, Q, M, D, L

El bit de entrada 10 se com‚Äê
para con el bit 10 de la m√°s‚Äê
cara.

IN_BIT11

Input

BOOL

I, Q, M, D, L

El bit de entrada 11 se com‚Äê
para con el bit 11 de la m√°s‚Äê
cara.

IN_BIT12

Input

BOOL

I, Q, M, D, L

El bit de entrada 12 se com‚Äê
para con el bit 12 de la m√°s‚Äê
cara.

IN_BIT13

Input

BOOL

I, Q, M, D, L

El bit de entrada 13 se com‚Äê
para con el bit 13 de la m√°s‚Äê
cara.

IN_BIT14

Input

BOOL

I, Q, M, D, L

El bit de entrada 14 se com‚Äê
para con el bit 14 de la m√°s‚Äê
cara.

IN_BIT15

Input

BOOL

I, Q, M, D, L

El bit de entrada 15 se com‚Äê
para con el bit 15 de la m√°s‚Äê
cara.

CMP_STEP

Input

BYTE

I, Q, M, D, L, P

N√∫mero de paso de la m√°s‚Äê
cara con la que se compara.

OUT

Output

BOOL

I, Q, M, D, L

El estado l√≥gico "1" indica
que se ha encontrado una
correspondencia.
El estado l√≥gico "0" indica
que no se ha encontrado nin‚Äê
guna correspondencia.

ERR_CODE

Output

WORD

I, Q, M, D, L, P

CMP_VAL

Static

ARRAY OF BOOL I, Q, M, D, L

Informaci√≥n de error
M√°scaras de comparaci√≥n [0
a 15, 0 a 15]: El primer n√∫me‚Äê
ro del √≠ndice es el n√∫mero del
paso y, el segundo, el n√∫me‚Äê
ro de bit de la m√°scara.

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".
Los par√°metros est√°ticos no son visibles al efectuar la llamada de la instrucci√≥n en el
programa. Estos se almacenan en la instancia de la instrucci√≥n.

Par√°metro ERR_CODE
La tabla siguiente muestra el significado de los valores del par√°metro ERR_CODE:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

000A

El valor del par√°metro CMP_STEP es mayor que 15.

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n en "Consulte
tambi√©n".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5685

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)
Principios b√°sicos de SCL (P√°gina 8115)

SMC: Barrido de matriz
Descripci√≥n
La instrucci√≥n "Barrido de matriz" compara el estado l√≥gico de hasta 16 bits de entrada
programados (IN_BIT0 a IN_BIT15) con los bits correspondientes de las m√°scaras de
comparaci√≥n de cada paso. La ejecuci√≥n empieza por el paso 1 y contin√∫a hasta el √∫ltimo paso
programado (LAST) o hasta que se encuentre una correspondencia. El bit de entrada del
par√°metro IN_BIT0 se compara con el valor de la m√°scara CMP_VAL[x,0], siendo "x" el
n√∫mero de paso. De esta misma manera se comparan todos los valores programados. Si se
encuentra una correspondencia, el estado l√≥gico del par√°metro OUT se pone a "1" y el n√∫mero
de paso se escribe con la m√°scara correspondiente en el par√°metro OUT_STEP. Los bits de
entrada no programados o los bits no programados de la m√°scara tienen el estado l√≥gico
predeterminado FALSE. Si varios pasos tienen una m√°scara equivalente, se indica solo la
primera correspondencia encontrada en el par√°metro OUT_STEP. Si no se encuentra ninguna
correspondencia, el estado l√≥gico del par√°metro OUT se pone a "0". En este caso, el valor del
par√°metro OUT_STEP excede en "1" el valor del par√°metro LAST.
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si los par√°metros de bloque de la instrucci√≥n se
depositan en un bloque de datos propio (instancia individual) o bien como variable local
(multiinstancia) en la interfaz del bloque. Si crea un bloque de datos propio, lo encontrar√° en
el √°rbol del proyecto, en la carpeta "Recursos de programa", en "Bloques de programa >
Bloques de sistema". Encontrar√° m√°s informaci√≥n al respecto en "Consulte tambi√©n".

Sintaxis
La tabla siguiente muestra los par√°metros de la instrucci√≥n:

5686

Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN_BIT0

Input

BOOL

I, Q, M, D, L

El bit de entrada 0 se compa‚Äê
ra con el bit 0 de la m√°scara.

IN_BIT1

Input

BOOL

I, Q, M, D, L

El bit de entrada 1 se compa‚Äê
ra con el bit 1 de la m√°scara.

IN_BIT2

Input

BOOL

I, Q, M, D, L

El bit de entrada 2 se compa‚Äê
ra con el bit 2 de la m√°scara.

IN_BIT3

Input

BOOL

I, Q, M, D, L

El bit de entrada 3 se compa‚Äê
ra con el bit 3 de la m√°scara.

IN_BIT4

Input

BOOL

I, Q, M, D, L

El bit de entrada 4 se compa‚Äê
ra con el bit 4 de la m√°scara.

IN_BIT5

Input

BOOL

I, Q, M, D, L

El bit de entrada 5 se compa‚Äê
ra con el bit 5 de la m√°scara.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN_BIT6

Input

BOOL

I, Q, M, D, L

El bit de entrada 6 se compa‚Äê
ra con el bit 6 de la m√°scara.

IN_BIT7

Input

BOOL

I, Q, M, D, L

El bit de entrada 7 se compa‚Äê
ra con el bit 7 de la m√°scara.

IN_BIT8

Input

BOOL

I, Q, M, D, L

El bit de entrada 8 se compa‚Äê
ra con el bit 8 de la m√°scara.

IN_BIT9

Input

BOOL

I, Q, M, D, L

El bit de entrada 9 se compa‚Äê
ra con el bit 9 de la m√°scara.

IN_BIT10

Input

BOOL

I, Q, M, D, L

El bit de entrada 10 se com‚Äê
para con el bit 10 de la m√°s‚Äê
cara.

IN_BIT11

Input

BOOL

I, Q, M, D, L

El bit de entrada 11 se com‚Äê
para con el bit 11 de la m√°s‚Äê
cara.

IN_BIT12

Input

BOOL

I, Q, M, D, L

El bit de entrada 12 se com‚Äê
para con el bit 12 de la m√°s‚Äê
cara.

IN_BIT13

Input

BOOL

I, Q, M, D, L

El bit de entrada 13 se com‚Äê
para con el bit 13 de la m√°s‚Äê
cara.

IN_BIT14

Input

BOOL

I, Q, M, D, L

El bit de entrada 14 se com‚Äê
para con el bit 14 de la m√°s‚Äê
cara.

IN_BIT15

Input

BOOL

I, Q, M, D, L

El bit de entrada 15 se com‚Äê
para con el bit 15 de la m√°s‚Äê
cara.

OUT

Output

BOOL

I, Q, M, D, L

El estado l√≥gico "1" indica
que se ha encontrado una
correspondencia.
El estado l√≥gico "0" indica
que no se ha encontrado nin‚Äê
guna correspondencia.

OUT_STEP

Output

BYTE

I, Q, M, D, L, P

Contiene el n√∫mero de paso
con la m√°scara correspon‚Äê
diente o el n√∫mero de paso
que excede en "1" el valor del
par√°metro LAST, si no se ha
encontrado ninguna corres‚Äê
pondencia.

ERR_CODE

Output

WORD

I, Q, M, D, L, P

Informaci√≥n de error

LAST

Static

BYTE

I, Q, M, D, L, P

Indica el n√∫mero del √∫ltimo
paso en que se tiene que
buscar una m√°scara corres‚Äê
pondiente.

CMP_VAL

Static

ARRAY OF
WORD

I, Q, M, D, L

M√°scaras de comparaci√≥n [0
a 15, 0 a 15]: El primer n√∫me‚Äê
ro del √≠ndice es el n√∫mero del
paso y, el segundo, el n√∫me‚Äê
ro de bit de la m√°scara.

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5687

Instrucciones
4.2 Instrucciones
Los par√°metros est√°ticos no son visibles al efectuar la llamada de la instrucci√≥n en el
programa. Estos se almacenan en la instancia de la instrucci√≥n.

Par√°metro ERR_CODE
La tabla siguiente muestra el significado de los valores del par√°metro ERR_CODE:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

000E

El valor del par√°metro LAST es mayor que 15.

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n en "Consulte
tambi√©n".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)
Principios b√°sicos de SCL (P√°gina 8115)

LEAD_LAG: Algoritmo Lead y Lag
Descripci√≥n
La instrucci√≥n "Algoritmo Lead y Lag" procesa se√±ales con una variable anal√≥gica. El valor de
la ganancia en el par√°metro GAIN debe ser mayor que cero. El resultado de la instrucci√≥n
"Algoritmo Lead y Lag" se calcula con la siguiente ecuaci√≥n:
287

/*B7,0(
/'B7,0(6$03/(B7
/'B7,0(
,1*$,1
35(9B287*$,1
/*B7,0(6$03/(B7
/*B7,0(6$03/(B7
/*B7,0(6$03/(B7

35(9B,1

La instrucci√≥n "Algoritmo Lead y Lag" solo devuelve resultados relevantes cuando se ejecuta
en ciclos de programa fijos. Deben indicarse las mismas unidades en los par√°metros
LD_TIME, LG_TIME y SAMPLE_T. Si LG_TIME > 4 + SAMPLE_T, la instrucci√≥n se aproxima
a la siguiente funci√≥n:
OUT = GAIN * ((1 + LD_TIME * s) / (1 + LG_TIME * s)) * IN
Si el valor del par√°metro GAIN es menor o igual a cero, no se realiza el c√°lculo y el par√°metro
ERR_CODE devuelve una informaci√≥n de error.
La instrucci√≥n "Algoritmo Lead y Lag" puede utilizarse junto con bucles para la compensaci√≥n
en el control anticipativo. La instrucci√≥n comprende dos operaciones. La operaci√≥n "Lead"
desplaza la fase de la salida OUT, anticip√°ndose la salida a la entrada. En cambio, la operaci√≥n
"Lag" desplaza la salida, de manera que la salida sigue a la entrada. Puesto que la operaci√≥n
"Lag" equivale a una integraci√≥n, puede utilizarse como supresor de perturbaciones o filtro de
paso bajo. La operaci√≥n "Lead" equivale a una acci√≥n diferencial, por lo que puede utilizarse
como un filtro de paso alto. La combinaci√≥n de ambas operaciones (Lead y Lag) hace que la

5688

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
fase de salida siga a la entrada a bajas frecuencias y se le anticipe a altas frecuencias. Por este
motivo, la instrucci√≥n "Algoritmo Lead y Lag" puede utilizarse como si fuera un filtro de paso de
banda.
Al insertar la instrucci√≥n en el programa, el cuadro de di√°logo "Opciones de llamada" se abre
autom√°ticamente; en √©l se puede determinar si los par√°metros de bloque de la instrucci√≥n se
depositan en un bloque de datos propio (instancia individual) o bien como variable local
(multiinstancia) en la interfaz del bloque. Si crea un bloque de datos propio, lo encontrar√° en
el √°rbol del proyecto, en la carpeta "Recursos de programa", en "Bloques de programa >
Bloques de sistema". Encontrar√° m√°s informaci√≥n al respecto en "Consulte tambi√©n".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN

Input

REAL

I, Q, M, D, L, P

Valor de entrada del tiempo
de muestreo actual (tiempo
de ciclo) que se procesa.
En el par√°metro IN tambi√©n
se pueden indicar constan‚Äê
tes.

SAMPLE_T

Input

INT

I, Q, M, D, L, P

Tiempo de muestreo
En el par√°metro SAMPLE_T
tambi√©n se pueden indicar
constantes.

OUT

Output

REAL

I, Q, M, D, L, P

Resultado de la instrucci√≥n

ERR_CODE

Output

WORD

I, Q, M, D, L, P

Informaci√≥n de error

LD_TIME

Static

REAL

I, Q, M, D, L, P

Tiempo de anticipaci√≥n en la
misma unidad que el tiempo
de muestreo.

LG_TIME

Static

REAL

I, Q, M, D, L, P

Tiempo de seguimiento en la
misma unidad que el tiempo
de muestreo.

GAIN

Static

REAL

I, Q, M, D, L, P

Ganancia en % / % (relaci√≥n
del cambio en la salida con
respecto al cambio en la en‚Äê
trada como estado constan‚Äê
te).

PREV_IN

Static

REAL

I, Q, M, D, L, P

Entrada anterior

PREV_OUT

Static

REAL

I, Q, M, D, L, P

Salida anterior

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".
Los par√°metros est√°ticos no son visibles al efectuar la llamada de la instrucci√≥n en el
programa. Estos se almacenan en la instancia de la instrucci√≥n.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5689

Instrucciones
4.2 Instrucciones

Par√°metro ERR_CODE
La tabla siguiente muestra el significado de los valores del par√°metro ERR_CODE:
C√≥digo de
error*
(W#16#...)

Explicaci√≥n

0000

Ning√∫n error

0009

El valor del par√°metro GAIN es menor o igual a cero.

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n en "Consulte
tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
Nota
Los par√°metros est√°ticos pueden inicializarse en el bloque de datos.

SCL
"LEAD_LAG_DB"(IN := "Tag_Input",
SAMPLE_T := "Tag_Input_SAMPLE_T",
OUT => "Tag_Output_Result",
ERR_CODE => "Tag_ErrorCode");

Las tablas siguientes muestran el funcionamiento de la instrucci√≥n con valores concretos.
Antes de la ejecuci√≥n
En este ejemplo se utilizan los siguientes valores para los par√°metros de entrada:
Par√°metro

Operando

Valor

IN

Tag_Input

2.0

SAMPLE_T

Tag_Input_SAMPLE_T

10

Los siguientes valores se almacenan en el bloque de datos de instancia "LEAD_LAG_DB" de
la instrucci√≥n:
Par√°metro

Direcci√≥n

Valor

LD_TIME

DBD12

2.0

LG_TIME

DBD16

2.0

GAIN

DBD20

1.0

PREV_IN

DBD24

6.0

PREV_OUT

DBD28

6.0

Despu√©s de la ejecuci√≥n

5690

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Una vez ejecutada la instrucci√≥n, los valores siguientes se escriben en los par√°metros de
salida:
Par√°metro

Operando

Valor

OUT

Tag_Output_Result

2.0

Los siguientes valores se guardan en el bloque de datos de instancia "LEAD_LAD_DB" de la
instrucci√≥n:
Par√°metro

Operando

Valor

PREV_IN

DBD24

2.0

PREV_OUT

DBD28

2.0

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)
Principios b√°sicos de SCL (P√°gina 8115)

TONR_X: Acumulador de tiempo
Descripci√≥n
La instrucci√≥n "Acumulador de tiempo" acumula valores de tiempo dentro de un periodo
definido con ayuda de la entrada PV. La instrucci√≥n se ejecuta cuando el estado l√≥gico de la
entrada de arranque TMR_EN cambia de "0" a "1". Simult√°neamente, el temporizador cuenta
el tiempo programado en la entrada PV. Mientras se ejecuta la instrucci√≥n, a√±ade el valor de
tiempo de la entrada DELTA_T al valor de tiempo de InOut ET.
Adem√°s, deben cumplirse las siguientes condiciones:
‚óè La entrada de arranque TMR_EN devuelve el estado l√≥gico "1".
‚óè El valor de tiempo de InOut ET es menor que el valor de tiempo del par√°metro PV.
‚óè La entrada RESET devuelve el estado l√≥gico "0".
La instrucci√≥n se interrumpe cuando el estado l√≥gico de la entrada de arranque TMR_EN
cambia de "1" a "0". En cuanto el estado l√≥gico cambia de nuevo a "1", la instrucci√≥n sigue
ejecut√°ndose.
La instrucci√≥n finaliza cuando el valor de tiempo de InOut ET alcanza el valor de tiempo de la
entrada PV. Entonces, la salida Q devuelve el estado l√≥gico "1".
Mientras la salida Q devuelva el estado l√≥gico "1", el valor de tiempo de InOut ET no se
modificar√°. El valor de tiempo y la salida Q vuelven a ponerse a "0" solo cuando la entrada
RESET se pone al estado l√≥gico "1".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5691

Instrucciones
4.2 Instrucciones
Puesto que la instrucci√≥n "Acumulador de tiempo" utiliza el tiempo de ciclo (DELTA_T) del
√∫ltimo ciclo del bloque de organizaci√≥n (OB), la instrucci√≥n solo puede llamarse en bloques de
organizaci√≥n c√≠clicos.
Nota
El tiempo de ciclo del bloque de organizaci√≥n debe desplazarse desde la informaci√≥n de
arranque a la variable global del par√°metro DELTA_T.

Sintaxis
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

TMR_EN (Ti‚Äê
mer Enable)

Input

BOOL

I, Q, M, D, L

Entrada de arranque

RESET

Input

BOOL

I, Q, M, D, L

Entrada de reset

PV (Preset
Value)

Input

DINT

I, Q, M, D, L, P o
constante

Tiempo m√°ximo de lectura
del tiempo

DELTA_T

Input

INT

I, Q, M, D, L o
constante

Tiempo de ciclo del bloque
de organizaci√≥n del ciclo an‚Äê
terior

Q

Output

BOOL

I, Q, M, D, L

Salida que se establece al al‚Äê
canzar el valor de tiempo pre‚Äê
determinado

ET (Elapsed
Time)

InOut

DINT

I, Q, M, D, L

Arranca la instrucci√≥n y la
temporizaci√≥n predetermina‚Äê
da en la entrada PV

Valor de funci√≥n

Valor de tiempo acumulado
(Valor de tiempo transcurrido
actualmente + valor de tiem‚Äê
po de la entrada DELTA_T)

VOID

Valor de funci√≥n vac√≠o

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

5692

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Cronograma de impulsos
La figura siguiente muestra el cronograma de impulsos de la instrucci√≥n "Acumulador de
tiempo":
705B(1

5(6(7

4

39

(7

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := TONR_X(TMR_EN := "Tag_Start",
RESET := "Tag_Reset",
"PV := 10
DELTA_T := 2,
Q => "Tag_Output",
ET := "Tag_Elapsed_Time");

En cada cambio del estado l√≥gico de "0" a "1" en la entrada TMR_EN, el tiempo de ciclo "2" de
la entrada DELTA_T se a√±ade al valor de tiempo actual de InOut ET, hasta que se alcanza el
valor de tiempo m√°ximo "10" de la entrada PV.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5693

Instrucciones
4.2 Instrucciones

WSR: Guardar datos en el registro de desplazamiento
Descripci√≥n
La instrucci√≥n "Guardar datos en el registro de desplazamiento" escribe datos en un registro
de desplazamiento desde el origen indicado. Todo elemento del registro se desplaza a la
siguiente direcci√≥n. Los datos contenidos en la √∫ltima direcci√≥n del registro de desplazamiento
se pierden tras la operaci√≥n de desplazamiento.
Cada vez que la instrucci√≥n se ejecuta con el valor "0" en el par√°metro RESET, se leen datos
nuevos del origen (S_DATA) y se desplazan a la direcci√≥n inicial (START) del registro de
desplazamiento. El par√°metro LEN indica el n√∫mero de elementos que deben desplazarse. El
tipo de datos de los elementos se define en el par√°metro E_TYPE. Si se indica un tipo de datos
no admisible en el par√°metro E_TYPE, no se procesa la instrucci√≥n.
Si el par√°metro RESET est√° a "1" al ejecutarse la instrucci√≥n, se borra el registro. El par√°metro
Q se pone al estado l√≥gico "1" si el registro de desplazamiento est√° ocupado con ceros o si se
borra.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

RESET

Input

BOOL

I, Q, M, D, L

Entrada de reset

S_DATA

Input

POINTER

I, Q, M, D

Apunta al elemento de origen
que se desplaza a la direc‚Äê
ci√≥n inicial (START).
En el direccionamiento indi‚Äê
recto por registro inter√°rea,
el puntero debe indicarse en
formato de palabra doble.

START

Input

POINTER

I, Q, M, D

Apunta a la direcci√≥n inicial
del registro.
En el direccionamiento indi‚Äê
recto por registro inter√°rea,
el puntero debe indicarse en
formato de palabra doble.

LEN

Input

WORD

I, Q, M, D, L, P

N√∫mero de elementos que
deben desplazarse.

E_TYPE

Input

BYTE

I, Q, M, D, L, P

Indica el tipo de datos de los
elementos que deben despla‚Äê
zarse. Los siguientes tipos
de datos son admisibles:
‚óè W#16#04 = WORD
‚óè B#16#05 = INT
‚óè B#16#06 = DWORD
‚óè B#16#07 = DINT
‚óè B#16#08 = REAL

5694

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

Q

Output

BOOL

I, Q, M, D, L

Indica "0" si el par√°metro RE‚Äê
SET est√° activado (1) o si to‚Äê
dos los elementos que deben
desplazarse tienen el valor
"0".

VOID

I, Q, M, D, L

Valor de funci√≥n vac√≠o

Valor de funci√≥n

Ejemplo
En el ejemplo siguiente se desplazan cuatro elementos del tipo de datos WORD a partir de la
direcci√≥n indicada en el par√°metro START. Una vez desplazado el primer elemento del
registro a la siguiente direcci√≥n, la primera direcci√≥n se ocupar√° con los datos a los que se√±ala
el puntero en el par√°metro S_DATA. El valor del √∫ltimo elemento del registro se pierde
entonces.
SCL
WSR(RESET := "Tag_Input_Reset",
S_DATA := "Tag_Input_DataSource",
START := "Tag_Input_StartAddress",
LEN := "Tag_Input_Length",
E_TYPE := "Tag_Input_ElementType",
Q => "Tag_Output_Q");

No se transfiere ning√∫n valor de funci√≥n.
Las tablas siguientes muestran el funcionamiento de la instrucci√≥n con valores concretos.
Antes de la ejecuci√≥n
En este ejemplo se utilizan los siguientes valores para los par√°metros de entrada y salida:
Par√°metro

Operando

Valor

RESET

Tag_Input_Reset

0

S_DATA

Tag_Input_DataSource

DB2.DBX6.0
DW0 = W#16#1111
DW2 = W#16#2222
DW4 = W#16#3333
DW6 = W#16#4444

START

Tag_Input_StartAddress

DB1.DBX0.0

LEN

Tag_Input_Length

W#16#04

E_TYPE

Tag_Input_ElementType

W#16#04

Q

Tag_Output_Q

1

DW6 = W#16#1234

Despu√©s de la ejecuci√≥n

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5695

Instrucciones
4.2 Instrucciones
Una vez ejecutada la instrucci√≥n, los valores siguientes se escriben en los par√°metros de
salida:
Par√°metro

Operando

Valor

RESET

Tag_Input_Reset

0

S_DATA

Tag_Input_DataSource

DB2.DBX6.0
DW0 = W#16#1234
DW2 = W#16#1111
DW4 = W#16#2222
DW6 = W#16#3333

START

Tag_Input_StartAddress

DB1.DBX0.0

LEN

Tag_Input_Length

W#16#04

E_TYPE

Tag_Input_ElementType

B#16#04

Q

Tag_Output_Q

1

DW6 = W#16#1234

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

SHRB: Desplazar bit al registro de desplazamiento
Descripci√≥n
La instrucci√≥n "Desplazar bit al registro de desplazamiento" escribe un bit en un registro de
desplazamiento desde el origen indicado (DATA). Cada vez que la instrucci√≥n se ejecuta con
el valor "0" en el par√°metro RESET, se leen datos nuevos del origen y se desplazan a la
direcci√≥n inicial (S_BIT) del registro de desplazamiento. Los restantes bits se desplazan una
posici√≥n. El bit de la √∫ltima direcci√≥n (S_BIT + N) se pierde tras el desplazamiento. Si el
par√°metro RESET est√° a "1" mientras se ejecuta la instrucci√≥n, las direcciones del registro de
desplazamiento se ponen a "0" y no se desplazan.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

DATA

Input

BOOL

I, Q, M, D, L

Bit de origen

RESET

Input

BOOL

I, Q, M, D, L

Entrada de reset

S_BIT

Input

POINTER

I, Q, M, D

Apunta al primer bit del regis‚Äê
tro de desplazamiento.
En el direccionamiento indi‚Äê
recto por registro inter√°rea,
el puntero debe indicarse en
formato de palabra doble.

5696

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

N

Input

WORD

I, Q, M, D, L, P

N√∫mero de bits que deben
desplazarse.

VOID

I, Q, M, D, L

Valor de funci√≥n vac√≠o

Valor de funci√≥n

Ejemplo
En el ejemplo siguiente, el par√°metro N se pone al valor 14 ("E" en notaci√≥n hexadecimal), con
lo que 14 bits se desplazan a partir de la direcci√≥n indicada en el par√°metro S_BIT. Una vez
desplazados los bits, la primera direcci√≥n se ocupa con los datos del origen del par√°metro
DATA. El √∫ltimo valor de bit se pierde.
SCL
SHRB(DATA := "Tag_Input_Data",
RESET := "Tag_Input_Reset",
S_BIT := "Tag_Input_BitSource",
N := "Tag_Input_Number");

No se transfiere ning√∫n valor de funci√≥n.
Las tablas siguientes muestran el funcionamiento de la instrucci√≥n con valores concretos.
Antes de la ejecuci√≥n
En este ejemplo se utilizan los siguientes valores para los par√°metros de entrada y salida:
Par√°metro

Operando

Valor

RESET

Tag_Input_Reset

0

DATA

Tag_Input_Data

0

S_BIT

Tag_Input_BitSource

DB1.DBX1.4

N

Tag_Input_Number

B#16#0E

Antes de ejecutarse la instrucci√≥n, los siguientes estados l√≥gicos est√°n almacenados en los 14
bits del registro:


























6B%,7







































Despu√©s de la ejecuci√≥n
Una vez ejecutada la instrucci√≥n, los siguientes estados l√≥gicos se almacenan en los 14 bits
del registro:

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5697

Instrucciones
4.2 Instrucciones


























6B%,7







































Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

SEG: Generar patr√≥n de bits para el display de 7 segmentos
Descripci√≥n
La instrucci√≥n "Generar patr√≥n de bits para el display de 7 segmentos" convierte cada una de
las cuatro cifras hexadecimales de la palabra de origen indicada (IN) en un patr√≥n de bits
equivalente para un display de 7 segmentos. El resultado de la instrucci√≥n se deposita en la
palabra doble del par√°metro OUT.
Entre las cifras hexadecimales y la ocupaci√≥n de los 7 segmentos (a, b, c, d, e, f, g) existe la
siguiente relaci√≥n:

5698

Cifra de en‚Äê
trada

Ocupaci√≥n de los
segmentos

Display

(binaria)

‚Äëgfedcba

0000

00111111

0

0001

00000110

1

0010

01011011

2

0011

01001111

3

0100

01100110

4

0101

01101101

5

0110

01111101

6

0111

00000111

7

1000

01111111

8

1001

01100111

9

1010

01110111

A

1011

01111100

B

1100

00111001

C

1101

01011110

D

1110

01111001

E

1111

01110001

F

Display de siete segmentos

(hexadecimal)
D
I

E
J

H

F
G

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN

Input

WORD

I, Q, M, D, L, P

Palabra de origen con cuatro
cifras hexadecimales

OUT

Output

DWORD

I, Q, M, D, L, P

Patr√≥n de bits para el display
de 7 segmentos

VOID

I, Q, M, D, L

Valor de funci√≥n vac√≠o

Valor de funci√≥n

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
SEG(IN := "Tag_Input",
OUT => "Tag_Output");

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Par√°metro

Operando

Valor

Hexadecimal

Binario

IN

Tag_Input

W#16#1234

0001 0010 0011 0100

OUT

Tag_Output

DW16#065B4F66

00000110 01011011 01001111
01100110
Visualizaci√≥n: 1234

No se transfiere ning√∫n valor de funci√≥n.

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

BCDCPL: Generar complemento a diez
Descripci√≥n
La instrucci√≥n "Generar complemento a diez" crea el complemento a diez de un n√∫mero BCD
de siete d√≠gitos que se indica en el operando. La instrucci√≥n realiza el c√°lculo con la siguiente
f√≥rmula matem√°tica:
10000000 (como BCD)
‚Äì Valor BCD de 7 d√≠gitos
---------------------------------------Complemento a diez (como BCD)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5699

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Operando>

Input

DWORD

I, Q, M, D, L, P

N√∫mero BCD de 7 d√≠gitos

DWORD

I, Q, M, D, L, P

Resultado de la instrucci√≥n

Valor de funci√≥n

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := BCDCPL("Tag_Input");

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores concretos:
Operando

Valor*

Tag_Input

DW#16#01234567

Tag_Result

DW#16#08765433

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n en "Consulte
tambi√©n".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Cambiar formatos de visualizaci√≥n en el estado del programa (P√°gina 8529)
Principios b√°sicos de SCL (P√°gina 8115)

BITSUM: Contar n√∫mero de bits activados
Descripci√≥n
La instrucci√≥n "Contar n√∫mero de bits activados" cuenta el n√∫mero de bits de un operando que
est√°n puestos al estado l√≥gico "1".

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Operando>

Input

DWORD

I, Q, M, D, L, P

Operando cuyos bits activa‚Äê
dos se cuentan

INT

I, Q, M, D, L, P

Resultado de la instrucci√≥n

Valor de funci√≥n

5700

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
SCL
"Tag_Result" := BITSUM("Tag_Input");

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores concretos:
Operando

Valor*

Tag_Input

DW#16#12345678

Tag_Result

W#16#000D (13 bits)

*En el editor de programas, los c√≥digos de error se pueden representar como valores enteros o hexa‚Äê
decimales. Encontrar√° m√°s informaci√≥n sobre el cambio de los formatos de visualizaci√≥n en "Consulte
tambi√©n".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de SCL (P√°gina 8115)

4.2.2.5

GRAPH

Cadena GRAPH
Etapa y transici√≥n
Descripci√≥n
El componente de estructura "Etapa y transici√≥n" permite insertar simult√°neamente una etapa
y una transici√≥n en la cadena secuencial.
Consulte tambi√©n:
Etapa (P√°gina 5702)
Transici√≥n (P√°gina 5703)

Consulte tambi√©n
Etapa (P√°gina 5702)
Transici√≥n (P√°gina 5703)
Fin de cadena (P√°gina 5703)
Salto a etapa (P√°gina 5704)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5701

Instrucciones
4.2 Instrucciones
Rama alternativa (P√°gina 5704)
Rama simult√°nea (P√°gina 5705)
Cerrar rama (P√°gina 5705)
Etapas y transiciones (P√°gina 8198)

Etapa
Descripci√≥n
Las etapas sirven para dividir las tareas de automatizaci√≥n complejas en tareas m√°s peque√±as
y claras que, seguidamente, se llevan a cabo por medio de acciones. Las diferentes etapas se
organizan en cadenas secuenciales, de modo que al ejecutar el programa cada etapa se
procesa en el orden especificado. Cada etapa debe tener un nombre y un n√∫mero un√≠vocos.
Para que el procesamiento se lleve a cabo realmente, la etapa debe activarse con una de las
condiciones siguientes:
‚óè La etapa se ha definido como inicial.
‚óè Se cumple la transici√≥n de la etapa anterior.
‚óè La etapa es llamada por una acci√≥n controlada por evento.
Una vez se han procesado todas las acciones se vuelve a desactivar la etapa.
Las etapas en las que no hay ninguna acci√≥n programada se denominan etapas vac√≠as. Una
etapa vac√≠a tiene el mismo comportamiento que una etapa activa y la transici√≥n siguiente
siempre se cumple.

Consulte tambi√©n
Principios b√°sicos de las etapas (P√°gina 8198)
Etapa y transici√≥n (P√°gina 5701)
Transici√≥n (P√°gina 5703)
Fin de cadena (P√°gina 5703)
Salto a etapa (P√°gina 5704)
Rama alternativa (P√°gina 5704)
Rama simult√°nea (P√°gina 5705)
Cerrar rama (P√°gina 5705)

5702

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Transici√≥n
Descripci√≥n
Las transiciones se encuentran entre una etapa y otra y contienen las condiciones para pasar
de una etapa a la siguiente. Cuando se cumplen las condiciones de continuaci√≥n de una
transici√≥n, se activa la etapa siguiente y se procesan sus acciones. Las condiciones de una
transici√≥n se programan en KOP o FUP.

Consulte tambi√©n
Principios b√°sicos de las transiciones (P√°gina 8200)
Etapa y transici√≥n (P√°gina 5701)
Etapa (P√°gina 5702)
Fin de cadena (P√°gina 5703)
Salto a etapa (P√°gina 5704)
Rama alternativa (P√°gina 5704)
Rama simult√°nea (P√°gina 5705)
Cerrar rama (P√°gina 5705)

Fin de cadena
Descripci√≥n
El componente de estructura "Fin de cadena" permite finalizar una cadena secuencial o una
rama. En una rama simult√°nea, sin embargo, el fin de cadena debe estar precedido de una
transici√≥n.
Nota
Si todas las ramas de una cadena secuencial se cierran con un fin de cadena, es posible volver
a iniciar la cadena secuencial con el par√°metro "INIT_SQ" o con el bot√≥n "Inicializar" de la Task
Card "Test" en la paleta "Control secuencial".

Consulte tambi√©n
Elementos de una cadena secuencial (P√°gina 8194)
Etapa y transici√≥n (P√°gina 5701)
Etapa (P√°gina 5702)
Transici√≥n (P√°gina 5703)
Salto a etapa (P√°gina 5704)
Rama alternativa (P√°gina 5704)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5703

Instrucciones
4.2 Instrucciones
Rama simult√°nea (P√°gina 5705)
Cerrar rama (P√°gina 5705)

Salto a etapa
Descripci√≥n
Con un salto se prosigue la ejecuci√≥n del programa en una etapa cualquiera dentro del bloque
de funci√≥n GRAPH. Los saltos pueden insertarse al final de la rama principal o de una rama
alternativa, de modo que sea posible procesar la cadena secuencial c√≠clicamente. El salto y su
destino se representan en la cadena secuencial en forma de flecha, de modo que en el destino
del salto se indica la transici√≥n de origen.

Consulte tambi√©n
Elementos de una cadena secuencial (P√°gina 8194)
Etapa y transici√≥n (P√°gina 5701)
Etapa (P√°gina 5702)
Transici√≥n (P√°gina 5703)
Fin de cadena (P√°gina 5703)
Rama alternativa (P√°gina 5704)
Rama simult√°nea (P√°gina 5705)
Cerrar rama (P√°gina 5705)

Rama alternativa
Descripci√≥n
Las ramas alternativas permiten programar ramas O. Esto significa que, despu√©s de una
etapa, se insertan ramas que empiezan con una transici√≥n. En funci√≥n de la transici√≥n que se
cumpla primero se ejecutar√° la rama correspondiente. Si se cumplen varias transiciones al
mismo tiempo, tendr√° prioridad la transici√≥n que est√© m√°s a la izquierda y se ejecutar√° la rama
correspondiente. Las ramas alternativas finalizan con otra transici√≥n.
Es posible programar un m√°ximo de 125 ramas alternativas en una cadena secuencial.

Consulte tambi√©n
Elementos de una cadena secuencial (P√°gina 8194)
Etapa y transici√≥n (P√°gina 5701)
Etapa (P√°gina 5702)
Transici√≥n (P√°gina 5703)
Fin de cadena (P√°gina 5703)

5704

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Salto a etapa (P√°gina 5704)
Rama simult√°nea (P√°gina 5705)
Cerrar rama (P√°gina 5705)

Rama simult√°nea
Descripci√≥n
Las ramas simult√°neas permiten programar ramas Y. Esto significa que con una transici√≥n se
activan varias etapas cuyas acciones se ejecutar√°n a continuaci√≥n. Por ese motivo, las ramas
simult√°neas empiezan y terminan siempre con una etapa.
Las transiciones posteriores de las ramas simult√°neas se encuentran en la rama principal, de
modo que las diferentes ramas simult√°neas pueden cerrarse en diferentes puntos de la rama
principal. Tenga en cuenta que las ramas que se agrupan en una transici√≥n no conmutar√°n a
la etapa siguiente, hasta que no se hayan ejecutado por completo dichas ramas.
Es posible programar un m√°ximo de 249 ramas simult√°neas en una cadena secuencial.

Consulte tambi√©n
Elementos de una cadena secuencial (P√°gina 8194)
Etapa y transici√≥n (P√°gina 5701)
Etapa (P√°gina 5702)
Transici√≥n (P√°gina 5703)
Fin de cadena (P√°gina 5703)
Salto a etapa (P√°gina 5704)
Rama alternativa (P√°gina 5704)
Cerrar rama (P√°gina 5705)

Cerrar rama
Descripci√≥n
El elemento "Cerrar rama" permite cerrar ramas simult√°neas o alternativas y llevarlas a su
rama matriz. Esto debe hacerse cuando la rama no se cierra con un salto o un fin de cadena.
En una rama simult√°nea solo es posible insertar "Cerrar rama" despu√©s de una etapa.

Consulte tambi√©n
Elementos de una cadena secuencial (P√°gina 8194)
Etapa y transici√≥n (P√°gina 5701)
Etapa (P√°gina 5702)

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5705

Instrucciones
4.2 Instrucciones
Transici√≥n (P√°gina 5703)
Fin de cadena (P√°gina 5703)
Salto a etapa (P√°gina 5704)
Rama alternativa (P√°gina 5704)
Rama simult√°nea (P√°gina 5705)

Acciones GRAPH
Temporizadores
TP: Impulso
Descripci√≥n
La instrucci√≥n "Impulso" activa la salida Q por un tiempo programado. La instrucci√≥n se inicia
cuando el resultado l√≥gico (RLO) del par√°metro IN cambia de "0" a "1" (flanco de se√±al
ascendente). Para poder ejecutar la instrucci√≥n se requiere una operaci√≥n l√≥gica precedente.
Se puede colocar dentro o al final del segmento. El tiempo programado PT empieza a contar
al iniciar la instrucci√≥n. El par√°metro Q se activa por el tiempo PT, independientemente de
c√≥mo evolucione la se√±al de entrada. La detecci√≥n de un nuevo flanco de se√±al ascendente
tampoco influye en el estado l√≥gico del par√°metro Q mientras transcurra el tiempo PT.
El valor actual de tiempo se puede consultar en el par√°metro ET. Este valor de tiempo empieza
a partir de T#0s y termina al alcanzarse el valor del tiempo PT. Si cuando se alcanza el tiempo
PT el estado l√≥gico del par√°metro IN es "0", se resetea el par√°metro ET.
A cada llamada de la instrucci√≥n "Impulso" debe asign√°rsele un temporizador CEI, en el que
se guardan los datos de la instrucci√≥n. Un temporizador CEI se puede declarar como se indica
a continuaci√≥n:
‚óè Declaraci√≥n de un bloque de datos del tipo TP (p. ej., "TP_DB")
Al insertar la instrucci√≥n en el programa se abre autom√°ticamente el cuadro de di√°logo
"Opciones de llamada". El bloque de datos creado se encuentra en la carpeta "Recursos del
programa" del √°rbol del proyecto, en "Bloques de programa > Bloques de sistema". Encontrar√°
m√°s informaci√≥n al respecto en "Consulte tambi√©n".
El sistema operativo desactiva las instancias de la instrucci√≥n "Impulso" cuando se realiza un
arranque en fr√≠o. Si alguna instancia de la instrucci√≥n debe estar inicializada tras un rearranque
completo (en caliente), las instancias que se deben inicializar se deben llamar en un OB de
arranque con el valor "0" en el par√°metro PT. Si un bloque diferente contiene instancias de la
instrucci√≥n "Impulso", estas pueden inicializarse p. ej. inicializando el bloque de nivel superior.
Nota
Ignorar instrucci√≥n
Si en el programa no se llama la instrucci√≥n porque, p. ej., esta es ignorada, el par√°metro ET
devuelve un valor de constante en cuanto ha transcurrido este tiempo.

5706

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Nota
Actualizaci√≥n de los datos de la instrucci√≥n
Los datos de la instrucci√≥n se actualizan √∫nicamente al llamar la instrucci√≥n. Al acceder a las
salidas Q o ET, no se actualizan los datos.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN

Input

BOOL

I, Q, M, D, L

Entrada de arranque

PT

Input

TIME

I, Q, M, D, L, P o
constante

Duraci√≥n del impulso
El valor del par√°metro PT de‚Äê
be ser positivo.

Q

Output

BOOL

I, Q, M, D, L

Salida de impulso

ET

Output

TIME

I, Q, M, D, L

Valor de tiempo actual

En la lista desplegable "???" puede seleccionar el tipo de datos de la instrucci√≥n.
Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Cronograma de impulsos
La figura siguiente muestra el cronograma de impulsos de la instrucci√≥n "Impulso":
,1

4

37

37

37

(7
37

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5707

Instrucciones
4.2 Instrucciones

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
GRAPH
CALL TP TIME, "IEC_TP_DB"
(IN := "Tag_Start"
PT := "Tag_PresetTIME"
Q => "Tag_Status"
ET => "Tag_ElapsedTIME"
)

Cuando el estado l√≥gico del operando "Tag_Start" cambia de "0" a "1", el tiempo programado
en el par√°metro PT empieza a contar y el operando "Tag_Status" se pone a "1". El valor de
tiempo actual se guarda en el operando "Tag_ElapsedTIME".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Principios b√°sicos de GRAPH (P√°gina 8191)

TON: Retardo al conectar
Descripci√≥n
La instrucci√≥n "Retardo al conectar" retarda la activaci√≥n de la salida Q por el tiempo
programado PT. La instrucci√≥n se inicia cuando el resultado l√≥gico (RLO) de la entrada IN
cambia de "0" a "1" (flanco de se√±al ascendente). Para poder ejecutar la instrucci√≥n se requiere
una operaci√≥n l√≥gica precedente. Se puede colocar dentro o al final del segmento. El tiempo
programado PT empieza a contar al iniciar la instrucci√≥n. Una vez transcurrido el tiempo PT,
la salida Q devuelve el estado l√≥gico "1". La salida Q permanece activada mientras la entrada
de arranque IN est√© puesta a "1". Cuando el estado l√≥gico de la entrada de arranque cambia
de "1" a "0", se desactiva la salida Q. La funci√≥n de temporizaci√≥n se reinicia al detectarse un
nuevo flanco de se√±al ascendente en la entrada de arranque.
El valor de tiempo actual se puede consultar en la salida ET. Este valor de tiempo empieza a
partir de T#0s y termina al alcanzarse el valor del tiempo PT. La salida ET se desactiva en
cuanto el estado l√≥gico de la entrada IN cambia a "0".
A cada llamada de la instrucci√≥n "Retardo al conectar" debe asign√°rsele un temporizador CEI,
en el que se guardan los datos de la instrucci√≥n. Un temporizador CEI se puede declarar como
se indica a continuaci√≥n:
‚óè Declaraci√≥n de un bloque de datos del tipo TON (p. ej., "TON_DB")
Al insertar la instrucci√≥n en el programa se abre autom√°ticamente el cuadro de di√°logo
"Opciones de llamada". El bloque de datos creado se encuentra en la carpeta "Recursos del
programa" del √°rbol del proyecto, en "Bloques de programa > Bloques de sistema". Encontrar√°
m√°s informaci√≥n al respecto en "Consulte tambi√©n".

5708

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
El sistema operativo desactiva las instancias de la instrucci√≥n "Retardo al conectar" cuando se
realiza un arranque en fr√≠o. Si alguna instancia de la instrucci√≥n debe estar inicializada tras un
rearranque completo (en caliente), las instancias que se deben inicializar se deben llamar en
un OB de arranque con el valor "0" en el par√°metro PT. Si un bloque diferente contiene
instancias de la instrucci√≥n "Retardo al conectar", estas pueden inicializarse p. ej. inicializando
el bloque de nivel superior.
Nota
Ignorar instrucci√≥n
Si en el programa no se llama la instrucci√≥n porque, p. ej., esta es ignorada, la salida ET
devuelve un valor de constante en cuanto ha transcurrido este tiempo.
Nota
Actualizaci√≥n de los datos de la instrucci√≥n
Los datos de la instrucci√≥n se actualizan √∫nicamente al llamar la instrucci√≥n. Al acceder a las
salidas Q o ET, no se actualizan los datos.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN

Input

BOOL

I, Q, M, D, L

Entrada de arranque

PT

Input

TIME

I, Q, M, D, L, P o
constante

Tiempo del retardo al conec‚Äê
tar
El valor del par√°metro PT de‚Äê
be ser positivo.

Q

Output

BOOL

I, Q, M, D, L

Salida que se activa una vez
transcurrido el tiempo PT.

ET

Output

TIME

I, Q, M, D, L

Valor de tiempo actual

En la lista desplegable "???" puede seleccionar el tipo de datos de la instrucci√≥n.
Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5709

Instrucciones
4.2 Instrucciones

Cronograma de impulsos
La figura siguiente muestra el cronograma de impulsos de la instrucci√≥n "Retardo al conectar":
,1

4

37

37

(7
37

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
GRAPH
CALL TON TIME, "IEC_TON_DB"
(IN := "Tag_Start"
PT := "Tag_PresetTIME"
Q => "Tag_Status"
ET => "Tag_ElapsedTIME"
)

Cuando el estado l√≥gico del operando "Tag_Start" cambia de "0" a "1", el tiempo programado
en el par√°metro PT empieza a contar. Una vez transcurrido el tiempo, el operando
"Tag_Status" se pone al estado l√≥gico "1". El operando "Tag_Status" permanece a "1" mientras
el operando "Tag_Start" tenga el estado l√≥gico "1". El valor de tiempo actual se guarda en el
operando "Tag_ElapsedTime". Cuando el estado l√≥gico del operando "Tag_Start" cambia de
"1" a "0", se resetea el operando "Tag_Status".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Principios b√°sicos de GRAPH (P√°gina 8191)

5710

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

TOF: Retardo al desconectar
Descripci√≥n
La instrucci√≥n "Retardo al desconectar" retarda la desactivaci√≥n de la salida Q por el tiempo
programado PT. La salida Q se activa cuando el resultado l√≥gico (RLO) de la entrada IN
cambia de "0" a "1" (flanco de se√±al ascendente). Para poder ejecutar la instrucci√≥n se requiere
una operaci√≥n l√≥gica precedente. Se puede colocar dentro o al final del segmento. Cuando el
estado l√≥gico de la entrada IN cambia nuevamente a "0", el tiempo programado PT deja de
contar. La salida Q permanece activada mientras transcurre el tiempo PT. Una vez
transcurrido el tiempo PT se desactiva la salida Q. Si el estado l√≥gico de la entrada IN cambia
a "1" antes de que transcurra el tiempo PT, se inicializa el temporizador. El estado l√≥gico de la
salida Q permanece en "1".
El valor de tiempo actual se puede consultar en la salida ET. Este valor de tiempo empieza a
partir de T#0s y termina al alcanzarse el valor del tiempo PT. Una vez transcurrido el tiempo
PT, el valor actual de la salida ET se conserva hasta que la entrada IN cambie nuevamente a
"1". Si el estado l√≥gico de la entrada IN cambia a "1" antes de transcurrir el tiempo PT, la salida
ET adopta el valor T#0s.
A cada llamada de la instrucci√≥n "Retardo al desconectar" debe asign√°rsele un temporizador
CEI, en el que se guarden los datos de la instrucci√≥n. Un temporizador CEI se puede declarar
como se indica a continuaci√≥n:
‚óè Declaraci√≥n de un bloque de datos del tipo TOF (p. ej., "TOF_DB")
Al insertar la instrucci√≥n en el programa se abre autom√°ticamente el cuadro de di√°logo
"Opciones de llamada". El bloque de datos creado se encuentra en la carpeta "Recursos del
programa" del √°rbol del proyecto, en "Bloques de programa > Bloques de sistema". Encontrar√°
m√°s informaci√≥n al respecto en "Consulte tambi√©n".
El sistema operativo desactiva las instancias de la instrucci√≥n "Retardo al desconectar"
cuando se realiza un arranque en fr√≠o. Si alguna instancia de la instrucci√≥n debe estar
inicializada tras un rearranque completo (en caliente), las instancias que se deben inicializar se
deben llamar en un OB de arranque con el valor "0" en el par√°metro PT. Si un bloque diferente
contiene instancias de la instrucci√≥n "Retardo al desconectar", estas pueden inicializarse p. ej.
inicializando el bloque de nivel superior.
Nota
Ignorar instrucci√≥n
Si en el programa no se llama la instrucci√≥n porque, p. ej., esta es ignorada, la salida ET
devuelve un valor de constante en cuanto ha transcurrido este tiempo.
Nota
Actualizaci√≥n de los datos de la instrucci√≥n
Los datos de la instrucci√≥n se actualizan √∫nicamente al llamar la instrucci√≥n. Al acceder a las
salidas Q o ET, no se actualizan los datos.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5711

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN

Input

BOOL

I, Q, M, D, L

Entrada de arranque

PT

Input

TIME

I, Q, M, D, L, P o
constante

Tiempo del retardo al desco‚Äê
nectar
El valor del par√°metro PT de‚Äê
be ser positivo.

Q

Output

BOOL

I, Q, M, D, L

Salida que se desactiva una
vez transcurrido el tiempo PT.

ET

Output

TIME

I, Q, M, D, L

Valor de tiempo actual

En la lista desplegable "???" puede seleccionar el tipo de datos de la instrucci√≥n.
Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Cronograma de impulsos
La figura siguiente muestra el cronograma de impulsos de la instrucci√≥n "Retardo al
desconectar":
,1

4
37

37

(7
37

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
GRAPH
CALL TOF TIME, "IEC_TOF_DB"
(IN := "Tag_Start"
PT := "Tag_PresetTIME"
Q => "Tag_Status"

5712

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
GRAPH
ET => "Tag_ElapsedTIME"
)

Si se produce un cambio del estado l√≥gico del operando "Tag_Start" de "0" a "1", el operando
se pone a "Tag_Status". Cuando el estado l√≥gico del operando "Tag_Start" cambia de "1" a "0",
el tiempo programado en el par√°metro PT empieza a contar. Mientras transcurra el tiempo,
permanecer√° activado el operando "Tag_Status". Una vez transcurrido el tiempo, el operando
"Tag_Status" se desactiva. El valor de tiempo actual se guarda en el operando
"Tag_ElapsedTIME".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Principios b√°sicos de GRAPH (P√°gina 8191)

Contadores
CTU: Contador ascendente
Descripci√≥n
La instrucci√≥n "Contador ascendente" incrementa el valor en la salida CV. Cuando el estado
l√≥gico de la entrada CU cambia de "0" a "1" (flanco de se√±al ascendente), se ejecuta la
instrucci√≥n y el valor actual de contaje de la salida CV se incrementa en uno. El valor de contaje
se incrementa cada vez que se detecta un flanco de se√±al ascendente, hasta alcanzar el valor
l√≠mite superior del tipo de datos indicado en la salida CV. Cuando se alcanza el valor l√≠mite
superior, el estado l√≥gico de la entrada CU deja de tener efecto en la instrucci√≥n.
El estado del contador se puede consultar en la salida Q. El estado l√≥gico de la salida Q es
determinado por el par√°metro PV. Si el valor de contaje actual es mayor o igual que valor del
par√°metro PV, la salida Q adopta el estado l√≥gico "1". En todos los dem√°s casos, el estado
l√≥gico de la salida Q es "0".
El valor de la salida CV se pone a cero cuando el estado l√≥gico de la entrada R cambia a "1".
Mientras la entrada R tenga el estado l√≥gico "1", el estado l√≥gico de la entrada CU no tendr√°
efecto alguno en la instrucci√≥n.
Nota
Utilice el contador en una sola posici√≥n del programa para evitar fallos de contaje.
A cada llamada de la instrucci√≥n "Contador ascendente" debe asign√°rsele un contador CEI, en
el que se guarden los datos de la instrucci√≥n. Un contador CEI se declara del siguiente modo:
‚óè Declaraci√≥n de un bloque de datos del tipo CTU (p. ej., "CTU_DB")
Al insertar la instrucci√≥n en el programa se abre autom√°ticamente el cuadro de di√°logo
"Opciones de llamada". El bloque de datos creado se encuentra en la carpeta "Recursos del

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5713

Instrucciones
4.2 Instrucciones
programa" del √°rbol del proyecto, en "Bloques de programa > Bloques de sistema". Encontrar√°
m√°s informaci√≥n al respecto en "Consulte tambi√©n".
El sistema operativo inicializa las instancias de la instrucci√≥n "Contador ascendente" cuando
se realiza un arranque en fr√≠o. Si deben inicializarse instancias de la instrucci√≥n tras un
rearranque completo (en caliente), las instancias por inicializar deben llamarse en un OB de
arranque con el valor "1" en el par√°metro R de la instrucci√≥n. Si un bloque diferente contiene
instancias de la instrucci√≥n "Contador ascendente", estas pueden resetearse p. ej.
inicializando el bloque de nivel superior.
Para poder ejecutar la instrucci√≥n "Contador ascendente" se requiere una operaci√≥n l√≥gica
precedente. Se puede colocar dentro o al final del segmento.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

CU

Input

BOOL

I, Q, M, D, L

Entrada de contaje

R

Input

BOOL

I, Q, M, D, L, T, C,
P

Entrada de reset

PV

Input

INT

I, Q, M, D, L, P o
constante

Valor con el que se activa la
salida Q.

Q

Output

BOOL

I, Q, M, D, L

Estado del contador

CV

Output

INT

I, Q, M, D, L, P

Valor de contaje actual

En la lista desplegable "???" puede seleccionar el tipo de datos de la instrucci√≥n.
Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
GRAPH
CALL CTU INT,"IEC_CTU_DB"
(CU := "Tag_Start"
R := "Tag_ResetCOUNTER"
PV := "Tag_PresetValue"
Q => "Tag_Status"
CV => "Tag_CounterValue"
)

Cuando el estado l√≥gico del operando "Tag_Start" cambia de "0" a "1", se ejecuta la instrucci√≥n
"Contador ascendente" y el valor de contaje actual del operando "Tag_CounterValue" se
incrementa en uno. Con cada flanco de se√±al ascendente posterior, el valor de contaje ir√°
incrementando hasta alcanzar el valor l√≠mite superior del tipo de datos (INT = 32767).
El valor del par√°metro PV se utiliza como l√≠mite para determinar la salida "Tag_Status". La
salida "Tag_Status" devuelve el estado l√≥gico "1" mientras el valor de contaje actual sea mayor
o igual que el valor del operando "Tag_PresetValue". En todos los dem√°s casos, la salida
"Tag_Status" devuelve el estado l√≥gico "0".

5714

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Principios b√°sicos de GRAPH (P√°gina 8191)

CTD: Contador descendente
Descripci√≥n
La instrucci√≥n "Contador descendente" decrementa el valor de la salida CV. Cuando el estado
l√≥gico de la entrada CD cambia de "0" a "1" (flanco de se√±al ascendente), se ejecuta la
instrucci√≥n y el valor actual de contaje de la salida CV se decrementa en uno. Cada vez que
se detecta un flanco de se√±al ascendente, el valor de contaje se decrementa hasta alcanzar el
valor l√≠mite inferior del tipo de datos indicado. Cuando se alcanza el valor l√≠mite inferior, el
estado l√≥gico de la entrada CD deja de tener efecto en la instrucci√≥n.
El estado del contador se puede consultar en la salida Q. Si el valor de contaje actual es menor
o igual que cero, la salida Q adopta el estado l√≥gico "1". En todos los dem√°s casos, el estado
l√≥gico de la salida Q es "0".
El valor de la salida CV se pone al valor del par√°metro PV cuando el estado l√≥gico de la entrada
LD cambia a "1". Mientras la entrada LD tenga el estado l√≥gico "1", el estado l√≥gico de la
entrada CD no tendr√° efecto alguno en la instrucci√≥n.
Nota
Utilice el contador en una sola posici√≥n del programa para evitar fallos de contaje.
A cada llamada de la instrucci√≥n "Contador descendente" debe asign√°rsele un contador CEI,
en el que se guarden los datos de la instrucci√≥n. Un contador CEI se declara del siguiente
modo:
‚óè Declaraci√≥n de un bloque de datos del tipo CTD (p. ej., "CTD_DB")
Al insertar la instrucci√≥n en el programa se abre autom√°ticamente el cuadro de di√°logo
"Opciones de llamada". El bloque de datos creado se encuentra en la carpeta "Recursos del
programa" del √°rbol del proyecto, en "Bloques de programa > Bloques de sistema". Encontrar√°
m√°s informaci√≥n al respecto en "Consulte tambi√©n".
El sistema operativo inicializa las instancias de la instrucci√≥n "Contador descendente" cuando
se realiza un arranque en fr√≠o. Si deben inicializarse instancias de la instrucci√≥n tras un
rearranque completo (en caliente), las instancias por inicializar deben llamarse en un OB de
arranque con el valor "1" en el par√°metro LD de la instrucci√≥n. En el par√°metro PV se indica en
este caso el valor inicial deseado para el par√°metro CV.
Para poder ejecutar la instrucci√≥n "Contador descendente" se requiere una operaci√≥n l√≥gica
precedente. Se puede colocar dentro o al final del segmento.

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5715

Instrucciones
4.2 Instrucciones

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

CD

Input

BOOL

I, Q, M, D, L

Entrada de contaje

LD

Input

BOOL

I, Q, M, D, L, P

Entrada de carga

PV

Input

INT

I, Q, M, D, L, P o
constante

Valor al que se pone la salida
CV cuando LD = 1.

Q

Output

BOOL

I, Q, M, D, L

Estado del contador

CV

Output

INT

I, Q, M, D, L, P

Valor de contaje actual

En la lista desplegable "???" puede seleccionar el tipo de datos de la instrucci√≥n.
Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
GRAPH
CALL CTD INT, "IEC_CTD_DB"
(CD := "Tag_Start"
LD := "Tag_LoadPV"
PV := "Tag_PresetValue"
Q => "Tag_Status"
CV => "Tag_CounterValue"
)

Cuando el estado l√≥gico del operando "Tag_Start" cambia de "0" a "1", se ejecuta la instrucci√≥n
y el valor de la salida "Tag_CounterValue" se decrementa en uno. Con cada flanco de se√±al
ascendente posterior, el valor de contaje ir√° decrementando hasta alcanzar el valor l√≠mite
inferior del tipo de datos indicado (INT = -32768).
La salida "Tag_Status" devuelve el estado l√≥gico "1" mientras el valor de contaje actual sea
menor o igual a cero. En todos los dem√°s casos, la salida "Tag_Status" devuelve el estado
l√≥gico "0".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Principios b√°sicos de GRAPH (P√°gina 8191)

5716

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones

CTUD: Contador ascendente - descendente
Descripci√≥n
Con la instrucci√≥n "Contador ascendente - descendente" se incrementa y decrementa el valor
en la salida CV. Cuando el estado l√≥gico de la entrada CU cambia de "0" a "1" (flanco de se√±al
ascendente), el valor de contaje actual de la salida CV aumenta en uno. Cuando el estado
l√≥gico de la entrada CD cambia de "0" a "1" (flanco de se√±al ascendente), el valor actual de
contaje de la salida CV se decrementa en uno. Si en un ciclo del programa se detecta un flanco
de se√±al ascendente en las entradas CU y CD, el valor actual de contaje no se modifica en la
salida CV.
El valor de contaje se puede seguir incrementando hasta alcanzar el valor l√≠mite superior del
tipo de datos indicado en la salida CV. Una vez alcanzado el valor l√≠mite superior, el valor de
contaje ya no se incrementa al detectarse un flanco de se√±al ascendente. Cuando se alcanza
el valor l√≠mite inferior del tipo de datos indicado, ya no se decrementa el valor de contaje.
Si el estado l√≥gico de la entrada LD cambia a "1", el valor de contaje de la salida CV adopta el
valor del par√°metro PV. Mientras la entrada LD tenga el estado l√≥gico "1", el estado l√≥gico de
las entradas CU y CD no tendr√° efecto alguno en la instrucci√≥n.
El valor de contaje se pone a cero si el estado l√≥gico de la entrada R cambia a "1". Mientras la
entrada R tenga el estado l√≥gico "1", un cambio del estado l√≥gico de las entradas CU, CD y LD
no tendr√° efecto alguno en la instrucci√≥n "Contador ascendente - descendente".
El estado del contador ascendente se puede consultar en la salida QU. Si el valor actual de
contaje es mayor o igual que valor del par√°metro PV, la salida QU adopta el estado l√≥gico "1".
En todos los dem√°s casos, el estado l√≥gico de la salida QU es "0".
El estado del contador descendente se puede consultar en la salida QD. Si el valor actual de
contaje es menor o igual que cero, la salida QD adopta el estado l√≥gico "1". En todos los dem√°s
casos, el estado l√≥gico de la salida QD es "0".
Nota
Utilice el contador en una sola posici√≥n del programa para evitar fallos de contaje.
A cada llamada de la instrucci√≥n "Contador ascendente - descendente" debe asign√°rsele un
contador CEI en el que se guarden los datos de la instrucci√≥n. Un contador CEI se declara del
siguiente modo:
‚óè Declaraci√≥n de un bloque de datos del tipo CTUD (p. ej., "CTUD_DB")
Al insertar la instrucci√≥n en el programa se abre autom√°ticamente el cuadro de di√°logo
"Opciones de llamada". El bloque de datos creado se encuentra en la carpeta "Recursos del
programa" del √°rbol del proyecto, en "Bloques de programa > Bloques de sistema". Encontrar√°
m√°s informaci√≥n al respecto en "Consulte tambi√©n".
El sistema operativo inicializa las instancias de la instrucci√≥n "Contador ascendente descendente" cuando se realiza un arranque en fr√≠o. Si deben inicializarse instancias tras un

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5717

Instrucciones
4.2 Instrucciones
rearranque completo (en caliente), las instancias por inicializar deben llamarse en un OB de
arranque con los siguientes valores de par√°metros:
‚óè Si se utiliza como contador ascendente, el valor del par√°metro R debe ponerse a "1".
‚óè Si se utiliza como contador descendente, el valor del par√°metro LD debe ponerse a "1". En
el par√°metro PV debe indicarse en este caso el valor inicial deseado del par√°metro CV.
Si un bloque diferente contiene instancias de la instrucci√≥n "Contador ascendente descendente", estas pueden resetearse p. ej. inicializando el bloque de nivel superior.
Para poder ejecutar la instrucci√≥n "Contador ascendente - descendente" se requiere una
operaci√≥n l√≥gica precedente. Se puede colocar dentro o al final del segmento.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

CU

Input

BOOL

I, Q, M, D, L

Entrada de contaje ascen‚Äê
dente

CD

Input

BOOL

I, Q, M, D, L

Entrada de contaje descen‚Äê
dente

R

Input

BOOL

I, Q, M, D, L, T, C,
P

Entrada de reset

LD

Input

BOOL

I, Q, M, D, L, P

Entrada de carga

PV

Input

INT

I, Q, M, D, L, P o
constante

Valor con el que se activa la
salida QU. / Valor al que se
ajusta la salida CV si LD = 1.

QU

Output

BOOL

I, Q, M, D, L

Estado de los contadores as‚Äê
cendentes

QD

Output

BOOL

I, Q, M, D, L

Estado de los contadores
descendentes

CV

Output

INT

I, Q, M, D, L, P

Valor de contaje actual

En la lista desplegable "???" puede seleccionar el tipo de datos de la instrucci√≥n.
Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
GRAPH
CALL CTUD INT, "IEC_CTUD_DB"
(CU := "Tag_StartCTU"
CD := "Tag_StartCTD"
R := "Tag_ResetCOUNTER"
LD := "Tag_LoadPV"
PV := "Tag_PresetValue"
QU => "Tag_CounterStatusUP"
QD => "Tag_CounterStatusDOWN"

5718

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
GRAPH
CV => "Tag_CounterValue"
)

Si el estado l√≥gico de la entrada "Tag_StartCTU" o "Tag_StartCTD" cambia de "0" a "1" (flanco
de se√±al ascendente), se ejecuta la instrucci√≥n "Contador ascendente - descendente". Cuando
se detecta un flanco de se√±al ascendente en la entrada "Tag_StartCTU", el valor de contaje
actual se incrementa en uno y se deposita en la salida "Tag_CounterValue". Si se detecta un
flanco de se√±al ascendente en la entrada "Tag_StartCTD", el valor de contaje se decrementa
en uno y se deposita en la salida "Tag_CounterValue". Si se detecta un flanco de se√±al
ascendente en la entrada CU, el valor de contaje se sigue incrementando hasta alcanzar el
valor l√≠mite superior (32767). Cuando se detecta un flanco de se√±al ascendente en la entrada
CD, el valor de contaje se decrementa hasta alcanzar el valor l√≠mite inferior INT = -32768.
La salida "Tag_CounterStatusUP" devuelve el estado l√≥gico "1" mientras el valor de contaje
actual sea mayor o igual que el valor de la entrada "Tag_PresetValue". En todos los dem√°s
casos, la salida "Tag_CounterStatusUP" devuelve el estado l√≥gico "0".
La salida "Tag_CounterStatusDOWN" devuelve el estado l√≥gico "1" mientras el valor de
contaje actual sea menor o igual a cero. En todos los dem√°s casos, la salida
"Tag_CounterStatusDOWN" devuelve el estado l√≥gico "0".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Principios b√°sicos de GRAPH (P√°gina 8191)

Funciones matem√°ticas
NEG: Generar complemento a dos
Descripci√≥n
Con la instrucci√≥n "Generar complemento a dos" se cambia el signo del valor del operando.
Por ejemplo, si tiene un valor positivo, se deposita el equivalente negativo de este valor.
El valor de la salida OUT no es v√°lido si el resultado de la instrucci√≥n est√° fuera del rango
permitido para el tipo de datos indicado en la salida OUT (solo v√°lido para n√∫meros enteros).

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Operando>

Input

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P o
constante

Valor de entrada

<Resultado>

Output

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

Complemento a dos del valor
de entrada

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5719

Instrucciones
4.2 Instrucciones
En la lista desplegable "???" puede seleccionar el tipo de datos de la instrucci√≥n.
Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
GRAPH
"Tag_OutValue" := NEG_REAL("Tag_InValue")

La instrucci√≥n cambia el signo del valor en el operando "TagIn_Value" e indica el resultado en
el operando "TagOut_Value".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Principios b√°sicos de GRAPH (P√°gina 8191)

ABS: Calcular valor absoluto
Descripci√≥n
Con la instrucci√≥n "Calcular valor absoluto" se calcula el valor absoluto del valor del operando.
El valor del resultado no es v√°lido si un n√∫mero en coma flotante presenta un valor no v√°lido.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

<Operando>

Input

N√∫meros en coma
flotante

I, Q, M, D, L, P o
constante

Valor de entrada

<Resultado>

Output

N√∫meros en coma
flotante

I, Q, M, D, L, P

Valor absoluto del valor de
entrada

Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
GRAPH
"Tag_OutValue" := ABS("Tag_InValue")

5720

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Operando

Valor

TagIn_Value

-6,234

TagOut_Value

6,234

La instrucci√≥n calcula el valor absoluto del valor del operando "Tag_InValue" e indica el
resultado en el operando "Tag_OutValue".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Principios b√°sicos de GRAPH (P√°gina 8191)

MIN: Determinar m√≠nimo
Descripci√≥n
La instrucci√≥n "Determinar m√≠nimo" compara los valores de las entradas IN1, IN2 e IN3 y
escribe el valor menor en la salida OUT. Para poder ejecutar la instrucci√≥n, es imprescindible
que las variables de todas las entradas sean del mismo tipo de datos.
El valor de la salida OUT no es v√°lido si se cumple una de las siguientes condiciones:
‚óè Las variables indicadas no son del mismo tipo de datos.
‚óè Un n√∫mero en coma flotante tiene un valor no v√°lido.
Nota
En caso de que la verificaci√≥n CEI est√© desactivada, se permiten √∫nicamente los tipos de datos
INT, DINT y REAL. Si utiliza los tipos de datos WORD o DWORD en los par√°metros de entrada,
la instrucci√≥n devolver√° un resultado no definido.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN1

Input

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

Primer valor de entrada

IN2

Input

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

Segundo valor de entrada

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5721

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN3

Input

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

Tercer valor de entrada

OUT

Output

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

Resultado

En la lista desplegable "???" puede seleccionar el tipo de datos de la instrucci√≥n.
Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
GRAPH
CALL MIN INT
(IN1 := "TagIn_Value1"
IN2 := "TagIn_Value2"
IN3 := "TagIn_Value3"
OUT => "Tag_Minimum"
)

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Par√°metro

Operando

Valor

IN1

TagIn_Value1

12222

IN2

TagIn_Value2

14444

IN3

TagIn_Value3

13333

OUT

Tag_Minimum

12222

La instrucci√≥n compara los valores de los operandos indicados y copia el valor menor
("TagIn_Value1") en la salida "Tag_Minimum".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Principios b√°sicos de GRAPH (P√°gina 8191)

MAX: Determinar m√°ximo
Descripci√≥n
La instrucci√≥n "Determinar m√°ximo" compara los valores de las entradas IN1, IN2 e IN3 y
escribe el valor mayor en la salida OUT. Para poder ejecutar la instrucci√≥n, es imprescindible
que las variables de todas las entradas sean del mismo tipo de datos.

5722

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
El valor de la salida OUT no es v√°lido si se cumple una de las siguientes condiciones:
‚óè Las variables indicadas no son del mismo tipo de datos.
‚óè Un n√∫mero en coma flotante tiene un valor no v√°lido.
Nota
En caso de que la verificaci√≥n CEI est√© desactivada, se permiten √∫nicamente los tipos de datos
INT, DINT y REAL. Si utiliza los tipos de datos WORD o DWORD en los par√°metros de entrada,
la instrucci√≥n devolver√° un resultado no definido.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

IN1

Input

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

Primer valor de entrada

IN2

Input

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

Segundo valor de entrada

IN3

Input

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

Tercer valor de entrada

OUT

Output

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

Resultado

En la lista desplegable "???" puede seleccionar el tipo de datos de la instrucci√≥n.
Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
GRAPH
CALL MAX INT
(IN1 := "TagIn_Value1"
IN2 := "TagIn_Value2"
IN3 := "TagIn_Value3"
OUT => "Tag_Maximum"
)

La tabla siguiente muestra el funcionamiento de la instrucci√≥n con valores de operandos
concretos:
Par√°metro

Operando

Valor

IN1

TagIn_Value1

12666

IN2

TagIn_Value2

14444

IN3

TagIn_Value3

13333

OUT

TagOut_Value

14444

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

5723

Instrucciones
4.2 Instrucciones
La instrucci√≥n compara los valores de los operandos indicados y copia el valor mayor
("TagIn_Value2") en la salida "Tag_Maximum".

Consulte tambi√©n
Vista general de los tipos de datos v√°lidos (P√°gina 241)
Principios b√°sicos de la palabra de estado (P√°gina 184)
Principios b√°sicos de GRAPH (P√°gina 8191)

LIMIT: Ajustar valor l√≠mite
Descripci√≥n
La instrucci√≥n "Ajustar valor l√≠mite" limita el valor de la entrada IN a los valores de las entradas
MN y MX. Si el valor de la entrada IN cumple la condici√≥n MN <= IN <= MX, se copia en la salida
OUT. Si no se cumple la condici√≥n y el valor de entrada IN es menor que el l√≠mite inferior MN,
la salida OUT adopta el valor de la entrada MN. Si el l√≠mite superior MX se rebasa por exceso,
la salida OUT adopta el valor de la entrada MX.
Si el valor de la entrada MN es mayor que el de la entrada MX, el resultado no est√° definido.
Para poder ejecutar la instrucci√≥n, es imprescindible que las variables de todas las entradas
sean del mismo tipo de datos.
El valor de la salida OUT no es v√°lido si se cumple una de las siguientes condiciones:
‚óè Las variables indicadas no son del mismo tipo de datos.
‚óè Un operando tiene un valor no v√°lido.
‚óè El valor de la entrada MN es mayor que el valor de la entrada MX.
Nota
En caso de que la verificaci√≥n CEI est√© desactivada, se permiten √∫nicamente los tipos de datos
INT, DINT y REAL. Si utiliza los tipos de datos WORD o DWORD en los par√°metros de entrada,
la instrucci√≥n devolver√° un resultado no definido.

Par√°metros
La tabla siguiente muestra los par√°metros de la instrucci√≥n:

5724

Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

MN

Input

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

L√≠mite inferior

IN

Input

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

Valor de entrada

Programaci√≥n del PLC
Manual de programaci√≥n y manejo, 11/2019

Instrucciones
4.2 Instrucciones
Par√°metro

Declaraci√≥n

Tipo de datos

√Årea de memoria

Descripci√≥n

MX

Input

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

L√≠mite superior

OUT

Output

Enteros, n√∫meros
en coma flotante

I, Q, M, D, L, P

Resultado

En la lista desplegable "???" puede seleccionar el tipo de datos de la instrucci√≥n.
Encontrar√° m√°s informaci√≥n sobre los tipos de datos v√°lidos en "Consulte tambi√©n".

Ejemplo
El siguiente ejemplo muestra el funcionamiento de la instrucci√≥n:
GRAPH
CALL LIMIT INT
(MN := "Tag_LowLimit"
IN := "Tag_InputValue"
MX := "Tag_HighLimit"