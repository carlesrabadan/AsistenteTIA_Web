 bloques TD7onCPU" del menú contextual (botón derecho
del ratón).
3. En el cuadro de diálogo siguiente seleccione una o varias CPU y haga clic en "Generar...".
Los bloques TD7onCPU se crean y compilan en las CPU seleccionadas, en un directorio
nuevo "TD7onCPU" de los bloques de programa.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2033

Configuración de dispositivos y redes
1.4 Crear configuraciones

Utilizar bloques
● System blocks
Los bloques necesarios para la comunicación básica se crean automáticamente durante la
generación en la CPU.
Estos bloques no tienen que utilizarse manualmente en la CPU.
Los bloques de sistema realizan tareas centrales como arranque, vigilancia de las
conexiones, accesibilidad de los interlocutores de la conexión, registro y retirada de datos
en el buzón de envío o recepción de los DB de comunicación, consulta general, control del
tiempo, desarrollo de la comunicación, etc.
DB de comunicación:
– S7-300/400
Para cada conexión se crea automáticamente un DB de comunicación propio: contiene
la bandeja de envío y de recepción, así como todos los datos necesarios para el control
y la vigilancia de dicha conexión.
– S7-1500
Para la CPU 1500 solo hay un DB de comunicación, "BConnectData". En este DB, para
cada conexión local hay una instancia de conexión depositada en el array
"BConnection".
● Data point typicals
Los typicals de puntos de datos deben utilizarse en la CPU correspondiente en función de
las tareas de comunicación.
Arrastre los diferentes bloques con el ratón de la librería global al programa de usuario de
la CPU. El correspondiente bloque de datos de instancia se crea automáticamente cuando
se utiliza un typical de puntos de datos.
– Dat256D_S / Dat256D_R
Para estos typicals copie también el UDT "TransmitBlock" de la librería (Tipos > PLC
data types (UDT)) en el directorio "Tipos de datos PLC" de la CPU. El UDT no es
referenciado automáticamente por el typical.
● Optional blocks
Utilice también los bloques opcionales en función de las tareas de comunicación de la
estación en la CPU.
Arrastre los diferentes bloques con el ratón de la librería global al programa de usuario de
la CPU.

2034

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Llamada en el programa de usuario
● System blocks
Solo tienen que llamarse en el programa de usuario las dos FC siguientes:
– StartUp
Llame la FC en el OB de arranque. El bloque no tiene parámetros.
Para llamar la FC StartUp primero hay que crear el OB de arranque (OB100).
– BasicTask
Llame la FC en el OB cíclico.
El DB BasicData se crea automáticamente. El DB contiene todos los datos necesarios
a nivel central, entre otros la contabilidad de todos los interlocutores de la comunicación,
así como de todas las conexiones que deben gestionarse.
Consulte las diferentes FC "BasicTask" en el capítulo Nota relativa a las FC
"BasicTask_*" (Página 2035).
● Data point typicals
Según sean las tareas de comunicación, llame todos los typicals de puntos de datos
necesarios en el programa de usuario.
● Optional blocks
Según sean las tareas de comunicación, llame todos los bloques opcionales necesarios en
el programa de usuario.
Para llamar los bloques consulte también el capítulo El programa cíclico SINAUT
(Página 2036).
Nota
Indicador de errores sobre la conformidad con la librería
En el grupo de parámetros "Compilación" de los bloques es posible que se muestre un error en
la entrada "Conformidad con la librería" (llamada de instancias individuales). Esto se debe a la
llamada de bloques de datos globales, p. ej. el DB BasicData.
Puesto que la librería "Telecontrol ST7" no tiene "protección de know-how", puede ignorar este
indicador de error.

Nota relativa a las FC "BasicTask_*"
Variantes de la FC "BasicTask"
En la librería de bloques TD7 "Telecontrol ST7" para STEP 7 Professional hay diferentes
variantes de la FC "BasicTask".
En función de la familia SIMATIC y del bus de fondo, las FC tienen un sufijo distinto al final del
nombre de bloque:
● BasicTask_B
Para CPU S7‑1500
● BasicTask_B
Para CPU S7‑400

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2035

Configuración de dispositivos y redes
1.4 Crear configuraciones
● BasicTask_X
Para CPU S7‑300 con línea compartida
● BasicTask_P
Para CPU S7‑300 sin línea compartida
Las CPU que tienen línea compartida son: CPU 312.. / 313.. / 314.. / 315.. hasta CPU 315‑2 DP
y dispositivos C7.
Consulte la descripción de los bloques en el capítulo FC BasicTask_* (Página 2178).

Denominación "BasicTask" para tres FC
En muchos puntos de los capítulos siguientes se hace referencia a la respectiva FC. Puesto
que la descripción de los diferentes bloques suele ser válida para varias familias SIMATIC, las
tres FC se denominan en adelante "BasicTask". En el respectivo contexto se alude a la
variante de FC para el tipo de CPU correspondiente.

Estructura del programa de usuario para TD7onCPU
El programa cíclico SINAUT
Introducción
La estructura de los bloques TD7 en el programa de usuario (OB1) se explica a continuación.
Los bloques TD7 tienen que editarse en cada ciclo del OB1. Si no se indica lo contrario debe
mantenerse el orden de llamada de los bloques.
Otras partes del programa específicas del usuario pueden integrarse en el OB1 antes o
después de los bloques TD7 o, siempre que sea preciso, dentro de los bloques TD7.
La parte específica de SINAUT puede estructurarse en el OB1 llamándolo en FC subordinadas.
Todos los typicals de puntos de datos son FB. Cuando se llama un FB debe indicarse un DB
de instancia. El número de este DB de instancia es idéntico al número del objeto de punto de
datos.

2036

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Estructura de los bloques TD7 en el OB1
OB1 cíclico
BasicTask

Al principio debe llamarse siempre la FC BasicTask correspondiente. Se encarga
de las tareas básicas SINAUT que se necesitan por principio.

A continuación de la FC BasicTask, llame los siguientes bloques opcionales (FC),
Funciones bási‐
cas SINAUT opcio‐ si los necesita:
nales
● ListGenerator
Genera listas de direcciones para telegramas de recepción con dirección de
destino incompleta
● TimeTask
Pone a disposición la hora
En caso necesario, llame otras FC opcionales a lo largo de la secuencia del pro‐
grama, p. ej.:
● Trigger
Inicia programas de usuario y telegramas de datos en función del tiempo
● PartnerStatus
Muestra el estado de los interlocutores
● PartnerMonitor
Indicaciones y posibilidades de control ampliadas específicas del dispositivo
● PulseCounter
Registro de impulsos de contaje
● PathStatus
Muestra el estado de la vía de conexión con un interlocutor
Nota:
Los dos bloques siguientes no deben llamarse explícitamente, pues se activan por
medio de una interfaz interna.
● TestCopy
● TestcopyDB
Typicals de puntos A lo largo de la secuencia del programa, llame los typicals de puntos de datos para
de datos
enviar y recibir datos. El orden de los diferentes Typicals es aleatorio.
El número de Typicals que deben llamarse y los tipos necesarios dependen de las
cantidades y los tipos de datos que deben enviarse y recibirse.
Nota:
Los DB de instancia de estos FB se referencian mediante el número de objeto del
interlocutor de la comunicación.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2037

Configuración de dispositivos y redes
1.4 Crear configuraciones

Ejemplo de un programa TD7 para una estación
OB1 cíclico
BasicTask

Al principio del programa cíclico debe llamarse siempre la FC BasicTask corres‐
pondiente.
Por lo general, los datos están preparados para el procesamiento posterior tras la
recepción.
La FC tiene un solo parámetro, concretamente "UserFC". Por norma general pue‐
de indicarse un 0. Si desea seguir procesando datos recibidos de forma persona‐
lizada, aquí debe indicarse el número de una FC que incluya el programa para
este procesamiento posterior.
Los datos recibidos también pueden copiarse cronológicamente en una memoria
de fichero a través de esta interfaz.

TimeTask

Opcionalmente es posible llamar la FC TimeTask a continuación de la FC Basic‐
Task. La FC no tiene parámetros. La FC TimeTask debe integrarse cuando se
necesita la hora. Esto permite poner un sello de tiempo a los telegramas de datos.
De todas formas, la hora también puede utilizarse para iniciar partes del programa
en un instante determinado o enviar telegramas de datos en función del tiempo.
Para ello se necesita la FC Trigger que se describe a continuación.
Para utilizar la FC TimeTask es imprescindible que la CPU reciba la hora de un
módulo TIM local. Esto se define por configuración.

Trigger

La FC Trigger es opcional. Esta FC activa su salida durante un ciclo del OB1
cuando se ha alcanzado el instante o período parametrizado en la FC.
La FC puede integrarse más de una vez si se requieren varios instantes o dife‐
rentes períodos. Para utilizar la FC es imprescindible que previamente se llame la
FC TimeTask en el programa del OB1 (véase arriba) y que la hora de la CPU ya
se haya ajustado una vez.

PartnerStatus

La FC PartnerStatus es opcional. La FC muestra la accesibilidad para un máximo
de 8 interlocutores de la comunicación.

ListGenerator

● ListGenerator300 para CPU S7-300
● ListGenerator400 para CPU S7-400
● ListGenerator1500 para CPU S7-1500
La FC es opcional. La FC se necesita cuando la estación recibe telegramas que
no tienen dirección de destino o está incompleta. Esto sucede cuando en un in‐
terlocutor se ha renunciado total o parcialmente a parametrizar la dirección de
destino en typicals de puntos de datos ("PartnerNo" y "PartnerObjectNo" no se
han rellenado; de este modo se transmite a todos los dispositivos de destino
conocidos).

PulseCounter

Según necesidad

PathStatus
PartnerMonitor

2038

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
OB1 cíclico
Typicals de puntos A continuación de las FC para tareas básicas SINAUT se llaman los typicals de
de datos
puntos de datos para enviar y recibir datos. El orden de los diferentes Typicals es
aleatorio. El número de Typicals que deben llamarse y los tipos necesarios de‐
penden de las cantidades y los tipos de datos que deben enviarse y recibirse.
Para una estación rige normalmente:
● Se envían:
–

información binaria, como avisos de estado y alarmas

–

valores analógicos

–

valores de contaje

● Se reciben:
–

comandos

–

consignas, valores límite, parámetros

Bin04B_S

Uno o varios FB para registrar y transmitir información binaria, como avisos, alar‐
mas, etc.

Ana04W_S

Uno o varios FB para registrar y transmitir valores analógicos

Cnt01D_S /
Cnt04D_S

Uno o varios FB para registrar y transmitir valores de contaje
Para utilizar los FB es imprescindible que la FC PulseCounter esté integrada en un
OB de alarma cíclica, p. ej. OB35. Dicha FC se encarga de registrar en el fondo los
impulsos de contaje con control de tiempo.

Cmd01B_R

Uno o varios FB para recibir y emitir comandos

Set01W_R /
Par12D_R

Uno o varios FB para recibir y emitir consignas, valores límite o parámetros

Dat12D_S /
Dat256D_S

Uno o varios FB para registrar y transmitir 12 palabras dobles de datos con un
contenido informativo cualquiera.
Para estos typicals se suprime el procesamiento específico de los datos y el con‐
trol de cambios. Esta tarea corresponde al programa de usuario. Opcionalmente
es posible activar un control de cambios que inicia una transmisión cada vez que
cambia un bit.

Programas TD7 para centrales y estaciones nodo
Básicamente, los programas TD7 para centrales y estaciones nodo tienen el mismo aspecto
que para una estación. Para los typicals de transmisión de una estación se utilizan en una
central los typicals de recepción correspondientes.
En una estación nodo se utilizan tanto typicals de transmisión como los typicals de recepción
correspondientes, de acuerdo con el sentido de la transferencia.
En la estación maestra es aconsejable estructurar el programa del OB1 ordenado por
estaciones, es decir, todos los typicals de datos que forman parte de la misma estación se
llaman en una FC. La claridad aumenta cuando el número de la FC es el mismo que el número
de dispositivo de la estación.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2039

Configuración de dispositivos y redes
1.4 Crear configuraciones

OB de alarma cíclica
Introducción
En una CPU solo deben integrarse bloques TD7 controlados por tiempo si en ella deben
registrarse impulsos de contaje rápidos que no han podido registrarse con seguridad dentro de
un ciclo del OB1 debido a un tiempo de ciclo demasiado largo.
Los impulsos de contaje se registran mediante un módulo de entradas digitales cualquiera.
Para registrar los impulsos con seguridad es necesario consultar los cambios de las entradas
digitales utilizadas en un período fijo. Para ello, el período se rige por la duración del impulso
de contaje más corto. La duración mínima de un impulso de contaje puede ser de 50 ms. Lo
mismo es válido para la duración de la pausa. Así pues, la frecuencia de contaje máxima es de
10 Hz.
El período en el que deben registrarse los impulsos de contaje debe durar aproximadamente
la mitad que el impulso de contaje, es decir, con 50 ms un período de unos 25 ms.
Para este registro de impulsos de contaje controlados por tiempo debe programarse el OB35
en una CPU S7-300 y, en una CPU S7-400, uno de los OB de alarma cíclica disponibles, del
OB30 al OB38, mientras que en una CPU S7-1500 debe programarse un OB de alarma cíclica
con un número del rango 30..38 / ≥ 123.
Todos los OB de alarma cíclica tienen un intervalo de tiempo predeterminado, que en el OB35
es de 100 ms, p. ej. Dicho intervalo puede modificarse en incrementos de 1 ms. Esto significa
que es posible ajustar un OB de alarma cíclica a 25 ms, por ejemplo.
El intervalo de tiempo de un OB de alarma cíclica se modifica en el cuadro de diálogo de
propiedades (S7‑400/1500); en S7-300 en el cuadro de diálogo de propiedades de la CPU.
Tabla 1-152 Llamada de la FC PulseCounter en el OB de alarma cíclica
OB35
Pulse Counter

Es posible integrar una o varias FC PulseCounter para registrar impulsos de con‐
taje.
La FC PulseCounter procesa un máximo de 8 entradas de impulso de una entrada
digital cualquiera. Los impulsos de contaje registrados se acumulan en contado‐
res SIMATIC programables. Los contadores acceden a los bloques de función que
elaboran los telegramas de valores de contaje (FB Cnt0x_S).
Las funciones de alarma cíclica específicas de usuario que se requieran indepen‐
dientemente del programa SINAUT pueden integrarse en cualquier lugar del OB
de de alarma cíclica.

OB de error de programación
Validez
Solo para S7-300/400

2040

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Función
Si en una CPU S7‑300/400 se llama un bloque que no existe, la CPU pasa a STOP en caso
normal. En el búfer de diagnóstico se indica qué FB, FC o DB falta. A continuación existe la
posibilidad de cargar el bloque que falta y rearrancar la CPU.
Sin embargo, si no se desea que la CPU pase a STOP cuando falta un bloque, o bien que solo
pase a STOP cuando faltan determinados tipos o números de bloque, es posible definir el
comportamiento deseado en el OB121.
Basta con cargar el OB121 como bloque vacío en la CPU para que la CPU siga funcionando
aunque falte un bloque. Si desea decidir con más precisión cuándo la CPU debe seguir
funcionando y cuándo debe pasar a STOP, integre el OB121 en el programa de usuario.
En combinación con SINAUT ST7 es posible que una CPU pase a STOP cuando recibe de otra
CPU datos que (todavía) no conoce. Esto sucede, por ejemplo, cuando se agrega un typical de
puntos de datos a una estación y se le proporciona una dirección de destino completa (número
de dispositivo de destino y número de objeto de destino). El número de objeto de destino
indicado puede provocar el estado STOP del dispositivo de destino en el caso siguiente:
● En cuanto se instala un nuevo typical de puntos de datos en una estación, los datos se
transfieren al destino.
● Si en la CPU de destino todavía no se ha integrado el typical de recepción correspondiente,
tampoco existe el número de objeto de destino (= DB de instancia del typical de recepción).
El resultado es que la CPU pasa a STOP en cuanto se reciben los datos.
Para que esto no suceda se recomienda llamar la FC ST7ObjectTest en el OB121.
Tabla 1-153 Llamada de la FC ST7ObjectTest en el OB de error de programación
OB121
ST7ObjectTest

La llamada de la FC ST7ObjectTest en el OB121 impide que la CPU pase a STOP
cuando recibe datos con un número de objeto de destino desconocido.
Las otras llamadas pueden integrarse en cualquier lugar del OB121 independien‐
temente de la llamada de la FC ST7ObjectTest.
La FC ST7ObjectTest tiene un parámetro "StopInOtherCases". Aquí puede indi‐
carse lo que debe suceder en otros casos (STOP o seguir funcionando) cuando se
llame el OB121 porque falta otro bloque de datos o un FB o una FC.

Tipos
Los tipos de datos siguientes se utilizan en bloques de S7-300/400 y S7-1500.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2041

Configuración de dispositivos y redes
1.4 Crear configuraciones

PLC data types (UDT)
UDT empleados
El siguiente tipo de datos PLC (UDT) es utilizado por la librería de bloques:
● TransmitBlock
UDT para la transferencia de datos entre la CPU y el TIM
En caso de utilizar el typical "Dat256D_S / Dat256D_R", copie el UDT en el directorio "Tipos
de datos PLC" de la CPU correspondiente. El UDT no es referenciado automáticamente por
el typical.
El UDT no requiere parametrización.

System data types (SDT)
SDT empleados
Los siguientes tipos de datos de sistema (SDT) son utilizados por el DB BasicData y se
incorporan automáticamente al directorio "Tipos de datos PLC" de la CPU al generar / compilar
los bloques TD7:
● ConnectionDescription
El SDT forma parte del DB "BasicData" y es del tipo de datos "Array[1..1] of
ConnectionDescription". Contiene los datos siguientes sobre la descripción de la conexión:
– Número del DB de comunicación
– Tipo de conexión
– Número de CFB en caso de conexión S7
– Número de dispositivo del TIM local
● SubscriberObject
El SDT forma parte del DB "BasicData" y es del tipo de datos "Array[1..1] of
SubscriberObject". Contiene los datos siguientes sobre el interlocutor de la comunicación:
– Número de dispositivo del interlocutor
– Índice de array de la descripción de la conexión
– Tipo de dispositivo
– Indica si el interlocutor es local o remoto.

2042

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Plantillas maestras (S7-300/400, S7-1500)
Validez
En las plantillas maestras de la librería global hay los siguientes bloques de programa:
● CPU300/400
Bloques de programa para la CPU S7-300/400
● CPU1500
Bloques de programa para la CPU S7-1500
Los bloques son prácticamente idénticos. Si no se indica lo contrario, la descripción sirve igual
para los bloques de S7-300/400 y S7-1500.
Si algunos bloques no son válidos para todas las familias SIMATIC mencionadas o si las
funciones se diferencian para las familias SIMATIC, se indicará explícitamente.

Data point typicals
Tipos y vista general de los typicals de puntos de datos
Tipos de typicals de puntos de datos
Los typicals de puntos de datos procesan uno o varios puntos de datos del mismo tipo de
información, p. ej. 4 bytes de información binaria, 4 valores analógicos o 1 byte de comandos,
etc.
Cuando se llama un typical de puntos de datos (FB) debe indicarse el DB de instancia
correspondiente en cada caso, en el que se escriben los datos y del que se leen los datos que
deben transferirse.

Sentido de transmisión de los typicals
Un typical de puntos de datos para un tipo y una cantidad de información determinados está
disponible siempre en dos variantes:
● Un typical para registrar y enviar
● Un typical para recibir y emitir
Por este motivo, cuando se utilizan typicals de puntos de datos se diferencia según el sentido
de la transferencia:
● Typicals emisores
Los typicals emisores procesan datos y los envían al interlocutor remoto.
Tienen la terminación "_S". Ejemplos: Bin04B_S, Ana04W_S
● Typicals receptores
Los typicals receptores reciben los datos de su interlocutor remoto.
Tienen la terminación "_R". Ejemplos: Bin04B_R, Ana04W_R
Para la transferencia de datos, en los dos interlocutores que se comunican participa siempre
una pareja de typicals correspondiente.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2043

Configuración de dispositivos y redes
1.4 Crear configuraciones
Ejemplos:
● sentido de observación
– La estación envía datos binarios con el typical Bin04B_S
– La estación central recibe los datos con el typical Bin04B_R
● sentido de control
– La estación central envía un comando con el typical Cmd01B_S
– La estación recibe el comando con el typical Cmd01B_R

Estructura de los nombres de Typicals
Nota
Sin bloques SMS
Al contrario que en la librería de bloques para STEP 7 V5, en la librería global "Telecontrol ST7"
no hay bloques disponibles para enviar SMS.
En envío de correos electrónicos y/o SMS se configura en STEP 7 Professional de TIA Portal
desde el editor de mensajes; consulte el capítulo Configuración de puntos de datos y mensajes
(Página 1947).
Las 8 cifras del nombre de los typicals de puntos de datos se asignan siguiendo el esquema
siguiente:
Tabla 1-154 Estructura de los nombres de 8 dígitos para Typicals
1

2

3

4

5

6

7

Tipo de punto de datos

Número de datos

Formato de datos Libre

Bin = Información binaria

(número del tipo se‐
gún el carácter 6)

X = bit

Excepción:
el número de datos en
"Dat256D_x" ocupa
tres columnas.

W = palabra

Ana = Valor analógico
Cnt = Valor de contaje
Cmd = Comando
Set = Consigna, parámetro

B = byte

(guión ba‐
jo)

D = palabra doble
R = real

8
S
Función
de envío
R
Función
de recep‐
ción

Par = Parámetro
Dat = Datos (mezcla cualquiera
de tipos de información)
* Los bloques con los sufijos "_FS" y "_FR" solo están disponibles para S7-1500.

2044

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Vista general de los typicals de puntos de datos
La tabla siguiente ofrece una vista general de los typicals de puntos de datos.
Tabla 1-155 Vista general de los typicals de puntos de datos
Formato de datos

Nombre de bloque
simbólico

Función

Typicals de valores binarios
Byte

Bin04B_S

Enviar 4 bytes de valores binarios

Byte

Bin04B_R

Recibir 4 bytes de valores binarios

Typicals de valores analógicos
Int

Ana04W_S

Enviar 4 valores analógicos

Int

Ana04W_R

Recibir 4 valores analógicos

Real

Ana04R_S

Enviar 4 valores analógicos como número en coma flo‐
tante
(solo CPU 1500)

Real

Ana04R_R

Recibir 4 valores analógicos como número en coma flo‐
tante
(solo CPU 1500)

Typicals de valores de contaje
UInt, Word *

Cnt01D_S

Enviar 1 valor de contaje

UInt, Word *

Cnt01D_R

Recibir 1 valor de contaje

UInt, Word *

Cnt04D_S

Enviar 4 valores de contaje

UInt, Word *

Cnt04D_R

Recibir 4 valores de contaje

Byte, USInt *

Cmd01B_S

Enviar 1 byte de comandos

Bit

Cmd08X_S

Enviar 8 comandos bit a bit

Bit

Cmd08X_R

Recibir 8 comandos bit a bit

Byte, USInt *

Cmd01B_R

Recibir 1 byte de comandos

Typicals de comandos

Typicals de consignas y parámetros
Word

Set01W_S

Enviar 1 consigna y recibir la consigna local actual

Word

Set01W_R

Recibir 1 consigna y enviar la consigna local actual

ARRAY [1...12] of
DInt / UDInt / DWord /
Real *

Par12D_S

Enviar como máx. 12 palabras dobles con parámetros y
recibir los parámetros locales actuales

ARRAY [1...12] of
DInt / UDInt / DWord /
Real *

Par12D_R

Recibir como máx. 12 palabras dobles con parámetros
y enviar parámetros locales actuales

Typicals de tipos de datos variables y cantidades
ARRAY [1...12] of
DInt / UDInt / DWord /
Real *

Dat12D_S

Enviar como máx. 12 palabras dobles con unos datos
cualesquiera

ARRAY [1...12] of
DInt / UDInt / DWord /
Real *

Dat12D_R

Recibir como máx. 12 palabras dobles con unos datos
cualesquiera

Div. tipos de datos **

Dat12x1D_S

Enviar unos datos cualesquiera como máx. por 12 ca‐
nales

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2045

Configuración de dispositivos y redes
1.4 Crear configuraciones
Formato de datos

Nombre de bloque
simbólico

Función

Div. tipos de datos **

Dat12x1D_R

Recibir unos datos cualesquiera como máx. por 12 ca‐
nales

DWord

Dat256D_S

Enviar como máx. 256 palabras dobles con unos datos
cualesquiera

DWord

Dat256D_R

Recibir como máx. 256 palabras dobles con unos datos
cualesquiera

* El S7‑300/400 no soporta USInt, UInt ni UDInt.
** Consulte los tipos de datos soportados en la descripción de los bloques.

Parámetros repetitivos
Descripción de los parámetros de los typicals
En la descripción siguiente se agrupan en una descripción común los mismos typicals de
puntos de datos, con la única diferencia del número de puntos de datos que se procesan.
En las tablas de los typicals de puntos de datos encontrará los datos siguientes de los
diferentes parámetros:
● Parámetro
Nombre del parámetro
● Declaración
Tipo de parámetro
– INPUT
Parámetro de entrada
– OUTPUT
Parámetro de salida
– IN_OUT
Parámetro de entrada/salida
● Tipo de datos
Tipo de datos soportado para este parámetro
● Valores posibles
● Ajuste predeterminado
Valor predeterminado del parámetro
Si no se parametrizan algunos parámetros de un typical de puntos de datos se utiliza el
valor predeterminado.
● Explicación
Descripción de la función y de las propiedades del parámetro específicas para el typical

Parámetros utilizados por muchos typicals
Los parámetros siguientes son utilizados por muchos typicals de la librería TD7onCPU. Estos
parámetros se describen una vez aquí y no se repiten cada vez en los capítulos siguientes de
los diferentes typicals de puntos de datos.

2046

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
En función del uso de los typicals, algunos parámetros se parametrizan de forma distinta.
Tenga en cuenta el uso de los typicals que se describe a continuación.

PartnerNo
Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Explicación:

PartnerNo
INPUT
INT
0 / 1 ... 32000
0

Número de dispositivo del interlocutor
Debe indicarse el número de dispositivo del interlocutor con el que se comunica
el bloque.
● En un typical de proceso suele ser el número de dispositivo de la estación
central o la aplicación del puesto de control (p. ej. ST7cc).
● En un typical de operador suele ser el número de dispositivo de una
estación.
Repercusiones del valor 0 (cero) en diferentes clases de typicals
● Typicals de proceso emisores
(Bin04B_S, Ana04W_S, Cnt01D_S/Cnt04D_S, Dat12D_S, Dat256D_S)
Con el valor 0 se envían los datos a todos los dispositivos con los que se ha
configurado una conexión ST7. En este caso, el typical de proceso enviará
automáticamente con el valor cero el parámetro "PartnerObjectNo".
Si PartnerNo no se encuentra en la contabilidad (DB BasicData), se realiza
una entrada correspondiente en el búfer de diagnóstico (ID de evento
B101). La CPU no pasa a STOP. Sin embargo, después de esto el bloque
no volverá a procesarse hasta que se haya solucionado el error.
Indicaciones
– Si falta "PartnerObjectNo", en la CPU interlocutora debe haber en todo
caso una lista de la que se derive el número de objeto que falta;
consulte FC ListGenerator1500/300/400 (Página 2149).
– Uso del bloque en una estación nodo
Cuando la CPU de la estación nodo gestiona conexiones tanto con
dispositivos de nivel superior como con estaciones subordinadas, se
transmite un telegrama de datos con "PartnerNo" = 0 a todos los
dispositivos tanto en el sentido de la central como de las estaciones.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2047

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Typicals de operador receptores
(Bin04B_R, Ana04W_R, Cnt01D_R/Cnt04D_R, Dat12D_R, Dat256D_R)
El valor 0 no está permitido.
Si PartnerNo es < 1 o > 32000 se registra un mensaje de error en el búfer
de diagnóstico (ID de evento B100).
Si el valor parametrizado es admisible y correcto pero "PartnerNo" no se
encuentra en la contabilidad (en el DB BasicData), se realiza también una
entrada en el búfer de diagnóstico (ID de evento B101). La CPU no pasa a
STOP. Sin embargo, después de esto el bloque no volverá a procesarse
hasta que se haya solucionado el error.
Cuando la CPU recibe un telegrama de datos para este typical, se
comprueba si el número de dispositivo de origen que aparece en el
telegrama de datos es el mismo que el "PartnerNo" parametrizado aquí. Si
los dos números de dispositivo son diferentes se rechaza la información
recibida y se registra un mensaje de error en el búfer de diagnóstico (ID de
evento B130).
● Typicals de operador emisores
(Cmd01B_S, Set01W_S, Par12D_S)
El valor 0 no está permitido.
Si "PartnerNo" es < 1 o > 32000 se registra un mensaje de error en el búfer
de diagnóstico (ID de evento B100).
Si el valor parametrizado es admisible y correcto pero "PartnerNo" no se
encuentra en la contabilidad (en el DB BasicData), se realiza también una
entrada en el búfer de diagnóstico (ID de evento B101). La CPU no pasa a
STOP. Sin embargo, después de esto el bloque no volverá a procesarse
hasta que se haya solucionado el error.
● Typicals de proceso receptores
(Cmd01B_R, Set01W_R, Par12D_R)
Parametrice el valor 0 cuando el typical debe recibir datos de varios
interlocutores, p. ej. datos de diferentes puestos de control.
Cuando la CPU recibe datos para este typical y "PartnerNo" es > 0, se
comprueba si el número de dispositivo de origen que aparece en el
telegrama de datos es el mismo que el "PartnerNo" parametrizado aquí. Si
ambos son diferentes se rechaza la información recibida y se registra un
mensaje de error en el búfer de diagnóstico (ID de evento B130).
Esta comprobación no tiene lugar cuando "PartnerNo" es = 0.
Independientemente del remitente, se envían al typical todos los
telegramas de datos direccionados al mismo.
Si "PartnerNo" es > 0 y este número no se encuentra en la contabilidad (DB
BasicData), se realiza una entrada en el búfer de diagnóstico (ID de evento
B101). La CPU no pasa a STOP. Sin embargo, después de esto el bloque
no volverá a procesarse hasta que se haya solucionado el error.
Indicaciones
– Si "PartnerNo" = 0 hay que asegurarse de que cada interlocutor envíe los
datos con una dirección de destino completa (número de dispositivo de
destino y número de objeto de destino).
– Uso del bloque en una estación nodo
Cuando la CPU de la estación nodo gestiona conexiones tanto con
dispositivos de nivel superior como con estaciones subordinadas, se
transmite un telegrama de datos con PartnerNo = 0 a todos los
dispositivos tanto en el sentido de la central como de las estaciones.

2048

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

PartnerObjectNo
Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Explicación:

PartnerObjectNo
INPUT
INT
0 / 1 ... 32000
0

Número de objeto en el interlocutor
Número del objeto (= número de DB) con el que se comunica el bloque.
Repercusiones del valor 0 (cero) en diferentes clases de typicals
● Typicals de proceso emisores
(Bin04B_S, Ana04W_S, Cnt01D_S/Cnt04D_S, Dat12D_S, Dat256D_S)
La parametrización de 0 es aconsejable si en el parámetro anterior se ha
parametrizado PartnerNo = 0. Si falta "PartnerObjectNo", en la CPU
interlocutora debe haber en todo caso una lista de la que se derive el
número de objeto que falta (consulte la FC ListGenerator).
Si el interlocutor es un puesto de control ST7cc no es necesario indicar el
"PartnerObjectNo" en este bloque, ya que en ST7cc no hay DB que sean
objetos de destino. ST7cc descifra sus datos utilizando únicamente la
dirección de origen incluida en el telegrama de datos.
● Typicals de operador receptores
(Bin04B_R, Ana04W_R, Cnt01D_R/Cnt04D_R, Dat12D_R, Dat256D_R)
El valor 0 no está permitido.
Si la parametrización es errónea (< 1 o > 32000) se registra un mensaje de
error en el búfer de diagnóstico (ID de evento B102). La CPU no pasa a
STOP. Sin embargo, después de esto el bloque no volverá a procesarse
hasta que se haya solucionado el error.
Cuando la CPU recibe datos para el objeto parametrizado aquí, se
comprueba si el número de objeto de origen que aparece en el telegrama de
datos es el mismo que el "PartnerObjectNo" parametrizado aquí. Si son
diferentes se rechaza la información recibida. Se registra un mensaje de
error en el búfer de diagnóstico (ID de evento B131).

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2049

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Typicals de operador emisores
(Cmd01B_S, Set01W_S, Par12D_S)
El valor 0 no está permitido.
Si la parametrización es errónea (< 1 o > 32000) se registra un mensaje de
error en el búfer de diagnóstico (ID de evento B102). La CPU no pasa a
STOP. Sin embargo, después de esto el bloque no volverá a procesarse
hasta que se haya solucionado el error.
● Typicals de proceso receptores
(Cmd01B_R, Set01W_R, Par12D_R)
La parametrización de 0 es necesaria en los casos siguientes:
– El interlocutor no es una CPU S7, es decir, no hay ningún número de DB
como objeto. Esto sucede, p. ej., cuando el interlocutor es un puesto de
control ST7cc.
– Hay más de un interlocutor (PartnerNo = 0) del que el typical debe recibir
datos. Por lo general, en este caso los objetos correspondientes tendrán
números distintos en los interlocutores, es decir, no es posible indicar un
número unívoco.
Cuando la CPU recibe datos para el objeto parametrizado aquí y
"PartnerObjectNo" es > 0, se comprueba si el número de objeto de origen
que aparece en el telegrama de datos es el mismo que el "PartnerObjectNo"
parametrizado aquí. Si son diferentes se rechaza la información recibida.
Se registra un mensaje de error en el búfer de diagnóstico (ID de evento
B131).
Esta comprobación no tiene lugar cuando "PartnerObjectNo" es = 0.
Independientemente del objeto remitente, se envían al objeto receptor
todos los telegramas de datos direccionados al mismo.

Enabled
Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

Enabled
INPUT
BOOL
TRUE / FALSE
TRUE

I 0.0 ... I n.7
M 0.0 ... M n.7
L 0.0 ... L n.7
Bit de datos
DBm.DBX 0.0 ... n.7
Explicación: Habilitación del procesamiento del bloque
● En caso afirmativo se ejecutan todas las funciones del bloque.
● En caso negativo el comportamiento difiere:
Procesamiento no habilitado

2050

Entrada
Marca

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● En typicals de proceso emisores
(Bin04B_S, Ana04W_S, Cnt01D_S/Cnt04D_S,
Set01W_R, Par12D_R,
Dat12D_S, Dat256D_S)
Si el procesamiento no está habilitado, el bloque solo puede comunicarse a
nivel organizativo, es decir, es posible enviar y recibir telegramas
organizativos.
Tenga en cuenta lo siguiente: Una consulta de un typical de operador se
responde, pero el telegrama de respuesta contiene los datos válidos en el
momento del bloqueo.
Nota
El comportamiento descrito aquí no es válido para Cmd01B_R;
consulte Typical de comandos Cmd01B_R (Página 2078).
● En typicals de operador receptores
(Bin04B_R, Ana04W_R, Cnt01D_R/Cnt04D_R,
Set01W_S, Par12D_S,
Dat12D_R, Dat256D_R)
Si el procesamiento no está habilitado, el bloque solo puede comunicarse a
nivel organizativo, es decir, es posible enviar y recibir telegramas
organizativos.
Tenga en cuenta lo siguiente: Sigue siendo posible enviar consultas y
recibir respuestas, pero la información recibida no se emitirá a las salidas.
Encontrará las salidas relevantes en la descripción de los diferentes typicals
de puntos de datos.
Nota
El comportamiento descrito aquí no es válido para Cmd01B_S
(consulte Typical de comandos Cmd01B_S (Página 2075)).

ImageMemory
Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

ImageMemory
INPUT
BOOL
TRUE / FALSE
TRUE
Entrada
Marca
Bit de datos

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

I 0.0 ... I n.7
M 0.0 ... M n.7
L 0.0 ... L n.7
DBm.DBX 0.0 ... n.7

2051

Configuración de dispositivos y redes
1.4 Crear configuraciones
Uso en typi‐
cals:
Explicación:

Bin04B_S, Ana04W_S, Cnt01D_S/Cnt04D_S, Set01W_R, Par12D_R,
Dat12D_S
Principio de la memoria imagen para la transmisión espontánea de datos
● TRUE
Los datos se transmiten siguiendo el principio de la memoria imagen.
El principio de la memoria imagen hace que se ahorre memoria a la hora de
guardar telegramas de datos y también que se reduzca al mínimo el tráfico
de datos en el trayecto WAN. La asignación predeterminada TRUE suele
ser la elección correcta en la mayoría de los casos.
● FALSE
Los datos se transmiten siguiendo el principio del búfer de transmisión.
El principio del búfer de transmisión solo es necesario en los puntos de
datos para los que deben guardarse los diferentes cambios de datos y
transferirse al interlocutor, por ejemplo alarmas con sello de tiempo.

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

Conditional
INPUT
BOOL

Conditional

Uso en typi‐
cals:
Explicación:

TRUE / FALSE
TRUE
Marca

M 0.0 ... M n.7
L 0.0 ... L n.7
Bit de datos
DBm.DBX 0.0 ... n.7
Bin04B_S, Ana04W_S, Cnt01D_S/Cnt04D_S, Set01W_R, Par12D_R,
Dat12D_S
Transferencia de datos espontánea con limitaciones
Encontrará más información a continuación en el parámetro "Unconditional".

Unconditional
Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:

2052

Unconditional
INPUT
BOOL
TRUE / FALSE
FALSE

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Área de di‐
recciones:
Uso en typi‐
cals:
Explicación:

Marca

M 0.0 ... M n.7
L 0.0 ... L n.7
Bit de datos
DBm.DBX 0.0 ... n.7
Bin04B_S, Ana04W_S, Cnt01D_S/Cnt04D_S, Set01W_R, Par12D_R,
Dat12D_S, Dat256D_S
Transferencia de datos espontánea sin limitaciones
Los dos parámetros "Conditional" y "Unconditional" permiten determinar si el
módulo debe transmitir un telegrama de datos inmediatamente después de
sufrir cambios (espontáneo sin limitaciones) o bien en un instante posterior
(espontáneo con limitaciones).
Los dos parámetros deben parametrizarse del siguiente modo:
● Transferencia espontánea con limitaciones (no necesariamente inmediata)
– Conditional = TRUE
– Unconditional = FALSE
● Transferencia espontánea sin limitaciones (inmediata)
– Conditional = FALSE
– Unconditional = TRUE
El ajuste predeterminado de los dos parámetros es que un telegrama de datos
no se transmita inmediatamente.
La decisión acerca de si un telegrama de datos debe transmitirse inmediata‐
mente o en un momento posterior solo debe tomarse en redes de marcación.
En una red de marcación hay que decidir en cada caso si se desea una trans‐
misión inmediata en caso de cambio de valor del punto de datos y, por consi‐
guiente, se debe establecerse en seguida una conexión. Este caso puede
aplicarse, por ejemplo, a puntos de datos con alarmas.
En una línea dedicada, la transmisión es siempre inmediata, aunque la com‐
binación de "Conditional" y "Unconditional" esté ajustada a "no inmediatamen‐
te". Con líneas dedicadas no es necesario realizar cambios en estos dos pa‐
rámetros.

Permanent
Nota
Parámetro irrelevante
El parámetro (INPUT, Bool) solo aparece en bloques de S7-300/400.
Su función ya no se soporta en S7-300/400 y el valor es siempre = FALSE.

TimeStamp
Parámetro: TimeStamp
Declaración: INPUT
Tipo de da‐ BOOL
tos:

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2053

Configuración de dispositivos y redes
1.4 Crear configuraciones
Rango de va‐
lores:
Ajuste prede‐
terminado:
Uso en typi‐
cals:
Explicación:

TRUE / FALSE
FALSE
Bin04B_S, Ana04W_S, Cnt01D_S/Cnt04D_S, Dat12D_S, Dat256D_S,
Set01W_R, Par12D_R
Sello de tiempo
● TRUE
El telegrama de datos se transmite con sello de tiempo.
Para ello es imprescindible que en la CPU esté disponible una hora
proporcionada por el TIM local. Encontrará más detalles en la descripción
de la FC TimeTask.
Nota
En Ana04W_S tenga en cuenta la dependencia del sello de tiempo del
parámetro "MeanValueGeneration"; consulte Typical de valores analógicos
Ana04W_S (Página 2062).
● FALSE
El telegrama de datos se transmite sin sello de tiempo.
Consulte el formato de los sellos de tiempo en el capítulo Sello de tiempo
(Página 2055).

Nota
Reinicialización
Este parámetro requiere reinicializar la CPU.
Recomendación:
No modifique más el parámetro en tiempo de ejecución o tras un rearranque completo.

NewData
Parámetro:
Declaración:
Tipo de da‐
tos:

NewData
OUTPUT
BOOL
(Dat256D_R : DWORD)
Rango de va‐ TRUE / FALSE
lores:
Ajuste prede‐ FALSE
terminado:
Área de di‐
Salida
recciones:
Marca
Bit de datos

2054

Q 0.0 ... Q n.7
M 0.0 ... M n.7
L 0.0 ... L n.7
DBm.DBX 0.0 ... n.7

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Uso en typi‐
cals:
Explicación:

Bin04B_R, Ana04W_R, Cnt01D_R/Cnt04D_R, Cmd01B_R, Set01W_S,
Set01W_R, Par12D_S, Par12D_R, Dat12D_R, Dat256D_R
En Dat256D_R, la salida ocupa una palabra doble con un estado por segmento.
Recibir datos nuevos
La salida NewData está prevista para procesamientos posteriores personali‐
zados, p. ej. para reaccionar de forma selectiva a la recepción de datos nuevos.
Cada vez que el bloque ha recibido datos nuevos y los ha emitido en las salidas
específicas del typical, NewData se pone a TRUE durante un ciclo del OB1.
Encontrará las salidas específicas en la descripción de los diferentes typicals
de puntos de datos.
En los typicals de puntos de datos Set01W_R y Par12D_R, "NewData" también
se pone a TRUE durante un ciclo del OB1 cuando se introduce un valor local
nuevo en el estado Local = 1.
Si no necesita el parámetro déjelo abierto.

Sello de tiempo
Formato de los sellos de tiempo SINAUT
En muchos typicals de puntos de datos es posible determinar con el parámetro "TimeStamp"
si los datos del objeto deben transmitirse con sello de tiempo.
Sin embargo, en los typicals de puntos de datos receptores no hay parámetros de salida que
permitan emitir el sello de tiempo recibido. El sello de tiempo simplemente se almacena en el
DB de instancia que se ha indicado al llamar el Typical de recepción correspondiente. Para
seguir procesando el sello de tiempo, los datos deben leerse del DB desde el programa de
usuario.
El sello de tiempo se deposita en dos palabras dobles que tienen el mismo nombre en todos
los DB de objeto:
Nombre de la palabra doble

Contenido

RecTimeStamp_1

Año, mes, día y hora

RecTimeStamp_2

Minuto, segundo, milisegundo y estado de la hora

A excepción del semibyte con el estado de la hora, la fecha y la hora están codificadas en
formato BCD.
Tabla 1-156 Asignación de la estructura de los sellos de tiempo
Nombre de la palabra
doble

N.º de
byte

Contenido
High nibble

Low nibble

RecTimeStamp_1

0

Año * 10

Año * 1

1

Mes * 10

Mes * 1

2

Día * 10

Día * 1

3

Hora * 10

Hora * 1

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2055

Configuración de dispositivos y redes
1.4 Crear configuraciones
Nombre de la palabra
doble

N.º de
byte

Contenido
High nibble

Low nibble

RecTimeStamp_2

0

Minuto * 10

Minuto * 1

1

Segundo * 10

Segundo * 1

2

Milisegundo * 100

Milisegundo * 10

3

Milisegundo * 1

Estado de la hora

Tabla 1-157 Asignación de bits del semibyte "Estado de la hora" (Low nibble de byte 3 de
RecTimeStamp_2)
N.º de bit

Valor

Significado

0

0

La hora no es válida

1

La hora es válida

0

Horario de invierno (hora normal)

1

Horario de verano

1
2

Libre

3

Libre

Según sea el Typical, las palabras dobles de tiempo citadas ocupan diferentes direcciones. En
el DB de instancia o en el encabezado de declaración del FB encontrará la dirección absoluta
con la que se leen las dos palabras dobles.
Es más cómodo cuando se pone un nombre simbólico a los DBs de instancia. En este caso,
para la lectura es posible utilizar el direccionamiento simbólico Y no hay que preocuparse de
las direcciones absolutas reales, que STEP 7 utiliza automáticamente. El ejemplo siguiente
explica este procedimiento.
Ejemplo
Nombre simbólico del DB de instancia: ObjectDB27
El programa de STEP 7 para leer la fecha y la hora y depositarlas en el DB20 a partir del byte
de datos 100 podría tener el aspecto siguiente con programación AWL:
L "ObjectDB27".RecTimeStamp_1
T DB 20.DBD 100
L "ObjectDB27".RecTimeStamp_2
T DB 20.DBD 104

Typical de valores analógicos Ana04R_S
Validez
Solo S7-1500

Función
Enviar 4 valores analógicos como número en coma flotante de 32 bits

2056

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Ana04R_S transmite los 4 valores analógicos como valores momentáneos. En el instante de
la transmisión se registra el valor analógico pendiente actualmente y se transmite al
interlocutor.
Nota
Procesamiento común de los cuatro valores analógicos
Los parámetros de procesamiento, como valor umbral, factor de filtrado, etc., solo existen una
vez en el Typical. Estos parámetros son válidos conjuntamente para los 4 valores analógicos,
es decir, no es posible ajustar individualmente los parámetros para cada valor analógico. Por
este motivo, en cada Typical deberían registrarse únicamente los valores analógicos que
deben procesarse de forma idéntica.

Parámetros
Parámetro:

PartnerNo
PartnerObjectNo
Enabled
ImageMemory
Conditional
Unconditional
TimeStamp
Consulte la descripción en el capítulo Parámetros repetitivos (Página 2046).
Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Explicación:

ThresholdIntegration
INPUT
BOOL
TRUE / FALSE
FALSE
Procesamiento del valor umbral según el principio de integración
Este parámetro permite indicar si debe aplicarse el principio de integración
para procesar el valor umbral.
En el ajuste predeterminado FALSE, el valor umbral se calcula sin integración.
Tanto en la línea a gran distancia como en el tráfico local entre CPU y TIM hay
que contar en este caso con un volumen de datos menor.

Parámetro: ZeroLimitation
Declaración: INPUT
Tipo de da‐ BOOL
tos:

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2057

Configuración de dispositivos y redes
1.4 Crear configuraciones
Rango de va‐ TRUE / FALSE
lores:
Ajuste prede‐ TRUE
terminado:
Explicación: Limitación de valor cero
Si el parámetro está activado se suprimen los valores negativos y se reempla‐
zan por el valor 0.

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

Explicación:

2058

TriggerInput
INPUT
BOOL
TRUE / FALSE
FALSE
Entrada
Marca

I 0.0 ... I n.7
M 0.0 ... M n.7
L 0.0 ... L n.7
DBm.DBX 0.0 ... n.7

Bit de datos
Entrada de disparo
Con el cambio de flanco 0 → 1 de la entrada "TriggerInput" es posible iniciar la
transferencia disparada del telegrama de valor analógico en un instante con‐
creto.
Ejemplo:
Una transmisión de valores analógicos controlada por tiempo y con sello de
tiempo para proporcionar datos a un fichero de valores analógicos del puesto
de control.
Asegúrese de poner el parámetro "ImageMemory" a FALSE para que estos
telegramas de datos con sello de tiempo no se sobrescriban cuando se guar‐
dan en el TIM de estación.
Para iniciar una transferencia controlada por tiempo mediante "TriggerInput"
está disponible la aplicación del bloque FC Trigger.
Si no necesita el parámetro déjelo abierto. En este caso, la transmisión debe
iniciarse en base a los parámetros de valor umbral "ThresholdValue" y "Thres‐
holdIntegration".
En realidad, por medio de "TriggerInput" la transmisión solo se inicia de forma
indirecta. Con un cambio de flanco 0 → 1 en "TriggerInput" se elabora el tele‐
grama de datos con sus valores actuales y se transfiere al TIM local. Segui‐
damente, este se encarga de transmitirlo al interlocutor. En líneas dedicadas o
redes inalámbricas la transmisión es inmediata. Con una conexión de marca‐
ción es posible que el telegrama de datos se guarde primero en el TIM y acceda
a la transmisión más adelante. El motivo puede ser, por ejemplo, que el tele‐
grama de datos esté marcado como "espontáneo con limitaciones"; consulte el
parámetro "Conditional".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

AnalogInput_1 ... _4
INPUT
REAL

Explicación:

Palabra de entrada analógica
Para cada valor analógico que debe transmitirse en el telegrama de datos es
posible indicar de dónde debe sacar el FB esta información analógica. Para ello
es posible mezclar de forma aleatoria direcciones de un bloque de datos y del
área de marcas.
Los parámetros que no se necesitan se dejan abiertos. Para estas entradas
analógicas se transmitirá un 0 en el telegrama de datos.

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Explicación:

SamplingPeriod
INPUT
INT

Consulte el área de direcciones
0.0
Dirección de marcas
Dirección de datos

MD0 ... MDn
LD0 ... LDn
DBm.DBD0 ... DBDn

0 ... 32767 [ms]
500
Intervalo de registro para las entradas analógicas en milisegundos
El intervalo de registro se necesita para los parámetros siguientes:
● Cálculo del valor umbral según el principio de integración
(ThresholdIntegration)
● Filtrado del valor de entrada analógico (SmoothingFactor)
En todo caso, el valor debe seleccionarse lo suficientemente grande para que
se garantice la captura de un valor nuevo dentro del tiempo de cifrado de la
entrada analógica. Debe indicarse como mínimo el tiempo de cifrado del mó‐
dulo de entradas analógicas utilizado con la resolución seleccionada en cada
caso (8 ... 15 bits).
Asimismo, el valor debe seleccionarse con la suficiente holgura para que sea
adecuado con el máximo número de entradas tanto con la máxima resolución
como con los módulos analógicos.
Si se indica un tiempo demasiado corto para "SamplingPeriod", es posible que
el totalizador interno se desborde.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2059

Configuración de dispositivos y redes
1.4 Crear configuraciones

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Explicación:

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:

ThresholdValue
INPUT
REAL
+1.175495e-38 ... +3.402823e+38
1.0
Valor umbral
Sin parametrización se aplica el valor predeterminado 1.0.
Particularidad con "ThresholdValue" = 0: No se aplica ningún control de cam‐
bios en base al valor umbral. El telegrama de valores analógicos solo se trans‐
fiere en los casos siguientes:
● Cuando se lanza mediante la entrada "TriggerInput", es decir, típicamente
un lanzamiento controlado por tiempo o evento.
● En caso de consulta general de la estación o de consulta individual del
telegrama de datos.
SmoothingFactor
INPUT
REAL

1.0 (sin filtrado)
4.0 (filtrado débil)
32.0 (filtrado medio)
64.0 (filtrado fuerte)
Ajuste prede‐ 4.0
terminado:
Explicación: Factor de filtrado
El factor de filtrado permite estabilizar con mayor o menor fuerza (según el
factor) los valores analógicos que oscilan rápidamente. De este modo es po‐
sible seleccionar una banda de valor umbral menor (ThresholdValue).
Los factores de filtrado son idénticos a los que pueden parametrizarse para
algunos módulos de entradas analógicas S7. El filtrado se lleva a cabo si‐
guiendo la misma fórmula que en el módulo de entrada:

\Q

[ Q  N ෥  \ Q
N

yn = valor filtrado en el ciclo actual n
yn-1 = valor filtrado en el ciclo anterior n-1
xn = valor registrado en el ciclo actual n
k = factor de filtrado

2060

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Typical de valores analógicos Ana04R_R
Validez
Solo S7-1500

Función
Recibir 4 valores analógicos como número en coma flotante de 32 bits

Parámetros
Parámetro:

PartnerNo
PartnerObjectNo
Enabled
Consulte la descripción en el capítulo Parámetros repetitivos (Página 2046).

Parámetro:
Declaración:
Tipo de datos
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

AnalogOutput_1 … _4
OUTPUT
REAL
Consulte el área de direcciones

Explicación:

0.0
Dirección de marcas
Dirección de datos

MD0 ... MDn
LD0 ... LDn
DBm.DBD0 ... DBDn
Existe la posibilidad de parametrizar dónde deben emitirse los valores analó‐
gicos recibidos por el FB. Para ello es posible mezclar de forma aleatoria di‐
recciones de un bloque de datos y del área de marcas.
Los parámetros que no se necesitan se dejan abiertos.

Parámetro:

NewData
Consulte la declaración, el tipo de datos, el rango de valores, la asignación
predeterminada y la función en el capítulo Parámetros repetitivos (Pági‐
na 2046).
Comporta‐
Cada vez que el FB ha recibido datos nuevos y los ha emitido en las salidas
miento espe‐ "AnalogOutput_1" a "AnalogOutput_4", la salida "NewData" se pone a TRUE
cífico del typi‐ durante un ciclo del OB1.
cal:

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2061

Configuración de dispositivos y redes
1.4 Crear configuraciones

Typical de valores analógicos Ana04W_S
Función
Enviar 4 valores analógicos como valores de 16 bits
Ana04W_S transmite los 4 valores analógicos de una de las formas siguientes:
● Como valores momentáneos
En el instante de la transmisión se registra el valor analógico pendiente actualmente y se
transmite al interlocutor.
● Como valores medios
El valor analógico pendiente se acumula en un período parametrizable. En el instante de la
transmisión se calcula un valor medio a partir de los valores acumulados y se transmite al
interlocutor.
Nota
Procesamiento común de los cuatro valores analógicos
Los parámetros de procesamiento, como valor umbral, factor de filtrado, etc., solo existen una
vez en el Typical. Estos parámetros son válidos conjuntamente para los 4 valores analógicos,
es decir, no es posible ajustar individualmente los parámetros para cada valor analógico. Por
este motivo, en cada Typical deberían registrarse únicamente los valores analógicos que
deben procesarse de forma idéntica.

Parámetros
Parámetro:

PartnerNo
PartnerObjectNo
Enabled
ImageMemory
Conditional
Unconditional
Consulte la descripción en el capítulo Parámetros repetitivos (Página 2046).

2062

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Parámetro: TimeStamp
Consulte la declaración, el tipo de datos, el rango de valores, la asignación predeterminada y
la función en el capítulo Parámetros repetitivos (Página 2046).
Funciones
En el ajuste TRUE, el sello de tiempo depende del ajuste del parámetro "Mean‐
específicas ValueGeneration":
del typical
● MeanValueGeneration = FALSE
En el telegrama de datos se transfieren valores momentáneos.
El sello de tiempo del telegrama de datos es idéntico al instante en que se
registraron los valores momentáneos incluidos en el telegrama de datos.
● MeanValueGeneration = TRUE
El telegrama de datos contiene valores medios.
El sello de tiempo es idéntico al instante en el que finalizó el período de
cálculo del promedio.
El instante inicial del período de cálculo del promedio no está incluido en el
telegrama de datos. No obstante, es idéntico al sello de tiempo del
telegrama de valor medio transmitido previamente.
Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Explicación:

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:

ThresholdIntegration
INPUT
BOOL
TRUE / FALSE
FALSE
Procesamiento del valor umbral según el principio de integración
Este parámetro permite indicar si debe aplicarse el principio de integración
para procesar el valor umbral.
En el ajuste predeterminado FALSE, el valor umbral se calcula sin integración.
Tanto en la línea a gran distancia como en el tráfico local entre CPU y TIM hay
que contar en este caso con un volumen de datos menor.
Si "MeanValueGeneration" = TRUE (los valores analógicos se transmiten co‐
mo valores medios), el parámetro "ThresholdIntegration" es irrelevante.
ZeroLimitation
INPUT
BOOL
TRUE / FALSE

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2063

Configuración de dispositivos y redes
1.4 Crear configuraciones
Ajuste prede‐ TRUE
terminado:
Explicación: Limitación de valor cero
Si el parámetro está activado se suprimen los valores negativos y se reempla‐
zan por el valor 0.

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

TriggerInput
INPUT
BOOL
TRUE / FALSE
FALSE
Entrada
Marca
Bit de datos

2064

I 0.0 ... I n.7
M 0.0 ... M n.7
L 0.0 ... L n.7
DBm.DBX 0.0 ... n.7

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Explicación:

Entrada de disparo
Con el cambio de flanco 0 → 1 de la entrada "TriggerInput" es posible iniciar la
transferencia disparada del telegrama de valor analógico en un instante con‐
creto.
Ejemplo:
Una transmisión de valores analógicos controlada por tiempo y con sello de
tiempo para proporcionar datos a un fichero de valores analógicos del puesto
de control.
Asegúrese de poner el parámetro "ImageMemory" a FALSE para que estos
telegramas de datos con sello de tiempo no se sobrescriban cuando se guar‐
dan en el TIM de estación.
Si el bloque calcula valores medios, mediante la entrada "TriggerInput" se
determina la duración del período de cálculo del promedio. Cada vez que se
inicia una transmisión por esta entrada finaliza el período en curso y empieza
uno nuevo. La distancia temporal entre dos disparos de un telegrama de datos
determina la duración del período de cálculo del promedio.
Para iniciar una transferencia controlada por tiempo mediante "TriggerInput"
está disponible la aplicación del bloque FC Trigger.
Si no necesita el parámetro déjelo abierto. En este caso, la transmisión debe
iniciarse en base a los parámetros de valor umbral "ThresholdValue" y "Thres‐
holdIntegration".
En realidad, por medio de "TriggerInput" la transmisión solo se inicia de forma
indirecta. Con un cambio de flanco 0 → 1 en "TriggerInput" se elabora el tele‐
grama de datos con sus valores (medios) actuales y se transfiere al TIM local.
Seguidamente, este se encarga de transmitirlo al interlocutor. En líneas dedi‐
cadas o redes inalámbricas la transmisión es inmediata. Con una conexión de
marcación es posible que el telegrama de datos se guarde primero en el TIM
y acceda a la transmisión más adelante. El motivo puede ser, por ejemplo, que
el telegrama de datos esté marcado como "espontáneo con limitaciones"; con‐
sulte el parámetro "Conditional".

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:

MeanValueGeneration
INPUT
BOOL
TRUE / FALSE
FALSE

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2065

Configuración de dispositivos y redes
1.4 Crear configuraciones
Explicación:

Cálculo del valor medio
Si el parámetro está activado, los valores analógicos que se registran se trans‐
mitirán como valores medios.
Si se elige el cálculo del valor medio, el valor analógico que está pendiente
actualmente se registra y acumula cíclicamente. El ciclo de adquisición de‐
pende del parámetro "SamplingPeriod" (p. ej. 500 ms, consulte también la
explicación de este parámetro). A partir de los valores totalizados se calcula el
valor medio en cuanto se lanza una transmisión por medio de la entrada "Trig‐
gerInput". A continuación se reinicia la totalización para calcular el próximo
valor medio.
El valor medio también se calcula cuando la transmisión del telegrama de
valores analógicos es iniciada por una consulta general o individual. En este
caso, la duración del período de cálculo del promedio es el tiempo que trans‐
curre entre la última transmisión (p. ej. lanzada por "TriggerInput") y el instante
de la consulta general o individual. Después de esta transmisión también se
reinicia la totalización para calcular el próximo valor medio.
En caso de que el valor analógico registrado esté en el rango de tolerancia por
encima o por debajo (7FFFH o 8000H), existe la posibilidad de tomar dicho
valor en consideración inmediatamente o bien ocultarlo por un tiempo deter‐
minado para el cálculo del valor medio. El comportamiento deseado en cada
caso se determina con el parámetro "FaultSuppressionTime":
● FaultSuppressionTime = 0
En cuanto se registra un valor en el rango de tolerancia por encima o por
debajo se cancela inmediatamente el cálculo del valor medio. Para el
período de cálculo en curso, el valor 7FFFH o 8000H se guarda como valor
medio no válido y se transfiere la próxima vez que se lanza el telegrama de
valores analógicos. Posteriormente se inicia un nuevo cálculo del valor
medio. Si el valor analógico sigue estando en el rango de tolerancia por
encima o por debajo, también se guarda inmediatamente como valor medio
no válido y se transmite con el próximo lanzamiento.
● FaultSuppressionTime > 0
Si el valor analógico registrado está en el rango de tolerancia por encima o
por debajo, los valores erróneos no se incluyen en el cálculo del valor
medio, concretamente mientras dure "FaultSuppressionTime". Una vez
excedido dicho tiempo, el valor 7FFFH o 8000H se guarda como valor medio
no válido y se transfiere la próxima vez que se lanza el telegrama de valores
analógicos. El procedimiento es el mismo en cada nuevo período de
cálculo, es decir, los valores erróneos se suprimen mientras dure
"FaultSuppressionTime".
La duración de "FaultSuppressionTime" permite determinar indirectamente
el porcentaje de valores no válidos por período de cálculo. Si el valor medio
se calcula cada 15 minutos y "FaultSuppressionTime" está ajustado a 5
minutos, por ejemplo, esto significa que el valor medio solo se transmitirá
como no válido cuando en el período de cálculo en curso haya más de un
1/3 de valores analógicos captados en el rango de tolerancia por encima o
por debajo.

Parámetro: AnalogInput_1 ... _4
Declaración: INPUT

2066

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

WORD

Explicación:

Palabra de entrada analógica
Para cada valor analógico que debe transmitirse en el telegrama de datos es
posible indicar de dónde debe sacar el FB esta información analógica. Para ello
es posible mezclar de forma aleatoria palabras de periferia de módulos de
entradas analógicas, palabras de datos de un bloque de datos y palabras de
marcas.
Los parámetros que no se necesitan se dejan abiertos. Para estas entradas
analógicas se transmitirá un 0 en el telegrama de datos.

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:

SamplingPeriod
INPUT
INT

Consulte el área de direcciones
0 (W#16#0)
Palabras de periferia
Palabras de marcas
Palabras de datos

PIW0 ... PIWn
MW0 ... MWn
LW0 ... LWn
DBm.DBW0 ... n

0 ... 32767 [ms]

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2067

Configuración de dispositivos y redes
1.4 Crear configuraciones
Ajuste prede‐ 500
terminado:
Explicación: Intervalo de registro para las entradas analógicas en milisegundos
El intervalo de registro se necesita para los parámetros siguientes:
● Cálculo del valor umbral según el principio de integración
(ThresholdIntegration)
● Filtrado del valor de entrada analógico (SmoothingFactor)
● Cálculo del valor medio (MeanValueGeneration)
En todo caso, el valor debe seleccionarse lo suficientemente grande para que
se garantice la captura de un valor nuevo dentro del tiempo de cifrado de la
entrada analógica. Debe indicarse como mínimo el tiempo de cifrado del mó‐
dulo de entradas analógicas utilizado con la resolución seleccionada en cada
caso (8 ... 15 bits).
Asimismo, el valor debe seleccionarse con la suficiente holgura para que sea
adecuado con el máximo número de entradas tanto con la máxima resolución
como con los módulos analógicos.
Si deben calcularse valores medios, SamplingPeriod no debería ser inferior a
500 ms. Si se calculan valores medios durante un período muy prolongado
será necesario aumentar el tiempo, concretamente:
● Período de cálculo del promedio de 12 h: SamplingPeriod = 1000 [ms]
● Período de cálculo del promedio de 24 h: SamplingPeriod = 2000 [ms]
Si se indica un tiempo demasiado corto para "SamplingPeriod", es posible que
el totalizador interno se desborde. No debe sobrepasarse el valor máximo de
2 147 483 647 de un entero doble. Si se detecta un error de desbordamiento,
para el período de cálculo en curso se transmite el valor medio no válido de
8000H.
Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:

2068

ThresholdValue
INPUT
INT
0 / 1 ... 32767

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Ajuste prede‐ 270
terminado:
Explicación: Valor umbral
Si se indica el valor umbral debe tenerse en cuenta el rango de cifrado de los
valores analógicos. Los valores brutos de entradas analógicas S7 se codifican
siempre en el rango de 0 a 27648 (= 0 ... 100 %) o + 27648 (= + 100%). Según
sea la resolución de la entrada analógica, el valor hace saltos de 128 (con una
resolución de 8 bits) o 1 (con una resolución de 15 bits). Si los valores analó‐
gicos registrados tienen un rango de cifrado distinto debe indicarse un valor
umbral que se oriente en él.
Sin parametrización se aplica el valor predeterminado 270. que equivale apro‐
ximadamente al 1% del rango de valores brutos analógicos de S7.
Particularidad con "ThresholdValue" = 0
No se aplica ningún control de cambios en base al valor umbral. El telegrama
de valores analógicos solo se transfiere en los casos siguientes:
● Cuando se lanza mediante la entrada "TriggerInput", es decir, típicamente
un lanzamiento controlado por tiempo o evento.
● En caso de consulta general de la estación o de consulta individual del
telegrama de datos.
● En caso que el valor analógico oscile en el rango de tolerancia por encima
o por debajo (7FFFH o 8000H) (dado el caso una vez transcurrido el tiempo
de supresión parametrizado en "FaultSuppressionTime").
Si los valores analógicos se transmiten como valores medios (MeanValueGe‐
neration = TRUE), el parámetro "ThresholdValue" es irrelevante.
Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:

SmoothingFactor
INPUT
INT
1 (sin filtrado)
4 (filtrado débil)
32 (filtrado medio)
64 (filtrado fuerte)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2069

Configuración de dispositivos y redes
1.4 Crear configuraciones
Ajuste prede‐ 1
terminado:
Explicación: Factor de filtrado
Si los valores analógicos se transmiten como valores medios (MeanValueGe‐
neration = TRUE), el parámetro "SmoothingFactor" es irrelevante.
El factor de filtrado permite estabilizar con mayor o menor fuerza (según el
factor) los valores analógicos que oscilan rápidamente. De este modo es po‐
sible seleccionar una banda de valor umbral menor (ThresholdValue).
Los factores de filtrado son idénticos a los que pueden parametrizarse para
algunos módulos de entradas analógicas S7. El filtrado se lleva a cabo si‐
guiendo la misma fórmula que en el módulo de entrada:

\Q

[ Q  N ෥  \ Q
N

yn = valor filtrado en el ciclo actual n
yn-1 = valor filtrado en el ciclo anterior n-1
xn = valor registrado en el ciclo actual n
k = factor de filtrado
Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:

2070

FaultSuppressionTime
INPUT
INT
0 ... 32767

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Ajuste prede‐ 0
terminado:
Explicación: Tiempo de supresión de fallos en segundos
La transmisión de un valor analógico que se encuentra en el rango de toleran‐
cia por encima o por debajo (7FFFH o 8000H) se suprime mientras dure el
intervalo de tiempo indicado. Una vez transcurrido dicho tiempo se transmitirá
el valor 7FFFH o 8000H, siempre que siga pendiente. Si el valor cae por debajo
de 7FFFH o excede 8000H antes de que transcurra el tiempo, se vuelve a
transmitir normalmente de inmediato. El tiempo de supresión se inicia de nuevo
en toda su duración la próxima vez que se registra 7FFFH o 8000H.
Un caso de aplicación típico es la supresión por tiempo de valores de intensi‐
dad que pueden producirse al arrancar bombas y motores potentes. En este
caso, la entrada analógica puede llegar a saturarse varias veces. La supresión
pretende impedir que estos valores se marquen como fallo en el sistema de
puestos de control.
La supresión está ajustada a valores analógicos que son captados como va‐
lores brutos por los módulos de entradas analógicas S7. Dichos módulos su‐
ministran para todas las áreas de entrada los valores citados para el rango de
tolerancia por encima y por debajo, incluso para entradas Life Zero. En los
valores finales preparados solo es posible suprimir los fallos si estos también
adoptan los valores citados de 7FFFH y 8000H en caso de tolerancia por encima
y por debajo, respectivamente. De no ser así no es necesario rellenar el pará‐
metro.
El parámetro también puede utilizarse en combinación con el cálculo del valor
medio con el fin de suprimir temporalmente los valores 7FFFH y 8000H (con‐
sulte el parámetro MeanValueGeneration).
Si no se indica ningún parámetro se aplica el ajuste predeterminado de 0 se‐
gundos. En este caso, en valor registrado de 7FFFH o 8000H se transmitirá
inmediatamente la primera vez que se detecte o, en caso de cálculo del valor
medio, se conservará como valor medio no válido para el período actual de
cálculo del promedio.

Typical de valores analógicos Ana04W_R
Función
Recibir 4 valores analógicos como valores de 16 bits

Parámetros
Parámetro:

PartnerNo
PartnerObjectNo
Enabled
Consulte la descripción en el capítulo Parámetros repetitivos (Página 2046).

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2071

Configuración de dispositivos y redes
1.4 Crear configuraciones

Parámetro:
Declaración:
Tipo de datos
Predetermi‐
nado:
Explicación

AnalogOutput_1 … _4
OUTPUT
WORD
TRUE
0 (W#16#0)
Rango de valo‐ Palabras de periferia
res:
Palabras de marcas
Palabras de datos

PQW0 ... PQWn
MW0 ... MWn
LW0 ... LWn
DBm.DBW0 ... n
Existe la posibilidad de parametrizar dónde deben emitirse los valores analó‐
gicos recibidos por el FB. Para ello es posible mezclar de forma aleatoria pa‐
labras de periferia de módulos de salidas analógicas, palabras de datos de un
bloque de datos y palabras de marcas.
Los parámetros que no se necesitan se dejan abiertos.
Parámetro:

NewData
Consulte la declaración, el tipo de datos, el rango de valores, la asignación
predeterminada y la función en el capítulo Parámetros repetitivos (Pági‐
na 2046).
Comporta‐
Cada vez que el FB ha recibido datos nuevos y los ha emitido en las salidas
miento espe‐ "AnalogOutput_1" a "AnalogOutput_4", la salida "NewData" se pone a TRUE
cífico del typi‐ durante un ciclo del OB1.
cal:

Typical de valores binarios Bin04B_S
Función
Enviar 4 bytes de información binaria

Parámetros
Parámetro:

2072

PartnerNo
PartnerObjectNo
Enabled
ImageMemory
Conditional
Unconditional
TimeStamp
Consulte la descripción en el capítulo Parámetros repetitivos (Página 2046).

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

InputByte_1 … _4
INPUT
BYTE
Consulte el área de direcciones
0 (B#16#0)
Bytes de entrada
Bytes de marcas

Explicación:

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:

IB0 ... IBn
PIB0 ... PIBn
MB0 ... MBn
LB0 ... LBn
DBm.DBB0 ... n

Bytes de datos
Byte de entrada
Indique el área de memoria (de 1 a 4 bytes) de la información binaria que debe
transmitir el FB.
Es posible mezclar bytes de entrada de la memoria imagen de proceso de las
entradas, bytes de periferia de los módulos de entradas digitales, bytes de
datos de un bloque de datos y bytes de marcas.
Los parámetros que no se necesitan se dejan abiertos.
Para los bytes no parametrizados se transmite el valor 0 (cero).
DisableMask
INPUT
DWORD

0 ... 2147483647
● Como número dual de 32 bits
2#0 ... 2#11111111_11111111_11111111_11111111
● Como número hexadecimal de 32 bits
DW#16#0 ... DW#16#FFFF_FFFF
Ajuste prede‐ 0 (2#0)
terminado:
Explicación: Máscara de bloqueo
● Introduzca un 1 en el lugar correspondiente del patrón de bits para cada
entrada que deba bloquearse.
● Introduzca un 0 para las demás entradas.
Una entrada bloqueada tiene el valor 0 (cero) en la transferencia.
Consulte la asignación de las 32 entradas, de "InputByte_1" a "InputByte_4", a
los 32 bits de la máscara de bloqueo en la tabla siguiente.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2073

Configuración de dispositivos y redes
1.4 Crear configuraciones

InputByte_1
Bit

.
7

.
6

2#

_

_

DW#1
6#

.
5

.
4

.
3

.
2

_

_

_

_

_

InputByte_2
.
1

.
0

.
7

.
6

_

_

_

_

_

.
5

.
4

.
3

.
2

_

_

_

_

_

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:

InputByte_3
.
1

.
0

. . .
7 6 5

.
4

.
3

.
2

_

_

_

_

_

_

_

_

_
_

InputByte_4
.
1

.
0

.
7

.
6

_

_

_

_

_

.
5

.
4

.
3

.
2

_

_

_

_

_

. .
1 0
_

_

_

InversionMask
INPUT
DWORD

0 ... 2147483647
● Como número dual de 32 bits
2#0 ... 2#11111111_11111111_11111111_11111111
● Como número hexadecimal de 32 bits
DW#16#0 ... DW#16#FFFF_FFFF
Ajuste prede‐ 0 (2#0)
terminado:
Explicación: Máscara de inversión
La inversión de las señales de entrada es aconsejable, por ejemplo, cuando se
mezclan encóders que trabajan en modo de circuito cerrado y abierto.
● Introduzca un 1 en el lugar correspondiente del patrón de bits para cada
entrada que deba invertirse.
● Introduzca un 0 para las demás entradas.
Consulte la asignación de las 32 entradas, de "InputByte_1" a "InputByte_4", a
los 32 bits de la máscara de inversión en la tabla siguiente.
InputByte_1
Bit

.
7

.
6

2#

_

_

DW#1
6#

_

.
5

.
4

.
3

.
2

_

_

_

_

InputByte_2

_

.
1

.
0

.
7

.
6

_

_

_

_
_

.
5

.
4

.
3

.
2

_

_

_

_

InputByte_3
.
1

.
0

. . .
7 6 5

.
4

.
3

.
2

_

_

_

_

_

_

_

_

_
_

InputByte_4

_

.
1

.
0

.
7

.
6

_

_

_

_
_

.
5

.
4

.
3

.
2

_

_

_

_

. .
1 0
_

_

_

Typical de valores binarios Bin04B_R
Función
Recibir 4 bytes de información binaria

2074

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Parámetros
Parámetro:

PartnerNo
PartnerObjectNo
Enabled
Consulte la descripción en el capítulo Parámetros repetitivos (Página 2046).

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

OutputByte_1 … _4
OUTPUT
BYTE
Consulte el área de direcciones
0 (B#16#0)
Bytes de salida
Bytes de marcas

Explicación:

Parámetro:
Explicación:

QB0 ... QBn
PQB0 ... PQBn
MB0 ... MBn
LB0 ... LBn
DBm.DBB0 ... n

Bytes de datos
Byte de salida
Indique el área de memoria (de 1 a 4 bytes) de la información binaria en la que
debe emitirse la información binaria.
Es posible mezclar bytes de salida de la memoria imagen de proceso de las
salidas, bytes de periferia directamente de los módulos de salidas digitales,
bytes de datos de un bloque de datos y bytes de marcas.
Los parámetros que no se necesitan se dejan abiertos.
Para leer el sello de tiempo recibido con los datos desde el programa de usua‐
rio consulte el capítulo Sello de tiempo (Página 2055).
NewData
Consulte la declaración, el tipo de datos, el rango de valores, la asignación
predeterminada y la función en el capítulo Parámetros repetitivos (Pági‐
na 2046).
La salida "NewData" se pone a TRUE durante un ciclo del OB1 cada vez que
el FB ha recibido datos nuevos y los ha emitido en los bytes de salida "Out‐
putByte_1" a "OutputByte_4".

Typical de comandos Cmd01B_S
Función
Enviar 1 byte de comandos con comprobación 1 de 8
La comprobación 1 de 8 es realizada por el typical de puntos de datos.
Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2075

Configuración de dispositivos y redes
1.4 Crear configuraciones
La comprobación 1 de n es realizada por la FC Safe.
Nota
Se requiere la FC Safe
Con Cmd01B_S solo es posible transmitir datos cuando al final del programa cíclico está
integrada la FC Safe.

Parámetros
Parámetro:

PartnerNo
PartnerObjectNo
Consulte la descripción en el capítulo Parámetros repetitivos (Página 2046).

Parámetro:

Enabled
Consulte la declaración, el tipo de datos, el rango de valores, la asignación
predeterminada y la función en el capítulo Parámetros repetitivos (Pági‐
na 2046).
Comporta‐
Habilitación del procesamiento del bloque
miento espe‐ Si no está habilitado, el FB solo comprueba si se ha eliminado el bloqueo. En
cífico del typi‐ este estado, el bloque tampoco es apto para la comunicación a nivel organi‐
cal:
zativo, porque el en principio no puede enviar telegramas organizativos.

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:

2076

CommandInputByte_HW
INPUT
BYTE
Consulte el área de direcciones
0 (B#16#0)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Área de di‐
recciones:

Explicación:

Nombre:
Declaración:
Tipo de datos
Rango de va‐
lores:
Ajuste prede‐
terminado:

Bytes de entrada

IB0 ... IBn
PIB0 ... PIBn
Bytes de marcas
MB0 ... MBn
LB0 ... LBn
Bytes de datos
DBm.DBB0 ... n
Byte de entrada de comandos para entrada de hardware
Este byte de entrada de comandos está previsto especialmente para introducir
comandos por hardware, es decir, a través de entradas digitales. Si bien tam‐
bién es posible la entrada mediante bytes de marcas o datos, en este caso hay
que asegurarse de desactivar el comando pendiente en el byte de entrada, p.
ej. soltando la tecla de comando en la entrada de hardware.
Cuando se detecta una entrada y no se ha encontrado ningún error en la com‐
probación 1 de 8 y 1 de n y, además, la marca de habilitación central está
activada, el comando se prepara para la transmisión. La FC Safe activa auto‐
máticamente dicha marca una vez transcurrido un retardo de tiempo parame‐
trizado en ella (consulte FC Safe, parámetro "InputDelayTime").
Si se detecta un error 1 de 8 o 1 de n, el comando introducido no se sigue
procesando. No se leerá un comando nuevo hasta que se registre un ciclo del
OB1 sin comandos de hardware en la CPU ya sea en este o en otro bloque de
entrada de comandos con una entrada de hardware.
El FB registra un error detectado 1 de 8 o 1 de n en el búfer de diagnóstico (ID
de evento B171 o B172, respectivamente). El estado de error se visualiza
además por medio de la salida "InputError" de la FC Safe (consulte FC Safe,
parámetro "InputError") mientras el error esté pendiente.
CommandInputByte_SW
IN_OUT
BYTE
Consulte el área de direcciones
0 (B#16#0)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2077

Configuración de dispositivos y redes
1.4 Crear configuraciones
Área de di‐
recciones:

Explicación

Bytes de marcas
MB0 ... MBn
Bytes de datos
DBm.DBB0 ... n
El parámetro es de entrada/salida (declaración IN_OUT). Para este tipo de
parámetro es un problema indicar marcas locales, por lo que no debería utili‐
zarse.
Byte de entrada de comandos para entrada de software.
Este byte de entrada de comandos está previsto especialmente para introducir
comandos por software, es decir, a través del programa de usuario o del panel
de operador (OP). Cuando se detecta una entrada y en la comprobación 1 de
8 y 1 de n no se ha detectado ningún error, el comando se desactiva en el byte
de entrada y se prepara para la transmisión. Aquí no se tiene en cuenta la
marca de habilitación central, porque esta solo está prevista para la entrada de
comandos por hardware (véase "CommandInputByte_HW").
Si se detecta un error 1 de 8 o 1 de n, el comando introducido no se sigue
procesando. No se leerá un comando nuevo hasta que se registre un ciclo del
OB1 sin comandos de software en la CPU ya sea en este o en otro bloque de
entrada de comandos con una entrada de software.
El FB registra un error detectado 1 de 8 o 1 de n en el búfer de diagnóstico (ID
de evento B171 o B172, respectivamente). Además, en el bloque de datos
central BasicData se activan los bits de error correspondientes, que pueden ser
consultados por el software. Encontrará más detalles al respecto en la des‐
cripción de la FC Safe.
En principio es posible crear un comando nuevo en "CommandInputByte_SW"
para cada ciclo del OB1. Sin embargo, en cada ciclo del OB1 puede haber solo
un comando, concretamente uno entre todos los bloques de entrada de co‐
mandos con entrada de software (comprobación 1 de n). Así pues, no es ne‐
cesario un "ciclo vacío" entre dos comandos de software consecutivos.

Nota
CommandInputByte_HW / CommandInputByte_SW
Cuando deben introducirse los mismos comandos tanto por hardware como por software, las
entradas de comandos "CommandInputByte_HW" y "CommandInputByte_SW" también
pueden utilizarse en paralelo.
Sin embargo, si se introduce un comando simultáneamente en ambos bytes de entrada, este
solo se aceptará si se introduce exactamente el mismo comando tanto en la entrada de
hardware como en la de software. En este caso se seguirá procesando la entrada de hardware.
En todos los demás casos se rechazará la entrada y se registrará un mensaje de error en el
búfer de diagnóstico (ID de evento B170). El estado de error se visualiza además por medio de
la salida InputError de la FC Safe. En el bloque de datos central BasicData se activan los bits
de error correspondientes, que pueden ser consultados por el software (consulte la FC Safe).

Typical de comandos Cmd01B_R
Función
Recibir 1 byte de comandos en formato 1 de 8

2078

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Parámetros
Parámetro:

PartnerNo
PartnerObjectNo
Consulte la descripción en el capítulo Parámetros repetitivos (Página 2046).

Parámetro:

Enabled
Consulte la declaración, el tipo de datos, el rango de valores, la asignación
predeterminada y la función en el capítulo Parámetros repetitivos (Pági‐
na 2046).
Comporta‐
Habilitación del procesamiento del bloque
miento espe‐ Si no está habilitado, el FB solo comprueba si se ha eliminado el bloqueo. No
cífico del typi‐ se emiten posibles comandos recibidos adicionalmente. En este estado, el FB
cal:
tampoco es apto para la comunicación a nivel organizativo, porque Cmd01B_R
en principio no puede enviar o recibir telegramas organizativos.
Si la entrada "Enabled" debe poder operarse mediante un interruptor, este
bloqueo local tiene como consecuencia que no se emitirán más comandos
recibidos. Sin embargo, puesto que el bloque no tiene la capacidad de enviar
telegramas organizativos, no puede devolver este bloqueo local al interlocutor.
Esto debería hacerse con otro typical, p. ej. Bin04B_S.
Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Explicación:

MultipleOutput
INPUT
BOOL
TRUE / FALSE
FALSE
Se permite la salida simultánea de varios comandos
Este parámetro permite indicar si se permite la salida simultánea de varios
comandos (recibidos sucesivamente), es decir, hay que especificar cómo debe
reaccionar el bloque cuando se recibe un comando nuevo y todavía debe emi‐
tirse un comando recibido anteriormente.
Requisitos: El tiempo de salida de comandos todavía no ha finalizado y el
programa de usuario todavía no ha desactivado este comando.
● FALSE
No se permite una salida múltiple. El nuevo comando recibido sobrescribe
el byte de salida. Esto significa que si todavía hay un comando pendiente,
este se pondrá a 0 a menos que el comando nuevo sea idéntico al antiguo.
● TRUE
Se permite la salida múltiple. El nuevo comando recibido se escribe en el
byte de salida actual. El tiempo de salida de comandos se inicia de nuevo
y se aplica a todos los comandos pendientes.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2079

Configuración de dispositivos y redes
1.4 Crear configuraciones

2080

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Explicación:

CommandOutputTime
INPUT
INT

Parámetro:
Explicación:

NewData
Consulte la declaración, el tipo de datos, el rango de valores, la asignación
predeterminada y la función en el capítulo Parámetros repetitivos (Pági‐
na 2046).
La salida "NewData" se pone a TRUE durante un ciclo del OB1 cada vez que
el FB ha recibido datos nuevos y los ha emitido en el byte de salida "Comman‐
dOutputByte".

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:

CommandOutputByte
IN_OUT
BYTE

0 ... 500
500
Tiempo de salida de comandos en milisegundos
El tiempo indicado sirve para todas las salidas de comandos.
Si puede haber varias salidas activadas al mismo tiempo (MultipleOutput =
TRUE), el tiempo de salida se reinicia cada vez que se recibe un comando
nuevo. Esto es equivalente a un redisparo para comandos que ya están pen‐
dientes. Las salidas de comandos no se retiran simultáneamente hasta que ha
transcurrido el tiempo de salida.
Con el valor 0, el typical de comandos no retira una salida de comandos acti‐
vada. Esto debe hacerse mediante el programa de usuario.

Consulte el área de direcciones
0 (B#16#0)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Área de di‐
recciones:

Explicación:

Bytes de salida (de la memoria
QB0 ... QBn
imagen de proceso)
Bytes de marcas
MB0 ... MBn
Bytes de datos
DBm.DBB0 ... n
Puesto que el parámetro es de entrada/salida (declaración IN_OUT) no se
permite una salida de periferia directa del byte de comandos en PQB0 ... PQBn.
Para este tipo de parámetro también es un problema indicar marcas locales,
por lo que no debería utilizarse.
Byte de salida de comandos
Para que las salidas de comandos puedan ser desactivadas tanto por el typical
de comandos como por el programa de usuario (con un tiempo de salida = 0),
el parámetro se ha declarado como de entrada/salida (IN_OUT).

Typical de comandos Cmd08X_S
Validez
S7-1500

Función
Enviar bit a bit 8 comandos a través de 8 canales
No se realiza la comprobación 1 de n; el typical no necesita la FC Safe.

Parámetros
Parámetros
generales:

PartnerNo
PartnerObjectNo
Consulte la descripción en el capítulo AUTOHOTSPOT.

Nombre:

Enabled
Consulte la declaración, el tipo de datos, el rango de valores, la asignación
predeterminada y la función en el capítulo AUTOHOTSPOT.
Habilitación del procesamiento del bloque
Comporta‐
miento espe‐ Si el procesamiento no está habilitado, el FB solo comprueba si se ha eliminado
cífico del typi‐ el bloqueo. En este estado, el bloque tampoco es apto para la comunicación a
cal:
nivel organizativo, porque el en principio no puede enviar telegramas organi‐
zativos.
Nombre:
CommandInput01..08
Declaración: IN_OUT
Tipo de da‐ Bool
tos:

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2081

Configuración de dispositivos y redes
1.4 Crear configuraciones
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

Explicación:

Consulte el área de direcciones
0
Entrada
I 0.0 ... I n.7
Marca
M 0.0 ... M n.7
Bit de datos
DBm.DBX 0.0 ... n.7
Puesto que el parámetro es de entrada/salida (declaración IN_OUT) no se
permite una salida de periferia directa del bit de comando en PQ0...PQn. Tam‐
poco debe utilizarse la indicación de marcas locales.
Bit de entrada de comandos
El parámetro existe 8 veces, una por canal.
Si se detecta la entrada de un comando, dicho comando se prepara inmedia‐
tamente para ser transferido. Cada comando se transfiere en el bit 0 de un byte
y en una copia del byte.
Si se detecta un comando, se transfieren siempre todo el byte de comando y su
copia.
Las entradas de comando no se desactivan automáticamente y tampoco se
vigila si el valor 1 está pendiente continuamente. El usuario debe ocuparse de
desactivar el comando pendiente.

Typical de comandos Cmd08X_R
Validez
S7-1500

Función
Recibir bit a bit 8 comandos a través de 8 canales
Consulte la comprobación 1 de 8 más abajo.

Parámetros
Parámetros
generales:

2082

PartnerNo
PartnerObjectNo
Consulte la descripción en el capítulo AUTOHOTSPOT.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Nombre:

Enabled
Consulte la declaración, el tipo de datos, el rango de valores, la asignación
predeterminada y la función en el capítulo AUTOHOTSPOT.
Comporta‐
Habilitación del procesamiento del bloque
miento espe‐ Si el procesamiento no está habilitado, el FB solo comprueba si se ha eliminado
cífico del typi‐ el bloqueo. No se emiten posibles comandos recibidos adicionalmente. En este
cal:
estado, el FB tampoco es apto para la comunicación a nivel organizativo, por‐
que en principio no puede enviar o recibir telegramas organizativos.
Si la entrada "Enabled" puede operarse mediante un interruptor, este bloqueo
local tiene como consecuencia que no se emitirán más comandos recibidos.
Puesto que el bloque no envía telegramas organizativos, no puede devolver
este bloqueo local al interlocutor. Esto debería hacerse con otro typical, p. ej.
Bin04B_S.
Nombre:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Explicación:

CommandOutputTime
INPUT
INT
0 ... 500
500
Tiempo de salida de comandos en milisegundos
El tiempo indicado sirve para todas las salidas de comandos.
El tiempo de salida se inicia por separado para cada canal de comando. El
tiempo de salida de un comando solo se reinicia si el mismo comando se recibe
de nuevo mientras se está emitiendo. Esto no influye en los tiempos de salida
de los demás comandos.
Con el valor 0, el typical de comandos no retira una salida de comandos acti‐
vada. Esto debe hacerse mediante el programa de usuario.

Nombre:
Explicación:

NewData
Consulte la declaración, el tipo de datos, el rango de valores, la asignación
predeterminada y la función en el capítulo AUTOHOTSPOT.
La salida "NewData" se pone a TRUE durante un ciclo del OB1 cada vez que
el FB ha recibido datos nuevos y los ha emitido en la correspondiente salida
"CommandOuputXX".

Nombre:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:

CommandOutput01..08
IN_OUT
Bool
Consulte el área de direcciones

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2083

Configuración de dispositivos y redes
1.4 Crear configuraciones
Ajuste prede‐ 0 (B#16#0)
terminado:
Área de di‐
Bits de salida
Q 0.0 ... Q n.7
recciones:
Marca
M 0.0 ... M n.7
Bit de datos
DBm.DBX 0.0 ... n.7
Puesto que el parámetro es de entrada/salida (declaración IN_OUT) no se
permite una salida de periferia directa del bit de comando en PQ0...PQn. Tam‐
poco debe utilizarse la indicación de marcas locales.
Explicación: Bit de salida de comandos
El parámetro existe 8 veces, una por canal.
Para que las salidas de comandos puedan ser desactivadas tanto por el typical
de comandos como por el programa de usuario (con un tiempo de salida = 0),
el parámetro se ha declarado como de entrada/salida (IN_OUT).
En cada byte se realiza una comprobación 1 de 8 interna.
● Si se recibe más de 1 bit en un byte, se emite el error siguiente:
0xB174 ‑ Error 1 de 8
● Si la copia del byte de comando no es idéntica, se emite el error siguiente:
0xB173 ‑ Bytes de comando y de control diferentes
En ambos casos se borrará el comando.

Typicals de valores de contaje Cnt01D_S / Cnt04D_S
Función
● Cnt01D_S: Enviar 1 valor de contaje (32 bits)
● Cnt04D_S: Enviar 4 valores de contaje (32 bits)
Tenga en cuenta que el parámetro "DifferenceValue" solo puede activarse para los cuatro
valores de contaje a la vez para calcular el valor diferencial.

Parámetros
Parámetro:

PartnerNo
PartnerObjectNo
Enabled
ImageMemory
Conditional
Unconditional
TimeStamp
Consulte la descripción en el capítulo Parámetros repetitivos (Página 2046).

Parámetro: GeneralTriggerCommand
Declaración: INPUT

2084

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Explicación:

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:

BOOL
TRUE / FALSE
FALSE
Comando agrupado de reubicación
El comando agrupado de reubicación es una marca central del sistema que
forma parte de los comandos de sistema organizativos SINAUT.
Ponga el parámetro a TRUE si la transmisión del valor de contaje debe iniciarse
con un comando agrupado de reubicación.
● Si el número de dispositivo de destino (PartnerNo) = 0 (transmisión a todos),
se toma en consideración el comando agrupado de reubicación.
Al detectar el comando agrupado de reubicación, el valor de contaje
totalizado actualmente se prepara para la transmisión, independientemente
de otros disparadores de una transmisión. En este valor de contaje se
invierte el bit de reubicación.
● Si en el typical se ha parametrizado un número de dispositivo de destino
explícito (PartnerNo > 0), se evalúa el comando agrupado de reubicación en
la contabilidad central del objeto de dispositivo correspondiente.
Los parámetros "GeneralTriggerCommand" y "TriggerInput" pueden utilizarse
en paralelo. En este caso, la transferencia se inicia tanto con un cambio de
flanco 0 → 1 en "TriggerInput" como al recibir un comando agrupado de reubi‐
cación.
TriggerInput
INPUT
BOOL
TRUE / FALSE
FALSE

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2085

Configuración de dispositivos y redes
1.4 Crear configuraciones
Área de di‐
recciones:

Explicación:

Entrada
Marca

I 0.0 ... I n.7
M 0.0 ... M n.7
L 0.0 ... L n.7
DBm.DBX 0.0 ... n.7

Bit de datos
Entrada de disparo
Con el cambio de flanco 0 → 1 de la entrada "TriggerInput" es posible iniciar la
transferencia disparada en un instante concreto, independientemente de otros
criterios para una transferencia. Se prepara para la transmisión el valor de
contaje totalizado actualmente. En este valor de contaje se invierte el bit de
reubicación (véase arriba).
Ejemplo:
Una transmisión controlada por tiempo y con sello de tiempo para proporcionar
datos a un fichero en el puesto de control.
Los parámetros "GeneralTriggerCommand" y "TriggerInput" pueden utilizarse
en paralelo. En este caso, la transferencia se inicia tanto con un cambio de
flanco 0 → 1 en "TriggerInput" como al recibir un comando agrupado de reubi‐
cación.
Con el ajuste FALSE no se inician ni una reubicación ni una transferencia
mediante la entrada "TriggerInput".

Parámetro:

Counter_1 (Cnt01D_S)
Counter_1 ... _4 (Cnt04D_S)
Declaración: INPUT
Tipo de da‐ COUNTER
tos:
Rango de va‐ 0 ... 32767
lores:
● C0 como comodín
o bien
● C1 ... Cn
n depende del tipo de CPU.
Ajuste prede‐ ‑
terminado:
Explicación: Número del contador SIMATIC
Indica el contador SIMATIC en el que se incluyen los impulsos de contaje por
tiempos. El contaje se realiza en el fondo mediante la FC PulseCounter, que se
llama en un OB de alarma cíclica (p. ej. en el OB35). Consulte también los
capítulos FC PulseCounter (Página 2161) y OB de alarma cíclica (Pági‐
na 2040).
No es posible asignar un valor predeterminado al tipo de datos COUNTER.
Si se ha parametrizado el comodín C0, el valor de contaje correspondiente no
se procesará.
Parámetro: DifferenceValue
Declaración: INPUT

2086

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Explicación:

INT
0 ... 31767
0
Valor diferencial
● Si se parametriza un valor entre 1 y 31767, el valor de contaje se transmite
en cuanto la diferencia entre el valor de contaje actual y el último transmitido
alcanza el importe indicado aquí.
● En caso de que se parametrice el valor predeterminado 0, solo se
transmitirá un valor de contaje en los casos siguientes:
– Con un cambio de flanco 0 → 1 en la entrada "TriggerInput"
– Cuando se reciba un comando de reubicación si
"GeneralTriggerCommand" = TRUE.
Elija el valor diferencial en función de la velocidad de impulso máxima por
segundo.
No elija un valor demasiado pequeño para evitar que el valor de contaje se
transmita continuamente al TIM. Esto sobrecargaría la vía de comunicación
con la CPU y la cola de espera de transmisión de la CPU.
Nota sobre Cnt04D_S
Este parámetro de procesamiento para calcular el valor diferencial solo existe
una vez en el typical. Es válido para los 4 valores de contaje juntos. No es
posible ajustar individualmente el parámetro para cada valor de contaje. Por
este motivo, cuando se utiliza este parámetro, en cada typical deberían regis‐
trarse únicamente los valores de contaje que pueden procesarse de forma
idéntica.

Typicals de valores de contaje Cnt01D_R / Cnt04D_R
Función
● Cnt01D_S: Recibir 1 valor de contaje (32 bits)
● Cnt04D_S: Recibir 4 valor de contaje (32 bits)

Parámetros
Parámetro:

PartnerNo
PartnerObjectNo
Enabled
Consulte la descripción en el capítulo Parámetros repetitivos (Página 2046).

Parámetro: BCD_Format
Declaración: INPUT

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2087

Configuración de dispositivos y redes
1.4 Crear configuraciones
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Explicación:

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:

2088

BOOL
TRUE / FALSE
TRUE
Salida del valor de contaje en formato BCD
● Si el parámetro está activado, el valor de contaje recibido en la salida
"CountedValueOutput_n" se emite como valor BCD positivo.
● Si el parámetro está desactivado, el valor de contaje se emite como entero
positivo de 32 bits.
Consulte los diferentes rangos de valores de los dos formatos en el parámetro
"CountedValueOutput_n".
Si se rebasa por exceso el valor de contaje máximo que puede representarse,
este empieza de nuevo en 0 y se sigue contando en el rango positivo.
Nota sobre Cnt04D_R
El parámetro solo existe una vez en el typical y es válido para los 4 valores de
contaje juntos. No es posible un ajuste individual para cada valor de contaje.
Por este motivo, cuando se utiliza este parámetro, en cada typical deberían
emitirse únicamente valores de contaje con el mismo formato de salida.
CntValInvalid
OUTPUT
BOOL
TRUE / FALSE
FALSE

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Área de di‐
recciones:

Explicación:

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:

Salida
Marca

Q 0.0 ... Q n.7
M 0.0 ... M n.7
L 0.0 ... L n.7
DBm.DBX 0.0 ... n.7

Bit de datos
Valor de contaje no válido
A la hora de evaluar "CntValInvalid" hay que tener en cuenta que el bit posi‐
blemente solo esté activado durante un ciclo del OB1.
La salida "CntValInvalid" indica si el último valor de contaje recibido no era
válido. En "Cnt04D_R" sirve de indicador de grupo para los 4 valores de con‐
taje; consulte la nota.
En la práctica, la salida muestra el estado de validez del último valor de contaje
recibido de forma invertida.
La salida sirve para lo siguiente:
● Indicador de error
● Señal para procesamientos posteriores personalizados
Así, por ejemplo, es posible reaccionar a la no actualidad corrigiendo el
valor de contaje emitido en "CountedValueOutput_n" con impulsos de
contaje que posiblemente se hayan perdido.
Si no necesita el parámetro déjelo abierto.
Nota sobre Cnt04D_R
Aunque los 4 valores de contaje del telegrama de datos gestionan su propio bit
de estado, para el estado en la salida "CntValInvalid" solo se evalúa el bit del
primer valor de contaje en el telegrama de datos recibido previamente.
Sin embargo, este estado se aplica a los 4 valores de contaje.
(Todos los valores de contaje del telegrama de datos tienen siempre el mismo
estado.)
RestoreStatus
OUTPUT
BOOL
TRUE / FALSE
FALSE

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2089

Configuración de dispositivos y redes
1.4 Crear configuraciones
Área de di‐
recciones:

Explicación:

Parámetro:
Explicación:

Salida
Marca

Q 0.0 ... Q n.7
M 0.0 ... M n.7
L 0.0 ... L n.7
Bit de datos
DBm.DBX 0.0 ... n.7
Estado del bit de reubicación en el valor de contaje recibido
La salida "RestoreStatus" indica el estado actual del bit de reubicación a partir
del último telegrama de valores de contaje recibido.
La salida puede utilizarse para procesamientos posteriores personalizados.
Ejemplo:
Solo es posible acceder a la información de "CountedValueOutput_n" cuando
se detecta un cambio en la salida "RestoreStatus", es decir, cuando el valor de
contaje se ha recibido a causa de una reubicación, p. ej. una reubicación local
controlada por tiempo.
Si no necesita el parámetro déjelo abierto.
Nota sobre Cnt04D_R
Aunque los 4 valores de contaje del telegrama de datos gestionan su propio bit
de reubicación, para el estado en la salida "RestoreStatus" solo se evalúa el bit
de reubicación del primer valor de contaje en el telegrama de datos recibido
previamente.
Sin embargo, este estado se aplica a los 4 valores de contaje.
(Todos los valores de contaje del telegrama de datos tienen siempre el mismo
estado.)
NewData
Consulte la declaración, el tipo de datos, el rango de valores, la asignación
predeterminada y la función en el capítulo Parámetros repetitivos (Pági‐
na 2046).
La salida "NewData" se pone a TRUE durante un ciclo del OB1 cada vez que
el FB ha recibido datos nuevos y los ha emitido en la o las salidas "Counted‐
ValueOutput_1" a "CountedValueOutput_4".

Parámetro:

CountedValueOutput_1 (Cnt01D_S)
CountedValueOutput_1 ... _4 (Cnt04D_S)
Declaración: IN_OUT
Tipo de da‐ DWord, UDInt
tos:
0 ... 2 147 483 647
Rango de va‐ ● Integer:
lores:
0 ... 9 999 999
● BCD:
Ajuste prede‐ 0
terminado:

2090

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Área de di‐
recciones:

Explicación:

Salida (DWORD)
QD0 … QDn
Marca (DWORD)
MD0 ... MDn
Datos (DWORD)
DBm.DBB0 … n
Puesto que el parámetro es de entrada/salida (declaración IN_OUT) no se
permite una salida de periferia directa del valor de contaje en PQD0 ... PQDn.
Para este tipo de parámetro también es un problema indicar marcas locales,
por lo que no debería utilizarse.
Salida del valor de contaje
El typical de valores de contaje acumula siempre el nuevo valor diferencial
(diferencia entre el nuevo valor de contaje y el último recibido) al valor emitido
actualmente en la salida del valor de contaje.
La salida del valor de contaje incluye una palabra doble en la que está depo‐
sitado el valor de contaje en formato BCD o como entero de 32 bits (en función
del parámetro "BCD_Format"; véase arriba).
El valor de contaje se emite siempre como número positivo. Si se rebasa por
exceso el valor de contaje máximo que puede representarse, este empieza de
nuevo en 0 y se sigue contando en el rango positivo.
Puesto que el parámetro es de entrada/salida (IN_OUT), el programa de usua‐
rio puede poner en todo momento a 0 o a otro valor el valor de la salida del valor
de contaje.

Typical de datos Dat12D_S
Función
Enviar máx. 12 palabras dobles con cualquier contenido de datos
El contenido por palabra doble puede ser un valor en formato de palabra doble (DWORD,
DINT, REAL), pero se admite también una combinación de otros tipos de datos cuyo resultado
sea una palabra doble, por ejemplo:
● 4 bytes
● 2 palabras
● 2 bytes + 1 palabra
El envío del área de datos puede iniciarse de dos modos distintos:
● Mediante un control de cambios
Los datos se transmiten en cuanto cambia un bit ("SendOnChange" = TRUE).
● Mediante el programa de usuario
La transmisión puede iniciarse con un cambio de flanco 0 → 1 en la entrada "TriggerInput".
Para una transmisión por tiempos es aconsejable utilizar la FC Trigger.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2091

Configuración de dispositivos y redes
1.4 Crear configuraciones
Además, "SendAll" permite especificar si en una transmisión deben enviarse siempre todos los
datos o solo las palabras dobles de datos que han cambiado.
Nota
Observar el límite de palabras dobles
Si se transmiten datos modificados y el área de datos contiene valores en formato de palabra
doble, asegúrese de que los valores de palabra doble estén realmente dentro de una de las 12
palabras dobles como máximo que tiene el área de datos que se registrará.
Si se reparten en dos palabras dobles de datos consecutivas, podría suceder que solo se
transmita una palabra del valor de palabra doble (palabra High o Low), porque solo ha
cambiado algo en ella. En este caso, la palabra que falta puede provocar un error de datos en
el interlocutor receptor (se aplica a ST7cc, no a una CPU S7).
Nota
DB con acceso estándar
El bloque tiene parámetros del tipo "ANY". Por este motivo, en las propiedades del DB debe
dejarse desactivado el atributo "Acceso optimizado al bloque".

Parámetros

2092

Parámetro:

PartnerNo
PartnerObjectNo
Enabled
ImageMemory
Conditional
Unconditional
TimeStamp
Consulte la descripción en el capítulo Parámetros repetitivos (Página 2046).

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:

SendOnChange
INPUT
BOOL
TRUE / FALSE

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Ajuste prede‐ FALSE
terminado:
Explicación: Enviar en caso de cambio
En el ajuste TRUE, el bloque ejecuta un control de cambios dentro del área de
datos registrada "DataInput". El bloque comprueba si ha cambiado por lo me‐
nos un bit. En caso de cambio se inicia automáticamente una transmisión del
área de datos. Con el parámetro "SendAll" se determina si debe transmitirse
toda el área o solo la parte modificada.
Con el ajuste FALSE hay que iniciar la transmisión mediante el parámetro de
entrada "TriggerInput".
Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

TriggerInput
INPUT
BOOL
TRUE / FALSE
FALSE
Entrada
Marca
Bit de datos

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

I 0.0 ... I n.7
M 0.0 ... M n.7
L 0.0 ... L n.7
DBm.DBX 0.0 ... n.7

2093

Configuración de dispositivos y redes
1.4 Crear configuraciones

2094

Explicación:

Entrada de disparo
Con el cambio de flanco 0 → 1 de la entrada "TriggerInput" es posible iniciar la
transferencia disparada del telegrama de datos en un instante concreto.
Ejemplo:
Una transmisión de valores analógicos controlada por tiempo y con sello de
tiempo para proporcionar datos a un fichero de valores analógicos del puesto
de control.
Asegúrese de poner el parámetro "ImageMemory" a FALSE para que estos
datos con sello de tiempo no se sobrescriban cuando se guardan en el TIM de
estación.
Para iniciar una transferencia controlada por tiempo mediante "TriggerInput"
está disponible la aplicación del bloque FC Trigger.
En realidad, por medio de "TriggerInput" la transmisión solo se inicia de forma
indirecta. Con un cambio de flanco 0 → 1 en "TriggerInput" se elabora el tele‐
grama de datos con sus valores actuales y se transfiere al TIM local. Segui‐
damente, este se encarga de transmitirlo al interlocutor. En líneas dedicadas o
redes inalámbricas la transmisión es inmediata. Con una conexión de marca‐
ción es posible que el telegrama de datos se guarde primero en el TIM y acceda
a la transmisión más adelante. El motivo puede ser, por ejemplo, que el tele‐
grama de datos esté marcado como "espontáneo con limitaciones"; consulte el
parámetro "Conditional".
Si no necesita el parámetro déjelo abierto. No obstante, en este caso debería
ponerse el parámetro "SendOnChange" a TRUE para que la transmisión de
datos se inicie automáticamente cada vez que haya un cambio.
Para iniciar la transmisión de datos también es posible seleccionar una com‐
binación de "SendOnChange" más "TriggerInput". En este caso, la transmisión
se iniciará tanto cuando se detecte un cambio como cuando haya un cambio de
flanco de 0 a 1 en la entrada "TriggerInput".
Si no se utiliza ni "SendOnChange" ni "TriggerInput" para iniciar la transmisión
de datos, esta solo se produce en caso de consulta individual de este objeto de
datos o en el marco de una consulta general.

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:

SendAll
INPUT
BOOL
TRUE / FALSE

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Ajuste prede‐ TRUE
terminado:
Explicación: Enviar todos los datos en cada transmisión
Con este parámetro se ajusta si el bloque debe transmitir siempre todos los
datos del área indicada con "DataInput" o bien solo los que han cambiado. La
transmisión puede haber sido activada porque el control de cambios está ac‐
tivado (SendOnChange = TRUE) o mediante "TriggerInput".
● SendAll = TRUE
Enviar siempre todos los datos
● SendAll = FALSE
Enviar solo los datos modificados
Excepción:
Si "SendAll" = FALSE, se inicia la transmisión mediante "TriggerInput" y
hasta este instante no han cambiado datos, se transmite toda el área. Para
este caso excepcional equivale a "SendAll" = TRUE.
Si solo se transmite el área de datos modificada ("SendAll" = FALSE), dicha
área consta de la primera y última palabra doble en las que se ha detectado
un cambio, así como de todas las palabras que están entre ellas, incluso si
no han cambiado.
En caso de consulta individual de este objeto de datos o en el marco de una
consulta general se transmiten siempre todas las palabras de datos del área
definida con "DataInput".
Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:

DataInput
INPUT
ANY
Consulte el área de direcciones
P#P 0.0 VOID 0
(puntero cero)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2095

Configuración de dispositivos y redes
1.4 Crear configuraciones
Área de di‐
recciones:

Explicación:

P#DBxx.DBX yy.0 DWORD zz
● xx: número del bloque de datos 1...32767
● yy: número del byte
● zz: número de palabras dobles 1...12 a partir del número de byte yy
Ejemplo:
P#DB20.DBX 100.0 DWORD 4
A la hora de introducir el puntero vigile bien los puntos y espacios.
Tenga en cuenta que el valor predeterminado (puntero cero) no está permitido.
Debe indicarse un puntero con una dirección real.
Área de entrada de datos
El puntero ANY direcciona el área de datos en la que se preparan los datos que
se registrarán. Esta área de datos debe estar dentro de un bloque de datos y
su longitud puede variar entre 1 y 12 palabras dobles de datos.
Consulte el contenido y los formatos en el apartado anterior "Función".
En caso de parametrización errónea (puntero cero, longitud > 12, área de datos
sin DB) se registra un mensaje de error en el búfer de diagnóstico (ID de evento
B114, [Info2/3] = 11). La CPU no pasa a STOP. Sin embargo, después de esto
el bloque no volverá a procesarse hasta que se haya solucionado el error.

Typical de datos Dat12D_R
Función
Recibir como máx. 12 palabras dobles con cualquier contenido de datos
El contenido por palabra doble puede ser un valor en formato de palabra doble (DWORD,
DINT, REAL), pero se admite también una combinación de otros tipos de datos cuyo resultado
sea una palabra doble, por ejemplo:
● 4 bytes
● 2 palabras
● 2 bytes + 1 palabra
Dat12D_R deposita los datos recibidos en el área de datos indicada en "DataOutput" sin
ninguna preparación adicional. Los datos recibidos deben evaluarse y procesarse desde el
programa de usuario.
Nota
DB con acceso estándar
El bloque tiene parámetros del tipo "ANY". Por este motivo, en las propiedades del DB debe
dejarse desactivado el atributo "Acceso optimizado al bloque".

2096

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Parámetros
Parámetro:

PartnerNo
PartnerObjectNo
Enabled
Consulte la descripción en el capítulo Parámetros repetitivos (Página 2046).

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

DataOutput
INPUT
ANY

Explicación:

Consulte el área de direcciones
P#P 0.0 VOID 0
(puntero cero)
P#DBxx.DBX yy.0 DWORD zz
● xx: número del bloque de datos 1...32767
● yy: número del byte
● zz: número de palabras dobles 1...12 a partir del número de byte yy
Ejemplo:
P#DB20.DBX 100.0 DWORD 4
A la hora de introducir el puntero vigile bien los puntos y espacios.
Tenga en cuenta que el valor predeterminado (puntero cero) no está permitido.
Debe indicarse un puntero con una dirección real.
Área de salida de datos
El puntero ANY direcciona el área de datos en la que se guardan los datos
recibidos. Esta área de datos debe estar dentro de un bloque de datos y su
longitud puede variar entre 1 y 12 palabras dobles.
Consulte el contenido y los formatos en el apartado anterior "Función".
Dat12D_R deposita los datos recibidos en el área de datos indicada en "Da‐
taOutput" sin ninguna preparación adicional. Los datos recibidos deben eva‐
luarse y procesarse desde el programa de usuario.
Si el objeto interlocutor Dat12D_S solo transmite datos modificados, es posible
que solo se escriba de nuevo una parte del área de salida de datos. Es el área
en la que se detectaron cambios por el lado del registro.
En caso de parametrización errónea (puntero cero, longitud > 12, área de datos
sin DB) se registra un mensaje de error en el búfer de diagnóstico (ID de evento
B114, [Info2/3] = 11). La CPU no pasa a STOP. Sin embargo, después de esto
el bloque no volverá a procesarse hasta que se haya solucionado el error.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2097

Configuración de dispositivos y redes
1.4 Crear configuraciones

Parámetro:
Explicación:

NewData
Recibir datos nuevos
Consulte la declaración, el tipo de datos, el rango de valores, la asignación
predeterminada y la función en el capítulo Parámetros repetitivos (Pági‐
na 2046).
Cada vez que el bloque ha recibido valores de datos nuevos del objeto inter‐
locutor y los ha emitido en el campo de salida "DataOutput", la salida "New‐
Data" se pone a TRUE durante un ciclo del OB1.

Typical de datos Dat12x1D_S
Validez
S7-1500

Función
Enviar por palabra doble como máx. 12 veces datos con cualquier contenido a través de 12
canales
El número de canales utilizados del objeto (1..12) se define mediante el parámetro "ChnCnt".
Se permite 1 tipo de datos por canal. El tipo de datos para el contenido de un canal se define
en el parámetro "DataInputXX" mediante el puntero ANY correspondiente.
El número de datos transferidos por canal no debe exceder la longitud de 1 palabra doble (32
bits). Si se establece el número de datos para un canal a 3 CHAR, por ejemplo, el cuarto byte
no se lee y tampoco se evalúa para el instante de la transferencia (SendOnChange).
Bloque de datos de instancia correspondiente
Nota
DB con acceso estándar
El typical utiliza punteros ANY en los parámetros "DataInputXX". En las propiedades del DB
debe desactivarse el atributo "Acceso optimizado al bloque".
Inicio de la transferencia y áreas de datos transferidas
Como máximo se envía el telegrama completo con todos los canales indicados en "ChnCnt".
En función de la parametrización no se transfieren los datos de todos los canales.

2098

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
El envío de los datos puede iniciarse de los modos siguientes:
● Controlado por tiempo
La transferencia puede iniciarse desde el programa de usuario.
Cuando se produce un cambio de flanco 0 → 1 en la entrada "TriggerInput", se transfieren
siempre todos los datos indicados en "DataInputXX".
Para una transmisión por tiempos es aconsejable utilizar la FC Trigger.
● En caso de cambios
La transferencia se inicia desde el control de cambios ("SendOnChange" = TRUE).
– En caso de cambios en solo 1 canal:
Solo se transfieren los datos del canal modificado.
– En caso de cambios en varios canales:
Los datos transferidos abarcan un área relacionada comprendida entre el primer y el
último canal modificado.
Los canales no modificados, que pueden estar delante o detrás del área transferida, no
se transfieren.
● Consultas
En caso de consulta individual de este objeto de datos o en el marco de una consulta
general se transmiten siempre todos los datos del typical.
Para iniciar la transmisión de datos también es posible seleccionar una combinación de
"SendOnChange" y "TriggerInput". En este caso, la transmisión se iniciará tanto cuando se
detecte un cambio como cuando haya un cambio de flanco 0 → 1 en la entrada "TriggerInput".
Si no se utiliza ni "SendOnChange" ni "TriggerInput" para iniciar la transmisión de datos, esta
solo se produce en caso de consulta individual de este objeto de datos o en el marco de una
consulta general.
2 juegos de parámetros para diferentes prioridades de los canales
El typical ofrece la posibilidad de tratar de forma distinta los canales en cuanto al
almacenamiento y al instante de la transferencia a través de dos juegos de parámetros. Cada
uno de los dos juegos de parámetros contiene los parámetros siguientes:
Juego de parámetros 1
● ImageMemory01
● Conditional01
● SendOnChange01

Juego de parámetros 2
● ImageMemory02
● Conditional02
● SendOnChange02

Función de los parámetros:
● ImageMemory
Determina si los datos se transmiten según el principio de la memoria imagen o según el
principio del búfer de transmisión.
● Conditional
Determina si los datos se transmiten de forma "espontánea con limitaciones" o "espontánea
incondicional".
● SendOnChange
Determina si los datos se transmiten en caso de cambios.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2099

Configuración de dispositivos y redes
1.4 Crear configuraciones
La distinta parametrización de los parámetros permite priorizar los canales del siguiente modo,
por ejemplo:
● Canales para el juego de parámetros 1
Eventos importantes que se guardan individualmente y deben transferirse de inmediato.
● Canales para el juego de parámetros 2
Datos operativos cuyos valores pueden sobrescribirse y no deben transferirse de
inmediato.
Cada canal se asigna a uno de los dos juegos de parámetros mediante el parámetro
"ChnSets". Más adelante encontrará un ejemplo de parametrización.

Parámetros
Parámetros
generales:

PartnerNo
PartnerObjectNo
Enabled
ImageMemory01..02 *
Conditional01..02 *
TimeStamp
Consulte la descripción en el capítulo AUTOHOTSPOT.
* Parámetros para el juego de parámetros 1 y 2, una vez para cada uno

Nombre:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Parametriza‐
ción:
Explicación:

SendOnChange01..02 *
INPUT
BOOL
TRUE / FALSE
FALSE
* Parámetros para el juego de parámetros 1 y 2, una vez
Enviar en caso de cambio
El parámetro está disponible dos veces, una por canal.
En el ajuste TRUE, el bloque ejecuta un control de cambios dentro del área de
datos registrada "DataInput". El bloque comprueba si ha cambiado por lo me‐
nos un bit. En caso de cambio se inicia automáticamente una transmisión del
área de datos. Más arriba encontrará información sobre el área transferida.
Con el ajuste FALSE hay que iniciar la transmisión mediante el parámetro de
entrada "TriggerInput".

Nombre:
TriggerInput
Declaración: INPUT

2100

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

Explicación:

Nombre:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Explicación:

BOOL
TRUE / FALSE
FALSE
Entrada
Marca

I 0.0 ... I n.7
M 0.0 ... M n.7
L 0.0 ... L n.7
DBm.DBX 0.0 ... n.7

Bit de datos
Entrada de disparo
Con el cambio de flanco 0 → 1 de esta entrada es posible iniciar la transferencia
disparada del telegrama de datos en un instante concreto.
Ejemplo: una transmisión de valores analógicos controlada por tiempo y con
sello de tiempo para proporcionar datos a un fichero del puesto de control.
Asegúrese de poner el parámetro "ImageMemory" a FALSE para que estos
datos con sello de tiempo no se sobrescriban cuando se guardan en el TIM de
estación.
Para iniciar una transferencia controlada por tiempo mediante "TriggerInput"
está disponible la aplicación del bloque FC Trigger.
En realidad, por medio de "TriggerInput" la transmisión solo se inicia de forma
indirecta. Con un cambio de flanco 0 → 1 en "TriggerInput" se elabora el tele‐
grama de datos con sus valores actuales y se transfiere al TIM local.
En líneas dedicadas o redes inalámbricas, el TIM transmite los datos de inme‐
diato.
En una conexión de marcación, la transferencia depende del ajuste del pará‐
metro "Conditional":
● "Conditional" = TRUE (espontáneo con limitaciones)
El telegrama de datos se guarda primeramente en el TIM y se transfiere la
próxima vez que se establece una conexión.
● "Conditional" = FALSE (espontáneo incondicional)
El telegrama de datos se transfiere de inmediato.
ChnCnt
INPUT
Int
1..12
Número de canales de transferencia
De los 12 canales como máximo del objeto pueden definirse entre 1 y 12 ca‐
nales.

Nombre:
ChnSets
Declaración: INPUT

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2101

Configuración de dispositivos y redes
1.4 Crear configuraciones
Tipo de da‐
tos:
Formato:
Ajuste prede‐
terminado:
Explicación:

WORD
Secuencia de 16 bits
0000000000000000
Asignación de los canales de transferencia al juego de parámetros 1 o 2
Asigne cada canal a uno de los dos juegos de parámetros utilizando su bit y
empezando por el bit 1 para el canal 1. El bit 0 debe estar siempre ocupado con
0 (cero) (reservado).
Codificación de los diferentes bits:
● 0 = Asignación de un canal al juego de parámetros 1
● 1 = Asignación de un canal al juego de parámetros 2
Con los dos juegos de parámetros es posible preparar los canales para una
transferencia distinta.
Ejemplo:
● Juego de parámetros 1
Eventos importantes, posible parametrización:
– ImageMemory01 = FALSE (Principio del búfer de transmisión)
– Conditional01 = FALSE (espontáneo incondicional)
– SendOnChange01 = TRUE (Transferencia a TIM en caso de cambios)
● Juego de parámetros 2
Datos operativos, posible parametrización:
– ImageMemory02 = TRUE (Principio de la memoria imagen)
– Conditional02 = TRUE (espontáneo con limitaciones)
– SendOnChange02 = TRUE (Transferencia a TIM en caso de cambios)
Nota:
"ImageMemory" y "Conditional" son válidos para todo el telegrama.
● Si el envío de un telegrama se inicia mediante "TriggerInput", todo el
telegrama se envía como telegrama del búfer de transmisión espontáneo
incondicional en cuanto en un canal "ImageMemory" y "Conditional" se han
puesto a FALSE.
● Si el envío de un telegrama se inicia mediante "SendOnChange" a varios
canales, todo el telegrama se envía como telegrama del búfer de
transmisión espontáneo incondicional en cuanto en un canal
"ImageMemory" y "Conditional" se han puesto a FALSE.
● Si solo se detecta un cambio en 1 canal ("SendOnChange" = TRUE), el
telegrama se envía en el modo que se especifica mediante los parámetros
"ImageMemory" y "Conditional" de este canal.

Tabla 1-158 Asignación de los bits del parámetro "ChnSets" a los canales
Bit
Canal

.15

.14

.13

.12

.11

.10

.9

.8

.7

.6

.5

.4

.3

.2

.1

.0

‑

‑

‑

12

11

10

9

8

7

6

5

4

3

2

1

‑*

* El bit 0 está reservado.

2102

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Tabla 1-159 Ejemplo de parametrización para "ChnSets": Asignación de 7 canales al juego de
parámetros 1 o 2
Bit

.15

.14

.13

.12

.11

.10

.9

.8

.7

.6

.5

.4

.3

.2

.1

.0

0

0

0

0

0

0

0

0

1

0

1

1

0

0

1

0*

Ocupación

* El bit 0 está reservado.
En el ejemplo hay 7 canales asignados. Los canales 8..12 no se utilizan.
Codificación de los diferentes bits:
● 0 = Asignación al juego de parámetros 1
En el ejemplo, los canales 2, 3 y 6 están asignados al juego de parámetros 1.
● 1 = Asignación al juego de parámetros 2
En el ejemplo, los canales 1, 4, 5 y 7 están asignados al juego de parámetros 2.

Nombre:

DataInput01..12
El parámetro está disponible 12 veces, una por canal.
Declaración: INPUT
Tipo de da‐ ANY
tos:
Rango de va‐ Consulte el área de direcciones
lores:
Ajuste prede‐ P#P 0.0 VOID 0
terminado:
(puntero cero)
Área de di‐
P#DBxx.DBXyy.0 TYPE zz
recciones:
● xx: número del bloque de datos
● yy: número del byte
● TYPE: tipo de datos
Se permiten los siguientes tipos de datos: Bool, Byte, Char, SInt, USInt, Int,
UInt, Word, DInt, DWord, Real, UDInt
● zz: Longitud como cantidad (tipo de datos indicado) a partir del byte n.º yy
Longitud máx.: 1 DWord
Ejemplo:
P#DB20.DBX100.0 BYTE 3
Área con 3 bytes en el DB20 a partir de DBB100

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2103

Configuración de dispositivos y redes
1.4 Crear configuraciones
Explicación:

Área de entrada de datos
El puntero ANY direcciona el área de datos en la que se preparan los datos que
se registrarán. El puntero cero preasignado no está permitido. Indique un pun‐
tero con una dirección real.
El área de datos debe estar dentro de un bloque de datos y puede tener como
máximo una longitud de 4 bytes (máx. 1 palabra doble).
Si en un canal no deben transferirse los 4 bytes o no deben evaluarse para
iniciar el telegrama (SendOnChange), asegúrese de realizar la parametriza‐
ción correcta.
Consulte el contenido y los formatos en el apartado anterior "Función".
En caso de parametrización errónea (puntero cero, longitud > 4, área de datos
sin DB) se registra un mensaje de error en el búfer de diagnóstico (ID de evento
B114, [Info2/3] = 11). La CPU no pasa a STOP. Sin embargo, después de esto
el bloque no volverá a procesarse hasta que se haya solucionado el error.

Typical de datos Dat12x1D_R
Validez
S7-1500

Función
Recibir por palabra doble como máx. 12 veces datos con cualquier contenido a través de 12
canales
El número de canales utilizados del objeto (1..12) se define mediante el parámetro "ChnCnt".
Se permite 1 tipo de datos por canal. El tipo de datos para el contenido de un canal se define
en el parámetro "DWxx_DataOut" mediante el puntero ANY correspondiente.
Dat12x1D_R deposita los datos recibidos, de forma específica por canal, en la
correspondiente área de datos indicada en "DWxx_DataOut" sin ninguna preparación
adicional. Los datos recibidos deben evaluarse y procesarse desde el programa de usuario.
Nota
DB con acceso estándar
El typical utiliza un puntero ANY en el parámetro "DWx_DataOut". Por este motivo, en las
propiedades del DB debe desactivarse el atributo "Acceso optimizado al bloque".

Parámetros
Parámetros
generales:

2104

PartnerNo
PartnerObjectNo
Enabled
Consulte la descripción en el capítulo AUTOHOTSPOT.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Nombre:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Explicación:

ChnCnt
INPUT
Int

Nombre:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

DW1_DataOut .. DW12_DataOut
INPUT
ANY

1..12
Número de canales de transferencia
De los 12 canales como máximo del objeto pueden definirse entre 1 y 12 ca‐
nales.

Consulte el área de direcciones
P#P 0.0 VOID 0
(puntero cero)
P#DBxx.DBXyy.0 TYPE zz
● xx: número del bloque de datos
● yy: número del byte
● TYPE: tipo de datos
Se permiten los siguientes tipos de datos: Bool, Byte, Char, SInt, USInt, Int,
UInt, Word, DInt, DWord, Real, UDInt
● zz: Longitud como cantidad (tipo de datos indicado) a partir del byte n.º yy
Longitud máx.: 1 DWord
Ejemplo:
P#DB20.DBX100.0 BYTE 3
Área con 3 bytes en el DB20 a partir de DBB100

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2105

Configuración de dispositivos y redes
1.4 Crear configuraciones

2106

Explicación:

Área de salida de datos
El parámetro está disponible una vez para cada canal (máx. 12).
El puntero ANY direcciona el área de datos en la que se guardan los datos
recibidos. El puntero cero preasignado no está permitido. Indique un puntero
con una dirección real.
El área de datos debe estar dentro de un bloque de datos y puede tener como
máximo una longitud de 4 bytes (máx. 1 palabra doble).
Si en un canal no deben emitirse los 4 bytes, asegúrese de realizar la para‐
metrización correcta.
Consulte el contenido y los formatos en el apartado anterior "Función".
Dat121xD_R deposita los datos recibidos en el área de datos indicada en "Da‐
taOutput" sin ninguna preparación adicional. Los datos recibidos deben eva‐
luarse y procesarse desde el programa de usuario.
Si el objeto interlocutor Dat121xD_S solo transmite datos modificados, es po‐
sible que solo se escriba de nuevo una parte del área de salida de datos. Es el
área en la que se detectaron cambios por el lado del registro. Las áreas mo‐
dificadas se identifican por "NewData".
En caso de parametrización errónea (puntero cero, longitud > 4, área de datos
sin DB) se registra un mensaje de error en el búfer de diagnóstico (ID de evento
B114, [Info2/3] = 11). La CPU no pasa a STOP. Sin embargo, después de esto
el bloque no volverá a procesarse hasta que se haya solucionado el error.

Nombre:
Declaración:
Tipo de da‐
tos:
Formato:
Rango de va‐
lores:
Ajuste prede‐
terminado:

NewData
OUTPUT
Array [0..11] of BOOL
Secuencia de 16 bits
Consulte el área de direcciones
0000000000000000

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Área de di‐
recciones:

Palabras de salida
Palabras de marcas

Explicación:

QW0 ... QWn
PQW0 ... PQWn
MW0 ... MWn
LW0 ... LWn
DBm.DBW0 ... n

Palabras de datos
Recibir datos nuevos
Siempre que el bloque recibe nuevos segmentos de datos, en "NewData" apa‐
rece la indicación de los bits de estado 1 a 12 de acuerdo con los segmentos
de datos recibidos 1 a 12.
Si al menos uno de los segmentos de datos recibidos contiene cambios, el bit
0 de "NewData" se pone a TRUE durante un ciclo del OB1.
Cuando se recibe una secuencia de varios segmentos de datos (telegramas de
datos), los bits de estado 1 a 12 del parámetro "NewData" se ponen sucesiva‐
mente a TRUE, estado que mantienen hasta que se ha recibido el último seg‐
mento.
La salida está prevista para procesamientos posteriores personalizados, p. ej.
para reaccionar de forma selectiva a la recepción de datos nuevos.
Si no necesita el parámetro déjelo abierto.

Typical de datos Dat256D_S
Función
Enviar un máximo de 256 palabras dobles con cualquier contenido de datos
El contenido de cada palabra doble puede ser un valor en formato de palabra doble (p. ej.
DINT, REAL, etc.). De todas formas, también se permiten combinaciones de otros formatos
que, juntos, resultan en una palabra doble, p. ej.
● 32 Bool
● 4 bytes
● 2 palabras
● Cualquier combinación, como 2 bytes más 1 palabra, etc.
Nota
Observar el límite de palabras dobles
Si se transmiten datos modificados y el área de datos contiene valores en formato de palabra
doble, asegúrese de que los valores de palabra doble estén realmente dentro de una de las
256 palabras dobles como máximo que tiene el área de datos que se registrará.
Si se reparten en dos palabras dobles de datos consecutivas, podría suceder que solo se
transmita una palabra del valor de palabra doble (palabra High o Low), porque solo ha
cambiado algo en ella. En este caso, la palabra que falta puede provocar un error de datos en
el interlocutor receptor (se aplica a ST7cc, no a una CPU S7).

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2107

Configuración de dispositivos y redes
1.4 Crear configuraciones
El envío del área de datos puede iniciarse de dos modos distintos:
● Mediante un control de cambios
Los datos se transmiten en cuanto cambia un bit ("SendOnChange" = TRUE).
● Mediante el programa de usuario
La transmisión puede iniciarse con un cambio de flanco 0 → 1 en la entrada "TriggerInput".
Para una transmisión por tiempos es aconsejable utilizar la FC Trigger.
Además, "SendAll" permite especificar si en una transmisión deben enviarse siempre todos los
datos o solo las palabras dobles de datos que han cambiado.
En CPU S7-300 con comunicación X, la longitud máxima de telegrama de datos es de 76 bytes.
1024 bytes de datos netos se transmiten mediante un proceso de transmisión serie que consta
de una secuencia de 22 telegramas de datos como mínimo (segmentos). Cada telegrama de
datos, excepto el último, contiene un segmento de 48 bytes de datos netos del área de datos
de entrada.
Para garantizar la coherencia de datos con el parámetro "SendAll" activado o durante una
consulta general o individual, los datos se transmiten en segmentos consecutivos. Durante el
proceso de transmisión, el estado se visualiza mediante "SendAllBusy". En el receptor, el
estado se muestra en la salida "DataStatus".
Nota
TriggerInput ‑ SendAllBusy
Cuando "TriggerInput" se dispara siendo "SendAllBusy" = TRUE, la próxima vez que se inicia
la transmisión se produce el mensaje de error "DataLoss" (estado en el encabezado del
telegrama).
El cambio de flanco 0 → 1 mediante "TriggerInput" solo se produce si "SendAllBusy" = FALSE.
Si se interrumpe la transmisión se muestra "SendAllError". Además, se registra una entrada en
el búfer de diagnóstico con la ID de evento B14DTD7_Diagnostics.
Si la transmisión es incompleta, el estado de los datos en el receptor también es "no válido".
En el receptor, esto se muestra en el parámetro DataStatus. Además, se escribirá una entrada
con la ID de evento B13BTD7_Diagnostics en el búfer de diagnóstico.
Nota
Disponibilidad del interlocutor
Si el estado del interlocutor cambia de "disponible" a "no disponible", se detiene de inmediato
la transmisión de todos los datos. Todos los datos de objetos se borran del búfer del TIM. Esto
podría provocar una pérdida de datos.
En cuanto el interlocutor vuelve a estar disponible, se realiza una consulta general automática
que garantiza que los datos del interlocutor volverán a actualizarse en la próxima transmisión.
Nota
Dat256D_S y Dat256D_R requieren el UDT "TransmitBlock".
En caso de utilizar el typical de la librería global, copie el UDT en el directorio "Tipos de datos
PLC" de la CPU. El typical referencia el UDT automáticamente desde el directorio de bloques
de la CPU, pero no desde la librería global.

2108

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Nota
DB con acceso estándar
El bloque tiene parámetros del tipo "ANY". Por este motivo, en las propiedades del DB debe
dejarse desactivado el atributo "Acceso optimizado al bloque".

Parámetros
Parámetro:

PartnerNo
PartnerObjectNo
Enabled
Unconditional
TimeStamp
Consulte la descripción en el capítulo Parámetros repetitivos (Página 2046).

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Explicación:

SendOnChange
INPUT
BOOL

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:

TriggerInput
INPUT
BOOL

TRUE / FALSE
FALSE
Enviar en caso de cambio
En el ajuste TRUE, el bloque ejecuta un control de cambios dentro del área de
datos registrada "DataInput". El bloque comprueba si ha cambiado por lo me‐
nos un bit. En caso de cambio se inicia automáticamente una transmisión del
área de datos. Con el parámetro "SendAll" se determina si debe transmitirse
toda el área o solo la parte modificada.
Con el ajuste FALSE hay que iniciar la transmisión mediante el parámetro de
entrada "TriggerInput".

TRUE / FALSE
FALSE

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2109

Configuración de dispositivos y redes
1.4 Crear configuraciones
Área de di‐
recciones:

Explicación:

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:

2110

Entrada
Marca

I 0.0 ... I n.7
M 0.0 ... M n.7
L 0.0 ... L n.7
DBm.DBX 0.0 ... n.7

Bit de datos
Entrada de disparo
Con el cambio de flanco 0 → 1 de la entrada "TriggerInput" es posible iniciar la
transferencia disparada del telegrama de datos en un instante concreto.
Ejemplo:
Una transmisión de valores analógicos controlada por tiempo y con sello de
tiempo para proporcionar datos a un fichero de valores analógicos del puesto
de control.
Para iniciar una transferencia controlada por tiempo mediante "TriggerInput"
está disponible la aplicación del bloque FC Trigger.
En realidad, por medio de "TriggerInput" la transmisión solo se inicia de forma
indirecta. Con un cambio de flanco 0 → 1 en "TriggerInput" se elabora el tele‐
grama de datos con sus valores actuales y se transfiere al TIM local. Segui‐
damente, este se encarga de transmitirlo al interlocutor. En líneas dedicadas o
redes inalámbricas la transmisión es inmediata. Con una conexión de marca‐
ción es posible que el telegrama de datos se guarde primero en el TIM y acceda
a la transmisión más adelante. El motivo puede ser, por ejemplo, que el tele‐
grama de datos esté marcado como "espontáneo con limitaciones"; consulte el
parámetro "Conditional".
Elija instantes de disparo adecuados para que los datos del TIM no se sobres‐
criban debido a un desbordamiento del búfer (distancias temporales excesi‐
vas).
Si no necesita el parámetro déjelo abierto. No obstante, en este caso debería
ponerse el parámetro "SendOnChange" a TRUE para que la transmisión de
datos se inicie automáticamente cada vez que haya un cambio.
Para iniciar la transmisión de datos también es posible seleccionar una com‐
binación de "SendOnChange" más "TriggerInput". En este caso, la transmisión
se iniciará tanto cuando se detecte un cambio como cuando haya un cambio de
flanco de 0 a 1 en la entrada "TriggerInput".
Si no se utiliza ni "SendOnChange" ni "TriggerInput" para iniciar la transmisión
de datos, esta solo se produce en caso de consulta individual de este objeto de
datos o en el marco de una consulta general.
No deben transmitirse valores analógicos que tengan el parámetro "SendOn‐
Change" = TRUE sin procesar previamente los datos de proceso. Encontrará
más información al respecto en el typical de valores analógicos Ana04W_S,
parámetro "ThresholdValue".
SendAll
INPUT
BOOL
TRUE / FALSE

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Ajuste prede‐ TRUE
terminado:
Explicación: Enviar todos los datos en cada transmisión
Con este parámetro se ajusta si el bloque debe transmitir siempre todos los
datos del área indicada con "DataInput" o bien solo los que han cambiado. La
transmisión puede haber sido activada porque el control de cambios está ac‐
tivado (SendOnChange = TRUE) o mediante "TriggerInput".
● SendAll = TRUE
Enviar siempre todos los datos
● SendAll = FALSE
Enviar solo los datos modificados
Excepción:
Si "SendAll" = FALSE, se inicia la transmisión mediante "TriggerInput" y
hasta este instante no han cambiado datos, se transmite toda el área. Para
este caso excepcional equivale a "SendAll" = TRUE.
En caso de consulta individual de este objeto de datos o en el marco de una
consulta general se transmiten siempre todas las palabras de datos del área
definida con "DataInput".
Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:

DataInput
INPUT
ANY
Consulte el área de direcciones
P#P 0.0 VOID 0
(puntero cero)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2111

Configuración de dispositivos y redes
1.4 Crear configuraciones
Área de di‐
recciones:

Explicación:

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Explicación:

P#DBxx.DBX yy.0 DWORD zz
● xx: número del bloque de datos 1...32767
● yy: número del byte
● zz: número de palabras dobles 1...256 a partir del número de byte yy
Ejemplo:
P#DB20.DBX 100.0 DWORD 200
A la hora de introducir el puntero vigile bien los puntos y espacios.
Tenga en cuenta que el valor predeterminado (puntero cero) no está permitido.
Debe indicarse un puntero con una dirección real.
Área de entrada de datos
El puntero ANY direcciona el área de datos en la que se preparan los datos que
se registrarán. Esta área de datos debe estar dentro de un bloque de datos y
su longitud puede variar entre 1 y 256 palabras dobles de datos. Consulte los
posibles formatos de palabras dobles en el apartado anterior "Función".
En caso de parametrización errónea (puntero cero, longitud > 256, área de
datos sin DB) se registra un mensaje de error en el búfer de diagnóstico (ID de
evento B114, [Info2/3] = 11). La CPU no pasa a STOP. Sin embargo, después
de esto el bloque no volverá a procesarse hasta que se haya solucionado el
error.
Coherencia de datos:
Si un segmento de datos que debe transmitirse consta como máximo de 48
bytes, la coherencia de datos durante la transmisión está garantizada.
SendAllBusy
INPUT
BOOL
TRUE / FALSE
FALSE
Bloque en procesamiento con "SendAll" = TRUE
Esta salida indica que el bloque trasmite actualmente los datos definidos en
"DataInput". El proceso se activa mediante una consulta individual o general
remota o bien mediante un disparo local interno o externo.
Si "SendAll" está puesto a TRUE, la transmisión de todos los datos se dispara
mediante un control de cambios interno (SendOnChange = TRUE) o mediante
la "TriggerInput" externa (cambio de flanco 0 → 1).
El cambio de flanco 0 → 1 no repercute en la "TriggerInput" externa siempre que
"SendAllBusy" indique TRUE. El cambio de flanco 0 → 1 de "TriggerInput" es
efectiva cuando "SendAllBusy" = FALSE.

Parámetro: SendAllError
Declaración: INPUT

2112

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Explicación:

BOOL
TRUE / FALSE
FALSE
Error en el procesamiento de "SendAll"
"SendAllError" se pone a TRUE cuando se interrumpe la conexión durante el
procesamiento de "SendAll". Además, se escribirá una entrada en el búfer de
diagnóstico.
"SendAllError" se mantiene en TRUE hasta que el programa de usuario lo
desactiva o hasta el próximo rearranque normal de la CPU.

Typical de datos Dat256D_R
Función
Recibir como máx. 256 palabras dobles con cualquier contenido de datos
El contenido por palabra doble puede ser un valor en formato de palabra doble (p. ej., DINT,
REAL, etc.), pero se admite también una combinación de otros formatos cuyo resultado sea
una palabra doble, p. ej.:
● 32 Bool
● 4 bytes
● 2 palabras
● Cualquier combinación, como 2 bytes más 1 palabra, etc.
Nota
Observar el límite de palabras dobles
Si se transmiten datos modificados y el área de datos contiene valores en formato de palabra
doble, asegúrese de que los valores de palabra doble estén realmente dentro de una de las
256 palabras dobles como máximo que tiene el área de datos que se registrará.
Si se reparten en dos palabras dobles de datos consecutivas, podría suceder que solo se
transmita una palabra del valor de palabra doble (palabra High o Low), porque solo ha
cambiado algo en ella. En este caso, la palabra que falta puede provocar un error de datos en
el interlocutor receptor (se aplica a ST7cc, no a una CPU S7).
Dat256D_R deposita los datos recibidos en el área de datos indicada con "DataOutput" sin
ninguna preparación adicional. Evalúe los datos recibidos desde el programa de usuario.
En CPU S7-300 con comunicación X, la longitud máxima de telegrama de datos es de 76 bytes
(48 bytes netos). 1024 bytes de datos netos se transmiten mediante un proceso de transmisión
serie que consta de una secuencia de 22 telegramas de datos como mínimo (segmentos).
Cada telegrama de datos, excepto el último, contiene un segmento de 48 bytes de datos netos
del área de datos de salida.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2113

Configuración de dispositivos y redes
1.4 Crear configuraciones
Cada vez que se recibe un segmento de datos detectado se señaliza mediante un estado
correspondiente (bits 1 a 22) del parámetro de salida "NewData".
Asimismo, cuando se ha detectado un cambio en el segmento de datos, el bit de estado 0 de
"NewData" se pone a TRUE durante un ciclo de la CPU. Esto permite determinar qué
segmento del área de datos de salida ha cambiado.
Nota
Cuando se recibe una secuencia de varios segmentos de datos (telegramas de datos), los bits
de estado 1 a 22 del parámetro "NewData" se ponen sucesivamente a TRUE, estado que
mantienen hasta que se ha recibido el último segmento.
Si un segmento de datos (telegrama de datos) no forma parte de una secuencia recibida
(SendAll = FALSE), el estado permanece en TRUE durante un solo ciclo de la CPU.
Para garantizar la coherencia de datos siendo "SendAll" = TRUE o durante una consulta
general o individual, el área de datos se actualiza en segmentos individuales consecutivos.
Durante el proceso de recepción, el estado se muestra por medio del byte de salida
"DataStatus" (estado "SequenceState"). Una vez ha finalizado correctamente la secuencia de
recepción, el área de salida de datos se encuentra en el estado actual y los datos de salida son
coherentes. Esto se muestra con "DataStatus" (estado "DataValid" = TRUE).
Nota
Si el parámetro "SendAll" está puesto a FALSE en el emisor no es posible garantizar la
coherencia de los segmentos de datos o de los segmentos límite.
La recepción de una secuencia puede fallar por los motivos siguientes:
● La secuencia de recepción se interrumpe cuando falla la comunicación con el interlocutor
mientras hay una secuencia en curso (ID de evento B13BTD7_Diagnostics).
● El tiempo de vigilancia se ha rebasado por exceso. No ha sido posible recibir todos los
segmentos en el tiempo ajustado en el parámetro "MonitoringTime" (ID de evento
B13CTD7_Diagnostics).
● Se producen otros errores de recepción (ID de evento B13DTD7_Diagnostics), p. ej.:
– Se registra una secuencia de recepción nueva mientras hay en curso una secuencia
correcta.
– Se recibe un segmento espontáneo (telegrama de datos) mientras hay una secuencia
en curso.
Nota
Dat256D_S y Dat256D_R requieren el UDT "TransmitBlock".
En caso de utilizar el typical de la librería global, copie el UDT en el directorio "Tipos de datos
PLC" de la CPU. El typical referencia el UDT automáticamente desde el directorio de bloques
de la CPU, pero no desde la librería global.

2114

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Nota
DB con acceso estándar
El bloque tiene parámetros del tipo "ANY". Por este motivo, en las propiedades del DB debe
dejarse desactivado el atributo "Acceso optimizado al bloque".

Parámetros
Parámetro:

PartnerNo
PartnerObjectNo
Enabled
Consulte la descripción en el capítulo Parámetros repetitivos (Página 2046).

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:

SingleRequest
INPUT
BOOL
TRUE / FALSE
TRUE

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2115

Configuración de dispositivos y redes
1.4 Crear configuraciones
Área de di‐
recciones:

Explicación:

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:

2116

Entrada
Marca

I 0.0 … I n.7
M 0.0 ... M n.7
L 0.0 ... L n.7
Bit de datos
DBm.DBX 0.0 ... n.7
Se envía una consulta individual al objeto interlocutor.
Si el interlocutor está disponible es posible enviar una consulta individual al
objeto interlocutor. En caso de que se devuelva una respuesta, la información
se reenvía al área de datos indicada en "DataOutput".
Hay prioridades en cuanto a las secuencias de transmisión:
● Prioridad mínima: TriggerInput
Una transmisión en curso, lanzada por ejemplo mediante "TriggerInput" en
el emisor, puede interrumpirse mediante una consulta individual o general.
● Prioridad media: consulta individual
Una transmisión en curso, lanzada por ejemplo mediante "TriggerInput" en
el emisor, puede interrumpirse mediante una consulta individual o general.
La consulta interrumpida o reiniciada provoca un reinicio de las secuencias
en curso sin mensaje de error.
● Prioridad máxima: consulta general
Una consulta general puede interrumpirse a sí misma o a una consulta
individual.
La consulta interrumpida o reiniciada provoca un reinicio de las secuencias
en curso sin mensaje de error.
La consulta interrumpida o reiniciada a causa de una consulta individual o
general provoca un reinicio de las secuencias en curso sin mensaje de error.
Cuando una secuencia ha finalizado correctamente, el estado "DataValid" del
byte de salida "DataStatus" permanece en TRUE.
La duración de la respuesta a la consulta individual es evaluada por el pará‐
metro "MonitoringTime".
Nota:
La coherencia del área de salida de datos más allá de los límites del segmento
solo está garantizada cuando la secuencia de recepción ha finalizado correc‐
tamente.
MonitoringTime
INPUT
INT
0 (sin límites) / 1 … 32000 (segundos)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Ajuste prede‐ 0
terminado:
Explicación: Duración máxima de una respuesta completa a una consulta individual
Cada vez que se inicia una consulta individual (consulte el parámetro Single‐
Request) se activa el período indicado aquí para "SingleRequest".
Si se ha introducido un valor superior a 0 y se ha rebasado por exceso el tiempo
de la secuencia de respuesta, se muestra un error mediante el byte de salida
"DataStatus" (bits de estado "SequenceState"). Además, se escribirá una en‐
trada en el búfer de diagnóstico (ID de evento B13CTD7_Diagnostics).
Cada vez que se inicia una consulta individual se reinicia "MonitoringTime".
Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

Explicación:

DataOutput
INTPUT
ANY
Consulte el área de direcciones
P#P 0.0 VOID 0
(puntero cero)
P#DBxx.DBX yy.0 DWORD zz
● xx: número del bloque de datos 1...32767
● yy: número del byte
● zz: número de palabras dobles 1...256 a partir del número de byte yy
Ejemplo:
P#DB20.DBX 100.0 DWORD 200
A la hora de introducir el puntero vigile bien los puntos y espacios.
Tenga en cuenta que el valor predeterminado (puntero cero) no está permitido.
Debe indicarse un puntero con una dirección real.
Área de salida de datos
El puntero ANY direcciona el área de datos en la que se guardan los datos
recibidos. Esta área de datos debe estar dentro de un bloque de datos y su
longitud puede variar entre 1 y 256 palabras dobles de datos. Consulte los
posibles formatos de palabras dobles en el apartado anterior "Función".
Dat256D_R deposita los datos recibidos en el área de datos indicada en "Da‐
taOutput" sin ninguna preparación adicional. Los datos recibidos deben eva‐
luarse y procesarse desde el programa de usuario.
Si el objeto interlocutor Dat256D_S solo transmite datos modificados, es posi‐
ble que solo se escriba de nuevo una parte del área de salida de datos. Es el
área en la que se detectaron cambios por el lado del registro.
En caso de parametrización errónea (puntero cero, longitud > 12, área de datos
sin DB) se registra un mensaje de error en el búfer de diagnóstico (ID de evento
B114, [Info2/3] = 11). La CPU no pasa a STOP. Sin embargo, después de esto
el bloque no volverá a procesarse hasta que se haya solucionado el error.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2117

Configuración de dispositivos y redes
1.4 Crear configuraciones

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

NewData
OUTPUT
DWORD
Consulte el área de direcciones
0 (DW#16#0)
Salida (DWORD)
Marca (DWORD)

Explicación:

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:

2118

QD0 … QDn
PQD0 … PQDn
MD0 … MDn
LD0 … LDn
DBm.DBB0 … n

Datos (DWORD)
Recibir datos nuevos
Siempre que el bloque recibe nuevos segmentos de datos, en "NewData" apa‐
rece la indicación de los bits de estado 1 a 22 de acuerdo con los segmentos
de datos recibidos 1 a 22.
Si al menos uno de los segmentos de datos recibidos contiene cambios, el bit
0 de "NewData" se pone a TRUE durante un ciclo del OB1.
Cuando se recibe una secuencia de varios segmentos de datos (telegramas de
datos), los bits de estado 1 a 22 del parámetro "NewData" se ponen sucesiva‐
mente a TRUE, estado que mantienen hasta que se ha recibido el último seg‐
mento.
Si un segmento de datos (telegrama de datos) no forma parte de una secuencia
recibida ("SendAll" = FALSE), el estado permanece en TRUE durante un solo
ciclo de la CPU.
La salida está prevista para procesamientos posteriores personalizados, p. ej.
para reaccionar de forma selectiva a la recepción de datos nuevos.
Si no necesita el parámetro déjelo abierto.
DataStatus
OUTPUT
BYTE
Consulte el área de direcciones
0 (B#16#0)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Área de di‐
recciones:

Explicación:

Salida

QB0 … QBn
PQB0 … PQBn
Marca
MB0 … MBn
LB0 … LBn
Datos
DBm.DBB0 … n
Estado de actualidad de un segmento de datos recibido
Cada vez que hay en curso una recepción de una secuencia, el byte de salida
"DataStatus" muestra el estado momentáneo:
● Cuando la recepción de la secuencia ha finalizado correctamente, el área
de salida de datos "DataOutput" se encuentra en el estado actual. El bit de
estado "DataValid" se pone a TRUE.
Si en el emisor "SendAll" está puesto a TRUE, los datos son coherentes.
● Si falla la recepción en curso de una secuencia, el área de salida de datos
"DataOutput" no es actual y "DataStatus" muestra un error.
– El bit de estado "DataValid" se pone a FALSE y se escribe una entrada
en el búfer de diagnóstico.
– El estado "SequenceState" indica el error (consulte la tabla).

Tabla 1-160 Asignación de bits de "DataStatus"
Bit

Nombre

Valor

Significado

0

DataValid

FALSE

Datos no válidos

TRUE

Datos válidos

1 ... 5

reservado

‑ (FALSE)

Libre

7, 6

SequenceState

0

No hay recepción en curso o ha finalizado sin errores.

1

Primer segmento de una secuencia recibido

2

Segundo segmento de una secuencia recibido o uno
superior

3

Error:
● Secuencia de transmisión cancelada
● Tiempo de vigilancia rebasado por exceso
● Otro error de recepción

Typical de parámetros Par12D_S
Función
Enviar entre 1 y 12 valores de parámetros (de 1 palabra doble cada uno) y recibir del
interlocutor los valores de parámetros actuales válidos localmente

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2119

Configuración de dispositivos y redes
1.4 Crear configuraciones
La comprobación 1 de n es realizada por la FC Safe.
Nota
Se requiere la FC Safe
Con Par12D_S solo es posible transmitir datos cuando al final del programa cíclico está
integrada la FC "Safe"; consulte el capítulo FC Safe (Página 2136).
El contenido por palabra doble puede ser un valor en formato de palabra doble (DWORD,
DINT, REAL), pero se admite también una combinación de otros tipos de datos cuyo resultado
sea una palabra doble, por ejemplo:
● 4 bytes
● 2 palabras
● 2 bytes + 1 palabra
Tenga en cuenta al respecto la indicación "Observar límites de palabra" más abajo.
El área de datos que debe transmitirse se indica en forma de un puntero Any en el parámetro
"ParameterInput". Esta área de datos debe estar dentro de un bloque de datos y su longitud
puede variar entre 1 y 12 palabras dobles. El área de datos transmitida al interlocutor o los
valores de parámetros introducidos localmente en el interlocutor se devuelven desde allí y se
emiten aquí en el parámetro "ReturnedParameter". También esta área de salida (puntero Any)
debe estar dentro de un bloque de datos y su longitud debe ser la misma que la indicada en
"ParameterInput".
Para "ParameterInput" y "ReturnedParameter" suelen indicarse áreas de datos separadas.
Con ello, en todo momento se ve lo último que se ha introducido y lo que es válido localmente
ahora. De todas formas, también es posible indicar la misma área de datos para ambos
parámetros. De este modo, ambas áreas se solapan al 100% y están siempre sincronizadas.
Ahora bien, en este caso no se ven las diferencias entre lo último que se ha introducido y lo que
es válido localmente. Si no se necesitan valores retroalimentados, también existe la posibilidad
de renunciar a la parametrización de "ReturnedParameter".
Aunque se parametricen áreas separadas para "ParameterInput" y "ReturnedParameter", es
posible hacer que el área de entrada "ParameterInput" se sincronice siempre con los valores
retroalimentados de "ReturnedParameter". Dependiendo del caso, esto puede realizarse
manualmente mediante la entrada "ApplyRemoteParamMan" o bien automáticamente
poniendo el parámetro "ApplyRemoteParamAuto" a TRUE.
En el objeto interlocutor que recibe los parámetros también es posible realizar una entrada de
parámetros local. En este caso, el objeto interlocutor debe estar ajustado a "local" en el
parámetro de entrada "Local" (consulte el bloque Par12D_R). El objeto interlocutor señaliza el
estado actual del parámetro de entrada "Local", que se muestra aquí en la salida
"LocalOperation". Mientras el objeto interlocutor esté en "local", allí no se aceptarán
parámetros de otros dispositivos.

2120

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
El envío del área de datos definida en "ParameterInput" puede iniciarse mediante los
parámetros siguientes:
● EnterInput
Este parámetro de entrada debe utilizarse cuando el área de datos definida en
"ParameterInput" se suministra por hardware (módulos de entradas digitales y analógicas).
En este caso, "EnterInput" debe conectarse a una tecla de un pupitre o tablero mediante
una entrada digital. Pulsando esta tecla se inicia la transmisión de los valores introducidos.
Se transmite el área de datos completa que se ha definido en "ParameterInput".
● ContinuousEnterFunct
Ponga el parámetro a TRUE cuando introduzca los parámetros por software, p. ej. desde
un panel de operador (OP). Los cambios se controlan de forma permanente. En cuando se
detecta un cambio en el área de datos definida en "ParameterInput" se inicia la transmisión
de las palabras dobles de datos que han cambiado en relación a la última transmisión.
Solo se transmiten los datos modificados (consulte la nota "Áreas de datos modificadas"
más abajo).
● Release
Utilice este parámetro de entrada cuando introduzca los parámetros por software, p. ej.
desde un OP. En este caso, la entrada "Release" debería operarse mediante una tecla de
función del OP. Cuando en la entrada "Release" se detecta una señal 1 se controlan los
cambios. Se transmiten las palabras dobles de datos del área de datos indicada en
"ParameterInput" que han cambiado en relación a la última transmisión.
Solo se transmiten los datos modificados (consulte la nota "Áreas de datos modificadas"
más abajo).
● RetransmitAll
Utilice este parámetro de entrada cuando introduzca los parámetros por software, p. ej.
desde un OP. En este caso, la entrada "RetransmitAll" debería operarse mediante una tecla
de función del OP. Cuando en la entrada "RetransmitAll" se detecta una señal 1 se
transmite el área de datos parametrizada en "ParameterInput" sin controlar los cambios.
Se transmite el área de datos completa que se ha definido en "ParameterInput".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2121

Configuración de dispositivos y redes
1.4 Crear configuraciones

Nota
Áreas de datos modificadas
Si solo se transmite el área de datos modificada, dicha área consta de la primera y última
palabra doble en las que se ha detectado un cambio, así como de todas las palabras que están
entre ellas, incluso si no han cambiado.
Ejemplo:
El área que debe leerse tiene una longitud de 10 palabras dobles. En el caso de transmisión
actual se han detectado cambios en la segunda, quinta y octava palabra doble. Se transmite
el área de la 2.ª a la 8.ª palabra doble.
Observar límites de palabra
Si solo se transmiten datos modificados y el área de datos contiene valores en formato de
palabra doble, asegúrese de que los valores de palabra doble estén realmente dentro de una
de las 12 palabras dobles como máximo que tiene el área de datos que se registrará.
Si se reparten en dos palabras dobles de datos consecutivas, podría suceder que solo se
transmita una palabra del valor de palabra doble (palabra High o Low), porque solo ha
cambiado algo en ella. En este caso, la palabra que falta puede provocar un error de datos en
el interlocutor receptor (se aplica a ST7cc, no a una CPU S7).
Nota
DB con acceso estándar
El bloque tiene parámetros del tipo "ANY". Por este motivo, en las propiedades del DB debe
dejarse desactivado el atributo "Acceso optimizado al bloque".

Parámetros
Parámetro:

PartnerNo
PartnerObjectNo
Enabled
Consulte la descripción en el capítulo Parámetros repetitivos (Página 2046).

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

EnterInput
INPUT
BOOL
TRUE / FALSE
FALSE
Entrada
Marca
Bit de datos

2122

I 0.0 ... I n.7
M 0.0 ... M n.7
L 0.0 ... L n.7
DBm.DBX 0.0 ... n.7

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Explicación:

Entrada de aplicación
Esta entrada permite lanzar la transmisión controlada por flancos de los valo‐
res de parámetros pendientes en la entrada "ParameterInput".
Solo se tendrá en cuenta un cambio en la entrada "EnterInput" cuando "Con‐
tinuousEnterFunct" = FALSE. Si se cumple esta condición, en caso de cambio
de flanco 0 → 1 se aplican los valores de parámetros introducidos en "Para‐
meterInput" y se preparan para la transmisión. No se comprueban los cambios.
Siempre se transmite el área de datos completa que se ha indicado en "Para‐
meterInput".
Este tipo de lanzamiento de la transmisión es adecuado para la entrada a
través de un hardware, p. ej. un tablero o pupitre. Encontrará más información
sobre este parámetro y otros parecidos en el apartado anterior "Función".
Si no necesita el parámetro déjelo abierto.
Comprobaciones de seguridad:
● Los parámetros leídos solo se preparan para la transmisión si en la
comprobación 1 de n no se ha detectado ningún error y la marca de
habilitación central está activada. La FC Safe activa automáticamente dicha
marca una vez transcurrido un retardo de tiempo parametrizado en ella
(consulte FC Safe, parámetro "InputDelayTime"). El FB no volverá a leer el
área de entrada hasta que en EnterInput se detecte la señal 0 como mínimo
durante un ciclo del OB1.
● Si en la entrada de hardware se detecta un error 1 de n, los parámetros
introducidos no se seguirán procesando. No se leerán parámetros nuevos
hasta que se registre un ciclo del OB1 sin entradas de hardware en la CPU,
ya sea mediante bloques de comandos, consignas o parámetros.
El FB registra el error detectado 1 de n en el búfer de diagnóstico (ID de
evento B172). Mientras el error está pendiente, el estado de error se
visualiza por medio de la salida "InputError" de la FC Safe (consulte FC
Safe, parámetro "InputError").

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:

ContinuousEnterFunct
INPUT
BOOL
TRUE / FALSE
FALSE

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2123

Configuración de dispositivos y redes
1.4 Crear configuraciones

2124

Explicación:

Comprobación continua de cambios
Este parámetro permite especificar si los valores de parámetros pendientes en
la entrada "ParameterInput" deben leerse continuamente y si deben compro‐
barse los posibles cambios. Los cambios se comprueban por medio de una
comparación con los últimos valores transmitidos. Solo se transmiten los va‐
lores modificados. Cuando se detectan más cambios, el bloque envía el área
de datos en la que se encuentran todos los valores de parámetros modificados.
El área de datos modificada que se transmite consta de la primera y última
palabra doble en las que se ha detectado un cambio, así como de todas las
palabras que están entre ellas, incluso si no han cambiado.
Por medio de la entrada "RetransmitAll" existe la posibilidad de volver a trans‐
mitir los valores de parámetros (véase más abajo) sin que cambie la entrada de
parámetros.
Este tipo de lanzamiento de la transmisión es adecuado para cuando los va‐
lores de parámetros se introducen por software en el área de entrada Para‐
meterInput, aunque también puede utilizarse para la entrada de parámetros
mediante un panel de operador (OP).
Encontrará más información en el apartado anterior "Función".
Si no necesita el parámetro déjelo abierto.
Comprobaciones de seguridad:
Los parámetros leídos solo se preparan para la transmisión si en la compro‐
bación 1 de n no se ha detectado ningún error.
● En la entrada de hardware (véase EnterInput) debe detectarse un ciclo
vacío antes de que el bloque pueda transmitir valores de parámetros
nuevos.
● En la entrada de software es posible transmitir valores de parámetros
nuevos en cada ciclo del OB1. Para ello, es imprescindible que en este ciclo
no haya otras entradas de software pendientes en un bloque distinto. En
caso contrario, en la comprobación 1 de n se detectaría un error.
Si en la entrada de software se detecta un error 1 de n, los parámetros
introducidos no se seguirán procesando. El FB registra el error detectado 1
de n en el búfer de diagnóstico (ID de evento B172).
No se leerán parámetros nuevos hasta que se registre un ciclo del OB1 sin
entradas de software en la CPU, ya sea mediante bloques de comandos,
consignas o parámetros.

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:

ApplyRemoteParamAuto
INPUT
BOOL
TRUE / FALSE

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Ajuste prede‐ FALSE
terminado:
Explicación: Sincronización automática del área de entrada con el área de retroalimentación
Con este parámetro, todos los valores de parámetros del área de retroalimen‐
tación "ReturnedParameter" se copian automáticamente en el área de entrada
"ParameterInput".
Además, los valores de parámetros retroalimentados se escriben en el buzón
de envío del DB de comunicación.
La sincronización automática se produce siempre que se reciben datos nuevos
del objeto interlocutor (Par12D_R).
Si no necesita el parámetro déjelo abierto.
Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

Explicación:

ParameterInput
INPUT
ANY
Consulte el área de direcciones
P#P 0.0 VOID 0
(puntero cero)
P#DBxx.DBX yy.0 DWORD zz
● xx: número del bloque de datos 1...32767
● yy: número del byte
● zz: número de palabras dobles 1...12 a partir del número de byte yy
Ejemplo:
P#DB20.DBX 100.0 DWORD 4
A la hora de introducir el puntero vigile bien los puntos y espacios.
Tenga en cuenta que el valor predeterminado (puntero cero) no está permitido.
Debe indicarse un puntero con una dirección real.
Área de entrada de parámetros
El puntero ANY direcciona el área de datos en la que se preparan los valores
de parámetros que se registrarán. Esta área de datos debe estar dentro de un
bloque de datos y su longitud puede variar entre 1 y 12 palabras dobles de
datos.
Consulte el contenido y los formatos en el apartado anterior "Función".
En caso de parametrización errónea (puntero cero, longitud > 12, área de datos
sin DB) se registra un mensaje de error en el búfer de diagnóstico (ID de evento
B114, [Info2/3] = 11). La CPU no pasa a STOP. Sin embargo, después de esto
el bloque no volverá a procesarse hasta que se haya solucionado el error.
La forma en que deben procesarse los parámetros pendientes en "Paramete‐
rInput" depende de si se trata de una entrada de hardware o software y de
cómo se inicia la transmisión del área de datos. Encontrará más información al
respecto en el apartado anterior "Función".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2125

Configuración de dispositivos y redes
1.4 Crear configuraciones

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

Explicación:

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:

2126

ReturnedParameter
OUTPUT
ANY
Consulte el área de direcciones
P#P 0.0 VOID 0
(puntero cero)
P#DBxx.DBX yy.0 DWORD zz
● xx: número del bloque de datos 1...32767
● yy: número del byte
● zz: número de palabras dobles 1...12 a partir del número de byte yy
Ejemplo:
P#DB20.DBX 100.0 DWORD 4
A la hora de introducir el puntero vigile bien los puntos y espacios.
Tenga en cuenta que el valor predeterminado (puntero cero) no está permitido.
Debe indicarse un puntero con una dirección real.
Área de salida de parámetros
El objeto interlocutor que recibe los valores de parámetros devuelve los valores
de parámetros válidos allí. Estos valores se visualizan aquí en la salida "Re‐
turnedParameter". Cuando el objeto interlocutor está puesto a "local" y se rea‐
liza allí una nueva entrada, los parámetros que se han modificado localmente
se muestran aquí en "ReturnedParameter".
El puntero ANY define el área de datos en la que se emiten los valores de
parámetros recibidos. Esta área de datos debe estar dentro de un bloque de
datos y su longitud puede variar entre 1 y 12 palabras dobles de datos. Su
longitud debe ser la misma que la definida en ParameterInput.
Tras arrancar la CPU propia o del interlocutor, o bien tras recuperar la cone‐
xión, se realiza automáticamente una consulta general que garantiza que en
"ReturnedParameter" se muestren los parámetros válidos actualmente de for‐
ma local.
Si no necesita el parámetro déjelo abierto.
En caso de parametrización errónea (área de datos sin bloque de datos, lon‐
gitud superior a 12 o longitud deferente de la parametrizada en ParameterIn‐
put) se registra un mensaje de error al respecto en el búfer de diagnóstico (ID
de evento B114, [Info2/3] = 11). La CPU no pasa a STOP. Sin embargo, pos‐
teriormente el FB no volverá a procesarse hasta que se haya solucionado el
error.
LocalOperation
OUTPUT
BOOL
TRUE / FALSE

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Ajuste prede‐ FALSE
terminado:
Área de di‐
Salida
recciones:
Marca

Explicación:

Parámetro:
Explicación:

Q 0.0 ... Q n.7
M 0.0 ... M n.7
L 0.0 ... L n.7
Bit de datos
DBm.DBX 0.0 ... n.7
Retroalimentación del objeto interlocutor: El objeto está en operación local.
En el objeto interlocutor que recibe los parámetros también es posible realizar
una entrada de consigna local. En este caso, el objeto interlocutor Par12D_R
debe estar ajustado a "local" en el parámetro de entrada "Local". El objeto
interlocutor señaliza el estado actual del parámetro de entrada "Local", que se
muestra aquí en la salida "LocalOperation".
Después del arranque de la CPU propia o del interlocutor o de restablecerse la
conexión, se emite automáticamente una consulta general para asegurar que
se muestre el estado válido actual en "LocalOperation".

NewData
Consulte la declaración, el tipo de datos, el rango de valores, la asignación
predeterminada y la función en el capítulo Parámetros repetitivos (Pági‐
na 2046).
Cada vez que el bloque ha recibido datos nuevos y los ha emitido en las salidas
"ReturnedSetpoint" o "LocalOperation", la salida "NewData" se pone a TRUE
durante un ciclo del OB1.

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:

Release
IN_OUT
BOOL
TRUE / FALSE
FALSE

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2127

Configuración de dispositivos y redes
1.4 Crear configuraciones
Área de di‐
recciones:

Explicación:

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:

2128

Marca
M 0.0 ... M n.7
Bit de datos
DBm.DBX 0.0 ... n.7
El parámetro es de entrada/salida (declaración IN_OUT). Para este tipo de
parámetro es un problema indicar marcas locales, por lo que no debería utili‐
zarse.
Entrada de disparo para enviar los valores de parámetros pendientes actual‐
mente
Este parámetro de entrada puede utilizarse cuando el parámetro se introduce
por software, p. ej. mediante un panel de operador (OP). En este caso, "Re‐
lease" debería operarse mediante una tecla de función del OP. En principio, es
posible introducir varios parámetros en el OP. Los parámetros no se transmiten
hasta que se activa la tecla de función Release.
Solo se efectúan un control de cambios cuando hay una señal 1 en la entrada
Release. Se transmiten las palabras dobles de datos del área de datos para‐
metrizada en ParameterInput que han cambiado en relación a la última trans‐
misión.
Si se desea transmitir siempre toda el área de datos indicada en "Paramete‐
rInput" y no solo los valores de parámetros modificados, debería utilizarse el
parámetro de entrada "RetransmitAll" en lugar de "Release".
La entrada "Release" se desactiva automáticamente. Por este motivo solo
deberían indicarse como entrada marcas o bits de datos. Con una entrada
digital, la desactivación automática no funcionaría.
Comprobaciones de seguridad: Se llevan a cabo las mismas comprobaciones
de seguridad que con ContinuousEnterFunct; véase arriba.
Si no necesita el parámetro déjelo abierto.
RetransmitAll
IN_OUT
BOOL
TRUE / FALSE
TRUE

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Área de di‐
recciones:

Explicación:

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:

Marca
M 0.0 ... M n.7
Bit de datos
DBm.DBX 0.0 ... n.7
El parámetro es de entrada/salida (declaración IN_OUT). Para este tipo de
parámetro es un problema indicar marcas locales, por lo que no debería utili‐
zarse.
Entrada de disparo para volver a enviar toda el área de datos indicada en
"ParameterInput".
Este parámetro de entrada puede utilizarse cuando el parámetro se introduce
por software, p. ej. mediante un panel de operador (OP). En este caso, "Re‐
transmitAll" debería operarse mediante una tecla de función del OP. Cuando
en la entrada "RetransmitAll" se detecta una señal 1 se transmite toda el área
de datos indicada en "ParameterInput". No se ejecuta un control de cambios.
La entrada "RetransmitAll" se desactiva automáticamente. Por este motivo
solo deberían indicarse como entrada marcas o bits de datos. Con una entrada
digital, la desactivación automática no funcionaría. Puesto que no se controlan
los cambios, la consecuencia sería una transmisión continua de todos los va‐
lores de parámetros mientras la entrada tenga una señal 1.
"RetransmitAll" puede utilizarse como opción adicional a "Release" o "Conti‐
nuousEnterFunct" cuando se han introducido valores de parámetros nuevos
que no han podido transmitirse al interlocutor (fallo de conexión, el objeto in‐
terlocutor está en "local"). En este caso, mediante "RetransmitAll" es posible
iniciar otra transmisión de toda el área de datos indicada en "ParameterInput".
Todos los cambios introducidos previamente y que todavía no han llegado al
interlocutor, son coherentes.
De todas formas, también es posible utilizar "RetransmitAll" como disparador
único de la transmisión cuando deben transmitirse siempre todas las entradas,
y no solo las modificadas. En este caso, "RetransmitAll" puede utilizarse en
lugar de "Release", porque con este último solo se transmiten los valores de
parámetros modificados.
Comprobaciones de seguridad: Se llevan a cabo las mismas comprobaciones
de seguridad que con "ContinuousEnterFunct"; véase arriba.
Si no necesita el parámetro déjelo abierto.
ApplyRemoteParamMan
IN_OUT
BOOL
TRUE / FALSE
FALSE

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2129

Configuración de dispositivos y redes
1.4 Crear configuraciones
Área de di‐
recciones:
Explicación:

El parámetro es de entrada/salida (declaración IN_OUT). Para este tipo de
parámetro es un problema indicar marcas locales, por lo que no debería utili‐
zarse.
Entrada de disparo para la sincronización del área de entrada con el área de
retroalimentación
La entrada dispara una sola vez una sincronización del área de entrada Para‐
meterInput con el área de retroalimentación "ReturnedParameter". Cuando
esto sucede, todos los valores de parámetros del área de retroalimentación
"ReturnedParameter" se copian en el área de entrada "ParameterInput".
También se sincroniza el buzón de envío del DB de comunicación con los
valores de parámetros retroalimentados.
"ApplyRemoteParamMan" se desactiva automáticamente. Por este motivo so‐
lo deberían indicarse como entrada marcas o bits de datos. Con una entrada
digital, la desactivación automática no funcionaría. La consecuencia sería una
sincronización continua mientras el parámetro tenga una señal 1.
Si no necesita el parámetro déjelo abierto.

Typical de parámetros Par12D_R
Función
Recibir o introducir localmente entre 1 y 12 valores de parámetros (de 1 palabra doble cada
uno) y devolver al interlocutor los valores de parámetros actuales válidos localmente
El contenido por palabra doble puede ser un valor en formato de palabra doble (DWORD,
DINT, REAL), pero se admite también una combinación de otros tipos de datos cuyo resultado
sea una palabra doble, por ejemplo:
● 4 bytes
● 2 palabras
● 2 bytes + 1 palabra
Tenga en cuenta al respecto la indicación "Observar límites de palabra" más abajo.
El área de datos que debe transmitirse se indica en forma de un puntero Any en el parámetro
"ParameterOutput". Esta área de datos debe estar dentro de un bloque de datos y su longitud
puede variar entre 1 y 12 palabras dobles.
El bloque también ofrece la posibilidad de introducir localmente los valores de parámetros. El
área de entrada correspondiente se indica también como puntero Any en el parámetro
"LocalParameterInput", debe estar dentro de un bloque de datos y su longitud debe ser la
misma que la indicada en "ParameterOutput".
El bloque procesa solo el área de datos modificada. En cambio, en el transcurso de una
consulta general o individual se transmite o retroalimenta todo el juego de parámetros.

2130

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
La conmutación sin discontinuidades entre los modos de operación "Local" y "Remote" está
garantizada.
Nota
Áreas de datos modificadas
El área de datos modificada consta de la primera y última palabra doble en las que se ha
detectado un cambio, así como de todas las palabras que están entre ellas, incluso si no han
cambiado.
Ejemplo:
El área que debe leerse tiene una longitud de 10 palabras dobles. En el caso de transmisión
actual se han detectado cambios en la segunda, quinta y octava palabra doble. Se transmite
el área de la 2.ª a la 8.ª palabra doble.
Observar límites de palabra
Si solo se transmiten datos modificados y el área de datos contiene valores en formato de
palabra doble, asegúrese de que los valores de palabra doble estén realmente dentro de una
de las 12 palabras dobles como máximo que tiene el área de datos que se registrará.
Si se reparten en dos palabras dobles de datos consecutivas, podría suceder que solo se
transmita una palabra del valor de palabra doble (palabra High o Low), porque solo ha
cambiado algo en ella. En este caso, la palabra que falta puede provocar un error de datos en
el interlocutor receptor (se aplica a ST7cc, no a una CPU S7).
Nota
DB con acceso estándar
El bloque tiene parámetros del tipo "ANY". Por este motivo, en las propiedades del DB debe
dejarse desactivado el atributo "Acceso optimizado al bloque".

Parámetros
Parámetro:

PartnerNo
PartnerObjectNo
Enabled
ImageMemory
Conditional
Unconditional
Consulte la descripción en el capítulo Parámetros repetitivos (Página 2046).

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:

Local
INPUT
BOOL
TRUE / FALSE

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2131

Configuración de dispositivos y redes
1.4 Crear configuraciones
Ajuste prede‐ FALSE
terminado:
Área de di‐
Entrada
recciones:
Marca

Explicación:

2132

I 0.0 ... I n.7
M 0.0 ... M n.7
L 0.0 ... L n.7
Bit de datos
DBm.DBX 0.0 ... n.7
Habilitar la entrada de parámetros local
Habilitación de la entrada de parámetros local del área de datos indicada en
"LocalParameterInput"
El objeto no acepta consignas enviadas por el interlocutor (estación maestra)
mientras "Local" = TRUE.
El estado actual de la entrada "Local" se transmite al interlocutor.
Conmutación sin discontinuidades:
● Si se cambia de "Local" = 0 a 1, los últimos valores emitidos en la salida
"ParameterOutput" se conservan hasta que se introducen valores de
parámetros nuevos por el área de entrada local "LocalParameterInput".
● Si se cambia de "Local" = 1 a 0, los últimos valores emitidos en la salida
"ParameterOutput" se conservan hasta que el bloque recibe valores de
parámetros nuevos del interlocutor.
Observe la nota del parámetro "ContinuousEnterFunct".
Caso especial:
Los valores de parámetros en la entrada local también pueden introducirse
directamente en el área de salida indicada en "ParameterOutput". En este caso
debe renunciarse a indicar un área de entrada en "LocalParameterInput" o bien
debe indicarse la misma área de datos tanto para "LocalParameterInput" como
para "ParameterOutput".
Este tipo de entrada de parámetros no puede impedirse mediante la entrada
"Local". Independientemente del estado del parámetro "Local", el bloque envía
inmediatamente al interlocutor los valores introducidos en el área de salida.
Esto permite realizar entradas de parámetros locales independientemente del
estado de la entrada "Local". Así pues, "Local" ya solo influye en la aplicación
de los parámetros que envía el interlocutor:
● Local = 0
Los parámetros enviados por el interlocutor se aceptan y se emiten en el
área de datos "ParameterOutput".
● Local = 1
Los parámetros enviados por el interlocutor se rechazan.
Las entradas "Release" y "ContinuousEnterFunct" no tienen ninguna función
en el caso especial descrito.
El módulo transmite siempre un cambio de estado del parámetro "Local" si‐
guiendo el principio del búfer de transmisión, aunque el parámetro "ImageMe‐
mory" = TRUE. De este modo se garantiza que en el interlocutor siempre se
ejecute correctamente la sincronización opcional entre área de entrada y salida
(consulte Par12D_S, parámetros "ApplyRemoteParamMan" y "ApplyRemote‐
ParamAuto").

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Explicación:

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:

ContinuousEnterFunct
INPUT
BOOL
TRUE / FALSE
FALSE
Registro continuo de parámetros locales
Este parámetro permite especificar si los valores pendientes en el área de
entrada "LocalParameterInput" se leen continuamente y si se comprueban los
posibles cambios. Los cambios se comprueban por medio de una comparación
con los valores actuales en la salida "ParameterOutput".
Los cambios del área de entrada se copian inmediatamente en el área de
salida y se transmiten al objeto interlocutor. Solo se transmiten los valores
modificados. Si hay varios cambios, el bloque envía el área de datos en la que
se encuentran todos los valores de parámetros modificados.
En este caso, el ajuste "ContinuousEnterFunct" = TRUE solo será efectivo si se
cumplen los requisitos siguientes:
● En "LocalParameterInput" se ha definido un área de entrada que no es
idéntica al área de salida emitida en "ParameterOutput".
y
● En la entrada "Local" hay una señal 1 (= TRUE).
Con el ajuste "ContinuousEnterFunct" = TRUE, cuando se detecta una señal 1
en la entrada "Local" se aplican inmediatamente los valores pendientes en
"LocalParameterInput" y se emiten en la salida "ParameterOutput". Para ello,
es imprescindible que los valores de entrada locales sean distintos en este
instante de los valores emitidos actualmente.
Este tipo de registro de valores locales es adecuado para cuando los valores
se introducen por software en el área de entrada "LocalParameterInput".
Si no necesita el parámetro déjelo abierto.
LocalParameterInput
INPUT
ANY
Consulte el área de direcciones
P#P 0.0 VOID 0
(puntero cero)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2133

Configuración de dispositivos y redes
1.4 Crear configuraciones
Área de di‐
recciones:

Explicación:

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:

2134

P#DBxx.DBX yy.0 DWORD zz
● xx: número del bloque de datos 1...32767
● yy: número del byte
● zz: número de palabras dobles 1...12 a partir del número de byte yy
Ejemplo:
P#DB20.DBX 100.0 DWORD 4
A la hora de introducir el puntero vigile bien los puntos y espacios.
Tenga en cuenta que el valor predeterminado (puntero cero) no está permitido.
Debe indicarse un puntero con una dirección real.
Área de entrada de parámetros locales
El puntero ANY direcciona el área de datos en la que se preparan los valores
de parámetros que se registrarán. Esta área de datos debe estar dentro de un
bloque de datos y su longitud puede variar entre 1 y 12 palabras dobles de
datos. Su longitud debe ser la misma que la indicada en "ParameterOutput".
Consulte el contenido y los formatos en el apartado anterior "Función".
En caso de parametrización errónea (puntero cero, longitud > 12, área de datos
sin DB) se registra un mensaje de error en el búfer de diagnóstico (ID de evento
B114, [Info2/3] = 11). La CPU no pasa a STOP. Sin embargo, después de esto
el bloque no volverá a procesarse hasta que se haya solucionado el error.
Si no necesita el parámetro déjelo abierto.
ParameterOutput
INPUT
ANY
Consulte el área de direcciones
P#P 0.0 VOID 0
(puntero cero)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Área de di‐
recciones:

Explicación:

P#DBxx.DBX yy.0 DWORD zz
● xx: número del bloque de datos 1...32767
● yy: número del byte
● zz: número de palabras dobles 1...12 a partir del número de byte yy
Ejemplo:
P#DB20.DBX 100.0 DWORD 4
A la hora de introducir el puntero vigile bien los puntos y espacios.
Tenga en cuenta que el valor predeterminado (puntero cero) no está permitido.
Debe indicarse un puntero con una dirección real.
Área de salida de parámetros
El puntero ANY direcciona el área de datos en la que se emiten los valores de
parámetros introducidos localmente o recibidos del interlocutor. Esta área de
datos debe estar dentro de un bloque de datos y su longitud puede variar entre
1 y 12 palabras dobles.
Consulte el contenido y los formatos en el apartado anterior "Función".
Par12D_R deposita los datos recibidos en el área de datos indicada en "Para‐
meterOutput" sin ninguna preparación adicional. Los datos recibidos deben
evaluarse y procesarse desde el programa de usuario.
Si el objeto interlocutor Par12D_S solo transmite datos modificados, es posible
que solo se escriba de nuevo una parte del área de salida de datos. Es el área
en la que se detectaron cambios por el lado del registro.
En caso de parametrización errónea (puntero cero, longitud > 12, área de datos
sin DB) se registra un mensaje de error en el búfer de diagnóstico (ID de evento
B114, [Info2/3] = 11). La CPU no pasa a STOP. Sin embargo, después de esto
el bloque no volverá a procesarse hasta que se haya solucionado el error.

Parámetro:
Explicación:

NewData
Consulte la declaración, el tipo de datos, el rango de valores, la asignación
predeterminada y la función en el capítulo Parámetros repetitivos (Pági‐
na 2046).
Cada vez que el bloque ha recibido valores de parámetros nuevos del objeto
interlocutor y los ha emitido en el campo de salida "ParameterOutput", la salida
"NewData" se pone a TRUE durante un ciclo del OB1. Lo mismo sucede cuan‐
do se produce una entrada local nueva en el estado "Local" = 1.

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:

Release
IN_OUT
BOOL
TRUE / FALSE
FALSE

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2135

Configuración de dispositivos y redes
1.4 Crear configuraciones
Área de di‐
recciones:

Explicación:

Entrada
I 0.0 ... I n.7
Marca
M 0.0 ... M n.7
Bit de datos
DBm.DBX 0.0 ... n.7
El parámetro es de entrada/salida (declaración IN_OUT). Para este tipo de
parámetro es un problema indicar marcas locales, por lo que no debería utili‐
zarse.
Entrada para aplicar la entrada de parámetros local
Esta entrada permite lanzar la aplicación controlada por flancos de los valores
de parámetros pendientes en la entrada de parámetros "LocalParameterInput".
Un cambio de 0 a 1 en la entrada "Release" solo se tendrá en cuenta si se
cumplen los requisitos siguientes:
● En el parámetro "LocalParameterInput" se ha indicado un área de entrada
que no es idéntica al área de salida indicada en "ParameterOutput".
y
● La entrada "Local" está puesta a TRUE.
Existe la posibilidad de utilizar "Release" para entradas de parámetros por
software, p. ej. mediante un panel de operador (OP). En este caso, la entrada
"Release" debería operarse mediante una tecla de función del OP. En princi‐
pio, es posible introducir varios parámetros en el OP. Los valores de paráme‐
tros no se leen ni se comprueban los posibles cambios hasta que se activa la
tecla de función Release.
Los cambios se comprueban por medio de una comparación con los valores de
parámetros actuales en la salida "ParameterOutput". Los cambios del área de
entrada se copian inmediatamente en el área de salida y se transmiten al objeto
interlocutor.
Solo se transmiten los valores modificados. Si hay varios cambios, el bloque
envía el área de datos en la que se encuentran todos los valores de parámetros
modificados.
La entrada "Release" se desactiva automáticamente. Es posible indicar como
entrada, aparte de una marca o un bit de datos, también una entrada digital.
Con una entrada digital, la desactivación automática no funcionaría. Pero no
tiene efectos negativos. El registro mediante "Release" se inicia controlada por
flancos, es decir, una sola vez.
Si no necesita el parámetro déjelo abierto.

FC Safe
Función
La FC Safe se encarga de que la entrada de comandos y consignas sea segura aplicando el
control 1-de-n.
La FC Safe comprueba entradas para los siguientes typicals de puntos de datos:
● Cmd01B_S
● Set01W_S
● Par12D_S

2136

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Cuando hay una entrada pendiente, la FC comprueba si en el ciclo actual del OB1 hay solo una
entrada pendiente y, seguidamente, concede la autorización al bloque que realiza la lectura.
En cuanto hay dos (o más) entradas pendientes dentro de un ciclo del OB1, se ignoran ambas
entradas.
En cada CPU en la que se registran comandos y/o consignas, la FC Safe debe llamarse una
vez en el OB1 al finalizar todos los FB de comandos y consignas.
La FC tiene una vigilancia separada para entradas desde diferentes áreas de memoria del
sistema. Se dividen en entradas de hardware y entradas de software:
● Entradas de hardware
– Módulos de entrada (I)
– Área periférica de entradas (PI*)
● Entradas de software
– Marcas (M)
– Bloques de datos (DB)
– Datos locales (L)
– Paneles de operador
El bloque comprueba por separado los dos tipos de entrada "Entradas de hardware" y
"Entradas de software". La FC concede la autorización para entradas de hardware y software
por separado. Para cada tipo de entrada solo debe detectarse una sola entrada de comando
o consigna.
Si hay pendientes una sola entrada de hardware y una sola entrada de software al mismo
tiempo, se habilitan las dos entradas.
Para entradas de hardware rige la condición adicional siguiente: La entrada debe estar
pendiente constantemente mientras dure "InputDelayTime". El procesamiento del bloque solo
se autoriza si el comando o la consigna introducido se mantiene invariable durante este tiempo
y si durante este tiempo no se detectan otras entradas de comandos o consignas.
La elaboración propiamente dicha del telegrama de comando o consigna corre a cargo del
bloque que ha leído el comando o la consigna.
Para la entrada de hardware, la FC Safe ofrece los dos códigos de condición siguientes:
● InputOK
Indica la autorización de comandos de hardware y consignas
● InputError
Indica errores de entrada en comandos de hardware y consignas
La FC Safe indica un error de salida de comando que se ha detectado en una estación por
medio de la siguiente salida:
● GlobalCmdOutputError
Señalización acumulativa: Error de salida de comando en una estación

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2137

Configuración de dispositivos y redes
1.4 Crear configuraciones

Parámetro
Nombre:
Declaración:
Tipo de datos:
Rango de va‐
lores:

Explicación:

Nombre:
Declaración:
Tipo de datos:
Rango de va‐
lores:

Explicación:

Nombre:
Declaración:
Tipo de datos:
Rango de va‐
lores:

Explicación:

Nombre:
Declaración:

InputDelayTime
INPUT
INT
● 0
Valor para parámetros no necesarios
● 1 ... 32000
Rango de valores del tiempo de retardo
Tiempo de retardo en ms para comandos y consignas introducidas por hard‐
ware.
Se recomienda un tiempo de retardo de 1000 ms como mínimo.
MaxInputTime
INPUT
INT
● 0
Valor para parámetros no necesarios
● 1 ... 32000
Rango de valores del tiempo de vigilancia
Tiempo de vigilancia en s para comandos y consignas introducidas por hard‐
ware.
Se recomienda un tiempo de vigilancia de 30 s como mínimo.
Si el parámetro no es necesario, indique 0 (cero).
ResetError
INPUT
BOOL
Entrada
Marca

I 0.0 ... I n.7
M 0.0 ... M n.7
L 0.0 ... L n.7
Bit de datos
DBm.DBX 0.0 ... n.7
Entrada para desactivar la salida GlobalCmdOutputError.
Si el parámetro no es necesario, indique un bit de marcas o datos que tenga
siempre la señal 0.

InputOK
● S7‑300
● S7‑1500
Tipo de datos: BOOL

2138

● OUTPUT
● IN_OUT

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Rango de va‐ Salida
lores:
Marca

Explicación:

Q 0.0 ... Q n.7
M 0.0 ... M n.7
L 0.0 ... L n.7
Bit de datos
DBm.DBX 0.0 ... n.7
Indica la autorización de comandos de hardware y consignas
Tiene la señal 1 en cuanto se concede la habilitación para la entrada actual, es
decir, cuando se ha introducido correctamente el comando de hardware o la
consigna.
El código de condición se apaga cuando se retira la entrada, es decir, en
cuanto se suelta la tecla de comando o en cuanto se suelta la tecla de entrada
de consigna en la entrada "EnterInput".
Si el parámetro no es necesario, indique un bit de marcas o datos en el área
de memoria de los datos locales.

Nombre:
Declaración:

InputError
● S7‑300
● S7‑1500
Tipo de datos: BOOL
Rango de va‐ Salida
lores:
Marca

Explicación:

● OUTPUT
● IN_OUT

Q 0.0 ... Q n.7
M 0.0 ... M n.7
L 0.0 ... L n.7
Bit de datos
DBm.DBX 0.0 ... n.7
Indica errores de entrada en comandos de hardware y consignas
La salida tiene la señal 1 en cuanto se detecta uno de los siguientes errores de
entrada de hardware dentro del tiempo de vigilancia "MaxInputTime":
● Se han detectado dos o más entradas de comandos y/o consignas al
mismo tiempo.
● En una de las entradas se ha detectado una señal 1 durante un tiempo
prolongado (p. ej. cuando la entrada está defectuosa).
Si el parámetro no es necesario, indique un bit de marcas o datos en el área
de memoria de los datos locales.

Nombre:
Declaración:

GlobalCmdOutputError
● S7‑300
● S7‑1500
Tipo de datos: BOOL

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

● OUTPUT
● IN_OUT

2139

Configuración de dispositivos y redes
1.4 Crear configuraciones
Rango de va‐ Salida
lores:
Marca

Q 0.0 ... Q n.7
M 0.0 ... M n.7
L 0.0 ... L n.7
Bit de datos
DBm.DBX 0.0 ... n.7
Señalización acumulativa: Se ha detectado un error de salida de comandos en
una estación.
En el lado de recepción solo se producen errores de salida de comandos en
los casos siguientes:
● El contenido de los dos bytes de comandos en el telegrama recibido no es
idéntico.
● Hay más de un bit activado en el byte de comandos (error 1 de 8).
Si se detecta un error de este tipo, la estación lo notifica enviando un telegra‐
ma organizativo al dispositivo que ha enviado los comandos. La FC Safe del
dispositivo emisor muestra el fallo en la salida "GlobalCmdOutputError".
Cuando se detecta el error, la salida mantiene la señal 1 hasta que el usuario
solicita la desactivación de la señal de grupo mediante la entrada "ResetError".
Si el parámetro no es necesario, indique un bit de marcas o datos en el área
de memoria de los datos locales.

Explicación:

Typical de consigna Set01W_S
Función
Enviar 1 consigna como valor de 16 bits y recibir una consigna local del interlocutor
La comprobación 1 de n es realizada por la FC Safe.
Nota
Se requiere la FC Safe
Con Set01W_S solo es posible transmitir datos cuando al final del programa cíclico está
integrado el bloque FC Safe; consulte el capítulo FC Safe (Página 2136).

Parámetros
Parámetro:

PartnerNo
PartnerObjectNo
Enabled
Consulte la descripción en el capítulo Parámetros repetitivos (Página 2046).

Parámetro: EnterInput
Declaración: INPUT
Tipo de da‐ BOOL
tos:

2140

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

Explicación:

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Explicación:

TRUE / FALSE
FALSE
Entrada
Marca

I 0.0 ... I n.7
M 0.0 ... M n.7
L 0.0 ... L n.7
Bit de datos
DBm.DBX 0.0 ... n.7
Entrada de aplicación para consigna de hardware
Esta entrada permite lanzar la aplicación controlada por flancos de la consigna
pendiente en la entrada de consigna "SetpointInput".
Solo se tendrá en cuenta un cambio en la entrada "EnterInput" cuando "Con‐
tinuousEnterFunct" = FALSE. Si se cumple esta condición, en caso de cambio
de flanco 0 → 1 se aplica la consigna introducida en "SetpointInput" y se prepara
para la transmisión. Lo mismo es válido cuando la consigna recién introducida
es idéntica a la última consigna transmitida.
Este tipo de aplicación de consigna es adecuado para la entrada por hardware,
p. ej. un tablero o pupitre.
También puede utilizarse para la entrada de consignas mediante un panel de
operador (OP). En este caso, el OP debe poder lanzar la aplicación mediante
una tecla de función.
Si no necesita el parámetro déjelo abierto.
ContinuousEnterFunct
INPUT
BOOL
TRUE / FALSE
TRUE
Aplicación de consigna continua para consigna de software
Este parámetro permite especificar si la consigna pendiente en la entrada de
consigna "SetpointInput" debe leerse continuamente y si deben comprobarse
los posibles cambios. Los cambios se comprueban por medio de una compa‐
ración con la última consigna transmitida.
Este tipo de aplicación de consigna es adecuado para la entrada por un soft‐
ware adecuado. De todas formas, también puede utilizarse para la entrada de
consignas mediante un panel de operador (OP) si el OP no dispone de una
tecla de función separada con la que pueda lanzarse la aplicación.
Si no necesita el parámetro déjelo abierto.

Parámetro: SetpointInput
Declaración: INPUT

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2141

Configuración de dispositivos y redes
1.4 Crear configuraciones
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

WORD
Consulte el área de direcciones
0 (W#16#0)
Palabras de entrada
Palabras de marcas
Palabras de datos

2142

IW0 ... IWn
PIW0 ... PIWn
MW0 ... MWn
LW0 ... LWn
DBm.DBW0 ... n

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Explicación:

Entrada de consigna
La forma en que debe procesarse la consigna pendiente en SetpointInput de‐
pende de si se trata de una entrada de hardware o software. El tipo de entrada
lo determina el usuario mediante el parámetro "ContinuousEnterFunct":
● ContinuousEnterFunct = FALSE (entrada de hardware)
Una consigna pendiente en "SetpointInput" solo se lee mientras en
"EnterInput" haya la señal 1. La consigna leída se prepara seguidamente
para la transmisión si en la comprobación 1 de n no se ha detectado ningún
error y la marca de habilitación central está activada. La FC Safe activa
automáticamente dicha marca una vez transcurrido un retardo de tiempo
parametrizado en ella (consulte FC Safe, parámetro "InputDelayTime").
El FB no leerá otra consigna hasta que en EnterInput se detecte la señal 0
como mínimo durante un ciclo del OB1.
Si en la entrada de hardware se detecta un error 1 de n, la consigna
introducida no se seguirá procesando. No se leerá una consigna nueva
hasta que se registre un ciclo del OB1 sin entradas de hardware en la CPU,
ya sea mediante bloques de comandos, consignas o parámetros.
El FB registra el error detectado 1 de n en el búfer de diagnóstico (ID de
evento B172). Mientras el error está pendiente, el estado de error se
visualiza por medio de la salida "InputError" de la FC Safe (consulte FC
Safe, parámetro "InputError").
● ContinuousEnterFunct = TRUE (entrada de software)
Una consigna pendiente en SetpointInput se lee continuamente y se
comprueban los posibles cambios. Los cambios se comprueban por medio
de una comparación con la última consigna transmitida. Cada vez que hay
un cambio se transmite la consigna inmediatamente si no se ha detectado
ningún error en la comprobación 1 de n.
– En la entrada de hardware (véase EnterInput) debe detectarse un ciclo
vacío antes de que el bloque pueda transmitir una consigna nueva.
– En la entrada de software es posible transmitir una consigna nueva en
cada ciclo del OB1. Para ello, es imprescindible que en este ciclo no
haya otras entradas de software pendientes en un bloque distinto. En
caso contrario, en la comprobación 1 de n se detectaría un error.
Por medio de la entrada "SendSoftSetpoint" existe la posibilidad de
volver a transmitir la consigna de software sin que cambie la entrada de
consigna (véase más abajo).
Si en la entrada de software se detecta un error 1 de n, la consigna
introducida no se seguirá procesando.
No se leerá una consigna nueva hasta que se registre un ciclo del OB1
sin entradas de software en la CPU (comando o consigna). El bloque
registra el error detectado 1 de n en el búfer de diagnóstico (ID de evento
B172). Además, en el bloque de datos central BasicData se activan los
bits de error correspondientes, que pueden ser consultados por el
software. Encontrará más detalles al respecto en la descripción de la FC
Safe.

Parámetro: ReturnedSetpoint
Declaración: OUTPUT

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2143

Configuración de dispositivos y redes
1.4 Crear configuraciones
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

Explicación:

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

Explicación:

2144

WORD
Consulte el área de direcciones
0 (W#16#0)
Palabras de salida

QW0 ... QWn
PQW0 ... PQWn
Palabras de marcas
MW0 ... MWn
LW0 ... LWn
Palabras de datos
DBm.DBW0 ... n
Salida para consigna retroalimentada
El objeto interlocutor que recibe la consigna devuelve la consigna válida allí
actualmente. Este valor se visualiza aquí en la salida "ReturnedSetpoint".
Cuando el objeto interlocutor está puesto a "local" y se realiza allí una nueva
entrada, la consigna que se ha modificado localmente se muestra aquí en
"ReturnedSetpoint".
Después del arranque de la CPU propia o del interlocutor o de restablecerse la
conexión, se emite automáticamente una consulta general para asegurar que
se muestre la consigna local válida actualmente en "ReturnedSetpoint".
Si no necesita el parámetro déjelo abierto.
LocalOperation
OUTPUT
BOOL
TRUE / FALSE
FALSE
Salida
Marca

Q 0.0 ... Q n.7
M 0.0 ... M n.7
L 0.0 ... L n.7
Bit de datos
DBm.DBX 0.0 ... n.7
Retroalimentación del objeto interlocutor: El objeto está en operación local
En el objeto interlocutor que recibe la consigna también es posible realizar una
entrada de consigna local. En este caso, el objeto interlocutor Set01W_R debe
estar ajustado a "local" en el parámetro de entrada "Local". El objeto interlo‐
cutor señaliza el estado actual del parámetro de entrada "Local", que se mues‐
tra aquí en la salida "LocalOperation".
Después del arranque de la CPU propia o del interlocutor o de restablecerse la
conexión, se emite automáticamente una consulta general para asegurar que
se muestre el estado válido actual en "LocalOperation".
Si no necesita el parámetro déjelo abierto.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Parámetro:
Explicación:

NewData
Consulte la declaración, el tipo de datos, el rango de valores, la asignación
predeterminada y la función en el capítulo Parámetros repetitivos (Pági‐
na 2046).
Cada vez que el bloque ha recibido datos nuevos y los ha emitido en las salidas
"ReturnedSetpoint" o "LocalOperation", la salida "NewData" se pone a TRUE
durante un ciclo del OB1.

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

SendSoftSetpoint
IN_OUT
BOOL

Explicación:

TRUE / FALSE
FALSE
Marca
M 0.0 ... M n.7
Bit de datos
DBm.DBX 0.0 ... n.7
El parámetro es de entrada/salida (declaración IN_OUT). Para este tipo de
parámetro es un problema indicar marcas locales, por lo que no debería utili‐
zarse.
Entrada de disparo para volver a enviar la última consigna de software
Encontrará más detalles en el parámetro "SetpointInput".
Si no necesita el parámetro déjelo abierto.

Typical de consigna Set01W_R
Función
Recibir o introducir localmente 1 consigna en la estación como valor de 16 bits y devolver la
consigna local a la central

Parámetros
Parámetro:

PartnerNo
PartnerObjectNo
Enabled
ImageMemory
Conditional
Unconditional
TimeStamp
Consulte la descripción en el capítulo Parámetros repetitivos (Página 2046).

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2145

Configuración de dispositivos y redes
1.4 Crear configuraciones

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Área de di‐
recciones:

Explicación:

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:

2146

Local
INPUT
BOOL
TRUE / FALSE
FALSE
Entrada
Marca

I 0.0 ... I n.7
M 0.0 ... M n.7
L 0.0 ... L n.7
Bit de datos
DBm.DBX 0.0 ... n.7
Habilitación de la entrada de consigna local del área de datos indicada en
"LocalSetpointInput"
El objeto no acepta consignas enviadas por el interlocutor (estación maestra)
mientras "Local" = TRUE.
El estado actual de la entrada "Local" se transmite al interlocutor junto con una
copia de la consigna que se emite actualmente en la salida "SetpointOutput"
(simetría especular de consigna).
Conmutación sin discontinuidades:
● Si se cambia de "Local" = 0 a 1, los últimos valores emitidos en la salida
"SetpointOutput" se conservan hasta que se introduce una consigna nueva
por el área de entrada local "LocalSetpointInput".
● Si se cambia de "Local" = 1 a 0, el último valor emitido en la salida
"SetpointOutput" se conserva hasta que el bloque recibe una consigna
nueva del interlocutor.
Observe la nota del parámetro "ContinuousEnterFunct".
EnterInput
INPUT
BOOL
TRUE / FALSE
FALSE

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Área de di‐
recciones:

Explicación:

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:
Explicación:

Entrada
Marca

I 0.0 ... I n.7
M 0.0 ... M n.7
L 0.0 ... L n.7
Bit de datos
DBm.DBX 0.0 ... n.7
Entrada de aplicación para la entrada de consigna local
El parámetro lanza la aplicación controlada por flancos de la consigna pen‐
diente en la entrada de consigna "LocalSetpointInput".
Solo se tendrá en cuenta un cambio en la entrada "EnterInput" cuando el valor
TRUE esté puesto en el parámetro de entrada "Local" y "ContinuousEnter‐
Funct" = FALSE. Si se cumplen estas condiciones, en caso de cambio de 0 a
1 en la entrada "EnterInput" se aplica la consigna introducida en "LocalSet‐
pointInput" y se emite en la salida "SetpointOutput".
Este tipo de aplicación de consigna es adecuado para entradas de hardware,
p. ej. con un tablero, un pupitre o un panel de operador (OP). El OP debe poder
lanzar la aplicación mediante una tecla de función.
Si no necesita el parámetro déjelo abierto.
ContinuousEnterFunct
INPUT
BOOL
TRUE / FALSE
FALSE
Registro continuo de la consigna local
Si "Local" = TRUE y "ContinuousEnterFunct" = TRUE, la consigna pendiente
en la entrada de consigna "LocalSetpointInput" debe leerse continuamente y si
deben comprobarse los posibles cambios.
La consigna leída en "LocalSetpointInput" se emite en la salida "SetpointOut‐
put" siempre que el valor de entrada local sea distinto de la última consigna
retroalimentada en ese instante.
Si en la entrada de consigna "LocalSetpointInput" se detecta un array, este se
emite inmediatamente (sin comprobar los cambios) en la salida "SetpointOut‐
put".
Este tipo de aplicación de consigna es adecuado para entradas de software.
De todas formas, también puede utilizarse para la entrada de consignas me‐
diante un panel de operador (OP) si el OP no dispone de una tecla de función.
Si no necesita el parámetro déjelo abierto.

Parámetro: LocalSetpointInput
Declaración: INPUT
Tipo de da‐ WORD
tos:

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2147

Configuración de dispositivos y redes
1.4 Crear configuraciones
Rango de va‐ Consulte el área de direcciones
lores:
Ajuste prede‐ 0 (W#16#0)
terminado:
Área de di‐
Palabras de entrada
recciones:
Palabras de marcas

Explicación:

Parámetro:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Ajuste prede‐
terminado:

2148

IW0 ... IWn
PIW0 ... PIWn
MW0 ... MWn
LW0 ... LWn
DBm.DBW0 ... n

Palabras de datos
Entrada de consigna local
Un valor pendiente en "LocalSetpointInput" solo se aplicará si "Local" = TRUE.
Si se cumple esta condición, la forma en que debe procesarse la consigna
pendiente depende de si se trata de una entrada de hardware o software. El
tipo de entrada lo determina el usuario mediante el parámetro "ContinuousEn‐
terFunct":
● ContinuousEnterFunct = FALSE
Entrada de hardware
Una consigna pendiente en "LocalSetpointInput" solo se lee si en
"EnterInput" se detecta un cambio de señal 0 → 1. La consigna introducida
localmente se emite en la salida "SetpointOutput" y se transmite al
interlocutor.
El bloque no leerá otra consigna hasta que en "EnterInput" se detecte la
señal 0 como mínimo durante un ciclo del OB1.
● ContinuousEnterFunct = TRUE
Entrada de software
Una consigna pendiente en "LocalSetpointInput" se lee continuamente y se
comprueban los posibles cambios. Los cambios se comprueban por medio
de una comparación con la última consigna válida, es decir, el valor
almacenado como retroalimentación de consigna. Cada vez que hay un
cambio, la consigna se emite inmediatamente en la salida parametrizada en
"SetpointOutput" y se transmite al interlocutor.
En entradas de software es posible introducir una consigna nueva en cada
ciclo del OB1.
En entradas de hardware debe detectarse un ciclo vacío antes de que el
bloque pueda leer una consigna nueva.
Si no necesita el parámetro déjelo abierto.
SetpointOutput
OUTPUT
WORD
Consulte el área de direcciones
0 (W#16#0)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Área de di‐
recciones:

Palabras de salida
Palabras de marcas

Explicación:

Parámetro:
Explicación:

QW0 ... QWn
PQW0 ... PQWn
MW0 ... MWn
LW0 ... LWn
DBm.DBW0 ... n

Palabras de datos
Palabra de salida de consigna
La consigna enviada por el objeto interlocutor o introducida localmente en "Lo‐
calSetpointInput" se emite en la salida "SetpointOutput".
NewData
Consulte la declaración, el tipo de datos, el rango de valores, la asignación
predeterminada y la función en el capítulo Parámetros repetitivos (Pági‐
na 2046).
Cada vez que el bloque ha recibido una consigna nueva del objeto interlocutor
y la ha emitido en la salida "SetpointOutput", la salida "NewData" se pone a
TRUE durante un ciclo del OB1. Lo mismo sucede cuando se produce una
nueva entrada de consigna local (Local = 1).

Optional blocks
FC ListGenerator1500/300/400
La FC ListGenerator está disponible en tres variantes con los siguientes nombres simbólicos:
● Para S7-300
ListGenerator300
● Para S7-400
ListGenerator400
● Para S7-1500
ListGenerator1500

Función
La FC ListGenerator se necesita en una CPU en la que se reciben datos que no tienen
dirección de destino o está incompleta. Básicamente se refiere a la ausencia del número de
objeto de destino, pues es el que apunta al DB de instancia en el que debe depositarse la
información recibida.
Es posible que falten direcciones de destino o que estén incompletas si no se han
parametrizado en la estación o no se ha hecho por completo. Esto está permitido en typicals
que envían información binaria, valores analógicos o valores de contaje. Si estos typicals
deben enviar datos a más de un destino, no se les asigna ninguna dirección de destino. Debido
a la ausencia de la información de destino, el telegrama que debe enviarse se transmite
automáticamente a todos los destinos para los que se ha creado una conexión en la

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2149

Configuración de dispositivos y redes
1.4 Crear configuraciones
configuración. Seguidamente, el destino correspondiente recibe los datos en cuestión sin
dirección de destino.
Nota
Complemento del número de dispositivo de destino
Los telegramas sin dirección de destino que deben transmitirse reciben del TIM emisor el
número de dispositivo de destino completo, a veces incluso varios, si deben suministrarse
datos a varios destinos.
El TIM rellena el campo de dirección para el número de objeto de destino con el valor 0, pues
no dispone de la información correspondiente. Solo conoce los dispositivos de destino para los
que se ha configurado una conexión desde él mismo.
Por consiguiente, en el lado receptor el telegrama de datos cuenta con el número de dispositivo
de destino pero el número de objeto de destino es 0.
Si el número de objeto de destino no está incluido en el telegrama de datos recibido, la FC
Distribute, que se encarga de distribuir los telegramas de recepción, accede a una lista de
referencias de objetos.
A partir de la dirección de origen incluida en cada telegrama de datos (número de dispositivo
de origen y número de objeto de origen), la FC Distribute busca dentro de la lista una entrada
que indique el número de objeto de destino faltante correspondiente a la dirección de origen en
cuestión, es decir, el número del DB de instancia local.
Esta lista de referencias de objetos la elabora la FC ListGenerator. La FC no tiene parámetros.
Se integra en el programa de usuario cíclico (OB1), a continuación de la FC BasicTask.
Para elaborar la lista, la FC ListGenerator utiliza las direcciones parametrizadas en los typicals
receptores. En estos typicals es imprescindible indicar "PartnerNo" y "PartnerObjectNo". Estos
parámetros son idénticos a la dirección de origen del telegrama de recepción correspondiente.
Puesto que, además, el Typical conoce el número de su DB de instancia, esto significa que
conoce también todas las direcciones necesarias para una entrada en la lista de referencias.
Durante el arranque, la FC ListGenerator hace que todos los typicals receptores introduzcan
en la lista de referencias la dirección que tienen parametrizada con el número del DB de
instancia. Esto significa que la lista de referencias de objetos no debe parametrizarse por
separado, sino que simplemente se elabora a partir de la parametrización realizada
previamente en los Typicals de recepción, con lo que siempre es coherente.

2150

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Funcionamiento
Tras el arranque, la FC ListGenerator elabora las listas en tres ciclos consecutivos del OB1:
● En el primer ciclo se determina cuántas entradas se necesitan en la primera y, en su caso,
segunda lista de referencias de objetos. Los Typicals participantes incrementan un
contador correspondiente en esta ejecución.
● En el segundo ciclo, la FC ListGenerator genera el bloque de datos con la longitud
necesaria para la primera y, en su caso, segunda lista de referencias de objetos y ocupa
todas las palabras de datos que hay con 0. En el mismo ciclo, todos los Typicals
participantes introducen sus direcciones y el número del DB de instancia correspondiente
en la lista.
● En el tercer y último ciclo, la FC ListGenerator clasifica todas las entradas en orden
ascendente. La clasificación ordenada acelera el proceso de búsqueda por la lista durante
el funcionamiento.
Para generar el bloque de datos, la FC ListGenerator procede del siguiente modo:
Si todavía no se ha creado ninguna lista, se busca un número de DB libre. A partir del número
del DB BasicData se toma el número del próximo DB libre por abajo.
Si ya existe una lista, la FC ListGenerator comprueba si el DB existente es lo suficientemente
largo para el número necesario de referencias. Si la longitud es suficiente, el contenido se
ocupa con 0 y, seguidamente, se vuelve a escribir con direcciones y se clasifica.
Si el bloque de datos existente es demasiado corto, el procedimiento posterior es distinto en
las diferentes familias SIMATIC:
● En S7-300:
Se genera un DB nuevo. El DB antiguo se conserva en la memoria, pues en S7-300 no hay
función de borrado para bloques de datos.
En la CPU 300 hay que borrar los DB antiguos con la programadora.
Observación:
sin la generación de un nuevo DB debería borrarse este DB con la programadora. Si no hay
memoria suficiente en la CPU para generar un nuevo DB, el usuario debe borrar el DB
existente antes del nuevo arranque.
● En S7-400
Se borra el DB existente, se comprime la memoria y, seguidamente, se genera el DB con
el mismo número y la longitud adecuada.
En la CPU 400 es posible comprimir manualmente la memoria o volver a cargar la CPU.
● En S7-1500
Se borra el DB existente y se genera con el mismo número y la longitud adecuada.
En la 1500 CPU la memoria se comprime automáticamente, igual que en la CPU 300.
Si la FC ListGenerator no puede generar más DB, se escribe un mensaje de error en el búfer
de diagnóstico de la CPU:
● 0xB107 "Error al generar la lista de referencias de objeto"
– DB[Info1]
No es posible generar el DB[Info1].
– Causa: [Info2].
En Info2 se emite el valor de retorno de la función SFC Create_DB; consulte más
información allí.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2151

Configuración de dispositivos y redes
1.4 Crear configuraciones

FC PartnerMonitor
Función
La FC PartnerMonitor tiene las funciones siguientes:
● Muestra información de estado importante para un dispositivo SINAUT (consulte el
parámetro "PartnerStatus").
● Por medio de la FC es posible lanzar una consulta general del dispositivo, excepto en un
puesto de control (p. ej. ST7cc/ST7sc).
● Es posible establecer y deshacer una conexión permanente con el dispositivo.
La FC puede llamarse en cualquier lugar del programa de usuario cíclico (en el OB1).
Si debe vigilarse y controlarse más de un dispositivo, hay que integrar el número
correspondiente de FC PartnerMonitor en el programa de usuario.
Un dispositivo SINAUT (interlocutor) solo puede ser una CPU ST7 o un ST7cc con el que se
haya configurado una conexión. No es posible vigilar ni controlar TIM con la FC PartnerMonitor.
Nota
FC PartnerMonitor en una estación
La FC PartnerMonitor también puede utilizarse en una estación. Sin embargo, en este caso no
es posible utilizar las entradas de control para establecer y deshacer una conexión
permanente. Dichas entradas funcionan únicamente desde la estación maestra, es decir,
cuando el TIM local es un TIM de estación maestra.

Parámetro
Nombre:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Explicación

2152

PartnerNo
INPUT
INT
1 ... 32000 [ms]
N.º de dispositivo SINAUT del dispositivo que debe vigilarse y controlarse
Si el "PartnerNo" parametrizado no se encuentra en la contabilidad (DB Ba‐
sicData), se realiza una entrada en el búfer de diagnóstico (ID de evento B101)
(solo durante el arranque). La CPU no pasa a STOP.
El estado de un dispositivo correctamente parametrizado se muestra en la
palabra de salida "PartnerStatus", donde también se procesan las entradas de
control.
Para un dispositivo desconocido, el procesamiento se detiene hasta que se ha
solucionado el error. Mientras tanto, la palabra de salida "PartnerStatus" tiene
el contenido 0.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Nombre:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Explicación

Nombre:
Declaración:
Tipo de datos:
Rango de va‐
lores:

Explicación

MaxConnectTime
INPUT
INT
● 0 (sin límites)
● 1 ... 480 [minutos]
Duración máxima de una conexión permanente
El tiempo indicado aquí (> 0) se activa cuando se inicia una conexión perma‐
nente (consulte el parámetro "PermanentCall_On").
Si el tiempo finaliza antes de que se haya retirado la conexión permanente,
esta se cancela automáticamente. El tiempo se dispara de nuevo mientras
haya una señal 1 en la entrada "PermanentCall_On".
El tiempo indicado aquí rige tanto para una conexión permanente en la red de
marcación como para una conexión permanente (llamada permanente) en una
línea dedicada.
PartnerStatus
OUTPUT
WORD
Palabras de salida

QW0 ... QWn
PQW0 ... PQWn
Palabras de marcas
MW0 ... MWn
LW0 ... LWn
Palabras de datos
DBm.DBW0 ... n
Palabra de salida para indicar el estado del dispositivo que debe vigilarse.
Si no necesita el parámetro déjelo abierto.

Significado de los bits de estado en la palabra de salida "PartnerStatus"
Bit

Bit

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

.0

Estado del dispositivo

0

0 = dispositivo averiado

1

1 = dispositivo en buen estado

.1

Estado de la conexión redundante

0

0 = conexión redundante fallida

1

1 = todas las conexiones en buen estado

2153

Configuración de dispositivos y redes
1.4 Crear configuraciones

Bit

Bit

Bit

.3

.2

Estado de la consulta general (CG)

0

0

0 = CG terminada sin errores

0

1

1 = CG iniciada

1

0

2 = principio de consulta general recibido

1

1

3 = CG lista con error (CG incompleta o no ejecu‐
table, p. ej. debido a fallo del dispositivo)

.6

.5

.4

Estado de la conexión de marcación

0

0

0

0 = no hay conexión

0

0

1

1 = llamada saliente activada

0

1

0

2 = llamada entrante pendiente

0

1

1

3 = llamada saliente pendiente

1

0

0

4 = conexión permanente anunciada

1

0

1

5 = conexión permanente pendiente

1

1

0

6 = conexión permanente anulada

.7

Estado de la conexión de marcación

0

0 = no hay comprobación de conexión por marcación en el fondo

1

1 = comprobación de conexión por marcación en el fondo activa

.8

Estado de la llamada permanente (en línea dedicada)

0

0 = no hay llamada permanente

1

1 = llamada permanente activa

Bit

.9

Estado de los recursos de conexión WAN

*)

0

0 = recursos suficientes en el interlocutor

1

1 = escasez de recursos en el interlocutor

.10

Estado de la hora

0

0 = fecha/hora del interlocutor no existe/no es correcta

1

1 = fecha/hora del interlocutor correcta

.11

Sincronización horaria

0

0 = la CPU interlocutora ha recibido una hora plausible en la última
sincronización o todavía no se ha recibido ninguna hora después del
arranque.

1

1 = la CPU interlocutora ha recibido una hora no plausible; se sigue
utilizando la última hora válida.

Bit

Bit

Bit

(solo se visualiza con TimeTask > V1.6)

2154

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Nota
Parámetro de entrada/salida
Los parámetros siguientes son de entrada/salida (declaración IN_OUT):
● GeneralRequest
● PermanentCall_On
● PermanentCall_Off
Para este tipo de parámetro es un problema indicar marcas locales, por lo que no debería
utilizarse.

Nombre:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Explicación

GeneralRequest
IN_OUT
BOOL
Entrada
I 0.0 ... I n.7
Marca
M 0.0 ... M n.7
Bit de datos
DBm.DBX 0.0 ... n.7
Entrada para lanzar una consulta general del dispositivo indicado en PartnerNo
Con una señal 1 en esta entrada se lanza una consulta general del dispositivo,
siempre que en este instante no haya en curso ninguna consulta para dicho
dispositivo. Seguidamente, la FC desactiva automáticamente la entrada.
Si se indica una entrada de una entrada digital (I 0.0 ... I n.7), el usuario debe
encargarse de retirar la señal pendiente en la entrada. La señal debe retirarse
antes de finalizar la consulta general que hay en curso actualmente, pues de lo
contrario se lanzaría inmediatamente otra consulta general.

Nombre:
PermanentCall_On
Declaración: IN_OUT
Tipo de da‐ BOOL
tos:

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2155

Configuración de dispositivos y redes
1.4 Crear configuraciones
Rango de va‐ Entrada
I 0.0 ... I n.7
lores:
Marca
M 0.0 ... M n.7
Bit de datos
DBm.DBX 0.0 ... n.7
Explicación Entrada para lanzar una conexión permanente con el dispositivo indicado en
PartnerNo
Con una señal 1 en esta entrada se lanza una conexión permanente con el
dispositivo, siempre que en este instante no haya ninguna conexión perma‐
nente con dicho dispositivo. Seguidamente, la FC desactiva automáticamente
la entrada. Si se indica una entrada de una entrada digital (I 0.0 ... I n.7), el
usuario debe encargarse de retirar la señal pendiente en la entrada como muy
tarde antes de que se deshaga la conexión permanente existente.
Con una señal 1 en la entrada "PermanentCall_On" también se inicia el tiempo
parametrizado "MaxConnectTime", siempre que sea mayor que 0.
Según si el dispositivo es accesible a través de una conexión de marcación o
de una línea dedicada, el comando para establecer la conexión permanente se
procesa del siguiente modo y se visualiza en la salida "PartnerStatus":
● En una conexión de marcación:
Desde el TIM de estación maestra se establece una conexión de marcación
con el dispositivo correspondiente que, independientemente del tráfico de
datos, se mantiene hasta que se da el comando para deshacerla.
El estado actual de la conexión permanente se visualiza en la palabra de
salida PartnerStatus con los bits 4 ... 6 (consulte el parámetro
PartnerStatus).
● En una línea dedicada:
En este caso, hay tráfico entre el TIM de estación maestra y las estaciones
con sondeo (polling). En este caso, la conexión permanente se realiza
mediante una llamada permanente del dispositivo correspondiente. En
realidad, se trata de una llamada intermitente del dispositivo, es decir, los
demás dispositivos de la red de línea dedicada siguen recibiendo llamadas,
pero después de cada llamada de un dispositivo "normal" se vuelve a llamar
en primer lugar el dispositivo preferido.
El estado actual de la llamada permanente lo indica el bit 8 en el parámetro
de salida "PartnerStatus".
Peculiaridades de las estaciones:
Desde una estación no es posible establecer conexiones permanentes. Así
pues, en caso de emplear la FC PartnerMonitor en una estación no será posible
utilizar esta entrada de control.
Nombre:
PermanentCall_Off
Declaración: IN_OUT
Tipo de da‐ BOOL
tos:

2156

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Rango de va‐ Entrada
I 0.0 ... I n.7
lores:
Marca
M 0.0 ... M n.7
Bit de datos
DBm.DBX 0.0 ... n.7
Explicación Deshacer una conexión permanente existente
La entrada sirve para lanzar la supresión de una conexión permanente exis‐
tente con el dispositivo indicado en "PartnerNo".
Con una señal 1 en esta entrada se deshace una conexión permanente con el
dispositivo, siempre que en este instante haya una conexión permanente con
dicho dispositivo. Seguidamente, la FC desactiva automáticamente la entrada.
Si se indica una entrada de una entrada digital (I 0.0 ... I n.7), el usuario debe
encargarse de retirar la señal pendiente en la entrada desde el programa de
usuario. Esto debería realizarse como muy tarde antes de establecer otra co‐
nexión permanente.
Según si el dispositivo es accesible a través de una conexión de marcación o
de una línea dedicada, el comando para deshacer la conexión permanente se
procesa del siguiente modo y se visualiza en la salida "PartnerStatus":
● En una conexión de marcación:
Desde el TIM de estación maestra se deshace la conexión de marcación
existente, aunque solo cuando ya no hay datos pendientes para transmitir.
El estado actual de la conexión permanente se visualiza en la palabra de
salida PartnerStatus con los bits 4 ... 6 (consulte el parámetro
PartnerStatus).
● En una línea dedicada:
El TIM de estación maestra borra la mención de llamada permanente del
dispositivo correspondiente. El ciclo de llamada continúa en modo normal
para todos los dispositivos conectados.
El estado actual de la llamada permanente lo indica el bit 8 en el parámetro
de salida "PartnerStatus".
En una línea dedicada también es posible borrar una llamada permanente
existente transfiriendo una llamada permanente para otro dispositivo al TIM
de estación maestra. La petición existente será reemplazada por la nueva.
Peculiaridades de las estaciones:
Desde una estación no es posible establecer ni deshacer conexiones perma‐
nentes. Así pues, en caso de emplear la FC PartnerMonitor en una estación no
será posible utilizar esta entrada de control.

FC PartnerStatus
Función
La FC PartnerStatus puede mostrar el estado "correcto" o "averiado" actual para un máximo
de 8 dispositivos SINAUT.
La FC puede llamarse en cualquier lugar del programa de usuario cíclico (en el OB1).
Si desea vigilar más de 8 dispositivos, debe integrarse el mismo número de FC PartnerStatus
en el programa de usuario.
El interlocutor puede ser una CPU ST7 o un ST7cc con el que se haya configurado una
conexión, o bien un TIM local.
Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2157

Configuración de dispositivos y redes
1.4 Crear configuraciones
En el byte de salida "PartnerStatus" hay un bit reservado en cada dispositivo que muestra el
estado del dispositivo en cuestión, del siguiente modo:
● FALSE (0):
– dispositivo averiado
– Parámetro de entrada correspondiente no utilizado (= 0)
– Dispositivo desconocido
● TRUE (1): Dispositivo en buen estado

Parámetro
Nombre:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:

Explicación

Nombre:
Declaración:
Tipo de datos:
Rango de va‐
lores:

Explicación:

2158

Partner1 ... Partner8
INPUT
INT
● 0
Valor para parámetros no necesarios
● 1 ... 32000
Número del dispositivo que debe vigilarse
N.º de dispositivo SINAUT del dispositivo que debe vigilarse.
Si un número de dispositivo parametrizado no se encuentra en la contabilidad
(DB BasicData), se realiza una entrada en el búfer de diagnóstico (ID de evento
B101) (solo durante el arranque). La CPU no pasa a STOP.
El estado de los dispositivos parametrizados correctamente se muestra en el
byte de salida "PartnerStatus".
Para dispositivos desconocidos, el procesamiento no se lleva a cabo hasta que
se ha solucionado el error. Sus bits de estado están puestos a 0.
PartnerStatus
OUTPUT
BYTE
Bytes de salida

QB0 ... QBn
PQB0 ... PQBn
Bytes de marcas
MB0 ... MBn
LB0 ... LBn
Bytes de datos
DBm.DBB0 ... n
Indicador de estado de los dispositivos que deben vigilarse
Asignación de los bits de estado en el byte de salida "PartnerStatus" en fun‐
ción de los parámetros "Partner1" ... "Partner8":
Bit
.7
.6
.5
.4
.3
.2
.1
.0
Interlocutor
8
7
6
5
4
3
2
1
Valor:
● 0 = interlocutor averiado, no parametrizado o desconocido.
● 1 = interlocutor en buen estado

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

FC PathStatus
Función
El bloque (FC) muestra desde el TIM local el estado de la vía hacia un interlocutor.
Como máximo es posible configurar 2 vías (vía principal y sustitutiva) hacia un interlocutor.
Ambas vías deben comenzar o finalizar en un TIM local.
El bloque muestra lo siguiente:
● Las vías a través de las cuales se accede al interlocutor.
● La vía utilizada actualmente.
● La interfaz TIM a través de la que se ha configurado la vía principal.
● La interfaz TIM a través de la que se ha configurado la vía sustitutiva.
La vía de una conexión se indica como combinación de las interfaces utilizadas del TIM y el
estado de la vía.
En el byte de salida PathStatus se han reservado los bits siguientes:
● Dos bits para la interfaz de la vía principal
● Dos bits para la interfaz de la vía sustitutiva
● Dos bits para la estado de la vía principal
● Dos bits para la estado de la vía sustitutiva
La FC puede llamarse en cualquier punto del programa de usuario cíclico (OB1) después de
la llamada de la FC BasicTask.
Cuando debe mostrarse el estado de la vía para más de un dispositivo, hay que programar el
número correspondiente de llamadas de FC en el programa de usuario.

Parámetro
Nombre:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Explicación:

Partner
INPUT
INT
1 ... 32000 (número de dispositivo)
N.º de dispositivo SINAUT del interlocutor

Nombre:
PathStatus
Declaración: OUTPUT
Tipo de datos: BYTE

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2159

Configuración de dispositivos y redes
1.4 Crear configuraciones
Rango de va‐ Bytes de salida
lores:
Bytes de marcas

Explicación:

QB0 ... QBn
PQB0 ... PQBn
MB0 ... MBn
LB0 ... LBn
Bytes de datos
DBm.DBB0 ... n
Indicador del estado de la vía de conexión hacia el interlocutor

PathStatus ‑ Codificación
Tabla 1-161 Codificación de los bits de estado en el byte de salida "PathStatus"
Bits 6 + 7

Bits 4 + 5

Bits 2 + 3

Interfaz configurada
N.º para vía sustitutiva

Bits 0 + 1

Estado de la vía

N.º para vía principal

Vía sustitutiva (2.ª
vía)

Vía principal (1.ª vía)

Interfaz configurada (bits 4..7)
Las interfaces del TIM están numeradas de 0 a 3 en el bloque; consulte la columna "N.º" de la
tabla. La tabla muestra la codificación de los bits para los diferentes tipos de TIM.
Tabla 1-162 Codificación de los bits 4 + 5 (interfaz de la vía principal) o los bits 6 + 7 (interfaz de la vía
sustitutiva)
Estado
del bit
5 (7)

Estado
del bit
4 (6)

Interfaces
N.º

0

0

0

0

1

1

1

0

2

1

1

3

TIM 3V‑IE

TIM 4R‑IE

TIM 1531 IRC

Ethernet "IE1" (X2)

Ethernet "IE1" (X3)

Ethernet "IE1" (X1)

Ethernet "IE2" (X4)

Ethernet "IE2" (X2)

Serie "WAN1" (X1)

Ethernet "IE3" (X3)

Serie "WAN2" (X2)

Serie "WAN" (X4)

‑
Serie "WAN1" (X1)
‑

Estado de la vía (bits 0..3)
● Vía principal = 1.ª vía (bits 0 + 1)
● Vía sustitutiva = 2.ª vía (bits 2 + 3)
Tabla 1-163 Tabla de estado: codificación de los bits 0 + 1 y los bits 2 + 3
Estado del
bit 1 (3)

2160

Estado del
bit 0 (2)

Significado del bit 1

Significado del bit 0

0

0

la vía no es actual

no se puede acceder al dispositivo

0

1

la vía no es actual

dispositivos accesibles

1

0

la vía es actual

no se puede acceder al dispositivo

1

1

la vía es actual

dispositivos accesibles

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

FC PulseCounter
Función
La FC PulseCounter se encarga de registrar impulsos de contaje.
A través de entradas digitales se registran un máximo de 8 secuencias de impulsos, que se
conducen mediante contadores SIMATIC hasta los bloques de función, los cuales elaboran los
telegramas de valores de contaje (Cnt01D_S, Cnt04D_S).
Los impulsos de contaje se registran con control de tiempo. Para ello debe integrarse la FC
PulseCounter en un OB de alarma cíclica, p. ej. OB35. El intervalo de llamada del OB de
alarma cíclica debe ajustarse a la duración de los impulsos de contaje. Encontrará más
información sobre el registro de impulsos de contaje mediante el OB de alarma cíclica en el
capítulo OB de alarma cíclica (Página 2040).

Parámetro
Nombre:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:

Explicación:

Nombre:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:

InByte
INPUT
BYTE
Bytes de entrada
Bytes de marcas

PIB0 ... PIBn
MB0 ... MBn
LB0 ... LBn
Bytes de datos
DBm.DBB0 ... n
Si se indica un byte de entrada de una entrada digital, debe ser la dirección del
byte de periferia (PIB) directamente de los módulos de entradas digitales. Solo
es posible registrar con seguridad el estado actual de una entrada de contaje
por medio del acceso directo.
En caso de leer de la memoria imagen de proceso de las entradas (IB) existe
la posibilidad de que algunos impulsos de contaje no se detecten.
Byte de entrada para impulsos de contaje
Las entradas para registro de impulsos de contaje pueden parametrizarse por
bytes.
EnableMask
INPUT
BYTE
B#16#00 ... B#16#FF

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2161

Configuración de dispositivos y redes
1.4 Crear configuraciones

2162

Explicación

Máscara de habilitación para las entradas de contaje
Este parámetro permite indicar en forma de máscara de bits las entradas del
byte de entrada a las que realmente hay conectados impulsos de contaje. Para
cada bit de la máscara rige lo siguiente:
● 0 = bit de entrada para el registro bloqueado
● 1 = bit de entrada para el registro habilitado
La máscara solo puede introducirse en formato hexadecimal B#16#00 a
B#16#FF.
En el tipo de datos BYTE no es posible la entrada en forma de número binario
de 8 bits de 2#0 a 2#1111 1111.
Asignación de los bits de la máscara a las entradas del byte de entrada "InByte":
InByte
.7
.6
.5
.4
.3
.2
.1
.0
EnableMask B#16#
0…F
0…F
Ejemplo:
EnableMask: B#16#83
Están habilitadas: Entradas .7, .1 y .0
Están bloqueadas: entradas .6 a .2

Nombre:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Explicación

CntIn_0 ... CntIn_7
INPUT
COUNTER
Z0 o Z1 ... Zn
(n depende de la CPU)
Contador de impulsos
Para cada una de las entradas de contaje habilitadas debe indicarse un con‐
tador SIMATIC con el parámetro correspondiente "CntIn_0" ... "CntIn_7". Con
cada impulso registrado se incrementa el contador SIMATIC.
Los contadores parametrizados aquí deben indicarse como contadores de en‐
trada en los bloques de función de valores de contaje "Cnt01D_S" y
"Cnt04D_S" (parámetro Counter_1 ... _4). Estos bloques de función leen el
contador asignado en cada caso y lo desactivan a continuación.
Como comodín para parámetros no necesarios se recomienda indicar el con‐
tador Z0.
Ejemplo de parametrización de "CntIn_0" ... "CntIn_7", partiendo de "EnableIn‐
Mask" = B#16#83:
CntIn_0 : = Z10
CntIn_1 : = Z11
CntIn_2 : = Z0
CntIn_3 : = Z0
CntIn_4 : = Z0
CntIn_5 : = Z0
CntIn_6 : = Z0
CntIn_7 : = Z12

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

FC ST7ObjectTest
Validez
CPU S7-300/400

Función
La llamada de la FC ST7ObjectTest en el OB121 de error de programación impide que la CPU
pase a STOP cuando recibe datos con un número de objeto de destino desconocido.
La FC ST7ObjectTest comprueba por qué se ha llamado el OB121, es decir, qué tipo de bloque
falta.
● Si el bloque que falta es un bloque de datos que, a su vez, es un DB de instancia de un
objeto SINAUT, la CPU no pasará a STOP.
● Si no falta ningún DB de instancia SINAUT sino otro bloque (DB, FB, FC), existe la
posibilidad de definir la reacción en el parámetro "StopInOtherCases":
– La CPU pasa a STOP.
– La CPU sigue funcionando.
Encontrará más detalles del OB121 de error de programación así como información de fondo
relacionada con el uso de la FC ST7ObjectTest en el capítulo OB de error de programación
(Página 2040).

Parámetro
Nombre:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:
Explicación:

StopInOtherCases
INPUT
BOOL
TRUE / FALSE
La CPU debe pasar a STOP en otros casos de error.
Consulte los detalles del parámetro más arriba, en el apartado "Función".
● TRUE: La CPU pasa a STOP.
● FALSE: La CPU sigue funcionando.

FC TestCopy
Función
La FC TestCopy permite copiar el tráfico de datos entre los dispositivos ST7 bien por completo
bien por extractos. Mediante máscaras de búsqueda ajustables en el campo de control del DB
TestCopyData es posible filtrar de forma selectiva determinados tipos de telegramas que,
seguidamente, se copian en el DB TestCopyData desde el búfer de transmisión o recepción
para su posterior evaluación. Consulte los detalles más abajo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2163

Configuración de dispositivos y redes
1.4 Crear configuraciones
Los telegramas de envío y recepción se copian en el mismo DB TestCopyData. Esto facilita la
clasificación cronológica de los telegramas de envío y recepción copiados.
Requisitos
Para utilizar la función TestCopy, el programa de usuario debe cumplir las condiciones
siguientes:
● La función FC TestCopy debe estar presente en la CPU.
● El DB TestCopyData debe estar presente en la CPU con una longitud suficiente.
– Para ello, copie el DB TestCopyData (DB99) de la librería TD7 a la CPU.
– En caso necesario, cambie en el DB la longitud del área de búfer aumentando o
reduciendo en DW40 el array "TestCopyBuffer", que tiene una longitud predefinida de
[0..240] WORD.
● Realice las entradas siguientes en el correspondiente DB de comunicación de la CPU
300/400 (BComData / XComData / PComData) cuyos telegramas de transmisión y/o
recepción desee escribir:
– Introduzca el número del DB TestCopyData en DW32 (TestCopyDBNo) del DB de
comunicación.
– Introduzca el número de la FC TestCopy en DW34 (TestCopyFCNo) del DB de
comunicación.
Proceda del mismo modo para el DB de comunicación de la CPU 1500. Las variables tienen
el mismo nombre en el DB BConnectData.
Integración de la FC TestCopy en el programa de usuario
Una vez se cumplan los requisitos citados anteriormente, la función de prueba se procesará
cíclicamente mediante el correspondiente FB de comunicación de la CPU.
La FC TestCopy no debe llamarse en el programa de usuario.
Observación de los datos escritos
Utilice la tabla de observación preelaborada "TestCopyMonitor", que puede copiarse de la
librería TD7 al directorio "Tablas de observación y forzado permanente" de la CPU.
Si los ajustes deben conservarse incluso después de iniciar la CPU, guárdelos directamente
en los valores de arranque de las diferentes instancias BConnection del DB BConnectData.

2164

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

DB TestCopyData
Estructura del DB TestCopyData
Áreas del DB TestCopyData
El DB para la función TestCopy está dividido en las siguientes áreas (por offset en el DB):
● 0 ... 27: interfaz de usuario
Interfaz para ajustar el modo de operación TestCopy y sus funciones. El área se divide en:
– 1 ... 13
Ajustes de filtrado para la función RecvCopy y número de telegramas de recepción
contados
– 15 ... 25
Ajustes de filtrado para la función SendCopy y número de telegramas de envío contados
● 28: indicador de error
● 31 ... 39: punteros de administración internos
● 40 ... (ajuste predeterminado: 523): área de búfer
Área de búfer para depositar telegramas que cumplen los criterios de filtrado.
El área de búfer debe configurarse como Array [0...xxxx] of WORD.
En la tabla siguiente se muestra la estructura del DB TestCopyData.
Tipo de datos /
(offset)

Nombre de las variables

Formato

Explicación

Interfaz de usuario
DBB

0

OperationMode

BYTE

Modo de operación

DBW

12

Recv_TgramCounter

INT

Número de telegramas de recep‐
ción copiados

DBW

26

Send_TgramCounter

INT

Número de telegramas de envío
copiados

Función RecvCopy
DBB

1

Recv_TgrmType

BYTE

Filtro de recepción: tipo de telegra‐
ma (TA)

DBW

2

Recv_DestSubscr

INT

Filtro de recepción: número de dis‐
positivo de destino

DBW

4

Recv_DestObject

INT

Filtro de recepción: número de ob‐
jeto de destino

DBW

6

Recv_SourceSubscriber

INT

Filtro de recepción: número de dis‐
positivo de origen

DBW

8

Recv_SourceObject

INT

Filtro de recepción: número de ob‐
jeto de origen

DBW

10

Recv_StartIndex

INT

Filtro de recepción: número de ín‐
dice de inicio

DBB

14

SpareDBB14

BYTE

Reserva

Send_TgrmType

BYTE

Filtro de envío: tipo de telegrama
(TA)

Función SendCopy
DBB

15

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2165

Configuración de dispositivos y redes
1.4 Crear configuraciones
Tipo de datos /
(offset)

Nombre de las variables

Formato

Explicación

DBW

16

Send_DestSubscr

INT

Filtro de envío: número de dispo‐
sitivo de destino

DBW

18

Send_DestObject

INT

Filtro de envío: número de objeto
de destino

DBW

20

Send_SourceSubscriber

INT

Filtro de envío: número de dispo‐
sitivo de origen

DBW

22

Send_SourceObject

INT

Filtro de envío: número de objeto
de origen

DBW

24

Send_StartIndex

INT

Filtro de envío: número de índice
de inicio

FC_RetVal

BYTE

Información de error:

Indicador de error
DBB

28

0 = ningún error
1 = DB TestCopyData demasiado
corto
10 = modo de operación descono‐
cido
DBB

29

SpareDBB29

BYTE

Reserva

DBB

30

SpareDBB30

BYTE

Reserva

Punteros de administración internos
DBB

31

TestCopyStatus

BYTE

Byte de estado para modo Test‐
Copy

DBB

32

TestCopyCmdByte

BYTE

Byte de comando para modo Test‐
Copy

DBB

33

TestCopyDelCount

BYTE

Contador de bucles para función
de borrado TestCopy

DBW

34

NextFreeCopyByte

INT

Dirección del próximo byte Test‐
CopyBuffer libre

DBD

36

StartTimeSFC64

DINT

Tiempo de SFC64 al iniciar la ope‐
ración de copia

Área de búfer
DBB

40

TestCopyBuffer[0]

BYTE

Área de copia, byte 0

DBB

41

TestCopyBuffer[1]

BYTE

Área de copia, byte 1

DBB

42

TestCopyBuffer[2]

BYTE

Área de copia, byte 2

DBB

43

TestCopyBuffer[3]

BYTE

Área de copia, byte 3

DBB

n

TestCopyBuffer[n]

BYTE

Área de copia, byte n

Estructura de un bloque de telegramas copiado
Un bloque de telegramas puede incluir varios telegramas. Los telegramas se depositan en el
DB TestCopyData de acuerdo con las reglas siguientes:
1. La primera entrada representa la diferencia de tiempo en milisegundos (7 décadas BCD
más signo) desde la última preselección de un modo de operación > 0.
2. A continuación viene el identificador de separación AAAA para telegramas enviados y
EEEE para telegramas recibidos.
3. Almacenamiento del primer telegrama del bloque

2166

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
4. Identificador de separación AAAA o EEEE
5. Almacenamiento del último telegrama del bloque
6. Identificador de fin del bloque FFFF
Ejemplo
● Todos los telegramas recibidos deben guardarse en el DB TestCopyData.
● La comunicación se lleva a cabo mediante bloques X, es decir, máx. 76 bytes por bloque
de recepción.
● El origen de la FC TestCopy es el buzón de recepción del DB XComData.
● El bloque de recepción actual contiene 3 telegramas.

'%;&RP'DWD
'%%

'%7HVW&RS\'DWD
'%%
'%%

%X]µQGHUHFHSFLµQ

'%%

'%:
'%%

'LIHUHQFLDGHWLHPSRHQWUHOD
KDELOLWDFLµQGHODIXQFLµQ
7HVW&RS\\HOVLJXLHQWHEORTXH
GHWHOHJUDPDV

,GHQWLILFDGRUGHVHSDUDFLµQ((((

7HOHJUDPD

'%%
7HOHJUDPD

'%:[[

,GHQWLILFDGRUGHVHSDUDFLµQ((((

7HOHJUDPD
7HOHJUDPD

'%:[[

,GHQWLILFDGRUGHVHSDUDFLµQ((((

7HOHJUDPD
7HOHJUDPD
,GHQWLILFDGRUGHILQGHOEORTXH))))

Figura 1-120

Ejemplo de cómo se llena el DB TestCopyData

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2167

Configuración de dispositivos y redes
1.4 Crear configuraciones

Cálculo de la longitud
Para calcular la longitud mínima del DB TestCopyData, la FC TestCopy utiliza los parámetros
siguientes:
Parámetro

Nombre del parámetro

Longitud

longitud del buzón de comunicación

LenComBuffer

76 o 202 bytes *

longitud de telegrama mínima

LenMinTgrm

14 bytes

offset del área administrativa

Offset

40 bytes

longitud de la diferencia de tiempo

Lendt

4 bytes

longitud del separados de bloques

LenTrenner

2 bytes

* 76 con comunicación X, 202 con comunicación B

La fórmula con la que se realiza el cálculo propiamente dicho es la misma para la comunicación
X y B. Los resultados solo son diferentes debido a la diferencia de longitud entre el buzón de
la comunicación X y B:
● Longitud en la comunicación X
LenMin_Xcom

=LenComBuffer + Offset + Lendt + (LenComBuffer / LenMinTgrm + 1) * LenTrenner
= 76 + 40 + 4 + (76 / 14 + 1) * 2
= 120 + 12 = 132 bytes mínimo

● Longitud en la comunicación B
LenMin_Bcom

=LenComBuffer + Offset + Lendt + (LenComBuffer / LenMinTgrm + 1) * LenTrenner
= 202 + 40 + 4 + (202 / 14 + 1) * 2
= 236 + 40 = 276 bytes mínimo

Si la FC TestCopy determina que el DB TestCopyData no presenta la longitud mínima
calculada, se registra un mensaje de error al respecto en el byte de datos DBB28.

Manejo de TestCopyMonitor
Modos de operación y sentidos de transferencia del DB TestCopyData
En el byte 0 (OperationMode) del DB TestCopyData se codifica el modo de operación de la FC.
Los valores 0 ... 3 identifican el modo de operación:
● Modo de operación 0
Función bloqueada
● Modo de operación 1
Entrada de telegramas desde el principio del DB TestCopyData
● Modo de operación 2
DB TestCopyData escrito sin fin como búfer circular
● Modo de operación 3
Llenado único del DB TestCopyData, a continuación ajustar el modo de operación 0.
Encontrará la codificación detallada en la tabla inferior.

2168

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Junto con el modo de operación, la codificación del DBB0 incluye el sentido de la transferencia
de los datos registrados. La codificación tiene la asignación siguiente:
● Bits 0...3
Modos de operación (0, 1, 2, 3) para el sentido "RecvCopy" (escribir telegramas de
recepción)
● Bits 4...7
Modos de operación (0, 1, 2, 3) para el sentido "SendCopy" (escribir telegramas de envío)
Bit
Sentido

.7

.6

.5

.4

.3

SendCopy

.2

.1

.0

RecvCopy

Las funciones "SendCopy" y "RecvCopy" pueden activarse individualmente o al mismo tiempo,
aunque solo es posible un modo de operación común para los dos sentidos de la comunicación.
Si en el medio byte menos significativo esté ajustado un modo de operación > 0, este es
siempre determinante para los dos sentidos de la comunicación.
El valor de los bits 4...7 (SendCopy) solo se aplica si está codificado el modo de operación 0
en los bits 0...3 (RecvCopy).
Excepción:
para borrar el DB TestCopyData, DBB0 debe escribirse con FF, 0F no es suficiente.
Ejemplos de codificación de DBB0:
● 00h
No hay ninguna función TestCopy activada
● 03h
Solo función RecvCopy (OperationMode = 3), ninguna función SendCopy.
● 30h
Solo función SendCopy (OperationMode = 3), ninguna función RecvCopy.
● 33h
Función RecvCopy y función SendCopy (OperationMode = 3)
● FFh
Borrar el contenido del DB TestCopyData

Ajustes de filtrado mediante TestCopyMonitor
La FC TestCopy debe operarse desde una tabla de observación, que está preelaborada en la
librería TD7 como "TestCopyMonitor".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2169

Configuración de dispositivos y redes
1.4 Crear configuraciones
Utilizando la tabla de observación es posible realizar los ajustes siguientes en el DB TestCopy:
Nombre (símbolo)

Valores admisi‐
bles (hex.)

Significado

OperationMode

00

Modo de operación 0: Función bloqueada

11

Modo de operación 1: Entrada de telegramas siempre
desde el principio del DB TestCopyData

22

Modo de operación 2: DB TestCopyData escrito sin fin
como búfer circular

02

● Escritura para función SendCopy

20

● Escritura para función RecvCopy

33

Modo de operación 3: Llenado único del DB TestCopy‐
Data, a continuación ajustar el modo de operación 0.

03

● Llenado para función SendCopy

30

● Llenado para función RecvCopy

FF

Borrado del DB TestCopyData completo y restableci‐
miento de los ajustes predeterminados

El valor de salida que suministra la FC TestCopy en DBW12 (Recv_TgramCounter) del DB
TestCopyData es un valor de contaje para los telegramas de recepción que cumplen los
criterios de filtrado y que han llegado desde que se ajustó el modo de operación 1, 2 o 3.
En DBW26 (Sendcv_TgramCounter) se registra el número de telegramas de envío.
En DBB28, el usuario recibe un valor de retorno que informa de los errores ocurridos durante
el procesamiento de la FC:
● FC_RetVal = 0
Ningún error
● FC_RetVal = 1
El DB TestCopyData indicado es demasiado corto.
● FC_RetVal = 10d
El modo de operación introducido en DBB0 no está definido.
También están disponibles los siguientes filtros especiales para la función RecvCopy o
SendCopy:

2170

Nombre (símbolo) *

Valores admisi‐
bles (hex.)

Significado

Xxxx_TgrmType

FF

Copiar todos los tipos de telegrama (TA) en el DB Test‐
CopyData

00

Copiar solo telegramas organizativos espontáneos (TA
= 0)

11

Copiar solo telegramas organizativos consultados (TA =
1)

22

Copiar solo telegramas de datos espontáneos (TA = 2)

33

Copiar solo telegramas de datos consultados (TA = 3)

01

Copiar telegramas organizativos con TA = 0 o 1

23

Copiar telegramas de datos con TA = 2 o 3

Cualquier combi‐
nación

Copiar cualquier combinación de 0, 1, 2 y 3

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Nombre (símbolo) *

Valores admisi‐
bles (hex.)

Significado

Xxxx_DestSubscr

Todos los disposi‐
tivos admisibles

Filtro por número de dispositivo de destino en el telegra‐
ma

-1

Copiar todos los telegramas independientemente del nú‐
mero de dispositivo de destino

Todos los objetos
admisibles

Filtro por número de objeto de destino en el telegrama de
datos

-1

Copiar todos los telegramas de datos independiente‐
mente del número de objeto de destino

Todos los disposi‐
tivos admisibles

Filtro por número de dispositivo de origen en el telegrama

-1

Copiar todos los telegramas independientemente del nú‐
mero de dispositivo de origen

Todos los objetos
admisibles

Filtro por número de objeto de origen en el telegrama de
datos

-1

Copiar todos los telegramas de datos independiente‐
mente del número de objeto de origen

Todos los índices
admisibles

Filtro por número de índice de inicio en el telegrama de
datos

-1

Copiar todos los telegramas de datos independiente‐
mente del número de índice de inicio

Xxxx_DestObject

Xxxx_SourceSubscr

Xxxx_SourceObject

Xxxx_StartIndex

* "Xxxx": Comodín para "Recv" y "Send"

Las variables de filtro deseadas pueden complementarse fácilmente con los nombres de
variables del DB TestCopy.
Indicaciones relativas al manejo
Al cambiar de un modo de operación a otro, el contenido del DB no se borra. Simplemente se
desactivan punteros internos y contadores de telegramas en el área administrativa del DB
TestCopyData. Por este motivo, al cambiar el modo de operación se recomienda pasar por la
función de borrado "FF" para ocupar el área de búfer de telegramas con 0. Esto facilita la
legibilidad de los bloques de telegramas copiados.
Si deben copiarse telegramas de envío y recepción, en el medio byte izquierdo del parámetro
"OperationMode" debe introducirse el mismo modo de operación que en el medio byte derecho.
Se aplica el esquema siguiente para los modos de operación 0, 1, 2 y 3:
● Si debe borrarse el búfer, hay que introducir siempre FFh.
● No es posible borrar por separado los telegramas de envío y recepción.

FC TimeTask
Función
La FC TimeTask se encarga de una gestión continua de la fecha y la hora en una CPU. La FC
no tiene parámetros.
Integre la FC en el programa de usuario (OB1), a continuación de la FC BasicTask.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2171

Configuración de dispositivos y redes
1.4 Crear configuraciones
Para utilizar la FC TimeTask es imprescindible que la CPU sea sincronizada por un TIM local.
Active la sincronización horaria en el módulo TIM afectado.
Tras el arranque de la CPU, el TIM proporciona por primera vez la fecha y la hora actual
mediante un telegrama organizativo. Seguidamente se lleva a cabo la sincronización horaria
en el intervalo de tiempo especificado en la configuración del TIM. Para la sincronización
horaria en MPI/Partyline se recomienda un intervalo de un minuto. La FC TimeTask ajusta la
hora de la CPU con la hora recibida del TIM.
La FC lee la hora en cada ciclo del OB1. La hora leída se deposita en las dos primeras palabras
dobles del DB BasicData y se marca como válida o no válida y como horario de verano o de
invierno.
Del DB BasicData toman la hora actual todos los bloques, si es que la necesitan. Esto lo hacen,
p. ej., los typicals de puntos de datos para poner un sello de tiempo a sus telegramas, o la FC
Trigger para comprobar si se ha alcanzado un instante parametrizado o ha finalizado un
período predefinido. Esta hora también está a disposición del programa de usuario.
Tabla 1-164 Ocupación de las palabras de datos con fecha, hora y estado de la hora

CurrentDate

CurrentTime

Byte de datos 0
Byte de datos 1
Byte de datos 2
Byte de datos 3
Byte de datos 4
Byte de datos 5
Byte de datos 6
Byte de datos 7

Año * 10
Mes * 10
Día * 10
Hora * 10
Minuto * 10
Segundo * 10
Milisegundos * 100
Milisegundos * 1

Año * 1
Mes * 1
Día * 1
Hora * 1
Minuto * 1
Segundo * 1
Milisegundos * 10
Estado de la hora

Tabla 1-165 Asignación del semibyte "Estado de la hora"

0
1
2
3

0 = fecha y hora no válidas
1 = fecha y hora válidas
0 = horario de invierno (hora normal)
1 = horario de verano
(libre)
(libre)

Aparte del estado de la hora, también es posible comprobar si la fecha y la hora son válidas con
el bit de datos 16.1 "CpuClockOk". En cuanto la hora de la CPU es válida, la FC TimeTask pone
este bit a 1. En el programa de usuario puede consultarse este bit directamente con el nombre
simbólico "BasicData.CpuClockOk".

FC Trigger
Función
La FC activa una salida (marca, bit de datos o salida digital) en un instante parametrizable o en
un período predefinido.

2172

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
La FC desactiva de nuevo la salida tras un ciclo del OB1.
La FC puede llamarse en cualquier lugar del programa de usuario cíclico (OB1), incluso varias
veces.
Si la ejecución de una parte del programa o de una función de software debe lanzarse por
medio de la FC Trigger, se recomienda llamar la FC Trigger justo antes de ejecutar dicha
función. Para lanzar funciones sobre la base de la marca activada por la FC Trigger pueden
utilizarse las aplicaciones siguientes, por ejemplo:
● Ejecución de una función
● Llamada de un bloque
● Lanzamiento de una transferencia de valor de contaje cada 2 horas
Si deben activarse varias funciones en el mismo instante, puede conseguirse con un bloque
FC Trigger, siempre que todas las funciones consulten la misma marca activada por la FC. Sin
embargo, esto solo funciona si las funciones lanzadas no desactivan esta marca por su cuenta.
Solución en el caso de que los bloques desactiven la marca:
● Debe llamarse la FC Trigger con más frecuencia, cada vez con el mismo tiempo pero una
marca de salida distinta.
● Después de llamar la FC Trigger debe multiplicarse la marca de salida activada en el
número correspondiente de marcas adicionales.
La FC accede a la hora SINAUT en las dos primeras palabras dobles de datos del DB
BasicData. Estas reciben datos de forma continua cuando se ha integrado una FC TimeTask
en el programa de usuario y este se sincroniza regularmente desde un TIM local. La FC Trigger
solo compara el tiempo que tiene parametrizado con la hora actual cuando la hora está
marcada como válida en el DB BasicData, byte de datos 7 (byte de estado de la hora, bit 0 =
1).
La precisión con la que trabaja la FC Trigger depende de la precisión de la hora y del tiempo
de ciclo del OB1.
Si el tiempo de ciclo del OB1 es inferior a 1 segundo (que será lo normal), la salida se activa
exactamente en el valor de segundo programado, con la imprecisión del tiempo de ciclo del OB
1 inferior a 1 s.
Si el tiempo de ciclo del OB1 es mayor que 1 segundo, la FC trabaja con una tolerancia de 4
segundos. Si la FC se procesa tarde pero dentro de los 4 segundos posteriores al instante
parametrizado, la salida también se activará.
La marca de flanco parametrizada en la FC "Flag" se activa al mismo tiempo que la salida y se
desactiva 5 segundos después del instante parametrizado.
Para la marca de flanco no debe utilizarse ningún parámetro comodín ni debe ser desactivada
por el programa de usuario.
Encontrará ejemplos de parametrización de la FC Trigger más adelante.

Parámetro
Nombre:
IntervalMode
Declaración: INPUT

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2173

Configuración de dispositivos y redes
1.4 Crear configuraciones
Tipo de da‐ BOOL
tos:
Rango de va‐ TRUE / FALSE
lores:
Explicación Instante / período
● FALSE = instante
● TRUE = período
Encontrará ejemplos de parametrización de instantes o períodos a continua‐
ción de la explicación de los parámetros.
Nombre:
Declaración:
Tipo de da‐
tos:
Explicación

Hour_Minute
INPUT
WORD

Nombre:
Declaración:
Tipo de da‐
tos:
Explicación

Second_Day
INPUT
WORD

Nombre:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:

Month_Year
INPUT
WORD

Explicación

2174

Indicación de los valores de horas y minutos.
Explicación complementaria: Consulte el parámetro "Month_Year".

Indicación de los valores de segundos y día.
Explicación complementaria: Consulte el parámetro "Month_Year".

● 00 ... 99
● FF
Indicación de los valores de mes y año
Cada parámetro está dividido en dos. Cada uno de los dos valores de cada
parámetro se indica con dos cifras, concretamente como valor en código BCD.
● Las dos primeras cifras definen el valor de horas, segundos o mes.
● Las otras dos cifras definen el valor de minutos, día o año.
Las partes de los parámetros que no se necesitan deben parametrizarse con
FF.
Los parámetros admisibles dependen del parámetro correspondiente y del
parámetro "IntervalMode". Encontrará más información al respecto a continua‐
ción de la explicación de los parámetros.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Nombre:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:

Explicación

Nombre:
Declaración:
Tipo de da‐
tos:
Rango de va‐
lores:

Explicación

TriggerOutput
OUTPUT
BOOL
Salida
Marca

Q 0.0 ... I n.7
M 0.0 ... M n.7
L 0.0 ... L n.7
DBm.DBX 0.0 ... n.7

Bit de datos
Salida de disparo
La salida se activa durante un ciclo del OB1 cuando se alcanza el instante o
período parametrizado desde "Hour" hasta "Year".
Flag
IN_OUT
BOOL
Marca
M 0.0 ... M n.7
Bit de datos
DBm.DBX 0.0 ... n.7
El parámetro es de entrada/salida (declaración IN_OUT). Para este parámetro
es un problema indicar marcas locales, por lo que no debería utilizarse.
Marca de flanco para la salida "TriggerOutput"
No está permitido indicar marcas comodín.
No está permitido que el usuario desactive la marca de flanco.

Ejemplos de parametrización de un instante o período
IntervalMode = FALSE (o 0)
La FC trabaja según el principio de instantes. Cuando se alcanza el instante parametrizado, la
salida "TriggerOutput" se activa durante un ciclo del OB1.
Para indicar el instante pueden utilizarse todos los parámetros de tiempo. Los parámetros que
no se necesitan deben ocuparse con FF. No se tienen en cuenta cuando se comprueba si se
ha alcanzado el instante.
Aunque "IntervalMode = 0" es posible ajustar períodos en determinados rangos; consulte los
ejemplos siguientes.
Rangos de valores admisibles para los parámetros de tiempo:
Horas
Minutos
Segundos

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

00-23
00-59
00-59

Día
Mes
Año

01-31
01-12
00-99

2175

Configuración de dispositivos y redes
1.4 Crear configuraciones
Ejemplos:
● IntervalMode = FALSE
La salida "TriggerOutput" se activa una vez el 04.02.91 a las 06:45:12:
– Hour_Minute : W#16#0645
– Second_Day : W#16#1204
– Month_Year : W#16#0291
● IntervalMode = FALSE
La salida "TriggerOutput" se activa cada día a las 06:00:00:
– Hour_Minute : W#16#0600
– Second_Day : W#16#00FF
– Month_Year : W#16#FFFF
● IntervalMode = FALSE
La salida "TriggerOutput" se activa el día 1 de cada mes a las 06:00:00:
– Hour_Minute : W#16#0600
– Second_Day : W#16#0001
– Month_Year : W#16#FFFF
● IntervalMode = FALSE
La salida "TriggerOutput" se activa el 1 de octubre de cada año a las 06:00:00:
– Hour_Minute : W#16#0600
– Second_Day : W#16#0001
– Month_Year : W#16#10FF
IntervalMode = TRUE (o 1)
La FC trabaja según el principio de períodos. Cuando se alcanza el valor de tiempo
parametrizado o un múltiplo del mismo, la salida "TriggerOutput" se activa durante un ciclo del
OB1.
Solo son relevantes las indicaciones de horas, minutos y segundos. Los parámetros de fecha
no se consideran. Además, un período solo puede parametrizarse en horas, minutos o
segundos. Todos los parámetros de tiempo que no se necesitan deben ocuparse con FF.
Se admiten los períodos siguientes:
● Horas: 01, 02, 03, 04, 06, 08, 12, 24
● Minutos: 01, 02, 03, 04, 05, 06, 10, 12, 15, 20, 30, 60
● Segundos: 10, 12, 15, 20, 30, 60

2176

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Ejemplos:
● IntervalMode : TRUE
La salida "TriggerOutput" se activa, concretamente:
– Hour_Minute : W#16#06FF (cada 6 horas)
– Second_Day : W#16#FFFF (a las 00:00:00, 06:00:00, 12:00:00 horas y ...)
– Month_Year : W#16#FFFF (... a las 18:00:00 horas)
● IntervalMode : TRUE
La salida "TriggerOutput" se activa, concretamente:
– Hour_Minute : W#16#FF30
– Second_Day : W#16#FFFF (a las 00:00:00, 00:30:00, 01:00:00 horas y ...)
– Month_Year : W#16#FFFF (... a las 01:30:00, 02:00:00, 02:30:00 horas, etc.)

Mensaje de error durante el arranque
La FC comprueba cada ciclo si los parámetros Hour_Minute, Second_Day y Month_Year
cumplen los rangos de valores admisibles. Los valores admisibles en cada caso dependen
también del parámetro "IntervalMode".
En caso de parametrización errónea, solo durante el arranque se registra un mensaje de error
en el búfer de diagnóstico (ID de evento B113). La CPU no pasa a STOP. A continuación, la
FC comprueba los parámetros, sin emitir mensajes de error, hasta que se ha solucionado el
error.
El aviso de diagnóstico proporciona una descripción exacta del parámetro erróneo (número
correlativo del parámetro, es decir, 2, 3 o 4). Las causas del aviso de diagnóstico dependen del
parámetro "IntervalMode".
IntervalMode = FALSE (o 0)
Los rangos de valores admisibles para los parámetros de horas, minutos, segundos, días, mes
y año no se cumplen. Aparte de FF es posible parametrizar:
Horas
Minutos
Segundos

00-23
00-59
00-59

Día
Mes
Año

01-31
01-12
00-99

"IntervalMode" = TRUE (o 1)
En este caso, el error puede tener dos causas distintas:
● Los rangos de valores admisibles para los parámetros de horas, minutos y segundos no se
cumplen. Aparte de FF es posible parametrizar:
– Horas: 01, 02, 03, 04, 06, 08, 12, 24
– Minutos: 01, 02, 03, 04, 05, 06, 10, 12, 15, 20, 30, 60
– Segundos: 10, 12, 15, 20, 30, 60
● Un período solo puede parametrizarse en horas, minutos o segundos. Los dos parámetros
no utilizados deben escribirse con FF. Hay un error también cuando los tres parámetros
citados se han rellenado con FF.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2177

Configuración de dispositivos y redes
1.4 Crear configuraciones

System blocks
FC BasicTask_*
Variantes del bloque
El bloque está disponible en las variantes siguientes para los diferentes tipos de CPU:
● BasicTask_B
Para CPU S7‑1500
El bloque para la CPU S7‑1500 no puede utilizarse para la CPU S7‑400.
● BasicTask_B
Para CPU S7‑400
El bloque para la CPU S7‑400 no puede utilizarse para la CPU S7‑1500.
● BasicTask_X
Para CPU S7‑300 con línea compartida
● BasicTask_P
Para CPU S7‑300 sin línea compartida
Consulte la "línea compartida" en el glosario.
Las tareas de las diferentes FC "BasicTask_*" para procesar las tareas de comunicación
básicas son idénticas en el respectivo tipo de CPU. El parámetro único de la FC es idéntico en
cada caso.
Al generar TD7onCPU se crea automáticamente la FC correcta en la respectiva CPU.

Función
El bloque se necesita en todas las CPU. Se encarga de las tareas siguientes:
● Tareas centrales durante el arranque
● El procesamiento de todos los buzones de comunicación
● Tareas organizativas centrales, como iniciar, vigilar y responder consultas generales.
Llame la FC BasicTask como primer bloque del OB1.

Parámetro
Nombre:
UserFC
Declaración: INPUT
Tipo de datos: INT

2178

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Rango de va‐ ● 1 ... 32000
lores:
Número de la FC
El número máximo posible depende de la CPU.
● 0
Valor sustitutivo en caso de que no haya ninguna FC para la finalidad
indicada.
Explicación: Número de una FC de usuario para el procesamiento posterior específico de
los datos recibidos
Si se ha indicado una FC, esta se llamará automáticamente desde el progra‐
ma de usuario cada vez que se reciban datos. En el instante de la llamada, el
telegrama de recepción se encuentra todavía en el buzón de recepción del DB
de comunicación.
El programa de la FC de usuario puede leer el telegrama de recepción del
buzón de recepción y procesarlo como sea necesario, p. ej. escribir los datos
recibidos en un búfer intermedio.
Mediante el programa de usuario es posible leer la información necesaria
sobre el DB de comunicación desde el DB BasicData utilizando la variable
"CurrentComDB" de DW60. CurrentComDB contiene la información siguiente:
● S7‑1500
Índice de la instancia BConnection actual del DB BConnectData
● S7‑300/400
Número del DB de comunicación actual
Con el DB de comunicación abierto, con la variable "CurrentReceivedMessa‐
ge" de DW10 es posible encontrar el principio del telegrama de recepción
actual en el buzón de recepción.

DB BasicData
Este bloque de datos se encarga de la gestión de datos centralizada. Contiene información que
debe estar preparada para todos los bloques en un lugar central. El bloque de datos contiene,
entre otros, la contabilidad de los dispositivos y las descripciones de las conexiones.
El DB BasicData se genera automáticamente con la longitud necesaria y ya incluye los datos
específicos de los dispositivos y las conexiones; seguidamente, se guarda en el directorio de
bloques de la CPU.
El DB BasicData está presente una vez en cada CPU.
Nota
Número del DB BasicData
El DB BasicData tiene el número DB127 en la librería TD7 y se guarda también con este
número a la hora de generar estos DB para las diferentes CPU. En principio sería posible
cambiar el número, pero es relativamente complicado y es posible que se produzcan errores
al seguir elaborando el programa de usuario.
Por este motivo, se recomienda dejar libre el número de DB 127 para el DB BasicData, siempre
que sea posible.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2179

Configuración de dispositivos y redes
1.4 Crear configuraciones

FC Create
Bloque auxiliar para elaborar datos que deben enviarse e introducirlos en las instancias
relevantes de los buzones de envío (array SendBuffer) del DB de comunicación
correspondiente. Son los DB siguientes:
● S7‑1500
DB BConnectData > BConnection[n]
● S7‑400
DB BComDataXX
● S7‑300
– DB XComDataXX
o bien
– DB PComDataXX
XX es el comodín para el número correlativo (01, 02, ...).
La FC Create se necesita en los typicals de puntos de datos para telegramas de datos y
organizativos y en la FC BasicTask solo para telegramas organizativos.

FC Diagnose / Diagnostics
Nombre del bloque:
● Para S7-300: FC Diagnose
● Para S7-1500: FC Diagnosis
Bloque auxiliar para introducir avisos de sistema SINAUT en el búfer de diagnóstico de la CPU.

FC Distribute
Bloque auxiliar para distribuir los datos que se encuentran en el buzón de recepción entre los
typicals de puntos de datos correspondientes o entre los objetos de dispositivo de la
contabilidad de dispositivos.

FC Search
Bloque auxiliar para las siguientes tareas de búsqueda:
● Búsqueda de la dirección inicial de un objeto de dispositivo dentro de la contabilidad de
dispositivos
● Búsqueda del número de objeto local (DB de instancia) en una de las dos listas de
referencia de objetos para un telegrama de recepción con dirección de destino incompleta
El bloque auxiliar se necesita en casi todos los bloques.

FC Startup
El bloque se necesita en todas las CPU. Debe integrarse en el programa de arranque OB100.
El bloque tiene la tarea de activar la marca de arranque en el DB BasicData y desactivar la
marca de flanco correspondiente, en caso de que todavía esté activada.

2180

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
El bloque no tiene parámetros.

System blocks - BCom
FB BCom
Validez
● S7-1500
● S7-400
El bloque para la CPU S7‑400 no puede utilizarse para la CPU S7‑1500 y viceversa. Las tareas
de las dos FC son idénticas.

Función
Bloque auxiliar para la FC BasicTask_B que permite procesar un buzón de comunicación del
tipo DB BConnectData (S7‑1500) y DB BComData (S7‑400).
Mediante el DB se desarrolla una conexión PBK configurada (comunicación de bloques
programada) utilizando los SFB "BSEND" y "BRCV".
El FB BCom también se encarga de que los telegramas de recepción se distribuyan
inmediatamente a los objetos de recepción correspondientes de la CPU. Para ello, el FB BCom
llama la FC Distribute como bloque auxiliar.

DB BComData
Validez
S7-400

Función
Bloque de datos de instancia para el bloque de comunicación FB BCom. El DB de instancia
representa el buzón de comunicación y contiene, entre otros:
● un buzón de recepción (ReceiveBuffer)
● un buzón de envío (SendBuffer)
Asimismo, contiene datos centralizados necesarios para controlar y administrar la conexión
PBK que pasa por este buzón de comunicación.
El bloque de datos se necesita en todas las CPU en las que se utiliza el FB BCom. Si desde
la CPU se gestionan varias conexiones PBK, el DB se necesita varias veces.
El DB BComData se genera automáticamente con la longitud necesaria y ya incluye los datos
específicos de las conexiones; seguidamente, se guarda en el directorio de bloques de la CPU.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2181

Configuración de dispositivos y redes
1.4 Crear configuraciones

FB BConnect
Validez
S7-1500

Función
Bloque auxiliar para la FC BasicTask que permite procesar las conexiones con los
interlocutores de la comunicación.

DB BConnectData
Validez
S7-1500

Función
Bloque de datos de instancia para el bloque de comunicación FB BCom. El DB de instancia
representa el buzón de comunicación y contiene, entre otros:
● un buzón de recepción (ReceiveBuffer)
● un buzón de envío (SendBuffer)
Asimismo, contiene datos centralizados necesarios para controlar y administrar la conexión
PBK que pasa por este buzón de comunicación.
El bloque de datos se necesita en todas las CPU en las que se utiliza el FB BCom. Si desde
la CPU se gestionan varias conexiones PBK, el DB se necesita varias veces.
El DB BComData se genera automáticamente con la longitud necesaria y ya incluye los datos
específicos de las conexiones; seguidamente, se guarda en el directorio de bloques de la CPU.

System blocks - PCom
FB PCom
Validez
CPU S7‑300 sin línea compartida
El FB PCom se utiliza únicamente para la comunicación a través del bus P. Esto afecta la
comunicación entre un TIM y una CPU con bus P.

2182

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Función
Bloque auxiliar para la FC BasicTask_P que permite procesar un buzón de comunicación del
tipo DB PComData utilizando las SFC WR_REC y RD_REC.
Los telegramas de recepción también se distribuyen inmediatamente a los objetos de
recepción correspondientes de la CPU. Para ello, el FB PCom llama la FC Distribute como
bloque auxiliar.

DB PComData
Bloque de datos de instancia para el bloque de comunicación FB PCom. El DB de instancia
representa el buzón de comunicación y contiene:
● un buzón de recepción (ReceiveBuffer)
● un buzón de envío (SendBuffer)
Asimismo, contiene datos centralizados necesarios para controlar y administrar la conexión
que pasa por este buzón de comunicación.
El bloque de datos se necesita en todas las CPU en las que se utiliza el FB PCom. Si desde
la CPU se gestionan varias conexiones correspondientes, el DB se necesita varias veces.

System blocks - XCom
FB XCom
Validez
CPU S7‑300 con línea compartida

Función
Bloque auxiliar para la FC BasicTask_X que permite procesar un buzón de comunicación del
tipo DB XComData.
Mediante el DB BComData se desarrolla una conexión configurada (conexión PBK) utilizando
las SFC "X_SEND" y "X_RCV".
El FB XCom también se encarga de que los telegramas de recepción se distribuyan
inmediatamente a los objetos de recepción correspondientes de la CPU. Para ello, el FB XCom
llama la FC Distribute como bloque auxiliar.

DB XComData
Bloque de datos de instancia para el bloque de comunicación FB XCom. El DB de instancia
representa el buzón de comunicación y contiene:
● un buzón de recepción (ReceiveBuffer)
● un buzón de envío (SendBuffer)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2183

Configuración de dispositivos y redes
1.4 Crear configuraciones
Asimismo, contiene datos centralizados necesarios para controlar y administrar la conexión X
que pasa por este buzón de comunicación.
El bloque de datos se necesita en todas las CPU en las que se utiliza el FB XCom. Si desde
la CPU se gestionan varias conexiones X, el DB se necesita varias veces.
El DB XComData se genera automáticamente con la longitud necesaria y ya incluye los datos
específicos de las conexiones; seguidamente, se guarda en el directorio de bloques de la CPU.

1.4.7

SCALANCE X, W y M

1.4.7.1

Configuración de SCALANCE X/W/M

Nota legal
Personal cualificado
El producto o sistema al que se refiere la presente documentación solo debe ser manejado por
personal cualificado para la tarea correspondiente observando la documentación relacionada
con la tarea en cuestión, especialmente las consignas de seguridad y advertencias incluidas
en la misma. Por su formación y experiencia, el personal cualificado está capacitado para
reconocer riesgos durante el manejo de estos productos o sistemas y evitar posibles peligros.

Nota para descargar los datos de configuración
Al realizar una descarga local en el dispositivo SCALANCE no se acepta la contraseña
predeterminada de fábrica.
● Modifique la contraseña predeterminada desde el WBM o la CLI.

Configurar SCALANCE X
Funciones de sistema
Disponibilidad de las funciones de sistema
La tabla siguiente muestra la disponibilidad de las funciones de sistema en los IE Switches.
Recuerde que en la Ayuda en pantalla se describen todas las funciones. Según sea el IE
Switch utilizado, algunas funciones no estarán disponibles.

2184

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Salvo modificaciones técnicas

Infor‐
ma‐
ción

SCALAN‐
CE
XB-200

SCA‐
LANCE
XC-200

SCALAN‐
CE
XP-200

SCA‐
LANCE
XF-200B
A

SCA‐
LANCE
XR-300
WG

SCALAN‐
CE
XM-400/
SCALAN‐
CE
XR-500

Tabla ARP

✓

✓

✓

✓

✓

✓

Tabla de registro

✓

✓

✓

✓

✓

✓

Estadísticas de Ether‐ ✓
net

✓

✓

✓

✓

✓

Diagnóstico (tempe‐
ratura)

-

✓

✓

✓

✓

✓

Fun‐
DNS
ciones Cliente SMTP
de sis‐
Cliente DHCP
tema
Servidor DHCP

-

-

-

-

-

✓

✓

✓

✓

✓

✓

✓

✓

✓

✓

✓

✓

✓

✓

✓

SNMP

✓

✓

✓

✓

✓

✓

Ajuste manual de la
hora

✓

✓

✓

✓

✓

✓

DST

-

✓

✓

✓

-

✓

SNTP

✓

✓

✓

✓

✓

✓

NTP

✓

✓

✓

✓

✓

✓

SIMATIC Time Client

✓

✓

✓

✓

✓

✓

PTP

-

-

-

-

-

✓ 1)

Cierre de sesión auto‐ ✓
mático

✓

✓

✓

✓

✓

Cliente Syslog

✓

✓

✓

✓

✓

✓
✓

✓

2)

✓
2)

✓

Control de errores

✓

✓

✓

✓

✓

✓

PROFINET

✓

✓

✓

✓

✓

✓

EtherNet/IP

✓

✓

✓

✓ 4)

✓

-

PLUG

-

Diagnóstico de puerto ✓

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

✓

✓

✓

-

✓

✓

✓

✓

✓

✓

2185

Configuración de dispositivos y redes
1.4 Crear configuraciones

Fun‐
ciones
de La‐
yer 2

2186

SCALAN‐
CE
XB-200

SCA‐
LANCE
XC-200

SCALAN‐
CE
XP-200

SCA‐
LANCE
XF-200B
A

SCA‐
LANCE
XR-300
WG

SCALAN‐
CE
XM-400/
SCALAN‐
CE
XR-500

Prioridades de envío

-

✓

✓

✓

-

-

Asignación CoS

✓

✓

✓

✓

✓

✓

Asignación DSCP

✓

✓

✓

✓

✓

✓

Priorización QoS

✓

✓

✓

✓

✓

✓

Reasignación de
puertos CoS

-

✓

✓

✓

-

-

Control de carga

✓

✓

✓

✓

✓

✓

GVRP

-

✓

✓

✓

-

✓

Modo Base Bridge
(VLAN)

✓

✓

✓

✓

✓

-

VLAN basada en
puerto

✓

✓

✓

✓ 4)

✓

✓

Private VLAN

-

✓

✓

-

-

✓

Bridge del proveedor
(modo Bridge)

-

✓

✓

✓

-

✓

Switch-Port VLAN
Trunk

-

✓

✓

✓ 4)

-

✓

Grupo VLAN basado
en protocolo

-

-

-

-

-

✓

Puerto VLAN basado
en protocolo

-

-

-

-

-

✓

VLAN basada en su‐
bred IPv4

-

-

-

-

-

✓

Mirroring basado en
puerto

✓

✓

✓

✓

✓

✓

RSPAN

-

-

-

-

-

✓

Duplicado basado en
VLAN

-

-

-

-

-

✓

Duplicado MAC Flow

-

-

-

-

-

✓

Duplicado IP Flow

-

-

-

-

-

✓

Dynamic MAC Aging

✓

✓

✓

✓

✓

✓

Redundancia en ani‐
llo

✓

✓

✓

✓

✓

✓

Interconexión MRP

-

-

-

-

-

✓

Soporte de H-Sync

-

✓

Dispositivos S2

-

✓

Soporte de CiR/HCiR

-

Standby (HRP)

✓

✓

4)

-

-

✓

✓ 4)

-

-

✓

✓

✓ 4)

-

-

✓

✓

✓

✓ 4)

✓

✓

Observer (HRP)

-

✓

✓

✓

-

✓

Link Check

✓

✓

-

✓

Spanning Tree

✓

✓

✓

✓

4)

✓

✓

✓

✓

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Fun‐
ciones
de La‐
yer 3

SCALAN‐
CE
XB-200

SCA‐
LANCE
XC-200

SCALAN‐
CE
XP-200

SCA‐
LANCE
XF-200B
A

SCA‐
LANCE
XR-300
WG

SCALAN‐
CE
XM-400/
SCALAN‐
CE
XR-500

RSTP

✓

✓

✓

✓

✓

✓

MSTP

-

✓

✓

-

-

✓

Enhanced Passive
Listening Compatibi‐
lity

✓

✓

✓

✓

✓

✓

Anillo con RSTP

-

✓

✓

✓

-

✓

RSTP+

-

-

-

-

-

✓

Loop Detection

✓

✓

✓

✓

✓

✓

Link Aggregation

-

✓

✓

✓ 4)

-

✓

Reenvío DCP

✓

✓

✓

✓

✓

✓

LLDP

✓

✓

✓

✓

✓

✓

Filtro Unicast

✓

✓

✓

✓

✓

✓

Puertos bloqueados

✓

✓

✓

✓

✓

✓

Aprendizaje Unicast

✓

✓

✓

✓

✓

✓

Bloqueo Unicast

✓

✓

✓

✓

✓

✓

Grupos Multicast

✓

✓

✓

✓

✓

✓

IGMP

✓

✓

✓

✓

✓

✓

GMRP

-

✓

✓

✓

-

✓

Bloqueo Multicast

✓

✓

✓

✓

✓

✓

Bloqueo Broadcast

✓

✓

✓

✓

✓

✓

RMON

✓

✓

✓

✓

✓

✓

Historial RMON

-

✓

✓

✓

✓

✓

NAT/NAPT

-

✓

✓

-

-

✓ 3)

Rutas estáticas

-

-

-

-

-

✓ 3)

Route Maps

-

-

-

-

-

✓ 3)

DHCP Relay Agent

✓

✓

✓

✓

✓

✓ 3)

DHCPv6 Relay Agent -

-

-

-

-

✓ 3)

VRRP

-

-

-

-

-

✓ 3)

VRRPv3

-

-

-

-

-

✓ 3)

OSPFv2

-

-

-

-

-

✓ 3)

OSPFv3

-

-

-

-

-

✓ 3)

RIPv2

-

-

-

-

-

✓ 3)

RIPng

-

-

-

-

-

✓ 3)

IGMP

-

-

-

-

-

✓ 3)

PIM

-

-

-

-

-

✓ 3)

MSDP

-

-

-

-

-

✓ 3)

Routing Inter-VLAN
Single-Hop

-

✓

✓

-

-

-

Dirección de agente
común

-

✓

✓

-

-

-

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2187

Configuración de dispositivos y redes
1.4 Crear configuraciones

Fun‐
ciones
de se‐
guri‐
dad

SCALAN‐
CE
XB-200

SCA‐
LANCE
XC-200

SCALAN‐
CE
XP-200

SCA‐
LANCE
XF-200B
A

SCA‐
LANCE
XR-300
WG

SCALAN‐
CE
XM-400/
SCALAN‐
CE
XR-500

Funciones

-

-

-

-

-

✓

Grupos

-

-

-

-

-

✓

Contraseñas

✓

✓

✓

✓

✓

✓

Autenticación RA‐
DIUS

✓

✓

✓

✓

✓

✓

Autenticación MAC

-

✓

✓

✓

-

✓

Guest VLAN

-

✓

✓

✓

-

✓

Reautenticación
802.1X

✓

✓

✓

✓

✓

✓

MAC ACL

-

-

-

-

-

✓

IP ACL

-

-

-

-

-

✓

Management ACL

✓

✓

✓

✓

✓

✓

solo SCALANCE XR528-6M y SCALANCE XR552-12M con versión de firmware 5.0 o
superior

1)

2)

restringido

3)

integrado o mediante KEY-PLUG

4)

no para equipos DNA

Disponibilidad del equipamiento de hardware
La tabla siguiente muestra el equipamiento de hardware de los IE Switches.
Salvo modificaciones técnicas

2188

SCA‐
LANCE
XB-200

SCALAN‐
CE
XC-200

SCA‐
LANCE
XP-200

SCALAN‐
CE
XF-200BA

SCALAN‐
CE
XR-300W
G

SCA‐
LANCE
XM-400/
SCA‐
LANCE
XR-500

Modularidad

-

-

-

-

-

✓ 1)

C-PLUG

-

✓

✓

✓

-

✓

KEY-PLUG

-

-

-

-

-

✓

Combo Ports

-

-

-

-

✓

✓

Slots para transceptores en‐ chufables

✓

-

-

-

✓

Pulsador SELECT/SET

-

✓

✓

-

-

✓

Pulsador RESET

✓

-

✓

-

✓

-

Contacto de señalización

-

✓

✓

✓

-

✓

Interfaz serie

✓

✓

✓

-

✓

✓

Interfaz Out-of-Band

-

-

-

-

-

✓

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
SCA‐
LANCE
XB-200

SCALAN‐
CE
XC-200

SCA‐
LANCE
XP-200

SCALAN‐
CE
XF-200BA

SCALAN‐
CE
XR-300W
G

SCA‐
LANCE
XM-400/
SCA‐
LANCE
XR-500

Modos de visualización

-

✓

✓

-

-

✓

NFC

-

✓

-

-

-

✓ 2)

Power over Ethernet

-

-

✓ 3)

-

-

✓

1)

SCALANCE XM-400 mediante Extender, SCALANCE XR-500 mediante módulos de medios

2)

solo SCALANCE XM-400

3)

identificador "PoE" en el nombre del dispositivo

Capacidades
Capacidad del dispositivo
En la siguiente tabla se muestra la capacidad de los dispositivos para Web Based
Management y Command Line Interface.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2189

Configuración de dispositivos y redes
1.4 Crear configuraciones
La posibilidad de utilizar algunas funciones depende del tipo de dispositivo y del KEY-PLUG
que esté insertado.
Función configurable

Número máximo
SCA‐
LANCE
XB-200

SCA‐
LANCE
XR-300
WG

SCA‐
LANCE
XC-200

SCA‐
LANCE
XP-200

SCA‐
LANCE
XF-200B
A

SCALAN‐
CE
XM-400/
SCALAN‐
CE
XR-500

1632
bytes

1632
bytes

1632
bytes

1632
bytes

1632
bytes

9194
bytes
(configu‐
rable)

Servidor DNS manual
(IPv4/IPv6)

-

-

-

-

-

3

Servidor DNS learned
(IPv4)

-

-

-

-

-

2

Servidores DNS en total

-

-

-

-

-

5

Servidor Syslog

3

3

3

3

3

3

Servidor de correo electró‐
nico

3

3

3

3

3

3

16 1)

28 1)

24

24

24

24

Direcciones IPv4 por grupo
DHCP

1

1

24

24

24

24

Direcciones IPv4 que ges‐
tiona el servidor DHCP (di‐
námicas y estáticas)

16 1)

28 1)

576

576

576

576

-

-

24

24

24

24

10

10

10

10

10

10

1

1

1

1

1

2

1

1

1

1

1

3

1

1

1

1

1

1

Sy Tamaño máximo de frames
st (Ingress)
e
m

Grupos DHCP

Asignaciones estáticas
DHCP por grupo DHCP
Receptores de traps SNMP
Servidor SNTP
Servidor NTP
Interfaces de agente/TIA

2190

2)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Función configurable

Número máximo
SCA‐
LANCE
XB-200

La LAN virtuales (basadas en
ye puerto; VLAN1 inclusive)
r 2 Grupos VLAN basados en
protocolo

SCA‐
LANCE
XR-300
WG

17 17

SCA‐
LANCE
XC-200

SCA‐
LANCE
XP-200

SCA‐
LANCE
XF-200B
A

SCALAN‐
CE
XM-400/
SCALAN‐
CE
XR-500

257

257

257

257

-

-

-

-

-

12

Grupos VLAN basados en
protocolo por puerto

-

-

-

-

-

12

VLAN basadas en subred
IPv4

-

-

-

-

-

150

VLAN basadas en subred
IPv6

-

-

-

-

-

150

Private VLAN

-

-

1

1

-

1

Primary PVLANs

-

-

1

1

-

1

Secondary Isolated
PVLANs

-

-

24

24

-

24

Secondary Community
PVLANs

-

-

256

256

-

256

Sesiones de reflexión

1

1

1

1

1

7

VLAN cuyo tráfico de datos
se puede reflejar en un
puerto monitor

-

-

-

-

-

255

Sesiones RSPAN

-

-

-

-

-

1

Puertos Standby

1

1

1

1

1

5

Instancias Multiple Span‐
ning Tree

-

-

4

4

-

16

Agregación de enlaces o
EtherChannels con máx. 8
puertos respectivamente
por agregación

-

-

8

8

4

8

Puertos en una agregación
de enlaces

-

-

8

8

4

8

Unicast Filtering

128

128

128

128

128

128

Direcciones MAC estáticas
en la FDB (Forward Data‐
base)

128

128

128

128

128

256

Direcciones Multicast sin
GMRP activo

512

512

512

512

512

512

Direcciones Multicast con
GMRP activo

-

-

50

50

50

50

VLAN cuyo tráfico de datos
se puede reflejar en un
puerto monitor

-

-

-

-

-

255

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2191

Configuración de dispositivos y redes
1.4 Crear configuraciones
Función configurable
SCA‐
LANCE
XR-300
WG

SCA‐
LANCE
XC-200

SCA‐
LANCE
XP-200

SCA‐
LANCE
XF-200B
A

1

1

24

24

1

127

-

-

-

-

-

4096

Rutas estáticas

-

-

-

-

-

100

Posibles rutas al mismo
destino

-

-

-

-

-

8

Interfaces DHCP Relay
Agent

1

1

24

24

1

127

Servidor del agente de re‐
transmisión de DHCP

4

4

4

4

4

4

Interfaces NAT

-

-

1

1

-

5

Interfaces de router VRRP
(solo interfaces VLAN)

-

-

-

-

-

52

Áreas OSPF por dispositivo

-

-

-

-

-

5

Entradas del intervalo de
área OSPF por área OSPF
(Intra-Area Summary)

-

-

-

-

-

3

Interfaces OSPF

-

-

-

-

-

40

Interfaces OSPF por área
OSPF

-

-

-

-

-

40

Enlaces virtuales OSPF
(dentro de un sistema autó‐
nomo)

-

-

-

-

-

8

Vecinos OSPFv3

-

-

-

-

-

300

Vecinos OSPFv3 por inter‐
faz

-

-

-

-

-

8

Rutas OSPFv3

-

-

-

-

-

1500

Clave de autenticación pa‐
ra interfaz OSPFv2

-

-

-

-

-

200

Clave de autenticación pa‐
ra enlace virtual OSPFv2

-

Rutas Multicast PIM por
dispositivo 4)

-

-

-

-

-

1000

Componentes PIM

-

-

-

-

-

1

Puntos de encuentro

-

-

-

-

-

3

La Interfaces IP
ye Entradas en la tabla de rou‐
r 3 ting de hardware

2192

Número máximo
SCA‐
LANCE
XB-200

SCALAN‐
CE
XM-400/
SCALAN‐
CE
XR-500

(40 inter‐
faces con
5 claves
cada una)
-

-

-

-

40
(8 enla‐
ces virtua‐
les con 5
claves ca‐
da uno)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Función configurable

Número máximo
SCA‐
LANCE
XB-200

SCA‐
LANCE
XR-300
WG

SCA‐
LANCE
XC-200

SCA‐
LANCE
XP-200

SCA‐
LANCE
XF-200B
A

SCALAN‐
CE
XM-400/
SCALAN‐
CE
XR-500

Candidatos para puntos de
encuentro

-

-

-

-

-

3

Puntos de encuentro está‐
tico

-

-

-

-

-

3

S Funciones
ec Usuarios
uri
ty Grupos
Direcciones IP de servido‐
res RADIUS

1

1

1

1

1

29

30

30

30

30

30

18

-

-

-

-

-

32

4

4

4

4

4

4

Autenticaciones MAC si‐
multáneas (autentificadas
y bloqueadas) por disposi‐
tivo 3)

4000

4000

4000

4000

4000

2000

Autenticaciones MAC si‐
multáneas (autentificadas
y bloqueadas) por puerto
(configurable) 3)

100

100

100

100

100

100

ACL de gestión (reglas de
acceso para la gestión)

10

10

10

10

10

10

Reglas para MAC ACL de
puerto

-

-

-

-

-

128

Reglas de ingreso y egreso
para MAC ACL de puerto
(total)

-

-

-

-

-

364

Reglas para IP ACL de
puerto

-

-

-

-

-

128

Reglas de ingreso y egreso
para IP ACL de puerto (to‐
tal)

-

-

-

-

-

364

Reglas para IP ACL de
VLAN

-

-

-

-

-

128

1)

En el SCALANCE XB-200 y en el SCALANCE XR-300WG, el número de pools DHCP y direcciones
IPv4 gestionables depende del número de puertos. El número de puertos equivale al número máximo
de grupos DHCP y direcciones IPv4 gestionables.

2)

Se trata de una interfaz IP.

3)

Si se rebasa por exceso el número máximo de autenticaciones MAC por puerto, se reiniciarán todas
las autenticaciones MAC del puerto en el que se ha rebasado el valor.

4)

El número máximo de rutas Multicast PIM por dispositivo se forma del siguiente modo: streams SSM
+ streams SM + streams bidireccionales (de joins IGMP) + rutas bidireccionales (de grupos Multicast
RP). En función de la estructura de la red PIM (estructura jerárquica), en el Multicast bidireccional
puede soportarse un mayor número de streams.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2193

Configuración de dispositivos y redes
1.4 Crear configuraciones

Información importante
Direcciones IP
IPv4 / IPv6
¿Cuáles son las principales diferencias?
Configuración IP

IPv4

IPv6

● Servidor DHCP

● Stateless Address Autoconfiguration (SLAAC):
configuración automática sin estado vía NDP (Neighbor
Discovery Protocol)

● Manual

–

Crea una dirección Link Local para cada interfaz que
no requiere un router en el link.

–

Comprueba la univocidad de la dirección en el link que
no requiere un router en el link.

–

Especifica si las direcciones globales se obtienen
mediante un mecanismo sin estado, un mecanismo
con estado o ambos. (Requiere un router en el link.)

● Manual
● DHCPv6 (con estado)
Direcciones IP disponibles

32 bits: direcciones 4, 29 *
109

128 bits: direcciones 3,4 * 1038

Formato de dirección

Decimal: 192.168.1.1

Hexadecimal: 2a00:ad80::0123

con puerto: 192.168.1.1:20 con puerto: [2a00:ad80::0123]:20
Loopback

127.0.0.1

::1

Direcciones IP por interfaz

4 direcciones IP

Varias direcciones IP
● LLA: una dirección Link Local (generada
automáticamente) fe80::/128 por interfaz
● ULA: varias direcciones Unicast Unique Local por interfaz
● GUA: varias direcciones Unicast globales por interfaz

Header

● Suma de verificación

● Comprobación en capa superior

● Longitud variable

● Tamaño fijo

● Fragmentación en el
Header

● Fragmentación en el Extension Header

● Sin seguridad
Fragmentación

Host y router

Solo punto final de la comunicación

Quality of Service

Type of Service para la
priorización (ToS)

La priorización se indica en el campo "Traffic Class" del Hea‐
der.

Tipos de telegrama

Broadcast, Multicast, Uni‐
cast

Multicast, Unicast, Anycast

2194

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
IPv4
Identificación de clientes/servi‐ Client-ID:
dor DHCP
● Dirección MAC
● DHCP Client ID
● System Name
● Nombre de estación
PROFINET
● IAID y DUID

IPv6
DUID + IAID(s) = exactamente una interfaz del host
DUID = DHCP Unique Identifier
Identifica unívocamente a servidor y clientes y no debe modi‐
ficarse, ni siquiera al cambiar componentes de red.
IAID = Identity Association Identifier
Por lo menos una por interfaz es generada por el cliente y
permanece invariable cuando se reinicia el cliente DHCP
Tres métodos para determinar la DUID
● DUID-LLT
● DUID-EN
● DUID-LL

DHCP

vía UDP mediante Broad‐
cast

vía UDP mediante Unicast
RFC 3315, RFC 3363
Stateful DHCPv6
Configuración que depende del estado y con la que se trans‐
miten la dirección IPv6 y los ajustes de configuración.
También se intercambian cuatro mensajes DHCPv6 entre
cliente y servidor:
1. SOLICIT:
Enviado por el cliente DHCPv6 para localizar el servidor
DHCPv6.
2. ADVERTISE
Los servidores DHCPv6 disponibles responden a la
solicitud.
3. REQUEST
El cliente DHCPv6 solicita una dirección IPv6 y los ajustes
de configuración al servidor DHCPv6.
4. REPLY
El servidor DHCPv6 envía la dirección IPv6 y los ajustes de
configuración.
Si tanto el cliente como el servidor soportan la función "Rapid
commit", el procedimiento se reduce a dos mensajes
DHCPv6, SOLICIT y REPLY.
Stateless DHCPv6
Cuando DHCPv6 no tiene estado, se transmiten únicamente
los ajustes de configuración.
Prefix Delegation
El servidor DHCPv6 delega la distribución de prefijos IPv6 al
cliente DHCPv6. El cliente DHCPv6 se denomina también
router PD.

Resolución de direcciones IP
en direcciones de hardware

ARP (Address Resolution
Protocol)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

NDP (Neighbor Discovery Protocol)

2195

Configuración de dispositivos y redes
1.4 Crear configuraciones

Dirección IPv4
Estructura de una dirección IPv4
Clases de dirección
Campo de direcciones IP

Cantidad máx. de redes

1.x.x.x a 126.x.x.x

Clase

CIDR

A

/8

126

16777214

16383

65534

B

/16

2097151

254

C

/24

128.0.x.x a 191.255.x.x
192.0.0.x a 223.255.255.x

Cantidad máx. de
hosts/red

224.0.0.0 - 239.255.255.255

Aplicaciones Multicast

D

240.0.0.0 - 255.255.255.255

reservada para aplicaciones futuras

E

Una dirección IP consta de 4 bytes. Cada byte se representa en forma decimal y está separado
del anterior por un punto. Resulta por tanto la siguiente estructura, teniéndose que reemplazar
XXX por un número entre 0 y 255:
XXX.XXX.XXX.XXX
La dirección IP consta de dos partes, la dirección de red y la dirección de la estación terminal.
Así es posible formar diversas subredes. En función de qué bytes de la dirección IP se usan
como dirección de red y cuáles como dirección del usuario final, una dirección de IP puede
asignarse a una clase de dirección determinada.

Máscara de subred
Los bits de la dirección de estación terminal se pueden utilizar para la formación de subredes.
Los bits iniciales representan la dirección de la subred y los demás bits se interpretan como
dirección del ordenador en la subred.
Una subred se define por la máscara de subred. La estructura de la máscara de subred se
corresponde con la de una dirección IP. Si en la máscara de subred está puesto un "1" en una
posición de bit, el bit de la posición correspondiente de la dirección IP pertenece a la dirección
de subred, y en otro caso a la dirección del ordenador.
Ejemplo de una red de clase B:
La dirección de subred estándar para redes de la clase B es 255.255.0.0, con lo que se dispone
de los dos últimos bytes para definir una subred. Si se deben definir 16 subredes, el tercer byte
de la dirección de subred se tiene que poner a 11110000 (representación binaria). En este
caso resulta la máscara de subred 255.255.240.0.
Para constatar si dos direcciones IP pertenecen a la misma subred, se aplica a las dos
direcciones IP y a la máscara de subred una operación lógica Y bit a bit. Si ambas
vinculaciones dan el mismo resultado, las dos direcciones IP pertenecen a la misma subred,
como p. ej. 141.120.246.210 y 141.120.252.108.

2196

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
La división descrita de la dirección de estación terminal no tiene relevancia fuera de la red local,
siendo de interés sólo la dirección IP en su totalidad para la conmutación de paquetes.
Nota
En la representación en bits de la máscara de subred, los "unos" han de estar puestos con
justificación a la izquierda; es decir, que no debe haber "ceros" entre los "unos".

Direcciones IPv6
Conceptos de IPv6
Nodo de red
Un nodo de red es un dispositivo que está conectado a una o varias redes a través de una o
varias interfaces.
Router
Es un nodo de red que reenvía paquetes IPv6.
Host
Es un nodo de red que representa un punto final para relaciones de comunicación IPv6.
Link
En la terminología del IPv6 se entiende por link una conexión de Layer 3 directa dentro de una
misma red IPv6.
Vecino
Dos nodos de red se denominan vecinos si se encuentran en el mismo Link.
Interfaz IPv6
Interfaz física o lógica que tiene activado IPv6.
Path MTU
Tamaño de paquete máximo admisible en la ruta entre un remitente y un destinatario.
Path MTU Discovery
Mecanismo para determinar el tamaño de paquete máximo admisible a lo largo de toda la ruta
entre un remitente y un destinatario.
LLA
Dirección Link Local FE80::/10
En cuanto se activa IPv6 en la interfaz, se genera automáticamente una dirección Link Local.
Solo es accesible para nodos que están en el mismo Link.
ULA
Dirección Unique Local
Se define en la RFC 4193. A través de esta dirección se accede a la interfaz IPv6 de la LAN.
GUA

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2197

Configuración de dispositivos y redes
1.4 Crear configuraciones
Dirección Unicast global. A través de esta dirección se accede a la interfaz IPv6, p. ej. por
Internet.
ID de interfaz
La ID de interfaz se genera siguiendo el método EUI-64 o bien manualmente.
EUI-64
Extended Unique Indentifier (RFC 4291); método para generar la ID de interfaz. Con Ethernet,
la ID de interfaz se genera a partir de la dirección MAC de la interfaz. Divide la dirección MAC
en la parte específica del fabricante (OUI) y la parte específica de la red (NIC) e inserta FFFE
entre ambas partes.
Ejemplo:
Dirección MAC = AA:BB:CC:DD:EE:FF
OUI = AA:BB:CC
NIC = DD:EE:FF
EUI-64 = OUI + FFFE + NIC = AA:BB:CC:FF:FE:DD:EE:FF
Scope
Define el alcance de la dirección IPv6.

Estructura de una dirección IPv6
Formato de dirección IPv6 - notación
Las direcciones IPv6 constan de 8 bloques con cifras decimales de cuatro dígitos en cada uno
(128 bits en total). Los bloques están separados por dos puntos.
Ejemplo:
fd00:0000:0000:ffff:02d1:7d01:0000:8f21
Reglas / simplificaciones:
● Si uno o varios bloques tienen el valor 0 se admite una notación abreviada.
La dirección fd00:0000:0000:ffff:02d1:7d01:0000:8f21 también puede anotarse abreviada,
del siguiente modo:
fd00::ffff:02d1:7d01:0000:8f21
Con el fin de conservar la univocidad, dicha abreviación solo puede aplicarse una vez
dentro de toda la dirección.
● Está permitido omitir los ceros a la izquierda dentro de un bloque.
La dirección fd00:0000:0000:ffff:02d1:7d01:0000:8f21 también puede anotarse abreviada,
del siguiente modo:
fd00::ffff:2d1:7d01:0000:8f21
● Notación decimal con puntos
Para los 2 últimos bloques o 4 bytes es posible utilizar la notación decimal tradicional con
puntos.
Ejemplo: la dirección IPv6 fd00::ffff.125.1.0.1 es equivalente a fd00::ffff:7d01:1

2198

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Estructura de una dirección IPv6
El protocolo IPv6 distingue entre tres tipos de dirección: Unicast, Anycast y Multicast. El
apartado siguiente describe la estructura de las direcciones Unicast globales.
Prefijo IPv6

Sufijo

Prefijo global:

ID de subred

ID de interfaz

n bits

m bits

128 - n - m bits

Rango de direcciones
asignado

Descripción de la ubicación, tam‐ Asignación unívoca del host en la red.
bién prefijo de subred o subred La ID se genera a partir de la dirección
MAC.

El prefijo para la dirección Link Local es siempre fe80:0000:0000:0000. El prefijo se abrevia y
se anota del siguiente modo: fe80::

Prefijo IPv6
Especificado en: RFC 4291
El prefijo IPv6 representa el identificador de la subred.
Los prefijos y las direcciones IPv6 se indican de igual forma que en la notación CIDR (Classless
Inter-Domain Routing) para IPv4.
Estructura
Dirección IPv6 / longitud de prefijo
Ejemplo
Dirección IPv6: 2001:0db8:1234::1111/48
Prefijo: 2001:0db8:1234::/48
ID de interfaz: ::1111

Entrada y representación
La entrada de direcciones IPv6 es posible en las notaciones descritas anteriormente. Las
direcciones IPv6 se muestran siempre en notación hexadecimal.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2199

Configuración de dispositivos y redes
1.4 Crear configuraciones

PROFINET
PROFINET
PROFINET es un estándar Ethernet abierto (IEC 61158/61784) para la automatización
industrial basada en Industrial Ethernet. PROFINET utiliza los estándares de TI existentes y
permite una comunicación continua desde el nivel de campo hasta el nivel de gestión, además
de una ingeniería única para toda la planta. Otras propiedades de PROFINET son:
● Uso de TCP/IP
● Automatización de aplicaciones con necesidad de tiempo real
– Comunicación Real-Time (RT)
– Comunicación Isochronous Real-Time (IRT)
● Integración óptima de sistemas de bus de campo
PROFINET se configura en "Sistema > PROFINET (Página 2366)".

PROFINET IO
En el marco de PROFINET, PROFINET IO es un concepto de comunicación para la realización
de aplicaciones descentralizadas y modulares. La aplicación práctica de PROFINET IO se
lleva a cabo con el estándar PROFINET para autómatas programables (IEC 61158-x-10).

EtherNet/IP
EtherNet/IP
EtherNet/IP (Ethernet/Industrial Protocol) es un estándar industrial abierto para Ethernet
industrial en tiempo real, basado en TCP/IP y UDP/IP. Con EtherNet/IP se amplía Ethernet con
el Common Industrial Protocol (CIP) en el nivel de aplicación. En EtherNet/IP se aplican las
capas inferiores del modelo de referencia de Ethernet con las funciones de transferencia,
transmisión, red y transporte.
EtherNet/IP se configura en "System > EtherNet/IP (Página 2368)".

Common Industrial Protocol
El Common Industrial Protocol (CIP) es un protocolo de aplicación de la automatización que
soporta el traspaso de los buses de campo a Ethernet industrial y a redes IP. Este protocolo
industrial lo utilizan buses de campo y redes industriales, como DeviceNet, ControlNet y
EtherNet/IP, en el nivel de aplicación como interfaz entre el mundo determinista de los buses
de campo y la aplicación de automatización (controlador, E/S, HMI, OPC ...). El CIP está por
encima del nivel de transporte y amplía los servicios de transporte y comunicación puros para
la técnica de automatización. Aquí se incluyen servicios para el tráfico de datos cíclico, crítico
en el tiempo y controlado por eventos. El CIP distingue entre los mensajes E/S críticos en el
tiempo (implicit messages) y los telegramas individuales de pregunta/respuesta para la
configuración y el registro de datos (explicit messages). El CIP está orientado a los objetos;
todos los datos "visibles" desde fuera son accesibles en forma de objetos. El CIP tiene una
base de configuración común: EDS (Electronic Data Sheet).

2200

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Electronic Data Sheet
Electronic Data Sheet (EDS) es una hoja de datos electrónica que describe dispositivos.
Encontrará la EDS necesaria para el funcionamiento de EtherNet/IP en "System >
Load&Save".

VLAN
Definición de red independiente de la ubicación de las estaciones
VLAN (Virtuelles Local Area Network) divide una red física en varias redes lógicas separadas
entre sí. Se forman grupos lógicos de dispositivos. Solo pueden direccionarse entre sí las
estaciones de la misma VLAN. Dado que también los telegramas Multicast y Broadcast solo
pueden enviarse dentro de la VLAN correspondiente, se habla de dominios Broadcast.
De aquí resulta, como ventaja especial de las VLAN, una menor carga de la red para las
estaciones o segmentos de red de otras VLAN.
Para identificar qué paquete está asignado a qué VLAN, el telegrama se amplía con 4 bytes,
consulte VLAN-Tagging (Página 2201). Esta ampliación contiene también información de
prioridad, además de la ID de VLAN.

Posibilidades de asignación a VLAN
Hay diferentes posibilidades de asignación a VLAN:
● VLAN basada en puerto
A cada puerto de un dispositivo se le asigna una ID de VLAN. Una VLAN basada en puerto
se configura en "Layer 2 > VLAN > VLAN basada en puerto (Página 2398)".
● VLAN basada en protocolo
A cada puerto de un dispositivo se le asigna un grupo de protocolos.
● VLAN basada en subred
A la dirección IP del dispositivo se le asigna una ID de VLAN.

Extensión de los telegramas Ethernet en cuatro byte
Para CoS (Class of Service, priorización de telegramas) y VLAN (red virtual) se ha fijado en la
norma IEEE 802.1Q la extensión de los telegramas Ethernet con el identificador VLAN.
Nota
El identificador VLAN provoca un aumento de la longitud total permitida del telegrama de 1518
a 1522 bytes.
Se tiene que comprobar si los terminales de la red pueden procesar esa longitud / ese tipo de
telegrama. De no ser así, a esas estaciones sólo se les deberán enviar telegramas de longitud
estándar.
Los 4 bytes adicionales se encuentran en el encabezado del telegrama Ethernet, entre la
dirección de origen y el campo de tipo / longitud Ethernet:

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2201

Configuración de dispositivos y redes
1.4 Crear configuraciones
Los bytes adicionales contienen el Tag Protocol Identifier (TPID) y la Tag Control Information
(TCI).

3UH£PEXOR
E\WHV

'LUHFFLµQGH 'LUHFFLµQGH
GHVWLQR
RULJHQ
E\WHV
E\WHV

73,'
E\WHV

7&,
E\WHV

7LSR
E\WHV

'DWRV
aE\WHV

&5&
E\WHV

[
3ULRULW\
ELWV

9/$1,' ELWV
&), ELW

Tag Protocol Identifier (TPID)
Los primeros 2 bytes forman el Tag Protocol Identifier (TPID) y están ocupados de forma fija
con 0x8100. Este valor indica que el paquete de datos contiene información VLAN o
indicaciones de prioridad.

Tag Control Information (TCI)
Los 2 bytes de la Tag Control Information (TCI) contienen la siguiente información:
Priorización CoS
En el telegrama con tag hay 3 bits para la prioridad, que también se denominan Class of
Service (CoS), consulte también IEEE 802.1Q.
Bits CoS

Prioridad

Tipo del tráfico de datos

000

0 (mínima)

Background (segundo plano)

001

1

Best Effort

010

2

Excellent Effort

011

3

Critical Applications (Aplicaciones críticas)

100

4

Video, < 100 ms retardo (latencia y jitter)

101

5

Voice (idioma), < 10 ms retardo (latencia y jitter)

110

6

Internetwork Control

111

7 (máxima)

Network Control

La priorización de los paquetes de datos presupone una cola de espera en los componentes,
en la que puede guardar temporalmente los paquetes de datos de menor prioridad.
El dispositivo dispone de varias colas de espera paralelas, en las que se procesan los
telegramas de diferente prioridad. Con el ajuste predeterminado se procesan primero los
telegramas de prioridad máxima. Este procedimiento garantiza que los telegramas de mayor
prioridad se envíen en cualquier caso, incluso si la cantidad de datos es elevada.

2202

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Canonical Format Identifier (CFI)
El CFI se necesita para la compatibilidad entre Ethernet y Token Ring.
Los valores tienen el siguiente significado:
Valor

Significado

0

El formato de la dirección MAC es canónico. En la representación canónica de la dirección
MAC primero se transmite el bit de menor valor. Ajuste estándar para switches Ethernet.

1

El formato de la dirección MAC no es canónico.

ID de VLAN
En el campo de datos de 12 bits se pueden formar hasta 4096 IDs de VLAN. En ese caso rigen
las siguientes especificaciones:
ID de VLAN

Significado

0

El telegrama sólo contiene información sobre la prioridad (Priority Tagged Frames),
pero no contiene un identificador VLAN válido.

1 - 4094

Identificador VLAN válido, el telegrama está asignado a una VLAN, puede contener
también información sobre la prioridad.

4095

Reservado

Private VLAN
Con una Private VLAN (PVLAN) se pueden subdividir los dominios Broadcoast de Layer 2 de
una VLAN.
Una Private VLAN se compone de las siguientes unidades:
● una Primary Private VLAN (Primary PVLAN)
La VLAN que se subdivide se denomina Primary Private VLAN.
● Secondary Private VLANs (Secondary PVLAN)
Las Secondary PVLANs solo existen dentro de una Primary PVLAN. Cada Secondary
PVLAN tiene un ID de VLAN específico y está conectada con la Primary PVLAN.
Las Secondary PVLANs se subdividen en los siguientes tipos:
– Isolated Secondary PVLAN
Los dispositivos que se encuentran dentro de una Isolated Secondary PVLAN no
pueden comunicarse entre sí a través de Layer 2.
– Community Secondary PVLAN
Los dispositivos que se encuentran dentro de una Community Secondary PVLAN
pueden comunicarse entre sí directamente a través de Layer 2. Los dispositivos no
pueden comunicar con dispositivos de otras Communities de la PVLAN a través de
Layer 2.
Nota
ID VLAN en PVLANs secundarias
Si utiliza el mismo ID WLAN para PVLANs secundarias en diferentes IE Switches, los
terminales podrán comunicarse entre sí dentro de las PVLANs secundarias de forma común
a varios switch a través de Layer 2.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2203

Configuración de dispositivos y redes
1.4 Crear configuraciones
Nota
Funcionalidad Private VLAN y autenticación RADIUS
Si está activada la asignación VLAN mediante autenticación RADIUS para uno o varios
puertos de una VLAN, no debería configurarse dicha VLAN adicionalmente como Private
VLAN.
La funcionalidad Private VLAN en combinación con la asignación VLAN mediante
autenticación RADIUS puede provocar un estado incoherente del sistema.

/D\HU

Primary PVLAN X

Servidor

PC2
PC1

PC4
PC3

Secondary PVLAN 10
Isolated

Secondary PVLAN 20
Community

Private VLAN

PC5
Secondary PVLAN 30
Community

VLAN Y

3URPLVFXRXV3RUW7DJJHG0HPEHU
3URPLVFXRXV3RUW8QWDJJHG0HPEHU
+RVW3RUW8QWDJJHG0HPEHU

En este ejemplo, los puertos de los IE-Switch que los conectan con otros IE-Switch son puertos
Promiscuous. Estos puertos de red son Tagged Member en todas las PVLANs: Primary
PVLAN y todas las Secondary PVLANs.
Los puertos a los que están conectados los PCs son puertos Host. Cada uno de los puertos
Host es un Untagged Member en la Primary PVLAN y en la Secondary PVLAN
correspondiente.
El puerto al que está conectado el servidor es un puerto Promiscuous. Este puerto Promiscuos
es Tagged Member en todas las PVLANs: Primary PVLAN y todas las Secondary PVLANs.

2204

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
En este ejemplo, todos los PCs pueden comunicarse con el servidor. El servidor puede
comunicarse con todos los PCs. El PC1 no puede comunicarse con ningún otro PC. Los PCs
que se encuentran dentro de una Community Secondary PVLAN pueden comunicarse entre
sí, pero no con los PCs de otra Secondary PVLAN.

Túnel VLAN
La función Túnel VLAN Q-in-Q VLAN permite continuar el tráfico de datos de diferentes redes
de cliente mediante túnel VLAN a través de una red de proveedor. Cada red de cliente puede
disponer del número total de VLANs posibles.
Un túnel VLAN se establece entre dos Switches de proveedor configurados en los límites de
una red de proveedor. Un Switch de proveedor dispone de los siguientes tipos de puertos:
● Puerto de acceso
Un puerto de acceso conecta el Switch de proveedor con una red de cliente.
– Tráfico de datos entrante
El tráfico de datos entrante en un puerto de acceso se trata como si no tuviera tags ①.
Todos los telegramas entrantes se amplían un tag con la VID de puerto del puerto de
acceso ②. En telegramas que ya tienen tag, eso significa que se amplían con un
segundo tag 802.1Q ③ (el tag VLAN externo).




– Tráfico de datos saliente
En el tráfico de datos saliente, en un puerto de acceso se vuelve a retirar el tag VLAN
externo.
● Puerto Core
Un puerto Core conecta el Switch de proveedor con una red de proveedor.
Los puertos Core son miembros de la VLAN de puerto del puerto de acceso o se configuran
con el tipo de puerto "Switch-Port VLAN Trunk".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2205

Configuración de dispositivos y redes
1.4 Crear configuraciones

/D\HU

Red de cliente A
VLAN ID

Red de cliente A
VLAN ID

Red de cliente B
Prioridad

Red de cliente B
Prioridad
Red de proveedor

Red de cliente C
Sin tag

Red de cliente C
Sin tag

3XHUWRGHDFFHVR39,'

7U£ILFRGHGDWRVVLQWDJ

3XHUWRGHDFFHVR39,'

7U£ILFRGHGDWRVFRQWDJ

3XHUWRGHDFFHVR39,'

7U£ILFRGHGDWRVFRQW¼QHO

En este ejemplo, el tráfico de datos de las redes de cliente A, B y C se envían por túnel VLAN
a través de la red de proveedor. Los telegramas de la red de cliente A tienen un tag VLAN ID.
Los telegramas de la red de cliente B tienen un tag de prioridad. Los telegramas de la red de
cliente C no tienen tag.
Cuando los telegramas llegan al puerto de acceso correspondiente, se amplían con un tag con
la Port VID del puerto de acceso y se envían por túnel a través de la red de proveedor. En
cuanto los telegramas abandonan la red de proveedor, el tag VLAN externo (PVID) se vuelve
a retirar. Los telegramas se envían en su forma original. La prioridad del telegrama se
mantiene.

SNMP
Introducción
El Simple Network Management Protocol (SNMP) permite vigilar y controlar componentes de
red, p. ej. routers o switches, desde una estación central. El SNMP regula la comunicación
entre los dispositivos vigilados y la estación de vigilancia.
Tareas de SNMP:
● Vigilancia de componentes de red
● Control remoto y parametrización remota de componentes de red
● Detección y notificación de errores

2206

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Las versiones v1 y v2 de SNMP no disponen de mecanismos de seguridad. Todos los usuarios
de la red pueden acceder a los datos con el software adecuado e incluso modificar
parametrizaciones.
Para controlar derechos de acceso de forma sencilla sin aspectos de seguridad se utilizan
Community Strings.
El Community String se transmite junto con la petición. Si el Community String es correcto, el
agente SNMP responde y envía los datos solicitados. Si el Community String no es correcto,
el agente SNMP rechaza la petición. Para los derechos de lectura y escritura se definen
diferentes Community Strings. Los Community Strings se transmiten en texto claro.
Valores estándar de los Community Strings:
● public
dispone solo de derechos de lectura
● private
dispone de derechos de lectura y escritura
Nota
Puesto que los SNMP Community Strings son una protección de acceso, no deben
utilizarse los valores estándar "public" ni "private". Modifique estos valores después de la
primera puesta en marcha.
Otros mecanismos de protección sencillos a nivel de dispositivo:
● Allowed Host
El sistema vigilado conoce las direcciones IP de los sistemas que vigilan.
● Read Only
Si se asigna "Read Only" a un dispositivo vigilado, las estaciones de vigilancia podrán leer
los datos, pero no modificarlos.
Los paquetes de datos SNMP no están codificados y es muy fácil leerlos.
La estación central también se denomina estación de gestión. Los dispositivos que deben
vigilarse tienen instalado un agente SNMP, con el que la estación de gestión intercambia datos.
La estación de gestión envía paquetes de datos del tipo siguiente:
● GET
Solicitar un juego de datos del agente SNMP
● GETNEXT
Llama el próximo juego de datos.
● GETBULK (disponible a partir de SNMPv2c)
Solicita varios juegos de datos al mismo tiempo, p. ej. varias filas de una tabla.
● SET
Contiene datos de parametrización para el dispositivo correspondiente.
El agente SNMP envía paquetes de datos del tipo siguiente:
● RESPONSE
El agente SNMP devuelve los datos solicitados por el administrador.
● TRAP
Cuando se produce un evento determinado, el agente SNMP envía traps por su cuenta.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2207

Configuración de dispositivos y redes
1.4 Crear configuraciones
SNMPv1/v2c/v3 utilizan UDP (User Datagram Protocol) y los puertos UDP 161 y 162. Los
datos se describen en una Management Information Base (MIB).

SNMPv3
En comparación con las versiones anteriores SNMPv1 y SNMPv2c, SNMPv3 incorpora un
amplio concepto de seguridad.
SNMPv3 soporta:
● Autenticación de usuarios completamente codificada
● Codificación de todo el tráfico de datos
● Control de acceso de los objetos MIB a nivel de usuario/grupo
Con la introducción de SNMPv3 ya no es posible transferir sin más configuraciones de usuario
a otros dispositivos, p. ej. cargando un archivo de configuración o intercambiando el C-PLUG.
De acuerdo con la norma, el protocolo SNMPv3 utiliza una ID unívoca del equipo SNMP como
identificador interno de un agente SNMP. Esta ID debe ser inequívoca dentro de la red. Se
utiliza para autenticar y codificar los datos de acceso de usuarios SNMPv3.
En función de si la función "Migración de usuarios SNMPv3" está activada o desactivada, la ID
de equipo SNMP se genera de formas distintas.
Restricción en el uso de la función
La función "Migración de usuarios SNMPv3" solo debe utilizarse para transferir los usuarios
SNMPv3 configurados a un dispositivo de reemplazo en caso de repuesto.
No utilice esta función para transferir los usuarios SNMPv3 configurados a varios dispositivos.
Si se carga una configuración con usuarios SNMPv3 creados en varios dispositivos, estos
utilizarán la misma ID de equipo SNMP. En caso de que dichos dispositivos funcionen en la
misma red, su configuración contradecirá la norma SNMP.
Compatibilidad con productos antecesores
Los usuarios SNMPv3 solo pueden transferirse a otro dispositivo si se han creado como
usuarios migrables. Para crear un usuario migrable, la función "Migración de usuarios
SNMPv3" debe estar activada en el momento de crear el usuario.

Método de redundancia
Spanning Tree
Evitar la formación de bucles en conexiones redundantes
El método Spanning Tree permite crear estructuras de red en las que existen varias
conexiones entre dos IE Switches/Bridges. Un Spanning Tree impide que se formen bucles en
la red, permitiendo solo una ruta y desactivando los demás puertos (redundantes) para el
tráfico de datos. En caso de interrupción, los datos se pueden enviar por una ruta alternativa.
La funcionalidad del método Spanning Tree se basa en el intercambio de telegramas de
configuración y modificación de la topología.

2208

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Definición de la topología de red mediante telegramas de configuración
Para calcular la topología, los dispositivos intercambian entre sí telegramas de configuración,
los llamados BPDU (Bridge Protocol Data Units). Con estos telegramas se selecciona el Root
Bridge y se crea la topología de red. Además, los telegramas BPDU provocan el cambio de
estado de los puertos Root.
El Root Bridge es el Bridge (puente) que controla el procedimiento Spanning Tree de todos los
componentes implicados.
Una vez que el Root Bridge está fijado, cada dispositivo determina un puerto Root. Este es el
puerto con los menores costes de encaminamiento al Root Bridge.

Comportamiento en caso de cambios de la topología de la red
Si se incorporan estaciones a una red o se retiran de ella, esto puede tener repercusiones en
la elección de la vía óptima para los paquetes de datos. Para tener en cuenta estos cambios,
el Root Bridge envía mensajes de configuración a intervalos regulares. El tiempo que
transcurre entre dos avisos de configuración se puede ajustar con el parámetro "Hello Time".

Actualidad de la información de configuración
Con el parámetro "Max Age" se define la antigüedad máxima de las informaciones relativas a
configuración. Si un Bridge recibe información de configuración más antigua de lo que se ha
definido con "Max Age", rechaza este mensaje e impulsa un nuevo cálculo de las vías.
Sin embargo, un Bridge no utiliza información de configuración nueva inmediatamente, sino
solo después del tiempo fijado en el parámetro "Forward Delay". Así se garantiza que el
funcionamiento con la nueva topología no se inicie hasta que todos los Bridges tengan las
informaciones necesarias.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2209

Configuración de dispositivos y redes
1.4 Crear configuraciones

RSTP, MSTP, CIST
Rapid Spanning Tree Protocol (RSTP)
Una desventaja del STP es que la red debe reconfigurarse si sufre alguna perturbación o falla
un dispositivo: Los dispositivos comienzan a negociar nuevas rutas cuando se produce la
interrupción. Esta operación dura hasta 30 segundos. Por esta razón se ha ampliado el STP
para desarrollar el "Rapid Spanning Tree Protocol" (RSTP, IEEE 802.1w). Este se diferencia
fundamentalmente del STP en que los dispositivos ya recopilan información sobre rutas
alternativas cuando el funcionamiento es correcto, de modo que no deben esperar a que se
produzca un fallo para adquirir estos datos. El tiempo de reconfiguración de una red controlada
con RSTP se reduce así a unos pocos segundos.
Esto se logra con las siguientes funciones:
● Edge Ports (puerto de dispositivo terminal)
Los Edge Ports son puertos que están conectados a un terminal.
Un puerto que está definido como Edge Port se activa directamente después del
establecimiento de una llamada. Si en un Edge Port se recibe una Spanning Tree BPDU,
el puerto pierde su papel de Edge Port y participa de nuevo en (R)STP. Si no se recibe
ningún telegrama BPDU más una vez transcurrido un período de tiempo (3 veces el Hello
Time), el puerto pasa de nuevo al estado de Edge Port.
● Punto a punto (comunicación directa entre dos dispositivos vecinos)
Por acoplamiento directo de los dispositivos se puede realizar una modificación del estado
(reconfiguración del puerto) sin retardo.
● Puerto alternativo (en sustitución del Root Port)
Se ha configurado un sustituto para el Root Port. En caso de pérdida de conexión con el
Root Bridge, el dispositivo puede establecer así sin retardo, por reconfiguración, una
conexión a través del puerto alternativo.
● Reacción a eventos
Rapid Spanning Tree reacciona sin retardo a eventos, por ejemplo, a una interrupción de
la conexión. Por lo tanto no es necesario esperar las señales de relojes, como en el caso
de Spanning Tree.
● Número máximo de saltos de puente
Número máximo de saltos de puente que un paquete puede efectuar antes de invalidarse
automáticamente.
Así, con Rapid Spanning Tree básicamente se preconfiguran alternativas para muchos
parámetros o bien se consideran determinadas propiedades de la topología de red para
acortar el tiempo de reconfiguración.

Multiple Spanning Tree Protocol (MSTP)
El Multiple Spanning Tree Protocol (MSTP) es una evolución del Rapid Spanning Tree
Protocol. Entre otras cosas, ofrece la posibilidad de utilizar varias instancias RSTP dentro de
diferentes VLAN o grupos de VLAN, lo cual permite, p. ej., disponer dentro de determinadas
VLAN de rutas que el Rapid Spanning Tree Protocol sencillo bloquearía globalmente para el
tráfico de datos.

2210

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Common and Internal Spanning Tree (CIST)
CIST designa la instancia utilizada internamente por el switch, que se asemeja en principio a
una instancia RSTP interna.

HRP
HRP - High Speed Redundancy Protocol
HRP es un método de redundancia para redes con topología en anillo. Los switches están
conectados unos con otros a través de puertos de anillo. Uno de los switches se configura
como administrador de redundancia (RM). Los demás switches son clientes de redundancia.
El administrador de redundancia comprueba con telegramas de prueba la ausencia de
interrupciones en el anillo. El administrador de redundancia envía telegramas de prueba a
través de los puertos en anillo y comprueba su recepción en el otro puerto en anillo en cada
caso. Los clientes de redundancia reenvían los telegramas de prueba.
Si los telegramas de prueba del RM dejan de llegar al puerto de destino debido a una
interrupción del anillo, el RM interconecta sus dos puertos de anillo e informa inmediatamente
del cambio a los clientes de redundancia. El tiempo de reconfiguración tras una interrupción del
anillo es de 300 ms como máximo.
Redundancia Standby
La redundancia Standby es un método por el cual se acoplan en configuración redundante los
anillos que están protegidos cada uno para sí por HSR (High Speed Redundancy). En el anillo
se configura una pareja de dispositivos maestro/esclavo que se vigila mutuamente a través de
sus puertos en anillo. En caso de error, el tráfico de datos se redirecciona de una conexión
Ethernet (puerto Standby del maestro o servidor Standby) a otra conexión Ethernet (puerto
Standby del esclavo).

Requisitos
HRP
● HRP es compatible con topologías de anillo con un máximo de 50 dispositivos. Una
superación del número de equipo puede hacer que falle el tráfico de datos.
● HRP sólo es posible si en el anillo se utilizan únicamente equipos que soporten esta función.
● Los dispositivos que no soportan HRP deben conectarse al anillo correspondiente por
medio de dispositivos especiales aptos para HRP. Dicho enlace no es redundante hasta el
anillo.
● Todos los equipos deben estar comunicados entre sí a través de sus puertos de anillo. La
conexión multimodo entre dos IE Switches puede llegar hasta a 3 km y la conexión
monomodo hasta a 26 km. Si las distancias son mayores es posible que se prolongue el
tiempo de reconfiguración indicado.
● Un dispositivo del anillo se tiene que configurar como administrador de redundancia
seleccionando el ajuste "Administrador HRP". En todos los demás dispositivos del anillo se
tiene que activar el modo de operación "Cliente HRP" o "Automatic Redundancy Detection".
● Los puertos de reserva tienen que estar desactivados en Spanning Tree.
● Se configura HRP a través de Web Based Management, Command Line Interface o SNMP.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2211

Configuración de dispositivos y redes
1.4 Crear configuraciones
Redundancia Standby
● Para interlocutores de acoplamiento es necesario que HRP esté ajustado de forma fija.
● Los puertos de los interlocutores de acoplamiento deben estar desactivados en Spanning
Tree.
● La redundancia Standby se configura a través de Web Based Management, Command Line
Interface o SNMP.

Stand-by
Información general
Los switches SCALANCE X, además de la redundancia dentro de un anillo, también soportan
el acoplamiento redundante de anillos o segmentos de red abiertos (líneas). En el caso del
acoplamiento redundante, los anillos se acoplan entre sí por medio de dos conexiones
Ethernet. Para ello se configura en un anillo una pareja de dispositivos maestro/esclavo que se
vigilan mutuamente desviando, en caso de fallo, el tráfico de datos de la conexión Ethernet
utilizada normalmente como maestro a la conexión Ethernet alternativa (esclavo).

2212

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Redundancia Standby
Operator Stations

Operator Station
S7-300

Industrial Ethernet / PROFINET (Twisted Pair)
Industrial Ethernet / PROFINET (Fiber Optic)

SCALANCE
XR528-6M

SCALANCE
XM408-8C
100 Mbit/s

SCALANCE XC208

S7-1500

SCALANCE XB205-3
as standby master

S7-1500

SCALANCE XB205-3
as standby slave

100 Mbit/s

S7-400

SCALANCE
X204-2

SCALANCE
X308-2
IPC

SIMATIC
S7-1200

Figura 1-121

Ejemplo de acoplamiento redundante de dos anillos SCALANCE X‑200 IRT

Para un acoplamiento redundante, como el ilustrado en la figura, es preciso configurar dos
dispositivos en un mismo segmento de red a modo de switch de redundancia Standby. En este
caso, los segmentos de red son anillos con un administrador de redundancia. En lugar de los
anillos también puede haber segmentos de red con topología en línea.
Los dos switches de redundancia Standby conectados mediante configuración intercambian
telegramas de datos y sincronizan así su estado de servicio (un dispositivo es maestro y el otro
esclavo). Cuando no hay ningún error, solo está activado el canal de acoplamiento con el otro
segmento de la red en el equipo maestro. Si falla dicho canal (p. ej. debido a un Link-Down o
al fallo de un dispositivo), entonces el canal activa su canal de acoplamiento mientras no se
elimine dicho fallo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2213

Configuración de dispositivos y redes
1.4 Crear configuraciones

Acoplamiento de varios segmentos de red HRP
Cuando se conectan varios anillos HRP o líneas mediante la redundancia Standby, el maestro
Standby y el esclavo Standby deben estar en un segmento de red cerrado. Dicho segmento de
red no puede estar abierto en ningún caso, es decir, no puede ser una línea.
Maestro Standby y esclavo Standby en un segmento de red cerrado
Cuando se interrumpe la conexión entre maestro y esclavo Standby, ambos dispositivos
pueden seguir comunicándose a través del trayecto redundante del administración de
redundancia HRP.
Conexión sin perturbaciones

Conexión interrumpida
HRP ring

HRP ring

Linear bus

Linear bus

Standby master

Standby-Master
Standby slave

Standby-Slave

HRP ring
Redundancy manager

Industrial Ethernet / PROFINET (Twisted Pair)
Redundant coupling
Isolated Port

HRP-Ring
Redundanzmanager

Anillo principal HRP_perturbación

Anillo principal HRP

2214

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Maestro Standby y esclavo Standby en un segmento de red abierto
Cuando se interrumpe la conexión entre maestro y esclavo Standby, ambos dispositivos no
pueden seguir comunicándose. Esto provoca un bucle en los segmentos de red acoplados.
Conexión sin perturbaciones

Conexión interrumpida

HRP ring

HRP ring

Linear bus

Linear bus

Linear bus
Redundancy
manager

Linear bus

Standby master

Standby slave

Industrial Ethernet / PROFINET (Twisted Pair)
Redundante Kopplung
Isolated Port
Schleife

Redundancy
manager

Standby master

Standby slave

Línea principal HRP_perturbación

Línea principal HRP

Link Check
Vigilancia de conexiones ópticas en el anillo
Pueden producirse fallos en trayectos de transferencia ópticos en los cuales no se interrumpa
por completo la conexión óptica, sino que solo se pierdan telegramas esporádicamente.
Dichos fallos son causados, p. ej., por cables ópticos defectuosos, conexiones enchufables
sucias o dispositivos averiados.
El administrador de redundancia de un anillo HRP o MRP con conexiones ópticas detecta un
"Non-Recoverable Ring Error" cuando se produce un fallo de este tipo. El administrador de
redundancia no puede solucionar el fallo cerrando el anillo. En este caso, un cierre del anillo
provocaría la circulación continua de los telegramas.
La función Link Check permite vigilar la calidad de transmisión de los trayectos ópticos dentro
de un anillo HRP o MRP, identificar trayectos de transmisión averiados y desconectarlos en
determinadas circunstancias. Cuando el trayecto averiado está desconectado, el
administrador de redundancia puede cerrar el anillo y restablecer la comunicación.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2215

Configuración de dispositivos y redes
1.4 Crear configuraciones

Funcionamiento de Link Check
Comportamiento en caso de conexión sin fallos
Cuando se activa Link Check en dos puertos en anillo conectados, los dos interlocutores
intercambian cíclicamente telegramas de test Link Check en dichos puertos. Los telegramas
que recibe un interlocutor los devuelve al otro interlocutor.
Si los dispositivos reciben del interlocutor los telegramas que previamente le han enviado,
significa que la conexión está preparada para Link Check. A continuación, los interlocutores de
la conexión aumentan la frecuencia de emisión de los telegramas de test Link Check y la
vigilancia de la conexión propiamente dicha está activa.
Comportamiento en caso de fallo
Si la vigilancia de la conexión está activa, el número de telegramas de test Link Check enviados
y recibidos puede visualizarse en la página "Information > Redundancy > Link Check". Esta
estadística permite detectar de antemano pequeños fallos que no son suficientes para
desconectar el trayecto de transferencia defectuoso mediante Link Check.
Link Check detecta una conexión defectuosa y la desconecta si se pierden demasiados
telegramas de test en unos periodos de tiempo determinados. Para ello, Link Check utiliza
varios intervalos de tiempo con el fin de detectar tanto la aparición esporádica de errores como
una tasa de error reducida pero continua.
Un puerto desconectado por Link Check tiene que resetearse para poder comunicarse de
nuevo. Para ello existen 2 posibilidades:
● Extraiga el cable de conexión y vuelva a enchufarlo.
● Inicialice la función en los dos interlocutores pulsando el botón "Reset". Debe realizarlo en
ambos dispositivos en un intervalo de 30 s.
Nota
El uso del botón "Reset" puede provocar bucles breves y con ello el fallo del tráfico de datos.
El bucle se deshace por sí mismo.
Si su caso de aplicación no permite que esto suceda, inicialice Link Check extrayendo el
cable de conexión y volviendo a enchufarlo.
Una vez inicializado Link Check se reinicia la función en el puerto y la estadística se pone a
cero.
Configuración mediante un controlador PROFINET IO
Si se configura MRP a través de un controlador PROFINET IO, la función Link Check puede
activarse desde WBM o CLI para los puertos ópticos en anillo de la 1.ª instancia de anillo MRP.

2216

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Cuando se transfiere una nueva configuración, Link Check se desactiva automáticamente en
todos los puertos que no se han configurado como puertos en anillo de la 1.ª instancia de anillo
MRP.
Nota
Los eventos que afectan a la función Link Check solo son notificados de forma indirecta por
PROFINET IO. Si las alarmas de diagnóstico están activadas y se desactiva un puerto de anillo
mediante LinkCheck, PROFINET IO genera un mensaje de error avisando de que la conexión
ya no existe.

MRP
MRP - Media Redundancy Protocol
El método "MRP" trabaja de acuerdo con el Media Redundancy Protocol (MRP), especificado
en la norma siguiente:
IEC 62439‑2 Edición 1.0 (2010‑02) Industrial communication networks ‑ High availability
automation networks Part 2: Media Redundancy Protocol (MRP)
El tiempo de reconfiguración tras una interrupción del anillo es de 200 ms como máximo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2217

Configuración de dispositivos y redes
1.4 Crear configuraciones

Topología
La figura siguiente muestra una topología posible para dispositivos participantes en un anillo
con MRP.
SIMATIC S7-400
PC

Operator Station
SIMATIC
S7-400

SIMATIC S7-300

PC

SCALANCE
XB205-3

6&$/$1&(
;0

SIMATIC S7-400
SCALANCE
X310

Dominio de redundancia
SIMATIC
S7-1500

S7-400 con
CP 443-1
SCALANCE X208

S7-1500 con
CP 1543-1

SIMATIC
S7-1500
SIMATIC
S7-1200
Industrial Ethernet (Twisted Pair)

Figura 1-122

SIMATIC
S7-1200

Ejemplo de una topología de anillo con el método de redundancia de medios MRP

Para la topología de anillo con redundancia de medios según el método MRP rigen las
siguientes reglas:
● Todos los dispositivos conectados dentro de la topología de anillo son miembros del mismo
dominio de redundancia.
● Un dispositivo del anillo es administrador de redundancia.
● Todos los demás dispositivos pertenecientes al anillo son clientes de redundancia.
Los dispositivos no compatibles con MRP se pueden conectar al anillo a través de un switch
SCALANCE X o de un PC con CP compatible con MRP.

2218

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Requisitos
Para un funcionamiento sin perturbaciones del método de redundancia de medios MRP se
tienen que cumplir las siguientes condiciones:
● MRP es compatible con topologías de anillo con un máximo de 50 dispositivos.
Una superación del número de dispositivos puede hacer que falle el tráfico de datos.
● El anillo en el que se desea utiliza el método MRP debe estar formado solo por dispositivos
compatibles con esta función.
Son, por ejemplo, algunos de los switches Industrial Ethernet SCALANCE X, algunos de los
procesadores de comunicaciones (CPs) para SIMATIC S7 y PGs/PCs o dispositivos ajenos
a Siemens que soportan esta función.
● Todos los dispositivos deben estar comunicados entre sí a través de sus puertos de anillo.
Las conexiones multimodo entre dos IE Switches SCALANCE X pueden llegar hasta 3 km
y las conexiones monomodo hasta 26 km. Si las distancias son mayores es posible que se
prolongue el tiempo de reconfiguración indicado.
● En todos los dispositivos del anillo tiene que estar activado "MRP".
● La configuración de la conexión (medio de transmisión / dúplex) tiene que estar ajustada
para todos los puertos de anillo a dúplex completo y a como mínimo 100 Mbit/s. En otro
caso puede fallar el tráfico de datos.
– STEP 7: en el cuadro de diálogo de propiedades de todos los puertos que participan en
el anillo se tiene que poner la conexión a "Ajuste automático" en la ficha "Opciones".
– WBM: Si se configura a través de Web Based Management, los puertos de anillo se
ajustan automáticamente a "Autonegotiation".
Nota
Número de dispositivos
Excepto en instalaciones PROFINET IO, se han probado con éxito topologías de hasta 100 IE
Switches SCALANCE X-200 y SCALANCE X-300.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2219

Configuración de dispositivos y redes
1.4 Crear configuraciones

Configuración en el WBM
Rol
La elección del papel depende de los siguientes casos de aplicación:
● Desea utilizar MRP en una topología de anillo que contiene solo dispositivos Siemens:
– Seleccione "Automatic Redundancy Detection" o "Administrador automático MRP"
como mínimo en un dispositivo del anillo.
– Seleccione "Cliente MRP" o "Automatic Redundancy Detection" en todos los demás
dispositivos del anillo.
● Desea utilizar MRP en una topología de anillo que también contiene dispositivos de otros
fabricantes diferentes a Siemens:
– Seleccione el papel "MRP Auto-Manager" en un único dispositivo del anillo.
– Seleccione la función "Cliente MRP" para todos los demás dispositivos de la topología
de anillo.
Nota
El uso de "Automatic Redundancy Detection" no es posible si se utilizan dispositivos de
otros fabricantes diferentes a Siemens.
● Los dispositivos de una topología de anillo MRP se configuran en parte desde el WBM y en
parte desde Step 7:
– Para los dispositivos que se configuran desde el WBM, seleccione "Cliente MRP" en
todos ellos.
– Para los dispositivos que se configuran desde STEP 7, seleccione "Manager" o
"Manager (Auto)" en un dispositivo y "Cliente MRP" en todos los demás.
Nota
Cuando se asigna la función "Manager" a un dispositivo en STEP 7, todos los demás
dispositivos del anillo deben tener la función "Cliente MRP". Si en un anillo hay un
dispositivo que tiene la función "Manager" y otro que tiene la función "Manager
(Auto)"/"MRP Auto-Manager", puede producirse una circulación continua de frames y con
ello el fallo de la red.

Configuración
En el WBM configure MRP en las siguientes páginas:
● Configuración (Página 2383)
● Anillo (Página 2411)

2220

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Configuración en STEP 7
Configuración en STEP 7
Para la configuración en STEP 7, seleccione el grupo de parámetros "Redundancia de medios"
en la interfaz PROFINET.
Ajuste los parámetros siguientes para la configuración MRP del dispositivo:
● Dominio
● Función
● Puerto de anillo
● Alarmas de diagnóstico
A continuación se describen estos ajustes.
Nota
Configuración MRP válida
Durante la configuración MRP en STEP 7, asegúrese de que todos los dispositivos del anillo
tengan una configuración MRP válida antes de cerrar el anillo. De lo contrario puede
producirse una circulación continua de frames y con ello el fallo de la red.
Uno de los dispositivos del anillo debe configurarse como "administrador de redundancia" y
todos los demás como "clientes".
Nota
Observar la configuración de fábrica
MRP está desactivado y Spanning Tree activado en los siguientes IE Switches nuevos de
fábrica o con la configuración de fábrica restablecida.
● SCALANCE XB-200 (variantes EtherNet/IP)
● SCALANCE XC-200 (variantes EtherNet/IP)
● SCALANCE XP-200 (variantes EtherNet/IP)
● SCALANCE XR-300WG
● SCALANCE XM-400
● SCALANCE XR-500
Para cargar una configuración de PROFINET con MRP en uno de los dispositivos citados,
primero debe desactivarse Spanning Tree en el dispositivo.
Nota
Reconfiguración solo con anillo abierto
Abra el anillo antes de
● modificar la función MRP o
● reconfigurar los puertos de anillo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2221

Configuración de dispositivos y redes
1.4 Crear configuraciones
Nota
Rearranque completo y normal
Los ajustes de MRP conservan su vigencia también tras un rearranque completo del
dispositivo o después de un fallo de alimentación y el subsiguiente arranque normal, siempre
que el fallo de alimentación no se produzca en los 90 segundos siguientes al cambio de
configuración.
Nota
Arranque priorizado
Si se configura MRP en un anillo, en los dispositivos participantes no se puede utilizar la
función "Arranque priorizado" en aplicaciones PROFINET.
Si desea utilizar la función "Arranque priorizado", tiene que desactivar MRP en la configuración.
En la configuración de STEP 7 del dispositivo correspondiente, ponga la función a "No es
estación del anillo".

Dominio
Anillos MRP simples
Si desea configurar un anillo MRP simple, en la lista desplegable "Dominio" deje la entrada
predeterminada en fábrica "mrpdomain‑1".
Todos los dispositivos que se configuran en un anillo con MRP han de pertenecer al mismo
dominio de redundancia. Un dispositivo no puede pertenecer a varios dominios de
redundancia en un anillo simple.
Varios anillos MRP
Si se configuran varios anillos MRP individuales, los dispositivos se asignan a los diferentes
anillos mediante el parámetro "Domain". Ajuste el mismo dominio para todos los dispositivos
de un anillo. Ajuste dominios distintos para anillos diferentes. Los dispositivos que no forman
parte del mismo anillo deben tener dominios distintos.
Si desea configurar anillos múltiples MRP, seleccione un dispositivo compatible con anillos
múltiples como administrador central de redundancia para un máximo de cuatro anillos. Defina
dominios distintos para todas las instancias de anillo y asígnelos a los correspondientes

2222

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
puertos de anillo del administrador de redundancia. Configure los demás dispositivos como
clientes. Todos los dispositivos de un mismo anillo deben tener el mismo dominio.
Nota
Dispositivos adecuados para anillos múltiples MRP
En calidad de administrador de redundancia que conecta varios anillos es posible utilizar todos
los dispositivos de las siguientes líneas de productos:
● SCALANCE X-300 con versión de firmware V4.0 o superior
● SCALANCE X-400 SCALANCE
– X408-2 con versión de firmware V4.0 o superior
– X414-3E con versión de firmware V3.10 o superior
Nota
Dispositivos adecuados para interconexión MRP
En calidad de administrador y cliente de interconexión para la redundancia de medios es
posible utilizar todos los dispositivos de las siguientes líneas de productos:
● SCALANCE XM-400 con versión de firmware V6.2 o superior
● SCALANCE XR-500 con versión de firmware V6.2 o superior

Función
Nota
Reconfiguración solo con anillo abierto
La elección del papel depende de los siguientes casos de aplicación.
● Se desea utilizar MRP en una topología con un anillo que contiene solo dispositivos
Siemens y no se desean supervisar alarmas de diagnóstico:
Asigne a todos los dispositivos el dominio "mrpdomain‑1" y la función "Manager (Auto)".
Los dispositivos Siemens negocian automáticamente entre sí qué dispositivo debe asumir
realmente el papel de gestor de redundancia durante el servicio.
● Se desea utilizar MRP en una topología con varios anillos empleando únicamente
dispositivos de Siemens y no se desea vigilar las alarmas de diagnóstico:
– Asigne la función "Manager" a todas las instancias del dispositivo que une los anillos.
– Seleccione la función de "Client" para todos los demás dispositivos de la topología de
anillo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2223

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Se desea utilizar MRP en una topología de anillo que contiene también dispositivos noSiemens o bien se desea recibir alarmas de diagnóstico en relación con el estado de MRP
de un dispositivo (véase "Alarmas de diagnóstico"):
– asigne la función de "Manager (Auto)" a un solo dispositivo del anillo.
– Seleccione la función de "Client" para todos los demás dispositivos de la topología de
anillo.
● Si desea desactivar MRP:
seleccione la opción "No participante en el anillo" si no desea que el dispositivo trabaje
dentro de una topología de anillo con MRP.
Nota
Papel al restablecer la configuración de fábrica
Los dispositivos de Siemens nuevos de fábrica y cuya configuración se ha restablecido a
los ajustes de fábrica tienen ajustada la función MRP siguiente:
● "Manager (Auto)"
– CPs
● "Automatic Redundancy Detection"
– SCALANCE X-200
– SCALANCE XB-200 (variantes PROFINET)
– SCALANCE XC-200 (variantes PROFINET)
– SCALANCE XF-200BA
– SCALANCE XP-200 (variantes PROFINET)
– SCALANCE X-300
– SCALANCE X-400
Si utiliza en el anillo un dispositivo no-Siemens como gestor de redundancia, esto puede
causar el fallo del tráfico de datos.
MRP está desactivado y Spanning Tree activado en los siguientes IE Switches nuevos de
fábrica o con la configuración de fábrica restablecida.
● SCALANCE XB-200 (variantes EtherNet/IP)
● SCALANCE XC-200 (variantes EtherNet/IP)
● SCALANCE XP-200 (variantes EtherNet/IP)
● SCALANCE XR-300WG
● SCALANCE XM-400
● SCALANCE XR-500

Puerto de anillo 1 / Puerto de anillo 2
Seleccione aquí en cada caso el puerto que desea configurar como puerto de anillo 1 o puerto
de anillo 2.
En switches con más de 8 puertos, es posible que no se puedan seleccionar todos los puertos
como puertos de anillo.

2224

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
La lista desplegable muestra, para cada tipo de dispositivo, los puertos que se pueden
seleccionar. Si los puertos se han fijado en fábrica, los campos aparecen en gris.
ATENCIÓN
Puertos de anillo al restablecer la configuración de fábrica
Con la restauración de la configuración de fábrica se restaura también la configuración del
puerto de anillo.
Si antes de restablecer la configuración de fábrica se utilizaban otros puertos como puertos
de anillo, es posible que, al establecer la conexión, un dispositivo configurado previamente de
forma correcta provoque una circulación continua de frames y, con ello, el fallo del tráfico de
datos.
Nota
Reconfiguración solo con anillo abierto
Abra el anillo antes de reconfigurar los puertos de anillo de un administrador de anillo.

Alarmas de diagnóstico
Active la opción "Alarmas de diagnóstico" si se deben emitir alarmas de diagnóstico relativas
al estado de MRP en la CPU local.
Se pueden formar las siguientes alarmas de diagnóstico:
● Error de cableado o puerto
Para los errores siguientes en los puertos de anillo se generan alarmas de diagnóstico:
– Cancelación de la conexión en un puerto de anillo
– Un vecino del puerto de anillo no es compatible con MRP.
– Un puerto de anillo está conectado a un puerto que no es puerto de anillo.
– Un puerto de anillo está conectado al puerto de anillo de otro dominio MRP.
● Cambio de estado activo/pasivo (solo administrador de redundancia)
Si cambia el estado de un anillo (activo/pasivo) se genera una alarma de diagnóstico.

Parametrización de la redundancia no dada por STEP 7 (redundancia alternativa)
Esta opción concierne a todos los switches SCALANCE X. Seleccione esta opción si las
propiedades de la redundancia de medios deben ser parametrizadas por mecanismos
alternativos como, por ejemplo, WBM, CLI o SNMP.
Si se activa esta opción se mantienen los ajustes de redundancia existentes y no se
sobrescriben. A continuación, los parámetros del campo "Configuración de MRP" se resetean
y se representan en gris. Las entradas no son relevantes.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2225

Configuración de dispositivos y redes
1.4 Crear configuraciones

Interconexión MRP
El método de interconexión MRP es una ampliación de MRP y permite el acoplamiento
redundante de dos o más anillos MRP en redes que no son compatibles con tiempo real. La
interconexión MRP está especificada en la norma IEC 62439-2, igual que MRP. Con la
interconexión MRP es posible una reconfiguración muy rápida que no suele tardar más de 200
milisegundos.

Topología
El gráfico siguiente muestra el acoplamiento redundante de dos anillos MRP. Asimismo, la
interconexión MRP es compatible también con otras topologías, aunque el firmware actual
todavía no las soporta.

3ULPDU\
0,&

0,0

3ULPDU\
/LQN
3ULPDU\
&RXSOHG0,&

Figura 1-123

6HFRQGDU\
/LQN
6HFRQGDU\
&RXSOHG0,&

Conexión redundante de dos anillos MRP con interconexión MRP

Principio de funcionamiento
Para la interconexión MRP es imprescindible utilizar MRP en todos los anillos pertinentes.
Para las dos conexiones de interconexión MRP se requieren cuatro dispositivos:
● Un administrador de interconexión de redundancia de medios (MIM, representado con
contorno rojo en el gráfico)
● Tres clientes de interconexión de redundancia de medios (Primary MIC, Primary Coupled
MIC y Secondary Coupled MIC)

2226

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Puesto que cada dispositivo forma parte de un anillo MRP, cada uno asume adicionalmente
una de las funciones definidas para MRP, es decir, MRC o MRM.
En función del estado de conexión de los puertos de interconexión, los MIC envían avisos de
estado (Link Up o Link Down) al MIM. Los puertos de interconexión son puertos entre los que
hay la conexión primaria o secundaria. De este modo, el MIM siempre está informado del
estado de conexión entre el Primary MIC y el Primary Coupled MIC ("conexión primaria") así
como de su propia conexión con el Secondary Coupled MIC ("conexión secundaria"). En el
funcionamiento normal, el intercambio de datos entre los dos anillos se lleva a cabo por la
conexión primaria y el MIM bloquea su puerto de interconexión. Si se notifica al MIM un Link
Down de la conexión primaria, conmuta su puerto de interconexión al estado "Forwarding" y el
intercambio de datos entre los dos anillos se lleva a cabo por la conexión secundaria entre el
MIM y el Secondary Coupled MIC.
Nota
Dispositivos adecuados para interconexión MRP
El administrador de interconexión, el cliente de interconexión y todos los demás dispositivos de
los anillos deben soportar la interconexión MRP. Esto se da en los siguientes dispositivos:
● SCALANCE XM-400 con versión de firmware V6.2 o superior
● SCALANCE XR-500 con versión de firmware V6.2 o superior

Documentación complementaria
Encontrará descripciones complementarias sobre la configuración de Interconexión MRP en
el manual de configuración WBM de SCALANCE XM-400/SCALANCE XR-500.
Encontrará la documentación complementaria aquí:
● En el soporte de datos incluido en el suministro de algunos productos:
– CD de producto / DVD de producto
– SIMATIC NET Manual Collection
● En las páginas de Internet del Siemens Industry Online Support (https://
support.industry.siemens.com/cs/ww/es/ps/15313/man)

Parallel Redundancy Protocol
Parallel Redundancy Protocol
El "Parallel Redundancy Protocol" (PRP) es un protocolo de redundancia para las redes
Ethernet. Está definido en el apartado 3 del estándar IEC 62439. Este procedimiento de
redundancia permite mantener la comunicación de datos sin interrupciones ni tiempos de
reconfiguración en caso de interrupciones de la red.
Los dispositivos de la línea de productos SCALANCE X-200RNA soportan el procedimiento
PRP, por ejemplo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2227

Configuración de dispositivos y redes
1.4 Crear configuraciones

Frames de longitud excesiva
Cuando se envían frames PRP, el IE Switch alarga el frame con un trailer PRP. Al adjuntarse
el trailer PRP, en los frames con longitud máxima se genera un frame excesivamente largo que
supera la longitud de frame admisible (según el estándar IEEE 802.3).
Para evitar pérdidas de datos a causa de frames excesivamente largos, todos los
componentes de red que se encuentren en la red PRP deben soportar una longitud de frame
de al menos 1528 bytes.
Los dispositivos descritos en el presente manual pueden emplearse en redes PRP; consulte
también el capítulo "Capacidades (Página 2189)".

Función Routing
Introducción
El término Routing describe el establecimiento de vías (rutas) para la comunicación entre
diferentes redes, es decir, cómo debe llegar el paquete de datos desde la subred A a la subred
B.
SCALANCE X soporta las siguientes funciones de routing:
● Routing estático
En el routing estático las rutas se introducen manualmente en la tabla de routing.
● Redundancia del router
Con un VRRP (Virtual Router Redundancy Protocol) estandarizado, la disponibilidad de las
pasarelas importantes aumenta gracias a routers redundantes.
– VRRPv2 (IPv4)
– VRRPv3 (IPv4 / IPv6)
● Routing dinámico
Las entradas de la tabla de routing son dinámicas y se actualizan de forma continua. Las
entradas se generan con uno de los siguientes protocolos de routing dinámico:
– OSPFv2 (IPv4)
– OSPFv3 (IPv6)
– RIPv2 (IPv4)
– RIPng (IPv6)
– MSDP
– PIM Sparse Mode
– BiDir PIM

2228

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

VRRP
VRRPv2
Redundancia del router con VRRP
El Virtual Router Redundancy Protocol (VRRP) permite detectar el fallo de un router en una red.
VRRP solo puede utilizarse en interfaces IP virtuales (interfaces VLAN), no en puertos router.
Varios routers VRRP de un segmento se unen en un grupo lógico que representa un router
virtual (VR). El grupo se define mediante la ID virtual (VRID). Todo el grupo debe tener la
misma VRID. Esta VRID no puede utilizarse para otros grupos.
Al router virtual se le asignan una dirección IP virtual y una dirección MAC virtual. Uno de los
routers VRRP del grupo se establece como router maestro. El router maestro tiene la prioridad
255. Los otros routers VRRP son de reserva. El router maestro asigna a su interfaz de red las
direcciones IP y MAC virtuales. El router maestro envía paquetes VRRP (Advertisements) a los
routers de reserva en intervalos determinados. Con ellos señaliza que sigue operativo. El
router maestro responde también a las consultas ARP.
Si el router maestro virtual falla, un router de reserva adopta las funciones del maestro. El
router de reserva con mayor prioridad se convierte en router maestro. Si la prioridad de los
routers de reserva es la misma, decide la dirección MAC más alta. El router de reserva se
convierte en el nuevo router maestro virtual.
El nuevo router maestro virtual adopta las direcciones MAC e IP virtuales. Con ello no es
necesario actualizar las tablas de routing o las tablas ARP. De este modo se minimizan las
consecuencias del fallo de un dispositivo.
VRRP se configura en "Layer 3 (IPv4) > VRRP".

VRRP3
La versión 3 de VRRP se basa en la versión 2.
Nota
● Active el routing para utilizar VRRPv3.
● VRRPv3 solo puede utilizarse en combinación con interfaces VLAN. No se admiten puertos
router.
● No es posible utilizar simultáneamente VRRP y VRRPv3.
● VRRPv3 es compatible con IPv4 e IPv6. Ambos pueden configurarse y utilizarse
simultáneamente con VRRP3.
VRRPv3 se configura en:
IPv4: Layer 3 (IPv4) > VRRPv3
IPv6: Layer 3 (IPv6) > VRRPv3

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2229

Configuración de dispositivos y redes
1.4 Crear configuraciones

OSPF
OSPFv2
Routing dinámico con OSPFv2
OSPF (Open Shortest Path First) es un protocolo de routing basado en los costes. Para
calcular la ruta más corta y rentable se utiliza el algoritmo Short Path First de Dijkstra. El OSPF
fue desarrollado por la IETF (Internet Engineering Task Force).
OSPFv2 se configura en "Layer 3 (IPv4) > OSPFv2".
OSPFv2 divide un sistema autónomo (AS) en diferentes áreas.

Áreas del OSPF
Existen las siguientes áreas:
● Backbone
El área Backbone es el área 0.0.0.0. A ella están conectadas todas las áreas restantes. El
área Backbone puede estar conectada a otras áreas directamente o a través de conexiones
virtuales.
En el área Backbone se encuentra toda la información de routing. Así, esta área es la
responsable de transmitir la información entre diferentes áreas.
● Stub Area
Esta área contiene las rutas dentro de su área, dentro del área autónoma y la ruta estándar
de salida del sistema autónomo. Los destinos situados fuera del sistema autónomo se
asignan a la ruta estándar.
● Totally Stubby Area
Esta área solo contiene las rutas dentro de su área y la ruta estándar para salir del área.
● Not So Stubby Area (NSSA)
Esta área puede transmitir paquetes de otros sistemas autónomos a las áreas del propio
sistema autónomo (redistribute). Los paquetes se distribuyen desde el router NSSA.

Router del OSPF
El OSPF distingue entre los siguientes tipos de router:
● Router interno (IR)
Todas las interfaces OSPF del router están asignadas a la misma área.
● Area Border Router (ABR)
Las interfaces OSPF del router están asignadas a distintas áreas. Una interfaz OSPF está
asignada al área Backbone. Si es posible, las rutas se agrupan.
● Backbone Router (BR)
Al menos una de las interfaces OSPF está asignada al área Backbone.
● Autonomous System Border Router (ASBR)
Una interfaz del router está conectada a otro AS, p. ej. un AS que utiliza el protocolo de
routing RIP.

2230

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Conexión virtual
Cada área debe estar conectada al área Backbone. En algunos casos no es posible realizar
una conexión física directa. En este caso debe conectarse un router del área en cuestión con
un router Backbone a través de una conexión virtual.

Tipos de LSA
Dentro del sistema autónomo se intercambian paquetes, que contienen información sobre las
conexiones de un router y el aviso de estado de la conexión. Los paquetes también se conocen
como LSA (Link State Advertisements). Los LSA se envían siempre del router al router vecino.
Si hay cambios en la red, los LSA se envían a todos los routers de la red. La información
depende del tipo de LSA.

166$
$6%5



166$
$UHD


$%5




6WXE$UHD


 
,5



%5



$%5



$%5

  



,5

'5

  

$%5
,5







6WXE$UHD

  







%DFNERQH
$UHD

$%5



6WXE$UHD



$6%5

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2231

Configuración de dispositivos y redes
1.4 Crear configuraciones











2232

Router LSA (tipo de LSA 1)
El tipo de LSA 1 solo se envía dentro de un área. Para cada conexión activa del router
que forma parte del área observada se genera un tipo de LSA 1. El tipo de LSA 1
contiene información sobre el estado y los costes de la conexión, p. ej. dirección IP,
máscara de red y tipo de red.
Network LSA (tipo de LSA 2)
El tipo de LSA 2 solo se envía dentro de un área. Para cada red que forma parte del área
observada, el router genera un tipo de LSA 2. Si en una red hay varios routers interco‐
nectados, el router designado (DR) envía el tipo de LSA 2. El tipo de LSA 2 contiene
entre otros la dirección de red, la máscara de red y una lista de los routers conectados
a la red.
Summary LSA (tipo de LSA 3 / tipo de LSA 4)
El Summary LSA es generado por el Area Border Router y se envía dentro del área. El
Summary LSA contiene información sobre rutas que están fuera del área pero dentro
del AS. Si es posible, las rutas se agrupan.
● Summary LSA (tipo de LSA 3)
El tipo de LSA 3 describe las rutas hacia las redes y propaga la ruta estándar por las
áreas.
● AS Summary LSA (tipo de LSA 4)
El tipo de LSA 4 describe las rutas hacia los ASBR.
External LSA (tipo de LSA 5 / tipo de LSA 7)
El External LSA es generado por el ASBR. El tipo de LSA depende del área.
● AS External LSA (tipo de LSA 5)
El tipo de LSA 5 es enviado por el AS Border Router a las áreas del sistema
autónomo, excepto a las áreas Stub y NSSA. El LSA contiene información sobre las
rutas hacia una red de otro AS. Las rutas se han creado manualmente o bien se han
aprendido externamente. El ASBR utiliza el tipo de LSA 5 para distribuir rutas
estándar al área Backbone.
● NSSA External LSA (tipo de LSA 7)
El tipo de LSA 7 es generado por el AS Border Router de un NSSA. Dicho router
también se denomina NSSA ASBR. El tipo de LSA 7 se envía únicamente dentro del
NSSA. Si en el tipo de LSA 7 el bit P = 1, el ABR convierte estos LSA en el tipo de
LSA 5 y los envía al área Backbone.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Establecer una vecindad
El router pasa por los estados siguientes para establecer una conexión con el router vecino.
1. Attempt state / Init state
El router activa OSPF y empieza a enviar y recibir paquetes Hello. Por medio de los
paquetes Hello recibidos, el router averigua los routers OSPF que están a su lado. El router
comprueba el contenido del paquete Hello. El paquete Hello incluye también una lista de los
routers vecinos (Neighbor Table) del "remitente".
2. Two way state
Si, p. ej., la ID del área, el tipo de área y los ajustes de los temporizadores coinciden, es
posible establecer una conexión (adjacencies) con el vecino. En una red punto a punto, la
conexión se admite directamente. Si en una red debe accederse a varios routers vecinos,
los paquetes Hello determinan el router designado (DR) y el router de reserva designado
(DBR). El router con mayor prioridad es el router designado. Si dos routers tienen la misma
prioridad, será router designado el que tenga la mayor ID de router. El router establece una
conexión con el router designado.
3. Exchangestart state
Los routers vecinos establecen el router con el que se inicia la comunicación. El router con
mayor ID se convierte en router designado.
4. Exchange state
Los routers vecinos envían paquetes que describen el contenido de su base de datos de
vecindad. La base de datos de vecindad (Link state database - LSDB) contiene información
sobre la topología de la red.
5. Loading state
El router completa la información recibida. Si el router todavía tiene dudas sobre el estado
de una conexión concreta, envía una consulta (Link State Request). El router vecino envía
una respuesta (Link State Update). La respuesta incluye un LSA correspondiente. El router
confirma la recepción de la respuesta (Link State Acknowledge).
6. Full State
El intercambio de información con el router vecino ha finalizado. La base de datos de
vecindad de los routers vecinos es la misma. Utilizando el algoritmo Short Path First, el
router calcula una ruta hacia cada destino. La ruta se introduce en la tabla de routing.

Comprobar la vecindad
Los paquetes Hello no se utilizan únicamente para establecer relaciones de vecindad. Puesto
que se envían cíclicamente, los paquetes Hello sirven también para comprobar la conexión
con el router vecino. Si pasado un intervalo determinado (Dead Intervall) no se recibe ningún
paquete Hello, la conexión con el vecino se marca como "fallida". Las entradas
correspondientes se borran.

Actualizar la base de datos de vecindad
Una vez se ha creado la base de datos de vecindad, cuando se producen cambios en la
topología se envían LSA a todos los routers de la red.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2233

Configuración de dispositivos y redes
1.4 Crear configuraciones

OSPFv3
La versión 3 de OSPF se basa en la versión 2 y solo se utiliza con IPv6. Se ha aprovechado
una gran parte de los mecanismos de routing. OSPFv3 está definido en las RFC 2740 y 5340.
OSPFv3 se configura en "Layer 3 (IPv6) > OSPFv3".
Se han incorporado los cambios siguientes:
● Los estados por los que pasa un router para establecer una conexión con el router vecino.
● Las áreas: Backbone, Stub Area, Totally Stubby Area, Not So Stubby Area (NSSA)
● Los tipos de router: Router interno (IR), Area Border Router (ABR), Backbone Router (BR),
Autonomous System Area Border Router (ASBR), Designated Router (DR)
● La ID de router, la ID de área y la ID de LSA se introducen en formato de dirección IPv4:
x.x.x.x

¿Qué ha cambiado?
Términos
Los términos "red" y "subred" se sustituyen por "link".
Autenticación
Se ha eliminado la autenticación. OSPFv3 utiliza en su lugar IPsec, que está implementado en
IPv6.
Router vecino
Los routers vecinos se identifican por la ID de router.
Base de datos de vecindad
La base de datos de vecindad (Link state database - LSDB) se divide en diferentes ámbitos de
validez:
● Link-Scope LSDB
Contiene la Link LSA
● Area-Scope LSDB
Contiene las siguientes LSA
– Router LSA
– Network LSA
– Inter-Area Prefix LSA
– Inter Area-Router LSA
– Intra-Area Prefix LSA
● AS-Scope LSDB
Contiene la AS External LSA

2234

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Tipos de LSA
Para OSPFv3 se han definido dos nuevos tipos de LSA.
OSPFv2

OSPFv3

Quién

Dentro
de

Descripción

1 Router LSA

0x2001

Router
LSA

Cual‐
quier
router

Área

Ya no contiene información de dirección. Esta se incluye en
el nuevo tipo de LSA 2009.

2 Network LSA

0x2002

Network
LSA

DR

Área

Ya no contiene información de dirección. Esta se incluye en
el nuevo tipo de LSA 2009.

3 Summary
LSA

0x2003

Inter-Area ABR
Prefix LSA

Área

La misma función que en OSPFv2 pero con otro nombre.

4 AS Summary
LSA

0x2004

Inter-Area
Router
LSA

ABR

Área

La misma función que en OSPFv2 pero con otro nombre.

5 AS External
LSA

0x4005

AS Exter‐
nal LSA

ASBR

AS

La misma función que en OSPFv2 pero con otro nombre.

7 NSSA Exter‐
nal LSA

0x2007

LSA de ti‐
po 7

NSSA
ASBR

NSSA

La misma función que en OSPFv2 pero con otro nombre.

0x2008

Link LSA

Cual‐
quier
router

Link

El router envía el LSA a todos los routers enlazados con él. El
LSA contiene la dirección Link Local del router y una lista con
prefijos IPv6 configurados en el link.

0x2009

Intra-Area Cual‐
Prefix LSA quier
router

Área

El LSA solo se envía dentro de un área. El LSA contiene los
prefijos IPv6 conectados con el router o la red.

Al contrario que en OSPFv2, OSPFv3 puede reenviar tipos de LSA desconocidos. Hasta ahora
se borraban y no seguían transmitiéndose.

RIP
RIPv2
Routing dinámico con RIPv2
El Routing Information Protocol (RIPv2) se utiliza para crear automáticamente tablas de
routing. RIPv2 se emplea en sistemas autónomos (AS) con un máximo de 15 routers (Hops).
Se basa en el algoritmo de vector de distancias.
RIPv2 fue desarrollado por la IETF (Internet Engineering Task Force) y está descrito en RFC
2453.
RIPv2 se configura en "Layer 3 (IPv4) > RIPv2".

Crear una tabla de routing
Puesto que, en un principio, un router solo conoce las redes que están directamente
conectadas a él, envía una consulta a sus routers vecinos. La respuesta que recibe contiene
las tablas de routing de los routers vecinos. Basándose en la información obtenida, el router
crea una tabla de routing propia.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2235

Configuración de dispositivos y redes
1.4 Crear configuraciones
Dicha tabla contiene entradas para todos los destinos posibles. Cada entrada incluye la
distancia hasta el destino y el primer router de la ruta.
La distancia también se denomina métrica. Indica el número de routers por los que se pasará
siguiendo una ruta hasta el destino (Hop Count). La distancia máxima permitida es de 15
routers (Hops).

Actualizar la tabla de routing
Una vez se ha creado la tabla de routing, el router envía su tabla de routing a todos los routers
vecinos en intervalos de 30 segundos a través del puerto UDP 520.
El router compara la información de routing nueva con la tabla de la que dispone. Si la
información nueva contiene rutas más cortas, se sobrescriben las rutas existentes. El router
solo conserva la ruta más corta hasta un destino.

Comprobar un router vecino
Si un router no recibe mensajes de un router vecino durante más de 180 segundos, lo marca
como no válido. El router asigna al router vecino la métrica 16.

RIPng
RIPng (RIP next Generation) solo se utiliza con IPv6 y está definido en la RFC 2080. Igual que
RIP (IPv4), RIPng se basa en el algoritmo de vector de distancias de Bellman-Ford.
Al contrario que RIPv2, RIPng se activa directamente en la interfaz (interfaz VLAN / puerto
router) y no globalmente en el dispositivo.
RIPng utiliza el puerto UDP 521 y RIP el puerto UDP 520.
RIPng se configura en "Layer 3 (IPv6) > RIPng".

PIM
Protocol Independent Multicast (PIM) permite el enrutamiento de paquetes Multicast,
independientemente del protocolo de routing subordinado, como OSPFv2 o routing estático
(IPv4). PIM amplía la información de routing del protocolo Unicast activo en el router con el fin
de proporcionar información adicional para el modo Multicast.
Requisitos para PIM:
● IGMP está activado en los routers First Hop y Last Hop de la topología de routing.
● PIM está activado en todos los routers de la topología de routing.
● Hay como mínimo un punto de encuentro (RP).
● En cada subred hay un router designado (DR).
● El DR debe ser también el IGMP Querier.

2236

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Red PIM
PIM trabaja en modo Sparse, que está pensado para redes con un número de dispositivos
reducido.
Sparse Mode (SM)
Cuando un router recibe un Multicast, envía esta información al punto de encuentro (RP). Un
dispositivo que quiere recibir un Multicast envía un IGMP Join a los routers de su subred. El
router designado (DR) de la red envía esta solicitud al RP. De este modo, el RP dispone de la
dirección Unicast del emisor y de una dirección Unicast para el receptor, la del DR.
En el Sparse Mode, entre emisor y receptor se elige la ruta más corta de acuerdo con la tabla
de routing y, seguidamente, se envía la información.
Multicast bidireccional y Designated Forwarder
La función "Multicast bidireccional" es una variante del Sparse Mode, en el que la información
entre emisor y receptor siempre se envía a través del punto de encuentro.
En el Multicast bidireccional el DR se sustituye por el Designated Forwarder (DF). Si el DF
recibe un IGMP Join, envía un mensaje (*, G) al RP. El RP sustituye el * por el origen y
establece así la conexión. Solo el DF reenvía el Multicast.
Punto de reencuentro (RP) y Bootstrap Router (BSR)
El punto de reencuentro administra la información sobre el emisor y el receptor. Los puntos de
encuentro pueden crearse estáticamente o se pueden definir candidatos RP.
Si define candidatos RP, necesitará un Bootstrap Router. El BSR coordina los candidatos RP
y determina un RP. Se definen candidatos BSR de los cuales uno se convierte en Bootstrap
Router.
BSR Border
La función "BSR Border" permite dividir una red PIM en dominios. Entre los dominios PIM no
se produce ninguna comunicación BSR, de modo que en cada dominio se selecciona un BSR.
El BSR de los dominios determina un RP para los dominios.
MSDP
Los RPs se comunican a través de límites de dominio PIM por medio de MSDP y sincronizan
los grupos Multicast que reciben. De ese modo, un dispositivo del dominio A puede recibir un
Multicast aunque la información sobre el emisor sea administrada por el RP del dominio B.
Source specific-Multicast (SSM)
PIM Source specific-Multicast es otra variante del Sparse Mode, que no requiere puntos de
reencuentro. A través de IGMPv3 el receptor notifica al router directamente el origen y el
Multicast con el que desea recibir.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2237

Configuración de dispositivos y redes
1.4 Crear configuraciones

Ejemplo
En este ejemplo, el origen envía un Multicast al router conectado. El router envía esta
información al punto de encuentro.
/D\HU
VLAN 1

VLAN 2

VLAN 3

Punto de encuentro

Destinatario
Origen

IGMP Querier y DR
VLAN 4

Topología de routing Unicast

*UXSR0XOWLFDVW

El receptor envía un IGMP Join a su IGMP Querier y al router designado. El DR reenvía la
solicitud al RP.
De acuerdo con la tabla de routing se elige la ruta más corta para el Multicast.

NAT/NAPT
Nota
NAT/NATP solo es posible en Layer 3 del modelo de referencia ISO/OSI. Para el uso de la
función NAT, las redes tienen que utilizar el protocolo IP.
Si se utiliza el protocolo ISO, que trabaja en Layer 2, no es posible el uso de NAT.

2238

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

/D\HU
,QVLGH

3&
*HU¦W




VLAN X: 192.168.16.0/24

2XWVLGH





3&


VLAN Y: 10.0.0.0/24

En Network Address Translation (NAT) las subredes IP se dividen en "Inside" y "Outside". La
división responde a la perspectiva de una interfaz NAT. Todas las redes accesibles a través de
la propia interfaz NAT, se consideran "Outside" para esa interfaz. Todas las redes accesibles
a través de otras interfaces del mismo dispositivo, se consideran "Inside" para la interfaz NAT.
Si se enruta a través de una interfaz NAT, las direcciones de origen o destino de los paquetes
de datos transmitidos cambian al pasar de "Inside" a "Outside". La dirección de comunicación
determina si cambia la dirección IP de origen o de destino. Siempre se adapta la dirección IP
del interlocutor que se encuentra "Inside". Dependiendo de la perspectiva, la dirección IP de un
interlocutor se denominará "Local" o "Global".
Perspectiva
Posición

Local

Global

Inside

Una dirección IP real asignada a
un dispositivo situado dentro de la
red interna. Esta dirección no es
accesible desde la red externa.

Una dirección IP en la que está ac‐
cesible un dispositivo interno des‐
de la red externa.

Outside

Una dirección IP real asignada a un dispositivo situado dentro de la red
externa.
Dado que solo se convierten direcciones "Inside", no se distingue entre
Outside Local y Outside Global.

Ejemplo
En el ejemplo se conectan entre sí dos subredes IP a través de un IE Switch. La división
responde a la perspectiva de la interfaz NAT 10.0.0.155. La comunicación de PC2 con PC1 se
desarrolla a través de NAT/NAPT.
La dirección IP real de PC1 (Inside Local) se convierte estáticamente con NAT. Para PC2 PC1
es accesible en la dirección Inside Global.
Perspectiva
Posición

Local

Global

Inside

192.168.16.150

10.0.0.7

Outside

10.0.0.10

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2239

Configuración de dispositivos y redes
1.4 Crear configuraciones
La dirección IP real de PC1 (Inside Local) se convierte con NAPT (Network Address and Port
Translation). Para PC2 PC1 es accesible en la dirección Inside Global.
Perspectiva
Posición

Local

Global

Inside

192.168.16.150:80

10.0.0.7:80

Outside

10.0.0.10:1660

Capacidad de cálculo
Debido a la limitación de carga a la CPU, la recepción de paquetes del dispositivo está limitada
a 300 paquetes por segundos. Eso equivale a un flujo de datos máximo de 1,7 Mbits/s. Esta
limitación de carga no es aplicable por interfaz, sino en general para todos los paquetes que
van a la CPU.
Toda la comunicación NAT se desarrolla a través de la CPU, por lo que compite con la
comunicación IP que va a la CPU, p. ej. WBM y Telnet.
Recuerde que una gran parte de la capacidad de cálculo está ocupada si se utiliza NAT. Eso
puede ralentizar el acceso a través de Telnet o WBM.

NAT
Con la función "Network Address Translation" (NAT) se sustituye la dirección IP contenida en
un paquete de datos por otra. Por regla general, NAT se utiliza en una transición de red entre
una red interna y una red externa.
En Source-NAT, en la transición de red un dispositivo NAT convierte la dirección Inside Local
de origen de un paquete IP de un dispositivo de la red interna en una dirección Inside Global.
En Destination-NAT, en la transición de red un dispositivo NAT convierte la dirección Inside
Global de destino de un paquete IP de un dispositivo de la red externa en una dirección Inside
Local.
Para convertir la dirección IP interna a la externa y al revés, el dispositivo NAT gestiona una
lista de conversión. La asignación de direcciones puede ser dinámica o estática. NAT se
configura en "Layer 3 (IPv4) > NAT".

NAPT
En el caso de "Network Address Port Translation" (NAPT) se convierten varias direcciones IP
internas en la misma dirección IP externa. Para identificar los distintos dispositivos se
almacena también el puerto del dispositivo interno en la lista de conversión del dispositivo NAT
y se convierte para la dirección externa.
Si varios dispositivos internos envían a través del dispositivo NAT una petición a la misma
dirección IP de destino externa, el dispositivo NAT inscribe en cada caso su dirección IP de
origen externa propia en el encabezado de estos telegramas transmitidos. Dado que los
telegramas transmitidos tienen la misma dirección IP externa, el dispositivo NAT asigna los
telegramas a los dispositivos a través de un número de puerto distinto.

2240

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Si un dispositivo de la red externa desea utilizar un servicio de la red interna, hay que configurar
la lista de traducción para la asignación estática de direcciones. NAPT se configura en "Layer
3 (IPv4) > NAT > NAPT (Página 2464)".

NAT/NAPT y Routing IP
NAT/NAPT y Routing IP se pueden activar simultáneamente. En este caso hay que regular la
accesibilidad de las direcciones internas desde redes externas con normas ACL.

Single Hop Inter-VLAN Routing
Introducción
Una red física se divide en dominios Broadcast y subredes mediante VLANs.
Los dispositivos (hosts) situados dentro de una VLAN pueden comunicarse directamente entre
sí a través de Layer 2. Los telegramas se reenvían al dispositivo correspondiente a partir de la
dirección MAC.
Los dispositivos situados en VLAN diferentes no pueden comunicarse directamente entre sí a
través de Layer 2. El tráfico de datos debe direccionarse en función de la dirección IP.
La función Single-Hop Inter-VLAN-Routing permite la comunicación directa entre sí de
dispositivos de diferentes VLANs sin que sea necesario un router.
Requisitos
● El IE Switch puede administrar varias interfaces IP.
● El IE Switch forma parte de las VLANs entre las cuales debe producirse el direccionamiento.
● En los hosts, la dirección IP de la VLAN está registrada como pasarela predeterminada.
Single Hop Inter-VLAN Routing
El IE Switch recibe un telegrama y reconoce que está direccionado a un dispositivo de otra
VLAN. Reenvía el telegrama al puerto correspondiente de la VLAN.
El IE Switch solo reconoce las VLANs con las que está conectado directamente (Connected).
Por ello, en el Single Hop Inter-VLAN Routing solo es posible direccionar entre dos interfaces
IP locales.
Ejemplo
En este ejemplo el host A está conectado con el IE Switch a través de la VLAN 1. El host B está
conectado con el IE Switch a través de la VLAN 2. En el host A la dirección IP de la VLAN 1 está
registrada como pasarela predeterminada. En el host B la dirección IP de la VLAN 2 está
registrada como pasarela predeterminada.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2241

Configuración de dispositivos y redes
1.4 Crear configuraciones

/D\HU
SCALANCE
XP216PoE
Dirección IP
VLAN1:
1.1.1.100

Host A

Dirección IP
VLAN2:
2.2.2.200

Host B

Dirección IP 1.1.1.1
Pasarela 1.1.1.100

Dirección IP 2.2.2.2
Pasarela 2.2.2.200

VLAN 1

VLAN 2

Si la función Single Hop Inter-VLAN Routing está activada en el SCALANCE XP216PoE, el
host A y el host B podrán comunicarse entre sí.

Link Aggregation
Link Aggregation
Con la Link Aggregation o agregación de enlaces se agrupan varios enlaces físicos que
transcurren en paralelo y que tienen la misma velocidad de transmisión en un único enlace
lógico que ofrece mayor velocidad de transmisión. Este procedimiento conforme con
IEEE 802.3ad también se denomina Port Trunking o Channel Bundling.
Link Aggregation funciona sólo con enlaces dúplex que tengan la misma velocidad de
transmisión y funcionen en modo punto a punto. Así se consigue ampliar el ancho de banda o,
lo que es lo mismo, aumentar la velocidad de transmisión. Si falla una parte del enlace, el
tráfico de datos se gestiona a través de las partes restantes.
Para el control se utiliza el Link Aggregation Control Layer (LACL) y el Link Aggregation Control
Protocol (LACP).

Quality of Service
Quality of Service (QoS) es un método que sirve para aprovechar con eficiencia el ancho de
banda existente en una red.
QoS se lleva a cabo priorizando el tráfico de datos. Los frames entrantes se clasifican en una
cola de espera (Queue) en función de una priorización determinada y se procesan
posteriormente. De este modo se otorga prioridad a determinados frames.

2242

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Los distintos métodos QoS se influyen mútuamente, por lo que se consideran en el orden
siguiente:
1. En primer lugar, el switch comprueba si el frame entrante es un frame Broadcast o de
agente.
→ Si se cumple la 1.ª condición, el switch considera la prioridad ajustada en la página
"General (Página 2386)".
El switch clasifica el frame en una cola en función de la asignación de la página "Asignación
CoS (Página 2387)".
2. Si la 1.ª condición no se cumple, el switch comprueba si el frame contiene un tag VLAN.
→ Si se cumple la 2.ª condición, el switch comprueba los ajustes de prioridad en la página
"General (Página 2386)". El switch comprueba si para la prioridad se ha ajustado un valor
distinto de "Do not force".
Si se ha ajustado una prioridad, el switch clasifica el frame en una cola en función de la
asignación de la página "Asignación CoS (Página 2387)".
3. Si la 2.ª condición tampoco se cumple, los frames se siguen procesando de acuerdo con el
modo de priorización. El Trust Mode se configura en la página "Priorización QoS
(Página 2389)".

Autenticación
Sinopsis de la administración de usuarios
El acceso al dispositivo se gestiona mediante ajustes de usuario configurables. Configure
usuarios con las contraseñas correspondientes para la autenticación. Asigne a los usuarios
una función con los derechos adecuados.
La autenticación de usuarios se realiza bien localmente desde el dispositivo o bien desde un
servidor RADIUS externo. La forma en que debe llevarse a cabo la autenticación se configura
en la página "Security > AAA > General".
Si transfiere la configuración de un dispositivo a TIA, los usuarios, las funciones y los grupos
configurados no se transfieren.

Compatibilidad con versiones anteriores
En la versión de firmware 5.1 se ha ampliado la administración de usuarios con el modo de
autorización RADIUS "Específico del fabricante". Con el fin de garantizar la compatibilidad con
versiones de firmware ≤ 5.0, el ajuste predeterminado se ha establecido de forma que, tras
actualizar el firmware, se sigue utilizando el modo de autorización anterior "Predeterminado".

Inicio de sesión local
El inicio de sesión local de los usuarios desde el dispositivo funciona del siguiente modo:
1. El usuario inicia sesión en el dispositivo con su nombre de usuario y su contraseña.
2. El dispositivo comprueba si hay una entrada para el usuario:
→ Si existe la entrada en cuestión, se inicia la sesión del usuario con los derechos de la
función vinculada.
→ Si no existe ninguna entrada, se deniega el acceso al usuario.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2243

Configuración de dispositivos y redes
1.4 Crear configuraciones

Inicio de sesión mediante un servidor RADIUS externo
RADIUS (Remote Authentication Dial-In User Service) es un protocolo de autenticación y
autorización de usuarios mediante servidores en los que se pueden almacenar los datos de
usuario de forma centralizada.
En función del modo de autorización RADIUS que se haya ajustado en la página "Seguridad
> AAA > Cliente RADIUS", el dispositivo evaluará una información u otra del servidor RADIUS.
Modo de autorización RADIUS "Estándar"
Si se ha ajustado el modo de autorización RADIUS "Estándar", la autenticación de usuarios
mediante un servidor RADIUS funciona del siguiente modo:
1. El usuario inicia sesión en el dispositivo con su nombre de usuario y su contraseña.
2. El dispositivo envía una petición de autenticación al servidor RADIUS con los datos de inicio
de sesión.
3. El servidor RADIUS comprueba los datos y devuelve el resultado al dispositivo:
– El servidor RADIUS notifica una autenticación correcta y para el atributo "Service Type"
devuelve al dispositivo el valor "Administrative User":
→ El usuario inicia sesión con derechos de administrador.
– El servidor RADIUS notifica una autenticación correcta y devuelve un valor distinto o
incluso ninguno al dispositivo para el atributo "Service Type":
→ El usuario inicia sesión con derechos de lectura.
– El servidor RADIUS notifica una autenticación errónea al dispositivo:
→ Al usuario se le niega el acceso.
Modo de autorización RADIUS "Específico del fabricante"
Requisitos
Para el modo de autorización RADIUS "Específico del fabricante" debe ajustarse lo siguiente
en el servidor RADIUS:
● Código del fabricante: 4196
● Número de atributo: 1
● Formato de atributo: secuencia de caracteres (nombre del grupo)
Procedimiento

2244

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Si se ha ajustado el modo de autorización RADIUS "Específico de fabricante", la autenticación
de usuarios mediante un servidor RADIUS funciona del siguiente modo:
1. El usuario inicia sesión en el dispositivo con su nombre de usuario y su contraseña.
2. El dispositivo envía una petición de autenticación al servidor RADIUS con los datos de inicio
de sesión.
3. El servidor RADIUS comprueba los datos y devuelve el resultado al dispositivo:
Caso A: El servidor RADIUS notifica una autenticación correcta y devuelve el grupo
asignado al usuario al dispositivo.
– El dispositivo conoce el grupo y el usuario no está registrado en la tabla "External User
Accounts".
→ El usuario inicia sesión con los derechos del grupo asignado.
– El dispositivo conoce el grupo y el usuario está registrado en la tabla "External User
Accounts".
→ El usuario se asigna a la función con los derechos más amplios e inicia sesión con
estos derechos.
– El dispositivo no conoce el grupo y el usuario está registrado en la tabla "External User
Accounts":
→ El usuario inicia sesión con los derechos de la función vinculada a su cuenta de
usuario.
– El dispositivo no conoce el grupo y el usuario no está registrado en la tabla "External
User Accounts":
→ El usuario inicia sesión con los derechos de la función "Default".
Caso B: El servidor RADIUS notifica una autenticación correcta pero no devuelve ningún
grupo al dispositivo:
– El usuario está registrado en la tabla "External User Accounts":
→ El usuario inicia sesión con los derechos de la función vinculada.
– El usuario no está registrado en la tabla "External User Accounts":
→ El usuario inicia sesión con los derechos de la función "Default".
Caso C: El servidor RADIUS notifica una autenticación errónea al dispositivo:
– Al usuario se le niega el acceso.

Método de autenticación
Es posible configurar puerto a puerto los métodos de autenticación "802.1X" y "Autenticación
MAC" así como la opción "Guest VLAN".
Las funciones están sometidas a un orden jerárquico. Si están activadas las tres funciones,
primero se intenta autenticar el terminal mediante "802.1x". Si la autenticación no es correcta,
se inicia "Autenticación MAC". Si esta tampoco funciona, el terminal se habilita para la
comunicación en la "Guest VLAN". "Guest VLAN" solo puede utilizarse si hay como mínimo un
método de autenticación activo.
Ambos métodos de autenticación dependen del terminal. Si el terminal soporta EAP
(Extensible Authentication Protocol) puede autenticarse utilizando el método "802.1X". Si el
terminal no soporta EAP puede autenticarse utilizando "Autenticación MAC". En este caso, el
IE Switch asume la función del terminal y utiliza la dirección MAC del dispositivo como
parámetro de autenticación.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2245

Configuración de dispositivos y redes
1.4 Crear configuraciones

802.1X
El método de autenticación "802.1X" funciona del siguiente modo:
Un terminal que soporta EAP envía información de autenticación al IE Switch. El IE Switch
transmite la información al servidor de autenticación. El servidor de autenticación comprueba
la información y permite o deniega al terminal el acceso a la red.

Autenticación MAC
El método de autenticación "Autenticación MAC" funciona del siguiente modo:
En cuanto el IE Switch recibe un telegrama de un terminal, envía una consulta al servidor
RADIUS para permitir o denegar el acceso del terminal a la red.

Asignación de una VLANs a través de RADIUS o Guest VLAN
Autenticación con modificación de la configuración VLAN
Si durante la autenticación un puerto se asigna dinámicamente a una VLAN mediante la
función "Aplicar asignación VLAN de RADIUS" o "Guest VLAN", ocurre lo siguiente:
● Si la VLAN que debe asignarse no está creada en el dispositivo, la autenticación se rechaza.
● Si la VLAN que debe asignarse está creada en el dispositivo:
– El puerto se convierte en Untagged Member en la VLAN asignada si no lo era hasta
ahora.
– La PVID del puerto se cambia a la ID de la VLAN asignada.
Nota
Si el puerto solo debe asignarse a una VLAN, la configuración VLAN deberá adaptarse
manualmente. Todos los puertos son por defecto p. ej. Untagged Member en "vlan 1".
Si la autenticación se retira, p. ej. por un Link-Down, los cambios dinámicos se retirarán:
● El puerto ya no es miembro en la VLAN asignada.
● La PVID del puerto se reinicia al valor que tenía antes de la autenticación.
Autenticación sin cambio de la configuración VLAN
Si durante la autenticación no se asigna una VLAN mediante la función "Aplicar asignación
VLAN de RADIUS" ni mediante "Guest VLAN", la configuración VLAN existente del puerto
permanece invariable.

2246

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Editar propiedades y parámetros
Posibilidades de edición
Existen las posibilidades siguientes para editar las propiedades y los parámetros:
● Editor de hardware y redes
Una vez se ha insertado el componente de red, existe la posibilidad de editar las
propiedades y los parámetros, por ejemplo el nombre del dispositivo. Encontrará más
información al respecto en "Editor de hardware y redes".
● Web Based Management (WBM)
Es posible acceder a los parámetros y las propiedades utilizando páginas HTML (páginas
del WBM) suministradas. Cada página del WBM tiene una página de ayuda propia que
describe las propiedades y los parámetros. Encontrará más información en los manuales
de configuración:
– "SCALANCE XB-200/XC-200/XP-200 Web Based Management"
Encontrará el manual de configuración en las páginas de Internet del Siemens Industry
Online Support en SCALANCE XB-200 (https://
support.industry.siemens.com/cs/ww/es/ps/15291/man), SCALANCE XC-200 (https://
support.industry.siemens.com/cs/ww/es/ps/15291/man) y SCALANCE XP-200 (https://
support.industry.siemens.com/cs/ww/es/ps/21869/man).
– "SCALANCE XM-400/XR-500 Web Based Management"
Encontrará el manual de configuración en las páginas de Internet del Siemens Industry
Online Support en SCALANCE XM-400 (https://
support.industry.siemens.com/cs/ww/es/ps/15315/man) y SCALANCE XR-500 (https://
support.industry.siemens.com/cs/ww/es/ps/15317/man).
● Command Line Interface
La CLI permite especificar todos los ajustes para la configuración del dispositivo. La CLI
ofrece las mismas posibilidades que el Web Based Management (WBM). Encontrará más
información en los manuales de configuración:
– "SCALANCE XB-200/XC-200/XP-200 Command Line Interface"
Encontrará el manual de configuración en las páginas de Internet del Siemens Industry
Online Support en SCALANCE XB-200 (https://
support.industry.siemens.com/cs/ww/es/ps/15291/man), SCALANCE XC-200 (https://
support.industry.siemens.com/cs/ww/es/ps/15291/man) y SCALANCE XP-200 (https://
support.industry.siemens.com/cs/ww/es/ps/21869/man).
– "SCALANCE XM-400/XR-500 Command Line Interface"
Encontrará el manual de configuración en las páginas de Internet del Siemens Industry
Online Support en SCALANCE XM-400 (https://
support.industry.siemens.com/cs/ww/es/ps/15315/man) y SCALANCE XR-500 (https://
support.industry.siemens.com/cs/ww/es/ps/15317/man).

Disponibilidad
La disponibilidad de los ajustes depende
● del tipo de puerto
● del modo de configuración

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2247

Configuración de dispositivos y redes
1.4 Crear configuraciones
SCALANCE X distingue entre los siguientes tipos de puerto:
● Puerto Switch
● Router-Port
Existen los siguientes modos de configuración:
● Configuración offline
La primera configuración de una estación PC puede realizarse offline. En este modo solo
están disponibles los ajustes que no requieren conectarse al dispositivo.
● Modo de configuración online
Cuando hay conexión con el dispositivo, la ventana de inspección presenta páginas
adicionales. Dichas páginas incluyen la indicación "Esta página solo está disponible
cuando hay conexión online con el dispositivo". Todos los ajustes incluyen el complemento
"Solo disponible online".

Crear y borrar una entrada
A modo de ejemplo se creará y borrará una entrada en el cliente Syslog. El procedimiento es
el mismo en todas las páginas.
Crear una entrada
1. Seleccione el dispositivo en la vista de redes o dispositivos.
2. Abra las propiedades del dispositivo en la ventana de inspección.
3. En la ventana de inspección, vaya a Sistema > Cliente Syslog.
4. Introduzca la dirección IP del servidor Syslog en Dirección IP.
5. Haga clic en la tabla.
6. Elija la entrada "Nueva entrada" del menú contextual.
En la tabla se crea una nueva entrada.
Borrar una entrada
1. Seleccione la entrada deseada en la tabla.
2. Elija la entrada "Borrar" del menú contextual.

Botones utilizados con frecuencia
● Actualizar la visualización con "Actualizar"
Las páginas que muestran parámetros actuales incluyen el botón "Actualizar" en el borde
inferior. Haga clic en este botón si desea solicitar datos actuales del dispositivo para la
página visualizada.
● Guardar ajustes para todos los puertos con "Aplicar a tabla"
Las páginas en las que pueden configurarse varios puertos tienen 2 tablas. En la primera
tabla se realizan los ajustes de todos los puertos, que se aplican a la segunda tabla. En la
última columna de la primera tabla hay el botón "Aplicar a tabla". Haga clic en el botón para
guardar los ajustes introducidos para todos los puertos.

2248

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Asignar dirección IP
Posibilidades de configuración
En el estado de suministro y tras restablecer la configuración de fábrica, el dispositivo no
dispone de dirección IP.
Existen las siguientes posibilidades para asignar una dirección IP al dispositivo:
● DHCP (ajuste estándar)
● Primary Setup Tool
Consulte el manual de configuración "Primary Setup Tool" para más información.
Encontrará el manual de configuración en Siemens Industry Automation and Drives Service
& Support en Internet, en la ID de artículo 19440762 (http://
support.automation.siemens.com/WW/view/es/19440762).
● STEP 7
● CLI vía interfaz serie
Consulte el manual de configuración "SCALANCE XM-400/XR-500 Command Line
Interface" para más información. Encontrará el manual de configuración en las páginas web
del Siemens Industry Automation and Drives Service & Support (http://
support.automation.siemens.com/WW/view/es/48805144/133300).

Requisitos
● En las propiedades del dispositivo está activada la opción "Ajustar dirección IP en el
dispositivo". Encontrará más información en "Direccionamiento de dispositivos
PROFINET".

Configurar dispositivo SCALANCE como dispositivo IO
En el caso de un dispositivo SCALANCE configurado como dispositivo PROFINET IO y
asignado a un controlador IO, al ejecutar las funciones "Compilar" y "Cargar en dispositivo"
solo se cargan en el dispositivo SCALANCE los datos que también pueden configurarse en
Web Based Management (WBM) (System, Layer 2, Layer 3, Security).
Si desea ejecutar las funciones "Compilar" o "Cargar en dispositivo" para los datos de
dispositivo PROFINET IO del dispositivo, seleccione antes el controlador IO asignado.

Carga de los datos de configuración con un dispositivo PROFINET IO
En un dispositivo SCALANCE asignado a un controlador IO es necesario diferenciar entre los
datos de la configuración del dispositivo PROFINET IO y de la configuración SCALANCE:
● La configuración del dispositivo PROFINET IO solo puede proporcionarla el controlador
PROFINET IO.
● La configuración SCALANCE se refiere solo a los datos que pueden configurarse en Web
Based Management (WBM) (System, Layer 2, Layer 3, Security).

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2249

Configuración de dispositivos y redes
1.4 Crear configuraciones
Para cargar la configuración completa de un dispositivo SCALANCE, proceda del siguiente
modo:
1. Cargue la configuración del dispositivo PROFINET IO a través del controlador PROFINET
IO:
– Seleccione el controlador PROFINET IO en el árbol del proyecto.
– En la barra de herramientas seleccione el comando "Online > Cargar el dispositivo como
estación nueva (hardware y software)".
– Consulte también el capítulo "Cargar datos de configuración desde un dispositivo".
2. Cargue la configuración SCALANCE como carga local a través del dispositivo:
– Seleccione el dispositivo SCALANCE en la vista de redes.
– Elija el comando "Configuración de SCALANCE > Cargar en PG/PC" en el menú
contextual del dispositivo.
– Consulte también el capítulo "Configurar dispositivos".

Mostrar información
Versiones
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
Esta página muestra las versiones de hardware y software del dispositivo.

Descripción de los valores mostrados
La tabla 1 se divide en las siguientes columnas:
● Hardware
– Basic Device
Indica el dispositivo base.
– PX.X
X.X = puerto en el que está insertado el módulo SFP.
– SlotX
"X" = número de slot: Módulo enchufado en este slot.
● Nombre
Indica el nombre del dispositivo o del módulo.
● Versión
Indica la versión de hardware del dispositivo.
● Referencia
Indica la referencia del dispositivo o del módulo descrito.

2250

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla 2 se divide en las siguientes columnas:
● Software
– Firmware
Indica la versión actual de firmware. Cuando se haya cargado un archivo de firmware
nuevo y el dispositivo todavía no se haya reiniciado, aquí se mostrará la versión de
firmware del archivo de firmware que se ha cargado. Tras el siguiente reinicio se activa
y utiliza el firmware que se ha cargado.
– Bootloader
Indica la versión del software de arranque que está guardado en el dispositivo.
● Descripción
Muestra la descripción breve del software.
● Versión
Muestra el número de versión del software instalado.
● Fecha
Indica la fecha de creación del software instalado.

I&M
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
Esta página contiene datos del fabricante y de mantenimiento específicos del dispositivo,
como la referencia, el número de serie, los números de versión, etc. En esta página no es
posible realizar ajustes.

Descripción de los valores mostrados
La tabla se divide en las siguientes filas:
● ID de fabricante
Muestra la identificación del fabricante.
● Referencia
Muestra la referencia.
● Número de serie
Muestra el número de serie.
● Versión de hardware
Muestra la versión de hardware.
● Versión de software
Muestra la versión de software.
● Contador de versión
Muestra el contador de cambios de versión: contador de cambios de versión desde la
primera puesta en marcha.
● Fecha de actualización
Fecha y hora del último cambio de versión

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2251

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Identificador de función
Muestra el identificador de función (identificador de la instalación) del dispositivo. El
identificador de instalación (AKZ) se establece en la fase de configuración del equipo con
HW Config de STEP 7.
● Identificador de ubicación
Muestra el identificador de ubicación del dispositivo. El identificador de ubicación (OKZ) se
establece en la fase de configuración del equipo con HW Config de STEP 7.
● Fecha
Muestra la fecha que se ha establecido en la fase de configuración del equipo con HW
Config de STEP 7.
● Descripción
Muestra la descripción que se ha establecido en la fase de configuración del equipo con HW
Config de STEP 7.

ARP / Tabla de vecindad
Tabla ARP
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

Asignación de dirección MAC y dirección IP
Por medio del Address Resolution Protocol (ARP) se asigna unívocamente la dirección MAC
a la dirección IPv4. Cada dispositivo de red guarda dicha asignación en su propia tabla ARP.
La página muestra la tabla ARP del dispositivo.

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Interfaz
Muestra la interfaz a través de la cual se aprendió la fila.
● Dirección MAC
Muestra la dirección MAC del dispositivo de origen o destino.
● Dirección IP
Muestra la dirección IP del dispositivo de destino.
● Tipo de medio
Muestra el tipo de conexión.
– Dinámico
El dispositivo ha reconocido de forma automática los datos de dirección.
– Estático
Las direcciones fueron registradas como direcciones estáticas.

2252

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Tabla de vecindad IPv6
Asignación de dirección MAC y dirección IPv6
Por medio de la tabla de vecindad IPv6 se asigna unívocamente la dirección MAC a la dirección
IPv6. Cada dispositivo de red guarda dicha asignación en su propia tabla de vecindad.
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Interface
Muestra la interfaz a través de la cual se memorizó la fila.
● MAC Address
Muestra la dirección MAC del dispositivo de origen o destino.
● IP Address
Muestra la dirección IPv6 del dispositivo de destino.
● Media Type
Muestra el tipo de conexión.
– Dynamic
El dispositivo ha reconocido de forma automática los datos de dirección.
– Static
Las direcciones fueron registradas como direcciones estáticas.

Tabla de registro
Protocolización de eventos
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
El dispositivo ofrece la posibilidad de documentar los eventos que se produzcan; estos se
pueden definir, en parte, en "Sistema > Eventos". Se puede documentar, por ejemplo, el
momento en que falló un intento de autenticación o en que cambió el estado de conexión de
un puerto. El contenido de la tabla de registro de eventos se conserva también tras
desconectar el dispositivo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2253

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los valores mostrados
● Filtro de Severity
Nota
Para cada severidad son posibles como máximo 400 entradas en la tabla. Cuando en una
severidad se ha alcanzado el número máximo de entradas, se sobrescriben las entradas
más antiguas de dicha severidad en la tabla. La tabla se guarda de forma permanente en
la memoria.
Las entradas de la tabla se pueden filtrar según la severidad del error. Seleccione las
entradas deseadas en las casillas de verificación que hay encima de la tabla.
– Info
Información
– Si este parámetro está activado se muestran todas las entradas de la categoría "Info".
– Warning
Advertencia
Si este parámetro está activado se muestran todas las entradas de la categoría
"Warning".
– Critical
Crítico
Si este parámetro está activado se muestran todas las entradas de la categoría "Critical".
La tabla se divide en las siguientes columnas:
– Reinicio
Cuenta el número de rearranques completos desde la última vez que se restablecieron
los ajustes de fábrica e indica tras qué rearranque del dispositivo se ha producido cada
evento concreto.
– System Up Time
Indica el tiempo de funcionamiento del dispositivo desde el último rearranque, en el que
se produjo el evento descrito.
– Hora del sistema
Muestra la fecha y la hora en las que se produjo el evento descrito.
Cuando está ajustada la hora del sistema, también se muestra la hora a la que se ha
producido el evento.
– Severidad
Muestra la severidad del mensaje.
– Aviso de registro
Muestra una descripción abreviada del evento que se ha producido. Encontrará una lista
de los posibles avisos en el anexo D del manual de configuración.

2254

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Error
Estado de error
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
Cuando se produce un error se muestra en esta página. Cuando el LED de error rojo del
dispositivo se enciende significa que hay un error.
Se notifican tanto los errores internos del dispositivo como los errores configurados en las
páginas siguientes:
● "Sistema > Eventos"
● "Sistema > Control de errores"
Los errores del evento "Arranque en frío/en caliente" se pueden borrar con una confirmación.
El cálculo del instante del error empieza después del último inicio de sistema.
Si no hay errores se apaga el LED de error.

Descripción de los valores mostrados
● Número de errores notificados
Muestra el número de errores notificados.
● Inicializar contador
Haga clic en el botón "Inicializar contador" para inicializar el contador. El contador también
se inicializa con un rearranque completo.
La tabla contiene las siguientes columnas:
● Instante del error
Indica el tiempo de funcionamiento del dispositivo desde el último rearranque, en el que se
produjo el error descrito.
● Descripción del error
Muestra una descripción breve del error que se ha producido.
● Borrar estado de error
Si el botón "Borrar estado de error" está activo, es posible borrar el error.
● Botón "Inicializar contadores"
Haga clic en "Inicializar contadores" para inicializar todos los contadores. Los contadores
se reinician con un rearranque.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2255

Configuración de dispositivos y redes
1.4 Crear configuraciones

Redundancia
Spanning Tree
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
Esta página muestra la información actual sobre Spanning Tree y los ajustes del Root-Bridge.

Descripción de los valores mostrados
● Modo Spanning Tree
Indica el modo ajustado. El modo se define en "Layer 2 > Spanning Tree > General".
Son posibles los siguientes valores:
– '-'
– STP
– RSTP
– MSTP
● ID de instancia
Indica el número de la instancia. Este parámetro depende del modo configurado.
● Prioridad Bridge / Prioridad Root
A partir de la prioridad Bridge se determina qué dispositivo pasa a ser Root-Bridge. El
Bridge (puente) con la prioridad más alta (es decir, con el valor menor para este parámetro)
es el Root-Bridge. Si en una red hay varios dispositivos con la misma prioridad, pasa a ser
Root-Bridge el dispositivo cuya dirección MAC tenga el valor numérico más bajo. Ambos
parámetros, prioridad de Bridge y dirección MAC, forman juntos el identificador Bridge.
Dado que el Root-Bridge administra todos los cambios de ruta, debería estar dispuesto lo
más central posible, debido al tiempo de ciclo de los telegramas. El valor de la prioridad
Bridge es un múltiplo entero de 4096.
● Dirección Bridge / Dirección Root
La dirección Bridge indica la dirección MAC del dispositivo y la dirección Root muestra la
dirección MAC del Root-Bridge.
● Costes Root
Muestra los costes de la ruta desde este dispositivo hasta el Root-Bridge.
● Estado de Bridge
Indica el estado del Bridge, p. ej. si el dispositivo es el Root-Bridge.
● Prioridad Root regional(solo disponible con MSTP)
Véase la descripción en Prioridad Bridge / Prioridad Root.
● Dirección Root regional (solo disponible con MSTP)
Indica la dirección MAC del dispositivo.
● Costes Root regionales (solo disponible con MSTP)
Muestra los costes de la ruta desde el dispositivo hasta el Root-Bridge regional.

2256

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla se divide en las siguientes columnas:
● Puerto
Indica el puerto a través del cual se comunica el dispositivo.
● Prioridad
Indica el estado del puerto. Son posibles los siguientes valores:
– Disabled
El puerto se ha eliminado manualmente del Spanning Tree, que ya no lo tiene en cuenta.
– Designated
Los puertos que salen del Root-Bridge.
– Alternate
El puerto con una ruta alternativa a un segmento de red.
– Backup
Si un switch tiene varios puertos que van al mismo segmento de red, el "peor" puerto se
convierte en reserva.
– Root
El puerto que ofrece la mejor ruta hacia el Root-Bridge.
– Master
Este puerto apunta a un Root-Bridge que está fuera de la región MST.
● Estado
Indica el estado momentáneo en que se encuentra el puerto. Los valores solo se muestran.
Este parámetro depende del protocolo configurado. Son posibles los siguientes estados:
– Discarding
El puerto recibe telegramas BPDU. Se rechazan otros telegramas entrantes o salientes.
– Listening
El puerto recibe y envía telegramas BPDU. El puerto está integrado en el algoritmo de
Spanning Tree. Se rechazan otros telegramas entrantes y salientes.
– Learning
El puerto aprende activamente la topología, es decir, las direcciones de los dispositivos.
Se rechazan otros telegramas entrantes y salientes.
– Forwarding
El puerto está activo en la red tras el tiempo de reconfiguración. El puerto recibe y envía
telegramas de datos.
● Oper. Versión
Indica qué protocolo Spanning Tree utiliza el puerto.
● Prioridad
Si la ruta determinada por el Spanning Tree puede conducir alternativamente por varios
puertos de un dispositivo, se selecciona el puerto con la prioridad más alta (es decir, con el
valor menor para ese parámetro). Para la prioridad puede indicarse un valor de 0 a 240 en
incrementos de 16. Si indica un valor no divisible por 16, el valor se ajustará
automáticamente.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2257

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Costes de ruta
Este parámetro sirve para calcular la ruta que se ha de elegir. Se selecciona como ruta el
trayecto con el valor más bajo. Si varios puertos de un dispositivo tienen el mismo valor, se
elige el puerto con el número de puerto más bajo.
Si el valor de "Calc. costes" es "0", se muestra el valor determinado automáticamente. En
cualquier otro caso se indica el valor de "Calc. costes".
La determinación de los costes de encaminamiento se basa prioritariamente en la
velocidad de transmisión. Cuanto mayor es la velocidad de transmisión alcanzable, menor
es el valor de los costes de encaminamiento.
Valores típicos de costes de encaminamiento con Rapid Spanning Tree:
– 10.000 Mbits/s = 2.000
– 1000 Mbits/s = 20.000
– 100 Mbits/s = 200.000
– 10 Mbits/s = 2.000.000
Los "Calc. Costes" se configuran en las páginas "Layer 2 > Spanning Tree > CIST Port" y
"Layer 2 > Spanning Tree > MST Port".
● Tipo Edge
Indica el tipo de conexión. Son posibles los siguientes valores:
– Edge Port
Hay un terminal en este puerto.
– No Edge Port
En este puerto hay un dispositivo Spanning Tree.
● Tipo P.t.P.
Indica el tipo de conexión punto a punto. Son posibles los siguientes valores:
– P.t.P.
Con semidúplex se parte de una conexión punto a punto.
– Shared Media
Con una conexión dúplex no se parte de una conexión punto a punto.

Estadísticas VRRP
Introducción
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
Esta página muestra las estadísticas del protocolo VRRP y todos los router virtuales
configurados.

2258

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los valores mostrados
Se muestran los siguientes campos:
● Errores VRID
Indica el número de telegramas VRRP recibidos que contenían una VRID no soportada.
● Errores de versión
Indica el número de telegramas VRRP recibidos que contenían un número de versión no
válido.
● Errores de suma de verificación
Indica el número de telegramas VRRP recibidos que contenían una suma de verificación no
válida.
La tabla se divide en las siguientes columnas:
● Interfaz
Interfaz a la que se refieren los ajustes.
● VRID
Indica la ID del router virtual.
● Transición a estado maestro
Indica la frecuencia con la que este router virtual ha adoptado la función "Maestro".
● Notificaciones recibidas
Indica la frecuencia con la que se ha recibido un telegrama VRRP que contenía una lista de
direcciones errónea.
● Errores de intervalo de notificación
Indica cuántos telegramas VRRP erróneos se han recibido cuyo intervalo no coincidía con
el valor fijado localmente.
● Errores IP TTL
Indica cuántos telegramas VRRP erróneos se han recibido cuyo valor TTL (Time to live) no
coincidía en el encabezado de IP.
● Tel. Prio 0 recibidos
Indica cuántos telegramas VRRP se han recibido con la prioridad 0. Los telegramas VRRP
con la prioridad 0 se envían cuando se apaga un router maestro. Estos telegramas permiten
pasar rápidamente al correspondiente router de reserva.
● Tel. Prio 0 enviados
Indica cuántos telegramas VRRP se han enviado con la prioridad 0. Los telegramas con la
prioridad 0 se envían cuando se apaga un router maestro. Estos telegramas permiten pasar
rápidamente al correspondiente router de reserva.
● Tipo no válido
Indica cuántos paquetes VRRP erróneos se han recibido cuyo tipo de autentificación no era
del tipo 0. Tipo 0 significa "Ninguna autenticación".
● Errores de listas de direcciones
Indica cuántos paquetes VRRP erróneos se han recibido cuya lista de direcciones no
coincide con la lista configurada localmente.
● Tipo de aut. no válido
Indica cuántos telegramas VRRP erróneos se han recibido cuyo tipo de autenticación no
era 0. Tipo 0 significa "sin autentificación".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2259

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Tipo de aut. divergente
Indica cuántos telegramas VRRP erróneos se han recibido cuyo tipo de autenticación no
coincide.
● Errores de longitud de telegrama
Indica cuántos telegramas VRRP erróneos se han recibido cuya longitud no es correcta.

Estadísticas VRRPv3
Introducción
Esta página muestra las estadísticas del protocolo VRRPv3 y todos los router virtuales
configurados.
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

Descripción de los valores mostrados
Se muestran los siguientes campos:
● VRRID Errors
Indica cuántos paquetes VRRPv3 se han recibido que contenían una VRID no soportada.
● Version Errors
Indica el número de paquetes VRRPv3 recibidos que contenían un número de versión no
válido.
● Checksum Errors
Indica el número de paquetes VRRPv3 recibidos que contenían una suma de
comprobación no válida.
La tabla se divide en las siguientes columnas:
● Interfaces
Interfaz a la que se refieren los ajustes.
● VRID
Muestra la ID del router virtual. Los valores válidos son de 1 a 255.
● Tipo de dirección
Muestra la versión del protocolo IP.
● Become Master
Indica la frecuencia con la que este router virtual ha adoptado el estado "Master".
● Advertisements Received
Indica cuántos paquetes VRRPv3 se han recibido.
● Advertisements Interval Errors
Indica cuántos paquetes VRRPv3 erróneos se han recibido cuyo intervalo no coincide con
el valor fijado localmente.

2260

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● IP TTL Errors
Indica cuántos paquetes VRRPv3 erróneos se han recibido cuyo valor TTL (Time to live) no
coincide en el encabezado de IP.
● Prio 0 received
Indica cuántos paquetes VRRPv3 se han recibido con la prioridad 0. Los paquetes VRRPv3
con la prioridad 0 se envían cuando se apaga un router maestro. Estos paquetes permiten
pasar rápidamente al correspondiente router de reserva.
● Prio 0 sent
Indica cuántos paquetes VRRPv3 se han enviado con la prioridad 0. Los paquetes con la
prioridad 0 se envían cuando se apaga un router maestro. Estos paquetes permiten pasar
rápidamente al correspondiente router de reserva.
● Invalid Type
Indica cuántos paquetes VRRPv3 erróneos se han recibido cuyo valor en el campo "Type"
del encabezado de IP no es válido.
● Address List Errors
Indica cuántos paquetes VRRPv3 erróneos se han recibido cuya lista de direcciones no
coincide con la lista configurada localmente.
● Packet Length Errors
Indica cuántos paquetes VRRPv3 erróneos se han recibido cuya longitud no es correcta.

Redundancia de anillo
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
Al entregarse el dispositivo, está preajustada la Automatic Redundancy Detection (ARD). Si se
debe utilizar el método High Speed Redundancy (HRP) que se utilizaba anteriormente, se
tiene que configurar HRP.
● Tiempo de reconfiguración del tráfico de telegramas tras un cambio de redundancia en
MRP: 200 ms
● Tiempo de reconfiguración del tráfico de telegramas tras un cambio de redundancia en
HRP: 300 ms
La página le informa sobre los valores ajustados para el dispositivo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2261

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los valores mostrados
Se muestran los siguientes campos:
● Función de redundancia
La columna "Función de redundancia" indica la función del dispositivo dentro del anillo:
– Sin redundancia de anillo
El IE Switch trabaja sin función de redundancia.
– Cliente HRP
El IE Switch trabaja como cliente HRP.
– Administrador HRP
El IE Switch trabaja como administrador HRP.
– Cliente MRP
El IE Switch trabaja como cliente MRP.
– Administrador MRP
El IE Switch trabaja como administrador MRP. Desde STEP 7 se ha ajustado la función
"Administrador" para el dispositivo.
– Administrador automático MRP
El IE Switch trabaja como administrador MRP. Desde WBM o CLI se ha ajustado la
función "Administrador automático MRP" o, desde STEP 7, la función "Manager (Auto)".
● Estado RM
La columna "Estado RM" indica si el IE Switch trabaja de administrador de redundancia y
si en esta función ha abierto o interconectado el anillo.
– Pasivo
El IE Switch trabaja de administrador de redundancia y ha abierto el anillo, es decir, la
línea de switches conectada a los puertos del anillo trabaja sin errores. El estado
"Pasivo" se indica también cuando el IE Switch no trabaja como administrador de
redundancia (Administrador de redundancia desactivado).
– Activo
El IE Switch trabaja de administrador de redundancia y ha cerrado el anillo, es decir, la
línea de switches conectada a los puertos del anillo está interrumpida (error). El
administrador de redundancia conmuta la conexión entre sus puertos de anillo y
restablece una topología lineal continua.
– "-"
La función de redundancia está desactivada.
● Estado Observer
Muestra el estado actual del Observer.
● Puerto en anillo 1 y Puerto en anillo 2
Las columnas "Puerto en anillo 1" y "Puerto en anillo 2" muestran los puertos utilizados
como puertos del anillo.

2262

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Número de cambios a estado activo RM
Indica la frecuencia con la que el dispositivo ha conmutado al estado activo en calidad de
administrador de redundancia, es decir, ha cerrado el anillo.
Si la función de redundancia está desactivada o el dispositivo no es administrador HRP/
MRP, aparece el texto "Administrador de redundancia desactivado".
● Retardo máx. de los telegramas test RM [ms]
Muestra el tiempo de retardo máximo para telegramas de prueba del administrador de
redundancia.
Si la función de redundancia está desactivada o el dispositivo no es administrador HRP/
MRP, aparece el texto "Administrador de redundancia desactivado".

Standby
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
En esta página obtendrá información sobre el estado del equipo relacionada con la
redundancia Standby. Todos los campos de texto de esta página son de solo lectura.
Nota
El dispositivo con la dirección MAC más alta pasa a ser maestro
Para el acoplamiento redundante de anillos HRP se configuran siempre dos dispositivos como
pareja maestro/esclavo. Lo mismo es válido para anillos HRP con interrupción = líneas. En
ausencia de fallos, la función de maestro la asume siempre el dispositivo con la dirección MAC
más alta. Este tipo de asignación es importante ante todo en caso de sustitución de equipos.
Dependiendo de las direcciones MAC, el equipo que desempeñaba hasta el momento la
función de esclavo puede asumir ahora el papel de maestro Standby.
En la pestaña "Standby" podrá ver el estado de dicha función:

Descripción de los valores mostrados
Se muestran los siguientes campos:
● Puertos Standby
Muestra el puerto Standby.
● Nombre Standby
Nombre de la conexión Standby.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2263

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Función Standby
Indica si la conexión de reserva está activada o desactivada.
– Master
El dispositivo tiene conexión con el interlocutor y trabaja de maestro. En caso de
funcionamiento correcto, en este dispositivo está activo el puerto Standby.
– Slave
El dispositivo tiene conexión con el interlocutor y trabaja de esclavo. En caso de
funcionamiento correcto, en este dispositivo está inactivo el puerto Standby.
– Desactivado
El acoplamiento Standby está desactivado. El dispositivo no trabaja ni de maestro ni de
esclavo. Un puerto configurado como puerto Standby funciona como puerto normal sin
función Standby.
– Establecimiento de conexión
Todavía no se ha establecido una conexión con el interlocutor. El puerto Standby está
inactivo. En este caso, ocurre que la configuración del interlocutor no es coherente (p. ej.
nombre de conexión incorrecto, acoplamiento Standby desactivado) o existe un defecto
físico (p. ej. fallo del dispositivo, Link-Down).
– Pérdida de conexión
Se ha perdido la conexión existente con el interlocutor. En este caso, bien se ha
modificado la configuración del interlocutor (p. ej. otro nombre de conexión,
acoplamiento Standby desactivado), bien existe un defecto físico (p. ej. fallo del
dispositivo, Link-Down).
● Estado Standby
Muestra el estado del puerto Standby:
– Activo
El puerto Standby de este dispositivo está activo, es decir, habilitado para el tráfico de
telegramas.
– Pasivo
El puerto Standby de este dispositivo está inactivo, es decir, bloqueado para el tráfico de
telegramas.
– "-"
La función de Standby está desactivada.
● Número de cambios a estado activo Standby
Indica con qué frecuencia ha cambiado el IE Switch el estado Standby de "Pasivo" a
"Activo". Si falla la conexión de un puerto Standby en el maestro Standby, el IE Switch pasa
al estado "Activo". Si la función Standby está desactivada, aparece el texto "Standby
desactivado" en este campo.
Tras cada rearranque completo del dispositivo se inicializan automáticamente los
contadores.

2264

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Link Check
Vigilancia de conexiones ópticas en el anillo
La página muestra la siguiente información sobre Link Check:
● Los puertos en los que puede activarse Link Check
● El estado actual
● La estadística de telegramas Link Check enviados y recibidos en las conexiones vigiladas

Descripción de los valores mostrados
Se muestran los siguientes campos:
● Port
Muestra el puerto al que se refieren las informaciones siguientes. El puerto se compone del
número de módulo y del número de puerto, p. ej. el puerto 0.1 es el módulo 0, puerto 1.
● Link Check
Indica si la función Link Check está activada o desactivada.
● OperState
Muestra el estado de la función Link Check, Existen los siguientes estados:
– Disabled
La función está desactivada.
– Enabled
La función está activada. El interlocutor de la conexión todavía no ha confirmado la
vigilancia.
– Running
La función está activada. La vigilancia de la conexión está activa. Los telegramas de test
entrantes y salientes se cuentan y comparan.
– Fault
La función está activada. Link Check ha detectado un error en el trayecto vigilado y ha
desconectado el puerto.
● Frames In
Indica cuántos telegramas de test Link Check se han recibido.
● Frames Out
Indica cuántos telegramas de test Link Check se han enviado.

Interconexión MRP
Acoplamiento redundante de anillos
La página muestra las conexiones configuradas de interconexión MRP así como información
detallada sobre los diferentes parámetros.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2265

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los valores mostrados
Se muestran los siguientes campos:
● ID de interconexión
La ID de la conexión de interconexión MRP.
● Nombre de la interconexión
El nombre de la conexión de interconexión MRP.
● Puerto de la interconexión
El puerto que se utiliza para la conexión de interconexión MRP.
● Estado del puerto
Indica si el puerto está activado o desactivado. El tráfico de datos solo es posible a través
de un puerto activado.
● Función operativa
Indica la función del dispositivo. Para la función "Cliente" se muestra también la posición del
cliente. Existen las siguientes posibilidades:
– Desactivada
– Administrador
– Primary Client
– Secondary Client
● Estado de la conexión
El estado del dominio de la interconexión MRP. Existen las siguientes posibilidades:
– Desactivada
– No definido
– Abierto
La conexión entre los dispositivos primarios está abierta, los anillos están conectados a
través de la conexión secundaria.
– Cerrar
No hay conexión entre los dispositivos primarios.
● Contador abierto
Indica cuántas veces se ha producido el estado "Abierto" después de inicializar los
contadores por última vez.
● Tiempo abierto
El tiempo desde el último cambio de estado de la conexión.
● Inicializar contador
Haga clic en "Inicializar contador" para inicializar el contador. El contador se inicializa con
un rearranque completo.

2266

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Estadísticas de Ethernet
Estadística de interfaz
Información de la MIB
Esta página muestra la estadística de la tabla de interfaces de la Management Information
Base (MIB).
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Bytes recibidos
Muestra el número de bytes recibidos.
● Bytes enviados
Muestra el número de bytes enviados.
● Unicast recibidos
Muestra el número de telegramas Unicast recibidos.
● No Unicast recibidos
Muestra el número de telegramas recibidos que no son del tipo Unicast.
● Unicast enviados
Muestra el número de telegramas Unicast enviados.
● No Unicast enviados
Muestra el número de telegramas enviados que no son del tipo Unicast.
● Errores recibidos
Muestra el número de todos los posibles errores RX; consulte la ficha "Error de telegrama".

Descripción del botón
Inicializar contador
Haga clic en el botón "Inicializar contadores" para inicializar todos los contadores. Los
contadores también se inicializan con un rearranque completo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2267

Configuración de dispositivos y redes
1.4 Crear configuraciones

Longitud de telegrama
Telegramas clasificados por longitud
Esta página muestra cuántos telegramas se han recibido y enviado en cada puerto, así como
la longitud de dichos telegramas. En esta página no es posible realizar ajustes.
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
Los valores mostrados se transfieren vía RMON.
En la página "Layer 2 > RMON > Estadísticas" se ajustan los puertos para los que deben
visualizarse valores.

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Puerto
Indica los puertos y Link Aggregations disponibles. El puerto se compone del número de
módulo y del número de puerto, p. ej. el puerto 0.1 es el módulo 0, puerto 1.
Nota
Visualización de las estadísticas sobre telegramas
Al considerar las estadísticas de la longitud de los telegramas, recuerde que se contabilizan
tanto los telegramas entrantes como los salientes.
● Longitudes de telegrama
El resto de columnas, situadas tras el número de puerto correspondiente, contienen los
números absolutos de los telegramas en función de la longitud de estos últimos.
Para ello se distingue entre las siguientes longitudes de telegrama:
– 64 bytes
– 65 - 127 bytes
– 128 - 255 bytes
– 256 - 511 bytes
– 512 - 1023 bytes
– 1024 - máx
Nota
Tráfico de datos en puertos bloqueados
Por motivos técnicos se pueden mostrar paquetes de datos en puertos bloqueados.

2268

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción del botón
Inicializar contadores
Haga clic en el botón "Inicializar contadores" para inicializar todos los contadores. Los
contadores también se inicializan con un rearranque completo.

Tipo de telegrama
Telegramas recibidos, clasificados por tipo
Esta página muestra cuántos telegramas del tipo "Unicast", "Multicast" y "Broadcast" se han
recibido en cada puerto.
En esta página no es posible realizar ajustes.
Los valores mostrados se transfieren vía RMON. En la página "Layer 2 > RMON >
Estadísticas" se ajustan los puertos para los que deben visualizarse valores.
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Puerto
Muestra los puertos y Link Aggregations disponibles. El puerto se compone del número de
módulo y del número de puerto, p. ej. el puerto 0.1 es el módulo 0, puerto 1.
● Unicast / Multicast / Broadcast
El resto de columnas tras los números de puerto contienen los valores absolutos de los
telegramas entrantes según los tipos "Unicast", "Multicast" y "Broadcast".

Descripción del botón
Inicializar contadores
Haga clic en el botón "Inicializar contadores" para inicializar todos los contadores. Los
contadores también se inicializan con un rearranque completo.

Error de telegrama
Telegramas recibidos con errores
Esta página muestra cuántos telegramas con errores se han recibido en cada puerto.
En esta página no es posible realizar ajustes.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2269

Configuración de dispositivos y redes
1.4 Crear configuraciones
Los valores mostrados se transfieren vía RMON. En la página "Layer 2 > RMON >
Estadísticas" se ajustan los puertos para los que deben visualizarse valores.
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Puerto
Indica los puertos y Link Aggregations disponibles.
● Tipos de error
El resto de columnas tras los números de puerto contienen los valores absolutos de los
telegramas entrantes según el tipo de error.
Las columnas de la tabla dividen los telegramas según los siguientes tipos de errores:
– CRC
Paquetes cuyo contenido no coincide con la respectiva suma de verificación CRC.
– Demasiado corto
Paquetes de longitud inferior a 64 bytes.
– Demasiado largo
Paquetes rechazados por ser demasiado largos.
– Fragmentos
Paquetes de longitud inferior a 64 bytes y con suma de verificación CRC incorrecta.
– Jabbers
Paquetes con tag VLAN y suma de verificación CRC incorrecta que se rechazaron por
ser demasiado largos.
–

Colisiones
Colisiones detectadas.

Descripción del botón
Inicializar contadores
Haga clic en el botón "Inicializar contadores" para inicializar todos los contadores. Los
contadores también se inicializan con un rearranque completo.

Historial
Muestras de las estadísticas
La página presenta para cada puerto muestras con información de las estadísticas.

2270

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
En la página "Layer 2 > RMON > History" se ajustan los puertos para los que deben tomarse
muestras.
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

Ajustes
● Puerto
Seleccione el puerto para el que desea visualizar el historial.

Descripción de los valores mostrados
● Entradas
Número máximo de muestras que se guardan simultáneamente.
● Intervalo [s]
Intervalo tras el cual se guarda el estado actual de la estadística como muestra.
La tabla se divide en las siguientes columnas:
● Muestra
Número de la muestra
● Momento de la muestra
Tiempo de funcionamiento del sistema en el que se tomó la muestra.
● Unicast
Número de telegramas Unicast recibidos.
● Multicast
Número de telegramas Multicast recibidos.
● Broadcast
Número de telegramas Broadcast recibidos.
● CRC
Número de telegramas con suma de verificación CRC incorrecta.
● Demasiado corto
Número de telegramas de longitud inferior a 64 bytes.
● Demasiado largo
Número de telegramas rechazados por ser demasiado largos.
● Fragmentos
Número de telegramas de longitud inferior a 64 bytes y con suma de verificación CRC
incorrecta.
● Jabbers
Número de telegramas con tag VLAN y suma de verificación CRC incorrecta que se
rechazan por ser demasiado largos.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2271

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Colisiones
Número de colisiones de telegramas recibidos.
● Carga
Carga del puerto mientras se toma una muestra.

Unicast
Esta página muestra el contenido actual de la tabla de filtros Unicast. En la tabla se recogen
las direcciones de origen de telegramas de direcciones Unicast. Las entradas pueden
efectuarse dinámicamente si un dispositivo envía un telegrama a un puerto, o bien
estáticamente mediante parametrización por parte del usuario.

Descripción de los valores mostrados
● ID de VLAN
Indica la ID de VLAN asignada a esa dirección MAC.
● Dirección MAC
Indica la dirección MAC del participante que el dispositivo ha aprendido o que el usuario ha
configurado.
● Estado
Muestra el estado de cada entrada de dirección:
– Learnt
La dirección indicada ha sido aprendida a raíz de la recepción de un telegrama de este
dispositivo y se borrará una vez transcurrido el Aging Time si no se reciben más
paquetes de este dispositivo.
Nota
En caso de Link-Down se borran las entradas MAC aprendidas.
– Static
Configuración por parte del usuario. Las direcciones estáticas están almacenadas de
forma permanente, lo que significa que no se borran tras expirar el Aging Time ni al
reiniciar el switch.
● Puerto
Indica a través de qué puerto se puede acceder al dispositivo con la dirección especificada.
Los telegramas recibidos por el dispositivo cuya dirección de destino coincida con esta
dirección se transmiten a ese puerto.

Multicast
Multicast
Esta tabla muestra los telegramas Multicast registrados actualmente en la tabla de filtros, con
sus puertos de destino. Las entradas se pueden haber realizado dinámicamente (un
dispositivo las ha memorizado) o estáticamente (el usuario las ha parametrizado).

2272

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los valores mostrados
● ID de VLAN
Indica la ID de la VLAN a la que está asignada la dirección MAC Multicast.
● Dirección MAC
Indica la dirección MAC Multicast aprendida por el dispositivo o configurada por el usuario.
● Estado
Muestra el estado de cada entrada de dirección. Al respecto son posibles los siguientes
datos:
– Estático
La dirección ha sido introducida estáticamente por el usuario. Las direcciones estáticas
están almacenadas de forma permanente, lo que significa que no se borran tras expirar
el Aging Time ni al rearrancar el dispositivo. Deben ser borradas por el usuario.
– IGMP
El puerto de destino para esta dirección ha sido averiguado por configuración IGMP.
– MLD
El puerto de destino para esta dirección ha sido averiguado por configuración MLD.
– GMRP
El puerto de destino para esta dirección ha sido registrado a través de un telegrama
GMRP recibido.
● Lista de puertos
Para cada slot existe una columna. Dentro de las columnas
se indica para cada puerto la pertenencia al grupo Multicast:
– M (Member)
A través de este puerto se envían telegramas Multicast.
– R (Registered)
Miembro del grupo Multicast; el registro se ha realizado a través de un telegrama GMRP.
– I (IGMP/MLD)
Miembro del grupo Multicast; el registro se ha realizado a través de un telegrama IGMP/
MLD.
– –
No miembro del grupo Multicast. A través de este puerto no se envían telegramas
Multicast con la dirección MAC Multicast definida.
– F (Forbidden)
No miembro del grupo Multicast. Además, no se permite que esta dirección sea
memorizada dinámicamente a través de GMRP o IGMP/MLD.

Grupos IGMP
Estado de la tabla de filtros Multicast
Esta tabla muestra los telegramas Multicast registrados actualmente en la tabla de filtros y los
grupos de multicast ensamblados.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2273

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los valores mostrados
La tabla contiene las siguientes columnas:
● Interface
Muestra la interfaz IGMP.
● Group Address
Indica la dirección del grupo Multicast aprendida por el dispositivo o configurada por el
usuario.
● Mode
Indica si el receptor ha indicado que debe recibirse o rechazarse un Multicast de un origen
determinado.
– '-'
Se utiliza IGMPv1 o IGMPv2 o el receptor no ha priorizado ni rechazado ningún origen.
– Include
El Multicast debe ser recibido por determinados orígenes.
– Exclude
El Multicast no debe ser recibido por determinados orígenes.
● Status
Muestra el estado de cada entrada. Al respecto son posibles los siguientes datos:
– Static
El grupo Multicast se ha configurado estáticamente.
– Dynamic
El grupo Multicast se ha aprendido a través de configuración IGMP.

Grupos IGMP
Estado de la tabla de filtros Multicast
Esta tabla muestra los telegramas Multicast registrados actualmente en la tabla de filtros y los
grupos de multicast ensamblados.

Descripción de los valores mostrados
La tabla contiene las siguientes columnas:
● Interface
Muestra la interfaz IGMP.
● Group Address
Indica la dirección del grupo Multicast aprendida por el dispositivo o configurada por el
usuario.

2274

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Mode
Indica si el receptor ha indicado que debe recibirse o rechazarse un Multicast de un origen
determinado.
– '-'
Se utiliza IGMPv1 o IGMPv2 o el receptor no ha priorizado ni rechazado ningún origen.
– Include
El Multicast debe ser recibido por determinados orígenes.
– Exclude
El Multicast no debe ser recibido por determinados orígenes.
● Status
Muestra el estado de cada entrada. Al respecto son posibles los siguientes datos:
– Static
El grupo Multicast se ha configurado estáticamente.
– Dynamic
El grupo Multicast se ha aprendido a través de configuración IGMP.

LLDP
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

Estado de la tabla de vecindad
Esta página muestra el contenido actual de la tabla de vecindad. En la tabla se guarda la
información que ha recibido el agente LLDP de los dispositivos conectados. En el capítulo
siguiente se especifican las interfaces a través de las que el agente LLDP recibe y envía
información: "Layer 2 > LLDP".

Descripción de los valores mostrados
La tabla contiene las siguientes columnas:
● Nombre del sistema
Nombre de sistema del dispositivo conectado.
● ID del dispositivo
Identificación del dispositivo conectado. La ID del dispositivo equivale al nombre de
dispositivo asignado desde PST (STEP 7). Si no se ha asignado ningún nombre de
dispositivo se utiliza la dirección MAC del dispositivo.
● Interfaz local
Puerto en el que el dispositivo ha recibido la información.
● Tiempo de almacenamiento
Una entrada se guarda en el dispositivo durante el tiempo que se indica aquí. Si el
dispositivo no recibe información nueva del dispositivo conectado durante dicho tiempo, la
entrada se borra.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2275

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Propiedad
Muestra las propiedades del dispositivo conectado:
– Router
– Bridge
– Telephone
– DOCSIS Cable Device
– WLAN Access Point
– Repeater
– Estación
– Other
● ID de puerto
Puerto del dispositivo que está conectado al dispositivo.

FMP
Vigilancia de trayectos ópticos
La función Fiber Monitoring permite vigilar trayectos ópticos. La tabla muestra el estado actual
de los puertos.
En la página siguiente se especifican los valores que deben vigilarse: "Layer 2 > FMP".
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

2276

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los valores mostrados
● Port
Muestra los puertos ópticos disponibles.
● Estado de la potencia Rx
– disabled
Fiber Monitoring está desactivado
– ok
El valor para la potencia de recepción del trayecto óptico está dentro de los límites
ajustados
– maint. req.
Debería comprobarse el trayecto.
Se notifica una advertencia.
– maint. dem.
Debe comprobarse el trayecto.
Se notifica una alarma y el LED de error se ilumina.
– link down
– La conexión está interrumpida.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2277

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Potencia Rx
Muestra el valor actual de la potencia de recepción. El valor puede tener una tolerancia de
+/- 3 dB.
Si no hay ninguna conexión (link down) o Fiber Monitoring está desactivado, se muestra "-".
Si el puerto del interlocutor no tiene activado Fiber Monitoring, se muestra el valor 0.0.
● Estado de la caída de potencia
Para poder vigilar la caída de potencia de la conexión, el puerto necesita una conexión con
otro puerto que tenga FM activada.
– disabled
FM está desactivada.
– ok
El valor para la caída de potencia del trayecto óptico es correcto.
– maint. req.
Debería comprobarse el trayecto.
Se notifica una advertencia.
– maint. dem.
Debe comprobarse el trayecto.
Se notifica una alarma y el LED de error se ilumina.
– idle
El puerto no está conectado a otro puerto con Fiber Monitoring activado.
Si durante 5 ciclos no se recibe información de diagnóstico del puerto óptico del
interlocutor, se considera que la conexión Fiber Monitoring está interrumpida. Un ciclo
dura 5 segundos.
● Power Loss [dB]
Muestra el valor actual de la caída de potencia. El valor puede tener una tolerancia de +/3 dB.
Si no hay ninguna conexión (link down), Fiber Monitoring está desactivado o el puerto del
interlocutor no soporta Fiber Monitoring, se muestra "-".

Routing IPv4
Tabla de enrutamiento
Sinopsis
Esta página muestra las rutas que se utilizan actualmente.

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Red de destino
Indica la dirección de destino de esa ruta.
● Máscara de subred
Indica la máscara de subred de esa ruta.

2278

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Gateway
Indica la pasarela para esa ruta.
● Interfaz
Indica la interfaz para esa ruta.
● Métrica
Indica la métrica de la ruta. Cuanto mayor es el valor, más tardan los paquetes en llegar a
su destino.
● Protocolo routing
Indica el protocolo de enrutamiento del que proviene la entrada de la tabla de enrutamiento.
Son posibles las siguientes entradas:
– Conectado: rutas conectadas
– Estático: rutas estáticas
– RIP: Rutas vía RIP
– OSPF: Rutas vía OSPF
– Otras: otras rutas

Interfaces OSPFv2
Sinopsis
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
Esta página muestra la configuración de la interfaz OSPF.

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Dirección IP
Muestra la dirección IPv4 de la interfaz OSPF.
● Area ID
Indica la Area ID a la que pertenece la interfaz OSPF.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2279

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Estado de la interfaz
Muestra el estado de la interfaz:
– Down
La interfaz no está disponible.
– Loopback
Interfaz Loopback
– Waiting
Arranque y negociación de la interfaz.
– Point to Point
Conexión punto a punto
– Designated Router
El router es un router designado y genera Network LSA.
– Backup D. Router
El router es el router de reserva para el router designado.
– Other D. Router
La interfaz está arrancada. El router no es un router designado ni un router de reserva
designado.
● Estado OSPF
Indica el estado de OSPF.
– Enabled: OSPF está activado en la interfaz.
– Disabled: OSPF está desactivado en la interfaz.
● Designated Router
Indica la dirección IPv4 del router designado para esta interfaz OSPF.
● Backup Designated Router
Indica la dirección IPv4 del router backup designado para esta interfaz OSPF.
● Eventos
Indica el número de cambios de estado de OSPF.

Vecinos OSPFv2
Sinopsis
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
Esta página muestra los routers vecinos registrados dinámicamente en las distintas redes.

2280

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Dirección IP
Muestra la dirección IPv4 del router vecino en esta red.
● ID de router
Indica la ID del router vecino. Ambas direcciones pueden coincidir.
● Estado
Muestra el estado del router vecino. El estado puede adoptar los siguientes valores:
– unknown
Estado del router vecino desconocido.
– down
El router vecino no está accesible.
– attempt e init
Estado de corta duración durante la inicialización
– two-way
Recepción de paquetes Hello por ambos lados. Se especifican el router designado y el
router de reserva designado.
– exchangestart, exchange y loading
Estado durante el intercambio de los LSAs
– full
La base de datos está completa y es síncrona dentro del área. Las rutas ya pueden
determinarse.
Nota
Estado normal
Si el router interlocutor es un router designado o un router de reserva designado, el
estado es "full". De lo contrario, el estado es "two-way".
● Assoc. Area Type
Indica el tipo de área a través de la cual existe la relación de vecindad. Existen los
siguientes tipos de área:
– Normal
– Stub
– NSSA
– Backbone
● Prioridad
Muestra la prioridad del router vecino. Solo tiene relevancia para la selección del router
designado en una red. Este dato no es relevante en el caso de routers vecinos virtuales.
● Paquetes Hello supr.
Muestra los paquetes Hello suprimidos destinados al router vecino. Este campo está
normalmente en "no".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2281

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Cola de espera Hello
Longitud de la cola de espera con los paquetes Hello aún por transmitir.
● Eventos
Indica el número de cambios de estado.

Vecinos virtuales OSPFv2
Sinopsis
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
Esta página muestra los routers vecinos virtuales configurados.

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Dirección IP
Muestra la dirección IPv4 del router vecino virtual en esta red.
● ID de router
Indica la ID del router vecino virtual.
● Estado
Muestra el estado del router vecino. El estado puede adoptar los siguientes valores:
– unknown
Estado del router vecino desconocido.
– down
El router vecino no está accesible.
– attempt e init
Estado de corta duración durante la inicialización
– two-way
Recepción de paquetes Hello por ambos lados. Se especifican el router designado y el
router de reserva designado.
– exchangestart, exchange y loading
Estado durante el intercambio de los LSAs
– full
La base de datos está completa y es síncrona dentro del área. Las rutas ya pueden
determinarse.
Nota
Estado normal
Si el router interlocutor es un router designado o un router de reserva designado, el
estado es "full". De lo contrario, el estado es "two-way".

2282

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Transit Area ID
Indica la ID del área a través de la cual se genera la relación de vecindad virtual.
● Paquetes Hello supr.
Indica si hay paquetes Hello suprimidos destinados al router vecino virtual.
– no: no hay paquetes Hello suprimidos (predeterminado)
– sí: hay paquetes Hello suprimidos.
● Cola de espera Hello
Longitud de la cola de espera con los paquetes Hello aún por transmitir.
● Eventos
Indica el número de cambios de estado.

OSPFv2 LSDB
Sinopsis .
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
La Link State Database es la base de datos central para la administración de todas las
conexiones de un área. Consta de los llamados Link State Advertisements (LSAs). Los datos
más importantes de estos LSAs se muestran en esta página del WBM.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2283

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
La tabla se divide en las siguientes columnas:
● Area ID
Indica la ID del área a la que pertenece el LSA. Si el LSA es una conexión externa, se indica
un '-'.
● Tipo de LSA
Indica el tipo de LSA. Son posibles los siguientes valores:
– unknown
Tipo de LSA desconocido.
– Router
El Router LSA (tipo 1) se envía desde el router OSPF dentro de un área. El LSA contiene
información sobre el estado de todas las interfaces del router.
– Network
El Network LSA (tipo 2) se envía desde el router designado dentro de un área. El LSA
contiene una lista de routers conectados con la red.
– NSSA External
El NSSA External LSA (tipo 7) se envía desde el NSSA-ASBR dentro de un NSSA. El
NSSA-ASBR recibe LSAs del tipo 5 y convierte la información a LSAs del tipo 7. El NSSA
Router puede enviar estos LSAs dentro de un NSSA.
– Summary
El Summary LSA (tipo 3) se envía desde el ABR dentro de un área. El LSA contiene
información sobre rutas a otras redes.
– AS Summary
El AS Summary LSA (tipo 4) se envía desde el Area Border Router dentro de un área.
El LSA contiene información sobre rutas a otros sistemas autónomos.
– AS External
El AS External LSA (tipo 5) se envía desde el AS Border Router dentro de un sistema
autónomo. El LSA contiene información sobre las rutas desde una red a otra red.
● Link State ID
Indica la ID del LSA.
● ID de router
Indica la ID del router que ha enviado este LSA.
● Número de secuencia
Indica el número de secuencia del LSA. Con cada renovación de un LSA este número de
secuencia aumenta en uno.

Estadística RIPv2
Sinopsis
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

2284

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Esta página muestra la estadística de la interfaz RIP.

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Dirección IP
Muestra la dirección IP de la interfaz RIPv2.
● Telegramas ignorados
Número de telegramas RIP recibidos, que se han borrado y por ello no se han tenido en
cuenta.
● Rutas ignoradas
Número de rutas de telegramas RIP válidos que no se han podido tener en cuenta.
● Actualizaciones enviadas
Indica la frecuencia con la que el router ha enviado su tabla de routing a los routers vecinos.

Traducciones NAT
Sinopsis
Esta página muestra las conexiones NAT activas.

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Interfaz
Muestra la interfaz IP.
● Dirección Inside Local
Muestra la dirección real del dispositivo al que debe accederse externamente.
● Puerto Inside Local
Indica el puerto asignado a la Dirección Inside Local.
● Dirección Inside Global
Muestra la dirección en la que se accede al dispositivo externamente.
● Puerto Inside Global
Indica el puerto asignado a la Dirección Inside Local.
● Dirección Outside Local/Global
Muestra la dirección del interlocutor.
● Puerto Outside Local/Global
Indica el puerto del interlocutor externo.
● Último uso[s]
Indica el instante en el que se transfirió el último paquete.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2285

Configuración de dispositivos y redes
1.4 Crear configuraciones

Interfaces PIM
Sinopsis
Esta página muestra las interfaces PIM.

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Interface
Muestra la interfaz PIM.
● Address
Muestra la dirección IP de la interfaz.
● Query Interval
Cada router o interfaz PIM envía cíclicamente paquetes Hello en el intervalo indicado. De
ese modo cada router PIM conoce a sus vecinos y se puede determinar el Designated
Router.
● DR Address
Muestra la dirección IP del Designated Router.
● DR Priority
Muestra la prioridad DR de la interfaz.

Vecinos PIM
Sinopsis
Esta página muestra la tabla de vecindario PIM.

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Interface
Muestra la interfaz PIM. Los router PIM están conectados entre sí a través de esta interfaz.
● Neighbor Address
Muestra la dirección IP del vecino.
● DR Priority
Muestra la prioridad DR de la interfaz.

Rutas PIM
Sinopsis
Esta página muestra la tabla de routing PIM.

2286

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los valores mostrados
Seleccione las rutas PIM que deben mostrarse:
● All
● Outgoing
Dependiendo de la selección no se mostrarán todas las columnas en la tabla.
La tabla se divide en las siguientes columnas:
● Group Address
Muestra la dirección del grupo Multicast.
● Group Mask
Muestra la máscara de subred que delimita la banda Multicast.
● Source Address
– Dirección IP
Muestra la dirección IP de origen del paquete Multicast.
– *
Los mensajes (*,G) contienen el grupo y la información de enviar el mensaje en
dirección RP.
La ruta se traza a través del RP.
● Incoming Interface
Indica a través de qué interfaz se recibe el Multicast.
● Outgoing Interface
Indica a través de qué interfaz se envía el Multicast.
● Status
Indica si se utiliza un grupo Multicast.
– Forwarding
Se utiliza el grupo Multicast.
– Pruned
No se utiliza el grupo Multicast.

PIM RP
Muestras de las estadísticas
Esta página muestra información sobre puntos de encuentro.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2287

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los valores mostrados
Seleccione los puntos de encuentro que deben mostrarse:
● Candidate
Muestra las interfaces del dispositivo que son candidatas para puntos de encuentro.
● Elected (Designated)
Muestra los Designated Router del dispositivo.
● Static
Muestra los puntos de encuentro estáticos del dispositivo.
Dependiendo de la selección no se mostrarán todas las columnas en la tabla.
La tabla se divide en las siguientes columnas:
● Group Address
Muestra la dirección del grupo Multicast.
● Group Mask
Muestra la máscara de subred que delimita la banda Multicast.
● RP Address
Muestra la dirección IP del RPs.
● RP Priority
Muestra la prioridad de la interfaz como RP.
● Bidirectional Multicast
Indica si la función "Multicast bidireccional" está activada o desactivada.

PIM BSR
Sinopsis
Esta página muestra información sobre routers Bootstrap (BSR).

Descripción de los valores mostrados
Esta página contiene los siguientes campos:
● Elected BSR Address
Muestra la dirección IP del BSRs seleccionado dentro de una red PIM o de un dominio PIM.
La tabla se divide en las siguientes columnas:
● Candidate BSR Address
Muestra las interfaces del dispositivo que son candidatas para el BSR en el router PIM.
● Candidate BSR Priority
Muestra la prioridad del BSR.

2288

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Caché MSDP
Sinopsis
Esta página muestra los interlocutores MSDP.

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Source
Muestra el origen del Multicast.
● Group
Muestra el grupo Multicast.
● RP
Muestra el interlocutor MSDP.
● Uptime
Muestra el tiempo restante después del cual se borrará una entrada del caché SA si no se
reciben actualizaciones de caché SA.

Routing IPv6
Tabla de routing
Sinopsis
Esta página muestra las rutas IPv6 que se utilizan actualmente.
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Destination Network
Indica la dirección de destino de esta ruta.
● Prefix Length
Indica la longitud de prefijo de esta ruta.
● Gateway
Indica la pasarela de esta ruta.
● Interface
Indica la interfaz de esta ruta.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2289

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Metric
Indica la métrica de la ruta. Cuanto mayor es el valor, más tardan los paquetes en llegar a
su destino.
● Routing Protocol
Muestra el protocolo de routing del que proviene la entrada de la tabla de routing. Son
posibles las siguientes entradas:
– Connected: rutas conectadas
– Static: rutas estáticas
– RIPng: rutas vía RIPng
– OSPFv3: rutas vía OSPFv3
– Other: Otras rutas

Interfaces OSPFv3
Sinopsis
Esta página muestra la configuración de la interfaz OSPFv3.
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Interface
Muestra la interfaz a la que se refieren los ajustes.
● Area ID
Indica la ID de área a la que pertenece la interfaz OSPF.

2290

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Interface Status
Muestra el estado de la interfaz:
– Down
La interfaz no está disponible.
– Loop back
Interfaz Loop back
– Waiting
Arranque y negociación de la interfaz.
– Point to Point
Conexión punto a punto
– Designated Router
El router es un router designado y genera Network LSA.
– Backup D. Router
El router es el router de reserva para el router designado.
– S D. Router
La interfaz está arrancada. El router no es un router designado ni un router de reserva
designado.
● OSPF Status
Indica el estado de OSPF.
– Enabled: OSPF está activado en la interfaz.
– Disabled: OSPF está desactivado en la interfaz.
● Designated Router
Indica la dirección IPv6 del router designado para esta interfaz OSPFv3.
● Backup Designated Router
Indica la dirección IPv6 del router de reserva designado para esta interfaz OSPFv3.
● Eventos
Indica el número de cambios de estado de OSPFv3.

Vecinos OSPFv3
Sinopsis
Esta página muestra los routers vecinos registrados dinámicamente en las distintas redes.
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2291

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Interface
Muestra la interfaz OSPFv3 a través de la cual se accede al router vecino.
● Router ID
Muestra la ID del router vecino.
● Status
Muestra el estado del router vecino. El estado puede adoptar los siguientes valores:
– unknown
Estado del router vecino desconocido.
– down
El router vecino no está accesible.
– attempt e init
Estado de corta duración durante la inicialización
– two-way
Recepción de paquetes Hello por ambos lados. Se fijan el router designado y el router
de reserva designado.
– exchangestart, exchange y loading
Estado durante el intercambio de los LSA
– full
La base de datos está completa y es síncrona dentro del área. Las rutas ya pueden
determinarse.
Nota
Estado normal
Si el router interlocutor es un router designado o un router de reserva designado, el
estado es "full". De lo contrario, el estado es "two-way".
● Assoc. Area Type
Indica el tipo de área a través de la cual existe la relación de vecindad. Existen los
siguientes tipos de área:
– Normal
– Stub
– NSSA
– Backbone
● Priority
Muestra la prioridad del router vecino. Solo tiene relevancia para la selección del router
designado en una red. Este dato no es relevante en el caso de routers vecinos virtuales.
● Hello Suppr.
Muestra los paquetes Hello suprimidos destinados al router vecino. Este campo está
normalmente en "no".

2292

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Retrans. Queue
Indica la longitud de la cola de espera con los paquetes Hello aún por transmitir.
● Events
Indica el número de cambios de estado.

Vecinos virtuales OSPFv3
Sinopsis
Esta página muestra los vecinos virtuales configurados.
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Interface
Muestra la interfaz OSPFv3 a través de la cual se accede al router vecino.
● Router ID
Muestra la ID del router vecino virtual.
● Status
Muestra el estado del router vecino virtual. El estado puede adoptar los siguientes valores:
– unknown
Estado del router vecino desconocido.
– down
El router vecino no está accesible.
– attempt e init
Estado de corta duración durante la inicialización
– two-way
Recepción de paquetes Hello por ambos lados. Se fijan el router designado y el router
de reserva designado.
– exchangestart, exchange y loading
Estado durante el intercambio de los LSA
– full
La base de datos está completa y es síncrona dentro del área. Las rutas ya pueden
determinarse.
Nota
Estado normal
Si el router interlocutor es un router designado o un router de reserva designado, el
estado es "full". De lo contrario, el estado es "two-way".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2293

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Trans. Area-ID
Muestra la ID del área a través de la cual se genera la relación de vecindad virtual.
● Hello Suppr.
Muestra los paquetes Hello suprimidos destinados al router vecino. Este campo está
normalmente en "No".
● Cola Hello
Indica la longitud de la cola de espera con los paquetes Hello aún por transmitir.
● Events
Indica el número de cambios de estado.

OSPFv3 AS-Scope LSDB
Sinopsis .
La AS-Scope LSDB está formada por los AS External LSA. Los datos más importantes de
estos LSA se muestran en esta página.
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Link State Type
– AS External
El AS External LSA (tipo 0x4005) se envía desde el AS Border Router dentro de un
sistema autónomo. El LSA contiene información sobre las rutas desde una red a otra red.
● Link State ID
Indica la ID del LSA.
● Router ID
Indica la ID del router que ha enviado este LSA.
● Sequence No
Indica el número de secuencia del LSA. Con cada renovación de un LSA este número de
secuencia aumenta en uno.

2294

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

OSPFv3 Area-Scope LSDB
Sinopsis .
La Area-Scope LSDB es la base de datos central para la administración de todas las
conexiones de un área. Los datos más importantes de los LSA se muestran en esta página.
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Area ID
Indica la ID del área a la que pertenece el LSA. Si el LSA es una conexión externa, se indica
un '-'.
● Link State Type
Indica el tipo de LSA. Son posibles los siguientes valores:
– Router
El Router LSA (tipo 0x2001) se envía desde el router OSPF dentro de un área. El LSA
contiene información sobre el estado de todas las interfaces del router. Sin embargo, ya
no contiene información de dirección. Esta se incluye en el nuevo tipo de LSA 0x2009.
– Network
El Network LSA (tipo 0x2002) se envía desde el router designado dentro de un área. El
LSA contiene una lista de routers conectados con la red. Sin embargo, ya no contiene
información de dirección. Esta se incluye en el nuevo tipo de LSA 2009.
– Inter-Area Prefix
El Inter-Area Prefix (tipo 0x2003) se envía desde el ABR dentro de un área. El LSA
contiene información sobre rutas a otras redes.
– Inter-Area Router
El Inter-Area Router (tipo 0x2004) se envía desde el Area Border Router dentro de un
área. El LSA contiene información sobre rutas a otros sistemas autónomos.
– Type7
El Type7 (tipo 0x2007) se envía desde el NSSA-ASBR dentro de un NSSA. El NSSAASBR recibe LSA del tipo 0x4005 y convierte la información a LSA del tipo 0x2007. El
router NSSA puede reenviar estos LSA dentro de un NSSA.
– Intra-Area Prefix
El Intra-Area Prefix (tipo 0x2009) solo se envía dentro de un área. Contiene los prefijos
IPv6 conectados con el router o la red.
● Link State ID
Indica la ID del LSA.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2295

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Router ID
Indica la ID del router que ha enviado este LSA.
● Sequence No
Indica el número de secuencia del LSA. Con cada renovación de un LSA este número de
secuencia aumenta en uno.

OSPFv3 Link-Scope LSDB
Sinopsis .
La Link-Scope LSDB está formada por los Link LSA. Los datos más importantes de estos LSA
se muestran en esta página.
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Interface
Indica la interfaz OSPFv3 a la que pertenece el Link LSA.
● Link State Type
– Link
El router envía el Link LSA (tipo 0x2009) a todos los routers enlazados con él. Contiene
la dirección Link Local del router y una lista con prefijos IPv6 configurados en el link.
● Link State ID
Indica la ID del LSA.
● Router ID
Indica la ID del router que ha enviado este LSA.
● Sequence No
Indica el número de secuencia del LSA. Con cada renovación de un LSA este número de
secuencia aumenta en uno.

Estadísticas RIPng
Sinopsis
Esta página muestra la estadística de la interfaz RIPng.
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

2296

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Interfaz
Muestra la interfaz RIPng.
● Status
Muestra el estado de la interfaz RIPng.
– up
– down
● Avisos recibidos
Indica la frecuencia con la que el router ha recibido avisos.
● Peticiones recibidas
Indica la frecuencia con la que el router ha recibido peticiones.
● Respuestas recibidas
Indica la frecuencia con la que el router ha recibido respuestas.
● Comandos desconocidos
Indica cuántos paquetes RIPng se han recibido cuyo valor en el campo "Commands" del
encabezado de RIPng es desconocido. Los valores conocidos son 1 para peticiones y 2
para respuestas.
● Otras versiones
Indica cuántos paquetes RIPng se han recibido cuyo valor en el campo "Version" no es 1.
● Paquetes rechazados
Indica la frecuencia con la que el router ha rechazado paquetes RIPng.
● Avisos enviados
Indica la frecuencia con la que el router ha enviado avisos.
● Peticiones enviadas
Indica la frecuencia con la que el router ha enviado peticiones.
● Respuestas enviadas
Indica la frecuencia con la que el router ha enviado respuestas.
● Updates Sent
Indica la frecuencia con la que el router ha enviado su tabla de routing a los routers vecinos.

Servidor DHCP
La página muestra las direcciones IPv4 que el servidor DHCP ha asignado a los dispositivos.
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2297

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los valores mostrados
● Dirección IP
Muestra la dirección IPv4 asignada al cliente DHCP.
● Pool ID
Muestra el número de la banda de direcciones IPv4.
● Método de identificación
Muestra el método con el que se identifica el cliente DHCP.
● Valor de identificación
Muestra la dirección MAC o la ID del cliente DHCP.
● Método de asignación
Indica si la dirección IPv4 se ha asignado estática o dinámicamente. Las entradas estáticas
se configuran en "Sistema > DHCP > Asignación estática".
● Estado de asignación
Muestra el estado de la asignación.
– Asignado
Se utiliza la asignación.
– No utilizado
La asignación no se utiliza.
– Se está comprobando
La asignación se comprueba.
– Desconocido
El estado de la asignación se desconoce.
● Vencimiento
Muestra hasta cuándo será válida la dirección IPv4 asignada. Hasta entonces el cliente
DHCP tiene que solicitar una nueva dirección IPv4 o prolongar el plazo de validez de la
dirección IPv4 asignada.

SNMP
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
Esta página muestra los grupos SNMPv3 creados. Los grupos SNMPv3 se configuran en
"System > SNMP".

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Group Name
Indica el nombre del grupo.
● User Name
Muestra el usuario que está asignado al grupo.

2298

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Seguridad
Sinopsis
La página muestra los ajustes de seguridad así como las cuentas de usuario locales y externas.
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
Los valores mostrados dependen de los derechos del usuario que ha iniciado sesión.

Descripción de los valores mostrados
Services
La lista "Services" muestra los ajustes de seguridad.
● SSH Server
Este ajuste se configura en "System > Configuration".
– Activado: acceso codificado a CLI
– Desactivado: sin acceso codificado a CLI
● Servidor web
Este ajuste se configura en "System > Configuration"
– HTTP/HTTPS: es posible acceder al WBM mediante HTTP y HTTPS.
– HTTPS: solo es posible acceder al WBM mediante HTTPS.
● SNMP
Este ajuste se configura en "System > SNMP > General".
– "-" (SNMP desactivado)
No es posible acceder a los parámetros del dispositivo a través de SNMP.
– SNMPv1/v2c/v3
Se puede acceder a los parámetros del equipo con las versiones 1, 2c o 3 de SNMP.
– SNMPv3
Se puede acceder a los parámetros del equipo solo con la versión 3 de SNMP.
● ACL de gestión
Este ajuste se configura en "Seguridad > ACL de gestión".
– Desactivado: sin restricciones de acceso
El control de acceso está desactivado.
– Activado: sin restricciones de acceso
El control de acceso está activado, pero no se han definido reglas de acceso.
– Activado: solo acceso restringido
El control de acceso está activado y se han definido reglas de acceso.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2299

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Login Authentication
Este ajuste se configura en "Seguridad > AAA > General".
– Local
La autenticación debe realizarse localmente en el dispositivo.
– RADIUS
La autenticación debe efectuarse a través de un servidor RADIUS.
– Local and Radius
La autenticación puede realizarse tanto con los usuarios existentes en el dispositivo
(nombre de usuario y contraseña) como mediante un servidor RADIUS.
Primero se busca al usuario en la base de datos local. Si el usuario no existe se envía
una solicitud RADIUS.
– RADIUS with Fallback Local
La autenticación debe efectuarse a través de un servidor RADIUS.
Solo se lleva a cabo una autenticación local si el servidor RADIUS no está accesible en
la red.
● Directriz para contraseñas
Indica la norma que se utiliza actualmente para la contraseña.
Local and External User Accounts
Las cuentas de usuario locales y sus funciones se configuran en "Seguridad > Usuario".
Al crear una cuenta de usuario local se genera automáticamente una cuenta de usuario
externa. Las cuentas de usuario locales son usuarios que tienen una contraseña para iniciar
sesión en el dispositivo.
Un usuario se vincula a una función en la tabla "Cuentas de usuario externas", p. ej. el usuario
"Observer" a la función "user". En este caso, el usuario está definido en un servidor RADIUS.
La función está definida localmente en el dispositivo. Cuando un servidor RADIUS autentica a
un usuario pero el grupo correspondiente es desconocido o no existe, el dispositivo comprueba
si hay una entrada en la tabla "External User Accounts" para el usuario. Si existe la entrada en
cuestión, se inicia la sesión del usuario con los derechos de la función vinculada. Si el grupo
correspondiente es conocido en el dispositivo, se evalúan ambas tablas. Al usuario se le
asigna la función que tiene mayores derechos.
Nota
La tabla "Cuentas de usuario externas" solo se evalúa si en el modo de autorización RADIUS
se ha ajustado "Específico del fabricante".
Desde CLI se accede a las cuentas de usuario externas.
La tabla "Local User Accounts" se divide en las siguientes columnas:
● User Account
Muestra el nombre del usuario local.
● Role
Muestra la función del usuario. Encontrará más información sobre los derechos de la
función en "Information > Security > Roles".

2300

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Derechos de función soportados
La página muestra los derechos de función que están disponibles localmente en el dispositivo.
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
Los valores mostrados dependen de la función del usuario que ha iniciado sesión.

Descripción de los valores mostrados
● Function Right
Muestra el número del derecho de función. Los números tienen asignados diferentes
derechos en relación a los parámetros del dispositivo.
● Description
Muestra la descripción del derecho de función.

Funciones
La página muestra las funciones válidas localmente en el dispositivo.
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
Los valores mostrados dependen de la función del usuario que ha iniciado sesión.

Descripción de los valores mostrados
La tabla contiene las siguientes columnas:
● Role
Muestra la función.
● Function Right
Muestra los derechos de la función:
– 1
Los usuarios con esta función pueden leer parámetros del dispositivo pero no
cambiarlos.
– 15
Los usuarios con esta función pueden leer y modificar los parámetros del dispositivo.
– 0
Se trata de una función que asigna internamente el dispositivo cuando no ha sido
posible autenticar al usuario.
Al usuario se le niega el acceso al dispositivo.
● Description
Muestra una descripción de la función.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2301

Configuración de dispositivos y redes
1.4 Crear configuraciones

Grupos
Esta página muestra los grupos que están vinculados a una función y a cuál. El grupo está
definido en un servidor RADIUS. La función está definida localmente en el dispositivo.
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
Los valores mostrados dependen de la función del usuario que ha iniciado sesión.

Descripción de los valores mostrados
La tabla se divide en las siguientes columnas:
● Group
Muestra el nombre del grupo. El nombre coincide con el grupo del servidor RADIUS.
● Role
Muestra la función. Los usuarios que se autentican con el grupo vinculado a través del
servidor RADIUS obtienen los derechos de la función en el dispositivo local.
● Description
Muestra la descripción para la vinculación.

Configuración de funciones de sistema
Configuración
Esta página contiene la vista general de configuración de las modalidades de acceso del
dispositivo. Establezca los servicios a través de los cuales se accede al dispositivo. Para
algunos servicios hay más páginas de configuración, en las que se pueden realizar ajustes
detallados.

Descripción
La página contiene los siguientes campos:
● Servidor Telnet
Active o desactive el servicio "Servidor Telnet" para el acceso no codificado a CLI.
● Servidor SSH
Active o desactive el servicio "Servidor SSH" para el acceso codificado a CLI.
● Solo servidor HTTPS
Cuando esta función está activada solo es posible acceder al dispositivo vía HTTPS.
● Cliente DNS
Active o desactive la función de cliente DNS del IE Switch. Puede realizar más ajustes en
"Sistema > Cliente DNS".
● Cliente SMTP
Active o desactive el cliente SMTP. Puede realizar más ajustes en "Sistema > Cliente
SMTP".

2302

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Cliente Syslog
Active o desactive el cliente Syslog. Puede realizar más ajustes en "Sistema > Cliente
Syslog".
● Servidor DCP
Especifique si se debe poder acceder al dispositivo con DCP (Discovery and Configuration
Protocol):
– "-" (desactivado)
DCP está desactivado. No pueden leerse ni modificarse los parámetros del dispositivo.
– Lectura/escritura
Con DCP es posible leer y modificar los parámetros del dispositivo.
– Solo lectura
Con DCP es posible leer los parámetros del dispositivo, pero no modificarlos.
● Servidor RCDP
Especifique si con RCDP (RUGGEDCOM Discovery Protocol) se puede acceder al
dispositivo:
– "-" (desactivado)
RCDP está desactivado. No pueden leerse ni modificarse los parámetros del dispositivo.
– Lectura/escritura
Con RCDP es posible leer y modificar parámetros del dispositivo.
– Solo lectura
Con RCDP es posible leer los parámetros del dispositivo, pero no modificarlos.
● Ajuste de la hora
Elija el ajuste deseado. Son posibles los siguientes ajustes:
– Manual
La hora del sistema se ajusta de forma manual. Puede realizar más ajustes en "Sistema
> Hora del sistema > Ajuste manual".
– SIMATIC Time
La hora del sistema se ajusta mediante un reloj SIMATIC. Puede realizar más ajustes en
"Sistema > Hora del sistema > SIMATIC Time Client".
– Cliente SNTP
La hora del sistema se ajusta mediante un servidor SNTP. Puede realizar más ajustes
en "Sistema > Hora del sistema > Cliente SNTP".
– Cliente NTP
La hora del sistema se ajusta mediante un servidor NTP. Puede realizar más ajustes en
"Sistema > Hora del sistema > Cliente NTP".
– Cliente PTP(solo para SCALANCE XR528-6M y XR552-12M)
La hora del sistema se ajusta mediante un servidor PTP. Puede realizar más ajustes en
"Sistema > Hora del sistema > Cliente PTP".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2303

Configuración de dispositivos y redes
1.4 Crear configuraciones
● SNMP
Elija el protocolo deseado. Son posibles los siguientes ajustes:
– "-" (SNMP desactivado)
No se puede acceder a los parámetros del dispositivo vía SNMP.
– SNMPv1/v2c/v3
Se puede acceder a los parámetros del dispositivo con las versiones 1, 2c o 3 de SNMP.
Puede realizar más ajustes en "Sistema > SNMP > General".
– SNMPv3
Se puede acceder a los parámetros del dispositivo con la versión 3 de SNMP. Puede
realizar más ajustes en "Sistema > SNMP > General".
● SNMPv1/v2 solo lectura
Active o desactive el acceso de escritura a variables SNMP con SNMPv1/v2c.
● Traps SNMPv1
Active o desactive el envío de traps SNMP (telegramas de alarma). Puede realizar más
ajustes en "Sistema > SNMP > Traps".
● Interfaz de configuración SINEMA
Si la interfaz de configuración SINEMA está activada es posible cargar configuraciones en
el IE Switch desde el TIA Portal.
● Tipo de DUID
Especifique qué tipo de DUID se utilizará. Los tipos de DUID están definidos en RFC 3315.
– DUID-LLT
DUID está basado en la dirección del nivel de enlace de la interfaz y en un sello de
tiempo.
– DUID-EN
El DUID lo asigna el fabricante (EN = Enterprise number).
– DUID-LL
El DUID está basado en la dirección del nivel de enlace de la interfaz.
● Dirección del nivel de enlace más tiempo (LLT)
El valor está basado en la dirección del nivel de enlace de la interfaz y en un sello de tiempo.
El valor se genera de nuevo cada vez que se restablece la configuración de fábrica. El valor
puede cambiarse en caso necesario.
● Número de empresa del fabricante (EN)
El valor está basado en el número de empresa, que es específico del fabricante. El valor se
genera de nuevo cada vez que se restablece la configuración de fábrica. El valor puede
cambiarse en caso necesario.
● Dirección del nivel de enlace (LL)
La dirección del nivel de enlace está basada en la dirección MAC. El valor se genera de
nuevo cada vez que se restablece la configuración de fábrica. El valor puede cambiarse en
caso necesario.

2304

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● NFC (solo para SCALANCE XM-400)
Active o desactive la función "NFC" (Near Field Communication).
Para más información sobre NFC, consulte las instrucciones de servicio "SCALANCE
XM400".
● Modo de configuración
Elija el modo de operación deseado. Son posibles los siguientes modos de operación:
– Guardar automáticamente
Modo de seguridad automático. La configuración se guarda de forma automática aprox.
1 minuto después de la última modificación de parámetros o al reiniciar el dispositivo.
– Trial
En el modo de configuración "Trial" se aceptan modificaciones, pero no se guardan en
el archivo de configuración (Startup Configuration).
Para guardar modificaciones en el archivo de configuración, utilice el botón "Escritura de
la configuración de arranque". El botón "Escritura de la configuración de arranque" se
muestra al seleccionar el modo Trial. Además, en el área de visualización aparece el
aviso "El modo de configuración Trial está activo - para guardar los ajustes, pulse el
botón "Escritura de la configuración de arranque"." en cuanto hay algún cambio sin
guardar. Este aviso es visible en todas las páginas hasta que las modificaciones
realizadas se guardan o el dispositivo se reinicia.

General
Dispositivo
Esta página contiene información general sobre el dispositivo.

Descripción
La página contiene los siguientes campos:
● Hora actual del sistema (solo disponible online)
Indica la hora actual del sistema. La hora del sistema la ajusta el usuario o se sincroniza
mediante un telegrama de hora, que puede ser un telegrama de hora SINEC H1, NTP o
SNTP. (Solo lectura)
● Tiempo de funcionamiento del sistema (solo disponible online)
Indica el tiempo de funcionamiento del dispositivo desde el último rearranque completo.
(Solo lectura)
● Tipo de dispositivo (solo disponible online)
Indica la denominación de tipo del dispositivo. (Solo lectura)
● Nombre del sistema
Puede introducir el nombre del dispositivo. El nombre introducido se muestra en el área de
selección. Pueden utilizarse un máximo de 255 caracteres. El nombre del sistema se indica
también en el símbolo del sistema CLI (Prompt). El número de caracteres está limitado en
el símbolo del sistema CLI. El nombre del sistema se trunca después de 16 caracteres.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2305

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Persona de contacto
Puede introducir el nombre de una persona de contacto responsable de la administración
del dispositivo. Pueden utilizarse un máximo de 255 caracteres.
● Ubicación del dispositivo
Puede introducir el lugar de montaje del dispositivo. El lugar de montaje introducido se
muestra en el área de selección. Pueden utilizarse un máximo de 255 caracteres.
Nota
En los campos de entrada se usan los caracteres ASCII 0x20 hasta 0x7e.

Coordenadas
En esta página puede introducirse información sobre las coordenadas geográficas (latitud,
longitud y altura sobre el elipsoide según WGS84).
Determinación de las coordenadas
Para determinar las coordenadas geográficas, utilice los mapas que se suministran con el
dispositivo.
Las coordenadas geográficas también se pueden determinar mediante un receptor GPS. Por
lo general, estos dispositivos muestran las coordenadas geográficas directamente, por lo que
basta con introducirlas en los campos de entrada de esta página.

Descripción
La página contiene los siguientes campos de entrada con una longitud máxima de 32
caracteres:
● Campo de entrada "Latitud"
Introduzca la latitud norte o sur de la ubicación del dispositivo.
P. Ej., +49° 1' 31,67" significa que el dispositivo se encuentra a 49 grados, 1 minuto y
31,67 segundos de latitud norte.
La latitud sur va precedida de un signo negativo.
También se pueden añadir las letras N (latitud norte) o S (latitud sur) a las indicaciones
numéricas (49° 1' 31,67" N).
● Campo de entrada "Longitud"
Introduzca la longitud este u oeste de la ubicación del dispositivo.
P. ej., +8° 20' 58,73" significa que el dispositivo se encuentra a 8 grados, 20 minutos y
58,73 segundos de longitud este.
La longitud oeste va precedida de un signo negativo.
También se pueden añadir las letras O o E (longitud este) o W (longitud oeste) a las
indicaciones numéricas (8° 20' 58,73" E).
● Campo de entrada "Altitud"
Introduzca el valor de la altitud en metros por encima o por debajo del nivel del mar.
P. ej., 158 m significa que el dispositivo está a una altura de 158 m por encima del nivel del
mar.
Las altitudes por debajo del nivel del mar (p. ej. en el Mar Muerto) van precedidas de un
signo negativo.

2306

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

IP agente
Configuración de las direcciones IP
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
En esta página se realiza la configuración IP del dispositivo.
En los dispositivos con varias interfaces IP, esta llamada remite al comando de menú
"Subredes > Configuración" del menú "Layer 3 (IPv4)" y a la configuración de la interfaz TIA
que aparece allí.

Descripción
La página contiene los siguientes campos:
● Método de asignación de direcciones IP
Indica cómo se asigna la dirección IP.
– Estático
La dirección IP es estática. Los ajustes IP se introducen en los campos de entrada
"Dirección IP" y "Máscara de subred".
– Automático (DHCP)
El dispositivo obtiene una dirección IP dinámica de un servidor DHCP.
● Dirección IP
Introduzca la dirección IP del dispositivo.
Tras hacer clic en el botón "Aplicar ajustes", esta dirección IP también se muestra en la
línea de direcciones del navegador de Internet. Si esto no ocurre automáticamente, deberá
introducir manualmente la dirección IP en la línea de direcciones del navegador de Internet.
● Máscara de subred
Introduzca la máscara de subred del dispositivo.
● Pasarela predeterminada
Introduzca la dirección IP de la pasarela predeterminada para comunicarse con
dispositivos de otra subred, p. ej. estaciones de diagnóstico o servidores de correo
electrónico.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2307

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Agent VLAN ID
Seleccione la VLAN ID de la lista desplegable. Solo pueden seleccionarse VLANs ya
configuradas.
En el modo "802.1D Transparent Bridge", esta lista desplegable está atenuada; consulte
también "Layer 2 > VLAN > General".
Nota
Modificación de la Agent VLAN ID
Cuando el PC de configuración está conectado al dispositivo directamente a través de
Ethernet y se modifica la Agent VLAN ID , el dispositivo deja de estar accesible vía Ethernet
después de la modificación.
● Dirección MAC
Muestra la dirección MAC del dispositivo. La dirección MAC va asociada al hardware y no
se puede modificar.

DNS
Cliente DNS
En esta página se pueden configurar manualmente hasta 3 servidores DNS con direcciones
IPv4 o IPv6. A cada uno de los servidores DNS configurados manualmente se les asigna un
índice de 1 a 3. El IE Switch puede aprender 2 servidores DNS con direcciones IPv4 a través
de DHCP. A cada uno de los servidores DNS aprendidos se les asigna automáticamente un
índice de 6 a 7.
Si hay varios servidores DNS, el orden en el que aparecen en la tabla indica el orden en el que
se consultarán. El primer servidor se consulta en primer lugar. En total puede haber
configurados 5 servidores DNS en el IE Switch. Son preferibles servidores DNS configurados
manualmente.
El servidor DNS (Domain Name System) asigna un nombre de dominio a una dirección IP de
modo que sea posible identificar unívocamente a un dispositivo.
Cuando esta función está activada, el IE Switch puede comunicarse con un servidor DNS
como cliente DNS. Existe la posibilidad de introducir nombres en campos de dirección IP.
Nota
Para utilizar la función "Cliente DNS" debe haber un servidor DNS en la red.

2308

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción
La página contiene los siguientes campos:
● Cliente DNS
Active o desactive la función de cliente DNS del IE Switch.
● Servidores DNS utilizados
Especifique los servidores DNS que utiliza el dispositivo:
– learned only
El dispositivo utiliza únicamente los servidores DNS asignados mediante DHCP.
– manual only
El dispositivo utiliza únicamente los servidores DNS configurados manualmente. Los
servidores DNS deben estar conectados a Internet. Pueden configurarse como máximo
tres servidores DNS.
– all
El dispositivo utiliza todos los servidores DNS disponibles.
● Dirección del servidor DNS
Introduzca la dirección IP del servidor DNS.
La tabla contiene las siguientes columnas:
● Dirección del servidor DNS
Muestra la dirección IP del servidor DNS.
● Creación
Indica si el servidor DNS se ha configurado manualmente o ha sido asignado mediante
DHCP.

Dominios DNS
En esta página se pueden definir como máximo 4 nombres de dominio. El nombre de dominio
primario se prioriza para resolver el nombre de host.
Los nombres de dominio 2 a 4 pueden aprenderse o configurarse manualmente en esta
página. Si hay varios servidores DNS, el orden en el que aparecen en la tabla indica el orden
en el que se priorizarán los nombres de dominio.
Si hay nombres de dominio almacenados, en algunos campos de dirección IP se puede
introducir el nombre de host.

Descripción
La página contiene los siguientes campos:
● Dominio primario
Introduzca el nombre del dominio primario. Esta entrada se prioriza para resolver el nombre
de host.
● Nombre del dominio
Introduzca el nombre de otro dominio.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2309

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla contiene las siguientes columnas:
● Nombre del dominio
Muestra el nombre del otro dominio.
● Creación
Indica si el nombre de dominio se ha configurado manualmente o ha sido asignado
mediante DHCP.

Rearranque completo
En este menú encontrará un botón para reiniciar el dispositivo, así como la posibilidad de
restablecer su configuración de fábrica o los ajustes predeterminados de diferentes perfiles.
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

Reinicio
Al reiniciar un equipo, tenga en cuenta los siguientes aspectos:
● Solo puede realizar un reinicio del dispositivo si tiene derechos de administrador.
● El reinicio de un equipo se debe efectuar solo mediante los botones de este menú o con los
correspondientes comandos CLI, y no desconectando y volviendo a conectar la
alimentación eléctrica.
● Si el dispositivo está en modo "Trial", los cambios de la configuración deben guardarse de
forma manual antes de un rearranque completo. Los cambios realizados solo se aplicarán
tras hacer clic en el botón "Aplicar ajustes" de la correspondiente página del WBM en el
dispositivo.
● Si el dispositivo está en modo "Guardar automáticamente", las últimas modificaciones se
guardan automáticamente antes de un rearranque completo.

Restablecer configuración de fábrica
Al restablecer todos los ajustes a los valores de fábrica, se pierden también la dirección IP y las
contraseñas. Tras ello solo se podrá acceder al dispositivo mediante la interfaz serie, la
Primary Setup Tool o DHCP.
ATENCIÓN
Fallo del tráfico de datos
En función de la conexión, un dispositivo que antes estaba correctamente configurado puede
generar telegramas circulantes indefinidamente y, con ello, el fallo del tráfico de datos.

2310

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Restablecer ajustes predeterminados (perfiles)
Los perfiles ofrecen una configuración previa para diferentes casos de aplicación de los
dispositivos.
Cuando se reinicia un dispositivo con los ajustes predeterminados de un perfil, se restablece
la configuración de fábrica y algunos parámetros se ajustan de modo que están preparados
para un caso de aplicación concreto. Al contrario que al restablecer la configuración de fábrica,
tras el rearranque completo se conservan tanto los usuarios como las contraseñas. La
dirección IP configurada se pierde, de modo que posteriormente solo se podrá acceder al
dispositivo mediante la interfaz serie, la Primary Setup Tool o DHCP.
ATENCIÓN
Fallo del tráfico de datos
En función de la conexión, un dispositivo que antes estaba correctamente configurado puede
generar telegramas circulantes indefinidamente y, con ello, el fallo del tráfico de datos.
Antes del rearranque completo se muestran los ajustes que se han ajustado específicamente
para el perfil. Los perfiles pueden utilizarse independientemente del ajuste de fábrica del
dispositivo.

Descripción
Nota
Tenga en cuenta las repercusiones de las diferentes funciones, que se describen en los
apartados anteriores.
Los botones de esta página ofrecen las siguientes posibilidades para el reinicio del equipo:
● Reinicio
Haga clic en este botón para reiniciar el sistema. Debe confirmarse el reinicio en un cuadro
de diálogo. Al efectuarse un reinicio, el dispositivo se reinicializa, carga de nuevo el
firmware interno y realiza una autocomprobación. Los ajustes de la configuración de inicio
se conservan, como la dirección IP del dispositivo. Se borran las entradas aprendidas en la
tabla de direcciones. Puede dejar abierta la ventana del navegador mientras reinicia el
dispositivo. Después del rearranque completo debe volver a iniciar sesión.
● Restablecer los ajustes de fábrica y reiniciar
Haga clic en este botón para restablecer la configuración de fábrica y reiniciar el dispositivo.
El reinicio debe confirmarse en un cuadro de diálogo. Los ajustes de fábrica dependen del
dispositivo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2311

Configuración de dispositivos y redes
1.4 Crear configuraciones
Los botones de esta página ofrecen las siguientes posibilidades para el reinicio del dispositivo
con un perfil predeterminado:
● Ajustes predeterminados de PROFINET
Haga clic en este botón para restablecer los ajustes predeterminados del perfil PROFINET
y reiniciar el dispositivo. El reinicio debe confirmarse en un cuadro de diálogo. En el cuadro
de diálogo se muestran los ajustes que están adaptados específicamente al
funcionamiento con el protocolo PROFINET.
● Ajustes predeterminados de EtherNet/IP
Haga clic en este botón para restablecer los ajustes predeterminados del perfil EtherNet/IP
y reiniciar el dispositivo. El reinicio debe confirmarse en un cuadro de diálogo. En el cuadro
de diálogo se muestran los ajustes que están adaptados específicamente al
funcionamiento con el protocolo EtherNet/IP.
● Ajustes predeterminados de Industrial Ethernet
Haga clic en este botón para restablecer los ajustes predeterminados del perfil Industrial
Ethernet y reiniciar el dispositivo. El reinicio debe confirmarse en un cuadro de diálogo. En
el cuadro de diálogo se muestran los ajustes que están adaptados específicamente al
funcionamiento en el entorno Industrial Ethernet.

Cargar y guardar
Tipos de archivo
Sinopsis de los tipos de archivo
Tipo de archivo

Descripción

Config

Este archivo contiene la configuración de inicio.
Este archivo contiene, entre otros, la definición de los usuarios, funciones, gru‐
pos y derechos de función. Las contraseñas están guardadas en el archivo
"Users".

ConfigPack

Información de configuración detallada, p. ej. configuración de inicio, usuarios,
certificados y favoritos del WBM.
Archivo ZIP compuesto por los archivos Config, Users y LSYS.

ConfigPackBackup

En este archivo ZIP se guardan todas las copias de seguridad de configuración
que se han creado.

Debug

Este archivo contiene información para Siemens Support.
Está codificado y puede enviarse por correo electrónico a Siemens Support sin
riesgos de seguridad.

DebugExt

Este archivo contiene información detallada para Siemens Support.
Está codificado y puede enviarse por correo electrónico a Siemens Support sin
riesgos de seguridad. El almacenamiento del archivo puede tardar cierto tiempo.

EDS

Electronic Data Sheet (EDS)
Hojas de datos electrónicas que describen dispositivos en modo EtherNet/IP

2312

Firmware

El firmware está firmado y codificado. Con esto se garantiza que solo se pueda
cargar firmware creado por Siemens en el dispositivo.

GSDML

Información PROFINET sobre las propiedades del dispositivo

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Tipo de archivo

Descripción

HTTPSCert

Certificados HTTPS predeterminados, clave inclusive
Los certificados HTTPS predeterminados y creados automáticamente son au‐
tofirmados.
Se recomienda encarecidamente crear y proporcionar certificados HTTPS pro‐
pios. Se recomienda utilizar certificados HTTPS firmados por una entidad certi‐
ficadora externa fiable o por una interna. El certificado HTTPS comprueba la
identidad del dispositivo y regula el intercambio de datos encriptados.
No es posible grabar certificados con un formato distinto.

LogFile

Archivo con entradas de la tabla de registro de eventos

MIB

Archivo Private MSPS MIB

RunningCLI

Archivo de texto con comandos CLI
Este archivo contiene un resumen de la configuración actual en forma de co‐
mandos CLI. En este archivo las contraseñas están enmascaradas del siguiente
modo: [PASSWORD]
El archivo de texto puede descargarse. El archivo no está previsto para volver a
cargarlo sin cambios.

RunningSINEMA‐
Config

En este tipo de archivo se guarda la configuración actual del dispositivo para
transferirla a STEP7 Basic/Professional. El archivo puede importarse a STEP7
Basic/Professional y guardarse en un dispositivo con la misma referencia y ver‐
sión de firmware.
Antes de poder guardar un archivo hay que asignar una contraseña para "Run‐
ningSINEMAConfig" en el WBM en "System > Load&Save > Passwords". Esta
contraseña también es necesaria para importar el archivo a STEP7 Basic/
Professional.
Consulte también "SINEMAConfig"

Script

Archivo de texto con comandos CLI
Un archivo de script puede cargarse en un dispositivo. Los comandos CLI que
incluya se ejecutarán en correspondencia.

SINEMAConfig

Con este tipo de archivo se cargan los datos de configuración que se exportaron
a través de STEP7 Basic/Professional para transferirlos a WBM.
Para poder cargar un archivo hay que asignar una contraseña para "SINEMA‐
Config" en "System > Load&Save > Passwords". Esta contraseña también es
necesaria para exportar el archivo desde STEP7 Basic/Professional.
Consulte también "RunningSINEMAConfig"

Información de
arranque

Archivo de registro de arranque:

Users

Este archivo contiene la asignación de los nombres de usuario a las respectivas
contraseñas.

WBMFav

Favoritos de WBM

Este archivo contiene los avisos que se han registrado en el libro de registros
durante el último arranque.

Este archivo contiene los favoritos creados en el WBM. El archivo puede des‐
cargarse y cargarse en otros dispositivos.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2313

Configuración de dispositivos y redes
1.4 Crear configuraciones

HTTP
Cargar y guardar datos vía HTTP
Esta página ofrece la posibilidad de almacenar datos del dispositivo en un archivo externo en
su PC cliente o cargar dichos datos en los dispositivos desde un archivo externo del PC cliente.
De este modo puede cargar, p. ej., un firmware nuevo desde un archivo de su PC cliente.
Nota
La página solo está disponible si hay una conexión online con el dispositivo.
Esta página sirve tanto para conexiones vía HTTP como para conexiones vía HTTPS.
Firmware
El firmware está firmado y codificado. Con esto se garantiza que solo se pueda cargar firmware
creado por Siemens en el dispositivo.
Nota
Incompatibilidad con versiones anteriores de firmware sin/con el PLUG insertado
Si se instala una versión anterior es posible que se pierdan los datos de configuración. En ese
caso, tras la instalación del firmware el dispositivo se enciende con los ajustes de fábrica.
Si, además, hay un PLUG insertado en el dispositivo, después del rearranque tendrá el estado
"Not Accepted", puesto que en el PLUG siguen estando los datos de configuración del
firmware anterior, más actual. Esto permite regresar al firmware más actual que estaba
instalado anteriormente sin perder datos de configuración. Si la configuración original del
PLUG ya no se necesita, puede borrarse o volver a escribirse manualmente mediante la
página WBM "Sistema > PLUG".
Archivos de configuración
Nota
Archivos de configuración y modo Trial/Guardar automáticamente
En el modo Guardar automáticamente se realiza una copia de seguridad automática antes de
que se transmitan los archivos de configuración (ConfigPack y Config).
En el modo Trial los cambios se aplican, pero no se guardan en los archivos de configuración
(ConfigPack y Config). Utilice el botón "Escritura de la configuración de arranque" de la página
del WBM "Sistema > Configuración" para guardar cambios en el archivo de configuración.
Archivo script CLI
Existe la posibilidad de descargar configuraciones CLI existentes (RunningCLI) y cargar
scripts CLI propios (Script).
Nota
El script CLI descargable no está previsto para volver a cargarlo sin cambios.

2314

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Intercambio de datos de configuración con STEP7 Basic/Professional a través de un archivo
Los tipos de archivo "RunningSINEMAConfig" y "SINEMAConfig" permiten intercambiar los
datos de configuración entre un dispositivo (WBM) y STEP7 Basic/Professional a través de un
archivo.
Requisitos:
● Misma referencia
● Misma versión de firmware
● Contraseña
La contraseña se asigna en WBM, en "System > Load&Save > Passwords".
Los tipos de archivo se pueden utilizar del siguiente modo:
● Para el diagnóstico online
Las configuraciones incorrectas de un dispositivo se pueden guardar como
"RunningSINEMAConfig" mediante WBM e importarse a STEP7 Basic/Professional. El
diagnóstico en STEP7 Basic/Professional se desarrolla sin que exista una conexión con un
dispositivo real. Las configuraciones corregidas se pueden exportar y volver a cargarse en
WBM como "SINEMAConfig".
● Para la configuración
En STEP7 Basic/Professional es posible configurar un dispositivo sin que exista una
conexión con un dispositivo real. La configuración se puede exportar y cargar en el
dispositivo real a través de WBM como "SINEMAConfig".

Descripción
La tabla se divide en las siguientes columnas:
● Tipo de archivo
Muestra el tipo de archivo.
● Descripción
Muestra la descripción breve del tipo de archivo.
● Cargar
Este botón permite cargar archivos en el dispositivo. El botón se puede activar cuando esta
función es compatible con el tipo de archivo.
● Guardar
Este botón permite guardar archivos del dispositivo. El botón solo se puede activar cuando
esta función es compatible con el tipo de archivo y el archivo existe en el dispositivo.
● Borrar
Este botón permite borrar archivos del dispositivo. El botón solo se puede activar cuando
esta función es compatible con el tipo de archivo y el archivo existe en el dispositivo.
Nota
Después de una actualización del firmware, borre la memoria caché del navegador de Internet.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2315

Configuración de dispositivos y redes
1.4 Crear configuraciones

TFTP
Cargar y guardar datos a través de un servidor TFTP
En esta página puede configurar el servidor TFTP y los nombres de los archivos. Además,
dispone de la posibilidad de almacenar datos del dispositivo en un archivo externo en un
servidor TFTP o cargar dichos datos en los dispositivos desde un archivo externo de dicho
servidor. De este modo puede cargar un firmware nuevo desde un archivo de un servidor
TFTP, por ejemplo.
Firmware
El firmware está firmado y codificado. Con esto se garantiza que solo se pueda cargar firmware
creado por Siemens en el dispositivo.
Nota
Incompatibilidad con versiones anteriores de firmware sin/con el PLUG insertado
Si se instala una versión anterior es posible que se pierdan los datos de configuración. En ese
caso, tras la instalación del firmware el dispositivo se enciende con los ajustes de fábrica.
Si, además, hay un PLUG insertado en el dispositivo, después del rearranque tendrá el estado
"Not Accepted", puesto que en el PLUG siguen estando los datos de configuración del
firmware anterior, más actual. Esto permite regresar al firmware más actual que estaba
instalado anteriormente sin perder datos de configuración. Si la configuración original del
PLUG ya no se necesita, puede borrarse o volver a escribirse manualmente mediante la
página WBM "Sistema > PLUG".
Archivos de configuración
Nota
Archivos de configuración y modo Trial/Guardar automáticamente
En el modo "Guardar automáticamente" se realiza una copia de seguridad automática antes
de que se transmitan los archivos de configuración (ConfigPack y Config).
En modo "Trial" los cambios se aplican, pero no se guardan en los archivos de configuración
(ConfigPack y Config). Utilice el botón "Escritura de la configuración de arranque" de la página
del WBM "Sistema > Configuración" para guardar cambios en los archivos de configuración.
Archivo script CLI
Existe la posibilidad de descargar configuraciones CLI existentes (RunningCLI) y cargar
scripts CLI propios (Script).
Nota
El script CLI descargable no está previsto para volver a cargarlo sin cambios.
Los comandos CLI para guardar y cargar archivos no pueden ejecutarse mediante el archivo
script CLI (Script).
Intercambio de datos de configuración con STEP7 Basic/Professional a través de un archivo

2316

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Los tipos de archivo "RunningSINEMAConfig" y "SINEMAConfig" permiten intercambiar los
datos de configuración entre un dispositivo (WBM) y STEP7 Basic/Professional a través de un
archivo.
Requisitos:
● Misma referencia
● Misma versión de firmware
● Contraseña
La contraseña se asigna en WBM, en "System > Load&Save > Passwords".
Los tipos de archivo se pueden utilizar del siguiente modo:
● Para el diagnóstico online
Las configuraciones incorrectas de un dispositivo se pueden guardar como
"RunningSINEMAConfig" mediante WBM e importarse a STEP7 Basic/Professional. El
diagnóstico en STEP7 Basic/Professional se desarrolla sin que exista una conexión con un
dispositivo real. Las configuraciones corregidas se pueden exportar y volver a cargarse en
WBM como "SINEMAConfig".
● Para la configuración
En STEP7 Basic/Professional es posible configurar un dispositivo sin que exista una
conexión con un dispositivo real. La configuración se puede exportar y cargar en el
dispositivo real a través de WBM como "SINEMAConfig".

Descripción
● Dirección del servidor TFTP
Introduzca la dirección IP o el FQDN del servidor TFTP con el que se intercambian datos.
● Puerto del servidor TFTP
Introduzca aquí el puerto del servidor TFTP a través del cual desee efectuar el intercambio
de datos. En caso necesario, puede modificar el valor estándar 69 conforme a sus
requisitos específicos.
La tabla se divide en las siguientes columnas:
● Tipo de archivo
Muestra el tipo de archivo.
● Descripción
Muestra la descripción abreviada del tipo de archivo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2317

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Nombre de archivo
Cada tipo de archivo tiene especificado aquí un nombre de archivo.
Nota
Cambio del nombre de archivo
Existe la posibilidad de cambiar el nombre de archivo asignado en esta columna. Tras
cargar en el dispositivo, el nombre de archivo modificado puede utilizarse también con la
Command Line Interface.
● Acción (solo disponible online)
Seleccione la acción deseada. La selección dependerá del tipo de archivo seleccionado,
p. ej. el archivo de registro (log) solo puede guardarse.
Son posibles las siguientes acciones:
– Guardar archivo
Con esta selección se guarda un archivo en el servidor TFTP.
– Cargar archivo
Con esta selección se carga un archivo desde el servidor TFTP, p. ej. certificados
necesarios para establecer una conexión segura.

SFTP
Cargar y guardar datos a través de un servidor SFTP
SFTP (SSH File Transfer Protocol) transfiere los archivos codificados. En esta página se
configuran los datos de acceso para el servidor SFTP.
Además, ofrece la posibilidad de almacenar datos del dispositivo en un archivo externo en su
PC cliente o cargar dichos datos en los dispositivos desde un archivo externo del PC. De este
modo puede cargar un firmware nuevo desde un archivo de su PC de administrador, por
ejemplo.
Además, en esta página existe la posibilidad de cargar los certificados necesarios para
establecer una conexión VPN segura.
Firmware
El firmware está firmado y codificado. Con esto se garantiza que solo se pueda cargar en el
dispositivo firmware creado por Siemens.
Archivo script CLI
Existe la posibilidad de descargar configuraciones CLI existentes (RunningCLI) y cargar
scripts CLI propios (Script).
Nota
El script CLI descargable no está previsto para volver a cargarlo sin cambios.
Los comandos CLI para guardar y cargar archivos no pueden ejecutarse mediante el archivo
script CLI (Script).
Certificados X509

2318

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Los siguientes tipos de archivo pueden cargarse en el dispositivo:
● .crt, pem, zip: longitud máxima del nombre de archivo 255 caracteres
● .p12: longitud máxima del nombre de archivo 248 caracteres
Intercambio de datos de configuración con STEP7 Basic/Professional a través de un archivo
Los tipos de archivo "RunningSINEMAConfig" y "SINEMAConfig" permiten intercambiar los
datos de configuración entre un dispositivo (WBM) y STEP7 Basic/Professional a través de un
archivo.
Requisitos:
● Misma referencia
● Misma versión de firmware
● Contraseña
La contraseña se asigna en WBM, en "System > Load&Save > Passwords".
Los tipos de archivo se pueden utilizar del siguiente modo:
● Para el diagnóstico online
Las configuraciones incorrectas de un dispositivo se pueden guardar como
"RunningSINEMAConfig" mediante WBM e importarse a STEP7 Basic/Professional. El
diagnóstico en STEP7 Basic/Professional se desarrolla sin que exista una conexión con un
dispositivo real. Las configuraciones corregidas se pueden exportar y volver a cargarse en
WBM como "SINEMAConfig".
● Para la configuración
En STEP7 Basic/Professional es posible configurar un dispositivo sin que exista una
conexión con un dispositivo real. La configuración se puede exportar y cargar en el
dispositivo real a través de WBM como "SINEMAConfig".

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Dirección del servidor SFTP
Introduzca la dirección IP o el FQDN del servidor SFTP con el que se intercambian datos.
● Puerto del servidor SFTP
Introduzca el puerto del servidor SFTP a través del cual desee efectuar el intercambio de
datos. En caso necesario, puede modificar el valor estándar 22 conforme a sus requisitos
específicos.
● Usuario SFTP
Introduzca el usuario para acceder al servidor SFTP. Es imprescindible que en el servidor
SFTP se haya creado un usuario con los derechos correspondientes.
● Contraseña SFTP
Introduzca la contraseña para el usuario.
● Confirmar contraseña SFTP
Confirme la contraseña.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2319

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla se divide en las siguientes columnas:
● Tipo de archivo
Muestra el tipo de archivo.
● Descripción
Muestra una descripción breve del tipo de archivo.
● Nombre del archivo
Cada tipo de archivo tiene especificado aquí un nombre de archivo.
Nota
Cambio del nombre de archivo
Existe la posibilidad de cambiar el nombre de archivo asignado en esta columna. Tras
Cargar en el dispositivo, el nombre de archivo modificado también puede utilizarse con la
Command Line Interface.
● Acciones
Seleccione la acción de la lista desplegable. La selección dependerá del tipo de archivo
seleccionado, p. ej. el archivo de registro (log) solo puede guardarse.
Son posibles las siguientes acciones:
– Guardar archivo
Con esta selección se guarda un archivo en el servidor SFTP.
– Cargar archivo
Con esta selección se carga un archivo desde el servidor SFTP.

Contraseñas
Para acceder a determinados archivos se requiere una contraseña. En la página del WBM,
introduzca la contraseña definida para el archivo con el fin de cargar el archivo correctamente
en el dispositivo.

Descripción
La tabla se divide en las siguientes columnas:
● Tipo
Indica el tipo de archivo.
● Descripción
Muestra la descripción breve del tipo de archivo.
● Activado
Cuando está activado se utiliza la contraseña. Solo puede activarse cuando la contraseña
está configurada.
● Contraseña
Introduzca la contraseña del archivo.

2320

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Confirmar contraseña
Confirme la contraseña.
● Estado
Indica si los ajustes actuales del archivo son apropiados para el dispositivo.
– Válido
El ajuste "Activado" está activado y la contraseña se corresponde con el certificado.
– No válido
El ajuste "Activado" está activado pero la contraseña no se corresponde con el
certificado o bien no se ha cargado ningún certificado.
– '-'
No es posible evaluar la contraseña o bien no se utiliza. La casilla de verificación
"Activado" no está activada.

Eventos
Configuración
En esta página se define cómo debe reaccionar un dispositivo a eventos del sistema.
Activando las opciones correspondientes se define la respuesta del dispositivo en caso de
evento. Para activar o desactivar las opciones, haga clic en los ajustes de la columna
correspondiente.

Descripción
● Comportamiento del contacto de aviso
Elija el comportamiento del contacto de señalización. Existen las siguientes posibilidades:
– Estándar
Ajuste estándar para el contacto de señalización. Si se produce un error se señaliza en
el LED de error y el contacto de señalización se abre. Cuando el estado de error
desaparece, se apaga el LED de error y el contacto de señalización se cierra.
– Definido por el usuario
La función del contacto de señalización es independiente del error que aparece. El
contacto de señalización puede abrirse o cerrarse aleatoriamente con acciones del
usuario.
● Estado del contacto de aviso
Seleccione el estado del contacto de señalización en la lista desplegable. Son posibles los
siguientes estados:
– Cerrado
El contacto de señalización está cerrado.
– Abierto
El contacto de señalización está abierto.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2321

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla 1 se divide en las siguientes columnas:
● 1.ª columna
Indica que los ajustes son válidos para todos los puertos de la tabla 2.
● E-mail/Trap/Tabla de registro/Syslog/Error
Elija el ajuste deseado. Si está seleccionado "No hay modificaciones", la entrada de la tabla
2 permanece invariable.
● Aplicar a tabla
Al hacer clic en este botón se aplica el ajuste a todos los puertos de la tabla 2.

2322

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla 2 se divide en las siguientes columnas:
● Evento
La columna "Evento" contiene los siguientes valores:
– Arranque en frío/en caliente
Se ha conectado el dispositivo o el usuario ha realizado un reinicio.
– Link Change
Este evento solo se produce cuando el estado del puerto se somete a vigilancia y ha
cambiado de la forma correspondiente, véase "Sistema > Control de errores > Link
Change".
– Error de autentificación
Este evento se produce en caso de intento de acceso con una contraseña incorrecta.
– Alarma RMON
Se ha producido una alarma o un evento en relación con la vigilancia remota del sistema.
– Cambio de alimentación
Este evento solo se produce cuando se vigilan las líneas de alimentación 1 y 2. Indica
que se ha producido un cambio en el cable 1 o en el cable 2, véase "Sistema > Control
de errores > Alimentación de tensión".
– Cambio de estado RM
El administrador de redundancia ha detectado una interrupción o un restablecimiento
del anillo y ha conmutado y/o restablecido el trayecto.
– Cambio en Spanning Tree
La topología STP y RSTP o MSTP ha cambiado.
– Cambio del estado de error
El estado de error ha cambiado. El estado de error puede estar relacionado con la
vigilancia activa de puertos, con la reacción del contacto de señalización o con la
vigilancia de la tensión eléctrica.
– Cambio de estado Standby
Un equipo con una conexión Standby establecida (maestro o esclavo) ha activado o
desactivado la línea de acoplamiento con el otro anillo (puerto Standby). El tráfico de
datos se ha redireccionado de una conexión Ethernet (puerto Standby del maestro) a la
otra conexión Ethernet (puerto Standby del esclavo).
– Cambio de estado VRRP(solo en caso de routing vía VRRP)
El estado del router virtual ha cambiado.
– Loop Detection
Se ha detectado un bucle en el segmento.
– Alarmas de diagnóstico
El valor de diagnóstico ha rebasado por exceso o defecto un límite determinado.
– Cambio de estado OSPF
El estado de OSPF ha cambiado.
– Cambio de estado de la autenticación de puerto 802.1X
Este evento se produce en autenticaciones 802.1X.
– Cambio de estado PoE
El estado de PoE ha cambiado.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2323

Configuración de dispositivos y redes
1.4 Crear configuraciones
– Cambio de estado FMP
El valor de la potencia de recepción o de la caída de potencia ha rebasado por defecto
un valor determinado.
– Link Check
Se ha detectado un fallo en un trayecto de transmisión óptico.
– Archivo CLI Script
Se ha detectado un fallo en el archivo CLI Script.
– NTP (seguro)
Durante el uso de Secure NTP se ha producido un error, p. ej. se ha indicado una clave
con una longitud errónea.
– Cambio en la configuración
La configuración se ha guardado de forma permanente.
– Cambio de estado de la interconexión MRP
En el dominio de la interconexión MRP se ha cambiado de la conexión primaria a la
secundaria o viceversa.
– Información de servicio
Para determinados eventos se crean entradas en la tabla de registro incluso sin
configuración. Para dichos eventos es posible configurar aquí otras acciones
consecuenciales (e-mail, trap, Syslog).
● E-mail
El dispositivo envía un correo electrónico. Para ello es necesario que el servidor SMTP esté
configurado y la función "Cliente SMTP" esté activada.
● Trap
El dispositivo activa un trap SNMP. Para ello, en "Sistema > Configuración" debe estar
activado "Traps SNMPv1".
● Tabla de registro
El dispositivo escribe una entrada en la tabla de informes de eventos, véase "Información
> Tabla de registro".
● Syslog
El dispositivo escribe una entrada en el servidor de informes del sistema. Para ello es
necesario que el servidor de informes del sistema esté configurado y la función "Cliente
Syslog" esté activada.
● Error
El dispositivo emite un error. El LED de error se enciende.

Filtro Severity
En esta página se ajustan los niveles de valor umbral para enviar notificaciones de eventos del
sistema.

2324

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Ajustes
La tabla se divide en las siguientes columnas:
● Tipo de cliente
Elija el tipo de cliente para el que se realizan los ajustes:
– E-mail
Envío de avisos de eventos de sistema por correo electrónico
– Tabla de registro
Entrada de eventos del sistema en la tabla de registro.
– Syslog
Entrada de eventos del sistema en el archivo Syslog.
– Registro de autenticación WLAN
Reenvío de las entradas del WLAN Authentication Log al servidor de informes del
sistema.
Solo configurable para SCALANCE W770 y SCALANCE W780
● Severity
Seleccione el nivel deseado. Son posibles los siguientes ajustes:
– Info
Los eventos del sistema se procesan a partir del grado de gravedad "Info".
– Warning
Los eventos del sistema se procesan a partir del grado de gravedad "Warning".
– Critical
Los eventos del sistema se procesan a partir del grado de gravedad "Critical".

Cliente SMTP
Vigilancia de la red mediante e-mails
El dispositivo ofrece la posibilidad de que, al producirse un evento de alarma, se envíe
automáticamente un e-mail (p. ej. al administrador de la red). El e-mail contiene la
identificación del dispositivo remitente, una descripción de la causa de la alarma en texto claro
y un sello horario. De este modo se puede crear para redes con pocos dispositivos un equipo
sencillo y centralizado de vigilancia de la red sobre la base de un sistema de correo electrónico.
Si llegan correos electrónicos con avisos de fallo, se puede iniciar el WBM vía el navegador de
Internet a través de la identificación del remitente, lo que permite leer más información para el
diagnóstico.
En esta página se pueden configurar hasta tres servidores SMTP y las correspondientes
direcciones de correo electrónico.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2325

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción
La página contiene los siguientes campos:
● Cliente SMTP
Active o desactive el cliente SMTP.
● Dirección de correo electrónico del remitente
Introduzca el nombre de remitente que debe indicarse en el correo electrónico, p. ej., el
nombre del dispositivo. Este ajuste es válido para todos los servidores SMTP configurados.
● Enviar un email de prueba
Envíe un correo electrónico de prueba para comprobar la configuración.
● Puerto SMTP
Introduzca el puerto a través del que se puede acceder a su servidor SMTP.
Ajuste de fábrica: 25
Este ajuste es válido para todos los servidores SMTP configurados.
● Dirección de servidor SMTP
Introduzca la dirección IP o el FQDN (Fully Qualified Domain Name) del servidor SMTP.
La tabla contiene las siguientes columnas:
● Dirección de servidor SMTP
Indica la dirección IP o el FQDN (Fully Qualified Domain Name) del servidor SMTP.
● Dirección de correo electrónico del destinatario
Introduzca aquí la dirección de correo electrónico a la que el dispositivo debe enviar un
correo electrónico en caso de fallo.

Sintaxis de las direcciones de correo electrónico
Las condiciones siguientes rigen para direcciones de correo electrónico:
● Están permitidos caracteres al-fa-nu-mé-ri-cos.
● Están permitidos los caracteres especiales siguientes:
– @
– _ (guión bajo)
– - (guión)
– . (punto)
● Debe haber un signo @.
● Solo puede haber un signo @.
● Los caracteres "@" y "." no pueden ser ni el primer ni el último carácter.
Nota
Dependiendo de las características y la configuración del servidor SMTP, puede ser necesario
modificar el campo de entrada "Dirección de correo electrónico del remitente". Infórmese a
través del administrador del servidor SMTP.

2326

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

DHCPv4
Cliente DHCP
Ajuste del modo DHCP
Si el dispositivo está configurado como cliente DHCP, inicia una petición DHCP. Como
respuesta, el dispositivo recibe la asignación de una dirección IPv4 del servidor DHCP. El
servidor administra un rango de direcciones desde el cual asigna direcciones IPv4. También
es posible configurar el servidor de modo que, cuando el cliente solicite una dirección IPv4,
siempre se le asigne la misma.

Descripciones
● Keep Alive
Si está activado, la dirección IP se conserva en caso de interrupción de la conexión y no se
pone a 0.0.0.0. Keep Alive está activado en el ajuste predeterminado. Si Keep Alive está
desactivado, la dirección IP se pone a 0.0.0.0 en caso de interrupción de la conexión.
● Solicitud de configuración para cliente DHCP (Opt. 66, 67)
Active esta opción si desea que el cliente DHCP utilice las opciones 66 y 67 para descargar
un archivo de configuración y activarlo luego.
● Modo DHCP
Elija el modo de operación DHCP. Son posibles los siguientes modos:
– Vía dirección MAC
La identificación se realiza utilizando la dirección MAC.
– Mediante ID de cliente DHCP
La identificación se desarrolla a través de una ID de cliente DHCP definida libremente.
– Vía nombre del sistema
La identificación se realiza utilizando el nombre del sistema. Si el nombre del dispositivo
tiene una longitud de 255 caracteres, el último no se utiliza para la identificación.
– Vía nombre de dispositivo PROFINET
La identificación se realiza utilizando el nombre de dispositivo PROFINET.
– vía IAID y DUID
De este modo el cliente DHCP puede iniciar sesión en los servidores DHCP que
soportan el funcionamiento paralelo de IPv4 e IPv6.
La identificación se realiza mediante IAID y DUID, y designa exactamente una interfaz
IP del dispositivo.
IAID (Interface Association Identifier): se genera al menos un IAID para cada interfaz IP.
El IAID no cambia al efectuar un rearranque completo del cliente DHCP.
DUID (DHCP Unique Identifier): identifica unívocamente servidores y clientes y es válido
para todas las interfaces IP del dispositivo. El DUID no cambia al efectuar un rearranque
completo. Salvo que sea cambiado por el usuario.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2327

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Tipo de DUID
Especifique qué tipo de DUID se utilizará. Los tipos de DUID están definidos en RFC 3315.
– DUID-LLT
DUID está basado en la dirección del nivel de enlace de la interfaz y en un sello de
tiempo.
– DUID-EN
El DUID lo asigna el fabricante (EN = Enterprise number).
– DUID-LL
El DUID está basado en la dirección del nivel de enlace de la interfaz.
● Dirección del nivel de enlace más tiempo (LLT)
El valor está basado en la dirección del nivel de enlace de la interfaz y en un sello de tiempo.
El valor se genera de nuevo cada vez que se restablece la configuración de fábrica. El valor
puede cambiarse en caso necesario.
● Número de empresa del fabricante (EN)
El valor está basado en el número de empresa, que es específico del fabricante. El valor se
genera de nuevo cada vez que se restablece la configuración de fábrica. El valor puede
cambiarse en caso necesario.
● Dirección del nivel de enlace (LL)
La dirección del nivel de enlace está basada en la dirección MAC. El valor se genera de
nuevo cada vez que se restablece la configuración de fábrica. El valor puede cambiarse en
caso necesario.
La tabla contiene las siguientes columnas:
● Interfaz
Interfaz a la que se refiere el ajuste.
● DHCP
Active o desactive el cliente DHCP para la interfaz correspondiente.
● Valor IAID
Valor con el que se identifica la interfaz (cliente DHCP) en el servidor DHCP.

Servidor DHCP
Existe la posibilidad de utilizar el dispositivo como servidor DHCP. Esto permite asignar
automáticamente direcciones IP a los dispositivos conectados. Las direcciones IP se asignan
dinámicamente a partir de una banda de direcciones definida por el usuario (Pool), o bien se
asigna una dirección IP determinada a un dispositivo concreto.
Nota
Borrar asignaciones de servidor DHCP
Si desactiva o borra una banda de direcciones IPv4 o bien desconecta y vuelve a conectar el
servidor DHCP, se borrarán las asignaciones de servidor DHCP, consulte "Información >
Servidor DHCP".
La estructura de esta página varía en función del número de interfaces IP VLAN de las que
disponga el dispositivo.

2328

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Requisitos
Los dispositivos conectados están configurados de forma que obtengan la dirección IP de un
servidor DHCP.

Dispositivos con una interfaz IP VLAN
En esta página se especifican las direcciones IPv4 asignadas a través de determinados
puertos.

Descripción
La página contiene los siguientes campos:
● DHCP Server
Active o desactive el servidor DHCP en el dispositivo.
Nota
Para que no se produzcan conflictos con direcciones IPv4, en la red solo puede estar
configurado un dispositivo como servidor DHCP.
● Probe address with ICMP Echo before offer
Cuando está activado, el servidor DHCP comprueba si la dirección IP ya está asignada.
Para ello, el servidor DHCP envía avisos de eco ICMP (Ping) a la dirección IPv4. Si no
recibe respuesta alguna, se asigna esa dirección IPv4.
Nota
Esta comprobación no se lleva a cabo con asignaciones estáticas.
Nota
Si en la red hay dispositivos que tienen desactivado por defecto el servicio de eco, es
posible que se produzcan conflictos con las direcciones IPv4. Para que esto no suceda,
asigne a dichos dispositivos una dirección IPv4 que esté fuera de la banda de direcciones
IPv4.
La tabla se divide en las siguientes columnas:
● Pool ID
Muestra el número de la banda de direcciones IPv4. Al hacer clic en el botón "Create" se
crea una nueva fila con un número unívoco (Pool ID).
● Puerto
Especifique a través de qué puerto debe asignarse la dirección IPv4 de este pool DHCP.
El requisito para la asignación es que la dirección IPv4 de la interfaz esté en la subred de
la banda de direcciones IPv4. Si esto no fuera así, la interfaz no asignará direcciones IPv4.
● Activar
Especifique si debe utilizarse esta dirección IPv4.
Nota
Si activa la dirección IPv4, sus ajustes se atenuarán en esta ficha DHCP y ya no podrán
editarse.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2329

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Dirección IP
Introduzca la dirección IPv4 que debe asignarse a través del puerto indicado.
● Subred
Introduzca la máscara de subred adecuada a la dirección IPv4. Utilice la notación CIDR.
● Vigencia [s]
Especifique en segundos la vigencia de la dirección IPv4 asignada. Cuando se ha
sobrepasado la mitad de la vigencia, el cliente DHCP puede prorrogar la dirección IPv4
asignada. Una vez transcurrido el tiempo de vigencia, el cliente DHCP debe solicitar una
dirección IPv4 nueva.

Dispositivos con varias interfaces IP VLAN
En esta página se define la banda de direcciones a partir de la cual el dispositivo conectado
obtiene una dirección IP cualquiera. La asignación estática de las direcciones IP se configura
en "Asignación estática".

Descripción
● Servidor DHCP
Active o desactive el servidor DHCP en el dispositivo.
Nota
Para que no se produzcan conflictos con direcciones IPv4, en la red solo puede estar
configurado un dispositivo como servidor DHCP.
Si desea utilizar un servidor DHCP en los dispositivos de un grupo VRRP, observe el
capítulo "Layer 3 (IPv4/IPv6) > VRRP/VRRPv3 > Router".
● Comprobar la dirección con el eco ICMP antes de ofrecerla
Cuando está activado, el servidor DHCP comprueba si la dirección IP ya está asignada.
Para ello, el servidor DHCP envía avisos de eco ICMP (Ping) a la dirección IPv4. Si no
recibe respuesta alguna, se asigna esa dirección IPv4.
Nota
Esta comprobación no se lleva a cabo con asignaciones estáticas.
Nota
Si en la red hay dispositivos que tienen desactivado por defecto el servicio de eco, es
posible que se produzcan conflictos con las direcciones IPv4. Para que esto no suceda,
asigne a dichos dispositivos una dirección IPv4 que esté fuera de la banda de direcciones
IPv4.
La tabla se divide en las siguientes columnas:
● Pool ID
Muestra el número de la banda de direcciones IPv4. Al hacer clic en el botón "Crear" se crea
una nueva fila con un número unívoco (Pool ID).
● Interface
Seleccione una interfaz IP o un puerto de router. A través de esta interfaz se asignan
dinámicamente las direcciones IPv4.

2330

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Enable
Especifique si debe utilizarse esta banda de direcciones IPv4.
Nota
Si activa la dirección IPv4, sus ajustes se atenuarán en esta ficha DHCP y ya no podrán
editarse.
● Subnet
Introduzca la máscara de subred adecuada a la dirección IPv4. Utilice la notación CIDR.
● Lower IP Address
Introduzca la dirección IPv4 que define el principio de la banda de direcciones IPv4
dinámicas. La dirección IPv4 debe estar dentro del rango de direcciones de red configurado
en "Subnet".
● Upper IP Address
Introduzca la dirección IPv4 que define el final de la banda de direcciones IPv4 dinámicas.
La dirección IPv4 debe estar dentro del rango de direcciones de red configurado en
"Subnet".
● Lease Time [sec]
Especifique en segundos la vigencia de la dirección IPv4 asignada. Cuando se ha
sobrepasado la mitad de la vigencia, el cliente DHCP puede prorrogar la dirección IPv4
asignada. Una vez ha finalizado toda la vigencia, el cliente DHCP debe solicitar una
dirección IPv4 nueva.

Asignación de puerto a dirección IP
En esta página se asigna exactamente una dirección IP a un puerto determinado. Después de
haber creado una banda de direcciones IPv4 en la ficha "DHCP Server", en esta ficha se crea
una fila nueva. La configuración de esta página afecta a las fichas "DHCP Server" y "Port
Range".

Descripción
La tabla contiene las siguientes columnas:
● Pool ID
Muestra el número de la banda de direcciones IPv4. Para cada banda de direcciones se
crea una fila.
● Port
Seleccione el ajuste en la lista desplegable. Existen las siguientes posibilidades de ajuste:
– Px.y
Especifique el puerto a través del cual debe asignarse la dirección IPv4. Solo es posible
seleccionar puertos que están en la VLAN correspondiente. Si selecciona un puerto, en
la ficha "Port Range" solo estará activado ese puerto.
– Not Selected
Con este ajuste no habrá ningún puerto seleccionado o habrá más de un puerto
seleccionado en la ficha "Port Range". Si selecciona el ajuste "Not Selected", se
desactivarán todos los puertos en la ficha "Port Range".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2331

Configuración de dispositivos y redes
1.4 Crear configuraciones
● IP Address
Indique una dirección IPv4. En la ficha "DHCP Server", los campos "Subnet", "Lower IP
Address" y "Upper IP Address" se rellenan en correspondencia.
● Subnet Mask
Indique una máscara de subred adecuada. En la ficha "DHCP Server" el campo "Subnet"
se rellena en correspondencia.

Rango de puertos
En esta página se definen los puertos a través de los cuales se asignan las direcciones IPv4
de una banda de direcciones.
Después de haber creado una banda de direcciones IPv4 en la ficha "DHCP Server", en esta
ficha se crea una fila nueva y se seleccionan todos los puertos que están en la VLAN
correspondiente en este momento. Si más adelante desea agregar puertos a la VLAN, dichos
puertos no se activarán automáticamente en esta ficha.

Descripción
La tabla contiene las siguientes columnas:
● Pool ID
Muestra el número de la banda de direcciones IPv4. Para cada banda de direcciones se
crea una fila.
● Interface
Muestra la interfaz IP VLAN asignada.
● All ports
Seleccione el ajuste en la lista desplegable. Existen las siguientes posibilidades de ajuste:
– Enabled
La casilla de verificación se activa para todos los puertos de la VLAN correspondiente.
– Disabled
La casilla de verificación se desactiva para todos los puertos de la VLAN
correspondiente.
– No Change
La tabla no cambia.
● Px.y
Especifique los puertos por los que deben asignarse las direcciones IPv4 de la banda de
direcciones. Solo es posible seleccionar puertos que están en la VLAN correspondiente.
Nota
Repercusiones en otras fichas
● Si activa un puerto específico, este estará seleccionado en la ficha "Asignación de
puerto a dirección IP".
● Si no selecciona ningún puerto o selecciona más de uno, en la ficha "Asignación de
puerto a dirección IP" estará seleccionado el ajuste "No seleccionado".

2332

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Opciones DHCP
En esta página se definen las opciones DHCP que soporta el servidor DHCP. Las diferentes
opciones DHCP están definidas en el RFC 2132.
Las opciones DHCP 1, 3, 6, 66 y 67 se generan automáticamente al crear la banda de
direcciones IPv4. Excepto la opción DHCP 1, todas las demás pueden borrarse. Para la opción
DHCP 1 se ajusta automáticamente la máscara de subred que se ha introducido para la banda
de direcciones en "DHCP Server". Para la opción DHCP 3, la dirección IPv4 interna del
dispositivo puede ajustarse como parámetro DHCP mediante una casilla de verificación.

Descripción
La página contiene los siguientes campos:
● Pool ID
Seleccione la banda de direcciones IPv4 deseada.
● Option Code
Introduzca el número de la opción DHCP deseada. Las diferentes opciones DHCP están
definidas en el RFC 2132. Las opciones DHCP soportadas se listan en el párrafo siguiente.
La tabla se divide en las siguientes columnas:
● Select
Active la casilla de verificación correspondiente a la fila que desea borrar.
● Pool ID
Muestra el número de la banda de direcciones IPv4.
● Option Code
Muestra el número de la opción DHCP.
● Descripción
Muestra una descripción de la opción DHCP.
● Use Interface IP
Si se activa esta casilla de verificación, la dirección IPv4 se utilizará como pasarela
predeterminada asignada a la dirección IP VLAN. Si la casilla de verificación está
desactivada se puede introducir una dirección IPv4.
● Value
Introduzca el parámetro DHCP que se transferirá al cliente DHCP. El contenido depende de
la opción DHCP.
– Opción DHCP 3 (pasarela predeterminada):
Indique el parámetro DHCP como dirección IPv4, p. ej. 192.168.100.2.
– Opción DHCP 6 (DNS):
Indique el parámetro DHCP como dirección IPv4, p. ej. 192.168.100.2. Es posible
indicar un máximo de tres direcciones IPv4 separadas por comas.
– Opción DHCP 12 (nombre del host)
Indique el nombre del host en formato String.
– Opción DHCP 66 (servidor TFTP):
Indique el parámetro DHCP como dirección IPv4, p. ej. 192.168.100.2.
– Opción DHCP 67 (nombre del archivo de arranque)
Indique el nombre del archivo de arranque en formato String.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2333

Configuración de dispositivos y redes
1.4 Crear configuraciones

Opciones DHCP soportadas
Se soportan las opciones DHCP siguientes:
● Opción 1
● Opción 3
● Opción 6
● Opción 12
● Opción 66
● Opción 67

Información de Relay Agent
En esta página se especifica que a los dispositivos con una ID remota y una Circuit ID
concretas se les asignen direcciones IPv4 de una banda de direcciones determinada.
Si se crea una entrada de este tipo para una banda de direcciones, los puertos de la banda de
direcciones reaccionan únicamente a peticiones DHCP a través de un DHCP Relay Agent
(opción 82). Es posible crear más bandas de direcciones para las mismas interfaces IP VLAN,
de modo que los puertos reaccionen a diferentes peticiones.

Descripción
La página contiene los siguientes campos:
● Pool ID
Seleccione la banda de direcciones IPv4 deseada.
● Remote ID
Introduzca la ID remota.
● Circuit ID
Introduzca la Circuit ID.
La tabla se divide en las siguientes columnas:
● Select
Active la casilla de verificación correspondiente a la fila que desea borrar.
● Pool ID
Muestra el número de la banda de direcciones IPv4.
● Remote ID
Muestra la ID remota.
● Circuit ID
Muestra la Circuit ID.

Asignación estática
En esta página se especifica que a los clientes DHCP se les asigne una dirección IPv4
predefinida en función de su ID de cliente o dirección MAC.

2334

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción
La página contiene los siguientes campos:
● Pool ID
Seleccione la banda de direcciones IPv4 deseada.
● Client identification method
Seleccione el método por el que se identificará a un cliente.
– Ethernet MAC
El cliente se identificará por su dirección MAC.
– Client ID
El cliente se identificará por una ID de cliente DHCP libremente definida.
● Value
Introduzca la dirección MAC (Ethernet MAC) o la ID de cliente (Client ID) del cliente.
La tabla se divide en las siguientes columnas:
● Select
Active la casilla de verificación correspondiente a la fila que desea borrar.
● Pool ID
Muestra el número de la banda de direcciones IPv4.
● Identification method
Indica si el cliente se identificará por su dirección MAC o por la ID de cliente.
● Value
Muestra la dirección MAC o ID de cliente.
● IP Address
Defina la dirección IPv4 que se asignará al cliente. La dirección IPv4 debe estar dentro de
la banda de direcciones IPv4.

Opciones de host
En esta página se definen las opciones DHCP que soporta el servidor DHCP. Las diferentes
opciones DHCP están definidas en el RFC 2132.
Las opciones DHCP 1, 3, 6, 66 y 67 se generan automáticamente al crear la banda de
direcciones IPv4. Excepto la opción DHCP 1, todas las demás pueden borrarse. Para la opción
DHCP 1 se ajusta automáticamente la máscara de subred que se ha introducido para la banda
de direcciones en "DHCP Server". Para la opción DHCP 3, la dirección IPv4 interna del
dispositivo puede ajustarse como parámetro DHCP mediante una casilla de verificación.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2335

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción
La página contiene los siguientes campos:
● Pool ID
Seleccione la banda de direcciones IPv4 deseada.
● Cliente
Seleccione el dispositivo para el que desea definir una opción DHCP.
● Option Code
Introduzca el número de la opción DHCP deseada. Las diferentes opciones DHCP están
definidas en el RFC 2132. Las opciones DHCP soportadas se listan en el párrafo siguiente.
La tabla se divide en las siguientes columnas:
● Select
Active la casilla de verificación correspondiente a la fila que desea borrar.
● Pool ID
Muestra el número de la banda de direcciones IPv4.
● Option Code
Muestra el número de la opción DHCP.
● Descripción
Muestra una descripción de la opción DHCP.
● Use Interface IP
Si se activa esta casilla de verificación, la dirección IPv4 se utilizará como pasarela
predeterminada asignada a la dirección IP VLAN. Si la casilla de verificación está
desactivada se puede introducir una dirección IPv4.
● Value
Introduzca el parámetro DHCP que se transferirá al cliente DHCP. El contenido depende de
la opción DHCP.
– Opción DHCP 12 (nombre del host)
Indique el nombre del host en formato String.
– Opción DHCP 66 (servidor TFTP):
Indique el parámetro DHCP como dirección IPv4, p. ej. 192.168.100.2.
– Opción DHCP 67 (nombre del archivo de arranque)
Indique el nombre del archivo de arranque en formato String.

DHCPv6
Cliente DHCPv6
En esta página se especifica si el cliente DHCPv6 obtiene la dirección IPv6 además de los
ajustes de configuración o si soporta la función "Delegación de prefijo".
Prefix Delegation
El servidor DHCPv6 delega la distribución del prefijo IPv6 al cliente DHCPv6. Para ello debe
configurarse una interfaz IPv6 en el cliente DHCPv6 como cliente PD. A través del cliente PD,
el cliente DHCPv6 obtiene un prefijo IPv6 del servidor DHCPv6 y los guarda con un nombre de

2336

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
prefijo. Las interfaces IPv6 del cliente DHCPv6 que deben incorporar el prefijo se configuran
como subclientes PD.
Los subclientes PD se configuran en "Layer 3 (IPv6)" > "DHCPv6 Client" > "DHCPv6 PD Sub
Client".

Descripción de los campos mostrados
La página contiene lo siguiente:
● Interface
Seleccione la interfaz IP que actúa de cliente DHCPv6.
● Enable
Active o desactive el cliente DHCPv6 para la interfaz correspondiente.
● Mode
Defina el procedimiento.
– Con estado: obtiene la dirección IPv6 y el archivo de configuración del servidor DHCPv6
– Sin estado: obtiene únicamente el archivo de configuración del servidor DHCPv6
– Delegación de prefijo: El cliente DHCPv6 se encarga de distribuir el prefijo IPv6.
● Prefix Name
Introduzca el nombre del prefijo que reenviará el router DHCPv6. Solo puede editarse con
el procedimiento "Prefix Delegation". El router DHCPv6 guarda el prefijo IPv6 del servidor
DHCPv6 con este nombre.
● Rapid Commit
Cuando está activado se abrevia el procedimiento para la asignación de direcciones IPv6.
En lugar de 4 mensajes DHCPv6 (SOLICIT, ADVERTISE, REQUEST, REPLY) se envían
solo 2 mensajes DHCPv6 (SOLICIT, REPLY). Encontrará información complementaria
sobre los mensajes en la RFC 3315.

Subcliente DHCPv6 PD
En esta página se definen las interfaces IPv6 del cliente DHCPv6 que deben incorporar el
prefijo.
Esto se lleva a cabo asignándoles como dirección IP el nombre del prefijo seguido de un prefijo
y la longitud deseada del mismo. Al hacerlo, los primeros bits del prefijo configurado son
reemplazados por los valores almacenados en el nombre del prefijo.
La dirección IPv6 se forma a partir del nombre de prefijo, el prefijo y la longitud de prefijo.
Ejemplo:
El siguiente prefijo IPv6 está guardado con el nombre de prefijo "test": 2001:DB8:1234::/48
Prefijo = 2002:AF9:5678::1
Longitud del prefijo = 64
A partir de estos ajustes, el subcliente PD genera la siguiente dirección IPv6:
2001:DB8:1234::1

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2337

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los valores mostrados
La página contiene lo siguiente:
● Interface
Seleccione la interfaz que actúa de subcliente PD. Solo pueden seleccionarse interfaces IP.
● Prefix Name
Introduzca el nombre del prefijo que reenviará el router PD. El router PD guarda el prefijo
IPv6 del servidor DHCPv6 con este nombre.
● Prefix
Indique el identificador de red del host.
● Prefix Length
Indique el número de bits a la izquierda que forman parte del prefijo
La tabla contiene las siguientes columnas:
● Interface Name
Muestra el nombre de la interfaz.
● Prefix Name
Muestra el nombre del prefijo.
● Prefix
Muestra el prefijo.
● Prefix Length
Indica la longitud de prefijo.
● Dirección generada (solo disponible online)
Indica la dirección IPv6 compuesta por nombre de prefijo, prefijo y longitud de prefijo.

SNMP
General
En esta página se describen los ajustes básicos de SNMP. Active las opciones según la
función que desee utilizar.

2338

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción
● SNMP
Elija el protocolo SNMP. Son posibles los siguientes ajustes:
– "-" (desactivado)
SNMP desactivado.
– SNMPv1/v2c/v3
Se soporta SNMPv1/v2c/v3.
Nota
Tenga en cuenta que SNMP no dispone de mecanismos de seguridad en las versiones
1 y 2c.
– SNMPv3
Solo se soporta SNMPv3.
● SNMPv1/v2 solo lectura
Si activa esta opción, SNMPv1/v2c solo puede acceder a las variables SNMP en modo de
lectura.
Nota
Community String
Por razones de seguridad, no deben utilizarse los valores estándar "public" ni "private".
Modifique los Community Strings después de la primera instalación.
La longitud mínima recomendada para Community Strings es de 6 caracteres
● SNMPv1/v2c Read Community String - Lectura
Introduzca el Community String para el acceso del protocolo SNMP.
● SNMPv1/v2c Read/Write Community String - Lectura/escritura
Introduzca el Community String para el acceso de lectura y escritura del protocolo SNMP.
● SNMPv1 Traps
Active o desactive el envío de traps SNMPv1 (telegramas de alarma). En la entrada "Trap"
se determinan las direcciones IP de los dispositivos a los que se envían traps SNMPv1.
● SNMPv1/v2c Trap Community String - Trap
Introduzca el Community String para el envío de avisos SNMPv1/v2c.
● Migración de usuarios SNMPv3
– Activada
Si la función está activada se genera una ID de máquina SNMP que puede migrarse. Los
usuarios SNMPv3 configurados pueden transferirse a otro dispositivo.
Si se activa esta función y se carga la configuración del dispositivo a otro equipo, se
conservan los usuarios SNMPv3 configurados.
– Desactivado
Si la función está desactivada se genera una ID de máquina SNMP específica del
dispositivo. Para generar la ID se utiliza la dirección MAC de agente del dispositivo. Esta
configuración de usuario SNMP no puede transferirse a otros dispositivos.
Si se carga la configuración del dispositivo a otro equipo, se borran todos los usuarios
SNMPv3 configurados.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2339

Configuración de dispositivos y redes
1.4 Crear configuraciones
● ID de máquina SNMP (solo disponible online)
Muestra la ID de máquina SNMP.
● Puerto Listen de SNMP Agent
Especifique el puerto en el que el SNMP Agent debe esperar las solicitudes SNMP.

Traps
Cuando se produce un evento de alarma, un dispositivo puede enviar traps SNMP (telegramas
de alarma) a un máximo de 10 estaciones de gestión distintas. Solo se envían traps cuando se
producen los eventos definidos al efecto en "Eventos".
Nota
Solo se envían traps SNMP si en "SNMP > General" o en "Sistema > Configuración" está
activado el ajuste "SNMPv1 Traps".

Descripción
● Dirección del receptor de Traps
Introduzca la dirección IP o el FQDN (Fully Qualified Domain Name) de la estación a la que
el dispositivo envía traps SNMP. Es posible indicar un máximo de diez destinatarios
distintos.
La tabla se divide en las siguientes columnas:
● Dirección del receptor de Traps
En caso necesario, modifique la dirección IP o el FQDN (Fully Qualified Domain Name) de
las estaciones.
● Trap
Active o desactive el envío de traps SNMP. Las estaciones especificadas pero no
seleccionadas no recibirán traps SNMP.

Grupos v3
Ajustes de seguridad y asignación de derechos
SNMP Versión 3 ofrece asignación de derechos, autentificación y codificación a nivel de
protocolo. El nivel de seguridad y los derechos de lectura/escritura se definen específicamente
por grupos. Para cada miembro de un grupo se aplican automáticamente los ajustes
correspondientes.

2340

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción
● Nombre del grupo
Introduzca el nombre del grupo. La longitud máxima es de 32 caracteres.
● Nivel de seguridad
Seleccione el nivel de seguridad (autentificación, codificación) válido para el grupo
seleccionado. Existen las siguientes posibilidades:
– Sin aut./sin priv.
Autentificación no activada / codificación no activada.
– Aut./Sin priv.
Autentificación activada / codificación no activada.
– Aut./priv.
Autentificación activada / codificación activada.
La tabla se divide en las siguientes columnas:
● Nombre del grupo
Muestra los nombres de grupo definidos.
Nota
El nombre del grupo y el nivel de seguridad no pueden modificarse una vez creados y
asignados. Si desea cambiar el nombre del grupo o el nivel de seguridad, debe borrar el
grupo, crearlo con un nuevo nombre y configurarlo de nuevo.
● Nivel de seguridad
Muestra el nivel de seguridad configurado.
● Lectura
Active o desactive el acceso de lectura para el grupo deseado.
● Escritura
Active o desactive el acceso de escritura para el grupo deseado.
Nota
Para que el acceso de escritura funcione también es necesario activar el acceso de lectura.
● Persistencia
Indica si el grupo está asignado a un usuario SNMPv3. Si el grupo no está asignado a
ningún usuario SNMPv3 no se inicia el guardado automático y el grupo configurado se
borrará tras realizar un rearranque completo del dispositivo.
– Sí
El grupo está asignado a un usuario SNMPv3.
– No
El grupo no está asignado a ningún usuario SNMPv3.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2341

Configuración de dispositivos y redes
1.4 Crear configuraciones

Usuarios v3
Ajustes de seguridad personalizados
En la página es posible crear usuarios SNMPv3, modificarlos o borrarlos. El modelo de
seguridad basado en el usuario se centra en el nombre del usuario, es decir, se asigna a cada
telegrama el identificador de usuario correspondiente. Este nombre de usuario y los ajustes de
seguridad en cuestión son comprobados tanto por el remitente como por el destinatario.

Descripción
● Nombre de usuario
Introduzca un nombre de usuario cualquiera. Una vez aplicados los datos, no podrá
cambiar el nombre.
La tabla se divide en las siguientes columnas:
● Nombre de usuario
Muestra los usuarios creados.
● Nombre del grupo
Seleccione el grupo que debe asignarse al usuario.
● Protocolo de autentificación
Defina el protocolo de autenticación para el que debe establecerse una contraseña.
Existen los siguientes ajustes:
– Ninguno
– MD5
– SHA
● Protocolo de encriptado
Especifique si debe establecerse una contraseña para el encriptado con el algoritmo DES.
Solo activable si también se ha seleccionado un protocolo de autenticación.
● Contraseña de autenticación
Introduzca la contraseña de autenticación. La contraseña ha de tener como mínimo 1
carácter y como máximo 32.
Nota
Longitud de la contraseña
Como medida importante para aumentar la seguridad, recomendamos que la contraseña
tenga como mínimo 6 caracteres y contengan caracteres especiales, mayúsculas y
minúsculas, números, etc.
● Confirmar contraseña de autenticación
Confirme la contraseña volviéndola a introducir.

2342

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Contraseña de encriptado
Introduzca su contraseña de codificación. La contraseña ha de tener como mínimo 1
carácter y como máximo 32.
Nota
Longitud de la contraseña
Como medida importante para aumentar la seguridad, recomendamos que la contraseña
tenga como mínimo 6 caracteres y contengan caracteres especiales, mayúsculas y
minúsculas, números, etc.
● Confirmar contraseña de encriptado
Confirme la contraseña de codificación volviéndola a introducir.
● Persistencia
Indica si el usuario está asignado a un grupo SNMPv3. Si el usuario no está asignado a
ningún grupo SNMPv3 no se inicia el guardado automático y el usuario configurado se
borrará tras realizar un rearranque completo del dispositivo.
– Sí
El usuario está asignado a un grupo SNMPv3.
– No
El usuario no está asignado a ningún grupo SNMPv3.

Hora del sistema
Para ajustar la hora del sistema existen métodos diferentes. Solo puede estar activo un
método. Si se activa un método, se desactiva el método activo hasta entonces
automáticamente.

Ajuste manual de la hora
Ajuste manual de la hora del sistema
En esta página se ajusta la fecha y la hora del sistema. Para utilizar este ajuste, es necesario
activar "Ajuste manual de la hora".
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

Descripción
● Ajuste manual de la hora
Active o desactive el ajuste manual de la hora. Si activa esta opción, el campo de entrada
"Hora del sistema" pasa a ser editable.
● Hora del sistema
Introduzca la fecha y la hora en el formato "MM/DD/YYYY HH:MM:SS".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2343

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Utilizar la hora del PC
Haga clic en el botón para aplicar el ajuste de la hora del PC.
● Momento de la última sincronización
Indica cuándo ha tenido lugar la última sincronización.
Si no ha sido posible sincronizar la hora, el campo contendrá la entrada "Fecha/hora no
ajustadas".
● Último mecanismo de sincronización
Este campo muestra cómo se ha efectuado la última sincronización horaria.
– No ajustado
La hora no se ha ajustado.
– Manual
Ajuste manual de la hora
– SNTP
Sincronización horaria automática mediante SNTP
– NTP
Sincronización horaria automática mediante NTP
– SIMATIC
Sincronización horaria automática mediante telegrama horario SIMATIC.
– PTP
Sincronización horaria automática mediante PTP
● Horario de verano (DST)
Indica si el cambio de horario de verano está activo.
– active (offset + 1 h)
la hora del sistema ha pasado a horario de verano, es decir, se incrementa una hora. La
hora actual del sistema se ve en la parte superior derecha del área de selección del
WBM. En el campo "Hora del sistema" se sigue mostrando la hora ajustada.
– inactive (offset + 0 h)
la hora actual del sistema no cambia.

Sinopsis de DST
Cambio del horario de verano
Esta página permite crear entradas para cambiar el horario de verano. La tabla proporciona
una sinopsis de las entradas existentes.

Descripción
● N.º DST
Muestra el número de la entrada.
Al crear una entrada se crea una fila con un número unívoco.
● Nombre
Muestra el nombre de la entrada.

2344

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Año
Indica el año para el que se creó la entrada.
● Fecha de inicio
Indica el mes, el día y la hora del inicio del horario de verano.
● Fecha de fin
Indica el mes, el día y la hora del final del horario de verano.
● Instantes regulares del cambio de hora
Con una entrada del tipo "Regla" se muestra el intervalo de tiempo, que consta de semana,
día, mes y hora en los que está activo el horario de verano. Con una entrada del tipo "Fecha"
se muestra "-".
● Estado
Muestra el estado de la entrada:
– Activado
La entrada se ha creado correctamente.
– No válido
La entrada ha vuelto a crearse y la fecha de inicio y de fin son idénticas.
● Tipo
Indica cómo se realiza el cambio del horario de verano:
– Fecha
Se ha introducido una fecha fija para el cambio de horario de verano.
– Regla
Hay definida una regla para el cambio de horario de verano.

Configuración DST
Configurar el cambio del horario de verano
Esta página permite configurar las entradas para cambiar el horario de verano. Gracias al
cambio del horario de verano o invierno, la hora del sistema está bien ajustada a la zona
horaria local. Se puede definir una regla para el cambio del horario de verano o introducir una
fecha determinada.

Descripción
Nota
El contenido de esta página depende de la selección realizada en el campo "Tipo".
Los campos "N.º DST", "Tipo" y "Nombre" se muestran siempre.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2345

Configuración de dispositivos y redes
1.4 Crear configuraciones
● N.º DST
Seleccione el número de la entrada.
● Tipo
Seleccione cómo debe ser el cambio del horario de verano:
– Fecha
Es posible indicar una fecha fija para el cambio de horario de verano. Este ajuste es
adecuado para regiones en las que el cambio del horario de verano no está sujeto a
reglas.
– Periódicamente
Se puede definir una regla para el cambio de horario de verano. Este ajuste es adecuado
para regiones en las que el horario de verano empieza y termina siempre en un día
concreto de la semana.
● Nombre
Indique un nombre para la entrada. El nombre puede tener como máximo 16 caracteres.
Ajustes con la selección "Fecha"
Se puede indicar una fecha fija para el inicio y el final del horario de verano.
● Año
Indique el año para el cambio de horario de verano.
● Fecha de inicio
Indique los siguientes valores para el inicio del horario de verano:
– Día
Indique el día.
– Hora
Indique la hora.
– Mes
Indique el mes.
● Fecha de fin
Indique los siguientes valores para el final del horario de verano:
– Día
Indique el día.
– Hora
Indique la hora.
– Mes
Indique el mes.

2346

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Ajustes con la selección "Regla"
Se puede crear una regla para el cambio de horario de verano.
● Fecha de inicio
Indique los siguientes valores para el inicio del horario de verano:
– Hora
Indique la hora.
– Mes
Indique el mes.
– Semana
Indique la semana.
Se pueden seleccionar desde la primera hasta la cuarta o la última semana del mes.
– Día de la semana
Indique el día de la semana.
● Fecha de fin
Indique los siguientes valores para el final del horario de verano:
– Hora
Indique la hora.
– Mes
Indique el mes.
– Semana
Indique la semana.
Se pueden seleccionar las semanas 1.ª a 4.ª o la última semana del mes.
– Día de la semana
Indique el día de la semana.

Cliente SNTP
Sincronización horaria en la red
El SNTP (Simple Network Time Protocol) sirve para la sincronización horaria en la red. Los
telegramas correspondientes son enviados por un servidor SNTP integrado en la red.
Nota
Para evitar saltos de hora, asegúrese de que en la red solo haya un servidor de tiempo.

Descripción
● Cliente SNTP
Active o desactive la sincronización horaria automática vía SNTP.
● Hora actual del sistema (solo disponible online)
Muestra la fecha actual y la hora normal actual que ha recibido el IE Switch. Si se indica una
zona horaria, la hora se adaptará en correspondencia.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2347

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Momento de la última sincronización (solo disponible online)
Indica cuándo ha tenido lugar la última sincronización horaria.
● Último mecanismo de sincronización (solo disponible online)
Muestra cómo se ha efectuado la última sincronización horaria. Existen las siguientes
posibilidades:
– No ajustado
La hora no se ha ajustado.
– Manual
Ajuste manual de la hora
– SNTP
Sincronización horaria automática mediante SNTP
– NTP
Sincronización horaria automática mediante NTP
– SIMATIC
Sincronización horaria automática mediante telegrama horario SIMATIC
– PTP
Sincronización horaria automática mediante PTP
● Zona horaria
Introduzca la zona horaria utilizada en formato "+/- HH:MM". La zona horaria se basa en el
tiempo universal coordinado (UTC). La hora indicada en el campo "Hora actual del sistema"
se adapta en correspondencia.
● Horario de verano (DST)
Indica si el cambio de horario de verano está activo.
– active (offset +1 h)
La hora del sistema ha pasado a horario de verano, es decir, se incrementa una hora.
En el campo "Hora actual del sistema" se sigue mostrando la hora normal incluida la
zona horaria.
En el campo "Hora actual del sistema" se sigue mostrando la hora normal, incluida la
zona horaria.
– inactive (offset +0 h)
La hora actual del sistema no cambia.
● Modo SNTP
Seleccione el tipo de sincronización. Son posibles los siguientes tipos de sincronización:
– Listen
Con este modo, el dispositivo actúa de forma pasiva y recibe telegramas SNTP que
proporcionan la hora. Los ajustes de los campos de entrada "Dirección de servidor
SNTP" y "Puerto del servidor SNTP" no tienen efecto alguno en este modo. En este
modo solo se soportan direcciones IPv4.
– Poll
Si selecciona este modo, el campo de entrada "Intervalo de sondeo [s]" se muestra para
continuar la configuración. En este modo sí se tienen en cuenta los ajustes de los
campos de entrada "Dirección de servidor SNTP" y "Puerto del servidor SNTP". Con
este tipo de sincronización, el dispositivo actúa de forma activa y envía solicitudes de
hora al servidor SNTP. En este modo se soportan direcciones IPv4 e IPv6.

2348

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Intervalo de sondeo[s]
Indique el intervalo de tiempo entre dos solicitudes de hora. El intervalo entre solicitudes se
indica en segundos en este campo. Los posibles valores se sitúan entre 16 y 16284
segundos.
● Dirección de servidor SMTP
Introduzca aquí la dirección IP o el FQDN (Fully Qualified Domain Name) del servidor
SMTP.
● Puerto del servidor SNTP
Introduzca el puerto del servidor SNTP.
Son posibles los siguientes puertos:
– 123 (puerto estándar)
– 1025 a 36564
● Primaria
Se coloca la marca de verificación para el servidor SNTP que había creado primero. Si se
han creado varios servidores SNTP, primero se consulta al servidor primario.

Cliente NTP
Ajuste automático de la hora mediante NTP
Si la sincronización horaria debe efectuarse mediante NTP, aquí puede realizar los
correspondientes ajustes.
Nota
Para evitar saltos de hora, asegúrese de que en la red solo haya un servidor de tiempo.

Descripción
● Cliente NTP
Marque esta casilla de verificación para activar la sincronización horaria automática
mediante NTP.
● Solo cliente NTP (seguro)
Si está activado, el dispositivo recibe la hora del sistema desde un servidor NTP seguro.
Este ajuste es válido para todas las entradas del servidor.
Para activar el cliente NTP seguro es necesario configurar los parámetros para la
autenticación (ID de clave, algoritmo hash, clave).
● Hora actual del sistema (solo disponible online)
Muestra la fecha actual y la hora normal actual que ha recibido el IE Switch. Si se indica una
zona horaria, la hora se adaptará en correspondencia.
● Momento de la última sincronización (solo disponible online)
Indica cuándo ha tenido lugar la última sincronización horaria.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2349

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Último mecanismo de sincronización (solo disponible online)
Este campo muestra cómo se ha efectuado la última sincronización horaria. Existen las
siguientes posibilidades:
– No ajustado
La hora no se ha ajustado.
– Manual
Ajuste manual de la hora
– SNTP
Sincronización horaria automática mediante SNTP
– NTP
Sincronización horaria automática mediante NTP
– SIMATIC
Sincronización horaria automática mediante telegrama horario SIMATIC
– PTP
Sincronización horaria automática mediante PTP
● Zona horaria
Introduzca la zona horaria utilizada en formato "+/- HH:MM". La zona horaria se basa en el
tiempo universal coordinado (UTC).
La hora indicada en el campo "Hora actual del sistema" se adapta en correspondencia.
● Horario de verano (DST)
Indica si el cambio de horario de verano está activo.
– active (offset +1 h)
La hora del sistema ha pasado a horario de verano, es decir, se incrementa una hora.
En el campo "Hora actual del sistema" se sigue mostrando la hora normal incluida la
zona horaria.
– inactive (offset +0 h)
La hora actual del sistema no cambia.
● Índice de servidor NTP
Seleccione el índice del servidor NTP. Se consulta primero al servidor con el índice más
bajo.
● Dirección de servidor NTP
Introduzca la dirección IPv4 del servidor NTP.
● Puerto del servidor NTP
Indique el puerto del servidor NTP.
Son posibles los siguientes puertos:
– 123 (puerto estándar)
– 1025 a 36564
● Intervalo de sondeo [s]
Indique el intervalo de tiempo entre dos solicitudes de hora. Los posibles valores se sitúan
entre 64 y 1024 segundos.
● ID de clave
Introduzca la ID de la clave de autenticación.

2350

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Algoritmo Hash
Defina el formato de la clave de autenticación.
● Clave
Introduzca la clave de autenticación.
● Confirmar clave
Vuelva a introducir la clave de autenticación para confirmarla.

SIMATIC Time Client
Ajuste de la hora mediante SIMATIC Time Client
En esta página se configura la sincronización horaria utilizando el SIMATIC Time Client.
Nota
Para evitar saltos de hora, asegúrese de que en la red solo haya un servidor de tiempo.

Descripción
● SIMATIC Time Client
Marque esta casilla de verificación para activar el dispositivo como SIMATIC Time Client.
● Hora actual del sistema (solo disponible online)
Indica la hora actual del sistema.
● Momento de la última sincronización (solo disponible online)
Indica cuándo ha tenido lugar la última sincronización horaria.
● Último mecanismo de sincronización (solo disponible online)
Muestra cómo se ha efectuado la última sincronización horaria. Existen las siguientes
posibilidades:
– No ajustado
La hora no se ha ajustado.
– Manual
Ajuste manual de la hora
– SNTP
Sincronización horaria automática mediante SNTP
– NTP
Sincronización horaria automática mediante NTP
– SIMATIC
Sincronización horaria automática mediante telegrama horario SIMATIC
– PTP
Sincronización horaria automática mediante PTP

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2351

Configuración de dispositivos y redes
1.4 Crear configuraciones

Cliente PTP
Ajuste automático de la hora mediante PTP
Si la sincronización horaria debe efectuarse mediante PTP, aquí puede realizar los
correspondientes ajustes.
Los dispositivos siguientes soportan la sincronización horaria mediante PTP:
● SCALANCE XR528-6M
● SCALANCE XR552-12M

Descripción
● Cliente PTP
Marque esta casilla de verificación para activar la sincronización horaria automática
mediante PTP.
● Hora actual del sistema (solo disponible online)
Muestra la fecha actual y la hora normal actual que se han determinado en la red mediante
la sincronización horaria. Si se indica una zona horaria, la hora se adaptará en
correspondencia.
● Momento de la última sincronización (solo disponible online)
Indica cuándo ha tenido lugar la última sincronización horaria. Si no ha sido posible
sincronizar la hora, el campo contendrá la entrada "Fecha/hora no ajustadas".
● Último mecanismo de sincronización (solo disponible online)
Este campo muestra cómo se ha efectuado la última sincronización horaria.
– No ajustado
La hora no se ha ajustado.
– Manual
Ajuste manual de la hora
– SNTP
Sincronización horaria automática mediante SNTP
– NTP
Sincronización horaria automática mediante NTP
– SIMATIC
Sincronización horaria automática mediante telegrama horario SIMATIC
– PTP
Sincronización horaria automática mediante PTP

2352

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Zona horaria
Introduzca la zona horaria utilizada en formato "+/- HH:MM". La zona horaria se basa en el
tiempo universal coordinado (UTC). La hora indicada en el campo "Hora actual del sistema"
se adapta en correspondencia.
● Horario de verano (DST)
Indica si el cambio de horario de verano está activo.
– active (offset +1 h)
La hora del sistema ha pasado a horario de verano, es decir, se incrementa una hora.
En el campo "Hora actual del sistema" se sigue mostrando la hora normal incluida la
zona horaria.
– inactive (offset +0 h)
La hora actual del sistema no cambia.

Servidor NTP
Configurar dispositivo como servidor NTP
En esta página se configura el dispositivo como servidor NTP. Los demás dispositivos pueden
consultar la hora actual a través de este servidor NTP. De este modo los dispositivos
alimentados no necesitan tener conexión con un servidor horario externo.
Nota
Sincronización horaria
Para que el dispositivo sincronice los dispositivos conectados a una hora correcta, configure
el dispositivo también como cliente NTP. En calidad de cliente NTP, el dispositivo obtiene la
hora precisa de un servidor de hora externo y la distribuye a sus clientes NTP en calidad de
servidor NTP.

Descripción
● Servidor NTP
Active o desactive el servicio de servidor NTP.
Nota
El modo SNTP "Listen" del cliente SNTP y de los servidores NTP no pueden estar activados
al mismo tiempo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2353

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla 1 se divide en las siguientes columnas:
● En todas las interfaces
Indica que los ajustes son válidos para todas las interfaces de la tabla 2.
● Escuchar
Seleccione en la lista desplegable el ajuste para todas las interfaces. Si está seleccionado
"No hay modificaciones", las entradas de la correspondiente columna de la tabla 2
permanecen inalteradas.
● Aplicar a tabla
Si se hace clic en este botón los ajustes se aplican a todas las interfaces de la tabla 2.
La tabla 2 se divide en las siguientes columnas:
● Interfaz
A través de esta interfaz se transfiere la hora vía NTP.
● Escuchar
Si está activado, los demás dispositivos pueden consultar la hora a través de esta interfaz.

Cierre de sesión automático
Ajuste del cierre de sesión automático
En esta página se ajustan los tiempos tras los que se efectúa un cierre de sesión automático
en WBM o CLI por inactividad del usuario. Si su sesión se ha cerrado automáticamente, debe
volver a iniciar sesión.

Configuración
● Web Based Management [s]
Introduzca en este campo de entrada un valor entre 60 y 3600 segundos. Si introduce el
valor 0, se desactiva el cierre de sesión automático.
● CLI (TELNET, SSH, Serial) [s]
Introduzca en este campo de entrada un valor entre 60 y 600 segundos. Si introduce el valor
0, se desactiva el cierre de sesión automático.

Pulsador
El pulsador "SELECT/SET" sirve para lo siguiente:
● Conmutar el modo de visualización.
● Restablecer preajustes de fábrica.
● Definir la máscara de señalización y los indicadores LED.
Encontrará una descripción detallada de las distintas funciones ejecutables con este pulsador
en las instrucciones de servicio del equipo. Desde esta página se puede restringir o desactivar
por completo la funcionalidad del pulsador SELECT/SET.

2354

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripciones
● Restablecer configuración de fábrica
Active o desactive la función "Restablecer configuración de fábrica" con el pulsador Select/
Set.
PRECAUCIÓN
Función "Restablecer configuración de fábrica" activa en el pulsador al arrancar
Si se ha desactivado esta función en la configuración, este ajuste solo se mantiene
durante el funcionamiento. Durante el arranque (p. ej. después de un fallo eléctrico) la
función está activa hasta que se termina de cargar la configuración, por lo que se corre el
riesgo de restablecer los ajustes de fábrica, aunque sea de forma involuntaria. Esto puede
provocar fallos imprevistos en el funcionamiento de la red, pues el dispositivo tiene que
volver a configurarse después de que esto suceda. Si hay un PLUG insertado, también se
borrará y se pondrá al estado de suministro.
PRECAUCIÓN
Reiniciar a través de WBM y CLI
Si ha desactivado la función "Restablecer configuración de fábrica" en la configuración, la
desactivación no será válida para el comando CLI "Reiniciar" ni para la página WBM
"Sistema > Rearranque completo". Con ello se corre el riesgo de restablecer los ajustes de
fábrica del dispositivo, aunque sea de forma involuntaria. Esto puede causar
perturbaciones indeseadas en el funcionamiento de la red, ya que, en dicho caso, será
necesario volver a configurar el dispositivo. Cualquier PLUG insertado perderá su
contenido y volverá a su estado original.
● Activar la máscara de avisos
Active o desactive la función "Definir la máscara de avisos mediante el indicador LED" con
el pulsador Select/Set.

Cliente Syslog
Agente de eventos del sistema
Syslog según RFC 3164 se usa en la red IP para la transmisión de mensajes de texto cortos
y no codificados a través de UDP. Para ello se requiere un servidor Syslog.

Requisitos para el envío de entradas de registro
● La función Syslog está activada en el equipo.
● La función Syslog para el evento correspondiente está activada.
● En su red se encuentra un servidor Syslog que recibe los registros log. Como se trata de
una conexión UDP, no hay respuesta al emisor.
● La dirección IP o el FQDN (Fully Qualified Domain Name) del servidor Syslog está
introducido en el dispositivo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2355

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción
La página contiene los siguientes campos:
● Cliente Syslog
Active o desactive la función Syslog.
● Dirección del servidor Syslog
Introduzca aquí la dirección IP o el FQDN (Fully Qualified Domain Name) del servidor
Syslog.
La tabla contiene las siguientes columnas:
● Dirección del servidor Syslog
Indica la dirección IP o el FQDN (Fully Qualified Domain Name) del servidor Syslog.
● Puerto de servidor
Indique el puerto que utiliza el servidor Syslog.

Puertos
Sinopsis
Vista general de la configuración de puertos
La página muestra la configuración para la transferencia de datos para todos los puertos del
dispositivo. En esta página no es posible realizar ajustes.

Descripción de los campos mostrados
La tabla se divide en las siguientes columnas:
● Puerto
Muestra los puertos configurables. La entrada es un enlace. Al hacer clic sobre el enlace,
se abre la página de configuración correspondiente. El puerto se compone del número de
módulo y del número de puerto, p. ej. el puerto 0.1 es el módulo 0, puerto 1.
● Nombre del puerto
Muestra el nombre del puerto.
● Tipo de puerto (solo con routing)
Muestra el tipo del puerto. Son posibles los siguientes tipos:
– Router-Port
– Puerto Switch VLAN Hybrid
– Puerto Switch VLAN Trunk
– Puerto switch PVLAN host
– Puerto switch PVLAN Promiscuous
– Puerto Switch VLAN Access

2356

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Tipo de medio Combo Port
Los valores solo están disponibles para Combo Ports. Muestra el modo del Combo Port:
– auto
– rj45
– sfp
● Estado
Indica si el puerto está activado o desactivado. El tráfico de datos solo es posible a través
de un puerto activado.
● Estado operativo
Indica el estado operativo actual. El estado operativo depende del "Status" y del "Link"
configurados. Existen las siguientes posibilidades:
– up
Se ha configurado el estado "enabled" para el puerto y el puerto tiene una conexión
válida con la red.
– down
Se ha configurado el estado "disabled" o "Link down" para el puerto o el puerto no tiene
conexión.
– not present
En dispositivos modulares, este estado se muestra cuando no hay ningún módulo de
medios insertado, por ejemplo.
● Link (solo disponible online)
Indica el estado de conexión con la red. Para el estado de conexión existen las siguientes
posibilidades:
– Up
El puerto tiene una conexión válida con la red; se recibe una señal de "Link Integrity".
– Down
La conexión está interrumpida, por ejemplo por estar desactivado el dispositivo
conectado.
● Modo de transferencia act. (solo disponible online)
Muestra los parámetros de transferencia del puerto.
● MTU (Maximum Transmission Unit)
Muestra el tamaño máximo de los paquetes.
● Negotiation
Indica si la configuración automática está activada o desactivada.
● Flow Ctrl. Type
Indica si el control de flujo está activado o desactivado para el puerto.
● Flow Ctrl.
Indica si el control de flujo trabaja en ese puerto.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2357

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Dirección MAC (solo disponible online)
Muestra la dirección MAC del puerto.
● Bloqueado por
Indica por qué el puerto está en estado "blocked":
–

No se soporta el análisis del estado del puerto.

– Redundancia de anillo
El puerto forma parte de un administrador de redundancia. Si el administrador de
redundancia está en estado "Passive", uno de los puertos del anillo está en estado
"blocking".
– Spanning Tree
El puerto tiene el estado "Discarding" en Spanning Tree. El puerto forma parte de un
Spanning Tree, pero está en una ruta redundante y está desactivado para el tráfico de
datos.
– Loop Detection
Se ha detectado un bucle y para el puerto se configuró el estado "disable" como reacción
a un bucle.
– Link Check
Se ha detectado un fallo en un trayecto de transmisión óptico y para el puerto se
configuró el estado "disable" como reacción.
– Miembro de Link Aggregation
El puerto forma parte de una Link Aggregation y se desactivó mediante LACP.
– Link Aggregation (LoopD)
El puerto forma parte de una Link Aggregation. Se ha detectado un bucle y para la Link
Aggregation se configuró el estado "disable" como reacción a un bucle.
– Link Aggregation (STP)
El puerto forma parte de una Link Aggregation. La Link Aggregation ha conmutado al
estado "Discarding" por medio de Spanning Tree.
– Admin down
El puerto tiene configurado el estado "disabled"; consulte "Sistema > Puertos >
Configuración".
– Link down
El puerto tiene configurado el estado "enabled" pero no hay ninguna conexión; consulte
"Sistema > Puertos > Configuración".
– Power down
El puerto tiene configurado el estado "Link down"; consulte "Sistema > Puertos >
Configuración".
– Standby
El dispositivo tiene activada la redundancia Standby. El puerto es un puerto Standby con
el estado "Passive".

2358

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Visualización divergente de los parámetros de transferencia en Combo Ports
En el estado de conexión "down", los parámetros de transferencia visualizados no se
corresponden con los valores propiamente dichos del Combo Port. En el estado de conexión
"up" se muestran los valores correctos.
Situación inicial
Hay insertado un transceptor enchufable en el Combo Port con los ajustes siguientes:
● Tipo de medio del Combo Port: auto
● Estado: enabled
● Link: down
Visualización de los parámetros de transferencia
Para transceptores enchufables de 100 Mbits/s
● Comportamiento real: Mode: 1G HD
● Comportamiento teórico: Mode: 100M FD
Para transceptores enchufables de 1 Gbit/s
● Comportamiento real: Mode: 1G HD
● Comportamiento teórico: Mode: 1G FD

Configuración
Configuración de puertos
Esta página permite configurar todos los puertos del equipo.

Descripción
La tabla se divide en las siguientes filas:
● Puerto
Seleccione los puertos que deben configurarse. El puerto se compone del número de
módulo y del número de puerto, p. ej. el puerto 0.1 es el módulo 0, puerto 1.
● Estado
Defina si el puerto está activado o desactivado.
– enabled
El puerto está activado. El tráfico de datos solo es posible a través de un puerto activado.
– disabled
El puerto está desactivado pero la conexión sigue activa.
– Link down
El puerto está desactivado y la conexión con el dispositivo interlocutor se ha cancelado.
● Nombre del puerto
Introduzca aquí un nombre para el puerto.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2359

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Dirección MAC (solo disponible online)
Muestra la dirección MAC del puerto.
● Modo de transferencia (solo disponible online)
Seleccione la velocidad y el método de transferencia del puerto. Si ajusta el modo
"Autonegotiation", estos parámetros se negocian automáticamente con el equipo terminal
conectado. Este también debe tener ajustado el modo "Autonegotiation".
Nota
Para que el puerto y el puerto interlocutor puedan comunicarse, es necesario que los
ajustes coincidan en ambas partes.
Nota
"Modo de transferencia" en Combo Ports
Para poder ajustar el "Modo de transferencia" de un Combo Port debe cambiarse el "Tipo
de medio Combo Port" por "rj45". Si el "Tipo de medio Combo Port" está en "automático" y
se utiliza el puerto RJ45, no es posible ajustar el "Modo de transferencia".
● Modo de transmisión act. (solo disponible online)
Muestra la velocidad de transmisión y el método de transmisión del puerto.
La velocidad de transmisión puede ser de 10 Mbits/s, 100 Mbits/s, 1000 Mbits/s o 10 Gbits/
s. Como método de transmisión es posible configurar dúplex (FD) o semidúplex (HD).
● Negotiation
Indica si la configuración automática de la conexión con el puerto interlocutor está activada
o desactivada.
● Flow Ctrl. Type
Active o desactive el control de flujo para el puerto.
Nota
Activar y desactivar el control de flujo con Autonegotiation
Solo es posible activar o desactivar el control de flujo si la función "Autonegotiation" está
desactivada. Posteriormente puede volver a activarse la función.
● Flow Ctrl.
Indica si el control de flujo trabaja en ese puerto.
● MTU
Introduzca el tamaño de los paquetes.

2360

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Tipo de puerto (solo con routing)
Seleccione el tipo de puerto:
– Router-Port
El puerto es una interfaz de Layer 3. No soporta funciones de Layer 2.
– Puerto Switch VLAN Hybrid
El puerto envía telegramas con y sin tag. No forma parte automáticamente de una VLAN.
– Puerto Switch VLAN Trunk
El puerto envía solo telegramas con tag y forma parte automáticamente de todas las
VLANs.
– Puerto switch PVLAN host
Los puertos host pertenecen a una PVLAN secundaria. Conecte a los puertos hosts los
dispositivos que solo deban comunicarse con determinados dispositivos de la PVLAN.
– Puerto switch PVLAN Promiscuous
Los puertos Promiscuous pertenecen a una PVLAN primaria. Conecte a los puertos
Promiscuous los dispositivos que deban comunicarse con todos los dispositivos de la
PVLAN.
– Puerto Switch VLAN Access
El Access Port pertenece a un Switch de proveedor que soporta la función Túnel VLAN
Q-in-Q. Conecte una red de cliente a Access Ports.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2361

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Tipo de medio Combo Port
Defina el modo del Combo Port:
– auto
Si selecciona este modo, tendrá prioridad el puerto del transceptor enchufable. Tan
pronto como se inserta un transceptor enchufable, se desconecta la conexión existente
en el puerto fijo RJ45. Si no hay ningún transceptor enchufable insertado, se puede
establecer una conexión por medio del puerto RJ45 fijo.
– rj45
Si selecciona este modo, se utilizará el puerto RJ45 fijo, independientemente del puerto
del transceptor enchufable. Si hay un transceptor enchufable insertado, este se
desactivará y desconectará de la corriente.
– sfp
Si selecciona este modo, se utilizará el puerto del transceptor enchufable,
independientemente del puerto RJ45 fijo. Si existe una conexión RJ45, esta se
desconectará, ya que el puerto RJ45 se desconectará de la corriente.
La configuración de fábrica de los Combo Ports es el modo "auto".
Nota
Adaptación automática mediante la configuración de PROFINET
Al establecer una conexión PROFINET se adapta también automáticamente el ajuste del
tipo de medio del Combo Port.
● Si hay un transceptor enchufable configurado, el tipo de medio del Combo Port se pone
a "sfp".
● Si está configurado el puerto RJ45 fijo, el tipo de medio del Combo Port se pone a "rj45".
Para que se lleve a cabo la adaptación automática, el tipo de medio del Combo Port debe
estar ajustado en "auto". Configure el tipo de medio del Combo Port en correspondencia
desde WBM o CLI.
● Estado operativo
Indica el estado operativo actual. El estado operativo depende del "Status" y del "Link"
configurados. Existen las siguientes posibilidades:
– up
Se ha configurado el estado "enabled" para el puerto y el puerto tiene una conexión
válida con la red.
– down
Se ha configurado el estado "disabled" o "Link down" para el puerto o el puerto no tiene
conexión.
– not present
En dispositivos modulares, este estado se muestra cuando no hay ningún módulo de
medios insertado, por ejemplo.

2362

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Link (solo disponible online)
Indica el estado de conexión a la red. Existen las siguientes posibilidades:
– Up
El puerto tiene una conexión válida con la red; se recibe una señal de "Link Integrity".
– Down
La conexión está interrumpida, p. ej. porque el dispositivo conectado está desactivado.
● Bloqueado por
Indica por qué el puerto está en estado "blocked":
– No se soporta el análisis del estado del puerto.
– Ringredundanz
El puerto forma parte de un administrador de redundancia. Si el administrador de
redundancia está en estado "Passive", uno de los puertos del anillo está en estado
"blocking".
– Spanning Tree
El puerto tiene el estado "Discarding" en Spanning Tree. El puerto forma parte de un
Spanning Tree, pero está en una ruta redundante y está desactivado para el tráfico de
datos.
– Loop Detection
Se ha detectado un bucle y para el puerto se configuró el estado "disable" como reacción
a un bucle.
– Link Check
Se ha detectado un fallo en un trayecto de transmisión óptico y para el puerto se
configuró el estado "disable" como reacción.
– Miembro de Link Aggregation
El puerto forma parte de una Link Aggregation y se desactivó mediante LACP.
– Link Aggregation (LoopD)
El puerto forma parte de una Link Aggregation. Se ha detectado un bucle y para la Link
Aggregation se configuró el estado "disable" como reacción a un bucle.
– Link Aggregation (STP)
El puerto forma parte de una Link Aggregation. La Link Aggregation ha conmutado al
estado "Discarding" por medio de Spanning Tree.
– Admin down
El puerto tiene configurado el estado "disabled"; consulte "Sistema > Puertos >
Configuración".
– Link Down
El puerto tiene configurado el estado "enabled" pero no hay ninguna conexión; consulte
"Sistema > Puertos > Configuración".
– Power Down
El puerto tiene configurado el estado "Link down"; consulte "Sistema > Puertos >
Configuración".
– Standby
El dispositivo tiene activada la redundancia Standby. El puerto es un puerto Standby con
el estado "Passive".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2363

Configuración de dispositivos y redes
1.4 Crear configuraciones

Modificación de la configuración de puertos
Haga clic en el campo correspondiente para modificar la configuración.
Nota
Los puertos ópticos trabajan siempre con el método de transmisión dúplex completo y con la
velocidad de transmisión máxima. Por esta razón no puede efectuar los siguientes ajustes en
el caso de puertos ópticos:
● Configuración automática
● Velocidad de transferencia
● Procedimiento de transmisión
Nota
En caso de sobrecarga de un puerto, el dispositivo impide o reduce a través de ciertos
mecanismos automáticos la retroacción sobre otros puertos y otras clases de prioridad (Class
of Service). Estando activado el control de flujo, esto puede hacer que se rechacen telegramas.
Se producen sobrecargas de puertos cuando el dispositivo recibe más telegramas de los que
puede enviar, p. ej. debido a velocidades de transmisión diferentes.

Control de errores
Alimentación
Ajustes para la vigilancia de la alimentación
Configure si el sistema de señalización debe vigilar la alimentación. Dependiendo de la
variante de hardware, puede haber una o dos conexiones de tensión (alimentación 1 /
alimentación 2). Con alimentación redundante, configure la vigilancia para cada uno de los
cables de alimentación.
El sistema de señalización indica un error si en una conexión vigilada (alimentación 1 o
alimentación 2) falta la tensión o es insuficiente.
Nota
Encontrará los límites de tensión de servicio admisibles en las instrucciones de servicio
resumidas del dispositivo.
Un error hace que reaccione el contacto de señalización y que se encienda el LED señalizador
de error en el dispositivo y, dependiendo de la configuración, puede generar un trap, un e-mail
o una entrada en la tabla de registro de eventos.

2364

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Ajustes
● Alimentación 1
Active o desactive la vigilancia de la conexión de tensión 1.
● Alimentación 2
Active o desactive la vigilancia de la conexión de tensión 2.

Link Change
Configuración de la vigilancia de errores en modificaciones de estado de conexiones
En esta página se configura si debe emitirse un aviso de error al producirse una modificación
del estado de una conexión de red.
Con la vigilancia de la conexión activada, se señaliza un error
● si en un puerto debe estar disponible un link y este falta.
● o si en un puerto no debe estar disponible ningún link y se detecta uno.
Un error hace que se dispare el contacto de señalización y se encienda el LED de error en el
dispositivo. Dependiendo de la configuración, el error puede generar un trap, un e-mail o una
entrada en la tabla de registro de eventos.

Descripción de los campos mostrados
La tabla 1 se divide en las siguientes columnas:
● 1.ª columna
Indica que los ajustes son válidos para todos los puertos.
● Ajuste
Elija el ajuste deseado. Existen las siguientes posibilidades:
– "-" (desactivado)
– Up
– Down
– No hay modificaciones: El ajuste de la tabla 2 no cambia.
● Aplicar a tabla
Al hacer clic en este botón se aplica el ajuste a todos los puertos de la tabla 2.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2365

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla 2 se divide en las siguientes columnas:
● Puerto
Muestra los puertos disponibles.
● Ajuste
Seleccione el ajuste. Existen las siguientes posibilidades:
– Up
El tratamiento de errores se inicia al pasarse al estado activo del puerto.
(De "Link down" a "Link up")
– Down
El tratamiento de errores se inicia al pasarse al estado pasivo del puerto.
(De "Link up" a "Link down")
– "-" (desactivado)
El tratamiento de errores no se inicia.

Redundancia
En esta página se configura si debe emitirse un mensaje de error al producirse una
modificación del estado de una conexión redundante.

Ajuste
● Pérdida de redundancia (solo HRP)
Active o desactive la vigilancia de la conexión. Si se pierde la redundancia de la conexión
se señaliza un error.

PROFINET
Ajustes para PROFINET
En esta página se configura el modo de PROFINET.

2366

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Diagnóstico de dispositivo PNIO
Indica si PNIO está activado ("On") o desactivado ("Off").
● Diagnóstico de dispositivo PNIO en el arranque siguiente
Ajuste si PNIO debe estar activado ("On") o desactivado ("Off") tras el próximo rearranque
completo del dispositivo.
Nota
PNIO y EtherNet/IP
Cuando se activa PNIO se desactiva EtherNet/IP. La conmutación entre PNIO y EtherNet/
IP no afecta a DCP.
Nota
Estado PNIO AR
Una vez que se ha establecido una conexión PROFINET, es decir, el estado de PNIO AR
es "Online", no es posible desactivar PNIO.
● Estado PNIO AR
Este campo muestra el estado de la relación de conexión PROFINET IO, es decir, si el
equipo está conectado con un controlador PROFINET IO "Online" o bien "Offline".
Online significa que hay establecida una conexión con un controlador PROFINET IO, que
este ha cargado sus datos de configuración en el equipo y que el equipo puede enviar sus
datos de estado al controlador PROFINET IO. En este estado, que se conoce también
como "in Data exchange", no se pueden configurar los parámetros que se ajustan a través
del PROFINET IO Controller.
● Nombre de dispositivo PNIO
En este campo aparece el nombre del equipo PROFINET IO conforme a la configuración
en HW Config de STEP 7.
● Rearranque con ajustes predeterminados de PROFINET
Haga clic en este botón para restablecer los ajustes predeterminados del perfil PROFINET
IO y reiniciar el dispositivo. El reinicio debe confirmarse en un cuadro de diálogo. En el
cuadro de diálogo se muestran los ajustes que están adaptados específicamente al
funcionamiento con el protocolo PROFINET.
ATENCIÓN
Pérdida de la dirección IP
Al restablecer los ajustes a los valores predeterminados de un perfil, se pierde también la
dirección IP. Tras ello solo se podrá acceder al dispositivo mediante la interfaz serie, la
Primary Setup Tool o DHCP.
En función de la conexión, un dispositivo que antes estaba correctamente configurado
puede generar telegramas circulantes indefinidamente y, con ello, el fallo del tráfico de
datos.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2367

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Permitir el intercambio de datos PNIO (solo para SCALANCE XB-200)
Active o desactive el intercambio de datos PNIO.
● Simular el intercambio de datos PNIO (solo para SCALANCE XB-200)
Active o desactive la simulación del intercambio de datos PNIO.

EtherNet/IP
Protocolo industrial EtherNet (EtherNet/IP)
En esta página se configura el modo de EtherNet/IP.

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Diagnóstico de dispositivo EtherNet/IP
Indica si EtherNet/IP está activado ("On") o desactivado ("Off").
● Diagnóstico de dispositivo EtherNet/IP en el siguiente arranque
Ajuste si EtherNet/IP debe estar activado ("On") o desactivado ("Off") tras el próximo
rearranque completo del dispositivo.
Nota
EtherNet/IP y PROFINET
Cuando se activa EtherNet/IP se desactiva PROFINET. La conmutación entre EtherNet/IP
y PROFINET no afecta a DCP.
Nota
Estado de PROFINET AR
Una vez que se ha establecido una conexión PROFINET, es decir, el estado de PROFINET
AR es "Online", no es posible activar EtherNet/IP.
● Rearranque con ajustes predeterminados de EtherNet/IP
Haga clic en este botón para restablecer los ajustes predeterminados del perfil EtherNet/IP
y reiniciar el dispositivo. El reinicio debe confirmarse en un cuadro de diálogo. En el cuadro
de diálogo se muestran los ajustes que están adaptados específicamente al
funcionamiento con el protocolo EtherNet/IP.
ATENCIÓN
Pérdida de la dirección IP
Al restablecer los ajustes a los valores predeterminados de un perfil, se pierde también la
dirección IP. Tras ello solo se podrá acceder al dispositivo mediante la interfaz serie, la
Primary Setup Tool o DHCP.
En función de la conexión, un dispositivo que antes estaba correctamente configurado
puede generar telegramas circulantes indefinidamente y, con ello, el fallo del tráfico de
datos.

2368

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

PLUG
Configuración del PLUG
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
ATENCIÓN
No extraer ni insertar el C-PLUG / KEY-PLUG durante el funcionamiento
Un PLUG solo se puede extraer o insertar con el dispositivo desconectado.
El dispositivo comprueba cada varios segundos si hay un PLUG insertado. Si detecta que se
ha retirado el PLUG, se produce un rearranque completo del sistema. Si había un KEY-PLUG
válido insertado en el dispositivo, este pasa a un estado de error definido después del
rearranque.

Información sobre la configuración del C-PLUG / KEY-PLUG
Esta página proporciona información detallada sobre la configuración que está depositada en
el C-PLUG o KEY-PLUG. Además existe la posibilidad de restablecer la configuración de
fábrica del C-PLUG o de dotarlo de un nuevo contenido.
Nota
La acción no se ejecuta hasta que se hace clic en el botón "Aplicar ajustes".
Esta acción no puede anularse.
Si decide no llevar a cabo la ejecución tras haber efectuado la selección, haga clic en el botón
"Actualizar". De este modo, los datos de esta página vuelven a leerse del dispositivo y su
selección se anula.
Nota
Incompatibilidad con versiones anteriores con el PLUG insertado
Si se instala una versión anterior, pueden perderse los datos de configuración. En ese caso,
tras la instalación del firmware el dispositivo se enciende con los ajustes de fábrica. Si,
además, hay un PLUG insertado en el dispositivo, después del rearranque tendrá el estado
"NOT ACCEPTED", puesto que en el PLUG siguen estando los datos de configuración del
firmware anterior, más actual. Esto permite regresar al firmware más actual que estaba
instalado anteriormente sin perder datos de configuración.
Si la configuración original del PLUG ya no se necesita, puede borrarse o sobrescribirse
manualmente mediante "Sistema > PLUG".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2369

Configuración de dispositivos y redes
1.4 Crear configuraciones

Ajustes
La tabla se divide en las siguientes filas:
● Estado
Muestra el estado del PLUG. Existen las siguientes posibilidades:
– ACCEPTED
Existe un PLUG con una configuración válida y apropiada en el dispositivo.
– NOT ACCEPTED
La configuración del PLUG enchufado no es válida o es incompatible.
– NOT PRESENT
No hay ningún C-PLUG o KEY-PLUG enchufado en el dispositivo.
– FACTORY
El PLUG está enchufado y no contiene ninguna configuración. Este estado también se
indica cuando se ha formateado el PLUG durante el funcionamiento.
– MISSING
No hay ningún PLUG insertado. En el dispositivo se han configurado funciones que
requieren una licencia.
● Grupo de dispositivos
Indica qué línea de productos SIMATIC NET ha utilizado el C-PLUG o KEY-PLUG
anteriormente.
● Tipo de dispositivo
Dentro de de la línea de productos, indica el tipo de dispositivo que ha utilizado el C-PLUG
o KEY-PLUG anteriormente.
● Versión de la configuración
La versión de la estructura de configuración. Esta información se refiere a las posibilidades
de configuración a que da soporte el dispositivo y no tiene nada que ver con la configuración
de hardware concreta. Por lo tanto, el dato de la revisión no cambia si se agregan o se
quitan componentes adicionales (p. ej. módulos o Extender), pero puede cambiar si se
realiza una actualización del firmware.
● Sistema de archivos
Indica el tipo del sistema de archivos existente en el PLUG.
ATENCIÓN
Nuevo sistema de archivos UBI
A partir de la versión de firmware 3.0, UBI es el sistema de archivos estándar para el CPLUG o KEY-PLUG. Si se detecta un C-PLUG con el sistema de archivos IECP anterior
en uno de estos dispositivos, dicho C-PLUG se formatea para el sistema de archivos UBI
y los datos se rescriben en el C-PLUG.
El sistema de archivos también se modifica tras una actualización del firmware a V3.0. Un
regreso a la versión anterior del firmware correspondiente puede comportar problemas. El
firmware no puede leer el C-PLUG o KEY-PLUG ni puede escribir en él; tampoco es
posible la función "Restablecer la configuración de fábrica del PLUG".
● Memoria disponible [bytes]
Indica la capacidad de memoria máxima del sistema de archivos existente en el PLUG.

2370

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Memoria ocupada [bytes]
Indica la capacidad de memoria ocupada en el sistema de archivos del PLUG.
● Información
Muestra información adicional sobre el dispositivo que había utilizado el PLUG
anteriormente, por ejemplo la referencia, la denominación de tipo y las versiones de
hardware y software. La versión de software mostrada equivale a la versión en la que fue
modificada la configuración por última vez. Con el estado "NOT ACCEPTED" se muestra
información adicional sobre la causa del problema.
● Firmware on PLUG
Si está activada la función, el firmware se guarda en el PLUG. Esto permite realizar
automáticamente con el PLUG actualizaciones de firmware a versiones anteriores o
posteriores. En el campo "Información" se indica si el firmware está guardado en el PLUG
o no.
● Modificar PLUG
Elija el ajuste deseado. Existen las posibilidades siguientes para modificar la configuración
en el C-PLUG o KEY-PLUG:
– Escribir la configuración actual en el PLUG
Esta opción solo está disponible si el estado del PLUG es "NOT ACCEPTED" o
"FACTORY".
La configuración disponible en la memoria flash interna del dispositivo se copia en el
PLUG.
– Restablecer la configuración de fábrica del PLUG
Borra todos los datos del PLUG y realiza un formateo Low Level.

Licencia PLUG
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
ATENCIÓN
No extraer ni insertar el C-PLUG / KEY-PLUG durante el funcionamiento
Un PLUG solo se puede extraer o insertar con el dispositivo desconectado.
El dispositivo comprueba cada varios segundos si hay un PLUG insertado. Si detecta que se
ha retirado el PLUG, se produce un rearranque completo del sistema. Si había un KEY-PLUG
válido insertado en el dispositivo, este pasa a un estado de error definido después del
rearranque.
Si un dispositivo se ha configurado una vez con un PLUG, ya no podrá utilizarse sin él. Para
poder volver a utilizar el dispositivo, restaure la configuración de fábrica.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2371

Configuración de dispositivos y redes
1.4 Crear configuraciones
Nota
Incompatibilidad con versiones anteriores con el PLUG insertado
Si se instala una versión anterior, pueden perderse los datos de configuración. En ese caso,
tras la instalación del firmware el dispositivo se enciende con los ajustes de fábrica. Si,
además, hay un PLUG insertado en el dispositivo, después del rearranque tendrá el estado
"NOT ACCEPTED", puesto que en el PLUG siguen estando los datos de configuración de la
versión más actual que estaba instalada antes. Esto permite regresar al firmware más actual
que estaba instalado anteriormente sin perder datos de configuración.
Si la configuración original del PLUG ya no se necesita, puede borrarse o sobrescribirse
manualmente mediante "Sistema > PLUG".

Información sobre la licencia del KEY-PLUG
Un C-PLUG solo puede guardar la configuración de un dispositivo. Un KEY-PLUG contiene,
además de la configuración, una licencia que habilita determinadas funciones del dispositivo
SIMATIC NET.
Esta página proporciona información detallada acerca de la licencia del KEY-PLUG.

Descripción de los campos mostrados
● Estado
Muestra el estado del KEY-PLUG. Existen las siguientes posibilidades:
– ACCEPTED
El KEY-PLUG que hay en el dispositivo contiene una licencia adecuada y válida.
– NOT ACCEPTED
La licencia del KEY-PLUG insertado no es válida.
– NOT PRESENT
No hay ningún KEY-PLUG insertado en el dispositivo.
– MISSING
No hay ningún KEY-PLUG insertado o bien hay un C-PLUG insertado con el estado
"FACTORY". En el dispositivo se han configurado funciones que requieren una licencia.
– WRONG
El KEY-PLUG insertado no concuerda con el dispositivo.
– UNKNOWN
Contenido desconocido del KEY-PLUG.
– DEFECTIVE
Contenido erróneo del KEY-PLUG.
● Referencia
Muestra la referencia del KEY-PLUG. El KEY-PLUG está disponible para diferentes
ampliaciones de función y sistemas de destino.

2372

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Número de serie
Muestra el número de serie del KEY-PLUG.
● Información
Muestra información adicional sobre el dispositivo que había utilizado el KEY-PLUG
anteriormente, por ejemplo la referencia, la denominación de tipo y las versiones de
hardware y software. La versión de software mostrada equivale a la versión en la que fue
modificada la configuración por última vez. Con el estado "NOT ACCEPTED" se muestra
información adicional sobre la causa del problema.
Nota
Al guardar la configuración, se guarda también la información de si en ese momento hay un
KEY-PLUG insertado en el dispositivo. Esta configuración solo podrá funcionar si hay
enchufado un KEY-PLUG con la misma referencia o licencia.

Ping
Accesibilidad de una dirección en una red IP
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
La función Ping permite comprobar si una dirección determinada está disponible en la red.

Descripción
La página contiene los siguientes campos:
● Dirección de destino
Introduzca aquí la dirección IPv4, IPv6 o el FQDN (Fully Qualified Domain Name) del
dispositivo.
● Repetir
Introduzca el número de peticiones Ping.
● Resolución DNS
Seleccione en qué tipo de dirección IP debe resolverse un FQDN especificado.
– Automático
En este modo el tipo de dirección IP se selecciona automáticamente.
– IPv4
El FQDN especificado se resuelve en una dirección IPv4.
– IPv6
El FQDN especificado se resuelve en una dirección IPv6.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2373

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Interfaz saliente para IPv6
Esta selección solo es necesaria cuando la dirección de destino es una dirección Multicast
o Link Local.
– "-" (ajuste de fábrica)
– Seleccione la interfaz IPv6 correspondiente.
● Ping
Haga clic en este botón para iniciar la función Ping.
● Salida Ping
Este campo muestra la salida de la función Ping.
● Vaciar
Haga clic en este botón para vaciar la salida Ping.

DCP Discovery
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

Buscar dispositivos que sean accesibles a través de la interfaz seleccionada
En esta página existe la posibilidad de seleccionar una interfaz y buscar los dispositivos
accesibles a través de la interfaz. Los dispositivos accesibles se muestran en una tabla. En la
tabla es posible comprobar y adaptar los parámetros de red de los dispositivos. Para identificar
y configurar los dispositivos se utiliza el Discovery Configuration Protocol (DCP).
Nota
DCP Discovery
La función solo está disponible en la VLAN asociada a la interfaz TIA. La interfaz TIA se
configura en "Layer 3 > Subredes > Configuración".
Requisitos:
Para adaptar los parámetros de red, DCP requiere derechos de escritura en el dispositivo. Si
el acceso está protegido contra escritura no será posible configurar los parámetros de red.
En los dispositivos SCALANCE, el acceso se configura en "Sistema > Configuración".

Descripción de los valores mostrados
● Interfaz
Seleccione la interfaz deseada.
● Examinar
Inicia la búsqueda de dispositivos que sean accesibles a través de la interfaz seleccionada.
Una vez finalizada la búsqueda, los dispositivos accesibles se muestran en la tabla. La
tabla está limitada a 100 entradas.

2374

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla se divide en las siguientes columnas:
● Puerto
Indica el puerto a través del cual se accede al dispositivo.
● Dirección MAC
Muestra la dirección MAC del dispositivo.
● Tipo de dispositivo
Indica la línea de productos o el grupo de productos al que pertenece el dispositivo.
● Nombre de dispositivo
Si el dispositivo soporta esta función es posible asignarle un nombre de dispositivo
PROFINET.
● Dirección IP
En caso necesario, adapte la dirección IPv4 del dispositivo.
La dirección IPv4 debería ser unívoca dentro de la red y concordar con la red. La dirección
IPv4 0.0.0.0 significa que todavía no se ha ajustado ninguna dirección IPv4.
● Máscara de subred
En caso necesario, adapte la máscara de subred del dispositivo.
● Dirección de gateway
En caso necesario, indique la dirección IPv4 de la pasarela.
● Estado nombre de dispositivo
– Discovered: se utiliza el nombre de dispositivo ajustado.
– Configured: se ha asignado un nombre de dispositivo nuevo al dispositivo.
● Estado dirección IP
– Discovered/IP: el dispositivo utiliza una dirección IPv4 estática.
– Discovered/DHCP: el dispositivo ha obtenido la dirección IPv4 de un servidor DHCP.
– Configured: se ha asignado al dispositivo una dirección IPv4 nueva.
● Timeout
Defina la duración del parpadeo. Una vez transcurrido el tiempo finalizará el parpadeo.
● Parpadeo
Hace parpadear los LED de puerto del dispositivo seleccionado.

PoE
General
Nota
El comando de menú "PoE" solo se muestra en dispositivos que soportan PoE.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2375

Configuración de dispositivos y redes
1.4 Crear configuraciones

Ajustes para Power over Ethernet (PoE)
En esta página se muestra información sobre la potencia que el IE Switch proporciona a través
de PoE.
El SCALANCE X-500 representa un PSE (Power Sourcing Equipment). En el caso del
SCALANCE XM400 cada grupo de cuatro puertos con capacidad PoE se considera un PSE.
Los valores mostrados en cada caso rigen solo para el PSE correspondiente.

Descripción de los campos mostrados
● PSE (solo lectura)
Indica el número del PSE.
● Potencia máxima [W] (solo lectura)
Potencia máxima que un PSE proporciona para la alimentación de dispositivos PoE. El
valor "Potencia máxima" puede ajustarse en SCALANCE XM-400.
● Potencia distribuida [W] (solo lectura)
Potencia total reservada por los dispositivos PoE de acuerdo con la clasificación.
● Potencia utilizada [W] (solo lectura)
Potencia total utilizada por los dispositivos terminales.
● Umbral de potencia [%]
Cuando la potencia consumida por los dispositivos terminales sobrepasa el porcentaje
indicado aquí, se activa un evento.

Power over Ethernet en SCALANCE XM-400
En SCALANCE XM-400, la función "Power over Ethernet" puede utilizarse a través del Port
Extender PE408PoE.
Alimentación de tensión PoE
La alimentación de tensión PoE se conecta externamente. Por cada Port Extender PE408PoE
es posible conectar 2 alimentaciones PoE. Esto significa que cada PE408PoE dispone de 2
PSE (Power Sourcing Equipment) con 4 puertos cada uno.
Numeración de los PSE
Los PSE están numerados para distinguirlos durante la configuración.

6ORW

Figura 1-124

2376









6ORW

6ORW

SCALANCE XM-400 con 2 Port Extenders PE408PoE

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Si hay un PE408PoE insertado en el slot 2, los PSE correspondientes tienen los índices 1 y 2.
Si hay un PE408PoE insertado en el slot 3, los PSE correspondientes tienen los índices 3 y 4.
La numeración de los PSE está ligada a los slots. Si en el slot 2 hay insertado un Port Extender
sin PoE y en el slot 3 un PE408PoE, los PSE del slot 3 siguen teniendo los índices 3 y 4.




6ORW

Figura 1-125

6ORW

6ORW

SCALANCE XM-400 con 2 Port Extenders (1 Port Extender sin PoE y 1 PE408PoE)

En un SCALANCE XM416-4C, con el que solo es posible conectar un Port Extender, los
índices de los PSE son 1 y 2 en correspondencia.

Power over Ethernet en SCALANCE XR528-6M y SCALANCE XR552-12M
En SCALANCE XR528-6M y SCALANCE XR552-12M solo es posible equipar con módulos
PoE los slots 1 a 3.

Puerto
Ajustes para los puertos
Para cada uno de los puertos PoE se puede definir si debe tener lugar una alimentación de
tensión vía Ethernet. Además se puede establecer una prioridad para cada consumidor
conectado. En caso necesario, los dispositivos con una prioridad alta reciben un trato
preferente respecto a otros en cuanto a la alimentación de tensión. En esta página se muestra
información detallada sobre los diferentes puertos PoE.

Descripción de los campos mostrados
La página contiene dos tablas. En la tabla 1 existe la posibilidad de realizar ajustes y asignarlos
simultáneamente a todos los puertos. La tabla 2 permite realizar ajustes diferentes para cada
puerto.
La tabla 1 se divide en las siguientes columnas:
● Puerto
Indica que los ajustes son válidos para todos los puertos.
● Ajuste
Elija el ajuste deseado. Elija el ajuste deseado. Si está seleccionado "No hay
modificaciones", la entrada de la tabla 2 permanece invariable.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2377

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Prioridad
Elija la prioridad deseada para los puertos. Elija el ajuste deseado. Si está seleccionado "No
hay modificaciones", la entrada de la tabla 2 permanece invariable.
● Tipo
Introduzca una cadena de caracteres que describa con mayor detalle el dispositivo
conectado. La longitud máxima es de 255 caracteres.
● Utilizar la potencia máxima personalizada
Elija si debe utilizarse la potencia máxima personalizada. Si está seleccionado "No hay
modificaciones", la entrada de la tabla 2 permanece invariable.
● Potencia máxima personalizada [W]
Indique la potencia máxima que proporciona un puerto para la alimentación de un
dispositivo conectado. Este valor solo se tiene en cuenta si está activada la casilla de
verificación correspondiente "Utilizar la potencia máxima personalizada". Si está registrado
"No hay modificaciones", la entrada de la tabla 2 no varía.
● Aplicar a tabla
Al hacer clic en este botón se aplican los ajustes a todos los puertos de la tabla 2.
La tabla 2 se divide en las siguientes columnas:
● Puerto
Muestra los puertos PoE configurables. El puerto se compone del número de puerto y del
número de slot, p. ej. el puerto 0.1 es el slot 0, puerto 1.
● Ajuste
Habilite la alimentación PoE para este puerto o interrúmpala.
● Prioridad
Seleccione la prioridad con la que debe tratarse este puerto en cuanto a la alimentación de
tensión. Existen las siguientes posibilidades de ajuste con relevancia ascendente:
– Baja
– Alta
– Crítica
Si la potencia de la fuente de alimentación conectada no fuera suficiente para alimentar
todos los dispositivos conectados, se alimentarán preferentemente los dispositivos con la
prioridad más alta. Si se ha establecido la misma prioridad para dos puertos, en caso
necesario se da preferencia al puerto con el número más bajo.
● Tipo
Aquí se puede introducir una cadena de caracteres que describe con mayor detalle el
dispositivo conectado. La longitud máxima es de 255 caracteres.
● Utilizar la potencia máxima personalizada
Si se activa esta casilla de verificación para un puerto se utilizará la potencia máxima
definida por el usuario.

2378

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Potencia máxima personalizada [W]
Indique la potencia máxima que proporciona un puerto para la alimentación de un
dispositivo conectado. Este valor solo se tiene en cuenta si está activada la casilla de
verificación correspondiente "Utilizar la potencia máxima personalizada". La potencia
personalizada se compara con el rango de valores de la clase que indica el dispositivo
conectado:
– Si la potencia personalizada está dentro de la clase del dispositivo conectado se utiliza
el valor personalizado.
– Si la potencia personalizada está por encima de la clase del dispositivo conectado se
utiliza el valor más alto de la clase.
– Si la potencia personalizada está por debajo de la clase del dispositivo conectado se
utiliza el valor más bajo de la clase.
Si la potencia consumida por el dispositivo conectado sobrepasa la máxima potencia
definida o utilizada, el dispositivo conectado se desconectará.
● Clasificación (solo lectura)
La clasificación indica la clase de dispositivo, además de la potencia máxima del mismo.
● Estado (solo lectura)
Indica el estado del puerto.
Existen los siguientes estados:
– disabled
La alimentación PoE para este puerto está desactivada.
– delivering
La alimentación PoE para este puerto está activada y hay un dispositivo conectado.
– searching
La alimentación PoE para este puerto está activada pero no hay ningún dispositivo
conectado.
Nota
Cuando un dispositivo se conecta a un puerto con capacidad PoE, se comprueba si la
potencia del puerto es suficiente para el dispositivo conectado. Si la potencia del puerto no
es suficiente, PoE estará activado en "Ajuste", pero el puerto tendrá el estado "disabled".
En ese caso el puerto ha sido desactivado por el PoE Power Management.
● Potencia [mW] (solo lectura)
Indica la potencia que suministra SCALANCE a este puerto.
● Tensión [V] (solo lectura)
Indica la tensión que llega a este puerto.
● Intensidad [mA] (solo lectura)
Indica la intensidad que se suministra a un dispositivo de este puerto.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2379

Configuración de dispositivos y redes
1.4 Crear configuraciones

Diagnóstico del puerto
Comprobador de cables
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
Con esta página, cada uno de los puertos Ethernet puede realizar un diagnóstico de errores
independiente en el cable. Esta prueba se realiza sin que el cable esté desenchufado, sin estar
conectado un comprobador de cables y sin que esté instalado un módulo Loopback en el otro
extremo. Con esto se pueden localizar cortocircuitos e interrupciones de cables con una
precisión de pocos metros.
Nota
Tenga en cuenta que esta prueba solo se permite si en el puerto a comprobar no está
establecida ninguna conexión de datos. En caso de haber una conexión de datos en él, se
interrumpirá durante un breve intervalo de tiempo. El restablecimiento automático de la
conexión puede fracasar; en dicho caso habrá que restablecerla manualmente.

Descripción
● Puerto
Seleccione el puerto deseado en la lista desplegable.
● Realizar test
Activa el diagnóstico de errores. El resultado se representa en la tabla.
La tabla contiene las siguientes columnas:
● Par
Indica el par de conductores del cable.
Nota
Pares de conductores
● En cables de red de 10/100 Mbits no se utilizan los pares de conductores 4-5 ni 7-8.
● En cables de 1000 Mbits o Gigabit Ethernet se utilizan los 4 pares de conductores. La
correspondencia entre par de conductores y asignación de pines es la siguiente (DIN EN
50173):
– Par 1 = pin 4-5
– Par 2 = pin 1-2
– Par 3 = pin 3-6
– Par 4 = pin 7-8
● Estado
Indica el estado del cable.
● Distancia [m]
Indica la distancia hasta el extremo del cable, el punto de rotura del cable o el cortocircuito.

2380

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Diagnóstico SFP
En esta página puede ejecutar un diagnóstico de errores independiente para cada puerto SFP.
Esta prueba se realiza sin necesidad de desenchufar ningún cable, conectar un comprobador
de cables o instalar un módulo Loopback en el otro extremo.
Nota
Tenga en cuenta que esta prueba solo se permite si en el puerto a comprobar no está
establecida ninguna conexión de datos. En caso de haber una conexión de datos en él, se
interrumpirá durante un breve intervalo de tiempo. El restablecimiento automático de la
conexión puede fracasar; en dicho caso habrá que restablecerla manualmente.

Descripción
La página contiene los siguientes campos:
● Puerto
Seleccione el puerto deseado en la lista desplegable.
● Actualizar
Actualiza la visualización de los valores del puerto ajustado. El resultado se representa en
la tabla.
Los valores se muestran en los siguientes campos:
● Nombre
Muestra el nombre de la interfaz.
● Modelo
Muestra el tipo de interfaz.
● Versión
Indica la versión de hardware de SFP.
● Serie
Muestra el número de serie de SFP.
● Tasa de bits nominal [Mbits/s]
Muestra la tasa de bits nominal de la interfaz.
● Max. Link (50.0/125um) [m]
Muestra la distancia máxima en metros, posible con este medio.
● Max. Link (62.5/125um) [m]
Muestra la distancia máxima en metros, posible con este medio.
En la siguiente tabla se muestran los valores del transceptor enchufable SFP utilizado en este
puerto:
● Temperatura [°C]
Muestra la temperatura de la interfaz.
● Tensión [V]
Muestra la tensión [V] aplicada a la interfaz.
● Intensidad [mA]
Muestra el consumo de corriente [mA] de la interfaz.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2381

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Potencia Rx [mW]
Muestra la potencia de recepción [mW] de la interfaz.
● Potencia Tx [mW]
Muestra la potencia de emisión [mW] de la interfaz.
● Actual
Muestra el valor actual.
● Baja
Muestra el valor más bajo.
● Alta
Muestra el valor más alto.

Copia de seguridad de la configuración
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

Backup
En esta página se pueden guardar copias de seguridad de la configuración.
Las copias de seguridad generadas se guardan en el tipo de archivo "ConfigPackBackup". En
la página "System > Load&Safe > HTTP/TFTP" se pueden copiar las copias de seguridad de
la configuración en el PC cliente o bien se pueden cargar desde él.

Descripción
Esta página contiene los siguientes campos:
● Name
Introduzca un nombre para la copia de seguridad.
La tabla contiene las siguientes columnas:
● Select
Seleccione la fila que desea borrar.
● Name
Muestra el nombre de la copia de seguridad.
● Tamaño [kbytes]
La primera fila "Available memory" indica cuánto espacio de memoria hay disponible en el
dispositivo para copias de seguridad. Cada vez que crea una copia de seguridad el espacio
disponible en la memoria se reduce en correspondencia. En cada una de las filas siguientes
se muestra el tamaño de la copia de seguridad.
● Restore
Haga clic en el botón "Restore" para volver a cargar en el dispositivo la copia de seguridad
en cuestión.

2382

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Configurar funciones de Layer 2
Configuración
Configuración de Layer 2
En esta página se efectúa una configuración básica de las funciones de Layer 2. En las
páginas de configuración correspondientes de estas funciones pueden efectuarse ajustes
detallados. En las páginas de configuración también pueden comprobarse los ajustes.

Descripción de los campos mostrados
● VLAN basada en protocolo
Active o desactive la VLAN basada en protocolo. Se pueden configurar otros ajustes en
"Layer 2 > VLAN".
● VLAN basada en subred
Active o desactive la VLAN basada en subred. Se pueden configurar otros ajustes en "Layer
2 > VLAN".
● Dynamic MAC Aging
Active o desactive el mecanismo "Aging". Se pueden configurar otros ajustes en "Layer 2
> Dynamic MAC Aging".
● Tipo de redundancia
Existen los siguientes ajustes:
– "-" (desactivado)
La función de redundancia está desactivada.
– Spanning Tree
Seleccionando esta opción se especifica el modo de redundancia deseado en "Método
de redundancia".
– Ring
Redundancia de anillo activada. Se pueden configurar otros ajustes en "Layer 2 >
Redundancia de anillo > Anillo".
– Anillo con RSTP
Si se selecciona esta opción, el modo de compatibilidad para Spanning Tree se pone de
forma fija en RSTP. En la lista desplegable "Método de redundancia" se define el modo
de redundancia del anillo. El ajuste actual puede modificarse en los menús
"Redundancia de anillo" y "Spanning Tree".
Nota
Restricción relativa a los puertos con la opción "Anillo con RSTP"
Si se ha activado la opción "Anillo con RSTP", los puertos siguientes no pueden estar en
el Spanning Tree:
● Puertos en anillo
● Puertos Standby
● Puertos de acoplamiento Standby

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2383

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Método de redundancia
Si selecciona "Anillo" o "Anillo con RSTP" en "Tipo de redundancia", dispone de las
siguientes posibilidades de selección:
– Automatic Redundancy Detection
Seleccione este ajuste para una configuración automática del modo de redundancia.
En el modo "Automatic Redundancy Detection" el dispositivo establece
automáticamente si en el anillo hay un dispositivo con la función "HRP Manager". Si es
así, el dispositivo adopta la función "HRP Client".
Si no se encuentra ningún HRP Manager, todos los dispositivos con el ajuste "Automatic
Redundancy Detection" o "Administrador automático MRP" negocian entre sí qué
dispositivo adopta la función "MRP Manager". El equipo con la dirección MAC de valor
más bajo siempre pasa a ser "MRP Manager". Los demás dispositivos adoptan
automáticamente el modo "MRP Client".
– Administrador automático MRP
En modo "Administrador automático MRP", los dispositivos negocian entre sí cuál de
ellos adopta la función de "Administrador MRP". El dispositivo con la dirección MAC de
valor más bajo siempre pasa a ser "Administrador MRP". Los demás dispositivos se
ajustan automáticamente al modo "Cliente MRP".
A diferencia del ajuste "Automatic Redundancy Detection", los dispositivos no son
capaces de reconocer si hay un administrador HRP en el anillo.
Nota
Configuración MRP en STEP 7
Si desde STEP 7 se ha ajustado la función "Manager (Auto)" o "Manager" para el
dispositivo, en esta página del WBM se mostrará en ambos casos "MRP AutoManager". En la visualización de la CLI se distinguen las dos funciones.
– Cliente MRP
El dispositivo adopta la función de cliente MRP.
– Cliente HRP
El dispositivo adopta la función de cliente HRP.
– Administrador HRP
El dispositivo adopta la función de administrador HRP.
Al configurar un anillo HRP, debe ajustarse un dispositivo como administrador HRP. En
todos los demás dispositivos debe estar ajustado "Cliente HRP" o "Automatic
Redundancy Detection".
Si selecciona "Spanning Tree" en "Tipo de redundancia", dispone de las siguientes
posibilidades de selección:
– STP
Activa el Spanning Tree Protocol (STP). Los tiempos de reconfiguración típicos para
Spanning Tree se sitúan entre 20 y 30 segundos. Se pueden configurar otros ajustes en
"Layer 2 > Spanning Tree".

2384

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
– RSTP
Activa el Rapid Spanning Tree Protocol (RSTP). Si en un puerto se detecta un telegrama
Spanning Tree, este puerto retrocede de RSTP a Spanning Tree. Se pueden configurar
otros ajustes en "Layer 2 > Spanning Tree".
Nota
Con RSTP (Rapid Spanning Tree Protocol) pueden producirse brevemente bucles con
duplicación o rebases de telegramas. Si esto no es aceptable para su aplicación, deberá
utilizar el procedimiento estándar Spanning Tree, más lento.
– MSTP
Activa el Multiple Spanning Tree Protocol (MSTP). Se pueden configurar otros ajustes
en "Layer 2 > Spanning Tree".
● Standby
Active o desactive la función "Redundancia Standby". Se pueden configurar otros ajustes
en "Layer 2 > Redundancia de anillo > Standby".
● Interconexión MRP
Active o desactive la función Interconexión MRP. Encontrará otros ajustes en "Layer 2 >
Redundancia de anillo > Interconexión MRP".
● Passive Listening
Active o desactive la función "Passive Listening".
● RMON
Si activa esta casilla de verificación, Remote Monitoring (RMON) permite recopilar datos de
diagnóstico en el dispositivo, procesarlos y extraerlos a través de SNMP de una estación de
gestión de red que soporte también RMON. Estos datos de diagnóstico, como pueden ser
evoluciones de carga referidas a puertos, permiten detectar a tiempo problemas en la red
y eliminarlos.
● Multicast dinámico
Son posibles los siguientes ajustes:
– "-" (desactivado)
– IGMP Snooping
Activa IGMP (Internet Group Management Protocol). Se pueden configurar otros ajustes
en "Layer 2 > Mulitcast > IGMP".
– MLD Snooping
activa MLD. Se pueden configurar otros ajustes en "Layer 2 > Mulitcast > MLD".
– IGMP y MLD Snooping
Activa IGMP y MDL.
– GMRP
Activa GMRP (GARP Multicast Registration Protocol). Se pueden configurar otros
ajustes en "Layer 2 > Mulitcast > GMRP".
Nota
GMRP e IGMP no se pueden utilizar al mismo tiempo.
● GVRP
Active o desactive "GVRP" (GARP VLAN Registration Protocol). Se pueden configurar
otros ajustes en "Layer 2 > VLAN > GVRP".
Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2385

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Mirroring
Active o desactive la duplicación de puertos. Se pueden configurar otros ajustes en "Layer
2 > Mirroring > Port".
● Loop Detection
Active o desactive la detección de bucles. Se pueden configurar otros ajustes en "Layer 2
> Loop Detection".
● PTP
Especifique cómo el dispositivo debe procesar mensajes PTP. Se pueden configurar otros
ajustes en "Layer 2 > PTP".
– off
El dispositivo no procesa mensajes PTP. Sin embargo, los mensajes PTP son
transferidos siguiendo las reglas del switch.
– transparent
El dispositivo adopta la función de un Transparent Clock y transfiere los mensajes PTP
a otros dispositivos, no sin antes haber realizado entradas en el campo de corrección del
mensaje PTP.

QoS
General
Nota
Esta página solo existe en los módulos siguientes:
● SCALANCE XB-200
● SCALANCE XC-200
● SCALANCE XF-200BA
● SCALANCE XP-200
● SCALANCE XR-300WG

Prioridades de transmisión
En esta página se definen las prioridades de diferentes frames. Además, en función de la
prioridad es posible ajustar el método con el que se definirá el orden de procesamiento de los
frames. Consulte también el capítulo "Principios básicos".

2386

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los valores mostrados
La página contiene los siguientes campos:
● Broadcast Priority
Defina la prioridad de los frames Broadcast. El switch clasifica el frame en una cola en
función de esta priorización. La asignación de la prioridad en una cola se configura en la
página "Layer 2 > QoS > CoS Map".
● Agent Priority
Defina la prioridad de los frames de agente. El switch clasifica el frame en una cola en
función de esta priorización. La asignación de la prioridad en una cola se configura en la
página "Layer 2 > QoS > CoS Map".
● Scheduling Mode
Seleccione el orden en el que deben procesarse los frames en las colas.
Cuanto mayor sea el número de la cola mayor será la prioridad de procesamiento.
– Strict Queueing
Mientras haya frames con una prioridad alta en la cola, solo se procesarán estos frames
prioritarios.
– Weighted Fair Queueing
Aunque en la cola haya frames con una prioridad alta, en algunos casos se procesarán
frames con una prioridad más baja.

Asignación CoS
Cola de espera CoS
En esta página se asignan las prioridades CoS de diferentes colas de espera (Traffic Queues).

Descripción de los campos mostrados
● CoS
Indica la prioridad CoS de los paquetes entrantes.
● Queue
Seleccione en la lista desplegable la cola de espera que se asignará a la prioridad CoS.
Cuanto mayor sea el número de la cola, mayor será la prioridad de procesamiento.
En las colas 1 - 6 en algunos casos se procesarán frames con una prioridad más baja
aunque en la cola de espera haya frames con una prioridad alta.
En las colas 7 - 8 solo se procesarán frames con una prioridad alta mientras en la cola de
espera haya frames con una prioridad alta.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2387

Configuración de dispositivos y redes
1.4 Crear configuraciones
Las clases de servicio (CoS) están asignadas a las colas del siguiente modo:
SCALANCE XB-200/XP-200

SCALANCE XM-400/XR-500

CoS 0 → cola 2

CoS 0 → cola 2

CoS 1 → cola 1

CoS 1 → cola 1

CoS 2 → cola 1

CoS 2 → cola 3

CoS 3 → cola 2

CoS 3 → cola 4

CoS 4 → cola 3

CoS 4 → cola 5

CoS 5 → cola 3

CoS 5 → cola 6

CoS 6 → cola 4

CoS 6 → cola 7

CoS 7 → cola 4

CoS 7 → cola 8

Asignación DSCP
Asignación DSCP
En esta página se asignan las prioridades DSCP de diferentes colas de espera (Queues).

Descripción de los valores mostrados
La tabla 1 se divide en las siguientes columnas:
● DSCP min
Seleccione en la lista desplegable el valor mínimo para un rango de códigos DSCP a los
que desee asignar una cola.
● DSCP max
Seleccione en la lista desplegable el valor máximo para un rango de códigos DSCP a los
que desee asignar una cola.
● Queue
Seleccione en la lista desplegable la cola de espera de reenvío (prioridad de envío) que se
asigna al rango de códigos DSCP.
● Aplicar a tabla
Al hacer clic en este botón se asigna a los códigos DSCP del rango indicado la cola de
espera de reenvío (prioridad de envío) seleccionada.
La tabla 2 se divide en las siguientes columnas:
● DSCP
Muestra la prioridad DSCP de los frames entrantes.
● Queue
Seleccione en la lista desplegable la cola de espera que se asignará a la prioridad DSCP.
Cuanto mayor sea el número de la cola, mayor será la prioridad de procesamiento.
En las colas 1 - 6 en algunos casos se procesarán frames con una prioridad más baja
aunque en la cola de espera haya frames con una prioridad alta.
En las colas 7 - 8 solo se procesarán frames con una prioridad alta mientras en la cola de
espera haya frames con una prioridad alta.

2388

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

SCALANCE XB-200/XP-200

SCALANCE XM-400/XR-500

Códigos DSCP 0 - 15 → Cola 1

Códigos DSCP 0 - 7 → Queue 2

Códigos DSCP 16 - 31 → Cola 2

Códigos DSCP 8 - 15 → Queue 1

Códigos DSCP 32 - 47 → Cola 3

Códigos DSCP 16 - 23 → Queue 3

Códigos DSCP 48 - 63 → Cola 4

Códigos DSCP 24 - 31 → Queue 4
Códigos DSCP 32 - 39 → Queue 5
Códigos DSCP 40 - 47 → Queue 6
Códigos DSCP 48 - 55 → Queue 7
Códigos DSCP 56 - 63 → Queue 8

Priorización QoS
Definir la prioridad
En esta página se ajusta puerto por puerto el método por el que se priorizarán los frames que
deben reenviarse.

Descripción de los valores mostrados
La tabla 1 se divide en las siguientes columnas:
● Puerto
Indica que el ajuste es válido para todos los puertos de la tabla 2.
● Modo de priorización
Seleccione el ajuste en la lista desplegable. Existen las siguientes posibilidades de ajuste:
– Priorización de puerto
– Priorización según COS
– Priorización según DSCP
– Priorización según COS-DSCP
– No hay modificaciones
La tabla 2 no cambia.
● Aplicar a tabla
Al hacer clic en este botón se aplica el ajuste a todos los puertos de la tabla 2.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2389

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla 2 se divide en las siguientes columnas:
● Port
Muestra los puertos PoE configurables.
El puerto se compone del número de módulo y del número de puerto, p. ej. el puerto 0.1 es
el módulo 0, puerto 1.
● Modo de priorización
Seleccione el modo deseado en la lista desplegable:
Nota
La priorización del puerto receptor se configura en la página "Layer 2 > VLAN > VLAN
basada en puerto".
La asignación de las prioridades siguientes a una cola se configura en la página "Layer 2
> QoS > Asignación CoS":
● Puerto receptor
● Identificador VLAN
● Frame Broadcast y de agente
La asignación de la priorización DSCP a una cola se configura en la página "Layer 2 > QoS
> Asignación DSCP".
– Priorización de puerto
El switch clasifica los frames entrantes en una cola en función de la priorización del
puerto receptor.
Si en el encabezado IP hay un valor DSCP, no se tendrá en cuenta. Si hay un
identificador VLAN se reemplazará por el valor de prioridad del puerto receptor.
– Priorización según COS
Si un frame entrante contiene un identificador VLAN, el switch lo clasifica en una cola en
función de esta priorización.
Si el frame no contiene ningún identificador VLAN, el Switch lo clasifica en una cola en
función de la priorización del puerto receptor.
Si en el encabezado IP hay un valor DSCP, no se tendrá en cuenta.
– Priorización según DSCP
Si un frame entrante contiene una priorización DSCP, el switch lo clasifica en una cola
en función de esta priorización.
Si el frame no contiene ninguna priorización DSCP, el Switch lo clasifica en una cola en
función de la priorización del puerto receptor.
Si el frame contiene un identificador VLAN no se tendrá en cuenta.
– Priorización según COS-DSCP
En un frame entrante se comprueba secuencialmente qué priorización contiene.
Si el frame contiene una priorización DSCP se tratará como en el modo "Priorización
según DSCP".
Si no contiene ninguna priorización DSCP, el switch comprobará si el frame contiene un
identificador VLAN. Si contiene un identificador VLAN, el switch lo clasifica en una cola
en función de esta priorización.
Si el frame no contiene ni una priorización DSCP ni un identificador VLAN, el switch lo
clasifica en una cola en función de la priorización del puerto receptor.

2390

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Reasignación de puertos CoS
Cambiar la prioridad al enviar
En esta página es posible cambiar la prioridad con la que se envían los frames en función de
la prioridad a la recepción.

Descripción de los campos mostrados
La página contiene los siguientes campos:
● CoS Remap
Active o desactive la posibilidad de que los frames se envíen con prioridades modificadas
de acuerdo con la tabla 2.
La tabla 1 se divide en las siguientes columnas:
● Puerto
Indica que los ajustes son válidos para todos los puertos de la tabla 2.
● Priority 0 - 7
La prioridad de la columna es aquella con la que se recibe un frame.
– 0-7
Seleccione la prioridad con la que debe enviarse un frame.
– No Change
No hay cambios en la tabla 2.
● Copy to Table
Al hacer clic en este botón se aplica el ajuste a todos los puertos de la tabla 2.
La tabla 2 se divide en las siguientes columnas:
● Port
Muestra todos los puertos disponibles. El puerto se compone del número de módulo y del
número de puerto, p. ej. el puerto 0.1 es el módulo 0, puerto 1.
● Priority 0 - 7
La prioridad de la columna es aquella con la que se recibe un frame.
Seleccione en la lista desplegable la prioridad con la que debe enviarse un frame.

Control de carga
Limitación de la velocidad de transferencia de datos entrantes y salientes
En esta página se configura la limitación de carga (número máximo de paquetes de datos por
segundo) para cada uno de los puertos. Se puede definir a qué categoría de telegramas se
aplicarán estos valores límite.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2391

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los valores mostrados
La tabla 1 se divide en las siguientes columnas:
● 1.ª columna
Indica que los ajustes son válidos para todos los puertos.
● Límite Ingress Unicast(DLF) / Límite Ingress Broadcast / Límite Ingress Multicast / Límite
Ingress Unicast
Elija el ajuste deseado.
– Activado: Activa la función.
– Desactivado: Desactiva la función
– No hay modificaciones: El ajuste de la tabla 2 no cambia.
● Velocidad de transmisión Ingress total [pkts/s]
Especifique el número máximo de paquetes entrantes. Si está registrado "No hay
modificaciones", la entrada de la tabla 2 permanece invariable.
● Velocidad de transmisión Egress [kb/s]
Especifique la velocidad de transferencia de datos para todos los telegramas salientes. Si
está registrado "No hay modificaciones", la entrada de la tabla 2 no varía.
● Aplicar a tabla
Al hacer clic en este botón se aplican los ajustes a todos los puertos de la tabla 2.
La tabla 2 se divide en las siguientes columnas:
● Puerto
Muestra todos los puertos disponibles. El puerto se compone del número de módulo y del
número de puerto, p. ej. el puerto 0.1 es el módulo 0, puerto 1.
● Límite Ingress Unicast (DLF)
Active o desactive la velocidad de transferencia de datos para limitar los telegramas Unicast
entrantes con dirección indisoluble (Destination Lookup Failure).
● Límite Ingress Broadcast
Active o desactive la velocidad de transferencia de datos para limitar los telegramas
Broadcast entrantes.
● Límite Ingress Multicast
Active o desactive la velocidad de transferencia de datos para limitar los telegramas
Multicast entrantes.
● Límite Ingress Unicast
Active o desactive la velocidad de transferencia de datos para limitar los telegramas Unicast
entrantes.

2392

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Velocidad de transmisión Ingress total [pkts/s]
Especifique el número máximo de paquetes entrantes.
● Velocidad de transmisión Egress [kb/s]
Especifique la velocidad de transferencia de datos para todos los telegramas salientes.
Nota
Redondeo de los valores, divergencia respecto al valor predeterminado
Al efectuar la entrada, tenga en cuenta que el WBM redondea a valores correctos.
En caso de haber valores configurados para Velocidad de transmisión Ingress total y
Velocidad Egress, los valores reales durante el funcionamiento pueden diferir ligeramente
de los valores ajustados.

VLAN
General
Página de configuración de VLAN
En esta página se define si el dispositivo reenvía telegramas con identificadores VLAN de
forma transparente (modo IEEE 802.1D/VLAN-unaware) o si tiene en cuenta la información de
VLAN (modo IEEE 802.1Q/VLAN-aware). Si el dispositivo está en modo "802.1Q VLAN
Bridge", es posible definir VLAN y especificar el uso de los puertos.
Las posibilidades de ajuste de esta página dependen de la selección realizada en el campo
"Modo Base Bridge".
Nota
Modificación de la "ID VLAN agente"
Cuando el PC de configuración está conectado al dispositivo directamente a través de
Ethernet y se modifica la "ID VLAN agente", el dispositivo deja de estar accesible vía Ethernet
después de la modificación.

Reglas importantes para VLAN
Tenga en cuenta las siguientes reglas para la configuración y la operación de sus VLAN:
● Los telegramas con la VLAN ID "0" se tratan como telegramas sin tag, pero conservan su
valor de prioridad.
● Todos los puertos del equipo envían por defecto telegramas sin identificador (tag) de VLAN,
para estar seguro de que la estación terminal pueda recibir dichos telegramas.
● En los dispositivos SCALANCE X está preconfigurada la VLAN ID "1" para todos los
puertos.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2393

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Si en un puerto hay conectado un dispositivo terminal, los telegramas salientes se deben
enviar sin identificador (puerto de acceso estático). Si en ese puerto hay otro switch, el
telegrama se debe dotar de identificador (Trunk Port).
● En un Trunk Port la asignación de VLAN es dinámica. Solo es posible realizar
configuraciones estáticas si el puerto, además de la propiedad Trunk Port, se registra
estáticamente como miembro de las VLAN correspondientes. Un ejemplo de configuración
estática es la asignación de grupos Multicast en determinadas VLAN.
Nota
Para SCALANCE XB-200, XC-200, XF-200BA, XP-200 y XR-300WG rigen las reglas del modo
Base Bridge "802.1Q VLAN Bridge".

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Modo Bridge
– Customer
Si utiliza el dispositivo con la función "Customer", se comportará como un IE Switch
estándar.
– Provider
Si utiliza el dispositivo con la función "Provider", además de las propiedades propias de
la función "Customer" dispondrá de la posibilidad de administrar identificadores VLAN
externos. En esta función se puede utilizar la función Túnel VLAN Q-in-Q.
● Modo Base Bridge (no para SCALANCE XM-400/XR-500)
Defina el "modo Base Bridge".
Nota
Cambiar el modo Base Bridge
Observe el apartado "Cambiar el modo Base Bridge". En él se describen los efectos en la
configuración existente.
– 802.1Q VLAN Bridge
Ajusta el modo "VLAN-aware" en el dispositivo. En este modo se tiene en cuenta la
información VLAN.
– 802.1D Transparent Bridge
Ajusta el modo "VLAN-unaware" en el dispositivo. En este modo los identificadores
VLAN no se cambian, sino que se reenvían de forma transparente. La prioridad VLAN
se evalúa para CoS. En este modo no pueden crearse VLAN. Solo hay disponible una
VLAN de gestión: VLAN 1.
● ID de VLAN
Introduzca la VLAN ID en el campo de entrada "VLAN ID". Rango de valores: 1 ... 4094.

2394

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla se divide en las siguientes columnas:
● Seleccionar
Seleccione la fila que desea borrar.
● VLAN ID
Indica la ID de VLAN. La ID de VLAN (un número entre 1 y 4094) solo puede asignarse una
vez al crear un juego de datos y no puede modificarse a posteriori. Para modificarla es
necesario borrar y volver a crear todo el registro. Pueden definirse hasta 257 VLAN.
● Nombre
Introduzca un nombre para la VLAN. El nombre solo tiene carácter informativo y no influye
en la configuración. El nombre de la VLAN debe tener como máximo 32 caracteres.
● Estado
Muestra el tipo de estado de la entrada en la tabla interna de filtros de puertos. Si aparece
"estático", significa que la dirección ha sido introducida estáticamente por el usuario. La
indicación "GVRP" significa que la configuración se ha registrado a través de un telegrama
GVRP. Sin embargo, para ello es necesario haber activado GVRP para el dispositivo.
● Tipo de Private VLAN
Muestra el tipo de PVLAN.
● Primary VLAN ID
En Secondary PVLAN muestra la ID de la Primary PVLAN correspondiente.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2395

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Transparent (solo para SCALANCE XM-400/XR-500)
Al activar este ajuste se pone una VLAN en modo transparente. Los puertos que estaban
asignados a esta VLAN como miembros o miembros sin tag se convierten en puertos
transparentes.
Esto significa que:
– La Port VLAN ID del puerto transparente se ajusta a la ID de esta VLAN.
– Los telegramas sin tag que se reciben en dichos puertos se reenvían a todos los demás
puertos transparentes también sin tag, siempre que no sean conducidos a una VLAN
estándar por una regla de protocolo o subred.
– Los telegramas que tienen el tag VLAN ID "0" y se reciben en dichos puertos se reenvían
a todos los demás puertos transparentes también con el tag VLAN ID "0", siempre que
no sean conducidos a una VLAN estándar por una regla de protocolo o subred.
– Los telegramas que tienen el tag VLAN ID de la VLAN transparente y se reciben en
dichos puertos se reenvían a todos los puertos transparentes también con el tag VLAN
ID de la VLAN transparente.
– Los demás telegramas se reenvían siguiendo las reglas normales de VLAN, de modo
que un puerto transparente se comporta como un miembro sin tag de esta VLAN.
– Todos los puertos que no eran miembros de la VLAN en cuestión o bien eran miembros
sin tag de la misma se ponen automáticamente al estado "Forbidden".
– Mientras una VLAN esté configurada como transparente no es posible modificar las
pertenencias a puertos de dicha VLAN.
– Solo es posible configurar una VLAN como transparente cada vez.
● Lista de puertos
Defina el uso del puerto. Existen las siguientes posibilidades:
– "-"
El puerto no es miembro de la VLAN indicada. En el momento de la nueva definición,
todos los puertos están identificados con "‑".
– M
El puerto es miembro de la VLAN. Los telegramas enviados en esta VLAN llevan el
identificador (tag) de VLAN correspondiente.
– R
El puerto es miembro de la VLAN. El registro se produce mediante un telegrama GVRP.
– U (mayúscula)
El puerto es miembro sin identificador de la VLAN. Los telegramas enviados en esta
VLAN no llevan identificador (tag) de VLAN. Desde ese puerto se envían telegramas sin
identificador de VLAN.
– u (minúscula)
El puerto es miembro sin identificador de la VLAN, pero la VLAN no está configurada
como VLAN del puerto. Los telegramas enviados en esta VLAN no llevan identificador
(tag) de VLAN.

2396

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
– F
El puerto no es miembro de la VLAN indicada y no es posible que la VLAN se registre
dinámicamente en ese puerto mediante GVRP. Si algún puerto en una VLAN presenta
esta opción, no puede convertirse en miembro de esta VLAN, ni siquiera aunque se
configure como puerto trunk. Se pueden configurar otros ajustes en "Layer 2 > VLAN >
VLAN basada en puerto".
– T
Esta opción solo se visualiza y no se puede seleccionar en el WBM. Este puerto es un
puerto trunk y por eso es miembro de todas las VLAN. Esta función se configura en CLI
(Command Line Interface) con el comando "switchport mode trunk".

Cambiar el modo Base Bridge en SCALANCE XB-200
VLAN-unaware (802.1D Transparent Bridge) → VLAN-aware (802.1Q VLAN Bridge)
Si cambia el modo Base Bridge de VLAN-unaware a VLAN-aware, ocurrirá lo siguiente:
● Todas las entradas Unicast estáticas y dinámicas se borrarán.
● Todas las entradas Multicast estáticas y dinámicas se borrarán.
● Con Spanning Tree puede ajustarse la siguiente compatibilidad de protocolo: STP, RSTP
y MSTP.
VLAN-aware (802.1Q VLAN Bridge) → VLAN-unaware (802.1D Transparent Bridge)
Si cambia el modo Base Bridge de VLAN-aware a VLAN-unaware, ocurrirá lo siguiente:
● Toda la información VLAN estática y dinámica se borrará.
● Se creará una VLAN de administración: VLAN 1.
● Todas las entradas Unicast estáticas y dinámicas se borrarán.
● Todas las entradas Multicast estáticas y dinámicas se borrarán.
● Con Spanning Tree puede ajustarse la siguiente compatibilidad de protocolo: STP y RSTP.
● No es posible utilizar GVRP.
● No es posible utilizar Guest VLAN.
● El servidor RADIUS no puede aplicar la asignación de VLAN.
● No es posible configurar el tipo de puerto.
● Las reglas de acceso definidas deben ser válidas para todas las VLAN. En la página
"Seguridad > ACL de gestión", para el parámetro "VLAN permitidas" debe estar definido el
valor "1-4094".

GVRP
Configuración de la función GVRP
Un telegrama GVRP permite que otro dispositivo se registre en el puerto del dispositivo para
un VID determinado. Otro dispositivo puede ser p. ej. un dispositivo terminal o un switch.
Además, el dispositivo también puede enviar telegramas GVRP a través de este puerto. Esta
página permite activar cada puerto para la funcionalidad GVRP.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2397

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
La página contiene los siguientes campos:
● GVRP
Active o desactive la función "GVRP".
La tabla 1 se divide en las siguientes columnas:
● 1.ª columna
Indica que los ajustes son válidos para todos los puertos de la tabla 2.
● Ajuste
Seleccione el ajuste. Existen las siguientes posibilidades de configuración:
– Activado
Activa el envío de telegramas GVRP.
– Desactivado
Desactiva el envío de telegramas GVRP.
– No hay modificaciones
No hay cambios en la tabla 2.
● Aplicar a tabla
Al hacer clic en este botón se aplica el ajuste a todos los puertos de la tabla 2.
La tabla 2 se divide en las siguientes columnas:
● Puerto
Muestra todos los puertos disponibles. El puerto se compone del número de módulo y del
número de puerto, p. ej. el puerto 0.1 es el módulo 0, puerto 1.
● Ajuste
Active o desactive el envío de telegramas GVRP.

VLAN basada en puerto
Procesamiento de telegramas recibidos
En esta página se define la configuración de las propiedades de puerto para la recepción de
telegramas.

Descripción de los campos mostrados
La tabla 1 se divide en las siguientes columnas:
● Puerto
Indica que los ajustes son válidos para todos los puertos.
● Prioridad / VID de puerto / Tipos de telegrama aceptados / Filtrado Ingress
Seleccione el ajuste. Si está seleccionado "No hay modificaciones", la entrada de la tabla
2 permanece invariable.
● Aplicar a tabla
Al hacer clic en este botón se aplica el ajuste a todos los puertos de la tabla 2.

2398

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla 2 se divide en las siguientes columnas:
● Puerto
Muestra los puertos y Link Aggregations disponibles. El puerto se compone del número de
módulo y del número de puerto, p. ej. el puerto 0.1 es el módulo 0, puerto 1.
● Prioridad
Seleccione la prioridad que se da a telegramas sin identificador.
La prioridad CoS (Class of Service) utilizada en el tag de VLAN. Si se recibe un telegrama
sin tag, se le asigna esta prioridad. Esta prioridad define cómo se procesa este telegrama
en comparación con otros telegramas. Existen en total ocho prioridades con los valores 0
a 7, siendo 7 la prioridad más alta (IEEE 802.1p Port Priority).
● VID de puerto
Seleccione la ID de VLAN. Solo pueden seleccionarse las IDs de VLAN que se han definido
en la página "VLAN > General".
Si un telegrama recibido no tiene ningún identificador de VLAN, se complementa con un
identificador que lleva la ID de VLAN aquí indicada, y se envía a través del puerto según las
reglas correspondientes.
● Tipos de telegrama permitidos
Especifique los tipos de telegrama que se aceptan. Existen las siguientes alternativas:
– Solo frames con identificador
El dispositivo rechaza todos los telegramas sin identificador. Los telegramas que tienen
el identificador "0" se procesan como telegramas sin identificador. El dispositivo reenvía
todos los telegramas con identificador. De lo contrario rigen las reglas de envío según
la configuración.
– Solo frames sin identificador y con identificador de prioridad
El dispositivo rechaza todos los telegramas con identificador. El dispositivo reenvía
todos los telegramas sin identificador y los telegramas con prioridad (Priority Tagged
Frames). De lo contrario rigen las reglas de envío según la configuración. Si ha
configurado el modo Bridge "Provider", el dispositivo procesará todos los telegramas
entrantes como telegramas sin identificador.
– Todos
El dispositivo reenvía todos los telegramas.
● Ingress Filtering
Especifique si la VID de los telegramas recibidos se evalúa. Existen las siguientes
posibilidades:
– Activado
La VLAN ID de telegramas recibidos determina el reenvío: Para el envío de un
telegrama con tag de VLAN, el puerto receptor debe ser miembro de la misma VLAN. En
el puerto receptor se rechazan telegramas de VLAN desconocidas.
– Desactivado
Todos los telegramas se reenvían.

Grupo VLAN basado en protocolo
Introducción
En esta página se definen grupos y se les asigna un protocolo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2399

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
La página contiene los siguientes campos:
● VLAN basada en protocolo
Active o desactive la asignación de VLAN basada en protocolo.
● Valor de protocolo
Introduzca el valor de protocolo hexadecimal.
Algunos ejemplos son:
– Profinet: 88:92
– IP: 08:00
– Novell: 81:37
– netbios: f0:f0
– appletalk: 80:9b
● ID del grupo
Introduzca la ID del grupo.
La tabla se divide en las siguientes columnas:
● Valor de protocolo
Muestra el valor del protocolo.
● ID del grupo
Muestra la ID de grupo.

Puerto VLAN basado en protocolo
Introducción
En esta página se define qué protocolo y qué VLAN se asignan a cada puerto.

Descripción de los campos mostrados
● Puerto
Seleccione el puerto deseado. Se muestran todos los puertos disponibles y las Link
Aggregations.
● ID del grupo
Seleccione la ID del grupo en la lista desplegable. La ID se define en la página del WBM
"Layer 2 > VLAN > Grupo VLAN basado en protocolo".
La tabla se divide en las siguientes columnas:
● Puerto
Se muestran todos los puertos disponibles y las Link Aggregations.
● ID del grupo
Muestra la ID de grupo asignada al puerto.
● VLAN ID
Seleccione la ID de VLAN que debe asignarse al puerto.

2400

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

VLAN basada en subred IPv4
Introducción
En esta página se define qué ID de VLAN se asigna a la subred.

Descripción de los campos mostrados
La página contiene los siguientes campos:
● VLAN basada en subred
Active o desactive la asignación VLAN basada en subred IPv4.
● Puerto
Seleccione el puerto. Se muestran todos los puertos disponibles y las Link Aggregations.
● Dirección de subred
Introduzca la dirección IP de la subred.
Ejemplo: 192.168.10.0 para la red 192.168.10.x con los dispositivos 192.168.10.1 a
192.168.10.254.
● Máscara de subred
Introduzca la máscara de subred.
La tabla se divide en las siguientes columnas:
● Puerto
Se muestran todos los puertos disponibles y las Link Aggregations.
● Dirección de subred
Muestra la subred asignada al puerto.
● Máscara de subred
Muestra la máscara de subred asignada al puerto.
● VLAN ID
Seleccione la ID de VLAN que desea asignar al puerto o a la subred.

VLAN basada en prefijo IPv6
Introducción
En esta página se define qué VLAN ID se asigna al prefijo IPv6.

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Port
Seleccione el puerto en la lista desplegable. Se muestran todos los puertos disponibles y
las Link Aggregations.
● Prefix Address
Introduzca la dirección IPv6.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2401

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Prefix Length
Indique el número de bits a la izquierda que forman parte del prefijo
● VLAN ID
Seleccione la VLAN ID que desea asignar al puerto o al prefijo.
La tabla se divide en las siguientes columnas:
● Select
Seleccione la fila que desea borrar.
● Port
Se muestran todos los puertos disponibles y las Link Aggregations.
● Prefix Address
Muestra la dirección IPv6 del puerto.
● Prefix Length
Indica la longitud de prefijo.
● VLAN ID
Seleccione la VLAN ID que desea asignar al puerto o al prefijo.

Private VLAN
General
Página de configuración de VLAN privada
En esta página se definen los tipos de PVLANs y se asignan Secondary PVLANs a una Primary
PVLAN.
Nota
En todos los dispositivos de una PVLANs deben conocerse todas las Secondary PVLANs.
Aunque un dispositivo no tenga ningún puerto host en una Secondary PVLAN, la Secondary
PVLAN debe ser conocida en el dispositivo.

2402

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
La tabla se divide en las siguientes columnas:
● VLAN ID
Indica la VLAN ID.
● Tipo de Private VLAN
Especifique el tipo de PVLAN:
– Primary
Con este tipo se define una Primary PVLAN. En una PVLAN solo se puede definir una
Primary PVLAN. La Primary PVLAN utiliza la ID VLAN de la VLAN.
– Isolated
Con este tipo se define una Secondary PVLAN. En esta Secondary PVLAN solo puede
haber un dispositivo. La Secondary PVLAN tiene una ID de VLAN específica.
– Community
Con este tipo se define una Secondary PVLAN. Los dispositivos de esta Secondary
PVLAN pueden comunicarse entre sí a través de Layer 2. La Secondary PVLAN tiene
una ID de VLAN específica.
● Primary VLAN ID
En Secondary PVLANs seleccione la ID de VLAN de la Primary PVLAN.

Asignación de interfaces IP
Página de configuración de VLAN privada
En esta página se determina desde qué Secondary PVLAN debe ser accesible la interfaz IP de
la Primary PVLAN. Configure la asignación de interfaces IP para todas las funciones en las que
un terminal de la Secondary PVLAN deba comunicarse a través de la interfaz IP de la Primary
PVLAN.
Ejemplos:
● Un terminal de la Secondary PVLAN está configurado como cliente DHCP. Se ha instalado
un servidor DHCP remoto. Se ha configurado un switch PVLAN como DHCP Relay Agent.
Configure una interfaz IP en la Primary PVLAN del DHCP Relay Agent. Asigne a esa
interfaz IP las Secondary PVLAN en las que hay clientes DHCP.
● Se ha configurado un switch PVLAN como router. Configure una interfaz IP en la Primary
PVLAN del router. Asigne a esa interfaz IP las Secondary PVLAN en las que hay terminales
que utilizan el router como pasarela.

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Interfaz
Seleccione una Primary PVLAN con una interfaz IP.
● Secondary VLAN-ID
Seleccione una Secondary VLAN ID desde la cual debe ser accesible la interfaz IP de la
Primary PVLAN.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2403

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla se divide en las siguientes columnas:
● Select
Seleccione la fila que desea borrar.
● Interface
Muestra la interfaz IP.
● Secondary VLAN ID
Muestra la Secondary VLAN ID de la Secondary PVLAN desde la cual está accesible la
interfaz IP de la Primary PVLAN.

Provider Bridge
Puertos túnel
Página de configuración para puertos túnel
En esta página se activa la función túnel VLAN Q-in-Q. Los telegramas que recibe un puerto
túnel se amplían con un tag VLAN externo (el PVID del puerto).

Descripción de los campos mostrados
La tabla 1 se divide en las siguientes columnas:
● 1.ª columna
Indica que los ajustes son válidos para todos los puertos de la tabla 2.
● Setting
Seleccione el ajuste en la lista desplegable. Existen las siguientes posibilidades de
configuración:
– Enabled
Activa la función Túnel VLAN Q-in-Q VLAN en todos los puertos.
– Disabled
Desactiva la función Túnel VLAN Q-in-Q VLAN en todos los puertos.
– No Change
La tabla 2 no cambia.
● Copy to Table
Al hacer clic en este botón se aplican los ajustes a todos los puertos de la tabla 2.
La tabla 2 se divide en las siguientes columnas:
● Port
Muestra todos los puertos disponibles. El puerto se compone del número de módulo y del
número de puerto, p. ej. el puerto 0.1 es el módulo 0, puerto 1.
● Setting
Active o desactive la función para este puerto.

2404

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Mirroring
Principios básicos
Mirroring
El dispositivo ofrece la posibilidad de desviar flujos de datos entrantes o salientes
paralelamente a otras interfaces para analizarlos o visualizarlos. Esto no produce
perturbaciones en los flujos de datos observados. Este método se denomina "mirroring" o
duplicado. En este punto del menú se activa y desactiva la función de duplicado y se ajustan
parámetros.

Duplicación de puertos
Duplicar un puerto significa que el tráfico de datos en un puerto (puerto duplicado) del IE Switch
se copia a otro puerto (puerto de monitor). En un puerto de monitor es posible duplicar uno o
varios puertos.
Si se conecta un analizador de protocolos al puerto de monitor, puede registrarse el tráfico de
datos en el puerto duplicado sin interrumpir la conexión en este. Esto permite investigar sin
repercusiones el tráfico de datos. Condición necesaria para ello es que el dispositivo disponga
de un puerto libre para actuar como puerto monitor.

General
Nota
No es posible garantizar que durante el duplicado del tráfico de datos se dupliquen todos los
paquetes. Esto depende especialmente de la carga que deban soportar los puertos duplicados
y del número de sesiones. Para conseguir la máxima precisión se recomienda limitar el
duplicado a una sesión.

Aspectos generales del duplicado
En esta página se activa o desactiva la función "Mirroring" y se llevan a cabo los ajustes
básicos.
Nota
La duplicación de un puerto no funciona cuando se sobrepasan los límites del núcleo del
switch. Consulte también al respecto las instrucciones de servicio del dispositivo.
Nota
Debe desactivar la duplicación de puertos si conecta un terminal normal al puerto monitor. Esto
no se aplica al Function Extender BUS ANALYZER Agent XM-400.
Observar la velocidad de transmisión

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2405

Configuración de dispositivos y redes
1.4 Crear configuraciones
Si la tasa de datos máxima del puerto duplicado es mayor que la del puerto monitor, se pueden
producir pérdidas de datos y el puerto monitor ya no reproduciría los procesos del puerto
duplicado. En un puerto monitor se pueden duplicar varios puertos simultáneamente.
RSPAN
RSPAN (Remote Switched Port Analyzer) permite dirigir el tráfico de datos de una sesión
Mirroring al puerto de monitor a través de una VLAN. En la RSPAN VLAN, el tráfico de datos
reflejado no queda perturbado por otros datos.
Los frames direccionados directamente al origen de la reflexión no pueden reflejarse en el
puerto RSPAN de destino.

Ajustes
● Mirroring
Active o desactive la duplicación del tráfico de datos.
● Monitor Barrier
Active o desactive este ajuste para limitar la comunicación a través del puerto de monitor.
Nota
Repercusiones de Monitor Barrier
Si se activa este ajuste no será posible acceder a la administración del switch a través del
puerto de monitor. Se cambian las siguientes funciones específicas de puerto:
● Reenvío DCP se desactiva
● LLDP se desactiva
● El bloqueo Unicast, Multicast y Broadcast se activa
Los estados anteriores de estas funciones no se restablecen una vez ha finalizado Monitor
Barrier. Se restablecen sus valores predeterminados y deben volver a configurarse en caso
necesario.
Estas funciones pueden configurarse manualmente aunque Monitor Barrier esté activado.
Sin embargo, con ello se habilita de nuevo el tráfico de datos correspondiente en el puerto
monitor. Si no desea que esto suceda, asegúrese de que solo llegue a la interfaz el tráfico
de datos que debe observarse.
Si se desactiva Mirroring se restablecen los valores predeterminados de las funciones
específicas de puerto que se han mencionado. Dicho restablecimiento tiene lugar
independientemente de si las funciones se han configurado manual o automáticamente
mediante la activación de "Monitor Barrier".
Nota
Function Extender BUS ANALYZER Agent XM-400
Si el puerto de destino es un puerto del Function Extender BUS ANALYZER Agent XM-400,
la opción Monitor Barrier está siempre activada. Se activa independientemente de si se
había activado o desactivado la casilla de verificación.
● RSPAN VLAN ID
Seleccione una VLAN en la que el tráfico de datos de una sesión de duplicado se envíe sin
fallos.

2406

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla de ajustes básicos tiene los siguientes campos:
● Session ID
La Session ID se asigna automáticamente al crear una nueva entrada.
● Tipo de sesión
Seleccione la entrada deseada:
– '-'
ninguno
– Basado en puerto
Duplicado basado en puerto.
– VLAN
Duplicado basado en VLAN.
– MAC ACL
Duplicado de la MAC Access Control List.
– IP ACL
Duplicado de la IP Access Control List.
Nota
Si se ha creado una sesión del tipo "VLAN", "MAC ACL" o "IP ACL" no es posible crear más
sesiones. En cambio, pueden crearse hasta 7 sesiones del tipo "Basado en puerto".
Nota
Cuando se modifica el "Tipo de sesión" de una sesión en curso se pierden todas las
configuraciones actuales de la sesión.
● Estado
Indica si el duplicado está activo o no.
● Índice de hardware
Si en una VLAN se selecciona más de un puerto de origen para el Egress Mirroring basado
en puerto, los telegramas Unicast y Multicast desconocidos, además de los telegramas
Broadcast, solo se reenviarán una vez al puerto de destino. Si hay varias sesiones, los
telegramas en cuestión solo serán visibles en una sesión. Solo se duplican en el puerto de
destino con el índice de hardware más bajo.
● Puerto de destino
Elija el puerto de destino en el que se realizará el duplicado para esta sesión.
Nota
Function Extender BUS ANALYZER Agent XM-400
Si se conecta un Function Extender BUS ANALYZER Agent XM-400 a un aparato básico
SCALANCE XM-400, es posible seleccionar como puertos de destino hasta cuatro puertos
del Function Extender BUS ANALYZER Agent XM-400. El Function Extender BUS
ANALYZER Agent XM-400 soporta el duplicado basado en puerto, basado en VLAN,
basado en MAC ACL y basado en IP ACL.
● RSPAN
Active o desactive RSPAN para una sesión.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2407

Configuración de dispositivos y redes
1.4 Crear configuraciones

Puerto
Duplicación de puertos
Los ajustes de esta página solo se pueden configurar si previamente se ha generado una ID
de sesión de tipo "Basado en puerto" en la ficha "General".

Descripción de los campos mostrados
● ID de sesión
Seleccione la sesión que debe vigilarse. Son posibles hasta 7 sesiones paralelas cuyos
puertos no deben solaparse.
La tabla se divide en las siguientes columnas:
● Puerto
Indica el puerto que debe vigilarse.
● Ingress Mirroring
Active o desactive en el puerto deseado la escucha de los paquetes entrantes.
● Egress Mirroring
Active o desactive en el puerto deseado la escucha de los paquetes salientes.

VLAN
Orígenes VLAN de la duplicación de puertos
Los ajustes de esta página solo se pueden configurar si previamente se ha generado una ID
de sesión de tipo "VLAN" en la pestaña "General".
En esta página se especifica la VLAN cuyo tráfico de datos entrante se duplicará en el puerto
monitor.
Puede ocurrir que en el puerto Monitor sean visibles paquetes de datos que no se hayan
recibido en la VLAN definida. Estos paquetes de datos proceden de funciones activadas en el
dispositivo, p. ej. SIMATIC Time Client. Para evitar estos paquetes de datos en la reflexión de
VLAN, desactive las funciones correspondientes en el dispositivo antes del registro.

Descripción de los campos mostrados
La página contiene los siguientes campos:
● ID de sesión
Seleccione la sesión que debe vigilarse. Solo es posible una sesión.
● VLAN ID
Introduzca la VLAN ID en el campo de entrada "VLAN ID". Rango de valores: 1 ... 4094

2408

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla "Ingress Mirroring" se divide en las siguientes columnas:
● VLAN-ID
Indica la VLAN ID para la que se duplicarán los telegramas entrantes. La ID de VLAN solo
puede asignarse una sola vez al crear un registro y no puede modificarse posteriormente.
Para modificarla es necesario borrar y volver a crear todo el registro.

MAC Flow
Filtro ACL para la duplicación de puertos
Los ajustes de esta página solo se pueden configurar si previamente se ha generado una ID
de sesión de tipo "MAC ACL" en la pestaña "General".
El filtro MAC ACL determina los datos que se preparan en el puerto de monitor.

Descripción de los campos mostrados
● ID de sesión
Seleccione la sesión que debe vigilarse. Solo es posible una sesión.
La tabla se divide en las siguientes columnas:
● Número de filtro ACL
Muestra el número del filtro ACL. El filtro ACL MAC se configura en "Security > MAC ACL".
● Ingress Mirroring
Indica si se duplican paquetes entrantes.
Nota
Reglas
La regla seleccionada solo se activa cuando se especifican para una interfaz como mínimo
las reglas ACL por las que se filtrarán los paquetes entrantes. Estos ajustes se configuran
en "Seguridad > MAC ACL > Reglas Ingress".
● Dirección MAC de origen
Muestra la dirección MAC del remitente.
● Dirección MAC de destino
Muestra la dirección MAC del destinatario.
● Interfaces Ingress
Muestra todas las interfaces para las que rige la regla. El filtro ACL determina los flujos de
datos entrantes que se duplicarán en el puerto monitor (puerto de destino).
● Interfaces Egress
Muestra todas las interfaces para las que rige la regla.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2409

Configuración de dispositivos y redes
1.4 Crear configuraciones

IP Flow
Filtro ACL para la duplicación de puertos
Los ajustes de esta página solo se pueden configurar si previamente se ha generado una ID
de sesión de tipo "IP ACL" en la pestaña "General".
El filtro ACL determina los datos que se preparan en el puerto de monitor.

Descripción de los campos mostrados
● ID de sesión
Seleccione la sesión que debe vigilarse. Solo es posible una sesión.
La tabla se divide en las siguientes columnas:
● Número de filtro ACL
Muestra el número del filtro ACL.
● Ingress Mirroring
Indica si se duplican paquetes entrantes.
Nota
Reglas
La regla seleccionada solo se activa cuando se especifican para una interfaz como mínimo
las reglas ACL por las que se filtrarán los paquetes entrantes. Estos ajustes se configuran
en "Seguridad > IP ACL > Reglas Ingress".
● Dirección IP de origen
Muestra la dirección IPv4 del remitente.
● Máscara de subred de origen
Muestra la máscara de subred del remitente.
● Dirección IP de destino
Muestra la dirección IPv4 del destinatario.
● Máscara de subred de destino
Muestra la máscara de subred del destinatario.
● Interfaces Ingress
Muestra todas las interfaces para las que rige la regla. El filtro ACL determina los flujos de
datos entrantes que se duplicarán en el puerto monitor (puerto de destino).
● Interfaz Egress
Muestra todas las interfaces para las que rige la regla. El filtro ACL determina los flujos de
datos salientes que se duplicarán en el puerto monitor (puerto de destino).

2410

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Dynamic MAC Aging
Ajustes de protocolo y funcionalidad Switch
El dispositivo aprende automáticamente las direcciones de origen de los dispositivos
conectados. Esta información se utiliza en el dispositivo para transmitir directamente
telegramas de datos a los dispositivos afectados. Se reduce la carga de red para los otros
dispositivos.
Si un equipo no recibe dentro un determinado período de tiempo ningún telegrama cuya
dirección de origen coincida con una dirección memorizada, borra la dirección en cuestión. A
este mecanismo se le da el nombre de "Aging". Mediante Aging se evita que se envíen
telegramas a direcciones incorrectas, si por ejemplo un terminal (p. ej. una programadora) se
conecta a otro puerto. Si la opción no está activada, el dispositivo no borra automáticamente
las direcciones aprendidas.

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Dynamic MAC Aging
Active o desactive la función para el Aging automático de direcciones MAC aprendidas:
● Aging Time [s]
Introduzca el intervalo en segundos. Tras ese intervalo se borra una dirección aprendida si
el dispositivo no recibe más telegramas de esa dirección. Rango de valores: 10 - 630
segundos

Redundancia de anillo
Anillo
Configuración de fábrica
La configuración de fábrica define MSTP como método de redundancia y los siguientes
puertos en anillo:
Dispositivos

Ajuste de fábrica de los puertos en anillo

SCALANCE XB208 y XB216

P0.1 y P0.2

SCALANCE XB205-3

P0.7 y P0.8

SCALANCE XB213-3

P0.15 y P0.16

SCALANCE XC206-2SFP, XC208, XC216 y
XC224

P0.1 y P0.2

SCALANCE XC206-2

P0.7 y P0.8

SCALANCE XF-200BA

P1.1 y P2.1

SCALANCE XP208

P0.1 y P0.2

SCALANCE XP216

P0.10 y P0.12

SCALANCE XR324WG

P0.1 y P0.2

SCALANCE XR328‑4C WG

P0.25 y P0.26

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2411

Configuración de dispositivos y redes
1.4 Crear configuraciones
Dispositivos

Ajuste de fábrica de los puertos en anillo

SCALANCE XM-400

P1.1 y P1.2

SCALANCE XR-500

P0.1 y P0.2

Activar la redundancia del anillo
La redundancia del anillo se activa del siguiente modo:
● desde el WBM
● desde la CLI
● mediante el pulsador SELECT/SET
● por medio de una descarga de configuración PNIO

2412

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Ajustes
● Redundancia de anillo
Si activa la casilla de verificación "Redundancia de anillo", se conecta la redundancia de
anillo. Se utilizan los puertos de anillo ajustados en esta página.
● Método de redundancia de anillo
Defina el modo de redundancia del anillo. Los modos disponibles son los siguientes:
– Automatic Redundancy Detection
Seleccione este ajuste para una configuración automática del modo de redundancia.
En modo "Automatic Redundancy Detection", el dispositivo determina automáticamente
si hay un dispositivo con la función de "Administrador HRP" en el anillo. De ser así, el
dispositivo adopta la función de "Cliente HRP". Si no se encuentra ningún administrador
HRP, todos los dispositivos con el ajuste "Automatic Redundancy Detection" o
"Administrador automático MRP" negocian entre sí cuál de ellos adopta la función de
"Administrador MRP". El dispositivo con la dirección MAC de valor más bajo siempre
pasa a ser "Administrador MRP". Los demás dispositivos se ajustan automáticamente
al modo "Cliente MRP".
– MRP Auto Manager
En modo "Administrador automático MRP", los dispositivos negocian entre sí cuál de
ellos adopta la función de "Administrador MRP". El dispositivo con la dirección MAC de
valor más bajo siempre pasa a ser "Administrador MRP". Los demás dispositivos se
ajustan automáticamente al modo "Cliente MRP". A diferencia del ajuste "Automatic
Redundancy Detection", los dispositivos no son capaces de reconocer si hay un
administrador HRP en el anillo.
Nota
Configuración MRP en STEP 7
Si desde STEP 7 se ha ajustado la función "Manager (Auto)" o "Manager" para el
dispositivo, en esta página del WBM se mostrará en ambos casos "Administrador
automático MRP". En la visualización de la CLI se distinguen las dos funciones.
– MRP Client
El dispositivo adopta la función de cliente MRP.
– HRP Client
El dispositivo adopta la función de cliente HRP.
– HRP Manager
El dispositivo adopta la función de administrador HRP. Al configurar un anillo HRP, debe
ajustarse un dispositivo como administrador HRP. En todos los demás dispositivos debe
estar ajustado "Cliente HRP" o "Automatic Redundancy Detection".
● Puertos en anillo
Aquí se ajustan los puertos que se deben utilizar como puertos en anillo para la
redundancia de anillo. El puerto en anillo seleccionado en el menú desplegable de la
izquierda es el "Isolated Port" en HRP. Para MRP, en el establecimiento del Link se decide
qué puerto se convierte en "Isolated Port".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2413

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Observer
Active o desactive el Observer. La función "Observer" solo está disponible en anillos HRP.
El puerto en anillo seleccionado en el menú desplegable de la izquierda se conecta al
"Isolated Port" de un administrador HRP.
El Observer vigila funciones incorrectas del administrador de redundancia o
configuraciones incorrectas de un anillo HRP.
Cuando el Observer está activado puede interrumpir el anillo conectado en caso de
detectar errores. Para ello, el Observer conmuta un puerto del anillo al estado "blocking".
Una vez solucionado el error, el Observer vuelve a habilitar el puerto.
● Reiniciar Observer(solo disponible online)
Si se producen muchos errores continuados, el Observer no vuelve a habilitar su puerto por
cuenta propia. El puerto en anillo permanece en estado "blocking". Esto se señaliza
mediante el LED de error y un texto de aviso.
Una vez solucionado el error puede volver a habilitar el puerto pulsando el botón "Reiniciar
Observer".

Restablecer los ajustes de fábrica
Si se restauran los ajustes de fábrica (Reset to Factory Defaults), la redundancia de anillo está
desactivada y se seleccionan los puertos en anillo preconfigurados. Esto puede provocar una
circulación continua de telegramas y el fallo del tráfico de datos si se usaron otros ajustes en
una configuración anterior.

Cambiar el estado de los puertos en anillo en el administrador de redundancia
Si se configura un administrador de redundancia debe definirse el estado de los puertos en
anillo. El primer puerto en anillo pasa al estado "blocking" y el segundo al estado "forwarding".
Estando activada la redundancia de anillo es posible cambiar el estado de estos puertos en
anillo.
Nota
Asegúrese de abrir primero el anillo para que no haya telegramas en círculo.

Cambiar los puertos en anillo
Es posible cambiar los puertos en anillo sin abrir el anillo. Proceda del siguiente modo para
cambiar los puertos en anillo:
● Vaya a la página "Layer 2 > Spanning Tree > Puerto CIST".
● Desactive los puertos del Spanning Tree que desee configurar como puertos en anillo.
● Se pueden configurar otros ajustes en "Layer 2 > Redundancia de anillo > Anillo".
● Seleccione los nuevos puertos en anillo.
● Cambie los cables.
● Vaya a la página "Layer 2 > Spanning Tree > Puerto CIST".
● Active los puertos del Spanning Tree que ya no sean puertos en anillo.

2414

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Standby
Acoplamiento redundante de anillos
La redundancia Standby permite el acoplamiento redundante de anillos HRP. Para establecer
una conexión Standby deben configurarse dos dispositivos vecinos de un anillo como maestro
Standby y esclavo Standby respectivamente. El maestro Standby y el esclavo Standby deben
conectarse a dos dispositivos de otro anillo por medio de líneas paralelas. Cuando no hay
fallos, los mensajes circulan entre los dos anillos a través del maestro. Si la línea del maestro
se avería, el esclavo se encarga de reenviar los mensajes entre los dos anillos. Active la
redundancia Standby para ambos interlocutores Standby y seleccione a través de qué puertos
está conectado el dispositivo con los anillos que deben acoplarse. Como "Standby Connection
Name" se tiene que asignar a ambos interlocutores un nombre unívoco en el anillo, con el que
se puedan identificar los dos equipos correspondientes como interlocutores Standby.
Nota
Para utilizar la función, ha de estar activado HRP.
El administrador Standby exige siempre que esté activado un cliente o administrador HRP.
Nota
Acoplamiento de maestro Standby con conexión óptica de 100 Mbits/s
Mientras el interlocutor de acoplamiento de un maestro Standby con una conexión óptica de
100 Mbits/s arranca de nuevo, desconecte físicamente la conexión entre el maestro Standby
y su interlocutor de acoplamiento.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2415

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
● Standby
Active o desactive esta función.
Nota
Si dos equipos están acoplados a través de la función Standby, tiene que estar activada la
función "Standby" en ambos equipos.
● Puerto Standby
Seleccione el puerto que será Standby. A través del puerto Standby se realiza el
acoplamiento con el otro anillo.
Nota
Nota
Puertos Standby en Spanning Tree
Antes de poder activar el puerto como Standby hay que desconectarlo del Spanning Tree.
1. Vaya a la página "Layer 2 > Spanning Tree > Puerto CIST".
2. Desactive los puertos del Spanning Tree que desee configurar como puertos Standby.
El puerto Standby participa en el desvío del tráfico de datos. Si no hay perturbaciones, solo
el puerto Standby del maestro está activo y se encarga del tráfico de datos en la línea o
anillo HRP conectado.
Si falla el maestro o la conexión Ethernet (link) de un puerto Standby del maestro, se
desconecta el puerto Standby del maestro y se activa el puerto Standby del esclavo. De
este modo se restablece una conexión Ethernet operativa en el segmento de red conectado
(anillo o línea HRP).
● Nombre de la conexión Standby
Con este nombre se define la pareja de equipos maestro/esclavo. Ambos equipos deben
estar en el mismo anillo.
Introduzca aquí el nombre para la conexión Standby. Este debe ser idéntico al nombre
introducido para el interlocutor de Standby. El nombre se puede elegir libremente, pero solo
se debe utilizar para una pareja de equipos en toda la red.

2416

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Forzar modo maestro de reserva
Si está activado este ajuste, el dispositivo se configurará como maestro Standby
independientemente de su dirección MAC.
– Si esta casilla de verificación no está seleccionada en ninguno de los dos equipos que
tienen activado el Standby Manager, el equipo que tiene la dirección MAC más alta
asume la función de maestro Standby, siempre que no haya errores.
– Si esta opción está seleccionada en ambos equipos o si solo uno de los equipos soporta
la propiedad "Forzar modo maestro de reserva", el maestro Standby también se
selecciona en función de la dirección MAC.
Este tipo de asignación es importante ante todo en caso de sustitución de dispositivos.
Dependiendo de las direcciones MAC, el equipo que desempeñaba hasta el momento la
función de esclavo puede asumir ahora el papel de maestro Standby.
Nota
Si la opción "Forzar modo maestro de reserva" está activada en los dos dispositivos de un
acoplamiento Standby, es posible que se produzca una circulación de telegramas y, por
consiguiente, que falle el tráfico de datos. Active la opción "Forzar modo maestro de
reserva" en un solo dispositivo de un acoplamiento Standby.
● Esperando al interlocutor de reserva
– Activado
Una conexión Standby no se activa hasta que el maestro Standby y el esclavo Standby,
así como sus interlocutores, hayan establecido una conexión. De este modo se
garantiza que la conexión redundante esté realmente disponible antes de que se active
la comunicación por una conexión Standby.
– Desactivado
Una conexión Standby se activa aunque el maestro Standby no haya establecido la
conexión con el esclavo Standby.
Esto puede provocar una circulación continua de telegramas y el fallo del tráfico de
datos si ya se ha activado otra conexión Standby. Pueden generarse varias conexiones
Standby debido a errores de configuración, por ejemplo, cuando en el maestro Standby
y en el esclavo Standby se han asignado nombres distintos para la conexión Standby.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2417

Configuración de dispositivos y redes
1.4 Crear configuraciones

Link Check
Requisitos
● Link Check no se puede activar en puertos con 10 Gbits/s.
● Solo es posible activar la función Link Check para puertos ópticos de un anillo HRP o MRP.
Nota
Sustitución de módulos de medios: óptico → eléctrico
En caso de utilizar Link Check en un puerto óptico de un módulo de medios debe tenerse
en cuenta lo siguiente:
● Link Check está activado en el puerto óptico de un módulo de medios.
● Desea cambiar el módulo de medios por un módulo sin puertos ópticos.
1. Desactive Link Check en los puertos del módulo insertado.
2. Sustituya el módulo de medios.
● Link Check debe activarse en dos dispositivos colindantes (interlocutores de la conexión)
dentro de un anillo HRP o MRP.
● Los puertos en anillo en los que se active Link Check deben estar conectados entre sí.

Vigilancia de conexiones ópticas en el anillo
La función Link Check permite vigilar la calidad de transmisión de los trayectos ópticos dentro
de un anillo HRP o MRP, identificar trayectos de transmisión averiados y desconectarlos en
determinadas circunstancias. Cuando el trayecto averiado está desconectado, el
administrador de redundancia puede cerrar el anillo y restablecer la comunicación.
ATENCIÓN
Asegúrese de que los telegramas que utiliza Link Check para vigilar las conexiones ópticas
no queden arrinconados en la red debido a una sobrecarga de telegramas de mayor prioridad.
Una sobrecarga de telegramas de alta prioridad puede tener las causas siguientes, p. ej.:
● Bucles de red que pueden provocar una multiplicación de los telegramas de alta prioridad
● Modificación de las prioridades para el reenvío de telegramas
Nota
No active Link Check en uno solo de los dos interlocutores. Esto podría provocar un
comportamiento erróneo.

2418

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Nota
Si Link Check está activado simultáneamente en todos los dispositivos de un anillo y hay varias
conexiones defectuosas dentro del anillo, se producirá una fragmentación del anillo.
1. Al realizar la puesta en marcha, conecte la función Link Check sucesivamente para un
trayecto de conexión tras otro activando Link Check en los dos interlocutores de una
conexión que están conectados a un trayecto.
2. Para garantizar una conexión correcta, espere 1 minuto cada vez antes de activar Link
Check en el próximo trayecto de conexión.

Descripción de los campos mostrados
La tabla contiene las siguientes columnas:
● Port
Muestra los puertos disponibles. El puerto se compone del número de módulo y del número
de puerto, p. ej. el puerto 0.1 es el módulo 0, puerto 1.
● Setting
Esta casilla de verificación activa o desactiva la función Link Check para un puerto.
Si la vigilancia de la conexión está activa, el número de telegramas de test Link Check
enviados y recibidos puede visualizarse en la página "Information > Redundancy > Link
Check".
● Reset
Una vez inicializado Link Check se reinicia la función en el puerto y la estadística se pone
a cero.
Cuando se utiliza el botón "Reset" hay que inicializar los dos interlocutores de la conexión
en un intervalo de 30 s.
Nota
El uso del botón "Reset" puede provocar bucles breves y con ello el fallo del tráfico de datos.
El bucle se deshace por sí mismo.
Si su caso de aplicación no permite que esto suceda, inicialice Link Check extrayendo el
cable de conexión y volviendo a enchufarlo.

Interconexión MRP
Acoplamiento redundante de anillos
En esta página se crean, borran y configuran conexiones de interconexión MRP.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2419

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
● Interconexión MRP
Marque esta casilla de verificación para activar la interconexión MRP para el dispositivo.
Solo es posible activar la interconexión MRP si se cumplen los siguientes requisitos:
– La redundancia de anillo está activada.
– El método de redundancia de anillo utilizado es "Administrador MRP" o "Cliente MRP".
– Hay una conexión de interconexión MRP activada.
La tabla se divide en las siguientes columnas:
● Seleccionar
Seleccione la fila que desea borrar.
● ID de interconexión
Introduzca la ID de la conexión de interconexión MRP. Tenga en cuenta las reglas
siguientes a la hora de asignar la ID:
– La ID de interconexión no debe ser 0.
– Para los cuatro dispositivos que se utilizan para el acoplamiento de los anillos debe
configurarse la misma ID de interconexión.
● Nombre de la interconexión
Introduzca un nombre cualquiera para la conexión de interconexión MRP. Para los cuatro
dispositivos que se utilizan para el acoplamiento de los anillos pueden definirse nombres
distintos. Los caracteres permitidos para dichos nombres son las letras 'A' a 'Z' y 'a' a 'z', así
como los números '0' a '9' y el carácter '-'. El primer y último carácter del nombre no puede
ser un guion. El nombre de la interconexión debe tener como mínimo un carácter y como
máximo 240 caracteres.
● Puerto de la interconexión
Seleccione en la lista desplegable el puerto que se utiliza para la conexión de interconexión
MRP. Observe las siguientes restricciones:
– El puerto no debe estar desactivado ni bloqueado. La función "Bloqueo de Unicast" no
debe estar activada para el puerto.
– El puerto no debe utilizarse para una Link Aggregation.
– El puerto no debe ser un puerto Monitor de la función "Mirroring".
– El puerto no debe ser un puerto Spanning Tree.
– El puerto no debe ser un puerto en anillo.
– El puerto no debe ser un puerto router.
– El puerto debe ser miembro de "vlan1".
– El puerto debe tener activado LLDP (Tx y Rx).
– El puerto no debe ser un puerto Authenticator 802.1X.
– El puerto no debe ser un puerto Supplicant 802.1X.
● Esperar
Si esta casilla de verificación está activada, la configuración de los cuatro dispositivos de un
acoplamiento de interconexión MRP espera hasta que se registra la transferencia de datos.

2420

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Función/posición
Seleccione la función en esta lista desplegable y, para la función "Cliente", la posición del
cliente. Existen las siguientes posibilidades de selección:
– Administrador
– Primary Client
– Secondary Client
● Estado
Marque esta casilla de verificación para activar la conexión de interconexión MRP. Observe
las siguientes reglas:
– Si no hay como mínimo una conexión de interconexión MRP activada, no es posible
activar la interconexión MRP para el dispositivo.
– Como máximo puede haber una conexión de interconexión MRP activada.

Spanning Tree
General
Ajustes generales de MSTP
Esta es la página principal de Spanning Tree. Seleccione el modo de compatibilidad en la lista
desplegable. En las páginas de configuración correspondientes a estas funciones pueden
efectuarse otros ajustes. En función del modo de compatibilidad, puede ajustarse la función
correspondiente en la página de configuración respectiva.

Ajustes
● Spanning Tree
Active o desactive Spanning Tree.
● Compatibilidad de protocolo
Seleccione el modo de compatibilidad de MSTP. Si selecciona RSTP, por ejemplo, MSTP
se comporta como un RSTP.
Existen los siguientes ajustes:
– STP
– RSTP
– MSTP

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2421

Configuración de dispositivos y redes
1.4 Crear configuraciones
● RSTP+
RSTP+ permite acoplar un segmento de red que tiene activado Spanning Tree con un anillo
MRP. Asegúrese de que se cumplen los requisitos siguientes antes de activar esta casilla
de verificación:
– MRP debe estar activado como método de redundancia.
– Si la redundancia de anillo está activada deben desactivarse los puertos en anillo para
Spanning Tree.
Cuando se activa RSTP+, los puertos en anillo pasan a formar parte tanto del anillo MRP
como del segmento de red Spanning Tree.
● ID de dominio de interconexión MRP para RSTP+
Configure aquí la ID de dominio de la interconexión MRP para RSTP+. Este valor no debe
coincidir con la ID de dominio de la interconexión MRP que se ha configurado para la
conexión activa de interconexión MRP.

Consulte también
General (Página 2433)
Puerto MST (Página 2428)
MST General (Página 2427)

CIST general/ST general
La página consta de las siguientes partes:
● La parte izquierda de la página muestra la configuración del equipo.
● La parte central muestra la configuración del Root Bridge tal y como puede derivarse de los
telegramas Spanning Tree que un equipo ha recibido.
● La parte derecha muestra la configuración del Regional Root Bridge, tal y como puede
derivarse de los telegramas MSTP. Los datos indicados solo son visibles si en la página
"General" está activado "Spanning Tree" y en "Compatibilidad de protocolo" está ajustado
"MSTP". Esto también es válido para el parámetro "Bridge Max Hop Count". Si el equipo es
un Root Bridge, la información de la parte izquierda coincide con la de la derecha.

Descripción de los campos mostrados
● Prioridad Bridge / Prioridad Root (solo disponible online)
Por medio de la prioridad Bridge se especifica qué dispositivo es Root Bridge. El Bridge con
mayor prioridad será el Root-Bridge. Cuanto menor sea el valor, mayor será la prioridad. Si
en una red hay varios dispositivos con la misma prioridad, pasa a ser Root Bridge el
dispositivo cuya dirección MAC tenga el valor numérico más bajo. Ambos parámetros,
prioridad Bridge y dirección MAC, forman juntos el identificador Bridge. Dado que el RootBridge administra todos los cambios de ruta, debería estar dispuesto lo más central posible,
debido al tiempo de ciclo de los telegramas.
● Dirección Bridge / Dirección Root (solo disponible online)
La dirección Bridge indica la dirección MAC del dispositivo y la dirección Root muestra la
dirección MAC del Root-Bridge.

2422

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Root Port (solo disponible online)
Indica el puerto a través del cual el switch se comunica con el Root-Bridge.
● Costes Root (solo disponible online)
Los costes de la ruta de este dispositivo hasta el Root-Bridge.
● Cambios de topología / Último cambio de topología (solo disponible online)
Para el dispositivo se indica el número de reconfiguraciones debidas al mecanismo
Spanning Tree desde el último arranque. Para el Root-Bridge el tiempo desde la última
reconfiguración se indica del siguiente modo:
– Segundos: se agrega sec tras la indicación numérica
– Minutos: se agrega min tras la indicación numérica
– Horas: se agrega hr tras la indicación numérica
● Bridge Hello Time [s] / Root Hello Time [s] (solo disponible online)
Cada Bridge envía periódicamente telegramas de configuración (BPDU). El tiempo
transcurrido entre dos telegramas de configuración es el "Hello Time". Ajuste de fábrica: 2
segundos
Nota
El ajuste del "Bridge Hello Time" solo es posible con la compatibilidad de protocolo RSTP.
Si está ajustada la compatibilidad de protocolo MSTP, el parámetro "Hello Time" se utiliza
en la página "Layer 2 > Spanning Tree > Puerto CIST".
● Bridge Forward Delay [s] / Root Forward Delay [s]
Un Bridge no utiliza información de configuración nueva de forma inmediata, sino solo
después del tiempo fijado en el parámetro "Forward Delay". Así se garantiza que el
funcionamiento con la nueva topología no se inicie hasta que todos los Bridges tengan las
informaciones necesarias.
Ajuste de fábrica: 15 segundos
● Bridge Max Age / Root Max Age (solo disponible online)
Si la BPDU es más antigua que la "Max Age" indicada, se rechaza. Ajuste de fábrica: 20
segundos
● Prioridad Root regional (solo disponible online)
Véase la descripción en Prioridad Bridge / Prioridad Root
● Dirección Root regional (solo disponible online)
La dirección MAC del dispositivo.
● Costes Root regionales (solo disponible online)
Muestra los costes de la ruta desde el dispositivo hasta el Root-Bridge regional.
● Bridge Max Hop Count
Este parámetro indica por cuántos dispositivos MSTP puede pasar una BPDU. Si se recibe
una MSTP BPDU cuyo número de saltos supera el valor aquí configurado, se rechaza. El
valor estándar de ese parámetro es 20.
● Nombre de la región
Introduzca el nombre de la región MSTP a la que pertenece este dispositivo. Aquí se indica
por defecto la dirección MAC del dispositivo. Este valor debe ser el mismo en todos los
dispositivos pertenecientes a la misma región MSTP.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2423

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Versión de la región
Introduzca el número de versión de la región MSTP en la que se encuentra el dispositivo.
Este valor debe ser el mismo en todos los dispositivos pertenecientes a la misma región
MSTP.
● Inicializar contadores (solo disponible online)
Haga clic en este botón si desea poner a cero los contadores de esta página.

Puerto CIST/Puerto ST
Configuración de los puertos MSTP CIST
Al acceder a esta página, se muestra en la tabla el estado actual de la configuración de los
parámetros de puerto.
Para llevar a cabo la configuración, haga clic en los campos correspondientes de la tabla de
puertos.

Descripción de los campos mostrados
La tabla 1 se divide en las siguientes columnas:
● 1.ª columna
Indica que el ajuste es válido para todos los puertos de la tabla 2.
● Estado de Spanning Tree
Seleccione el ajuste. Existen las siguientes posibilidades de ajuste:
– Activado
El puerto está integrado en el Spanning Tree.
– Desactivado
El puerto no está integrado en el Spanning Tree.
– No hay modificaciones
La tabla 2 no cambia.
● Aplicar a tabla
Al hacer clic en este botón se aplica el ajuste a todos los puertos de la tabla 2.
La tabla 2 se divide en las siguientes columnas:
● Puerto
Muestra todos los puertos disponibles. El puerto se compone del número de módulo y del
número de puerto, p. ej. el puerto 0.1 es el módulo 0, puerto 1.
● Estado de Spanning Tree
Defina si el puerto está integrado en el Spanning Tree o no.
Nota
Si desactiva el ajuste "Estado de Spanning Tree" para un puerto, pueden formarse bucles.
Debe observarse la topología.

2424

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Prioridad
Introduzca la prioridad del puerto. La prioridad del puerto solo se evalúa si los costes de ruta
son iguales. El valor debe ser divisible entre 16. Si el valor no es divisible entre 16, se adapta
automáticamente.
Rango de valores: 0 - 240. El valor estándar es 128.
● Calc. Costes
Introduzca el cálculo de los costes de encaminamiento. Si introduce el valor "0", en el
campo "Costes de ruta" se muestra el valor determinado automáticamente.
● Costes de ruta (solo disponible online)
Este parámetro sirve para calcular la ruta que se ha de elegir. Se selecciona como ruta el
trayecto con el valor más bajo. Si varios puertos de un dispositivo tienen el mismo valor con
los mismos costes de ruta, se selecciona el puerto con el número más bajo.
Si el valor indicado en el campo "Calc. costes" es "0", se muestra el valor determinado
automáticamente. En cualquier otro caso se indica el valor del campo "Calc. costes". La
determinación de los costes de encaminamiento se basa prioritariamente en la velocidad
de transmisión. Cuanto mayor es la velocidad de transmisión alcanzable, menor es el valor
de los costes de encaminamiento.
Valores típicos de costes de encaminamiento con Rapid Spanning Tree:
– 10.000 Mbits/s = 2.000
– 1000 Mbits/s = 20.000
– 100 Mbits/s = 200.000
– 10 Mbits/s = 2.000.000
Sin embargo, los valores también pueden parametrizarse individualmente.
● Estado (solo disponible online)
Indica el estado momentáneo en que se encuentra el puerto. Los valores solo se indican y
no pueden parametrizarse. El parámetro "Estado" depende del protocolo configurado. Para
el estado existen las siguientes posibilidades:
– Disabled
El puerto solo recibe y no toma parte en STP, MSTP ni RSTP.
– Discarding
En el modo "Discarding" se reciben telegramas BPDU. Se rechazan otros telegramas
entrantes o salientes.
– Listening
En este estado se reciben y también se envían telegramas BPDU. El puerto está
integrado en el algoritmo de Spanning Tree.
– Learning
Etapa previa al estado de reenvío; el puerto aprende de forma activa la topología (es
decir, las direcciones de los dispositivos).
– Forwarding
El puerto está activo en la red tras el tiempo de reconfiguración; recibe y envía
telegramas de datos.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2425

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Fwd. Trans (solo disponible online)
Indica el número de cambios del estado "Discarding" al estado "Forwarding".
● Tipo Edge
Defina el tipo del puerto Edge. Existen las siguientes posibilidades:
– "-"
El puerto Edge está desactivado. El puerto se considera un "no Edge Port".
– Admin
Seleccione esta opción si en este puerto se encuentra siempre un terminal. De lo
contrario se activa una reconfiguración de la red con cada cambio de conexión.
– Auto
Seleccione esta opción si debe detectarse automáticamente si hay conectado un
terminal en este puerto. La primera vez que se establezca una conexión, el puerto se
considerará un "no EdgePort".
– Admin/Auto
Seleccione estas opciones para utilizar una combinación de ambas en este puerto. La
primera vez que se establezca una conexión, el puerto se considerará un "EdgePort".
● Edge (solo disponible online)
Indica el estado del puerto.
– Enabled
Hay un terminal en este puerto.
– Disabled
En este puerto hay un dispositivo Spanning Tree o Rapid Spanning Tree.
En un terminal, un switch puede conmutar el puerto con mayor rapidez, sin considerar los
telegramas Spanning Tree. Si en contra de este ajuste se recibe un telegrama Spanning
Tree, el puerto cambia automáticamente al ajuste "Desactivado" para switches.
● Tipo P.t.P.
Seleccione la opción deseada. La selección depende del puerto ajustado.
– "-"
La conexión punto a punto se determina automáticamente. Si el puerto está en
semidúplex, no se parte de una conexión punto a punto.
– P.t.P.
Se parte de una conexión punto a punto también con semidúplex.
– Shared Media
No se parte de una conexión punto a punto incluso si se trata de una conexión dúplex.
Nota
La conexión punto a punto significa una conexión directa entre dos dispositivos. Una
conexión Shared Media sería, p. ej., una conexión a un hub.

2426

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Hello Time
Introduzca el intervalo tras el cual el Bridge envía telegramas de configuración (BPDU). El
ajuste estándar es de 2 segundos. Rango de valores: 1-2 segundos
Nota
El ajuste específico de puerto del Hello Time solo es posible con la compatibilidad de
protocolo MSTP. Si está ajustada la compatibilidad de protocolo RSTP, el parámetro
"Bridge Hello Time" se utiliza en la página "Layer 2 > Spanning Tree > CIST general".
● Función limitada
Si la casilla de verificación está activada, el puerto correspondiente no se selecciona como
puerto Root, independientemente del valor de prioridad. Tampoco se convertirá en puerto
Root el puerto con la prioridad más baja, si la casilla de verificación está activada. Esta
opción solo debe activarse para limitar la influencia de Bridges fuera del área administrada
a la topología Spanning Tree.
● TCN limitado
Si la casilla de verificación está activada, el puerto correspondiente no reenvía a otros
puertos ni cambios de topología recibidos ni detectados (Topology Change Notifications).
Esta opción solo debe activarse para limitar la influencia de Bridges fuera del área
administrada a la topología Spanning Tree.
● TCN limitado
Si la casilla de verificación está activada, el puerto correspondiente acepta cambios de
topología recibidos y detectados, pero no reenvía los cambios de topología a otros puertos.
Las casillas de verificación de esta columna solo pueden activarse si se cumplen los
requisitos siguientes:
– RSTP+ tiene que estar activado.
– La casilla de verificación "TCN limitado" debe estar desactivado para este puerto.
Si no se cumplen los requisitos citados, las casillas de verificación de esta columna estarán
atenuadas.

MST General
Configuración Multiple Spanning Tree
Adicionalmente a RSTP, con MSTP se pueden gestionar varias VLAN en una LAN con árboles
RSTP propios.

Descripción de los campos mostrados
● ID de instancia MSTP
Introduzca el número de la instancia MSTP. Valores admisibles: 1 - 64
La tabla se divide en las siguientes columnas:
● Seleccionar
Seleccione la fila que desea borrar.
● ID de instancia MSTP
Muestra el número de la instancia MSTP.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2427

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Dirección Root
Muestra la dirección MAC del Root-Bridge.
● Prioridad Root
Muestra la prioridad del Root Bridge.
● Prioridad Bridge
Introduzca la prioridad Bridge en este campo. El valor de la prioridad Bridge es un múltiplo
entero de 4096, dentro de un rango de valores de 0 a 61440.
● VLAN ID
Introduzca la ID de VLAN. Aquí también puede indicar rangos con ID inicial, "-", ID final. Con
"," se separan varios rangos o ID. Valores admisibles: 1- 4094

Puerto MST
Configuración de los parámetros Multiple Spanning Tree Port
En esta página se ajustan los parámetros de los puertos de las instancias Multiple Spanning
Tree configuradas.

Descripción de los campos mostrados
La página contiene el siguiente campo:
● ID de instancia MSTP
Seleccione la ID de la instancia MSTP.
La tabla 1 se divide en las siguientes columnas:
● 1.ª columna
Indica que el ajuste es válido para todos los puertos.
● Estado MSTP
Seleccione el ajuste. Existen las siguientes posibilidades de ajuste:
– Activado
– Desactivado
– No hay modificaciones: La tabla 2 no cambia.
● Aplicar a tabla
Al hacer clic en este botón se aplica el ajuste para todos los puertos de la tabla 2.
La tabla 2 se divide en las siguientes columnas:
● Puerto
Muestra todos los puertos y Link Aggregations disponibles.
● ID de instancia MSTP
ID de la instancia MSTP.
● Estado MSTP
Haga clic en la casilla de verificación para activar o desactivar esta opción.

2428

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Prioridad
Introduzca la prioridad del puerto. La prioridad del puerto solo se evalúa si los costes de ruta
son iguales. El valor debe ser divisible entre 16. Si el valor no es divisible entre 16, se adapta
automáticamente.
Rango de valores: 0 - 240. Ajuste de fábrica: 128
● Calc. Costes
Introduzca el cálculo de costes de encaminamiento en el campo de entrada. Si introduce
aquí el valor "0", en el siguiente campo "Costes de ruta" se muestra el valor determinado
automáticamente.
● Costes de ruta (solo disponible online)
Este parámetro sirve para calcular la ruta que se ha de elegir. Se selecciona como ruta el
trayecto con el valor más bajo. Si varios puertos de un dispositivo tienen el mismo valor con
los mismos costes de ruta, se selecciona el puerto con el número más bajo.
Si en "Calc. Costes" el valor es "0", se muestra el valor determinado automáticamente. En
cualquier otro caso se indica el valor del campo "Calc. Costes". La determinación de los
costes de encaminamiento se basa prioritariamente en la velocidad de transmisión. Cuanto
mayor es la velocidad de transmisión alcanzable, menor es el valor de los costes de
encaminamiento.
Valores típicos de costes de encaminamiento con Rapid Spanning Tree:
– 10.000 Mbits/s = 2.000
– 1000 Mbits/s = 20.000
– 100 Mbits/s = 200.000
– 10 Mbits/s = 2.000.000
Sin embargo, los valores también pueden parametrizarse individualmente.
● Estado (solo disponible online)
Indica el estado momentáneo en que se encuentra el puerto. Los valores solo se indican y
no pueden configurarse. Para el estado existen las siguientes posibilidades:
– Discarding
El puerto intercambia información MSTP pero no participa en el tráfico de datos.
– Blocked
En el modo Blocking se reciben telegramas BPDU.
– Forwarding
El puerto recibe y envía telegramas de datos.
● Fwd. Trans (solo disponible online)
Indica el número de cambios de estado Discarding - Forwarding o Forwarding - Discarding
para un puerto.

Enhanced Passive Listening Compatibility
Activación de la función
En esta página se puede activar la "Passive Listening Compatibility".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2429

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Enhanced Passive Listening Compatibility
Active o desactive esta función para todo el dispositivo.
● Ajuste
– Activado
Activa la función para todos los puertos del dispositivo.
– Desactivado
Desactiva la función para todos los puertos del dispositivo.
– No hay modificaciones
No hay cambios
● Aplicar a tabla
Escribe el ajuste que hay en "Ajuste" en la siguiente tabla.
Tabla con granulación por puertos:
Si la función está activada para todo el equipo, active o desactive esta función para algunos
puertos por separado.
● Puerto
Indica el puerto del dispositivo.
● Ajuste
Active o desactive la función para este puerto.

Loop Detection
Con la función "Loop Detection" se define para qué puertos se debe activar la identificación de
bucles. Desde los puertos en cuestión se envían telegramas especiales denominados Loop
Detection. Si estos telegramas se devuelven nuevamente al dispositivo significa que hay un
bucle ("Loop").
Se habla de un "Local Loop" con la participación de este dispositivo cuando los telegramas se
reciben de nuevo en otro puerto del mismo dispositivo. Si los telegramas enviados se reciben
nuevamente en el mismo puerto significa que se ha producido un bucle "Remote Loop" en
otros componentes de red.
Nota
Un bucle es un error en la estructura de la red que debe eliminarse. La identificación de bucles
puede ayudar a encontrar el error más rápido, sin embargo no lo soluciona. La identificación
de bucles no es apta para aumentar la disponibilidad de la red mediante el montaje directo de
bucles.
Nota
Tenga en cuenta que una identificación de bucles solo es posible en los puertos que no se han
configurado como puertos de anillo o Standby.

2430

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
● Loop Detection
Active o desactive la detección de bucles.
● VLAN Loop Detection
Active o desactive la detección de bucles en VLAN.
La tabla 1 se divide en las siguientes columnas:
● 1.ª columna
Indica que los ajustes son válidos para todos los puertos de la tabla 2.
● Intervalo [ms] / Valor umbral / Timeout [s]/ Remote Reaction / Local Reaction
Defina los ajustes que desee.
● Aplicar a tabla
Al hacer clic en este botón se aplica el ajuste a todos los puertos de la tabla 2.
La tabla 2 se divide en las siguientes columnas:
● Puerto
Muestra los puertos disponibles.
● Ajuste
Determine cómo debe proceder el puerto con telegramas Loop Detection.
Nota
Los telegramas de prueba provocan una carga adicional de la red. Recomendamos
configurar únicamente switches individuales, p. ej. en los ramales del anillo, como "sender"
y los demás como "forwarder".
– sender
Se envían y reenvían telegramas Loop Detection.
– forwarder
Se reenvían telegramas Loop Detection de otros dispositivos.
– blocked
Se bloquea el reenvío de los telegramas Loop Detection.
● Intervalo [ms]
Especifica, en milisegundos, el intervalo de envío para telegramas Loop Detection.
● Valor umbral
Introduciendo un número se especifica tras cuántos telegramas Loop Detection se
supondrá la existencia de un bucle.
● Timeout [s]
Especifique los segundos al cabo de los cuales el dispositivo retornará automáticamente al
estado en el que se encontraba antes del bucle. Si se ajusta el valor "0", tras un bucle es
necesario activar de nuevo el puerto manualmente con el botón "Restablecer".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2431

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Remote Reaction
Especifique cómo debe reaccionar el puerto cuando se produce un Remote Loop.
– No hay modificaciones
Un bucle no afecta al puerto.
– Desactivado
el puerto se bloquea.
● Local Reaction
Especifique cómo debe reaccionar el puerto cuando se produce un Local Loop.
– No hay modificaciones
Un bucle no afecta al puerto.
– Desactivado
El puerto se bloquea.
● Estado (solo disponible online)
Indica si la detección de bucles está activada o desactivada para el puerto.
● Source Port (solo disponible online)
Muestra el puerto destinatario del telegrama Loop Detection que ha provocado la última
reacción.
● Source VLAN (solo disponible online)
Muestra la ID de VLAN del telegrama Loop Detection que ha provocado la última reacción.
Para ello es imprescindible que el ajuste "VLAN Loop Detection" esté activado.
● Reiniciar (solo disponible online)
Después de eliminar un bucle de la red, haga clic en este botón para resetear nuevamente
el puerto.

Cambio del estado de puerto configurado mediante Loop Detection
La configuración del estado de puerto puede cambiarse con la función "Loop Detection". Si el
administrador ha desactivado un puerto (disabled), por ejemplo, es posible reactivarlo
(enabled) mediante "Loop Detection" tras un rearranque completo del dispositivo. El estado de
puerto "Link down" no cambia con "Loop Detection".

Consecuencias en la configuración mediante STEP7
La configuración de Spanning Tree puede modificarse si "Loop Detection" se configura a
través de STEP7. Si activa "Loop Detection" en un puerto a través de STEP 7, Spanning Tree
se desactivará automáticamente en ese puerto. Si vuelve a desactivar "Loop Detection" para
el puerto a través de STEP7, Spanning Tree no se activará automáticamente. Active Spanning
Tree a través de WBM o CLI.

2432

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Link Aggregation
General
Agrupación de conexiones de red para obtener redundancia y mayor ancho de banda
La Link Aggregation según IEEE 802.3ad permite agrupar varias conexiones entre dispositivos
vecinos, para alcanzar así una mayor amplitud de banda y procurar adicionalmente seguridad
contra fallos.
Para esto se agrupan los puertos de ambos dispositivos interlocutores en las denominadas
"Link Aggregations" y luego se conectan los dispositivos entre sí a través de estos puertos.
Para asignar puertos (es decir, links) correctamente a un interlocutor, se usa el Link
Aggregation Control Protocol (LACP) del estándar IEEE 802.3ad.
Pueden definirse hasta 8 Link Aggregations. A cada Link Aggregation pueden asignársele
como máximo 8 puertos.
Nota
Cuando un puerto está asignado a una Link Aggregation pero no está activo (p. ej. Link Down),
los valores visualizados pueden diferir de los que se configuraron para la Link Aggregation.
Cuando el puerto se activa en la Link Aggregation, las configuraciones de puerto individuales,
como Reenvío DCP, se sobrescriben con los valores configurados de la Link Aggregation.

Descripción de los campos mostrados
En esta página se muestran todas la Link Aggregations configuradas. La tabla se divide en las
siguientes columnas:
● Puerto
Indica el número de puerto de esta Link Aggregation. La designación es asignada
internamente por el firmware.
● Nombre de la Link Aggregation
Muestra el nombre de la agrupación de enlaces. Este nombre lo puede indicar el usuario al
efectuar la configuración. El nombre no es absolutamente necesario pero puede resultar útil
para diferenciar las distintas Link Aggregations.
● Dirección MAC
Muestra la dirección MAC.
● Estado
Active o desactive la Link Aggregation.
● MTU
Defina el tamaño de los paquetes.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2433

Configuración de dispositivos y redes
1.4 Crear configuraciones
● LACP
– Activado
Activa el envío de telegramas LACP.
– Desactivado
Desactiva el envío de telegramas LACP.
● Distribución de carga
Defina el tipo de distribución de paquetes entre los distintos enlaces de una Aggregation.
– Destination&Source Mac
La distribución se basa en una combinación de dirección MAC de origen y de destino.
– Destination&Source IP-MAC
La distribución se basa en una combinación de dirección IP y MAC de origen y de
destino.
● Modo VLAN
Defina cómo se introduce la Link Aggregation en una VLAN:
– Hybrid
La Link Aggregation envía telegramas con y sin tag. No forma parte automáticamente de
una VLAN.
– Trunk
La Link Aggregation envía solo telegramas con tag y forma parte automáticamente de
todas las VLANs.
● Lista de puertos
Muestra los puertos pertenecientes a esta Link Aggregation. En la lista desplegable pueden
seleccionarse los siguientes valores:
– "-" (desactivado)
La Link Aggregation está desactivada.
– "a" (activo)
El puerto envía telegramas LACP y solo participa en la Link Aggregation cuando se
reciben telegramas LACP.
– "p" (pasivo)
El puerto solo participa en la Link Aggregation cuando se reciben telegramas LACP.
– "o" (on)
El puerto participa en la Link Aggregation y no envía telegramas LACP.
Nota
Dentro de una "Link Aggregation" solo se admiten puertos con la siguiente configuración:
● todos los puertos con "o"
● todos los puertos con "a" o "p".
Nota
Si agrega un puerto configurado a una "Link Aggregation", el puerto adoptará la
configuración de la "Link Aggregation". Si retira el puerto de la "Link Aggregation", se
restaurarán los ajustes de fábrica del puerto.

2434

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Consulte también
General (Página 2421)

LACP Timeout
Configuración del LACP Timeout
En el estándar IEEE 802.3ad se han definido dos valores posibles para la longitud del timeout:
"Long" (90 segundos) y "Short" (3 segundos). Este valor define el intervalo de tiempo en el que
se envían LACPDU. El valor predeterminado para todos los puertos es "Long". Para permitir
una configuración LACP simétrica, existe la posibilidad de ajustar el valor "Short". Elija el
mismo valor de timeout para todos los puertos de una Link Aggregation.

Descripción de los campos mostrados
La tabla 1 se divide en las siguientes columnas:
● 1.ª columna
Indica que los ajustes son válidos para todos los puertos de la tabla 2.
● Ajuste
Seleccione el ajuste en la lista desplegable. Existen las siguientes posibilidades de
configuración:
– Short
El valor de LACP Timeout es de 3 segundos.
– Long
El valor de LACP Timeout es de 90 segundos.
– No hay modificaciones
La tabla 2 no cambia.
● Aplicar a tabla
Al hacer clic en este botón se aplican los ajustes a todos los puertos de la tabla 2.
La tabla 2 se divide en las siguientes columnas:
● Puerto
Muestra todos los puertos disponibles. El puerto se compone del número de módulo y del
número de puerto, p. ej. el puerto 0.1 es el módulo 0, puerto 1.
● Ajuste
Elija el valor "Short" o "Long" para este puerto.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2435

Configuración de dispositivos y redes
1.4 Crear configuraciones

Reenvío DCP
Aplicaciones
El protocolo DCP lo utilizan STEP 7 y PST-Tool para la configuración y el diagnóstico. Con el
ajuste de fábrica, DCP está activado en todos los puertos, lo que significa que los telegramas
DCP recibidos se transmiten a todos los puertos. Con esta opción tiene la posibilidad de
desactivar la emisión de telegramas para puertos concretos, por ejemplo, para aislar sectores
de la red de la configuración vía PST-Tool o para dividir el conjunto de la red en subredes más
pequeñas para la configuración y el diagnóstico.
Nota
Configuración PNIO
Puesto que DCP es un protocolo PROFINET, la configuración realizada aquí solo surte efecto
en la VLAN asociada a la interfaz TIA.
En esta página se muestran todos los puertos del equipo. Después de cada puerto indicado
hay una lista desplegable para la selección de función.

Descripción de los valores mostrados
La tabla 1 se divide en las siguientes columnas:
● 1.ª columna
Indica que el ajuste es válido para todos los puertos de la tabla 2.
● Ajuste
Seleccione el ajuste deseado. Si está seleccionado "No hay modificaciones", la entrada de
la tabla 2 permanece invariable.
● Aplicar a tabla
Al hacer clic en este botón se aplica el ajuste a todos los puertos de la tabla 2.
La tabla 2 se divide en las siguientes columnas:
● Puerto
Muestra los puertos disponibles. El puerto se compone del número de módulo y del número
de puerto, p. ej. el puerto 0.1 es el módulo 0, puerto 1.
● Ajuste
Especifique si el puerto debe bloquear o transmitir los telegramas DCP en la salida. Tiene
las siguientes posibilidades de selección:
– Forward
En este puerto se reenvían telegramas DCP.
– Block
En este puerto no se reenvían telegramas DCP a la salida. Sin embargo, la recepción
sigue siendo posible a través de este puerto.

2436

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

LLDP
Determinación de la topología de red
LLDP (Link Layer Discovery Protocol) está definido en el estándar IEEE 802.AB.
LLDP es un método para determinar la topología de red. Los componentes de red intercambian
información con sus vecinos a través de LLDP.
Los componentes de red que soportan LLDP disponen de un agente LLDP. El agente LLDP
envía información sobre sí mismo en intervalos periódicos y recibe información de dispositivos
conectados. La información recibida se guarda en la MIB.

Aplicaciones
PROFINET utiliza el protocolo LLDP para el diagnóstico de topología. Con el ajuste de fábrica,
LLDP está activado para todos los puertos, es decir, se envían y reciben telegramas LLDP en
todos los puertos. Con esta función se tiene la posibilidad de activar o desactivar el envío y/o
la recepción por cada puerto.

Descripción
La tabla 1 se divide en las siguientes columnas:
● 1.ª columna
Indica que el ajuste es válido para todos los puertos de la tabla 2.
● Ajuste
Seleccione el ajuste deseado. Si está seleccionado "No hay modificaciones", la entrada de
la tabla 2 permanece invariable.
● Aplicar a tabla
Al hacer clic en este botón se aplica el ajuste a todos los puertos de la tabla 2.
La tabla 2 se divide en las siguientes columnas:
● Puerto
Muestra los puertos disponibles. El puerto se compone del número de módulo y del número
de puerto, p. ej. el puerto 0.1 es el módulo 0, puerto 1.
● Ajuste
Especifique si el puerto debe enviar o recibir telegramas LLDP. Existen las siguientes
posibilidades:
– Rx
Este puerto solo puede recibir telegramas LLDP.
– Tx
Este puerto solo puede enviar telegramas LLDP.
– Rx & Tx
Este puerto puede recibir y enviar telegramas LLDP.
– "-" (desactivado)
Este puerto no puede recibir ni enviar telegramas LLDP.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2437

Configuración de dispositivos y redes
1.4 Crear configuraciones

FMP
Requisitos
● Solo es posible utilizar Fiber Monitoring en transceptores aptos para diagnóstico. Observe
para ello la documentación de los dispositivos.
● Para poder utilizar la función Fiber Monitoring debe activarse LLDP. La información de Fiber
Monitoring se adjunta a los paquetes LLDP.

Vigilancia de trayectos ópticos
La función Fiber Monitoring permite vigilar la potencia de recepción y la caída de potencia en
trayectos ópticos entre dos switches.
Cuando se activa FM en un puerto óptico se envía información de diagnóstico por el puerto.
Paralelamente al proceso de envío se comprueba si se recibe la información adecuada.
Independientemente de si el IE Switch recibe información de diagnóstico de su interlocutor,
vigila que la potencia de recepción medida en el puerto óptico no alcance los valores límite
ajustados.
Cuando la función Fiber Monitoring está activada en el interlocutor, este transfiere el valor
actual de la potencia de emisión del puerto al dispositivo. El dispositivo compara el valor que
ha obtenido para la potencia de emisión con la potencia realmente recibida. A partir de la
diferencia entre potencia de recepción y potencia de emisión se calcula la caída de potencia
en el trayecto. También se vigila que la caída de potencia calculada no alcance los valores
límite ajustados.
Si el valor de la potencia de recepción o de la caída de potencia rebasa por defecto o por
exceso los valores límite ajustados, se dispara un evento. Es posible ajustar valores límite en
dos niveles, para avisos con los Severity Levels "Warning" y "Critical".
En "Sistema > Eventos > Configuración" se ajusta el modo en que el IE Switch muestra el
evento.
Nota
Si se ha activado Fiber Monitoring y se extrae un transceptor enchufable apto para diagnóstico,
automáticamente se desactivará Fiber Monitoring para este puerto y se borrarán los valores
límite ajustados así como un posible estado de error pendiente.

Descripción de los campos mostrados
En la tabla se determina qué valores límite deben vigilarse para la potencia de recepción
medida y la caída de potencia calculada.
● Puerto
Muestra los puertos ópticos disponibles que soportan Fiber Monitoring. Depende de los
transceptores.
● Estado
Active o desactive FM. Esta función está activada por defecto.

2438

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Potencia Rx [dBm] mantenimiento necesario (Warning)
Introduzca el valor con el que desea recibir un aviso del Severity Level "Warning"
relacionado con el empeoramiento de la potencia de recepción. Si se introduce el valor "0"
no se vigilará la potencia de recepción. El valor predeterminado depende del transceptor
enchufable correspondiente. El valor predeterminado depende del transceptor enchufable
correspondiente.
● Potencia Rx [dBm] mantenimiento solicitado (Critical)
Introduzca el valor con el que desea recibir un aviso del Severity Level "Critical" relacionado
con el empeoramiento de la potencia de recepción. Si se introduce el valor "0" no se vigilará
la potencia de recepción. El valor predeterminado depende del transceptor enchufable
correspondiente.
El valor predeterminado depende del transceptor enchufable correspondiente.
● Caída de potencia [dB] mantenimiento necesario (Warning)
Introduzca el valor con el que desea recibir un aviso del Severity Level "Warning"
relacionado con la caída de potencia de la conexión. Si se introduce el valor "0" no se
vigilará la caída de potencia. Valor predeterminado: -50 dB
● Caída de potencia [dB] mantenimiento solicitado (Critical)
Introduzca el valor con el que desea recibir un aviso del Severity Level "Critical" relacionado
con la caída de potencia de la conexión. Si se introduce el valor "0" no se vigilará la caída
de potencia. Valor predeterminado: -55 dB

Unicast
Filtrado
Filtrado de direcciones
Esta tabla muestra las direcciones Unicast que se han introducido estáticamente por
parametrización del usuario. En esta página se definen también los filtros Unicast estáticos.

Descripción de los campos mostrados
La página contiene los siguientes campos:
● ID de VLAN
Seleccione la ID de VLAN en la que se configura estáticamente una nueva dirección MAC.
Si no se especifica nada, está parametrizado "VLAN1" como ajuste básico.
● Dirección MAC
Introduzca aquí la dirección MAC.
La tabla contiene las siguientes columnas:
● ID de VLAN
Indica la ID de VLAN asignada a esa dirección MAC.
● Dirección MAC
Indica la dirección MAC del participante que el dispositivo ha aprendido o que el usuario ha
configurado.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2439

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Estado
Muestra el estado de cada entrada de dirección:
– Static
Configuración por parte del usuario. Las direcciones estáticas están almacenadas de
forma permanente, lo que significa que no se borran tras expirar el Aging Time ni al
reiniciar el switch.
– Invalid
Estos valores no se evalúan.
● Puerto
Indica a través de qué puerto se puede acceder al dispositivo con la dirección especificada.
Los telegramas recibidos por el dispositivo cuya dirección de destino coincida con esta
dirección se transmiten a ese puerto.
Nota
Para direcciones Unicast solo se puede indicar un puerto.

Puertos bloqueados
Activación del control de acceso
En esta página se pueden bloquear los diferentes puertos para dispositivos desconocidos.
Si la función Port Lock está activada, en ese puerto se rechazan inmediatamente los paquetes
procedentes de direcciones MAC desconocidas. El puerto admite los paquetes de dispositivos
conocidos.
Puesto que los puertos con la función Port Lock activada tampoco aprenden direcciones MAC,
las direcciones aprendidas en estos puertos se eliminan automáticamente al activarse la
función Port Lock. El puerto solo acepta direcciones MAC estáticas creadas previamente, ya
sea manualmente o con las funciones "Iniciar proceso de aprendizaje" y "Detener proceso de
aprendizaje".
Para registrar automáticamente de manera estática todos los dispositivos conectados, hay
una función para el aprendizaje automático (ver "Layer 2 > Unicast > Learning").

2440

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
La tabla 1 se divide en las siguientes columnas:
● 1.ª columna
Indica que el ajuste es válido para todos los puertos de la tabla 2.
● Ajuste
Seleccione el ajuste en la lista desplegable. Existen las siguientes posibilidades de ajuste:
– Activado
Activa la función Port Lock.
– Desactivado
Desactiva la función Port Lock.
– No hay modificaciones
La tabla 2 no cambia.
● Aplicar a tabla
Al hacer clic en este botón se aplica el ajuste a todos los puertos de la tabla 2.
La tabla 2 se divide en las siguientes columnas:
● Puerto
En esta columna se indican todos los puertos disponibles en este dispositivo.
● Ajuste
Active o desactive el control de acceso para el puerto.

Learning
Inicio/detención del aprendizaje
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
El aprendizaje automático permite introducir automáticamente todos los dispositivo
conectados en la tabla de filtros Unicast. Mientras la función "Iniciar aprendizaje" está activada,
todas las direcciones Unicast aprendidas se registran de inmediato como entradas Unicast
estáticas.
El proceso de aprendizaje finaliza cuando se hace clic en el botón "Detener aprendizaje". De
este modo, el aprendizaje puede durar desde unos pocos minutos hasta varias horas en
grandes redes, a fin de localizar de modo efectivo todos los dispositivos. Solo pueden
encontrarse los dispositivos que envían paquetes durante el proceso de aprendizaje.
Activando a continuación la función Port Lock, en los puertos correspondientes solo se

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2441

Configuración de dispositivos y redes
1.4 Crear configuraciones
admitirán paquetes de los dispositivos conocidos tras la finalización del proceso de
aprendizaje (entradas Unicast estáticas).
Nota
Si la función Port Lock ya está activa en puertos concretos antes del aprendizaje automático,
en estos puertos no se aprenden direcciones. De este modo es posible aprender solo en
determinados puertos. Así pues, active previamente la función Port Lock en los puertos que no
deban aprender direcciones.

Procedimiento de configuración
Memorización de direcciones
1. Haga clic en el botón "Iniciar proceso de aprendizaje" para iniciar el proceso de aprendizaje.
Tras el inicio del proceso de aprendizaje, el botón "Iniciar proceso de aprendizaje" es
sustituido por el botón "Detener proceso de aprendizaje". El dispositivo introducirá las
direcciones de dispositivos conectados hasta que el usuario detenga el proceso.
2. Haga clic en el botón "Detener proceso de aprendizaje" para detener el proceso de
aprendizaje. El botón vuelve a sustituirse por el botón "Iniciar proceso de aprendizaje". Las
entradas memorizadas se guardan.
Borrado de todas las entradas Unicast estáticas
1. Haga clic en el botón "Borrar todas las direcciones Unicast estáticas" para borrar todas las
entradas estáticas.
En grandes redes con un gran número de dispositivos, es posible que el aprendizaje
automático dé lugar a un exceso de entradas estáticas indeseadas. Para no tener que
borrar las entradas estáticas una a una, este botón ofrece la posibilidad de borrarlas todas.
Esta función está desactivada durante el aprendizaje automático.
Nota
El borrado puede tardar cierto tiempo, en función del número de entradas.

Bloqueo
Bloquear el reenvío de telegramas Unicast desconocidos
En esta página se bloquea el envío de telegramas Unicast para puertos determinados.

2442

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los valores mostrados
La tabla 1 se divide en las siguientes columnas:
● 1.ª columna
Indica que el ajuste es válido para todos los puertos de la tabla 2.
● Ajuste
Seleccione el ajuste en la lista desplegable. Existen las siguientes posibilidades de ajuste:
– Activado
El bloqueo de telegramas Unicast está activado.
– Desactivado
El bloqueo de telegramas Unicast está desactivado.
– No hay modificaciones
La tabla 2 no cambia.
● Aplicar a tabla
Al hacer clic en este botón se aplica el ajuste a todos los puertos de la tabla 2.
La tabla 2 se divide en las siguientes columnas:
● Puerto
En esta columna se indican todos los puertos disponibles. Los puertos no disponibles no se
indican.
● Ajuste
Active o desactive el bloqueo de telegramas Unicast.

Multicast
Grupos
Aplicaciones Multicast
En la mayoría de los casos se envía un telegrama con una dirección Unicast a un destinatario
determinado. Si una aplicación debe enviar los mismos datos a varios destinatarios, se puede
reducir el volumen de datos a transmitir enviando los datos a todos ellos a través de una
dirección Multicast. Para algunas aplicaciones existen direcciones Multicast fijas (NTP, IETF1Audio, IETF1-Video, etc.).

Reducción de la carga de red
En comparación con los telegramas Unicast, los telegramas Multicast suponen una mayor
carga para el dispositivo. Esto se debe a que los telegramas Multicast se envían de manera
general a todos los puertos. Existen tres posibilidades para reducir la carga causada por
telegramas Multicast:
● Entrada estática de las direcciones en la tabla de filtros Multicast.
● Entrada dinámica de las direcciones por escucha de telegramas de parametrización IGMP
(configuración IGMP).
● Asignación dinámica de direcciones por telegramas GMRP.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2443

Configuración de dispositivos y redes
1.4 Crear configuraciones
Todos los procedimientos mencionados tienen como consecuencia que los telegramas
Multicast se envían únicamente a los puertos para los que se han introducido las
correspondientes direcciones.
El comando de menú "Multicast" muestra los telegramas Multicast registrados actualmente en
la tabla de filtros, con sus puertos de destino, que ha parametrizado el usuario (estáticamente).

Descripción de los campos mostrados
La página contiene los siguientes campos:
● ID de VLAN
Si hace clic en este campo de texto, aparece una lista desplegable. Aquí puede seleccionar
la ID de VLAN de una nueva dirección MAC para configurar.
● Dirección MAC
Aquí se introduce una nueva dirección MAC Multicast para configurar.
La tabla se divide en las siguientes columnas:
● ID de VLAN
Aquí se indica la ID de la VLAN a la que está asignada la dirección MAC Multicast de esta
fila.
● Dirección MAC
Indica la dirección MAC Multicast aprendida por el dispositivo o configurada por el usuario.
● Estado
Muestra el estado de cada entrada de dirección. La dirección ha sido introducida
estáticamente por el usuario. Las direcciones estáticas están almacenadas de forma
permanente, lo que significa que no se borran tras expirar el Aging Time ni en caso de
rearranque del equipo. Deben ser borradas por el usuario.
● Lista de puertos
Para cada slot existe una columna. Dentro de las columnas
se indica para cada puerto la pertenencia al grupo Multicast. La lista desplegable ofrece las
siguientes posibilidades de selección:
– M
(Member) A través de este puerto se envían telegramas Multicast.
– F
(Forbidden) No es miembro del grupo Multicast. Además, no se permite que esta
dirección sea memorizada dinámicamente a través de GMRP o IGMP/MLD.
– No miembro del grupo Multicast. A través de este puerto no se envían telegramas
Multicast con la dirección MAC Multicast definida.

2444

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

IGMP
Función
El dispositivo soporta "IGMP Snooping" y la función "IGMP Querier". Si está activado "IGMP
Snooping", los telegramas IGMP (Internet Group Management Protocol) se evalúan y con esta
información se actualiza la tabla de filtros Multicast. Si además está activado "IGMP Querier",
el dispositivo envía también peticiones IGMP que provocan respuestas en los dispositivos
compatibles con IGMP.

IGMP Snooping Aging Time
Con este menú puede configurar el Aging Time para la configuración IGMP. Una vez
transcurrido este tiempo se borran de la tabla de direcciones las entradas generadas por
IGMP, si estas no se actualizan por medio de un nuevo telegrama IGMP.
La especificación es válida para todos los puertos, y no es posible una configuración específica
para puertos concretos.

IGMP Snooping Aging Time en función del Querier
SCALANCE XR500 como IGMP Querier
Si se utiliza un SCALANCE XR500 como IGMP Querier, el intervalo Query es de 125
segundos. Ajuste el "IGMP Snooping Aging Time" en 250 segundos como mínimo.
Otros IGMP Querier
Si se utiliza otro IGMP Querier, el valor de "IGMP Snooping Aging Time" debería ser al menos
dos veces el intervalo Query.

Descripción de los campos mostrados
La página contiene los siguientes campos:
● IGMP Snooping
Active o desactive IGMP Snooping (Internet Group Management Protocol). La función
activa IGMP Snooping en todas las interfaces. Si la función está activada, las direcciones
Multicast que se aprendieron a través de IGMP Snooping se registran en la tabla de filtros
de Multicast.
● IGMP Snooping Aging Time
Introduzca en este campo el valor en segundos para el Aging Time. El ajuste estándar es
de 300 segundos. Rango de valores: 130 - 1225 segundos
● IGMP Querier
Active o desactive "IGMP Querier". El dispositivo envía peticiones IGMP cíclicamente.
● IGMP Snooping Switch IP Address
Después de activar la casilla de verificación "IGMP Querier", aquí se muestra la dirección
IP del dispositivo. También existe la posibilidad de introducir la dirección IP de otro
dispositivo que deba encargarse de la función del IGMP Querier.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2445

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla se divide en las siguientes columnas:
● ID de VLAN
La ID de VLAN para la que debe activarse IGMP Snooping o IGMP Querier.
● IGMP Snooping
Active la casilla de verificación en esta columna para aquellas VLAN en las que deba
activarse IGMP Snooping. Las especificaciones de esta columna no serán efectivas hasta
que se active IGMP Snooping para el dispositivo (primera casilla de verificación de esta
página).
● IGMP Querier
Active la casilla de verificación en esta columna para aquellas VLAN en las que deba
activarse IGMP Querier. Para ello es imprescindible que IGMP Snooping esté activado para
la VLAN correspondiente.

IGMP estáticos
Función
El usuario introduce las direcciones Multicast estáticas en la tabla de filtros, donde se
almacenan de forma permanente. Las entradas estáticas en la tabla de filtros no se borran tras
expirar el Aging Time ni en caso de rearranque del equipo, al contrario que las entradas
generadas dinámicamente. Deben ser borradas por el usuario.

Descripción de los campos mostrados
La página contiene los siguientes campos:
● ID de VLAN
Seleccione en la lista desplegable la ID de VLAN del grupo que debe configurarse.
● Puerto inicial
Seleccione en la lista desplegable el primer puerto de un rango para el que desee configurar
una dirección Multicast.
● Puerto final
Aquí se muestra en principio la selección realizada en la lista desplegable "Puerto inicial".
Seleccione en la lista desplegable el último puerto de un rango para el que desee configurar
una dirección Multicast. Si no se selecciona nada en esta lista desplegable solo se asignará
un puerto a la dirección Multicast.
● Dirección MAC
Introduzca aquí la dirección IP Multicast del grupo.
La tabla se divide en las siguientes columnas:
● Seleccionar
Seleccione la fila que desea borrar.
● ID de VLAN
Aquí se indica la ID de la VLAN a la que está asignada la dirección Multicast de esta fila.

2446

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Dirección del grupo
Aquí se muestra la dirección IP Multicast del grupo.
● Lista de puertos
Para cada puerto existe una columna con una casilla de verificación. Si la casilla de
verificación está activada, el puerto forma parte del grupo correspondiente.

Procedimiento de configuración
Crear un grupo Multicast estático
Nota
No es posible crear entradas Multicast estáticas cuando GMRP está activado.
1. Seleccione la ID deseada en la lista desplegable "ID de VLAN".
2. En las listas desplegables Puerto inicial y Puerto final, especifique los puertos que deben
ser miembros del grupo Multicast.
3. Introduzca la dirección IP Multicast del grupo en el campo de entrada "Dirección del grupo".
4. Haga clic en el botón "Crear". En la tabla se genera una nueva entrada.
5. Los grupos existentes se modifican activando o desactivando las casillas de verificación de
los puertos correspondientes.

GMRP
Activación de GMRP
Activando las opciones correspondientes se define individualmente para cada puerto si se
aplica GMRP. Si "GMRP" está desactivado para un puerto, no se efectúa ningún registro para
él y no puede enviar ningún telegrama GMRP.
Para que GMRP funcione es necesario activar la función tanto globalmente como en los
puertos.

Descripción de los campos mostrados
La página contiene el siguiente campo:
● GMRP
Active o desactive la función GMRP.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2447

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla 1 se divide en las siguientes columnas:
● 1.ª columna
Indica que el ajuste es válido para todos los puertos de la tabla 2.
● Ajuste
Elija el ajuste deseado. Existen las siguientes posibilidades de ajuste:
– Activado
Activa el envío de telegramas GMRP.
– Desactivado
Desactiva el envío de telegramas GMRP.
– No hay modificaciones
La tabla 2 no cambia.
● Aplicar a tabla
Al hacer clic en este botón se aplican los ajustes a todos los puertos de la tabla 2.
La tabla 2 se divide en las siguientes columnas:
● Puerto
En esta columna se indican todos los puertos disponibles en el dispositivo y también las
Link Aggregations.
● Ajuste
Con esta casilla de verificación se activa o desactiva GMRP para el puerto o la Link
Aggregation.

Multicast Blocking
En esta página se bloquea el envío de telegramas Multicast para puertos determinados.

Descripción de los valores mostrados
La tabla 1 se divide en las siguientes columnas:
● 1.ª columna
Indica que el ajuste es válido para todos los puertos de la tabla 2.
● Ajuste
Seleccione el ajuste deseado. Existen las siguientes posibilidades de ajuste:
– Activado
El bloqueo de telegramas Multicast está activado.
– Desactivado
El bloqueo de telegramas Multicast desconocidos está desactivado.
– No hay modificaciones
La tabla 2 no cambia.
● Aplicar a tabla
Al hacer clic en este botón se aplica el ajuste a todos los puertos de la tabla 2.

2448

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla 2 se divide en las siguientes columnas:
● Puerto
En esta columna se indican todos los puertos disponibles. Los puertos no disponibles no se
indican.
● Ajuste
Active o desactive el bloqueo de telegramas Multicast.

MLD
Multicast Listener Discovery
Los dispositivos soportan "MLD Snooping" y la función "MLD Querier". Si está activado "MLD
Snooping", los telegramas MLD se analizan y con esta información se actualiza la tabla de
filtros Multicast. Si además está activado "MLD Querier", los IE Switches envían también
peticiones MLD que provocan respuestas en los dispositivos compatibles con MLD.
Con MLD Snooping se reenvían los telegramas MLD únicamente a los Multicast Listener
previstos, en lugar de saturar todos los puertos con ellos.
Para que MLD Snooping funcione es necesario activar la función tanto globalmente como en
las VLAN.

MLD Snooping Aging Time
En esta página puede definir el Aging Time para la configuración MLD. Una vez transcurrido
este tiempo se borran de la tabla de direcciones las entradas generadas por MLD, si no se
actualizan por medio de un nuevo telegrama MLD.
La especificación es válida para todas las VLAN, y no es posible una configuración específica
para una VLAN.

Descripción de los campos mostrados
● MLD Snooping
Active o desactive MLD en el dispositivo.
● MLD Snooping Aging Time
Indique el tiempo pasado el cual se borrarán de la tabla de filtros Multicast las entradas
generadas por MLD. Siempre suponiendo que no se actualizan con un nuevo paquete MLD.
La especificación es válida para todas las VLAN, y no es posible una configuración
específica para una VLAN.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2449

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla 1 se divide en las siguientes columnas:
● 1.ª columna
Indica que los ajustes son válidos para todas las VLAN de la tabla 2.
● Snooping / Querier
– Activado
La función está activada.
– Desactivado
La función está desactivada.
– No hay modificaciones
La tabla 2 no cambia.
● Copy to Table
Al hacer clic en este botón se aplican los ajustes a todos los puertos de la tabla 2.
La tabla 2 se divide en las siguientes columnas:
● VLAN
Indica la VLAN a la que se refieren los ajustes.
● Snooping
Active o desactive MLD para la VLAN deseada. Una vez activado, las entradas MLD se
incorporarán a la tabla de filtros Multicast y se reenviarán los paquetes MLD.
● Querier
Active o desactive el envío de peticiones MLD.

Broadcast
Bloqueo de la transmisión de telegramas Broadcast
En este menú se puede bloquear la transmisión de telegramas Broadcast para puertos
determinados.
Nota
Algunos protocolos de comunicación funcionan solo con la ayuda de Broadcast. En esos
casos, el bloqueo puede llevar al fallo de la comunicación de datos. Bloquee la función
Broadcast solo si está seguro de que puede prescindir de ella.

2450

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
La tabla 1 se divide en las siguientes columnas:
● 1.ª columna
Indica que el ajuste es válido para todos los puertos de la tabla 2.
● Ajuste
Seleccione el ajuste deseado. Existen las siguientes posibilidades de ajuste:
Activado
El bloqueo de telegramas Broadcast está activado.
Desactivado
El bloqueo de telegramas Broadcast está desactivado.
No hay modificaciones
La tabla 2 no cambia.
● Aplicar a tabla
Al hacer clic en este botón se aplica el ajuste a todos los puertos de la tabla 2.
La tabla 2 se divide en las siguientes columnas:
● Puerto
Se muestran todos los puertos disponibles y las Link Aggregations.
● Ajuste
Active o desactive el bloqueo de telegramas Broadcast.

PTP
General
Los dispositivos siguientes soportan la sincronización horaria mediante PTP:
● SCALANCE XR528-6M
● SCALANCE XR552-12M
IEEE 1588 en dispositivos SCALANCE
La norma IEEE 1588v2 define mecanismos con los que se consigue una sincronización de alta
precisión entre las horas de los dispositivos de una red. Los dispositivos SCALANCE con un
equipamiento de hardware adecuado soportan la sincronización horaria según IEEE 1588v2.
La funcionalidad está desactivada en el estado de suministro de los dispositivos y también tras
"Restablecer la configuración de fábrica". Para poder utilizar PTP hay que activar esta función
y configurar cada puerto que está dentro de la ruta de sincronización así como los puertos que
están bloqueados por mecanismos de redundancia. PTP también puede utilizarse con
mecanismos de redundancia en el anillo, como HRP, acoplamiento Standby de anillos, MRP
y RSTP.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2451

Configuración de dispositivos y redes
1.4 Crear configuraciones

Configuración
● Modo de operación 1588
Son posibles los siguientes ajustes:
– off
El dispositivo no procesa mensajes PTP. Sin embargo, los mensajes PTP son
transferidos siguiendo las reglas del switch.
– transparent
El dispositivo adopta la función de un Transparent Clock y reenvía los mensajes PTP a
otros dispositivos, no sin antes haber realizado entradas en el campo de corrección del
mensaje PTP.

TC General
En esta página se definen los ajustes generales de PTP.

1588 Transparent Clock Configuration
Mecanismo Delay
Especifique el mecanismo Delay con el que debe trabajar el dispositivo:
● End-to-End
(se utiliza el mecanismo Delay Request Response)
Nota
En la sincronización End-to-End con más de 2 esclavos pueden producirse valores
aberrantes > 100 ns en el offset.
● Peer-to-Peer
(se utiliza el mecanismo Peer Delay)
Número de dominio
Introduzca aquí el número de dominio del dispositivo. El dispositivo ignora los mensajes PTP
que tienen un número de dominio distinto. Un dispositivo SCALANCE solo puede estar
asignado a un dominio de sincronización.

Puerto TC
En esta página se encuentran los ajustes de puerto para PTP.

1588 Transparent Clock Port Parameters
La tabla 1 se divide en las siguientes columnas:
● 1.ª columna
Indica que los ajustes son válidos para todos los puertos.
● Ajuste
Seleccione el ajuste. Si está seleccionado "No hay modificaciones", la entrada de la tabla
2 permanece invariable.

2452

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Mecanismo de transporte
Existen las siguientes posibilidades de ajuste:
– Ethernet
– UDP IPv4
– No hay modificaciones
Si está seleccionado "No hay modificaciones", la entrada de la tabla 2 permanece
invariable.
● Aplicar a tabla
Al hacer clic en este botón se aplican los ajustes a todos los puertos de la tabla 2.
La tabla 2 se divide en las siguientes columnas:
● Puerto
El número del puerto. En equipos modulares, el número de slot y el número de puerto se
separan con un punto. PTP no se soporta en puertos SPF+.
● Ajuste
El estado del puerto. Se admiten los datos siguientes:
– Activado
El puerto no toma parte en PTP.
– Desactivado
El puerto procesa mensajes PTP.
● Flag de error
El estado de error en relación a PTP.
– verdadero
Se ha producido un error.
– falso
No hay errores en este puerto.
● Mecanismo de transporte
Seleccione la forma en que el puerto debe procesar el tráfico de datos de mensajes PTP.
Es posible realizar ajustes distintos para los puertos de un dispositivo, aunque el
interlocutor correspondiente debe soportar el mecanismo de transporte seleccionado.
Existen las siguientes posibilidades de ajuste:
– Ethernet
– UDP IPv4

RMON
Estadística
Estadística
En esta página se especifican los puertos para los que se visualizarán estadísticas RMON. Las
estadísticas RMON se muestran en "Longitudes de telegrama", "Tipo de telegrama" y "Error de
telegrama" de la página "Información > Estadísticas de Ethernet".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2453

Configuración de dispositivos y redes
1.4 Crear configuraciones

Ajustes
● RMON
Si está activado, Remote Monitoring (RMON) permite recopilar datos de diagnóstico en el
dispositivo, procesarlos y extraerlos a través de SNMP de una estación de gestión de red
que soporte también RMON. Estos datos de diagnóstico, como pueden ser evoluciones de
carga referidas a puertos, permiten detectar a tiempo problemas en la red y eliminarlos.
Nota
Si se desactiva RMON, las estadísticas no se borran sino que se conservan en el último
estado.
● Puerto
Seleccione los puertos para los que deban visualizarse estadísticas.
La tabla se divide en la siguiente columna:
● Puerto
Muestra los puertos para los que se visualizarán estadísticas.

Historial
Muestras de las estadísticas
En esta página se especifica si deben guardarse muestras de las estadísticas para un puerto.
Es posible definir cuántas entradas deben guardarse y en qué intervalo deben tomarse
muestras.

Ajustes
La tabla 1 se divide en las siguientes columnas:
● 1.ª columna
Indica que los ajustes son válidos para todos los puertos.
● Ajuste
Elija el ajuste deseado. Si está seleccionado "No hay modificaciones", la entrada de la tabla
2 permanece invariable.
● Entradas
Introduzca el número máximo de muestras que se guardan simultáneamente. Si está
registrado "No hay modificaciones", la entrada de la tabla 2 no varía.
● Intervalo [s]
Introduzca el intervalo tras el cual se guarda el estado actual de la estadística como
muestra. Si está registrado "No hay modificaciones", la entrada de la tabla 2 no varía.
● Aplicar a tabla
Al hacer clic en este botón se aplican los ajustes a todos los puertos de la tabla 2.

2454

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla 2 se divide en las siguientes columnas:
● Puerto
Indica el puerto al que se refieren los ajustes.
● Ajuste
Active o desactive la grabación del historial en el puerto correspondiente.
● Entradas
Introduzca el número máximo de muestras que se guardan simultáneamente. El número
máximo de entradas puede estar limitado por la capacidad del dispositivo.
Rango de valores: 1 - 65535
Ajuste de fábrica: 24
● Intervalo[s]
Introduzca el intervalo tras el cual se guarda el estado actual de la estadística como
muestra.
Rango de valores: 1 - 3600
Ajuste de fábrica: 3600

Configurar funciones de Layer 3 para IPv4
Configuración
Esta página contiene la vista general de las funciones de Layer 3 para IPv4 del dispositivo. En
ella se activan o desactivan las funciones de Layer 3 deseadas.
Las funciones "Routing", "VRRP", "RIP" y "OSPF" están disponibles solo con Layer 3.

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Routing (solo disponible en dispositivos con licencia para Layer 3)
– Activado
El routing IPv4 se activa. Solo es posible activar la función de routing cuando DHCP está
desactivado en todas las interfaces configuradas.
– Desactivado
El routing IPv4 se desactiva. Si el routing IPv6 está activado en el dispositivo, también
se desactivará.
● DHCP Relay Agent
Active o desactive el DHCP Relay Agent. Se pueden configurar otros ajustes en "Layer 3
(IPv4) > DHCP Relay Agent".
● VRRP (solo disponible en dispositivos con licencia para Layer 3)
Active o desactive el routing vía VRRP. Para utilizar VRRP, active primero la función
Routing. Se pueden configurar otros ajustes en "Layer 3 (IPv4) > VRRP".
● OSPF (solo disponible en dispositivos con licencia para Layer 3)
Active o desactive el enrutamiento vía OSPF. Para utilizar OSPF, active primero la función
Routing. Se pueden configurar otros ajustes en "Layer 3 (IPv4) > OSPF".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2455

Configuración de dispositivos y redes
1.4 Crear configuraciones
● RIP (solo disponible en dispositivos con licencia para Layer 3)
Active o desactive el routing vía RIP. Para utilizar RIP, active primero la función Routing. Se
pueden configurar otros ajustes en "Layer 3 (IPv4) > RIP".
● PIM-Routing (solo disponible en dispositivos con licencia para Layer 3)
Active o desactive el routing PIM. Se pueden configurar otros ajustes en "Layer 3 (IPv4) >
PIM".

Subredes
Sinopsis (IPv4)
Creación de subredes
Esta página muestra las subredes para la interfaz seleccionada. Si en una interfaz hay varias
subredes disponibles, la primera entrada de la interfaz tendrá el tipo de dirección "Primaria".
Todas las subredes restantes se crean en esta página. Una subred siempre se refiere a una
interfaz. La interfaz se crea en la ficha "Configuración".

Descripción de los valores mostrados
La página contiene los siguientes campos:
● Interfaz
Seleccione la interfaz en la que debe configurarse otra subred.
● Loopback
Active o desactive la propiedad "Loopback" en la interfaz IP. Para poder activar la propiedad
"Loopback" para una interfaz IP, la VLAN asignada no puede contener puertos Member.
Dado que la interfaz IP no está enlazada con puertos físicos, el estado operativo de la
interfaz IP será independiente del estado del Link de los puertos físicos. La interfaz
Loopback está disponible mientras el dispositivo esté conectado a la alimentación
correspondiente. Se puede acceder al dispositivo a través de la interfaz Loopback.
Nota
Una interfaz configurada como Loopback debe encontrarse en una subred propia con una
máscara de subred de como mínimo 30 bits.
La tabla se divide en las siguientes columnas:
● Interfaz
Muestra la interfaz.
● Interfaz TIA
Indica si la entrada es una interfaz TIA.
● Nombre de interfaz
Muestra el nombre de la interfaz.
● Dirección MAC
Muestra la dirección MAC.

2456

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Dirección IP
Muestra la dirección IPv4 de la subred.
● Máscara de subred
Muestra la máscara de subred.
● Tipo de dirección
Muestra el tipo de dirección. Son posibles los siguientes valores:
– Primaria
La primera dirección IPv4 configurada en una interfaz.
– Secundaria
Todas las demás direcciones IPv4 configuradas en una interfaz.
● Método de asignación de direcciones IP
Indica cómo se asigna la dirección IPv4.
– Estático
La dirección IP es estática. Los ajustes IP se introducen en "Dirección IP" y "Máscara de
subred".
– Automático (DHCP)
El dispositivo obtiene una dirección IPv4 dinámica de un servidor DHCP.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2457

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Estado de la detección de colisiones de direcciones
Si se activan direcciones IPv4 nuevas en la red, esta función comprueba si pueden
producirse colisiones de direcciones. Esta función permite detectar direcciones IPv4 que
deben asignarse por duplicado.
Indica el estado de la función "Detección de colisiones de direcciones".
Nota
La función no realiza ninguna comprobación cíclica.
– Idle
La interfaz no está activa y no tiene dirección IP.
– Starting
Este estado designa la fase de arranque. En esta fase, el dispositivo envía primero una
consulta acerca de si la dirección IP prevista ya existe. Si la dirección todavía no está
asignada, el dispositivo envía una notificación indicando que a partir de ahora utilizará
esta dirección IP.
– Conflict
La interfaz no está activa. La interfaz intenta utilizar una dirección IP que ya está
asignada.
– Defending
La interfaz utiliza una dirección IP unívoca. Otra interfaz intenta utilizar la misma
dirección IP.
– Active
La interfaz utiliza una dirección IP unívoca. No hay colisiones.
– Not supported
La función para detectar colisiones de direcciones no se soporta.
– Disabled
La función para detectar colisiones de direcciones está desactivada.
● Loopback
Muestra si la propiedad "Loopback" está activada.

Configuración
En esta página se configura la subred.

Descripción de los valores mostrados
La página contiene los siguientes campos:
● Interfaz (nombre)
Seleccione la interfaz deseada.
● Nombre de interfaz
Introduzca un nombre para la interfaz.
● Dirección MAC (solo disponible online)
Muestra la dirección MAC de la interfaz seleccionada.

2458

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● DHCP
Active o desactive el cliente DHCP para esta interfaz IPv4.
Nota
Si desea utilizar el dispositivo como router con varias interfaces, desactive DHCP en todas
las interfaces.
● Dirección IP
Introduzca la dirección IPv4 de la subred. No se permite el uso múltiple de la dirección IPv4.
● Máscara de subred
Introduzca la máscara de la subred que se va a crear. Las subredes de distintas interfaces
no deben solaparse.
● Tipo de dirección
Muestra el tipo de dirección. Son posibles los siguientes valores:
– Primaria
La primera subred de la interfaz.
– Secundaria
Todas las subredes restantes de la interfaz.
● Loopback
Muestra si la propiedad "Loopback" está activada.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2459

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Origen IP
Si la opción está activada, en los protocolos siguientes se utiliza la interfaz Loopback como
dirección IP de origen:
– RADIUS
– SNMPv1 Trap
– Syslog
– SNTP
– NTP
– SMTP
– TFTP
– SFTP
Esta opción puede ser útil, p. ej., cuando se utiliza un cortafuegos o la autenticación
mediante RADIUS. Puesto que un router con varias interfaces IP no indica siempre como
origen la misma interfaz IP, sin este ajuste deberían configurarse todas las interfaces IP de
un router en un servidor RADIUS o con un cortafuegos. Este ajuste permite utilizar un router
para la comunicación IP de salida de una interfaz Loopback y, por tanto, que el servidor
RADIUS y el cortafuegos solo tengan que conocer dicho router.
Si la opción está desactivada, en los protocolos se indica como origen la interfaz de salida.
● Interfaz TIA
Active o desactive el ajuste.
Para la interfaz TIA rigen las condiciones siguientes:
– Solo es posible activar como interfaz TIA las interfaces con el tipo de dirección
"Primario".
– Siempre debe haber una interfaz TIA.
– Solo puede haber una interfaz TIA.
– Una interfaz TIA es siempre una interfaz VLAN.

Interfaz TIA e interfaz PROFINET
La dirección IP de la interfaz TIA está enlazada con la dirección IP que se encuentra en el grupo
de parámetros "Propiedades > General > Interfaz PROFINET > Direcciones Ethernet".
Ambas direcciones IP tienen siempre el mismo valor. Si se modifica el valor de una dirección
IP, la otra dirección IP cambia en correspondencia.
Interfaz TIA
La interfaz TIA es una interfaz por la que transcurren todas las funciones PROFINET del IE
Switch.
Interfaz TIA es el nombre que se da a la dirección IP para PROFINET desde el punto de vista
del IE Switch.
Interfaz PROFINET
En la interfaz PROFINET se realiza el ajuste IP del dispositivo PROFINET en TIA.

2460

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Interfaz PROFINET es el nombre que se da a la dirección IP para PROFINET desde el punto
de vista del TIA Portal.

Pasarela predeterminada
Creación de subredes
En esta página se define la pasarela predeterminada.

Descripción de los valores mostrados
La página contiene los siguientes campos:
● Default Gateway
Indique la dirección IP de la interfaz que se utiliza como pasarela predeterminada.

NAT
NAT
En esta página del WBM se definen los ajustes básicos para NAT.

Descripción
La página contiene los siguientes campos:
● NAT
Active o desactive NAT/NAPT para todo el dispositivo. Cuando está activado, el dispositivo
ejerce de router NAT.
● Idle Timeout [s]
Introduzca el intervalo de tiempo deseado. El dispositivo comprueba cíclicamente, una vez
finalizado el intervalo indicado, si ha finalizado el Aging Time de las conexiones TCP y UDP.
Las conexiones cuyo Aging Time haya finalizado desde la última comprobación se borran
de la tabla "Traducciones NAT".
● TCP Timeout [s]
Introduzca el Aging Time deseado para conexiones TCP. Las conexiones TCP se guardan
hasta que no se producen más intercambios de datos en el intervalo de tiempo indicado. En
función de la comprobación cíclica, una vez transcurrido el Idle Timeout se borran las
conexiones de la tabla "Traducciones NAT".
● UDP Timeout [s]
Introduzca el Aging Time deseado para conexiones UDP. Las conexiones UDP se guardan
hasta que no se producen más intercambios de datos en el intervalo de tiempo indicado. En
función de la comprobación cíclica, una vez transcurrido el Idle Timeout se borran las
conexiones de la tabla "Traducciones NAT".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2461

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Interfaz
En la lista desplegable, seleccione la interfaz IP en la que desea configurar NAT. En cuanto
haya configurado una interfaz como interfaz NAT, todas las configuraciones restantes se
observarán desde la perspectiva de esa interfaz. De ese modo, para esa interfaz todas las
redes accesibles a través de la interfaz serán "Outside". Todas las redes restantes son
"Inside".
Nota
Si ha configurado varias interfaces NAT en un dispositivo, una red será "Outside" desde la
perspectiva de una interfaz NAT e "Inside" desde la perspectiva de otra interfaz NAT.
● NAT
Active o desactive NAT para una interfaz IP.
En la ficha "Grupo" se crea automáticamente una entrada. El dispositivo es accesible desde
la red externa a través de la dirección IP de la interfaz.
Si desactiva NAT para una interfaz IP y no hay ninguna configuración en la interfaz NAT, la
entrada se borra automáticamente de la tabla.
NAPT
Active o desactive NAPT para una interfaz IP.
La tabla se divide en las siguientes columnas:
● Interfaz
Interfaz a la que se refiere el ajuste.
● NAT
Indica si NAT está activado o desactivado para la interfaz IP seleccionada. NAT no se activa
hasta que se haya activado para todo el dispositivo.
● NAPT
Indica si NAPT está activado o desactivado para la interfaz IP seleccionada. NAPT no se
activa hasta que se ha activado NAT para todo el dispositivo. Si no se realiza ninguna otra
configuración para NAPT, la conversión de puerto dinámica estará activada
automáticamente. Por defecto un dispositivo de la red interna no será accesible desde una
red externa. Si el dispositivo interno desea comunicarse dentro de una red externa, la
dirección Inside Local y la dirección IP de la interfaz IP se complementan con un puerto y
se asignan al dispositivo interno como dirección Inside Local e Inside Global. El dispositivo
interno será accesible desde la red externa a través de esa dirección Inside Global hasta
que el temporizador de la conexión complete su tiempo.

Estático
En esta página WBM se configuran conversiones de dirección estáticas 1:1.
Se determina en qué dirección Inside Global se convierte la dirección Inside Local de un
dispositivo y vice versa. Esta variante permite establecer conexiones en ambos sentidos. El
dispositivo de la red interna es accesible desde la red externa.

2462

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Interfaz
Seleccione una interfaz NAT de la lista desplegable, para la que desea realizar otras
configuraciones NAT.
● Dirección Inside Local
Indique la dirección real del dispositivo al que debe accederse externamente.
● Dirección Inside Global
Indique la dirección en la que se accede al dispositivo externamente.
La tabla se divide en las siguientes columnas:
● 1.ª columna
Active la casilla de verificación correspondiente a la fila que desea borrar.
● Interfaz
Interfaz NAT a la que se refiere el ajuste.
● Dirección Inside Local
Muestra la dirección real del dispositivo al que debe accederse externamente.
● Dirección Inside Global
Muestra la dirección en la que se debe acceder al dispositivo externamente.

Pool
En esta página WBM se configuran conversiones de dirección dinámicas.
Por defecto el dispositivo no será accesible desde una red externa. Si el dispositivo desea
comunicarse dentro de una red externa, se le asigna dinámicamente una dirección Inside
Global. El dispositivo será accesible desde la red externa a través de esa dirección Inside
Global hasta que el temporizador de la conexión complete su tiempo.

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Interfaz
Seleccione una interfaz NAT de la lista desplegable, para la que desea realizar otras
configuraciones NAT.
● Dirección Inside Global
Indique la dirección inicial para la asignación dinámica de direcciones en las que se debe
acceder a dispositivos externamente.
● Máscara de dirección Inside Global
Introduzca la dirección de máscara de la subred externa.
La tabla se divide en las siguientes columnas:
● 1.ª columna
Active la casilla de verificación correspondiente a la fila que desea borrar.
● Interfaz
Interfaz a la que se refiere el ajuste.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2463

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Dirección Inside Global
Muestra la dirección inicial para la asignación dinámica de direcciones en las que se debe
acceder a dispositivos externamente.
● Máscara de dirección Inside Global
Introduzca la mascara de dirección de la subred externa.

NAPT
En esta página WBM se configuran conversiones de puerto estáticas.

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Interfaz
Seleccione una interfaz NAT de la lista desplegable, para la que desea realizar otras
configuraciones NAT.
● Dirección Inside Local
Indique la dirección real del dispositivo al que debe accederse externamente.
● Servicio
Seleccione para qué servicio es vigente la conversión de puerto.
Si selecciona un servicio, en los campos Puerto inicial y Puerto final se registrará el mismo
puerto. Si cambia el puerto inicial, el puerto final cambiará de la forma correspondiente.
Si selecciona la entrada "-", podrá indicar los puertos inicial y final libremente.
● Puerto inicial
Introduzca un puerto.
● Puerto final
Dependiendo de la selección realizada en la lista desplegable "Servicio", se podrá
introducir un puerto o se indicará uno.
Si en los campos Puerto inicial y Puerto final ha indicado puertos diferentes, en el campo
Puerto Inside Global se registrará el mismo rango de puertos. Un rango de puertos solo
puede convertirse al mismo rango de puertos.
Si en los campos Puerto inicial y Puerto final ha indicado el mismo puerto, el Puerto Inside
Global podrá seleccionarse libremente.
● Puerto Inside Global
Dependiendo de la selección realizada en la lista desplegable "Servicio", se podrá
introducir un puerto o se indicará uno.
● Protocolo
Seleccione para qué protocolo es vigente la conversión de puerto.
● Descripción
Introduzca una descripción para la conversión de puerto.
La tabla se divide en las siguientes columnas:
● 1.ª columna
Active la casilla de verificación correspondiente a la fila que desea borrar.
● Interfaz
Interfaz NAT a la que se refiere el ajuste.

2464

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Dirección Inside Local
Muestra la dirección real del dispositivo al que debe accederse externamente.
● Puerto inicial
Indica el puerto inicial asignado a la Dirección Inside Local.
● Puerto final
Indica el puerto final asignado a la Dirección Inside Local.
● Protocolo
Indica para qué protocolo es vigente la conversión de puerto.
● Dirección Inside Global
Muestra la dirección en la que se debe acceder al dispositivo externamente.
● Puerto Inside Global
Indica el puerto que se asigna a la Dirección Inside Local.
● Descripción
Muestra la descripción para la conversión de puerto.

Rutas estáticas (IPv4)
Ruta estática
En esta página se crean rutas IPv4 estáticas.

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Red de destino
Introduzca la dirección de red del destino al que se accede a través de esta ruta.
● Máscara de subred
Introduzca la máscara de subred correspondiente.
● Pasarela
Introduzca la dirección IPv4 de la pasarela que da acceso a esta dirección de red.
● Distancia administrativa
Introduzca la distancia administrativa para la ruta. La distancia administrativa corresponde
a la calidad de una conexión, basada p. ej. en velocidad o costes. Si hay varias rutas
iguales, se utilizará la que tenga el valor más pequeño. El valor predeterminado es -1. Este
ajuste significa que la métrica no está activada.
Rango de valores: 1 - 254
La tabla se divide en las siguientes columnas:
● Red de destino
Indica la dirección de la red de destino.
● Máscara de subred
Muestra la máscara de subred correspondiente.
● Gateway
Indica la dirección IPv4 de la siguiente pasarela.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2465

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Interfaz (solo disponible online)
Muestra la interfaz de la ruta.
● Distancia administrativa
Introduzca la distancia administrativa para la ruta. Al crear la ruta se registra
automáticamente "No utilizado" (valor -1). La distancia administrativa corresponde a la
calidad de una conexión, basada p. ej. en velocidad o costes. Si hay varias rutas iguales,
se utilizará la que tenga el valor más pequeño. Rango de valores: 1 - 254
● Estado (solo disponible online)
Indica si la ruta está activa o no.

Route Maps
General (IPv4)
Route Maps
Los Route Maps permiten controlar el procesamiento posterior de la información de routing.
Existe la posibilidad de filtrar la información de routing y determinar si debe seguir
procesándose, modificarse o rechazarse.
Los Route Maps trabajan de acuerdo con el principio siguiente:
● La información de routing se compara con los filtros de los Route Maps.
● La comparación continúa hasta que los filtros de un Route Map coinciden con las
propiedades de una información.
● Seguidamente, la información se procesa de acuerdo con los ajustes del Route Map:
– La información de routing se rechaza.
– Las propiedades de la información de routing se modifican.

Descripción de los campos mostrados
● Nombre
Introduzca aquí el nombre del Route Map.
● Número de secuencia
Introduzca un número para el Route Map.
Existe la posibilidad de crear varios Route Maps con el mismo nombre y números de
secuencia distintos. El número de secuencia determina el orden en el que se procesan los
Route Maps.

2466

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla se divide en las siguientes columnas:
● Nombre
Muestra el nombre del Route Map.
● Número de secuencia
Muestra el número de secuencia del Route Map.
● Acción
Especifique lo que pasará con la información de routing que coincide con los ajustes del
Route Map:
– permit
La información de routing se seguirá procesando de acuerdo con los ajustes de la ficha
"Ajustar".
– deny
La información de routing se rechaza.

Filtrar interfaz y valor (IPv4)
En esta página se especifica si la información de routing para un Route Map debe filtrarse por
interfaces, métrica o tags.

Descripción de los campos mostrados
● Route Map (nombre/n.º sec.)
Seleccione un Route Map.
Están disponibles los Route Maps creados.
● Tipo
Elija el criterio de filtrado:
– Interfaz
– Métrica
– Identificador
– Tipo de ruta
– Tipo de métrica
● Interfaz
Seleccione una interfaz.
Solo está activo si en "Tipo" se ha seleccionado la entrada "Interfaz".
● Métrica
Introduzca un valor para la métrica.
Esta campo solo está activo si en "Tipo" se ha seleccionado la entrada "Métrica".
● Identificador
Introduzca un valor para el identificador.
Este campo solo está activo si en "Tipo" se ha seleccionado la entrada "Identificador".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2467

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Tipo de ruta
Seleccione el tipo de ruta:
– Local
La información de routing para Route Map se filtra por rutas conectadas directamente
(interfaces locales).
– Remote
La información de routing para Route Map se filtra por rutas aprendidas o configuradas
estáticamente.
Este campo solo está activado si en la lista desplegable "Tipo" ha seleccionado la entrada
"Tipo de ruta".
● Tipo de métrica
Seleccione el tipo de métrica:
– Interárea
La información de routing para Route Map se filtra por rutas aprendidas de otras áreas.
– Intraárea
La información de routing para Route Map se filtra por rutas que proceden de la misma
área.
– tipo 1 externo
La información de routing para Route Map se filtra por rutas cuyos costes de
encaminamiento (métrica) se componen de una parte externa y de otra hacia ASBR.
– tipo 2 externo
La información de routing para Route Map se filtra por rutas con costes de
encaminamiento (métrica) externos.
Este campo solo está activo si en la lista desplegable "Tipo" se ha seleccionado la entrada
"Tipo de métrica".
La tabla se divide en las siguientes columnas:
● Tipo
Muestra el tipo seleccionado:
– Interfaz
– Métrica
– Identificador
– Tipo de ruta
– Tipo de métrica
● Valor
Muestra la interfaz seleccionada o el valor de la métrica o del tag.

Filtrar destino (IPv4)
En esta página se especifica si la información de routing para un Route Map debe filtrarse por
la dirección IPv4 de destino.

2468

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
● Route Map (nombre/n.º sec.)
Seleccione un Route Map.
● Dirección IP
Introduzca la dirección IPv4 del destino que debe servir de filtro.
● Máscara de subred
Introduzca la máscara de subred del destino que debe servir de filtro.
La tabla se divide en las siguientes columnas:
● Dirección IP
Muestra la dirección IPv4 del destino.
● Máscara de subred/prefijo
Muestra la máscara de subred del destino.

Filtrar siguiente salto (IPv4)
En esta página se especifica si para un Route Map debe filtrarse por el router que debe enviar
la próxima información de routing.

Descripción de los campos mostrados
● Route Map (nombre/n.º sec.)
Seleccione un Route Map.
● Dirección IP
Introduzca la dirección IP del router por el que debe enviarse la próxima información de
routing.
La tabla se divide en las siguientes columnas:
● Dirección IP
Muestra la dirección IP del próximo router.

Ajustar (IPv4)
En esta página se especifica si la información de routing debe modificarse mediante un Route
Map.
Si, por ejemplo, se ha filtrado por una métrica concreta, aquí puede cambiarse el valor de dicha
métrica. Seguidamente, la información de routing se reenviará con el nuevo valor. Solo es
posible modificar la información de un Route Map "Permit".

Descripción de los campos mostrados
● Route Map (nombre/n.º sec.)
Seleccione un Route Map.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2469

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla se divide en las siguientes columnas:
● Nombre
Muestra el nombre del Route Map.
● Número de secuencia
Muestra el número de secuencia del Route Map.
● Métrica
Introduzca el nuevo valor de la métrica con el que se reenviará la información de routing.
● Identificador
Introduzca el nuevo valor del identificador con el que se reenviará la información de routing.

DHCP Relay Agent
General
Si el servidor DHCP se encuentra en otra red diferente a la del cliente DHCP, el cliente no
podrá acceder al servidor. El DHCP Relay Agent ejerce de intermediario entre servidor DHCP
y cliente DHCP. Si configura la opción 82, el DHCP Relay Agent amplía los paquetes que van
al servidor DHCP con una Circuit ID y una Remote ID.
Para el DHCP Relay Agent se pueden indicar hasta 4 servidores DHCP. Si un servidor DHCP
no está accesible, el dispositivo puede cambiar a otro servidor DHCP.

Descripción de los campos mostrados
● DHCP Relay Agent
Active o desactive el DHCP Relay Agent.
● Enviar opción 82
Active o desactive la opción 82.
● Dirección Agent común
Active o desactive la dirección común de agente. Si la función está activada, el Relay Agent
sustituye la dirección del puerto receptor en la petición DHCP por la dirección de la interfaz
configurada en "Interfaz Agent común".
● Interfaz Agent común
El Relay Agent utiliza la dirección IP de la interfaz seleccionada aquí como dirección de
origen (giaddr) en peticiones DHCP.
● Dirección IP del servidor
Introduzca la dirección IPv4 del servidor DHCP.
La tabla se divide en las siguientes columnas:
● Dirección IP de servidor
Muestra la dirección IPv4 del servidor DHCP.

2470

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Opción
Parámetros de DHCP Relay Agent
En esta página se definen los parámetros del servidor DHCP, p. ej. la Circuit ID. La Circuit ID
describe la procedencia de la petición DHCP, p. ej. qué puerto ha recibido la petición DHCP.
Los servidores DHCP se definen en la ficha "General".

Descripción de los campos mostrados
La página contiene los siguientes campos:
Configuración global
● Índice del router de Circuit ID
Active o desactive el ajuste. Cuando está activado, el índice de router se agrega a la Circuit
ID creada.
● ID de VLAN de receptor de Circuit ID
Active o desactive el ajuste. Cuando está activado, la ID de VLAN se agrega a la Circuit ID
creada.
● Puerto receptor de Circuit ID
Active o desactive el ajuste. Cuando está activado, el puerto de receptor se agrega a la
Circuit ID creada.
Nota
Hay que seleccionar como mínimo una opción.
Encontrará más información sobre el índice de router (Circuit ID Router Index) y el índice de
puerto (Circuit ID Receive Port) en la IfTable sobre SNMP.
● ID remota
Muestra el identificador de dispositivo.
Configuración específica de la interfaz
● Interfaz
Seleccione la interfaz IPv4 deseada.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2471

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla se divide en las siguientes columnas:
● Interfaz
Muestra la interfaz.
Nota
Si no se ha creado ninguna configuración específica de la interfaz se utilizará la
configuración global con la dirección MAC como identificador de dispositivo.
● Tipo de ID remota
Seleccione el tipo de identificador de dispositivo. Existen las siguientes posibilidades:
– Dirección IP
Como identificador de dispositivo se utiliza la dirección IPv4 del dispositivo.
Nota
Sin actualización automática
No hay ningún enlace entre el campo "ID remota" y la dirección IP ajustada actualmente.
Si se cambia la dirección IP, la nueva dirección IP no se introduce automáticamente en
el campo "ID remota". Solo cambia el valor del campo "Tipo de ID remota" en "Free
Text". Para volver a utilizar la dirección IP actual, seleccione de nuevo "Dirección IP" en
el campo "Tipo de ID remota".
– Dirección MAC
Como identificador de dispositivo se utiliza la dirección MAC del dispositivo.
– Cualquier texto
Si se utiliza "Cualquier texto", se puede utilizar el nombre del dispositivo como
identificador de dispositivo en "ID remota".
● ID remota
Introduzca el nombre del dispositivo. Este campo solo es editable si en "Tipo de ID remota"
se selecciona la entrada "Cualquier texto".
● Tipo de Circuit ID
Seleccione el tipo de Circuit ID en la lista desplegable. Existen las siguientes posibilidades:
– Predefinido
La Circuit ID se genera automáticamente a partir del Router Index, la ID de VLAN o el
puerto.
– Cualquier número
Si se utiliza "Cualquier número" se puede introducir la ID en "Circuit ID".
● Circuit ID
Introduzca la Circuit ID. El campo solo es editable si en "Tipo de Circuit ID" se selecciona
la entrada "Cualquier número".

2472

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

VRRP
Router
El botón "Crear" permite crear nuevos routers virtuales. Como máximo pueden configurarse 52
routers virtuales. Se pueden configurar otros parámetros en la ficha "Configuración".
Nota
● VRRP solo está disponible para Layer 3.
● Active "VRRP" para configurar VRRP.
● El funcionamiento simultáneo de VRRP y VRRPv3 no es posible.
● VRRP solo puede utilizarse en combinación con interfaces VLAN. No se admiten puertos
router.

Descripción de los campos mostrados
La página contiene los siguientes campos:
● VRRP
Active o desactive el enrutamiento vía VRRP.
● Responder a solicitudes Ping en interfaces virtuales
Si está activado, también responden al Ping las direcciones IPv4 virtuales.
● Tracking VRID
Active o desactive el Tracking VRID. Cuando está activado se vigilan todas las instancias
VRRP. Si el estado de una instancia VRRP cambia a "Initialize", la prioridad de todas las
instancias VRRP se reduce al valor "1". Si el estado de la instancia VRRP cambia, se
restablece la prioridad original de todas las instancias VRRP.
● Interfaz
Seleccione la interfaz VLAN deseada que ejerce de router virtual.
● VRID
Introduzca la ID del router virtual en el campo de entrada. Esta ID define el grupo de routers
que forman un router virtual (VR). En el grupo la ID es igual. No puede utilizarse para otros
grupos. Los valores válidos son de 1 a 255.
La tabla se divide en las siguientes columnas:
● Interfaz
Indica la interfaz que ejerce de router virtual.
● VRID
Muestra la ID del router virtual.
● Dirección MAC virtual
Muestra la dirección MAC virtual del router virtual.
● Dirección IP primaria
Indica la dirección IPv4 que tiene el número más bajo en esa VLAN. La entrada 0.0.0.0
significa que la dirección "Primaria" se utiliza en esa VLAN. En cualquier otro caso, serán
válidas todas las direcciones IPv4 que hayan sido configuradas en esa VLAN en "Layer 3
(IPv4) > Subred".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2473

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Estado del router (solo disponible online)
Indica el estado actual del router virtual. Los valores posibles son:
– Master
El router es el router maestro y adopta la funcionalidad de routing para todas las
direcciones IP asignadas.
– Backup
El router es el de reserva. Si el router maestro falla, el router de reserva adopta las
funciones del maestro.
– Initialize
El router virtual acaba de ser conectado. En breve, pasará al estado "Master" o "Backup".
● Dirección IP maestra (solo disponible online)
Muestra la dirección IPv4 del router maestro.
● Prioridad
Muestra la prioridad del router virtual.
Cuando se asigna al router VRRP una dirección IPv4 que realmente está configurada
también en la interfaz IPv4 local, se introduce automáticamente el valor 255. Todas las
prioridades restantes pueden distribuirse libremente entre los routers VRRP. Cuanto mayor
sea la prioridad, antes pasará el router VRRP a "Master".
● Advert. Interval
Muestra el intervalo con el que el router maestro envía paquetes VRRP.
● Interrumpir
Muestra la preferencia de un router al cambiar de función entre reserva y maestro.
– yes
Este router tiene preferencia al cambiar de función.
– no
Este router no tiene preferencia al cambiar de función.

VRRP y servidor DHCP
Si desea utilizar un servidor DHCP en los dispositivos de un grupo VRRP, el servidor DHCP
debe estar configurado en el router maestro. Los routers de reserva no reaccionan a peticiones
DHCP. Asegúrese de que el router maestro está configurado de forma estática y de que siga
siendo el maestro del grupo VRRP después de un fallo.

Configuración
Introducción
En esta página se configura el router virtual.
Nota
VRRP solo está disponible para Layer 3.

2474

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Interfaz / VRID
Seleccione la ID del router virtual que debe configurarse.
● Dirección IP primaria
Seleccione la dirección IPv4 que tenga el número más bajo. Si el router va a ser el maestro,
utilizará esta dirección IPv4.
Nota
Si en esta VLAN solo configura una subred, no es necesaria ninguna entrada. La entrada
será en este caso 0.0.0.0.
Si configura varias subredes en la VLAN y desea utilizar una dirección IPv4 determinada
como dirección de origen para paquetes VRRP, seleccione una dirección IPv4 adecuada
en la lista desplegable. En cualquier otro caso se utiliza la dirección IPv4 con el número más
bajo.
● Master
Si esta opción está activada, se introducirá la dirección IPv4 con el número más bajo en
"Dirección IP asignada". De este modo, la dirección IPv4 prioritaria del router VRRP se
utiliza como dirección IP virtual del router maestro virtual. Los routers de reserva de este
grupo tienen que desactivar esta opción y utilizar la dirección IPv4 del router en "Dirección
IP asignada".
● Prioridad
Introduzca la prioridad de este router virtual.
Cuando se asigna al router VRRP una dirección IPv4 que realmente está configurada
también en la interfaz IPv4 local, se introduce automáticamente el valor 255. Todas las
prioridades restantes pueden distribuirse libremente entre los routers VRRP. Cuanto mayor
sea la prioridad, antes pasará el router VRRP a "maestro".
● Intervalo Advertisement
Introduzca el intervalo en segundos tras el cual un router maestro vuelve a enviar un
paquete VRRP.
● Interrumpir router de baja prioridad
Permita los privilegios para cambiar de función entre reserva y maestro basándose en el
proceso de selección.
● ID de seguimiento
Seleccione un ID de seguimiento.
● Reducir la prioridad
Indique con qué valor se reduce la prioridad de la interfaz VRRP.
● Prioridad actual
Muestra la prioridad de la interfaz VRRP conforme a la cual la interfaz vigilada ha cambiado
al estado "down".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2475

Configuración de dispositivos y redes
1.4 Crear configuraciones

Sinopsis de direcciones
Sinopsis
Esta página muestra qué direcciones IPv4 vigila el router virtual. Cada router virtual puede
vigilar como máximo 10 direcciones IPv4.
Nota
VRRP solo está disponible para Layer 3.

Descripción de los campos mostrados
La tabla se divide en las siguientes columnas:
● Interfaz
Indica la interfaz que ejerce de router virtual.
● VRID
Muestra la ID de este router virtual.
● Número de direcciones
Muestra el número de direcciones IPv4.
● Dirección IP asignada (1) ... Dirección IP asignada (4)
Muestra las direcciones IPv4 de router vigiladas por este router virtual. Si un router adopta
la función de maestro, la función Routing de todas estas direcciones IPv4 es asumida
también por ese router.

Configuración de direcciones
Crear o modificar las direcciones IPv4 vigiladas
En esta página se pueden crear, cambiar o borrar las direcciones IPv4 sometidas a vigilancia.
Un router virtual puede vigilar como máximo 10 direcciones IPv4.
Nota
VRRP solo está disponible para Layer 3.

Descripción de los valores mostrados
Son posibles los siguientes ajustes:
● Interfaz / VRID
Seleccione el router virtual deseado.
● Dirección IP asignada
Introduzca la dirección IPv4 que debe vigilar el router virtual. El máximo son 10 direcciones
IPv4.

2476

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla se divide en la siguiente columna:
● Dirección IP asignada
Muestra las direcciones IPv4 vigiladas por el router virtual.

Vigilancia de interfaces
Introducción
En esta página se configura la vigilancia de interfaces.
Si el enlace de una interfaz vigilada cambia de "up" a "down", la prioridad de la interfaz VRRP
asignada se reduce. El valor con el que se reducirá la prioridad se configura en la página "Layer
3 > VRRP/VRRPv3 > Configuración".
Si el enlace de la interfaz vuelve a cambiar de "down" a "up", se restablece la prioridad original
de la interfaz VRRP.
Nota
Esta función solo está disponible con Layer 3.

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Interfaz
Seleccione en la lista desplegable la interfaz que debe vigilarse.
● ID de seguimiento
Introduzca una ID de seguimiento.
● ID de seguimiento
Seleccione una ID de seguimiento.
● Contador de interfaces de seguimiento
Indique cuántas de las interfaces vigiladas deben cambiar al estado "down" antes de
cambiar la prioridad.
La tabla se divide en las siguientes columnas:
● ID de seguimiento
Indica la ID de seguimiento.
● Interfaz
Muestra la interfaz vigilada.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2477

Configuración de dispositivos y redes
1.4 Crear configuraciones

VRRPv3
Router (IPv4)
Introducción
En esta página se crean routers virtuales nuevos. Se pueden configurar otros parámetros en
"Layer 3 (IPv4) > VRRPv3 > Configuración".
Nota
● Esta función solo está disponible con Layer 3.
● El funcionamiento simultáneo de VRRP y VRRPv3 no es posible.
● Active la casilla de verificación "VRRPv3" para configurar VRRPv3.
● VRRPv3 puede utilizarse en interfaces VLAN. No se admiten puertos router.

Descripción de los campos mostrados
La página contiene lo siguiente:
● VRRPv3
Active o desactive el routing vía VRRPv3. Solo puede activarse si "Routing IPv6" está
activado en "Layer 3 (IPv6) > Configuración".
● Responder a solicitudes Ping en interfaces virtuales
Si está activado, también responden al Ping las direcciones IPv4 virtuales.
● Tracking VRID
Active o desactive el Tracking VRID. Cuando está activado se vigilan todas las instancias
VRRP. Si el estado de una instancia VRRP cambia a "Initialize", la prioridad de todas las
instancias VRRP se reduce al valor "1". Si el estado de la instancia VRRP cambia, se
restablece la prioridad original de todas las instancias VRRP.
● Interface
Seleccione la interfaz VLAN deseada que ejerce de router virtual.
● VRID
Introduzca la ID del router virtual. Esta ID define el grupo de routers que forman un router
virtual (VR). En el grupo la ID es igual. No puede utilizarse para otros grupos. Los valores
válidos son de 1 a 255.
La tabla se divide en las siguientes columnas:
● Interface
Indica la interfaz IPv4 que ejerce de router virtual.
● VRID
Muestra la ID del router virtual.
● Virtual MAC Address
Muestra la dirección MAC virtual del router virtual.

2478

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Primary IP Address
Indica la dirección IPv4 que tiene el número más bajo en esa VLAN. La entrada 0.0.0.0
significa que en esa VLAN se utiliza la dirección "Primary". En cualquier otro caso, serán
válidas todas las direcciones IPv4 que hayan sido configuradas en en el menú "Layer 3
(IPv4) > Subnets".
● Router State
Indica el estado actual del router virtual. Los valores posibles son:
– Master
El router es el router maestro y adopta la funcionalidad de routing para todas las
direcciones IPv4 asignadas.
– Backup
El router es el de reserva. Si el router maestro falla, el router de reserva adopta las
funciones del maestro.
– Initialize
El Router virtual acaba de ser conectado. En breve, pasará al estado "Master" o
"Backup".
● Master IP Address
Muestra la dirección IPv4 del router maestro.
● Priority
Muestra la prioridad del router virtual. Los valores válidos son de 1 a 254. Cuando se asigna
al router VRRP una dirección IPv4 que realmente está configurada también en la interfaz
IPv4 local, se introduce automáticamente el valor 255. Todas las prioridades restantes
pueden distribuirse libremente entre los routers VRRP. Cuanto mayor sea la prioridad,
antes pasará el router VRRP a "Master".
● Intervalo Advert.
Muestra el intervalo con el que el router maestro envía paquetes VRRPv3.
● Preempt
Muestra la preferencia de un router al cambiar de función entre reserva y maestro.
– sí
Este router tiene preferencia al cambiar de función.
– no
Este router no tiene preferencia al cambiar de función.

VRRP y servidor DHCP
Si desea utilizar un servidor DHCP en los dispositivos de un grupo VRRP, el servidor DHCP
debe estar configurado en el router maestro. Los routers de reserva no reaccionan a peticiones
DHCP. Asegúrese de que el router maestro está configurado de forma estática y de que siga
siendo el maestro del grupo VRRP después de un fallo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2479

Configuración de dispositivos y redes
1.4 Crear configuraciones

Configuración (IPv4)
Introducción
En esta página se configura el router virtual.
Nota
Esta función solo está disponible con Layer 3.

Descripción de los campos mostrados
La página contiene lo siguiente:
● Interface / VRID
Seleccione la ID del router virtual que debe configurarse.
● Primary Address
Seleccione la dirección IPv4 prioritaria. Si el router va a ser el maestro, utilizará esta
dirección IPv4.
Nota
Si en esta VLAN solo configura una subred, no es necesaria ninguna entrada. La entrada
será en este caso 0.0.0.0.
Si configura varias subredes en la VLAN y desea utilizar una dirección IPv4 determinada
como dirección de origen para paquetes VRRP, seleccione una dirección IPv4 adecuada.
En cualquier otro caso se utiliza la dirección IPv4 con el número más bajo.
● Master
Si está activado, se introducirá la dirección IPv4 con el número más bajo en "Associated IP
Address". De este modo, la dirección IPv4 con el número más bajo del router VRRPv3 se
utiliza como dirección IP virtual del router maestro virtual. Los routers de reserva de este
grupo tienen que desactivar esta opción y utilizar la dirección IPv4 del router en "Associated
IP Address".
● Priority
Introduzca la prioridad de este router virtual. Los valores válidos son 1-254.
Cuando se asigna al router VRRPv3 una dirección IPv4 que realmente está configurada
también en la interfaz IPv4 local, se introduce automáticamente el valor 255. Todas las
prioridades restantes pueden distribuirse libremente entre los routers VRRPv3. Cuanto
mayor sea la prioridad, antes pasará el router VRRPv3 a "Master".
● Advertisement Interval
Introduzca el intervalo en segundos tras el cual un router maestro vuelve a enviar un
paquete VRRPv3.
● Preempt lower priority Master
Permita la preferencia para cambiar de función entre reserva y maestro basándose en el
proceso de selección.

2480

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● VRRP Compatible Mode
Cuando está activado, el router VRRPv3 envía y recibe no solo telegramas VRRPv3, sino
también telegramas VRRPv2 para direcciones IPv4 configuradas. Solo es necesario
cuando no todos los routers VRRP soportan VRRPv3
● ID de seguimiento
Seleccione un ID de seguimiento.
● Reducir la prioridad
Indique con qué valor se reduce la prioridad de la interfaz VRRPv3.
● Prioridad actual
Muestra la prioridad de la interfaz VRRPv3 conforme a la cual la interfaz vigilada ha
cambiado al estado "down".

Sinopsis de direcciones (IPv4)
Sinopsis
Esta página muestra qué direcciones IPv4 vigila el router virtual. Cada router virtual puede
vigilar como máximo 10 direcciones IPv4.
Nota
Esta función solo está disponible con Layer 3.

Descripción de los campos mostrados
La tabla se divide en las siguientes columnas:
● Interface
Indica la interfaz que ejerce de router virtual.
● VRID
Muestra la ID de este router virtual.
● Number of Addresses
Muestra el número de direcciones IPv4.
● Dirección IP asignada (1) ... Dirección IP asignada (10)
Muestra las direcciones IPv4 de router vigiladas por este router virtual. Si un router adopta
la función de maestro, la función Routing de todas estas direcciones IPv4 es asumida
también por ese router.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2481

Configuración de dispositivos y redes
1.4 Crear configuraciones

Configuración de direcciones (IPv4)
Crear o modificar las direcciones IP vigiladas
En esta página se pueden crear, cambiar o borrar las direcciones IPv4 sometidas a vigilancia.
Nota
Esta función solo está disponible con Layer 3.

Descripción de los campos mostrados
La página contiene lo siguiente:
● Interface / VRID
Seleccione la ID del router virtual.
● Associated IP Address
Introduzca la dirección IPv4 que debe vigilar el router virtual. El máximo son 10 direcciones
IPv4.
La tabla se divide en las siguientes columnas:
● Associated IP Address
Muestra las direcciones IPv4 vigiladas por el router virtual.

Vigilancia de interfaces (IPv4)
Introducción
En esta página se configura la vigilancia de interfaces.
Si el enlace de una interfaz vigilada cambia de "up" a "down", la prioridad de la interfaz VRRP
asignada se reduce. El valor con el que se reducirá la prioridad se configura en la página "Layer
3 > VRRP/VRRPv3 > Configuración".
Si el enlace de la interfaz vuelve a cambiar de "down" a "up", se restablece la prioridad original
de la interfaz VRRP.
Nota
Esta función solo está disponible con Layer 3.

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Interfaz
Seleccione en la lista desplegable la interfaz que debe vigilarse.
● ID de seguimiento
Introduzca una ID de seguimiento.

2482

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● ID de seguimiento
Seleccione una ID de seguimiento.
● Contador de interfaces de seguimiento
Indique cuántas de las interfaces vigiladas deben cambiar al estado "down" antes de
cambiar la prioridad.
La tabla se divide en las siguientes columnas:
● ID de seguimiento
Indica la ID de seguimiento.
● Interfaz
Muestra la interfaz vigilada.

OSPFv2
Configuración
Introducción
En esta página se configura el Routing vía OSPF.
Nota
OSPF solo está disponible para Layer 3.

Descripción de los campos mostrados
La página contiene los siguientes campos:
● OSPFv2
Active o desactive el routing vía OSPFv2.
● ID de router
Introduzca una denominación para una de las interfaces OSPFv2. La denominación se
introduce en formato de dirección IP y no tiene que coincidir obligatoriamente con la propia
dirección IP. La ID de router debe ser inequívoca dentro de la red.
● Compatibilidad OSPFv2 - RFC1583
Active esta opción si utiliza routers OSPFv2 antiguos, no compatibles con RFC 2328.
● Border Router
Muestra el estado del router OSPFv2. Si el sistema local es miembro activo de al menos 2
áreas, se trata de un Area Border Router.
● AS Border Router
Especifique si el router es un AS Border Router. Un AS Border Router ejerce de
intermediario entre varios sistemas autónomos, p. ej. si hay una red RIP adicional. Un AS
Border Router también se necesita para agregar y distribuir rutas estáticas.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2483

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Nuevo LSA recibido (solo disponible online)
Muestra el número de LSA que se han recibido. Las actualizaciones y los LSA propios no
se contabilizan.
● Nuevo LSA configurado (solo disponible online)
Indica el número de LSAs diferentes que han sido enviados por este sistema local.
● Número máximo de LSAs externos
Para limitar las entradas de LSAs externos en la base de datos, introduzca el número
máximo de LSAs externos.
● Intervalo Exit [s]
Introduzca el intervalo tras el cual el router OSPFv2 debe intentar de nuevo salir del estado
Overflow. 0 significa que el router OSPFv2 solo volverá a intentar salir del estado Overflow
en un arranque.
● Filtro de entrada
Seleccione un Route Map que filtre rutas entrantes.
● Redistribución de rutas
Defina qué rutas conocidas se transmiten vía OSPFv2. Se pueden tomar diferentes
decisiones para los tipos de ruta Default, Connected y Static.
Nota
Los ajustes solo pueden activarse en un AS Border Router. Especialmente la activación de
las opciones Default y Static puede causar problemas si se activan en demasiados puntos
de la red, p. ej. Forwarding Loops.
● Route Map
Seleccione un Route Map que filtre las rutas que se transfieren vía OSPFv2.
● Ajuste específico del protocolo
– Distancia predeterminada
Defina la distancia administrativa para el protocolo OSPFv2.
● Ajuste específico de Route Map
– Distancia Route Map
Seleccione en la lista desplegable un Route Map para el que desee definir la distancia
administrativa.
– Distancia
Configure la distancia administrativa para el Route Map previamente seleccionado.

Areas
Sinopsis
Una red autónoma (Autonomous System) se puede dividir en áreas más pequeñas (Areas).

2484

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
En esta página se pueden ver, crear, cambiar o borrar las áreas del router.
Nota
OSPF solo está disponible para Layer 3.

Descripción de los valores mostrados
● Area ID
Indique la denominación del área. La base de datos se sincroniza para todos los routers de
un área. La denominación de área debe ser inequívoca dentro de la red. Es una cifra de 32
bits que se introduce con este formato: x.x.x.x, siendo x = 0 ... 255
La denominación de área 0.0.0.0 está reservada para el área Backbone y no puede
borrarse.
La tabla contiene las siguientes columnas:
● Area ID
Indica la ID del área.
● Tipo de área
Seleccione el tipo de área en la lista desplegable.
– Normal
– Stub
– NSSA
– Backbone
● Summary
Especifique si para esta área se generan Summary LSAs.
– Summary: los Summary LSA se envían al área.
– No Summary: los Summary LSA no se envían al área.
● Métrica
Muestra los costes de la interfaz OSPFv2.
● Actualizaciones
Muestra el número de recálculos de las tablas de routing.
● Contador LSA
Muestra el número de LSA en la base de datos.
● Area BR
Muestra el número de Area Border Router (ABR) accesibles dentro de esta área.
● AS BR
Muestra el número de Autonomous System Border Router (ASBR) accesibles en esta área.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2485

Configuración de dispositivos y redes
1.4 Crear configuraciones

Rango de áreas
Creación de un nuevo rango de área OSPFv2.
En esta página existe la posibilidad de agrupar redes en una Area ID. Este procedimiento se
aplica solo a routers Area Border. Con él, un Area Border Router propaga hacia fuera una sola
ruta para áreas de direcciones agrupadas.
Nota
OSPF solo está disponible para Layer 3.

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Area ID
Seleccione la ID de área. La ID se configura en "Layer 3 > OSPFv2 > Áreas".
● Dirección de subred
Introduzca la dirección IPv4 de la red que se agrupa.
● Máscara de subred
Introduzca la máscara de subred de la red que se agrupa.
La tabla contiene las siguientes columnas:
● Area ID
Indica la ID del área.
● Dirección de subred
Indica la dirección IPv4 de la red que se agrupa con otras redes.
● Máscara de subred
Indica la dirección de subred de la red que se agrupa con otras redes.
● Advertise
Active este ajuste para publicar la red agrupada.

Interfaces
Sinopsis
En esta página se pueden configurar interfaces OSPFv2.
Nota
OSPF solo está disponible para Layer 3.

2486

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Dirección IP
Seleccione la dirección IPv4 de la interfaz OSPFv2.
● Area ID
Seleccione la ID de área con la que está conectada la interfaz OSPFv2.
Nota
Seleccione para la interfaz secundaria la misma Area ID que para la interfaz primaria
correspondiente.
Encontrará información para saber si se trata de una interfaz primaria o secundaria en la
columna "Tipo de dirección" de la página "Layer 3 (IPv4)" > "Subredes" > "Sinopsis".
La tabla contiene las siguientes columnas:
● Dirección IP
Muestra la dirección IPv4 de la interfaz OSPFv2.
● Tipo de dirección
Hay dos tipos de dirección:
– Primaria
– Secundaria
Las filas de las direcciones secundarias están atenuadas y muestran los valores de la
dirección primaria correspondiente.
● Area ID
Seleccione la ID de área con la que está conectada la interfaz OSPFv2.
● Interfaz pasiva
Defina el comportamiento de la interfaz:
– Activado
A través de esta interfaz no se envía ni se aprende información OSPFv2 (p. ej.
telegramas Hello y actualizaciones LSDB).
– Desactivado
A través de esta interfaz se envía y aprende información OSPFv2.
● Métrica
Introduzca los costes para la interfaz OSPFv2.
● Prioridad
Introduzca la prioridad del router. La prioridad solo es relevante para la selección del router
o Border Router designados. Este parámetro puede ser diferente en routers de una misma
subred.
Rango de valores: de 0 a 255
Ajuste predeterminado: 1
● Trans. Delay
Introduzca el retardo deseado al enviar una actualización de conexión.
Rango de valores: de 1 s a 3600 s
Ajuste predeterminado: 1 s

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2487

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Retrans. Delay
Introduzca el tiempo tras el cual se vuelve a enviar un paquete OSPFv2 si no se ha recibido
ninguna confirmación.
Rango de valores: de 1 s a 3600 s
Ajuste predeterminado: 5 s
● Intervalo Hello
Introduzca la distancia entre dos paquetes Hello.
Rango de valores: de 1 s a 65.535 s
Ajuste predeterminado: 10 s
● Intervalo Dead
Introduzca el intervalo tras el cual el router vecino se marca como "fallido" si durante ese
tiempo no se ha recibido ningún paquete Hello de él.
Ajuste predeterminado: 40 s

Autenticación de interfaz
Configuración de la autentificación de interfaz
En esta página se define la autentificación de la interfaz.
Nota
OSPF solo está disponible para Layer 3.

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Interfaz OSPF
Seleccione la interfaz OSPFv2 para la que desea configurar la autenticación.
● Tipo de autenticación
Seleccione el método de autentificación de la interfaz OSPF. Existen las siguientes
posibilidades:
– Ninguna:
Sin autenticación
– Sencilla:
Autenticación a través de una contraseña no codificada
– MD5:
Autentificación mediante MD5
Sección "Autenticación sencilla"
● Contraseña
Introduzca una contraseña.
● Confirmación
Confirme la contraseña introducida.

2488

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Sección "Autenticación MD5"
● ID de clave de autentificación
Indique la identificación de la clave de autenticación MD5. Para la autenticación con MD5,
introduzca la ID con la que debe usarse la contraseña como clave. Dado que la ID de clave
se transmite con el protocolo, en todos los routers vecinos tiene que estar guardada la
misma clave bajo la misma ID de clave.
La tabla se divide en las siguientes columnas:
● ID de clave de autentificación
Solo puede editarse si se ajusta el método de autentificación MD5. Solo en él se pueden
utilizar varias claves.
● Clave MD5
Introduzca la clave MD5.
● Confirmar clave MD5
Confirme la clave introducida.
● ID de clave (solo disponible online)
Indica si la clave MD5 es la ID de clave más reciente.

Virtual Links
Sinopsis
Por razones relacionadas con el protocolo, cada Area Border Router debe tener acceso al área
Backbone. Si un router no está conectado directamente al área Backbone, se establece con él
una conexión virtual.
Nota
OSPF solo está disponible para Layer 3.
Nota
Recuerde que al crear una conexión virtual es necesario que estén configurados previamente
tanto el área Transit, como el área Backbone.
La conexión virtual tiene que tener la misma configuración en ambos lados.

Descripción de los campos mostrados
La página contiene la indicación siguiente:
● Los enlaces virtuales no serán efectivos mientras el dispositivo no sea ABR. (solo
disponible online)
Esta nota se muestra cuando se ha configurado al menos una entrada Virtual Link y el
dispositivo no es un Area Border Router.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2489

Configuración de dispositivos y redes
1.4 Crear configuraciones
La página contiene los siguientes campos:
● ID de router vecino
Introduzca la ID del router vecino situado en el otro lado de la conexión virtual.
● Transit Area ID
Elija la ID del área que une ambos routers.
La tabla contiene las siguientes columnas:
● Transit Area ID
Muestra la ID que une ambos routers.
● ID de router vecino
Muestra la ID del router vecino situado en el otro lado de la conexión virtual.
● Estado Virt. Link
Especifique el estado en el que se encuentra la conexión virtual. Son posibles los siguientes
estados:
– down: La conexión virtual está inactiva.
– point-to-point: La conexión virtual está activa.
● Trans. Delay
Introduzca el retardo deseado al enviar un paquete Link Update.
Rango de valores: 1 s a 3600 s
Ajuste predeterminado: 1 s
● Retrans. Delay
Introduzca el tiempo tras el cual se vuelve a enviar un paquete si no se ha recibido ninguna
confirmación.
Rango de valores: 1 s a 3600 s
Ajuste predeterminado: 5 s
● Intervalo Hello
Introduzca la distancia entre dos paquetes Hello.
Rango de valores: 1 s a 65.535 s
Ajuste predeterminado: 10 s
● Intervalo Dead
Introduzca el intervalo tras el cual el router vecino se considera "fallido" si durante ese
tiempo no se ha recibido ningún paquete Hello de él.
Ajuste predeterminado: 40 s

Autentificación de Virtual Link
Configuración del inicio de sesión de la interfaz
En esta página se define la autenticación de la interfaz.
Nota
OSPF solo está disponible para Layer 3.

2490

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Virtual Link (área/vecino)
Seleccione el link virtual para el que desea configurar la autenticación.
● Tipo de autenticación
Seleccione el método de autentificación de la interfaz OSPF. Existen las siguientes
posibilidades:
– Ninguna
Sin autenticación
– Sencilla
Autenticación a través de una contraseña no codificada
– MD5
Autenticación a través de MD5
Sección "Autenticación sencilla"
● Contraseña
Introduzca la contraseña.
● Confirmación
Confirme la contraseña introducida.
Sección "Autenticación MD5"
● ID de clave de autentificación
Indique la identificación de la clave de autenticación MD5. Para la autentificación con MD5,
introduzca la ID con la que debe usarse la contraseña como clave.
Dado que la ID de clave se transmite con el protocolo, en todos los routers vecinos tiene que
estar guardada la misma clave bajo la misma ID de clave.
La tabla se divide en las siguientes columnas:
● ID de clave de autentificación
Solo puede editarse si se ajusta el método de autentificación MD5. Solo en él se pueden
utilizar varias claves.
● Clave MD5
Introduzca la clave MD5.
● Confirmar clave MD5
Confirme la clave introducida.
● ID de clave más reciente
Indica si la clave MD5 es la ID de clave más reciente.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2491

Configuración de dispositivos y redes
1.4 Crear configuraciones

RIPv2
Configuración
En esta página se configura el routing vía RIP.
Nota
RIPv2 solo está disponible para Layer 3.

Descripción de los campos mostrados
● RIPv2
Active o desactive el routing vía RIPv2 .
● Filtro de entrada
Seleccione un Route Map que filtre rutas entrantes.
● Redistribución de rutas
Especifique qué rutas conocidas se transmiten vía RIPv2.
Existen los siguientes tipos de ruta:
– Static Default
– Connected
– Static
– OSPF
● Route Map
Seleccione un Route Map que filtre las rutas que se transfieren vía RIPv2.
● Ajuste específico del protocolo
– Distancia predeterminada
Defina la distancia administrativa para el protocolo OSPFv2.
● Ajuste específico de Route Map
– Distancia Route Map
Seleccione en la lista desplegable un Route Map para el que desee definir la distancia
administrativa.
– Distancia
Configure la distancia administrativa para el Route Map previamente seleccionado.

2492

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Interfaces
Sinopsis
En esta página se pueden configurar interfaces RIPv2.
Nota
RIPv2 solo está disponible para Layer 3.

Descripción de los campos mostrados
● Dirección IP
Seleccione la dirección IPv4 de la interfaz RIPv2.
La tabla contiene las siguientes columnas:
● Dirección IP
Muestra la dirección IPv4 de la interfaz RIPv2.
● Enviar actualizaciones
Elija el modo en que deben enviarse las actualizaciones:
– no send
No se envían actualizaciones.
– RIPv1
Se envían actualizaciones para RIPv1.
– RIPv1-compat.
Se envían actualizaciones RIPv2 como Broadcasts según las reglas de RIPv1.
– RIPv2
Se envían actualizaciones para RIPv2 como Multicast.
– RIPv1 demand/RIPv2 demand
Los paquetes RIP se envían solo como respuesta a demandas explícitas.
● Recibir actualizaciones
Elija el modo en que deben aceptarse las actualizaciones recibidas:
– no receive
No se reciben actualizaciones.
– RIPv1
Se reciben solo actualizaciones de RIPv1.
– RIPv2
Se reciben solo actualizaciones de RIPv2.
– RIPv1/v2
Se reciben actualizaciones de RIPv1 y RIPv2.
● Métrica predeterminada
Introduzca los costes para la interfaz RIPv2.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2493

Configuración de dispositivos y redes
1.4 Crear configuraciones

IGMP
IGMP
En esta página se configura IGMP (Internet Group Management Protocol). IGMP es un
protocolo de red utilizado para el IP-Multicast. Con IP-Multicasting los paquetes IP de una
dirección IP se distribuyen simultáneamente a varios clientes. IGMP puede gestionar grupos
Multicast dinámicos y estáticos.

Descripción de los campos mostrados
La página contiene los siguientes campos:
● IGMP
Active o desactive IGMP (Internet Group Management Protocol) para todo el dispositivo.
● Interface
Seleccione la interfaz en la que desea configurar IGMP.
La tabla se divide en las siguientes columnas:
● Interface
Muestra la interfaz.
● Version
Elija la versión de IGMP.
● Query Interval [s]
Defina el intervalo en el que el router Multicast envía consultas IGMP.
Indicación en segundos
● Max. Response Time [1/10 s]
Defina el intervalo de tiempo dentro de una consulta IGMP durante el cual el cliente puede
responder a una consulta.
Valores en décimas de segundo
● Explicit Tracking
Active o desactive la función "Explicit Tracking" para la interfaz.
Si la función "Explicit Tracking" está activada, el router Multicast realiza un seguimiento
exacto de los clientes que inician (Join) y cierran sesión (Leave) en el grupo Multicast. En
cuanto el último cliente haya cerrado sesión en un grupo Multicast, el router Multicast
borrará el grupo. Dado que el router Multicast dispone de información exacta sobre los
clientes que han iniciado y cerrado sesión, el router Multicast no tiene que consultar si aún
queda algún cliente que quiere recibir el Multicast.
● Admin State
Active o desactive IGMP en la interfaz.
● OperState
Muestra el estado operativo de la interfaz, consulte también "System > Ports > Overview":
– Up
– Down

2494

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

PIM
Configuración
En esta página se configura PIM.
Nota
PIM solo está disponible para Layer 3.

Descripción de los campos mostrados
● PIM Routing
Active o desactive PIM globalmente en el dispositivo.
● Static Rendezvous Point (RP)
Active o desactive que el dispositivo se comporte como un punto de encuentro estático.
● Bidirectional Multicast
Active o desactive la función de Multicast bidireccional globalmente en el dispositivo.

Interfaz
Sinopsis
En esta página se configuran interfaces PIM.
Nota
PIM solo está disponible para Layer 3.

Descripción de los campos mostrados
Esta página contiene los siguientes campos:
● Interface
Seleccione una interfaz IP VLAN.
● PIM
Si activa la casilla de verificación, se asignará la interfaz PIM seleccionada.
● Bootstrap Router (BSR) Candidate
Si activa esta casilla de verificación, estará especificando que la interfaz debe ser candidata
para el router Bootstrap. Un BSR coordina los puntos de encuentro en una red PIM.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2495

Configuración de dispositivos y redes
1.4 Crear configuraciones
● BSR Candidate Value
Indique la prioridad de la interfaz como candidato BSR.
Con la prioridad se especifica qué candidato se convertirá en BSR. El candidato con mayor
prioridad será BSR.
Si se ha establecido la misma prioridad para dos candidatos, en caso necesario se decidirá
por la dirección IP de la interfaz. La interfaz con la dirección IP más alta será BSR.
Un BSR coordina los puntos de encuentro en una red PIM.
● Designated Router (DR) Priority
Indique la prioridad DR de la interfaz.
Con la prioridad RP se especifica qué candidato se convertirá en DR. El candidato con
mayor prioridad será DR.
Si se ha establecido la misma prioridad para dos candidatos, en caso necesario se decidirá
por la dirección IP de la interfaz. La interfaz con la dirección IP más alta será DR.
El DR reenvía los IGMP Joins al punto de encuentro.
● BSR Border
Si está activado, no habrá comunicación BSR a través de la interfaz. De ese modo una red
PIM se divide en dominios PIM.

RP Static
Sinopsis
En esta página se especifican las interfaces que deben ser puntos de encuentro estáticos.
Configure el RP estático en todos los dispositivos del componente PIM.
Nota
PIM solo está disponible para Layer 3.

Descripción de los campos mostrados
Esta página contiene los siguientes campos:
● Group Address
Indique la dirección del grupo Multicast para el que la interfaz debe ser RP.
● Group Mask
Indique la máscara de subred que limita la banda Multicast.
● RP Address
Introduzca la dirección IP de la interfaz que debe ser RP.
● Bidirectional Multicast
Active o desactive la función de Multicast bidireccional para un grupo multicast.
Configure la función para un grupo Multicast en todos los RPs igual.
Si activa la función para una dirección RP, la función se activará para todas las entradas
existentes y futuras de esa dirección RP.

2496

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla contiene las siguientes columnas:
● Select
Seleccione la fila que desea borrar.
● Group Address
Muestra la dirección del grupo Multicast.
● Group Mask
Muestra la máscara de subred.
● RP Address
Muestra la dirección IP del RPs.
● Bidirectional Multicast
Indica si la función "Multicast bidireccional" está activada o desactivada para un grupo
Multicast.

Candidato RP
Sinopsis
En esta página se especifican las interfaces que deben ser candidatas para el punto de
encuentro (RP).
Dentro de una red PIM pueden configurarse varios candidatos para el RP. El BSR coordina los
candidatos y determina el RP.
Nota
PIM solo está disponible para Layer 3.

Descripción de los campos mostrados
Esta página contiene los siguientes campos:
● Group Address
Indique la dirección del grupo Multicast.
● Group Mask
Indique la máscara de subred que limita la banda Multicast.
● RP Interface
Seleccione la interfaz que debe convertirse en candidato RP.
● Bidirectional Multicast
Active o desactive la función de Multicast bidireccional para un grupo multicast.
Configure la función para un grupo Multicast en todos los RPs igual.
Si activa la función para una interfaz RP, la función se activará para todas las entradas
existentes y futuras de esa interfaz RP.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2497

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla contiene las siguientes columnas:
● Select
Seleccione la fila que desea borrar.
● Group Address
Muestra la dirección del grupo Multicast.
● Group Mask
Muestra la máscara de subred.
● RP Candidate
Muestra la dirección IP del RPs.
● Bidirectional Multicast
Indica si la función "Multicast bidireccional" está activada o desactivada para un grupo
Multicast.
● RP Priority
Indique la prioridad de la interfaz.
Con la prioridad se especifica qué candidato se convertirá en punto de encuentro. El
candidato con mayor prioridad será RP (punto de encuentro). Cuanto menor sea el valor,
mayor será la prioridad.
Si se ha establecido la misma prioridad para dos candidatos, en caso necesario se decidirá
por la dirección IP de la interfaz. La interfaz con la dirección IP más baja será RP.

MSDP
Configuración
Sinopsis
En esta página se puede configurar MSDP.
MSDP (Multicast Source Discovery Protocol) se soporta dentro de un dominio PIM SM en
combinación con RPs Anycast. Los RPs Anycast representan un concepto de redundancia
para RPs. Los RPs afectados reciben todos la misma dirección IP y se dan a conocer en la red.
Los RPs están enlazados entre sí a través de sesiones MSDP. Los RPs sincronizan sus
orígenes Multicast mediante mensajes Source Active.
Configure MSDP en los puntos de encuentro.
MSDP solo puede utilizarse si la función "Multicast bidireccional" está desactivada en la red
PIM.
Nota
MSDP solo está disponible para Layer 3.

2498

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
Esta página contiene los siguientes campos:
● MSDP
Active o desactive MSDP.
● Originator ID
Seleccione una interfaz para la identificación de la estación MSDP. Esta ID de originiador
debe ser unívoca dentro de la red.
● Cache Life Time
Indique el tiempo restante después del cual se borrará una entrada del caché SA con
información de otro RP si no se reciben actualizaciones de caché SA. Una vez que se ha
creado o actualizado una entrada, se inicia un temporizador, que cuenta hacia atrás el
tiempo definido. Las actualizaciones del caché SA se reciben cíclicamente y reinician el
temporizador de la entrada. Si el temporizador llega al final sin que se haya recibido una
actualización de caché SA, la entrada en cuestión se borrará.
Si está ajustado el valor "0", las entradas de caché SA no se guardan.
● Listener Port
Puerto TCP a través del cual el dispositivo se comunica con otros dispositivos MSDP. Si
modifica el Listener Port, solo se verán afectadas las conexiones MSDP creadas después
de la modificación. Las conexiones MSDP ya existentes continuarán utilizando el Listener
Port anterior.

Peer
Sinopsis
En esta página se configuran los interlocutores PIM.
Nota
MSDP solo está disponible para Layer 3.

Descripción de los campos mostrados
Esta página contiene los siguientes campos:
● Peer Address
Indique la dirección IP del interlocutor MSDP con el que el dispositivo debe establecer una
conexión.
● Connected Interface
Seleccione la interfaz a través de la cual el dispositivo se comunica con el interlocutor
MSDP.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2499

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla contiene las siguientes columnas:
● Select
Seleccione la fila que desea borrar.
● Peer Address
Muestra la dirección del interlocutor MSDP.
● Local Address
Muestra la dirección IP de la interfaz a través de la cual el dispositivo se comunica con el
interlocutor MSDP.
● Admin State
Active o desactive la conexión.
● Connection Status
Muestra el estado de la conexión.
– Listening
El dispositivo espera la conexión.
– Connecting
Establecimiento de la conexión
– Established
La conexión está establecida.
– Inactive
La conexión no está activa.
– Disabled
La conexión está desactivada.
● Keepalive Interval [s]
Defina el intervalo en el que el dispositivo envía mensajes Keepalive a los interlocutores
MSDP.
● Peer Hold Time Interval [s]
Defina el tiempo después del cual se deshace una conexión MSDP si no se recibe ningún
mensaje Keepalive del interlocutor MSDP.
● Connect Retry Interval [s]
Defina el intervalo tras el cual se intenta establecer una conexión. Si no existe una conexión
MSDP con un interlocutor, una vez concluido el intervalo de reintento de conexión se
intenta establecer una conexión.
● TTL Threshold
Defina el número máximo de routers que pueden atravesarse hasta el interlocutor MSDP
(Hop Count). Si se rebasa por exceso el valor indicado, el telegrama se descarta.

2500

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Configurar funciones de Layer 3 para IPv6
Configuración
Introducción
Esta página contiene la vista general de las funciones de Layer 3 para IPv6. En ella se activa
o desactiva la función de Layer 3 deseada.
Las funciones "IPv6 Routing", "VRRPv3" y "OSPFv3" solo están disponibles para Layer 3
(IPv6).

Descripción de los campos mostrados
● Routing IPv6 (solo disponible en dispositivos con licencia para Layer 3)
– Activado
El routing IPv6 se activa. Si el routing IPv4 no está activado en el dispositivo, también se
activará con esta función.
– Desactivado
El routing IPv6 se desactiva.
● VRRPv3 (solo disponible en dispositivos con licencia para Layer 3)
Active o desactive el routing vía VRRPv3. Para utilizar VRRPv3, active primero la función
IPv6 Routing. Se pueden configurar otros ajustes en "Layer 3 (IPv6) > VRRPv3".
● OSPFv3 (solo disponible en dispositivos con licencia para Layer 3)
Active o desactive el routing vía OSPFv3. Se pueden configurar otros ajustes en "Layer 3
(IPv6) > OSPFv3".

Subredes (IPv6)
Subredes conectadas
En esta página se activa IPv6 en la interfaz. La interfaz también se denomina interfaz IPv6. Una
interfaz IPv6 puede tener varias direcciones IPv6.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2501

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
La página contiene lo siguiente:
● Interface
Seleccione la interfaz IP para la que se activará IPv6.
● IPv6 Enable
Active o desactive IPv6 para esta interfaz.
Nota
Desactivar IPv6
En cuanto se activa IPv6 en la interfaz IP, solo es posible volver a desactivarlo eliminando
la interfaz.
● IPv6 Address
Indique la dirección IPv6. La entrada depende del tipo de dirección seleccionado.
● Prefix Length
Indique el número de bits a la izquierda que forman parte del prefijo
● IPv6 Address Type
Seleccione el tipo de dirección:
– Unicast
– Anycast
– Link Local: la dirección IPv6 solo es válida en el link
● Address Autoconfiguration (SLAAC)
Active o desactive el mecanismo SLAAC (Stateless Address Auto Configuration) para la
configuración de direcciones.
Si SLAAC está activado, se produce una autoconfiguración sin estado a través de NDP
(Neighbor Discovery Protocol).
Si la opción está desactivada la configuración de direcciones estará vinculada al estado. El
dispositivo obtiene la dirección IPv6 y el archivo de configuración de un servidor DHCPv6.
La tabla se divide en las siguientes columnas:
● Interface Name
Muestra el nombre de la interfaz.
● IPv6 Address
Muestra la dirección IPv6 de la subred.
● Prefix Length
Indica la longitud de prefijo.
● IPv6 Address Type
Muestra el tipo de dirección. Son posibles los siguientes valores:
– Unicast
– Anycast
– Link Local

2502

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Loopback
Muestra si la propiedad "Loopback" está activada. La propiedad "Loopback" se configura
en la página "Layer 3 (IPv4) > Subredes > Sinopsis".
● Duplicate Address Detection Status
Con Address Autoconfiguration (SLAAC), la función "Duplicate Address Detection Status"
impide que las direcciones IPv6 se asignen por duplicado. En la configuración automática,
el dispositivo solo puede utilizar direcciones IPv6 no asignadas.
Si la función está activada, la comprobación se realiza automáticamente mediante NDP.
Nota
La función no realiza ninguna comprobación cíclica.
Esta columna indica en qué estado se encuentra la función. Son posibles los siguientes
valores:
– Tentative
Este estado indica que se comprueba la dirección IPv6 seleccionada. El dispositivo
envía un mensaje Neighbor Solicitation a la dirección IPv6 seleccionada.
– Conflict
Este estado indica que la dirección IPv6 ya se utiliza. En este caso, el dispositivo recibe
un mensaje Neighbor Advertisement con la dirección IPv6 seleccionada. El dispositivo
crea una dirección IPv6 nueva y vuelve a comprobarla.
– Complete
Este estado indica que la dirección IPv6 seleccionada puede utilizarse. En este caso, el
dispositivo no ha recibido ninguna respuesta en un intervalo de tiempo determinado y
supone que la dirección IPv6 todavía no está asignada.
– Down
Este estado indica que la interfaz no está activa. No tiene lugar ninguna comprobación.

Rutas estáticas (IPv6)
En esta página se configuran rutas IPv6 estáticas.

Descripción de los campos mostrados
La página contiene lo siguiente:
● Destination Network
Introduzca la dirección de red del destino al que se accede a través de esta ruta.
● Prefix Length
Indique el número de bits a la izquierda que forman parte del prefijo
● Gateway
Introduzca la dirección IPv6 de la pasarela que da acceso a esta dirección de red.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2503

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Métrica
Introduzca la métrica de la ruta. La métrica corresponde a la calidad de una conexión en
base a la velocidad o los costes, por ejemplo. Si hay varias rutas iguales, se utilizará la que
tenga el valor más pequeño.
Rango de valores: 1 - 254
● Interface
Defina la interfaz IPv6 por la que se accede a la dirección de red del destino.
La tabla contiene las siguientes columnas:
● Destination Network
Indica la dirección de red IPv6 del destino.
● Prefix Length
Indica la longitud de prefijo.
● Gateway
Indica la dirección IPv6 de la siguiente pasarela.
● Interface
Muestra la interfaz de la ruta.
● Métrica
Introduzca la métrica de la ruta. Al crear la ruta se registra automáticamente "not used". La
métrica corresponde a la calidad de una conexión en base a la velocidad o los costes, por
ejemplo. Si hay varias rutas iguales, se utilizará la que tenga el valor más pequeño.
Rango de valores: 1 - 254
● State
Indica si la ruta está activa o no.

Route Maps
General (IPv6)
Route Maps
Los Route Maps permiten controlar el procesamiento posterior de la información de routing.
Existe la posibilidad de filtrar la información de routing y determinar si debe seguir
procesándose, modificarse o rechazarse.
Los Route Maps trabajan de acuerdo con el principio siguiente:
● La información de routing se compara con los filtros de los Route Maps.
● La comparación continúa hasta que los filtros de un Route Map coinciden con las
propiedades de una información.
● Seguidamente, la información se procesa de acuerdo con los ajustes del Route Map:
– La información de routing se rechaza.
– Las propiedades de la información de routing se modifican.

2504

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
● Nombre
Introduzca aquí el nombre del Route Map.
● Número de secuencia
Introduzca un número para el Route Map.
Existe la posibilidad de crear varios Route Maps con el mismo nombre y números de
secuencia distintos. El número de secuencia determina el orden en el que se procesan los
Route Maps.
La tabla se divide en las siguientes columnas:
● Nombre
Muestra el nombre del Route Map.
● Número de secuencia
Muestra el número de secuencia del Route Map.
● Acción
Especifique lo que pasará con la información de routing que coincide con los ajustes del
Route Map:
– permit
La información de routing se seguirá procesando de acuerdo con los ajustes de la ficha
"Ajustar".
– deny
La información de routing se rechaza.

Filtrar interfaz y valor (IPv6)
En esta página se especifica si la información de routing para un Route Map debe filtrarse por
interfaces, métrica o tags.

Descripción de los campos mostrados
● Route Map (nombre/n.º sec.)
Seleccione un Route Map.
Están disponibles los Route Maps creados.
● Tipo
Elija el criterio de filtrado:
– Interfaz
– Métrica
– Identificador
– Tipo de ruta
– Tipo de métrica
● Interfaz
Seleccione una interfaz.
Solo está activo si en "Tipo" se ha seleccionado la entrada "Interfaz".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2505

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Métrica
Introduzca un valor para la métrica.
Esta campo solo está activo si en "Tipo" se ha seleccionado la entrada "Métrica".
● Identificador
Introduzca un valor para el identificador.
Este campo solo está activo si en "Tipo" se ha seleccionado la entrada "Identificador".
● Tipo de ruta
Seleccione el tipo de ruta:
– Local
La información de routing para Route Map se filtra por rutas conectadas directamente
(interfaces locales).
– Remote
La información de routing para Route Map se filtra por rutas aprendidas o configuradas
estáticamente.
Este campo solo está activado si en la lista desplegable "Tipo" ha seleccionado la entrada
"Tipo de ruta".
● Tipo de métrica
Seleccione el tipo de métrica:
– Interárea
La información de routing para Route Map se filtra por rutas aprendidas de otras áreas.
– Intraárea
La información de routing para Route Map se filtra por rutas que proceden de la misma
área.
– tipo 1 externo
La información de routing para Route Map se filtra por rutas cuyos costes de
encaminamiento (métrica) se componen de una parte externa y de otra hacia ASBR.
– tipo 2 externo
La información de routing para Route Map se filtra por rutas con costes de
encaminamiento (métrica) externos.
Este campo solo está activo si en la lista desplegable "Tipo" se ha seleccionado la entrada
"Tipo de métrica".
La tabla se divide en las siguientes columnas:
● Tipo
Muestra el tipo seleccionado:
– Interfaz
– Métrica
– Identificador
– Tipo de ruta
– Tipo de métrica
● Valor
Muestra la interfaz seleccionada o el valor de la métrica o del tag.

2506

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Filtrar destino (IPv6)
En esta página se especifica si la información de routing para un Route Map debe filtrarse por
la dirección IPv6 de destino.

Descripción de los campos mostrados
● Route Map (Name/Seq. No.)
Seleccione un Route Map.
● IP Address
Introduzca la dirección IPv6 del destino que debe servir de filtro.
● Prefix Length
Indique el número de bits a la izquierda que forman parte del prefijo
La tabla se divide en las siguientes columnas:
● IP Address
Muestra la dirección IPv6 del destino.
● Prefix Length
Indica la longitud de prefijo.

Filtrar siguiente salto (IPv6)
En esta página se especifica si para un Route Map debe filtrarse por el router que debe enviar
la próxima información de routing.

Descripción de los campos mostrados
● Route Map (nombre/n.º sec.)
Seleccione un Route Map.
● Dirección IP
Introduzca la dirección IP del router por el que debe enviarse la próxima información de
routing.
La tabla se divide en las siguientes columnas:
● Dirección IP
Muestra la dirección IP del próximo router.

Ajustar (IPv6)
En esta página se especifica si la información de routing debe modificarse mediante un Route
Map.
Si, por ejemplo, se ha filtrado por una métrica concreta, aquí puede cambiarse el valor de dicha
métrica. Seguidamente, la información de routing se reenviará con el nuevo valor. Solo es
posible modificar la información de un Route Map "Permit".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2507

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
● Route Map (nombre/n.º sec.)
Seleccione un Route Map.
La tabla se divide en las siguientes columnas:
● Nombre
Muestra el nombre del Route Map.
● Número de secuencia
Muestra el número de secuencia del Route Map.
● Métrica
Introduzca el nuevo valor de la métrica con el que se reenviará la información de routing.
● Identificador
Introduzca el nuevo valor del identificador con el que se reenviará la información de routing.

DHCPv6 Relay Agent
Interfaces
Un DHCPv6 Relay Agent reenvía las peticiones DHCP del cliente DHCPv6 al servidor
DHCPv6. Durante el reenvío, la ID remota se inserta en la petición DHCP. La ID remota es el
identificador de la interfaz, que permite al DHCPv6 Agent enviar la respuesta del servidor
DHCPv6 al cliente DHCPv6 deseado.

Descripción de los campos mostrados
● ID remota (opc. 37)
Si está activado se utiliza la opción 37 (ID remota) del DHCP Relay Agent. Defina el tipo de
identificador en "Tipo de ID remota".
● Interface
Seleccione la interfaz IPv6.
La tabla se divide en las siguientes columnas:
● Interface
Interfaz a la que se refieren los ajustes.
● ID remota actual
Indica la ID remota que se está utilizando.

2508

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Remote ID Type
Seleccione lo que debe utilizarse como identificador de la interfaz IPv6. Existen las
siguientes posibilidades:
– DUID
DHCP Unique Identifier
– System Name
Nombre de sistema del dispositivo
– Management IP
Dirección IPv6 de gestión del dispositivo
– User Defined
Entrada personalizada
● Sufijo de índice de router
Si la casilla de verificación está activada, el sufijo de índice de router se adjunta a la ID
remota.
● Sufijo de ID de VLAN
Si la casilla de verificación está activada, el sufijo de ID de VLAN se adjunta a la ID remota.
● Sufijo de puerto receptor
Si la casilla de verificación está activada, el sufijo de puerto receptor se adjunta a la ID
remota.
● DHCP Unique Identifier
Introduzca el DUID (DHCP Unique Identifier).
● User Defined
Introduzca una entrada personalizada como identificador.

Direcciones de servidor
En esta página se activa el DHCPv6 Relay Agent en la interfaz. También se especifica a qué
servidor DHCPv6 se accede por ella.

Descripción de los campos mostrados
● Relay Interface
Seleccione la interfaz en la que el DHCPv6 Relay Agent recibe las peticiones DHCPv6.
● Server IP Address
Introduzca la dirección IPv6 del servidor DHCPv6 al que deben enviarse las peticiones
DHCPv6. Esta dirección puede ser la dirección Unicast o la Multicast Link Local. En caso
de ser la dirección Multicast Link Local, hay que indicar una interfaz que dé acceso al
servidor DHCPv6. La interfaz se configura en "Layer 3 (IPv6) > DHCPv6 Relay Agent >
Outgoing Interfaces".
La tabla se divide en las siguientes columnas:
● Server IP Address
Muestra la dirección IPv6 del servidor DHCPv6.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2509

Configuración de dispositivos y redes
1.4 Crear configuraciones

Interfaces de salida
Interfaces de salida
La dirección Multicast Link Local (ff02::1:2 ) del servidor DHCPv6 solo es accesible para
dispositivos que están en el mismo link. En esta página se define la interfaz IPv6 por la que se
accede a este servidor DHCPv6.

Descripción de los campos mostrados
● Relay Interface
Seleccione la interfaz IPv6 en la que el DHCPv6 Relay Agent recibe las peticiones
DHCPv6.
● Server IP Address
Seleccione la dirección IPv6 del servidor DHCPv6.
● Outgoing Interface
Seleccione la interfaz por la que se accede al servidor DHCPv6.
La tabla se divide en las siguientes columnas:
● Server IP Address
Muestra la dirección IPv6 del servidor DHCPv6.
● Outgoing Interface
Muestra la interfaz IPv6 por la que se accede al servidor DHCPv6.

VRRPv3
Router (IPv6)
Introducción
En esta página se crean routers virtuales nuevos. Como máximo pueden configurarse 52
routers virtuales. Se pueden configurar otros parámetros en "Layer 3 (IPv6) > VRRPv3 >
Configuración".
Nota
● Esta función solo está disponible con Layer 3.
● El funcionamiento simultáneo de VRRP y VRRPv3 no es posible.
● Active la casilla de verificación "VRRPv3" para configurar VRRPv3.
● VRRPv3 puede utilizarse en interfaces VLAN. No se admiten puertos router.

2510

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
● VRRPv3
Active o desactive el routing vía VRRPv3. Solo puede activarse si "IPv6 Routing" está
activado en "Layer 3 (IPv6) > Configuration".
● Tracking VRID
Active o desactive el Tracking VRID.
Si está activado, se vigilan todas las interfaces de una VRID. Si el enlace de una interfaz
cambia de "up" a "down", la prioridad de toda la interfaz VRRP se reduce al valor "0" con la
misma VRID.
Si el enlace de una interfaz vuelve a cambiar de "down" a "up", se restablece la prioridad
original de las interfaces VRRP.
● Interface
Seleccione la interfaz VLAN deseada que ejerce de router virtual.
● VRID
Introduzca la ID del router virtual. Esta ID define el grupo de routers que forman un router
virtual (VR). En el grupo la ID es igual. No puede utilizarse para otros grupos. Los valores
válidos son de 1 a 255.
La tabla se divide en las siguientes columnas:
● Interface
Indica la interfaz que ejerce de router virtual.
● VRID
Muestra la ID del router virtual.
● Dirección MAC virtual (solo disponible online)
Muestra la dirección MAC virtual del router virtual.
● Primary IP Address
Indica la dirección IPv6 que tiene el número más bajo en esa VLAN. La entrada "::" significa
que la dirección "Primaria" se utiliza en esa VLAN. En cualquier otro caso, serán válidas
todas las direcciones IPv6 que hayan sido configuradas en esa VLAN en el menú "Layer 3
(IPv6) > Subredes".
● Estado del router (solo disponible online)
Indica el estado actual del router virtual. Los valores posibles son:
– Master
El router es el router maestro y adopta la funcionalidad de routing para todas las
direcciones IPv4 asignadas.
– Backup
El router es el de reserva. Si el router maestro falla, el router de reserva adopta las
funciones del maestro.
– Initialize
El Router virtual acaba de ser conectado. En breve, pasará al estado "Master" o
"Backup".
● Dirección IP maestra (solo disponible online)
Muestra la dirección IPv6 del router maestro.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2511

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Prioridad (solo disponible online)
Muestra la prioridad del router virtual. Los valores válidos son de 1 a 254.
El 255 se asigna automáticamente al router maestro actual. Todas las prioridades restantes
pueden distribuirse libremente entre los routers VRRPv3. Cuanto mayor sea la prioridad,
antes pasará el router VRRPv3 a "Master".
● Advert. Internal
Muestra el intervalo con el que el router maestro envía paquetes VRRPv3.
● Preempt
Muestra la preferencia de un router al cambiar de función entre reserva y maestro.
– yes
Este router tiene preferencia al cambiar de función.
– no
Este router no tiene preferencia al cambiar de función.
● Accept Mode
Muestra la preferencia de un router al cambiar de función entre reserva y maestro.
– yes
Las direcciones IP virtuales también responden a solicitudes Ping.
– no
Las direcciones IP virtuales no responden a solicitudes Ping.

VRRP y servidor DHCP
Si desea utilizar un servidor DHCP en los dispositivos de un grupo VRRP, el servidor DHCP
debe estar configurado en el router maestro. Los routers de reserva no reaccionan a peticiones
DHCP. Asegúrese de que el router maestro está configurado de forma estática y de que siga
siendo el maestro del grupo VRRP después de un fallo.

Configuración (IPv6)
Introducción
En esta página se configura el router virtual.
Nota
Esta función solo está disponible con Layer 3.

2512

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
● Interface / VRID
Seleccione la ID del router virtual que debe configurarse.
● Primary Address
Seleccione la dirección IPv6 prioritaria. Si el router va a ser el maestro, utilizará esta
dirección IPv4.
Nota
Si en esta VLAN solo configura una subred, no es necesaria ninguna entrada. La entrada
será en este caso ::.
Si configura varias subredes en la VLAN y desea utilizar una dirección IPv6 determinada
como dirección de origen para paquetes VRRPv3, seleccione una dirección IPv6
adecuada. En cualquier otro caso se utiliza la dirección IPv6 prioritaria.
● Master
Si esta opción está activada, se introducirá la dirección IPv6 con el número más bajo en
"Dirección IP asignada". De este modo, la dirección IPv6 prioritaria del router VRRP se
utiliza como dirección IPv6 virtual del router maestro virtual. Los routers de reserva de este
grupo tienen que desactivar esta opción y utilizar la dirección IPv6 del router en "Dirección
IP asignada".
● Priority
Introduzca la prioridad de este router virtual. Los valores válidos son de 1 a 254. El valor 255
siempre se asigna al router maestro. Todas las prioridades restantes pueden distribuirse
libremente entre los routers redundantes. Cuanto mayor sea la prioridad, antes pasará el
router a "Master".
● Advertisement Interval
Introduzca el intervalo en segundos tras el cual un router maestro vuelve a enviar un
paquete VRRPv3.
● Preempt lower priority Master
Permita la preferencia para cambiar de función entre reserva y maestro basándose en el
proceso de selección.
● Responder a solicitudes Ping en interfaces virtuales (Accept Mode)
Si está activado, también responden al Ping las direcciones IPv6 virtuales.
● ID de seguimiento
Seleccione un ID de seguimiento.
● Reducir la prioridad
Indique con qué valor se reduce la prioridad de la interfaz VRRP.
● Prioridad actual
Muestra la prioridad de la interfaz VRRP conforme a la cual la interfaz vigilada ha cambiado
al estado "down".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2513

Configuración de dispositivos y redes
1.4 Crear configuraciones

Sinopsis de direcciones (IPv6)
Sinopsis
Esta página muestra qué direcciones IPv6 vigila el router virtual. Cada router virtual puede
vigilar como máximo 10 direcciones IPv6.
Nota
Esta función solo está disponible con Layer 3.

Descripción de los campos mostrados
La tabla se divide en las siguientes columnas:
● Interface
Indica la interfaz que ejerce de router virtual.
● VRID
Muestra la ID de este router virtual.
● Number of Addresses
Muestra el número de direcciones IPv6.
● Dirección IP asignada (1) ... Dirección IP asignada (10)
Muestra las direcciones IPv6 de router vigiladas por este router virtual. Si un router adopta
la función de maestro, la función Routing de todas estas direcciones IPv6 es asumida
también por ese router.

Configuración de direcciones (IPv6)
Crear o modificar las direcciones IP vigiladas
En esta página se pueden crear, cambiar o borrar las direcciones IPv4 sometidas a vigilancia.
Un router virtual puede vigilar como máximo 10 direcciones IPv4.
Nota
Esta función solo está disponible con Layer 3.

Descripción de los campos mostrados
● Interface / VRID
Seleccione la ID del router virtual.
● Associated IP Address
Introduzca la dirección IPv6 que debe vigilar el router virtual. El máximo son 10 direcciones
IPv6.

2514

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla se divide en las siguientes columnas:
● Associated IP Address
Muestra las direcciones IPv6 vigiladas por el router virtual.

Vigilancia de interfaces (IPv6)
Introducción
En esta página se configura la vigilancia de interfaces.
Si el enlace de una interfaz vigilada cambia de "up" a "down", la prioridad de la interfaz VRRP
asignada se reduce. El valor con el que se reducirá la prioridad se configura en la página "Layer
3 > VRRP/VRRPv3 > Configuración".
Si el enlace de la interfaz vuelve a cambiar de "down" a "up", se restablece la prioridad original
de la interfaz VRRP.
Nota
Esta función solo está disponible con Layer 3.

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Interfaz
Seleccione en la lista desplegable la interfaz que debe vigilarse.
● ID de seguimiento
Introduzca una ID de seguimiento.
● ID de seguimiento
Seleccione una ID de seguimiento.
● Contador de interfaces de seguimiento
Indique cuántas de las interfaces vigiladas deben cambiar al estado "down" antes de
cambiar la prioridad.
La tabla se divide en las siguientes columnas:
● ID de seguimiento
Indica la ID de seguimiento.
● Interfaz
Muestra la interfaz vigilada.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2515

Configuración de dispositivos y redes
1.4 Crear configuraciones

OSPFv3
Configuración
Introducción .
En esta página se configura el routing vía OSPFv3.
Nota
Esta función solo está disponible con Layer 3.

Descripción de los campos mostrados
La página contiene los siguientes campos:
● OSPFv3
Active o desactive el routing vía OSPFv3.
● Router ID
Introduzca una denominación para una de las interfaces OSPFv3. La ID de router se indica
en formato de dirección IPv4 y debe ser inequívoca dentro de la red.
● Border Router
Muestra el estado del router OSPFv3. Si el sistema local es miembro activo de al menos 2
áreas, se trata de un Area Border Router.
● AS Border Router
Especifique si el router es un AS Border Router. Un AS Border Router ejerce de
intermediario entre varios sistemas autónomos, p. ej. si hay una red RIP adicional. Un AS
Border Router también se necesita para agregar y distribuir rutas estáticas.
● New LSA Received
Indica el número de LSA que se han recibido. Las actualizaciones y los LSA propios no se
contabilizan.
● New LSA Configured
Indica el número de LSA diferentes que han sido enviados por este sistema local.
● External LSA Maximum
Para limitar las entradas de LSA externos en la base de datos, introduzca el número
máximo de LSA externos.
● Exit Interval
Introduzca el intervalo tras el cual el router OSPFv3 debe intentar de nuevo salir del estado
Overflow. 0 significa que el router OSPFv3 solo volverá a intentar salir del estado Overflow
en un arranque.
● Inbound Filter
Seleccione un Route Map que filtre rutas entrantes.

2516

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Redistribute routes
Defina qué rutas conocidas se transmiten vía OSPFv3. Se pueden tomar diferentes
decisiones para los tipos de ruta Connected, Static y RIPng.
Nota
Las opciones solo pueden activarse en un AS Border Router. Especialmente la activación
de las opciones Default y Static puede causar problemas si se activan en demasiados
puntos de la red.
● Route Map
Seleccione un Route Map que filtre las rutas que se transfieren vía RIPng.
● Ajuste específico del protocolo
– Distancia predeterminada
Defina la distancia administrativa para el protocolo OSPFv2.
● Ajuste específico de Route Map
– Distancia Route Map
Seleccione en la lista desplegable un Route Map para el que desee definir la distancia
administrativa.
– Distancia
Configure la distancia administrativa para el Route Map previamente seleccionado.

Areas
Sinopsis
Una red autónoma (Autonomous System) se puede dividir en áreas más pequeñas (Areas).
En esta página se pueden ver, crear, cambiar o borrar las áreas del router.
Nota
Esta función solo está disponible con Layer 3.

Descripción de los campos mostrados
La página contiene lo siguiente:
● Area ID
Indique la denominación del área. La base de datos se sincroniza para todos los routers de
un área. La denominación de área debe ser inequívoca dentro de la red. Es una cifra de 32
bits que se introduce con este formato: x.x.x.x, siendo x = 0 ... 255
La denominación 0.0.0.0 está reservada para el área Backbone y no puede borrarse.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2517

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla contiene las siguientes columnas:
● Area ID
Indica la ID del área.
● Area Type
Defina el tipo de área.
– Normal
– Stub
– NSSA
– Backbone
● Summary
Especifique si para esta área se generan Summary LSA.
– Summary: Los Summary LSA se generan y envían al área.
– No Summary: Los Summary LSA no se generan ni envían al área.
● Metric
Muestra los costes de la interfaz OSPFv3.
● Updates
Muestra el número de recálculos de las tablas de routing IPv6.
● LSA Count
Muestra el número de LSA en la base de datos.
● Area BR
Muestra el número de Area Border Router (ABR) accesibles dentro de esta área.
● AS BR
Muestra el número de Autonomous System Border Router (ASBR) accesibles en esta área.

Rango de áreas
Creación de un nuevo rango de áreas OSPFv3
En esta página existe la posibilidad de agrupar hasta cuatro redes en una Area ID. Este método
solo se utiliza con Area Border Routers. Con él, un Area Border Router propaga hacia fuera una
sola ruta para áreas de direcciones agrupadas.
Nota
Esta función solo está disponible con Layer 3.

2518

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
● Area ID
Seleccione la ID de área. La ID se define en "Areas".
● Prefix
Introduzca la dirección IPv6 de la red que se agrupa.
● Prefix Length
Indique el número de bits que forman parte del prefijo que se agrupa.
La tabla contiene las siguientes columnas:
● Area ID
Indica la ID del área.
● Prefix
Indica la dirección IPv6 de la red que se agrupa.
● Prefix Length
Indica el número de bits que forman parte del prefijo.
● Advertise
Active esta opción para publicar la red agrupada.

Interfaces
Sinopsis
En esta página se pueden configurar interfaces OSPFv3.
Nota
Esta función solo está disponible con Layer 3.

Descripción de los campos mostrados
● Interface
Seleccione la interfaz IPv6 en la que se activará OSPFv3.
● Area ID
Seleccione la ID de área con la que está conectada la interfaz OSPFv3.
Nota
Seleccione para la interfaz secundaria la misma Area ID que para la interfaz primaria
correspondiente.
Encontrará información para saber si se trata de una interfaz primaria o secundaria en
"Layer 3 (IPv6)" > "Subnets".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2519

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla contiene las siguientes columnas:
● Interface
Muestra la interfaz OSPFv3.
● Area ID
Seleccione la ID de área con la que está conectada la interfaz OSPFv3.
● Interfaz pasiva
Especifique si OSPFv3 está activo en la interfaz.
– Activado:
A través de esta interfaz no se envía ni se aprende información OSPFv3 (p. ej.
telegramas Hello y actualizaciones LSDB).
– Desactivado:
A través de esta interfaz se envía y aprende información OSPFv3.
● Metric
Introduzca los costes para la interfaz OSPFv3.
● Priority
Introduzca la prioridad del router. La prioridad solo es relevante para la selección del router
o Border Router designados. Este parámetro puede ser diferente en routers de una misma
subred.
Rango de valores: 0 a 255
Valor predeterminado: 1.
● Trans. Delay
Introduzca el retardo deseado al enviar una actualización de conexión.
Rango de valores: 1 s a 3600 s
Ajuste predeterminado: 1 s
● Retrans. Interval
Introduzca el tiempo tras el cual se vuelve a enviar un paquete OSPFv3 si no se ha recibido
ninguna confirmación.
Rango de valores: 1 s a 3600 s
Ajuste predeterminado: 5 s
● Hello Interval
Introduzca la distancia entre dos paquetes Hello.
Rango de valores: 1 s a 65.535 s
Ajuste predeterminado: 10 s
● Dead Interval
Introduzca el intervalo tras el cual el router vecino se marca como "fallido" si durante ese
tiempo no se ha recibido ningún paquete Hello de él.
Ajuste predeterminado: 60 s

2520

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Enlaces virtuales
Sinopsis
Por razones relacionadas con el protocolo, cada Area Border Router debe tener acceso al área
Backbone. Si un router no está conectado directamente al área Backbone, se establece con él
una conexión virtual.
Nota
Esta función solo está disponible con Layer 3.
Nota
Recuerde que al crear una conexión virtual es necesario que estén configurados previamente
tanto el área Transit, como el área Backbone.
Una conexión virtual tiene que tener la misma configuración en ambos lados.

Descripción de los campos mostrados
La página contiene lo siguiente:
● ID de router vecino
Introduzca la ID del router vecino situado en el otro lado de la conexión virtual.
● Transit Area ID
Elija la ID del área que une ambos routers.
La tabla contiene las siguientes columnas:
● Transit Area ID
Muestra la ID que une ambos routers.
● Neighbor Router ID
Muestra la ID del router vecino situado en el otro lado de la conexión virtual.
● Virt. Link Status
Especifique el estado en el que se encuentra la conexión virtual. Son posibles los siguientes
estados:
– down: La conexión virtual está inactiva.
– point-to-point: La conexión virtual está activa.
● Trans. Delay
Introduzca el retardo deseado al enviar una actualización de conexión.
Rango de valores: 1 s a 3600 s
Ajuste predeterminado: 1 s
● Retrans. Interval
Introduzca el tiempo tras el cual se vuelve a enviar un paquete si no se ha recibido ninguna
confirmación.
Rango de valores: 1 s a 3600 s
Ajuste predeterminado: 5 s

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2521

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Hello Interval
Introduzca la distancia entre dos paquetes Hello.
Rango de valores: 1 s a 65.535 s
Ajuste predeterminado: 10 s
● Dead Interval
Introduzca el intervalo tras el cual el router vecino se considera "fallido" si durante ese
tiempo no se ha recibido ningún paquete Hello de él.
Ajuste predeterminado: 60 s

RIPng
Configuración
En esta página se configura el routing vía RIPng.
Nota
Esta función solo está disponible con Layer 3.

Descripción de los campos mostrados
● Inbound Filter
Seleccione un Route Map que filtre rutas entrantes.
● Redistribute routes
Defina qué rutas conocidas se transmiten vía RIPng.
Existen los siguientes tipos de ruta:
– Connected
– Static
– OSPFv3
● Route Map
Seleccione un Route Map que filtre las rutas que se transfieren vía RIPng.
● Ajuste específico del protocolo
– Distancia predeterminada
Defina la distancia administrativa para el protocolo OSPFv2.
● Ajuste específico de Route Map
– Distancia Route Map
Seleccione en la lista desplegable un Route Map para el que desee definir la distancia
administrativa.
– Distancia
Configure la distancia administrativa para el Route Map previamente seleccionado.

2522

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Interfaces
En esta página se definen las interfaces que soportan RIPng.
Nota
Esta función solo está disponible con Layer 3.

Descripción de los campos mostrados
La tabla contiene las siguientes columnas:
● Interface
Muestra las interfaces IPv6 disponibles.
● Admin State
Active o desactive el routing RIPng para la interfaz.
● Default Metric
Introduzca los costes para la interfaz RIPng.

Configuración de funciones de seguridad
Administración de usuarios (WBM, CLI)
Sinopsis de la administración de usuarios
El acceso al dispositivo se gestiona mediante ajustes de usuario configurables. Configure
usuarios con las contraseñas correspondientes para la autenticación. Asigne a los usuarios
una función con los derechos adecuados.
La autenticación de usuarios se realiza bien localmente desde el dispositivo bien desde un
servidor RADIUS externo. La forma en que debe llevarse a cabo la autenticación se configura
en la página "Security > AAA > General".
Nota
Si transfiere la configuración de un dispositivo a STEP 7 (TIA Portal), los usuarios, los rols y los
grupos configurados no se transfieren.

Compatibilidad con versiones anteriores
En la versión de firmware 5.1 se ha ampliado la administración de usuarios con el modo de
autorización RADIUS "Vendor Specific". Con el fin de garantizar la compatibilidad con
versiones de firmware ≤ 5.0, el ajuste predeterminado se ha establecido de forma que, tras
actualizar el firmware, se sigue utilizando el modo de autorización anterior "Standard".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2523

Configuración de dispositivos y redes
1.4 Crear configuraciones

Inicio de sesión local
El inicio de sesión local de los usuarios desde el dispositivo funciona del siguiente modo:
1. El usuario inicia sesión en el dispositivo con su nombre de usuario y su contraseña.
2. El dispositivo comprueba si hay una entrada para el usuario:
→ Si existe la entrada en cuestión, se inicia la sesión del usuario con los derechos de la
función vinculada.
→ Si no existe ninguna entrada, se deniega el acceso al usuario.

Inicio de sesión mediante un servidor RADIUS externo
RADIUS (Remote Authentication Dial-In User Service) es un protocolo de autenticación y
autorización de usuarios mediante servidores en los que se pueden almacenar los datos de
usuario de forma centralizada.
En función del modo de autorización RADIUS que se haya ajustado en la página "Security >
AAA > RADIUS Client", el dispositivo evaluará una información u otra del servidor RADIUS.
Modo de autorización RADIUS "conventional"
Si se ha ajustado el modo de autorización RADIUS "conventional", la autenticación de usuarios
mediante un servidor RADIUS funciona del siguiente modo:
1. El usuario inicia sesión en el dispositivo con su nombre de usuario y su contraseña.
2. El dispositivo envía una petición de autenticación al servidor RADIUS con los datos de inicio
de sesión.
3. El servidor RADIUS comprueba los datos y devuelve el resultado al dispositivo:
– El servidor RADIUS notifica una autenticación correcta y para el atributo "Service Type"
devuelve al dispositivo el valor "Administrative User":
→ El usuario inicia sesión con derechos de lectura/escritura.
– El servidor RADIUS notifica una autenticación correcta y devuelve un valor distinto o
incluso ninguno al dispositivo para el atributo "Service Type":
→ El usuario inicia sesión con derechos de lectura.
– El servidor RADIUS notifica una autenticación errónea al dispositivo:
→ Al usuario se le niega el acceso.
Modo de autorización RADIUS "Vendor Specific"
Requisitos
Para el modo de autorización RADIUS "Vendor Specific" debe ajustarse lo siguiente en el
servidor RADIUS:
● Código del fabricante: 4196
● Número de atributo: 1
● Formato de atributo: secuencia de caracteres (nombre del grupo)
Procedimiento

2524

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Si se ha ajustado el modo de autorización RADIUS "Vendor Specific", la autenticación de
usuarios mediante un servidor RADIUS funciona del siguiente modo:
1. El usuario inicia sesión en el dispositivo con su nombre de usuario y su contraseña.
2. El dispositivo envía una petición de autenticación al servidor RADIUS con los datos de inicio
de sesión.
3. El servidor RADIUS comprueba los datos y devuelve el resultado al dispositivo:
Caso A: El servidor RADIUS notifica una autenticación correcta y devuelve el grupo
asignado al usuario al dispositivo.
– El dispositivo conoce el grupo y el usuario no está registrado en la tabla "External User
Accounts".
→ El usuario inicia sesión con los derechos del grupo asignado.
– El dispositivo conoce el grupo y el usuario está registrado en la tabla "External User
Accounts".
→ El usuario se asigna a la función con los derechos más amplios e inicia sesión con
estos derechos.
– El dispositivo no conoce el grupo y el usuario está registrado en la tabla "External User
Accounts":
→ El usuario inicia sesión con los derechos de la función vinculada a su cuenta de
usuario.
– El dispositivo no conoce el grupo y el usuario no está registrado en la tabla "External
User Accounts":
→ El usuario inicia sesión con los derechos de la función "Default".
Caso B: El servidor RADIUS notifica una autenticación correcta pero no devuelve ningún
grupo al dispositivo:
– El usuario está registrado en la tabla "External User Accounts":
→ El usuario inicia sesión con los derechos de la función vinculada.
– El usuario no está registrado en la tabla "External User Accounts":
→ El usuario inicia sesión con los derechos de la función "Default".
Caso C: El servidor RADIUS notifica una autenticación errónea al dispositivo:
– Al usuario se le niega el acceso.

Asignación de una VLAN a través de RADIUS o Guest VLAN
Autenticación con modificación de la configuración VLAN

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2525

Configuración de dispositivos y redes
1.4 Crear configuraciones
Si durante la autenticación un puerto se asigna dinámicamente a una VLAN mediante la
función "RADIUS VLAN Assignment Allowed" o "Guest VLAN", se ofrecen las opciones
siguientes:
● Si la VLAN que debe asignarse no está creada en el dispositivo, la autenticación se rechaza.
● Si la VLAN que debe asignarse está creada en el dispositivo:
– El puerto se convierte en Untagged Member en la VLAN asignada si no lo era hasta
ahora.
→ Con ello se sobrescribe la configuración estática del puerto en esta VLAN y no se
restablece cuando se retira la autenticación.
– La Port VID del puerto se cambia a la ID de la VLAN asignada.
Nota
Si el puerto solo debe asignarse a una VLAN, la configuración VLAN deberá adaptarse
manualmente. Todos los puertos son por defecto p. ej. Untagged Member en "VLAN 1".
Si la autenticación se retira, p. ej. por un Link-Down, los cambios dinámicos se retirarán:
● El puerto ya no es miembro en la VLAN asignada.
● La Port VID del puerto se reinicia al valor que tenía antes de la autenticación.
Nota
Si la Port VID del puerto antes de la autenticación coincide con la Port VID asignada, el
puerto sigue siendo Untagged Member de esta VLAN.
Autenticación sin cambio de la configuración VLAN
Si durante la autenticación no se asigna una VLAN mediante la función "RADIUS VLAN
Assignment Allowed" ni mediante "Guest VLAN", la configuración VLAN existente del puerto
permanece invariable.

Usuarios
Usuarios locales
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

Usuarios locales
En esta página se crean usuarios locales con los derechos correspondientes.

2526

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Al crear o borrar un usuario local, el cambio se realiza también automáticamente en la tabla
"Cuentas de usuario externas". Si desea realizar un cambio explícitamente para la tabla de
usuarios interna o externa, utilice los comandos CLI.
Nota
Los valores mostrados dependen de los derechos del usuario que ha iniciado sesión.

Descripción de los campos mostrados
● Cuenta de usuario
Introduzca el nombre de usuario. El nombre debe cumplir las condiciones siguientes:
– Debe ser unívoco.
– Debe tener entre 1 y 255 caracteres.
– No puede contener los caracteres siguientes: | ? " ; :
Tampoco puede contener los caracteres de Space y Delete.
Nota
Nombre de usuario no modificable
Una vez creado un usuario, el nombre de usuario ya no se podrá modificar.
Para modificar un nombre de usuario es necesario borrar el usuario y volver a crearlo.
Nota
Usuario predeterminado "user"
A partir de la versión de firmware 6.0 deja de existir el usuario predeterminado "user" en el
estado de suministro. Cuando se actualiza un dispositivo al firmware V6.0, en principio el
usuario predeterminado "user" sigue estando disponible. Ahora bien, cuando se restablece
la configuración de fábrica del dispositivo ("Restablecer los ajustes de fábrica y reiniciar")
se borra el usuario predeterminado "user". Existe la posibilidad de crear usuarios nuevos
con la función "user".
● Password Policy
Indica la norma que se utilizará para la contraseña:
– Alta
Longitud de contraseña: mínimo 8 caracteres, máximo 128 caracteres
Mínimo 1 mayúscula
Mínimo 1 carácter especial
Mínimo 1 número
– Baja
Longitud de contraseña: mínimo 6 caracteres, máximo 128 caracteres
La norma para contraseñas se configura en la página "Seguridad > Contraseñas >
Opciones".
● Password
Introduzca la contraseña para el usuario. La severidad de la contraseña depende de la
norma ajustada.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2527

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Password Confirmation
Vuelva a introducir la contraseña para confirmarla.
● Role
Seleccione una función.
Puede elegir entre las funciones predefinidas y las personalizadas; consulte la página
"Seguridad > Usuarios > Funciones".
La tabla contiene las siguientes columnas:
Nota
Los usuarios predefinidos así como los usuarios que tienen sesión iniciada no pueden borrarse
ni modificarse.
● Cuenta de usuario
Muestra el nombre de usuario.
● Role
Muestra la función del usuario.
● Description
Muestra una descripción de la cuenta de usuario. El texto descriptivo puede contener 100
caracteres como máximo.

Funciones
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

Funciones
En esta página se crean funciones válidas localmente en el dispositivo.
Nota
Los valores mostrados dependen de los derechos del usuario que ha iniciado sesión.

2528

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
La página contiene lo siguiente:
● Role Name
Introduzca el nombre para la función. El nombre debe cumplir las condiciones siguientes:
– Debe ser unívoco.
– Debe tener entre 1 y 64 caracteres.
Nota
Nombre de función no modificable
Una vez creada una función, su nombre ya no se podrá modificar.
Para modificar un nombre de función es necesario borrar la función y volver a crearla.
La tabla contiene las siguientes columnas:
Nota
Borrar funciones
Las funciones predeterminadas así como las funciones asignadas no pueden borrarse ni
modificarse.
● Role
Muestra el nombre de la función.
● Function Right
Seleccione los derechos de la función:
– 1
Los usuarios con esta función pueden leer parámetros del dispositivo pero no
cambiarlos. Los usuarios con esta función pueden cambiar su propia contraseña.
– 15
Los usuarios con esta función pueden leer y modificar los parámetros del dispositivo.
Nota
Derecho de función no modificable
Una vez se ha asignado una función ya no es posible modificar el derecho de función.
Si desea el derecho de una función, proceda del siguiente modo:
1. Borre todos los usuarios asignados.
2. Cambie el derecho de la función.
3. Vuelva a asignar la función.
● Description
Introduzca una descripción para la función. En las funciones predefinidas se muestra una
descripción. El texto descriptivo puede contener 100 caracteres como máximo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2529

Configuración de dispositivos y redes
1.4 Crear configuraciones

Grupos
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.

Grupos de usuarios
En esta página se vincula un grupo a una función.
En el presente ejemplo se vincula el grupo "Administrators" a la función "admin". El grupo está
definido en un servidor RADIUS. La función está definida localmente en el dispositivo. Cuando
un servidor RADIUS autentica a un usuario y lo asigna al grupo "Administrators", dicho usuario
recibe los derechos de la función "admin" en el dispositivo.
Nota
Los valores mostrados dependen de los derechos del usuario que ha iniciado sesión.

Descripción de los campos mostrados
La página contiene lo siguiente:
● Group Name
Introduzca el nombre del grupo. El nombre debe coincidir con el grupo del servidor
RADIUS. El nombre debe cumplir las condiciones siguientes:
– Debe ser unívoco.
– Debe tener entre 1 y 64 caracteres.
– No se permiten: § ? " ; :
La tabla contiene las siguientes columnas:
● Group
Muestra el nombre del grupo.
● Role
Seleccione una función. Los usuarios que se autentican con el grupo vinculado a través del
servidor RADIUS obtienen los derechos de la función en el dispositivo local. Puede elegir
entre las funciones predefinidas y las personalizadas; consulte la página "Seguridad >
Usuarios > Funciones".
● Description
Indique una descripción para la vinculación del grupo con una función. El texto descriptivo
puede contener 100 caracteres como máximo.

2530

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Contraseñas
Contraseñas
Configuración de las contraseñas de equipo
Nota
Esta página solo está disponible cuando hay conexión online con el dispositivo.
Nota
Si ha iniciado sesión a través de un servidor RADIUS no es posible modificar contraseñas
locales de dispositivos.
En esta página se pueden modificar contraseñas. Si ha iniciado sesión con la función "admin",
podrá modificar las contraseñas de todas las cuentas de usuario. Si ha iniciado sesión con la
función "user", solo podrá cambiar su propia contraseña.
Nota
Si inicia sesión por primera vez o tras un "Restablecer los ajustes de fábrica y reiniciar" con el
usuario predeterminado "admin", se le pedirá que cambie la contraseña.
Las contraseñas de fábrica al entregarse el equipo son las siguientes:
● admin: admin
Nota
Cambiar la contraseña en modo Trial
Si se cambia la contraseña en modo de configuración "Trial", dicho cambio también se
guardará inmediatamente.

Descripción de los campos mostrados
● Usuario actual
Muestra el usuario que tiene sesión iniciada.
● Contraseña de usuario actual
Introduzca la contraseña del usuario que tiene la sesión iniciada.
● Cuenta de usuario
Seleccione el usuario cuya contraseña desea cambiar.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2531

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Directriz para contraseñas
Indica la norma que se utilizará al otorgar contraseñas nuevas.
– Alta
Longitud de contraseña: mínimo 8 caracteres, máximo 128 caracteres
Mínimo 1 mayúscula
Mínimo 1 carácter especial
mínimo 1 cifra
– Baja
Longitud de contraseña: mínimo 6 caracteres, máximo 128 caracteres
● Nombre nuevo para la cuenta de usuario Admin
Puede cambiar una vez el nombre del usuario predeterminado "admin". Después ya no
será posible volver a cambiar el nombre de "admin".
● Contraseña nueva
Introduzca la nueva contraseña para el usuario seleccionado. No puede contener los
caracteres siguientes:
–§?";:–
Tampoco puede contener espacios ni el carácter para "Eliminar".
● Confirmar contaseña
Vuelva a introducir la contraseña para confirmarla.

Opciones
En esta página se define qué norma de contraseña se aplica para otorgar nuevas contraseñas.

Descripción
● Directriz para contraseñas
Indica qué norma de contraseña se utiliza actualmente.
● Nueva directriz para contraseñas
Seleccione el ajuste deseado en la lista desplegable:
– Alta
Longitud de contraseña: mínimo 8 caracteres, máximo 128 caracteres
mínimo 1 mayúscula
mínimo 1 carácter especial
mínimo 1 número
– Baja
Longitud de contraseña: mínimo 6 caracteres, máximo 128 caracteres

2532

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

AAA
General
Inicio de sesión de dispositivos de red
La denominación "AAA" utilizada en el menú es la abreviatura de "Authentication,
Authorization, Accounting". Esta función sirve para identificar y autorizar dispositivos de red y
prepararles los servicios correspondientes.
En esta página se configura el inicio de sesión.

Descripción
La página contiene los siguientes campos:
Nota
Para poder utilizar la autenticación de inicio de sesión "RADIUS", "Local y RADIUS" o
"RADIUS y Fallback local" debe haberse instalado un servidor RADIUS, que debe estar
configurado para la autenticación de usuarios.
● Autentificación de inicio de sesión
Especifique cómo debe ser el inicio de sesión:
– Local
La autenticación debe realizarse localmente en el dispositivo.
– RADIUS
La autenticación debe efectuarse a través de un servidor RADIUS.
– Local and RADIUS
La autenticación puede realizarse tanto con los usuarios existentes en el dispositivo
(nombre de usuario y contraseña) como mediante un servidor RADIUS. El usuario se
busca primero en la base de datos local. Si el usuario no existe se envía una solicitud
RADIUS.
– RADIUS y Fallback local
La autenticación debe efectuarse a través de un servidor RADIUS. Solo se lleva a cabo
una autenticación local si el servidor RADIUS no está accesible en la red.

Cliente RADIUS
Autentificación mediante un servidor externo.
El concepto de RADIUS se basa en un servidor de autenticación externo.
Cada fila de la tabla contiene los datos de acceso para un servidor. Primero se consulta al
servidor primario en el orden de búsqueda. Si no puede accederse al servidor primario, se
consultan servidores secundarios en el orden introducido. Si ninguno de los servidores
responde, no se efectúa la autentificación.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2533

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción
La página contiene los siguientes campos:
● Modo de autorización RADIUS
El Modo de autorización RADIUS determina en la autenticación de inicio de sesión cómo se
asignan los derechos de usuario en caso de que la autenticación sea correcta.
– Estándar
En este modo, el usuario inicia sesión con derechos de administrador cuando el servidor
devuelve el valor "Administrative User" al dispositivo para el atributo "Service Type". En
todos los demás casos el usuario inicia sesión con derechos de lectura.
– Específico del fabricante
En este modo, la asignación de derechos depende de si el servidor devuelve un grupo
para el usuario y cuál y de si hay una entrada en la tabla "Cuentas de usuario externas"
para el usuario.
La tabla se divide en las siguientes columnas:
● Tipo de servidor de auten.
Seleccione el método de autenticación para el que debe utilizarse el servidor.
– Inicio de sesión
El servidor se utiliza únicamente para la autenticación de inicio de sesión.
– 802.1X
El servidor se utiliza únicamente para la autenticación 802.1X.
– Inicio de sesión y 802.1X
El servidor se utiliza para ambos métodos de autenticación.
● Dirección del servidor RADIUS
Introduzca aquí la dirección IPv4 o el FQDN (Fully Qualified Domain Name) del servidor
RADIUS.
● Puerto de servidor
Introduzca el puerto de entrada del servidor RADIUS. Por defecto está ajustado el puerto
de entrada 1812. El rango de valores es de 1 a 65535.
● Shared Secret
Introduzca su identificación de acceso. El rango de valores es de 1 a 128 caracteres.
● Confirmar Shared Secret
Confirme la identificación de acceso.
● Max. Retrans
Introduzca aquí el número máximo de repeticiones de un intento de solicitud. El intento de
conexión inicial se repetirá el número de veces indicado por este valor antes de consultar
a otro servidor RADIUS configurado o dar por fallido el inicio de sesión. El ajuste
predeterminado son 3 repeticiones, es decir, 4 intentos de conexión. El rango de valores es
de 1 a 5.
● Servidor primario
Especifique si este servidor es el servidor primario. Puede elegir entre las opciones "sí" y
"no".

2534

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Test (solo disponible online)
Con este botón se comprueba si el servidor RADIUS indicado está disponible o no. La
comprobación se realiza una sola vez y no se repite cíclicamente.
● Resultado del test (solo disponible online)
Indica si el servidor RADIUS está disponible o no:
– Fallido, no se han enviado paquetes de prueba
No se puede acceder a la dirección IP.
Se puede acceder a la dirección IP, pero el servidor RADIUS no funciona.
– Accesible, no se ha aceptado el Shared Secret
Se puede acceder a la dirección IP, pero el servidor RADIUS no acepta el Shared Secret
indicado.
– Accesible, se ha aceptado el Shared Secret
Se puede acceder a la dirección IP y el servidor RADIUS acepta el Shared Secret
indicado.
El resultado del test no se actualiza automáticamente. Para borrar el resultado del test haga
clic en el botón "Actualizar".

802.1x-Authenticator
Configurar un acceso a la red
Para un terminal, el acceso a la red es posible una vez que el dispositivo haya verificado los
datos de inicio de sesión en el servidor de autenticación. La autenticación puede realizarse a
través de 802.1X o de la dirección MAC. En la autenticación a través de 802.1X, tanto el
terminal como el servidor de autenticación deben admitir el protocolo EAP (Extensive
Authentication Protocol).

Activación de la autentificación para puertos concretos
Seleccionando las correspondientes opciones, es posible especificar individualmente para
cada puerto si se activa la protección de acceso a la red según IEEE 802.1x.

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Autenticación MAC
Active o desactive la autenticación MAC para el dispositivo.
● Guest VLAN
Active o desactive la función "VLAN invitada" para el dispositivo.
La tabla 1 se divide en las siguientes columnas:
● 1.ª columna
Indica que los ajustes son válidos para todos los puertos de la tabla 2.
● Control de aut. 802.1x
Elija el ajuste deseado. Si está seleccionado "No hay modificaciones", la entrada de la tabla
2 permanece invariable.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2535

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Reautenticación 802.1x
Elija el ajuste deseado. Si está seleccionado "No hay modificaciones", la entrada de la tabla
2 permanece invariable.
● Autenticación MAC
Elija el ajuste deseado. Si está seleccionado "No hay modificaciones", la entrada de la tabla
2 permanece invariable.
MAC Auth. only on Timeout
Elija el ajuste deseado. Si está seleccionado "No hay modificaciones", la entrada de la tabla
2 permanece invariable.
● Adoptar asignación VLAN de RADIUS
Elija el ajuste deseado. Si está seleccionado "No hay modificaciones", la entrada de la tabla
2 permanece invariable.
● Aut. MAC: direcciones máximas permitidas
Indique cuántos terminales pueden estar conectados al puerto simultáneamente. Si está
registrado "No hay modificaciones", la entrada de la tabla 2 permanece invariable.
● Guest VLAN
Elija el ajuste deseado. Si está seleccionado "No hay modificaciones", la entrada de la tabla
2 permanece invariable.
● ID de VLAN invitada
Indique la ID de VLAN del puerto. Si está registrado "No hay modificaciones", la entrada de
la tabla 2 permanece invariable.
● VLAN invitada: direcciones máximas permitidas
Indique cuántos terminales se admiten simultáneamente en la VLAN invitada. Si está
registrado "No hay modificaciones", la entrada de la tabla 2 no varía.
● Aplicar a tabla
Al hacer clic en este botón se aplican los ajustes a todos los puertos de la tabla 2.
La tabla 2 se divide en las siguientes columnas:
● Puerto
En esta columna se indican todos los puertos disponibles en este equipo.
● Control de aut. 802.1x
Defina la autenticación del puerto:
– Forzar "No autorizar"
El tráfico de datos a través del puerto está bloqueado.
– Forzar "Autorizar"
El tráfico de datos a través del puerto está permitido sin restricciones. Ajuste
predeterminado
– Auto
Los terminales se autentican en el puerto con el método "802.1x". El tráfico de datos a
través del puerto se permite o bloquea según el resultado de la autenticación.
● Reautenticación 802.1x
Active esta opción si debe realizarse una reautenticación cíclica para un terminal ya
autenticado.

2536

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Autenticación MAC
Active esta opción si deben autenticarse terminales con el método "Autenticación MAC".
Si configura "Control de aut. 802.1x" a "Auto" y la "Autenticación MAC" está activada, el
timeout para el procedimiento "802.1X" es de 5 segundos. Si para la autenticación con el
procedimiento "802.1X" en un puerto es necesaria una entrada manual, los 5 segundos no
serán necesarios. Para poder ejecutar la autenticación a través de "802.1X", desactive la
autenticación MAC en ese puerto.
● MAC Auth. only on Timeout
Si la casilla de verificación está activada, una autenticación MAC solo es posible tras un
timeout 802.1X, pero no tras una autenticación 802.1X fallida. Si la casilla de verificación no
está activada, una autenticación MAC es posible tanto tras un timeout 802.1X como tras
una autenticación 802.1X fallida.
● Adoptar asignación VLAN de RADIUS
El servidor RADIUS transmite al IE Switch a qué VLAN debe pertenecer el puerto. Active
esta opción si debe tomarse en consideración la información del servidor.
En ese caso el puerto solo podrá asignarse a la VLAN correspondiente si la VLAN está
creada en el dispositivo. De lo contrario la autenticación (página 474) se rechazará. Si
durante la autenticación un puerto se asigna dinámicamente a una VLAN mediante esta
función, la asignación será posible a través de la VLAN ID o el nombre de VLAN: Configure
los siguientes valores en el servidor RADIUS:
– Tunnel Type = VLAN
– Tunnel Medium Type = IEEE-802
– Tunnel Private Group ID = VLAN ID o VLAN Name
Como consecuencia, el IE Switch diferencia del siguiente modo:
– VLAN ID: El servidor RADIUS entrega una cadena numérica para el parámetro "TunnelPrivate-Group-Id".
– VLAN Name: El servidor RADIUS entrega una cadena alfanumérica para el parámetro
"Tunnel-Private-Group-Id".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2537

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Aut. MAC: direcciones máximas permitidas
– 1 ... 100
Indique cuántas direcciones MAC pueden comunicarse simultáneamente en el puerto.
Nota
Si un dispositivo utiliza varias direcciones MAC hay que autenticarlas todas. Guarde
todas las direcciones MAC que deben autenticarse en el servidor RADIUS. Introduzca
el número correspondiente en el campo "Direcciones máx. permitidas de aut. MAC".
– 0
Se puede ajustar el valor "0". Este ajuste hace que después de la primera autenticación
correcta de una dirección MAC el puerto esté habilitado para todas las direcciones MAC.
Caso de aplicación
Si configura el valor "0" para un puerto, conecte un punto de acceso WLAN a ese puerto.
Una vez que el punto de acceso se haya autenticado correctamente, se habilitarán
todas las direcciones MAC del puerto en cuestión. Todos los clientes WLAN conectados
con el punto de acceso pueden comunicarse sin necesidad de autenticarse en el puerto.
Asegúrese de que la autenticación de los clientes se realiza a través del punto de
acceso.
Compatibilidad de firmware
En las versiones < 6.0.2 el valor "0" no es una entrada válida. Si configura el valor "0" con
una versión de firmware ≥ 6.0.2 y reproduce en el dispositivo una versión de FW < 6.0.2,
la función Autenticación MAC estará desactivada en los puertos correspondientes.
Vuelva a configurar la autenticación VPN en esos puertos.
● Guest VLAN
Active esta opción si el terminal debe autorizarse en la VLAN invitada en caso de que falle
la autenticación.
En ese caso el puerto solo podrá asignarse a la VLAN correspondiente si la VLAN está
creada en el dispositivo. De lo contrario la autenticación se rechazará.
Esta función también se conoce como "Authentication failed VLAN".
● ID de VLAN invitada
Indique la ID de VLAN del puerto.
● VLAN invitada: direcciones máximas permitidas
Indique cuántos terminales se admiten simultáneamente en la VLAN invitada.
● 802.1X Estado aut.
Muestra el estado de la autenticación del puerto:
– Autorizar
– No autorizar
● Direcciones permitidas actualmente de aut. MAC
Muestra el número de terminales conectados en ese momento.
● Aut. MAC: direcciones bloqueadas actualmente
Muestra el número de terminales bloqueados en ese momento.
● VLAN invitada: direcciones permitidas actualmente
Indica cuántos terminales se admiten actualmente en la "VLAN invitada".

2538

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

MAC ACL
Configuración de reglas
Introducción
En esta página se definen las reglas de acceso para la Access Control List basada en MAC.
La ACL basada en MAC permite especificar si se reenvían o rechazan telegramas de
determinadas direcciones MAC.

Descripción de los campos mostrados
La tabla se divide en las siguientes columnas:
● Número de regla
Indica el número de regla ACL. Al crear la regla se inserta una fila nueva con un número
unívoco.
● Dirección MAC de origen
Introduzca la dirección MAC Unicast del origen.
Dirección MAC de destino
Introduzca la dirección MAC Unicast del destino.
● Acción
Elija el comportamiento. Existen las siguientes posibilidades:
– Forward
Si el telegrama cumple la regla ACL, se reenvía.
– Discard
Si el telegrama cumple la regla ACL, no se reenvía.
● Interfaz Ingress
Muestra una lista de todas las interfaces para las que rige la regla.
● Interfaz Egress
Muestra una lista de todas las interfaces para las que rige la regla.
Nota
Introducción de las direcciones MAC
Las reglas de acceso solo pueden configurarse para direcciones MAC Unicast. Solo si se
introduce la dirección "00:00:00:00:00:00" para dirección MAC de origen y/o destino, la regla
creada será válida para todas las direcciones MAC de origen y destino.

Reglas Ingress
Introducción
En esta página se definen las reglas ACL con las que se deben filtrar los telegramas entrantes
en las interfaces. Las reglas ACL se definen en la ficha "Configuración de reglas".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2539

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Interfaz
Seleccione la interfaz deseada en la lista desplegable. Las interfaces disponibles dependen
del dispositivo.
● Agregar regla
Elija la regla ACL que se asignará a la interfaz. La regla ACL se define en la página
"Configuración de reglas".
● Agregar
Para asignar la regla ACL de forma fija a la interfaz, haga clic en el botón "Agregar". La
configuración se muestra en la tabla.
● Eliminar regla
Elija la regla ACL que debe borrarse.
● Eliminar
Para eliminar la regla ACL de la interfaz, haga clic en el botón "Eliminar".
La tabla se divide en las siguientes columnas:
● Orden de las reglas
Muestra el orden de las reglas ACL.
● Número de regla
Indica el número de regla ACL.
● Dirección MAC de origen
Muestra la dirección MAC Unicast del origen.
● Dirección MAC de destino
Muestra la dirección MAC Unicast del destino.
● Acción
Indica la respuesta:
– Forward
Si el telegrama cumple la regla ACL, se reenvía.
– Discard
Si el telegrama cumple la regla ACL, no se reenvía.

Reglas Egress
Introducción
En esta página se definen las reglas ACL que deben regir el tratamiento que el puerto dará a
los telegramas salientes. La regla ACL se define en la ficha "Configuración de reglas".

2540

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Interfaz
Seleccione la interfaz deseada. Las interfaces disponibles dependen del dispositivo.
● Agregar regla
Elija la regla ACL que se asignará a la interfaz.
● Agregar
Para asignar la regla ACL de forma fija a la interfaz, haga clic en el botón "Agregar". La
configuración se muestra en la tabla.
● Eliminar regla
Elija la regla ACL que debe borrarse.
● Eliminar
Para eliminar la regla ACL de la interfaz, haga clic en el botón "Eliminar".
La tabla se divide en las siguientes columnas:
● Orden de las reglas
Muestra el orden de las reglas ACL.
● Número de regla
Indica el número de regla ACL.
● Dirección MAC de origen
Muestra la dirección MAC Unicast del origen.
● Dirección MAC de destino
Muestra la dirección MAC Unicast del destino.
● Acción
Indica la respuesta.
– Forward
Si el telegrama cumple la regla ACL, se reenvía.
– Discard
Si el telegrama cumple la regla ACL, no se reenvía.

IP ACL
Configuración de reglas
Introducción
En esta página se definen las reglas para la Access Control List basada en IP. La ACL basada
en IP permite especificar si se reenvían o rechazan telegramas de determinadas direcciones
IPv4.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2541

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
La tabla se divide en las siguientes columnas:
● Número de regla
Indica el número de regla ACL. Al crear una entrada se crea una fila con un número unívoco.
● Dirección IP de origen
Introduzca la dirección IPv4 del origen.
● Máscara de subred de origen
Introduzca la máscara de subred en la que se encuentra el origen.
● Dirección IP de destino
Introduzca la dirección IP del destino.
● Máscara de subred de destino
Introduzca la máscara de subred en la que se encuentra el destino.
● Acción
Seleccione si el telegrama debe reenviarse o rechazarse cuando cumple la regla ACL:
– Forward
Si el telegrama cumple la regla ACL, se reenvía.
– Discard
Si el telegrama cumple la regla ACL, no se reenvía.
● Interfaz Ingress
Muestra una lista de todas las interfaces para las que rige la regla.
● Interfaz Egress
Muestra una lista de todas las interfaces para las que rige la regla.
Nota
Máscara de subred para hosts individuales
Cuando cree la regla para un sistema individual (una dirección IPv4), indique la máscara de
subred "255.255.255.255".

Configuración de protocolo
En esta página se definen las reglas para protocolos.

Descripción de los campos mostrados
La tabla se divide en las siguientes columnas:
● Número de regla
Muestra el número de la regla de protocolo. Al crear una regla se inserta una fila nueva con
un número unívoco.
● Protocolo
Seleccione el protocolo para el que rige la regla.

2542

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Número de protocolo
Introduzca un número de protocolo para definir protocolos adicionales. Este campo solo se
puede editar si se ha ajustado "Other Protocol" en Protocolo.
● Puerto de origen mín.
Indique el número de puerto más bajo posible para el puerto de origen. Este campo solo se
puede editar si se ha ajustado "TCP" o "UDP" en Protocolo.
● Puerto de origen máx.
Indique el número de puerto más alto posible para el puerto de origen. Este campo solo se
puede editar si se ha ajustado "TCP" o "UDP" en Protocolo.
● Puerto de destino mín.
Indique el número de puerto más bajo posible para el puerto de destino. Este campo solo
se puede editar si se ha ajustado "TCP" o "UDP" en Protocolo.
● Puerto de destino máx.
Indique el número de puerto más alto posible para el puerto de destino. Este campo solo se
puede editar si se ha ajustado "TCP" o "UDP" en Protocolo.
● Tipo de mensaje
Introduzca un tipo de mensaje para determinar el formato del mensaje.
Este campo solo se puede editar si se ha ajustado "ICMP" en Protocolo.
● Código de mensaje
Introduzca un código de mensaje para especificar la función del mensaje. Este campo solo
se puede editar si se ha ajustado "ICMP" en Protocolo.
● DSCP
Introduzca un valor para clasificar la prioridad. Este campo no se puede editar si se ha
ajustado "ICMP" en Protocolo.

Reglas Ingress
Introducción
En esta página se definen las reglas ACL que deben regir el tratamiento que las interfaces
darán a los telegramas entrantes. Las reglas ACL se definen en la ficha "Configuración de
reglas".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2543

Configuración de dispositivos y redes
1.4 Crear configuraciones

Descripción de los campos mostrados
Descripción de los campos mostrados:
● Interfaz
Seleccione el puerto deseado: un puerto o una interfaz VLAN. Las interfaces disponibles
dependen del dispositivo. Para poder seleccionar una interfaz VLAN tiene que estar
configurada una interfaz IP.
Nota
Cuando se utiliza una interfaz VLAN, la regla ACL rige para todos los puertos que forman
parte de la VLAN.
● Agregar regla
Elija la regla ACL que se asignará al puerto.
● Agregar
Para asignar la regla ACL de forma fija al puerto, haga clic en el botón "Agregar". La
configuración se muestra en la tabla.
● Eliminar regla
Elija la regla ACL que debe borrarse.
● Eliminar
Para eliminar la regla ACL del puerto, haga clic en el botón "Eliminar".
La tabla se divide en las siguientes columnas:
● Orden de las reglas
Muestra el orden de las reglas ACL.
● Número de regla
Indica el número de regla ACL.
● Protocolo
Muestra el protocolo para el que rige la regla.
● Número de protocolo
Muestra el número de protocolo.
● Dirección IP de origen
Muestra la dirección IP del origen.
● Máscara de subred de origen
Muestra la máscara de subred en la que se encuentra el origen.
● Dirección IP de destino
Muestra la dirección IP del destino.
● Máscara de subred de destino
Muestra la máscara de subred del destino.
● Acción
Seleccione si el telegrama debe reenviarse o rechazarse cuando cumple la regla ACL:
– Forward
Si el telegrama cumple la regla ACL, se reenvía.
– Discard
Si el telegrama cumple la regla ACL, no se reenvía.

2544

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Puerto de origen mín.
Muestra el número de puerto más bajo posible para el puerto de origen.
● Puerto de origen máx.
Muestra el número de puerto más alto posible para el puerto de origen.
● Puerto de destino mín.
Muestra el número de puerto más bajo posible para el puerto de destino.
● Puerto de destino máx.
Muestra el número de puerto más alto posible para el puerto de destino.
● Tipo de mensaje
Muestra un tipo de mensaje para determinar el formato del mensaje.
● Código de mensaje
Muestra un código de mensaje para especificar la función del mensaje.
● DSCP
Muestra el valor para clasificar la prioridad.

Reglas Egress
Introducción
En esta página se definen las reglas ACL que deben regir el tratamiento que el puerto dará a
los telegramas salientes. Las reglas ACL se definen en la ficha "Configuración de reglas".

Descripción de los campos mostrados
La página contiene los siguientes campos:
● Interfaz
Seleccione el puerto deseado: un puerto o una interfaz VLAN. Las interfaces disponibles
dependen del dispositivo. Para poder seleccionar una interfaz VLAN tiene que estar
configurada una interfaz IP.
Nota
Cuando se utiliza una interfaz VLAN, la regla ACL rige para todos los puertos que forman
parte de la VLAN.
● Agregar regla
Elija la regla ACL que se asignará al puerto.
● Agregar
Para asignar la regla ACL de forma fija al puerto, haga clic en el botón "Agregar". La
configuración se muestra en la tabla.
● Eliminar regla
Elija la regla ACL que debe borrarse.
● Eliminar
Para eliminar la regla ACL del puerto, haga clic en el botón "Eliminar".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2545

Configuración de dispositivos y redes
1.4 Crear configuraciones
La tabla se divide en las siguientes columnas:
● Orden de las reglas
Muestra el orden de las reglas ACL.
● Número de regla
Indica el número de regla ACL.
● Protocolo
Muestra el protocolo para el que rige la regla.
● Número de protocolo
Muestra el número de protocolo.
● Dirección IP de origen
Muestra la dirección IP del origen.
● Máscara de subred de origen
Muestra la máscara de subred del origen.
● Dirección IP de destino
Muestra la dirección IP del destino.
● Máscara de subred de destino
Muestra la máscara de subred del origen.
● Acción
Seleccione si el telegrama debe reenviarse o rechazarse cuando cumple la regla ACL:
– Forward
Si el telegrama cumple la regla ACL, se reenvía.
– Discard
Si el telegrama cumple la regla ACL, no se reenvía.
● Puerto de origen mín.
Muestra el número de puerto más bajo posible para el puerto de origen.
● Puerto de origen máx.
Muestra el número de puerto más alto posible para el puerto de origen.
● Puerto de destino mín.
Muestra el número de puerto más bajo posible para el puerto de destino.
● Puerto de destino máx.
Muestra el número de puerto más alto posible para el puerto de destino.
● Tipo de mensaje
Muestra un tipo de mensaje para determinar el formato del mensaje.
● Código de mensaje
Muestra un código de mensaje para especificar la función del mensaje.
● DSCP
Muestra el valor para clasificar la prioridad.

2546

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Management ACL
Descripción de la configuración
En esta página es posible aumentar la seguridad del dispositivo. Para especificar qué estación
puede acceder al equipo y con qué dirección IPv4, configure la dirección IPv4 o todo un rango
de direcciones.
Puede ajustar con qué protocolos y a través de qué puertos la estación puede acceder al
equipo. Se define en qué VLAN debe encontrarse la estación. De este modo se garantiza que
solo tengan acceso al dispositivo determinadas estaciones dentro de una VLAN.

Descripción de los campos mostrados
Nota
Consideraciones importantes cuando se activa esta función
Una configuración incorrecta en la página "Management Access Control List" puede
imposibilitar posteriormente el acceso al dispositivo. Por consiguiente, antes de activar la
función configure una regla de acceso que le permita acceder a la administración.
La página contiene los siguientes campos:
● Administración ACL
Active o desactive la función. Esta función está desactivada en el estado de suministro.
Nota
Si la función está desactivada, es posible acceder sin restricciones a la administración del
IE Switch. Las reglas de acceso configuradas no se tienen en cuenta hasta que se activa
la función.
● Dirección IP
Introduzca la dirección IPv4 o la dirección de red para la que debe aplicarse la regla. Si
utiliza la dirección IPv4 0.0.0.0, los ajustes serán válidos para todas las direcciones IPv4.
Si se utiliza la dirección IPv6 ::, los ajustes serán válidos para todas las direcciones IPv6.
● Máscara de subred
Introduzca la máscara de subred o la longitud de prefijo. La máscara de subred
255.255.255.255 pertenece a una dirección IPv4 determinada. Si desea permitir una
subred, introduzca, por ejemplo, 255.255.255.0 para una subred C. La máscara de subred
0.0.0.0 sirve para todas las subredes.
La tabla se divide en las siguientes columnas:
● Orden
Muestra el orden de las reglas ACL.
● Dirección IP
Muestra la dirección IPv4.
● Máscara de subred / Longitud de prefijo
Muestra la máscara de subred o la longitud de prefijo.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2547

Configuración de dispositivos y redes
1.4 Crear configuraciones
● VLANs permitidas
Introduzca el número de la VLAN en la que se encuentra el dispositivo. La estación solo
puede acceder al dispositivo si se encuentra en esta VLAN configurada. Si este campo de
entrada se deja vacío, no hay restricciones en relación con las VLAN.
● Out-Band
Especifique si la dirección IPv4 puede acceder al switch a través del puerto Out-Band.
● SNMP
Especifique si la estación (o dirección IP) puede acceder al dispositivo mediante el
protocolo SNMP.
● TELNET
Especifique si la estación (o dirección IP) puede acceder al dispositivo mediante el
protocolo TELNET.
● HTTP
Especifique si la estación (o dirección IP) puede acceder al dispositivo mediante el
protocolo HTTP.
● HTTPS
Especifique si la estación (o dirección IP) puede acceder al dispositivo mediante el
protocolo HTTPS.
● SSH
Especifique si la estación (o dirección IP) puede acceder al dispositivo mediante el
protocolo SSH.
● Px.y
Especifique si la estación (o dirección IP) puede acceder al dispositivo a través de este
puerto (Slot.Port).

Configurar SCALANCE W
Interfaces y funciones de sistema
SCALANCE W780 / W740
Disponibilidad de las interfaces
La tabla siguiente muestra la disponibilidad de las interfaces físicas y lógicas. Tenga en cuenta
que en esta tabla se incluyen todas las interfaces. Dependiendo de la función de sistema, no
están disponibles diversas interfaces. En las páginas WBM se seleccionan las interfaces
disponibles.

2548

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Salvo modificaciones técnicas.
Dispositivo cliente

Puntos de acceso

Puntos de acceso

W748-1 M12

W786-1 RJ45

W786-2 RJ45

W748-1 RJ45

W788-1 M12

W786-2IA RJ45

W788-1 RJ45

W786-2 SFP
W788-2 M12
W788-2 M12 EEC
W788-1 RJ45
W788-2 RJ45

Interfaz inalámbrica
(WLAN)

WLAN 1

WLAN 1

● WLAN 1 (en el
modo Cliente
solo hay
disponible una
interfaz WLAN)
● WLAN 2

Interfaz IP:
Interfaz LAN

P1

P1

P1

VLAN

VLAN de administra‐
ción

VLAN de administración

VLAN de adminis‐
tración

Interfaz VAP 1)

-

VAP 1.Y

VAP X.Y

Y = 1 ... 8

X = 1 ... 2
Y = 1 ... 8

Interfaz WDS 1)

_

WDS 1.Y

WDS X.Y

Y = 1 ... 8

X = 1 ... 2
Y = 1 ... 8

VLAN
1)

24

24

24

solo en modo Access Point

Disponibilidad de las funciones de sistema
La tabla siguiente muestra la disponibilidad de las funciones de sistema en los dispositivos.
Recuerde que en el presente manual de configuración y en la Ayuda en pantalla se describen
todas las funciones. Dependiendo del modo de operación y del KEY PLUG se dispone de
diversas funciones.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2549

Configuración de dispositivos y redes
1.4 Crear configuraciones
Salvo modificaciones técnicas.
Modo Access Point

Puntos de acceso en modo
Cliente
Dispositivos clientes

Informa‐
ción

Security

Inter AP
Blocking

✓

-

W780 iFeatures
(MLFB 6GK5
907-8PA00)
W700 Security
(MLFB 6GK5907-0PA00)

WLAN

Estadísticas
WLAN

WLAN iFeatu‐
res

Sinopsis AP ✓

-

Lista de
clientes

✓

-

Lista WDS

✓

-

Solapa‐
miento AP

✓

-

Forzar roa‐
ming

✓

✓

Sinopsis
cliente

-

✓

APs dispo‐
nibles

-

✓

Asignación
IP

-

✓

Ruido de
fondo

✓

✓

Errores

✓

✓

Gestión en‐
viados

✓

✓

Gestión re‐
cibidos

✓

✓

Datos en‐
viados

✓

✓

Datos reci‐
bidos

✓

✓

Lista de
clientes
iREF

✓

-

Lista WDS
iREF

✓

AeroScout

✓

W780 iFeatures
(MLFB 6GK5
907-8PA00)
-

W780 iFeatures
(MLFB 6GK5
907-8PA00)
-

W780 iFeatures
(MLFB 6GK5
907-8PA00)

2550

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Modo Access Point

Puntos de acceso en modo
Cliente
Dispositivos clientes

Sistema
Interfaces

Layer 3

WLAN

NAT

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

PROFINET

✓

-✓

EtherNet/IP

✓

✓

Ajustes bá‐
sicos

✓

-✓

Avanzado

✓

✓

Antenas

✓

✓

Canales
permitidos

✓

✓

802.11n

✓

✓

AP

✓

-

AP WDS

✓

-

✓
Velocida‐
des de
transferen‐
cia de datos
AP 802.11a/
b/g

-

Velocida‐
des de
transferen‐
cia de datos
AP 802.11n

-

✓

Velocida‐
des de
transferen‐
cia de datos
Client
802.11a/b/g

✓

Velocida‐
des de
transferen‐
cia de datos
Client
802.11n

-

✓

Forzar roa‐
ming

✓

✓

Grabadora
de señales

-

✓

Analizador
espectral

✓

-

Ajustes bá‐
sicos

-

✓

NAPT

-

✓

2551

Configuración de dispositivos y redes
1.4 Crear configuraciones
Modo Access Point

Puntos de acceso en modo
Cliente
Dispositivos clientes

Security

WLAN

Inter AP Blo‐
cking

Ajustes bá‐
sicos

✓

✓

Comunica‐
ción AP

✓

-

Autentica‐
✓
ción AP RA‐
DIUS

-

Client RA‐
DIUS-Sup‐
plicant

-

✓

Clave

✓

✓

Ajustes bá‐
sicos

✓

-

W780 iFeatures
(MLFB 6GK5
907-8PA00)
W700 Security
(MLFB 6GK5907-0PA00)

Direcciones
permitidas

✓

-

W780 iFeatures
(MLFB 6GK5
907-8PA00)
W700 Security
(MLFB 6GK5907-0PA00)

2552

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Modo Access Point

Puntos de acceso en modo
Cliente
Dispositivos clientes

iFeatures

iPCF

✓

✓

W780 iFeatures
(MLFB 6GK5
907-8PA00)

Access Point en modo Clien‐
te:
W780 iFeatures
(MLFB 6GK5 907-8PA00)
Cliente: W740 iFeatures
(MLFB 6GK5 907-4PA00)

iPCF-MC

iPRP

✓

✓

Solo APs duales
W780 iFeatures
(MLFB 6GK5
907-8PA00)

Access Point en modo Clien‐
te:
W780 iFeatures
(MLFB 6GK5 907-8PA00)

✓

✓

W780 iFeatures
(MLFB 6GK5
907-8PA00)

Access Point en modo Clien‐
te:
W780 iFeatures
(MLFB 6GK5 907-8PA00)

Cliente: W740 iFeatures
(MLFB 6GK5 907-4PA00)

Cliente: W740 iFeatures
(MLFB 6GK5 907-4PA00)
iREF

✓

-

W780 iFeatures
(MLFB 6GK5
907-8PA00)
AeroScout

✓

-

W780 iFeatures
(MLFB 6GK5
907-8PA00)

SCALANCE W770 / W730
Disponibilidad de las interfaces
La tabla siguiente muestra la disponibilidad de las interfaces físicas y lógicas. Tenga en cuenta
que en esta tabla se incluyen todas las interfaces. Dependiendo de la función de sistema, no
están disponibles diversas interfaces. En las páginas WBM se seleccionan las interfaces
disponibles.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2553

Configuración de dispositivos y redes
1.4 Crear configuraciones
Salvo modificaciones técnicas.
Dispositivo cliente

Puntos de acceso

SCALANCE W734-1 RJ45

SCALANCE W774-1 RJ45

SCALANCE W738-1 M12

SCALANCE W774-1 M12 EEC
SCALANCE W778-1 M12
SCALANCE W778-1 M12 EEC

Interfaz inalámbrica (WLAN)

WLAN 1

WLAN 1

Interfaz LAN

P1

P1

VLAN

VLAN de administración

VLAN de administración

Interfaz VAP 1)

-

VAP 1.Y

Interfaz WDS 1)

_

Interfaz IP:

Y = 1 ... 8
WDS 1.Y
Y = 1 ... 8
VLAN
1)

16

16

solo en modo Access Point

Disponibilidad de las funciones de sistema
La tabla siguiente muestra la disponibilidad de las funciones de sistema en los dispositivos.
Recuerde que en el presente manual de configuración y en la Ayuda en pantalla se describen
todas las funciones. Dependiendo del modo de operación y del KEY PLUG se dispone de
diversas funciones.

2554

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Salvo modificaciones técnicas.
Modo Access Point

Puntos de acceso en modo
Cliente

✓

-

Dispositivos clientes
Informa‐
ción

Security

Inter AP
Blocking

W780 iFeatures (MLFB
6GK5 907-8PA00)
W700 Security (MLFB
6GK5907-0PA00)

WLAN

Estadísticas
WLAN

WLAN iFeatu‐
res

Sinopsis AP ✓

-

Lista de
clientes

✓

-

Lista WDS

✓

-

Solapa‐
miento AP

✓

-

Forzar roa‐
ming

✓

-

Sinopsis
cliente

-

✓

APs dispo‐
nibles

-

✓

Asignación
IP

-

✓

Errores

✓

✓

Gestión en‐
viados

✓

✓

Gestión re‐
cibidos

✓

✓

Datos en‐
viados

✓

✓

Datos reci‐
bidos

✓

✓

Lista de
clientes
iREF

✓

-

Lista WDS
iREF

✓

AeroScout

✓

W780 iFeatures (MLFB
6GK5 907-8PA00)
-

W780 iFeatures (MLFB
6GK5 907-8PA00)
-

W780 iFeatures (MLFB
6GK5 907-8PA00)
Sistema

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

PROFINET

✓

-✓

EtherNet/IP

✓

✓

2555

Configuración de dispositivos y redes
1.4 Crear configuraciones
Modo Access Point

Puntos de acceso en modo
Cliente
Dispositivos clientes

Interfaces

Layer 3

2556

WLAN

NAT

Ajustes bá‐
sicos

✓

-✓

Avanzado

✓

✓

Antenas

✓

✓

Canales
permitidos

✓

✓

802.11n

✓

✓

AP

✓

-

AP WDS

✓

-

✓
Velocida‐
des de
transferen‐
cia de datos
AP 802.11a/
b/g

-

Velocida‐
des de
transferen‐
cia de datos
AP 802.11n

-

✓

Velocida‐
des de
transferen‐
cia de datos
Client
802.11a/b/g

✓

Velocida‐
des de
transferen‐
cia de datos
Client
802.11n

-

✓

Forzar roa‐
ming

✓

✓

Grabadora
de señales

-

✓

Analizador
espectral

✓

-

Ajustes bá‐
sicos

-

✓

NAPT

-

✓

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Modo Access Point

Puntos de acceso en modo
Cliente
Dispositivos clientes

Security

WLAN

Inter AP Blo‐
cking

Ajustes bá‐
sicos

✓

✓

Comunica‐
ción AP

✓

-

Autentica‐
✓
ción AP RA‐
DIUS

-

Client RA‐
DIUS-Sup‐
plicant

-

✓

Clave

✓

✓

Ajustes bá‐
sicos

✓

-

W780 iFeatures (MLFB
6GK5 907-8PA00)
W700 Security (MLFB
6GK5907-0PA00)

Direcciones
permitidas

✓

-

W780 iFeatures (MLFB
6GK5 907-8PA00)
W700 Security (MLFB
6GK5907-0PA00)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2557

Configuración de dispositivos y redes
1.4 Crear configuraciones
Modo Access Point

Puntos de acceso en modo
Cliente
Dispositivos clientes

iFeatures

iPCF

iPCFv1

✓

✓

W780 iFeatures (MLFB
6GK5 907-8PA00)

Access Point en modo Clien‐
te:
W780 iFeatures (MLFB 6GK5
907-8PA00
Cliente: W740 iFeatures
(MLFB 6GK5 907-4PA00)

iPCF-MC

✓

✓

Solo APs duales

Access Point en modo Clien‐
te:
W780 iFeatures (MLFB 6GK5
907-8PA00

W780 iFeatures (MLFB
6GK5 907-8PA00)

Cliente: W740 iFeatures
(MLFB 6GK5 907-4PA00)
iPRP

✓

✓

W780 iFeatures (MLFB
6GK5 907-8PA00)

Access Point en modo Clien‐
te:
W780 iFeatures (MLFB 6GK5
907-8PA00
Cliente: W740 iFeatures
(MLFB 6GK5 907-4PA00)

iREF

✓

-

W780 iFeatures (MLFB
6GK5 907-8PA00)
AeroScout

✓

-

W780 iFeatures (MLFB
6GK5 907-8PA00)

SCALANCE W760 / W720
Disponibilidad de las interfaces
La tabla siguiente muestra la disponibilidad de las interfaces físicas y lógicas. Tenga en cuenta
que en esta tabla se incluyen todas las interfaces. Dependiendo de la función de sistema, no
están disponibles diversas interfaces. En las páginas WBM se seleccionan las interfaces
disponibles.

2558

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Salvo modificaciones técnicas.
Dispositivo cliente

Puntos de acceso

W721-1 RJ45

W761-1 RJ45

W722-1 RJ45
Interfaz inalámbrica (WLAN)

WLAN 1

WLAN 1

Interfaz LAN

P1

P1

VLAN

VLAN de administración

VLAN de administración

Interfaz VAP 1)

-

VAP 1.1

Interfaz WDS

_

WDS 1.1

3

3

Interfaz IP:

1)

VLAN
1)

solo en modo Access Point

Disponibilidad de las funciones de sistema
La tabla siguiente muestra la disponibilidad de las funciones de sistema en los dispositivos.
Recuerde que en el presente manual de configuración y en la Ayuda en pantalla se describen
todas las funciones. Dependiendo del modo de operación y del KEY PLUG se dispone de
diversas funciones.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2559

Configuración de dispositivos y redes
1.4 Crear configuraciones
Salvo modificaciones técnicas.
Modo Access Point

Puntos de acceso en modo
Cliente
Dispositivos clientes

Informa‐
ción

WLAN

Estadísticas
WLAN

Sistema

2560

Sinopsis AP ✓

-

Lista de
clientes

✓

-

Lista WDS

✓

-

Solapa‐
miento AP

✓

-

Forzar roa‐
ming

✓

-

Sinopsis
cliente

-

✓

APs dispo‐
nibles

-

✓

Asignación
IP

-

✓

Errores

✓

✓

Gestión en‐
viados

✓

✓

Gestión re‐
cibidos

✓

✓

Datos en‐
viados

✓

✓

Datos reci‐
bidos

✓

✓

PROFINET

✓

✓

EtherNet/IP

✓

✓

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Modo Access Point

Puntos de acceso en modo
Cliente
Dispositivos clientes

Interfaces

WLAN

Ajustes bá‐
sicos

✓

✓

Avanzado

✓

✓

Antenas

✓

✓

Canales
permitidos

✓

✓

802.11n

✓

✓

AP

✓

-

AP WDS

✓

-

✓
Velocida‐
des de
transferen‐
cia de datos
AP 802.11a/
b/g

-

Velocida‐
des de
transferen‐
cia de datos
AP 802.11n

✓

-

Forzar roa‐
ming

✓

✓

Grabadora
de señales

-

✓

Analizador
espectral

✓

✓

Layer 3

NAT

Ajustes bá‐
sicos

-

NAPT

-

✓

Security

WLAN

Ajustes bá‐
sicos

✓

✓

Comunica‐
ción AP

✓

-

Autentica‐
✓
ción AP RA‐
DIUS

-

Client RA‐
DIUS-Sup‐
plicant

-

✓

Clave

✓

✓

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2561

Configuración de dispositivos y redes
1.4 Crear configuraciones
Modo Access Point

Puntos de acceso en modo
Cliente
Dispositivos clientes

iFeatures

iPCF

-

✓
Solo W722-1 RJ45
Puede estar integrado en una
WLAN con iPCF, iPCF-MC.

iPCF-HT

-

iPCF-MC

-

✓
Solo W722-1 RJ45
✓
Solo W722-1 RJ45
Puede estar integrado en una
WLAN con iPCF, iPCF-MC.

iPRP

-

✓
Solo W722-1 RJ45

Compatibilidad con IPv6
Compatibilidad con IPv6
Las siguientes funciones de sistema no soportan direcciones IPv6:
● Inter AP Blocking
● Forzar roaming
●

IP ACL

● Management ACL

Capacidades
SCALANCE W780 / W740
Capacidad del dispositivo
En la siguiente tabla se muestra la capacidad del dispositivo para Web Based Management y
Command Line Interface.

2562

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Dependiendo del dispositivo, no están disponibles diversas funciones.

System

Función configurable

Número máximo

Servidores Syslog

3

Servidor DNS

manual (IPv4/IPv6)

3

learned (IPv4/IPv6)

2

en total

7

Servidor SMTP

2

Receptor de Traps SNMPv1

10

Servidores SNTP

2

Servidores NTP

1

Grupos DHCP

1

Direcciones IPv4 que gestiona el servidor DHCP (di‐ 100
námicas y estáticas)
Asignaciones estáticas DHCP por grupo DHCP

20

Opciones DHCP

20

Interfaces Direcciones de destino para Forzar roaming
Layer 2
Security

10

Clientes conectados por VAP

126

LAN virtuales (basadas en puerto; incluida VLAN 1)

24

Instancias Multiple Spanning Tree

16

Direcciones IP de servidores RADIUS

● AAA: 4
● WLAN: 2

ACL de gestión (reglas de acceso para la gestión)

10

Configuración de reglas MAC ACL

20

Reglas Ingress y Egress para MAC ACL (total)

40 por interfaz (20 reglas Ingress /
20 reglas Egress)
● Cliente: 80 (P1, WLAN)
● Access Point: 680 (P1, WDS
1,Y, VAP 1,Y)
● Dual Access Point: 1320 (P1,
WDS X,Y, VAP X,Y)

Configuración de reglas IP ACL

20

Reglas Ingress y Egress para IP ACL de puerto (total) 40 por interfaz (20 reglas Ingress /
20 reglas Egress)
● Cliente: 120 (P1, WLAN, VLAN
de administración)
● Access Point: 720 (P1, WDS
1,Y, VAP 1,Y, VLAN de
administración)
● Dual Access Point: 1360 (P1,
WDS X,Y, VAP X,Y, VLAN de
administración)
Funciones de usuario

28

Grupos de usuarios

32

Usuarios

28

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2563

Configuración de dispositivos y redes
1.4 Crear configuraciones

SCALANCE W770 / W730
Capacidad del dispositivo
En la siguiente tabla se muestra la capacidad del dispositivo para Web Based Management y
Command Line Interface.
Dependiendo del dispositivo, no están disponibles diversas funciones.
Función configurable
System

Número máximo

Servidores Syslog
Servidor DNS

3
manual (IPv4/IPv6)

3

learned (IPv4/IPv6)

2

en total

7

Servidor SMTP

3

Receptor de Traps SNMPv1

10

Servidores SNTP

2

Servidores NTP

1

Grupos DHCP

1

Direcciones IPv4 que gestiona el servidor DHCP (diná‐ 100
micas y estáticas)

2564

Asignaciones estáticas DHCP por grupo DHCP

20

Opciones DHCP

20

Interfa‐
ces

Direcciones de destino para Forzar roaming

10

Clientes conectados por VAP

126

Layer 2

LAN virtuales (basadas en puerto; incluida VLAN 1)

16

Instancias Multiple Spanning Tree

16

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Función configurable
Security Direcciones IP de servidores RADIUS

Número máximo
● AAA: 4
● WLAN: 2

ACL de gestión (reglas de acceso para la gestión)

10

Configuración de reglas MAC ACL

20

Reglas Ingress y Egress para MAC ACL (total)

40 por interfaz (20 reglas Ingress /
20 reglas Egress)
● Cliente: 80 (P1, WLAN)
● Access Point: 680 (P1, WDS
1.Y, VAP 1.Y)

Configuración de reglas IP ACL

20

Reglas Ingress y Egress para IP ACL de puerto (total)

40 por interfaz (20 reglas Ingress /
20 reglas Egress)
● Cliente: 120 (P1, WLAN, VLAN
de administración)
● Access Point: 720 (P1, WDS
1.Y, VAP 1.Y, VLAN de
administración)

Funciones de usuario

28

Grupos de usuarios

32

Usuarios

28

SCALANCE W760 / W720
Capacidad del dispositivo
En la siguiente tabla se muestra la capacidad del dispositivo para Web Based Management y
Command Line Interface.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2565

Configuración de dispositivos y redes
1.4 Crear configuraciones
Dependiendo del dispositivo, no están disponibles diversas funciones.

System

Función configurable

Número máximo

Servidores Syslog

3

Servidor DNS

manual (IPv4/IPv6)

3

learned (IPv4/IPv6)

2

en total

7

Servidor SMTP

3

Receptor de Traps SNMPv1

10

Servidores SNTP

2

Servidores NTP

1

Grupos DHCP

1

Direcciones IPv4 que gestiona el servidor DHCP (diná‐ 100
micas y estáticas)
Asignaciones estáticas DHCP por grupo DHCP

20

Opciones DHCP

20

Interfa‐
ces

Direcciones de destino para Forzar roaming

10

Clientes conectados por VAP

126

Layer 2

LAN virtuales (basadas en puerto; incluida VLAN 1)

3

Instancias Multiple Spanning Tree

16

Security Direcciones IP de servidores RADIUS

● AAA: 4
● WLAN: 2

ACL de gestión (reglas de acceso para la gestión)

10

Configuración de reglas MAC ACL

20

Reglas Ingress y Egress para MAC ACL (total)

40 por interfaz (20 reglas Ingress /
20 reglas Egress)
● Cliente: 80 (P1, WLAN)
● Access Point: 680 (P1, WDS
1.Y, VAP 1.Y)

Configuración de reglas IP ACL

20

Reglas Ingress y Egress para IP ACL IP (total)

40 por interfaz (20 reglas Ingress /
20 reglas Egress)
● Cliente: 120 (P1, WLAN, VLAN
de administración)
● Access Point: 720 (P1, WDS
1.Y, VAP 1.Y, VLAN de
administración)
● Dual Access Point: 1360 (P1,
WDS X.Y, VAP X.Y, VLAN de
administración)

2566

Funciones de usuario

28

Grupos de usuarios

32

Usuarios

28

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Información importante
Direcciones IP
IPv4 / IPv6
¿Cuáles son las principales diferencias?
Configuración IP

IPv4

IPv6

● Servidor DHCP

● Stateless Address Autoconfiguration (SLAAC):
configuración automática sin estado vía NDP (Neighbor
Discovery Protocol)

● Manual

–

Crea una dirección Link Local para cada interfaz que
no requiere un router en el link.

–

Comprueba la univocidad de la dirección en el link que
no requiere un router en el link.

–

Especifica si las direcciones globales se obtienen
mediante un mecanismo sin estado, un mecanismo
con estado o ambos. (Requiere un router en el link.)

● Manual
● DHCPv6 (con estado)
Direcciones IP disponibles

32 bits: direcciones 4, 29 *
109

128 bits: direcciones 3,4 * 1038

Formato de dirección

Decimal: 192.168.1.1

Hexadecimal: 2a00:ad80::0123

con puerto: 192.168.1.1:20 con puerto: [2a00:ad80::0123]:20
Loopback

127.0.0.1

::1

Direcciones IP por interfaz

4 direcciones IP

Varias direcciones IP
● LLA: una dirección Link Local (generada
automáticamente) fe80::/128 por interfaz
● ULA: varias direcciones Unicast Unique Local por interfaz
● GUA: varias direcciones Unicast globales por interfaz

Header

● Suma de verificación

● Comprobación en capa superior

● Longitud variable

● Tamaño fijo

● Fragmentación en el
Header

● Fragmentación en el Extension Header

● Sin seguridad
Fragmentación

Host y router

Solo punto final de la comunicación

Quality of Service

Type of Service para la
priorización (ToS)

La priorización se indica en el campo "Traffic Class" del Hea‐
der.

Tipos de telegrama

Broadcast, Multicast, Uni‐
cast

Multicast, Unicast, Anycast

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2567

Configuración de dispositivos y redes
1.4 Crear configuraciones
IPv4
Identificación de clientes/servi‐ Client-ID:
dor DHCP
● Dirección MAC
● DHCP Client ID
● System Name
● Nombre de estación
PROFINET
● IAID y DUID

IPv6
DUID + IAID(s) = exactamente una interfaz del host
DUID = DHCP Unique Identifier
Identifica unívocamente a servidor y clientes y no debe modi‐
ficarse, ni siquiera al cambiar componentes de red.
IAID = Identity Association Identifier
Por lo menos una por interfaz es generada por el cliente y
permanece invariable cuando se reinicia el cliente DHCP
Tres métodos para determinar la DUID
● DUID-LLT
● DUID-EN
● DUID-LL

DHCP

vía UDP mediante Broad‐
cast

vía UDP mediante Unicast
RFC 3315, RFC 3363
Stateful DHCPv6
Configuración que depende del estado y con la que se trans‐
miten la dirección IPv6 y los ajustes de configuración.
También se intercambian cuatro mensajes DHCPv6 entre
cliente y servidor:
1. SOLICIT:
Enviado por el cliente DHCPv6 para localizar el servidor
DHCPv6.
2. ADVERTISE
Los servidores DHCPv6 disponibles responden a la
solicitud.
3. REQUEST
El cliente DHCPv6 solicita una dirección IPv6 y los ajustes
de configuración al servidor DHCPv6.
4. REPLY
El servidor DHCPv6 envía la dirección IPv6 y los ajustes de
configuración.
Si tanto el cliente como el servidor soportan la función "Rapid
commit", el procedimiento se reduce a dos mensajes
DHCPv6, SOLICIT y REPLY.
Stateless DHCPv6
Cuando DHCPv6 no tiene estado, se transmiten únicamente
los ajustes de configuración.
Prefix Delegation
El servidor DHCPv6 delega la distribución de prefijos IPv6 al
cliente DHCPv6. El cliente DHCPv6 se denomina también
router PD.

Resolución de direcciones IP
en direcciones de hardware

2568

ARP (Address Resolution
Protocol)

NDP (Neighbor Discovery Protocol)

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Dirección IPv4
Estructura de una dirección IPv4
Clases de dirección
Campo de direcciones IP

Cantidad máx. de redes

1.x.x.x a 126.x.x.x

Clase

CIDR

A

/8

126

16777214

16383

65534

B

/16

2097151

254

C

/24

128.0.x.x a 191.255.x.x
192.0.0.x a 223.255.255.x

Cantidad máx. de
hosts/red

224.0.0.0 - 239.255.255.255

Aplicaciones Multicast

D

240.0.0.0 - 255.255.255.255

reservada para aplicaciones futuras

E

Una dirección IP consta de 4 bytes. Cada byte se representa en forma decimal y está separado
del anterior por un punto. Resulta por tanto la siguiente estructura, teniéndose que reemplazar
XXX por un número entre 0 y 255:
XXX.XXX.XXX.XXX
La dirección IP consta de dos partes, la dirección de red y la dirección de la estación terminal.
Así es posible formar diversas subredes. En función de qué bytes de la dirección IP se usan
como dirección de red y cuáles como dirección del usuario final, una dirección de IP puede
asignarse a una clase de dirección determinada.

Máscara de subred
Los bits de la dirección de estación terminal se pueden utilizar para la formación de subredes.
Los bits iniciales representan la dirección de la subred y los demás bits se interpretan como
dirección del ordenador en la subred.
Una subred se define por la máscara de subred. La estructura de la máscara de subred se
corresponde con la de una dirección IP. Si en la máscara de subred está puesto un "1" en una
posición de bit, el bit de la posición correspondiente de la dirección IP pertenece a la dirección
de subred, y en otro caso a la dirección del ordenador.
Ejemplo de una red de clase B:
La dirección de subred estándar para redes de la clase B es 255.255.0.0, con lo que se dispone
de los dos últimos bytes para definir una subred. Si se deben definir 16 subredes, el tercer byte
de la dirección de subred se tiene que poner a 11110000 (representación binaria). En este
caso resulta la máscara de subred 255.255.240.0.
Para constatar si dos direcciones IP pertenecen a la misma subred, se aplica a las dos
direcciones IP y a la máscara de subred una operación lógica Y bit a bit. Si ambas
vinculaciones dan el mismo resultado, las dos direcciones IP pertenecen a la misma subred,
como p. ej. 141.120.246.210 y 141.120.252.108.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2569

Configuración de dispositivos y redes
1.4 Crear configuraciones
La división descrita de la dirección de estación terminal no tiene relevancia fuera de la red local,
siendo de interés sólo la dirección IP en su totalidad para la conmutación de paquetes.
Nota
En la representación en bits de la máscara de subred, los "unos" han de estar puestos con
justificación a la izquierda; es decir, que no debe haber "ceros" entre los "unos".

Direcciones IPv6
Conceptos de IPv6
Nodo de red
Un nodo de red es un dispositivo que está conectado a una o varias redes a través de una o
varias interfaces.
Router
Es un nodo de red que reenvía paquetes IPv6.
Host
Es un nodo de red que representa un punto final para relaciones de comunicación IPv6.
Link
En la terminología del IPv6 se entiende por link una conexión de Layer 3 directa dentro de una
misma red IPv6.
Vecino
Dos nodos de red se denominan vecinos si se encuentran en el mismo Link.
Interfaz IPv6
Interfaz física o lógica que tiene activado IPv6.
Path MTU
Tamaño de paquete máximo admisible en la ruta entre un remitente y un destinatario.
Path MTU Discovery
Mecanismo para determinar el tamaño de paquete máximo admisible a lo largo de toda la ruta
entre un remitente y un destinatario.
LLA
Dirección Link Local FE80::/10
En cuanto se activa IPv6 en la interfaz, se genera automáticamente una dirección Link Local.
Solo es accesible para nodos que están en el mismo Link.
ULA
Dirección Unique Local
Se define en la RFC 4193. A través de esta dirección se accede a la interfaz IPv6 de la LAN.
GUA

2570

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Dirección Unicast global. A través de esta dirección se accede a la interfaz IPv6, p. ej. por
Internet.
ID de interfaz
La ID de interfaz se genera siguiendo el método EUI-64 o bien manualmente.
EUI-64
Extended Unique Indentifier (RFC 4291); método para generar la ID de interfaz. Con Ethernet,
la ID de interfaz se genera a partir de la dirección MAC de la interfaz. Divide la dirección MAC
en la parte específica del fabricante (OUI) y la parte específica de la red (NIC) e inserta FFFE
entre ambas partes.
Ejemplo:
Dirección MAC = AA:BB:CC:DD:EE:FF
OUI = AA:BB:CC
NIC = DD:EE:FF
EUI-64 = OUI + FFFE + NIC = AA:BB:CC:FF:FE:DD:EE:FF
Scope
Define el alcance de la dirección IPv6.

Estructura de una dirección IPv6
Formato de dirección IPv6 - notación
Las direcciones IPv6 constan de 8 bloques con cifras decimales de cuatro dígitos en cada uno
(128 bits en total). Los bloques están separados por dos puntos.
Ejemplo:
fd00:0000:0000:ffff:02d1:7d01:0000:8f21
Reglas / simplificaciones:
● Si uno o varios bloques tienen el valor 0 se admite una notación abreviada.
La dirección fd00:0000:0000:ffff:02d1:7d01:0000:8f21 también puede anotarse abreviada,
del siguiente modo:
fd00::ffff:02d1:7d01:0000:8f21
Con el fin de conservar la univocidad, dicha abreviación solo puede aplicarse una vez
dentro de toda la dirección.
● Está permitido omitir los ceros a la izquierda dentro de un bloque.
La dirección fd00:0000:0000:ffff:02d1:7d01:0000:8f21 también puede anotarse abreviada,
del siguiente modo:
fd00::ffff:2d1:7d01:0000:8f21
● Notación decimal con puntos
Para los 2 últimos bloques o 4 bytes es posible utilizar la notación decimal tradicional con
puntos.
Ejemplo: la dirección IPv6 fd00::ffff.125.1.0.1 es equivalente a fd00::ffff:7d01:1

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2571

Configuración de dispositivos y redes
1.4 Crear configuraciones

Estructura de una dirección IPv6
El protocolo IPv6 distingue entre tres tipos de dirección: Unicast, Anycast y Multicast. El
apartado siguiente describe la estructura de las direcciones Unicast globales.
Prefijo IPv6

Sufijo

Prefijo global:

ID de subred

ID de interfaz

n bits

m bits

128 - n - m bits

Rango de direcciones
asignado

Descripción de la ubicación, tam‐ Asignación unívoca del host en la red.
bién prefijo de subred o subred La ID se genera a partir de la dirección
MAC.

El prefijo para la dirección Link Local es siempre fe80:0000:0000:0000. El prefijo se abrevia y
se anota del siguiente modo: fe80::

Prefijo IPv6
Especificado en: RFC 4291
El prefijo IPv6 representa el identificador de la subred.
Los prefijos y las direcciones IPv6 se indican de igual forma que en la notación CIDR (Classless
Inter-Domain Routing) para IPv4.
Estructura
Dirección IPv6 / longitud de prefijo
Ejemplo
Dirección IPv6: 2001:0db8:1234::1111/48
Prefijo: 2001:0db8:1234::/48
ID de interfaz: ::1111

Entrada y representación
La entrada de direcciones IPv6 es posible en las notaciones descritas anteriormente. Las
direcciones IPv6 se muestran siempre en notación hexadecimal.

VLAN
Definición de red independiente de la ubicación de las estaciones
VLAN (Virtuelles Local Area Network) divide una red física en varias redes lógicas separadas
entre sí. Se forman grupos lógicos de dispositivos. Solo pueden direccionarse entre sí las
estaciones de la misma VLAN. Dado que también los telegramas Multicast y Broadcast solo
pueden enviarse dentro de la VLAN correspondiente, se habla de dominios Broadcast.
De aquí resulta, como ventaja especial de las VLAN, una menor carga de la red para las
estaciones o segmentos de red de otras VLAN.

2572

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Para identificar qué paquete está asignado a qué VLAN, el telegrama se amplía con 4 bytes,
consulte VLAN-Tagging (Página 2572). Esta ampliación contiene también información de
prioridad, además de la ID de VLAN.

Posibilidades de asignación a VLAN
Hay diferentes posibilidades de asignación a VLAN:
● VLAN basada en puerto
A cada puerto de un dispositivo se le asigna una ID de VLAN. Una VLAN basada en puerto
se configura en "Layer 2 > VLAN > VLAN basada en puerto (Página 2735)".
● VLAN basada en protocolo
A cada puerto de un dispositivo se le asigna un grupo de protocolos.
● VLAN basada en subred
A la dirección IP del dispositivo se le asigna una ID de VLAN.

Extensión de los telegramas Ethernet en cuatro byte
Para CoS (Class of Service, priorización de telegramas) y VLAN (red virtual) se ha fijado en la
norma IEEE 802.1Q la extensión de los telegramas Ethernet con el identificador VLAN.
Nota
El identificador VLAN provoca un aumento de la longitud total permitida del telegrama de 1518
a 1522 bytes.
Se tiene que comprobar si los terminales de la red pueden procesar esa longitud / ese tipo de
telegrama. De no ser así, a esas estaciones sólo se les deberán enviar telegramas de longitud
estándar.
Los 4 bytes adicionales se encuentran en el encabezado del telegrama Ethernet, entre la
dirección de origen y el campo de tipo / longitud Ethernet:
Los bytes adicionales contienen el Tag Protocol Identifier (TPID) y la Tag Control Information
(TCI).

3UH£PEXOR
E\WHV

'LUHFFLµQGH 'LUHFFLµQGH
GHVWLQR
RULJHQ
E\WHV
E\WHV

73,'
E\WHV

7&,
E\WHV

7LSR
E\WHV

'DWRV
aE\WHV

&5&
E\WHV

[
3ULRULW\
ELWV

9/$1,' ELWV
&), ELW

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2573

Configuración de dispositivos y redes
1.4 Crear configuraciones

Tag Protocol Identifier (TPID)
Los primeros 2 bytes forman el Tag Protocol Identifier (TPID) y están ocupados de forma fija
con 0x8100. Este valor indica que el paquete de datos contiene información VLAN o
indicaciones de prioridad.

Tag Control Information (TCI)
Los 2 bytes de la Tag Control Information (TCI) contienen la siguiente información:
Priorización CoS
En el telegrama con tag hay 3 bits para la prioridad, que también se denominan Class of
Service (CoS), consulte también IEEE 802.1Q.
Bits CoS

Prioridad

Tipo del tráfico de datos

000

0 (mínima)

Background (segundo plano)

001

1

Best Effort

010

2

Excellent Effort

011

3

Critical Applications (Aplicaciones críticas)

100

4

Video, < 100 ms retardo (latencia y jitter)

101

5

Voice (idioma), < 10 ms retardo (latencia y jitter)

110

6

Internetwork Control

111

7 (máxima)

Network Control

La priorización de los paquetes de datos presupone una cola de espera en los componentes,
en la que puede guardar temporalmente los paquetes de datos de menor prioridad.
El dispositivo dispone de varias colas de espera paralelas, en las que se procesan los
telegramas de diferente prioridad. Con el ajuste predeterminado se procesan primero los
telegramas de prioridad máxima. Este procedimiento garantiza que los telegramas de mayor
prioridad se envíen en cualquier caso, incluso si la cantidad de datos es elevada.
Canonical Format Identifier (CFI)
El CFI se necesita para la compatibilidad entre Ethernet y Token Ring.
Los valores tienen el siguiente significado:
Valor

Significado

0

El formato de la dirección MAC es canónico. En la representación canónica de la dirección
MAC primero se transmite el bit de menor valor. Ajuste estándar para switches Ethernet.

1

El formato de la dirección MAC no es canónico.

ID de VLAN

2574

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
En el campo de datos de 12 bits se pueden formar hasta 4096 IDs de VLAN. En ese caso rigen
las siguientes especificaciones:
ID de VLAN

Significado

0

El telegrama sólo contiene información sobre la prioridad (Priority Tagged Frames),
pero no contiene un identificador VLAN válido.

1 - 4094

Identificador VLAN válido, el telegrama está asignado a una VLAN, puede contener
también información sobre la prioridad.

4095

Reservado

Comunicación basada en MAC
Los frames que son enviados por el cliente hacia el Access Point contienen como dirección
MAC de origen siempre la dirección MAC del cliente WLAN. Por tanto, en la "tabla de
aprendizaje" del punto de acceso solo se encuentra la dirección MAC del cliente WLAN.

Modos MAC "Automático", "Manual" y "Propio"
Si se adopta la dirección MAC de un dispositivo conectado al cliente (Automático), o se ajusta
de forma manual (Manual), tanto los frames basados en MAC como en IP alcanzan su objetivo
para este dispositivo. Si se utiliza la dirección MAC de la interfaz Ethernet del cliente WLAN
(Propio), los frames basados en MAC y en IP solo alcanzan el cliente WLAN.
El Access Point comprueba si la dirección MAC de destino coincide con la dirección MAC del
cliente conectado. Puesto que un cliente WLAN solo puede emplear una dirección MAC, una
comunicación a nivel de direcciones MAC (ISO/OSI capa 2) solo puede tener lugar para un
dispositivo situado detrás del cliente o para el propio cliente.
Mediante IP Mapping puede accederse a varios dispositivos situados detrás de un cliente
basado en el protocolo IP. Los paquetes IP se desglosan por medio de una tabla gestionada
a nivel interno y se transmiten a los dispositivos conectados.
Número máximo posible de dispositivos Ethernet con comunicación de Layer 2 detrás del
cliente: 1
Indicaciones para el ajuste "Automático":
● Mientras en la interfaz Ethernet no exista ningún enlace (Link), el dispositivo utiliza la
dirección MAC de la interfaz Ethernet para ser accesible en ese estado. En este estado se
puede encontrar el dispositivo con el Primary Setup Tool y configurarlo mediante WBM o
CLI.
● En cuanto existe un enlace en la interfaz Ethernet, el dispositivo adopta la dirección MAC
de origen del primer telegrama recibido.
Nota
A partir del momento en que el dispositivo adopta una dirección MAC ajena (manual o
automática), el dispositivo ya no responde a consultas de la Primary Setup Tool si las
mismas se reciben a través de la interfaz WLAN. Consultas de la PST a través de la interfaz
Ethernet se siguen contestando.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2575

Configuración de dispositivos y redes
1.4 Crear configuraciones

MAC Mode "Túnel de Layer 2"
El cliente WLAN utiliza la dirección MAC de la interfaz Ethernet para la interfaz WLAN.
Además, el punto de acceso es informado sobre las direcciones MAC conectadas a través de
la interfaz Ethernet del cliente WLAN. Esto hace posible introducir las direcciones MAC de
esos dispositivos en la "Tabla de aprendizaje" del punto de acceso. El Access Point puede
reenviar al cliente correspondiente frames basados en MAC para los dispositivos situados
detrás del cliente.
De forma similar a lo que sucede con WDS, se crea un puerto propio para el cliente L2T, a
través del cual se envían los frames Ethernet sin cambio de la dirección MAC de destino.
Número máximo posible de dispositivos Ethernet detrás del cliente: 8

IEEE 802.11n
Sinopsis
El estándar IEEE 802.11n es una extensión del estándar 802.11 y fue aprobada en 2009.
Los estándares existentes hasta el momento trabajaban en la banda de frecuencia de 2.4 GHz
(IEEE 802.11g/b) o en la banda de frecuencia de 5 GHz (IEEE 802.11a). IEEE 802.11n puede
trabajar en ambas bandas de frecuencia.
En el estándar IEEE 802.11n se han implementado mecanismos en capas PHY y MAC que
aumentan la tasa de datos y mejoran la cobertura por radio.
● Técnica de antena MIMO
● Maximum Ratio Combining (MRC)
● Spatial Multiplexing
● Channel Bonding
● Agregación de tramas
● Intervalo Guard abreviado
● Modulation and Coding Scheme
● Tasas de datos de hasta 450 Mbits/s (bruto)
No es posible en todos los dispositivos SCALANCE W700.

2576

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

Técnica de antena MIMO
MIMO (Entrada múltiple - Salida múltiple) se basa en un sistema inteligente de antenas
múltiples. El emisor y el receptor tienen varias antenas separadas físicamente. Las antenas
separadas físicamente emiten los flujos de datos al mismo tiempo. Es posible un máximo de
cuatro flujos de datos. Los flujos de datos se emiten distribuidos físicamente y recorren
trayectorias diferentes mediante difracción, refracción, desvanecimiento y reflexión
(propagación por trayectos múltiples). La propagación de trayectos múltiples hace que se
origine, en el punto de recepción, un modelo complejo, en función del espacio y del tiempo
como señal común de las señales de emisión individuales. MIMO utiliza este modelo unívoco,
capturando para ello las señales características en su posición espacial. Cada posición
espacial se diferencia de su vecina. Con la caracterización de los emisores individuales, el
receptor es capaz de distinguir entre varias señales.

Access Point
SCALANCE
W788-1 M12
Pared

Client
SCALANCE
W748-1 M12
Flujo de datos

G_IK10_XX_30305

Armario de
distribución

Maximum Ratio Combining (MRC)
En el sistema multiantena, las señales de radio son recibidas por las diferentes antenas, y se
combinan en una única señal. Para combinar las señales de radio se aplica el método MRC.
El método MRC pondera las señales de radio en función de su relación señal/ruido y las
combina en una sola señal. La relación señal/ruido se mejora y se reduce la tasa de errores.

Spatial Mutliplexing
En el multiplexado espacial (Spatial Multiplexing), las diferentes informaciones se envían a
través de la misma frecuencia. La corriente de datos se distribuye entre n antenas emisoras,
de modo que cada antena solo envía 1/n de la corriente de datos. La distribución de la corriente
de datos está limitada por el número de antenas. En el lado del receptor la señal se vuelve a
recomponer.
Mediante el multiplexado espacial se obtiene una mayor relación señal/ruido y una mayor tasa
de datos.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2577

Configuración de dispositivos y redes
1.4 Crear configuraciones

Channel Bonding
En IEEE 802.11n puede transmitir datos mediante dos canales vecinos directos. Ambos
canales de 20 MHz se recopilan en un canal con 40 MHz. Con ello se puede doblar el ancho
de banda de canal y aumentar la tasa de datos.
Para usar la agrupación de canales, el receptor debe soportar transferencias de 40 MHz. Si el
receptor no soporta transferencias de 40 MHz, se reducirá automáticamente a 20 MHz. De ese
modo IEEE 802.11n también puede comunicarse con dispositivos IEEE 802.11a/b/g.
La agrupación de canales se ajusta en la página WBM "AP (Página 2710)" con el parámetro
"Ancho de banda de canal HT [MHz]".
Comunicación según el estándar IEEE 802.11a/b/g/h

SCALANCE
W746-1PRO

SCALANCE
W788-1PRO

2 canales de 20 MHz
Tasa de datos máxima: 54 Mbit/s

Comunicación según el estándar IEEE 802.11n

SCALANCE
W788-1 M12

SCALANCE
W748-1 M12
1 canal de 40 MHz

Tasa de datos máxima: 450 Mbits/s

Agregación de tramas
En el caso de IEEE 802.11n, es posible agrupar paquetes de datos individuales en un paquete
de datos mayor, lo que se conoce por agregación de tramas. Hay dos tipos de agregación de
tramas:
● Aggregated MAC Protocol Data Unit (A-MPDU)
Con A-MPDU se agrupan varios paquetes de datos MPDU con la misma dirección de
destino y se envían como una A-MPDU grande.
● Aggregated Mac Service Data Unit (A-MSDU)
Con A-MSDU se encadenan y envían varios paquetes de datos MSDU con la misma
dirección de destino.
Los dispositivos SCALANCE W soportan ambos tipos de agregación de tramas. Los ajustes se
definen en la página del WBM "AP 802.11n (Página 2710)".

Intervalo Guard abreviado
El intervalo Guard impide que se mezclen diferentes transmisiones. En la tecnología de
mensajes, esta combinación también se denomina interferencia intersímbolo (ISI).
Una vez transcurrido el tiempo de emisión se realiza una pausa de emisión (Guard Interval)
antes de empezar la transferencia siguiente.

2578

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
El intervalo Guard de IEEE 802.11a/b/g es de 800 ns. IEEE 802.11n puede utilizar el intervalo
Guard abreviado de 400 ns. El intervalo Guard abreviado se define en la página del WBM "AP
802.11n (Página 2710)".

Modulation and Coding Schemes
El estándar IEEE 802.11n soporta diferentes tasas de datos. Las tasas de datos se basan en
el número de ciclos de emisión y recepción (Spatial Streams), el procedimiento de modulación
y la codificación de canales. Las diferentes combinaciones se describen en Modulation and
Coding Shemes.

PROFINET
PROFINET
PROFINET es un estándar Ethernet abierto (IEC 61158/61784) para la automatización
industrial basada en Industrial Ethernet. PROFINET utiliza los estándares de TI existentes y
permite una comunicación continua desde el nivel de campo hasta el nivel de gestión, además
de una ingeniería única para toda la planta. Otras propiedades de PROFINET son:
● Uso de TCP/IP
● Automatización de aplicaciones con necesidad de tiempo real
– Comunicación Real-Time (RT)
– Comunicación Isochronous Real-Time (IRT)
● Integración óptima de sistemas de bus de campo
PROFINET se configura en "Sistema > PROFINET (Página 2688)".

PROFINET IO
En el marco de PROFINET, PROFINET IO es un concepto de comunicación para la realización
de aplicaciones descentralizadas y modulares. La aplicación práctica de PROFINET IO se
lleva a cabo con el estándar PROFINET para autómatas programables (IEC 61158-x-10).

EtherNet/IP
EtherNet/IP
EtherNet/IP (Ethernet/Industrial Protocol) es un estándar industrial abierto para Ethernet
industrial en tiempo real, basado en TCP/IP y UDP/IP. Con EtherNet/IP se amplía Ethernet con
el Common Industrial Protocol (CIP) en el nivel de aplicación. En EtherNet/IP se aplican las
capas inferiores del modelo de referencia de Ethernet con las funciones de transferencia,
transmisión, red y transporte.
EtherNet/IP se configura en "System > EtherNet/IP (Página 2687)".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2579

Configuración de dispositivos y redes
1.4 Crear configuraciones

Common Industrial Protocol
El Common Industrial Protocol (CIP) es un protocolo de aplicación de la automatización que
soporta el traspaso de los buses de campo a Ethernet industrial y a redes IP. Este protocolo
industrial lo utilizan buses de campo y redes industriales, como DeviceNet, ControlNet y
EtherNet/IP, en el nivel de aplicación como interfaz entre el mundo determinista de los buses
de campo y la aplicación de automatización (controlador, E/S, HMI, OPC ...). El CIP está por
encima del nivel de transporte y amplía los servicios de transporte y comunicación puros para
la técnica de automatización. Aquí se incluyen servicios para el tráfico de datos cíclico, crítico
en el tiempo y controlado por eventos. El CIP distingue entre los mensajes E/S críticos en el
tiempo (implicit messages) y los telegramas individuales de pregunta/respuesta para la
configuración y el registro de datos (explicit messages). El CIP está orientado a los objetos;
todos los datos "visibles" desde fuera son accesibles en forma de objetos. El CIP tiene una
base de configuración común: EDS (Electronic Data Sheet).

Electronic Data Sheet
Electronic Data Sheet (EDS) es una hoja de datos electrónica que describe dispositivos.
Encontrará la EDS necesaria para el funcionamiento de EtherNet/IP en "System >
Load&Save".

NAT/NAPT
¿Qué es NAT?
Con la función "Network Address Translation" (NAT) se sustituye la dirección IPv4 contenida
en un paquete de datos por otra. Por regla general, NAT se utiliza en una transición de red
entre una LAN privada y una red externa con direcciones IPv4 de vigencia global. Para esto,
un dispositivo NAT ubicado en la transición de red convierte una dirección IPv4 local de la LAN
interna en una dirección IPv4 externa global.
El dispositivo NAT gestiona la conversión de la dirección IPv4 interna en la global en una lista
de conversión. La asignación de direcciones es automática. La asignación de direcciones para
NAT se configura en "Layer 3 > NAT > Basic (Página 2748)".

¿Qué es NAPT?
En el caso de "Network Address Port Translation" (NAPT) o "Port Address Translation" (PAT)
se convierten varias direcciones IPv4 de origen internas en la misma dirección IPv4 de origen
externa. Para la identificación de los distintos dispositivos de origen se almacena también el
puerto del dispositivo de origen en la lista de traducción de la pasarela NAT y se convierte para
la dirección externa.
Si varios clientes locales envían a través de la pasarela NAT una petición a la misma dirección
IPv4 de destino externa, la pasarela inscribe en cada caso su dirección IPv4 de origen externa
propia en el encabezado de estos paquetes de datos transmitidos. Dado que los paquetes de

2580

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
datos transmitidos tienen la misma dirección IPv4 de origen global, la pasarela NAT asigna los
paquetes de datos a los clientes a través de un número de puerto distinto.
Nota
NAT/NATP solo es posible en la capa 3 del modelo de referencia ISO/OSI. Para el uso de la
función NAT, las redes tienen que utilizar el protocolo IP.
Si se utiliza el protocolo ISO, que trabaja en la capa 2, no es posible el uso de NAT.
Si un cliente de la red global desea utilizar un servicio de la red interna, hay que configurar la
lista de traducción para la asignación estática de direcciones. La lista de traducción para NAPT
se configura en "Layer 3 > NAT > NAPT (Página 2751)".

iPCF / iPCF-HT / iPCF-MC
El área de cobertura de un sistema WLAN puede ampliarse utilizando varios puntos de acceso.
Si un cliente se desplaza del área de un punto de acceso al de otro, se mantiene la conexión
por radio (Roaming) tras una breve interrupción.
Si se necesitan tiempos de actualización muy cortos, p. ej., para comunicación PROFINET, es
necesario emplear puntos de acceso y módulos cliente que utilicen procedimientos
propietarios iPCF / iPCF-HT o iPCF-MC para roaming rápido y tráfico de datos determinista.
iPCF / iPCF-HT / iPCF-MC solo pueden funcionar independientemente. No es posible
combinarlos entre sí, p. ej., iPCF con iPCF-HT o con iPCF-MC.

Principio de funcionamiento
iPCF
Con iPCF, el punto de acceso comprueba cíclicamente todas las estaciones de la célula de
radio. La consulta contiene al mismo tiempo el tráfico Downlink para dichos dispositivos. El
dispositivo envía en la respuesta los datos de Uplink. El punto de acceso consulta uno nuevo
dispositivo al menos cada 5 ms.
La consulta de un dispositivo es vista por todos los demás dispositivos de la célula de radio. De
este modo, un cliente puede constatar la calidad de la radioconexión con el punto de acceso
aunque sin comunicarse directamente con él. Si durante un tiempo determinado el cliente no
recibe ningún telegrama del punto de acceso, comienza a buscar un punto nuevo.
En el modo iPCF se han optimizado los tiempos tanto para la búsqueda de un nuevo punto de
acceso como para el inicio de sesión en el mismo. Se consiguen tiempos de handover
claramente inferiores a 50 ms.
Para lograr una comunicación PROFINET estable es necesario que un cliente WLAN se
encuentre en todo momento en una célula de radio con una intensidad de señal > 60 % o > –
65 dBm. Esto se puede comprobar conectando y desconectando las distintas células de radio.
Esto no significa que el cliente tenga que cambiar cuando la intensidad de la señal cae por
debajo del 60 % o de –65 dBm. Asegúrese de que estén disponibles puntos de acceso con la
suficiente intensidad de señal.
iPCF se configura en "iFeatures > iPCF > iPCF (Página 2785)".
iPCF-HT

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2581

Configuración de dispositivos y redes
1.4 Crear configuraciones
Cuando para iPCF se necesita una velocidad de transferencia mayor se utiliza iPCF-HT. De
este modo es posible, p. ej., la transmisión PROFINET y de datos de vídeo. Se consigue
agrupando paquetes de datos en un paquete de datos mayor mediante Frame Bursting (AMPDU), con lo que se transfieren con más efectividad. Se agrupan los paquetes de datos
individuales que están previstos para la misma estación de destino (cliente) y que tienen la
misma prioridad.
iPCF-HT se configura en "iFeatures > iPCF > iPCF-HT (Página 2787)".
iPCF-MC
Para estaciones móviles que se comunican sin necesidad de un cable RCoax o de antenas
direccionales se utiliza iPCF-MC. Con iPCF-MC, el cliente busca puntos de acceso potenciales
apropiados incluso aunque reciba consultas iPCF del punto de acceso y la conexión existente
con un punto de acceso funcione sin perturbaciones. De este modo, en caso necesario puede
tener lugar muy rápidamente el cambio a otro punto de acceso. A diferencia de iPCF, en el
caso de iPCF-MC los tiempos de handover son independientes del número de canales de
radiofrecuencia utilizados.
Es necesario utilizar un punto de acceso con dos interfaces inalámbricas, denominado punto
de acceso dual. Una de las interfaces opera como Management Channel y envía telegramas
cortos ("Beacon") con información administrativa (p. ej., configuración del canal de datos y de
SSID). La otra interfaz (Data Channel) transfiere exclusivamente los datos de usuario.
iPCF-MC se configura en "iFeatures > iPCF > iPCF-MC (Página 2790)".
La figura siguiente muestra un ejemplo de configuración para iPCF-MC

2582

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

352),VDIH










Restricciones
● iPCF / iPCF-HT e iPCF-MC son desarrollos propios de Siemens AG y operan solo en
combinación con estaciones en las que esté implementado iPCF / iPCFv2 / iPCF-MC.
● En el caso de un punto de acceso con varias interfaces WLAN es posible ajustar al mismo
tiempo tanto iPCF / iPCF-HT como WLAN estándar.
● Los puntos de acceso con una interfaz WLAN no pueden participar en el procedimiento
iPCF-MC. Pero iPCF sí es posible.
● iPCF-HT solo está disponible en la interfaz WLAN 1 y solo puede utilizarse en la banda de
5 GHz en modo WLAN "(Solo) IEEE 802.11n".

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2583

Configuración de dispositivos y redes
1.4 Crear configuraciones

Requisitos para iPCF-MC
iPCF-MC utiliza las dos interfaces de radio del punto de acceso de forma diferente: Una
interfaz trabaja como interfaz de gestión y emite un beacon cada cinco milisegundos. La otra
interfaz transmite los datos útiles.
Para poder utilizar iPCF-MC se tienen que cumplir las siguientes condiciones:
● Como puntos de acceso solo pueden utilizarse dispositivos SCALANCE W700 con dos
interfaces WLAN.
● La interfaz de datos (WLAN1) y la de gestión (WLAN2) han de funcionar en la misma banda
de frecuencia y tienen que coincidir en cuanto a la radiocobertura. iPCF-MC no funcionará
si las dos interfaces de radio están equipadas con antenas direccionales que cubran áreas
distintas.
● Las interfaces de gestión de todos los puntos de acceso entre los que deba cambiar un
cliente tienen que utilizar el mismo canal. Un cliente escanea sólo ese canal para encontrar
puntos de acceso accesibles.
● Para la interfaz de gestión no se puede utilizar el procedimiento de transmisión según IEEE
802.11h. Para la interfaz de datos es posible 802.11h (DFS).
● Un cliente debe soportar esta función en su interfaz WLAN.

iREF
Funcionamiento
Si un punto de acceso tiene varias antenas activadas, la potencia de emisión se distribuye en
partes iguales entre ellas. La potencia de emisión está sujeta a limitaciones legales específicas
de cada país. La potencia máxima admisible depende de la ganancia de las antenas
conectadas. Si las antenas conectadas tienen ganancias distintas, la ganancia de antena
máxima limita de forma determinante la potencia de emisión admisible.
iREF (industrial Range Extension Function) garantiza que el tráfico de datos desde el punto de
acceso a cada uno de los clientes se desarrolle por la antena más adecuada en cada caso. El
punto de acceso determina qué antena es la más adecuada a partir de los valores RSSI de los
paquetes recibidos.
Considerando la ganancia de antena y, dado el caso, las pérdidas de cable, los paquetes solo
se envían a aquellas antenas para las que cabe esperar la máxima potencia de señal por parte
del cliente.
Durante ese tiempo el resto de antenas permanece inactivo y la potencia de emisión permitida
legalmente está disponible para la antena seleccionada Las antenas inactivas no limitan la
potencia de emisión permitida.
De ese modo es posible enviar los datos con la mejor tasa de transmisión posible,
especialmente en aplicaciones en las que MIMO no puede utilizarse o no resulta ventajoso.
iREF se configura en "iFeatures > iREF (Página 2794)".

2584

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones

sin

iREF
Access Point

Access Point
ANT795-6DC

ANT795-6DC
Client

SCALANCE
W700

SCALANCE
W700

SCALANCE
W700

con iREF
Access Point

Access Point
ANT795-6DC

ANT795-6DC
Client

SCALANCE
W700
SCALANCE
W700

SCALANCE
W700

Requisitos
● Para utilizar iREF es necesario que el dispositivo SCALANCE W700 tenga como mínimo 2
antenas activadas.

Restricciones
● Solo se permite una tasa de datos de hasta 150 Mbps (MCS 0 - 7 o 1x Spatial Stream)
● iREF no puede utilizarse junto con otras iFeatures (p. ej. iPCF o iPCF-MC)

Ventajas
● La transmisión de datos dirigida y la desactivación dinámica de antenas que no emiten en
dirección del cliente en cuestión permiten reducir las interferencias.
● La intensidad de la señal se ve mejorada ya que la antena activa siempre pone a
disposición la potencia de emisión máxima disponible.

iPRP
El "Parallel Redundancy Protocol" (PRP) es un protocolo de redundancia para redes por cable.
Está definido en el apartado 3 del estándar IEC 62439.
"industrial Parallel Redundancy Protocol" (iPRP) permite usar la tecnología PRP en redes
inalámbricas. De este modo se mejora la disponibilidad de la comunicación inalámbrica.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2585

Configuración de dispositivos y redes
1.4 Crear configuraciones

Principio de funcionamiento
Una red PRP consta de dos redes completamente independientes. Si una red está averiada,
los frames son enviados sin interrupción/reconfiguración a través de la red redundante
paralela. Para ello, los frames Ethernet se duplican y se transfieren al receptor a través de las
dos redes. Los dispositivos compatibles con PRP tienen como mínimo dos interfaces Ethernet
aisladas entre sí y conectadas a redes mutuamente independientes.
Con dispositivos no compatibles con PRP se conecta antes una Redundancy Box (RedBox).
Esta permite acceder a las redes PRP para los Single Attached Nodes (SAN). La RedBox
duplica los frames Ethernet que se envían y agrega al frame un PRP-Trailer que contiene
además un número de secuencia. La RedBox envía simultáneamente sendas copias del frame
a la red PRP A y a la red PRP B. En el lado del destinatario la RedBox rechaza el frame
duplicado. Para ello la RedBox precisa determinados tiempos de transferencia, especificados
para redes Ethernet. Por este motivo, al utilizar PRP en redes WLAN se producen frames
duplicados y retardados.
Utilizando iPRP se solucionan estos problemas y se permite el empleo de PRP en WLAN con
dispositivos SCALANCE W700.

2586

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
6LQJOH$WWDFKHG1RGH
6$1

5HGXQGDQF\%R[
5HG%R[ 

353$

353%

9/$19/$1

9/$19/$1
9/$19/$1

$FFHVV3RLQW$3
:/$1
9$3!9/$1 353$
9$3!9/$1 353% 
39/$19/$1

$FFHVV3RLQW$3
:/$1
9$3!9/$1 353$
9$3!9/$1 353% 
39/$19/$1

9/$1

$FFHVV3RLQW$3
:/$1
9$3!9/$1 353$
9$3!9/$1 353% 
39/$19/$1
9/$1

&OLHQW%
:/$1!9/$1 353% 
39/$19/$1

&OLHQW$
:/$1!9/$1 353$
39/$19/$1
9/$1 353%

9/$1 353$

353$

353%

5HGXQGDQF\%R[
5HG%R[ 

,QGXVWULDO(WKHUQHW

6LQJOH$WWDFKHG1RGH
6$1

Los puntos de acceso (AP 1, AP 2 y AP 3) y la RedBox del lado AP están conectados entre sí
mediante un switch. Las redes PRP A y B están separadas entre sí mediante VLAN.
Si SAN1 envía un frame a SAN2, la RedBox del lado AP lo duplica, y los dos frames
redundantes son transferidos a los puntos de acceso a través del switch. Los frames PRP
redundantes se transfieren a la RedBox del lado del cliente a través de dos circuitos de
radiofrecuencia distintos. Los clientes también están conectados con su RedBox mediante un
switch. La RedBox retransmite a SAN2 el primer frame PRP entrante y rechaza el segundo.
Nota
En las interfaces de los switch con los dispositivos SCALANCE W700 solo está permitido
configurar las VLAN que también están configuradas en las interfaces VAP o WLAN de los
dispositivos SCALANCE W700.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2587

Configuración de dispositivos y redes
1.4 Crear configuraciones
En comunicación iPRP los interlocutores redundantes (aquí: AP1 y AP3 o cliente A y cliente B)
se comunican entre sí mediante un switch para impedir que los dos frames PRP redundantes
lleguen a la RedBox con una gran diferencia de tiempo.
Por ejemplo, si la comunicación entre AP1 y el cliente A es muy lenta, en el lado del destinatario
se rechaza el frame más lento.
iPRP se configura en "iFeatures > iPRP (Página 2793)".
Requisitos
● Está ajustado el modo Base Bridge "802.1Q VLAN Bridge".
● Están creadas las VLAN.
● Modo Access Point: La interfaz VAP está activada.
● Modo Cliente: En el modo MAC está ajustado "Túnel de Layer 2".
● Dependiendo de la configuración, los clientes pueden comunicar con cualquier punto de
acceso.

AeroScout
Tags AeroScout
Los dispositivos SCALANCE W700 soportan tags de la casa AeroScout. Los tags son
sensores RFID que funcionan a pilas y envían cíclicamente sus datos como frames Multicast.
Los tags AeroScout tienen, entre otras, las siguientes características:
● Temperatura ambiente
Si está aplicado un tag a un dispositivo SCALANCE W700 o a material, se puede controlar
si se respeta una temperatura ambiente especificada.
● Movimiento
Con esto, un tag puede dar también la información de si se encuentra en movimiento o en
reposo. Las áreas de flujo de material y técnica de manipulación ofrecen posibilidades de
aplicación para esta función.
● Pulsador
Con independencia de los frames enviados cíclicamente, un usuario puede enviar una
notificación pulsando un botón.
● Diodo luminoso
Informa sobre el estado de funcionamiento del tag.
Nota
Encontrará información más detallada en la documentación de la casa AeroScout
(www.aeroscout.com).

Funcionamiento
El tag envía sus datos como frames AeroScout. Los tags y los puntos de acceso se comunican
en la banda de 2,4 GHz.

2588

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
Cuando la interfaz WLAN del punto de acceso recibe el frame AeroScout, este se convierte en
un telegrama UDP. El dispositivo SCALANCE W700 reenvía el telegrama UDP a un PC junto
con la información acerca de la intensidad de señal (RSSI). El PC dispone del equipo
AeroScout que evalúa la información contenida.
Nota
No es recomendable utilizar la comunicación PROFINET y AeroScout conjuntamente en una
interfaz inalámbrica.

Precisión de localización
Para conseguir una precisión óptima a la hora de localizar tags AeroScout,
● recomendamos utilizar antenas con característica omnidireccional.
● la señal debería recibirse como mínimo en tres puntos de acceso.

SNMP
Introducción
El Simple Network Management Protocol (SNMP) permite vigilar y controlar componentes de
red, p. ej. routers o switches, desde una estación central. El SNMP regula la comunicación
entre los dispositivos vigilados y la estación de vigilancia.
Tareas de SNMP:
● Vigilancia de componentes de red
● Control remoto y parametrización remota de componentes de red
● Detección y notificación de errores
Las versiones v1 y v2 de SNMP no disponen de mecanismos de seguridad. Todos los usuarios
de la red pueden acceder a los datos con el software adecuado e incluso modificar
parametrizaciones.
Para controlar derechos de acceso de forma sencilla sin aspectos de seguridad se utilizan
Community Strings.
El Community String se transmite junto con la petición. Si el Community String es correcto, el
agente SNMP responde y envía los datos solicitados. Si el Community String no es correcto,
el agente SNMP rechaza la petición. Para los derechos de lectura y escritura se definen
diferentes Community Strings. Los Community Strings se transmiten en texto claro.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2589

Configuración de dispositivos y redes
1.4 Crear configuraciones
Valores estándar de los Community Strings:
● public
dispone solo de derechos de lectura
● private
dispone de derechos de lectura y escritura
Nota
Puesto que los SNMP Community Strings son una protección de acceso, no deben
utilizarse los valores estándar "public" ni "private". Modifique estos valores después de la
primera puesta en marcha.
Otros mecanismos de protección sencillos a nivel de dispositivo:
● Allowed Host
El sistema vigilado conoce las direcciones IP de los sistemas que vigilan.
● Read Only
Si se asigna "Read Only" a un dispositivo vigilado, las estaciones de vigilancia podrán leer
los datos, pero no modificarlos.
Los paquetes de datos SNMP no están codificados y es muy fácil leerlos.
La estación central también se denomina estación de gestión. Los dispositivos que deben
vigilarse tienen instalado un agente SNMP, con el que la estación de gestión intercambia datos.
La estación de gestión envía paquetes de datos del tipo siguiente:
● GET
Solicitar un juego de datos del agente SNMP
● GETNEXT
Llama el próximo juego de datos.
● GETBULK (disponible a partir de SNMPv2c)
Solicita varios juegos de datos al mismo tiempo, p. ej. varias filas de una tabla.
● SET
Contiene datos de parametrización para el dispositivo correspondiente.
El agente SNMP envía paquetes de datos del tipo siguiente:
● RESPONSE
El agente SNMP devuelve los datos solicitados por el administrador.
● TRAP
Cuando se produce un evento determinado, el agente SNMP envía traps por su cuenta.
SNMPv1/v2c/v3 utilizan UDP (User Datagram Protocol) y los puertos UDP 161 y 162. Los
datos se describen en una Management Information Base (MIB).

SNMPv3
En comparación con las versiones anteriores SNMPv1 y SNMPv2c, SNMPv3 incorpora un
amplio concepto de seguridad.

2590

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
SNMPv3 soporta:
● Autenticación de usuarios completamente codificada
● Codificación de todo el tráfico de datos
● Control de acceso de los objetos MIB a nivel de usuario/grupo
Con la introducción de SNMPv3 ya no es posible transferir sin más configuraciones de usuario
a otros dispositivos, p. ej. cargando un archivo de configuración o intercambiando el C-PLUG.
De acuerdo con la norma, el protocolo SNMPv3 utiliza una ID unívoca del equipo SNMP como
identificador interno de un agente SNMP. Esta ID debe ser inequívoca dentro de la red. Se
utiliza para autenticar y codificar los datos de acceso de usuarios SNMPv3.
En función de si la función "Migración de usuarios SNMPv3" está activada o desactivada, la ID
de equipo SNMP se genera de formas distintas.
Restricción en el uso de la función
La función "Migración de usuarios SNMPv3" solo debe utilizarse para transferir los usuarios
SNMPv3 configurados a un dispositivo de reemplazo en caso de repuesto.
No utilice esta función para transferir los usuarios SNMPv3 configurados a varios dispositivos.
Si se carga una configuración con usuarios SNMPv3 creados en varios dispositivos, estos
utilizarán la misma ID de equipo SNMP. En caso de que dichos dispositivos funcionen en la
misma red, su configuración contradecirá la norma SNMP.
Compatibilidad con productos antecesores
Los usuarios SNMPv3 solo pueden transferirse a otro dispositivo si se han creado como
usuarios migrables. Para crear un usuario migrable, la función "Migración de usuarios
SNMPv3" debe estar activada en el momento de crear el usuario.

Spanning Tree
Evitación de formación de bucles
El procedimiento Spanning Tree detecta estructuras de red físicamente redundantes e impide
la formación de bucles por desconexión de vías redundantes. Para esto evalúa la distancia, la
capacidad de una conexión o las especificaciones del usuario. El tráfico de datos se desarrolla
entonces exclusivamente por las vías de conexión restantes.
Si falla la vía de transmisión de datos preferida, el algoritmo de Spanning Tree busca la vía más
eficiente que se puede establecer con los elementos restantes de la red.

Root Bridge y Bridge Priority
La conexión más eficiente siempre se determina en relación con el denominado "Root Bridge":
un componente de la red que se considera el elemento raíz de una estructura de red en forma
de árbol. Con el parámetro "Bridge Priority" se puede influir en la elección del Root Bridge. El
ordenador con el valor más bajo para este parámetro se convierte forzosamente en RootBridge. Si dos ordenadores tienen el mismo valor de prioridad, pasa a ser Root-Bridge el
ordenador con la dirección MAC más baja.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2591

Configuración de dispositivos y redes
1.4 Crear configuraciones

Comportamiento en caso de cambios de la topología de la red
Si se incorporan estaciones a una red o se retiran de ella, esto puede tener repercusiones en
la elección de la vía óptima para los paquetes de datos. Para tener en cuenta estos cambios,
el Root Bridge envía mensajes de configuración (BPDUs) a intervalos regulares. El tiempo que
transcurre entre dos mensajes de configuración se puede ajustar con el parámetro "Hello
Time".

Actualidad de la información de configuración
Con el parámetro "Max Age" se define la antigüedad máxima de las informaciones relativas a
configuración. Si un Bridge recibe información de configuración más antigua de lo que se ha
definido con Max Age, rechaza este mensaje e impulsa un nuevo cálculo de las vías.
Sin embargo, un Bridge no utiliza información de configuración nueva inmediatamente, sino
sólo después del tiempo fijado en el parámetro "Forward Delay". Así se garantiza que el
funcionamiento con la nueva topología no se inicie hasta que todos los Bridges tengan las
informaciones necesarias.

RSTP, MSTP, CIST
Rapid Spanning Tree Protocol (RSTP)
Una desventaja del STP es que la red debe reconfigurarse si sufre alguna perturbación o falla
un dispositivo: Los dispositivos comienzan a negociar nuevas rutas cuando se produce la
interrupción. Esta operación dura hasta 30 segundos. Por esta razón se ha ampliado el STP
para desarrollar el "Rapid Spanning Tree Protocol" (RSTP, IEEE 802.1w). Este se diferencia
fundamentalmente del STP en que los dispositivos ya recopilan información sobre rutas
alternativas cuando el funcionamiento es correcto, de modo que no deben esperar a que se
produzca un fallo para adquirir estos datos. El tiempo de reconfiguración de una red controlada
con RSTP se reduce así a unos pocos segundos.
Esto se logra con las siguientes funciones:
● Edge Ports (puerto de dispositivo terminal)
Los Edge Ports son puertos que están conectados a un terminal.
Un puerto que está definido como Edge Port se activa directamente después del
establecimiento de una llamada. Si en un Edge Port se recibe una Spanning Tree BPDU,
el puerto pierde su papel de Edge Port y participa de nuevo en (R)STP. Si no se recibe
ningún telegrama BPDU más una vez transcurrido un período de tiempo (3 veces el Hello
Time), el puerto pasa de nuevo al estado de Edge Port.
● Punto a punto (comunicación directa entre dos dispositivos vecinos)
Por acoplamiento directo de los dispositivos se puede realizar una modificación del estado
(reconfiguración del puerto) sin retardo.
● Puerto alternativo (en sustitución del Root Port)
Se ha configurado un sustituto para el Root Port. En caso de pérdida de conexión con el
Root Bridge, el dispositivo puede establecer así sin retardo, por reconfiguración, una
conexión a través del puerto alternativo.

2592

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

Configuración de dispositivos y redes
1.4 Crear configuraciones
● Reacción a eventos
Rapid Spanning Tree reacciona sin retardo a eventos, por ejemplo, a una interrupción de
la conexión. Por lo tanto no es necesario esperar las señales de relojes, como en el caso
de Spanning Tree.
● Número máximo de saltos de puente
Número máximo de saltos de puente que un paquete puede efectuar antes de invalidarse
automáticamente.
Así, con Rapid Spanning Tree básicamente se preconfiguran alternativas para muchos
parámetros o bien se consideran determinadas propiedades de la topología de red para
acortar el tiempo de reconfiguración.

Multiple Spanning Tree Protocol (MSTP)
El Multiple Spanning Tree Protocol (MSTP) es una evolución del Rapid Spanning Tree
Protocol. Entre otras cosas, ofrece la posibilidad de utilizar varias instancias RSTP dentro de
diferentes VLAN o grupos de VLAN, lo cual permite, p. ej., disponer dentro de determinadas
VLAN de rutas que el Rapid Spanning Tree Protocol sencillo bloquearía globalmente para el
tráfico de datos.

Common and Internal Spanning Tree (CIST)
CIST designa la instancia utilizada internamente por el switch, que se asemeja en principio a
una instancia RSTP interna.

Configurar dispositivo SCALANCE como dispositivo IO
En el caso de un dispositivo SCALANCE configurado como dispositivo PROFINET IO y
asignado a un controlador IO, al ejecutar las funciones "Compilar" y "Cargar en dispositivo"
solo se cargan en el dispositivo SCALANCE los datos que también pueden configurarse en
Web Based Management (WBM) (System, Layer 2, Layer 3, Security).
Si desea ejecutar las funciones "Compilar" o "Cargar en dispositivo" para los datos de
dispositivo PROFINET IO del dispositivo, seleccione antes el controlador IO asignado.

Asignación de direcciones IP
Posibilidades de configuración
En el estado de suministro y tras restablecer la configuración de fábrica, el dispositivo no
dispone de dirección IP.

Edición de dispositivos y redes
Manual de programación y manejo, 11/2019

2593

Configuración de dispositivos y redes
1.4 Crear configuraciones
Existen las siguientes posibilidades para asignar una dirección IP al dispositivo:
● DHCP (ajuste estándar)
● Primary Setup Tool
Consulte el manual de configuración "Primary Setup Tool" para más información.
Encontrará el manual de configuración en Siemens Industry Automation and Drives Service
& Support en Internet, en la ID de artículo 19440762 (http://
support.automation.siemens.com/WW/view/es/19440762).
● STEP 7
 