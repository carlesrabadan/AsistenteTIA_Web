Borrar página de detalles".
La página de detalles se borrará.

Ordenar páginas de detalles
1. Abra el menú contextual de la página de detalles que quiere desplazar.
2. Seleccione el comando "Páginas > Avanzar página una posición" o "Páginas > Retroceder
página una posición".
Dependiendo del comando elegido, la página de detalles se desplaza hacia arriba o hacia
abajo.

Mostrar y ocultar secciones
1. Si desea mostrar u ocultar una sección determinada, haga clic en el signo más o menos del
área de trabajo en el encabezado de la sección.
2. Si desea mostrar u ocultar todas las secciones de un informe, elija el comando "Mostrar
todas las páginas" u "Ocultar todas las páginas" en el menú contextual de una sección
cualquiera.

Consulte también
Estructura de los informes (Página 1271)
Estructura de los informes (Página 1274)
Principios básicos de la elaboración de informes (Página 1280)
Principios básicos sobre la elaboración de informes (Página 1277)

7.2.2

Imprimir informes

7.2.2.1

Impresión de informes en Runtime Advanced

Impresión de informes en Runtime Advanced
Introducción
En Runtime Advanced y Panels, los informes se imprimen controlados por tiempo o por evento.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1297

Trabajar con informes
7.2 Trabajar con informes

Pasos de configuración
Configurar la impresión controlada por evento:
● Se configura la función de sistema "ImprimirInforme" en un botón o una variable asociada
a un evento.
Configurar la impresión controlada por evento:
● Se crea una tarea del tipo "Trabajo de impresión" en el planificador de tareas y se asigna
el informe deseado al trabajo.
En las propiedades de la tarea se define cuándo y con qué frecuencia se imprimirá el
informe.

Impresión en runtime
El informe se imprime en la impresora que está configurada como impresora estándar en el
Control Panel del panel de operador.
En "Lista de impresoras" podrá comprobar cuántas impresoras estándar están habilitadas
para un panel de operador. Para más información sobre la "Lista de impresoras", consulte la
página de Internet de Siemens Customer Support y la ID de artículo "11376409".

Consulte también
Configurar el registro de avisos (Página 908)
Sinopsis de la impresión de informes (Página 1298)

7.2.2.2

Impresión de informes en Runtime Professional

Sinopsis de la impresión de informes
Introducción
En runtime, los informes se imprimen controlados por tiempo o por evento.
Además es posible visualizar en forma de lista los trabajos de impresión pendientes en
runtime. Con esta lista de trabajos de impresión el usuario puede decidir por sí mismo qué
informes deben imprimirse.

Impresión controlada por eventos
El informe se imprime al producirse un evento.
Ejemplos:
● El valor de una variable cambia o rebasa un valor límite.
● Un aviso aparece, desaparece o se acusa
● Una acción de operador, p. ej. hacer clic en un botón

1298

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes

Impresión controlada por tiempo
El informe se imprime automáticamente.
Ejemplos:
● Una sola vez en una fecha definida, p .ej. el 31 de diciembre de 2010 a las 6:30 a.m.
● En intervalos, p. ej. diariamente a las 8 de la mañana o los lunes a las 6 de la tarde

Pasos de configuración
Dependiendo de para qué runtime se configure la impresión de un informe controlada por
tiempo o por eventos, el procedimiento es distinto.
Para visualizar la lista de trabajos de impresión en runtime, configure el control "Ventana de
aplicación" en las imágenes. Dependiendo de la configuración, la ventana de aplicación
muestra, p. ej., sólo los trabajos de impresión seleccionados.

Consulte también
Crear trabajo de impresión (Página 1301)
Configurar el inicio automático de un trabajo de impresión en el planificador de tareas
(Página 1305)
Impresión de informes en Runtime Advanced (Página 1297)
Planificar tareas (Página 1842)
Informes de sistema y trabajos de impresión del sistema (Página 1306)
Impresión de informes en Runtime Professional (Página 1298)

Principios básicos de la impresión de informes
Introducción
En Runtime Professional, los informes se imprimen controlados por tiempo o por evento.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1299

Trabajar con informes
7.2 Trabajar con informes

Pasos de configuración
● Se crea un trabajo de impresión en Informes y se le asigna el informe deseado.
En las propiedades del trabajo de impresión, se definen el número de páginas, el rango de
tiempo y el formato de impresión (impresora o archivo) del informe.
● Para configurar una impresión controlada por tiempo, se crea una tarea del tipo "Trabajo de
impresión" en el planificador de tareas y se le asigna el trabajo de impresión deseado.
En las propiedades de la tarea se define cuándo o con qué frecuencia se imprimirá el
informe.
● Para configurar una impresión controlada por evento, se configura un C Script que llama p.
ej. la función "ReportJob" en el objeto deseado asociado a un evento.
– ReportJob("<Nombre del trabajo de impresión>","PRINTJOB"); para
ejecutar el trabajo de impresión
– ReportJob("<Nombre del trabajo de impresión>","PREVIEW"); para
obtener una vista preliminar
Nota
Objetos de imagen con impresión de informes preconfigurada
En algunos objetos de imagen se incluye de forma estándar la impresión de informes a través
de un botón (símbolo de impresora), p. ej. en el visor de avisos. Si es necesario, se pueden
modificar los informes de sistema predefinidos o utilizar un informe personalizado.

Impresión en runtime
En función de la configuración, el informe se imprime de la manera siguiente:
● En la impresora que está configurada como impresora estándar en el Control Panel del
panel de operador.
En "Lista de impresoras" podrá comprobar cuántas impresoras estándar están habilitadas
para un panel de operador. Para más información sobre la "Lista de impresoras", consulte
la página de Internet de Siemens Service & Support y la ID de artículo "11376409".
● En una impresora de red que esté disponible para el panel de operador.
● En un archivo de formato EMF.

Imprimir informes
La impresión de informes se realiza en el modo gráfico. Dadas las cantidades de datos a
procesar no se recomienda el uso de una impresora serie.

1300

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes
Para que el informe se imprima correctamente, la impresora conectada debe soportar el
formato de papel y el formato del informe.
Nota
El valor de una variable en el informe se lee y se emite justo antes del momento de la impresión.
Si el informe comprende varias páginas, puede transcurrir bastante tiempo entre la impresión
de la primera y la última página. Por ello, es posible que la misma variable tenga un valor
distinto en la última página que en la primera.

Consulte también
Informes (Página 1269)
Crear trabajo de impresión (Página 1301)
Configurar el inicio automático de un trabajo de impresión en el planificador de tareas
(Página 1305)
Informes de sistema y trabajos de impresión del sistema (Página 1306)

Crear trabajo de impresión
Introducción
En el trabajo de impresión se define lo siguiente:
● Alcance del trabajo de impresión: todas las páginas o sólo páginas determinadas
● Período de tiempo cuyas entradas de informe se imprimen
● impresora en la que se imprime el informe
● archivo en el que se guarda el informe

Requisitos
El editor "Trabajos de impresión" está abierto.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1301

Trabajar con informes
7.2 Trabajar con informes

Procedimiento
Para crear un trabajo de impresión nuevo, proceda del siguiente modo:
1. Haga doble clic en la celda "<Agregar>" de la columna "Nombre".
Se inserta un trabajo de impresión nuevo.

2. Introduzca un "Nombre" para el trabajo de impresión en la ventana de inspección en
"Propiedades > Propiedades > General" y seleccione el "Informe" deseado.
3. Seleccione en "Tipo de cuadro de diálogo", si el operador puede modificar la configuración
antes de imprimir el informe.

4. Defina en "Propiedades > Propiedades > Rango de páginas", si el trabajo de impresión
imprimirá todas las páginas o sólo páginas determinadas.

1302

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes
5. Defina en "Propiedades > Propiedades > Rango de tiempo" el período para el que se
imprimen las entradas de informe.

6. Si se debe imprimir el informe, active la opción "Impresora" en "Propiedades > Propiedades
> Salida > Impresión".
El informe se imprime en la impresora estándar del panel de operador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1303

Trabajar con informes
7.2 Trabajar con informes
7. Seleccione un máximo de tres impresoras si el informe debe imprimirse en otra impresora.

8. Si el informe debe imprimirse en un archivo, active "Propiedades > Propiedades > Archivo
de destino > Impresión en archivo > Imprimir en archivo (*.emf)".
A partir de la entrada de "Prefijo de directorio de destino" y del sello de tiempo de la
impresión se crea un nombre de carpeta. Los informes se guardan en el directorio del
proyecto de runtime en "PRT_OUT" en una carpeta con ese nombre.

Resultado
Se ha creado el trabajo de impresión del informe.
● Para una impresión en runtime controlada por tiempo, cree una tarea del tipo "Trabajo de
impresión" en el planificador de tareas. Asigne a esta tarea el trabajo de impresión deseado.
● Para una impresión controlada por evento, se configura un C Script que llama la función
"PrintJob" en el objeto (p. ej. un botón o una variable) asociado a un evento deseado.

1304

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes

Consulte también
Principios básicos de la impresión de informes (Página 1299)
Configurar el inicio automático de un trabajo de impresión en el planificador de tareas
(Página 1305)

Configurar el inicio automático de un trabajo de impresión en el planificador de tareas
Introducción
Una tarea del tipo "Trabajo de impresión" define cuándo o con qué frecuencia se imprime un
informe automáticamente (impresión controlada por tiempo).

Requisitos
● Se ha creado un trabajo de impresión.

Procedimiento
Para crear una tarea para el inicio automático de un trabajo de impresión, proceda del siguiente
modo:
1. Active en la "Configuración de runtime" del panel de operador "Servicios > Secuencia de
inicio de WinCC Runtime > Trabajos de impresión previstos en runtime".
2. Cree una tarea nueva en el planificador de tareas.
3. Introduzca un "Nombre" para la tarea en "Propiedades > Propiedades > General".
4. En el campo "Tipo", elija la configuración "Trabajo de impresión".
5. Seleccione el "Trabajo de impresión" deseado.
6. Defina en "Punto de inicio", cuándo o con qué frecuencia se imprimirá el informe, p. ej.
diariamente a las 5 de la tarde:

Resultado
Se ha creado la tarea para la impresión del informe controlada por tiempo.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1305

Trabajar con informes
7.2 Trabajar con informes

Consulte también
Principios básicos de la impresión de informes (Página 1299)
Crear trabajo de impresión (Página 1301)
Imprimir un informe (Página 1325)

7.2.2.3

Informes de sistema y trabajos de impresión del sistema

Principios básicos de los informes de sistema y trabajos de impresión del sistema
Informes de sistema y trabajos de impresión del sistema para la función de impresión de objetos de
imagen
En algunos objetos de imagen se incluye de forma estándar la impresión de informes a través
de un botón (símbolo de impresora), p. ej. en el visor de avisos.
El botón "Imprimir" del objeto de imagen está conectado con un trabajo de impresión del
sistema preconfigurado. A su vez, el trabajo de impresión del sistema imprime un informe de
sistema preconfigurado.
Los informes de sistema muestran una "Instantánea" o "Todos los datos" del objeto de imagen.
● Instantánea: el informe presenta los datos que se muestran actualmente en el objeto de
imagen.
● Todos los datos: el informe presenta todos los datos que se encuentran actualmente en el
objeto de imagen.
La siguiente tabla muestra qué informes de sistema y qué trabajos de impresión del sistema
están preconfigurados para los objetos de imagen.
Objeto de imagen

Estándar Alcance de la im‐
presión

Trabajo de impresión del
sistema

Informes de sistema

Visor de curvas f(t)

X

Instantánea

Function Trend Control Picture

@Function Trend Control - Picture

Visor de curvas f(x)

X

Instantánea

Online Trend Control - Pic‐
ture

@Online Trend Control - Picture

Instantánea

Online Table Control – Pic‐
ture

@Online Table Control – Picture

Todos los datos

Online Table Control - Table @Online Table Control - Table

Instantánea

Alarm Control – Picture

@Alarm Control – Picture

Todos los datos

Alarm Control - Table

@Alarm Control - Table

Instantánea

Recipe Control - Picture

@Recipe Control - Picture

Todos los datos

Recipe Control - Table

@Recipe Control - Table

Instantánea

Ruler Control - Picture

@Ruler Control - Picture

Todos los datos

Ruler Control - Table

@Ruler Control - Table

Visor de tablas
X
Visor de avisos
X
Visor de recetas
X
Tabla de valores
X

Por lo general, la impresión del informe no tiene que configurarse. Si es necesario adapte el
trabajo de impresión del sistema o el informe de sistema a sus necesidades. Como alternativa,

1306

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes
asigne a un objeto de imagen otro trabajo de impresión del sistema preconfigurado o un trabajo
de impresión que haya creado p ara la impresión de un informe personalizado.

Informes de sistema y trabajo de impresión del sistema para el informe secuencial de avisos
La impresión del informe secuencial de avisos está configurada en un trabajo de impresión del
sistema. Si se ha activado "Propiedades > Propiedades > General > Utilizar informe de líneas",
WinCC utiliza el informe secuencial de avisos con el diseño de fila. Si no se ha activado esta
opción, WinCC utiliza el informe secuencial de avisos con el diseño de página.
Diseño

Trabajo de impresión del sistema

Informe de sistema

Diseño de página

Alarm sequence report

@AlarmSequenceReportForPagePrin‐
ter

Diseño de fila

Alarm sequence report

@AlarmSequenceReportForLinePrinter

Consulte también
Registro continuo de avisos (Página 1290)
Principios básicos de la impresión de informes (Página 1299)

Modificar informes de sistema y trabajos de impresión del sistema
Mostrar informes de sistema y trabajos de impresión del sistema en el árbol del proyecto
Los informes de sistema y los trabajos de impresión del sistema se guardan en la plantilla del
proyecto y no se muestran automáticamente en el árbol del proyecto. Si quiere modificar un
informe de sistema o un trabajo de impresión del sistema, muéstrelos en el árbol del proyecto.
Proceda del siguiente modo:
● En el árbol del proyecto, elija el comando "Agregar informes de sistema" del menú
contextual de la carpeta "Informes".
El árbol del proyecto muestra los informes de sistema en "Informes".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1307

Trabajar con informes
7.2 Trabajar con informes
La lista de los "Trabajos de impresión" se han ampliado con los trabajos de impresión del
sistema.

Modificar trabajos de impresión del sistema e informes de sistema
Los trabajos de impresión del sistema y los informes de sistema se modifican como trabajos de
impresión e informes "normales" - con las siguientes limitaciones:
● En los trabajos de impresión del sistema no pueden modificarse ni el nombre ni la
asignación estándar del informe.
● No es posible agregar páginas detalladas a los informes de sistema.

Vigencia de las modificaciones
Las modificaciones de los informes y trabajos de impresión del sistema repercuten dentro del
proyecto en todos los objetos a los que están asignados el informe de sistema o el trabajo de
impresión del sistema.
Nota
Rechazar modificaciones
Para restablecer el estado preconfigurado de WinCC, p. ej. en caso de haber borrado por error
el control para la impresión de los datos en el informe, borre primero el informe de sistema o
el trabajo de impresión del sistema y elija en el árbol del proyecto el comando "Agregar
informes de sistema" del menú contextual de la carpeta "Informes".

Borrar informes de sistema y trabajos de impresión del sistema que ya no se necesiten
Para visualizar únicamente los informes y trabajos de impresión utilizados en el proyecto (p. ej.
tras la migración), es posible borrar los informes de sistema y los trabajos de impresión del
sistema a través del menú contextual.
Si el informe borrado o bien el trabajo de impresión borrado se utiliza en el proyecto, se
utilizarán en su lugar el informe de sistema y el trabajo de impresión del sistema
preconfigurados por WinCC.

1308

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes
Para volver a visualizar todos los informes de sistema y trabajos de impresión del sistema, elija
en el árbol del proyecto el comando "Agregar informes de sistema" del menú contextual de la
carpeta "Informes":
● Vuelven a aparecer los informes de sistema y trabajos de impresión del sistema que fueron
borrados. Se restablece el estado preconfigurado por WinCC. No se reconstruye el estado
que había en el momento de borrar.
● No se modifican los demás informes de sistema y trabajos de impresión del sistema.

Consulte también
Principios básicos de los informes de sistema y trabajos de impresión del sistema
(Página 1306)

Diseñar individualmente la impresión de informes de un objeto de imagen
Introducción
Si no quiere utilizar el trabajo de impresión del sistema enlazado de forma estándar (incl.
informe de sistema) para la impresión de informes de un objeto de imagen, asigne al objeto de
imagen otro trabajo de impresión del sistema o un informe diseñado individualmente.

Utilizar otro trabajo de impresión del sistema
Para asignar al objeto de imagen otro trabajo de impresión del sistema, proceda del siguiente
modo:
1. Seleccione el objeto de imagen.
2. Seleccione el trabajo de impresión del sistema deseado en "Propiedades > Propiedades >
General > Imprimir".

Utilizar un informe personalizado
Para utilizar un informe personalizado, proceda del siguiente modo:
1. Cree el informe.
2. Defina el contenido de la página de detalles.
– Para imprimir una instantánea de los datos mostrados actualmente en el objeto de
imagen, inserte el objeto de informe "Control Copia impresa".
– Para imprimir en forma de tabla todos los datos del informe que se muestran
actualmente en el objeto de imagen, inserte el objeto de informe "Control Datos".
– Para imprimir también el origen de los datos en el informe, p. ej. título de la ventana,
nombre del objeto o nombre de la imagen, inserte el objeto de informe "Control Screen".
3. Cree un trabajo de impresión y asígnele el informe.
4. Seleccione el objeto de imagen y elija el trabajo de impresión en "Propiedades >
Propiedades > General > Imprimir".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1309

Trabajar con informes
7.2 Trabajar con informes

7.2.3

Trabajar con objetos

7.2.3.1

Insertar un objeto

Introducción
En el editor "Imágenes" o "Informes" puede agregar los objetos de la de la Task Card
"Herramientas". Utilizando el ratón, arrastre los objetos hasta el área de trabajo. Los objetos se
pueden insertar en su tamaño estándar, o bien determinar su tamaño al insertarlos.
Además, puede copiar o mover objetos de un editor a otro mediante el portapapeles, p. ej. para
incluir un objeto de imagen en un informe. Para copiar y desplazar también puede utilizar el
ratón en lugar del portapapeles:
● Copiar: <Ctrl+ arrastrar&soltar>
● Desplazar: Drag&Drop
Nota
Basic Panels
El editor "Informes" no está disponible para Basic Panels.

Requisitos
La Task Card "Herramientas" está abierta.

Insertar un objeto de tamaño estándar
1. En la Task Card "Herramientas", seleccione el objeto en cuestión, o bien el gráfico deseado
en la carpeta de gráficos de WinCC.
Al desplazar el puntero del ratón por el área de trabajo adopta la forma de una cruz y se
visualiza junto con el icono del objeto.
2. Haga clic en la posición del área de trabajo en la que desea insertar el objeto o el gráfico.
El objeto se inserta en su tamaño estándar en la posición deseada del área de trabajo.
También puede hacer doble clic sobre un objeto en la Task Card "Herramientas".

Copiar un objeto
1. Seleccione el objeto deseado.
2. En el menú contextual, elija "Copiar".
3. Haga clic en el lugar deseado y seleccione en el menú contextual "Pegar".
WinCC pega una copia del objeto en el lugar deseado. Sólo pueden modificarse las
propiedades adecuadas en el contexto correspondiente.
Ejemplo: En el editor "Imágenes" se define el modo de entrada y salida para los campos E/S.
En el editor "Informes" se define el modo como "Salida".

1310

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes
El original y la copia no están vinculados entre sí, y se configuran independientemente uno del
otro.

Insertar líneas
1. Seleccione el objeto deseado en la Task Card "Herramientas".
2. Haga clic en un lugar del área de trabajo. Se inserta una línea en tamaño estándar.

Insertar un polígono o una polilínea
1. Seleccione el objeto deseado "Polilínea" o "Polígono" en la Task Card "Herramientas".
2. Haga clic en un lugar del área de trabajo. El punto inicial del objeto queda definido.
3. Haga clic en otro lugar del área de trabajo. Queda definido un vértice.
4. Para cada uno de los demás vértices haga clic en el lugar correspondiente del área de
trabajo.
5. Haga doble clic en un lugar del área de trabajo. Queda definido el último vértice.
Ahora todos los puntos del polígono o de la polilínea quedan definidos.
Nota
Basic Panels
Los objetos "Polilínea" y "Polígono" no están disponibles para Basic Panels.

Nota
Si desea insertar uno tras otro varios objetos de un mismo tipo, utilice la función "Sello". Así
evitará tener que seleccionar el objeto en la Task Card "Herramientas" cada vez que desee
insertarlo. Para ello, seleccione el botón
de la barra de herramientas de la Task Card
"Herramientas".

7.2.3.2

Borrar un objeto

Introducción
Los objetos se borran individualmente o bien mediante selección múltiple.

Requisitos
El área de trabajo está abierta con un objeto como mínimo.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1311

Trabajar con informes
7.2 Trabajar con informes

Procedimiento
1. Seleccione el objeto que desea borrar.
Para borrar varios objetos, mantenga pulsada la tecla <Mayús> y seleccione
sucesivamente los objetos que desea borrar. También puede crear con el ratón un área en
torno a los objetos deseados.
2. En el menú contextual, elija el comando "Borrar".

Resultado
Los objetos seleccionados se borran.

7.2.3.3

Insertar varios objetos del mismo tipo

Introducción
WinCC ofrece la posibilidad de "insertar consecutivamente" varios objetos del mismo tipo
directamente uno tras otro, es decir, insertar sin seleccionar de nuevo cada vez el objeto.
Además, existe la posibilidad de reproducir las veces que se quiera un objeto ya insertado.

Requisitos
La Task Card "Herramientas" está abierta.

Insertar varios objetos del mismo tipo
1. Seleccione el objeto que desea insertar en la Task Card "Herramientas".
2. Haga clic en el botón
de la barra de herramientas de la Task Card "Herramientas".
Se activará la función "Sello".
3. Si desea insertar un objeto en su tamaño estándar, haga clic en la posición deseada en el
área de trabajo.
Si desea insertar un objeto en otro tamaño, sitúe el puntero del ratón en la posición deseada
en el área de trabajo. Manteniendo pulsado el botón izquierdo del ratón, arrastre el objeto
hasta que alcance el tamaño deseado.
En cuanto suelte el botón del ratón, el objeto quedará insertado en el área de trabajo.
4. Repita el paso 3 para insertar más objetos del mismo tipo.
5. Vuelva a hacer clic en el botón
.
Se desactivará la función "Sello".
Nota
Los objetos existentes se copian utilizando el método de arrastrar y soltar, manteniendo
pulsada la tecla <Ctrl>. El objeto existente no se desplazará. En cambio, se insertará una
copia del mismo en la nueva posición.

1312

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes

Insertar y reproducir un objeto
1. Inserte el objeto deseado de la Task Card "Herramientas".
2. Pulse la tecla <Ctrl> y sitúe el puntero del ratón en uno de los controladores de tamaño que
muestra la figura siguiente.

0XOWLSOLFDFLµQ
HQVHQWLGR
KRUL]RQWDO

0XOWLSOLFDFLµQ
HQVHQWLGR
YHUWLFDO

0XOWLSOLFDFLµQ
HQVHQWLGR
YHUWLFDO\KRUL
]RQWDO

3. Arrastre el rectángulo con los controladores de tamaño hacia la derecha y/o hacia abajo
manteniendo pulsado el botón izquierdo del ratón.
4. Cuanto más desplace el puntero del ratón, más aumentará el objeto hasta rellenar el
espacio disponible.

Resultado
Ha insertado un objeto en una imagen y lo ha multiplicado.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1313

Trabajar con informes
7.2 Trabajar con informes

7.2.3.4

Posicionar un objeto

Introducción
Cuando se selecciona un objeto, éste queda rodeado por un rectángulo con controladores de
tamaño. Este rectángulo es el rectángulo que rodea al objeto. La posición de un objeto se
define mediante las coordenadas de la esquina superior izquierda del rectángulo que rodea al
objeto.

Nota
Si la posición está fuera del área de trabajo, el objeto no se representará en runtime.

Posicionar y alinear
Puede mostrar una cuadrícula en el área de trabajo. Para posicionar objetos más fácilmente,
tiene a su disposición tres opciones:
● "Alinear a la cuadrícula": Cuando mueva objetos, éstos se alinearán a la cuadrícula e
insertarán automáticamente. Si, al mismo tiempo, mantiene pulsada la tecla <Alt>, el objeto
no se alineará a la cuadrícula.
● "Alinear a otros objetos": Cuando mueva objetos, se mostrarán líneas de ayuda. Al
posicionar, puede orientarse con otros objetos.
● "Ninguno": se puede posicionar los objetos en cualquier posición.
La cuadrícula y las opciones se activan y desactivan tal y como sigue:
● En el menú "Herramientas > Configuración > Visualización > Imágenes"
● En la Task Card "Diseño > Cuadrícula"

Requisitos
El área de trabajo está abierta con un objeto como mínimo.

Procedimiento
1. Seleccione el objeto que desea desplazar.
El objeto seleccionado quedará rodeado por un rectángulo con controladores de tamaño.

2. Haga clic en el objeto y mantenga presionado el botón izquierdo del ratón.

1314

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes
3. Desplace el puntero del ratón hasta la nueva posición.
El contorno del objeto se desplazará con el ratón y mostrará la nueva posición del objeto.

Inicialmente, el objeto permanecerá en su posición original.
4. Suelte el botón del ratón.
El objeto se desplazará hasta la posición donde se había visualizado el contorno del objeto.

Procedimiento alternativo
1. Seleccione en la ventana de inspección "Propiedades > Propiedades > Representación".
2. En "Posición y tamaño" indique los valores X e Y de la posición.

Resultado
El objeto aparecerá en la nueva posición.

7.2.3.5

Desplazar un objeto hacia adelante o hacia atrás (Basic, Advanced, Professional)

Introducción
Con la función "Orden" del menú contextual de un objeto seleccionado o de la barra de
herramientas se desplaza el objeto delante o detrás de otros objetos dentro de un nivel.
Nota
Los controles ActiveX se encuentran siempre delante de los demás objetos de un nivel
(propiedad .NET).

Requisitos
Está abierta una imagen con varios objetos en un mismo nivel.

Procedimiento
1. Seleccione el objeto que desea desplazar hacia delante o hacia atrás.
2. Elija el comando "Orden" en el menú contextual y uno de los comandos siguientes:
Símbolo

Descripción
Desplaza el objeto seleccionado delante de todos los demás objetos de ese mismo nivel
Desplaza el objeto seleccionado detrás de todos los demás objetos de ese mismo nivel

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1315

Trabajar con informes
7.2 Trabajar con informes
Símbolo

Descripción
Desplaza el objeto seleccionado una posición hacia delante
Desplaza el objeto seleccionado una posición hacia atrás

Procedimiento alternativo
1. Abra la paleta "Niveles" de la Task Card "Diseño".
2. Navegue hasta el objeto deseado.
3. Arrastre el objeto por el árbol hasta la posición deseada dentro del nivel manteniendo
pulsado el botón del ratón.
4. Suelte el botón del ratón.

Resultado
El objeto se desplazará hacia adelante o hacia atrás.

7.2.3.6

Modificar el tamaño de un objeto

Introducción
Cuando se selecciona un objeto, éste queda rodeado por un rectángulo con controladores de
tamaño. Existen las siguientes posibilidades para modificar el tamaño de un objeto:
● Arrastrar los controladores de tamaño utilizando el ratón
● Modificar la propiedad "Tamaño" en la ventana de inspección

Requisitos
El área de trabajo está abierta con un objeto como mínimo.

1316

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes

Procedimiento
1. Seleccione el objeto cuyo tamaño desea modificar.
Aparecerá el rectángulo que rodea al objeto. La figura siguiente muestra un objeto
seleccionado.

2. Arrastre el controlador de tamaño del rectángulo hasta una nueva posición.
Se modificará el tamaño del objeto.
– Si se ha activado la función "Alinear a la cuadrícula", el tamaño del objeto se modificará
según los puntos de la cuadrícula.
– Si mantiene pulsada la tecla <Alt> mientras arrastra el controlador, esta función no se
aplicará.
Para escalar el objeto de forma proporcional, mantenga pulsada la tecla <Mayús>
mientras modifica el tamaño con el ratón.

Procedimiento alternativo
1. Seleccione en la ventana de inspección "Propiedades > Propiedades > Representación".
2. Indique el tamaño del objeto en "Posición y tamaño".

Unificar el tamaño de objetos
1. Seleccione los objetos.
2. Haga clic en uno de los botones siguientes:
o
o
El tamaño de los objetos seleccionados se adaptará mutuamente.
La figura siguiente muestra cómo adaptar los objetos seleccionados a la altura del objeto de
referencia:

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1317

Trabajar con informes
7.2 Trabajar con informes

Símbolo

Descripción
Adapta los objetos seleccionados al ancho del objeto de referencia.

Adapta los objetos seleccionados a la altura del objeto de referencia.

Adapta los objetos seleccionados a la anchura y altura del objeto de referencia.

Resultado
El objeto se representará en su nuevo tamaño.

7.2.3.7

Seleccionar varios objetos

Introducción
Para modificar las propiedades de varios objetos simultáneamente, o bien para alinear los
objetos entre sí, deberá seleccionar todos los objetos en cuestión. Esta operación se
denomina "selección múltiple".
En la ventana de inspección aparecen todas las propiedades de los objetos seleccionados.
Existen las siguientes posibilidades para seleccionar varios objetos:
● Trace un marco de selección alrededor de los objetos deseados.
● Haga clic en los objetos deseados manteniendo pulsada la tecla <Mayús>.

Marco para una selección múltiple
El marco de selección abarca todos los objetos de una selección múltiple. Este marco de
selección es comparable al rectángulo que rodea a un objeto individual.
El marco de selección no se visualiza. Una vez concluida la selección múltiple se mostrarán los
marcos siguientes:
● El objeto de referencia aparecerá con el rectángulo circundante.
● Los demás objetos seleccionados aparecerán con un marco discontinuo.

1318

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes

Definir un objeto de referencia
El objeto de referencia es el objeto utilizado para alinear los demás objetos. El objeto de
referencia está rodeado por un rectángulo con controladores de tamaño. La figura siguiente
muestra un objeto de referencia con dos objetos más seleccionados:

Para definir el objeto de referencia existen las posibilidades siguientes:
● Seleccione los objetos mediante una selección múltiple. El objeto seleccionado en primer
lugar es el objeto de referencia.
● Trace un marco de selección alrededor de los objetos deseados. El objeto de referencia se
determinará automáticamente. Si desea determinar como objeto de referencia otro objeto
de la selección, haga clic en el objeto deseado. Esta acción no cancela la selección múltiple.

Requisitos
El área de trabajo está abierta con dos objetos como mínimo.

Seleccionar varios objetos con un marco de selección
1. Sitúe el puntero del ratón en el área de trabajo cerca de uno de los objetos que desea
seleccionar.
2. Manteniendo pulsado el botón del ratón, trace un marco de selección alrededor de los
objetos que desea seleccionar.
O:
1. Mantenga pulsada la tecla <Mayús>.
2. Haga clic con el ratón consecutivamente en los objetos deseados.
Todos los objetos seleccionados se enmarcarán.
El objeto de referencia será el primer objeto seleccionado.
Nota
Para eliminar un objeto de la selección múltiple, vuelva a hacer clic en el objeto
manteniendo pulsada la tecla <Mayús>.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1319

Trabajar con informes
7.2 Trabajar con informes

Resultado
Quedarán seleccionados varios objetos. Uno de ellos se identificará como objeto de
referencia. A continuación, podrá realizar los pasos siguientes:
● Modificar las propiedades de todos los objetos
● El tamaño de todos los objetos con un mismo factor se modifica arrastrando el cuadro de
selección con el ratón haciéndolo más grande o más pequeño.
● Desplazar todos los objetos simultáneamente.
● Alinear los objetos al objeto de referencia.

7.2.3.8

Modificar la posición y el tamaño de varios objetos

Cambios posibles
Después de seleccionar varios objetos, edítelos del siguiente modo:
● Desplazar con el ratón
– Para modificar la posición absoluta de los objetos seleccionados, sitúe el puntero del
ratón sobre un objeto y arrastre la selección múltiple manteniendo pulsado el botón del
ratón.
– Para modificar el tamaño de todos los objetos con el mismo factor, arrastre con el ratón
el rectángulo con controladores del objeto de referencia.
● Desplazar por el área de trabajo con los botones de la barra de herramientas
– Modificar la posición de los objetos seleccionados entre sí
– Igualar la altura y el ancho de los objetos seleccionados
● Desplazar con los comandos del menú contextual del área de trabajo
– Modificar la posición de los objetos seleccionados entre sí
– Igualar la altura y el ancho de los objetos seleccionados

7.2.3.9

Alinear objetos

Procedimiento
1. Seleccione los objetos deseados mediante una selección múltiple.
2. Defina un objeto como objeto de referencia.
3. Seleccione el comando deseado en la barra de herramientas o en el menú contextual;
véase tabla más abajo.
Los objetos seleccionados se alinearán.

1320

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes

Justificar objetos
Los objetos seleccionados se alinean justificados al objeto de referencia.
Símbolo

Descripción
Justifica los objetos seleccionados al borde izquierdo del objeto de referencia.
Justifica los objetos seleccionados al eje central vertical del objeto de referencia.
Justifica los objetos seleccionados al borde derecho del objeto de referencia.
Justifica los objetos seleccionados al borde superior del objeto de referencia.
Justifica los objetos seleccionados al eje central horizontal del objeto de referencia.
Justifica los objetos seleccionados al borde inferior del objeto de referencia.
Centra los objetos seleccionados alrededor del punto central del objeto de referencia.
Centra verticalmente los objetos seleccionados en la imagen.

Alinear a un objeto
Cuando mueva objetos, aparecerán líneas auxiliares. Al posicionar, puede orientarse con
otros objetos.

Si trabaja con el teclado, pulse la tecla Alt. Si mueve el objeto seleccionado con las teclas de
flecha, se le mostrará el siguiente punto de anclaje.

Distribuir los objetos uniformemente
Es preciso haber seleccionado tres objetos como mínimo. No se necesita un objeto de
referencia.
1. Seleccione los objetos.
2. Haga clic en uno de los botones "Espaciar horizontalmente por igual" o "Espaciar
verticalmente por igual".
Los objetos seleccionados se distribuyen de forma equidistante.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1321

Trabajar con informes
7.2 Trabajar con informes
La figura siguiente muestra cómo ordenar los objetos de forma equidistante en sentido vertical:

Símbolo

Descripción
Ordena los objetos de forma equidistante en sentido horizontal.
La posición de los objetos extremos (derecho e izquierdo) permanece invariable. Los
demás objetos se distribuyen entre ellos de forma equidistante.
Ordena los objetos de forma equidistante en sentido vertical.
La posición del objeto superior y del objeto inferior (derecho e izquierdo) no se modifica.
Los demás objetos se distribuyen entre ellos de forma equidistante.

7.2.3.10

Girar un objeto

Introducción
Un objeto adecuado se puede girar alrededor de sí mismo en pasos de 90° hacia la derecha
o hacia la izquierda.
Nota
No todos los objetos pueden girarse. Algunos objetos que pueden girarse en las imágenes no
pueden girarse en los informes.
Utilizando la selección múltiple también se pueden girar varios objetos simultáneamente.
Algunos objetos de WinCC (p. ej. los botones) no se pueden girar.
Al girar un objeto se modifica la orientación de los elementos que contiene. La figura siguiente
muestra cómo se comportan un rectángulo y una elipse con los diferentes comandos para girar
un objeto:

1322

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes

rKDFLDODGHUHFKD

rKDFLDODL]TXLHUGD

rKDFLDODGHUHFKD

[rKDFLDODGHUHFKD

Requisitos
El área de trabajo está abierta con un objeto como mínimo.

Procedimiento
1. Seleccione el objeto que desea girar.
2. Haga clic en uno de los siguientes botones de la barra de herramientas:
para girar el objeto hacia la derecha alrededor de su punto central. El ángulo de giro
es de 90°.
para girar el objeto hacia la izquierda alrededor de su punto central. El ángulo de giro
es de 90°.
para girar el objeto hacia la derecha en 180°.

Resultado
El objeto aparecerá girado.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1323

Trabajar con informes
7.2 Trabajar con informes

7.2.3.11

Voltear un objeto

Introducción
Los objetos se pueden voltear tomando como referencia su eje horizontal o vertical. Al voltear
un objeto se modifica la orientación de los elementos que contiene. La figura siguiente muestra
cómo se comportan un rectángulo y una elipse con los diferentes comandos para voltear un
objeto.
KRUL]RQWDO

YHUWLFDO

KRUL]RQWDOYHUWLFDO

Requisitos
Hay como mínimo una imagen abierta con un objeto.

Procedimiento
1. Seleccione el objeto que desea voltear.
2. En el menú contextual, haga clic en el comando "Voltear" y elija una de las posibilidades
que se ofrecen:
–

para voltear el objeto seleccionado tomando como referencia su eje vertical.

–

para voltear el objeto seleccionado tomando como referencia su eje horizontal.

Resultado
El objeto aparecerá volteado.

1324

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.2 Trabajar con informes

7.2.4

Operación en runtime

7.2.4.1

Imprimir un informe

Imprimir un informe en runtime
Si se ha configurado un objeto con la función de sistema "ImprimirInforme", el operador puede
imprimir un informe en runtime. Para ello, debe pulsar un botón en una imagen, p. ej. "Imprimir
informe". El operador no puede definir ni modificar otros ajustes del informe. El informe se
imprime en la impresora estándar.

7.2.4.2

Imprimir un informe

Inicio de la impresión de informe por el operador
El operador inicia en runtime la impresión de un informe por medio del botón "Imprimir" en los
siguientes objetos de imagen:
● Visor de curvas f(x)
● Visor de curvas f(t)
● Visor de tablas
● Visor de avisos
● Visor de recetas
Si en el trabajo de impresión se ha especificado que se mostrará un cuadro de diálogo para
seleccionar una impresora o para definir las propiedades, el operador modifica esta
configuración en runtime.
Si se ha configurado un botón y éste se ha enlazado con un script local correspondiente, el
operador podrá iniciar la impresión de informes a través de este botón.

Inicio automático de la impresión de informes
En los siguientes casos, la impresión de informes se inicia automáticamente en runtime:
● Se ha enlazado un trabajo de impresión con una tarea del tipo "Trabajo de impresión".
● Se ha enlazado un script global para imprimir informes con una tarea.
● En la configuración de runtime del panel de operador ha activado la entrada "Trabajos de
impresión previstos en runtime" en el apartado "Servicios".

Trabajo de impresión/diagnóstico de script
Dependiendo de la configuración se muestran en runtime todos los trabajos de impresión o los
trabajos seleccionados en el objeto "Trabajo de impresión/diagnóstico de script" cuando están
pendientes. Dependiendo de la configuración, el operador puede iniciar la impresión de
informes en el objeto "Trabajo de impresión/diagnóstico de script", definir las opciones de
impresión y mostrar la vista preliminar.
Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1325

Trabajar con informes
7.3 Objetos en los informes

Consulte también
Principios básicos de la impresión de informes (Página 1299)
Principios básicos de los informes de sistema y trabajos de impresión del sistema
(Página 1306)

7.3

Objetos en los informes

7.3.1

Resumen

Objetos del editor "Informes"
En el editor "Informes" se dispone de diferentes objetos:
● Objetos para el diseño formal de un informe
p. ej. "Número de página", "Línea" o "Círculo"
● Objetos para la visualización de contenido
p. ej. objetos para generar informes de avisos o visualizar recetas
En el siguiente apartado se describen objetos específicos de informes con propiedades
especiales. Los objetos de diseño sencillos no se describen con detalle.

7.3.2

Informe de auditoría

Utilización
Con el informe de auditoría se visualiza en forma de informe el contenido del Audit Trail de un
panel de operador.

1326

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

Requisitos
El objeto "Informe de Audit" sólo se encuentra disponible si se cumplen los requisitos
siguientes:
● El panel de operador soporta una configuración conforme a GMP.
● En la configuración de runtime del panel de operador está activada la configuración
conforme a GMP.
Tenga en cuenta también que las acciones de operador y los procesos de sistema sólo se
registran si está configurado un fichero correspondiente.

Representación
En la ventana de inspección se modifican los ajustes correspondientes a la posición,
geometría, estilo, colores y fuentes del objeto. En particular, se adaptan los siguientes ajustes:
● Visibilidad del comentario

7.3.3

Control Datos

Utilización
Si se quiere configurar un informe personalizado para la impresión de informes, se necesitan
objetos de informe.
El objeto de informe "Control Datos" imprime en forma de tabla todos los datos que contiene
el objeto de imagen, incluso los datos que no son visibles actualmente en runtime en el objeto
de imagen.

Representación
En la ventana de inspección se modifica la configuración de bordes y colores. En particular, se
adaptan las propiedades siguientes:
● Tipo de control cuyo contenido se imprime
● Objetos de control del objeto de imagen que también se representan
● Posición y tamaño

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1327

Trabajar con informes
7.3 Objetos en los informes

Tipo de control
Defina en "Propiedades > Propiedades > General > Tipo de control" de la ventana de
inspección si debe imprimirse el objeto, el contenido del objeto o bien el valor en la posición de
la regla.
● Elija para el "visor de curvas f(x)" y el "visor de curvas f(t)" entre las opciones "Regla" y "Otro
control".
● Para todos los demás objetos de imagen elija "Otro control".

Objetos de control del objeto de imagen
En "Propiedades > Propiedades > General > Contenido" de la ventana de inspección se define
si también deben imprimirse la barra de herramientas, la barra de estado y la barra de
desplazamiento.

Tamaño y posición
En la ventana de inspección se define el tamaño y la posición del objeto de informe en
"Propiedades > Propiedades > Diseño".
En el informe se imprime la tabla con el ancho del objeto de informe. Configure el objeto de
informe con el ancho adecuado.

Consulte también
Herramientas para diseñar informes (Página 1286)
Crear un informe (Página 1284)

7.3.4

Control Copia impresa

Utilización
Si se quiere configurar un informe personalizado para la impresión de informes, se necesitan
objetos de informe.
El objeto de informe "Control Copia impresa" imprime una instantánea del objeto de imagen.
En este caso sólo se imprimen los datos visibles en el objeto de imagen en runtime.

Representación
En la ventana de inspección se modifica la configuración de bordes y colores.

1328

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes
En particular, se adaptan las propiedades siguientes:
● Tipo de control cuyo contenido se imprime
● Qué objetos de control del objeto de imagen se representarán también.
● Tamaño y posición

Tipo de control
Defina en "Propiedades > Propiedades > General > Tipo de control" de la ventana de
inspección si debe imprimirse el objeto, el contenido del objeto o bien el valor en la posición de
la regla.
● Elija para el "visor de curvas f(x)" y el "visor de curvas f(t)" entre las opciones "Regla" y "Otro
control".
● Para todos los demás objetos de imagen elija "Otro control".

Objetos de control del objeto de imagen
En "Propiedades > Propiedades > Contenido" de la ventana de inspección se define si en el
informe también deben imprimirse la barra de herramientas, la barra de estado y la barra de
desplazamiento.

Tamaño y posición
En la ventana de inspección se define el tamaño y la posición del objeto de informe en
"Propiedades > Propiedades > Diseño".
En el informe se adapta el objeto de imagen al borde del objeto de informe. Configure el objeto
de informe con el tamaño adecuado.

Consulte también
Herramientas para diseñar informes (Página 1286)
Crear un informe (Página 1284)

7.3.5

Control Información

Utilización
Si se quiere configurar un informe personalizado para la impresión de informes, se necesitan
objetos de informe.
El objeto de informe "Control Información" imprime el título de la ventana, el nombre del objeto
de imagen o el nombre de la imagen. De este modo también se puede imprimir, p. ej., el origen
de los datos en el informe.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1329

Trabajar con informes
7.3 Objetos en los informes

Representación
En la ventana de inspección se modifica la configuración de bordes, colores, fuente y tamaño
de fuente. En particular, se adaptan las propiedades siguientes:
● Tipo de control cuyo contenido se imprime
● Contenido

Tipo de control
Defina en "Propiedades > Propiedades > General > Tipo de control" de la ventana de
inspección si debe imprimirse el objeto, el contenido del objeto o bien el valor en la posición de
la regla.
● Elija para el "visor de curvas f(x)" y el "visor de curvas f(t)" entre las opciones "Regla" y "Otro
control".
● Para todos los demás objetos de imagen elija "Otro control".

Contenido
En "Propiedades > Propiedades > General > Contenido" de la ventana de inspección se define
qué información imprimirá el objeto de informe:
● Título de la ventana
● Nombre del objeto
● Nombre de la imagen

Consulte también
Herramientas para diseñar informes (Página 1286)
Crear un informe (Página 1284)

7.3.6

Curvas del proveedor CSV

Utilización
Con el objeto "Curvas del CSV Provider" se visualizan en el informe datos de un archivo en
formato "*.csv" como curvas.
Dependiendo del volumen de datos imprimidos se insertarán automáticamente saltos de
página en el informe. El ancho configurado no se modifica en el informe. Los siguientes objetos
se desplazan automáticamente.

1330

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

Representación
En la ventana de inspección se modifican los ajustes correspondientes a la posición,
geometría, estilo, colores y fuentes del objeto. En particular, se adaptan las propiedades
siguientes:
● Origen de los datos

Origen de los datos
Defina el origen de los datos en "Propiedades > Propiedades > General > Proveedor". Es
posible seleccionar un archivo CSV o dinamizar la selección del archivo CSV con una variable
interna. De esta manera se modifica la impresión de datos directamente en el panel de
operador. La variable debe ser del tipo de datos "String" o "WString".
Nota
Para representar curvas, los datos del archivo CSV tienen que hallarse en una estructura
definida.

Consulte también
Herramientas para diseñar informes (Página 1286)
Crear un informe (Página 1284)

7.3.7

Tablas del proveedor CSV

Utilización
Con el objeto "Tablas del CSV Provider" se visualizan en el informe datos de un archivo en
formato "*.csv" como tabla.
Dependiendo del volumen de datos imprimidos se insertarán automáticamente saltos de
página en el informe. El ancho configurado no se modifica en el informe. Los siguientes objetos
se desplazan automáticamente.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1331

Trabajar con informes
7.3 Objetos en los informes

Representación
En la ventana de inspección se modifican los ajustes correspondientes a la posición,
geometría, estilo, colores y fuentes del objeto. En particular, se adaptan las propiedades
siguientes:
● Origen de los datos
● Aplicar fuente del origen de los datos

Origen de los datos
Defina el origen de los datos en "Propiedades > Propiedades > General > Proveedor". Es
posible seleccionar un archivo CSV o dinamizar la selección del archivo CSV con una variable
interna. De esta manera se modifica la impresión de datos directamente en el panel de
operador. La variable debe ser del tipo de datos "String" o "WString".
Nota
Para imprimir una tabla, los datos del archivo CSV tienen que hallarse en una estructura
definida.

Aplicar fuente del origen de los datos
Defina si se aplicarán la fuente y el tamaño de fuente del archivo CSV en la impresión del
informe en "Propiedades > Propiedades > General > Fuente".
Si se desactivan las opciones "Fuente del origen de los datos" y "Tamaño de fuente del origen
de los datos", se utilizará la configuración de "Formato del texto > Estilo".

Consulte también
Archivo CSV para la impresión de una tabla (Página 1293)
Herramientas para diseñar informes (Página 1286)
Crear un informe (Página 1284)

7.3.8

Campo de fecha y hora

Utilización
El objeto "Campo de fecha y hora" muestra la hora del sistema del panel de operador o la fecha
y/o la hora de una variable conectada. La representación depende del idioma configurado en
el panel de operador.

1332

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

Representación
En la ventana de inspección se modifican los ajustes correspondientes a la posición,
geometría, estilo, colores y fuentes del objeto. En particular, se adaptan las siguientes
propiedades en "Propiedades > Propiedades > General":
● Formato de fecha y hora largo: define el formato en el que se mostrarán la fecha y/o la hora.
● Hora del sistema: determina si se muestra la hora del sistema del panel de operador o la
fecha y/o la hora de una variable conectada.

Formato de fecha y hora largo
Opción

Descripción

"Activado"

La fecha y/o la hora se representan en formato largo, p. ej. "Sunday, December
31, 2000 10:59:59 AM"

"Desactivado"

La fecha y/o la hora se representan en formato abreviado, p. ej. "12/31/2000
10:59:59 AM"

Opción

Descripción

"Activado"

Se muestra la hora del sistema del panel de operador

"Desactivado"

Se muestra la fecha y hora de la variable conectada

Hora del sistema

Elija una variable del tipo de datos "DateTime", p. ej. una variable interna. En
la documentación de los drivers de comunicación correspondientes encontra‐
rá información sobre los tipos de datos disponibles para la conexión a otros
controles.

Consulte también
Herramientas para diseñar informes (Página 1286)
Crear un informe (Página 1284)

7.3.9

Campo de fecha y hora

Utilización
El objeto "Campo de fecha y hora" imprime la fecha y/o la hora en el informe con un formato
que se puede configurar individualmente.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1333

Trabajar con informes
7.3 Objetos en los informes

Representación
En la ventana de inspección se modifican los ajustes correspondientes a la posición,
geometría, estilo, colores y fuentes del objeto. En particular, se adaptan las propiedades
siguientes:
● Formato de visualización de la fecha y/o de la hora

Formato de visualización de fecha y hora
En "Propiedades > Propiedades > General > Formato" se define en qué forma se mostrarán la
fecha y/o la hora. Es posible combinar entre sí comodines y un texto cualquiera.
La siguiente tabla muestra qué comodines pueden utilizarse:
Comodines

Conversión

Ejemplo

%a

Día de la semana abreviado

Sun

%A

Día de la semana completo

Sunday

%b

Mes abreviado

Dec

%B

Mes completo

December

%c

Fecha y hora en formato estándar

12/31/2000 10:59:59 AM

%d

Día como número decimal (de 01 a 31)

31

%H

Horas en formato de 24 horas (de 00 a 23)

22

%I

Horas en formato de 12 horas (de 01 a 12)

10

%j

Día del año como número decimal (000 de
366)

366

%m

Mes como número decimal (de 01 a 12)

12

%M

Minuto como número decimal (de 00 a 59)

59

%p

Suplemento PM/AM en el formato de 12 ho‐ AM
ras

%S

Segundo como número decimal (de 00 a 59) 59

%U

Semana del año como número decimal (de
01 a 51)

50

%x

Fecha en formato estándar

12/31/2000

%X

Hora en formato estándar

10:59 AM

%y

Año sin siglo como número decimal (de 00 a
99)

00

%Y

Año con siglo como número decimal

2000

%z

Huso horario como nombre

W. Europe Standard Time

%%

Signo de porcentaje

%

Ejemplos
La siguiente tabla muestra cómo se pueden combinar comodines y textos entre sí:

1334

Formato

Ejemplo de impresión

Fecha: %x Hora: %H:%M

Fecha: 12/31/2000 Hora: 22:59

Impresión del %a %c

Impresión de Sun 12/06/2010 10:59:59 AM

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

Consulte también
Herramientas para diseñar informes (Página 1286)
Crear un informe (Página 1284)

7.3.10

Campo E/S

Utilización
El objeto "Campo E/S" permite la salida de valores de proceso.

Representación
En la ventana de inspección se modifican los ajustes correspondientes a la posición,
geometría, estilo, colores y fuentes del objeto. En particular, se adaptan las propiedades
siguientes:
● Formato de visualización: Determina el formato en el que se visualizarán los valores en el
campo E/S.
Nota
El objeto "Campo E/S" también se encuentra disponible en el editor "Imágenes". En los
informes, el objeto muestra datos exclusivamente. En consecuencia, cuando se utiliza en
informes se configura sólo la salida de datos.

Formato de visualización
El "formato de visualización" para la salida de valores se especifica en "Propiedades >
Propiedades > General > Formato" de la ventana de inspección.
Representación
"Binario"

Salida de valores en formato binario.

"Fecha" *

Salida de fechas. El formato depende del idioma configurado en el panel de ope‐
rador.

"Fecha/hora" *

Salida de fechas y horas. El formato depende del idioma configurado en el panel
de operador.

"Decimal" *

Salida de valores en formato decimal.

"Hexadecimal"

Salida de valores en formato hexadecimal.

"Hora" *

Salida de horas. El formato depende del idioma configurado en el panel de ope‐
rador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1335

Trabajar con informes
7.3 Objetos en los informes
Representación
"Cadena de carac‐ Salida de cadenas de caracteres.
teres"
*: no en Runtime Professional

Evitar solapamientos en los campos de salida
Si en un informe se han configurado varios campos E/S como campos de salida con fondo
transparente, es posible que dichos campos E/S se solapen. La parte transparente de un
campo cubre las cifras del otro campo. Ello puede ocasionar problemas de visualización en el
informe. Para evitar estos solapamientos, ponga a cero los bordes de los campos E/S en
"Propiedades > Propiedades > Apariencia" en las propiedades del objeto. Active "Propiedades
> Propiedades > Representación > Adaptar objeto al contenido".

Consulte también
Herramientas para diseñar informes (Página 1286)
Crear un informe (Página 1284)

7.3.11

Visor de curvas f(t) en los informes

Utilización
Con el objeto "Visor de curvas f(t)" se representan valores de variables del fichero en forma de
curvas como funciones de tiempo. En el informe se representa el estado de la evolución de la
curva en el momento en que se inicia el trabajo de impresión.

Nota
Funcionalidad reducida al imprimir informes
La configuración del objeto en el editor "Informes" se diferencia muy poco de la configuración
en el editor "Imágenes".
La funcionalidad del objeto se adapta a la utilización de la impresión de informes: Por ejemplo,
los elementos de control en runtime no pueden configurarse en el editor "Informes".

1336

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

Particularidades de la impresión de informes
A diferencia de la configuración en la imagen, las propiedades de cada curva pueden
dinamizarse mediante variables, p. ej. la representación y el suministro de datos. De este modo
es posible utilizar varias veces un informe, p. ej.

Consulte también
Herramientas para diseñar informes (Página 1286)
Crear un informe (Página 1284)

7.3.12

Visor de curvas f(x) en los informes

Utilización
Con el objeto "Visor de curvas f(x)" se representan los valores de una variable como función
de otra variable. De esta forma se representan, por ejemplo, las curvas de temperatura como
función de la presión. En el informe se representa el estado de la evolución de la curva en el
momento en que se inicia el trabajo de impresión.
Además se puede comparar la curva con una curva de consigna.

Nota
Funcionalidad reducida al imprimir informes
La configuración del objeto en el editor "Informes" se diferencia muy poco de la configuración
en el editor "Imágenes".
La funcionalidad del objeto se adapta a la utilización de la impresión de informes: Por ejemplo,
los elementos de control en runtime no pueden configurarse en el editor "Informes".

Particularidades de la impresión de informes
A diferencia de la configuración en la imagen, las propiedades de cada curva pueden
dinamizarse mediante variables, p. ej. la representación y el suministro de datos. De este modo
es posible utilizar varias veces un informe, p. ej.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1337

Trabajar con informes
7.3 Objetos en los informes

Consulte también
Herramientas para diseñar informes (Página 1286)
Crear un informe (Página 1284)

7.3.13

Vista de grafico

Utilización
El objeto "Visor de gráficos" permite visualizar gráficos.

Representación
En la ventana de inspección se modifican los ajustes correspondientes a la posición,
geometría, estilo, color y fuentes del objeto. En particular, se adaptan las propiedades
siguientes:
● Gráfico: determina el archivo gráfico que se visualiza en el objeto.
● Ajustar automáticamente: determina que se adapte automáticamente el tamaño de los
objetos que contengan gráficos.

Insertar un gráfico
En el objeto "Visor de gráficos" se utilizan los formatos siguientes: *.bmp, *.tif, *.png, *.ico,
*.emf, *.wmf, *.gif, *.svg, *.jpg o *.jpeg. Los gráficos también pueden utilizarse como objetos
OLE en el visor de gráficos.
1. Haga clic en la ventana de inspección "Propiedades > Propiedades > General".
2. Seleccione el gráfico que desea insertar.
El gráfico se visualizará a la derecha en la vista preliminar.
3. Para insertar el gráfico en el visor de gráficos haga clic en "Aplicar".

1338

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

Adaptar un gráfico
En la ventana de inspección se determina si el gráfico representado en un visor de gráficos
debe adaptarse en runtime al tamaño del visor de gráficos.
1. Haga clic en la ventana de inspección "Propiedades > Propiedades > Representación".
2. Elija una de las posibilidades siguientes en el área "Adaptación del tamaño":
– No adaptar automáticamente
– Adaptar gráfico al tamaño del objeto
– Adaptar tamaño del objeto al gráfico mayor
– Adaptar objeto, gráfico en tamaño original

7.3.14

Campo E/S gráfico

Utilización
Con el objeto "Campo E/S gráfico" se visualizan los gráficos de una lista de gráficos
dependiendo del valor de una variable. La variable y la lista de gráficos se configuran en
"Propiedades > Propiedades > General" de la ventana de inspección.

Nota
El objeto "Campo E/S gráfico" también se encuentra disponible en el editor "Imágenes". En los
informes, el objeto muestra datos exclusivamente. En consecuencia, cuando se utiliza en
informes se configura sólo la salida de datos.

Representación
En la ventana de inspección se modifican los ajustes correspondientes al color, los bordes, la
posición y el tamaño del objeto. En especial se determina la "adaptación de tamaño", es decir,
si en la visualización del informe el objeto se adapta al gráfico o viceversa.

Consulte también
Crear un informe (Página 1284)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1339

Trabajar con informes
7.3 Objetos en los informes

7.3.15

Copia impresa

Utilización
Con el objeto "Copia impresa" se visualiza una instantánea del contenido de la pantalla en el
informe.

Representación
En la ventana de inspección se modifican los ajustes correspondientes a la posición,
geometría, estilo, colores y fuentes del objeto. En particular, se adaptan los siguientes ajustes:
● Definir área

Definir área
Defina qué contenido de la pantalla se imprimirá en el informe en "Propiedades > Propiedades
> Área":
● "Ventana actual (1)": Ventana activa
● "Sección seleccionada (2)": Área seleccionada
● "Pantalla completa (0)": Contenido completo
La selección del área puede dinamizarse con una variable del tipo "Número". La configuración
está asignada del siguiente modo:
● 0 = "Pantalla completa"
● 1 = "Ventana actual"
● 2 = "Sección seleccionada"
Para una "Sección seleccionada(0)" se definen las siguientes propiedades:
● Posición X del punto superior izquierdo del área
● Posición Y del punto superior izquierdo del área
● Ancho en píxeles
● Altura en píxeles
Todas las propiedades pueden dinamizarse con una variable.

Consulte también
Herramientas para diseñar informes (Página 1286)
Crear un informe (Página 1284)

1340

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

7.3.16

Visor de avisos en los informes

Utilización
El objeto "Visor de avisos" muestra avisos que surgen durante el proceso en una instalación.
El visor de avisos se utiliza también para representar avisos en listas. WinCC ofrece varios
visores como, por ejemplo, el visor "Avisos actuales" o "Fichero de corto plazo".
En el informe se representa el estado del visor de avisos en el momento en que se inicia el
trabajo de impresión.

Nota
Funcionalidad reducida al imprimir informes
La configuración del objeto en el editor "Informes" se diferencia muy poco de la configuración
en el editor "Imágenes".
La funcionalidad del objeto se adapta a la utilización de la impresión de informes: Por ejemplo,
los elementos de control en runtime no pueden configurarse en el editor "Informes".

Consulte también
Herramientas para diseñar informes (Página 1286)
Registro continuo de avisos (Página 1290)
Crear un informe (Página 1284)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1341

Trabajar con informes
7.3 Objetos en los informes

7.3.17

Informe secuencial de avisos

Utilización
El objeto "Informe secuencial de avisos" imprime continuamente todos los avisos del panel de
operador en secuencia cronológica tras iniciar runtime. Este objeto sólo se utiliza en el informe
de sistema "@AlarmSequenceReportForPage" que define la impresión del informe secuencial
de avisos de WinCC en el diseño de página.
En las propiedades del objeto se determina qué avisos deben imprimirse.
Dependiendo del volumen de datos imprimidos se insertarán automáticamente saltos de
página en el informe. El ancho configurado no se modifica en el informe. Los siguientes objetos
se desplazan automáticamente.

Consulte también
Herramientas para diseñar informes (Página 1286)
Registro continuo de avisos (Página 1290)
Crear un informe (Página 1284)
Modificar informes de sistema y trabajos de impresión del sistema (Página 1307)

7.3.18

Informe de avisos

Utilización
Con el objeto "Informe de avisos" se visualizan avisos del búfer o fichero en el informe.

1342

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

Representación
En la ventana de inspección se modifican los ajustes correspondientes a la posición,
geometría, estilo, colores y fuentes del objeto. En particular, se adaptan los siguientes ajustes:
● Origen
● Categorías
● Rango de tiempo
● Ajustes adicionales de la visualización
● Columnas visibles

Definir origen
En "Propiedades > Propiedades > General > Configuración > Origen" se especifica si se
muestran los avisos del búfer o del fichero de avisos. El fichero de avisos se selecciona en
"Fichero de avisos".
Nota
El origen "Fichero de avisos" solo está disponible si el panel de operador soporta ficheros.

Definir categorías
En "Propiedades > Propiedades > General > Categorías" se activan las categorías cuyos
avisos se visualizarán en el informe.

Definir rango de tiempo
Si quiere visualizar únicamente avisos de un rango de tiempo determinado, seleccione en
"Propiedades > Propiedades > General > Rango de tiempo" una variable de inicio y una de final
del rango de tiempo. La variable debe ser del tipo "DateTime".

Ajustes adicionales de la visualización
Defina en "Propiedades > Propiedades > General > Configuración" los siguientes ajustes de la
visualización en el informe de avisos:
● En "Ordenar" se determina si se muestra primero el aviso más antiguo o el más reciente.
● En "Líneas por entrada" se define cuántas líneas están disponibles por aviso. El número de
líneas requeridas depende de los siguientes factores:
– Número y ancho de las columnas seleccionadas para la impresión
– Tamaño de fuente utilizado
– Formato de papel de la impresora
● La visualización de los títulos de columna se activa con "Título visible".
● La visualización de los milisegundos en la hora se activa con "Mostrar miliseg.".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1343

Trabajar con informes
7.3 Objetos en los informes

Columnas visibles
En "Propiedades > Propiedades > Representación > Columnas visibles" se activan las
columnas que se muestran en el informe de avisos.

Consulte también
Configurar el registro de avisos (Página 908)
Crear un informe (Página 1284)

7.3.19

Campo de base de datos ODBC

Utilización
Con el objeto "Campo de la base de datos ODBC" se visualizan datos de una sola celda de la
tabla en el informe a través de la interfaz ODBC. La interfaz ODBC permite representar de
forma homogénea en un informe los datos que no provienen de WinCC.
Dependiendo del volumen de datos imprimidos se insertarán automáticamente saltos de
página en el informe. El ancho configurado no se modifica en el informe. Los siguientes objetos
se desplazan automáticamente.

Nota
Driver ODBC
Para los sistemas Windows 10 se soportan exclusivamente drivers ODBC de 64 bits.

Representación
En la ventana de inspección se modifican los ajustes correspondientes a la posición,
geometría, estilo, colores y fuentes del objeto. En particular, se adaptan los siguientes ajustes:
● Configuración de la conexión SQL
● Selección de datos para el Statement SQL

Formato de texto
Defina la alineación del texto mostrado en "Propiedades > Propiedades > Formato de texto >
Alineación". Puede alinear el texto en horizontal a la izquierda, a la derecha o centrado.
Nota
El ajuste "Alineación > Vertical" no tiene efecto en runtime.

1344

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

Configuración de la conexión
En "Propiedades > Propiedades > Conexión SQL" se definen el origen de los datos, los
nombres de usuario y la contraseña para la conexión SQL. Todas las configuraciones pueden
dinamizarse con variables. De esta manera se modifica la impresión de datos directamente en
el panel de operador.

Selección de datos
En "Propiedades > Propiedades > SQL Statement" se define el rango de datos que se quiere
representar en el informe. Introduzca un "Select-Statement".
Introduzca el "Select-Statement" deseado en el campo de texto homónimo o seleccione la
"variable" que suministra el Select-Statement. La variable debe ser del tipo "String" o "WString".
El Select-Statement se puede dinamizar en el campo de entrada homónimo utilizando
variables. Para ello elija en el menú contextual "Insert reportfield" en la posición deseada del
texto y elija a continuación la variable deseada.
Nota
Finalmente introduzca "Select-Statements".

Consulte también
Herramientas para diseñar informes (Página 1286)
Crear un informe (Página 1284)

7.3.20

Tabla de base de datos ODBC

Utilización
Con el objeto "Tabla de la base de datos ODBC" se visualizan datos de una tabla en el informe
a través de la interfaz ODBC. La interfaz ODBC permite representar de forma homogénea en
un informe los datos que no provienen de WinCC.
Dependiendo del volumen de datos imprimidos se insertarán automáticamente saltos de
página en el informe. El ancho configurado no se modifica en el informe. Los siguientes objetos
se desplazan automáticamente.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1345

Trabajar con informes
7.3 Objetos en los informes

Nota
Driver ODBC
Para los sistemas Windows 10 se soportan exclusivamente drivers ODBC de 64 bits.

Representación
En la ventana de inspección se modifican los ajustes correspondientes a la posición,
geometría, estilo, colores y fuentes del objeto. En particular, se adaptan las propiedades
siguientes:
● Configuración de la conexión SQL
● Selección de datos para el Statement SQL
● Representación de la tabla, p. ej. número de columnas y lista circular

Configuración de la conexión
En "Propiedades > Propiedades > Conexión SQL" se definen el origen de los datos, los
nombres de usuario y la contraseña para la conexión SQL. Todas las configuraciones pueden
dinamizarse con variables. De esta manera se modifica la impresión de datos directamente en
el panel de operador.

Selección de datos
En "Propiedades > Propiedades > SQL Statement" se define el rango de datos que se quiere
representar en el informe.
Introduzca el "Select-Statement" deseado en el campo de texto homónimo o seleccione la
"variable" que suministra el Select-Statement. La variable debe ser del tipo "String" o "WString".
El Select-Statement se puede dinamizar en el campo de entrada homónimo utilizando
variables. Para ello elija en el menú contextual "Insert reportfield" en la posición deseada del
texto y elija a continuación la variable deseada.
Nota
Finalmente introduzca "Select-Statements".

1346

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

Lista circular
En la ventana de inspección se define cómo se repartirán los datos en las columnas de la tabla
con la opción "Lista circular" en "Propiedades > Propiedades > Tabla".
● "Lista circular" desactivada
La tabla se llena por filas de arriba a abajo.
Dentro de una fila se imprime un valor en la primera columna. Las otras columnas
permanecen vacías.
● "Lista circular" activada
La tabla se llena por filas de arriba a abajo.
Dentro de una fila se llenan todas las columnas de izquierda a derecha.
Nota
La opción sólo tiene efecto si los datos se suministran en una sola columna y si la tabla
configurada tiene varias columnas.

Ejemplo:
Se configura una tabla con 3 columnas. En el objeto de imagen están incluidos los siguientes
datos en el momento de la impresión del informe: A1, A2, A3, B1, B2, B3, C1, C3, D4
La tabla siguiente muestra el resultado con la opción "Lista circular" desactivada:
Columna 1

Columna 2

Columna 3

A1
A2
A3
B1
B2
...

La tabla siguiente muestra el resultado con la opción "Lista circular" activada:
Columna 1

Columna 2

Columna 3

A1

A2

A3

B1

B2

B3

C1

C3

D4

Consulte también
Herramientas para diseñar informes (Página 1286)
Crear un informe (Página 1284)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1347

Trabajar con informes
7.3 Objetos en los informes

7.3.21

Nombre del proyecto

Utilización
Con el objeto "Nombre del proyecto" se visualiza el nombre del proyecto actual en el informe.

Representación
En la ventana de inspección se modifican los ajustes correspondientes a la posición,
geometría, estilo, colores y fuentes del objeto. En particular, se adaptan los siguientes ajustes:
● Formato del nombre del proyecto

Formato del nombre del proyecto
En el campo "Formato" de "Propiedades > Propiedades > Formato del texto > Estilo" se define
la forma en la que se imprimirá el nombre del proyecto. Utilice comodines para el nombre del
proyecto e introduzca un texto cualquiera si es necesario.
La siguiente tabla muestra qué comodines pueden utilizarse:
Comodines

Valor

"%R"

Ruta y nombre del proyecto

"%r"

Nombre del proyecto (sin indicar la ruta)

Ejemplos
La siguiente tabla muestra mediante algunos ejemplos cómo se pueden combinar comodines
y textos entre sí:
Formato

Ejemplo de impresión

Proyecto: %R

Proyecto: D:\WinCC\Proyectos\MP277_Mixing

Creado para el proyecto
"%r"

Creado para el proyecto "MP277_Mixing"

Consulte también
Herramientas para diseñar informes (Página 1286)
Crear un informe (Página 1284)

1348

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

7.3.22

Nombre de informe

Utilización
Con el objeto "Nombre del informe" se imprime el nombre del informe en el mismo.

Representación
En la ventana de inspección se modifican los ajustes correspondientes a la posición,
geometría, estilo, colores y fuentes del objeto. En particular, se adaptan los siguientes ajustes:
● Formato del nombre del informe

Formato del nombre del informe
En el campo "Formato" de "Propiedades > Propiedades > Formato del texto > Estilo" se define
la forma en la que se imprimirá el nombre del informe. Utilice comodines para el nombre del
informe e introduzca un texto cualquiera si es necesario.
La siguiente tabla muestra qué comodines pueden utilizarse:
Comodines

Valor

"%L" o "%l"

Nombre de informe

Ejemplo
La siguiente tabla muestra cómo se pueden combinar comodines y textos entre sí:
Formato

Ejemplo de impresión

Informe: %L

Informe: Avisos

Consulte también
Herramientas para diseñar informes (Página 1286)
Crear un informe (Página 1284)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1349

Trabajar con informes
7.3 Objetos en los informes

7.3.23

Visor de recetas en los informes

Utilización
Con el objeto "Visor de recetas" se muestran los elementos de receta en forma de tabla. En el
informe se representa el estado del visor de recetas en el momento en que se inicia el trabajo
de impresión.

Nota
Funcionalidad reducida al imprimir informes
La configuración del objeto en el editor "Informes" se diferencia muy poco de la configuración
en el editor "Imágenes".
La funcionalidad del objeto se adapta a la utilización de la impresión de informes: Por ejemplo,
los elementos de control en runtime no pueden configurarse en el editor "Informes".

Consulte también
Herramientas para diseñar informes (Página 1286)
Definición y campos de aplicación (Página 1200)
Crear un informe (Página 1284)

1350

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

7.3.24

Informe de receta

Utilización
Con el objeto "Informe de receta" se visualizan los elementos de los registros de receta en el
informe.

Representación
En la ventana de inspección se modifican los ajustes correspondientes a la posición,
geometría, estilo, colores y fuentes del objeto. En particular, se adaptan los siguientes ajustes:
● Receta
● Registro
● Formato
● Entradas visibles

Seleccionar receta
En "Propiedades > Propiedades > General > Receta" se especifica qué recetas se visualizarán
en el informe de receta. Las recetas se pueden definir a través del nombre de receta o un rango
de números de receta. En "Primera receta" y "Última receta" se introduce un valor o se
selecciona una variable.
Otra posibilidad es visualizar todas las recetas.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1351

Trabajar con informes
7.3 Objetos en los informes

Seleccionar registro
En "Propiedades > Propiedades > General > Registro" se define qué registros de las recetas
seleccionadas se visualizarán en el informe de receta. Los registros se pueden definir a través
del nombre de registro o un rango de números de registro. En "Primer registro" y "Último
registro" se introduce un valor o se selecciona una variable.
Otra posibilidad es visualizar todos los registros de las recetas seleccionadas.

Formato
En "Propiedades > Propiedades > Representación > Configuración" se define en el campo
"Formato" si los registros se visualizarán en forma de tabla con columnas o de informe de
líneas.
WinCC actualiza la vista preliminar en la página de detalles en correspondencia.

Entradas visibles
En "Propiedades > Propiedades > Representación > Entradas visibles" se activan las
columnas que se muestran en el informe de receta. La visualización de los títulos de columna
se activa con "Mostrar títulos".

Consulte también
Definición y campos de aplicación (Página 1200)
Crear un informe (Página 1284)

7.3.25

Número de página

Utilización
Con el objeto "Número de página" se visualiza el número de página actual en el informe.

Representación
En la ventana de inspección se modifican los ajustes correspondientes al color, la fuente, la
posición y el tamaño del objeto. En especial se determina la "adaptación de tamaño".

1352

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

Adaptación de tamaño
En "Propiedades > Propiedades > Representación > Adaptación de tamaño" se define
mediante la opción "Adaptar objeto al contenido" si WinCC adapta el tamaño del objeto al
contenido del campo:
● Opción "Adaptar objeto al contenido" activada:
WinCC adapta automáticamente el tamaño del objeto al formato configurado. El tamaño de
fuente y la longitud del campo se determinan en "Propiedades > Propiedades > General >
Text".
El objeto se puede desplazar en el área de trabajo pero su tamaño no puede modificarse.
En la impresión del informe se muestra el contenido total del campo en el momento de la
impresión.
● Opción "Adaptar objeto al contenido" no activada:
Defina el tamaño del campo. WinCC no cambia el tamaño del campo al imprimir el informe.
Según las circunstancias no se imprimirán todos los contenidos del campo en el informe.
Por esto, configure el campo lo suficientemente grande.

Consulte también
Crear un informe (Página 1284)

7.3.26

Número de página

Utilización
Con el objeto "Número de página" se imprime en el informe el número de página actual o el
número total de páginas en el encabezado o en el pie de página del informe.

Representación
En la ventana de inspección se modifican los ajustes correspondientes al color, la fuente, los
bordes, la alineación, así como la posición y el tamaño del objeto. Defina en particular el
formato del número de página.

Formato
En "Propiedades > General > Texto > Formato" se define en qué formato se imprimirá el
número de página. Utilice comodines para los números de página e introduzca un texto
cualquiera si es necesario.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1353

Trabajar con informes
7.3 Objetos en los informes
La siguiente tabla muestra qué comodines pueden utilizarse:
Comodines

Valor

"%N" o "%n"

Número de página actual

"%T" o "%t"

Número total de las páginas del informe

Ejemplos
La siguiente tabla muestra mediante algunos ejemplos cómo se pueden combinar comodines
y textos entre sí:
Formato

Ejemplo de impresión

Página %n de %t

Página 2 de 10

%n/%t

2/10

Consulte también
Herramientas para diseñar informes (Página 1286)
Crear un informe (Página 1284)

7.3.27

Campo E/S simbólico

Utilización
Con el objeto "Campo E/S simbólico" se visualizan en los informes los contenidos de una lista
de textos dependiendo del valor de una variable. La variable y la lista de textos se configuran
en "Propiedades > Propiedades > General" de la ventana de inspección.

Representación
En la ventana de inspección se modifican los ajustes correspondientes al color, los bordes, la
fuente, la posición y el tamaño del objeto. En especial se determina en la "adaptación de
tamaño" si el tamaño del objeto se adapta o no al texto en la visualización del informe.
Nota
El objeto "Campo E/S simbólico" también se encuentra disponible en el editor "Imágenes". En
los informes, el objeto muestra datos exclusivamente. En consecuencia, cuando se utiliza en
informes se configura sólo la salida de datos.

1354

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con informes
7.3 Objetos en los informes

Consulte también
Crear un informe (Página 1284)

7.3.28

Visor de tablas en los informes

Utilización
Con el objeto "Visor de tablas" se representan los datos de proceso en una tabla. Cada fila de
la tabla representa el estado de las variables de proceso seleccionadas en un momento
determinado.
En el informe se representa el estado de la tabla en el momento en que se inicia el trabajo de
impresión.

Nota
Funcionalidad reducida al imprimir informes
La configuración del objeto en el editor "Informes" se diferencia muy poco de la configuración
en el editor "Imágenes".
La funcionalidad del objeto se adapta a la utilización de la impresión de informes: Por ejemplo,
los elementos de control en runtime no pueden configurarse en el editor "Informes".

Particularidades de la impresión de informes
A diferencia de la configuración en la imagen, las propiedades de las columnas de tiempo y
valores pueden dinamizarse mediante variables. De este modo es posible utilizar varias veces
un informe, p. ej.

Consulte también
Herramientas para diseñar informes (Página 1286)
Crear un informe (Página 1284)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1355

Trabajar con informes
7.3 Objetos en los informes

7.3.29

Campo de texto

Utilización
El objeto "Campo de texto" es un objeto cerrado que puede rellenarse con un color.

Representación
En la ventana de inspección se modifican los ajustes correspondientes a la posición,
geometría, estilo, color y fuentes del objeto. En particular, se adaptan las propiedades
siguientes:
● Texto: determina el texto para el campo de texto.
● Tamaño del campo de texto: determina si el tamaño del objeto debe adaptarse al espacio
necesario para el registro más largo de la lista.

Texto
El texto para el campo de texto se determina en la ventana de inspección.
1. Haga clic en la ventana de inspección "Propiedades > Propiedades > General".
2. Introduzca un texto.
Si el texto tiene varias líneas, el salto de línea se activa pulsando la combinación de teclas
<Mayús + Intro>.

Tamaño del campo de texto
En la ventana de inspección se determina si el tamaño del objeto debe adaptarse al espacio
necesario para el registro más largo de la lista.
1. Haga clic en la ventana de inspección "Propiedades > Propiedades > Representación".
2. Active "Adaptación de tamaño > Adaptar tamaño al contenido".

1356

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.1

Principios básicos

8.1.1

Campo de aplicación de la administración de usuarios

8

Principio
La protección de acceso regula el acceso a los datos y las funciones en runtime. De este modo
se protegen las aplicaciones de operaciones no autorizadas. Al crear el proyecto, algunas
operaciones relevantes para la seguridad ya se restringen a determinados grupos de usuarios.
Para ello, se crean usuarios y grupos de usuarios a los que se adjudican derechos de acceso
característicos, los permisos. Seguidamente, en los objetos relevantes para la seguridad se
configuran los permisos necesarios para el manejo. Así, p. ej., los operadores sólo tienen
acceso a determinados objetos de manejo. Los operadores de puesta en marcha disponen de
acceso ilimitado en runtime, p. ej.

Definición
Los usuarios, grupos de usuarios y permisos se gestionan de forma centralizada en la
administración de usuarios de WinCC. Los usuarios y grupos de usuarios se transfieren al
panel de operador junto con el proyecto. En el panel de operador, los usuarios y las
contraseñas se gestionan en el visor de usuarios.

Ejemplo de aplicación
El permiso "Servicio" se configura para que solo los técnicos de mantenimiento y reparación
puedan acceder a los parámetros de ajuste. El permiso se asigna al grupo de usuarios
"Técnico de servicio". Todos los miembros de este grupo utilizan así los parámetros de ajuste
protegidos.

ATENCIÓN
Protección contra manejo incorrecto
La protección de acceso no protege de manipulaciones erróneas. Es su obligación
asegurarse de que sólo el personal autorizado y con la formación adecuada se encarga de
construir máquinas e instalaciones, ponerlas en marcha, manejarlas y mantenerlas.
La protección de acceso no sirve para definir procesos de trabajo y supervisar su
cumplimiento.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1357

Configurar una administración de usuarios
8.1 Principios básicos

8.1.2

Estructura de la administración de usuarios

Introducción
En un proyecto de producción, el entorno del fabricante de máquinas debe ser diferente del
entorno del cliente final en su función de operador de la planta.
El fabricante de máquinas autoriza al usuario, p. ej. Sr. Maestro, a acceder a la aplicación o al
panel de operador de un modo determinado. Sin embargo, en el cliente final no hay ningún
usuario Maestro. Los usuarios del cliente final y sus tareas todavía se desconocen durante la
configuración por parte del fabricante de máquinas. Por norma general, los usuarios finales no
se determinan hasta después de la puesta en marcha en las instalaciones del cliente final.

:LQ&&:RUNEHQFK
$GPLQLVWUDGRU

&RQILJXUDFLµQ

*UXSRGHXVXDULRV
7«FQLFRGHVHUYLFLR

$XWRUL]DFLRQHV

0¾OOHU

0RGLILFDUUHJLVWURVGHUHFHWDV

*UXSR0HLHU

0RGLILFDUSDU£PHWURVGHVLVWHPD

0DHVWUR

$UFKLYDUYDORUHVGHSURFHVR

6H³RU0DHVWUR

3URJUDPD

(OHPHQWRVGH
FRQWURO

%ORTXH

3DU£PHWURV
9DORUHVGH
SURFHVR 5HFHWD GHVLVWHPD $UFKLYDFLµQ

Principio
Para mantener el trabajo de administración en niveles reducidos, las autorizaciones no se
asignan directamente a un solo usuario, sino que están desacopladas en grupos de usuarios.
Un grupo de usuarios agrupa autorizaciones configuradas en función de las tareas. Así, p. ej.,
todas las autorizaciones necesarias para una actuación del servicio técnico se agrupan en un
grupo "Técnico de servicio". Si crea un usuario responsable del servicio técnico, asígnelo
únicamente al grupo "Técnico de servicio".
El visor de usuarios puede utilizarse para administrar usuarios en runtime, así como para
crearlos, borrarlos y asignarles una autorización.
La administración de usuarios separa la administración de los usuarios de la configuración de
autorizaciones. De este modo, ofrece mayor flexibilidad en la protección de acceso.

1358

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.1 Principios básicos
Durante la configuración ya se puede realizar una asignación previa de la administración de
usuarios en el sistema de ingeniería.

8.1.3

Usuarios

Introducción
Los usuarios se crean en la ficha "Usuarios" del editor "Administración de usuarios" y se
asignan a los grupos de usuarios. La ficha "Usuarios" forma parte de la administración de
usuarios de WinCC.

Abrir
La ficha "Usuarios" se abre haciendo doble clic en "Administración de usuarios" de la ventana
del proyecto.

Área de trabajo
En el área de trabajo se administran los usuarios:
● Se crean o borran usuarios.
● Se asignan usuarios a grupos.
Nota
Un usuario solo puede asignarse a un grupo de usuarios.
Nota
Un panel de operador puede ser utilizado por 100 usuarios y un "PLC-User" como máximo.
Este límite no es aplicable a PC. El número máximo de usuarios de un PC está limitado por
la memoria física del mismo.

Ventana de inspección
Si se selecciona un usuario, se puede modificar la contraseña en el grupo "General". En "Cierre
de sesión automático" se determina si el usuario debe desconectarse automáticamente del
panel de operador en caso de que transcurra el tiempo establecido sin que se realice una
entrada.

Crear una copia de seguridad y restablecer datos
Los datos de los usuarios se codifican y se guardan en el panel de operador asegurados contra
fallos de red.
Es posible crear una copia de seguridad de los datos de los usuarios, las contraseñas, las
asignaciones a grupos y los tiempos de cierre de sesión configurados en el panel de operador

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1359

Configurar una administración de usuarios
8.1 Principios básicos
y restaurar dichos datos. De este modo evita tener que volver a introducir los datos en otro
panel de operador.
Nota
Los datos actuales de los usuarios se sobrescriben en los casos siguientes:
● Cuando el proyecto se cargue de nuevo (dependiendo de la configuración)
● Cuando se restablezca un proyecto del que se haya creado un backup
● Cuando se importe la gestión de usuarios mediante un objeto de manejo. Los datos de
usuarios y contraseñas que se carguen de nuevo o se restauren tendrán validez inmediata.
Nota
Los datos de usuario de versiones anteriores de Runtime se pueden guardar y restaurar en la
V14.
Los datos de usuario de la V14 no se pueden restaurar en versiones anteriores.

Consulte también
Configuración de la administración de usuarios (Página 1366)

8.1.4

Área de trabajo de usuarios

Introducción
El área de trabajo "Usuarios" muestra los usuarios y grupos de usuarios en forma de tablas. En
esta área es posible administrar los usuarios y asignarlos a un grupo de usuarios determinado.

Principio
El área de trabajo se compone de las tablas "Usuarios" y "Grupos de usuarios".

1360

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.1 Principios básicos
La tabla "Usuarios" muestra los usuarios creados. Si selecciona un usuario en esta tabla, en
la tabla "Grupos" aparecerá el grupo de usuarios al que pertenece.
Nota
Para el usuario "Administrador" está preajustada la contraseña "administrator". Por motivos de
seguridad es conveniente cambiar la contraseña de este usuario.

Consulte también
Configuración de la administración de usuarios (Página 1366)
Grupos de usuarios (Página 1361)
Área de trabajo de grupos de usuarios (Página 1362)
Configuración de la administración de usuarios (Página 1363)
Configuración de la administración de usuarios (Página 1370)

8.1.5

Grupos de usuarios

Introducción
Los grupos de usuarios y las autorizaciones se crean en la ficha "Grupos de usuarios" del editor
"Administración de usuarios". La ficha "Grupos de usuarios" forma parte de la administración
de usuarios de WinCC.

Abrir
Haga doble clic en "Administración de usuarios" de la ventana del proyecto. Seleccione la ficha
"Grupos de usuarios".

Área de trabajo
En el área de trabajo se administran los grupos de usuarios y las autorizaciones:
● Se crean nuevos grupos de usuarios y autorizaciones o se borran.
● Se asignan autorizaciones a los grupos de usuarios.

Ventana de inspección
Si se selecciona un grupo de usuarios o una autorización, se puede editar el nombre en el
grupo "General". Introduzca además una descripción breve en el grupo "Comentario".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1361

Configurar una administración de usuarios
8.1 Principios básicos

Consulte también
Configuración de la administración de usuarios (Página 1366)
Área de trabajo de usuarios (Página 1360)
Área de trabajo de grupos de usuarios (Página 1362)
Configuración de la administración de usuarios (Página 1363)
Configuración de la administración de usuarios (Página 1370)

8.1.6

Área de trabajo de grupos de usuarios

Introducción
El área de trabajo "Grupos de usuarios" muestra los grupos y sus autorizaciones en forma de
tabla. En esta tabla es posible administrar los grupos de usuarios y asignarles autorizaciones.

Principio
El área de trabajo se compone de las tablas "Grupos" y "Autorizaciones".

La tabla "Grupos" muestra los grupos de usuarios creados. Si selecciona un grupo de usuarios
en esta tabla, en la columna "Activo" de la tabla "Autorizaciones" aparecerán las
autorizaciones que se le hayan asignado.
La administración de usuarios asigna el número de grupo de usuarios y de autorización. El
usuario asigna las denominaciones y descripciones.

1362

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.1 Principios básicos
Los números de las autorizaciones predefinidas están asignados de antemano. Las
autorizaciones que cree el usuario pueden editarse libremente. No obstante, al asignarlas
debe observarse la univocidad de los números.

Consulte también
Configuración de la administración de usuarios (Página 1366)
Área de trabajo de usuarios (Página 1360)
Grupos de usuarios (Página 1361)
Configuración de la administración de usuarios (Página 1363)
Configuración de la administración de usuarios (Página 1370)

8.1.7

Configuración de la administración de usuarios

Introducción
En el editor "Configuración de Runtime > Administración de usuarios" se configuran los ajustes
de seguridad para los usuarios y sus contraseñas en runtime.

Abrir
Haga doble clic en el editor "Configuración de runtime" en la ventana del proyecto. Haga clic
en "Administración de usuarios".

Área de trabajo
En el área de trabajo se realizan ajustes para la validez de las contraseñas en runtime. Así se
determina, p. ej., la complejidad de la contraseña.
Nota
Si la contraseña de un proyecto anterior ya no cumple la norma, se solicitará al usuario que
guarde una nueva contraseña.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1363

Configurar una administración de usuarios
8.1 Principios básicos

Efectos en runtime
Dependiendo de la configuración, los ajustes de seguridad tienen los efectos siguientes en
runtime.
● Grupo "General"
– Casilla de verificación "Activar límite de intentos de inicio de sesión" activada
El número introducido en el campo "Intentos no válidos de inicio de sesión" determina
cuántos intentos de inicio de sesión puede realizar un usuario antes de ser asignado al
grupo "No autorizado".
Casilla de verificación "Activar límite de intentos de inicio de sesión" no activada
El usuario tiene en runtime un número ilimitado de intentos de inicio de sesión.
– Campo "Intentos no válidos de inicio de sesión"
Si se ha introducido un "4" en el campo, p. ej., y el cuarto intento de inicio de sesión del
usuario no da resultado, se asigna automáticamente al grupo "No autorizado".
Puede introducir entre 1 y 9 intentos.
– Casilla de verificación "Sólo es posible iniciar sesión con contraseña"
Si la casilla de verificación está activada, se realiza una autenticación de los usuarios
mediante la contraseña. El nombre de usuario no es necesario.
Por consiguiente, para que sea posible la asignación, no se debe asignar dos veces la
misma contraseña.
Nota
Si se activa la opción "Sólo es posible iniciar sesión con contraseña", el sistema
restablece las contraseñas de los usuarios ya creados. Por ello es aconsejable activar
la opción "Sólo es posible iniciar sesión con contraseña" siempre antes de crear
usuarios.
Si transfiere datos de usuario desde versiones anteriores del dispositivo en las que la
opción "Sólo es posible iniciar sesión con contraseña" estuviera desactivada, es posible
que se hayan guardado varios usuarios con contraseñas idénticas. Estos usuarios se
mostrarán en el visor de usuarios. Sin embargo, solo podrá iniciar sesión en Runtime el
usuario cuyo nombre aparezca en primer lugar en orden alfabético.
● Grupo "Nivel de jerarquía"
– Casilla de verificación "Activar derechos específicos de grupo para la administración de
usuarios"
Si esta casilla de verificación está activada, los administradores sólo gestionan a los
usuarios cuyo número de grupo es inferior o igual al suyo propio.
Un administrador cuyo número de grupo sea 5, p. ej., solo podrá administrar usuarios
cuyo número de grupo sea menor o igual a 5. Es decir, el administrador solo podrá
asignar a grupos los usuarios que tengan un número de grupo menor o igual a 5.

1364

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.1 Principios básicos
● Grupo "Contraseña"
– Casilla de verificación "Activar caducidad de la contraseña" activada
La contraseña caduca al cabo del número de días indicado en el campo "Vigencia de la
contraseña (días)".
En el editor "Grupos de usuarios" se activará también la columna "Caducidad de la
contraseña". Con ello se determina para cada grupo en particular si caducan las
contraseñas y si deben guardarse generaciones de contraseñas. Si la caducidad de la
contraseña no se ha activado para un grupo, sus contraseñas no caducarán nunca.
– Campo "Tiempo de advertencia (días)"
Se informa al usuario de que su contraseña caducará al cabo del número de días
indicado en este campo.
– Campo "Generaciones de contraseña"
Cuando el usuario modifique su contraseña, esta deberá diferenciarse del número de
contraseñas anteriores indicado en este campo. El número posible de generaciones de
contraseñas está comprendido entre 1 y 5.
● Grupo "Complejidad de la contraseña"
– Casilla de verificación "Debe contener caracteres especiales" activada
El usuario debe introducir una contraseña que contenga al menos un carácter especial,
sin importar en qué posición.
– Casilla de verificación "Debe contener cifra" activada
El usuario debe introducir una contraseña que contenga al menos una cifra, sin importar
en qué posición.
– Campo "Longitud mínima de la contraseña"
El usuario debe introducir una contraseña que tenga una longitud mínima conforme al
número introducido en el campo "Longitud mínima de la contraseña".
La longitud mínima de la contraseña es de 3 caracteres.
Nota
Si se activa la opción "Debe contener caracteres especiales", el sistema restablece las
contraseñas de los usuarios ya creados. Por tanto, se recomienda activar siempre la opción
"Debe contener caracteres especiales" antes de crear usuarios.
Caracteres especiales permitidos en la contraseña:
-+.,/*:\"?_()=^!€%∼`§'{}[]<>#$;&|@

Consulte también
Configuración de la administración de usuarios (Página 1366)
Área de trabajo de usuarios (Página 1360)
Grupos de usuarios (Página 1361)
Área de trabajo de grupos de usuarios (Página 1362)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1365

Configurar una administración de usuarios
8.1 Principios básicos

8.1.8

Configuración de la administración de usuarios

Introducción
En el editor "Configuración de Runtime > Administración de usuarios" se configuran los ajustes
de seguridad para los usuarios y sus contraseñas en runtime.

Abrir
Haga doble clic en el editor "Configuración de runtime" en la ventana del proyecto. Haga clic
en "Administración de usuarios".

Área de trabajo
En el área de trabajo se realizan ajustes para la validez de las contraseñas en runtime. Así se
determina, p. ej., la complejidad de la contraseña.
Nota
Si la contraseña de un proyecto anterior ya no cumple la norma, se solicitará al usuario que
guarde una nueva contraseña.

1366

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.1 Principios básicos

Efectos en runtime
Dependiendo de la configuración, los ajustes de seguridad tienen los efectos siguientes en
runtime.
● Grupo "General"
– Casilla de verificación "Modificación contraseña inicial" activada
Al iniciar la sesión por primera vez, el usuario debe modificar la contraseña que le ha
asignado el administrador.
– Casilla de verificación "Cambiar tiempo de desconexión" activada
Para modificar el tiempo de cierre de sesión basta con tener derechos de usuario
simples.
El tiempo de cierre de sesión es el tiempo tras el cual la administración de usuarios
desconecta automáticamente a un usuario si no se ha realizado ninguna entrada en el
sistema.
El tiempo de cierre de sesión para un usuario de SIMATIC Logon equivale al del usuario
estándar "Administrador".
Si el usuario modifica el tiempo de cierre de sesión, ello se registrará en el Audit Trail.
– Casilla de verificación "Activar límite de intentos de inicio de sesión" activada
El número introducido en el campo "Intentos no válidos de inicio de sesión" determina
cuántos intentos de inicio de sesión puede realizar un usuario antes de ser asignado al
grupo "No autorizado".
Casilla de verificación "Activar límite de intentos de inicio de sesión" no activada
El usuario tiene en runtime un número ilimitado de intentos de inicio de sesión.
– Campo "Intentos no válidos de inicio de sesión"
Si se ha introducido un "4" en el campo, p. ej., y el cuarto intento de inicio de sesión del
usuario no da resultado, se asigna automáticamente al grupo "No autorizado".
Puede introducir entre 1 y 9 intentos.
– Casilla de verificación "Sólo es posible iniciar sesión con contraseña"
Si la casilla de verificación está activada, se realiza una autenticación de los usuarios
mediante la contraseña. El nombre de usuario no es necesario.
Por consiguiente, para que sea posible la asignación, no se debe asignar dos veces la
misma contraseña.
Nota
Si se activa la opción "Sólo es posible iniciar sesión con contraseña", el sistema
restablece las contraseñas de los usuarios ya creados. Por ello es aconsejable activar
la opción "Sólo es posible iniciar sesión con contraseña" siempre antes de crear
usuarios.
Si transfiere datos de usuario desde versiones anteriores del dispositivo en las que la
opción "Sólo es posible iniciar sesión con contraseña" estuviera desactivada, es posible
que se hayan guardado varios usuarios con contraseñas idénticas. Estos usuarios se
mostrarán en el visor de usuarios. Sin embargo, solo podrá iniciar sesión en Runtime el
usuario cuyo nombre aparezca en primer lugar en orden alfabético.
● Grupo "Nivel de jerarquía"

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1367

Configurar una administración de usuarios
8.1 Principios básicos
– Casilla de verificación "Activar derechos específicos de grupo para la administración de
usuarios"
Si esta casilla de verificación está activada, los administradores sólo gestionan a los
usuarios cuyo número de grupo es inferior o igual al suyo propio.
Un administrador cuyo número de grupo sea 5, p. ej., solo podrá administrar usuarios
cuyo número de grupo sea menor o igual a 5. Es decir, el administrador solo podrá
asignar a grupos los usuarios que tengan un número de grupo menor o igual a 5.
● Grupo "Contraseña"
– Casilla de verificación "Activar caducidad de la contraseña" activada
La contraseña caduca al cabo del número de días indicado en el campo "Vigencia de la
contraseña (días)".
En el editor "Grupos de usuarios" se activará también la columna "Caducidad de la
contraseña". Con ello se determina para cada grupo en particular si caducan las
contraseñas y si deben guardarse generaciones de contraseñas. Si la caducidad de la
contraseña no se ha activado para un grupo, sus contraseñas no caducarán nunca.
– Campo "Tiempo de advertencia (días)"
Se informa al usuario de que su contraseña caducará al cabo del número de días
indicado en este campo.
– Campo "Generaciones de contraseña"
Cuando el usuario modifique su contraseña, esta deberá diferenciarse del número de
contraseñas anteriores indicado en este campo. El número posible de generaciones de
contraseñas está comprendido entre 1 y 5.

1368

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.1 Principios básicos
● Grupo "Complejidad de la contraseña"
– Casilla de verificación "Debe contener caracteres especiales" activada
El usuario debe introducir una contraseña que contenga al menos un carácter especial,
sin importar en qué posición.
– Casilla de verificación "Debe contener cifra" activada
El usuario debe introducir una contraseña que contenga al menos una cifra, sin importar
en qué posición.
– Campo "Longitud mínima de la contraseña"
El usuario debe introducir una contraseña que tenga una longitud mínima conforme al
número introducido en el campo "Longitud mínima de la contraseña".
La longitud mínima de la contraseña es de 3 caracteres.
Nota
Si se activa la opción "Debe contener caracteres especiales", el sistema restablece las
contraseñas de los usuarios ya creados. Por tanto, se recomienda activar siempre la
opción "Debe contener caracteres especiales" antes de crear usuarios.
Caracteres especiales permitidos en la contraseña:
-+.,/*:\"?_()=^!€%∼`§'{}[]<>#$;&|@
● Grupo "SIMATIC Logon"
– Casilla de verificación "Activar SIMATIC Logon" activada
Se establece una conexión con el servidor. La autorización se lleva a cabo vía SIMATIC
Logon.
– Casilla de verificación "Transferencia encriptada" activada
Los datos se transfieren de forma encriptada al servidor.

Consulte también
Administración de usuarios central con SIMATIC Logon (Página 1381)
Usuarios (Página 1359)
Área de trabajo de usuarios (Página 1360)
Grupos de usuarios (Página 1361)
Área de trabajo de grupos de usuarios (Página 1362)
Configuración de la administración de usuarios (Página 1363)
Configuración de la administración de usuarios (Página 1370)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1369

Configurar una administración de usuarios
8.1 Principios básicos

8.1.9

Configuración de la administración de usuarios

Introducción
En el editor "Configuración de runtime > Administración de usuarios" se determina si los
usuarios inician sesión dinámicamente en runtime en un panel de operador. También se puede
activar una administración de usuarios central vía SIMATIC Logon.

Abrir
Haga doble clic en el editor "Configuración de runtime" en la ventana del proyecto. Haga clic
en "Administración de usuarios".
Nota
La vista del área de trabajo depende del tipo de panel de operador.

Área de trabajo
En el área de trabajo se determina cómo ha de iniciar sesión un operador en el panel de
operador:
● Inicio de sesión dinámico
En el inicio de sesión dinámico se le asigna una variable a cada panel de operador. Un valor
de variable es asignado a un usuario. El usuario inicia sesión en runtime activando el valor
de variable en un panel de operador, p. ej. a través de un interruptor de llave.
● SIMATIC Logon
En caso de utilizar SIMATIC Logon, defina el nombre de visualización que debe mostrarse
en el panel de operador. SIMATIC Logon soporta una administración de usuarios central.
Tan pronto como active la opción "SIMATIC Logon", serán ignorados los usuarios creados
en el editor "Administración de usuarios". El área de trabajo "Usuarios" se suprime.
Únicamente aquellos grupos, cuyos ajustes concuerden en el nombre con los grupos de
Windows, son de relevancia.
Nota
En caso de utilizar SIMATIC Logon , no se puede utilizar la opción "Inicio de sesión
automático".

Efectos en runtime
En el inicio de sesión dinámico el usuario se conecta en el panel de operador tan pronto como
la variable obtenga el valor correcto.
El tiempo de cierre de sesión automático ajustado no afecta a los usuarios que inicien sesión
con una variable de inicio de sesión.
En SIMATIC Logon el operador inicia sesión en el sistema operativo. Los ajustes de usuario,
p. ej., la validez de la contraseña, son leídos por SIMATIC Logon en la administración de
usuarios del sistema operativo.

1370

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.1 Principios básicos

Consulte también
Configuración de la administración de usuarios (Página 1366)
Área de trabajo de usuarios (Página 1360)
Grupos de usuarios (Página 1361)
Área de trabajo de grupos de usuarios (Página 1362)
Iniciar una sesión de usuario dinámica (Página 1380)
Administración de usuarios central con SIMATIC Logon (Página 1381)

8.1.10

Grupos objetivo en la administración de usuarios

Principio
Los grupos objetivo son ejemplos de diferentes grupos de personas que trabajan con la
administración de usuarios. En la administración de usuarios se distinguen cuatro grupos
objetivo:
1. Administrador OEM
2. Administrador RT
3. Ingeniero
4. Operador
El administrador OEM crea, p. ej., los grupos de usuarios, los usuarios y los permisos para
runtime en el sistema de ingeniería del fabricante de máquinas.
El administrador RT administra usuarios en el "Visor de usuarios" de runtime.
El ingeniero asigna los permisos a los grupos de usuarios en el sistema de ingeniería.
Asimismo, configura permisos en los objetos.
El operador inicia la sesión en runtime. Solo puede acceder a un objeto protegido si dispone
del permiso necesario.
Nota
El grupo destinatario Administrador RT ya existe en la administración de usuarios de runtime
con el nombre "Grupo de administradores". De ahora en adelante y para una mejor
comprensión no se utilizarán los permisos y grupos de usuarios predefinidos.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1371

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios

8.2

Estructurar la administración de usuarios

8.2.1

Administrar usuarios para runtime

8.2.1.1

Crear una autorización

Introducción
Una autorización se crea y se asigna a uno o varios grupos de usuarios.

Requisitos
El área de trabajo "Grupos de usuarios" está abierta.

Procedimiento
1. Haga doble clic en "Agregar" en la tabla "Autorizaciones".
2. Introduzca "Salir de runtime" como nombre de la autorización.
3. Introduzca una descripción breve en "Comentario".

Consulte también
Crear un grupo de usuarios (Página 1372)
Administrar grupos de usuarios (Página 1378)
Cambiar el número del grupo de usuarios (Página 1379)

8.2.1.2

Crear un grupo de usuarios

Introducción
Para no tener que asignar una autorización a cada usuario, cree grupos de usuarios. Cree un
grupo de usuarios y asígnele autorizaciones y usuarios.
Nota
El nombre del grupo de usuarios debe ser unívoco dentro del proyecto. En caso contrario, la
entrada no se aceptará.

1372

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios

Nota
Utilización del SIMATIC Logon
Asegúrese de que los nombres de los grupos de usuarios concuerden exactamente en
Windows y WinCC.

Requisitos
El área de trabajo "Grupos de usuarios" está abierta.

Procedimiento
1. Haga doble clic en "Agregar" en la tabla "Grupos".
2. Introduzca "Operadores" como "Nombre" del grupo de usuarios.
3. En caso necesario, modifique el "Número" del grupo de usuarios.
4. Introduzca "Operadores" como "Nombre de visualización" del grupo de usuarios.
5. Introduzca una descripción breve en "Comentario".
El visor de usuarios muestra en runtime el nombre de visualización del grupo de usuarios. El
nombre de visualización del grupo de usuarios depende del idioma. Configure el nombre en
varios idiomas y cambie de idioma en runtime.

Consulte también
Crear una autorización (Página 1372)

8.2.1.3

Crear un grupo de usuarios

Introducción
Para no tener que asignar una autorización a cada usuario, cree grupos de usuarios. Cree un
grupo de usuarios y asígnele autorizaciones y usuarios.
Nota
Utilización del SIMATIC Logon
Asegúrese de que los nombres de los grupos de usuarios concuerden exactamente en
Windows y WinCC.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1373

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios

Nota
El nombre del grupo de usuarios debe ser unívoco dentro del proyecto. En caso contrario, la
entrada no se aceptará.

Requisitos
El área de trabajo "Grupos de usuarios" está abierta.

Procedimiento
1. Haga doble clic en "Agregar" en la tabla "Grupos".
2. Introduzca "Operadores" en el nombre del grupo de usuarios.
3. En caso necesario, modifique el "Número" del grupo de usuarios.
4. Introduzca una descripción breve en "Comentario".

8.2.1.4

Asignar una autorización

Introducción
Cuando se asigna una autorización a un grupo de usuarios, todos los usuarios del grupo
tendrán está autorización.

Requisitos
● Se ha creado la autorización "Salir de runtime".
● Un grupo de usuarios "Operadores" está creado.
● El área de trabajo "Grupos de usuarios" está abierta.

Procedimiento
1. En la tabla "Grupos", haga clic en el grupo de usuarios "Operadores". La tabla
"Autorizaciones" muestra todas las autorizaciones.
2. En la tabla "Autorizaciones", active la autorización "Salir de runtime".
Nota
La autorización "Salir de runtime" es solo una denominación y no hace referencia a la
función "PararRuntime". Esta relación debe crearse a parte. Para ello, configure en un
botón la función de sistema "PararRuntime" y seleccione como autorización "Salir de
runtime".

1374

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios

8.2.1.5

Crear un usuario

Introducción
Un usuario se crea para que las personas puedan iniciar una sesión en runtime con su nombre
de usuario tras la carga en el panel de operador.
Alternativamente, pueden crearse y modificarse usuarios en runtime mediante el "Visor de
usuarios".
Nota
Válido solo para Runtime Professional:
Los usuarios nuevos que deban acceder al sistema mediante un cliente web o un cliente
WebUX solo pueden crearse en el sistema de ingeniería.
Si se crea un usuario en runtime con el visor de usuarios, no se podroá asignar una imagen
inicial de la web a este usuario. Por lo tanto, este usuario no estará habilitado para accesos a
la web.
En runtime tampoco se conceden derechos de acceso a la web a usuarios existentes.
Para que un usuario tenga autorizaciones debe asignarse a un grupo de usuarios que, a su
vez, debe tener autorizaciones asignadas.
La sesión se inicia correctamente si el nombre de usuario entrado coincide con un usuario de
runtime. Asimismo, la contraseña introducida debe coincidir con la contraseña guardada del
usuario.
Nota
Observe el uso de mayúsculas y minúsculas.

Requisitos
El área de trabajo "Usuarios" está abierta.

Procedimiento
1. Haga doble clic en "Agregar" en la tabla "Usuarios".
2. Introduzca el nombre de usuario "Maestro".
Nota
El nombre de usuario debe ser unívoco dentro del proyecto. En caso contrario, la entrada
no se aceptará.
Nota
Cuando introduzca un nombre de usuario y una contraseña, no utilice caracteres
especiales como / " § $ % ? ' &.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1375

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios
3. En la columna "Contraseña", haga clic en el botón
introducir la contraseña.

. Se abre un cuadro de diálogo para

4. Introduzca la contraseña del usuario.
5. Vuelva a introducir la contraseña en el campo de confirmación situado debajo.
6. Cierre el cuadro de diálogo con el símbolo

.

7. Si la sesión del usuario debe cerrarse pasado un tiempo determinado, active "Cierre de
sesión automático".
8. Haga clic en la columna "Tiempo de cierre de sesión". El "Tiempo de cierre de sesión"
predeterminado es de 5 minutos.
9. Introduzca una descripción breve en "Comentario".

8.2.1.6

Asignar un usuario a un grupo de usuarios

Introducción
Cuando se asigna un usuario a un grupo de usuarios, tendrá las autorizaciones del grupo de
usuarios.
Nota
Un usuario sólo puede asignarse a un grupo de usuarios. Al verificar la consistencia y compilar
el proyecto se comprueba la asignación.

Requisitos
● El usuario "Maestro" está creado.
● Un grupo de usuarios "Operadores" está creado.
● El área de trabajo "Usuarios" está abierta.

Procedimiento
1. En la tabla "Usuarios", haga clic en el usuario "Maestro". La tabla "Grupos" muestra todos
los grupos de usuarios.
2. En la tabla "Grupos", active el grupo de usuarios "Operadores".

8.2.1.7

Administrar usuarios

Introducción
En la vista se administran los usuarios y se asignan los grupos.

1376

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios

Requisitos
El área de trabajo "Usuarios" está abierta.

Cambiar nombre de usuario
1. En la columna "Nombre" de la tabla "Usuarios" haga doble clic en el campo del nombre a
cambiar.
2. Cambie el nombre de usuario.
3. Confirme con la tecla <Intro>.
Opcionalmente, seleccione el usuario en el área de trabajo. Modifique el nombre de usuario en
la ventana de inspección "Propiedades > Propiedades > General".

Modificar la contraseña de usuario
1. En la columna "Contraseña" de la tabla "Usuarios", haga clic en el botón
cuadro de diálogo para introducir la contraseña.

. Se abrirá un

2. Introduzca la nueva contraseña en el campo "Introducir contraseña".
3. Vuelva a introducir la nueva contraseña en el campo "Confirmar contraseña".
4. Confirme con la tecla <Intro>.
Opcionalmente, seleccione el usuario en el área de trabajo. Modifique la contraseña en la
ventana de inspección "Propiedades > Propiedades > General".

Visualizar columnas no visibles
1. Mueva el puntero del ratón hacia el encabezado de la tabla "Usuarios".
2. Abra el menú contextual con el botón derecho del ratón y active la vista de la columna
"Tiempo de cierre de sesión", p. ej.

Modificar el tiempo de cierre de sesión del usuario
1. Hacer doble clic en la columna "Tiempo de cierre de sesión" del área "Usuario" que se
encuentra en el campo del nombre a cambiar.
2. Modifique el tiempo de cierre de sesión.
3. Confirme con la tecla <Intro>.
Opcionalmente, seleccione el usuario en el área de trabajo. Modifique el tiempo de cierre de
sesión en la ventana de inspección "Propiedades > Propiedades > Cierre de sesión
automático".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1377

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios

Borrar un usuario
1. Seleccione la fila del usuario que debe borrarse.
2. Abra el menú contextual con el botón derecho del ratón y seleccione el comando "Borrar".
Nota
Los usuarios predefinidos no pueden borrarse.

8.2.1.8

Administrar grupos de usuarios

Introducción
En el área de trabajo se administran grupos de usuarios y se asignan autorizaciones para la
utilización en runtime.

Requisitos
El área de trabajo "Grupos de usuarios" está abierta.

Cambiar el nombre del grupo de usuarios
1. En la columna "Nombre" de la tabla "Grupos" haga doble clic en el campo del nombre de
grupo a cambiar.
2. Cambie el nombre del grupo de usuarios.
3. Confirme con la tecla <Return>.
Opcionalmente, seleccione el grupo de usuarios en el área de trabajo. Modifique el nombre en
la ventana de inspección "Propiedades > Propiedades > General".
Nota
Los grupos de usuarios predefinidos no pueden borrarse.

Visualizar columnas no visibles
1. Mueva el puntero del ratón hacia el encabezado de la tabla "Grupos".
2. Abra el menú contextual con el botón derecho del ratón y active la vista de la columna
"Nombre de visualización", p. ej.

Modificar el nombre de visualización del grupo de usuarios
1. En la columna "Nombre de visualización" de la tabla "Grupos" haga doble clic en el campo
del nombre de visualización a cambiar.
2. Cambie el nombre de visualización del grupo de usuarios.
3. Confirme con la tecla <Return>.

1378

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios
Opcionalmente, seleccione el grupo de usuarios en el área de trabajo. Modifique el nombre de
visualización en la ventana de inspección "Propiedades > Propiedades > General".

Borrar un grupo de usuarios
1. Seleccione la fila del grupo de usuarios que debe borrarse.
2. Abra el menú contextual con el botón derecho del ratón y seleccione el comando "Borrar".
Nota
Los grupos de usuarios predefinidos no pueden borrarse.

Cambiar el nombre de la autorización
1. En la columna "Nombre" de la tabla "Autorizaciones" haga doble clic en el campo del
nombre a cambiar.
2. Cambie el nombre de la autorización.
3. Confirme con la tecla <Return>.
Opcionalmente, seleccione la autorización en el área de trabajo. Modifique el nombre en la
ventana de inspección "Propiedades > Propiedades > General".

Borrar una autorización
1. Seleccione la fila de la autorización que debe borrarse.
2. Abra el menú contextual con el botón derecho del ratón y seleccione el comando "Borrar".
Nota
Las autorizaciones predefinidas no pueden borrarse.

Consulte también
Crear una autorización (Página 1372)

8.2.1.9

Cambiar el número del grupo de usuarios

Introducción
Para asignar derechos específicos de grupo, edite el número de un grupo de usuarios.

Requisitos
● En el editor "Configuración de runtime > Administración de usuarios" está activado
"Derechos específicos de grupo para la administración de usuarios".
● El grupo de usuarios "Operadores" está creado.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1379

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios
● Se ha creado una autorización "Administración de usuarios".
● El área de trabajo "Grupos de usuarios" está abierta.

Procedimiento
1. En la tabla "Grupos", haga clic en el grupo de usuarios "Operadores".
2. En la columna "Número" del grupo de usuarios, introduzca "6".
3. En la tabla "Autorizaciones" active la autorización "Administración de usuarios".

Resultado
Los miembros del grupo de usuarios "Operadores" sólo pueden gestionar los usuarios cuyo
número de grupo sea inferior o igual a 6.

Consulte también
Crear una autorización (Página 1372)

8.2.1.10

Iniciar una sesión de usuario dinámica

Introducción
Para hacer posible un "Inicio de sesión dinámico", se requieren dos pasos de configuración:
1. Asígnele a una variable configurada un panel de operador.
2. Asígnele a un usuario un valor de variable determinado.
Nota
Si SIMATIC Logon está activado, no es posible un inicio de sesión dinámico.

Requisitos
● Tiene que existir una administración de usuarios.
● Se deberá haber creado una variable "Login" del tipo "Byte".

Procedimiento
Asignación panel de operador - variable
1. Haga doble clic en "Configuración de runtime > Administración de usuarios" de la ventana
del proyecto.
2. En el área "Inicio de sesión dinámico", haga doble clic en la tabla en "Agregar".
3. En la columna "Panel de operador", haga clic en el botón
para seleccionar el panel de operador.

1380

. Se abre un cuadro de diálogo

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios
4. Seleccione un panel de operador.
5. En la columna "Variable", haga clic en el botón
seleccionar la variable.

. Se abre un cuadro de diálogo para

6. Seleccione la variable "Login".
Asignación usuario - valor de variable
1. Abra el área de trabajo "Usuarios".
2. Mueva el puntero del ratón hacia el encabezado de la tabla "Usuarios".
3. Abra el menú contextual con el botón derecho del ratón y active la vista de las columnas
"Inicio de sesión dinámico" e "Identificación de usuario".
4. Haga doble clic en "Agregar" en la tabla "Usuarios".
5. Introduzca el nombre de usuario "Meier".
6. En la columna "Contraseña", haga clic en el botón
introducir la contraseña.

. Se abre un cuadro de diálogo para

7. Introduzca la contraseña del usuario.
8. Vuelva a introducir la contraseña en el campo de confirmación situado debajo.
9. Cierre el cuadro de diálogo con el símbolo

.

10.Active la columna "Inicio de sesión dinámico".

Resultado
Si la variable acepta el valor 1, el usuario "Meier" podrá iniciar sesión.
Nota
La variable utilizada debe ser del tipo "binario" o tener un valor de 8, 16 ó 32 bits.

8.2.2

Administrar usuarios en el servidor

8.2.2.1

Administración de usuarios central con SIMATIC Logon

Introducción
Para administrar de manera centralizada los usuarios y los grupos de usuarios para diferentes
aplicaciones o paneles de operador, active SIMATIC Logon.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1381

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios

Principio
SIMATIC Logon es una herramienta para administrar los usuarios en toda la instalación. En
caso de utilizar SIMATIC Logon los usuarios se administran de manera centralizada fuera de
la aplicación o del panel de operador.
Los grupos de usuarios y sus respectivas autorizaciones se configuran como de costumbre
desde la administración de usuarios local en WinCC. A los grupos de usuarios se les debe
asignar un nombre que sea idéntico en el servidor y en WinCC. Dado que los nombres son
idénticos, en runtime se le asigna una autorización al grupo de usuarios.
Por el contrario, no es necesario crear los usuarios en WinCC, puesto que el servidor los
adopta dinámicamente durante el inicio de sesión. La aplicación o el panel de operador
transfiere todo inicio de sesión o cambio de contraseña a SIMATIC Logon, donde se procesan.
Nota
Para SIMATIC Logon se requiere una licencia. Para más información acerca de SIMATIC
Logon, visite el sitio web <http://support.automation.siemens.com>.
En el campo de búsqueda, introduzca el ID "34519648" e inicie la búsqueda. El manual
"SIMATIC Logon - Electronic Signature" se puede descargar de Internet.

1382

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios

Inicio de sesión vía SIMATIC Logon Service
La figura siguiente muestra el proceso que se ejecuta automáticamente cuando un usuario
inicia la sesión en runtime.
La aplicación abre el cuadro de diálogo de inicio de sesión.
1.º Consulta: Login y contraseña
Cuadro de
diálogo
de inicio de
sesión

El usuario introduce los datos de inicio de sesión en el cuadro de diálogo.

<Login>
<Contraseña>
2.º Transferencia: Datos de inicio de sesión
Comprobar los datos de inicio de sesión
3.º Consulta: ¿El usuario es conocido en Windows?

Aplicaciones
que utilizan
funciones de
SIMATIC Logon

Comprobación de los datos de inicio de sesión
en el equipo local o en el dominio
4.º Autenticación del usuario
SIMATIC
Logon
Service

Determinar los datos del usuario:
5.º Consulta: ¿Qué datos del usuario
se conocen?

Sistema
operativo
Administración
de usuarios y
grupos

Transferencia de los datos de usuario:
6.º Transferencia:

Nombre de usuario completo,
pertenencias a grupos,
antigüedad de la contraseña

Comprobar y transferir los datos del usuario:
7.º Transferencia:

nombre de usuario completo
Pertenencias a grupos

8. Determinar los roles
9. Ajustar los derechos conforme al rol
Resultado: El usuario puede ejecutar las funciones del rol.

Consulte también
Configuración de la administración de usuarios (Página 1366)
Autenticación y tratamiento de certificados en SIMATIC Logon (Página 1384)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1383

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios

8.2.2.2

Autenticación y tratamiento de certificados en SIMATIC Logon

Introducción
SIMATIC Logon (a partir de V1.5 SP3) soporta conexiones de comunicación encriptadas
seguras con las siguientes familias de equipos a partir de la versión V13 SP1:
● Comfort Panels
● KTP Mobile Panels
● Runtime Advanced
Nota
Los paneles de operador con versión V13 o anterior solo pueden establecer una conexión no
encriptada no segura con un servidor de SIMATIC Logon.

Principios básicos
Al establecerse la conexión por primera vez, el certificado de SIMATIC Logon se sincroniza
con el certificado local del panel de operador. El certificado sincronizado se guarda en
"SimaticLogon\rejected". Si el certificado del servidor de SIMATIC Logon es de confianza,
cópielo en la memoria local de certificados.
La memoria de certificados se encuentra en la siguiente ruta:
● En el PC, normalmente se trata de "C:\Archivos de programa\Siemens\CoRtHmiRtm
\SimaticLogon\certs"
● En paneles HMI, en "\flash\simatic\SimaticLogon\certs"
Si la sincronización concluye con éxito, ya se puede establecer una conexión encriptada
segura.
Encontrará información adicional sobre navegadores probados en las páginas web de
Customer Support con la ID de artículo = 109480490:
● https://support.industry.siemens.com/cs/document/109480490/ (https://
support.industry.siemens.com/cs/ww/es/view/109480490)

Consulte también
Administración de usuarios central con SIMATIC Logon (Página 1381)

8.2.2.3

Realizar ajustes en el servidor

Introducción
Para garantizar la operación idónea de SIMATIC Logon es necesario realizar los pasos
siguientes en el servidor.

1384

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios

Procedimiento
1. Instale SIMATIC Logon Services.
2. Cree los grupos de usuarios en la administración de usuarios del sistema operativo.
3. Cree los usuarios en la administración de usuarios del sistema operativo.
Nota
Los usuarios de SIMATIC Logon deben ser miembros directos de un grupo de usuarios del
sistema operativo. Los miembros de un subgrupo no pueden darse de alta.
4. Asigne el nuevo usuario a un grupo.
5. Transfiera las licencias de cada panel de operador al servidor.
Nota
El procedimiento detallado se describe en la documentación de SIMATIC Logon adjunta.
Nota
Si se realiza una autorización con SIMATIC Logon, se aplican las reglas para contraseñas
registradas en el servidor.
Nota
El tiempo de cierre de sesión del usuario SIMATIC Logon puede configurarse en "Configurar
SIMATIC Logon" en el servidor.
El tiempo automático de cierre de sesión se configura para todos los usuarios
independientemente de los Panels.

8.2.2.4

Inicio de sesión vía SIMATIC Logon

Requisitos
● Tiene que existir una administración de usuarios.
● Los grupos creados en WinCC concuerdan con los grupos de Windows del servidor.
● Debe existir un servidor en el que esté instalado SIMATIC Logon Service.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1385

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios

Nota
Un usuario sólo puede pertenecer a un grupo de usuarios en WinCC. Si un usuario pertenece
a varios grupos en el servidor, sólo uno de éstos puede ser conocido en WinCC.
Los "Administradores" y "Usuarios" son grupos de usuarios predefinidos tanto en Windows
como en WinCC. Cuando se crea un nuevo usuario en Windows, éste pertenece
automáticamente al grupo "Usuarios". Si agrega el usuario a un nuevo grupo (p. ej. "Usuarios
SL"), el usuario pertenecerá a dos grupos.
Para que el usuario pueda iniciar la sesión vía SIMATIC Logon, quítelo del grupo "Usuarios"
del sistema operativo.
Un inicio de sesión correcto en el servidor se confirma siempre en runtime con un aviso de
sistema.

Nota
Si se utiliza SIMATIC Logon para administrar los accesos a un panel o un equipo con WinCC
Runtime Advanced, hay que tener en cuenta que no pueden emplearse los caracteres '/' y '\'
en los nombres de usuarios y grupos de usuarios de Windows.

Procedimiento
1. Abra el editor "Configuración de runtime > Administración de usuarios" en la ventana del
proyecto.
2. Active "Activar SIMATIC Logon".
3. Dependiendo de dónde administre sus usuarios, seleccione "Dominio de Windows" o
"Equipo Windows".
4. En el campo de texto "Nombre de servidor", introduzca el nombre o la dirección IP del
servidor de SIMATIC Logon.
Nota
Al utilizar direcciones IP, vigile que el servidor de SIMATIC Logon tenga siempre la misma
dirección IP.
5. En el campo "Número de puerto", introduzca el número de puerto de la comunicación TCP/
IP. El rango de valores admisible está comprendido entre 1024 y 49151. El número de
puerto predeterminado es "16389", siendo utilizado de forma estándar por el servidor de
SIMATIC Logon.

1386

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios
6. En el campo de texto "Dominio de Windows", introduzca el dominio de Windows o el
servidor de inicio de sesión con los datos de usuario.
Al acceder a usuarios del servidor de inicio de sesión, introduzca el nombre del servidor.
Si el servidor de inicio de sesión está en un dominio y Ud. desea acceder a los usuarios del
dominio, introduzca el nombre de éste último.
Nota
Si el servidor de inicio de sesión está en un dominio, no se aceptarán los usuarios de
Windows locales.
7. Active la casilla de verificación "Transferencia encriptada" si desea que los datos se
transfieran de forma encriptada al servidor.

Usuarios de emergencia
Si no se puede acceder al servidor, todos los usuarios locales que hayan sido creados en la
administración de usuarios de WinCC también se pueden utilizar como usuarios de
emergencia.
Los usuarios de emergencia tienen los derechos del grupo de usuarios al que están asignados.
Nota
Encontrará más información al respecto en la documentación de SIMATIC Logon adjunta.
Se encuentra en: [directorio de instalación de SIMATIC Logon] \manuals

8.2.2.5

Inicio de sesión vía SIMATIC Logon

Requisitos
● Tiene que existir una administración de usuarios.
● Los grupos creados en WinCC concuerdan con los grupos de Windows del servidor.
● Debe existir un servidor en el que esté instalado SIMATIC Logon Service.
Nota
Si un usuario pertenece a varios grupos, al usuario se le asigna la suma de las autorizaciones
del grupo. La sesión se puede iniciar.

Procedimiento
1. Haga doble clic en "Configuración de runtime" de la ventana del proyecto.
2. Haga doble clic en "Administración de usuarios" en el área de trabajo.
3. Active "SIMATIC Logon".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1387

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios

8.2.3

Administrar usuarios para cliente web

8.2.3.1

Administrar grupo de usuarios para cliente web

Introducción
Para cada grupo de usuarios que debe administrarse para los clientes web hay que configurar
lo siguiente:
● Una imagen inicial cualquiera activada para el acceso web
● Un idioma cualquiera
● Número de licencias reservadas (para WebUX)
De esta manera se le otorga a los usuarios acceso inmediato a las diferentes áreas de un
proyecto o bien no se les otorga acceso alguno.
Nota
El nombre del grupo de usuarios debe ser unívoco dentro del proyecto. En caso contrario, la
entrada no se aceptará.

Requisitos
● La imagen "Inicio" está creada y el acceso web está activado.
● El idioma de proyecto deseado está activado.
● Se ha creado el grupo de usuarios "Operadores web".

Procedimiento
1. En la ventana del proyecto, haga doble clic en el editor "Configuración de Runtime".
2. Haga clic en "Administración de usuarios".
3. En la ficha "Grupos de usuarios", seleccione el grupo de usuarios "Operadores web".
4. Haga clic en "Propiedades > Propiedades > Opciones web" en la ventana de inspección.
5. En "Ajustes WebNavigator", dentro de la lista de selección "Imagen inicial", haga clic en el
botón .
Se abre un cuadro de diálogo para seleccionar la imagen inicial.
6. Seleccione la imagen "Inicio" para Runtime.
7. Cierre el cuadro de diálogo con el icono

.

8. Para ajustar la imagen inicial para WebUX, repita los pasos 5 a 7.
9. Para configurar un idioma para el grupo de usuarios, haga clic en "Opciones", en la lista de
selección "Idioma de la web", en el botón
Se abre un cuadro de diálogo para seleccionar el idioma.
10.Seleccione el idioma deseado como idioma runtime del grupos de usuarios.

1388

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios
También puede realizar este ajuste mediante el menú contextual, activando las columnas
"Imagen inicial de WebNavigator", "Imagen inicial de WebUX" e "Idioma de la web" y aplicando
la configuración correspondiente.
Nota
El nombre del grupo de usuarios depende del idioma. Configure el nombre en varios idiomas
y cambie de idioma en runtime.

8.2.3.2

Administrar usuarios para cliente web

Introducción
Para cada usuario que deba iniciar sesión en el cliente web (WebNavigator o WebUX) hay que
configurar lo siguiente:
● Una imagen inicial cualquiera activada para el acceso web
● Un idioma cualquiera
● Número de licencias reservadas (para WebUX)
De esta manera se le otorga a los usuarios acceso inmediato a las diferentes áreas de un
proyecto o bien no se les otorga acceso alguno.
Nota
Los usuarios nuevos que deban acceder al sistema mediante un cliente web o un cliente
WebUX solo pueden crearse en el sistema de ingeniería.
Si se crea un usuario en runtime con el visor de usuarios, no se podrá asignar una imagen
inicial de la web a este usuario. Por lo tanto, este usuario no estará habilitado para accesos a
la web.
En runtime tampoco se conceden derechos de acceso a la web a usuarios existentes.

Requisitos
● La imagen "Inicio" está creada y el acceso web está activado.
● El idioma de proyecto deseado está activado.

Procedimiento
1. En la ventana del proyecto, haga doble clic en el editor "Configuración de Runtime".
2. Haga clic en "Administración de usuarios".
3. En la ficha "Usuarios", seleccione un usuario para el que desea establecer una
configuración.
4. Haga clic en "Propiedades > Propiedades > Opciones web" en la ventana de inspección.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1389

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios
5. En "Ajustes WebNavigator", dentro de la lista de selección "Imagen inicial", haga clic en el
botón .
Se abre un cuadro de diálogo para seleccionar la imagen inicial.
6. Seleccione la imagen "Inicio".
7. Cierre el cuadro de diálogo con el icono

.

8. Para ajustar la imagen inicial para WebUX, repita los pasos 5 a 7.
9. En "Número de licencias reservado" puede ajustar el número de licencias de WebUX
reservado para el usuario seleccionado con ayuda de los botones
Nota
Si se configuran más licencias reservadas de las que están disponibles en el servidor de
WebUX, solo se tendrán en cuenta los primeros usuarios que aparezcan en la
administración de usuarios.
Nota
Si está activada la opción "Utilizar licencias de WebNavigator para WebUX", no podrán
garantizarse licencias WebUX reservadas.
10.Para configurar un idioma para el usuario, haga clic en "Opciones", en la lista de selección
"Idioma de la web", en el botón
Se abre un cuadro de diálogo para seleccionar el idioma.
11.Seleccione el idioma deseado como idioma runtime del usuario web.
También puede realizar este ajuste mediante el menú contextual, activando las columnas
"Imagen inicial de WebNavigator", "Imagen inicial de WebUX", "Idioma de la web" y "Licencias
reservadas para WebUX" y aplicando la configuración correspondiente.
Nota
Aunque el usuario cambie de grupo, la configuración de idioma se mantendrá. La imagen
inicial, por el contrario, se sobrescribe.
Nota
De forma predeterminada se utilizan las licencias de WebNavigator para WebUX. Si desea
utilizar por separado estas licencias, desactive en "Configuración de runtime > Acceso web" la
casilla de verificación "Utilizar licencias de WebNavigator para WebUX".
Nota
Los usuarios también pueden cerrar la sesión del cliente WebNavigator manualmente con la
función ODK "PWRTLogout()". Encontrará una descripción de la función en la documentación
API de runtime en "Funciones de la administración de usuarios > Funciones para iniciar/cerrar
sesión".

1390

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios

8.2.4

Administrar usuarios en runtime

8.2.4.1

Usuarios en runtime

Principio
Se crean usuarios y grupos de usuarios y se les asignan autorizaciones. Los objetos se
configuran con autorizaciones. Después de la cargar en el panel de operador, todos los objetos
de runtime que han sido configurados con una autorización están protegidos contra accesos
no autorizados.

Visor de usuarios
Cuando se configura un visor de usuarios en el sistema de ingeniería, es posible administrar
usuarios en el visor de usuarios tras la carga en el panel de operador.
ATENCIÓN
Las modificaciones en el visor de usuarios de runtime son efectivas inmediatamente. Las
modificaciones en runtime no se actualizan en el sistema de ingeniería. Al cargar la
administración de usuarios en el panel de operador, se sobrescriben todas las modificaciones
del visor de usuarios previa consulta y en función de las opciones de carga seleccionadas.
Los usuarios que tienen la autorización "Administración de usuarios" pueden acceder sin
limitaciones al visor de usuarios. Desde allí se administran todos los usuarios. Los demás
usuarios sólo tienen un acceso restringido al visor de usuarios, donde pueden administrarse a
sí mismos.

Consulte también
Visor de usuarios (Página 1391)
Administrar usuarios con el visor de usuarios complejo (Página 1395)
Iniciar una sesión de usuario (Página 1399)

8.2.4.2

Visor de usuarios

Finalidad
Un visor de usuarios se configura en el sistema de ingeniería para administrar los usuarios
también en runtime.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1391

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios

Estructura
El visor de usuarios muestra lo siguiente en cada fila:
● El usuario
● Su contraseña codificada
● El grupo de usuarios correspondiente
● El tiempo de cierre de sesión
Si no hay ningún usuario conectado, el visor de usuarios está vacío. Tras iniciar la sesión se
visualizarán los contenidos de sendos campos.

Visor de usuarios de un administrador

Cuando un administrador está conectado, el visor de usuarios muestra todos los usuarios. El
administrador modifica el nombre del usuario y la contraseña. El administrador crea usuarios
nuevos y los asigna a un grupo de usuarios existentes.

Visor de usuarios de un usuario

Si no hay ningún administrador conectado, el visor de usuarios sólo muestra el usuario
conectado. El usuario puede modificar su contraseña y su tiempo de cierre de sesión.

Consulte también
Usuarios en runtime (Página 1391)
Iniciar una sesión de usuario (Página 1399)

1392

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios

8.2.4.3

Configurar el visor de usuarios

Introducción
Un visor de usuarios se configura en el sistema de ingeniería para administrar los usuarios
también en runtime.

Requisitos
Se ha creado una imagen.

Procedimiento
1. En la ventana de herramientas, seleccione el objeto "Visor de usuarios" de la categoría
"Controles".
2. Arrastre el objeto "Visor de usuarios" hasta la imagen con la función Drag&Drop.
3. En la ventana de inspección haga clic en "Propiedades > Propiedades".
4. Defina el aspecto del "Visor de usuarios".
5. Seleccione, por ejemplo, "Representación > Adaptación del tamaño > Adaptar objeto al
contenido".

Resultado
Se ha creado un visor de usuarios en la imagen.

Consulte también
Iniciar una sesión de usuario (Página 1399)

8.2.4.4

Crear un usuario

Introducción
Un usuario se crea para que las personas puedan iniciar una sesión en runtime con su nombre
de usuario.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1393

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios
Alternativamente pueden crearse usuarios en el sistema de ingeniería y cargarlos en el panel
de operador.
Nota
Válido solo para Runtime Professional:
Los usuarios nuevos que deban acceder al sistema mediante un cliente web o un cliente
WebUX solo pueden crearse en el sistema de ingeniería.
Si se crea un usuario en runtime con el visor de usuarios, no se podroá asignar una imagen
inicial de la web a este usuario. Por lo tanto, este usuario no estará habilitado para accesos a
la web.
En runtime tampoco se conceden derechos de acceso a la web a usuarios existentes.
La sesión sólo se inicia correctamente si el nombre de usuario entrado coincide con un usuario
de runtime. Asimismo, la contraseña introducida al iniciar sesión debe coincidir con la del
usuario.
Nota
Observe el uso de mayúsculas y minúsculas.

Nota
Cuando introduzca un nombre de usuario y una contraseña, no utilice caracteres especiales
como / " § $ % ? ' &.
El usuario se asigna a un grupo de usuarios. A continuación, el usuario tendrá las
autorizaciones del grupo de usuarios.
Nota
En runtime debe asignarse un usuario a un grupo de usuarios. El grupo de usuarios se crea en
el sistema de ingeniería. La denominación del grupo de usuarios depende del idioma.

Requisitos
● El visor de usuarios está abierto.
● Un grupo de usuarios "Group 2" está creado.

Procedimiento
1. En el visor de usuarios, haga clic en <Nuevo usuario>. Se abre un cuadro de diálogo.
2. Introduzca el nombre de usuario "Maestro".
3. Pulse la tecla <Intro>.

1394

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios
4. Haga clic en "Contraseña".
5. Introduzca la contraseña del usuario.
6. Pulse la tecla <Intro>. La contraseña no es visible.
7. Haga clic en la columna "Grupo".
8. Seleccione el grupo "Group 2".

9. Pulse la tecla <Intro>.
10.Haga clic en la columna "Tiempo de cierre de sesión".
11.Introduzca el tiempo tras el cual se cerrará automáticamente la sesión del usuario.

Consulte también
Iniciar una sesión de usuario (Página 1399)

8.2.4.5

Administrar usuarios con el visor de usuarios complejo

Introducción
En caso de haber configurado un visor de usuarios en el sistema de ingeniería, es posible
administrar los usuarios y los grupos de usuarios en runtime.
Nota
Las modificaciones en el visor de usuarios de runtime son efectivas inmediatamente. Las
modificaciones en runtime no se actualizan en el sistema de ingeniería. Al cargar la
administración de usuarios en el panel de operador, se sobrescriben todas las modificaciones
del visor de usuarios previa consulta y en función de las opciones seleccionadas.

Requisitos
● Runtime activado.
● Se ha creado un visor de usuarios complejo.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1395

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios
● Está abierta la imagen con el visor de usuarios.
● Tiene el permiso predeterminado "Administración de usuarios".
Nota
Si no tiene el permiso "Administración de usuarios", sólo podrá modificar su propia
contraseña y su tiempo de cierre de sesión.

Cambiar nombre de usuario
1. Introduzca un nuevo nombre de usuario en la columna "Usuarios" del visor de usuarios.
2. Confirme con la tecla <Intro>.
Nota
El usuario no podrá volver a iniciar sesión en runtime con su antiguo nombre. Si borra el
nombre y pulsa la tecla <Intro> se borrará el usuario.

Modificar la contraseña del usuario
La disponibilidad del visor de usuarios complejo depende del dispositivo.
1. Introduzca una nueva contraseña en la columna "Contraseña" del visor de usuarios.
2. Confirme con la tecla <Intro>.
Nota
El usuario ya no podrá iniciar sesión en runtime con su antigua contraseña.
Si borra la contraseña con <Intro> en el visor de usuarios complejo, se borrará el usuario.

Modificar el tiempo de cierre de sesión del usuario
1. Introduzca un nuevo tiempo de cierre de sesión en la columna "Tiempo de cierre de sesión"
del visor de usuarios.
2. Confirme con la tecla <Intro>.

Borrar un usuario
1. Haga clic en el nombre del usuario que debe borrarse.
2. Borre el nombre.
3. Pulse la tecla <Intro>.
Nota
El usuario no podrá volver a iniciar una sesión en runtime.

1396

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios

Asignar un usuario a otro grupo de usuarios
1. Activar el campo Grupo de usuarios para el usuario correspondiente.
2. Seleccione un grupo de usuarios.
3. Confirme la selección con la tecla <Intro>.

Consulte también
Usuarios en runtime (Página 1391)
Iniciar una sesión de usuario (Página 1399)

8.2.4.6

Desbloquear usuarios bloqueados

Desbloquear usuarios bloqueados
En los "Ajustes de runtime > Administración de usuarios" está activada la casilla de verificación
"Activar límite de intentos de inicio de sesión"
En el campo "Intentos de inicio de sesión no válidos" aparece el número 3.
Si un usuario hace tres intentos fallidos de iniciar una sesión (p. ej., al introducir una contraseña
errónea), será asignado al grupo "No autorizado". En este caso, el usuario perderá todas las
autorizaciones. Aunque todavía puede iniciar la sesión, ya no tendrá ninguna autorización.
Sólo un usuario con derechos de administrador puede vuelve a asignar el usuario no
autorizado a un grupo.

Consulte también
Iniciar una sesión de usuario (Página 1399)

8.2.4.7

Iniciar una sesión de usuario

Introducción
Normalmente, una sesión de usuario se inicia con un botón especial. Entonces aparece el
cuadro de diálogo de inicio de sesión.
El cuadro de diálogo de inicio de sesión aparece por defecto al acceder a un objeto protegido
si:
● No se ha iniciado ninguna sesión de usuario en runtime
● El usuario que ha iniciado la sesión no posee la autorización necesaria.
Nota
En los Basic Panels aparece siempre el cuadro de diálogo de inicio de sesión cuando se
maneja una tecla con protección de acceso.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1397

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios

Requisitos
● En "Ajustes de runtime > Administración de usuario"
– está activada la casilla de verificación "Activar límite de intentos de inicio de sesión".
– aparece el número 3 en el campo "Intentos de inicio de sesión no válidos".
● La función de sistema "MostrarDiálogoIniciarSesion" está configurada en un botón con el
título "Inicio de sesión".

Procedimiento
1. Haga clic en el botón "Logon". Aparecerá el cuadro de diálogo de inicio de sesión.

2. Introduzca su nombre de usuario, que debe ser idéntico al asignado en la administración de
usuarios, p. ej. "Maestro".
Si antes de usted se ha conectado otro usuario, se visualizará su nombre.
3. Introduzca la contraseña correspondiente. La entrada se mantiene oculta.
Nota
Al introducir la contraseña, tenga en cuenta las mayúsculas y minúsculas.
4. Cierre el cuadro de diálogo con el botón "Aceptar".
Nota
Cuando se cambia de panel de operador, no es necesario volver a introducir la contraseña si
esta contiene los caracteres especiales permitidos en todos los paneles de operador.
Caracteres especiales permitidos en la contraseña:
()€&@$%+#^[]|*-"<>!,.;:/_=\'? `~{}$
Si se cambia a la versión V14 desde una versión de panel anterior y se han utilizado caracteres
especiales no permitidos para la contraseña, esta se borrará. Se le informará de ello con un
mensaje de error y deberá guardar una nueva contraseña.

1398

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios

Inicio de sesión correcto
Si ha introducido el nombre de usuario "Maestro" y la contraseña introducida coincide con la
guardada, se iniciará una sesión del usuario "Maestro" en runtime. Tiene la autorización del
usuario "Maestro".
El acceso a un objeto protegido, p. ej. el botón "Archivar", sólo se permitirá si el usuario
"Maestro" dispone de la autorización necesaria. La acción configurada se ejecutará
inmediatamente.
Si la próxima conexión es correcta pero no dispone de la autorización necesaria, aparecerá un
aviso de error al respecto. De todas formas, seguirá conectado en runtime.

Inicio de sesión incorrecto
Aparecerá un aviso de error.
Por motivos de seguridad, usted o el usuario conectado previamente ya no tendrá ninguna
autorización. De todas formas, podrá acceder a objetos no protegidos, aunque el visor de
usuarios no mostrará ninguna entrada. El visor de usuarios y las autorizaciones cambian en el
próximo inicio de sesión correcto.
Si el tercer intento de inicio de sesión no ha dado resultado, el usuario se asigna al grupo
predefinido "No autorizado". Por tanto, no configure ningún grupo de usuarios con ese
nombre.
El usuario será desconectado cuando se llame la función "Cerrar sesión" o cuando haya
transcurrido el tiempo de cierre de sesión del usuario.

Consulte también
Iniciar una sesión de usuario (Página 1399)

8.2.4.8

Iniciar una sesión de usuario

Introducción
Normalmente, una sesión de usuario se inicia con un botón especial. Entonces aparece el
cuadro de diálogo de inicio de sesión.
El cuadro de diálogo de inicio de sesión aparece por defecto al acceder a un objeto protegido
si:
● No se ha iniciado ninguna sesión de usuario en runtime
● El usuario que ha iniciado la sesión no posee la autorización necesaria.

Requisitos
● La función de sistema "MostrarDialogoIniciarSesion" está configurada en un botón con el
título "Inicio de sesión".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1399

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios

Procedimiento
1. Haga clic en el botón "Logon". Aparecerá el cuadro de diálogo de inicio de sesión.

2. Introduzca su nombre de usuario, que debe ser idéntico al asignado en la administración de
usuarios, p. ej. "Maestro".
Si antes de usted se ha conectado otro usuario, se visualizará su nombre.
3. Introduzca la contraseña correspondiente. La entrada se mantiene oculta.
4. Cierre el cuadro de diálogo con el botón "Aceptar".

Inicio de sesión correcto
Si ha introducido el nombre de usuario "Maestro" y la contraseña introducida coincide con la
guardada, se iniciará una sesión del usuario "Maestro" en runtime. Tiene la autorización del
usuario "Maestro".
El acceso a un objeto protegido, p. ej. el botón "Archivar", sólo se permitirá si el usuario
"Maestro" dispone de la autorización necesaria. La acción configurada se ejecutará
inmediatamente.
Si la próxima conexión es correcta pero no dispone de la autorización necesaria, aparecerá un
aviso de error al respecto. De todas formas, seguirá conectado en runtime.

Inicio de sesión incorrecto
Aparecerá un aviso de error.
Por motivos de seguridad, usted o el usuario conectado previamente ya no tendrá ninguna
autorización. De todas formas, podrá acceder a objetos no protegidos, aunque el visor de
usuarios no mostrará ninguna entrada. El visor de usuarios y las autorizaciones cambian en el
próximo inicio de sesión correcto.
El usuario será desconectado cuando se llame la función "Cerrar sesión" o cuando haya
transcurrido el tiempo de cierre de sesión del usuario.

Consulte también
Usuarios en runtime (Página 1391)
Visor de usuarios (Página 1391)

1400

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios
Configurar el visor de usuarios (Página 1393)
Crear un usuario (Página 1393)
Administrar usuarios con el visor de usuarios complejo (Página 1395)
Desbloquear usuarios bloqueados (Página 1397)
Iniciar una sesión de usuario (Página 1397)
Exportar la administración de usuarios (Página 1401)
Importar administración de usuarios (Página 1402)

8.2.4.9

Exportar la administración de usuarios

Introducción
Los usuarios y grupos de usuarios se transfieren del sistema de ingeniería al panel de
operador. Si ha configurado un visor de usuarios, este permite administrar los usuarios en el
panel de operador.
Si un usuario accede a varios paneles de operador, este usuario debe existir en todos los
paneles de operador con el mismo nombre y la misma contraseña. Actualice la administración
de usuarios de los diferentes paneles de operador. Exporte los usuarios y contraseñas de un
panel de operador a un medio de almacenamiento, p. ej., un disquete, una tarjeta de memoria
o una unidad de red. Importe los usuarios y contraseñas de este medio de almacenamiento en
todos los demás paneles de operador.
Configure en un botón una función que exporte los datos de los usuarios.
La función del sistema "ExportarImportarAdministraciónDeUsuarios" no está disponible en
todos los paneles de operador.
ATENCIÓN
Al exportar, los datos de los usuarios del panel de operador se codificarán y se grabarán en
el archivo de destino. El archivo de destino se sobrescribirá.

Requisitos
● Se ha creado un panel de operador.
● Se ha creado una imagen.
● Se ha creado un botón en la imagen.
● La ventana de inspección está abierta.

Procedimiento
1. Haga clic en el botón de la imagen.
2. En la ventana de inspección haga clic en "Propiedades > Eventos > Hacer clic".
3. En la lista de funciones, haga clic en la entrada "Agregar función".
Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1401

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios
4. Seleccione la función de sistema "ExportarImportarAdministraciónDeUsuarios".
5. Seleccione la dirección "Exportación". Al exportar, el archivo de destino se sobrescribirá
con los datos de los usuarios.
6. En "Nombre de archivo" introduzca la ruta completa del archivo de destino, p. ej. "a:\test
\usersview.txt".
Nota
Asegúrese de escribir correctamente el nombre del archivo. Si la carpeta "\test\" no existe,
se creará sin consulta previa.

Consulte también
Iniciar una sesión de usuario (Página 1399)

8.2.4.10

Importar administración de usuarios

Introducción
Si un usuario accede a varios paneles de operador, este usuario debe existir en todos los
paneles de operador con el mismo nombre y la misma contraseña. Actualice la administración
de usuarios de los diferentes paneles de operador. Exporte los usuarios y contraseñas de un
panel de operador a un medio de almacenamiento, p. ej., un disquete, una tarjeta de memoria
o una unidad de red. Importe los usuarios y contraseñas de este medio de almacenamiento en
todos los demás paneles de operador.
Configure en un botón una función que importe los datos de los usuarios.
La función del sistema "ExportarImportarAdministraciónDeUsuarios" no está disponible en
todos los paneles de operador.
ATENCIÓN
Al importar, los datos de los usuarios se leerán del archivo de origen y se grabarán en el panel
de operador. Los usuarios y contraseñas vigentes en el panel de operador se sobrescribirán.
Los usuarios y contraseñas importados son válidos inmediatamente.

Requisitos
● Se ha creado una imagen.
● Se ha creado un botón en la imagen.
● La ventana de inspección está abierta.

Procedimiento
1. Haga clic en el botón de la imagen.
2. En la ventana de inspección haga clic en "Propiedades > Eventos > Hacer clic".

1402

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.2 Estructurar la administración de usuarios
3. En la lista de funciones, haga clic en la entrada "Agregar función".
4. Seleccione la función de sistema "ExportarImportarAdministraciónDeUsuarios".
5. Seleccione la dirección "Importación". Al importar se sobrescribirán los datos de los
usuarios en el panel de operador.
6. En "Nombre de archivo" introduzca la ruta completa del archivo de origen, p. ej. "a:\test
\usersview.txt".
Nota
Asegúrese de escribir correctamente el nombre del archivo. Si la carpeta "\test\" o el archivo
no existe, aparecerá un aviso de error.

Consulte también
Iniciar una sesión de usuario (Página 1399)

8.2.5

Configurar una protección de acceso

8.2.5.1

Protección de acceso

Introducción
Para proteger el acceso a un objeto, configure una autorización para ese objeto. Todos los
usuarios conectados que posean esta autorización, podrán acceder al objeto. Cuando un
usuario no tiene permiso de manejo de un objeto, automáticamente aparece el cuadro de
diálogo de inicio de sesión.
Nota
Para procesar usuarios, contraseñas y grupos de usuarios, p. ej., en el controlador, existen
varias funciones de sistema en la "Administración de usuarios".

8.2.5.2

Configurar una autorización de uso

Introducción
La autorización "Salir de runtime" se configura en un botón. De esta manera sólo podrán tener
acceso los usuarios que tengan esa autorización, p. ej. todos los usuarios del grupo
"Operadores".
De este modo, el acceso al botón queda protegido. Si un usuario conectado, perteneciente al
grupo "Operadores" y con la autorización necesaria, hace clic en el botón, se saldrá del
runtime.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1403

Configurar una administración de usuarios
8.3 Referencia
En un ejemplo se describe detalladamente cómo configurar un botón con protección de
acceso.

Requisitos
● El grupo de usuarios "Operadores" está creado.
● Se ha creado la autorización "Salir de runtime".
● Se ha creado y abierto una imagen.
● La imagen contiene un botón.

Procedimiento
1. Haga clic en el botón de la imagen.
2. En la ventana de inspección, haga clic en "Propiedades > Propiedades >Seguridad".
3. Seleccione como autorización "Salir de runtime".
4. En la ventana de inspección seleccione "Propiedades > Eventos > Hacer clic".
5. Seleccione una función de sistema de la lista de funciones, p. ej., "PararRuntime".
Nota
Los eventos "Activar" y "Desactivar" sirven exclusivamente para reconocer si un objeto está
seleccionado o deseleccionado. No obstante, los eventos no disparan ninguna petición de
contraseña.
Por lo tanto, no utilice los eventos "Activar" o "Desactivar" si quiere configurar una
protección de acceso en la llamada de la función del objeto.

8.3

Referencia

8.3.1

Objetos con protección de acceso

Introducción
Los objetos siguientes pueden configurarse con una autorización:
● Campo E/S
● Botón
● Campo E/S simbólico
● Campo E/S gráfico
● Campo de fecha y hora

1404

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.3 Referencia
● Interruptor
● Visor de avisos
● Visor de usuarios
● Visor de recetas
● Visor de diagnóstico del sistema

8.3.2

Objetos con protección de acceso

Introducción
Los objetos siguientes pueden configurarse con una autorización:
● Campo E/S
● Botón
● Campo E/S simbólico
● Campo E/S gráfico
● Campo de fecha y hora
● Interruptor
● Librería de símbolos
● Deslizador
● Rango efectivo Nombre
● Rango efectivo Nombre (RFID)
● Visor de avisos
● Ventana de avisos
● Visor de usuarios
● Navegador HTML
● Tabla de observación
● Visor Sm@rtClient
● Visor de recetas
● Visor de curvas f(x)
● Visor de diagnóstico del sistema
● Ventana de diagnóstico del sistema
● Visor de código PLC
● Vista general de GRAPH
● Vista general de ProDiag

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1405

Configurar una administración de usuarios
8.3 Referencia

8.3.3

Objetos con protección de acceso

Introducción
Los objetos siguientes pueden configurarse con una autorización:
● Conector
● Tubo
● Pieza en T doble
● Pieza en T
● Arco tubular
● Campo E/S
● Campo de texto editable
● Cuadro de lista
● Cuadro combinado
● Botón
● Botón redondo
● Campo E/S simbólico
● Campo E/S gráfico
● Barra
● Deslizador
● Barra de desplazamiento
● Casilla de verificación
● Botón de opción
● Indicador gauge
● Reloj
● Visor de usuarios
● Navegador HTML
● Visor de recetas
● Visor de avisos
● Visor de curvas f(x)
● Visor de curvas f(t)
● Visor de tablas
● Tabla de valores
● Visor de diagnóstico del sistema
● Media Player
● Visor de diagnóstico de canal

1406

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.3 Referencia
● Visor de código PLC
● Vista general de GRAPH
● Vista general de ProDiag
Para configurar los siguientes objetos con una protección de acceso, asocie adicionalmente la
función de sistema "MostrarDialogoIniciarSesión" a un evento, p. ej. Hacer clic.
● Línea
● Polilínea
● Polígono
● Elipse
● Segmento elíptico
● Segmento circular
● Arco elíptico
● Arco circular
● Círculo
● Rectángulo
● Campo de texto
● Visor de gráficos
● Ventana de imagen
● Trabajo de impresión/diagnóstico de script

8.3.4

Autorizaciones y grupos de usuarios predefinidos

Principio
Las autorizaciones y los grupos de usuarios predefinidos tienen los números siguientes:
Grupo de usuarios

Número

"Grupo de administradores"

1

"Usuarios"

2

Autorización

Número

"Administración de usuarios"

1

"Supervisar"

2

"Manejar"

3

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1407

Configurar una administración de usuarios
8.4 Ejemplos

8.3.5

Autorizaciones y grupos de usuarios predefinidos

Principio
Las autorizaciones y los grupos de usuarios predefinidos tienen los números siguientes:
Grupo de usuarios:
● "Grupo de administradores"
● "Usuarios"
Autorización

Número

"Administración de usuarios"

1

"Supervisar"

2

"Manejar"

3

"Activar control remoto"

1000

"Acceso web - Solo observar"

1002

La autorización 1000 "Activar control remoto " resulta útil para proyectos cliente-servidor.
La autorización 1002 "Acceso web - Solo observar" tiene relevancia en combinación con el
Web Navigator.

8.4

Ejemplos

8.4.1

Ejemplo: Configurar un botón con el cuadro de diálogo de inicio de sesión

Tarea
En el siguiente ejemplo se configura la función "MostrarDiálogoInicioSesión" en un botón.
Durante el cambio de turno, p. ej., inicia sesión en runtime otro usuario. Además, en ese
momento se cerrará la sesión del usuario anterior.
Nota
De forma predeterminada, el cuadro de diálogo de inicio de sesión aparece en runtime cuando
se accede a un objeto protegido. Existen dos posibilidades: O no ha iniciado la sesión ningún
usuario, o el usuario no tiene la autorización necesaria.

Requisitos
● Se ha creado una imagen.
● Se ha creado un botón nuevo en la imagen.

1408

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.4 Ejemplos

Procedimiento
1. Haga clic en el botón de la imagen.
2. En la ventana de inspección haga clic en "Propiedades > Eventos > Soltar".
3. En la tabla "Lista de funciones", haga clic en la entrada "Agregar función".
4. Seleccione la función del sistema "MostrarDialogoIniciarSesion" en el grupo
"Administración de usuarios".

Resultado
Cuando el usuario haga clic en este botón en runtime, se ejecutará la función
"MostrarDialogoIniciarSesion". Al ejecutarse la función "MostrarDialogoIniciarSesion"
aparecerá el cuadro de diálogo de inicio de sesión. El usuario inicia la sesión con su nombre
de usuario y su contraseña.

8.4.2

Ejemplo: Registrar el inicio y cierre de sesión

Tarea
En el siguiente ejemplo, configure la función "IdentificarCambioDeUsuario" para que se
ejecute con el evento "Cambio de usuario".

Principio
Cuando un usuario inicia o cierra su sesión, se ejecuta la función
"IdentificarCambioDeUsuario". Cuando se llama una función, se emite un aviso del sistema
indicando el usuario correspondiente.
Este aviso del sistema se puede archivar. Al archivar, el aviso del sistema se marcará con la
fecha y hora. De este modo es posible saber qué usuario ha estado conectado al panel de
operador, cuándo y por cuánto tiempo.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1409

Configurar una administración de usuarios
8.4 Ejemplos

Requisitos
● Se ha creado un panel de operador con Runtime Advanced.
● La ventana de inspección está abierta.

Procedimiento
1. Haga doble clic en "Planificador de tareas" de la ventana del proyecto.
2. Haga doble clic en "Agregar" en la tabla del área de tareas.
3. En "Nombre", introduzca "Logon-Protocol".
4. Seleccione el disparador "Cambio de usuario".
5. En la ventana de inspección abra "Propiedades > Eventos".
6. En la tabla "Lista de funciones", haga clic en la entrada "Agregar función".
7. Seleccione la función de sistema "IdentificarCambioDeUsuario".

Resultado
Cuando un usuario inicie o cierre la sesión, se emitirá un aviso del sistema.

8.4.3

Ejemplo: Estructura de una administración de usuarios

Tarea
En el ejemplo siguiente se crea una administración de usuarios para diferentes usuarios y
grupos de usuarios. El ejemplo se basa en un perfil de necesidades típico de la técnica de
fabricación.

Principio
En una instalación y en un proyecto participan grupos de personas muy diversos. Cada grupo
de personas protege sus datos y funciones de los demás. Con este fin se crean usuarios y se
asignan a un grupo de usuarios.
Es posible reproducir diferentes vistas mediante grupos de usuarios.
Ejemplo:
● Vista organizativa: operadores de puesta en marcha, operadores, turno I, turno II
● Vista tecnológica: control de ejes, cambiadores de herramientas, instalación norte,
instalación sur
El ejemplo siguiente se basa en la vista organizativa.
Cada grupo de usuarios requiere una protección de acceso característica: un grupo de
usuarios posee autorizaciones para determinados casos de aplicación. Así, p. ej., un
programador modifica registros de recetas.

1410

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.4 Ejemplos
En el ejemplo se crean los usuarios Müller, Grupo Meier y Maestro y se asignan a diferentes
grupos de usuarios.
La Sra. Müller trabaja de programadora con el sistema de ingeniería. El Grupo Meier son los
operadores de puesta en marcha. El Sr. Maestro es un operador.

Requisitos
● Debe haberse creado un proyecto nuevo.
● El editor "Administración de usuarios" está abierto.

Resumen de los pasos a seguir
El manejo de la administración de usuarios en el ejemplo funciona de la siguiente manera:
1. Crear autorizaciones: el ingeniero determina qué autorizaciones se requieren para la
protección de acceso.
2. Configurar autorizaciones: el ingeniero determina qué objetos pueden manejarse y qué
funciones pueden ejecutarse.
3. Crear grupos de usuarios y asignar autorizaciones: el administrador crea los grupos de
usuarios junto con el ingeniero. Mediante las autorizaciones, el ingeniero determina quién
puede manejar objetos y quién puede modificar parámetros.
4. Crear usuarios y asignarlos a un grupo de usuarios: el administrador administra los
usuarios.

Resultado
El objetivo es obtener la estructura siguiente de la administración de usuarios, compuesta por
usuarios, grupos de usuarios y autorizaciones:
Usuarios
Müller

Meier

Maestro

Grupos de usuarios

Autorizaciones

Funciones

Modificar re‐ Modificar pa‐
gistros de
rámetros del
receta
sistema

Modificar pa‐
rámetros del
proceso

Grupo de administrado‐
res
X
X
X

Administrar

x

Programadores

X

Técnicos de puesta en
marcha

X

Operadores

x

X

X

El usuario "Maestro", que pertenece al grupo "Operadores", tiene acceso al botón configurado
"Hacia el visor de recetas".
Nota
Alternativamente, puede crear como operadores varios grupos de usuarios con diferentes
autorizaciones de uso, p. ej. Operadores de nivel 1, Operadores de nivel 2.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1411

Configurar una administración de usuarios
8.4 Ejemplos

8.4.4

Ejemplo: Crear y configurar una autorización

Tarea
En el ejemplo siguiente se crean las autorizaciones.

Procedimiento
1. Abra el área de trabajo "Grupos de usuarios".
2. Haga doble clic en "Agregar" en la tabla "Autorizaciones".
3. Introduzca "Modificar registros de receta" en el nombre de la autorización.
4. Repita los pasos 2 y 3 para crear más autorizaciones: "Modificar parámetros de sistema",
"Modificar parámetros de proceso".

Resultado

8.4.5

Ejemplo: Configurar un botón con protección de acceso

Tarea
En el ejemplo siguiente se crea un botón para cambiar de imagen con la ayuda de una función
de sistema. Proteja el botón "Hacia el visor de recetas" de manejos no autorizados. Para ello,
configure la autorización "Modificar registros de receta" en el botón "Hacia el visor de
recetas".

1412

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.4 Ejemplos

Requisitos
● Se ha creado una autorización "Modificar registros de receta".
● Se ha creado una imagen "Recetas".
● Se ha creado y abierto una imagen "Inicio".
● Se ha creado y seleccionado un botón en la imagen "Inicio".

Procedimiento
1. En la ventana de inspección haga clic en "Propiedades > Propiedades > General".
2. Introduzca el texto "Hacia el visor de recetas".
3. En la ventana de inspección haga clic en "Propiedades > Eventos > Hacer clic".
4. En la primera fila de la tabla "Lista de funciones", haga clic en la entrada "Agregar función".
5. Seleccione la función del sistema "ActivarImagen" en el grupo "Imágenes".
6. Haga clic en el botón
del campo "Nombre de imagen". Se abre un cuadro de diálogo para
seleccionar la imagen.
7. Seleccione la imagen "Recetas" y cierre el cuadro de diálogo con el botón

.

8. En la ventana de inspección, haga clic en "Propiedades > Propiedades > Seguridad".
9. Seleccione la autorización "Modificar registros de receta".

Resultado

El acceso al botón "Hacia el visor de recetas" queda protegido. Cuando el usuario "Meier" haga
clic en este botón en runtime, p. ej., se abrirá la imagen "Visor de recetas". Siempre y cuando

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1413

Configurar una administración de usuarios
8.4 Ejemplos
el usuario "Meier" haya iniciado una sesión correctamente y tenga la autorización necesaria.
La imagen "Recetas" contiene un visor de recetas y otros objetos de imagen.
Nota
Si el usuario conectado no tiene la autorización necesaria o no ha iniciado la sesión ningún
usuario, aparecerá el cuadro de diálogo de inicio de sesión. En este caso, en Runtime
Professional aparece el aviso de que el usuario no dispone de permiso de manejo.

8.4.6

Ejemplo: Crear grupos de usuarios y asignar autorizaciones

Tarea
En el ejemplo siguiente se crean los grupos de usuarios y se les asignan autorizaciones.

Procedimiento
1. Abra el área de trabajo "Grupos de usuarios".
2. Haga doble clic en "Agregar" en la tabla "Grupos".
3. En "Nombre", escriba "Programadores".
4. Para crear los grupos de usuarios "Operadores de puesta en marcha" y "Operadores" se
deberán repetir los pasos 2 y 3.
5. Haga clic en "Grupo de administradores" de la tabla "Grupos".
6. En la tabla "Autorizaciones" active la autorización "Modificar parámetros de sistema".

1414

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.4 Ejemplos

Resultado intermedio

Procedimiento
1. Haga clic en "Operadores" de la tabla "Grupos".
2. En la tabla "Autorizaciones" active la autorización "Modificar registros de receta".
3. Haga clic en "Operadores de puesta en marcha" de la tabla "Grupos".
4. En la tabla "Autorizaciones" active la autorización "Modificar registros de receta", "Modificar
parámetros de sistema" y "Modificar parámetros de proceso".
5. Haga clic en "Programadores" de la tabla "Grupos".
6. En la tabla "Autorizaciones" active la autorización "Modificar registros de receta".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1415

Configurar una administración de usuarios
8.4 Ejemplos

Resultado

8.4.7

Ejemplo: Crear usuarios y asignarlos a un grupo de usuarios

Tarea
En el ejemplo siguiente se crean los usuarios y se asignan a los grupos de usuarios. El usuario
se ordenará alfabéticamente justo después de entrar el nombre.

Procedimiento
1. Abra el área de trabajo "Usuarios".
2. Haga doble clic en "Agregar" en la tabla "Usuarios".
3. Introduzca el nombre de usuario "Mueller".
4. En la columna "Contraseña", haga clic en el botón
introducir la contraseña.

. Se abre un cuadro de diálogo para

5. Introduzca la contraseña "mueller".
6. Vuelva a introducir la contraseña en el campo de confirmación situado debajo.
7. Cierre el cuadro de diálogo con el símbolo

.

8. En la tabla "Grupos", active el grupo de usuarios "Programadores".

1416

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Configurar una administración de usuarios
8.4 Ejemplos

Resultado intermedio

Procedimiento
1. Haga doble clic en "Agregar" en la tabla "Usuarios".
2. Introduzca el nombre de usuario "Meier".
3. En la columna "Contraseña", haga clic en el botón
introducir la contraseña.

. Se abre un cuadro de diálogo para

4. Introduzca la contraseña "meier".
5. Vuelva a introducir la contraseña en el campo de confirmación situado debajo.
6. Cierre el cuadro de diálogo con el símbolo

.

7. En la tabla "Grupos", active el grupo de usuarios "Operadores de puesta en marcha".
8. Repita los pasos 2 a 6 para el usuario "Maestro".
9. En la tabla "Grupos", active el grupo de usuarios "Operadores".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1417

Configurar una administración de usuarios
8.4 Ejemplos

Resultado

1418

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

9

Trabajar con funciones de sistema y Runtime Scripting
9.1

Principios básicos

9.1.1

Runtime Scripting

Definición de conceptos
En la documentación se utilizan los términos siguientes:
Término
Runtime Scripting

Término general para todas las actividades de los scripts de usuario y los
scripts locales.

Función

Término general para las funciones de sistema y los scripts de usuario.

Funciones de sistema

Las funciones de sistema son todas las funciones suministradas con WinCC.
Las funciones de sistema se utilizan en listas de funciones, en scripts de
usuario o en scripts locales.

Scripts de usuario

Los scripts de usuario son funciones escritas en el editor "Scripts". Para ma‐
yor especificación, en la documentación se utilizan los términos "VB Script de
usuario" y "C Script de usuario".

Script local

Un script local se crea directamente en la ubicación, p. ej. de una propiedad
de objeto, y posee un disparador cíclico o acíclico. Para mayor especificación,
en la documentación se utilizan los términos "VB Script local" y "C Script local".

VBS / VBScript

Abreviatura de Visual Basic Script

Disponibilidad
WinCC RT Advanced y Panels

WinCC RT Professional

Funciones VB definidas por el usuario

X

X

Funciones C definidas por el usuario

--

X

Scripts VB locales

--

X

C scripts locales

--

X

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1419

Trabajar con funciones de sistema y Runtime Scripting
9.1 Principios básicos

Aplicar Runtime Scripting
La siguiente figura muestra la ayuda para decisión antes de iniciar una tarea de programación:

5HDOL]DEOHHQ
HO3/&"

6¯

$GDSWDU
SURJUDPDGH
FRQWURO

6¯

8WLOL]DUIXQFLµQGH
VLVWHPD

6¯

,QWURGXFLUXQD
IXQFLµQ

1R

)XQFLµQGH
VLVWHPD
GLVSRQLEOH"
1R

)XQFLRQDOLGDG
QHFHVDULD
UHSHWLGDPHQWH"

1R
6FULSWORFDO

),1

*

En WinCC RT Advanced y Panels no se soportan los scripts locales.

¿Función definida por el usuario o script local?
La realización de una tarea de programación con un script de usuario o con un script local
depende de la finalidad y, en última instancia, del número de scripts de usuario o scripts
locales.
Utilice scripts locales para actividades de segundo plano, p. ej. para imprimir diariamente un
informe, para la vigilancia de variables o para la ejecución de cálculos.
Utilice las funciones definidas por el usuario para poder utilizar un mismo código en varios
puntos del proyecto sin tener que crearlo más que una vez. En lugar de introducir el código
varias veces, basta con llamar la correspondiente función definida por el usuario. Así, su
código será más claro y más fácil de mantener.

1420

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.1 Principios básicos

6FULSWORFDO

6FULSWORFDO
Instrucción 1
,QVWUXFFLµQ
Instrucción 3
Instrucción 4

Instrucción 1
Instrucción 2
Instrucción 3
Instrucción 4

6FULSWORFDO
Instrucción 1
Instrucción 2
Instrucción 3
Instrucción 4

)XQFLµQSHUVRQDOL]DGD
0\)XQFWLRQ
Instrucción 1
Instrucción 2
Instrucción 3
Instrucción 4

6FULSWORFDO
0\)XQFWLRQ

6FULSWORFDO
0\)XQFWLRQ

6FULSWORFDO
0\)XQFWLRQ

Consulte también
Funciones definidas por el usuario (Página 1423)
Scripts locales (Página 1425)

9.1.2

Funciones del sistema

Posibilidades de aplicación
● Listas de funciones
Una lista de funciones permite ejecutar las funciones de sistema configuradas cuando
aparece el evento.
● Funciones definidas por el usuario
Si el panel de operador soporta funciones definidas por el usuario, utilice funciones de
sistema en combinación con instrucciones y condiciones en el código de la función definida
por el usuario. Gracias a ello, una función definida por el usuario se ejecuta en función de
un determinado estado del sistema. Además, es posible evaluar p. ej. valores de retorno de
las funciones de sistema. Dependiendo del valor de retorno, podrá ejecutar entonces p. ej.
funciones de comprobación que, a su vez, influyen en el procesamiento de la función.

Ejemplos de aplicación de funciones de sistema
● Cálculos como, p. ej., valor de variable para aumentar un importe determinado o variable.
● Funciones de archivación (p. ej. para iniciar un fichero de valores de proceso).

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1421

Trabajar con funciones de sistema y Runtime Scripting
9.1 Principios básicos
● Configuración (p. ej. para cambiar de controlador o activar un bit en el controlador).
● Avisos (p. ej. tras modificar el usuario)

Uso
Las funciones de sistema se utilizan en listas de funciones o en scripts de usuario.
● Lista de funciones
Cuando configure una lista de funciones, seleccione las funciones de sistema en una lista
de selección ordenada por categorías:

● Funciones definidas por el usuario
Si se utiliza una función de sistema en una función definida por el usuario, selecciónela de
la lista de selección. Para abrir la lista de selección, utilice la combinación de teclas <Ctrl
+barra espaciadora> o haga clic en
.

Dependencia del idioma
En la lista de funciones los nombres de las funciones de sistema dependen del idioma de
configuración ajustado. Gracias a ello, el ingeniero programador podrá reconocer las
funciones de inmediato.

1422

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.1 Principios básicos
En los scripts de usuario utilice el nombre en inglés de la función de sistema. Los nombres
ingleses de las funciones de sistema se indican en la referencia.

Disponibilidad en WinCC Runtime Advanced y Panels
Las funciones de sistema disponibles dependen del panel de operador utilizado.

Cambio de paneles de operador
Si en una lista de funciones se utilizan funciones de sistema no disponibles en el panel de
operador seleccionado, las funciones de sistema en cuestión aparecen marcadas en color.
Si en un script de usuario se utiliza una función de sistema no disponible en el panel de
operador seleccionado, aparece una advertencia. Además, la función de sistema en cuestión
se subrayará con una línea ondulada en color azul.

Consulte también
Funciones de sistema para ficheros (Página 646)

9.1.3

Funciones definidas por el usuario

Posibilidades de aplicación
Las funciones definidas por el usuario se utilizan p. ej. para lo siguiente:
● Configurar la lista de funciones
En una función definida por el usuario es posible ejecutar o repetir funciones definidas por
el usuario y funciones de sistema en función de determinadas condiciones. A continuación,
la función definida por el usuario se agrega, por ejemplo, a una lista de funciones.
● Programar nuevas funcionalidades
Las funciones definidas por el usuario son válidas solamente en el proyecto en el que
fueron definidas. Para las funciones definidas por el usuario se definen parámetros de
transferencia y valores de retorno. ej., para convertir valores.
Nota
En una lista de funciones sólo pueden utilizarse funciones definidas por el usuario de un solo
lenguaje de programación. Mediante la selección de la primera función definida por el usuario
se determina si en la lista de funciones estarán disponibles las funciones VB o las funciones C.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1423

Trabajar con funciones de sistema y Runtime Scripting
9.1 Principios básicos

Ejemplos de aplicación de funciones definidas por el usuario
● Convertir valores
Utilizando funciones es posible convertir valores entre diferentes unidades de medida (p. ej.
temperaturas).
● Evaluar estadísticamente valores de variables
● Trazar una curva en un visor de curvas f(t)

Propiedades de funciones definidas por el usuario
Las funciones definidas por el usuario tienen las propiedades siguientes:
● Nombre
● Parámetro (opcional)
● Valor de retorno y tipo (opcional)
● Posibilidad de modificación centralizada
● No posee disparador. Debe llamarse explícitamente, p. ej. en una lista de funciones.

Organización de funciones definidas por el usuario
Las funciones definidas por el usuario se crean con el editor "Scripts". Encontrará más
información al respecto en "Editor "Scripts" (Página 1432)".
Las funciones definidas por el usuario se guardan en el proyecto. Para proteger funciones
definidas por el usuario, configure una protección de know-how. Encontrará más información
al respecto en Establecer la protección de know-how (Página 1462).
● Árbol del proyecto
En el árbol del proyecto, las funciones definidas por el usuario se listan en los apartados "VB
Scripts" o "C Scripts".

● Lista de funciones
En una lista de funciones, las funciones definidas por el usuario se listan en los apartados
"VB Scripts" o "C Scripts".
● Función definida por el usuario
Si se utiliza una función de sistema en una función definida por el usuario, selecciónela de
la lista de selección. Para abrir la lista de selección, utilice la combinación de teclas <Ctrl
+barra espaciadora> o haga clic en .

1424

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.1 Principios básicos

Consulte también
Runtime Scripting (Página 1419)
Establecer la protección de know-how (Página 1462)
Editor "Scripts" (Página 1432)

9.1.4

Scripts locales

Posibilidades de aplicación
Los scripts locales se utilizan p. ej. para lo siguiente:
● Dinamizar objetos
Para determinar el valor de una propiedad de objeto en runtime se utiliza un script local. De
este modo se modifica, p. ej., el color en función de un valor de variable.
● Ejecutar tareas en cualquier momento
Utiliza un script local para planificar tareas, p. ej. imprimir diariamente un informe al terminar
el turno.

Ejemplos de aplicación de scripts locales
● Configurar especificaciones de consigna para variables de manejo de un objeto gráfico,
p. ej. para especificar con un clic de ratón un valor para el controlador
● Configurar el cambio del idioma de runtime en el manejo de un objeto gráfico.
● Vigilancia de estado de variables, p. ej. para asegurarse de que un valor es válido.

Propiedades de los scripts locales
Un script local se crea directamente en la ubicación. Un script local tiene las siguientes
propiedades:
● Nombre predefinido
● Parámetros predefinidos
● Valor de retorno predefinido (opcional)
● Posibilidad de modificación solo en la ubicación
● Posee un disparador
● Llamada de funciones definidas por el usuario y funciones de sistema

Disparador
Para ejecutar scripts locales en runtime se necesitan disparadores. El disparador se determina
automáticamente al crear un script local o bien lo define el ingeniero programador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1425

Trabajar con funciones de sistema y Runtime Scripting
9.1 Principios básicos
WinCC soporta los siguientes disparadores:
● Disparadores acíclicos, p. ej. ha previsto la finalización de runtime una sola vez, para tareas
de mantenimiento.
● Disparadores cíclicos, p. ej. para planificar una tarea que inicie la impresión diaria de un
informe.
● Eventos, p. ej. al hacer clic en el botón.
La siguiente figura muestra distintos tipos de disparadores:

7LSRVGHGLVSDUDGRU

7LPHU

9DULDEOH

&¯FOLFR
HMHFXFLµQUHSHWLGDHQ
LQWHUYDORVXQLIRUPHV

$F¯FOLFR
HMHFXFLµQ¼QLFDLQVWDQWH
GHLQLFLRGHWHUPLQDGRSRU
IHFKDKRUD

,QVWDQWHGHLQLFLR
GHWHUPLQDGRSRU
G¯DPHVKRUD

,QVWDQWHGHLQLFLR
GHWHUPLQDGRSRU
LQLFLRGHUXQWLPH

9LJLODQFLDF¯FOLFD
GHOYDORUGH
YDULDEOH

$OFDPELDU

Los disparadores se utilizan en los siguientes editores:
● Planificador de tareas
En primer lugar se configura el disparador en el Planificador de tareas. Luego se enlaza el
disparador con el script local o una lista de funciones.
● Imágenes
En las imágenes debe configurarse en primer lugar un script local en la lista de
propiedades, a fin de dinamizar una propiedad de objeto.
El disparador se determina automáticamente al crear el script local. El disparador puede
modificarse, p. ej., convirtiéndolo en disparador de variable.

Consulte también
Runtime Scripting (Página 1419)

1426

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.2 Trabajar con listas de funciones

9.2

Trabajar con listas de funciones

9.2.1

Conceptos básicos de las listas de funciones

Introducción
Una lista de funciones permite ejecutar una o varias funciones de sistema y scripts de usuario
cuando aparece el evento configurado.

Principio
La lista de funciones se asocia al evento de un objeto (p. ej. un objeto de imagen o una tarea).
En cada evento se puede configurar exactamente una lista de funciones. Los eventos
disponibles dependen del objeto y del panel de operador seleccionados.

Los eventos sólo ocurren cuando el proyecto está en runtime. Los eventos son, por ejemplo:
● Ejecución de una tarea
● Pulsar un botón
● Acusar un aviso
Nota
Las funciones de sistema configurables que se pueden seleccionar en una lista de
funciones dependen del panel de operador elegido. Encontrará más información al
respecto en "Funciones de sistema dependientes del panel".

Consulte también
Lista de funciones (Página 1838)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1427

Trabajar con funciones de sistema y Runtime Scripting
9.2 Trabajar con listas de funciones

9.2.2

Propiedades de la lista de funciones

Información de estado
Durante la configuración, los datos del proyecto se comprueban en segundo plano.
Las siguientes causas provocan que la lista de funciones no se ejecute en runtime y se
marquen en rojo las entradas erróneas:
● Por lo menos una función de sistema o un script de usuario no se ha parametrizado por
completo.
● Hay por lo menos una función de sistema o una función definida por el usuario no soportada
por el panel de operador seleccionado (p. ej. por un cambio del tipo de dispositivo).

Proceso de funciones de sistema y scripts de usuario (WinCC Runtime Advanced y Panels)
Una lista de funciones se procesa en runtime de arriba a abajo. Si la lista de funciones contiene
funciones de sistema de ejecución prolongada, se procesan de forma asíncrona. Encontrará
más información al respecto en "Llamada de funciones de sistema (Página 1435)" y "Llamada
de funciones definidas por el usuario (Página 1436)".

Consulte también
Llamada de funciones de sistema (Página 1435)
Llamada de funciones definidas por el usuario (Página 1436)

9.2.3

Configurar la lista de funciones

Introducción
Una lista de funciones se configura seleccionando las funciones de sistema y las funciones
definidas por el usuario en una lista de selección. Las funciones de sistema están ordenadas
por categorías en la lista de selección.
En una lista de funciones sólo se utilizan funciones definidas por el usuario de un lenguaje de
programación. Mediante la selección del primer script de usuario se determina si los VB Scripts
de usuario o los C Scripts de usuario estarán disponibles en la lista de funciones. Los lenguajes
de programación disponibles dependen del panel de operador utilizado.
Si p. ej. se ha creado un VB Script de usuario, encontrará el script de usuario en la entrada "VB
Scripts".

Requisitos
El objeto deberá tener por lo menos un evento configurable.

1428

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.2 Trabajar con listas de funciones

Procedimiento
Para configurar una lista de funciones, proceda del siguiente modo:
1. Abra el editor que contiene el objeto.
2. Seleccione el objeto.
3. Haga clic en la ventana de inspección "Propiedades > Eventos". Seleccione el evento en el
que debe configurarse la lista de funciones.
4. En la lista de selección de la ventana de inspección, seleccione la entrada "<Agregar
función>".
5. En la lista de selección, escoja la función de sistema o el script de usuario deseado.
También puede introducir el nombre de la función de sistema o del script de usuario.

La función de sistema o la función definida por el usuario se registrará en la lista de
funciones.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1429

Trabajar con funciones de sistema y Runtime Scripting
9.2 Trabajar con listas de funciones
6. Si la función de sistema o la función definida por el usuario contiene parámetros, seleccione
los valores correspondientes para los parámetros.

7. Si desea agregar más funciones de sistema o scripts de usuario a la lista de funciones,
repita los pasos 4.) a 6.).

Resultado
La lista de funciones deberá estar configurada. El estado de la lista de funciones se visualizará
en la ventana de inspección, junto al evento configurado. Cuando el evento configurado ocurra
en runtime, la lista de funciones se procesará de arriba a abajo.

Consulte también
Ejemplo: cambiar el modo de operación del panel de operador y visualizar el estado actual
(Página 1494)

9.2.4

Editar la lista de funciones

Introducción
La lista de funciones se puede editar como se indica a continuación:
● Modificar el orden de las funciones de sistema y de los scripts de usuario.
● Eliminar una función de sistema o un script de usuario.

Requisitos
La lista de funciones deberá estar configurada y abierta.

1430

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.2 Trabajar con listas de funciones

Cambiar el orden de una función de sistema o una función definida por el usuario
1. Seleccione la función de sistema o la función definida por el usuario en la lista de funciones.
2. A continuación, haga clic en la correspondiente flecha de sentido de la ventana de
inspección hasta que la función de sistema o la función definida por el usuario aparezca en
la posición deseada.

Cambiar el orden de varias funciones de sistema o varias funciones definidas por el usuario
1. Mantenga pulsada la tecla <Mayús>.
2. Haga clic con el ratón consecutivamente en las funciones de sistema o las funciones
definidas por el usuario elegidas.
3. Desplace la selección con Arrastrar y soltar a la posición deseada.

Eliminar una función de sistema o una función definida por el usuario
1. Seleccione la función de sistema o la función definida por el usuario en la lista de funciones.
2. En el menú contextual, elija el comando "Borrar".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1431

Trabajar con funciones de sistema y Runtime Scripting
9.3 Trabajar con funciones definidas por el usuario

9.3

Trabajar con funciones definidas por el usuario

9.3.1

Editor "Scripts"

Introducción
El editor "Scripts" ayuda a crear funciones definidas por el usuario mediante funcionalidades
como Autocompletar o Resaltar la sintaxis. La Task Card "Instrucciones" sirve para insertar,
por ej., plantillas de código para instrucciones requeridas frecuentemente.

Completar automáticamente e introducir parámetros
El editor "Scripts" le ayuda durante la programación con la función de completar
automáticamente y al introducir parámetros.
Si se utilizan funciones de sistema, los parámetros de la función se mostrarán en forma de
tooltip.

1432

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.3 Trabajar con funciones definidas por el usuario

<Ctrl+J>
La combinación de teclas <Ctrl+J> abre la lista contextual de objetos. Utilice la lista de objetos
para suministrar valores a las funciones de sistema, los métodos y las propiedades: elija
imágenes, objetos de imagen, variables o colores, por ejemplo. Añadirá un objeto
seleccionado en la lista de objetos haciendo doble clic en el código.
Nota
También puede insertar las variables y las imágenes con la función de arrastrar y soltar. Utilice
la función de arrastrar y soltar para asignar parámetros, por ejemplo.

<Ctrl+barra espaciadora>
Mediante la combinación de teclas <Ctrl+barra espaciadora> se llama una lista con el siguiente
contenido:
● Constantes y funciones del lenguaje de programación utilizado en el editor "Scripts".
● Funciones definidas por el usuario
● Funciones de sistema

Integración de caracteres de control en cadenas de caracteres
Si desea emplear caracteres de control como tabuladores o saltos de línea en cadenas de
caracteres, emplee la función "Chr()". Como parámetro, proporcione el código ASCII decimal
del carácter de control deseado:
Ejemplo:
● Chr(9) devuelve "Tabulador".
● Chr(15) devuelve "SI" (Shift in).
● Chr(20) devuelve "DC4" (Device Control 4).
Encontrará más información sobre esta función VBS en Internet (https://msdn.microsoft.com/
en-us/library/ws6aa3sf(v=vs.84).aspx).

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1433

Trabajar con funciones de sistema y Runtime Scripting
9.3 Trabajar con funciones definidas por el usuario

Task Card "Instrucciones"
La Task Card "Instrucciones" contiene las paletas "Plantillas de código" y "Lista de funciones".
● Plantillas de código
Para insertar instrucciones empleadas frecuentemente, haga doble clic en la instrucción
deseada en la paleta "Plantillas de código". Reemplace el nombre de las variables por las
expresiones empleadas.
● Lista de funciones
En la lista de funciones se seleccionan las funciones de sistema y las funciones definidas
por el usuario de una lista de selección. Proceda como en la configuración de una lista de
funciones. Para añadir la lista de funciones al código, haga clic en el botón "Añadir". La lista
de funciones se convierte automáticamente a la sintaxis adecuada.
Nota
No todas las funciones de sistema están disponibles en el editor "Scripts". Encontrará más
información al respecto en la referencia.

Funciones de edición
Para mostrar más claramente el código con sangrías y comentarios, utilice los botones de la
barra de herramientas "Edición avanzada".
Los marcadores facilitan la orientación, incluso si el script contiene muchas líneas de código.
Para más información sobre cada uno de los botones, consulte la ayuda directa
correspondiente.

Sincronización de variables y objetos
Si se modifican en el proyecto nombres de variables o nombres de objetos que se utilizan en
una función definida por el usuario, los nombres se adaptarán automáticamente en la función
definida por el usuario.
Si modifica en la función los nombres de las variables o los nombres de los objetos, éstos no
se adaptarán en el proyecto. Al ejecutar la función definida por el usuario aparecerá un
mensaje de error.

Resaltar la sintaxis
En el editor "Scripts", las palabras clave se resaltan con distintos colores. Las palabras
desconocidas se subrayan con una línea ondulada roja.
La tabla muestra los colores predeterminados para las principales palabras clave:
Color

1434

Significado

Ejemplo

Azul

Palabra clave

If, Then

Violeta oscuro

Función

FahrenheitToCelsius

Chocolate

Función de sistema

SetTag

Naranja

Variable HMI

Tag_1

Verde

Comentario

'Esto es un comentario'

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.3 Trabajar con funciones definidas por el usuario

Personalizar propiedades de visualización
Al abrir una función definida por el usuario, es posible personalizar individualmente las
propiedades de visualización en el editor. Elija para ello el comando de menú "Herramientas
> Configuración". En el editor "Configuración", haga clic en "General > Editores de textos". En
el área de trabajo, modifique los colores para resaltar la sintaxis o el sangrado del código, por
ejemplo.

Consulte también
Crear una función VB definida por el usuario (Página 1445)
Crear una función C definida por el usuario (Página 1456)
Scripts locales (Página 1465)
Editor para scripts locales (Página 1466)

9.3.2

Llamada de funciones de sistema

Introducción
Las funciones definidas por el usuario permiten llamar funciones de sistema. La sintaxis
depende del lenguaje de programación empleado. El lenguaje de programación disponible
depende del panel de operador utilizado.
Para llamar una función de sistema en una función definida por el usuario, están las siguientes
posibilidades:
● Con <Ctrl+barra espaciadora> o con
● Entrada directa
● Mediante la paleta "Lista de funciones"

Con <Ctrl+barra espaciadora> o con
Abra con <Ctrl+barra espaciadora> la lista de selección y elija la función de sistema deseada.

Entrada directa
Las funciones de sistema se introducen directamente en el código. Utilice el nombre en inglés
de la función de sistema. Los nombres ingleses de las funciones de sistema se indican en la
referencia de estas bajo "Sintaxis". El idioma configurado para la edición no se tiene en cuenta.
Las referencias a objetos (p. ej. imágenes, conexiones y ficheros) se transfieren entre comillas:
● Llamada de funciones del sistema sin valor de retorno en VBS

SetTag "Tag1",64

● Llamada de funciones del sistema con valor de retorno en VBS

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1435

Trabajar con funciones de sistema y Runtime Scripting
9.3 Trabajar con funciones definidas por el usuario

InverseLinearScaling "Xvalue","Tag1", 0, 1

● Llamar funciones del sistema sin valor de retorno en C

SetTag ("Tag1",64);

● Llamar funciones del sistema con valor de retorno en C

InverseLinearScaling ("Xvalue","Tag1", 0, 1);

Mediante la paleta "Lista de funciones"
Seleccione en la paleta "Lista de funciones" la función de sistema deseada de la lista de
selección. Proceda como en la configuración de una lista de funciones. Encontrará más
información en "Configurar la lista de funciones".
Para incorporar la lista en el código, haga clic en el botón "Añadir". La lista se convierte
automáticamente a la sintaxis correcta.

Cambio de panel de operador (Runtime Panels y Advanced)
El código de una función definida por el usuario depende del panel de operador seleccionado.
Si en la función definida por el usuario se utilizan funciones de sistema que no soporte el panel
de operador, aparecerá un aviso de error en la ventana de resultados.

Consulte también
Configurar la lista de funciones (Página 1428)
Crear una función VB definida por el usuario (Página 1445)
Ejecutar una función VB definida por el usuario (Página 1448)
Ejecutar una función C definida por el usuario (Página 1460)

9.3.3

Llamada de funciones definidas por el usuario

Introducción
En una función definida por el usuario pueden insertarse funciones definidas por el usuario del
mismo lenguaje de programación, p. ej. sólo función C definidas por el usuario en una función
C definida por el usuario.

1436

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.3 Trabajar con funciones definidas por el usuario
La sintaxis depende del lenguaje de programación empleado. El lenguaje de programación
disponible depende del panel de operador utilizado.
Para llamar una función definida por el usuario en una función definida por el usuario, hay
varias posibilidades:
● Con <Ctrl+barra espaciadora> o con
● Entrada directa
● Mediante la paleta "Lista de funciones"

Con <Ctrl+barra espaciadora> o con
Abra con <Ctrl+barra espaciadora> o con
el usuario deseado.

la lista de selección y elija la función definida por

Entrada directa
La función definida por el usuario se introduce directamente en el código. Las referencias a
objetos (p. ej. imágenes, conexiones y ficheros) se transfieren entre comillas.

Llamada de funciones definidas por el usuario sin valor de retorno en VBS
Average 4,10

Llamada de funciones definidas por el usuario con valor de retorno en VBS
Dim ValueA
ValueA = Average (4,10)

Si no se desea evaluar el valor de retorno, la llamada se utiliza como si se tratara de una
función definida por el usuario sin valor de retorno.

Llamar funciones definidas por el usuario sin valor de retorno en C
Average(4,10);

Llamar funciones definidas por el usuario con valor de retorno en C
SetTagDouble("AverageValue",Average (4, 10));

Si no se desea evaluar el valor de retorno, la llamada se utiliza como si se tratara de una
función definida por el usuario sin valor de retorno.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1437

Trabajar con funciones de sistema y Runtime Scripting
9.3 Trabajar con funciones definidas por el usuario

Mediante la paleta "Lista de funciones"
Seleccione en la paleta "Lista de funciones" la función definida por el usuario deseada de la
lista de selección.
Proceda como en la configuración de una lista de funciones. Encontrará más información al
respecto en "Configurar la lista de funciones (Página 1428)".
Para incorporar la lista en el código, haga clic en el botón "Añadir". La lista se convierte
automáticamente a la sintaxis correcta.

Consulte también
Crear una función VB definida por el usuario (Página 1445)
Ejecutar una función VB definida por el usuario (Página 1448)
Ejecutar una función C definida por el usuario (Página 1460)
Configurar la lista de funciones (Página 1428)

9.3.4

Acceso a variables HMI

Introducción
Con VBS o C se puede acceder a las variables HMI que se hayan creado en el proyecto. En
runtime se modifica o lee el valor de una variable HMI con un script de usuario.
Además, puede crear variables locales en calidad de contadores o de memoria intermedia.
Para evitar errores causados por una notación errónea de las variables locales, es necesario
inicializar cada una de las variables locales.

1438

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.3 Trabajar con funciones definidas por el usuario

Variables HMI
● WinCC Runtime Advanced y Panels
En el script de usuario se accede al valor de variable que está guardado en la imagen de
variable. A continuación, el valor de la variable se actualiza conforme al tiempo de ciclo
configurado. El script de usuario accede primero a los valores de la variable leídos en el
instante anterior del ciclo.
Si el nombre de la variable en el proyecto cumple con las convenciones para nombres VBS,
podrá utilizar la variable en el script de usuario de la siguiente manera.
'VBS_Example_03
If BeltDriveOilTemperature > 100 Then [instrucción]
Si el nombre de la variable en el proyecto no cumple con las convenciones para nombres
VBS, deberá referenciar la variable a través de la "Lista de SmartTags". En el ejemplo
siguiente, el nombre de la variable contiene el carácter "&". Éste no está permitido en las
convenciones para nombres VBS.
'VBS_Example_04
SmartTags("Test&Trial")= 2005
● WinCC Runtime Professional
Existen las mismas posibilidades de acceso que con los paneles de operador con WinCC
Runtime Advanced y Panels. Además es posible acceder en modo asíncrono a los valores
de variable. En el acceso asíncrono, se accede directamente al valor de la variable en el
controlador. En un script local o un C Script de usuario se accede al valor de variable de la
siguiente manera:
– Listado de SmartTags (VBS)
– Listado de Tags con método Read/Write (VBS)
– Función GetTag (C)
– Función SetTag (C)
El valor de la variable se lee una sola vez desde el controlador al llamar el método o el script
de usuario. A diferencia de la lectura desde la imagen de variable, el valor de variable no se
actualiza regularmente.

6¯QFURQR
*HW7DJ:DLW;;;

3URFHVR

:LQ&&
6FULSW
,QVWUXFFLµQ
/HHUYDULDEOH

,PDJHQ
'LVSDUDGRU

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

3/&
'LVSDUDGRU
9DORU

1439

Trabajar con funciones de sistema y Runtime Scripting
9.3 Trabajar con funciones definidas por el usuario
Figura 9-1

En modo síncrono: Valor de variable directamente desde el controlador

$V¯QFURQR
*HW7DJ;;;

3URFHVR

:LQ&&
,PDJHQ

6FULSW
,QVWUXFFLµQ
/HHUYDULDEOH

Figura 9-2

'LVSDUDGRU

3/&
GLVSDUDGRU

9DU

9DORU

En modo asíncrono: Valor de variable desde la imagen de variable

Nota
Runtime Scripting
El índice de los elementos de matrices PLC puede empezar con cualquier número. En WinCC,
la indexación siempre empieza con 0.
Una variable PLC "Array[1..3] of Int" se representa en WinCC, p. ej., con "Array[0..2] of Int".
Si accede a una matriz en un script, asegúrese de que la indexación sea correcta.

Variables locales
Las variables locales sólo se pueden utilizar dentro de los scripts de usuario o los scripts
locales.
Las variables locales se utilizan para lo siguiente:
● Memoria intermedia
● Contadores, p. ej. instrucción For
Cada variable debe inicializarse de acuerdo con la sintaxis del lenguaje de programación.
Ejemplo: Dim objTagFillLevel
Inicialice cada variable con un valor, a fin de evitar errores debidos a variables HMI vacías.
Para poder utilizar externamente el valor de la variable local, enlácela con una variable HMI
interna o externa.

1440

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.3 Trabajar con funciones definidas por el usuario

Acceso a variables HMI con nombres dinámicos (WinCC Runtime Advanced y Panels)
La función VB definida por el usuario accede al valor de una variable a través de su nombre.
Es posible indicar el nombre de la variable de modo que se componga en el tiempo de
ejecución de la función de usuario.
Si la función VB de usuario se llama sólo en una imagen en la que la variable HMI se utiliza
también en otra parte (p. ej. en un campo E/S), conviene configurar la variable HMI con el modo
de adquisición "Cíclico durante el funcionamiento" por cuestiones de rendimiento.
Si se llama la función VB definida por el usuario y la variable HMI no se utiliza en la imagen
visualizada actualmente, la variable HMI ha de configurarse con el modo de adquisición
"Cíclico continuo". De este modo queda garantizado que el valor actual de la variable esté
disponible en todo momento.

9.3.5

Comprobar sintaxis de funciones definidas por el usuario

Introducción
El código se comprueba en segundo plano durante la programación. Los errores de sintaxis se
marcan con una línea ondulada roja. En este proceso se comprueba si es correcta la sintaxis
y la validez de las referencias a objetos de la función definida por el usuario.
Compruebe la sintaxis en el editor "Scripts" para detectar todos los errores en el código, así
como para mostrar los correspondientes mensajes de error. Durante el test se visualizan los
mensajes de error que genera el analizador sintáctico de scripts.
Para comprobar si las funciones VB definidas por el usuario contienen errores de
programación lógicos, utilice un depurador por separado.

Tipos de errores
Los tipos de errores indicados a continuación se detectan al comprobar la sintaxis y se emiten
en la "Ventana de resultados":
● Cadena de caracteres desconocida (p. ej. no es una palabra clave)
● Asignación de un valor a una constante
● Ya existe el nombre de una variable local creada con la instrucción Dim, p. ej.: como
parámetro, objeto o elemento del modelo de objeto
● Error de sintaxis

Requisitos
● La función definida por el usuario está abierta.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1441

Trabajar con funciones de sistema y Runtime Scripting
9.4 Crear funciones VB definidas por el usuario

Procedimiento
Para comprobar la sintaxis, proceda del siguiente modo:
1. Haga clic en
para iniciar la comprobación de la sintaxis.
Se comprueba la sintaxis. Los resultados de la comprobación de sintaxis se muestran en
la ventana de inspección, en "Información > Compilar". Los errores de sintaxis se visualizan
con el número de línea.
2. En caso necesario, corrija los errores en la función definida por el usuario.

Particularidad en la comprobación de la sintaxis de funciones definidas por el usuario
Las funciones definidas por el usuario no se interpretan hasta el runtime. Cuando se compila
un panel de operador, el sistema comprueba que la sintaxis de sus scripts de usuario sea
correcta. Sin embargo, en determinadas circunstancias es posible que se produzcan errores
en tiempo de ejecución.

9.4

Crear funciones VB definidas por el usuario

9.4.1

Acceso a objetos con VBS

Introducción
En los VB Scripts de usuario, los objetos del modelo VBS están disponibles junto con las
propiedades y los métodos correspondientes.
En runtime es posible leer y modificar las propiedades de los objetos.

Crear referencias a objetos
Para crear referencias a objetos en funciones VB definidas por el usuario, utilice la lista
correspondiente. Para identificar un objeto, utilice su nombre o su número de posición en la
lista.
Si se accede con frecuencia a las propiedades de un objeto, generará una referencia de objeto.
A las propiedades de objeto se accede con y sin referencia de objeto.
Mediante la siguiente instrucción se hace referencia al primer objeto de la imagen
"MainScreen":

'VBS_Example_01
Dim objObject
'Change to Screen "MainScreen"
HMIRuntime.BaseScreenName = "MainScreen"
Set objObject = HMIRuntime.Screens(1).ScreenItems(1)

1442

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.4 Crear funciones VB definidas por el usuario
Mediante la siguiente instrucción se hace referencia a un objeto a través de su nombre y se
modifica una propiedad del objeto. El objeto ha de haberse creado con este nombre en la
imagen.

'VBS_Example_02
Dim objCircle
HMIRuntime.BaseScreenName = "MainScreen"
Set objCircle = HMIRuntime.Screens(1).ScreenItems("Circle_01")
objCircle.BackColor = vbGreen

9.4.2

Utilización de variables VB

Definición de variables VB
Las variables VB se declaran insertando la línea de definición antes del nombre de un VB
Script de usuario.
Dim objScreen
Dim objScrItem
El ámbito de validez de una variable VB depende de dónde se ha declarado.

VB Scripts de usuario
En el editor "Scripts" el área de declaración son por defecto las filas 1 y 2. Es posible agregar
las filas que se quieran.

Cada variable VB definida de este modo se puede utilizar en VB scripts de usuario. Al
comprobar la sintaxis en el editor "Scripts", aparece un mensaje indicando que la variable VB
es desconocida.
La variable VB no se conoce hasta el runtime. Dicha variable se crea al iniciar el runtime, aun
cuando no se ha llamado el propio VB Script de usuario.
Para evitar incoherencias, las variables VB deben ser unívocas en los VB scripts de usuario.

VB Scripts locales
El área de declaración de un script local pertenece a la imagen. A las variables declaradas allí
se puede acceder desde cualquier script dentro de la imagen. Si se copia un objeto de imagen
con un script local en otra imagen o en la librería, se copia también el script, pero no la sección
de declaración.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1443

Trabajar con funciones de sistema y Runtime Scripting
9.4 Crear funciones VB definidas por el usuario
En el editor para VB Scripts locales se puede mostrar y ocultar el área de declaración.
Encontrará más información al respecto en "Editor para scripts locales (Página 1466)".
● VB Scripts locales con disparador acíclico
Cada variable VB definida de este modo se aplica automáticamente al área de declaración
de cada script local con disparador acíclico. En los scripts locales con disparador cíclico el
área de declaración permanece vacía.
● VB Scripts locales con disparador cíclico
Cada variable VB definida de este modo se aplica automáticamente al área de declaración
de cada VB Script local con disparador cíclico. En los scripts locales con disparador acíclico
el área de declaración permanece vacía.

Ejemplo
En la propiedad "Color de fondo" se configura un VB Script local. El VB Script local posee un
disparador cíclico.
En el área de declaración se declaran las variables VB a y b.

Si se asocia un VB Script local al evento "Modificado", el VB Script local posee un disparador
acíclico. El área de declaración está vacía.

Al asociar un VB Script local con disparador cíclico a otra propiedad, las variables VB a y b ya
están declaradas en el área de declaración.

1444

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.4 Crear funciones VB definidas por el usuario

Consulte también
Editor para scripts locales (Página 1466)

9.4.3

Crear una función VB definida por el usuario

Introducción
Cuando se crea una función VB definida por el usuario, se definen los ajustes indicados a
continuación:
● El nombre con el que se debe llamar la función VB definida por el usuario.
● El tipo de función VB definida por el usuario.
● Los parámetros que se transfieren a la función VB definida por el usuario en runtime.
Utilice únicamente los caracteres siguientes para el nombre:
● de "A" a "Z"
● de "a" a "z"
● de "0" a "9"
● "_" como separador
Nota
Cuando se modifican los parámetros o el tipo de función, el cambio se marca en color en
el lugar en que se realiza como, p. ej., en la lista de funciones.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1445

Trabajar con funciones de sistema y Runtime Scripting
9.4 Crear funciones VB definidas por el usuario

Procedimiento
Para crear una función VB definida por el usuario, haga lo siguiente:
1. Abra "Scripts" en el árbol del proyecto.
2. En la navegación del proyecto, haga doble clic en "Agregar función VB nueva" bajo
"Funciones VB".

La función VB definida por el usuario se crea en una nueva ficha en el área de trabajo. En
la ventana de inspección se abre la máscara para introducir los ajustes de configuración de
la función VB definida por el usuario.
3. En la ventana de inspección configure la función VB definida por el usuario en "Propiedades
> General > General".
4. Introduzca un "Nombre" explicativo para la funcion VB definida por el usuario.
5. Seleccione el "Tipo" de función VB definida por el usuario.
– "Function" tienen valor de retorno.
– "Sub" no tienen valor de retorno.
6. Para añadir parámetros, haga doble clic en la lista "Parámetros" en "<Agregar>".
Introduzca el nombre del parámetro y especifique el tipo de parámetro.
Encontrará más información al respecto en "Transferir y devolver valores en VBS
(Página 1449)".
– "ByVal" transfiere el valor del parámetro.
– "ByRef" transfiere la dirección del parámetro.
7. Introduzca su código en el área de trabajo.
Encontrará más información al respecto en "Editor "Scripts" (Página 1432)".

Resultado
La función VB definida por el usuario está creada. En la barra de título se visualizan el tipo, el
nombre y los parámetros de función.
El principio y el final se insertan automáticamente al crear la función definida por el usuario.

1446

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.4 Crear funciones VB definidas por el usuario
Cuando se protegen funciones VB definida por el usuario con una contraseña, estos se
guardan en el proyecto de forma cifrada. Encontrará más información al respecto en
"Protección de funciones definidas por el usuario (Página 1462)".
La figura siguiente muestra una función VB definida por el usuario que convierte la temperatura
de "Fahrenheit" a "grados centígrados":

Consulte también
Transferir y devolver valores en VBS (Página 1449)
Editor "Scripts" (Página 1432)
Protección de funciones definidas por el usuario (Página 1462)
Llamada de funciones de sistema (Página 1435)
Llamada de funciones definidas por el usuario (Página 1436)

9.4.4

Cambiar el nombre de una función VB definida por el usuario

Cambiar el nombre de un VB Script de usuario en el árbol del proyecto
Para cambiar el nombre de un VB Script de usuario en el árbol del proyecto, proceda del
siguiente modo:
1. Seleccione el VB Script de usuario deseado en el árbol del proyecto.
2. En el menú contextual del VB Script de usuario, seleccione el comando "Cambiar nombre
(F2)".
3. Introduzca un nombre nuevo para el VB Script de usuario.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1447

Trabajar con funciones de sistema y Runtime Scripting
9.4 Crear funciones VB definidas por el usuario

Cambiar el nombre del VB Script de usuario en la ventana de inspección
Para cambiar el nombre de un VB Script de usuario en la ventana de inspección, proceda del
siguiente modo:
1. Abra el VB Script de usuario en el editor "Scripts".
2. En la ventana de inspección haga clic en "Propiedades > Propiedades > General".
3. Introduzca el nuevo nombre de función.

Resultado
Se ha cambiado el nombre del VB Script de usuario. Los lugares se adaptan automáticamente.

9.4.5

Ejecutar una función VB definida por el usuario

Introducción
En WinCC existen las siguientes posibilidades para ejecutar una función VB definida por el
usuario:
● Lista de funciones
● Función VB definida por el usuario
● VB Script local (sólo en WinCC Runtime Professional)

Llamar una función VB definida por el usuario en una lista de funciones
1. El VB Script de usuario se agrega a una lista de funciones igual que una función de sistema.
Encontrará las funciones VB definidas por el usuario en la lista de selección, apartado
"Funciones VB".
Encontrará más información en "Configurar la lista de funciones".
2. Si el VB Script de usuario tiene parámetros, suministre valores estáticos o variables HMI a
los parámetros.
3. Si el VB Script de usuario posee un valor de retorno, seleccione una variable HMI. El valor
para procesar se transfiere a la variable HMI.
Nota
En una lista de funciones solo pueden utilizarse funciones definidas por el usuario de un
mismo lenguaje de programación. Al seleccionar la primera función definida por el usuario
se define el lenguaje de programación.

1448

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.4 Crear funciones VB definidas por el usuario

Llamar una función VB definida por el usuario en una función VB definida por el usuario
1. Abra el VB Script de usuario en el que quiera llamar el VB Script de usuario.
2. Llame la función VB definida por el usuario en la sintaxis del lenguaje de programación.
Encontrará más información al respecto en "Llamada de scripts de usuario".
3. Si el VB Script de usuario tiene un valor de retorno, asigne una expresión al VB Script, p. ej.
una variable local.
Nota
En un VB Script de usuario sólo se pueden llamar scripts de usuario de un mismo lenguaje
de programación.

Llamar una función VB definida por el usuario en un VB script local
1. La lista de funciones se ha convertido en un VB script local.
2. Llame la función VB definida por el usuario en la sintaxis del lenguaje de programación.
Encontrará más información al respecto en "Llamada de scripts de usuario".
3. Si el VB Script de usuario tiene un valor de retorno, asigne una expresión al VB Script, p. ej.
una variable local.
Nota
En un VB Script local sólo se pueden llamar scripts de usuario del mismo lenguaje de
programación.

Consulte también
Llamada de funciones de sistema (Página 1435)
Llamada de funciones definidas por el usuario (Página 1436)
Configurar la lista de funciones (Página 1428)

9.4.6

Transferir y devolver valores en VBS

Transferir un valor
Existen las posibilidades siguientes para transferir parámetros.
● "Call by Value" - ByVal
ByVal transfiere el valor del parámetro. Si se transfiere como parámetro una variable, al
ejecutar el script de usuario se transferirá a éste el valor de la variable.
● "Call by Reference" - ByRef
ByRef transfiere la dirección del parámetro. Si se transfiere como parámetro una variable,
al ejecutar el script de usuario se transferirá a éste la dirección de la variable.
Al llamar scripts de usuario y funciones de sistema en scripts de usuario, el parámetro se
transfiere como ByRef.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1449

Trabajar con funciones de sistema y Runtime Scripting
9.4 Crear funciones VB definidas por el usuario

Retornar un valor
Los valores de retorno sirven para devolver el resultado de un cálculo (p. ej. el valor medio de
dos números). Asimismo permiten indicar si una instrucción se ha ejecutado correctamente.
Por este motivo, las funciones de sistema que ejecutan operaciones con archivos (p.ej. borrar)
tienen también un valor de retorno.
Para que un scripts de usuario pueda devolver un valor, se debe ajustar el tipo "Function". En
el script de usuario asigne al valor de retorno el nombre de la función:

Para obtener la media de dos números, llame el script de usuario Average y transfiera el
resultado p. ej. a la variable HMI AverageValue.
● En una función VB definida por el usuario

SmartTags("AverageValue") = Average ("4", "10")

● En la lista de funciones

El valor de la variable HMI AverageValue puede mostrarse en un campo E/S.

Consulte también
Crear una función VB definida por el usuario (Página 1445)
Ejemplo: convertir Fahrenheit a Celsius (Página 1490)
Ejemplo: convertir pulgadas a metros (Página 1492)

1450

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.5 Crear C Scripts de usuario

9.5

Crear C Scripts de usuario

9.5.1

Acceso a objetos con C

Introducción
Para acceder a las propiedades de objetos existen las funciones de sistema siguientes:
● "GetProp": Las funciones de sistema que empiezan con "GetProp", leen un valor.
● "SetProp": Las funciones de sistema que empiezan con "SetProp", escriben un valor.
Para cada tipo de datos existe una función de sistema independiente con GetProp y SetProp.

Direccionar una propiedad de objeto
Durante la asignación de parámetros, se puede abrir con <Ctrl+J> la lista de objetos, en la que
se pueden seleccionar los objetos y propiedades disponibles. La comprobación de sintaxis
verifica la plausibilidad de los tipos de datos de los parámetros transferidos.

Escribir propiedades del objeto
El siguiente ejemplo muestra cómo se desplaza un círculo al nivel "4":
SetPropLong("Screen_1", "Circle_1", "Layer", 4);

Consulte también
Ejemplo para acceder a objetos en el editor Imágenes (Página 1516)

9.5.2

Crear C Header

Introducción
Utilice el archivo Header "GlobalDefinitions.h" para definir funciones, variables y constantes
que podrá utilizar en todos los C scripts locales y funciones C definidas por el usuario. De este
modo se reduce el volumen de los scripts C locales y las funciones C definidas por el usuario
y se evitan redundancias. Las modificaciones se efectúan de modo centralizado en el archivo
Header.
Una vez definidas en el proyecto, las funciones C definidas por el usuario están
automáticamente disponibles. No es necesario definir estas funciones C en el archivo
"GlobalDefinitions.h".
Las librerías C "Math" se referencian por defecto.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1451

Trabajar con funciones de sistema y Runtime Scripting
9.5 Crear C Scripts de usuario
Además es posible:
● Crear archivos C Header adicionales.
● Integrar archivos C Header externos.

Crear un archivo C Header adicional
1. En la navegación del proyecto, haga doble clic en "Agregar C Header nuevo" en "Scripts > C
Header".
2. Introduzca un "Nombre" para el C Header en "Propiedades > General > General" de la
ventana de inspección.
3. Inserte en el área de trabajo las declaraciones de variables y constantes necesarias.

Utilizar un archivo C Header en una función C
1. Para usar las declaraciones del archivo C Header en una función C, inserte el C Header en
el área global de la función C. El C Header se integra con una instrucción #include. Para
evitar errores al acceder a variables, los archivos C Header no deben leerse varias veces.
La siguiente construcción, p. ej., ayuda a evitar la lectura múltiple de archivos Header.
#ifndef _myHeader_h
#define _myHeader_h
#include "myheader.h"
#endif

Definir la ruta Include para archivos C Header externos
Para utilizar archivos C Header externos, debe definirse la ruta Include. Proceda del siguiente
modo:
1. Seleccione el panel de operador deseado.
2. Elija el comando de menú "Opciones > Configuración".
3. En la navegación del área, seleccione la ruta para el C Header adicional en "Visualización >
Runtime Scripting".
4. Cierre WinCC y vuelva a abrirlo.
5. En el menú contextual del panel de operador, elija el comando "Compilar > Software
(compilar todo)".
Nota
Copiar un proyecto en el que se utiliza un archivo C Header externo
La ruta del archivo Header externo no se guarda en el proyecto y solo es válida en el equipo
en el que se ha definido. Si copia este proyecto en otro equipo, debe redefinir la ruta Include
para archivos C Header externos en el proyecto copiado.

1452

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.5 Crear C Scripts de usuario

9.5.3

Usar variables globales C

Definición de variables globales C
Las variables globales C se definen insertando la línea de definición antes del nombre de una
función:

int global_a; //The tag global_a is defined as integer
void myfunction()
{
//insert the code starting here
}

Usar variables globales C
Las variables globales C se utilizan en funciones C definidas por el usuario o en scripts en C
locales declarando como externas las variables C del archivo Header "GlobalDefinitions.h":
GlobalDefinitions.h
extern int global_a;
Función C definida por el usuario
// Insert the header starting here
#include "GlobalDefinitions.h"
void myFunction()
{
//insert the code starting here
printf ("C2: %i\r\n", ++ global_a);
}

De este modo se le comunica al compilador que no ha de crear la variable global_a por sí
mismo, sino que se creará en runtime en otro lugar.
Si se modifica entonces el valor de la variable global_a, el valor modificado estará disponible
en todas las funciones C definidas por el usuario y en los scripts en C locales.
También puede declarar variables C globales directamente dentro de una función. Para mayor
claridad y para evitar definiciones dobles se recomienda, no obstante, declarar las variables
globales C sólo en un lugar.
Nota
Cada función definida por el usuario y las variables C globales definidas con ella dispone de un
espacio máximo de memoria de 64 Kbytes.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1453

Trabajar con funciones de sistema y Runtime Scripting
9.5 Crear C Scripts de usuario

Ámbito de validez
Cada variable declarada en GlobalDefinitions.h como variable externa se conoce en todas las
funciones C definidas por el usuario y en los scripts en C locales en runtime. Dicha variable se
crea al iniciar el runtime, aun cuando no se haya llamado la propia función definida por
elusuario.
Nota
En WinCC ServiceMode no se pueden intercambiar las variables C globales entre las
funciones C definidas por el usuario en el planificador de tareas y las funciones definidas por
el usuario en el editor de imágenes.
Si desea direccionar la variable por medio del WebNavigator, debe llamar a la función C con
las variables C declaradas globalmente.

9.5.4

Llamar funciones de DLLs en C Scripts de usuario

Introducción
En los C Scripts de usuario pueden usarse funciones procedentes de DLLs. Con esto se
aprovecha la funcionalidad de las DLL existentes y se evitan redundancias.
Nota
DLL de Release y Debug
WinCC se suministra como versión Release y, por lo tanto, utiliza las versiones Release de las
DLL del sistema. Si se utilizan DLL propias en la versión Debug, puede cargarse
adicionalmente la DLL Release. Para evitar sobrecargar el sistema, cuando utilice DLL propias
emplee siempre la versión Release de la DLL.

Requisitos
La DLL se encuentra en la carpeta "..\Common Files\Siemens\bin" de WinCC o en una carpeta
definida a tal efecto en la variable de sistema PATH. Esta variable se define mediante las
propiedades de sistema del sistema operativo.

Procedimiento
Para llamar funciones desde DLL, haga lo siguiente:
1. Abra el C Script de usuario en el que desea llamar funciones desde una DLL.
2. Agregue al inicio del C Script de usuario el siguiente código:

1454

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.5 Crear C Scripts de usuario

#pragma code("<Name>.dll")
//Declare functions stored in
<Return value> <Function name
<Return value> <Function name
...
<Return value> <Function name
#pragma code

DLL:
1>(...);
2>(...);
n>(...);

Resultado
Las funciones <Nombre de función 1> ... <Nombre de función n> de <Name.dll> están
declaradas. Pueden llamarse las funciones en el C Script de usuario.

Ejemplo
El siguiente ejemplo muestra cómo integrar el archivo "kernel32.dll" y llamar la función
"GetLocalTime":

#pragma code("kernel32.dll")
VOID GetLocalTime(LPSYSTEMTIME lpSystemTime);
#pragma code()
SYSTEMTIME st;
GetLocalTime(&st);

9.5.5

Establecer página de códigos para función C

Introducción
Puede utilizar el proyecto WinCC en varios idiomas. Defina para cada script en C la página de
códigos del idioma que se utilizará para la traducción. La página de códigos afecta a la
visualización de todos los textos que se mostrarán en runtime en el script en C.
Al crear una función C puede optar por la configuración del panel de operador o por uno de los
idiomas de runtime configurados.
La configuración de runtime del panel de operador ofrece las siguientes opciones:
● Idioma de sistema operativo para programas no Unicode
La función C se traduce al inglés en el ES (sistema de ingeniería).
Los textos en runtime se visualizan en la página de códigos de este idioma.
● Idioma de WinCC Runtime configurado actualmente
La función C se traduce al inglés en el ES.
Los textos en runtime se visualizan en la página de códigos de este idioma.
● Idioma de runtime configurado
La función C se traduce a este idioma en el ES.
Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1455

Trabajar con funciones de sistema y Runtime Scripting
9.5 Crear C Scripts de usuario

Requisitos
● En el editor "Idiomas del proyecto" están activados los idiomas deseados.
● En el editor "Idioma y fuente" están activados los idiomas de runtime deseados.

Selección de la página de códigos para el panel de operador
1. Haga doble clic en "Configuración de runtime" en el árbol del proyecto.
2. Haga clic en "Idioma y fuente".
3. En "Configuración de idioma para script > Idioma de scripts C con "Utilizar la configuración
del dispositivo'" ajuste la ventana de selección mediante
:
– Selección de todos los idiomas de runtime
– Selección de las demás opciones
4. Seleccione la página de códigos deseada

Resultado
Si en runtime se muestran textos mediante una función en C, se utiliza la página de códigos
configurada para el script.

9.5.6

Crear una función C definida por el usuario

Introducción
Al crear una función C definida por el usuario, debe definir los ajustes indicados a
continuación:
● El nombre con el que se debe llamar la función en C definida por el usuario.
● El tipo de función en C definida por el usuario.
● Los parámetros que se transfieren a la función en C definida por el usuario en Runtime.
Nota
Cuando se modifican los parámetros o el tipo de función, el cambio se marca en color en
el lugar en que se realiza como, p. ej., en la lista de funciones.
● La página de códigos para la función C.
Utilice únicamente los caracteres siguientes para el nombre:
● de "A" a "Z"
● de "a" a "z"

1456

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.5 Crear C Scripts de usuario
● de "0" a "9"
● "_" como separador
Nota
En los nombres no se diferencia entre mayúsculas y minúsculas. No se pueden crear dos
funciones en C definidas por el usuario con el mismo nombre pero diferente escritura.
Nota
Nombres de variable no permitidos
Los siguientes nombres ya están asignados en runtime al tipo de datos "char*", por lo que
no pueden utilizarse como variables internas en C-Scripting:
● "Object"
● "Property"
● "Tag"
● "Picture"

Procedimiento
Para crear una función en C definida por el usuario nueva, proceda del siguiente modo:
1. Abra "Scripts" en el árbol del proyecto.
2. En la navegación del proyecto, haga doble clic en "Agregar función C nueva" bajo "C
Scripts".

La función en C definida por el usuario se creará como nueva ficha en el área de trabajo.
En la ventana de inspección se abre la máscara para introducir los ajustes de configuración
de la función.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1457

Trabajar con funciones de sistema y Runtime Scripting
9.5 Crear C Scripts de usuario
3. Elija la configuración de idioma deseada en "Página de códigos".

4. En la ventana de inspección configure la función en "Propiedades > General > General".
5. Introduzca un "Nombre" explicativo para la función en C definida por el usuario.
Seleccione el "Tipo" de la función en C definida por el usuario. Encontrará más información
al respecto en "Transferir y devolver valores en C".
– Void: la función no posee valor de retorno.
– Variable: el valor de retorno se devuelve como valor de variable.
– Puntero: el valor de retorno apunta a la dirección de la variable.
6. Para añadir parámetros, haga doble clic en la lista "Parámetros" "<Agregar>". Introduzca el
nombre del parámetro. Encontrará más información al respecto en "Transferir y devolver
valores en C".
– La variable transfiere el valor del parámetro.
– El puntero transfiere la dirección del parámetro.
7. Escriba el código en el área de trabajo.

Resultado
La función en C definida por el usuario está creada. En la barra de título se visualizan el tipo,
el nombre y los parámetros de función.
El principio y el final se insertan automáticamente al crear la función definida por el usuario.
Al proteger funciones en C definidas por el usuario con una contraseña, se guardan en el
proyecto de forma cifrada. Encontrará más información al respecto en "Protección de
funciones definidas por el usuario (Página 1462)".
La figura siguiente muestra una función en C definida por el usuario que convierte la
temperatura de "Fahrenheit" a "grados centígrados":

1458

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.5 Crear C Scripts de usuario

Consulte también
Editor "Scripts" (Página 1432)
Protección de funciones definidas por el usuario (Página 1462)

9.5.7

Cambiar el nombre de una función C definida por el usuario

Cambiar el nombre de un C Script de usuario en el árbol del proyecto
Para cambiar el nombre de un C Script de usuario en el árbol del proyecto, proceda del
siguiente modo:
1. Seleccione el C Script de usuario en el árbol del proyecto.
2. En el menú contextual del C Script de usuario, seleccione el comando "Cambiar nombre
(F2)".
3. Introduzca un nombre nuevo para el C Script de usuario.

Cambiar el nombre del C Script de usuario en la ventana de inspección
Para cambiar el nombre de un C Script de usuario en la ventana de inspección, proceda del
siguiente modo:
1. Abra el C Script de usuario en el editor "Scripts".
2. En la ventana de inspección haga clic en "Propiedades > General > General".
3. Introduzca el nuevo nombre de función.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1459

Trabajar con funciones de sistema y Runtime Scripting
9.5 Crear C Scripts de usuario

Resultado
Se ha cambiado el nombre del C Script de usuario. Los lugares se adaptan automáticamente.

9.5.8

Ejecutar una función C definida por el usuario

Introducción
En WinCC existen las siguientes posibilidades para ejecutar una función C definida por el
usuario:
● Lista de funciones
● Función C definida por el usuario
● C script local

Llamar una función C definida por el usuario en una lista de funciones
1. El C Script de usuario se agrega a la lista de funciones igual que una función de sistema.
Encontrará las funciones C definidas por el usuario en la lista de selección, apartado
"Funciones C".
Encontrará más información en "Configurar la lista de funciones".
2. Transfiera a los parámetros valores estáticos o variables HMI.
3. Si el C Script de usuario posee un valor de retorno, seleccione una variable HMI. El valor
para procesar se transfiere a la variable HMI.
Nota
En una lista de funciones solo pueden utilizarse funciones definidas por el usuario de un
mismo lenguaje de programación. Al seleccionar la primera función definida por el usuario
se define el lenguaje de programación.

Llamar un C Script de usuario en un C Script de usuario
1. Abra el C Script de usuario en el que quiera llamar el C Script de usuario.
2. Llame la función C definida por el usuario en la sintaxis del lenguaje de programación.
Encontrará más información al respecto en "Llamada de scripts de usuario".
3. Si el C Script de usuario tiene un valor de retorno, asigne la función a una expresión, p. ej.
una variable local.
Nota
En un C Script de usuario sólo se pueden llamar scripts de usuario de un mismo lenguaje
de programación.

1460

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.5 Crear C Scripts de usuario

Llamar una función C definida por el usuario en un C script local
1. La lista de funciones se ha convertido en un C script local.
2. Llame la función C definida por el usuario en la sintaxis del lenguaje de programación.
Encontrará más información al respecto en "Llamada de scripts de usuario".
3. Si el C Script de usuario tiene un valor de retorno, asigne una expresión al C Script, p. ej.
una variable local.
Nota
En un C Script local sólo se pueden utilizar scripts de usuario del mismo lenguaje de
programación.

Consulte también
Llamada de funciones de sistema (Página 1435)
Llamada de funciones definidas por el usuario (Página 1436)
Configurar la lista de funciones (Página 1428)

9.5.9

Transferir y devolver valores en C

Transferir un valor
Existen las posibilidades siguientes para transferir parámetros:
● Variable (Call by value)
Para guardar valores en la variable, se define el nombre de la variable y el tipo de datos. Sin
embargo, esta variable no se transfiere directamente, sino que se crea una copia. Al
ejecutar el C Script de usuario, se transfiere el valor de variable de la copia al C Script de
usuario. Si se modifica el valor de la variable, la modificación solo es válida dentro del C
Script de usuario.
● Puntero (Call by reference)
Un puntero es una variable que apunta a la dirección de una variable. Los punteros se
definen igual que las variables. Además se añade el carácter * en el tipo de datos, p. ej.
Double*. El C Script de usuario accede a la variable a la que apunta el puntero. Si se
modifica el valor de la variable, se escribe en la variable el valor modificado.

Retornar un valor
Un C Script de usuario puede ejecutar instrucciones sencillas y no devolver ningún valor. En
tal caso, el valor de retorno es del tipo de datos "void".
Si se requiere un valor de retorno, el valor puede devolverse como variable o como puntero.
Asimismo permiten indicar si una instrucción se ha ejecutado correctamente. Por este motivo,
las funciones de sistema que ejecutan operaciones con archivos (p.ej. escribir en un archivo)
tienen también un valor de retorno.
Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1461

Trabajar con funciones de sistema y Runtime Scripting
9.6 Protección de funciones definidas por el usuario
Para que una función C definido por el usuario pueda devolver un valor, es preciso ajustar p. ej.
el tipo "Double". Con la instrucción return se transfiere el resultado al C Script de usuario.

Para obtener la media de dos números, llame el C Script de usuario Average y transfiera el
resultado p. ej. a la variable HMI AverageValue.
● En una función C definida por el usuario

SetTagDouble("AverageValue",Average (4, 5));

● En la lista de funciones

El valor de la variable HMI AverageValue puede mostrarse en un campo E/S.

9.6

Protección de funciones definidas por el usuario

9.6.1

Establecer la protección de know-how

Procedimiento
Para configurar una protección de know-how para scripts de usuario, proceda del siguiente
modo:
1. Seleccione el script de usuario sin protección de know-how que desea proteger.
2. En el menú "Edición", elija el comando "Protección de know-how".
Se abre el cuadro de diálogo "Protección de know-how".
3. Haga clic en "Definir".
Se abre el cuadro de diálogo "Definir contraseña".
4. Introduzca una contraseña en el campo "Nueva".
5. Repita la contraseña en el campo "Confirmar".
6. Confirme la entrada con "Aceptar".
7. Cierre el cuadro de diálogo "Protección de know-how" haciendo clic en "Aceptar".

1462

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.6 Protección de funciones definidas por el usuario

Resultado
El script de usuario se dota con una protección de know-how. Los scripts de usuario con
protección de know-how se marcan con un candado en el árbol del proyecto. La contraseña es
válida para todos los scripts de usuario seleccionados.

9.6.2

Abrir scripts de usuario con protección de know-how
Solo es posible abrir varios scripts de usuario con protección de know-how en conjunto si se
protegen con la misma contraseña.

Procedimiento
Para abrir una función de usuario definida por el usuario y con protección de know-how,
proceda del siguiente modo:
1. Haga doble clic en el script de usuario que desea abrir.
Se abre el cuadro de diálogo "Protección de acceso".
2. Introduzca la contraseña para el script de usuario con protección de know-how.
3. Confirme las entradas con "Aceptar".

Resultado
Si se introduce la contraseña correcta, se abre el script de usuario con protección de knowhow. Sin embargo, la protección de know-how no se anula.
Después de abrir el script de usuario, este se puede editar hasta que se cierre el script de
usuario o el TIA Portal. Cuando se vuelva a abrir el script de usuario, será necesario volver a
introducir la contraseña. Si se cierra el cuadro de diálogo "Protección de acceso" con
"Cancelar" o "Cerrar", el script de usuario se abre, pero el código no se visualiza. El script de
usuario no se puede editar.

9.6.3

Eliminar protección de know-how

Procedimiento
Para eliminar la protección de know-how de un script de usuario, proceda del siguiente modo:
1. Seleccione el script de usuario cuya protección de know-how desea eliminar.
Nota
Para eliminar simultáneamente la protección de know-how de varios scripts de usuario, los
scripts seleccionados deben tener la misma contraseña.
2. En el menú "Edición", elija el comando "Protección de know-how".
Se abre el cuadro de diálogo "Protección de know-how".
3. Desactive la casilla de verificación "Ocultar código (protección de know how)".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1463

Trabajar con funciones de sistema y Runtime Scripting
9.6 Protección de funciones definidas por el usuario
4. Introduzca la contraseña.
5. Confirme la entrada con "Aceptar".

Resultado
La protección de know-how del script de usuario seleccionado se elimina.

9.6.4

Cambiar la contraseña

Procedimiento
Para cambiar la contraseña, proceda del siguiente modo:
1. Seleccione el script de usuario con protección de know-how cuya contraseña desea
cambiar.
Nota
Para cambiar simultáneamente la contraseña de varios scripts de usuario, los scripts
seleccionados deben tener la misma contraseña.
2. En el menú "Edición", elija el comando "Protección de know-how".
Se abre el cuadro de diálogo "Protección de know-how".
3. Haga clic en el botón "Cambiar".
4. Introduzca la contraseña antigua en el campo "Antigua".
5. Introduzca la contraseña nueva en el campo "Nueva".
6. Repita la contraseña nueva en el campo "Confirmar".
7. Confirme la entrada con "Aceptar".
8. Cierre el cuadro de diálogo "Protección de know-how" haciendo clic en "Aceptar".

1464

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.7 Creación de scripts locales

9.7

Creación de scripts locales

9.7.1

Scripts locales

Definición
Los scripts locales están asociados a un objeto individual, como p. ej. una propiedad de objeto,
y poseen un disparador cíclico o acíclico. Un script local se crea directamente en la ubicación:
● Planificador de tareas
● Imágenes
– Evento (lista de funciones convertida)
– Propiedad de objeto (lista de propiedades)
– Modificación de propiedad (lista de propiedades)
● Menús y barras de herramientas
● Sólo C Script: informes
– Campo E/S en la propiedad Valor de proceso
Los scripts locales no se muestran en la navegación de proyecto y solo están disponibles en
la ubicación.

Utilización
Los scripts locales se utilizan para lo siguiente:
● Lista de propiedades (objeto de imagen): Dinamizar una propiedad de objeto
Utilice un script local para dinamizar una propiedad de objeto en runtime mediante su valor
de retorno. Ejemplo: modificar la posición de un objeto en función de varios parámetros.
● Lista de funciones (objeto de imagen): convertir una lista de funciones en un script local
Convierta una lista de funciones en un script local para configurar instrucciones
condicionales o bucles en un evento.
● Planificador de tareas (tarea): ejecutar un script local de modo cíclico o acíclico
Utilice el planificador de tareas para ejecutar un script en momentos determinados.
Los scripts locales no se cargan en la memoria del panel de operador hasta que se utilizan,
p. ej. al cargar una imagen. De este modo, los scripts locales ahorran espacio de memoria en
el panel de operador.

Programación
Al crear un script local para una propiedad de objeto, se crea un script local con valor de
retorno. El valor de retorno devuelve el valor correspondiente a la propiedad del objeto.
Al crear un script local para un evento, se crea un script local sin valor de retorno.
Los parámetros que se transfieren al script local dependen del lenguaje de programación
utilizado y de la ubicación.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1465

Trabajar con funciones de sistema y Runtime Scripting
9.7 Creación de scripts locales
Parámetros típicos de un VB script local
Item: contiene la referencia de objeto:
● Planificador de tareas (tarea): no se transfiere ningún objeto.
● Menús y barras de herramientas: se transfiere el objeto que dispara el evento.
● Imágenes (objeto de imagen)
– Lista de propiedades (objeto de imagen): En las dinamizaciones se transfiere el objeto
de imagen cuya propiedad se dinamiza.
– Lista de funciones convertida (objeto de imagen): se transfiere el objeto de imagen cuyo
evento se configura.
Para acceder a las propiedades del objeto de imagen transferido, introduzca "item.". Se
listan las propiedades disponibles. Para acceder a otro objeto del modelo de objeto, utilice
ScreenItems.
Encontrará información detallada sobre parámetros de eventos en la referencia.
Parámetros típicos de un C script local
Char* screenName: contiene el nombre de la imagen que contiene el objeto cuya propiedad se
dinamiza.
Char* objectName: contiene el nombre de objeto cuya propiedad se dinamiza.
Char* propertyName: contiene la propiedad que se dinamiza.
Encontrará información detallada sobre parámetros de eventos en la referencia.

Ejecutar scripts locales
Los scripts locales requieren un disparador. El disparador establece cuándo se ejecuta el
script. El disparador que se utilice depende de la ubicación del script local:
● Los scripts locales procedentes de una lista de funciones convertida se ejecutan al
producirse el evento, p. ej. al pulsar.
● A los scripts locales de la lista de propiedades se les asigna automáticamente el disparador.
El disparador puede modificarse, p. ej., convirtiéndolo en disparador de variable.
● A los scripts locales de una tarea se les asigna el disparador configurado por el ingeniero
programador.

Consulte también
Editor "Scripts" (Página 1432)

9.7.2

Editor para scripts locales

Propiedades del editor para scripts locales
El editor para scripts locales no posee una configuración propia, sino que "hereda" los ajustes
de "Runtime Scripting".

1466

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.7 Creación de scripts locales
Este editor ofrece una funcionalidad similar a la del editor "Scripts". Encontrará más
información al respecto en "Editor "Scripts" (Página 1432)".
Las siguientes funcionalidades no están disponibles a través de la barra de herramientas:
● Listas de selección para propiedades y funciones
En el editor para VB Scripts locales existen los símbolos adicionales siguientes:
●

Muestra la sección de declaración.

●

Oculta la sección de declaración.

En el área de declaración se definen las variables VB locales. Encontrará más información al
respecto en "Utilización de variables VB (Página 1443)".

Disponibilidad
El editor para scripts locales puede ejecutarse desde los siguientes lugares:
● Planificador de tareas
– Evento: Ejecutar
● Imágenes
– Evento
– Propiedad de objeto (lista de propiedades)
– Modificación de propiedad (lista de propiedades)
● Menús y barras de herramientas
– Evento: Hacer clic
● Sólo C Script: informes
– Campo E/S en la propiedad Valor de proceso

Consulte también
Editor "Scripts" (Página 1432)
Utilización de variables VB (Página 1443)

9.7.3

Convertir la lista de funciones en un script local

Introducción
Si convierte una lista de funciones en un script local, puede configurar instrucciones
condicionales o bucles en un evento. Una lista de funciones puede convertirse en un VB Script
local o un C Script local.
Si la lista de funciones contiene una función definida por el usuario, la función determina el
lenguaje de programación.
Si p. ej. contiene una función C, la lista de funciones se convierte en un C script local.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1467

Trabajar con funciones de sistema y Runtime Scripting
9.7 Creación de scripts locales

Nota
Mensaje de error en la ventana de diagnóstico Global Script
Si en una función de sistema SetTag que ha sido convertida a un script en C se utiliza una
variable del tipo WString, al ejecutar la función se emitirá un mensaje de error en la ventana de
diagnóstico del Global Script . El mensaje no repercute en la ejecución de la función.
Las siguientes funciones SetTag se ven afectadas:
● SetTagWithOperatorEvent
● SetTagIndirect
● SetTagByTagIndirect
● SetTagIndirectByTagIndirect
● SetTagByProperty
● SetTagIndirectByProperty

Requisitos
La lista de funciones está abierta.

Procedimiento
Para convertir una lista de funciones en un script local, proceda del siguiente modo:
1. Seleccione el evento cuya lista de funciones desee convertir en un script.
2. Si es necesario, configure funciones del sistema en el evento.
3. Para convertir una lista de funciones en un script local, haga clic en

o

.

4. Introduzca el código del programa.
También puede usar las opciones de menú contextual "Convertir a VB Script" o "Convertir a C
Script".

Resultado
Cuando se produzca el evento, el script local se procesará automáticamente.

Borrar script local
Para borrar un script local, proceda del siguiente modo:
1. Seleccione el evento con el script local.
2. Elija el comando "Lista de funciones" del menú contextual del evento.
El script local se borrará.

1468

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar

9.7.4

Dinamizar propiedad de objeto con script local

Introducción
Con un script local se dinamiza una propiedad de objeto en runtime por medio del valor de
retorno del script.

Requisitos
● El objeto con la propiedad que debe dinamizarse está seleccionado.
● La ventana de inspección está abierta.

Procedimiento
1. Haga clic en

en la ventana de inspección.

2. Seleccione la propiedad de objeto que debe dinamizarse.
3. Seleccione la entrada "VB Script" o "C Script" en la columna "Dinamización".
Se abre un cuadro de diálogo.
4. Introduzca el código del programa.
5. Para cambiar el disparador, haga clic en la barra de herramientas en "

".

Resultado
En runtime, la propiedad de objeto cambia de acuerdo con la configuración de la lista de
propiedades.

Borrar una dinamización
1. Seleccione la propiedad de objeto dinamizada en la lista de propiedades.
2. Seleccione la entrada "Ninguna" en la columna "Dinamización".

9.8

Depurar

9.8.1

Depurar funciones de VB definidas por el usuario

Descripción general
Para probar en runtime una función de VB definida por el usuario puede utilizar p. ej. el
depurador de "Microsoft Visual Studio 2008".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1469

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar
El depurador se suministra con el programa de instalación de WinCC. Si ya hay instalada una
versión diferente de Visual Studio, p. ej. Microsoft Visual Studio 2010, utilice el depurador de
esa versión.

Depurador para WinCC Runtime Professional
El depurador Microsoft Visual Studio 2008 Shell (Integrated Mode) se encuentra en el DVD de
WinCC Runtime Professional, en el directorio Support.

Depurador para WinCC Runtime Advanced
El depurador Microsoft Visual Studio 2008 Shell (Integrated Mode) puede descargarse
gratuitamente de la página de inicio de Microsoft. Utilice únicamente la variante en inglés.
Para depurar se recomienda en principio el uso de las versiones actuales de Microsoft.

Instalar un depurador para WinCC
Procedimiento
1. Inicie el programa de instalación de Microsoft Visual Studio 2008 Shell (Integrated Mode)
2. Siga las indicaciones y acepte los ajustes estándar.
Se instala el siguiente programa: Microsoft Visual Studio 2008 Shell (Integrated Mode) ENU
3. Al iniciar el depurador por primera vez, se abre el cuadro de diálogo "Visual Studio Just-InTime Debugger".
Seleccione la entrada "New instance of Visual Studio 2008".
Para definir "Visual Studio 2008" como depurador estándar, active el ajuste "Set the
currently selected debugger as the default."

1470

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar
Microsoft Visual Studio 2008 Debugger

9.8.2

Conceptos básicos de la limpieza con debugger

Introducción
Con un depurador o debugger puede comprobar p. ej., si se han transferido los valores
correctos a las variables y si se aplican correctamente las condiciones de interrupción. En el
depurador dispone de las siguientes posibilidades:
● examinar el código fuente de la función
● controlar el procesamiento de las funciones paso a paso
● ver y modificar variables y valores de propiedades
● ver y controlar cómo se desarrolla la función

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1471

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar
El depurador sirve únicamente para encontrar errores en la función VB definida por el usuario.
Para ello se utilizan, por ejemplo, puntos de parada o se ejecuta paso a paso la función VB
definida por el usuario. Encontrará más información al respecto en la documentación del
depurador utilizado. Para corregir errores, hay que ir al editor "Scripts" de WinCC. Tras
compilar y cargar nuevamente se analiza nuevamente la función VB definida por el usuario con
el depurador.
Nota
Debe observarse que en la visualización del depurador su código está protegido contra
escritura. No es posible modificar el código directamente con el depurador, solamente se
puede verificar las modificaciones necesarias.

Diferencia en VBScript para Windows y Windows CE
El depurador comprueba la sintaxis de VBScript para Windows. Si la función contiene una
función VBScript para Windows CE, aparecerá un mensaje de error al respecto. Algunas de las
funciones VBScript son diferentes, como por ejemplo CreateObject.

Depuración de VB Script
Con el objeto "Debug" se emiten textos definidos por el usuario en un depurador. El objeto
posee los métodos "Write" y "WriteLine". Encontrará más información sobre el objeto "Debug"
en Internet (https://msdn.microsoft.com/en-us/library/wk3y866c(v=vs.84).aspx).
Con el objeto "Err" se reacciona a mensajes de error generados por otro objeto. El objeto posee
los métodos "Raise" y "Clear". Encontrará más información sobre el objeto "Err" en Internet
(https://msdn.microsoft.com/en-us/library/sbf5ze0e(v=vs.84).aspx).

1472

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar

Tipos de errores
Durante la limpieza con el depurador se distinguen los siguientes tipos de errores:
● Error de sintaxis
Los errores de sintaxis se producen p. ej. cuando se escribe una palabra clave
incorrectamente o se deja abierto un paréntesis. Si utiliza la comprobación de sintaxis de
WinCC, podrá excluir errores de sintaxis antes de probar las funciones en runtime.
Con la comprobación de sintaxis en WinCC se aplica un analizador sintáctico sin ejecutar
la función. La función se analiza imediatamente antes de si ejecución en runtime. Se
analizan todas sus partes, incluso aquellas que se ejecuten p. ej. después de producirse
una acción determinada en otro momento.
Si una función contiene errores de sintaxis no es posible iniciar el runtime.
Nota
En Runtime Professional se puede establecer en "Configuración de runtime > General >
Opciones para scripts" que se inicie el runtime aunque la función contenga errores de
sintaxis.
● Error de ejecución
Un error en tiempo de ejecución se produce cuando debe ejecutarse un comando no válido
o incorrecto, p. ej. porque no se ha definido una variable. Para detectar estos errores en
tiempo de ejecución, puede utilizarse la instrucción "On Error Resume Next" en VBScript.
Esta instrucción activa la instrucción siguiente a la que provocó el error de ejecución. En la
línea siguiente puede comprobarse el código de error con el objeto Err. Para desactivar el
tratamiento de errores en tiempo de ejecución en el script, utilice la instrucción "On Error
Goto 0".
● Errores lógicos
El depurador es muy útil para limpiar errores lógicos. Se produce un error lógico si no se
produce el evento esperado, p.ej. porque se verificó mal una condición. Para corregir
errores lógicos, ejecute la función paso a paso para así poder identificar la parte del script
que no funciona.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1473

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar

Ejemplo del tratamiento de errores
Sub OnClick(ByVal Item)
'VBS27
Dim objScreenItem
'
'Activation of errorhandling:
On Error Resume Next
For Each objScreenItem In ScreenItems
If "HMIRectangle" = objScreenItem.Type Then
'
'=== Property "RoundCornerHeight" only available for RoundRectangle
objScreenItem.RoundCornerHeight = objScreenItem.RoundCornerHeight * 2
If 0 <> Err.Number Then
HMIRuntime.Trace objScreenItem.Name & ": no RoundedRectangle" & vbCrLf
'
'Delete error message
Err.Clear
End If
End If
Next
On Error Goto 0 'Deactivation of errorhandling
End Sub

Procedimiento básico
Si se produce un error y el depurador ya está abierto, se muestra el script en una ventana y
protegida contra escritura. Puede desplazarse por el documento script, colocar puntos de
parada, ejecutar nuevamente el script con Runtime y repasar paso a paso los scripts.
No es posible editar el código fuente directamente en el depurador. Si ha encontrado un error,
puede corregirlo en la función en WinCC, cargar la imagen nuevamente y actualizarla en el
depurador.

Cambio de imagen durante la limpieza
Si se cambia la imagen durante la limpieza con el depurador se mantendrá abierto el
documento script de la imagen "antigua"; sin embargo, no será ya válido. Es posible que se
muestran errores no válidos ya que los objetos iniciados no estarán disponibles después de un
cambio de imagen.

1474

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar

9.8.3

Activar el depurador

Principio
Existen varias posibilidades de activar el depurador:
● Inicio automático del depurador al producirse un error en runtime.
● Visualizar un cuadro de error en runtime que permite iniciar el depurador.
● Iniciar el depurador desde el menú Inicio y abrir un script de runtime que se está ejecutando.

Conectar Visual Studio al runtime
1. Inicie el runtime.
2. Abra "Microsoft Visual Studio 2008".
3. En el menú "File > New" haga clic en "File".
4. Seleccione "Windows Script Host" y haga clic en "Open".
5. En el menú "Debug" haga clic en "Attach to Process".
6. Seleccione "
HmiRTm.exe". para un Panel o WinCC Runtime Advanced
PdlRt.exe: para WinCC Runtime Professional
7. Haga doble clic en un de los archivos de script en "Solution Explorer".

Visual Studio como depurador Just-In-Time
1. Abra "Microsoft Visual Studio 2008".
2. En el menú "Tools" haga clic en "Options".
3. Haga clic en el árbol sobre "Debugging" y "Just-In-Time".
4. En "Just-In-Time Debugging" active la opción "Script".
5. Cierre Visual Studio.
6. Inicie la simulación con el comando de menú "Online" > "Simulación" > "Con depurador de
scripts".

Finalizar el depurador
Puede finalizar el depurador sin tener que cerrar WinCC Runtime.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1475

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar

9.8.4

Diseño de los archivos de VBScript

Estructura de los archivos VBScript
Todas las funciones definidas por el usuario que se configuren en un dispositivo figurarán en
un archivo de script.

9.8.5

Diseño de los archivos de VBScript

Principio
Para posibilitar la ejecución simultánea de archivos VBScript cíclicos y activados por eventos
en Runtime Professional, durante la ejecución se separan estrictamente los archivos VBScript
activados por eventos de los archivos VBScript cíclicos/activados por variables. Así, un script
local cíclico no puede impedir la ejecución de un script de usuario que se activa al pulsar un
botón.
Para garantizar esto, los scripts locales activados por eventos y los scripts locales cíclicos y
activados por variables se guardan en archvios VBScript separados. Si se ha definido una
parte global de imágenes en archivos VBScript en el editor "Imágenes", esta parte se copiará
a ambos archivos VBScript.
Nota
Los dos archivos VBScript se tratan por separado, por lo que no tienen ningún rango de datos
común. Por lo tanto, no se sincronizan las variables globales de los dos archivos VBScript. Si
se debe hacer una sincronización, realícela por medio del objeto DataSet o por medio de
variables HMI internas.

Estructura de los archivos VBScript
Al limpiar archivos VBScript con el depurador se abren siempre los archivos VBScript de los
diferentes sistemas runtime.
Esto significa para el sistema runtime gráfico que obtendrá dos archivos por cada imagen:
● <Nombre de imagen>.pdl_events: Contiene los archivos VBScript controlados por eventos
● <Nombre de imagen>.pdl_triggers: Contiene los archivos VBScript cíclicos y controlados
por variables.

1476

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar
A continuación se explica la estructura de los archivos VBScript en el sistema runtime gráfico:
● Contenidos del archivo VBScript <nombre de imagen>.pdl_events
Código general
Scripts controlados por eventos
● Contenidos del archivo VBScript <nombre de imagen>.pdl_triggers
Código general
Scripts cíclicos o disparados por variables
Nota
Tenga en cuenta que los scripts locales y los scripts de usuario del sistema runtime gráfico
no se muestran con los nombres en el archivo VBScript en el que se guardaron en WinCC.

9.8.6

Nombres en el depurador

Nombres en el depurador
Los nombres de scripts de usuario en los archivos VBScript se diferencian en el depurador de
los nombres con los que se guardaron en WinCC.
Los nombres de funciones y scripts en los archivos de scripts se componen de acuerdo con las
reglas siguientes:
Tipo de acción

Nombre en el archivo script

Scripts cíclicos o disparados por variables en una
propiedad

Nombre del objeto_Nombre de propiedad_Dispa‐
rador

Eventos de ratón

ObjektName_OnClick
ObjektName_OnLButtonDown
ObjektName_OnLButtonUp
ObjektName_OnRButtonDown
ObjektName_OnRButtonUp

Eventos del teclado

ObjektName_OnKeyDown
ObjektName_OnKeyUp

Eventos de objetos

ObjektName_OnObjectChanged
ObjektName_OnSetFocus

Eventos en propiedades

ObjektName_PropertyName_OnPropertyChanged
ObjektName_PropertyName_OnPropertyState‐
Changed

Eventos de imágenes

Document_OnOpen
Document_OnClosed

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1477

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar

Longitud permitida para nombres de scripts
Los nombres de scripts en los archivos de scripts pueden tener un máxima de 255 caracteres.
Cada carácter especial utilizado en el nombre de un objeto es sustituido por cinco caracteres.
Detrás de una X que está en primer lugar se visualiza el carácter especial en un código
hexadecimal de cuatro dígitos. Si en un clic de ratón se configura, p.ej., una acción asociada
a un botón con el nombre "Púlsame", en el archivo de scripts aparece el script como
"PXFFFClsame_OnClick".
Si este nombre compuesto del objeto es demasiado largo, se muestra un mensaje de error
durante la verificación de sintaxis en WinCC. Debido a esta limitación no es posible elegir un
nombre sin límite de caracteres durante la configuración de los objetos gráficos.
Nota
Para determinar el nombre de un objeto en runtime, pulse <Ctrl+Alt+Mayús> y desplace el
ratón sobre el objeto correspondiente. El nombre de la imagen y del objeto se muestran en un
tooltip.

9.8.7

Puntos de parada

Introducción
Para parar el procesamiento del archivo VBScript en determinadas posiciones e ir delimitando
los errores lógicos paso a paso, inserte puntos de parada.
Cuando se actualiza un archivo VBScript en el depurador, se pierden todos los puntos de
parada.
Nota
Si en Runtime Professional posiciona un punto de parada en el archivo de script"
<NombreDeImagen>.pdl_trigger", se detendrán todos los procedimientos activados por
disparador.
Si en Runtime Professional posiciona un punto de parada en el archivo de script"
<NombreDeImagen>.pdl_event", se detendrán todos los procedimientos activados por evento.

Requisitos
● Runtime está activado.
● La imagen que se quiere depurar está activa.

1478

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar

Posicionar un punto de parada
1. Inicie el depurador y seleccione el archivo VBScript.
Si se ha seleccionado la activación automática del depurador en WinCC, se iniciará el
depurador en cuanto se ejecute un script con errores.
2. Coloque el cursor en la línea en la que quiere posicionar un punto de parada.
3. En el menú "Debug" elija el comando "Toggle Breakpoint".
La siguiente línea se marca con un punto rojo.
4. Cambie a WinCC Runtime y ejecute el archivo VBScript que quiere depurar.
El depurador se detiene en el primer punto de parada. La línea actual se marca con un
fondo amarillo.
Ahora se repasa el código del programa paso a paso.

Borrar un punto de parada
1. Sitúe el cursor en una línea con un punto de parada.
2. En el menú "Debug" elija el comando "Toggle Breakpoint".
Para borrar todos los puntos de parada de un archivo, vaya al menú "Debug" y elija el comando
"Delete All Breakpoints".

9.8.8

Trabajar paso a paso

Introducción
Utilice el depurador para ejecutar paso a paso los archivos VBScript (función definida por el
usuario o script local) y así delimitar sistemáticamente los errores lógicos. Compruebe los
efectos de cada línea de código en runtime.

Requisitos
● Runtime está activado.
● La imagen que se quiere depurar está activa.

Modo principal de proceder
1. Inicie el depurador y seleccione el archivo VBScript.
Si se ha seleccionado la activación automática del depurador en WinCC, se iniciará el
depurador en cuanto se ejecute un script con errores.
2. Coloque un punto de parada en el archivo VBScript. Normalmente se colocan puntos de
parada antes de aquellas líneas de código donde supuestamente se encuentran errores.
3. Cambie a WinCC Runtime y dispare un evento que inicie los archivos VBScript.
El depurador se detiene en el primer punto de parada y marca la línea actual.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1479

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar
4. Para seguir trabajando paso a paso, elija uno de los siguientes comandos de menú:
– "Debug > Step Over": Salta a la próxima línea del código. Si se llama una función
definida por el usuario en esta línea, se omite la función llamada. La función definida por
el usuario se ejecuta pero el depurador no le conduce por cada una de las líneas de la
función. En su lugar, pasa a la primera línea después de ejecutarse la función.
– "Debug > Step Into": Salta a la próxima línea del código. Si se llama una función definida
por el usuario en esta línea, se pasa a esta función. A continuación, la función iniciada
se ejecuta gradualmente.
– Para interrumpir la ejecución por pasos de una función llamada, elija el comando de
menú "Debug > Step Out". Se ejecuta la función hasta el final. El depurador salta a la
primera línea después de ejecutarse la función.
5. Vaya paso a paso hasta el final del documento o elija el comando de menú "Debug > Run"
para procesar todo el archivo VBScript hasta el final.

9.8.9

Ejecutar comandos

Introducción
En la ventana "Command Window" se introducen comandos que se ejecutan directamente.
Aquí puede:
● Iniciar métodos
● Iniciar procedimientos
● Modificar propiedades de objetos
Generalmente, en la ventana "Command Window" se ejecutan todos los comandos que
pueden ejecutarse también en un VB Script.
Nota
Para determinar el nombre de un objeto WinCC en WinCC Runtime Professional, pulse <Ctrl
+Alt+Mayús> y mueva el ratón sobre el objeto correspondiente. El nombre de la imagen y del
objeto se muestran en la información sobre herramientas (tooltip).

Requisitos
● El archivo VBScript se ejecuta en runtime.
● El depurador está abierto.

Procedimiento
1. Posicione como mínimo un punto de parada en el archivo VBScript.
2. Cambie a WinCC Runtime y realice una acción que ejecute el archivo VBScript.
El depurador se detiene en el primer punto de parada.

1480

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar
3. Seleccione "View > Other Windows > Command Window". Se abre la "Command Window".
4. Introduzca el comando deseado y confirme con <Return>.
Nota
Si se introduce un comando erróneo en "Command Window" no se generará ningún
mensaje de este error en runtime. En su lugar, en la Command Window se muestra el
mensaje "<Script Error>".

Ejemplo
Dim i
For i = 1 to 10
HMIRuntime.Trace i & vbnewline
Next

Cuando se está ejecutando este VB script y el depurador se encuentra en el punto de parada
del bucle, son posibles las siguientes acciones
● ?i
permite leer el valor de la variable i
● i=5
permite poner a 5 el valor de la variable i.

9.8.10

Determinar valores de variables o propiedades

Introducción
En la "Command Window" se determinan y modifican valores de variables o propiedades. De
este modo, por ejemplo, se vuelve a poner a cero un valor de proceso para el script de usuario
sin tener que detener este proceso.
Nota
Para determinar el nombre de un objeto WinCC en WinCC Runtime Professional, pulse <Ctrl
+Alt+Mayús> y mueva el ratón sobre el objeto correspondiente. El nombre de la imagen y del
objeto se muestran en la información sobre herramientas (tooltip).

Requisitos
● El archivo VBScript se ejecuta en runtime.
● El depurador está abierto.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1481

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar

Procedimiento
1. Posicione como mínimo un punto de parada en el archivo VBScript.
2. Cambie a WinCC Runtime y realice una acción que ejecute el archivo VBScript.
El depurador se detiene en el primer punto de parada.
3. Seleccione "View > Other Window > Command Window". Se abre la "Command Window".
4. Para determinar el valor de una variable o propiedad, introduzca la siguiente cadena de
caracteres:
– ? myTag
– ? myObject
No olvide el espacio que precede al nombre del objeto.
5. Pulse <Return>

9.8.11

Diagnóstico

9.8.11.1

Diagnóstico

Introducción
Cuando se ejecutan y comprueban los VB scripts y C scripts locales en runtime, se realiza
rápidamente un análisis con ayuda del objeto "Trabajo de impresión/diagnóstico de script".

Herramientas de diagnóstico
WinCC le facilita las herramientas necesarias para analizar el comportamiento durante la
ejecución en C scripts y VB scripts locales:
● El objeto Trabajo de impresión/diagnóstico de script "Diagnóstico de GSC"
● Emplear un debugger

Utilización
Para utilizar el diagnóstico de GSC, inserte el objeto "Trabajo de impresión/diagnóstico de
script" en una imagen. Utilice la plantilla "Diagnóstico de GSC".
Puede ser una imagen específicamente diseñada para los diagnósticos que se ejecuta en
runtime.

1482

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.8 Depurar

Diagnóstico GSC de VBS
El diagnóstico GSC muestra los métodos Trace contenidos en los scripts locales en la
secuencia temporal en que sean llamados. También se muestran instrucciones Trace en
funciones VB definidas por el usuario que se llaman en scripts locales. Con la aplicación
específica de instrucciones Trace, por ejemplo, para emitir valores de variables, es posible
seguir el desarrollo de scripts y de las funciones llamadas en ellos. Ud. indica la instrucción
Trace en la forma "HMIRuntime.Trace(<Salida>)". En la ventana de diagnóstico también se
muestran las situaciones de error que provocan la llamada de la función OnErrorExecute.

Diagnóstico GSC de C
El diagnóstico GSC muestra los métodos printf contenidos en los scripts locales en la
secuencia temporal en que sean llamados. También se muestran instrucciones printf en
funciones C que se llaman en scripts locales. De este modo, aplicando instrucciones printf para
fines concretos, p. ej. para devolver valores de variables, se puede seguir la secuencia de los
scripts y de las funciones llamadas en ellos.

Consulte también
Ejemplo para configurar una salida de diagnóstico a través de Trace (Página 1500)

9.8.11.2

Diagnóstico de GSC

Introducción
El diagnóstico de GSC muestra las instrucciones Trace contenidas en los scripts en la
secuencia temporal de su llamada en la ventana de diagnóstico. También se emiten
instrucciones Trace en funciones que se llaman en scripts. Con la aplicación específica de
instrucciones Trace, por ejemplo, para emitir valores de variables, es posible seguir el
desarrollo de scripts y de las funciones llamadas en ellos.

aplicación
Para poder utilizar el diagnóstico de GSC, inserte el objeto "Trabajo de impresión/diagnóstico
de script" del tipo Diagnóstico de GSC en una imagen. Con las propiedades del diagnóstico de
GSC se controla la apariencia de la ventana Diagnóstico de GSC.
Al cambiar la imagen se borra el contenido de la ventana de GSC Diagnóstico.
Nota
Los avisos de la ventana "GSC Diagnóstico" se muestran también cuando el debugger está
activado.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1483

Trabajar con funciones de sistema y Runtime Scripting
9.9 Comportamiento en tiempo de ejecución en runtime

9.8.11.3

Insertar ventana de diagnóstico de GSC en una imagen

Introducción
Para utilizar el diagnóstico de GSC, inserte el objeto "Trabajo de impresión/diagnóstico de
script" en una imagen. Puede usarse cualquier imagen ya existente o crear una imagen
exclusivamente para fines de diagnóstico. En la ventana de inspección del objeto "Trabajo de
impresión/diagnóstico de script" se define que el objeto se usará para el diagnóstico GSC.

Requisitos
● La imagen deseada está abierta.
● La Task Card "Herramientas" está abierta.

Procedimiento
Para insertar la ventana de diagnóstico GSC, proceda del siguiente modo:
1. Inserte en la imagen el objeto "Trabajo de impresión/diagnóstico de script" desde la paleta
"Controles" de la Task Card "Herramientas".
2. En "Misceláneo > Nombre", asigne un nombre a la ventana de diagnóstico GSC.
3. En la ventana de inspección, apartado "Propiedades > Propiedades > General > Contenido
> Contenido de la ventana", seleccione la opción "Funciones".
4. En "Plantilla", seleccione la opción "Diagnóstico de GSC".
5. En "General", "Representación" y "Misceláneo", defina las restantes opciones de la
ventana de diagnóstico GSC.

9.9

Comportamiento en tiempo de ejecución en runtime

9.9.1

Procesamiento de scripts de usuario en runtime

Principio
En runtime siempre se procesa sólo un script de usuario. Si hay varios scripts de usuario
pendientes de procesamiento, éstos se ponen en una cola de espera y se procesan una tras
otra.
Nota
Un bucle en un script de usuario bloquea la ejecución de los restantes scripts en cola de
espera, aunque éstos se hayan iniciado de forma asíncrona.

1484

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.9 Comportamiento en tiempo de ejecución en runtime
WinCC soporta una profundidad de anidamiento de 8 scripts de usuario como máximo. Tenga
en cuenta que la profundidad de anidamiento no se comprueba.
Nota
Si se configura un script de usuario asociado al evento "Parada de runtime", en dicho script
sólo se pueden utilizar las funciones de sistema disponibles en el evento "Parada de runtime".
Asegúrese de que la finalización del runtime no se vea perturbada por la ejecución del script
de usuario.
Nota
Configuración de scripts de usuario
En un mismo momento no es posible iniciar simultáneamente un número excesivo de scripts
de usuario. Evite una sobrecarga permanente del sistema del 100 %.
Los scripts de usuario se procesan con prioridad baja para no obstaculizar la visualización de
valores y el manejo. Si el sistema está sobrecargado, los scripts de usuario que están
pendientes de ejecutarse se marcan inicialmente para su posterior ejecución. El tamaño
máximo de la lista de preselección depende del panel de operador y está limitado por el
número máximo permitido de scripts de usuario. Encontrará más información al respecto en
las características de rendimiento. Si en un momento se lanzan más scripts de usuario de los
que pueden marcarse, se rechazan las llamadas sobrantes y se emite un aviso de sistema.

Cambio de paneles de operador
Si en una función definida por el usuario se utilizan funciones de sistema no disponibles en el
panel de operador seleccionado, aparecerá una advertencia. A su vez, la correspondiente
función de sistema en el script de usuario se subraya con una línea ondulada azul.

Consulte también
Funciones definidas por el usuario (Página 1423)

9.9.2

Procesar la lista de funciones en runtime

Principio
Una lista de funciones se procesa en runtime de arriba a abajo. Para evitar tiempos de espera
durante el procesamiento, se distingue entre los tipos de procesamiento síncrono y asíncrono.
El sistema efectúa esta distinción, evaluando para ello los diversos tiempos de ejecución de las
funciones de sistema. Independientemente del tiempo de ejecución, los scripts de usuario se
procesan siempre de forma síncrona. El procesamiento de la lista de funciones se interrumpirá
si una función de sistema retorna un estado de error.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1485

Trabajar con funciones de sistema y Runtime Scripting
9.9 Comportamiento en tiempo de ejecución en runtime

Procesamiento síncrono
En el procesamiento síncrono, las funciones de sistema contenidas en una lista de funciones
se procesan de forma sucesiva. Para que una función de sistema se ejecute, la función anterior
debe haber finalizado.

Procesamiento asíncrono
El tiempo de ejecución de las funciones de sistema que efectúan operaciones con archivos
(tales como guardar o leer) es más largo que el de las funciones de sistema que p. ej. activan
un valor de variable.
Por tanto, las funciones de sistema de ejecución prolongada se procesan de forma asíncrona.
Por ejemplo, mientras una función de sistema escribe un registro de receta en un soporte de
datos, se ejecuta ya la siguiente función. Gracias al procesamiento paralelo de las funciones
de sistema se evitan tiempos de espera en el panel de operador.

9.9.3

Procesamiento de funciones y scripts locales en runtime

Ejecución de scripts locales en runtime
No se pueden ejecutar en runtime al mismo tiempo dos scripts locales del mismo tipo. Para
evitar que p. ej. los scripts cíclicos se vean afectados negativamente por scripts que se
ejecutan mediante clic de ratón, los scripts disparados por evento y los scripts cíclicos/
disparados por variables se ejecutan en las imágenes de modo independiente entre sí.
Nota
La sincronización entre tipos de scripts en WinCC se realiza exclusivamente mediante el
objeto DataSet o variables HMI internas. Gracias a la ejecución por separado, no existe ningún
área de datos compartida por los scripts locales disparados por evento y los scripts locales
cíclicos/disparados por variables.
Si la ejecución de scripts locales cíclicos es afectada negativamente, p. ej., por una alta carga
de trabajo o por otros scripts, el script local se volverá a ejecutar en la próxima ocasión. Los
ciclos no ejecutados no entrarán una cola de espera sino que se rechazarán.
Después de cambiar la imagen se terminarán automáticamente al cabo de 1 minuto todos los
scripts locales que aún estén ejecutándose.
Los scripts locales que estén todavía ejecutándose al terminar runtime finalizarán al cabo de
5 segundos.

1486

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.9 Comportamiento en tiempo de ejecución en runtime

Procesamiento de funciones en runtime
Al dispararse, las funciones se ejecutan en runtime de manera consecutiva. Si se inicia una
función mientras otra función está ejecutándose, la segunda función entrará en una cola de
espera hasta que sea posible iniciarla.
Nota
La sincronización entre scripts locales y funciones se realiza exclusivamente mediante el
objeto DataSet o variables HMI internas. No existe ningún área de datos compartida por scripts
locales y funciones.

Consulte también
Funciones definidas por el usuario (Página 1423)
Scripts locales (Página 1425)

9.9.4

Secuencia en el procesamiento de scripts de usuario y funciones de sistema
ADVERTENCIA
La secuencia esperada de procesamiento de funciones definidas por el usuario y funciones
de sistema en runtime no siempre se puede cumplir. Esto puede causar estados operativos
imprevistos.
Tenga en cuenta las siguientes aclaraciones- Bajo "Solución" puede ver cómo solucionar el
problema.

Utilización de funciones definidas por el usuario en eventos
En algunos casos no es posible respetar la secuencia esperada de procesamiento de scripts
de usuario y funciones de sistema, p. ej., cuando el procesamiento de un script de usuario
continúa mas allá del momento de lanzamiento de un evento posterior. En este caso, puede
ocurrir que las funciones de sistema que están asociadas al evento posterior se ejecuten antes
que las funciones de sistema que se asociaron al mismo evento con el script de usuario.

Segundo plano
Los scripts de usuario se colocan en una cola de espera de baja prioridad. La cola de espera
se procesa secuencialmente. Si se asocian a un evento funciones de sistema y scripts de
usuario, todos los scripts de usuario y funciones de sistema asociados a este evento se
ejecutan en esta cola de espera.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1487

Trabajar con funciones de sistema y Runtime Scripting
9.9 Comportamiento en tiempo de ejecución en runtime

Ejemplo
En la tecla se ha configurado lo siguiente:
Evento

Funciones

Pulsar

Script de usuario (1)
ActivarBit(variable) (2)

Soltar

DesactivarBit(variable) (3)

Pulsar

A

Soltar


Pulsar

B





Soltar


Interrumpe
ejecución de
menor proridad







(1)

Tiempo de ejecución del script de usuario

(2)

Tiempo de ejecución de la función de sistema ActivarBit(variable)

(3)

Tiempo de ejecución de la función de sistema DesactivarBit(variable)

A: Ejecución esperada del script de usuario y de las funciones de sistema en la configuración.
Al pulsar la tecla, se ejecuta el script de usuario (1) y, posteriormente, la función de sistema
ActivarBit(variable) (2). Al soltar la tecla, se ejecuta la función de sistema
DesactivarBit(variable) (3).
B: El procesamiento del script de usuario no ha terminado todavía al soltar la tecla.
Al pulsar la tecla, se ejecuta el script de usuario (1). La ejecución del script de usuario (1) no
ha terminado todavía y ya ha soltado la tecla. La función de sistema DesactivarBit(variable) (3)
interrumpe la ejecución de la función. De este modo, se ejecuta la función de sistema
DesactivarBit(variable) (3) antes que la función de sistema ActivarBit(variable) (2). Con ello el
bit permanece activado.
La función de sistema "ActivarBitMientrasTeclaPulsada" muestra el mismo comportamiento
cuando la función de sistema se configura junto con scripts de usuario.

1488

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.9 Comportamiento en tiempo de ejecución en runtime

Solución
La secuencia de ejecución del anterior ejemplo A se respeta cuando se asocia adicionalmente
un script de usuario al evento "Soltar". El script de usuario no tiene que contener
necesariamente una funcionalidad.
Evento

Funciones

Pulsar

Script de usuario (1)
ActivarBit(variable) (2)

Soltar

Script de usuario_2 (3)
DesactivarBit(variable) (4)

Nota
Hay que asegurarse de que la cola de espera del script de usuario no se desborde, pues de lo
contrario puede ocurrir que las funciones de sistema ya no se puedan ejecutar en el siguiente
evento.
Se detecta un desbordamiento por "Sobrecarga: Se rechaza el script <nombre>" o "La
secuencia de ejecución esperada de scripts de usuario y funciones de sistema en runtime no
siempre se puede cumplir".

9.9.5

Dinamización de propiedades de objetos en runtime

Introducción
Con scripts de usuario se puede acceder en runtime a propiedades de objetos de imagen y a
variables. Si se modifican valores de propiedades de objetos con un script de usuario, ello no
tendrá efecto en los datos del proyecto.

Modificar las propiedades de objetos
Si se modifica en runtime una propiedad de un elemento de imagen con un script de usuario,
este cambio sólo tiene efecto mientras la imagen esté activa. Si se cambia la imagen o se carga
la imagen de nuevo, se mostrarán de nuevo las propiedades de objetos configuradas.

Cambio de idioma
Si se cambia el idioma en runtime, las rotulaciones de los datos del proyecto se cargarán en
el nuevo idioma. Si se modifican textos con un script de usuario, se sobrescribirán nuevamente
los textos modificados por el script.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1489

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

9.10

Ejemplos

9.10.1

Ejemplos de VBS

9.10.1.1

Ejemplo: convertir Fahrenheit a Celsius

Tarea
En el presente ejemplo se crea un VB Script de usuario que convierte el valor de una sonda de
temperatura de Fahrenheit a Celsius (grados centígrados). La temperatura se indica en el
panel de operador en un campo de salida.

Configuración
Para este ejemplo se necesitan dos variables HMI y un VB Script de usuario configurados
como se indica a continuación:
Variables HMI:
Nombre

Conexión al controlador

Tipo

Fahrenheit

sí

Real

Celsius

no

Real

Nombre

Tipo

Parámetro

FahrenheitToCelsius

Function

Fahrenheit

VB Script de usuario:

1490

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Procedimiento
1. Cree las dos variables HMI "Fahrenheit" y "Celsius" con la configuración indicada.

2. Cree el VB Script de usuario "FahrenheitToCelsius" con la configuración indicada.

3. Introduzca el código VBS siguiente:
FahrenheitToCelsius = (Fahrenheit-32) * (5/9)

Resultado intermedio
Las variables HMI y el VB Script de usuario están creados.

Procedimiento
1. Abra el editor "Variables HMI" y haga clic en la variable "Fahrenheit".
2. En la ventana de inspección haga clic en la ficha "Propiedades > Eventos". Seleccione el
evento "Cambio de valor".
3. Asocie el VB Script de usuario "FahrenheitToCelsius" al evento "Cambio de valor".
4. Seleccione la variable "Fahrenheit" para el parámetro "Fahrenheit".
5. Seleccione la variable HMI "Celsius" para el valor de retorno "FahrenheitToCelsius".
6. Configure un campo de salida en una imagen y asócielo a la variable "Celsius".

Procedimiento alternativo
En lugar de utilizar un VB Script de usuario del tipo "Function", se puede utilizar el tipo "Sub".
En este caso, asigne directamente el valor convertido a la variable HMI "Celsius":
SmartTags("Celsius") = (Fahrenheit-32) * (5/9)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1491

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos
Con este procedimiento, se suprime el valor de retorno del VB Script de usuario.

Resultado
Si el valor de la variable "Fahrenheit" cambia en runtime, se procesa el VB Script de usuario
"FahrenheitToCelsius". El valor de temperatura convertido se devolverá a la variable HMI
"Celsius" y se visualizará en el campo de salida.

9.10.1.2

Ejemplo: convertir pulgadas a metros

Tarea
En el presente ejemplo se crea un VB Script de usuario que convierte de pulgadas a metros el
valor de un medidor de longitud. La longitud en metros se indica en el panel de operador en un
campo de salida.

Configuración
Para este ejemplo se necesitan dos variables HMI y un VB Script de usuario configurados
como se indica a continuación:
Variables HMI:
Nombre

Conexión al controlador

Tipo

VarInch

sí

Real

VarMeter

no

Real

Nombre

Tipo

Parámetro

InchToMeter

Sub

Inch

VB Script de usuario

1492

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Procedimiento
1. Cree las dos variables HMI "VarInch" y "VarMeter" con la configuración indicada.

2. Cree el VB Script de usuario "InchToMeter" con la configuración indicada.

3. Introduzca el código VBS siguiente:
VarMeter = Inch*0.0254

Resultado intermedio
Las variables y el VB Script de usuario están creados.

Procedimiento
1. Abra el editor "Variables HMI" y haga clic en la variable "VarInch".
2. Haga clic en la ventana de inspección "Propiedades > Eventos". Seleccione el evento
"Cambio de valor".
3. Asocie el VB Script de usuario "InchToMeter" al evento "Cambio de valor".
4. Seleccione la variable HMI "VarInch" para el parámetro "Inch".
5. Configure un campo de salida en una imagen y asócielo a la variable HMI "VarMeter".

Resultado
Si el valor de la variable "VarInch" cambia en runtime, se procesa el VB Script de usuario
"InchToMeter". El valor convertido se escribirá en la variable HMI "VarMeter" y se visualizará
en el campo de salida.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1493

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

9.10.1.3

Ejemplo: cambiar el modo de operación del panel de operador y visualizar el estado
actual

Tarea
En el presente ejemplo se utiliza la función de sistema "EstablecerModoDeOperaciónPanel"
para cambiar entre los modos de operación "Online" y "Offline" en el panel de operador. El
modo de operación ajustado actualmente se debe visualizar adicionalmente en el panel de
operador.

Requisitos
Se ha creado una imagen de proceso.

Configuración
Para este ejemplo se necesitan una variable HMI y una lista de texto configuradas como se
indica a continuación:
Variable HMI:
Nombre

Conexión al controlador

Tipo

OperatingMode

no

Bool

Nombre

Contiene

Valores

ShowOperatingMode

Bit (0/1)

1: Modo de operación: "Online":

Lista de texto:

0: Modo de operación: "Offline"

1494

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Procedimiento
1. Cree la variable HMI "OperatingMode" indicada arriba.

2. Cree la lista de textos "ShowOperatingMode" indicada arriba.

3. Abra la imagen e inserte un botón en el que se configurará el cambio de modo de operación
a "Online".
4. Haga clic en la ventana de inspección "Propiedades > Eventos". Seleccione el evento
"Pulsar".
5. Configure la función de sistema "EstablecerModoDeOperaciónPanel" asociada al evento
"Pulsar". Esta función de sistema se encuentra en la lista de selección bajo "Configuración".
6. Seleccione la entrada "Online" para el parámetro "Modo de operación".
7. Configure la función de sistema "ActivarBit" asociada al evento "Pulsar". Esta función de
sistema se encuentra en la lista de selección bajo "Procesamiento de bits".
8. En la lista, seleccione la variable HMI "OperatingMode" para el parámetro "Variable".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1495

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos
9. En el sinóptico del proceso, inserte un botón en el que se configurará el cambio de modo
de operación a "Offline".
10.Repita los pasos 4 a 7. Seleccione la entrada "Offline" para el parámetro "Modo de
operación". Configure la función de sistema "DesactivarBit" en vez de la función "ActivarBit".

Resultado intermedio
El modo de operación del panel de operador se podrá cambiar en runtime mediante ambos
botones.
El modo de operación ajustado actualmente se debe visualizar en un campo de salida en el
panel de operador.

1496

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Procedimiento
1. Cree un "Campo E/S simbólico" en el sinóptico del proceso. En la ventana de inspección
haga clic en "Propiedades > Propiedades".
2. Realice los ajustes siguientes en el grupo "General":
– Bajo "Modo", seleccione "Salida".
– Seleccione la lista de texto "ShowOperatingMode".
– Seleccione la variable "OperatingMode".

Resultado
Si cambia el modo de operación utilizando los botones, el modo ajustado actualmente se
visualizará en el panel de operador.

Consulte también
Configurar la lista de funciones (Página 1428)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1497

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

9.10.2

Ejemplos de VBS

9.10.2.1

Resumen

Introducción
Encontrará los siguientes ejemplos de VBS:
● Acceso a objetos en el editor "Imágenes" (p. ej., modificación de color o texto)
● Determinar color de objetos
● Configurar cambio de idioma
● Desactivar Runtime
● Configurar cambio de imagen por medio de Property
● configurar la salida de diagnóstico mediante Trace
● escribir valores de variables
● Leer valores de variable
● escribir propiedades del objeto
● Configurar visor de recetas
● Configurar visor de avisos
● Dibujar curva
● Evaluar estadísticamente valores de variables

Consulte también
Ejemplo para configurar el visor de recetas (Página 1509)
Ejemplo para configurar el visor de avisos (Página 1510)
Ejemplo de evaluación estadística de valores de variables (Página 1512)

9.10.2.2

Ejemplo para acceder a objetos en el editor Imágenes

Introducción
Para dinamizar el entorno gráfico de runtime, existe la posibilidad de acceder en WinCC con
VB-Scripting a todos los objetos del editor "Imágenes". A su vez, pueden dinamizarse objetos
gráficos de modo que reaccionen a una operación, p. ej., un clic del ratón o en función de
valores de variables.

1498

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Procedimiento
En el siguiente ejemplo, por medio de un clic con el ratón Ud. define en 20 el radio de un círculo
en Runtime:

'VBS121
Dim objCircle
Set objCircle = ScreenItems("Circle1")
objCircle.Radius = 20

9.10.2.3

Ejemplo para determinar colores de objetos

Introducción
Los colores de objetos están definidos por medio de valores RGB (rojo/verde/azul). Es posible
establecer o leer valores de color para objetos.

Procedimiento
El siguiente ejemplo define de color azul para el relleno de la imagen "ScreenWindow1":

'VBS122
Dim objScreen
Set objScreen = HMIRuntime.Screens("ScreenWindow1")
objScreen.FillColor = RGB(0, 0, 255)

9.10.2.4

Ejemplo para configurar un cambio de idioma

Introducción
VBS permite cambiar el idioma de runtime. Utilice los botones con las correspondientes
características de país que se colocan en la página de inicio del proyecto.
El idioma de runtime se indica en VBS con un identificador de país, p. ej. 1031 para alemán
- estándar, 1033 para inglés EE. UU., etc. Encontrará una lista de todos los identificadores de
países en los principios básicos de VBScript, en el tema "Diagrama (LCID) de la ID de
configuración regional".

Procedimiento
En el evento "Clic del ratón", cree un VB Script local en un botón e introduzca el siguiente
código para cambiar a alemán el idioma de runtime:

'VBS123
HMIRuntime.Language = 1031

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1499

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

9.10.2.5

Ejemplo para desactivar runtime

Introducción
Con VBS es posible finalizar runtime, p. ej., con un clic de ratón o en función de valores de
variables u otros eventos.

Procedimiento
El siguiente ejemplo finaliza WinCC Runtime:

'VBS124
HMIRuntime.Stop

9.10.2.6

Ejemplo para configurar un cambio de imagen a través de Property

Introducción
Si en la configuración se utilizan imágenes divididas (p. ej., en una imagen raíz, el título y la
barra de manejo de la interfaz de usuario) y además una ventana de imagen incrustada para
la visualización propia de la imagen, configure el cambio de imagen mediante las propiedades
de la ventana de imagen.
La propiedad de la ventana de imagen "ScreenName" debe ser modificada para que aparezca
la otra imagen. El script local y la ventana de imagen deben estar configurados en la misma
imagen.

Procedimiento
En el siguiente ejemplo se muestra la imagen "test" en una ventana de imagen
"ScreenWindow" cuando se ejecuta el VB Script local:

'VBS126
Dim objScrWindow
Set objScrWindow = ScreenItems("ScreenWindow")
objScrWindow.ScreenName = "test"

9.10.2.7

Ejemplo para configurar una salida de diagnóstico a través de Trace

Introducción
Si ha insertado el objeto "Trabajo de impresión/diagnóstico de script" en la imagen, en la
ventana de diagnóstico se pueden editar diagnósticos con el comando "Trace" en runtime.
El trabajo de impresión/diagnóstico de script muestra los métodos Trace contenidos en los
scripts de usuario en la secuencia temporal en que se llaman. Esto también vale para

1500

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos
instrucciones Trace en funciones que se llaman en funciones definidas por el usuario.
Aplicando instrucciones Trace para fines concretos, se puede seguir la secuencia de las
funciones definidas por el usuario y las funciones llamadas dentro de ellas. Indique la
instrucción Trace en la forma "HMIRuntime.Trace <Salida>".
En el objeto "Trabajo de impresión/diagnóstico de script" se muestran las salidas Trace de C
y VBS.

Mostrar texto
El siguiente ejemplo escribe un texto en la ventana de diagnóstico:

'VBS127
HMIRuntime.Trace "Customized error message"

Mostrar avisos
En el siguiente ejemplo, se escriben en la ventana de diagnóstico los avisos de un visor de
avisos "Control2":

Sub TraceMsg
Dim objAlarmControl
Dim lIndex
Dim lCellIndex
'create reference to the alarm control
Set objAlarmControl = ScreenItems("Control2")
'enumerate and trace out row numbers
For lIndex = 1 To objAlarmControl.GetRowCollection.Count
HMIRuntime.Trace "Row: " & (objAlarmControl.GetRow(lIndex).RowNumber) & "

"

'enumerate and trace out column titles and cell texts
For lCellIndex = 1 To objAlarmControl.GetRow(lIndex).CellCount
HMIRuntime.Trace objAlarmControl.GetMessageColumn(lCellIndex -1).Name & " "
HMIRuntime.Trace objAlarmControl.GetRow(lIndex).CellText(lCellIndex) & " "
Next
HMIRuntime.Trace vbNewLine
Next
End Sub

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1501

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Mostrar información sobre variables HMI
En el siguiente ejemplo, se escribe en la ventana de diagnóstico información sobre la variable
de archivo "VarArch100":

Sub ReadTagInfo
Dim Tag
Set Tag = HMIRuntime.Tags("TagLoggingfast\VarArch100")
HMIRuntime.Trace "LastError = " + CStr(Tag.LastError) + vbNewLine
HMIRuntime.Trace "Name = " + Tag.Name + vbNewLine
HMIRuntime.Trace "QualityCode = " + CStr(Tag.QualityCode) + vbNewLine
End Sub

Consulte también
Diagnóstico (Página 1482)

9.10.2.8

Ejemplo para escribir valores de variables

Introducción
Con VBScript es posible escribir el valor de una variable en el controlador, por ejemplo, con un
clic del ratón en un botón para la especificación de consigna; además, también es posible
definir valores de variables internas para activar otros scripts de usuario.
A continuación se indican y explican diversas variantes de escritura.

Escritura sencilla
En el siguiente ejemplo se escribe un valor en la variable "Tag1":

'VBS128
HMIRuntime.Tags("Tag1").Write 6

Esta es la forma más sencilla de escribir, ya que no se crea ninguna referencia de un objeto.

Escribir con referencia de objeto
En el siguiente ejemplo se crea una copia local del objeto Tag y se escribe un valor en la
variable "Tag1":

'VBS129
Dim objTag
Set objTag = HMIRuntime.Tags("Tag1")
objTag.Write 7

1502

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos
El hacer una referencia ofrece la ventaja de que Ud. puede trabajar con el objeto Tag antes de
escribir. Ud. puede leer el valor de la variable, ejecutar cálculos y escribir otra vez:

'VBS130
Dim objTag
Set objTag = HMIRuntime.Tags("Tag1")
objTag.Read
objTag.Value = objTag.Value + 1
objTag.Write

Escritura sincrónica
De manera estándar, el valor que se va a escribir se entrega a la administración de variables
y se reanuda el procesamiento del script. Sin embargo, en algunos casos debe asegurarse que
el valor haya sido escrito realmente antes de que se continúe el procesamiento del script.
Ud. realiza este modo de escribir indicando el valor 1 en el parámetro adicional opcional:

'VBS131
Dim objTag
Set objTag = HMIRuntime.Tags("Tag1")
objTag.Write 8,1

o

'VBS132
Dim objTag
Set objTag = HMIRuntime.Tags("Tag1")
objTag.Value = 8
objTag.Write ,1

Nota
Considere que su llamada dura más tiempo en comparación a la llamada estándar. El tiempo
de duración depende, entre otras cosas, del canal y del PLC.
Este tipo de escritura corresponde a la llamada SetTagXXXWait() del C-Scripting.

Escribir con tratamiento de estado
Para asegurarse de que un valor se ha escrito correctamente, después de escribir lleve a cabo
una comprobación de errores o determine el estado de las variables.
Esto se puede hacer verificando la propiedad LastError después de escribir el valor. Si la
comprobación da resultado positivo, es decir, si la petición se ha podido entregar
correctamente, se comprueba el estado de las variables.
En una orden actual de escribir no se averigua el estado actual del proceso. Para averiguarlo
es necesario leer la variable. El valor contenido en la propiedad QualityCode después del

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1503

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos
proceso de lectura indica el estado de las variables y muestra, dado el caso, una conexión PLC
que ha fallado.
En el siguiente ejemplo se escribe la variable "Tag1": Si durante la escritura se presenta un
error se editará el valor del error y la descripción del error en la ventana de diagnóstico de
Global Script. A continuación se verificará el QualityCode. Si el QualityCode no está OK (0x80),
él será editado en la ventana de diagnóstico.

'VBS133
Dim objTag
Set objTag = HMIRuntime.Tags("Tag1")
objTag.Write 9
If 0 <> objTag.LastError Then
HMIRuntime.Trace "Error: " & objTag.LastError & vbCrLf & "ErrorDescription: " &
objTag.ErrorDescription & vbCrLf
Else
objTag.Read
If &H80 <> objTag.QualityCode Then
HMIRuntime.Trace "QualityCode: 0x" & Hex(objTag.QualityCode) & vbCrLf
End If
End If

Nota
Después de escribir una variable, se fijará la propiedad QualityCode del objeto Tag local de
"BAD Out of Service", ya que no se sabe cuál es el QualityCode que lleva la variable en el
proceso. Con una nueva lectura puede determinarse el nuevo QualityCode.
El QualityCode no puede ser escrito desde VBS.

9.10.2.9

Ejemplo para leer valores de variables

Introducción
Con VBS Ud. puede leer el valor de una variable y seguir tratándolo. De este modo, p. ej. con
un clic de ratón en un botón, se puede obtener información acerca del estado del sistema o
ejecutar cálculos.
A continuación se indican y explican diversas variantes de lectura.

Lectura sencilla
En el siguiente ejemplo se lee el valor de las variables "Tag1" y se edita en la ventana de
diagnóstico Global Script:

'VBS134
HMIRuntime.Trace "Value: " & HMIRuntime.Tags("Tag1").Read & vbCrLf

1504

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos
Esta es la forma más sencilla de leer, ya que no se crea ninguna referencia de un objeto.

Leer con referencia de objeto
En el siguiente ejemplo se crea una copia local del objeto Tag, se lee el valor de la variable y
se muestra el objeto "Trabajo de impresión/diagnóstico de script":

'VBS135
Dim objTag
Set objTag = HMIRuntime.Tags("Tag1")
HMIRuntime.Trace "Value: " & objTag.Read & vbCrLf

El hacer una referencia ofrece la ventaja de que Ud. puede trabajar con el objeto Tag. Ud.
puede leer el valor de la variable, ejecutar cálculos y escribir otra vez:

'VBS136
Dim objTag
Set objTag = HMIRuntime.Tags("Tag1")
objTag.Read
objTag.Value = objTag.Value + 1
objTag.Write

Con el método Read se añaden a la imagen variables del proceso que han sido leídas; ellas
serán solicitadas cíclicamente a partir de ese momento desde el sistema de automatización
(PLC). Si la variable ya está en la imagen, se envía el valor contenido en ella.
Cuando se deselecciona la imagen, las variables serán dadas de baja.
Nota
Si se solicita una variable en una función, permanecerá identificada todo el tiempo de
ejecución runtime de WinCC.

Leer directamente
De manera estándar, los valores de variables se leen de la imagen de variable. Sin embargo,
en algunas situaciones puede ser necesario leer el valor directamente desde el PLC, p. ej. para
sincronizar procesos rápidos.
Si para la lectura se ajusta el parámetro opcional a 1, entonces la variable no será identificada
cíclicamente, sino que el valor será solicitado una vez desde el PLC.

'VBS137
Dim objTag
Set objTag = HMIRuntime.Tags("Tag1")
HMIRuntime.Trace "Value: " & objTag.Read(1) & vbCrLf

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1505

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Nota
Considere que su llamada dura más tiempo en comparación con la llamada estándar. El
tiempo de duración depende, entre otras cosas, del canal y del PLC.
Evite este tipo de llamada en los C scripts cíclicos, ya que esta es la causa principal del bajo
rendimiento.
Este tipo de lectura corresponde a la llamada GetTagXXXWait() del C-Scripting.

Leer con tratamiento de estado
Para estar seguro de que un valor es válido, efectúe una comprobación después de la lectura.
Esto se realiza controlando el QualityCode.
En el siguiente ejemplo se lee la variable "Tag1" y, a continuación, se verifica el QualityCode.
Si el QualityCode no corresponde a OK (0x80) se mostrarán las propiedades LastError,
ErrorDescription y QualityCode en la ventana de diagnóstico Global Script.

'VBS138
Dim objTag
Set objTag = HMIRuntime.Tags("Tag1")
objTag.Read
If &H80 <> objTag.QualityCode
Then
HMIRuntime.Trace "Error: " & objTag.LastError & vbCrLf & "ErrorDescription: " &
objTag.ErrorDescription & vbCrLf & "QualityCode: 0x" & Hex(objTag.QualityCode) & vbCrLf
Else
HMIRuntime.Trace "Value: " & objTag.Value & vbCrLf
End If

Nota
Si se presenta un error durante la lectura, el QualityCode será activado en "BAD Out of
Service". Por eso, durante la lectura se debe controlar el QualityCode constantemente.

9.10.2.10

Ejemplo para escribir propiedades de objetos

Introducción
VBS permite acceder a las propiedades de todos los objetos de control y visualización en el
editor "Imágenes". Ud. puede leer las propiedades o modificarlas para runtime.
Los siguientes ejemplos le muestran diferentes formas de acceso.

1506

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Establecer sencillamente una propiedad
En el siguiente ejemplo se cambia a rojo el color de fondo del objeto "Rectangle1" contenido
en la imagen:

'VBS139
ScreenItems("Rectangle1").BackColor = RGB(255,0,0)

Ésta es la forma más sencilla de escribir, ya que no se crea ninguna referencia de un objeto.
Nota
Si se trabaja sin referencia de objeto, IntelliSense muestra únicamente las propiedades
estándar.
El modo de expresión utilizado en este ejemplo solo es ejecutable en el editor "Imágenes". De
forma similar, direccione en el planificador de tareas los objetos por medio del objeto
HMIRuntime.

Establecer una propiedad con referencia de objeto
En el siguiente ejemplo se crea una referencia para el objeto "Rectangle1" contenido en la
imagen, y con ayuda de la función estándar VBS RGB() el color de fondo se colocará de color
rojo:

'VBS140
Dim objRectangle
Set objRectangle = ScreenItems("Rectangle1")
objRectangle.BackColor = RGB(255,0,0)

Encontrará más información sobre RGB en "VBScript para Windows".
Crear referencias es útil si se desea modificar varias propiedades de un objeto. De esta
manera, en Autocompletar se muestra un listado de todas las propiedades del objeto.
Nota
El modo de expresión utilizado en este ejemplo sólo es ejecutable en el editor "Imágenes". De
forma similar, direccione en el planificador de tareas los objetos por medio del objeto
HMIRuntime.

Establecer propiedades más allá de la ventana de imagen
VBS en el editor "Imágenes" ofrece dos posibilidades para el direccionamiento de varias
imágenes:
● mediante el objeto Screen de una ventana de imagen con "ScreenItems"
● desde la imagen raíz con "HMIRuntime.Screens"

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1507

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Referenciación mediante la ventana de imagen
En el siguiente ejemplo se modifica el color de un rectángulo en una ventana de imagen
subyacente. El VB Script de usuario se ejecuta en la imagen "BaseScreen", en la que se
encuentra la ventana de imagen "ScreenWindow1". En la ventana de imagen se muestra una
imagen que contiene un objeto del tipo "Rectángulo" con el nombre "Rectangle1".

'VBS199
Sub OnLButtonUp(ByVal Item, ByVal Flags, ByVal x, ByVal y)
Dim objRectangle
Set objRectangle = ScreenItems("ScreenWindow1").Screen.ScreenItems("Rectangle1")
objRectangle.BackColor = RGB(255,0,0)
End Sub

Referenciación a partir de imagen raíz
Puede referenciar la imagen con el objeto que se va a modificar mediante
HMIRuntime.Screens. La indicación de la imagen se realiza, de forma relativa a la imagen raíz,
a través de la siguiente palabra clave de acceso:
[<Nombre de imagen raíz>.]<Nombre de ventana de imagen>[:<Nombre de
imagen>]... .<Nombre de ventana de imagen>[:<Nombre de imagen>]
En el siguiente ejemplo se crea una referencia para el objeto "Rectangle1" contenido en la
imagen "Screen2" y el color de fondo se colocará de color rojo.
Para ello, la imagen "Screen2" está colocada en "Screen1". "Screen1" será visualizada en la
imagen raíz "BaseScreen".

'VBS141
Dim objRectangle
Set objRectangle =
HMIRuntime.Screens("BaseScreen.ScreenWindow1:Screen1.ScreenWindow1:Screen2").ScreenItems("
Rectangle1")
objRectangle.BackColor = RGB(255,0,0)

No es necesario indicar también los nombres de imágenes. A través del nombre de la ventana
de imagen es posible direccionar inequívocamente una imagen. Por tal razón basta con indicar
los nombres de las ventanas de imagen tal como se muestra en el siguiente ejemplo:

'VBS142
Dim objRectangle
Set objRectangle =
HMIRuntime.Screens("ScreenWindow1.ScreenWindow2").ScreenItems("Rectangle1")
objRectangle.BackColor = RGB(255,0,0)

Con este tipo de direccionamiento es posible acceder a objetos en ventanas de imágenes con
imágenes que se cambian. Esto es interesante especialmente para la técnica de componentes
de imágenes.

1508

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Dinamizar propiedades por medio del valor de retorno
No sólo es posible disparar scripts locales en propiedades mediante disparadores por evento
o disparadores cíclicos, sino también dinamizar propiedades directamente mediante un script
local.
En el siguiente ejemplo se dinamiza el color de fondo de un objeto por medio de un valor de
retorno. El valor transferido puede p. ej. proceder de una evaluación de eventos en el
controlador, y se puede aplicar para la representación gráfica de un estado de operativo:

'VBS146
Function BackColor_Trigger(ByVal Item)
BackColor_Trigger = RGB(125,0,0)
End Function

Nota
Si con un script de usuario se dinamiza una propiedad del objeto a través de un valor de retorno
de un script de usuario, el valor de la propiedad del objeto se escribirá únicamente si ha sido
modificado en comparación con la última ejecución de la función. Aquí no se tendrá en
consideración si el valor ha sido modificado por otra posición.
Por eso las propiedades que se han dinamizado a través del valor de retorno con scripts de
usuario no pueden ser modificadas por otra posición, como son otros scripts de usuario. Si no
se tiene en cuenta esto, es posible que aparezcan valores erróneos.

9.10.2.11

Ejemplo para configurar el visor de recetas

Introducción
En el visor de recetas se muestran registros de receta.
Pueden añadirse, copiarse, editarse o borrarse registros.

Cargar y mostrar receta
En el ejemplo siguiente se carga la receta "Juice" en el visor de recetas "Control1". La receta
se muestra en el visor de recetas:

Sub loadUserArchive()
Dim objUAC
Set objUAC = ScreenItems("Control1")
objUAC.BorderColor = RGB(255,0,0)
objUAC.BorderWidth = 3
objUAC.Closeable = False
objUAC.Datasource = "Juice"
End Sub

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1509

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Copiar un registro de receta
En el ejemplo siguiente se copia el registro de receta de la línea 3. La copia se inserta al final
de la tabla.

Sub CopyRow
Dim objUAC
Set objUAC = ScreenItems("Control1")
Dim iRowCount
objUAC.AutoCompleteRows = True
objUAC.SelectRow(3)
objUAC.CopyRows
iRowCount = objUAC.GetRowCollection.Count
objUAC.SelectRow(iRowCount + 1)
objUAC.PasteRows
objUAC.SelectRow(1)
objUAC.UnselectAll
End Sub

Consulte también
Resumen (Página 1498)

9.10.2.12

Ejemplo para configurar el visor de avisos

Introducción
Los avisos se muestran en el visor de avisos. Los avisos se pueden mostrar u ocultar, ordenar
y filtrar.

1510

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Filtrar avisos
En este ejemplo se muestran en el visor de avisos "Control2" solo los avisos del número de
aviso 2.

Sub Filter
Dim objAlarmControl
'create reference to AlarmControl
Set objAlarmControl = ScreenItems("Control2")
'set / reset the filter and create a trace
If (objAlarmControl.MsgFilterSQL = "") Then
objAlarmControl.MsgFilterSQL = "MSGNR = 2"
Else
objAlarmControl.MsgFilterSQL = ""
End If
End Sub

Eliminar avisos
En este ejemplo se eliminan del visor de avisos los avisos 1-3.

Sub ResetAlarm
Dim objAlarm
'reset alarm 1 - 3
Set objAlarm = HMIRuntime.Alarms(1)
objAlarm.State = 2 'hmiAlarmStateGone
objAlarm.Create
Set objAlarm = HMIRuntime.Alarms(2)
objAlarm.State = 2 'hmiAlarmStateGone
objAlarm.Create
Set objAlarm = HMIRuntime.Alarms(3)
objAlarm.State = 2 'hmiAlarmStateGone
objAlarm.Create
End Sub

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1511

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Agregar avisos
En este ejemplo se agregan en el visor de avisos los avisos 1-3. Los avisos 1-3 deben estar
creados.

Sub SetAlarm
Dim objAlarm
'create Alarm 1 - 3
Set objAlarm = HMIRuntime.Alarms(1)
objAlarm.State = 1 'hmiAlarmStateCome
objAlarm.Create
Set objAlarm = HMIRuntime.Alarms(2)
objAlarm.State = 1 'hmiAlarmStateCome
objAlarm.Create
Set objAlarm = HMIRuntime.Alarms(3)
objAlarm.State = 1 'hmiAlarmStateCome
objAlarm.Create
End Sub

Consulte también
Resumen (Página 1498)

9.10.2.13

Ejemplo de evaluación estadística de valores de variables

Introducción
Con la tabla de valores pueden mostrarse en formato tabular las coordenadas de curvas y la
evaluación estadística de valores de variable. Para ello debe enlazarse la tabla de valores con
el objeto correspondiente. Los datos evaluados pueden imprimirse y exportarse.

Procedimiento
En el ejemplo siguiente se evalúan estadísticamente los valores de variable del visor de curvas
f(t) "Control2". Para representar el resultado en la ventana del área estadística de la tabla de
valores, realice los siguientes ajustes en las propiedades de la tabla de valores:
● Origen de los datos: "Control2"
● Modo: "Statistic area" window"
Inserte un nuevo botón en el visor de curvas f(t) y asóciele el VB Script de usuario.

Sub OnToolbarButtonClicked(ByVal Item, ByVal lId)
Dim objTrend
Set objTrend = ScreenItems("Control2")
objTrend.CalculateStatistic()
End Sub

1512

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Consulte también
Resumen (Página 1498)

9.10.2.14

Ejemplo de ejecución de un script en el servidor (objeto logging)

Introducción
Actualmente, en los proyectos multipuesto, el objeto logging solo funciona en el servidor. El
siguiente ejemplo muestra cómo ejecutar un script en el servidor desde el cliente y por lo tanto
también almacenar y borrar segmentos de fichero en el cliente.
El siguiente ejemplo muestra un script global que se ejecuta con una variable de control. El
contenido de la variable de control determina si se llamará el método "Restore" o el método
"Remove". Al final del script, la variable de control se ajusta a "0". Mediante una consulta se
impide la ejecución del script en equipos cliente. La ruta y el período se transfieren mediante
variables internas.

'VBS180
'StartLoggingOnServer
Dim StartLogging
Dim SourcePath
Dim TimeFrom
Dim TimeTo
Dim RetVal
'Exit when running on client
If (Left(HMIRuntime.ActiveProject.Path, 1) = "\") Then
Exit Function
End If
'read parameters
StartLogging = HMIRuntime.Tags("StartLogging").Read
SourcePath = HMIRuntime.Tags("SourcePath").Read(1)
TimeFrom = HMIRuntime.Tags("TimeFrom").Read(1)
TimeTo = HMIRuntime.Tags("TimeTo").Read(1)
'restore or remove depends on the parameter
If (StartLogging = 1) Then
RetVal = HMIRuntime.Logging.Restore(SourcePath, TimeFrom, TimeTo, -1)
HMIRuntime.Tags("RetVal").Write RetVal, 1
HMIRuntime.Tags("StartLogging").Write 0,1
Elseif (StartLogging = 2) Then
RetVal = HMIRuntime.Logging.Remove(TimeFrom, TimeTo, -1)
HMIRuntime.Tags("RetVal").Write RetVal, 1
HMIRuntime.Tags("StartLogging").Write 0,1
End If

También puede usarse como ruta un recurso compartido de red. Por lo tanto, los segmentos
de ficheros que se desea almacenar no tienen por qué encontrarse localmente en el servidor.
Sin embargo, es necesario que el servidor pueda acceder correctamente a la ruta.
Nota
El ejemplo muestra una propuesta de solución y puede modificarse a conveniencia.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1513

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Procedimiento
1. Cree en WinCC Explorer las siguientes variables internas con actualización en todo el
proyecto:
– StartLogging (valor de 8 bits sin signo)
– SourcePath (variable de texto de juego de caracteres de 8 bits)
– TimeFrom (variable de texto de juego de caracteres de 8 bits)
– TimeTo (variable de texto de juego de caracteres de 8 bits)
– RetVal (valor de 32 bits con signo)
2. Cree el script "StartLoggingOnServer".
3. Asocie al evento "Cambio de valor" de la variable "StartLogging" el script
"StartLoggingOnServer".
El script puede ejecutarse en un cliente, p. ej,. con el siguiente script:

'VBS181
'Prerequisite: set parameters
HMIRuntime.Tags("SourcePath").Write "\\client_pc\temp",1
HMIRuntime.Tags("TimeFrom").Write "2004",1
HMIRuntime.Tags("TimeTo").Write "2004",1
'start action
HMIRuntime.Tags("StartLogging").Write 1,1

Nota
Las variables se escriben y leen mayoritariamente en el modo "directo". De este modo se
sincronizan las secuencias. Al tratarse de variables internas, este modo puede usarse sin
riesgos.

9.10.2.15

Ejemplo de apertura del visor de código desde la vista general de GRAPH

Introducción
VBS ofrece la posibilidad de conmutar, también si se usan ventanas de imagen, de la vista
general de GRAPH al visor de código PLC.
Para ello debe crearse un script VB en una vista general de GRAPH, una imagen en una
ventana de imagen así como otra imagen con un visor de código PLC que muestre el
correspondiente código de programa.

1514

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Apertura del visor de código PLC desde una ventana de imagen
En el siguiente ejemplo se abre, con ayuda de un evento, desde la vista general de GRAPH,
en la ventana de imagen "Screen window_1", el visor de código PLC "PLC code view_1" en la
imagen "CodeViewScreen".

Sub OnPlcCodeViewButtonClick(ByVal item, ByVal codeViewerDiagnosticsContext)
Dim objScreenWindow
Set objScreenWindow = ScreenItems("Screen window_1")
objScreenWindow.ScreenName = "CodeViewScreen"
objScreenWindow.Screen.ScreenItems("PLC code view_1").NavigateTo =
codeViewerDiagnosticsContext
End Sub

9.10.3

Ejemplos de C

9.10.3.1

Resumen

Introducción
Encontrará ejemplos de C Scripts:
● Acceso a objetos en el editor "Imágenes" (p. ej. modificación de color o texto)
● Determinar color de objetos
● Configurar cambio de idioma
● Desactivar runtime
● Configurar cambio de imagen por medio de Property
● Configurar la salida de diagnóstico mediante Trace
● Escribir valores de variables
● Leer valores de variables
● Escribir propiedades del objeto

Consulte también
Ejemplo para acceder a objetos en el editor Imágenes (Página 1516)
Ejemplo para determinar colores de objetos (Página 1516)
Ejemplo para configurar un cambio de idioma (Página 1517)
Ejemplo para desactivar runtime (Página 1517)
Ejemplo para configurar un cambio de imagen a través de Property (Página 1518)
Ejemplo para configurar una salida de diagnóstico a través de Trace (Página 1518)
Ejemplo para escribir valores de variables (Página 1519)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1515

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos
Ejemplo para leer valores de variables (Página 1519)
Ejemplo para escribir propiedades de objetos (Página 1520)

9.10.3.2

Ejemplo para acceder a objetos en el editor Imágenes

Introducción
Para dinamizar el entorno gráfico de runtime, existe la posibilidad de acceder en WinCC con
C-Scripting a todos los objetos del editor "Imágenes". A su vez, pueden dinamizarse objetos
gráficos de modo que reaccionen a una operación, p. ej. un clic del ratón o en función de
valores de variables.

Procedimiento
En el siguiente ejemplo se define en 10 el radio de un círculo en runtime por medio de un clic
con el ratón:

'C121
SetPropDouble(screenName,"Círculo_1","Radio",10);

Consulte también
Resumen (Página 1515)

9.10.3.3

Ejemplo para determinar colores de objetos

Introducción
Los colores de objetos están definidos por medio de valores RGB (rojo/verde/azul). Es posible
establecer o leer valores de color para objetos.

Procedimiento
El siguiente ejemplo define el color azul para el relleno del objeto "Roundbutton1":

'C122
SetPropertyByConstant (screenName, " Roundbutton1", "FillPatternColor", "65035");

Consulte también
Resumen (Página 1515)

1516

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

9.10.3.4

Ejemplo para configurar un cambio de idioma

Introducción
C-Scripting permite cambiar el idioma de runtime. Utilice los botones con los correspondientes
códigos de país que se colocan en la página de inicio del proyecto.
El idioma de runtime se indica con un identificador de país, p. ej. 1031 para alemán - estándar,
1033 para inglés EE UU, etc. Encontrará una lista de todos los identificadores de países en los
principios básicos de VBScript, en el tema "Diagrama (LCID) de la ID de configuración
regional".

Procedimiento
En el evento "Clic del ratón", cree un C Script de usuario en un botón e introduzca el siguiente
código para cambiar a alemán el idioma de runtime:

'C123
SetLanguageByLocaleID(1033);

Consulte también
Resumen (Página 1515)

9.10.3.5

Ejemplo para desactivar runtime

Introducción
Con los C Scripts es posible finalizar runtime, por ejemplo, con un clic del ratón o en función de
valores de variables u otros eventos.

Procedimiento
El siguiente ejemplo finaliza WinCC Runtime:

'C124
StopRuntime(hmiStopRuntime);

Consulte también
Resumen (Página 1515)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1517

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

9.10.3.6

Ejemplo para configurar un cambio de imagen a través de Property

Introducción
Si en la configuración se utilizan imágenes divididas (p. ej., en una imagen básica, el título y la
barra de manejo de la interfaz de usuario) y además una ventana de imagen incrustada para
la visualización propia de la imagen, configure el cambio de imagen mediante las propiedades
de la ventana de imagen.
La propiedad de la ventana de imagen "ScreenName" debe ser modificada para que aparezca
la otra imagen. El C Script y la ventana de imagen deben estar configurados en la misma
imagen.

Procedimiento
En el siguiente ejemplo se muestra la imagen "test" en una ventana de imagen
"ScreenWindow" cuando se ejecuta el C Script:

'C126
ActivateScreenInScreenWindow (screenName, "ScreenWindow", "test");

Consulte también
Resumen (Página 1515)

9.10.3.7

Ejemplo para configurar una salida de diagnóstico a través de Trace

Introducción
Si Ud. ha insertado una ventana de diagnóstico GSC en su imagen, en la ventana de
diagnóstico Ud. podrá editar diagnósticos con la orden Trace en runtime.
El diagnóstico GSC muestra los métodos Trace contenidos en las funciones en la secuencia
temporal en que sean llamados. Esto también vale para instrucciones Trace en funciones que
se llaman en función definidas por el usuario. Aplicando adecuadamente las instrucciones
Trace, se puede seguir la secuencia de las funciones definidas por el usuario y las funciones
llamadas a su vez en ellas. Indique la instrucción Trace en la forma "printf(<Salida>)".
En la ventana de diagnóstico GSC se muestran salidas Trace de funciones C.

Mostrar texto
El siguiente ejemplo escribe un texto en la ventana de diagnóstico:

'C127
printf("Customized C script error message\r\n");

1518

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.10 Ejemplos

Consulte también
Resumen (Página 1515)

9.10.3.8

Ejemplo para escribir valores de variables

Introducción
Con los C Scripts se puede escribir el valor de una variable en el controlador, p. ej. con un clic
del ratón en un botón para la especificación de consigna, o definir valores de variables internas
para activar otras funciones.

Escritura sencilla
En el siguiente ejemplo se escribe un valor en la variable "Tag1":

'C128
int value;
value = 7;
SetTagSDWord("Tag1", value);

Consulte también
Resumen (Página 1515)

9.10.3.9

Ejemplo para leer valores de variables

Introducción
Con los C Scripts se puede leer el valor de una variable y seguir tratándolo. De este modo, p. ej.
con un clic de ratón en un botón, se puede obtener información acerca del estado del sistema
o ejecutar cálculos.

Lectura sencilla
En el siguiente ejemplo se lee el valor de la variable "Tag1" y se edita en la ventana de
diagnóstico Global Script:

'C134
int value;
value = GetTagGetTagSDWord("Tag1");

Consulte también
Resumen (Página 1515)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1519

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

9.10.3.10

Ejemplo para escribir propiedades de objetos

Introducción
Los C Scripts permiten acceder a las propiedades de todos los objetos de indicación y control
en el editor "Imágenes". Existe la posibilidad de leer las propiedades o modificarlas para
runtime.
El siguiente ejemplo muestra el acceso a una propiedad.

Activación sencilla de una propiedad
En el siguiente ejemplo se cambia a rojo el color de fondo del objeto "Button1" contenido en la
imagen:

'C139
SetPropLong("Screen_1","Button1","ForeColor",65333);

Consulte también
Resumen (Página 1515)

9.11

Referencia

9.11.1

Lista de funciones

9.11.1.1

Dependencia del panel de operador

Funciones de sistema para Basic Panels
Disponibilidad de las funciones de sistema
La tabla siguiente muestra las funciones de sistema disponibles en los Basic Panels.
Sujeto a cambios técnicos.

1520

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Sinopsis
KP300 Basic
PN

KP400 Basic
PN

KTP600 Basic
PN / DP

KTP1000
Basic PN /
DP

TP1500
Basic PN

Funciones definidas por el usuario

No

No

No

No

No

CerrarSesión (Página 1597)

Sí

Sí

Sí

Sí

Sí

ActivarImagen (Página 1555)

Sí

Sí

Sí

Sí

Sí

ActivarImagenConNúmero (Página 1556)

Sí

Sí

Sí

Sí

Sí

ActivarPantallaDeLimpieza (Página 1703)

No

No

Sí

Sí

Sí

ActivarImagenAnterior (Página 1557)

Sí

Sí

Sí

Sí

Sí

ActualizarVariable (Página 1558)

Sí

Sí

Sí

Sí

Sí

ModificarContraste (Página 1635)

Sí

No

Sí

Sí

Sí

IniciarSesión (Página 1598)

Sí

Sí

Sí

Sí

Sí

ArchivarArchivoDeInforme (Página 1589)

No

No

No

No

No

ArchivarVariable (Página 1590)

No

No

No

No

No

1)

EditarAviso (Página 1672)

Sí

Sí

Sí

Sí

No

ObjetoDeImagenCursorAbajo (Pági‐
na 1706)

Sí

Sí

Sí

Sí

Sí

ObjetoDeImagenCursorArriba (Pági‐
na 1707)

Sí

Sí

Sí

Sí

Sí

ObjetoImagenCursorIzquierda (Pági‐
na 1709)

No

No

No

No

No

ObjetoDeImagenCursorDerecha (Pági‐
na 1708)

No

No

No

No

No

ObjetoDeImagenAvanzarPágina (Pági‐
na 1708)

Sí

Sí

Sí

Sí

Sí

ObjetoDeImagenRetrocederPágina (Pági‐
na 1709)

Sí

Sí

Sí

Sí

Sí

Codificar (Página 1558)

No

No

No

No

No

CodificarEx (Página 1559)

No

No

No

No

No

Tecla directa (Página 1560)

No

No

No

No

No

TeclaDirectaNúmeroDeImagen (Pági‐
na 1563)

No

No

No

No

No

ImprimirImagen (Página 1622)

No

No

No

No

No

ImprimirInforme (Página 1623)

No

No

No

No

No

RegistrarAcciónDeUsuario (Página 1563)

No

No

No

No

No

IncrementarValorEnfocado (Página 1565)

Sí

Sí

Sí

Sí

No

IncrementarVariable (Página 1602)

Sí

Sí

Sí

Sí

Sí

ExportarRegistros (Página 1678)

Sí

Sí

Sí

Sí

Sí

ExportarRegistrosConSumaDeVerificación
(Página 1680)

No

No

No

No

No

ExportarImportarAdministraciónDeUsuarios
(Página 1598)

No

No

No

No

No

IrAInicio (Página 1711)

Sí

Sí

Sí

Sí

No

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1521

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KP300 Basic
PN

KP400 Basic
PN

KTP600 Basic
PN / DP

KTP1000
Basic PN /
DP

TP1500
Basic PN

IrAFin (Página 1711)

Sí

Sí

Sí

Sí

No

RetirarHardwareConSeguridad (Pági‐
na 1565)

No

No

No

No

No

NavegadorHTMLCancelar (Página 1640)

No

No

No

No

No

NavegadorHTMLDesplazarseAbajo (Pági‐
na 1640)

No

No

No

No

No

NavegadorHTMLActualizar (Página 1641)

No

No

No

No

No

NavegadorHTMLDesplazarseArriba (Pági‐
na 1641)

No

No

No

No

No

NavegadorHTMLAdelante (Página 1645)

No

No

No

No

No

NavegadorHTMLAtrás (Página 1645)

No

No

No

No

No

NavegadorHTMLAcercar (Página 1642)

No

No

No

No

No

NavegadorHTMLAlejar (Página 1642)

No

No

No

No

No

HTMLNavegadorALaIzquierda (Pági‐
na 1642)

No

No

No

No

No

NavegadorHTMLALaDerecha (Página 1643) No

No

No

No

No

NavegadorHTMLAvanzarPágina (Pági‐
na 1643)

No

No

No

No

No

NavegadorHTMLRetrocederPágina (Pági‐
na 1644)

No

No

No

No

No

NavegadorHTMLPáginaInicio (Página 1644) No

No

No

No

No

ImportarRegistros (Página 1683)

Sí

Sí

Sí

Sí

Sí

ImportarRegistrosConSumaDeVerificación
(Página 1684)

No

No

No

No

No

InvertirBit (Página 1608)

Sí

Sí

Sí

Sí

Sí

InvertirBitEnVariable (Página 1610)

Sí

Sí

Sí

Sí

Sí

InvertirEscalaLineal (Página 1603)

Sí

Sí

Sí

Sí

Sí

CalibrarPantallaTáctil (Página 1636)

No

Sí

Sí

Sí

Sí

CopiarFichero (Página 1591)

No

No

No

No

No

VisorDeCurvasAvanzarPágina (Pági‐
na 1646)

Sí

Sí

Sí

Sí

Sí

VisorDeCurvasRetrocederPágina (Pági‐
na 1646)

Sí

Sí

Sí

Sí

Sí

VisorDeCurvasAmpliar (Página 1647)

Sí

Sí

Sí

Sí

Sí

VisorDeCurvasComprimir (Página 1647)

Sí

Sí

Sí

Sí

Sí

VisorDeCurvasReglaIzquierda (Pági‐
na 1648)

Sí

Sí

Sí

Sí

Sí

VisorDeCurvasReglaDerecha (Pági‐
na 1648)

Sí

Sí

Sí

Sí

Sí

VisorDeCurvasActivarModoRegla (Pági‐
na 1649)

Sí

Sí

Sí

Sí

Sí

VisorDeCurvasIniciarParar (Página 1650)

Sí

Sí

Sí

Sí

Sí

VisorDeCurvasIrAlPrincipio (Página 1650)

Sí

Sí

Sí

Sí

Sí

1522

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

CargarRegistro (Página 1686)

KP300 Basic
PN

KP400 Basic
PN

KTP600 Basic
PN / DP

KTP1000
Basic PN /
DP

TP1500
Basic PN

Sí

Sí

Sí

Sí

Sí

LeerNombreDeUsuario (Página 1599)

Sí

Sí

Sí

Sí

Sí

LeerRegistroDelControlador (Página 1687)

Sí

Sí

Sí

Sí

Sí

LeerNombreDelRegistro (Página 1688)

No

No

No

No

No

LeerVariablesDeRegistroDelControlador
(Página 1690)

Sí

Sí

Sí

Sí

Sí

LeerNúmeroDeGrupo (Página 1600)

Sí

Sí

Sí

Sí

Sí

LeerBrillo (Página 1639)

No

No

No

No

No

LeerContraseña (Página 1600)

Sí

Sí

Sí

Sí

Sí

LeerModoPLC (Página 1624)

Sí

Sí

Sí

Sí

Sí

EscalaLineal (Página 1604)

Sí

Sí

Sí

Sí

Sí

BorrarFichero (Página 1592)

No

No

No

No

No

BorrarRegistro (Página 1691)

Sí

Sí

Sí

Sí

Sí

BorrarRegistroMemoria (Página 1692)

No

No

No

No

No

BorrarBúferDeAvisos (Página 1672)

Sí

Sí

Sí

Sí

Sí

BorrarBúferDeAvisosProtool (Página 1673)

Sí

Sí

Sí

Sí

Sí

VisorDeAvisosActualizar (Página 1674)

No

No

No

No

No

VisorDeAvisosLoopInAlarm (Página 1674)

Sí

Sí

Sí

Sí

Sí

VisorDeAvisosAcusarAviso (Página 1675)

Sí

Sí

Sí

Sí

Sí

VisorDeAvisosMostrarTextoAyuda (Pági‐
na 1676)

Sí

Sí

Sí

Sí

Sí

AbrirTodosLosFicheros (Página 1593)

No

No

No

No

No

AbrirTecladoDePantalla (Página 1706)

No

No

No

No

No

AbrirDiálogoControlPanel (Página 1566)

Sí 2)

Sí 2)

Sí 2)

Sí 2)

Sí 2)

AbrirVentanaDeSímboloDelSistema (Pági‐
na 1567)

No

No

No

No

No

AbrirInternetExplorer (Página 1567)

No

No

No

No

No

AbrirPanelDeControl (Página 1568)

No

No

No

No

No

AbrirAdministradorDeTareas (Página 1705)

No

No

No

No

No

AcusarAviso (Página 1676)

Sí

Sí

Sí

Sí

No

PDFDesplazarseAbajo (Página 1651)

No

No

No

No

No

PDFDesplazarseArriba (Página 1651)

No

No

No

No

No

PDFAdaptarAncho (Página 1652)

No

No

No

No

No

PDFAdaptarAltura (Página 1652)

No

No

No

No

No

PDFPrimeraPágina (Página 1652)

No

No

No

No

No

PDFÚltimaPágina (Página 1653)

No

No

No

No

No

PDFAvanzarPágina (Página 1653)

No

No

No

No

No

PDFIrAPágina (Página 1654)

No

No

No

No

No

PDFRetrocederPágina (Página 1654)

No

No

No

No

No

PDFAcercar (Página 1655)

No

No

No

No

No

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1523

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

PDFAlejar (Página 1655)

KP300 Basic
PN

KP400 Basic
PN

KTP600 Basic
PN / DP

KTP1000
Basic PN /
DP

TP1500
Basic PN

No

No

No

No

No

PDFDesplazarseIzquierda (Página 1656)

No

No

No

No

No

PDFDesplazarseDerecha (Página 1656)

No

No

No

No

No

PDFZoomOriginal (Página 1656)

No

No

No

No

No

VisorDeRecetasRegistroNuevo (Pági‐
na 1693)

Sí

Sí

Sí

Sí

Sí

VisorDeRecetasLeerRegistroDelControla‐
dor (Página 1693)

Sí

Sí

Sí

Sí

Sí

VisorDeRecetasBorrarRegistro (Pági‐
na 1694)

Sí

Sí

Sí

Sí

Sí

VisorDeRecetasMenú (Página 1694)

Sí

Sí

Sí

Sí

Sí

VisorDeRecetasAbrir (Página 1695)

Sí

Sí

Sí

Sí

Sí

VisorDeRecetasEscribirRegistroEnContro‐
lador (Página 1696)

Sí

Sí

Sí

Sí

Sí

VisorDeRecetasGuardarRegistro (Pági‐
na 1696)

Sí

Sí

Sí

Sí

Sí

VisorDeRecetasGuardarRegistroComo (Pá‐ Sí
gina 1696)

Sí

Sí

Sí

Sí

VisorDeRecetasSincronizarRegistroConVa‐
riables (Página 1697)

Sí

Sí

Sí

Sí

Sí

VisorDeRecetasCambiarNombreDeRegis‐
tro (Página 1697)

Sí

Sí

Sí

Sí

Sí

VisorDeRecetasMostrarTextoDeAyuda (Pá‐ Sí
gina 1698)

Sí

Sí

Sí

Sí

VisorDeRecetasAtrás (Página 1698)

Sí

Sí

Sí

Sí

Sí

DesactivarBit (Página 1611)

Sí

Sí

Sí

Sí

Sí

DesactivarBitEnVariable (Página 1613)

Sí

Sí

Sí

Sí

Sí

BotónPulsar (Página 1571)

Sí

Sí

Sí

Sí

No

BotónSoltar (Página 1572)

Sí

Sí

Sí

Sí

No

DesplazarYEnmascarar (Página 1615)

Sí

Sí

Sí

Sí

Sí

CerrarTodosLosFicheros (Página 1594)

No

No

No

No

No

EscribirRegistroEnControlador (Pági‐
na 1699)

Sí

Sí

Sí

Sí

Sí

EscribirVariableDeRegistroEnControlador
(Página 1700)

Sí

Sí

Sí

Sí

Sí

AvanzarPágina (Página 1710)

Sí

Sí

Sí

Sí

No

RetrocederPágina (Página 1710)

Sí

Sí

Sí

Sí

No

EnviarCorreoElectrónico (Página 1569)

No

No

No

No

No

ConfigurarSeñalAcústica (Página 1637)

No

No

No

No

No

ConfigurarModoDeVisualización (Pági‐
na 1625)

No

No

No

No

No

EstablecerModoDeOperaciónPanel (Pági‐
na 1626)

Sí

Sí

Sí

Sí

Sí

1524

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KP300 Basic
PN

KP400 Basic
PN

KTP600 Basic
PN / DP

KTP1000
Basic PN /
DP

TP1500
Basic PN

ActivarBit (Página 1617)

Sí

Sí

Sí

Sí

Sí

ActivarBitDeVariable (Página 1619)

Sí

Sí

Sí

Sí

Sí

ActivarBitMientrasTeclaPulsada (Pági‐
na 1621)

Sí

Sí

Sí

Sí

Sí

EstablecerColorRetroiluminación (Pági‐
na 1639)

Sí

Sí

No

No

No

EstablecerBrillo (Página 1638)

No

Sí

Sí

No

No

EstablecerModoTecladoDePantalla (Pági‐
na 1627)

No

No

No

No

No

ActivarModoDeInformeAviso (Página 1623)

No

No

No

No

No

DefinirEstadoVariableDeReceta (Pági‐
na 1701)

Sí

Sí

Sí

Sí

Sí

AjustarHorarioVerano (Página 1570)

No

No

No

No

No

EstablecerIdioma (Página 1629)

Sí

Sí

Sí

Sí

Sí

DefinirVariable (Página 1606)

Sí

Sí

Sí

Sí

Sí

EstablecerModoDeConexión (Página 1630)

Sí

Sí

Sí

Sí

Sí

AccesoWebActivar (Página 1631)

No

No

No

No

No

CopiaSeguridadSistemaDeArchivosRAM
(Página 1572)

No

No

No

No

No

SimularTeclaSistema (Página 1573)

Sí

Sí

Sí

Sí

No

SimularVariable (Página 1574)

Sí

Sí

Sí

Sí

Sí

VisorSmartClientActualizar (Página 1665)

No

No

No

No

No

VisorSmartClientProtecciónContraEscritu‐
raOff (Página 1665)

No

No

No

No

No

VisorSmartClientProtecciónContraEscritu‐
raOn (Página 1666)

No

No

No

No

No

VisorSmartClientDesconectar (Pági‐
na 1666)

No

No

No

No

No

VisorSmartClientConectar (Página 1667)

No

No

No

No

No

VisorSmartClientSalir (Página 1667)

No

No

No

No

No

GuardarRegistro (Página 1702)

Sí

Sí

Sí

Sí

Sí

IniciarArchivación (Página 1595)

No

No

No

No

No

IniciarFicheroSiguiente (Página 1595)

No

No

No

No

No

IniciarPrograma (Página 1575)

No

No

No

No

No

EstadoForzarLeerValores (Página 1577)

No

No

No

No

No

EstadoForzarEscribirValores (Página 1577)

No

No

No

No

No

ControlarSmartServer (Página 1578)

No

No

No

No

No

ControlarServidorWeb (Página 1578)

No

No

No

No

No

PararArchivación (Página 1596)

No

No

No

No

No

PararRuntime (Página 1579)

Sí

Sí

Sí

Sí

Sí

VisorDiagnósticoSistemaActualizarBú‐
ferPLC (Página 1669)

Sí

Sí

Sí

Sí

Sí

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1525

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KP300 Basic
PN

KP400 Basic
PN

KTP600 Basic
PN / DP

KTP1000
Basic PN /
DP

TP1500
Basic PN

VisorDiagnósticoSistemaActivar (Pági‐
na 1668)

No

No

No

No

No

VisorDiagnósticoSistemaVistaDetallada
(Página 1669)

Sí

Sí

Sí

Sí

Sí

VisorDiagnósticoSistemaBúferDiagnóstico
(Página 1670)

No

No

No

No

No

VisorDiagnósticoSistemaVistaDispositivos
(Página 1670)

No

No

No

No

No

VisorDiagnósticoSistemaAtrás (Pági‐
na 1671)

Sí

Sí

Sí

Sí

Sí

ConsultarTexto (Página 1580)

No

No

No

No

No

DesconectarVariableDelVolante (Pági‐
na 1581)

No

No

No

No

No

ConectarVariableAlVolante (Página 1581)

No

No

No

No

No

IdentificarCambioDeUsuario (Página 1601)

Sí

Sí

Sí

Sí

Sí

ReducirValorEnfocado (Página 1582)

Sí

Sí

Sí

Sí

No

DecrementarVariable (Página 1607)

Sí

Sí

Sí

Sí

Sí

CambiarConexión (Página 1632)

Sí

Sí

Sí

Sí

Sí

CambiarConexiónEIP (Página 1634)

No

No

No

No

No

MostrarDiálogoInicioSesión (Página 1602)

Sí

Sí

Sí

Sí

Sí

MostrarTextoDeAyuda (Página 1582)

Sí

Sí

Sí

Sí

Sí

MostrarVentanaDeAvisos (Página 1677)

Sí

Sí

Sí

Sí

Sí

MostrarImagenEmergente (Página 1584)

No

No

No

No

No

MostrarImagenEmergenteTamañoModifica‐
ble (Página 1585)

No

No

No

No

No

MostrarImagenDeslizable (Página 1588)

No

No

No

No

No

MostrarVersiónDeSoftware (Página 1583)

No

No

No

No

No

MostrarVentanaDeDiagnósticoDelSistema
(Página 1671)

No

No

No

No

No

MostrarAvisoDeSistema (Página 1677)

No

No

No

No

No

1)
2)

Solo para KTP600 Basic mono PN
Solo para modificar la configuración IP

Funciones de sistema para Basic Panels de 2.ª generación
Disponibilidad de las funciones de sistema
La tabla siguiente muestra las funciones de sistema disponibles en los Basic Panels.
Sujeto a cambios técnicos.

1526

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Sinopsis
KTP400 Basic
PN

KTP700 Basic
PN / DP

KTP900 Ba‐
sic PN

KTP1200 Basic
PN / DP

Funciones definidas por el usuario

No

No

No

No

CerrarSesión (Página 1597)

Sí

Sí

Sí

Sí

ActivarImagen (Página 1555)

Sí

Sí

Sí

Sí

ActivarImagenConNúmero (Página 1556)

Sí

Sí

Sí

Sí

ActivarPantallaDeLimpieza (Página 1703)

Sí

Sí

Sí

Sí

ActivarImagenAnterior (Página 1557)

Sí

Sí

Sí

Sí

ActualizarVariable (Página 1558)

Sí

Sí

Sí

Sí

ModificarContraste (Página 1635)

No

No

No

No

IniciarSesión (Página 1598)

Sí

Sí

Sí

Sí

ArchivarArchivoDeInforme (Página 1589)

No

No

No

No

ArchivarVariable (Página 1590)

Sí

Sí

Sí

Sí

EditarAviso (Página 1672)

Sí

Sí

Sí

Sí

ObjetoDeImagenCursorAbajo (Página 1706)

Sí

Sí

Sí

Sí

ObjetoDeImagenCursorArriba (Página 1707)

Sí

Sí

Sí

Sí

ObjetoImagenCursorIzquierda (Página 1709)

Sí

Sí

Sí

Sí

ObjetoDeImagenCursorDerecha (Página 1708)

Sí

Sí

Sí

Sí

ObjetoDeImagenAvanzarPágina (Página 1708)

Sí

Sí

Sí

Sí

ObjetoDeImagenRetrocederPágina (Pági‐
na 1709)

Sí

Sí

Sí

Sí

Codificar (Página 1558)

No

No

No

No

CodificarEx (Página 1559)

No

No

No

No

Tecla directa (Página 1560)

No

No

No

No

TeclaDirectaNúmeroDeImagen (Página 1563)

No

No

No

No

ImprimirImagen (Página 1622)

No

No

No

No

ImprimirInforme (Página 1623)

No

No

No

No

RegistrarAcciónDeUsuario (Página 1563)

No

No

No

No

IncrementarValorEnfocado (Página 1565)

Sí

Sí

Sí

Sí

IncrementarVariable (Página 1602)

Sí

Sí

Sí

Sí

ExportarRegistros (Página 1678)

Sí

Sí

Sí

Sí

ExportarRegistrosConSumaDeVerificación (Pá‐
gina 1680)

No

No

No

No

ExportarImportarAdministraciónDeUsuarios (Pá‐ No
gina 1598)

No

No

No

IrAInicio (Página 1711)

Sí

Sí

Sí

Sí

IrAFin (Página 1711)

Sí

Sí

Sí

Sí

RetirarHardwareConSeguridad (Página 1565)

Sí

Sí

Sí

Sí

NavegadorHTMLCancelar (Página 1640)

Sí

Sí

Sí

Sí

NavegadorHTMLDesplazarseAbajo (Pági‐
na 1640)

Sí

Sí

Sí

Sí

NavegadorHTMLActualizar (Página 1641)

Sí

Sí

Sí

Sí

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1527

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KTP400 Basic
PN

KTP700 Basic
PN / DP

KTP900 Ba‐
sic PN

KTP1200 Basic
PN / DP

NavegadorHTMLDesplazarseArriba (Pági‐
na 1641)

Sí

Sí

Sí

Sí

NavegadorHTMLAcercar (Página 1642)

Sí

Sí

Sí

Sí

NavegadorHTMLAlejar (Página 1642)

Sí

Sí

Sí

Sí

HTMLNavegadorALaIzquierda (Página 1642)

Sí

Sí

Sí

Sí

NavegadorHTMLALaDerecha (Página 1643)

Sí

Sí

Sí

Sí

NavegadorHTMLRetrocederPágina (Pági‐
na 1644)

Sí

Sí

Sí

Sí

NavegadorHTMLAvanzarPágina (Página 1643)

Sí

Sí

Sí

Sí

NavegadorHTMLPáginaInicio (Página 1644)

Sí

Sí

Sí

Sí

NavegadorHTMLAdelante (Página 1645)

Sí

Sí

Sí

Sí

NavegadorHTMLAtrás (Página 1645)

Sí

Sí

Sí

Sí

ImportarRegistros (Página 1683)

Sí

Sí

Sí

Sí

ImportarRegistrosConSumaDeVerificación (Pá‐
gina 1684)

No

No

No

No

InvertirBit (Página 1608)

Sí

Sí

Sí

Sí

InvertirBitEnVariable (Página 1610)

Sí

Sí

Sí

Sí

InvertirEscalaLineal (Página 1603)

Sí

Sí

Sí

Sí

CalibrarPantallaTáctil (Página 1636)

Sí

Sí

Sí

Sí

CopiarFichero (Página 1591)

No

No

No

No

VisorDeCurvasAvanzarPágina (Página 1646)

Sí

Sí

Sí

Sí

VisorDeCurvasRetrocederPágina (Página 1646)

Sí

Sí

Sí

Sí

VisorDeCurvasAmpliar (Página 1647)

Sí

Sí

Sí

Sí

VisorDeCurvasComprimir (Página 1647)

Sí

Sí

Sí

Sí

VisorDeCurvasReglaIzquierda (Página 1648)

Sí

Sí

Sí

Sí

VisorDeCurvasReglaDerecha (Página 1648)

Sí

Sí

Sí

Sí

VisorDeCurvasActivarModoRegla (Página 1649) Sí

Sí

Sí

Sí

VisorDeCurvasIniciarParar (Página 1650)

Sí

Sí

Sí

Sí

VisorDeCurvasIrAlPrincipio (Página 1650)

Sí

Sí

Sí

Sí

CargarRegistro (Página 1686)

Sí

Sí

Sí

Sí

LeerNombreDeUsuario (Página 1599)

Sí

Sí

Sí

Sí

LeerRegistroDelControlador (Página 1687)

Sí

Sí

Sí

Sí

LeerNombreDelRegistro (Página 1688)

No

No

No

No

LeerVariablesDeRegistroDelControlador (Pági‐
na 1690)

Sí

Sí

Sí

Sí

LeerNúmeroDeGrupo (Página 1600)

Sí

Sí

Sí

Sí

LeerBrillo (Página 1639)

No

LeerContraseña (Página 1600)

No

LeerModoPLC (Página 1624)

Sí

Sí

Sí

Sí

EscalaLineal (Página 1604)

Sí

Sí

Sí

Sí

BorrarFichero (Página 1592)

Sí

Sí

Sí

Sí

1528

No
1)

No

No
1)

No

No
1)

No 1)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KTP400 Basic
PN

KTP700 Basic
PN / DP

KTP900 Ba‐
sic PN

KTP1200 Basic
PN / DP

BorrarRegistro (Página 1691)

Sí

Sí

Sí

Sí

BorrarRegistroMemoria (Página 1692)

No

No

No

No

BorrarBúferDeAvisos (Página 1672)

Sí

Sí

Sí

Sí

BorrarBúferDeAvisosProtool (Página 1673)

Sí

Sí

Sí

Sí

VisorDeAvisosActualizar (Página 1674)

No

No

No

No

VisorDeAvisosLoopInAlarm (Página 1674)

Sí

Sí

Sí

Sí

VisorDeAvisosAcusarAviso (Página 1675)

Sí

Sí

Sí

Sí

VisorDeAvisosMostrarTextoAyuda (Pági‐
na 1676)

Sí

Sí

Sí

Sí

AbrirTodosLosFicheros (Página 1593)

Sí

Sí

Sí

Sí

AbrirTecladoDePantalla (Página 1706)

No

No

No

No

AbrirDiálogoControlPanel (Página 1566)

Sí 2)

Sí 2)

Sí 2)

Sí 2)

AbrirVentanaDeSímboloDelSistema (Pági‐
na 1567)

No

No

No

No

AbrirInternetExplorer (Página 1567)

No

No

No

No

AbrirPanelDeControl (Página 1568)

No

No

No

No

AbrirAdministradorDeTareas (Página 1705)

No

No

No

No

PDFDesplazarseAbajo (Página 1651)

No

No

No

No

PDFAdaptarAncho (Página 1652)

No

No

No

No

PDFAdaptarAltura (Página 1652)

No

No

No

No

PDFDesplazarseArriba (Página 1651)

No

No

No

No

PDFPrimeraPágina (Página 1652)

No

No

No

No

PDFÚltimaPágina (Página 1653)

No

No

No

No

PDFAvanzarPágina (Página 1653)

No

No

No

No

PDFRetrocederPágina (Página 1654)

No

No

No

No

PDFIrAPágina (Página 1654)

No

No

No

No

PDFAcercar (Página 1655)

No

No

No

No

PDFAlejar (Página 1655)

No

No

No

No

PDFDesplazarseIzquierda (Página 1656)

No

No

No

No

PDFDesplazarseDerecha (Página 1656)

No

No

No

No

PDFZoomOriginal (Página 1656)

No

No

No

No

AcusarAviso (Página 1676)

Sí

Sí

Sí

Sí

VisorDeRecetasRegistroNuevo (Página 1693)

Sí

Sí

Sí

Sí

VisorDeRecetasLeerRegistroDelControlador
(Página 1693)

Sí

Sí

Sí

Sí

VisorDeRecetasBorrarRegistro (Página 1694)

Sí

Sí

Sí

Sí

VisorDeRecetasMenú (Página 1694)

Sí

Sí

Sí

Sí

VisorDeRecetasAbrir (Página 1695)

Sí

Sí

Sí

Sí

VisorDeRecetasEscribirRegistroEnControlador
(Página 1696)

Sí

Sí

Sí

Sí

VisorDeRecetasGuardarRegistro (Página 1696)

Sí

Sí

Sí

Sí

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1529

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KTP400 Basic
PN

KTP700 Basic
PN / DP

KTP900 Ba‐
sic PN

KTP1200 Basic
PN / DP

VisorDeRecetasGuardarRegistroComo (Pági‐
na 1696)

Sí

Sí

Sí

Sí

VisorDeRecetasSincronizarRegistroConVaria‐
bles (Página 1697)

Sí

Sí

Sí

Sí

VisorDeRecetasCambiarNombreDeRegistro
(Página 1697)

Sí

Sí

Sí

Sí

VisorDeRecetasMostrarTextoDeAyuda (Pági‐
na 1698)

Sí

Sí

Sí

Sí

VisorDeRecetasAtrás (Página 1698)

Sí

Sí

Sí

Sí

DesactivarBit (Página 1611)

Sí

Sí

Sí

Sí

DesactivarBitEnVariable (Página 1613)

Sí

Sí

Sí

Sí

BotónPulsar (Página 1571)

Sí

Sí

Sí

Sí

BotónSoltar (Página 1572)

Sí

Sí

Sí

Sí

DesplazarYEnmascarar (Página 1615)

Sí

Sí

Sí

Sí

CerrarTodosLosFicheros (Página 1594)

Sí

Sí

Sí

Sí

EscribirRegistroEnControlador (Página 1699)

Sí

Sí

Sí

Sí

EscribirVariableDeRegistroEnControlador (Pági‐ Sí
na 1700)

Sí

Sí

Sí

AvanzarPágina (Página 1710)

Sí

Sí

Sí

Sí

RetrocederPágina (Página 1710)

Sí

Sí

Sí

Sí

EnviarCorreoElectrónico (Página 1569)

No

No

No

No

ConfigurarSeñalAcústica (Página 1637)

No

No

No

No

ConfigurarModoDeVisualización (Página 1625)

No

No

No

No

EstablecerModoDeOperaciónPanel (Pági‐
na 1626)

Sí

Sí

Sí

Sí

ActivarBit (Página 1617)

Sí

Sí

Sí

Sí

ActivarBitDeVariable (Página 1619)

Sí

Sí

Sí

Sí

ActivarBitMientrasTeclaPulsada (Página 1621)

Sí

Sí

Sí

Sí

EstablecerColorRetroiluminación (Página 1639)

No

No

No

No

EstablecerBrillo (Página 1638)

Sí

Sí

Sí

Sí

EstablecerModoTecladoDePantalla (Pági‐
na 1627)

No

No

No

No

ActivarModoDeInformeAviso (Página 1623)

No

No

No

No

DefinirEstadoVariableDeReceta (Página 1701)

Sí

Sí

Sí

Sí

AjustarHorarioVerano (Página 1570)

No

No

No

No

EstablecerIdioma (Página 1629)

Sí

Sí

Sí

Sí

DefinirVariable (Página 1606)

Sí

Sí

Sí

Sí

EstablecerModoDeConexión (Página 1630)

Sí

Sí

Sí

Sí

AccesoWebActivar (Página 1631)

No

No

No

No

CopiaSeguridadSistemaDeArchivosRAM (Pági‐
na 1572)

No

No

No

No

SimularTeclaSistema (Página 1573)

Sí

Sí

Sí

Sí

1530

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KTP400 Basic
PN

KTP700 Basic
PN / DP

KTP900 Ba‐
sic PN

KTP1200 Basic
PN / DP

SimularVariable (Página 1574)

Sí

Sí

Sí

Sí

VisorSmartClientActualizar (Página 1665)

No

No

No

No

VisorSmartClientProtecciónContraEscrituraOff
(Página 1665)

No

No

No

No

VisorSmartClientProtecciónContraEscrituraOn
(Página 1666)

No

No

No

No

VisorSmartClientDesconectar (Página 1666)

No

No

No

No

VisorSmartClientConectar (Página 1667)

No

No

No

No

VisorSmartClientSalir (Página 1667)

No

No

No

No

GuardarRegistro (Página 1702)

Sí

Sí

Sí

Sí

IniciarArchivación (Página 1595)

Sí

Sí

Sí

Sí

IniciarFicheroSiguiente (Página 1595)

No

No

No

No

IniciarPrograma (Página 1575)

No

No

No

No

EstadoForzarLeerValores (Página 1577)

No

No

No

No

EstadoForzarEscribirValores (Página 1577)

No

No

No

No

ControlarSmartServer (Página 1578)

No

No

No

No

ControlarServidorWeb (Página 1578)

No

No

No

No

PararArchivación (Página 1596)

Sí

Sí

Sí

Sí

PararRuntime (Página 1579)

Sí

Sí

Sí

Sí

VisorDiagnósticoSistemaActivar (Página 1668)

No

No

No

No

VisorDiagnósticoSistemaActualizarBúferPLC
(Página 1669)

Sí

Sí

Sí

Sí

VisorDiagnósticoSistemaVistaDetallada (Pági‐
na 1669)

Sí

Sí

Sí

Sí

VisorDiagnósticoSistemaBúferDiagnóstico (Pá‐
gina 1670)

No

No

No

No

VisorDiagnósticoSistemaVistaDispositivos (Pági‐ No
na 1670)

No

No

No

VisorDiagnósticoSistemaAtrás (Página 1671)

Sí

Sí

Sí

Sí

ConsultarTexto (Página 1580)

No

No

No

No

DesconectarVariableDelVolante (Página 1581)

No

No

No

No

ConectarVariableAlVolante (Página 1581)

No

No

No

No

IdentificarCambioDeUsuario (Página 1601)

Sí

Sí

Sí

Sí

ReducirValorEnfocado (Página 1582)

Sí

Sí

Sí

Sí

DecrementarVariable (Página 1607)

Sí

Sí

Sí

Sí

CambiarConexión (Página 1632)

Sí

Sí

Sí

Sí

CambiarConexiónEIP (Página 1634)

No

No

No

No

MostrarDiálogoInicioSesión (Página 1602)

Sí

Sí

Sí

Sí

MostrarTextoDeAyuda (Página 1582)

Sí

Sí

Sí

Sí

MostrarVentanaDeAvisos (Página 1677)

Sí

Sí

Sí

Sí

MostrarImagenEmergente (Página 1584)

No

No

No

No

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1531

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

MostrarImagenEmergenteTamañoModificable
(Página 1585)

KTP400 Basic
PN

KTP700 Basic
PN / DP

KTP900 Ba‐
sic PN

KTP1200 Basic
PN / DP

No

No

No

No

MostrarImagenDeslizable (Página 1588)

No

No

No

No

MostrarVersiónDeSoftware (Página 1583)

No

No

No

No

MostrarVentanaDeDiagnósticoDelSistema (Pá‐
gina 1671)

No

No

No

No

MostrarAvisoDeSistema (Página 1677)

No

No

No

No

1)
2)

No disponible para paneles a partir de la versión V14.0
Solo para modificar la configuración IP

Funciones de sistema para Comfort Panels
Disponibilidad de las funciones de sistema
La tabla siguiente muestra la disponibilidad de las funciones de sistema en los Comfort Panels.
Sujeto a cambios técnicos.

Sinopsis
KTP400
KP400

TP700
TP900
TP1200
TP1500
TP1900
TP2200

KP700
KP900
KP1200
KP1500

Funciones definidas por el usuario

Sí

Sí

Sí

CerrarSesión (Página 1597)

Sí

Sí

Sí

ActivarImagen (Página 1555)

Sí

Sí

Sí

ActivarImagenConNúmero (Pági‐
na 1556)

Sí

Sí

Sí

ActivarVisorCódigoPLC (Pági‐
na 1657)

No

Sí

Sí

ActivarPantallaDeLimpieza (Pági‐
na 1703)

Sí 1)

Sí

No

ActivarImagenAnterior (Página 1557)

Sí

Sí

Sí

ActualizarVariable (Página 1558)

Sí

Sí

Sí

ModificarContraste (Página 1635)

No

No

No

IniciarSesión (Página 1598)

Sí

Sí

Sí

ArchivarArchivoDeInforme (Pági‐
na 1589)

Sí

Sí

Sí

ArchivarVariable (Página 1590)

Sí

Sí

Sí

1532

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KTP400
KP400

TP700
TP900
TP1200
TP1500
TP1900
TP2200

KP700
KP900
KP1200
KP1500

EditarAviso (Página 1672)

Sí

No

Sí

ObjetoDeImagenCursorAbajo (Pági‐
na 1706)

Sí

Sí

Sí

ObjetoDeImagenCursorArriba (Pági‐
na 1707)

Sí

Sí

Sí

ObjetoImagenCursorIzquierda (Pági‐
na 1709)

No

Sí

Sí

ObjetoDeImagenCursorDerecha (Pá‐
gina 1708)

No

Sí

Sí

ObjetoDeImagenAvanzarPágina (Pá‐ Sí
gina 1708)

Sí

Sí

ObjetoDeImagenRetrocederPágina
(Página 1709)

Sí

Sí

Sí

Codificar (Página 1558)

Sí

Sí

Sí

CodificarEx (Página 1559)

Sí

Sí

Sí

TeclaDirecta (Página 1560)

Sí

1)

Sí

No

TeclaDirectaNumeroDeImagen (Pági‐ Sí
na 1563)

1)

Sí

No

ImprimirImagen (Página 1622)

Sí

Sí

Sí

ImprimirInforme (Página 1623)

Sí

Sí

Sí

RegistrarAcciónDeUsuario (Pági‐
na 1563)

Sí

Sí

Sí

IncrementarValorEnfocado (Pági‐
na 1565)

Sí

No

Sí

IncrementarVariable (Página 1602)

Sí

Sí

Sí

ExportarRegistros (Página 1678)

Sí

Sí

Sí

ExportarRegistrosConSumaDeVerifi‐
cación (Página 1680)

Sí

Sí

Sí

ExportarImportarAdministraciónDeU‐
suarios (Página 1598)

Sí

Sí

Sí

IrAInicio (Página 1711)

Sí

No

Sí

IrAFin (Página 1711)

Sí

No

Sí

RetirarHardwareConSeguridad (Pági‐ Sí
na 1565)

Sí

Sí

NavegadorHTMLCancelar (Pági‐
na 1640)

No

Sí

Sí

NavegadorHTMLDesplazarseAbajo
(Página 1640)

No

Sí

Sí

NavegadorHTMLActualizar (Pági‐
na 1641)

No

Sí

Sí

NavegadorHTMLDesplazarseArriba
(Página 1641)

No

Sí

Sí

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1533

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KTP400

TP700
TP900
TP1200
TP1500
TP1900
TP2200

KP700
KP900
KP1200
KP1500

No

Sí

Sí

NavegadorHTMLAtrás (Página 1645)

No

Sí

Sí

NavegadorHTMLAcercar (Pági‐
na 1642)

No

Sí

Sí

NavegadorHTMLAlejar (Página 1642) No

Sí

Sí

HTMLNavegadorALaIzquierda (Pági‐
na 1642)

No

Sí

Sí

NavegadorHTMLALaDerecha (Pági‐
na 1643)

No

Sí

Sí

NavegadorHTMLRetrocederPágina
(Página 1644)

No

Sí

Sí

NavegadorHTMLAvanzarPágina (Pá‐ No
gina 1643)

Sí

Sí

NavegadorHTMLPáginaInicio (Pági‐
na 1644)

No

Sí

Sí

NavegadorHTMLPáginaInicio (Pági‐
na 1644)

No

Sí

Sí

ImportarRegistros (Página 1683)

Sí

Sí

Sí

ImportarRegistrosConSumaDeVerifi‐
cación (Página 1684)

Sí

Sí

Sí

InvertirBit (Página 1608)

Sí

Sí

Sí

InvertirBitEnVariable (Página 1610)

Sí

Sí

Sí

InvertirEscalaLineal (Página 1603)

Sí

Sí

Sí

KP400

NavegadorHTMLAdelante (Pági‐
na 1645)

CalibrarPantallaTáctil (Página 1636)

Sí

Sí

No

CopiarFichero (Página 1591)

Sí

Sí

Sí

VisorDeCurvasAvanzarPágina (Pági‐
na 1646)

Sí

Sí

Sí

VisorDeCurvasRetrocederPágina
(Página 1646)

Sí

Sí

Sí

VisorDeCurvasAmpliar (Página 1647) Sí

Sí

Sí

VisorDeCurvasComprimir (Pági‐
na 1647)

Sí

Sí

Sí

VisorDeCurvasReglaIzquierda (Pági‐
na 1648)

Sí

Sí

Sí

VisorDeCurvasReglaDerecha (Pági‐
na 1648)

Sí

Sí

Sí

VisorDeCurvasActivarModoRegla
(Página 1649)

Sí

Sí

Sí

VisorDeCurvasIniciarParar (Pági‐
na 1650)

Sí

Sí

Sí

1534

1)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KTP400

TP700
TP900
TP1200
TP1500
TP1900
TP2200

KP700
KP900
KP1200
KP1500

Sí

Sí

Sí

KP400

VisorDeCurvasIrAlPrincipio (Pági‐
na 1650)
CargarRegistro (Página 1686)

Sí

Sí

Sí

LeerNombreDeUsuario (Pági‐
na 1599)

Sí

Sí

Sí

LeerRegistroDelControlador (Pági‐
na 1687)

Sí

Sí

Sí

LeerNombreDelRegistro (Pági‐
na 1688)

Sí

Sí

Sí

LeerVariablesDeRegistroDelContro‐
lador (Página 1690)

Sí

Sí

Sí

LeerNúmeroDeGrupo (Página 1600)

Sí

Sí

Sí

LeerBrillo (Página 1639)

Sí

LeerContraseña (Página 1600)

No

LeerModoPLC (Página 1624)

Sí

Sí

Sí

EscalaLineal (Página 1604)

Sí

Sí

Sí

BorrarFichero (Página 1592)

Sí

Sí

Sí

BorrarRegistro (Página 1691)

Sí

Sí

Sí

BorrarRegistroMemoria (Pági‐
na 1692)

Sí

Sí

Sí

Sí
2)

No

Sí
2)

No 2)

BorrarBúferDeAvisos (Página 1672)

Sí

Sí

Sí

BorrarBúferDeAvisosProtool (Pági‐
na 1673)

Sí

Sí

Sí

VisorDeAvisosActualizar (Pági‐
na 1674)

Sí

Sí

Sí

VisorDeAvisosLoopInAlarm (Pági‐
na 1674)

Sí

Sí

Sí

VisorDeAvisosAcusarAviso (Pági‐
na 1675)

Sí

Sí

Sí

VisorDeAvisosMostrarTextoAyuda
(Página 1676)

Sí

Sí

Sí

AbrirTodosLosFicheros (Pági‐
na 1593)

Sí

Sí

Sí

AbrirTecladoDePantalla (Pági‐
na 1706)

Sí

Sí

Sí

AbrirExploradorDeArchivos (Pági‐
na 1704)

Sí

Sí

Sí

AbrirDiálogoControlPanel (Pági‐
na 1566)

Sí

Sí

Sí

AbrirVentanaDeSímboloDelSistema
(Página 1567)

Sí

Sí

Sí

AbrirInternetExplorer (Página 1567)

Sí

Sí

Sí

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1535

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KTP400
KP400

TP700
TP900
TP1200
TP1500
TP1900
TP2200

KP700
KP900
KP1200
KP1500

AbrirPanelDeControl (Página 1568)

Sí

Sí

Sí

AbrirAdministradorDeTareas (Pági‐
na 1705)

Sí

Sí

Sí

AcusarAviso (Página 1676)

Sí

No

Sí

PDFDesplazarseAbajo (Página 1651) Sí

Sí

Sí

PDFDesplazarseArriba (Página 1651) Sí

Sí

Sí

PDFAdaptarAncho (Página 1652)

Sí

Sí

Sí

PDFAdaptarAAltura (Página 1652)

Sí

Sí

Sí

PDFPrimeraPágina (Página 1652)

Sí

Sí

Sí

PDFÚltimaPágina (Página 1653)

Sí

Sí

Sí

PDFAvanzarPágina (Página 1653)

Sí

Sí

Sí

PDFIrAPágina (Página 1654)

Sí

Sí

Sí

PDFRetrocederPágina (Página 1654) Sí

Sí

Sí

PDFAcercar (Página 1655)

Sí

Sí

Sí

PDFAlejar (Página 1655)

Sí

Sí

Sí

PDFDesplazarseIzquierda (Pági‐
na 1656)

Sí

Sí

Sí

PDFDesplazarseDerecha (Pági‐
na 1656)

Sí

Sí

Sí

PDFZoomOriginal (Página 1656)

Sí

Sí

Sí

VisorCódigoPLCDetalles (Pági‐
na 1660)

No

Sí

Sí

VisorCódigoPLCSiguienteSegmento
(Página 1660)

No

Sí

Sí

VisorCódigoPLCMostrarModoEtapa
(Página 1661)

No

Sí

Sí

VisorCódigoPLCSímbolos (Pági‐
na 1661)

No

Sí

Sí

VisorCódigoPLCTransiciónInterlock
(Página 1662)

No

Sí

Sí

VisorCódigoPLCAcercar (Pági‐
na 1663)

No

Sí

Sí

VisorCódigoPLCAlejar (Página 1663)

No

Sí

Sí

VisorCódigoPLCAnteriorSegmento
(Página 1664)

No

Sí

Sí

VisorCódigoPLCSupervisiónOLlama‐
daFB (Página 1664)

No

Sí

Sí

VisorDeRecetasRegistroNuevo (Pági‐ Sí
na 1693)

Sí

Sí

VisorDeRecetasLeerRegistroDelCon‐ Sí
trolador (Página 1693)

Sí

Sí

1536

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KTP400

TP700
TP900
TP1200
TP1500
TP1900
TP2200

KP700
KP900
KP1200
KP1500

VisorDeRecetasBorrarRegistro (Pági‐ Sí
na 1694)

Sí

Sí

KP400

VisorDeRecetasMenú (Página 1694)

Sí

Sí

Sí

VisorDeRecetasAbrir (Página 1695)

Sí

Sí

Sí

VisorDeRecetasEscribirRegistroEn‐
Controlador (Página 1696)

Sí

Sí

Sí

VisorDeRecetasGuardarRegistro (Pá‐ Sí
gina 1696)

Sí

Sí

VisorDeRecetasGuardarRegistroCo‐
mo (Página 1696)

Sí

Sí

Sí

VisorDeRecetasSincronizarRegistro‐
ConVariables (Página 1697)

Sí

Sí

Sí

VisorDeRecetasCambiarNombreDe‐
Registro (Página 1697)

Sí

Sí

Sí

VisorDeRecetasMostrarTextoDeAyu‐
da (Página 1698)

Sí

Sí

Sí

VisorDeRecetasAtrás (Página 1698)

Sí

Sí

Sí

DesactivarBit (Página 1611)

Sí

Sí

Sí

DesactivarBitEnVariable (Pági‐
na 1613)

Sí

Sí

Sí

BotónPulsar (Página 1571)

Sí

Sí

Sí

BotónSoltar (Página 1572)

Sí

Sí

Sí

DesplazarYEnmascarar (Pági‐
na 1615)

Sí

Sí

Sí

CerrarTodosLosFicheros (Pági‐
na 1594)

Sí

Sí

Sí

EscribirRegistroEnControlador (Pági‐
na 1699)

Sí

Sí

Sí

EscribirVariableDeRegistroEnContro‐ Sí
lador (Página 1700)

Sí

Sí

AvanzarPágina (Página 1710)

Sí

No

Sí

RetrocederPágina (Página 1710)

Sí

No

Sí

EnviarCorreoElectronico (Pági‐
na 1569)

Sí

Sí

Sí

ConfigurarSeñalAcústica (Pági‐
na 1637)

Sí 1)

Sí

No

ConfigurarModoDeVisualización (Pá‐
gina 1625)

No

No

No

EstablecerModoDeOperaciónPanel
(Página 1626)

Sí

Sí

Sí

ActivarBit (Página 1617)

Sí

Sí

Sí

ActivarBitDeVariable (Página 1619)

Sí

Sí

Sí

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1537

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KTP400

TP700
TP900
TP1200
TP1500
TP1900
TP2200

KP700
KP900
KP1200
KP1500

Sí

Sí

EstablecerColorRetroiluminación (Pá‐ No
gina 1639)

No

No

EstablecerBrillo (Página 1638)

Sí

Sí

Sí

EstablecerModoTecladoDePantalla
(Página 1627)

Sí

Sí

Sí

DefinirModoPLC (Página 1628)

Sí

Sí

Sí

ActivarModoDeInformeAviso (Pági‐
na 1623)

Sí

Sí

Sí

DefinirEstadoVariableDeReceta (Pá‐
gina 1701)

Sí

Sí

Sí

AjustarHorarioVerano (Página 1570)

Sí

Sí

Sí

EstablecerIdioma (Página 1629)

Sí

Sí

Sí

DefinirVariable (Página 1606)

Sí

Sí

Sí

EstablecerModoDeConexión (Pági‐
na 1630)

Sí

Sí

Sí

AccesoWebActivar (Página 1631)

Sí

Sí

Sí

CopiaSeguridadSistemaDeArchivos‐
RAM (Página 1572)

Sí

Sí

Sí

SimularTeclaSistema (Página 1573)

Sí

No

Sí

SimularVariable (Página 1574)

Sí

Sí

Sí

VisorSmartClientActualizar (Pági‐
na 1665)

Sí

Sí

Sí

VisorSmartClientProtecciónContraEs‐ Sí
crituraOff (Página 1665)

Sí

Sí

VisorSmartClientProtecciónContraEs‐ Sí
crituraOn (Página 1666)

Sí

Sí

VisorSmartClientDesconectar (Pági‐
na 1666)

Sí

Sí

Sí

VisorSmartClientConectar (Pági‐
na 1667)

Sí

Sí

Sí

VisorSmartClientSalir (Página 1667)

Sí

Sí

Sí

GuardarRegistro (Página 1702)

Sí

Sí

Sí

IniciarArchivación (Página 1595)

Sí

Sí

Sí

IniciarFicheroSiguiente (Página 1595) Sí

Sí

Sí

IniciarPrograma (Página 1575)

Sí

Sí

Sí

EstadoForzarLeerValores (Pági‐
na 1577)

Sí

Sí

Sí

EstadoForzarEscribirValores (Pági‐
na 1577)

Sí

Sí

Sí

KP400

ActivarBitMientrasTeclaPulsada (Pá‐
gina 1621)

1538

Sí

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KTP400
KP400

TP700
TP900
TP1200
TP1500
TP1900
TP2200

KP700
KP900
KP1200
KP1500

ControlarSmartServer (Página 1578)

Sí

Sí

Sí

ControlarServidorWeb (Página 1578)

Sí

Sí

Sí

PararArchivación (Página 1596)

Sí

Sí

Sí

PararRuntime (Página 1579)

Sí

Sí

Sí

VisorDiagnósticoSistemaActivar (Pá‐
gina 1668)

Sí

Sí

Sí

VisorDiagnósticoSistemaActualizar‐
BúferPLC (Página 1669)

Sí

Sí

Sí

VisorDiagnósticoSistemaVistaDeta‐
llada (Página 1669)

Sí

Sí

Sí

VisorDiagnósticoSistemaBúferDiag‐
nóstico (Página 1670)

Sí

Sí

Sí

VisorDiagnósticoSistemaVistaDispo‐
sitivos (Página 1670)

Sí

Sí

Sí

VisorDiagnósticoSistemaAtrás (Pági‐
na 1671)

Sí

Sí

Sí

ConsultarTexto (Página 1580)

Sí

Sí

Sí

DesconectarVariableDelVolante (Pá‐
gina 1581)

No

No

No

ConectarVariableAlVolante (Pági‐
na 1581)

No

No

No

IdentificarCambioDeUsuario (Pági‐
na 1601)

Sí

Sí

Sí

ReducirValorEnfocado (Página 1582)

Sí

No

Sí

DecrementarVariable (Página 1607)

Sí

Sí

Sí

CambiarConexión (Página 1632)

Sí

Sí

Sí

CambiarConexiónEIP (Página 1634)

Sí

Sí

Sí

MostrarDiálogoInicioSesión (Pági‐
na 1602)

Sí

Sí

Sí

MostrarTextoDeAyuda (Página 1582)

Sí

Sí

Sí

MostrarVentanaDeAvisos (Pági‐
na 1677)

Sí

Sí

Sí

MostrarImagenEmergente (Pági‐
na 1584)

Sí

Sí

Sí

MostrarImagenEmergenteTamaño‐
Modificable (Página 1585)

Sí

Sí

Sí

MostrarImagenDeslizable (Pági‐
na 1588)

Sí

Sí

Sí

MostrarVersiónDeSoftware (Pági‐
na 1583)

Sí

Sí

Sí

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1539

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
KTP400
KP400

TP700
TP900
TP1200
TP1500
TP1900
TP2200

KP700
KP900
KP1200
KP1500

MostrarVentanaDeDiagnósticoDel‐
Sistema (Página 1671)

Sí

Sí

Sí

MostrarAvisoDeSistema (Pági‐
na 1677)

Sí

Sí

Sí

1)
2)

Solo con el KTP 400 Comfort
No disponible para paneles a partir de la versión V14.0

Funciones de sistema para Mobile Panels
Disponibilidad de las funciones de sistema
La tabla siguiente muestra disponibilidad de las funciones de sistema en los Mobile Panels.
Sujeto a cambios técnicos.

Sinopsis
Mobile
Panel
177 DP

Mobile
Panel
177 PN

Mobile Panel
277
Mobile Panel
277 IWLAN
Mobile Panel
277 F IWLAN

KTP400F KTP700 Mobile /
Mobile
KTP700F Mobile

KTP900 Mo‐
bile /
KTP900F Mo‐
bile

Funciones definidas por el usua‐ No
rio

No

Sí

Sí

Sí

Sí

CerrarSesión (Página 1597)

Sí

Sí

Sí

Sí

Sí

Sí

ActivarImagen (Página 1555)

Sí

Sí

Sí

Sí

Sí

Sí

ActivarImagenConNúmero (Pá‐
gina 1556)

Sí

Sí

Sí

Sí

Sí

Sí

ActivarVisorCódigoPLC (Pági‐
na 1657)

No

No

No

No

Sí

Sí

ActivarPantallaDeLimpieza (Pá‐
gina 1703)

No

No

No

No

No

No

ActivarImagenAnterior (Pági‐
na 1557)

Sí

Sí

Sí

Sí

Sí

Sí

ActualizarVariable (Pági‐
na 1558)

Sí

Sí

Sí

Sí

Sí

Sí

ModificarContraste (Pági‐
na 1635)

Sí

Sí

No

No

No

No

IniciarSesión (Página 1598)

Sí

Sí

Sí

Sí

Sí

Sí

1540

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Mobile
Panel
177 DP

Mobile
Panel
177 PN

Mobile Panel
277
Mobile Panel
277 IWLAN
Mobile Panel
277 F IWLAN

KTP400F KTP700 Mobile /
Mobile
KTP700F Mobile

KTP900 Mo‐
bile /
KTP900F Mo‐
bile

No

No

Sí

Sí

Sí

Sí

ArchivarVariable (Página 1590)

No

No

Sí

Sí

Sí

Sí

EditarAviso (Página 1672)

Sí

Sí

Sí

Sí

Sí

Sí

ObjetoDeImagenCursorAbajo
(Página 1706)

Sí

Sí

Sí

Sí

Sí

Sí

ObjetoDeImagenCursorArriba
(Página 1707)

Sí

Sí

Sí

Sí

Sí

Sí

ObjetoDeImagenAvanzarPági‐
na (Página 1708)

Sí

Sí

Sí

Sí

Sí

Sí

ObjetoDeImagenRetrocederPá‐
gina (Página 1709)

Sí

Sí

Sí

Sí

Sí

Sí

ObjetoImagenCursorIzquierda
(Página 1709)

Sí

Sí

Sí

Sí

Sí

Sí

ObjetoDeImagenCursorDere‐
cha (Página 1708)

Sí

Sí

Sí

Sí

Sí

Sí

Codificar (Página 1558)

Sí

Sí

Sí

Sí

Sí

Sí

ArchivarArchivoDeInforme (Pá‐
gina 1589)

CodificarEx (Página 1559)

Sí

Sí

Sí

Sí

Sí

Sí

TeclaDirecta (Página 1560)

Sí

Sí

Sí

Sí

Sí

Sí

TeclaDirectaNumeroDeImagen
(Página 1563)

Sí

Sí

Sí

Sí

Sí

Sí

ImprimirImagen (Página 1622)

No

Sí

Sí

Sí

Sí

Sí

ImprimirInforme (Página 1623)

No

Sí

Sí

Sí

Sí

Sí

RegistrarAcciónDeUsuario (Pá‐
gina 1563)

No

No

Sí

Sí

Sí

Sí

IncrementarValorEnfocado (Pá‐
gina 1565)

Sí

Sí

Sí

Sí

Sí

Sí

IncrementarVariable (Pági‐
na 1602)

Sí

Sí

Sí

Sí

Sí

Sí

ExportarRegistros (Pági‐
na 1678)

Sí

Sí

Sí

Sí

Sí

Sí

ExportarRegistrosConSumaDe‐
Verificación (Página 1680)

No

No

Sí

Sí

Sí

Sí

ExportarImportarAdministración‐ Sí
DeUsuarios (Página 1598)

Sí

Sí

Sí

Sí

Sí

IrAInicio (Página 1711)

Sí

Sí

Sí

Sí

Sí

Sí

IrAFin (Página 1711)

Sí

Sí

Sí

Sí

Sí

Sí

RetirarHardwareConSeguridad
(Página 1565)

No

No

Sí

Sí

Sí

Sí

NavegadorHTMLCancelar (Pági‐ No
na 1640)

No

No

Sí

Sí

Sí

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1541

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Mobile
Panel
177 DP

Mobile
Panel
177 PN

Mobile Panel
277
Mobile Panel
277 IWLAN
Mobile Panel
277 F IWLAN

KTP400F KTP700 Mobile /
Mobile
KTP700F Mobile

KTP900 Mo‐
bile /
KTP900F Mo‐
bile

NavegadorHTMLDesplazarseA‐
bajo (Página 1640)

No

No

No

Sí

Sí

Sí

NavegadorHTMLActualizar (Pá‐
gina 1641)

No

No

No

Sí

Sí

Sí

NavegadorHTMLDesplazarseA‐
rriba (Página 1641)

No

No

No

Sí

Sí

Sí

NavegadorHTMLAcercar (Pági‐
na 1642)

No

No

No

Sí

Sí

Sí

NavegadorHTMLAlejar (Pági‐
na 1642)

No

No

No

Sí

Sí

Sí

HTMLNavegadorALaIzquierda
(Página 1642)

No

No

No

Sí

Sí

Sí

NavegadorHTMLALaDerecha
(Página 1643)

No

No

No

Sí

Sí

Sí

NavegadorHTMLRetrocederPá‐
gina (Página 1644)

No

No

No

Sí

Sí

Sí

NavegadorHTMLAvanzarPági‐
na (Página 1643)

No

No

No

Sí

Sí

Sí

NavegadorHTMLPáginaInicio
(Página 1644)

No

No

No

Sí

Sí

Sí

NavegadorHTMLAdelante (Pági‐ No
na 1645)

No

No

Sí

Sí

Sí

NavegadorHTMLAtrás (Pági‐
na 1645)

No

No

No

Sí

Sí

Sí

ImportarRegistros (Pági‐
na 1683)

Sí

Sí

Sí

Sí

Sí

Sí

ImportarRegistrosConSumaDe‐
Verificación (Página 1684)

No

No

Sí

Sí

Sí

Sí

InvertirBit (Página 1608)

Sí

Sí

Sí

Sí

Sí

Sí

InvertirBitEnVariable (Pági‐
na 1610)

Sí

Sí

Sí

Sí

Sí

Sí

InvertirEscalaLineal (Pági‐
na 1603)

Sí

Sí

Sí

Sí

Sí

Sí

CalibrarPantallaTáctil (Pági‐
na 1636)

Sí

Sí

Sí 1)

Sí

Sí

Sí

CopiarFichero (Página 1591)

No

No

Sí

Sí

Sí

Sí

VisorDeCurvasAvanzarPágina
(Página 1646)

Sí

Sí

Sí

Sí

Sí

Sí

VisorDeCurvasRetrocederPági‐
na (Página 1646)

Sí

Sí

Sí

Sí

Sí

Sí

VisorDeCurvasAmpliar (Pági‐
na 1647)

Sí

Sí

Sí

Sí

Sí

Sí

1542

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Mobile
Panel
177 DP

Mobile
Panel
177 PN

Mobile Panel
277
Mobile Panel
277 IWLAN
Mobile Panel
277 F IWLAN

KTP400F KTP700 Mobile /
Mobile
KTP700F Mobile

KTP900 Mo‐
bile /
KTP900F Mo‐
bile

VisorDeCurvasComprimir (Pági‐ Sí
na 1647)

Sí

Sí

Sí

Sí

Sí

VisorDeCurvasReglaIzquierda
(Página 1648)

Sí

Sí

Sí

Sí

Sí

Sí

VisorDeCurvasReglaDerecha
(Página 1648)

Sí

Sí

Sí

Sí

Sí

Sí

VisorDeCurvasActivarModoReg‐ Sí
la (Página 1649)

Sí

Sí

Sí

Sí

Sí

VisorDeCurvasIniciarParar (Pá‐
gina 1650)

Sí

Sí

Sí

Sí

Sí

Sí

VisorDeCurvasIrAlPrincipio (Pá‐
gina 1650)

Sí

Sí

Sí

Sí

Sí

Sí

CargarRegistro (Página 1686)

Sí

Sí

Sí

Sí

Sí

Sí

LeerNombreDeUsuario (Pági‐
na 1599)

Sí

Sí

Sí

Sí

Sí

Sí

LeerRegistroDelControlador
(Página 1687)

Sí

Sí

Sí

Sí

Sí

Sí

LeerNombreDelRegistro (Pági‐
na 1688)

Sí

Sí

Sí

Sí

Sí

Sí

LeerVariablesDeRegistroDel‐
Controlador (Página 1690)

Sí

Sí

Sí

Sí

Sí

Sí

LeerNúmeroDeGrupo (Pági‐
na 1600)

Sí

Sí

Sí

Sí

Sí

Sí

LeerBrillo (Página 1639)

No

No

No

Sí

LeerContraseña (Página 1600)

Sí

Sí

Sí

No

BorrarFichero (Página 1592)

No

No

Sí

Sí

Sí

Sí

BorrarRegistro (Página 1691)

Sí

Sí

Sí

Sí

Sí

Sí

BorrarRegistroMemoria (Pági‐
na 1692)

Sí

Sí

Sí

Sí

Sí

Sí

BorrarBúferDeAvisos (Pági‐
na 1672)

Sí

Sí

Sí

Sí

Sí

Sí

BorrarBúferDeAvisosProtool
(Página 1673)

Sí

Sí

Sí

Sí

Sí

Sí

VisorDeAvisosActualizar (Pági‐
na 1674)

Sí

Sí

Sí

Sí

Sí

Sí

VisorDeAvisosLoopInAlarm (Pá‐ Sí
gina 1674)

Sí

Sí

Sí

Sí

Sí

VisorDeAvisosAcusarAviso (Pá‐
gina 1675)

Sí

Sí

Sí

Sí

Sí

Sí

VisorDeAvisosMostrarTextoAyu‐ Sí
da (Página 1676)

Sí

Sí

Sí

Sí

Sí

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Sí
2)

No

Sí
2)

No 2)

1543

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Mobile
Panel
177 DP

Mobile
Panel
177 PN

Mobile Panel
277
Mobile Panel
277 IWLAN
Mobile Panel
277 F IWLAN

KTP400F KTP700 Mobile /
Mobile
KTP700F Mobile

KTP900 Mo‐
bile /
KTP900F Mo‐
bile

AbrirTodosLosFicheros (Pági‐
na 1593)

No

No

Sí

Sí

Sí

Sí

AbrirExploradorDeArchivos (Pá‐
gina 1704)

No

No

No

Sí

Sí

Sí

AbrirTecladoDePantalla (Pági‐
na 1706)

No

No

Sí

Sí

Sí

Sí

AbrirVentanaDeSímboloDelSis‐
tema (Página 1567)

No

No

Sí

Sí

Sí

Sí

AbrirDiálogoControlPanel (Pági‐ No
na 1566)

No

No

Sí

Sí

Sí

AbrirInternetExplorer (Pági‐
na 1567)

No

Sí

Sí

Sí

Sí

Sí

AbrirAdministradorDeTareas
(Página 1705)

No

No

Sí

Sí

Sí

Sí

AbrirPanelDeControl (Pági‐
na 1568)

No

No

Sí 1)

No

Sí/no 3)

Sí/no 3)

AcusarAviso (Página 1676)

Sí

Sí

Sí

Sí

Sí

Sí

PDFDesplazarseAbajo (Pági‐
na 1651)

No

No

No

Sí

Sí

Sí

PDFDesplazarseArriba (Pági‐
na 1651)

No

No

No

Sí

Sí

Sí

PDFAdaptarAncho (Pági‐
na 1652)

No

No

No

Sí

Sí

Sí

PDFAdaptarAAltura (Pági‐
na 1652)

No

No

No

Sí

Sí

Sí

PDFPrimeraPágina (Pági‐
na 1652)

No

No

No

Sí

Sí

Sí

PDFÚltimaPágina (Página 1653) No

No

No

Sí

Sí

Sí

PDFAvanzarPágina (Pági‐
na 1653)

No

No

No

Sí

Sí

Sí

PDFIrAPágina (Página 1654)

No

No

No

Sí

Sí

Sí

PDFRetrocederPágina (Pági‐
na 1654)

No

No

No

Sí

Sí

Sí

PDFAcercar (Página 1655)

No

No

No

Sí

Sí

Sí

PDFAlejar (Página 1655)

No

No

No

Sí

Sí

Sí

PDFDesplazarseIzquierda (Pá‐
gina 1656)

No

No

No

Sí

Sí

Sí

PDFDesplazarseDerecha (Pági‐ No
na 1656)

No

No

Sí

Sí

Sí

PDFZoomOriginal (Página 1656) No

No

No

Sí

Sí

Sí

VisorCódigoPLCDetalles (Pági‐
na 1660)

Sí

Sí

No

Sí

Sí

1544

Sí

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Mobile
Panel
177 DP

Mobile
Panel
177 PN

Mobile Panel
277
Mobile Panel
277 IWLAN
Mobile Panel
277 F IWLAN

KTP400F KTP700 Mobile /
Mobile
KTP700F Mobile

KTP900 Mo‐
bile /
KTP900F Mo‐
bile

Sí

Sí

Sí

No

Sí

Sí

VisorCódigoPLCMostrarModoE‐ Sí
tapa (Página 1661)

Sí

Sí

No

Sí

Sí

VisorCódigoPLCSímbolos (Pági‐ Sí
na 1661)

Sí

Sí

No

Sí

Sí

VisorCódigoPLCTransiciónInter‐ Sí
lock (Página 1662)

Sí

Sí

No

Sí

Sí

VisorCódigoPLCAcercar (Pági‐
na 1663)

Sí

Sí

Sí

No

Sí

Sí

VisorCódigoPLCAlejar (Pági‐
na 1663)

Sí

Sí

Sí

No

Sí

Sí

VisorCódigoPLCAnteriorSeg‐
mento (Página 1664)

Sí

Sí

Sí

No

Sí

Sí

VisorDeRecetasRegistroNuevo
(Página 1693)

Sí

Sí

Sí

Sí

Sí

Sí

VisorDeRecetasLeerRegistro‐
DelControlador (Página 1693)

Sí

Sí

Sí

Sí

Sí

Sí

VisorDeRecetasBorrarRegistro
(Página 1694)

Sí

Sí

Sí

Sí

Sí

Sí

VisorDeRecetasMenú (Pági‐
na 1694)

Sí

Sí

Sí

Sí

Sí

Sí

VisorDeRecetasAbrir (Pági‐
na 1695)

Sí

Sí

Sí

Sí

Sí

Sí

VisorDeRecetasEscribirRegis‐
troEnControlador (Página 1696)

Sí

Sí

Sí

Sí

Sí

Sí

VisorDeRecetasGuardarRegis‐
tro (Página 1696)

Sí

Sí

Sí

Sí

Sí

Sí

VisorDeRecetasGuardarRegis‐
troComo (Página 1696)

Sí

Sí

Sí

Sí

Sí

Sí

VisorDeRecetasSincronizarRe‐
gistroConVariables (Pági‐
na 1697)

Sí

Sí

Sí

Sí

Sí

Sí

VisorDeRecetasCambiarNom‐
breDeRegistro (Página 1697)

Sí

Sí

Sí

Sí

Sí

Sí

VisorDeRecetasMostrarTexto‐
DeAyuda (Página 1698)

Sí

Sí

Sí

Sí

Sí

Sí

VisorDeRecetasAtrás (Pági‐
na 1698)

Sí

Sí

Sí

Sí

Sí

Sí

DesactivarBit (Página 1611)

Sí

Sí

Sí

Sí

Sí

Sí

DesactivarBitEnVariable (Pági‐
na 1613)

Sí

Sí

Sí

Sí

Sí

Sí

BotónPulsar (Página 1571)

Sí

Sí

Sí

Sí

Sí

Sí

VisorCódigoPLCSiguienteSeg‐
mento (Página 1660)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1545

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Mobile
Panel
177 DP

Mobile
Panel
177 PN

Mobile Panel
277
Mobile Panel
277 IWLAN
Mobile Panel
277 F IWLAN

KTP400F KTP700 Mobile /
Mobile
KTP700F Mobile

KTP900 Mo‐
bile /
KTP900F Mo‐
bile

BotónSoltar (Página 1572)

Sí

Sí

Sí

Sí

Sí

Sí

DesplazarYEnmascarar (Pági‐
na 1615)

Sí

Sí

Sí

Sí

Sí

Sí

CerrarTodosLosFicheros (Pági‐
na 1594)

No

No

Sí

Sí

Sí

Sí

EscribirRegistroEnControlador
(Página 1699)

Sí

Sí

Sí

Sí

Sí

Sí

EscribirVariableDeRegistroEn‐
Controlador (Página 1700)

Sí

Sí

Sí

Sí

Sí

Sí

AvanzarPágina (Página 1710)

Sí

Sí

Sí

Sí

Sí

Sí

RetrocederPágina (Pági‐
na 1710)

Sí

Sí

Sí

Sí

Sí

Sí

EnviarCorreoElectronico (Pági‐
na 1569)

No

Sí

Sí

Sí

Sí

Sí

ConfigurarSeñalAcústica (Pági‐
na 1637)

No

No

No

Sí

Sí

Sí

ConfigurarModoDeVisualización No
(Página 1625)

No

No

No

No

No

EstablecerModoDeOperación‐
Panel (Página 1626)

Sí

Sí

Sí

Sí

Sí

Sí

ActivarBit (Página 1617)

Sí

Sí

Sí

Sí

Sí

Sí

ActivarBitDeVariable (Pági‐
na 1619)

Sí

Sí

Sí

Sí

Sí

Sí

ActivarBitMientrasTeclaPulsada
(Página 1621)

Sí

Sí

Sí

Sí

Sí

Sí

EstablecerColorRetroilumina‐
ción (Página 1639)

No

No

No

No

No

No

EstablecerBrillo (Página 1638)

No

No

No

Sí

Sí

Sí

EstablecerModoTecladoDePan‐
talla (Página 1627)

No

No

No

Sí

Sí

Sí

ActivarModoDeInformeAviso
(Página 1623)

No

No

Sí

Sí

Sí

Sí

DefinirEstadoVariableDeReceta
(Página 1701)

Sí

Sí

Sí

Sí

Sí

Sí

AjustarHorarioVerano (Pági‐
na 1570)

No

No

Sí

Sí

Sí

Sí

EstablecerIdioma (Página 1629)

Sí

Sí

Sí

Sí

Sí

Sí

DefinirVariable (Página 1606)

Sí

Sí

Sí

Sí

Sí

Sí

EstablecerModoDeConexión
(Página 1630)

Sí

Sí

Sí

Sí

Sí

Sí

AccesoWebActivar (Pági‐
na 1631)

No

Sí

Sí

Sí

Sí

Sí

1546

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Mobile
Panel
177 DP

Mobile
Panel
177 PN

Mobile Panel
277
Mobile Panel
277 IWLAN
Mobile Panel
277 F IWLAN

KTP400F KTP700 Mobile /
Mobile
KTP700F Mobile

KTP900 Mo‐
bile /
KTP900F Mo‐
bile

CopiaSeguridadSistemaDeAr‐
chivosRAM (Página 1572)

No

No

Sí

Sí

Sí

Sí

SimularTeclaSistema (Pági‐
na 1573)

Sí

Sí

Sí

Sí

Sí

Sí

SimularVariable (Página 1574)

Sí

Sí

Sí

Sí

Sí

Sí

VisorSmartClientActualizar (Pá‐
gina 1665)

No

Sí

Sí

Sí

Sí

Sí

VisorSmartClientProtecciónCon‐ No
traEscrituraOff (Página 1665)

Sí

Sí

Sí

Sí

Sí

VisorSmartClientProtecciónCon‐ No
traEscrituraOn (Página 1666)

Sí

Sí

Sí

Sí

Sí

VisorSmartClientDesconectar
(Página 1666)

No

Sí

Sí

Sí

Sí

Sí

VisorSmartClientConectar (Pági‐ No
na 1667)

Sí

Sí

Sí

Sí

Sí

VisorSmartClientSalir (Pági‐
na 1667)

No

Sí

Sí

Sí

Sí

Sí

GuardarRegistro (Página 1702)

Sí

Sí

Sí

Sí

Sí

Sí

IniciarArchivación (Página 1595) No

No

Sí

Sí

Sí

Sí

IniciarFicheroSiguiente (Pági‐
na 1595)

No

No

Sí

Sí

Sí

Sí

IniciarPrograma (Página 1575)

No

No

Sí

Sí

Sí

Sí

EstadoForzarLeerValores (Pági‐ Sí
na 1577)

Sí

Sí

Sí

Sí

Sí

EstadoForzarEscribirValores
(Página 1577)

Sí

Sí

Sí

Sí

Sí

Sí

ControlarSmartServer (Pági‐
na 1578)

No

Sí

Sí

Sí

Sí

Sí

ControlarServidorWeb (Pági‐
na 1578)

No

Sí

Sí

Sí

Sí

Sí

PararArchivación (Página 1596)

No

No

Sí

Sí

Sí

Sí

PararRuntime (Página 1579)

Sí

Sí

Sí

Sí

Sí

Sí

ConsultarTexto (Página 1580)

Sí

Sí

Sí

Sí

Sí

Sí

VisorDiagnósticoSistemaActivar
(Página 1668)

No

No

No

Sí

Sí

Sí

DesconectarVariableDelVolante
(Página 1581)

Sí

Sí

Sí

No

No

No

ConectarVariableAlVolante (Pá‐
gina 1581)

Sí

Sí

Sí

No

No

No

IdentificarCambioDeUsuario
(Página 1601)

Sí

Sí

Sí

No

No

No

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1547

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Mobile
Panel
177 DP

Mobile
Panel
177 PN

Mobile Panel
277
Mobile Panel
277 IWLAN
Mobile Panel
277 F IWLAN

KTP400F KTP700 Mobile /
Mobile
KTP700F Mobile

KTP900 Mo‐
bile /
KTP900F Mo‐
bile

ReducirValorEnfocado (Pági‐
na 1582)

Sí

Sí

Sí

Sí

Sí

Sí

DecrementarVariable (Pági‐
na 1607)

Sí

Sí

Sí

Sí

Sí

Sí

CambiarConexión (Pági‐
na 1632)

Sí

Sí

Sí

Sí

Sí

Sí

CambiarConexiónEIP (Pági‐
na 1634)

Sí

Sí

Sí

Sí

Sí

Sí

MostrarDiálogoInicioSesión (Pá‐ Sí
gina 1602)

Sí

Sí

Sí

Sí

Sí

MostrarTextoDeAyuda (Pági‐
na 1582)

Sí

Sí

Sí

Sí

Sí

Sí

MostrarVentanaDeAvisos (Pági‐ Sí
na 1677)

Sí

Sí

Sí

Sí

Sí

MostrarImagenEmergente (Pági‐ No
na 1584)

No

No

Sí

Sí

Sí

MostrarImagenEmergenteTa‐
mañoModificable

No

No

No

Sí

Sí

Sí

MostrarImagenDeslizable (Pági‐ No
na 1588)

No

No

Sí

Sí

Sí

MostrarVersiónDeSoftware (Pá‐
gina 1583)

No

No

Sí

Sí

Sí

Sí

MostrarVentanaDeDiagnóstico‐
DelSistema (Página 1671)

No

No

No

Sí

Sí

Sí

MostrarAvisoDeSistema (Pági‐
na 1677)

Sí

Sí

Sí

Sí

Sí

Sí

1)
2)
3)

Solo para Mobile Panel 277, Mobile Panel 277 IWLAN
No disponible para paneles a partir de la versión V14.0
No para paneles de seguridad (F-Panels)

Consulte también
EscalaLineal (Página 1604)
DesconectarPROFIsafe (Página 1569)

1548

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Funciones de sistema para Runtime Advanced
Disponibilidad de las funciones de sistema
La tabla siguiente muestra las funciones de sistema disponibles en WinCC RT Advanced.
Sujeto a cambios técnicos.

Sinopsis
WinCC RT Advanced
Funciones definidas por el usuario

Sí

CerrarSesión (Página 1597)

Sí

ActivarImagen (Página 1555)

Sí

ActivarImagenConNúmero (Página 1556)

Sí

ActivarVisorCódigoPLC (Página 1657)

Sí

ActivarPantallaDeLimpieza (Página 1703)

Sí

ActivarImagenAnterior (Página 1557)

Sí

ActualizarVariable (Página 1558)

Sí

ModificarContraste (Página 1635)

No

IniciarSesión (Página 1598)

Sí

ArchivarArchivoDeInforme (Página 1589)

Sí

ArchivarVariable (Página 1590)

Sí

EditarAviso (Página 1672)

Sí

ObjetoDeImagenCursorAbajo (Página 1706)

Sí

ObjetoDeImagenCursorArriba (Página 1707)

Sí

ObjetoImagenCursorIzquierda (Página 1709)

Sí

ObjetoDeImagenCursorDerecha (Página 1708)

Sí

ObjetoDeImagenAvanzarPágina (Página 1708)

Sí

ObjetoDeImagenRetrocederPágina (Página 1709)

Sí

Codificar (Página 1558)

Sí

CodificarEx (Página 1559)

Sí

TeclaDirecta (Página 1560)

No

TeclaDirectaNumeroDeImagen (Página 1563)

No

ImprimirImagen (Página 1622)

Sí

ImprimirInforme (Página 1623)

Sí

RegistrarAcciónDeUsuario (Página 1563)

Sí

IncrementarValorEnfocado (Página 1565)

Sí

IncrementarVariable (Página 1602)

Sí

ExportarRegistros (Página 1678)

Sí

ExportarRegistrosConSumaDeVerificación (Página 1680)

No

ExportarImportarAdministraciónDeUsuarios (Página 1598)

Sí

IrAInicio (Página 1711)

Sí

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1549

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
WinCC RT Advanced
IrAFin (Página 1711)

Sí

RetirarHardwareConSeguridad (Página 1565)

No

NavegadorHTMLCancelar (Página 1640)

Sí

NavegadorHTMLDesplazarseAbajo (Página 1640)

Sí

NavegadorHTMLActualizar (Página 1641)

Sí

NavegadorHTMLDesplazarseArriba (Página 1641)

Sí

NavegadorHTMLAcercar (Página 1642)

Sí

NavegadorHTMLAlejar (Página 1642)

Sí

HTMLNavegadorALaIzquierda (Página 1642)

Sí

NavegadorHTMLALaDerecha (Página 1643)

Sí

NavegadorHTMLRetrocederPágina (Página 1644)

Sí

NavegadorHTMLAvanzarPágina (Página 1643)

Sí

NavegadorHTMLPáginaInicio (Página 1644)

Sí

NavegadorHTMLAdelante (Página 1645)

Sí

NavegadorHTMLAtrás (Página 1645)

Sí

ImportarRegistros (Página 1683)

Sí

ImportarRegistrosConSumaDeVerificación (Página 1684)

Sí

InvertirBit (Página 1608)

Sí

InvertirBitEnVariable (Página 1610)

Sí

InvertirEscalaLineal (Página 1603)

Sí

CalibrarPantallaTáctil (Página 1636)

No

CopiarFichero (Página 1591)

Sí

VisorDeCurvasAvanzarPágina (Página 1646)

Sí

VisorDeCurvasRetrocederPágina (Página 1646)

Sí

VisorDeCurvasAmpliar (Página 1647)

Sí

VisorDeCurvasComprimir (Página 1647)

Sí

VisorDeCurvasReglaIzquierda (Página 1648)

Sí

VisorDeCurvasReglaDerecha (Página 1648)

Sí

VisorDeCurvasActivarModoRegla (Página 1649)

Sí

VisorDeCurvasIniciarParar (Página 1650)

Sí

VisorDeCurvasIrAlPrincipio (Página 1650)

Sí

CargarRegistro (Página 1686)

Sí

LeerNombreDeUsuario (Página 1599)

Sí

LeerRegistroDelControlador (Página 1687)

Sí

LeerNombreDelRegistro (Página 1688)

Sí

LeerVariablesDeRegistroDelControlador (Página 1690)

Sí

LeerNúmeroDeGrupo (Página 1600)

Sí

LeerBrillo (Página 1639)
LeerContraseña (Página 1600)

No
No 1)

EscalaLineal (Página 1604)

Sí

BorrarFichero (Página 1592)

Sí

1550

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
WinCC RT Advanced
BorrarRegistro (Página 1691)

Sí

BorrarRegistroMemoria (Página 1692)

No

BorrarBúferDeAvisos (Página 1672)

Sí

BorrarBúferDeAvisosProtool (Página 1673)

Sí

VisorDeAvisosActualizar (Página 1674)

Sí

VisorDeAvisosLoopInAlarm (Página 1674)

Sí

VisorDeAvisosAcusarAviso (Página 1675)

Sí

VisorDeAvisosMostrarTextoAyuda (Página 1676)

Sí

AbrirTodosLosFicheros (Página 1593)

Sí

AbrirTecladoDePantalla (Página 1706)

Sí

AbrirDiálogoControlPanel (Página 1566)

No

AbrirVentanaDeSímboloDelSistema (Página 1567)

No

AbrirInternetExplorer (Página 1567)

No

AbrirPanelDeControl (Página 1568)

No

AbrirAdministradorDeTareas (Página 1705)

Sí

AcusarAviso (Página 1676)

Sí

PDFDesplazarseAbajo (Página 1651)

Sí

PDFDesplazarseArriba (Página 1651)

Sí

PDFAdaptarAncho (Página 1652)

Sí

PDFAdaptarAAltura (Página 1652)

Sí

PDFPrimeraPágina (Página 1652)

Sí

PDFÚltimaPágina (Página 1653)

Sí

PDFAvanzarPágina (Página 1653)

Sí

PDFIrAPágina (Página 1654)

Sí

PDFRetrocederPágina (Página 1654)

Sí

PDFAcercar (Página 1655)

Sí

PDFAlejar (Página 1655)

Sí

PDFDesplazarseIzquierda (Página 1656)

Sí

PDFDesplazarseDerecha (Página 1656)

Sí

PDFZoomOriginal (Página 1656)

Sí

VisorCódigoPLCDetalles (Página 1660)

Sí

VisorCódigoPLCSiguienteSegmento (Página 1660)

Sí

VisorCódigoPLCMostrarModoEtapa (Página 1661)

Sí

VisorCódigoPLCSímbolos (Página 1661)

Sí

VisorCódigoPLCTransiciónInterlock (Página 1662)

Sí

VisorCódigoPLCAcercar (Página 1663)

Sí

VisorCódigoPLCAlejar (Página 1663)

Sí

VisorCódigoPLCAnteriorSegmento (Página 1664)

Sí

VisorDeRecetasRegistroNuevo (Página 1693)

Sí

VisorDeRecetasLeerRegistroDelControlador (Página 1693)

Sí

VisorDeRecetasBorrarRegistro (Página 1694)

Sí

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1551

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
WinCC RT Advanced
VisorCódigoPLCSupervisiónOLlamadaFB (Página 1664)

Sí

VisorDeRecetasMenú (Página 1694)

Sí

VisorDeRecetasAbrir (Página 1695)

Sí

VisorDeRecetasEscribirRegistroEnControlador (Página 1696)

Sí

VisorDeRecetasGuardarRegistro (Página 1696)

Sí

VisorDeRecetasGuardarRegistroComo (Página 1696)

Sí

VisorDeRecetasSincronizarRegistroConVariables (Página 1697)

Sí

VisorDeRecetasCambiarNombreDeRegistro (Página 1697)

Sí

VisorDeRecetasMostrarTextoDeAyuda (Página 1698)

Sí

VisorDeRecetasAtrás (Página 1698)

Sí

DesactivarBit (Página 1611)

Sí

DesactivarBitEnVariable (Página 1613)

Sí

BotónPulsar (Página 1571)

Sí

BotónSoltar (Página 1572)

Sí

DesplazarYEnmascarar (Página 1615)

Sí

CerrarTodosLosFicheros (Página 1594)

Sí

EscribirRegistroEnControlador (Página 1699)

Sí

EscribirVariableDeRegistroEnControlador (Página 1700)

Sí

AvanzarPágina (Página 1710)

Sí

RetrocederPágina (Página 1710)

Sí

EnviarCorreoElectronico (Página 1569)

Sí

ConfigurarSeñalAcústica (Página 1637)

No

ConfigurarModoDeVisualización (Página 1625)

Sí

EstablecerModoDeOperaciónPanel (Página 1626)

Sí

ActivarBit (Página 1617)

Sí

ActivarBitDeVariable (Página 1619)

Sí

ActivarBitMientrasTeclaPulsada (Página 1621)

Sí

EstablecerColorRetroiluminación (Página 1639)

No

EstablecerBrillo (Página 1638)

No

EstablecerModoTecladoDePantalla (Página 1627)

Sí

ActivarModoDeInformeAviso (Página 1623)

Sí

DefinirEstadoVariableDeReceta (Página 1701)

Sí

AjustarHorarioVerano (Página 1570)

Sí

EstablecerIdioma (Página 1629)

Sí

DefinirVariable (Página 1606)

Sí

EstablecerModoDeConexión (Página 1630)

Sí

AccesoWebActivar (Página 1631)

Sí

CopiaSeguridadSistemaDeArchivosRAM (Página 1572)

No

SimularTeclaSistema (Página 1573)

Sí

SimularVariable (Página 1574)

Sí

VisorSmartClientActualizar (Página 1665)

Sí

1552

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
WinCC RT Advanced
VisorSmartClientProtecciónContraEscrituraOff (Página 1665)

Sí

VisorSmartClientProtecciónContraEscrituraOn (Página 1666)

Sí

VisorSmartClientDesconectar (Página 1666)

Sí

VisorSmartClientConectar (Página 1667)

Sí

VisorSmartClientSalir (Página 1667)

Sí

GuardarRegistro (Página 1702)

Sí

IniciarArchivación (Página 1595)

Sí

IniciarFicheroSiguiente (Página 1595)

Sí

IniciarPrograma (Página 1575)

Sí

EstadoForzarLeerValores (Página 1577)

Sí

EstadoForzarEscribirValores (Página 1577)

Sí

ControlarSmartServer (Página 1578)

Sí

ControlarServidorWeb (Página 1578)

Sí

PararArchivación (Página 1596)

Sí

PararRuntime (Página 1579)

Sí

VisorDiagnósticoSistemaActivar (Página 1668)

Sí

ConsultarTexto (Página 1580)

Sí

DesconectarVariableDelVolante (Página 1581)

No

ConectarVariableAlVolante (Página 1581)

No

IdentificarCambioDeUsuario (Página 1601)

Sí

ReducirValorEnfocado (Página 1582)

Sí

DecrementarVariable (Página 1607)

Sí

CambiarConexión (Página 1632)

Sí

CambiarConexiónEIP (Página 1634)

Sí

MostrarBloqueEnTIAPortal (Página 1712)

Sí

MostrarDiálogoInicioSesión (Página 1602)

Sí

MostrarTextoDeAyuda (Página 1582)

Sí

MostrarVentanaDeAvisos (Página 1677)

Sí

MostrarImagenEmergente (Página 1584)

Sí

MostrarImagenEmergenteTamañoModificable (Página 1585)

Sí

MostrarImagenDeslizable (Página 1588)

Sí

MostrarVersiónDeSoftware (Página 1583)

Sí

MostrarVentanaDeDiagnósticoDelSistema (Página 1671)

Sí

MostrarAvisoDeSistema (Página 1677)

Sí

1 No disponible para paneles a partir de la versión V14.0
)

Consulte también
DesconectarPROFIsafe (Página 1569)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1553

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Funciones de sistema para Runtime Professional
Disponibilidad de las funciones de sistema
La tabla siguiente muestra las funciones de sistema disponibles en WinCC Runtime
Professional.
Sujeto a cambios técnicos.

Vista general
WinCC RT Professional
Funciones definidas por el usuario

Sí

ActivarImagen (Página 1732)

Sí

ActivarImagenEnVentanaActual (Página 1733)

Sí

ActivarImagenEnVentana (Página 1734)

Sí

IncrementarVariable (Página 1718)

Sí

ExportarImportarAdministraciónDeUsuarios (Página 1716)

Sí

InvertirBit (Página 1747)

Sí

InvertirBitEnVariable (Página 1749)

Sí

InvertirEscalaLineal (Página 1719)

Sí

EscalaLineal (Página 1721)

Sí

DesactivarBit (Página 1750)

Sí

DesactivarBitEnVariable (Página 1752)

Sí

ActivarBit (Página 1754)

Sí

ActivarBitDeVariable (Página 1755)

Sí

DefinirPropiedadVentanaActual (Página 1746)

Sí

DefinirPropiedadVentanaActualVíaPropiedad (Página 1745)

Sí

DefinirPropiedadVentanaActualIndirectamenteVíaVariable (Pági‐
na 1746)

Sí

DefinirPropiedadVíaPropiedad (Página 1737)

Sí

DefinirPropiedadVíaConstante (Página 1739)

Sí

DefinirPropiedadVíaVariable (Página 1741)

Sí

DefinirPropiedadIndirectamenteVíaVariable (Página 1743)

Sí

DefinirVariable (Página 1722)

Sí

DefinirVariableVíaPropiedad (Página 1724)

Sí

DefinirVariableVíaVariableIndirecta (Página 1729)

Sí

DefinirVariableConAvisoDeOperador (Página 1730)

Sí

DefinirVariableIndirectamente (Página 1725)

Sí

DefinirVariableIndirectamenteVíaPropiedad (Página 1726)

Sí

DefinirVariableIndirectaVíaVariableIndirecta (Página 1727)

Sí

PararRuntime (Página 1714)

Sí

ReducirVariable (Página 1731)

Sí

MostrarDiálogoInicioSesión (Página 1717)

Sí

1554

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
WinCC RT Professional
MostrarVisorAvisosCódigoPLC (Página 1762)

Sí

MostrarBloqueEnTIAPortalDelAviso (Página 1760)

Sí

9.11.1.2

Funciones de sistema

Otras funciones
ActivarImagen
Descripción
Efectúa un cambio de imagen para visualizar la imagen indicada.
Para pasar de la imagen raíz al área permanente o viceversa, utilice la función del sistema
"ActivarImagenConNúmero".

Utilización en la lista de funciones
ActivarImagen (Nombre de imagen, Número del objeto)

Utilización en funciones definidas por el usuario
ActivateScreen Screen_name, Object_number
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del dispositivo".

Parámetros
Nombre de imagen
Nombre de la imagen a la que se cambia.
Número del objeto
Elemento de manejo que se resalta en la imagen indicada después del cambio de imagen. El
número del elemento de manejo se define mediante el orden de tabulación durante la
configuración.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1555

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Si indica "0":
● Si al ejecutarse la función de sistema está enfocada el área permanente, esta permanecerá
enfocada.
● En cambio, si está resaltada la imagen raíz, se destacará el primer elemento de manejo de
la imagen indicada.
Nota
Si la función de sistema "ActivarImagen" se asocia al evento "Margen alcanzado", sólo se
admite el valor 0 para el parámetro "Número del objeto". El objeto activo no se establece
conforme al número de objeto, sino según la coordenada X del objeto activo antes del
cambio de imagen.

Ejemplo
El siguiente código de programa activa la imagen "Screen_2" con la función ActivateScreen,
p. ej., al pulsar un botón.

Sub ActivateScreen_2()
'Userdefined code
'' i. e. when pressing a button
ActivateScreen "Screen_2",0

Consulte también
ActivarImagenConNúmero (Página 1556)

ActivarImagenConNúmero
Descripción
Dependiendo del valor de una variable, cambia a una imagen determinada.
La imagen se identifica por su número de imagen.

Utilización en la lista de funciones
ActivarImagenConNúmero (Número de imagen, Número del objeto)

Utilización en funciones definidas por el usuario
ActivateScreenByNumber Screen_number, Object_number
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

1556

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Número de imagen
Variable que contiene el número de imagen a la que se cambia.
Si desea conmutar entre la imagen raíz y el área permanente, y viceversa, introduzca "0" o "-1",
respectivamente.
0 = Cambia de la imagen raíz al área permanente.
-1 = Cambia del área permanente a la imagen raíz.
Número del objeto
Número del objeto de imagen que se resalta en la imagen indicada después del cambio de
imagen. El número del elemento de manejo se define mediante el orden de tabulación durante
la configuración.
Si indica "0":
● Si al ejecutarse la función de sistema está enfocada el área permanente, esta permanecerá
enfocada.
● En cambio, si está resaltada la imagen raíz, se destacará el primer elemento de manejo de
la imagen indicada.

Consulte también
ActivarImagen (Página 1555)

ActivarImagenAnterior
Descripción
Cambia a la imagen que estaba activada antes de cambiar a la imagen actual. El cambio de
imagen no se ejecuta si antes no había ninguna imagen activa.
Se guardan las últimas 10 imágenes activadas. Si cambia a una imagen que ya no está
guardada, aparecerá un aviso del sistema.
Nota
Si desea utilizar la función de sistema, la imagen a la que desea cambiar deberá estar
contenida en la estructura de navegación.

Utilización en la lista de funciones
ActivarImagenAnterior

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1557

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en funciones definidas por el usuario
ActivatePreviousScreen
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del dispositivo".

Parámetros
--

ActualizarVariable
Descripción
Lee del controlador el valor actual de la variable con la ID de actualización indicada.

Utilización en la lista de funciones
ActualizarVariable (ID de actualización)

Utilización en scripts de usuario
-

Parámetros
ID de actualización
ID de actualización asignada a la variable que se desea actualizar.

Consulte también
CerrarSesión (Página 1597)

Codificar
Descripción
Adapta el tipo de datos "String" de una variable para la transferencia al sistema de
automatización (AS). La variable del tipo de datos "String" de WinCC se convierte al tipo de
datos del AS "Array of Byte". El resultado se escribe en una variable.

Utilización en la lista de funciones
Codificar (Matriz de bytes, Cadena de caracteres, Codificar)

1558

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en funciones definidas por el usuario
Encode Byte_array, String, Encoding
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Matriz de bytes
Variable que contiene el valor convertido.
Nota
El tamaño de la matriz de bytes debe doblar la longitud de la cadena +2. Si la cadena tiene una
longitud de 120 caracteres, la matriz de bytes debe comprender 242 elementos.
Si el tamaño no es suficiente, se truncan algunos caracteres o no se convierten.
Cadena de caracteres
Variable del tipo de datos "String" que se debe convertir.
Codificar
0 (hmiEncodeUTF16LE) - String se codifica a UTF16LE (Unicode 16 Little Endian).

CodificarEx
Descripción
Adapta el tipo de datos "String" de una variable para la transferencia al sistema de
automatización (AS). La variable del tipo de datos "String" de WinCC se convierte al tipo de
datos del AS "Array of Byte". El resultado se escribe en una variable.
A diferencia de la función de sistema Codificar, es posible definir el parámetro Salto de línea.
El parámetro Salto de línea sirve para borrar los saltos de línea o reemplazarlos por caracteres
predefinidos.

Utilización en la lista de funciones
CodificarEx (Matriz de bytes, Cadena de caracteres, Codificación, Salto de línea)

Utilización en funciones definidas por el usuario
EncodeEx Byte_array, String, Encoding, Line_break
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1559

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Matriz de bytes
Variable que contiene el valor convertido.
Nota
El tamaño de la matriz de bytes debe doblar la longitud de la cadena +2. Si la cadena tiene una
longitud de 120 caracteres, la matriz de bytes debe comprender 242 elementos.
Si el tamaño no es suficiente, se truncan algunos caracteres o no se convierten.
Cadena de caracteres
Variable del tipo de datos "String" que se debe convertir.
Codificación
0 (hmiEncodeUTF16LE) - String se codifica a UTF16LE (Unicode 16 Little Endian).
Salto de línea
Todos los saltos de línea se borran o se reemplazan por caracteres predefinidos. El ajuste
estándar es que no se reemplacen los saltos de línea.
0 (reemplazar por "\r\n' (0x000D, 0x000A)) - los saltos de línea se reemplazan por "\r\n".
1 (reemplazar por "\n' (0x000A)) - los saltos de línea se reemplazan por "\n".
2 (no reemplazar) - los saltos de línea no se reemplazan.
3 (eliminar los saltos de línea) - los saltos de línea se borran.

TeclaDirecta
Descripción
Permite un manejo rápido de las teclas en la pantalla táctil de un panel de operador sin que se
produzcan retardos debidos a la comunicación.
Utilice esta función de sistema, p. ej., para activar bits del área de E/S de un sistema SIMATIC
S7 directamente desde el panel de operador.
Nota
Si utiliza WinCC integrado en SIMATIC STEP 7 y ha configurado un área DP en SIMATIC
STEP 7: Al accionar el botón en el que ha configurado la función de sistema, en el área ES de
la CPU se activa un bit. Al soltar el botón el bit se desactiva.

Indicaciones relativas a la configuración de la función de sistema
Si configura un botón con la función de sistema "TeclaDirecta", se reservará un área fija de la
pantalla táctil para el manejo de teclas directas.

1560

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Si bien los objetos de imagen que se encuentran en runtime sobre el botón al que se ha
asignado la función de sistema "TeclaDirecta" ocultan la visualización de dicho botón, no
impiden que se ejecute la función "TeclaDirecta".
Nota
Si se inicia una aplicación externa como, por ejemplo, Pocket Internet Explorer o bien Control
Panel, ésta aparece en primer plano y el runtime en segundo plano. El bit de la función
"TeclaDirectaNumeroDeImagen" ya no está activado y las teclas o botones con la función
configurada "TeclaDirecta" ya no activan el bit correspondiente en el controlador.
ADVERTENCIA
Si la función de sistema "TeclaDirecta" es activada accidentalmente, ello puede poner en
peligro a las personas o causar daños materiales en la máquina.
Tenga en cuenta lo siguiente para evitar estos peligros:
● Al configurar el sinóptico del proceso, ningún objeto de imagen deberá ocultar el botón al
que se ha asignado la función de sistema "TeclaDirecta".
● La dinamización de la posición o de la visualización (habilitación) de un objeto de imagen
en función de valores de proceso no debería ocultar en runtime el botón al que se ha
asignado la función de sistema "TeclaDirecta".
Nota
Tenga en cuenta esta indicación importante durante la configuración. Compruebe también
las configuraciones existentes y, en caso necesario, modifíquelas de inmediato conforme
a dicha indicación.
En los casos siguientes el que un botón esté oculto por la función de sistema "TeclaDirecta" no
causa el problema descrito arriba:
● Al manejar la ventana de avisos
● Al manejar el visor de recetas
● Al desactivar el protector de pantalla
● Al utilizar el teclado de la pantalla
● Al ejecutar la función de sistema "ActivarPantallaDeLimpieza"

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1561

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Comportamiento de las teclas directas DP en modo offline
Al ejecutar en el panel de operador la función de sistema "CambiarConexión" con el parámetro
"Offline", se desconecta la conexión con el controlador indicado.
Nota
Tenga en cuenta lo siguiente, tanto en SIMATIC STEP 7 como en WinCC:
En este caso, las teclas directas DP siguen activas. Si, estando en modo "Offline", pulsa un
botón al que se ha asignado la función de sistema "TeclaDirecta", o bien si pulsa la tecla directa
en el panel con teclado, el bit correspondiente se activa en el controlador.

Utilización en la lista de funciones
TeclaDirecta (Bit)

Utilización en scripts de usuario
-

Parámetros
Bit
Determina el bit que se debe activar. Dependiendo del panel de operador, el número de bit
puede estar comprendido entre 0 y 31, o bien entre 0 y 39.

Ejemplo de aplicación
Objetivo
Utilizando un botón, desea activar bits del área de E/S de un SIMATIC S7 directamente desde
el panel de operador.
Requisitos
WinCC está instalado e integrado en SIMATIC STEP 7.
Durante el funcionamiento, el panel de operador tiene que estar conectado a una SIMATIC S7
vía PROFIBUS DP.
Al generar el proyecto, WinCC flexible está instalado e integrado.
El área de bits para teclas directas deberá estar configurada en SIMATIC STEP 7. Para más
información acerca de la configuración, consulte el manual del usuario "Comunicación".
Indicaciones relativas a la configuración
Configure el botón que desea utilizar en calidad de tecla directa. Asígnele al botón la función
de sistema "TeclaDirecta". Introduzca como parámetro el número de bit que se activará al
pulsar la tecla.

1562

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Proceso en el panel de operador
El bit se activará cuando se pulse la tecla directa y se desactivará al soltarla, o bien al salir de
la imagen.

TeclaDirectaNumeroDeImagen
Descripción
Activa el bit dentro del área de bits indicada de una tecla directa y lo transfiere al controlador
S7 conectado con el panel de operador. Así se garantiza en todo momento una asignación
unívoca entre el bit de control y el número de imagen.
Si no se utiliza esta función de sistema, el controlador S7 deberá distinguir la función
correspondiente a través del número de imagen. Ello retarda la actualización del número de
imagen tras un cambio de imagen.
Nota
Si se inicia una aplicación externa como, por ejemplo, Pocket Internet Explorer o bien Control
Panel, ésta aparece en primer plano y el runtime en segundo plano. Aun así, el bit de la función
"TeclaDirectaNumeroDeImagen" queda activado y las teclas o botones con la función
configurada "TeclaDirecta" siguen activando el bit correspondiente en el controlador.

Utilización en la lista de funciones
TeclaDirectaNumeroDeImagen (Bit)

Utilización en scripts de usuario
-

Parámetros
Bit
Determina el bit que se debe activar. Dependiendo del panel de operador, el número de bit
puede estar comprendido entre 0 y 31, o bien entre 0 y 39.

RegistrarAcciónDeUsuario
Descripción
Esta función de sistema registra en el Audit Trail las acciones del usuario que no se registran
automáticamente en el Audit Trail. Además, con esta función se puede exigir que el usuario
acuse una acción, o bien que la confirme con su firma electrónica y que introduzca un

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1563

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
comentario al respecto. Para poder utilizar la función de sistema es imprescindible que se
active la configuración conforme a las GMP en "Configuración de runtime > GMP".
Si en una función utiliza la función de sistema "NotificarAcciónDeUsuario" y termina la entrada
con el botón "Cancelar" se puede llamar el depurador. Para controlar este comportamiento, se
puede utilizar en una función la instrucción "On Error Resume Next". Esta instrucción hace que
se ejecute la instrucción siguiente tras un error de runtime. Si utiliza la instrucción "On Error
Resume Next" se suprime también la salida de avisos de sistema.

Utilización en la lista de funciones
RegistrarAcciónDeUsuario (Tipo de confirmación, Comentario obligatorio, Categoría, Nombre
del objeto, Descripción)

Utilización en funciones definidas por el usuario
NotifyUserAction Confirmation_type, Mandatory_commenting, Category, Object_name,
Description
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Tipo de confirmación
Determina cómo debe confirmarse la acción
0 = (None): no se requiere confirmación; se crea una entrada en el Audit Trail
1 = (Acknowledgement): acuse, el usuario tiene que reconocer la acción; se crea una entrada
en el Audit Trail
2 = (Digital Signature): firma electrónica, aparece un cuadro de diálogo en el que el usuario
debe introducir su firma electrónica; se crea una entrada en el Audit Trail
Comentario obligatorio
Determina si el usuario debe introducir un comentario. El comentario se archiva en el Audit
Trail.
0 = (True): verdadero, aparece un cuadro de diálogo en el que el usuario debe introducir un
comentario
1 = (False): falso; no se requiere ningún comentario
Categoría
Categoría o nombre de clase del objeto modificado
Nombre del objeto
Nombre del objeto modificado
Descripción
Texto que describe la acción de usuario que se debe archivar.

1564

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

IncrementarValorEnfocado
Descripción
Suma el valor indicado al valor de la variable asignada al campo de entrada (campo de
selección simbólico, campo de selección gráfico, deslizador) resaltado actualmente.
Esta función de sistema sólo se puede utilizar en teclas de función.

Utilización en la lista de funciones
IncrementarValorEnfocado (Valor)

Utilización en scripts de usuario
-

Parámetros
Valor
Valor a sumar al valor de la variable.

RetirarHardwareConSeguridad
Descripción
Comprueba si se llevan a cabo accesos de escritura o lectura al medio de almacenamiento
externo. Si no se realizan accesos, el medio de almacenamiento externo puede retirarse sin
perder datos.

Utilización en la lista de funciones
RetirarHardwareConSeguridad(Ruta, Resultado)

Utilización en funciones definidas por el usuario
SafelyRemoveHardware Path, Result
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Resultado
Variable en la que se registra el resultado.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1565

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
TRUE: El medio de almacenamiento puede retirarse con seguridad. Se visualiza un aviso de
sistema al efecto.
FALSE: El medio de almacenamiento no puede retirarse. Se visualiza un aviso de sistema al
efecto.
Ruta
Ruta del medio de almacenamiento, p. ej., \Storage Card USB\

AbrirDiálogoControlPanel
Descripción
Abre un cuadro de diálogo en el que se pueden modificar ajustes seleccionados del Panel de
control.
Con esta función de sistema se ajusta en el panel de operador, entre otras cosas, lo siguiente:
● Propiedades y valor de la dirección IP
● Identificación del usuario en la red
● WinCC Internet Settings
Nota
Seguridad en el proyecto
Con la función de sistema "AbrirDiálogoControlPanel" se omite el SecureMode en el panel de
operador. Tome las medidas preventivas necesarias para garantizar la seguridad de su
proyecto.

Utilización en la lista de funciones
AbrirDiálogoControlPanel (cuadro de diálogo)

Utilización en funciones definidas por el usuario
-

Parámetros
Cuadro de diálogo
Define el diálogo que se abre en el Panel de control.
● PROFINET_X1: ajuste de la dirección IP y de los parámetros de Ethernet.
● PROFINET_X3: ajuste de la dirección IP y de los parámetros de Ethernet, solo con Comfort
Panel KP 1500, TP 1500, TP1900, TP2200.

1566

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
● WinCC Internet Settings: ajuste de servidor web, notificación por correo electrónico, si el
panel de operador soporta esta función.
● ID de red: ajuste para la identificación en la red, si el panel de operador soporta estas
funciones.

AbrirVentanaDeSímboloDelSistema
Descripción
Abre una ventana de comando de Windows.
Utilice esta función de sistema si, p. ej., desea copiar archivos o llamar otra aplicación.

Utilización en la lista de funciones
AbrirVentanaDeSímboloDelSistema

Utilización en scripts de usuario
OpenCommandPrompt
Utilizable, siempre que el dispositivo configurado soporte scripts de usuario. Encontrará más
información al respecto en "Dependencia del dispositivo".

Parámetros
--

AbrirInternetExplorer
Descripción
Abre Internet Explorer en el panel de operador.
Si Internet Explorer ya está abierto, al llamar esta función de sistema se cerrará y volverá a
abrirse.
Nota
Internet Explorer guarda datos temporalmente en el sistema de archivos DRAM del panel de
operador (p.ej. las últimas páginas web llamadas).
Es posible guardar dichos datos con la función de sistema
"CopiaSeguridadSistemaDeArchivosRAM" para que sigan estando disponibles tras un reinicio
del panel de operador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1567

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en la lista de funciones
AbrirInternetExplorer (Página de inicio)

Utilización en funciones definidas por el usuario
OpenInternetExplorer Start_page
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Página inicial
Página que se abre cuando se llama Internet Explorer, p. ej. "www.siemens.com".

AbrirPanelDeControl
Descripción
Abre una ventana que muestra el panel de control de Windows CE. No es posible utilizar esta
función de sistema en un PC.
Con esta función de sistema se ajusta lo siguiente en un panel de operador basado en
Windows CE, entre otros:
● Seleccionar impresora
● Seleccionar propiedades de transferencia
● Configurar el protector de pantalla
● Configurar la memoria flash
Nota
Ninguna copia de seguridad o restauración durante el runtime en curso
Sólo se deben ejecutar funciones de copia de seguridad y restauración una vez finalizado
el runtime. De lo contrario se pueden producir efectos no deseados como, por ejemplo,
errores en la visualización.

Utilización en la lista de funciones
AbrirPanelDeControl

Utilización en scripts de usuario
OpenControlPanel
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del dispositivo".

1568

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
--

DesconectarPROFIsafe
Descripción
Deshace la conexión PROFIsafe para el modo de seguridad positiva entre un KTP Mobile
Panel y el controlador.
Tras ejecutar la función de sistema "DesconectarPROFIsafe", el conector del KTP Mobile
Panel puede desenchufarse del controlador sin que la instalación notifique un error.

Utilización en la lista de funciones
DesconectarPROFIsafe

Utilización en funciones definidas por el usuario
TerminatePROFIsafe
Puede utilizarse siempre que el dispositivo configurado soporte funciones definidas por el
usuario. Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
--

Consulte también
Funciones de sistema para Mobile Panels (Página 1540)
Dependencia del panel de operador (Página 1520)

EnviarCorreoElectronico
Descripción
Envía un correo electrónico desde el panel de operador al destinatario indicado.
Utilice esta función de sistema si p.ej. en caso de mantenimiento o reparación desea transferir
el aviso directamente a los técnicos responsables.
Nota
Para enviar los avisos adicionalmente en forma de correo electrónico, el sistema HMI debe
disponer de un cliente de correo electrónico.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1569

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en la lista de funciones
EnviarCorreoElectronico (Dirección, Asunto, Texto, Dirección de respuesta)

Utilización en funciones definidas por el usuario
SendEMail Address, Subject, Text, Return_address
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Dirección
Dirección de correo electrónico del destinatario.
Asunto
Línea de asunto del mensaje de correo electrónico.
Texto
Texto que se envía en el mensaje de correo electrónico.
Dirección de respuesta
Dirección de correo electrónico a la que el destinatario debe enviar la respuesta.

AjustarHorarioVerano
Descripción
La función de sistema "AjustarHorarioVerano" cambia la hora del panel de operador a horario
de verano o invierno.
El cambio de horario se efectúa inmediatamente después de ejecutar la función de sistema.
Nota
La función "AjustarHorarioVerano" no soporta zonas horarias sin horario de verano.
Nota
Windows 7
La función de sistema "AjustarHorarioVerano" no se soporta en paneles de operador basados
en PC con Windows 7.

Utilización en la lista de funciones
AjustarHorarioVerano(Horario de verano)

1570

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en funciones definidas por el usuario
SetDaylightSavingTime Daylight_saving_time
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Horario de verano
Determina si se activa el horario de verano en el panel de operador:
0 = Horario de verano no activado
1 = Horario de verano activado

BotónPulsar
Descripción
La función de sistema se configura con las teclas de función de un panel de operador. La
función de sistema "BotónPulsar" dispara la función asignada al evento "Pulsar Tecla" en el
objeto de imagen indicado.
Utilice esta función de sistema por ejemplo si desea activar un botón de la imagen desde una
tecla de función del panel de operador.
Nota
Configure las funciones de sistema "BotónPulsar" y "BotónSoltar" siempre conjuntamente. Por
tanto, si se asocia la función de sistema "BotónPulsar" al evento "Pulsar tecla" de una tecla de
función, debe asociarse la función de sistema "BotónSoltar" al evento "Soltar" de la misma
tecla de función.

Utilización en la lista de funciones
BotónPulsar (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del objeto de imagen en el que se lanza el evento.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1571

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

BotónSoltar
Descripción
La función de sistema sólo se puede asociar a las teclas de función de un panel de operador
y lanza el evento "Soltar tecla" en el objeto de imagen indicado.
Utilice esta función de sistema por ejemplo si desea activar un botón de la imagen desde una
tecla de función del panel de operador.
Nota
Configure las funciones de sistema "BotónPulsar" y "BotónSoltar" siempre conjuntamente. Por
tanto, si se asocia la función de sistema "BotónPulsar" al evento "Pulsar tecla" de una tecla de
función, debe asociarse la función de sistema "BotónSoltar" al evento "Soltar tecla" de la
misma tecla de función.

Utilización en la lista de funciones
BotónSoltar (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del objeto de imagen en el que se lanza el evento.

CopiaSeguridadSistemaDeArchivosRAM
Descripción
Guarda el sistema de archivos RAM en el soporte de memoria del panel de operador.
Tras reiniciar el panel de operador volverán a cargarse automáticamente los datos en el
sistema de archivos RAM.
Las aplicaciones como el Internet Explorer guardan datos temporalmente en el sistema de
archivos DRAM del panel de operador (p.ej. las últimas páginas web llamadas).

Utilización en la lista de funciones
CopiaSeguridadSistemaDeArchivosRAM

1572

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en funciones definidas por el usuario
BackupRAMFileSystem
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del dispositivo".

Parámetros
--

SimularTeclaSistema
Descripción
Simula el comportamiento de una tecla del sistema. Utilice esta función de sistema si el panel
de operador no dispone de una tecla de sistema, p. ej. la tecla "ACK", la tecla ENTER o el
bloque numérico.

Utilización en la lista de funciones
SimularTeclaSistema(Tecla del sistema)

Utilización en scripts de usuario
-

Parámetros
Tecla del sistema
Tecla del sistema cuyo comportamiento debe ser simulado.

Tecla del sistema "+/-"
En la función de sistema SimularTeclaSistema, la tecla de sistema "+/-" solo es soportada por
los paneles de operador siguientes:
● KP300 Basic
● KP400 Basic
● KTP400 Basic mono PN
● KTP400 Basic color PN
● KTP400 Basic color PN Portrait
● KTP600 Basic mono PN
● KTP600 Basic color PN
● KTP600 Basic color DP

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1573

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
● KTP700 Basic PN/DP
● KTP900 Basic PN
● KTP1000 Basic PN
● KTP1000 Basic DP
● KTP1200 Basic PN/DP
● Comfort Panels
En el resto de paneles de operador, utilice las teclas de sistema "+" y "-" por separado.

SimularVariable
Descripción
Simula el comportamiento de variables y objetos dinámicos (p.ej. listas de texto), sin que el
panel de operador esté conectado al controlador. Por ejemplo, puede configurar la función de
sistema y el evento "Creada" de una imagen.
Utilice esta función de sistema p. ej. para presentar la funcionalidad de un proyecto.
Para la simulación sólo se pueden utilizar variables del tipo de datos Integer.
Nota
Si se utiliza la función de sistema "SimularVariable" en combinación con un tiempo de ciclo
corto en un Basic Panel, el panel de operador se puede sobrecargar.

Utilización en la lista de funciones
SimularVariable (Variable, Ciclo, Valor máximo, Valor mínimo, Valor)

Utilización en funciones definidas por el usuario
-

Parámetros
Variable
Variable cuyo valor se debe modificar.
Ciclo
Factor con el que se multiplica el ciclo básico de 200 milisegundos. El ciclo determina cuándo
debe cambiar el valor de la variable por el valor indicado. El ciclo puede estar comprendido
entre 1 y 32767.

1574

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Valor máximo
Valor máximo que puede adoptar el valor de la variable durante la simulación. El valor máximo
debe ser mayor que el valor mínimo, pero menor o igual a 32767.
Valor mínimo
Valor mínimo que puede adoptar el valor de la variable durante la simulación. El valor mínimo
debe ser menor que el valor máximo, pero mayor o igual a -32768.
Valor
Valor por el que se cambia el valor de la variable en cada ciclo. El valor puede estar
comprendido entre -32768 y 32767.
● Un valor positivo incrementa el valor de la variable. Al alcanzarse el valor máximo, el valor
de la variable se ajusta al valor mínimo tras concluir el siguiente ciclo de actualización.
● Un valor negativo reduce el valor de la variable. Al alcanzarse el valor mínimo, el valor de
la variable se ajusta al valor máximo tras concluir el siguiente ciclo de actualización.

IniciarPrograma
Descripción
Inicia el programa indicado en el panel de operador.
El software runtime se sigue ejecutando en segundo plano. Los avisos se siguen visualizando
y los valores de proceso se siguen actualizando.
Si finaliza la aplicación indicada, en el panel de operador se visualizará la imagen que estaba
activada al ejecutar la función de sistema.
Utilice esta función de sistema por ejemplo para editar registros de receta en el panel de
operador en MS Excel.
Nota
Si Windows CE está instalado en el panel de operador, compruebe durante la configuración si
la aplicación deseada se puede iniciar con esta función de sistema.
Utilizando esta función de sistema podrá iniciar todas las aplicaciones que se pueden iniciar en
el cuadro de diálogo "Ejecutar" de Windows CE.
La aplicación que desea abrir debe estar instalada en el panel de operador.
Nota
Si una aplicación no se puede ejecutar en un Mobile Panel o Comfort Panel con la función de
sistema "IniciarPrograma", compruebe la ruta indicada en la función de sistema. Los Mobile
Panels y los Comfort Panels incluyen algunas aplicaciones en la carpeta "\flash\addons".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1575

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en la lista de funciones
IniciarPrograma (Nombre del programa, Parámetros del programa, Representación, Esperar
fin de programa)

Utilización en funciones definidas por el usuario
StartProgram Program_name, Program_parameters, Display_mode,
Wait_for_program_to_end
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Nombre del programa
Nombre y ruta del programa a iniciar. En este parámetro se distingue entre mayúsculas y
minúsculas.
Nota
Si la ruta contiene un espacio en blanco, el programa sólo se iniciará correctamente si la ruta
se indica entre comillas, p. ej. "C:\Program Files\START\start.exe".
Parámetros del programa
Parámetros a transferir al iniciar el programa, p.ej. un archivo que se deba abrir tras el inicio del
programa.
Los parámetros necesarios se describen en la documentación del programa a iniciar.
Representación
Determina cómo se debe visualizar la ventana del programa en el panel de operador:
0 (hmiShowNormal) = Normal
1 (hmiShowMinimized) = Minimizada
2 (hmiShowMaximized) = Maximizada
3 (hmiShowMinimizedAndInactive) = Minimizada e inactiva
Esperar fin de programa
Determina si se debe regresar al proyecto al finalizar el programa:
0 (hmiNo) = No: No regresar al proyecto.
1 (hmiYes) = Sí: Regresar al proyecto.
Nota
El parámetro "Esperar fin de programa" sólo está disponible en Runtime Advanced y Panels.

1576

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

EstadoForzarLeerValores
Descripción
Inicia o detiene la actualización de los valores en la tabla de observación. Los valores se leen
del autómata conectado con el panel de operador hasta que se detiene la actualización.
Nota
Durante la actualización de los valores no es posible efectuar entradas en los campos de
entrada de la tabla de observación.

Utilización en la lista de funciones
EstadoForzarLeerValores (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre de la tabla de observación en la que se escriben los datos del controlador.

Consulte también
Tabla de observación (Página 352)

EstadoForzarEscribirValores
Descripción
Escribe los valores de la tabla de observación en el controlador conectado con el panel de
operador.

Utilización en la lista de funciones
EstadoForzarEscribirValores (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1577

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Objeto de imagen
Nombre de la tabla de observación desde la que se escriben los datos en el controlador.

Consulte también
Tabla de observación (Página 352)

ControlarSmartServer
Descripción
Inicia o detiene el Sm@rtServer.

Utilización en la lista de funciones
ControlarSmartServer (Modo)

Utilización en funciones definidas por el usuario
ControlSmartServer Mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Modo
Determina si el Sm@rtServer se debe iniciar o detener.
-1 (hmiToggle) = Conmutar: Conmuta entre ambos estados.
0 (hmiStop) = Detener: Detener el Sm@rtServer
1 (hmiStart) = Iniciar: Iniciar el Sm@rtServer

ControlarServidorWeb
Descripción
Inicia o detiene el servidor web.

Utilización en la lista de funciones
ControlarServidorWeb (Modo)

1578

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en funciones definidas por el usuario
ControlWebServer Mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Modo
Determina si el servidor web se debe iniciar o detener.
-1 (hmiToggle) = Conmutar: Conmuta entre ambos estados.
0 (hmiStop) = Detener: El servidor web se detiene
1 (hmiStart) = Iniciar: El servidor web se inicia

PararRuntime
Descripción
Sale del software runtime y, con ello, del proyecto que se está ejecutando en el panel de
operador.

Utilización en la lista de funciones
PararRuntime (Modo)

Utilización en funciones definidas por el usuario
StopRuntime Mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Modo
Determina si al finalizar el software runtime también se debe cerrar el sistema operativo.
0 (hmiStopRuntime) = Runtime: No cerrar el sistema operativo
1 (hmiStopRuntimeAndOperatingSystem) = Runtime y sistema operativo: Cerrar el sistema
operativo (no en Windows CE)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1579

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente código de programa cierra Runtime y el sistema operativo.

{
//Stop runtime and shutdown
StopRuntime (hmiStopRuntimeAndOperationSystem);
}

El valor de retorno guardado puede procesarse en el código subsiguiente.

ConsultarTexto
Descripción
Lee el registro de una lista de textos. El resultado depende del valor y del idioma de runtime
seleccionado. El resultado se guarda en una variable del tipo "String".

Utilización en la lista de funciones
Consultar texto (Texto de salida, Índice, Idioma, Lista de textos)

Utilización en funciones definidas por el usuario
LookupText Output_text, Index, Language, Text_list
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Texto de salida
Variable en la que se escribe el resultado.
Índice
Variable que determina el valor del registro de la lista.

1580

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Idioma
Determina en qué idioma de runtime se debe leer el registro de la lista.
● Idioma de runtime
Abreviatura de idioma conforme a la referencia VBScript, p. ej. "de-DE" para alemán
(Alemania) o "en-ES" para inglés (EE UU). La selección depende de los idiomas runtime
activados.
● Variable
Variable que contiene el idioma. El idioma de runtime se introduce en forma de valor
decimal del indicador de país, p. ej. 1031 para alemán estándar, 1033 para inglés de
EE UU. Encontrará más información al respecto en los conceptos básicos de VBScript bajo
el tema "Cuadro de ID de configuración regional (LCID)".
● Número entero
El número que corresponde al orden de los idiomas de runtime en el cambio de idioma.
La selección depende de los idiomas de runtime activados, p. ej., "0" para el idioma que
aparece al iniciar runtime por primera vez. Encontrará más información al respecto en el
apartado "Idiomas en runtime".
Lista de textos
Establece la lista de textos. El registro se lee de la lista de textos.

DesconectarVariableDelVolante
Descripción
Desconecta la variable conectada al elemento de mando "Volante" y vuelve a conectar el
volante con la variable global.

Utilización en la lista de funciones
DesconectarVariableDelVolante

Utilización en scripts de usuario
-

Parámetros
--

ConectarVariableAlVolante
Descripción
Asigna la variable al elemento de manejo "Volante". Al accionarse el volante cambia el valor de
dicha variable. La conexión se puede deshacer de nuevo utilizando la función de sistema
"DesconectarVariableAlVolante".
Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1581

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en la lista de funciones
ConectarVariableAlVolante (Valor)

Utilización en scripts de usuario
-

Parámetros
Valor
Nombre de la variable conectada al elemento de manejo "Volante".

ReducirValorEnfocado
Descripción
Resta el valor indicado del valor de la variable vinculada al objeto de imagen enfocado
actualmente.
Esta función de sistema sólo se puede utilizar en teclas de función.

Utilización en la lista de funciones
ReducirValorEnfocado (Valor)

Utilización en scripts de usuario
-

Parámetros
Valor
Valor que se va a restar del valor de la variable.

MostrarTextoDeAyuda
Utilización
Muestra el tooltip configurado para el objeto seleccionado.
Si la función de sistema se ha asociado a una tecla de función, se mostrará el tooltip
correspondiente al objeto de imagen resaltado en ese momento. Si al mismo tiempo se ha
configurado un tooltip para la imagen, será posible conmutar a ésta bien sea pulsando la tecla
<Intro> o bien haciendo doble clic en la ventana de ayuda.

1582

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Si la función de sistema se ha asociado a un botón, se mostrará sólo el tooltip de la imagen
actual. Si se ha configurado también un tooltip asociado al botón, se mostrará primero dicho
texto. Pulsando la tecla <Intro> o haciendo doble clic en la ventana de ayuda se conmuta al
tooltip de la imagen actual.
Nota
Mientras esté abierta la ventana de ayuda, no se podrá operar ningún otro objeto de imagen.
Para operar los objetos de imagen, cierre la ventana de ayuda.

Cerrar la ventana de ayuda
La ventana de ayuda se puede cerrar de las maneras siguientes:
En paneles de operador con teclado:
● Pulsando de nuevo la tecla <HELP>
● Pulsando la tecla <HELP>
En paneles de operador con pantalla táctil:
● Tocando el botón

Utilización en la lista de funciones
MostrarTextoDeAyuda (Representación)

Utilización en funciones definidas por el usuario
ShowOperatorNotes Display_mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Representación
Determina si el tooltip configurado se debe mostrar u ocultar:
0 (hmiOff) = Off: ocultar el tooltip configurado
1 (hmiOn) = On: mostrar el tooltip configurado
-1 (hmiToggle) = Conmutar: Conmuta entre ambos estados.

MostrarVersiónDeSoftware
Descripción
Muestra u oculta el número de versión del software runtime.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1583

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Utilice esta función de sistema por ejemplo si en caso de reparación o mantenimiento necesita
saber la versión del software runtime utilizado.

Utilización en la lista de funciones
MostrarVersiónDeSoftware (Representación)

Utilización en funciones definidas por el usuario
ShowSoftwareVersion Display_mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Representación
Determina si el número de versión se debe mostrar u ocultar:
0 (hmiOff) = Off: Ocultar el número de versión
1 (hmiOn) = On: Mostrar el número de versión
-1 (hmiToggle) = Conmutar: Conmuta entre ambos estados.

MostrarImagenEmergente
Descripción
Llama la imagen emergente, p. ej. al pulsar un botón.
Como coordenadas puede indicar un valor constante o asignar una variable.
Si la imagen emergente configurada no es visible o solo lo es parcialmente, las coordenadas
se ajustan a 0.0.
Sea cual sea el tamaño del área permanente, la posición inicial de las coordenadas es siempre
0.0.

Utilización en la lista de funciones
MostrarImagenEmergente (nombre de la imagen, coordenada X, coordenada Y, modo de
visualización, animación, velocidad de la animación)

Utilización en funciones definidas por el usuario
ShowPopupScreen Screen_name, X_coordinate, Y_coordinate, Display_mode, Animation,
Animation_speed

1584

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Nombre de la imagen
Define el nombre de la imagen emergente que aparece en runtime al pulsar el botón.
Coordenada X
Posición de la imagen emergente en el eje X de la imagen actual
Coordenada Y
Posición de la imagen emergente en el eje Y de la imagen actual
Modo de visualización
Define el modo de la imagen emergente:
Conmutar
Off
On
Animación
Determina la dirección en la que aparece la imagen emergente:
Off
Izquierda
Arriba
Derecha
Abajo
Velocidad de la animación
Determina la velocidad con que aparece la imagen emergente:
Lenta
Media
Rápida

MostrarImagenEmergenteTamañoModificable
Descripción
Llama la imagen emergente con un tamaño definido. Con esta función de sistema se puede
abrir una imagen emergente en otro tamaño, y para navegar por el contenido de la imagen
emergente se muestran las barras de desplazamiento.
Como coordenadas puede indicar un valor constante o asignar una variable. Si la imagen
emergente configurada no es visible o solo lo es parcialmente, las coordenadas se ajustan a
0.0. Sea cual sea el tamaño del área permanente, la posición inicial de las coordenadas es
siempre 0.0.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1585

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Además, se definen la anchura y la altura visualizadas de la imagen emergente, que pueden
no coincidir con los tamaños de la imagen emergente configurada. En tal caso se visualizan las
barras de desplazamiento en la imagen emergente.
Nota
Manejo en paneles de operador con teclas
Para desplazarse por las imágenes emergentes, utilice la combinación de teclas <ALT>
+<tecla de flecha>.

Mostrar solo una barra de desplazamiento
Si en los parámetros de la función del sistema se indica únicamente un tamaño menor que el
tamaño de la imagen emergente configurada, se visualizan las dos barras de desplazamiento
en la imagen emergente. Existen dos posibilidades para configurar solo una barra de
desplazamiento en la imagen emergente:
● Reduzca la anchura/altura de la imagen emergente configurada en el equivalente al
tamaño de la barra de desplazamiento específica del dispositivo.
● Defina, para un parámetro de tamaño, el valor que coincida con el tamaño real de la imagen
emergente, y añádale el tamaño de la barra de desplazamiento específica del panel. Defina
el valor del otro tamaño según sus necesidades.
Ejemplo:
Desea llamar una imagen emergente con un tamaño configurado de 500 x 420 en el tamaño
500 x 300 con una barra de desplazamiento vertical. Asigne al parámetro Anchura el valor
534, que equivale a la anchura real de la imagen emergente configurada más el tamaño de
la barra de desplazamiento (34). Introduzca el valor 300 para la Altura. En runtime, la
imagen emergente se llamará en el tamaño 500 x 300 y solo se visualizará la barra de
desplazamiento vertical.
Tipo de panel (versión V14)

Anchura

Altura

Paneles de operador con un tamaño de pantalla de 4"
Comfort Panels con un tamaño de pantalla de 19''

25

25

27

27

34

34

Runtime Advanced
Paneles de operador con un tamaño de pantalla de 9"
Comfort Panels con un tamaño de pantalla de 15"
Comfort Panels con un tamaño de pantalla de 22"
Paneles de operador con un tamaño de pantalla de 7"
Paneles de operador con un tamaño de pantalla de 12"

Utilización en la lista de funciones
MostrarImagenEmergenteTamañoModificable (nombre de la imagen, coordenada X,
coordenada Y, ancho, altura, modo de visualización, animación, velocidad de la animación)

1586

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en funciones definidas por el usuario
ShowPopupScreenSizable Screen_name, X_coordinate, Y_coordinate, Width, Height,
Display_mode, Animation, Animation_speed

Parámetros
Nombre de la imagen
Define el nombre de la imagen emergente que aparece en runtime al pulsar el botón.
Coordenada X
Posición de la imagen emergente en el eje X de la imagen actual
Coordenada Y
Posición de la imagen emergente en el eje Y de la imagen actual
Anchura
Determina la anchura de la imagen emergente. La anchura máxima no debe exceder la
anchura de la pantalla del panel de operador configurado.
Altura
Determina la altura de la imagen emergente. La altura máxima no debe rebasar la altura de
imagen del panel de operador configurado.
Modo de visualización
Define el modo de la imagen emergente:
Conmutar
Off
On
Animación
Determina la dirección en la que aparece la imagen emergente:
Off
Izquierda
Arriba
Derecha
Abajo
Velocidad de la animación
Determina la velocidad con que aparece la imagen emergente:
Lenta
Media
Rápida

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1587

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Consulte también
Funciones de sistema para Runtime Advanced (Página 1549)

MostrarImagenDeslizable
Descripción
Llama la imagen deslizable, p. ej., al pulsar un botón.

Utilización en la lista de funciones
MostrarImagenDeslizable (nombre de imagen, modo)

Utilización en funciones definidas por el usuario
ShowSlideInScreen SlideInScreen_name, Mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Nombre de imagen
Define la imagen deslizable que aparece en runtime al pulsar el botón:
Imagen deslizable arriba
Imagen deslizable abajo
Imagen deslizable a la izquierda
Imagen deslizable a la derecha
Modo
Define el modo para la imagen deslizable:
Conmutar
Off
On

1588

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ficheros
ArchivarArchivoDeInforme
Descripción
Esta función de sistema desplaza o copia un fichero para archivarlo a largo plazo en una
ubicación diferente.
Antes de"ArchivarArchivoDeInforme" ejecute siempre la función de sistema
"CerrarTodosLosFicheros".
Tras concluir esta función de sistema, ejecute la función de sistema "AbrirTodosLosFicheros".
En el modo "Copiar fichero", los ficheros se vuelven a abrir sólo tras haberse copiado
correctamente el fichero, o bien si se excede el tiempo previsto para la operación de copia.
En el modo "Desplazar fichero" se cambia el nombre de los ficheros a desplazar y se abren de
inmediato los nuevos ficheros. Para desplazar los ficheros cuyo nombre ha cambiado, se lanza
una petición que intenta desplazarlos cada 300 segundos en caso de que el directorio de
destino no esté disponible. Dicha petición permanece activa hasta ser ejecutada, incluso
después de un rearranque completo del runtime. Por tanto, antes de desplazar un fichero,
deberá comprobar si el directorio de destino está disponible.
Utilice en el caso de los Audit Trails siempre el modo "Desplazar (hmiMove)", puesto que de
lo contrario se infringirá la directiva FDA debido a la doble gestión de datos.

Utilización en la lista de funciones
ArchivarArchivoDeInforme (Tipo de fichero, Fichero, Nombre del directorio, Modo)

Utilización en funciones definidas por el usuario
ArchiveLogFile Log_type, Log, Directory_name, Mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Tipo de fichero
Determina el tipo de fichero:
0 (hmiTagArchive) = Fichero de variables
1 (hmiAlarmArchive) = Fichero de avisos
2 (hmiAudittrailArchive)= Fichero Audit Trail disponible en proyectos conformes a GMP.
Encontrará más información en "Activar configuración conforme a GMP".
Fichero
Nombre del fichero a archivar.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1589

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Nombre del directorio
Ruta en la que se guarda el fichero.
Modo
0 (hmiCopy) = Copiar fichero
1 (hmiMove) = Desplazar fichero

Ejemplo de aplicación
Hay que desplazar un fichero del medio de almacenamiento local al servidor con el fin de crear
una copia de seguridad en intervalos regulares.
Indicaciones relativas a la configuración
En el planificador de tareas, cree una tarea que se ejecute cada día a una hora determinada.
Asocie la lista de funciones siguiente a la tarea:

Proceso en el panel de operador
● Todos los ficheros abiertos se cierran.
● El fichero indicado se desplaza al servidor.
● Todos los ficheros cerrados se abren de nuevo.

ArchivarVariable
Descripción
Guarda el valor de la variable indicada en el fichero de variables deseado.
Utilice esta función de sistema si desea archivar un valor de proceso en un momento
determinado.

1590

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en la lista de funciones
ArchivarVariable (Variable)

Utilización en scripts de usuario
-

Parámetros
Variable
Variable cuyo valor se desea archivar. La variable se deposita en el fichero configurado para
la variable indicada.

CopiarFichero
Descripción
Copia el contenido de un fichero en un fichero diferente. Los valores de variables sólo se
pueden copiar en otros ficheros de variables, en tanto que los avisos sólo se pueden copiar en
otros ficheros de avisos.
Nota
Al copiar un fichero con la función de sistema "CopiarFichero" puede suceder que las
aplicaciones de terceros no puedan leer los caracteres especiales contenidos en los textos de
los avisos archivados en la copia del fichero. WinCC Runtime no se ve afectado. WinCC
Runtime puede leer los ficheros copiados sin problema alguno.
Nota
Al copiar los ficheros circulares, se copia un 80% de las entradas del fichero. El 20% de las
entradas no se copia porque el espacio de memoria está reservado de forma estándar para el
desbordamiento del búfer.

Utilización en la lista de funciones
CopiarFichero (Tipo de fichero, Fichero de destino, Fichero de origen, Modo, Borrar fichero de
origen)

Utilización en funciones definidas por el usuario
CopyLog Log_type, Destination log, Source_log, Mode, Delete_source_log
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1591

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Tipo de fichero
Determina el tipo de fichero:
0 (hmiTagArchive) = Fichero de variables
1 (hmiAlarmArchive) = Fichero de avisos
Fichero de destino
Nombre del fichero al que se copian las entradas (fichero de destino).
Fichero de origen
Nombre del fichero desde el que se copian las entradas (fichero de origen).
Modo
Determina cómo se debe proceder con las entradas en el fichero de destino:
0 (hmiOverwrite) = Sobrescribir: Las entradas existentes se sobrescriben.
2 (hmiAppend) = Agregar: Las entradas se insertan al final del fichero de destino. Una vez
alcanzado el tamaño configurado del fichero de destino, éste se tratará como un fichero
circular.
Borrar fichero de origen
Determina si el fichero de origen se debe borrar tras finalizar la copia.
0 (hmiNo) = No: No borrar.
1 (hmiYes) = Sí: Borrar.

BorrarFichero
Descripción
Borra todos los registros del fichero indicado.

Utilización en la lista de funciones
BorrarFichero (Tipo de fichero, Fichero)

Utilización en funciones definidas por el usuario
ClearLog Log_type, Log
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

1592

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Tipo de fichero
Determina el tipo de fichero.
0 (hmiTagArchive) = Fichero de variables
1 (hmiAlarmArchive) = Fichero de avisos
2 (hmiAudittrailArchive) = Fichero Audit Trail. Disponible en proyectos conformes a GMP.
Encontrará más información en "Activar configuración conforme a GMP".
Fichero
Nombre del fichero del que se borrarán todas las entradas.

AbrirTodosLosFicheros
Descripción
Restablece la conexión entre WinCC y los ficheros. La archivación puede continuar.
Nota
Para reiniciar el proceso de archivar, ejecute la función de sistema "IniciarArchivación".

Utilización en la lista de funciones
AbrirTodosLosFicheros

Utilización en funciones definidas por el usuario
OpenAllLogs
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del dispositivo".

Parámetros
--

Ejemplo de aplicación
Desea cambiar en runtime el soporte de datos en el que se archivan los valores de proceso.
Indicaciones relativas a la configuración
Configure las funciones de sistema "PararArchivación" y "CerrarTodosLosFicheros" y
asócielas al botón "Close Archive".
Configure las funciones de sistema "AbrirTodosLosFicheros" e "IniciarArchivación" y asócielas
al botón "Open Archive".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1593

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Transfiera como parámetro el nombre del fichero que se debe parar o iniciar, respectivamente.
Proceso en el panel de operador
Cuando pulse el botón "Close Archive" se parará el fichero indicado y se cerrarán todos los
ficheros abiertos. A continuación podrá cambiar el soporte de datos. Con el botón "Open
Archive" se abren todos los ficheros. Se sigue archivando en el fichero indicado.

CerrarTodosLosFicheros
Descripción
Deshace la conexión entre WinCC y todos los ficheros.

Utilización en la lista de funciones
CerrarTodosLosFicheros

Utilización en funciones definidas por el usuario
CloseAllLogs
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del dispositivo".

Parámetros
--

Ejemplo de aplicación
Desea cambiar en runtime el soporte de datos en el que se archivan los valores de proceso.
Indicaciones relativas a la configuración
Asigne la función de sistema "CerrarTodosLosFicheros" al botón "Close Archive".
Configure las funciones de sistema "AbrirTodosLosFicheros" e "IniciarArchivación" y asócielas
al botón "Open Archive".
Transfiera como parámetro el nombre del fichero que se debe parar o iniciar, respectivamente.
Proceso en el panel de operador
Al pulsar el botón "Close Archive" se cerrarán los ficheros abiertos. A continuación podrá
cambiar el soporte de datos. Durante el cambio del soporte de datos se reanuda el archivado.
Se almacenan los valores de proceso que se archivarán. Con el botón "Open Archive" se abren
todos los ficheros. La archivación continúa en el fichero indicado. Los valores de proceso
almacenados se añaden al fichero.

1594

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

IniciarArchivación
Descripción
Inicia la archivación de valores de proceso o avisos en el fichero indicado. La función también
puede aplicarse a los Audit Trails.
La archivación se puede cancelar en runtime utilizando la función de sistema
"PararArchivación".

Utilización en la lista de funciones
IniciarArchivación (Tipo de fichero, Fichero)

Utilización en funciones definidas por el usuario
StartLogging Log_type, Log
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Tipo de fichero
Determina el tipo de fichero:
0 (hmiTagArchive) = Fichero de variables
1 (hmiAlarmArchive) = Fichero de avisos
2 (hmiAudittrailArchive) = Audit Trail
Fichero
Nombre del fichero a iniciar.

Consulte también
Determinar el comportamiento del fichero al iniciar runtime (Página 640)

IniciarFicheroSiguiente
Descripción
Detiene la archivación de valores de proceso o avisos en el fichero indicado.
La archivación continúa en el siguiente fichero del fichero circular segmentado para el que
haya configurado el fichero indicado.
Si no ha configurado ningún fichero circular segmentado para el fichero indicado, esta función
de sistema no tendrá ningún efecto.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1595

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en la lista de funciones
IniciarFicheroSiguiente (Tipo de fichero, Fichero)

Utilización en funciones definidas por el usuario
StartNextLog Log_type, Log
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Tipo de fichero
Determina el tipo de fichero:
0 (hmiTagArchive) = Fichero de variables
1 (hmiAlarmArchive) = Fichero de avisos
Fichero
Nombre del fichero para el que se ha detenido la archivación y que continuará en el fichero
siguiente.

PararArchivación
Descripción
Detiene la archivación de valores de proceso o avisos en el fichero indicado. La función
también puede aplicarse a los Audit Trails.
La archivación se puede reiniciar en runtime utilizando la función de sistema
"IniciarArchivación".
Nota
Cuando se detiene la archivación permanece establecida la conexión entre WinCC y los
archivos comprimidos o la base de datos de ficheros. Para deshacer esta conexión, utilice la
función de sistema "CerrarTodosLosFicheros".

Utilización en la lista de funciones
PararArchivar (Tipo de fichero, Fichero)

Utilización en funciones definidas por el usuario
StopLogging Log_type, Log
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

1596

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Tipo de fichero
Determina el tipo de fichero:
0 (hmiTagArchive) = Fichero de variables
1 (hmiAlarmArchive) = Fichero de avisos
2 (hmiAudittrailArchive) = Audit Trail
Fichero
Nombre del fichero a detener.

Ejemplo de aplicación
Desea cambiar en runtime el soporte de datos en el que se archivan los valores de proceso.
Indicaciones relativas a la configuración
Configure las funciones de sistema "PararArchivación" y "CerrarTodosLosFicheros" y
asócielas al botón "Close Archive".
Configure las funciones de sistema "AbrirTodosLosFicheros" e "IniciarArchivación" y asócielas
al botón "Open Archive".
Transfiera como parámetro el nombre del fichero que se debe parar o iniciar, respectivamente.
Proceso en el panel de operador
Cuando pulse el botón "Close Archive" se parará el fichero indicado y se cerrarán todos los
ficheros abiertos. A continuación podrá cambiar el soporte de datos. Si pulsa el botón "Open
Archive" se abrirán de nuevo todos los ficheros, pudiendo continuar con la archivación en el
fichero indicado.

Administración de usuarios
CerrarSesión
Descripción
Cierra la sesión del usuario actual en el panel de operador.

Utilización en la lista de funciones
CerrarSesión

Utilización en funciones definidas por el usuario
Logoff
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del dispositivo".
Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1597

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
--

IniciarSesión
Descripción
Inicia la sesión del usuario actual en el panel de operador.

Utilización en la lista de funciones
IniciarSesión (contraseña, nombre de usuario)

Utilización en funciones definidas por el usuario
Logon Password, User_name
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Contraseña
La variable de la cual se lee la contraseña del usuario que va a iniciar la sesión. Si el usuario
ha iniciado la sesión, se borra la contraseña de la variable.
Nombre de usuario
La variable de la cual se lee el Nombre de usuario que va a iniciar la sesión.

ExportarImportarAdministraciónDeUsuarios
Descripción
Exporta todos los usuarios de la administración de usuarios del proyecto activo en este
momento al archivo indicado, o bien importa los usuarios del archivo indicado al proyecto
activo en este momento.
En la administración de usuarios se guardan usuarios, sus contraseñas y permisos.
Durante la importación se sobrescriben todos los usuarios. Los usuarios importados son
válidos desde el primer momento.
Nota
En los paneles de operador con una versión de runtime anterior a V14 no se soporta la
exportación e importación de la administración de usuarios de V14.

1598

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en la lista de funciones
ExportarImportarAdministraciónDeUsuarios (Nombre de archivo, Dirección)

Utilización en funciones definidas por el usuario
ExportImportUserAdministration File_name, Direction
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Nombre de archivo
Nombre del archivo que contiene las contraseñas o en el que se guardarán las contraseñas.
Introduzca también la ruta y la extensión del archivo (*.txt), p. ej. "C:\TEMP\Passwords.txt".
Nota
Si utiliza una tarjeta de memoria como ubicación, introduzca la ubicación del siguiente modo:
"\StorageCard\<Nombre de archivo>".
Dirección
Determina si las contraseñas se exportarán o importarán:
0 (hmiExport) = Exportación: Las contraseñas se exportan.
1 (hmiImport) = Importación: Las contraseñas se importan.

Consulte también
Exportar la administración de usuarios (Página 1401)
Importar administración de usuarios (Página 1402)

LeerNombreDeUsuario
Descripción
Escribe el nombre del usuario conectado actualmente al panel de operador en la variable
indicada.
Si la variable indicada contiene una conexión con el controlador, el nombre del usuario también
estará disponible en el controlador. Con esta función de sistema se pueden p. ej. liberar
determinadas funciones para usuarios específicos.

Utilización en la lista de funciones
LeerNombreDeUsuario (Variable)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1599

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en funciones definidas por el usuario
GetUserName Tag
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Variable
Variable en la que se escribe el nombre del usuario.

LeerNúmeroDeGrupo
Descripción
Lee el número del grupo al que pertenece el usuario registrado en el panel de operador y lo
escribe en la variable indicada.

Utilización en la lista de funciones
LeerNúmeroDeGrupo (Variable)

Utilización en funciones definidas por el usuario
GetGroupNumber Tag
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Variable
Variable en la que se escribe el número del grupo.

LeerContraseña
Descripción
Lee la contraseña del usuario conectado al panel de operador y la escribe en la variable
indicada.
Nota
Asegúrese de que el valor de la variable indicada no aparece en ningún otro lugar del proyecto.

1600

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Nota
Las contraseñas de usuarios de SIMATIC Logon no se pueden leer.
Nota
La función de sistema "LeerContraseña" no está disponible para dispositivos con versión
14.0.0.0 o superior.
Si esta función de sistema se había utilizado en un proyecto con una versión anterior a V14, se
eliminará tras la migración a V14. Esto invalidará el evento asociado a la función de sistema.
En la configuración, la función de sistema "LeerContraseña" se muestra como errónea. Al
compilar se emitirá una advertencia. En el proyecto runtime compilado ya no está incluida la
función de sistema "LeerContraseña".

Utilización en la lista de funciones
LeerContraseña (variable)

Utilización en funciones definidas por el usuario
GetPassword Tag
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Variable
Variable en la que se escribe la contraseña.

IdentificarCambioDeUsuario
Descripción
Visualiza un aviso de sistema que indica qué usuarios están conectados al panel de operador.
Esta función de sistema sólo se puede utilizar en el planificador de tareas.

Utilización en la lista de funciones
IdentificarCambioDeUsuario

Utilización en scripts de usuario
-

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1601

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
--

MostrarDiálogoInicioSesión
Descripción
Abre un cuadro de diálogo en el panel de operador con el que el usuario puede iniciar una
sesión en el panel de operador.

Utilización en la lista de funciones
MostrarDiálogoInicioSesión

Utilización en scripts de usuario
-

Parámetros
--

Cálculo
IncrementarVariable
Descripción
Suma el valor indicado al valor de la variable.
X=X+a
Nota
La función de sistema utiliza la misma variable como valor de entrada y como valor de salida.
Si utiliza esta función de sistema para convertir un valor, deberá utilizar una variable auxiliar.
A la variable auxiliar se le puede asignar un valor con la función de sistema "DefinirVariable".
Si asocia la función de sistema a eventos de un aviso y la variable no se utiliza en la imagen
actual, no se garantiza que el valor real de la variable se utilice en el controlador. Ello se puede
mejorar activando el modo de adquisición "Cíclico continuo".

Utilización en la lista de funciones
IncrementarVariable (Variable, Valor)

1602

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en funciones definidas por el usuario
IncreaseTag Tag, Value
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Variable
Variable a la que se debe agregar el valor indicado.
Valor
Valor que se suma.

Consulte también
DefinirVariable (Página 1606)

InvertirEscalaLineal
Descripción
Asigna a la variable X un valor que se calcula a partir del valor de la variable Y indicada
mediante la función lineal X = (Y - b) / a.
Las variables X e Y no pueden ser idénticas. Esta función de sistema es la función inversa de
"EscalaLineal".
Nota
Las variables X e Y no pueden ser idénticas. Si desea convertir una variable en Sí misma, debe
utilizar una variable auxiliar
Con la función de sistema "DefinirVariable" se puede asignar a la variable auxiliar el valor de
la variable que se va convertir.

Utilización en la lista de funciones
InvertirEscalaLineal (X, Y, b, a)

Utilización en funciones definidas por el usuario
InverseLinearScaling X, Y, b, a
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1603

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
X
Variable a la que se asigna el valor calculado en la ecuación lineal.
Y
Variable cuyo valor se utiliza para el cálculo.
b
Valor que se va a restar.
a
Valor por el que se divide.

Ejemplo
El siguiente código de programa asigna un valor a la variable varX con la función
InverseLinearScaling.

{
BYTE
BYTE
BYTE
BYTE

varX;
Yvalue = 10;
bvalue = 3;
avalue = 4;

//Inverse linear scaling
InverseLinearScaling (varX, Yvalue, bvalue, avalue);
printf ("varX = %d\r\n, varX);
...
}

El valor de retorno guardado puede procesarse en el código subsiguiente.

EscalaLineal
Descripción
Asigna a la variable Y un valor que se calcula a partir del valor de las variables X indicadas
mediante la función lineal Y = (a * X) + b.

1604

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
La función inversa es la función de sistema "InvertirEscalaLineal".
Nota
Las variables X e Y no pueden ser idénticas. Si desea convertir una variable en Sí misma, debe
utilizar una variable auxiliar
Con la función de sistema "DefinirVariable" se puede asignar a la variable auxiliar el valor de
la variable que se va convertir.

Utilización en la lista de funciones
EscalaLineal (Y, a, X, b)

Utilización en funciones definidas por el usuario
LinearScaling Y, a, X, b
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Y
Variable a la que se asigna el valor calculado en la ecuación lineal.
a
Valor con el que se multiplica.
X
Variable cuyo valor se utiliza para el cálculo.
b
Valor que se suma.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1605

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente código de programa asigna con la función LinearScaling un valor a la variable Yvar.

{
BYTE
BYTE
BYTE
BYTE

Yvar;
Xvalue = 10;
bvalue = 3;
avalue = 4;

// linear scaling
LinearScaling ( Yvar, avalue, Xvalue, bvalue);
printf ("Yvar = %d\r\n, Yvar);
...
}

El valor de retorno guardado puede procesarse en el código subsiguiente.

DefinirVariable
Descripción
Asigna un valor nuevo a la variable indicada.
Nota
Dependiendo del tipo de variable, con esta función de sistema puede asignar cadenas de
caracteres y números.

Utilización en la lista de funciones
DefinirVariable (Variable, Valor)

Utilización en funciones definidas por el usuario
SetTag Tag, Value
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Variable
Variable a la que se debe asignar el valor indicado.

1606

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Valor
Valor que se asigna a la variable indicada.
Nota
La función de sistema "DefinirVariable" se ejecuta únicamente tras establecer una conexión.

Ejemplo
El siguiente código de programa ajusta con la función SetTag el valor de las variables
gs_tag_bit a TRUE y guarda el valor de retorno en la variable ok.

{
BOOL ok;
BOOL bvalue;
//Set the tag to true
ok = SetTag("gs_tag_bit", TRUE);
//error handling
if(ok)
{
// succeeded
printf ( "Function has run through.\r\n" );
bvalue = GetTagBit("gs_tag_bit");
printf ("Value of gs_tag_bit: %d\r\n", bvalue);
}
else
{
// failed
printf ( "Error - function failed." );
}
...
}

El valor de retorno guardado puede procesarse en el código subsiguiente.

DecrementarVariable
Descripción
Resta el valor indicado del valor de la variable.
X=X-a
Nota
La función de sistema utiliza la misma variable como valor de entrada y como valor de salida.
Si utiliza esta función de sistema para convertir un valor, deberá utilizar una variable auxiliar.
A la variable auxiliar se le asigna un valor con la función de sistema "DefinirVariable".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1607

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Si asocia la función de sistema a eventos de un aviso y la variable no se utiliza en la imagen
actual, no se garantiza que el valor real de la variable se utilice en el controlador. Ello se puede
mejorar activando el modo de adquisición "Cíclico continuo".

Utilización en la lista de funciones
DecrementarVariable (Variable, Valor)

Utilización en funciones definidas por el usuario
DecreaseTag Tag, Value
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Variable
Variable de la que se debe restar el valor indicado.
Valor
Valor que se va a restar.

Procesamiento por bits
InvertirBit
Descripción
Invierte el valor de la variable indicada del tipo "Bool".
● Si la variable tiene el valor 1 (TRUE), se ajusta a 0 (FALSE).
● Si la variable tiene el valor 0 (FALSE), se ajusta a 1 (TRUE).

Utilización en la lista de funciones
InvertirBit (Variable)

Utilización en funciones definidas por el usuario
InvertBit Tag
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

1608

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Variable
Variable cuyo bit se debe ajustar.

Ejemplo
El siguiente código de programa invierte el valor de la variable booleana bStatus y muestra el
resultado junto con el valor original bSaved.

'Programming language: VB
Dim myTag
Dim myOutputField
Dim bValue, bSaved, strResult
Set myTag = SmartTags("bStatus")
Set myOutputField=HMIRuntime.Screens("MyScreen").ScreenItems("objTextField")
'Get current value
bValue=myTag.Value
'Save current value
bSaved=bValue
'Invert Bit
InvertBit myTag
bValue=myTag.Value
'Output result old and new value:
strResult="Old Value: "&bSaved &Chr(13)&"New Value: "&bValue
myOutputField.Text=strResult

//Programming language: C
{
BOOL bStatus = 0;
BOOL bSaved = bStatus;
//Invert variable
invertBit(bStatus);
//print current and saved value
printf ("Current value: %d\r\n, Saved value: %d\r\n",bStatus, bSaved);
...
}

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1609

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

InvertirBitEnVariable
Descripción
Invierte un bit en la variable indicada:
● Si el bit de la variable tiene el valor 1 (TRUE), se ajusta a 0 (FALSE).
● Si el bit de la variable tiene el valor 0 (FALSE), se ajusta a 1 (TRUE).
Tras modificar el bit indicado, la función de sistema vuelve a transferir toda la variable al
controlador. No se comprueba si entretanto se han modificado otros bits en la variable. El
operador y el controlador sólo podrán acceder a la variable indicada en modo de lectura hasta
que la variable vuelva a transferirse al controlador.
Nota
No utilice esta función de sistema si el controlador admite variables BOOL. En su lugar utilice
la función de sistema "InvertirBit".

Utilización en la lista de funciones
InvertirBitEnVariable (Variable, Bit)

Utilización en funciones definidas por el usuario
InvertBitInTag Tag, Bit
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Variable
Variable en la que se debe ajustar el bit indicado.
Bit
Número del bit a ajustar.
Si utiliza esta función de sistema en un script de usuario, los bits de una variable se cuentan
de derecha a izquierda. El contaje comienza a partir de "0".

1610

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente código de programa invierte un bit en la posición indicada bitposition de la variable
bStatusWord y muestra el resultado junto con el valor original bSaved.

'Programming language: VB
Dim myTag
Dim myOutputField
Dim bValue, bSaved, bitposition, strResult
Set myTag = SmartTags("bStatusWord")
Set myOutputField=HMIRuntime.Screens("MyScreen").ScreenItems("objTextField")
'Get current value
bValue=myTag.Value
'Save current value
bSaved=bValue
'Invert Bit in position
bitposition=2
InvertBit myTag, bitposition
bValue=myTag.Value
'Output result old and new value:
strResult="Old Value: "&bSaved &Chr(13)&"New Value: "&bValue
myOutputField.Text=strResult

//Programming language: C
{
BYTE bStatusWord;
BYTE bsaved = bStatusWord;
BYTE bitposition = 2;
//Invert bit in bitposition
InvertBitInTag (bStatusWord, bitposition);
//print current and saved value
printf ("Current value: %d\r\n, Saved value: %d\r\n",bStatusWord, bsaved);
...
}

DesactivarBit
Descripción
Pone a 0 (FALSE) el valor de una variable del tipo "Bool".

Utilización en la lista de funciones
DesactivarBit (Variable)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1611

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en funciones definidas por el usuario
ResetBit Tag
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Variable
Variable del tipo BOOL que se ajusta a "0" (FALSE).

Ejemplo
El siguiente código de programa pone a 0 el valor de la variable booleana bStatus con la
función ResetBit y muestra el resultado junto con el valor original bSaved.

'Programming language: VB
Dim myTag
Dim myOutputField
Dim bValue, bSaved, strResult
Set myTag = SmartTags("bStatus")
Set myOutputField=HMIRuntime.Screens("MyScreen").ScreenItems("objTextField")
'Set value
bValue=1
myTag.Value=bValue
'Save current value
bSaved=bValue
'Reset Bit
ResetBit myTag
bValue=myTag.Value
'Output result old and new value:
strResult="Old Value: "&bSaved &Chr(13)&"New Value: "&bValue
myOutputField.Text=strResult

1612

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

//Programming language: C
{
BOOL bStatus = 1;
BOOL bSaved = bStatus;
//Reset bit
ResetBit (bStatus);
//print current and saved value
printf ("Current value: %d\r\n, Saved value: %d\r\n",bStatus, bSaved);
...
}

Consulte también
DesactivarBitEnVariable (Página 1613)

DesactivarBitEnVariable
Descripción
Pone un bit a 0 (FALSE) en las variables indicadas.
Tras modificar el bit indicado, la función de sistema vuelve a transferir toda la variable al
controlador. No se comprueba si entretanto se han modificado otros bits en la variable. El
operador y el controlador sólo podrán acceder a la variable indicada en modo de lectura hasta
que la variable vuelva a transferirse al controlador.
Nota
No utilice esta función de sistema si el controlador admite variables BOOL. En su lugar utilice
la función de sistema "DesactivarBit".

Utilización en la lista de funciones
DesactivarBitEnVariable (Variable, Bit)

Utilización en funciones definidas por el usuario
ResetBitInTag Tag, Bit
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1613

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Variable
Variable en la que un bit se ajusta a "0" (FALSE).
Bit
Número del bit que se ajusta a "0" (FALSE).
Si utiliza esta función de sistema en un script de usuario, los bits de la variable indicada se
contarán de derecha a izquierda, independientemente del controlador utilizado. El contaje
comienza a partir de "0".

Ejemplo
El siguiente código de programa pone a 0 un bit en la posición indicada bitposition de la
variable bStatusWord y muestra el resultado junto con el valor original bSaved.

'Programming language: VB
Dim myTag
Dim myOutputField
Dim bValue, bSaved, bitposition, strResult
Set myTag = SmartTags("bStatusWord")
Set myOutputField=HMIRuntime.Screens("MyScreen").ScreenItems("objTextField")
'Save current value
bValue=myTag.Value
bSaved=bValue
'Reset Bit
bitposition=2
ResetBitInTag myTag, bitposition
bValue=myTag.Value
'Output result old and new value:
strResult="Old Value: "&bSaved &Chr(13)&"New Value: "&bValue
myOutputField.Text=strResult

1614

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

//Programming language: C
{
BYTE bSaved;
BYTE bitposition = 2;
bSaved = GetTagByte("bStatusWord");
//Reset bit in bitposition
ResetBitInTag ("bStatusWord", bitposition);
//print current and saved value
printf ("Current value: %d\r\n, Saved value: %d\r\n",GetTagByte("bStatusWord"), bSaved);
...
}

Consulte también
DesactivarBit (Página 1611)

DesplazarYEnmascarar
Descripción
La función de sistema convierte la configuración binaria de entrada de la variable de origen en
una configuración binaria de salida de la variable de destino. Durante este proceso se
desplazan y se enmascaran bits.
Nota
Si las variables de origen y destino tienen un número de bits diferente, la aplicación de la
función de sistema en la variable de destino no puede causar un rebase del rango de valores.

Utilización en la lista de funciones
DesplazarYEnmascarar (Variable de origen, Variable de destino, Bits a desplazar, Bits a
enmascarar)

Utilización en funciones definidas por el usuario
ShiftAndMask Source_tag, Target_tag, Bits_to_shift, Bits_to_mask
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1615

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Variable de origen
La variable contiene la configuración binaria de entrada. Se admiten variables de números
enteros, p. ej. "Byte", "Char", "Int", "UInt", "Long" y "ULong".
Ejemplo: La variable de origen del tipo "16 Bit Integer" tiene el valor 72: 0000000001001000.
Variable de destino
En la variable se guarda la configuración binaria de salida. Se admiten variables de tipo entero,
p. ej. "Byte", "Char", "Int", "UInt", "Long" y "ULong".
Ejemplo: La configuración binaria de entrada desplazada se multiplica con la máscara de bits,
bit por bit con la operación lógica Y: 0000000000001001. El resultado tiene el valor decimal "8"
y se guarda en la variable de destino.
Tenga en cuenta lo siguiente:
● Las variables de origen y destino tienen el mismo número de bits.
● La cantidad de bits a desplazar es menor que la cantidad de bits de las variables de origen
y de destino.
● "Bits a enmascarar" no contiene más bits que las variables de origen y destino.
Bits a desplazar
Cantidad de bits según la que se debe desplazar hacia la derecha la configuración binaria de
entrada. Un valor negativo desplaza la configuración binaria de entrada hacia la izquierda.
Ejemplo: "Bits a desplazar" tiene el valor "+3". Al llamar la función de sistema, la configuración
binaria de entrada se desplaza 3 bits hacia la derecha: 0000000000001001.
El lado izquierdo se rellena con "0". En el lado derecho se truncan 3 bits. El nuevo valor decimal
es "9".
Nota
Si la variable de origen tiene un tipo de datos Integer con el signo "-", el bit izquierdo será "1".
Al desplazar hacia la derecha, este bit de signo se rellena con "0". El signo se conmuta a "+".
Bits a enmascarar
Un número del tipo Integer sirve de máscara de bits Con su configuración binaria se multiplica
la configuración binaria de entrada desplazada. Ejemplo: número "2478" con la configuración
binaria "0000100110101110".

1616

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
La máscara de bits se puede indicar de 3 maneras distintas:
● Hexadecimal: Introduzca primero "0h" o "0H" como prefijo, seguido de un espacio en blanco
opcional para una mejor legibilidad. Seguidamente agrupe la configuración binaria en
bloques de cuatro bits (0000)(1001)(1010)(1110) y represente cada bloque en el sistema
hexadecimal. (0)(9)(A)(E). Sólo se admite la entrada de los caracteres 0-9, A-F, a-f: "0h
09AE".
● Binario: Introduzca primero "0b" o "0B" como prefijo, seguido de un espacio en blanco
opcional para una mejor legibilidad. Para comprobarlo, agrupe después la configuración
binaria en bloques 0000 1001 1010 1110 separados por espacios en blanco. Sólo se admite
la entrada de los caracteres "0" ó "1": "0b 0000 1001 1010 1110".
● Decimal: Introduzca directamente el valor "2478" sin prefijo.
Nota
Si cambia la versión del panel de operador de destino después de la configuración (p. ej., de
"13.1.0" a "13.0.0" o a la inversa), deberá comprobar los parámetros de esta función de
sistema.
Los tipos de datos "Char" y "Word" pueden utilizarse para los parámetros "Variable de origen"
y "Variable de destino" a partir de la versión de panel 13.1.0. En las versiones de panel
anteriores a la 13.1.0, estos parámetros deben asignarse a otros tipos de datos:
● En lugar de "Char", debe utilizarse "SInt"
● En lugar de "Word", debe utilizarse "Int"
De lo contrario pueden producirse efectos indeseados, p. ej., comportamiento erróneo o
inesperado de las funciones de sistema configuradas.

ActivarBit
Descripción
Ajusta a "1" (TRUE) el valor de una variable del tipo "Bool".

Utilización en la lista de funciones
ActivarBit (Variable)

Utilización en funciones definidas por el usuario
SetBit Tag
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1617

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Variable
Variable del tipo BOOL que se ajusta a "1" (TRUE).

Ejemplo
El siguiente código de programa pone a 1 el valor de la variable booleana bStatus con la
función SetBit y muestra el resultado junto con el valor original bSaved.

'Programming language: VB
Dim myTag
Dim myOutputField
Dim bValue, bSaved, strResult
Set myTag = SmartTags("bStatus")
Set myOutputField=HMIRuntime.Screens("MyScreen").ScreenItems("objTextField")
'Set value
bValue=0
myTag.Value=bValue
'Save current value
bSaved=bValue
'Set Bit
SetBit myTag
bValue=myTag.Value
'Output result old and new value:
strResult="Old Value: "&bSaved &Chr(13)&"New Value: "&bValue
myOutputField.Text=strResult

//Programming language: C
{
BOOL bStatus = 0;
BOOL bSaved = bStatus;
//Set bit
SetBit (bStatus);
//print current and saved value
printf ("Current value: %d\r\n, Saved value: %d\r\n",bStatus, bSaved);
...
}

1618

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

ActivarBitDeVariable
Descripción
Ajusta un bit a "1" (TRUE) en la variable indicada.
Tras modificar el bit indicado, la función de sistema vuelve a transferir toda la variable al
controlador. No se comprueba si entretanto se han modificado otros bits en la variable. El
operador y el controlador sólo podrán acceder a la variable indicada en modo de lectura hasta
que la variable vuelva a transferirse al controlador.
Nota
No utilice esta función de sistema si el controlador admite variables BOOL. En su lugar utilice
la función de sistema "ActivarBit".

Utilización en la lista de funciones
ActivarBitDeVariable (Variable, Bit)

Utilización en funciones definidas por el usuario
SetBitInTag Tag, Bit
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Variable
Variable en la que un bit se ajusta a "1" (TRUE).
Bit
Número del bit que se ajusta a "1" (TRUE).
Si utiliza esta función de sistema en un script de usuario, los bits de la variable indicada se
contarán de derecha a izquierda, independientemente del controlador utilizado. El contaje
comienza a partir de "0".
Nota
Para garantizar una funcionalidad fiable es imprescindible una actualización garantizada de
las variables utilizadas con los valores de proceso actuales. Por tanto, configure la variable en
un campo E/S, o bien asocie la función de sistema a un objeto de imagen (p. ej. un botón).
Si asocia la función de sistema a un evento breve (p. ej. aparición de un mensaje), los valores
de proceso actuales sólo se alcanzarán si la variable puede leerse de forma permanente.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1619

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente código de programa pone a 1 un bit en la posición indicada bitposition de la
variable bStatusWord y muestra el resultado junto con el valor original bSaved.

'Programming language: VB
Dim myTag
Dim myOutputField
Dim bValue, bSaved, bitposition, strResult
Set myTag = SmartTags("bStatusWord")
Set myOutputField=HMIRuntime.Screens("MyScreen").ScreenItems("objTextField")
'Save current value
bValue=myTag.Value
bSaved=bValue
'Set Bit in tag
bitposition=1
SetBitInTag "bStatusWord", bitposition
bValue=myTag.Value
'Output result old and new value:
strResult="Old Value: "& bSaved & "New Value: " & bValue
myOutputField.Text=strResult

//Programming language: C
{
BYTE bSaved;
BYTE bitposition = 1;
bSaved = GetTagByte("bStatusWord");
//Reset bit in bitposition
SetBitInTag ("bStatusWord", bitposition);
//print current and saved value
printf ("Current value: %d\r\n, Saved value: %d\r\n",GetTagByte("bStatusWord"), bSaved);
}

Consulte también
ActivarBit (Página 1617)

1620

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

ActivarBitMientrasTeclaPulsada
Descripción
Ajusta un bit a "1" (TRUE) en la variable indicada mientras el usuario mantiene pulsada la tecla
configurada.
Tras modificar el bit indicado, la función de sistema vuelve a transferir toda la variable al
controlador. No se comprueba si entretanto se han modificado otros bits en la variable. El
operador y el controlador sólo podrán acceder a la variable indicada en modo de lectura hasta
que la variable vuelva a transferirse al controlador. Para evitar problemas debidos a accesos
simultáneos a una misma variable, es recomendable que utilice esta función de sistema sólo
para acceder a variables del tipo BOOL.
Nota
Con el cambio de imagen configurado para una tecla se ejecutan inmediatamente todas las
funciones configuradas para el evento "Soltar", aunque la tecla todavía esté pulsada.
Si para una tecla de función está configurada la función de sistema
"ActivarBitMientrasTeclaPulsada", el bit se desactivará inmediatamente tras ejecutar el
cambio de imagen. Este comportamiento es necesario, puesto que la asignación de las teclas
será diferente tras el cambio de imagen.
No utilice esta función de sistema si el controlador admite variables BOOL. En su lugar utilice
la función de sistema "ActivarBit".

Utilización en la lista de funciones
ActivarBitMientrasTeclaPulsada (Variable, Bit)

Utilización en scripts de usuario
-

Parámetros
Variable
Variable en la que un bit se ajusta temporalmente a "1" (TRUE). Si el controlador lo permite,
utilice sólo variables del tipo BOOL.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1621

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Bit
Número del bit que se ajusta temporalmente a "1" (TRUE).
Nota
Para garantizar una funcionalidad fiable es imprescindible una actualización garantizada de
las variables utilizadas con los valores de proceso actuales. Por tanto, configure la variable en
un campo ES, o bien asocie la función a un elemento de imagen (p. ej. un botón).
Si asocia la función a un evento breve (p. ej. aparición de un mensaje), los valores de proceso
actuales sólo se alcanzarán si la variable puede leerse de forma permanente.

Consulte también
ActivarBit (Página 1617)

Imprimir
ImprimirImagen
Descripción
Imprime la imagen visualizada actualmente en el panel de operador en la impresora conectada
a éste último.
Las ventanas abiertas también se imprimen.
Nota
Los ajustes de la impresora se adoptan de los ajustes actuales del sistema operativo Windows.

Utilización en la lista de funciones
ImprimirImagen

Utilización en funciones definidas por el usuario
PrintScreen
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del dispositivo".

Parámetros
--

1622

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

ImprimirInforme
Descripción
Imprime el informe indicado en la impresora conectada al panel de operador. El informe se
imprime en el idioma ajustado en el panel de operador.
Nota
Si runtime se cierra mientras se están imprimiendo datos de fichero con la ayuda de la función
del sistema, entonces el protocolo no recibe más datos a partir del momento en que se finaliza
runtime.

Utilización en la lista de funciones
ImprimirInforme (Informe)

Utilización en funciones definidas por el usuario
PrintReport Report
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Informe
Nombre del informe a imprimir.
Nota
Si crea un nuevo informe para la función "ImprimirInforme" en el cuadro de diálogo "Lista de
funciones", aparecerá la siguiente advertencia durante la compilación: "El informe "Informe_1"
no contiene páginas de impresión."
Para eliminar la advertencia, abra el "Informe_1" en la ventana del proyecto y vuelva a compilar
el proyecto.

ActivarModoDeInformeAviso
Descripción
Activa o desactiva la generación automática de informes para avisos en la impresora.

Utilización en la lista de funciones
ActivarModoDeInformeAviso (Modo)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1623

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en funciones definidas por el usuario
SetAlarmReportMode Mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Modo
Determina si los avisos se deben imprimir automáticamente en la impresora:
0 (hmiDisablePrinting) = Inhibir impresión: Los informes no se imprimen automáticamente.
1 (hmiEnablePrinting) = Habilitar impresión: Los informes se imprimen automáticamente.
-1 (hmiToggle) = Conmutar: Conmuta entre ambos estados.

Configuración
LeerModoPLC
Descripción
Evalúa el estado actual del controlador conectado.
La función de sistema "LeerModoPLC" solo se puede configurar para los siguientes
controladores:
● SIMATIC S7-1200
● SIMATIC S7-1500

Utilización en la lista de funciones
LeerModoPLC (conexión, modo)

Utilización en funciones definidas por el usuario
-

Parámetros
Conexión
Conexión entre controlador y panel de operador.

1624

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Modo
Evalúa el estado del controlador conectado. Seleccione una variable de usuario adecuada
para la evaluación.
4

STOP

En estado operativo "STOP" no se procesa el programa de usuario.

6

ARRANQUE

La CPU está en el estado operativo "Arranque", p. ej., tras un rearranque.

8

RUN

En estado operativo "RUN" se procesa el programa cíclico, controlado por
tiempo y por alarmas.

9

RUN-Redun‐
dant

En el estado operativo "RUN-Redundant", ambas CPU procesan síncro‐
namente el programa de usuario.

10

PARADA

El estado operativo "PARADA" se alcanza con un punto de parada (break
point) en un bloque que se prueba paso a paso en modo de etapa indivi‐
dual.

13

DEFECTUOSO Se ha producido un error interno. Si el estado "DEFECTUOSO" es provo‐
cado por un error de firmware, se señalizará con los LED de estado de la
CPU.

15

Sin tensión

La tensión de red está desconectada.

ConfigurarModoDeVisualización
Descripción
Cambia la configuración de la ventana en la que se ejecuta el software runtime.
Por defecto, el software runtime se ejecuta en modo de pantalla completa. La posibilidad de
conmutar entre las aplicaciones de Windows está desactivada.

Utilización en la lista de funciones
ConfigurarModoDeVisualización (Modo de visualización)

Utilización en funciones definidas por el usuario
SetDisplayMode Display_mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Representación
Determina la configuración de la ventana en la que se ejecuta el software runtime.
1 (hmiScreenFull): Pantalla completa: La barra de título de la ventana no se visualiza.
2 (hmiScreenMaximized): Maximizado
3 (hmiScreenRestore): Restaurar: Se utiliza la configuración de ventana que se ha utilizado de
último. Este modo de visualización sólo se puede utilizar si la ventana aparece minimizada o
maximizada.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1625

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
4 (hmiScreenMinimized): Minimizado
5 (hmiScreenAutoAdjust): Automático: El tamaño de la ventana se ajusta de manera que se
visualicen todos los objetos de imagen que contiene.
6 (hmiScreenOnTop): Primer plano; en función de la configuración de Windows aparecerá la
ventana en primer plano o bien el símbolo del programa en cuestión parpadeará en la barra de
tareas. La configuración puede modificarse en Windows y es válida para todas las aplicaciones
de Windows.

EstablecerModoDeOperaciónPanel
Descripción
Cambia el modo de operación en el panel de operador. Se dispone de los modos de operación
siguientes: "Online", "Offline" y "Cargar".

Utilización en la lista de funciones
EstablecerModoDeOperaciónPanel (Modo de operación)

Utilización en funciones definidas por el usuario
SetDeviceMode Operating_mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Modo de operación
Determina el modo de operación del panel de operador. En equipos con Windows CE no se
puede asignar un valor a este parámetro por medio de una variable del tipo de datos BOOL.
0 (hmiOnline) = Online: Se establece la conexión con el controlador. Al hacerlo, siempre se
ajusta el estado de conexión configurado. No se tienen en cuenta los estados que se utilizaron
por última vez en runtime.
1 (hmiOffline) = Offline: Se deshace la conexión con el controlador.
2 (hmiTransfer) = cargar: Permite transferir proyectos desde el equipo de configuración al
panel de operador.
Nota
Si utiliza un PC como panel de operador, al conmutar al modo de operación "Cargar" se cierra
el software runtime.

1626

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Consulte también
EstablecerModoDeConexión (Página 1630)

EstablecerModoTecladoDePantalla
Descripción
Activa o desactiva la visualización automática del teclado de la pantalla en el panel de
operador.
Utilice esta función de sistema si desea impedir que aparezca el teclado de pantalla por
ejemplo porque dispone de un teclado externo conectado al panel de operador.
Nota
Si utiliza la función de sistema "EstablecerModoTecladoDePantalla"
("SetScreenKeyboardMode") en un panel de operador que carezca de pantalla táctil, en la
configuración del panel deberá activar la opción "Utilizar teclado pantalla" en el área
"Configuración de runtime".

Utilización en la lista de funciones
EstablecerModoTecladoDePantalla (Modo)

Utilización en funciones definidas por el usuario
SetScreenKeyboardMode Mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Modo
Determina si el teclado de la pantalla se debe mostrar u ocultar.
0 (hmiOff) = Off: Ocultar el teclado de la pantalla
1 (hmiOn) = On: Mostrar el teclado de la pantalla
-1 (hmiToggle) = Conmutar: Conmuta entre ambos estados.

AjustarFechaHoraPLC
Descripción
Modifica la fecha y la hora del controlador conectado.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1627

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
La función de sistema "AjustarFechaHoraPLC" solo se puede configurar para los siguientes
controladores:
● SIMATIC S7-1200
● SIMATIC S7-1500

Utilización en la lista de funciones
AjustarFechaHoraPLC (conexión, tiempo)

Utilización en funciones definidas por el usuario
-

Parámetros
Conexión
Conexión de controlador y panel de operador.
Tiempo
Transfiere la fecha y la hora del panel de operador al controlador. El controlador aplica la fecha
y la hora del panel de operador.

DefinirModoPLC
Descripción
La función de sistema "DefinirModoPLC" solo se puede configurar para los siguientes
controladores:
● SIMATIC S7-1200
● SIMATIC S7-1500

Utilización en la lista de funciones
DefinirModoPLC (conexión, modo)

Utilización en funciones definidas por el usuario
-

Parámetros
Conexión
Conexión entre controlador y panel de operador.

1628

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Modo
Determina el modo de operación del panel de operador:
4

STOP

En estado operativo "STOP" no se procesa el programa de usuario.

6

ARRANQUE

La CPU está en el estado operativo "Arranque", p. ej., tras un rearranque.

8

RUN

En estado operativo "RUN" se procesa el programa cíclico, controlado por
tiempo y por alarmas.

9

RUN-Redun‐
dant

En el estado operativo "RUN-Redundant", ambas CPU procesan síncro‐
namente el programa de usuario.

10

PARADA

El estado operativo "PARADA" se alcanza con un punto de parada (break
point) en un bloque que se prueba paso a paso en modo de etapa indivi‐
dual.

13

DEFECTUOSO Se ha producido un error interno. Si el estado "DEFECTUOSO" es provo‐
cado por un error de firmware, se señalizará con los LED de estado de la
CPU.

15

Sin tensión

La tensión de red está desconectada.

Consulte también
VisorDiagnósticoSistemaActualizarBúferPLC (Página 1669)

EstablecerIdioma
Descripción
Cambia el idioma del panel de operador. Todos los textos y avisos del sistema configurados
aparecerán en el panel de operador en el idioma recién ajustado.

Utilización en la lista de funciones
EstablecerIdioma (Idioma)

Utilización en funciones definidas por el usuario
SetLanguage Language
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1629

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Idioma
Determina qué idioma se debe ajustar en el panel de operador. Se pueden realizar los
siguientes ajustes:
● -1 (hmiToggle) = Conmutar: Cambia al siguiente idioma. El orden se establece en el editor
"Idiomas del proyecto" durante el proceso de configuración.
● Número que se ha especificado en "Idioma y fuente" en el editor "Configuración de
runtime". Cambia al idioma con el número indicado.
● Idioma que se ha especificado en "Idioma y fuente" en el editor "Configuración de runtime".
● Abreviatura del idioma conforme a la referencia VBScript5: Cambia al idioma
correspondiente a la abreviatura indicada, p. ej. "de-DE" para alemán (Alemania) o "en-US"
para inglés (EE.UU.).
En el tema "Cuadro de Id. de configuración regional (LCID)" que forma parte de los
principios básicos de VBScript encontrará una lista de todas las abreviaturas de idioma.

EstablecerModoDeConexión
Descripción
Establece o desconecta la conexión indicada.
Nota
Solo puede establecerse una conexión con el controlador si el panel de operador funciona en
modo "online". Utilice para ello la función de sistema "EstablecerModoDeOperaciónPanel".
Si la conexión se ha cargado en el modo "offline", cada vez que se cambie el modo de
operación "offline" se deshará la conexión. Para restablecer la conexión después de volver a
cambiar el modo de operación "online", pase de nuevo la conexión al modo "online".

Utilización en la lista de funciones
EstablecerModoDeConexión (Modo, Conexión)

Utilización en funciones definidas por el usuario
SetConnectionMode Mode, Connection
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

1630

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Modo
Determina si la conexión con el controlador se debe establecer o desconectar. En equipos con
Windows CE y en Runtime Advanced no es posible asignar un valor a este parámetro con una
variable del tipo de datos BOOL.
0 (hmiOnline) = Online: Se establece la conexión.
1 (hmiOffline) = Offline: Se deshace la conexión.
Conexión
Controlador que se debe conectar con el panel de operador. El nombre del controlador se
establece en el editor de conexiones.

Utilización múltiple de la función de sistema en un script de usuario
Si utiliza la función de sistema "EstablecerModoDeConexión" para diferentes conexiones,
puede suceder que no todas las funciones de sistema se ejecuten correctamente. Para evitar
este problema, proceda del siguiente modo:
1. Cree una variable con el valor inicial "0".
2. Asocie la función de sistema "EstablecerModoDeConexión" al evento "Modificación de
valor" de la variable HMI. Si desea deshacer p. ej. 3 conexiones, deberá configurar la
función de sistema tres veces.
3. En el script de usuario, aplique a la variable HMI la función de sistema "InvertirBit".

Ejemplo de aplicación
A continuación se indican dos ejemplos de aplicación típicos de esta función de sistema:
● Test
Mientras que no haya ningún controlador conectado al panel de operador, durante el test
no se indicarán mensajes de error en el panel de operador. Si el panel de operador está
conectado a un controlador, podrá establecer la conexión con éste último pulsando una
tecla.
● Puesta en servicio
Se deben configurar varios controladores para una instalación. Configure primero todos los
controladores "offline", exceptuando uno de ellos. Tras poner en marcha el primer
controlador, establezca la conexión con todos los demás, pulsando para ello la tecla
correspondiente. Así podrá poner en marcha los demás controladores uno tras otro.

AccesoWebActivar
Descripción
Define el tipo de acceso a una aplicación runtime vía Internet.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1631

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en la lista de funciones
AccesoWebActivar (Modo de acceso)

Utilización en scripts de usuario
-

Parámetros
Modo de acceso
Determina el tipo de acceso a la aplicación runtime:
-1 (hmiToggle) = Conmutar: Conmuta entre ambos estados.
0 (hmiReadOnly) = Solo lectura.
1 (hmiReadWrite) = Lectura y escritura.

CambiarConexión
Descripción
Deshace la conexión con el controlador que se está utilizando y establece una conexión con
un controlador con una dirección distinta. El controlador recién conectado debe pertenecer a
la misma clase de dispositivo (S7-300, S7-400, etc.).
Nota
Al cambiar a una dirección diferente, vigile que esta dirección no esté siendo utilizada por otro
panel de operador.
Se admiten los siguientes tipos de dirección:
● Dirección IP
● Dirección MPI
Se admiten los siguientes tipos de controlador:
● SIMATIC S7 300/400
● SIMATIC S7 200
● SIMATIC S7 1200 (versión de panel hasta V11)
● SIMATIC S7 LOGO!
● SIMATIC S7 NC
● SIMOTION

Utilización en la lista de funciones
CambiarConexión (Conectar, Dirección, Slot, Rack)

1632

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en funciones definidas por el usuario
ChangeConnection Connection, Address, Slot, Rack
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Conexión
Nombre de la conexión que se desconecta. El nombre se establece en el editor "Conexiones"
durante el proceso de configuración.
Dirección
Dirección MPI/PROFIBUS o IP del controlador con el que se establece la conexión.
Nota
La dirección se establece mediante una variable. La lista de objetos muestra variables de todo
los tipos. Seleccione exclusivamente variables de los siguientes tipos:
● Conexión Ethernet: Tipo de datos "String"
● Conexión MPI: Tipos de datos "Int"
Slot
Slot del controlador con el que se establece la conexión.
Rack
Rack del controlador con el que se establece la conexión.

Ejemplo de aplicación
Desea utilizar un panel de operador junto con varias máquinas. Para ello debe configurar un
controlador en el proyecto. Al cambiar de controlador se deshace la conexión con el
controlador utilizado actualmente. A continuación, la conexión se establece con el nuevo
controlador, utilizando parámetros de direccionamiento diferentes. A partir de ahora, todas las
variables de esta conexión se actualizarán desde el nuevo controlador.
Se utiliza por defecto el controlador especificado al crear el proyecto.
1. En el editor "Conexiones", indique el nombre y la dirección del controlador.
2. Configure un botón en la imagen del proceso.
3. Asocie el evento "Pulsar" a la función de sistema "CambiarConexión".
4. Introduzca como parámetros el nombre de la conexión y la dirección del controlador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1633

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

CambiarConexiónEIP
Descripción
Deshace la conexión con el controlador Allen Bradley que se está utilizando y establece una
conexión con otro controlador Allen Bradley en runtime. "EIP" son las siglas de "Ethernet/IP".
El controlador recién conectado debe pertenecer a la misma clase de dispositivo (Allen
Bradley).
Para que se establezca la conexión, el tipo de CPU del controlador que se va a conectar debe
coincidir con el tipo de CPU del controlador ya conectado, p. ej., ambos controladores con el
tipo de CPU "SLC/Micrologix PLC".
Nota
Al cambiar a una dirección diferente, vigile que esta dirección no esté siendo utilizada por otro
panel de operador.
Se admiten los siguientes tipos de dirección:
● Dirección IP

Utilización en la lista de funciones
CambiarConexiónEIP (Conectar, Dirección, Ruta de comunicación)

Utilización en funciones definidas por el usuario
ChangeConnectionEIP Connection, Address, Communication_path
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Conexión
Nombre de la conexión que se desconecta. El nombre se establece durante la configuración,
p. ej., en el editor "Conexiones".
Dirección
Dirección IP del controlador con el que se establece la conexión.
Nota
La dirección se establece mediante una variable. La lista de objetos muestra variables de todo
los tipos. Seleccione exclusivamente variables del tipo de datos "String".

1634

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Nota
La dirección IP guardada consiste en 4 números decimales comprendidos en un rango entre
0 y 255.
Ruta de comunicación
Ruta CIP desde el módulo Ethernet al controlador con el que se establece la conexión.
La ruta de comunicación se puede definir mediante una variable String o una variable HMI del
tipo de datos "String".

Ejemplo de aplicación
Desea utilizar un panel de operador junto con varias máquinas. Para ello debe configurar un
controlador en el proyecto. Al cambiar de controlador se deshace la conexión con el
controlador utilizado actualmente. A continuación, la conexión se establece con el nuevo
controlador, utilizando parámetros de direccionamiento diferentes. A partir de ahora, todas las
variables de esta conexión se actualizarán desde el nuevo controlador.
1. En el editor "Conexiones", indique el nombre y la dirección del controlador.
2. Configure un botón en la imagen del proceso.
3. Asocie el evento "Pulsar" a la función de sistema "CambiarConexiónEIP".
4. Introduzca como parámetros el nombre de la conexión y la dirección del controlador.

Funciones de la pantalla
ModificarContraste
Descripción
Cambia el contraste de la pantalla del panel de operador al siguiente nivel de contraste.

Utilización en la lista de funciones
ModificarContraste (Cambio)

Utilización en scripts de usuario
-

Parámetros
Cambio
Determina cómo se debe modificar el contraste:
0 (hmiDecrease) = Reducir: Reduce el contraste un nivel.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1635

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
1 (hmiIncrease) = Aumentar: Aumenta el contraste un nivel.

Ejemplo de aplicación
Objetivo
Desea aumentar y reducir el contraste de la pantalla utilizando para un botón de comando,
respectivamente.
Indicaciones relativas a la configuración
Configure dos botones y asigne en cada uno de ellos el evento "Pulsar" a la función de sistema
"ModificarContraste". Asigne a dichos botones los parámetros "Aumentar" y "Reducir",
respectivamente.
Proceso en el panel de operador
Si pulsa uno de estos botones en runtime, el contraste se aumentará o reducirá un nivel.

Consulte también
CerrarSesión (Página 1597)

CalibrarPantallaTáctil
Descripción
Ejecuta un programa para calibrar la pantalla táctil.
Durante la calibración se pedirá al operador que toque cinco posiciones en la pantalla táctil.
Para confirmar el proceso de calibración, toque la pantalla táctil en un intervalo de 30
segundos. Si no toca la pantalla táctil dentro de ese intervalo, los ajustes de calibrado se
rechazan. La guía del usuario está en inglés.
Utilice esta función de sistema al poner en marcha el panel de operador por primera vez.

Nota
Con la función de sistema se restablecen las teclas directas utilizadas.

Utilización en la lista de funciones
CalibrarPantallaTáctil

Utilización en funciones definidas por el usuario
CalibrateTouchScreen

1636

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
-Nota
La función de sistema CalibrarPantallaTáctil no puede ser simulada.

ConfigurarSeñalAcústica
Descripción
Configura la notificación acústica del panel de operador al manejar la pantalla táctil.
Nota
Cuando rearranque el panel de operador se restablecerá la configuración que estaba ajustada
al apagarlo.

Utilización en la lista de funciones
ConfigurarSeñalAcústica (Volumen)

Utilización en funciones definidas por el usuario
SetAcousticSignal Volume
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Volumen
Determina si se debe emitir una señal acústica, así como su volumen.
-1 (hmiToggle) = Conmutar: Conmuta el volumen de salida de la señal acústica como se indica
a continuación: Silenciada > Baja > Alta.
0 (hmiMuted) = Silenciada: Sin señal acústica
1 (hmiQuiet) = Baja: Señal acústica a bajo volumen
2 (hmiLoud) = Alta: Señal acústica a alto volumen

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1637

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

EstablecerBrillo
Descripción
Define el brillo de la pantalla.
Nota
Al reiniciar el panel de operador se restablece la configuración que estaba ajustada en el
Control Panel/Start Center.
Es aplicable a Basic Panels 2nd Generation, Mobile Panels y Comfort Panels:
El valor de la función de sistema "EstablecerBrillo" puede ajustarse entre 0 % y 100 %. El valor
ajustado se transfiere al panel de operador. Los ajustes de brillo en el panel de operador
pueden verse y editarse en "Start Center > Settings > Display". Los paneles de operador
soportan un ajuste de brillo entre 10 % y 100 %.
Si se asigna un valor de 0 % a la función de sistema "EstablecerBrillo", la pantalla del panel de
operador estará desconectada por defecto en runtime. Cuando el operador toca la pantalla,
esta cambia al ajuste de brillo anterior.
Si se asigna un valor entre 1 % y 10 % a la función de sistema "EstablecerBrillo" y el operador
abre el ajuste de la pantalla en el Start Center, el brillo cambiará al 10 %.

Utilización en la lista de funciones
EstablecerBrillo (Valor)

Utilización en funciones definidas por el usuario
SetBrightness Value
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Valor
Valor nuevo del brillo.

1638

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

EstablecerColorRetroiluminación
Descripción
Define el color de la retroiluminación.
Nota
Cuando rearranque el panel de operador se restablecerá la configuración que estaba ajustada
al apagarlo.

Utilización en la lista de funciones
EstablecerColorRetroiluminación (Valor)

Utilización en scripts de usuario
-

Parámetros
Valor
Establece el color de la retroiluminación:
0 (hmiWhite) = blanco: Sin color
1 (hmiGreen) = verde: Color verde
2 (hmiYellow) = amarillo: Color amarillo
3 (hmiRed) = rojo: Color rojo

LeerBrillo
Descripción
Lee el valor del brillo.

Utilización en la lista de funciones
LeerBrillo (Brillo)

Utilización en funciones definidas por el usuario
GetBrightness Brightness

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1639

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Brillo
Variable en la que se escribe el valor.

Funciones del navegador HTML
NavegadorHTMLCancelar
Descripción
Ejecuta la función "Cancelar" del navegador HTML.

Utilización en la lista de funciones
NavegadorHTMLCancelar (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

NavegadorHTMLDesplazarseAbajo
Descripción
Retrocede página en el navegador HTML.

Utilización en la lista de funciones
NavegadorHTMLDesplazarseAbajo (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

1640

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

NavegadorHTMLActualizar
Descripción
Ejecuta la función "Actualizar" del navegador HTML.

Utilización en la lista de funciones
NavegadorHTMLActualizar (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

NavegadorHTMLDesplazarseArriba
Descripción
Avanza página en el navegador HTML.

Utilización en la lista de funciones
NavegadorHTMLDesplazarseArriba (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1641

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

NavegadorHTMLAcercar
Descripción
Aumenta la representación del navegador HTML en un grado de zoom.

Utilización en la lista de funciones
NavegadorHTMLAcercar (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

NavegadorHTMLAlejar
Descripción
Reduce la representación del navegador HTML en un grado de zoom.

Utilización en la lista de funciones
NavegadorHTMLAlejar (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

HTMLNavegadorALaIzquierda
Descripción
Pasa página a la izquierda en el navegador HTML.

1642

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en la lista de funciones
HTMLNavegadorALaIzquierda (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

NavegadorHTMLALaDerecha
Descripción
Pasa página a la derecha en el navegador HTML.

Utilización en la lista de funciones
NavegadorHTMLALaDerecha (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

NavegadorHTMLAvanzarPágina
Descripción
Hace que el cursor se desplace por páginas hacia arriba en el navegador HTML.

Utilización en la lista de funciones
NavegadorHTMLDesplazarseArribaPágina (objeto de imagen)

Utilización en funciones definidas por el usuario
Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1643

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

NavegadorHTMLRetrocederPágina
Descripción
Hace que el cursor se desplace por páginas hacia abajo en el navegador HTML.

Utilización en la lista de funciones
NavegadorHTMLRetrocederPágina (objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

NavegadorHTMLPáginaInicio
Descripción
Pasa a la página de inicio almacenada para el navegador HTML.

Utilización en la lista de funciones
NavegadorHTMLPáginaInicio (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

1644

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

NavegadorHTMLAdelante
Descripción
Ejecuta la función "Adelante" del navegador HTML.

Utilización en la lista de funciones
NavegadorHTMLAdelante (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

NavegadorHTMLAtrás
Descripción
Ejecuta la función "Atrás" del navegador HTML.

Utilización en la lista de funciones
NavegadorHTMLAtrás (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre de objeto del navegador HTML en el que se ejecuta el comando.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1645

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Funciones del visor de curvas
VisorDeCurvasAvanzarPágina
Descripción
Avanza un ancho de visualización en el visor de curvas indicado.

Utilización en la lista de funciones
VisorDeCurvasAvanzarPágina (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor de curvas en el que se debe avanzar un ancho de visualización.

VisorDeCurvasRetrocederPágina
Descripción
Retrocede un ancho de visualización en el visor de curvas indicado.

Utilización en la lista de funciones
VisorDeCurvasRetrocederPágina (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor de curvas en el que se debe retroceso un ancho de visualización.

1646

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

VisorDeCurvasAmpliar
Descripción
Reduce el intervalo de tiempo que se visualiza en el visor de curvas indicado.

Utilización en la lista de funciones
VisorDeCurvasAmpliar (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor de curvas en el que se debe reducir el intervalo de tiempo visualizado.

VisorDeCurvasComprimir
Descripción
Aumenta el intervalo de tiempo que se visualiza en el visor de curvas indicado.

Utilización en la lista de funciones
VisorDeCurvasComprimir (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor de curvas en el que se debe aumentar el intervalo de tiempo visualizado.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1647

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

VisorDeCurvasReglaIzquierda
Descripción
Desplaza la regla hacia atrás (a la izquierda) en el visor de curvas indicado.
Nota
Para poder desplazar la regla, ésta debe estar activada. Para activar la regla utilice la función
de sistema "VisorDeCurvasActivarModoRegla".

Utilización en la lista de funciones
VisorDeCurvasReglaIzquierda (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor de curvas en el que la regla se debe desplazar hacia atrás.

Consulte también
VisorDeCurvasActivarModoRegla (Página 1649)

VisorDeCurvasReglaDerecha
Descripción
Desplaza la regla hacia adelante (a la derecha) en el visor de curvas indicado.
Nota
Para poder desplazar la regla, ésta debe estar activada. Para activar la regla utilice la función
de sistema "VisorDeCurvasActivarModoRegla".

Utilización en la lista de funciones
VisorDeCurvasReglaDerecha (Objeto de imagen)

1648

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor de curvas en el que la regla se debe desplazar hacia adelante.

Consulte también
VisorDeCurvasActivarModoRegla (Página 1649)

VisorDeCurvasActivarModoRegla
Descripción
Muestra u oculta la regla en el visor de curvas indicado. La regla muestra el valor Y
correspondiente a un valor X.
Nota
Para visualizar la regla es necesario activar el ajuste "Mostrar regla" en las propiedades del
visor de curvas.

Utilización en la lista de funciones
VisorDeCurvasActivarModoRegla (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor de curvas en el que la regla se debe mostrar u ocultar.

Consulte también
VisorDeCurvasReglaDerecha (Página 1648)
VisorDeCurvasReglaIzquierda (Página 1648)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1649

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

VisorDeCurvasIniciarParar
Descripción
Detiene o prosigue el registro de curvas en el visor de curvas indicado.

Utilización en la lista de funciones
VisorDeCurvasIniciarParar (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor de curvas en el que se debe iniciar o parar el registro de curvas.

VisorDeCurvasIrAlPrincipio
Descripción
Retrocede al principio del área de representación en el visor de curvas.

Utilización en la lista de funciones
VisorDeCurvasIrAlPrincipio (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor de curvas en el que se retrocede al principio del área de representación.

Consulte también
Funciones de sistema para Runtime Advanced (Página 1549)

1650

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Funciones del visor de PDF
PDFDesplazarseAbajo
Descripción
Pasa página hacia abajo en la visualización del archivo PDF.

Utilización en la lista de funciones
PDFDesplazarseAbajo (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

PDFDesplazarseArriba
Descripción
Pasa página hacia arriba en la visualización del archivo PDF.

Utilización en la lista de funciones
PDFDesplazarseArriba (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1651

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

PDFAdaptarAncho
Descripción
Adapta la representación del archivo PDF a la altura de la ventana del visor de PDF.

Utilización en la lista de funciones
PDFAdaptarAncho (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

PDFAdaptarAAltura
Descripción
Adapta la representación del archivo PDF al ancho de la ventana del visor de PDF.

Utilización en la lista de funciones
PDFAdaptarAAltura (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

PDFPrimeraPágina
Descripción
Pasa a la primera página del archivo PDF en el visor de PDF.

1652

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en la lista de funciones
PDFPrimeraPágina (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

PDFÚltimaPágina
Descripción
Pasa a la última página del archivo PDF en el visor de PDF.

Utilización en la lista de funciones
PDFÚltimaPágina (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

PDFAvanzarPágina
Descripción
Pasa a la siguiente página del archivo PDF en el visor de PDF.

Utilización en la lista de funciones
PDFAvanzarPágina (Objeto de imagen)

Utilización en funciones definidas por el usuario
Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1653

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

PDFIrAPágina
Descripción
Pasa a la página introducida del archivo PDF en el visor de PDF.

Utilización en la lista de funciones
PDFIrAPágina (objeto de imagen, página)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.
Página
Página del documento PDF que se representa.

PDFRetrocederPágina
Descripción
Pasa a la página anterior del archivo PDF en el visor de PDF.

Utilización en la lista de funciones
PDFRetrocederPágina (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

1654

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

PDFAcercar
Descripción
Aumenta la representación del archivo PDF en un grado de zoom en el visor de PDF.

Utilización en la lista de funciones
PDFAcercar (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

PDFAlejar
Descripción
Reduce la representación del archivo PDF en un grado de zoom en el visor de PDF.

Utilización en la lista de funciones
PDFAlejar (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1655

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

PDFDesplazarseIzquierda
Descripción
Pasa página a la izquierda en la visualización del archivo PDF.

Utilización en la lista de funciones
PDFDesplazarseIzquierda (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

PDFDesplazarseDerecha
Descripción
Pasa página a la derecha en la visualización del archivo PDF.

Utilización en la lista de funciones
PDFDesplazarseDerecha (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

PDFZoomOriginal
Descripción
Cambia la representación del archivo PDF al tamaño original en el visor de PDF.

1656

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en la lista de funciones
PDFZoomOriginal (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor de PDF en el que se ejecuta el comando.

Funciones del visor de código PLC
ActivarVisorCódigoPLC
Descripción
Efectúa un cambio de imagen para visualizar la imagen indicada con el visor de código PLC.
El visor de código PLC muestra el código de programa de la red en cuestión.
La función de sistema ActivarVisorCódigoPLC se configura para el evento "Hacer clic en el
botón Visor de código PLC" de una vista general de GRAPH, o para un evento de un botón.
Cambio de imagen desde la vista general de GRAPH
La función de sistema se configura para el evento "Hacer clic en el botón Visor de código PLC"
en una vista general de GRAPH para representar la cadena secuencial GRAPH en el visor de
código PLC. Si no hay fallos presentes, en el visor de código PLC se mostrará la secuencia de
la cadena GRAPH.
Si se produce un error, en el visor de código PLC se mostrará la etapa errónea tras el salto. Si
se han producido varios errores, tras el salto se mostrará la primera etapa errónea de la cadena
secuencial. Si ha solucionado el error, en el visor se mostrará automáticamente la siguiente
etapa errónea. En la vista detallada, se mostrará según el tipo de error, la transición o el
enclavamiento (Interlock).
Cambio de imagen de un aviso
La función de sistema se puede configurar en un evento de un botón. Al pulsar el botón en
runtime, la función de sistema comprueba si el último aviso seleccionado en el visor de avisos
configurado es un aviso de supervisión o un aviso GRAPH. Si es posible el salto para este
aviso, se abre el visor de código PLC configurado con el código de programa correspondiente.
Es posible saltar desde un aviso del visor de avisos al visor de código PLC con los siguientes
avisos de supervisión:
●

En supervisiones globales, solo con supervisiones de enclavamiento (Interlock)

●

En supervisiones locales, con todas las supervisiones básicas de parámetros de entrada

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1657

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Para más información sobre supervisiones, consulte el capítulo "Programación del PLC >
Supervisión de máquinas e instalaciones con ProDiag".
El salto al visor de código PLC es posible para todos los avisos GRAPH. Tras el salto, en el
visor de código PLC se muestran la cadena secuencial GRAPH y la etapa errónea.
Si hay presentes simultáneamente un aviso de supervisión y un aviso de enclavamiento para
la misma etapa, tras el disparo de la función de sistema, en el visor de código PLC se mostrará
siempre primero el segmento de enclavamiento, independientemente de si estaba
seleccionado el aviso de supervisión o el de enclavamiento.
Para saltar de un aviso de supervisión al visor de código PLC cuando se usan operandos
locales soportados en un bloque de función, el nombre de la instancia debe cumplir la siguiente
convención: <FB-Name>_DB.
Solo es posible saltar a una función o a un bloque de organización si se usan exclusivamente
operandos globales.
Nota
No se soporta el salto en combinación con el búfer de avisos o el fichero de avisos.

Utilización en la lista de funciones
ActivarVisorCódigoPLC(Nombre de imagen, Objeto de imagen)

Utilización en funciones definidas por el usuario
ActivatePLCCodeView Screen_name, Object_name
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".
Nota
Para entrar en la cadena secuencial GRAPH mediante la función de sistema
"ActivarVisorCódigoPLC", la versión del bloque GRAPH debe ser por lo menos V3.0.

Nota
El uso de la función de sistema "ActivarVisorCódigoPLC" en un script de VB no tiene ningún
efecto en la vista general de GRAPH.

1658

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Nombre de imagen
Nombre de la imagen que contiene el visor de código PLC.
Nota
No se soporta el cambio a una imagen emergente o a una imagen deslizable.
Objeto de imagen
Nombre de objeto del visor de código PLC.

VisorCódigoPLCMoverBarraDesplazamiento
Descripción
Mueve la barra de desplazamiento del visor de código PLC. Esta función de sistema le permite
acceder a un máximo de seis barras de desplazamiento de determinadas áreas de dibujo.

Utilización en la lista de funciones
VisorCódigoPLCMoverBarraDesplazamiento (objeto de imagen, área, dirección)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de código PLC.
Área
Área en la cual se mueve la barra de desplazamiento:
Área de dibujo
Tabla de símbolos
Vista detallada
Dirección
Dirección hacia la cual se mueve la barra de desplazamiento
Izquierda
Derecha
Arriba

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1659

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Abajo

VisorCódigoPLCDetalles
Descripción
Muestra la vista detallada en el visor de código PLC seleccionado.

Utilización en la lista de funciones
VisorCódigoPLCDetalles (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de código PLC.

VisorCódigoPLCSiguienteSegmento
Descripción
Se desplaza al segmento siguiente en el visor de código PLC.

Utilización en la lista de funciones
VisorCódigoPLCSiguienteSegmento (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de código PLC.

1660

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

VisorCódigoPLCMostrarModoEtapa
Descripción
Alterna la selección de etapas manual y la selección automática de la etapa activa en el visor
de código PLC.

Utilización en la lista de funciones
VisorCódigoPLCMostrarModoEtapa (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de código PLC.

VisorCódigoPLCSímbolos
Descripción
Muestra el área del símbolo del segmento en el visor de código PLC.

Utilización en la lista de funciones
VisorCódigoPLCSímbolos (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de código PLC.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1661

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

VisorCódigoPLCTransiciónInterlock
Descripción
Conmuta entre la visualización de segmentos de transición y de Interlock en el visor de código
PLC.

Utilización en la lista de funciones
VisorCódigoPLCTransiciónInterlock (objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de código PLC.

VisorCódigoPLCActualOPrimerosValores
Descripción
Conmuta entre la visualización de valores actuales y primeros valores en el visor de código
PLC.
Nota
Requisitos para la adquisición de primeros valores
La adquisición de primeros valores es posible tan solo con bloques de función GRAPH de la
versión V4.0 y superiores.
Para la adquisición de primeros valores se debe marcar la casilla "Adquisición de primeros
valores" en las propiedades del bloque GRAPH.

Utilización en la lista de funciones
VisorCódigoPLCActualOPrimerosValores (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

1662

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Objeto de imagen
Nombre del visor de código PLC.

VisorCódigoPLCAcercar
Descripción
Amplía la visualización del segmento en el área del segmento de la visualización del código
PLC.

Utilización en la lista de funciones
VisorCódigoPLCAcercar (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de código PLC.

VisorCódigoPLCAlejar
Descripción
Reduce la visualización del segmento en el área del segmento de la visualización del código
PLC.

Utilización en la lista de funciones
VisorCódigoPLCAlejar (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1663

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Objeto de imagen
Nombre del visor de código PLC

VisorCódigoPLCAnteriorSegmento
Descripción
Se desplaza al segmento anterior en el visor de código PLC.

Utilización en la lista de funciones
VisorCódigoPLCAnteriorSegmento (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de código PLC.

VisorCódigoPLCSupervisiónOLlamadaFB
Descripción
Cambia entre la visualización del segmento individual con la supervisión configurada y la
visualización de todo el bloque de función en el visor de código PLC.

Utilización en la lista de funciones
VisorCódigoPLCSupervisiónOLlamadaFB (objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de código PLC.

1664

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Consulte también
Funciones de sistema para Runtime Advanced (Página 1549)
Funciones de sistema para Comfort Panels (Página 1532)

Funciones del visor Sm@rtClient
VisorSmartClientActualizar
Descripción
Actualiza el contenido visualizado en el visor Sm@rtClient.

Utilización en la lista de funciones
VisorSmartClientActualizar (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor Sm@rtClient en el que se ejecuta el comando.

VisorSmartClientProtecciónContraEscrituraOff
Descripción
Ajusta el acceso de solo lectura a "Inactivo" en el visor Sm@rtClient.
Con esta configuración puede utilizarse un panel de operador eliminado. Utilice la función de
sistema "VisorSmartClientProtecciónContraEscrituraOn" para reactivar el acceso de solo
lectura.

Utilización en la lista de funciones
VisorSmartClientProtecciónContraEscrituraOff (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1665

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Objeto de imagen
Nombre del visor Sm@rtClient en el que se ejecuta el comando.

VisorSmartClientProtecciónContraEscrituraOn
Descripción
Ajusta el acceso de solo lectura a "Activo" en el visor Sm@rtClient.
Con esta configuración, un panel de operador eliminado solo puede observarse. Utilice la
función de sistema "VisorSmartClientProtecciónContraEscrituraOff" para volver a desactivar
el acceso de solo lectura.

Utilización en la lista de funciones
VisorSmartClientProtecciónContraEscrituraOn (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor Sm@rtClient en el que se ejecuta el comando.

VisorSmartClientDesconectar
Descripción
Ejecuta el comando "Desconectar" en el visor Sm@rtClient.
Utilice esta función de sistema si no se debe utilizar el botón integrado en el objeto de imagen.

Utilización en la lista de funciones
VisorSmartClientDesconectar (Objeto de imagen)

Utilización en scripts de usuario
-

1666

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Objeto de imagen
Nombre del visor Sm@rtClient en el que se ejecuta el comando.

VisorSmartClientConectar
Descripción
Ejecuta el comando "Conectar" en el visor Sm@rtClient.
Utilice esta función de sistema si no se debe utilizar el botón integrado en el objeto de imagen.
El visor Sm@rtClient se conecta con el panel de operador configurado.
Nota
No es posible establecer una conexión cifrada entre el Sm@rtClient y el Sm@rtServer
mediante la función de sistema "VisorSmartClientConectar" si el Sm@rtClient no ha aceptado
previamente el certificado del servidor. Para establecer una conexión cifrada entre el
Sm@rtClient y el Sm@rtServer, utilice el botón configurado "Conectar" del visor Sm@rtClient
en runtime.

Utilización en la lista de funciones
VisorSmartClientConectar (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor Sm@rtClient en el que se ejecuta el comando.

VisorSmartClientSalir
Descripción
Sale del visor Sm@rtClient y vuelve a la operación del panel de operador.
Se mantiene la conexión con el panel de operador que está configurado en el visor
Sm@rtClient.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1667

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en la lista de funciones
VisorSmartClientSalir (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor Sm@rtClient en el que se ejecuta el comando.

Funciones del visor de diagnóstico del sistema
VisorDiagnósticoSistemaActivar
Descripción
Activa el visor de diagnóstico del sistema. El visor de diagnóstico del sistema muestra la vista
detallada del dispositivo afectado.

Utilización en la lista de funciones
VisorDiagnósticoSistemaActivar(Nombre de imagen, Objeto de imagen)

Utilización en funciones definidas por el usuario
ActivateSystemDiagnosticsView Screen_name, Object_name
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Nombre de imagen
Nombre de la imagen que contiene el visor de diagnóstico del sistema.
Objeto de imagen
Nombre de objeto del visor de diagnóstico del sistema.

1668

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

VisorDiagnósticoSistemaActualizarBúferPLC
Descripción
Actualiza los datos del búfer de diagnóstico del controlador en el visor de diagnóstico del
sistema.

Utilización en la lista de funciones
VisorDiagnósticoSistemaActualizarBúferPLC (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de diagnóstico del sistema.

VisorDiagnósticoSistemaVistaDetallada
Descripción
Abre la vista detallada en un diagnóstico de sistema para mostrar información detallada sobre
la conexión seleccionada y los errores existentes.

Utilización en la lista de funciones
VisorDiagnósticoSistemaVistaDetallada (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de diagnóstico del sistema que se activa en la vista detallada.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1669

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

VisorDiagnósticoSistemaBúferDiagnóstico
Descripción
Abre la vista que muestra los datos actuales del búfer de diagnóstico en un diagnóstico de
sistema.

Utilización en la lista de funciones
VisorDiagnósticoSistemaBúferDiagnóstico (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de diagnóstico del sistema que se activa en la vista detallada.

VisorDiagnósticoSistemaVistaDispositivos
Descripción
Abre la vista de dispositivos en un diagnóstico del sistema para mostrar todas las conexiones
disponibles.

Utilización en la lista de funciones
VisorDiagnósticoSistemaVistaDispositivos (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de diagnóstico del sistema.

1670

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

VisorDiagnósticoSistemaAtrás
Descripción
Pasa a la vista de orden superior en un diagnóstico de sistema.
● Si en el visor de diagnóstico del sistema se representa la vista del búfer de diagnóstico, la
función abre la vista de dispositivos.
● Si en el visor de diagnóstico del sistema se representa la vista detallada, la función abre la
vista del búfer de diagnóstico.

Utilización en la lista de funciones
VisorDiagnósticoSistemaAtrás (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de diagnóstico del sistema.

MostrarVentanaDeDiagnósticoDelSistema
Descripción
Muestra u oculta la ventana de diagnóstico del sistema en el panel de operador. La ventana de
diagnóstico del sistema sólo está disponible en la imagen general para Comfort Panels y
WinCC Runtime Advanced.

Utilización en la lista de funciones
MostrarVentanaDeDiagnósticoDelSistema (Objeto de imagen)

Utilización en funciones definidas por el usuario
ShowSystemDiagnosticsWindow Object_name
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1671

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Objeto de imagen
Nombre de la ventana de diagnóstico del sistema que se debe mostrar u ocultar.

Avisos
EditarAviso
Descripción
Dispara el evento "Editar" para el aviso seleccionado o, en caso de selección múltiple, para el
aviso seleccionado en último lugar. Si no ha acusado todavía los avisos que editar, el acuse se
efectuará automáticamente al ejecutarse esta función de sistema.
Esta función de sistema solo se puede utilizar para teclas de función.

Utilización en la lista de funciones
EditarAviso

Utilización en funciones definidas por el usuario
EditAlarm
Utilizable, siempre que el panel configurado permita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del dispositivo".

Parámetros
--

BorrarBúferDeAvisos
Descripción
Borra avisos del búfer de avisos en el panel de operador.
Nota
Los avisos no acusados también se borran.

Utilización en la lista de funciones
BorrarBúferDeAvisos (Número de categoría)

1672

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en funciones definidas por el usuario
ClearAlarmBuffer Alarm_class_number
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Número de categoría
Determina qué avisos se deben borrar del búfer de avisos:
0 (hmiAll) = todos los avisos
1 (hmiAlarms) = avisos de la categoría "Errores"
2 (hmiEvents) = avisos de la categoría "Advertencias"
3 (hmiSystem) = avisos de la categoría "Avisos de sistema"
4 (hmiS7Diagnosis) = avisos de la categoría "Aviso de diagnóstico S7"
Nota
Dependencia del panel de operador
Los avisos de la categoría "Diagnosis Events" no están disponibles en Basic Panels.

BorrarBúferDeAvisosProtool
Descripción
Esta función de sistema existe por motivos de compatibilidad.
Tiene la misma funcionalidad que la función de sistema "BorrarBúferDeAvisos" pero utiliza la
antigua numeración de ProTool.

Utilización en la lista de funciones
BorrarBúferDeAvisosProtool (Número de categoría)

Utilización en funciones definidas por el usuario
ClearAlarmBufferProtoolLegacy Alarm_class_number
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Número de categoría
Número de la categoría cuyos avisos se borrarán:
Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1673

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
-1 (hmiAllProtoolLegacy) = Todos los avisos
0 (hmiAlarmsProtoolLegacy) = Avisos de la categoría "Errors"
1 (hmiEventsProtoolLegacy) = Avisos de la categoría "Warnings"
2 (hmiSystemProtoolLegacy) = Avisos de la categoría "System"
3 (hmiS7DiagnosisProtoolLegacy) = Avisos de la categoría "Diagnosis Events"
Nota
Dependencia del panel de operador
Los avisos de la categoría "Diagnosis Events" no están disponibles en Basic Panels.

VisorDeAvisosActualizar
Descripción
Actualiza el visor de avisos avanzado.

Utilización en la lista de funciones
VisorDeAvisosActualizar (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de avisos que se actualizará.

VisorDeAvisosLoopInAlarm
Descripción
Dispara el evento "Loop-In-Alarm" para el aviso seleccionado o, en caso de selección múltiple,
para el aviso seleccionado en último lugar.
Utilice esta función de sistema si no se debe utilizar el botón integrado en el control ActiveX.

1674

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Puede configurar a su vez una función de sistema para el evento "Loop-In-Alarm". Por ejemplo,
puede conmutar a la imagen del proceso en la que se ha presentado el aviso.
Nota
Si no ha acusado todavía los avisos a editar, el acuse se efectuará automáticamente al
ejecutarse esta función de sistema.

Utilización en la lista de funciones
VisorDeAvisosLoopInAlarm (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de avisos en el que se debe lanzar el evento.

VisorDeAvisosAcusarAviso
Descripción
Acusa los avisos seleccionados en el visor de avisos indicado.
Utilice esta función de sistema si no se debe utilizar el botón integrado en el control ActiveX.

Utilización en la lista de funciones
VisorDeAvisosAcusarAviso (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de avisos en el que se debe lanzar el evento.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1675

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

VisorDeAvisosMostrarTextoAyuda
Descripción
Muestra el tooltip configurado para el aviso seleccionado en el visor de avisos indicado.

Utilización en la lista de funciones
VisorDeAvisosMostrarTextoAyuda (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de avisos en el que se debe lanzar el evento.

Consulte también
Funciones de sistema para Runtime Advanced (Página 1549)

AcusarAviso
Descripción
Acusa todos los avisos seleccionados.
Utilice esta función de sistema si el panel de operador no tiene ninguna tecla de acuse o si no
debe emplearse la tecla integrada del visor de avisos.
Esta función de sistema sólo se puede utilizar para teclas de función.

Utilización en la lista de funciones
AcusarAviso

Utilización en funciones definidas por el usuario
AcknowledgeAlarm
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del dispositivo".

1676

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
--

MostrarVentanaDeAvisos
Descripción
Muestra u oculta la ventana de avisos en el panel de operador.

Utilización en la lista de funciones
MostrarVentanaDeAvisos (Nombre del objeto, Representación)

Utilización en funciones definidas por el usuario
ShowAlarmWindow Object_name, Display_mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Nombre del objeto
Nombre del visor de avisos que se debe mostrar u ocultar.
Representación
Determina si la ventana de avisos se debe mostrar u ocultar.
0 (hmiOff) = Off: Ocultar el visor de avisos
1 (hmiOn) = On: Mostrar el visor de avisos
-1 (hmiToggle) = Conmutar: Conmuta entre ambos estados.

MostrarAvisoDeSistema
Descripción
Muestra el valor del parámetro transferido como aviso del sistema en el panel de operador.

Utilización en la lista de funciones
MostrarAvisoDeSistema (Texto/valor)

Utilización en funciones definidas por el usuario
ShowSystemAlarm Text_or_value

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1677

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Texto/valor
Texto o valor a emitir como aviso del sistema.

Recetas
ExportarRegistros
Descripción
Exporta uno o todos los registros de una receta a un archivo CSV o TXT.
Se crea un archivo para cada receta.

Utilización en la lista de funciones
ExportarRegistros (Número/nombre de receta, Número/nombre de registro, Nombre de
archivo, Sobrescribir, Emitir aviso de estado, Estado de procesamiento)

Utilización en funciones definidas por el usuario
ExportDataRecords Recipe_number/name, Data_record number/name, File_name,
Overwrite, Output_status_message, Processing_status
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Número/nombre de receta
Número/nombre de la receta de la que se deben exportar los registros. Introduzca "0" si desea
exportar registros de todas las recetas disponibles.
Número/nombre de registro
Número o nombre del registro de receta que se exportará. Introduzca "0" si desea exportar
todos los registros de receta.
Nombre de archivo
Nombre del archivo al que se exportan los registros de receta. Introduzca el nombre incluyendo
la ubicación y la extensión del archivo (*.csv o *.txt), p. ej., "C:\TEMP\Orange.csv". Si una
carpeta no existe, se creará al exportar.

1678

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Si no se introduce el nombre de archivo completo, el comportamiento dependerá del número
de recetas configuradas:
● Si hay varias recetas configuradas:
Si introduce solo un nombre de archivo sin ruta, el archivo se guardará en un directorio del
sistema, p. ej., "C:\Documents and Settings\[User]".
Si indica solo la ruta sin nombre de archivo, el nombre del archivo se genera
automáticamente a partir del nombre de la receta. Para ello, es imprescindible que esté
creada la carpeta indicada en la ruta, p. ej., "D:\Data\". Si la carpeta "D:\Data" no está
creada, se utilizará su nombre como prefijo para el nombre del archivo, p. ej.,
"Data_nombre_de_la_receta.csv".
● Si hay una sola receta configurada y se indica solo la ruta sin nombre de archivo:
Si la carpeta no existe, se crea un archivo con el nombre de la carpeta. Este archivo no
tendrá ninguna extensión.
Si la carpeta existe, la exportación se cancela con un mensaje de error.
Si utiliza una tarjeta de memoria como ubicación, defina la ruta del siguiente modo:
"\StorageCard\<Nombre>".
Para los Basic Panels, introduzca el nombre del archivo como sigue: "\USB_X60.1\<Nombre>"
Sobrescribir
Determina si se debe sobrescribir un archivo de exportación existente de igual nombre:
0 (hmiOverwriteForbidden) = No: El archivo de exportación no se sobrescribe. El proceso de
exportación no se ejecutará.
1 (hmiOverwriteAlways) = Sí: El archivo de exportación se sobrescribirá sin consulta previa.
2 (hmiOverwriteWithPrompting) = Previa confirmación: El archivo de exportación se
sobrescribirá tras haberse confirmado la consulta de seguridad.
Emitir aviso de estado
Determina si se debe emitir un aviso de estado una vez concluida la exportación:
0 (hmiOff) = Off: No emitir ningún aviso de estado.
1 (hmiOn) = On: Emitir un aviso de estado.
Estado de procesamiento
Indica el estado de procesamiento de la función de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta función:
2 = La función de sistema se está ejecutando actualmente.
4 = La función de sistema se ha ejecutado correctamente.
12 = La función de sistema no se ha ejecutado porque se ha producido un error.
Para el parámetro puede utilizarse una sola variable HMI.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1679

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Formato de exportación de los registros de receta
Si se selecciona la extensión ".csv" para el archivo de exportación, sólo se soportarán los
caracteres válidos del juego de caracteres ANSI. Esto también es aplicable a los separadores
de números decimales y de elementos de listas. Los separadores utilizados se establecen en
la configuración regional del sistema operativo del PC en el que se realiza la exportación.
Para la exportación también se pueden utilizar archivos de texto en formato de "Texto Unicode"
(".txt"). Este formato de archivo admite todos los caracteres que se pueden utilizar en WinCC
y WinCC Runtime. Los separadores utilizados se establecen asimismo en la configuración
regional del sistema operativo del PC en el que se realiza la exportación. En este formato de
archivo, el separador de elementos de lista es siempre un tabulador.
La función correspondiente para importar los datos soporta también los formatos de archivo
".csv" y ".txt" (Unicode).

Ejemplo de aplicación
Desea exportar todos los objetos pulsando una tecla.
Indicaciones relativas a la configuración
Configure la función de sistema "ExportarRegistros" asociada al evento "Pulsar" de la tecla
deseada. Transfiera los parámetros siguientes:
● Número/nombre de receta = 1
● Número/nombre de registro = 0
● Nombre de archivo = c:\temp\orange.csv (para Basic Panels "\USB_X60.1\orange.csv")
● Sobrescribir = 1
● Emitir aviso de estado = 1
Si lo desea, puede indicar variables en lugar de constantes. Dependiendo de la configuración,
el operador puede introducir los valores deseados en los campos E/S, o bien leerlos del
controlador. De este modo, el operador puede determinar qué registros de receta se
exportarán.
Proceso en el panel de operador
La función de sistema se ejecuta tras pulsar la tecla. Las constantes o las variables se evalúan.
Todos los registros de la receta 1 se exportan al archivo orange.csv. Si el archivo ya existe,
éste se sobrescribe.
Tras exportar los registros se visualiza un aviso del sistema.

ExportarRegistrosConSumaDeVerificación
Descripción
Exporta uno o todos los registros de una receta a un archivo CSV y genera una suma de
verificación para cada fila del archivo.
Se crea un archivo para cada receta.

1680

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en la lista de funciones
ExportarRegistrosConSumaDeVerificación (Número/nombre de receta, Número/nombre de
registro, Nombre de archivo, Sobrescribir, Emitir aviso de estado, Estado de procesamiento)

Utilización en funciones definidas por el usuario
ExportDataRecordsWithChecksum Recipe_number_or_name, Data_record
number_or_name, File_name, Overwrite, Output_status_message, Processing_status
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Número/nombre de receta
Número/nombre de la receta de la que se deben exportar los registros. Introduzca "0" si desea
exportar registros de todas las recetas disponibles.
Número/nombre de registro
Número o nombre del registro de receta que se exportará. Introduzca "0" si desea exportar
todos los registros de receta.
Nombre de archivo
Nombre del archivo CSV al que se deben exportar los registros de receta. Introduzca también
la ruta y la extensión del archivo, p. ej., "C:\TEMP\Orange.CSV".
Si utiliza una tarjeta de memoria como ubicación, introduzca la ubicación del siguiente modo:
"\StorageCard\<Nombre de archivo>".
Si define sólo un nombre de archivo y no una ruta, el archivo se guardará en el directorio desde
el que se inició el runtime. Si en el sistema operativo Windows 7 no se dispone de derechos de
escritura para este directorio, el archivo se guardará en el directorio de usuario, en la carpeta
"VirtualStore".
Si solo indica la ruta para la exportación, el nombre del archivo se genera automáticamente a
partir del nombre de la receta. Para ello se tiene que haber creado el directorio, p. ej. "D:\Temp
\". Si no se ha creado el directorio "D:\Temp", se utiliza el nombre del directorio como prefijo del
nombre del archivo,Temp_Nombre de receta.csv.
Sobrescribir
Determina si se debe sobrescribir un archivo CSV existente de igual nombre:
0 (hmiOverwriteForbidden) = No: El archivo CSV no se sobrescribirá. El proceso de
exportación no se ejecutará.
1 (hmiOverwriteAlways) = Sí: El archivo CSV se sobrescribirá sin consulta previa.
2 (hmiOverwriteWithConfirmation) = Previa confirmación: El archivo CSV se sobrescribirá tras
haberse confirmado la consulta de seguridad.
Emitir aviso de estado
Determina si se debe emitir un aviso de estado una vez concluida la exportación:

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1681

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
0 (hmiOff) = Off: No emitir ningún aviso de estado.
1 (hmiOn) = On: Emitir un aviso de estado.
Estado de procesamiento
Indica el estado de procesamiento de la función de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta función:
2 = La función de sistema se está ejecutando actualmente.
4 = La función de sistema se ha ejecutado correctamente.
12 = La función de sistema no se ha ejecutado porque se ha producido un error.
Para el parámetro puede utilizarse una sola variable HMI.

Formato de exportación de los registros de receta
Si se selecciona la extensión ".csv" para el archivo de exportación, sólo se soportarán los
caracteres válidos del juego de caracteres ANSI. Esto también es aplicable a los separadores
de números decimales y de elementos de listas. Los separadores utilizados se establecen en
la configuración regional del sistema operativo del PC en el que se realiza la exportación.
Para la exportación también se pueden utilizar archivos de texto en formato de "Texto Unicode"
(".txt"). Este formato de archivo admite todos los caracteres que se pueden utilizar en WinCC
y WinCC Runtime. Los separadores utilizados se establecen asimismo en la configuración
regional del sistema operativo del PC en el que se realiza la exportación. En este formato de
archivo, el separador de elementos de lista es siempre un tabulador.
La función correspondiente para importar los datos soporta también los formatos de archivo
".csv" y ".txt" (Unicode).

Ejemplo de aplicación
Pulsando una tecla desea exportar todos los registros y asignarles una suma de verificación.
Indicaciones relativas a la configuración
Configure la función de sistema "ExportarRegistrosConSumaDeVerificación" asociada al
evento "Pulsar" de la tecla deseada. Transfiera los parámetros siguientes:
● Número/nombre de receta = 1
● Número/nombre de registro = 0
● Nombre de archivo = c:\temp\orange.csv
● Sobrescribir = 1
● Emitir aviso de estado = 1
Si lo desea, puede indicar variables en lugar de constantes. Dependiendo de la configuración,
el operador puede introducir los valores deseados en los campos E/S, o bien leerlos del
controlador. De este modo, el operador puede determinar qué registros de receta se
exportarán.
Proceso en el panel de operador

1682

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
La función de sistema se ejecuta tras pulsar la tecla. Las constantes o las variables se evalúan.
Todos los registros de la receta 1 se exportan al archivo orange.csv y se les asignan sumas de
verificación. Si el archivo ya existe, éste se sobrescribe.
Tras exportar los registros se visualiza un aviso del sistema.

ImportarRegistros
Descripción
Importa uno o todos los registros de una receta de un archivo CSV o TXT.
Cuando se indica una ruta, se importan todos los archivos del directorio indicado.

Utilización en la lista de funciones
ImportarRegistros (Nombre de archivo, Número/nombre de registroNombre de registro,
Sobrescribir, Emitir aviso de estado, Estado de procesamiento)

Utilización en funciones definidas por el usuario
ImportDataRecords File_name, Data_record_number_or_name, Overwrite,
Output_status_message, Processing_status
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Nombre de archivo
Nombre del archivo del que se deben importar los registros de receta. Introduzca también la
ubicación y la extensión del archivo (*.csv o *.txt), p. ej., "C:\TEMP\Orange.csv".
Para los Basic Panels, introduzca el nombre del archivo como sigue: "\USB_X60.1\<Nombre>"
Para otros paneles se aplica lo siguiente: Si utiliza una tarjeta de memoria como ubicación,
introduzca esta última del siguiente modo: "\StorageCard\<Nombre>"
Número/nombre de registro
Número o nombre del registro de receta que se importará. Introduzca "0" si desea importar
todos los registros de receta.
Sobrescribir
Determina si se deben sobrescribir los registros de receta existentes:
0 (hmiOverwriteForbidden) = No: Los registros de receta no se sobrescriben. El proceso de
importación no se ejecuta.
1 (hmiOverwriteAlways) = Sí: Los registros de receta se sobrescribirán sin consulta previa.
2 (hmiOverwriteWithPrompting) = Previa confirmación: Los registros de receta se
sobrescribirán tras haberse confirmado la consulta de seguridad.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1683

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Emitir aviso de estado
Determina si se debe emitir un aviso de estado una vez concluida la importación:
0 (hmiOff) = Off: No emitir ningún aviso de estado.
1 (hmiOn) = On: Emitir un aviso de estado.
Estado de procesamiento
Indica el estado de procesamiento de la función de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta función:
2 = La función de sistema se está ejecutando actualmente.
4 = La función de sistema se ha ejecutado correctamente.
12 = La función de sistema no se ha ejecutado porque se ha producido un error.
Para el parámetro puede utilizarse una sola variable HMI.

Objetos configurables
Objeto

Evento

Variable

Modificación de valor
Límite superior excedido
Límite inferior excedido

Tecla de función (global)

Soltar
Pulsar

Tecla de función (local)

Soltar
Pulsar

Imagen

Creada
Borrada

Objeto de imagen

Pulsar
Soltar
Hacer clic
Modificar (o conmutar con el interruptor)
Conectar
Desconectar
Activar
Desactivar

Planificador de tareas

Tiempo agotado

ImportarRegistrosConSumaDeVerificación
Descripción
Importa uno o todos los registros de una receta de un archivo CSV con suma de verificación
y verifica ésta última.

1684

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en la lista de funciones
ImportarRegistrosConSumaDeVerificación (Nombre de archivo, Número/nombre de registro,
Sobrescribir, Emitir aviso de estado, Estado de procesamiento, verificar suma de verificación)

Utilización en funciones definidas por el usuario
ImportDataRecordsWithChecksum File_name, Data_record_number_or_name, Overwrite,
Output_status_message, Processing_status, Verify_checksum
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Nombre de archivo
Nombre del archivo CSV del que se deben importar los registros de receta. Introduzca también
la ruta y la extensión del archivo, p. ej., "C:\TEMP\Orange.CSV".
Si utiliza una tarjeta de memoria como medio de almacenamiento, introduzca la ruta del
siguiente modo: "\StorageCard\<Nombre de archivo>".
Si se indica un directorio en lugar de un solo archivo CSV, se importarán todos los archivos del
directorio en cuestión.
Número/nombre de registro
Número o nombre del registro de receta que se importará. Introduzca "0" si desea importar
todos los registros de receta.
Sobrescribir
Determina si se deben sobrescribir los registros de receta existentes:
0 (hmiOverwriteForbidden) = No: Los registros de receta no se sobrescriben. El proceso de
importación no se ejecuta.
1 (hmiOverwriteAlways) = Sí: Los registros de receta se sobrescribirán sin consulta previa.
2 (hmiOverwriteWithConfirmation) = Previa confirmación: Los registros de receta se
sobrescribirán tras haberse confirmado la consulta de seguridad.
Emitir aviso de estado
Determina si se debe emitir un aviso de estado una vez concluida la importación:
0 (hmiOff) = Off: No emitir ningún aviso de estado.
1 (hmiOn) = On: Emitir un aviso de estado.
Estado de procesamiento
Indica el estado de procesamiento de la función de sistema. Utilice el valor de retorno p. ej.
para ejecutar otras funciones de sistema sólo tras haber ejecutado correctamente esta función:
2 = La función de sistema se está ejecutando actualmente.
4 = La función de sistema se ha ejecutado correctamente.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1685

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
12 = La función de sistema no se ha ejecutado porque se ha producido un error.
Para el parámetro puede utilizarse una sola variable HMI.
Verificar suma de verificación
Determina si la suma de verificación debe verificarse al realizar la importación:
0 (hmiFalse) = No: La suma de verificación no se verifica.
1 (hmiTrue) = Sí: La suma de verificación se verifica.

CargarRegistro
Descripción
Carga el registro de receta indicado del medio de almacenamiento del panel de operador a la
variable de receta. Utilice esta función de sistema por ejemplo para visualizar un registro de
receta en la imagen de receta.
Active en la configuración para sincronizar la receta la opción "Sincronizar visor de recetas y
variables de recetas". Si la opción está desactivada, la función de sistema no tiene ningún
efecto.

Utilización en la lista de funciones
CargarRegistro (Número/Nombre de receta, Número/Nombre de registro, Estado de
procesamiento)

Utilización en funciones definidas por el usuario
LoadDataRecord Recipe_number_or_name, Data_record_number_or_name, Confirmation,
Output_status_message, Processing_status
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Número/nombre de receta
Número o nombre de la receta desde la que se cargará un registro.
Número/nombre de registro
Número o nombre del registro de receta que se cargará.
Estado de procesamiento
Indica el estado de procesamiento de la función de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta función:
2 = La función de sistema se está ejecutando actualmente.
4 = La función de sistema se ha ejecutado correctamente.

1686

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
12 = La función de sistema no se ha ejecutado porque se ha producido un error.
Para el parámetro puede utilizarse una sola variable HMI.

LeerRegistroDelControlador
Descripción
Transfiere el registro de receta indicado del controlador al medio de almacenamiento del panel
de operador.

Utilización en la lista de funciones
LeerRegistroDelControlador (Número/nombre de receta, Número/nombre de registro,
Sobrescribir, Emitir aviso de estado, Estado de procesamiento)

Utilización en funciones definidas por el usuario
GetDataRecordFromPLC Recipe_number_or_name, Data_record_number_or_name,
Overwrite, Output_status_message, Processing_status
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Número/nombre de receta
Número o nombre de la receta de la que se deben transferir los registros.
Número/nombre de registro
Número o nombre del registro de receta que se debe transferir del controlador al medio de
almacenamiento del panel de operador.
Sobrescribir
Determina si se debe sobrescribir un registro de receta existente de igual nombre:
0 (hmiOverwriteForbidden) = No: El registro de receta no se sobrescribe. El proceso de
transferencia no se ejecuta.
1 (hmiOverwriteAlways) = Sí: El registro de receta se sobrescribe sin consulta previa.
2 (hmiOverwriteWithPrompting) = Previa confirmación: El registro de receta se sobrescribe
tras haberse confirmado la consulta de seguridad.
Emitir aviso de estado
Establece si se debe visualizar un aviso de estado una vez concluida la transferencia.
0 (hmiOff) = Off: No emitir ningún aviso de estado.
1 (hmiOn) = On: Emitir un aviso de estado.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1687

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Estado de procesamiento
Indica el estado de procesamiento de la función de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta función:
2 = La función de sistema se está ejecutando actualmente.
4 = La función de sistema se ha ejecutado correctamente.
12 = La función de sistema no se ha ejecutado porque se ha producido un error.
Para el parámetro puede utilizarse una sola variable HMI.

Ejemplo de aplicación
Debe transferirse un registro del controlador al medio de almacenamiento del panel de
operador por medio de una tecla.
Indicaciones relativas a la configuración
Configure la función de sistema "LeerRegistroDelControlador" asociada al evento "Pulsar" de
la tecla deseada. Transfiera los parámetros siguientes:
Número/nombre de receta = 1
Número/nombre de registro = 1
Sobrescribir = 1
Emitir aviso de estado = 1
Si lo desea, puede indicar variables en lugar de constantes. Dependiendo de la configuración,
el operador puede introducir los valores deseados en los campos E/S, o bien leerlos del
controlador. De este modo, el operador puede determinar qué registro de receta se transferirá
del controlador.
Proceso en el panel de operador
La función de sistema se ejecuta tras pulsar la tecla. Las constantes o variables se evalúan y
el primer registro de la receta 1 se transfiere del controlador al medio de almacenamiento del
panel de operador. Si dicho registro ya existe, se sobrescribe.
Después de la transferencia se visualiza un aviso de sistema.

LeerNombreDelRegistro
Descripción
Escribe los nombres de la receta indicada y del registro de receta indicado en las variables
especificadas.
Nota
Si la receta o el registro de receta no existe, se escriben comodines ("###") en las variables.

1688

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Nota
Como variables, solo se soportan variables internas o externas.

Utilización en la lista de funciones
LeerNombreDelRegistro (Número de receta, Número de registro, Nombre de receta, Nombre
de registro, Estado de procesamiento)

Utilización en funciones definidas por el usuario
GetDataRecordName Recipe_number, Data_record_number, Recipe_name,
Data_record_name, Processing_status
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Número de receta
Número de la receta cuyo nombre se escribe en la variable indicada.
Número de registro
Número del registro de receta cuyo nombre se escribe en la variable indicada.
Nombre de receta
Variable en la que se escribe el nombre de la receta. La variable debe ser del tipo STRING.
Nombre de registro
Variable en la que se escribe el nombre del registro de receta. La variable debe ser del tipo
STRING.
Estado de procesamiento
Indica el estado de procesamiento de la función de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta función:
2 = La función de sistema se está ejecutando actualmente.
4 = La función de sistema se ha ejecutado correctamente.
12 = La función de sistema no se ha ejecutado porque se ha producido un error.
Para el parámetro puede utilizarse una sola variable HMI.

Ejemplo de aplicación
Los nombres de la receta indicada y del registro de receta indicado se visualizan en el panel
de operador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1689

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Configure las variables siguientes:
● "RecNumber" del tipo INTEGER
● "RecDataNumber" del tipo INTEGER
● "RecName" del tipo STRING
● "RecDataName" del tipo STRING
Configure un visor de recetas con las variables "RecNumber" para el número de receta y
"RecDataNumber" para el número de registro.
Asocie la función de sistema "LeerNombreDelRegistro" al evento "Pulsar" de un botón y
transfiera los parámetros siguientes:
● Número de receta: RecNumber
● Número de registro: RecDataNumber
● Nombre de receta: RecName
● Nombre de registro: RecDataName
Configure dos campos de salida y asócielos a las variables "RecName" y "RecDataName".
Seleccione un número de receta y un número de registro en el visor de recetas. La función de
sistema se ejecutará en cuanto se pulse el botón y los nombres de la receta y del registro de
receta se visualizarán en los dos campos de salida.

LeerVariablesDeRegistroDelControlador
Descripción
Transfiere a las variables de receta los valores del registro de receta cargado en el
controlador.
Utilice esta función de sistema p. ej. en el modo de aprendizaje (Teach-In) en una máquina.

Utilización en la lista de funciones
LeerVariablesDeRegistroDelControlador (Número/Nombre de receta, Estado de
procesamiento)

Utilización en funciones definidas por el usuario
GetDataRecordTagsFromPLC Recipe_number_or_name, Processing_status
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Número/nombre de receta
Número o nombre del registro de receta cuyos valores se escriben del controlador a la variable.

1690

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Estado de procesamiento
Indica el estado de procesamiento de la función de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta función:
2 = La función de sistema se está ejecutando actualmente.
4 = La función de sistema se ha ejecutado correctamente.
12 = La función de sistema no se ha ejecutado porque se ha producido un error.
Para el parámetro puede utilizarse una sola variable HMI.

BorrarRegistro
Descripción
Borra un registro de receta.
Es posible borrar varios registros en una o varias recetas.

Utilización en la lista de funciones
BorrarRegistro (Número/nombre de receta, Número/nombre de registro, Confirmación, Emitir
aviso de estado, Estado de procesamiento)

Utilización en funciones definidas por el usuario
ClearDataRecord
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Número/nombre de receta
Número o nombre de la receta de la que se deben borrar los registros. Indique "0" si desea
borrar registros de todas las recetas disponibles.
Número/nombre de registro
Número o nombre del registro de receta que se borrará. Indique "0" si desea borrar todos los
registros de receta.
Confirmación
Determina si el operador debe confirmar el borrado:
0 (hmiOff) = Off: El proceso de borrado se inicia sin confirmación.
1 (hmiOn) = On: El inicio del proceso de borrado debe confirmarse.
Emitir aviso de estado
Determina si se debe emitir un aviso de estado una vez concluido el borrado:

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1691

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
0 (hmiOff) = Off: No emitir ningún aviso de estado.
1 (hmiOn) = On: Emitir un aviso de estado.
Estado de procesamiento
Indica el estado de procesamiento de la función de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta función:
2 = La función de sistema se está ejecutando actualmente.
4 = La función de sistema se ha ejecutado correctamente.
12 = La función de sistema no se ha ejecutado porque se ha producido un error.
Para el parámetro puede utilizarse una sola variable HMI.

BorrarRegistroMemoria
Descripción
Borra todos los registros de receta del medio de almacenamiento indicado.

Utilización en la lista de funciones
BorrarRegistroMemoria (Ubicación, Tras confirmar, Emitir aviso de estado, Estado de
procesamiento)

Utilización en funciones definidas por el usuario
ClearDataRecordMemory Storage_location, Confirmation, Output_status_message,
Processing_status
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Ubicación
Determina la ubicación:
0 (hmiFlashMemory) = Memoria flash: Memoria flash interna del panel de operador
1 (hmiStorageCard) = Storage Card
2 (hmiStorageCard2) = Storage Card 2
3 (hmiStorageCard3) = Storage Card MultiMediaCard
4 (hmiStorageCard4) = Storage Card USB
Tras confirmar
Determina si el operador debe confirmar el borrado:
0 (hmiOff) = Off: El proceso de borrado se inicia sin confirmación.

1692

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
1 (hmiOn) = On: El inicio del proceso de borrado debe confirmarse.
Emitir aviso de estado
Determina si se debe emitir un aviso de estado una vez concluido el borrado:
0 (hmiOff) = Off: No emitir ningún aviso de estado.
1 (hmiOn) = On: Emitir un aviso de estado.
Estado de procesamiento
Indica el estado de procesamiento de la función de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta función:
2 = La función de sistema se está ejecutando actualmente.
4 = La función de sistema se ha ejecutado correctamente.
12 = La función de sistema no se ha ejecutado porque se ha producido un error.
Para el parámetro puede utilizarse una sola variable HMI.

VisorDeRecetasRegistroNuevo
Descripción
Crea un registro nuevo en el visor de recetas visualizado.

Utilización en la lista de funciones
VisorDeRecetasRegistroNuevo (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor de recetas en el que se debe crear el nuevo registro.

VisorDeRecetasLeerRegistroDelControlador
Descripción
Transfiere el registro cargado en el controlador al panel de operador y lo muestra en el visor de
recetas.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1693

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en la lista de funciones
VisorDeRecetasLeerRegistroDelControlador (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor de recetas en el que se visualiza el registro transferido desde el controlador.

VisorDeRecetasBorrarRegistro
Descripción
Borra el registro que se visualiza en el visor de recetas.

Utilización en la lista de funciones
VisorDeRecetasBorrarRegistro (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor de recetas en el que se debe borrar el registro visualizado.

VisorDeRecetasMenú
Descripción
Abre el menú del visor de recetas simple indicado.
Utilice esta función de sistema sólo en un visor de recetas simple.

Utilización en la lista de funciones
VisorDeRecetasMenú (Objeto de imagen)

1694

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor de recetas en el que se debe abrir el menú.

VisorDeRecetasAbrir
Descripción
Muestra los valores de registro en el visor de recetas indicado o cambia al siguiente campo de
selección. Esta función de sistema no tiene ningún efecto si el campo de selección de los
valores del registro de receta se muestra en el panel de operador.
Orden de manejo de los campos de selección en runtime:
● Nombre de receta
● Nombre de registro
● Valores de registros de recetas
Utilice esta función de sistema si ha configurado el visor de recetas simple. En el visor de
recetas simple se muestra en cada caso un solo campo de selección en el panel de operador.
Utilice la función de sistema "VisorDeRecetasAtrás" para ver el campo de selección anterior.

Utilización en la lista de funciones
VisorDeRecetasAbrir (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor de recetas en el que se debe ejecutar el comando.

Consulte también
VisorDeRecetasAtrás (Página 1698)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1695

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

VisorDeRecetasEscribirRegistroEnControlador
Descripción
Transfiere al controlador el registro de receta visualizado actualmente en el visor de recetas.

Utilización en la lista de funciones
VisorDeRecetasEscribirRegistroEnControlador (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor de recetas desde el que se debe transferir el registro al controlador
conectado.

VisorDeRecetasGuardarRegistro
Descripción
Guarda el registro de receta visualizado actualmente en el visor de recetas.

Utilización en la lista de funciones
VisorDeRecetasGuardarRegistro (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor de recetas en el que se debe guardar el registro.

VisorDeRecetasGuardarRegistroComo
Descripción
Guarda con otro nombre el registro que se visualiza en el visor de recetas.

1696

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en la lista de funciones
VisorDeRecetasGuardarRegistroComo (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Guarda con otro nombre o número el registro que se visualiza en el visor de recetas.

VisorDeRecetasSincronizarRegistroConVariables
Descripción
Sincroniza los valores del registro que se visualiza en el visor de recetas con las variables de
receta correspondientes. Utilice esta función de sistema sólo en el visor de recetas avanzado.
Durante la sincronización, todos los valores del registro se escriben en las variables de receta
correspondientes.

Utilización en la lista de funciones
VisorDeRecetasSincronizarRegistroConVariables (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del visor de recetas en el que se deben sincronizar los valores con las variables
correspondientes.

VisorDeRecetasCambiarNombreDeRegistro
Descripción
Cambia el nombre del registro seleccionado en el visor de recetas indicado.

Utilización en la lista de funciones
VisorDeRecetasCambiarNombreDeRegistro (Objeto de imagen)
Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1697

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor de recetas en el que se debe cambiar el nombre del registro.

VisorDeRecetasMostrarTextoDeAyuda
Descripción
Muestra el tooltip configurado para el visor de recetas indicado.

Utilización en la lista de funciones
VisorDeRecetasMostrarTextoDeAyuda (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor de recetas cuyo tooltip configurado se visualiza.

VisorDeRecetasAtrás
Descripción
Vuelve al campo de selección anterior en el visor de recetas indicado.
Esta función de sistema no tiene ningún efecto si el campo de selección de la receta se
muestra en el panel de operador. Orden de manejo de los campos de selección en runtime:
● Nombre de receta
● Nombre de registro
● Valores de registros de recetas
Utilice esta función de sistema si ha configurado el visor de recetas simple. En el visor de
recetas simple se muestra en cada caso un solo campo de selección en el panel de operador.
Utilice la función de sistema "VisorDeRecetasAbrir" para ver los valores del registro de receta
o el siguiente campo de selección.

1698

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en la lista de funciones
VisorDeRecetasAtrás (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del visor de recetas en el que se debe ejecutar el comando.

EscribirRegistroEnControlador
Descripción
Transfiere el registro de receta indicado directamente desde el soporte de datos del panel de
operador al controlador conectado con el panel de operador.
Nota
A este efecto no es necesario que los valores del registro de receta se visualicen en el panel
de operador.

Utilización en la lista de funciones
EscribirRegistroEnControlador (Número/nombre de receta, Número/nombre de registro,
Emitir aviso de estado, Estado de procesamiento)

Utilización en funciones definidas por el usuario
SetDataRecordToPLC Recipe_number_or_name, Data_record_number_or_name,
Output_status_message, Processing_status
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Número/nombre de receta
Número o nombre de la receta desde la que se debe transferir un registro al controlador.
Número/nombre de registro
Número o nombre del registro de receta que se debe transferir al controlador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1699

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Emitir aviso de estado
Establece si se debe visualizar un aviso de estado una vez concluida la transferencia.
0 (hmiOff) = Off: No emitir ningún aviso de estado.
1 (hmiOn) = On: Emitir un aviso de estado.
Estado de procesamiento
Indica el estado de procesamiento de la función de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta función:
2 = La función de sistema se está ejecutando actualmente.
4 = La función de sistema se ha ejecutado correctamente.
12 = La función de sistema no se ha ejecutado porque se ha producido un error.
Para el parámetro puede utilizarse una sola variable HMI.

EscribirVariableDeRegistroEnControlador
Descripción
Transfiere los valores de las variables de receta al controlador. Las variables de receta
contienen los valores del registro que se visualiza en el panel de operador.

Utilización en la lista de funciones
EscribirVariableDeRegistroEnControlador (Número/nombre de receta, Estado de
procesamiento)

Utilización en funciones definidas por el usuario
SetDataRecordTagsToPLC Recipe_ number_or_name, Processing_status
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Número/nombre de receta
Número o nombre de la receta desde la que se debe transferir un registro al controlador.
Estado de procesamiento
Indica el estado de procesamiento de la función de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta función:
2 = La función de sistema se está ejecutando actualmente.
4 = La función de sistema se ha ejecutado correctamente.
12 = La función de sistema no se ha ejecutado porque se ha producido un error.

1700

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Para el parámetro puede utilizarse una sola variable HMI.

DefinirEstadoVariableDeReceta
Descripción
Modifica el estado de las variables de receta de "online" a "offline" y viceversa.
Utilice esta función de sistema si p.ej. desea realizar un ajuste fino de los valores de los
registros de receta al poner en marcha una máquina.

Utilización en la lista de funciones
DefinirEstadoVariableDeReceta (Número/nombre de receta, Estado, Emitir aviso de estado,
Estado de procesamiento)

Utilización en funciones definidas por el usuario
SetRecipeTags Recipe_number_or_name, Status, Output_status_message,
Processing_status
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Número/nombre de receta
Número o nombre de la receta en la que está almacenado el registro.
Estado
Determina el estado de las variables de la receta:
0 (hmiOnline) = Online: Los cambios de valores en las variables de receta se transfieren de
inmediato al controlador conectado con el panel de operador.
1 (hmiOffline) = Offline: Los cambios de valores en las variables de la receta se transfieren al
controlador conectado con el panel de operador inmediatamente después de ejecutar p.ej. la
función de sistema "EscribirVariablesDeRegistroEnControlador".
Emitir aviso de estado
Determina si se debe visualizar un aviso de estado después de guardar.
0 (hmiOff) = Off: No emitir ningún aviso de estado.
1 (hmiOn) = On: Emitir un aviso de estado.
Estado de procesamiento
Indica el estado de procesamiento de la función de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta función:
2 = La función de sistema se está ejecutando actualmente.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1701

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
4 = La función de sistema se ha ejecutado correctamente.
12 = La función de sistema no se ha ejecutado porque se ha producido un error.
Para el parámetro puede utilizarse una sola variable HMI.

GuardarRegistro
Descripción
Guarda los valores actuales de las variables de receta como registro en el soporte de memoria
del panel de operador.
Utilice esta función de sistema por ejemplo para guardar un registro de receta en la imagen de
recetas.

Utilización en la lista de funciones
GuardarRegistro (Número/nombre de receta, Número/nombre de registro, Sobrescribir, Emitir
aviso de estado, Estado de procesamiento)

Utilización en funciones definidas por el usuario
SaveDataRecord Recipe_number_or_name, Data_record_number_or_name, Overwrite,
Output_status_message, Processing_status
Puede utilizarse siempre que el panel configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Número/nombre de receta
Número o nombre de la receta en la que se deben almacenar los registros.
Número/nombre de registro
Número o nombre del registro de la receta que se almacena. Si en la receta no existe ningún
registro con este número o nombre, se creará un nuevo registro independientemente del valor
del parámetro "Sobrescribir".
Sobrescribir
Determina si se debe sobrescribir un registro de receta existente.
0 (hmiOverwriteForbidden) = No: El registro de receta no se sobrescribirá ni tampoco se
guardará.
1 (hmiOverwriteAlways) = Sí: El registro de receta se sobrescribirá sin consulta previa.
2 (hmiOverwriteWithConfirmation) = Previa confirmación: El registro de receta se sobrescribirá
tras haberse confirmado la consulta de seguridad.

1702

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Emitir aviso de estado
Determina si se debe visualizar un aviso de estado después de guardar.
0 (hmiOff) = Off: No emitir ningún aviso de estado.
1 (hmiOn) = On: Emitir un aviso de estado.
Estado de procesamiento
Indica el estado de procesamiento de la función de sistema. Utilice el valor de retorno p. ej.,
para ejecutar otras funciones de sistema solo tras haber ejecutado correctamente esta función:
2 = La función de sistema se está ejecutando actualmente.
4 = La función de sistema se ha ejecutado correctamente.
12 = La función de sistema no se ha ejecutado porque se ha producido un error.
Para el parámetro puede utilizarse una sola variable HMI.

Sistema
ActivarPantallaDeLimpieza
Descripción
Activa la pantalla de limpieza en el panel de operador. La pantalla del panel de operador se
desactiva por el periodo indicado.
Mientras está desactivada la pantalla del panel de operador, podrá limpiarla sin activar
accidentalmente funciones de la pantalla táctil.

Utilización en la lista de funciones
ActivarPantallaDeLimpieza (Período)

Utilización en scripts de usuario
--

Parámetros
Período
Período durante el que está desactivada la pantalla. El tiempo restante se indica mediante una
barra de progreso.
Rango de valores en segundos (de 10 a 300).
Nota
La función de sistema ActivarPantallaDeLimpieza no puede ser simulada.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1703

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Consulte también
CerrarSesión (Página 1597)

AbrirExploradorDeArchivos
Descripción
Abre el cuadro de diálogo de un explorador de archivos.
Dependiendo del modo, el usuario puede seleccionar un archivo o una carpeta.

Utilización en la lista de funciones
AbrirExploradorDeArchivos (Máscara, Carpeta de inicio, Archivo, Navegación atrás,
Navegación adelante, Nueva carpeta, Ruta, Estado)

Utilización en scripts de usuario
-

Parámetros
Máscara
Define la máscara para filtrar los archivos mostrados. Este parámetro solamente se evalúa en
el modo "Archivo". Los distintos criterios de filtro se deben separar con ;. Ejemplo: *.htm;*.html
Carpeta de inicio
Define la carpeta con la que se inicia el diálogo de selección de archivos.
Archivo
Define el modo en el que se abre el diálogo:
0 = modo para buscar una carpeta
1 = modo para buscar un archivo
Navegación atrás
Define si el botón "Atrás" se puede manejar. Este botón permite una navegación sencilla a la
última carpeta visitada.
Navegación adelante
Define si el botón "Adelante" se puede manejar. Este botón permite una navegación sencilla
a la carpeta de orden superior.

1704

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Nueva carpeta
Define si el botón para crear una nueva carpeta se puede manejar.
Ruta
Contiene, tras cerrar el diálogo, la ruta de la última carpeta visitada.
Estado
Proporciona información sobre cómo se cerró el diálogo.
-1 = el diálogo se ha cancelado.
0 = el diálogo se ha cerrado con "Aceptar".

AbrirAdministradorDeTareas
Descripción
Muestra el administrador de tareas.
El administrador de tareas permite cambiar a otras aplicaciones abiertas en el panel de
operador.
Nota
El aspecto del administrador de tareas depende del sistema operativo instalado.

Utilización en la lista de funciones
AbrirAdministradorDeTareas

Utilización en funciones definidas por el usuario
OpenTaskManager
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del dispositivo".

Parámetros
--

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1705

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Teclado
AbrirTecladoDePantalla
Descripción
Muestra u oculta el teclado de pantalla.
El teclado de pantalla se mantiene abierto hasta que se cierra expresamente. De este modo
también es posible utilizarlo en otras aplicaciones.

Utilización en la lista de funciones
AbrirTecladoDePantalla (Representación)

Utilización en funciones definidas por el usuario
OpenScreenKeyboard Display_mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Representación
Determina si la ventana con el teclado de pantalla se abre minimizada o maximizada:
0 (hmiScreenKeyboardMinimized) = Minimizada
1 (hmiScreenKeyboardMaximized) = Maximizada

Manejo del teclado para objetos de imagen
ObjetoDeImagenCursorAbajo
Descripción
Hace que el cursor se desplace por líneas hacia abajo en la tabla del objeto de imagen
indicado.
Esta función de sistema se puede utilizar con los objetos de imagen indicados a continuación:
● Visor de usuarios
● Visor de avisos
● Visor de recetas
● Visor de parte de programa NC
● Visor de código PLC

1706

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en la lista de funciones
ObjetoDeImagenCursorAbajo (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del objeto de imagen en el que se ejecuta la función de la tecla.

ObjetoDeImagenCursorArriba
Descripción
Hace que el cursor se desplace por líneas hacia arriba en la tabla del objeto de imagen
indicado.
Esta función de sistema se puede utilizar con los objetos de imagen indicados a continuación:
● Visor de usuarios
● Visor de avisos
● Visor de recetas
● Visor de parte de programa NC
● Visor de código PLC

Utilización en la lista de funciones
ObjetoDeImagenCursorArriba (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del objeto de imagen en el que se ejecuta la función de la tecla.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1707

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

ObjetoDeImagenCursorDerecha
Descripción
Hace que el cursor se desplace por líneas hacia la derecha en el objeto de imagen indicado.

Utilización en la lista de funciones
ObjetoDeImagenCursorIzquierda (Objeto de imagen)

Utilización en scripts de usuario
-

Parámetros
Objeto de imagen
Nombre del objeto de imagen en el que se ejecuta el comando.

ObjetoDeImagenAvanzarPágina
Descripción
Hace que el cursor se desplace por páginas hacia abajo en la tabla del objeto de imagen
indicado.
Esta función de sistema se puede utilizar con los objetos de imagen indicados a continuación:
● Visor de usuarios
● Visor de avisos
● Visor de recetas
● Visor de parte de programa NC

Utilización en la lista de funciones
ObjetoDeImagenAvanzarPágina (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del objeto de imagen en el que se ejecuta la función de la tecla.

1708

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

ObjetoDeImagenRetrocederPágina
Descripción
Hace que el cursor se desplace por páginas hacia arriba en la tabla del objeto de imagen
indicado.
Esta función de sistema se puede utilizar con los objetos de imagen indicados a continuación:
● Visor de usuarios
● Visor de avisos
● Visor de recetas
● Visor de parte de programa NC

Utilización en la lista de funciones
ObjetoDeImagenRetrocederPágina (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del objeto de imagen en el que se ejecuta la función de la tecla.

ObjetoImagenCursorIzquierda
Descripción
Hace que el cursor se desplace por líneas hacia la izquierda en el objeto de imagen indicado.

Utilización en la lista de funciones
ObjetoImagenCursorIzquierda (Objeto de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Objeto de imagen
Nombre del objeto de imagen en el que se ejecuta el comando.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1709

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

AvanzarPágina
Descripción
Ejecuta la función de tecla <Av Pág> en el panel de operador.
Esta función de sistema sólo se puede utilizar para teclas de función.

Utilización en la lista de funciones
AvanzarPágina

Utilización en funciones definidas por el usuario
PageDown
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del dispositivo".

Parámetros
-

RetrocederPágina
Descripción
Ejecuta la función de tecla <RePág> en el panel de operador.
Esta función de sistema sólo se puede utilizar para teclas de función y para tareas con
disparador temporal.

Utilización en la lista de funciones
RetrocederPágina

Utilización en funciones definidas por el usuario
PageUp
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del dispositivo".

Parámetros
-

1710

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

IrAInicio
Descripción
Ejecuta la función de tecla <Inicio> en el panel de operador.
Utilice esta función de sistema si la versión estándar del panel de operador no dispone de esta
funcionalidad.
Esta función de sistema sólo se puede utilizar para teclas de función.

Utilización en la lista de funciones
IrAInicio

Utilización en funciones definidas por el usuario
GoToHome
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del dispositivo".

Parámetros
--

IrAFin
Descripción
Ejecuta la función de tecla <Fin> en el panel de operador.
Utilice esta función de sistema si la versión estándar del panel de operador no dispone de esta
funcionalidad.
Esta función de sistema sólo se puede utilizar para teclas de función.

Utilización en la lista de funciones
IrAFin

Utilización en funciones definidas por el usuario
GoToEnd
Utilizable, siempre que el dispositivo configurado soporte funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del dispositivo".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1711

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
--

MostrarBloqueEnTIAPortal
Descripción
Cambia del visor de avisos o de la vista general de GRAPH al código afectado del proyecto
seleccionado en el sistema de ingeniería. El cambio del visor de avisos al proyecto en el TIA
Portal permite seguir analizando el código del programa, p. ej., para buscar un contacto que
falta en el enclavamiento.
Si desea utilizar la función de sistema para pasar al TIA Portal dispone de las siguientes
opciones:
● Desde el visor de avisos
Seleccione un aviso y salte al lugar correspondiente en el TIA Portal.
La función de sistema se puede configurar en un objeto de imagen, p. ej. en un botón. Al
hacer clic en el botón, el sistema tendrá en cuenta el contexto necesario y, tras saltar al
Engineering System, se mostrará automáticamente el punto en cuestión del código.
● Desde la vista general de GRAPH
Seleccione el visor de etapas de la vista de GRAPH y salte al bloque de función
correspondiente en el ingeniería.
Para poder saltar al TIA Portal, la función de sistema debe estar configurada en la
correspondiente vista general de GRAPH. La función de sistema se configura en el evento
"Hacer clic" de la vista general de GRAPH. Al hacer clic en el visor de etapas de la vista
general de GRAPH se muestra automáticamente el lugar correspondiente en el código del
programa.
Con el parámetro Protección contra escritura se establece el nivel de permiso con el que se
podrá activar el cambio al Engineering System.

Nota
Restricciones para saltar al TIA Portal
El sistema de ingeniería no se abre en los casos siguientes:
● El proyecto que debe abrirse contiene modificaciones que no se han guardado todavía.
● WinCC Runtime Advanced se ejecuta en modo de simulación y se modifica el modo (p. ej.
del modo de escritura al de lectura)

1712

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Nota
Salto al mismo proyecto desde la simulación
Se ha abierto un proyecto en el TIA Portal y se he iniciado una simulación. Si desde este
proyecto se desea abrir ahora, usando la función de sistema MostrarBloqueEnTIAPortal,el
mismo proyecto en modo de lectura, entonces es necesario cerrar previamente la simulación.
No se soporta la posibilidad de saltar, desde la simulación, al mismo proyecto en modo de
lectura.
Solución: Inicie runtime y abra de nuevo el proyecto en modo de lectura.

Nota
Utilización con SINUMERIK y aparatos FANUC
No se recomienda el uso de la función de sistema "MostrarBloqueEnTIAPortal" junto con el
paquete opcional "SINUMERIK", ya que en interacción con los controles SINUMERIK pueden
presentarse problemas de representación.

Utilización en la lista de funciones
MostrarBloqueEnTIAPortal (protección contra escritura, ruta del proyecto TIA Portal)

Utilización en funciones definidas por el usuario
-

Parámetros
Protección contra escritura
Determina si el proyecto se abrirá en modo de solo lectura.
TRUE (estándar): TIA Portal se abre en modo de lectura, y el usuario no puede realizar
cambios.
FALSE: TIA Portal se abre con permiso de lectura y escritura.
Como alternativa, utilice una variable HMI booleana para controlar este parámetro.
Ruta del proyecto en TIA Portal
Ruta y nombre del archivo de proyecto en TIA Portal al que se cambiará desde el visor de
avisos.

Consulte también
Funciones de sistema para Runtime Advanced (Página 1549)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1713

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

9.11.1.3

Funciones de sistema

Otras funciones
PararRuntime
Descripción
Sale del software runtime y, con ello, del proyecto que se está ejecutando en el panel de
operador.

Utilización en la lista de funciones
PararRuntime (Modo)

Utilización en funciones definidas por el usuario
StopRuntime Mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Modo
Determina si al finalizar el software runtime también se debe cerrar el sistema operativo.
0 (hmiStopRuntime) = Runtime: No cerrar el sistema operativo
1 (hmiStopRuntimeAndOperatingSystem) = Runtime y sistema operativo: Cerrar el sistema
operativo (no en Windows CE)

Ejemplo
El siguiente código de programa cierra Runtime y el sistema operativo.

{
//Stop runtime and shutdown
StopRuntime (hmiStopRuntimeAndOperationSystem);
}

El valor de retorno guardado puede procesarse en el código subsiguiente.

1714

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

ConsultarTexto
Descripción
Lee el registro de una lista de textos. El resultado depende del valor y del idioma de runtime
seleccionado. El resultado se guarda en una variable del tipo "String".

Utilización en la lista de funciones
Consultar texto (Texto de salida, Índice, Idioma, Lista de textos)

Utilización en funciones definidas por el usuario
LookupText Output_text, Index, Language, Text_list
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Texto de salida
Variable en la que se escribe el resultado.
Índice
Variable que determina el valor del registro de la lista.
Idioma
Determina en qué idioma de runtime se debe leer el registro de la lista.
● Idioma de runtime
Abreviatura de idioma conforme a la referencia VBScript, p. ej. "de-DE" para alemán
(Alemania) o "en-ES" para inglés (EE UU). La selección depende de los idiomas runtime
activados.
● Variable
Variable que contiene el idioma. El idioma de runtime se introduce en forma de valor
decimal del indicador de país, p. ej. 1031 para alemán estándar, 1033 para inglés de
EE UU. Encontrará más información al respecto en los conceptos básicos de VBScript bajo
el tema "Cuadro de ID de configuración regional (LCID)".
● Número entero
El número que corresponde al orden de los idiomas de runtime en el cambio de idioma.
La selección depende de los idiomas de runtime activados, p. ej., "0" para el idioma que
aparece al iniciar runtime por primera vez. Encontrará más información al respecto en el
apartado "Idiomas en runtime".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1715

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Lista de textos
Establece la lista de textos. El registro se lee de la lista de textos.

Consulte también
Dependencia del panel de operador (Página 1520)

Administración de usuarios
ExportarImportarAdministraciónDeUsuarios
Descripción
Exporta todos los usuarios de la administración de usuarios del proyecto activo en este
momento al archivo indicado, o bien importa los usuarios del archivo indicado al proyecto
activo en este momento.
En la administración de usuarios se guardan usuarios, sus contraseñas y permisos.
Durante la importación se sobrescriben todos los usuarios. Los usuarios importados son
válidos desde el primer momento.
Nota
En los paneles de operador con una versión de runtime anterior a V14 no se soporta la
exportación e importación de la administración de usuarios de V14.

Utilización en la lista de funciones
ExportarImportarAdministraciónDeUsuarios (Nombre de archivo, Dirección)

Utilización en funciones definidas por el usuario
ExportImportUserAdministration File_name, Direction
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

1716

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Nombre de archivo
Nombre del archivo que contiene las contraseñas o en el que se guardarán las contraseñas.
Introduzca también la ruta y la extensión del archivo (*.txt), p. ej. "C:\TEMP\Passwords.txt".
Nota
Si utiliza una tarjeta de memoria como ubicación, introduzca la ubicación del siguiente modo:
"\StorageCard\<Nombre de archivo>".
Dirección
Determina si las contraseñas se exportarán o importarán:
0 (hmiExport) = Exportación: Las contraseñas se exportan.
1 (hmiImport) = Importación: Las contraseñas se importan.

MostrarDiálogoInicioSesión
Descripción
Abre un cuadro de diálogo en el panel de operador con el que el usuario puede iniciar una
sesión en el panel de operador.

Utilización en la lista de funciones
MostrarDiálogoInicioSesión

Utilización en scripts de usuario
ShowLogonDialog
Utilizable, siempre que el dispositivo configurado soporte scripts de usuario. Encontrará más
información en "Funciones de sistema para Runtime Professional (Página 1554)".

Parámetros
--

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1717

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Cálculo
IncrementarVariable
Descripción
Suma el valor indicado al valor de la variable.
X=X+a
Nota
La función de sistema utiliza la misma variable como valor de entrada y como valor de salida.
Si utiliza esta función de sistema para convertir un valor, deberá utilizar una variable auxiliar.
A la variable auxiliar se le puede asignar un valor con la función de sistema "DefinirVariable".
Si se asocia la función de sistema a eventos de un aviso y la variable no se utiliza en la imagen
actual, no se garantiza que el valor real de la variable se utilice en el controlador. Ello se puede
mejorar activando el modo de adquisición "Cíclico continuo".

Utilización en la lista de funciones
IncrementarVariable (Variable, Valor)

Utilización en funciones definidas por el usuario
IncreaseTag Tag, Value
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información en "Funciones de sistema para Runtime Professional
(Página 1554)".

Parámetros
Variable
Variable a la que se debe agregar el valor indicado.
Valor
Valor que se suma.

1718

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente código de programa aumenta el valor de la variable varX la cantidad que indica la
variable value. El valor introducido se guarda en la variable old_value y se muestra junto con
el nuevo valor varX.

{
BYTE varX;
BYTE value;
//user input
...
BYTE old_value = varX;
//Increase tag
IncreaseTag(varX, value);
//print original value and function result
printf ("User input: %i\r\n, Result of function IncreaseTag: %i\r\n", old_value, varX);
...
}

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

InvertirEscalaLineal
Descripción
Asigna a la variable X un valor que se calcula a partir del valor de la variable Y indicada
mediante la función lineal X = (Y - b) / a.
Las variables X e Y no pueden ser idénticas. Esta función de sistema es la función inversa de
"EscalaLineal".
Nota
Las variables X e Y no pueden ser idénticas. Si desea convertir una variable en Sí misma, debe
utilizar una variable auxiliar
Con la función de sistema "DefinirVariable" se puede asignar a la variable auxiliar el valor de
la variable que se va convertir.

Utilización en la lista de funciones
InvertirEscalaLineal (X, Y, b, a)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1719

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en funciones definidas por el usuario
InverseLinearScaling X, Y, b, a
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
X
Variable a la que se asigna el valor calculado en la ecuación lineal.
Y
Variable cuyo valor se utiliza para el cálculo.
b
Valor que se va a restar.
a
Valor por el que se divide.

Ejemplo
El siguiente código de programa asigna un valor a la variable varX con la función
InverseLinearScaling.

{
BYTE
BYTE
BYTE
BYTE

varX;
Yvalue = 10;
bvalue = 3;
avalue = 4;

//Inverse linear scaling
InverseLinearScaling (varX, Yvalue, bvalue, avalue);
printf ("varX = %d\r\n, varX);
...
}

El valor de retorno guardado puede procesarse en el código subsiguiente.

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

1720

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

EscalaLineal
Descripción
Asigna a la variable Y un valor que se calcula a partir del valor de las variables X indicadas
mediante la función lineal Y = (a * X) + b.
La función inversa es la función de sistema "InvertirEscalaLineal".
Nota
Las variables X e Y no pueden ser idénticas. Si desea convertir una variable en Sí misma, debe
utilizar una variable auxiliar
Con la función de sistema "DefinirVariable" se puede asignar a la variable auxiliar el valor de
la variable que se va convertir.

Utilización en la lista de funciones
EscalaLineal (Y, a, X, b)

Utilización en funciones definidas por el usuario
LinearScaling Y, a, X, b
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Y
Variable a la que se asigna el valor calculado en la ecuación lineal.
a
Valor con el que se multiplica.
X
Variable cuyo valor se utiliza para el cálculo.
b
Valor que se suma.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1721

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente código de programa asigna con la función LinearScaling un valor a la variable Yvar.

{
BYTE
BYTE
BYTE
BYTE

Yvar;
Xvalue = 10;
bvalue = 3;
avalue = 4;

// linear scaling
LinearScaling ( Yvar, avalue, Xvalue, bvalue);
printf ("Yvar = %d\r\n, Yvar);
...
}

El valor de retorno guardado puede procesarse en el código subsiguiente.

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

DefinirVariable
Descripción
Asigna un valor nuevo a la variable indicada.
Nota
Dependiendo del tipo de variable, con esta función de sistema puede asignar cadenas de
caracteres y números.

Utilización en la lista de funciones
DefinirVariable (Variable, Valor)

Utilización en funciones definidas por el usuario
SetTag Tag, Value
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

1722

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Variable
Variable a la que se debe asignar el valor indicado.
Valor
Valor que se asigna a la variable indicada.
Nota
La función de sistema "DefinirVariable" se ejecuta únicamente tras establecer una conexión.

Ejemplo
El siguiente código de programa ajusta con la función SetTag el valor de las variables
gs_tag_bit a TRUE y guarda el valor de retorno en la variable ok.

{
BOOL ok;
BOOL bvalue;
//Set the tag to true
ok = SetTag("gs_tag_bit", TRUE);
//error handling
if(ok)
{
// succeeded
printf ( "Function has run through.\r\n" );
bvalue = GetTagBit("gs_tag_bit");
printf ("Value of gs_tag_bit: %d\r\n", bvalue);
}
else
{
// failed
printf ( "Error - function failed." );
}
...
}

El valor de retorno guardado puede procesarse en el código subsiguiente.

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1723

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

DefinirVariableVíaPropiedad
Descripción
Define un valor de variable por medio del valor de una propiedad de objeto. La modificación se
registra adicionalmente en el sistema de avisos.

Utilización en la lista de funciones
DefinirVariableVíaPropiedad (nombre de variable, nombre de imagen, objeto de imagen,
nombre de la propiedad, con o sin aviso de operador)

Utilización en funciones definidas por el usuario
SetTagByProperty Tag_name, Screen_name, Screen_object, Property_name,
With_or_without_operator_event
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información en "Funciones de sistema para Runtime Professional
(Página 1554)".

Parámetros
Nombre de variable
Nombre de la variable cuyo valor se define por medio de la propiedad de objeto.
Nombre de imagen
Nombre de la imagen en la que está contenido el objeto.
Objeto de imagen
Nombre del objeto cuya propiedad proporciona el valor de variable.
Nombre de la propiedad
Nombre de la propiedad que proporciona el valor de variable.
Con o sin aviso de operador
0 (hmiWithoutOperatorEvent) = Sin aviso de operador
1 (hmiWithOperatorEvent) = Con aviso de operador

1724

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente código de programa devuelve el valor del texto seleccionado al hacer clic en un
cuadro combinado.

{
char* rt_value;
SetTagByProperty (rt_value, screenName, objectName, "SelectedText",
hmiWithoutOperatorEvent);
...
}

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

DefinirVariableIndirectamente
Descripción
Escribe un valor en una variable direccionada indirectamente. La variable transferida como
parámetro de salida contiene el nombre de una segunda variable, cuyo valor es modificado por
la función. Mediante un aviso de operador se puede documentar la modificación en el sistema
de avisos.

Utilización en la lista de funciones
DefinirVariableIndirectamente (variable, valor, con o sin aviso de operador)

Utilización en funciones definidas por el usuario
SetTagIndirect Tag_name, Value, With_or_without_operator_event
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información en "Funciones de sistema para Runtime Professional
(Página 1554)".

Parámetros
Nombre de variable
Nombre de una variable de string que contiene el nombre de una variable cuyo valor debe
modificarse.
Valor
Valor que se debe escribir.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1725

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Con o sin aviso de operador
0 (hmiWithoutOperatorEvent) = Sin aviso de operador
1 (hmiWithOperatorEvent) = Con aviso de operador

Ejemplo
El siguiente código de programa escribe el valor "value" en la variable Tag3.

{
int value;
SetTag ("IndirectWrite", "Tag3");
SetTagIndirect ("IndirectWrite", "value", hmiWithoutOperatorEvent);
...
}

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

DefinirVariableIndirectamenteVíaPropiedad
Descripción
Escribe el valor de una propiedad de objeto en una variable direccionada indirectamente. La
variable transferida como parámetro de salida contiene el nombre de una segunda variable,
cuyo valor es modificado por la función. Mediante un aviso de operador se puede documentar
la modificación en el sistema de avisos.

Utilización en la lista de funciones
DefinirVariableIndirectamenteVíaPropiedad (Nombre de variable, Nombre de imagen, Objeto
de imagen, Nombre de la propiedad, Con o sin aviso de operador)

Utilización en funciones definidas por el usuario
SetTagIndirectByProperty Tag_name, Screen_name, Screen_object, Property_name,
With_or_without_operator_event
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información en "Funciones de sistema para Runtime Professional
(Página 1554)".

1726

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Nombre de variable
Nombre de una variable de string que contiene el nombre de una variable cuyo valor debe
modificarse.
Nombre de imagen
Nombre de la imagen en la que está contenido el objeto.
Objeto de imagen
Nombre del objeto cuya propiedad devuelve el valor.
Nombre de la propiedad
Nombre de la propiedad que devuelve el valor.
Con o sin aviso de operador
0 (hmiWithoutOperatorEvent) = Sin aviso de operador
1 (hmiWithOperatorEvent) = Con aviso de operador

Ejemplo
El siguiente código de programa escribe el valor de la propiedad de objeto "Color de fondo" en
la variable Tag2.

{
SetTag ("IndirectWrite", "Tag2");
SetTagIndirectByProperty ("IndirectWrite", screenName, objectName, "BackColor",
hmiWithoutOperatorEvent);
...
}

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

DefinirVariableIndirectaVíaVariableIndirecta
Descripción
Escribe el valor de una variable direccionada indirectamente en una variable direccionada
indirectamente. La variable transferida como parámetro de salida contiene el nombre de una
segunda variable, cuyo valor es modificado por la función. La variable transferida como
parámetro contiene el nombre de una segunda variable, cuyo valor se lee. Mediante un aviso
de operador se puede documentar la modificación en el sistema de avisos.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1727

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en la lista de funciones
DefinirVariableIndirectaVíaVariableIndirecta (Nombre de variable, Nombre de variable, Con o
sin aviso de operador)

Utilización en funciones definidas por el usuario
SetTagIndirectByTagIndirect Tag_name, Source_tag_name, With_or_without_operator_event
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información en "Funciones de sistema para Runtime Professional
(Página 1554)".

Parámetros
Nombre de variable
Nombre de una variable de string que contiene el nombre de una variable cuyo valor debe
modificarse.
Nombre de variable
Nombre de la variable indirecta que proporciona el valor de variable.
Con o sin aviso de operador
0 (hmiWithoutOperatorEvent) = Sin aviso de operador
1 (hmiWithOperatorEvent) = Con aviso de operador

Ejemplo
El siguiente código de programa escribe el valor de la variable "Tag4" en la variable "Tag2".

{
SetTag ("IndirectWrite", "Tag2");
SetTag ("IndirectRead", "Tag4");
SetTagIndirectByTagIndirect ("IndirectWrite", "IndirectRead");
...
}

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

1728

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

DefinirVariableVíaVariableIndirecta
Descripción
Escribe el valor de una variable direccionada indirectamente en una variable. La variable
transferida como parámetro contiene el nombre de una segunda variable, cuyo valor se lee.
Mediante un aviso de operador se puede documentar la modificación en el sistema de avisos.

Utilización en la lista de funciones
DefinirVariableVíaVariableIndirecta (nombre de variable, nombre de variable, con o sin aviso
de operador)

Utilización en funciones definidas por el usuario
SetTagByTagIndirect Tag_name, Source_tag_name, With_or_without_operator_event
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información en "Funciones de sistema para Runtime Professional
(Página 1554)".

Parámetros
Nombre de la variable
Nombre de la variable cuyo valor debe modificarse.
Nombre de variable
Nombre de una variable de string que contiene el nombre de una variable que devuelve el valor
de la variable.
Con o sin aviso de operador
0 (hmiWithoutOperatorEvent) = Sin aviso de operador
1 (hmiWithOperatorEvent) = Con aviso de operador

Ejemplo
El siguiente código de programa escribe el valor de la variable Tag4 en la variable Tag1.

{
SetTag ("IndirectRead", "Tag4");
SetTagByTagIndirect ("Tag1", "IndirectRead", hmiWithoutOperatorEvent);
...
}

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1729

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

DefinirVariableConAvisoDeOperador
Descripción
Define el valor de una variable. La modificación se registra adicionalmente en el sistema de
avisos.

Utilización en la lista de funciones
DefinirVariableConAvisoDeOperador (nombre de la variable, valor)

Utilización en funciones definidas por el usuario
SetTagWithOperatorEvent Tag_name, Value
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información en "Funciones de sistema para Runtime Professional
(Página 1554)".

Parámetros
Nombre de la variable
Nombre de la variable cuyo valor se define.
Valor
El valor que se escribe la variable.

Ejemplo
El siguiente código de programa transfiere el valor de la variable "value" a la variable "result"
al hacer clic en cualquier tecla.

'Programming language: VBS
SetTagWithOperatorEvent result, value
...

//Programming language: C
{
SetTagWithOperatorEvent ("result", "value");
...
}

1730

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

ReducirVariable
Descripción
Resta el valor indicado del valor de la variable.
X=X-a
Nota
La función de sistema utiliza la misma variable como valor de entrada y como valor de salida.
Si utiliza esta función de sistema para convertir un valor, deberá utilizar una variable auxiliar.
A la variable auxiliar se le puede asignar un valor con la función de sistema "DefinirVariable".
Si se asocia la función de sistema a eventos de un aviso y la variable no se utiliza en la imagen
actual, no se garantiza que el valor real de la variable se utilice en el controlador. Ello se puede
mejorar activando el modo de adquisición "Cíclico continuo".

Utilización en la lista de funciones
DecrementarVariable (Variable, Valor)

Utilización en funciones definidas por el usuario
DecreaseTag Tag, Value
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información en "Funciones de sistema para Runtime Professional
(Página 1554)".

Parámetros
Variable
Variable de la que se debe restar el valor indicado.
Valor
Valor que se va a restar.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1731

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente código de programa reduce el valor de la variable varX la cantidad que indica la
variable value. El valor introducido se guarda en la variable old_value y se muestra junto con
el nuevo valor varX.

{
BYTE varX;
BYTE value;
//user input
...
BYTE old_value = varX;
//Decrease tag
DecreaseTag(varX, value);
//print original value and function result
printf ("User input: %i\r\n, Result of function DecreaseTag: %i\r\n", old_value, varX);
...
}

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

Imágenes
ActivarImagen
Descripción
Efectúa un cambio de imagen para visualizar la imagen indicada.
Para pasar de la imagen raíz al área permanente o viceversa, utilice la función del sistema
"ActivarImagenConNúmero".

Utilización en la lista de funciones
ActivarImagen (Nombre de imagen, Número del objeto)

Utilización en funciones definidas por el usuario
ActivateScreen Screen_name, Object_number
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del dispositivo".

1732

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Nombre de imagen
Nombre de la imagen a la que se cambia.
Número del objeto
Elemento de manejo que se resalta en la imagen indicada después del cambio de imagen. El
número del elemento de manejo se define mediante el orden de tabulación durante la
configuración.
Si indica "0":
● Si al ejecutarse la función de sistema está enfocada el área permanente, esta permanecerá
enfocada.
● En cambio, si está resaltada la imagen raíz, se destacará el primer elemento de manejo de
la imagen indicada.
Nota
Si la función de sistema "ActivarImagen" se asocia al evento "Margen alcanzado", sólo se
admite el valor 0 para el parámetro "Número del objeto". El objeto activo no se establece
conforme al número de objeto, sino según la coordenada X del objeto activo antes del
cambio de imagen.

Ejemplo
El siguiente código de programa activa la imagen "Screen_2" con la función ActivateScreen,
p. ej., al pulsar un botón.

Sub ActivateScreen_2()
'Userdefined code
'' i. e. when pressing a button
ActivateScreen "Screen_2",0

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

ActivarImagenEnVentanaActual
Descripción
Efectúa un cambio de imagen en la ventana actual para visualizar la imagen indicada.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1733

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en la lista de funciones
ActivarImagenEnVentanaDeImagenActual (nuevo nombre de imagen)

Utilización en funciones definidas por el usuario
-

Parámetros
Nuevo nombre de imagen
Nombre de la imagen que se muestra en la ventana de imagen.

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

ActivarImagenEnVentana
Descripción
Efectúa un cambio de imagen en la ventana indicada para visualizar la imagen indicada.

Utilización en la lista de funciones
ActivarImagenEnVentana (Nombre de imagen, Ventana de imagen, Nuevo nombre de imagen)

Utilización en funciones definidas por el usuario
ActivateScreenInScreenWindow Screen_name, Screen_window, New_screen_name
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información en "Funciones de sistema para Runtime Professional
(Página 1554)".

Parámetros
Nombre de imagen
Nombre de la imagen que se muestra en la ventana de imagen.
Ventana de imagen
Nombre de la ventana de imagen en la que se muestra la nueva imagen.
Nuevo nombre de imagen
Nombre de la nueva imagen que se muestra en la ventana de imagen.

1734

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente código del programa activa la imagen "Screen_2" con la función
ActivateScreenInScreenWindow al pulsar cualquier tecla.

{
// User defined code
// i.e. when pressing a button
ActivateScreenInScreenWindow (GetParentScreen(screenName),
GetParentScreenWindow(screenName), "Screen_2");
...
}

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

LeerImagenSuperior
Descripción
La función determina el nombre de la imagen superior a partir de una ruta dada.

Utilización en la lista de funciones
LeerImagenSuperior (imagen)

Utilización en funciones definidas por el usuario
GetParentScreen Screen
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del dispositivo".

Parámetros
Imagen
El parámetro transferido Imagen debe tener la misma estructura que las rutas de imagen en el
sistema gráfico:
<nombre de imagen>.<nombre de ventana de imagen>:<nombre de imagen>.<nombre de
ventana de imagen>:<nombre de imagen>...

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1735

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Si en la lista de funciones utiliza la lista de objetos para definir el parámetro, no se introducirá
la ruta, sino solo el nombre de la imagen.
Nota
El signo "." se utiliza para diferenciar el nombre de la imagen del objeto de imagen. El signo ":"
se utiliza para la estructura jerárquica. Por tanto, para los nombres se deben utilizar
exclusivamente los separadores "-" y "_".

Valor de retorno
Nombre de la imagen superior

Principio
En una imagen "Screen_1" hay una ventana de imagen "Screenwindow_1". En la ventana de
imagen está la imagen "Screen_2" con la ventana de imagen "Screenwindow_2" etc.
Ruta de la imagen: Screen_1.Screenwindow_1:Screen_2.Screenwindow_2:Screen_3
GetParentScreen devuelve:
● "Screen_2", cuando la función de sistema se llama en la imagen "Screen_3"
● "Screen_1", cuando la función de sistema se llama en la imagen "Screen_2"
GetParentScreenwindow devuelve:
● "Screenwindow_2", cuando la función de sistema se llama en la imagen "Screen_3"
● "Screenwindow_1", cuando la función de sistema se llama en la imagen "Screen_2"

LeerVentanaDeImagenSuperior
Descripción
La función determina el nombre de la ventana de imagen superior a partir de una ruta dada.

Utilización en la lista de funciones
LeerVentanaDeImagenSuperior (imagen)

Utilización en funciones definidas por el usuario
GetParentScreenWindow Screen
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del dispositivo".

1736

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Imagen
El parámetro transferido Imagen debe tener la misma estructura que las rutas de imagen en el
sistema gráfico:
<nombre de imagen>.<nombre de ventana de imagen>:<nombre de imagen>.<nombre de
ventana de imagen>:<nombre de imagen>...
Si en la lista de funciones utiliza la lista de objetos para definir el parámetro, no se introducirá
la ruta, sino solo el nombre de la imagen.
Nota
El signo "." se utiliza para diferenciar el nombre de la imagen del objeto de imagen. El signo ":"
se utiliza para la estructura jerárquica. Por tanto, para los nombres se deben utilizar
exclusivamente los separadores "-" y "_".

Valor de retorno
Nombre de la ventana de imagen superior

Principio
En una imagen "Screen_1" hay una ventana de imagen "Screenwindow_1". En la ventana de
imagen está la imagen "Screen_2" con la ventana de imagen "Screenwindow_2" etc.
Ruta de la imagen: Screen_1.Screenwindow_1:Screen_2.Screenwindow_2:Screen_3
GetParentScreen devuelve:
● "Screen_2", cuando la función de sistema se llama en la imagen "Screen_3"
● "Screen_1", cuando la función de sistema se llama en la imagen "Screen_2"
GetParentScreenwindow devuelve:
● "Screenwindow_2", cuando la función de sistema se llama en la imagen "Screen_3"
● "Screenwindow_1", cuando la función de sistema se llama en la imagen "Screen_2"

DefinirPropiedadVíaPropiedad
Descripción
Define el valor de una propiedad de objeto por medio de otra propiedad de objeto.

Utilización en la lista de funciones
DefinirPropiedadVíaPropiedad (Nombre de imagen, Objeto, Nombre de la propiedad, DestinoNombre de imagen, Destino-Objeto de imagen, Destino Nombre de propiedad)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1737

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en funciones definidas por el usuario
SetPropertyByProperty Screen_name, Screen_object, Property_name,
Source_screen_name, Source_screen_object, Source_property_name
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información en "Funciones de sistema para Runtime Professional
(Página 1554)".
Si desea definir una propiedad de una imagen mediante otra propiedad de imagen, los
parámetros "Objeto" y "Objeto de destino" deben estar vacíos. Utilice para ello, p. ej., la sintaxis
siguiente:
SetPropertyByProperty Screen_name, Property_name, Source_screen_name,
Source_property_name

Parámetros
Nombre de imagen
Nombre de la imagen en la que está contenido el objeto.
Objeto
Nombre del objeto del que se transfiere una propiedad al objeto de destino.
Nombre de la propiedad
Nombre de la propiedad cuyo valor se transfiere al objeto de destino.
Nombre de imagen de destino
Nombre de la imagen en el que está contenido el objeto de destino.
Destino-Objeto de imagen
Nombre del objeto de destino del que se modifica una propiedad.
Nombre de la propiedad de destino
Nombre de la propiedad que se modifica.

1738

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente código de programa transfiere con la función SetPropertyByProperty la propiedad
"ToolbarButtonClick" del objeto "Control_1" en la imagen de salida "Trend_1" a la propiedad
correspondiente de la imagen de destino"Trend_2".

'Programming language: VBS
'Name of source picture: Trend_1
'Name of target picture: Trend_2
'Name of the f(t) trend view control: Control_1
SetPropertyByProperty "Trend_1", "Control_1", "ToolbarButtonClick", "Trend_2",
"Control_2", "ToolbarButtonClick"
'User defined code
...

{
//Programming language: C
//Name of source picture: Trend_1
//Name of target picture: Trend_2
//Name of the f(t) trend view control: Control_1
SetPropertyByProperty ("Trend_1", "Control_1", "ToolbarButtonClick", "Trend_2",
"Control_2", "ToolbarButtonClick");
// User defined code
...
}

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

DefinirPropiedadVíaConstante
Descripción
Define el valor de una propiedad de objeto como cadena de caracteres.

Utilización en la lista de funciones
DefinirPropiedadVíaConstante (nombre de imagen, objeto de imagen, nombre de la
propiedad, valor)

Utilización en funciones definidas por el usuario
SetPropertyByConstant Screen_name, Screen_object, Property_name, Value

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1739

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información en "Funciones de sistema para Runtime Professional
(Página 1554)".
Si desea modificar la propiedad de una imagen, el parámetro "Objeto" debe estar vacío. Utilice
para ello, p. ej., la sintaxis siguiente:
SetPropertyByConstant Screen_name, Property_name, Value

Parámetros
Nombre de imagen
Nombre de la imagen en la que está contenido el objeto.
Objeto de imagen
Nombre del objeto cuya propiedad se modifica.
Nombre de la propiedad
Nombre de la propiedad que se modifica.
Valor
Valor que se asigna a la propiedad.

Ejemplo
El siguiente código de programa modifica la propiedad de un objeto con la función
SetPropertyByConstant: en la imagen "Trends" se ajusta la propiedad "ToolbarButtonClick"
del objeto incluido "Control_1" al valor 26.

'Programming language: VBS
'Name of the picture: Trends
'Name of the f(t) trend view control: Control_1
SetPropertyByConstant "Trends", "Control_1", "ToolbarButtonClick", "26"
'User defined code
...

1740

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

{
//Programming language: C
//Name of the picture: Trends
//Name of the f(t) trend view control: Control_1
SetPropertyByConstant ("Trends", "Control_1", "ToolbarButtonClick", "26");
// User defined code
...
}

Ejemplo: modificar una propiedad de imagen
El siguiente código de programa modifica una propiedad de una imagen con la función
SetPropertyByConstant: en la imagen "Trends" se ajusta la propiedad "Backcolor" al valor 255.

'Programming language: VBS
'Name of the picture: Trends
SetPropertyByConstant "Trends", "Trends", "Backcolor", "255"
'User defined code
...

{
//Programming language: C
//Name of the picture: Trends
SetPropertyByConstant ("Trends", "Trends", "Backcolor", "255");
// User defined code
...
}

Como alternativa, puede utilizar en lugar del segundo parámetro (Objeto) la contraseña NULL
o bien un string de espacios en blanco.

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

DefinirPropiedadVíaVariable
Descripción
Define el valor de una propiedad de objeto por medio de un valor de variable.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1741

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en la lista de funciones
DefinirPropiedadVíaVariable (nombre de imagen, objeto de imagen, nombre de la propiedad,
nombre de la variable)

Utilización en funciones definidas por el usuario
SetPropertyByTag Screen_name, Screen_object, Property_name, Tag_name
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información en "Funciones de sistema para Runtime Professional
(Página 1554)".
Si desea definir la propiedad de una imagen mediante un valor de variable, el parámetro
"Objeto" debe estar vacío. Utilice para ello, p. ej., la sintaxis siguiente:
SetPropertyByTag Screen_name, Property_name, Tag_name

Parámetros
Nombre de imagen
Nombre de la imagen en la que está contenido el objeto.
Objeto de imagen
Nombre del objeto cuya propiedad se activa por medio del valor de variable.
Nombre de la propiedad
Nombre de la propiedad que se activa por medio del valor de variable.
Nombre de variable
Nombre de la variable que contiene el valor de la propiedad.

Ejemplo
El siguiente código de programa modifica la propiedad de un objeto con la función
SetPropertyByTag: Al hacer clic sobre el objeto se transfieren el nombre del objeto y la imagen
en la que se encuentra el objeto. El título CaptionText de la ventana de imagen contiene el valor
de la variable HMI_value_1.

'Programming language: VBS
SetPropertyByTag screenName, objectName, "CaptionText", "HMI_value_1"
'User defined code
...

1742

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

{
//Programming language: C
SetPropertyByTag (screenName, objectName, "CaptionText", "HMI_value_1");
// User defined code
...
}

Ejemplo
El siguiente código de programa modifica la propiedad de un objeto con la función
SetPropertyByTag: en la imagen "Trends" se ajusta la propiedad "ToolbarButtonClick" del
objeto incluido "Control_1" al valor 26.

'Programming language: VBS
'Name of the picture: Trends
'Name of the f(t) trend view control: Control_1
SetPropertyByConstant "Trends", "Control_1", "ToolbarButtonClick", "26"
'User defined code
...

{
//Programming language: C
//Name of the picture: Trends
//Name of the f(t) trend view control: Control_1
SetPropertyByConstant ("Trends", "Control_1", "ToolbarButtonClick", "26");
// User defined code
...
}

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

DefinirPropiedadIndirectamenteVíaVariable
Descripción
Escribe el nombre de una variable direccionada indirectamente en una propiedad de objeto. La
variable transferida como parámetro contiene el nombre de una segunda variable, cuyo valor
se lee.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1743

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en la lista de funciones
DefinirPropiedadVíaVariableIndirectamente (nombre de imagen, objeto de imagen, nombre
de la propiedad, nombre de la variable)

Utilización en funciones definidas por el usuario
SetPropertyByTagIndirect Screen_name, Screen_object, Property_name, Tag_name
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información en "Funciones de sistema para Runtime Professional
(Página 1554)".
Si desea definir la propiedad de una imagen indirectamente mediante una variable, el
parámetro "Objeto" debe estar vacío. Utilice para ello, p. ej., la sintaxis siguiente:
SetPropertyByTagIndirect Screen_name, Property_name, Tag_name

Parámetros
Nombre de imagen
Nombre de la imagen en la que está contenido el objeto.
Objeto de imagen
Nombre del objeto cuya propiedad se debe modificar.
Nombre de la propiedad
Nombre de la propiedad que se debe modificar.
Nombre de variable
Nombre de la variable que, a su vez, contiene el nombre de la variable cuyo valor se lee.

Ejemplo
El siguiente código de programa modifica la propiedad de un objeto con la función
SetPropertyByTagIndirect:

'Programming language: VBS
SetPropertyByTagIndirect GetParentScreen(screenName), GetParentScreenWindow(screenName),
"ScreenName", "HMI_value_1"
'User defined code
...

1744

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

{
//Programming language: C
SetPropertyByTagIndirect (GetParentScreen(screenName), GetParentScreenWindow(screenName),
"ScreenName", "HMI_value_1");
// User defined code
...
}

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

DefinirPropiedadVentanaActualVíaPropiedad
Descripción
Define en la ventana actual el valor de una propiedad de objeto por medio de otra propiedad
de objeto.

Utilización en la lista de funciones
DefinirPropiedadVentanaActualVíaPropiedad (Nombre de la propiedad, Nombre de imagen,
Objeto de imagen, Nombre de la propiedad)

Utilización en funciones definidas por el usuario
-

Parámetros
Nombre de la propiedad
Nombre de la propiedad cuya propiedad debe transferirse al objeto de destino.
Nombre de imagen
Nombre de la imagen en la que está contenido el objeto de imagen.
Objeto de imagen
Nombre del objeto de imagen al que se transfiere la propiedad.
Nombre de la propiedad
Nombre de la propiedad que se modifica.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1745

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

DefinirPropiedadVentanaActual
Descripción
Define en la ventana actual el valor de una propiedad de objeto por medio de un valor de
variable.

Utilización en la lista de funciones
DefinirPropiedadVentanaActual (Nombre de la propiedad, valor)

Utilización en funciones definidas por el usuario
-

Parámetros
Nombre de la propiedad
Nombre de la propiedad que se activa por medio del valor de variable.
Valor
Nombre de la variable que contiene el valor de la propiedad.

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

DefinirPropiedadVentanaActualIndirectamenteVíaVariable
Descripción
Define en la ventana actual el valor de una propiedad de objeto por medio de una variable. La
variable contiene el nombre de variable que determina la propiedad del objeto.

Utilización en la lista de funciones
DefinirPropiedadVentanaActualVíaVariableIndirectamente(nombre de la propiedad de
destino, nombre de la variable)

Utilización en funciones definidas por el usuario
-

1746

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Nombre de la propiedad de destino
Nombre de la propiedad que se activa por medio del valor de variable.
Nombre de variable
Nombre de la variable que, a su vez, contiene el nombre de la variable que determina la
propiedad del objeto.

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

Procesamiento por bits
InvertirBit
Descripción
Invierte el valor de la variable indicada del tipo "Bool".
● Si la variable tiene el valor 1 (TRUE), se ajusta a 0 (FALSE).
● Si la variable tiene el valor 0 (FALSE), se ajusta a 1 (TRUE).

Utilización en la lista de funciones
InvertirBit (Variable)

Utilización en funciones definidas por el usuario
InvertBit Tag
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Variable
Variable cuyo bit se debe ajustar.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1747

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente código de programa invierte el valor de la variable booleana bStatus y muestra el
resultado junto con el valor original bSaved.

'Programming language: VB
Dim myTag
Dim myOutputField
Dim bValue, bSaved, strResult
Set myTag = SmartTags("bStatus")
Set myOutputField=HMIRuntime.Screens("MyScreen").ScreenItems("objTextField")
'Get current value
bValue=myTag.Value
'Save current value
bSaved=bValue
'Invert Bit
InvertBit myTag
bValue=myTag.Value
'Output result old and new value:
strResult="Old Value: "&bSaved &Chr(13)&"New Value: "&bValue
myOutputField.Text=strResult

//Programming language: C
{
BOOL bStatus = 0;
BOOL bSaved = bStatus;
//Invert variable
invertBit(bStatus);
//print current and saved value
printf ("Current value: %d\r\n, Saved value: %d\r\n",bStatus, bSaved);
...
}

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

1748

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

InvertirBitEnVariable
Descripción
Invierte un bit en la variable indicada:
● Si el bit de la variable tiene el valor 1 (TRUE), se ajusta a 0 (FALSE).
● Si el bit de la variable tiene el valor 0 (FALSE), se ajusta a 1 (TRUE).
Tras modificar el bit indicado, la función de sistema vuelve a transferir toda la variable al
controlador. No se comprueba si entretanto se han modificado otros bits en la variable. El
operador y el controlador sólo podrán acceder a la variable indicada en modo de lectura hasta
que la variable vuelva a transferirse al controlador.
Nota
No utilice esta función de sistema si el controlador admite variables BOOL. En su lugar utilice
la función de sistema "InvertirBit".

Utilización en la lista de funciones
InvertirBitEnVariable (Variable, Bit)

Utilización en funciones definidas por el usuario
InvertBitInTag Tag, Bit
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Variable
Variable en la que se debe ajustar el bit indicado.
Bit
Número del bit a ajustar.
Si utiliza esta función de sistema en un script de usuario, los bits de una variable se cuentan
de derecha a izquierda. El contaje comienza a partir de "0".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1749

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente código de programa invierte un bit en la posición indicada bitposition de la variable
bStatusWord y muestra el resultado junto con el valor original bSaved.

'Programming language: VB
Dim myTag
Dim myOutputField
Dim bValue, bSaved, bitposition, strResult
Set myTag = SmartTags("bStatusWord")
Set myOutputField=HMIRuntime.Screens("MyScreen").ScreenItems("objTextField")
'Get current value
bValue=myTag.Value
'Save current value
bSaved=bValue
'Invert Bit in position
bitposition=2
InvertBit myTag, bitposition
bValue=myTag.Value
'Output result old and new value:
strResult="Old Value: "&bSaved &Chr(13)&"New Value: "&bValue
myOutputField.Text=strResult

//Programming language: C
{
BYTE bStatusWord;
BYTE bsaved = bStatusWord;
BYTE bitposition = 2;
//Invert bit in bitposition
InvertBitInTag (bStatusWord, bitposition);
//print current and saved value
printf ("Current value: %d\r\n, Saved value: %d\r\n",bStatusWord, bsaved);
...
}

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

DesactivarBit
Descripción
Pone a 0 (FALSE) el valor de una variable del tipo "Bool".

1750

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Utilización en la lista de funciones
DesactivarBit (Variable)

Utilización en funciones definidas por el usuario
ResetBit Tag
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Variable
Variable del tipo BOOL que se ajusta a "0" (FALSE).

Ejemplo
El siguiente código de programa pone a 0 el valor de la variable booleana bStatus con la
función ResetBit y muestra el resultado junto con el valor original bSaved.

'Programming language: VB
Dim myTag
Dim myOutputField
Dim bValue, bSaved, strResult
Set myTag = SmartTags("bStatus")
Set myOutputField=HMIRuntime.Screens("MyScreen").ScreenItems("objTextField")
'Set value
bValue=1
myTag.Value=bValue
'Save current value
bSaved=bValue
'Reset Bit
ResetBit myTag
bValue=myTag.Value
'Output result old and new value:
strResult="Old Value: "&bSaved &Chr(13)&"New Value: "&bValue
myOutputField.Text=strResult

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1751

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

//Programming language: C
{
BOOL bStatus = 1;
BOOL bSaved = bStatus;
//Reset bit
ResetBit (bStatus);
//print current and saved value
printf ("Current value: %d\r\n, Saved value: %d\r\n",bStatus, bSaved);
...
}

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

DesactivarBitEnVariable
Descripción
Pone un bit a 0 (FALSE) en las variables indicadas.
Tras modificar el bit indicado, la función de sistema vuelve a transferir toda la variable al
controlador. No se comprueba si entretanto se han modificado otros bits en la variable. El
operador y el controlador sólo podrán acceder a la variable indicada en modo de lectura hasta
que la variable vuelva a transferirse al controlador.
Nota
No utilice esta función de sistema si el controlador admite variables BOOL. En su lugar utilice
la función de sistema "DesactivarBit".

Utilización en la lista de funciones
DesactivarBitEnVariable (Variable, Bit)

Utilización en funciones definidas por el usuario
ResetBitInTag Tag, Bit
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

1752

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Parámetros
Variable
Variable en la que un bit se ajusta a "0" (FALSE).
Bit
Número del bit que se ajusta a "0" (FALSE).
Si utiliza esta función de sistema en un script de usuario, los bits de la variable indicada se
contarán de derecha a izquierda, independientemente del controlador utilizado. El contaje
comienza a partir de "0".

Ejemplo
El siguiente código de programa pone a 0 un bit en la posición indicada bitposition de la
variable bStatusWord y muestra el resultado junto con el valor original bSaved.

'Programming language: VB
Dim myTag
Dim myOutputField
Dim bValue, bSaved, bitposition, strResult
Set myTag = SmartTags("bStatusWord")
Set myOutputField=HMIRuntime.Screens("MyScreen").ScreenItems("objTextField")
'Save current value
bValue=myTag.Value
bSaved=bValue
'Reset Bit
bitposition=2
ResetBitInTag myTag, bitposition
bValue=myTag.Value
'Output result old and new value:
strResult="Old Value: "&bSaved &Chr(13)&"New Value: "&bValue
myOutputField.Text=strResult

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1753

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

//Programming language: C
{
BYTE bSaved;
BYTE bitposition = 2;
bSaved = GetTagByte("bStatusWord");
//Reset bit in bitposition
ResetBitInTag ("bStatusWord", bitposition);
//print current and saved value
printf ("Current value: %d\r\n, Saved value: %d\r\n",GetTagByte("bStatusWord"), bSaved);
...
}

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

ActivarBit
Descripción
Ajusta a "1" (TRUE) el valor de una variable del tipo "Bool".

Utilización en la lista de funciones
ActivarBit (Variable)

Utilización en funciones definidas por el usuario
SetBit Tag
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Variable
Variable del tipo BOOL que se ajusta a "1" (TRUE).

1754

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente código de programa pone a 1 el valor de la variable booleana bStatus con la
función SetBit y muestra el resultado junto con el valor original bSaved.

'Programming language: VB
Dim myTag
Dim myOutputField
Dim bValue, bSaved, strResult
Set myTag = SmartTags("bStatus")
Set myOutputField=HMIRuntime.Screens("MyScreen").ScreenItems("objTextField")
'Set value
bValue=0
myTag.Value=bValue
'Save current value
bSaved=bValue
'Set Bit
SetBit myTag
bValue=myTag.Value
'Output result old and new value:
strResult="Old Value: "&bSaved &Chr(13)&"New Value: "&bValue
myOutputField.Text=strResult

//Programming language: C
{
BOOL bStatus = 0;
BOOL bSaved = bStatus;
//Set bit
SetBit (bStatus);
//print current and saved value
printf ("Current value: %d\r\n, Saved value: %d\r\n",bStatus, bSaved);
...
}

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

ActivarBitDeVariable
Descripción
Ajusta un bit a "1" (TRUE) en la variable indicada.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1755

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Tras modificar el bit indicado, la función de sistema vuelve a transferir toda la variable al
controlador. No se comprueba si entretanto se han modificado otros bits en la variable. El
operador y el controlador sólo podrán acceder a la variable indicada en modo de lectura hasta
que la variable vuelva a transferirse al controlador.
Nota
No utilice esta función de sistema si el controlador admite variables BOOL. En su lugar utilice
la función de sistema "ActivarBit".

Utilización en la lista de funciones
ActivarBitDeVariable (Variable, Bit)

Utilización en funciones definidas por el usuario
SetBitInTag Tag, Bit
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Variable
Variable en la que un bit se ajusta a "1" (TRUE).
Bit
Número del bit que se ajusta a "1" (TRUE).
Si utiliza esta función de sistema en un script de usuario, los bits de la variable indicada se
contarán de derecha a izquierda, independientemente del controlador utilizado. El contaje
comienza a partir de "0".
Nota
Para garantizar una funcionalidad fiable es imprescindible una actualización garantizada de
las variables utilizadas con los valores de proceso actuales. Por tanto, configure la variable en
un campo E/S, o bien asocie la función de sistema a un objeto de imagen (p. ej. un botón).
Si asocia la función de sistema a un evento breve (p. ej. aparición de un mensaje), los valores
de proceso actuales sólo se alcanzarán si la variable puede leerse de forma permanente.

1756

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejemplo
El siguiente código de programa pone a 1 un bit en la posición indicada bitposition de la
variable bStatusWord y muestra el resultado junto con el valor original bSaved.

'Programming language: VB
Dim myTag
Dim myOutputField
Dim bValue, bSaved, bitposition, strResult
Set myTag = SmartTags("bStatusWord")
Set myOutputField=HMIRuntime.Screens("MyScreen").ScreenItems("objTextField")
'Save current value
bValue=myTag.Value
bSaved=bValue
'Set Bit in tag
bitposition=1
SetBitInTag "bStatusWord", bitposition
bValue=myTag.Value
'Output result old and new value:
strResult="Old Value: "& bSaved & "New Value: " & bValue
myOutputField.Text=strResult

//Programming language: C
{
BYTE bSaved;
BYTE bitposition = 1;
bSaved = GetTagByte("bStatusWord");
//Reset bit in bitposition
SetBitInTag ("bStatusWord", bitposition);
//print current and saved value
printf ("Current value: %d\r\n, Saved value: %d\r\n",GetTagByte("bStatusWord"), bSaved);
}

Consulte también
Funciones de sistema para Runtime Professional (Página 1554)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1757

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ajustes
LeerModoPLC
Descripción
Evalúa el estado actual del controlador conectado.
La función de sistema "LeerModoPLC" solo se puede configurar para los siguientes
controladores:
● SIMATIC S7-1200
● SIMATIC S7-1500

Utilización en la lista de funciones
LeerModoPLC (conexión, modo)

Utilización en funciones definidas por el usuario
-

Parámetros
Conexión
Conexión entre controlador y panel de operador.
Modo
Evalúa el estado del controlador conectado. Seleccione una variable de usuario adecuada
para la evaluación.

1758

4

STOP

En estado operativo "STOP" no se procesa el programa de usuario.

6

ARRANQUE

La CPU está en el estado operativo "Arranque", p. ej., tras un rearranque.

8

RUN

En estado operativo "RUN" se procesa el programa cíclico, controlado por
tiempo y por alarmas.

9

RUN-Redun‐
dant

En el estado operativo "RUN-Redundant", ambas CPU procesan síncro‐
namente el programa de usuario.

10

PARADA

El estado operativo "PARADA" se alcanza con un punto de parada (break
point) en un bloque que se prueba paso a paso en modo de etapa indivi‐
dual.

13

DEFECTUOSO Se ha producido un error interno. Si el estado "DEFECTUOSO" es provo‐
cado por un error de firmware, se señalizará con los LED de estado de la
CPU.

15

Sin tensión

La tensión de red está desconectada.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

EstablecerIdioma
Descripción
Cambia el idioma del panel de operador. Todos los textos y avisos del sistema configurados
aparecerán en el panel de operador en el idioma recién ajustado.

Utilización en la lista de funciones
EstablecerIdioma (Idioma)

Utilización en funciones definidas por el usuario
SetLanguage Language
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Idioma
Determina qué idioma se debe ajustar en el panel de operador. Se pueden realizar los
siguientes ajustes:
● -1 (hmiToggle) = Conmutar: Cambia al siguiente idioma. El orden se establece en el editor
"Idiomas del proyecto" durante el proceso de configuración.
● Número que se ha especificado en "Idioma y fuente" en el editor "Configuración de
runtime". Cambia al idioma con el número indicado.
● Idioma que se ha especificado en "Idioma y fuente" en el editor "Configuración de runtime".
● Abreviatura del idioma conforme a la referencia VBScript5: Cambia al idioma
correspondiente a la abreviatura indicada, p. ej. "de-DE" para alemán (Alemania) o "en-US"
para inglés (EE.UU.).
En el tema "Cuadro de Id. de configuración regional (LCID)" que forma parte de los
principios básicos de VBScript encontrará una lista de todas las abreviaturas de idioma.

Teclado
EstablecerModoTecladoDePantalla
Descripción
Activa o desactiva la visualización automática del teclado de la pantalla en el panel de
operador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1759

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Utilice esta función de sistema si desea impedir que aparezca el teclado de pantalla por
ejemplo porque dispone de un teclado externo conectado al panel de operador.
Nota
Si utiliza la función de sistema "EstablecerModoTecladoDePantalla"
("SetScreenKeyboardMode") en un panel de operador que carezca de pantalla táctil, en la
configuración del panel deberá activar la opción "Utilizar teclado pantalla" en el área
"Configuración de runtime".

Utilización en la lista de funciones
EstablecerModoTecladoDePantalla (Modo)

Utilización en funciones definidas por el usuario
SetScreenKeyboardMode Mode
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información al respecto en "Dependencia del panel de operador".

Parámetros
Modo
Determina si el teclado de la pantalla se debe mostrar u ocultar.
0 (hmiOff) = Off: Ocultar el teclado de la pantalla
1 (hmiOn) = On: Mostrar el teclado de la pantalla
-1 (hmiToggle) = Conmutar: Conmuta entre ambos estados.

Manejo del teclado para objetos de imagen
MostrarBloqueEnTIAPortalDelAviso
Descripción
Realiza un cambio del visor de avisos al código de programa relevante del proyecto
seleccionado en el Engineering System. El cambio del visor de avisos al proyecto en el TIA
Portal permite seguir analizando el código de programa, p. ej., para buscar un contacto que
falta en el interlock.
Esta función del sistema se configura en un objeto de imagen, p. ej., un botón, o en un botón
de la barra de herramientas de un visor de avisos. Al hacer clic en el botón, el sistema tendrá
en cuenta el contexto necesario y, tras saltar al Engineering System, se mostrará
automáticamente el punto en cuestión del código de programa. Con el parámetro Protección
contra escritura se establece el nivel de permiso con el que se podrá activar el cambio al
Engineering System.

1760

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Si se ha configurado la función del sistema en un botón, el TIA Portal se iniciará en el modo
establecido mediante el parámetro Protección contra escritura. Para poder usar distintos
niveles de seguridad para el acceso, configure los botones con dos permisos distintos:
● Para el primer botón, configure el permiso de acceso sin restricciones ajustando el
parámetro Protección contra escritura a FALSE.
● para el segundo botón, configure el permiso de acceso sin derecho a modificar datos
ajustando el parámetro Protección contra escritura a TRUE.

Utilización en la lista de funciones
MostrarBloqueEnTIAPortalDelAviso (protección contra escritura, modo offline, ruta del
proyecto en TIA Portal, nombre de imagen del visor de avisos, nombre del visor de avisos)

Utilización en funciones definidas por el usuario
ShowBlockInTIAPortalFromAlarm ReadOnly, Offline_mode, TiaPortalProject_path,
AlarmScreen_name, AlarmView_name, Error_tag
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información en "Funciones del sistema para Runtime Professional"
(Página 1554).

Parámetros
Protección contra escritura
Determina si el proyecto se abrirá en modo de solo lectura.
TRUE (estándar): TIA Portal se abre en modo de lectura, y el usuario no puede realizar
cambios.
FALSE: TIA Portal se abre con permiso de lectura y escritura.
Modo offline
Determina si el proyecto se abrirá en modo offline.
TRUE: después de abrirse el bloque, el TIA Portal no pasa al modo online.
FALSE (estándar): después de abrirse el bloque se inicia el modo online.
Ruta de proyecto en TIA Portal
Ruta y nombre de archivo del proyecto en TIA Portal al que se cambiará desde el visor de
avisos.
Nombre de imagen del visor de avisos
Nombre de la imagen que contiene el visor de avisos.
Nombre del visor de avisos
Nombre de objeto del visor de avisos desde el que se cambiará a TIA Portal.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1761

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Variable de error
En caso de fallo se muestra información sobre el error que se ha producido mediante la
variable de error.

Consulte también
Configuración de salto desde el aviso (Página 1940)

MostrarVisorAvisosCódigoPLC
Descripción
Cambia del visor de avisos con el aviso ProDiag o GRAPH seleccionado al visor de código PLC
con el segmento en cuestión. La imagen que contiene visor de código PLC se abre en una
imagen raíz o en una ventana de imagen. El nombre del PLC del que procede la alarma no
puede contener comas.

Utilización en la lista de funciones
MostrarVisorAvisosCódigoPLC (nombre de imagen del aviso, nombre del visor de avisos,
nombre de la imagen raíz, nombre de la ventana de imagen, nombre de imagen del visor de
código PLC, nombre del visor de código PLC, variable de error)

Utilización en funciones definidas por el usuario
ShowPLCCodeViewFromAlarm Screen_name, Alarmview_name, Screen_name,
Screen_window_name, Screen_name, PLCCodeView_name, Error_tag
Utilizable, siempre que el panel configurado admita funciones definidas por el usuario.
Encontrará más información en "Funciones del sistema para Runtime Professional"
(Página 1554).

Parámetros
Nombre de imagen del aviso
Nombre de la imagen que contiene el visor de avisos.
Nombre del visor de avisos
Nombre de objeto del visor de avisos desde el que se transmitirá el aviso seleccionado.
Nombre de la imagen raíz
Nombre de la imagen que contiene una ventana de imagen en la que puede representarse la
imagen.
Nombre de la ventana de imagen
Nombre de la ventana en la que puede representarse la imagen con el visor de código PLC.

1762

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Nombre de imagen del visor de código PLC
Nombre de la imagen que contiene el visor de código PLC.
Nombre del visor de código PLC
Nombre de objeto del visor de código PLC.
Variable de error
En caso de fallo se muestra información sobre el error que se ha producido mediante la
variable de error.

Mensajes de error
La variable de error devuelve los siguientes errores:
KOPAPI_E_TPSF_ALGCTRL_NOTSELECTED

Debe estar seleccionado un solo aviso

KOPAPI_E_TPSF_ONLYONLINELISTALLOWED

Seleccionar solo avisos de la lista de avisos
del visor de avisos

KOPAPI_E_TPSF_ONALARMWRONGPRODUCERID

No se ha seleccionado ningún aviso de
GRAPH/ProDiag.

KOPAPI_E_TPSF_ONALARMNOSD0JUMPFLAG

No es posible saltar desde este aviso de
GRAPH/ProDiag.
Es posible saltar desde un aviso del visor de
avisos al visor de código PLC con los si‐
guientes avisos de supervisión:
●

En supervisiones globales, solo con
supervisiones de enclavamiento
(Interlock)

●

En supervisiones locales, con todas las
supervisiones básicas de parámetros
de entrada

Consulte también
Configuración de salto desde el aviso (Página 1940)

9.11.2

Eventos

9.11.2.1

Resumen

Editores
Introducción
La siguiente tabla muestra los eventos que se producen en los distintos editores.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1763

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Sujeto a cambios técnicos.
Símbolo

Editor
Imágenes
Avisos HMI
Variables HMI
Planificador de tareas

Borrada (Página 1789)

X

--

--

--

Activar (Página 1790)

--

--

--

--

Cambio (Página 1790)

--

--

--

--

Creada (Página 1790)

X

--

--

--

Ejecutar (Página 1791)

--

--

--

X

Selección modificada (Página 1791)

--

--

--

--

Al rebasar por exceso (Página 1791)

--

--

X

--

Al rebasar por defecto (Página 1791)

--

--

X

--

Cuando el cuadro de diálogo está abierto (Página 1792)

--

--

--

X

Cuando el cuadro de diálogo está cerrado (Página 1792)

--

--

--

X

Cambio de usuario (Página 1793)

--

--

--

X

Cambio de imagen (Página 1793)

--

--

--

X

Desactivar (Página 1794)

--

--

--

X

Hacer doble clic (Página 1794)

--

--

--

--

Pulsar (Página 1795)

--

--

--

--

Entrada finalizada (Página 1800)

--

--

--

--

Pulsar ESC dos veces (Página 1801)

--

--

--

--

Desaparecido (Página 1802)

--

X

--

--

Aparecido (Página 1802)

--

X

--

--

Hacer clic (Página 1803)

--

--

--

--

Hacer clic al parpadear (Página 1804)

--

--

--

--

Loop-In-Alarm (Página 1806)

--

X

--

--

Soltar (Página 1807)

--

--

--

--

Desbordamiento del búfer de avisos (Página 1807)

--

--

--

X

Acusar (Página 1809)

--

X

--

--

Margen alcanzado (Página 1810)

--

--

--

--

Parada de runtime (Página 1811)

--

--

--

X

Pulsar tecla (Página 1815)

--

--

--

--

Soltar tecla (Página 1815)

--

--

--

--

Desbordamiento (Página 1816)

--

--

--

--

Conmutar OFF (Página 1817)

--

--

--

--

Conmutar ON (Página 1818)

--

--

--

--

Poca memoria disponible (Página 1819)

--

--

--

--

Poca memoria disponible, crítico (Página 1820)

--

--

--

--

1764

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Cambio de valor (Página 1820)

--

--

X

--

Tiempo agotado (Página 1821)

--

--

--

--

Objetos básicos
Introducción
La siguiente tabla muestra los eventos que se producen en los distintos objetos.
Sujeto a cambios técnicos.
Símbolo

Objeto
Línea
Elipse
Círculo
Rectángulo
Campo de texto
Visor de gráficos

Borrada (Página 1789)

--

--

--

--

--

--

Activar (Página 1790)

--

--

--

--

--

--

Cambio (Página 1790)

--

--

--

--

--

--

Creada (Página 1790)

--

--

--

--

--

--

Ejecutar (Página 1791)

--

--

--

--

--

--

Selección modificada (Página 1791)

--

--

--

--

--

--

Al rebasar por exceso (Página 1791)

--

--

--

--

--

--

Al rebasar por defecto (Página 1791)

--

--

--

--

--

--

Cuando el cuadro de diálogo está abierto (Página 1792)

--

--

--

--

--

--

Cuando el cuadro de diálogo está cerrado (Página 1792)

--

--

--

--

--

--

Cambio de usuario (Página 1793)

--

--

--

--

--

--

Cambio de imagen (Página 1793)

--

--

--

--

--

--

Desactivar (Página 1794)

--

--

--

--

--

--

Hacer doble clic (Página 1794)

--

--

--

--

--

--

Pulsar (Página 1795)

--

--

--

--

--

--

Entrada finalizada (Página 1800)

--

--

--

--

--

--

Pulsar ESC dos veces (Página 1801)

--

--

--

--

--

--

Desaparecido (Página 1802)

--

--

--

--

--

--

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1765

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Aparecido (Página 1802)

--

--

--

--

--

--

Hacer clic (Página 1803)

--

--

--

--

--

--

Hacer clic al parpadear (Página 1804)

--

--

--

--

--

--

Loop-In-Alarm (Página 1806)

--

--

--

--

--

--

Soltar (Página 1807)

--

--

--

--

--

--

Desbordamiento del búfer de avisos (Página 1807)

--

--

--

--

--

--

Acusar (Página 1809)

--

--

--

--

--

--

Margen alcanzado (Página 1810)

--

--

--

--

--

--

Parada de runtime (Página 1811)

--

--

--

--

--

--

Pulsar tecla (Página 1815)

--

--

--

--

--

--

Soltar tecla (Página 1815)

--

--

--

--

--

--

Desbordamiento (Página 1816)

--

--

--

--

--

--

Conmutar OFF (Página 1817)

--

--

--

--

--

--

Conmutar ON (Página 1818)

--

--

--

--

--

--

Poca memoria disponible (Página 1819)

--

--

--

--

--

--

Poca memoria disponible, crítico (Página 1820)

--

--

--

--

--

--

Cambio de valor (Página 1820)

--

--

--

--

--

--

Tiempo agotado (Página 1821)

--

--

--

--

--

--

Elementos
Introducción
La siguiente tabla muestra los eventos que se producen en los distintos objetos.
Sujeto a cambios técnicos.
Símbolo

Objeto
Campo E/S
Botón
Campo E/S simbólico
Campo E/S gráfico
Campo de fecha y hora
Barra
Interruptor

1766

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Borrada (Página 1789)

--

--

--

--

--

--

--

Activar (Página 1790)

X

X

X

X

--

--

X

Cambio (Página 1790)

--

X

X

--

--

--

X

Creada (Página 1790)

--

--

--

--

--

--

--

Ejecutar (Página 1791)

--

--

--

--

--

--

--

Selección modificada (Página 1791)

--

--

--

--

--

--

--

Al rebasar por exceso (Página 1791)

--

--

--

--

--

--

--

Al rebasar por defecto (Página 1791)

--

--

--

--

--

--

--

Cuando el cuadro de diálogo está abierto (Pági‐
na 1792)

--

--

--

--

--

--

--

Cuando el cuadro de diálogo está cerrado (Pági‐
na 1792)

--

--

--

--

--

--

--

Cambio de usuario (Página 1793)

--

--

--

--

--

--

--

Cambio de imagen (Página 1793)

--

--

--

--

--

--

--

Desactivar (Página 1794)

X

X

X

X

--

--

X

Hacer doble clic (Página 1794)

--

--

--

--

--

--

--

Pulsar (Página 1795)

--

X

--

--

--

--

--

Entrada finalizada (Página 1800)

--

--

--

--

--

--

--

Pulsar ESC dos veces (Página 1801)

--

--

--

--

--

--

--

Desaparecido (Página 1802)

--

--

--

--

--

--

--

Aparecido (Página 1802)

--

--

--

--

--

--

--

Hacer clic (Página 1803)

--

X

--

--

--

--

--

Hacer clic al parpadear (Página 1804)

--

--

--

--

--

--

--

Loop-In-Alarm (Página 1806)

--

--

--

--

--

--

--

Soltar (Página 1807)

--

X

--

--

--

--

--

Desbordamiento del búfer de avisos (Página 1807)

--

--

--

--

--

--

--

Acusar (Página 1809)

--

--

--

--

--

--

--

Margen alcanzado (Página 1810)

--

--

--

--

--

--

--

Parada de runtime (Página 1811)

--

--

--

--

--

--

--

Pulsar tecla (Página 1815)

--

--

--

--

--

--

--

Soltar tecla (Página 1815)

--

--

--

--

--

--

--

Desbordamiento (Página 1816)

--

--

--

--

--

--

--

Conmutar OFF (Página 1817)

--

--

--

--

--

--

X

Conmutar ON (Página 1818)

--

--

--

--

--

--

X

Poca memoria disponible (Página 1819)

--

--

--

--

--

--

--

Poca memoria disponible, crítico (Página 1820)

--

--

--

--

--

--

--

Cambio de valor (Página 1820)

--

--

--

--

--

--

--

Tiempo agotado (Página 1821)

--

--

--

--

--

--

--

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1767

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Controles
Introducción
La siguiente tabla muestra los eventos que se producen en los distintos objetos.
Sujeto a cambios técnicos.
Símbolo

Objeto
Visor de avisos/ventana de avisos
Indicador de avisos
Visor de curvas
Visor de usuarios
Navegador HTML (solo Basic Panel de 2.ª generación)
Visor de recetas
Visor de diagnóstico del sistema
Indicador de ayuda

Borrada (Página 1789)

--

--

--

--

--

--

--

--

Activar (Página 1790)

X

--

X

X

X

--

--

X

Cambio (Página 1790)

--

--

--

--

--

--

--

--

Creada (Página 1790)

--

--

--

--

--

--

--

--

Ejecutar (Página 1791)

--

--

--

--

--

--

--

--

Selección modificada (Página 1791)

--

--

--

--

--

--

--

--

Al rebasar por exceso (Página 1791)

--

--

--

--

--

--

--

--

Al rebasar por defecto (Página 1791)

--

--

--

--

--

--

--

--

Cuando el cuadro de diálogo está abierto (Pági‐
na 1792)

--

--

--

--

--

--

--

--

Cuando el cuadro de diálogo está cerrado (Pági‐
na 1792)

--

--

--

--

--

--

--

--

Cambio de usuario (Página 1793)

--

--

--

--

--

--

--

--

Cambio de imagen (Página 1793)

--

--

--

--

--

--

--

--

Desactivar (Página 1794)

X

--

X

X

X

--

--

X

Hacer doble clic (Página 1794)

--

--

--

--

--

--

--

--

Pulsar (Página 1795)

--

--

--

--

--

--

--

--

Entrada finalizada (Página 1800)

--

--

--

--

--

--

--

--

Pulsar ESC dos veces (Página 1801)

--

--

--

--

--

--

--

--

Desaparecido (Página 1802)

--

--

--

--

--

--

--

--

Hacer clic (Página 1803)

--

X

--

--

--

--

--

--

Hacer clic al parpadear (Página 1804)

--

X

--

--

--

--

--

--

Loop-In-Alarm (Página 1806)

--

--

--

--

--

--

--

--

Soltar (Página 1807)

--

--

--

--

--

--

--

--

Aparecido (Página 1802)

1768

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Desbordamiento del búfer de avisos (Página 1807)

--

--

--

--

--

--

--

--

Acusar (Página 1809)

--

--

--

--

--

--

--

--

Margen alcanzado (Página 1810)

--

--

--

--

--

--

--

--

Parada de runtime (Página 1811)

--

--

--

--

--

--

--

--

Pulsar tecla (Página 1815)

--

--

--

--

--

--

--

--

Soltar tecla (Página 1815)

--

--

--

--

--

--

--

--

Desbordamiento (Página 1816)

--

--

--

--

--

--

--

--

Conmutar OFF (Página 1817)

--

--

--

--

--

--

--

--

Conmutar ON (Página 1818)

--

--

--

--

--

--

--

--

Poca memoria disponible (Página 1819)

--

--

--

--

--

--

--

--

Poca memoria disponible, crítico (Página 1820)

--

--

--

--

--

--

--

--

Cambio de valor (Página 1820)

--

--

--

--

--

--

--

--

Tiempo agotado (Página 1821)

--

--

--

--

--

--

--

--

9.11.2.2

Resumen

Editores
Introducción
La siguiente tabla muestra los eventos que se producen en los distintos editores.
Sujeto a cambios técnicos.
Símbolo

Editor
Imágenes
Avisos HMI
Variables HMI
Ficheros
Planificador de tareas
Audit Trail

Borrada (Página 1789)

X

--

--

--

--

--

Activar (Página 1790)

--

--

--

--

--

--

Cambio (Página 1790)

--

--

--

--

--

--

Creada (Página 1790)

X

--

--

--

--

--

Ejecutar (Página 1791)

--

--

--

--

X

--

Selección modificada (Página 1791)

--

--

--

--

--

--

Al rebasar por exceso (Página 1791)

--

--

X

--

--

--

Al rebasar por defecto (Página 1791)

--

--

X

--

--

--

Cuando el cuadro de diálogo está abierto (Página 1792)

--

--

--

--

X

--

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1769

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Cuando el cuadro de diálogo está cerrado (Página 1792)

--

--

--

--

X

--

Cambio de usuario (Página 1793)

--

--

--

--

X

--

Cambio de imagen (Página 1793)

--

--

--

--

X

--

Desactivar (Página 1794)

--

--

--

--

--

--

Hacer doble clic (Página 1794)

--

--

--

--

--

--

Pulsar (Página 1795)

--

--

--

--

--

--

Entrada finalizada (Página 1800)

--

--

--

--

--

--

Pulsar ESC dos veces (Página 1801)

--

--

--

--

--

--

Desaparecido (Página 1802)

--

X

--

--

--

--

Aparecido (Página 1802)

--

X

--

--

--

--

Hacer clic (Página 1803)

--

--

--

--

--

--

Hacer clic al parpadear (Página 1804)

--

--

--

--

--

--

Loop-In-Alarm (Página 1806)

--

X

--

--

--

--

Soltar (Página 1807)

--

--

--

--

--

--

Desbordamiento del búfer de avisos (Página 1807)

--

--

--

--

X

--

Acusar (Página 1809)

--

X

--

--

--

--

Margen alcanzado (Página 1810)

--

--

--

--

--

--

Parada de runtime (Página 1811)

--

--

--

--

X

--

Pulsar tecla (Página 1815)

--

--

--

--

--

--

Soltar tecla (Página 1815)

--

--

--

--

--

--

Desbordamiento (Página 1816)

--

--

--

X

--

--

Conmutar (Página 1817)

--

--

--

--

--

--

Conmutar OFF (Página 1817)

--

--

--

--

--

--

Conmutar ON (Página 1818)

--

--

--

--

--

--

Poca memoria disponible (Página 1819)

--

--

--

X

--

X

Poca memoria disponible, crítico (Página 1820)

--

--

--

X

--

X

Cambio de valor (Página 1820)

--

--

X

--

--

--

Tiempo agotado (Página 1821)

--

--

--

--

--

--

Objetos básicos
Introducción
La siguiente tabla muestra los eventos que se producen en los distintos objetos.
Sujeto a cambios técnicos.
Símbolo

Objeto
Línea
Polilínea
Polígono
Elipse
Círculo

1770

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Símbolo

Objeto
Rectángulo
Campo de texto
Visor de gráficos

Borrada (Página 1789)

--

--

--

--

--

--

--

--

Activar (Página 1790)

--

--

--

--

--

--

--

--

Cambio (Página 1790)

--

--

--

--

--

--

--

--

Creada (Página 1790)

--

--

--

--

--

--

--

--

Ejecutar (Página 1791)

--

--

--

--

--

--

--

--

Selección modificada (Página 1791)

--

--

--

--

--

--

--

--

Al rebasar por exceso (Página 1791)

--

--

--

--

--

--

--

--

Al rebasar por defecto (Página 1791)

--

--

--

--

--

--

--

--

Cuando el cuadro de diálogo está abierto (Pági‐
na 1792)

--

--

--

--

--

--

--

--

Cuando el cuadro de diálogo está cerrado (Pági‐
na 1792)

--

--

--

--

--

--

--

--

Cambio de usuario (Página 1793)

--

--

--

--

--

--

--

--

Cambio de imagen (Página 1793)

--

--

--

--

--

--

--

--

Desactivar (Página 1794)

--

--

--

--

--

--

--

--

Hacer doble clic (Página 1794)

--

--

--

--

--

--

--

--

Pulsar (Página 1795)

--

--

--

--

--

--

--

--

Entrada finalizada (Página 1800)

--

--

--

--

--

--

--

--

Pulsar ESC dos veces (Página 1801)

--

--

--

--

--

--

--

--

Desaparecido (Página 1802)

--

--

--

--

--

--

--

--

Aparecido (Página 1802)

--

--

--

--

--

--

--

--

Hacer clic (Página 1803)

--

--

--

--

--

--

--

--

Hacer clic al parpadear (Página 1804)

--

--

--

--

--

--

--

--

Loop-In-Alarm (Página 1806)

--

--

--

--

--

--

--

--

Soltar (Página 1807)

--

--

--

--

--

--

--

--

Desbordamiento del búfer de avisos (Pági‐
na 1807)

--

--

--

--

--

--

--

--

Acusar (Página 1809)

--

--

--

--

--

--

--

--

Margen alcanzado (Página 1810)

--

--

--

--

--

--

--

--

Parada de runtime (Página 1811)

--

--

--

--

--

--

--

--

Pulsar tecla (Página 1815)

--

--

--

--

--

--

--

--

Soltar tecla (Página 1815)

--

--

--

--

--

--

--

--

Desbordamiento (Página 1816)

--

--

--

--

--

--

--

--

Conmutar (Página 1817)

--

--

--

--

--

--

--

--

Conmutar OFF (Página 1817)

--

--

--

--

--

--

--

--

Conmutar ON (Página 1818)

--

--

--

--

--

--

--

--

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1771

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Poca memoria disponible (Página 1819)

--

--

--

--

--

--

--

--

Poca memoria disponible, crítico (Página 1820)

--

--

--

--

--

--

--

--

Cambio de valor (Página 1820)

--

--

--

--

--

--

--

--

Tiempo agotado (Página 1821)

--

--

--

--

--

--

--

--

Elementos
Introducción
La siguiente tabla muestra los eventos que se producen en los distintos objetos.
Sujeto a cambios técnicos.
Símbolo

Objeto
Campo E/S
Botón
Campo E/S simbólico
Campo E/S gráfico
Campo de fecha y hora
Barra
Interruptor
Librería de símbolos
Deslizador
Indicador gauge
Reloj

Borrada (Página 1789)

--

--

--

--

--

--

--

--

--

--

--

Activar (Página 1790)

X

X

X

X

--

--

X

X

X

--

--

Cambio (Página 1790)

--

X

X

--

--

--

X

--

X

X

--

Creada (Página 1790)

--

--

--

--

--

--

--

--

--

--

--

Ejecutar (Página 1791)

--

--

--

--

--

--

--

--

--

--

--

Selección modificada (Página 1791)

--

--

--

--

--

--

--

--

--

--

--

Al rebasar por exceso (Página 1791)

--

--

--

--

--

--

--

--

--

--

--

Al rebasar por defecto (Página 1791)

--

--

--

--

--

--

--

--

--

--

--

Cuando el cuadro de diálogo está abierto
(Página 1792)

--

--

--

--

--

--

--

--

--

--

--

Cuando el cuadro de diálogo está cerra‐
do (Página 1792)

--

--

--

--

--

--

--

--

--

--

--

Cambio de usuario (Página 1793)

--

--

--

--

--

--

--

--

--

--

--

Cambio de imagen (Página 1793)

--

--

--

--

--

--

--

--

--

--

--

Desactivar (Página 1794)

X

X

X

X

--

--

X

X

X

--

--

Hacer doble clic (Página 1794)

--

--

--

--

--

--

--

X

--

--

--

1772

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Pulsar (Página 1795)

--

X

--

--

--

--

--

X

--

--

--

Entrada finalizada (Página 1800)

X

X

X

--

--

--

--

--

--

--

Pulsar ESC dos veces (Página 1801)

--

Desaparecido (Página 1802)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Aparecido (Página 1802)

--

--

--

--

--

--

--

--

--

--

--

Hacer clic (Página 1803)

--

X

--

--

--

--

--

X

--

--

--

Hacer clic al parpadear (Página 1804)

--

--

--

--

--

--

--

--

--

--

--

Loop-In-Alarm (Página 1806)

--

--

--

--

--

--

--

--

--

--

--

Soltar (Página 1807)

--

X

--

--

--

--

--

X

--

--

--

Desbordamiento del búfer de avisos (Pá‐
gina 1807)

--

--

--

--

--

--

--

--

--

--

--

Acusar (Página 1809)

--

--

--

--

--

--

--

--

--

--

--

Margen alcanzado (Página 1810)

--

--

--

--

--

--

--

--

--

--

--

Parada de runtime (Página 1811)

--

--

--

--

--

--

--

--

--

--

--

Pulsar tecla (Página 1815)

--

--

--

--

--

--

--

--

--

--

--

Soltar tecla (Página 1815)

--

--

--

--

--

--

--

--

--

--

--

Desbordamiento (Página 1816)

--

--

--

--

--

--

--

--

--

--

--

Conmutar (Página 1817)

--

--

--

--

--

--

--

--

--

--

--

Conmutar OFF (Página 1817)

--

--

--

--

--

--

X

--

--

--

--

Conmutar ON (Página 1818)

--

--

--

--

--

--

X

--

--

--

--

Poca memoria disponible (Página 1819)

--

--

--

--

--

--

--

--

--

--

--

Poca memoria disponible, crítico (Pági‐
na 1820)

--

--

--

--

--

--

--

--

--

--

--

Cambio de valor (Página 1820)

--

--

--

--

--

--

--

--

--

--

--

Tiempo agotado (Página 1821)

--

--

--

--

--

--

--

--

--

--

--

Controles
Introducción
La siguiente tabla muestra los eventos que se producen en los distintos objetos.
Sujeto a cambios técnicos.
Símbolo

Objeto
Visor de avisos/ventana de avisos
Indicador de avisos
Visor de curvas
Visor de usuarios
Navegador HTML
Tabla de observación
Visor Sm@rtClient
Visor de recetas
Visor de curvas f(x)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1773

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Símbolo

Objeto
Visor de diagnóstico del sistema/Ventana de diagnóstico del sis‐
tema
Media Player1
Visor de código PLC
Vista general de GRAPH
Vista general de ProDiag
Visor de análisis de criterios
Visor de cámara1
Visor de PDF1
Tecla de función

1

Solo con paneles de operador Comfort

Borrada (Página 1789)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Activar (Página 1790)

X

--

X

X

X

X

X

X

--

X

--

X

X

X

X

X

X

--

Cambio (Página 1790)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Creada (Página 1790)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Ejecutar (Página 1791)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Selección modificada
(Página 1791)

X

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Al rebasar por exceso
(Página 1791)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Al rebasar por defecto
(Página 1791)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Cuando el cuadro de diá‐
logo está abierto (Pági‐
na 1792)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Cuando el cuadro de diá‐
logo está cerrado (Pági‐
na 1792)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Cambio de usuario (Pági‐
na 1793)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Cambio de imagen (Pági‐
na 1793)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Desactivar (Pági‐
na 1794)

X

--

X

X

X

X

X

X

--

--

--

X

X

X

X

X

X

--

Hacer doble clic (Pági‐
na 1794)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar (Página 1795)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Entrada finalizada (Pági‐
na 1800)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar ESC dos veces
(Página 1801)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Desaparecido (Pági‐
na 1802)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

1774

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Aparecido (Página 1802)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Hacer clic (Página 1803)

--

X

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Hacer clic al parpadear
(Página 1804)

--

X

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Loop-In-Alarm (Pági‐
na 1806)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Soltar (Página 1807)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Desbordamiento del bú‐
fer de avisos (Pági‐
na 1807)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Acusar (Página 1809)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Margen alcanzado (Pági‐
na 1810)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Parada de runtime (Pági‐
na 1811)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar el botón "Visor de
avisos" (Página 1811)

--

--

--

--

--

--

--

--

--

--

--

--

X

X

--

--

--

--

Pulsar el botón "Visor de
código PLC" (Pági‐
na 1812)

--

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

Pulsar tecla (Pági‐
na 1815)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

X

Soltar tecla (Pági‐
na 1815)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

X

Desbordamiento (Pági‐
na 1816)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Conmutar (Página 1817)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Conmutar OFF (Pági‐
na 1817)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Conmutar ON (Pági‐
na 1818)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Poca memoria disponi‐
ble (Página 1819)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Poca memoria disponi‐
ble, crítico (Página 1820)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Cambio de valor (Pági‐
na 1820)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Tiempo agotado (Pági‐
na 1821)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1775

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

9.11.2.3

Sinopsis

Editores
Introducción
La siguiente tabla muestra los eventos que se producen en los distintos editores.
Sujeto a cambios técnicos.
Símbolo

Editor
Imágenes
Avisos HMI
Ficheros
Planificador de tareas

Reproducción finalizada (Página 1789)

--

--

--

--

Activar (Página 1790)

X

--

--

--

Cambio (Página 1790)

--

--

--

--

Creada (Página 1790)

X

--

--

--

Ejecutar (Página 1791)

--

--

--

X

Selección modificada (Página 1791)

--

--

--

--

Hacer doble clic (Página 1794)

--

--

--

--

Pulsar (Página 1795)

--

--

--

--

Propiedad de aviso de operador modificada (Página 1795)

--

--

--

--

Propiedad de bloque modificada (Página 1795)

--

--

--

--

Propiedad diagrama modificada (Página 1796)

--

--

--

--

Propiedad modificada (Página 1796)

--

--

--

--

Propiedad de curva modificada (Página 1796)

--

--

--

--

Propiedad de columna modificada (Página 1797)

--

--

--

--

Propiedad de columna de estadística de avisos modificada (Pági‐
na 1797)

--

--

--

--

Propiedad Nombre de columna del área de estadísticas modificada
(Página 1797)

--

--

--

--

Propiedad Cambiar elemento de la barra de estado (Página 1798)

--

--

--

--

Propiedad Barra de herramientas Cambiar Botón (Página 1798)

--

--

--

--

Modificar propiedad eje de valores (Página 1798)

--

--

--

--

Modificar propiedad Columna de valores (Página 1799)

--

--

--

--

Propiedad de eje X modificada (Página 1799)

--

--

--

--

Propiedad de eje Y modificada (Página 1799)

--

--

--

--

Modificar propiedad eje de tiempo (Página 1800)

--

--

--

--

modificar propiedad columna de tiempo (Página 1800)

--

--

--

--

Error (Página 1801)

--

--

--

--

1776

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Desaparecido (Página 1802)

--

X

--

--

Aparecido (Página 1802)

--

X

--

--

En el área de avisos (Página 1802)

--

--

--

--

En el rango de tolerancia (Página 1803)

--

--

--

--

En el rango de advertencia (Página 1803)

--

--

--

--

Hacer clic (Página 1803)

X

--

--

--

Menú contextual (Página 1804)

--

--

--

--

Volumen (Página 1805)

--

--

--

--

Modificar diseño (Página 1805)

--

--

--

--

Modificar regla (Página 1805)

--

--

--

--

Pulsar botón izquierdo del ratón (Página 1806)

X

--

--

--

Soltar botón izquierdo del ratón (Página 1806)

X

--

--

--

Loop-In-Alarm (Página 1806)

--

X

--

--

Soltar (Página 1807)

--

--

--

--

Desplazar ratón (Página 1808)

--

--

--

--

Medio abierto (Página 1808)

--

--

--

--

Medio cerrado (Página 1808)

--

--

--

--

Objeto modificado (Página 1809)

X

--

--

--

Pausa (Página 1809)

--

--

--

--

Acusar (Página 1809)

X

X

--

--

Pulsar botón derecho del ratón (Página 1810)

X

--

--

--

Soltar botón derecho del ratón (Página 1811)

X

--

--

--

Parada de runtime (Página 1811)

--

--

--

--

Pulsar el botón "Visor de avisos" (Página 1811)

--

--

--

--

Pulsar el botón "Visor de código PLC" (Página 1812)

--

--

--

--

Hacer clic en botón de la barra de herramientas (Página 1812)

--

--

--

--

Modificar deslizador (Página 1812)

--

--

--

--

PasoAdelante (Página 1813)

--

--

--

--

PasoAtrás (Página 1813)

--

--

--

--

Bloqueo modificado (Página 1813)

--

--

X

--

Estado modificado (Página 1814)

--

X

--

--

Parada (Página 1814)

--

--

--

--

Conmutar barra de herramientas (Página 1814)

--

--

--

--

Pulsar tecla en teclado (Página 1816)

X

--

--

--

Soltar tecla en teclado (Página 1816)

X

--

--

--

Cambiar formato de vídeo (Página 1818)

--

--

--

--

Pantalla completa (Página 1819)

--

--

--

--

Salir de la pantalla completa (Página 1819)

--

--

--

--

Reproducción (Página 1821)

--

--

--

--

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1777

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Objetos básicos
Introducción
La siguiente tabla muestra los eventos que se producen en los distintos objetos.
Sujeto a cambios técnicos.
Símbolo

Objeto
Línea
Polilínea
Polígono
Elipse
Segmento elíptico
Segmento circular
Arco elíptico
Arco circular
Círculo
Rectángulo
Conector
Campo de texto
Visor de gráficos
Tubo
Pieza en T doble
Pieza en T
Arco tubular

Reproducción finaliza‐
da (Página 1789)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Activar (Página 1790)

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

Cambio (Página 1790)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Creada (Página 1790)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Ejecutar (Página 1791)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Selección modificada
(Página 1791)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Hacer doble clic (Pági‐
na 1794)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar (Página 1795)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de aviso de
operador modificada
(Página 1795)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de bloque
modificada (Pági‐
na 1795)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

1778

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Propiedad diagrama
modificada (Pági‐
na 1796)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad modificada
(Página 1796)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de curva mo‐
dificada (Página 1796)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de columna
modificada (Pági‐
na 1797)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de columna
de estadística de avisos
modificada (Pági‐
na 1797)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad Nombre de
columna del área de es‐
tadísticas modificada
(Página 1797)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad Cambiar ele‐
mento de la barra de es‐
tado (Página 1798)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad Barra de he‐
rramientas Cambiar Bo‐
tón (Página 1798)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Modificar propiedad eje
de valores (Pági‐
na 1798)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Modificar propiedad Co‐
lumna de valores (Pági‐
na 1799)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de eje X mo‐
dificada (Página 1799)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de eje Y mo‐
dificada (Página 1799)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Modificar propiedad eje
de tiempo (Pági‐
na 1800)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

modificar propiedad co‐
lumna de tiempo (Pági‐
na 1800)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Error (Página 1801)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Desaparecido (Pági‐
na 1802)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Aparecido (Pági‐
na 1802)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

En el área de avisos
(Página 1802)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

En el rango de toleran‐
cia (Página 1803)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1779

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

En el rango de adverten‐
cia (Página 1803)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Hacer clic (Pági‐
na 1803)

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

Menú contextual (Pági‐
na 1804)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Volumen (Página 1805)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Modificar diseño (Pági‐
na 1805)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Modificar regla (Pági‐
na 1805)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar botón izquierdo
del ratón (Página 1806)

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

Soltar botón izquierdo
del ratón (Página 1806)

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

Loop-In-Alarm (Pági‐
na 1806)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Soltar (Página 1807)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Desplazar ratón (Pági‐
na 1808)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Medio abierto (Pági‐
na 1808)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Medio cerrado (Pági‐
na 1808)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Objeto modificado (Pá‐
gina 1809)

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

Pausa (Página 1809)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Acusar (Página 1809)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar botón derecho
del ratón (Página 1810)

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

Soltar botón derecho
del ratón (Página 1811)

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

Parada de runtime (Pá‐
gina 1811)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar el botón "Visor
de avisos" (Pági‐
na 1811)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar el botón "Visor
de código PLC" (Pági‐
na 1812)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Hacer clic en botón de
la barra de herramien‐
tas (Página 1812)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Modificar deslizador
(Página 1812)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

PasoAdelante (Pági‐
na 1813)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

1780

--

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

PasoAtrás (Pági‐
na 1813)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Bloqueo modificado
(Página 1813)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Estado modificado (Pá‐
gina 1814)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Parada (Página 1814)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Conmutar barra de he‐
rramientas (Pági‐
na 1814)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar tecla en teclado
(Página 1816)

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

Soltar tecla en teclado
(Página 1816)

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

Pantalla completa (Pá‐
gina 1819)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Salir de la pantalla com‐
pleta (Página 1819)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Cambiar formato de ví‐
deo (Página 1818)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Reproducción (Pági‐
na 1821)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Elementos
Introducción
La siguiente tabla muestra los eventos que se producen en los distintos elementos.
Sujeto a cambios técnicos.
Símbolo

Objeto
Campo E/S
Campo de texto editable
Cuadro de lista
Cuadro combinado

Botón
Botón redondo
Campo E/S simbólico
Campo E/S gráfico

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1781

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Símbolo

Objeto
Barra
Librería de símbolos
Deslizador
Barra de desplazamiento
Casilla de verificación
Botón de opción
Indicador gauge
Reloj
Visor de memoria

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Activar (Página 1790)

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

Cambio (Página 1790)

--

--

--

--

--

--

--

--

--

--

X

--

--

--

X

--

--

Creada (Página 1790)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Ejecutar (Página 1791)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Selección modificada
(Página 1791)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Hacer doble clic (Pági‐
na 1794)

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

--

--

Pulsar (Página 1795)

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

--

--

Propiedad de aviso de
operador modificada
(Página 1795)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de bloque
modificada (Pági‐
na 1795)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad diagrama
modificada (Pági‐
na 1796)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad modificada
(Página 1796)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de curva mo‐
dificada (Página 1796)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de columna
modificada (Pági‐
na 1797)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Reproducción finaliza‐
da (Página 1789)

1782

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Propiedad de columna
de estadística de avi‐
sos modificada (Pági‐
na 1797)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad Nombre de
columna del área de es‐
tadísticas modificada
(Página 1797)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad Cambiar ele‐
mento de la barra de
estado (Página 1798)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad Barra de he‐
rramientas Cambiar
Botón (Página 1798)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Modificar propiedad eje
de valores (Pági‐
na 1798)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Modificar propiedad
Columna de valores
(Página 1799)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de eje X mo‐
dificada (Página 1799)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de eje Y mo‐
dificada (Página 1799)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Modificar propiedad eje
de tiempo (Pági‐
na 1800)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

modificar propiedad co‐
lumna de tiempo (Pági‐
na 1800)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Error (Página 1801)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Desaparecido (Pági‐
na 1802)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Aparecido (Pági‐
na 1802)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

En el área de avisos
(Página 1802)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

X

En el rango de toleran‐
cia (Página 1803)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

X

En el rango de adver‐
tencia (Página 1803)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

X

Hacer clic (Pági‐
na 1803)

X

X

X

X

X

X

X

X

X

X

--

X

X

X

--

--

--

Menú contextual (Pági‐
na 1804)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Volumen (Pági‐
na 1805)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Modificar diseño (Pági‐
na 1805)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1783

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Modificar regla (Pági‐
na 1805)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar botón izquierdo
del ratón (Página 1806)

X

X

X

X

X

X

X

X

X

--

--

X

X

X

--

--

--

Soltar botón izquierdo
del ratón (Página 1806)

X

X

X

X

X

X

X

X

X

--

--

X

X

X

--

--

--

Loop-In-Alarm (Pági‐
na 1806)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Soltar (Página 1807)

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

--

--

Desplazar ratón (Pági‐
na 1808)

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

--

--

Medio abierto (Pági‐
na 1808)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Medio cerrado (Pági‐
na 1808)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Objeto modificado (Pá‐
gina 1809)

X

X

X

X

X

X

X

X

X

--

--

X

X

X

--

--

--

Pausa (Página 1809)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Acusar (Página 1809)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar botón derecho
del ratón (Página 1810)

X

X

X

X

X

X

X

X

X

--

--

X

X

X

--

--

--

Soltar botón derecho
del ratón (Página 1811)

X

X

X

X

X

X

X

X

X

--

--

X

X

X

--

--

--

Parada de runtime (Pá‐
gina 1811)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar el botón "Visor
de avisos" (Pági‐
na 1811)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar el botón "Visor
de código PLC" (Pági‐
na 1812)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Hacer clic en botón de
la barra de herramien‐
tas (Página 1812)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Modificar deslizador
(Página 1812)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

PasoAdelante (Pági‐
na 1813)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

PasoAtrás (Pági‐
na 1813)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Bloqueo modificado
(Página 1813)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Estado modificado (Pá‐
gina 1814)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Parada (Página 1814)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

1784

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Conmutar barra de he‐
rramientas (Pági‐
na 1814)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar tecla en teclado
(Página 1816)

X

X

X

X

X

X

X

X

X

--

--

X

X

X

--

--

--

Soltar tecla en teclado
(Página 1816)

X

X

X

X

X

X

X

X

X

--

--

X

X

X

--

--

--

Cambiar formato de ví‐
deo (Página 1818)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pantalla completa (Pá‐
gina 1819)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Salir de la pantalla com‐
pleta (Página 1819)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Reproducción (Pági‐
na 1821)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Controles
Introducción
La siguiente tabla muestra los eventos que se producen en los distintos controles.
Sujeto a cambios técnicos.
Símbolo

Objeto
Ventana de imagen
Visor de usuarios
Navegador HTML
Trabajo de impresión/diagnóstico de script
Visor de recetas
Visor de avisos
Visor de curvas f(x)
Visor de curvas f(t)
Visor de tablas
Tabla de valores
Visor de diagnóstico del sistema
Media Player
Visor de diagnóstico de canal
Visor de código PLC
Vista general de GRAPH
Vista general de ProDiag
Visor de análisis de criterios

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1785

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Reproducción finaliza‐
da (Página 1789)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

Activar (Página 1790)

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

X

Cambio (Página 1790)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Creada (Página 1790)

--

--

--

--

X

X

X

X

X

X

--

--

--

--

--

--

--

Ejecutar (Pági‐
na 1791)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Selección modificada
(Página 1791)

--

--

--

--

X

X

--

--

--

--

--

--

--

--

--

--

--

Hacer doble clic (Pági‐
na 1794)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar (Página 1795)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Propiedad de aviso de
operador modificada
(Página 1795)

--

--

--

--

--

X

--

--

--

--

--

--

--

--

--

--

--

Propiedad de bloque
modificada (Pági‐
na 1795)

--

--

--

--

--

X

--

--

--

X

--

--

--

--

--

--

--

Propiedad diagrama
modificada (Pági‐
na 1796)

--

--

--

--

--

--

X

X

--

--

--

--

--

--

--

--

--

Propiedad modificada
(Página 1796)

--

--

--

--

X

X

X

X

X

X

--

--

--

--

--

--

--

Propiedad de curva
modificada (Pági‐
na 1796)

--

--

--

--

--

--

X

X

--

--

--

--

--

--

--

--

--

Propiedad de columna
modificada (Pági‐
na 1797)

--

--

--

--

X

X

--

--

--

X

--

--

--

--

--

--

--

Propiedad de columna
de estadística de avi‐
sos modificada (Pági‐
na 1797)

--

--

--

--

--

X

--

--

--

--

--

--

--

--

--

--

--

Propiedad Nombre de
columna del área de
estadísticas modifica‐
da (Página 1797)

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

--

--

Propiedad Cambiar
elemento de la barra
de estado (Pági‐
na 1798)

--

--

--

--

X

X

X

X

X

X

--

--

--

--

--

--

--

Propiedad Barra de
herramientas Cambiar
Botón (Página 1798)

--

--

--

--

X

X

X

X

X

X

--

--

--

--

--

--

--

Modificar propiedad
eje de valores (Pági‐
na 1798)

--

--

--

--

--

--

--

X

--

--

--

--

--

--

--

--

--

1786

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Modificar propiedad
Columna de valores
(Página 1799)

--

--

--

--

--

--

--

--

X

--

--

--

--

--

--

--

--

Propiedad de eje X
modificada (Pági‐
na 1799)

--

--

--

--

--

--

X

--

--

--

--

--

--

--

--

--

--

Propiedad de eje Y
modificada (Pági‐
na 1799)

--

--

--

--

--

--

X

--

--

--

--

--

--

--

--

--

--

Modificar propiedad
eje de tiempo (Pági‐
na 1800)

--

--

--

--

--

--

--

X

--

--

--

--

--

--

--

--

--

modificar propiedad
columna de tiempo
(Página 1800)

--

--

--

--

--

--

--

--

X

--

--

--

--

--

--

--

--

Error (Página 1801)

--

--

--

--

--

--

--

--

--

--

--

--

--

X

--

X

X

Desaparecido (Pági‐
na 1802)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Aparecido (Pági‐
na 1802)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

En el área de avisos
(Página 1802)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

En el rango de toleran‐
cia (Página 1803)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

En el rango de adver‐
tencia (Página 1803)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Hacer clic (Pági‐
na 1803)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

X

--

--

Menú contextual (Pá‐
gina 1804)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

Volumen (Pági‐
na 1805)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

Modificar diseño (Pági‐
na 1805)

--

--

--

--

--

--

--

X

--

--

--

--

--

--

--

--

--

Modificar regla (Pági‐
na 1805)

--

--

--

--

--

--

--

X

--

--

--

--

--

--

--

--

--

Pulsar botón izquierdo
del ratón (Pági‐
na 1806)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Soltar botón izquierdo
del ratón (Pági‐
na 1806)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Loop-In-Alarm (Pági‐
na 1806)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Soltar (Página 1807)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Desplazar ratón (Pági‐
na 1808)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Medio abierto (Pági‐
na 1808)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1787

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Medio cerrado (Pági‐
na 1808)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

Objeto modificado (Pá‐
gina 1809)

X

--

--

X

--

--

--

--

--

--

--

--

--

--

--

--

--

Pausa (Página 1809)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

Acusar (Página 1809)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar botón derecho
del ratón (Pági‐
na 1810)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Soltar botón derecho
del ratón (Pági‐
na 1811)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Parada de runtime
(Página 1811)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Pulsar el botón "Visor
de avisos" (Pági‐
na 1811)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

X

X

--

Pulsar el botón "Visor
de código PLC" (Pági‐
na 1812)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

X

--

--

Hacer clic en botón de
la barra de herramien‐
tas (Página 1812)

--

--

--

--

X

X

X

X

X

X

--

--

--

--

--

--

--

Modificar deslizador
(Página 1812)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

PasoAdelante (Pági‐
na 1813)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

PasoAtrás (Pági‐
na 1813)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

Bloqueo modificado
(Página 1813)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Estado modificado
(Página 1814)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Parada (Página 1814)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

Conmutar barra de he‐
rramientas (Pági‐
na 1814)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

Pulsar tecla en teclado
(Página 1816)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Soltar tecla en teclado
(Página 1816)

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

--

Cambiar formato de ví‐
deo (Página 1818)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

Pantalla completa (Pá‐
gina 1819)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

1788

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Salir de la pantalla
completa (Pági‐
na 1819)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

Reproducción (Pági‐
na 1821)

--

--

--

--

--

--

--

--

--

--

--

X

--

--

--

--

--

9.11.2.4

Eventos

Borrada
Descripción
Aparece cuando la imagen activa desaparece del panel de operador.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Editores (Página 1769)
Objetos básicos (Página 1770)
Elementos (Página 1772)
Controles (Página 1773)

Reproducción finalizada
Descripción
Se produce cuando se ha reproducido el archivo de vídeo o audio.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Elementos (Página 1781)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1789

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Activar
Descripción
Aparece cuando el usuario selecciona un objeto de manejo y visualización mediante el orden
de tabulación configurado.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.
Nota
El evento "Hacer clic" se activa cuando el usuario hace clic con el ratón en un botón, p.ej. Para
disparar el evento "Activar", el usuario deberá seleccionar el botón mediante el orden de
tabulación.
El evento "Activar" sirve exclusivamente para reconocer si un objeto está seleccionado. Sin
embargo, el evento no lanza una petición de contraseña.
Por tanto, no utilice el evento "Activar" si quiere asociar una protección de acceso a la llamada
de función del objeto.

Cambio
Descripción
Aparece cuando cambia el estado de un objeto de manejo y visualización.
Cuando el usuario acciona un interruptor, p. ej., cambie el estado de un objeto.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Creada
Descripción
Aparece cuando un objeto de indicación y control está completamente cargado en runtime.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

1790

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Ejecutar
Descripción
Aparece cuando se ejecuta la tarea planificada.

Selección modificada
Descripción
Aparece cuando se modifica la selección.

Al rebasar por exceso
Descripción
Aparece cuando se rebasa por exceso el valor límite superior de una variable.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Editores (Página 1769)
Objetos básicos (Página 1770)
Elementos (Página 1772)
Controles (Página 1773)

Al rebasar por defecto
Descripción
Aparece cuando se rebasa por defecto el valor límite inferior de una variable.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1791

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Consulte también
Editores (Página 1769)
Objetos básicos (Página 1770)
Elementos (Página 1772)
Controles (Página 1773)

Cuando el cuadro de diálogo está abierto
Descripción
Ocurre cuando se abre un cuadro de diálogo modal.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Editores (Página 1769)
Objetos básicos (Página 1770)
Elementos (Página 1772)
Controles (Página 1773)

Cuando el cuadro de diálogo está cerrado
Descripción
Ocurre cuando se cierra un cuadro de diálogo modal.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Editores (Página 1769)
Objetos básicos (Página 1770)

1792

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Elementos (Página 1772)
Controles (Página 1773)

Cambio de usuario
Descripción
Aparece cuando un usuario finaliza la sesión en el panel de operador, o bien cuando otro
usuario inicia una sesión.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Editores (Página 1769)
Objetos básicos (Página 1770)
Elementos (Página 1772)
Controles (Página 1773)

Cambio de imagen
Descripción
Aparece cuando, tras producirse un cambio de imagen, todos los objetos de manejo y
visualización configurados se cargan en la imagen.
Utilice el evento "Creada" para ejecutar una función de sistema diferente al cambiar a una
imagen determinada.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Editores (Página 1769)
Objetos básicos (Página 1770)
Elementos (Página 1772)
Controles (Página 1773)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1793

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Desactivar
Descripción
Aparece cuando el usuario quita el foco de un objeto de manejo y visualización.
Un objeto de imagen se puede desactivar mediante el orden de tabulación configurado, o bien
utilizando el ratón para realizar una acción diferente.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.
Nota
Las funciones de sistema o los scripts de usuario asociados al evento "Desactivar" de una
imagen no se ejecutan al desmarcar la imagen.
El evento "Desactivar" sirve exclusivamente para reconocer si un objeto se ha desmarcado.
Sin embargo, el evento no lanza una petición de contraseña.
Por tanto, no utilice el evento "Desactivar" si quiere asociar una protección de acceso a la
llamada de función del objeto.

Consulte también
Editores (Página 1769)
Objetos básicos (Página 1770)
Elementos (Página 1772)
Controles (Página 1773)

Hacer doble clic
Descripción
Aparece cuando el usuario hace doble clic en un objeto de la librería de símbolos.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

1794

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Pulsar
Descripción
Aparece cuando el usuario hace clic en un botón con el botón izquierdo del ratón, pulsa la tecla
<INTRO> o <ESPACIO>.
También aparece si el usuario hace clic con el botón derecho del ratón en un objeto de la
librería de símbolos.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Propiedad de aviso de operador modificada
Descripción
Aparece cuando se modifica la propiedad de un aviso de operador.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Propiedad de bloque modificada
Descripción
Aparece cuando se modifica la propiedad de un bloque, p. ej., bloque de aviso
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1795

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Propiedad diagrama modificada
Descripción
Aparece cuando se modifica la propiedad del diagrama de curvas.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Propiedad modificada
Descripción
Aparece cuando se modifica una propiedad.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Propiedad de curva modificada
Descripción
Aparece cuando se modifica la propiedad de la curva.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

1796

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Propiedad de columna modificada
Descripción
Aparece cuando se modifica la propiedad de una columna.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Propiedad de columna de estadística de avisos modificada
Descripción
Aparece cuando se modifica la propiedad de la columna de estadística de avisos.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Propiedad Nombre de columna del área de estadísticas modificada
Descripción
Se produce cuando se modifica el nombre de columna del área de estadísticas.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1797

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Propiedad Cambiar elemento de la barra de estado
Descripción
Aparece cuando se modifica la propiedad de un elemento en la barra de estado.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Propiedad Barra de herramientas Cambiar Botón
Descripción
Aparece cuando se modifica la propiedad de un botón en la barra de herramientas.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Modificar propiedad eje de valores
Descripción
Se produce cuando cambia la propiedad del eje de tiempo.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

1798

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Modificar propiedad Columna de valores
Descripción
Aparece cuando se modifica la propiedad de la columna de valores.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Propiedad de eje X modificada
Descripción
Aparece cuando se modifica la propiedad del eje X.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Propiedad de eje Y modificada
Descripción
Aparece cuando se modifica la propiedad del eje Y.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1799

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Modificar propiedad eje de tiempo
Descripción
Se produce cuando se modifica la propiedad del eje de tiempo.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

modificar propiedad columna de tiempo
Descripción
Aparece cuando se modifica la propiedad de la columna de tiempo.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Entrada finalizada
Descripción
Aparece cuando la entrada en un campo ES se confirma con la tecla Intro, con el ratón o con
la pantalla táctil.
El evento "Entrada finalizada" también se inicia cuando el valor de una variable no cambia, p.
ej. al rebasar un valor, o cuando un usuario cancela el cuadro de diálogo para acusar una
variable de acuse obligatorio, p. ej. en el paquete opcional Audit.
Por el contrario, el evento no se dispara al iniciar la sesión como usuario y en los campos de
entrada configurados con un permiso.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

1800

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Consulte también
Editores (Página 1769)
Objetos básicos (Página 1770)
Elementos (Página 1772)
Controles (Página 1773)

Pulsar ESC dos veces
Descripción
Aparece cuando el operador pulsa dos veces la tecla <ESC> en el panel de operador.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Editores (Página 1769)
Objetos básicos (Página 1770)
Elementos (Página 1772)
Controles (Página 1773)

Error
Descripción
Se produce cuando tiene lugar un error cuando se crea la imagen de un segmento de
programa en el visor de código PLC.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1801

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Desaparecido
Descripción
Aparece cuando desaparece un aviso.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Aparecido
Descripción
Aparece cuando se ha activado un aviso y éste se visualiza en el visor de avisos.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

En el área de avisos
Descripción
Se produce cuando la memoria disponible alcanza el límite de vigilancia "Alarma" configurado.
Este evento se configura en el objeto de indicación y control "Visor de memoria".
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

1802

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

En el rango de tolerancia
Descripción
Se produce cuando la memoria disponible alcanza el límite de vigilancia "Tolerancia"
configurado. Este evento se configura en el objeto de indicación y control "Visor de memoria".
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

En el rango de advertencia
Descripción
Se produce cuando la memoria disponible alcanza el límite de vigilancia "Advertencia"
configurado. Este evento se configura en el objeto de indicación y control "Visor de memoria".
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Hacer clic
Descripción
Aparece cuando el usuario hace clic con el ratón en un objeto de manejo y visualización, o bien
cuando lo toca con el dedo en una pantalla táctil.
Si ha hecho clic en un objeto erróneo, puede evitar que se procese la lista de funciones
configurada del modo siguiente:
● Manteniendo pulsado el botón del ratón, aleje el puntero del ratón del objeto. Una vez que
el puntero del ratón haya salido del objeto, suelte el botón del ratón. En este caso, la lista
de funciones no se procesará.
● Si utiliza una pantalla táctil, toque la pantalla con el dedo hasta que se produzca una acción
(p. ej. un cambio de imagen).
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo
de objeto.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1803

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Hacer clic al parpadear
Descripción
Se activa cuando un usuario hace clic sobre un indicador de avisos intermitente con el ratón o
lo toca con el dedo.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Editores (Página 1769)
Objetos básicos (Página 1770)
Elementos (Página 1772)
Controles (Página 1773)

Menú contextual
Descripción
Se produce cuando se abre el menú contextual.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Elementos (Página 1781)

1804

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Volumen
Descripción
Se produce cuando se modifica el volumen.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Elementos (Página 1781)

Modificar diseño
Descripción
Se produce cuando se modifica una propiedad.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Modificar regla
Descripción
Se produce cuando se modifica una propiedad.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1805

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Pulsar botón izquierdo del ratón
Descripción
Aparece cuando el operador hace clic en un objeto de indicación y control con el botón
izquierdo del ratón.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Soltar botón izquierdo del ratón
Descripción
Aparece cuando el usuario suelta el botón izquierdo del ratón tras hacer clic.
Mientras el usuario mantiene pulsado el botón izquierdo del ratón no aparece este evento.
Cuando el operador suelta el botón del ratón después de hacer clic en un botón aparece este
evento, también cuando el puntero del ratón ya no se encuentre sobre el botón.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Loop-In-Alarm
Descripción
El evento "Loop-In-Alarm" se produce cuando el usuario selecciona un aviso en el visor de
avisos y pulsa el botón "Loop-In-Alarm" o hace doble clic en el aviso.
El evento "Loop-In-Alarm" puede configurarse para avisos de bit y para avisos analógicos.
Para el evento "Loop-In-Alarm" se puede configurar una función de sistema como, p. ej., pasar
a una imagen en la que se muestre más información acerca del aviso. Si se ha configurado una
función para el evento Loop-In-Alarm y el aviso seleccionado es de acuse obligatorio, este
aviso también se acusa la primera vez que se dispara el evento.
Si no hay ninguna Loop-In-Alarm configurada para el aviso seleccionado, la pulsación del
botón "Loop-In-Alarm" carece de efecto.

1806

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
En Runtime Professional no se puede asociar ningún script local al evento "Loop-In-Alarm".
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Soltar
Descripción
Aparece cuando el usuario suelta un botón de comando.
Este evento no aparecerá mientras mantenga pulsado el botón de comando.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Desbordamiento del búfer de avisos
Descripción
Aparece cuando se ha alcanzado el tamaño configurado del búfer de avisos.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Editores (Página 1769)
Objetos básicos (Página 1770)
Elementos (Página 1772)
Controles (Página 1773)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1807

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Desplazar ratón
Descripción
Aparece cuando el operador mueve el ratón.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Medio abierto
Descripción
Se produce cuando el medio está abierto.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Elementos (Página 1781)

Medio cerrado
Descripción
Se produce cuando el medio está cerrado.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Elementos (Página 1781)

1808

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Objeto modificado
Descripción
Aparece cuando el operador modifica en runtime una propiedad de un objeto de indicación y
control.
Nota
Cada una de las acciones desencadenadas por este evento se inician individualmente y
finalizan con el cambio de pantalla. Este comportamiento carga la memoria de trabajo. Utilice
este evento únicamente para cambios importantes de propiedades, p. ej., para un campo E/S.
Nota
La disponibilidad del evento depende del panel de operador y del tipo de objeto.

Pausa
Descripción
Se produce cuando se detiene la reproducción del archivo de vídeo o audio.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Elementos (Página 1781)

Acusar
Descripción
Aparece cuando el usuario acusa un aviso.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1809

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Margen alcanzado
Descripción
Aparece cuando el usuario alcanza el comienzo o el final de un área de desplazamiento.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.
Nota
Al evento "Margen alcanzado" no se le puede asociar ninguna función definida por el usuario.

Objetos configurables
Este evento sólo se pueden configurar en las teclas <Arriba> y <Abajo>, o bien en las teclas
en las que haya configurado las funciones de sistema "ObjetoDeImagenCursorArriba" u
"ObjetoDeImagenCursorAbajo".

Consulte también
Editores (Página 1769)
Objetos básicos (Página 1770)
Elementos (Página 1772)
Controles (Página 1773)

Pulsar botón derecho del ratón
Descripción
Aparece cuando el usuario hace clic en un objeto de indicación y control con el botón derecho
del ratón.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

1810

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Soltar botón derecho del ratón
Descripción
Aparece cuando el usuario suelta el botón derecho del ratón tras hacer clic.
Mientras el usuario mantiene pulsado el botón derecho del ratón no aparece este evento.
Cuando el operador suelta el botón del ratón después de hacer clic en un botón aparece este
evento, también cuando el puntero del ratón ya no se encuentre sobre el botón.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Parada de runtime
Descripción
Aparece cuando el usuario finaliza el software runtime en el panel de operador.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.
Nota
Al evento "Parada de runtime" no se le puede asociar ninguna función definida por el usuario.

Pulsar el botón "Visor de avisos"
Descripción
Aparece cuando el usuario pulsa el botón "Visor de avisos".
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1811

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Pulsar el botón "Visor de código PLC"
Descripción
Aparece cuando el usuario pulsa el botón "Visor de código PLC".
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Hacer clic en botón de la barra de herramientas
Descripción
Aparece cuando el usuario hace clic en un botón en la barra de herramientas.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Modificar deslizador
Descripción
Se produce cuando se modifica el deslizador del volumen.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Elementos (Página 1781)

1812

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

PasoAdelante
Descripción
Se produce cuando el archivo de vídeo o audio pasa a la siguiente secuencia.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Elementos (Página 1781)

PasoAtrás
Descripción
Se produce cuando el archivo de vídeo o audio pasa a la secuencia anterior.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Elementos (Página 1781)

Bloqueo modificado
Descripción
Se produce cuando en el fichero cambia el acceso de escritura, p. ej., de bloqueado a
habilitado.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1813

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Estado modificado
Descripción
Aparece cuando se modifica el estado de un aviso, p. ej., de Aparecido a Desaparecido.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Parada
Descripción
Se produce cuando se para la reproducción del archivo de vídeo o audio.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Elementos (Página 1781)

Conmutar barra de herramientas
Descripción
Se produce cuando se modifica la propiedad del eje de tiempo.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Elementos (Página 1781)

1814

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Pulsar tecla
Descripción
Aparece cuando el usuario pulsa una tecla de función.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Editores (Página 1769)
Objetos básicos (Página 1770)
Elementos (Página 1772)
Controles (Página 1773)

Soltar tecla
Descripción
Aparece cuando el usuario suelta una tecla de función.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Editores (Página 1769)
Objetos básicos (Página 1770)
Elementos (Página 1772)
Controles (Página 1773)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1815

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Pulsar tecla en teclado
Descripción
Aparece cuando el usuario pulsa una tecla del teclado.
El operador no utiliza las teclas <F10> y <ALT+IMPR.> para manejar el proceso.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Soltar tecla en teclado
Descripción
Aparece cuando el usuario suelta una tecla del teclado.
El operador no utiliza las teclas <F10> y <ALT+IMPR.> para manejar el proceso.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Desbordamiento
Descripción
Aparece cuando se ha alcanzado el tamaño configurado de un fichero. Se utilizar el tipo de
fichero "Disparar evento".
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Editores (Página 1769)
Objetos básicos (Página 1770)

1816

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia
Elementos (Página 1772)
Controles (Página 1773)

Conmutar
Descripción
Aparece cuando el usuario conmuta un objeto de manejo y visualización, p. ej. un interruptor
de "ON" a "OFF".
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Editores (Página 1769)
Objetos básicos (Página 1770)
Elementos (Página 1772)
Controles (Página 1773)

Conmutar OFF
Descripción
Aparece cuando el usuario mueve el objeto de manejo e indicación "Interruptor" a la posición
OFF.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Editores (Página 1769)
Objetos básicos (Página 1770)
Elementos (Página 1772)
Controles (Página 1773)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1817

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Conmutar ON
Descripción
Aparece cuando el usuario mueve el objeto de manejo e indicación "Interruptor" a la posición
ON.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Editores (Página 1769)
Objetos básicos (Página 1770)
Elementos (Página 1772)
Controles (Página 1773)

Conectado
Descripción
Aparece cuando el usuario conecta un Mobile Panel a una caja de conexión.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador.

Cambiar formato de vídeo
Descripción
Se produce cuando se modifica el formato de vídeo.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

1818

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Consulte también
Elementos (Página 1781)

Pantalla completa
Descripción
Se produce cuando se activa el modo de pantalla completa.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Elementos (Página 1781)

Salir de la pantalla completa
Descripción
Se produce cuando se sale del modo de pantalla completa.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Elementos (Página 1781)

Poca memoria disponible
Descripción
Aparece cuando en el medio de almacenamiento en el que se guarda un Audit Trail hay menos
espacio de memoria disponible que la cantidad mínima configurada.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1819

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Consulte también
Editores (Página 1769)
Objetos básicos (Página 1770)
Elementos (Página 1772)
Controles (Página 1773)

Poca memoria disponible, crítico
Descripción
Aparece cuando en el medio de almacenamiento en el que se guarda un Audit Trail no hay
suficiente espacio de memoria disponible (debido al hardware).

Consulte también
Editores (Página 1769)
Objetos básicos (Página 1770)
Elementos (Página 1772)
Controles (Página 1773)

Cambio de valor
Descripción
Aparece cuando cambia el valor de una variable o el valor de un elemento de matriz.
El valor de una variable es modificado por el controlador o bien por el usuario (p. ej. si introduce
un nuevo valor). Si una función del sistema cambia el valor, no se notificará ningún evento.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Editores (Página 1769)
Objetos básicos (Página 1770)
Elementos (Página 1772)
Controles (Página 1773)

1820

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

Reproducción
Descripción
Se produce cuando se reproduce el archivo de vídeo o audio.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Elementos (Página 1781)

Tiempo agotado
Descripción
Aparece una vez transcurrido el tiempo configurado en el planificador de tareas.
Nota
Tenga en cuenta que la disponibilidad del evento depende del panel de operador y del tipo de
objeto.

Consulte también
Editores (Página 1769)
Objetos básicos (Página 1770)
Elementos (Página 1772)
Controles (Página 1773)

9.11.3

WinCC Engineering V16: Referencia para la programación

Referencia para la programación WinCC
Encontrará una descripción detallada de VB-Scripting, C-Scripting y Runtime API en el manual
"WinCC Professional V16 - Referencia para la programación".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1821

Trabajar con funciones de sistema y Runtime Scripting
9.11 Referencia

1822

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Mobile Panels
10.1

Principios básicos

10.1.1

Zonas

10

Introducción
El apartado siguiente es aplicable a los siguientes Mobile Panels:
● KTP Mobile Panels, con cable, p. ej. Mobile Panel KTP700
El área de trabajo "Zonas" es visible únicamente en estos paneles de operador.

Abrir
En función del panel de operador seleccionado, el área de trabajo se abre en la ventana de
proyecto haciendo doble clic en "Zonas" o "Zonas y rangos efectivos".

Área de trabajo
Para Mobile Panels con cable, el área de trabajo "Zonas" muestra las zonas configuradas y la
ID correspondiente a la caja de conexión.

Ventana de inspección
Cuando una zona está seleccionada, el nombre y el nombre de visualización se editan en
"General".
En los Mobile Panels con cable se introduce la ID de la caja de conexión. La zona de una caja
de conexión tiene el evento "Conectado".
A estos eventos se debe asociar la función de sistema "ActivarImagen".

Consulte también
Documentación completa de los Mobile Wireless (http://
support.automation.siemens.com/WW/view/es/26268960)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1823

Mobile Panels
10.1 Principios básicos

10.1.2

Área de trabajo Zonas en cajas de conexión

Introducción
En el área de trabajo "Zonas", las IDs de las cajas de conexión y sus zonas se visualizan en
forma de tabla.
Debe crearse una lista de IDs de cajas de conexión y asignar determinadas cajas de conexión
a una zona. El límite de la zona se define por la longitud del cable de conexión del Mobile Panel.

Principio
El área de trabajo está formada por la tabla "Zonas".

La ID de caja se ajusta en la caja de conexión y puede leerse desde el panel de operador.

1824

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Mobile Panels
10.2 Configuración de los KTP Mobile Panels para el modo de seguridad positiva

10.2

Configuración de los KTP Mobile Panels para el modo de seguridad
positiva

10.2.1

Crear un KTP Mobile Panel para el modo de seguridad

Introducción
Para los siguientes KTP Mobile Panels, el modo de seguridad se configura en el editor
"Dispositivos y redes":
● KTP400F Mobile Panel
● KTP700F Mobile Panel
● KTP900F Mobile Panel

Requisitos
● La ventana de inspección está abierta.
● Hay un PLC creado en el proyecto para el modo de seguridad, p. ej., CPU-1517F-2PN/DP.

Insertar un Mobile Panel en el proyecto
1. Haga clic en "Agregar dispositivo" en el árbol del proyecto.
2. Haga clic en "HMI" en el cuadro de diálogo "Agregar dispositivo".
3. Elija un KTP Mobile Panel para el modo de seguridad, p. ej., Mobile Panel KTP700F. El
panel se inserta en el proyecto.

Configurar el modo de seguridad para el Mobile Panel
1. Abra la vista de redes en el editor "Dispositivos y redes".
2. Seleccione el Mobile Panel en el área de trabajo.
3. En la ventana de inspección, active "Propiedades > General > Modo de operación >
Dispositivo IO".
4. Asigne el PLC de seguridad mediante "Controlador IO asignado".
PROFINET está activado y se muestran las áreas de transferencia de la comunicación IDevice.
5. En la ventana de inspección, en "Propiedades > General > PROFIsafe", haga clic en
"Activar PROFIsafe".
PROFIsafe está activado, y en "Propiedades > General > Parámetros PROFIsafe >
Parámetros F" se muestran los parámetros F.
6. Para introducir un nuevo tiempo de vigilancia F, active "Asignación manual de tiempo de
vigilancia F".
7. Introduzca un tiempo de vigilancia F adecuado para su panel de operador y su instalación.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1825

Mobile Panels
10.2 Configuración de los KTP Mobile Panels para el modo de seguridad positiva

Resultado
El modo de seguridad para el KTP Mobile Panel está configurado en WinCC. A continuación,
cree en STEP 7 los bloques F correspondientes e interconéctelos en el controlador. En el
Mobile Panel debe ajustarse la dirección PROFIsafe.
Para más información sobre parametrización y programación de bloques F, ver el manual
"SIMATIC Safety - Configuring and Programming" de la documentación STEP 7 y el manual de
producto de su Mobile Panel.

10.2.2

Configurar la desconexión PROFIsafe

Procedimiento
Antes de desenchufar el Mobile Panel de una caja de conexión, hay que desconectar
PROFIsafe.
Para desconectar PROFIsafe, utilice la función de sistema "DesconectarPROFIsafe". La
función de sistema reenvía la llamada al módulo PROFINET I/O de seguridad.

Requisitos
● Se ha creado un Mobile Panel para el modo de seguridad, p. ej., KTP700F Mobile Panel.
● Se ha creado y abierto una imagen.

Procedimiento
Para configurar el establecimiento de conexión PROFIsafe y la desconexión, proceda del
siguiente modo:
● Asocie la función de sistema "DesconectarPROFIsafe", p. ej., a un botón o utilícela en un
script.

Resultado
Cuando en runtime se inicia el disparador configurado para desconectar PROFIsafe, se abre
un cuadro de diálogo para finalizar la conexión PROFIsafe. El usuario puede seleccionar "Sí"
o "No".

1826

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Mobile Panels
10.3 Trabajar con zonas de cajas de conexión

10.3

Trabajar con zonas de cajas de conexión

10.3.1

Configurar una zona de una caja de conexión

Validez
El párrafo siguiente es aplicable a todos los KTP Mobile Panels p. ej. el Mobile Panel KTP700.

Introducción
Las zonas se configuran para realizar tareas de manejo y visualización específicas de la
instalación.

Requisitos
● En el editor "Idiomas del proyecto" está ajustado el idioma de edición correcto, p. ej.
"Español".
● El área de trabajo "Zonas" está abierta.

Procedimiento
1. Haga doble clic en "Agregar..." en la tabla "Zonas".
2. Como "ID" introduzca la ID de su caja de conexión.
3. Como "Nombre" de la zona, introduzca "MixingPlant".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1827

Mobile Panels
10.3 Trabajar con zonas de cajas de conexión
4. Introduzca como "Nombre de visualización" de la zona en runtime "Planta mezcladora".

5. Repita estos pasos para todas las cajas de conexión necesarias en el proyecto.

Resultado
La zona "MixingPlant" está configurada. El alcance de la zona viene definido por la longitud del
cable de conexión del Mobile Panel.
El nombre de visualización designa la zona en el idioma de edición ajustado. Encontrará una
relación de los nombres de visualización en el editor "Textos del proyecto".

10.3.2

Llamada de funciones de sistema al conectar a la caja de conexión

Introducción
Existe la posibilidad de lanzar distintas funciones de sistema al entrar en una zona, p. ej., llamar
una imagen emergente configurada o iniciar o cerrar la sesión del usuario actual. Además,
puede utilizar funciones VB definidas por el usuario que también podrá seleccionar en la lista
de funciones.
En el siguiente ejemplo, se configura la imagen que se mostrará al conectar un Mobile Panel
a una caja de conexión.

1828

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Mobile Panels
10.4 Referencia

Requisitos
● Se ha creado un Mobile Panel que soporta zonas, p. ej. Mobile Panel KTP700.
● La zona "MixingPlant" está configurada.
● La imagen "Plant_1" está creada y abierta.
● La imagen "MixingPlant_1" está creada y abierta.
● El área de trabajo "Zonas" está abierta.

Procedimiento
1. Seleccione la zona "MixingPlant" en la tabla "Zonas".
2. En la ventana de inspección haga clic en "Propiedades > Eventos".
3. Haga clic en el evento "Conectado".
4. Seleccione la función de sistema "ActivarImagen" en la "Lista de funciones".
5. Seleccione "MixingPlant_1" como "Nombre de imagen".

Resultado
Cuando el Mobile Panel se conecta a la caja de conexión de la zona "MixingPlant", en la
pantalla del panel de operador se muestra la imagen "MixingPlant_1".

10.4

Referencia

10.4.1

Dirección PROFIsafe

Validez
La dirección PROFIsafe está disponible para Mobile Panels Wireless y dispositivos KTP F.
Nota
Para más información sobre el funcionamiento de seguridad, consulte las instrucciones de
servicio del panel de operador:
Documentación completa de los Mobile Wireless (http://
support.automation.siemens.com/WW/view/es/26268960)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1829

Mobile Panels
10.4 Referencia

Dirección PROFIsafe
La dirección PROFIsafe es la dirección unívoca en la red y en el equipo de la periferia F en la
comunicación PROFIsafe. En el caso de los Mobile Panels Wireless se almacena un valor
estándar en el proyecto que se carga luego en el panel de operador. En el panel de operador
también se puede almacenar una dirección PROFIsafe.
La dirección PROFIsafe debe estar comprendida entre 1 y 65534. Tanto en el Engineering
System como en el panel de operador se comprueba la validez de las direcciones PROFIsafe.
Al inicio de runtime, la dirección PROFIsafe se carga como se indica a continuación:
● En el Control Panel se ha parametrizado una dirección PROFIsafe válida:
El panel de operador carga la dirección PROFIsafe configurada en el Control Panel.

10.4.2

Administración de energía

Validez
En el editor "Configuración de runtime > Administración de energía" se configura el modo de
ahorro de energía de un Mobile Panel.

Administración de energía
El Mobile Panel Wireless puede ahorrar energía de las maneras siguientes:
● Reducir el brillo (ahorro leve)
● Apagar monitor, ahorro considerable
Indique al cabo de cuánto tiempo sin intervención del operador se debe activar la
administración de energía. El enlace de comunicación se conserva. El tiempo para "Apagar
monitor" es mayor que el tiempo para "Reducir brillo".

1830

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Planificar tareas
11.1

Principios básicos

11.1.1

Campo de aplicación del planificador de tareas

11

Definición
En el planificador de tareas se configuran las tareas que se ejecutarán en segundo plano,
independientemente de la imagen. Las tareas se crean vinculando las funciones de sistema o
scripts a un disparador. Cuando se produce el evento activador, se llaman las funciones
vinculadas.

Ejemplo de aplicación
El planificador de tareas sirve para ejecutar tareas controladas por eventos de forma
automatizada. Con una tarea es posible automatizar p. ej. que
● los datos de fichero se trasvasen en intervalos regulares
● se imprima un informe al desbordarse el búfer de avisos
● se imprima un informe al finalizar el turno
● se vigile una variable
● se vigile un cambio de usuario
Nota
La disponibilidad de los ejemplos mencionados depende del panel de operador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1831

Planificar tareas
11.1 Principios básicos

11.1.2

Trabajar con tareas y disparadores

Introducción
Una tarea comprende un disparador y un tipo de tarea.

Inicio de una tarea
Controlada por un disparador, el planificador de tareas inicia la tarea vinculada al disparador.

11.1.3

Área de trabajo del editor Planificador de tareas

Introducción
El planificador de tareas se abre en la ventana del proyecto haciendo doble clic en "Planificador
de tareas". El área de trabajo muestra las tareas planificadas, que se componen del disparador
que las desencadena y el tipo de tarea, p. ej. la lista de funciones.

1832

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Planificar tareas
11.1 Principios básicos

Estructura
El área de trabajo está formada por la tabla de tareas.

La tabla de las tareas muestra las tareas definidas con sus propiedades, p. ej. el disparador
que las desencadena. Hay que seleccionar un tipo de tarea y un disparador y asignar un
nombre y un comentario a la tarea. La descripción resume en forma de texto la tarea con la
hora planificada.

Ventana de inspección
La ficha "Propiedades" de la ventana de inspección se divide en dos áreas.
El área "Tarea" muestra también el nombre y el tipo de tarea. El área "Instante de inicio"
muestra el disparador desencadenante. El área varía según sea la selección del disparador.
En la ficha "Eventos" se configura la lista con las funciones de sistema que se ejecutarán en
la tarea.
Nota
Encontrará más información sobre los objetos de la interfaz en los tooltips. Desplace para ello
el puntero del ratón hasta el objeto deseado, o bien pulse <F1> si el objeto está seleccionado.

11.1.4

Disparador

Introducción
Un disparador se vincula a una tarea y, de este modo, forma el evento que desencadena la
llamada de esta tarea. Cuando aparece el disparador, se ejecuta la tarea.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1833

Planificar tareas
11.1 Principios básicos

Disparo por eventos
Cuando una tarea está vinculada a un evento de sistema, se lanza controlada por el evento.
Son eventos del sistema, por ejemplo, la parada de runtime, el cambio de imagen, el cambio
de usuario, etc.
Cada evento de sistema puede configurarse una sola vez por panel de operador.

Desactivar una tarea
Si una tarea no se necesita temporalmente, es posible desactivarla en el sistema de ingeniería.
El disparador "Desactivado" vuelve a poner a disposición un evento de sistema ya configurado.
Ejemplo: Ha planificado una tarea "A" con el evento de sistema "Parada de runtime". Por tanto,
este evento de sistema ya no estará disponible para la tarea "B". Para volver a poner a
disposición el evento de sistema "Parada de runtime", seleccione en la tarea "A" el disparador
"Desactivado".
Nota
Los disparadores disponibles dependen del panel de operador.

11.1.5

Disparador

Introducción
Un disparador se vincula a una tarea y, de este modo, forma el evento que desencadena la
llamada de esta tarea. Cuando aparece el disparador, se ejecuta la tarea.
Nota
Los disparadores disponibles dependen del panel de operador.

Tipos de disparador
El planificador de tareas distingue entre diferentes tipos de disparador:

Disparadores acíclicos
Consisten en la indicación de la fecha y hora. El planificador de tareas ejecuta las tareas con
disparador acíclico una vez en la fecha y la hora indicadas.

1834

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Planificar tareas
11.1 Principios básicos

Disparadores cíclicos
Las tareas que están vinculadas a un disparador cíclico se producen periódicamente en un
momento determinado.
● Ciclo estándar: en el ciclo estándar, el principio del primer intervalo de tiempo coincide con
el inicio de runtime. La longitud del intervalo viene determinada por el ciclo.
● Disparador con un instante de inicio definido: se definen un instante de inicio y un intervalo
de tiempo. Con disparadores cíclicos, las tareas se ejecutan diaria o semanalmente, por
ejemplo. Si se elige "Semanal" como disparador, por ejemplo, la longitud del intervalo será
una semana. El principio del intervalo de tiempo se define con el día de la semana y la hora.
● El disparo más rápido disponible para Runtime Professional es de 250 ms.
Nota
Ciclos definidos por el usuario
Se han definido ciclos propios. En el planificador de tareas solo pueden utilizarse ciclos cuyos
valores no excedan de una hora.

Disparo por eventos
Cuando una tarea está vinculada a un evento de sistema, se lanza controlada por el evento.
Al contrario que los disparadores cíclicos, los eventos de sistema suelen aparecer
acíclicamente. Un evento de sistema es p. ej. una parada de runtime.
Cada evento de sistema puede configurarse una sola vez por panel de operador.

Desactivar una tarea
Si una tarea no se necesita temporalmente, es posible desactivarla en el sistema de ingeniería.
El disparador "Desactivado" vuelve a poner a disposición un evento de sistema ya configurado.
Ejemplo: Ha planificado una tarea "A" con el evento de sistema "Cambio de usuario". Por tanto,
este evento de sistema ya no estará disponible para la tarea "B". Para volver a poner a
disposición el evento de sistema "Cambio de sistema", seleccione en la tarea "A" el disparador
"Desactivado".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1835

Planificar tareas
11.1 Principios básicos

11.1.6

Temporizador en disparadores cíclicos

Temporizador en disparadores cíclicos y acíclicos
Existe la posibilidad de modificar dinámicamente el instante de inicio de una tarea en runtime.
Como temporizador se selecciona una variable HMI. El valor de la variable determinará en
runtime el momento en que se iniciará la tarea.
Nota
Una variable HMI debe ser del tipo "DateTime". Una variable PLC debe ser del tipo "Date and
Time" o "DTL".
Si el operador no modifica la variable tras el inicio de runtime, el instante de inicio será el
momento configurado en la tarea. Cuando el operador modifique la variable por primera vez,
el valor actual de la misma será siempre el instante de inicio. Para poder reajustar el momento
configurado como instante de inicio, el operador deberá introducir el momento configurado.

11.1.7

Disparador de variable

Disparador de variable
Además de los disparadores acíclicos y cíclicos y de los disparos por eventos, WinCC también
dispone del disparador de variable.
Los disparadores de variable consisten en la indicación de una o varias variables. La tarea que
está vinculada a un disparador de este tipo sólo se ejecuta cuando cambia un valor de variable.
De este modo se consigue reducir la carga del sistema. Es posible ajustar individualmente para
cada variable el ciclo en el que se consultarán los valores de variable. Para los ciclos de
consulta se elige entre "250 ms" y una vez por hora. Adicionalmente, existen ciclos de usuario
definidos por el propio usuario.

1836

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Planificar tareas
11.1 Principios básicos

Reglas para seleccionar el disparador
Al procesar variables, utilice el disparador de variable en lugar del disparador cíclico. Con ello
se reduce la carga del sistema.
● Disparador de variable
La tarea sólo se ejecuta cuando cambia el valor de la variable.
= la tarea se ejecuta.

● Disparador cíclico
Se han seleccionado, por ejemplo, "10 segundos" como disparador cíclico. Cuando
aparece el disparador, se ejecuta una tarea.
= la tarea se ejecuta.

11.1.8

Lista de funciones

Lista de funciones
Un disparador inicia la lista de funciones. La lista de funciones se procesa fila por fila. Cada fila
contiene una función de sistema. En cada tarea se configura exactamente una lista de
funciones.
Nota
Las funciones de sistema configurables que se pueden seleccionar en una lista de funciones
dependen del disparador seleccionado y del panel de operador utilizado.

Consulte también
Conexión de VB Scripts locales (Página 1840)
Conexión de C Scripts locales (Página 1841)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1837

Planificar tareas
11.1 Principios básicos

11.1.9

Lista de funciones

Lista de funciones
Un disparador inicia la lista de funciones. La lista de funciones se procesa fila por fila. Cada fila
contiene una función de sistema o un script local. En cada tarea se configura exactamente una
lista de funciones.
Nota
Las funciones de sistema configurables que se pueden seleccionar en una lista de funciones
dependen del disparador seleccionado y del panel de operador utilizado.

Procesamiento de funciones de sistema y scripts
Por norma general, las funciones de sistema y los scripts contenidos en una lista de funciones
se procesan en runtime de forma secuencial, es decir, de arriba a abajo.
Para programar procesos no secuenciales y condicionados, utilice un script con bucles,
instrucciones condicionadas y condiciones de interrupción.

11.1.10

Trabajo de impresión

Introducción
Además de la "Lista de funciones", WinCC Runtime Professional también dispone del tipo de
tarea "Trabajo de impresión".

1838

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Planificar tareas
11.1 Principios básicos

Trabajo de impresión
Para imprimir el informe se crea un trabajo de impresión. Si aparece un disparador cíclico o
acíclico, el planificador de tareas inicia la impresión de un informe. En el editor "Trabajos de
impresión" se definen previamente el volumen de páginas y el rango de tiempo del informe.
Asimismo, se especifica si el informe debe imprimirse en la impresora o en un archivo.

Si se ha seleccionado "Trabajo de impresión" como tipo de tarea, en el área "Tarea" aparece
un campo adicional. En el campo "Trabajo de impresión" se selecciona el trabajo de impresión
previamente definido para la tarea.
Nota
Para utilizar el tipo de tarea "Trabajo de impresión", active "Trabajos de impresión previstos en
runtime" en la secuencia de inicio de WinCC Runtime.
Haga clic en el editor "Configuración de runtime > Servicios > Trabajos de impresión previstos
en runtime".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1839

Planificar tareas
11.1 Principios básicos

11.1.11

Conexión de VB Scripts locales

Introducción
Además de los tipos de tarea "Lista de funciones" y "Trabajo de impresión", Runtime
Professional también dispone de una conexión de VB scripts locales.

Conexión de VB Scripts locales
Los scripts locales son creados y modificados por el usuario. También es posible convertir en
un script local las funciones de sistema ofrecidas en la lista de funciones y editar
posteriormente el código. El VB Script local se guarda junto con la tarea.
Un disparador inicia el script en runtime. Si se convierte una lista de funciones en un VB Script,
ya no será posible acceder a la lista de funciones para la tarea en cuestión. Para acceder de
nuevo a la lista de funciones hay que borrar el VB Script.
El planificador de tareas ofrece la posibilidad de iniciar VB Scripts independientemente de
imágenes. En los VB Scripts se accede a las variables e imágenes en runtime.
No existe ningún área de datos común entre los scripts del planificador de tareas y los de las
imágenes. Los scripts del planificador de tareas y de las imágenes sólo se sincronizan por
medio del objeto DataSet o de variables. El tipo de datos de las variables VBS es siempre
VARIANT.
El VB Script local no se procesa en paralelo. El último script lanzado se pone en un bucle de
espera hasta que pueda procesarse.
Nota
Al crear un script, la instrucción "Option explicit" se registra automáticamente en el área de
declaración, y no puede borrarse. Dicha instrucción es necesaria para impedir errores
causados por una notación errónea de las variables sin declaración.
La instrucción requiere que las variables siempre se definan con la instrucción "Dim" en el
código. No utilice la instrucción "Option explicit" en el código, pues podrían producirse errores
en el tiempo de ejecución.

Requisitos
Para utilizar la lista de funciones y los scripts locales, active "Tareas en runtime" en la
secuencia de inicio de WinCC.
Haga clic en el editor "Configuración de runtime > Servicios > Tareas en runtime".
Nota
No es posible llamar C Scripts en VB Scripts ni viceversa.

1840

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Planificar tareas
11.1 Principios básicos

Ciclos de usuario como disparador
Si se utilizan ciclos de usuario como disparadores para VB scripts, los scripts se ejecutarán en
runtime siempre con una granularidad de 250 ms.

Consulte también
Lista de funciones (Página 1837)

11.1.12

Conexión de C Scripts locales

Introducción
Además de los tipos de tarea "Lista de funciones" y "Trabajo de impresión", Runtime
Professional también dispone de una conexión de C scripts locales.

Conexión de C Scripts locales
Los scripts locales son creados y modificados por el usuario. También es posible convertir en
un C Script local las funciones de sistema ofrecidas en la lista de funciones y editar
posteriormente el código. El C Script local se guarda junto con la tarea.
Un disparador inicia el script en runtime. Si se convierte una lista de funciones en un C Script,
ya no será posible acceder a la lista de funciones para la tarea en cuestión. Para acceder de
nuevo a la lista de funciones hay que borrar el C Script.
Un disparador inicia el C Script local en runtime.
El C Script local no se procesa en paralelo. El último script lanzado se pone en un bucle de
espera hasta que pueda procesarse.

Requisitos
Para utilizar la lista de funciones y los scripts locales, active "Tareas en runtime" en la
secuencia de inicio de WinCC.
Haga clic en el editor "Configuración de runtime > Servicios > Tareas en runtime".
Nota
No es posible llamar C Scripts en VB Scripts ni viceversa.

Ciclos de usuario como disparador
Si se utilizan ciclos de usuario como disparadores para C scripts, los scripts se ejecutarán en
runtime siempre con una granularidad de 250 ms.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1841

Planificar tareas
11.2 Planificar tareas

Consulte también
Lista de funciones (Página 1837)

11.2

Planificar tareas

11.2.1

Planificar una tarea con el disparador acíclico

Introducción
Se prevé finalizar una única vez el runtime para trabajos de mantenimiento. La tarea inicia una
función que finaliza el runtime.

Requisitos
● El editor "Planificador de tareas" está abierto.
● La ventana de inspección está abierta.

Procedimiento
1. Haga clic en "Agregar..." en la tabla del área de tareas.
2. Introduzca el nombre "Mantenimiento al finalizar el año".
3. Seleccione el disparador "Una vez".
4. En la ventana de inspección seleccione "31.12.2008" en "Propiedades > Propiedades >
General > el".
5. En el campo "a las", indique las "18:00" horas.
6. Haga clic en la ventana de inspección "Propiedades > Eventos".

1842

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Planificar tareas
11.2 Planificar tareas
7. Seleccione la función de sistema "PararRuntime" en la lista de funciones.
8. Bajo "Modo", seleccione "Runtime".

Resultado
La tarea se ejecuta una sola vez. El 31 de diciembre de 2008 a las 18:00 horas se parará el
runtime.
Nota
Evento "PararRuntime" en RT Professional
Tenga en cuenta que en el evento "PararRuntime", el runtime ya está finalizando y, por lo tanto,
no todas las funciones están disponibles.

11.2.2

Planificar una tarea con el disparador cíclico

Introducción
Se planifica una tarea que inicie la impresión diaria de un informe.

Requisitos
● Se ha creado un panel de operador con Runtime Professional.
● El trabajo de impresión "Informe diario de avisos" está creado.
● El área de trabajo "Planificador de tareas" está abierta.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1843

Planificar tareas
11.2 Planificar tareas

Procedimiento
1. Haga clic en "Agregar..." en la tabla del área de tareas.
2. Seleccione el tipo "Trabajo de impresión".
3. En "Nombre", introduzca "Impresión diaria del informe de avisos".
4. Seleccione el disparador "Diario".
5. Indique las "18:00" horas en la ventana de inspección "Propiedades > Propiedades >
General > a las".
6. Seleccione el trabajo de impresión "Informe diario de avisos" en el área "Tarea".

7. Abra el editor "Configuración de runtime > Servicios".
8. Active "Secuencia de inicio de WinCC Runtime > Trabajos de impresión previstos en
runtime".

1844

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Planificar tareas
11.2 Planificar tareas

Resultado
El "Informe diario de avisos" se imprime cada día a las 18 horas.

11.2.3

Planificar una tarea con el disparo por eventos

Introducción
Se planifica una tarea que lance un cambio de imagen al cambiar de usuario.

Requisitos
● El área de trabajo "Planificador de tareas" está abierta.
● La imagen "Inicio" se deberá haber creado.

Procedimiento
1. Haga clic en "Agregar..." en la tabla del área de tareas.
2. En "Nombre", introduzca "Cambio de imagen al cambiar de usuario".
3. Seleccione el disparador "Cambio de usuario".
4. En la ventana de inspección haga clic en "Propiedades > Eventos".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1845

Planificar tareas
11.2 Planificar tareas
5. Seleccione la función de sistema "Imágenes/ActivarImagen" en la lista de funciones.
6. Seleccione la imagen "Inicio" en el campo "Nombre de imagen".

Resultado
La tarea se ejecutará con el evento "Cambio de usuario". Si un usuario nuevo inicia una sesión,
aparecerá la imagen "Inicio".

11.2.4

Administrar una tarea

Cambiar denominación
1. Haga doble clic en el campo situado en la columna "Nombre" de la vista.
2. Cambie el nombre de la tarea.
3. Confirme con la tecla <Return>.

1846

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Planificar tareas
11.3 Ejemplos de Runtime Professional
Otra posibilidad es cambiar el nombre en la ventana de inspección "Tarea > Nombre".

Modificar un disparador
1. Seleccione el campo de la columna "Disparador" en el área de trabajo.
2. Abra la lista de selección pulsando el botón

y seleccione el disparador que desee.

Otra posibilidad es cambiar el disparador en el área "Instante de inicio" de la ventana de
inspección.

Borrar una tarea
1. Seleccione una o varias líneas de la tarea que desea borrar.
2. Abra con el botón derecho del ratón el menú contextual y seleccione el comando "Borrar".
Otra posibilidad es borrar una o varias tareas con ayuda del botón <SUPR>.

11.3

Ejemplos de Runtime Professional

11.3.1

Ejemplo: activar la imagen inicial cada día

Introducción
Se planifica una tarea que active cada día, antes de que empiece el turno, la imagen inicial con
el cuadro de diálogo de inicio de sesión.

Requisitos
● Se ha creado una "Imagen inicial".
● El área de trabajo "Planificador de tareas" está abierta.

Procedimiento
1. Haga clic en "Agregar..." en la tabla "Tareas".
2. En "Nombre", escriba "Activar imagen inicial".
3. Seleccione el tipo "Lista de funciones".
4. Seleccione el disparador "Diario".
5. Indique las "05:30" horas en la ventana de inspección "Propiedades > Propiedades >
General > a las".
6. En la ventana de inspección abra "Propiedades > Eventos".
7. Seleccione la función de sistema "ActivarImagen" en el grupo "Imágenes" de la lista de
funciones.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1847

Planificar tareas
11.3 Ejemplos de Runtime Professional
8. En "Nombre de imagen", seleccione "Imagen inicial".

9. Abra el editor "Configuración de runtime > Servicios".
10.Active "Tareas en runtime".

Resultado
La "Imagen inicial" se activa cada día a las 5:30 horas.

11.3.2

Ejemplo: impresión única de un informe

Tarea
Se planifica una tarea que emita un informe una sola vez al finalizar el año.

Requisitos
● La tarea de impresión "Resumen anual" está creada.

1848

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Planificar tareas
11.3 Ejemplos de Runtime Professional

Procedimiento
1. Haga clic en "Agregar..." en la tabla del área de tareas.
2. En "Nombre", escriba "Cierre anual".
3. Seleccione el tipo "Trabajo de impresión".
4. Seleccione el disparador "Una vez".
5. En la ventana de inspección seleccione la fecha "31.12.2010" en "Propiedades >
Propiedades > General > el".
6. En el campo "a las", indique las "22:00" horas.
7. Seleccione el trabajo de impresión "Resumen anual" en el área "Tarea".

8. Abra el editor "Configuración de runtime > Servicios".
9. Active "Secuencia de inicio de WinCC Runtime > Trabajos de impresión previstos en
runtime".

Resultado
El 31.12.2008 a las 22:00 horas se iniciará el trabajo de impresión "Resumen anual".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1849

Planificar tareas
11.3 Ejemplos de Runtime Professional

11.3.3

Ejemplo: leer el nombre del usuario actual

Introducción
Se planifica una tarea que escriba el usuario actual en un campo de texto.

Requisitos
● Se ha creado una "Screen_1".
● Se ha creado un campo de texto "Textfield_1" en la imagen "Screen_1".
● El área de trabajo "Planificador de tareas" está abierta.

Procedimiento
1. Haga clic en "Agregar..." en la tabla del área de tareas.
2. En "Nombre", introduzca "Leer el nombre de usuario".
3. Seleccione el disparador "Disparador de variable".
4. En la ventana de inspección haga clic en "Propiedades > Propiedades > General > Añadir
disparador".
5. Seleccione la variable de sistema "@CurrentUser".
6. Seleccione el ciclo "1 min".
7. En la ventana de inspección abra "Propiedades > Eventos".
8. Haga clic en

en el área "Lista de funciones".

9. Introduzca el VB Script siguiente:

Sub Action ()
Dim user
user = HMIRuntime.Tags("@CurrentUser").Read
HMIRuntime.Screens("Screen_1").ScreenItems("Textfield_1").Text = user
End Sub

1. Abra el editor "Configuración de runtime > Servicios".
2. Active "Tareas en runtime".

Resultado
Cuando cambie el valor de la variable, el usuario actual se escribirá en el campo de texto
"Textfield_1".

1850

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Planificar tareas
11.3 Ejemplos de Runtime Professional

11.3.4

Ejemplo: incrementar una variable

Introducción
Se planifica una tarea que cada hora incremente en uno el valor de una variable.

Requisitos
● Se ha creado un panel de operador con Runtime Professional.
● El área de trabajo "Planificador de tareas" está abierta.
● La variable "Tag1" está creada.

Procedimiento
1. Haga clic en "Agregar..." en la tabla del área de tareas.
2. Seleccione el tipo "Lista de funciones".
3. En "Nombre", escriba "Incrementar variable".
4. Seleccione como "disparador" "1 hora".
5. En la ventana de inspección "Propiedades > Propiedades > General > Instante de inicio >
al minuto" especifique el valor "35:00".
6. En la ventana de inspección abra "Propiedades > Eventos".
7. Haga clic en

en el área "Lista de funciones".

8. Introduzca el siguiente código de programa en el campo de entrada:

Sub Action ()
Dim objTag1
Dim lngValue
Set objTag1 = HMIRuntime.Tags("Tag1")
lngValue = objTag1.Read
objTag1.Write lngValue + 1
End Sub

1. Abra el editor "Configuración de runtime > Servicios".
2. Active "Tareas en runtime".

Resultado
La variable se incrementa cíclicamente.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1851

Planificar tareas
11.4 Ejemplos de Runtime Advanced y Panels

11.4

Ejemplos de Runtime Advanced y Panels

11.4.1

Ejemplo: actualizar los usuarios al cambiar de usuario

Tarea
Desea configurar un campo E/S en el que se visualice el usuario que ha iniciado la sesión.
Desea planificar una tarea que actualice el campo E/S al cambiar de usuario.

Requisitos
● Se deberá haber creado una variable "CurrentUser" del tipo "String".
● Se ha creado y abierto una imagen.
● Se ha creado un campo E/S en la imagen.

Procedimiento
1. Haga clic en el objeto "Campo E/S".
2. En la ventana de inspección haga clic en "Propiedades > Propiedades > General":
– Seleccione el formato de visualización "Cadena de caracteres".
– Seleccione la variable "CurrentUser".
– Seleccione el modo "Salida".
3. Conmute al área de trabajo del planificador de tareas.
4. Haga clic en "Agregar..." en la tabla del área de tareas.
5. En "Nombre", introduzca "CurrentUser".
6. Seleccione el disparador "Cambio de usuario".
7. En la ventana de inspección haga clic en "Propiedades > Eventos".

1852

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Planificar tareas
11.4 Ejemplos de Runtime Advanced y Panels
8. Seleccione la función de sistema "LeerNombreDeUsuario" en el grupo "Administración de
usuarios" de la lista de funciones.
9. Seleccione la variable "CurrentUser".

Resultado
Cuando un nuevo usuario inicie la sesión correctamente, se ejecutará la función de sistema
"LeerNombreDeUsuario". La variable "CurrentUser" se actualizará y en el campo E/S
aparecerá el nuevo usuario que ha iniciado la sesión.
Si un usuario no inicia la sesión correctamente, se cerrará la sesión del usuario que la ha
iniciado. En el campo E/S se seguirá visualizando el usuario antiguo, hasta que un nuevo
usuario inicie una sesión correctamente.

11.4.2

Ejemplo: impresión semanal de un informe

Introducción
Se planifica una tarea que inicie la impresión semanal de un informe.

Requisitos
● Se ha creado un "Informe semanal".
● El área de trabajo "Planificador de tareas" está abierta.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1853

Planificar tareas
11.4 Ejemplos de Runtime Advanced y Panels

Procedimiento
1. Haga clic en "Agregar..." en la tabla del área de tareas.
2. En "Nombre", introduzca "Impresión semanal del informe al finalizar el turno".
3. Seleccione el disparador "Semanal".
4. Seleccione "Viernes" en la ventana de inspección "Propiedades > Propiedades > General
> el".
5. En el campo "a las", indique las "18:00" horas.

6. En la ventana de inspección haga clic en "Propiedades > Eventos".
7. Seleccione la función de sistema "Imprimir/ImprimirInforme" en la lista de funciones.
8. Seleccione el "Informe semanal".

Resultado
El trabajo de impresión semanal se inicia el viernes a las 18:00 horas.

11.4.3

Ejemplo: modificar el instante de inicio de una tarea en runtime

Introducción
Se configura un disparador cíclico "Inicio diario a las 18:00 horas" en el sistema de ingeniería.
La hora "18:00" es una constante. Sin embargo, para cambiar el instante de inicio en runtime,
seleccione una variable como "Temporizador". El valor de la variable determinará en runtime
el momento en que se iniciará la tarea.

Tarea
Planifique una tarea que trasvase diariamente los datos de fichero y que tenga como
temporizador la variable "LogTime". Configure una variable "LogTime" en un campo de
entrada.

1854

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Planificar tareas
11.4 Ejemplos de Runtime Advanced y Panels

Requisitos
● El fichero de origen "DataLogSource" está creado como fichero de variables.
● El fichero de destino "DataLogDestination" está creado como fichero de variables.
● Se ha creado una imagen "ChangeLogTime".

Resumen de los pasos a seguir
1. Crear una variable de temporizador: cree una variable que permita modificar el instante de
inicio del trasvase de ficheros en runtime.
2. Configurar un campo de fecha y hora: por medio del campo de fecha y hora, el operador
cambia el instante de inicio de la tarea en runtime.
3. Configurar una tarea con una variable de temporizador: cree una tarea cuyo instante de
inicio pueda modificarse dinámicamente en runtime.

Resultado
Si no se introduce ningún dato en el campo de entrada "LogDataTimeField", la tarea se iniciará
por defecto todos los días a las 18:00 horas. Los datos de fichero se trasvasarán. Si un
operador introduce 19:00 horas en el campo de entrada "LogDataTimeField", los datos de
fichero se trasvasarán a las 19:00 horas. Para ello, el valor de la variable no debe cambiar
antes de que se inicie la tarea.

11.4.4

Ejemplo: 1. Configurar una variable para runtime

Tarea
En el ejemplo siguiente se configura la variable "LogTime".

Procedimiento
1. Abra el editor "Variables HMI".
2. Haga clic en "Agregar..." en la tabla del área de tareas.
3. Como "Nombre" de la variable indique "LogTime".
4. En la columna "Conexión", seleccione "Variable interna".
5. En la columna "Tipo de datos", seleccione "DateTime".

Resultado
Se ha creado una variable del tipo "DateTime".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1855

Planificar tareas
11.4 Ejemplos de Runtime Advanced y Panels

11.4.5

Ejemplo: 2. Configurar un campo de fecha y hora

Tarea
En el ejemplo siguiente se configura un campo de fecha y hora. Para cambiar el instante de
inicio de la tarea en runtime, la variable "LogTime" se vincula al campo de fecha y hora.

Requisitos
● La variable "LogTime" del tipo "DateTime" está creada.
● La imagen "ChangeLogTime" está abierta.

Procedimiento
1. En la ventana de herramientas, arrastre un "Campo de fecha y hora" desde la categoría
"Objetos simples" hasta la imagen utilizando la función Drag&Drop.
2. En la ventana de inspección haga clic en "Propiedades > Propiedades > General".
3. Desactive la "Hora del sistema".
4. Haga clic en "Variable" y elija "LogTime".
5. Desactive la opción "Mostrar fecha" y active la opción "Mostrar hora".
6. Bajo "Modo", seleccione "Entrada/salida".
7. Haga clic en "Propiedades > Misceláneo".
8. En "Nombre", escriba "LogDataTimeField".

Resultado
El operador indica una hora con el campo de fecha y hora creado.

11.4.6

Ejemplo: 3. Configurar una archivación con una variable de temporizador

Tarea
En el ejemplo siguiente se configurará una tarea con una variable de temporizador que permita
modificar el instante de inicio de la tarea en runtime.

Requisitos
● La variable "LogTime" está creada.
● El fichero de origen "DataLogSource" está creado como fichero de variables.
● El fichero de destino "DataLogDestination" está creado como fichero de variables.
● El área de trabajo del planificador de tareas está abierta.

1856

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Planificar tareas
11.4 Ejemplos de Runtime Advanced y Panels

Procedimiento
1. Haga clic en "Agregar..." en la tabla del área de tareas.
2. En "Nombre", introduzca "Transferencia diaria de un fichero a una hora variable".
3. Seleccione el disparador "Diario".
4. Indique las "18:00" horas en la ventana de inspección "Propiedades > Propiedades >
General > a las".
5. Seleccione la variable "LogTime" como "temporizador estándar".
6. En la ventana de inspección abra "Propiedades > Eventos".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1857

Planificar tareas
11.4 Ejemplos de Runtime Advanced y Panels
7. Seleccione la función de sistema "Funciones de sistema/Ficheros/CopiarFichero" en la lista
de funciones.
8. Seleccione los ajustes siguientes:
– Seleccione "Fichero de variables" como tipo de fichero.
– Seleccione "DataLogDestination" como fichero de destino.
– Seleccione "DataLogSource" como fichero de origen.
– Bajo "Modo", seleccione "Sobrescribir".
– Bajo "Borrar fichero de origen", seleccione la opción "Sí".

Resultado
Si no se introduce ningún dato en el campo de entrada "LogDataTimeField", la tarea se iniciará
por defecto todos los días a las 18:00 horas. Los datos de fichero se trasvasarán. Si un
operador introduce 19:00 horas en el campo de entrada "LogDataTimeField", los datos de
fichero se trasvasarán a las 19:00 horas. Para ello, el valor de la variable no debe cambiar
antes de que se inicie la tarea.

1858

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.1

Configuración del diagnóstico de sistema

12.1.1

Diagnóstico del sistema

12.1.1.1

Principios básicos para Basic Panels

12

Principios básicos del diagnóstico de sistema
Introducción
Con el diagnóstico de sistema se pueden mostrar avisos del búfer de diagnóstico de todas las
conexiones integradas.

Visor de diagnóstico del sistema
El visor de diagnóstico del sistema es un objeto de control y visualización que se utiliza en una
imagen.
Permite navegar directamente hasta la causa de un error y la conexión correspondiente.
Permite acceder a todas las conexiones integradas que ha configurado en el editor
"Dispositivos y redes".

Vistas en el diagnóstico de sistema
Introducción
En el visor de diagnóstico del sistema simple se dispone de tres vistas diferentes:
● Vista de dispositivos
● Vista del búfer de diagnóstico
● Vista detallada

Vista de dispositivos
La vista de dispositivos sólo se muestra, si se ha configurado más de una conexión integrada.
La vista de dispositivos muestra una tabla con todas las conexiones disponibles. Haciendo
doble clic sobre una conexión se abre la vista del búfer de diagnóstico.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1859

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema

Vista del búfer de diagnóstico
La vista del búfer de diagnóstico muestra los datos actuales del búfer de diagnóstico.
Para actualizar la vista del búfer de diagnóstico, seleccione el botón

1860

.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema

Vista detallada
La vista detallada muestra información concreta acerca de la conexión seleccionada y de los
errores existentes. En la vista detallada se comprueba si los datos son correctos.

Nota
Contenidos de la vista detallada
Los contenidos de la vista detallada solo están disponibles para conexiones integradas en los
controladores S7-1200 y S7-1500.

Botones de navegación
Botón

Tecla

Función

Tecla Intro

En la vista de dispositivos:
Abre la vista del búfer de diagnóstico del dispositivo
seleccionado.
En la vista del búfer de diagnóstico:
Abre la vista detallada.

Tecla ESC

En la vista del búfer de diagnóstico:
Abre la vista de dispositivos.
En la vista detallada:
Abre la vista del búfer de diagnóstico.

Tecla de función configurada,
p. ej., F1.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Actualiza la vista del búfer de diagnóstico.

1861

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema

12.1.1.2

Principios básicos para Panels y Runtime Advanced

Principios básicos del diagnóstico de sistema
Introducción
El diagnóstico de sistema permite detectar averías y errores en todo el sistema. WinCC ofrece
dos objetos de manejo y visualización para localizar los posibles errores de forma rápida.
Para que el controlador pueda transferir mensajes de error al visor de diagnóstico del sistema
o a la ventana de diagnóstico del sistema, debe existir una conexión HMI entre el controlador
y el panel de operador. Asimismo, el diagnóstico del sistema debe estar activado tanto en el
controlador como en el panel de operador.
En un controlador SIMATIC S7-300/400, el diagnóstico del sistema está desactivado de forma
predeterminada, pero puede activarse en las propiedades del controlador. En un controlador
SIMATIC S7-1200/1500, el diagnóstico del sistema está activado de forma predeterminada y
no puede desactivarse.
En caso de conexión HMI con un controlador SIMATIC S7-300/400, en el panel de operador,
en "Configuración de runtime > Avisos > Avisos del controlador", está activada de forma
predeterminada la opción "Diagnóstico del sistema" y no puede desactivarse. En caso de
conexión HMI con un controlador SIMATIC S7-1200/1500, en el panel de operador, en
"Configuración de runtime > Avisos > Avisos del controlador", está activada de forma
predeterminada la opción "Diagnóstico del sistema" y puede desactivarse.

Visor de diagnóstico del sistema
Mientras que el visor de avisos permite observar el estado de un controlador, el visor de
diagnóstico del sistema ofrece un resumen de todos los dispositivos disponibles en la
instalación: Permite navegar directamente hasta la causa de un error y hasta el dispositivo
correspondiente. Permite acceder a todos los dispositivos aptos para diagnóstico que ha
configurado en el editor "Dispositivos y redes".

Ventana de diagnóstico del sistema
La ventana de diagnóstico del sistema es un objeto de control y visualización que puede
utilizarse sólo en la "imagen general".
Las funciones de la ventana de diagnóstico del sistema no se diferencian de las del visor de
diagnóstico del sistema. Como la ventana de diagnóstico del sistema se configura en la imagen
general, también es posible definir, por ejemplo, si el objeto puede cerrarse en runtime.
Nota
Diagnóstico de sistema en Basic Panels
El objeto "Ventana de diagnóstico del sistema" no está disponible en Basic Panels.

1862

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema

Vistas en el diagnóstico de sistema
Introducción
El visor de diagnóstico del sistema y la ventana de diagnóstico del sistema incorporan cuatro
vistas diferentes:
● Vista de dispositivos
● Vista del búfer de diagnóstico
● Vista detallada
● Vista de matriz (sólo para sistemas maestros, PROFIBUS, PROFINET)

Vista de dispositivos
La vista de dispositivos muestra una tabla con todos los dispositivos disponibles en un nivel.
Haciendo doble clic en un dispositivo se abren los dispositivos subordinados o la vista
detallada. Los símbolos de la primera columna dan información sobre el estado actual del
dispositivo.

Vista del búfer de diagnóstico
En la vista del búfer de diagnóstico se muestran los datos actuales del búfer de diagnóstico del
dispositivo. La vista del búfer de diagnóstico sólo puede abrirse en la vista de dispositivos.
Para actualizar la vista del búfer de diagnóstico, seleccione el botón

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

.

1863

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema

Vista detallada
La vista detallada muestra información concreta acerca del dispositivo seleccionado y de los
errores existentes. En la vista detallada se comprueba si los datos son correctos. No es posible
clasificar los textos de error en la vista detallada.

1864

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema

Nota
Contenidos de la vista detallada
Los contenidos de la vista detallada solo están disponibles para conexiones integradas en los
controladores S7-1200 y S7-1500.

Vista de E/S descentralizadas
La vista de E/S descentralizadas está disponible en sistemas maestros y sistemas de E/S. En
esta vista se muestra el estado de los dispositivos subordinados al sistema. Cada elemento de
la vista muestra el nombre y el tipo de dispositivo, así como la dirección IP o PROFIBUS.

En caso de fallo, se resalta visualmente el elemento afectado:
● Un marco rojo indica un error en un elemento subordinado.
● Un fondo rojo indica un error en un elemento en sí, p. ej., el dispositivo no está accesible.

Botones de navegación
Botón

Tecla

Función

Tecla Intro

Abre los dispositivos subordinados o la
vista detallada cuando no hay dispositi‐
vos subordinados.

Tecla ESC

Abre el dispositivo de orden superior o la
vista de dispositivos si no hay ningún dis‐
positivo de orden superior.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1865

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema
Botón

Tecla

Función

Tecla HOME

Abre la vista de dispositivos.

Tecla de función configurada, p. ej., F1.

Abre la vista del búfer de diagnóstico.
Solamente visible en la vista de dispositi‐
vos.

Tecla de función configurada, p. ej., F2.

Actualiza la vista del búfer de diagnóstico.

Nota
Navegación en la vista de matriz con Comfort Panels con teclas de función
Para seleccionar esclavos PNIO o PROFIBUS en la vista de matriz, utilice adicionalmente la
tecla Mayús.

Cambio de idioma en runtime
Cambie el idioma en runtime antes de abrir la vista detallada.
Si se cambia el idioma del runtime con la vista detallada abierta, se vuelve a la vista del búfer
de diagnóstico.
Abra de nuevo la vista detallada. Ahora aparecerá correctamente el idioma de runtime elegido.

12.1.1.3

Configurar objetos del diagnóstico de sistema

Activar diagnóstico de sistema
Introducción
Para que el controlador pueda transferir mensajes de error al visor de diagnóstico del sistema,
debe existir una conexión HMI entre el controlador y el panel de operador. Asimismo, el
diagnóstico del sistema debe estar activado tanto en el controlador como en el panel de
operador.
En un controlador SIMATIC S7-300/400, el diagnóstico del sistema está desactivado de forma
predeterminada, pero puede activarse. En un controlador SIMATIC S7-1200/1500, el
diagnóstico del sistema está activado de forma predeterminada y no puede desactivarse.
En caso de conexión HMI con un controlador SIMATIC S7-300/400, en el panel de operador
está activado de forma predeterminada el diagnóstico del sistema y no puede desactivarse. En
caso de conexión HMI con un controlador SIMATIC S7-1200/1500, en el panel de operador
está activado de forma predeterminada el diagnóstico del sistema y puede desactivarse.
A continuación se describe cómo activar el diagnóstico del sistema en un controlador y en un
panel de operador, si es necesario.

1866

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema

Requisitos
● Existe una conexión HMI entre el controlador y el panel de operador.

Activación del diagnóstico del sistema en el controlador
Para activar el diagnóstico del sistema en un controlador, proceda del siguiente modo:
1. En el árbol del proyecto, abra la "Configuración de dispositivos" del controlador.
2. Seleccione la CPU del rack en la ficha "Vista de dispositivos".
3. En la ventana de inspección seleccione "Propiedades > General > Diagnóstico del sistema
> General".
4. Active la opción "Activar el diagnóstico de sistema para este PLC".
5. En el árbol del proyecto, haga clic con el botón derecho del ratón en el controlador y
seleccione "Compilar > Hardware (compilar todo)" en el menú contextual.

Activación del diagnóstico del sistema en el panel de operador
Para activar el diagnóstico del sistema en un panel de operador, proceda del siguiente modo:
1. En el árbol de proyecto, abra la "Configuración de runtime" del panel de operador.
2. Active la opción "Diagnóstico del sistema" en "Avisos > Avisos del controlador".
Se activa la visualización de avisos de diagnóstico del sistema en runtime.
Nota
Particularidad de los avisos de diagnóstico del sistema SIMATIC S7-300/400
Si se desactiva el discriminador 0 para la conexión HMI correspondiente en "Configuración de
runtime > Avisos > Avisos del controlador > Discriminadores", los avisos de diagnóstico del
sistema no se transfieren del controlador al panel de operador aunque esté activado el
diagnóstico del sistema en el controlador y el panel de operador.

Insertar indicador del diagnóstico de sistema
Introducción
El indicador del diagnóstico de sistema es un símbolo gráfico predefinido de la librería que
señala errores en la instalación.
Cuando se produce un error se modifica el aspecto del objeto. El objeto de librería puede tener
dos indicaciones de estado:
- Sin error
- Error

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1867

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema

Requisitos
● La Task Card "Librerías" está abierta.
● La librería global "Buttons and Switches > Plantillas maestras > DiagnosticsButtons" está
abierta.
● Hay una imagen abierta.
● Se ha creado una ventana de diagnóstico del sistema en la imagen general.

Procedimiento
1. Seleccione el objeto "DiagnosticsIndicator" de la librería.
Nota
Indicador del diagnóstico de sistema para diversos tipos de dispositivos
Al seleccionar un objeto, asegúrese de utilizar el objeto adecuado para el tipo de panel
utilizado en el dispositivo.
2. Utilizando la función Drag&Drop, desplace el objeto de librería hasta la posición del área de
trabajo en la que desea insertarlo.
Se inserta el objeto de librería.

1868

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema
3. Seleccione el objeto de librería.
4. Haga clic en la ventana de inspección "Propiedades > Eventos".
Para el evento "Hacer clic" está predeterminada la función de sistema
"MostrarVisorDeDiagnósticoDeSistema".

Resultado
El indicador del diagnóstico de estado está insertado en el proyecto y conectado a una ventana
de diagnóstico del sistema.
Cuando se produce un aviso de error en runtime, el indicador del diagnóstico de sistema
cambia de aspecto. Si se hace clic en el indicador del diagnóstico de sistema, se abre la
ventana de diagnóstico del sistema. La ventana de diagnóstico del sistema muestra la vista
detallada del dispositivo afectado.

Configurar la protección de acceso para la ventana de diagnóstico del sistema
Para proteger la ventana de diagnóstico del sistema frente a un acceso No autorizado,
configure una protección de acceso en el indicador del diagnóstico de sistema.
1. Seleccione el objeto "DiagnosticsIndicator" en la imagen.
2. Seleccione un permiso en la ventana de inspección "Propiedades > Propiedades >
Seguridad en runtime".
Si se hace clic en el indicador del diagnóstico de sistema en runtime, se abre un cuadro de
diálogo de inicio de sesión. La ventana de diagnóstico del sistema sólo se abre si se tiene el
permiso necesario.

Configurar una ventana de diagnóstico del sistema en la imagen general
Introducción
La ventana de diagnóstico del sistema ofrece una vista general de todos los dispositivos
disponibles en la instalación. La ventana de diagnóstico del sistema se comporta como el visor
de diagnóstico del sistema, pero sólo está disponible en la imagen general.

Requisitos
● Se ha creado un controlador como mínimo.
● Se ha creado un Comfort Panel o WinCC RT Advanced.
● El diagnóstico del sistema está activado en todos los controladores y en el panel de
operador.
● La imagen general está abierta.
● La ventana de inspección está abierta.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1869

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema

Procedimiento
1. En la Task Card "Herramientas" haga doble clic en el objeto "Ventana de diagnóstico del
sistema". El objeto se inserta en la imagen general.
2. Haga clic en la ventana de inspección "Propiedades > Propiedades > Columnas >
Dispositivos/Vista detallada".
3. Active las columnas que necesite para la vista de dispositivos en runtime, p. ej., estado,
nombre y dirección.
4. Active las propiedades que necesite en la vista detallada para runtime, p. ej., estado,
nombre e ID de la instalación.
5. Active las columnas que necesite para la vista del búfer de diagnóstico, p. ej., estado y
nombre.
6. En caso necesario, adapte los títulos de las columnas.
7. Para desplazar las columnas en runtime, active la opción "Propiedades >Propiedades >
Diseño > Configuración de columnas > Columnas desplazables".
8. Para que la ventana de diagnóstico del sistema pueda cerrarse en runtime, active la opción
"Propiedades > Propiedades > Ventana > Cerrable".

Resultado
Se ha insertado una ventana de diagnóstico del sistema en la imagen general. Si aparece un
aviso de error en la instalación, la ventana de diagnóstico del sistema reacciona y muestra el
dispositivo en cuestión.
Configure un indicador del diagnóstico de sistema en una imagen para abrir la ventana de
diagnóstico del sistema.

Configurar botón como indicador del diagnóstico de sistema
Introducción
Además del objeto "DiagnosticsIndicator" de la librería, es posible configurar, p. ej., un botón
que indique la existencia de errores en la instalación.

Requisitos
● Se ha creado un controlador como mínimo.
● El diagnóstico del sistema está activado en todos los controladores y en el panel de
operador.
● La Task Card "Herramientas" está abierta.
● Se ha creado una lista de gráficos de bits con dos gráficos distintos para los estados.
● Hay una imagen abierta.
● Se ha creado un visor del diagnóstico de sistema.

1870

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema

Procedimiento
1. En la Task Card "Herramientas", haga doble clic en el objeto "Botón". Se inserta un botón
en la imagen.
2. En la ventana de inspección, active "Propiedades > Propiedades > General > Modo >
Gráficos".
3. Seleccione la lista de gráficos de bits en "Gráficos > Lista de gráficos".
4. Seleccione la variable "@DiagnosticsIndicatorTag" en la ventana de inspección
"Propiedades > Propiedades > General > Variable".

Configuración de la función de sistema en el botón
1. Haga clic en la ventana de inspección "Propiedades > Eventos".
2. Seleccione el evento "Hacer clic".
3. En la tabla haga clic en "Agregar función".
4. Seleccione la función de sistema "VisorDiagnósticoSistemaActivar".
5. Seleccione el visor de diagnóstico del sistema.

Resultado
Se ha configurado un botón que reacciona a mensajes de error del controlador. Si aparece un
mensaje de error en runtime, el botón cambia.
El botón tiene dos estados.
● Error
Haciendo clic en el botón se abre el visor de diagnóstico del sistema. El visor de diagnóstico
del sistema muestra la vista detallada del dispositivo afectado.
● Ningún error
Haciendo clic en el botón se abre el visor de diagnóstico del sistema. El visor de diagnóstico
del sistema muestra la vista de dispositivos.

Configurar el visor de diagnóstico del sistema
Introducción
Se inserta un visor de diagnóstico del sistema en un proyecto para obtener una vista general
de todos los dispositivos disponibles de la instalación.

Requisitos
● Se ha creado un controlador como mínimo.
● Se ha creado un Comfort Panel o WinCC RT Advanced.
● El diagnóstico del sistema está activado en todos los controladores y en el panel de
operador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1871

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema
● Se ha creado una imagen.
● La ventana de inspección está abierta.

Procedimiento
1. En la Task Card "Herramientas" haga doble clic en el objeto "Visor de diagnóstico del
sistema". El objeto se inserta en la imagen.
2. Haga clic en la ventana de inspección "Propiedades > Propiedades > Columnas >
Dispositivos/Vista detallada".
3. Active las columnas que requiera para la vista de dispositivos en runtime, p. ej. estado,
nombre, slot.
4. Active las columnas que requiera para la vista detallada en runtime, p. ej. estado, nombre,
ID de la instalación.
5. Active las columnas que necesite para la vista del búfer de diagnóstico, p. ej., estado y
nombre.
6. Para desplazar las columnas en runtime, active la opción "Propiedades >Propiedades >
Diseño > Configuración de columnas > Columnas desplazables".
7. El área "Propiedades > Propiedades > Título de tabla" permite cambiar en caso necesario
los títulos de las columnas.

Resultado
El visor de diagnóstico del sistema está insertado en la imagen. En runtime, los fallos de toda
la instalación se muestran en el visor de diagnóstico del sistema.

Configurar el visor de diagnóstico del sistema
Introducción
Para tener un resumen de todas las conexiones integradas, inserte un visor de diagnóstico del
sistema en el proyecto.

Requisitos
● Se ha creado un controlador.
● Se ha creado un Basic Panel.
● Se ha creado una conexión integrada en el editor "Dispositivos y redes".
● Se ha creado una imagen.
● La ventana de inspección está abierta.

1872

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema

Procedimiento
1. En la Task Card "Herramientas" haga doble clic en el objeto "Visor de diagnóstico del
sistema". El objeto se inserta en la imagen.
2. En la ventana de inspección, haga clic en "Propiedades > Representación".
3. Seleccione para "Filas por entrada", p. ej. 5.

Resultado
El visor de diagnóstico del sistema está insertado en la imagen.
Para ver los avisos actuales, actualice el búfer de diagnóstico.

Dividir vista en el visor de diagnóstico del sistema
Introducción
El visor de diagnóstico del sistema ofrece también una vista dividida del visor. De esta manera
tiene la posibilidad de ver los dispositivos y sus detalles a simple vista.

Requisitos
● Se ha creado un controlador como mínimo.
● Se ha creado un panel de operador, p. ej., un Comfort Panel.
● El diagnóstico del sistema está activado en todos los controladores y en el panel de
operador.
● Se ha creado una imagen.
● La ventana de inspección está abierta.

Procedimiento
1. En la Task Card "Herramientas" haga doble clic en el objeto "Visor de diagnóstico del
sistema". El objeto se inserta en la imagen.
2. Haga clic en la ventana de inspección "Propiedades > Propiedades > Diseño".
3. Active "Dividir visor".
4. Active "Adaptación del tamaño > Adaptar automáticamente".
5. Si es necesario, modifique también la cantidad de filas para la "Vista de dispositivos" y la
"Vista detallada".

Resultado
El visor de diagnóstico del sistema está insertado en la imagen. El visor de diagnóstico del
sistema está dividido en dos áreas.
El área superior muestra la vista de dispositivos. El área inferior muestra la vista detallada.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1873

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema

Si abre la vista del búfer de diagnóstico, el área superior muestra el resumen del búfer de
diagnóstico y el área inferior los detalles.

1874

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema

Nota
Contenidos de la vista detallada
Los contenidos de la vista detallada solo están disponibles para conexiones integradas en los
controladores S7-1200 y S7-1500.

12.1.2

Diagnóstico del sistema

12.1.2.1

Principios básicos para Runtime Professional

Principios básicos del diagnóstico de sistema
Introducción
El diagnóstico de sistema permite detectar averías y errores en todo el sistema. WinCC le
ofrece objetos de manejo para una rápida localización de errores.
Para que el controlador pueda transferir mensajes de error al visor de diagnóstico del sistema
o a la ventana de diagnóstico del sistema, debe existir una conexión HMI entre el controlador
y el panel de operador. Asimismo, el diagnóstico del sistema debe estar activado tanto en el
controlador como en el panel de operador.
En un controlador SIMATIC S7-300/400, el diagnóstico del sistema está desactivado de forma
predeterminada, pero puede activarse en las propiedades del controlador. En un controlador
SIMATIC S7-1200/1500, el diagnóstico del sistema está activado de forma predeterminada y
no puede desactivarse.
En caso de conexión HMI con un controlador SIMATIC S7-300/400, en el panel de operador,
en "Configuración de runtime > Avisos > Avisos del controlador", está activada de forma
predeterminada la opción "Diagnóstico del sistema" y no puede desactivarse. En caso de
conexión HMI con un controlador SIMATIC S7-1200/1500, en el panel de operador, en
"Configuración de runtime > Avisos > Avisos del controlador", está activada de forma
predeterminada la opción "Diagnóstico del sistema" y puede desactivarse.

Visor de diagnóstico del sistema
Mientras que el visor de avisos permite observar el estado de un controlador, el visor de
diagnóstico del sistema ofrece un resumen de todos los dispositivos disponibles en la
instalación: Permite navegar directamente hasta la causa de un error y hasta el dispositivo
correspondiente. Permite acceder a todos los dispositivos aptos para diagnóstico que ha
configurado en el editor "Dispositivos y redes".

indicador del diagnóstico de sistema
El indicador del diagnóstico de sistema es un símbolo gráfico predefinido de la librería que
señala errores en la instalación.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1875

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema
Al producirse un error, el indicador de diagnóstico del sistema cambia de aspecto.

Botón GoTo
El botón GoTo es un símbolo gráfico predefinido de la librería. Cuando aparecen avisos de
diagnóstico en el visor de avisos, la función GoTo permite pasar directamente al lugar del error
en el visor de diagnóstico del sistema.

Consulte también
Activar diagnóstico de sistema (Página 1879)

Vistas en el diagnóstico de sistema
Introducción
El visor de diagnóstico del sistema y la ventana de diagnóstico del sistema incorporan cuatro
vistas diferentes:
● Vista de dispositivos
● Vista del búfer de diagnóstico
● Vista detallada
● Vista de matriz (sólo para sistemas maestros, PROFIBUS, PROFINET)

Vista de dispositivos
La vista de dispositivos muestra una tabla con todos los dispositivos disponibles en un nivel.
Haciendo doble clic en un dispositivo se abren los dispositivos subordinados o la vista
detallada. Los símbolos de la primera columna dan información sobre el estado actual del
dispositivo.

1876

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema

Vista del búfer de diagnóstico
En la vista del búfer de diagnóstico se muestran los datos actuales del búfer de diagnóstico del
dispositivo. La vista del búfer de diagnóstico sólo puede abrirse en la vista de dispositivos.
Para actualizar la vista del búfer de diagnóstico, seleccione el botón "Actualizar".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1877

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema

Vista detallada
La vista detallada muestra información concreta acerca del dispositivo seleccionado y de los
errores existentes. En la vista detallada se comprueba si los datos son correctos. No es posible
clasificar los textos de error en la vista detallada.

Nota
Contenidos de la vista detallada
Los contenidos de la vista detallada solo están disponibles para conexiones integradas en los
controladores S7-1200 y S7-1500.

Botones de navegación
Botón

1878

Tecla

Función

Tecla Intro

Abre los dispositivos subordinados o la
vista detallada cuando no hay dispositi‐
vos subordinados.

Tecla ESC

Abre el dispositivo de orden superior o la
vista de dispositivos si no hay ningún dis‐
positivo de orden superior.

Tecla HOME

Abre la vista de dispositivos.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema
Botón

Tecla

Función

Tecla de función F4

Abre la vista del búfer de diagnóstico.
Solamente visible en la vista de dispositi‐
vos.

Tecla de función F5

12.1.2.2

Actualiza la vista del búfer de diagnóstico.

Configurar objetos del diagnóstico de sistema

Activar diagnóstico de sistema
Introducción
Para que el controlador pueda transferir mensajes de error al visor de diagnóstico del sistema,
debe existir una conexión HMI entre el controlador y el panel de operador. Asimismo, el
diagnóstico del sistema debe estar activado tanto en el controlador como en el panel de
operador.
En un controlador SIMATIC S7-300/400, el diagnóstico del sistema está desactivado de forma
predeterminada, pero puede activarse. En un controlador SIMATIC S7-1200/1500, el
diagnóstico del sistema está activado de forma predeterminada y no puede desactivarse.
En caso de conexión HMI con un controlador SIMATIC S7-300/400, en el panel de operador
está activado de forma predeterminada el diagnóstico del sistema y no puede desactivarse. En
caso de conexión HMI con un controlador SIMATIC S7-1200/1500, en el panel de operador
está activado de forma predeterminada el diagnóstico del sistema y puede desactivarse.
A continuación se describe cómo activar el diagnóstico del sistema en un controlador y en un
panel de operador, si es necesario.

Requisitos
● Existe una conexión HMI entre el controlador y el panel de operador.

Activación del diagnóstico del sistema en el controlador
Para activar el diagnóstico del sistema en un controlador, proceda del siguiente modo:
1. En el árbol del proyecto, abra la "Configuración de dispositivos" del controlador.
2. Seleccione la CPU del rack en la ficha "Vista de dispositivos".
3. En la ventana de inspección seleccione "Propiedades > General > Diagnóstico del sistema
> General".
4. Active la opción "Activar el diagnóstico de sistema para este PLC".
5. En el árbol del proyecto, haga clic con el botón derecho del ratón en el controlador y
seleccione "Compilar > Hardware (compilar todo)" en el menú contextual.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1879

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema

Activación del diagnóstico del sistema en el panel de operador
Para activar el diagnóstico del sistema en un panel de operador, proceda del siguiente modo:
1. En el árbol de proyecto, abra la "Configuración de runtime" del panel de operador.
2. Active la opción "Diagnóstico del sistema" en "Avisos > Avisos del controlador".
Se activa la visualización de avisos de diagnóstico del sistema en runtime.
Nota
Particularidad de los avisos de diagnóstico del sistema SIMATIC S7-300/400
Si se desactiva el discriminador 0 para la conexión HMI correspondiente en "Configuración de
runtime > Avisos > Avisos del controlador > Discriminadores", los avisos de diagnóstico del
sistema no se transfieren del controlador al panel de operador aunque esté activado el
diagnóstico del sistema en el controlador y el panel de operador.

Consulte también
Principios básicos del diagnóstico de sistema (Página 1875)

Configurar el visor de diagnóstico del sistema
Introducción
Se inserta un visor de diagnóstico del sistema en un proyecto para obtener una vista general
de todos los dispositivos disponibles de la instalación.

Requisitos
● Se ha creado un controlador como mínimo.
● Se ha creado un panel de operador.
● Se ha creado una conexión HMI entre el controlador y el panel de operador.
● El diagnóstico del sistema está activado en todos los controladores y en el panel de
operador.
● Se ha creado una imagen.
● La ventana de inspección está abierta.

Procedimiento
1. En la Task Card "Herramientas" haga doble clic en el objeto "Visor de diagnóstico del
sistema". El objeto se inserta en la imagen.
2. Haga clic en la ventana de inspección "Propiedades > Propiedades > Columnas >
Dispositivos/Vista detallada".
3. Active las columnas que requiera para la vista de dispositivos en runtime, p. ej. estado,
nombre, slot.

1880

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema
4. Active las columnas que requiera para la vista detallada en runtime, p. ej. estado, nombre,
ID de la instalación.
5. Active las columnas que necesite para la vista del búfer de diagnóstico, p. ej., estado y
nombre.
6. Para desplazar las columnas en runtime, active la opción "Propiedades >Propiedades >
Diseño > Configuración de columnas > Columnas desplazables".
7. El área "Propiedades > Propiedades > Título de tabla" permite cambiar en caso necesario
los títulos de las columnas.

Resultado
El visor de diagnóstico del sistema está insertado en la imagen. En runtime, los fallos de toda
la instalación se muestran en el visor de diagnóstico del sistema.

Dividir vista en el visor de diagnóstico del sistema
Introducción
El visor de diagnóstico del sistema ofrece también una vista dividida del visor. De esta manera
tiene la posibilidad de ver los dispositivos y sus detalles a simple vista.

Requisitos
● Se ha creado un controlador como mínimo.
● Se ha creado un panel de operador.
● El diagnóstico del sistema está activado en todos los controladores y en el panel de
operador.
● Se ha creado una imagen.
● La ventana de inspección está abierta.

Procedimiento
1. En la Task Card "Herramientas" haga doble clic en el objeto "Visor de diagnóstico del
sistema". El objeto se inserta en la imagen.
2. Haga clic en la ventana de inspección "Propiedades > Propiedades > Diseño".
3. Active "Dividir visor".
4. Si es necesario, modifique también la cantidad de filas para la "Vista de dispositivos" y la
"Vista detallada".

Resultado
El visor de diagnóstico del sistema está insertado en la imagen. El visor de diagnóstico del
sistema está dividido en dos áreas.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1881

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema
El área superior muestra la vista de dispositivos. El área inferior muestra la vista detallada.

Si abre la vista del búfer de diagnóstico, el área superior muestra el resumen del búfer de
diagnóstico y el área inferior los detalles.
Nota
Contenidos de la vista detallada
Los contenidos de la vista detallada solo están disponibles para conexiones integradas en los
controladores S7-1200 y S7-1500.

1882

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema

12.1.2.3

Ejemplo: diagnóstico de sistema con todos los objetos

Ejemplo: Resumen de los pasos a seguir
Introducción
● Se han creado un controlador y un panel de operador.
● Se ha creado una conexión HMI entre el controlador y el panel de operador.
● El diagnóstico del sistema está activado en el controlador y en el panel de operador.

Pasos de configuración
Para conseguir una vista rápida de errores, cree una vista general con distintos objetos para
visualizar avisos de diagnóstico.
El ejemplo siguiente muestra cómo utilizar de manera eficiente en su proyecto los objetos de
la Task Card "Herramientas" o "Librerías".
El ejemplo se divide en varias fases:
● Crear imágenes
El proyectista crea varias imágenes para el diagnóstico del sistema:
– Vista general con todos los objetos para el diagnóstico del sistema
– Imagen para el visor de avisos
– Imagen para el visor de diagnóstico del sistema
● Insertar objetos en imágenes
El proyectista inserta diversos objetos en las imágenes:
– Visor de avisos en la imagen "Alarm"
– Ventana de imagen para la visualización del visor de avisos y el visor de diagnóstico del
sistema
● Configurar objetos
El proyectista interconecta los objetos para permitir una navegación directa hasta la causa
del error en runtime.
– Indicador de diagnóstico del sistema con ventana de imagen del visor de diagnóstico del
sistema
– Botón Goto con la ventana de imagen del visor de avisos y el visor de diagnóstico del
sistema.

Consulte también
Ejemplo: Crear imágenes (Página 1884)
Ejemplo: Insertar objetos en imágenes (Página 1884)
Ejemplo: Insertar indicador del diagnóstico de sistema (Página 1885)
Ejemplo: insertar botón Goto (Página 1887)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1883

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema

Ejemplo: Crear imágenes
Introducción
A continuación crearemos tres imágenes para la visualización de distintos objetos.

Requisitos
● Hay un proyecto abierto.
● Se ha creado un panel de operador.

Procedimiento
1. Abra el árbol del proyecto.
2. En la carpeta Imágenes, haga clic en "Agregar imagen".
3. Abra el menú contextual de la imagen y asígnele el nombre "Overview SysDiag".
4. Cree otra imagen con el nombre "Alarm".
5. Abra la Task Card "Librerías".
6. Abra la librería global "Buttons and Switches > Kopiervorlagen > DiagnosticsButtons >
RTProfessional".
7. En la librería global, haga clic en el objeto "DiagnosticScreen".
8. Mediante arrastrar y soltar, desplace el objeto a la carpeta "Imágenes" del árbol del
proyecto.

Resultado
Ha creado tres imágenes en el árbol del proyecto:
● Overview SysDiag
● Alarm
● SystemDiagnostics
En la imagen "SystemDiagnostics" se ha creado un visor de diagnóstico del sistema.

Consulte también
Ejemplo: Resumen de los pasos a seguir (Página 1883)

Ejemplo: Insertar objetos en imágenes
Introducción
En el siguiente ejemplo insertaremos en las imágenes distintos objetos de la Task Card
"Herramientas".

1884

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema

Requisitos
Están creadas las siguientes tres imágenes:
● Overview SysDiag
● Alarm
● SystemDiagnostics
La Task Card "Herramientas" está abierta.

Procedimiento
1. Abra la imagen "Alarm".
2. Mediante arrastrar y soltar, desplace un "Visor de avisos" de la Task Card "Herramientas"
a la imagen.
3. Abra la imagen "Overview SysDiag".
4. Mediante arrastrar y soltar, desplace una "Ventana de imagen" de la Task Card
"Herramientas" a la imagen.
5. En la ventana de inspección, abra el menú "Propiedades > Propiedades > Misceláneo >
Nombre" y asigne a la imagen el nombre "Alarm".
6. En "Propiedades > Propiedades > General > Contenido > Imagen visualizada", seleccione
la imagen "Alarm".
7. Inserte una segunda ventana de imagen con el nombre "SysDiag".
8. En "Propiedades > Propiedades > General > Contenido > Imagen visualizada", seleccione
la imagen "SystemDiagnostics".

Resultado
Ha insertado un visor de avisos en la imagen "Alarm". El visor de avisos tiene el nombre no
modificado "Visor_avisos_1".
Se han creado en la imagen "Overview SysDiag" dos ventanas de imagen. La primera ventana
de imagen tiene el nombre "Alarm" y muestra el visor de avisos. La segunda ventana de
imagen tiene el nombre "SysDiag" y muestra el visor de diagnóstico del sistema.

Consulte también
Ejemplo: Resumen de los pasos a seguir (Página 1883)

Ejemplo: Insertar indicador del diagnóstico de sistema
Introducción
El indicador del diagnóstico de sistema es un símbolo gráfico predefinido de la librería que
señala errores en la instalación.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1885

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema
Cuando se produce un error, se modifica el aspecto del objeto. El objeto de librería puede
mostrar dos estados:
- Sin error
- Error

Requisitos
● La Task Card "Librerías" está abierta.
● La librería global "Buttons and Switches > Plantillas maestras > DiagnosticsButtons > RT
Professional" está abierta.
● Están creadas las siguientes tres imágenes:
– Overview SysDiag
– Alarm
– SystemDiagnostics
● Se ha creado la ventana de imagen "SysDiag" y se ha vinculado con la imagen
"DiagnosticScreen".

Procedimiento
1. Seleccione el objeto "DiagnosticsIndicator" de la librería.
2. Utilizando la función Drag&Drop, desplace el objeto de librería a la imagen "Overview
SysDiag".
Se inserta el objeto de librería.
3. Seleccione el objeto de librería.

1886

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema
4. Haga clic en la ventana de inspección "Propiedades > Eventos".
Para el evento "Hacer clic" están predeterminadas tres funciones del sistema.

5. En la función del sistema "ActivarImagenEnVentana", seleccione para el parámetro
"Nombre de imagen" "SysDiag".
6. En la función del sistema "DefinirPropiedadVíaConstante", seleccione para el parámetro
"Objeto de imagen" "SysDiag".

Resultado
El indicador del diagnóstico de sistema está insertado en el proyecto y vinculado a la ventana
de imagen SysDiag.
Cuando se produce un aviso de error en runtime, el indicador del diagnóstico de sistema
cambia de aspecto. Al hacer clic en el indicador de diagnóstico del sistema, se abre la ventana
de imagen SysDiag, en la que está configurado un visor de diagnóstico del sistema. El visor de
diagnóstico del sistema muestra la vista detallada del dispositivo afectado.

Consulte también
Ejemplo: Resumen de los pasos a seguir (Página 1883)

Ejemplo: insertar botón Goto
Requisitos
● La Task Card "Librerías" está abierta.
● La librería global "Buttons and Switches > Plantillas maestras > DiagnosticsButtons > RT
Professional" está abierta.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1887

Uso de funciones de diagnóstico
12.1 Configuración del diagnóstico de sistema
● Están creadas las siguientes tres imágenes:
– Overview SysDiag
– Alarm
– SystemDiagnostics
● Se ha creado la ventana de imagen "Alarm" y se ha vinculado con la imagen "Alarm".
● Se ha creado la ventana de imagen "SysDiag" y se ha vinculado con la imagen
"DiagnosticScreen".

Configurar botón Goto en la imagen
1. Abra la imagen "SystemDiagnostic".
2. Abra la librería global "Buttons and Switches > Plantillas maestras > DiagnosticsButtons".
3. Seleccione el objeto "DiagnosticsGoto" de la librería.
4. Utilizando la función Drag&Drop, desplace el objeto de librería a la imagen "Overview
SysDiag". Se inserta el objeto de librería.
5. Seleccione el objeto de librería.
6. Haga clic en la ventana de inspección "Propiedades > Eventos".
Para el evento están predeterminadas tres funciones del sistema.

7. En la función del sistema "ActivarImagenEnVentana", seleccione para el parámetro
"Nombre de imagen" "SysDiag".

1888

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.2 Funciones de supervisión para SIMATIC IPC
8. En la función del sistema "DefinirPropiedadVíaConstante", seleccione para el parámetro
"Objeto de imagen" "SysDiag".
9. En la función del sistema "DefinirPropiedadVíaPropiedad", seleccione los siguientes
ajustes:
– Nombre de imagen: Alarm
– Objeto: Visor_avisos_1

Resultado
Ha configurado el botón Goto y lo ha vinculado con el visor de avisos y el visor de diagnóstico
del sistema.
Cuando el visor de avisos emita un aviso de error en runtime en la ventana de imagen "Alarms",
haga clic en el botón Goto.
En la ventana de imagen "SysDiag" aparecerá el visor de diagnóstico del sistema. En la vista
de detalle se abrirá el dispositivo con el error correspondiente.

Consulte también
Ejemplo: Resumen de los pasos a seguir (Página 1883)

12.2

Funciones de supervisión para SIMATIC IPC

Supervisión de hardware para SIMATIC IPC
Todos los SIMATIC IPC soportan funciones de supervisión. Una parte de las funciones de
supervisión se puede mostrar en el TIA Portal si establece una conexión online con el IPC. En
el editor de diagnóstico obtendrá información sobre los estados operativos de los siguientes
grupos:
● Ventiladores
● Temperaturas
● Tensiones
● Unidades de disco/medios de almacenamiento
La figura siguiente muestra una vista general de todos los grupos del editor de diagnóstico.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1889

Uso de funciones de diagnóstico
12.2 Funciones de supervisión para SIMATIC IPC

En el editor de diagnóstico, puede elegir entre la vista individual y la vista de conjunto.

Grupo "Temperaturas"
El grupo "Temperaturas" muestra las temperaturas de diferentes componentes.

Grupo "Ventiladores"
El grupo "Ventiladores" muestra los estados de los ventiladores existentes (en función del
dispositivo). Las velocidades de giro se indican en revoluciones por minuto (r/min).

Grupo "Tensiones"
El grupo "Tensiones" muestra los estados de los sensores de tensión existentes (en función
del dispositivo). Se supervisa la tensión de la batería CMOS. Este sensor informa acerca de si
la tensión es correcta (=OK), crítica o defectuosa.

Grupo "Unidades de disco"
El grupo "Unidades de disco" muestra los estados de las unidades de disco/los medios de
almacenamiento existentes (en función del dispositivo). Se soportan los siguientes medios de
almacenamiento:
● Discos duros ATA
● Tarjetas CompactFlash

1890

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
● Discos duros SCSI
● Discos duros USB o lápices de memoria USB
● Discos duros en un adaptador INTEL RAID
En las propiedades de cada unidad de disco se indica si se trata de una unidad apta para
S.M.A.R.T. o RAID. En este caso se muestra una información de estado.

Valores límite
Para cada uno de los dos grupos, Ventiladores y Temperaturas, se definen respectivamente
un límite inferior y uno superior. Los límites dependen del IPC y no se pueden modificar.

Código de colores
Los iconos junto a cada objeto de visualización cambian de color dependiendo del estado del
objeto. Para todos los grupos se aplica:
● Verde = OK
● Rojo = límite superado o no alcanzado, o estado crítico del objeto.

Comportamiento en caso de diferencias
Si el límite se supera o no se alcanza, o si uno de los grupos llega a un estado crítico, se dispara
una entrada en el búfer de diagnóstico. Al mismo tiempo, el icono cambia a color rojo.
Encontrará más información sobre las funciones de diagnóstico de los IPC en Portal SIOS
(https://support.industry.siemens.com/cs/ww/es/view/39129913/en).

12.3

Supervisión de máquinas e instalaciones con ProDiag

12.3.1

Principios básicos de la supervisión con ProDiag

Introducción
La funcionalidad ProDiag de TIA Portal sirve para supervisar y determinar los errores o fallos
que se producen en la instalación o la máquina. Con ProDiag se muestra el tipo de error o fallo,
su causa y su localización en el panel de operador.

Utilización
Las funciones de ProDiag se utilizan para supervisar la instalación y visualizarla en un panel
de operador. El objetivo principal de ProDiag es reducir los tiempos de parada e interrupciones
de la producción tras un fallo y prevenir así fallos mediante advertencias oportunas. Los
objetos de diagnóstico y de visualización proporcionan indicaciones claras al usuario para la
eliminación de fallos y muestran los procesos en un panel de operador del sitio.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1891

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Principio
En STEP 7 se crean las supervisiones de los operandos y se configuran los ajustes conforme
a las necesidades. Cuando se produce un error, se emite un aviso de supervisión según los
criterios configurados. Las supervisiones configuradas se guardan en el bloque de función
ProDiag predeterminado. Puede usar los FB ProDiag creados automáticamente o crear y
configurar FB ProDiag propios.
Con WinCC se configuran las funciones ProDiag que se visualizarán en un panel de operador
HMI. Se configuran objetos de imagen que permiten obtener una visión general del estado
actual de la instalación y que, en caso de error, muestran el código de programa afectado o el
desarrollo de la etapa.

12.3.2

Principios básicos de la supervisión de operandos

Supervisión de operandos
Con una supervisión se controla el estado de una variable booleana. Cuando se produce un
evento en la instalación o máquina, se dispara la supervisión configurada, y el estado del
operando se escribe en un bit de error de un bloque ProDiag. Están disponibles los siete tipos
de supervisión siguientes:
● Supervisión de operandos
● Supervisión de enclavamientos
● Supervisión de acciones
● Supervisión de reacciones
● Supervisión de posiciones
● Aviso de texto
● Mensaje de error

Categorías y subcategorías
Es posible definir categorías y subcategorías para cada supervisión. Existen ocho categorías
que permiten clasificar los eventos según su urgencia. Las subcategorías clasifican la
información con más detalle. Las categorías y subcategorías se pueden combinar entre sí en
una supervisión.
Las categorías, subcategorías y los textos de aviso de las supervisiones se configuran en el
árbol del proyecto, en "Datos comunes > Configuración de supervisiones". Para más
información sobre supervisiones y categorías, consulte el capítulo "Programación del PLC >
Supervisión de máquinas e instalaciones con ProDiag".

Seguimiento de la supervisión en HMI
Con WinCC puede realizarse un seguimiento del estado de las supervisiones configuradas
con el objeto "Vista general de ProDiag".

1892

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
Cuando se produce un evento en la instalación, en la vista general de ProDiag se iluminan los
símbolos correspondientes de la categoría y el tipo de supervisión. Con los botones
configurados se salta directamente al mensaje de error o a la visualización del segmento
afectado en el visor de código PLC.
El estado de la cadena secuencial GRAPH de un bloque de datos GRAPH se muestra en el
objeto "Vista general de GRAPH". Si en una de las etapas se produce un error de supervisión
de GRAPH, se ilumina el símbolo de error de la vista general de GRAPH y se resalta
visualmente la etapa que presenta anomalía.
Con el objeto "Visor de código PLC" se muestra el programa de usuario en los lenguajes de
programación KOP, FUP y GRAPH en el panel de operador.
Las funciones de adquisición de primeros valores y análisis de criterios le permiten registrar los
valores en el momento del fallo y detectar rápidamente los operandos erróneos con el objeto
"Visor de análisis de criterios".

Ventajas
ProDiag permite configurar supervisiones y supervisar instalaciones sin modificar el código del
programa de usuario.
El diagnóstico de la instalación se realiza en el panel de operador. Los datos se sincronizan
automáticamente para que la visualización del panel de operador esté siempre actualizada.
Encontrará más información sobre el diagnóstico integrado de máquinas e instalaciones con
SIMATIC ProDiag en el canal de YouTube de Siemens:
Mayor disponibilidad de las máquinas e instalaciones con SIMATIC ProDiag (https://youtu.be/
pri8m08g4Ak)
Encontrará un ejemplo de aplicación del diagnóstico de máquinas e instalaciones con ProDiag
en el artículo con la ID 109740151 del Siemens Industry Online Support:
Diagnóstico de máquinas e instalaciones con ProDiag (https://
support.industry.siemens.com/cs/ww/es/view/109740151/en)

Consulte también
Diagnóstico de máquinas e instalaciones con ProDiag (https://
support.industry.siemens.com/cs/ww/es/view/109740151/en)

12.3.3

Requisitos y concesión de licencias

Introducción
Se configuran las supervisiones ProDiag en el TIA Portal con STEP 7 Professional, y se crean
los objetos de imagen para la supervisión y el diagnóstico con WinCC. Para poder utilizar la
funcionalidad ProDiag y los correspondientes objetos de imagen se requiere una licencia.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1893

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Requisitos de software
Para configurar las supervisiones ProDiag se requieren los siguientes productos:
● TIA Portal STEP 7 Professional
● TIA Portal WinCC
– Comfort/Advanced a partir de V14 o bien
– Professional a partir de V14

Requisitos de hardware
La funcionalidad ProDiag está disponible para las CPU de la serie S7-1500 con versión de
firmware a partir de 2.0.
Los objetos para la supervisión y el diagnóstico de instalaciones están disponibles para los
siguientes dispositivos HMI:
● Comfort Panels y KTP Mobile Panels*
● RT Advanced
● RT Professional
* El objeto "Visor de código PLC" está disponible en Comfort Panels y KTP Mobile Panels a
partir de 7"
Nota
Los objetos para la supervisión y el diagnóstico de instalaciones se pueden utilizar con los
niveles de protección "Acceso total" y "Lectura" configurados en la CPU.
Los objetos ProDiag no se pueden utilizar con los niveles de protección "Acceso HMI" y
"Ningún acceso".

Concesión de licencia para supervisiones ProDiag
Se requieren licencias para el número de supervisiones ProDiag que se configuran con STEP
7 Professional. Para las primeras 25 supervisiones no se necesita licencia, y para las demás,
deben utilizarse licencias.

Número de super‐
visiones

<= 25

<= 250

<= 500

<= 750

<= 1000

> 1000

Número de licen‐
cias

Ninguna

1

2

3

4

5

Concesión de licencias a objetos ProDiag
Para utilizar en su programa los objetos para el diagnóstico y la supervisión en combinación
con la supervisión ProDiag, necesita una licencia ProDiag.

1894

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

12.3.4

Visualización de supervisiones

12.3.4.1

Objetos para la supervisión y el diagnóstico de instalaciones

Introducción
WinCC le ofrece los siguientes objetos para visualizar el estado actual de las supervisiones y
el diagnóstico de errores en el código de programa:
● Vista general de ProDiag
● Vista general de GRAPH
● Visor de código PLC
● Visor de análisis de criterios

Vista general de ProDiag
El objeto "Vista general de ProDiag" proporciona un resumen del estado actual de las
supervisiones configuradas.
La vista general de ProDiag está disponible en Comfort Panels, KTP Mobile Panels, RT
Advanced y RT Professional.

Vista general de GRAPH
El objeto "Vista general de GRAPH" muestra el estado actual de las etapas ejecutadas de la
cadena secuencial GRAPH.
La vista general de GRAPH está disponible en Comfort Panels, KTP Mobile Panels, RT
Advanced y RT Professional.

Visor de código PLC
El objeto "Visor de código PLC" muestra el estado actual de los programas de usuario
programados en los lenguajes de programación KOP, FUP o GRAPH.
El visor de código PLC está disponible en Comfort Panels, RT Advanced, RT Professional y
KTP Mobile Panels a partir del tamaño de pantalla de 7".

Visor de análisis de criterios
El objeto "Visor de análisis de criterios" sirve para mostrar los operandos erróneos en el
programa de usuario que se determinaron mediante análisis de criterios para un aviso
seleccionado.
El visor de análisis de criterios está disponible en Comfort Panels, KTP Mobile Panels, RT
Advanced y RT Professional.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1895

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

12.3.4.2

Interacción de los objetos para la supervisión y el diagnóstico

Introducción
Los objetos para la supervisión y el diagnóstico de instalaciones ofrecen las siguientes
posibilidades:
● Representar en un dispositivo HMI el estado de las supervisiones configuradas en el
programa de usuario.
● Evaluar los avisos actuales y mostrar el segmento causante de los avisos.
● Mostrar el código de programa en el dispositivo HMI.
Dependiendo de la aplicación, en el panel de operador se muestra la siguiente información:
● Con el objeto "Vista general de ProDiag" podrá ver el estado actual de las supervisiones
ProDiag.
● Con el objeto "Vista general de GRAPH" podrá ver el estado actual de la cadena secuencial
GRAPH.
● Con el objeto "Visor de análisis de criterios" podrá ver los operandos erróneos de un aviso
GRAPH o ProDiag seleccionado.

Interacción de los objetos ProDiag
La siguiente figura ilustra la interacción de objetos para visualizar las supervisiones de
ProDiag:

1896

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

,167$/$&,1

+0,

9LVRUGHFµGLJR3/&

9LVWDJHQHUDOGH*5$3+

9LVRUGHDYLVRV
9HQWDQDGHDYLVRV

9LVWDJHQHUDOGH3UR'LDJ

9LVRUGHDQ£OLVLV
GHFULWHULRV

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1897

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
La visualización de la funcionalidad ProDiag en el panel de operador se compone de las
siguientes acciones:
1. Mostrar el estado del programa
– Mostrar el estado de las supervisiones con la vista general de ProDiag
En el panel de operador se establece la conexión con el controlador y el FB ProDiag
conectado, y se muestra el estado actual de las supervisiones. En cuanto se produce un
evento, se enciende el correspondiente símbolo en la vista general de ProDiag.
El botón "Visor de avisos" permite saltar al visor o a la ventana de avisos que contiene
los detalles del evento que se ha producido. Para encontrar más fácilmente los avisos
relevantes para la supervisión en el visor/la ventana de avisos, se recomienda limitar los
avisos mostrados utilizando un filtro.
– Visualización de la secuencia de la cadena GRAPH con la vista general de GRAPH
En cuanto se establece la conexión con el controlador, se representa en runtime la etapa
que se está ejecutando actualmente en la cadena secuencial GRAPH. Los botones de
mando le permiten desplazarse a otras etapas o a la etapa inicial de la cadena
secuencial.
El botón "Visor de avisos" permite saltar al visor o a la ventana de avisos que contiene
los detalles del evento que se ha producido.
El botón "Visor de código PLC" permite saltar a dicho visor, p. ej., para mostrar un error
en la secuencia de la cadena GRAPH.
2. Mostrar avisos actuales en el visor de avisos o en la ventana de avisos
En el visor de avisos o en la ventana de avisos se muestran en runtime los avisos que se
producen.
Nota
Visualización de avisos de las categorías "Acknowledgement" y "No Acknowledgement"
Para mostrar los avisos de supervisión de las categorías propias del sistema o definidas por
el usuario en el visor de avisos o la ventana de avisos, active la visualización de dichas
categorías en la ventana de inspección en "Propiedades > Propiedades > General".
En el visor/la ventana de avisos se pueden activar las categorías de los avisos de
supervisión solo tras haber configurado las supervisiones y compilado el controlador.
La función de sistema "ActivarVisorCódigoPLC" permite saltar desde el último aviso activo
o desde un aviso seleccionado al visor de código PLC con el código de programa en
cuestión.
Además, con las funciones de adquisición de primeros valores y análisis de criterios tiene
la posibilidad de registrar los valores en el momento del fallo y de visualizar los operandos
erróneos del programa en el objeto "Visor de análisis de criterios".
3. Mostrar código de programa en el visor de código PLC
En cuanto se ha establecido una conexión con el controlador, el visor de código PLC
muestra el estado actual del segmento, en función de la configuración:
– En runtime se muestran el segmento KOP/FUP y el código de programa. En la tabla de
símbolos se representan los nombres de los símbolos, las direcciones absolutas y los
correspondientes comentarios.
– En runtime se representa la cadena secuencial GRAPH. En la vista de detalles se
muestran las transiciones de las etapas.
Si lo desea, puede configurar un botón que en caso de fallo cambie de aspecto y le permita
saltar al visor de código PLC configurado. Para ello, defina un botón y asígnele la función

1898

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
del sistema "ActivarVisorCódigoPLC". Dinamice la apariencia (p. ej., el color de fondo) del
botón mediante la variable de control para el visor de código PLC que haya interconectado
anteriormente con el visor de avisos, para que, p. ej., el botón cambie de color al recibirse
un aviso de ProDiag.

Transferencia de idiomas de la CPU al panel de operador HMI
En el TIA Portal se cargan automáticamente desde el programa de usuario del controlador al
panel de operador los textos para la funcionalidad ProDiag, p. ej., los nombres de símbolos y
los comentarios en un visor de código PLC, así como los textos de los avisos de supervisión.
En los proyectos multilingües, procure que coincidan los idiomas que estén disponibles en el
controlador y los idiomas de runtime del panel de operador. Solo si los idiomas coinciden se
podrán mostrar los textos de aviso en el panel de operador en el idioma deseado.
Encontrará más información sobre los proyectos multilingües en "Configurar dispositivos y
redes > Información adicional sobre configuraciones > Funcionamiento de las CPUs S7-1500
> Configuración del comportamiento operativo > Propiedades de la CPU > Multilingüismo".

12.3.4.3

Interacción de los objetos para la supervisión y el diagnóstico

Introducción
Los objetos para la supervisión y el diagnóstico de instalaciones ofrecen las siguientes
posibilidades:
● Representar en un dispositivo HMI el estado de las supervisiones configuradas en el
programa de usuario.
● Evaluar los avisos actuales y mostrar el segmento causante de los avisos.
● Mostrar el código de programa en el dispositivo HMI.
Dependiendo de la aplicación, en el panel de operador se muestra la siguiente información:
● Con el objeto "Vista general de ProDiag" podrá ver el estado actual de las supervisiones
ProDiag.
● Con el objeto "Vista general de GRAPH" podrá ver el estado actual de la cadena secuencial
GRAPH.
● Con el objeto "Visor de análisis de criterios" podrá ver los operandos erróneos de un aviso
GRAPH o ProDiag seleccionado.

Interacción de los objetos ProDiag
La siguiente figura ilustra la interacción de objetos para visualizar las supervisiones de
ProDiag:

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1899

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

,167$/$&,1

+0,

9LVRUGHFµGLJR3/&

1900

9LVWDJHQHUDOGH*5$3+

9LVRUGHDYLVRV
9HQWDQDGHDYLVRV

9LVWDJHQHUDOGH3UR'LDJ

9LVRUGHDQ£OLVLV
GHFULWHULRV

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
La visualización de la funcionalidad ProDiag en el panel de operador se compone de las
siguientes acciones:
1. Mostrar el estado del programa
– Mostrar el estado de las supervisiones con la vista general de ProDiag
En el panel de operador se establece la conexión con el controlador y el FB ProDiag
conectado, y se muestra el estado actual de las supervisiones. En cuanto se produce un
evento, se enciende el correspondiente símbolo en la vista general de ProDiag.
El botón "Visor de avisos" permite saltar al visor o a la ventana de avisos que contiene
los detalles del evento que se ha producido. Para encontrar más fácilmente los avisos
relevantes para la supervisión en el visor/la ventana de avisos, se recomienda limitar los
avisos mostrados utilizando un filtro.
– Visualización de la secuencia de la cadena GRAPH con la vista general de GRAPH
En cuanto se establece la conexión con el controlador, se representa en runtime la etapa
que se está ejecutando actualmente en la cadena secuencial GRAPH. Los botones de
mando le permiten desplazarse a otras etapas o a la etapa inicial de la cadena
secuencial.
El botón "Visor de avisos" permite saltar al visor o a la ventana de avisos que contiene
los detalles del evento que se ha producido.
El botón "Visor de código PLC" permite saltar a dicho visor, p. ej., para mostrar un error
en la secuencia de la cadena GRAPH.
2. Mostrar avisos actuales en el visor de avisos o en la ventana de avisos
En el visor de avisos o en la ventana de avisos se muestran en runtime los avisos que se
producen.
Nota
Visualización de avisos de las categorías "Acknowledgement" y "No Acknowledgement"
Para mostrar los avisos de supervisión de las categorías propias del sistema o definidas por
el usuario en el visor de avisos o la ventana de avisos, active la visualización de dichas
categorías en la ventana de inspección en "Propiedades > Propiedades > General".
En el visor/la ventana de avisos se pueden activar las categorías de los avisos de
supervisión solo tras haber configurado las supervisiones y compilado el controlador.
La función de sistema "MostrarVisorAvisosCódigoPLC" permite saltar desde el último aviso
activo o desde un aviso seleccionado al visor de código PLC con el código de programa en
cuestión.
Además, con las funciones de adquisición de primeros valores y análisis de criterios tiene
la posibilidad de registrar los valores en el momento del fallo y de visualizar los operandos
erróneos del programa en el objeto "Visor de análisis de criterios".
3. Mostrar código de programa en el visor de código PLC
En cuanto se ha establecido una conexión con el controlador, el visor de código PLC
muestra el estado actual del segmento, en función de la configuración:
– En runtime se muestran el segmento KOP/FUP y el código de programa. En la tabla de
símbolos se representan los nombres de los símbolos, las direcciones absolutas y los
correspondientes comentarios.
– En runtime se representa la cadena secuencial GRAPH. En la vista de detalles se
muestran las transiciones de las etapas.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1901

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
Si lo desea, puede configurar un botón que en caso de fallo le permita saltar al visor de
código PLC configurado. Para ello, defina un botón y configúrelo con la función del sistema
"MostrarVisorAvisosCódigoPLC".

Transferencia de idiomas de la CPU al panel de operador HMI
En el TIA Portal V14 se cargan automáticamente desde el programa de usuario del controlador
al panel de operador los textos para la funcionalidad ProDiag, p. ej., los nombres de símbolos
y los comentarios en un visor de código PLC, así como los textos de los avisos de supervisión.
En los proyectos multilingües, procure que coincidan los idiomas que estén disponibles en el
controlador y los idiomas de runtime del panel de operador. Solo si los idiomas coinciden se
podrán mostrar los textos de aviso en el panel de operador en el idioma deseado.
Encontrará más información sobre los proyectos multilingües en "Configurar dispositivos y
redes > Información adicional sobre configuraciones > Funcionamiento de las CPUs S7-1500
> Configuración del comportamiento operativo > Propiedades de la CPU > Multilingüismo".

12.3.4.4

Configuración de la vista general de ProDiag

Resumen de la configuración de supervisiones
Introducción
En el TIA Portal, las supervisiones de ProDiag se configuran en el programa de usuario en
STEP 7 y la visualización para los paneles de mando HMI se configura en WinCC.

Requisitos
● Se ha creado un controlador S7-1500.
● Existe por lo menos una variable booleana en un bloque de datos, en una tabla de variables
o en una interfaz de bloque.
● Se ha creado un panel de operador HMI.
● Se ha creado una imagen.

Pasos necesarios para configurar supervisiones con ProDiag
La funcionalidad ProDiag se configura en el TIA Portal siguiendo los pasos siguientes:
En STEP 7
1. Crear el bloque de función ProDiag para las supervisiones.
2. Definir la configuración en el bloque de función ProDiag.

1902

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
3. Definir la configuración de supervisiones de ProDiag
– Definir el tipo de supervisión.
– Ajustar el retardo.
– Seleccionar las condiciones en las que se disparará un aviso de supervisión.
– Definir las categorías y subcategorías.
4. Agregar la supervisión de una variable booleana.
Crear una supervisión global o local para una variable booleana.
5. Llamar el bloque de función ProDiag
6. Compilar y cargar el proyecto
En WinCC
1. Insertar el objeto "Vista general de ProDiag" en la imagen HMI.
2. Seleccionar la variable de estado.
3. Configurar la visualización y la representación del objeto en la configuración.
4. Configurar el salto al visor de avisos.
Asimismo es posible mostrar la ejecución del programa en el objeto "Vista general de GRAPH"
y el estado actual del programa en el objeto "Visor de código PLC".

Asignación de símbolos en la vista general de ProDiag

La variable de estado "State" del tipo de datos de PLC "SV_FB_State" del bloque de función
ProDiag contiene los bits de error agrupado para los tipos de supervisión y las categorías que
se muestran con ayuda de la vista general de ProDiag.
Puede visualizar dos tipos de bits de error agrupado en el objeto "Vista general de ProDiag":
● Bit de error agrupado para las supervisiones (All, O, I, R, A, P, Merr y Mtxt)
● Bit de error agrupado para las categorías (C1 ... C6)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1903

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
La siguiente tabla muestra la asignación de los bits de error agrupado de la variable de estado
"State" a los símbolos de la vista general de ProDiag.
Vista general de ProDiag

Elementos del FB ProDiag

Descripción

All

Bit de error agrupado para todos los
tipos de supervisiones, excepto de
avisos de texto

Símbolos

Si el valor All = TRUE, se ha dispara‐
do al menos una supervisión y el sím‐
bolo se resalta visualmente en la vis‐
ta general de ProDiag.
SV_Types

Byte para todos los bits de error agru‐
pado de los tipos de supervisión

Mtxt (Message text)

Bit de error agrupado para todos los
avisos

-

Tooltip con información sobre esta
vista general de ProDiag

E (Error)

C1 (Category)

Error

W (Warning)

C2 (Category)

Advertencia

Categories

Byte de error agrupado para todas
las categorías.

I (Info)

C3 (Category)

Información

C4 ... C6

C4 ... C6 (Category)

Categorías adicionales

O

O (Operand)

Bit de error agrupado para supervi‐
siones de operandos

I

I (Interlock)

Bit de error agrupado para supervi‐
siones de enclavamientos

A

A (Action)

Bit de error agrupado para supervi‐
siones de acciones

R

R (Reaction)

Bit de error agrupado para supervi‐
siones de reacciones

P

P (Position)

Bit de error agrupado para supervi‐
siones de posiciones

M

Merr (Message error)

Bit de error agrupado para avisos de
error

Categorías

Tipos de supervisiones

Configuración de la vista general de ProDiag
Introducción
La vista general de ProDiag permite supervisar la máquina o la instalación en runtime y
determinar la información de diagnóstico en caso de producirse un error.

1904

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
Tras definir la variable de estado en el objeto y establecer la conexión con un FB ProDiag, se
consulta el estado de la variable de estado "State" del tipo de datos PLC correspondiente. En
runtime, los estados de los operandos supervisados se muestran en la vista general de
ProDiag a modo de símbolos, de forma similar a los colores de un semáforo.
En WinCC se configuran la visualización y la representación de las categorías y los tipos de
supervisión que se muestran en el objeto "Vista general de ProDiag" independientemente de
la configuración de supervisiones en STEP 7.

Requisitos
● Se ha creado un controlador S7-1500 como mínimo.
● Se ha configurado una supervisión como mínimo.
● Existen un FB ProDiag y una DB ProDiag.
● Se ha creado una estación PC o un panel de operador que soporta la funcionalidad ProDiag.
● Se ha creado una conexión HMI entre el controlador y el panel de operador.
● Se ha creado una imagen y la ventana de inspección está abierta.

Procedimiento
1. Haga clic en la ventana de inspección "Propiedades > Propiedades > General".
2. Pulse el botón de selección bajo la propiedad "Variable".
3. Seleccione la variable de estado del FB ProDiag.
También es posible agregar la variable de estado correspondiente desde la vista detallada
con la función de arrastrar y soltar.

4. Defina los nombres y colores de las categorías de supervisión en "Salida > Categorías".
5. Defina los nombres y colores de los tipos de supervisión en "Salida > Tipos de
supervisiones".
6. En "Representación" defina los símbolos y botones que se mostrarán en el objeto.
7. Seleccione un permiso de operación en "Propiedades > Propiedades > Seguridad".
8. Puede configurar una función de sistema para el evento "Hacer clic en el botón Visor de
avisos" en "Propiedades > Eventos" para saltar de la vista general de ProDiag al visor de
avisos en runtime.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1905

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Resultado
La vista general de ProDiag se ha insertado en la imagen. En runtime se visualizan los estados
actuales relativos a los eventos supervisados.

Configuración del salto al visor de avisos
Introducción
Cuando se produce un error puede saltarse de la vista general de ProDiag directamente a una
ventana de avisos o a una imagen con un visor de avisos.

Requisitos
● Se ha creado una imagen.
● Se ha creado un visor de avisos o una ventana de avisos.
● Se ha creado el objeto "Vista general de ProDiag".
● La ventana de inspección está abierta.

Configuración del salto al visor de avisos
1. Haga clic en la ventana de inspección "Propiedades > Eventos".
2. Haga clic en el evento "Visor de avisos Botón Hacer clic".
3. Seleccione la función de sistema "MostrarVentanaDeAvisos" en "<Agregar función>".
4. Introduzca el nombre del objeto de la ventana de avisos.
5. También puede abrir la imagen con el visor de avisos configurado con la función
"ActivarImagen".
Introduzca el nombre de la imagen que contiene el visor de avisos configurado.

Resultado
Si en runtime pulsa el botón "Visor de avisos" en la vista general de ProDiag configurada,
automáticamente se abrirá la imagen con el correspondiente visor de avisos o bien una
ventana de avisos.

12.3.4.5

Configuración de la vista general de GRAPH

Mostrar el estado de la cadena secuencial de GRAPH
Introducción
Con ayuda del objeto "Vista general de GRAPH" se visualiza el estado de la cadena secuencial
de GRAPH.

1906

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

















 

① Símbolo de error
② Nombre del bloque de datos de GRAPH
③ Nombre de la etapa que se ejecuta actualmente
④ Etapa activa de la cadena secuencial
● Si se produce una anomalía en una etapa, su número se marca en rojo.

⑤ Modo de operación
⑥ Botón "Etapa"
● Cuando la cadena se encuentre en la última etapa, se mostrará el botón "Etapa inicial".

⑦ Botón "Visor de avisos"
⑧ Símbolo de la etapa inicial
⑨ Botón "Visor de código PLC"
⑩ Símbolo de etapas simultáneas
Mostrar el estado de la cadena secuencial de GRAPH
A través de la variable del bloque de datos GRAPH se conecta la vista general de GRAPH con
el controlador. Tras haber establecido la conexión con el controlador, el objeto muestra el
número de etapa de las etapas de la cadena secuencial GRAPH. El nombre de la etapa que
se está ejecutando actualmente se indica debajo de la cadena secuencial. Si además de la
etapa que se está ejecutando hay otras etapas simultáneas, se iluminará el símbolo de etapas
simultáneas en la vista general de GRAPH.
Dependiendo de la aplicación, puede alternar entre los cuatro modos de operación para la
secuencia de la cadena GRAPH. El modo seleccionado actualmente se muestra en la vista
general de GRAPH.
Si se produce un error durante la ejecución de una etapa, la etapa errónea y el símbolo de error
se resaltan visualmente.
En caso de error, es posible saltar al aviso en el visor de avisos configurado o ver el programa
en cuestión en el visor de código PLC.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1907

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Modo de una línea
Es posible representar la vista general de GRAPH en la vista estándar o en el modo de una
línea. Por ejemplo, puede configurar en una imagen varias vistas generales de GRAPH en el
modo de una línea. De este modo obtiene una visión de conjunto del estado actual de varias
áreas de producción cuyas supervisiones se agrupan en los correspondientes FB GRAPH.

Visualización de etapas y análisis de criterios
En el modo avanzado, active las líneas adicionales para mostrar la etapa anterior y siguiente,
así como el primer operando erróneo del análisis de criterios.

200 25
S 001
S 002
S 021

Etapa anterior
Etapa actual
Siguiente etapa
Nombre; %dirección; comentario

Consulte también
Vista general de GRAPH (Página 392)
Configuración de la vista general de GRAPH (Página 1910)
Configurar el modo de operación (Página 1912)
Interacción de los objetos para la supervisión y el diagnóstico (Página 1896)
Adquisición de primeros valores y análisis de criterios (Página 1955)

Visualización del desarrollo de las etapas
Introducción
En la vista general de GRAPH tiene la posibilidad de mostrar, además de la etapa actual, la
etapa anterior y siguiente de la cadena GRAPH. Para ello, después de abrir una imagen con
una vista general de GRAPH, se registran internamente las etapas activas. Si aparece un fallo
en una etapa, en la vista general de GRAPH verá qué acción se ejecutó antes de la etapa
errónea y qué acción le sigue.
Los nombres de las etapas multilingües que se mostrarán en la vista general de GRAPH se
definen previamente en una lista de textos multilingüe, en el programa de usuario.

1908

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

200 25
S 001
S 002
S 021

Etapa anterior
Etapa actual
Siguiente etapa
Nombre; %dirección; comentario

Identificación de las etapas
La cadena secuencial de GRAPH se evalúa de izquierda a derecha. Los números de etapa
visualizados en la vista general de GRAPH se marcan adicionalmente según si existe una
rama simultánea o alternativa inmediatamente después o antes de la etapa en cuestión. Con
ello, podrá ver rápidamente las siguientes informaciones relativas a la ejecución del programa:
● Signo más
– En la etapa anterior: antes de la etapa activa existe una rama simultánea. Había varias
etapas activas simultáneamente.
– En la etapa siguiente: después de la etapa activa existe una rama simultánea. Con ello
se activará más de una etapa.
● Signo de interrogación
– En la etapa anterior: antes de la etapa activa, otra etapa diferente de la primera
(izquierda) de la cadena pudo estar activa.
– En la etapa siguiente: después de la etapa activa existe una rama alternativa. Con ello,
otra etapa diferente de la primera (izquierda) de la cadena también se puede activar.
● Ningún signo: la etapa anterior o la siguiente está determinada de forma unívoca.
Nota
Restricciones de la determinación de etapas
Al llamar la vista general de GRAPH por primera vez se determinan las etapas anteriores y
siguientes desde el bloque GRAPH en el orden de la cadena programada.
Después de la primera llamada de la vista general de GRAPH y tras un cambio de imagen, no
existe ningún registro de las etapas activas, por lo que no es posible determinar de forma
unívoca la etapa anterior.
La vista general de GRAPH actualiza la visualización en intervalos de tiempo regulares. Si la
cadena se ejecuta rápido o se cambia manualmente a menudo entre las etapas, puede que se
determine otra etapa diferente de la que estaba activa.

Visualización de la etapa anterior y siguiente
Para ver las etapas anterior y siguiente en la vista general de GRAPH, active la opción "Etapa
anterior y siguiente" en "Propiedades > Apariencia > Opciones".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1909

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Visualización del resultado del análisis de criterios
En caso de que haya un error presente, en la vista general de GRAPH se puede ver el
resultado del análisis de criterios. Se mostrará el nombre del símbolo, la dirección absoluta, el
valor del primer operando erróneo y el comentario en la última línea de la vista general de
GRAPH.
Para ver el primer operando erróneo del análisis de criterios, active la opción "Análisis de
criterios" en "Propiedades > Apariencia > Opciones".
Nota
En los casos siguientes, para el análisis de criterios no se mostrará información en la vista
general de GRAPH:
● La versión del bloque GRAPH es anterior a la 4.0.
● No se activó la adquisición de primeros valores en las propiedades del bloque o no se
registraron los primeros valores.
● No hay ningún error en la etapa actual.

Configuración de la vista general de GRAPH
Introducción
La vista general de GRAPH muestra el estado actual de las etapas ejecutadas de una cadena
secuencial GRAPH.

Requisitos
● Se ha creado un PLC con un bloque de datos de instancia GRAPH.
● El bloque de datos de instancia GRAPH contiene como mínimo una variable visible en HMI
y accesible desde HMI.
Nota
La variable de proceso que se utiliza para la vista general de GRAPH debe ser visible y
accesible desde el panel HMI.
Para hacer que las variables del bloque de datos GRAPH sean visibles y accesibles para
HMI, abra el bloque de función GRAPH, seleccione el bloque en el área de trabajo y elija
"Editar > Parámetros internos visibles/accesibles desde HMI" en la barra de menús. A
continuación, compile los bloques de programa.
● Se ha creado un panel de operador.
● Se ha creado una imagen.
● La ventana de inspección está abierta.

1910

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Procedimiento
1. Arrastre la vista general de GRAPH desde la ventana de herramientas a la imagen
configurada con la función de arrastrar y colocar.
2. Haga clic en la ventana de inspección "Propiedades > Propiedades > General".
3. Abra el botón de selección en "Proceso > Variable".
Se abre el cuadro de diálogo "Agregar objeto".
4. Seleccione el PLC correspondiente en la carpeta "Bloques de programa".
5. Seleccione la variable PLC correspondiente del bloque de datos de instancia GRAPH.
Nota
Si no se han configurado conexiones entre el dispositivo HMI y el PLC seleccionado, se
creará una automáticamente.
Además, se crea una variable HMI enlazada con la variable PLC.
6. En "Propiedades > Propiedades > Representación > Opciones", defina los símbolos que se
mostrarán en la vista general de GRAPH.
Para mostrar la vista general de GRAPH en modo de compatibilidad sin los botones de la
barra de herramientas ni el indicador del modo de operación, active la propiedad "Modo de
una línea".

7. En "Propiedades > Propiedades > Barra de herramientas > General", defina los botones
que se mostrarán en el objeto.
8. Las propiedades del objeto "Vista general de GRAPH" se pueden dinamizar con variables
y los estados se pueden marcar con colores.
En el capítulo Dinamización de imágenes (Página 209) se ofrece una descripción completa
de cómo dinamizar una propiedad.
9. En "Propiedades > Eventos" puede asignar funciones de sistema a los botones de la vista
general de GRAPH para saltar al visor de avisos o al visor de código PLC en runtime.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1911

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Resultado
La vista general de GRAPH se ha insertado en la imagen. En runtime se visualiza el estado
actual de la cadena secuencial GRAPH.

Consulte también
Mostrar el estado de la cadena secuencial de GRAPH (Página 1906)
Dinamización de imágenes (Página 209)
Principios básicos de la dinamización de imágenes (Página 209)

Configurar el modo de operación
Introducción
Para la ejecución del bloque GRAPH se dispone de cuatro modos de operación distintos:
● Auto (predeterminado)
Cambia automáticamente a la siguiente etapa cuando se cumple la transición.
● TAP
Cambia automáticamente a la siguiente etapa cuando se cumple la transición y existe
cambio de flanco de "0" a "1" en el parámetro T_PUSH.
● TOP
Cambia automáticamente a la siguiente etapa cuando se cumple la transición o existe
cambio de flanco de "0" a "1" en el parámetro T_PUSH.
● Manual
Al cumplirse la transición, la siguiente etapa no se activa automáticamente. Las etapas
pueden seleccionarse y deseleccionarse manualmente.
Nota
El modo de operación se establece modificando los parámetros de la interfaz del bloque
GRAPH en el programa de control.

Nota
El nombre del modo de operación depende del idioma y puede traducirse a los idiomas de
runtime deseados.
En WinCC Runtime Professional existe la posibilidad de cambiar el nombre del modo de
operación que se muestra en la vista general de GRAPH.

1912

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Configurar los títulos para los modos de operación
Hay una imagen abierta con la vista general de GRAPH configurada.
1. Haga clic en "Propiedades > Propiedades > Salida" en la ventana de inspección.
2. Configure los títulos para los cuatro modos de operación en "Salida > Títulos".

12.3.4.6

Configurar el visor de código PLC

Configurar el visor de código PLC
Introducción
En el proyecto se inserta un visor de código PLC para mostrar en runtime los segmentos del
programa PLC en los lenguajes de programación KOP, FUP y GRAPH.

Requisitos
● Se ha creado un controlador como mínimo.
● Se ha creado un panel de operador.
● Se ha creado una conexión HMI entre el controlador y el panel de operador.
● Se ha creado una imagen.
● La ventana de inspección está abierta.

Procedimiento
1. Arrastre el visor de código PLC de la ventana de herramientas utilizando la función de
arrastrar y soltar.
2. En la ventana de inspección, haga clic en "Propiedades > Propiedades > Barra de
herramientas".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1913

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
3. Active los botones que requiera en runtime, p. ej.: segmento siguiente, segmento anterior,
modo paso a paso.

4. En caso necesario, configure la representación de los botones, p. ej., el color de fondo o el
patrón de relleno.
5. En la ventana de inspección, haga clic en "Propiedades > Propiedades > Columnas".
6. En caso necesario, adapte los títulos o el orden de las columnas.
7. Seleccione un permiso de operación en "Propiedades > Propiedades > Seguridad".

Resultado
El visor de código PLC se ha insertado en la imagen. En runtime se pueden mostrar programas
de usuario del PLC programados en los lenguajes de programación KOP, FUP o GRAPH.

Vistas en el visor de código PLC
Introducción
En el visor de código PLC se muestra diferente información sobre el programa de usuario:
● Área de información
● Tabla de símbolos
● Vista detallada
● Vista Transition/Interlock
● Vista de primeros valores/valores actuales

1914

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Área de información
El área de información muestra el código KOP/FUP del programa de usuario o la cadena
secuencial GRAPH de un bloque de función GRAPH. Una vez que se ha establecido la
conexión con el controlador, en el área de información aparece resaltado el estado del
segmento encima del código del programa.

Tabla de símbolos
La tabla de símbolos muestra símbolos que se utilizan en el segmento mostrado. Las tres
columnas de la tabla de símbolos muestran el nombre de símbolo de las variables, la dirección
absoluta y los comentarios. Dado que los comentarios se cargan desde el programa de usuario
del controlador, aparecerán en el idioma que esté cargado en el controlador.
La altura y anchura de la tabla de símbolos se pueden modificar dinámicamente en runtime.

Vista detallada
Para representar su cadena secuencial GRAPH dispone además de una vista detallada.
La vista detallada muestra información exhaustiva acerca del segmento seleccionado y de los
errores existentes. En la vista detallada puede verse, p. ej., la transición de la primera etapa

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1915

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
activa de la cadena secuencial GRAPH. La vista detallada se abre en runtime con el botón
"Vista detallada".

Vista Transition/Interlock
Existe la posibilidad de cambiar entre las vistas de transición e Interlock al visualizar el
programa de usuario. La vista Transition/Interlock está disponible cuando se muestra la vista
detallada.
Puede cambiar entre las vistas Transition/Interlock en runtime con ayuda del botón "Transition/
Interlock". Al activar el botón se muestra el segmento Interlock, y al desactivarlo, el segmento
Transition.

1916

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Vista de primeros valores/valores actuales
Si ha activado la adquisición de primeros valores en el programa de usuario para el
correspondiente bloque de función, en el visor de código PLC podrá alternar la vista de
primeros valores y la de valores actuales. La vista de valores actuales utiliza los valores
actuales del controlador y muestra el estado actual del programa. La vista de primeros valores
utiliza los valores registrados en el momento del error y muestra los criterios y los operandos
erróneos. En la vista de primeros valores se resaltan visualmente los operandos erróneos.
Se cambia entre los valores actuales y los primeros valores con el botón "Valores actuales o
primeros valores". Si la adquisición de primeros valores está activada, en el visor de código
PLC se muestra por defecto la vista de primeros valores tras el salto.
En caso de fallo, en la vista de primeros valores se resaltan los operandos erróneos en runtime.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1917

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Botones de la barra de herramientas
La tabla siguiente muestra los botones de la barra de herramientas y su significado.
Elemento de ma‐
nejo

1918

Nombre

Función

"Área del símbolo"

Muestra el área del símbolo.

"Segmento anterior"

Se desplaza al segmento anterior.

"Segmento siguiente"

Se desplaza al segmento siguiente.

"Ampliar"

Amplía el área de información.

"Reducir"

Reduce el área de información.

"Detalle"

Muestra la vista detallada.

"Modo paso a paso"

Alterna la selección de etapas manual y la selec‐
ción automática de la etapa activa.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
Elemento de ma‐
nejo

Nombre

Función

"Transición o Interlock"

Alterna entre las representaciones de segmentos
de transición y de Interlock.

"Valores actuales o primeros
valores"

Alterna entre la vista de valores actuales y la de
primeros valores.

Configurar la visualización en el visor de código PLC
Introducción
El visor de código PLC permite también dividir la vista para representar la cadena secuencial
GRAPH. De esta manera tiene la posibilidad de ver el programa y sus detalles de un vistazo.
A la vista detallada se accede en runtime mediante el botón "Vista detallada".
En WinCC puede definir el tamaño relativo del área de información respecto a la vista detallada.

Requisitos
● Se ha creado una imagen.
● Se ha creado un visor de código PLC en la imagen.
● La ventana de inspección está abierta.

Definir la anchura de la vista detallada
1. Haga clic en la ventana de inspección "Propiedades > Propiedades > Representación".
2. Defina la anchura de la vista detallada en relación al área de información con ayuda de la
opción "Anchura vista detallada GRAPH (%)".

Resultado
El visor de código PLC se divide en dos áreas para la representación de la cadena secuencial
GRAPH en runtime. El área de la izquierda muestra la cadena secuencial GRAPH y el área de
la derecha muestra la vista detallada con la transición de la etapa activa.

Instrucciones soportadas
Introducción
El objeto "Visor de código PLC" soporta instrucciones en los lenguajes de programación FUP
y KOP.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1919

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Instrucciones
El visor de código PLC soporta las siguientes instrucciones:
● Operaciones lógicas con bits
● Comparadores
● Temporizadores
● Contadores

Operaciones lógicas con bits

Instrucción

KOP

FUP

Contacto normalmente cerrado

ಯ7DJBಯ

Contacto normalmente abierto

ಯ7DJBಯ

Activar salida

ಯ7DJBಯ
6

Desactivar salida

 6

ಯ7DJBಯ

ಯ7DJBಯ
5

Asignación

ಯ7DJBಯ
ಯ7DJBಯ

ಯ7DJBಯ
ಯ7DJBಯ

 5

ಯ7DJBಯ

ಯ7DJBಯ

ಯ7DJBಯ
ಯ7DJBಯ



ಯ7DJBಯ

NOT: Invertir RLO

ಯ7DJBಯ
127

Contacto invertido

ಯ7DJBಯ

 

ಯ7DJBಯ

ಯ7DJBಯ

ಯ7DJBಯ
ಯ7DJBಯ



ಯ7DJBಯ

1920

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
Instrucción

KOP

FUP

SR: Flipflop de activación/desactivación

ಯ7DJBಯ
ಯ7DJBಯ
ಯ7DJBಯ

6

ಯ7DJBಯ
ಯ7DJBಯ

4

ಯ7DJBಯ

5

RS: Flipflop de desactivación/activación
ಯ7DJBಯ

5

56


4

ಯ7DJBಯ

6

4

5

56


6

4
ಯ7DJBಯ

ಯ7DJBಯ
ಯ7DJBಯ

Se implementa interconectando los co‐
rrespondientes contactos NC o NA.

5



6

4
ಯ7DJBಯ

ಯ7DJBಯ
ಯ7DJBಯ

O-EXCLUSIVA

5
ಯ7DJBಯ

ಯ7DJBಯ

Se implementa interconectando los co‐
rrespondientes contactos NC o NA.

O

65


6

ಯ7DJBಯ
ಯ7DJBಯ

Y

65


Se implementa interconectando los co‐
rrespondientes contactos NC o NA.

5

! 


6

4
ಯ7DJBಯ

ಯ7DJBಯ

5

ಯ7DJBಯ

6

[
4

Encontrará más información sobre instrucciones en el capítulo "Programación del PLC >
Instrucciones".

Comparadores

Instrucción

KOP

CMP ==: Igual

FUP
ಯ7DJB9DOXHಯ
,17
ಯ7DJB9DOXHಯ

CMP <>: Diferente

ಯ7DJB9DOXHಯ
!
,17
ಯ7DJB9DOXHಯ

CMP >=: Mayor o igual

ಯ7DJB9DOXHಯ
!
,17
ಯ7DJB9DOXHಯ

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

,17
ಯ7DJB9DOXHಯ
ಯ7DJB9DOXHಯ

,1
,1
!
,17

ಯ7DJB9DOXHಯ
ಯ7DJB9DOXHಯ

,1
,1
!
,17

ಯ7DJB9DOXHಯ
ಯ7DJB9DOXHಯ

,1
,1

1921

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
Instrucción

KOP

FUP

CMP <=: Menor o igual

ಯ7DJB9DOXHಯ

,17


,17
ಯ7DJB9DOXHಯ
ಯ7DJB9DOXHಯ

ಯ7DJB9DOXHಯ

CMP >: Mayor

ಯ7DJB9DOXHಯ
!
,17

!
,17
ಯ7DJB9DOXHಯ
ಯ7DJB9DOXHಯ

ಯ7DJB9DOXHಯ

CMP <: Menor

,1
,1

ಯ7DJB9DOXHಯ

,17

,1
,1

,17

ಯ7DJB9DOXHಯ
ಯ7DJB9DOXHಯ

ಯ7DJB9DOXHಯ

,1
,1

Nota
El visor de código PLC soporta los siguientes tipos de datos en la visualización del
comparador: Números binarios, números enteros, números en coma flotante y tiempos a
excepción de S5TIME.
Encontrará más información sobre instrucciones en el capítulo "Programación del PLC >
Instrucciones".

Temporizadores

Instrucción

KOP

FUP

TP: Generar impulso
ಯ7DJB6WDUWಯ

ಯ7DJB3UHVHW7LPHಯ

TON: Generar retardo al conectar
ಯ7DJB6WDUWಯ

ಯ7DJB3UHVHW7LPHಯ

1922

ಯ73B'%ಯ

ಯ73B'%ಯ

73
7,0(

73
7,0(

,1

4

ಯ7DJB6WDWXVಯ
ಯ7DJB6WDUWಯ

,1

4

37

(7

ಯ7DJB(ODSVHG7LPHಯ
ಯ7DJB3UHVHW7LPHಯ

37

(7

ಯ721B'%ಯ

ಯ721B'%ಯ

721
7,0(

721
7,0(

,1

4

ಯ7DJB6WDWXVಯ
ಯ7DJB6WDUWಯ

,1

4

37

(7

ಯ7DJB(ODSVHG7LPHಯ
ಯ7DJB3UHVHW7LPHಯ

37

(7

ಯ7DJB6WDWXVಯ
ಯ7DJB(ODSVHG7LPHಯ

ಯ7DJB6WDWXVಯ
ಯ7DJB(ODSVHG7LPHಯ

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
Instrucción

KOP

FUP

TOF: Generar retardo al desconectar
ಯ7DJB6WDUWಯ

ಯ7DJB3UHVHW7LPHಯ

TONR: Acumular tiempo
ಯ7DJB6WDUWಯ
ಯ7DJB5HVHWಯ
ಯ7DJB3UHVHW7LPHಯ

ಯ72)B'%ಯ

ಯ72)B'%ಯ
72)
7,0(
,1

4

ಯ7DJB6WDWXVಯ
ಯ7DJB6WDUWಯ

37

(7

ಯ7DJB(ODSVHG7LPHಯ
ಯ7DJB3UHVHW7LPHಯ

72)
7,0(
,1

4

37

(7

ಯ7215B'%ಯ

ಯ7215B'%ಯ

7215
7,0(

7215
7,0(

,1

4

ಯ7DJB6WDWXVಯ
ಯ7DJB6WDUWಯ

,1

4

5

(7

ಯ7DJB(ODSVHG7LPHಯ
ಯ7DJB5HVHWಯ

5

(7

37

ಯ7DJB3UHVHW7LPHಯ

ಯ7DJB6WDWXVಯ
ಯ7DJB(ODSVHG7LPHಯ

ಯ7DJB6WDWXVಯ
ಯ7DJB(ODSVHG7LPHಯ

37

Encontrará más información sobre instrucciones en el capítulo "Programación del PLC >
Instrucciones".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1923

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Contadores*
* Los contadores soportan los tipos de datos enteros
Instrucción

KOP

FUP

CTU: Contador ascendente
ಯ7DJ,QBಯ
ಯ7DJ,QBಯ
ಯ7DJB39ಯ

ಯ7DJ,QBಯ
ಯ7DJB39ಯ

CTUD: Contador ascendente - des‐
cendente

ಯ&78B'%ಯ

&78

&78
,17

,17
&8

4

5

&9

ಯ7DJ2XWಯ
ಯ7DJ,QBಯ

ಯ7DJ,QBಯ
ಯ7DJB&9ಯ
ಯ7DJB39ಯ

39

CTD: Contador descendente
ಯ7DJ,QBಯ

ಯ&78B'%ಯ

5

&9

ಯ7DJB&9ಯ

4

ಯ7DJ2XWಯ

39

ಯ&7'B'%ಯ

ಯ&7'B'%ಯ

&7'

&7'

,17

,17

&'

4

ಯ7DJ2XWಯ
ಯ7DJ,QBಯ

/'

&9

ಯ7DJ,QBಯ
ಯ7DJB&9ಯ

/'

&9

ಯ7DJB&9ಯ

ಯ7DJB39ಯ

39

4

ಯ7DJ2XWಯ

39

&'

ಯ&78'B'%ಯ

ಯ&78'B'%ಯ

&78'

&78'

,17

ಯ7DJ,QBಯ
&8

48

&'
5

ಯ7DJ,QB&8ಯ

&8

4'

ಯ7DJ2XWB4'ಯ
ಯ7DJ,QB&'ಯ

&'

&9

ಯ7DJB&9ಯ

ಯ7DJ,QBಯ
ಯ7DJ,QBಯ
/'
39

,17

ಯ7DJ2XWಯ

ಯ7DJ,QBಯ

ಯ7DJB39ಯ

&8

ಯ7DJ,QB5ಯ

5

4'

ಯ7DJ2XWB4'ಯ

ಯ7DJ,QB/'ಯ

/'

&9

ಯ7DJB&9ಯ

ಯ7DJB39ಯ

39

48

ಯ7DJ2XWB48ಯ

Encontrará más información sobre instrucciones en el capítulo "Programación del PLC >
Instrucciones".

Tipos de datos soportados
Tipos de datos soportados
La siguiente tabla muestra los tipos de datos soportados en el objeto "Visor de código PLC" y
sus formatos de representación:
Tipo de datos

Longitud

Formato

1 bit

Bool

Números binarios
BOOL

1924

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
Tipo de datos

Longitud

Formato

BYTE

8 bits

Hex

WORD

16 bits

Hex

DWORD

32 bits

Hex

LWORD

64 bits

Hex

SINT

8 bits

Dec

USINT

8 bits

Dec

Enteros

INT

16 bits

Dec

UINT

16 bits

Dec

DINT

32 bits

Dec

UDINT

32 bits

Dec

LINT

64 bits

Dec

ULINT

64 bits

Dec

Números en coma flotante
REAL

32 bits

Floating point number

LREAL

64 bits

Floating point number

TIME

32 bits

Time

LTIME

64 bits

LTime

12 bytes

Date and Time

Tiempos

Fecha y hora
DTL**

* Solo con operandos booleanos
** No se soportan estructuras DTL completas. Solo se soportan elementos individuales de estructuras
DTL.

Nota
Encontrará más información sobre los tipos de datos en "Programación del PLC > Tipos de
datos".

Nota
Los tipos de datos de PLC de 64 bits LINT, ULINT y LWORD en el canal HMI se corresponden
con el tipo de datos de HMI LREAL. Esto implica una pérdida de exactitud si el valor supera el
tamaño de 2^50.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1925

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Limitaciones del visor de código PLC
Operandos y UDT
Los operandos declarados en la sección "#Temp" o "#InOut" no son soportados por el visor de
código PLC. Esto vale tanto para los tipos de datos simples como para los tipos de datos
contenidos en UDT. Los tipos de datos de un UDT se pueden declarar en las secciones "#In"
y "#Out" y representar en el visor de código PLC. Para los tipos de datos del UDT valen las
mismas limitaciones que para los tipos de datos simples.

Limitación de los tipos de datos
El uso de los tipos de datos STRING, WSTRING, CHAR, WCHAR, S5TIME provoca que el
segmento no se pueda mostrar en el visor de código PLC.

Uso de tipos de datos de 64 bits
Si se usan tipos de datos de 64 bits, puede producirse una pequeña pérdida de exactitud, ya
que estos tipos de datos se mapean como tipo de datos Double en el canal HMI. Esto puede
ocasionar que tipos de datos enteros se muestren con decimales.

Direccionamiento de variables
Tenga en cuenta las siguientes limitaciones para el direccionamiento de variables:
● El objeto "Visor de código PLC" solo soporta el direccionamiento simbólico de variables. Si
el operando no se direcciona de forma simbólica, no puede mostrarse el segmento con el
operando y se emite un mensaje de error.
● No se admite el uso de elementos de matriz con una variable como índice, p. ej.,
#myArray[MyTag]. Utilice valores numéricos para direccionar los elementos de matriz,
p. ej., #myArray[6].
● Los accesos Slice permiten direccionar de forma selectiva secciones de variables
declaradas. En los accesos Slice, el visor de código PLC solo soporta el ancho de acceso
"Bit" en las variables booleanas.

Salto al visor de código PLC
Para saltar de un aviso de supervisión al visor de código PLC cuando se usan operandos
locales soportados en un bloque de función, el nombre de la instancia debe cumplir la siguiente
convención: <FB-Name>_DB.
Solo es posible saltar a una función o a un bloque de organización si se usan exclusivamente
operandos globales.

1926

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

12.3.4.7

Configurar el visor de código PLC

Configurar el visor de código PLC
Introducción
En el proyecto se inserta un visor de código PLC para mostrar en runtime los segmentos del
programa PLC en los lenguajes de programación KOP, FUP y GRAPH.

Requisitos
● Se ha creado un controlador como mínimo.
● Se ha creado una estación PC.
● Se ha creado una conexión HMI entre el controlador y el panel de operador.
● Se ha creado una imagen.
● La ventana de inspección está abierta.

Procedimiento
1. Arrastre el visor de código PLC de la ventana de herramientas utilizando la función de
arrastrar y soltar.
2. Haga clic en la ventana de inspección "Propiedades > Propiedades > Representación".
3. En "Representación > Tabla de símbolos Líneas", indique el número de líneas que
aparecerán en la tabla de símbolos.
4. En la ventana de inspección, haga clic en "Propiedades > Propiedades > Barra de
herramientas".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1927

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
5. Asigne una tecla de acceso directo a los botones que requiera en runtime, p. ej., Modo paso
a paso.

6. Para poder ver o solucionar los errores producidos al crear la visualización de un segmento
en runtime, configure un script adecuado en "Propiedades > Eventos > Error".

Resultado
El visor de código PLC se ha insertado en la imagen. En runtime pueden verse programas de
usuario de PLC escritos en los lenguajes de programación KOP, FUP o GRAPH.

Vistas en el visor de código PLC
Introducción
En el visor de código PLC puede mostrarse información diversa acerca del programa del
usuario:
● Área de información
● Tabla de símbolos
● Vista detallada
● Vista Transition/Interlock
● Vista de primeros valores/valores actuales

1928

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Área de información
El área de información muestra el código de programa KOP/FUP del programa de usuario o la
secuencia de ejecución GRAPH de un bloque de datos GRAPH. Una vez que se ha
establecido la conexión con el controlador, en el área de información aparece resaltado el
estado del segmento encima del código del programa.

Tabla de símbolos
La tabla de símbolos muestra los símbolos que se utilizan en el segmento indicado. Las tres
columnas de la tabla de símbolos muestran el nombre de símbolo de las variables, la dirección
absoluta y los comentarios. Dado que los comentarios se cargan desde el programa de usuario
del controlador, aparecerán en el idioma que esté cargado en el controlador.
La altura y anchura de la tabla de símbolos se pueden modificar dinámicamente en runtime.

Vista detallada
La vista detallada muestra información concreta acerca del segmento seleccionado y de los
errores existentes. En la vista detallada puede verse, p. ej., la transición de la primera etapa
activa de la cadena secuencial GRAPH. La vista detallada se abre en runtime con el botón
"Vista detallada".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1929

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Vista Transition/Interlock
Existe la posibilidad de cambiar entre las vistas Transición e Interlock al visualizar el programa
de usuario en KOP/FUP. La vista Transition/Interlock está disponible cuando se muestra la
vista detallada.
Puede cambiar entre las vistas Transition/Interlock en runtime con ayuda del botón "Transition/
Interlock". Al activar el botón se muestra el segmento Interlock, y al desactivarlo, el segmento
Transition.

1930

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Vista de primeros valores/valores actuales
Si ha activado la adquisición de primeros valores en el programa de usuario para el
correspondiente bloque de función, en el visor de código PLC podrá alternar la vista de
primeros valores y la de valores actuales. La vista de valores actuales utiliza los valores
actuales del controlador y muestra el estado actual del programa. La vista de primeros valores
utiliza los valores registrados en el momento del error y muestra los criterios y los operandos
erróneos. En la vista de primeros valores se resaltan visualmente los operandos erróneos.
Se cambia entre los valores actuales y los primeros valores con el botón "Valores actuales o
primeros valores". Si la adquisición de primeros valores está activada, en el visor de código
PLC se muestra por defecto la vista de primeros valores tras el salto.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1931

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Botones de la barra de herramientas
La tabla siguiente muestra los botones de la barra de herramientas y su significado.
Elemento de ma‐
nejo

1932

Nombre

Función

"Área del símbolo"

Muestra el área del símbolo.

"Segmento anterior"

Se desplaza al segmento anterior.

"Segmento siguiente"

Se desplaza al segmento siguiente.

"Ampliar"

Amplía el área de información.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
Elemento de ma‐
nejo

Nombre

Función

"Reducir"

Reduce el área de información.

"Detalle"

Muestra la vista detallada.

"Modo paso a paso"

Alterna la selección de etapas manual y la selec‐
ción automática de la etapa activa.

"Transition o Interlock"

Alterna la vista Transición y la vista Interlock.

"Valores actuales o primeros
valores"

Alterna entre la vista de valores actuales y la de
primeros valores.

Instrucciones soportadas
Introducción
El objeto "Visor de código PLC" soporta instrucciones en los lenguajes de programación FUP
y KOP.

Instrucciones
El visor de código PLC soporta las siguientes instrucciones:
● Operaciones lógicas con bits
● Comparadores
● Temporizadores
● Contadores

Operaciones lógicas con bits

Instrucción

KOP

FUP

Contacto normalmente cerrado

ಯ7DJBಯ

Contacto normalmente abierto

ಯ7DJBಯ

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1933

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
Instrucción

KOP

FUP

Activar salida

ಯ7DJBಯ

ಯ7DJBಯ

6

Desactivar salida

 6

ಯ7DJBಯ
ಯ7DJBಯ

ಯ7DJBಯ

ಯ7DJBಯ

5

Asignación

 5

ಯ7DJBಯ
ಯ7DJBಯ

ಯ7DJBಯ

ಯ7DJBಯ
ಯ7DJBಯ



ಯ7DJBಯ

NOT: Invertir RLO

ಯ7DJBಯ

Contacto invertido

 

ಯ7DJBಯ

127

ಯ7DJBಯ

ಯ7DJBಯ

ಯ7DJBಯ


ಯ7DJBಯ
ಯ7DJBಯ

SR: Flipflop de activación/desactivación

ಯ7DJBಯ
ಯ7DJBಯ
ಯ7DJBಯ

6

ಯ7DJBಯ
4

ಯ7DJBಯ
ಯ7DJBಯ

5

RS: Flipflop de desactivación/activación
ಯ7DJBಯ

5

56


4

ಯ7DJBಯ

6

Se implementa interconectando los co‐
rrespondientes contactos NC o NA.

4

Se implementa interconectando los co‐
rrespondientes contactos NC o NA.

Se implementa interconectando los co‐
rrespondientes contactos NC o NA.

5

56


6

4
ಯ7DJBಯ

ಯ7DJBಯ

5



6

4
ಯ7DJBಯ

ಯ7DJBಯ
ಯ7DJBಯ

O-EXCLUSIVA

5
ಯ7DJBಯ

ಯ7DJBಯ

ಯ7DJBಯ

O

65


6

ಯ7DJBಯ
ಯ7DJBಯ

Y

65


5

! 


6

4
ಯ7DJBಯ

ಯ7DJBಯ

5

ಯ7DJBಯ

6

[
4

Encontrará más información sobre instrucciones en el capítulo "Programación del PLC >
Instrucciones".

1934

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Comparadores

Instrucción

KOP

CMP ==: Igual

FUP
ಯ7DJB9DOXHಯ
,17
ಯ7DJB9DOXHಯ

CMP <>: Diferente

ಯ7DJB9DOXHಯ
!
,17
ಯ7DJB9DOXHಯ

CMP >=: Mayor o igual

ಯ7DJB9DOXHಯ
!
,17
ಯ7DJB9DOXHಯ

CMP <=: Menor o igual

ಯ7DJB9DOXHಯ

,17
ಯ7DJB9DOXHಯ

CMP >: Mayor

ಯ7DJB9DOXHಯ
!
,17
ಯ7DJB9DOXHಯ

CMP <: Menor

ಯ7DJB9DOXHಯ

,17
ಯ7DJB9DOXHಯ

,17
ಯ7DJB9DOXHಯ
ಯ7DJB9DOXHಯ

,1
,1
!
,17

ಯ7DJB9DOXHಯ
ಯ7DJB9DOXHಯ

,1
,1
!
,17

ಯ7DJB9DOXHಯ
ಯ7DJB9DOXHಯ

,1
,1

,17

ಯ7DJB9DOXHಯ
ಯ7DJB9DOXHಯ

,1
,1
!
,17

ಯ7DJB9DOXHಯ
ಯ7DJB9DOXHಯ

,1
,1

,17

ಯ7DJB9DOXHಯ
ಯ7DJB9DOXHಯ

,1
,1

Nota
El visor de código PLC soporta los siguientes tipos de datos en la visualización del
comparador: Números binarios, números enteros, números en coma flotante y tiempos a
excepción de S5TIME.
Encontrará más información sobre instrucciones en el capítulo "Programación del PLC >
Instrucciones".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1935

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Temporizadores

Instrucción

KOP

FUP

TP: Generar impulso
ಯ7DJB6WDUWಯ

ಯ7DJB3UHVHW7LPHಯ

TON: Generar retardo al conectar
ಯ7DJB6WDUWಯ

ಯ7DJB3UHVHW7LPHಯ

ಯ7DJB3UHVHW7LPHಯ

TONR: Acumular tiempo
ಯ7DJB6WDUWಯ
ಯ7DJB5HVHWಯ
ಯ7DJB3UHVHW7LPHಯ

ಯ73B'%ಯ

73
7,0(

73
7,0(

,1

4

ಯ7DJB6WDWXVಯ
ಯ7DJB6WDUWಯ

,1

4

37

(7

ಯ7DJB(ODSVHG7LPHಯ
ಯ7DJB3UHVHW7LPHಯ

37

(7

ಯ721B'%ಯ

ಯ721B'%ಯ

721
7,0(

721
7,0(

,1

4

ಯ7DJB6WDWXVಯ
ಯ7DJB6WDUWಯ

,1

4

37

(7

ಯ7DJB(ODSVHG7LPHಯ
ಯ7DJB3UHVHW7LPHಯ

37

(7

TOF: Generar retardo al desconectar
ಯ7DJB6WDUWಯ

ಯ73B'%ಯ

ಯ72)B'%ಯ

ಯ72)B'%ಯ

72)
7,0(

72)
7,0(

,1

4

ಯ7DJB6WDWXVಯ
ಯ7DJB6WDUWಯ

,1

4

37

(7

ಯ7DJB(ODSVHG7LPHಯ
ಯ7DJB3UHVHW7LPHಯ

37

(7

ಯ7215B'%ಯ

ಯ7215B'%ಯ

7215
7,0(

7215
7,0(

,1

4

ಯ7DJB6WDWXVಯ
ಯ7DJB6WDUWಯ

,1

4

5

(7

ಯ7DJB(ODSVHG7LPHಯ
ಯ7DJB5HVHWಯ

5

(7

37

ಯ7DJB3UHVHW7LPHಯ

ಯ7DJB6WDWXVಯ
ಯ7DJB(ODSVHG7LPHಯ

ಯ7DJB6WDWXVಯ
ಯ7DJB(ODSVHG7LPHಯ

ಯ7DJB6WDWXVಯ
ಯ7DJB(ODSVHG7LPHಯ

ಯ7DJB6WDWXVಯ
ಯ7DJB(ODSVHG7LPHಯ

37

Encontrará más información sobre instrucciones en el capítulo "Programación del PLC >
Instrucciones".

1936

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Contadores*
* Los contadores soportan los tipos de datos enteros
Instrucción

KOP

FUP

CTU: Contador ascendente
ಯ7DJ,QBಯ
ಯ7DJ,QBಯ
ಯ7DJB39ಯ

ಯ7DJ,QBಯ
ಯ7DJB39ಯ

CTUD: Contador ascendente - des‐
cendente

ಯ&78B'%ಯ

&78

&78
,17

,17
&8

4

5

&9

ಯ7DJ2XWಯ
ಯ7DJ,QBಯ

ಯ7DJ,QBಯ
ಯ7DJB&9ಯ
ಯ7DJB39ಯ

39

CTD: Contador descendente
ಯ7DJ,QBಯ

ಯ&78B'%ಯ

5

&9

ಯ7DJB&9ಯ

4

ಯ7DJ2XWಯ

39

ಯ&7'B'%ಯ

ಯ&7'B'%ಯ

&7'

&7'

,17

,17

&'

4

ಯ7DJ2XWಯ
ಯ7DJ,QBಯ

/'

&9

ಯ7DJ,QBಯ
ಯ7DJB&9ಯ

/'

&9

ಯ7DJB&9ಯ

ಯ7DJB39ಯ

39

4

ಯ7DJ2XWಯ

39

&'

ಯ&78'B'%ಯ

ಯ&78'B'%ಯ

&78'

&78'

,17

ಯ7DJ,QBಯ
&8

48

&'
5

ಯ7DJ,QB&8ಯ

&8

4'

ಯ7DJ2XWB4'ಯ
ಯ7DJ,QB&'ಯ

&'

&9

ಯ7DJB&9ಯ

ಯ7DJ,QBಯ
ಯ7DJ,QBಯ
/'
39

,17

ಯ7DJ2XWಯ

ಯ7DJ,QBಯ

ಯ7DJB39ಯ

&8

ಯ7DJ,QB5ಯ

5

4'

ಯ7DJ2XWB4'ಯ

ಯ7DJ,QB/'ಯ

/'

&9

ಯ7DJB&9ಯ

ಯ7DJB39ಯ

39

48

ಯ7DJ2XWB48ಯ

Encontrará más información sobre instrucciones en el capítulo "Programación del PLC >
Instrucciones".

Tipos de datos soportados
Tipos de datos soportados
La siguiente tabla muestra los tipos de datos soportados en el objeto "Visor de código PLC" y
sus formatos de representación:
Tipo de datos

Longitud

Formato

1 bit

Bool

Números binarios
BOOL*

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1937

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
Tipo de datos

Longitud

Formato

BYTE

8 bits

Hex

WORD

16 bits

Hex

DWORD

32 bits

Hex

LWORD

64 bits

Hex

SINT

8 bits

Dec

USINT

8 bits

Dec

Enteros

INT

16 bits

Dec

UINT

16 bits

Dec

DINT

32 bits

Dec

UDINT

32 bits

Dec

LINT

64 bits

Dec

ULINT

64 bits

Dec

Números en coma flotante
REAL

32 bits

Floating point number

LREAL

64 bits

Floating point number

S5TIME

16 bits

SIMATIC_Timer

TIME

32 bits

Time

LTIME

64 bits

LTime

12 bytes

Date and Time

Temporizadores

Fecha y hora
DTL**

* Solo con operandos booleanos.
** No se soportan estructuras DTL completas. Solo se soportan elementos individuales de estructuras
DTL.

Nota
Encontrará más información sobre los tipos de datos en "Programación del PLC > Tipos de
datos".

Nota
Operandos y UDT
Los operandos declarados en la sección "#Temp" o "#InOut" no son soportados por el visor de
código PLC. Esto vale tanto para los tipos de datos simples como para los tipos de datos
contenidos en UDT. Los tipos de datos de un UDT se pueden declarar en las secciones "#In"
y "#Out" y representar en el visor de código PLC. Para los tipos de datos del UDT valen las
mismas limitaciones que para los tipos de datos simples.

1938

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Nota
El segmento lógico previo no debe incluir ninguna variable de la sección Temp o InOut de un
FB.
Los siguientes tipos de datos no se deben utilizar para las variables: STRING, WSTRING,
CHAR, WCHAR, S5TIME

Nota
Los tipos de datos de PLC de 64 bits LINT, ULINT y LWORD se representan como tipo de datos
de HMI LREAL en el canal HMI. Esto implica una pérdida de exactitud si el valor supera el
tamaño de 2^50.

Consulte también
Tipos de datos para SIMATIC S7-1500 (Página 628)

Limitaciones del visor de código PLC
Operandos y UDT
Los operandos declarados en la sección "#Temp" o "#InOut" no son soportados por el visor de
código PLC. Esto vale tanto para los tipos de datos simples como para los tipos de datos
contenidos en UDT. Los tipos de datos de un UDT se pueden declarar en las secciones "#In"
y "#Out" y representar en el visor de código PLC. Para los tipos de datos del UDT valen las
mismas limitaciones que para los tipos de datos simples.

Limitación de los tipos de datos
El uso de los tipos de datos STRING, WSTRING, CHAR, WCHAR, S5TIME provoca que el
segmento no se pueda mostrar en el visor de código PLC.

Uso de tipos de datos de 64 bits
Si se usan tipos de datos de 64 bits, puede producirse una pequeña pérdida de exactitud, ya
que estos tipos de datos se mapean como tipo de datos Double en el canal HMI. Esto puede
ocasionar que tipos de datos enteros se muestren con decimales.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1939

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Direccionamiento de variables
Tenga en cuenta las siguientes limitaciones para el direccionamiento de variables:
● El objeto "Visor de código PLC" solo soporta el direccionamiento simbólico de variables. Si
el operando no se direcciona de forma simbólica, no puede mostrarse el segmento con el
operando y se emite un mensaje de error.
● No se admite el uso de elementos de matriz con una variable como índice, p. ej.,
#myArray[MyTag]. Utilice valores numéricos para direccionar los elementos de matriz,
p. ej., #myArray[6].
● Los accesos Slice permiten direccionar de forma selectiva secciones de variables
declaradas. En los accesos Slice, el visor de código PLC solo soporta el ancho de acceso
"Bit" en las variables booleanas.

Salto al visor de código PLC
Para saltar de un aviso de supervisión al visor de código PLC cuando se usan operandos
locales soportados en un bloque de función, el nombre de la instancia debe cumplir la siguiente
convención: <FB-Name>_DB.
Solo es posible saltar a una función o a un bloque de organización si se usan exclusivamente
operandos globales.

Configuración de salto desde el aviso
Introducción
Existe la posibilidad de configurar un salto desde el visor de avisos al visor de código PLC o
desde runtime al proyecto en el TIA Portal. Para ello se dispone de dos funciones:
● La función de sistema "MostrarVisorAvisosCódigoPLC (Página 1762)" permite saltar al
visor de código PLC.
● La función de sistema "MostrarBloqueEnTiaPortalDelAviso (Página 1760)" permite saltar
de runtime a la configuración en el TIA Portal.
En este ejemplo se configura el salto al visor de código PLC desde el aviso correspondiente en
el visor de avisos.

Requisitos
● La imagen "Alarm" está abierta.
● Se ha creado el visor de avisos "ProDiag_Alarm".
● Se ha creado el visor de código PLC "PLC code view" en la imagen "Program code".

Configuración del botón de salto
1. Arrastre un botón desde la Task Card "Herramientas" hasta la imagen abierta "Alarm".
2. En "Misceláneo > Objeto > Nombre", asigne un nombre (p. ej., "Jump to PLC Code").

1940

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
3. Cambie a "Eventos > Hacer clic".
4. Haga clic en "Agregar función".
5. Seleccione la función "MostrarVisorAvisosCódigoPLC" en la lista de selección.
6. En "Nombre de la imagen de aviso", introduzca el nombre de la imagen en la que se ha
configurado el visor de avisos: "Alarm".
7. En "Nombre del visor de avisos", introduzca el nombre del visor de avisos: "ProDiag_Alarm".
8. En "Nombre imagen del visor de código PLC", introduzca "Program code".
9. En "Nombre del visor de código PLC", introduzca "PLC code view".

Comprobación de la posibilidad de salto
1. Seleccione el visor de avisos "ProDiag-Alarm".
2. Vaya a la ficha "Eventos".
3. Haga clic en el evento "Selección modificada".
4. Cree un script C personalizado en este evento:
#include "GlobalDefinitions.h"
void OnSelectedIdChanged(char* screenName, char* objectName, long
id) {
#pragma code("KOPAPI.dll")
#include "kopapi.h"
#pragma code()
CMN_ERROR errorStruct;
BOOL bResult;
bResult = IsJumpableProDiagAlarm (screenName, objectName, id, &err
orStruct);
SetPropBOOL (screenName, "Jump to PLC Code", "Enabled", bResult);

Resultado
Se ha configurado un botón para saltar al visor de código PLC. El botón para efectuar dicho
salto solo se mostrará si aparece un aviso relevante para ProDiag en el visor de avisos.

Consulte también
Pasar a la configuración (Página 2388)

12.3.4.8

Solución de problemas de visualización en el visor de código PLC

Introducción
Si durante la visualización del código del programa surge un fallo, en el visor de código PLC se
emitirá un mensaje de error con el número de error correspondiente. Para solucionar el error
de visualización, empiece por aplicar las primeras medidas propuestas.
Si el error persiste, póngase en contacto con el Customer Support.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1941

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Primeras medidas para la solución de fallos
Tenga en cuenta las indicaciones generales siguientes para la solución de fallos:
1. Asegúrese de que se ha cargado la configuración actual en el panel de operador.
2. Si visualiza el código de programa en el visor de código PLC con ayuda de una función API
runtime, compruebe la notación y la secuencia de los parámetros de la llamada.
3. Reinicie runtime en su panel de operador.

Indicaciones para los mensajes de error
La siguiente tabla contiene los mensajes de error e indicaciones para la solución de varios
errores específicos en la visualización del código de programa (si los hay):
Número de error

Mensaje de error

3101, 3107, 3109,
3113, 3402, 3501,
3502, 3601, 3602,

Al determinar los datos a visualizar se ha
producido un error general.

Indicaciones

4000 - 4107,
4110 - 4113, 4115 4121
4200 - 4203, 4300 4604
3102
4114, 4122, 4123

Los parámetros de la llamada no son correc‐ Compruebe si todos los parámetros de la llamada
tos.
se han indicado en la secuencia especificada. Ase‐
gúrese de que las indicaciones estén completas y
sean correctas.

3103

No se ha encontrado el PLC o el nombre del
PLC no es correcto.

3104

No se ha podido determinar la dirección del
bloque lógico.

3105

No se ha podido determinar la dirección del
bloque de datos de instancia.

3106

El bloque tiene protección de know-how.

3108

No es compatible la versión del sistema de
ingeniería.

3112

El segmento contiene un operando no so‐
portado.

3117

No se soporta el lenguaje del segmento.

3201

No se ha encontrado el operando.

3301

No se ha encontrado el bloque llamado.

3302

No se ha encontrado ningún bloque en el
que se emplee este UDT.

3303

No se han encontrado entradas adecuadas
o las entradas no contienen tipos de datos
soportados.

1942

Compruebe el nombre de PLC indicado.

Asegúrese de que en el parámetro se haya indicado
el nombre del bloque de datos de instancia y no el
nombre del bloque de función.
Asegúrese de que el programa de usuario y la vi‐
sualización se hayan configurado con la versión co‐
rrespondiente del TIA Portal. El visor de código PLC
con WinCC V14 soporta solo la configuración con el
sistema de ingeniería del TIA Portal V14.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
Número de error

Mensaje de error

Indicaciones

3401

Al determinar los datos de un bloque
GRAPH se ha producido un error.

Asegúrese de que el bloque indicado sea un bloque
GRAPH.

3114, 3110, 3111

El segmento contiene un elemento no sopor‐
tado.

4103
4106

Al calcular el estado online se ha producido
un error.

4108

No se ha definido el nombre de PLC.

4109

No se ha definido el nombre de DB.

4202

No se ha definido el UDT de ProDiag.

Desconecte el panel de operador de la red desen‐
chufando el cable de red. Espere un momento y
enchufe de nuevo el cable de red.

12.3.5

Ejemplo: Visualización de la funcionalidad ProDiag

12.3.5.1

Resumen de operaciones

Introducción
ProDiag permite supervisar fallos de la instalación y mostrar información sobre las
supervisiones en su panel de operador.
El siguiente ejemplo muestra cómo utilizar con WinCC objetos para la supervisión y el
diagnóstico de instalaciones.

Ejemplo
En este ejemplo se configura la visualización para la supervisión del funcionamiento de una
cinta transportadora.
Con una supervisión ProDiag previamente creada, se sigue el desplazamiento de las piezas
de producción en la cinta transportadora.
En STEP 7 se crean el programa de usuario y supervisiones ProDiag para operandos. En
WinCC se configuran a continuación las imágenes y los objetos para la visualización del
programa y del estado actual del programa, así como la salida de avisos de error.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1943

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Pasos de configuración
El ejemplo se divide en varios pasos:
● Crear imágenes
– Imagen general con los objetos de imagen ProDiag
– Imagen para el visor de avisos
– Imagen para el visor de código PLC
● Insertar objetos en imágenes
– Vista general de ProDiag para la visualización de las supervisiones ProDiag
– Vista general de GRAPH para la visualización de la cadena secuencial GRAPH
– Visor de avisos para la visualización de los avisos ProDiag
– Visor de código PLC para la visualización del código de programa en los lenguajes KOP,
FUP y GRAPH
● Configurar objetos
Interconectar los objetos para permitir una navegación directa hasta la causa del error en
runtime.

1944

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

12.3.5.2

Requisitos

Requisitos
● Se ha creado un controlador S7-1500 con firmware a partir de la versión 2.0.
● Se ha creado un programa de usuario para controlar la cinta transportadora.
● El programa de usuario contiene un bloque de función GRAPH con la secuencia de
movimiento de la cinta transportadora.
● El programa de usuario contiene un bloque de función ProDiag con las supervisiones de
operandos configuradas.
Para más información sobre la creación de supervisiones ProDiag, consulte el capítulo
"Programación del PLC > Supervisión de máquinas e instalaciones con ProDiag".
● Se ha creado el panel de operador TP1200 Comfort.
● Se ha creado una conexión entre el controlador y el panel de operador.

Programa de control
En STEP 7 se ha creado anteriormente un programa para la secuencia de la cinta
transportadora y un bloque de función ProDiag con supervisiones de operandos. La siguiente
tabla muestra los bloques y las variables que se utilizan en este ejemplo de visualización con
WinCC:
Nombre

Designación/tipo

Explicación

Conv_Seq [FB]

Bloque de función GRAPH

Contiene la secuencia de programa de movimiento de la
cinta transportadora.

Conv_Seq_DB

Bloque de datos GRAPH

Bloque de datos de instancia GRAPH correspondiente

OFF_SQ

Variable de tipo Bool del bloque de
datos GRAPH

Variable PLC utilizada como variable de proceso para la
visualización de estado de la cadena secuencial GRAPH.

Conveyor [FB]

Bloque de función ProDiag

El bloque de función ProDiag contiene las supervisiones
ProDiag configuradas para los operandos que controlan
el funcionamiento de la cinta transportadora.

Conveyor_DB

Bloque de datos ProDiag

Bloque de datos de instancia GRAPH correspondiente.

State

Variable de tipo SV_FB_State del
bloque de datos ProDiag

La variable de estado del tipo de datos PLC "SV_FB_Sta‐
te" contiene los bits de error agrupado de todas las su‐
pervisiones asignadas al bloque de función ProDiag.

12.3.5.3

Crear imágenes

Introducción
Se crean tres imágenes para mostrar distintos objetos para la visualización de las
supervisiones ProDiag en la instalación.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1945

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Procedimiento
1. Abra el árbol del proyecto.
2. En la carpeta Imágenes, haga clic en "Agregar imagen".
3. Abra el menú contextual de la imagen y asígnele el nombre "Overview".
4. Cree dos imágenes más con los nombres "Alarm" y "Program code".

Resultado
Ha creado una imagen general y dos imágenes más para visualizar las supervisiones en
runtime.

12.3.5.4

Inserción de objetos de diagnóstico

Introducción
Para visualizar el código de programa y el estado actual del programa en runtime en el panel
de operador, inserte los objetos para el diagnóstico en las imágenes creadas.
La vista general de GRAPH muestra en runtime las etapas ejecutadas actualmente de la
cadena secuencial GRAPH que se ha configurado.
La vista general de ProDiag muestra si se ha producido un fallo y se ha disparado una
supervisión ProDiag.

Requisitos
● Se han creado las imágenes "Program code", "Overview" y "Alarm".
● La Task Card "Herramientas" está abierta.

Procedimiento
1. Abra la imagen "Program code".
2. Mediante la función de arrastrar y soltar, mueva un "Visor de código PLC" de la Task Card
"Herramientas" a la imagen.
3. En la ventana de inspección, vaya a "Propiedades > Propiedades > Misceláneo > Nombre"
y asigne el nombre de objeto "PLC code view".
4. Abra la imagen "Overview".
5. Mediante la función de arrastrar y soltar, mueva el objeto "Vista general de ProDiag" de la
Task Card "Herramientas" a la imagen.
Si desea supervisar varios bloques ProDiag del programa, cree una vista general de
ProDiag para cada bloque.
6. En la ventana de inspección, vaya a "Propiedades > Propiedades > Misceláneo > Nombre"
y asigne un nombre de objeto apropiado, p. ej., "Overview_Conveyor".
7. Mediante la función de arrastrar y soltar, mueva una "Vista general de GRAPH" de la Task
Card "Herramientas" a la imagen.

1946

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
8. En la ventana de inspección, vaya a "Propiedades > Propiedades > Misceláneo > Nombre"
y asigne el nombre "GRAPH_Sequence".
9. Abra la imagen "Alarm".
10.Mediante la función de arrastrar y soltar, mueva un visor de avisos de la Task Card
"Herramientas" a la imagen.
11.En la ventana de inspección, vaya a "Propiedades > Propiedades > Misceláneo > Nombre"
y asigne el nombre "ProDiag_Alarm".

Resultado
Ha mostrado los objetos para la supervisión y el diagnóstico en las correspondientes
imágenes.
● Objetos para la visualización del estado actual del programa en la imagen "Overview".
● Visor de código PLC para la visualización del código de programa en los lenguajes KOP,
FUP y GRAPH en la imagen "Program code".
● Visor de avisos para la visualización de los avisos ProDiag en la imagen "Alarm".

12.3.5.5

Configuración de objetos de diagnóstico

Introducción
En este ejemplo se vinculan los objetos para la visualización del código de programa y las
supervisiones con el programa de control. Previamente se ha creado en STEP 7 un programa
para el proceso de transporte de las piezas de producción en la cinta transportadora. Además,
se ha generado un bloque de función ProDiag en el que se han creado las supervisiones de los
operandos.

Requisitos
● Se ha creado la imagen "Overview".
● En la imagen se ha creado una vista general de GRAPH y una vista general de ProDiag.
● Se ha creado un bloque de función ProDiag en el programa de control.
● Se ha creado un bloque de datos de instancia GRAPH "Conv_Seq_DB" en el programa de
control.
● El bloque de datos de instancia GRAPH "Conv_Seq_DB" contiene la variable "OFF_SQ",
que es visible y accesible desde HMI.

Procedimiento
1. Seleccione la vista general de GRAPH.
2. En la ventana de inspección, haga clic en el botón de selección en "Propiedades > General
> Proceso > Variable".
Se abre un cuadro de diálogo.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1947

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
3. Haga clic en el bloque de datos de instancia GRAPH "Conv_Seq_DB" de la carpeta
"Bloques de programa".
4. Seleccione la variable PLC "OFF_SQ" del bloque de datos de instancia GRAPH y confirme
la selección.
Nota
La variable de proceso que se utiliza para la vista general de GRAPH debe ser visible y
accesible desde el panel HMI.
Para hacer que las variables del bloque de datos GRAPH sean visibles y accesibles para
HMI, abra el bloque de función GRAPH, seleccione el bloque en el área de trabajo y elija
"Editar > Parámetros internos visibles/accesibles desde HMI" en la barra de menús. A
continuación, compile los bloques de programa.

El bloque de datos de instancia GRAPH y el objeto "Vista general de GRAPH" están
vinculados.
5. Seleccione la vista general de ProDiag "Overview_Conveyor"
6. En la ventana de inspección, haga clic en el botón de selección en "Propiedades > General
> Proceso > Variable".
Se abre un cuadro de diálogo.

1948

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
7. Haga clic en el bloque de datos "Coveyor_DB" de la carpeta "Bloques de programa".
8. Seleccione la variable de estado "State" del bloque de datos "Conveyor_DB".

El bloque de datos ProDiag y el objeto "Vista general de ProDiag" están vinculados.

Resultado
La vista general de GRAPH y la vista general de ProDiag están vinculadas con los bloques de
datos del programa de control. Los objetos indican en runtime los errores de supervisión que
se produzcan y el estado actual de la cadena secuencial GRAPH.

12.3.5.6

Configuración del visor de avisos para ProDiag

Introducción
En este ejemplo se configura el visor de avisos para la representación de los avisos de
supervisión y el salto al visor de código PLC con el código de programa.

Requisitos
● Se ha creado la imagen "Alarm".
● Se ha creado el visor de avisos "ProDiag_Alarm".
● Se ha creado el visor de código PLC "PLC code view" en la imagen "Program code".

Procedimiento
1. Abra la imagen "Alarm" y seleccione el visor de avisos.
2. En la ventana de inspección, haga clic en "Propiedades > General".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1949

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
3. Active las categorías de avisos que se visualizarán en el visor de avisos, p. ej., las
categorías propias del sistema "Acknowledgement"" y "No Acknowledgement".
También tiene la posibilidad de mostrar avisos de las categorías que ha definido
previamente en STEP 7.

4. En "Propiedades > Visualización > Variable de control para visor de código PLC", defina
una variable booleana que controle el salto del último aviso ProDiag activo al visor de
código PLC.
Esta variable sirve para evaluar si es posible el salto del aviso seleccionado al visor de
código PLC.

5. Mediante la función de arrastrar y soltar, mueva un botón de la Task Card "Herramientas"
a la imagen "Alarm".
En la ventana de inspección, vaya a "Propiedades > Propiedades > Misceláneo > Nombre"
y asigne el nombre "Program code".
6. En la ventana de inspección, haga clic en "Eventos > Hacer clic".
7. Seleccione la función de sistema "ActivarVisorCódigoPLC" en "Agregar función".

1950

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
8. Indique como parámetros el nombre de la imagen "Program code" y el nombre del objeto
"PLC code view".
9. Seleccione la variable de control booleana para visor de código PLC definida previamente
en "Propiedades > Animaciones > Visibilidad > Variable".

Si es posible el salto del aviso ProDiag emitido al visor de código PLC, se muestra el botón
"Program code".

Resultado
Ha activado la visualización de avisos de las categorías definidas en el visor de avisos. Los
avisos de las categorías correspondientes se muestran en runtime en el visor de avisos.
El botón configurado permite saltar en runtime al visor de código PLC con el punto del
programa que ha disparado el aviso ProDiag.

12.3.5.7

Configuración de salto desde la vista general de GRAPH

Introducción
En este paso se configura la navegación sencilla entre la vista general de GRAPH, el visor de
avisos y el visor de código PLC.

Configuración de salto desde la vista general de GRAPH
1. Seleccione la vista general de GRAPH "GRAPH_Sequence".
2. En la ventana de inspección, haga clic en "Eventos > Hacer clic en el botón Visor de avisos".
3. Seleccione la función de sistema "ActivarImagen" en "Agregar función".
4. Introduzca el nombre de la imagen "Alarm" que contiene el visor de avisos.
5. En la ventana de inspección, haga clic en "Eventos > Hacer clic en el botón Visor de código
PLC".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1951

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
6. Seleccione la función de sistema "ActivarVisorCódigoPLC" en "Agregar función".
7. Introduzca el nombre de la imagen "Program code" y del visor de código PLC "PLC code
view".

Ha vinculado la vista general de GRAPH con el visor de código PLC. Haciendo clic en el botón
"Visor de código PLC", se muestra en runtime la imagen con la visualización de la cadena
secuencial GRAPH.

1952

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Resultado
En runtime se vigila el estado actual de la cadena secuencial con ayuda de la vista general de
GRAPH. Tiene la posibilidad de visualizar en todo momento la cadena secuencial GRAPH en
el visor de código PLC.

En caso de fallo, los botones configurados permiten saltar al aviso correspondiente del visor de
avisos o directamente al visor de código PLC con la representación de la cadena secuencial.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1953

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

12.3.5.8

Configuración de salto desde la vista general de ProDiag

Introducción
En este paso se configura la navegación sencilla entre la vista general de ProDiag, el visor de
avisos y el visor de código PLC.

Configuración de salto desde la vista general de ProDiag
1. Seleccione la vista general de ProDiag "Overview_Conveyor"
2. En la ventana de inspección, haga clic en "Eventos > Hacer clic en el botón Visor de avisos".
3. Seleccione la función de sistema "ActivarImagen" en "Agregar función".
4. Introduzca el nombre de la imagen "Alarm" que contiene el visor de avisos.

Resultado
Ha vinculado los objetos de diagnóstico entre sí.
En runtime se vigila el estado de las supervisiones ProDiag con ayuda de la vista general de
ProDiag. En caso de fallo, se resalta visualmente el símbolo de la supervisión correspondiente.

1954

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
Haciendo clic en el botón "Visor de avisos", se muestra la imagen con el visor de avisos y los
avisos presentes actualmente. El botón configurado permite saltar, p. ej., de un aviso ProDiag
a la visualización del segmento en el visor de código PLC.

12.3.6

Adquisición de primeros valores y análisis de criterios

12.3.6.1

Sinopsis de la adquisición de primeros valores y del análisis de criterios

Introducción
El TIA Portal ofrece la posibilidad de seguir la ejecución del programa de usuario desde un
dispositivo HMI. Al hacerlo, los datos y valores del panel de operador se comparan y
sincronizan continuamente con el PLC. Esto le permite ver el estado actual del programa con
los valores actuales de los estados lógicos en el panel de operador.
Si se produce un fallo en la instalación, puede saltar del correspondiente aviso de error al
código de programa y ver el lugar del error en el segmento en el objeto "Visor de código PLC".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1955

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
En el objeto "Visor de análisis de criterios" verá los operandos erróneos de un aviso GRAPH
o ProDiag seleccionado de un vistazo.
Las funciones de adquisición de primeros valores y análisis de criterios le permiten registrar los
valores en el momento del fallo y detectar rápidamente los operandos erróneos en el programa.
Las funciones de adquisición de primeros valores y análisis de criterios están disponibles para
bloques de función GRAPH, bloques de función ProDiag y programas de seguridad (bloques
F).

Requisitos
● La adquisición de primeros valores se puede activar en el TIA Portal para los bloques
siguientes:
– A partir de la versión V14 SP1 para los bloques de función GRAPH de la versión 4.0 o
superior.
– A partir de la versión V15 para los bloques de función ProDiag de la versión 2.0 o
superior.
● Se pueden registrar 32 estados como máximo. Los primeros valores de un segmento que
contenga más de 32 elementos no se registrarán.

Adquisición de primeros valores
La adquisición de primeros valores permite adquirir los valores en el controlador en el
momento del error, verlos en el visor de código PLC en el panel de operador y compararlos con
los valores actuales. En la adquisición de primeros valores se registran de forma continua los
estados lógicos de operandos booleanos y los resultados de comparadores en transiciones e
Interlocks.
Los estados lógicos se registran siguiendo un orden definido de arriba a la izquierda abajo a
la derecha:
1

7DJB

9DOXHB

3

7DJB

7DJB

7DJB
127

,QW

7DJB

9DOXHB
,QW

,QWHUORFN
127

F

7DJB
127

2

La adquisición de primeros valores se activa individualmente para cada bloque GRAPH en el
programa de usuario. Se pueden registrar como máximo 32 estados lógicos de operandos
booleanos por Interlock o transición de una etapa GRAPH. Cada uno de los estados lógicos
ocupa un bit. Los valores se guardan en un DWORD.

1956

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
En el siguiente ejemplo puede ver el principio y el orden en el que se registran los primeros
valores en un Interlock:
7DJB

9DOXHB

%LW

,QW


%LW

7DJB

7DJB

7DJB
127

%LW

%LW

,QWHUORFN
127

F

%LW

7DJB

7DJB

%LW

9DOXHB
,QW


%LW

%LW

7DJB

7DJB

%LW

%LW

7DJB
127

%LW

7DJB

%LW

Análisis de criterios
La adquisición de primeros valores en el PLC permite analizar criterios y operandos erróneos
en el programa. Puede ver la evaluación del análisis de criterios en el visor de código PLC del
panel de operador. Adicionalmente, en el objeto "Visor de análisis de criterios" puede mostrar
los operandos erróneos de un aviso GRAPH o ProDiag seleccionado con análisis de criterios.
Para los bloques para los que se ha activado la adquisición de primeros valores, en el visor de
código PLC se muestra de forma predeterminada la vista de primeros valores tras el salto.
Asimismo, en la vista de primeros valores se resaltan visualmente los operandos erróneos y
los criterios.
Los nombres, las direcciones absolutas y los comentarios de los operandos erróneos se
muestran en la tabla de símbolos. Puede alternar la vista de los valores actuales y la de los
primeros valores.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1957

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
En caso de fallo en un comparador, los dos operandos se marcan como erróneos. En la vista
de primeros valores se representan solo los valores registrados. Para ver los valores actuales
de las variables, cambie a la vista de valores actuales.
Nota
Importancia del orden de evaluación en la programación
Puesto que los operandos aparecen en la tabla de símbolos siguiendo la regla de la
adquisición de primeros valores, en el análisis de criterios en caso de error se emite primero
el operando situado en la parte superior izquierda de la tabla de símbolos. Tenga en cuenta
este orden de evaluación al programar el segmento para que los operandos más importantes
se muestren en primer lugar en el visor de código PLC.
Encontrará más información sobre el orden de la lista en Ejemplo de orden del análisis de
criterios (Página 1960)

Consulte también
Ejemplo de orden del análisis de criterios (Página 1960)

12.3.6.2

Instrucciones permitidas

Introducción
Los primeros valores y los resultados del análisis de criterios se pueden ver en el objeto "Visor
de código PLC".
En las supervisiones globales se registran los primeros valores de todos los operandos
booleanos del segmento. Si en el segmento existen varias barras colectoras que no están
conectadas entre sí, se registran solo los primeros valores de la barra colectora
correspondiente.
En las supervisiones locales se registran solo los primeros valores especificados en la llamada
de bloque como condiciones para el parámetro supervisado.

Instrucciones permitidas
Para la adquisición de primeros valores pueden utilizarse las instrucciones siguientes en KOP
y FUP:
Instrucciones

Visualización en el panel de operador (HMI)

Operaciones lógicas con bits
Contacto normalmente abierto

Primeros valores y análisis de criterios

Contacto normalmente cerrado
Invertir RLO
Asignación

La instrucción está permitida, pero no es relevante para los pri‐
meros valores o el análisis de criterios.

Negar asignación

1958

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag
Instrucciones

Visualización en el panel de operador (HMI)

Desactivar salida

Primeros valores

Activar salida
Flipflop de activación/desactiva‐
ción

Primeros valores y análisis de criterios hasta el cuadro de la ins‐
trucción inclusive

Flipflop de desactivación/activa‐
ción
Comparadores
Igual

Primeros valores y análisis de criterios

Diferente
Mayor o igual
Menor o igual
Mayor
Menor
Temporizadores
TP

Primeros valores y análisis de criterios hasta el cuadro de la ins‐
trucción inclusive

TON

Primeros valores y análisis de criterios

TOF

Primeros valores y análisis de criterios hasta el cuadro de la ins‐
trucción inclusive

TONR
Contadores
CTU
CTD

Primeros valores y análisis de criterios hasta el cuadro de la ins‐
trucción inclusive

CTUD

En las operaciones lógicas con bits se registra el estado del operando y en los comparadores,
el resultado de la comparación.
En los flipflops se registran ambas entradas (R y S) si estas están interconectadas.
En los temporizadores y contadores se registra el estado del operando en la salida y,
adicionalmente, las entradas, si estas están interconectadas (por ejemplo, en CTUD: CU, CD,
R, LD)
Para la adquisición de primeros valores y análisis de criterios también se pueden utilizar las
instrucciones FUP Y y O . La adquisición de primeros valores y el análisis de criterios no
admiten la instrucción FUP O EXCLUSIVA.

Consulte también
Tipos de datos soportados (Página 1937)
Tipos de datos soportados (Página 1924)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1959

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

12.3.6.3

Ejemplo de orden del análisis de criterios

Introducción
La evaluación del análisis de criterios en el visor de código PLC se ejecuta siguiendo un orden
fijo. En este ejemplo se muestra cómo funcionan la adquisición de primeros valores y el análisis
de criterios en un panel de operador.

Adquisición de primeros valores
Se desea registrar el estado lógico de un enclavamiento en modo manual y automático en el
programa de usuario y se han configurado los siguientes operandos:
Nombre del
símbolo

Comentario

Significado

Tag_1

Auto mode

Modo automático

Tag_2

Interlock_1

Primer enclavamiento

Tag_3

Motor On

Conectar motor

Tag_4

Interlock_2

Segundo enclavamiento

Tag_5

Hand mode

Modo manual

Tag_6

Hand switch

Pulsador

Los estados lógicos de los operandos se registran y se escriben en el DWORD en el siguiente
orden:





ಯ7DJBಯ

ಯ7DJBಯ

ಯ7DJBಯ

ಯ7DJBಯ

ಯ7DJBಯ

ಯ7DJBಯ

,QWHUORFN
F



':25'

%LW %LW




%LW

%LW

%LW

%LW

%LW

%LW

%LW

%LW

%LW

%LW









7DJB

7DJB

7DJB

7DJB

7DJB

7DJB

Análisis de criterios en caso de error
Si se produce un error en el Interlock, use el botón configurado para saltar del aviso de error
al visor de código PLC y ver el lugar del error en el programa. Al haber activado ya la
adquisición de primeros valores, en el visor de código PLC se muestra automáticamente la
vista de primeros valores con el análisis de criterios.
Los operandos causantes del error se marcan en color. En la tabla de símbolos del visor de
código PLC solo se muestran los nombres, las direcciones absolutas y los comentarios de los
operandos erróneos según el orden de adquisición de primeros valores.

1960

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Es posible conmutar al modo manual y activar el análisis de criterios. De este modo, puede
verse el segmento que dispara el error en la vista detallada, incluso si la situación de error se
ha subsanado mientras tanto.

Programación optimizada del Interlock
Para detectar de un primer vistazo que la barrera fotoeléctrica es el causante del error, en este
ejemplo conviene programar el operando Tag_4 en primer lugar. De esta forma, la información
sobre la barrera fotoeléctrica abierta se representa en la primera fila de la tabla de símbolos.
El siguiente ejemplo muestra la programación para la vista óptima en el objeto "Visor de código
PLC":

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1961

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

12.3.6.4

Configuración del visor de análisis de criterios

Utilización
El objeto "Visor de análisis de criterios" muestra los operandos erróneos del programa de
usuario que han lanzado un aviso ProDiag o un aviso GRAPH seleccionado. Para establecer
la conexión con los avisos correspondientes, configure variables de control en ambos objetos.
Si selecciona en runtime el aviso ProDiag o GRAPH aparecido en el visor de avisos, en el visor
de análisis de criterios verá los operandos que se determinaron en el análisis de criterios.
Puede ver los avisos y los operandos en runtime a simple vista configurando el visor de análisis
de criterios y el visor de avisos conectado a él en la misma imagen.
Tiene la posibilidad de conectar varios visores de avisos con un visor de análisis de criterios y
viceversa. En KTP Mobile Panels, Comfort Panels y RT Advanced puede configurar el visor de
análisis de criterios en una imagen emergente o en una imagen deslizable. De este modo
podrá, p. ej., conectar varios visores de avisos configurados en diferentes imágenes con un
visor de análisis de criterios y visualizar este en una imagen deslizable cuando lo necesite.

Nota
El objeto "Visor de análisis de criterios" no está disponible en la imagen general.

1962

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Requisitos
● El panel de operador está conectado con el controlador
● El controlador contiene un programa ProDiag de la versión 2.0 o superior, o bien un
programa GRAPH de la versión 4.0 o superior
● La adquisición de primeros valores está activada en los bloques de función
● Se ha configurado un visor de avisos

Procedimiento
1. Arrastre el visor de análisis de criterios de la ventana de herramientas utilizando la función
de arrastrar y soltar.
2. Haga clic en la ventana de inspección "Propiedades > Propiedades > General".
3. Pulse el botón de selección bajo la propiedad "Variable".
4. Seleccione la variable de estado del visor de avisos correspondiente en "Proceso >
Variable".
5. Haga clic en el visor de avisos.
6. Haga clic en la ventana de inspección "Propiedades > Propiedades > Visualización".
7. Seleccione la variable de estado del visor de análisis de criterios en "Variable de control
para análisis de criterios".
Nota
Tipo de datos y longitud de la variable de estado
La variable de estado debe ser del tipo de datos WString y tener una longitud de 50.

Resultado
El visor de análisis de criterios se ha configurado en la imagen y se ha conectado con el visor
de avisos. En runtime se puede ver, para un aviso seleccionado, información detallada sobre
los operandos que han causado este aviso.

12.3.6.5

Configuración del visor de análisis de criterios

Utilización
El objeto "Visor de análisis de criterios" muestra los operandos erróneos del programa de
usuario que han lanzado un aviso ProDiag o un aviso GRAPH seleccionado. Para establecer
la conexión con los avisos correspondientes, configure variables de control en ambos objetos.
Si selecciona en runtime el aviso ProDiag o GRAPH aparecido en el visor de avisos, en el visor
de análisis de criterios verá los operandos que se determinaron mediante el análisis de
criterios.
El visor de análisis de criterios y el visor de avisos conectado a él se configuran en la misma
imagen.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1963

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Requisitos
● El panel de operador está conectado con el controlador
● El controlador contiene un programa ProDiag de la versión 2.0 o superior, o bien un
programa GRAPH de la versión 4.0 o superior
● La adquisición de primeros valores está activada en los bloques de función
● Se ha configurado un visor de avisos

Procedimiento
1. Arrastre el visor de análisis de criterios de la ventana de herramientas utilizando la función
de arrastrar y soltar.
2. Haga clic en la ventana de inspección "Propiedades > Propiedades > General".
3. Pulse el botón de selección en la propiedad "Origen de datos".
4. Seleccione el visor de avisos configurado.

Resultado
El visor de análisis de criterios se ha configurado en la imagen y se ha conectado con el visor
de avisos. En runtime se puede ver, para un aviso seleccionado, información detallada sobre
los operandos que han causado este aviso.

12.3.6.6

Salida de avisos con criterios

Introducción
Con la adquisición de primeros valores activada se registran los valores del operando erróneo
en el momento del fallo y se analizan y determinan los criterios que faltan.
Tiene la posibilidad de ampliar los avisos GRAPH y ProDiag con información adicional sobre
los operandos erróneos y visualizarlos en el panel de operador. Si aparece un fallo en runtime
durante la ejecución del programa, el aviso de error mostrará también el primer operando
erróneo en el segmento que falla. Encontrará información detallada sobre todos los operandos
erróneos del aviso de error en el objeto "Visor de análisis de criterios".

1964

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

3/&

:LQ&&+0,

9LVRUGHDYLVRV
9HQWDQDGHDYLVRV
9LVRUGHDQ£OLVLVGHFULWHULRV

La información siguiente se puede agregar a un aviso:
● Nombre del símbolo: el nombre simbólico del primer operando que ha causado el aviso de
error seleccionado
● Dirección absoluta: la dirección del primer operando erróneo
● Valor del operando: el valor del primer operando erróneo en el momento del fallo
● Comentario: comentario multilingüe configurado en el programa de usuario
La información adicional se muestra en el aviso después del texto de aviso, con cada elemento
separado mediante puntos y comas y espacios.
Como alternativa, puede definir que la información adicional se muestre en el texto informativo.
En WinCC Runtime Professional existe la posibilidad de ampliar también los textos de aviso
adicionales de los avisos de supervisión. Para ello, seleccione el texto de aviso adicional
correspondiente en "Configuración de runtime > Avisos > Análisis de criterios > Completar
texto".
Nota
El orden de los elementos de información adicional que se agregan al aviso está
predeterminado y no se puede cambiar.
Nota
Para mostrar los avisos del controlador íntegramente en el dispositivo HMI, la opción
"Actualización automática" debe estar activada en "Configuración de runtime > Avisos >
Avisos del controlador" para la conexión correspondiente. Encontrará más información sobre
los avisos completos en "Envío de aviso completo del controlador al panel de operador
(Página 983)".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1965

Uso de funciones de diagnóstico
12.3 Supervisión de máquinas e instalaciones con ProDiag

Análisis de criterios en el sistema de avisos
Los avisos del análisis de criterios se visualizan siguiendo los pasos siguientes:
● Active la adquisición de primeros valores en las propiedades del bloque de función ProDiag
o GRAPH del programa de usuario.
● Active las opciones para ampliar los textos de aviso en la configuración de runtime del
dispositivo HMI.
● Configure un visor de avisos y un visor de análisis de criterios y conecte ambos objetos
entre sí.

Ampliación de avisos
1. Abra el editor "Configuración de runtime" del dispositivo HMI.
2. Haga clic en "Configuración de runtime > Avisos > Análisis de criterios".
3. Elija los avisos que quiera ampliar en "Análisis de criterios > Completar texto".
4. Active la información adicional que se agregará al texto del aviso, como p. ej., el nombre del
símbolo y la dirección del primer operando erróneo.

Resultado
En caso de error, en el visor de avisos no solo verá el texto del aviso, sino también los
operandos que hayan causado el aviso de error. Seleccionando el aviso correspondiente, en
el visor de análisis de criterios verá los operandos erróneos que se determinaron mediante el
análisis de criterios.

1966

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Comunicación con controladores
13.1

13

WinCC Engineering V16: Comunicación

Comunicación con controladores
Encontrará una descripción detallada de la comunicación con controladores en el manual
"WinCC Advanced V16: Comunicación".

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1967

Comunicación con controladores
13.1 WinCC Engineering V16: Comunicación

1968

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Utilizar funciones generales
14.1

Trabajar con el asistente de paneles de operador

14.1.1

Conceptos básicos del asistente de paneles de operador

14

Introducción
Cuando se crea un nuevo panel de operador en el proyecto, se inicia automáticamente el
asistente de paneles de operador.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1969

Utilizar funciones generales
14.1 Trabajar con el asistente de paneles de operador

Asistente de paneles de operador
El asistente de paneles de operador guía al usuario paso a paso por los diversos cuadros de
diálogo y le ayuda a crear un dispositivo. Además, permite definir opciones de configuración
básicas para el panel de operador, como puede ser la representación de la imagen o la
conexión con el PLC.

Nota
Si crea un panel con pantalla a color mediante el asistente de paneles de operador, es posible
que los gráficos de los botones de navegación se muestren en blanco y negro. Sin embargo,
este error solo se da si el nuevo panel se ha creado con el mismo nombre que el de un panel
de pantalla monocromática que entretanto se ha borrado.
Este error puede evitarse borrando también los gráficos correspondientes de la colección de
gráficos cada vez que se borre un panel del proyecto.

1970

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Utilizar funciones generales
14.1 Trabajar con el asistente de paneles de operador
Nota
Textos en varios idiomas en el asistente del panel de operador
Si crea la navegación por imágenes en varios idiomas con el asistente del panel de operador,
WinCC utilizará el idioma de la interfaz para los nombres definidos por el usuario en todos los
idiomas del proyecto.
Si uno de los idiomas del proyecto no soporta el juego de caracteres del idioma de la interfaz,
los nombres no se mostrarán en este idioma del proyecto, p. ej., si el idioma de interfaz es el
chino y el idioma del proyecto es el inglés.
Nota
Tipo de interfaz de la conexión
Si es posible, el asistente del panel de operador establece la conexión entre el panel de
operador y el controlador mediante el tipo de interfaz estándar del panel.
Tras la configuración con el asistente del panel de operador, compruebe la conexión en el
editor "Dispositivos y redes".

Consulte también
Conceptos básicos del asistente de paneles de operador (Página 1972)
Información general sobre referencias cruzadas (Página 2042)
Conceptos lingüísticos en WinCC (Página 2052)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1971

Utilizar funciones generales
14.1 Trabajar con el asistente de paneles de operador

14.1.2

Conceptos básicos del asistente de paneles de operador

Introducción
El asistente de paneles de operador guía al usuario paso a paso por los diversos cuadros de
diálogo y le ayuda a crear un dispositivo. Además, permite definir opciones de configuración
básicas para el panel de operador, como puede ser la representación de la imagen o la
conexión con el PLC.

1972

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Utilizar funciones generales
14.1 Trabajar con el asistente de paneles de operador

Abrir asistente de paneles de operador
1. Introduzca un nuevo panel en el proyecto, p. ej., RT Advanced.
2. Haga clic en el panel de operador dentro del árbol del proyecto.
3. En el menú contextual, elija el comando "Iniciar asistente de paneles de operador". Se abre
dicho asistente.
Nota
Si se efectúa algún cambio después de introducir el dispositivo, p. ej. añadir una imagen,
el asistente de paneles de operador ya No puede abrirse.
Nota
Si se crea un panel con una pantalla a color con el asistente de paneles de operador, es
posible que los gráficos de los botones de navegación se muestren en blanco y negro. Sin
embargo, este error solo ocurre si el nuevo panel se ha creado con el nombre que tenía un
panel de pantalla monocromática que se ha borrado entre tanto.
Este error puede evitarse si, cada vez que se borre un panel del proyecto, se borran
también los correspondientes gráficos de la colección de gráficos.
Nota
Dependencia con el panel - Uso de comillas en los nombres del proyecto
Los proyectos de WinCC Professional cuyos nombres contienen comillas no se compilan.
Cuando cree un panel de operador para WinCC RT Professional, no utilice comillas en el
nombre del proyecto.
Nota
Textos en varios idiomas en el asistente del panel de operador
Si crea la navegación por imágenes en varios idiomas con el asistente del panel de
operador, WinCC utilizará el idioma de la interfaz para los nombres definidos por el usuario
en todos los idiomas del proyecto.
Si uno de los idiomas del proyecto no soporta el juego de caracteres del idioma de la
interfaz, los nombres no se mostrarán en este idioma del proyecto, p. ej., si el idioma de
interfaz es el chino y el idioma del proyecto es el inglés.

Consulte también
Conceptos básicos del asistente de paneles de operador (Página 1969)
Cargar archivos mediante el editor "Archivos HMI" (Página 2150)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1973

Utilizar funciones generales
14.2 Trabajar con librerías

14.2

Trabajar con librerías

14.2.1

Principios básicos de las librerías

Introducción
En las librerías se depositan de forma centralizada los objetos que se necesitan con
frecuencia. Un objeto depositado en la librería sólo tiene que configurarse una vez.
Posteriormente puede utilizarse las veces que se quiera. Los objetos de la librería amplían el
número de objetos de imagen disponibles y aumentan la efectividad de la configuración
gracias a la utilización múltiple de objetos acabados.
Junto con WinCC se suministran librerías completas, p. ej., de "Motores" o "Válvulas". No
obstante, también es posible definir objetos de librerías propios.
Las librerías se administran en la Task Card "Librerías" o en la vista de librería. Tiene a su
disposición las siguientes librerías:
● Librería del proyecto
● Librerías globales

Nota
En la Task Card "Herramientas" de la paleta "Gráficos" hay una librería de símbolos.

1974

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Utilizar funciones generales
14.2 Trabajar con librerías

Librería del proyecto
Cada proyecto contiene exactamente una librería. Los objetos de la librería del proyecto se
guardan junto con los datos del mismo, estando sólo disponibles en el proyecto en el que se
ha creado la librería. Si el proyecto se transfiere a otro PC, también se transfiere la librería
correspondiente.
Para poder aprovechar un objeto de la librería del proyecto en otros proyectos, desplace o
copie el objeto a una librería global.

Librerías globales
Las librerías globales se guardan de forma independiente de los datos del proyecto en un
archivo propio con la extensión ".alxx"; "xx" corresponde al número de la versión actual de
WinCC.
Un proyecto puede acceder a varias librerías globales. Varios proyectos pueden utilizar
simultáneamente una misma librería global.
Si un objeto de la librería se modifica en un proyecto, la librería se modificará también en los
demás proyectos que hayan abierto esta librería.

Objetos de librerías
Una librería puede contener todos los objetos de WinCC. Ejemplos:
● Panel de operador completo
● Imágenes
● Objetos de manejo y visualización, incluidas las variables y funciones
● Gráficos
● Variables
● Avisos
● Listas de textos y gráficos
● Faceplates
● Tipos de datos de usuario
● Estilo y hojas de estilo

Consulte también
Principios básicos de las imágenes (Página 35)
Mostrar objetos de librería (Página 1993)
Depositar un objeto en una librería (Página 1996)
Insertar un objeto de librería (Página 1997)
Crear librería global (Página 1984)
Guardar librería global (Página 1985)

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1975

Utilizar funciones generales
14.2 Trabajar con librerías
Abrir librería global (Página 1986)
Plantillas maestras y tipos (Página 1978)

14.2.2

Sinopsis de la vista de librerías

Función de la vista de librería
La vista de librería unifica las funciones de la Task Card "Librerías" y las de la ventana general.
En la vista de librería se visualizan los elementos de una librería en diferentes vistas y, además,
propiedades adicionales de los distintos elementos en la vista detallada. Aparte de esto, en la
vista de librería se editan y versionan los tipos.

1976

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Utilizar funciones generales
14.2 Trabajar con librerías

Estructura de la vista de librería
La figura siguiente muestra los componentes de la vista de librería:








1

Árbol de librerías

2

Vista general de librerías

3

Botón "Vista de librería"

4

Botón "Abrir o cerrar vista general de librerías"

Árbol de librerías
Salvo pequeñas diferencias, el árbol de librerías es igual que la Task Card "Librerías". Al
contrario que en la Task Card, no hay una paleta "Elementos", ya que los elementos se
muestran en la vista general de librerías. Además, en el árbol de librerías se puede cerrar la
vista de librería o abrir y cerrar la vista general de librerías.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1977

Utilizar funciones generales
14.2 Trabajar con librerías

Vista general de librerías
La vista general de librerías se corresponde con la ventana general y muestra los elementos
del objeto seleccionado en el árbol de librerías. Los elementos pueden visualizarse en tres
vistas diferentes. Además, en la vista general de librerías pueden realizarse, p. ej., las
siguientes acciones:
● Copiar elementos
● Desplazar elementos
● Versionar tipos
● Editar faceplates y tipos de datos de usuario HMI
● Editar instancias de tipos

14.2.3

Plantillas maestras y tipos

Introducción
Tanto la "Librería de proyecto" como la "Librería global" tienen las carpetas "Plantillas
maestras" y "Tipos". Los objetos de librería se pueden crear o utilizar como plantilla maestra
o como tipo.

Plantillas maestras
Para crear copias de los objetos de librería independientes las unas de las otras, utilice las
plantillas maestras.

Tipos
Desde los objetos de la carpeta "Tipos" se crean instancias y se utilizan en su proyecto. Las
instancias están unidas a su tipo respectivo.

Administrar los objetos de librería
Los objetos de librería se copian y desplazan a otra librería. Las plantillas maestras sólo se
copian a la carpeta "Plantillas maestras" o a cualquier otra subcarpeta de "Plantillas maestras".
Los tipos sólo se pueden insertar igualmente en la carpeta "Tipos" o en cualquier otra
subcarpeta de "Tipos".

Consulte también
Principios básicos de las librerías (Página 1974)
Estado de las versiones de tipo (Página 1998)

1978

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Utilizar funciones generales
14.2 Trabajar con librerías

14.2.4

Librerías en WinCC

Introducción
WinCC se suministra con un gran número de librerías. Clasificados por temas en carpetas, se
pueden encontrar objetos gráficos prediseñados, que pueden utilizarse en las imágenes para
el manejo y la observación de la instalación.

Librería global "Buttons and Switches"
Las librerías "Buttons and Switches" ofrecen una amplia selección de interruptores y
botones.

Las carpetas clasifican los interruptores o botones en categorías. La carpeta
"DiagnosticsButtons" contiene, por ejemplo, el objeto "Indicador del diagnóstico de sistema".
El objeto "Indicador del diagnóstico de sistema" se utiliza para realizar diagnósticos de sistema
en la instalación.
Nota
Los objetos de la carpeta "DiagnosticsButtons" sólo pueden utilizarse en Comfort Panels.
Los objetos con la denominación "Switch" en el nombre del objeto o en el nombre de carpeta
correspondiente no pueden utilizarse en runtime Professional.

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

1979

Utilizar funciones generales
14.2 Trabajar con librerías

Librería global "Monitoring and Control objects"
La librería "Monitoring and Control objects" ofrece objetos de control y visualización más o
menos complejos en diversos diseños, así como lámparas de control, botones e interruptores
correspondientes.

Además, en la carpeta "Design_Backgrounds" hay visores de gráficos adecuados a los
diseños, que pueden utilizarse como fondos de objeto para la ampliación específica de cliente
del volumen de la librería.
Nota
Los objetos con la denominación "Switch" en el nombre del objeto no pueden utilizarse en
Runtime Professional. Lo mismo rige para el objeto "D5_Display_3" con el campo de fecha y
hora contenido en el mismo.

1980

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantalla

Utilizar funciones generales
14.2 Trabajar con librerías

14.2.5

Administrar librerías

14.2.5.1

Sinopsis de la administración de librerías

Función de la administración de librerías
Las plantillas maestras y los tipos con dependencias de otros elementos de librerías están
sujetos a algunas restricciones de funciones. Por ejemplo, no es posible borrarlos mientras
existan dependencias. De este modo se impide que se inutilicen otros elementos de la librería.
La administración de librerías permite identificar dependencias y proporciona una visión global
del progreso del trabajo.
La administración de librerías ofrece las siguientes funciones:
● Visualización de las relaciones de los tipos y las plantillas maestras
Si un tipo se referencia a otros tipos o a plantillas maestras, las relaciones se muestran en
la administración de librerías. Asimismo se muestran los elementos de librerías a los que
hace referencia un tipo o una plantilla maestra.
● Indicación de las ubicaciones de tipos en el proyecto
● Filtrado de todos los tipos que se encuentran en el estado "en test" o "en proceso"

Estructura de la administración de librerías
La imagen muestra una administración de librerías que consta de los siguientes componentes:
● Barra de herramientas de la administración de librerías
● Área "Tipos"
● Área "Utilización"

Visualización de procesos
Manual de sistema, 11/2019, Impresión de la Ayuda en pantall