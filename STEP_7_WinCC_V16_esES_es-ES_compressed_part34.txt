ked zone

1

Work zone

2

Signal zone

Reference coordinate system for the workspace zone
0

WCS

1

OCS1

2

OCS2

3

OCS3

TO_Struct_Kinematics_StatusFra‐
me

x

LREAL

-1.79769E308 t RON
o 1.79769E308

x coordinate

y

LREAL

-1.79769E308 t RON
o 1.79769E308

y coordinate

z

LREAL

-1.79769E308 t RON
o 1.79769E308

z coordinate

a

LREAL

-180.0 to 179.9 RON
99

A coordinate

b

LREAL

-90.0 to 90.0

B coordinate

c

LREAL

-180.0 to 179.9 RON
99

C coordinate

Geometry.
Type

Parameter[1..3]

2278

BOOL

Values

TO_Struct_Kinematics_StatusKine‐
maticsZone
DINT

ARRAY
[1..3] OF
LREAL

0 to 2

0.0 to 1.0E12

RON

RON

Zone geometry
0

Cuboid

1

Sphere

2

Cylinder

1

Length x (cuboid) or radius (sphere, cylinder)

2

Length y (cuboid) or height (cylinder)

3

Length z (cuboid)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Tags: Zone monitoring (Página 2187)

"StatusKinematicsZone[2..10]" tag (kinematics)
The tag structure "<TO>.StatusKinematicsZone[2..10].<Tag name>" contains the status of the
kinematics zones.

Tags
Legend (Página 2258)
Tag

Data type

Values

W

StatusKinematicsZo‐
ne[2..10].

ARRAY [2..10] OF TO_Struct_Kine‐
matics_StatusKinematicsZone

Description

Active

BOOL

-

RON

FALSE
TRUE

Kinematics zone activated

Valid

BOOL

-

RON

FALSE

Zone is not present

TRUE

Zone is present

ReferenceSystem

DINT

0 to 1

RON

Reference coordinate system for the kinematics zone

Frame.

Kinematics zone deactivated

0

FCS

1

TCS

TO_Struct_Kinematics_StatusFra‐
me

x

LREAL

-1.79769E308 t RON
o 1.79769E308

x coordinate

y

LREAL

-1.79769E308 t RON
o 1.79769E308

y coordinate

z

LREAL

-1.79769E308 t RON
o 1.79769E308

z coordinate

a

LREAL

-180.0 to 179.9 RON
99

A coordinate

b

LREAL

-90.0 to 90.0

RON

B coordinate

c

LREAL

-180.0 to 179.9 RON
99

C coordinate

Geometry.
Type

Parameter[1..3]

TO_Struct_Kinematics_StatusZo‐
neGeometry
DINT

ARRAY
[1..3] OF
LREAL

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

0 to 2

0.0 to 1.0E12

RON

RON

Zone geometry
0

Cuboid

1

Sphere

2

Cylinder

1

Length x (cuboid) or radius (sphere, cylinder)

2

Length y (cuboid) or height (cylinder)

3

Length z (cuboid)

2279

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Tags: Zone monitoring (Página 2187)

"StatusZoneMonitoring" tag (kinematics)
The tag structure "<TO>.StatusZoneMonitoring.<Tag name>" contains the status of the
violated zones.

Tags
Legend (Página 2258)
Tag

Data type

StatusZoneMonitoring.

TO_Struct_Kinematics_StatusZo‐
neMonitoring

WorkingZones

DWORD

Values

-

W

RON

Description

Display of violated work zones
The bit numbers 1 to 10 correspond to the configured zone
numbers.

BlockedZones

DWORD

-

RON

Display of violated blocked zones
The bit numbers 1 to 10 correspond to the configured zone
numbers.

SignalizingZones

DWORD

-

RON

Display of approached signal zones
The bit numbers 1 to 10 correspond to the configured zone
numbers.

KinematicsZones

DWORD

-

RON

Display of kinematics zones that violate workspace zones
The bit number 1 indicates the monitoring status of the tool
center point (TCP). The bit numbers 2 to 10 correspond to
the configured zone numbers.

Consulte también
Tags: Zone monitoring (Página 2187)

"StatusMotionQueue" tag (kinematics)
The tag structure "<TO>.StatusMotionQueue.<Tag name>" contains the status of the job
sequence.

Tags
Legend (Página 2258)
Tag

Data type

StatusMotionQueue.

TO_Struct_Kinematics_StatusMo‐
tionQueue

NumberOfCommands

2280

DINT

Values

-

W

RON

Description

Number of queued jobs in the job sequence

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Tags: Kinematics motions (Página 2175)

"KinematicsAxis" tag (kinematics)
The tag structure "<TO>.KinematicsAxis.<Tag name>" contains the defined kinematics axes.

Tags
Legend (Página 2258)
Tag

Data type

Values

W

KinematicsAxis.

TO_Struct_Kinematics_Kinematic‐
sAxis

Description

A1

DB_ANY

-

RON

Technology object data block of the kinematics axis A1

A2

DB_ANY

-

RON

Technology object data block of the kinematics axis A2

A3

DB_ANY

-

RON

Technology object data block of the kinematics axis A3

A4

DB_ANY

-

RON

Technology object data block of the kinematics axis A4

"Units" tag (kinematics)
The tag structure "<TO>.Units.<Tag name>" contains the configured technological units.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2281

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2258)
Tag

Data type

Units.

TO_Struct_Kinematics_Units

LengthUnit

LengthVelocityUnit

AngleUnit

AngleVelocityUnit

1)

UDINT

UDINT

UDINT

UDINT

Values
-

-

-

-

W

Description

RON

Unit for the position

RON

RON

RON

1010

m

1013

mm

1536

mm1)

1011

km

1014

µm

1015

nm

1019

in

1018

ft

1021

mi

1537

°1)

Unit for the velocity
1062

mm/s

1538

°/s1)

1061

m/s

1524

mm/min

1525

m/min

1526

mm/h

1063

m/h

1527

km/min

1064

km/h

1066

in/s

1069

in/min

1067

ft/s

1070

ft/min

1075

mi/h

Unit for the position of the orientation axis
1004

rad

1005

°

1537

°1)

Unit for the velocity of the orientation axis
1521

°/s

1522

°/min

1539

°/s1)

1086

rad/s

1523

rad/min

Position values with higher resolution or six decimal places

2282

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Units of measure (Página 2062)

"StatusWord" tag (kinematics)
The tag "<TO>.StatusWord" contains the status information of the technology object.
Information on the evaluation of the individual bits (e.g. bit 2 "RestartActive") can be found in the
"Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/S7-1500T
Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459)
documentation.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2283

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2258)
Tag

Data type

Values

W

Description

StatusWord

DWORD

-

RON

Status information of the technology object

2284

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag

Data type

Values

W

Description

Bit 0

-

-

-

Reserved

Bit 1

-

-

-

"Error"

Bit 2

Bit 3

Bit 4

-

-

-

-

-

-

-

-

-

0

No error is present.

1

An error is present.

"RestartActive"
0

No "Restart" is active.

1

A "Restart" is active. The technology object is
being reinitialized.

"OnlineStartValuesChanged"
0

"Restart" tags unchanged

1

Change to "Restart" tags For the changes to be
applied, the technology object must be reinitiali‐
zed.

"ControlPanelActive"
0

The kinematics control panel is deactivated.

1

The kinematics control panel is activated.

Bit 5

-

-

-

Reserved

Bit 6

-

-

-

"Done"
0

A motion job is in progress or the kinematics
control panel is activated.

1

No motion job is in progress and the kinematics
control panel is deactivated.

Bit 7

-

-

-

Reserved

Bit 8

-

-

-

"LinearCommand"

Bit 9

-

-

-

0

No linear motion is active.

1

A linear motion is active.

"CircularCommand"
0

No circular motion is active.

1

A circular motion is active.

Bit 10

-

-

-

Reserved

Bit 11

-

-

-

"DirectCommand"

Bit 12

Bit 13

Bit 14

-

-

-

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

-

-

-

-

-

-

0

No synchronous point-to-point motion is active.

1

A synchronous point-to-point motion is active.

"ConstantVelocity"
0

The path motion of the kinematics is accelerated
or decelerated.

1

The setpoint velocity is reached. The path mo‐
tion of the kinematics is moving at this constant
velocity or is at a standstill.

"Accelerating"
0

No acceleration operation of a path motion is
active.

1

An acceleration operation of a path motion is
active.

"Decelerating"

2285

Control de movimiento
6.1 Using S7-1500 Motion Control
Tag

Data type

Bit 15

-

Bit 16

-

Bit 17

-

Bit 18

-

Bit 19 …

-

Values

-

-

-

-

-

W

-

-

-

-

-

Description
0

No deceleration operation of a path motion is
active.

1

A deceleration operation of a path motion is ac‐
tive.

"OrientationMotion"
0

No orientation motion is active.

1

An orientation motion is active.

"Stopping"
0

No "MC_GroupStop" job is active.

1

An "MC_GroupStop" job is running. The motion
of the kinematics technology object is aborted

"Interrupted"
0

The motion of the kinematics technology object
is not interrupted.

1

The motion of the kinematics technology object
is interrupted with an "MC_GroupInterrupt" job.
The motion can be continued with a "MC_Group‐
Continue" command.

"Blending"
0

No blending segment is active.

1

A blending segment is active.

Reserved

Bit 31

Consulte también
Tags: Kinematics motions (Página 2175)
Function Manual "S7-1500T Motion Control V4.0 in the TIA Portal V15" section "Evaluating
StatusWord, WarningWord and ErrorWord" (https://support.industry.siemens.com/cs/ww/en/
view/109749263)

"ErrorWord" tag (kinematics)
The tag "<TO>.ErrorWord" shows errors at the technology object (technology alarms).
Information on the evaluation of the individual bits (e.g. bit 3 "CommandNotAccepted") can be
found in the "Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/
S7-1500T Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/
109766459) documentation.

2286

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2258)
Tag

Data type

ErrorWord

Values

W

Description

DWORD

-

RON

Bit 0

-

-

-

"SystemFault"

Bit 1

-

-

-

"ConfigFault"

A system-internal error has occurred.
Configuration error
One or more configuration parameters are inconsistent or
invalid.
Bit 2

-

-

-

"UserFault"
Error in user program at a Motion Control instruction or its
use

Bit 3

-

-

-

"CommandNotAccepted"
Command cannot be executed.
A Motion Control instruction cannot be executed because
the necessary requirements are not met.

Bit 4

-

-

-

"TransformationFault"
Error in the kinematics transformation

Bit 5

-

-

-

Reserved

Bit 6

-

-

-

"DynamicError"
Specified dynamic values are limited to permissible values.

Bit 7 …

-

-

-

Reserved

Bit 31

Consulte también
Function Manual "S7-1500T Motion Control V4.0 in the TIA Portal V15" section "Evaluating
StatusWord, WarningWord and ErrorWord" (https://support.industry.siemens.com/cs/ww/en/
view/109749263)

"ErrorDetail" tag (kinematics)
The tag structure "<TO>.ErrorDetail.<Tag name>" contains the alarm number and effective
local alarm reaction to the technology alarm currently pending at the technology object.
You can find a list of the technology alarms and alarm reactions in the "Technology alarms
(Página 2291)" appendix.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2287

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2258)
Tag

Data type

Values

W

ErrorDetail.

TO_Struct_Kinematics_ErrorDetail

Number

UDINT

-

RON

Reaction

DINT

0, 11, 12

RON

Description
Alarm number
Effective alarm reaction
0

No reaction (warnings only)

11

Stop with maximum dynamic values of the kine‐
matics

12

Stop with maximum dynamic values of the axes

"WarningWord" tag (kinematics)
The tag "<TO>.WarningWord" shows pending warnings at the technology object.
Information on the evaluation of the individual bits (e.g. bit 2 "UserFault") can be found in the
"Evaluating StatusWord, ErrorWord and WarningWord" section of the "S7-1500/S7-1500T
Motion Control overview" (https://support.industry.siemens.com/cs/ww/en/view/109766459)
documentation.

Tags
Legend (Página 2258)
Tag

Data type

Values

W

WarningWord

DWORD

-

RON

-

-

-

Bit 0

Description
"SystemFault"
A system-internal error has occurred.

Bit 1

-

-

-

"ConfigFault"
Configuration error
One or more configuration parameters are being internally
adapted temporarily.

Bit 2

-

-

-

"UserFault"
Error in user program at a Motion Control instruction or its
use

Bit 3

-

-

-

"CommandNotAccepted"
Job cannot be executed
A Motion Control instruction cannot be executed because
the necessary requirements are not met.

Bit 4

-

-

-

Reserved

Bit 5

-

-

-

Reserved

Bit 6

-

-

-

"DynamicWarning"

Bit 7 …

-

-

-

Specified dynamic values are limited to permissible values.
Reserved

Bit 31

2288

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Consulte también
Function Manual "S7-1500T Motion Control V4.0 in the TIA Portal V15" section "Evaluating
StatusWord, WarningWord and ErrorWord" (https://support.industry.siemens.com/cs/ww/en/
view/109749263)

"ControlPanel" tag (kinematics)
The tag structure "<TO>.ControlPanel.<Tag name>" contains no data relevant to the user. This
tag structure is internally used.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2289

Control de movimiento
6.1 Using S7-1500 Motion Control

Tags
Legend (Página 2258)
Tag

Data type

ControlPanel.

TO_Struct_Kinematics_ControlPa‐
nel

Input.

W

Description

TO_Struct_Kinematics_ControlPa‐
nelInput

TimeOut

LREAL

100 to 60000

DIR

-

EsLifeSign

UDINT

-

DIR

-

Command[1..2].

ARRAY [1..2] OF TO_Struct_Kine‐
matics_ControlPanelInput

ReqCounter

UDINT

-

DIR

-

Type

UDINT

-

DIR

-

Position[1..4]

ARRAY
[1..4] OF
LREAL

-

DIR

-

Velocity[1..2]

ARRAY
[1..2] OF
LREAL

-

DIR

-

Acceleration[1..2]

ARRAY
[1..2] OF
LREAL

-

DIR

-

Deceleration[1..2]

ARRAY
[1..2] OF
LREAL

-

DIR

-

Jerk[1..2]

ARRAY
[1..2] OF
LREAL

-

DIR

-

Param[1..9]

ARRAY
[1..9] OF
LREAL

-

DIR

-

CoordinateSystem UDINT

-

DIR

-

ToolNumber

-

DIR

-

Output.

2290

Values

UDINT

TO_Struct_Kinematics_ControlPa‐
nelOutput

RtLifeSign

UDINT

-

RON

Command[1..2].

ARRAY [1..2] OF TO_Struct_Kine‐
matics_ControlPanelOutputCmd

-

AckCounter

UDINT

-

RON

-

Error

BOOL

-

RON

-

ErrorID

WORD

-

RON

-

Done

BOOL

-

RON

-

Aborted

BOOL

-

RON

-

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Technology alarms
Overview
The following table shows an overview of the technology alarms and the corresponding alarm
reactions. When a technology alarm occurs, evaluate the entire indicated alarm text, in order
to find the precise cause.

Legend
No.

Number of the technology alarm
(corresponds to <TO>.ErrorDetail.Number)

Reaction

Effective alarm reaction
(corresponds to <TO>.ErrorDetail.Reaction)

Error bit

Bit that is set in <TO>.ErrorWord when the technology alarm occurs

Warning bit

Bit that is set in <TO>.WarningWord when the technology alarm occurs

Restart

To acknowledge the technology alarm, the technology object must be reinitialized (Res‐
tart).

Diagnostic buffer

The alarm is entered in the diagnostics buffer.

Alarm text

Displayed alarm test (limited)

A description of the bits can be found in the appendix (Página 2286).
A description of the bits can be found in the appendix (Página 2288).

List of the technology alarms
No.

Reaction

Error bit Warning bit

Restart

Diagnos‐
tic buffer

Alarm text

101 Stop with maximum
dynamic values of the
axes

X1

-

X

X

Configuration error.

201 Stop with maximum
dynamic values of the
axes

X0

-

X

X

Internal error.

202 Stop with maximum
dynamic values of the
axes

X0

-

X

-

Internal configuration error.

203 Stop with maximum
dynamic values of the
axes

X0

-

X

-

Internal error.

204 Stop with maximum
dynamic values of the
axes

X0

-

-

-

Commissioning error.

304 Stop with maximum
dynamic values of the
axes

X2

-

-

-

Velocity limit is zero.

305 Stop with maximum
dynamic values of the
axes

X2

-

-

-

● Limit value of the acceleration is zero.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

● Limit value of the deceleration is zero.

2291

Control de movimiento
6.1 Using S7-1500 Motion Control
No.

Reaction

Error bit Warning bit

Restart

Diagnos‐
tic buffer

Alarm text

X2

-

-

-

Jerk limit is zero.

501 No reaction (war‐
nings only)

-

X6

-

-

Programmed velocity is limited.

502 No reaction (war‐
nings only)

-

X6

-

-

● Programmed acceleration is being limited.

503 No reaction (war‐
nings only)

-

X6

-

-

Programmed jerk is limited.

561 No reaction (war‐
nings only)

-

X6

-

-

Programmed velocity of the orientation motion
is limited.

562 No reaction (war‐
nings only)

-

X6

-

-

● Programmed acceleration of the orientation
motion is limited.

306 Stop with maximum
dynamic values of the
axes

● Programmed deceleration is being limited.

● Programmed deceleration of the orientation
motion is limited.
563 No reaction (war‐
nings only)

-

X6

-

-

Programmed jerk of the orientation motion is
limited.

801 Stop with maximum
dynamic values of the
axes

X2

-

-

-

Kinematics axis not ready.

802 Stop with maximum
dynamic values of the
axes

X3

-

-

-

Cannot calculate the geometry element.

803 Stop with maximum
dynamic values of the
axes

X4

-

-

-

Error in the calculation of the transformation.

804 Stop with maximum
dynamic values of the
axes

X2

-

-

-

The kinematics motion cannot be stopped at
the end.

805 Stop with maximum
dynamic values of the
axes

X2

-

-

-

Limitation of the path dynamics by the dyna‐
mics of the kinematics axes.

806 Stop with maximum
dynamic values of the
kinematics

X2

-

-

-

Collision with work or blocked zones occurred.

-

X2

-

-

Collision with work or blocked zones occurred.

808 Stop with maximum
dynamic values of the
axes

X2

-

-

-

Ambiguity due to multiple active work zones.

809 Stop with maximum
dynamic values of the
axes

X2

-

-

-

Path dynamic limit through dynamic of the
orientation motion faulty.

807 No reaction (war‐
nings only)

2292

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
No.

Reaction

Error bit Warning bit

Restart

Diagnos‐
tic buffer

Alarm text

810 Stop with maximum
dynamic values of the
axes

X2

-

-

-

The conveyor belt is not assigned or faulty.

811 Stop with maximum
dynamic values of the
axes

X2

-

-

-

Error when approaching the TCP to a object
coordinate system.

Alarm reaction
A technology alarm always contains an alarm reaction, which describes the effect on the
technology object. The alarm reaction is specified by the system.
The following table shows possible alarm reactions:
Alarm reaction

Description

No reaction (warnings only)

The processing of the Motion Control jobs will be continued. The active motion of
the kinematics can be influenced, e.g. by limiting the current dynamic values to the
configured limit values.

<TO>.ErrorDetail.Reaction = 0
Stop with maximum dynamic values of
the kinematics
<TO>.ErrorDetail.Reaction = 11
Stop with maximum dynamic values of
the axes
<TO>.ErrorDetail.Reaction = 12

Active and queued motion jobs are canceled. The kinematics is decelerated with
the maximum dynamic values configured under "Technology object > Configura‐
tion > Extended parameters > Dynamics" and brought to a standstill. The configu‐
red maximum jerk is hereby taken into account.
Active and queued motion jobs are canceled. The axes are decelerated with the
maximum dynamic values configured under "Technology object > Configuration >
Extended parameters > Limits > Dynamic limits", and brought to a standstill. The
configured maximum jerk is hereby taken into account.

Technology alarms 101
Technology alarm 101
Alarm reaction: Stop with maximum dynamic values of the axes
Restart: Required
Alarm text

Remedy

Configuration error.
Value in <tag> not allowed.

Adjust the specified value.

Interconnection of axis <no.> missing.

Interconnect the axis.

Interconnection of orientation axis missing.
Delta 2D picker: No formation of a closed parallel structure.

Adjust the geometry data of the mechanics.

Delta 3D picker: No formation of a closed parallel structure.
Delta 3D picker: Angular offset does not permit a third arm.
Roll picker: Radius incorrect.
Invalid arm distances.
Limits for specifying orientations violated.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Adjust the corresponding value.

2293

Control de movimiento
6.1 Using S7-1500 Motion Control

Technology alarms 201 - 204
Technology alarm 201
Alarm reaction: Stop with maximum dynamic values of the axes
Restart: Required
Alarm text

Remedy

Internal error.

Contact customer service.

Technology alarm 202
Alarm reaction: Stop with maximum dynamic values of the axes
Restart: Required
Alarm text

Remedy

Internal configuration error.

Contact customer service.

Technology alarm 203
Alarm reaction: Stop with maximum dynamic values of the axes
Restart: Required
Alarm text

Remedy

Internal algorithm error.

Contact customer service.

Technology alarm 204
Alarm reaction: Stop with maximum dynamic values of the axes
Restart: Required
Alarm text

Remedy

Commissioning error.
Connection to the TIA Portal interrupted.

Check the connection properties.

Technology alarms 304 - 306
Technology alarm 304
Alarm reaction: Stop with maximum dynamic values of the axes

2294

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Remedy

Velocity limit is zero.

Enter a value for the velocity (DynamicLimits.Path.Velo‐
city) that does not equal zero in the limits for dynamics.

Technology alarm 305
Alarm reaction: Stop with maximum dynamic values of the axes
Restart: Not required
Alarm text

Remedy

Acceleration/deceleration limit is zero.
Acceleration

Enter a value for the acceleration (DynamicLi‐
mits.Path.Acceleration) that does not equal zero in the
limits for dynamics.

Deceleration

Enter a value for the deceleration (DynamicLi‐
mits.Path.Deceleration) that does not equal zero in the
limits for dynamics.

Technology alarm 306
Alarm reaction: Stop with maximum dynamic values of the axes
Restart: Not required
Alarm text

Remedy

Jerk limit is zero.

Enter a value for the JERK (DynamicLimits.Path.Jerk)
that does not equal zero in the limits for dynamics.

Technology alarms 501 - 563
Technology alarm 501
Alarm reaction: No reaction (warnings only)
Restart: Not required
Alarm text

Remedy

Programmed velocity is limited.

● Check the value for the velocity of the Motion Control
instruction.
● Check the configuration of the dynamic limits.

Technology alarm 502
Alarm reaction: No reaction (warnings only)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2295

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Remedy

Programmed acceleration/deceleration is limited.
Acceleration

● Check the value for the acceleration of the Motion
Control instruction.
● Check the configuration of the dynamic limits.

Deceleration

● Check the value for the deceleration of the Motion
Control instruction.
● Check the configuration of the dynamic limits.

Technology alarm 503
Alarm reaction: No reaction (warnings only)
Restart: Not required
Alarm text

Remedy

Programmed jerk is limited.

● Check the value for the jerk of the Motion Control
instruction.
● Check the configuration of the dynamic limits.

Technology alarm 561
Alarm reaction: No reaction (warnings only)
Restart: Not required
Alarm text

Remedy

Programmed velocity of the orientation motion is limited.

● Check the configuration of the velocity of the
orientation motion.

Technology alarm 562
Alarm reaction: No reaction (warnings only)
Restart: Not required
Alarm text

Remedy

Programmed acceleration/deceleration of the orientation motion
is limited.
Acceleration

● Check the configuration of the acceleration of the
orientation motion.

Deceleration

● Check the configuration of the deceleration of the
orientation motion.

2296

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Technology alarm 563
Alarm reaction: No reaction (warnings only)
Restart: Not required
Alarm text

Remedy

Programmed jerk of the orientation motion is limited.

● Check the configuration of the jerk of the orientation
motion.

Technology alarms 801 - 811
Technology alarm 801
Alarm reaction: Stop with maximum dynamic values of the axes
Restart: Not required
Alarm text

Remedy

Kinematics axis <no.> not ready.
Axis not enabled.

Enable the technology object.

Axis command programmed.

To transmit another kinematics command, put the speci‐
fied axis in a standstill.

Axis alarm.

Check and acknowledge the technology alarms of the
specified kinematics axis.

Technology alarm 802
Alarm reaction: Stop with maximum dynamic values of the axes
Restart: Not required
Alarm text

Remedy

Cannot calculate the geometry element.
Radius for "CircMode" = 2 less than half the path distance.

Adjust the radius.

Starting point, intermediate point and/or end point are identical
when "CircMode" = 0.

Specify different values for starting point, intermediate
point and end point.

Intermediate point cannot be reached when "CircMode" = 0.

Adjust the intermediate point.

Starting point and end point are identical when "CircMode" = 2
as well as "PathChoice" = 2 or 3 is specified.

Define different start and end points.

Unable to execute dynamic adaptation.

Switch off the dynamic adaptation.

Motion is not in the transformation area.

Define the motions within the transformation area.

The selected transformation only works with sPTP motions.

Select a "MC_MoveDirectAbsolute" instruction or
"MC_MoveDirectRelative" instruction for the transforma‐
tion.

Technology alarm 803
Alarm reaction: Stop with maximum dynamic values of the axes

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2297

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Remedy

Error calculating the transformation.
Transformation of the axis coordinates to the kinematics coor‐ ● Correct your specified motion with regard to the joint
dinates resulted in an error.
positioning space and the transformation areas:
With user-defined kinematics systems:
● Position the kinematics axes with single-axis motions
"FunctionResult" of the MC-Transformation [OB98]

in a permitted transformation area.

Transformation of the kinematics coordinates to the axis coor‐ ● For user transformation:
dinates resulted in an error.
Check the calculation in the MC-Transformation
[OB98].
With predefined kinematics systems:
Additional info:
0 Cartesian position cannot be reached
1 Singular position
With user-defined kinematics systems:
"FunctionResult" of the MC-Transformation [OB98]

Technology alarm 804
Alarm reaction: Stop with maximum dynamic values of the axes
Restart: Not required
Alarm text

Remedy

Kinematics motion cannot be stopped at end.

Ensure that the path is sufficiently long.

Technology alarm 805
Alarm reaction: Stop with maximum dynamic values of the axes
Restart: Not required
Alarm text

Remedy

Limitation of the path dynamics by the axis dynamics faulty.
Path velocity is limited to zero.

Configure a larger path velocity for the kinematics axis.

Path acceleration or deceleration is limited to zero.

Configure a larger path acceleration or deceleration for
the kinematics axis.

Technology alarm 806
Alarm reaction: Stop with maximum dynamic values of the kinematics
Restart: Not required
Alarm text

Remedy

Collision with work or blocked zones occurred.

Move the kinematics object from the work zone or blocked
zone.

2298

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control

Technology alarm 807
Alarm reaction: No reaction (warnings only)
Restart: Not required
Alarm text

Remedy

Collision with work or blocked zones occurred.

-

Technology alarm 808
Alarm reaction: Stop with maximum dynamic values of the axes
Restart: Not required
Alarm text

Remedy

Ambiguity due to multiple active work zones.
<Number of the currently active zone>

Activate only one work zone.

Technology alarm 809
Alarm reaction: Stop with maximum dynamic values of the axes
Restart: Not required
Alarm text

Remedy

Path dynamic limit through dynamic of the orientation motion
faulty.
Velocity is limited to zero.

Configure a higher maximum velocity for the axes invol‐
ved in the orientation motion.

Acceleration/deceleration is limited to zero.

Configure a higher maximum acceleration or deceleration
for the axes involved in the orientation motion.

Technology alarm 810
Alarm reaction: Stop with maximum dynamic values of the axes
Restart: Not required
Alarm text

Remedy

The conveyor belt is not assigned or faulty.

● Check the parameters of the
"MC_TrackConveyorBelt" job.
● Check the configuration of the leading-value-capable
technology object which represents the conveyor belt.

Technology alarm 811
Alarm reaction: Stop with maximum dynamic values of the axes

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2299

Control de movimiento
6.1 Using S7-1500 Motion Control
Restart: Not required
Alarm text

Remedy

Error when approaching the TCP to a object coordinate system.

Check the parameters of the "MC_MoveLinearAbsolute"
or "MC_MoveCircularAbsolute" job.

Error ID (kinematics)
Errors in Motion Control instructions are signaled using the "Error" and "ErrorID" parameters.
Under the following conditions, "Error" = TRUE and "ErrorID" = 16#8xxx are indicated for the
Motion Control instruction:
● Invalid status of the technology object that prevents execution of the job.
● Invalid parameter assignment of the Motion Control instruction that prevents execution of
the job.
● As a result of the alarm reaction to a technology object error.
The following tables show a list of all "ErrorIDs" that can be indicated for Motion Control
instructions. Besides the cause of the error, remedies for eliminating the error are also listed:

16#0000 - 16#800F
ErrorID

Description

Remedy

16#0000

No error

-

16#8001

A technology alarm (technology object error)
occurred while processing the Motion Control
instruction.

In the technology data block, an error message is output at the
"ErrorDetail.Number" tag.

Illegal specification of the technology object

Check the specification of the technology object for the "Axis" or
"AxesGroup" parameter.

16#8002

You can find a list of the technology alarms and alarm reactions
in the Technology alarms (Página 2293) appendix.

You can use a kinematics technology object only for the "Axes‐
Group" parameter.
16#8003

Illegal velocity specification

Specify a permissible value for the velocity for the "Velocity"
parameter.

16#8004

Illegal acceleration specification

Specify a permissible value for the acceleration for the "Acce‐
leration" parameter.

16#8005

Illegal deceleration specification

Specify a permissible value for the deceleration for the "Dece‐
leration" parameter.

16#8006

Illegal jerk specification

Specify a permissible value for the jerk for the "Jerk" parameter.

16#8007

Illegal direction specification

Specify a permissible value for the motion direction for the "Di‐
rectionA" parameter.

16#8008

Illegal specification of the relative target coor‐ Specify permissible values for the relative target coordinate for
dinate
the "Distance" parameter.

16#8009

Illegal specification of the absolute target
coordinate

Specify a permissible value for the absolute target coordinate in
the "Position" parameter.

16#800A

Illegal mode specification

Specify a permissible value for the mode for the "Mode" para‐
meter.

2300

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.1 Using S7-1500 Motion Control
ErrorID

Description

Remedy

16#800D

The job is not permitted in the current state.
Restart is being executed.

While a restart is being performed, the technology object cannot
perform any jobs.
During a restart of the kinematics technology object, all inter‐
connected axes are reinitialized first. Then the kinematics tech‐
nology object is reinitialized. This may take up to one second.
Wait until the technology object restart is complete.

16#800F

The job cannot be executed because the
technology object is disabled.

Enable the technology object with "MC_Power.Enable" =
TRUE. Restart the job.

16#8010 - 16#807F
ErrorID

Description

Remedy

16#8012

The job cannot be executed because the ki‐
nematics control panel is active.

Return the master control to your user program. Restart the job.

16#8014

No internal job memory available.

The maximum possible number of Motion Control jobs has
been reached.
Reduce the number of jobs to be executed (parameter "Execu‐
te" = FALSE).

16#8015

Error acknowledgment with "MC_Reset" is
not possible. Error in the configuration of the
technology object.

Check the configuration of the technology object.

16#80A0 - 16#8FFF
ErrorID

Description

16#80B1

Illegal specification of the coordinate system Specify a permissible value for the coordinate system for the
"CoordSystem" parameter.

16#80B2

Illegal specification of the motion transition

16#80B3

Illegal specification of the rounding clearance Specify a permissible value for the rounding clearance for the
"TransitionParameter" parameter.

16#80B5

Illegal specification of the dynamic adaptation Specify a permissible value for the dynamic adaptation for the
"DynamicAdaption" parameter.

16#80B6

Illegal specification for the definition of the
circular path

16#80B7

Illegal specification for the circular path auxi‐ Specify a permissible value for the circular path auxiliary point
liary point
for the "AuxPoint" parameter.

16#80B8

Illegal specification of the target position

Specify a permissible value for the target position for the "End‐
Point" parameter.

16#80B9

Illegal specification of the orientation of the
circular path

Specify a permissible value for the orientation of the circular
path for the "PathChoice" parameter.

16#80BA

Illegal specification for the main plane of the
circular path

Specify a permissible value for the main plane of the circular
path for the "CirclePlane" parameter.

16#80BB

Illegal radius specification

Specify a permissible value for the radius of the circular path for
the "Radius" parameter.

16#80BC

Illegal angle specification

Specify a permissible value for the angle of the circular path for
the "Arc" parameter.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Remedy

Specify a permissible value for the motion transition for the
"BufferMode" parameter.

Specify a permissible value for the definition of the circular path
for the "CircMode" parameter.

2301

Control de movimiento
6.1 Using S7-1500 Motion Control
ErrorID

Description

Remedy

16#80C1

Illegal specification of the zone type

Specify a permissible value for the zone type for the "ZoneTy‐
pe" parameter.

16#80C2

Illegal specification of the zone position

Specify a permissible value for the zone number for the "Zone‐
Number" parameter.

16#80C3

Illegal specification of the reference system

Specify a permissible value for the reference system for the
"ReferenceSystem" parameter.

16#80C4

Illegal coordinate specification

Specify permissible values for the coordinates for the "Frame"
parameter.

16#80C5

Illegal specification of the zone geometry

Specify a permissible value for the zone geometry for the "Geo‐
metryType" parameter.

16#80C6

Illegal specification of the geometric parame‐ Specify permissible values for the geometric parameters for the
ters
"GeometryParameter" parameter.

16#80C7

The zone is not defined.

16#80C8

A tool cannot be redefined during a motion.

End the active motion. Restart the "MC_DefineTool" job.

An active tool cannot be changed during a
motion.

End the active motion. Restart the "MC_SetTool" job.

16#80CA

Illegal specification of the tool number

Specify a permissible value for the tool number for the "Tool‐
Number" parameter.

16#80CB

Illegal specification of the object coordinate
system

Specify a permissible value for the object coordinate system for
the "OcsNumber" parameter.

16#80CC

The job cannot be executed because a sin‐ End the current single-axis motion. Restart the job.
gle-axis motion is active at a kinematics axis.

16#80CD

The job cannot be executed because an
"MC_GroupStop" job is active.

Set the "MC_GroupStop.Execute" parameter to FALSE. Res‐
tart the job.

16#80CE

The job sequence is used to capacity.

The maximum possible Motion Control jobs have been trans‐
mitted.

16#80D1

Invalid value for the use of the parameter
"Position"

Enter a permissible value for use of the parameter "Position" in
the "PositionMode" parameter.

16#80D2

Illegal value for the target arm positioning
space

Enter a permissible value for the target arm positioning space in
the "LinkConstellation" parameter.

16#80D3

Illegal value for the positions of the kinema‐
tics axes

Enter a permissible value for the positions of the kinematics
axes at the parameter "AxesPosition".

16#80D4

Illegal value for the velocity of the kinematics
axes

Specify a permissible value for the velocity of the kinematics
axes for the "AxesVelocity" parameter.

16#80D5

Illegal value for the acceleration of the kine‐
matics axes

Specify a permissible value for the acceleration of the kinema‐
tics axes for the "AxesAcceleration" parameter.

16#8FFF

Unspecified error

Contact your local Siemens representative or support center.

Define a workspace zone using the "MC_DefineWorkspace‐
Zone" job or a kinematics zone using the "MC_DefineKinema‐
ticsZone" job.

You will find your contact information for digital industries at:
https://www.siemens.com/automation/partner (https://
www.siemens.com/automation/partner)

2302

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

6.2

Utilizar S7-1200 Motion Control

6.2.1

Introducción

6.2.1.1

Funcionalidad Motion de la CPU S7-1200
El TIA Portal asiste al usuario, junto con la funcionalidad Motion Control de la CPU S7‑1200 en
el control de motores paso a paso y servomotores:
● En el TIA Portal se configuran los objetos tecnológicos Eje de posicionamiento y Tabla de
órdenes. Con ayuda de estos objetos tecnológicos, la CPU S7-1200 controla las salidas
para el mando de los accionamientos.
● El programa de usuario le permite controlar el eje con las instrucciones Motion Control e
iniciar con ello las órdenes de movimiento del accionamiento.

Consulte también
Componentes de hardware para Motion Control (Página 2304)
Integración del objeto tecnológico Eje de posicionamiento (Página 2349)
Herramientas del objeto tecnológico Eje de posicionamiento (Página 2352)
Utilización del objeto tecnológico Tabla de órdenes (Página 2419)
Herramientas del objeto tecnológico Tabla de peticiones (Página 2420)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2303

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

6.2.1.2

Componentes de hardware para Motion Control
La siguiente representación muestra la configuración básica del hardware para una aplicación
Motion Control con la CPU S7-1200.

6,0$7,&6

,
,
,
,
,
,
,
,

,
,
,
,
,
,

6LJQDO%RDUG

5816723
(5525
0$,17

',

&38&
'&'&'&













'

;31/$1

372

352),1(7

$4

+6&

$FFLRQDPLHQWRV\HQFµGHUV

CPU S7-1200
La CPU S7-1200 combina la funcionalidad de un autómata programable con la funcionalidad
Motion Control para utilizar accionamientos. La funcionalidad Motion Control asume el control
y la vigilancia de los accionamientos.

Signal Board
Las Signal Boards permiten ampliar la CPU con entradas y salidas adicionales.
En caso necesario, puede utilizar las salidas digitales como salidas del generador de impulsos
para controlar accionamientos. En las CPU con salidas de relé, la señal de impulso no se
puede emitir a través de salidas integradas, ya que los relés no soportan las frecuencias de
conmutación necesarias. Para poder utilizar el PTO (Pulse Train Output) en esas CPU, es
necesario utilizar una Signal Board con salidas digitales.
En caso necesario, puede utilizar las salidas analógicas para el control de los accionamientos
conectados de forma analógica.

2304

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

PROFINET
La interfaz PROFINET permite establecer una conexión online entre la CPU S7-1200 y la
programadora. Además de las funciones online de la CPU, se dispone de funciones
adicionales de puesta en servicio y diagnóstico para Motion Control.
Además, PROFINET admite el perfil PROFIdrive para la conexión de accionamientos y
encóders aptos para PROFIdrive.

Accionamientos y encóders
Los accionamientos hacen que el eje se mueva. Los encóders devuelven la posición real para
la regulación de posición del eje.
La tabla siguiente muestra las posibilidades de conexión de accionamientos y encóders:
Conexión del accionamiento

Eje controlado/regulado

Conexión de encóder

PTO (Pulse Train Output)

Con control de posición

-

Con regulación de posición

● Encóder conectado a contador
rápido (HSC)

(motores paso a paso y servomotores
con interfaz de impulsos)
Salida analógica (AQ)

● Encóder conectado a módulo
tecnológico (TM)
● Encóder conectado a PROFINET
PROFINET

Con regulación de posición

● Encóder conectado a accionamiento
● Encóder conectado a contador
rápido (HSC)
● Encóder conectado a módulo
tecnológico (TM)
● Encóder conectado a PROFINET

Información para pedidos del firmware V4.4 de la CPU
Los datos listados a continuación son válidos para la fase de suministro actualmente instalada
(sin Hardware Support Packages eventualmente instalados) del TIA Portal.
Puede instalar nuevos componentes de hardware con un Hardware Support Package (HSP).
El componente de hardware queda disponible a continuación en el catálogo de hardware.
Designación

Referencia

CPU 1211C DC/DC/DC

6ES7211-1AE40-0XB0

CPU 1211C AC/DC/RLY

6ES7211-1BE40-0XB0

CPU 1211C DC/DC/RLY

6ES7211-1HE40-0XB0

CPU 1212C DC/DC/DC

6ES7212-1AE40-0XB0

CPU 1212C AC/DC/RLY

6ES7212-1BE40-0XB0

CPU 1212C DC/DC/RLY

6ES7212-1HE40-0XB0

CPU 1214C DC/DC/DC

6ES7214-1AG40-0XB0

CPU 1214C AC/DC/RLY

6ES7214-1BG40-0XB0

CPU 1214C DC/DC/RLY

6ES7214-1HG40-0XB0

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2305

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Designación

Referencia

CPU 1214FC DC/DC/DC

6ES7214-1AF40-0XB0

CPU 1214FC DC/DC/RLY

6ES7214-1HF40-0XB0

CPU 1215C DC/DC/DC

6ES7215-1AG40-0XB0

CPU 1215C AC/DC/RLY

6ES7215-1BG40-0XB0

CPU 1215C DC/DC/RLY

6ES7215-1HG40-0XB0

CPU 1215FC DC/DC/DC

6ES7215-1AF40-0XB0

CPU 1215FC DC/DC/RLY

6ES7215-1HF40-0XB0

CPU 1217C DC/DC/DC

6ES7217-1AG40-0XB0

Signal Board DI4 x DC 24 V (200 kHz)

6ES7221-3BD30-0XB0

Signal Board DI4 x DC 5 V (200 kHz)

6ES7 221-3AD30-0XB0

Signal Board DQ4 x DC 24 V (200 kHz)

6ES7222-1BD30-0XB0

Signal Board DQ4 x DC 5 V (200 kHz)

6ES7222-1AD30-0XB0

Signal Board DI2/DQ2 x DC 24 V (20 kHz)

6ES7223-0BD30-0XB0

Signal Board DI2/DQ2 x DC 24 V (200 kHz)

6ES7223-3BD30-0XB0

Signal Board DI2/DQ2 x DC 5 V (200 kHz)

6ES7223-3AD30-0XB0

Signal Board AQ1 x 12 bits (±10 V, 0 a 20 mA) 6ES7 232-4HA30-0XB0

Consulte también
Funcionalidad Motion de la CPU S7-1200 (Página 2303)
Salidas de la CPU relevantes para Motion Control (Página 2306)

6.2.2

Bases para trabajar con S7-1200 Motion Control

6.2.2.1

Motor paso a paso en PTO

Salidas de la CPU relevantes para Motion Control
El número de accionamientos utilizables depende del número de PTO (Pulse Train Outputs) y
del número de salidas disponibles del generador de impulsos.
Las siguientes representaciones proporcionan información sobre las correspondientes
dependencias:

Número máximo de PTO
Con la versión tecnológica V4 se dispone de 4 PTO por cada CPU. De este modo se pueden
controlar 4 accionamientos como máximo.

2306

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Tipo de señal del PTO
Dependiendo del tipo de señal seleccionado del PTO, se necesitan 1-2 salidas del generador
de impulsos por PTO (accionamiento).
Tipo de señal

Número de salidas del generador de impulsos

Impulso A y sentido B (salida de sentido desacti‐
vada) 1

1

Impulso A y sentido B

2

1

Pulsación hacia delante A y pulsación hacia atrás
B

2

A/B desfasado

2

A/B desfasado - cuádruple

2

1

La salida de sentido debe encontrarse integrada o en una Signal Board.

Salidas utilizables del generador de impulsos y frecuencias límite
Las variantes de relé de las CPU solo pueden acceder a las salidas del generador de impulsos
de una Signal Board.
Dependiendo de la CPU, se pueden utilizar las salidas del generador de impulsos Q0.0 a Q1.1
con las frecuencias límite indicadas a continuación:
CPU

Q0.0

Q0.1

Q0.2

Q0.3

Q0.4

Q0.5

Q0.6

Q0.7

Q1.0

Q1.1

-

-

-

-

-

-

1211 (DC/DC/DC)

100 kHz 100 kHz 100 kHz 100 kHz

1212 (DC/DC/DC)

100 kHz 100 kHz 100 kHz 100 kHz

20 kHz

20 kHz

-

-

-

-

1214(F) (DC/DC/DC)

100 kHz 100 kHz 100 kHz 100 kHz

20 kHz

20 kHz

20 kHz

20 kHz

20 kHz

20 kHz

1215(F) (DC/DC/DC)

100 kHz 100 kHz 100 kHz 100 kHz

20 kHz

20 kHz

20 kHz

20 kHz

20 kHz

20 kHz

100
kHz

100 kHz

100
kHz

100 kHz

1217 (DC/DC/DC)

1 MHz

1 MHz

1 MHz

1 MHz

100 kHz 100 kHz

Dependiendo de la Signal Board, se pueden utilizar las salidas del generador de impulsos Qx.0
a Qx.3 con las frecuencias límite indicadas a continuación:
Signal Board

Qx.0

Qx.1

Qx.2

Qx.3

-

-

-

-

-

-

DI2/DQ2 x DC24V
20kHz

20 kHz

20 kHz

-

-

-

-

-

-

-

-

DI2/DQ2 x DC24V
200kHz

200 kHz 200 kHz

-

-

-

-

-

-

-

-

DQ4 x DC24V 200kHz

200 kHz 200 kHz 200 kHz 200 kHz

-

-

-

-

-

-

DI2/DQ2 x DC5V
200kHz

200 kHz 200 kHz

-

-

-

-

-

-

DQ4 x DC5V 200kHz

200 kHz 200 kHz 200 kHz 200 kHz

-

-

-

-

-

-

-

-

La frecuencia límite inferior es de 1 Hz en cada caso.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2307

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Las salidas del generador de impulsos se pueden asignar libremente a los PTO.
Nota
Si se utilizan salidas del generador de impulsos de diferentes frecuencias límite conforme al
tipo de señal, se utiliza en cada caso la frecuencia límite más baja.
El tipo de señal "Impulso A y sentido B" constituye una excepción; con este tipo de señal se
utiliza siempre la frecuencia límite de la salida del generador de impulsos.
Nota
Acceso a las salidas del generador de impulsos a través de la memoria imagen de proceso
Si se ha activado el PTO (Pulse Train Output) y se ha asignado a un eje, el firmware asume el
control sobre las salidas del generador de impulsos y de sentido correspondientes.
Al asumir el control se interrumpe también la conexión entre la memoria imagen de proceso y
la salida de periferia. Si bien el usuario tiene la posibilidad de escribir en la memoria imagen de
proceso de las salidas del generador de impulsos y de sentido con el programa de usuario o
la tabla de observación, esta no se transfiere a la salida de periferia. Por consiguiente, tampoco
es posible observar la salida de periferia a través del programa de usuario o la tabla de
observación. La información leída refleja el valor de la memoria imagen de proceso, la cual no
coincide con el estado verdadero de la salida de periferia.
En las demás salidas de la CPU no asignadas fijamente por el firmware de la CPU, el estado
de la salida de periferia puede ser controlado u monitorizado de la forma habitual a través de
la memoria imagen de proceso.

Salidas para señales del accionamiento
Para Motion Control se puede parametrizar opcionalmente una interfaz para "Accionamiento
habilitado" y "Accionamiento listo".
Si se utiliza la interfaz del accionamiento es posible seleccionar libremente la salida digital para
"Accionamiento habilitado" y la entrada digital para "Accionamiento listo".

Límites de aceleración/deceleración
Para la aceleración y deceleración se aplican los siguientes límites:
Aceleración/deceleración

Valor

Aceleración/deceleración mínimas

5,0E-3 pulsos/s2

Aceleración/deceleración máximas

9,5E+9 pulsos/s2

Límites de tirón
Para el tirón son válidos los siguientes límites:

2308

Tirón

Valor

Tirón mínimo

4,0E-3 pulsos/s3

Tirón máximo

1,0E+10 pulsos/s3

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Consulte también
Salidas de la CPU relevantes para Motion Control (versión tecnológica V1...3) (Página 2554)
Principio de la interfaz de impulsos (Página 2309)
Relación entre el tipo de señal y el sentido de desplazamiento (Página 2310)
Finales de carrera por hardware y por software (Página 2329)
Limitación de tirones (Página 2330)
Referenciar (Página 2331)
Componentes de hardware para Motion Control (Página 2304)
Integración del objeto tecnológico Eje de posicionamiento (Página 2349)
Herramientas del objeto tecnológico Eje de posicionamiento (Página 2352)

Principio de la interfaz de impulsos
En función de los ajustes del motor paso a paso, cada impulso hace que el motor paso a paso
se desplace en un ángulo definido. Si el motor paso a paso está ajustado, p. ej., a 1000
impulsos por revolución, el motor paso a paso rotará 0,36° por impulso.
La velocidad del motor paso a paso viene determinada por el número de impulsos por unidad
de tiempo.
OHQWD

U£SLGD

Las indicaciones siguientes también son aplicables a los servomotores con interfaz de
impulsos.

Consulte también
Salidas de la CPU relevantes para Motion Control (Página 2306)
Relación entre el tipo de señal y el sentido de desplazamiento (Página 2310)
Finales de carrera por hardware y por software (Página 2329)
Limitación de tirones (Página 2330)
Referenciar (Página 2331)
Integración del objeto tecnológico Eje de posicionamiento (Página 2349)
Herramientas del objeto tecnológico Eje de posicionamiento (Página 2352)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2309

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Relación entre el tipo de señal y el sentido de desplazamiento
La CPU emite la velocidad y el sentido de desplazamiento a través de dos salidas.
Las relaciones entre la configuración y el sentido de desplazamiento difieren en función del tipo
de señal seleccionado. En la configuración del eje, en "Parámetros básicos > General",
pueden configurarse los siguientes tipos de señal:
● "PTO: impulso A y sentido B"
● "PTO: pulsación hacia delante A y pulsación hacia atrás B" (a partir de V4)
● "PTO: A/B desfasado" (a partir de V4)
● "PTO: A/B desfasado, cuádruple" (a partir de V4)
El sentido de movimiento se ajusta en la configuración del eje, en el área "Parámetros
avanzados > Mecánica". Si activa la opción "Invertir sentido", se invierte la lógica de sentido
descrita a continuación para el correspondiente tipo de señal.

PTO: Impulso A y sentido B
Con este tipo de señal se evalúan los impulsos de la salida de impulsos y el nivel de la salida
de sentido.
Los impulsos se emiten a través de la salida de impulso de la CPU. La salida de sentido de la
CPU predetermina el sentido de giro del accionamiento:
● 5 V/24 V en la salida de sentido ⇒ sentido de giro positivo
● 0 V en la salida de sentido ⇒ sentido de giro negativo
La tensión indicada depende del hardware empleado. Los valores mencionados no son válidos
para las salidas diferenciales de la CPU 1217.
6HQWLGRGHGHVSOD]DPLHQWR
SRVLWLYR

6HQWLGRGHGHVSOD]DPLHQWR
QHJDWLYR

8
99
6DOLGDGHLPSXOVR
9

W

99
6DOLGDGHVHQWLGR
9

W

!µV

PTO: pulsación hacia delante A y pulsación hacia atrás B (a partir de V4)
En este tipo de señal se evalúan los impulsos de una salida.

2310

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
El impulso para el sentido positivo se emite a través de la "Salida de impulso adelante". El
impulso para el sentido negativo se emite a través de la "Salida de impulso atrás".
La tensión indicada depende del hardware empleado. Los valores mencionados no son válidos
para las salidas diferenciales de la CPU 1217.
6HQWLGRGH
GHVSOD]DPLHQWRSRVLWLYR

6HQWLGRGH
GHVSOD]DPLHQWRQHJDWLYR

8
99
6DOLGDGHLPSXOVRDVFHQ
GHQWH
9

W

99
6DOLGDGHLPSXOVRGHVFHQ
GHQWH
9

W

PTO – A/B desfasada (a partir de V4)
Para este tipo de señal se evalúan los flancos ascendentes de una salida en cada caso.
El impulso se emite a través de la salida "Señal A" y, desfasado, a través de la salida "Señal
B". El desfase entre las salidas define el sentido de giro:
● Señal A adelantada 90° con respecto a señal B ⇒ sentido de giro positivo
● Señal B adelantada 90° con respecto a señal A ⇒ sentido de giro negativo

PTO – A/B desfasada, cuádruple (a partir de V4)
Con este tipo de señal se evalúan los flancos ascendentes y descendentes de las dos salidas.
Un periodo de impulso tiene cuatro flancos en dos fases (A y B). Por ello, la frecuencia de
impulsos en la salida se reduce a una cuarta parte.
El impulso se emite a través de la salida "Señal A" y, desfasado, a través de la salida "Señal
B". El desfase entre las salidas define el sentido de giro:
● Señal A adelantada 90° con respecto a señal B ⇒ sentido de giro positivo
● Señal B adelantada 90° con respecto a señal A ⇒ sentido de giro negativo
La tensión indicada depende del hardware empleado. Los valores mencionados no son válidos
para las salidas diferenciales de la CPU 1217.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2311

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
6HQWLGRGHODPDUFKD
SRVLWLYR

6HQWLGRGHODPDUFKD
QHJDWLYR

372 $%
GHVIDVDGR
8
99
6H³DO$
9

W

99
6H³DO%
9

W

372 $%
GHVIDVDGR
FX£GUXSOH
8
99
6H³DO$
9
W
99
6H³DO%
9
W

Invertir el sentido de dirección
Si se activa la opción "Invertir sentido", se invierte la lógica de sentido:
● PTO: Impulso A y sentido B
– 0 V en la salida de sentido (nivel bajo) ⇒ sentido de giro positivo
– 5 V/24 V en la salida de sentido (nivel alto) ⇒ sentido de giro negativo
La tensión indicada depende del hardware empleado. Las tensiones indicadas no son
válidas para las salidas diferenciales de la CPU 1217.
● PTO: pulsación hacia delante A y pulsación hacia atrás B
Las salidas "Salida de impulso descendente" y "Salida de impulso ascendente" se
intercambian.

2312

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
● PTO – A/B desfasada
Las salidas "Señal A" y "Señal B" se intercambian.
● PTO – A/B desfasada, cuádruple
Las salidas "Señal A" y "Señal B" se intercambian.

Consulte también
Salidas de la CPU relevantes para Motion Control (Página 2306)
Principio de la interfaz de impulsos (Página 2309)
Finales de carrera por hardware y por software (Página 2329)
Limitación de tirones (Página 2330)
Referenciar (Página 2331)
Integración del objeto tecnológico Eje de posicionamiento (Página 2349)
Herramientas del objeto tecnológico Eje de posicionamiento (Página 2352)

6.2.2.2

Accionamiento PROFIdrive / conexión analógica del accionamiento analógica

Conexión de accionamientos y encóders
A un eje de posicionamiento con conexión del accionamiento a través de PROFIdrive/
analógica se asigna un accionamiento y un encóder.
Los accionamientos aptos para PROFIdrive se conectan mediante telegramas PROFIdrive. La
consigna se predetermina mediante telegramas PROFIdrive.
Los accionamientos con interfaz de consigna analógica se conectan a través de una salida
analógica y una señal de habilitación opcional. La consigna se predetermina a través de una
salida analógica.

Opciones de conexión
Los accionamientos aptos para PROFIdrive se conectan a través de la interfaz PROFINET de
la CPU.
Los accionamientos con interfaz de consigna analógica se conectan con la CPU a través de
una de las siguientes conexiones:
● Salida analógica a través de Signal Board
● Salida analógica integrada
● Salida analógica a través de módulo de salidas analógicas
Para un encóder existen las posibilidades de conexión siguientes:
● Encóder conectado a accionamiento PROFIdrive
● Encóder conectado a módulo tecnológico

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2313

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
● Encóder PROFIdrive conectado directamente a PROFINET IO
(En estos encóders el valor del encóder se transfiere respectivamente mediante
telegramas PROFIdrive, a través de PROFIBUS o PROFINET).
● Encóder conectado a contador rápido (HSC - High Speed Counter)
En esta opción de conexión las señales de encóder se conectan directamente con un HSC,
que calcula los valores de encóder a partir de ellas. Dependiendo de la CPU, pueden
utilizarse hasta 6 encoders HSC.

Número máximo de ejes
Mediante PROFIdrive o la conexión analógica del accionamiento se puede controlar un
máximo de 8 accionamientos (el número es independiente del estado de simulación del eje).

Aplicación automática de los parámetros de accionamiento y encóder en el dispositivo
Para el funcionamiento, las magnitudes de referencia para la conexión de accionamientos y
encóders deben estar ajustadas de forma idéntica tanto en el controlador como en el
accionamiento o encóder.
La consigna de velocidad de giro NSOLL y el valor real de velocidad de giro NIST se transfieren
en el telegrama PROFIdrive como valor porcentual en relación a la velocidad de giro de
referencia. El valor de referencia para la velocidad de giro debe estar ajustada de forma
idéntica tanto en el controlador como en el accionamiento.
La resolución del valor real en el telegrama PROFIdrive también debe estar ajustada de forma
idéntica tanto en el controlador como en el accionamiento o módulo encóder.

Aplicación automática de parámetros
En los accionamientos SINAMICS V4.x o superiores y en los encóders PROFIdrive a partir del
número de versión A16, los parámetros de los accionamientos y los encóders pueden
aplicarse automáticamente en la CPU.
Los parámetros correspondientes se aplican después de (re)inicializar el objeto tecnológico y
(re)arrancar el accionamiento y la CPU. Los cambios en la configuración del accionamiento se
aplican tras rearrancar el accionamiento o reiniciar el objeto tecnológico.
En el controlador, en las variables del objeto tecnológico <Nombre de
eje>.StatusDrive.AdaptionState = 2 y <Nombre de eje>.StatusSensor[1].AdaptionState = 2 se
puede comprobar si los parámetros se han aplicado correctamente.

Parámetros
Los ajustes del controlador se realizan en el TIA Portal en "Objeto tecnológico > Configuración
> Parámetros básicos > Accionamiento/encóder".
Los ajustes del accionamiento y el encóder se realizan en la configuración del hardware
correspondiente.

2314

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
La tabla siguiente compara los ajustes en el TIA Portal, en el controlador y los
correspondientes parámetros del accionamiento/encóder:
Ajuste en el TIA Portal

Controlador
Variable del bloque de datos tecnológico

Parámetros de accio‐
namiento

Aplica‐
ción auto‐
mática

Número de telegrama
P922

-

<Nombre de eje>.Actor.DriveParame‐
ter.ReferenceSpeed

Accionamientos SINA‐
MICS: P2000

X

Velocidad de giro máxima del motor en [1/ <Nombre de eje>.Actor.DriveParame‐
min]
ter.MaxSpeed

Accionamientos SINA‐
MICS: P1082

X

-

-

Accionamiento
Número de telegrama

Dirección de entrada telegrama
<Nombre de eje>.Actor.Interface.Addres‐
sIn
Dirección de salida telegrama
<Nombre de eje>.Actor.Interface.Addres‐
sOut

Velocidad de giro de referencia en [rpm]

Accionamiento

<Nombre de eje>.Actor.Type
0 = Conexión analógica del accionamiento
1 = PROFIdrive
2 = PTO (Pulse Train Output)

Encóder
Telegrama

<Nombre de eje>.Sensor[n].Interface.Ad‐
dressIn

P922

-

X

<Nombre de eje>.Sensor[n].Interface.Ad‐
dressout
Tipo de encóder

<Nombre de eje>.Sensor[n].System

P979[1] Bit0 Encóder 1

● Lineal incremental

0: rotativo

● Lineal absoluto

1: lineal

P979[11] Bit0 Encóder
2

● Rotativo incremental

<Nombre de eje>.Sensor[n].Type

P979[5] Encóder 1

● Rotativo absoluto

0: incremental
1: absoluto

P979[15] Encóder 2

Resolución, encóder lineal

<Nombre de eje>.Sensor[n].Parame‐
ter.Resolution

P979[2] Encóder 1

<Nombre de eje>.Sensor[n].Parame‐
ter.StepsPerRevolution

P979[2] Encóder 1

La división de la retícula está indicada en
la placa de características del encóder co‐
mo distancia entre rayas en el sistema de
medición lineal.
Incrementos por vuelta, encóder rotativo
Número de bits para la resolución fina
XIST1
Valor real cíclico del encóder, encóder li‐
neal o rotativo

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

-

X

P979[12] Encóder 2

X

P979[12] Encóder 2

<Nombre de eje>.Sensor[n].Parameter.Fi‐ P979[3] Encóder 1
neResolutionXist1
P979[13] Encóder 2

X

2315

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Ajuste en el TIA Portal

Número de bits para la resolución fina
XIST2
Valor absoluto del encóder, encóder lineal
o rotativo

Controlador
Variable del bloque de datos tecnológico

Parámetros de accio‐
namiento

Aplica‐
ción auto‐
mática

<Nombre de eje>.Sensor[n].Parameter.Fi‐ P979[4] Encóder 1
neResolutionXist2
P979[14] Encóder 2

Vueltas del encóder determinables, encó‐ <Nombre de eje>.Sensor[n].Parame‐
der absoluto rotativo
ter.DeterminableRevolutions

P979[5] Encóder 1

X

X

P979[15] Encóder 2

Consulte también
Configuración - Accionamiento - PTO (Pulse Train Output) (Página 2358)
Configuración - Accionamiento - Conexión analógica del accionamiento (Página 2361)
Configuración - Accionamiento - PROFIdrive (Página 2362)
Configuración - Encóder - Encóder conectado a PROFINET/PROFIBUS (Página 2365)
Configuración - Encóder - Encóder con contador rápido (HSC) (Página 2367)

PROFIdrive
PROFIdrive es el perfil estándar normalizado para tecnología de accionamientos a la hora de
conectar accionamientos y encóders vía PROFINET IO. Los accionamientos y encóders que
soportan el perfil PROFIdrive se conectan conforme a la norma PROFIdrive.
Encontrará la especificación de PROFIdrive actual en:
https://www.profibus.com (http://www.profibus.com)
La comunicación entre el controlador y el accionamiento o el encóder se realiza a través de
diferentes telegramas PROFIdrive. Cada telegrama tiene una estructura normalizada. En cada
caso se selecciona el telegrama adecuado a cada aplicación. En los telegramas PROFIdrive
se transfieren palabras de control y estado así como consignas y valores reales.

Telegramas para PROFIdrive
La consigna de un eje de posicionamiento se transfiere a un accionamiento por medio del
telegrama PROFIdrive 1, 2, 3 o 4.
El valor de encóder se transfiere en un telegrama junto con la consigna (telegrama 3 y 4) o bien
en un telegrama de encóder aparte (telegrama 81 u 83).

2316

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Las tablas siguientes muestran los telegramas PROFIdrive soportados para la asignación de
accionamientos y encóders:
Telegramas es‐
tándar

Descripción breve

1

● Consigna de velocidad de giro 16 bits (NSOLL)
● Velocidad de giro real 16 bits (NIST)

2

● Consigna de velocidad de giro 32 bits (NSOLL)
● Velocidad de giro real 32 bits (NIST)
● Señal de vida

3

● Consigna de velocidad de giro 32 bits (NSOLL)
● Velocidad de giro real 32 bits (NIST)
● 1 encóder
● Señal de vida

4

● Consigna de velocidad de giro 32 bits (NSOLL)
● Velocidad de giro real 32 bits (NIST)
● 2 encóders
● Señal de vida

Telegramas es‐
tándar para encó‐
der

Descripción breve

81

● 1 encóder
● Señal de vida

83

● Velocidad de giro real 32 bits (NIST)
● 1 encóder
● Señal de vida

Regulación
Los accionamientos que están conectados a través de PROFIdrive o de una interfaz analógica
del accionamiento también se operan con regulación de posición. En caso de realizar trabajos
de mantenimiento o reparación, el eje también se puede operar sin regulación de posición.
El regulador de posición es un regulador P con precontrol de velocidad.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2317

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Estructura del regulador
La siguiente imagen muestra la estructura del regulador de S7-1200 Motion Control:

&RQWURODGRU

$FFLRQDPLHQWR

&RQWURODQWLFLSDWLYR
,QWHUSRODGRU

YFRQVLJQD

9DORUGHFRQWURODQWLFLSDWLYR
5HJXODGRUGHSRVLFLµQ

5HJXODGRUGHYHORFLGDG




QFRQVLJQD



QUHDO

[FRQVLJQD

[UHDO

QUHDO

MC-Interpolator [OB92] calcula la posición de consigna para el eje. La diferencia entre la
posición real y de consigna se multiplica por el factor de ganancia del regulador de posición.
El valor resultante se suma al valor de precontrol y se emite al accionamiento como consigna
de velocidad de giro a través de PROFIdrive o de la salida analógica.
El encóder captura la posición real del eje y la devuelve al controlador a través de un telegrama
PROFIdrive o de un HSC (High Speed Counter).

Conexión de datos del accionamiento PROFIdrive / encóder PROFIdrive
La conexión de datos de accionamientos PROFIdrive y encóders PROFIdrive tiene lugar
directamente mediante el telegrama PROFIdrive o bien mediante un bloque de datos.
Utilice la conexión mediante un bloque de datos si desea modificar o evaluar el contenido de
los telegramas en el programa de usuario en función del proceso.

2318

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Principio de la conexión de datos directamente al accionamiento/encóder
El siguiente diagrama de funcionamiento simplificado muestra la conexión de datos directa a
accionamientos PROFIdrive y encóders PROFIdrive a través de telegramas:
0&6HUYR
>2%@

3,32%6HUYR



0&,QWHUSRODWRU
>2%@



3,32%6HUYR






352),GULYHGULYHHQFRGHU



W

①

②

③
④
⑤
⑥

El bloque de organización "MC-Servo" calcula el regulador de posición.

Al inicio del "MC-Servo" se lee el telegrama de entrada del accionamiento o el encóder (⑥ > ⑤ -> ③). Si se ha agregado un bloque de organización "MC-PreServo", el telegrama se lee
al inicio del "MC-PreServo".
Al final del "MC-Servo" se escribe el telegrama de salida para el accionamiento o el encóder
(④ -> ⑤ -> ⑥). Si se ha agregado un bloque de organización "MC-PostServo", el telegrama
se escribe al final del "MC-PostServo".
El bloque de organización "MC-Interpolator" se llama en cada ciclo de aplicación Motion des‐
pués del "MC-Servo".
En el "MC-Interpolator" se evalúan las instrucciones Motion Control, se generan las consignas
para el siguiente ciclo de aplicación Motion y se vigila el objeto tecnológico.
La memoria imagen parcial del proceso "TPA OB Servo" de las entradas se actualiza en el ciclo
de aplicación Motion.
La memoria imagen parcial del proceso "TPA OB Servo" de las salidas se actualiza en el ciclo
de aplicación Motion.
Intercambio de telegramas a través de direcciones de periferia del controlador y del acciona‐
miento o encóder.
Accionamiento PROFIdrive o encóder PROFIdrive

Principio de la conexión de datos mediante un bloque de datos
El siguiente diagrama de funcionamiento simplificado muestra la conexión de datos con
accionamientos PROFIdrive y encóders PROFIdrive a través de un bloque de datos: Los
siguientes apartados contienen detalles sobre la ejecución.
Para poder modificar o evaluar el contenido de los telegramas en función del proceso, se
intercala un bloque de datos como interfaz de datos (consulte ① y ③).
Utilice para ello los bloques de organización "MC-PreServo" y "MC-PostServo" para alcanzar
una elevada calidad de la regulación de posición.
Los bloques de organización "MC-PreServo" y "MC-PostServo" se pueden agregar en el árbol
del proyecto con el comando "Agregar nuevo bloque".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2319

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
0&6HUYR

>2%@
0&3UH6HUYR
>2%@



3,32%6HUYR

0&,QWHUSRODWRU
>2%@

0&3RVW6HUYR
>2%@









3,32%6HUYR




352),GULYHGULYHHQFRGHU

W

①

MC-PreServo se llama antes de MC-Servo.
En el programa de usuario de "MC-PreServo" transfiera el contenido del telegrama de entrada
de la memoria imagen parcial "IPP OB Servo" ⑤ al bloque de datos de la interfaz de datos.

②

En el programa de usuario de "MC-PreServo" se puede editar o evaluar el área de entradas del
telegrama.
El bloque de organización "MC-Servo" calcula el regulador de posición.
Al inicio del "MC-Servo" se lee el telegrama de entrada del accionamiento o el encóder en el
bloque de datos de la interfaz de datos (① -> ②).

③

Al final del "MC-Servo" se escribe el telegrama de salida del accionamiento o el encóder en el
bloque de datos de la interfaz de datos (② -> ③).
MC-PostServo se llama tras MC-Servo.
En el programa de usuario de "MC-PostServo" se puede editar o evaluar el área de salidas del
telegrama.

④

⑤
⑥
⑦
⑧

2320

Al final del programa de usuario de "MC-PostServo" transfiera el contenido del telegrama de
salida desde la interfaz de datos del bloque de datos a la memoria imagen parcial "IPP OB
Servo" ⑥.
El bloque de organización "MC-Interpolator" se llama en cada ciclo de aplicación Motion des‐
pués del "MC-PostServo".
En el "MC-Interpolator" se evalúan las instrucciones Motion Control, se generan las consignas
para el siguiente ciclo de aplicación Motion y se vigila el objeto tecnológico.
La memoria imagen parcial del proceso "TPA OB Servo" de las entradas se actualiza en el ciclo
de aplicación Motion.
La memoria imagen parcial del proceso "TPA OB Servo" de las salidas se actualiza en el ciclo
de aplicación Motion.
Intercambio de telegramas a través de direcciones de periferia del controlador y del acciona‐
miento o encóder.
Accionamiento PROFIdrive o encóder PROFIdrive

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Procedimiento básico para la conexión de datos mediante bloque de datos
Proceda como se describe a continuación para utilizar la conexión de datos a través del bloque
de datos. La conexión de datos puede configurarse por separado para accionamiento y
encóder PROFIdrive.

Crear bloque de datos para conexión de datos
El usuario debe encargarse de crear el bloque de datos para la conexión de datos. Para la
conexión de datos, el bloque de datos debe incluir una estructura de datos del tipo "PD_TELx".
"x" representa el número de telegrama del accionamiento o encóder ajustado en la
configuración del dispositivo.
Para crear el bloque de datos, proceda como se describe a continuación:
1. Cree un bloque de datos nuevo del tipo "DB global".
2. Marque el bloque de datos en el árbol del proyecto y seleccione el comando del menú
contextual "Propiedades".
3. Desactive los atributos siguientes en Atributos y aplique el cambio con OK:
– "Depositar solo en la memoria de carga"
– "Bloque de datos protegido contra escritura en el dispositivo"
– "Acceso optimizado al bloque" para objetos tecnológicos <V7.0
4. Abra el bloque de datos en el editor de bloques.
5. En el editor de bloques, inserte una estructura de variables del tipo "PD_TELx" en forma de
texto.
6. Compile el bloque de datos para la conexión a datos antes de utilizarlo en la configuración
de los ejes.
En esta variable se encuentra la estructura de variables "Input", para el rango de entrada del
telegrama, y "Output", para el rango de salida del telegrama.
Nota
"Input" y "Output" se emplean desde el punto de vista de la regulación de posición. El rango de
entrada contiene, p. ej., los valores de reales del accionamiento, el rango de salida, las
consignas para el accionamiento.
El bloque de datos puede incluir las estructuras de datos de varios ejes, encóders y contenido
de otros tipos.

Configurar conexión de datos mediante un bloque de datos
Para configurar el eje, proceda del siguiente modo:
1. Abra la ventana de configuración "Interfaz de hardware > Accionamiento/Encóder".
2. En la lista desplegable, seleccione el bloque de datos "Bloque de datos".
3. En el campo "Bloque de datos", elija el bloque de datos creado previamente.
Ábralo y seleccione el nombre de variable definido para el accionamiento y el encóder.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2321

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Agregar variable PLC para el acceso a telegramas
Cree la siguiente variable PLC para poder acceder a los rangos de entrada y de salida del
telegrama.
Para la variable PLC del rango de entrada, proceda del siguiente modo:
1. Abra la carpeta "Variables PLC" en el árbol del proyecto y visualice todas las variables.
2. Agregue una nueva variable y asigne un nombre unívoco, p. ej., compuesto por el nombre
del eje o del encóder, el tipo de telegrama y el rango de direcciones.
3. Introduzca el tipo "PD_TELx_IN" en forma de texto en la columna "Tipo de datos".
4. Introduzca la dirección de entrada del telegrama del accionamiento/encóder en la columna
"Dirección".
La dirección se encuentra en la configuración de dispositivo del accionamiento o encóder.
Proceda de manera análoga para la variable PLC del rango de salida y seleccione como tipo
de datos "PD_TELx_OUT" y como dirección la dirección de salida del telegrama del
accionamiento/encóder.

Programación de MC-PreServo y MC-PostServo
MC-PreServo
El programa de usuario de "MC-PreServo" debe leer el área de entrada del telegrama y
transferirla al bloque de datos de la conexión de datos.
Para ello, en el programa de usuario del "MC-PreServo" asigne la variable PLC definida
anteriormente del área de entrada a la estructura de variables "Input" del bloque de datos.
Con instrucciones adicionales se pueden editar los datos de la estructura de variables "Input"
del bloque de datos antes de transferirlos al "MC-Servo" y de que sean procesados por
"MC_Servo".
MC-PostServo
Al finalizar su procesamiento, "MC-Servo" transmite el área de salida del telegrama a la
estructura de variables "Output" del bloque de datos.
En el programa de usuario de "MC-PostServo" , el contenido de la estructura de variables
"Output" del bloque de datos debe escribirse en la dirección de salida del telegrama.
En el programa de usuario de "MC-PostServo", asigne la estructura de variables "Output" del
bloque de datos a la variable PLC del área de salida definida anteriormente.
Si debe modificarse el rango de salida, debe hacerse antes de la instrucción de asignación.
ATENCIÓN
Daños en la máquina
La manipulación indebida de los telegramas del accionamiento y encóder puede producir
movimientos indeseados del accionamiento.
Compruebe si el programa de usuario es coherente en la conexión del accionamiento y del
encóder.
Encontrará un ejemplo de aplicación para el uso de MC-PreServo y MC-PostServo en:

2322

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
https://support.industry.siemens.com/cs/document/109741575 (https://
support.industry.siemens.com/cs/document/109741575)

Consulte también
Trama PROFIdrive (Página 2472)
Configuración - Accionamiento - PROFIdrive (Página 2362)
Configuración - Encóder - Encóder conectado a PROFINET/PROFIBUS (Página 2365)
Conexión de datos de accionamientos con conexión analógica de accionamientos
(Página 2323)
Bloques de organización para Motion Control (Página 2325)

Conexión de datos de accionamientos con conexión analógica de accionamientos
De manera alternativa, la conexión de datos de accionamientos con interfaz analógica del
accionamiento también se puede efectuar a través de un bloque de datos.
Utilice la conexión mediante un bloque de datos si desea adaptar la consigna analógica en el
programa de usuario en función del proceso.

Principio de la conexión de datos mediante un bloque de datos
Cuando finaliza la regulación de posición a través del MC-Servo [OB91], la consigna del
accionamiento analógico se escribe en la salida analógica asignada.
Para poder modificar la consigna analógica en función del proceso, se intercala una interfaz de
datos mediante un bloque de datos.
La consigna del accionamiento analógico se puede procesar a través del bloque de
organización MC-PostServo [OB95] en el bloque de datos y, a continuación, se puede escribir
en la dirección de la periferia.
El MC-PostServo se llama tras el MC-Servo. El usuario debe encargarse de programar el
bloque de organización MC-PostServo, que debe agregarse mediante el comando "Agregar
nuevo bloque".

Procedimiento básico
Proceda como se describe a continuación para utilizar la conexión de datos a través del bloque
de datos. La conexión de datos se puede configurar por separado para accionamientos con
interfaz de accionamiento analógica y encóders PROFIdrive. Encontrará información sobre la
conexión de datos de los encóders PROFIdrive en el capítulo Conexión de datos del
accionamiento PROFIdrive / encóder PROFIdrive (Página 2318).

Crear bloque de datos para conexión de datos
El usuario debe encargarse de crear el bloque de datos.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2323

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Para crear el bloque de datos, proceda como se describe a continuación:
1. Cree un bloque de datos nuevo del tipo "DB global".
2. Marque el bloque de datos en el árbol del proyecto y seleccione el comando del menú
contextual "Propiedades".
3. Desactive los atributos siguientes en Atributos y aplique el cambio con OK:
– "Depositar solo en la memoria de carga"
– "Bloque de datos protegido contra escritura en el dispositivo"
– "Acceso optimizado al bloque" para objetos tecnológicos <V7.0
4. Abra el bloque de datos en el editor de bloques.
5. En el editor de bloques, inserte una variable del tipo de datos "WORD".
6. Compile el bloque de datos para la conexión a datos antes de utilizarlo en la configuración
de los ejes.

Configurar conexión de datos mediante un bloque de datos
Para la configuración, proceda del modo siguiente (en la ventana de configuración Parámetros
básicos > General debe estar seleccionada la "Conexión analógica del accionamiento"):
1. Abra la ventana de configuración Parámetros básicos > Accionamiento.
2. En el campo "Salida analógica", seleccione la variable del bloque de datos definida
previamente.

Poner la dirección de salida analógica en la memoria imagen de proceso TPA OB Servo
Para alcanzar una calidad de regulación suficiente, el área de direcciones de la salida
analógica debe encontrarse en la memoria imagen de proceso "TPA OB Servo".
Proceda como se describe a continuación:
1. Abra el módulo de la salida analógica en la configuración del dispositivo.
2. Abra la ficha "General".
3. Seleccione "Direcciones E/S".
4. Seleccione "MC-Servo" como bloque de organización. "TPA OB Servo" se selecciona
automáticamente como memoria imagen de proceso.
5. En la ficha "Variables E/S" asigne otro nombre de variable a la salida analógica.

Programación de MC-PostServo
En el programa de usuario de MC-PostServo, asigne la variable del bloque de datos a la
variable de la salida analógica.

2324

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Al finalizar el MC-PostServo, el área de salidas del "TPA OB Servo" se escribe en la periferia.
ADVERTENCIA
La manipulación indebida de la consigna del accionamiento puede suponer un peligro para
las personas y para la máquina.
Tome medidas de prevención suficientes para evitar peligros para las personas y para la
máquina.

Comportamiento de ejecución
Bloques de organización para Motion Control
Descripción
Si crea un objeto tecnológico "Eje de posicionamiento" con accionamiento PROFIdrive o con
interfaz de accionamiento analógica, se crean automáticamente bloques de organización para
procesar objetos tecnológicos. La funcionalidad Motion Control de los objetos tecnológicos
genera un nivel de ejecución propio y se llama de acuerdo con el ciclo de aplicación de Motion
Control.
Se crean los siguientes bloques de organización:
● MC-Servo [OB91]
Cálculo del regulador de posición
● MC-Interpolator [OB92]
Evaluación de las instrucciones de Motion Control, la generación de consignas y función de
vigilancia
Opcionalmente se pueden utilizar los siguientes bloques de organización:
● MC-PreServo [OB67]
Por ejemplo, preparación de los contenidos de telegramas del sistema de accionamiento
● MC-PostServo [OB95]
Por ejemplo, preparación de las consignas del sistema de accionamiento
Los bloques de organización MC-Servo [OB91] y MC-Interpolator [OB92] están protegidos
(protección de know-how), al contrario que los bloques MC-PreServo [OB67] y MCPostServo [OB95]. No es posible ver o modificar el código del programa.
La relación de ciclo entre los dos bloques de organización es siempre 1:1. MC-Servo [OB91]
se ejecuta siempre antes de MC-Interpolator [OB92].
El ciclo de aplicación Motion Control y la prioridad de los bloques de organización se pueden
ajustar conforme a las exigencias de calidad de regulación y a la carga del sistema.

Ciclo de aplicación Motion Control
El ciclo de aplicación Motion Control en el que se llama el MC-Servo [OB91] puede ajustarse
en las propiedades del bloque de organización, en "General > Tiempo de ciclo":

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2325

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
El MC-Servo [OB91] se llama de forma cíclica con el "ciclo de aplicación" indicado.
El ciclo de aplicación Motion Control debe elegirse lo suficientemente grande como para poder
procesar todos los objetos tecnológicos en un solo ciclo. Si el tiempo de procesamiento de los
objetos tecnológicos es mayor que el ciclo de aplicación se producen desbordamientos
(Página 2327).
Para evitar fallos en la secuencia de programa de la CPU, ajuste el ciclo de aplicación Motion
Control en función del número de ejes utilizados del siguiente modo:
Ciclo de aplicación de Motion Control = (número de ejes con regulación de posición × 2 ms) +
2 ms
La tabla siguiente muestra a modo de ejemplo el ciclo de aplicación Motion Control resultante
de acuerdo con el número de ejes con regulación de posición:
Número de ejes

Ciclo de aplicación Motion Control

1

4 ms

2

6 ms

4

10 ms

8

18 ms

Para SINAMICS debe regir además:
● Ciclo de aplicación de Motion Control (MC-Servo) ≥ memoria imagen de proceso del
accionamiento SINAMICS (parámetro P2048) ≥ ciclo de bus
Todos los tiempos deben seleccionarse como múltiplo entero mutuo.

Prioridad
En caso necesario, la prioridad de los bloques de organización se ajusta en sus propiedades,
en "General > Atributos > Prioridad".
● MC-Servo [OB91]
Prioridad 17 a 26 (valor predeterminado 25)
● MC-Interpolator [OB92]
Prioridad 16 a 25 (valor predeterminado 24)
La prioridad del MC-Servo [OB91] debe estar al menos un nivel por encima de la prioridad de
MC-Interpolator [OB92].

MC-PreServo [OB67] y MC-PostServo [OB95]
Los bloques de organización MC-PreServo [OB67] y MC-PostServo [OB95] son programables
y se llaman en el ciclo de la aplicación configurado. MC-PreServo [OB67] se llama justo antes
de MC-Servo [OB91]. MC-PostServo [OB95] se llama justo después de MC-Servo [OB91].

Consulte también
Conexión de datos del accionamiento PROFIdrive / encóder PROFIdrive (Página 2318)

2326

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Memoria imagen parcial de proceso "IPP OB Servo"
Para obtener una regulación óptima, asigne todos los módulos E/S utilizados por Motion
Control (p. ej., accionamientos, módulos tecnológicos, módulos de entradas/salidas digitales
y analógicas) a la memoria imagen parcial del proceso "IPP OB Servo". Esta asignación hará
que los módulos E/S se ejecuten en sincronía temporal con el objeto tecnológico.

Comportamiento de ejecución y desbordamientos
Durante el procesamiento de la funcionalidad Motion Control se llaman y procesan los bloques
de organización MC-Servo [OB91] y MC-Interpolator [OB92] en cada ciclo de aplicación (la
ejecución también se efectúa en el estado operativo STOP de la CPU). El tiempo de ciclo
restante está disponible para procesar el programa de usuario.
Para que el programa se ejecute correctamente se aplican las siguientes reglas:
● En cada ciclo de aplicación debe iniciarse el MC-Servo [OB91] y procesarse hasta el final.
● En cada ciclo de aplicación debe iniciarse por lo menos el MC-Interpolator [OB92]
correspondiente.
La figura siguiente muestra a modo de ejemplo el comportamiento de ejecución correcto para
el procesamiento del bloque de organización OB1:








&LFORGHDSOLFDFLµQ
W
0&3UH6HUYR>2%@
W
6

0&6HUYR>2%@

6

6

6
W

0&3RVW6HUYR>2%@
W
,

0&,QWHUSRODWRU>2%@

,

,

,
W

2%










W



①
②
③
④



Entrada "TPA OB Servo"
Salida "TPA OB Servo"
Primer ciclo OB1
Segundo ciclo OB1

Desbordamientos
Si no se mantiene el ciclo de aplicación ajustado, p. ej,. por ser demasiado corto, es posible que
se produzcan desbordamientos.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2327

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
El desbordamiento de MC-Servo [OB91], MC-Interpolator [OB92], MC_PreServo [OB67] y
MC_PostServo [OB95] se registra en el búfer de diagnóstico de la CPU y provoca el STOP de
la CPU.
MC-PreServo, MC-Servo, MC-PostServo y MC-Interpolator se detienen. Si es necesario,
puede evaluar la entrada en el búfer de diagnóstico mediante un OB de error de tiempo (OB
80).

Estados operativos
En este apartado se explica el comportamiento de Motion Control en los diferentes estados
operativos y en las transiciones entre los mismos. Encontrará una descripción general de los
estados operativos en el manual de sistema del S7-1200.

Estados operativos y transiciones
La CPU tiene tres estados operativos: STOP, ARRANQUE (STARTUP) y RUN. La figura
siguiente muestra los estados operativos y las transiciones entre los mismos:

6723

67$5783

581




①
②
③
④



POWER ON → STOP
STOP → ARRANQUE
ARRANQUE → RUN
RUN → STOP

Estado operativo STOP
En estado operativo STOP no se procesa el programa de usuario y todas las salidas del
proceso se desactivan. Por consiguiente, no se ejecutan órdenes de Motion Control.
Los bloques de datos tecnológicos de los ejes con regulación de posición se actualizan.

Estado operativo ARRANQUE (STARTUP)
Antes de que la CPU empiece a procesar el programa de usuario cíclico, se ejecutan una vez
los OBs de arranque.
Durante el ARRANQUE, las salidas del proceso están bloqueadas. Las órdenes de Motion
Control se rechazan.
Los bloques de datos tecnológicos de los ejes con regulación de posición se actualizan.

Estado operativo RUN
En estado operativo RUN se procesa el programa de usuario.

2328

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
En RUN se llaman y procesan cíclicamente las órdenes de Motion Control programadas en el
OB1 (también son posibles otros niveles de ejecución).
Los bloques de datos tecnológicos se actualizan.

Transiciones de estados operativos
La tabla siguiente muestra el comportamiento de Motion Control en las transiciones entre los
estados operativos:

6.2.2.3

Transición de estado
operativo

Comportamiento

POWER ON → STOP

La CPU ejecuta un rearranque completo de los objetos tecnológicos. Los
objetos tecnológicos se reinicializan con los valores de la memoria de carga.

STOP → ARRANQUE

Los objetos tecnológicos se inicializan a los valores de arranque de la CPU.

ARRANQUE → RUN

Las salidas de proceso se habilitan.

RUN → STOP

Cuando la CPU pasa del estado operativo RUN a STOP, todos los objetos
tecnológicos se bloquean conforme a la reacción a error "Retirar habilita‐
ción". Las órdenes de Motion Control en curso se interrumpen.

Finales de carrera por hardware y por software
Limite la "zona de desplazamiento admisible" y la "zona de trabajo" de su objeto tecnológico
Eje de posicionamiento con finales de carrera por hardware y por software. La siguiente
representación recoge las relaciones:
=RQDGHGHVSOD]DPLHQWRDGPLVLEOH

=RQDGHWUDEDMR
V
7RSH
PHF£QLFR

)LQDOGH
FDUUHUD+:

)LQDOGH
FDUUHUD6:

)LQDOGH
FDUUHUD6:

)LQDOGH
FDUUHUD+:

7RSH
PHF£QLFR

Los finales de carrera hardware son finales de carrera que limitan el "recorrido de
desplazamiento máximo admisible" del eje. Los finales de carrera por hardware son elementos
físicos de conexión que se deben conectar a entradas de la CPU aptas para notificación.
Con los finales de carrera por software se limita la "zona de trabajo" del eje. Éstos deben
encontrarse, en relación a la zona de desplazamiento, dentro de los finales de carrera por
hardware. Dado que las posiciones de los finales de carrera por software se pueden ajustar
con flexibilidad, la zona de trabajo del eje se puede adaptar individualmente según el perfil de
desplazamiento actual. Al contrario de lo que ocurre con los finales de carrera por hardware,
los finales de carrera por software únicamente pueden ser realizados con el software y no
precisan elementos de conexión propios.
Los finales de carrera de hardware y por software se deben activar antes de su utilización en
la configuración o en el programa de usuario. Los finales de carrera por software se hacen
efectivos después de referenciar el eje.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2329

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Consulte también
Salidas de la CPU relevantes para Motion Control (Página 2306)
Principio de la interfaz de impulsos (Página 2309)
Relación entre el tipo de señal y el sentido de desplazamiento (Página 2310)
Limitación de tirones (Página 2330)
Referenciar (Página 2331)
Integración del objeto tecnológico Eje de posicionamiento (Página 2349)
Herramientas del objeto tecnológico Eje de posicionamiento (Página 2352)
Límites de posición (Página 2371)

6.2.2.4

Limitación de tirones
La limitación de tirones le permite reducir los esfuerzos mecánicos durante una rampa de
aceleración y deceleración. Si la limitación de tirones está activa, el valor de aceleración y
deceleración no se modifica abruptamente, sino que va aumentando o disminuyendo
suavemente. La siguiente figura muestra la evolución de la velocidad y la aceleración sin y con
limitación de tirones:

Movimiento de desplazamiento sin limitación de tirones
Y

Movimiento de desplazamiento con limitación de tirones
Y

W

W

D

D

W

W

La limitación de tirones produce un perfil de velocidad " redondeado" del movimiento del eje.
Así se garantiza, p. ej., un arranque y frenado suaves de una cinta transportadora.

2330

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Consulte también
Comportamiento del eje al utilizar la limitación de tirones (Página 2382)
Salidas de la CPU relevantes para Motion Control (Página 2306)
Principio de la interfaz de impulsos (Página 2309)
Relación entre el tipo de señal y el sentido de desplazamiento (Página 2310)
Finales de carrera por hardware y por software (Página 2329)
Referenciar (Página 2331)
Integración del objeto tecnológico Eje de posicionamiento (Página 2349)
Herramientas del objeto tecnológico Eje de posicionamiento (Página 2352)

6.2.2.5

Referenciar
Por referenciar se entiende la sincronización de las coordenadas del objeto tecnológico a la
posición física real del accionamiento. Dado que en los ejes con control de posición las
entradas e indicaciones de posición se refieren exactamente a esta coordenada del eje, resulta
extremadamente relevante que haya una concordancia con la situación real. Solamente así es
posible garantizar que la posición absoluta de destino del eje sea alcanzada exactamente en
el accionamiento.
En la CPU S7-1200 el referenciado del eje se efectúa con la instrucción de Motion Control
"MC_Home". En la variable del objeto tecnológico <Nombre de eje>.StatusBits.HomingDone
se indica el estado "referenciado". Se distingue entre los siguientes modos de referenciado:

Modos de referenciado
● Referenciado activo
En el referenciado activo, la instrucción de Motion Control "MC_Home" realiza la marcha
necesaria al punto de referencia. El eje se referencia, conforme a la configuración, al
detectar el sensor del punto de referencia. Los desplazamientos en curso se interrumpen.
● Referenciado pasivo
En el referenciado pasivo, la instrucción de Motion Control "MC_Home" no realiza ningún
movimiento de referencia. El desplazamiento necesario para ello debe ser realizado por el
usuario con otras instrucciones de Motion Control. El eje se referencia, conforme a la
configuración, al detectar el sensor del punto de referencia. Los movimientos en curso no
se interrumpen cuando se inicia el referenciado pasivo.
● Referenciado directo absoluto
La posición del eje se fija sin considerar el sensor del punto de referencia. Los procesos de
movimiento en curso no se interrumpen. El valor del parámetro de entrada "Position" de la
instrucción Motion-Control "MC_Home" se aplica inmediatamente como punto de
referencia del eje.
● Referenciado directo relativo
La posición del eje se fija sin considerar el sensor del punto de referencia. Los procesos de
movimiento en curso no se interrumpen. Para la posición del eje después del referenciado
es válido lo siguiente:
Nueva posición de eje = posición actual del eje + valor del parámetro "Position" de la
instrucción "MC_Home".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2331

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Desactivación del estado "referenciado"
El estado "referenciado" de un objeto tecnológico (<Nombre de eje>.StatusBits.HomingDone)
se desactiva cuando se dan las siguientes condiciones:
● Conexión del accionamiento a través de PTO (Pulse Train Output):
– Inicio de una orden "MC_Home" de referenciado activo
(El estado "referenciado" se activa de nuevo una vez concluido correctamente el
proceso de referenciado).
– Bloqueo del eje por la instrucción de Motion Control "MC_Power"
– Cambio entre modo automático y control manual
– Tras POWER OFF -> POWER ON de la CPU
– Tras un rearranque completo de la CPU (RUN-STOP -> STOP-RUN)
● Objetos tecnológicos con valores reales incrementales:
– Inicio de una orden "MC_Home" de referenciado activo
(El estado "referenciado" se activa de nuevo una vez concluido correctamente el
proceso de referenciado).
– Error en el sistema del encóder o fallo del encóder
– Reinicio del objeto tecnológico
– Tras POWER OFF → POWER ON de la CPU
– Borrado total
– Cambio de la configuración del encóder
● Objetos tecnológicos con valores reales absolutos:
– Error en el sistema del sensor/fallo del encóder
– Sustitución de la CPU
– Cambio de la configuración del encóder
– Restablecimiento de la configuración de fábrica de la CPU
– Transferencia de otro proyecto al controlador

Consulte también
Salidas de la CPU relevantes para Motion Control (Página 2306)
Principio de la interfaz de impulsos (Página 2309)
Relación entre el tipo de señal y el sentido de desplazamiento (Página 2310)
Finales de carrera por hardware y por software (Página 2329)
Limitación de tirones (Página 2330)
Integración del objeto tecnológico Eje de posicionamiento (Página 2349)
Herramientas del objeto tecnológico Eje de posicionamiento (Página 2352)
Referenciar (a partir del objeto tecnológico Eje de posicionamiento V2) (Página 2385)

2332

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

6.2.3

Guía para utilizar Motion Control
La guía aquí descrita muestra el procedimiento básico para utilizar Motion Control con la
CPU S7-1200.

Requisitos
Para utilizar el objeto tecnológico Eje de posicionamiento es necesario haber creado un
proyecto con una CPU S7-1200.

Procedimiento
Proceda según el orden recomendado a continuación para utilizar Motion Control con la
CPU S7-1200. Para ello consulte los enlaces listados:
1. Agregar objeto tecnológico Eje de posicionamiento (Página 2354)
2. Trabajando con el diálogo de configuración (Página 2355)
3. Cargar en la CPU (Página 2439)
4. Test de funcionamiento del eje en la ventana de puesta en marcha (Página 2440)
5. Programar (Página 2446)
6. Diagnosticar el control del eje (Página 2467)

6.2.4

Utilizar versiones

6.2.4.1

Visión global de la versión
La representación siguiente recoge las relaciones existentes entre las versiones relevantes del
S7-1200 Motion Control:

Versión de la tecnología
Se puede comprobar la versión actualmente seleccionada de esta tecnología en la Task Card
"Instrucciones", en la carpeta "Tecnología > Motion Control" y en el diálogo "Objetos
tecnológicos > Agregar objeto".
La versión de la tecnología se selecciona en la Task Card "Instrucciones", en la carpeta
"Tecnología > Motion Control".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2333

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Si en el cuadro de diálogo "Agregar objeto" se agrega un TO con una versión alternativa,
también se conmuta la versión de la tecnología.
Nota
La selección de una versión alternativa de la tecnología también afecta a la versión de las
instrucciones de Motion Control (Task Card).
Los TO y las instrucciones de Motion Control únicamente se convierten conforme a la versión
elegida de la tecnología en la compilación o al "Cargar en el dispositivo".

Versión del objeto tecnológico
La versión de un TO se puede comprobar en la ficha "Propiedades > General > Información",
en el campo "Versión".

Versión de la instrucción Motion Control
La versión de la instrucción de Motion Control se puede comprobar en la ficha "Propiedades >
General > Información", en el campo "Versión".
Si la versión utilizada de la instrucción de Motion Control no responde a la siguiente lista de
compatibilidad, las correspondientes instrucciones de Motion Control aparecerán
seleccionadas en el editor de programas.

2334

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Lista de compatibilidad
Tecnología
V7.
0

Novedades:
● Tiempo de
segmento para
conexión de
accionamiento PTO
● Adaptación de
datos de los
valores del
accionamiento y
del encóder offline
● Behaviour_Gx_XIS
T1

CPU

Objeto tecnológico

Instrucción de Motion
Control

V4.4

Eje de posiciona‐
miento V7.0

MC_Power V7.0

Tabla de órdenes
V7.0

MC_Home V7.0

MC_Reset V7.0
MC_Halt V7.0
MC_MoveAbsolute
V7.0
MC_MoveRelative V7.0
MC_MoveVelocity V7.0
MC_MoveJog V7.0
MC_CommandTable
V7.0
MC_ChangeDynamic
V7.0
MC_ReadParam V7.0
MC_WriteParam V7.0

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2335

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Tecnología
V6.
0

CPU

Objeto tecnológico

Instrucción de Motion
Control

Novedades:

V4.2

MC_Power V6.0

● MC-PreServo

V4.3

Eje de posiciona‐
miento V6.0
Tabla de órdenes
V6.0

MC_Home V6.0

● MC-PostServo
● Conexión de datos
directamente al
accionamiento
SINAMICS o a
través de bloque de
datos
● Conexión de datos
directamente a la
salida analógica de
un accionamiento
con conexión
analógica del
accionamiento, o a
través del bloque
de datos

MC_Reset V6.0
MC_Halt V6.0
MC_MoveAbsolute
V6.0
MC_MoveRelative V6.0
MC_MoveVelocity V6.0
MC_MoveJog V6.0
MC_CommandTable
V6.0
MC_ChangeDynamic
V6.0
MC_ReadParam V6.0
MC_WriteParam V6.0

● Aplicación de los
parámetros de
accionamiento y
encóder en
encóders y
accionamientos
PROFIdrive
● Mover
accionamientos
con regulación de
posición sin la
regulación de
posición con fines
de servicio técnico
● Simulación de
accionamientos
con regulación de
posición sin
hardware
configurado o
disponible
● Selección de nivel
en la configuración
del final de carrera
por hardware
● Compatibilidad con
telegrama
PROFIdrive 4

2336

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Tecnología
V5.
0

Novedades:

CPU

Objeto tecnológico

Instrucción de Motion
Control

V4.1

Eje de posiciona‐
miento V5.0

MC_Power V5.0

Tabla de órde‐
nes V5.0

MC_Home V5.0

● Conexión del
accionamiento a
través de
PROFIdrive

MC_Reset V5.0
MC_Halt V5.0
MC_MoveAbsolute
V5.0

● Conexión
analógica del
accionamiento

MC_MoveRelative V5.0
MC_MoveVelocity V5.0

● Regulación de
posición para
conexión
PROFIdrive/
analógica del
accionamiento

MC_MoveJog V5.0
MC_CommandTable
V5.0
MC_ChangeDynamic
V5.0
MC_ReadParam V5.0

● Vigilancia de
posicionamiento
para conexión del
accionamiento con
PROFIdrive/
analógica

MC_WriteParam V5.0

● MC-Servo [OB91]
● MC-Interpolator
[OB92]
V4.
0

Novedades:
● MC_ReadParam
● MC_WriteParam
● Unificación de los
bloques de datos
tecnológicos de
S7-1200 y S7-1500
Motion Control.

V4.0

Eje de posiciona‐
miento V4.0

MC_Power V4.0

Tabla de órde‐
nes V4.0

MC_Home V4.0

MC_Reset V4.0
MC_Halt V4.0
MC_MoveAbsolute
V4.0
MC_MoveRelative V4.0
MC_MoveVelocity V4.0
MC_MoveJog V4.0
MC_CommandTable
V4.0
MC_ChangeDynamic
V4.0
MC_ReadParam V4.0
MC_WriteParam V4.0

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2337

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Tecnología
V3.
0

CPU

Objeto tecnológico

Instrucción de Motion
Control

Novedad:

V2.2

Eje V3.0

MC_Power V3.0

Carga en estado ope‐
rativo RUN

V3.0

Tabla de órde‐
nes V3.0

MC_Home V3.0

V4.0

MC_Reset V3.0
MC_Halt V3.0
MC_MoveAbsolute
V3.0
MC_MoveRelative V3.0
MC_MoveVelocity V3.0
MC_MoveJog V3.0
MC_CommandTable
V3.0
MC_ChangeDynamic
V3.0

V2.
0

Novedades:

V2.1

Eje V2.0

MC_Power V2.0

● Limitación de
tirones

V2.2

Tabla de órde‐
nes V2.0

MC_Reset V2.0

V3.0

MC_Home V2.0

● Tabla de órdenes

MC_Halt V2.0

● MC_ChangeDyna
mic

MC_MoveAbsolute
V2.0
MC_MoveRelative V2.0
MC_MoveVelocity V2.0
MC_MoveJog V2.0
MC_CommandTable
V2.0
MC_ChangeDynamic
V2.0

V1.0

V1.0

Eje V1.0

MC_Power V1.0

V2.0

MC_Reset V1.0

V2.1

MC_Home V1.0

V2.2

MC_Halt V1.0

V3.0

MC_MoveAbsolute
V1.0
MC_MoveRelative V1.0
MC_MoveVelocity V1.0
MC_MoveJog V1.0

Consulte también
Cambio de versión de la tecnología (Página 2339)
Lista de compatibilidad de las variables V1...3 <-> V4...5 (Página 2339)
Estado del final de carrera (Página 2348)

2338

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

6.2.4.2

Cambio de versión de la tecnología
Para disfrutar de las ventajas de la nueva versión tecnológica, es preciso configurar o, en su
caso, cambiar la versión de la tecnología en los proyectos existentes.
Nota
Compatibilidad de las variables del objeto tecnológico
Al cambiar de V1...3 a ≥ V4, tenga en cuenta la lista de compatibilidad (Página 2339) si en el
programa de usuario, en las tablas de observación, etc. utiliza variables del objeto tecnológico.

Ajuste/cambio de versión tecnológica
Para ajustar/cambiar la versión tecnológica, proceda del siguiente modo:
1. Abra el editor de programas (p. ej. abriendo el OB1).
2. Seleccione la versión tecnológica deseada en la carpeta "Tecnología > Motion Control" en
la Task Card "Instrucciones".
3. Guarde y compile el proyecto. Tenga en cuenta las posibles indicaciones de error al
compilar. Elimine las causas de los errores mostrados.
4. Compruebe la configuración de los objetos tecnológicos.
5. Dado el caso, ajuste los nombres de variables según la lista de compatibilidad en los
objetos siguientes.
– Programa de usuario
– Tablas de observación
– Tablas de forzado permanente
– Configuraciones HMI
– Configuraciones de Trace

Consulte también
Visión global de la versión (Página 2333)
Estado del final de carrera (Página 2348)

6.2.4.3

Lista de compatibilidad de las variables V1...3 <-> V4...5
En el marco de la tecnología V4 se han unificado los bloques de datos tecnológicos para
S7-1200 Motion Control y S7-1500 Motion Control. El resultado a partir de V4 son nuevas
variables y nombres de variables para los objetos tecnológicos Eje de posicionamiento y la
tabla de órdenes.
Tenga en cuenta las siguientes tablas si ha utilizado variables de los objetos tecnológicos en
el programa de usuario y desea convertir el proyecto de V1...3 a ≥ V4 y superior (o viceversa).
Las variables marcadas en la columna "Conversión automática V1... 3 a ≥ V4" se convierten
automáticamente al compilar el proyecto. No se convierten los nombres de variables en las

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2339

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
tablas de observación y de forzado permanente ni tampoco en HMI o en configuraciones
Trace.
Las siguientes variables son nuevas o han sido adaptadas y tal vez deban corregirse en el
programa de usuario, en las tablas de observación, etc.

Variables Config (eje de posicionamiento)
Nombre de la variable V1.0 a V3.0

Nombre de variable a partir de V4.0

Conversión auto‐
mática
V1...3 a ≥ V4

<Nombre de eje>.Config.DynamicDe‐
faults.Acceleration

<Nombre de eje>.DynamicDefaults.Acceleration

Sí

<Nombre de eje>.Config.DynamicDe‐
faults.Deceleration

<Nombre de eje>.DynamicDefaults.Deceleration

Sí

<Nombre de eje>.Config.DynamicDe‐
faults.EmergencyDeceleration

<Nombre de eje>.DynamicDefaults.EmergencyDecele‐
ration

Sí

<Nombre de eje>.Config.DynamicDe‐
faults.Jerk

<Nombre de eje>.DynamicDefaults.Jerk

Sí

<Nombre de eje>.Config.DynamicDe‐
faults.JerkActive

No disponible

No

<Nombre de eje>.Config.DynamicLi‐
mits.MaxVelocity

<Nombre de eje>.DynamicLimits.MaxVelocity

Sí

<Nombre de eje>.Config.DynamicLimits.Min‐ <Nombre de eje>.DynamicLimits.MinVelocity
Velocity

Sí

<Nombre de eje>.Config.General.LengthUnit <Nombre de eje>.Units.LengthUnit

Sí

<Nombre de eje>.Config.Homing.AutoRever‐ <Nombre de eje>.Homing.AutoReversal
sal

Sí

<Nombre de eje>.Config.Homing.Direction

<Nombre de eje>.Homing.ApproachDirection

Sí

<Nombre de eje>.Config.Homing.FastVelo‐
city

<Nombre de eje>.Homing.ApproachVelocity

Sí

<Nombre de eje>.Config.Homing.Offset

<Nombre de eje>.Sensor[1].ActiveHoming.HomePosi‐
tionOffset

Sí

<Nombre de eje>.Config.Homing.SideActi‐
veHoming

<Nombre de eje>.Sensor[1].ActiveHoming.SideInput

Sí

El tirón está activado si el tirón configurado > 0.004 im‐
pulsos/s3.

<Nombre de eje>.Config.Homing.SidePassi‐ <Nombre de eje>.Sensor[1].PassiveHoming.SideInput
veHoming

Sí

<Nombre de eje>.Config.Homing.SlowVelo‐
city

<Nombre de eje>.Homing.ReferencingVelocity

Sí

<Nombre de eje>.Config.Homing.Switche‐
dLevel

<Nombre de eje>.Sensor[1].ActiveHoming.SwitchLevel
<Nombre de eje>.Sensor[1].PassiveHoming.SwitchLe‐
vel

No

<Nombre de eje>.Config.Mechanics.Inverse‐ <Nombre de eje>.Actor.InverseDirection
Direction

Sí

<Nombre de eje>.Config.Mechanics.LeadS‐
crew

<Nombre de eje>.Mechanics.LeadScrew

Sí

<Nombre de eje>.Config.Mechanics.Pulses‐
PerDriveRevolution

<Nombre de eje>.Actor.DriveParameter.PulsesPerDri‐
veRevolution

Sí

2340

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Nombre de la variable V1.0 a V3.0

Nombre de variable a partir de V4.0

Conversión auto‐
mática
V1...3 a ≥ V4

<Nombre de eje>.Config.PositionLi‐
mits_HW.Active

<Nombre de eje>.PositionLimitsHW.Active

Sí

<Nombre de eje>.Config.PositionLi‐
mits_HW.MaxSwitchedLevel

<Nombre de eje>.PositionLimitsHW.MaxSwitchLevel

Sí

<Nombre de eje>.Config.PositionLi‐
mits_HW.MinSwitchedLevel

<Nombre de eje>.PositionLimitsHW.MinSwitchLevel

Sí

<Nombre de eje>.Config.PositionLi‐
mits_SW.Active

<Nombre de eje>.PositionLimitsSW.Active

Sí

<Nombre de eje>.Config.PositionLi‐
mits_SW.MaxPosition

<Nombre de eje>.PositionLimitsSW.MaxPosition

Sí

<Nombre de eje>.Config.PositionLi‐
mits_SW.MinPosition

<Nombre de eje>.PositionLimitsSW.MinPosition

Sí

No disponible

<Nombre de eje>.Actor.DirectionMode

No

No disponible

<Nombre de eje>.Actor.Type

No

No disponible

<Nombre de eje>.Sensor[1].ActiveHoming.Mode

No

No disponible

<Nombre de eje>.Sensor[1].PassiveHoming.Mode

No

Variables ErrorBits (eje de posicionamiento)
Nombre de la variable V1.0 a V3.0

Nombre de variable a partir de V4.0

Conversión auto‐
mática
V1...3 a ≥ V4

<Nombre de eje>.ErrorBits.HwLimitMax

<Nombre de eje>.ErrorBits.HWLimit

No

<Nombre de eje>.ErrorBits.HwLimitMin

(Tenga en cuenta también los nuevos bits de estado y el
capítulo Estado del final de carrera (Página 2348).)

<Nombre de eje>.ErrorBits.SwLimitMaxEx‐
ceeded

<Nombre de eje>.ErrorBits.SWLimit

No

(Tenga en cuenta también los nuevos bits de estado y el
<Nombre de eje>.ErrorBits.SwLimitMaxRea‐ capítulo Estado del final de carrera (Página 2348).)
ched
<Nombre de eje>.ErrorBits.SwLimitMinEx‐
ceeded
<Nombre de eje>.ErrorBits.SwLimitMinRea‐
ched
No disponible

<Nombre de eje>.ErrorBits.DirectionFault

No

Variables MotionStatus (eje de posicionamiento)
Nombre de la variable V1.0 a V3.0

Nombre de variable a partir de V4.0

<Nombre de eje>.MotionStatus.Distance

<Nombre de eje>.StatusPositioning.Distance

Sí

<Nombre de eje>.MotionStatus.Position

<Nombre de eje>.Position

Sí

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Conversión auto‐
mática
V1...3 a ≥ V4

2341

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Nombre de la variable V1.0 a V3.0

Nombre de variable a partir de V4.0

Conversión auto‐
mática
V1...3 a ≥ V4

<Nombre de eje>.MotionStatus.TargetPosi‐
tion

<Nombre de eje>.StatusPositioning.TargetPosition

Sí

<Nombre de eje>.MotionStatus.Velocity

<Nombre de eje>.Velocity

Sí

Variables StatusBits (eje de posicionamiento)
Nombre de la variable V1.0 a V3.0

Nombre de variable a partir de V4.0

Conversión auto‐
mática
V1...3 a ≥ V4

<Nombre de eje>.StatusBits.Homing

<Nombre de eje>.StatusBits.HomingCommand

Sí

<Nombre de eje>.StatusBits.SpeedCom‐
mand

<Nombre de eje>.StatusBits.VelocityCommand

Sí

No disponible

<Nombre de eje>.StatusBits.HWLimitMaxActive

No

No disponible

<Nombre de eje>.StatusBits.HWLimitMinActive

No

No disponible

<Nombre de eje>.StatusBits.SWLimitMaxActive

No

No disponible

<Nombre de eje>.StatusBits.SWLimitMinActive

No

Variables (tabla de órdenes)
Nombre de la variable V1.0 a V3.0

Nombre de variable a partir de V4.0

Conversión auto‐
mática
V1...3 a ≥ V4

<Tabla de órdenes>.Config.Command[n].Po‐ <Tabla de órdenes>.Command[n].Position
sition

Sí

<Tabla de órdenes>.Config.Command[n].Ve‐ <Tabla de órdenes>.Command[n].Velocity
locity

Sí

<Tabla de órdenes>.Config.Command[n].Du‐ <Tabla de órdenes>.Command[n].Duration
ration

Sí

<Tabla de órdenes>.Config.Com‐
mand[n].NextStep

<Tabla de órdenes>.Command[n].NextStep

Sí

<Tabla de órdenes>.Config.Com‐
mand[n].StepCode

<Tabla de órdenes>.Command[n].StepCode

Sí

Consulte también
Visión global de la versión (Página 2333)
Cambio de versión de la tecnología (Página 2339)
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)

2342

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

6.2.4.4

Lista de compatibilidad de las variables V4...5 <-> V6
En el marco de la tecnología V6 se han unificado aún más los bloques de datos tecnológicos
para S7-1200 Motion Control y S7-1500 Motion Control. El resultado a partir de V6 son nuevos
nombres de variable para el objeto tecnológico Eje de posicionamiento.
Tenga en cuenta las siguientes tablas si ha utilizado variables de los objetos tecnológicos en
el programa de usuario y desea convertir el proyecto de V4...5 a ≥ V6 y superior (o viceversa).
Las variables marcadas en la columna "Conversión automática V4...5 a ≥ V6" se convierten
automáticamente al compilar el proyecto. No se convierten los nombres de variables en las
tablas de observación y de forzado permanente ni tampoco en HMI o en configuraciones
Trace.
Las siguientes variables son nuevas o han sido adaptadas y tal vez deban corregirse en el
programa de usuario, en las tablas de observación, etc.

Variables Config (eje de posicionamiento)
Nombre de variable desde V4.0 hasta V5.0

Nombre de variable a partir de V6.0

<Nombre de eje.PositionLimitsSW.Active

<Nombre de eje>.PositionLimits_SW.Active

Conversión auto‐
mática
V4...5 a ≥ V6
Sí

<Nombre de eje>.PositionLimitsSW.MinPosi‐ <Nombre de eje>.PositionLimits_SW.MinPosition
tion

Sí

<Nombre de eje>.PositionLimitsSW.MaxPo‐
sition

<Nombre de eje>.PositionLimits_SW.MaxPosition

Sí

<Nombre de eje>.PositionLimitsHW.Active

<Nombre de eje>.PositionLimits_HW.Active

Sí

<Nombre de eje>.PositionLimitsHW.MinS‐
witchLevel

<Nombre de eje>.PositionLimits_HW.MinSwitchLevel

Sí

<Nombre de eje>.PositionLimitsHW.MinSwit‐ <Nombre de eje>.PositionLimits_HW.MinSwitchAddress
chAddress

6.2.4.5

Sí

Compatibilidad de telegramas V6 <-> V7
En el marco de la tecnología V7 se han unificado los UDT de la conexión de accionamiento
para S7-1200 Motion Control y S7-1500 Motion Control. El resultado a partir de V7 son nuevos
nombres de variables en los bloques de datos para la conexión del accionamiento.
Tenga en cuenta la siguiente tabla si ha utilizado variables de los telegramas en el programa
de usuario y desea convertir el proyecto de V6 a ≥ V7. Las variables marcadas en la columna
"Conversión automática V6 a ≥ V7" se convierten automáticamente al compilar el proyecto. No
se convierten los nombres de variables en las tablas de observación y de forzado permanente
ni tampoco en HMI o en configuraciones Trace.
Las siguientes variables son nuevas o han sido adaptadas y tal vez deban corregirse en el
programa de usuario, en las tablas de observación, etc.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2343

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Telegramas V6 <-> V7
Telegrama

Nombre de variable en V6

Nombre de variable en V7

Conversión automáti‐
ca V6 a ≥ V7

1

PD_TEL1_IN

Input

Sí

ZSW1.SwitchingOnNotInhibi‐
ted
2

ZSW1.SwitchingOnInhibited

PD_TEL1_OUT

Output

Sí

PD_TEL2_IN

Input

Sí

ZSW1.SwitchingOnNotInhibi‐
ted
3

Sí

Output

Sí

PD_TEL3_IN

Input

Sí

ZSW1.SwitchingOnNotInhibi‐
ted

ZSW1.SwitchingOnInhibited

Sí

Gx_ZSW

G1_ZSW

Sí

Gx_ZSW.Reserved_Bit11

G1_ZSW.EncoderFaultAck‐
nowledgeActive

Sí

Gx_XIST1

G1_XIST1

Sí

Gx_XIST2

G1_XIST2

Sí

Output

Sí

Gx_STW

G1_STW

Gx_STW.RequestParking‐
Sensor

G1_STW.RequestParkingEn‐ Sí
coder

PD_TEL4_IN

Sí

Input

Sí

ZSW1.SwitchingOnNotInhibi‐
ted

ZSW1.SwitchingOnInhibited

Sí

G1_ZSW.Reserved_Bit11

G1_ZSW.EncoderFaultAck‐
nowledgeActive

Sí

G2_ZSW.Reserved_Bit11

G2_ZSW.EncoderFaultAck‐
nowledgeActive

Sí

PD_TEL4_OUT

2344

ZSW1.SwitchingOnInhibited

PD_TEL2_OUT

PD_TEL3_OUT

4

Sí

Output

Sí

G1_STW.RequestParking‐
Sensor

G1_STW.RequestParkingEn‐ Sí
coder

G2_STW.RequestParking‐
Sensor

G2_STW.RequestParkingEn‐ Sí
coder

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Telegrama

Nombre de variable en V6

Nombre de variable en V7

Conversión automáti‐
ca V6 a ≥ V7

81

PD_TEL81_IN

Input

Sí

ZSW2

ZSW2_ENC

Sí

ZSW2.TravelToFixedEndSto‐
pActive

ZSW2_ENC.Reserved_Bit08

Sí

ZSW2.Reserved_Bit09

ZSW2_ENC.ControlReques‐
ted

Sí

ZSW2.PulsesEnabled

ZSW2_ENC.Reserved_Bit10

Sí

ZSW2.MotorDataSetChan‐
geoverActive

ZSW2_ENC.Reserved_Bit11

Sí

ZSW2.SlaveSignOfLifeBit0

ZSW2_ENC.SlaveLifeSign‐
Bit0

Sí

ZSW2.SlaveSignOfLifeBit1

ZSW2_ENC.SlaveLifeSign‐
Bit1

Sí

ZSW2.SlaveSignOfLifeBit2

ZSW2_ENC.SlaveLifeSign‐
Bit2

Sí

ZSW2.SlaveSignOfLifeBit3

ZSW2_ENC.SlaveLifeSign‐
Bit3

Sí

ZSW2.DriveDataSetEffecti‐
veBit0

ZSW2_ENC.Reserved_Bit00

Sí

ZSW2.DriveDataSetEffecti‐
veBit1

ZSW2_ENC.Reserved_Bit01

Sí

ZSW2.DriveDataSetEffecti‐
veBit2

ZSW2_ENC.Reserved_Bit02

Sí

ZSW2.DriveDataSetEffecti‐
veBit3

ZSW2_ENC.FaultPresent

Sí

ZSW2.DriveDataSetEffecti‐
veBit4

ZSW2_ENC.Reserved_Bit04

Sí

ZSW2.AlarmClassBit0

ZSW2_ENC.Reserved_Bit05

Sí

ZSW2.AlarmClassBit1

ZSW2_ENC.Reserved_Bit06

Sí

ZSW2.ParkingAxisActive

ZSW2_ENC.AlarmPresent

Sí

Gx_ZSW

G1_ZSW

Sí

Gx_ZSW.Reserved_Bit11

G1_ZSW.EncoderFaultAck‐
nowledgeActive

Sí

Gx_XIST1

G1_XIST1

Sí

Gx_XIST2

G1_XIST2

Sí

PD_TEL81_OUT

Output

Sí

STW2

STW2_ENC

Sí

STW2.TravelToFixedEnds‐
top

STW2_ENC.Reserved_Bit08

Sí

STW2.Reserved_Bit10

STW2_ENC.ControlByPlc

Sí

STW2.MotorSwitchoverFinis‐
hed

STW2_ENC.Reserved_Bit11

Sí

STW2.DriveDataSetSelec‐
tionBit0

STW2_ENC.Reserved_Bit00

Sí

STW2.DriveDataSetSelec‐
tionBit1

STW2_ENC.Reserved_Bit01

Sí

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2345

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Telegrama

2346

Nombre de variable en V6

Nombre de variable en V7

Conversión automáti‐
ca V6 a ≥ V7

STW2.DriveDataSetSelec‐
tionBit2

STW2_ENC.Reserved_Bit02

Sí

STW2.DriveDataSetSelec‐
tionBit3

STW2_ENC.Reserved_Bit03

Sí

STW2.DriveDataSetSelec‐
tionBit4

STW2_ENC.Reserved_Bit04

Sí

STW2.ParkingAxisSelection

STW2_ENC.FaultAcknowled‐ Sí
ge

Gx_STW

G1_STW

Gx_STW.RequestParking‐
Sensor

G1_STW.RequestParkingEn‐ Sí
coder

Sí

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Telegrama

Nombre de variable en V6

Nombre de variable en V7

Conversión automáti‐
ca V6 a ≥ V7

83

PD_TEL83_IN

Input

Sí

Gx_ZSW

G1_ZSW

Sí

Gx_ZSW.Reserved_Bit11

G1_ZSW.EncoderFaultAck‐
nowledgeActive

Sí

Gx_XIST1

G1_XIST1

Sí

Gx_XIST2

G1_XIST2

Sí

ZSW2

ZSW2_ENC

Sí

ZSW2.TravelToFixedEndSto‐
pActive

ZSW2_ENC.Reserved_Bit08

Sí

ZSW2.Reserved_Bit09

ZSW2_ENC.ControlReques‐
ted

Sí

ZSW2.PulsesEnabled

ZSW2_ENC.Reserved_Bit10

Sí

ZSW2.MotorDataSetChan‐
geoverActive

ZSW2_ENC.Reserved_Bit11

Sí

ZSW2.SlaveSignOfLifeBit0

ZSW2_ENC.SlaveLifeSign‐
Bit0

Sí

ZSW2.SlaveSignOfLifeBit1

ZSW2_ENC.SlaveLifeSign‐
Bit1

Sí

ZSW2.SlaveSignOfLifeBit2

ZSW2_ENC.SlaveLifeSign‐
Bit2

Sí

ZSW2.SlaveSignOfLifeBit3

ZSW2_ENC.SlaveLifeSign‐
Bit3

Sí

ZSW2.DriveDataSetEffecti‐
veBit0

ZSW2_ENC.Reserved_Bit00

Sí

ZSW2.DriveDataSetEffecti‐
veBit1

ZSW2_ENC.Reserved_Bit01

Sí

ZSW2.DriveDataSetEffecti‐
veBit2

ZSW2_ENC.Reserved_Bit02

Sí

ZSW2.DriveDataSetEffecti‐
veBit3

ZSW2_ENC.FaultPresent

Sí

ZSW2.DriveDataSetEffecti‐
veBit4

ZSW2_ENC.Reserved_Bit04

Sí

ZSW2.AlarmClassBit0

ZSW2_ENC.Reserved_Bit05

Sí

ZSW2.AlarmClassBit1

ZSW2_ENC.Reserved_Bit06

Sí

ZSW2.ParkingAxisActive

ZSW2_ENC.AlarmPresent

Sí

PD_TEL83_OUT

Output

Sí

STW2

STW2_ENC

Sí

STW2.TravelToFixedEnds‐
top

STW2_ENC.Reserved_Bit08

Sí

STW2.Reserved_Bit10

STW2_ENC.ControlByPlc

Sí

STW2.MotorSwitchoverFinis‐
hed

STW2_ENC.Reserved_Bit11

Sí

STW2.DriveDataSetSelec‐
tionBit0

STW2_ENC.Reserved_Bit00

Sí

STW2.DriveDataSetSelec‐
tionBit1

STW2_ENC.Reserved_Bit01

Sí

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2347

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Telegrama

6.2.4.6

Nombre de variable en V6

Nombre de variable en V7

Conversión automáti‐
ca V6 a ≥ V7

STW2.DriveDataSetSelec‐
tionBit2

STW2_ENC.Reserved_Bit02

Sí

STW2.DriveDataSetSelec‐
tionBit3

STW2_ENC.Reserved_Bit03

Sí

STW2.DriveDataSetSelec‐
tionBit4

STW2_ENC.Reserved_Bit04

Sí

STW2.ParkingAxisSelection

STW2_ENC.FaultAcknowled‐ Sí
ge

Gx_STW

G1_STW

Gx_STW.RequestParking‐
Sensor

G1_STW.RequestParkingEn‐ Sí
coder

Sí

Estado del final de carrera
Los bits de estado y de error para la indicación de final de carrera alcanzado se han adaptado
en la versión V4.
Para emular el comportamiento de los bits de error de las versiones V1...3, utilice las siguientes
combinaciones lógicas:

V1...3

a partir de V4

<Nombre de eje>.ErrorBits.HwLimitMin

<Nombre de eje>.ErrorBits.HWLimit AND <Nombre de
eje>.StatusBits.HWLimitMinActive

<Nombre de eje>.ErrorBits.HwLimitMax

<Nombre de eje>.ErrorBits.HWLimit AND <Nombre de
eje>.StatusBits.HWLimitMaxActive

<Nombre de eje>.ErrorBits.SwLimitMinReached

<Nombre de eje>.ErrorBits.SWLimit AND (<Nombre de
eje>.Position = <Nombre de eje>.PositioningLimits_SW.Min‐
Position)

<Nombre de eje>.ErrorBits.SwLimitMinExceeded

<Nombre de eje>.ErrorBits.SWLimit AND (<Nombre de
eje>.Position < <Nombre de eje>.PositioningLimits_SW.Min‐
Position)

<Nombre de eje>.ErrorBits.SwLimitMaxReached

<Nombre de eje>.ErrorBits.SWLimit AND (<Nombre de
eje>.Position = <Nombre de eje>.PositioningLimits_SW.Max‐
Position)

<Nombre de eje>.ErrorBits.SwLimitMaxExceeded

<Nombre de eje>.ErrorBits.SWLimit AND (<Nombre de
eje>.Position > <Nombre de eje>.PositioningLimits_SW.Max‐
Position)

Consulte también
Visión global de la versión (Página 2333)
Cambio de versión de la tecnología (Página 2339)
Lista de compatibilidad de las variables V1...3 <-> V4...5 (Página 2339)

2348

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

6.2.5

Objeto tecnológico Eje de posicionamiento

6.2.5.1

Integración del objeto tecnológico Eje de posicionamiento
En la siguiente representación se muestran las relaciones que se producen entre los
componentes de hardware y software cuando se utiliza el objeto tecnológico Eje de
posicionamiento:

+DUGZDUHGHOD&38

$FFLRQDPLHQWR

6,0$7,&
6

5816723
(5525
0$,17

,
,
,
,
,
,

,
,
,
,
,
,
,
,

6LJQDOERDUG
',

&38&
'&'&'&













'

;31/$1

372352),GULYHDQDOµJLFD

HQHO7,$3RUWDOVH
UHSUHVHQWDFRPR

2EMHWRWHFQROµJLFR(MHGH
SRVLFLRQDPLHQWR '%[
&RQWUROGHO
KDUGZDUH

'DWRVGHFRQILJXUDFLµQ

'DWRVGH
FRQILJXUDFLµQ
PRGLILFDEOHV
'DWRVGHHMH 'DWRVGHHMH
DFWXDOHV
DFWXDOHV

3URJUDPDGHXVXDULR

)LUPZDUHGHOD&38
,QIRUPDFLµQGHHVWDGR\
HUURUGHODVSHWLFLRQHVHQ
FXUVR

,QLFLRGH
SHWLFLRQHV

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2349

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Hardware de la CPU
El hardware de la CPU permite controlar y supervisar el accionamiento físico.

Accionamiento
El accionamiento representa la unidad formada por la etapa de potencia y el motor. Puede
utilizar motores paso a paso y servomotores con interfaz de impulsos, PROFIdrive o analógica.

Objeto tecnológico Eje de posicionamiento
El accionamiento físico, mecanismo incluido, se representa en el TIA Portal como objeto
tecnológico Eje de posicionamiento. Configure el objeto tecnológico Eje de posicionamiento
con los siguientes parámetros:
● Selección del PTO (Pulse Train Output)/accionamiento PROFIdrive/salida analógica que
va a utilizarse y configuración de la interfaz del accionamiento
● Parámetros mecánicos y de multiplicación del engranaje del accionamiento (o de la
máquina o instalación)
● Parámetros para los límites de posición y la vigilancia de posicionamiento
● Parámetros para la dinámica y para el referenciado
● Parámetros para el lazo de regulación
La configuración del objeto tecnológico Eje de posicionamiento se guarda en el objeto
tecnológico (bloque de datos). Este bloque de datos conforma simultáneamente la interfaz
entre el programa de usuario y el firmware de la CPU. Durante el tiempo de ejecución del
programa de usuario los datos actuales del eje se guardan en el bloque de datos del objeto
tecnológico.

Programa de usuario
El programa de usuario le permite iniciar órdenes en el firmware de la CPU mediante
instrucciones de Motion Control. Se pueden realizar las siguientes órdenes para controlar el
eje:
● Habilitar y bloquear el eje
● Posicionar eje de forma absoluta
● Posicionar eje de forma relativa
● Mover eje con preajuste de velocidad
● Ejecutar órdenes de eje como secuencia de movimientos (a partir de la tecnología V2, solo
PTO)
● Mover eje en modo Jog
● Parar eje
● Referenciar eje; fijar punto de referencia
● Modificar ajustes dinámicos del eje
● Leer continuamente datos de movimiento del eje

2350

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
● Leer y escribir variable del eje
● Acusar errores
Los parámetros de entrada de las instrucciones de Motion Control y la configuración del eje le
permiten determinar los parámetros de la orden. Los parámetros de salida de la instrucción le
proporcionan información actual sobre el estado y eventuales errores de la orden.
Antes de iniciar una orden para el eje, debe habilitarlo con la instrucción de Motion Control
"MC_Power".
Las variables del objeto tecnológico le permiten leer en el programa de usuario los datos de
configuración y los datos actuales del eje. Puede modificar variables individuales modificables
del objeto tecnológico (p. ej. la aceleración actual) desde el programa de usuario.
Además, con la instrucción de Motion Control "MC_ChangeDynamic" se pueden modificar los
ajustes de dinámica del eje y con "MC_WriteParam" se pueden escribir otros datos de
configuración. Con la instrucción de Motion Control "MC_ReadParam" se puede leer el estado
de movimiento actual del eje.

Firmware de la CPU
Las órdenes de Motion Control lanzadas desde el programa de usuario se procesan en el
firmware de la CPU. Al utilizar el panel de mando del eje, el lanzamiento de las órdenes de
Motion Control se realiza a través del panel de mando del eje. El firmware de la CPU cumple
las siguientes funciones conforme a la configuración del eje:
● Cálculo del perfil de movimiento exacto para órdenes de movimiento y situaciones de
parada de emergencia
● Regulación de posición para conexión del accionamiento a través de PROFIdrive/analógica
● Control de la señal de impulso y sentido para conexión del accionamiento mediante PTO
● Control de la habilitación del accionamiento
● Vigilancia del accionamiento y de los finales de carrera por hardware y por software
● Realimentación actual de informaciones de estado y error de las órdenes a las
instrucciones de Motion Control en el programa de usuario
● Escritura de datos actuales del eje en el bloque de datos del objeto tecnológico

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Salidas de la CPU relevantes para Motion Control (Página 2306)
Relación entre el tipo de señal y el sentido de desplazamiento (Página 2310)
Herramientas del objeto tecnológico Eje de posicionamiento (Página 2352)
Finales de carrera por hardware y por software (Página 2329)
Referenciar (Página 2331)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2351

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

6.2.5.2

Herramientas del objeto tecnológico Eje de posicionamiento
El TIA Portal dispone de las herramientas "Configuración", "Puesta en servicio" y "Diagnóstico"
para el objeto tecnológico Eje de posicionamiento. La siguiente representación muestra la
interacción de las tres herramientas con el objeto tecnológico y el accionamiento:

$FFLRQDPLHQWR

2EMHWRWHFQROµJLFR(MHGHSRVLFLRQDPLHQWR
'%[

'DWRVGHFRQILJXUDFLµQ



&RQILJXUDFLµQ

①
②
③

3DU£PHWURVGH
SXHVWDHQVHUYLFLR

,QIRUPDFLRQHVGH
HVWDGR\HUURU



3XHVWDHQVHUYLFLR



'LDJQµVWLFR

Escritura y lectura de los datos de configuración del objeto tecnológico
Control del accionamiento a través del objeto tecnológico. Lectura del estado del eje para su visualización en el panel
de mando del eje. Optimización de la regulación de posición.
Lectura de las informaciones actuales de estado y error del objeto tecnológico
En accionamientos PROFIdrive también se muestra información del telegrama.

2352

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Configuración
Configure las siguientes propiedades del objeto tecnológico Eje de posicionamiento con la
herramienta "Configuración":
● Selección del PTO (Pulse Train Output)/accionamiento PROFIdrive/salida analógica que
va a utilizarse y configuración de la interfaz del accionamiento
● Propiedades de la mecánica y relación de transmisión del reductor del accionamiento (o de
la máquina o instalación)
● Propiedades de los límites de posición y de la vigilancia de posicionamiento
● Propiedades de la dinámica y del referenciado
● Parámetros del lazo de regulación
La configuración se guarda en el bloque de datos del objeto tecnológico.

Puesta en servicio
Realice un test de funcionamiento de su eje con la herramienta "Puesta en servicio", sin
necesidad de crear un programa de usuario. Al iniciar la herramienta se abre el panel de
mando del eje. El panel de mando del eje incorpora los siguientes comandos:
● Habilitación y bloqueo del eje
● Desplazamiento del eje en modo Jog
● Posicionamiento absoluto y relativo del eje
● Referenciado del eje
● Acuse de errores
Los valores dinámicos se pueden adaptar en consecuencia para los comandos de movimiento.
El panel de mando del eje muestra también el estado actual del eje.
En caso de conexión del accionamiento mediante PROFIdrive/salida analógica, la
optimización le ayudará al determinar la ganancia óptima para el lazo de regulación.

Diagnóstico
Compruebe con la herramienta "Diagnóstico" las informaciones actuales de estado y error del
eje y del accionamiento.

Consulte también
Salidas de la CPU relevantes para Motion Control (Página 2306)
Relación entre el tipo de señal y el sentido de desplazamiento (Página 2310)
Integración del objeto tecnológico Eje de posicionamiento (Página 2349)
Finales de carrera por hardware y por software (Página 2329)
Referenciar (Página 2331)
Configurar el objeto tecnológico Eje de posicionamiento (Página 2355)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2353

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Panel de mando del eje (Página 2440)
Diagnóstico del eje (Página 2467)

6.2.5.3

Agregar objeto tecnológico Eje de posicionamiento

Requisitos
Hay un proyecto creado con una CPU S7-1200.

Procedimiento
Para agregar un objeto tecnológico Eje de posicionamiento en el árbol del proyecto, proceda
del siguiente modo:
1. Abra la carpeta "CPU > Objetos tecnológicos" en el árbol del proyecto.
2. Haga doble clic en el comando "Agregar objeto".
Se abre el cuadro de diálogo "Agregar objeto".
3. Seleccione la tecnología "Motion Control".
4. Abra la carpeta "Motion Control".
5. Seleccione la versión tecnológica deseada en la columna "Versión".
6. Seleccione el objeto "TO_PositioningAxis".
7. En el campo de entrada "Nombre" introduzca el nombre del eje.
8. Para modificar los números asignados automáticamente al bloque de datos, seleccione la
opción "manual".
9. Para visualizar y añadir más información sobre el objeto tecnológico, haga clic en "Más
información".
10.Confirme la entrada realizada con "Aceptar".

Resultado
Se crea el nuevo objeto tecnológico y se guarda en la capeta "Objetos tecnológicos" del árbol
del proyecto.
En la carpeta "Bloques de programa" se crean automáticamente los bloques de organización
MC‑Servo [OB91] y MC‑Interpolator [OB92]. En estos bloques de organización se procesan
los objetos tecnológicos. En MC‑Servo [OB91] se realizan los cálculos del regulador de
posición. MC‑Interpolator [OB92] se encarga de la evaluación de las instrucciones de Motion
Control, la generación de consignas y la funcionalidad de vigilancia.

2354

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

6.2.5.4

Configurar el objeto tecnológico Eje de posicionamiento

Trabajando con el diálogo de configuración
Las propiedades del objeto tecnológico se configuran en la ventana de configuración. Para
abrir la ventana de configuración del objeto tecnológico, proceda del siguiente modo:
1. En el árbol del proyecto, abra el grupo correspondiente al objeto tecnológico que desea
utilizar.
2. Haga doble clic en el objeto "Configuración".
La configuración se divide en las siguientes categorías:
● Parámetros básicos
Los parámetros básicos contienen todos los parámetros que deben configurarse para un
eje listo para funcionar.
● Parámetros avanzados
Los parámetros avanzados contienen parámetros que se pueden adaptar al propio
accionamiento o bien a la instalación.

Símbolos de la ventana de configuración
Los símbolos que aparecen en la navegación local de la configuración muestran más detalles
sobre el estado de la configuración:
La configuración contiene valores predeterminados y está completa.
La configuración contiene exclusivamente valores predeterminados. Con ellos es posible utilizar el objeto tecnológico
sin más modificaciones.
La configuración contiene valores definidos por el usuario o adaptados automáticamente y está completa.
Todos los campos de entrada de la configuración contienen valores válidos y al menos un valor predeterminado ha sido
modificado.
La configuración es errónea o está incompleta.
Al menos un campo de entrada o una lista desplegable contiene un valor no válido. El campo o la lista desplegable en
cuestión se marca en rojo. Al hacer clic, el roll out con el aviso de error indica la causa del error.
La configuración es válida, pero contiene advertencias.
P. ej., solo se ha configurado un final de carrera por hardware. Dependiendo de la instalación, si un final de carrera por
hardware no está configurado ello puede representar un peligro. El campo o la lista desplegable en cuestión se marca
en amarillo.

Consulte también
Parámetros básicos (Página 2356)
Parámetros avanzados (Página 2369)

Observación de valores
Si hay una conexión online con la CPU, en los diálogos de configuración del objeto tecnológico
.
aparece el símbolo "Observar todos"

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2355

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
La función "Observar todos" ofrece las siguientes opciones:
● Comparación de los valores de arranque configurados del proyecto con los valores de
arranque de la CPU y los valores actuales
● Procesamiento directo de los valores actuales y de los valores de arranque del proyecto
● Detección y visualización inmediatas de errores de introducción con propuestas de
corrección
● Copia de seguridad de los valores actuales en el proyecto mediante aplicación manual en
el valor de arranque del proyecto

Símbolos y elementos de control
Si existe una conexión online con la CPU, se mostrarán los valores actuales de los parámetros.
Junto a los valores actuales de los parámetros aparecen los siguientes símbolos:
Símbolo

Descripción
El valor de arranque en la CPU es igual al valor de arranque configurado en el proyecto
El valor de arranque en la CPU es diferente al valor de arranque configurado en el
proyecto
No se puede realizar la comparación entre valor de arranque en la CPU y valor de arran‐
que configurado en el proyecto porque el módulo de CPU seleccionado no soporta esa
comparación.
No tiene mucho sentido comparar el valor, ya que en una de las configuraciones no es
relevante.
El botón permite visualizar para cada parámetro el valor de arranque de la CPU y el valor
de arranque del proyecto.

El valor actual y el valor de arranque en el proyecto pueden modificarse directamente y
cargarse a continuación en la CPU. En el caso de los parámetros directamente modificables,
la modificación del valor actual se aplica directamente a la CPU.

Parámetros básicos
Configuración - General
Configure las propiedades básicas del objeto tecnológico Eje de posicionamiento en la
ventana de configuración "General".

Nombre del eje
Defina en este campo el nombre del eje o del objeto tecnológico Eje de posicionamiento. El
objeto tecnológico aparece con ese nombre en el árbol del proyecto.

2356

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Accionamiento
Seleccione el tipo de conexión del accionamiento:
● PTO (Pulse Train Output)
El accionamiento se conecta a través de una salida del generador de impulsos, una salida
de habilitación opcional y una entrada de disponibilidad opcional.
● Conexión analógica del accionamiento
El accionamiento se conecta a través de una salida analógica, un encóder, una salida de
habilitación opcional y una entrada de disponibilidad opcional.
Se regula la posición de todos los movimientos del eje.
● PROFIdrive
El accionamiento se conecta mediante PROFINET/PROFIBUS. La comunicación entre el
controlador y el accionamiento se realiza a través de telegramas PROFIdrive.
Se regula la posición de todos los movimientos del eje.
Si selecciona "Conexión analógica del accionamiento" o "PROFIdrive", la navegación por la
configuración se amplía con elementos adicionales:
● Encóder
● Módulo
● Vigilancias de posición (vigilancia de posicionamiento, errores de arrastre y señal de
parada)
● Lazo de regulación
En las ventanas de configuración adicionales se configuran los encóders que se van a
conectar, así como las opciones resultantes para la regulación y la vigilancia de posición.

Unidad de medida de posición
En la lista desplegable, seleccione la unidad de medida deseada para el sistema de medida del
eje. La unidad de medida seleccionada se utiliza para una nueva configuración del objeto
tecnológico Eje de posicionamiento y la visualización de los datos actuales del eje.
Los valores en los parámetros de entrada (Position, Distance, Velocity, ...) de las instrucciones
de Motion Control también se refieren a esta unidad de medida.
Nota
Seleccione la conexión de accionamiento y la unidad de medida de la posición al principio de
la configuración del eje.
Al realizar modificaciones posteriores los parámetros se resetean o reinicializan, lo que
requiere controlar los parámetros de los diálogos de configuración.
Si fuera necesario, en el programa de usuario se deberán adaptar los valores de los
parámetros de entrada de las instrucciones Motion Control a la nueva unidad de medida.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2357

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Simulación
Seleccione si el accionamiento y el encóder se deben simular o no en la lista desplegable. La
simulación se puede seleccionar para la conexión analógica del accionamiento o para un
accionamiento PROFIdrive. La configuración hardware del accionamiento o encóder no es
necesaria para el modo de simulación (los posibles errores en la configuración del
accionamiento o el encóder se ignoran).
Aplicación: El accionamiento se simula, p. ej., para la puesta en marcha, y posteriormente se
opera con el hardware si se ha configurado.
El modo de operación "Simulación" se puede modificar durante el tiempo de ejecución del
programa de usuario mediante descarga seguida de "MC_Reset" con el parámetro "Restart"
= TRUE.
En el modo de simulación no se emite ninguna consigna al accionamiento ni se lee ningún
valor real del accionamiento/encóder. Los finales de carrera hardware y los sensores del punto
de referencia no tienen ningún efecto.
La tabla siguiente muestra las instrucciones de Motion Control con el comportamiento
adaptado en el modo de simulación:
Instrucción de Motion Control

Comportamiento en el modo de simulación

MC_Power

El eje se habilita directamente, sin esperar a que el
accionamiento responda.

MC_Home

Las órdenes de referenciado se ejecutan directa‐
mente, sin movimiento simulado del eje.

Los accionamientos PTO funcionan sin lazo de regulación. Para simular un accionamiento
PTO no se requiere ninguna función de simulación propia, en caso de que el accionamiento
PTO no esté conectado.

Consulte también
Salidas de la CPU relevantes para Motion Control (Página 2306)
Relación entre el tipo de señal y el sentido de desplazamiento (Página 2310)
Configuración - General (objeto tecnológico "Eje" V1...3) (Página 2558)

Configuración - accionamiento
Configuración - Accionamiento - PTO (Pulse Train Output)
En la ventana de configuración "Accionamiento", configure el generador de impulsos y la
habilitación y realimentación del accionamiento.

Interfaz de hardware
Los impulsos se transmiten a la etapa de potencia del accionamiento a través de salidas
digitales de asignación fija.
En las CPU con salidas de relé, la señal de impulso no puede emitirse en estas salidas porque
los relés no soportan las frecuencias de conmutación requeridas. Para poder utilizar el PTO

2358

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
(Pulse Train Output) en estas CPU, utilice una Signal Board con salidas digitales.
configuración de dispositivos de la CPU.

abre la

Nota
El PTO requiere la funcionalidad de un contador rápido (HSC). Para ello se utiliza un HSC
interno cuyo estado de contador no se puede evaluar.

Generador de impulsos
Elija en la lista desplegable el PTO (Pulse Train Output) para el mando del motor paso a paso
o del servomotor con interfaz de impulsos. Si no se han utilizado los generadores de impulsos
ni los contadores rápidos para otro fin en la configuración de dispositivos, la interfaz de
hardware podrá configurarse automáticamente. En este caso, el PTO elegido aparece
marcado en blanco en la lista desplegable.
Si está seleccionado PTO (Pulse Train Output), mediante el botón "Configuración del
dispositivo" se accede a la parametrización de las opciones de impulso en la configuración de
dispositivo de la CPU. Esto puede ser necesario en caso de conflicto si el PTO se utilizó en otro
lugar o el usuario modificó los parámetros.

Tipo de señal
Seleccione el tipo de señal en la lista desplegable. Están disponibles los tipos de señal
siguientes:
● PTO (Impulso A y sentido B)
Para controlar el motor paso a paso se utilizan una salida de impulso y una salida de sentido.
● PTO (oscilación hacia delante A y oscilación hacia atrás B)
Para controlar el motor paso a paso se utilizan una salida de impulso para el movimiento en
sentido positivo y otra para el movimiento en sentido negativo.
● PTO (A/B desfasado)
Los ciclos de las dos salidas de impulsos para la fase A y para la fase B tienen la misma
frecuencia.
En el lado del accionamiento se evalúa el periodo de las salidas de impulso como paso.
El desfase entre las fases A y B determina el sentido de movimiento.
● PTO (A/B desfasado - cuádruple)
Las salidas de impulsos para la fase A y para la fase B tienen la misma frecuencia.
En el lado del accionamiento se evalúan todos los flancos ascendentes y descendentes de
la fase A y de la fase B como pasos.
El desfase entre las fases A y B determina el sentido de movimiento.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2359

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
La tabla siguiente muestra los parámetros que deben configurarse dependiendo del tipo de
señal:
Tipo de señal/parámetro

Descripción

PTO (impulso A y sentido B)
Salida de impulso

En este campo, seleccione la salida de impulso para movi‐
mientos en sentido positivo.
Puede elegirse la salida a través de una dirección simbólica
o asignarse a una dirección absoluta.

Activar salida de sentido

Con esta opción se activa o desactiva la salida de sentido. Si
desactiva la salida de sentido, el sentido del movimiento que‐
da limitado.

Salida de sentido

En este campo, seleccione la salida para el sentido.
Puede elegirse la salida a través de una dirección simbólica
o asignarse a una dirección absoluta.

PTO (oscilación hacia delante A y oscilación hacia atrás B)
Salida de impulso ascendente

En este campo, seleccione la salida de impulso para movi‐
mientos en sentido positivo.
Puede elegirse la salida a través de una dirección simbólica
o asignarse a una dirección absoluta.

Salida de impulso descendente

En este campo, seleccione la salida de impulso para movi‐
mientos en sentido negativo.
Puede elegirse la salida a través de una dirección simbólica
o asignarse a una dirección absoluta.

PTO (A/B desfasado) / PTO (A/B desfasado - cuádruple)
Señal A

En este campo, seleccione la salida de impulso para las se‐
ñales de fase A.
Puede elegirse la salida a través de una dirección simbólica
o asignarse a una dirección absoluta.

Señal B

En este campo, seleccione la salida de impulso para las se‐
ñales de fase B.
Puede elegirse la salida a través de una dirección simbólica
o asignarse a una dirección absoluta.

Habilitación y realimentación del accionamiento
En esta área se configura la salida para la habilitación del accionamiento y la entrada para la
realimentación "Accionamiento listo" del accionamiento:
● Salida de habilitación
En este campo, seleccione la salida para la habilitación del accionamiento.
● Entrada de disponibilidad
En este campo, seleccione la entrada de disponibilidad para la realimentación
"Accionamiento listo" del accionamiento
La habilitación del accionamiento es controlada por la instrucción de Motion Control
"MC_Power" y otorga al accionamiento la habilitación de potencia. Si el accionamiento está
listo para ejecutar movimientos una vez recibida la habilitación del accionamiento, lo notificará
a la CPU con la señal "Accionamiento listo".

2360

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Si el accionamiento no dispone de interfaces de este tipo, no es necesario configurar los
parámetros. En este caso, elija para la entrada de disponibilidad el valor TRUE.

Configuración - Accionamiento - Conexión analógica del accionamiento
En la ventana de configuración "Accionamiento", configure la salida analógica y la habilitación
y realimentación del accionamiento.

Interfaz de hardware
La consigna de velocidad de giro se emite en la etapa de potencia del accionamiento a través
de una salida analógica asignada de forma fija.
Configure en esta área las entradas y salidas para el mando del accionamiento:
● Salida analógica
Elija en este campo la variable de PLC de la salida analógica a través de la que se
controlará el accionamiento.
Cuando se abre la función de autocompletar, se mostrarán todas las direcciones de salida
con 16 bits (WORD, INT, UINT). Para conectar datos mediante un bloque de datos también
se puede seleccionar la variable de un bloque de datos con el tipo de datos WORD.
También puede introducir una dirección (p. ej., QW20). Si la dirección es válida, se
generará el nombre "Axis_1_AnalogOutput" para esta dirección y se añadirá a la tabla de
variables. Para que la dirección sea válida debe tener asignado el tipo de datos adecuado
y un módulo HW. abre la configuración de dispositivos de la salida analógica.
● Selección salida de habilitación
Seleccione una salida disponible como salida de habilitación para la habilitación del
accionamiento en este campo.
● Selección entrada de disponibilidad
En este campo, seleccione la entrada de disponibilidad para la realimentación
"Accionamiento listo" del accionamiento
La habilitación del accionamiento es controlada por la instrucción de Motion Control
"MC_Power" y otorga al accionamiento la habilitación de potencia. Si el accionamiento está
listo para ejecutar movimientos una vez recibida la habilitación del accionamiento, lo notificará
a la CPU con la señal "Accionamiento listo". Si el accionamiento no dispone de interfaces de
este tipo, no es necesario configurar los parámetros. En este caso, elija para la entrada de
disponibilidad el valor TRUE.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2361

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Intercambio de datos con el accionamiento
Configure en esta área el escalado de la consigna de velocidad de giro:
● Velocidad de giro de referencia
La velocidad de giro de referencia del accionamiento es la velocidad con la que gira el
accionamiento cuando la salida analógica está al 100%. La velocidad de giro de referencia
debe configurarse en el accionamiento y aplicarse en la configuración del objeto
tecnológico.
El valor analógico emitido con el 100% depende del tipo de salida analógica. Así, por
ejemplo, en una salida analógica de ±10 V al 100% se emite el valor 10 V.
● Velocidad de giro máxima
Introduzca en este campo la velocidad de giro máxima del accionamiento.
La velocidad de giro máxima está limitada por el rango de valores de la salida analógica. En
el caso más sencillo, la velocidad de giro de referencia y la máxima son idénticas.
Las salidas analógicas se pueden sobremodular un 17 % aproximadamente. Si el
accionamiento permite sobremodulación, es posible utilizar una salida analógica como
valor límite en el rango de -117 % a 117 %.
● Invertir sentido de accionamiento
Active esta casilla de verificación para invertir el sentido de giro del accionamiento.

Consulte también
Conexión de datos de accionamientos con conexión analógica de accionamientos
(Página 2323)

Configuración - Accionamiento - PROFIdrive
Configure en la ventana de configuración "Accionamiento" la conexión de datos y los
parámetros del accionamiento PROFIdrive. abre la configuración de dispositivos del
accionamiento.

Accionamiento PROFIdrive (a partir de V6)
● Conexión de datos
En la lista desplegable, seleccione si la conexión de datos debe realizarse directamente con
la unidad de accionamiento o mediante un bloque de datos que pueda procesarse en el
programa de usuario.
● Accionamiento (con conexión de datos: "Accionamiento")
En el campo "Accionamiento", seleccione un accionamiento PROFIdrive previamente
configurado.
● Bloque de datos (con bloque de datos: "Bloque de datos")
Seleccione un bloque de datos previamente creado que contenga una estructura de
variables del tipo de datos "PD_TELx" ("x" representa el número de telegrama que se debe
utilizar).

2362

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Intercambio de datos con el accionamiento
Configure en esta área el intercambio de datos entre el accionamiento y el controlador:
● Telegrama del accionamiento (con conexión de datos: "Bloque de datos" no seleccionable)
Compruebe o seleccione el telegrama del accionamiento en la lista desplegable. Los datos
deben coincidir con la configuración de dispositivo del accionamiento.
● Dirección de entrada/salida
Los campos muestran la dirección de entrada o salida simbólica o absoluta del telegrama.
● Invertir sentido de accionamiento
Active esta casilla de verificación para invertir el sentido de giro del accionamiento.
● Aplicar automáticamente los valores del accionamiento durante la configuración (offline)
Active la casilla de verificación si desea aplicar los valores offline del accionamiento
"Velocidad de giro de referencia" y "Velocidad de giro máxima" en la configuración del
objeto tecnológico en el proyecto.
● Aplicar automáticamente los valores del accionamiento en runtime (online)
Active la casilla de verificación si desea aplicar los parámetros de accionamiento
"Velocidad de giro de referencia" y "Velocidad de giro máxima" en la CPU como valor de la
configuración del accionamiento. Los parámetros de accionamiento se aplican en el bus
después de (re)inicializar el objeto tecnológico y (re)arrancar el accionamiento y la CPU.
Alternativamente, puede sincronizar manualmente los siguientes parámetros:
– Velocidad de giro de referencia
Configure la velocidad de referencia como esté ajustada en la configuración del
accionamiento.
En el bus se transmite entonces el valor 16#4000 (16 bits, en telegrama 1), lo que
equivale al 100% de la velocidad de giro de referencia.
– Velocidad de giro máxima
En este campo, configure la velocidad de giro máxima del accionamiento.
La velocidad de giro máxima resulta de la configuración del accionamiento. Mediante el
bus se puede transferir como máximo del -200 % al +200 % de la velocidad de giro de
referencia. Con ello, la velocidad de giro máxima puede ser el doble de la velocidad de
giro de referencia.
Nota
La aplicación automática de los parámetros de accionamiento solo es posible con
accionamientos SINAMICS V4.x o superior. Para ello, en la ventana de datos debe estar
seleccionado "Accionamiento" como conexión de datos.

Consulte también
Conexión de datos del accionamiento PROFIdrive / encóder PROFIdrive (Página 2318)
Aplicación automática de los parámetros de accionamiento y encóder en el dispositivo
(Página 2314)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2363

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Configuración - Encóder
Acoplamiento del encóder
Dependiendo de la elección del acoplamiento del encóder, se configuran diferentes
parámetros en la ventana de configuración "Encóder". Existen los acoplamientos de encóder
siguientes:
● Encóder con contador rápido (HSC) (Página 2367)
● Encóder PROFIdrive en el PROFINET/PROFIBUS (encóder en accionamiento, encóder en
módulo tecnológico, encóder PROFIdrive) (Página 2365)

2364

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Configuración - Encóder - Encóder conectado a PROFINET/PROFIBUS
Selección del encóder
En el campo "Encóder PROFIdrive", elija el encóder PROFIdrive con PROFINET.
● Conexión de datos
En la lista desplegable, seleccione si la conexión de datos debe realizarse directamente al
encóder o mediante un bloque de datos que pueda procesarse en el programa de usuario.
● Encóder/bloque de datos PROFIdrive
En este campo de configuración, seleccione un encóder PROFIdrive ya configurado.
abre la configuración de dispositivos del encóder. Pueden seleccionarse los siguientes
encóders:
– Conexión con accionamiento (no en caso de conexión analógica del accionamiento)
El encóder está conectado al accionamiento. Las señales del encóder son evaluadas
por el accionamiento y se transfieren al controlador como parte del telegrama del
accionamiento (Tel 3 o 4) (no pueden utilizarse los encóder de los telegramas de otros
accionamientos).
El encóder se configura en la configuración del accionamiento PROFIdrive.
– Encóder conectado a módulo tecnológico (TM)
Seleccione un módulo tecnológico previamente configurado y el canal que deba
utilizarse. Para la selección solo se muestran módulos tecnológicos ajustados al modo
de operación "Lectura de posición para Motion Control".
Si no hubiera ningún módulo tecnológico disponible, cambie a la configuración del
dispositivo y agregue uno.
Para conocer los módulos tecnológicos adecuados para la lectura de posición para
Motion Control, consulte la documentación del módulo tecnológico y los datos del
catálogo.
– Encóder PROFIdrive conectado a PROFINET/PROFIBUS (PROFIdrive)
Seleccione un encóder previamente configurado en PROFINET/PROFIBUS en el
campo "Encóder PROFIdrive". Cambie a la vista de redes en la configuración del
dispositivo y agregue un encóder si no hubiera ninguno disponible.
Si como conexión de datos se ha seleccionado "Bloque de datos", debe elegirse aquí un
bloque de datos creado previamente que contenga una estructura de variables del tipo de
datos "PD_TELx" ("x" representa el número de telegrama que debe utilizarse a través del
cual está conectado el encóder). Se puede utilizar el encóder del telegrama del
accionamiento elegido (Tel 3 o 4) o uno diferente (Tel 81 u 83). abre el editor DB.

Intercambio de datos con el encóder
Configure en esta área el intercambio de datos entre el encóder y el controlador:
● Telegrama del encóder (con conexión de datos: "Bloque de datos" no seleccionable)
Seleccione el telegrama del encóder en la lista desplegable. Los datos deben coincidir con
la configuración del dispositivo.
● Dirección de entrada/salida
Los campos muestran la dirección de entrada o salida simbólica o absoluta del telegrama.
● Invertir sentido del encóder
Active esta casilla de verificación para invertir el valor real del encóder.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2365

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
● Aplicar automáticamente los valores del encóder durante la configuración (offline)
Active la casilla de verificación si desea aplicar los valores offline del encóder en la
configuración del objeto tecnológico en el proyecto.
● Aplicar automáticamente los valores del encóder en runtime (online)
Active la casilla de verificación si desea aplicar los parámetros de encóder en la CPU como
valor de la configuración del encóder. Los parámetros de encóder se aplican en el bus
después de (re)inicializar el objeto tecnológico y (re)arrancar el encóder y la CPU. El tipo de
encóder debe coincidir en la configuración del eje y en la configuración del encóder.
Nota
La aplicación automática de los parámetros de encóder solo es posible con accionamientos
PROFIdrive a partir del número de versión A16. Para ello, en la ventana de configuración
debe estar seleccionado "Encóder" como conexión de datos.
Para un encóder del accionamiento SINAMICS se necesita un número de versión > V4.x.
Si los parámetros del encóder no se aplican automáticamente, deberán sincronizarse
manualmente. Encontrará los parámetros que se deben calibrar en el capítulo Aplicación
automática de los parámetros de accionamiento y encóder en el dispositivo (Página 2314).

Tipo de encóder
Ajuste el tipo de encóder utilizado en el campo "Tipo de encóder". Son posibles los siguientes
tipos de encóder:
● Lineal incremental
● Lineal absoluto
● Rotativo incremental
● Rotativo absoluto
En función del tipo de encóder seleccionado, se configurarán parámetros diferentes. Configure
los parámetros siguientes según sea el tipo de encóder seleccionado:
Tipo de encóder/parámetro

Descripción

Lineal incremental
Distancia entre incrementos

Configure en este campo el recorrido entre dos incrementos
del encóder.

Resolución fina, bits en valor real incr. (Gx_XIST1)

Configure en este campo el número de bits para la resolución
fina dentro del valor real incremental (Gx_XIST1).

Lineal absoluto
Distancia entre incrementos

Configure en este campo el recorrido entre dos incrementos
del encóder.

Resolución fina, bits en valor real incr. (Gx_XIST1)

Configure en este campo el número de bits para la resolución
fina dentro del valor real incremental (Gx_XIST1).

Resolución fina, bits en valor real abs. (Gx_XIST2)

Configure en este campo el número de bits reservados para
el factor de multiplicación del valor absoluto de la resolución
fina (Gx_XIST2).

Rotativo incremental

2366

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Tipo de encóder/parámetro

Descripción

Incrementos por vuelta

Configure en este campo el número de incrementos que dis‐
crimina el encóder por vuelta.

Resolución fina, bits en valor real incr. (Gx_XIST1)

Configure en este campo el número de bits para la resolución
fina dentro del valor real incremental (Gx_XIST1).

Rotativo absoluto
Incrementos por vuelta

Configure en este campo el número de incrementos que dis‐
crimina el encóder por vuelta.

Número de vueltas

Configure en este campo el número de vueltas que puede
registrar el encóder absoluto.

Resolución fina, bits en valor real incr. (Gx_XIST1)

Configure en este campo el número de bits para la resolución
fina dentro del valor real incremental (Gx_XIST1).

Resolución fina, bits en valor real abs. (Gx_XIST2)

Configure en este campo el número de bits reservados para
el factor de multiplicación del valor absoluto de la resolución
fina (Gx_XIST2).

Consulte también
Conexión de datos del accionamiento PROFIdrive / encóder PROFIdrive (Página 2318)
Configurar módulos tecnológicos para Motion Control (Página 2416)

Configuración - Encóder - Encóder con contador rápido (HSC)
Selección del contador rápido (HSC)
Seleccione el contador rápido al que el encóder transfiere el valor real en el campo.
Compruebe los tiempos de filtrado de los dos tipos de entradas digitales utilizados para el
contador rápido. Los tiempos de filtrado han de ser lo suficientemente pequeños para que los
impulsos puedan capturarse de forma segura.

Interfaz HSC
En el campo "Modo de operación", elija el modo de operación del contador rápido.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2367

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Dependiendo del modo de operación se configurarán diferentes entradas:
Modo de operación/parámetro

Descripción

Bifásica
Generador de impulsos de reloj hacia delante

Elija en este campo la entrada para el contaje ascendente.
Puede elegirse la entrada a través de una dirección simbólica
o asignarse a una dirección absoluta.
Junto al campo de dirección se muestra la frecuencia y la
ubicación (integrada, Signal Board) de la entrada.

Generador de impulsos de reloj hacia atrás

Elija en este campo la entrada para el contaje descendente.
Puede elegirse la entrada a través de una dirección simbólica
o asignarse a una dirección absoluta.
Junto al campo de dirección se muestra la frecuencia y la
ubicación (integrada, Signal Board) de la entrada.

Contador A/B / contador A/B cuádruple
Generador de impulsos de reloj A

Seleccione la entrada para las señales de fase A en este
campo.
Puede elegirse la entrada a través de una dirección simbólica
o asignarse a una dirección absoluta.
Junto al campo de dirección se muestra la frecuencia y la
ubicación (integrada, Signal Board) de la entrada.

Generador de impulsos de reloj B

Seleccione la entrada para las señales de fase B en este
campo.
Puede elegirse la entrada a través de una dirección simbólica
o asignarse a una dirección absoluta.
Junto al campo de dirección se muestra la frecuencia y la
ubicación (integrada, Signal Board) de la entrada.

Invertir sentido del encóder
Active esta casilla de verificación para invertir el valor real del encóder.
Adoptar automáticamente los parámetros de encóder en el dispositivo
Esta selección no es posible si se utilizan encóders en el contador rápido (HSC).

Tipo de encóder
Seleccione el tipo de encóder en el campo "Tipo de encóder". Son posibles los siguientes tipos
de encóder:
● Lineal incremental
● Rotativo incremental

2368

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
En función del tipo de encóder seleccionado, se configurarán parámetros diferentes. Configure
los parámetros siguientes según sea el tipo de encóder seleccionado:
Tipo de encóder/parámetro

Descripción

Lineal incremental
Distancia entre incrementos

Configure en este campo el recorrido entre dos incrementos
del encóder.

Resolución fina, bits en valor real incr. (Gx_XIST1)

Configure en este campo el número de bits para la resolución
fina dentro del valor real incremental (Gx_XIST1).

Rotativo incremental
Incrementos por vuelta

Configure en este campo el número de incrementos que dis‐
crimina el encóder por vuelta.

Resolución fina, bits en valor real incr. (Gx_XIST1)

Configure en este campo el número de bits para la resolución
fina dentro del valor real incremental (Gx_XIST1).

Parámetros avanzados
Mecánica
Configuración - Mecánica - PTO (Pulse Train Output)
Configure las propiedades mecánicas del accionamiento en la ventana de configuración
"Mecánica".

Impulsos por vuelta del motor
En este campo, configure cuántos impulsos necesita el motor para una vuelta del motor.
Límites (independientes de la unidad de medida seleccionada):
● 0 < impulsos por vuelta del motor ≤ 2147483647

Movimiento de la carga por vuelta del motor
En este campo, configure qué distancia debe recorrer la mecánica de la instalación por cada
vuelta del motor.
Límites (independientes de la unidad de medida seleccionada):
● 0.0 < recorrido por vuelta del motor: ≤ 1.0e12

Sentido de giro permitido (versión de la tecnología V4 o superior)
Configure en este campo si la mecánica de su instalación debe moverse en ambos sentidos o
solo en sentido positivo o negativo.
Si no ha activado la salida de sentido en el modo "PTO (impulso A y sentido B)" del generador
de impulsos, la selección está limitada al sentido positivo o negativo.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2369

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Invertir sentido de dirección
Con la casilla de verificación "Invertir sentido" puede adaptar el controlador a la lógica de
sentido del accionamiento.
La lógica de sentido se invierte de acuerdo con el modo seleccionado para el generador de
impulsos:
● PTO (Impulso A y sentido B)
– 0 V en la salida de sentido ⇒ sentido de giro positivo
– 5 V/24 V en la salida de sentido ⇒ sentido de giro negativo
La tensión indicada depende del hardware empleado. Los valores mencionados no son
válidos para las salidas diferenciales de la CPU 1217.
● PTO (oscilación hacia delante A y oscilación hacia atrás B)
Las salidas "Salida de impulso descendente" y "Salida de impulso ascendente" se
intercambian.
● PTO (A/B desfasado)
Las salidas "Fase A" y "Fase B" se intercambian.
● PTO (A/B desfasado - cuádruple)
Las salidas "Fase A" y "Fase B" se intercambian.

Configuración - Mecánica - Conexión PROFIdrive/analógica del accionamiento
Configure las características mecánicas del accionamiento y del encóder en la ventana de
configuración "Mecánica".

Modo de montaje del encóder
En la lista desplegable, seleccione cómo está montado el encóder en el sistema mecánico.
Existen los siguientes modos de montaje del encóder:
● En el eje del motor
● Sistema de medida externo (solo encóders rotativos)

Parámetros de posición
Dependiendo del modo de montaje seleccionado del encóder se configurarán los siguientes
parámetros de posición:
Modo de montaje del encóder/parámetros de posición

Descripción

En el eje del motor
Movimiento de la carga por vuelta del motor

Configure el recorrido de la carga para una vuelta del motor
en este campo.

Sistema de medida externo

2370

Movimiento de la carga por vuelta del motor

Configure el recorrido de la carga para una vuelta del motor
en este campo.

Recorrido por vuelta del encóder

Configure en este campo el recorrido por vuelta del encóder
capturado por el sistema de medida externo.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Configuración - Módulo (solo conexión PROFIdrive/analógica del accionamiento)
Utilice el ajuste "Módulo" si desea limitar la zona de desplazamiento a un trayecto repetitivo en
función de la longitud/el ciclo del producto. La función Modulo solo es posible con el eje en el
modo de regulación de posición.
Si "Módulo" está activado, el valor de posición del objeto tecnológico se reproduce en un rango
de módulo repetitivo. El rango de módulo está definido por el valor inicial y la longitud.
Para limitar el valor de posición de un eje p. ej. a un movimiento circular completo, se define el
rango de módulo con el valor inicial = 0° y la longitud = 360°. Con una resolución de encóder
de 0,1°/número de incrementos, el valor de posición se reproduce en el rango de módulo de
0,0° a 359,9°. Si el eje de este ejemplo se desplaza a la posición 400°, se moverá a la posición
real 40° (400° hasta 360°).
Si "Módulo" está activado, especifique el sentido de desplazamiento en la instrucción
"MC_MoveAbsolute" de Motion Control mediante el parámetro de entrada "Direction". Están
disponibles los siguientes valores de parámetros:
● 0: El signo de la velocidad (parámetro "Velocity") determina el sentido de movimiento.
● 1: La posición de destino se alcanza en sentido positivo.
● 2: La posición de destino se alcanza en sentido negativo.
● 3: Partiendo de la posición actual, la tecnología selecciona el recorrido más corto hasta la
posición de destino.

Activar módulo
Marque la casilla de verificación "Activar módulo" para utilizar un sistema de referencia
repetitivo para el eje (p. ej., 0,0° a 359,9°).

Valor inicial de módulo
Defina en este campo la posición donde comienza el rango de módulo (p. ej., 0°).

Longitud de módulo
Defina en este campo la longitud del rango de módulo (p. ej., 360°).

Límites de posición
Requisitos del final de carrera de hardware
Utilice exclusivamente finales de carrera de hardware que permanezcan conectados
permanentemente durante la puesta en movimiento. Este estado de conmutación solo se debe
retirar una vez que se haya retornado al rango de desplazamiento admisible.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2371

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Consulte también
Configuración - Límites de posición (Página 2372)
Comportamiento del eje ante la respuesta de los límites de posición (Página 2374)
Modificación de la configuración de los límites de posición en el programa de usuario
(Página 2376)

Configuración - Límites de posición
En la ventana de configuración "Límites de posición" configure los finales de carrera por
hardware y por software del eje.

Activar final de carrera por hardware
Active con esta casilla de verificación la función de los finales de carrera por hardware inferior
y superior. Durante una aproximación al punto de referencia activa se pueden utilizar los
finales de carrera por hardware para invertir el sentido. Encontrará más detalles en la
descripción de la configuración para el referenciado.

Activar final de carrera por software
Active con esta casilla de verificación la función de los finales de carrera por software inferior
y superior.
Nota
Los finales de carrera por software activados solo son efectivos con el eje referenciado.

Entrada final de carrera HW inferior/superior
Seleccione la entrada digital para el final de carrera por hardware inferior o superior en la lista
desplegable.
En los ejes PTO la entrada debe soportar la notificación de alarmas. Si la conexión del
accionamiento es a través de PROFIdrive o analógica se obtiene el tiempo de reacción más
corto con entradas aptas para alarmas. Otra opción es asignar las entradas a la memoria
imagen de proceso "TPA OB Servo" para obtener un tiempo de reacción en el tiempo de ciclo
del "TPA OB Servo". No se recomienda asignarlas a la memoria imagen de proceso estándar
del bloque de organización OB1, ya que con ello se obtienen los tiempos de reacción más
largos.

2372

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Como entradas con capacidad de alarma para los finales de carrera por hardware están
disponibles las entradas digitales de CPU On-board y las entradas digitales de una Signal
Board enchufada.
Nota
Las entradas digitales están ajustadas de forma estándar a un tiempo de filtración de 6,4 ms.
Al utilizar como final de carrera por hardware pueden producirse deceleraciones no deseadas.
En dicho caso reduzca el tiempo de filtración para las salidas digitales correspondientes.
El tiempo de filtración se puede ajustar en la configuración de dispositivos de las entradas
digitales, en "Filtros de entrada".

Selección de nivel
Elija en la lista desplegable el nivel de señal activo en la CPU con el final de carrera por
hardware alcanzado.
● Selección "Nivel inferior" (contacto NC)
0 V (FALSE) en la entrada de CPU significa que se ha alcanzado el final de carrera por
hardware
● Selección "Nivel superior" (contacto NA)
5 V / 24 V (TRUE) en la entrada de la CPU significa que se ha alcanzado el final de carrera
por hardware (la tensión indicada depende del hardware empleado)

Posición final carrera SW inferior/superior
En estos campos se especifica el valor de posición de los finales de carrera por software
inferior y superior.
Límites (independientes de la unidad de medida seleccionada):
● -1.0E12 ≤ Posición final carrera SW inferior ≤ 1.0E12
● -1.0E12 ≤ Posición final carrera SW superior ≤ 1.0E12
El valor del final de carrera por software superior debe ser mayor o igual al valor del final de
carrera por software inferior.

Consulte también
Requisitos del final de carrera de hardware (Página 2371)
Comportamiento del eje ante la respuesta de los límites de posición (Página 2374)
Modificación de la configuración de los límites de posición en el programa de usuario
(Página 2376)
Configuración - Referenciar - Activa (Página 2385)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2373

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Comportamiento del eje ante la respuesta de los límites de posición
Comportamiento del eje al alcanzar el final de carrera por hardware
Al alcanzar un final de carrera por hardware, el eje tiene diferentes comportamientos en
función de la conexión del accionamiento:
● Conexión del accionamiento a través de PROFIdrive/salida analógica
Al alcanzar un final de carrera por hardware, el eje se bloquea y, en función de la
configuración del accionamiento, se frena y se para. En el accionamiento debe
seleccionarse una deceleración lo suficientemente grande para que el eje se detenga de
forma segura antes del tope mecánico.
● Conexión del accionamiento a través de PTO (Pulse Train Output)
Al alcanzar el final de carrera por hardware el eje se detiene con la deceleración de parada
de emergencia configurada hasta pararse por completo. Debe seleccionarse una
deceleración de parada de emergencia lo suficientemente grande para que el eje se
detenga de forma segura antes del tope mecánico. La siguiente representación muestra el
comportamiento del eje después de alcanzar el final de carrera por hardware:
_Y_





V

=RQDGH
GHVSOD]DPLHQWRDGPLVLEOH




V

7RSHPHF£QLFR

①
②

)LQDOGHFDUUHUD
+:LQIHULRU

)LQDOGHFDUUHUD
+:VXSHULRU

7RSHPHF£QLFR

PTO: el eje frena con la deceleración de parada de emergencia configurada.
PROFIdrive o interfaz de accionamiento analógica: el eje se bloquea y frena con la dece‐
leración configurada en el accionamiento hasta pararse.
Área en el que los finales de carrera por hardware notifican el estado "alcanzado".

En la instrucción de Motion Control causante, en "MC_Power" y en las variables del objeto
tecnológico se muestra el error "final de carrera por hardware alcanzado". En el anexo
encontrará instrucciones para eliminar el error, en el apartado "Lista de ErrorIDs y ErrorInfos"

2374

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Comportamiento del eje al alcanzar el final de carrera por hardware
Con los finales de carrera por software activos, cualquier movimiento en curso se detiene en
la posición del final de carrera por software. El eje es frenado con la deceleración de parada de
emergencia configurada.
La siguiente representación muestra el comportamiento del eje hasta alcanzar el final de
carrera por software:
UHDGHWUDEDMR

_Y_





V
LQIHULRU
)LQDOGHFDUUHUDSRU
VRIWZDUH

①

VXSHULRU
)LQDOGHFDUUHUDSRU
VRIWZDUH

El eje frena con la deceleración configurada hasta pararse.

En la instrucción de Motion Control causante, en "MC_Power" y en las variables del objeto
tecnológico se muestra el error "Final de carrera por software alcanzado". En el anexo
encontrará instrucciones para eliminar el error, en el apartado "Lista de ErrorIDs y ErrorInfos".
Al sobrepasar un final de carrera por software, el eje tiene diferentes comportamientos en
función de la conexión del accionamiento:
● Conexión del accionamiento a través de PROFIdrive/salida analógica
Al sobrepasar un final de carrera por software, el eje se bloquea y, en función de la
configuración del accionamiento, se frena y se para.
● Conexión del accionamiento a través de PTO (Pulse Train Output)
El comportamiento del eje al sobrepasar un final de carrera por software puede consultarse
en los capítulos "Finales de carrera por software y el proceso de referenciación
(Página 2479)" y "Final de carrera por software y modificaciones en la dinámica
(Página 2484)".
Utilice adicionalmente finales de carrera por hardware cuando detrás de los finales de carrera
por software se encuentre un tope mecánico con riesgo de que se pueda producir un daño
mecánico.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2375

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Consulte también
Requisitos del final de carrera de hardware (Página 2371)
Configuración - Límites de posición (Página 2372)
Modificación de la configuración de los límites de posición en el programa de usuario
(Página 2376)

Modificación de la configuración de los límites de posición en el programa de usuario
Los siguientes parámetros de configuración pueden modificarse en la CPU mientras se
ejecuta el programa de usuario:

Fin de carrera de hardware
También puede activar y desactivar los finales de carrera de hardware durante el tiempo de
ejecución del programa de usuario. Para ello utilice la siguiente variable del objeto tecnológico:
● <Nombre de eje>.PositionLimits_HW.Active
Para saber cuándo tienen efecto las modificaciones del parámetro de configuración, consulte
en el anexo la descripción de las variables del objeto tecnológico (Página 2512).

Fin de carrera por software
También puede activar y desactivar los finales de carrera por software y modificar sus valores
de posición durante el tiempo de ejecución del programa de usuario. Para ello utilice las
siguientes variables del objeto tecnológico:
● <Nombre de eje>.PositionLimits_SW.Active
para activar y desactivar los finales de carrera por software
● <Nombre de eje>.PositionLimits_SW.MinPosition
para modificar la posición del final de carrera por software inferior
● <Nombre de eje>.PositionLimits_SW.MaxPosition
para modificar la posición del final de carrera por software superior
Para saber cuándo tienen efecto las modificaciones de los parámetros de configuración,
consulte en el anexo la descripción de las variables del objeto tecnológico (Página 2512).

Consulte también
Lista de compatibilidad de las variables V1...3 <-> V4...5 (Página 2339)
Requisitos del final de carrera de hardware (Página 2371)
Configuración - Límites de posición (Página 2372)
Comportamiento del eje ante la respuesta de los límites de posición (Página 2374)

2376

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Dinámica
Configuración - Dinámica - General
En la ventana de configuración "Dinámica General" configure la velocidad máxima, la
velocidad de arranque/parada, la aceleración y deceleración, así como la limitación de tirones
del eje (a partir del objeto tecnológico Eje de posicionamiento V2).

Unidad de los límites de velocidad
En la lista desplegable, seleccione la unidad física con la que desee fijar los límites de
velocidad. La unidad aquí ajustada es independiente de la unidad de medida ajustada en "
Configuración > Parámetros básicos > General" y su función es exclusivamente la de
simplificar la entrada. P. ej., existe la posibilidad de introducir la velocidad máxima como valor
de velocidad del motor en 1/min.
Nota
Errores de redondeo
Si en la lista desplegable "Unidad de los límites de velocidad" selecciona una unidad diferente
de la de "Configuración > Parámetros básicos > General", tenga en cuenta que pueden
producirse errores de redondeo.

Velocidad máxima / Velocidad de arranque/parada
Defina en estos campos la velocidad máxima admisible y la velocidad de arranque/parada del
eje. La velocidad de arranque/parada es la mínima velocidad admisible del eje y solo se puede
configurar si la conexión del accionamiento es mediante PTO (Pulse Train Output).
En caso de conexión del accionamiento mediante PROFIdrive o salida analógica, la velocidad
de arranque/parada se ajusta a 0 de forma fija. En una conexión a través de PROFdrive o
salida analógica, la velocidad máxima es de 1.0E12 de la unidad de medida seleccionada
(p. ej., mm/s, °/s, etc.).
Objeto tecnológico Eje de posicionamiento (PTO) a partir de V4
Signal Board

Velocidad [impulso/s]

20 kHz

1 ≤ velocidad de arranque/parada ≤ 20 000
1 ≤ velocidad máxima ≤ 20 000

200 kHz

1 ≤ velocidad de arranque/parada ≤ 200 000
1 ≤ velocidad máxima ≤ 200 000

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2377

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Salida integrada de la CPU

Velocidad [impulso/s]

100 kHz

1 ≤ velocidad de arranque/parada ≤ 100 000
1 ≤ velocidad máxima ≤ 100 000

20 kHz

1 ≤ velocidad de arranque/parada ≤ 20 000
1 ≤ velocidad máxima ≤ 20 000

CPU 1217 1 MHz

1 ≤ velocidad de arranque/parada ≤ 1000 000
1 ≤ velocidad máxima ≤ 1000 000

Los límites para el objeto tecnológico Eje de posicionamiento < V4 se pueden consultar en el
anexo Salidas de la CPU relevantes para Motion Control (versión tecnológica V1...3)
(Página 2554)
El valor de la velocidad máxima debe ser mayor o igual al valor de la velocidad de arranque/
parada.
Los valores límite para otras unidades de medida deben ser convertidos por el usuario
conforme a la mecánica dada.

Aceleración / deceleración - Tiempo de aceleración/tiempo de deceleración
Ajuste la aceleración deseada en los campos "Tiempo de aceleración" o "Aceleración". La
deceleración deseada se puede ajustar en los campos "Tiempo deceleración" o
"Deceleración".
La relación entre el tiempo de aceleración y la aceleración, así como entre el tiempo de
deceleración y la deceleración se expresa a través de las siguientes ecuaciones:

Tiempo de
posicionamiento =

Tiempo de
deceleración =

Velocidad máxima - Velocidad de arranque/parada
Aceleración

Velocidad máxima - Velocidad de arranque/parada
Retardo

Las órdenes de movimiento lanzadas por el programa de usuario se ejecutan con la
aceleración / deceleración seleccionada.
Puede consultar los valores límite de la aceleración y deceleración para conexión del
accionamiento mediante PTO (Pulse Train Output) en el capítulo Salidas de la CPU relevantes
para Motion Control (Página 2306)
Nota
Las modificaciones realizadas en los límites de velocidad ("Velocidad de arranque/parada", así
como "Velocidad máxima") afectan a los valores de aceleración y deceleración del eje. Los
tiempos de aceleración y deceleración se conservan.

2378

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Activación de la limitación de tirones, objeto tecnológico Eje de posicionamiento (a partir de V2)
Active la limitación de tirones con esta casilla de verificación.
Al activar la limitación de tirones, la aceleración y deceleración del eje no se modifican de forma
abrupta, sino que se adaptan suavemente en función del tirón o los tiempos de redondeo
ajustados.
Nota
A partir de V4, la casilla de verificación ya no se muestra como parámetro en el bloque de datos
tecnológico. Si la casilla de verificación se desactiva, el valor de tirón se pone a 0.0.

Tiempo de redondeo/tirón, objeto tecnológico Eje de posicionamiento (a partir de V2)
Los parámetros de limitación de tirones pueden introducirse en el campo "Tiempo de
redondeo" u opcionalmente en el campo "Tirón":
● Ajuste el tirón deseado para la rampa de aceleración y deceleración en el campo "Tirón".
● Ajuste el tiempo de redondeo deseado para la rampa de aceleración en el campo "Tiempo
de redondeo".
Nota
Tiempo de redondeo V2...3
El tiempo de redondeo ajustado y visible en la configuración sólo es válido para la rampa
de aceleración.
En el caso de que los valores de aceleración y deceleración sean distintos, el tiempo de
redondeo de la rampa de deceleración se calcula y se utiliza conforme al tirón de la rampa
de aceleración. (Ver también Comportamiento del eje al utilizar la limitación de tirones
(Página 2382)
El tiempo de redondeo de la deceleración se adapta del siguiente modo:
● Aceleración > deceleración
En la rampa de deceleración se aplica un tiempo de redondeo menor que en la rampa
de aceleración.
● Aceleración < deceleración
En la rampa de deceleración se aplica un tiempo de redondeo mayor que en la rampa
de aceleración.
● Aceleración = deceleración
Los tiempos de redondeo de la rampa aceleración y de la rampa de deceleración son
iguales.
La relación entre los tiempos de redondeo y el tirón se expresa a través de las siguientes
ecuaciones:
7LHPSRGHUHGRQGHR UDPSDGHDFHOHUDFLµQ  

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

$FHOHUDFLµQ
7LUµQ

2379

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

7LHPSRGHUHGRQGHR UDPSDGHGHFHOHUDFLµQ  

'HFHOHUDFLµQ
7LUµQ

Las órdenes de movimiento lanzadas por el programa de usuario se ejecutan con el tirón
seleccionado.
Puede consultar los valores límite del tirón para conexión del accionamiento mediante PTO
(Pulse Train Output) en el capítulo Salidas de la CPU relevantes para Motion Control
(Página 2306).
Para los accionamientos PROFIdrive y los accionamientos con interfaz analógica, el valor
límite es 1E12.

Consulte también
Comportamiento del eje al utilizar la limitación de tirones (Página 2382)
Componentes de hardware para Motion Control (Página 2304)
Salidas de la CPU relevantes para Motion Control (Página 2306)
Configuración - Dinámica - Parada de emergencia (Página 2380)
Modificar la configuración de los valores de dinámica en el programa de usuario (Página 2383)

Configuración - Dinámica - Parada de emergencia
Configure la deceleración de parada de emergencia del eje en la ventana de configuración
"Dinámica Parada de emergencia". En caso de fallo y al bloquear el eje con la instrucción
"MC_Power" de Motion Control (parámetro de entrada StopMode = 0 o 2), el eje se para con
esta deceleración.

Velocidad
Para una mejor perspectiva, en esta área se vuelven a mostrar los valores de velocidad
parametrizados en la ventana de configuración "Dinámica General".

Deceleración
Ajuste el valor de deceleración para la parada de emergencia en los campos "Deceleración de
parada de emergencia" o "Tiempo de deceleración de parada de emergencia".
La relación entre el tiempo de deceleración de parada de emergencia y la deceleración de
parada de emergencia se expresa a través de la siguiente ecuación:

Tiempo de deceleración de
parada de emergencia =

Velocidad máxima - velocidad de arranque y parada
Deceleración de parada de emergencia

La deceleración de parada de emergencia debe elegirse lo suficientemente grande para que
el eje pueda pararse a tiempo en caso de emergencia (p. ej. al alcanzar el final de carrera por
hardware, antes de alcanzar el tope mecánico).

2380

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Al seleccionar la deceleración de parada de emergencia ésta se debe basar en la velocidad
máxima configurada del eje.
Límites:
Los límites mencionados a continuación se refieren a la unidad de medida "Impulso/s2".
● a partir del firmware V3 de la CPU
0.005 ≤ deceleración de parada de emergencia ≤ 9.5E9
● Firmware V1...2 de la CPU
0.28 ≤ deceleración de parada de emergencia ≤ 9.5E9
Los límites para otras unidades de medida se deben convertir conforme a la mecánica dada.
Puede consultar los valores límite del tirón para conexión del accionamiento mediante PTO
(Pulse Train Output) en el capítulo Salidas de la CPU relevantes para Motion Control
(Página 2306).
Para los accionamientos PROFIdrive y los accionamientos con interfaz de accionamiento
analógica, el valor límite es 1.0E12.

Consulte también
Configuración - Dinámica - General (Página 2377)
Modificar la configuración de los valores de dinámica en el programa de usuario (Página 2383)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2381

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Comportamiento del eje al utilizar la limitación de tirones
Al activar la limitación de tirones, la aceleración y deceleración del eje no se modifican de forma
abrupta, sino que se adaptan suavemente en función del tirón o los tiempos de redondeo
ajustados. La siguiente representación muestra detalladamente el comportamiento del eje con
y sin limitación de tirones activada:
Sin limitación de tirones

Con limitación de tirones
Y

Y

W

W
D

D





W

W





M

M





W

W

W

WUX WD

WUG WG

W
WUX
WD

t

Eje temporal

v

Velocidad

2382

W

W

WUG
WG

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
a

Aceleración

j

Tirón

tru

Tiempo aceleración

ta

Tiempo para acelerar el eje

trd

Tiempo deceleración

td

Tiempo para decelerar el eje

t1

Tiempo de redondeo de la rampa de aceleración

t2

Tiempo de redondeo de la rampa de deceleración

En el ejemplo se representa un movimiento de desplazamiento en el que el valor de la
deceleración ② es dos veces más grande que el de la aceleración ①. De aquí se deduce un
tiempo de deceleración trd que sólo representa la mitad del tiempo de aceleración tru.
Sin limitación de tirones la aceleración ① y el retraso ② se modifican de forma abrupta. Con
la limitación de tirones activada, la aceleración ③ y la deceleración ④ se modifican de forma
suave. Dado que el tirón es válido para todo el movimiento, la pendiente es idéntica para el
aumento y para la disminución de la aceleración y de la deceleración.
Sin limitación de tirones, los valores de tirón (j) son infinitamente grandes ⑤ en el momento del
cambio. Con limitación de tirones el tirón se limita al valor configurado ⑥.
El tiempo de redondeo t1 indicado en la configuración se aplica para la rampa de aceleración.
El tiempo de redondeo de la rampa de deceleración t2 se calcula a partir del valor configurado
para el tirón y de la deceleración configurada.

Consulte también
Configuración - Dinámica - General (Página 2377)

Modificar la configuración de los valores de dinámica en el programa de usuario
Los siguientes parámetros de configuración pueden modificarse en la CPU mientras se
ejecuta el programa de usuario:

Aceleración y deceleración
Puede modificar los valores de aceleración y deceleración incluso durante el tiempo de
ejecución del programa de usuario. Para ello utilice las siguientes variables del objeto
tecnológico:
● <Nombre de eje>.DynamicDefaults.Acceleration
para modificar la aceleración
● <Nombre de eje>.DynamicDefaults.Deceleration
para modificar la deceleración
Para saber cuándo tienen efecto las modificaciones de los parámetros de configuración,
consulte en el anexo la descripción de las variables del objeto tecnológico (Página 2512).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2383

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Deceleración de parada de emergencia
Puede modificar el valor de la deceleración de parada de emergencia incluso durante el tiempo
de ejecución del programa de usuario. Para ello utilice la siguiente variable del objeto
tecnológico:
● <Nombre de eje>.DynamicDefaults.EmergencyDeceleration
Para saber cuándo tienen efecto las modificaciones del parámetro de configuración, consulte
en el anexo la descripción de las variables del objeto tecnológico.
Nota
Una vez modificado este parámetro, dado el caso deberán modificarse también las posiciones
de los finales de carrera de hardware, así como otros ajustes relevantes para la seguridad.

Limitación de tirones
También puede activar y desactivar la limitación de tirones durante el tiempo de ejecución del
programa de usuario y modificar el valor del tirón. Para ello, utilice la variable del objeto
tecnológico <Nombre del eje>.DynamicDefaults.Jerk. En los objetos tecnológicos < V4, la
variable <Nombre del eje>.Config.DynamicDefaults.JerkActive debe estar ajustada a TRUE
para que se active la limitación de tirones y, así se haga efectiva o visible la modificación del
tirón.
Para ejes PTO se aplica lo siguiente:
● Si introduce para el tirón un valor ≥ 0.004 impulsos/s3, la limitación de tirón estará activada
con el valor introducido.
● Si introduce para el tirón un valor < 0.004 impulsos/s3, la limitación estará desactivada.
En ejes con regulación de posición la limitación de tirón está desactivada con un valor 0.0 y
activada con valores > 0.0.
Para saber cuándo tienen efecto las modificaciones del parámetro de configuración, consulte
en el anexo la descripción de las variables del objeto tecnológico.

Consulte también
Cambio de configuración de los valores dinámicos en el programa de usuario (objeto
tecnológico "Eje" V1...3) (Página 2566)
Lista de compatibilidad de las variables V1...3 <-> V4...5 (Página 2339)
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Configuración - Dinámica - General (Página 2377)
Configuración - Dinámica - Parada de emergencia (Página 2380)

2384

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Referenciar (a partir del objeto tecnológico Eje de posicionamiento V2)
Configuración - Referenciar - Activa
En la ventana de configuración "Referenciado - Activo", configure los parámetros que se
necesitan para el referenciado activo. El referenciado activo se inicia a través de la instrucción
de Motion Control "MC_Home" con el parámetro de entrada utilizado "Mode" = 3.

Selección del modo de referenciado (solo conexión del accionamiento mediante PROFIdrive V5 o
superior)
Elija uno de los modos de referenciado siguientes:
● Utilizar marca cero a través de telegrama PROFIdrive y detector de proximidad
● Utilizar marca cero a través de telegrama PROFIdrive
● Utilizar marca de referencia a través de entrada digital
Si ha seleccionado la conexión al accionamiento a través de PTO (Pulse Train Output) o salida
analógica con HSC como encóder, solo estará disponible el modo de referenciado "Utilizar
marca de referencia a través de entrada digital".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2385

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Entradas digitales
Configure en esta área el sensor del punto de referencia:
● Entrada del sensor del punto de referencia
En este campo, seleccione la entrada digital para el sensor del punto de referencia.
Nota
Las entradas digitales están ajustadas de forma estándar a un tiempo de filtración de
6,4 ms.
La utilización como sensor del punto de referencia puede provocar deceleraciones no
deseadas y, con ello, imprecisiones. En determinadas circunstancias, y dependiendo de la
velocidad de referenciado y la dimensión del sensor del punto de referencia, puede que no
se reconozca el punto de referencia. El tiempo de filtración se puede ajustar en la
configuración de dispositivos de las entradas digitales, en "Filtros de entrada".
Se debe seleccionar un tiempo de filtración menor que la duración del impulso de la señal
de entrada que debe detectarse y que se utiliza como sensor del punto de referencia.
Para conexión de accionamiento mediante PTO (Pulse Train Output):
La entrada debe ser apta para alarmas. Como entradas para el sensor del punto de
referencia están disponibles las entradas de CPU On-board y las entradas de una Signal
Board insertada.
● Selección de nivel
Seleccione en la lista desplegable el nivel del sensor del punto de referencia con el que se
debe referenciar.
● Permitir inversión de sentido en el final de carrera por hardware
Active esta casilla de verificación si desea utilizar los finales de carrera por hardware como
levas de inversión para la aproximación al punto de referencia. Los finales de carrera por
hardware deben estar activados para poder realizar la inversión del sentido (al menos debe
estar configurado el final de carrera por hardware en el sentido de aproximación).
Si se llega al final de carrera por hardware durante el referenciado activo, el eje frena con
la deceleración configurada (no con la deceleración de parada de emergencia) y realiza una
inversión del sentido. Entonces el sensor del punto de referencia se busca en la dirección
contraria.
Si esta inversión del sentido no está activada y el eje alcanza el final de carrera por
hardware durante el referenciado activo, la aproximación al punto de referencia se cancela
con un error y el eje se frena con la deceleración de parada de emergencia.
Nota
Dentro de lo posible, asegúrese de que la máquina no golpee contra un tope mecánico
durante una inversión del sentido, adoptando para ello una de las siguientes medidas:
● Mantenga una velocidad de aproximación reducida.
● Aumente la aceleración / deceleración configuradas.
● Aumente la distancia entre el final de carrera por hardware y el tope mecánico.

2386

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Sentido de aproximación / referenciado
Con el sentido seleccionado se determina el sentido de aproximación durante el referenciado
activo a fin de buscar el sensor del punto de referencia, así como el sentido de referenciado.
El sentido de referenciado determina el sentido en el que el eje se aproxima al lado configurado
del sensor del punto de referencia para realizar el referenciado.

Lado del sensor del punto de referencia
Indique aquí si el eje debe ser referenciado por el lado inferior o superior al sensor del punto
de referencia.

Velocidad de aproximación
Especifique en este campo la velocidad con la que se buscará el sensor del punto de referencia
durante la marcha correspondiente.
Límites (independientes de la unidad de medida seleccionada):
● Velocidad de arranque/parada ≤ velocidad de aproximación ≤ velocidad máxima

Velocidad de referenciado
Especifique en este campo la velocidad con la que debe realizarse el posicionamiento hacia el
sensor del punto de referencia para el referenciado.
Límites (independientes de la unidad de medida seleccionada):
● Velocidad de arranque/parada ≤ velocidad de referenciado ≤ velocidad máxima

Offset del punto de referencia
En este campo se puede indicar el offset del punto de referencia si la posición de referencia
deseada difiere de la posición del sensor del punto de referencia.
Si el valor es diferente de 0, el eje ejecuta las siguientes acciones después del referenciado
usando el sensor del punto de referencia:
1. Movimiento del eje a la velocidad de referenciado por el valor del offset del punto de
referencia
2. Después de extraer el offset del punto de referencia, el eje se encuentra en la posición del
punto de referencia que se ha indicado en el parámetro de entrada "Position" de la
instrucción de Motion Control "MC_Home".
Límites (independientes de la unidad de medida seleccionada):
● -1.0e12 ≤ offset del punto de referencia: ≤ 1.0e12

Posición del punto de referencia
Como posición del punto de referencia se utiliza la posición parametrizada en la instrucción de
Motion Control "MC_Home".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2387

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Configuración - Referenciar - Pasiva
En la ventana de configuración "Referenciado - Pasivo", configure los parámetros que se
necesitan para el referenciado pasivo.
En el referenciado pasivo, el movimiento debe ser activado por parte del usuario (p. ej.,
mediante una orden de desplazamiento del eje). El referenciado pasivo se inicia a través de la
instrucción de Motion Control "MC_Home" con el parámetro de entrada utilizado "Mode" = 2.

Selección del modo de referenciado (solo conexión del accionamiento mediante PROFIdrive V5 o
superior)
Elija uno de los modos de referenciado siguientes:
● Utilizar marca cero a través de telegrama PROFIdrive y detector de proximidad
El sistema comprueba si se llega al detector de proximidad. Una vez que se ha llegado al
detector de proximidad y que este se abandona en el sentido de referenciado
parametrizado, se activa el registro de la marca cero mediante el telegrama PROFIdrive.
Una vez que se ha alcanzado la marca cero en el sentido preseleccionado, la posición real
del objeto tecnológico se pone a la posición de la marca de referencia.
● Utilizar marca cero a través de telegrama PROFIdrive
El sistema activa el registro de la marca cero en cuanto el valor real del objeto tecnológico
se mueve en el sentido de referenciado parametrizado. Una vez que se ha alcanzado la
marca cero en el sentido de referenciado preseleccionado, la posición real del objeto
tecnológico adopta la posición de la marca de referencia.
● Utilizar marca de referencia a través de entrada digital
El sistema comprueba el estado de la entrada digital en cuanto el valor real del eje o
encóder se mueve en el sentido de referenciado parametrizado. Una vez que se ha
alcanzado la marca de referencia (activación de la entrada digital) en el sentido de
referenciado preseleccionado, la posición real del objeto tecnológico se pone a la posición
de la marca de referencia.
Si ha seleccionado la conexión del accionamiento a través de PTO (Pulse Train Output), se
utilizará de forma estándar una marca de referencia a través de una entrada digital.

2388

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Entradas digitales
Configure en esta área el sensor del punto de referencia:
● Entrada del sensor del punto de referencia
En este campo, seleccione la entrada digital para el sensor del punto de referencia. La
entrada debe ser apta para alarmas. Como entradas para el sensor del punto de referencia
están disponibles las entradas de CPU On-board y las entradas de una Signal Board
insertada.
Nota
Las entradas digitales están ajustadas de forma estándar a un tiempo de filtración de
6,4 ms.
La utilización como sensor del punto de referencia puede provocar deceleraciones no
deseadas y, con ello, imprecisiones. En determinadas circunstancias, y dependiendo de la
velocidad de referenciado y la dimensión del sensor del punto de referencia, puede que no
se reconozca el punto de referencia. El tiempo de filtración se puede ajustar en la
configuración de dispositivos de las entradas digitales, en "Filtros de entrada".
Se debe seleccionar un tiempo de filtración menor que la duración del impulso de la señal
de entrada que debe detectarse y que se utiliza como sensor del punto de referencia.
● Selección de nivel
Seleccione en la lista desplegable el nivel del sensor del punto de referencia con el que se
debe referenciar.

Lado del sensor del punto de referencia
Indique aquí si el eje debe ser referenciado por el lado inferior o superior al sensor del punto
de referencia.

Posición del punto de referencia
Como posición del punto de referencia se utiliza la posición parametrizada en la instrucción de
Motion Control "MC_Home".
Nota
Si el referenciado pasivo se efectúa sin una orden de desplazamiento del eje (eje en reposo),
el referenciado se lleva a cabo en el siguiente flanco ascendente o descendente del sensor del
punto de referencia.

Marcha - referenciación activa
El referenciado activo se inicia con la instrucción de Motion Control "MC_Home" (parámetro de
entrada Mode = 3). El parámetro de entrada "Position" indica aquí la coordenada absoluta del
punto de referencia. El referenciado activo también puede iniciarse a través del panel de
mando del eje para fines de prueba.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2389

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
La siguiente representación muestra un ejemplo del desarrollo de una búsqueda activa del
punto de referencia con los siguientes parámetros de configuración:
● "Modo de toma de referencia" = "Utilizar marca de referencia a través de entrada digital"
● "Sentido de aproximación / referenciado" = "sentido positivo"
● "Lado del sensor del punto de referencia" = "Lado superior"
● Valor del "offset del punto de referencia" > 0
Y

9HORFLGDGGHDSUR[LPDFLµQ

9HORFLGDGGHUHIHUHQFLDFLµQ

V

3RVLFLµQGHOSXQWRGHUHIHUHQFLD
2IIVHWGHOSXQWRGHUHIHUHQFLD

Búsqueda del sensor del punto de referencia (tramo de curva azul)
Al iniciar el referenciado activo, el eje acelera a la "velocidad de aproximación" configurada,
buscando el sensor del punto de referencia a dicha velocidad. La variable <Nombre de
eje>.StatusBits.HomingDone se establece en FALSE.

Aproximación al punto de referencia (tramo de curva rojo)
En este ejemplo, el eje frena en cuanto detecta el sensor del punto de referencia e invierte para
referenciar a la "velocidad de posicionamiento" configurada en el lado configurado del sensor
del punto de referencia. Con el referenciado la variable <Nombre de
eje>.StatusBits.HomingDone cambia a TRUE.

Extracción del offset del punto de referencia (tramo de curva verde)
Una vez finalizado el referenciado, el eje recorre la distancia del offset del punto de referencia
a la velocidad de referenciado. Una vez allí, el eje se queda en la posición del punto de
referencia que se haya indicado en el parámetro de entrada "Position" de la instrucción
"MC_Home" de Motion Control.

2390

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Consulte también
Configuración - Referenciar - General (objeto tecnológico Eje V2...3) (Página 2563)

Marcha - Referenciación pasiva
El referenciado pasivo se inicia con la instrucción de Motion Control "MC_Home" (parámetro
de entrada Mode = 2). El parámetro de entrada "Position" indica aquí la coordenada absoluta
del punto de referencia.
La siguiente representación muestra un ejemplo del desarrollo de un proceso de referenciado
pasivo con los siguientes parámetros de configuración:
● "Lado del sensor del punto de referencia" = "Lado superior"
● "Modo de toma de referencia" = "Utilizar marca de referencia a través de entrada digital"
Y

'HVSOD]DPLHQWRHQ
VHQWLGRSRVLWLYR

V

'HVSOD]DPLHQWRHQ
VHQWLGRQHJDWLYR

0RYLPLHQWRGHODQWHGHO
VHQVRUGHOSXQWRGH
UHIHUHQFLD
3RVLFLµQGHOSXQWRGH
UHIHUHQFLD

0RYLPLHQWRGHVSX«VGHO
VHQVRUGHOSXQWRGH
UHIHUHQFLD

Movimiento antes del sensor del punto de referencia (tramo de curva rojo)
Con el inicio del referenciado pasivo, la instrucción de Motion Control "MC_Home" no realiza
ningún movimiento de referencia. El movimiento de desplazamiento necesario para alcanzar
el sensor del punto de referencia deber realizarse por parte del usuario a través de otras
instrucciones Motion Control, como por ejemplo MC_MoveRelative. Si el eje ya había sido
referenciado anteriormente, la variable <Nombre del eje>.StatusBits.HomingDone permanece
en TRUE durante el referenciado pasivo.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2391

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Referenciado del eje (transición del tramo de curva rojo al verde)
El eje se referencia al alcanzar el lado configurado del sensor del punto de referencia. La
posición actual del eje se establece en la posición del punto de referencia. Ésta se indica en el
parámetro "Position" de la instrucción de Motion Control "MC_Home". Si aún no se había
referenciado el eje, la variable <Nombre de eje>.StatusBits.HomingDone se establece en
TRUE. El movimiento de desplazamiento iniciado antes no se interrumpe.

Movimiento después del sensor del punto de referencia (tramo de curva verde)
Después del referenciado en el sensor del punto de referencia el eje continúa el movimiento de
desplazamiento iniciado antes con la posición del eje corregida hasta el final.

Modificar la configuración para la referenciación en el programa de usuario
A partir del objeto tecnológico Eje de posicionamiento V2 los siguientes parámetros de
configuración pueden modificarse en la CPU mientras se ejecuta el programa de usuario:

Referenciado pasivo
El lado del sensor del punto de referencia para el referenciado pasivo puede modificarse
mientras se ejecuta el programa de usuario. Para ello utilice la siguiente variable del objeto
tecnológico:
● <Nombre de eje>.Sensor[1].PassiveHoming.SideInput
para modificar el lado del sensor del punto de referencia
● <Nombre de eje>.Sensor[1].PassiveHoming.Mode
para modificar el modo de toma de referencia
Para saber cuándo tienen efecto las modificaciones del parámetro de configuración, consulte
en el anexo la descripción de las variables del objeto tecnológico (Página 2627).

Referenciado activo
Es posible modificar el sentido de aproximación, el lado del sensor del punto de referencia, la
velocidad de aproximación, la velocidad de referenciado y el offset del punto de referencia para
el referenciado activo mientras se ejecuta el programa de usuario. Para ello utilice las
siguientes variables del objeto tecnológico:
● <Nombre de eje>.Homing.AutoReversal
para modificar la inversión del sentido en el final de carrera por hardware
● <Nombre de eje>.Homing.ApproachDirection
para modificar el sentido de aproximación o de referenciado
● <Nombre de eje>.Sensor[1].ActiveHoming.SideInput
para modificar el lado del sensor del punto de referencia
● <Nombre de eje>.Homing.ApproachVelocity
para modificar la velocidad de aproximación
● <Nombre de eje>.Homing.ReferencingVelocity
para modificar la velocidad de referenciado

2392

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
● <Nombre de eje>.Sensor[1].ActiveHoming.HomePositionOffset
para modificar el offset del punto de referencia
● <Nombre de eje>.Sensor[1].ActiveHoming.Mode
para modificar el modo de toma de referencia
Para saber cuándo tienen efecto las modificaciones del parámetro de configuración, consulte
en el anexo la descripción de las variables del objeto tecnológico.

Consulte también
Lista de compatibilidad de las variables V1...3 <-> V4...5 (Página 2339)

Vigilancias de posición
Configuración - Vigilancia de posicionamiento (solo PROFIdrive y conexión analógica del
accionamiento)
En la ventana de configuración "Vigilancia de posicionamiento" configure los criterios para
vigilar la posición de destino.
La vigilancia de posicionamiento vigila el comportamiento de la posición real al final del cálculo
de consigna. En cuanto la consigna de velocidad alcanza el valor 0, el valor real de posición
debe estar en la ventana de posicionamiento dentro de un tiempo de tolerancia. El valor real
no debe salir de la ventana de posicionamiento mientras dura el tiempo mínimo de
permanencia.
Si la posición real alcanza la ventana de posicionamiento dentro del tiempo de tolerancia y
permanece dentro durante el tiempo mínimo de permanencia, se activará el bit de estado
<Nombre de eje>.StatusBits.Done. Con ello ha concluido una orden de movimiento.
La vigilancia de posicionamiento no distingue cómo finaliza la interpolación de consigna. El
final de la interpolación de consigna puede alcanzarse, por ejemplo, del siguiente modo:
● Cuando la consigna alcanza la posición de destino
● Cuando se produce una detención con regulación de posición durante el movimiento a
causa de la instrucción "MC_Halt" de Motion Control
En los siguientes casos, la vigilancia de posicionamiento detiene el eje y se muestra un error
de posicionamiento (ErrorID 16#800F) en la instrucción Motion Control.
● El valor real no alcanza la ventana de posicionamiento dentro del tiempo de tolerancia.
● El valor real sale de la ventana de posicionamiento durante el tiempo mínimo de
permanencia.

Ventana de posicionamiento
Configure en este campo el tamaño de la ventana de posicionamiento.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2393

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Tiempo de tolerancia
Configure en este campo el tiempo de tolerancia dentro del cual el valor de posición debe
alcanzar la ventana de posicionamiento.

Tiempo mínimo de permanencia en la ventana de posicionamiento
Configure en este campo el tiempo de permanencia mínimo durante el cual el valor de posición
actual debe encontrarse en la ventana de posicionamiento.

Configuración - Error de seguimiento (solo PROFIdrive y conexión analógica del accionamiento)
En la ventana de configuración "Error de seguimiento", configure la divergencia admisible
entre la posición real del eje y la posición de consigna.
El error de seguimiento es la diferencia entre la posición de consigna y la posición real del eje.
Los tiempos de transferencia de la consigna al accionamiento y del valor real al controlador se
tienen en cuenta a la hora de calcular el error de seguimiento.
El error de seguimiento se vigila sobre la base de un límite dependiente de la velocidad. El error
de seguimiento permitido depende de la consigna de velocidad.
Con velocidades inferiores a una velocidad mínima ajustable es posible especificar un error de
seguimiento admisible constante. Por encima de esta velocidad mínima, el error de
seguimiento admisible aumenta proporcionalmente a la consigna de velocidad. Con la
velocidad máxima se permite el máximo error de seguimiento.
Si se rebasa el error de seguimiento admisible, se detiene el eje y se muestra un error (ErrorID
16#800D) en la instrucción Motion Control.

Activar vigilancia de errores de seguimiento
Marque la casilla de verificación para activar la vigilancia de errores de seguimiento.
Si está activada la vigilancia de errores de seguimiento, el eje se detendrá en el área de error
(naranja).

Error de seguimiento máx.
Configure en este campo el error de seguimiento admisible a velocidad máxima.

Error de seguimiento
Configure en este campo el error de seguimiento admisible para velocidades pequeñas (sin
adaptación dinámica).

Inicio de la adaptación dinámica
Configure en este campo la velocidad a partir de la cual se adaptará dinámicamente el error de
seguimiento. A partir de dicha velocidad, el error de seguimiento se adapta al error de
seguimiento máximo hasta la velocidad máxima.

2394

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Velocidad máxima
Este campo muestra la máxima velocidad configurada en "Dinámica > General".

Configuración - Señal de velocidad cero (solo PROFIdrive y conexión analógica del accionamiento)
En la ventana de configuración "Señal de velocidad cero" configure los criterios para detectar
la velocidad cero.
Para indicar la parada (<Nombre de eje>.StatusBits.StandStill), la velocidad del eje debe
encontrarse en la ventana de parada durante el tiempo mínimo de permanencia.

Ventana de parada
Configure en este campo el tamaño de la ventana de parada.

Tiempo de permanencia mínimo en la ventana de parada
Configure en este campo el tiempo mínimo de permanencia en la ventana de parada.

Configuración - Lazo de regulación (solo PROFIdrive y conexión analógica del accionamiento)
En la ventana de configuración "Lazo de regulación" configure el precontrol y la ganancia Kv
del lazo de regulación de posición.
El factor Kv repercute en los siguientes valores característicos:
● Precisión de posicionamiento y regulación de parada
● Uniformidad del movimiento
● Tiempo de posicionamiento
Cuanto mejores sean los requisitos constructivos del eje (rigidez alta), mayor será el factor Kv
ajustable. Con ello se reduce el error de seguimiento y se consigue una mayor dinámica.
La función "Optimización (Página 2443)" ayuda a determinar la ganancia óptima para la
regulación de posición del eje.

Precontrol
Configure en este campo el precontrol de velocidad porcentual para el lazo de regulación de
posición.

Ganancia (factor Kv)
Configure en este campo la ganancia Kv del lazo de regulación de posición.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2395

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Vista de parámetros
Introducción a la vista de parámetros
La vista de parámetros le ofrece una visión de conjunto de todos los parámetros relevantes de
un objeto tecnológico. Proporciona una vista general de los ajustes de los parámetros, de
manera que usted puede modificarlos cómodamente en el modo offline y online.

①
②
③
④

Ficha "Vista de parámetros"
Barra de herramientas (Página 674)
Navegación (Página 675)
Tabla de parámetros (Página 675)

Funcionalidad
Para analizar los parámetros de los objetos tecnológicos, y para poderlos observar y forzar de
manera selectiva, hay disponibles las siguientes funciones.
Funciones de indicación:
● Indicación de los valores de parámetros en modo offline y online
● Indicación de la información de estado de los parámetros
● Indicación de desviaciones de los valores y posibilidad de corregirlas directamente
● Indicación de errores de configuración
● Indicación de variaciones de valores como consecuencia de dependencias de parámetros

2396

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
● Indicación de todos los valores almacenados de un parámetro: valor de arranque en la
CPU, valor de arranque en el proyecto, valor de observación
● Indicación de la comparación de parámetros de los valores almacenados de un parámetro
Funciones de manejo:
● Navegación, para cambiar rápidamente entre los parámetros y las estructuras de
parámetros.
● Filtro de texto, para encontrar más rápidamente determinados parámetros.
● Función de ordenación, para adaptar el orden de parámetros y grupos de parámetros en
función de las necesidades.
● Función de almacenamiento, para guardar ajustes estructurales de la vista de parámetros.
● Observar y forzar online valores de parámetro.
● Cambiar el formato de visualización del valor.
● Guardar instantánea de valores de parámetros de la CPU para reproducir situaciones
transitorias y reaccionar a ellas.
● Aplicar instantánea de valores de parámetros como valores de arranque.
● Cargar en la CPU valores de arranque modificados.
● Funciones de comparación, para comparar entre sí valores de parámetros.

Validez
La vista de parámetros aquí descrita está disponible para los siguientes objetos tecnológicos:
● PID_Compact
● PID_3Step
● PID_Temp
● CONT_C (solo S7-1500)
● CONT_S (solo S7-1500)
● TCONT_CP (solo S7-1500)
● TCONT_S (solo S7-1500)
● TO_Axis_PTO (S7-1200 Motion Control)
● TO_Positioning_Axis (S7-1200 Motion Control)
● TO_CommandTable_PTO (S7-1200 Motion Control)
● TO_CommandTable (S7-1200 Motion Control)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2397

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Estructura de la vista de parámetros
Barra de herramientas
En la barra de herramientas de la vista de parámetros pueden seleccionarse las siguientes
funciones:
Símbolo

Función

Explicación

Observar todos

Inicia la observación de los parámetros visibles en la vista de pará‐
metros activa (modo online).

Crear instantánea de los Aplica los valores de observación actuales a la columna "Instantánea"
valores de observación y actualiza los valores de arranque en el proyecto.
y aplicar valores de ajus‐ Solo en modo online con PID_Compact, PID_3Step y PID_Temp.
te de esa instantánea co‐
mo valores de arranque
Cargar valores de arran‐ Transfiere a la CPU los valores de arranque actualizados en el pro‐
que de los valores de
yecto.
ajuste como valores ac‐ Solo en modo online con PID_Compact, PID_3Step y PID_Temp.
tuales (inicializar valores
de ajuste)
Crear instantánea de los
valores de observación

Aplica los valores de observación actuales a la columna "Instantánea".
Solo en modo online.

Forzar una vez e inme‐ Este comando se ejecuta una sola vez y lo antes posible, sin referen‐
diatamente todos los pa‐ cia a un punto determinado del programa de usuario.
rámetros seleccionados Solo en modo online.
Seleccionar la estructu‐
ra de navegación

Cambia entre la navegación orientada a funciones y la navegación
orientada a datos.

Filtro de texto...

Tras introducir una cadena de caracteres: indicación de todos los pa‐
rámetros que contienen la cadena de caracteres introducida en una de
las columnas visibles actualmente.

Seleccionar valores de
comparación

Selección de los valores de parámetros que deben compararse entre
sí en modo online (valor de arranque en el proyecto, valor de arranque
en la CPU, instantánea)
Solo en modo online.

Memorizar disposición

2398

Guarda los ajustes de visualización de la vista de parámetros realiza‐
dos (p. ej., estructura de navegación seleccionada, columnas activa‐
das de la tabla, etc.).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Navegación
Dentro de la ficha "Vista de parámetros" pueden seleccionarse como alternativa las siguientes
estructuras de navegación:
Navegación

Explicación

Navegación orien‐
tada a funciones

En la navegación orientada a funciones, la estructura de los pará‐
metros se basa en la estructura de los cuadros de diálogo de con‐
figuración (ficha "Vista de funciones"), puesta en marcha y diag‐
nóstico.
El último grupo "Otros parámetros" contiene los restantes paráme‐
tros del objeto tecnológico.
En la navegación orientada a datos, la estructura de los parámetros
se basa en la estructura del DB de instancia/DB tecnológico.

Navegación orien‐
tada a datos

El último grupo "Otros parámetros" contiene los parámetros que no
están incluidos en el DB de instancia/DB tecnológico.

Con la lista desplegable "Seleccionar la estructura de navegación" puede cambiar la estructura
de navegación.

Tabla de parámetros
La tabla siguiente muestra el significado de las distintas columnas de la tabla de parámetros.
Las columnas pueden mostrarse u ocultarse según convenga.
● Columna "Offline" = X: la columna es visible en modo offline.
● Columna "Online" = X: la columna es visible en modo online (conexión online con la CPU).
Columna

Explicación

Offline

Online

Nombre en la vista
de funciones

Nombre del parámetro en la vista de funciones.

X

X

Nombre completo en Ruta completa del parámetro en el DB de instancia/DB tecnológico.
DB
Este campo de visualización está vacío en el caso de parámetros que no están
incluidos en el DB de instancia/DB tecnológico.

X

X

Nombre en DB

X

X

Este campo de visualización está vacío en el caso de parámetros que no se
configuran por medio del objeto tecnológico.

Nombre del parámetro en el DB de instancia/DB tecnológico.
Si el parámetro es parte de una estructura o UDT, se añade el prefijo ". ./".
Este campo de visualización está vacío en el caso de parámetros que no están
incluidos en el DB de instancia/DB tecnológico.

Estado de la configu‐ Indicación de la integridad de la configuración mediante símbolos de estado
ración
ver Estado de la configuración (offline) (Página 683)
Resultado de la com‐ Resultado de la función "Comparar valores".
paración
Esta columna aparece si existe una conexión online y el botón
todos" está seleccionado.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

X
X

"Observar

2399

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Columna

Offline

Online

Valor de arranque en Valor de arranque configurado en el proyecto.
el proyecto
Indicación de errores en caso de valores mal introducidos desde el punto de
vista sintáctico o tecnológico.

X

X

Valor predetermina‐
do

X

X

X

X

Instantánea

Explicación

Valor predeterminado del parámetro.
Este campo de visualización está vacío en el caso de parámetros que no están
incluidos en el DB de instancia/DB tecnológico.
Instantánea de los valores actuales en la CPU (valores de observación).
Indicación de errores en caso de valores incorrectos desde el punto de vista
tecnológico.

Valor de arranque en Valor de arranque en la CPU.
la CPU
Esta columna aparece si existe una conexión online y el botón
todos" está seleccionado.

X
"Observar

Indicación de errores en caso de valores incorrectos desde el punto de vista
tecnológico.
X

Valor de observación Valor actual en la CPU.
Esta columna aparece si existe una conexión online y el botón
todos" está seleccionado.

"Observar

Indicación de errores en caso de valores incorrectos desde el punto de vista
tecnológico.
Valor de forzado

Valor con que debe modificarse el valor de observación.

X

Esta columna aparece si existe una conexión online y el botón
todos" está seleccionado.

"Observar

Indicación de errores en caso de valores mal introducidos desde el punto de
vista sintáctico o tecnológico.
Selección del valor
de forzado

Selección de los valores de forzado que deben transferirse por medio del botón
"Forzar una vez e inmediatamente todos los parámetros seleccionados".

X

Esta columna aparece junto con la columna "Valor de forzado".
X

X

X

X

Valor de ajuste

Identifica el parámetro como valor de ajuste. Estos parámetros pueden iniciali‐ X
zarse online.

X

Tipo de datos

Tipo de datos del parámetro.

X

X

X

X

Accesible desde HMI Indica si HMI puede acceder a este parámetro durante el tiempo de ejecución. X

X

Valor mínimo

Valor tecnológico más bajo del parámetro.
Si el valor mínimo depende de otros parámetros, entonces viene determinado:
● Offline: por los valores de arranque en el proyecto.
● Online: por los valores de observación.

Valor máximo

Valor tecnológico más alto del parámetro.
Si el valor máximo depende de otros parámetros, entonces viene determinado:
● Offline: por los valores de arranque en el proyecto.
● Online: por los valores de observación.

Este campo de visualización está vacío en el caso de parámetros que no están
incluidos en el DB de instancia/DB tecnológico.
Remanencia

Identifica el valor como remanente.
Los valores de los parámetros remanentes se conservan incluso después de
desconectar la tensión de alimentación.

Visible en HMI

Indica si el parámetro es visible por defecto en la lista de selección de HMI.

X

X

Comentario

Descripción abreviada del parámetro.

X

X

2400

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Consulte también
Comparar valores (Página 669)

Abrir la vista de parámetros
Requisitos
El objeto tecnológico se ha agregado al árbol de proyectos, lo que significa que se ha generado
el correspondiente DB de instancia/DB tecnológico de la instrucción.

Procedimiento
1. Abra la carpeta "Objetos tecnológicos" en el árbol del proyecto.
2. Abra el objeto tecnológico en el árbol del proyecto.
3. Haga doble clic en el objeto "Configuración".
4. Seleccione en la esquina superior derecha la ficha "Vista de parámetros".

Resultado
Se abre la vista de parámetros. En la tabla de parámetros cada parámetro mostrado viene está
representado por una fila de la tabla.
Las propiedades visualizables de los parámetros (columnas de la tabla) dependen de si la vista
de parámetros está en modo offline u online.
Además, es posible mostrar y ocultar las distintas columnas de la tabla de manera selectiva.

Consulte también
Ajuste predeterminado de la vista de parámetros (Página 677)

Ajuste predeterminado de la vista de parámetros
Ajustes predeterminados
Para trabajar de forma efectiva con la vista de parámetros, puede adaptar la representación de
los parámetros y guardar los ajustes realizados.
Pueden efectuarse y guardarse los siguientes ajustes:
● Mostrar y ocultar columnas
● Modificar el ancho de las columnas
● Modificar el orden de las columnas
● Cambiar la navegación

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2401

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
● Seleccionar un grupo de parámetros en la navegación
● Seleccionar valores de comparación

Mostrar y ocultar columnas
Para mostrar y ocultar columnas en la tabla de parámetros, proceda del siguiente modo:
1. Sitúe el puntero del ratón en el encabezado de la tabla de parámetros.
2. En el menú contextual, seleccione el comando "Mostrar/ocultar".
Se muestra la selección de las columnas disponibles.
3. Para mostrar una columna, active la casilla de verificación de la columna.
4. Para ocultar una columna, desactive la casilla de verificación de la columna.
o bien
1. Sitúe el puntero del ratón en el encabezado de la tabla de parámetros.
2. En el menú contextual, seleccione el comando "Mostrar todas las columnas" si desea
mostrar todas las columnas del modo offline u online.
Algunas columnas solo pueden mostrarse en modo online: ver Tabla de parámetros
(Página 675).

Modificar el ancho de las columnas
Para adaptar el ancho de una columna al contenido de manera que pueda leerse todo el texto
de las filas, proceda del siguiente modo:
1. Sitúe el puntero del ratón en el encabezado de la tabla de parámetros, a la derecha junto
a la columna que se desea optimizar, hasta que el puntero del ratón adopte la forma de una
cruz.
2. Haga doble clic en este punto.
o bien
1. Abra el menú contextual del encabezado de la tabla de parámetros.
2. Haga clic en
– "Optimizar ancho de columna" o
– "Optimizar ancho de todas las columnas".
Situando brevemente el puntero del ratón sobre el campo en cuestión, aparece el contenido
completo de los distintos campos en las columnas de ancho insuficiente.

Modificar el orden de las columnas
Las columnas de la tabla de parámetros pueden situarse donde se desee.
Para modificar el orden de las columnas, proceda del siguiente modo:
1. Haga clic sobre el encabezado de la columna, arrástrelo y suéltelo en el lugar deseado.
Cuando suelte el botón del ratón, la columna se anclará en la nueva posición.

2402

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Cambiar la navegación
Para cambiar la estructura de visualización de los parámetros, proceda del siguiente modo:
1. Seleccione la navegación que desee en la lista desplegable "Seleccionar la estructura de
navegación":
– Navegación orientada a datos
– Navegación orientada a funciones
Ver también Navegación (Página 675).

Seleccionar un grupo de parámetros en la navegación
Dentro de la navegación elegida puede optar entre la visualización "Todos los parámetros" o
la visualización de un grupo de parámetros subordinado deseado.
1. Haga clic sobre el grupo de parámetros deseado en la navegación.
En la tabla de parámetros se muestran solo los parámetros del grupo de parámetros.

Seleccionar valores de comparación (online)
Para ajustar los valores de comparación para la función "Comparar valores", proceda del
siguiente modo:
1. Seleccione en la lista desplegable "Seleccionar valores de comparación" los valores de
comparación que desee:
– Valor de arranque en el proyecto / valor de arranque en la CPU
– Valor de arranque en el proyecto / instantánea
– Valor de arranque en la CPU / instantánea
Por defecto está ajustada la opción "Valor de arranque en el proyecto / Valor de arranque en
la CPU".

Guardar el ajuste predeterminado de la vista de parámetros
Para guardar las modificaciones anteriores de la vista de parámetros, proceda del siguiente
modo:
1. Adapte la vista de parámetros en función de sus necesidades.
2. Haga clic en el botón
vista de parámetros.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

"Memorizar disposición" situado en la parte superior derecha de la

2403

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Trabajar con la vista de parámetros
Sinopsis
La siguiente tabla ofrece una vista general de las funciones de la vista de parámetros que se
describen a continuación en los modos online y offline.
● Columna "Offline" = X: esta función está disponible en modo offline.
● Columna "Online" = X: esta función está disponible en modo online.
Función/acción

Offline

Online

Filtrar la tabla de parámetros (Página 680)

X

X

Ordenar la tabla de parámetros (Página 681)

X

X

Aplicar datos de parámetros en otros editores (Página 681)

X

X

Mostrar errores (Página 682)

X

X

Editar valores de arranque en el proyecto (Página 682)

X

X

Estado de la configuración (offline) (Página 683)

X

Observar online los valores en la vista de parámetros (Página 684)

X

Crear instantánea de los valores de observación (Página 686)

X

Forzar valores (Página 687)

X

Comparar valores (Página 688)

X

Aplicar valores como valores de arranque desde el programa online (Pági‐
na 689)

X

Inicializar los valores de ajuste en el programa online (Página 690)

X

Filtrar la tabla de parámetros
Los parámetros de la tabla de parámetros pueden filtrarse de las siguientes maneras:
● Con el filtro de texto
● Con los subgrupos de la navegación
Los dos métodos de filtrado pueden utilizarse simultáneamente.

Con el filtro de texto
Puede filtrarse por los textos que son visibles en la tabla de parámetros. Esto significa que solo
se puede filtrar por los textos de las líneas de parámetros y columnas mostradas.
1. Introduzca en el campo de entrada "Filtro de texto..." la cadena de caracteres por la que
desee filtrar.
La tabla de parámetros solo muestra aquellos parámetros que contienen la cadena de
caracteres.
El filtro de texto se restablece:
● Seleccionando otro grupo de parámetros en la navegación.
● Cambiando entre la navegación orientada a datos y a funciones.

2404

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Con los subgrupos de la navegación
1. Haga clic sobre el grupo de parámetros deseado en la navegación, p. ej., "Static".
En la tabla de parámetros se muestran solo los parámetros "Static". En algunos grupos de
la navegación puede seleccionar otros subgrupos.
2. Haga clic sobre "Todos los parámetros" en la navegación si desea volver a mostrar todos
los parámetros.

Ordenar la tabla de parámetros
Los valores de los parámetros están dispuestos por filas. La tabla de parámetros puede
ordenarse según cualquiera de las columnas mostradas.
● En las columnas con valores numéricos se ordena según la altura del valor numérico.
● En las columnas con texto se ordena alfabéticamente.

Ordenar por columnas
1. Sitúe el puntero del ratón en el encabezado de la columna deseada.
El fondo de esta celda se marca en azul.
2. Haga clic sobre el encabezado de la columna.

Resultado
Toda la tabla de parámetros se ordena según la columna marcada. En el encabezado de la
columna aparece un triángulo con la punta hacia arriba.
Haciendo clic de nuevo sobre el encabezado de la columna, el orden cambia de la siguiente
manera:
● Símbolo "▲": la tabla de parámetros se ordena de manera ascendente.
● Símbolo "▼": la tabla de parámetros se ordena de manera descendente.
● Ningún símbolo: se anula la ordenación. La tabla de parámetros adopta la vista
predeterminada.
En la ordenación se ignora el prefijo "../" de la columna "Nombre en DB".

Aplicar datos de parámetros en otros editores
Una vez seleccionada toda una fila de parámetros de la tabla de parámetros, con
● arrastrar y soltar
● <Ctrl+C>/<Ctrl+V>
● copiar/pegar por medio del menú contextual
pueden aplicarse parámetros en los siguientes editores del TIA Portal:
● en el editor de programas;
● en la tabla de observación;
● en la tabla de señales para Trace.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2405

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
El parámetro se añade con el nombre completo: ver indicación en la columna "Nombre
completo en DB".

Mostrar errores
Señalización de errores
Los errores de parametrización que conllevan errores de compilación (p. ej., rebase de límite),
se indican en la vista de parámetros.
Cada vez que se introduce un valor en la vista de parámetros, se comprueba y muestra de
inmediato la corrección tecnológica y sintáctica.
Los valores erróneos se indican con:
● Un símbolo de error rojo en las columnas "Estado de la configuración" (modo offline) o
"Resultado de la comparación" (modo online, en función del tipo de comparación elegido)
y/o
● El campo de la tabla con el fondo rojo
Al hacer clic sobre el campo erróneo, se muestra el mensaje de error desplegable que
indica el rango de valores admisible o la sintaxis requerida (formato)

Errores de compilación
Desde el mensaje de error del compilador puede abrirse directamente la vista de parámetros
(navegación orientada a funciones) con el parámetro causante del error para aquellos
parámetros que no se muestren en el cuadro de diálogo de configuración.

Editar valores de arranque en el proyecto
Con la vista de parámetros pueden editarse los valores de arranque en el proyecto en los
modos offline y online:
● Los valores se modifican en la columna "Valor de arranque en el proyecto" de la tabla de
parámetros.
● En la columna "Estado de la configuración" de la tabla de parámetros se muestra el
progreso de la configuración mediante los símbolos de estado conocidos del cuadro de
diálogo de configuración del objeto tecnológico.

Condiciones
● Si hay otros parámetros que dependen del parámetro cuyo valor de arranque se ha
modificado, el valor de arranque del parámetro dependiente se adapta igualmente.
● Si un parámetro de un objeto tecnológico no es editable, tampoco lo es en la vista de
parámetros. La posibilidad de edición de un parámetro puede depender también de los
valores de otros parámetros.

2406

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Definir nuevos valores de arranque
Para especificar valores de arranque para parámetros en la vista de parámetros, proceda del
siguiente modo:
1. Abra la vista de parámetros del objeto tecnológico.
2. Introduzca en la columna "Valor de arranque en el proyecto" los valores de arranque
deseados. El valor debe ser conforme al tipo de datos del parámetro y no debe rebasar el
rango de valores del parámetro.
En las columnas "Valor máximo" y "Valor mínimo" se muestran los valores límite del rango
de valores.
En la columna "Estado de la configuración" se muestra el "progreso" de la configuración
mediante símbolos de colores.
Ver también Estado de la configuración (offline) (Página 683)
Una vez adaptados los valores de arranque y cargado el objeto tecnológico en la CPU, los
parámetros adoptan durante el arranque el valor definido, siempre y cuando estos parámetros
estén declarados como remanentes (columna "Remanencia").

Señalización de errores
Cuando se introduce un valor de arranque, se comprueba y muestra de inmediato la corrección
tecnológica y sintáctica:
Los valores de arranque erróneos se indican con
● Un símbolo de error rojo en las columnas "Estado de la configuración" (modo offline) o
"Resultado de la comparación" (modo online, en función del tipo de comparación elegido)
y/o
● Un fondo rojo en el campo "Valor de arranque en el proyecto"
Al hacer clic sobre el campo erróneo, se muestra el mensaje de error desplegable que
indica el rango de valores admisible o la sintaxis requerida (formato)

Corregir valores de arranque erróneos
1. Corrija los valores de arranque erróneos con ayuda de la información del mensaje de error
desplegable.
El símbolo de error rojo, el fondo rojo del campo y el mensaje de error desplegable dejarán
de mostrarse.
El proyecto solo puede compilarse correctamente con valores de arranque correctos.

Estado de la configuración (offline)
El estado de la configuración se indica mediante símbolos:
● En la columna "Estado de la configuración" en la tabla de parámetros
● En la estructura de navegación de la navegación orientada a funciones o la navegación
orientada a datos

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2407

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Símbolo en la columna "Estado de la configuración"
Símbolo

Significado
El valor de arranque del parámetro coincide con el valor predeterminado y es válido. El
usuario todavía no ha definido ningún valor de arranque.
El valor de arranque del parámetro contiene un valor definido por el usuario o adaptado
automáticamente. El valor de arranque difiere del valor predeterminado. El valor de
arranque no contiene errores y es válido.
El valor de arranque del parámetro no es válido (error sintáctico o tecnológico).
El campo de entrada tiene fondo rojo. Al hacer clic, el roll out con el aviso de error indica
la causa del error.
Solo con S7-1200 Motion Control:
El valor de arranque del parámetro es válido, pero contiene advertencias.
El campo de entrada tiene fondo amarillo.
El parámetro no es relevante en la configuración actual.

Símbolo en la navegación
Los símbolos en la navegación muestran el "progreso" de la configuración de la misma manera
que en el cuadro de diálogo de configuración del objeto tecnológico.

Consulte también
Configurar objetos tecnológicos (Página 665)

Observar online los valores en la vista de parámetros
Es posible observar directamente en la vista de parámetros los valores que los parámetros del
objeto tecnológico van adoptando actualmente en la CPU (valores de observación).

Requisitos
● Existe una conexión online.
● El objeto tecnológico está cargado en la CPU.
● La ejecución del programa está activa (CPU en "RUN").
● La vista de parámetros del objeto tecnológico está abierta.

2408

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Procedimiento
1. Inicie la observación haciendo clic en el símbolo
.
En cuanto la vista de parámetros esté online, se mostrarán también las siguientes
columnas:
– Resultado de la comparación
– Valor de arranque en la CPU
– Valor de observación
– Valor de forzado
– Selección del valor de forzado
La columna "Valor de observación" muestra los valores actuales de los parámetros en la
CPU.
Significado de las demás columnas: ver Tabla de parámetros (Página 675)
2. La observación se finaliza haciendo clic de nuevo en el símbolo

.

Indicación
Todas las columnas disponibles únicamente online tienen fondo naranja:
● Los valores de las celdas naranja claro
● Los valores de las celdas con fondo naranja oscuro

se pueden modificar.
no admiten modificaciones.

Cambio del formato de visualización del valor
El formato de visualización del valor puede seleccionarse en el menú contextual de una fila en
la vista de parámetros del objeto tecnológico.
El formato de visualización de los siguientes valores puede cambiarse tanto en modo online
como offline:
● Valor de arranque en el proyecto
● Valor de arranque en la CPU
● Valor máximo
● Valor mínimo
● Instantánea
● Valor de observación
● Valor predeterminado
● Valor de forzado
El formato de visualización configurado se aplica a todos los valores de la fila.
Pueden modificarse los siguientes formatos de visualización del valor:
● Predeterminado
● Hex
● Octal

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2409

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
● Bin
● Dec (+/-)
● DEC
Solo pueden elegirse los formatos de visualización soportados dependiendo del parámetro
seleccionado en la vista de parámetros.

Requisitos
● La vista de parámetros del objeto tecnológico está abierta.

Procedimiento
Para cambiar el formato de visualización del valor, haga lo siguiente:
1. Seleccione una o varias filas en las que desee cambiar el formato de visualización.
2. Seleccione el comando "Formato visualización" en el menú contextual.
3. Seleccione el formato de visualización deseado.
Nota
Para modificar el formato de visualización de un tipo de datos determinado en varias filas,
ordene la vista de parámetros por este tipo de datos. A continuación, seleccione la primera y
la última fila con este tipo de datos manteniendo pulsada la tecla <Mayús> y modifique el
formato de visualización de las filas seleccionadas.

Crear instantánea de los valores de observación
Es posible guardar los valores actuales del objeto tecnológico en la CPU (valores de
observación) y mostrarlos en la vista de parámetros.

Requisitos
● Existe una conexión online.
● El objeto tecnológico está cargado en la CPU.
● La ejecución del programa está activa (CPU en "RUN").
● La vista de parámetros del objeto tecnológico está abierta.
● El botón "Observar todos"

está activado.

Procedimiento
Para mostrar los valores actuales de los parámetros, proceda del siguiente modo:
1. Haga clic en la vista de parámetros sobre el símbolo
de observación".

2410

"Crear instantánea de los valores

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Resultado
Los valores de observación actuales se aplican una vez en la columna "Instantánea" de la tabla
de parámetros.
Los valores "congelados" así pueden analizarse mientras que los valores de observación de
la columna "Valores de observación" se siguen actualizando.

Forzar valores
Con la vista de parámetros puede forzar los valores del objeto tecnológico en la CPU.
Puede asignar valores al parámetro (valor de forzado) una sola vez y forzarlos de inmediato.
Al ejecutar esta función la orden de forzado se lleva a cabo lo antes posible, sin referencia a
un punto determinado del programa de usuario.

PELIGRO
Peligro en el forzado:
Una modificación de los valores de los parámetros con la instalación en marcha puede causar
importantes daños materiales y personales en caso de fallos de funcionamiento o errores de
programa.
Asegúrese de que no puedan darse situaciones de peligro antes de ejecutar la función
"Forzar".

Requisitos
● Existe una conexión online.
● El objeto tecnológico está cargado en la CPU.
● La ejecución del programa está activa (CPU en "RUN").
● La vista de parámetros del objeto tecnológico está abierta.
● El botón "Observar todos"

está activado.

● El parámetro puede forzarse (el campo correspondiente en la columna "Valor de forzado"
tiene fondo naranja claro).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2411

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Procedimiento
Para forzar parámetros inmediatamente, proceda del siguiente modo:
1. Introduzca los valores de forzado deseados en la columna "Valores de forzado" de la tabla
de parámetros.
2. Compruebe si se ha activado la casilla de verificación para el forzado en la columna
"Selección del valor de forzado".
Los valores de forzado y las casillas de verificación correspondientes de los parámetros
dependientes se adaptan también automáticamente.
3. Haga clic en el símbolo
seleccionados".

"Forzar una vez e inmediatamente todos los parámetros

Los parámetros seleccionados se fuerzan una vez e inmediatamente con los valores
especificados y pueden observarse en la columna "Valores de observación". Las casillas de
verificación para el forzado en la columna "Selección del valor de forzado" se desactivan
automáticamente una vez ejecutada la orden de forzado.

Señalización de errores
Cuando se introduce un valor de forzado, se comprueba y muestra de inmediato la corrección
tecnológica y sintáctica:
Los valores de forzado erróneos se indican con
● Un fondo rojo en el campo "Valor de forzado"
y
● Al hacer clic sobre el campo erróneo, se muestra el mensaje de error desplegable que
indica el rango de valores admisible o la sintaxis requerida (formato)

Valores de forzado erróneos
● Los valores de forzado erróneos desde el punto de vista tecnológico pueden transferirse.
● Los valores de forzado erróneos desde el punto de vista sintáctico no pueden transferirse.

Comparar valores
Las funciones de comparación permiten comparar los siguientes valores almacenados de un
parámetro:
● Valor de arranque en el proyecto
● Valor de arranque en la CPU
● Instantánea

Requisitos
● Existe una conexión online.
● El objeto tecnológico está cargado en la CPU.
● La ejecución del programa está activa (CPU en "RUN").

2412

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
● La vista de parámetros del objeto tecnológico está abierta.
● El botón "Observar todos"

está activado.

Procedimiento
Para comparar los valores de arranque de los diversos sistemas de destino, proceda del
siguiente modo:
1. Haga clic en el símbolo
"Seleccionar valores de comparación".
Se abre una lista de selección con las opciones de comparación:
– Valor de arranque en el proyecto - valor de arranque en la CPU (ajuste predeterminado)
– Valor de arranque en el proyecto - instantánea
– Valor de arranque en la CPU - instantánea
2. Elija la opción de comparación que desee.
La opción de comparación seleccionada se ejecuta de la siguiente manera:
– En las celdas del encabezado de las dos columnas seleccionadas para la comparación
aparece un símbolo con una balanza.
– En la columna "Resultado de la comparación" se muestra mediante símbolos el
resultado de la comparación de las columnas seleccionadas.

Símbolo en la columna "Resultado de la comparación"
Símbolo

Significado
Los valores de comparación son iguales y no contienen errores.
Los valores de comparación son distintos y no contienen errores.
Por lo menos uno de los dos valores de comparación es incorrecto desde el punto de
vista tecnológico o sintáctico.
No se ha podido llevar a cabo la comparación. Por lo menos uno de los dos valores de
comparación no está disponible (p. ej., instantánea).
No tiene sentido comparar el valor, ya que no es relevante en una de las configuraciones.

Símbolo en la navegación
Los símbolos se muestran de la misma manera en la navegación cuando el resultado de la
comparación se cumple como mínimo para uno de los parámetros de debajo de la estructura
de navegación mostrada.

Aplicar valores como valores de arranque desde el programa online
Para aplicar al proyecto en un paso valores optimizados de la CPU como valores de arranque,
genere una instantánea de los valores de observación. A continuación, los valores de la
instantánea marcados como "Valor de ajuste" se aplicarán como valores de arranque en el
proyecto.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2413

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Requisitos
● El objeto tecnológico es de tipo "PID_Compact", "PID_3Step" o "PID_Temp".
● Existe una conexión online.
● El objeto tecnológico está cargado en la CPU.
● La ejecución del programa está activa (CPU en "RUN").
● La vista de parámetros del objeto tecnológico está abierta.
● El botón "Observar todos"

está activado.

Procedimiento
Para aplicar valores optimizados de la CPU, proceda del siguiente modo:
1. Haga clic en el símbolo
"Crear instantánea de los valores de observación y aplicar
valores de ajuste de esa instantánea como valores de arranque".

Resultado
Los valores de observación actuales se aplican a la columna "Instantánea" y sus valores de
ajuste se copian como valores de arranque nuevos en la columna "Valor de arranque en el
proyecto".

Nota
Aplicar valores de parámetros individuales
También es posible aplicar los valores de determinados parámetros que no estén marcados
como valor de ajuste de la columna "Instantánea" a la columna "Valores de arranque en el
proyecto". Para ello copie los valores con ayuda de los comandos "Copiar"·y "Pegar" del menú
contextual y péguelos en la columna "Valor de arranque en el proyecto".

Inicializar los valores de ajuste en el programa online
Todos los parámetros marcados en la vista de parámetros como "Valor de ajuste" se pueden
inicializar en la CPU con nuevos valores en un solo paso. Para ello se deben cargar los valores
de arranque del proyecto en la CPU. La CPU se mantiene en el estado operativo "RUN".

2414

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Para evitar una pérdida de datos en la CPU al arrancar en frío o al reiniciar (arranque en
caliente), es necesario cargar también el objeto tecnológico en la CPU.
PELIGRO
Peligro al modificar valores de parámetros
Una modificación de los valores de los parámetros con la instalación en marcha puede causar
importantes daños materiales y personales en caso de fallos de funcionamiento o errores de
programa.
Asegúrese de que no puedan darse situaciones de peligro antes de reinicializar los valores de
ajuste.

Requisitos
● El objeto tecnológico es de tipo "PID_Compact", "PID_3Step" o "PID_Temp".
● Existe una conexión online.
● El objeto tecnológico está cargado en la CPU.
● La ejecución del programa está activa (CPU en "RUN").
● La vista de parámetros del objeto tecnológico está abierta.
● El botón "Observar todos"

está activado.

● Los parámetros marcados como " disponen de un "Valor de arranque en el proyecto" sin
errores tecnológicos ni sintácticos.

Procedimiento
Para inicializar todos los valores de ajuste, proceda del siguiente modo:
1. Introduzca los valores deseados en la columna "Valor de arranque en el proyecto".
Compruebe que los valores de arranque no contengan errores tecnológicos o sintácticos.
2. Haga clic en el símbolo
valores actuales".

"Cargar valores de arranque de los valores de ajuste como

Resultado
Los valores de ajuste de la CPU se inicializan con los valores de arranque del proyecto.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2415

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Configurar módulos tecnológicos para Motion Control
Descripción general
Los siguientes módulos tecnológicos se pueden utilizar como conexión de encóder en
S7-1200 Motion Control.
ET 200 MP

ET 200 SP

TM Count 2x24V (Página 2418)

TM Count 1x24V (Página 2418)

TM PosInput 2 (Página 2416)

TM PosInput 1 (Página 2416)

Los módulos tecnológicos pueden utilizarse en el sistema de forma centralizada o
descentralizada.
En las siguientes descripciones se explica cómo se parametrizan como encóders los módulos
tecnológicos:

Consulte también
TM Count 1x24V/TM Count 2x24V (Página 2418)
TM PosInput 1/TM PosInput 2 (Página 2416)

TM PosInput 1/TM PosInput 2
Para su uso con S7-1200 Motion Control, deben configurarse los siguientes parámetros:
Configuración
Módulo tecnológico

Objeto tecnológico

TM PosInput 1/TM PosInput 2
Parámetros básicos > Canal 0/1 > Modo de operación

Eje
–

Seleccionar el modo de operación "Lectura de posición para
objeto tecnológico Motion Control"
Parámetros básicos > Canal 0/1 > Parámetros del módulo

Parámetros básicos > Encóder

–

Acoplamiento del encóder
Seleccionar el encóder con PROFINET/PROFIBUS

–

Selección del encóder
Seleccionar la conexión de datos "Encóder" y el canal acti‐
vado y configurado en el módulo tecnológico como encóder

–

Intercambio de datos encóder
El telegrama "DP_TEL83_STANDARD" se selecciona auto‐
máticamente tras seleccionar el encóder.
Desactivar la casilla de verificación "Aplicar automáticamente
los valores del encóder en runtime (online)".
Activar la casilla de verificación "Aplicar automáticamente los
valores del encóder durante la configuración (offline)".
Si la casilla de verificación está desactivada, puede igualar
manualmente los parámetros descritos e identificados en es‐
ta tabla.

2416

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Configuración
Módulo tecnológico

Objeto tecnológico

TM PosInput 1/TM PosInput 2

Eje

Tipo de señal

Tipo de encóder

● Encóder incremental

Seleccionar tipo de encóder en función de la configuración
del módulo tecnológico

● Encóder absoluto
Tipo de encóder
● Lineal
Distancia entre incrementos
● Rotativo
Introducir incrementos por vuelta

Seleccione el tipo de sistema de medición1):
● Tipo lineal (incremental o absoluto)
Introducir distancia entre incrementos1)
● Tipo rotativo
–

Incremental: introducir incrementos por vuelta en
función de la configuración del módulo tecnológico
(1:1)1)

–

Absoluto: introducir incrementos por vuelta y número
de vueltas en función de la configuración del módulo
tecnológico (1:1)1)

Evaluación de señal

Resolución fina

● Simple

Introducir la resolución fina en función de la configuración del
módulo tecnológico1)

● Doble

● Encóder incremental:

● Cuádruple

–

0 = simple,

–

1 = doble o

–

2 = cuádruple

● Encóder absoluto:
–

0 (= simple)

–

Parámetros básicos Accionamiento > Accionamiento

● Tipo giratorio:
introducir velocidad de giro de referencia en función de la
configuración del módulo tecnológico (1:1)

Introducir velocidad de giro de referencia

● Tipo lineal:
Introducir velocidad de referencia
1)

Los parámetros se aplican automáticamente si está activado "Aplicar automáticamente los valores del encóder durante la
configuración (offline)".

"–" Para estos parámetros no se necesita ninguna configuración en el módulo tecnológico/objeto tecnológico

Consulte también
Descripción general (Página 2416)
TM Count 1x24V/TM Count 2x24V (Página 2418)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2417

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

TM Count 1x24V/TM Count 2x24V
Para su uso con S7-1200 Motion Control, deben configurarse los siguientes parámetros:
Configuración
Módulo tecnológico

Objeto tecnológico

TM Count 1x24V/TM Count 2x24V
Parámetros básicos > Canal 0/1 > Modo de operación

Eje
–

Seleccionar el modo de operación "Lectura de posición para
objeto tecnológico Motion Control"
Parámetros básicos > Canal 0/1 > Parámetros del módulo

Parámetros básicos > Encóder

–

Acoplamiento del encóder
Seleccionar el encóder con PROFINET/PROFIBUS

–

Selección del encóder
Seleccionar la conexión de datos "Encóder" y el canal acti‐
vado y configurado en el módulo tecnológico como encóder

–

Intercambio de datos encóder
El telegrama "DP_TEL83_STANDARD" se selecciona auto‐
máticamente tras seleccionar el encóder.
Desactivar la casilla de verificación "Aplicar automáticamente
los valores del encóder en runtime (online)".
Activar la casilla de verificación "Aplicar automáticamente los
valores del encóder durante la configuración (offline)".
Si la casilla de verificación está desactivada, puede igualar
manualmente los parámetros descritos e identificados en es‐
ta tabla.

Tipo de señal
● Encóder incremental
Tipo de encóder
● Lineal
Distancia entre incrementos
● Rotativo
Introducir incrementos por vuelta

Tipo de encóder
Seleccionar tipo de encóder en función de la configuración
del módulo tecnológico
Seleccione el tipo de sistema de medición1):
● Tipo lineal (incremental o absoluto)
Introducir distancia entre incrementos1)
● Tipo rotativo
–

Incremental: introducir incrementos por vuelta en
función de la configuración del módulo tecnológico
(1:1)1)

–

Absoluto: introducir incrementos por vuelta y número
de vueltas en función de la configuración del módulo
tecnológico (1:1)1)

Evaluación de señal

Resolución fina

● Simple

Introducir la resolución fina en función de la configuración del
módulo tecnológico1)

● Doble
● Cuádruple

● 0 = simple
● 1 = doble
● 2 = cuádruple

2418

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Configuración
Módulo tecnológico

Objeto tecnológico

TM Count 1x24V/TM Count 2x24V

Eje

–

Parámetros básicos Accionamiento > Accionamiento

● Tipo giratorio:
introducir velocidad de giro de referencia en función de la
configuración del módulo tecnológico (1:1)

Introducir velocidad de giro de referencia

● Tipo lineal:
Introducir velocidad de referencia
1)

Los parámetros se aplican automáticamente si está activado "Aplicar automáticamente los valores del encóder durante la
configuración (offline)".

"-" Para estos parámetros no se necesita ninguna configuración en el módulo tecnológico/objeto tecnológico

Consulte también
Descripción general (Página 2416)
TM PosInput 1/TM PosInput 2 (Página 2416)

6.2.6

Objeto tecnológico Tabla de peticiones

6.2.6.1

Utilización del objeto tecnológico Tabla de órdenes
Utilice el objeto tecnológico "Tabla de órdenes" para reunir varias órdenes individuales en
secuencias de movimiento a fin de controlar un eje. El objeto tecnológico se puede utilizar a
partir de la versión V2 de la tecnología para ejes con conexión del accionamiento mediante
PTO (Pulse Train Output).
La secuencia de movimientos se configura mediante una tabla en un cuadro de dialogo de
configuración.
El perfil de movimiento de la secuencia de movimientos puede comprobarse gráficamente
incluso antes de cargar el proyecto en la CPU. A continuación, en el programa de usuario se
pueden efectuar llamadas a las tablas de órdenes creadas a través de la instrucción de Motion
Control "MC_CommandTable", relacionarlas con un eje y utilizarlas. La tabla de órdenes se
puede procesar por completo o sólo parcialmente.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2419

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

6.2.6.2

Herramientas del objeto tecnológico Tabla de peticiones
El TIA Portal dispone de la herramienta "Configuración" para el objeto tecnológico "Tabla de
órdenes". La siguiente representación muestra la interacción de la herramienta con el objeto
tecnológico:

2EMHWRWHFQROµJLFR
7DEODGHSHWLFLRQHV '%[

'DWRVGHFRQILJXUDFLµQ



&RQILJXUDFLµQ

①

Escritura y lectura de la configuración del objeto tecnológico

Configuración
Configure las siguientes propiedades del objeto tecnológico "Tabla de órdenes" con la
herramienta "Configuración":
● Cree una o varias secuencias de movimiento configurando órdenes individuales.
● Configure la representación gráfica para comprobar la secuencia de movimientos
basándose en un eje ya configurado o en un eje de ejemplo configurable.
Los datos de la secuencia de movimientos se almacenan en el bloque de datos del objeto
tecnológico.

6.2.6.3

Agregar el objeto tecnológico Tabla de peticiones

Requisitos
● Hay un proyecto creado con una CPU S7-1200.
● La versión de firmware de la CPU es la V2.1 o superior.

2420

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Procedimiento
Para agregar un objeto tecnológico "Tabla de órdenes" en el árbol del proyecto, proceda del
siguiente modo:
1. Abra la carpeta "CPU > Objetos tecnológicos" en el árbol del proyecto.
2. Haga doble clic en el comando "Agregar objeto".
Se abre el cuadro de diálogo "Agregar objeto".
3. Seleccione la tecnología "Motion Control".
4. Abra la carpeta "Motion Control".
5. Seleccione la versión tecnológica deseada en la columna "Versión".
6. Seleccione el objeto "TO_CommandTable".
7. En el campo de entrada "Nombre" introduzca el nombre de la tabla de órdenes.
8. Para modificar los números asignados automáticamente al bloque de datos, seleccione la
opción "manual".
9. Para visualizar y añadir más información sobre el objeto tecnológico, haga clic en "Más
información".
10.Confirme la entrada realizada con "Aceptar".

Resultado
Se crea el nuevo objeto tecnológico y se guarda en la capeta "Objetos tecnológicos" del árbol
del proyecto.

6.2.6.4

Configuración del objeto tecnológico Tabla de peticiones

Trabajando con el diálogo de configuración
Las propiedades del objeto tecnológico se configuran en la ventana de configuración. Para
abrir la ventana de configuración del objeto tecnológico, proceda del siguiente modo:
1. Abra el grupo correspondiente al objeto tecnológico deseado en el árbol del proyecto.
2. Haga doble clic en el objeto "Configuración".
La configuración se divide en las siguientes categorías:
● Parámetros básicos
Los parámetros básicos contienen todos los parámetros que deben configurarse para una
tabla de órdenes con disponibilidad de funcionamiento.
● Parámetros avanzados
Los parámetros avanzados contienen los parámetros del eje de ejemplo, o bien muestran
los valores de los parámetros del eje elegido.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2421

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Símbolos de la ventana de configuración
Los símbolos que aparecen en la navegación local de la configuración muestran más detalles
sobre el estado de la configuración:
La configuración contiene valores predeterminados y está completa.
La configuración contiene exclusivamente valores predeterminados. Con ellos es posible utilizar el objeto tecnológico
sin más modificaciones.
La configuración contiene valores definidos por el usuario o adaptados automáticamente y está completa.
Todos los campos de entrada de la configuración contienen valores válidos y al menos un valor predeterminado ha sido
modificado.
La configuración es errónea o está incompleta.
Al menos un campo de entrada o una lista desplegable contiene un valor no válido. El campo o la lista desplegable en
cuestión se marca en rojo. Al hacer clic, el roll out con el aviso de error indica la causa del error.
La configuración contiene valores de parámetros no compatibles entre sí.
La configuración contiene valores de parámetros contradictorios en lo que respecta a su magnitud o bien a su lógica. El
campo o la lista desplegable en cuestión se marca en amarillo.

Consulte también
Parámetros básicos (Página 2423)
Parámetros avanzados (Página 2436)

Observación de valores
Si hay una conexión online con la CPU, en los diálogos de configuración del objeto tecnológico
.
aparece el símbolo "Observar todos"
La función "Observar todos" ofrece las siguientes opciones:
● Comparación de los valores de arranque configurados del proyecto con los valores de
arranque de la CPU y los valores actuales
● Procesamiento directo de los valores actuales y de los valores de arranque del proyecto
● Detección y visualización inmediatas de errores de introducción con propuestas de
corrección
● Copia de seguridad de los valores actuales en el proyecto mediante aplicación manual en
el valor de arranque del proyecto

Símbolos y elementos de control
Si existe una conexión online con la CPU, se mostrarán los valores actuales de los parámetros.
Junto a los valores actuales de los parámetros aparecen los siguientes símbolos:
Símbolo

Descripción
El valor de arranque en la CPU es igual al valor de arranque configurado en el proyecto
El valor de arranque en la CPU es diferente al valor de arranque configurado en el
proyecto

2422

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Símbolo

Descripción
No se puede realizar la comparación entre valor de arranque en la CPU y valor de arran‐
que configurado en el proyecto porque el módulo de CPU seleccionado no soporta esa
comparación.
No tiene mucho sentido comparar el valor, ya que en una de las configuraciones no es
relevante.
El botón permite visualizar para cada parámetro el valor de arranque de la CPU y el valor
de arranque del proyecto.

El valor actual y el valor de arranque en el proyecto pueden modificarse directamente y
cargarse a continuación en la CPU. En el caso de los parámetros directamente modificables,
la modificación del valor actual se aplica directamente a la CPU.

Parámetros básicos
Configuración - General
Configure el nombre del objeto tecnológico en la ventana de configuración "General".

Nombre
Defina en este campo el nombre de la tabla de peticiones o el nombre del objeto tecnológico
"Tabla de peticiones". El objeto tecnológico aparece con ese nombre en el árbol del proyecto.

Consulte también
Configuración de la tabla de órdenes (Página 2423)
Comandos del menú contextual - Tabla de peticiones (Página 2427)
Trabajando con el diagrama de curvas (Página 2428)
Comandos del menú contextual - Diagrama de curvas (Página 2432)
Transición de petición "Finalizar petición"/"Suavizar transición del movimiento" (Página 2433)
Modificar la configuración de la tabla de peticiones en el programa de usuario (Página 2435)

Configuración de la tabla de órdenes
Configure la secuencia de movimientos deseada en la ventana de configuración "Tabla de
órdenes" y compruebe el resultado en la representación gráfica, en el diagrama de curvas.
Nota
Pueden producirse ligeras diferencias entre la representación del comportamiento temporal y
la posición en la curva con respecto al movimiento real del eje. No se representan los procesos
de movimiento que son reacción a la llegada a los finales de carrera de software.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2423

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Activar advertencias
Active con esta casilla de verificación la visualización de advertencias en la tabla de órdenes.

Utilizar parámetros del eje de
En la lista desplegable, seleccione los parámetros del eje que deben servir como base para la
representación gráfica y para la comprobación de la secuencia de movimientos. Seleccione
"Eje de ejemplo" si aún no ha insertado ningún eje en la carpeta "Objetos tecnológicos" o si
desea utilizar valores que no se han configurado en ningún eje existente. Las propiedades del
eje de ejemplo se configuran en el área "Parámetros avanzados".
Para procesar la tabla de órdenes en el programa de usuario se utilizan los parámetros del eje
seleccionado en el parámetro "Axis".

Columna: Paso
Muestra el número de pasos de la orden.

Columna: Tipo de orden
Seleccione en esta columna los tipos de órdenes que se deben ejecutar al procesar la tabla de
órdenes. Se pueden registrar hasta 32 órdenes. Las órdenes se procesan de forma
secuencial. Efectúe su selección entre las entradas y tipos de órdenes siguientes:
● Empty
La entrada hace las veces de comodín para hipotéticas órdenes que se deban insertar. Las
entradas vacías se ignoran al procesar la tabla de órdenes.
● Halt
Detener eje
(la orden solo se hace efectiva tras una orden "Velocity setpoint")
● Positioning Relative
Posicionar eje de forma relativa
● Positioning Absolute
Posicionar eje de forma absoluta (para ello el eje debe estar referenciado)
● Velocity setpoint
Mover eje con preajuste de velocidad
● Wait
Espera hasta que el tiempo indicado haya transcurrido. Wait no detiene los
desplazamientos que se están efectuando.
● Separator
Inserta una fila Separator por encima de la fila seleccionada. La fila Separator actúa como
límite de zona para la representación gráfica del diagrama de curvas.
Utilice filas Separator si desea procesar partes de la tabla de órdenes.

2424

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Columna: Posición/recorrido
Indique en esta columna la posición o el recorrido de desplazamiento para la orden
seleccionada:
● Orden "Positioning Relative"
La orden desplaza el eje en el recorrido indicado.
● Orden "Positioning Absolute"
La orden desplaza el eje a la posición indicada.
Para ello el eje debe estar referenciado.
● Separator
El valor indicado corresponde a la posición inicial de la representación gráfica.
Límites (independientes de la unidad de usuario seleccionada):
● -1.0e12 ≤ posición / recorrido de desplazamiento ≤ -1.0e-12
● 1.0e-12 ≤ posición / recorrido de desplazamiento ≤ 1.0e12
● Posición/recorrido de desplazamiento = 0.0

Columna: Velocidad
Indique en esta columna la velocidad para la orden seleccionada:
● Orden "Positioning Relative"
La orden desplaza el eje a la velocidad indicada.
Si el recorrido de desplazamiento elegido no es suficientemente grande, no se alcanza la
velocidad indicada.
● Orden "Positioning Absolute"
La orden desplaza el eje a la velocidad indicada.
Si la posición de destino está demasiado cerca de la posición de inicio, no se alcanza la
velocidad indicada.
● Orden "Velocity setpoint"
La orden desplaza el eje a la velocidad indicada.
Si se elige un tiempo de ejecución demasiado corto, la velocidad indicada no se podrá
alcanzar mientras se ejecuta la orden.
Límites (independientes de la unidad de usuario seleccionada):
● Para las órdenes: "Positioning Relative" y "Positioning Absolute"
– 1.0e-12 ≤ velocidad ≤ 1.0e12
● Para la orden: "Velocity setpoint"
– -1.0e12 ≤ velocidad ≤ -1.0e-12
– 1.0e-12 ≤ velocidad ≤ 1.0e12
– Velocidad = 0.0

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2425

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Columna: Duración
Indique en esta columna la duración de la orden elegida:
● Orden "Velocity setpoint"
La orden desplaza el eje durante el tiempo indicado. La duración incluye tanto la fase de
aceleración como la fase de marcha constante. Una vez transcurrido este tiempo se pasa
a la orden siguiente.
● Orden "Wait"
Espera hasta que haya transcurrido la duración indicada.
Límites (independientes de la unidad de usuario seleccionada):
● 0.001s ≤ duración ≤ 64800 s

Columna: Siguiente paso
Elija en la lista desplegable el modo de transición al paso siguiente:
● Finalizar orden
La orden finaliza. Se pasa a la orden siguiente sin ningún hueco temporal.
● Suavizar transición del movimiento
El movimiento de la orden actual se transforma suavemente en el movimiento de la orden
siguiente. El modo de transición "Suavizar transición del movimiento" se puede seleccionar
en los tipos de órdenes "Positioning Relative" y "Positioning Absolute".
El movimiento se transforma suavemente en el movimiento de los siguientes tipos de
órdenes:
– Positioning Relative
– Positioning Absolute
– Velocity setpoint
Con otros tipos de órdenes no hay transformación suave.
Para conocer el comportamiento exacto del eje al agregar o suavizar la transición de una orden
consulte el capítulo: Transición de petición "Finalizar petición"/"Suavizar transición del
movimiento" (Página 2433)

Columna: Código de paso
Indique en esta columna el valor numérico/patrón de bits que se debe emitir por el parámetro
de salida "StepCode" de la instrucción de Motion Control "MC_CommandTable" durante el
procesamiento de la orden.
Límites:
● 0 ≤ clave ≤ 65535

Consulte también
Configuración - General (Página 2423)
Comandos del menú contextual - Tabla de peticiones (Página 2427)
Trabajando con el diagrama de curvas (Página 2428)

2426

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Comandos del menú contextual - Diagrama de curvas (Página 2432)
Transición de petición "Finalizar petición"/"Suavizar transición del movimiento" (Página 2433)
Modificar la configuración de la tabla de peticiones en el programa de usuario (Página 2435)

Comandos del menú contextual - Tabla de peticiones
La tabla de órdenes ofrece los comandos de menú contextual siguientes:

Insertar fila Empty
Inserta una fila vacía encima de la fila seleccionada.
El comando del menú contextual únicamente se puede ejecutar si al final de la tabla de
órdenes se dispone de suficientes filas vacías.

Agregar fila Empty
Inserta una fila vacía debajo de la fila seleccionada.
El comando del menú contextual únicamente se puede ejecutar si al final de la tabla de
órdenes se dispone de suficientes filas vacías.

Insertar fila de separación
Inserta una fila de separación encima de la fila seleccionada.
No es posible insertar dos filas de separación consecutivas.

Agregar fila de separación
Inserta una fila de separación debajo de la fila seleccionada.
No es posible insertar dos filas de separación consecutivas; tampoco se puede insertar una fila
de separación al final de la tabla de órdenes.

Cortar
Elimina las filas seleccionadas o el contenido de las celdas seleccionadas y las coloca en el
portapapeles.
Las filas seleccionadas se eliminan; las filas siguientes de la tabla de órdenes se desplazan
hacia arriba.

Copiar
Copia las filas seleccionadas o el contenido de las celdas seleccionadas y las coloca en el
portapapeles.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2427

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Pegar
● Filas seleccionadas:
Inserta las filas del portapapeles encima de la fila seleccionada.
● Celda seleccionada:
Inserta el contenido del portapapeles en la fila seleccionada.
El comando del menú contextual únicamente se puede ejecutar si al final de la tabla de
órdenes se dispone de suficientes filas vacías.

Reemplazar
Sustituye las filas seleccionadas con las filas del portapapeles.

Borrar
Elimina las filas seleccionadas. Las filas siguientes de la tabla de órdenes se desplazan hacia
arriba.

Consulte también
Configuración - General (Página 2423)
Configuración de la tabla de órdenes (Página 2423)
Trabajando con el diagrama de curvas (Página 2428)
Comandos del menú contextual - Diagrama de curvas (Página 2432)
Transición de petición "Finalizar petición"/"Suavizar transición del movimiento" (Página 2433)
Modificar la configuración de la tabla de peticiones en el programa de usuario (Página 2435)

Trabajando con el diagrama de curvas
El diagrama de curvas incorpora las herramientas e informaciones siguientes:

2428

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Vista y componentes del diagrama de curvas






















①
②
③
④
⑤
⑥
⑦
⑧
⑨
⑩
⑪
⑫
⑬
⑭
⑮













Regla de medición
Elección de la cuadrícula
Área de escala del eje de velocidad
Área de la barra de desplazamiento del eje de velocidad
Área de la barra de desplazamiento del eje de tiempo
Marca de posición de la regla de medición
Curva de velocidad
Sección de curva de una orden seleccionada
Área de escala del eje de tiempo
Velocidad de arranque/parada
Área de la barra de desplazamiento del eje de posición
Área de escala del eje de posición
Posición del final de carrera por SW
Curva de posición
Ventana de curvas

Selección de las secciones de separación
Si la tabla de órdenes está compuesta por varias secciones divididas por separadores, las
secciones del diagrama de curvas también se pueden seleccionar mediante selección de una
orden perteneciente a la sección correspondiente.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2429

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Seleccionar órdenes
Las órdenes se pueden seleccionar en el diagrama de curvas y en la tabla de órdenes:
● En el diagrama de curvas, haga clic en un punto de la curva de velocidad o de la curva de
posición. La orden correspondiente queda seleccionada en la tabla de órdenes.
● Seleccione una orden en la tabla de órdenes.
Las zonas correspondientes de la curva se destacan en el área de curva.

Seleccionar el área visible del diagrama de curvas
Para adaptar la sección del diagrama de curvas que se desea representar, proceda como se
describe a continuación:
Selección de la escala en el menú contextual:
● Escala de curvas:
Escala los ejes de manera que la curva de posición y la curva de velocidad sean visibles.
● Escala de curvas y límites:
Escala los ejes de manera que tanto la curva de posición y la curva de velocidad, como las
posiciones finales de carrera por software activadas y los límites inferior y superior de
velocidad sean visibles.
La vista actualmente seleccionada se identifica en el menú contextual con una marca de
verificación.
Seleccionar en el área de escala la sección que se desea representar:




2430

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

①
②

Área en la que se encuentran los valores de la curva o los valores límite (ver selección en el menú contextual).
Área seleccionada que se representa en la ventana de curva.
El área seleccionada se ajusta mediante el borde derecho y el borde izquierdo con el cursor redondo.

La posición dentro del área ① se ajusta con el cursor de desplazamiento.

La posición también se puede determinar haciendo clic en el área ①.

Elegir con el ratón la sección que se desea representar:
Haga clic con el ratón y arrástrelo hasta marcar un área en el diagrama de curvas. Tras soltar
el ratón, la representación del área de curva se amplía a la selección.

Deshacer el último cambio de la sección:
Para deshacer el último cambio de la sección, elija el comando del menú contextual "Deshacer
zoom".

Sincronizar la cuadrícula
Haciendo clic en las escalas de eje, elija si la cuadrícula se debe sincronizar con el eje de
posición o con el eje de velocidad.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2431

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Leer los valores de la curva en la regla de medición
Active la regla de medición con el comando de menú contextual "Insertar regla de medición".
Con el cursor de la regla de medición, desplace ésta hasta los puntos que desee de las curvas.

Consulte también
Configuración - General (Página 2423)
Configuración de la tabla de órdenes (Página 2423)
Comandos del menú contextual - Tabla de peticiones (Página 2427)
Comandos del menú contextual - Diagrama de curvas (Página 2432)
Transición de petición "Finalizar petición"/"Suavizar transición del movimiento" (Página 2433)
Modificar la configuración de la tabla de peticiones en el programa de usuario (Página 2435)

Comandos del menú contextual - Diagrama de curvas
El área de la ventana de curvas incorpora los comandos de menú contextual siguientes:

Zoom 100 %
Selecciona un factor de zoom con el que se pueda ver el 100 % de los valores de las curvas
o los valores límite.

Deshacer el zoom
Anula la última modificación de zoom.

Escala de curvas
Escala los ejes de manera que la curva de posición y la curva de velocidad sean visibles.

Escala de curvas y límites
Escala los ejes de manera que tanto la curva de posición y la curva de velocidad, como las
posiciones finales de carrera por software activadas y los límites inferior y superior de
velocidad sean visibles.

2432

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Insertar límites de velocidad
Inserta las líneas de los límites de velocidad.

Insertar fines de carrera por software
Inserta las líneas de los fines de carrera por software.

Insertar regla de medición
Muestra u oculta la regla de medición.
Utilice la regla de medición si desea observar valores individuales de las curvas.

Consulte también
Configuración - General (Página 2423)
Configuración de la tabla de órdenes (Página 2423)
Comandos del menú contextual - Tabla de peticiones (Página 2427)
Trabajando con el diagrama de curvas (Página 2428)
Transición de petición "Finalizar petición"/"Suavizar transición del movimiento" (Página 2433)
Modificar la configuración de la tabla de peticiones en el programa de usuario (Página 2435)

Transición de petición "Finalizar petición"/"Suavizar transición del movimiento"
Los diagramas siguientes muestran la transición del movimiento para distintas selecciones del
modo de transición en la columna "Siguiente paso":

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2433

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Transición del movimiento si la orden precedente es una orden de posicionamiento
Los siguientes diagramas representan una secuencia de órdenes con dos órdenes de
movimiento. La primera es una orden de posicionamiento (verde). La segunda es una orden de
velocidad (roja) o de posicionamiento (azul):
Finalizar orden

Suavizar transición del movimiento

Transición de velocidad inferior a velocidad superior

Transición de velocidad inferior a velocidad superior

Y

Y

W

W

Una orden con una velocidad mayor se añade a una orden de
posicionamiento anterior. La primera orden de posiciona‐
miento finaliza en su posición de destino con la velocidad "0".
La segunda orden comienza a partir de la posición de parada.

Una orden con una velocidad mayor se suaviza con una or‐
den de posicionamiento anterior. La primera orden de posi‐
cionamiento finaliza sin parada en la posición de destino. La
segunda orden se suaviza a la nueva velocidad.

Transición de velocidad superior a velocidad inferior

Transición de velocidad superior a velocidad inferior

Y

Y

W

Una orden con una velocidad inferior se añade a una orden
de posicionamiento anterior. La primera orden de posiciona‐
miento finaliza en su posición de destino con la velocidad "0".
La segunda orden comienza a partir de la posición de parada.

W

Una orden con una velocidad inferior se suaviza con una or‐
den de posicionamiento anterior. La primera orden de posi‐
cionamiento finaliza sin parada en la posición de destino. La
primera orden se suaviza a la nueva velocidad.

1.ª orden "Positioning Relative" o "Positioning Absolute"
2.ª orden "Velocity setpoint"
2.ª orden "Positioning Relative" o "Positioning Absolute"

2434

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Transición del movimiento si la orden precedente es una orden de velocidad
Los siguientes diagramas representan una secuencia de órdenes con dos órdenes de
movimiento. La primera es una orden de velocidad (violeta). La segunda es una orden de
velocidad (roja) o de posicionamiento (azul):
Transición de velocidad inferior a velocidad superior

Transición de velocidad superior a velocidad inferior

Y

Y

W

Una orden con una velocidad mayor se añade a una orden de
velocidad anterior. La primera orden de velocidad finaliza
después del tiempo indicado. La segunda orden se suaviza a
la nueva velocidad.

W

Una orden con una velocidad inferior se suaviza con una or‐
den de velocidad anterior. La segunda orden se suaviza a la
nueva velocidad.

1.ª orden "Velocity setpoint"
2.ª orden "Velocity setpoint"
2.ª orden "Positioning Relative" o "Positioning Absolute"

Consulte también
Configuración - General (Página 2423)
Configuración de la tabla de órdenes (Página 2423)
Comandos del menú contextual - Tabla de peticiones (Página 2427)
Trabajando con el diagrama de curvas (Página 2428)
Comandos del menú contextual - Diagrama de curvas (Página 2432)
Modificar la configuración de la tabla de peticiones en el programa de usuario (Página 2435)

Modificar la configuración de la tabla de peticiones en el programa de usuario
Los siguientes parámetros de configuración pueden modificarse en la CPU mientras se
ejecuta el programa de usuario:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2435

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Peticiones y valores correspondientes
Los parámetros de la tabla de peticiones se pueden modificar incluso durante el tiempo de
ejecución del programa de usuario. Para ello utilice las siguientes variables del objeto
tecnológico:
● <Nombre de la tabla>.Command[1..32].Type
para modificar el tipo de petición correspondiente
● <Nombre de la tabla>.Command[1..32].Position
para modificar la posición o el recorrido
● <Nombre de la tabla>.Command[1..32].Velocity
para modificar la velocidad
● <Nombre de la tabla>.Command[1..32].Duration
para modificar la duración
● <Nombre de la tabla>.Command[1..32].NextStep
para modificar el parámetro "Siguiente paso"
● <Nombre de la tabla>.Command[1..32].StepCode
para modificar el código de paso
Para saber cuándo tienen efecto las modificaciones de los parámetros de configuración,
consulte en el anexo la descripción de las variables del objeto tecnológico (Página 2655).

Consulte también
Lista de compatibilidad de las variables V1...3 <-> V4...5 (Página 2339)
Configuración - General (Página 2423)
Configuración de la tabla de órdenes (Página 2423)
Comandos del menú contextual - Tabla de peticiones (Página 2427)
Trabajando con el diagrama de curvas (Página 2428)
Comandos del menú contextual - Diagrama de curvas (Página 2432)
Transición de petición "Finalizar petición"/"Suavizar transición del movimiento" (Página 2433)

Parámetros avanzados
Configuración: parámetros avanzados
Configure las propiedades básicas de la representación de. diagrama del objeto tecnológico
"Tabla de órdenes" en la ventana de configuración "Parámetros avanzados".

Utilizar parámetros del eje de
Seleccione en la lista desplegable los parámetros del eje que deben servir como base para la
representación gráfica y para la comprobación de la secuencia de movimientos. Seleccione
"Ejemplo de eje" en la lista desplegable si aún no ha insertado ningún eje en la carpeta
"Objetos tecnológicos" o si ha introducido valores que no se han configurado en ningún eje
existente.

2436

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Los parámetros del eje seleccionado en el parámetro "Eje" se utilizan para procesar la tabla de
órdenes en el programa de usuario.

Unidad de medida de posición
Si selecciona un ejemplo de eje en la lista desplegable "Utilizar parámetros de eje de", podrá
ajustar la unidad de medida.
Si selecciona un eje configurado en la lista desplegable "Utilizar parámetros de eje de", se
mostrará la unidad de medida del eje configurado.

Copiar parámetros del eje
Seleccione el sentido de copia y el eje para copiar los parámetros del eje. Puede copiar los
parámetros del eje de ejemplo en el eje seleccionado o transferir los parámetros del eje
seleccionado al eje de ejemplo. Con el botón "Aplicar configuración" se copian los parámetros
del eje de acuerdo con su configuración.

Configuración - Dinámica
En la ventana de configuración "Dinámica", configure la aceleración y deceleración, así como
la limitación de tirones del ejemplo de eje.
Si selecciona un eje configurado en la lista desplegable "Utilizar parámetros de eje de" en
"Configuración > Parámetros avanzados > Parámetros avanzados", se mostrarán los valores
del eje configurado.
Si selecciona la entrada "Ejemplo de eje" en la lista desplegable "Utilizar parámetros de eje de"
en "Configuración > Parámetros avanzados > Parámetros avanzados", podrá editar los
campos que se describen a continuación.

Aceleración/deceleración
Ajuste la aceleración deseada para el eje de ejemplo en el campo "Aceleración". La
deceleración deseada se puede ajustar en el campo "Deceleración".
Las órdenes de movimiento configuradas en la tabla de órdenes se calculan con la
aceleración / deceleración seleccionada.
Límites:
● 1.0E-12 ≤ aceleración ≤ 1.0E12
● 1.0E-12 ≤ deceleración ≤ 1.0E12

Activar limitación de tirones
Active la limitación de tirones con esta casilla de verificación.

Tirón
Ajuste el tirón deseado para la rampa de aceleración y deceleración en el campo "Tirón".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2437

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Las órdenes de movimiento configuradas en la tabla de órdenes se calculan con el tirón
seleccionado.
Límites:
● 1.0E-12 ≤ tirón ≤ 1.0E12

Configuración - Valores límite
En la ventana de configuración "Valores límite" se configura la velocidad máxima, la velocidad
de arranque/parada y los finales de carrera por software del ejemplo de eje.
Si selecciona un eje configurado en la lista desplegable "Utilizar parámetros de eje de" en
"Configuración > Parámetros avanzados > Parámetros avanzados", se mostrarán los valores
del eje configurado.
Si selecciona la entrada "Ejemplo de eje" en la lista desplegable "Utilizar parámetros de eje de"
en "Configuración > Parámetros avanzados > Parámetros avanzados", podrá editar los
campos que se describen a continuación.

Velocidad máxima / Velocidad de arranque/parada
Defina en estos campos la velocidad máxima admisible y la velocidad de arranque/parada del
eje de ejemplo. La velocidad de arranque/parada es la velocidad mínima admisible del eje de
ejemplo.
Velocidad

Valor límite

Velocidad de arranque/parada

0.0
de 1.0E-12 a 1.0E12

Velocidad máxima

0.0
de 1.0E-12 a 1.0E12

El valor de la velocidad máxima debe ser mayor o igual al valor de la velocidad de arranque/
parada.

Activar final de carrera por software
Con esta casilla de verificación se activa la función de los finales de carrera por software
inferior y superior. En el diagrama de curvas no se muestran los movimientos resultantes de
alcanzar finales de carrera por software.

Posición final de carrera SW inferior/superior
En estos campos se especifica el valor de posición de los finales de carrera por software
inferior y superior.
Final de carrera por software

Valor límite

Final de carrera SW inferior

de -1.0E12 a -1.0E-12
0.0
de 1.0E-12 a 1.0E12

2438

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Final de carrera por software

Valor límite

Final de carrera SW superior

de -1.0E12 a -1.0E-12
0.0
de 1.0E-12 a 1.0E12

El valor del final de carrera por software superior debe ser mayor o igual al valor del final de
carrera por software inferior.

6.2.7

Cargar en la CPU
Los datos de los objetos tecnológicos Motion Control se guardan en bloques de datos. Para
cargar un objeto tecnológico nuevo o modificado rigen por lo tanto las condiciones para la
carga de "Bloques".
PRECAUCIÓN
Posibles fallos en el funcionamiento del eje al cargar sin configuración hardware
La configuración de hardware cambia cuando se realizan los siguientes cambios en la
configuración del eje o el encóder:
● Modificación del generador de impulsos (PTO)
● Modificación de la dirección del final de carrera por HW
● Modificación de la dirección del sensor del punto de referencia
● Modificación de la dirección del telegrama PROFIdrive
● Modificación de la dirección de la salida analógica
● Modificación de la dirección de la salida de habilitación o de la entrada de disponibilidad
Si la configuración modificada del eje o el encóder se carga mediante los comandos del menú
contextual "Software" o "Software (todos los bloques)" sin cargar la configuración hardware,
puede producirse un fallo de funcionamiento del eje.
Asegúrese de cargar la configuración hardware actual en la CPU bajo las condiciones
mencionadas.

Carga en el estado operativo RUN de la CPU S7-1200 (a partir de la versión de firmware V2.2)
A partir de la versión de firmware V2.2 de la CPU S7-1200, al realizar una carga en el estado
operativo RUN se comprueba si es posible cargar sin conmutar la CPU a STOP.
Al cargar los bloques de datos en el estado operativo RUN rigen las condiciones siguientes:

Valores modificados del bloque de datos

Carga en la memoria de carga

Carga en la memoria de trabajo

SÍ

No

Estructura modificada del bloque de da‐ Sí (a partir de la versión de firmware V4) Sí (a partir de la versión de firmware V4)
tos
● Durante la carga con reinicialización
● Para variables en la reserva al
cargar sin reinicialización
No (firmware V2.2...3)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

No (firmware V2.2...3)

2439

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Carga en la memoria de carga

Carga en la memoria de trabajo

Bloque de datos nuevo

SÍ

SÍ

Bloque de datos borrado

SÍ

SÍ

Tenga en cuenta también lo siguiente al borrar y cargar con reinicialización de bloques de
datos:
● Al cargar un objeto tecnológico Eje de posicionamiento, el eje debe estar bloqueado.
● Al cargar un objeto tecnológico Tabla de órdenes no debe haber ninguna orden
MC_CommandTable activa con esta tabla de órdenes (parámetro "Busy" = FALSE).
● Al cargar un bloque de datos de instancia MC_Power, no debe estar activa la
correspondiente instrucción MC_Power (parámetro "Busy" = FALSE).
A partir de la versión tecnológica V3.0, los objetos tecnológicos Motion Control (bloques de
datos) también pueden cargarse con la CPU en el estado operativo RUN.
Los objetos tecnológicos de versión inferior a V3.0 no pueden cargarse con la CPU en el
estado operativo RUN.
Seleccione una de las acciones descritas a continuación para cargar en la memoria de trabajo
la configuración modificada de un objeto tecnológico Motion Control (a partir de la versión
V3.0):
● Objeto tecnológico Eje de posicionamiento y tabla de órdenes
Cambie el estado operativo de la CPU de STOP a RUN.
● Objeto tecnológico Eje de posicionamiento
Bloquee el eje y ejecute un "Restart" con la instrucción Motion Control "MC_Reset".
● Objeto tecnológico Tabla de órdenes
Asegúrese de que la tabla de órdenes no se utiliza. Cargue el bloque de datos de la tabla
de órdenes en la memoria de trabajo con la instrucción avanzada "READ_DBL".

Consulte también
Guía para utilizar Motion Control (Página 2333)

6.2.8

Puesta en servicio

6.2.8.1

Panel de mando del eje
Utilice el panel de mando del eje para mover el eje en modo manual, optimizar los ajustes del
eje y realizar un test de su instalación.
El panel de mando del eje solo puede manejarse si hay establecida una conexión online con
la CPU. Se recomienda desactivar cualquier otra comunicación online durante el uso del panel
de mando del eje y la optimización para mantener los tiempos de reacción lo más cortos
posible.

2440

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
El panel de mando del eje está dividido en las siguientes áreas:
● Control maestro
● Eje
● Orden
● Valores actuales
● Estado del eje
Nota
Tiempos de reacción del panel de mando del eje
El tiempo de reacción durante el manejo del panel de mando del eje depende de la carga de
comunicación de la CPU. Cierre las demás ventanas online del TIA Portal para minimizar el
tiempo de reacción.
En el cuadro de diálogo de inicio también puede adaptar el Timeout.

Control maestro
Esta área permite asumir el control maestro del objeto tecnológico o devolverlo al programa de
usuario:
● Botón "Activar"
Con en el botón "Activar" se establece una conexión online con la CPU y se asume el
control del objeto tecnológico seleccionado. Observe lo siguiente al activar el control
maestro:
– Para poder asumir el control maestro, el objeto tecnológico tiene que estar bloqueado
en el programa de usuario.
– Hasta que no se devuelve el control, el programa de usuario no puede influir en las
funciones del objeto tecnológico. Las órdenes de Motion Control del programa de
usuario al objeto tecnológico se rechazan con un error.
PRECAUCIÓN
Ejes adicionales en el modo automático
El control maestro se aplica solo al objeto tecnológico seleccionado. Si hay otros ejes
en modo automático, pueden producirse situaciones peligrosas.
En ese caso, bloquee todos los ejes adicionales.
● Botón "Ceder"
Con el botón "Ceder" se devuelve el control maestro al programa de usuario.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2441

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Eje
En esta área se habilita o se bloquea el objeto tecnológico para el funcionamiento con el panel
de mando del eje/la optimización:
● Botón "Habilitar"
Con el botón "Habilitar" se habilita el objeto tecnológico seleccionado.
● Botón "Bloquear"
Con el botón "Bloquear" se bloquea el objeto tecnológico seleccionado.

Orden
El manejo en el área "Orden" solo es posible con el eje habilitado. Seleccione uno de los
siguientes comandos:
● JOG
El comando se corresponde con la orden "MC_MoveJog" de Motion Control del programa
de usuario.
● Posicionamiento
El comando se corresponde con las órdenes de Motion Control "MC_MoveAbsolute" y
"MC_MoveRelative" del programa de usuario. Para realizar un posicionamiento absoluto es
necesario que el eje esté referenciado.
● Referenciado
El comando se corresponde con la orden "MC_Home" de Motion Control del programa de
usuario.
– El botón "Fijar punto de referencia" equivale a Mode = 0 (referenciado directo absoluto)
– El botón "Referenciado" equivale a Mode = 3 (referenciado activo)
Para el referenciado activo se debe haber configurado el sensor del punto de referencia en
la configuración del eje.
Los valores para las velocidades de aproximación y referenciado y para el offset del punto
de referencia se toman, sin modificaciones, de la configuración del eje.
Dependiendo de la selección aparecen los campos relevantes para la entrada de las
consignas y botones para iniciar el comando.
Marque la casilla de verificación "Activar limitación de tirones" para activar la limitación de
tirones. De forma predeterminada, se adopta el tirón con el 10 % del valor configurado. Este
valor se puede modificar según sea necesario.

Valores actuales
En esta área se muestran los siguientes valores reales del eje:
● Posición
● Velocidad

2442

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Estado del eje
En el área "Estado del eje" se muestra el estado actual del eje y del accionamiento.
Aviso de estado

Descripción

Habilitado

El eje está habilitado y listo para ser controlado con órdenes de Motion Control.

Referenciado

El eje está referenciado y puede ejecutar órdenes de posicionamiento absoluto de la instrucción
"MC_MoveAbsolute" de Motion Control.

Listo

El accionamiento está listo.

Error en eje

Se ha producido un error en el objeto tecnológico Eje de posicionamiento. La causa detallada del
error se indica en el campo "Mensaje de error".

Valores del encóder váli‐
dos

Los valores del encóder son válidos.

Simulación activa

El eje se simula en la CPU. Las consignas no se emiten al accionamiento.

Error accionamiento

El accionamiento ha indicado un error debido a un fallo de la señal de disponibilidad.

Restart necesario

En la memoria de carga se ha cargado una configuración modificada del eje en el estado ope‐
rativo RUN de la CPU. Para cargar la configuración modificada en la memoria de trabajo, es
necesario reiniciar el eje. Para ello, utilice la instrucción de Motion Control "MC_Reset".

El campo "Mensaje de información" muestra información detallada sobre el estado del eje.
El campo "Mensaje de error" indica el error actual.
Una vez solucionados, confirme los errores pendientes haciendo clic en el botón "Confirmar".
Nota
Valores iniciales de velocidad, aceleración/deceleración y tirón
Por razones de seguridad, al activar el panel de mando del eje, los parámetros "Velocidad",
"Aceleración/deceleración" y "Tirón" se inicializan únicamente con el 10 % de los valores
ajustados en la configuración. El parámetro "Tirón" se utiliza a partir del objeto tecnológico
"Eje" V2.0.
Para la inicialización se toman como base los valores de la vista de configuración "Parámetros
avanzados > Dinámica > General".
El parámetro "Velocidad" del panel de mando del eje se deriva de la "Velocidad máxima" y el
parámetro "Aceleración/deceleración" se deriva de la "Aceleración" de la configuración.
Los parámetros "Velocidad", "Aceleración/deceleración" y "Tirón" pueden modificarse en el
panel de mando del eje. Los valores de la configuración no se ven afectados por ello.

6.2.8.2

Optimización
El movimiento de los ejes con conexión del accionamiento a través de PROFIdrive/salida
analógica se efectúa con regulación de posición.
La función "Optimización" ayuda a determinar la ganancia óptima (factor Kv) para el lazo de
regulación (Página 2395) del eje. Para ello, con la función Trace se registra la curva de
velocidad del eje durante un movimiento de posicionamiento especificable. Seguidamente,
existe la posibilidad de evaluar el registro y adaptar la ganancia en correspondencia. Se
recomienda desactivar cualquier otra comunicación online durante el uso del panel de mando
del eje y la optimización para mantener los tiempos de reacción lo más cortos posible.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2443

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
En el árbol del proyecto encontrará la función "Optimización" del objeto tecnológico Eje de
posicionamiento en "Objeto tecnológico > Puesta en marcha".
El cuadro de diálogo "Optimización" está dividido en las siguientes áreas:
● Control maestro
● Eje
● Estado del eje
● Optimizar ganancia
● Efectuar la medición
● Trace
Nota
Los parámetros no se aplican
Los valores de parámetros ajustados se rechazan tras devolver el control. En caso necesario,
transfiera los valores a la configuración.
Inicio de la optimización
Al iniciar la optimización, Trace se inicia simultáneamente. En este caso se puede adaptar un
Timeout en el cuadro de diálogo de inicio.

Control maestro
Esta área permite asumir el control maestro del objeto tecnológico o devolverlo al programa de
usuario:
● Botón "Activar"
Con en el botón "Activar" se establece una conexión online con la CPU y se asume el
control del objeto tecnológico seleccionado. Observe lo siguiente al activar el control
maestro:
– Para poder asumir el control maestro, el objeto tecnológico tiene que estar bloqueado
en el programa de usuario.
– Hasta que no se devuelve el control, el programa de usuario no puede influir en las
funciones del objeto tecnológico. Las órdenes de Motion Control del programa de
usuario al objeto tecnológico se rechazan con un error.
PRECAUCIÓN
Ejes adicionales en el modo automático
El control maestro se aplica solo al objeto tecnológico seleccionado. Si hay otros ejes
en modo automático, pueden producirse situaciones peligrosas.
En ese caso, bloquee todos los ejes adicionales.
● Botón "Ceder"
Con el botón "Ceder" se devuelve el control maestro al programa de usuario.

2444

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Eje
En esta área se habilita o se bloquea el objeto tecnológico para el funcionamiento con el panel
de mando del eje/la optimización:
● Botón "Habilitar"
Con el botón "Habilitar" se habilita el objeto tecnológico seleccionado.
● Botón "Bloquear"
Con el botón "Bloquear" se bloquea el objeto tecnológico seleccionado.

Estado del eje
En el área "Estado del eje" se muestra el estado actual del eje y del accionamiento.
Aviso de estado

Descripción

Habilitado

El eje está habilitado y listo para ser controlado con órdenes de Motion Control.

Referenciado

El eje está referenciado y puede ejecutar órdenes de posicionamiento absoluto de la instrucción
"MC_MoveAbsolute" de Motion Control.

Listo

El accionamiento está listo.

Error en eje

Se ha producido un error en el objeto tecnológico Eje de posicionamiento. La causa detallada del
error se indica en el campo "Mensaje de error".

Valores del encóder váli‐
dos

Los valores del encóder son válidos.

Simulación activa

El eje se simula en la CPU. Las consignas no se emiten al accionamiento.

Error accionamiento

El accionamiento ha indicado un error debido a un fallo de la señal de disponibilidad.

Restart necesario

En la memoria de carga se ha cargado una configuración modificada del eje en el estado ope‐
rativo RUN de la CPU. Para cargar la configuración modificada en la memoria de trabajo, es
necesario reiniciar el eje. Utilice para ello la instrucción MC_Reset de Motion Control.

El campo "Mensaje de información" muestra información detallada sobre el estado del eje.
El campo "Mensaje de error" indica el error actual.
Una vez solucionados, confirme los errores pendientes haciendo clic en el botón "Confirmar".

Optimizar ganancia
En esta área se llevan a cabo los ajustes para optimizar la ganancia:
● Precontrol
Configure en este campo el precontrol de velocidad porcentual actual para la regulación de
posición.
● Recorrido
Configure en este campo el recorrido para un paso de prueba.
● Casilla de verificación "Adaptar dinámica"
Active esta opción para adaptar la aceleración y la aceleración máxima para la optimización.
● Velocidad
Configure en este campo la velocidad máxima para un paso de prueba.
● Aceleración
Configure en este campo la aceleración para un incremento de prueba.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2445

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
● Tiempo de medición
El tiempo de medición se vuelve a calcular en cada caso dependiendo de la aceleración, la
velocidad y el recorrido seleccionados.
El valor del tiempo de medición se puede ajustar a posteriori.
● Ganancia
Configure en este campo la ganancia actual del regulador de posición (Kv).
La ganancia surtirá efecto al introducirla. Si la ganancia del regulador de posición (Kv) es
demasiado grande, puede provocar un error en el accionamiento.

Efectuar la medición
En esta área se ejecutan los pasos de prueba:
● Botón "Adelante"
Con el botón "Adelante" se inicia un paso de prueba en sentido positivo para la optimización.
● Botón "Atrás"
Con el botón "Atrás" se inicia un paso de prueba en sentido negativo para la optimización.
● Botón "Parada"
Con el botón "Parada" se finaliza el movimiento en curso de la optimización y el registro de
Trace.

Trace
Con cada incremento de prueba se inicia automáticamente un registro Trace de los
parámetros necesarios, el cual se visualiza tras finalizar el incremento de prueba. Una vez que
se ha devuelto el control se borra el registro Trace.
Encontrará una descripción completa de la función Trace en la ayuda del TIA Portal, en el
capítulo Función Trace y de analizador lógico.

6.2.9

Programar

6.2.9.1

Sinopsis de las instrucciones de Motion Control
Las instrucciones de Motion Control le permiten controlar el eje desde el programa de usuario.
Las instrucciones inician peticiones de Motion Control que ejecutan las funciones deseadas.
Puede consultar en los parámetros de salida de las instrucciones de Motion Control el estado
de las peticiones de Motion Control, así como los eventuales errores producidos durante su
procesamiento. Están disponibles las siguientes instrucciones de Motion Control:
● AUTOHOTSPOT
● AUTOHOTSPOT
● AUTOHOTSPOT
● AUTOHOTSPOT
● AUTOHOTSPOT

2446

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
● AUTOHOTSPOT
● AUTOHOTSPOT
● AUTOHOTSPOT
● AUTOHOTSPOT
● AUTOHOTSPOT
● AUTOHOTSPOT
● AUTOHOTSPOT

Consulte también
Crear un programa de usuario (Página 2447)
Notas de programación (Página 2450)
Comportamiento de peticiones de Motion Control tras desconexión y rearranque completo
(Página 2452)
Seguimiento de las peticiones activas (Página 2453)
Indicaciones de error de las instrucciones de Motion Control (Página 2464)

6.2.9.2

Crear un programa de usuario
A continuación se crea en el programa de usuario la estructura básica para controlar el eje. Las
instrucciones de Motion Control utilizadas permiten controlar todas las funciones del eje
disponibles.

Requisitos
● El objeto tecnológico está creado y configurado sin errores.
Antes de crear y probar el programa de usuario se recomienda probar el funcionamiento del eje
y de los elementos correspondientes de la instalación con el panel de mando del eje.

Procedimiento
Para crear el programa de usuario proceda conforme al principio descrito a continuación:
1. En el árbol del proyecto haga doble clic en su bloque lógico (el bloque lógico debe llamarse
en el programa cíclico).
El bloque lógico se abre en el editor de programación y se muestran las instrucciones
disponibles.
2. Abra la categoría "Tecnología" y la carpeta "Motion Control".
3. Arrastre con Drag & Drop la instrucción "MC_Power" al segmento que desee del bloque
lógico.
Se abre el cuadro de diálogo para definir el DB de instancia.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2447

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
4. Elija en el diálogo entre las siguientes alternativas:
Instancia individual
Haga clic en el botón "Instancia individual" y seleccione si desea determinar el nombre y el
número del DB de instancia automática o manualmente.
Multiinstancia
Haga clic en el botón "Multiinstancia" y seleccione si desea determinar el número de la
multiinstancia automática o manualmente.
5. Haga clic en el botón "Aceptar".
La instrucción de Motion Control "MC_Power" se inserta en el segmento.

Los parámetros marcados con "<???>" se deben asignar; el resto de parámetros se
encuentran asignados con valores predeterminados.
Los parámetros representados en negro son necesarios para usar la instrucción de Motion
Control.

2448

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
6. Seleccione el objeto tecnológico en el árbol del proyecto y arrástrelo con Drag & Drop hasta
<???>.

Una vez seleccionado el bloque de datos del objeto tecnológico están disponibles los
siguientes botones:

Haga clic en el símbolo del estetoscopio para abrir el diagnóstico del objeto tecnológico.

Haga clic en el símbolo de la caja de herramientas si desea abrir la vista de configuración
del objeto tecnológico.

Con un clic en la flecha hacia abajo se abre la vista de otros parámetros de la instrucción
Motion Control.

Los parámetros visibles representados ahora en gris pueden ser utilizados de manera
opcional.
7. Siga los pasos 3 a 6 para introducir otras instrucciones de Motion Control deseadas.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2449

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Resultado
Se ha creado la estructura básica para controlar el eje en el programa de usuario.
Introduzca en otras partes del programa de usuario los parámetros de entrada de las
instrucciones de Motion Control para lanzar las órdenes deseadas en el objeto tecnológico
"Eje".
Evalúe los parámetros de salida de las instrucciones de Motion Control y las variables del
bloque de datos del eje para hacer un seguimiento de las órdenes lanzadas y del estado del
eje.
Para más detalles acerca de los parámetros de las instrucciones de Motion Control consulte
las descripciones detalladas de los mismos.

Consulte también
Sinopsis de las instrucciones de Motion Control (Página 2446)
Notas de programación (Página 2450)
Comportamiento de peticiones de Motion Control tras desconexión y rearranque completo
(Página 2452)
Seguimiento de las peticiones activas (Página 2453)
Indicaciones de error de las instrucciones de Motion Control (Página 2464)

6.2.9.3

Notas de programación
Tenga en cuenta las siguientes indicaciones al crear su programa de usuario:
● Llamada cíclica de las instrucciones de Motion Control empleadas
El estado actual de procesamiento de las órdenes se puede consultar a través de los
parámetros de salida de la instrucción de Motion Control. El estado se actualiza cada vez
que se llama la instrucción Motion Control. Por ello, asegúrese de llamar las instrucciones
de Motion Control de forma cíclica.
● Aceptación de los valores de los parámetros de una instrucción de Motion Control
Los valores de los parámetros en los parámetros de entrada se aceptan con un flanco
positivo en el parámetro de entrada "Execute" al llamar el bloque.
La orden de Motion Control se inicia con estos valores de parámetros. Los valores de
parámetros modificados a posteriori en la instrucción de Motion Control no se aceptan
hasta el siguiente inicio de la orden de Motion Control.
Una excepción es el parámetro de entrada "StopMode" de la instrucción de Motion Control
"MC_Power" y "Velocity" de la instrucción de Motion Control "MC_MoveJog". Un cambio en
el parámetro de entrada también se aplica con "Enable" = TRUE, o bien "JogForward" y
"JogBackward".

2450

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
● Programación considerando las informaciones del estado
En un procesamiento paso a paso de órdenes de Motion Control asegúrese de que la orden
en curso haya finalizado antes de iniciar una nueva orden. Compruebe la finalización de la
orden en curso a través de los avisos de estado de la instrucción de Motion Control y de las
variables "StatusBits" del objeto tecnológico.
En los siguientes ejemplos se debe tener en cuenta la secuencia descrita. Si no se tiene en
cuenta se muestra un error del eje o de la orden.
– Habilitación del eje con la instrucción de Motion Control "MC_Power"
El eje debe ser habilitado antes de que éste pueda aceptar órdenes de movimiento.
Compruebe la habilitación del eje mediante una operación lógica Y de la variable
<Nombre del eje>.StatusBits.Enable = TRUE con el parámetro de salida Status = TRUE
de la instrucción de Motion Control "MC_Power".
– Acusar errores con la instrucción de Motion Control "MC_Reset"
Antes de iniciar una orden de Motion Control se deben acusar los errores activos con
"MC_Reset". Corrija la causa del error y acúselo con la instrucción de Motion Control
"MC_Reset". Compruebe que el error haya sido acusado correctamente antes de lanzar
una nueva orden. Emplee para ello una operación lógica Y de la variable <Nombre del
eje>.StatusBits.Error = FALSE con el parámetro de salida Done = TRUE de la
instrucción de Motion Control "MC_Reset".
– Referenciación del eje con la instrucción de Motion Control "MC_Home"
Antes de poder iniciar una orden MC_MoveAbsolute se debe referenciar el eje.
Compruebe tras la referenciación del eje su correcta finalización con una operación
lógica Y de la variable <Nombre del eje>.StatusBits.HomingDone = TRUE con el
parámetro de salida Done = TRUE de la instrucción de Motion Control "MC_Home".
● Procesamiento de relevo de órdenes de Motion Control
Las órdenes de Motion Control para mover el eje también se pueden ejecutar con carácter
de relevo.
Si se inicia una nueva orden de Motion Control del eje durante una orden de Motion Control
en curso, la orden en curso queda relevada por la nueva orden, sin que la orden en curso
deba ser ejecutada completamente. La orden relevada notifica esta circunstancia a la
instrucción de Motion Control mediante CommandAborted = TRUE. De esta forma, una
orden MC_MoveRelative en curso puede ser relevada, p.ej., por una orden
MC_MoveAbsolute.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2451

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
● Evitar la reutilización de la misma instancia
Todas las informaciones relevantes de una orden de Motion Control se guardan en su
instancia.
Cuando utilice esta instancia no inicie ninguna otra orden si desea hacer un seguimiento del
estado de la orden actual. Utilice distintas instancias si desea realizar un seguimiento por
separado de las órdenes. Si se utiliza la misma instancia para varias órdenes de Motion
Control, las informaciones de estado y error de las distintas órdenes se sobrescriben unas
a otras.
En el programa de usuario se debe llamar cada eje con una llamada propia de la instrucción
de Motion Control "MC_Power" con un bloque de datos de instancia propio.
● Llamada de instrucciones de Motion Control en distintas clases de prioridad (niveles de
ejecución)
Las instrucciones de Motion Control que tienen la misma instancia no pueden llamarse en
distintas clases de prioridad sin enclavamiento. Para más detalles sobre cómo llamar las
instrucciones de Motion Control enclavadas para efectuar un seguimiento, consulte el
apartado "Seguimiento de órdenes de clases de prioridad superiores (niveles de ejecución)
(Página 2477)".

Consulte también
Sinopsis de las instrucciones de Motion Control (Página 2446)
Crear un programa de usuario (Página 2447)
Comportamiento de peticiones de Motion Control tras desconexión y rearranque completo
(Página 2452)
Seguimiento de las peticiones activas (Página 2453)
Indicaciones de error de las instrucciones de Motion Control (Página 2464)
Realizar un seguimiento de las peticiones de clases de prioridad superiores (niveles de
procesamiento) (Página 2477)

6.2.9.4

Comportamiento de peticiones de Motion Control tras desconexión y rearranque
completo
Con un POWER OFF o STOP de la CPU se cancelan todas las órdenes de Motion Control
activas. Todas las salidas de la CPU se inicializan, incluidas las salidas de impulsos y sentido.
Con el siguiente POWER ON o rearranque completo de la CPU (CPU en RUN) se inicializan
nuevamente los objetos tecnológicos y las órdenes de Motion Control.
Todos los datos actuales de los objetos tecnológicos, así como toda la información de estado
y error de las órdenes de Motion Control activas anteriormente se ponen a los valores iniciales.
Antes de poder utilizar el eje nuevamente, es necesario habilitarlo con la instrucción de Motion
Control "MC_Power". Si desea una referenciación, también deberá referenciar el eje
nuevamente con la instrucción de Motion Control "MC_Home". Si se utiliza un encóder
absoluto, el referenciado también se mantiene después de la desconexión (POWER OFF).

2452

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Consulte también
Sinopsis de las instrucciones de Motion Control (Página 2446)
Crear un programa de usuario (Página 2447)
Notas de programación (Página 2450)
Seguimiento de las peticiones activas (Página 2453)
Indicaciones de error de las instrucciones de Motion Control (Página 2464)

6.2.9.5

Seguimiento de las peticiones activas

Seguimiento de las peticiones activas
Al realizar un seguimiento de las peticiones activas de Motion Control se pueden diferenciar
tres grupos típicos:
● Instrucciones Motion Control con el parámetro de salida "Done"
● La instrucción de Motion Control "MC_MoveVelocity"
● La instrucción de Motion Control "MC_MoveJog"

Instrucciones Motion Control con parámetro de salida Done
Las instrucciones de Motion Control con el parámetro de salida "Done" se inician a través del
parámetro de entrada "Execute" y tienen un final definido (p. ej. con la instrucción de Motion
Control "MC_Home": Referenciación realizada con éxito). Con ello, la orden concluye y el eje
se para.
Las órdenes de la siguiente instrucción de Motion Control tienen un final predeterminado:
● MC_Reset
● MC_Home
● MC_Halt
● MC_MoveAbsolute
● MC_MoveRelative
● MC_CommandTable (a partir del objeto tecnológico V2)
● MC_ChangeDynamic (a partir del objeto tecnológico V2)
● MC_WriteParam (a partir del objeto tecnológico V4)
● MC_ReadParam (a partir del objeto tecnológico V4)
El parámetro de salida "Done" muestra el valor TRUE si la orden se ejecuta con éxito.
Los parámetros de salida "Busy", "CommandAborted" y "Error" indican que la orden aún está
siendo procesada, ha sido cancelada o que se ha producido un error. La instrucción de Motion
Control "MC_Reset" no puede ser cancelada, por lo que no dispone de ningún parámetro de
salida "CommandAborted". Dado que la instrucción de Motion Control "MC_ChangeDynamic"
finaliza de forma inmediata, no dispone de ningún parámetro de salida "Busy" ni
"CommandAborted".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2453

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Mientras se procesa la orden de Motion Control el parámetro de salida "Busy" muestra el valor
TRUE. Si la orden ha concluido, ha sido cancelada o detenida por un error, el parámetro de
salida "Busy" cambia su valor a FALSE. Ello ocurre independientemente de la señal en el
parámetro de entrada "Execute".
Los parámetros de salida "Done", "CommandAborted" y "Error" muestran el valor TRUE
durante al menos un ciclo. Mientras el parámetro de entrada Execute sea TRUE, los avisos de
estado se mostrarán con memoria.
A continuación se muestra, a modo de ejemplo, el comportamiento del bit de estado en
diversas situaciones:

Procesamiento íntegro de la orden
Si la orden de Motion Control se procesa íntegramente hasta su finalización, ello se indica a
través del parámetro de salida "Done" con el valor TRUE. El estado de la señal del parámetro
de entrada "Execute" afecta a la duración de la visualización en el parámetro de salida "Done":
"Execute" cambia su valor durante el procesamiento de la
orden a FALSE

([HFXWH

%XV\

'RQH



([HFXWH




%XV\




'RQH




&RPPDQG
$ERUWHG 

(UURU

&RPPDQG
$ERUWHG



(UURU





①
②
③
④
⑤

"Execute" cambia su valor tras finalizar la orden a FALSE


























La orden se inicia con un flanco ascendente en el parámetro de entrada Execute. Según la programación, es posible
poner "Execute" al valor FALSE durante la orden o mantener el valor TRUE hasta después de finalizar la orden.
Mientras la orden se encuentra activa, el parámetro de salida "Busy" muestra el valor TRUE.
Una vez finalizada la orden (p. ej. con la instrucción de Motion Control "MC_Home": Referenciación realizada con éxito)
el parámetro de salida "Busy" cambia a FALSE y "Done" a TRUE.
Si "Execute" mantiene el valor TRUE hasta el final de la orden, "Done" también permanece en TRUE y cambia su valor
junto con "Execute" a FALSE.
Si "Execute" cambia a FALSE antes de que la orden finalice, "Done" muestra el valor TRUE únicamente durante un ciclo
de procesamiento.

2454

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Cancelación de la orden
Si la orden de Motion Control es cancelada durante su procesamiento, ello se indica a través
del parámetro de salida "CommandAborted" con el valor TRUE. El estado de la señal del
parámetro de entrada "Execute" afecta a la duración de la visualización en el parámetro de
salida "CommandAborted":
"Execute" cambia su valor a FALSE antes de cancelar la or‐ "Execute" cambia su valor a FALSE después de cancelar la
den.
orden.
Abort

([HFXWH

%XV\

'RQH

Abort



([HFXWH




%XV\




'RQH




②
③
④
⑤






&RPPDQG
$ERUWHG 



(UURU





①





&RPPDQG
$ERUWHG 

(UURU




















La orden se inicia con un flanco ascendente en el parámetro de entrada Execute. Según la programación, es posible
poner "Execute" al valor FALSE durante la orden o mantener el valor TRUE hasta después de finalizar la orden.
Mientras la orden se encuentra activa, el parámetro de salida "Busy" muestra el valor TRUE.
La orden es cancelada por otra orden de Motion Control durante su procesamiento. Con la cancelación de la orden el
parámetro de salida "Busy" cambia a FALSE y "CommandAborted" a TRUE.
Si "Execute" mantiene el valor TRUE hasta después de la cancelación de la orden, "CommandAborted" también per‐
manece en TRUE y cambia su valor junto con "Execute" a FALSE.
Si "Execute" cambia a FALSE ya antes de la cancelación de la orden, "CommandAborted" muestra el valor TRUE
únicamente durante un ciclo de procesamiento.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2455

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Error durante el procesamiento de la orden
Si se produce un error al procesar la orden de Motion Control, ello se muestra en el parámetro
de salida "Error" con el valor TRUE. El estado de la señal del parámetro de entrada "Execute"
afecta a la duración de la visualización en el parámetro de salida "Error":
"Execute" cambia su valor a FALSE antes de producirse el
error.

"Execute" cambia su valor a FALSE después de producirse el
error.
Error

Error

([HFXWH

%XV\

'RQH



([HFXWH




%XV\




'RQH




②
③
④
⑤






&RPPDQG
$ERUWHG 



(UURU





①





&RPPDQG
$ERUWHG 

(UURU




















La orden se inicia con un flanco ascendente en el parámetro de entrada Execute. Según la programación, es posible
poner "Execute" al valor FALSE durante la orden o mantener el valor TRUE hasta después de finalizar la orden.
Mientras la orden se encuentra activa, el parámetro de salida "Busy" muestra el valor TRUE.
Se produce un error al procesar la orden. Al producirse el error el parámetro de salida "Busy" cambia a FALSE y "Error"
a TRUE.
Si "Execute" mantiene el valor TRUE hasta después de producirse el error, "Error" también permanece en TRUE y
cambia su valor junto con "Execute" a FALSE.
Si "Execute" cambia a FALSE antes de producirse el error, "Error" muestra el valor TRUE únicamente durante un ciclo
de procesamiento.

Instrucción Motion Control MC_MoveVelocity
Una orden "MC_MoveVelocity" se inicia con un flanco ascendente en el parámetro "Execute".
El objetivo de la orden se cumple en cuanto se alcanza la velocidad parametrizada y el eje se
mueve a velocidad constante. En cuanto se alcanza y mantiene la velocidad parametrizada, en
el parámetro "InVelocity" se muestra el valor TRUE.
El movimiento del eje se puede detener, p. ej. con una orden "MC_Halt".
Los parámetros de salida "Busy", "CommandAborted" y "Error" indican que la orden aún está
siendo procesada, ha sido interrumpida o que se ha producido un error.

2456

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Mientras se procesa la orden de Motion Control el parámetro de salida "Busy" muestra el valor
TRUE. Si la orden es cancelada por otra orden o por un error, el parámetro de salida "Busy"
cambia su valor a FALSE. Ello ocurre independientemente de la señal en el parámetro de
entrada "Execute".
Los parámetros de salida "CommandAborted" y "Error" muestran el valor TRUE durante al
menos un ciclo. Mientras el parámetro de entrada Execute sea TRUE, los avisos de estado se
mostrarán con memoria.
A continuación se muestra, a modo de ejemplo, el comportamiento del bit de estado en
diversas situaciones:

Se alcanza la velocidad parametrizada
Si la orden de Motion Control se procesa hasta alcanzar la velocidad parametrizada, ello se
indica a través del parámetro de salida "InVelocity" con el valor TRUE. El parámetro "Execute"
no influye en la duración de visualización del parámetro "InVelocity".

([HFXWH
%XV\
,Q9HORFLW\









&RPPDQG
$ERUWHG 
(UURU






①
②



La orden se inicia con un flanco ascendente en el parámetro "Execute". Según la programación, "Execute" se puede
volver a poner a FALSE antes o después de alcanzar la velocidad parametrizada. Mientras se procesa la orden, el
parámetro "Busy" presenta el valor TRUE.
Al alcanzar la velocidad parametrizada, el parámetro "InVelocity" cambia a TRUE. Los parámetros "Busy" y "InVelocity"
se mantienen en el valor TRUE hasta que la orden "MC_MoveVelocity" es relevada por otra orden de Motion Control o
es cancelada con un error.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2457

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

La orden se cancela antes de alcanzar la velocidad parametrizada
Si la orden de Motion Control se cancela antes de alcanzar la velocidad parametrizada, ello se
indica en el parámetro de salida "CommandAborted" con el valor TRUE. El estado de la señal
del parámetro de entrada "Execute" afecta a la duración de la visualización en el parámetro de
salida "CommandAborted".
"Execute" cambia su valor a FALSE antes de cancelar la or‐ "Execute" cambia su valor a FALSE después de cancelar la
den.
orden.
Abort

Abort

([HFXWH

%XV\

,Q9HORFLW\



([HFXWH




%XV\




,Q9HORFLW\









&RPPDQG
$ERUWHG 



(UURU





①





&RPPDQG
$ERUWHG 

(UURU





 












La orden se inicia con un flanco ascendente en el parámetro de entrada Execute. Según la programación, es posible
poner "Execute" al valor FALSE durante la orden o mantener el valor TRUE hasta después de cancelar la orden.

②
③

Mientras la orden se encuentre activa, el parámetro de salida "Busy" mostrará el valor TRUE.

④

Si "Execute" mantiene el valor TRUE hasta después de cancelarse la orden, "CommandAborted" también permanece
a TRUE y cambia su estado junto con "Execute" a FALSE.

⑤

La orden es interrumpida por otra orden de Motion Control durante su procesamiento. Con la interrupción de la orden el
parámetro de salida "Busy" cambia a FALSE y "CommandAborted" a TRUE.

Si "Execute" vuelve a ser FALSE antes de cancelarse la orden, "CommandAborted" muestra el valor TRUE únicamente
durante un ciclo de procesamiento.

Nota
Bajo las siguientes condiciones no se muestra ninguna cancelación en el parámetro de salida
"CommandAborted":
Se ha alcanzado la velocidad parametrizada, el parámetro de entrada "Execute" es FALSE y
se lanza una nueva orden de Motion Control.

2458

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Antes de alcanzarse la velocidad parametrizada se produce un error
Si se produce un error mientras se procesa la orden de Motion Control antes de alcanzarse la
velocidad parametrizada, ello se muestra en el parámetro de salida "Error" con el valor TRUE.
El estado de la señal del parámetro de entrada "Execute" afecta a la duración de la
visualización en el parámetro de salida "Error":
"Execute" cambia su valor a FALSE antes de producirse el
error.

"Execute" cambia su valor a FALSE después de producirse el
error.
Error

Error

([HFXWH

%XV\

,Q9HORFLW\



([HFXWH




%XV\




,Q9HORFLW\









&RPPDQG
$ERUWHG 



(UURU





①





&RPPDQG
$ERUWHG 

(UURU





 












La orden se inicia con un flanco ascendente en el parámetro de entrada Execute. Según la programación, "Execute"
puede cambiar a FALSE durante la orden o mantener el valor TRUE hasta después de producirse el error.

②
③

Mientras la orden se encuentre activa, el parámetro de salida "Busy" mostrará el valor TRUE.

④

Si "Execute" mantiene el valor TRUE hasta después de producirse el error, "Error" también permanece en TRUE y
cambia su estado a FALSE con "Execute".

⑤

Se produce un error al procesar la orden. Al producirse el error el parámetro de salida "Busy" cambia a FALSE y "Error"
a TRUE.

Si "Execute" cambia a FALSE antes de producirse el error, "Error" muestra el valor TRUE únicamente durante un ciclo
de procesamiento.

Nota
Bajo las siguientes condiciones no se muestra ningún error en el parámetro de salida "Error":
Se ha alcanzado la velocidad parametrizada, el parámetro de entrada "Execute" tiene el valor
FALSE y se produce un error en el eje (p. ej., se alcanza el final de carrera por software).
El error del eje se indica únicamente en la instrucción de Motion Control "MC_Power".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2459

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Instrucción Motion Control MC_MoveJog
Las peticiones de la instrucción de Motion Control "MC_MoveJog" realizan un modo Jog.
Las peticiones de las instrucciones de Motion Control "MC_MoveJog" no tienen un final
definido. El objetivo de la petición se cumple en cuanto se alcanza por primera vez la velocidad
parametrizada y el eje se mueve a velocidad constante. En cuanto se alcanza la velocidad
parametrizada, en el parámetro de salida "InVelocity" se muestra el valor TRUE.
La petición finaliza en cuanto al parámetro de entrada "JogForward" o "JogBackward" es
FALSE y el eje se para por completo.
Los parámetros de salida "Busy", "CommandAborted" y "Error" indican que la petición aún está
siendo procesada, ha sido cancelada o que se ha producido un error.
Mientras se procesa la petición de Motion Control el parámetro de salida "Busy" muestra el
valor TRUE. Si la petición ha concluido, ha sido cancelada o detenida por un error, el parámetro
de salida "Busy" cambia su valor a FALSE.
El parámetro de salida "InVelocity" muestra el estado TRUE mientras que el eje se mueva a la
velocidad parametrizada. Los parámetros de salida "CommandAborted" y "Error" muestran el
estado durante al menos un ciclo. Mientras uno de los parámetros de entrada "JogForward" o
"JogBackward" es TRUE, los avisos de estado se muestran con copia.
A continuación se muestra, a modo de ejemplo, el comportamiento del bit de estado en
diversas situaciones:

2460

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Se alcanza y mantiene la velocidad parametrizada
Si la petición de Motion Control se procesa hasta alcanzar la velocidad parametrizada, ello se
indica a través del parámetro de salida "InVelocity" con el valor TRUE.
El modo Jog se controla a través del parámetro de entrada
"JogForward"
-RJ)RUZDUG

-RJ%DFNZDUG

%XV\

,Q9HORFLW\



-RJ)RUZDUG




-RJ%DFNZDUG




%XV\




,Q9HORFLW\












&RPPDQG
$ERUWHG 



(UURU 

(UURU



⑤





&RPPDQG
$ERUWHG 

①
②
③
④

El modo Jog se controla a través del parámetro de entrada
"JogBackward".






















La petición se inicia con un flanco ascendente en el parámetro de entrada "JogForward" o "JogBackward".
Mientras la petición se encuentra activa, el parámetro de salida "Busy" muestra el valor TRUE.
Al alcanzar la velocidad parametrizada el parámetro de salida "InVelocity" cambia a TRUE.
El movimiento del eje finaliza en cuanto se reajusta el parámetro de entrada "JogForward" o "JogBackward" al valor
FALSE. El eje comienza a decelerar. De esta forma, el eje deja de moverse a velocidad constante y el parámetro de
salida "InVelocity" cambia su estado a FALSE.
En cuanto el eje se para, la petición de Motion Control finaliza y el parámetro de salida "Busy" cambia su valor a FALSE.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2461

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

La petición se cancela durante el procesamiento
Si la petición de Motion Control es cancelada durante su procesamiento, ello se indica a través
del parámetro de salida "CommandAborted" con el valor TRUE. El comportamiento depende
de si se ha alcanzado o no la velocidad parametrizada.
El modo Jog se controla a través del parámetro de entrada
"JogForward".

El modo Jog se controla a través del parámetro de entrada
"JogBackward".
Abort

Abort

-RJ)RUZDUG

-RJ%DFNZDUG

%XV\

,Q9HORFLW\



-RJ)RUZDUG




-RJ%DFNZDUG




%XV\



④












&RPPDQG
$ERUWHG 



(UURU





①
②
③



,Q9HORFLW\ 



&RPPDQG 
$ERUWHG 

(UURU




















La petición se inicia con un flanco ascendente en el parámetro de entrada "JogForward" o "JogBackward".
Mientras la petición se encuentra activa, el parámetro de salida "Busy" muestra el valor TRUE.
La petición es cancelada por otra petición de Motion Control durante su procesamiento. Con la cancelación de la petición
el parámetro de salida "Busy" cambia a FALSE y "CommandAborted" a TRUE.
Al inicializar el parámetro de entrada "JogForward" o "JogBackward" al valor FALSE, el valor del parámetro de sali‐
da"CommandAborted" cambia su valor a FALSE.

Nota
La cancelación de la petición se muestra en el parámetro de salida "CommandAborted"
únicamente durante un ciclo de procesamiento, cuando se cumplen todas las condiciones
siguientes:
Los parámetros de entrada "JogForward" y "JogBackward" tienen el valor FALSE (el eje
continúa no obstante decelerando) y se lanza una nueva petición de Motion Control.

2462

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Se produce un error mientras se procesa la petición
Si se produce un error mientras se procesa la petición de Motion Control, ello se muestra en
el parámetro de salida "Error" con el valor TRUE. El comportamiento depende de si se ha
alcanzado o no la velocidad parametrizada.
El modo Jog se controla a través del parámetro de entrada
"JogForward".

El modo Jog se controla a través del parámetro de entrada
"JogBackward".

Error

-RJ)RUZDUG

-RJ%DFNZDUG

%XV\

,Q9HORFLW\

Error

-RJ)RUZDUG





-RJ%DFNZDUG




%XV\




,Q9HORFLW\



④








&RPPDQG
$ERUWHG 



(UURU





①
②
③





&RPPDQG 
$ERUWHG 

(UURU




















La petición se inicia con un flanco ascendente en el parámetro de entrada "JogForward" o "JogBackward".
Mientras la petición se encuentra activa, el parámetro de salida "Busy" muestra el valor TRUE.
Se produce un error al procesar la petición. Al producirse el error el parámetro de salida "Busy" cambia a FALSE y "Error"
a TRUE.
Al reajustar el parámetro de entrada "JogForward" o "JogBackward" a FALSE, el valor del parámetro de salida"Error"
cambia su valor a FALSE.

Nota
Si se produce un error, éste se muestra en el parámetro de salida "Error" únicamente durante
un ciclo de procesamiento, si se cumplen todas las condiciones siguientes:
Los parámetros de entrada "JogForward" y "JogBackward" tienen el valor FALSE (el eje
continúa no obstante decelerando) y se produce un error (p.ej. se alcanza un final de carrera
por software).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2463

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

6.2.9.6

Indicaciones de error de las instrucciones de Motion Control
Las instrucciones de Motion Control muestran posibles errores de las órdenes de Motion
Control y del objeto tecnológico en los parámetros de salida "Error", "ErrorID" y "ErroInfo" de
las instrucciones de Motion Control.

Indicación de errores en los parámetros de salida "Error", "ErrorID" y "ErrorInfo"
El parámetro de salida "Error" muestra el valor TRUE para indicar que la orden no ha podido
ser ejecutada o que ésta no se ha ejecutado completamente. La causa del error se desprende
del valor del parámetro de salida "ErrorID" . El valor del parámetro de salida "ErrorInfo" provee
información detallada sobre la causa del error. En la indicación de errores se distingue entre
las siguientes clases de error:
● Error de funcionamiento con parada del eje (p.ej. "final de carrera por hardware alcanzado")
Los errores de funcionamiento con parada del eje son errores que surgen en el programa
de usuario en tiempo de ejecución. Si el eje se encuentra en movimiento, en función del
error se detiene con la deceleración configurada o con la de parada de emergencia. Los
errores se muestran en la instrucción de Motion Control causante del error y en la
instrucción de Motion Control "MC_Power".
● Error de funcionamiento sin parada del eje (p.ej. "eje no referenciado")
Los errores de funcionamiento sin parada del eje son errores que surgen en el programa de
usuario en tiempo de ejecución. Si el eje se encuentra en movimiento, el movimiento
continúa. Los errores sólo se muestran en la instrucción de Motion Control causante del
error.
● Error de parametrización de la instrucción de Motion Control
(p. ej. "Valor incorrecto en el parámetro "Velocity")
Los errores de parametrización se producen cuando existen indicaciones incorrectas en los
parámetros de entrada de las instrucciones de Motion Control. Si el eje se encuentra en
movimiento, el movimiento continúa. Los errores sólo se muestran en la instrucción de
Motion Control causante del error.
● Error de configuración en el objeto tecnológico "Eje" (p. ej. el valor de "aceleración" no es
válido)
Se produce un error de configuración cuando en la configuración del eje se configuran
incorrectamente uno o varios parámetros o cuando se modifican incorrectamente datos de
configuración modificables durante el tiempo de ejecución del programa. Si el eje se
encuentra en movimiento, éste para con la deceleración de parada de emergencia
configurada. El error se muestra en la instrucción de Motion Control causante del error y en
la instrucción de Motion Control "MC_Power".
● Error de configuración en el TO "Tabla de órdenes " (p. ej., "El valor de "Velocidad" no es
válido")
Existe un error de configuración cuando en la configuración de la tabla de órdenes se
configuran incorrectamente uno o varios parámetros o cuando se modifican
incorrectamente datos de configuración modificables durante el tiempo de ejecución del
programa. Si el eje se encuentra en movimiento, el movimiento continúa. Los errores se
indican únicamente en la instrucción de Motion Control "MC_CommandTable".
● Error interno
El eje se para en cuanto se produce un error interno. Los errores se muestran en la
instrucción de Motion Control causante del error y, en parte, en la instrucción de Motion
Control "MC_Power".

2464

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
En el anexo (Página 2578) encontrará una descripción detallada de los ErrorID y ErrorInfo, así
como ayudas para ellos.

Consulte también
Sinopsis de las instrucciones de Motion Control (Página 2446)
Crear un programa de usuario (Página 2447)
Notas de programación (Página 2450)
Comportamiento de peticiones de Motion Control tras desconexión y rearranque completo
(Página 2452)
Lista de los ErrorID y las ErrorInfos (objetos tecnológicos V4...5) (Página 2578)
Seguimiento de las peticiones activas (Página 2453)

6.2.9.7

Reinicialización de objetos tecnológicos

Descripción
El sistema inicializa automáticamente los objetos tecnológicos después de conectar la CPU y
después de cargar los valores iniciales del bloque de datos tecnológico en la CPU. Si al volver
a realizar la carga en la CPU se detectan cambios relevantes para la reinicialización, el objeto
tecnológico se reinicializa automáticamente.
Si con el programa de usuario se han modificado datos relevantes para la reinicialización en
RUN, el usuario debe reinicializar el objeto tecnológico para que se apliquen los cambios.
Si desea guardar los cambios en el bloque de datos tecnológico incluso tras la reinicialización
del objeto tecnológico, es necesario escribir los cambios en el valor inicial de la memoria de
carga con la instrucción avanzada "WRIT_DBL".

Restart necesario
Si es necesario reiniciar el objeto tecnológico, se indica en "Objeto tecnológico > Diagnóstico
> Bits de estado y error > Avisos de estado > Eje > Restart necesario" y en la variable del objeto
tecnológico "<Nombre de eje>.StatusBits.RestartRequired".

Reinicio de un objeto tecnológico
El usuario reinicializa el objeto tecnológico con la instrucción "MC_Reset" de Motion Control
con el parámetro "Restart" = TRUE.
Con un reinicio se restablece el estado "referenciado" de un objeto tecnológico con valores
reales incrementales (<Nombre de eje>.StatusBits.HomingDone).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2465

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

6.2.9.8

Transferencia de parámetros para bloques de función
Si se desea reutilizar un bloque de función con instrucciones de Motion Control para diversos
objetos tecnológicos, es necesario generar en la interfaz del bloque de función llamante un
parámetro de entrada del tipo de datos del objeto tecnológico correspondiente. El tipo de datos
se asigna en la interfaz de bloque mediante entrada directa. Después, este parámetro se
transfiere al parámetro "axis" de las instrucciones de Motion Control como referencia al objeto
tecnológico. Los tipos de datos de objetos tecnológicos corresponden a la estructura del
bloque de datos de tecnología correspondiente.
Indicando el tipo de datos, las variables del objeto tecnológico se direccionan en el bloque de
función (<Parámetros de la interfaz de bloque>.<Variable del objeto tecnológico>).
Si no se necesita acceder a las variables del objeto tecnológico, puede utilizarse el tipo de
datos "DB_ANY". El tipo de datos "DB_Any" permite una programación más variable.
La tabla siguiente muestra los tipos de datos para la referencia a los objetos tecnológicos:

Objeto tecnológico

Tipo de datos para la referencia al objeto tecnológico

Eje de posicionamiento

TO_PositioningAxis

Tabla de órdenes

TO_CommandTable

Ejemplo 1
La tabla siguiente muestra la definición de las variables utilizadas:
Operando

Declaración

Tipo de datos

Descripción

axis

Input

TO_PositioningAxis

Referencia al objeto tecnológico

on

Input

BOOL

Señal para habilitar el eje

actPosition

Output

Real

Consulta de la posición real del bloque de datos de
tecnología

MC_POWER

Multiinstancia de la instrucción de Motion Control
MC_Power

instMC_POWER Static

El siguiente programa SCL muestra cómo realizar la tarea:
SCL

Explicación

#instMC_POWER(Axis := #axis, Enable := #on);

//Llamada de la instrucción de Motion Control
MC_Power con habilitación del eje

#actPosition := #axis.ActualPosition;

//Consulta de la posición real del bloque de datos
de tecnología

Ejemplo 2
El tipo de datos "DB_Any" ofrece otra posibilidad para transferir los tipos de datos de un objeto
tecnológico. El tipo de datos "DB_Any" puede asignarse en el programa en tiempo de
ejecución.
El ejemplo ilustra dos posibilidades para transferir tipos de datos tecnológicos a una
instrucción de este tipo, p ej., "MC_CommandTable", creada como multiinstancia. La primera
ilustra el uso del tipo de datos "TO_PositioningAxis". La segunda posibilidad ilustra la
transferencia sencilla del objeto tecnológica Lista de órdenes en función de la entrada

2466

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
"cmdTablToUse". Según sea el valor a la entrada se transferirá una de las tres entradas
"cmdTablx" a la instrucción "MC_CommandTable" mediante "tempCmdTableSel".
La tabla siguiente muestra la declaración de las variables utilizadas:
Variable

Declaración

Tipo de datos

Descripción

axis

Input

TO_PositioningAxis

Eje de posicionamiento

cmdTabl1

Input

DB_ANY

Primera tabla de órdenes

cmdTabl2

Input

DB_ANY

Segunda tabla de órdenes

cmdTabl3

Input

DB_ANY

Tercera tabla de órdenes

cmdTablToUse

Input

Int

Selección Tablas de órdenes 1 a 3

instMC_Com‐
mandTable

Static

MC_CommandTable

Multiinstancia de MC_CommandTable

tempCmdTable‐
Sel

Temp

DB_ANY

Tabla de órdenes actual

El ejemplo siguiente muestra el procedimiento básico:
SCL

Explicación

CASE #cmdTablToUse OF
1:

#tempCmdTableSel := #cmdTabl1;

//Programa para el caso 1

2:

#tempCmdTableSel := #cmdTabl2;

//Programa para el caso 2

3:

#tempCmdTableSel := #cmdTabl3;

//Programa para el caso 3

ELSE

//programa para los demás valores:
#tempCmdTableSel := #cmdTabl1;

//-> ajuste predeterminado primera tabla de órdenes

END_CASE;
//Llamada de la instrucción "MC_CommandTable"
//con transferencia variable de los objetos tecnológicos
#instMC_CommandTable(Axis:=#axis,
CommandTable:=#temCmdTableSel);

//Asignación del eje
//Asignación indirecta de la tabla de órdenes

Información adicional
Encontrará más ejemplos de programación con el tipo de datos "DB_Any" en la FAQ siguiente:
https://support.industry.siemens.com/cs/ww/es/view/109750880 (https://
support.industry.siemens.com/cs/ww/en/view/109750880)

6.2.10

Diagnóstico del eje

6.2.10.1

Bits de estado y error (objetos tecnológicos a partir de V4)
Con la función de diagnóstico "Bits de estado y error" se vigilan en el TIA Portal los principales
mensajes de estado y error del eje. Cuando el eje está activado, la indicación de la función de
diagnóstico está disponible en el modo online, en los modos de operación "Control manual" y
"Modo automático". Los mensajes de estado y error mostrados tienen el significado siguiente:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2467

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Mensajes de estado
Mensaje de estado - Eje

Descripción

Habilitado

El eje está habilitado y listo para ser controlado con órdenes de Motion Control.
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.Enable)

Referenciado

El eje está referenciado y puede ejecutar órdenes de posicionamiento absoluto de la instrucción
"MC_MoveAbsolute" de Motion Control. Para realizar un posicionamiento relativo no es nece‐
sario que el eje esté referenciado. Casos especiales:
● Durante el referenciado activo el estado es FALSE.
● Si se referencia un eje de forma pasiva, el estado durante el referenciado pasivo es TRUE.
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.HomingDone)

Error en eje

Se ha producido un error en el objeto tecnológico "Eje". En el modo automático, la información
detallada sobre el error se puede consultar en los parámetros ErrorID y ErrorInfo de las instruc‐
ciones de Motion Control. En el modo manual, la causa detallada del error se muestra en el
campo "Aviso de error" del panel de mando del eje.
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.Error)

Panel de mando activo

Se ha activado el modo de operación "Control manual" en el panel de mando del eje. El panel de
mando asume la autoridad sobre el control del objeto tecnológico "Eje". El eje no puede ser
controlado por el programa de usuario.

Restart necesario

En la memoria de carga se ha cargado una configuración modificada del eje en el estado ope‐
rativo RUN de la CPU. Para cargar la configuración modificada en la memoria de trabajo, es
necesario reiniciar el eje. Utilice para ello la instrucción MC_Reset de Motion Control.

(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.ControlPanelActive)

(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.RestartRequired)

Mensaje de estado - Ac‐
cionamiento

Descripción

Listo

El accionamiento está listo.

Error accionamiento

El accionamiento ha indicado un error debido a un fallo de la señal de disponibilidad.

(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.DriveReady)
(Variable del objeto tecnológico: <Nombre del eje>.ErrorBits.DriveFault)

Aviso de estado - Movi‐
miento

Descripción

Parada

El eje está parado.
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.StandStill)

Aceleración

El eje está acelerando.
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.Accelerating)

Velocidad constante

El eje se mueve a una velocidad constante.
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.ConstantVelocity)

Deceleración

El eje está decelerando (frenando).
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.Decelerating)

2468

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Mensaje de estado - Tipo
de movimiento

Descripción

Posicionamiento

El eje ejecuta una orden de posicionamiento de la instrucción de Motion Control "MC_MoveAb‐
solute", "MC_MoveRelative" o del panel de mando del eje.
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.PositioningCommand)

Movimiento con veloci‐
dad predeterminada

El eje ejecuta una orden a la velocidad especificada en la instrucción de Motion Control "MC_Mo‐
veVelocity", "MC_MoveJog" o en el panel de mando del eje.
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.VelocityCommand)

Referenciado

El eje ejecuta una orden de referenciado de la instrucción de Motion Control "MC_Home" o del
panel de mando del eje.
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.HomingCommand)

Tabla de órdenes activa

El eje se controla con la instrucción de Motion Control "MC_CommandTable".
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.CommandTableActive)

Mensajes de estado de finales de carrera
Mensajes de estado de finales
de carrera

Descripción

Final de carrera por SW infe‐
rior alcanzado

Se ha alcanzado o sobrepasado un final de carrera por software.

Final de carrera por SW supe‐
rior alcanzado

Se ha alcanzado o sobrepasado un final de carrera por hardware.

Final de carrera por HW infe‐
rior alcanzado

Se ha alcanzado o sobrepasado el final de carrera por hardware inferior.

(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.SWLimitMinActive)
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.SWLimitMaxActive)
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.HWLimitMinActive)

Final de carrera por HW supe‐ Se ha alcanzado o sobrepasado el final de carrera por hardware superior.
rior alcanzado
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.HWLimitMaxActive)

Mensajes de error
Mensaje de error

Descripción

Final de carrera por SW alcan‐ Se ha alcanzado o sobrepasado un final de carrera por software.
zado
(Variable del objeto tecnológico: <Nombre del eje>.ErrorBits.SWLimit)
Final de carrera por HW alcan‐ Se ha alcanzado o sobrepasado un final de carrera por hardware.
zado
(Variable del objeto tecnológico: <Nombre del eje>.ErrorBits.HWLimit)
Sentido de movimiento no per‐ El sentido de la orden no se corresponde con el sentido configurado.
mitido
(Variable del objeto tecnológico: <Nombre del eje>.ErrorBits.DirectionFault)
PTO en uso

Un segundo eje utiliza el mismo PTO (Pulse Train Output) y HSC (High Speed Counter) y
se encuentra habilitado con "MC_Power".
(Variable del objeto tecnológico: <Nombre del eje>.ErrorBits.HWUsed)

Encóder

Error en el sistema del encóder.
(Variable del objeto tecnológico: <Nombre del eje>.ErrorBits.SensorFault)

Intercambio de datos

Hay interferencias en la comunicación con un dispositivo conectado.
(Variable del objeto tecnológico: <Nombre del eje>.ErrorBits.CommunicationFault)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2469

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Mensaje de error

Descripción

Posicionamiento

El eje no se ha posicionado correctamente al final de un movimiento de posicionamiento.
(Variable del objeto tecnológico: <Nombre del eje>.ErrorBits.PositionigFault)

Error de seguimiento

Se ha rebasado por exceso el error de seguimiento máximo admisible.
(Variable del objeto tecnológico: <Nombre del eje>.ErrorBits.FollowingErrorFault)

Los valores del encóder no son Los valores del encóder no son válidos.
válidos
(Variable del objeto tecnológico: <Nombre del eje>.StatusSensor.State)
Error de configuración

El objeto tecnológico "eje" ha sido configurado incorrectamente o se han modificado inco‐
rrectamente datos de configuración modificables durante el tiempo de ejecución del pro‐
grama de usuario.
(Variable del objeto tecnológico: <Nombre del eje>.ErrorBits.ConfigFault)

Error interno

Se ha producido un error interno.
(Variable del objeto tecnológico: <Nombre del eje>.ErrorBits.SystemFault)

En la ventana de salida que se encuentra debajo se muestra el primer error notificado y aún no
acusado.

Consulte también
Variables StatusBits V4...5 (Página 2647)
Variables ErrorBits V4...5 (Página 2652)
Bits de diagnóstico, estado y error (objeto tecnológico "Eje" V1...3) (Página 2576)
Lista de compatibilidad de las variables V1...3 <-> V4...5 (Página 2339)
Estado de movimiento (Página 2470)

6.2.10.2

Estado de movimiento
Con la función de diagnóstico "Estado de movimiento" se vigila el estado de movimiento del eje
en el TIA Portal. Cuando el eje está activado, la indicación de la función de diagnóstico está
disponible en el modo online, en los modos de operación "Control manual" y "Modo
automático". Las informaciones de estado mostradas tienen el siguiente significado:

Estado

Descripción

Posición real

El campo "Posición real" muestra la posición medida del eje. Si el eje no está referenciado, el
valor indica el valor de posicionamiento relativo a la posición de habilitación del eje.
(Variable del objeto tecnológico: <Nombre del eje>.ActualPosition)

Velocidad real

El campo "Velocidad real" muestra la velocidad medida del eje.
(Variable del objeto tecnológico: <Nombre del eje>.ActualVelocity)

Consigna de posición

El campo "Consigna de posición" muestra la consigna de posición calculada del eje. Si el eje no
está referenciado, el valor indica el valor de posicionamiento relativo a la posición de habilitación
del eje.
(Variable del objeto tecnológico: <Nombre del eje>.Position)

Consigna de velocidad

El campo "Consigna de velocidad" muestra la velocidad de consigna calculada del eje.
(Variable del objeto tecnológico: <Nombre del eje>.Velocity)

2470

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Estado

Descripción

Posición de destino

El campo "Posición de destino" indica la posición de destino actual de una orden de posiciona‐
miento activa o del panel de mando del eje. El valor de la "Posición de destino" solamente es
válido mientras se ejecuta una orden de posicionamiento.
(Variable del objeto tecnológico: <Nombre del eje>.StatusPositioning.TargetPosition)

Recorrido residual

El campo "Recorrido restante" indica la distancia que falta por recorrer de una orden de posi‐
cionamiento activa o del panel de mando del eje. El valor de "Recorrido restante" solamente es
válido mientras se ejecuta una orden de posicionamiento.
(Variable del objeto tecnológico: <Nombre del eje>.StatusPositioning.Distance)

Consulte también
Variables relativas a los valores de posición y velocidad V4...5 (Página 2627)
Variables StatusPositioning V4...5 (Página 2644)
Lista de compatibilidad de las variables V1...3 <-> V4...5 (Página 2339)
Variables relativas a los valores de posición y velocidad a partir de V6 (Página 2514)
Variables MotionStatus V1...3 (Página 2620)
Bits de estado y error (objetos tecnológicos a partir de V4) (Página 2467)

6.2.10.3

Ajustes dinámicos
Con la función de diagnóstico "Ajustes dinámicos" se vigilan en el TIA Portal los valores límite
dinámicos configurados para el eje. Cuando el eje está activado, la indicación de la función de
diagnóstico está disponible en el modo online, en los modos de operación "Control manual" y
"Modo automático". Las informaciones de estado mostradas tienen el siguiente significado:

Límite dinámico

Descripción

Aceleración

El campo "Aceleración" muestra la aceleración actual configurada para el eje.
(Variable del objeto tecnológico: <Nombre del eje>.DynamicDefaults.Acceleration)

Deceleración

El campo "Deceleración" muestra la deceleración actual configurada para el eje.
(Variable del objeto tecnológico: <Nombre del eje>.DynamicDefaults.Deceleration)

Deceleración de parada
de emergencia

El campo "Deceleración de parada de emergencia" muestra la deceleración de parada de emer‐
gencia actual configurada para el eje.
(Variable del objeto tecnológico: <Nombre del eje>.DynamicDefaults.EmergencyDeceleration)

Tirón

El campo muestra el tirón configurado en la actualidad para el eje.

(a partir del objeto tecno‐
lógico V2)

(Variable del objeto tecnológico: <Nombre del eje>.DynamicDefaults.Jerk)

Consulte también
Variables DynamicDefaults V4...5 (Página 2638)
Lista de compatibilidad de las variables V1...3 <-> V4...5 (Página 2339)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2471

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

6.2.10.4

Trama PROFIdrive
La función de diagnóstico "Objeto tecnológico > Diagnóstico > Trama PROFIdrive" permite
vigilar las tramas PROFIdrive del accionamiento y del encóder en el TIA Portal. La
visualización de la función de diagnóstico está disponible en modo online.

Área "Accionamiento"
En esta área se muestran los parámetros siguientes de la trama PROFIdrive del
accionamiento al controlador:
● Las palabras de estado "ZSW1" y "ZSW2"
● La consigna de velocidad de giro emitida al accionamiento (NSOLL)
● La velocidad de giro real notificada por el accionamiento (NIST)

Área "Encóder"
En esta área se muestran los parámetros siguientes de la trama PROFIdrive del encóder al
controlador:
● La palabra de estado "G1_ZSW"
● El valor real de posición "G1_XIST1" (valor real cíclico del encóder)
● El valor real de posición "G1_XIST2" (valor absoluto del encóder)

2472

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

6.2.11

Anexo

6.2.11.1

Utilizando varios ejes con el mismo PTO
Utilice la funcionalidad de Motion Control de la CPU S7-1200 para utilizar varios objetos
tecnológicos Eje de posicionamiento con el mismo PTO (Pulse Train Output) y, de esta forma,
con las mismas salidas de la CPU. Ello resulta adecuado, p.ej., para utilizar a través de un PTO
diversas configuraciones de eje para diferentes procesos de producción. Es posible alternar a
voluntad entre estas configuraciones de eje, tal y como se describe a continuación. La
siguiente representación muestra las principales relaciones funcionales:

2EMHWRWHFQROµJLFR
(MHGHSRVLFLRQDPLHQWRB
0&B3RZHUB,QVWDQ]B

372
3XOVH7UDLQ2XWSXW

&RQILJXUDFLµQGHOHMH

2EMHWRWHFQROµJLFR
(MHGHSRVLFLRQDPLHQWRB

,
,
,
,
,
,
,
,
5816723
(5525
0$,17

',

&38&
'&'&'&
'










0&B3RZHUB,QVWDQ]B;

2EMHWRWHFQROµJLFR
(MHGHSRVLFLRQDPLHQWRB;

,
,
,
,
,
,

6,0$7,&
6

&RQILJXUDFLµQGHOHMH




0&B3RZHUB,QVWDQ]B

;31/$1

&RQILJXUDFLµQGHOHMH;

En el ejemplo ilustrado, varios objetos tecnológicos Eje de posicionamiento, cada uno con una
configuración propia de eje, utilizan el mismo PTO. En el programa de usuario se debe llamar
cada eje con una llamada propia de la instrucción de Motion Control "MC_Power" con un
bloque de datos de instancia propio. En cada momento el PTO puede ser utilizado cada vez
por un solo eje. El eje que utiliza el PTO en el instante actual lo indica con la variable <Nombre
de eje>.StatusBits.Activated = TRUE.

Cambio del objeto tecnológico Eje de posicionamiento
El siguiente esquema de programa muestra cómo cambiar entre diversos objetos tecnológicos
y, con ello, entre diversas configuraciones de eje. Para poder utilizar el mismo PTO con
diferentes ejes sin indicaciones de error, solamente se deben llamar instrucciones de Motion
Control del eje que debe utilizarse actualmente.
La siguiente representación muestra lo anterior utilizando la instrucción de Motion Control
"MC_Power" como ejemplo:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2473

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

/ODPDGD
LQDFWLYD

(1
0&B3RZHUB,QVWDQ]B

2EMHWRWHFQROµJLFR
(MHGHSRVLFLRQDPLHQWRB

372
3XOVH7UDLQ2XWSXW

0&B3RZHUB,QVWDQ]B

6,0$7,&
6

6WDWXV%LWV$FWLYDWHG 758(
(UURU%LWV+Z8VHG )$/6(
5816723
(5525
0$,17

(QDEOH 758(
(UURU )$/6(

2EMHWRWHFQROµJLFR
(MHGHSRVLFLRQDPLHQWRB

',

&38&
'&'&'&

0&B3RZHUB,QVWDQ]B;

2EMHWRWHFQROµJLFR
(MHGHSRVLFLRQDPLHQWRB;




'










/ODPDGD
LQDFWLYD

(1

,
,
,
,
,
,

(1

,
,
,
,
,
,
,
,

/ODPDGD
DFWLYD

;31/$1

Las variables del eje activado (aquí "eje de posicionamiento_2") muestran las siguientes
visualizaciones típicas en el programa de usuario:
● <Nombre de eje>.StatusBits.Activated = TRUE
● <Nombre de eje>.ErrorBits.HWUsed = FALSE
Proceda como se describe a continuación para cambiar el objeto tecnológico Eje de
posicionamiento. El ejemplo muestra el cambio del "Eje de posicionamiento_2" al "Eje de
posicionamiento_1":
1. Finalice los eventuales movimientos en curso del "Eje de posicionamiento_2" activado
2. Bloquee el "Eje de posicionamiento_2" con la pertinente instrucción de Motion Control
"MC_Power" mediante el parámetro de entrada Enable = FALSE
3. Compruebe si se ha bloqueado el "Eje de posicionamiento_2" con una operación lógica Y
del parámetro de salida Status = FALSE de la instrucción de Motion Control "MC_Power"
y la variable del objeto tecnológico <nombre del eje>.StatusBits.Enable = FALSE.
4. Desactive la llamada condicionada de las instrucciones de Motion Control para el "Eje de
posicionamiento_2"
5. Active la llamada condicionada de las instrucciones de Motion Control para el "Eje de
posicionamiento_1". Con la primera llamada de la correspondiente instrucción de Motion
Control "MC_Power" se desactiva el "Eje de posicionamiento_2" y se activa el "Eje de
posicionamiento_1".
6. Desbloquee el "Eje de posicionamiento_1" con la instrucción de Motion Control
"MC_Power" mediante el parámetro de entrada Enable = TRUE.
7. Compruebe la habilitación del "Eje de posicionamiento_1" realizada con una operación
lógica Y del parámetro de salida Status = TRUE de la instrucción de Motion Control
"MC_Power" y la variable del objeto tecnológico <Nombre de
eje>.StatusBits.Enable = TRUE.
Básicamente se pueden llamar también cíclicamente todas las instrucciones de Motion Control
de todos los ejes que operan con un PTO.

2474

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

/ODPDGD
DFWLYD

(1
0&B3RZHUB,QVWDQ]B

2EMHWRWHFQROµJLFR
(MHGHSRVLFLRQDPLHQWRB

372
3XOVH7UDLQ2XWSXW

6,0$7,&
6

6WDWXV%LWV$FWLYDWHG 758(
(UURU%LWV+Z8VHG )$/6(
5816723
(5525
0$,17

(QDEOH 758(
(UURU )$/6(

2EMHWRWHFQROµJLFR
(MHGHSRVLFLRQDPLHQWRB

',

&38&
'&'&'&
'

0&B3RZHUB,QVWDQ]B;

(QDEOH )$/6(
(UURU 758(

2EMHWRWHFQROµJLFR
(MHGHSRVLFLRQDPLHQWRB;










/ODPDGD
DFWLYD

(1

,
,
,
,
,
,

(1
0&B3RZHUB,QVWDQ]B




/ODPDGD
DFWLYD

6WDWXV%LWV$FWLYDWHG )$/6(
(UURU%LWV+Z8VHG 758(

,
,
,
,
,
,
,
,

(QDEOH )$/6(
(UURU 758(

;31/$1

6WDWXV%LWV$FWLYDWHG )$/6(
(UURU%LWV+Z8VHG 758(

Un eje (aquí "Eje de posicionamiento_2") queda activado al habilitarlo.
Al contrario de lo que ocurre con la llamada condicionada, las instrucciones de Motion Control
de los ejes desactivados (aquí "Eje de posicionamiento_1" y "Eje de posicionamiento_x")
muestran errores. Las variables de estos ejes muestran el estado <Nombre de
eje>.StatusBits.Activated = FALSE y <Nombre de eje>.ErrorBits.HWUsed = TRUE.
Utilice la llamada condicionada de las instrucciones de Motion Control si desea configurar el
programa de usuario sin indicaciones de error.

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Utilizar varios accionamientos con el mismo PTO (Página 2476)
Realizar un seguimiento de las peticiones de clases de prioridad superiores (niveles de
procesamiento) (Página 2477)
Casos especiales al utilizar finales de carrera por software para conexión del accionamiento
mediante PTO (Página 2479)
Lista de los ErrorID y las ErrorInfos (objetos tecnológicos V4...5) (Página 2578)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2475

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

6.2.11.2

Utilizar varios accionamientos con el mismo PTO
Si desea utilizar varios accionamientos de forma alternativa, puede utilizarlos con un PTO
conjunto mediante una conmutación (Pulse Train Output). La siguiente representación
muestra la estructura básica de conexión:

S

6,0$7,&
6

,
,
,
,
,
,

,
,
,
,
,
,
,
,

6LJQDO%RDUG

5816723
(5525
0$,17

',

&38&
'&'&'&













'

;31/$1

6DOLGDVGHLPSXOVR\GHVHQWLGR

(WDSDGHSRWHQFLD

(WDSDGHSRWHQFLD

La conmutación de los accionamientos puede ser controlada, si fuera necesario, por el
programa de usuario, a través de una salida digital. Si se precisan diferentes configuraciones
de eje para los diferentes accionamientos, éstas se deben conmutar para el PTO. Encontrará
más información al respecto en "Utilizar varios ejes con el mismo PTO" (Página 2473).

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Utilizando varios ejes con el mismo PTO (Página 2473)
Realizar un seguimiento de las peticiones de clases de prioridad superiores (niveles de
procesamiento) (Página 2477)
Casos especiales al utilizar finales de carrera por software para conexión del accionamiento
mediante PTO (Página 2479)
Lista de los ErrorID y las ErrorInfos (objetos tecnológicos V4...5) (Página 2578)

2476

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

6.2.11.3

Realizar un seguimiento de las peticiones de clases de prioridad superiores (niveles de
procesamiento)
Según la aplicación puede resultar necesario tener que iniciar órdenes de Motion Control (p.ej.
con control de alarma) en una clase de prioridad superior.
Para el seguimiento de estado, las llamadas a las instrucciones de Motion Control se deben
efectuar con poca distancia temporal. Si las instrucciones de Motion Control de la clase
superior de prioridad se llaman una sola vez o a intervalos de tiempo muy dilatados, las
órdenes de Motion Control no se pueden seguir suficientemente. En este caso existe la
posibilidad de efectuar un seguimiento a posteriori en el OB de ciclo. Para cada inicio de una
orden de Motion Control de la clase superior de prioridad debe existir un bloque de datos de
instancia no utilizado actualmente. El siguiente diagrama de flujo muestra cómo iniciar órdenes
de Motion Control en una clase de prioridad superior (p.ej. OB de alarma del proceso) y realizar
un seguimiento a posteriori en el OB de ciclo.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2477

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

2%GHFLFOR

2%GHDODUPDGHSURFHVR
,QLFLRGHO2%GH
DODUPDGHSURFHVR

0£VFµGLJRJHQHUDO
GHSURJUDPD

9DULDEOH
'%[BXWLOL]DGR 
758("

0£VFµGLJRJHQHUDO
GHSURJUDPD

6¯

/ODPDGDGHODLQVWUXFFLµQ
0RWLRQ&RQWUROFRQ'%[\
([HFXWH 758(
OHHUHVWDGRGHODSHWLFLµQ 

9DULDEOH
'%[BXWLOL]DGR 
758("

1R

6¯

1R
1R

3HWLFLµQ0RWLRQ&RQWURO
ILQDOL]DGDRFDQFHODGD"

7RGRVORV'%V
GLVSRQLEOHV
FRQVXOWDGRV"
1R

6¯
/ODPDGDGHODLQVWUXFFLµQ0RWLRQ
&RQWUROFRQ'%[\
([HFXWH )$/6(
SUHSDUDU'%SDUDSULPHUDXWLOL]DFLµQ 

'%[ VLJXLHQWH
'%GLVSRQLEOH

$MXVWDUYDULDEOH
'%[BXWLOL]DGR

,QLFLDOL]DUYDULDEOH
'%[BXWLOL]DGR

7RGRVORV'%V
GLVSRQLEOHV
FRQVXOWDGRV"

6¯

0£VFµGLJRJHQHUDO
GHSURJUDPD

6¯

/ODPDGDGHODLQVWUXFFLµQ
0RWLRQ&RQWUROFRQ'%[\
([HFXWH 758(
LQLFLRGHODSHWLFLµQ 
(UURU
QRKD\VXILFLHQWHV
'%VGLVSRQLEOHV 

1R

'%[ VLJXLHQWH
'%GLVSRQLEOH

3XQWRGHFRQWURO
GHOFLFOR

0£VFµGLJRJHQHUDO
GHSURJUDPD
)LQGHO2%GH
DODUPDGHSURFHVR

En función de la frecuencia de las órdenes de Motion Control a iniciar se debe haber generado
una cantidad suficiente de bloques de datos de instancia. En las variables DBx_utilizado el
usuario debe especificar el bloque de datos de instancia empleado actualmente.

2478

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Inicio de la orden de Motion Control en el OB de alarma de proceso
Mediante consultas binarias de las variables DBx_utilizado (naranja) se busca un bloque de
datos de instancia no utilizado en ese instante. Si se encuentra, el bloque de datos de instancia
utilizado se identifica como "utilizado" (verde) y la orden de Motion Control se inicia con este
bloque de datos de instancia (azul).
A continuación se procesan eventualmente otras partes del programa del OB de alarma del
proceso y posteriormente se regresa al OB de ciclo.

Seguimiento de las órdenes de Motion Control iniciadas en el OB de ciclo
En el OB de ciclo se comprueba con la variable DBx_utilizado (violeta) la utilización de todos
los bloques de instancia disponibles.
Si un bloque de datos de instancia está siendo utilizado (orden de Motion Control en proceso),
se procede a llamar la instrucción de Motion Control y el parámetro de entrada Execute =
TRUE, para leer los avisos de estado (rojo).
Si la orden ha sido procesada o cancelada se continúa con las siguientes medidas (azul
verdoso):
● Llamada de la instrucción de Motion Control con el parámetro de entrada Execute = FALSE
● Reajuste de la variable DBx_utilizado
Con ello finaliza el seguimiento de la orden y el bloque de datos de instancia vuelve a estar
disponible para ser utilizado nuevamente.

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Utilizando varios ejes con el mismo PTO (Página 2473)
Utilizar varios accionamientos con el mismo PTO (Página 2476)
Casos especiales al utilizar finales de carrera por software para conexión del accionamiento
mediante PTO (Página 2479)
Lista de los ErrorID y las ErrorInfos (objetos tecnológicos V4...5) (Página 2578)

6.2.11.4

Casos especiales al utilizar finales de carrera por software para conexión del
accionamiento mediante PTO

Finales de carrera por software y el proceso de referenciación
La parametrización inadecuada de órdenes de referenciado puede influir en la deceleración
del eje hasta el final de carrera por software. Tenga en cuenta los siguientes ejemplos a la hora
de realizar su programación.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2479

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Ejemplo 1:
Mientras se ejecuta un comando de movimiento, la posición actual del eje se desplaza
mediante una orden de referenciado (p.ej. definir punto de referencia) en sentido del final de
carrera por software. Aún es posible parar el eje hasta alcanzar el final de carrera por software:


Y







$QWHULRUSRVLFLµQ
GHOHMH

①
②
③
④

1XHYDSRVLFLµQ
GHOHMH

)LQDOGHFDUUHUD
SRUVRIWZDUH

V

La curva verde muestra el movimiento sin orden de referenciado. El eje frena con la deceleración configurada, parán‐
dose antes de la posición del final de carrera por software.
Con la orden de referenciado se fija una nueva posición del eje. De esta forma se omite el área entre la antigua y la nueva
posición del eje.
Condicionado por la nueva posición del eje, teóricamente el eje se pararía con la deceleración configurada detrás de la
posición del final de carrera por software (curva roja).
Dado que ya no es posible frenar con la deceleración configurada, el eje se mueve realmente conforme a la curva azul.
Después de moverse a una marcha constante, el eje frena con la deceleración de parada de emergencia configurada,
y se para en la posición del final de carrera por software.

2480

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Ejemplo 2:
Mientras se ejecuta un comando de movimiento, la posición actual del eje se desplaza
mediante una orden de referenciado (p.ej. definir punto de referencia) en sentido del final de
carrera por software. Al contrario de lo que ocurre en el ejemplo 1, ya no es posible parar el eje
hasta alcanzar el final de carrera por software. El eje traspasa la posición del final de carrera
por software.
Y







1XHYDSRVLFLµQ
GHOHMH



)LQDOGHFDUUHUD
SRUVRIWZDUH

V

$QWHULRUSRVLFLµQ
GHOHMH

①
②
③
④

La curva verde muestra el movimiento sin orden de referenciado. El eje frena con la deceleración configurada, parán‐
dose antes de la posición del final de carrera por software.
Con la orden de referenciado se fija una nueva posición del eje. De esta forma se omite el área entre la antigua y la nueva
posición del eje.
Condicionado por la nueva posición del eje, teóricamente el eje se pararía con la deceleración configurada muy por
detrás de la posición del final de carrera por software (curva roja).
Dado que ya no es posible frenar con la deceleración configurada, el eje se mueve realmente conforme a la curva azul.
El eje frena con la deceleración de parada de emergencia configurada. No obstante, la deceleración de parada de
emergencia no es suficiente para parar el eje en la posición del final de carrera por software. El eje sobrepasa la posición
del final de carrera por software.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2481

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Ejemplo 3:
Mientras se produce la operación de frenado, la posición actual del eje se desplaza mediante
una orden de referenciado (p. ej., Ajustar punto de referencia) en sentido del final de carrera
por software. Aún es posible parar el eje hasta alcanzar el final de carrera por software:
Y







1XHYDSRVLFLµQ
GHOHMH



)LQDOGHFDUUHUD
SRUVRIWZDUH

V

$QWHULRUSRVLFLµQ
GHOHMH

①
②
③
④

La curva verde muestra el movimiento sin orden de referenciado. El eje frena con la deceleración configurada, parán‐
dose antes de la posición del final de carrera por software.
Con la orden de referenciado se fija una nueva posición del eje. De esta forma se omite el área entre la antigua y la nueva
posición del eje.
Condicionado por la nueva posición del eje, teóricamente el eje se pararía con la deceleración configurada detrás de la
posición del final de carrera por software (curva roja).
Dado que ya no es posible frenar con la deceleración configurada, el eje se mueve realmente conforme a la curva azul.
Después de moverse a una marcha constante, el eje frena con la deceleración de parada de emergencia configurada,
y se para en la posición del final de carrera por software.

Ejemplo 4:
Mientras se produce la operación de frenado, la posición actual del eje se desplaza mediante
una orden de referenciado (p. ej., Ajustar punto de referencia) en sentido del final de carrera
por software. Al contrario de lo que ocurre en el ejemplo 3, ya no es posible parar el eje hasta
alcanzar el final de carrera por software. El eje traspasa la posición del final de carrera por
software.

2482

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Y







1XHYDSRVLFLµQ
GHOHMH



)LQDOGHFDUUHUD
SRUVRIWZDUH

V

$QWHULRUSRVLFLµQ
GHOHMH

①
②
③
④

La curva verde muestra el movimiento sin orden de referenciado. El eje frena con la deceleración configurada, parán‐
dose antes de la posición del final de carrera por software.
Con la orden de referenciado se fija una nueva posición del eje. De esta forma se omite el área entre la antigua y la nueva
posición del eje.
Condicionado por la nueva posición del eje, teóricamente el eje se pararía con la deceleración configurada muy por
detrás de la posición del final de carrera por software (curva roja).
Dado que ya no es posible frenar con la deceleración configurada, el eje se mueve realmente conforme a la curva azul.
El eje frena con la deceleración de parada de emergencia configurada. No obstante, la deceleración de parada de
emergencia no es suficiente para parar el eje en la posición del final de carrera por software. El eje sobrepasa la posición
del final de carrera por software.

Consulte también
Finales de carrera por software en relación con los cambios de posicionamiento del final de
carrera por software. (Página 2484)
Final de carrera por software y modificaciones en la dinámica (Página 2484)
Comportamiento del eje ante la respuesta de los límites de posición (Página 2374)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2483

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Finales de carrera por software en relación con los cambios de posicionamiento del final de carrera por
software.
Con una modificación poco favorable de la posición del final de carrera por software mientras
se ejecuta el programa de usuario, es posible acortar de forma abrupta la distancia entre la
posición actual del eje y la posición del final de carrera por software.
La reacción del eje que se produce es similar a la descrita en el capítulo Finales de carrera por
software y el proceso de referenciación (Página 2479).

Consulte también
Finales de carrera por software y el proceso de referenciación (Página 2479)
Final de carrera por software y modificaciones en la dinámica (Página 2484)
Comportamiento del eje ante la respuesta de los límites de posición (Página 2374)

Final de carrera por software y modificaciones en la dinámica
En combinación con órdenes de movimiento de relevo se puede influir en la deceleración del
eje en el área del final de carrera por software. Esto es posible cuando la orden de movimiento
que la releva se inicia con una deceleración inferior (Variable <Nombre de
eje>.DynamicDefaults.Deceleration). Tenga en cuenta los siguientes ejemplos a la hora de
realizar su programación.

2484

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Ejemplo 1:
Mientras se mueve el eje, la orden de desplazamiento en curso es relevada por otra orden de
movimiento con una deceleración inferior:
Y







6HLQLFLDHOVLJXLHQWH
PRYLPLHQWR

①
②
③

)LQDOGHFDUUHUD
SRUVRIWZDUH

V

La tendencia de la curva verde muestra el movimiento de una orden en curso sin relevo. El eje frena con la deceleración
configurada, parándose antes de la posición del final de carrera por software.
Condicionado por la orden de movimiento de relevo con una deceleración inferior, el eje se pararía teóricamente detrás
de la posición del final de carrera por software (curva roja).
Dado que ya no es posible frenar con la deceleración configurada de la orden de movimiento de relevo, el eje se mueve
realmente conforme a la curva azul. Después de moverse a una marcha constante, el eje frena con la deceleración de
parada de emergencia, parándose en la posición del final de carrera por software.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2485

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Ejemplo 2:
Mientras se frena el eje, la orden de desplazamiento en curso es relevada por otra orden de
movimiento con una deceleración inferior:
Y





6HLQLFLDHOVLJXLHQWH
PRYLPLHQWR

①
②
③



)LQDOGHFDUUHUD
SRUVRIWZDUH

V

La tendencia de la curva verde muestra el movimiento de una orden en curso sin relevo. El eje frena con la deceleración
configurada, parándose antes de la posición del final de carrera por software.
Debido a la orden de movimiento de relevo con una deceleración inferior, el eje se pararía teóricamente muy por detrás
de la posición del final de carrera por software (curva roja).
Dado que ya no es posible frenar con la deceleración configurada de la orden de movimiento de relevo, el eje se mueve
realmente conforme a la curva azul. Después de moverse a una marcha constante, el eje frena con la deceleración de
parada de emergencia, parándose en la posición del final de carrera por software.

Consulte también
Finales de carrera por software y el proceso de referenciación (Página 2479)
Finales de carrera por software en relación con los cambios de posicionamiento del final de
carrera por software. (Página 2484)
Comportamiento del eje ante la respuesta de los límites de posición (Página 2374)

6.2.11.5

Reducción de la velocidad para una duración breve de posicionamiento
Si la duración planificada del posicionamiento es < 2 ms, la velocidad de la orden de
posicionamiento puede ser reducida por la CPU.

2486

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
La orden se ejecuta con una velocidad reducida en todo el recorrido. La velocidad reducida
(impulsos/s) se calcula con la fórmula siguiente:
● Velocidad reducida = número de impulsos que deben emitirse * 500 Hz
Si la duración planificada del posicionamiento es >= 2 ms, no se efectúa ninguna reducción de
la velocidad.

6.2.11.6

Adaptación dinámica de la velocidad de arranque/parada
Debido a la configuración de los límites de velocidad (velocidad de arranque/parada, velocidad
máxima), de los valores dinámicos (aceleración, deceleración, tirón), así como de la velocidad
de destino de la orden de desplazamiento, en determinadas circunstancias puede ocurrir que
la CPU cambie la velocidad de arranque/parada dinámicamente.
Este es el caso si, p. ej., al haber configurado una velocidad de arranque/parada baja, el tiempo
necesario para los primeros impulsos es más largo que el que puede ser necesario para toda
la aceleración. En estos casos el primer impulso se emite a una velocidad superior a la
velocidad de arranque/parada configurada. Los impulsos siguientes también se adaptan
dinámicamente, de tal modo que el proceso de aceleración pueda finalizar en el tiempo
especificado.
En caso de posibles pérdidas de impulsos, procure que el hardware utilizado (accionamiento)
esté adaptado a esta situación, o bien cambie los ajustes dinámicos del eje para evitar la
adaptación dinámica de la velocidad de arranque/parada.

6.2.11.7

Mover eje sin regulación de posición en caso de trabajos de mantenimiento o reparación
En caso de servicio técnico, puede resultar necesario mover sin regulación de posición un
accionamiento PROFIdrive o un accionamiento con interfaz de accionamiento analógica.
Este puede ser el caso, p. ej., si los valores del encóder no son válidos o son erróneos.
Las siguientes instrucciones de Motion Control influyen en el estado de la regulación de
posición:

Habilitar accionamientos sin regulación de posición con MC_Power
Inicie el eje con la instrucción de Motion Control MC_Power StartMode = 0 en funcionamiento
sin regulación de posición.
El funcionamiento sin regulación de posición es posible hasta que otra instrucción de Motion
Control modifica el estado de la regulación de posición.

MC_MoveVelocity
MC_MoveVelocity con PositionControlled = FALSE fuerza el funcionamiento sin regulación de
posición.
MC_MoveVelocity con PositionControlled = TRUE fuerza el funcionamiento con regulación de
posición.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2487

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
El funcionamiento con regulación de posición seleccionado también se mantiene tras finalizar
MC_MoveVelocity.

MC_MoveJog
MC_MoveJog con PositionControlled = FALSE fuerza el funcionamiento sin regulación de
posición.
MC_MoveJog con PositionControlled = TRUE fuerza el funcionamiento con regulación de
posición.
El funcionamiento con regulación de posición seleccionado también se mantiene tras finalizar
MC_MoveJog.

MC_Home, MC_MoveRelative, MC_MoveAbsolute
Las instrucciones de Motion Control MC_Home, MC_MoveRelative y MC_MoveAbsolute
fuerzan el funcionamiento con regulación de posición.
La regulación de posición también se mantiene activa tras finalizar la orden.

MC_Halt
La instrucción "MC_Halt" de Motion Control se ejecuta en los modos con y sin regulación de
posición.
El estado de la regulación de posición no se modifica.

6.2.11.8

Lista de los ErrorID y las ErrorInfos (objetos tecnológicos V6...V7)

Resumen de los errores y los ErrorID
Las siguientes tablas recogen una relación de todos los ErrorID y ErrorInfos que pueden ser
mostrados en las instrucciones de Motion Control. Junto a la causa del error se muestran
también ayudas para eliminar los errores.
En caso de errores de funcionamiento con parada del eje, este se detendrá en función de la
reacción a error. Reacciones a error posibles:
● Retirar habilitación
Se emite la consigna 0 y se retira la habilitación. En función de la configuración, el eje se
frena en el accionamiento y se para.
● Parada con rampa de parada de emergencia
Los comandos de movimiento en curso se cancelan. El eje se frena sin limitación de tirones
y se para mediante la deceleración de parada de emergencia configurada en "Objeto
tecnológico > Parámetros avanzados > Dinámica > Parada de emergencia".

2488

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Resumen de los errores y los ErrorID
Error

ErrorID

Error de funcionamiento con parada del eje (Pá‐
gina 2489)

16#8000-16#8013

Error de funcionamiento sin parada del eje (Pá‐
gina 2493)

16#8200-16#820C

Error de parámetros de bloque (Página 2495)

16#8400-16#8412

Error de configuración del eje (Página 2498)

16#8600-16#864B

Error de configuración de la tabla de órdenes
(Página 2511)

16#8700-16#8704

Errores internos (Página 2512)

16#8FF

ErrorID 16#8000-16#8013
Error de funcionamiento con parada del eje
ErrorID

ErrorInfo

16#8000

Descripción

Solución

Error de accionamiento, fallo de "Accionamiento listo"
16#0001

16#8001

-

Reacción a error
-

Confirmar el error con la instrucción
"MC_Reset"; proporcionar la señal del
accionamiento; eventualmente iniciar de
nuevo la orden

Final de carrera por SW inferior activado

-

16#000E

Se ha alcanzado la posición del final de
carrera por software inferior con la de‐
celeración actual configurada

16#000F

Se ha alcanzado la posición del final de
carrera por software inferior con la de‐
celeración de parada de emergencia

16#0010

Se ha rebasado la posición del final de
carrera por software inferior con la de‐
celeración de parada de emergencia

Retirar habilita‐
ción

Final de carrera por SW superior activado

-

16#8002
16#000E

16#000F

16#0010

Confirmar el error con la instrucción
"MC_Reset"; abandonar el final de carre‐
ra por software con una orden de despla‐
zamiento en sentido positivo

Se ha alcanzado la posición del final de Confirmar el error con la instrucción
carrera por software superior con la de‐ "MC_Reset"; abandonar el final de carre‐
celeración actual configurada
ra por software con una orden de despla‐
Se ha alcanzado la posición del final de zamiento en sentido negativo

carrera por software superior con la de‐
celeración de parada de emergencia
Se ha rebasado la posición del final de
carrera por software superior con la de‐
celeración de parada de emergencia

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Retirar habilita‐
ción

2489

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

16#8003

Descripción

Solución

Reacción a error

Final de carrera por HW inferior alcanzado

16#000E

Si el accionamien‐
to se conecta a
El final de carrera por hardware inferior Confirmar el error con el eje habilitado
ha sido alcanzado. Se ha frenado el eje con la instrucción "MC_Reset"; abando‐ través de PTO
con la deceleración de parada de emer‐ nar el final de carrera por hardware con (Pulse Train Out‐
gencia.
una orden de marcha en sentido positivo. put):
Parada con ram‐
(no se ha encontrado el sensor del pun‐
pa de parada de
to de referencia durante una búsqueda
emergencia
activa del mismo)
Si el accionamien‐
to se conecta a
través de PROFI‐
drive / salida ana‐
lógica:
Retirar habilita‐
ción

16#8004

Final de carrera por HW superior alcanzado
16#000E

Confirmar el error con el eje habilitado
con la instrucción "MC_Reset"; abando‐
nar el final de carrera por hardware con
una orden de marcha en sentido negati‐
(no se ha encontrado el sensor del pun‐ vo.
to de referencia durante una búsqueda
activa del mismo)

El final de carrera por hardware supe‐
rior ha sido alcanzado. Se ha frenado el
eje con la deceleración de parada de
emergencia.

Si el accionamien‐
to se conecta a
través de PTO
(Pulse Train Out‐
put):
Parada con ram‐
pa de parada de
emergencia
Si el accionamien‐
to se conecta a
través de PROFI‐
drive / salida ana‐
lógica:
Retirar habilita‐
ción

16#8005

PTO y HSC ya están siendo utilizados por otro eje
16#0001

-

-

El eje ha sido configurado de forma inco‐
rrecta:
Corregir la configuración del PTO (Pulse
Train Output) / HSC (High Speed Coun‐
ter) y cargarla en el controlador
Varios ejes deben trabajar con un PTO:
Otro eje utiliza el PTO / HSC. Si el eje
actual debe asumir el control, se debe
bloquear el otro eje con "MC_Power"
Enable = FALSE.
Ver también "Utilizando varios ejes con
el mismo PTO" (Página 2473).

16#8006

Se ha producido un error de comunicación en el panel de mando del eje
16#0012

2490

Se ha producido un error de desborda‐ Revise la conexión del cable y vuelva a
miento de tiempo.
hacer clic en el botón "Control manual".

Retirar habilita‐
ción

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

16#8007

Descripción

Solución

Imposible habilitar el eje

-

16#0025

Ejecutando restart.

Espere hasta que haya concluido el res‐
tart del eje.

16#0026

Ejecutando carga en el estado operati‐
vo RUN

Espere hasta que haya concluido la ope‐
ración de carga.

16#8008

Sentido de movimiento no permitido

-

16#002E

El sentido de movimiento seleccionado
no está permitido.

● Cambie el sentido de movimiento y
reinicie la orden.

16#002F

No es posible un movimiento invertido
con el sentido seleccionado.

● Adapte el sentido de giro permitido
en la configuración del objeto
tecnológico en "Parámetros
avanzados > Mecánica". Reinicie la
orden.

16#8009

No se ha encontrado sensor de referencia/marca cero del encóder
16#0033

Error de configuración, hardware o
montaje del encóder o del sensor del
punto de referencia.

Reacción a error

● Conecte un dispositivo adecuado.
● Compruebe el dispositivo
(conexiones).

Parada con ram‐
pa de parada de
emergencia

● Compare la configuración de HW
Config y del objeto tecnológico.
16#800A

Aviso de avería del encóder
16#0001

-

Compruebe el dispositivo en cuanto a
funcionamiento, enlaces y conexiones.

16#0034

Error de hardware en el encóder

16#0035

Encóder sucio

16#0036

Error al leer el valor absoluto del encó‐
der

Compare el tipo de encóder en el pará‐
metro del accionamiento o del encóder
P979 con los datos de configuración del
objeto tecnológico.

16#0037

Vigilancia de marca cero del encóder

El encóder notifica error en la vigilancia
de marca cero (código de fallo 0x0002 en
Gx_XIST2, ver perfil PROFIdrive).

Retirar habilita‐
ción

Compruebe la compatibilidad electro‐
magnética (CEM) de la instalación.
16#0038

Encóder en estado "Estacionar"

● Busque la causa del error en el
accionamiento o el encóder
conectado.
● Compruebe si el mensaje de error se
ha producido a consecuencia de una
operación de puesta en marcha en el
accionamiento o en el encóder.

16#0040

PROFIdrive: fallo del encóder en el bus
(estación averiada)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Compruebe el dispositivo en cuanto a
funcionamiento, enlaces y conexiones.

2491

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

16#800B

Descripción

Solución

Reacción a error

Rebase por exceso del rango de la posición
16#0039

Rebase por exceso del rango en senti‐
do positivo

16#003A

Rebase por exceso del rango en senti‐
do negativo

16#003B

La modificación de la posición real es
Adapte la longitud de módulo al encóder
mayor en un reloj de ciclo de la regula‐ utilizado.
ción de posición que la longitud de mó‐
dulo.

16#800C

Referencie el eje en un rango de valores
reales válido.

Aviso de avería del accionamiento
16#0001

-

16#003C

PROFIdrive: fallo de la señal de accio‐
namiento "Mando solicitado"

16#003D

Conexión de accionamiento PROFIdri‐
ve/analógica: el accionamiento se ha
desconectado

16#003E

PROFIdrive: fallo del accionamiento en
el bus (estación averiada)

16#800D

Compruebe el dispositivo en cuanto a
funcionamiento, enlaces y conexiones.

-

Retirar habilita‐
ción

Seleccione una ganancia más pequeña
(Kv) en el cuadro de diálogo "Optimiza‐
ción".

Se ha rebasado por exceso el error de seguimiento admisible
16#0001

Retirar habilita‐
ción

● Revise la configuración del lazo de
regulación.

Retirar habilita‐
ción

● Compruebe el sentido del encóder.
● Compruebe la configuración de la
vigilancia de errores de seguimiento.
16#800E

Error en final de carrera por HW
16#0042

Sentido de retirada no permitido con fi‐ El sentido de movimiento programado se
nal de carrera por HW activo
ha bloqueado debido al final de carrera
por HW activo.

Retirar habilita‐
ción

Retire el eje en el sentido opuesto.

2492

16#0043

Final de carrera por HW con los polos
invertidos, retirada imposible

16#0044

Los dos finales de carrera por HW están
activos, retirada imposible

Compruebe la construcción mecánica de
los finales de carrera por HW.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

16#800F

Descripción

Solución

Error en zona de destino
16#0045

Zona de destino no alcanzada

La zona de destino no se ha alcanzado
dentro del tiempo de tolerancia de posi‐
cionamiento.

Reacción a error
Retirar habilita‐
ción

● Revise la configuración de la
vigilancia de posicionamiento.
● Revise la configuración del lazo de
regulación.
16#0046

Nuevo abandono de la zona de destino Se ha abandonado la zona de destino
dentro del tiempo de permanencia míni‐
mo.
● Revise la configuración de la
vigilancia de posicionamiento.
● Revise la configuración del lazo de
regulación.
La posición del final de carrera por SW inferior es mayor que la posición del final de
carrera por SW superior si el eje no es un eje de valor módulo.

16#8010
16#0001
16#8011

-

Retirar habilita‐
ción

Cambie la posición de los finales de ca‐
rrera por SW.

La velocidad de aproximación al sensor del punto de referencia/la marca cero es
igual a cero.

Retirar habilita‐
ción

16#000A

El valor es menor o igual que cero.

16#000A

La velocidad de referenciado para establecer el punto de referencia es igual a cero. Retirar habilita‐
El valor es menor o igual que cero.
Velocidad de referenciado > Seleccionar ción

16#8012

16#8013

Velocidad de aproximación > Seleccio‐
nar cero

cero

No se puede asignar el eje al PTO, ya que este está siendo utilizado por
"CTRL_PTO".
16#0001

-

Retirar habilita‐
ción

Seleccionar otro PTO en la configura‐
ción.

ErrorID 16#8200-16#820C
Error de funcionamiento sin parada del eje
ErrorID

ErrorInfo

16#8200

Solución

El eje no está habilitado
16#0001

16#8201

-

Habilitar el eje; reiniciar la orden

El eje ya ha sido habilitado por otra instancia de "MC_Power"
16#0001

16#8202

Descripción

-

Habilitar el eje sólo con una instancia "MC_Power"

Rebasado el número máximo de órdenes activas simultáneas de Motion Control (máx. 200 órdenes
para conexión del accionamiento mediante PTO (Pulse Train Output), máx. 100 órdenes para conexión
del accionamiento a través de PROFIdrive/salida analógica)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2493

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#0001

-

Reducir el número de órdenes activas simultáneamente; vol‐
ver a iniciar la orden
En el parámetro "Busy" = TRUE de la instrucción de Motion
Control se reconoce una orden activa.

16#8203

El eje está funcionando en este momento en "Control manual" (panel de mando)
16#0001

16#8204

-

Finalizar el "Control manual"; reiniciar la orden

El eje no está referenciado
16#0001

16#8205

-

Referenciar el eje con la instrucción "MC_Home"; reiniciar la
orden

El eje está siendo controlado por el programa de usuario (el error sólo se muestra en el panel de mando
del eje)
16#0013

16#8206

El eje está habilitado en el programa de
usuario.

Bloquear eje con la instrucción "MC_Power" y seleccionar
nuevamente "Control manual" en el panel de mando del eje

Objeto tecnológico pendiente de activación
16#0001

16#8207

-

Active el eje con la instrucción "MC_Power" Enable = TRUE,
o habilite el eje en el panel de mando del eje.

Orden rechazada
16#0001

-

16#0016

Referenciado activo en curso; no es po‐ Espere a que el referenciado activo finalice o interrumpa el
sible iniciar otro tipo de referenciado.
referenciado activo con una orden de movimiento, p. ej.,
"MC_Halt".

16#0018

Mientras el eje se está referenciando de Espere a que el referenciado directo o pasivo termine.
forma directa o pasiva, no se puede
desplazar con una tabla de órdenes.

16#0019

Durante el procesamiento de una tabla Espere a que finalice la tabla de órdenes o cancele dicha
de órdenes, el eje no se puede referen‐ tabla con una orden de movimiento p. ej., "MC_Halt".
ciar de forma directa o pasiva.

16#0052

La posición indicada supera el límite de
valor numérico.

Indique un valor de posición válido en la instrucción de Motion
Control.

16#0053

El eje se encuentra en arranque.

Espere hasta que el eje esté operativo.

16#0054

Valor real no válido

Para ejecutar una orden "MC_Home", los valores reales de‐
ben ser válidos.
Revise el estado de los valores reales. La variable del objeto
tecnológico <Nombre de eje>.StatusSensor.State debe tener
el valor 2 (válido).

16#0058

La orden ya se utiliza en otro nivel de
ejecución.

Llamar eje solo con una instancia "MC_Power".

16#006B

Llamada no admisible en modo sin re‐
gulación de posición

Habilite el eje con regulación de posición con "MC_Power"
mediante StartMode = 1.

16#8208

La diferencia entre la velocidad máxima y la velocidad de arranque/parada no es válida
16#0002

El valor no tiene un formato numérico
válido

16#000A

El valor es menor o igual que cero.

16#8209

2494

Corregir el valor; reiniciar la orden

El valor de aceleración del TO "Eje" no es válido
16#0002

El valor no tiene un formato numérico
válido

16#000A

El valor es menor o igual que cero.

Corregir el valor; reiniciar la orden

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

16#820A

Descripción

Solución

No es posible el restart del eje
16#0013

El eje está habilitado en el programa de
usuario.

16#0027

El eje está funcionando en este momen‐ Finalizar el "Control manual"; repetir Restart
to en "Control manual" (panel de man‐
do)

16#002C

El eje no está bloqueado.

Bloquear el eje; reiniciar la orden

16#0047

El objeto tecnológico no está listo para
Restart.

Vuelva a cargar el proyecto.

16#0048

No se cumple la condición para reiniciar
el objeto tecnológico.

Bloquee el objeto tecnológico.

16#820B

Bloquear eje con la instrucción "MC_Power"; ejecutar Restart
nuevamente

Imposible ejecutar la tabla de órdenes
16#0026

16#820C

Ejecutando carga en el estado operati‐
vo RUN

Espere hasta que haya concluido la operación de carga.

No hay configuración disponible
16#0001

-

Error interno

16#0014

El hardware seleccionado está en uso
en otra aplicación

Llame al teléfono de atención al cliente.

ErrorID 16#8400-16#8412
Error de parámetros de bloque
ErrorID

ErrorInfo

16#8400

Solución

El valor del parámetro "Position" de la instrucción de Motion Control no es válido
16#0002

El valor no tiene un formato numérico
válido

16#0005

El valor se encuentra fuera del rango
numérico (mayor que 1.0E12)

16#0006

El valor se encuentra fuera del rango
numérico (menor que -1.0E12)

16#0030

El valor tiene un formato numérico erró‐
neo o está fuera del rango numérico vá‐
lido

16#8401

16#8402

Descripción

Corregir el valor; reiniciar la orden

El valor del parámetro "Distance" de la instrucción de Motion Control no es válido
16#0002

El valor no tiene un formato numérico
válido

16#0005

El valor se encuentra fuera del rango
numérico (mayor que 1.0E12)

16#0006

El valor se encuentra fuera del rango
numérico (menor que -1.0E12)

Corregir el valor; reiniciar la orden

El valor del parámetro "Velocity" de la instrucción de Motion Control no es válido

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2495

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#0002

El valor no tiene un formato numérico
válido

Corregir el valor; reiniciar la orden

16#0008

El valor es mayor que la velocidad má‐
xima configurada

16#0009

El valor es inferior a la velocidad de
arranque/parada configurada

16#0024

El valor es menor que 0

16#0030

El valor tiene un formato numérico erró‐
neo o está fuera del rango numérico vá‐
lido

16#8403

El valor del parámetro "Direction" de la instrucción de Motion Control no es válido
16#0011

16#8404

El valor de selección no es válido

Corregir el valor de selección; reiniciar la orden

El valor del parámetro "Mode" de la instrucción de Motion Control no es válido
16#0011

El valor de selección no es válido

Corregir el valor de selección; reiniciar la orden

16#0015

El referenciado activo/pasivo no está
configurado

Corregir la configuración y cargar en el controlador; habilitar
el eje y reiniciar la orden

16#0017

La inversión del sentido en el final de
● Activar los finales de carrera por hardware mediante la
carrera por hardware está activada aun‐
variable <Nombre de eje>.PositionLimits_HW.Active =
que los finales de carrera por hardware
TRUE, reiniciar orden
están desactivados.
● Corregir la configuración y cargar en el controlador;
habilitar el eje y reiniciar la orden

16#0055

Modo no válido en el encóder incremen‐ Inicie un proceso de referenciado para un encóder incremen‐
tal
tal con el parámetro "Mode" = 0, 1, 2, 3.

16#0056

Modo no válido en el encóder absoluto

Con un encóder absoluto no es posible un referenciado pa‐
sivo ni activa ("Mode" = 2, 3).
Inicie un proceso de referenciado para un encóder absoluto
con el parámetro "Mode" = 0, 1.

16#8405

El valor del parámetro "StopMode" de la instrucción de Motion Control no es válido
16#0011

16#8406
16#0001

16#8407

16#8408

2496

Corregir el valor de selección; habilitar nuevamente el eje

-

Evite la simultaneidad del estado de señal TRUE de los pa‐
rámetros "JogForward" y "JogBackward"; inicie nuevamente
la orden.

Cambio del eje en la instrucción "MC_Power" permitido únicamente con eje bloqueado.
16#0001

16#8409

El valor de selección no es válido

Pulsación simultánea de avance y retroceso no permitida

-

Bloquear eje activo; a continuación se puede cambiar y ha‐
bilitar el eje.

El valor del parámetro "Axis" de la instrucción de Motion Control no es válido
16#001A

El valor indicado no se corresponde con Corregir el valor; reiniciar la orden
la versión exigida del TO

16#001B

El valor indicado no se corresponde con
el tipo exigido del TO

16#001C

El valor indicado no es un bloque de
datos tecnológicos de Motion Control
El valor del parámetro "CommandTable" de la instrucción de Motion Control no es válido

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

16#001A

El valor indicado no se corresponde con Corregir el valor; reiniciar la orden
la versión exigida del TO

16#001B

El valor indicado no se corresponde con
el tipo exigido del TO

16#001C

El valor indicado no es un bloque de
datos tecnológicos de Motion Control

16#840A

El valor del parámetro "StartStep" de la instrucción de Motion Control no es válido
16#000A

El valor es menor o igual que cero.

16#001D

El paso de inicio es mayor que el paso
final

16#001E

El valor es superior a 32

16#840B

Corregir el valor; reiniciar la orden

El valor del parámetro "EndStep" de la instrucción de Motion Control no es válido
16#000A
16#001E

16#840C

El valor es menor o igual que cero.

Corregir el valor; reiniciar la orden

El valor es superior a 32
El valor del parámetro "RampUpTime" de la instrucción de Motion Control no es válido

16#0002

El valor no tiene un formato numérico
válido

16#0005

El valor se encuentra fuera del rango
numérico (mayor que 1.0E12)

16#000A
16#840D

Corregir el valor; reiniciar la orden

El valor es menor o igual que cero.
El valor del parámetro "RampDownTime" de la instrucción de Motion Control no es válido

16#0002

El valor no tiene un formato numérico
válido

16#0005

El valor se encuentra fuera del rango
numérico (mayor que 1.0E12)

16#000A

El valor es menor o igual que cero.

16#840E

Corregir el valor; reiniciar la orden

El valor del parámetro "EmergencyRampTime" de la instrucción de Motion Control no es válido
16#0002

El valor no tiene un formato numérico
válido

16#0005

El valor se encuentra fuera del rango
numérico (mayor que 1.0E12)

16#000A

El valor es menor o igual que cero.

16#840F

16#8410

Solución

Corregir el valor; reiniciar la orden

El valor del parámetro "JerkTime" de la instrucción de Motion Control no es válido
16#0002

El valor no tiene un formato numérico
válido

16#0005

El valor se encuentra fuera del rango
numérico (mayor que 1.0E12)

16#000A

El valor es menor o igual que cero.

Corregir el valor; reiniciar la orden

El valor del parámetro "Parameter" de la instrucción de Motion Control no es válido

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2497

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#0002

El valor no tiene un formato numérico
válido

Corregir el valor; reiniciar la orden

16#000B

La dirección no es válida

Cargar la configuración sin errores en el controlador; volver a
habilitar el eje con la instrucción "MC_Power"

16#0028

El tipo de datos del puntero VARIANT
"Parámetro" y "Valor" no son compati‐
bles.

Utilizar el tipo de datos apropiado; reiniciar la orden

16#0029

El puntero VARIANT "Parámetro" no
señala un bloque de datos del objeto
tecnológico.

Corregir el puntero VARIANT; reiniciar la orden

16#002A

No se puede leer el valor del puntero
VARIANT "Parámetro".

Corregir el puntero VARIANT; reiniciar la orden

16#002B

No se puede escribir el valor del punte‐ Corregir el puntero VARIANT o el valor; reiniciar la orden
ro VARIANT "Parámetro".

16#002C

El eje no está bloqueado.

16#8411

Bloquear el eje; reiniciar la orden

El valor del parámetro "Value" de la instrucción de Motion Control no es válido
16#0002

El valor no tiene un formato numérico
válido

16#0005

El valor se encuentra fuera del rango
numérico (mayor que 1.0E12)

16#0006

El valor se encuentra fuera del rango
numérico (menor que -1.0E12)

16#8412

Corregir el valor; reiniciar la orden

Valor no válido en el parámetro "StartMode" de la instrucción de Motion Control
16#0011

El valor de selección no es válido

Corregir el valor de selección; habilitar nuevamente el eje

ErrorIDs 16#8600-16#864B
Error de configuración del eje
ErrorID

ErrorInfo

16#8600

La dirección no es válida

16#0014

El hardware seleccionado está en uso
en otra aplicación

Cargar la configuración sin errores en el controlador; volver a
habilitar el eje con la instrucción "MC_Power"

La parametrización del contador rápido (HSC) no es válida
16#000B

La dirección no es válida

16#0014

El hardware seleccionado está en uso
en otra aplicación

16#8602

Cargar la configuración sin errores en el controlador; volver a
habilitar el eje con la instrucción "MC_Power"

La parametrización de la "salida de habilitación" no es válida
16#000B

16#8603

La dirección no es válida

Cargar la configuración sin errores en el controlador; volver a
habilitar el eje con la instrucción "MC_Power"

La parametrización de la "entrada de disponibilidad" no es válida
16#000B

2498

Solución

Parametrización del generador de impulsos (PTO) no válida
16#000B

16#8601

16#8604

Descripción

La dirección no es válida

Cargar la configuración sin errores en el controlador; volver a
habilitar el eje con la instrucción "MC_Power"

El valor de "Impulsos por vuelta del motor" no es válido

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#000A

El valor es menor o igual que 0

Cargar la configuración sin errores en el controlador; volver a
habilitar el eje con la instrucción "MC_Power"

16#8605

El valor de "Recorrido por vuelta del motor" no es válido
16#0002

El valor no tiene un formato numérico
válido

16#0005

El valor se encuentra fuera del rango
numérico (mayor que 1.0E12)

16#000A

El valor es menor o igual que 0

16#0030

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

16#8606

El valor de "Velocidad de arranque/parada" no es válido
16#0002

El valor no tiene un formato numérico
válido

16#0003

El valor es mayor que el límite superior
de hardware

16#0004

El valor es menor que el límite inferior
de hardware

16#0007

La velocidad de arranque/parada es
mayor que la velocidad máxima

16#8607

Cargar la configuración sin errores en el controlador; volver a
habilitar el eje con la instrucción "MC_Power"

El valor de "Velocidad máxima" no es válido
16#0002

El valor no tiene un formato numérico
válido

16#0003

El valor es mayor que el límite superior
de hardware

16#0004

El valor es menor que el límite inferior
de hardware

16#0030

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

16#8608

16#8609

Cargar la configuración sin errores en el controlador; volver a
habilitar el eje con la instrucción "MC_Power"

Cargar la configuración sin errores en el controlador; volver a
habilitar el eje con la instrucción "MC_Power"

El valor de "Aceleración" no es válido
16#0002

El valor no tiene un formato numérico
válido

● Cargar la configuración sin errores en el controlador;
volver a habilitar el eje con la instrucción "MC_Power"

16#0003

El valor es mayor que el límite superior
de hardware

16#0004

El valor es menor que el límite inferior
de hardware

● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

16#0030

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario
El valor de "Deceleración" no es válido

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2499

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#0002

El valor no tiene un formato numérico
válido

● Cargar la configuración sin errores en el controlador;
volver a habilitar el eje con la instrucción "MC_Power"

16#0003

El valor es mayor que el límite superior
de hardware

16#0004

El valor es menor que el límite inferior
de hardware

● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

16#0030

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

16#860A

El valor de "Deceleración de parada de emergencia" no es válido
16#0002

El valor no tiene un formato numérico
válido

● Cargar la configuración sin errores en el controlador;
volver a habilitar el eje con la instrucción "MC_Power"

16#0003

El valor es mayor que el límite superior
de hardware

16#0004

El valor es menor que el límite inferior
de hardware

● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

16#0030

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

16#860B

El valor de posición del final de carrera por software inferior no es válido
16#0002

El valor no tiene un formato numérico
válido

● Cargar la configuración sin errores en el controlador;
volver a habilitar el eje con la instrucción "MC_Power"

16#0005

El valor se encuentra fuera del rango
numérico (mayor que 1.0E12)

16#0006

El valor se encuentra fuera del rango
numérico (menor que -1.0E12)

● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

16#0030

El valor de posición del final de carrera
por software inferior es mayor que el del
superior

16#860C

16#860D

2500

El valor de posición del final de carrera por software superior no es válido
16#0002

El valor no tiene un formato numérico
válido

● Cargar la configuración sin errores en el controlador;
volver a habilitar el eje con la instrucción "MC_Power"

16#0005

El valor se encuentra fuera del rango
numérico (mayor que 1.0E12)

16#0006

El valor se encuentra fuera del rango
numérico (menor que -1.0E12)

● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

16#0030

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario
La dirección del final de carrera por hardware inferior no es válida

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#000B

Dirección no válida

16#000C

La dirección del flanco descendente no
es válida

Cargar la configuración sin errores en el controlador; volver a
habilitar el eje con la instrucción "MC_Power"

16#000D

La dirección del flanco ascendente no
es válida

16#860E

La dirección del final de carrera por hardware superior no es válida
16#000B

Dirección no válida

16#000C

La dirección del flanco descendente no
es válida

16#000D

La dirección del flanco ascendente no
es válida

16#860F

Cargar la configuración sin errores en el controlador; volver a
habilitar el eje con la instrucción "MC_Power"

El valor de "Offset del punto de referencia" no es válido
16#0002

El valor no tiene un formato numérico
válido

● Cargar la configuración sin errores en el controlador;
volver a habilitar el eje con la instrucción "MC_Power"

16#0005

El valor se encuentra fuera del rango
numérico (mayor que 1.0E12)

16#0006

El valor se encuentra fuera del rango
numérico (menor que -1.0E12)

● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

16#0030

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

16#8610

El valor de "Velocidad de aproximación" no es válido
16#0002

El valor no tiene un formato numérico
válido

● Cargar la configuración sin errores en el controlador;
volver a habilitar el eje con la instrucción "MC_Power"

16#0008

La velocidad es mayor que la velocidad
máxima

16#0009

La velocidad es inferior a la velocidad
de arranque/parada

● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

16#0030

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

16#8611

El valor de "Velocidad de referenciado" no es válido
16#0002

El valor no tiene un formato numérico
válido

● Cargar la configuración sin errores en el controlador;
volver a habilitar el eje con la instrucción "MC_Power"

16#0008

La velocidad es mayor que la velocidad
máxima

16#0009

La velocidad es inferior a la velocidad
de arranque/parada

● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

16#0030

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2501

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

16#8612

Descripción

Solución

La dirección del sensor del punto de referencia no es válida
16#000B

Dirección no válida

16#000C

La dirección del flanco descendente no
es válida

16#000D

La dirección del flanco ascendente no
es válida

16#8613

Cargar la configuración sin errores en el controlador; volver a
habilitar el eje con la instrucción "MC_Power"

En el referenciado activo, la inversión del sentido en el final de carrera por hardware se encuentra
activada, a pesar de que los finales de carrera por hardware no han sido configurados
16#0001

-

● Cargar la configuración sin errores en el controlador;
volver a habilitar el eje con la instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

16#8614

El valor de "Tirón" no es válido
16#0002

El valor no tiene un formato numérico
válido

● Cargar la configuración sin errores en el controlador;
volver a habilitar el eje con la instrucción "MC_Power"

16#001F

El valor es mayor que el tirón máximo
admisible

16#0020

El valor es menor que el tirón mínimo
admisible

● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

16#0030

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

16#8615

El valor de "Unidad de medida" no es válido
16#0011

16#8616

El valor de selección no es válido

Cargar la configuración sin errores en el controlador; volver a
habilitar el eje con la instrucción "MC_Power"

La dirección del sensor del punto de referencia no es válida (referenciado pasivo a partir de V4)
16#0011

El valor de selección no es válido

● Cargar la configuración sin errores en el controlador;
volver a habilitar el eje con la instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

16#0030

16#8617

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario
El valor de la variable <Nombre de eje>.Sensor.Sensor[1].ActiveHoming.Mode no es válido

16#0011

El valor de selección no es válido
(Valor válido: 2 = referenciado vía en‐
trada digital)

16#8618

2502

● Cargar la configuración sin errores en el controlador;
volver a habilitar el eje con la instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

El valor de la variable <Nombre de eje>.Sensor.Sensor[1].PassiveHoming.Mode no es válido

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#0011

El valor de selección no es válido

● Cargar la configuración sin errores en el controlador;
volver a habilitar el eje con la instrucción "MC_Power"

(Valor válido: 2 = referenciado vía en‐
trada digital)

16#8619

● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

El valor de la variable <Nombre de eje>.Actor.Type no es válido
16#0011

16#861A

El valor de selección no es válido
● Cargar la configuración sin errores en el controlador;
volver a habilitar el eje con la instrucción "MC_Power"
(Valor válido: 2 = conexión mediante in‐
terfaz de impulsos)
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario
El valor para "Sentido de giro permitido" no es válido

16#0011
16#002D

16#861B

El valor de selección no es válido
● Cargar la configuración sin errores en el controlador;
volver a habilitar el eje con la instrucción "MC_Power"
"Ambos sentidos" no está permitido es‐
tando desconectada la salida de sentido ● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario
Factores de transmisión de carga erróneos

16#0031
16#861C

El valor no es válido.

Cargar la configuración sin errores en el controlador; volver a
habilitar el eje con la instrucción "MC_Power"

Combinación no válida de datos para referenciado con encóder incremental
16#0031

El valor no es válido.

● Cargar la configuración sin errores en el controlador;
volver a habilitar el eje con la instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

16#861D

El tipo de montaje ajustado del encóder no es válido. Valor no admisible en <Nombre de eje>.Sen‐
sor.Sensor[1].MountingMode
16#0011

El valor de selección no es válido

● Cargar la configuración sin errores en el controlador;
volver a habilitar el eje con la instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

16#861E

La configuración del tamaño de la rueda de medida del encóder no es válida. Valor no admisible en
<Nombre de eje>.Sensor.Sensor[1].Parameter.DistancePerRevolution
16#0030

16#861F

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario
La configuración de la resolución del encóder lineal es errónea. Valor no admisible en <Nombre de
eje>.Sensor.Sensor[1].Parameter.Resolution

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2503

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

16#0030

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

16#8620

Solución

La resolución fina ajustada para Gx_XIST1 no es válida. Valor no admisible en <Nombre de
eje>.Sensor.Sensor[1].Parameter.FineResolutionXist1
16#0030

16#8621

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario
La resolución fina ajustada para Gx_XIST1 en <Nombre de eje>.Sensor.Sensor[1].Parameter.FineRe‐
solutionXist1 no coincide con el ajuste en el parámetro PROFIdrive P979

16#0030

16#8622

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario
Valor no admisible en <Nombre de eje>.Actor.Interface.AddressIn ni en <Nombre de eje>.Actor.Inter‐
face.AddressOut

16#0011
16#8623

El valor de selección no es válido

Cargar la configuración sin errores en el controlador; volver a
habilitar el eje con la instrucción "MC_Power"

El valor ajustado en la variable <Nombre del eje>.Sensor.Sensor[1].Type no es válido.
16#0011

16#8624

El valor de selección no es válido

Cargar la configuración sin errores en el controlador; volver a
habilitar el eje con la instrucción "MC_Power"

El sistema de encóder ajustado no es válido. Valor no admisible en <Nombre de eje>.Sensor.Sen‐
sor[1].System
16#0011

El valor de selección no es válido

● Cargar la configuración sin errores en el controlador;
volver a habilitar el eje con la instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

16#8625

El parámetro de la vigilancia de posicionamiento es erróneo. Valor no admisible en <Nombre de
eje>.PositioningMonitoring.MinDwellTime
16#0030

16#8626

El parámetro de la vigilancia de posicionamiento es erróneo. Valor no admisible en <Nombre de
eje>.PositioningMonitoring.Window
16#0030

2504

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

16#8627

Descripción

Solución

La configuración de la interfaz PROFIdrive del valor real es errónea. Valor no admisible en <Nombre de
eje>.Sensor.Sensor[1].Interface.AddressIn o <Nombre de eje>.Sensor.Sensor[1].Interface.Addres‐
sOut
16#0011

16#8628

El valor de selección no es válido

Cargar la configuración sin errores en el controlador; volver a
habilitar el eje con la instrucción "MC_Power"

Factores de regulador erróneos
16#0030

El valor tiene un formato numérico erró‐ El valor para la ganancia o el precontrol del lazo de regulación
neo o está fuera del rango numérico vá‐ es erróneo.
lido
● Cargar la configuración sin errores en el controlador;
volver a habilitar el eje con la instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario (<Nombre del eje>.PositionControl.Kv,
<Nombre del eje>.PositionControl.Kpc)

16#8629

El valor límite para la señal de velocidad cero es erróneo. Valor no admisible en <Nombre de
eje>.StandStillSignal.VelocityThreshold
16#0030

16#862A

El parámetro de la vigilancia de posicionamiento es erróneo. Valor no admisible en <Nombre de
eje>.PositioningMonitoring.ToleranceTime
16#0030

16#862B

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario
Parametrización de PROFIBUS incoherente; la suma de Ti y To es mayor que un ciclo DP

16#0030

16#862C

El valor tiene un formato numérico erró‐ Cargar la configuración sin errores en el controlador; volver a
neo o está fuera del rango numérico vá‐ habilitar el eje con la instrucción "MC_Power"
lido
El parámetro de la vigilancia de velocidad cero es erróneo. Valor no admisible en <Nombre de
eje>.StandStillSignal.MinDwellTime

16#0030

16#862D

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario
El parámetro de vigilancia de errores de seguimiento es erróneo. Valor no admisible en <Nombre de
eje>.FollowingError.MinValue

16#0030

16#862E

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario
Valor en <Nombre de eje>.Modulo.Length no admisible

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2505

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

16#0030

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

16#862F

Valor en <Nombre de eje>.Modulo.StartValue no admisible
16#0030

16#8630

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario
Valor en <Nombre de eje>.Actor.DriveParameter.ReferenceSpeed no admisible

16#0030

16#8631

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario
La resolución fina ajustada para Gx_XIST2 no es válida. Valor no admisible en <Nombre de
eje>.Sensor.Sensor[1].Parameter.FineResolutionXist2

16#0030

16#8632

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario
El número de vueltas determinables del encóder no es válido. Valor no admisible en <Nombre de
eje>.Sensor.Sensor[1].Parameter.DeterminableRevolutions

16#0030

16#8634

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario
El parámetro de vigilancia de errores de seguimiento es erróneo. Valor no admisible en <Nombre de
eje>.FollowingError.MaxValue

16#0030

16#8635

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario
El parámetro de vigilancia de errores de seguimiento es erróneo. Valor no admisible en <Nombre de
eje>.FollowingError.MinVelocity

16#0030

2506

Solución

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

16#8636

Descripción

Solución

Factor de regulador erróneo. Valor no admisible del factor de precontrol <Nombre de eje>.Position‐
Control.Kpc
16#0030

16#8637

El valor tiene un formato numérico erró‐ ● Cargar la configuración sin errores en el controlador;
neo o está fuera del rango numérico vá‐
volver a habilitar el eje con la instrucción "MC_Power"
lido
● Corregir el valor erróneo online, confirmar el error con la
instrucción "MC_Reset" y reiniciar la orden si fuera
necesario
Valor en <Nombre de eje>.Sensor.Sensor[1].Interface.Type no admisible

16#0011
16#8638

El valor de selección no es válido

Cargar la configuración sin errores en el controlador; volver a
habilitar el eje con la instrucción "MC_Power"

Valor en <Nombre de eje>.Sensor.Sensor[1].Interface.HSC no admisible
16#0011

16#8639

El valor de selección no es válido

Cargar la configuración sin errores en el controlador; volver a
habilitar el eje con la instrucción "MC_Power"

Error en el accionamiento
16#0049

Error de configuración en el dispositivo Cargar la configuración sin errores en el controlador; volver a
habilitar el eje con la instrucción "MC_Power"

16#004A

La tecnología requiere un ciclo de servo
más corto

16#004B

Error interno de sistema.
Comprobar la coherencia del proyecto y volver a cargarlo en
el controlador.

El driver del dispositivo no se ha inicia‐ Para habilitar un objeto tecnológico, debe haberse inicializa‐
lizado durante el arranque
do el driver del actuador.
Volver a iniciar la orden en otro momento.

16#006F

16#863A

No está permitido utilizar una misma di‐ Comprobar en todos los ejes de esta CPU si se utiliza el mis‐
rección para varios ejes.
mo accionamiento o la misma dirección IO del accionamiento
o si se solapan las direcciones. Reducir el número de usos en
un eje.
Comunicación con accionamiento defectuosa

16#004C

Error de configuración en el dispositivo ● Conectar un dispositivo adecuado.
● Comprobar el dispositivo (conexiones).
● Comparar la configuración de HW Config y del objeto
tecnológico.

16#004D

El driver del dispositivo necesita un ci‐
clo de servo más corto

● Conectar un dispositivo adecuado.
● Comprobar el dispositivo (conexiones).
● Comparar la configuración de HW Config y del objeto
tecnológico.

16#004E
16#863B

Error en la comunicación interna con el
dispositivo

Comprobar la coherencia del proyecto y volver a cargarlo en
el controlador.

Error en el encóder

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2507

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

16#0049

Error de configuración en el dispositivo Cargar la configuración sin errores en el controlador; volver a
habilitar el eje con la instrucción "MC_Power"

Solución

16#004A

La tecnología requiere un ciclo de servo
más corto

Error interno de sistema.
Comprobar la coherencia del proyecto y volver a cargarlo en
el controlador.

16#004B

El driver del dispositivo no se ha inicia‐ Para habilitar un objeto tecnológico, debe haberse inicializa‐
lizado durante el arranque
do el driver del actuador.

16#006F

No está permitido utilizar una misma di‐ Comprobar en todos los ejes de esta CPU si se utiliza el mis‐
rección para varios ejes.
mo accionamiento o la misma dirección IO del accionamiento
o si se solapan las direcciones. Reducir el número de usos en
un eje.

Volver a iniciar la orden en otro momento.

16#863C

Comunicación con el encóder defectuosa
16#004C

Error de configuración en el dispositivo ● Conectar un dispositivo adecuado.
● Comprobar el dispositivo (conexiones).
● Comparar la configuración de HW Config y del objeto
tecnológico.

16#004D

El driver del dispositivo necesita un ci‐
clo de servo más corto

● Conectar un dispositivo adecuado.
● Comprobar el dispositivo (conexiones).
● Comparar la configuración de HW Config y del objeto
tecnológico.

16#004E
16#863D

La dirección lógica solicitada no es vá‐
lida.

16#0050

La dirección de entrada lógica solicita‐
da no es válida.

16#0051

La dirección de salida lógica solicitada
no es válida.

● Conectar un dispositivo adecuado.
● Comprobar el dispositivo (conexiones).
● Comprobar la configuración de la topología en HW
Config.
● Comparar la configuración de HW Config y del objeto
tecnológico.

El valor de la variable "ControlPanel.Input.TimeOut" no es válido (panel de mando del eje)
16#0030

16#863F

El valor tiene un formato numérico erró‐ Corregir el valor en la variable del objeto tecnológico <Nom‐
neo o está fuera del rango numérico vá‐ bre de eje>.ControlPanel.Input.TimeOut.
lido
El valor se indica en milisegundos (ms).
Valor en <Nombre de eje>.Actor.DriveParameter.MaxSpeed no admisible

16#0030

2508

Comprobar la coherencia del proyecto y volver a cargarlo en
el controlador.

Falla la comunicación con el aparato (accionamiento o encóder)
16#004F

16#863E

16#8640

Error en la comunicación interna con el
dispositivo

El valor tiene un formato numérico erró‐ Corregir el valor de referencia en el accionamiento y en la
neo o está fuera del rango numérico vá‐ configuración del objeto tecnológico a Actor.MaxSpeed/2.
lido
En caso de conexión analógica del accionamiento, corregir el
valor de referencia en el accionamiento y en la configuración
del objeto tecnológico a Actor.MaxSpeed/1,17.
Error al aplicar automáticamente los parámetros de accionamiento en el dispositivo

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

16#0030

El valor tiene un formato numérico erró‐ Corregir el valor.
neo o está fuera del rango numérico vá‐
lido

16#0059

El dispositivo no está asignado a nin‐
gún dispositivo de accionamiento SINA‐
MICS o no soporta los servicios nece‐
sarios para la adaptación.

16#005A

La aplicación automática de los pará‐
metros se interrumpe por falta de recur‐
sos.

16#005B

La aplicación automática de los pará‐
metros solo es posible si el dispositivo
se ha interconectado directamente en
un área de E/S.

16#005C

Velocidad de giro/lineal máxima
(p1082): el parámetro no existe o su va‐
lor no se puede leer o está fuera de los
límites permitidos. La lectura del pará‐
metro se ha cancelado debido a un
error notificado por el hardware.

16#005D

Par/fuerza máximos (p1520): el pará‐
metro no existe o su valor no se puede
leer o está fuera de los límites permiti‐
dos. La lectura del parámetro se ha
cancelado debido a un error notificado
por el hardware.

16#005E

Par/fuerza máximos (p1521): el pará‐
metro no existe o su valor no se puede
leer o está fuera de los límites permiti‐
dos. La lectura del parámetro se ha
cancelado debido a un error notificado
por el hardware.

16#005F

Resolución fina limitación de fuerza/par
(p1544): el parámetro no existe o su va‐
lor no se puede leer o está fuera de los
límites permitidos. La lectura del pará‐
metro se ha cancelado debido a un
error notificado por el hardware.

16#0060

Velocidad de giro nominal/velocidad li‐
neal nominal (p2000): el parámetro no
existe o su valor no se puede leer o está
fuera de los límites permitidos. La lec‐
tura del parámetro se ha cancelado de‐
bido a un error notificado por el hardwa‐
re.

16#0061

Par/fuerza nominal (p2003): el paráme‐
tro no existe o su valor no se puede leer
o está fuera de los límites permitidos.
La lectura del parámetro se ha cance‐
lado debido a un error notificado por el
hardware.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Solución

Desactivar la aplicación automática de los parámetros en el
dispositivo.
Completar los parámetros requeridos en la configuración del
eje y cargar de nuevo la configuración del eje en el dispositivo.

Comprobar las causas. Desactivar la aplicación automática
de los parámetros en el dispositivo si las causas no se pue‐
den eliminar. Completar los parámetros requeridos en la con‐
figuración del eje y cargar de nuevo la configuración del eje
en el dispositivo.

2509

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#0070

No se han podido leer los parámetros
del dispositivo.

Comprobar la comunicación con el dispositivo.

16#8641

16#8646

2510

Error en la aplicación automática de los parámetros de encóder en el dispositivo
16#0030

El valor tiene un formato numérico erró‐ Corregir el valor.
neo o está fuera del rango numérico vá‐
lido

16#0059

El dispositivo no está asignado a nin‐
gún dispositivo de accionamiento SINA‐
MICS o no soporta los servicios nece‐
sarios para la adaptación.

16#005A

La aplicación automática de los pará‐
metros se interrumpe por falta de recur‐
sos.

16#005B

La aplicación automática de los pará‐
metros solo es posible si el dispositivo
se ha interconectado directamente en
un área de E/S.

16#0062

Sistema de encóder (r0979[1/11].0): un
parámetro no existe o su valor no se
puede leer o está fuera de los límites
permitidos. La lectura del parámetro se
ha cancelado debido a un error notifica‐
do por el hardware.

16#0063

Resolución de encóder (r0979[2/12]):
un parámetro no existe o su valor no se
puede leer o está fuera de los límites
permitidos. La lectura del parámetro se
ha cancelado debido a un error notifica‐
do por el hardware.

16#0064

Resolución fina de encóder Gx_XIST1
(r0979[3/13]): un parámetro no existe o
su valor no se puede leer o está fuera
de los límites permitidos. La lectura del
parámetro se ha cancelado debido a un
error notificado por el hardware.

16#0065

Resolución fina de encóder Gx_XIST2
(r0979[4/14]): un parámetro no existe o
su valor no se puede leer o está fuera
de los límites permitidos. La lectura del
parámetro se ha cancelado debido a un
error notificado por el hardware.

16#0066

Número de vueltas discriminables del
encóder (r0979[5/15]): un parámetro no
existe o su valor no se puede leer o está
fuera de los límites permitidos. La lec‐
tura del parámetro se ha cancelado de‐
bido a un error notificado por el hardwa‐
re.

16#0070

No se han podido leer los parámetros
del dispositivo.

Desactivar la aplicación automática de los parámetros en el
dispositivo. Completar los parámetros requeridos en la con‐
figuración del eje y cargar de nuevo la configuración del eje
en el dispositivo.

Comprobar las causas. Desactivar la aplicación automática
de los parámetros en el dispositivo si las causas no se pue‐
den eliminar. Completar los parámetros requeridos en la con‐
figuración del eje y cargar de nuevo la configuración del eje
en el dispositivo.

Comprobar la comunicación con el dispositivo.

Valor no admisible en <Nombre de eje>.Sensor.Interface.Number

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

16#0030

El valor tiene un formato numérico erró‐ Corregir el valor y cargar la configuración en el dispositivo.
neo o está fuera del rango numérico vá‐
lido

16#8647

Solución

Los ejes PTO no admiten la simulación
16#0001

16#864A

-

Desactivar la simulación.

Valor no admisible en Actor.PTOSliceTime (a partir de V7)
16#006D
16#006E

16#864B

El valor es superior a 20 ms

Corregir el valor y cargar la configuración en el dispositivo.

El valor es inferior a 2 ms
Valor no válido para BehaviourGx_XIST1 (a partir de V7)

16#0001

-

Corregir el valor y cargar la configuración en el dispositivo.

ErrorID 16#8700-16#8704
Error de configuración de la tabla de órdenes
ErrorID

ErrorInfo

16#8700

Descripción

Solución

El valor de "Tipo de orden" en la tabla de órdenes no es válido
16#0001

-

● Cargar la configuración sin errores en el controlador;
volver a habilitar el eje con la instrucción "MC_Power"
● Corregir online el valor erróneo y, en caso necesario,
reiniciar la orden

16#8701

El valor de "Posición / recorrido " en la tabla de órdenes no es válido
16#0002

El valor no tiene un formato numérico
válido

● Cargar la configuración sin errores en el controlador;
volver a habilitar el eje con la instrucción "MC_Power"

16#0005

El valor se encuentra fuera del rango
numérico (mayor que 1.0E12)

16#0006

El valor se encuentra fuera del rango
numérico (menor que -1.0E12)

● Corregir online el valor erróneo y, en caso necesario,
reiniciar la orden

16#8702

El valor de "Velocidad" en la tabla de órdenes no es válido
16#0002

El valor no tiene un formato numérico
válido

16#0008

El valor es mayor que la velocidad má‐ ● Corregir online el valor erróneo y, en caso necesario,
xima configurada
reiniciar la orden
El valor es inferior a la velocidad de
arranque/parada configurada

16#0009
16#8703

16#8704

● Cargar la configuración sin errores en el controlador;
volver a habilitar el eje con la instrucción "MC_Power"

El valor de "Duración" en la tabla de órdenes no es válido
16#0002

El valor no tiene un formato numérico
válido

● Cargar la configuración sin errores en el controlador;
volver a habilitar el eje con la instrucción "MC_Power"

16#0021

El valor es superior a 64800 s

16#0022

El valor es inferior a 0.001 s

● Corregir online el valor erróneo y, en caso necesario,
reiniciar la orden

El valor de "Siguiente paso" en la tabla de órdenes no es válido

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2511

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

16#0011

El valor de selección no es válido

Solución

● Cargar la configuración sin errores en el controlador;
volver a habilitar el eje con la instrucción "MC_Power"
La transición entre órdenes no está per‐
mitida con esta orden
● Corregir online el valor erróneo y, en caso necesario,
reiniciar la orden

16#0023

ErrorID 16#8FF
Errores internos
ErrorID

ErrorInfo

16#8FFF

Descripción

Solución

Error interno
16#F0**

-

POWER OFF y POWER ON de la CPU
Si esto no produce el resultado deseado, póngase en con‐
tacto con el Servicio de Atención al Cliente. Tenga al alcance
la siguiente información:
● ErrorID
● ErrorInfo
● Registros del búfer de diagnóstico

6.2.11.9

Variables del objeto tecnológico Eje de posicionamiento V6...7

Leyenda
Variable

Nombre de la variable

Tipo de datos

Tipo de datos de la variable

Valores

Valor de arranque
(Rango de valores de la variable - valores mínimo a máximo)
Sin una indicación de valores específica rigen los límites del rango de valores del tipo de datos corres‐
pondiente o la indicación bajo "Descripción".

2512

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Acceso

W

Descripción

Acceso a la variable en el programa de usuario
OPR

La aplicación Openness puede leer la variable.

OPRW

La aplicación Openness puede leer y escribir la variable.

R

La variable se puede leer en el programa de usuario y en HMI.

RCCP

La variable se puede leer en el programa de usuario y en HMI, y se actualiza en el punto de
control del ciclo.

RP

La variable se puede leer con la instrucción de Motion Control "MC_ReadParam". El valor
actual de las correspondientes variables se determina al iniciarse la orden.

RW

La variable se puede leer y escribir en el programa de usuario y en HMI. La variable se puede
escribir con la instrucción de Motion Control "MC_WriteParam".

WP

Independientemente de la conexión del accionamiento: si el eje está bloqueado (MC_Po‐
wer.Status = FALSE), la variable se puede escribir con la instrucción de Motion Control
"MC_WriteParam".

WP_PD

Si el accionamiento se conecta a través de PROFIdrive/salida analógica: si el eje está blo‐
queado (MC_Power.Status = FALSE), la variable se puede escribir con la instrucción de
Motion Control "MC_WriteParam".

WP_PTO

Si el accionamiento se conecta a través de PTO: si el eje está bloqueado (MC_Power.Status
= FALSE), la variable se puede escribir con la instrucción de Motion Control "MC_WritePa‐
ram".

-

No se puede utilizar la variable en el programa de usuario.

Efectividad de los cambios en el bloque de datos tecnológico
1

Si el accionamiento se conecta a través de PTO: con la activación, el bloqueo o la habilitación
del eje

2

Si el accionamiento se conecta a través de PTO: con la habilitación del eje

5

Si el accionamiento se conecta a través de PTO: con el siguiente inicio de una orden
MC_MoveAbsolute, MC_MoveRelative, MC_MoveVelocity, MC_MoveJog, MC_Halt o
MC_CommandTable o de una orden activa MC_Home (modo = 3).

6

Si el accionamiento se conecta a través de PTO: con la parada de una orden MC_MoveJog

7

Si el accionamiento se conecta a través de PTO: al iniciar una orden de referenciado pasivo

8

Si el accionamiento se conecta a través de PTO: al iniciar una orden de referenciado activo

9

con el reinicio del objeto tecnológico

10

Si el accionamiento se conecta a través de PROFIdrive/salida analógica: Con la siguiente
llamada de MC-Interpolator [OB92]

Descripción de la variable

El acceso a las variables se realiza por medio de "<TO>.<nombre de variable>". El comodín
<TO> representa el nombre del objeto tecnológico.
Nota
Guardar modificaciones con "WRIT_DBL"
Los cambios en las variables de configuración del objeto tecnológico durante el tiempo de
ejecución se pierden con un POWER OFF, un inicio y parada de la CPU o con el reinicio del
objeto tecnológico.
Si desea guardar los cambios en el bloque de datos tecnológicos incluso tras un POWER OFF,
un inicio y parada de la CPU o un reinicio del objeto tecnológico, es necesario escribir los
cambios en el valor de arranque de la memoria de carga con la instrucción avanzada
"WRIT_DBL".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2513

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Nota
Modificaciones de variables con "WRIT_DBL" que no se pueden cambiar en la RAM
Algunas variables de configuración del objeto tecnológico no se pueden cambiar durante el
tiempo de ejecución. No se pueden escribir directamente (acceso a bloques de datos) y
tampoco se pueden modificar con MC_WriteParam.
Para modificar estas variables de configuración, utilice la instrucción avanzada "WRIT_DBL"
con la que puede cambiar el valor en la memoria de carga.
Para activar la modificación, ejecute un reinicio del objeto tecnológico con MC_Reset (Restart
= TRUE).
Nota
Accesos con "READ_DBL"
Con la instrucción READ_DBL en el bloque de datos tecnológicos solo se pueden transferir
parámetros con el identificador RW desde la memoria de carga a la memoria de trabajo.

Variables relativas a los valores de posición y velocidad a partir de V6
La estructura de variables contiene las consignas y los valores reales de posición y velocidad
del eje.

Variables
Leyenda (Página 2512)
Variable

Tipo de
datos

Valores

Acceso

W

Descripción

Position

REAL

0.0

RCCP,
RP, OPR

-

Posición de consigna del eje

(de -9.0E15 a
9.0E15)

(Indicación en la unidad de medida configurada)
Si el eje no está referenciado, la variable indica el valor
de posición relativo a la posición de habilitación del eje.
Nombre en Openness: Position

Velocity

REAL

0.0

RCCP,
RP, OPR

-

Consigna de velocidad lineal del eje
(Indicación en la unidad de medida configurada)
Nombre en Openness: Velocity

ActualPosition

REAL

0.0
(de -9.0E15 a
9.0E15)

RCCP,
RP, OPR

-

Posición real del eje
(Indicación en la unidad de medida configurada)
Si el eje no está referenciado, la variable indica el valor
de posición relativo a la posición de habilitación del eje.
Nombre en Openness: ActualPosition

ActualVelocity

REAL

0.0
(de -9.0E15 a
9.0E15)

2514

RCCP,
RP, OPR

-

Velocidad real del eje
(Indicación en la unidad de medida configurada)
Nombre en Openness: ActualVelocity

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Consulte también
Estado de movimiento (Página 2470)
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variable Simulation a partir de V6
La estructura de variables <Nombre del eje>.Simulation.Mode contiene el modo de simulación.

Variables
Leyenda (Página 2512)
Variable

Tipo de
datos

Valores

Acceso

W

Descripción

UDINT

0

R

-

Modo de simulación

(de 0 a 1)

OPRW

2,
9

Nombre en Openness:
Simulation.Mode

Simulation.
Mode

0

Sin simulación, modo normal

1

Modo de simulación
En el modo de simulación pueden simularse
los ejes en la CPU sin contar con un acciona‐
miento real.

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables Actor a partir de V6
La estructura de variables <Nombre del eje>.Actor.<Nombre de variable> contiene los
parámetros del accionamiento.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2515

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2512)
Variable

Tipo de
datos

Actor.

STRUCT

2516

Valores

Acceso

W

Descripción
TO_Struct_Actor

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable
Type

Tipo de
datos

Valores

Acceso

W

Descripción

DINT

2

R

-

(de 0 a 2)

OPRW

Nombre en Openness:
Actor.Type
Objeto tecnológico Eje de posicionamiento a partir de
V5:
0

El accionamiento se conecta a través de una
salida analógica. Se regula la posición de to‐
dos los movimientos del eje.

1

El accionamiento se conecta a través de te‐
legramas PROFIdrive. Se regula la posición
de todos los movimientos del eje.

2

El accionamiento se conecta a través de una
interfaz de impulsos.

Objeto tecnológico Eje de posicionamiento V4:
2
InverseDirection

BOOL

FALSE

R

-

WP_PTO

2

OPRW
DirectionMode

INT

DINT

Actor.DataAdaptio‐ BOOL
nOffline*

Nombre en Openness:
Actor.InverseDirection
FALSE

El sentido de movimiento no se invierte.

TRUE

El sentido de movimiento se invierte.

0

R

-

Sentido de giro permitido

(de 0 a 2)

WP_PTO

2

Nombre en Openness:
Actor.DirectionMode

OPRW

DataAdaption

El accionamiento se conecta a través de una
interfaz de impulsos.

0

R

(de 0 a 1)

OPRW

-

OPRW

-

-

0

Ambos sentidos

1

Sentido positivo

2

Sentido negativo

Nombre en Openness:
Actor.DataAdaption
0

La casilla de verificación "Aplicar automática‐
mente los valores del accionamiento en run‐
time (online)" está desactivada.

1

La casilla de verificación "Aplicar automática‐
mente los valores del accionamiento en run‐
time (online)" está activada.

(a partir de V7)
Nombre en Opennes:
Actor.DataAdaptionOffline

PTOSliceTime

INT

2...20

R
WP_PTO
OPRW

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2

FALSE

La casilla de verificación "Aplicar automática‐
mente los valores del accionamiento durante
la configuración (offline)" está desactivada.

TRUE

La casilla de verificación "Aplicar automática‐
mente los valores del accionamiento durante
la configuración (offline)" está activada.

Tiempo de segmento para PTO (Pulse Train Output) en
ms (a partir de V7)
Una orden de Motion Control está dividida en segmen‐
tos y solo puede modificarse al final del segmento. El
tiempo de segmento es la duración de un segmento e

2517

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable

Tipo de
datos

Valores

Acceso

W

Descripción
influye por tanto en el comportamiento de relevo de las
instrucciones de Motion Control.
Nombre en Openess:
Actor.PTOSliceTime

Interface.

STRUCT

TO_Struct_ActorInterface

AddressIn.

VREF

-

-

-

Dirección de entrada para el telegrama PROFIdrive
(parámetro interno)

AREA

BYTE

-

OPR

-

Nombre en Openness:
Actor.Interface.AddressIn.AREA

DB_NUMBER UINT

-

OPR

-

Nombre en Openness:
Actor.Interface.AddressIn.DB_NUMBER

OFFSET

UDINT

-

OPR

-

Nombre en Openness:
Actor.Interface.AddressIn.OFFSET

RID

DWORD

-

OPR

-

Nombre en Openness:
Actor.Interface.AddressIn.RID

STRING

-

OPRW

-

Nombre en Openness:
_Actor.Interface.ProfiDriveIn

ProfiDriveIn*

Dirección de entrada válida que forma parte de un tele‐
grama
Nombre de variable válido
AddressOut.

VREF

-

-

-

Dirección de salida para el telegrama PROFIdrive (pa‐
rámetro interno)

BYTE

-

OPR

-

Nombre en Openness:
Actor.Interface.AddressOut.AREA

DB_NUMBER UINT

-

OPR

-

Nombre en Openness:
Actor.Interface.AddressOut.DB_NUMBER

OFFSET

UDINT

-

OPR

-

Nombre en Openness:
Actor.Interface.AddressOut.OFFSET

RID

DWORD

-

OPR

-

Nombre en Openness:
Actor.Interface.AddressOut.RID

STRING

-

OPRW

-

Nombre en Openness:
_Actor.Interface.ProfiDriveOut

AREA

ProfiDriveOut*

Dirección de salida válida que forma parte de un tele‐
grama
Nombre de variable válido
DataBlock*

STRING

-

OPRW

-

Nombre en Openness:
_Actor.Interface.DataBlock
Dirección del bloque de datos válida

Analog*

STRING

-

OPRW

-

Nombre en Openness:
_Actor.Interface.Analog
Salida analógica válida, dirección del bloque de datos
válida, nombre de variable válido

DataConnec‐
tion*

2518

INT

0
(de 0 a 1)

OPRW

-

Nombre en Openness:
_Actor.Interface.DataConnection
0

Accionamiento

1

Bloque de datos

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable

Tipo de
datos

Valores

Acceso

W

Descripción

-

-

-

Salida de habilitación (parámetro interno)

BYTE

-

OPR

-

Nombre en Openness:
Actor.Interface.DriveReadyOutput.AREA

DB_NUMBER UINT

-

OPR

-

Nombre en Openness:
Actor.Interface.DriveReadyOutput.DB_NUMBER

OFFSET

UDINT

-

OPR

-

Nombre en Openness:
Actor.Interface.DriveReadyOutput.OFFSET

RID

DWORD

-

OPR

-

Nombre en Openness:
Actor.Interface.DriveReadyOutput.RID

EnableDriveOut‐ STRING
put*

-

OPRW

-

Nombre en Openness:
_Actor.Interface.EnableDriveOutput

EnableDriveOut‐ VREF
put
AREA

Entrada válida, salida válida, dirección de memoria vá‐
lida, nombre de variable válido
DriveReadyInput VREF

-

-

-

Entrada de disponibilidad (parámetro interno)

BYTE

-

OPR

-

Nombre en Openness:
Actor.Interface.DriveReadyInput.AREA

DB_NUMBER UINT

-

OPR

-

Nombre en Openness:
Actor.Interface.DriveReadyInput.DB_NUMBER

OFFSET

UDINT

-

OPR

-

Nombre en Openness:
Actor.Interface.DriveReadyInput.OFFSET

RID

DWORD

-

OPR

-

Nombre en Openness:
Actor.Interface.DriveReadyInput.RID

STRING

-

OPRW

-

Nombre en Openness:
_Actor.Interface.DriveReadyInput

AREA

DriveReadyIn‐
put*

Entrada válida, salida válida, dirección de memoria vá‐
lida, nombre de variable válido
PTO

DWORD

0

OPR

-

Salida de impulso (parámetro interno)

PTO*

STRING

-

OPRW

-

Nombre en Openness:
_Actor.Interface.PTO

PTO_OutputA*

STRING

-

OPRW

-

0

Pulse_1

1

Pulse_2

2

Pulse_3

3

Pulse_4

Nombre en Openness:
_Actor.Interface.PTO_OutputA
Dirección de entrada válida, nombre de variable válido
Solo se aceptarán direcciones integradas de la CPU o
de la Signal Board.

PTO_OutputBE‐
nable*

BOOL

OPRW

-

Nombre en Openness:
_Actor.Interface.PTO_OutputBEnable
Solo es posible si PTO_SignalType = 2

PTO_OutputB*

STRING

-

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

OPRW

-

FALSE

La salida B está bloqueada.

TRUE

La salida B está habilitada.

Nombre en Openness:
_Actor.Interface.PTO_OutputB

2519

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable

Tipo de
datos

Valores

Acceso

W

Descripción
Dirección de entrada válida, nombre de variable válido
Solo se aceptarán direcciones integradas de la CPU o
de la Signal Board.

PTO_SignalTy‐
pe*

INT

DriveParameter.

(de 2 a 5)

OPRW

-

STRUCT

ReferenceS‐
peed

REAL

Nombre en Openness:
_Actor.Interface.PTO_SignalType
2

Impulso A y sentido B

3

Pulsación hacia delante A y pulsación hacia
atrás B

4

A/B desfasado

5

A/B desfasado - cuádruple

TO_Struct_ActorDriveParameter
3000.0

R

-

OPRW

Valor de referencia (100 %) para la consigna de veloci‐
dad de giro del accionamiento (NCONS)
La consigna de velocidad de giro se transfiere en el
telegrama PROFIdrive como valor normalizado de
-200% a 200% de "ReferenceSpeed".
En la preselección de consigna mediante un valor ana‐
lógico, la salida analógica puede utilizarse en un rango
de -117 % a 117 %, si el accionamiento lo permite.
Nombre en Openness:
Actor.DriveParameter.ReferenceSpeed

MaxSpeed

REAL

3000.0

R

-

OPRW

Valor máximo de la consigna de velocidad de giro del
accionamiento (NSOLL)
(PROFIdrive: MaxSpeed ≤ 2 × ReferenceSpeed
Consigna analógica: MaxSpeed ≤ 1.17 × ReferenceS‐
peed)
Nombre en Openness:
Actor.DriveParameter.MaxSpeed

PulsesPerDrive‐
Revolution

DINT

1000

R

(de 1 a
WP_PTO
2147483648) OPRW

-

Pulsos por vuelta del motor

2

Nombre en Openness:
Actor.DriveParameter.PulsesPerDriveRevolution

*) Disponible en Openness

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables Sensor[1] a partir de V6
La estructura de variables <Nombre del eje>.Sensor[1].<Nombre de variable> contiene los
parámetros del encóder.

2520

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2512)
Variable

Tipo de
datos

Sensor[1].

STRUCT

Valores

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Acceso

W

Descripción
ARRAY[1..1] TO_Struct_Sensor

2521

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable
Type

Tipo de
datos

Valores

Acceso

W

Descripción

DINT

0

R, OPRW

-

Tipo de encóder (parámetro interno)

(de 0 a 1)

InverseDirection

BOOL

FALSE

Nombre en Openness:
Sensor[1].Type

R,

-

OPRW

System

DINT

1

R, OPRW

DataAdaption

DINT

DINT

-

R,

(de 0 a 2)

OPRW

R, OPRW

-

BOOL

-

Absoluto

Inversión del valor real

FALSE

El valor real no se invierte

TRUE

el valor real se invierte

Sistema de encóder

OPRW

0

Encóder lineal

1

Encóder rotativo

Modo de montaje del encóder
Nombre en Openness:
Sensor[1].MountingMode

-

(de 0 a 1)

Sensor.DataAdap‐
tionOffline*

1

Nombre en Openness:
Sensor[1].System

0

0

Incremental

Nombre en Openness:
Sensor[1].InverseDirection

(de 0 a 1)

MountingMode

0

-

0

En el eje del motor

2

Sistema de medición externo

Nombre en Openness:
Sensor[1].DataAdaption
0

La casilla de verificación "Aplicar automática‐
mente los valores del encóder en runtime
(online)" está desactivada.

1

La casilla de verificación "Aplicar automática‐
mente los valores del encóder en runtime
(online)" está activada.

(a partir de V7)
Nombre en Openness:
_Sensor.DataAdaptionOffline

Interface.
Type

STRUCT
DINT

La casilla de verificación "Aplicar automática‐
mente los valores del encóder durante la con‐
figuración (offline)" está desactivada.

TRUE

La casilla de verificación "Aplicar automática‐
mente los valores del encóder durante la con‐
figuración (offline)" está activada.

TO_Struct_SensorInterface
4
(de 0 a 4)

2522

FALSE

OPR

-

Acoplamiento del encóder (parámetro interno)
Nombre en Openness:
Sensor[1].Interface.Type
0

Encóder PROFIdrive en PROFINET

1

Encóder conectado a módulo tecnológico
(TM)

2

Encóder conectado a accionamiento

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable

Tipo de
datos

Valores

Acceso

W

Descripción
4

Encóder en el contador rápido

AddressIn.

VREF

-

-

-

Dirección de entrada para el telegrama PROFIdrive
(parámetro interno)

AREA

BYTE

-

OPR

-

Parámetro interno
Nombre en Openness:
Sensor[1].Interface.AddressIn.AREA

DB_NUMBER UINT

-

OPR

-

Parámetro interno
Nombre en Openness:
Sensor[1].Interface.AddressIn.DB_NUMBER

OFFSET

UDINT

-

OPR

-

Parámetro interno
Nombre en Openness:
Sensor[1].Interface.AddressIn.OFFSET

RID

DWORD

-

OPR

-

Parámetro interno
Nombre en Openness:
Sensor[1].Interface.AddressIn.RID

ProfiDriveIn*

STRING

-

OPRW

-

Nombre en Openness:
_Sensor[1].Interface.ProfiDriveIn
Dirección de entrada válida que forma parte de un tele‐
grama
Nombre de variable válido

AddressOut.
AREA

VREF

-

-

-

BYTE

-

OPR

-

Dirección de salida para el telegrama PROFIdrive (pa‐
rámetro interno)
Parámetro interno
Nombre en Openness:
Sensor[1].Interface.AddressOut.AREA

DB_NUMBER UINT

-

OPR

-

Parámetro interno
Nombre en Openness:
Sensor[1].Interface.AddressOut.DB_NUMBER

OFFSET

UDINT

-

OPR

-

Parámetro interno
Nombre en Openness:
Sensor[1].Interface.AddressOut.OFFSET

RID

DWORD

-

OPR

-

Parámetro interno
Nombre en Openness:
Sensor[1].Interface.AddressOut.RID

ProfiDriveOut*

STRING

-

OPRW

-

Nombre en Openness:
_Sensor[1].Interface.ProfiDriveOut
Dirección de salida válida que forma parte de un tele‐
grama
Nombre de variable válido

DataBlock*

STRING

-

OPRW

-

DataConnec‐
tion*

UDINT

(de 0 a 1)

OPRW

-

Nombre en Openness:
_Sensor[1].Interface.DataBlock
Dirección del bloque de datos válida

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Nombre en Openness:
_Sensor[1].Interface.DataConnection
0

Encóder

1

Bloque de datos

2523

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable
EncoderCon‐
nection*

Number

Tipo de
datos

Valores

Acceso

W

Descripción

INT

(de 4 a 7)

OPRW

-

Nombre en Openness:
_Sensor[1].Interface.EncoderConnection

UDINT

1

OPRW

-

4

Encóder en contador rápido (HSC)

7

Encóder en PROFIBUS/PROFINET

Números de encóder
Nombre en Openness:
Sensor[1].Interface.Number

HSC

DWORD

0

OPR

-

Contador rápido al que el encóder transfiere el valor
real (parámetro interno)

HSC*

STRING

-

OPRW

-

Nombre en Openness:
_Sensor[1].Interface.HSC
Nombres de contadores rápidos de la configuración
hardware

HSC_Operating‐ INT
Mode*

(de 1 a 3)

OPRW

-

HSC_InputA*

STRING

-

OPRW

-

HSC.InputB*

STRING

-

OPRW

-

Nombre en Openness:
_Sensor[1].Interface.HSC_OperatingMode
1

Bifásica

2

Contador A/B

3

Contador A/B cuádruple

Nombre en Openness:
_Sensor[1].Interface.HSC_InputA
Dirección de entrada válida, nombre de variable válido
Nombre en Openness:
_Sensor[1].Interface.HSC.InputB
Dirección de entrada válida, nombre de variable válido

Parameter.
Resolution

REAL

StepsPerRevo‐
lution

UDINT

FineResolution‐
Xist1

UDINT

FineResolution‐
Xist2

Determinable‐
Revolutions

2524

STRUCT

UDINT

UDINT

TO_Struct_SensorParameter
0.001

R,

(de -1.0E12 a
1.0E12)

OPRW

2048

R,

(de 1 a
8388608)

OPRW

11

R,

(de 0 a 31)

OPRW

9

R,

(de 0 a 31)

OPRW

1

R,

(de 0 a
8388608)

OPRW

-

Resolución de un encóder lineal (distancia entre dos
rayas del encóder)
Nombre en Openness:
Sensor[1].Parameter.Resolution

-

Incrementos por vuelta de un encóder rotativo
Nombre en Openness:
Sensor[1].Parameter.StepsPerRevolution

-

Número de bits para la resolución fina Gx_XIST1 (valor
real cíclico del encóder)
Nombre en Openness:
Sensor[1].Parameter.FineResolutionXist1

-

Número de bits para la resolución fina Gx_XIST2 (valor
absoluto del encóder)
Nombre en Openness:
Sensor[1].Parameter.FineResolutionXist2

-

Número de vueltas determinables de un encóder abso‐
luto multivuelta
Nombre en Openness:
Sensor[1].Parameter.DeterminableRevolutions
0

Encóder incremental

1

Encóder absoluto monovuelta

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable
DistancePerRe‐
volution

Beha‐
viorGx_XIST1

ActiveHoming.
Mode

Tipo de
datos

Valores

Acceso

W

Descripción

REAL

100.0

R,

-

(de 0.0 a
1.0E12)

OPRW

Recorrido de la carga por vuelta de un encóder monta‐
do externamente

1
(0 a 1)

R,

DINT

Nombre en Openness:
Sensor[1].Parameter.DistancePerRevolution
-

OPRW

STRUCT
DINT

Evaluación de los bits Gx_XIST1 (a partir de V7)
0

Sobre la base de los bits ocupados por la re‐
solución del encóder.

1

Evaluar los 32 bits del valor del encóder

TO_Struct_SensorActiveHoming
2
(de 0 a 2)

R,
WP_PTO,
OPRW

-

Modo Referenciado activo

2

Nombre en Openness:
Sensor[1].ActiveHoming.Mode
Objeto tecnológico Eje de posicionamiento a partir de
V5:
0

Marca cero a través de telegrama PROFIdri‐
ve (no PTO)

1

Marca cero a través de telegrama PROFIdri‐
ve y detector de proximidad (no PTO)

2

Referenciado a través de entrada digital

Objeto tecnológico Eje de posicionamiento V4:
2
SideInput

DigitalInputA‐
ddress.
AREA

BOOL

FALSE

RW, WP,
OPRW

1,
8,
10

VREF

-

-

-

BYTE

-

OPR

-

Referenciado a través de entrada digital

Lado del sensor del punto de referencia que se utiliza
con el referenciado activo
Nombre en Openness:
Sensor[1].ActiveHoming.SideInput
FALSE

Lado inferior

TRUE

Lado superior

Dirección de entrada simbólica del sensor del punto de
referencia (parámetro interno)
Parámetro interno
Nombre en Openness:
Sensor[1].ActiveHoming.DigitalInputAddress.AREA

DB_NUMBER UINT

-

OPR

-

Parámetro interno
Nombre en Openness:
Sensor[1].ActiveHoming.DigitalInputA‐
ddress.DB_NUMBER

OFFSET

UDINT

-

OPR

-

Parámetro interno
Nombre en Openness:
Sensor[1].ActiveHoming.DigitalInputAddress.OFFSET

RID

DWORD

-

OPR

-

Parámetro interno
Nombre en Openness:
Sensor[1].ActiveHoming.DigitalInputAddress.RID

DigitalInput*

STRING

-

OPRW

-

Nombre en Openness:
_Sensor[1].ActiveHoming.DigitalInput
Dirección de entrada válida, nombre de variable válido

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2525

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable
HomePositio‐
nOffset

SwitchLevel

PassiveHoming.
DigitalInputA‐
ddress.
AREA

Tipo de
datos

Valores

Acceso

W

Descripción

REAL

0.0

RW, WP,
OPRW

1,
8,
10

Offset del punto de referencia (referenciado activo)

1,
8,
10

Selección del nivel de señal existente en la entrada de
la CPU al alcanzarse el sensor del punto de referencia

(de -1.0E12 a
1.0E12)
BOOL

TRUE

RW, WP,
OPRW

STRUCT

(Indicación en la unidad de medida configurada)
Nombre en Openness:
Sensor[1].ActiveHoming.HomePositionOffset

Nombre en Openness:
Sensor[1].ActiveHoming.SwitchLevel
FALSE

Nivel inferior (Low activo)

TRUE

Nivel superior (High activo)

TO_Struct_SensorPassiveHoming

VREF

-

-

-

Dirección de entrada simbólica del sensor del punto de
referencia (parámetro interno)

BYTE

-

OPR

-

Parámetro interno
Nombre en Openness:
Sensor[1].PassiveHoming.DigitalInputAddress.AREA

DB_NUMBER UINT

-

OPR

-

Parámetro interno
Nombre en Openness:
Sensor[1].PassiveHoming.DigitalInputA‐
ddress.DB_NUMBER

OFFSET

UDINT

-

OPR

-

Parámetro interno
Nombre en Openness:
Sensor[1].PassiveHoming.DigitalInputAddress.OFF‐
SET

RID

DWORD

-

OPR

-

Parámetro interno
Nombre en Openness:
Sensor[1].PassiveHoming.DigitalInputAddress.RID

Mode

DINT

2

R

-

Modo Referenciado pasivo

(de 0 a 2)

WP_PTO

2

Nombre en Openness:
Sensor[1].PassiveHoming.Mode

OPRW

Objeto tecnológico Eje de posicionamiento a partir de
V5:
0

Marca cero a través de telegrama PROFIdri‐
ve (no PTO)

1

Marca cero a través de telegrama PROFIdri‐
ve y detector de proximidad (no PTO)

2

Referenciado a través de entrada digital

Objeto tecnológico Eje de posicionamiento V4:
2
SideInput

2526

BOOL

FALSE

RW, WP,
OPRW

1,
7,
10

Referenciado a través de entrada digital

Lado del sensor del punto de referencia que se utiliza
con el referenciado pasivo
Nombre en Openness:
Sensor[1].PassiveHoming.SideInput
FALSE

Lado inferior

TRUE

Lado superior

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable
DigitalInputA‐
ddress.
AREA

Tipo de
datos

Valores

Acceso

W

Descripción

VREF

-

-

-

Dirección de entrada simbólica del sensor del punto de
referencia (parámetro interno)

BYTE

-

OPR

-

Parámetro interno
Nombre en Openness:
Sensor[1].PassiveHoming.DigitalInputAddress.AREA

DB_NUMBER UINT

-

OPR

-

Parámetro interno
Nombre en Openness:
Sensor[1].PassiveHoming.DigitalInputA‐
ddress.DB_NUMBER

OFFSET

UDINT

-

OPR

-

Parámetro interno
Nombre en Openness:
Sensor[1].PassiveHoming.DigitalInputAddress.OFF‐
SET

RID

DWORD

-

OPR

-

Parámetro interno
Nombre en Openness:
Sensor[1].PassiveHoming.DigitalInputAddress.RID

DigitalInput*

STRING

SwitchLevel

BOOL

OPRW

-

RW, WP,
OPRW

1,
7,
10

Nombre en Openness:
_Sensor[1].PassiveHoming.DigitalInput
Dirección de entrada válida, nombre de variable válido

TRUE

Selección del nivel existente en la entrada de la CPU al
alcanzarse el sensor del punto de referencia
Nombre en Openness:
Sensor[1].PassiveHoming.SwitchLevel
FALSE

Nivel inferior (Low activo)

TRUE

Nivel superior (High activo)

*) Disponible en Openness

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variable Units a partir de V6
La estructura de variables <Nombre del eje>.Units.LengthUnit contiene las unidades de
medida configuradas de los parámetros.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2527

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2512)
Variable

Tipo de
datos

Units.

STRUCT

LengthUnit

INT

Valores

Acceso

W

Descripción
TO_Struct_Units

1013

R

-

Unidad de medida configurada de los parámetros

(de -32768 a
32767)

WP_PTO

2

Nombre en Openness:
Units.LengthUnit

OPRW

-1

Impulsos

1005

°

1010

m

1013

mm

1018

ft

1019

in

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variable Mechanics a partir de V6
La estructura de variables <Nombre del eje>.Mechanics.LeadScrew contiene el recorrido por
vuelta del motor.

Variables
Leyenda (Página 2512)
Variable

Tipo de
datos

Mechanics.

Valores

Acceso

W

Descripción

10.0

R,
WP_PTO,
OPRW

-

Recorrido por vuelta del motor

STRUCT

LeadScrew

REAL

TO_Struct_Mechanics
(de -1.0E12 a
1.0E12)

(Indicación en la unidad de medida configurada)
Nombre en Openness:
Mechanics.LeadScrew

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

2528

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables Modulo a partir de V6
La estructura de variables <Nombre del eje>.Modulo.<Nombre de variable> contiene los
ajustes de módulo.

Variables
Leyenda (Página 2512)
Variable

Tipo de
datos

Modulo.

STRUCT

Enable

BOOL

Valores

Acceso

W

Descripción
TO_Struct_Modulo

FALSE

R, OPRW

-

Nombre en Openness:
Modulo.Enable
FALSE

Conversión de módulo desactivada

TRUE

Conversión de módulo activada

Si la conversión de módulo está activada, se comprue‐
ba si la longitud del módulo > 0.0
Length

REAL

360.0

R, OPRW

-

(de 0.001 a
1.0E12)
StartValue

REAL

0.0
(de -1.0E12 a
1.0E12)

Longitud de módulo
Nombre en Openness:
Modulo.Length

R, OPRW

-

Valor inicial de módulo
Nombre en Openness:
Modulo.StartValue

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables DynamicLimits a partir de V6
La estructura de variables <Nombre del eje>.DynamicLimits.<Nombre de variable> contiene la
configuración de los límites dinámicos.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2529

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2512)
Variable

Tipo de
datos

DynamicLimits.

STRUCT

MaxVelocity

REAL

Valores

Acceso

W

TO_Struct_DynamicLimits
250.0

R

-

Velocidad máxima del eje

WP_PTO

2

(Indicación en la unidad de medida configurada)

OPRW
MinVelocity

REAL

Descripción

10.0

Nombre en Openness:
DynamicLimits.MaxVelocity

R

-

Velocidad de arranque/parada del eje

WP_PTO

2

(Indicación en la unidad de medida configurada)

OPRW

Nombre en Openness:
DynamicLimits.MinVelocity

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables DynamicDefaults a partir de V6
La estructura de variables <Nombre del eje>.DynamicDefaults.<Nombre de variable> contiene
la configuración de los ajustes predeterminados de dinámica.

2530

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2512)
Variable

Tipo de
datos

DynamicDefaults.

STRUCT

Acceleration

REAL

Valores

REAL

48.0

48.0
(de 0.0 a
1.0E12)

Jerk

REAL

W

Descripción
TO_Struct_DynamicDefaults

(de 0.0 a
1.0E12)
Deceleration

Acceso

192.0
(de 0.0 a
1.0E12)

RW, WP,
OPRW

RW, WP,
OPRW

RW, WP,
OPRW

5,
6,
10

Ajuste predeterminado de la aceleración del eje

5,
6,
10

Ajuste predeterminado de la deceleración del eje

5,
10

Ajuste predeterminado del tirón durante la rampa de
aceleración y deceleración del eje

(Indicación en la unidad de medida configurada)
Nombre en Openness:
DynamicDefaults.Acceleration
(Indicación en la unidad de medida configurada)
Nombre en Openness:
DynamicDefaults.Deceleration

(Indicación en la unidad de medida configurada)
El tirón está activado si el tirón configurado es superior
a 0.00004 mm/s².
Nombre en Openness:
DynamicDefaults.Jerk

EmergencyDecele‐ REAL
ration

120.0
(de 0.0 a
1.0E12)

RW, WP,
OPRW

1,
5,
6,
10

Deceleración de parada de emergencia del eje
(Indicación en la unidad de medida configurada)
Nombre en Openness:
DynamicDefaults.EmergencyDeceleration

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables PositionLimits_SW a partir de V6
La estructura de variables <Nombre del eje>.PositionLimits_SW.<Nombre de variable>
contiene la configuración de la vigilancia de posición con finales de carrera por software. Con
finales de carrera por software se limita el área de trabajo de un eje de posicionamiento.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2531

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2512)
Variable

Tipo de
datos

PositionLimits_SW.

STRUCT

Active

BOOL

MinPosition

REAL

Valores

REAL

W

Descripción
TO_Struct_PositionLimitsSW

FALSE

-10000.0
(de -1.0E12 a
1.0E12)

MaxPosition

Acceso

10000.0
(de -1.0E12 a
1.0E12)

RW, WP,
OPRW

RW, WP,
OPRW

RW, WP,
OPRW

1,
5,
6,
10

Nombre en Openness:
PositionLimits_SW.Active
FALSE

Los finales de carrera por software están de‐
sactivados.

TRUE

Los finales de carrera por software están ac‐
tivados.

1,
5,
6,
10

Posición del final de carrera por software inferior

1,
5,
6,
10

Posición del final de carrera por software superior

(Indicación en la unidad de medida configurada)
Nombre en Openness:
PositionLimits_SW.MinPosition
(Indicación en la unidad de medida configurada)
Nombre en Openness:
PositionLimits_SW.MaxPosition

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables PositionLimits_HW a partir de V6
La estructura de variables <Nombre del eje>.PositionLimits_HW.<Nombre de variable>
contiene la configuración de la vigilancia de posición con finales de carrera por hardware. Con
finales de carrera hardware se limita la zona de desplazamiento de un eje de posicionamiento.

2532

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2512)
Variable

Tipo de
datos

PositionLimits_HW.

STRUCT

Valores

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Acceso

W

Descripción
TO_Struct_PositionLimitsHW

2533

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable
Active

MinSwitchLevel

Tipo de
datos

Valores

Acceso

W

Descripción

BOOL

FALSE

RW, WP,
OPRW

1,
5,
6,
10

Nombre en Openness:
PositionLimits_HW.Active

BOOL

FALSE

RW

-

WP_PTO

2

FALSE

Los finales de carrera por hardware están de‐
sactivados.

TRUE

Los finales de carrera por hardware están ac‐
tivados.

Selección del nivel de señal existente en la entrada de
la CPU al alcanzarse el final de carrera por hardware
inferior
Nombre en Openness:
PositionLimits_HW.MinSwitchLevel

MinSwitchAddress. VREF

FALSE

Nivel inferior (Low activo)

TRUE

Nivel superior (High activo)

-

-

-

Dirección de entrada simbólica del final de carrera por
hardware inferior (parámetro interno)

AREA

BYTE

-

OPR

-

Nombre en Openness:
PositionLimits_HW.MinSwitchAddress.AREA

DB_NUMBER

US‐
HORT

-

OPR

-

Nombre en Openness:
PositionLimits_HW.MinSwitchAddress.DB_NUMBER

OFFSET

UINT

-

OPR

-

Nombre en Openness:
PositionLimits_HW.MinSwitchAddress.OFFSET

RID

UINT

-

OPR

-

Nombre en Openness:
PositionLimits_HW.MinSwitchAddress.RID

MinSwitch*

STRING

-

OPRW

-

Nombre en Openness:
_PositionLimits_HW.MinSwitch

MaxSwitchLevel

BOOL

FALSE

RW

-

WP_PTO

2

Dirección de entrada válida, nombre de variable válido
Selección del nivel de señal existente en la entrada de
la CPU al alcanzarse el final de carrera por hardware
superior
Nombre en Openness:
PositionLimits_HW.MaxSwitchLevel

MaxSwitchAd‐
dress.

FALSE

Nivel inferior (Low activo)

TRUE

Nivel superior (High activo)

VREF

-

-

-

Dirección de entrada del final de carrera por hardware
superior (parámetro interno)

AREA

BYTE

-

OPR

-

Nombre en Openness:
PositionLimits_HW.MaxSwitchAddress.AREA

DB_NUMBER

US‐
HORT

-

OPR

-

Nombre en Openness:
PositionLimits_HW.MaxSwitchAddress.DB_NUMBER

OFFSET

UINT

-

OPR

-

Nombre en Openness:
PositionLimits_HW.MaxSwitchAddress.OFFSET

RID

UINT

-

OPR

-

Nombre en Openness:
PositionLimits_HW.MaxSwitchAddress.RID

STRING

-

OPRW

-

Nombre en Openness:
_PositionLimits_HW.MaxSwitch

MaxSwitch*

Dirección de entrada válida, nombre de variable válido
*) Disponible en Openness

2534

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables Homing a partir de V6
La estructura de variables <Nombre del eje>.Homing.<Nombre de variable> contiene la
configuración para el referenciado del eje.

Variables
Leyenda (Página 2512)
Variable

Tipo de
datos

Homing.

STRUCT

AutoReversal

BOOL

ApproachDirection

ApproachVelocity

BOOL

REAL

Valores

Acceso

W

Descripción
TO_Struct_Homing

FALSE

TRUE

200.0
(de 0.0 a
1.0E12)

RW, WP,
OPRW

RW, WP,
OPRW

RW, WP,
OPRW

1,
8,
10

1,
8,
10

1,
8,
10

Nombre en Openness:
Homing.AutoReversal
FALSE

La inversión de sentido en el final de carrera
por hardware está desactivada.

TRUE

La inversión de sentido en el final de carrera
por hardware está activada.

Nombre en Openness:
Homing.ApproachDirection
FALSE

Sentido de aproximación negativo para la
búsqueda del sensor del punto de referencia
y sentido de referenciado negativo

TRUE

Sentido de aproximación positivo para la bús‐
queda del sensor del punto de referencia y
sentido de referenciado positivo

Velocidad de aproximación del eje con referenciado ac‐
tivo
(Indicación en la unidad de medida configurada)
Nombre en Openness:
Homing.ApproachVelocity

ReferencingVelo‐
city

REAL

40.0
(de 0.0 a
1.0E12)

RW, WP,
OPRW

1,
8,
10

Velocidad de referenciado del eje con referenciado ac‐
tivo
(Indicación en la unidad de medida configurada)
Nombre en Openness:
Homing.ReferencingVelocity

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2535

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables PositionControl a partir de V6
La estructura de variables <Nombre del eje>.PositionControl.<Nombre de variable> contiene
los ajustes de la regulación de posición.

Variables
Leyenda (Página 2512)
Variable

Tipo de
datos

PositionControl.

STRUCT

Kv

REAL

Kpc

REAL

Valores

Acceso

W

Descripción
TO_Struct_PositionControl

10.0

R

(de 0.0 a
2147480.0)

WP_PD 10

("Kv" > 0.0)

OPRW

Nombre en Openness:
PositionControl.Kv

100.0

R

(de 0.0 a
150.0)

WP_PD 10
OPRW

-

-

Ganancia P de la regulación de posición

Precontrol de velocidad porcentual de la regulación de
posición
Nombre en Openness:
PositionControl.Kpc

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables FollowingError a partir de V6
La estructura de variables <Nombre del eje>.FollowingError.<Nombre de variable> contiene la
configuración de la vigilancia dinámica de errores de seguimiento.

2536

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2512)
Variable

Tipo de
datos

FollowingError.

STRUCT

EnableMonitoring

BOOL

Valores

Acceso

W

TO_Struct_FollowingError
TRUE

R

-

OPRW

MinValue

REAL

MaxValue

REAL

MinVelocity

REAL

Descripción

10.0

R

-

(de 0.0 a
1.0E12)

WP_PD

10

OPRW

100.0

R

-

(de 0.0 a
1.0E12)

WP_PD

10

10.0

R

-

(de 0.0 a
1.0E12)

WP_PD

10

OPRW

OPRW

Nombre en Openness:
FollowingError.EnableMonitoring
FALSE

Vigilancia de errores de seguimiento desacti‐
vada

TRUE

Vigilancia de errores de seguimiento activada

Error de seguimiento admisible con velocidades inferio‐
res al valor de "MinVelocity".
Nombre en Openness:
FollowingError.MinValue
Error de seguimiento máximo admisible que puede al‐
canzarse a velocidad máxima.
Nombre en Openness:
FollowingError.MaxValue
"MinValue" es admisible por debajo de esta velocidad y
se mantiene constante.
Nombre en Openness:
FollowingError.MinVelocity

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables PositioningMonitoring a partir de V6
La estructura de variables <Nombre del eje>.PositionMonitoring.<Nombre de variable>
contiene la configuración de la vigilancia de posición al final de un movimiento de
posicionamiento.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2537

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2512)
Variable

Tipo de
datos

PositionMonitoring.

STRUCT

ToleranceTime

REAL

Valores

Acceso

W

Descripción
TO_Struct_PositionMonitoring

1.0

R

-

Tiempo de tolerancia

(de 0.0 a
1.0E12)

WP_PD

10

Duración máxima permitida desde que se alcanza la
consigna de velocidad 0 hasta que se entra en la ven‐
tana de posicionamiento.

OPRW

Nombre en Openness:
PositionMonitoring.ToleranceTime
MinDwellTime

REAL

Window

REAL

0.1

R

-

(de 0.0 a
1.0E12)

WP_PD

10

Tiempo mínimo de permanencia en la ventana de posi‐
cionamiento

1.0

R

-

Ventana de posicionamiento

(de 0.001 a
1.0E12)

WP_PD

10

Nombre en Openness:
PositionMonitoring.Window

OPRW

OPRW

Nombre en Openness:
PositionMonitoring.MinDwellTime

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables StandstillSignal a partir de V6
La estructura de variables <Nombre del eje>.StandstillSignal.<Nombre de variable> contiene
la configuración de la señal de velocidad cero.

Variables
Leyenda (Página 2512)
Variable

Tipo de
datos

StandstillSignal.

STRUCT

VelocityThreshold

MinDwellTime

2538

REAL

REAL

Valores

Acceso

W

Descripción
TO_Struct_StandstillSignal

5.0

R

-

Umbral de velocidad

(de 0.0 a
1.0E12)

WP_PD

10

Si se rebasa por defecto, empieza el tiempo mínimo de
permanencia.

OPRW

Nombre en Openness:
StandStillSignal.VelocityThreshold

0.01

R

-

Tiempo mínimo de permanencia

(de 0.0 a
1.0E12)

WP_PD

10

Nombre en Openness:
StandStillSignal.MinDwellTime

OPRW

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables StatusPositioning a partir de V6
La estructura de variables <Nombre del eje>.StatusPositioning.<Nombre de variable> indica
el estado de un movimiento de posicionamiento.

Variables
Leyenda (Página 2512)
Variable

Tipo de
datos

StatusPositioning.

STRUCT

Distance

REAL

Valores

Acceso

W

Descripción
TO_Struct_StatusPositioning

0.0
(de -9.0E15 a
9.0E15)

RCCP,
RP, OPR

-

Distancia actual del eje hasta la posición de destino
(Indicación en la unidad de medida configurada)
El valor de la variable solo es válido mientras se ejecuta
la orden de posicionamiento con "MC_MoveAbsolute",
"MC_MoveRelative" o del panel de mando del eje.
Nombre en Openness:
StatusPositioning.Distance

TargetPosition

REAL

0.0
(de -9.0E15 a
9.0E15)

RCCP,
RP, OPR

-

Posición de destino del eje
(Indicación en la unidad de medida configurada)
El valor de la variable solo es válido mientras se ejecuta
la orden de posicionamiento con "MC_MoveAbsolute",
"MC_MoveRelative" o del panel de mando del eje.
Nombre en Openness:
StatusPositioning.TargetPosition

FollowingError

REAL

0.0
(de -9.0E15 a
9.0E15)

RCCP,
RP, OPR

-

Error de seguimiento actual del eje
(Indicación en la unidad de medida configurada)
FollowingError = 0.0 con conexión del accionamiento a
través de PTO (Pulse Train Output).
Nombre en Openness:
StatusPositioning.FollowingError

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables StatusDrive a partir de V6
La estructura de variables <Nombre del eje>.StatusDrive.<Nombre de variable> indica el
estado del accionamiento.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2539

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2512)
Variable

Tipo de
datos

StatusDrive.

STRUCT

InOperation

BOOL

CommunicationOK BOOL

Valores

Acceso

W

Descripción
TO_Struct_StatusDrive

FALSE

FALSE

RCCP,
RP, OPR

RCCP,
RP, OPR

-

Estado de operación del accionamiento
Nombre en Openness:
StatusDrive.InOperation

-

FALSE

Accionamiento no preparado. Las consignas
no se ejecutan.

TRUE

Accionamiento listo. Las consignas pueden
ejecutarse.

Comunicación BUS cíclica entre controlador y acciona‐
miento
Nombre en Openness:
StatusDrive.CommunicationOK

AdaptionState

DINT

0
(de 0 a 4)

R, OPR

10

FALSE

Comunicación no establecida

TRUE

Comunicación establecida

Estado de aplicación del accionamiento
Nombre en Openness:
StatusDrive.AdaptionState
0

Datos no aplicados

1

Aplicando datos

2

Datos aplicados

3

Aplicación imposible o no seleccionada

4

Error en la aplicación

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables StatusSensor a partir de V6
La estructura de variables <Nombre del eje>.StatusSensor[1].<Nombre de variable> indica el
estado del sistema de medición.

2540

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2512)
Variable

Tipo de
datos

StatusSensor[1].

STRUCT

State

DINT

Valores

AbsEncoderOffset

REAL

W

Descripción
TO_Struct_StatusSensor

0
(de 0 a 2)

CommunicationOK BOOL

Acceso

FALSE

0.0
(de -9.0E15 a
9.0E15)

RCCP,
RP, OPR

RCCP,
RP, OPR

RCCP,
RP, OPR

-

Estado del valor del encóder
Nombre en Openness:
StatusSensor.State

-

0

No válido

1

Esperando estado válido

2

Válido

Comunicación BUS cíclica entre controlador y encóder
Nombre en Openness:
StatusSensor.CommunicationOK

-

FALSE

Comunicación no establecida

TRUE

Comunicación establecida

Decalaje del punto de referencia hasta el valor de un
encóder absoluto.
El valor se guarda de forma remanente en la CPU.
Nombre en Openness: StatusSensor.AbsEncoderOff‐
set

AdaptionState

DINT

0
(de 0 a 1)

R, OPR

10

Estado de aplicación del encóder
Nombre en Openness:
StatusSensor.AdaptionState
0

Datos no aplicados

1

Aplicando datos

2

Datos aplicados

3

Aplicación imposible o no seleccionada

4

Error en la aplicación

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables StatusBits a partir de V6
La estructura de variables <Nombre del eje>.StatusBits.<Nombre de variable> contiene
información sobre el estado del objeto tecnológico.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2541

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2512)
Variable

Tipo de
datos

StatusBits.

STRUCT

2542

Valores

Acceso

W

Descripción
TO_Struct_StatusBits

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable
Activated

Enable

AxisSimulation

NonPositionCon‐
trolled

HomingDone

Tipo de
datos

Valores

Acceso

W

Descripción

BOOL

FALSE

RCCP,
RP, OPR

-

Activación del eje

BOOL

BOOL

BOOL

BOOL

FALSE

FALSE

FALSE

FALSE

RCCP,
RP, OPR

RCCP,
RP, OPR

RCCP,
RP, OPR

RCCP,
RP, OPR

Nombre en Openness:
StatusBits.Activated

-

FALSE

El eje no está activado.

TRUE

El eje está activado. El eje está conectado al
PTO (Pulse Train Output) asignado. Los da‐
tos del bloque de datos tecnológico se actua‐
lizan cíclicamente.

Estado de habilitación del eje
Nombre en Openness:
StatusBits.Enable

-

-

-

FALSE

El eje no está habilitado.

TRUE

El eje está habilitado y listo para aceptar ór‐
denes de Motion Control.

Nombre en Openness:
StatusBits.AxisSimulation
FALSE

La simulación está desactivada.

TRUE

La simulación está activada.

Nombre en Openness:
StatusBits.NonPositionControlled
FALSE

El eje se encuentra en modo de regulación de
posición.

TRUE

El eje se encuentra en funcionamiento sin re‐
gulación de posición.

Estado de referenciado del eje
Nombre en Openness:
StatusBits.HomingDone
FALSE

El eje no está referenciado.

TRUE

El eje está referenciado y puede ejecutar ór‐
denes de posicionamiento absolutas.

Para realizar un posicionamiento relativo no es nece‐
sario que el eje esté referenciado.
Durante el referenciado activo, el estado es FALSE.
Durante el referenciado pasivo, el estado TRUE se
mantiene si el eje ya estaba referenciado previamente.
Done

Error

BOOL

BOOL

FALSE

FALSE

RCCP,
RP, OPR

RCCP,
RP, OPR

-

Procesamiento de órdenes del eje
Nombre en Openness:
StatusBits.Done

-

FALSE

En el eje hay una orden activa de Motion
Control.

TRUE

En el eje no hay ninguna orden activa de Mo‐
tion Control.

Estado de error del eje
Nombre en Openness:
StatusBits.Error
FALSE

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

En el eje no hay ningún error.

2543

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable

Tipo de
datos

Valores

Acceso

W

Descripción
TRUE

Se ha producido un error en el eje.

Si requiere información más detallada sobre el error,
consulte los parámetros "ErrorID" y "ErrorInfo" de las
instrucciones Motion Control en el modo automático.
En el modo manual, la causa detallada del error se
muestra en el campo "Aviso de error" del panel de man‐
do del eje.
Standstill

PositioningCom‐
mand

VelocityCommand

BOOL

BOOL

BOOL

FALSE

FALSE

FALSE

RCCP,
RP, OPR

RCCP,
RP, OPR

RCCP,
RP, OPR

-

Parada del eje
Nombre en Openness:
StatusBits.Standstill

-

FALSE

El eje está en movimiento.

TRUE

El eje está parado.

Procesamiento de una orden de posicionamiento
Nombre en Openness:
StatusBits.PositioningCommand

-

FALSE

No hay ninguna orden de posicionamiento
activa en el eje.

TRUE

El eje ejecuta una orden de posicionamiento
de las instrucciones "MC_MoveRelative" o
"MC_MoveAbsolute" de Motion Control.

Procesamiento de una orden con especificación de ve‐
locidad
Nombre en Openness:
StatusBits.VelocityCommand

HomingCommand

CommandTa‐
bleActive

ConstantVelocity

2544

BOOL

BOOL

BOOL

FALSE

FALSE

FALSE

RCCP,
RP, OPR

RCCP,
RP, OPR

RCCP,
RP, OPR

-

FALSE

En el eje no hay ninguna orden activa con
especificación de la velocidad.

TRUE

El eje ejecuta una orden de desplazamiento a
la velocidad especificada de las instrucciones
"MC_MoveVelocity" o "MC_MoveJog" de Mo‐
tion Control.

Procesamiento de una orden de referenciado
Nombre en Openness:
StatusBits.HomingCommand

-

FALSE

No hay ninguna orden de referenciado activa
en el eje.

TRUE

El eje ejecuta una orden de referenciado de la
instrucción "MC_Home" de Motion Control.

Procesamiento de una tabla de órdenes
Nombre en Openness:
StatusBits.CommandTableActive

-

FALSE

No hay ninguna tabla de órdenes activa en el
eje.

TRUE

El eje se controla con la instrucción de Motion
Control "MC_CommandTable".

Velocidad constante
Nombre en Openness:
StatusBits.ConstantVelocity

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable

Accelerating

Decelerating

Tipo de
datos

BOOL

BOOL

ControlPanelActive BOOL

DriveReady

RestartRequired

BOOL

BOOL

Valores

FALSE

FALSE

FALSE

FALSE

FALSE

Acceso

RCCP,
RP, OPR

RCCP,
RP, OPR

RCCP,
RP, OPR

RCCP,
RP, OPR

RCCP,
RP, OPR

W

-

Descripción
FALSE

El eje se acelera, decelera o está parado.

TRUE

Se ha alcanzado la velocidad de consigna. El
eje se mueve a velocidad constante.

Proceso de aceleración
Nombre en Openness:
StatusBits.Accelerating

-

FALSE

El eje se decelera, avanza a velocidad cons‐
tante o está parado.

TRUE

El eje se acelera.

Proceso de deceleración
Nombre en Openness:
StatusBits.Decelerating

-

FALSE

El eje se acelera, avanza a velocidad cons‐
tante o está parado.

TRUE

El eje se frena.

Estado de activación del panel de mando del eje
Nombre en Openness:
StatusBits.ControlPanelActive

-

FALSE

El modo de operación "Modo automático" es‐
tá activado. El programa de usuario tiene el
control sobre el eje.

TRUE

Se ha activado el modo de operación "Control
manual" en el panel de mando del eje. El pa‐
nel de mando del eje tiene el control sobre el
eje. El eje no puede ser controlado por el pro‐
grama de usuario.

Estado de operación del accionamiento
Nombre en Openness:
StatusBits.DriveReady

-

FALSE

El accionamiento no está listo. Las consignas
no se ejecutan.

TRUE

El accionamiento está listo. Las consignas
pueden ejecutarse.

Es necesario reiniciar el eje
Nombre en Openness:
StatusBits.RestartRequired
FALSE

No es necesario reiniciar el eje.

TRUE

Los valores han sido modificados en la me‐
moria de carga.

Para cargar los valores en la memoria de trabajo con la
CPU en el estado operativo RUN, es necesario reiniciar
el eje. Utilice para ello la instrucción de Motion Control
"MC_Reset".
SWLimitMinActive

BOOL

FALSE

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

RCCP,
RP, OPR

-

Estado del final de carrera por software inferior
Nombre en Openness:
StatusBits.SWLimitMinActive

2545

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable

Tipo de
datos

SWLimitMaxActive

HWLimitMinActive

BOOL

BOOL

HWLimitMaxActive BOOL

Valores

FALSE

FALSE

FALSE

Acceso

RCCP,
RP, OPR

RCCP,
RP, OPR

RCCP,
RP, OPR

W

-

Descripción
FALSE

Se respeta la zona de trabajo configurada del
eje.

TRUE

Se ha alcanzado o sobrepasado el final de
carrera por software inferior.

Estado del final de carrera por software superior
Nombre en Openness:
StatusBits.SWLimitMaxActive

-

FALSE

Se respeta la zona de trabajo configurada.

TRUE

Se ha alcanzado o sobrepasado el final de
carrera por software superior.

Estado del final de carrera por hardware inferior
Nombre en Openness:
StatusBits.HWLimitMinActive

-

FALSE

Se respeta la zona de desplazamiento admi‐
sible configurado.

TRUE

Se ha alcanzado o sobrepasado el final de
carrera por hardware inferior.

Estado del final de carrera por hardware superior
Nombre en Openness:
StatusBits.HWLimitMaxActive
FALSE

Se respeta la zona de desplazamiento admi‐
sible configurado.

TRUE

Se ha alcanzado o sobrepasado el final de
carrera por hardware superior.

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables ErrorBits a partir de V6
La estructura de variables <Nombre del eje>.ErrorBits.<Nombre de variable> indica errores en
el objeto tecnológico.

2546

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2512)
Variable

Tipo de
datos

ErrorBits.

STRUCT

Valores

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Acceso

W

Descripción
TO_Struct_ErrorBits

2547

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable
SystemFault

ConfigFault

DriveFault

Tipo de
datos

Valores

Acceso

W

Descripción

BOOL

FALSE

RCCP,
RP, OPR

-

Error interno de sistema

RCCP,
RP, OPR

-

RCCP,
RP, OPR

-

BOOL

BOOL

FALSE

FALSE

Nombre en Openness:
ErrorBits.SystemFault
Configuración incorrecta del eje
Nombre en Openness:
ErrorBits.ConfigFault
Error en el accionamiento. Fallo de la señal "Acciona‐
miento listo".
Nombre en Openness:
ErrorBits.DriveFault

SWLimit

HWLimit

DirectionFault

HWUsed

BOOL

BOOL

BOOL

BOOL

FALSE

FALSE

FALSE

FALSE

RCCP,
RP, OPR

-

RCCP,
RP, OPR

-

RCCP,
RP, OPR

-

RCCP,
RP, OPR

-

Final de carrera por software alcanzado o sobrepasado
Nombre en Openness:
ErrorBits.SWLimit
Final de carrera por hardware alcanzado o sobrepasado
Nombre en Openness:
ErrorBits.HWLimit
Sentido de movimiento no permitido
Nombre en Openness:
ErrorBits.DirectionFault
Un segundo eje utiliza el mismo PTO (Pulse Train Out‐
put) y está habilitado con "MC_Power".
Nombre en Openness:
ErrorBits.HWUsed

SensorFault

Communication‐
Fault

BOOL

BOOL

FALSE

FALSE

RCCP,
RP, OPR

-

RCCP,
RP, OPR

-

Error en el sistema del encóder
Nombre en Openness:
ErrorBits.SensorFault
Error de comunicación
Hay interferencias en la comunicación con un dispositi‐
vo conectado.
Nombre en Openness:
ErrorBits.CommunicationFault

FollowingError

BOOL

FALSE

RCCP,
RP, OPR

-

Rebasado por exceso el error de seguimiento máximo
admitido
Nombre en Openness:
ErrorBits.FollowingError

PositioningFault

BOOL

FALSE

RCCP,
RP, OPR

-

Error de posicionamiento
El eje no se ha posicionado correctamente al final de un
movimiento de posicionamiento.
Nombre en Openness:
ErrorBits.PositioningFault

AdaptionError

2548

BOOL

FALSE

RCCP,
RP, OPR

-

Error al aplicar los datos
Nombre en Openness:
ErrorBits.AdaptionError

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables ControlPanel a partir de V6
Las variables "ControlPanel" no contienen datos relevantes para el usuario. En el programa de
usuario no se puede acceder a dichas variables.

Variables
Las variables "ControlPanel" siguientes se pueden leer en Openness:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2549

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Leyenda (Página 2512)
Variable

Tipo de
datos

ControlPanel.

STRUCT

2550

Valores

Acceso

W

Descripción
TO_Struct_ControlPanel

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable
Input
TimeOut

Tipo de
datos

Valores

Acceso

W

STRUCT
DINT

Descripción
TO_Struct_Input

-

OPR

-

(parámetro interno)
Nombre en Openness:
ControlPanel.Input.TimeOut

EsLifeSign

DINT

-

OPR

-

(parámetro interno)
Nombre en Openness:
ControlPanel.Input.EsLifeSign

Command[1].
ReqCounter

STRUCT
DINT

ARRAY[1..1] TO_Struct_Command
-

OPR

-

(parámetro interno)
Nombre en Openness:
ControlPanel.Input.Command[1].ReqCounter

Type

DINT

-

OPR

-

(parámetro interno)
Nombre en Openness:
ControlPanel.Input.Command[1].Type

Position

REAL

-

OPR

-

(parámetro interno)
Nombre en Openness: ControlPanel.Input.Com‐
mand[1].Position

Velocity

REAL

-

OPR

-

(parámetro interno)
Nombre en Openness:
ControlPanel.Input.Command[1].Velocity

Acceleration

REAL

-

OPR

-

(parámetro interno)
Nombre en Openness:
ControlPanel.Input.Command[1].Acceleration

Jerk

REAL

-

OPR

-

(parámetro interno)
Nombre en Openness:
ControlPanel.Input.Command[1].Jerk

Param

INT

-

OPR

-

(parámetro interno)
Nombre en Openness:
ControlPanel.Input.Command[1].Param

Output.
RTLifeSign

STRUCT
INT

-

OPR

TO_Struct_Output
-

(parámetro interno)
Nombre en Openness:
ControlPanel.Output.RTLifeSign

Command[1].
AckCounter

STRUCT
INT

-

OPR

ARRAY[1..1] TO_Struct_Command
-

(parámetro interno)
Nombre en Openness:
ControlPanel.Output.Command[1].AckCounter

ErrorID

ErrorInfo

Done

US‐
HORT

-

US‐
HORT

-

BOOL

-

OPR

-

(parámetro interno)
Nombre en Openness:
ControlPanel.Output.Command[1].ErrorID

OPR

-

(parámetro interno)
Nombre en Openness:
ControlPanel.Output.Command[1].ErrorInfo

OPR

-

(parámetro interno)
Nombre en Openness:
ControlPanel.Output.Command[1].Done

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2551

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable
Aborted

Tipo de
datos

Valores

Acceso

W

Descripción

BOOL

-

OPR

-

(parámetro interno)
Nombre en Openness:
ControlPanel.Output.Command[1].Aborted

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables Internal a partir de V6
Las variables "Internal" no contienen datos relevantes para el usuario. En el programa de
usuario no se puede acceder a dichas variables.

Variables
Leyenda (Página 2512)
Variable

Tipo de
datos

Internal[1..4].

STRUCT

Id

INT

Valores

Acceso

W

ARRAY [1..4] TO_Struct_Internal
0

OPRW

-

(de -32768 a
32767)
Value

REAL

Descripción

0

(parámetro interno)
Nombre en Openness:
Internal[1..4].Id

OPRW

(de -9.0E15 a
9.0E15)

-

(parámetro interno)
Nombre en Openness:
Internal[1..4].Value

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Actualización de las variables del objeto tecnológico
Las informaciones de estado y error del eje mostradas en las variables del objeto tecnológico
se actualizan respectivamente en el punto de control del ciclo.
Las modificaciones de valores en las variables de configuración no son efectivas de forma
inmediata. Consulte en la descripción detallada de la variable correspondiente las condiciones
bajo las cuales una modificación resulta efectiva.

2552

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

6.2.11.10

Variables del objeto tecnológico Tabla de órdenes V6
La estructura de variables <Tabla de órdenes>.Command[n].<Nombre de variable> contiene
los parámetros configurados de la orden.

Variables
Leyenda (Página 2512)
Variable

Tipo de
datos

Command[n].

STRUCT

Type

INT

Valores

Velocity

Duration

NextStep

REAL

REAL

REAL

INT

0

0.0

0.0

0.0

0
(de 0 a 1)

StepCode

WORD

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

W

Descripción
ARRAY[1..32] TO_Struct_Command

(de 0 a 151)

Position

Acceso

0

RW,
OPRW

-

Nombre en Openness:
Command[n].Type

RW,
OPRW

-

RW,
OPRW

-

RW,
OPRW

-

RW,
OPRW

-

RW,
OPRW

Tipo de orden

0

Orden "Empty"

2

Orden "Halt"

5

Orden "Positioning Relative"

6

Orden "Positioning Absolute"

7

Orden "Velocity setpoint"

151

Orden "Wait"

Posición de destino/recorrido de la orden
Nombre en Openness:
Command[n].Position
Velocidad de la orden
Nombre en Openness:
Command[n].Velocity
Duración de la orden
Nombre en Openness:
Command[n].Duration
Modo para la transición a la siguiente orden
Nombre en Openness:
Command[n].NextStep

-

0

"Finalizar orden"

1

"Suavizar transición del movimien‐
to"

Código de paso de la orden
Nombre en Openness:
Command[n].StepCode

2553

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable

Tipo de
datos

Valores

Acceso

W

Descripción

WarningEnabled*

BOOL

FALSE

OPRW

-

Nombre en Openness:
_WarningEnabled

UseAxisParametersFrom*

INT/
STRING

-

OPRW

-

FALSE

La advertencia está bloqueada

TRUE

La advertencia está habilitada

Nombre en Openness:
_UseAxisParametersFrom
Enum de la lista desplegable "Utilizar pará‐
metros del eje de" o nombre del eje
No asigne a sus ejes el nombre "Eje de ejem‐
plo" porque este nombre está reservado.

*) Disponible en Openness

Consulte también
Variables del objeto tecnológico Tabla de órdenes V4...5 (Página 2655)
Variables del objeto tecnológico Tabla de órdenes V1...3 (Página 2654)

6.2.11.11

Versiones V1...6

Salidas de la CPU relevantes para Motion Control (versión tecnológica V1...3)
El número de accionamientos utilizables depende de la CPU, del número de PTO (Pulse Train
Outputs) y del número de salidas disponibles del generador de impulsos.
Las siguientes representaciones proporcionan información sobre las correspondientes
dependencias:

Número máximo de PTO
El número máximo de PTO (accionamientos) controlables depende de la referencia de la CPU:
Referencia CPU

Número de PTO

xxxxxxx-1xx30-xxxx

2

xxxxxxx-1xx31-xxxx

4

El número máximo de PTO (accionamientos) controlables es válido con independencia del uso
de una Signal Board.

Salidas utilizables del generador de impulsos
La CPU dispone de una salida de impulsos o una salida de sentido para controlar un motor
paso a paso o un servomotor con interfaz de impulsos. El accionamiento recibe a través de la
salida de impulsos los impulsos necesarios para mover el motor. La salida de sentido controla
el sentido de desplazamiento del accionamiento.

2554

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
La salida de impulsos y la salida de sentido se encuentran firmemente asignadas entre sí y
conforman una salida del generador de impulsos. Como salidas del generador de impulsos se
pueden utilizar salidas integradas de la CPU o bien salidas de una Signal Board. Puede elegir
entre las salidas integradas de la CPU y las salidas de la Signal Board en la configuración de
dispositivos, bajo Generadores de impulsos (PTO/PWM) en la rúbrica "Propiedades".
La tabla siguiente muestra el número de accionamientos utilizables por CPU o Signal Board:
CPU

Integra‐
da

Signal Board
DI2/DO2 x
DC24V
20kHz

DI2/DO2 x
DC24V
200kHz

DO4 x
DC24V
200kHz

DI2/DO2 x
DC5V
200kHz

DO4 x DC5V
200kHz

CPU 1211C, CPU
1212C, CPU 1214C

DC/DC/
DC

2

2

2

2

2

2

(MLFB - Referencia

AC/DC/
RLY

-

1

1

2

1

2

DC/DC/
RLY

-

1

1

2

1

2

DC/DC/
DC

2

3

3

4

3

4

AC/DC/
RLY

-

1

1

2

1

2

DC/DC/
RLY

-

1

1

2

1

2

DC/DC/
DC

3

4

4

4

4

4

AC/DC/
RLY

-

1

1

2

1

2

DC/DC/
RLY

-

1

1

2

1

2

DC/DC/
DC

4

4

4

4

4

4

AC/DC/
RLY

-

1

1

2

1

2

DC/DC/
RLY

-

1

1

2

1

2

DC/DC/
DC

4

4

4

4

4

4

AC/DC/
RLY

-

1

1

2

1

2

DC/DC/
RLY

-

1

1

2

1

2

xxxxxxx-1xx30-xxxx)

CPU 1211C
(MLFB - Referencia
xxxxxxx-1xx31-xxxx)

CPU 1212C
(MLFB - Referencia
xxxxxxx-1xx31-xxxx)

CPU 1214C
(MLFB - Referencia
xxxxxxx-1xx31-xxxx)

CPU 1215C

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2555

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
La asignación posible de direcciones de las salidas de impulsos y sentido se recoge en la
siguiente tabla:
CPU
S7-1200

Salidas PTO1 1
Imp.

CPU 1211C, CPU
CPU 1212C, Signal
CPU 1214C, Board
CPU 1215C
(DC/DC/DC)
CPU 1211C, CPU
CPU 1212C, Signal
CPU 1214C, Board
CPU 1215C
(AC/DC/
RLY)
CPU 1211C, CPU
CPU 1212C, Signal
CPU 1214C, Board
CPU 1215C
(DC/DC/
RLY)

Sentido

Salidas PTO2 2
Imp.

Sentido

Salidas PTO3 1
Imp.

Sentido

Salidas PTO4 2
Imp.

Sentido

Ax.0

Ax.1

Ax.2

Ax.3

Ax.4

Ax.5

Ax.6

Ax.7

Ay.0

Ay.1

Ay.2

Ay.3

Ay.0

Ay.1

Ay.2

Ay.3

-

-

-

-

-

-

-

-

Ay.0

Ay.1

Ay.2

Ay.3

Ay.0

Ay.1

Ay.2

Ay.3

-

-

-

-

-

-

-

-

Ay.0

Ay.1

Ay.2

Ay.3

Ay.0

Ay.1

Ay.2

Ay.3

x = dirección inicial de byte de las salidas On-board de la CPU (valor estándar = 0)
y = dirección inicial de byte de las salidas Signal Board (valor estándar = 4)
Si se utiliza una variante de CPU DC/DC/DC con una Signal Board DI2/DO2, las señales del
PTO1/3 se pueden emitir a través de las salidas integradas de la CPU o a través de la Signal
Board.

1

Si se utiliza una variante de CPU DC/DC/DC con una Signal Board DO4, tanto las señales del
PTO1/3 como las del PTO2/4 se pueden emitir a través de las salidas integradas de la CPU o
a través de la Signal Board.
2

PTO3 y PTO4 están disponibles solo para las CPU con la referencia xxxxxxx-1xx31-xxxx.

2556

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Nota
Acceso a las salidas del generador de impulsos a través de la memoria imagen de proceso
Si se ha activado el PTO (Pulse Train Output) y se ha asignado a un eje, el firmware asume el
control sobre las correspondientes salidas del generador de impulsos.
Al asumir el control se interrumpe también la conexión entre la memoria imagen de proceso y
la salida de periferia. Si bien el usuario tiene la posibilidad de escribir en la memoria imagen de
proceso de las salidas del generador de impulsos con el programa de usuario o la tabla de
observación, esta no se transmite a la salida de periferia. Por consiguiente, tampoco es posible
observar la salida de periferia a través del programa de usuario o la tabla de observación. Las
informaciones leídas reflejan el valor de la memoria imagen de proceso, las cuales no
coinciden con el estado verdadero de la salida de periferia.
En las demás salidas de la CPU no asignadas fijamente por el firmware de la CPU, el estado
de la salida de periferia puede ser controlado u monitorizado de la forma habitual a través de
la memoria imagen de proceso.

Frecuencias límite de las salidas de impulsos
Para las salidas de impulsos son válidas las siguientes frecuencias límite:
Salida de impulso

Frecuencias límite para objeto
tecnológico Eje de posiciona‐
miento V1

Frecuencias límite del
objeto tecnológico Eje
de posicionamiento V2/
V3
para la CPU < V3.0

Frecuencias límite del objeto
tecnológico Eje de posiciona‐
miento V2/V3
para la CPU V3.0

On-board (MLFB - referencia
xxxxxxx-1xx30-xxxx)

2 Hz ≤ f ≤ 100 kHz

2 Hz ≤ f ≤ 100 kHz

1 Hz ≤ f ≤ 100 kHz

On-board (MLFB - referencia
xxxxxxx-1xx31-xxxx)

2 Hz ≤ f ≤ 100 kHz (PTO 1+2) 2 Hz ≤ f ≤ 100 kHz
2 Hz ≤ f ≤ 20 kHz (PTO 3+4) (PTO 1+2)

1 Hz ≤ f ≤ 100 kHz (PTO 1+2)

Signal Board DI2/DO2 x DC24V
20kHz

2 Hz ≤ f ≤ 20 kHz

2 Hz ≤ f ≤ 20 kHz

1 Hz ≤ f ≤ 20 kHz

Signal Board DI2/DO2 x DC24V
200kHz

2 Hz ≤ f ≤ 100 kHz

2 Hz ≤ f ≤ 200 kHz

1 Hz ≤ f ≤ 200 kHz

Signal Board DO4 x DC24V
200kHz

2 Hz ≤ f ≤ 100 kHz

2 Hz ≤ f ≤ 200 kHz

1 Hz ≤ f ≤ 200 kHz

Signal Board DI2/DO2 x DC5V
200kHz

2 Hz ≤ f ≤ 100 kHz

2 Hz ≤ f ≤ 200 kHz

1 Hz ≤ f ≤ 200 kHz

Signal Board DO4 x DC5V
200kHz

2 Hz ≤ f ≤ 100 kHz

2 Hz ≤ f ≤ 200 kHz

1 Hz ≤ f ≤ 200 kHz

2 Hz ≤ f ≤ 20 kHz (PTO
3+4)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

1 Hz ≤ f ≤ 20 kHz (PTO 3+4)

2557

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Señales del accionamiento
Para Motion Control puede parametrizar opcionalmente una interfaz de accionamiento para
"Accionamiento habilitado" y "Accionamiento listo". Si se utiliza la interfaz de accionamiento es
posible seleccionar libremente la salida digital para el accionamiento habilitado y la entrada
digital para "Accionamiento listo".

Límites de aceleración/deceleración
Para la aceleración y deceleración se aplican los siguientes límites:
Aceleración/deceleración

Valor (CPU < V3.0)

Valor (CPU V3.0)

Aceleración/deceleración mínimas

2,8E-1 pulsos/s

2

5,0E-3 pulsos/s2

Aceleración/deceleración máximas

9,5E+9 pulsos/s2

9,5E+9 pulsos/s2

Límites de tirón
Para el tirón son válidos los siguientes límites:
Tirón

Valor (CPU < V3.0)

Valor (CPU V3.0)

Tirón mínimo

4,0E-2 pulsos/s3

4,0E-3 pulsos/s3

Tirón máximo

1,5E+8 pulsos/s

1,0E+10 pulsos/s3

3

Consulte también
Salidas de la CPU relevantes para Motion Control (Página 2306)

Diálogos de configuración
V1...3
Configuración - General (objeto tecnológico "Eje" V1...3)
Configure las propiedades básicas del objeto tecnológico "Eje" en la ventana de configuración
"General".

Nombre del eje:
Defina en este campo el nombre del eje o del objeto tecnológico "Eje". El objeto tecnológico
aparece con ese nombre en el árbol del proyecto.

Hardware - Interfaz
Los impulsos se transmiten a la etapa de potencia del accionamiento a través de salidas
digitales de asignación fija.

2558

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
En CPUs con salidas de relé la señal de impulso no puede emitirse en ellas, ya que los relés
no soportan las frecuencias de conmutación necesarias. Para poder utilizar el PTO en esas
CPUs (Pulse Train Output), es necesario utilizar una Signal Board con salidas digitales.
Nota
El PTO requiere la funcionalidad de un contador rápido (HSC). Para la CPU versión < V3.0 se
utiliza para ello un HSC que seguidamente dejará de estar a disposición del usuario. Para la
CPU versión ≥ V3.0 se utiliza para ello un HSC interno.
El estado del contador no puede evaluarse por medio de su dirección de entrada.
La asignación entre PTO y HSC es fija. Si el usuario activa el PTO1, éste queda conectado al
HSC1. Al activar el PTO2, éste queda conectado al HSC2.
En la lista desplegable "Selección del generador de impulsos" elija el PTO (Pulse Train Output)
a través del cual deben proporcionarse los impulsos para controlar los motores paso a paso o
los servomotores con interfaz de impulsos. Si en la configuración de dispositivos no se han
utilizado los generadores de impulso ni los contadores rápidos para otro fin, la interfaz por
hardware podrá configurarse automáticamente. En este caso, el PTO elegido aparece
marcado en blanco en la lista desplegable. En los campos de salida "Fuente de salidas",
"Salida de impulso", "Salida de sentido" y "Contador rápido asignado" se enumeran las
interfaces utilizadas.
Proceda tal como se indica a continuación si desea modificar las interfaces o si el PTO no se
ha podido configurar automáticamente (la entrada de la lista desplegable "Selección del
generador de impulsos" aparece con fondo rojo):
1. Haga clic en el botón "Configuración de dispositivos".
La configuración de dispositivos del generador de impulsos se abre.
Amplíe el área de propiedades de la configuración de dispositivos si la configuración del
generador de impulsos no resulta visible.

2. Active la casilla de verificación "Activar este generador de impulsos".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2559

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
3. Seleccione la entrada "Parametrización" en el navegador local.
La "Parametrización" se abre.

4. En la lista desplegable elija "Generador de impulsos como:" la entrada "PTO".
5. En la lista desplegable elija "Origen señal:" la entrada "Salida de CPU integrada" o "Salida
de la Signal Board". La entrada "Salida de la Signal Board" será seleccionable únicamente
para PTO1, o bien para PTO1 y PTO2 según la Signal Board empleada. Para más
información consulte el capítulo: Salidas de la CPU relevantes para Motion Control
(Página 2306)
6. Regrese a la configuración del eje.
Si el contador rápido correspondiente no se ha utilizado ya de otro modo, los campos de
PTO de la configuración del eje "General" no están resaltados sobre un fondo rojo. Si no es
el caso, corrija la configuración con ayuda de los avisos de error.

Unidad personalizada
En la lista desplegable, seleccione la unidad deseada para el sistema de medida del eje. La
unidad seleccionada se utiliza para una nueva configuración del objeto tecnológico "Eje" y para
la visualización de los datos actuales del eje.
Los valores en los parámetros de entrada (Position, Distance, Velocity, ...) de las instrucciones
de Motion Control también se refieren a esta unidad.
Nota
En determinadas circunstancias, un cambio posterior del sistema de medida no podrá
convertirse correctamente en todas las ventanas de configuración del objeto tecnológico. En
ese caso, compruebe la configuración de todos los parámetros del eje.
Si fuera necesario, en el programa de usuario se deberán adaptar los valores de los
parámetros de entrada de las instrucciones de Motion Control a la nueva unidad de medida.

Consulte también
Configuración - General (Página 2356)

2560

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Configuración - Referenciar (objeto tecnológico "Eje" V1)
En la ventana de configuración "Referenciación", configure los parámetros para la
referenciación activa y pasiva. El tipo de referenciación se ajusta a través del parámetro de
entrada "Mode" de la instrucción de Motion Control. Aquí el valor Mode = 2 se corresponde con
la referenciación pasiva y Mode = 3 con la referenciación activa.

Entrada del sensor del punto de referencia
Seleccione la entrada digital para el sensor del punto de referencia en la lista desplegable. La
entrada debe ser apta para alarmas. Como entradas para el sensor del punto de referencia
están disponibles las entradas de CPU On-board y las entradas de una Signal Board insertada.
Nota
Las entradas digitales están ajustadas de forma estándar con un tiempo de filtración de 6,4 ms.
La utilización como sensor del punto de referencia puede provocar deceleraciones no
deseadas y, con ello, imprecisiones. En determinadas circunstancias, y dependiendo de la
velocidad de referenciación y la dimensión del sensor del punto de referencia, puede que no
se reconozca el punto de referencia. El tiempo de filtración se puede ajustar en la configuración
de dispositivos de las entradas digitales, en "Filtros de entrada".
Se debe seleccionar un tiempo de filtración menor que la duración de la señal de entrada en
el sensor del punto de referencia.

Permitir inversión del sentido en el final de carrera por hardware (sólo referenciación activa)
Active esta casilla de verificación si desea utilizar los finales de carrera por hardware como
levas de inversión para la aproximación al punto de referencia. Los finales de carrera por
hardware deben estar activados para poder realizar la inversión del sentido. Si se utiliza el
firmware V1.0 de la CPU, ambos finales de carrera por hardware deberán estar configurados.
Si se utiliza el firmware V2.0 de la CPU, sólo deberá estar configurado en el sentido de
aproximación el final de carrera por hardware.
Si se llega al final de carrera por hardware durante el referenciado activo, el eje frena con la
deceleración configurada (no con la deceleración de parada de emergencia) y realiza una
inversión del sentido. Entonces el sensor del punto de referencia se busca en la dirección
contraria.
Si esta inversión del sentido no está activada y el eje alcanza el final de carrera por hardware
durante la referenciación activa, la aproximación al punto de referencia se cancela con un error
y el eje se frena con la deceleración de parada de emergencia.
Nota
Asegúrese de que la máquina no golpee contra un tope mecánico durante una inversión del
sentido, adoptando para ello una de las siguientes medidas:
● Mantenga una velocidad baja de aproximación
● Incremente la aceleración / deceleración configurada
● Incremente la distancia entre el final de carrera por hardware y el tope de hardware

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2561

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Sentido de aproximación / referenciación (referenciación activa y pasiva)
Con el sentido seleccionado, determine el "sentido de aproximación" durante la referenciación
activa para buscar el sensor del punto de referencia, así como el sentido de referenciación. El
sentido de referenciado determina el sentido en el que el eje se aproxima al lado configurado
del sensor del punto de referencia para realizar el referenciado.
Consulte el efecto del sentido de aproximación ajustado para la referenciación pasiva en la
tabla que encontrará en "Sensor del punto de referencia".

Lado del sensor del punto de referencia (referenciación activa y pasiva)
● Referenciación activa
Indique aquí si el eje debe ser referenciado por el lado superior o inferior del sensor del
punto de referencia.
Nota
Dependiendo de la posición inicial del eje y de la configuración de los parámetros de
referenciación, la aproximación al punto de referencia puede diferir del gráfico mostrado en
la ventana de configuración.
● Referenciación pasiva
En la referenciación pasiva, los movimientos para la referenciación deben ser realizados
por el usuario mediante órdenes de marcha. El lado del sensor del punto de referencia por
el cual se realiza la referenciación depende de los siguientes factores:
– Configuración "sentido de aproximación"
– Configuración "sensor del punto de referencia"
– Sentido actual de marcha durante la referenciación pasiva
La siguiente tabla muestra detalles del efecto de los factores:
Factores de influencia:

2562

Configuración -

Configuración -

sentido de aproxima‐
ción

sensor del punto de re‐
ferencia

positivo

"Lado inferior"

positivo

"Lado superior"

negativo

"Lado inferior"

Negativo

"Lado superior"

Resultado:
Sentido actual de mar‐
cha

Referenciación en el
sensor del punto de re‐
ferencia

sentido positivo

Lado superior

sentido negativo

Lado inferior

sentido positivo

Lado inferior

sentido negativo

Lado superior

sentido positivo

Lado inferior

sentido negativo

Lado superior

sentido positivo

Lado superior

sentido negativo

Lado inferior

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Velocidad (sólo referenciación activa)
Especifique en este campo la velocidad con la que se buscará el sensor del punto de referencia
durante la marcha correspondiente.
Límites (independientes de la unidad de medida seleccionada):
● Velocidad de arranque/parada ≤ velocidad de aproximación ≤ velocidad máxima

Velocidad de referenciación (sólo referenciación activa)
Especifique en este campo la velocidad con la que el eje se posicionará en el sensor del punto
de referencia para la referenciación.
Límites (independientes de la unidad de medida seleccionada):
● Velocidad de arranque/parada ≤ velocidad de referenciación ≤ velocidad máxima

Offset del punto de referencia (sólo referenciación activa)
En este campo se puede indicar el offset del punto de referencia si la posición de referencia
deseada difiere de la posición del sensor del punto de referencia.
Si el valor es diferente de 0, el eje ejecuta las siguientes acciones después de la referenciación
en el sensor del punto de referencia:
1. Movimiento del eje a la velocidad de referenciación por el valor del offset del punto de
referencia
2. Después de extraer el offset del punto de referencia, el eje se encuentra en la posición del
punto de referencia que se ha indicado en el parámetro de entrada "Position" de la
instrucción de Motion Control "MC_Home".
Límites (independientes de la unidad de medida seleccionada):
● -1.0e12 ≤ offset del punto de referencia: ≤ 1.0e12

Posición del punto de referencia
Como posición del punto de referencia se utiliza la posición parametrizada en la instrucción de
Motion Control "MC_Home".

Configuración - Referenciar (objeto tecnológico "Eje" V2...3)
Configuración - Referenciar - General (objeto tecnológico Eje V2...3)
En la ventana de configuración "Referenciar - General", configure la entrada del sensor del
punto de referencia para la referenciación activa y pasiva.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2563

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Entrada del sensor del punto de referencia
Seleccione la entrada digital para el sensor del punto de referencia en la lista desplegable. La
entrada debe ser apta para alarmas. Como entradas para el sensor del punto de referencia
están disponibles las entradas de CPU On-board y las entradas de una Signal Board insertada.
Nota
Las entradas digitales están ajustadas de forma estándar con un tiempo de filtrado de 6,4 ms.
La utilización como sensor del punto de referencia puede provocar deceleraciones no
deseadas y, con ello, imprecisiones. En determinadas circunstancias, y dependiendo de la
velocidad de referenciación y la dimensión del sensor del punto de referencia, puede que no
se reconozca el punto de referencia. El tiempo de filtración se puede ajustar en la configuración
de dispositivos de las entradas digitales, en "Filtros de entrada".
Se debe seleccionar un tiempo de filtración menor que la duración de la señal de entrada en
el sensor del punto de referencia.

Selección de nivel
Seleccione en la lista despegable el nivel del sensor del punto de referencia con el que se debe
referenciar.

Consulte también
Marcha - referenciación activa (Página 2389)

Configuración - Referenciar - Pasiva (objeto tecnológico Eje V2...3)
En la ventana de configuración "Referenciar - Pasiva", configure los parámetros que se
necesitan para la referenciación pasiva.
En la referenciación pasiva, el movimiento debe ser activado por parte del usuario (p. ej.,
mediante una petición de desplazamiento del eje). La referenciación pasiva se inicia a través
de la instrucción de Motion Control "MC_Home" con el parámetro de entrada utilizado
"Mode" = 2.

Lado del sensor del punto de referencia
Indique aquí si el eje debe ser referenciado por el lado inferior o superior al sensor del punto
de referencia.

2564

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Posición del punto de referencia
Como posición del punto de referencia se utiliza la posición parametrizada en la instrucción de
Motion Control "MC_Home".
Nota
Si la referenciación pasiva se efectúa sin una petición de desplazamiento del eje (eje en
reposo), la referenciación se lleva a cabo en el siguiente flanco ascendente o descendente del
sensor del punto de referencia.

Configuración - Referenciar - Activa (objeto tecnológico Eje V2...3)
En la ventana de configuración "Referenciar - Activa", configure los parámetros que se
necesitan para la referenciación activa. La referenciación activa se inicia a través de la
instrucción de Motion Control "MC_Home" con el parámetro de entrada utilizado "Mode" = 3.

Permitir inversión de sentido en final de carrera por hardware
Active esta casilla de verificación si desea utilizar los finales de carrera por hardware como
levas de inversión para la aproximación al punto de referencia. Los finales de carrera por
hardware deben estar activados para poder realizar la inversión del sentido (al menos debe
estar configurado el final de carrera por hardware en el sentido de aproximación).
Si se llega al final de carrera por hardware durante la referenciación activa, el eje frena con la
deceleración configurada (no con la deceleración de parada de emergencia) y realiza una
inversión del sentido. Entonces el sensor del punto de referencia se busca en la dirección
contraria.
Si esta inversión del sentido no está activada y el eje alcanza el final de carrera por hardware
durante la referenciación activa, la aproximación al punto de referencia se cancela con un error
y el eje se frena con la deceleración de parada de emergencia.
Nota
Dentro de lo posible, asegúrese de que la máquina no golpee contra un tope mecánico durante
una inversión del sentido, adoptando para ello una de las siguientes medidas:
● Mantenga una velocidad de aproximación reducida.
● Aumente la aceleración / deceleración configuradas.
● Aumente la distancia entre el final de carrera por hardware y el tope mecánico.

Sentido de aproximación / referenciación
Con el sentido seleccionado, determine el sentido de aproximación durante la referenciación
activa a fin de buscar el sensor del punto de referencia, así como el sentido de referenciación.
El sentido de referenciación determina el sentido con el cual el eje se aproxima al lado del
sensor del punto de referencia configurado para realizar la operación de referenciación.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2565

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Lado del sensor del punto de referencia
Indique aquí si el eje debe ser referenciado por el lado inferior o superior al sensor del punto
de referencia.

Velocidad
Especifique en este campo la velocidad con la que se buscará el sensor del punto de referencia
durante la marcha correspondiente.
Límites (independientes de la unidad de medida seleccionada):
● Velocidad de arranque/parada ≤ velocidad de aproximación ≤ velocidad máxima

Velocidad de referenciación
Especifique en este campo la velocidad con la que debe realizarse el posicionamiento hacia el
sensor del punto de referencia para la referenciación.
Límites (independientes de la unidad de medida seleccionada):
● Velocidad de arranque/parada ≤ velocidad de referenciación ≤ velocidad máxima

Offset del punto de referencia
En este campo se puede indicar el offset del punto de referencia si la posición de referencia
deseada difiere de la posición del sensor del punto de referencia.
Si el valor es diferente de 0, el eje ejecuta las siguientes acciones después de la referenciación
en el sensor del punto de referencia:
1. Movimiento del eje a la velocidad de referenciación por el valor del offset del punto de
referencia
2. Después de extraer el offset del punto de referencia, el eje se encuentra en la posición del
punto de referencia que se ha indicado en el parámetro de entrada "Position" de la
instrucción de Motion Control "MC_Home".
Límites (independientes de la unidad de medida seleccionada):
● -1.0e12 ≤ offset del punto de referencia: ≤ 1.0e12

Posición del punto de referencia
Como posición del punto de referencia se utiliza la posición parametrizada en la instrucción de
Motion Control "MC_Home".

Cambio de configuración de los valores dinámicos en el programa de usuario (objeto tecnológico "Eje"
V1...3)
Los siguientes parámetros de configuración pueden modificarse en la CPU mientras se
ejecuta el programa de usuario:

2566

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Aceleración y deceleración
Puede modificar los valores de la aceleración y deceleración incluso durante el tiempo de
ejecución del programa de usuario. Para ello utilice las siguientes variables del objeto
tecnológico:
● <Nombre de eje>.Config.DynamicDefaults.Acceleration
para modificar la aceleración
● <Nombre de eje>.Config.DynamicDefaults.Deceleration
para modificar la deceleración
Para saber cuándo tienen efecto las modificaciones de los parámetros de configuración,
consulte en el anexo la descripción de las variables del objeto tecnológico (Página 2615).

Deceleración de parada de emergencia
Puede modificar el valor de la deceleración de parada de emergencia incluso durante el tiempo
de ejecución del programa de usuario. Para ello utilice la siguiente variable del objeto
tecnológico:
● <Nombre de eje>.Config.DynamicDefaults.EmergencyDeceleration
Para saber cuándo tienen efecto las modificaciones del parámetro de configuración, consulte
en el anexo la descripción de las variables del objeto tecnológico.
ATENCIÓN
Una vez modificado este parámetro puede resultar necesario tener que adaptar las
posiciones de los finales de carrera de hardware, así como otras configuraciones relevantes
para la seguridad.

Limitación de tirones (a partir del objeto tecnológico Eje V2.0)
También puede activar y desactivar la limitación de tirones durante el tiempo de ejecución del
programa de usuario y modificar el valor del tirón. Para ello utilice las siguientes variables del
objeto tecnológico:
● <Nombre de eje>.Config.DynamicDefaults.JerkActive
para activar y desactivar la limitación de tirones
● <Nombre de eje>.Config.DynamicDefaults.Jerk
para modificar el tirón
Para saber cuándo tienen efecto las modificaciones del parámetro de configuración, consulte
en el anexo la descripción de las variables del objeto tecnológico.

Consulte también
Modificar la configuración de los valores de dinámica en el programa de usuario (Página 2383)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2567

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

V4
Configuración - General (objeto tecnológico Eje de posicionamiento V4)
Configure las propiedades básicas del objeto tecnológico Eje de posicionamiento en la
ventana de configuración "General".

Nombre del eje
Defina en este campo el nombre del eje o del objeto tecnológico Eje de posicionamiento. El
objeto tecnológico aparece con ese nombre en el árbol del proyecto.

Hardware - Interfaz
Los impulsos se transmiten a la etapa de potencia del accionamiento a través de salidas
digitales de asignación fija.
En CPUs con salidas de relé la señal de impulso no puede emitirse en ellas, ya que los relés
no soportan las frecuencias de conmutación necesarias. Para poder utilizar el PTO en esas
CPUs (Pulse Train Output), es necesario utilizar una Signal Board con salidas digitales.
Nota
El PTO requiere la funcionalidad de un contador rápido (HSC). Para ello se utiliza un HSC
interno cuyo estado de contador no se puede evaluar.

Selección del generador de impulsos
En la lista desplegable elija el PTO (Pulse Train Output) a través del cual deben proporcionarse
los impulsos para controlar los motores paso a paso o los servomotores con la interfaz de
impulsos. Si en la configuración de dispositivos no se han utilizado los generadores de impulso
ni los contadores rápidos para otro fin, la interfaz por hardware podrá configurarse
automáticamente. En este caso, el PTO elegido aparece marcado en blanco en la lista
desplegable.

Botón "Configuración de dispositivos"
Este botón permite acceder a la parametrización de las opciones de impulso en la
configuración de dispositivos de la CPU.

2568

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Tipo de señal
Seleccione el tipo de señal deseado en la lista desplegable. Están disponibles los tipos de
señal siguientes:
● PTO (Impulso A y sentido B)
Para controlar el motor paso a paso se utilizan una salida de impulso y una salida de sentido.
● PTO (Contaje ascendente A, contaje descendente B)
Para controlar el motor paso a paso se utilizan una salida de impulso para el movimiento en
sentido positivo y otra para el movimiento en sentido negativo.
● PTO (A/B desfasada)
Los ciclos de las dos salidas de impulsos para la fase A y para la fase B tienen la misma
frecuencia.
En el lado del accionamiento se evalúa el periodo de las salidas de impulso como paso.
El desfase entre las fases A y B determina el sentido de movimiento.
● PTO (A/B desfasado - cuádruple)
Las salidas de impulsos para la fase A y para la fase B tienen la misma frecuencia.
En el lado del accionamiento se evalúan todos los flancos ascendentes y descendentes de
la fase A y de la fase B como pasos.
El desfase entre las fases A y B determina el sentido de movimiento.

Salida de impulso (tipo de señal "PTO (Impulso A y sentido B)")
En este campo seleccione la salida deseada como salida de impulsos.
Puede elegirse la salida a través de una dirección simbólica o asignarse a una dirección
absoluta.

Activar salida de sentido (tipo de señal "PTO (Impulso A y sentido B)")
En el modo "pulse and direction" puede desactivar o activar la salida de sentido. Con esta
opción puede limitar el sentido de movimiento y utilizar la salida de sentido para otros fines.

Salida de sentido (tipo de señal "PTO (Impulso A y sentido B)")
En este campo seleccione la salida deseada como salida de sentido.
Puede elegirse la salida a través de una dirección simbólica o asignarse a una dirección
absoluta.

Salida de impulso ascendente (tipo de señal "PTO (Contaje ascendente A, contaje descendente B)")
En este campo seleccione la salida de impulso deseada para movimientos en sentido positivo.
Puede elegirse la salida a través de una dirección simbólica o asignarse a una dirección
absoluta.

Salida de impulso descendente (tipo de señal "PTO (Contaje ascendente A, contaje descendente B)")
En este campo seleccione la salida de impulso deseada para movimientos en sentido negativo.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2569

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Puede elegirse la salida a través de una dirección simbólica o asignarse a una dirección
absoluta.

Fase A (tipos de señal "PTO (A/B desfasado)" y "PTO (A/B desfasado - cuádruple)")
En este campo seleccione la salida de impulso deseada para las señales de fase A.
Puede elegirse la salida a través de una dirección simbólica o asignarse a una dirección
absoluta.

Fase B (tipos de señal "PTO (A/B desfasado)" y "PTO (A/B desfasado - cuádruple)")
En este campo seleccione la salida de impulso deseada para las señales de fase B.
Puede elegirse la salida a través de una dirección simbólica o asignarse a una dirección
absoluta.

Unidad personalizada
En la lista desplegable, seleccione la unidad deseada para el sistema de medida del eje. La
unidad seleccionada se utiliza para una nueva configuración del objeto tecnológico Eje de
posicionamiento y la visualización de los datos actuales del eje.
Los valores en los parámetros de entrada (Position, Distance, Velocity, ...) de las instrucciones
de Motion Control también se refieren a esta unidad.
Nota
En determinadas circunstancias, un cambio posterior del sistema de medida no podrá
convertirse correctamente en todas las ventanas de configuración del objeto tecnológico. En
ese caso, compruebe la configuración de todos los parámetros del eje.
Si fuera necesario, en el programa de usuario se deberán adaptar los valores de los
parámetros de entrada de las instrucciones de Motion Control a la nueva unidad de medida.

Configuración - Señales de accionamiento (objeto tecnológico Eje de posicionamiento V4)
En la ventana de configuración "Señal de accionamiento" configure la salida para la
habilitación del accionamiento y la entrada para la realimentación "Accionamiento listo" del
accionamiento.
La habilitación del accionamiento es controlada por la instrucción de Motion Control
"MC_Power" y otorga al accionamiento la habilitación de potencia. La señal se pone a
disposición del accionamiento a través de la salida que se va a configurar.
Si el accionamiento está listo para ejecutar movimientos una vez recibida la habilitación del
accionamiento, lo notificará a la CPU con la señal "Accionamiento listo". La señal
"Accionamiento listo" se reenvía a la CPU a través de la entrada que se va a configurar.
Si el accionamiento no dispone de ninguna interfaz de este tipo, no se deberán configurar los
parámetros. En este caso, elija para la entrada de disponibilidad el valor TRUE.

2570

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Consulte también
Configuración - Mecánica (objeto tecnológico Eje de posicionamiento V4) (Página 2571)
Límites de posición (Página 2371)
Dinámica (Página 2377)
Referenciar (a partir del objeto tecnológico Eje de posicionamiento V2) (Página 2385)

Configuración - Mecánica (objeto tecnológico Eje de posicionamiento V4)
Configure las propiedades mecánicas del accionamiento en la ventana de configuración
"Mecánica".

Impulsos por vuelta del motor
En este campo, configure cuántos impulsos necesita el motor para una vuelta del motor.
Límites (independientes de la unidad de medida seleccionada):
● 0 < impulsos por vuelta del motor ≤ 2147483647

Recorrido por vuelta del motor
En este campo, configure qué distancia debe recorrer la mecánica de la instalación por cada
vuelta del motor.
Límites (independientes de la unidad de medida seleccionada):
● 0.0 < recorrido por vuelta del motor: ≤ 1.0e12

Sentido de giro permitido (versión de la tecnología V4 o superior)
En este campo configure si la mecánica de su instalación debe moverse en ambos sentidos o
solo en sentido positivo o negativo.
Si no ha activado la salida de sentido en el modo "PTO (Impulso A y sentido B)" del generador
de impulsos, la selección está limitada al sentido positivo o negativo.

Invertir sentido de dirección
Con la casilla de verificación "Invertir sentido" puede adaptar el controlador a la lógica de
sentido del accionamiento.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2571

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
La lógica de sentido se invierte de acuerdo con el modo seleccionado para el generador de
impulsos:
● PTO (Impulso A y sentido B)
– 0 V en la salida de sentido ⇒ sentido de giro positivo
– 5 V/24 V en la salida de sentido ⇒ sentido de giro negativo
La tensión indicada depende del hardware empleado. Los valores mencionados no son
válidos para las salidas diferenciales de la CPU 1217.
● PTO (Contaje ascendente A, contaje descendente B)
Las salidas "Salida de impulso descendente" y "Salida de impulso ascendente" se
intercambian.
● PTO (A/B desfasado)
Las salidas "Fase A" y "Fase B" se intercambian.
● "PTO (A/B desfasado - cuádruple)"
Las salidas "Fase A" y "Fase B" se intercambian.

Consulte también
Configuración - Señales de accionamiento (objeto tecnológico Eje de posicionamiento V4)
(Página 2570)
Relación entre el tipo de señal y el sentido de desplazamiento (Página 2310)
Límites de posición (Página 2371)
Dinámica (Página 2377)
Referenciar (a partir del objeto tecnológico Eje de posicionamiento V2) (Página 2385)

Configuración - Referenciado - Pasivo (objeto tecnológico Eje de posicionamiento V4)
En la ventana de configuración "Referenciar - Pasiva", configure los parámetros que se
necesitan para la referenciación pasiva.
En la referenciación pasiva, el movimiento debe ser activado por parte del usuario (p. ej.,
mediante una petición de desplazamiento del eje). La referenciación pasiva se inicia a través
de la instrucción de Motion Control "MC_Home" con el parámetro de entrada utilizado
"Mode" = 2.

2572

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Entrada del sensor del punto de referencia
Seleccione la entrada digital para el sensor del punto de referencia en la lista desplegable. La
entrada debe ser apta para alarmas. Como entradas para el sensor del punto de referencia
están disponibles las entradas de CPU On-board y las entradas de una Signal Board insertada.
Nota
Las entradas digitales están ajustadas de forma estándar con un tiempo de filtrado de 6,4 ms.
La utilización como sensor del punto de referencia puede provocar deceleraciones no
deseadas y, con ello, imprecisiones. En determinadas circunstancias, y dependiendo de la
velocidad de referenciación y la dimensión del sensor del punto de referencia, puede que no
se reconozca el punto de referencia. El tiempo de filtración se puede ajustar en la configuración
de dispositivos de las entradas digitales, en "Filtros de entrada".
Se debe seleccionar un tiempo de filtración menor que la duración de la señal de entrada en
el sensor del punto de referencia.

Selección de nivel
Seleccione en la lista despegable el nivel del sensor del punto de referencia con el que se debe
referenciar.

Lado del sensor del punto de referencia
Indique aquí si el eje debe ser referenciado por el lado inferior o superior al sensor del punto
de referencia.

Posición del punto de referencia
Como posición del punto de referencia se utiliza la posición parametrizada en la instrucción de
Motion Control "MC_Home".
Nota
Si la referenciación pasiva se efectúa sin una petición de desplazamiento del eje (eje en
reposo), la referenciación se lleva a cabo en el siguiente flanco ascendente o descendente del
sensor del punto de referencia.

Configuración - Referenciado - Activo (objeto tecnológico Eje de posicionamiento V4)
En la ventana de configuración "Referencido - Activo", configure los parámetros que se
necesitan para el referenciado activo. El referenciado activo se inicia a través de la instrucción
de Motion Control "MC_Home" con el parámetro de entrada utilizado "Mode" = 3.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2573

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Entrada del sensor del punto de referencia
Seleccione la entrada digital para el sensor del punto de referencia en la lista desplegable. La
entrada debe ser apta para alarmas. Como entradas para el sensor del punto de referencia
están disponibles las entradas de CPU On-board y las entradas de una Signal Board insertada.
Nota
Las entradas digitales están ajustadas de forma estándar a un tiempo de filtración de 6,4 ms.
La utilización como sensor del punto de referencia puede provocar deceleraciones no
deseadas y, con ello, imprecisiones. En determinadas circunstancias, y dependiendo de la
velocidad de referenciado y la dimensión del sensor del punto de referencia, puede que no se
reconozca el punto de referencia. El tiempo de filtración se puede ajustar en la configuración
de dispositivos de las entradas digitales, en "Filtros de entrada".
Se debe seleccionar un tiempo de filtración menor que la duración de la señal de entrada en
el sensor del punto de referencia.

Selección de nivel
Seleccione en la lista desplegable el nivel del sensor del punto de referencia con el que se debe
referenciar.

Permitir inversión de sentido en el final de carrera por hardware
Active esta casilla de verificación si desea utilizar los finales de carrera por hardware como
levas de inversión para la aproximación al punto de referencia. Los finales de carrera por
hardware deben estar activados para poder realizar la inversión del sentido (al menos debe
estar configurado el final de carrera por hardware en el sentido de aproximación).
Si se llega al final de carrera por hardware durante el referenciado activo, el eje frena con la
deceleración configurada (no con la deceleración de parada de emergencia) y realiza una
inversión del sentido. Entonces el sensor del punto de referencia se busca en la dirección
contraria.
Si esta inversión del sentido no está activada y el eje alcanza el final de carrera por hardware
durante el referenciado activo, la aproximación al punto de referencia se cancela con un error
y el eje se frena con la deceleración de parada de emergencia.
Nota
Dentro de lo posible, asegúrese de que la máquina no golpee contra un tope mecánico durante
una inversión del sentido, adoptando para ello una de las siguientes medidas:
● Mantenga una velocidad de aproximación reducida.
● Aumente la aceleración / deceleración configuradas.
● Aumente la distancia entre el final de carrera por hardware y el tope mecánico.

2574

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Sentido de aproximación / referenciado
Con el sentido seleccionado, determine el sentido de aproximación durante el referenciado
activo a fin de buscar el sensor del punto de referencia, así como el sentido de referenciado.
El sentido de referenciado determina el sentido con el cual el eje se aproxima al lado del sensor
del punto de referencia configurado para realizar la operación de referenciado.

Lado del sensor del punto de referencia
Indique aquí si el eje debe ser referenciado por el lado inferior o superior al sensor del punto
de referencia.

Velocidad de aproximación
Especifique en este campo la velocidad con la que se buscará el sensor del punto de referencia
durante la marcha correspondiente.
Límites (independientes de la unidad de medida seleccionada):
● Velocidad de arranque/parada ≤ velocidad de aproximación ≤ velocidad máxima

Velocidad de referenciado
Especifique en este campo la velocidad con la que debe realizarse el posicionamiento hacia el
sensor del punto de referencia para el referenciado.
Límites (independientes de la unidad de medida seleccionada):
● Velocidad de arranque/parada ≤ velocidad de referenciado ≤ velocidad máxima

Offset del punto de referencia
En este campo se puede indicar el offset del punto de referencia si la posición de referencia
deseada difiere de la posición del sensor del punto de referencia.
Si el valor es diferente de 0, el eje ejecuta las siguientes acciones después del referenciado
usando el sensor del punto de referencia:
1. Movimiento del eje a la velocidad de referenciado por el valor del offset del punto de
referencia
2. Después de extraer el offset del punto de referencia, el eje se encuentra en la posición del
punto de referencia que se ha indicado en el parámetro de entrada "Position" de la
instrucción de Motion Control "MC_Home".
Límites (independientes de la unidad de medida seleccionada):
● -1.0e12 ≤ offset del punto de referencia: ≤ 1.0e12

Posición del punto de referencia
Como posición del punto de referencia se utiliza la posición parametrizada en la instrucción de
Motion Control "MC_Home".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2575

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Bits de diagnóstico, estado y error (objeto tecnológico "Eje" V1...3)
Con la función de diagnóstico "Bits de estado y error" se vigilan en el TIA Portal los principales
mensajes de estado y error del eje. Cuando el eje está activado, la indicación de la función de
diagnóstico está disponible en el modo online, en los modos de operación "Control manual" y
"Modo automático". Los avisos de estado y error mostrados tienen el siguiente significado:

Estado del eje
Estado

Descripción

Habilitado

El eje está habilitado y listo para ser controlado mediante órdenes de Motion Control.
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.Enable)

Referenciado

El eje está referenciado y puede ejecutar órdenes de posicionamiento absoluto de la instrucción de
Motion Control "MC_MoveAbsolute". Para realizar un posicionamiento relativo no es necesario que
el eje esté referenciado. Casos especiales:
● Durante la referenciación activa el estado es FALSE.
● Si se referencia un eje de forma pasiva, el estado durante la referenciación pasiva es TRUE.
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.HomingDone)

Error en eje

Se ha producido un error en el objeto tecnológico "Eje". En el modo automático, la información
detallada sobre el error se puede consultar en los parámetros ErrorID y ErrorInfo de las instrucciones
de Motion Control. En el modo manual, la causa detallada del error se muestra en el campo "Aviso de
error" del panel de mando del eje.
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.Error)

Panel de mando del
eje activo

Se ha activado el modo de operación "Control manual" en el panel de mando del eje. El panel de
mando asume la autoridad sobre el control del objeto tecnológico "Eje". El eje no puede ser controlado
por el programa de usuario.
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.ControlPanelActive)

Restart necesario

Se ha cargado en la memoria de carga una configuración modificada del eje en el estado operativo
RUN de la CPU. Para cargar la configuración modificada en la memoria de trabajo, es necesario
reiniciar el eje. Utilice para ello la instrucción de Motion Control MC_Reset.

Estado del accionamiento
Estado

Descripción

Listo

El accionamiento está listo.
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.DriveReady)

Error en acciona‐
miento

El accionamiento ha indicado un error debido a un fallo en su señal de disponibilidad.
(Variable del objeto tecnológico: <Nombre del eje>.ErrorBits.DriveFault)

Estado del movimiento del eje
Estado

Descripción

Parada

El eje está parado.
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.StandStill)

Aceleración

El eje está acelerando.
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.Acceleration)

2576

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Estado

Descripción

Velocidad constante

El eje se mueve a una velocidad constante.
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.ConstantVelocity)

Deceleración

El eje está decelerando (frenando).
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.Deceleration)

Estado del tipo de movimiento
Estado

Descripción

Posicionamiento

El eje ejecuta una orden de posicionamiento de la instrucción de Motion Control "MC_Mo‐
veAbsolute", "MC_MoveRelative" o del panel de mando del eje.
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.PositioningCommand)

Desplazar a la velocidad espe‐ El eje ejecuta una orden a la velocidad especificada en la instrucción de Motion Control
cificada
"MC_MoveVelocity", "MC_MoveJog" o en el panel de mando del eje.
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.SpeedCommand)
Referenciación

El eje ejecuta una orden de referenciación de la instrucción de Motion Control "MC_Home"
o del panel de mando del eje.
(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.Homing)

Tabla de órdenes activa

El eje se controla con la instrucción de Motion Control "MC_CommandTable".

(a partir del TO Eje V2.0)

(Variable del objeto tecnológico: <Nombre del eje>.StatusBits.CommandTableActive)

Avisos de error
Error

Descripción

Final de carrera por SW infe‐
rior alcanzado

Se ha alcanzado el final de carrera por software inferior.

Final de carrera por SW infe‐
rior rebasado

Se ha rebasado por defecto el final de carrera por software inferior.

Final de carrera por SW supe‐
rior alcanzado

Se ha alcanzado el final de carrera por software superior.

Final de carrera por SW supe‐
rior rebasado

Se ha rebasado el final de carrera por software superior.

Final de carrera por HW infe‐
rior aproximado

Se ha aproximado el final de carrera por hardware inferior.

(Variable del objeto tecnológico: <Nombre del eje>.ErrorBits.SwLimitMinReached)
(Variable del objeto tecnológico: <Nombre del eje>.ErrorBits.SwLimitMinExceeded)
(Variable del objeto tecnológico: <Nombre del eje>.ErrorBits.SwLimitMaxReached)
(Variable del objeto tecnológico: <Nombre del eje>.ErrorBits.SwLimitMaxExceeded)
(Variable del objeto tecnológico: <Nombre del eje>.ErrorBits.HwLimitMin)

Final de carrera por HW supe‐ Se ha aproximado el final de carrera por hardware superior.
rior aproximado
(Variable del objeto tecnológico: <Nombre del eje>.ErrorBits.HwLimitMax)
PTO y HSC ya se utilizan

Un segundo eje utiliza el mismo PTO (Pulse Train Output) y HSC (High Speed Counter) y
se encuentra habilitado con "MC_Power".
(Variable del objeto tecnológico: <Nombre del eje>.ErrorBits.HwUsed)

Error de configuración

El objeto tecnológico "eje" ha sido configurado incorrectamente o se han modificado inco‐
rrectamente datos de configuración modificables durante el tiempo de ejecución del pro‐
grama de usuario.
(Variable del objeto tecnológico: <Nombre del eje>.ErrorBits.ConfigFault)

Error interno

Se ha producido un error interno.
(Variable del objeto tecnológico: <Nombre del eje>.ErrorBits.SystemFault)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2577

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Consulte también
Bits de estado y error (objetos tecnológicos a partir de V4) (Página 2467)

ErrorID y ErrorInfos
Lista de los ErrorID y las ErrorInfos (objetos tecnológicos V4...5)
Las siguientes tablas recogen una relación de todos los ErrorID y ErrorInfos que pueden ser
mostrados en las instrucciones de Motion Control. Junto a la causa del error se muestran
también ayudas para eliminar los errores.
En caso de errores de funcionamiento con parada del eje, este se detendrá en función de la
reacción a error. Reacciones a error posibles:
● Retirar habilitación
Se emite la consigna 0 y se retira la habilitación. En función de la configuración, el eje se
frena en el accionamiento y se para.
● Parada con rampa de parada de emergencia
Los comandos de movimiento en curso se cancelan. El eje se frena sin limitación de tirones
y se para mediante la deceleración de parada de emergencia configurada en "Objeto
tecnológico > Parámetros avanzados > Dinámica > Parada de emergencia".

Error de funcionamiento con parada del eje
ErrorID
16#8000

ErrorIn‐ Descripción
fo

-

Confirmar el error con la instrucción
"MC_Reset"; proporcionar la señal del ac‐
cionamiento; eventualmente iniciar de
nuevo la orden

Final de carrera por SW inferior activado
16#000 Se ha alcanzado la posición del final de
E
carrera por software inferior con la de‐
celeración actual configurada
16#000 Se ha alcanzado la posición del final de
F
carrera por software inferior con la de‐
celeración de parada de emergencia
16#001 Se ha rebasado la posición del final de
0
carrera por software inferior con la de‐
celeración de parada de emergencia

2578

Reacción a error

Error de accionamiento, fallo de "Accionamiento listo"
16#000 1

16#8001

Solución

Confirmar el error con la instrucción
"MC_Reset"; abandonar el final de carrera
por software con una orden de desplaza‐
miento en sentido positivo

Retirar habilitación

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorIn‐ Descripción
fo

16#8002

Solución

Final de carrera por SW superior activado

Reacción a error
-

16#000 Se ha alcanzado la posición del final de Confirmar el error con la instrucción
E
carrera por software superior con la de‐ "MC_Reset"; abandonar el final de carrera
celeración actual configurada
por software con una orden de desplaza‐
16#000 Se ha alcanzado la posición del final de miento en sentido negativo
F

carrera por software superior con la de‐
celeración de parada de emergencia

Retirar habilitación

16#001 Se ha rebasado la posición del final de
0
carrera por software superior con la de‐
celeración de parada de emergencia
16#8003

Final de carrera por HW inferior alcanzado
16#000 El final de carrera por hardware inferior
E
ha sido alcanzado. Se ha frenado el eje
con la deceleración de parada de emer‐
gencia.

Confirmar el error con el eje habilitado con
la instrucción "MC_Reset"; abandonar el
final de carrera por hardware con una or‐
den de marcha en sentido positivo.

(No se ha encontrado el sensor del
punto de referencia durante una bús‐
queda activa del mismo)

Si el accionamien‐
to se conecta a tra‐
vés de PTO (Pulse
Train Output):
Parada con rampa
de parada de
emergencia
Si el accionamien‐
to se conecta a tra‐
vés de PROFIdri‐
ve / salida analógi‐
ca:
Retirar habilitación

16#8004

Final de carrera por HW superior alcanzado
16#000 El final de carrera por hardware supe‐
E
rior ha sido alcanzado. Se ha frenado el
eje con la deceleración de parada de
emergencia.

Confirmar el error con el eje habilitado con
la instrucción "MC_Reset"; abandonar el
final de carrera por hardware con una or‐
den de marcha en sentido negativo.

(No se ha encontrado el sensor del
punto de referencia durante una bús‐
queda activa del mismo)

Si el accionamien‐
to se conecta a tra‐
vés de PTO (Pulse
Train Output):
Parada con rampa
de parada de
emergencia
Si el accionamien‐
to se conecta a tra‐
vés de PROFIdri‐
ve / salida analógi‐
ca:
Retirar habilitación

16#8005

PTO y HSC ya están siendo utilizados por otro eje
16#000 1

-

El eje ha sido configurado de forma inco‐
rrecta:
Corregir la configuración del PTO (Pulse
Train Output) / HSC (High Speed Counter)
y cargarla en el controlador
Varios ejes deben trabajar con un PTO:
Otro eje utiliza el PTO / HSC. Si el eje ac‐
tual debe asumir el control, se debe blo‐
quear el otro eje con "MC_Power" Ena‐
ble = FALSE.
(Ver también Utilizando varios ejes con el
mismo PTO (Página 2473))

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2579

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID
16#8006

ErrorIn‐ Descripción
fo

Reacción a error

Se ha producido un error de comunicación en el panel de mando del eje
16#001 Se ha producido un error de timeout.
2

16#8007

Solución

Revise la conexión del cable y vuelva a
hacer clic en el botón "Control manual".

Imposible habilitar el eje
16#002 Ejecutando restart.
5

Retirar habilitación

Espere hasta que haya concluido el res‐
tart del eje.

16#002 Ejecutando carga en el estado operati‐ Espere hasta que haya concluido la ope‐
6
vo RUN
ración de carga.
16#8008

16#8009

Sentido de movimiento no permitido

-

16#002 El sentido de movimiento seleccionado
E
no está permitido.

● Cambie el sentido de movimiento y
reinicie la orden.

16#002 No es posible un movimiento invertido
F
con el sentido seleccionado.

● Adapte el sentido de giro permitido en
la configuración del objeto tecnológico
en "Parámetros avanzados >
Mecánica". Reinicie la orden.

No se ha encontrado sensor de referencia/marca cero del encóder
16#003 Error de configuración, hardware o
3
montaje del encóder o del sensor del
punto de referencia.

● Conecte un dispositivo adecuado.
● Compruebe el dispositivo
(conexiones).

Parada con rampa
de parada de
emergencia

● Compare la configuración de HW
Config y del objeto tecnológico.
16#800A

Aviso de avería del encóder
16#000 1

Retirar habilitación
Compruebe el dispositivo en cuanto a fun‐
cionamiento, enlaces y conexiones.

16#003 Error de hardware en el encóder
4
16#003 Encóder sucio
5
16#003 Error al leer el valor absoluto del encó‐ Compare el tipo de encóder en el paráme‐
6
der
tro del accionamiento o del encóder P979
con los datos de configuración del objeto
tecnológico.
16#003 Vigilancia de marca cero del encóder
7

El encóder notifica error en la vigilancia de
marca cero (código de fallo 0x0002 en
Gx_XIST2, ver perfil PROFIdrive).
Compruebe la compatibilidad electromag‐
nética (CEM) de la instalación.

16#003 Encóder en estado "Estacionar"
8

● Busque la causa del error en el
accionamiento o el encóder
conectado.
● Compruebe si el mensaje de error se
ha producido a consecuencia de una
operación de puesta en marcha en el
accionamiento o en el encóder.

16#004 PROFIdrive: fallo del encóder en el bus
0
(estación averiada)

2580

Compruebe el dispositivo en cuanto a fun‐
cionamiento, enlaces y conexiones.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorIn‐ Descripción
fo

16#800B

Solución

Rebase por exceso del rango de la posición

Reacción a error
Retirar habilitación

16#003 Rebase por exceso del rango en senti‐ Referencie el eje en un rango de valores
9
do positivo
reales válido.
16#003 Rebase por exceso del rango en senti‐
A
do negativo
16#003 La modificación de la posición real es Adapte la longitud de módulo al encóder
B
mayor en un reloj de ciclo de la regula‐ utilizado.
ción de posición que la longitud de mó‐
dulo.
16#800C

Aviso de avería del accionamiento
16#000 1

Retirar habilitación
Compruebe el dispositivo en cuanto a fun‐
cionamiento, enlaces y conexiones.

16#003 PROFIdrive: fallo de la señal de accio‐ Seleccione una ganancia más pequeña
(Kv) en el cuadro de diálogo "Optimiza‐
C
namiento "Mando solicitado"
16#003 Conexión de accionamiento PROFIdri‐ ción".
D

ve/analógica: el accionamiento se ha
desconectado

16#003 PROFIdrive: fallo del accionamiento en
E
el bus (estación averiada)
16#800D

Se ha rebasado por exceso el error de seguimiento admisible
16#000 1

Retirar habilitación

● Revise la configuración del lazo de
regulación.
● Compruebe el sentido del encóder.
● Compruebe la configuración de la
vigilancia de errores de seguimiento.

16#800E

Error en final de carrera por HW

Retirar habilitación

16#004 Sentido de retirada no permitido con fi‐ El sentido de movimiento programado se
2
nal de carrera por HW activo
ha bloqueado debido al final de carrera
por HW activo.
Retire el eje en el sentido opuesto.
16#004 Final de carrera por HW con los polos
3
invertidos, retirada imposible

Compruebe la construcción mecánica de
los finales de carrera por HW.

16#004 Los dos finales de carrera por HW es‐
4
tán activos, retirada imposible

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2581

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID
16#800F

ErrorIn‐ Descripción
fo

Solución

Reacción a error

Error en zona de destino
16#004 Zona de destino no alcanzada
5

Retirar habilitación
La zona de destino no se ha alcanzado
dentro del tiempo de tolerancia de posicio‐
namiento.
● Revise la configuración de la vigilancia
de posicionamiento.
● Revise la configuración del lazo de
regulación.

16#004 Nuevo abandono de la zona de destino Se ha abandonado la zona de destino
6
dentro del tiempo de permanencia mínimo.
● Revise la configuración de la vigilancia
de posicionamiento.
● Revise la configuración del lazo de
regulación.
16#8010

La posición del final de carrera por SW inferior es mayor que la posición del final de
carrera por SW superior si el eje no es un eje de valor módulo
16#000 1

Retirar habilitación

Cambie la posición de los finales de carre‐
ra por SW.

Error de funcionamiento sin parada del eje
ErrorID

ErrorInfo

16#8200

Descripción

Solución

El eje no está habilitado
16#0001

16#8201

-

Habilitar el eje; reiniciar la orden

El eje ya ha sido habilitado por otra instancia de "MC_Power"
16#0001

16#8202

-

Habilitar el eje sólo con una instancia "MC_Power"

Rebasado el número máximo de órdenes activas de Motion Control (máx. 200 órdenes para conexión
del accionamiento mediante PTO (Pulse Train Output), máx. 100 órdenes para conexión del accio‐
namiento a través de PROFIdrive / salida analógica)
16#0001

-

Reducir el número de órdenes activas simultánea‐
mente; volver a iniciar la orden
En el parámetro "Busy" = TRUE de la instrucción de
Motion Control se reconoce una orden activa.

16#8203

El eje está funcionando en este momento en "Control manual" (panel de mando)
16#0001

16#8204

16#8205

-

Referenciar el eje con la instrucción "MC_Home";
reiniciar la orden

El eje está siendo controlado por el programa de usuario (el error sólo se muestra en el panel de
mando del eje)
16#0013

2582

Finalizar el "Control manual"; reiniciar la orden

El eje no está referenciado
16#0001

16#8206

-

El eje está habilitado en el programa de usuario. Bloquear eje con la instrucción "MC_Power" y se‐
leccionar nuevamente "Control manual" en el panel
de mando del eje.
Objeto tecnológico pendiente de activación

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#0001

-

Active el eje con la instrucción "MC_Power" Ena‐
ble = TRUE o habilite el eje en el panel de mando
del eje.

16#8207

Orden rechazada
16#0016

Referenciado activo en curso; no es posible ini‐ Espere a que el referenciado activo finalice o inte‐
ciar otro tipo de referenciado.
rrumpa el referenciado activo con una orden de
movimiento, p. ej., "MC_Halt".

16#0018

Mientras el eje se está referenciando de forma
directa o pasiva, no se puede desplazar con
una tabla de órdenes.

Espere a que el referenciado directo o pasivo ter‐
mine.

16#0019

Durante el procesamiento de una tabla de ór‐
denes, el eje no se puede referenciar de forma
directa o pasiva.

Espere a que finalice la tabla de órdenes o cancele
dicha tabla con una orden de movimiento p. ej.
"MC_Halt".

16#0052

La posición indicada supera el límite de valor
numérico.

Indique un valor de posición válido en la instrucción
de Motion Control.

16#0053

El eje se encuentra en arranque.

Espere hasta que el eje esté operativo.

16#0054

Valor real no válido

Para ejecutar una orden "MC_Home", los valores
reales deben ser válidos.
Revise el estado de los valores reales. La variable
del objeto tecnológico <Nombre de eje>.StatusSen‐
sor.State debe tener el valor 2 (válido).

16#8208

La diferencia entre la velocidad máxima y la velocidad de arranque/parada no es válida
16#0002
16#000A

16#8209

El valor no tiene un formato numérico válido

Corregir el valor; reiniciar la orden

El valor es menor o igual que cero.
El valor de aceleración del TO "Eje" no es válido

16#0002
16#000A
16#820A

El valor no tiene un formato numérico válido

Corregir el valor; reiniciar la orden

El valor es menor o igual que cero.
No es posible el restart del eje

16#0013

El eje está habilitado en el programa de usuario. Bloquear eje con la instrucción "MC_Power"; eje‐
cutar Restart nuevamente

16#0027

El eje está funcionando en este momento en
"Control manual" (panel de mando)

Finalizar el "Control manual"; repetir Restart

16#002C

El eje no está bloqueado.

Bloquear el eje; reiniciar la orden

16#0047

El objeto tecnológico no está listo para Restart. Vuelva a cargar el proyecto.

16#0048

No se cumple la condición para reiniciar el ob‐
jeto tecnológico.

16#820B

Bloquee el objeto tecnológico.

Imposible ejecutar la tabla de órdenes
16#0026

16#820C

Ejecutando carga en el estado operativo RUN

Espere hasta que haya concluido la operación de
carga.

No hay configuración disponible
16#0001

-

Error interno
Llame al teléfono de atención al cliente.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2583

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Error de parámetros de bloque
ErrorID

ErrorInfo

16#8400

Descripción

Solución

El valor del parámetro "Position" de la instrucción de Motion Control no es válido
16#0002

El valor no tiene un formato numérico válido

16#0005

El valor se encuentra fuera del rango numérico
(mayor que 1E+12)

16#0006

El valor se encuentra fuera del rango numérico
(menor que -1E+12)

16#8401

Corregir el valor; reiniciar la orden

El valor del parámetro "Distance" de la instrucción de Motion Control no es válido
16#0002

El valor no tiene un formato numérico válido

16#0005

El valor se encuentra fuera del rango numérico
(mayor que 1E+12)

16#0006

El valor se encuentra fuera del rango numérico
(menor que -1E+12)

16#8402

Corregir el valor; reiniciar la orden

El valor del parámetro "Velocity" de la instrucción de Motion Control no es válido
16#0002

El valor no tiene un formato numérico válido

16#0008

El valor es mayor que la velocidad máxima con‐
figurada

16#0009

El valor es inferior a la velocidad de arranque/
parada configurada

16#0024
16#8403

Corregir el valor; reiniciar la orden

El valor es menor que 0
El valor del parámetro "Direction" de la instrucción de Motion Control no es válido

16#0011
16#8404

El valor de selección no es válido

Corregir el valor de selección; reiniciar la orden

El valor del parámetro "Mode" de la instrucción de Motion Control no es válido
16#0011

El valor de selección no es válido

Corregir el valor de selección; reiniciar la orden

16#0015

Referenciado activo / pasivo no configurada

Corregir la configuración y cargar en el controlador;
habilitar el eje y reiniciar la orden

16#0017

La inversión del sentido en el final de carrera
por hardware está activada aunque los finales
de carrera por hardware están desactivados.

● Activar los finales de carrera por hardware
mediante la variable <Nombre de
eje>.PositionLimitsHW.Active = TRUE, reiniciar
orden
● Corregir la configuración y cargar en el
controlador; habilitar el eje y reiniciar la orden

16#0055

Modo no válido en el encóder incremental

Inicie un proceso de referenciado para un encóder
incremental con el parámetro "Mode" = 0, 1, 2, 3.

16#0056

Modo no válido en el encóder absoluto

Con un encóder absoluto no es posible un referen‐
ciado pasivo ni activa ("Mode" = 2, 3).
Inicie un proceso de referenciado para un encóder
absoluto con el parámetro "Mode" = 0, 1.

16#8405

El valor del parámetro "StopMode" de la instrucción de Motion Control no es válido
16#0011

16#8406

2584

Corregir el valor de selección; habilitar nuevamente
el eje

Pulsación simultánea de avance y retroceso no permitida
16#0001

16#8407

El valor de selección no es válido

-

Evite la simultaneidad del estado de señal TRUE
de los parámetros "JogForward" y "JogBackward";
inicie nuevamente la orden.

Cambio del eje en la instrucción "MC_Power" permitido únicamente con eje bloqueado.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#0001

-

Bloquear eje activo; a continuación se puede cam‐
biar y habilitar el eje.

16#8408

El valor del parámetro "Axis" de la instrucción de Motion Control no es válido
16#001A

El valor indicado no se corresponde con la ver‐ Corregir el valor; reiniciar la orden
sión exigida del TO

16#001B

El valor indicado no se corresponde con el tipo
exigido del TO

16#001C

El valor indicado no es un bloque de datos tec‐
nológicos de Motion Control

16#8409

El valor del parámetro "CommandTable" de la instrucción de Motion Control no es válido
16#001A

El valor indicado no se corresponde con la ver‐ Corregir el valor; reiniciar la orden
sión exigida del TO

16#001B

El valor indicado no se corresponde con el tipo
exigido del TO

16#001C

El valor indicado no es un bloque de datos tec‐
nológicos de Motion Control

16#840A

El valor del parámetro "StartStep" de la instrucción de Motion Control no es válido
16#000A

El valor es menor o igual que cero.

16#001D

El paso de inicio es mayor que el paso final

16#001E
16#840B

El valor es superior a 32
El valor del parámetro "EndStep" de la instrucción de Motion Control no es válido

16#000A

El valor es menor o igual que cero.

16#001E

El valor es superior a 32

16#840C

Corregir el valor; reiniciar la orden

El valor del parámetro "RampUpTime" de la instrucción de Motion Control no es válido
16#0002

El valor no tiene un formato numérico válido

16#0005

El valor se encuentra fuera del rango numérico
(mayor que 1.0E12)

16#000A
16#840D

Corregir el valor; reiniciar la orden

El valor es menor o igual que cero.
El valor del parámetro "RampDownTime" de la instrucción de Motion Control no es válido

16#0002

El valor no tiene un formato numérico válido

16#000A

El valor es menor o igual que cero.

16#840E

Corregir el valor; reiniciar la orden

El valor del parámetro "EmergencyRampTime" de la instrucción de Motion Control no es válido
16#0002

El valor no tiene un formato numérico válido

16#000A

El valor es menor o igual que cero.

16#840F

Corregir el valor; reiniciar la orden

El valor del parámetro "JerkTime" de la instrucción de Motion Control no es válido
16#0002
16#000A

16#8410

Corregir el valor; reiniciar la orden

El valor no tiene un formato numérico válido

Corregir el valor; reiniciar la orden

El valor es menor o igual que cero.
El valor del parámetro "Parameter" de la instrucción de Motion Control no es válido

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2585

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#0002

El valor no tiene un formato numérico válido

Corregir el valor; reiniciar la orden

16#000B

La dirección no es válida

Cargar la configuración sin errores en el controla‐
dor; volver a habilitar el eje con la instrucción
"MC_Power"

16#0028

El tipo de datos del puntero VARIANT "Pará‐
metro" y "Valor" no son compatibles.

Utilizar el tipo de datos apropiado; reiniciar la orden

16#0029

El puntero VARIANT "Parámetro" no señala un
bloque de datos del objeto tecnológico.

Corregir el puntero VARIANT; reiniciar la orden

16#002A

No se puede leer el valor del puntero VARIANT
"Parámetro".

Corregir el puntero VARIANT; reiniciar la orden

16#002B

No se puede escribir el valor del puntero VA‐
RIANT "Parámetro".

Corregir el puntero VARIANT o el valor; reiniciar la
orden

16#002C

El eje no está bloqueado.

Bloquear el eje; reiniciar la orden

16#8411

El valor del parámetro "Value" de la instrucción de Motion Control no es válido
16#0002

El valor no tiene un formato numérico válido

Corregir el valor; reiniciar la orden

Error de configuración del eje
ErrorID

ErrorInfo

16#8600

La dirección no es válida

16#0014

El hardware seleccionado está en uso en otra
aplicación

Cargar la configuración sin errores en el controla‐
dor; volver a habilitar el eje con la instrucción
"MC_Power"

La parametrización del contador rápido (HSC) no es válida
16#000B

La dirección no es válida

16#0014

El hardware seleccionado está en uso en otra
aplicación

16#8602

Cargar la configuración sin errores en el controla‐
dor; volver a habilitar el eje con la instrucción
"MC_Power"

La parametrización de la "salida de habilitación" no es válida
16#000B

16#8603

La dirección no es válida

Cargar la configuración sin errores en el controla‐
dor; volver a habilitar el eje con la instrucción
"MC_Power"

La parametrización de la "entrada de disponibilidad" no es válida
16#000B

16#8604

La dirección no es válida

Cargar la configuración sin errores en el controla‐
dor; volver a habilitar el eje con la instrucción
"MC_Power"

El valor de "Impulsos por vuelta del motor" no es válido
16#000A

2586

Solución

Parametrización del generador de impulsos (PTO) no válida
16#000B

16#8601

16#8605

Descripción

El valor es menor o igual que 0

Cargar la configuración sin errores en el controla‐
dor; volver a habilitar el eje con la instrucción
"MC_Power"

El valor de "Recorrido por vuelta del motor" no es válido

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#0002

El valor no tiene un formato numérico válido

16#0005

El valor se encuentra fuera del rango numérico
(mayor que 1E+12)

Cargar la configuración sin errores en el controla‐
dor; volver a habilitar el eje con la instrucción
"MC_Power"

16#000A

El valor es menor o igual que 0

16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#8606

El valor de "Velocidad de arranque/parada" no es válido
16#0002
16#0003

El valor no tiene un formato numérico válido

Cargar la configuración sin errores en el controla‐
dor;
volver a habilitar el eje con la instrucción
El valor es mayor que el límite superior de hard‐
"MC_Power"
ware

16#0004

El valor es menor que el límite inferior de hard‐
ware

16#0007

La velocidad de arranque/parada es mayor que
la velocidad máxima

16#8607

El valor de "Velocidad máxima" no es válido
16#0002
16#0003

El valor no tiene un formato numérico válido

Cargar la configuración sin errores en el controla‐
dor;
volver a habilitar el eje con la instrucción
El valor es mayor que el límite superior de hard‐
"MC_Power"
ware

16#0004

El valor es menor que el límite inferior de hard‐
ware

16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#8608

El valor de "Aceleración" no es válido
16#0002

El valor no tiene un formato numérico válido

16#0003

El valor es mayor que el límite superior de hard‐
ware

16#0004

El valor es menor que el límite inferior de hard‐ ● Corregir el valor erróneo online, confirmar el
ware
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#8609

El valor de "Deceleración" no es válido

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2587

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#0002

El valor no tiene un formato numérico válido

16#0003

El valor es mayor que el límite superior de hard‐
ware

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"

16#0004

El valor es menor que el límite inferior de hard‐ ● Corregir el valor erróneo online, confirmar el
ware
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#860A

El valor de "Deceleración de parada de emergencia" no es válido
16#0002
16#0003

El valor no tiene un formato numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
El valor es mayor que el límite superior de hard‐
instrucción "MC_Power"
ware

16#0004

El valor es menor que el límite inferior de hard‐ ● Corregir el valor erróneo online, confirmar el
ware
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#860B

El valor de posición del final de carrera por software inferior no es válido
16#0002

El valor no tiene un formato numérico válido

16#0005

El valor se encuentra fuera del rango numérico
(mayor que 1E+12)

16#0006

El valor se encuentra fuera del rango numérico
(menor que -1E+12)

16#0030
16#860C

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"

● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario
El valor de posición del final de carrera por soft‐
ware inferior es mayor que el del superior
El valor de posición del final de carrera por software superior no es válido

16#0002

El valor no tiene un formato numérico válido

16#0005

El valor se encuentra fuera del rango numérico
(mayor que 1E+12)

16#0006

El valor se encuentra fuera del rango numérico
(menor que -1E+12)

● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"

● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

2588

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

16#860D

Descripción

Solución

La dirección del final de carrera por hardware inferior no es válida
16#000B
16#000C

Cargar la configuración sin errores en el controla‐
La dirección del flanco descendente no es váli‐ dor; volver a habilitar el eje con la instrucción
"MC_Power"
da

16#000D

La dirección del flanco ascendente no es válida

16#860E

Dirección no válida

La dirección del final de carrera por hardware superior no es válida
16#000B
16#000C

Cargar la configuración sin errores en el controla‐
La dirección del flanco descendente no es váli‐ dor; volver a habilitar el eje con la instrucción
"MC_Power"
da

16#000D

La dirección del flanco ascendente no es válida

16#860F

Dirección no válida

El valor de "Offset del punto de referencia" no es válido
16#0002

El valor no tiene un formato numérico válido

16#0005

El valor se encuentra fuera del rango numérico
(mayor que 1E+12)

16#0006

El valor se encuentra fuera del rango numérico
(menor que -1E+12)

● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"

● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario
16#8610

El valor de "Velocidad de aproximación" no es válido
16#0002
16#0008
16#0009

16#0030

El valor no tiene un formato numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
La velocidad es mayor que la velocidad máxima
instrucción "MC_Power"
La velocidad es inferior a la velocidad de arran‐
● Corregir el valor erróneo online, confirmar el
que/parada
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario
El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#8611

El valor de "Velocidad de referenciado" no es válido

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2589

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

16#0002

El valor no tiene un formato numérico válido

16#0008
16#0009

16#0030

Solución

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
La velocidad es inferior a la velocidad de arran‐
● Corregir el valor erróneo online, confirmar el
que/parada
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario
La velocidad es mayor que la velocidad máxima

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#8612

La dirección del sensor del punto de referencia no es válida
16#000C

Cargar la configuración sin errores en el controla‐
La dirección del flanco descendente no es váli‐ dor; volver a habilitar el eje con la instrucción
"MC_Power"
da

16#000D

La dirección del flanco ascendente no es válida

16#000B

16#8613

Dirección no válida

En el referenciado activo, la inversión del sentido en el final de carrera por hardware se encuentra
activada, a pesar de que los finales de carrera por hardware no han sido configurados
16#0001

-

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#8614

El valor de "Tirón" no es válido
16#0002
16#001F
16#0020

16#0030

El valor no tiene un formato numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
El valor es mayor que el tirón máximo admisible
instrucción "MC_Power"
El valor es menor que el tirón mínimo admisible
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario
El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#8615

El valor de "Unidad de medida" no es válido
16#0011

16#8616

2590

El valor de selección no es válido

Cargar la configuración sin errores en el controla‐
dor; volver a habilitar el eje con la instrucción
"MC_Power"

La dirección del sensor del punto de referencia no es válida (referenciado pasivo a partir de V4)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#0011

El valor de selección no es válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

El valor de la variable <Nombre de eje>.Sensor.Sensor[1].ActiveHoming.Mode no es válido

16#8617
16#0011

El valor de selección no es válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
(Valor válido: 2 = referenciado vía entrada digi‐
instrucción "MC_Power"
tal)
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#8618

El valor de la variable <Nombre de eje>.Sensor.Sensor[1].PassiveHoming.Mode no es válido
16#0011

El valor de selección no es válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
(Valor válido: 2 = referenciado vía entrada digi‐
instrucción "MC_Power"
tal)
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#8619

El valor de la variable <Nombre de eje>.Actor.Type no es válido
16#0011

El valor de selección no es válido
(Valor válido: 2 = conexión mediante interfaz de
impulsos)

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#861A

El valor para "Sentido de giro permitido" no es válido
16#0011

El valor de selección no es válido

16#002D

"Ambos sentidos" no está permitido estando
desconectada la salida de sentido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#861B

Factores de transmisión de carga erróneos
16#0031

16#861C

El valor no es válido.

Cargar la configuración sin errores en el controla‐
dor; volver a habilitar el eje con la instrucción
"MC_Power"

Combinación no válida de datos para referenciado con encóder incremental

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2591

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#0031

El valor no es válido.

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#861D

El tipo de montaje ajustado del encóder no es válido. Valor no admisible en <Nombre de eje>.Sen‐
sor.Sensor[1].MountingMode
16#0011

El valor de selección no es válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#861E

La configuración del tamaño de la rueda de medida del encóder no es válida. Valor no admisible en
<Nombre de eje>.Sensor.Sensor[1].Parameter.DistancePerRevolution
16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#861F

La configuración de la resolución del encóder lineal es errónea. Valor no admisible en <Nombre de
eje>.Sensor.Sensor[1].Parameter.Resolution
16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#8620

La resolución fina ajustada para Gx_XIST1 no es válida. Valor no admisible en <Nombre de
eje>.Sensor.Sensor[1].Parameter.FineResolutionXist1
16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#8621

La resolución fina ajustada para Gx_XIST1 en <Nombre de eje>.Sensor.Sensor[1].Parameter.Fine‐
ResolutionXist1 no coincide con el ajuste en el parámetro PROFIdrive P979
16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

2592

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

16#8622

Descripción

Solución

Valor no admisible para el dato de configuración <Nombre de eje>.Actor.Interface.AddressIn o
<Nombre de eje>.Actor.Interface.AddressOut
16#0011

16#8623

El valor de selección no es válido

Cargar la configuración sin errores en el controla‐
dor; volver a habilitar el eje con la instrucción
"MC_Power"

El valor ajustado en la variable <Nombre del eje>.Sensor.Sensor[1].Type no es válido.
16#0011

16#8624

El valor de selección no es válido

Cargar la configuración sin errores en el controla‐
dor; volver a habilitar el eje con la instrucción
"MC_Power"

El sistema de encóder ajustado no es válido. Valor no admisible en <Nombre de eje>.Sensor.Sen‐
sor[1].System
16#0011

El valor de selección no es válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#8625

El parámetro de la vigilancia de posicionamiento es erróneo. Valor no admisible en <Nombre de
eje>.PositioningMonitoring.MinDwellTime
16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#8626

El parámetro de la vigilancia de posicionamiento es erróneo. Valor no admisible en <Nombre de
eje>.PositioningMonitoring.Window
16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#8627

La configuración de la interfaz PROFIdrive del valor real es errónea. Valor no admisible en <Nombre
de eje>.Sensor.Sensor[1].Interface.AddressIn o <Nombre de eje>.Sensor.Sensor[1].Interface.Ad‐
dressOut
16#0011

16#8628

El valor de selección no es válido

Cargar la configuración sin errores en el controla‐
dor; volver a habilitar el eje con la instrucción
"MC_Power"

Factores de regulador erróneos

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2593

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

El valor para la ganancia o el precontrol del lazo de
regulación es erróneo.
● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario
>.PositionControl.Kv, <Nombre del
eje>.PositionControl.Kpc)

16#8629

El valor límite para la señal de velocidad cero es erróneo. Valor no admisible en <Nombre de
eje>.StandStillSignal.VelocityThreshold
16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#862A

El parámetro de la vigilancia de posicionamiento es erróneo. Valor no admisible en <Nombre de
eje>.PositioningMonitoring.ToleranceTime
16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

Parametrización de PROFIBUS incoherente; la suma de Ti y To es mayor que un ciclo DP

16#862B
16#0030

16#862C

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

Cargar la configuración sin errores en el controla‐
dor; volver a habilitar el eje con la instrucción
"MC_Power"

El parámetro de la vigilancia de velocidad cero es erróneo. Valor no admisible en <Nombre de
eje>.StandStillSignal.MinDwellTime
16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#862D

2594

El parámetro de vigilancia de errores de seguimiento es erróneo. Valor no admisible en <Nombre de
eje>.FollowingError.MinValue

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#862E

Valor no permitido para el dato de configuración <Nombre del eje>.Modulo.Length
16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#862F

Valor no permitido para el dato de configuración <Nombre del eje>.Modulo.StartValue
16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#8630

Valor no permitido para el dato de configuración <Nombre del eje>.Actor.DriveParameter.Referen‐
ceSpeed
16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#8631

La resolución fina ajustada para Gx_XIST2 no es válida. Valor no admisible en <Nombre de
eje>.Sensor.Sensor[1].Parameter.FineResolutionXist2
16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#8632

El número de vueltas determinables del encóder no es válido. Valor no admisible en <Nombre de
eje>.Sensor.Sensor[1].Parameter.DeterminableRevolutions
16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#8633

El sentido de aproximación ajustado del sensor del punto de referencia para el referenciado pasivo
no es válido. Valor no admisible en <Nombre de eje>.Sensor.Sensor[1].PassiveHoming.Direction

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2595

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

16#8634

Descripción

Solución

El parámetro de vigilancia de errores de seguimiento es erróneo. Valor no admisible en <Nombre de
eje>.FollowingError.MaxValue
16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#8635

El parámetro de vigilancia de errores de seguimiento es erróneo. Valor no admisible en <Nombre de
eje>.FollowingError.MinVelocity
16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#8636

Factor de regulador erróneo. Valor no admisible del factor de precontrol <Nombre de eje>.Position‐
Control.Kpc
16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#8637

Valor no permitido para el dato de configuración <Nombre del eje>.Sensor.Sensor[1].Interface.Type
16#0011

16#8638

El valor de selección no es válido

Cargar la configuración sin errores en el controla‐
dor; volver a habilitar el eje con la instrucción
"MC_Power"

Valor no permitido para el dato de configuración <Nombre del eje>.Sensor.Sensor[1].Interface.HSC
16#0011

16#8639

El valor de selección no es válido

Cargar la configuración sin errores en el controla‐
dor; volver a habilitar el eje con la instrucción
"MC_Power"

Error en el accionamiento
16#0049

Error de configuración en el dispositivo

Cargar la configuración sin errores en el controla‐
dor; volver a habilitar el eje con la instrucción
"MC_Power"

16#004A

La tecnología requiere un ciclo de servo más
corto

Error interno de sistema.

El driver del dispositivo no se ha inicializado
durante el arranque

Para habilitar un objeto tecnológico, debe haberse
inicializado el driver del actuador.

16#004B

Compruebe la coherencia del proyecto y vuelva a
cargarlo en el controlador.

Vuelva a iniciar la orden más tarde.
16#863A

2596

Comunicación con accionamiento defectuosa

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#004C

Error de configuración en el dispositivo

● Conecte un dispositivo adecuado.
● Compruebe el dispositivo (conexiones).
● Compare la configuración de HW Config y del
objeto tecnológico.

16#004D

El driver del dispositivo necesita un ciclo de ser‐ ● Conecte un dispositivo adecuado.
vo más corto
● Compruebe el dispositivo (conexiones).
● Compare la configuración de HW Config y del
objeto tecnológico.

16#004E
16#863B

Error en la comunicación interna con el dispo‐
sitivo

Compruebe la coherencia del proyecto y vuelva a
cargarlo en el controlador.

Error en el encóder
16#0049

Error de configuración en el dispositivo

Cargar la configuración sin errores en el controla‐
dor; volver a habilitar el eje con la instrucción
"MC_Power"

16#004A

La tecnología requiere un ciclo de servo más
corto

Error interno de sistema.

El driver del dispositivo no se ha inicializado
durante el arranque

Para habilitar un objeto tecnológico, debe haberse
inicializado el driver del actuador.

16#004B

Compruebe la coherencia del proyecto y vuelva a
cargarlo en el controlador.

Vuelva a iniciar la orden más tarde.
16#863C

Comunicación con el encóder defectuosa
16#004C

Error de configuración en el dispositivo

● Conecte un dispositivo adecuado.
● Compruebe el dispositivo (conexiones).
● Compare la configuración de HW Config y del
objeto tecnológico.

16#004D

El driver del dispositivo necesita un ciclo de ser‐ ● Conecte un dispositivo adecuado.
vo más corto
● Compruebe el dispositivo (conexiones).
● Compare la configuración de HW Config y del
objeto tecnológico.

16#004E
16#863D

Error en la comunicación interna con el dispo‐
sitivo

Compruebe la coherencia del proyecto y vuelva a
cargarlo en el controlador.

Falla la comunicación con el dispositivo (accionamiento o encóder)
16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, confirmar el
error con la instrucción "MC_Reset" y reiniciar
la orden si fuera necesario

16#863E

16#0055

La dirección lógica solicitada no es válida.

● Conecte un dispositivo adecuado.

16#0056

La dirección de entrada lógica solicitada no es
válida.

● Compruebe el dispositivo (conexiones).

16#0057

La dirección de salida lógica solicitada no es
válida.

● Compruebe la configuración de la topología en
HW Config.
● Compare la configuración de HW Config y del
objeto tecnológico.

El valor de la variable "ControlPanel.Input.TimeOut" no es válido (panel de mando del eje)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2597

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

Corrija el valor en la variable del objeto tecnológico
<Nombre de eje>.ControlPanel.Input.TimeOut.
El valor se indica en milisegundos (ms).

16#863F

Valor no permitido para el dato de configuración <Nombre del eje>.Actor.DriveParameter.MaxSpeed
16#0030

El valor tiene un formato numérico erróneo o
está fuera del rango numérico válido

Corrija el valor de referencia en el accionamiento y
en la configuración del objeto tecnológico a Ac‐
tor.MaxSpeed/2.
En caso de conexión analógica del accionamiento,
corrija el valor de referencia en el accionamiento y
en la configuración del objeto tecnológico a Ac‐
tor.MaxSpeed/1,17.

Error de configuración de la tabla de órdenes
ErrorID

ErrorInfo

16#8700

Descripción

Solución

El valor de "Tipo de orden" en la tabla de órdenes no es válido
16#0001

-

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir online el valor erróneo y, en caso
necesario, reiniciar la orden

16#8701

El valor de "Posición / recorrido " en la tabla de órdenes no es válido
16#0002

El valor no tiene un formato numérico válido

16#0005

El valor se encuentra fuera del rango numérico
(mayor que 1E+12)

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"

16#0006

El valor se encuentra fuera del rango numérico
(menor que -1E+12)

● Corregir online el valor erróneo y, en caso
necesario, reiniciar la orden

16#8702

El valor de "Velocidad" en la tabla de órdenes no es válido
16#0002
16#0008
16#0009

16#8703

El valor no tiene un formato numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
El valor es mayor que la velocidad máxima con‐
instrucción "MC_Power"
figurada
El valor es inferior a la velocidad de arranque/
parada configurada

● Corregir online el valor erróneo y, en caso
necesario, reiniciar la orden

El valor de "Duración" en la tabla de órdenes no es válido
16#0002

El valor no tiene un formato numérico válido

16#0021

El valor es superior a 64800 s

16#0022

El valor es inferior a 0.001 s

16#8704

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir online el valor erróneo y, en caso
necesario, reiniciar la orden

El valor de "Siguiente paso" en la tabla de órdenes no es válido
16#0011

El valor de selección no es válido

16#0023

La transición entre órdenes no está permitida
con esta orden

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir online el valor erróneo y, en caso
necesario, reiniciar la orden

2598

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Errores internos
ErrorID

ErrorInfo

Descripción

16#8FFF

Solución

Error interno
16#F0**

-

POWER OFF y POWER ON de la CPU
Si esto no produce el resultado deseado, póngase
en contacto con el Servicio de Atención al Cliente.
Tenga al alcance la siguiente información:
● ErrorID
● ErrorInfo
● Registros del búfer de diagnóstico

Consulte también
Indicaciones de error de las instrucciones de Motion Control (Página 2464)
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)
ErrorID y ErrorInfos (Página 2578)
Utilizando varios ejes con el mismo PTO (Página 2473)
Utilizar varios accionamientos con el mismo PTO (Página 2476)
Realizar un seguimiento de las peticiones de clases de prioridad superiores (niveles de
procesamiento) (Página 2477)
Casos especiales al utilizar finales de carrera por software para conexión del accionamiento
mediante PTO (Página 2479)

Lista de los ErrorID y las ErrorInfos (objetos tecnológicos V2...3)
Las siguientes tablas recogen una relación de todos los ErrorID y ErrorInfos que pueden ser
mostrados en las instrucciones de Motion Control. Junto a la causa del error se muestran
también ayudas para eliminar los errores:

Error de funcionamiento con parada del eje
ErrorID

ErrorInfo

16#8000

Solución

Error de accionamiento, fallo de "Accionamiento listo"
16#0001

16#8001

Descripción
-

Acusar error con la instrucción "MC_Reset"; pro‐
porcionar la señal del accionamiento; eventualmen‐
te iniciar de nuevo la orden

Final de carrera por SW inferior activado

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2599

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#000E

Se ha alcanzado la posición del final de carrera
por software inferior con la deceleración actual
configurada

Acusar el error con la instrucción "MC_Reset"; salir
del final de carrera por software con una orden de
marcha en sentido positivo

16#000F

Se ha alcanzado la posición del final de carrera
por software inferior con la deceleración de pa‐
rada de emergencia

16#0010

Se ha rebasado la posición del final de carrera
por software inferior con la deceleración de pa‐
rada de emergencia

16#8002

Final de carrera por SW superior activado
16#000E

Se ha alcanzado la posición del final de carrera Acusar el error con la instrucción "MC_Reset"; salir
por software superior con la deceleración actual del final de carrera por software con una orden de
configurada
marcha en sentido negativo

16#000F

Se ha alcanzado la posición del final de carrera
por software superior con la deceleración de
parada de emergencia

16#0010

Se ha rebasado la posición del final de carrera
por software superior con la deceleración de
parada de emergencia

16#8003

Final de carrera por HW inferior aproximado
16#000E

El final de carrera por hardware inferior ha sido
aproximado. Se ha frenado el eje con la dece‐
leración de parada de emergencia.

Acusar el error en eje habilitado con la instrucción
"MC_Reset"; salir del final de carrera por hardware
con una orden de marcha en sentido positivo.

(no se ha encontrado el sensor del punto de
referencia durante una búsqueda activa del
mismo)
16#8004

Final de carrera por HW superior aproximado
16#000E

El final de carrera por hardware superior ha sido Acusar el error en eje habilitado con la instrucción
aproximado. Se ha frenado el eje con la dece‐ "MC_Reset"; salir del final de carrera por hardware
con una orden de marcha en sentido negativo.
leración de parada de emergencia.
(no se ha encontrado el sensor del punto de
referencia durante una búsqueda activa del
mismo)

16#8005

PTO y HSC ya están siendo utilizados por otro eje
16#0001

-

El eje ha sido configurado de forma incorrecta:
Corregir la configuración del PTO (Pulse Train Out‐
put) / HSC (High Speed Counter) y cargarla en el
controlador
Varios ejes deben trabajar con un PTO:
Otro eje utiliza el PTO / HSC. Si el eje actual debe
asumir el control, se debe bloquear el otro eje con
"MC_Power" Enable = FALSE.
(Ver también Utilizando varios ejes con el mismo
PTO (Página 2473))

16#8006

Se ha producido un error de comunicación en el panel de mando del eje
16#0012

16#8007

2600

Se ha producido un error de desbordamiento de Revise la conexión de cables y vuelva a hacer clic
tiempo.
en el botón "Control manual".
Imposible habilitar el eje

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#0025

Ejecutando restart.

Espere hasta que haya concluido el restart del eje.

16#0026

Ejecutando carga en el estado operativo RUN

Espere hasta que haya finalizado la operación de
carga.

Error de funcionamiento sin parada del eje
ErrorID

ErrorInfo

16#8200

Descripción

Solución

El eje no está habilitado
16#0001

16#8201

-

Habilitar el eje; volver a iniciar la orden

El eje ya ha sido habilitado por otra instancia de "MC_Power"
16#0001

16#8202

-

Habilitar el eje sólo con una instancia "MC_Power"

Se ha superado el número máximo de órdenes de Motion Control simultáneamente activas (máx. 200
órdenes para todos los objetos tecnológicos de Motion Control)
16#0001

-

Reducir el número de órdenes activas simultánea‐
mente; volver a iniciar la orden
En el parámetro "Busy" = TRUE de la instrucción de
Motion Control se reconoce una orden activa.

16#8203

El eje está funcionando en este momento en "Control manual" (panel de mando)
16#0001

16#8204

Finalizar el "Control manual"; volver a iniciar la or‐
den

El eje no está referenciado
16#0001

16#8205

-

Referenciar el eje con la instrucción "MC_Home";
volver a iniciar la orden

El eje está siendo controlado por el programa de usuario (el error sólo se muestra en el panel de
mando del eje)
16#0013

16#8206

El eje está habilitado en el programa de usuario. Bloquear eje con la instrucción "MC_Power" y se‐
leccionar nuevamente "Control manual" en el panel
de mando del eje
Objeto tecnológico pendiente de activación

16#0001

16#8207

-

Active el eje con la instrucción "MC_Power" Ena‐
ble = TRUE, o habilite el eje en el panel de mando
del eje.

Orden rechazada
16#0016

Referenciación activa en curso; no es posible
iniciar otro tipo de referenciación.

Espere a que la referenciación activa finalice o can‐
cele la referenciación activa con una orden de mo‐
vimiento, p. ej., "MC_Halt".

16#0018

Mientras el eje se está referenciando de forma
directa o pasiva, no se puede desplazar con
una tabla de órdenes.

Espere a que la referenciación directa o pasiva ter‐
mine.

16#0019

Durante el procesamiento de una tabla de ór‐
denes el eje no se puede referenciar de forma
directa o pasiva.

Espere a que se cierre la tabla de órdenes o inte‐
rrumpa dicha tabla con una orden de movimiento
p. ej. "MC_Halt".

16#8208

16#8209

-

La diferencia entre la velocidad máxima y la velocidad de arranque/parada no es válida
16#0002

El valor no tiene un formato numérico válido

16#000A

El valor es menor o igual que cero.

Corregir el valor; volver a iniciar la orden

El valor de aceleración del TO "Eje" no es válido

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2601

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#0002

El valor no tiene un formato numérico válido

Corregir el valor; volver a iniciar la orden

16#000A

El valor es menor o igual que cero.

16#820A

No es posible el restart del eje
16#0013

El eje está habilitado en el programa de usuario. Bloquear eje con la instrucción "MC_Power"; eje‐
cutar Restart nuevamente

16#0027

El eje está funcionando en este momento en
"Control manual" (panel de mando)

16#820B

Finalizar el "Control manual"; repetir Restart

Imposible ejecutar la tabla de órdenes
16#0026

Ejecutando carga en el estado operativo RUN

Espere hasta que haya finalizado la operación de
carga.

Error de parámetros de bloque
ErrorID

ErrorInfo

16#8400
16#0002

El valor no tiene un formato numérico válido

16#0005

El valor se encuentra fuera del rango numérico
(mayor que 1.0E+12)

16#0006

El valor se encuentra fuera del rango numérico
(menor que -1.0E+12)

16#8401
16#0002

El valor no tiene un formato numérico válido

16#0005

El valor se encuentra fuera del rango numérico
(mayor que 1.0E+12)

16#0006

El valor se encuentra fuera del rango numérico
(menor que -1.0E+12)

Corregir el valor; volver a iniciar la orden

Corregir el valor; volver a iniciar la orden

El valor del parámetro "Velocity" de la instrucción de Motion Control no es válido
16#0002

El valor no tiene un formato numérico válido

16#0008

El valor es mayor que la velocidad máxima con‐
figurada

16#0009

El valor es inferior a la velocidad de arranque/
parada configurada

16#0024
16#8403

Corregir el valor; volver a iniciar la orden

El valor es menor que 0
El valor del parámetro "Direction" de la instrucción de Motion Control no es válido

16#0011

2602

Solución

El valor del parámetro "Distance" de la instrucción de Motion Control no es válido

16#8402

16#8404

Descripción

El valor del parámetro "Position" de la instrucción de Motion Control no es válido

El valor de selección no es válido

Corregir el valor de selección; volver a iniciar la or‐
den

El valor del parámetro "Mode" de la instrucción de Motion Control no es válido

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#0011

El valor de selección no es válido

Corregir el valor de selección; volver a iniciar la or‐
den

16#0015

Referenciación activa / pasiva no configurada

Corregir la configuración y cargar en el controlador;
habilitar el eje y reiniciar la orden

16#0017

La inversión del sentido en el final de carrera
por hardware está activada aunque los finales
de carrera por hardware están desactivados.

● Activar los finales de carrera por hardware
mediante la variable
<Eje>.Config.PositionLimits_HW.Active =
TRUE, reiniciar orden
● Corregir la configuración y cargar en el
controlador; habilitar el eje y reiniciar la orden

16#8405

El valor del parámetro "StopMode" de la instrucción de Motion Control no es válido
16#0011

16#8406

El valor de selección no es válido

Corregir el valor de selección; habilitar nuevamente
el eje

Pulsación simultánea de avance y retroceso no permitida
16#0001

16#8407

-

Evite la simultaneidad del estado de señal TRUE
de los parámetros "JogForward" y "JogBackward";
inicie nuevamente la orden.

Cambio del eje en la instrucción "MC_Power" permitido únicamente con eje bloqueado.
16#0001

16#8408

-

Bloquear eje activo; a continuación se puede cam‐
biar y habilitar el eje.

El valor del parámetro "Axis" de la instrucción de Motion Control no es válido
16#001A

El valor indicado no se corresponde con la ver‐ Corregir el valor; volver a iniciar la orden
sión exigida del TO

16#001B

El valor indicado no se corresponde con el tipo
exigido del TO

16#001C

El valor indicado no es un bloque de datos tec‐
nológicos de Motion Control

16#8409

El valor del parámetro "CommandTable" de la instrucción de Motion Control no es válido
16#001A

El valor indicado no se corresponde con la ver‐ Corregir el valor; volver a iniciar la orden
sión exigida del TO

16#001B

El valor indicado no se corresponde con el tipo
exigido del TO

16#001C

El valor indicado no es un bloque de datos tec‐
nológicos de Motion Control

16#840A

El valor del parámetro "StartStep" de la instrucción de Motion Control no es válido
16#000A

El valor es menor o igual que cero.

16#001D

El paso de inicio es mayor que el paso final

16#001E

El valor es superior a 32

16#840B

Corregir el valor; volver a iniciar la orden

El valor del parámetro "EndStep" de la instrucción de Motion Control no es válido
16#000A
16#001E

16#840C

El valor es menor o igual que cero.

Corregir el valor; volver a iniciar la orden

El valor es superior a 32
El valor del parámetro "RampUpTime" de la instrucción de Motion Control no es válido

16#0002

El valor no tiene un formato numérico válido

16#0005

El valor se encuentra fuera del rango numérico
(mayor que 1.0E12)

16#000A

El valor es menor o igual que cero.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Corregir el valor; volver a iniciar la orden

2603

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

16#840D

Descripción

Solución

El valor del parámetro "RampDownTime" de la instrucción de Motion Control no es válido
16#0002
16#000A

16#840E

El valor no tiene un formato numérico válido

Corregir el valor; volver a iniciar la orden

El valor es menor o igual que cero.
El valor del parámetro "EmergencyRampTime" de la instrucción de Motion Control no es válido

16#0002

El valor no tiene un formato numérico válido

16#000A

El valor es menor o igual que cero.

16#840F

Corregir el valor; volver a iniciar la orden

El valor del parámetro "JerkTime" de la instrucción de Motion Control no es válido
16#0002

El valor no tiene un formato numérico válido

16#000A

El valor es menor o igual que cero.

Corregir el valor; volver a iniciar la orden

Error de configuración del eje
ErrorID

ErrorInfo

16#8600
16#000B

La dirección no es válida

16#0014

El hardware seleccionado está en uso en otra
aplicación

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"

La parametrización del contador rápido (HSC) no es válida
16#000B

La dirección no es válida

16#0014

El hardware seleccionado está en uso en otra
aplicación

16#8602

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"

La parametrización de la "salida de habilitación" no es válida
16#000B

16#8603

La dirección no es válida

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"

La parametrización de la "entrada de disponibilidad" no es válida
16#000B

16#8604

La dirección no es válida

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"

El valor de "Impulsos por vuelta del motor" no es válido
16#000A

16#8605

2604

Solución

Parametrización del generador de impulsos (PTO) no válida

16#8601

16#8606

Descripción

El valor es menor o igual que 0

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"

El valor de "Recorrido por vuelta del motor" no es válido
16#0002

El valor no tiene un formato numérico válido

16#0005

El valor se encuentra fuera del rango numérico
(mayor que 1.0E+12)

16#000A

El valor es menor o igual que 0

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"

El valor de "Velocidad de arranque/parada" no es válido

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#0002

El valor no tiene un formato numérico válido

16#0003

El valor es mayor que el límite superior de hard‐
ware

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"

16#0004

El valor es menor que el límite inferior de hard‐
ware

16#0007

La velocidad de arranque/parada es mayor que
la velocidad máxima

16#8607

El valor de "Velocidad máxima" no es válido
16#0002

El valor no tiene un formato numérico válido

16#0003

El valor es mayor que el límite superior de hard‐
ware

16#0004

El valor es menor que el límite inferior de hard‐
ware

16#8608

El valor de "Aceleración" no es válido
16#0002

El valor no tiene un formato numérico válido

16#0003

El valor es mayor que el límite superior de hard‐
ware

16#0004

El valor es menor que el límite inferior de hard‐ ● Corregir el valor erróneo online, acusar el error
ware
con la instrucción "MC_Reset" y volver a iniciar
la orden si fuera necesario

16#8609

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"

El valor de "Deceleración" no es válido
16#0002

El valor no tiene un formato numérico válido

16#0003

El valor es mayor que el límite superior de hard‐
ware

16#0004

El valor es menor que el límite inferior de hard‐ ● Corregir el valor erróneo online, acusar el error
ware
con la instrucción "MC_Reset" y volver a iniciar
la orden si fuera necesario

16#860A

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"

El valor de "Deceleración de parada de emergencia" no es válido
16#0002

El valor no tiene un formato numérico válido

16#0003

El valor es mayor que el límite superior de hard‐
ware

16#0004

El valor es menor que el límite inferior de hard‐ ● Corregir el valor erróneo online, acusar el error
ware
con la instrucción "MC_Reset" y volver a iniciar
la orden si fuera necesario

16#860B

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"

El valor de posición del final de carrera por software inferior no es válido
16#0002

El valor no tiene un formato numérico válido

16#0005

El valor se encuentra fuera del rango numérico
(mayor que 1.0E+12)

16#0006

● Corregir el valor erróneo online, acusar el error
con la instrucción "MC_Reset" y volver a iniciar
la orden si fuera necesario
El valor de posición del final de carrera por soft‐
ware inferior es mayor que el del superior

16#0007
16#860C

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"

El valor se encuentra fuera del rango numérico
(menor que -1.0E+12)

El valor de posición del final de carrera por software superior no es válido

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2605

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#0002

El valor no tiene un formato numérico válido

16#0005

El valor se encuentra fuera del rango numérico
(mayor que 1.0E+12)

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"

16#0006

El valor se encuentra fuera del rango numérico
(menor que -1.0E+12)

16#860D

La dirección del final de carrera por hardware inferior no es válida
16#000C
16#000D

16#860E

16#000D
16#860F

La dirección del flanco descendente no es váli‐ ● Cargar la configuración sin errores en el
da
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
La dirección del flanco ascendente no es válida
El valor de "Offset del punto de referencia" no es válido

16#0002

El valor no tiene un formato numérico válido

16#0005

El valor se encuentra fuera del rango numérico
(mayor que 1.0E+12)

16#0006

El valor se encuentra fuera del rango numérico
(menor que -1.0E+12)

16#8610

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, acusar el error
con la instrucción "MC_Reset" y volver a iniciar
la orden si fuera necesario

El valor de "Velocidad de aproximación" no es válido
16#0002
16#0008
16#0009

16#8611

El valor no tiene un formato numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
La velocidad es inferior a la velocidad de arran‐
● Corregir el valor erróneo online, acusar el error
que/parada
con la instrucción "MC_Reset" y volver a iniciar
la orden si fuera necesario
La velocidad es mayor que la velocidad máxima

El valor de "Velocidad de referenciación" no es válido
16#0002
16#0008
16#0009

16#8612

El valor no tiene un formato numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
La velocidad es mayor que la velocidad máxima
instrucción "MC_Power"
La velocidad es inferior a la velocidad de arran‐
● Corregir el valor erróneo online, acusar el error
que/parada
con la instrucción "MC_Reset" y volver a iniciar
la orden si fuera necesario
La dirección del sensor del punto de referencia no es válida

16#000C
16#000D

2606

La dirección del flanco descendente no es váli‐ ● Cargar la configuración sin errores en el
da
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
La dirección del flanco ascendente no es válida
La dirección del final de carrera por hardware superior no es válida

16#000C

16#8613

● Corregir el valor erróneo online, acusar el error
con la instrucción "MC_Reset" y volver a iniciar
la orden si fuera necesario

La dirección del flanco descendente no es váli‐ ● Cargar la configuración sin errores en el
da
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
La dirección del flanco ascendente no es válida
En la referenciación activa, la inversión del sentido en el final de carrera por hardware se encuentra
activada, a pesar de que los finales de carrera por hardware no han sido configurados

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#0001

-

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, acusar el error
con la instrucción "MC_Reset" y volver a iniciar
la orden si fuera necesario

16#8614

El valor de "Tirón" no es válido
16#0002
16#001F
16#0020

16#8615

El valor no tiene un formato numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
El valor es menor que el tirón mínimo admisible
● Corregir el valor erróneo online, acusar el error
con la instrucción "MC_Reset" y volver a iniciar
la orden si fuera necesario

El valor es mayor que el tirón máximo admisible

El valor de "Unidad de medida" no es válido
16#0011

El valor de selección no es válido

Cargar la configuración sin errores en el controla‐
dor; volver a habilitar el eje con la instrucción
"MC_Power"

Error de configuración de la tabla de órdenes
ErrorID

ErrorInfo

16#8700

Descripción

Solución

El valor de "Tipo de orden" en la tabla de órdenes no es válido
16#0001

-

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir online el valor erróneo y, en caso
necesario, iniciar de nuevo la orden

16#8701

El valor de "Posición / recorrido " en la tabla de órdenes no es válido
16#0002

El valor no tiene un formato numérico válido

16#0005

El valor se encuentra fuera del rango numérico
(mayor que 1.0E+12)

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"

16#0006

El valor se encuentra fuera del rango numérico
(menor que -1.0E+12)

● Corregir online el valor erróneo y, en caso
necesario, iniciar de nuevo la orden

16#8702

El valor de "Velocidad" en la tabla de órdenes no es válido
16#0002
16#0008
16#0009

16#8703

El valor no tiene un formato numérico válido

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
El valor es mayor que la velocidad máxima con‐
instrucción "MC_Power"
figurada
El valor es inferior a la velocidad de arranque/
parada configurada

● Corregir online el valor erróneo y, en caso
necesario, iniciar de nuevo la orden

El valor de "Duración" en la tabla de órdenes no es válido
16#0002

El valor no tiene un formato numérico válido

16#0021

El valor es superior a 64800 s

16#0022

El valor es inferior a 0.001 s

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir online el valor erróneo y, en caso
necesario, iniciar de nuevo la orden

2607

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

16#8704

Solución

El valor de "Siguiente paso" en la tabla de órdenes no es válido
16#0011

El valor de selección no es válido

16#0023

La transición de órdenes no está permitida para
esta orden

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir online el valor erróneo y, en caso
necesario, iniciar de nuevo la orden

Errores internos
ErrorID

ErrorInfo

Descripción

16#8FFF

Solución

Error interno
16#F0**

-

POWER OFF y POWER ON de la CPU
Si esto no produce el resultado deseado, póngase
en contacto con el Servicio de Atención al Cliente.
Tenga al alcance la siguiente información:
● ErrorID
● ErrorInfo
● Registros del búfer de diagnóstico

Consulte también
Lista de los ErrorID y las ErrorInfos (objetos tecnológicos V4...5) (Página 2578)
Utilizando varios ejes con el mismo PTO (Página 2473)

Lista de los ErrorID y las ErrorInfos (objetos tecnológicos V1)
Las siguientes tablas recogen una relación de todos los ErrorID y ErrorInfos que pueden ser
mostrados en las instrucciones de Motion Control. Junto a la causa del error se muestran
también ayudas para eliminar los errores:

Error de funcionamiento con parada del eje
ErrorID

ErrorInfo

16#8000

2608

Solución

Error de accionamiento, fallo de "Accionamiento listo"
16#0001

16#8001

Descripción
-

Acusar error con la instrucción "MC_Reset"; pro‐
porcionar la señal del accionamiento; eventualmen‐
te iniciar de nuevo la orden

Final de carrera por SW inferior activado

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#000E

Se ha alcanzado la posición del final de carrera
por software inferior con la deceleración actual
configurada

Acusar el error con la instrucción "MC_Reset"; salir
del final de carrera por software con una orden de
marcha en sentido positivo

16#000F

Se ha alcanzado la posición del final de carrera
por software inferior con la deceleración de pa‐
rada de emergencia

16#0010

Se ha rebasado la posición del final de carrera
por software inferior con la deceleración de pa‐
rada de emergencia

16#8002

Final de carrera por SW superior activado
16#000E

Se ha alcanzado la posición del final de carrera Acusar el error con la instrucción "MC_Reset"; salir
por software superior con la deceleración actual del final de carrera por software con una orden de
configurada
marcha en sentido negativo

16#000F

Se ha alcanzado la posición del final de carrera
por software superior con la deceleración de
parada de emergencia

16#0010

Se ha rebasado la posición del final de carrera
por software superior con la deceleración de
parada de emergencia

16#8003

Final de carrera por HW inferior aproximado
16#000E

El final de carrera por hardware inferior ha sido
aproximado. Se ha frenado el eje con la dece‐
leración de parada de emergencia.

Acusar el error en eje habilitado con la instrucción
"MC_Reset"; salir del final de carrera por hardware
con una orden de marcha en sentido positivo.

(no se ha encontrado el sensor del punto de
referencia durante una búsqueda activa del
mismo)
16#8004

Final de carrera por HW superior aproximado
16#000E

El final de carrera por hardware superior ha sido Acusar el error en eje habilitado con la instrucción
aproximado. Se ha frenado el eje con la dece‐ "MC_Reset"; salir del final de carrera por hardware
con una orden de marcha en sentido negativo.
leración de parada de emergencia.
(no se ha encontrado el sensor del punto de
referencia durante una búsqueda activa del
mismo)

16#8005

PTO y HSC ya están siendo utilizados por otro eje
16#0001

-

El eje ha sido configurado de forma incorrecta:
Corregir la configuración del PTO (Pulse Train Out‐
put) / HSC (High Speed Counter) y cargarla en el
controlador
Varios ejes deben trabajar con un PTO:
Otro eje utiliza el PTO / HSC. Si el eje actual debe
asumir el control, se debe bloquear el otro eje con
"MC_Power" Enable = FALSE.
(Ver también Utilizando varios ejes con el mismo
PTO (Página 2473))

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2609

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Error de funcionamiento sin parada del eje
ErrorID

ErrorInfo

16#8200

Descripción

Solución

El eje no está habilitado
16#0001

16#8201

-

Habilitar el eje; volver a iniciar la orden

El eje ya ha sido habilitado por otra instancia de "MC_Power"
16#0001

16#8202

-

Habilitar el eje sólo con una instrucción "MC_Po‐
wer"

Se ha superado el número máximo de órdenes de Motion Control activas (máx. 200 órdenes para
todos los objetos tecnológicos de Motion Control)
16#0001

-

Reducir el número de órdenes activas simultánea‐
mente; volver a iniciar la orden
En el parámetro "Busy" = TRUE de la instrucción de
Motion Control se reconoce una orden activa.

16#8203

El eje está funcionando en este momento en "Control manual" (panel de mando)
16#0001

16#8204

-

Finalizar el "Control manual"; volver a iniciar la or‐
den

El eje no está referenciado
16#0001

16#8205

-

Referenciar el eje con la instrucción "MC_Home";
volver a iniciar la orden

El eje está siendo controlado por el programa de usuario (el error sólo se muestra en el panel de
mando del eje)
16#0001

16#8206

-

Bloquear eje con la instrucción "MC_Power" y se‐
leccionar nuevamente "Control manual" en el panel
de mando del eje

El objeto tecnológico Eje aún no está activado
16#0001

16#8207

-

Active el eje con la instrucción "MC_Power" Ena‐
ble = TRUE, o habilite el eje en el panel de mando
del eje.

Orden rechazada
16#0016

Referenciación activa en curso; no es posible
iniciar otro tipo de referenciación.

Espere a que la referenciación activa finalice o can‐
cele la referenciación activa con una orden de mo‐
vimiento, p. ej., "MC_Halt". A continuación se pue‐
de iniciar el otro tipo de referenciación.

Error de parámetros de bloque
ErrorID

ErrorInfo

16#8400

16#8401

2610

Descripción

Solución

El valor del parámetro "Position" de la instrucción de Motion Control no es válido
16#0002

El valor no tiene un formato numérico válido

16#0005

El valor se encuentra fuera del rango de núme‐
ros (mayor que 1e12)

16#0006

El valor se encuentra fuera del rango de núme‐
ros (menor que -1e12)

Corregir el valor "Position"; volver a iniciar la orden

El valor del parámetro "Distance" de la instrucción de Motion Control no es válido

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#0002

El valor no tiene un formato numérico válido

Corregir el valor "Distance"; volver a iniciar la orden

16#0005

El valor se encuentra fuera del rango de núme‐
ros (mayor que 1e12)

16#0006

El valor se encuentra fuera del rango de núme‐
ros (menor que -1e12)

16#8402

El valor del parámetro "Velocity" de la instrucción de Motion Control no es válido
16#0002

El valor no tiene un formato numérico válido

16#0008

La velocidad es mayor que la velocidad máxima

16#0009

La velocidad es inferior a la velocidad de arran‐
que/parada

16#8403

Corregir el valor "Velocity"; volver a iniciar la orden

El valor del parámetro "Direction" de la instrucción de Motion Control no es válido
16#0011

16#8404

Valor de selección no válido

Corregir el valor de selección; volver a iniciar la or‐
den

El valor del parámetro "Mode" de la instrucción de Motion Control no es válido
16#0011

Valor de selección no válido

Corregir el valor de selección; volver a iniciar la or‐
den

16#0015

Referenciación activa / pasiva no configurada

Corregir la configuración y cargar en el controlador;
habilitar el eje y reiniciar la orden

16#0017

La inversión del sentido en el final de carrera
por hardware está activada aunque los finales
de carrera por hardware están desactivados

● Activar los finales de carrera por hardware
mediante la variable
<Eje>.Config.PositionLimits_HW.Active =
TRUE, reiniciar orden
● Corregir la configuración y cargar en el
controlador; habilitar el eje y reiniciar la orden

El valor del parámetro "StopMode" de la instrucción de Motion Control no es válido

16#8405
16#0011
16#8406

Valor de selección no válido

Corregir el valor de selección; habilitar nuevamente
el eje

Pulsación simultánea de avance y retroceso no permitida
16#0001

16#8407

-

Evite la simultaneidad del estado de señal TRUE
de los parámetros "JogForward" y "JogBackward";
inicie nuevamente la orden.

Cambio del eje en la instrucción de Motion Control "MC_Power" permitido únicamente con eje blo‐
queado
16#0001

-

Bloquear eje activo; a continuación se puede cam‐
biar y habilitar el eje.

Error de configuración
ErrorID

ErrorInfo

16#8600
16#000B
16#8601

Solución

La dirección no es válida

Corregir la configuración de PTO / Pulse Train Out‐
put y cargarla en el controlador

La parametrización del contador rápido (HSC) no es válida
16#000B

16#8602

Descripción

Parametrización del generador de impulsos (PTO) no válida

La dirección no es válida

Corregir la configuración de HSC / High Speed
Counter y cargarla en el controlador

La parametrización de la "salida de habilitación" no es válida

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2611

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#000D

La dirección no es válida

Corregir la configuración y cargarla en el controla‐
dor

16#8603

La parametrización de la "entrada de disponibilidad" no es válida
16#000D

16#8604

16#8605

El valor es menor o igual que 0

Corregir la configuración y cargarla en el controla‐
dor

El valor de "Recorrido por vuelta del motor" no es válido
16#0002
16#000A

16#8606

El valor no tiene un formato numérico válido
El valor es menor o igual que 0

Corregir la configuración y cargarla en el controla‐
dor

El valor de "Velocidad de arranque/parada" no es válido
16#0002

El valor no tiene un formato numérico válido

16#0003

El valor es mayor que el límite de hardware

16#0004

El valor es menor que el límite de hardware

16#0007

La velocidad de arranque/parada es mayor que
la velocidad máxima

16#8607

Corregir la configuración y cargarla en el controla‐
dor

El valor de "Velocidad máxima" no es válido
16#0002

El valor no tiene un formato numérico válido

16#0003

El valor es mayor que el límite de hardware

16#0004
16#8608

Corregir la configuración y cargarla en el controla‐
dor

El valor es menor que el límite de hardware
El valor de "Aceleración" no es válido

16#0002

El valor no tiene un formato numérico válido

16#0003

El valor es mayor que el límite de hardware

16#0004

El valor es menor que el límite de hardware

16#8609

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, acusar el error
con la instrucción "MC_Reset" y volver a iniciar
la orden si fuera necesario

El valor de "Deceleración" no es válido
16#0002

El valor no tiene un formato numérico válido

16#0003

El valor es mayor que el límite de hardware

16#0004

El valor es menor que el límite de hardware

16#860A

2612

Corregir la configuración y cargarla en el controla‐
dor

El valor de "Impulsos por vuelta del motor" no es válido
16#000A

16#860B

La dirección no es válida

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, acusar el error
con la instrucción "MC_Reset" y volver a iniciar
la orden si fuera necesario

El valor de "Deceleración de parada de emergencia" no es válido
16#0002

El valor no tiene un formato numérico válido

16#0003

El valor es mayor que el límite de hardware

16#0004

El valor es menor que el límite de hardware

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"
● Corregir el valor erróneo online, acusar el error
con la instrucción "MC_Reset" y volver a iniciar
la orden si fuera necesario

El valor de posición del final de carrera por software inferior no es válido

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
ErrorID

ErrorInfo

Descripción

Solución

16#0002

El valor no tiene un formato numérico válido

16#0005

El valor se encuentra fuera del rango de núme‐
ros (mayor que 1e12)

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"

16#0006

El valor se encuentra fuera del rango de núme‐ ● Corregir el valor erróneo online, acusar el error
ros (menor que -1e12)
con la instrucción "MC_Reset" y volver a iniciar
la orden si fuera necesario
El valor de posición del final de carrera por soft‐
ware inferior es mayor que el del superior

16#0007
16#860C

El valor de posición del final de carrera por software superior no es válido
16#0002

El valor no tiene un formato numérico válido

16#0005

El valor se encuentra fuera del rango de núme‐
ros (mayor que 1e12)

16#0006

El valor se encuentra fuera del rango de núme‐ ● Corregir el valor erróneo online, acusar el error
ros (menor que -1e12)
con la instrucción "MC_Reset" y volver a iniciar
la orden si fuera necesario

16#860D

● Cargar la configuración sin errores en el
controlador; volver a habilitar el eje con la
instrucción "MC_Power"

La dirección del final de carrera por hardware inferior no es válida
16#000C

La dirección del flanco descendente no es váli‐ Corregir la configuración y cargarla en el controla‐
da
dor

16#000D

La dirección del flanco ascendente no es válida

16#860E

La dirección del final de carrera por hardware superior no es válida
16#000C
16#000D

16#860F

La dirección del flanco descendente no es váli‐ Corregir la configuración y cargarla en el controla‐
da
dor
La dirección del flanco ascendente no es válida
El valor de "Offset del punto de referencia" no es válido

16#0002
16#0005
16#0006
16#8610

El valor no tiene un formato numérico válido
Corregir la configuración y cargarla en el controla‐
El valor se encuentra fuera del rango de núme‐ dor
ros (mayor que 1e12)
El valor se encuentra fuera del rango de núme‐
ros (menor que -1e12)
El valor de "Velocidad de aproximación" no es válido

16#0002
16#0008
16#0009
16#8611

El valor no tiene un formato numérico válido
Corregir la configuración y cargarla en el controla‐
La velocidad es mayor que la velocidad máxima dor
La velocidad es inferior a la velocidad de arran‐
que/parada
El valor de "Velocidad de referenciación" no es válido

16#0002
16#0008
16#0009
16#8612

El valor no tiene un formato numérico válido
Corregir la configuración y cargarla en el controla‐
La velocidad es mayor que la velocidad máxima dor
La velocidad es inferior a la velocidad de arran‐
que/parada
La dirección del sensor del punto de referencia no es válida

16#000C

La dirección del flanco descendente no es váli‐ Corregir la configuración y cargarla en el controla‐
da
dor

16#000D

La dirección del flanco ascendente no es válida

16#8613

En la referenciación activa, la inversión del sentido en el final de carrera por hardware se encuentra
activada, a pesar de que los finales de carrera por hardware no han sido configurados
16#0001

-

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Corregir la configuración y cargarla en el controla‐
dor

2613

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Errores internos
ErrorID

ErrorInfo

Descripción

16#8FFF

Solución

Error interno
16#F0**

-

POWER OFF y POWER ON de la CPU
Si esto no produce el resultado deseado, póngase
en contacto con el Servicio de Atención al Cliente.
Tenga al alcance la siguiente información:
● ErrorID
● ErrorInfo
● Registros del búfer de diagnóstico

Consulte también
Lista de los ErrorID y las ErrorInfos (objetos tecnológicos V4...5) (Página 2578)
Utilizando varios ejes con el mismo PTO (Página 2473)

Leyenda V1...5
Variable

Nombre de la variable

Tipo de datos

Tipo de datos de la variable

Valores

Valor de arranque
(Rango de valores de la variable - valores mínimo a máximo)
Sin una indicación de valores específica rigen los límites del rango de valores del tipo de datos corres‐
pondiente o la indicación bajo "Descripción".

Acceso

2614

Acceso a la variable en el programa de usuario
R

La variable se puede leer en el programa de usuario y en HMI.

RP

La variable se puede leer con la instrucción de Motion Control "MC_ReadParam". El valor
actual de las correspondientes variables se determina al iniciarse la orden.

RW

La variable se puede leer y escribir en el programa de usuario y en HMI. La variable se puede
escribir con la instrucción de Motion Control "MC_WriteParam".

RCCP

La variable se puede leer en el programa de usuario y en HMI, y se actualiza en el punto de
control del ciclo.

WP

Independientemente de la conexión del accionamiento: si el eje está bloqueado (MC_Po‐
wer.Status = FALSE), la variable se puede escribir con la instrucción de Motion Control
"MC_WriteParam".

WP_PD

Si el accionamiento se conecta a través de PROFIdrive/salida analógica: si el eje está blo‐
queado (MC_Power.Status = FALSE), la variable se puede escribir con la instrucción de
Motion Control "MC_WriteParam".

WP_PTO

Si el accionamiento se conecta a través de PTO: si el eje está bloqueado (MC_Power.Status
= FALSE), la variable se puede escribir con la instrucción de Motion Control "MC_WritePa‐
ram".

WD BL

Si el accionamiento se conecta a través de PROFIdrive/salida analógica: La variable se
puede escribir en el valor de arranque de la memoria de carga con la instrucción avanzada
"WRIT_DBL".

-

No se puede utilizar la variable en el programa de usuario.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
W

Descripción

Efectividad de los cambios en el bloque de datos tecnológico
1

Si el accionamiento se conecta a través de PTO: con la activación, el bloqueo o la habilitación
del eje

2

Si el accionamiento se conecta a través de PTO: con la habilitación del eje

3

Después de habilitar el eje (el eje debe encontrarse previamente bloqueado y parado). La
parada del eje se puede comprobar con la variable <Nombre del eje>.StatusBits.Standstill.

4

Tras una parada del eje, con el siguiente inicio de una orden de Motion Control. La parada del
eje se puede comprobar con la variable <Nombre del eje>.StatusBits.Standstill.

5

Si el accionamiento se conecta a través de PTO: con el siguiente inicio de una orden
MC_MoveAbsolute, MC_MoveRelative, MC_MoveVelocity, MC_MoveJog, MC_Halt o
MC_CommandTable o de una orden activa MC_Home (modo = 3).

6

Si el accionamiento se conecta a través de PTO: con la parada de una orden MC_MoveJog

7

Si el accionamiento se conecta a través de PTO: al iniciar una orden de referenciado pasivo

8

Si el accionamiento se conecta a través de PTO: al iniciar una orden de referenciado activo

9

con el reinicio del objeto tecnológico

10

Si el accionamiento se conecta a través de PROFIdrive/salida analógica: Con la siguiente
llamada de MC-Servo [OB91]

Descripción de la variable

El acceso a las variables se realiza por medio de "<TO>.<nombre de variable>". El comodín
<TO> representa el nombre del objeto tecnológico.

Variables del objeto tecnológico Eje V1...3
Variables Config V1...3
La estructura de variables <Nombre del eje>.Config.<Nombre de variable> contiene los
parámetros configurados.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2615

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2614)
Variable

Tipo de
datos

Config.

STRUCT

2616

Valores

Acceso

W

Descripción
TO_Struct_Config

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable

Tipo de
datos

Valores

Acceso

W

Descripción

General.

STRUCT

PTO

DWORD

DW#16#000
00000

-

-

La variable no puede ser evaluada en el
programa de usuario.

HSC

DWORD

DW#16#000
00000

-

-

La variable no puede ser evaluada en el
programa de usuario.

LengthUnit2)

INT

1013

R

-

(de -32768 a
32767)

WP

2

Unidad de medida configurada de los pará‐
metros

DriveInterface.

TO_Struct_General

STRUCT

-1

Impulsos

1005

°

1010

m

1013

mm

1018

ft

1019

in

TO_Struct_DriveInterface

EnableOutput

-

-

-

-

La variable no puede ser evaluada en el
programa de usuario.

ReadyInput

-

-

-

-

La variable no puede ser evaluada en el
programa de usuario.

Mechanics.

STRUCT

TO_Struct_Mechanics

PulsesPerDriveRevolution

DINT

L#1000

R

-

Impulsos por vuelta del motor

LeadScrew

REAL

10.0

R

-

Recorrido por vuelta del motor
(Indicación en la unidad de medida configu‐
rada)

InverseDirection
DynamicLimits.
MinVelocity

BOOL

FALSE

R

-

Invertir el sentido de dirección

STRUCT
REAL

TO_Struct_DynamicLimits
10.0

R

-

Velocidad de arranque/parada del eje
(Indicación en la unidad de medida configu‐
rada)

MaxVelocity

REAL

250.0

R

-

Velocidad máxima del eje
(Indicación en la unidad de medida configu‐
rada)

DynamicDefaults.
Acceleration

STRUCT
REAL

TO_Struct_DynamicDefaults
48.0

RW

1 ,
5,
62)
2)

Aceleración del eje
(Indicación en la unidad de medida configu‐
rada)

Deceleration

REAL

48.0

RW

12), Deceleración del eje
5, 6 (Indicación en la unidad de medida configu‐
rada)

EmergencyDeceleration

REAL

120.0

RW

12), Deceleración de parada de emergencia del
21), eje
5, 6 (Indicación en la unidad de medida configu‐
rada)

JerkActive2)

BOOL

FALSE

RW

1, 5 FALSE La limitación del tirón está desac‐
tivada.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2617

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable

Tipo de
datos

Valores

Acceso

W

Descripción
TRUE

Jerk2)

REAL

192.0

RW

La limitación del tirón está activa‐
da.

1, 5 Tirón durante la rampa de aceleración y de‐
celeración del eje
(Indicación en la unidad de medida configu‐
rada)

PositionLimits_SW.
Active

MinPosition

MaxPosition

STRUCT
BOOL

REAL

REAL

TO_Struct_PositionLimits_SW
FALSE

-1.0E4

1.0E4

RW

RW

RW

1 ,
41),
52),
62)

FALSE Los finales de carrera por software
están desactivados.

12),
41),
52),
62)

Posición del final de carrera por software in‐
ferior

12),
41),
52),
62)

Posición del final de carrera por software
superior

2)

PositionLimits_HW.
Active

MinSwitchedLevel

TRUE

(Indicación en la unidad de medida configu‐
rada)

(Indicación en la unidad de medida configu‐
rada)
TO_Struct_PositionLimits_HW

BOOL

BOOL

FALSE

FALSE

RW

R

12),
31),
41),
52),
62)

FALSE Los finales de carrera por hardwa‐
re están desactivados.

-

FALSE 0 V en la entrada de la CPU signi‐
fica que se ha alcanzado el final de
carrera por hardware inferior.

TRUE

TRUE

Los finales de carrera por hardwa‐
re están activados.

24 V en la entrada de la CPU sig‐
nifica que se ha alcanzado el final
de carrera por hardware inferior.

MinFallingEvent

DWORD

DW#16#000
00000

-

-

La variable no puede ser evaluada en el
programa de usuario.

MinRisingEvent

DWORD

DW#16#000
00000

-

-

La variable no puede ser evaluada en el
programa de usuario.

MaxSwitchedLevel

BOOL

FALSE

R

-

FALSE 0 V en la entrada de la CPU signi‐
fica que se ha alcanzado el final de
carrera por hardware superior.
TRUE

24 V en la entrada de la CPU sig‐
nifica que se ha alcanzado el final
de carrera por hardware superior.

MaxFallingEvent

DWORD

DW#16#000
00000

-

-

La variable no puede ser evaluada en el
programa de usuario.

MaxRisingEvent

DWORD

DW#16#000
00000

-

-

La variable no puede ser evaluada en el
programa de usuario.

Homing.

2618

Los finales de carrera por software
están activados.

STRUCT

TO_Struct_Homing

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable
AutoReversal

Tipo de
datos

Valores

Acceso

W

Descripción

BOOL

TRUE

R1)

-1)

FALSE Se ha desactivado la inversión del
sentido en el final de carrera por
hardware (referenciado activo)

RW

2)

Direction

BOOL

TRUE

R1)
RW

1 ,
82)
2)

-1)
2)

1 ,
82)
2)

TRUE

FALSE Sentido de aproximación negativo
para la búsqueda del sensor del
punto de referencia y sentido de
referenciado positivo (referencia‐
do activo)
TRUE

SideActiveHoming2)

BOOL

TRUE

RW

BOOL

TRUE

RW

BOOL

FALSE

R

-

FastVelocity

SlowVelocity

FallingEvent

REAL

REAL

REAL

DWORD

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

0.0

200.0

40.0

DW#16#000
00000

Referenciado en el lado superior
del sensor del punto de referencia
(referenciado pasivo)

FALSE Referenciado con el flanco de se‐
ñal ascendente del sensor del pun‐
to de referencia (referenciado acti‐
vo)
TRUE

Offset

Referenciado en el lado superior
del sensor del punto de referencia
(referenciado activo)

1, 7 FALSE Referenciado en el lado inferior
del sensor del punto de referencia
(referenciado pasivo)
TRUE

RisingEdge1)

Sentido de aproximación positivo
para la búsqueda del sensor del
punto de referencia y sentido de
referenciado positivo (referencia‐
do activo)

1, 8 FALSE Referenciado en el lado inferior
del sensor del punto de referencia
(referenciado activo)
TRUE

SidePassiveHoming2)

Se ha activado la inversión del
sentido en el final de carrera por
hardware (referenciado activo)

R

-1)

RW

12),
82)

R

-1)

RW

12),
82)

R

-1),

RW

1 ,
82)

-

-

2)

Referenciado con el flanco de se‐
ñal descendente del sensor del
punto de referencia (referenciado
activo). Para ver cómo influye la
variable en el referenciado pasivo
consulte la descripción, en "Confi‐
guración - Referenciado".

Decalaje del punto de referencia/indicación
en la unidad de medida configurada (refe‐
renciado activo)
Velocidad de aproximación/indicación en la
unidad de medida configurada (referencia‐
do activo)
Velocidad de referenciado/indicación en la
unidad de medida configurada (referencia‐
do activo)
La variable no puede ser evaluada en el
programa de usuario.

2619

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable
RisingEvent

Tipo de
datos

Valores

Acceso

W

Descripción

DWORD

DW#16#000
00000

-

-

La variable no puede ser evaluada en el
programa de usuario.

1) Válido solo para la versión tecnológica V1.0
2) Válido a partir de la versión tecnológica V2.0

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)

Variables MotionStatus V1...3
La estructura de variables <Nombre del eje>.MotionStatus.<Nombre de variable> contiene el
estado del movimiento.

Variables
Leyenda (Página 2614)
Variable
MotionStatus.
Position

Tipo de
datos

Valores

Acceso

W

0.0

R

-

STRUCT
REAL

Descripción
TO_Struct_MotionStatus

(de -9.0E15
a 9.0E15)

Posición real del eje
(Indicación en la unidad de medida configu‐
rada)
Si el eje no está referenciado, la variable in‐
dica el valor de posición relativo a la posición
de habilitación del eje.

Velocity

REAL

0.0

R

-

(de -9.0E15
a 9.0E15)
Distance

REAL

0.0

Velocidad real del eje
(Indicación en la unidad de medida configu‐
rada)

R

-

(de -9.0E15
a 9.0E15)

Distancia actual con respecto a la posición
de destino del eje
(Indicación en la unidad de medida configu‐
rada)
El valor de la variable sólo es válido durante
la ejecución de una orden de posicionamien‐
to con "MC_MoveAbsolute", "MC_MoveRe‐
lative" o del panel de mando del eje.

TargetPosition

REAL

0.0
(de -9.0E15
a 9.0E15)

R

-

Posición de destino del eje
(Indicación en la unidad de medida configu‐
rada)
El valor de la variable sólo es válido durante
la ejecución de una orden de posicionamien‐
to con "MC_MoveAbsolute", "MC_MoveRe‐
lative" o del panel de mando del eje.

2620

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Consulte también
Estado de movimiento (Página 2470)
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)

Variables StatusBits V1...3
La estructura de variables <Nombre del eje>.StatusBits.<Nombre de variable> contiene
información sobre el estado del objeto tecnológico.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2621

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2614)
Variable

Tipo de
datos

StatusBits.

STRUCT

2622

Valores

Acceso

W

Descripción
TO_Struct_StatusBits

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable
Activated

Enable

HomingDone

Tipo de
datos

Valores

Acceso

W

Descripción

BOOL

FALSE

R

-

Activación del eje

BOOL

BOOL

FALSE

FALSE

R

R

-

-

FALSE

El eje no está activado.

TRUE

El eje está activado. El eje está co‐
nectado al PTO (Pulse Train Out‐
put) asignado. Los datos del blo‐
que de datos tecnológico se actua‐
lizan cíclicamente.

Estado de habilitación del eje
FALSE

El eje no está habilitado.

TRUE

El eje está habilitado y listo para
aceptar órdenes de Motion Con‐
trol.

Estado de referenciado del eje
FALSE

El eje no está referenciado.

TRUE

El eje está referenciado y puede
ejecutar órdenes de posiciona‐
miento absolutas.

Para realizar un posicionamiento relativo no
es necesario que el eje esté referenciado.
Durante el referenciado activo, el estado es
FALSE.
Durante el referenciado pasivo, el estado
TRUE se mantiene si el eje ya estaba refe‐
renciado previamente.
Done

Error

BOOL

BOOL

FALSE

FALSE

R

R

-

-

Procesamiento de órdenes del eje
FALSE

En el eje hay una orden activa de
Motion Control.

TRUE

En el eje no hay ninguna orden ac‐
tiva de Motion Control.

Estado de error del eje
FALSE

En el eje no hay ningún error.

TRUE

Se ha producido un error en el eje.

Si requiere información más detallada sobre
el error, consulte los parámetros "ErrorID" y
"ErrorInfo" de las instrucciones Motion Con‐
trol en el modo automático.
En el modo manual, la causa detallada del
error se muestra en el campo "Aviso de
error" del panel de mando del eje.
Standstill

PositioningCommand

BOOL

BOOL

FALSE

FALSE

R

R

-

-

Parada del eje
FALSE

El eje está en movimiento.

TRUE

El eje está parado.

Procesamiento de una orden de posiciona‐
miento
FALSE

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

No hay ninguna orden de posicio‐
namiento activa en el eje.

2623

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable

Tipo de
datos

Valores

Acceso

W

Descripción
TRUE

SpeedCommand

Homing

CommandTableActive

ConstantVelocity

Acceleration

Deceleration

ControlPanelActive

2624

BOOL

BOOL

BOOL

BOOL

BOOL

BOOL

BOOL

FALSE

FALSE

FALSE

FALSE

FALSE

FALSE

FALSE

R

R

R

R

R

R

R

-

-

-

-

-

-

-

El eje ejecuta una orden de posi‐
cionamiento.

Procesamiento de una orden con especifica‐
ción de velocidad
FALSE

En el eje no hay ninguna orden ac‐
tiva con especificación de la velo‐
cidad.

TRUE

El eje ejecuta una orden de des‐
plazamiento con especificación de
velocidad.

Procesamiento de una orden de referenciado
FALSE

No hay ninguna orden de referen‐
ciado activa en el eje.

TRUE

El eje ejecuta una orden de refe‐
renciado de la instrucción de Mo‐
tion Control "MC_Home" o del pa‐
nel de mando del eje.

Procesamiento de una tabla de órdenes
FALSE

No hay ninguna tabla de órdenes
activa en el eje.

TRUE

El eje se controla con la instruc‐
ción de Motion Control "MC_Com‐
mandTable".

Velocidad constante
FALSE

El eje se acelera, decelera o está
parado.

TRUE

Se ha alcanzado la velocidad de
consigna. El eje se mueve a velo‐
cidad constante.

Proceso de aceleración
FALSE

El eje se decelera, avanza a velo‐
cidad constante o está parado.

TRUE

El eje se acelera.

Proceso de deceleración
FALSE

El eje se acelera, avanza a veloci‐
dad constante o está parado.

TRUE

El eje se frena.

Estado de activación del panel de mando del
eje
FALSE

El modo de operación "Modo au‐
tomático" está activado. El progra‐
ma de usuario tiene el control so‐
bre el eje.

TRUE

Se ha activado el modo de opera‐
ción "Control manual" en el panel
de mando del eje. El panel de man‐
do del eje tiene el control sobre el

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable

Tipo de
datos

Valores

Acceso

W

Descripción
eje. El eje no puede ser controlado
por el programa de usuario.

DriveReady

BOOL

RestartRequired

BOOL

FALSE

FALSE

R

R

-

-

Estado de operación del accionamiento
FALSE

El accionamiento no está listo. Las
consignas no se ejecutan.

TRUE

El accionamiento está listo. Las
consignas pueden ejecutarse.

Es necesario reiniciar el eje
FALSE

No es necesario reiniciar el eje.

TRUE

Los valores han sido modificados
en la memoria de carga.

Para cargar los valores en la memoria de
trabajo con la CPU en el estado operativo
RUN, es necesario reiniciar el eje. Utilice pa‐
ra ello la instrucción de Motion Control
"MC_Reset".

Consulte también
Bits de estado y error (objetos tecnológicos a partir de V4) (Página 2467)
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)

Variables ErrorBits V1...3
La estructura de variables <Nombre del eje>.ErrorBits.<Nombre de variable> indica errores en
el objeto tecnológico.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2625

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2614)
Variable

Tipo de
datos

ErrorBits.

STRUCT

Valores

Acceso

W

Descripción
TO_Struct_ErrorBits

SystemFault

BOOL

FALSE

R

-

Error interno de sistema

ConfigFault

BOOL

FALSE

R

-

Configuración incorrecta del eje

DriveFault

BOOL

FALSE

R

-

Error en el accionamiento. Fallo de la señal
"Accionamiento listo".

SWLimitMinReached

BOOL

FALSE

R

-

Se ha alcanzado el final de carrera por soft‐
ware inferior.

SWLimitMinExceeded

BOOL

FALSE

R

-

Se ha rebasado el final de carrera por soft‐
ware inferior.

SWLimitMaxReached

BOOL

FALSE

R

-

Se ha alcanzado el final de carrera por soft‐
ware superior.

SWLimitMaxExceeded

BOOL

FALSE

R

-

Se ha rebasado el final de carrera por soft‐
ware superior.

HWLimitMin

BOOL

FALSE

R

-

Se ha aproximado el final de carrera por
hardware inferior.

HWLimitMax

BOOL

FALSE

R

-

Se ha aproximado el final de carrera por
hardware superior.

HWUsed

BOOL

FALSE

R

-

Un segundo eje utiliza el mismo PTO (Pulse
Train Output) y está habilitado con "MC_Po‐
wer".

Consulte también
Bits de estado y error (objetos tecnológicos a partir de V4) (Página 2467)
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)

Variables Internal V1...3
Las variables "Internal" no contienen datos relevantes del usuario; no se puede acceder a
estas variables desde el programa de usuario.

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)

Variables ControlPanel V1...3
Las variables "ControlPanel" no contienen datos relevantes del usuario; no se puede acceder
a estas variables desde el programa de usuario.

2626

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje de posicionamiento V4...5 (Página 2627)

Actualización de las variables del objeto tecnológico
Las informaciones de estado y error del eje mostradas en las variables del objeto tecnológico
se actualizan respectivamente en el punto de control del ciclo.
La modificación de valores realizada en variables de configuración modificables no resulta
eficaz de forma inmediata. Consulte en la descripción detallada de la variable correspondiente
las condiciones bajo las cuales una modificación resulta efectiva.

Variables del objeto tecnológico Eje de posicionamiento V4...5
Variables relativas a los valores de posición y velocidad V4...5
La estructura de variables contiene las consignas y los valores reales de posición y velocidad
del eje.

Variables
Leyenda (Página 2614)
Variable

Tipo de
datos

Valores

Acceso

W

Descripción

Position

REAL

0.0

RCCP,
RP

-

Posición de consigna del eje

(de -9.0E15
a 9.0E15)

(Indicación en la unidad de medida configu‐
rada)
Si el eje no está referenciado, la variable in‐
dica el valor de posición relativo a la posición
de habilitación del eje.

Velocity

ActualPosition

REAL

REAL

0.0

0.0
(de -9.0E15
a 9.0E15)

RCCP,
RP

-

RCCP,
RP

-

Consigna de velocidad lineal del eje
(Indicación en la unidad de medida configu‐
rada)
Posición real del eje
(Indicación en la unidad de medida configu‐
rada)
Si el eje no está referenciado, la variable in‐
dica el valor de posición relativo a la posición
de habilitación del eje.

ActualVelocity

REAL

0.0
(de -9.0E15
a 9.0E15)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

RCCP,
RP

-

Velocidad real del eje
(Indicación en la unidad de medida configu‐
rada)

2627

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Consulte también
Estado de movimiento (Página 2470)
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables Actor V4...5
La estructura de variables <Nombre del eje>.Actor.<Nombre de variable> contiene los
parámetros del accionamiento.

2628

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2614)
Variable

Tipo de
datos

Actor.

STRUCT

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Valores

Acceso

W

Descripción
TO_Struct_Actor

2629

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable
Type

Tipo de
datos

Valores

Acceso

W

Descripción

DINT

1

R

-

Objeto tecnológico Eje de posicionamiento a
partir de V5:

(de 0 a 2)

0

El accionamiento se conecta a tra‐
vés de una salida analógica. Se
regula la posición de todos los mo‐
vimientos del eje.

1

El accionamiento se conecta a tra‐
vés de telegramas PROFIdrive.
Se regula la posición de todos los
movimientos del eje.

2

El accionamiento se conecta a tra‐
vés de una interfaz de impulsos.

Objeto tecnológico Eje de posicionamiento
V4:

InverseDirection

BOOL

DirectionMode

INT

Interface.

FALSE

2

El accionamiento se conecta a tra‐
vés de una interfaz de impulsos.

FALSE

El sentido de movimiento no se in‐
vierte.

TRUE

El sentido de movimiento se invier‐
te.

R

-

WP_PT
O

2

0

R

-

Sentido de giro permitido

(de 0 a 2)

WP_PT
O

2

0

Ambos sentidos

1

Sentido positivo

2

Sentido negativo

STRUCT

TO_Struct_ActorInterface

AddressIn3)

VREF

-

-

-

Dirección de entrada para el telegrama PRO‐
FIdrive (parámetro interno)

AddressOut3)

VREF

-

-

-

Dirección de salida para el telegrama PRO‐
FIdrive (parámetro interno)

EnableDriveOutput

VREF

-

-

-

Salida de habilitación (parámetro interno)

DriveReadyInput

VREF

-

-

-

Entrada de disponibilidad (parámetro inter‐
no)

PTO

DWORD

0

-

-

Salida de impulso (parámetro interno)

DriveParameter.
ReferenceSpeed

STRUCT
3)

REAL

TO_Struct_ActorDriveParameter
3000.0

R

-

Valor de referencia (100 %) para la consigna
de velocidad de giro del accionamiento (con‐
signa n)
La consigna de velocidad de giro se transfie‐
re en el telegrama PROFIdrive como valor
normalizado de -200% a 200% de "Referen‐
ceSpeed".
En la preselección de consigna mediante un
valor analógico, la salida analógica puede
utilizarse en un rango de -117 % a 117 %, si
el accionamiento lo permite.

MaxSpeed3)

2630

REAL

3000.0

R

-

Valor máximo de la consigna de velocidad
de giro del accionamiento (consigna N)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable

Tipo de
datos

Valores

Acceso

W

Descripción
(PROFIdrive: MaxSpeed ≤ 2 × ReferenceS‐
peed
Consigna analógica: MaxSpeed ≤ 1.17 × Re‐
ferenceSpeed)

PulsesPerDriveRevolution

DINT

1000

R

-

(de 1 a
2147483648
)

WP_PT
O

2

Pulsos por vuelta del motor

3) Válido a partir de la versión tecnológica V5.0

Consulte también
Variables del objeto tecnológico Eje V1...3 (Página 2615)
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)

Variables Sensor[1] V4...5
La estructura de variables <Nombre del eje>.Sensor.<Nombre de variable> contiene los
parámetros del encóder.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2631

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2614)
Variable

Tipo de
datos

Sensor.

STRUCT

2632

Valores

Acceso

W

Descripción
TO_Struct_Sensor

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable

Tipo de
datos

Sensor[1].
Type

Valores

Acceso

W

STRUCT
DINT

ARRAY[1..1] TO_Struct_Sensor
0

R

-

(de 0 a 1)
InverseDirection

System

BOOL

DINT

FALSE

1

R

R

-

-

(de 0 a 1)
MountingMode

DINT

0

R

-

(de 0 a 2)
Interface.
AddressIn.

STRUCT
VREF

Descripción

Tipo de encóder (parámetro interno)
0

Incremental

1

Absoluto

Inversión del valor real
FALSE

El valor real no se invierte

TRUE

el valor real se invierte

Sistema de encóder
0

Encóder lineal

1

Encóder rotativo

Modo de montaje del encóder
0

En el eje del motor

2

Sistema de medición externo

TO_Struct_SensorInterface
-

-

-

Dirección de entrada para el telegrama PROFI‐
drive (parámetro interno)

AREA

BYTE

-

-

-

Parámetro interno

DB_NUMBER

UINT

-

-

-

Parámetro interno

OFFSET

UDINT

-

-

-

Parámetro interno

RID

DWORD

-

-

-

Parámetro interno

VREF

-

-

-

Dirección de salida para el telegrama PROFIdri‐
ve (parámetro interno)

AREA

BYTE

-

-

-

Parámetro interno

DB_NUMBER

UINT

-

-

-

Parámetro interno

OFFSET

UDINT

-

-

-

Parámetro interno

RID

DWORD

-

-

-

Parámetro interno

0.001

R

-

Resolución de un encóder lineal (distancia entre
dos rayas del encóder)

R

-

Incrementos por vuelta de un encóder rotativo

R

-

Número de bits para la resolución fina Gx_XIST1
(valor real cíclico del encóder)

R

-

Número de bits para la resolución fina Gx_XIST2
(valor absoluto del encóder)

R

-

Número de vueltas determinables de un encóder
absoluto multivuelta

AddressOut.

Parameter.
Resolution

STRUCT
REAL

TO_Struct_SensorParameter
(de -1.0E12
a 1.0E12)

StepsPerRevolution

UDINT

2048
(de 1 a
8388608)

FineResolutionXist1

UDINT

11
(de 0 a 31)

FineResolutionXist2

UDINT

DeterminableRevolu‐
tions

UDINT

9
(de 0 a 31)

DistancePerRevolution

1
(de 0 a
8388608)

REAL

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

100.0

R

-

0

Encóder incremental

1

Encóder absoluto monovuelta

Recorrido de la carga por vuelta de un encóder
montado externamente

2633

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable

Tipo de
datos

Valores

Acceso

W

Descripción

(de 0.0 a
1.0E12)
ActiveHoming.
Mode

STRUCT
DINT

TO_Struct_SensorActiveHoming
2

R

-

Modo Referenciado activo

(de 0 a 2)

WP_PT
O

2

Objeto tecnológico Eje de posicionamiento a
partir de V5:
0

Marca cero a través de telegrama
PROFIdrive (no PTO)

1

Marca cero a través de telegrama
PROFIdrive y detector de proximidad
(no PTO)

2

Referenciado a través de entrada digi‐
tal

Objeto tecnológico Eje de posicionamiento V4:
2
SideInput

DigitalInputAddress.

BOOL

FALSE

RW

1,
8,
10

Referenciado a través de entrada digi‐
tal

Lado del sensor del punto de referencia que se
utiliza con el referenciado activo
FALSE

Lado inferior

TRUE

Lado superior

VREF

-

-

-

Dirección de entrada simbólica del sensor del
punto de referencia (parámetro interno)

AREA

BYTE

-

-

-

Parámetro interno

DB_NUMBER

UINT

-

-

-

Parámetro interno

OFFSET

UDINT

-

-

-

Parámetro interno

RID

DWORD

-

-

-

Parámetro interno

REAL

0.0

RW

1,
8,
10

Offset del punto de referencia (referenciado ac‐
tivo)

RW

1,
8,
10

Selección del nivel de señal existente en la en‐
trada de la CPU al alcanzarse el sensor del pun‐
to de referencia

HomePositionOffset

(de -1.0E12
a 1.0E12)
SwitchLevel

PassiveHoming.
Mode

BOOL

TRUE

STRUCT
DINT

(Indicación en la unidad de medida configurada)

FALSE

Nivel inferior (Low activo)

TRUE

Nivel superior (High activo)

TO_Struct_SensorPassiveHoming
2

R

-

Modo Referenciado pasivo

(de 0 a 2)

WP_PT
O

2

Objeto tecnológico Eje de posicionamiento a
partir de V5:
0

Marca cero a través de telegrama
PROFIdrive (no PTO)

1

Marca cero a través de telegrama
PROFIdrive y detector de proximidad
(no PTO)

2

Referenciado a través de entrada digi‐
tal

Objeto tecnológico Eje de posicionamiento V4:

2634

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable

Tipo de
datos

Valores

Acceso

W

Descripción
2

SideInput

BOOL

DigitalInputAddress.

FALSE

RW

1,
7,
10

Referenciado a través de entrada digi‐
tal

Lado del sensor del punto de referencia que se
utiliza con el referenciado pasivo
FALSE

Lado inferior

TRUE

Lado superior

VREF

-

-

-

Dirección de entrada simbólica del sensor del
punto de referencia (parámetro interno)

AREA

BYTE

-

-

-

Parámetro interno

DB_NUMBER

UINT

-

-

-

Parámetro interno

OFFSET

UDINT

-

-

-

Parámetro interno

RID

DWORD

-

-

-

Parámetro interno

BOOL

TRUE

RW

1,
7,
10

Selección del nivel existente en la entrada de la
CPU al alcanzarse el sensor del punto de refe‐
rencia

SwitchLevel

FALSE

Nivel inferior (Low activo)

TRUE

Nivel superior (High activo)

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variable Units V4...5
La estructura de variables <Nombre del eje>.Units.LengthUnit contiene las unidades de
medida configuradas de los parámetros.

Variables
Leyenda (Página 2614)
Variable

Tipo de
datos

Units.

STRUCT

LengthUnit

INT

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Valores

Acceso

W

Descripción
TO_Struct_Units

1013

R

-

(de -32768 a
32767)

WP_PT
O

2

Unidad de medida configurada de los pará‐
metros
-1

Impulsos

1005

°

1010

m

1013

mm

1018

ft

1019

in

2635

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variable Mechanics V4...5
La estructura de variables <Nombre del eje>.Mechanics.LeadScrew contiene el recorrido por
vuelta del motor.

Variables
Leyenda (Página 2614)
Variable

Tipo de
datos

Mechanics.

STRUCT

LeadScrew

REAL

Valores

Acceso

W

Descripción
TO_Struct_Mechanics

10.0
(de -1.0E12
a 1.0E12)

R,
WP_PT
O

-

Recorrido por vuelta del motor
(Indicación en la unidad de medida configu‐
rada)

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables Modulo V4...5
La estructura de variables <Nombre del eje>.Modulo.<Nombre de variable> contiene los
ajustes de módulo.

2636

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2614)
Variable

Tipo de
datos

Modulo.

STRUCT

Enable

BOOL

Valores

Acceso

W

Descripción
TO_Struct_Modulo

FALSE

R

-

FALSE

Conversión de módulo desactiva‐
da

TRUE

Conversión de módulo activada
Si la conversión de módulo está
activada, se comprueba si la lon‐
gitud del módulo > 0.0

Length

REAL

360.0

R

-

Longitud de módulo

R

-

Valor inicial de módulo

(de 0.001 a
1.0E12)
StartValue

REAL

0.0
(de -1.0E12
a 1.0E12)

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables DynamicLimits V4...5
La estructura de variables <Nombre del eje>.DynamicLimits.<Nombre de variable> contiene la
configuración de los límites dinámicos.

Variables
Leyenda (Página 2614)
Variable

Tipo de
datos

DynamicLimits.

STRUCT

MaxVelocity

REAL

MinVelocity

REAL

Valores

Acceso

W

Descripción
TO_Struct_DynamicLimits

250.0

10.0

R

-

Velocidad máxima del eje

WP_PT
O

2

(Indicación en la unidad de medida configu‐
rada)

R

-

Velocidad de arranque/parada del eje

WP_PT
O

2

(Indicación en la unidad de medida configu‐
rada)

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2637

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables DynamicDefaults V4...5
La estructura de variables <Nombre del eje>.DynamicDefaults.<Nombre de variable> contiene
la configuración de los ajustes predeterminados de dinámica.

Variables
Leyenda (Página 2614)
Variable

Tipo de
datos

DynamicDefaults.

STRUCT

Acceleration

REAL

Valores

Acceso

REAL

48.0

RW

48.0

RW

(de 0.0 a
1.0E12)
Jerk

REAL

Descripción
TO_Struct_DynamicDefaults

(de 0.0 a
1.0E12)
Deceleration

W

192.0

RW

(de 0.0 a
1.0E12)

1,
5,
6,
10

Ajuste predeterminado de la aceleración del
eje

1,
5,
6,
10

Ajuste predeterminado de la deceleración
del eje

1,
5,
10

Ajuste predeterminado del tirón durante la
rampa de aceleración y deceleración del eje

(Indicación en la unidad de medida configu‐
rada)

(Indicación en la unidad de medida configu‐
rada)

(Indicación en la unidad de medida configu‐
rada)
El tirón está activado si el tirón configurado
es superior a 0.00004 mm/s².

EmergencyDeceleration

REAL

120.0
(de 0.0 a
1.0E12)

RW

1,
5,
6,
10

Deceleración de parada de emergencia del
eje
(Indicación en la unidad de medida configu‐
rada)

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables PositionLimitsSW V4...5
La estructura de variables <Nombre del eje>.PositionLimits_SW.<Nombre de variable>
contiene la configuración de la vigilancia de posición con finales de carrera por software. Con
finales de carrera por software se limita el área de trabajo de un eje de posicionamiento.

2638

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2614)
Variable

Tipo de
datos

PositionLimits_SW.

STRUCT

Active

BOOL

MinPosition

REAL

Valores

Acceso

REAL

Descripción
TO_Struct_PositionLimitsSW

FALSE

-10000.0

RW

RW

(de -1.0E12
a 1.0E12)
MaxPosition

W

10000.0
(de -1.0E12
a 1.0E12)

RW

1,
5,
6,
10

FALSE

Los finales de carrera por software
están desactivados.

TRUE

Los finales de carrera por software
están activados.

1,
5,
6,
10

Posición del final de carrera por software in‐
ferior

1,
5,
6,
10

Posición del final de carrera por software su‐
perior

(Indicación en la unidad de medida configu‐
rada)

(Indicación en la unidad de medida configu‐
rada)

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables PositionLimitsHW V4...5
La estructura de variables <Nombre del eje>.PositionLimits_HW.<Nombre de variable>
contiene la configuración de la vigilancia de posición con finales de carrera por hardware. Con
finales de carrera hardware se limita la zona de desplazamiento de un eje de posicionamiento.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2639

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2614)
Variable

Tipo de
datos

PositionLimits_HW.

STRUCT

Active

BOOL

MinSwitchLevel

BOOL

Valores

Acceso

W

Descripción
TO_Struct_PositionLimitsHW

FALSE

FALSE

RW

1,
5,
6,
10

R

-

WP_PT
O

2

FALSE

Los finales de carrera por hardwa‐
re están desactivados.

TRUE

Los finales de carrera por hardwa‐
re están activados.

Selección del nivel de señal existente en la
entrada de la CPU al alcanzarse el final de
carrera por hardware inferior
FALSE

Nivel inferior (Low activo)

TRUE

Nivel superior (High activo)

MinSwitchAddress

VREF

-

-

-

Dirección de entrada simbólica del final de
carrera por hardware inferior (parámetro in‐
terno)

MaxSwitchLevel

BOOL

FALSE

R

-

WP_PT
O

2

Selección del nivel de señal existente en la
entrada de la CPU al alcanzarse el final de
carrera por hardware superior

-

-

MaxSwitchAddress

VREF

-

FALSE

Nivel inferior (Low activo)

TRUE

Nivel superior (High activo)

Dirección de entrada del final de carrera por
hardware superior (parámetro interno)

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables Homing V4...5
La estructura de variables <Nombre del eje>.Homing.<Nombre de variable> contiene la
configuración para el referenciado del eje.

2640

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2614)
Variable

Tipo de
datos

Homing.

STRUCT

AutoReversal

BOOL

ApproachDirection

ApproachVelocity

BOOL

REAL

Valores

Acceso

REAL

Descripción
TO_Struct_Homing

FALSE

TRUE

200.0

RW

RW

RW

(de 0.0 a
1.0E12)
ReferencingVelocity

W

40.0
(de 0.0 a
1.0E12)

RW

1,
8,
10

1,
8,
10

FALSE

La inversión de sentido en el final
de carrera por hardware está de‐
sactivada.

TRUE

La inversión de sentido en el final
de carrera por hardware está acti‐
vada.

FALSE

Sentido de aproximación negativo
para la búsqueda del sensor del
punto de referencia y sentido de
referenciado negativo

TRUE

Sentido de aproximación positivo
para la búsqueda del sensor del
punto de referencia y sentido de
referenciado positivo

1,
8,
10

Velocidad de aproximación del eje con refe‐
renciado activo

1,
8,
10

Velocidad de referenciado del eje con refe‐
renciado activo

(Indicación en la unidad de medida configu‐
rada)

(Indicación en la unidad de medida configu‐
rada)

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables PositionControl V5
La estructura de variables <Nombre del eje>.PositionControl.<Nombre de variable> contiene
los ajustes de la regulación de posición.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2641

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2614)
Variable

Tipo de
datos

PositionControl.

STRUCT

Kv

REAL

Kpc

REAL

Valores

Acceso

W

Descripción
TO_Struct_PositionControl

10.0

R

-

Ganancia P de la regulación de posición

(de 0.0 a
2147480.0)

WP

10

("Kv" > 0.0)

100.0

R

-

(de 0.0 a
150.0)

WP

10

Precontrol de velocidad porcentual de la re‐
gulación de posición

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables FollowingError V5
La estructura de variables <Nombre del eje>.FollowingError.<Nombre de variable> contiene la
configuración de la vigilancia dinámica de errores de seguimiento.

Variables
Leyenda (Página 2614)
Variable

Tipo de
datos

FollowingError.

STRUCT

EnableMonitoring

MinValue

MaxValue

MinVelocity

2642

BOOL

REAL

REAL

REAL

Valores

Acceso

W

Descripción
TO_Struct_FollowingError

TRUE

R

-

10.0

R

-

(de 0.0 a
1.0E12)

WP_PD 10

100.0

R

(de 0.0 a
1.0E12)

WP_PD 10

10.0

R

(de 0.0 a
1.0E12)

WP_PD 10

-

-

FALSE

Vigilancia de errores de segui‐
miento desactivada

TRUE

Vigilancia de errores de segui‐
miento activada

Error de seguimiento admisible con veloci‐
dades inferiores al valor de "MinVelocity".
Error de seguimiento máximo admisible que
puede alcanzarse a velocidad máxima.
"MinValue" es admisible por debajo de esta
velocidad y se mantiene constante.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables PositioningMonitoring V5
La estructura de variables <Nombre del eje>.PositionMonitoring.<Nombre de variable>
contiene la configuración de la vigilancia de posición al final de un movimiento de
posicionamiento.

Variables
Leyenda (Página 2614)
Variable

Tipo de
datos

PositionMonitoring.

STRUCT

ToleranceTime

REAL

MinDwellTime

REAL

Window

REAL

Valores

Acceso

W

Descripción
TO_Struct_PositionMonitoring

1.0

R

(de 0.0 a
1.0E12)

WP_PD 10

-

Duración máxima permitida desde que se al‐
canza la consigna de velocidad 0 hasta que
se entra en la ventana de posicionamiento.

0.1

R

(de 0.0 a
1.0E12)

WP_PD 10

Tiempo mínimo de permanencia en la ven‐
tana de posicionamiento

1.0

R

Ventana de posicionamiento

(de 0.001 a
1.0E12)

WP_PD 10

-

-

Tiempo de tolerancia

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables StandstillSignal V5
La estructura de variables <Nombre del eje>.StandstillSignal.<Nombre de variable> contiene
la configuración de la señal de velocidad cero.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2643

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2614)
Variable

Tipo de
datos

StandstillSignal.

STRUCT

VelocityThreshold

MinDwellTime

REAL

REAL

Valores

Acceso

W

Descripción
TO_Struct_StandstillSignal

5.0

R

-

(de 0.0 a
1.0E12)

WP_PD 10

Si se rebasa por defecto, empieza el tiempo
mínimo de permanencia.

0.01

R

Tiempo mínimo de permanencia

(de 0.0 a
1.0E12)

WP_PD 10

-

Umbral de velocidad

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables StatusPositioning V4...5
La estructura de variables <Nombre del eje>.StatusPositioning.<Nombre de variable> indica
el estado de un movimiento de posicionamiento.

2644

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2614)
Variable

Tipo de
datos

StatusPositioning.

STRUCT

Distance

REAL

Valores

Acceso

W

Descripción
TO_Struct_StatusPositioning

0.0
(de -9.0E15
a 9.0E15)

RCCP,
RP

-

Distancia actual del eje hasta la posición de
destino
(Indicación en la unidad de medida configu‐
rada)
El valor de la variable solo es válido mientras
se ejecuta la orden de posicionamiento con
"MC_MoveAbsolute", "MC_MoveRelative" o
del panel de mando del eje.

TargetPosition

REAL

0.0
(de -9.0E15
a 9.0E15)

RCCP,
RP

-

Posición de destino del eje
(Indicación en la unidad de medida configu‐
rada)
El valor de la variable solo es válido mientras
se ejecuta la orden de posicionamiento con
"MC_MoveAbsolute", "MC_MoveRelative" o
del panel de mando del eje.

FollowingError

REAL

0.0
(de -9.0E15
a 9.0E15)

RCCP,
RP

-

Error de seguimiento actual del eje
(indicación en la unidad de medida configu‐
rada
FollowingError = 0.0 con conexión del accio‐
namiento a través de PTO (Pulse Train Out‐
put).

Consulte también
Estado de movimiento (Página 2470)
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables StatusDrive V5
La estructura de variables <Nombre del eje>.StatusDrive.<Nombre de variable> indica el
estado del accionamiento.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2645

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2614)
Variable

Tipo de
datos

StatusDrive.

STRUCT

InOperation

BOOL

CommunicationOK

BOOL

Valores

Acceso

W

Descripción
TO_Struct_StatusDrive

FALSE

FALSE

RCCP,
RP

RCCP,
RP

-

-

Estado de operación del accionamiento
FALSE

Accionamiento no preparado. Las
consignas no se ejecutan.

TRUE

Accionamiento listo. Las consig‐
nas pueden ejecutarse.

Comunicación BUS cíclica entre controlador
y accionamiento
FALSE

Comunicación no establecida

TRUE

Comunicación establecida

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables StatusSensor V5
La estructura de variables <Nombre del eje>.StatusSensor.<Nombre de variable> indica el
estado del sistema de medición.

Variables
Leyenda (Página 2614)
Variable

Tipo de
datos

StatusSensor.

STRUCT

State

DINT

Valores

AbsEncoderOffset

BOOL

REAL

0

FALSE

0.0
(de -9.0E15
a 9.0E15)

2646

W

Descripción
TO_Struct_StatusSensor

(de 0 a 2)

CommunicationOK

Acceso

RCCP,
RP

RCCP,
RP

RCCP,
RP

-

-

-

Estado del valor del encóder
0

No válido

1

Esperando estado válido

2

Válido

Comunicación BUS cíclica entre controlador
y encóder
FALSE

Comunicación no establecida

TRUE

Comunicación establecida

Decalaje del punto de referencia hasta el va‐
lor de un encóder absoluto.
El valor se guarda de forma remanente en la
CPU.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables StatusBits V4...5
La estructura de variables <Nombre del eje>.StatusBits.<Nombre de variable> contiene
información sobre el estado del objeto tecnológico.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2647

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2614)
Variable

Tipo de
datos

StatusBits.

STRUCT

2648

Valores

Acceso

W

Descripción
TO_Struct_StatusBits

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable
Activated

Enable

Tipo de
datos

Valores

Acceso

W

Descripción

BOOL

FALSE

RCCP,
RP

-

Activación del eje

BOOL

FALSE

RCCP,
RP

-

AxisSimulation

BOOL

FALSE

RCCP,
RP

-

NonPositionControlled

BOOL

FALSE

RCCP,
RP

-

HomingDone

BOOL

FALSE

RCCP,
RP

-

FALSE

El eje no está activado.

TRUE

El eje está activado. El eje está co‐
nectado al PTO (Pulse Train Out‐
put) asignado. Los datos del blo‐
que de datos tecnológico se actua‐
lizan cíclicamente.

Estado de habilitación del eje
FALSE

El eje no está habilitado.

TRUE

El eje está habilitado y listo para
aceptar órdenes de Motion Con‐
trol.

FALSE

La simulación está desactivada.

TRUE

La simulación está activada.

FALSE

El eje se encuentra en modo de
regulación de posición.

TRUE

El eje no se encuentra en modo de
regulación de posición.

Estado de referenciado del eje
FALSE

El eje no está referenciado.

TRUE

El eje está referenciado y puede
ejecutar órdenes de posiciona‐
miento absolutas.

Para realizar un posicionamiento relativo no
es necesario que el eje esté referenciado.
Durante el referenciado activo, el estado es
FALSE.
Durante el referenciado pasivo, el estado
TRUE se mantiene si el eje ya estaba refe‐
renciado previamente.
Done

Error

BOOL

BOOL

FALSE

FALSE

RCCP,
RP

RCCP,
RP

-

-

Procesamiento de órdenes del eje
FALSE

En el eje hay una orden activa de
Motion Control.

TRUE

En el eje no hay ninguna orden ac‐
tiva de Motion Control.

Estado de error del eje
FALSE

En el eje no hay ningún error.

TRUE

Se ha producido un error en el eje.

Si requiere información más detallada sobre
el error, consulte los parámetros "ErrorID" y
"ErrorInfo" de las instrucciones Motion Con‐
trol en el modo automático.
En el modo manual, la causa detallada del
error se muestra en el campo "Aviso de
error" del panel de mando del eje.
Standstill

BOOL

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

FALSE

RCCP,
RP

-

Parada del eje
FALSE

El eje está en movimiento.

2649

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable

Tipo de
datos

Valores

Acceso

W

Descripción
TRUE

PositioningCommand

VelocityCommand

HomingCommand

CommandTableActive

ConstantVelocity

Accelerating

Decelerating

ControlPanelActive

2650

BOOL

BOOL

BOOL

BOOL

BOOL

BOOL

BOOL

BOOL

FALSE

FALSE

FALSE

FALSE

FALSE

FALSE

FALSE

FALSE

RCCP,
RP

RCCP,
RP

RCCP,
RP

RCCP,
RP

RCCP,
RP

RCCP,
RP

-

-

-

-

-

-

RCCP,
RP

-

RCCP,
RP

-

El eje está parado.

Procesamiento de una orden de posiciona‐
miento
FALSE

No hay ninguna orden de posicio‐
namiento activa en el eje.

TRUE

El eje ejecuta una orden de posi‐
cionamiento de las instrucciones
"MC_MoveRelative"" o "MC_Mo‐
veAbsolute" de Motion Control.

Procesamiento de una orden con especifica‐
ción de velocidad
FALSE

En el eje no hay ninguna orden ac‐
tiva con especificación de la velo‐
cidad.

TRUE

El eje ejecuta una orden de des‐
plazamiento a la velocidad especi‐
ficada de las instrucciones
"MC_MoveVelocity" o "MC_Move‐
Jog" de Motion Control.

Procesamiento de una orden de referenciado
FALSE

No hay ninguna orden de referen‐
ciado activa en el eje.

TRUE

El eje ejecuta una orden de refe‐
renciado de la instrucción
"MC_Home" de Motion Control.

Procesamiento de una tabla de órdenes
FALSE

No hay ninguna tabla de órdenes
activa en el eje.

TRUE

El eje se controla con la instruc‐
ción de Motion Control "MC_Com‐
mandTable".

Velocidad constante
FALSE

El eje se acelera, decelera o está
parado.

TRUE

Se ha alcanzado la velocidad de
consigna. El eje se mueve a velo‐
cidad constante.

Proceso de aceleración
FALSE

El eje se decelera, avanza a velo‐
cidad constante o está parado.

TRUE

El eje se acelera.

Proceso de deceleración
FALSE

El eje se acelera, avanza a veloci‐
dad constante o está parado.

TRUE

El eje se frena.

Estado de activación del panel de mando del
eje

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable

DriveReady

RestartRequired

Tipo de
datos

BOOL

BOOL

Valores

FALSE

FALSE

Acceso

RCCP,
RP

RCCP,
RP

W

-

-

Descripción
FALSE

El modo de operación "Modo au‐
tomático" está activado. El progra‐
ma de usuario tiene el control so‐
bre el eje.

TRUE

Se ha activado el modo de opera‐
ción "Control manual" en el panel
de mando del eje. El panel de man‐
do del eje tiene el control sobre el
eje. El eje no puede ser controlado
por el programa de usuario.

Estado de operación del accionamiento
FALSE

El accionamiento no está listo. Las
consignas no se ejecutan.

TRUE

El accionamiento está listo. Las
consignas pueden ejecutarse.

Es necesario reiniciar el eje
FALSE

No es necesario reiniciar el eje.

TRUE

Los valores han sido modificados
en la memoria de carga.

Para cargar los valores en la memoria de
trabajo con la CPU en el estado operativo
RUN, es necesario reiniciar el eje. Utilice pa‐
ra ello la instrucción de Motion Control
"MC_Reset".
SWLimitMinActive

SWLimitMaxActive

HWLimitMinActive

HWLimitMaxActive

BOOL

BOOL

BOOL

BOOL

FALSE

FALSE

FALSE

FALSE

RCCP,
RP

RCCP,
RP

RCCP,
RP

RCCP,
RP

-

-

-

-

Estado del final de carrera por software infe‐
rior
FALSE

Se respeta la zona de trabajo con‐
figurada del eje.

TRUE

Se ha alcanzado o sobrepasado el
final de carrera por software infe‐
rior.

Estado del final de carrera por software su‐
perior
FALSE

Se respeta la zona de trabajo con‐
figurada.

TRUE

Se ha alcanzado o sobrepasado el
final de carrera por software supe‐
rior.

Estado del final de carrera por hardware in‐
ferior
FALSE

Se respeta la zona de desplaza‐
miento admisible configurado.

TRUE

Se ha alcanzado o sobrepasado el
final de carrera por hardware infe‐
rior.

Estado del final de carrera por hardware su‐
perior
FALSE

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Se respeta la zona de desplaza‐
miento admisible configurado.

2651

Control de movimiento
6.2 Utilizar S7-1200 Motion Control
Variable

Tipo de
datos

Valores

Acceso

W

Descripción
TRUE

Se ha alcanzado o sobrepasado el
final de carrera por hardware su‐
perior.

Consulte también
Bits de estado y error (objetos tecnológicos a partir de V4) (Página 2467)
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables ErrorBits V4...5
La estructura de variables <Nombre del eje>.ErrorBits.<Nombre de variable> indica errores en
el objeto tecnológico.

2652

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2614)
Variable

Tipo de
datos

ErrorBits.

STRUCT

Valores

Acceso

W

Descripción
TO_Struct_ErrorBits

SystemFault

BOOL

FALSE

RCCP,
RP

-

Error interno de sistema

ConfigFault

BOOL

FALSE

RCCP,
RP

-

Configuración incorrecta del eje

DriveFault

BOOL

FALSE

RCCP,
RP

-

Error en el accionamiento. Fallo de la señal
"Accionamiento listo".

SWLimit

BOOL

FALSE

RCCP,
RP

-

Final de carrera por software alcanzado o
sobrepasado

HWLimit

BOOL

FALSE

RCCP,
RP

-

Final de carrera por hardware alcanzado o
sobrepasado

DirectionFault

BOOL

FALSE

RCCP,
RP

-

Sentido de movimiento no permitido

HWUsed

BOOL

FALSE

RCCP,
RP

-

Un segundo eje utiliza el mismo PTO (Pulse
Train Output) y está habilitado con "MC_Po‐
wer".

SensorFault

BOOL

FALSE

RCCP,
RP

-

Error en el sistema del encóder

CommunicationFault

BOOL

FALSE

RCCP,
RP

-

Error de comunicación
Hay interferencias en la comunicación con
un dispositivo conectado.

FollowingErrorFault

BOOL

FALSE

RCCP,
RP

-

PositioningFault

BOOL

FALSE

RCCP,
RP

-

Rebasado por exceso el error de seguimien‐
to máximo admitido
Error de posicionamiento
El eje no se ha posicionado correctamente al
final de un movimiento de posicionamiento.

Consulte también
Bits de estado y error (objetos tecnológicos a partir de V4) (Página 2467)
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Variables ControlPanel V4...5
Las variables "ControlPanel" no contienen datos relevantes para el usuario. En el programa de
usuario no se puede acceder a dichas variables.

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2653

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables Internal V4...5
Las variables "Internal" no contienen datos relevantes para el usuario. En el programa de
usuario no se puede acceder a dichas variables.

Consulte también
Variables del objeto tecnológico Eje de posicionamiento V6...7 (Página 2512)
Variables del objeto tecnológico Eje V1...3 (Página 2615)

Actualización de las variables del objeto tecnológico
Las informaciones de estado y error del eje mostradas en las variables del objeto tecnológico
se actualizan respectivamente en el punto de control del ciclo.
Las modificaciones de valores en las variables de configuración no son efectivas de forma
inmediata. Consulte en la descripción detallada de la variable correspondiente las condiciones
bajo las cuales una modificación resulta efectiva.

Variables del objeto tecnológico Tabla de órdenes V1...3
La estructura de variables <Tabla de órdenes>.Config.Command.Command[x].<Nombre de
variable> contiene los parámetros configurados de la orden.

2654

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.2 Utilizar S7-1200 Motion Control

Variables
Leyenda (Página 2614)
W

Descripción

Tipo de
datos

Config.

STRUCT

TO_Struct_Config

STRUCT

TO_Struct_Command

Command.
Command[x].

Valores

Acceso

Variable

STRUCT

Type

INT

ARRAY[1..32] TO_Struct_Command[x]
0

RW

-

(de 0 a 151)

Tipo de orden
0

Orden "Empty"

2

Orden "Halt"

5

Orden "Positioning Relative"

6

Orden "Positioning Absolute"

7

Orden "Velocity setpoint"

151

Orden "Wait"

Position

REAL

0.0

RW

-

Posición de destino/recorrido de la orden

Velocity

REAL

0.0

RW

-

Velocidad de la orden

Duration

REAL

0.0

RW

-

Duración de la orden

BufferMode

INT

0

RW

-

Valor de "Siguiente paso" de la orden

(de 0 a 1)

StepCode

WORD

0

RW

-

0

"Finalizar orden"

1

"Suavizar transición del movimien‐
to"

Código de paso de la orden

Consulte también
Variables del objeto tecnológico Tabla de órdenes V4...5 (Página 2655)
Variables del objeto tecnológico Tabla de órdenes V6 (Página 2553)

Variables del objeto tecnológico Tabla de órdenes V4...5
La estructura de variables <Tabla de órdenes>.Command[n].<Nombre de variable> contiene
los parámetros configurados de la orden.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2655

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Variables
Leyenda (Página 2614)
Variable

Tipo de
datos

Command[n].

STRUCT

Type

INT

Valores

Acceso

W

Descripción
ARRAY[1..32] TO_Struct_Command[n]

0

RW

-

(de 0 a 151)

Tipo de orden
0

Orden "Empty"

2

Orden "Halt"

5

Orden "Positioning Relative"

6

Orden "Positioning Absolute"

7

Orden "Velocity setpoint"

151

Orden "Wait"

Position

REAL

0.0

RW

-

Posición de destino/recorrido de la orden

Velocity

REAL

0.0

RW

-

Velocidad de la orden

Duration

REAL

0.0

RW

-

Duración de la orden

NextStep

INT

0

RW

-

Modo para la transición a la siguiente orden

(de 0 a 1)

StepCode

WORD

0

RW

-

0

"Finalizar orden"

1

"Suavizar transición del movimien‐
to"

Código de paso de la orden

Consulte también
Variables del objeto tecnológico Tabla de órdenes V1...3 (Página 2654)
Variables del objeto tecnológico Tabla de órdenes V6 (Página 2553)

6.3

Control de movimiento (S7-300, S7-400)

6.3.1

Principios básicos para la lectura del recorrido

6.3.1.1

¿Qué es la lectura del recorrido?

Lectura del recorrido
La lectura del recorrido es la detección de los valores reales que están normalizados en
unidades de longitud.

2656

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
En función del encóder utilizado existen las siguientes diferencias:
● Con encóder incremental
El módulo cuenta las señales del encóder incremental. Para crear un punto de referencia
para la posición del encóder, antes de la lectura del recorrido es preciso realizar una
búsqueda del punto de referencia. Por ejemplo, el contador puede ponerse en una marca
de referencia a "0".
Después de la búsqueda del punto de referencia (con eje sincronizado) el estado del
contador es una medida para la posición actual.
● Con encóders absolutos
No es preciso realizar una búsqueda del punto de referencia. La señal emitida corresponde
a un posición fija.
Los valores calculados pueden procesarse de inmediato en el programa de usuario. De este
modo es posible la respuesta directa a los valores del sensor desde sistemas en movimiento.

6.3.1.2

Lectura de los valores del sensor

Descripción
El encóder absoluto transfiere sus valores de encóder en telegramas al módulo. La
transferencia de los telegramas es iniciada por el módulo.
● En el modo no isócrono la lectura de los valores del sensor se desarrolla de forma libre.
● En el modo isócrono la lectura de los valores del sensor se efectúa de forma síncrona
respecto al ciclo de bus en cada Ti.

Lectura libre de los valores del sensor:
El módulo hace que se transfiera un telegrama cada vez que termine el temporizador
monoestable parametrizado.
El módulo procesa de forma asíncrona con respecto a estos telegramas libres el valor leído del
encóder en el ciclo de su tasa de actualización.
De ahí resulta que si elegimos una lectura asíncrona de los valores del sensor obtendremos
valores de distinta antigüedad. La diferencia entre la antigüedad máxima y mínima es el jitter.

Lectura de los valores del sensor en modo isócrono
La lectura isócrona de los valores del sensor se ajusta automáticamente cuando el sistema de
bus y el módulo periférico funcionan de forma sincronizada.
El módulo inicia la transmisión de un telegrama en cada ciclo de bus en el instante Ti.
El módulo procesa el valor transferido del encóder de forma síncrona con el ciclo de bus.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2657

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

6.3.1.3

Convertidor Gray/Dual

Convertidor Gray/Dual
El parámetro "Convertidor Gray/Dual" permite determinar el tratamiento del código
suministrado por el encóder:
● En el ajuste "Gray", el valor suministrado por el encóder absoluto en código gray se
convierte a código dual.
● En el ajuste "Dual" no se altera el valor procedente del sensor.
Nota
Si se ha seleccionado el ajuste "Gray", el módulo convierte siempre todo el valor del encóder
(13 a 25 bits). Debido a ello, los bits especiales antepuestos influyen en el valor del sensor y
podrían falsearse eventualmente los bits agregados.

6.3.1.4

Valor del sensor y normalización

Valor del sensor y normalización
El valor transmitido por el encóder incluye la posición del encóder absoluto. Según el encóder
utilizado, además de su posición se transmiten otros bits, situados delante y detrás de la
posición del encóder.
Para que el módulo pueda determinar la posición del encóder, se debe especificar lo siguiente:
● Tipo de encóder
● Número de bits a la derecha
● Incrementos/Vuelta del encóder
Con la normalización se especifica la representación de los valores del sensor en la interfaz de
realimentación.
● Con la entrada "Número de bits a la derecha = 1, 2 … 12" (con SM 338) o la "normalización
activada" (con ET 200S 1SSI) se especifica que los bits irrelevantes del valor del encóder
sean desplazados. El valor del encóder se alinea a la derecha en el área de direcciones
(véase ejemplo siguiente).
● Con la entrada "Número de bits a la derecha = 0" (con SM 338) o la "normalización
desactivada" (con ET 200S 1SSI) se especifica que los bits pospuestos se mantengan y se
utilicen para la evaluación.
Esto puede resultar útil si utiliza un encóder absoluto que, en los bits pospuestos, transfiere
informaciones (consulte las indicaciones del fabricante) y desea evaluar dichas
informaciones. Tenga en cuenta a tal fin las informaciones sobre el convertidor Gray/Dual
(Página 2658).

Ejemplo para la normalización de un valor del encóder
Preajustes:

2658

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Se utiliza un encóder monovuelta con 29 (equivale a 9 bits) = 512 incrementos/vuelta de
encóder (resolución / 360°) con la siguiente parametrización:
● Tipo de encóder: SSI-13 Bit
● Número de bits a la derecha: 4 dígitos
● Incrementos/vuelta del encóder: 512
La figura siguiente muestra la ubicación de los bits relevantes antes y después de la
normalización.

$QWHVGHODQRUPDOL]DFLµQYDORUGHOFDSWDGRUUHJLVWUDGRF¯FOLFDPHQWH
3DODEUDGREOHGHGDWRV

                            ; ; ; ;
%LWVUHOHYDQWHV



%LWVWUDQVIHULGRV

'HVSX«VGHODQRUPDOL]DFLµQYDORUGHOHQFRGHU
3DODEUDGREOHGHGDWRV


                               
%LWVUHOHYDQWHV

5HVXOWDGRVHKDQVXSULPLGRORVELWVGHD G¯JLWRVLGHQWLILFDGRVPHGLDQWH[ 

6.3.2

Utilizar SM 338

6.3.2.1

Asignación de terminales del conector frontal del SM 338

Reglas de cableado
Al realizar el cableado del módulo, observe las siguientes reglas:
● La masa de la alimentación del sensor no está separada galvánicamente respecto a la
masa de la CPU. Por consiguiente, hay que conectar el pin 2 del SM 338 (M) con baja
impedancia a la masa de la CPU.
● Los conductores de sensor (pins de 3 a 14) deben estar apantallados y trenzados por pares.
Aplicar el blindaje en ambos extremos.
Para el apantallamiento del cable en el SM 338, utilice el elemento de contacto de pantalla
(referencia: 6ES7390-5AA00-0AA0).
● Si se rebasa la máxima intensidad de salida (900 mA) de la alimentación del encóder, es
necesario conectar una tensión de alimentación externa.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2659

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Asignación de terminales del conector frontal y esquema de principio
La figura siguiente muestra la asignación de terminales del conector frontal del SM 338 y el
esquema de principio.




9LJLODQFLDGH
WHQVLµQ

6)

3URWHFFLµQFRQWUD
FRUWRFLUFXLWRV



/



0

6%XVGHIRQGR



''DWRV


56 


''DWRV
66,

''DWRV


/µJLFD



''DWRV
66,

''DWRV




''DWRV
66,


',
',

&5HORM
&5HORM




&5HORM
&5HORM




9

&5HORM
&5HORM
', HQWUDGDGLJLWDO
', HQWUDGDGLJLWDO




'&9 HQFµGHU




'&9 HQFµGHU
0 HQFµGHU



0 HQFµGHU



①
②
③

2660

Indicador de error - rojo
Enlace a la masa de CPU
Conductores trenzados por pares

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

6.3.2.2

Configurar SM 338

6.3.2.3

Parametrizar SM 338

Modo de operación
Activación del Fast Mode
Fast Mode
El Fast Mode se activa en las correspondientes casillas de verificación.
En el Fast Mode el módulo trabaja con una captación de valores de encóder más rápida y una
interfaz de respuesta comprimida. La función FREEZE no es posible.

Operación sincronizada
Requisitos de hardware
Para el modo isócrono del SM 338 necesita lo siguiente:
● la CPU debe soportar el modo isócrono
● el maestro DP debe soportar el ciclo de bus equidistante
● el módulo de interfaz IM 153-x debe soportar el modo isócrono

Propiedades del SM 338 en el modo isócrono
Según la parametrización del sistema, el SM 338 funciona o bien en modo no isócrono o bien
en modo isócrono.
En modo isócrono se intercambian los datos entre el maestro DP y el SM 338 con sincronismo
de reloj respecto al ciclo PROFIBUS DP.
En modo isócrono son coherentes los 16 bytes de la interfaz de respuesta.
Si se pierde el modo isócrono debido a una anomalía o bien por fallar o retrasarse el Global
Control (GC), el SM 338 reanuda en el próximo ciclo el modo isócrono sin ninguna reacción por
este error.
En caso de perderse el sincronismo de cadencias no es actualizada la interfaz de respuesta.
Nota
Los principios básicos del modo isócrono se describen en el manual de funciones Isochrone
Mode (http://support.automation.siemens.com/WW/view/en/15218045).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2661

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Habilitación
Activación de la alarma de diagnóstico
Alarma de diagnóstico
Las alarmas de diagnóstico no están preajustadas, es decir que están bloqueadas sin la
activación correspondiente.
Las alarmas de diagnóstico se activan en la correspondiente casilla de verificación.
En caso de haber habilitado alarmas de diagnóstico, los eventos de error entrantes (primera
aparición del error) y los eventos de error salientes (aviso tras eliminarse todos los errores) se
notifican a través de alarmas (Página 2667).
La CPU interrumpe la ejecución del programa de usuario y procesa el OB de alarma
diagnóstico.
La información de diagnóstico es coherente mientras actúa el OB de alarma de diagnóstico.
Tras abandonarse el OB de alarma de diagnóstico, la alarma de diagnóstico se confirma en el
módulo.

Entrada de encóder n
Seleccionar tipo de encóder
Tipo de encóder
El SM 338 admite los siguientes tipos de encóder:
● Encóder absoluto (SSI) con una longitud de telegramas de 13 bits
● Encóder absoluto (SSI) con una longitud de telegramas de 21 bits
● Encóder absoluto (SSI) con una longitud de telegramas de 25 bits
Encontrará el tipo de encóder en los datos técnicos del encóder absoluto que utilice.
Con la selección "Sin encóder" la entrada de encóder está desactivada.

Selección del tipo de código
Tipo de código
Con el parámetro "Tipo de código" se determina el tratamiento del código que proporciona el
encóder.
● Con el ajuste "Gray", el valor suministrado por el encóder absoluto en código gray se
convierte a código dual.
● Con el ajuste "Dual", el valor proporcionado por el encóder permanece invariable.

2662

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Seleccionar velocidad de transferencia
Velocidad de transferencia
Con la "Velocidad de transferencia" se determina la velocidad de la transmisión de datos del
encóder SSI al SM 338.
Seleccione la velocidad de transferencia deseada en la lista desplegable.
Tenga en cuenta la relación entre la longitud del cable y la velocidad de transferencia:
● hasta máx. 320 m → 125 kHz
● hasta máx. 160 m → 250 kHz
● hasta máx. 60 m → 500 kHz
● hasta máx. 20 m → 1 MHz

Seleccionar tiempo monoestable
Tiempo monoestable
El tiempo monoestable es el tiempo de pausa entre 2 telegramas SSI.
El tiempo monoestable parametrizado debe ser mayor que el tiempo monoestable del encóder
absoluto utilizado (ver los datos técnicos del fabricante).
Al valor parametrizado se suma además el tiempo 2 × (1/velocidad de transferencia). Con una
velocidad de transferencia de 125 kHz, con un tiempo monoestable parametrizado de 16 μs en
realidad es efectivo un tiempo monoestable de 32 μs.
Para el tiempo monoestable del encóder absoluto se aplica la siguiente limitación:
(1/velocidad de transferencia) < tiempo monoestable del encóder absoluto < 64 μs + 2 × (1/
velocidad de transferencia)
Seleccione el tiempo monoestable correspondiente en la lista desplegable.
La indicación del tiempo monoestable es relevante para la captación de valores de encóder
asíncrona.

Introducir número de bits a la derecha
Número de bits a la derecha [0..12]
Para determinar la posición del encóder y detectar correctamente el sentido del movimiento del
encóder, el SM 338 necesita el número de bits a la derecha.
Encontrará este valor en los datos técnicos del encóder absoluto que utilice.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2663

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Selección de incrementos/vuelta
Incrementos/vuelta
Como máximo están disponibles 13 bits para los incrementos/vuelta. De acuerdo con la
indicación "Número de bits a la derecha (Página 2663)" se calcula automáticamente el número
resultante de incrementos/vueltas.

Selección de la entrada digital para la función FREEZE
Función FREEZE
La función FREEZE sirve para "congelar" los valores de encóder actuales del SM 338. Esta
función FREEZE está acoplada a las entradas digitales DI 0 y DI 1 del SM 338.
La congelación es iniciada por un cambio de flanco (flanco ascendente) en la entrada digital
DI 0 o DI 1. Un valor de encóder congelado se identifica por estar activado el bit 31 (dirección
de salida). A través de una entrada digital es posible congelar uno, dos o tres valores del
encóder.
Los valores de captador se conservan hasta que concluye la función FREEZE, siendo así
evaluables en función de los eventos.

Activación de la función FREEZE
La función FREEZE se debe activar al efectuar la parametrización.
Para ello seleccione la entrada digital en la que un flanco ascendente congela el valor de
encóder.
● desactivar (el valor de encóder no se congela)
● DI 0
● DI 1

Conclusión de la función FREEZE
La función FREEZE se debe concluir tras cada entrada de captador. Puede confirmar la
función en el programa de usuario seteando el bit 0, 1 o el 2 con la operación T PAB "xyz" de
acuerdo con la entrada de encóder (ver ejemplo de programa (Página 2665)).
Tras la cancelación se borra el bit 31 del respectivo valor de encóder y vuelven a actualizarse
los valores de encóder. Para congelar nuevamente los valores de captador, basta con borrar
el bit de cancelación en la dirección de salida del módulo.

2664

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
En modo isócrono se procesa la cancelación en el instante To. A partir de ese instante es
posible congelar nuevamente los valores de captador a través de las entradas digitales.
Nota
La función FREEZE se confirma automáticamente si se reparametriza la correspondiente
entrada de encóder con valores diferentes.
En caso de parámetros idénticos, la función FREEZE permanece inalterada.

Direccionamiento del SM 338
Áreas de datos para los valores de captador
Tanto las entradas como las salidas del SM 338 son direccionadas a partir de la dirección inicial
del módulo. La dirección de entrada y la de salida se determinan al configurar el SM 338.

Direcciones de entrada
La tabla siguiente muestra las direcciones de entrada del módulo SM 338.
Entrada de capta‐ Dirección de entrada (de la configuración) + offset de dirección
dor
0

"Dirección inicial del módulo"

1

"Dirección inicial del módulo" + offset de dirección de 4 bytes

2

"Dirección inicial del módulo" + offset de dirección de 8 bytes

Estructura de la palabra doble de datos en Standard Mode
La tabla siguiente muestra, por entrada de encóder, la estructura de la palabra doble de datos
en Standard Mode.




)5((=(



9DORUGHOFDSWDGRUGHELWVHQFµGLJRJUD\RELQDULR

 (OYDORUGHOFDSWDGRUQRHVW£FRQJHODGR(OYDORUVHDFWXDOL]DSHUPDQHQWHPHQWH
 (OYDORUGHOFDSWDGRUHVW£FRQJHODGR(OYDORUSHUPDQHFHFRQVWDQWHKDVWDHODFXVH

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2665

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Estructura de la palabra doble de datos en Fast Mode
La tabla siguiente muestra, por entrada de encóder, la estructura de la palabra doble de datos
en Fast Mode.








9DORUGHOFDSWDGRUGHELWVHQFµGLJRJUD\RELQDULR

(VWDGRHQWUDGDGLJLWDO
 )DOORFROHFWLYR HUURUGHOFDSWDGRUHUURUWHQVLµQDX[LOLDUH[W
 (UURUGHSDUDPHWUL]DFLµQ
 /LVWRSDUDHOVHUYLFLR YDORUHVGHUHWRUQRY£OLGRV

En el bit 27 (estado de la entrada digital) de la palabra doble de datos de la entrada de
encóder 0 se indica el estado de la entrada digital DI 0, en tanto que en la palabra doble de
datos de la entrada de encóder 1 se indica el estado de la entrada digital DI 1.
En la palabra doble de datos de la entrada de encóder 2 el bit 27 siempre es = 0.

Datos de salida en Standard Mode
La figura siguiente muestra la estructura de los datos de salida en Standard Mode.




'LUHFFLµQLQLFLDOGHOPµGXOR

$FXVHGHODIXQFLµQ)5((=(
%LW HQWUDGDGHFDSWDGRU
%LW HQWUDGDGHFDSWDGRU
%LW HQWUDGDGHFDSWDGRU

En el Fast Mode no se soportan datos de salida.

Lectura de áreas de datos
Puede leer las áreas de datos en su programa de usuario con la operación L PED "xyz".

Ejemplo de programa para el acceso a valores de encóder y utilización de la función FREEZE
Ud. desea leer el valor del encóder en sus entradas y evaluarlo. La dirección inicial del módulo
es 256.

2666

AWL

Explicación

L PED256

// Leer valor del encóder en el área de direcciones para la entrada de encóder 0

T MD 100

// Guardar el valor del encóder en la palabra doble de marcas

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
AWL

Explicación

AD W#16#1FFFFFF

// conectar lógicamente con "Y" los 25 bits inferiores para inhibir por completo los 7 bits superiores

T MD 120

// El valor del encóder sin FREEZE u otros bits de estado también pueden utilizarse en Fast Mode, debido a que sólo se visualizan 25 bits

A M 100.7

// Estado FREEZE para su posterior acuse

= M 99.0

// Determinar y guardar

L PID 260

// Leer valor del encóder en el área de direcciones para la entrada de encóder 1

T MD 104

// Guardar el valor del encóder en la palabra doble de marcas

AD W#16#1FFFFFF

// conectar lógicamente con "Y" los 25 bits inferiores para inhibir por completo los 7 bits superiores

T MD 124

// El valor del encóder sin FREEZE u otros bits de estado también pueden utilizarse en Fast Mode, debido a que sólo se visualizan 25 bits

A M 104.7

// Estado FREEZE para su posterior acuse

= M 99.1

// Determinar y guardar

L PID 264

// Leer valor del encóder en el área de direcciones para la entrada de encóder 2

T MD 108

// Guardar el valor del encóder en la palabra doble de marcas

AD W#16#1FFFFFF

// conectar lógicamente con "Y" los 25 bits inferiores para inhibir por completo los 7 bits superiores

T MD 128

// El valor del encóder sin FREEZE u otros bits de estado también pueden utilizarse en Fast Mode, debido a que sólo se visualizan 25 bits

A M 108.7

// Estado FREEZE para su posterior acuse

= M 99.2

// Determinar y guardar

L MB 99

// Cargar el estado FREEZE y

T PQB 256

// acusarlo (SM 338: dirección de salida 256)

Después pueden seguir procesándose los valores de encóder del área de marcas MD 100, MD
104 y MD 108. El valor del encóder aparece en los bits de 0 a 30 de la palabra doble de marcas.

6.3.2.4

SM 338: Diagnóstico online

Diagnóstico del SM 338
El SM 338 ofrece avisos de diagnóstico. Es decir, el SM 338 pone siempre a disposición todos
los avisos de diagnóstico sin intervención del usuario.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2667

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Acciones después del aviso de diagnóstico
Cada aviso de diagnóstico provoca las acciones siguientes:
● El aviso es registrado en el búfer de diagnóstico del módulo y retransmitido a la CPU.
● Se enciende el LED SF del módulo.
● Si ha parametrizado "Habilitar alarmas de diagnóstico (Página 2662)", se activa una alarma
de diagnóstico y se llama el OB de alarma de diagnóstico.

Lectura de avisos de diagnóstico
Los avisos de diagnóstico detallados se pueden leer mediante instrucciones en el programa de
usuario.
La causa del error se puede mostrar en el diagnóstico del módulo.

Aviso de diagnóstico mediante el LED SF
El SM 338 señaliza errores a través de su LED SF (LED de error agrupado). El LED SF se
enciende tan pronto como el SM 338 activa un aviso de diagnóstico. y se apaga tras haberse
eliminado todos los errores.
El LED SF se enciende también en caso de fallos externos (cortocircuito de la alimentación del
encóder), independientemente del estado de la CPU (con RED CON).
El LED SF se enciende brevemente en el arranque durante el autodiagnóstico del SM 338.

Avisos de diagnóstico del SM 338
La tabla siguiente muestra los avisos de diagnóstico del SM 338.
Aviso de diagnóstico

2668

LED

Validez del diagnóstico

Fallo del módulo

SF

Módulo

Error interno

SF

Módulo

Error externo

SF

Módulo

Error de canal existente

SF

Módulo

Falta tensión auxiliar externa

SF

Módulo

Módulo no parametrizado

SF

Módulo

Parámetros erróneos

SF

Módulo

Información de canal existente

SF

Módulo

Temporizador de vigilancia (watch dog) ac‐
tivado

SF

Módulo

Error de canal existente

SF

Canal (entrada del captador)

Error de configuración/parametrización

SF

Canal (entrada del captador)

Error de canal externo (error del captador)

SF

Canal (entrada del captador)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

causas de anomalía y remedios
La tabla siguiente muestra causas de error y remedios en caso de que aparezcan avisos de
diagnóstico del SM 338.
Aviso de diagnóstico

Causa posible

Fallo del módulo

Se presentó una anomalía cualquiera detec‐
tada por el módulo.

Error interno

El módulo detectó un error dentro del sistema
de automatización.

Error externo

El módulo detectó un error fuera del sistema
de automatización.

Error de canal existente

Indica que sólo están defectuosos determina‐
dos canales.

Remedio

Falta tensión auxiliar exter‐ Falta la tensión de alimentación L+ del módu‐ Llevar la alimentación L+
na
lo.
Módulo no parametrizado

El módulo tiene que saber si debe operar me‐ Este aviso permanece desde RED CON hasta
diante parámetros predeterminados por parte concluir la transmisión de los parámetros des‐
del sistema o con sus propios parámetros.
de la CPU; en caso dado, parametrizar el mó‐
dulo.

Parámetros erróneos

Un parámetro o combinación de parámetros
no es plausible.

Información de canal exis‐
tente

Se presentó un error de canal; el módulo pue‐
de proporcionar más información de canal.

Temporizador de vigilancia
(watch dog) activado

Temporalmente altas perturbaciones electro‐
magnéticas

Error de canal existente

En una entrada de captador se presentó una
anomalía cualquiera detectada por el módulo.

Error de configuración/
parametrización

Parámetro erróneo transferido al módulo.

Reparametrizar el módulo

Error de canal externo
(error del captador)

Rotura de hilo en el cable del captador, cable
del captador no conectado o captador defec‐
tuoso.

Revisar los captadores conectados

6.3.3

Utilizar ET 200S 1SSI

6.3.3.1

Asignación de terminales del 1SSI

Reparametrizar el módulo

Eliminar las perturbaciones

Reglas de cableado
Los cables (bornes 1 y 5 y bornes 4 y 8) deben estar apantallados y deben ser de par trenzado.
La pantalla tiene que hacer contacto por ambos extremos. Para ello se debe usar el elemento
de contactado de pantallas (ver el anexo de las instrucciones de servicio Sistema de periferia
descentralizada ET 200S (http://support.automation.siemens.com/WW/view/es/1144348)).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2669

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Asignación de terminales del 1SSI
La tabla siguiente muestra la asignación de terminales para el 1SSI.
Vista

Asignación de terminales

Observaciones
Bornes 1 a 8:

83

'1

&03



70(6\(066,

(6
'%$%

'

 '



9'& 

 9'&

0 

 ',

&

 &



83

'1

&03



&DEOHVGH
SDUWUHQ]DGR

'

'



9'& 
0





Datos del encóder SSI 1)

2/6:

Alimentación para encóder absoluto e in‐
terruptor 2)

3:

Tierra del bastidor

7:

Entrada digital Función de congelación

4/8:

Reloj SSI (línea reloj) 1)

9'&
66,

0

&

&DEOHVGH
SDUWUHQ]DGR

&

70(6$\(066,

(6
'%$%

'

1/5:

'

 9'&
 ',

&


$
$8; 

 &
$
 $8;

$
$8; 

$
 $8;

'

&DEOHVGH
SDUWUHQ]DGR

'

9'&
66,

0

&

&

&DEOHVGH
SDUWUHQ]DGR

Asegúrese durante el cableado de que la polaridad sea correcta. De lo contrario se notificará un error del encóder absoluto.
Señales según RS 422

1)

2)

A prueba de cortocircuitos, máx. 0,5 A.

2670

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

6.3.3.2

Configurar y parametrizar 1SSI

En servicio
Seleccionar modo de operación
Modo de servicio
Al preseleccionar un modo de operación se elige la funcionalidad con la que se utilizará el 1SSI.
Modo de servicio

Descripción

Modo estándar (Pá‐
gina 2671)

Modo de operación estándar del 1SSI con funcionalidad completa:
● Normalización del valor del encóder
● Inversión del sentido de giro para adaptar el sentido de giro del encóder
absoluto al eje.
● Modo de lectura de los valores del sensor seleccionable:
–

libre

–

sincronizado con la tasa de actualización

● Consideración de la velocidad máxima de muestreo del encóder (p. ej. en
caso de encóders ultrasónicos) en modo isócrono
● Señal de vida en modo isócrono
● Posibilidad de comprobar la paridad del valor del encóder
● Convertidor Gray/Dual
● Función de congelación para congelar el valor del encóder actual
● Función de comparación entre el valor del encóder actual y los valores de
comparación que pueden cargarse
Este modo de operación resulta adecuado para vigilar o reconocer puntos de
recorrido, así como para medir longitudes, captar bordes y sincronizar piezas de
trabajo.
Modo Fast (Pági‐
na 2683)

En este modo de operación el 1SSI tiene una funcionalidad comprimida. No
están disponibles las funciones de congelación y comparación.
Este modo de operación resulta adecuado para leer rápidamente los valores del
sensor, así como para aplicaciones de regulación, como las regulaciones de
posición con recorrido como valor real.

Parámetros para el modo estándar
Activar diagnóstico de grupo
Diagnóstico de grupo
Si activa el diagnóstico de grupo en su parametrización, se realiza un diagnóstico relativo al
canal.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2671

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Seleccionar lectura de los valores del sensor
Descripción
Para la lectura de los valores del sensor existen las siguientes alternativas:
● Lectura libre de los valores del sensor
● Lectura síncrona de los valores del sensor
● Lectura de los valores del sensor en modo isócrono
La lectura libre o síncrona de los valores del sensor se selecciona en la parametrización con
el parámetro "Detección". Este parámetro actúa únicamente en el modo no isócrono.
Obtendrá una lectura de los valores del sensor en modo isócrono cuando el 1SSI funcione en
modo isócrono. El parámetro "Detección" no se evaluará en este caso.
La tabla siguiente muestra estas relaciones de la lectura de los valores del sensor.
En servicio

Parámetro "Detección"

Lectura de los valores del sensor

Modo no isócrono

libre

Lectura libre de los valores del sensor

isócrono

Lectura síncrona de los valores del sen‐
sor

- (irrelevante)

Lectura de los valores del sensor en
modo isócrono

Modo isócrono

Lectura libre de los valores del sensor:
En la lectura libre de los valores del sensor se obtiene la máxima precisión con la función
de congelación del valor del encóder (Página 2677).
El 1SSI hace que se transfiera un telegrama cada vez que termine el tiempo monoestable
(Página 2674) parametrizado.
El 1SSI procesa de forma asíncrona con respecto a estos telegramas libres el valor leído del
encóder en el ciclo de su tasa de actualización.
De ahí resulta que si elegimos una lectura asíncrona de los valores del sensor obtendremos
valores de distinta antigüedad. La diferencia entre la antigüedad máxima y mínima es el jitter.

Lectura síncrona de los valores del sensor
En la lectura síncrona de los valores del sensor se obtiene la máxima precisión con la lectura
del valor del encóder.
El 1SSI inicia la transmisión de un telegrama en el ciclo de su tasa de actualización.
El 1SSI procesa el valor transferido del encóder de forma síncrona con su tasa de
actualización.

2672

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Seleccionar el tipo de encóder
Tipo de encóder
El 1SSI soporta los siguientes tipos de encóder:
● Encóder absoluto (SSI) de 13 bits
a
● Encóder absoluto (SSI) de 25 bits
Este tipo de encóder figura en los datos técnicos del encóder absoluto utilizado.
La selección "Ningún encóder" desactiva la entrada del encóder.

Seleccionar convertidor Gray/Dual
Convertidor Gray/Dual
El parámetro Convertidor Gray/Dual permite determinar el tratamiento del código suministrado
por el encóder:
● En el ajuste "Gray", el valor suministrado por el encóder absoluto en código gray se
convierte a código dual.
● En el ajuste "Dual" no se altera el valor procedente del encóder.

Seleccionar la velocidad de transferencia
Velocidad de transferencia
Con la "Velocidad de transferencia" se define la velocidad de la transferencia de datos del
encóder SSI al 1SSI.
Seleccione la velocidad de transferencia deseada en la lista desplegable.
Observe que la velocidad de transferencia influye en la precisión y la vigencia de los valores
del sensor.
La velocidad de transferencia máxima depende de la velocidad de transferencia:
● 320 m → 125 kHz
● 160 m → 250 kHz
● 60 m → 500 kHz
● 20 m → 1 MHz
● 10 m → 1,5 MHz
● 8 m → 2 MHz

Consulte también
Seleccionar el temporizador monoestable (Página 2674)

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2673

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Seleccionar la paridad
Paridad
Con la "Paridad" se define si para el encóder absoluto no debe transferirse ninguna paridad o
si debe transferirse una paridad par o impar.
Un bit de paridad parametrizado también cuenta en el caso del parámetro "Tipo de encóder
(Página 2673)". Si un encóder de 25 bits está parametrizado con paridad, se leen 26 bits del
encóder.
El bit del encóder que sigue al LSB (Least significant Bit) se evalúa como un bit de paridad. Un
error de paridad se notifica en la interfaz de realimentación (Página 2682) a través del bit
ERR_SSI.

Seleccionar el temporizador monoestable
Tiempo monoestable
El tiempo monoestable es la pausa entre 2 telegramas SSI.
El tiempo monoestable parametrizado debe ser mayor que el tiempo monoestable del encóder
absoluto utilizado (ver los datos técnicos del fabricante).
Para el tiempo monoestable del encóder absoluto se aplica la siguiente limitación:
(1 / velocidad de transferencia ) < tiempo monoestable del encóder absoluto < 64 µs
Seleccione el tiempo monoestable correspondiente en la lista desplegable.
La especificación del tiempo monoestable es relevante para la lectura libre de los valores del
sensor (Página 2672).

Consulte también
Seleccionar la velocidad de transferencia (Página 2673)

Activar la normalización
Valor del sensor y normalización
El valor transmitido por el encóder incluye la posición del encóder absoluto. Según el encóder
utilizado, además de su posición se transmiten otros bits, situados delante y detrás de la
posición del encóder.
Para que el 1SSI pueda determinar la posición del encóder, se debe especificar lo siguiente:
● Tipo de encóder (Página 2673)
● Número de bits a la derecha (Página 2675)
● Incrementos/Vuelta del encóder (Página 2676)

2674

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Con la normalización se especifica la representación del valor del encóder en la interfaz de
realimentación (Página 2682).
● Con la normalización activada se especifica que los bits irrelevantes que siguen al valor del
encóder sean desplazados.
● Con la normalización desactivada, se especifica que los bits a la derecha se conserven y
estén disponibles para la evaluación.

Introducir número de bits a la derecha
Número de bits a la derecha
Para determinar la posición del encóder y para detectar correctamente el sentido de
movimiento del encóder, el 1SSI necesita el número de bits a la derecha.
Este valor figura en los datos técnicos del encóder absoluto utilizado.

Activar inversión del sentido de giro
Detección del sentido e inversión del sentido de giro
Para detectar correctamente el sentido en el que se mueve el encóder, el 1SSI necesita la
siguiente información:
● Tipo de encóder (Página 2673)
● Número de bits a la derecha (Página 2675)
● Incrementos/Vuelta del encóder (Página 2676)
El sentido de movimiento calculado se muestra en la interfaz de realimentación (Página 2682)
y en los LEDs.
● LED UP: Cambio de posición del encóder del valor menor al valor mayor
● LED DN: Cambio de posición del encóder del valor mayor al valor menor
Con la inversión del sentido de giro se adapta el sentido del movimiento del encóder al del eje.
Se pueden realizar dos ajustes:
● Desactivada: El sentido de la posición transferida por el encóder se conserva.
● Activada: El sentido de la posición transferida del encóder se invierte. Es decir, aunque el
encóder suministre valores ascendentes, se muestran valores descendentes.
Esta inversión se refiere a los incrementos o a la vuelta del encóder que se han ajustado en
los parámetros.

Ejemplo de inversión del sentido de giro
Preajustes:

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2675

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Se utiliza un encóder monovuelta con 210 (equivale a 10 bits) = 1024 incrementos / vuelta de
encóder (resolución / 360°) con la siguiente parametrización:
● Tipo de encóder: SSI-13 Bit
● Número de bits a la derecha: 3 dígitos
● Inversión del sentido de giro: on
● Incrementos/vuelta del encóder: 1024
Valor del encóder antes de la inversión del sentido de giro: Posición del encóder registrada
cíclicamente 1023.
Valor del encóder después de la inversión del sentido de giro: Posición visualizada del encóder
0

Introducir incrementos por vuelta del encóder
Incrementos por vuelta
El parámetro "Incrementos por vuelta del encóder" indica el número de incrementos que emite
un encóder por cada vuelta.
Este valor figura en los datos técnicos del encóder absoluto utilizado.

Rangos de valores admisibles
Para los límites debe diferenciarse entre los distintos modelos de encóder. Como entrada se
permiten sólo valores en potencias de 2.
● Tipo de encóder de 13 bits: 16 a 8192
● Tipo de encóder de 14 bits: 16 a 16384
● Tipo de encóder de 15 bits: 16 a 32768
● Tipo de encóder de 16 bits: 16 a 65536
● Tipo de encóder de 17 bits: 16 a 131072
● Tipo de encóder de 18 bits: 16 a 262144
● Tipo de encóder de 19 bits: 16 a 524288
● Tipo de encóder de 20 bits: 16 a 1048576
● Tipo de encóder de 21 bits: 16 a 2097152
● Tipo de encóder de 22 bits: 16 a 4194304
● Tipo de encóder de 23 bits: 16 a 8388608
● Tipo de encóder de 24 bits: 16 a 16777216
● Tipo de encóder de 25 bits: 16 a 33554432

2676

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Seleccionar congelación del valor del encóder
Congelación del valor del encóder
Con la función de congelación se congela en un flanco de la entrada digital (DI) el valor de
encóder actual del 1SSI.
El valor del encóder puede evaluarse así en función de los eventos.
Un valor de encóder congelado está identificado mediante el bit 31 activado y se mantiene
hasta que finaliza la función de congelación.
El valor de encóder congelado se introduce en la interfaz de realimentación (Página 2682) en
el punto del valor que normalmente de registra de forma cíclica y se dota de la identificación
"Bit 31 activado".
Nota
Con el valor del encóder congelado también se realiza una detección del sentido y una función
de comparación, así como una monitorización de errores.

Requisitos para utilizar la función de congelación
A través de la parametrización se selecciona el flanco que congela el valor del encóder en la
entrada digital.
● Flanco descendente en la entrada DI
● Flanco ascendente en la entrada DI
● Ambos flancos en la entrada DI
Con la selección de flancos se activa la función de congelación que está acoplada en la
entrada digital.
Con la selección "Inactivo" no es posible realizar la congelación del valor del sensor.

Conclusión de la función de congelación
La función de congelación debe confirmarse. Cuando el programa de control confirma la
adopción del valor del encóder, el bit 31 se elimina y el valor del encóder se actualiza de nuevo.
A continuación puede volver a realizar una congelación.
La figura siguiente muestra el desarrollo de la función de congelación.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2677

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
66,ODIXQFLµQGHFRQJHODFLµQHVW£DFWLYDYDORUGHO
HQFRGHU
FRQJHODGR ELW  HVSHUDU
/$7&+B$&.
8VXDULR/$7&+GHEHVHU
DFXVDGRFRQ/$7&+B$&. 
66,ODIXQFLµQGHFRQJHODFLµQKDILQDOL]DGR
HOYDORUGHOHQFRGHUHVDFWXDO

8VXDULR/$7&+B$&.GHEHERUUDUVH
FXDQGRHO66,GHWHFWH/$7&+B$&. 
VHU£SRVLEOHYROYHUDFRQJHODU

%LWDFWLYDGR
HQHOYDORUGHOHQFRGHU

/$7&+B$&.

',

Seleccionar comportamiento de los comparadores
Ajuste del comparador
La posición registrada del encóder puede compararse hasta con dos valores que pueden
cargarse. Los dos resultados de la comparación se almacenan en la interfaz de realimentación
(Página 2682). Sólo después de cargar el valor de comparación, se activa el comparador
correspondiente.

2678

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Los dos comparadores se ajustan en los parámetros "Comparador 1" y "Comparador 2".
Ajuste

Efecto sobre el resultado de la comparación (CMPx)

Inactivo

El valor del encóder no se compara.
El bit de realimentación CMPx = 0.

Adelante

El valor del encóder se compara en sentido ascendente (UP).
● Si el valor del encóder ≥ al valor de comparación, el bit de realimentación CMPx = 1.
● Si el valor del encóder ≥ al valor de comparación, el bit de realimentación CMPx = 0.
● Si el sentido es descendente, el bit de realimentación CMPx no cambia.
● Si no se detecta ningún cambio en el valor del encóder, el bit de realimentación CMPx no
cambia.

Atrás

El valor del encóder se compara en sentido descendente (DN).
● Si el valor del encóder ≤ al valor de comparación, el bit de realimentación CMPx = 1.
● Si el valor del encóder > al valor de comparación, el bit de realimentación CMPx = 0.
● Si el sentido es ascendente, el bit de realimentación CMPx no cambia.
● Si no se detecta ningún cambio en el valor del encóder, el bit de realimentación CMPx no
cambia.

En ambos sentidos

El valor del encóder se compara en ambos sentidos.
Si el sentido es ascendente, se aplican las siguientes condiciones:
● Si el valor del encóder ≥ al valor de comparación, el bit de realimentación CMPx = 1.
● Si el valor del encóder ≥ al valor de comparación, el bit de realimentación CMPx = 0.
● Si no se detecta ningún cambio en el valor del encóder, el bit de realimentación CMPx no
cambia.
Si el sentido es descendente, se aplican las siguientes condiciones:
● Si el valor del encóder ≤ al valor de comparación, el bit de realimentación CMPx = 1.
● Si el valor del encóder > que el valor de comparación, el bit de realimentación CMPx = 0.
● Si no se detecta ningún cambio en el valor del encóder, el bit de realimentación CMPx no
cambia.

En cuanto se carga un valor de comparación, se borra el resultado de comparación y se
registra el nuevo resultado de la comparación según el ajuste del sentido.
Nota
No puede haber nunca más de un bit de control activado al mismo tiempo:
CMP_VAL1 o bien CMP_VAL2.
De no ser así, se notificará el error ERR_LOAD hasta que se borren ambos bits de control.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2679

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Cargar valor de comparación
En la figura siguiente se muestra el proceso de una transferencia de valores.
%LWGHFRQWURO
&03B9$/
&03B9$/

%LWGHUHVSXHVWD
676B/2$'

66,YDORUDFHSWDGRILQGHODWUDQVIHUHQFLD
HYHQWXDOPHQWHFRQHUURU
8VXDULRHOLPLQDODSHWLFLµQ\
PDQWLHQHGLVSRQLEOHHOYDORU
66,SHWLFLµQHQWHQGLGD
8VXDULRVROLFLWDODWUDQVIHUHQFLDGHOYDORU\
KDFHGLVSRQLEOHHOYDORU

Comparador en el modo isócrono
En el modo isócrono, los valores de comparación se cargan en el instante To y tienen efecto a
partir del instante Ti en el mismo ciclo de bus.

Activar señal de vida (modo estándar)
Señal de vida
El parámetro sólo es activo en modo isócrono.
Si la señal de vida está activada, en el modo isócrono se invierte el bit de la señal de vida cada
vez que se lee un valor del encóder, es decir, el último valor enviado se invierte. Si se ha
parametrizado un factor de ciclo mediante el parámetro "Tasa de muestreo encóder
(Página 2680)", el valor sólo se invertirá si realmente se ha leído un valor del encóder.
El bit de señal de vida se encuentra en la interfaz de realimentación (Página 2682) en el byte 4 /
bit 7.

Ajustar la tasa de muestreo del encóder
Tasa de muestreo del encóder
Este parámetro sólo es efectivo en modo isócrono.

2680

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Aquí se ajusta una tasa de muestreo del encóder que, dado el caso, debe tenerse en cuenta.
Con ello es posible utilizar encóders más lentos (p. ej. encóders ultrasónicos) en un ciclo de
procesamiento rápido.
A partir de la frecuencia ajustada se calcula un factor de ciclo interno n. En este caso, el
encóder sólo se leerá cada n ciclos de reloj.

Ejemplo
● Ciclo de procesamiento de 500 μs
● Tasa de muestreo del encóder: 1,2 kHz (a 833 μs aprox.)
Esto da lugar a un factor de ciclo n = 2.
Así pues, el encóder sólo se lee de nuevo cada dos ciclos de procesamiento, es decir, cada
milisegundo.

Interfaz de control y respuesta para el modo estándar
Interfaz para el modo estándar
Nota
Para el 1SSI, los datos siguientes de la interfaz de control son datos relacionados o, lo que es
lo mismo, coherentes:
● Bytes 0 … 3
● Bytes 4 … 7

Asignación de la interfaz de control
La siguiente tabla muestra la asignación de la interfaz de control (las salidas) del 1SSI en el
modo estándar.
Dirección

Ocupación

Bytes 0 a 3

Valor de comparación 1 ó 2 (palabra doble)

Byte 4

Bit 7

Acuse del error

EXTF_ACK

Bit 6

Confirmación de la función de congelación

LATCH_ACK

Bit 5

reservado = 0

Bit 4

reservado = 0

Bit 3

reservado = 0

Bit 2

reservado = 0

Bit 1

Carga del valor de comparación 2

CMP_VAL2

Bit 0

Carga del valor de comparación 1

CMP_VAL1

Byte 5

reservado = 0

Bytes 6 a 7

reservado = 0

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Nombre

2681

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Significado de los bits de control
Bit

Significado

CMP_VAL1

Carga del valor de comparación 1

CMP_VAL2

Carga del valor de comparación 2

EXTF_ACK

Acuse de error para el "Error encóder absoluto" ERR_SSI y "Cortocircuito en la ali‐
mentación del encóder" ERR_24V.

LATCH_ACK

Acuse para la función de congelación

Interfaz de realimentación para el modo estándar
Nota
Para el 1SSI, los datos siguientes de la interfaz de realimentación son datos relacionados, es
decir, coherentes:
● Byte 0...3
● Byte 4...7

Asignación de la interfaz de realimentación
La siguiente tabla muestra la asignación de la interfaz de realimentación (entradas) del 1SSI
en el modo estándar.
Dirección

Ocupación

Bytes 0 a 3

Valor del encóder (palabra doble)
(bit 31 activado, valor del encóder congelado)

Byte 4

Bit 7

reservado = 0 o señal de vida

LZ

Bit 6

Listo para servicio

RDY

Bit 5

Error de parametrización

ERR_PARA

Bit 4

Error encóder absoluto

ERR_SSI

Bit 3

Cortocircuito en la alimentación del encóder

ERR_24V

Bit 2

Estado de DI

STS_DI

Bit 1

Estado DN

STS_DN

Bit 0

Estado UP

STS_UP

Bit 7

reservado = 0

Bit 6

reservado = 0

Bit 5

reservado = 0

Bit 4

reservado = 0

Bit 3

Valor de comparación 2 alcanzado

CMP2

Bit 2

Valor de comparación 1 alcanzado

CMP

Bit 1

Error en función de carga

ERR_LOAD

Bit 0

Función de carga en curso

STS_LOAD

Byte 5

Bytes 6 a 7

2682

Nombre

reservado = 0

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Nota sobre los bits de realimentación
Bit

Significado

CMP

Resultado de comparación del comparador 1

CMP2

Resultado de comparación del comparador 2

ERR_24V

La alimentación del encóder está cortocircuitada. El ERR_24V se desactiva cuando se
elimina el cortocircuito y se acusa con el bit de control EXTF_ACK.

ERR_LOAD

Error al cargar los valores de comparación porque ambos bits de control CMP_VAL1 y
CMP_VAL2 están activados.

ERR_PARA

Hay parámetros erróneos en la parametrización de la estación ET 200S.
Causa: Los incrementos o la vuelta del encóder no se encuentran en el rango de valores
permitido para el tipo de encóder.
El bit de parámetro se borra cuando se transfiere una parametrización correcta.

ERR_SSI

El 1SSI detecta el "Error encóder absoluto" cuando fallan los telegramas en la interfaz
SSI.
Causas: no hay ningún encóder conectado; rotura de hilo del encóder; subtensión en la
alimentación de encóders; el tipo de encóder, la velocidad de transferencia, el error de
paridad y el temporizador monoestable no se corresponden con los del encóder co‐
nectado; los encóders programables no se corresponden con los ajustes del 1SSI; el
encóder está defectuoso o existen fallos de paridad.
El ERR_SSI se desactiva cuando se elimina la causa del error y se acusa con el bit de
control EXTF_ACK.

LZ

El parámetro sólo es activo en modo isócrono.
Si la señal de vida está activada, en el modo isócrono se invierte el bit de la señal de vida
cada vez que se lee un valor del encóder, es decir, el último valor enviado se invierte.
Si se ha parametrizado un factor de ciclo mediante el parámetro "Tasa de muestreo
encóder", el valor sólo se invertirá si realmente se ha leído un valor del encóder.

STS_DI

El bit muestra el estado de la entrada digital DI.

STS_DN

Estado de sentido descendente; cuando cambia el valor del encóder de posiciones más
altas a posiciones más bajas (inc. paso por cero)

STS_LOAD

Bit de respuesta de CMP_VAL1 o CMP_VAL2. El 1SSI muestra con este bit que se
carga un valor de comparación.

STS_UP

Estado de sentido ascendente; cuando cambia el valor del encóder de posiciones más
bajas a posiciones más altas (incl. paso por cero)

RDY

El 1SSI está parametrizado correctamente y ejecuta sus funciones. Las respuestas
mostradas son válidas. Con el error el encóder absoluto también está activado
ERR_SSI.

Parametrizar para el modo Fast
Activar diagnóstico de grupo
Diagnóstico de grupo
Si activa el diagnóstico de grupo en su parametrización, se realiza un diagnóstico relativo al
canal.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2683

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Seleccionar lectura de los valores del sensor
Descripción
El encóder absoluto transfiere sus valores de encóder en telegramas al 1SSI. La transferencia
de los telegramas es iniciada por el 1SSI. Para la lectura de los valores del sensor existen las
siguientes alternativas:
● Lectura libre de los valores del sensor
● Lectura síncrona de los valores del sensor
● Lectura de los valores del sensor en modo isócrono
La lectura libre o síncrona de los valores del sensor se selecciona en la parametrización con
el parámetro "Detección". Este parámetro actúa únicamente en el modo no isócrono.
Obtendrá una lectura de los valores del sensor en modo isócrono cuando el 1SSI funcione en
modo isócrono. El parámetro "Detección" no se evalúa en este caso.
La tabla siguiente muestra estas relaciones de la lectura de los valores del sensor.
En servicio

Parámetro "Detección"

Lectura de los valores del sensor

Modo no isócrono

libre

Lectura libre de los valores del sensor

isócrono

Lectura síncrona de los valores del sen‐
sor

- (irrelevante)

Lectura de los valores del sensor en
modo isócrono

Modo isócrono

Lectura libre de los valores del sensor:
El 1SSI hace que se transfiera un telegrama cada vez que termine el tiempo monoestable
(Página 2686) parametrizado.
El 1SSI procesa de forma asíncrona con respecto a estos telegramas libres el valor leído del
encóder en el ciclo de su tasa de actualización.
De ahí resulta que si elegimos una lectura asíncrona de los valores del sensor obtendremos
valores de distinta antigüedad. La diferencia entre la antigüedad máxima y mínima es el jitter.

Lectura síncrona de los valores del sensor
En la lectura síncrona de los valores del sensor se obtiene la máxima precisión con la lectura
del valor del encóder.
El 1SSI inicia la transmisión de un telegrama en el ciclo de su tasa de actualización.
El 1SSI procesa el valor transferido del encóder de forma síncrona con su tasa de
actualización.

Lectura de los valores del sensor en modo isócrono
La lectura isócrona de los valores del sensor se ajusta automáticamente cuando el sistema de
bus y el módulo periférico funcionan de forma sincronizada.

2684

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
El 1SSI dispone la transferencia de un telegrama en cada ciclo de bus en el instante Ti siempre
que la tasa máxima de muestreo del encóder no provoque un factor de ciclo.
El 1SSI procesa el valor transferido del encóder de forma síncrona con el ciclo de bus.

Seleccionar el tipo de encóder
Tipo de encóder
El 1SSI soporta los siguientes tipos de encóder:
● Encóder absoluto (SSI) de 13 bits
a
● Encóder absoluto (SSI) de 25 bits
Este tipo de encóder figura en los datos técnicos del encóder absoluto utilizado.
La selección "Ningún encóder" desactiva la entrada del encóder.

Seleccionar convertidor Gray/Dual
Convertidor Gray/Dual
El parámetro Convertidor Gray/Dual permite determinar el tratamiento del código suministrado
por el encóder:
● En el ajuste "Gray", el valor suministrado por el encóder absoluto en código gray se
convierte a código dual.
● En el ajuste "Dual" no se altera el valor procedente del encóder.

Seleccionar la velocidad de transferencia
Velocidad de transferencia
Con la "Velocidad de transferencia" se define la velocidad de la transferencia de datos del
encóder SSI al 1SSI.
Seleccione la velocidad de transferencia deseada en la lista desplegable.
Observe que la velocidad de transferencia influye en la precisión y la vigencia de los valores
del sensor.
La velocidad de transferencia máxima depende de la velocidad de transferencia:
● 320 m → 125 kHz
● 160 m → 250 kHz
● 60 m → 500 kHz
● 20 m → 1 MHz

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2685

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
● 10 m → 1,5 MHz
● 8 m → 2 MHz

Consulte también
Seleccionar el temporizador monoestable (Página 2686)

Seleccionar paridad
Paridad
Con la "Paridad" se define si para el encóder absoluto no debe transferirse ninguna paridad o
si debe transferirse una paridad par o impar.
Un bit de paridad parametrizado también cuenta en el caso del parámetro "Tipo de encoder
(Página 2685)". Si un encóder de 25 bits está parametrizado con paridad, se leen 26 bits del
encóder.
El bit del encóder que sigue al LSB (Least significant Bit) se evalúa como un bit de paridad. Un
error de paridad se notifica en la interfaz de realimentación (Página 2690) a través del bit EXTF.

Seleccionar el temporizador monoestable
Tiempo monoestable
El tiempo monoestable es la pausa entre 2 telegramas SSI.
El tiempo monoestable parametrizado debe ser mayor que el tiempo monoestable del encóder
absoluto utilizado (ver los datos técnicos del fabricante).
Para el tiempo monoestable del encóder absoluto se aplica la siguiente limitación:
(1 / velocidad de transferencia ) < tiempo monoestable del encóder absoluto < 64 µs
Seleccione el tiempo monoestable correspondiente en la lista desplegable.
La especificación del tiempo monoestable es relevante para la lectura libre de los valores del
sensor (Página 2684).

Consulte también
Seleccionar la velocidad de transferencia (Página 2685)

Activar la normalización
Valor del sensor y normalización
El valor transmitido por el encóder incluye la posición del encóder absoluto. Según el encóder
utilizado, además de su posición se transmiten otros bits, situados delante y detrás de la
posición del encóder.

2686

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Para que el 1SSI pueda determinar la posición del encóder, se debe especificar lo siguiente:
● Tipo de encóder (Página 2685)
● Número de bits a la derecha (Página 2687)
● Incrementos/Vuelta del encóder (Página 2688)
Con la normalización se especifica la representación del valor del encóder en la interfaz de
realimentación (Página 2690).
● Con la normalización activada se especifica que los bits irrelevantes que siguen al valor del
encóder sean desplazados.
● Con la normalización desactivada, se especifica que los bits a la derecha se conserven y
estén disponibles para la evaluación.

Introducir número de bits a la derecha
Número de bits a la derecha
Para determinar la posición del encóder y para detectar correctamente el sentido de
movimiento del encóder, el 1SSI necesita el número de bits a la derecha.
Este valor figura en los datos técnicos del encóder absoluto utilizado.

Activar inversión del sentido de giro
Detección del sentido e inversión del sentido de giro
Para detectar correctamente el sentido en el que se mueve el encóder, el 1SSI necesita la
siguiente información:
● Tipo de encóder (Página 2685)
● Número de bits a la derecha (Página 2687)
● Incrementos/Vuelta del encóder (Página 2688)
El sentido de movimiento calculado se muestra en la interfaz de realimentación (Página 2690)
y en los LEDs.
● LED UP: Cambio de posición del encóder del valor menor al valor mayor
● LED DN: Cambio de posición del encóder del valor mayor al valor menor
Con la inversión del sentido de giro se adapta el sentido del movimiento del encóder al del eje.
Se pueden realizar dos ajustes:
● Desactivada: El sentido de la posición transferida por el encóder se conserva.
● Activada: El sentido de la posición transferida del encóder se invierte. Es decir, aunque el
encóder suministre valores ascendentes, se muestran valores descendentes.
Esta inversión se refiere a los incrementos o a la vuelta del encóder que se han ajustado en
los parámetros.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2687

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Ejemplo de inversión del sentido de giro
Preajustes:
Se utiliza un encóder monovuelta con 210 (equivale a 10 bits) = 1024 incrementos / vuelta de
encóder (resolución / 360°) con la siguiente parametrización:
● Tipo de encóder: SSI-13 Bit
● Número de bits a la derecha: 3 dígitos
● Inversión del sentido de giro: on
● Incrementos/vuelta del encóder: 1024
Valor del encóder antes de la inversión del sentido de giro: Posición del encóder registrada
cíclicamente 1023.
Valor del encóder después de la inversión del sentido de giro: Posición visualizada del encóder
0

Introducir incrementos por vuelta del encóder
Incrementos por vuelta
El parámetro "Incrementos por vuelta del encóder" indica el número de incrementos que emite
un encóder por cada vuelta.
Este valor figura en los datos técnicos del encóder absoluto utilizado.

Rangos de valores admisibles
Para los límites debe diferenciarse entre los distintos modelos de encóder. Como entrada se
permiten sólo valores en potencias de 2.
● Tipo de encóder de 13 bits: 16 a 8192
● Tipo de encóder de 14 bits: 16 a 16384
● Tipo de encóder de 15 bits: 16 a 32768
● Tipo de encóder de 16 bits: 16 a 65536
● Tipo de encóder de 17 bits: 16 a 131072
● Tipo de encóder de 18 bits: 16 a 262144
● Tipo de encóder de 19 bits: 16 a 524288
● Tipo de encóder de 20 bits: 16 a 1048576
● Tipo de encóder de 21 bits: 16 a 2097152
● Tipo de encóder de 22 bits: 16 a 4194304
● Tipo de encóder de 23 bits: 16 a 8388608
● Tipo de encóder de 24 bits: 16 a 16777216
● Tipo de encóder de 25 bits: 16 a 33554432

2688

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Activar señal de vida (modo Fast)
Señal de vida
El parámetro sólo es activo en modo isócrono.
Si la señal de vida está activada, en el modo isócrono se invierte el bit de la señal de vida cada
vez que se lee un valor del encóder, es decir, el último valor enviado se invierte. Si se ha
parametrizado un factor de ciclo mediante el parámetro "Tasa de muestreo encóder
(Página 2689)", el valor sólo se invertirá si realmente se ha leído un valor del encóder.
El bit de señal de vida se encuentra en la interfaz de realimentación (Página 2690) en el byte 0
a 3 / bit 31.

Ajustar la tasa de muestreo del encóder
Tasa de muestreo del encóder
Este parámetro sólo es efectivo en modo isócrono.
Aquí se ajusta una tasa de muestreo del encóder que, dado el caso, debe tenerse en cuenta.
Con ello es posible utilizar encóders más lentos (p. ej. encóders ultrasónicos) en un ciclo de
procesamiento rápido.
A partir de la frecuencia ajustada se calcula un factor de ciclo interno n. En este caso, el
encóder sólo se leerá cada n ciclos de reloj.

Ejemplo
● Ciclo de procesamiento de 500 μs
● Tasa de muestreo del encóder: 1,2 kHz (a 833 μs aprox.)
Esto da lugar a un factor de ciclo n = 2.
Así pues, el encóder sólo se lee de nuevo cada dos ciclos de procesamiento, es decir, cada
milisegundo.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2689

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Interfaz de realimentación para el modo Fast
Asignación de la interfaz de realimentación
La siguiente tabla muestra la asignación de la interfaz de realimentación (entradas) del 1SSI
en el modo Fast.
Dirección
Bytes 0 a 3

Ocupación

Nombre

Bit 31

reservado = 0 o señal de vida

LZ

Bit 30

listo para funcionar (las respuestas son válidas)

RDY

Bit 29

Error de parametrización

ERR_PARA

Bit 28

Error de grupo Encóder absoluto o cortocircuito de
la alimentación del encóder

EXTF

Bit 27

Estado de DI

STS_DI

Bit 26

Estado DN

STS_DN

Bit 25

Estado UP

STS_UP

Bits 0 a 24

Valor del encóder

Nota sobre los bits de realimentación
Bit
ERR_PARA

Significado
Hay parámetros erróneos en la parametrización de la estación ET 200S.
Causa: Los incrementos o la vuelta del encóder no se encuentran en el rango de
valores permitido para el tipo de encóder.
El bit de parámetro se borra cuando se transfiere una parametrización correcta.

EXTF

Error de grupo Encóder absoluto o cortocircuito de la alimentación del encóder
Causas:
● La alimentación del encóder está cortocircuitada.
● no hay ningún encóder conectado; rotura de hilo del encóder; el tipo de encóder, la
velocidad de transferencia y el tiempo monoestable no se corresponden con los del
encóder conectado; los encóders programables no se corresponden con los
ajustes del 1SSI; el encóder está defectuoso o existen fallos o errores de paridad.
EXTF se desactiva cuando se eliminan las causas del error.

LZ

El parámetro sólo es activo en modo isócrono.
Si la señal de vida está activada, en el modo isócrono se invierte el bit de la señal de
vida cada vez que se lee un valor del encóder, es decir, el último valor enviado se
invierte. Si se ha parametrizado un factor de ciclo mediante el parámetro "Tasa de
muestreo encóder", el valor sólo se invertirá si realmente se ha leído un valor del
encóder.

2690

STS_DI

El bit muestra el estado de la entrada digital DI.

STS_DN

Estado de sentido descendente; cuando cambia el valor del encóder de posiciones
más altas a posiciones más bajas (incl. paso por cero)

STS_UP

Estado de sentido ascendente; cuando cambia el valor del encóder de posiciones más
bajas a posiciones más altas (incl. paso por cero)

RDY

El 1SSI está parametrizado correctamente y ejecuta sus funciones. Las respuestas
mostradas son válidas. Con el error Encóder absoluto también está activado EXTF.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

6.3.3.3

Diagnóstico del 1SSI

Diagnóstico con indicadores LED
Indicador LED del 1SSI

6)


3

①
②
③
④

1

83

'1

2

&03



4

Error de grupo (rojo)
Indicador de estado de cambio de valor del sensor (verde)
Indicador de estado del resultado de la comparación
Indicador de estado de la entrada digital (verde)

Indicadores de estado y error mediante los LEDs del 1SSI
La tabla muestra los indicadores de estado y error del 1SSI.
Evento (LED)
SF

UP

DN

CMP

Causa

Solución

7

ON

No hay parametrización. Hay
un aviso de diagnóstico.
ON

Compruebe la parametrización.
Evalúe el aviso de diagnóstico.

Cuando cambia el valor del
sensor de un valor menor a
uno mayor (incl. paso por ce‐
ro)
ON

Cuando cambia el valor del
sensor de un valor mayor a
uno menor (incl. paso por ce‐
ro)
ON

con resultado de compara‐
ción CMP 1 activado
ON

DI (latch) activada

Tipos de error
En el manual de producto del módulo de interfaz utilizado en la estación ET 200S encontrará
información sobre la estructura del diagnóstico de canal.
Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2691

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Tipos de error del 1SSI
La tabla muestra los tipos de error del 1SSI.
Tipo de error

Significado

Solución

1D

00001:
Cortocircuito

Cortocircuito en la alimentación del
encoder absoluto.

Corregir el cableado del proceso.

9D

01001:
Error

Ha aparecido un error interno en el
módulo.

Sustituir el módulo.

Tensión de carga insuficiente del mó‐ Corregir el cableado del proceso.
dulo de potencia.
Compruebe la tensión de carga.
16D

10000:
Módulo no parametrizado.
Error de parametri‐
zación

Corregir la parametrización.

26D

11010:
Error externo

Error de bit de arranque/paro (error
de encóder absoluto):

Sustituir el encóder.

Rotura de hilo en el cable del encóder
o cable no conectado.

Corregir la parametrización

Corregir el cableado del proceso

El tipo de encóder, la velocidad de
transferencia y el tiempo monoesta‐
ble no se corresponden con el encó‐
der conectado.
Los encóders programables no se co‐
rresponden con los ajustes en el 1SSI
El sensor está defectuoso o hay inter‐
ferencias.

6.3.4

Principios básicos del posicionamiento con módulos de función

6.3.4.1

¿Qué es posicionar?

Posicionamiento
Posicionar consiste en adoptar una posición espacial concreta, en particular, definida
mediante coordenadas.
En la tecnología SIMATIC, entendemos por posicionar el ajuste y el posicionamiento de ejes
mecánicos. Para ello se utilizan diversos procedimientos:
● Posicionamiento controlado con marcha rápida y lenta
● Posicionamiento con regulación de posición
● Posicionamiento con motor paso a paso
Pueden controlarse los ejes lineales con una zona de desplazamiento limitada y ejes rotativos
de giro sin fin.

2692

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

6.3.4.2

Posicionamiento controlado con marcha rápida y lenta

Posicionamiento controlado
Todos los procesos de posicionamiento están caracterizados por:
● una posición inicial
● el destino en el que se realizará el posicionamiento
● los parámetros que determinan el transcurso del posicionamiento
En primer lugar se realiza una aproximación al punto de destino a una velocidad mayor, la
marcha rápida. Al llegar a una distancia predeterminada de la posición de destino, se cambia
a una velocidad inferior, la marcha lenta. Poco antes de que el eje llegue al punto de destino,
también a una distancia predefinida con respecto al punto de destino, el accionamiento se
desconecta. En este proceso el módulo vigila la aproximación al destino.
El accionamiento se controla mediante salidas digitales con marcha rápida o marcha lenta y en
el sentido correspondiente.

6.3.4.3

Zonas y puntos de conexión del módulo de posicionamiento

Objetivo
Define la posición absoluta o relativa del eje a la que se llega en el posicionamiento.

Definición de los puntos y las zonas de conexión
Para el posicionamiento controlado pueden parametrizarse las zonas y las posiciones
siguientes:
Zona / Posición

Explicación

Zona de trabajo

Define el área que se determina para la tarea en cuestión con
ayuda de los finales de carrera por software o con el final del eje
rotativo.

Distancia de cambio de velocidad

Define la distancia con respecto al punto de destino en el que el
accionamiento cambia la velocidad de marcha rápida a marcha
lenta.

Punto de cambio de velocidad

Define la posición en la que el accionamiento cambia la velocidad
de marcha rápida a marcha lenta.

Distancia de desconexión

define la distancia hasta el punto de destino en el que se desco‐
necta el accionamiento.

Punto de desconexión

Define la posición en la que el accionamiento se desconecta. El
módulo de posicionamiento retoma las funciones de vigilancia a
partir de este punto.

Zona de destino

Define la precisión de posicionamiento de su aplicación y se sitúa
de forma simétrica en torno al destino.

Zona de parada

Define una zona simétrica en torno al destino que es vigilada por
el módulo de posicionamiento.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2693

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Puntos y distancias de conmutación

9HORFLGDGUHDO

La figura siguiente muestra la forma en la que pueden disponerse los puntos de conexión y las
diferencias de conexión para un proceso de posicionamiento. Para simplificar, se presupone
que la velocidad real cambia de forma lineal a lo largo del trayecto recorrido. Las rampas
surgidas se explican por la inercia mecánica o por las posibilidades de parametrización de la
etapa de potencia.

YU£SLGD

YOHQWD
7UD\HFWR

'LVWDQFLDGHFDPELRGH
YHORFLGDG

,QLFLR

2694

3XQWRGHFDPELRGH
YHORFLGDG

'LVWDQFLD
GH
GHVFRQH[
LµQ

3XQWRGH 2EMHWLYR
GHVFRQH[LµQ

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Áreas de conexión
La figura siguiente muestra la forma en la que pueden disponerse las zonas de conexión en
torno al destino.


)LQDOGHFDUUHUDSRUVRIWZDUH,QLFLR





2EMHWLYR





)LQDOGHFDUUHUDSRUVRIWZDUH)LQ






①
②
③
④
⑤
⑥
⑦

6.3.4.4

Zona de trabajo
Distancia de cambio de velocidad en el sentido de marcha positivo
Distancia de cambio de velocidad en el sentido de marcha negativo
Distancia de desconexión en el sentido de marcha positivo
Distancia de desconexión en el sentido de marcha negativo
Zona de parada
Zona de destino

Señales del encóder

Encóders compatibles
Encóders incrementales conectables
Se soportan encóders incrementales (Página 2697) de dos impulsos con un desfase de 90º
con o sin marca cero:
● Encóder con señales de salida asimétricas con nivel de 24 V
– Frecuencia límite = 50 kHz
– Longitud máx. 100 m de cable apantallado
● Encóder con señales de salida simétricas con un puerto diferencial de 5 V según RS 422.
– Frecuencia límite = 400 kHz
– Con una alimentación de tensión de 5 V: Longitud del cable: máx. 32 m, apantallada
– Con una alimentación de tensión de 24 V: Longitud del cable: máx. 100 m, apantallada

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2695

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Nota
Si el encóder de 5 V no emite ninguna señal de marca cero y se ha activado la comprobación
de rotura de hilo, es preciso interconectar externamente las entradas de marca cero N y /N para
que estas entradas presenten un nivel distinto (p. ej. N a 5 V, /N a la masa).

Encóders absolutos conectables
Se soportan encóders absolutos (Página 2698) con interfaz serie. La transferencia de la
información de recorrido se realiza de forma síncrona según el protocolo SSI
(interfaz serialsíncrona). El FM x51 soporta sólo el código GRAY. Según la disposición de los
bits de datos en el telegrama resultan los formatos de datos de 25 bits (abeto) y 13 bits (medio
abeto).
Entre los encóders absolutos se distingue entre
● Encóder monovuelta
Los encóders monovuelta reflejan el rango completo de medida en una vuelta del encóder.
● Encóder multivuelta
Los encóders multivuelta reflejan el rango completo de medida en varias vueltas del
encóder.
Tipo de encóder

Longitud de telegrama

Encóder monovuelta

13 bits

Encóder monovuelta

25 bits

Encóder multivuelta

13 bits … 25 bits

La velocidad de la transferencia de datos depende de la longitud del cable:
● Máx. 188 kHz con 200 m longitud de cable apantallado
● Máx. 375 kHz con 100 m longitud de cable apantallado
● Máx. 750 kHz con 40 m longitud de cable apantallado
● Máx. 1,5 MHz con 12 m longitud de cable apantallado

2696

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Encóder incremental
Formas de señal
En la table que sigue a continuación se muestran las formas de señal de los encóders con
señales de salida asimétricas y simétricas.
Asimétrica

Simétrica

$

$

$

%

%

%

1

1 

1

Interpretación de la señal
Incrementos
Un incremento caracteriza un período de señal de las dos señales A y B de un encóder. Este
valor se indica en los datos técnicos del encóder y/o en su placa de características.
La figura siguiente muestra la relación de incrementos e impulsos.
3HU¯RGRGHVH³DO LQFUHPHQWR

$

%







,PSXOVRV


(YDOXDFLµQFX£GUXSOH

Impulsos

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2697

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
El módulo de posicionamiento evalúa los 4 flancos de las señales A y B de cada incremento
(evaluación cuádruple).
Impulsos
1 incremento (dado por el encóder) = 4 impulsos (evaluación en el módulo)

Tiempos de respuesta
El módulo de posicionamiento tiene los siguientes tiempos de respuesta para encóders
incrementales conectados:
Tiempos de respuesta
Tiempo de respuesta = tiempo de conexión de los elementos conectados

Nota
El tiempo mínimo de respuesta se puede compensar mediante una parametrización adecuada
de la distancia de cambio de velocidad y la distancia de desconexión.

Imprecisión
La imprecisión afecta a la exactitud del posicionamiento. En los encóders incrementales la
imprecisión puede ignorarse.

Encóder absoluto
Evaluación de impulsos del encóder absoluto
Evaluación de impulsos del encóder absoluto
1 incremento (dado por el encóder) = 1 impulso (evaluación FM)

Tiempos de respuesta
El FM x51 tiene los tiempos de respuesta siguientes para encóders absolutos:
Tiempos de respuesta
Tiempo mínimo de respuesta = tiempo de ejecución de telegramas + tiempo de conexión de los elementos conectados
Tiempo máximo de respuesta = 2 × tiempo de ejecución de telegramas + tiempo monoestable + tiempo de conexión de los
elementos conectados
En el caso de encóders absolutos programables:
Tiempo máximo de respuesta = tiempo de ejecución de telegramas + tiempo monoestable + tiempo de conexión de los
elementos conectados + 1/frecuencia de pasos máx.

2698

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Tiempo monoestable
El tiempo monoestable es de 64 µs.
No se permiten encóders con valores superiores a los límites que aquí se indican.

Tiempos de ejecución de telegramas
Los tiempos de ejecución de telegramas dependen de la velocidad de transferencia:
Velocidad de transfe‐
rencia

Tiempo de ejecución de telegramas a
13 bits

Tiempo de ejecución de telegramas a
25 bits

0,188 MHz

75 µs

139 µs

0,375 MHz

38 µs

70 µs

0,750 MHz

19 µs

35 µs

1,500 MHz

10 µs

18 µs

Ejemplo de tiempos de respuesta
Este ejemplo muestra cómo calcular el tiempo de respuesta máximo y mínimo. En el ejemplo
no se emplea ningún encóder programable.
● Tiempo de conexión del hardware: aprox. 150 µs
● Tiempo de ejecución de telegramas: 18 µs a una velocidad de transferencia de 1,5 MHz
(telegramas de 25 bits)
● Tiempo monoestable: 64 µs
Tiempo de respuesta mínimo = 18 µs + 150 µs = 168 µs
Tiempo de respuesta máximo = 2 × 18 µs + 64 µs + 150 µs = 250 µs

Nota
El tiempo mínimo de respuesta se puede compensar mediante una parametrización adecuada
de la distancia de cambio de velocidad y la distancia de desconexión.

Imprecisión
La imprecisión es la diferencia entre el tiempo de respuesta máximo y mínimo. En el caso de
un encóder absoluto es:
Imprecisión
Imprecisión = tiempo ejecución telegrama + tiempo monoestable
En el caso de encóders absolutos programables:
Imprecisión = tiempo de ejecución de telegrama + tiempo monoestable + 1/frecuencia de pasos máx.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2699

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

6.3.5

Uso del FM 351

6.3.5.1

Asignación de terminales de los conectores frontales del FM 351

Descripción de la interfaz del encóder
Posición de los conectores hembra sub-D
En la figura siguiente se muestra la posición de montaje y el nombre de los conectores hembra
del módulo. En los dos conectores hembra sub-D se pueden conectar encóders incrementales
o encóders absolutos (SSI).




;&+
&DQDO




)0







;&+
&DQDO



Asignación de las interfaces de encóder (X2 y X3)

2700

Pin

Nombre

Encóder incremental
(24 V)

Encóder incremental (5 V) Encóder absoluto

1
2

A*

Señal de encóder A

---

---

CLS

---

---

Pulso de desplazamien‐
to SSI

3

/CLS

---

---

Pulso de desplazamien‐
to SSI inverso

4

B*

Señal de encóder B

---

---

5

DC 24 V

Alimentación del encoder

Alimentación del encóder

Alimentación del encó‐
der

6

DC 5.2 V

---

Alimentación del encóder

Alimentación del encó‐
der

7

M

Tierra del bastidor

Tierra del bastidor

Tierra del bastidor

8

N*

Señal de marca cero

---

---

9

RE

Salida tipo PNP/NPN 1)

---

---

10

N

---

Señal de marca cero

---

11

/N

---

Señal de marca cero in‐
vertida

---

12

/B

---

Señal de encóder B inver‐ --tida

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Pin

Nombre

Encóder incremental
(24 V)

Encóder incremental (5 V) Encóder absoluto

13

B

---

Señal de encóder B

14

/A / /DAT

---

Señal de encóder A inver‐ Datos SSI invertidos
tida

15

A / DAT

---

Señal de encóder A

---

Datos SSI

Nota: si se conecta un encóder incremental de otro fabricante en contrafase (salida tipo PNP/NPN),
debe tenerse en cuenta lo siguiente:

1)

● Salida tipo PNP: conecte RE (9) con la masa (7).
● Salida tipo NPN: conecte RE (9) con +24 V (5).

Asignación del conector frontal
Conector frontal
En el conector frontal de 20 polos se conectan:
● las entradas y salidas digitales asignadas a los canales;
● las tensiones de alimentación de los encóders y de las salidas digitales.

Asignación de terminales del conector frontal (X1)
La tabla siguiente contiene la asignación de terminales del conector frontal del FM 351.
Terminal

Nom‐
bre

Función

1

1L+

Tensión auxiliar de DC 24 V para la alimentación del encóder

2

1M

Masa de la alimentación del encóder

3

1I0

Canal 1: entrada digital 0

Sensor del punto de refe‐
rencia

no utilizado

4

1I1

Canal 1: entrada digital 1

Contacto inversor

no utilizado

5

1I2

Canal 1: entrada digital 2

6

1I3

Canal 1: entrada digital 3

7

2I0

Canal 2: entrada digital 0

Sensor del punto de refe‐
rencia

no utilizado

8

2I1

Canal 2: entrada digital 1

Contacto inversor

no utilizado

9

2I2

Canal 2: entrada digital 2

Entrada de habilitación

10

2I3

Canal 2: entrada digital 3

no utilizado

11

1Q0

Canal 1: salida digital 0

12

1Q1

Canal 1: salida digital 1

13

1Q2

Canal 1: salida digital 2

14

1Q3

Canal 1: salida digital 3

15

2Q0

Canal 2: salida digital 0

16

2Q1

Canal 2: salida digital 1

17

2Q2

Canal 2: salida digital 2

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Encóder incremental

Encóder absoluto

Entrada de habilitación
no utilizado

2701

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Terminal

Nom‐
bre

Función

Encóder incremental

Encóder absoluto

18

2Q3

Canal 2: salida digital 3

19

2L+

Tensión auxiliar de DC 24 V para la alimentación de la carga

20

2M

Masa de la alimentación de la carga

Encontrará más información sobre el diseño y el cableado en las instrucciones de servicio
(http://support.automation.siemens.com/WW/view/es/2103043) del módulo de
posicionamiento FM 351.

Tensión auxiliar para la alimentación del encóder (1L+, 1M)
Aquí puede conectar una tensión auxiliar de DC 24 V para la alimentación del encóder. En el
FM 351, el potencial de referencia de esta alimentación (1M) no está conectado con la masa
de la alimentación de la carga (2M).
Se vigila si la tensión auxiliar de DC 24 V para la alimentación del encóder presenta subtensión
y rotura de hilo de masa.
En la interfaz del encóder (conectores hembra sub-D X2 y X3) se proporcionan DC 24 V y
DC 5,2 V para los diferentes tipos de encóder.
PRECAUCIÓN
Preste atención a la correcta polaridad de la tensión auxiliar de DC 24 V para la alimentación
del encóder (1L+, 1M).
Si conecta la tensión auxiliar de DC 24 V para la alimentación del encóder con los polos
invertidos, el módulo sufrirá daños y deberá sustituirse.

Tensión auxiliar para la alimentación de la carga (2L+, 2M)
En los bornes 2L+ y 2M debe conectar una tensión auxiliar de DC 24 V para la alimentación de
la carga de las salidas digitales.
PRECAUCIÓN
Preste atención a la correcta polaridad de la tensión auxiliar de DC 24 V para la alimentación
de la carga (2L+, 2M).
Si conecta la tensión auxiliar de DC 24 V para la alimentación de la carga con los polos
invertidos, el módulo sufrirá daños y deberá sustituirse.

Indicación sobre el cableado para DC 24 V
Al efectuar el cableado, tenga en cuenta que los bornes 1L+, 1M y 2L+, 2M deben estar
interconectados para que el módulo funcione sin fallos.
Si conecta 1L+, 1M y 2L+, 2M a alimentaciones separadas, en caso de producirse una pérdida
de tensión se mantendrá la sincronización de los ejes gracias a la tensión auxiliar para la
alimentación de la carga (2L+, 2M).

2702

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Alimentaciones de carga
La alimentación de la carga DC debe satisfacer los siguientes requisitos:
Como alimentación de la carga sólo debe utilizarse una pequeña tensión DC ≤ 60 V separada
con seguridad de la red. La separación segura puede estar efectuada según los requisitos que
figuran, entre otros, en:
● VDE 0100 Parte 410/HD 384-4-41/IEC 364-4-41
(como pequeña tensión funcional con separación segura),
● VDE 0805/EN 60950/IEC 950
(como pequeña tensión de seguridad SELV) o bien
● VDE 0106 Parte 101.

8 entradas digitales (de 1I0 a 2I3)
El FM 351 dispone de 4 entradas digitales por canal.
En las 8 entradas digitales es posible conectar conectores libres de rebotes (de 24 V tipo P) o
sensores sin contacto (detectores de proximidad de 2 ó 3 hilos).
No se vigila si las entradas digitales presentan cortocircuitos o roturas de hilo; dichas entradas
están aisladas galvánicamente de la masa de la alimentación del encóder y de la masa de la
CPU.
El estado de cada entrada se indica con el LED correspondiente.

8 salidas digitales (de 1Q0 a 2Q3)
El FM 351 dispone de 4 salidas digitales por canal.
Con las salidas digitales se controla la etapa de potencia. El funcionamiento de las salidas
digitales depende del modo de control (Página 2741).
No se vigila si las salidas digitales presentan cortocircuitos o roturas de hilo; dichas salidas
están aisladas galvánicamente de la masa de la alimentación del encóder y de la masa de la
CPU.
El estado de cada salida se indica en el LED correspondiente.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2703

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

6.3.5.2

Funciones de FM 351

Funciones
Al especificar un modo de operación, una petición o un selector de función, se elige la
funcionalidad con la que se utilizará el módulo. La siguiente tabla ofrece una visión general de
la funcionalidad del módulo.
Funcionalidad

Descripción

Escribir y leer los datos máquina
(Página 2705)

Con los datos máquina el módulo de posicionamiento se adapta al
eje y al encóder.

Escribir y leer tablas de incre‐
mentos (Página 2706)

Con los incrementos se especifican destinos que pueden ser con‐
trolados por el módulo de posicionamiento en el modo de operación
"Modo incremental relativo/absoluto".

Final de una operación de posi‐
cionamiento (Página 2708)

El final de una operación de posicionamiento se logra de tres formas
distintas:
● Aproximación al destino
● Desactivación
● Cancelar

Modo de operación "Jog" (Pági‐ En el modo de operación "Jog", el accionamiento se mueve en un
na 2715)
sentido al pulsar una tecla.
Modo de operación "Búsqueda
del punto de referencia" (Pági‐
na 2718)

El modo de operación "Búsqueda del punto de referencia" permite
sincronizar el eje en función de un evento externo repetitivo.

Modo de operación "Modo incre‐ En el modo de operación "Modo incremental" el módulo de posicio‐
mental" (Página 2724)
namiento puede
● mover el accionamiento a destinos absolutos,
● mover el accionamiento de forma relativa alrededor de una parte
del trayecto en un sentido predeterminado.

2704

Petición "Definir valor real" /
"Cancelar preselección del valor
real" (Página 2729)

Con la petición "Ajustar valor real" se asigna una nueva coordinada
al estado actual del sensor.
Con la petición "Cancelar valor real ajustado" se restablecen todos
los offsets de la zona de trabajo que han sido generados con "Ajustar
valor real".

Petición "Definir punto de refe‐
rencia" (Página 2731)

Con la petición "Definir punto de referencia" se sincroniza el eje.

Selector de función "Aproxima‐
ción en bucle" (Página 2733)

La "Aproximación en bucle" define el sentido en el que se aproxima
al destino con cierre de fuerza.

Selector de función "Entrada de
habilitación" (Página 2736)

La entrada de habilitación es una entrada externa con la que puede
habilitarse un posicionamiento a través de un evento externo.

Petición "Leer datos de posi‐
ción" (Página 2737)

Con la petición "Leer datos de posición" es posible leer el incremen‐
to, el trayecto residual y la velocidad en el instante actual.

Petición "Leer datos del encó‐
der" (Página 2737)

Con la función "Leer datos de encóder" se leen los datos actuales del
encóder, así como el valor del reajuste del encóder absoluto.

Señales de realimentación del
posicionamiento (Página 2738)

Con la función "Señales de respuesta para el posicionamiento" se
informa del estado actual del posicionamiento.

Señales de realimentación del
diagnóstico (Página 2738)

Con las "Señales de realimentación del diagnóstico" se recibe infor‐
mación sobre los eventos de diagnóstico que se han producido.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Escribir y leer los datos máquina
Escribir, activar y leer los datos máquina
Con los datos máquina se adapta el módulo de posicionamiento al eje y al encóder.
El programa de usuario permite modificar y leer los parámetros durante el funcionamiento.
Todos los parámetros se depositan en el DB de parámetros:
● Los datos máquina se encuentran en el DB de parámetros, en las direcciones que van del
4.0 al 116.0.
El número del DB de parámetros se tiene que introducir en el DB de canal correspondiente en
cada caso.
Los parámetros pueden introducirse con el editor DB, o bien introducirse cómodamente en los
cuadros de diálogo "Accionamiento", "Eje" y "Encóder" y se escriben con la función "Exportar"
en el DB de parámetros.
Los parámetros de un DB de parámetros existente pueden importarse a los cuadros de diálogo
con la función "Importar".

Primera parametrización
Si el canal todavía no contiene ningún dato máquina, proceda de la siguiente manera para una
primera parametrización sin el cuadro de diálogo de parametrización:
1. Introduzca los nuevos valores en el DB de parámetros y almacénelos.
2. Cargue el DB de parámetros en la CPU.
3. Active el siguiente bit de inicio en el DB de canal para la petición:
– Escribir datos máquina (MDWR_EN = 1)
4. En el programa de usuario cíclico llame la instrucción ABS_CTRL.

Modificar datos máquina
Para modificar datos máquina mediante el programa de usuario, proceda del siguiente modo:
1. Introduzca los nuevos valores en el DB de parámetros.
2. Active los bits de inicio en el DB de canal para las peticiones:
– Escribir datos máquina (MDWR_EN = 1)
– Activar datos máquina (MD_EN = 1)
3. En el programa de usuario cíclico llame la instrucción ABS_CTRL.
Si define los bits de inicio de estas peticiones al mismo tiempo, la instrucción ABS_CTRL se
encargará de que las peticiones se procesen en la secuencia correcta.
De lo contrario, cambie siempre los datos máquina en la siguiente secuencia:
● Escribir datos máquina
● Activar datos máquina

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2705

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Leer datos máquina
Para leer los datos máquina actuales de un canal, proceda del siguiente modo:
1. Active el siguiente bit de inicio en el DB de canal:
– Leer datos máquina (MDRD_EN = 1)
2. En el programa de usuario cíclico llame la instrucción ABS_CTRL.
De este modo se depositan en la CPU los datos máquina del DB de parámetros.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

Valor inicial

Comentarios

35.0

MDWR_EN

BOOL

FALSE

1 = Escribir datos máquina

35.1

MD_EN

BOOL

FALSE

1 = Activar datos máquina

36.5

MDRD_EN

BOOL

FALSE

1 = Leer datos máquina

Nota
Si se modifican parámetros relevantes para la sincronización, al activar los datos máquina el
módulo realiza las siguientes acciones para el canal afectado:
● La sincronización se borra.
● El sensor de funciones y el decalaje de señal cero se desactivan.
● Los datos máquina y las tablas de incrementos existentes hasta ahora quedan invalidados.
Son parámetros relevantes para la sincronización:
● Tipo de eje
● Final del eje rotativo
● Tipo de señal
● Recorrido por vuelta
● Incrementos por vuelta
● Número de vueltas
● Coordenada del punto de referencia
● Reajuste del encóder absoluto
● Tipo de búsqueda del punto de referencia
● Sentido de contaje

Escribir y leer tablas de incrementos
Escribir y leer tablas de incrementos
Con los incrementos se especifican destinos que pueden ser controlados por el módulo de
posicionamiento en el modo de operación "Modo incremental relativo/absoluto".
El programa de usuario permite modificar y leer los parámetros durante el funcionamiento.

2706

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Todos los parámetros se depositan en el DB de parámetros:
● Las tablas de incrementos se encuentran en el DB de parámetros en las direcciones 120.0
a 516.0.
El número del DB de parámetros se tiene que registrar en el DB de canal correspondiente en
cada caso.
Los parámetros pueden introducirse con el editor DB, o bien introducirse cómodamente en el
cuadro de diálogo "Incrementos" y se escriben con la función "Exportar" en el DB de
parámetros.
Los parámetros de un DB de parámetros existente pueden importarse al cuadros de diálogo
con la función "Importar".

Primera parametrización
Si el canal todavía no contiene ninguna tabla de incrementos, proceda del siguiente modo para
una primera parametrización sin el cuadro de diálogo de parametrización:
1. Introduzca los nuevos valores en el DB de parámetros y almacénelos.
2. Cargue el DB de parámetros en la CPU.
3. Active los bits de inicio en el DB de canal para las peticiones:
– Escribir tabla de incrementos 1 (TRGL1WR_EN = 1) y/o escribir tabla de incrementos 2
(TRGL2WR_EN = 1)
4. En el programa de usuario cíclico llame la instrucción ABS_CTRL.

Modificar tablas de incrementos
Para modificar las tablas de incrementos mediante el programa de usuario, proceda del
siguiente modo:
1. Introduzca los nuevos valores en el DB de parámetros.
2. Active los bits de inicio en el DB de canal para las peticiones:
– Escribir tabla de incrementos 1 (TRGL1WR_EN = 1) y/o escribir tabla de incrementos 2
(TRGL2WR_EN = 1)
3. En el programa de usuario cíclico llame la instrucción ABS_CTRL.

Leer tablas de incrementos
Para leer las tablas de incrementos a partir de un canal, proceda del siguiente modo:
1. Active los bits de inicio en el DB de canal para las peticiones:
– Leer tabla de incrementos 1 (TRGL1RD_EN = 1) y/o leer tabla de incrementos 2
(TRGL2RD_EN = 1)
2. En el programa de usuario cíclico llame la instrucción ABS_CTRL.
De este modo se depositan en la CPU las tablas de incrementos del DB de parámetros.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2707

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

35.4

TRGL1WR_EN

BOOL

FALSE

1 = Escribir tabla de incrementos 1 (1 ... 50)

35.5

TRGL2WR_EN

BOOL

FALSE

1 = Escribir tabla de incrementos 2 (51 ... 100)

36.6

TRGL1RD_EN

BOOL

FALSE

1 = Leer tabla de incrementos 1 (1 ... 50)

36.7

TRGL2RD_EN

BOOL

FALSE

1 = Leer tabla de incrementos 2 (51 ... 100)

Nota
Si se modifican parámetros relevantes para la sincronización, al activar los datos máquina el
módulo realiza las siguientes acciones para el canal afectado:
● La sincronización se borrará.
● Los selectores de función y el decalaje de señal cero se inicializan.
● Los datos máquina y las tablas de incrementos existentes hasta ahora quedan invalidados.
Son parámetros relevantes para la sincronización:
● Tipo de eje
● Final del eje rotativo
● Tipo de señal
● Recorrido por vuelta
● Incrementos por vuelta
● Número de vueltas
● Coordenada del punto de referencia
● Reajuste del encóder absoluto
● Tipo de búsqueda del punto de referencia
● Sentido de contaje

Final de una operación de posicionamiento
Definición
El final de una operación de posicionamiento se logra a través de la señal de realimentación
WORKING = 0. Esto se logra de tres formas distintas:
● Aproximación al destino
● Desactivación
● Cancelar

2708

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Vigilancias
Al final de una operación de posicionamiento se encuentran activas las siguientes vigilancias:
● Tiempo de vigilancia
El tiempo de vigilancia se redispara en el punto de desconexión por última vez y pierde su
validez al finalizar la operación de posicionamiento.
En el transcurso de este tiempo es necesario alcanzar el final de la operación de
posicionamiento. De lo contrario, las salidas se desconectan y se notifica el fallo operativo
"Error en la aproximación al destino" (número de error 5).
● Vigilancia de la zona de destino
El FM x51 crea un área simétrica alrededor de cada destino y define con ello la precisión de
posicionamiento de su aplicación. Dentro de esta área es preciso que el eje se pare durante
una aproximación al destino. Una especificación de valor 0 desconecta la tolerancia en la
aproximación al destino.
● Vigilancia de la velocidad de parada
La velocidad de parada permite determinar si el accionamiento se para dentro de la zona
de destino. Una vez alcanzado el punto de desconexión, el FM x51 vigila si la velocidad real
del accionamiento es inferior a la velocidad de parada.
La velocidad de parada debe rebasarse por defecto dentro de la zona de trabajo. De lo
contrario, el FM x51 notifica el fallo operativo "Rebasar zona de destino" (número de error
10).
El desbordamiento por defecto de la velocidad de parada sólo se vigila una vez por
aproximación al destino.
Tenga en cuenta en este caso que la velocidad de parada para la determinación de la
velocidad del módulo puede rebasarse temporalmente por defecto si el eje se mueve con
una velocidad de posicionamiento muy pequeña (menos de 2 impulsos por 8 ms).
● Vigilancia de la zona de parada
Tras finalizar una operación de posicionamiento se vigila si el accionamiento se detiene en
una posición de destino alcanzada o si se aleja de ella.
La zona de parada se vigila
– después de que el FM x51 haya notificado la señal de realimentación "PEH",
– si el tiempo de vigilancia se rebasa por exceso,
– si la velocidad de parada se rebasa por defecto.
Si la zona de parada se abandona sin una petición de marcha válida, el FM x51 notifica el
fallo operativo "Abandonar zona de parada" (número de error 6).

Aproximación al destino
La aproximación al destino en los modos de operación "Modo incremental absoluto" y "Modo
incremental relativo" comienza cuando se alcanza el punto de desconexión. A partir de este
punto se desconecta el accionamiento y el FM x51 se hace cargo de las funciones de vigilancia.
En función de las vigilancias que se hayan parametrizado, surgen diferentes casos para la
creación de la señal de repuesta "PEH (POS_RCD)". La operación de posicionamiento se
cancela cuando se crea la señal "PEH (POS_RCD)".

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2709

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Caso 1: Se ha parametrizado lo siguiente:
● Zona de destino (TRG_RANGE) > 0
● Velocidad de parada (ZSPEED_L) > 0
● Tiempo de vigilancia (MON_TIME) > 0
Se genera una PEH si la velocidad de parada se rebasa por defecto y se alcanza la zona de
destino. Es irrelevante la condición que se cumpla en primer lugar.
No se genera PEH si el valor real no alcanza la zona de destino dentro del tiempo de vigilancia
o si la zona de destino se sobrepasa sin rebasar por defecto la velocidad de parada.
La siguiente figura muestra la aproximación al destino en modo incremental con zona de
destino > 0 y velocidad de parada > 0.


PP









2EMHWLYR

PP


YOHQWD



Y9HORFLGDGGHSDUDGD

W

①
②
③
④
⑤
⑥
tÜ

Distancia de cambio de velocidad positiva
Distancia de desconexión positiva
Zona de parada
Zona de destino
Velocidad de parada alcanzada
Zona de destino con Vparada alcanzada: PEH se activa
Tiempo de vigilancia

Caso 2: Se ha parametrizado lo siguiente:
● Zona de destino (TRG_RANGE) > 0
● Velocidad de parada (ZSPEED_L) = 0
● Tiempo de vigilancia (MON_TIME) > 0
Se genera una PEH si se alcanza la zona de destino.
No se genera una PEH si el valor real no alcanza la zona de destino dentro del tiempo de
vigilancia.
La siguiente figura muestra la aproximación al destino en modo incremental con zona de
destino > 0 y velocidad de parada = 0.

2710

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

PP









2EMHWLYR PP

YOHQWD



W

①
②
③
④
⑤
tÜ

Distancia de cambio de velocidad positiva
Distancia de desconexión positiva
Zona de parada
Zona de destino
Zona de destino con Vparada alcanzada: PEH se activa
Tiempo de vigilancia

Caso 3: Se ha parametrizado lo siguiente:
● Zona de destino (TRG_RANGE) = 0
● Velocidad de parada (ZSPEED_L) > 0
● Tiempo de vigilancia (MON_TIME) > 0
Se genera una PEH si la velocidad de parada se rebasa por defecto y se alcanza el destino.
No se genera una PEH si el valor real no alcanza el destino dentro del tiempo de vigilancia o
si la zona de destino se sobrepasa sin rebasar por defecto la velocidad de parada.
La siguiente figura muestra la aproximación al destino en modo incremental con zona de
destino = 0 y velocidad de parada > 0.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2711

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)


PP





2EMHWLYR PP




YOHQWD
Y9HORFLGDGGHSDUDGD


W

①
②
③
④
⑤
tÜ

Distancia de cambio de velocidad positiva
Distancia de desconexión positiva
Zona de parada
Velocidad de parada alcanzada
Destino alcanzado: PEH se activa
Tiempo de vigilancia

Caso 4: Se ha parametrizado lo siguiente:
● Zona de destino (TRG_RANGE) = 0
● Velocidad de parada (ZSPEED_L) = 0
● Tiempo de vigilancia (MON_TIME) > 0
Se genera una PEH si se alcanza el destino.
No se genera una PEH si el valor real no alcanza el destino dentro del tiempo de vigilancia.
La siguiente figura muestra la aproximación al destino en modo incremental con zona de
destino = 0 y velocidad de parada = 0.

2712

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

PP





2EMHWLYR PP



YOHQWD


W

①
②
③
④
tÜ

Distancia de cambio de velocidad positiva
Distancia de desconexión positiva
Zona de parada
Destino alcanzado: PEH se activa
Tiempo de vigilancia

Caso 5: Se ha parametrizado lo siguiente:
● Zona de destino (TRG_RANGE) ≥ 0
● Velocidad de parada (ZSPEED_L) ≥ 0
● Tiempo de vigilancia (MON_TIME) = 0
Si en este caso el accionamiento se para delante de la zona de destino, el final de la operación
de posicionamiento no se detecta. No se genera una PEH y la señal de realimentación
WORKING permanece activada. La operación de posicionamiento sólo puede cancelarse
eliminando la habilitación del accionamiento (DRV_EN = 0).

Desactivación sin destino predeterminado
Desactivación significa: El proceso de posicionamiento se cierra de forma precisa
manteniendo las diferencias desde la marcha rápida a la marcha lenta.
La operación de posicionamiento se desactiva si:
● el FM x51 recibe una señal de STOP (STOP = 1);
● los modos de operación "Jog" y "Búsqueda del punto de referencia" finalizan;
● aparecen errores de operador o el fallo operativo "Rebasar destino" " (número de error 9).
La señal de realimentación "PEH (POS_RCD)" no se activa. Los procesos son análogos a los
de la aproximación al destino.
La siguiente figura muestra la desactivación de una operación de posicionamiento.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2713

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

PP







PP

YU£SLGD
YOHQWD

SRUHMHPSOR3$5$'$

①
②
③

)LQGHOSRVLFLRQDPLHQWR

Distancia de cambio de velocidad positiva
Distancia de desconexión positiva
Zona de destino

Cancelar
Cancelar significa: La operación de posicionamiento finaliza inmediatamente sin que se
utilicen la distancia de cambio de velocidad ni la distancia de desconexión de la marcha rápida
o la marcha lenta después de la parada. Para ello, todas las salidas relevantes del modo de
control pertinente se desconectan inmediatamente y, además:
● Incremento = valor real
● Recorrido residual = Cero
La operación de posicionamiento se cancela si:
● la señal de habilitación del accionamiento se borra (DRV_EN = 0);
● la CPU pasa a STOP;
● aparecen errores de diagnóstico u otros fallos operativos aparte del error "Rebasar destino"
" (número de error 9).
La señal de realimentación "PEH (POS_RCD)" no se activa en el modo de operación "Modo
incremental".
Cuando la velocidad de parada está parametrizada, la vigilancia de parada se activa en cuanto
se rebasa por defecto. Cuando la velocidad de parada está parametrizada, la vigilancia de
parada se activa con la desactivación de las salidas.
La siguiente figura muestra la cancelación de una operación de posicionamiento.
YU£SLGD
YOHQWD

&DQFHODU

2714

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

76.0

TRG_RANGE

DINT

L#1000

Zona de destino

80.0

MON_TIME

DINT

L#2000

Tiempo de vigilancia

84.0

ZSPEED_R

DINT

L#1000

Zona de parada

88.0

ZSPEED_L

DINT

L#30000

Velocidad de parada

Señales de respuesta en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

23.1

WORKING

BOOL

FALSE

1 = Operación de posicionamiento en curso

25.7

POS_RCD

BOOL

FALSE

1 = Posición alcanzada

Modo de operación "Jog"
Definición
En el modo de operación "Jog", el accionamiento se mueve en un sentido al pulsar una tecla.
Para los dos sentidos (positivo y negativo) es preciso instalar sendos botones. El modo de
operación "Jog" se puede utilizar tanto para el eje sincronizado como para el eje no
sincronizado.
Si el eje no está sincronizado el modo "Jog" permite realizar un posicionamiento en el sentido
preestablecido.
Si el eje está sincronizado (eje lineal), el modo "Jog" permite realizar un posicionamiento en el
final de carrera por software.

Requisitos
El eje debe estar parametrizado.

Desarrollo del modo de operación "Jog"
1. Active la señal de control para el modo de operación "Jog" (MODE_IN = 1).
2. Active la señal de control para la habilitación del accionamiento (DRV_EN = 1).
3. Active el selector de función para "No evaluar la entrada de habilitación" (EI_OFF = 1) o
cablee la entrada de habilitación para el canal correspondiente.
4. Introduzca la velocidad de inicio.
– Marcha rápida (MODE_TYPE = 1)
– Marcha lenta (MODE_TYPE = 0)
5. Conecte la señal de control para el sentido de marcha positivo o negativo (DIR_P = 1 o
DIR_M = 1).
6. Llame la instrucción ABS_CTRL.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2715

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

La figura siguiente muestra un ejemplo del modo de operación "Jog".
02'(B,1 
-2*
'59B(1
+DELOLWDFLµQGHODFFLRQDPLHQWR
[O
(QWUDGDGH
KDELOLWDFLµQ
:$,7B(,
',5B0',5B3

:25.,1*

YU£SLGD
YOHQWD
V

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

15.2

DIR_M

BOOL

FALSE

1 = Sentido negativo

15.3

DIR_P

BOOL

FALSE

1 = Sentido positivo

15.7

DRV_EN

BOOL

FALSE

1 = Conectar habilitación del accionamiento

16.0

MODE_IN

BYTE

B#16#0

1 = Jog

17.0

MODE_TYPE

BYTE

B#16#0

1 = Marcha rápida

23.0

ST_ENBLD

BOOL

FALSE

1 = Habilitar inicio

23.1

WORKING

BOOL

FALSE

1 = Operación de posicionamiento en curso

23.2

WAIT_EI

BOOL

FALSE

1 = El eje espera una habilitación externa

34.2

EI_OFF

BOOL

FALSE

1 = No evaluar entrada de habilitación

0 = Marcha lenta

Desactivación del modo Jog
El modo de operación "Jog" se desactiva cuando
● se vuelve a abrir el botón con el que realiza el modo "Jog" (DIR_M = 0 o DIR_P = 0);
● el FM 351 recibe una señal de STOP (STOP = 1),
● el valor real de un eje lineal sincronizado alcanza el límite de la zona de trabajo. La
continuación de la marcha sólo es posible en el sentido contrario.

2716

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Tras desactivar la marcha puede continuarse la marcha en el sentido que se desee.

Cancelación del modo Jog
El modo de operación "Jog" se cancela cuando
● la señal de habilitación del accionamiento se borra (DRV_EN = 0),
● se ha rebasado un límite de la zona de desplazamiento en un eje lineal.

Vigilancias
En el modo de operación "Jog", las siguientes vigilancias no están activas al final del
posicionamiento:
● Vigilancia de la zona de parada
● Vigilancia de la zona de destino
● Vigilancia de la velocidad de parada
El modo "Jog" no produce un posicionamiento correcto en el que al final se activa la señal
"Posición alcanzada".

Límite de la zona de trabajo en un eje lineal
Los límites para el modo "Jog" son distintas en función de si el eje está sincronizado o no
sincronizado.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2717

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La tabla siguiente muestra el modo "Jog" con un eje sincronizado y no sincronizado.
El eje no está sincronizado.

El eje está sincronizado.

Si en el modo "Jog" se rebasa el límite de la zona de despla‐ El modo "Jog" representa un posicionamiento en destinos
zamiento.
que están separados de los finales de carrera por software en
toda la zona de destino.
● el indicador del valor real ya no es válido.
● se cancela la operación de posicionamiento.

 P

Los límites de la zona de trabajo se calculan a partir de

● SEE - ½ zona de destino para el final del eje lineal en
sentido positivo
● SEE + ½ zona de destino para el final del eje lineal en
sentido negativo
Si no abre antes el botón, el FM 351 se desconecta en un
punto que se encuentra la mitad de la zona de destino delante
del final de carrera por software correspondiente. El FM 351
activa todas las áreas que se necesitan para la desactivación
correcta alrededor de este punto de destino.

El indicador del valor real ya no es válido

2EMHWLYRP£[LPR )&6)





= Área de la zona de trabajo en la que no puede haber
ninguna posición de destino

① = Distancia de cambio de velocidad positiva
② = Distancia de desconexión positiva
③ = ½ zona de destino
Modo de operación "Búsqueda del punto de referencia"
Definición

El modo de operación "Búsqueda del punto de referencia" permite sincronizar el eje en función
de un evento externo repetitivo.

2718

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Requisitos
● Un encóder incremental con señal cero.
● El eje está parametrizado:
Conexiones

Canal 1

Canal 2

Entrada digital 2I0
Sensor del punto de refe‐ Entrada digital 1I0
rencia
El sensor del punto de referencia debe estar estructurado de tal modo
que el accionamiento puede frenar de forma segura de la marcha rápida
a la marcha lenta en el área del interruptor.
Contacto inversor

Entrada digital 1I1

Entrada digital 2I1

Durante la parametrización asegúrese de que el inicio de la búsqueda
del punto de referencia esté parametrizada en el sentido del contacto
inversor. Sólo así puede garantizarse que el sensor del punto de refe‐
rencia se encontrará siempre sin problemas.
Entrada de habilitación

Entrada digital 1I2

Entrada digital 2I2

Desarrollo del modo de operación "Búsqueda del punto de referencia"
El botón del sentido de desplazamiento positivo y negativo debe instalarse para cada canal.
1. Introduzca el valor de la coordenada del punto de referencia en el DB de parámetros
(REFPT).
2. Introduzca el tipo de "Búsqueda del punto de referencia" en el DB de parámetros.
Para ello, existen las posibilidades siguientes:
Inicio en sentido ...

Produce la sincronización ...

plus

la primera señal cero después de abandonar el sen‐ REFPT_TYPE = 0
sor del punto de referencia en el sentido positivo

plus

la primera señal cero después de abandonar el sen‐ REFPT_TYPE = 1
sor del punto de referencia en el sentido negativo

menos

la primera señal cero después de abandonar el sen‐ REFPT_TYPE = 2
sor del punto de referencia en el sentido positivo

menos

la primera señal cero después de abandonar el sen‐ REFPT_TYPE = 3
sor del punto de referencia en el sentido negativo

3. Introduzca la velocidad de inicio;
– Marcha rápida (REFPT_SPD = 0)
– Marcha lenta (REFPT_SPD = 1)
4. Escriba y active los datos máquina.
5. Active la señal de control para el modo de operación "Búsqueda del punto de referencia"
(MODE_IN = 3).
6. Active la señal de control para la habilitación del accionamiento (DRV_EN = 1).
7. Active el selector de función para "No evaluar la entrada de habilitación" (EI_OFF = 1) o
cablee la entrada de habilitación para el canal correspondiente.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2719

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
8. Conecte la señal de control para el sentido de marcha positivo o negativo o la señal de inicio
(DIR_P = 1, DIR_M = 1 o START = 1).
9. Llame la instrucción ABS_CTRL.
La tabla siguiente muestra los comandos de inicio para una búsqueda del punto de referencia.
Comando de
inicio

Tarea

Comentario

DIR_P

El accionamiento se inicia en el sentido de
los valores positivos. Se mueve, pues, en
el sentido del final de la zona de despla‐
zamiento.

Si en los datos máquina se introduce un
sentido negativo, el FM 351 notifica un
error de operador. No se realiza ninguna
búsqueda del punto de referencia.

DIR_M

El accionamiento se inicia en el sentido de
los valores negativos. Se mueve, pues, en
el sentido del principio de la zona de des‐
plazamiento.

Si en los datos máquina se introduce un
sentido positivo , el FM 351 notifica un
error de operador. No se realiza ninguna
búsqueda del punto de referencia.

START

El accionamiento se inicia en el sentido
que se ha introducido en los datos máqui‐
na.

Nota
Para el eje rotativo rige lo siguiente: La reproducibilidad del punto de referencia sólo está
garantizado si entre el valor Final del eje rotativo y el valor Recorrido por vuelta existe una
relación de número entero.

La figura siguiente muestra un ejemplo del modo de operación "Búsqueda del punto de
referencia".

2720

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

02'(B,1 
%¼VTXHGDGHOSXQWRGHUHIHUHQFLD
'59B(1
+DELOLWDFLµQGHODFFLRQDPLHQWR
[O
(QWUDGDGHKDELOLWDFLµQ
:$,7B(,
67$57
',5B0',5B3
:25.,1*
6<1&

YU£SLGD
YOHQWD
V

6HQVRUGHO
SXQWRGH
UHIHUHQFLD

6H³DOFHUR

* Las señales de inicio se desactivan con la instrucción ABS_CTRL.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

15.0

START

BOOL

FALSE

1 = Iniciar operación de posicionamiento

15.2

DIR_M

BOOL

FALSE

1 = Sentido negativo

15.3

DIR_P

BOOL

FALSE

1 = Sentido positivo

15.7

DRV_EN

BOOL

FALSE

1 = Conectar habilitación del accionamiento

16.0

MODE_IN

BYTE

B#16#0

3 = Búsqueda del punto de referencia

23.0

ST_ENBLD

BOOL

FALSE

1 = Habilitar inicio

23.1

WORKING

BOOL

FALSE

1 = Operación de posicionamiento en curso

23.2

WAIT_EI

BOOL

FALSE

1 = El eje espera una habilitación externa

25.0

SYNC

BOOL

FALSE

1 = Eje sincronizado

34.2

EI_OFF

BOOL

FALSE

1 = No evaluar entrada de habilitación

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2721

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

44.0

REFPT

DINT

L#0

Coordenada del punto de referencia

52.0

REFPT_TYPE

DINT

L#0

Tipo de búsqueda del punto de referencia

99.0

REFPT_SPD

BOOL

TRUE

Velocidad de inicio para la búsqueda del punto de
referencia
0 = Marcha rápida
1 = Marcha lenta

Efectos del modo de operación
● Con el inicio de la marcha se elimina la sincronización.
● La posición real se ajusta al valor de la coordenada del punto de referencia si se activa la
señal de realimentación SYNC.
● La zona de trabajo se fija en el eje.
● Los distintos puntos dentro de la zona de trabajo conservan sus valores originales, pero se
encuentran en posiciones físicas nuevas.

Cancelación de la búsqueda del punto de referencia
El modo de operación "Búsqueda del punto de referencia" se cancela cuando
● la señal de habilitación del accionamiento se borra (DRV_EN = 0),
● se ha rebasado un límite de la zona de desplazamiento en un eje lineal.

Búsqueda del punto de referencia dependiente de la posición de inicio
En una búsqueda del punto de referencia es preciso distinguir diversos casos que dependen
● de la posición del accionamiento al iniciar una búsqueda del punto de referencia,
● del sentido de arranque parametrizado,
● de la posición parametrizada de la señal cero respecto al sensor del punto de referencia.

2722

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La tabla siguiente muestra los casos de REFPT_TYPE = 0 y REFPT_TYPE = 1. Para
REFPT_TYPE = 2 y REFPT_TYPE = 3 rigen las figuras según corresponda.
Condiciones para la búsqueda del punto de referencia

Desarrollo de la búsqueda del punto de referencia

Ejemplo de búsqueda del punto de referencia
(REFPT_TYPE = 0):

1

● El sentido de arranque es positivo.
● La posición de la señal cero del sensor del punto de
referencia está parametrizada en sentido positivo.

5()
YU£SLGD
YOHQWD
3RVLFLµQLQLFLDO

6<1&

Ejemplo de búsqueda del punto de referencia
(REFPT_TYPE = 1):

1

● El sentido de arranque es positivo.
● La posición de la señal cero del sensor del punto de
referencia está parametrizado en el sentido negativo.

5()
YU£SLGD
YOHQWD
6<1&
3RVLFLµQLQLFLDO

5
YOHQWD

Ejemplo de búsqueda del punto de referencia
(REFPT_TYPE = 0):

1

● El sentido de inicio debe estar parametrizado en sentido
positivo.
● La posición de la señal cero del sensor del punto de
referencia está parametrizada en sentido positivo.
● El contacto inversor es más positivo que el sensor del
punto de referencia.

5()
YU£SLGD
YOHQWD
3RVLFLµQLQLFLDO

6<1&

Ejemplo de búsqueda del punto de referencia
(REFPT_TYPE = 1):

1

● El sentido de arranque es positivo.
● La posición de la señal cero del sensor del punto de
referencia está parametrizado en el sentido negativo.
● La posición de inicio de la búsqueda del punto de
referencia se encuentra en el sensor del punto de
referencia.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

5()
6<1&

3RVLFLµQLQLFLDO

YOHQWD

2723

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Condiciones para la búsqueda del punto de referencia

Desarrollo de la búsqueda del punto de referencia

Ejemplo de búsqueda del punto de referencia
(REFPT_TYPE = 0):

1

● El sentido de arranque es positivo.

5()

● La posición de la señal cero del sensor del punto de
referencia está parametrizada en sentido positivo.
● El contacto inversor es más positivo que el sensor del
punto de referencia.

80
YU£SLGD
YOHQWD

6<1& 3RVLFLµQLQLFLDO

5

5

YOHQWD
YU£SLGD

Ejemplo de búsqueda del punto de referencia
(REFPT_TYPE=0):

1

● El sentido de arranque es positivo.
● La posición de la señal cero del sensor del punto de
referencia está parametrizada en sentido positivo.

5()
YOHQWD

● Velocidad de inicio = velocidad lenta
3RVLFLµQLQLFLDO

6<1&

R = Inversión del sentido
REF = Sensor del punto de referencia
UM = Contacto inversor
N = señal cero del encóder
SYNC = Se ha alcanzado la sincronización

Modo de operación "Modo incremental"
Definición
En el modo de operación "Modo incremental" el FM 351 puede mover el accionamiento
● a destinos absolutos,
● mover el accionamiento de forma relativa alrededor de una parte del trayecto en un sentido
predeterminado.
El objetivo o los recorridos relativos se predeterminan como incrementos del FM 351. Tiene la
posibilidad de insertar un máximo de 100 incrementos en una tabla, que son válidas tanto el
modo de operación "Modo incremental relativo" como para el "Modo incremental absoluto".
Independientemente de la tabla de incrementos es posible especificar el recorrido con el
número de incremento 254 (Página 2769) y el número de incremento 255 (Página 2769).

2724

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Requisitos
● El eje debe estar parametrizado.
● El eje debe estar sincronizado.
● Los incrementos deben estar presentes en el módulo.

Interpretación de los incrementos
En función del modo incremental que se seleccione, el FM 351 interpreta los datos
especificados de una manera u otra.
● Modo incremental absoluto: Los incrementos se interpretan como posición de destino
absoluta.
● Modo incremental relativo: Los incrementos se interpretan como diferencia de recorrido
desde la posición de inicio.
Nota
Para el modo de operación "Modo incremental relativo" sólo se permiten incrementos positivos.
Los incrementos obtienen su signo mediante las especificaciones de sentido DIR_P o DIR_M.

Desarrollo del modo de operación "Modo incremental" con número de incremento 1 a 100
Paso

Modo incremental absoluto

Modo incremental relativa

Número de incremento 1 a 100
1

Active la señal de control para el modo
Active la señal de control para el modo de ope‐
de operación "Modo incremental absolu‐ ración "Modo incremental relativo" (MO‐
to" (MODE_IN = 5).
DE_IN = 4).

2

Anote los incrementos en las tablas (TRGL1; TRGL2).

3

Escriba las tablas de incrementos (TRGL1/2WR_EN = 1).

4

Active la señal de control para la habilitación del accionamiento (DRV_EN = 1).

5

Active el selector de función para "No evaluar la entrada de habilitación" (EI_OFF = 1) o
cablee la entrada de habilitación para el canal correspondiente.

6

Introduzca el número de incremento (MODE_TYPE = 1 … 100).

7

Active la señal de control:

Active la señal de control:

● Eje lineal:

● Eje lineal:

–

START; el sentido se determina
de forma unívoca a través del
destino y el valor real actual.

● Eje rotativo:
–

START; se llega al punto de
destino por el trayecto más corto.

–

DIR_P; Inicio en sentido positivo

–

DIR_M; Inicio en sentido negativo

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

–

DIR_P; Inicio en sentido positivo

–

DIR_M; Inicio en sentido negativo

● Eje rotativo:
–

DIR_P; Inicio en sentido positivo

–

DIR_M; Inicio en sentido negativo

2725

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Paso

Modo incremental absoluto

Modo incremental relativa

Número de incremento 1 a 100
8

Llame la instrucción ABS_CTRL.

Los pasos 2 y 3 se necesitan ahora si no hay aún incrementos o si es preciso modificar las medidas
existentes.

Desarrollo del modo de operación "Modo incremental" con número de incremento 254
Paso

Modo incremental absoluto

Modo incremental relativa

Número de incremento 254
1

Active la señal de control para el modo
Active la señal de control para el modo de ope‐
de operación "Modo incremental absolu‐ ración "Modo incremental relativo" (MO‐
to" (MODE_IN = 5).
DE_IN = 4).

2

Active la señal de control para la habilitación del accionamiento (DRV_EN = 1).

3

Active el selector de función para "No evaluar la entrada de habilitación" (EI_OFF = 1) o
cablee la entrada de habilitación para el canal correspondiente.

4

Introduzca el número de incremento (MODE_TYPE = 254).

5

Introduzca el incremento para el número de incremento 254 (TRG252_254).

6

Active el bit de inicio para escribir el incremento (TRG252_254_EN = 1).

7

Active la señal de control:

Active la señal de control:

● Eje lineal:

● Eje lineal:

–

START; el sentido se determina
de forma unívoca a través del
destino y el valor real actual.

● Eje rotativo:

8

–

START; se llega al punto de
destino por el trayecto más corto.

–

DIR_P; Inicio en sentido positivo

–

DIR_M; Inicio en sentido negativo

–

DIR_P; Inicio en sentido positivo

–

DIR_M; Inicio en sentido negativo

● Eje rotativo:
–

DIR_P; Inicio en sentido positivo

–

DIR_M; Inicio en sentido negativo

Llame la instrucción ABS_CTRL.

Desarrollo del modo de operación "Modo incremental" con número de incremento 255
Paso

Modo incremental absoluto

Modo incremental relativa

Número de incremento 255

2726

1

Active la señal de control para el modo
Active la señal de control para el modo de ope‐
de operación "Modo incremental absolu‐ ración "Modo incremental relativo" (MO‐
to" (MODE_IN = 5).
DE_IN = 4).

2

Active la señal de control para la habilitación del accionamiento (DRV_EN = 1).

3

Active el selector de función para "No evaluar la entrada de habilitación" (EI_OFF = 1) o
cablee la entrada de habilitación para el canal correspondiente.

4

Introduzca el número de incremento (MODE_TYPE = 255).

5

Introduzca el incremento para el número de incremento 255 (TRG255).

6

Introduzca el valor para la distancia de cambio de velocidad del número de incremento 255
(CHGDIF255).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Paso

Modo incremental absoluto

Modo incremental relativa

Número de incremento 255
7

Introduzca el valor para la distancia de desconexión del número de incremento 255 (CUT‐
DIF255).

8

Active el bit de inicio para escribir el incremento y la distancia de desconexión y de cambio
de velocidad (TRG255_EN = 1).

9

Active la señal de control:

Active la señal de control:

● Eje lineal:

● Eje lineal:

–

START; el sentido se determina
de forma unívoca a través del
destino y el valor real actual.

● Eje rotativo:

10

–

START; se llega al punto de
destino por el trayecto más corto.

–

DIR_P; Inicio en sentido positivo

–

DIR_M; Inicio en sentido negativo

–

DIR_P; Inicio en sentido positivo

–

DIR_M; Inicio en sentido negativo

● Eje rotativo:
–

DIR_P; Inicio en sentido positivo

–

DIR_M; Inicio en sentido negativo

Llame la instrucción ABS_CTRL.

La figura siguiente muestra un ejemplo del modo de operación "Modo incremental".
02'(B,1 
0RGRLQFUHPHQWDO
'59B(1
+DELOLWDFLµQGHODFFLRQDPLHQWR
[O
(QWUDGDGHKDELOLWDFLµQ
:$,7B(,
67$57
',5B0',5B3



:25.,1*
326B5&'
3(+ 

YU£SLGD
YOHQWD
V

* Las señales de inicio se resetean con la instrucción ABS_CTRL.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2727

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

15.0

START

BOOL

FALSE

1 = Iniciar posicionamiento

15.2

DIR_M

BOOL

FALSE

1 = Sentido negativo

15.3

DIR_P

BOOL

FALSE

1 = Sentido positivo

15.7

DRV_EN

BOOL

FALSE

1 = Conectar habilitación del accionamiento

16.0

MODE_IN

BYTE

B#16#0

4 = Modo incremental relativo
5 = Modo incremental absoluto

17.0

MODE_TYPE

BYTE

B#16#0

Número de incremento 1 … 100, 254 o 255

23.0

ST_ENBLD

BOOL

FALSE

1 = Habilitar inicio

23.1

WORKING

BOOL

FALSE

1 = Posicionamiento en curso

23.2

WAIT_EI

BOOL

FALSE

1 = El eje espera una habilitación externa

25.7

POS_RCD

BOOL

FALSE

1 = Posición alcanzada

34.2

EI_OFF

BOOL

FALSE

1 = No evaluar entrada de habilitación

36.2

TRG252_254_EN

BOOL

FALSE

1 = Escribir incremento para número de incremento 254

36.3

TRG255_EN

BOOL

FALSE

1 = Escribir incremento para número de incremento 255

35.4

TRGL1WR_EN

BOOL

FALSE

1 = Escribir tabla de incrementos 1 (número de incremento
1 ... 50)

35.5

TRGL2WR_EN

BOOL

FALSE

1 = Escribir tabla de incrementos 2 (número de incremento
51 ... 100)

96.0

TRG252_254

DINT

L#0

Incremento para número de incremento 254

100.0

TRG255

DINT

L#0

Incremento para número de incremento 255

104.0

CHGDIF_255

DINT

L#0

Distancia de cambio de velocidad para número de incre‐
mento 255

108.0

CUTDIF_255

DINT

L#0

Distancia de desconexión para número de incremento 255

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

100.0

CHGDIF_P

DINT

L#5000

Distancia de cambio de velocidad positiva

104.0

CHGDIF_M

DINT

L#5000

Distancia de cambio de velocidad negativa

108.0

CUTDIF_P

DINT

L#2000

Distancia de desconexión positiva

112.0

CUTDIF_M

DINT

L#2000

Distancia de desconexión negativa

120.0

TRGL1.TRG[1]

DINT

L#0

Número de incremento 1

.

.

.

.

.

.

.

.

.

.

Tabla de incrementos 1

.

.

.

.

.

316.0

TRGL1.TRG[50]

DINT

L#0

Número de incremento 50

320.0

TRGL2.TRG[51]

DINT

L#0

Número de incremento 51

.

.

.

.

.

.

.

.

.

.

.

.

.

.

.

516.0

TRGL2.TRG[100]

DINT

L#0

Número de incremento 100

2728

Tabla de incrementos 2

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Distancia residual
La distancia residual es la diferencia entre el destino (incremento) y el tiempo real. La distancia
residual es
● positivo si aún no ha alcanzado el destino.
● negativo si ya se ha rebasado el destino.
En un eje rotativo no puede utilizarse la distancia residual mostrada.

Desactivación del modo incremental
El modo de operación "Modo incremental" se desactiva si el FM 351 recibe una señal de STOP
(STOP = 1).
Tras la desactivación de la marcha se mantiene la distancia residual.
La distancia residual del "Modo incremental relativo" puede realizarse hasta el final si
● el modo de operación no ha cambiado y
● el número de incremento no ha cambiado y
● el sentido no ha cambiado y
● la distancia residual es mayor que la distancia de desconexión parametrizada.
La distancia residual se realiza ejecutando de nuevo el "Modo incremental relativo" sin
cambios.

Cancelación del modo incremental
El modo de operación "Modo incremental" se cancela si la señal "Habilitación del
accionamiento" se borra (DRV_EN = 0).

Borrar distancia residual
La petición "Borrar distancia residual" borra una distancia residual pendiente.
Al llamar otro modo de operación o iniciar el modo de operación en el otro sentido también se
borra la distancia residual pendiente.

Dato utilizado en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

35.2

DELDIST_EN

BOOL

FALSE

1 = Borrar distancia residual

Petición "Definir valor real" / "Cancelar preselección del valor real"
Definición
Con la petición "Ajustar valor real" se asigna una nueva coordenada al estado actual del
encóder. La zona de trabajo se proyecta sobre otra zona del eje.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2729

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
El desplazamiento de la zona de trabajo se calcula con (REALnuevo - REALactual).
● REALnuevo es el valor predeterminado
● REALactual es el valor real en el instante de la ejecución

Requisitos
● El eje debe estar parametrizado.
● El eje debe estar sincronizado.

Desarrollo de la petición
1. Introduzca las coordenadas AVAL para el valor real (REALnuevo).
– Eje lineal:
El valor real indicado se debe seleccionar de tal modo que los finales de carrera por
software se encuentren todavía dentro de la zona de desplazamiento admitido tras la
llamada de la petición.
El valor de decalaje que resulta de (REALnuevo - REALactual) tiene que ser menor o igual
al valor de la zona de desplazamiento admisible (máximo 100 m o 1000 m,
respectivamente).
– Eje rotativo:
Para el valor real indicado rige:
0 ≤ Valor real < Final del eje rotativo
2. Active el bit de inicio correspondiente (AVAL_EN = 1).
Si se emite la petición "Ajustar valor real" durante un posicionamiento, se retiene hasta el final
del posicionamiento y no se realiza hasta que se llama el bloque.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

35.7

AVAL_EN

BOOL

FALSE

1 = Ajustar valor real

84.0

AVAL

DINT

L#0

Coordenada de "Ajustar valor real"

Efectos de la petición
En el ejemplo "Ajustar valor real" en 300 mm se ve cómo esta petición proyecta la zona de
trabajo a una posición concreta del eje. De ello se derivan los siguientes efectos:
● La posición real se fija en el valor de la coordenada del valor real.
● La zona de trabajo se desplaza hacia el eje.
● Los distintos puntos (por ejemplo, fin del final de carrera por software) dentro de la zona de
trabajo conservan su valor original, pero se encuentran en posiciones físicas nuevas.

2730

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La tabla siguiente muestra el desplazamiento de la zona de trabajo en el eje a través de la
función "Ajustar valor real".
Ajustar valor real

(MH

)&6,

5($/


REA
L

FCSF

-400

100

400

-400

300

400

6LVWHPDGHFRRUGHQDGDVDQWHULRU
)&6)




>PP@

EDM R





FCSI

=RQ

DGH

W U D

3UR\HFFLµQGHOD
]RQDGHWUDEDMR
DWUDY«VGHOYDORU
UHDO VHGHILQHHQ
PP









5($/ )&6)

)&6,

1XHYRVLVWHPDGHFRRUGHQDGDV

Deshacer una petición ("Cancelar preselección del valor real")
Con la petición "Cancelar preselección del valor real" se deshacen todos los desplazamientos
de la zona de trabajo que se han creado con "Ajustar valor real".
La suma de todos los desplazamientos de la zona de trabajo no puede ser superior a la zona
de desplazamiento para que esta petición pueda ejecutarse correctamente.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

35.3

AVALREM_EN

BOOL

FALSE

1 = Cancelar preselección del valor real

Petición "Definir punto de referencia"
Definición
Con la petición "Definir punto de referencia" se sincroniza el eje. Esta petición desplaza la zona
de trabajo. Todos los decalajes generados por la función "Ajustar valor real" se conservan.
Este ajuste proyecta la zona de trabajo sobre el eje. Así, con distintas entradas de valores, la
zona de trabajo puede encontrarse en posiciones diferentes dentro del rango físico del eje.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2731

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Requisitos
● El posicionamiento debe haber finalizado.
● El eje debe estar parametrizado.

Desarrollo de la petición
1. Introduzca el valor REFPT para las coordenadas del punto de referencia.
– Eje lineal:
La coordenada del punto de referencia no puede encontrarse fuera de los finales de carrera
por software. Esto rige también para la coordenada del punto de referencia de un sistema
de coordenadas desplazado.
– Eje rotativo:
Para la coordenada del punto de referencia rige:
0 ≤ Coordenada del punto de referencia < Final del eje rotativo
2. Active el bit de inicio correspondiente (REFPT_EN = 1).

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

25.0

SYNC

BOOL

FALSE

1 = Eje sincronizado

35.6

REFPT_EN

BOOL

FALSE

1 = Definir punto de referencia

92.0

REFPT

DINT

L#0

Coordenada del punto de referencia

Efectos de la petición
En el ejemplo "Definir punto de referencia" en 400 mm se ve cómo esta petición proyecta la
zona de trabajo a una posición física concreta del eje. De ello se derivan los siguientes efectos:
● La posición real se fija en el valor de la coordenada del punto de referencia.
● La zona de trabajo se desplaza hacia el eje.
● Los distintos puntos (por ejemplo, fin del final de carrera por software) conservan su valor
original pero se encuentran en posiciones físicas nuevas.
● El bit SYNC de las señales de respuesta se activa.

2732

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La tabla siguiente muestra el desplazamiento de la zona de trabajo en el eje a través de la
función "Definir punto de referencia".
Definir punto de referencia

(MH

REAL

FCSF

-400

200

400

-400

400

400

6LVWHPDGHFRRUGHQDGDVDQWHULRU
5($/ )&6)

)&6,










>PP@

DGH

WUD

EDM R

3UR\HFFLµQGHOD
]RQDGHWUDEDMR
DFWLYDUDWUDY«VGH
SXQWRGHUHIHUHQFLD
PP

=RQ


FCSI



)&6,



5($/ ) &6)
1XHYRVLVWHPDGHFRRUGHQDGDV

Particularidades del encóder absoluto
Esta petición es necesaria para un reajuste del encóder absoluto (Página 2755).

Selector de función "Aproximación en bucle"
Definición
Con la "Aproximación en bucle" define el sentido en el que se avanza hacia el punto de destino
con cierre de fuerza. La aproximación en bucle puede utilizarse cuando sólo se puede
garantizar el cierre de fuerza en un sentido entre el motor y el eje.
El destino al que se realiza la aproximación en contra del sentido predefinido se rebasa al
principio. A continuación, el módulo realiza una inversión del sentido y realiza la aproximación
al destino en el sentido predeterminado.

Requisitos
● El eje debe estar parametrizado.
● El eje debe estar sincronizado.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2733

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
● En una aproximación en bucle en contra del sentido del desplazamiento hacia el destino,
la posición de destino se encuentra:
– en el sentido de desplazamiento positivo
Destino < SEE - ½ zona de destino - distancia de desconexión positiva - distancia de
cambio de velocidad negativa
– en el sentido de desplazamiento negativo
Destino < SEA + ½ zona de destino + distancia de desconexión negativa + distancia de
cambio de velocidad positiva
● Una aproximación en bucle no se lleva a cabo, si la aproximación al destino se realiza en
el sentido de la aproximación en bucle. En este caso se realiza un posicionamiento en modo
incremental sin inversión del sentido.
● Hay que conocer el transcurso del modo de operación "Modo incremental" (Página 2724).

Desarrollo de la aproximación en bucle
1. Active la señal de control para el modo de operación "Modo incremental absoluto/relativo"
(MODE_IN = 5/4).
2. Active la señal de control para la habilitación del accionamiento (DRV_EN = 1).
3. Active el selector de función "Entrada de habilitación" (EI_OFF = 1) o cablee la entrada de
habilitación para el canal correspondiente.
4. Introduzca el número de incremento (MODE_TYPE = 1 … 100, 254, 255).
5. Active el selector de función "Aproximación en bucle" (PLOOP_ON / MLOOP_ON = 1).
6. Inicie el modo incremental.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

15.0

START

BOOL

FALSE

1 = Iniciar posicionamiento

15.2

DIR_M

BOOL

FALSE

1 = Sentido negativo

15.3

DIR_P

BOOL

FALSE

1 = Sentido positivo

15.7

DRV_EN

BOOL

FALSE

1 = Conectar habilitación del accionamiento

16.0

MODE_IN

BYTE

B#16#0

4 / 5 = Modo incremental relativo/absoluto

17.0

MODE_TYPE

BYTE

B#16#0

Número de incremento 1 … 100, 254 ó 255

34.0

PLOOP_ON

BOOL

FALSE

1 = Aproximación en bucle en sentido positivo

34.1

MLOOP_ON

BOOL

FALSE

1 = Aproximación en bucle en sentido negativo

34.2

EI_OFF

BOOL

FALSE

1 = No evaluar entrada de habilitación

Destino ficticio
Si inicia un posicionamiento en un destino que se encuentra en el sentido opuesto a la
aproximación en bucle parametrizada, el módulo determina para este destino un destino
ficticio en el que éste ejecuta una inversión del sentido y, después, se aproxima al destino en
el sentido correcto.

2734

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Este destino ficticio tiene que encontrarse al menos a media zona de destino delante del final
de carrera por software correspondiente.
La eliminación del destino ficticio del destino parametrizado se determina en función del
sentido. La tabla siguiente muestra el cálculo de la situación del destino ficticio en la
aproximación en bucle.
Preajustes

Posición del destino ficticio

Parametrización:

El destino ficticio (Destinof) tiene el valor:

Bucle + (cierre de fuerza positi‐
vo) y marcha en sentido negati‐ Destino = Destino - Distancia de desconexión negativa - distancia de
f
vo
cambio de velocidad positiva
 'HVWLQRILFWLFLR 2EMHWLYR

Parametrización:

3RVLFLµQLQLFLDO

El destino ficticio (Destinof) tiene el valor:

Bucle - (cierre de fuerza negati‐
vo) y marcha en el sentido posi‐ Destino = Destino + Distancia de desconexión positiva + distancia
f
tivo
de cambio de velocidad negativa
 3RVLFLµQLQLFLDO

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2EMHWLYR

'HVWLQRILFWLFLR

2735

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Ejemplo
A continuación se muestra la posición del destino ficticio tomando como base un
posicionamiento con aproximación en bucle negativa hacia un destino máximo.
YU£SLGD

'HVWLQRILFWLFLR

)LQDOGHFDUUHUDSRU
VRIWZDUH)LQ

YOHQWD


2EMHWLYR




&DPELRGH
VHQWLGR

YOHQWD

①
②
③

Distancia de cambio de velocidad negativa
Distancia de desconexión positiva
½ zona de destino

Selector de función "Entrada de habilitación"
Definición
La entrada de habilitación es una entrada externa con la que puede habilitarse un
posicionamiento a través de un evento externo.

Evaluar entrada de habilitación (EI_OFF = 0)
La entrada de habilitación correspondiente (xI2) para el canal debe estar cableada.
Con ello tiene la posibilidad de preparar el inicio de un posicionamiento. El posicionamiento se
inicia independientemente del desarrollo del programa de usuario creando una señal "1" en la
entrada de habilitación.
La marcha comienza cuando se crea una señal "1" en la entrada de habilitación y se desactiva
cuando se crea una señal "0" en la entrada de habilitación.

No evaluar entrada de habilitación (EI_OFF = 1)
Si desconecta la evaluación de la entrada de habilitación, un modo de operación comienza
inmediatamente después de detectar la señal de inicio. A continuación no es posible preparar
un modo de operación ni iniciarlo en un instante posterior concreto.

2736

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

34.2

EI_OFF

BOOL

FALSE

1 = No evaluar entrada de habilitación

Petición "Leer datos de posición"
Definición
Con la petición "Leer datos de posición" es posible leer el incremento, la distancia residual y la
velocidad en el instante actual.

Desarrollo de la petición
1. Active el bit de inicio en el DB de canal (ACTSPD_EN = 1).
2. Los datos se depositan en el DB de canal.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

37.1

ACTSPD_EN

BOOL

FALSE

1 = Leer datos de posición

112.0

ACTSPD

DINT

L#0

Velocidad actual

116.0

DIST_TO_GO

DINT

L#0

Distancia residual

120.0

ACT_TRG

DINT

L#0

Incremento actual

Petición "Leer datos del encóder"
Definición
Con la petición "Leer datos de encóder" se leen los datos actuales del encóder, así como el
valor del reajuste del encóder absoluto.

Requisitos
Es posible leer el valor para el reajuste del encóder absoluto (Página 2755) después de
ejecutar la petición "Definir punto de referencia" (Página 2731).

Desarrollo de la petición
1. Active el bit de inicio en el DB de canal (ENCVAL_EN = 1).
2. Los datos se depositan en el DB de canal.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2737

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

37.2

ENCVAL_EN

BOOL

124.0

ENCVAL

128.0

ZEROVAL

132.0

ENC_ADJ

DINT

valor inicial

Comentarios

FALSE

1 = Leer valores del encóder

DINT

L#0

Valor real del encóder (representación interna)

DINT

L#0

Último valor de la marca cero (representación interna)

L#0

Reajuste del encóder absoluto

Consultar señales de respuesta del posicionamiento
Definición
Con la función "Señales de respuesta para el posicionamiento" se informa del estado actual del
posicionamiento.

Desarrollo
1. Con cada llamada de la instrucción ABS_CTRL los datos se depositan en el DB de canal.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

23.0

ST_ENBLD

BOOL

FALSE

1 = Habilitar inicio

23.1

WORKING

BOOL

FALSE

1 = Posicionamiento en curso

23.2

WAIT_EI

BOOL

FALSE

1 = El eje espera una habilitación externa

23.4

SPEED_OUT

BOOL

FALSE

0 = Marcha lenta
1 = Marcha rápida

23.5

ZSPEED

23.6

CUTOFF

23.7

CHGOVER

24.0

MODE_OUT

25.2

GO_M

25.3

GO_P

25.7

POS_RCD

26.0

ACT_POS

BOOL

FALSE

1 = El eje se encuentra en la zona de parada

BOOL

FALSE

1 = El eje se encuentra en el área de desconexión

BOOL

FALSE

1 = El eje se encuentra en la zona de cambio de velocidad

BYTE

B#16#0

Modo de operación activo

BOOL

FALSE

1 = El eje se desplaza en sentido negativo

BOOL

FALSE

1 = El eje se desplaza en sentido positivo

BOOL

FALSE

1 = Posición alcanzada

DINT

L#0

Valor real actual (posición actual del eje)

Consultar las señales de realimentación del diagnóstico
Definición
Con las "Señales de respuesta del diagnóstico" se recibe información sobre los eventos de
diagnóstico que se han producido.

2738

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Desarrollo
1. Cuando el módulo introduce un nuevo evento en el búfer de diagnóstico, activa el bit DIAG
en la interfaz de respuesta. Cada aparición de un error (Página 2782) provoca una entrada
en el búfer de diagnóstico. Al borrar el búfer de diagnóstico se activa el bit DIAG.
2. Si no es posible llamar un modo de operación o controlar un modo de operación activo, o
si esta operación se ha realizado de forma errónea, el módulo activa un error de operador
OT_ERR en la interfaz de respuesta. La causa del error se registra en el búfer de
diagnóstico. Mientras el error de operador está activo, no es posible iniciar un modo de
operación ni continuar el modo de operación detenido. Un error de operador existente se
confirma con OT_ERR_A = 1.
3. Cuando el módulo detecta una petición de escritura con datos erróneos, activa el bit
DATA_ERR en la interfaz de respuesta. La causa del error se registra en el búfer de
diagnóstico.
4. Las señales de respuesta se depositan en el DB de canal.
5. Si se ha leído el búfer de diagnóstico, el módulo restablece el bit DIAG a 0 en todos los
canales.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

22.2

DIAG

BOOL

FALSE

1 = Búfer de diagnóstico modificado

22.3

OT_ERR

BOOL

FALSE

1 = Error de operador

22.4

DATA_ERR

BOOL

FALSE

1 = Error de datos

6.3.5.3

Configurar FM 351

6.3.5.4

Parametrizar el FM 351

Especificar canales
Seleccionar sistema de medidas
Seleccionar sistema de medidas
Para la entrada y salida de datos es posible elegir entre los siguientes sistemas de medida:
● Milímetros (ajuste predeterminado)
● Inch
● Grados

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2739

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Nota
Si se modifica el sistema de medida en el cuadro de diálogo "Especificar canales", los valores
se convierten al nuevo sistema. Aquí se pueden producir errores de redondeo.
Si se modifica el sistema de medida mediante el dato máquina, los valores no se convierten
automáticamente.

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentario

8.0

UNITS

DINT

L#1

Sistema de medida
Valores permitidos:
● 1 = 10-3 mm
● 2 = 10-4 pulgadas
● 3 = 10-4 grados
● 4 = 10-2 grados
● 6 = 10-3 grados

Sistema de medida estándar en la ayuda en pantalla
Para la indicación de valores mínimos y máximos se utiliza el sistema de medida mm. Por ello,
para determinar los valores límite en los otros sistemas de medida, realice la conversión
siguiente:
Para convertir de

calcule

mm → pulgadas

Valor límite (inch) = valor límite (mm) × 0,1 1)

mm → grados

10-4 (4 decimales)

Valor límite (grados) = valor límite (mm) × 0,1

10-3 (3 decimales)

Valor límite (grados) = valor límite (mm) × 1

10 (2 decimales)

Valor límite (grados) = valor límite (mm) × 10

-2

pulgadas → grados
1)

Valor límite (grados) = valor límite (pulgadas)

En el valor máximo el número de decimales repercute en el número de dígitos que preceden a la
coma. En el sistema de medida Inch se utilizan 4 decimales, por lo tanto se pueden introducir como
máximo 100 000,0000 inch. El sistema de medida Milímetros utiliza 3 decimales y por lo tanto se
pueden introducir como máximo 1 000 000,000 mm.

Relación entre los incrementos y el sistema de medida
Las señales del encóder de un dispositivo conectado son evaluadas por el módulo y se
convierten al sistema actual. Para la conversión se utiliza la resolución (Página 2762).
Si el módulo de posicionamiento
● ha contado 10 incrementos y
● ha ajustado una resolución de 100 µm por incremento a través de los datos de encóder
parametrizados,

2740

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
esto significa que el eje se ha movido un trayecto de 1 mm.

Copiar canales
Copiar canales
Este parámetro permite copiar un canal en otro canal.
1. Seleccione el canal cuyos parámetros desee copiar (origen del canal).
2. Active el canal en el que desee copiar los parámetros (destino del canal).
3. Pulse el botón "Copiar".

Accionamiento del canal n
Seleccionar el modo de control
Visión global de los tipos de control
Sinopsis
El modo de control define el modo en que se utiliza un motor en las 4 salidas digitales (Q) de
un canal a través de la etapa de potencia. Para el módulo de posicionamiento existen 4 modos
de control por canal:
● Modo de control 1 (Página 2742)
● Modo de control 2 (Página 2743)
● Modo de control 3 (Página 2744)
● Modo de control 4 (Página 2744)
La siguiente tabla muestra los estados de las 4 salidas digitales para cada modo de control,
donde x representa los canales 1 y 2.
Marcha rápida
Sentido +

Marcha lenta
Sentido -

Sentido +

Sentido -

PEH
La posición alcanza la pa‐
rada

Modo de control 1
xQ0

1

1

0

0

-

xQ1

0

0

1

1

-

xQ2

1

0

1

0

-

xQ3

0

1

0

1

-

Modo de control 2
xQ0

1

1

0

0

0

xQ1

0

0

0

0

1

xQ2

1

0

1

0

0

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2741

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Marcha rápida

xQ3

Sentido +

Sentido -

Marcha lenta
Sentido +

Sentido -

PEH
La posición alcanza la pa‐
rada

0

1

0

1

0

Modo de control 3
xQ0

1

1

0

0

-

xQ1

1

1

1

1

-

xQ2

1

0

1

0

-

xQ3

0

1

0

1

-

Modo de control 4
xQ0

1

0

0

0

-

xQ1

1

0

1

0

-

xQ2

0

1

0

0

-

xQ3

0

1

0

1

-

Modo de control 1
Modo de control 1
En el modo de control 1 se aplican los ajustes siguientes (x representa el canal n):
● xQ0: Marcha rápida
● xQ1: Marcha lenta
● xQ2: Desplazamiento +
● xQ3: Desplazamiento La figura siguiente muestra la función de las salidas digitales en el modo de control 1.
YU£SLGD

6H³DOGHUHWURDOLPHQWDFLµQ
3(+ 

YOHQWD

2742

0DUFKDU£SLGD

[4

0DUFKDOHQWD

[4

'HVSOD]DPLHQWR

[4

'HVSOD]DPLHQWR

[4

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

92.0

CTRL_TYPE

DINT

L#1

1 = Modo de control 1

Modo de control 2
Modo de control 2
En el modo de control 2 se aplican los ajustes siguientes (x representa el canal n):
● xQ0: Marcha rápida/lenta
● xQ1: Posición alcanzada
● xQ2: Desplazamiento +
● xQ3: Desplazamiento La figura siguiente muestra la función de las salidas digitales en el modo de control 2.
YU£SLGD
3(+ 
YOHQWD

0DUFKDU£SLGDOHQWD

[4

3RVLFLµQDOFDQ]DGD

[4

'HVSOD]DPLHQWR

[4

'HVSOD]DPLHQWR

[4

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

92.0

CTRL_TYPE

DINT

L#1

2 = Modo de control 2

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2743

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Modo de control 3
Modo de control 3
En el modo de control 3 se aplican los ajustes siguientes (x representa el canal n):
● xQ0: Marcha rápida
● xQ1: Marcha lenta
● xQ2: Desplazamiento +
● xQ3: Desplazamiento La figura siguiente muestra la función de las salidas digitales en el modo de control 3.
YU£SLGD

6H³DOGHUHWURDOLPHQWDFLµQ
3(+ 

YOHQWD

0DUFKDU£SLGD

[4

0DUFKDOHQWD

[4

'HVSOD]DPLHQWR

[4

'HVSOD]DPLHQWR

[4

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

92.0

CTRL_TYPE

DINT

L#1

3 = Modo de control 3

Modo de control 4
Modo de control 4
En el modo de control 4 se aplican los ajustes siguientes (x representa el canal n):
● xQ0: Marcha rápida +
● xQ1: Marcha lenta +
● xQ2: Marcha rápida ● xQ3: Marcha lenta La figura siguiente muestra la función de las salidas digitales en el modo de control 4.

2744

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
YU£SLGD

6H³DOGHUHWURDOLPHQWDFLµQ
3(+ 

YOHQWD

0DUFKDU£SLGD

[4

0DUFKDOHQWD

[4

0DUFKDU£SLGD

[4

0DUFKDOHQWD

[4

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

92.0

CTRL_TYPE

DINT

L#1

4 = Modo de control 4

Definir distancia de cambio de velocidad
Distancia de cambio de velocidad
La "Distancia de cambio de velocidad" define la distancia con respecto al punto de destino en
el que el accionamiento cambia la velocidad, de velocidad rápida a velocidad lenta.
Los valores predefinidos se aplican a todos los objetivos a los que se aproxima el módulo de
posicionamiento. Una excepción está constituida por el modo incremental con el incremento
255, para la que se define una distancia de cambio de velocidad especial.

Reglas para la distancia de cambio de velocidad
● La distancia de cambio de velocidad positiva y la distancia de cambio de velocidad negativa
no tienen por qué estar dispuestas de forma simétrica en torno al destino. Los valores
pueden ser muy distintos.
● La distancia de cambio de velocidad debe ser mayor que la distancia de desconexión.
● La distancia de cambio de velocidad se encuentra dentro de la zona de trabajo.
● La distancia de cambio de velocidad debe ser menor que el final del eje rotativo.
● Entre el punto de cambio de velocidad y el punto de desconexión se debe seleccionar una
distancia tan grande que permita cambiar de marcha rápida a marcha lenta.
● El punto de cambio de velocidad y el punto de desconexión se encuentran a una distancia
temporal de al menos 8 ms entre sí.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2745

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La figura siguiente muestra la ubicación de las áreas de cambio de velocidad en torno al
destino.
)LQDOGHFDUUHUDSRU
VRIWZDUH,QLFLR











2EMHWLYR







)LQDOGHFDUUHUDSRU
VRIWZDUH)LQ






①
②
③
④
⑤
⑥

Zona de trabajo
Distancia de cambio de velocidad positiva/nega‐
tiva
Distancia de desconexión positiva/negativa

⑦
⑧

Zona de destino

⑨

Punto de desconexión

Punto de cambio de velocidad

Zona de parada

Si desea obtener más información sobre la disposición de las áreas, consulte "Zonas y puntos
de cambio de velocidad del módulo de posicionamiento".

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

100.0

CHGDIF_P

DINT

L#5000

Distancia de cambio de velocidad positiva

104.0

CHGDIF_M

DINT

L#5000

Distancia de cambio de velocidad negativa
Rango de valores admisible:
● 1 µm a 1 000 000 000 µm a una resolución ≥ 1 µm/
impulso
● 1 µm a 100.000.000 µm a una resolución < 1 µm/
impulso

Definir distancia de desconexión
Distancia de desconexión
La "Distancia de desconexión" define la distancia hasta el punto de destino en el que se
desconecta el accionamiento (la marcha lenta). Las funciones de vigilancia retoma el módulo
de posicionamiento a partir de este punto.
Los valores predefinidos se aplican a todos los objetivos a los que se aproxima el módulo de
posicionamiento. Una excepción está constituida por el modo incremental con el incremento
255, para la que se define una distancia de desconexión especial.

2746

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Reglas para la distancia de desconexión
● La distancia de desconexión positiva y la distancia de desconexión negativa no tienen por
qué estar dispuestas de forma simétrica en torno al destino. Los valores pueden ser muy
distintos.
● La distancia de desconexión debe ser mayor que la mitad de la zona de destino.
● Entre el punto de desconexión y el destino se debe seleccionar una distancia que permita
que el accionamiento se detenga dentro de la zona de destino.
● El punto de desconexión y el inicio de la zona de destino se encuentran a una distancia
temporal de al menos 8 ms entre sí.
La figura siguiente muestra la ubicación de las zonas de cambio de velocidad en torno al
destino.
)LQDOGHFDUUHUDSRU
VRIWZDUH,QLFLR











2EMHWLYR







)LQDOGHFDUUHUDSRU
VRIWZDUH)LQ






①
②
③
④
⑤
⑥

Zona de trabajo
Distancia de cambio de velocidad positiva/nega‐
tiva
Distancia de desconexión positiva/negativa

⑦
⑧

Zona de destino

⑨

Punto de desconexión

Punto de cambio de velocidad

Zona de parada

Si desea obtener más información sobre la disposición de las áreas, consulte "Zonas y puntos
de conexión del módulo de posicionamiento".

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

108.0

CUTDIF_P

DINT

L#2000

Distancia de desconexión positiva

112.0

CUTDIF_M

DINT

L#2000

Distancia de desconexión negativa
Rango de valores admisible:
● 1 µm a 1 000 000 000 µm a una resolución ≥ 1 µm/
impulso
● 1 µm a 100.000.000 µm a una resolución < 1 µm/
impulso

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2747

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Definir aproximación al destino
Definir zona de destino
Zona de destino
El módulo de posicionamiento crea un área simétrica alrededor de cada destino: la zona de
destino. Dentro de esta área es preciso que el valor real se encuentre en una aproximación al
destino.
Una especificación de valor "0 "desconecta la tolerancia en la aproximación al destino. La
velocidad al alcanzar el destino debe ser entonces inferior a la velocidad de parada
(Página 2750) parametrizada.

Reglas para la zona de destino
● La zona de destino está situada de forma simétrica en torno al destino.
● Una especificación de valor "0 "desconecta la vigilancia de la zona de destino.
La figura siguiente muestra la ubicación de las zonas en torno al destino.
)LQDOGHFDUUHUDSRU
VRIWZDUH,QLFLR










2EMHWLYR








)LQDOGHFDUUHUDSRU
VRIWZDUH)LQ






①
②
③
④
⑤
⑥

Zona de trabajo
Distancia de cambio de velocidad positiva/nega‐
tiva
Distancia de desconexión positiva/negativa

⑦
⑧

Zona de destino

⑨

Punto de desconexión

Punto de cambio de velocidad

Zona de parada

Si desea obtener más información sobre el tema de la aproximación al destino, consulte el
apartado "Zonas y puntos de conexión del módulo de posicionamiento", así como "Fin de un
proceso de posicionamiento (Página 2708)".

2748

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

76.0

TRG_RANGE

DINT

L#1000

Zona de destino
Rango de valores admisible:
● 0 = sin vigilancia
● 1 µm a 1 000 000 000 µm a una resolución ≥ 1 µm/
impulso
● 1 µm a 100.000.000 µm a una resolución < 1 µm/
impulso

Definir tiempo de vigilancia
Tiempo de vigilancia
Durante el tiempo de vigilancia el módulo vigila:
● el movimiento del eje hasta el punto de desconexión.
El tiempo de vigilancia comienza con el inicio de un posicionamiento y se redispara cada
vez que se modifica el valor real en el sentido de la marcha.
Dentro del tiempo de vigilancia, el valor real debe haberse modificado al menos un
incremento (la parte del trayecto de la resolución).
● la aproximación al destino.
El tiempo de vigilancia se redispara por última vez cuando se alcanza el punto de
desconexión.
Dentro del tiempo de vigilancia debe haberse alcanzado la zona de destino.
Si desea obtener más información sobre el tema de la aproximación al destino, consulte el
apartado "Final de un proceso de posicionamiento (Página 2708)".

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

80.0

MON_TIME

DINT

L#2000

Tiempo de vigilancia
Rango de valores admisible:
● 0 = sin vigilancia
● De 1 a 100.000 ms

Tiempo de vigilancia real
Para el tiempo vigilancia es posible predefinir todos los valores a partir del área de valores. El módulo redondea el tiempo
predefinido a un múltiplo de 8 ms (ciclo de módulo).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2749

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Definir zona de parada
Zona de parada
La zona de parada está situada de forma simétrica en torno al destino correspondiente. En esta
área se vigila si el accionamiento se detiene en una posición de destino alcanzada o si se aleja
de ella. La vigilancia comienza después de que el módulo de posicionamiento ha notificado
"Posición alcanzada" (PEH).
Si la zona de parada se abandona sin una petición de marcha válida, el módulo de
posicionamiento notifica un error.

Reglas para la zona de parada
● La zona de parada está situada de forma simétrica en torno al destino correspondiente:
(Destino – ½ × zona de parada) ≤ destino ≤ (destino + ½ × zona de parada)
● La zona de parada debe ser mayor o igual que la zona de destino.
● Los valores de coordenadas para la zona de parada se encuentran en la zona de trabajo.
● Con el valor "0" se desconecta la vigilancia de parada.
Si desea obtener más información sobre el tema de la aproximación al destino, consulte el
apartado "Zonas y puntos de conexión del módulo de posicionamiento", así como "Fin de un
proceso de posicionamiento (Página 2708)".

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

84.0

ZSPEED_R

DINT

L#1000

Zona de parada
Rango de valores admisible:
● 0 = sin vigilancia
● 1 µm a 1 000 000 000 µm a una resolución ≥ 1 µm/
impulso
● 1 µm a 100.000.000 µm a una resolución < 1 µm/
impulso

Definir velocidad de parada
Velocidad de parada
La velocidad de parada sirve como velocidad de referencia. Si la velocidad real alcanza la
velocidad de parada durante un posicionamiento y el accionamiento se encuentra en la zona
de destino, se notifica el aviso "Posición alcanzada" (PEH). El proceso de posicionamiento
queda correctamente finalizado.
La precisión de posicionamiento aumenta cuando el valor de la velocidad de parada se reduce.
Con el valor "0" se desconecta la vigilancia de parada.

2750

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Si desea obtener más información sobre el tema de la aproximación al destino, consulte el
apartado "Final de un proceso de posicionamiento (Página 2708)".

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

88.0

ZSPEED_L

DINT

L#30000

Velocidad de parada
Rango de valores admisible:
● 0 = sin vigilancia
● 1 µm/min a 100 000 µm/min

Eje del canal n
Definir tipo de eje
Seleccionar tipo de eje
Tipos de eje
El módulo de posicionamiento puede controlar los siguientes tipos de ejes:
● Eje lineal
El eje lineal es un eje con una zona de desplazamiento físico limitado.

,QLFLRI¯VLFR

)LQI¯VLFR

● Eje rotativo
El eje rotativo es un eje cuya zona de desplazamiento no está limitada por topes mecánicos.
9DORUP£[LPRYLVXDOL]DEOH
ILQDOGHOHMHURWDWLYR

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

,QLFLRGHHMHURWDWLYR FRRUGHQDGD  
ILQDOGHOHMHURWDWLYR

2751

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

12.0

AXIS_TYPE

DINT

L#0

Tipo de eje
Valores permitidos:
● 0 = Eje lineal
● 1 = Eje rotativo

Definir final de carrera por software
Final de carrera por software
Los finales de carrera por software existen sólo para el eje lineal.
El área limitada por el final de carrera por software es la zona de trabajo.
El inicio del final de carrera por software (FCSF) debe ser siempre menor que el fin del final de
carrera por software (SEE).
Los finales de carrera por software se vigilan después de que el eje está sincronizado.
● Si se utiliza un encóder incremental:
La sincronización del eje se alcanza mediante la búsqueda del punto de referencia o la
definición del punto de referencia.
● Si se utiliza un encóder absoluto (SSI):
El eje está sincronizado después de que el módulo ha recibido un telegrama completo y sin
errores para el canal correspondiente.
El encóder absoluto tiene que abarcar por lo menos la zona de trabajo, incluido el final de
carrera por software.

Relación entre la zona de trabajo, el área del encóder y la zona de desplazamiento
● La zona de trabajo es el área que el usuario define para sus tareas mediante los finales de
carrera por software.
● El área del encóder es el área que el encóder cubre claramente. En el caso de un eje lineal
del módulo, el área del encóder se define de forma simétrica por encima de la zona de
trabajo. Es decir, el módulo desplaza el área del encóder de tal modo que las distancias
entre los finales de carrera por software y los finales del área del encóder son iguales en
cada caso (véase la figura inferior).
● La zona de desplazamiento es el rango de valores que puede procesar el módulo de
posicionamiento. La zona de desplazamiento depende de la resolución.
La figura siguiente muestra la relación entre los finales de carrera por software, la zona de
trabajo, el área del encóder y la zona de desplazamiento.

2752

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
=RQDGHWUDEDMR

(MH

)&6,



=RQDGHDOFDQFHGHOHQFµGHU
0DUJHQGHGHVSOD]DPLHQWR
)&6)





Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

64.0

SSW_STRT

DINT

L#-100000000

Inicio del final de carrera por software

68.0

SSW_END

DINT

L#100000000

Fin del final de carrera por software
Rango de valores admisible:
● -1 000 000 000 µm a 1 000 000 000 µm a una
resolución ≥ 1 µm/impulso
● -100.000.000 µm a 100.000.000 µm a una resolución
< 1 µm/impulso

Definir final del eje rotativo
Final del eje rotativo
El valor "Final del eje rotativo" es el valor máximo teórico que el valor real puede alcanzar. Sin
embargo, el máximo valor teórico nunca se indica porque físicamente identifica la misma
posición que el inicio del eje rotativo (0).
El valor más grande que se muestra, en el caso de un eje rotativo, tiene el valor:
Final del eje rotativo [µm] - Resolución [µm / impulso] × 1 [impulso]
Ejemplo: Final del eje rotativo 1000 mm, resolución 1000 µm/impulso
La visualización pasa:
● con un sentido de giro positivo, de 999 mm a 0 mm
● con un sentido de giro negativo, de 0 mm a 999 mm

Eje rotativo con encóders absolutos
En el caso de un eje rotativo con un encóder absoluto, el área del eje rotativo (0 hasta el final
del eje rotativo) tiene que coincidir exactamente con el área de sensor del encóder absoluto:
Fin del eje rotativo [µm] = Número de vuelltas del encóder × Recorrido/vuelta del encóder [µm]

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2753

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

16.0

ENDROTAX

DINT

L#100000

Final del eje rotativo
Rango de valores admisible:
● 1 µm a 1.000.000.000 µm a una resolución ≥ 1 µm/
impulso
● 1 µm a 100.000.000 µm a una resolución < 1 µm/
impulso

Definir búsqueda del punto de referencia
Seleccionar tipo de búsqueda del punto de referencia
Tipo de búsqueda del punto de referencia
Con la función "Tipo de búsqueda del punto de referencia" se determinan las condiciones para
la sincronización del eje:
● El primer dato define el sentido de arranque en el que comienza la búsqueda del punto de
referencia.
● El segundo dato define la posición de la marca cero que conduce a la sincronización, en
referencia con el conmutador de punto de referencia.
Si desea obtener información detallada al respecto consulte Modo de operación "Búsqueda del
punto de referencia" (Página 2718).

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

52.0

REFPT_TYPE

DINT

L#0

Tipo de búsqueda del punto de referencia
Valores permitidos:
● 0 = positivo, conmutador del punto de referencia en el
sentido +
● 1 = positivo, conmutador del punto de referencia en el
sentido ● 2 = negativo, conmutador del punto de referencia en
el sentido +
● 3 = negativo, conmutador del punto de referencia en
el sentido -

2754

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Definir coordenada del punto de referencia
Coordenada del punto de referencia
● Encóders inc.:
La coordenada del punto de referencia es necesaria para el modo de operación "Búsqueda
del punto de referencia". Si el eje no está sincronizado después de escribir y activar los
datos máquina, el valor real se establece al valor de la coordenada del punto de referencia.
● Encóder absoluto (SSI)
La coordenada del punto de referencia es necesaria para el ajuste mecánico del encóder.
Consulte al respecto también la descripción del reajuste del encóder absoluto
(Página 2755), en la que se explica la interacción de dicho ajuste con el resto de datos.
El valor de la coordenada del punto de referencia debe encontrarse dentro de la zona de
trabajo:
● Eje lineal
Incluido el final de carrera por software.
● Eje rotativo
Mayor o igual que 0 y menor que el valor "Final del eje rotativo" (0 ≤ Coordenada del punto
de referencia < Final del eje rotativo).

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

44.0

REFPT

DINT

L#0

Coordenada del punto de referencia
Rango de valores admisible:
● -1 000.000.000 µm a 1.000.000.000 µm a una
resolución ≥ 1 µm/impulso
● -100.000.000 µm a 100.000.000 µm a una resolución
< 1 µm/impulso

Definir reajuste del encóder absoluto
Calcular reajuste del encóder absoluto
Reajuste del encóder absoluto
El ajuste del encóder absoluto sólo es necesario para un encóder absoluto (SSI).
Con el reajuste del encóder absoluto y las coordenadas del punto de referencia el rango de
valores del sensor se reproduce claramente en el sistema de coordenadas del eje.
Encontrará más información al respecto en "Procedimiento de reajuste del encóder absoluto
(Página 2756)", así como en un ejemplo (Página 2757).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2755

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

44.0

REFPT

DINT

L#0

Coordenada del punto de referencia
Rango de valores admisible:
● -1.000.000.000 µm a 1.000.000.000 µm a una
resolución ≥ 1 µm/impulso
● -100.000.000 µm a 100.000.000 µm a una
resolución < 1 µm/impulso

48.0

ENC_ADJ

DINT

L#0

Reajuste del encóder absoluto
Rango de valores admisible:
● 0 a (225 - 1)

Procedimiento para un reajuste del encóder absoluto
Determinar el reajuste correcto del encóder absoluto
Tras la primera parametrización hay que llevar a cabo otros pasos para que se establezca una
relación correcta entre el encóder y el sistema de coordenadas. El procedimiento se
representa utilizando el cuadro de diálogo de parametrización.
1. Desplace el eje a un punto definido y reproducible que físicamente sea único.
Puede ser, por ejemplo, el "Fin del final de carrera por software".
2. Llame la petición "Definir punto de referencia (Página 2731)" con la coordenada del punto
definido en 1.
El módulo de posicionamiento determina entonces un valor de encóder para la coordenada
del punto de referencia registrada en el eje en el DB de canal (REFPT): el reajuste del
encóder absoluto. Este valor se puede leer con la petición "Leer datos de encóder
(Página 2737)".
3. Registre el valor leído en el campo "Reajuste del encóder absoluto".
4. Guarde la parametrización en el DB de parámetros correspondiente con la función de
exportación.
5. Cargue los datos de HWCN en la CPU.
6. Para activar los datos, rearranque la CPU.
Nota
Esta sincronización se realiza una vez en la puesta en marcha. Tras una parametrización, el
módulo de posicionamiento queda sincronizado durante el arranque en cuanto se recibe un
telegrama sin errores del encóder.

2756

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Alternativa: Reajuste mecánico de un encóder
También se puede obtener una relación correcta entre el sistema de coordenadas y el encóder
del modo siguiente:
1. Desplace el eje a un punto definido y reproducible que físicamente sea único.
Puede ser, por ejemplo, el "Inicio del final de carrera por software".
2. Introduzca este valor de coordenadas en los datos máquina a modo de "coordenada del
punto de referencia".
3. Lea el valor del encóder que se muestra en esta posición con la petición "Leer datos del
encóder (Página 2737)".
4. Introduzca este valor como reajuste del encóder absoluto en los datos máquina.
Tras la parametrización se mostrará siempre un valor real correcto.
En lugar del paso 3 y 4 también es posible resetear a cero el codificador a través de la opción
"Reset", si está disponible. A continuación, introduzca el valor "0" como reajuste del encóder
absoluto en los datos máquina.

Ejemplo para un reajuste del encóder absoluto
Ejemplo para un reajuste del encóder absoluto
Para este ejemplo se parte de las premisas siguientes:
● Coordenada del punto de referencia = -125 mm
● Área de trabajo de SSW_STRT = -1.000 mm a SSW_END = 1.000 mm
● Reajuste del encóder absoluto = 0
● Área del encóder = 2.048 incrementos con una resolución de 1 mm/impulso
● El encóder absoluto utilizado no permite un ajuste mecánico exacto y tampoco ofrece la
posibilidad de definir el valor del encóder.
La figura siguiente muestra un ejemplo de reajuste del encóder absoluto.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2757

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

GHVHDGR

(MH
9DORUGHOHQFµGHUDEVROXWR

(QFµGHU

9DORUUHDO  






9DORUGHOHQFµGHU



(MH

DFWXDOPHQWH




 



1)

Asignación del sistema de coordenadas a los valores del sensor con el reajuste de encóder
absoluto definido. El valor del encóder 0 equivale al valor real -125.

2)

Asignación deseada del sistema de coordenadas con respecto al encóder. En esta posición, la
coordenada tiene que ser -125.

Resultado tras "Definir el punto de referencia"
Tras "Definir el punto de referencia", la relación es la siguiente:
La coordenada del punto de referencia en el eje (-125) se asigna al valor del encóder calculado
(1798) a partir del reajuste del encóder absoluto. La figura siguiente muestra esta asignación.
$OFDQFHTXHSXHGHFXEULUVHFODUDPHQWHFRQHVWHHQFµGHU

(MH



 






)&6)

9DORUGHOHQFµGHUDEVROXWR

)&6,







9DORUFDOFXODGRGHO
UHDMXVWHGHOHQFµGHU
DEVROXWR




El encóder devuelve 2.048 valores unívocos. La zona de trabajo está definida por el final de
carrera por software. Sin embargo, debido a la resolución seleccionada de 1 mm por impulso,
el encóder puede abarcar una zona de trabajo mayor que la prevista por el final de carrera por
software.
Con la resolución definida, la zona de trabajo está ya cubierta con 2.001 valores. Por ello en
el ejemplo quedan 47 impulsos "sobrantes" dispuestos simétricamente alrededor de la zona de
trabajo.

2758

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Seleccionar velocidad de inicio
Velocidad de inicio en la búsqueda del punto de referencia
Con este dado se selecciona la velocidad para el inicio de una búsqueda del punto de
referencia.

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

99.0

REFPT_SPD

BOOL

TRUE

Velocidad de inicio en la búsqueda del punto de refe‐
rencia
Valores permitidos:
● 0 = Marcha rápida
● 1 = Marcha lenta

Encóders del canal n
Seleccionar tipo de señal
Tipo de señal
El encóder da información de recorrido al módulo, el cual la evalúa y la convierte en un valor
real con la resolución.
Es posible seleccionar un tipo de señal de uno de los encóders siguientes:
● Encóder incremental de 5 V
Seleccione el tipo de señal "5 V Señal diferencial" si utiliza un encóder incremental de 5 V
con señales diferenciales A, /A, B, /B y N, /N.
● Encóder incremental de 24 V
Seleccione el tipo de señal "24 V pista A+B desfasado" si desea utilizar un encóder
incremental de 24 V con las señales A*, B* y N*.
● Encóder absoluto (SSI)
Seleccione el tipo de señal "SSI absoluto" si desea utilizar un encóder absoluto con una
interfaz en serie.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2759

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

20.0

ENC_TYPE

DINT

L#1

Tipo de señal
Valores permitidos:
● 1 = 5 V Señal diferencial
● 2 = 24 V pista A+B desfasado
● 3 = SSI longitud del telegrama 13 bits 1)
● 4 = SSI longitud del telegrama 25 bits 1)
● 5 = SSI longitud del telegrama 14 bits 1)
● 6 = SSI longitud del telegrama 15 bits 1)
● 7 = SSI longitud del telegrama 16 bits 1)
● :
● :
● 14 = SSI longitud del telegrama 23 bits 1)
● 15 = SSI longitud del telegrama 24 bits 1)

1)

La selección de la longitud del telegrama se realiza en el cuadro de diálogo "SSI".

Seleccionar sentido de contaje
Sentido de contaje
Con el dato máquina "Sentido de contaje" se adapta el sentido de la captura del recorrido al
sentido del movimiento del eje. Para ello, tenga en cuenta todos los sentidos de giro de los
elementos de transmisión (como p. ej., acoplamientos y engranajes).
● normal = los impulsos de contaje adelantes (encóder incremental) o valores del sensor
(encóder absoluto) equivalen a los valores de posición real ascendentes
● invertida = los impulsos de contaje adelantes (encóder incremental) o valores del sensor
(encóder absoluto) equivalen a los valores de posición real descendentes

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

59.0

CNT_DIR

BOOL

FALSE

Sentido de contaje
Valores permitidos:
● 0 = normal
● 1 = invertida

2760

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Definir resolución
Definir recorrido por vuelta del encóder
Recorrido por vuelta del encóder
Con el dato máquina "Recorrido por vuelta del encóder" se indica al módulo de
posicionamiento qué recorrido realiza el sistema de accionamiento en cada vuelta.
El valor "Recorrido por vuelta del encóder" depende de la estructura del eje y del modo en que
está colocado el encóder. Debe tener en cuenta todos los elementos de transmisión, como
acoplamientos o engranajes. La figura siguiente muestra dos disposiciones de encóder
distintas a modo de ejemplo.

0RWRU

(QFµGHU

0RWRU

5HGXFWRUHV

(QFµGHU

5HGXFWRUHV

La relación entre los datos máquina "Recorrido por vuelta del encóder" e "Incrementos por
vuelta del encóder" se describe en el apartado Resolución (Página 2762).

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

24.0

DISP_REV

DINT

L#80000

Recorrido por vuelta del encóder
Rango de valores admisible:
● 1 µm a 1.000.000.000 µm

Definir incrementos por vuelta del encóder
Incrementos por vuelta
El dato máquina "Incremento por vuelta del encóder" indica la cantidad de incrementos que
proporciona un encóder en cada vuelta. A partir de este valor y del dato máquina "Recorrido
por vuelta del encóder", el módulo de posicionamiento calcula la resolución (Página 2762).
Encóder incremental
Como entrada es posible indicar cualquier valor dentro del rango de valores. El módulo evalúa
los incrementos en múltiplos de 4.
Encóder absoluto

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2761

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Para los límites debe diferenciarse entre los distintos modelos de encóder. Como entrada se
permiten sólo valores en potencias de 2.
● Encóder monovuelta (número de vueltas = 1) con longitud del telegrama de 13 bits:
– valor mínimo = 4
– valor máximo = 8192
● Encóder multivuelta (número de vueltas > 1) con longitud del telegrama de 25 bits:
– valor mínimo = 4
– valor máximo = 8192
● Encóder monovuelta (número de vueltas = 1) con longitud del telegrama de 25 bits:
– valor mínimo = 4
– valor máximo = 225
Las medidas lineales se parametrizan como encóder multivuelta tal como se indica a
continuación:
● Incrementos por vuelta del encóder = 8192
● Número de vueltas x 8192 ≥ Número de pasos de la medida lineal

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

32.0

INC_REV

DINT

L#500

Incrementos por vuelta del encóder
Rango de valores admisible:
● 1 a 225

Resolución
Resolución
La resolución indica el desplazamiento que corresponde s un impulso. Es una medida de la
exactitud del posicionamiento y determina también la zona de desplazamiento máximo posible
del módulo de posicionamiento.

2762

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Para calcular la resolución (RES) se procede tal como se indica en la tabla siguiente:

Valores de
entrada

Encóder incremental

Encóder absoluto

● Recorrido por vuelta del encóder

● Recorrido por vuelta del encóder

● Incrementos por vuelta del encóder:

● Incrementos por vuelta del encóder:

–

Evaluación cuádruple

–

1 Incremento = 4 Impulsos

Cálculo

–

1 Incremento = 1 Impulso

7UD\HFWR
5(6

9XHOWDGHOHQFµGHU
,PSXOVRV
9XHOWDGHOHQFµGHU

Nota
Todos los datos de posición se redondean al múltiplo entero de la resolución. De este modo es
posible diferenciar entre los valores introducidos y los utilizados.

Rango de valores de la resolución
El sistema de medida seleccionado determina el margen de valores de la resolución.
Sistema de
medición

Datos en ...

Rango de valores de la resolución

mm

10-3 mm

0,1 × 10-3 … 1000 × 10-3 mm/impulso

pulgadas

10-4 pulgadas

0,1 × 10-4 … 1000 × 10-4 pulgada/impulso

grados

10 grados

0,1 × 10-4 … 1000 × 10-4 grados/impulso

10-3 grados

0,1 × 10-3 … 1000 × 10-3 grados/impulso

10 grados

0,1 × 10-2 … 1000 × 10-2 grados/impulso

-4

-2

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2763

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Ejemplo
● Un encóder incremental tiene los datos siguientes:
– Incrementos por vuelta del encóder: 5000
– Recorrido por vuelta del encóder: 1.000 mm
– 1 Incremento = 4 Impulsos
De ello resulta la resolución (evaluación cuádruple):
5HVROXFLµQ

PP
LQFUHPHQWRV




PP
,QFUHPHQWR



PP
LPSXOVRV

PP
,QFUHPHQWR



PP
,PSXOVR

PP
,PSXOVR

● Un encóder SSI tiene los datos siguientes:
– Incrementos por vuelta del encóder: 4096
– Recorrido por vuelta del encóder: 1.000 mm
– 1 Incremento = 1 Impulso
De ello resulta la resolución:
5HVROXFLµQ

PP
LQFUHPHQWRV



Dependencia entre la zona de desplazamiento y la resolución
La zona de desplazamiento está limitada por la representación numérica en el módulo de
posicionamiento. Esta representación numérica varía en función de la resolución. Por ello, al
definir valores hay que procurar mantenerse siempre dentro de los límites admitidos.
La zona de desplazamiento máxima se muestra en la tabla siguiente:
Resolución (RES) dentro del margen

Zona de desplazamiento máxima

0,1 µm/impulso ≤ RES < 1 µm/impulso

-108 µm a 108 µm (-100 m a +100 m)

1 µm/impulso ≤ RES ≤ 1000 µm/impulso

-109 µm a 109 µm (-1000 m a +1000 m)

Seleccionar datos para el encóder absoluto (SSI)
Número de vueltas del encóder
Número de vueltas del encóder
El dato máquina "Número de vueltas del encóder" sólo existe en encóders absolutos. Con él
se indica el número de vueltas posibles con este encóder.
El total de pasos del encóder no es un dato máquina. Se calcula del modo siguiente:
Total de pasos = Incremento por vuelta x Número de vueltas

2764

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

36.0

NO_REV

DINT

L#1

Número de vueltas del encóder
Rango de valores admisible:
● 1 (encóder monovuelta)
● 2 a 4096 en potencias de 2 (encóder multivuelta)

Velocidad de transferencia
Velocidad de transferencia
Con el dato máquina "Velocidad de transferencia" se define la velocidad de la transferencia de
datos del encóder SSI al módulo de posicionamiento.
La velocidad de transferencia máxima depende de la velocidad de transferencia:
● 200 m → 188 kHz
● 100 m → 375 kHz
● 40 m → 750 kHz
● 12 m → 1.500 kHz

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

40.0

BAUDRATE

DINT

L#0

Velocidad de transferencia
Valores permitidos:
● 0 = 188 kHz
● 1 = 375 kHz
● 2 = 750 kHz
● 3 = 1.500 kHz

Longitud de telegrama
Longitud de telegrama
Con la "Longitud de telegrama" se define el marco de impulsos que emite el módulo de
posicionamiento.
Se permite una longitud de telegrama de 13 bits a 25 bits.

Datos utilizados en el DB de parámetros
La longitud de telegrama seleccionada aquí se dispone en el DB de parámetro con el
dato ENC_TYPE (Página 2759).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2765

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Paridad
Paridad
Con la "Paridad" se define si para el encóder absoluto no debe transferirse ninguna paridad o
si debe transferirse una paridad par o impar.

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

28.0

PARITY

DINT

L#0

Paridad
Valores permitidos:
● 0 = ninguno
● 1 = paridad par (even)
● 2 = paridad impar (odd)

Seleccionar vigilancia
Vigilancia
Rotura de hilo
Con la activación de la vigilancia, el módulo de posicionamiento vigila todos los conductos en
un encóder incremental de 5 V y un encóder absoluto. La vigilancia detecta:
● Rotura de hilo
● Cortocircuito de los distintos cables
● Distancia entre flancos de los impulsos de contaje (también en un encóder incremental de
24 V)
Para la monitorización en un encóder incremental de 24 V es preciso ajustar un tiempo de
monitorización MON_TIME (Página 2749) > 0.
En encóders incrementales de 5 V sin marca cero es preciso desactivar la monitorización de
rotura de hilo o bien interconectar las señales N y /N de forma externa.
Error de telegrama
El módulo monitoriza el telegrama de un encóder absoluto (SSI) para:
● ver si hay errores del bit de inicio y del bit de parada
La monitorización de errores de telegrama en los encóders absolutos (SSI) no puede
desactivarse.
Impulsos erróneos (encóder incremental)
Entre dos marcas cero consecutivas, un encóder incremental siempre tiene que proporcionar
el mismo número de incrementos.
El módulo de posicionamiento comprueba si la marca cero de un encóder incremental aparece
en el estado adecuado del encóder.

2766

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
En el caso de encóders sin marca cero es preciso desactivar la monitorización de los impulsos
de error.
Igualmente es preciso desactivar la monitorización de rotura de hilo o bien interconectar las
entradas de marca cero N y /N de forma externa.

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

63.0

MON_WIRE

BOOL

TRUE

1 = Rotura de hilo

63.1

MON_FRAME

BOOL

TRUE

1 = Error de telegrama (tiene que ser siempre 1)

63.2

MON_PULSE

BOOL

TRUE

1 = Impulsos de error

Vigilancias:

Incrementos del canal n
Definir incrementos
Definición
Los incrementos son destinos especificados que pueden ser controlados por el módulo de
posicionamiento en el modo de operación "Modo incremental relativo" o "Modo incremental
absoluto".

Área posible para los incrementos
El destino al que tiene que realizarse una aproximación tiene que encontrarse al menos a
media zona de destino delante del final de carrera por software correspondiente. La figura
siguiente muestra los límites de una especificación del incremento.
]RQDGHGHVWLQR

)&6,

2EMHWLYR

=RQDGHWUDEDMR

]RQDGHGHVWLQR



2EMHWLYR

)&6)

UHDHQODTXHVHHQFXHQWUDHOREMHWLYR

(QHVWD£UHDGHOD]RQDGHWUDEDMRQRSXHGHKDEHUQLQJ¼QREMHWLYR

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2767

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Número de incremento 1 a 100
Número de incremento 1 a 100
Tiene la posibilidad de insertar un máximo de 100 incrementos en una tabla, que son válidas
tanto el modo de operación "Modo incremental relativo" como para el "Modo incremental
absoluto".
Tenga en cuenta que el módulo de posicionamiento para el "Modo incremental relativo" no
soporta valores negativos. Los valores son interpretados por el módulo de posicionamiento en
función del sentido de movimiento como diferencia positiva o negativa.
Nota
La entrada se realiza en la unidad del sistema de medida ajustado. Tenga en cuenta en este
caso sobre todo las posiciones decimales.
Ejemplo de números:
● Incremento: 800 mm
● Sistema de medida: 10-3 mm
● Entrada en el DB de parámetros: 800000
Recomendación: En la tabla de incrementos defina áreas separadas para incrementos
relativos y absolutos.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

35.4

TRGL1WR_EN

BOOL

FALSE

1 = Escribir tabla de incrementos 1 (incremento 1 a 50)

35.5

TRGL2WR_EN

BOOL

FALSE

1 = Escribir tabla de incrementos 2 (incremento 1 a 100)

36.6

TRGL1RD_EN

BOOL

FALSE

1 = Leer tabla de incrementos 1 (incremento 1 a 50)

36.7

TRGL2RD_EN

BOOL

FALSE

1 = Leer tabla de incrementos 2 (incremento 1 a 100)

valor inicial

Comentarios

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

120.0

TRGL1.TRG[1]

DINT

L#0

Número de incremento 1

.

.

.

.

.

.

.

.

.

.

.

.

.

.

316.0

TRGL1.TRG[50]

L#0

Número de incremento 50

DINT

Tabla de incrementos 1

320.0

TRGL2.TRG[51]

DINT

L#0

Número de incremento 51

.

.

.

.

.

.

.

.

.

.

.

.

.

.

.

516.0

TRGL2.TRG[100]

DINT

L#0

Número de incremento 100

2768

Tabla de incrementos 2

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Número de incremento 254
Número de incremento 254
Dependiendo de la tabla de incrementos es posible utilizar el número de incremento 254 como
otra especificación del recorrido. Para las distancias de cambio de velocidad y de desconexión,
las entradas del DB de parámetros tienen validez para este incremento.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

36.2

TRG252_254_EN

BOOL

FALSE

1 = Escribir incremento para número de incre‐
mento 254

96.0

TRG252_254

DINT

L#0

Incremento para número de incremento 254

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

100.0

CHGDIF_P

DINT

L#5000

Distancia de cambio de velocidad positiva

104.0

CHGDIF_M

DINT

L#5000

Distancia de cambio de velocidad negativa

108.0

CUTDIF_P

DINT

L#2000

Distancia de desconexión positiva

112.0

CUTDIF_M

DINT

L#2000

Distancia de desconexión negativa

Número de incremento 255
Número de incremento 255
Con el número de incremento 255 dispone de otra especificación del recorrido.
Las distancias de desconexión y las distancias de cambio de velocidad se transfieren junto con
el incremento. Al contrario de lo que sucede en otros incrementos, el incremento 255 utiliza los
valores fijados en el DB del canal para la distancia de desconexión y de la distancia de cambio
de velocidad. Las entradas de los datos máquina no tienen validez para este incremento.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

36.3

TRG255_EN

BOOL

FALSE

1 = Escribir incremento para número de incremento
255

100.0

TRG255

DINT

L#0

Incremento para número de incremento 255

104.0

CHGDIF255

DINT

L#0

Distancias de cambio de velocidad para número de
incremento 255

108.0

CUTDIF255

DINT

L#0

Distancias de desconexión para número de incremen‐
to 255

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2769

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Interfaz de control y realimentación del FM 351
Aplicación
En aplicaciones especiales o en un nivel de alarma puede que se necesite un acceso
especialmente rápido a señales de realimentación y de control. A estos datos se accede
directamente a través de las áreas de entrada y salida del módulo.
Para coordinar el arranque cada vez que arranca el módulo (p. ej. tras insertar el módulo o
después de una transición STOP-RUN de la CPU), la instrucción ABS_CTRL debe llamarse
hasta que se muestre el final del arranque a través de RETVAL = 0. A continuación la
instrucción ABS_CTRL ya no puede utilizarse.
Nota
No es posible utilizar la instrucción ABS_CTRL en combinación con un acceso en escritura.

Leer señales de realimentación mediante acceso directo
Las direcciones de byte se indican de forma relativa respecto a la dirección de inicio de las
salidas del canal correspondiente. Los nombres de los parámetros corresponden a los
nombres del DB de canal.
Dirección inicial del canal 1 = Dirección inicial del módulo
Dirección inicial del canal 2 = Dirección inicial del módulo + 8
En AWL se accede a los datos con los comandos PEB (leer 1 byte), PEW (leer 2 bytes) y PED
(leer 4 bytes).
La siguiente tabla muestra la asignación de la interfaz de realimentación (entradas) del FM 351.
Dirección

Número de bit
7

6

5

4

3

2

1

0

Byte 0

PARA

interno

interno

DATA_ERR

OT_ERR

DIAG

interno

interno

Byte 1

CHGOVER

CUTOFF

ZSPEED

SPEED_OUT

0

WAIT_EI

WORKING

ST_ENBLD

POS_RCD

0

0

0

GO_M

0

SYNC

Byte 2
Byte 3
Byte 4

MODE_OUT
GO_P
ACT_POS

Byte 5
Byte 6
Byte 7

2770

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Ejemplo: Valor real de posición ACT_POS
La dirección inicial del módulo es 512.
AWL

Descripción

L PED 516

//Leer valor real de posición actual (ACT_POS) del canal 1:
//con acceso directo:
//Dirección inicial del canal + 4

Escribir las señales de control mediante acceso directo
Las direcciones de byte se indican de forma relativa respecto a la dirección inicial de las
entradas del canal correspondiente. Los nombres de los parámetros corresponden a los
nombres del DB de canal.
Dirección inicial del canal 1 = Dirección inicial del módulo
Dirección inicial del canal 2 = Dirección inicial del módulo + 8
En AWL se accede a los datos con los comandos PAB (escribir 1 byte), PAW (escribir 2 bytes)
y PAD (escribir 4 bytes).
La siguiente tabla muestra la asignación de la interfaz de control (salidas) del FM 351.
Direc‐
ción

Número de bit
7

6

5

4

Byte 0

0

0

0

0

Byte 1

DRV_EN

0

0

0

3

2

1

0

OT_ERR_A

0

0

0

DIR_P

DIR_M

STOP

START

Byte 2

MODE_IN

Byte 3

MODE_TYPE

Byte 4

Reservado

Byte 5
Byte 6
Byte 7

Ejemplo: Señales de inicio del canal 2
La dirección inicial del módulo es 512.
AWL

Descripción

L 2#10001000

//Poner DRV_EN y DIR_P a 1

T PAB 521

//Escribir señales con acceso directo para canal 2:
//Dirección inicial del módulo + 8 + 1

Vías de transferencia de parámetros
Se entiende por parámetros los datos máquina y los incrementos que se indican a
continuación.
La figura siguiente muestra las vías de transferencia de parámetros al FM x51.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2771

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
3*3&
RIIOLQH

&38
RQOLQH

0µGXORGHSRVLFLRQDPLHQWR

E
6RIWZDUHGH
FRQILJXUDFLµQ




'%GH
SDU£PHWURV

D
D
E



'%GH
SDU£
PHWURV






3URJUDPDGH
XVXDULR




&RQILJ+:

$%6B&75/




3DU£PHWURV
'DWRVGH
VLVWHPD 6'%

D

'DWRVGH
VLVWHPD 6'%



1

Guardar los parámetros en el software de configuración.

2

Guardar y compilar la configuración hardware.

2a

Cargar configuración hardware en la CPU. La CPU ejecuta automáticamente el paso 3.

3

La CPU escribe los parámetros en el módulo en parametrizaciones de sistema.

4

Cargar los parámetros de un canal del módulo en la programadora con el comando "Cargar sistema de destino en
programadora".

5

Cargar parámetros del software de configuración con el comando "Cargar sistema de destino" en un canal del módulo.

6

Escribir parámetros en un canal del módulo con peticiones del programa de usuario.

7

Leer parámetros desde un canal del módulo a través de peticiones del programa de usuario.

8

Almacenar parámetros del programa de usuario en el DB Online.

9

Leer parámetros del DB Online en el programa de usuario.

10

Exportar parámetros del software de configuración al DB Offline.

10a

Cargar DB offline en la CPU.

10b

Exportar parámetros del software de configuración al DB Online.

11

Importar parámetros del DB Offline en el software de configuración.

11a

Cargar parámetros del DB Online en la programadora.

11b

Importar parámetros del DB Online en el software de configuración.

2772

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Casos de aplicación de la transferencia de parámetros
Caso de aplicación

Pasos

Los parámetros se editan con el software de configuración.
A continuación, los canales del módulo sólo pueden para‐
metrizarse de forma automática en el momento del arran‐
que.

Ejecute los pasos 1, 2 y 2a.

Los parámetros se modifican durante la puesta en servicio
en el modo de prueba en el software de configuración.

Ejecute los pasos 4 y 5.

A continuación, los parámetros modificados durante la
puesta en servicio se tienen que cargar automáticamente
durante el arranque.

Ejecute los pasos 1, 2 y 2a.

Los parámetros se crean con el software de configuración.
Los canales del módulo sólo pueden parametrizarse con el
programa de usuario a través de bloques de datos.

Ejecute los pasos 10, 10a y 6 y o 10b y 6.

Desea crear datos de reserva para recetas de forma cómo‐ Ejecute los pasos 10 y 10a.
da.
Los parámetros se crean con el software de configuración. Ejecute los pasos 1, 2 y 2a para la para‐
Éstos tienen que estar a disposición del programa de usua‐ metrización automática.
rio para realizar modificaciones provisionales.
Ejecute los pasos 10, 10a, 9, 8 y 6 para el
acceso por medio del programa de usua‐
rio.
Los parámetros existentes se modifican exclusivamente
con el programa de usuario.

Ejecute los pasos 7, 9, 8 y 6.

Desea ver los datos modificados por el programa de usuario Ejecute los pasos 11a y 11 o sólo 11b.
con el software de configuración.
Los parámetros modificados por el programa de usuario se Ejecute los pasos 11b u 11a, 11 y, des‐
tienen que cargar automáticamente también en el arranque. pués, 1, 2 y 2a.

6.3.5.5

Uso del FM 351 desde el programa de usuario

Inclusión del FM 351 en un programa de usuario
Para integrar el FM 351 en un programa de usuario pueden utilizarse instrucciones que le
facilitarán en lo posible el manejo de las funciones deseadas:
Las instrucciones ABS_INIT y ABS_CTRL se activan en el programa de usuario de la CPU.
Éstas realizan la comunicación entre la CPU y el FM 351. El DB de canal se crea
automáticamente como DB de instancia en la instrucción ABS_CTRL, si se integra la
instrucción ABS_CTRL en el proyecto.
Todos los datos de parámetros pertenecientes a un canal del módulo (datos máquina, tablas
de incrementos) se encuentran en el DB de parámetros del módulo. Inserte un bloque de datos
del tipo ABS_PARATYPE en el proyecto mediante "Bloques de programa > Agregar bloque".
Además, para el FM 351 se puede utilizar también la instrucción ABS_DIAG, que permite
transferir informaciones de diagnóstico al DB de diagnóstico. El DB de diagnóstico se crea
automáticamente como DB de instancia en la instrucción ABS_DIAG, si se integra la
instrucción ABS_DIAG en el proyecto.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2773

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Puesta en servicio del módulo
Incluso sin programa de usuario es posible realizar un primer test del módulo con el cuadro de
diálogo "Puesta en servicio". Tenga en cuenta particularmente la advertencia siguiente.
ADVERTENCIA
Se pueden producir daños personales y materiales.
Para evitar daños personales y materiales observe los puntos siguientes:
● Instale un interruptor de PARADA DE EMERGENCIA en las inmediaciones del equipo.
Sólo así puede garantizarse que en caso de un fallo del software o del equipo sea posible
desconectar la instalación de modo seguro.
● Instale finales de carrera por hardware que actúen directamente en las etapas de potencia
de todos los accionamientos.
● Asegúrese de que ninguna persona tenga acceso al área de la instalación donde hay
piezas en movimiento.
● Si controla y vigila paralelamente el FM 351 desde el programa y desde el cuadro de
diálogo "Puesta en servicio" pueden producirse conflictos cuyos efectos no están
definidos. Por lo tanto, conmute siempre la CPU al estado STOP cuando trabaje con el
cuadro de diálogo "Puesta en servicio" o bien desactive su programa.

6.3.5.6

Puesta en servicio del FM 351

6.3.5.7

FM 351: Diagnóstico online

Información actual sobre el módulo
Diagnóstico estándar
Indicación de errores mediante los LEDs de error del FM 351
¿Dónde se indica el error?
Si el LED rojo de error general se enciende, significa que se ha producido un error o bien en
el módulo (error interno), o bien en las conexiones de cable (error externo).
Los LEDs rojos CH 1 y CH 2 indican un error de canal.
En la figura siguiente se muestra la posición de los LEDs de error en el FM 351.

2774

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
6)
&+
&+

¿Qué errores se indican?
La tabla siguiente contiene los tipos de error que se indican mediante los LEDs de error.
LED

Significado

SF

Fallo agrupado

Explicación
Este LED indica un estado de error del FM 351.
Alarma de diagnóstico (error, de canal, interno o externo)
Para eliminar el error, ver Clases de error (Página 2782).

CH 1

Error de canal 1

Estos LEDs indican un error en el canal 1 o en el canal 2.

CH 2

Error de canal 2

● Rotura de hilo en el encóder
● Error del encóder absoluto
● Errores en señal del encóder incremental
● Fallo operativo
● Error de parametrización

Diagnóstico específico de canal
Disparo de alarmas de diagnóstico
Procesamiento de las alarmas
El módulo de posicionamiento puede activar alarmas de diagnóstico. Estas alarmas se
procesan en un OB de alarma. Cuando se dispara una alarma sin que se encuentre cargado
el OB correspondiente, la CPU pasa a STOP.
Para habilitar las alarmas de diagnóstico se procede del modo siguiente:
1. Seleccione el módulo en HWCN.
2. Habilite la alarma de diagnóstico en Edición > Propiedades del objeto > Parámetros básicos
3. Guardar y compilar la configuración.
4. Cargue la configuración en la CPU

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2775

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Visión de conjunto de las alarmas de diagnóstico
Los eventos y errores siguientes disparan una alarma de diagnóstico:
● Fallo operativo
● Datos máquina erróneos
● Error de diagnóstico
Estos errores se describen con detalle en el apartado "Clases de error (Página 2782)".

Reacción del módulo de posicionamiento en caso de error con alarma de diagnóstico
● El posicionamiento se cancela.
● Con las alarmas de diagnóstico siguientes se borra la sincronización:
– Falta conector frontal, falta tensión auxiliar externa para la alimentación del encóder
– se ha detectado un error de señal cero, error de línea (señales de encóder de 5 V)
– se ha rebasado ^la zona de desplazamiento (se notifica con un error de operador)
– Ajustar valor real no se puede ejecutar (se notifica con un error de operador)
● Las señales de control START, DIR_P y DIR_M dejan de procesarse excepto en un caso.
Excepción:
Si se produce un error de operador sigue siendo posible un modo Jog en el sentido de la
zona de trabajo.
● El selector de función y las peticiones se continúan procesando.

El módulo de posicionamiento detecta un fallo ("entrante")
Una alarma de diagnóstica es "entrante" cuando por lo menos hay un error en cola de espera.
Si no se han solventado todos los errores los demás que queden en cola de espera, se
notificarán de nuevo como "entrantes".
Secuencia:
1. El módulo de posicionamiento detecta uno o varios errores y dispara una alarma de
diagnóstico. El LED "SF" y, en función del error, los LEDs "CH1" / "CH2" se encienden. El
error se registra en el búfer de diagnóstico.
2. El sistema operativo de la CPU solicita el OB de alarma de diagnóstico, por ejemplo, OB 82.
3. Es posible evaluar la información de inicio del OB 82.
4. Con el parámetro OB82_MOD_ADDR se lee qué módulo ha disparado la alarma.
5. Encontrará más información si llama la instrucción ABS_DIAG.

El módulo de posicionamiento detecta el paso al estado libre de fallos ("saliente")
Una alarma sólo es "saliente" cuando se ha eliminado el último error del módulo.

2776

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Secuencia:
1. El módulo de posicionamiento detecta que todos los fallos han sido eliminados y dispara
una alarma de diagnóstico. El LED "SF" está apagado. El búfer de diagnóstico no se
modifica.
2. El sistema operativo de la CPU solicita el OB de alarma de diagnóstico, por ejemplo, OB 82.
3. Con el parámetro OB82_MOD_ADDR se lee qué módulo ha disparado la alarma.
4. Evalúe el bit OB82_MDL_DEFECT.
Si este bit es "0", no hay errores en el módulo. Su evaluación puede finalizar aquí.

Alarmas de diagnóstico según el estado de la CPU
● En estado STOP de la CPU las alarmas de diagnóstico están bloqueadas por el módulo de
posicionamiento.
● Si con la CPU en estado STOP no se eliminan todos los errores pendientes, el módulo
vuelve a notificar como "entrantes" los errores todavía no eliminados tras la transición al
estado RUN.
● Si se eliminan todos los errores pendientes con la CPU en estado STOP, el estado libre de
errores del módulo no se notificará con una alarma de diagnóstico tras la transición al
estado RUN.

Evaluación de errores en el programa de usuario
Reacción de errores en el programa de usuario
En el programa de usuario es posible reaccionar de forma precisa a los errores que aparecen.
Para ello se dispone de los siguientes recursos:
● Los valores de retorno RETVAL del FB estándar integrado:
Este valor se vuelve a calcular cada vez que se llama el bloque.
RETVAL = -1 es un indicador de grupo para un error isócrono en una petición o en la
comunicación con el módulo.
● A cada petición le corresponde un bit de error _ERR como indicador de grupo de un error
de la petición o de uno de sus predecesores en la cadena de peticiones:
El bit de errores se activa para una petición de escritura y sus peticiones de continuación
si el módulo notifica un error de datos o si se produce un error de comunicación.
En el caso de peticiones de lectura el bit de error se establece para la petición afectada
cuando se ha producido un error de comunicación.
La instrucción ABS_CTRL activa de nuevo los bits de error después del procesamiento de
una petición. No obstante, estos deben ser retomados por el programa de usuario para una
evaluación de errores.
● La señal de realimentación DATA_ERR como indicador de grupo de un error que el módulo
ha detectado durante una petición de escritura. La señal se vuelve a calcular en la siguiente
petición de escritura.
● La señal de realimentación OT_ERR (error de operador) como indicador de grupo de un
error que el módulo ha detectado al iniciar un recorrido. El bit de error tiene que ser acusado
mediante el OT_ERR_A = 1 una vez solucionada la causa.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2777

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
● La señal de realimentación DIAG se activa cuando el contenido del búfer de diagnóstico se
ha modificado. Esta señal puede aparecer más tarde que las señales DATA_ERR y
OT_ERR.
● El error de comunicación JOB_ERR contiene el código de error (Página 2781) si existe un
problema de comunicación entre la instrucción y el módulo. El valor se recalcula después
de procesar una petición y se crea en el DB del canal con la instrucción ABS_CTRL y en el
DB de diagnóstico con la instrucción ABS_DIAG.
● La instrucción ABS_DIAG para leer el búfer de diagnóstico del módulo. Aquí es posible
averiguar las causas de error para eventos isócronos y asíncronos.
● Las alarmas de diagnóstico para la respuesta rápida a los eventos en el OB de la alarma de
diagnóstico (por ejemplo, OB 82).

Evaluación de una alarma de diagnóstico en el programa de usuario
Las siguientes entradas en los datos locales del OB de la alarma de diagnóstico (por ejemplo,
OB 82) con activadas por el módulo de posicionamiento. Los errores se introducen en el búfer
de diagnóstico (clase de error 128 (Página 2789)).
Dirección

Nombre

Tipo

Comentarios

0.0

OB82_EV_CLASS

BYTE

Clase de evento e indentificadores:
B#16#38: evento saliente
B#16#39: evento entrante

1.0

OB82_FLT_ID

BYTE

Código de error (B#16#42)

2.0

OB82_PRIORITY

BYTE

Clase de prioridad:
B#16#1A en estado operativo RUN
B#16#1C en estado operativo ARRANQUE

3.0

OB82_OB_NUMBR

BYTE

Número de OB (82)

4.0

OB82_RESERVED_1

BYTE

Reservado

5.0

OB82_IO_FLAG

BYTE

Módulo de entrada: B#16#54

6.0

OB82_MDL_ADDR

INT

Dirección básica lógica de la tarjeta en la que se
ha producido el error.

8.0

OB82_MDL_DEFECT

BOOL

Fallo del módulo

8.1

OB82_INT_FAULT

BOOL

Error interno

8.2

OB82_EXT_FAULT

BOOL

Error externo

8.3

OB82_PNT_INFO

BOOL

Error de canal existente

8.4

OB82_EXT_VOLTAGE

BOOL

Falta tensión auxiliar externa

...

no utilizado

10.3

OB82_WTCH_DOG_FLT

BOOL

Activación de la vigilancia de tiempo

...

no utilizado

12.0

OB82_DATE_TIME

DATE_AND_TIME

Fecha y hora en la que se ha solicitado el OB

2778

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Búfer de diagnóstico del módulo
Eventos de diagnóstico
El búfer de diagnóstico del módulo contiene como máximo 9 eventos de diagnóstico y está
organizado como búfer anular.
Un evento de diagnóstico se escribe en el búfer cuando se detecta un aviso (de error) entrante.
Esto puede ser un aviso, un error isócrono (error de datos, error de operador) o incluso un error
asíncrono (error de servicio y error de diagnóstico). De una causa de un error pueden surgir
también varias entradas como errores consiguientes. Los avisos salientes no generan
entradas en el búfer de diagnóstico.
Para cada evento de diagnóstico se indican:
● Estado (siempre entrante)
● Error interno
● Error externo
● Clase de error
● Número de error
● Número de canal
● Número de incremento (en errores de la tabla de incrementos)
Cuando se escribe un evento de diagnóstico en el búfer de diagnóstico, la señal de
realimentación DIAG = 1 se activa en todos los canales parametrizados.
El búfer de diagnóstico puede transferirse como un todo con la instrucción ABS_DIAG a un
bloque de datos (DB de diagnóstico) o a través de un cuadro de diálogo de evaluación de
errores del software de configuración. Si se lee el búfer de diagnóstico, el módulo activa la
señal de realimentación DIAG = 0.
Nota
Si el búfer de diagnóstico se lee al mismo tiempo con la instrucción ABS_DIAG y el cuadro de
diálogo de evaluación de errores, puede ocurrir que uno de los eventos de diagnóstico que se
ha producido no sea detectado por el programa.

Datos y estructura del DB de diagnóstico
Datos y estructura del DB de diagnóstico
Nota
Los datos que no se indican en esta tabla no deben ser modificados.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2779

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La tabla siguiente muestra la estructura del DB de diagnóstico.
Dirección

Nombre

Tipo

valor inicial

Comentarios

0.0

MOD_ADDR

INT

0

Dirección del módulo

256.0

JOB_ERR

INT

0

Número de error del error de comunicación

258.0

JOBBUSY

BOOL

FALSE

1 = Petición activa

258.1

DIAGRD_EN

BOOL

FALSE

1 = Leer el búfer de diagnóstico necesariamente

260.0

DIAG_CNT

INT

0

Número de entradas válidas de la lista

262.0

DIAG[1]

STRUCT

Entrada más reciente de datos de diagnóstico

272.0

DIAG[2]

STRUCT

Segunda entrada de datos de diagnóstico

282.0

DIAG[3]

STRUCT

Tercera entrada de datos de diagnóstico

292.0

DIAG[4]

STRUCT

Cuarta entrada de datos de diagnóstico

302.0

DIAG[5]

STRUCT

Quinta entrada de datos de diagnóstico

312.0

DIAG[6]

STRUCT

Sexta entrada de datos de diagnóstico

322.0

DIAG[7]

STRUCT

Séptima entrada de datos de diagnóstico

332.0

DIAG[8]

STRUCT

Octava entrada de datos de diagnóstico

342.0

DIAG[9]

STRUCT

Novena entrada de datos de diagnóstico

La tabla siguiente muestra la estructura de una entrada de diagnóstico DIAG[n].
Dirección
+0.0

Nombre
STATE

Tipo
BOOL

valor inicial
FALSE

Comentarios
0 = Evento saliente
1 = Evento entrante

+0.1

INTF

BOOL

FALSE

1 = Error interno

+0.2

EXTF

BOOL

FALSE

1 = Error externo

+2.0

FCL

INT

0

Clase de error:
1: Fallo operativo
2: Error de operador
4: Error de datos
5: Error de datos máquina
6: Error de las tablas de incrementos
15: Avisos
128: Error de diagnóstico

+4.0

FNO

INT

0

Número de error

+6.0

CH_NO

INT

0

Número de canal

+8.0

TRG_NO

INT

0

Número de incremento

2780

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Lista de los avisos JOB_ERR
Avisos JOB_ERR
JOB_ERR
(Hex)

JOB_ERR
(Dec)

JOB_ERR
(Int)

Significado

80A0

32928

-32608

Acuse negativo al leer del módulo. Módulo extraído durante la lectura o mó‐
dulo defectuoso.

80A1

32929

-32607

Acuse negativo al escribir en el módulo. Módulo extraído durante la escritura
o módulo defectuoso.

80A2 1)

32930

-32606

Error de protocolo para capa 2

80A3 1)

32931

-32605

Error de protocolo en User-Interface / User

80A4 1)

32932

-32604

Fallo en la comunicación del bus K

80B0

32944

-32592

Registro de datos/Petición desconocida.

80B1

32945

-32591

Indicación de longitud errónea. Parámetro FM_TYPE del DB de canal para el
módulo utilizado no activado correctamente.

80B2

32946

-32590

El slot configurado no está ocupado.

80B3

32947

-32589

El tipo de módulo real no es igual al tipo de módulo previsto.

80C0 1)

32960

-32576

El módulo aún no tiene preparados los datos que hay que leer.

80C1 1)

32961

-32575

Los datos de una petición de escritura semejante todavía no se han proce‐
sado en el módulo.

80C2 1)

32962

-32574

El módulo procesa de instante el número máximo posible de peticiones.

80C3

1)

32963

-32573

Los recursos necesarios (memoria, etc.) están ocupados de momento.

80C4

1)

32964

-32572

Error de comunicación

80C5 1)

32965

-32571

La periferia descentralizada no está disponible.

80C6 1)

32966

-32570

Cancelación de las clases de prioridad (rearranque normal o en segundo
plano)

8522

34082

-31454

DB del canal o DB de parámetros demasiado corto. No se pueden leer los
datos del DB. (petición de escritura).

8532

34098

-31438

El número de DB del DB de parámetros es demasiado grande. (petición de
escritura).

853A

34106

-31430

DB de parámetros no presente. (petición de escritura).

8544

34116

-31420

Error en el enésimo (n > 1) acceso de lectura a un DB tras aparecer un error
(petición de escritura).

8723

34595

-30941

DB del canal o DB de parámetros demasiado corto. No se pueden escribir los
datos en el DB. (petición de lectura).

8730

34608

-30928

DB de parámetros protegido contra escritura en la CPU No se pueden es‐
cribir los datos en el DB (petición de lectura)

8732

34610

-30926

El número de DB del DB de parámetros es demasiado grande. (petición de
lectura).

873A

34618

-30918

DB de parámetros no presente. (petición de lectura).

8745

34629

-30907

Error en el enésimo (n > 1) acceso de escritura a un DB tras aparecer un error
(petición de lectura).

1)

Los errores 80A2 a 80A4 así como 80Cx son temporales, es decir, se pueden eliminar tras un tiempo de espera sin la
intervención del usuario.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2781

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Clases de errores
Fallo operativo
Clase de error 1: Fallo operativo
Los fallos operativos se detectan de forma asíncrona respecto a un control. Los fallos
operativos hacen que se cancele el posicionamiento a excepción del número de error 9. El
número de error 9 hace que se desactive el posicionamiento.
La tabla siguiente muestra los fallos operativos posibles y sus causas.
Nº

Significado

Alarma de diag‐
nóstico

1

Rebase del final de carrera por software Inicio

Sí

Causa
2

Causa
3

Modificación del valor real > ½ zona de parada en el sentido erróneo.
Sí

No hay modificaciones del valor real o modificación del valor real en contra del
sentido nominal dentro del tiempo de vigilancia.
Sí

En "Ajustar valor real a vuelo" se ha rebasado el destino.
Sí

La zona de destino se ha rebasado después de la aproximación al destino.
Sí

El eje oscila en el punto de cambio de velocidad.
Sí

El eje oscila en el punto de desconexión/punto de inversión
Sí

El eje oscila en la zona de destino.

Modificación mayor que la mitad de la zona del eje rotativo
Causa

2782

Sí

Inicio de la zona de destino conectado de forma errónea
Causa

14

El valor real se encuentra fuera de la zona de parada.

Punto de desconexión conectado de forma errónea
Causa

13

Sí

Punto de cambio de velocidad conectado de forma errónea
Causa

12

La zona de destino no se ha alcanzado dentro del tiempo de vigilancia.

Rebasar zona de destino
Causa

11

Sí

Rebasar destino (FM 451)
Causa

10

Rebasar el límite de la zona de desplazamiento (las coordenadas de los límites de
la zona de desplazamiento pertenecen a la zona de desplazamiento).

Falta modificación del valor real o es demasiado reducida
Causa

9

Sí

Acoplamiento conjunto
Causa

8

Rebasar el límite de la zona de desplazamiento (las coordenadas de los límites de
la zona de desplazamiento pertenecen a la zona de desplazamiento).

Abandonar zona de parada
Causa

7

Sí

Error en la aproximación al destino
Causa

6

El valor real se encuentra fuera de la zona de de trabajo.

Rebase del fin de la zona de desplazamiento
Causa

5

Sí

Rebase del inicio de la zona de desplazamiento
Causa

4

El valor real se encuentra fuera de la zona de trabajo.

Rebase del final de carrera por software Fin

Sí

La velocidad/frecuencia es muy alta o existen saltos erróneos del valor real.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Nº

Significado

Alarma de diag‐
nóstico

15

Modificación mayor que la zona del eje rotativo

Sí

Causa
16

La velocidad/frecuencia es muy alta o existen saltos erróneos del valor real.

Incremento para número de incremento 252 no transferido (FM 451)
Causa

17

No se ha transferido el incremento.

Incremento para número de incremento 252 no aproximable (FM 451)
Causa

18

Sí
Sí

La distancia entre la posición real actual y el incremento especificado es inferior a
la distancia de cambio de velocidad o la distancia de desconexión.

Incremento erróneo para el número de incremento 252 (FM 451)
Causa

Sí

El incremento se encuentra fuera de la zona de trabajo.

Error de operador
Clase de error 2: Error de operador
Los errores de operador se detectan al cambiar las señales de control en el área de datos de
usuario. Los fallos de operador producen una desactivación del posicionamiento.
La tabla siguiente muestra los errores de operador posibles y sus causas.
N.º

Significado

Alarma de diag‐
nóstico

1

Modo de operación no admisible

no

Causa
3

Causa
4

El modo de operación seleccionado no está permitido.

Petición de interfaz no permitida
La señal seleccionada no está permitida en este modo de operación.

Parámetro erróneo del modo de operación
Causa

no
no

● En el modo de operación "Jog" la velocidad especificada es distinta de la
velocidad rápida o la velocidad lenta.
● En el modo de operación "Modo incremental" el incremento es distinto de 1 a
100 o distinto de 252, 254 y 255.

5

Habilitación de inicio no existente
Causa

7

8

10

no

El modo de operación "Modo incremental" sólo es posible con un eje ya sincroni‐
zado.

Destino/Parte del trayecto no posicionable
Causa

no

No se han parametrizado datos máquina para el eje o se han parametrizado datos
erróneos.

El eje no está sincronizado.
Causa

no

El destino especificado o calculado se encuentra fuera de los finales de carrera por
software.

Eje no parametrizado
Causa

9

Habilitación al iniciar no existente

El destino/La zona de destino se encuentra fuera de la zona de trabajo.
Causa

no

no

La distancia entre la posición real actual y el destino especificado es inferior a la
distancia de desconexión.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2783

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
N.º

Significado

Alarma de diag‐
nóstico

17

La búsqueda del punto de referencia no es posible

no

Causa
18

Causa
19

no

El incremento no es válido.

La distancia de desconexión no es mayor que ½ de la zona de destino en el número de incremento no
255
Causa

20

Se ha conectado un encóder SSI.

El modo incremental relativo o absoluto no es posible

La distancia de desconexión para el incremento 255 es inferior a la mitad de la zona
de destino.

Desplazamiento no permitido en el sentido especificado
Causa

no

La distancia del final de carrera por software es insuficiente.

Error de datos
Clase de error 4: Error de datos
Los errores de datos se detectan de forma síncrona respecto a un control/mando. Los datos de
errores no producen ninguna respuesta al error.
La tabla siguiente muestra los errores de datos posibles y sus causas.
Nº

Significado

6

Incremento especificado demasiado grande
Causa

Alarma de diag‐
nóstico
no

El valor está fuera de ±100 m ó ±1000 m. El recorrido / destino no puede ser
superior a la zona de desplazamiento.
En un eje rotativo la coordenada debe ser ≥ 0 e inferior al final del eje rotativo.

10

Decalaje de señal cero erróneo (FM 451)
Causa

no

El decalaje de señal cero es mayor que ± 100 m o ± 1.000 m.
Los finales de carrera por software, tras ajustar el decalaje de señal cero, se en‐
cuentran fuera de la zona de desplazamiento (100 m...+100 m o -1.000 m...+1.000
m).
Eje rotativo: El valor del decalaje de señal cero es mayor que el final del eje rotativo.

11

Indicación del valor real errónea
Causa

no

Eje lineal: La coordenada se encuentra fuera del final de carrera por software actual
(que puede estar desplazado).
Eje rotativo: La coordenada es < 0 o mayor que el final del eje rotativo.

12

Punto de referencia erróneo
Causa

no

Eje lineal: La coordenada se encuentra fuera del final de carrera por software actual
(que puede estar desplazado).
Eje rotativo: La coordenada es < 0 o mayor que el final del eje rotativo.

20

Activar datos máquina no admisible
Causa

27

Ajuste codificado en bits no permitido
Causa

2784

no

En el módulo no hay datos máquina nuevos sin errores.
no

Los bits no utilizados y no descritos aquí son distintos a 0.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Nº

Significado

Alarma de diag‐
nóstico

29

Codificación de bits no permitida

no

Causa
34

Causa
36

Los bits no utilizados y no descritos aquí son distintos a 0.

No es posible cancelar la activación del valor real

no

Con un encóder SSI y un eje lineal, tras la ejecución del ajuste el valor real de
posición se encontraría fuera de la zona de trabajo.

Distancia de cambio de velocidad errónea en número de incremento 255
Causa

no

El valor se encuentra fuera del margen numérico permitido ±100 m o ±1000 m.
En un eje rotativo la coordenada debe ser ≥ 0 e inferior al final del eje rotativo.

37

Distancia de desconexión errónea en número de incremento 255
Causa

no

El valor se encuentra fuera del margen numérico permitido ±100 m o ±1000 m.
La distancia de desconexión es menor que la distancia de cambio de velocidad.

107

Eje no parametrizado
Causa

108

no

En el eje no hay ningún dato máquina o los datos no están activados.

El eje no está sincronizado.
Causa

no

Uno de las peticiones "Ajustar valor real" y "Cancelar preselección del valor real" se
ha activado a pesar de que el eje no está sincronizado.

Error de datos máquina
Clase de error 5: Error de datos máquina
La alarma de diagnóstico sólo se disparará con un bloque de datos del sistema (SDB) con
errores. Los errores de datos máquina no producen ninguna respuesta al error.
La tabla siguiente muestra errores de datos máquina posibles y sus causas.
Nº

Significado

Alarma de diag‐
nóstico

5

Error en el ajuste de la alarma de proceso

Sí

Causa
6

Causa
7

11

Sí

El valor del final del eje rotativo se encuentra fuera del rango admitido de 1 a 109 µm
o respectivamente de 1 a 108 µm (según sea la resolución).
Sí

El valor del tipo de encóder se encuentra fuera del rango admisible de 1 a 4.

Recorrido erróneo por vuelta de encóder
Causa

Sí

Como tipo de eje no ha indicado ni 0 ni 1.

Tipo de encóder erróneo
Causa

Sí

El valor del sistema de medida se encuentra fuera del rango admisible de 1 a 4 y 6.

Final erróneo del eje rotativo
Causa

10

Ha indicado como distancia mínima entre bordes un valor < 0 ó > 10 µm.

Tipo de eje erróneo
Causa

9

Sí
9

Sistema de medida erróneo
Causa

8

Ha intentado seleccionar una alarma de proceso que el módulo no soporta.

Distancia mínima entre bordes errónea (FM 451)

Sí

El valor del recorrido/vuelta del encóder se encuentra fuera del rango admisible de
1 a 109 µm (independientemente de la resolución).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2785

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Nº

Significado

Alarma de diag‐
nóstico

13

Número erróneo de incrementos por vuelta del encóder(véase el apartado "Incrementos por
vuelta del encóder (Página 2761)")

Sí

14

Número erróneo de vueltas (véase el apartado ""Número de vueltas de encóder (Página 2764)") Sí

15

Velocidad de transferencia errónea
Causa

16

Sí

Para la velocidad de transferencia se ha indicado un valor fuera del rango admisible
de 0 a 3.

Coordenada del punto de referencia errónea
Causa

Sí

La coordenada se encuentra fuera del margen de -100 m a +100 m o, respectiva‐
mente, de -1000 m a +1000 m (según la resolución).
Eje lineal: La coordenada se encuentra fuera de la zona de trabajo.
Eje rotativo: La coordenada es mayor que el final del eje rotativo o < 0.

17

Calibración errónea del encóder absoluto
Causa

18

Sí

Se ha indicado un valor por fuera de los valores admisibles 0, 1, 2 y 3.

Sentido de contaje erróneo
Causa

20

Encóder de recorrido SSI: El valor del reajuste del encóder absoluto no se encuen‐
tra dentro del rango del encóder (incrementos por vuelta del encóder × cantidad de
vueltas - 1).

Tipo erróneo de búsqueda del punto de referencia
Causa

19

Sí

Sí

Se ha indicado un valor por fuera de los valores admisibles 0 y 1.

Vigilancia de hardware no posible
Causa

Sí

Se ha puesto en "FALSE" la monitorización de errores de telegrama en el DB de
parámetros.
En el encóder utilizado, la vigilancia de impulsos erróneos no es posible. Desactive
el parámetro MON_PULSE.

21

Inicio erróneo del final de carrera por software
Causa

Sí

Eje lineal: El inicio del final de carrera por software se encuentra fuera de la zona de
desplazamiento (-100 m...+100 m o 1000 m...+1000 m, dependiendo de la resolu‐
ción).
Eje lineal: El inicio del final de carrera por software (dado el caso, incluido un de‐
calaje de señal cero presente) es menor que -100 m o -1000 m (según la resolu‐
ción).

22

Fin erróneo del final de carrera por software
Causa

Sí

Eje lineal: El fin del final de carrera por software se encuentra fuera de la zona de
desplazamiento (-100 m...+100 m ó 1000 m...+1000 m, dependiendo de la resolu‐
ción) o es menor que el inicio del final de carrera por software.
Eje lineal: El fin del final de carrera por software (dado el caso, incluido un decalaje
de señal cero presente) es mayor que +100 m ó +1000 m (según la resolución).

23

Velocidad máxima errónea
Causa

24

Sí

Los datos no mostrados en el DB de parámetros tienen que ser 0.

Zona de destino errónea
Causa

Sí

Eje lineal: Zona entre 0 y 100 m ó 1000 m, según la resolución.
Eje rotativo: Zona superior al final del eje rotativo.

25

Tiempo de vigilancia erróneo
Causa

2786

Sí

El valor del tiempo de vigilancia se encuentra fuera del rango admisible de 0 a
100 000 ms.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Nº

Significado

Alarma de diag‐
nóstico

26

Zona de parada errónea

Sí

Causa

Eje lineal: Zona entre 0 y 100 m o 1000 m, según la resolución.
Eje rotativo: Zona superior al final del eje rotativo.

127

Velocidad de parada errónea
Causa

128

Modo de control erróneo
Causa

129
130

Sí

Como velocidad de inicio no ha indicado ni 0 ni 1.

Distancia de cambio de velocidad errónea en el sentido +
Causa

Sí

Para el modo de control se ha indicado un valor que está fuera del rango admisible
de 1 a 4.

Velocidad de inicio errónea para la búsqueda del punto de referencia
Causa

Sí

El valor de la velocidad de parada se encuentra por fuera del rango admisible de 0
a 100 000 µm/min.

Sí

Eje lineal: Zona entre 0 y 100 m o 1000 m (según la resolución).
Eje rotativo: Zona superior al final del eje rotativo e inferior a la mitad de la zona de
destino.

131

Distancia de cambio de velocidad errónea en el sentido Causa

Sí

Eje lineal: Zona entre 0 y 100 m ó 1000 m (según la resolución).
Eje rotativo: Zona superior al final del eje rotativo e inferior a la mitad de la zona de
destino.

132

Distancia de desconexión errónea en el sentido +
Causa

133

Distancia de desconexión errónea en el sentido Causa

200

Sí

La distancia de desconexión es mayor que la distancia de cambio de velocidad
negativa, inferior a la mitad de la zona de destino, o se encuentra fuera del margen
admisible entre 0 y 100 m o 1000 m (según resolución).

Resolución errónea
Causa

Sí

La distancia de desconexión es mayor que la distancia de cambio de velocidad
positiva, inferior a la mitad de la zona de destino, o se encuentra fuera del margen
admisible entre 0 y 100 m o 1000 m (según resolución).

Sí

Ha indicado una resolución < 0,1 µm/impulso o >1000 µm/impulso.
Ha indicado un recorrido/vuelta y una cantidad de impulsos/vuelta que dan una
resolución < 0,1 ó > 1000.

201

El encóder no se adapta a la zona de trabajo / área del eje rotativo
Causa

Sí

Encóder SSI y eje rotativo: El encóder no cubre exactamente el área del eje rotativo.
Eje lineal: El encóder no cubre ni siquiera la zona de trabajo (finales de carrera por
software incluidos).

Error de las tablas de incrementos
Clase de error 6: Error de las tablas de incrementos
Los errores de tablas de incrementos no producen ninguna respuesta al error.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2787

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La tabla siguiente muestra los posibles errores de tablas de incrementos y sus causas.
Nº

Significado

Alarma de diag‐
nóstico

6

Incremento especificado demasiado grande en la tabla de incrementos

no

Causa

El valor está fuera de ±100 m ó ±1000 m. El recorrido / destino no puede ser superior
a la zona de desplazamiento.
En un eje rotativo, la coordenada debe ser ≥ 0 e inferior al final del eje rotativo.

Avisos
Clase de error 15: Avisos
Los avisos no producen ninguna respuesta al error.
La tabla siguiente muestra los avisos posibles y sus causas.
Nº

Significado

1

Inicio de parametrización
Causa

2

Los tiempos de respuesta del hardware no pueden mantenerse, pues la distancia
entre los puntos de conmutación es demasiado reducida.
no

Los tiempos de respuesta del hardware no pueden mantenerse, pues la distancia
entre los puntos de conmutación es demasiado reducida.

Distancia insuficiente del principio de la zona de destino
Causa

2788

no

Distancia insuficiente del punto de desconexión
Causa

15

no

Los tiempos de respuesta del hardware no pueden mantenerse, pues la distancia
entre los puntos de conmutación es demasiado reducida.

Distancia insuficiente del punto de inversión
Causa

14

no

El módulo ha procesado sin problemas la parametrización mediante un bloque de
datos del sistema.

Distancia insuficiente del punto de cambio de velocidad
Causa

12

no

El módulo ha detectado una parametrización mediante un bloque de datos del siste‐
ma.

Final de la parametrización
Causa

11

Alarma de diag‐
nóstico

no

Los tiempos de respuesta del hardware no pueden mantenerse, pues la distancia
entre los puntos de conmutación es demasiado reducida.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Error de diagnóstico
Clase de error 128: Error de diagnóstico
La tabla siguiente muestra los errores de diagnóstico posibles y sus causas, así como los
efectos y las soluciones posibles.
Nº

Significado

Alarma de diag‐
nóstico

4

Falta tensión auxiliar externa

Sí

Causa

● La tensión auxiliar externa de 24 V no se ha conectado o ha fallado
● El fusible del módulo está defectuoso.
● Tensión insuficiente
● Rotura de hilo de masa
● Cortocircuito (p. ej. en el encóder conectado)

Efecto

● El posicionamiento se cancela en todos los canales
● Desactivar las salidas
● Eliminación de la sincronización en encóders incrementales cuando falta la
tensión auxiliar para la alimentación del encóder
● El módulo de posicionamiento no está parametrizado
● Borrado de la habilitación de inicio

Solución
5

Comprobar que la conexión de 24 V sea correcta (si la conexión de 24 V es correcta,
el módulo está averiado).

Falta conector frontal (FM 451)
Causa

El conector frontal del módulo de posicionamiento no está insertado

Efecto

● Falta tensión auxiliar externa de 24 V

Sí

● El módulo no está listo para funcionar
Solución
51

Enchufar el conector frontal en el módulo de posicionamiento

La vigilancia de tiempo (watchdog) ha reaccionado
Causa

Sí

● Interferencias fuertes en el módulo de posicionamiento
● Error en el módulo de posicionamiento

Efecto

● El módulo se resetea
● Desactivar todas las salidas
● Siempre que tras el reseteado del módulo no se detecte ningún defecto en el
módulo, este vuelve a estar listo para funcionar.
● El módulo notifica el transcurso de la vigilancia del tiempo (watchdog) con
"entrante" y "saliente"

Solución

● Eliminación de interferencias
● Consulte al departamento comercial correspondiente cuando las circunstancias
exactas que han dado lugar al error son de mayor entidad.
● Cambio del módulo de posicionamiento

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2789

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Nº

Significado

Alarma de diag‐
nóstico

144

Rotura de hilo Encóder

Sí

Causa

● El cable del encóder no está enchufado o está cortado
● Encóder sin señales de cuadratura
● Asignación de pines incorrecta
● Longitud de cable excesiva
● Cortocircuito de las señales del encóder
● Errores de flancos de las señales de encóder
● Máxima frecuencia de entrada de la entrada del encóder sobrepasada
● Corte de la alimentación del encóder

Efecto

● El posicionamiento se interrumpe
● Desactivar las salidas
● Borrado de la sincronización, con encóders incrementales
● Borrado de la habilitación de inicio

Solución

● Comprobar el cable del encóder
● Guardar los datos técnicos del encóder
● La vigilancia puede desactivarse de forma provisional con el cuadro de diálogo
de parametrización bajo la responsabilidad del operador.
● Guardar las especificaciones técnicas del módulo

145

Error de telegrama Encóder absoluto
Causa

Sí

El tráfico de telegramas entre el módulo de posicionamiento y el encóder absoluto
(SSI) tiene errores o está interrumpido:
● El cable del encóder no está enchufado o está cortado
● Tipo de encóder erróneo
● Encóder mal configurado (encóders programables)
● Longitud de telegrama mal indicada
● El encóder proporciona valores erróneos (encóder defectuoso)
● Interferencia en el cable del sistema de medición
● Velocidad de transferencia escogida demasiado alta
● Tiempo monoestable del encóder superior a 64 µs

Efecto

● El posicionamiento se interrumpe
● Desactivar las salidas
● Borrado de la habilitación de inicio

Solución

● Comprobar el cable del encóder
● Comprobar el encóder
● Comprobar el tráfico de telegramas entre el encóder y el módulo de
posicionamiento

2790

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Nº

Significado

Alarma de diag‐
nóstico

146

Pulsos erróneos (encóder incremental)

Sí

Causa

● Vigilancia del encóder ha detectado pulsos erróneos
● El número de incrementos por vuelta está mal introducido
● Encóder defectuoso: no proporciona el número de impulsos indicado
● Marca cero errónea o no presente
● Interferencias en el cable del encóder

Efecto

● El posicionamiento se interrumpe
● Desactivar las salidas
● Borrado de la habilitación de inicio

Solución

● Indicar correctamente el número de incrementos/vuelta del encóder (cuadro de
diálogo de parametrización)
● Comprobar el encóder y su cable
● Cumplir las normas de apantallamiento y de conexión a tierra
● La vigilancia puede desactivarse de forma provisional con el cuadro de diálogo
de parametrización bajo la responsabilidad del operador.

6.3.6

Uso del FM 451

6.3.6.1

Asignación de terminales de los conectores frontales del FM 451

Descripción de la interfaz del encóder
Posición de los conectores hembra sub-D
En la figura siguiente se muestra la posición de montaje y el nombre de los conectores hembra
del módulo. En los conectores hembra sub-D se pueden conectar encóders incrementales o
encóders absolutos (SSI).




(1&2'(5&+



)0



(1&2'(5&+







(1&2'(5&+






CH = canal

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2791

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Asignación de las interfaces de encóder (encóder CH1, CH2 y CH3)
Pin

Nombre

Encóder incremental
(24 V)

Encóder incremental (5 V) Encóder absoluto

1

A*

Señal de encóder A

---

---

2

CLS

---

---

Pulso de desplazamiento
SSI

3

/CLS

---

---

Pulso de desplazamiento
SSI inverso

4

B*

Señal de encóder B

---

---

5

DC 24 V

Alimentación del encóder

Alimentación del encóder

Alimentación del encóder

6

DC 5.2 V

---

Alimentación del encóder

Alimentación del encóder

7

M

Tierra del bastidor

Tierra del bastidor

Tierra del bastidor

8

N*

Señal de marca cero

---

---

9

RE

Salida tipo PNP/NPN 1)

---

---

10

N

---

Señal de marca cero

---

11

/N

---

Señal de marca cero in‐
vertida

---

12

/B

---

Señal de encóder B inver‐ --tida

13

B

---

Señal de encóder B

14

/A / /DAT

---

Señal de encóder A inver‐ Datos SSI invertidos
tida

15

A / DAT

---

Señal de encóder A

---

Datos SSI

Nota: si se conecta un encóder incremental de otro fabricante en contrafase (salida tipo PNP/NPN),
debe tenerse en cuenta lo siguiente:
1)

● Salida tipo PNP: conecte RE (9) con la masa (7).
● Salida tipo NPN: conecte RE (9) con +24 V (5).

Asignación del conector frontal
Conector frontal
En el conector frontal de 48 polos se conectan:
● las entradas y salidas digitales asignadas a los canales;
● las tensiones de alimentación de los encóders y de las salidas digitales.

Asignación de terminales del conector frontal (X1)
La tabla siguiente contiene la asignación de terminales del conector frontal del FM 451.
Terminal
1
2

2792

Nom‐
bre

Función

Encóder incremental

Encóder absoluto

Asignado; contiene un puente de cable para detectar el conector frontal enchu‐
fado.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Terminal

Nom‐
bre

Función

3

1L+

Tensión auxiliar de DC 24 V para la alimentación del encóder

8

1I0

Canal 1: entrada digital 0

Sensor del punto de refe‐
rencia

No utilizado

9

1I1

Canal 1: entrada digital 1

Contacto inversor

No utilizado

10

1I2

Canal 1: entrada digital 2

Entrada de habilitación

11

1I3

Canal 1: entrada digital 3

Entrada para "Ajustar valor real al vuelo"/"Medición
de longitud"/"Detección de bordes"/
"Evento externo para número de incremento 252"

de 4 a 7

Encóder incremental

Encóder absoluto

No utilizado

12

No utilizado

13

2L+

Tensión auxiliar de DC 24 V para la alimentación de la carga

14

2L+

Los dos bornes están conectados internamente en el módulo.

15

2I0

Canal 2: entrada digital 0

Sensor del punto de refe‐
rencia

No utilizado

16

2I1

Canal 2: entrada digital 1

Contacto inversor

No utilizado

17

2I2

Canal 2: entrada digital 2

Entrada de habilitación

18

2I3

Canal 2: entrada digital 3

Entrada para "Ajustar valor real al vuelo"/"Medición
de longitud"/"Detección de bordes"/
"Evento externo para número de incremento 252"

19

3I0

Canal 3: entrada digital 0

Sensor del punto de refe‐
rencia

No utilizado

20

3I1

Canal 3: entrada digital 1

Contacto inversor

No utilizado

21

3I2

Canal 3: entrada digital 2

Entrada de habilitación

22

3I3

Canal 3: entrada digital 3

Entrada para "Ajustar valor real al vuelo"/"Medición
de longitud"/"Detección de bordes"/
"Evento externo para número de incremento 252"

de 23 a 24

No utilizado

25

3L+

Tensión auxiliar de DC 24 V para la alimentación de la carga

26

3L+

Los dos bornes están conectados internamente en el módulo.

27

1Q0

Canal 1: salida digital 0

28

1Q1

Canal 1: salida digital 1

29

1Q2

Canal 1: salida digital 2

30

1Q3

Canal 1: salida digital 3

31

2Q0

Canal 2: salida digital 0

32

2Q1

Canal 2: salida digital 1

33

2Q2

Canal 2: salida digital 2

34

2Q3

de 35 a 36

Canal 2: salida digital 3
No utilizado

37

4L+

Tensión auxiliar de DC 24 V para la alimentación de la carga

38

4L+

Los dos bornes están conectados internamente en el módulo.

39

3Q0

Canal 3: salida digital 0

40

3Q1

Canal 3: salida digital 1

41

3Q2

Canal 3: salida digital 2

42

3Q3

Canal 3: salida digital 3

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2793

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Terminal

Nom‐
bre

de 43 a 47
48

Función

Encóder incremental

Encóder absoluto

No utilizado
M

Masa de las tensiones auxiliares 1L+, 2L+, 3L+ y 4L+

Encontrará más información sobre el diseño y el cableado en las instrucciones de servicio
(http://support.automation.siemens.com/WW/view/es/1118070) del módulo de
posicionamiento FM 451.

Tensión auxiliar para la alimentación del encóder (1L+, M)
Aquí puede conectar una tensión auxiliar de DC 24 V para la alimentación del encóder. En el
FM 451, el potencial de referencia de esta alimentación (M) está conectado a la masa de la
alimentación de la carga (M).
Se vigila si la tensión auxiliar de DC 24 V para la alimentación del encóder presenta subtensión
y rotura de hilo.
En la interfaz del encóder (conectores hembra sub-D encóder CH1, CH2 y CH3) se
proporcionan DC 24 V y DC 5,2 V para los diferentes tipos de encóder.
PRECAUCIÓN
Preste atención a la correcta polaridad de la tensión auxiliar de DC 24 V para la alimentación
del encóder (1L+, M).
Si conecta la tensión auxiliar de DC 24 V para la alimentación del encóder con los polos
invertidos, el módulo sufrirá daños y deberá sustituirse.

Tensión auxiliar para la alimentación de la carga (2L+, 3L+, 4L+, M)
En los bornes 2L+, 3L+, 4L+ y M debe conectar las tensiones auxiliares de DC 24 V para la
alimentación de la carga de las salidas digitales.
PRECAUCIÓN
Preste atención a la correcta polaridad de la tensión auxiliar de DC 24 V para la alimentación
de la carga (2L+, 3L+, 4L+, M).
Si conecta la tensión auxiliar de DC 24 V para la alimentación de la carga con los polos
invertidos, el módulo sufrirá daños y deberá sustituirse.

Indicación sobre el cableado para DC 24 V
Al efectuar el cableado, tenga en cuenta que todos los bornes del 1L+ al 4L+ deben estar
interconectados para que el módulo funcione sin fallos.
Comience con el cableado de DC 24 V al borne 38 y conecte la tensión auxiliar del borne 37
al borne 26. Proceda de forma análoga con los demás bornes.
Como alternativa también puede conectar alimentaciones separadas a los terminales 1L+
(encóder), 2L+ (canal 1), 3L+ (canal 2) y 4L+ (canal 3). No obstante, asegúrese de que todas

2794

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
las alimentaciones tengan un potencial de masa común. En este caso, después de haberse
producido una pérdida de tensión se mantiene la sincronización de los ejes gracias a las
tensiones auxiliares para la alimentación de la carga.

Alimentaciones de carga
La alimentación de la carga DC debe satisfacer los siguientes requisitos:
Como alimentación de la carga sólo debe utilizarse una pequeña tensión DC ≤ 60 V separada
con seguridad de la red. La separación segura puede estar efectuada según los requisitos que
figuran, entre otros, en:
● VDE 0100 Parte 410/HD 384-4-41/IEC 364-4-41
(como pequeña tensión funcional con separación segura),
● VDE 0805/EN 60950/IEC 950
(como pequeña tensión de seguridad SELV) o bien
● VDE 0106 Parte 101.

12 entradas digitales (de 1I0 a 3I3)
El FM 451 dispone de 4 entradas digitales por canal.
En las 12 entradas digitales es posible conectar conectores libres de rebotes (de 24 V tipo P)
o sensores sin contacto (detectores de proximidad de 2 ó 3 hilos).
No se vigila si las entradas digitales presentan cortocircuitos o roturas de hilo; dichas entradas
carecen de aislamiento galvánico respecto a la masa de la alimentación del encóder.
El estado de cada entrada se indica con el LED correspondiente.

12 salidas digitales (de 1Q0 a 3Q3)
El FM 451 dispone de 4 salidas digitales por canal.
Con las salidas digitales se controla la etapa de potencia. El funcionamiento de las salidas
digitales depende del modo de control (Página 2840).
No se vigila si las salidas digitales presentan cortocircuitos o roturas de hilo; dichas salidas
carecen de aislamiento galvánico respecto a la masa de la alimentación del encóder.
El estado de cada salida se indica en el LED correspondiente.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2795

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

6.3.6.2

Funciones de FM 451

Funciones
Al preseleccionar un modo de operación, una petición o un selector de función, se selecciona
la funcionalidad con la que se utilizará el módulo. La siguiente tabla ofrece una visión de
conjunto de la funcionalidad del módulo.
Funcionalidad

Descripción

Escribir y leer los datos máquina
(Página 2797)

Con los datos máquina el módulo de posicionamiento se adapta al
eje y al encóder.

Escribir y leer tablas de incre‐
mentos (Página 2799)

Con los incrementos se especifican destinos que pueden ser con‐
trolados por el módulo de posicionamiento en el modo de operación
"Modo incremental relativo/absoluto".

Final de una operación de posi‐
cionamiento (Página 2801)

El final de una operación de posicionamiento se logra de tres formas
distintas:
● Aproximación al destino
● Desactivación
● Cancelar

Modo de operación "Jog" (Pági‐ En el modo de operación "Jog", el accionamiento se mueve en un
na 2807)
sentido al pulsar una tecla.
Modo de operación "Búsqueda
del punto de referencia" (Pági‐
na 2810)

El modo de operación "Búsqueda del punto de referencia" permite
sincronizar el eje en función de un evento externo repetitivo.

Modo de operación "Modo incre‐ En el modo de operación "Modo incremental" el módulo de posicio‐
namiento puede
mental" (Página 2816)
● mover el accionamiento a destinos absolutos,
● mover el accionamiento de forma relativa alrededor de una parte
del trayecto en un sentido predeterminado.

2796

Petición "Definir valor real" /
"Ajustar valor real al vuelo" /
"Cancelar preselección del valor
real" (Página 2823)

Con la petición "Ajustar valor real" o "Ajustar valor real al vuelo" se
asigna una nueva coordenada al estado actual del encóder.
Con la petición "Cancelar valor real ajustado" se restablecen todos
los offsets de la zona de trabajo que han sido generados con "Ajustar
valor real".

Petición "Decalaje de señal ce‐
ro" (Página 2825)

Con la petición "Decalaje de señal cero" se desplaza en el valor
introducido la señal cero del sistema de coordenadas.

Petición "Definir punto de refe‐
rencia" (Página 2827)

Con la petición "Definir punto de referencia" se sincroniza el eje.

Selector de función "Medición
de longitud" / "Captura de bor‐
des" (Página 2829)

Con las funciones "Medición de longitud" y "Captura de bordes" es
posible calcular la longitud de una pieza de trabajo.

Selector de función "Aproxima‐
ción en bucle" (Página 2831)

Con la "Aproximación en bucle" define el sentido en el que se avanza
hacia el punto de destino con cierre de fuerza.

Selector de función "Entrada de
habilitación" (Página 2834)

La entrada de habilitación es una entrada externa con la que puede
habilitarse un posicionamiento a través de un evento externo.

Petición "Leer datos de posi‐
ción" (Página 2835)

Con la petición "Leer datos de posición" es posible leer el incremen‐
to, la distancia residual y la velocidad en el instante actual.

Petición "Leer datos del encó‐
der" (Página 2835)

Con la petición "Leer datos de encóder" se leen los datos actuales
del encóder, así como el valor del reajuste del encóder absoluto.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Funcionalidad

Descripción

Señales de respuesta del posi‐
cionamiento (Página 2836)

Con la función "Señales de respuesta para el posicionamiento" se
informa del estado actual del posicionamiento.

Señales de realimentación del
diagnóstico (Página 2837)

Con las "Señales de respuesta del diagnóstico" se recibe informa‐
ción sobre los eventos de diagnóstico que se han producido.

Escribir y leer los datos máquina
Escribir, activar y leer los datos máquina
Con los datos máquina se adapta el módulo de posicionamiento al eje y al encóder.
El programa de usuario permite modificar y leer los parámetros durante el funcionamiento.
Todos los parámetros se depositan en el DB de parámetros:
● Los datos máquina se encuentran en el DB de parámetros, en las direcciones que van del
4.0 al 116.0.
El número del DB de parámetros se tiene que introducir en el DB de canal correspondiente en
cada caso.
Los parámetros pueden introducirse con el editor DB, o bien introducirse cómodamente en los
cuadros de diálogo "Accionamiento", "Eje" y "Encóder" y se escriben con la función "Exportar"
en el DB de parámetros.
Los parámetros de un DB de parámetros existente pueden importarse a los cuadros de diálogo
con la función "Importar".

Primera parametrización
Si el canal todavía no contiene ningún dato máquina, proceda de la siguiente manera para una
primera parametrización sin el cuadro de diálogo de parametrización:
1. Introduzca los nuevos valores en el DB de parámetros y almacénelos.
2. Cargue el DB de parámetros en la CPU.
3. Active el siguiente bit de inicio en el DB de canal para la petición:
– Escribir datos máquina (MDWR_EN = 1)
4. Llame la instrucción ABS_CTRL o ABS_CTRL_451 en el programa de usuario cíclico.

Modificar datos máquina
Para modificar datos máquina mediante el programa de usuario, proceda del siguiente modo:
1. Introduzca los nuevos valores en el DB de parámetros.
2. Active los bits de inicio en el DB de canal para las peticiones:
– Escribir datos máquina (MDWR_EN = 1)
– Activar datos máquina (MD_EN = 1)
3. Llame la instrucción ABS_CTRL o ABS_CTRL_451 en el programa de usuario cíclico.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2797

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Si define los bits de inicio de estas peticiones al mismo tiempo, la instrucción ABS_CTRL (o
ABS_CTRL_451) se encargará de que las peticiones se procesen en la secuencia correcta.
De lo contrario, cambie siempre los datos máquina en la siguiente secuencia:
● Escribir datos máquina
● Activar datos máquina

Leer datos máquina
Para leer los datos máquina actuales de un canal, proceda del siguiente modo:
1. Active el siguiente bit de inicio en el DB de canal:
– Leer datos máquina (MDRD_EN = 1)
2. Llame la instrucción ABS_CTRL o ABS_CTRL_451 en el programa de usuario cíclico.
De este modo se depositan en la CPU los datos máquina del DB de parámetros.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

Valor inicial

Comentarios

35.0

MDWR_EN

BOOL

FALSE

1 = Escribir datos máquina

35.1

MD_EN

BOOL

FALSE

1 = Activar datos máquina

36.5

MDRD_EN

BOOL

FALSE

1 = Leer datos máquina

Nota
Si se modifican parámetros relevantes para la sincronización, al activar los datos máquina el
módulo realiza las siguientes acciones para el canal afectado:
● La sincronización se borra.
● El sensor de funciones y el decalaje de señal cero se desactivan.
● Los datos máquina y las tablas de incrementos existentes hasta ahora quedan invalidados.
Son parámetros relevantes para la sincronización:
● Tipo de eje
● Final del eje rotativo
● Tipo de señal
● Recorrido por vuelta
● Incrementos por vuelta
● Número de vueltas
● Coordenada del punto de referencia
● Reajuste del encóder absoluto
● Tipo de búsqueda del punto de referencia
● Sentido de contaje

2798

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Escribir y leer tablas de incrementos
Escribir y leer tablas de incrementos
Con los incrementos se especifican destinos que pueden ser controlados por el módulo de
posicionamiento en el modo de operación "Modo incremental relativo/absoluto".
El programa de usuario permite modificar y leer los parámetros durante el funcionamiento.
Todos los parámetros se depositan en el DB de parámetros:
● Las tablas de incrementos se encuentran en el DB de parámetros en las direcciones 120,0
a 516,0.
El número del DB de parámetros se tiene que registrar en el DB de canal correspondiente en
cada caso.
Los parámetros pueden introducirse con el editor DB, o bien introducirse cómodamente en el
cuadro de diálogo "Medidas incrementales" y se escriben con la función "Exportar" en el DB de
parámetros.
Los parámetros de un DB de parámetros existente pueden importarse al cuadro de diálogo con
la función "Importar".

Primera parametrización
Si el canal todavía no contiene ninguna tabla de incrementos, proceda del siguiente modo para
una primera parametrización sin el cuadro de diálogo de parametrización:
1. Introduzca los nuevos valores en el DB de parámetros y almacénelos.
2. Cargue el DB de parámetros en la CPU.
3. Active los bits de inicio en el DB de canal para las peticiones:
– Escribir tabla de incrementos 1 (TRGL1WR_EN = 1) y/o escribir tabla de incrementos 2
(TRGL2WR_EN = 1)
4. Llame las instrucciones ABS_CTRL o ABS_CTRL_451 en el programa de usuario cíclico.

Modificar tablas de incrementos
Para modificar las tablas de incrementos mediante el programa de usuario, proceda del
siguiente modo:
1. Introduzca los nuevos valores en el DB de parámetros.
2. Active los bits de inicio en el DB de canal para las peticiones:
– Escribir tabla de incrementos 1 (TRGL1WR_EN = 1) y/o escribir tabla de incrementos 2
(TRGL2WR_EN = 1)
3. Llame las instrucciones ABS_CTRL o ABS_CTRL_451 en el programa de usuario cíclico.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2799

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Leer tablas de incrementos
Para leer las tablas de incrementos a partir de un canal, proceda del siguiente modo:
1. Active los bits de inicio en el DB de canal para las peticiones:
– Leer tabla de incrementos 1 (TRGL1RD_EN = 1) y/o leer tabla de incrementos 2
(TRGL2RD_EN = 1)
2. Llame las instrucciones ABS_CTRL o ABS_CTRL_451 en el programa de usuario cíclico.
De este modo se depositan en la CPU las tablas de incrementos del DB de parámetros.

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

35.4

TRGL1WR_EN

BOOL

FALSE

1 = Escribir tabla de incrementos 1 (1 ... 50)

35.5

TRGL2WR_EN

BOOL

FALSE

1 = Escribir tabla de incrementos 2 (51 ... 100)

36.6

TRGL1RD_EN

BOOL

FALSE

1 = Leer tabla de incrementos 1 (1 ... 50)

36.7

TRGL2RD_EN

BOOL

FALSE

1 = Leer tabla de incrementos 2 (51 ... 100)

Nota
Si se modifican parámetros relevantes para la sincronización, al activar los datos máquina el
módulo realiza las siguientes acciones para el canal afectado:
● La sincronización se borra.
● El sensor de funciones y el decalaje de señal cero se desactivan.
● Los datos máquina y las tablas de incrementos existentes hasta ahora quedan invalidados.
Son parámetros relevantes para la sincronización:
● Tipo de eje
● Final del eje rotativo
● Tipo de señal
● Recorrido por vuelta del encóder
● Incrementos por vuelta del encóder
● Número de vueltas
● Coordenada del punto de referencia
● Reajuste del encóder absoluto
● Tipo de búsqueda del punto de referencia
● Sentido de contaje

2800

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Final de una operación de posicionamiento
Definición
El final de una operación de posicionamiento se logra a través de la señal de realimentación
WORKING = 0. Esto se logra de tres formas distintas:
● Aproximación al destino
● Desactivación
● Cancelar

Vigilancias
Al final de una operación de posicionamiento se encuentran activas las siguientes vigilancias:
● Tiempo de vigilancia
El tiempo de vigilancia se redispara en el punto de desconexión por última vez y pierde su
validez al finalizar la operación de posicionamiento.
En el transcurso de este tiempo es necesario alcanzar el final de la operación de
posicionamiento. De lo contrario, las salidas se desconectan y se notifica el fallo operativo
"Error en la aproximación al destino" (número de error 5).
● Vigilancia de la zona de destino
El FM x51 crea un área simétrica alrededor de cada destino y define con ello la precisión de
posicionamiento de su aplicación. Dentro de esta área es preciso que el eje se pare durante
una aproximación al destino. Una especificación de valor 0 desconecta la tolerancia en la
aproximación al destino.
● Vigilancia de la velocidad de parada
La velocidad de parada permite determinar si el accionamiento se para dentro de la zona
de destino. Una vez alcanzado el punto de desconexión, el FM x51 vigila si la velocidad real
del accionamiento es inferior a la velocidad de parada.
La velocidad de parada debe rebasarse por defecto dentro de la zona de trabajo. De lo
contrario, el FM x51 notifica el fallo operativo "Rebasar zona de destino" (número de error
10).
El desbordamiento por defecto de la velocidad de parada sólo se vigila una vez por
aproximación al destino.
Tenga en cuenta en este caso que la velocidad de parada para la determinación de la
velocidad del módulo puede rebasarse temporalmente por defecto si el eje se mueve con
una velocidad de posicionamiento muy pequeña (menos de 2 impulsos por 8 ms).
● Vigilancia de la zona de parada
Tras finalizar una operación de posicionamiento se vigila si el accionamiento se detiene en
una posición de destino alcanzada o si se aleja de ella.
La zona de parada se vigila
– después de que el FM x51 haya notificado la señal de realimentación "PEH",
– si el tiempo de vigilancia se rebasa por exceso,
– si la velocidad de parada se rebasa por defecto.
Si la zona de parada se abandona sin una petición de marcha válida, el FM x51 notifica el
fallo operativo "Abandonar zona de parada" (número de error 6).

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2801

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Aproximación al destino
La aproximación al destino en los modos de operación "Modo incremental absoluto" y "Modo
incremental relativo" comienza cuando se alcanza el punto de desconexión. A partir de este
punto se desconecta el accionamiento y el FM x51 se hace cargo de las funciones de vigilancia.
En función de las vigilancias que se hayan parametrizado, surgen diferentes casos para la
creación de la señal de repuesta "PEH (POS_RCD)". La operación de posicionamiento se
cancela cuando se crea la señal "PEH (POS_RCD)".
Caso 1: Se ha parametrizado lo siguiente:
● Zona de destino (TRG_RANGE) > 0
● Velocidad de parada (ZSPEED_L) > 0
● Tiempo de vigilancia (MON_TIME) > 0
Se genera una PEH si la velocidad de parada se rebasa por defecto y se alcanza la zona de
destino. Es irrelevante la condición que se cumpla en primer lugar.
No se genera PEH si el valor real no alcanza la zona de destino dentro del tiempo de vigilancia
o si la zona de destino se sobrepasa sin rebasar por defecto la velocidad de parada.
La siguiente figura muestra la aproximación al destino en modo incremental con zona de
destino > 0 y velocidad de parada > 0.


PP









2EMHWLYR

PP


YOHQWD



Y9HORFLGDGGHSDUDGD

W

①
②
③
④
⑤
⑥
tÜ

Distancia de cambio de velocidad positiva
Distancia de desconexión positiva
Zona de parada
Zona de destino
Velocidad de parada alcanzada
Zona de destino con Vparada alcanzada: PEH se activa
Tiempo de vigilancia

Caso 2: Se ha parametrizado lo siguiente:
● Zona de destino (TRG_RANGE) > 0
● Velocidad de parada (ZSPEED_L) = 0
● Tiempo de vigilancia (MON_TIME) > 0

2802

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Se genera una PEH si se alcanza la zona de destino.
No se genera una PEH si el valor real no alcanza la zona de destino dentro del tiempo de
vigilancia.
La siguiente figura muestra la aproximación al destino en modo incremental con zona de
destino > 0 y velocidad de parada = 0.


PP









2EMHWLYR PP

YOHQWD



W

①
②
③
④
⑤
tÜ

Distancia de cambio de velocidad positiva
Distancia de desconexión positiva
Zona de parada
Zona de destino
Zona de destino con Vparada alcanzada: PEH se activa
Tiempo de vigilancia

Caso 3: Se ha parametrizado lo siguiente:
● Zona de destino (TRG_RANGE) = 0
● Velocidad de parada (ZSPEED_L) > 0
● Tiempo de vigilancia (MON_TIME) > 0
Se genera una PEH si la velocidad de parada se rebasa por defecto y se alcanza el destino.
No se genera una PEH si el valor real no alcanza el destino dentro del tiempo de vigilancia o
si la zona de destino se sobrepasa sin rebasar por defecto la velocidad de parada.
La siguiente figura muestra la aproximación al destino en modo incremental con zona de
destino = 0 y velocidad de parada > 0.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2803

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)


PP





2EMHWLYR PP




YOHQWD
Y9HORFLGDGGHSDUDGD


W

①
②
③
④
⑤
tÜ

Distancia de cambio de velocidad positiva
Distancia de desconexión positiva
Zona de parada
Velocidad de parada alcanzada
Destino alcanzado: PEH se activa
Tiempo de vigilancia

Caso 4: Se ha parametrizado lo siguiente:
● Zona de destino (TRG_RANGE) = 0
● Velocidad de parada (ZSPEED_L) = 0
● Tiempo de vigilancia (MON_TIME) > 0
Se genera una PEH si se alcanza el destino.
No se genera una PEH si el valor real no alcanza el destino dentro del tiempo de vigilancia.
La siguiente figura muestra la aproximación al destino en modo incremental con zona de
destino = 0 y velocidad de parada = 0.

2804

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

PP





2EMHWLYR PP



YOHQWD


W

①
②
③
④
tÜ

Distancia de cambio de velocidad positiva
Distancia de desconexión positiva
Zona de parada
Destino alcanzado: PEH se activa
Tiempo de vigilancia

Caso 5: Se ha parametrizado lo siguiente:
● Zona de destino (TRG_RANGE) ≥ 0
● Velocidad de parada (ZSPEED_L) ≥ 0
● Tiempo de vigilancia (MON_TIME) = 0
Si en este caso el accionamiento se para delante de la zona de destino, el final de la operación
de posicionamiento no se detecta. No se genera una PEH y la señal de realimentación
WORKING permanece activada. La operación de posicionamiento sólo puede cancelarse
eliminando la habilitación del accionamiento (DRV_EN = 0).

Desactivación sin destino predeterminado
Desactivación significa: El proceso de posicionamiento se cierra de forma precisa
manteniendo las diferencias desde la marcha rápida a la marcha lenta.
La operación de posicionamiento se desactiva si:
● el FM x51 recibe una señal de STOP (STOP = 1);
● los modos de operación "Jog" y "Búsqueda del punto de referencia" finalizan;
● aparecen errores de operador o el fallo operativo "Rebasar destino" " (número de error 9).
La señal de realimentación "PEH (POS_RCD)" no se activa. Los procesos son análogos a los
de la aproximación al destino.
La siguiente figura muestra la desactivación de una operación de posicionamiento.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2805

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

PP







PP

YU£SLGD
YOHQWD

SRUHMHPSOR3$5$'$

①
②
③

)LQGHOSRVLFLRQDPLHQWR

Distancia de cambio de velocidad positiva
Distancia de desconexión positiva
Zona de destino

Cancelar
Cancelar significa: La operación de posicionamiento finaliza inmediatamente sin que se
utilicen la distancia de cambio de velocidad ni la distancia de desconexión de la marcha rápida
o la marcha lenta después de la parada. Para ello, todas las salidas relevantes del modo de
control pertinente se desconectan inmediatamente y, además:
● Incremento = valor real
● Recorrido residual = Cero
La operación de posicionamiento se cancela si:
● la señal de habilitación del accionamiento se borra (DRV_EN = 0);
● la CPU pasa a STOP;
● aparecen errores de diagnóstico u otros fallos operativos aparte del error "Rebasar destino"
" (número de error 9).
La señal de realimentación "PEH (POS_RCD)" no se activa en el modo de operación "Modo
incremental".
Cuando la velocidad de parada está parametrizada, la vigilancia de parada se activa en cuanto
se rebasa por defecto. Cuando la velocidad de parada está parametrizada, la vigilancia de
parada se activa con la desactivación de las salidas.
La siguiente figura muestra la cancelación de una operación de posicionamiento.
YU£SLGD
YOHQWD

&DQFHODU

2806

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Datos utilizados en el DB de parámetros
Dirección

Nombre

Tipo

valor inicial

Comentarios

76.0

TRG_RANGE

DINT

L#1000

Zona de destino

80.0

MON_TIME

DINT

L#2000

Tiempo de vigilancia

84.0

ZSPEED_R

DINT

L#1000

Zona de parada

88.0

ZSPEED_L

DINT

L#30000

Velocidad de parada

Señales de respuesta en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

23.1

WORKING

BOOL

FALSE

1 = Operación de posicionamiento en curso

25.7

POS_RCD

BOOL

FALSE

1 = Posición alcanzada

Modo de operación "Jog"
Definición
En el modo de operación "Jog", el accionamiento se mueve en un sentido al pulsar una tecla.
Para los dos sentidos (positivo y negativo) es preciso instalar sendos botones. El modo de
operación "Jog" se puede utilizar tanto para el eje sincronizado como para el eje no
sincronizado.
Si el eje no está sincronizado, el modo "Jog" permite realizar un posicionamiento en el sentido
preestablecido.
Si el eje está sincronizado (eje lineal), el modo "Jog" permite realizar un posicionamiento en el
final de carrera por software.

Requisitos
El eje debe estar parametrizado.

Desarrollo del modo de operación "Jog"
1. Active la señal de control para el modo de operación "Jog" (MODE_IN = 1).
2. Active la señal de control para la habilitación del accionamiento (DRV_EN = 1).
3. Active el selector de función para "No evaluar la entrada de habilitación" (EI_OFF = 1) o
cablee la entrada de habilitación para el canal correspondiente.
4. Introduzca la velocidad de inicio.
– Marcha rápida (MODE_TYPE = 1)
– Marcha lenta (MODE_TYPE = 0)
5. Conecte la señal de control para el sentido de marcha positivo o negativo (DIR_P = 1 o
DIR_M = 1).
6. Llame la instrucción ABS_CTRL o ABS_CTRL_451.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2807

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

La figura siguiente muestra un ejemplo del modo de operación "Jog".
02'(B,1 
-2*
'59B(1
+DELOLWDFLµQGHODFFLRQDPLHQWR
[O
(QWUDGDGH
KDELOLWDFLµQ
:$,7B(,
',5B0',5B3

:25.,1*

YU£SLGD
YOHQWD
V

Datos utilizados en el DB de canal
Dirección

Nombre

Tipo

valor inicial

Comentarios

15.2

DIR_M

BOOL

FALSE

1 = Sentido negativo

15.3

DIR_P

BOOL

FALSE

1 = Sentido positivo

15.7

DRV_EN

BOOL

FALSE

1 = Conectar habilitación del accionamiento

16.0

MODE_IN

BYTE

B#16#0

1 = Jog

17.0

MODE_TYPE

BYTE

B#16#0

1 = Marcha rápida

23.0

ST_ENBLD

BOOL

FALSE

1 = Habilitar inicio

23.1

WORKING

BOOL

FALSE

1 = Operación de posicionamiento en curso

23.2

WAIT_EI

BOOL

FALSE

1 = El eje espera una habilitación externa

34.2

EI_OFF

BOOL

FALSE

1 = No evaluar entrada de habilitación

0 = Marcha lenta

Desactivación del modo Jog
El modo de operación "Jog" se desactiva cuando
● se vuelve a abrir el botón con el que realiza el modo "Jog" (DIR_M = 0 o DIR_P = 0);
● el FM 451 recibe una señal de STOP (STOP = 1),
● el valor real de un eje lineal sincronizado alcanza el límite de la zona de trabajo. La
continuación de la marcha sólo es posible en el sentido contrario.

2808

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
Tras desactivar la marcha puede continuarse la marcha en el sentido que se desee.

Cancelación del modo Jog
El modo de operación "Jog" se cancela cuando
● la señal de habilitación del accionamiento se borra (DRV_EN = 0),
● se ha rebasado un límite de la zona de desplazamiento en un eje lineal.

Vigilancias
En el modo de operación "Jog" no están activas, al final del posicionamiento, las siguientes
vigilancias:
● Vigilancia de la zona de parada
● Vigilancia de la zona de destino
● Vigilancia de la velocidad de parada
El modo "Jog" no produce un posicionamiento correcto en el que al final se activa la señal
"Posición alcanzada".

Límite de la zona de trabajo en un eje lineal
Los límites para el modo "Jog" son distintos en función de si el eje está sincronizado o no
sincronizado.

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

2809

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)
La tabla siguiente muestra el modo "Jog" con un eje sincronizado y no sincronizado.
El eje no está sincronizado.

El eje está sincronizado.

Si en el modo "Jog" se rebasa el límite de la zona de despla‐ El modo "Jog" representa un posicionamiento en destinos
zamiento.
que están separados de los finales de carrera por software en
toda el área de destino.
● el indicador del valor real ya no es válido.
● se cancela la operación de posicionamiento.

 P

Los límites de la zona de trabajo se calculan a partir de

● SEE - ½ zona de destino para el final del eje lineal en el
sentido positivo
● SEE + ½ zona de destino para el final del eje lineal en el
sentido negativo
Si no abre antes el botón, el FM 451 se desconecta en un
punto que se encuentra la mitad del área de destino delante
del final de carrera por software correspondiente. El FM 451
activa todas las áreas que se necesitan para la desactivación
correcta alrededor de este punto de destino.

El indicador del valor real ya no es válido

2EMHWLYRP£[LPR )&6)





= Área de la zona de trabajo en la que no puede haber
ninguna posición de destino

① = Distancia de cambio de velocidad positiva
② = Distancia de desconexión positiva
③ = ½ zona de destino
Modo de operación "Búsqueda del punto de referencia"
Definición

El modo de operación "Búsqueda del punto de referencia" permite sincronizar el eje en función
de un evento externo repetitivo.

2810

Utilizar funciones tecnológicas
Manual de programación y manejo, 11/2019

Control de movimiento
6.3 Control de movimiento (S7-300, S7-400)

Requisitos
● Un encóder incremental con señal cero.
● El eje debe estar parametrizado:
Conexiones

Canal 1

Canal 2

Canal 3

Entrada digital 2I0
Entrada digital 3I0
Sensor del punto de refe‐ Entrada digital 1I0
rencia
El sensor del punto de referencia debe estar estructurado de tal modo
que, el accionamiento, puede cambiar de forma segura de la marcha
rápida a la marcha lenta en el área del interruptor.
Contacto inversor

Entrada digital 1I1

Entrada digital 2I1

Entrada digital 3I1

Durante la parametrización asegúrese de que el inicio de la búsqueda
del punto de referencia esté parametrizada en el sentido del contacto
inversor. Sólo así puede garantizarse que el sensor del punto de refe‐
rencia se encontrará siempre sin problemas.
Entrada de habilitación

Entrada digital 1I2

Entrada digital 2I2

Entrada digital 3I2

Desarrollo del modo de operación "Búsqueda del punto de referencia"
El botón del sentido de desplazamiento positivo y negativo debe instalarse para cada canal.
1. Introduzca el valor de la coordenada del punto de referencia en el DB de parámetros
(REFPT).
2. Introduzca el tipo de "Búsqueda del punto de referencia" en el DB de parámetros.
Para ello, existen las posibilidades siguientes:
Inicio en se